{"items":[{"tags":["java","api","groovy"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1647343961,"post_id":71481229,"comment_id":126342390,"body_markdown":"You can execute groovy script fro java.","body":"You can execute groovy script fro java."},{"owner":{"account_id":16602983,"reputation":53,"user_id":11998134,"display_name":"Davidge"},"score":0,"creation_date":1647348147,"post_id":71481229,"comment_id":126343878,"body_markdown":"Sorry, I dont want to execute the groovy script, I want to analyze the source!","body":"Sorry, I dont want to execute the groovy script, I want to analyze the source!"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1647349026,"post_id":71481229,"comment_id":126344264,"body_markdown":"Well, then get ready to long ride. You need to write/find groovy parser and analyze parsing tree. It isn&#39;t that difficult, but may require some learning if you don&#39;t have expertise in this area.","body":"Well, then get ready to long ride. You need to write/find groovy parser and analyze parsing tree. It isn&#39;t that difficult, but may require some learning if you don&#39;t have expertise in this area."},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1647417776,"post_id":71481229,"comment_id":126362840,"body_markdown":"Could you share one of the scripts and clarify what you want to detect. You could try to use http://docs.groovy-lang.org/latest/html/gapi/org/codehaus/groovy/ast/builder/AstBuilder.html to parse script to a tree and then analyse it.","body":"Could you share one of the scripts and clarify what you want to detect. You could try to use <a href=\"http://docs.groovy-lang.org/latest/html/gapi/org/codehaus/groovy/ast/builder/AstBuilder.html\" rel=\"nofollow noreferrer\">docs.groovy-lang.org/latest/html/gapi/org/codehaus/groovy/as&zwnj;&#8203;t/&hellip;</a> to parse script to a tree and then analyse it."}],"owner":{"account_id":16602983,"reputation":53,"user_id":11998134,"display_name":"Davidge"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647342541,"creation_date":1647342541,"question_id":71481229,"body_markdown":"we have a large repository with hundreds of groovy scripts used by jenkins for a deployment job:\r\n\r\n    def CRON_CONDITION = &#39;H 1 * * *&#39;\r\n    def PARAMS = [[&#39;key1&#39;,&#39;value1&#39;,&#39;description1&#39;],\r\n    \t\t\t  [&#39;key2&#39;,&#39;value2&#39;,&#39;description2&#39;]]\r\n\r\nFor a test case and reporting, I want to analyse these variables of each groovy script. Is it possible to parse that groovy script in java to get the declared values of the variables? I tried to read and parse the file in text mode line by line but its a weak concept.\r\n\r\nThanks for an answer!\r\n\r\nBest regards\r\nDavidge","title":"Analyze groovy script with java","body":"<p>we have a large repository with hundreds of groovy scripts used by jenkins for a deployment job:</p>\n<pre><code>def CRON_CONDITION = 'H 1 * * *'\ndef PARAMS = [['key1','value1','description1'],\n              ['key2','value2','description2']]\n</code></pre>\n<p>For a test case and reporting, I want to analyse these variables of each groovy script. Is it possible to parse that groovy script in java to get the declared values of the variables? I tried to read and parse the file in text mode line by line but its a weak concept.</p>\n<p>Thanks for an answer!</p>\n<p>Best regards\nDavidge</p>\n"},{"tags":["java","arrays","data-structures"],"comments":[{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":3,"creation_date":1647328354,"post_id":71478188,"comment_id":126337033,"body_markdown":"When `i` becomes `8` the loop terminates. The `8` you print is the value of `a[7]`.","body":"When <code>i</code> becomes <code>8</code> the loop terminates. The <code>8</code> you print is the value of <code>a[7]</code>."},{"owner":{"account_id":16904098,"reputation":627,"user_id":12224743,"display_name":"Umeshwaran"},"score":1,"creation_date":1647328436,"post_id":71478188,"comment_id":126337053,"body_markdown":"That&#39;s how ```for``` loop works . After checking the index of &#39;7&#39; , ```for``` loop again gets executed . It will first iterate ```i``` . So now ```i``` becomes 8 . then it will move to check the condition. The condition in the for loop fails . So the loop breaks , but the value of ```i``` will reamin as 8","body":"That&#39;s how <code>for</code> loop works . After checking the index of &#39;7&#39; , <code>for</code> loop again gets executed . It will first iterate <code>i</code> . So now <code>i</code> becomes 8 . then it will move to check the condition. The condition in the for loop fails . So the loop breaks , but the value of <code>i</code> will reamin as 8"}],"answers":[{"tags":[],"owner":{"account_id":18924081,"reputation":64,"user_id":13807582,"display_name":"Hiten Tandon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647342448,"creation_date":1647328569,"answer_id":71478250,"question_id":71478188,"body_markdown":"A loop exits when the condition of the loop becomes false, the condition of your loop is `i&lt;=7`, which becomes false at `i=8`; thus, you get the value `i=8` at the end.","title":"the output of for loop is not what I expect","body":"<p>A loop exits when the condition of the loop becomes false, the condition of your loop is <code>i&lt;=7</code>, which becomes false at <code>i=8</code>; thus, you get the value <code>i=8</code> at the end.</p>\n"}],"owner":{"account_id":24431404,"reputation":11,"user_id":18356293,"display_name":"Ahmed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1647342448,"creation_date":1647328084,"question_id":71478188,"body_markdown":"My code for finding the index of an element :\r\n\r\n    \r\n        int[] a = {1,2,3,4,5,6,7,8};\r\n        int LowerBound =0;\r\n        int UpperBound = a.length-1;\r\n\r\n        int s = 10;\r\n        int i = 0 ;\r\n        for(i=0 ; i &lt;=UpperBound;i++ )\r\n        {\r\n            System.out.print(&quot;[&quot;+i+&quot;] &quot;+a[i]);\r\n            if(s==a[i])\r\n            {\r\n                break;\r\n            }\r\n\r\n        }\r\n        \r\n        if(i&gt;UpperBound)\r\n        {\r\n            System.out.println(&quot;Value Doesn&#39;t Exist&quot;);\r\n            System.out.println(i);\r\n        }\r\n\r\nThe out Put:\r\n\r\n    [0] 1[1] 2[2] 3[3] 4[4] 5[5] 6[6] 7[7] 8\r\n    Value Doesn&#39;t Exist\r\n    8\r\n\r\n\r\nI can&#39;t understand how i variable became 8 although its value in the loop is 7. \r\n\r\n\r\n","title":"the output of for loop is not what I expect","body":"<p>My code for finding the index of an element :</p>\n<pre><code>    int[] a = {1,2,3,4,5,6,7,8};\n    int LowerBound =0;\n    int UpperBound = a.length-1;\n\n    int s = 10;\n    int i = 0 ;\n    for(i=0 ; i &lt;=UpperBound;i++ )\n    {\n        System.out.print(&quot;[&quot;+i+&quot;] &quot;+a[i]);\n        if(s==a[i])\n        {\n            break;\n        }\n\n    }\n    \n    if(i&gt;UpperBound)\n    {\n        System.out.println(&quot;Value Doesn't Exist&quot;);\n        System.out.println(i);\n    }\n</code></pre>\n<p>The out Put:</p>\n<pre><code>[0] 1[1] 2[2] 3[3] 4[4] 5[5] 6[6] 7[7] 8\nValue Doesn't Exist\n8\n</code></pre>\n<p>I can't understand how i variable became 8 although its value in the loop is 7.</p>\n"},{"tags":["java","linked-list"],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1350932104,"creation_date":1350932104,"answer_id":13017872,"question_id":13017819,"body_markdown":"First of all, if you are creating your own `LinkedList` class, you should name it as such rather than using the existing `LinkedList` class. So, rather you can use `MyLinkedList`\r\n\r\nSecond, you can&#39;t access the elements in the LinkedList by index. That is not how `LinkedList` works, or should work if you are creating your own. Rather you get them based on the value. So, you should pass the value to your `get` method, and iterate through your `LinkedList` to get the appropriate `Link` with the given value.","title":"Making a custom linked list class -- need help implementing get method","body":"<p>First of all, if you are creating your own <code>LinkedList</code> class, you should name it as such rather than using the existing <code>LinkedList</code> class. So, rather you can use <code>MyLinkedList</code></p>\n\n<p>Second, you can't access the elements in the LinkedList by index. That is not how <code>LinkedList</code> works, or should work if you are creating your own. Rather you get them based on the value. So, you should pass the value to your <code>get</code> method, and iterate through your <code>LinkedList</code> to get the appropriate <code>Link</code> with the given value.</p>\n"},{"tags":[],"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1350932220,"creation_date":1350932220,"answer_id":13017905,"question_id":13017819,"body_markdown":"LinkedList is supposed to have O(n) for finding the element.\r\n\r\nSo essentially what this means is that you need to keep doing element.next till you reach the nth index.","title":"Making a custom linked list class -- need help implementing get method","body":"<p>LinkedList is supposed to have O(n) for finding the element.</p>\n\n<p>So essentially what this means is that you need to keep doing element.next till you reach the nth index.</p>\n"},{"tags":[],"owner":{"account_id":1932818,"reputation":46083,"user_id":1741864,"display_name":"sampson-chen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1350932822,"creation_date":1350932273,"answer_id":13017918,"question_id":13017819,"body_markdown":"Assuming that `get(0)` returns you the first element:\r\n\r\nIf you want to put this method inside `public class LinkedList:`\r\n\r\n        public String get(int index)\r\n        {\r\n            assert( index &gt;= 0 )\r\n            Link current = this.first;\r\n            while (index &gt; 0) {\r\n                index--;\r\n                current = current.next;\r\n                // Check to see if this is out of bounds of the links\r\n                if (current == Null) {\r\n                    // Since you are returning a String, you can also return\r\n                    // some kind of a flag to say that the index is out of bounds\r\n                    return Null;\r\n                }\r\n            }\r\n            return current.item;       \r\n        }\r\n\r\nAlternatively, you can also implement this inside `public class Link:`, but this is not advisable since it wastes space on your call stack:\r\n\r\n        public String get(int index)\r\n        {\r\n            assert ( index &gt;= 0 )\r\n            if ( index == 0 ) {\r\n                return this.item;\r\n            } else {\r\n                index--;\r\n                if ( next == null ) {\r\n                    return Null;\r\n                }\r\n                return next.get(index)\r\n            }\r\n        }\r\n\r\nand inside public class LinkedList:\r\n\r\n        public String get(int index)\r\n        {\r\n             return first.get(index);\r\n        }\r\n\r\nHope this helps!","title":"Making a custom linked list class -- need help implementing get method","body":"<p>Assuming that <code>get(0)</code> returns you the first element:</p>\n\n<p>If you want to put this method inside <code>public class LinkedList:</code></p>\n\n<pre><code>    public String get(int index)\n    {\n        assert( index &gt;= 0 )\n        Link current = this.first;\n        while (index &gt; 0) {\n            index--;\n            current = current.next;\n            // Check to see if this is out of bounds of the links\n            if (current == Null) {\n                // Since you are returning a String, you can also return\n                // some kind of a flag to say that the index is out of bounds\n                return Null;\n            }\n        }\n        return current.item;       \n    }\n</code></pre>\n\n<p>Alternatively, you can also implement this inside <code>public class Link:</code>, but this is not advisable since it wastes space on your call stack:</p>\n\n<pre><code>    public String get(int index)\n    {\n        assert ( index &gt;= 0 )\n        if ( index == 0 ) {\n            return this.item;\n        } else {\n            index--;\n            if ( next == null ) {\n                return Null;\n            }\n            return next.get(index)\n        }\n    }\n</code></pre>\n\n<p>and inside public class LinkedList:</p>\n\n<pre><code>    public String get(int index)\n    {\n         return first.get(index);\n    }\n</code></pre>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":390363,"reputation":7217,"user_id":750378,"accept_rate":69,"display_name":"DaveFar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350932545,"creation_date":1350932545,"answer_id":13017992,"question_id":13017819,"body_markdown":"&lt;h2&gt; recursive &lt;/h2&gt;\r\n\r\n     public String get(int index)\r\n            {\r\n                assert index &gt;= 0;\r\n                return get(index, first);       \r\n            }\r\n    \r\n     public String get(int index, Link cursor) {\r\n             if (cursor == null) {\r\n                return null;\r\n             } else if (index == 0) {\r\n                return cursor.toString();\r\n             } else {\r\n               return get(index-1, cursor.next);\r\n             }\r\n      }\r\n\r\n&lt;h2&gt; iterative &lt;/h2&gt;\r\n\r\n    public String get(int index)\r\n    {\r\n        assert index &gt;= 0;\r\n        Link cursor = first;\r\n        while (index &gt; 0) {\r\n           if (cursor == null) {\r\n                return null;\r\n            }\r\n            cursor = cursor.next;\r\n            index--;\r\n        }\r\n        return cursor.toString();       \r\n    }\r\n\r\n\r\n","title":"Making a custom linked list class -- need help implementing get method","body":"<h2> recursive </h2>\n\n<pre><code> public String get(int index)\n        {\n            assert index &gt;= 0;\n            return get(index, first);       \n        }\n\n public String get(int index, Link cursor) {\n         if (cursor == null) {\n            return null;\n         } else if (index == 0) {\n            return cursor.toString();\n         } else {\n           return get(index-1, cursor.next);\n         }\n  }\n</code></pre>\n\n<h2> iterative </h2>\n\n<pre><code>public String get(int index)\n{\n    assert index &gt;= 0;\n    Link cursor = first;\n    while (index &gt; 0) {\n       if (cursor == null) {\n            return null;\n        }\n        cursor = cursor.next;\n        index--;\n    }\n    return cursor.toString();       \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1889825,"reputation":435,"user_id":1708220,"display_name":"Dan Iliescu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350932832,"creation_date":1350932832,"answer_id":13018060,"question_id":13017819,"body_markdown":"This should help you with what you need:\r\n\r\nhttp://www.dreamincode.net/forums/topic/143089-linked-list-tutorial/","title":"Making a custom linked list class -- need help implementing get method","body":"<p>This should help you with what you need:</p>\n\n<p><a href=\"http://www.dreamincode.net/forums/topic/143089-linked-list-tutorial/\" rel=\"nofollow\">http://www.dreamincode.net/forums/topic/143089-linked-list-tutorial/</a></p>\n"}],"owner":{"account_id":995455,"reputation":505,"user_id":1011528,"accept_rate":74,"display_name":"ThisBetterWork"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6008,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":13017918,"answer_count":5,"score":1,"last_activity_date":1647342162,"creation_date":1350931933,"question_id":13017819,"body_markdown":"I&#39;m trying to make a custom linked list, so far I&#39;ve figured out how to make the general structure and the two easiest methods (`insertFirst` and `deleteFirst`). The next thing I want to do is make a get method that takes the index of a link and then returns the string at that location. I don&#39;t have any index or address assigned to each link, so I don&#39;t see how to refer to a specific location in my linked list. I see that if I write `first.next` I get the second item, and `first.next.next` I get the third item.. But I need to figure out how to make my index parameter (the one passed into the get method) correlate with the proper location in my list. How can I do this? \r\n\r\nHere&#39;s my code:\r\n\r\n**Test code**:\r\n\r\n     class LinkedListTest {\r\n        public static void main(String[] args)\r\n        {\r\n            LinkedList list = new LinkedList();\r\n            \r\n            list.insertFirst(&quot;cat&quot;);\r\n            list.insertFirst(&quot;dog&quot;);\r\n            list.insertFirst(&quot;fish&quot;);\r\n            list.insertFirst(&quot;cow&quot;);\r\n            list.insertFirst(&quot;horse&quot;);\r\n            list.insertFirst(&quot;pig&quot;);\r\n            list.insertFirst(&quot;chicken&quot;);\r\n            \r\n            System.out.println(list.get(1));\r\n            \r\n        }\r\n    }\r\n    \r\n    \r\n**My class**:\r\n    \r\n    public class LinkedList\r\n    {\r\n        private Link first;\r\n        \r\n        \r\n        public LinkedList()\r\n        {\r\n            first = null;\r\n        }\r\n        \r\n        public void insertFirst(String word)\r\n        {\r\n            Link link = new Link(word);\r\n            link.next = first;\r\n            first = link;\r\n        }\r\n        \r\n        public String deleteFirst()\r\n        {\r\n            Link temp = first;\r\n            first = first.next;\r\n            return temp.toString();\r\n        }\r\n        \r\n        public String get(int index)\r\n        {\r\n            // the following is just to show that I can access different links\r\n            // by adding more .next&#39;s after first--- but i need a way to access\r\n            // the correct link based on the index passed in\r\n            \r\n            // String second = first.next.item;\r\n            String third = first.next.next.item;\r\n            // String fourth= first.next.next.next.item\r\n            \r\n            return third;\r\n        }\r\n        \r\n    }\r\n    \r\n    \r\n    \r\n    public class Link\r\n    {\r\n        public String item;\r\n        public Link next;\r\n        \r\n        \r\n        //Link constructor\r\n        public Link(String theItem)\r\n        {\r\n            item = theItem;\r\n        }\r\n    }","title":"Making a custom linked list class -- need help implementing get method","body":"<p>I'm trying to make a custom linked list, so far I've figured out how to make the general structure and the two easiest methods (<code>insertFirst</code> and <code>deleteFirst</code>). The next thing I want to do is make a get method that takes the index of a link and then returns the string at that location. I don't have any index or address assigned to each link, so I don't see how to refer to a specific location in my linked list. I see that if I write <code>first.next</code> I get the second item, and <code>first.next.next</code> I get the third item.. But I need to figure out how to make my index parameter (the one passed into the get method) correlate with the proper location in my list. How can I do this?</p>\n<p>Here's my code:</p>\n<p><strong>Test code</strong>:</p>\n<pre><code> class LinkedListTest {\n    public static void main(String[] args)\n    {\n        LinkedList list = new LinkedList();\n        \n        list.insertFirst(&quot;cat&quot;);\n        list.insertFirst(&quot;dog&quot;);\n        list.insertFirst(&quot;fish&quot;);\n        list.insertFirst(&quot;cow&quot;);\n        list.insertFirst(&quot;horse&quot;);\n        list.insertFirst(&quot;pig&quot;);\n        list.insertFirst(&quot;chicken&quot;);\n        \n        System.out.println(list.get(1));\n        \n    }\n}\n</code></pre>\n<p><strong>My class</strong>:</p>\n<pre><code>public class LinkedList\n{\n    private Link first;\n    \n    \n    public LinkedList()\n    {\n        first = null;\n    }\n    \n    public void insertFirst(String word)\n    {\n        Link link = new Link(word);\n        link.next = first;\n        first = link;\n    }\n    \n    public String deleteFirst()\n    {\n        Link temp = first;\n        first = first.next;\n        return temp.toString();\n    }\n    \n    public String get(int index)\n    {\n        // the following is just to show that I can access different links\n        // by adding more .next's after first--- but i need a way to access\n        // the correct link based on the index passed in\n        \n        // String second = first.next.item;\n        String third = first.next.next.item;\n        // String fourth= first.next.next.next.item\n        \n        return third;\n    }\n    \n}\n\n\n\npublic class Link\n{\n    public String item;\n    public Link next;\n    \n    \n    //Link constructor\n    public Link(String theItem)\n    {\n        item = theItem;\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":4656062,"reputation":273,"user_id":3771647,"display_name":"Har Krishan"},"score":1,"creation_date":1512382975,"post_id":47631069,"comment_id":82219997,"body_markdown":"try using byte[] for userImage property","body":"try using byte[] for userImage property"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1512383147,"post_id":47631069,"comment_id":82220102,"body_markdown":"Use the proper `@Transient` annotation the one from `javax.persistence` NOT the spring data one.","body":"Use the proper <code>@Transient</code> annotation the one from <code>javax.persistence</code> NOT the spring data one."}],"answers":[{"tags":[],"owner":{"account_id":4219904,"reputation":2104,"user_id":3454928,"accept_rate":43,"display_name":"Kalaiselvan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1647342161,"creation_date":1512383478,"answer_id":47631302,"question_id":47631069,"body_markdown":"`@Transient` package is from\r\n```\r\nimport javax.persistence.*\r\n```\r\nnot from\r\n```\r\nimport org.springframework.data.annotation.Transient\r\n```","title":"@Transient not working properly in JPA","body":"<p><code>@Transient</code> package is from</p>\n<pre><code>import javax.persistence.*\n</code></pre>\n<p>not from</p>\n<pre><code>import org.springframework.data.annotation.Transient\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12358760,"reputation":687,"user_id":9013717,"display_name":"Sankar"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1512383519,"creation_date":1512383519,"answer_id":47631315,"question_id":47631069,"body_markdown":"There are two mistakes I have noticed in your model class. \r\n1. Import the import javax.persistence.Transient;\r\n2. Remove Transient anotation from your setter method.\r\n\r\n    @Transient\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n    \r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }","title":"@Transient not working properly in JPA","body":"<p>There are two mistakes I have noticed in your model class. \n1. Import the import javax.persistence.Transient;\n2. Remove Transient anotation from your setter method.</p>\n\n<pre><code>@Transient\npublic String getPassword() {\n    return password;\n}\n\npublic void setPassword(String password) {\n    this.password = password;\n}\n</code></pre>\n"}],"owner":{"account_id":10799616,"reputation":45,"user_id":7944082,"display_name":"ajmaks"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4835,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":47631315,"answer_count":2,"score":4,"last_activity_date":1647342161,"creation_date":1512382719,"question_id":47631069,"body_markdown":"I have a problem using JPA and `@Transient` annotation. I&#39;m working with Spring Boot and MySQL database. Have no idea how to get rid of this mapping error. It seems that JPA is trying to create database entry for `MultipartFile` despite `@Transient` annotation. I&#39;ve tried adding `@Transient` annotation to getter and setter as well, but error is the same. Help me please!\r\n\r\n\r\nError I&#39;m getting:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1583) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1081) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:856) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\r\n\tat com.ajmaks.qaapp.Application.main(Application.java:10) [classes/:na]\r\n\r\n    Caused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:954) ~[hibernate-entitymanager-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:882) ~[hibernate-entitymanager-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:353) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:373) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:362) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1642) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\r\n\t... 16 common frames omitted\r\n    Caused by: org.hibernate.MappingException: Could not determine type for: org.springframework.web.multipart.MultipartFile, at table: user, for columns: [org.hibernate.mapping.Column(user_image)]\r\n\tat org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:431) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:398) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.mapping.Property.isValid(Property.java:225) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:595) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.mapping.RootClass.validate(RootClass.java:265) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:329) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:443) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:879) ~[hibernate-entitymanager-5.0.11.Final.jar:5.0.11.Final]\r\n\r\nMy model class:\r\n\r\n    package com.ajmaks.qaapp.model;\r\n\r\n    import java.util.Set;\r\n\r\n    import javax.persistence.CascadeType;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.JoinColumn;\r\n    import javax.persistence.JoinTable;\r\n    import javax.persistence.ManyToMany;\r\n    import javax.persistence.Table;\r\n    \r\n    import org.hibernate.validator.constraints.Email;\r\n    import org.hibernate.validator.constraints.Length;\r\n    import org.hibernate.validator.constraints.NotEmpty;\r\n    import org.springframework.data.annotation.Transient;\r\n    import org.springframework.web.multipart.MultipartFile;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;user&quot;)\r\n    public class User {\r\n    \r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\t@Column(name = &quot;user_id&quot;)\r\n\tprivate int id;\r\n\t\r\n\t@Column(name = &quot;email&quot;)\r\n\t@Email(message = &quot;*Please provide a valid Email&quot;)\r\n\t@NotEmpty(message = &quot;*Please provide an email&quot;)\r\n\tprivate String email;\r\n\t\r\n\t@Column(name = &quot;password&quot;)\r\n\t@Length(min = 5, message = &quot;*Your password must have at least 5 characters&quot;)\r\n\t@NotEmpty(message = &quot;*Please provide your password&quot;)\r\n\t@Transient\r\n\tprivate String password;\r\n\t\r\n\t@Column(name = &quot;name&quot;)\r\n\tprivate String name;\r\n\t\r\n\t@Column(name = &quot;last_name&quot;)\r\n\tprivate String lastName;\r\n\t\r\n\t@Transient\r\n\tprivate MultipartFile userImage;\r\n\t\r\n\t@ManyToMany(cascade = CascadeType.ALL)\r\n\t@JoinTable(name = &quot;user_role&quot;, joinColumns = @JoinColumn(name = &quot;user_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n\tprivate Set&lt;Role&gt; roles;\r\n\t\r\n\tpublic MultipartFile getUserImage() {\r\n\t\treturn userImage;\r\n\t}\r\n\t\r\n\tpublic void setUserImage(MultipartFile userImage) {\r\n\t\tthis.userImage = userImage;\r\n\t}\r\n\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\t@Transient\r\n\tpublic String getPassword() {\r\n\t\treturn password;\r\n\t}\r\n\r\n\t@Transient\r\n\tpublic void setPassword(String password) {\r\n\t\tthis.password = password;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic String getLastName() {\r\n\t\treturn lastName;\r\n\t}\r\n\r\n\tpublic void setLastName(String lastName) {\r\n\t\tthis.lastName = lastName;\r\n\t}\r\n\r\n\tpublic String getEmail() {\r\n\t\treturn email;\r\n\t}\r\n\r\n\tpublic void setEmail(String email) {\r\n\t\tthis.email = email;\r\n\t}\r\n\r\n\tpublic Set&lt;Role&gt; getRoles() {\r\n\t\treturn roles;\r\n\t}\r\n\r\n\tpublic void setRoles(Set&lt;Role&gt; roles) {\r\n\t\tthis.roles = roles;\r\n\t}\r\n\r\n}","title":"@Transient not working properly in JPA","body":"<p>I have a problem using JPA and <code>@Transient</code> annotation. I'm working with Spring Boot and MySQL database. Have no idea how to get rid of this mapping error. It seems that JPA is trying to create database entry for <code>MultipartFile</code> despite <code>@Transient</code> annotation. I've tried adding <code>@Transient</code> annotation to getter and setter as well, but error is the same. Help me please!</p>\n\n<p>Error I'm getting:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1583) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1081) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:856) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) [spring-boot-1.4.2.RELEASE.jar:1.4.2.RELEASE]\nat com.ajmaks.qaapp.Application.main(Application.java:10) [classes/:na]\n\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:954) ~[hibernate-entitymanager-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:882) ~[hibernate-entitymanager-5.0.11.Final.jar:5.0.11.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:60) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:353) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:373) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:362) ~[spring-orm-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1642) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579) ~[spring-beans-4.3.4.RELEASE.jar:4.3.4.RELEASE]\n... 16 common frames omitted\nCaused by: org.hibernate.MappingException: Could not determine type for: org.springframework.web.multipart.MultipartFile, at table: user, for columns: [org.hibernate.mapping.Column(user_image)]\nat org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:431) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:398) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.mapping.Property.isValid(Property.java:225) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:595) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.mapping.RootClass.validate(RootClass.java:265) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:329) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:443) ~[hibernate-core-5.0.11.Final.jar:5.0.11.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:879) ~[hibernate-entitymanager-5.0.11.Final.jar:5.0.11.Final]\n</code></pre>\n\n<p>My model class:</p>\n\n<pre><code>package com.ajmaks.qaapp.model;\n\nimport java.util.Set;\n\nimport javax.persistence.CascadeType;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.ManyToMany;\nimport javax.persistence.Table;\n\nimport org.hibernate.validator.constraints.Email;\nimport org.hibernate.validator.constraints.Length;\nimport org.hibernate.validator.constraints.NotEmpty;\nimport org.springframework.data.annotation.Transient;\nimport org.springframework.web.multipart.MultipartFile;\n\n@Entity\n@Table(name = \"user\")\npublic class User {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\n@Column(name = \"user_id\")\nprivate int id;\n\n@Column(name = \"email\")\n@Email(message = \"*Please provide a valid Email\")\n@NotEmpty(message = \"*Please provide an email\")\nprivate String email;\n\n@Column(name = \"password\")\n@Length(min = 5, message = \"*Your password must have at least 5 characters\")\n@NotEmpty(message = \"*Please provide your password\")\n@Transient\nprivate String password;\n\n@Column(name = \"name\")\nprivate String name;\n\n@Column(name = \"last_name\")\nprivate String lastName;\n\n@Transient\nprivate MultipartFile userImage;\n\n@ManyToMany(cascade = CascadeType.ALL)\n@JoinTable(name = \"user_role\", joinColumns = @JoinColumn(name = \"user_id\"), inverseJoinColumns = @JoinColumn(name = \"role_id\"))\nprivate Set&lt;Role&gt; roles;\n\npublic MultipartFile getUserImage() {\n    return userImage;\n}\n\npublic void setUserImage(MultipartFile userImage) {\n    this.userImage = userImage;\n}\n\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n@Transient\npublic String getPassword() {\n    return password;\n}\n\n@Transient\npublic void setPassword(String password) {\n    this.password = password;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n\npublic String getLastName() {\n    return lastName;\n}\n\npublic void setLastName(String lastName) {\n    this.lastName = lastName;\n}\n\npublic String getEmail() {\n    return email;\n}\n\npublic void setEmail(String email) {\n    this.email = email;\n}\n\npublic Set&lt;Role&gt; getRoles() {\n    return roles;\n}\n\npublic void setRoles(Set&lt;Role&gt; roles) {\n    this.roles = roles;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","clone","final","multidimensional-array"],"answers":[{"tags":[],"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350015137,"creation_date":1350015137,"answer_id":12852127,"question_id":12852113,"body_markdown":"In case of `Objects`, `final` makes reference can&#39;t be changed, but object state can be changed.\r\n\r\nThat is the reason why you are able to change values of `final MYARRAY_ORIGINAL`","title":"&quot;Final&quot; in java and copying 2D arrays","body":"<p>In case of <code>Objects</code>, <code>final</code> makes reference can't be changed, but object state can be changed.</p>\n\n<p>That is the reason why you are able to change values of <code>final MYARRAY_ORIGINAL</code></p>\n"},{"tags":[],"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1350015546,"creation_date":1350015214,"answer_id":12852138,"question_id":12852113,"body_markdown":"Your `final MYARRAY_ORIGINAL` is indeed read only: you can&#39;t assign a new value to the `MYARRAY_ORIGINAL` reference in other side than class constructor or attribute declaration:\r\n\r\n    public void someMethod() {\r\n        //it won&#39;t compile\r\n        MYARRAY_ORIGINAL = new int[X][];\r\n    }\r\n\r\nThe values inside the array **are not** final. Those values can change anytime in the code.\r\n\r\n    public void anotherMethod() {\r\n        MYARRAY_ORIGINAL[0][0] = 25;\r\n        //later in the code...\r\n        MYARRAY_ORIGINAL[0][0] = 30; //it works!\r\n    }\r\n\r\nIf you indeed need a List of final elements, in other words, a List whose elements can&#39;t be modified, you can use [`Collections.unmodifiableList`](http://tinyurl.com/6vobfqh):\r\n\r\n    List&lt;Integer&gt; items = Collections.unmodifiableList(Arrays.asList(0,1,2,3));\r\n\r\nThe last piece of code was taken from here: [Immutable array in Java](https://stackoverflow.com/q/3700971/1065197)","title":"&quot;Final&quot; in java and copying 2D arrays","body":"<p>Your <code>final MYARRAY_ORIGINAL</code> is indeed read only: you can't assign a new value to the <code>MYARRAY_ORIGINAL</code> reference in other side than class constructor or attribute declaration:</p>\n\n<pre><code>public void someMethod() {\n    //it won't compile\n    MYARRAY_ORIGINAL = new int[X][];\n}\n</code></pre>\n\n<p>The values inside the array <strong>are not</strong> final. Those values can change anytime in the code.</p>\n\n<pre><code>public void anotherMethod() {\n    MYARRAY_ORIGINAL[0][0] = 25;\n    //later in the code...\n    MYARRAY_ORIGINAL[0][0] = 30; //it works!\n}\n</code></pre>\n\n<p>If you indeed need a List of final elements, in other words, a List whose elements can't be modified, you can use <a href=\"http://tinyurl.com/6vobfqh\" rel=\"nofollow noreferrer\"><code>Collections.unmodifiableList</code></a>:</p>\n\n<pre><code>List&lt;Integer&gt; items = Collections.unmodifiableList(Arrays.asList(0,1,2,3));\n</code></pre>\n\n<p>The last piece of code was taken from here: <a href=\"https://stackoverflow.com/q/3700971/1065197\">Immutable array in Java</a></p>\n"},{"tags":[],"owner":{"account_id":1344625,"reputation":3248,"user_id":1285615,"accept_rate":55,"display_name":"sakthisundar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350015725,"creation_date":1350015725,"answer_id":12852208,"question_id":12852113,"body_markdown":"`MYARRAY_ORIGINAL` is indeed read only variable. Your array reference can not be assigned a new value nor for their length of the arrays can be changed. A final variables initialization can be deferred till the constructors is called. If one tries to modify the reference of the final variable, compiler will throw an error message. But what is possible is, one can edit the elements of the `MYARRAY_ORIGINAL` and of the `myArray` i.e one can change the state of the object assigned to a final variable. For example\r\n\r\nClass A {\r\nfinal int[] array;\r\n\r\n     public A() {\r\n      array = new int[10] // deferred initialization of a final variable\r\n      array[0] = 10;\r\n     }\r\n    \r\n     public void method() {\r\n    \r\n     array[0] = 3; // it is allowed\r\n    \r\n      array = new int[20] // not allowed and compiler will throw an error\r\n    \r\n     }\r\n    }\r\n\r\nTo understand more on final please take a look at [Java Language Specification][1] on final variable.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4","title":"&quot;Final&quot; in java and copying 2D arrays","body":"<p><code>MYARRAY_ORIGINAL</code> is indeed read only variable. Your array reference can not be assigned a new value nor for their length of the arrays can be changed. A final variables initialization can be deferred till the constructors is called. If one tries to modify the reference of the final variable, compiler will throw an error message. But what is possible is, one can edit the elements of the <code>MYARRAY_ORIGINAL</code> and of the <code>myArray</code> i.e one can change the state of the object assigned to a final variable. For example</p>\n\n<p>Class A {\nfinal int[] array;</p>\n\n<pre><code> public A() {\n  array = new int[10] // deferred initialization of a final variable\n  array[0] = 10;\n }\n\n public void method() {\n\n array[0] = 3; // it is allowed\n\n  array = new int[20] // not allowed and compiler will throw an error\n\n }\n}\n</code></pre>\n\n<p>To understand more on final please take a look at <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4\" rel=\"nofollow\">Java Language Specification</a> on final variable.</p>\n"},{"tags":[],"owner":{"account_id":1638679,"reputation":5291,"user_id":1511546,"accept_rate":86,"display_name":"Dane Balia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350015908,"creation_date":1350015908,"answer_id":12852238,"question_id":12852113,"body_markdown":"Final does not mean &#39;read-only&#39; per se, but more so &quot;safe publication&#39; for other threads than the one to which it is defined. Another aim of &#39;final&#39; is that it ensures the latest object available in a multi-thread environment.\r\n\r\nSecondly, if you define something as &quot;final&quot;, for example:\r\n\r\n     private final int[][] MYARRAY_ORIGINAL;\r\n\r\nThe reference is &quot;final&quot;, but not the object itself. A much better way to understand it would be this:\r\n\r\n    public static final List myList = new ArrayList();\r\n\r\nNow I can access myList from any other threads - I can modify it (add to it); but I cannot \r\n(a) Declare it again - myList = new ArrayList();\r\n(b) Assign it another list - myList = anotherList;\r\n\r\nThe context for final I would see best, in a multiple-thread scenario.\r\n\r\nBonus: to answer your question, you cannot make a &#39;readonly&#39; array, you will have to manage that yourself (as final, only maintains &#39;read-only&#39; to reference not object)\r\n","title":"&quot;Final&quot; in java and copying 2D arrays","body":"<p>Final does not mean 'read-only' per se, but more so \"safe publication' for other threads than the one to which it is defined. Another aim of 'final' is that it ensures the latest object available in a multi-thread environment.</p>\n\n<p>Secondly, if you define something as \"final\", for example:</p>\n\n<pre><code> private final int[][] MYARRAY_ORIGINAL;\n</code></pre>\n\n<p>The reference is \"final\", but not the object itself. A much better way to understand it would be this:</p>\n\n<pre><code>public static final List myList = new ArrayList();\n</code></pre>\n\n<p>Now I can access myList from any other threads - I can modify it (add to it); but I cannot \n(a) Declare it again - myList = new ArrayList();\n(b) Assign it another list - myList = anotherList;</p>\n\n<p>The context for final I would see best, in a multiple-thread scenario.</p>\n\n<p>Bonus: to answer your question, you cannot make a 'readonly' array, you will have to manage that yourself (as final, only maintains 'read-only' to reference not object)</p>\n"},{"tags":[],"owner":{"account_id":383107,"reputation":50638,"user_id":738746,"accept_rate":97,"display_name":"Bhesh Gurung"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350017286,"creation_date":1350016234,"answer_id":12852288,"question_id":12852113,"body_markdown":"You can use the method [`System.arraycopy`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29) to make a copy of the array as follows -\r\n\r\n    int[][] source = {{1,2},{3,4}};\r\n    int[][] copy = new int[source.length][];\r\n    System.arraycopy(source, 0, copy, 0, source.length);\r\n\r\nAlso, you some problem with your code regarding what you are trying to do. If you look at the constructor\r\n\r\n    public MyClass(int[][] array) { //something else passes the array\r\n        myArray = array;\r\n        MYARRAY_ORIGINAL = array; // you are just keeping a reference to it can be modified from outside\r\n    }\r\n\r\nIf you really want nobody to modify the values in that array `MYARRAY_ORIGINAL`, you should make a copy of the source array that comes comes from outside.\r\n\r\n    public MyClass(int[][] array) { \r\n        myArray = array; //make a copy here also if you don&#39;t want to edit the argument array\r\n        MYARRAY_ORIGINAL = new int[array.length][];\r\n        System.arraycopy(array, 0, MYARRAY_ORIGINAL, 0, array.length); \r\n    }\r\n\r\nNow you shouldn&#39;t have to worry about the array&#39;s being modified from outside.\r\n","title":"&quot;Final&quot; in java and copying 2D arrays","body":"<p>You can use the method <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29\" rel=\"nofollow\"><code>System.arraycopy</code></a> to make a copy of the array as follows -</p>\n\n<pre><code>int[][] source = {{1,2},{3,4}};\nint[][] copy = new int[source.length][];\nSystem.arraycopy(source, 0, copy, 0, source.length);\n</code></pre>\n\n<p>Also, you some problem with your code regarding what you are trying to do. If you look at the constructor</p>\n\n<pre><code>public MyClass(int[][] array) { //something else passes the array\n    myArray = array;\n    MYARRAY_ORIGINAL = array; // you are just keeping a reference to it can be modified from outside\n}\n</code></pre>\n\n<p>If you really want nobody to modify the values in that array <code>MYARRAY_ORIGINAL</code>, you should make a copy of the source array that comes comes from outside.</p>\n\n<pre><code>public MyClass(int[][] array) { \n    myArray = array; //make a copy here also if you don't want to edit the argument array\n    MYARRAY_ORIGINAL = new int[array.length][];\n    System.arraycopy(array, 0, MYARRAY_ORIGINAL, 0, array.length); \n}\n</code></pre>\n\n<p>Now you shouldn't have to worry about the array's being modified from outside.</p>\n"}],"owner":{"account_id":1863956,"reputation":15,"user_id":1687933,"display_name":"Savid Abah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":583,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":12852138,"answer_count":5,"score":1,"last_activity_date":1647342044,"creation_date":1350015037,"question_id":12852113,"body_markdown":"I am having a little trouble understanding the concept of `final` in Java.\r\n\r\nI have a class that follows:\r\n\r\n     public class MyClass \r\n     {\r\n\t     private int[][] myArray; // intended to be changed\r\n\t     private final int[][] MYARRAY_ORIGINAL; // intended to be unchangable\r\n\t\r\n\t     public MyClass(int[][] array) \r\n\t     {\r\n\t\t    myArray = array;\r\n\t\t    MYARRAY_ORIGINAL = array;\r\n\t     }\r\n\r\n     }\r\n\r\nI was under the understanding that `final` would make `MYARRAY_ORIGINAL` read only. But I have tried editing `myArray`, and it edits `MYARRAY_ORIGINAL` as well. My question is, in this context, what exactly does `final` do? And for extra credit, how can I copy the array passed through the constructor into `MYARRAY_ORIGINAL` so that I can have 2 arrays, one to edit, and one that will remain preserved?","title":"&quot;Final&quot; in java and copying 2D arrays","body":"<p>I am having a little trouble understanding the concept of <code>final</code> in Java.</p>\n<p>I have a class that follows:</p>\n<pre><code> public class MyClass \n {\n     private int[][] myArray; // intended to be changed\n     private final int[][] MYARRAY_ORIGINAL; // intended to be unchangable\n\n     public MyClass(int[][] array) \n     {\n        myArray = array;\n        MYARRAY_ORIGINAL = array;\n     }\n\n }\n</code></pre>\n<p>I was under the understanding that <code>final</code> would make <code>MYARRAY_ORIGINAL</code> read only. But I have tried editing <code>myArray</code>, and it edits <code>MYARRAY_ORIGINAL</code> as well. My question is, in this context, what exactly does <code>final</code> do? And for extra credit, how can I copy the array passed through the constructor into <code>MYARRAY_ORIGINAL</code> so that I can have 2 arrays, one to edit, and one that will remain preserved?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4484503,"reputation":16656,"user_id":3879847,"accept_rate":72,"display_name":"Ranjithkumar"},"score":0,"creation_date":1547805826,"post_id":53853044,"comment_id":95327284,"body_markdown":"any solution for this?","body":"any solution for this?"}],"answers":[{"tags":[],"owner":{"account_id":1361976,"reputation":4528,"user_id":1299158,"accept_rate":47,"display_name":"box"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647341885,"creation_date":1551524848,"answer_id":54957813,"question_id":53853044,"body_markdown":"I&#39;m posting a full solution for converting the Uri to File or file path, it works across all APIs and media libraries.\r\n\r\n```kotlin\r\n/*\r\n* Copyright (C) 2018 OpenIntents.org\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*      http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n*/\r\n\r\n    object FileHelperKt {\r\n\r\n    private const val DOCUMENTS_DIR = &quot;documents&quot;\r\n    // configured android:authorities in AndroidManifest (https://developer.android.com/reference/android/support/v4/content/FileProvider)\r\n    private const val AUTHORITY = &quot;YOUR_AUTHORITY.provider&quot;\r\n    private const val HIDDEN_PREFIX = &quot;.&quot;\r\n\r\n    private val DEBUG = false // Set to true to enable logging\r\n    /**\r\n     * File and folder comparator. TODO Expose sorting option method\r\n     */\r\n    var sComparator = { f1: File, f2: File -&gt;\r\n        // Sort alphabetically by lower case, which is much cleaner\r\n        f1.name.toLowerCase().compareTo(\r\n            f2.name.toLowerCase()\r\n        )\r\n    }\r\n    /**\r\n     * File (not directories) filter.\r\n     */\r\n    var sFileFilter = { file: File -&gt;\r\n        val fileName = file.getName()\r\n        // Return files only (not directories) and skip hidden files\r\n        file.isFile() &amp;&amp; !fileName.startsWith(HIDDEN_PREFIX)\r\n    }\r\n    /**\r\n     * Folder (directories) filter.\r\n     */\r\n    var sDirFilter = { file: File -&gt;\r\n        val fileName = file.name\r\n        // Return directories only and skip hidden directories\r\n        file.isDirectory &amp;&amp; !fileName.startsWith(HIDDEN_PREFIX)\r\n    }\r\n\r\n    val downloadsDir: File\r\n        get() = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)\r\n\r\n    /**\r\n     * Gets the extension of a file name, like &quot;.png&quot; or &quot;.jpg&quot;.\r\n     *\r\n     * @param uri\r\n     * @return Extension including the dot(&quot;.&quot;); &quot;&quot; if there is no extension;\r\n     * null if uri was null.\r\n     */\r\n    fun getExtension(uri: String?): String? {\r\n        if (uri == null) {\r\n            return null\r\n        }\r\n\r\n        val dot = uri.lastIndexOf(&quot;.&quot;)\r\n        return if (dot &gt;= 0) {\r\n            uri.substring(dot)\r\n        } else {\r\n            // No extension.\r\n            &quot;&quot;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @return Whether the URI is a local one.\r\n     */\r\n    fun isLocal(url: String?): Boolean {\r\n        return url != null &amp;&amp; !url.startsWith(&quot;http://&quot;) &amp;&amp; !url.startsWith(&quot;https://&quot;)\r\n    }\r\n\r\n    /**\r\n     * @return True if Uri is a MediaStore Uri.\r\n     * @author paulburke\r\n     */\r\n    fun isMediaUri(uri: Uri): Boolean {\r\n        return &quot;media&quot;.equals(uri.authority!!, ignoreCase = true)\r\n    }\r\n\r\n    /**\r\n     * Convert File into Uri.\r\n     *\r\n     * @param file\r\n     * @return uri\r\n     */\r\n    fun getUri(file: File?): Uri? {\r\n        return if (file != null) Uri.fromFile(file) else null\r\n    }\r\n\r\n    /**\r\n     * Returns the path only (without file name).\r\n     *\r\n     * @param file\r\n     * @return\r\n     */\r\n    fun getPathWithoutFilename(file: File?): File? {\r\n        if (file != null) {\r\n            if (file.isDirectory) {\r\n                // no file to be split off. Return everything\r\n                return file\r\n            } else {\r\n                val filename = file.name\r\n                val filepath = file.absolutePath\r\n\r\n                // Construct path without file name.\r\n                var pathwithoutname = filepath.substring(\r\n                    0,\r\n                    filepath.length - filename.length\r\n                )\r\n                if (pathwithoutname.endsWith(&quot;/&quot;)) {\r\n                    pathwithoutname = pathwithoutname.substring(0, pathwithoutname.length - 1)\r\n                }\r\n                return File(pathwithoutname)\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n    /**\r\n     * @return The MIME type for the given file.\r\n     */\r\n    fun getMimeType(file: File): String? {\r\n        val extension = getExtension(file.name)\r\n        if (extension!!.isNotEmpty()) {\r\n            return MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension.substring(1))\r\n        } else {\r\n            return &quot;application/octet-stream&quot;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @return The MIME type for the give Uri.\r\n     */\r\n    fun getMimeType(context: Context, uri: Uri): String? {\r\n        val file = File(getPath(context, uri)!!)\r\n        return getMimeType(file)\r\n    }\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is local.\r\n     */\r\n    fun isLocalStorageDocument(uri: Uri): Boolean {\r\n        return AUTHORITY == uri.authority\r\n    }\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is ExternalStorageProvider.\r\n     */\r\n    fun isExternalStorageDocument(uri: Uri): Boolean {\r\n        return &quot;com.android.externalstorage.documents&quot; == uri.authority\r\n    }\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is DownloadsProvider.\r\n     */\r\n    fun isDownloadsDocument(uri: Uri): Boolean {\r\n        return &quot;com.android.providers.downloads.documents&quot; == uri.authority\r\n    }\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is MediaProvider.\r\n     */\r\n    fun isMediaDocument(uri: Uri): Boolean {\r\n        return &quot;com.android.providers.media.documents&quot; == uri.authority\r\n    }\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is Google Photos.\r\n     */\r\n    fun isGooglePhotosUri(uri: Uri): Boolean {\r\n        return &quot;com.google.android.apps.photos.content&quot; == uri.authority\r\n    }\r\n\r\n    /**\r\n     * Get the value of the data column for this Uri. This is useful for\r\n     * MediaStore Uris, and other file-based ContentProviders.\r\n     *\r\n     * @param context The context.\r\n     * @param uri The Uri to query.\r\n     * @param selection (Optional) Filter used in the query.\r\n     * @param selectionArgs (Optional) Selection arguments used in the query.\r\n     * @return The value of the _data column, which is typically a file path.\r\n     */\r\n    fun getDataColumn(context: Context, uri: Uri?, selection: String?, selectionArgs: Array&lt;String&gt;?): String? {\r\n\r\n        var cursor: Cursor? = null\r\n        val column = MediaStore.Files.FileColumns.DATA\r\n        val projection = arrayOf(column)\r\n\r\n        try {\r\n            cursor = context.contentResolver.query(uri!!, projection, selection, selectionArgs, null)\r\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\r\n                if (DEBUG)\r\n                    DatabaseUtils.dumpCursor(cursor)\r\n\r\n                val columnIndex = cursor.getColumnIndexOrThrow(column)\r\n                return cursor.getString(columnIndex)\r\n            }\r\n        } finally {\r\n            cursor?.close()\r\n        }\r\n        return null\r\n    }\r\n\r\n    /**\r\n     * Get a file path from a Uri. This will get the the path for Storage Access\r\n     * Framework Documents, as well as the _data field for the MediaStore and\r\n     * other file-based ContentProviders.&lt;br&gt;&lt;/br&gt;\r\n     * &lt;br&gt;&lt;/br&gt;\r\n     * Callers should check whether the path is local before assuming it\r\n     * represents a local file.\r\n     *\r\n     * @param context The context.\r\n     * @param uri The Uri to query.\r\n     * @see .isLocal\r\n     * @see .getFile\r\n     */\r\n    fun getPath(context: Context, uri: Uri): String? {\r\n        Timber.d(\r\n            &quot;[app] FileHelper - Authority: ${uri.authority}, &quot; +\r\n                &quot;Fragment: ${uri.fragment}, &quot; +\r\n                &quot;Port: ${uri.port}, &quot; +\r\n                &quot;Query: ${uri.query}, &quot; +\r\n                &quot;Scheme: ${uri.scheme}, &quot; +\r\n                &quot;Host: ${uri.host}, &quot; +\r\n                &quot;Segments: ${uri.pathSegments}&quot;\r\n        )\r\n\r\n        val isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT\r\n\r\n        // DocumentProvider\r\n        if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\r\n            // LocalStorageProvider\r\n            if (isLocalStorageDocument(uri)) {\r\n                // The path is the id\r\n                return DocumentsContract.getDocumentId(uri)\r\n            }\r\n            // ExternalStorageProvider\r\n            else if (isExternalStorageDocument(uri)) {\r\n                val docId = DocumentsContract.getDocumentId(uri)\r\n                val split = docId.split((&quot;:&quot;).toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()\r\n                val type = split[0]\r\n\r\n                if (&quot;primary&quot;.equals(type, ignoreCase = true)) {\r\n                    return (Environment.getExternalStorageDirectory()).toString() + &quot;/&quot; + split[1]\r\n                }\r\n            }\r\n            // DownloadsProvider\r\n            else if (isDownloadsDocument(uri)) {\r\n                val id = DocumentsContract.getDocumentId(uri)\r\n                if (id != null &amp;&amp; id.startsWith(&quot;raw:&quot;)) {\r\n                    return id.substring(4)\r\n                }\r\n                val contentUriPrefixesToTry =\r\n                    arrayOf(&quot;content://downloads/public_downloads&quot;, &quot;content://downloads/my_downloads&quot;)\r\n                for (contentUriPrefix in contentUriPrefixesToTry) {\r\n                    val contentUri =\r\n                        ContentUris.withAppendedId(Uri.parse(contentUriPrefix), java.lang.Long.valueOf(id!!))\r\n                    try {\r\n                        val path = getDataColumn(context, contentUri, null, null)\r\n                        if (path != null) {\r\n                            return path\r\n                        }\r\n                    } catch (e: Exception) {\r\n                    }\r\n                }\r\n\r\n                // path could not be retrieved using ContentResolver, therefore copy file to accessible cache using streams\r\n                val fileName = getFileName(context, uri)\r\n                val cacheDir = getDocumentCacheDir(context)\r\n                val file = generateFileName(fileName, cacheDir)\r\n                var destinationPath: String? = null\r\n                if (file != null) {\r\n                    destinationPath = file.absolutePath\r\n                    saveFileFromUri(context, uri, destinationPath)\r\n                }\r\n                return destinationPath\r\n            }\r\n            // MediaProvider\r\n            else if (isMediaDocument(uri)) {\r\n                val docId = DocumentsContract.getDocumentId(uri)\r\n                val split = docId.split((&quot;:&quot;).toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()\r\n                val type = split[0]\r\n\r\n                var contentUri: Uri? = null\r\n                when (type) {\r\n                    &quot;image&quot; -&gt; contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI\r\n                    &quot;video&quot; -&gt; contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI\r\n                    &quot;audio&quot; -&gt; contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI\r\n                }\r\n\r\n                val selection = &quot;_id=?&quot;\r\n                val selectionArgs = arrayOf(split[1])\r\n\r\n                return getDataColumn(context, contentUri, selection, selectionArgs)\r\n            }\r\n        } else if (&quot;content&quot;.equals(uri.scheme!!, ignoreCase = true)) {\r\n            // Return the remote address\r\n            if (isGooglePhotosUri(uri)) {\r\n                return uri.lastPathSegment\r\n            }\r\n            return getDataColumn(context, uri, null, null)\r\n        } else if (&quot;file&quot;.equals(uri.scheme!!, ignoreCase = true)) {\r\n            return uri.path\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n    /**\r\n     * Convert Uri into File, if possible.\r\n     *\r\n     * @return file A local file that the Uri was pointing to, or null if the\r\n     * Uri is unsupported or pointed to a remote resource.\r\n     * @author paulburke\r\n     * @see .getPath\r\n     */\r\n    fun getFile(context: Context, uri: Uri?): File? {\r\n        if (uri != null) {\r\n            val path = getPath(context, uri)\r\n            if (path != null &amp;&amp; isLocal(path)) {\r\n                return File(path)\r\n            }\r\n        }\r\n        return null\r\n    }\r\n\r\n    /**\r\n     * Get the file size in a human-readable string.\r\n     *\r\n     * @param size\r\n     * @return\r\n     * @author paulburke\r\n     */\r\n    fun getReadableFileSize(size: Int): String {\r\n        val bytesInKilobytes = 1024\r\n        val dec = DecimalFormat(&quot;###.#&quot;)\r\n        val kb = &quot; KB&quot;\r\n        val mb = &quot; MB&quot;\r\n        val gb = &quot; GB&quot;\r\n        var fileSize = 0f\r\n        var suffix = kb\r\n\r\n        if (size &gt; bytesInKilobytes) {\r\n            fileSize = (size / bytesInKilobytes).toFloat()\r\n            if (fileSize &gt; bytesInKilobytes) {\r\n                fileSize /= bytesInKilobytes\r\n                if (fileSize &gt; bytesInKilobytes) {\r\n                    fileSize /= bytesInKilobytes\r\n                    suffix = gb\r\n                } else {\r\n                    suffix = mb\r\n                }\r\n            }\r\n        }\r\n        return (dec.format(fileSize.toDouble()) + suffix).toString()\r\n    }\r\n\r\n    /**\r\n     * Get the Intent for selecting content to be used in an Intent Chooser.\r\n     *\r\n     * @return The intent for opening a file with Intent.createChooser()\r\n     */\r\n    fun createGetContentIntent(): Intent {\r\n        // Implicitly allow the user to select a particular kind of data\r\n        val intent = Intent(Intent.ACTION_GET_CONTENT)\r\n        // The MIME data type filter\r\n        intent.type = &quot;*/*&quot;\r\n        // Only return URIs that can be opened with ContentResolver\r\n        intent.addCategory(Intent.CATEGORY_OPENABLE)\r\n        return intent\r\n    }\r\n\r\n    /**\r\n     * Creates View intent for given file\r\n     *\r\n     * @param file\r\n     * @return The intent for viewing file\r\n     */\r\n    fun getViewIntent(context: Context, file: File): Intent {\r\n        // Uri uri = Uri.fromFile(file);\r\n        val uri = FileProvider.getUriForFile(context, AUTHORITY, file)\r\n        val intent = Intent(Intent.ACTION_VIEW)\r\n        val url = file.toString()\r\n        if (url.contains(&quot;.doc&quot;) || url.contains(&quot;.docx&quot;)) {\r\n            // Word document\r\n            intent.setDataAndType(uri, &quot;application/msword&quot;)\r\n        } else if (url.contains(&quot;.pdf&quot;)) {\r\n            // PDF file\r\n            intent.setDataAndType(uri, &quot;application/pdf&quot;)\r\n        } else if (url.contains(&quot;.ppt&quot;) || url.contains(&quot;.pptx&quot;)) {\r\n            // Powerpoint file\r\n            intent.setDataAndType(uri, &quot;application/vnd.ms-powerpoint&quot;)\r\n        } else if (url.contains(&quot;.xls&quot;) || url.contains(&quot;.xlsx&quot;)) {\r\n            // Excel file\r\n            intent.setDataAndType(uri, &quot;application/vnd.ms-excel&quot;)\r\n        } else if (url.contains(&quot;.zip&quot;) || url.contains(&quot;.rar&quot;)) {\r\n            // WAV audio file\r\n            intent.setDataAndType(uri, &quot;application/x-wav&quot;)\r\n        } else if (url.contains(&quot;.rtf&quot;)) {\r\n            // RTF file\r\n            intent.setDataAndType(uri, &quot;application/rtf&quot;)\r\n        } else if (url.contains(&quot;.wav&quot;) || url.contains(&quot;.mp3&quot;)) {\r\n            // WAV audio file\r\n            intent.setDataAndType(uri, &quot;audio/x-wav&quot;)\r\n        } else if (url.contains(&quot;.gif&quot;)) {\r\n            // GIF file\r\n            intent.setDataAndType(uri, &quot;image/gif&quot;)\r\n        } else if (url.contains(&quot;.jpg&quot;) || url.contains(&quot;.jpeg&quot;) || url.contains(&quot;.png&quot;)) {\r\n            // JPG file\r\n            intent.setDataAndType(uri, &quot;image/jpeg&quot;)\r\n        } else if (url.contains(&quot;.txt&quot;)) {\r\n            // Text file\r\n            intent.setDataAndType(uri, &quot;text/plain&quot;)\r\n        } else if ((url.contains(&quot;.3gp&quot;) || url.contains(&quot;.mpg&quot;) || url.contains(&quot;.mpeg&quot;) ||\r\n                url.contains(&quot;.mpe&quot;) || url.contains(&quot;.mp4&quot;) || url.contains(&quot;.avi&quot;))\r\n        ) {\r\n            // Video files\r\n            intent.setDataAndType(uri, &quot;video/*&quot;)\r\n        } else {\r\n            intent.setDataAndType(uri, &quot;*/*&quot;)\r\n        }\r\n\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)\r\n        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)\r\n        intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION)\r\n        return intent\r\n    }\r\n\r\n    fun getDocumentCacheDir(context: Context): File {\r\n        val dir = File(context.cacheDir, DOCUMENTS_DIR)\r\n        if (!dir.exists()) {\r\n            dir.mkdirs()\r\n        }\r\n        logDir(context.cacheDir)\r\n        logDir(dir)\r\n\r\n        return dir\r\n    }\r\n\r\n    private fun logDir(dir: File) {\r\n        if (!DEBUG) return\r\n        Timber.d(&quot;[app] FileHelper log dir=$dir&quot;)\r\n        val files = dir.listFiles()\r\n        for (file in files!!) {\r\n            Timber.d(&quot;[app] FileHelper path:${file.path}&quot;)\r\n        }\r\n    }\r\n\r\n    fun generateFileName(name: String?, directory: File): File? {\r\n        var name: String? = name ?: return null\r\n\r\n        var file = File(directory, name!!)\r\n\r\n        if (file.exists()) {\r\n            var fileName: String = name\r\n            var extension = &quot;&quot;\r\n            val dotIndex = name.lastIndexOf(&#39;.&#39;)\r\n            if (dotIndex &gt; 0) {\r\n                fileName = name.substring(0, dotIndex)\r\n                extension = name.substring(dotIndex)\r\n            }\r\n\r\n            var index = 0\r\n\r\n            while (file.exists()) {\r\n                index++\r\n                name = &quot;$fileName($index)$extension&quot;\r\n                file = File(directory, name)\r\n            }\r\n        }\r\n\r\n        try {\r\n            if (!file.createNewFile()) {\r\n                return null\r\n            }\r\n        } catch (e: IOException) {\r\n            Timber.w(e, &quot;[app] FileHelper&quot;)\r\n            return null\r\n        }\r\n\r\n        logDir(directory)\r\n\r\n        return file\r\n    }\r\n\r\n    /**\r\n     * Writes response body to disk\r\n     *\r\n     * @param body ResponseBody\r\n     * @param path file path\r\n     * @return File\r\n     */\r\n    fun writeResponseBodyToDisk(body: ResponseBody, path: String): File? {\r\n        try {\r\n            val target = File(path)\r\n\r\n            var inputStream: InputStream? = null\r\n            var outputStream: OutputStream? = null\r\n\r\n            try {\r\n                val fileReader = ByteArray(4096)\r\n\r\n                inputStream = body.byteStream()\r\n                outputStream = FileOutputStream(target)\r\n\r\n                while (true) {\r\n                    val read = inputStream!!.read(fileReader)\r\n\r\n                    if (read == -1) {\r\n                        break\r\n                    }\r\n\r\n                    outputStream.write(fileReader, 0, read)\r\n                }\r\n\r\n                outputStream.flush()\r\n\r\n                return target\r\n            } catch (e: IOException) {\r\n                return null\r\n            } finally {\r\n                if (inputStream != null) {\r\n                    inputStream.close()\r\n                }\r\n\r\n                if (outputStream != null) {\r\n                    outputStream.close()\r\n                }\r\n            }\r\n        } catch (e: IOException) {\r\n            return null\r\n        }\r\n    }\r\n\r\n    private fun saveFileFromUri(context: Context, uri: Uri, destinationPath: String) {\r\n        var inputStream: InputStream? = null\r\n        var bos: BufferedOutputStream? = null\r\n        try {\r\n            inputStream = context.contentResolver.openInputStream(uri)\r\n            bos = BufferedOutputStream(FileOutputStream(destinationPath, false))\r\n            val buf = ByteArray(1024)\r\n            inputStream!!.read(buf)\r\n            do {\r\n                bos.write(buf)\r\n            } while (inputStream.read(buf) != -1)\r\n        } catch (e: IOException) {\r\n            e.printStackTrace()\r\n        } finally {\r\n            try {\r\n                inputStream?.close()\r\n                bos?.close()\r\n            } catch (e: IOException) {\r\n                e.printStackTrace()\r\n            }\r\n        }\r\n    }\r\n\r\n    fun readBytesFromFile(filePath: String): ByteArray? {\r\n        var fileInputStream: FileInputStream? = null\r\n        var bytesArray: ByteArray? = null\r\n\r\n        try {\r\n            val file = File(filePath)\r\n            bytesArray = ByteArray(file.length().toInt())\r\n\r\n            // read file into bytes[]\r\n            fileInputStream = FileInputStream(file)\r\n            fileInputStream.read(bytesArray)\r\n        } catch (e: IOException) {\r\n            e.printStackTrace()\r\n        } finally {\r\n            if (fileInputStream != null) {\r\n                try {\r\n                    fileInputStream.close()\r\n                } catch (e: IOException) {\r\n                    e.printStackTrace()\r\n                }\r\n            }\r\n        }\r\n\r\n        return bytesArray\r\n    }\r\n\r\n    @Throws(IOException::class)\r\n    fun createTempImageFile(context: Context, fileName: String): File {\r\n        // Create an image file name\r\n        val storageDir = File(context.cacheDir, DOCUMENTS_DIR)\r\n        return File.createTempFile(fileName, &quot;.jpg&quot;, storageDir)\r\n    }\r\n\r\n    fun getFileName(context: Context, uri: Uri): String? {\r\n        val mimeType = context.contentResolver.getType(uri)\r\n        var filename: String? = null\r\n\r\n        if (mimeType == null) {\r\n            val path = getPath(context, uri)\r\n            if (path == null) {\r\n                filename = getName(uri.toString())\r\n            } else {\r\n                val file = File(path)\r\n                filename = file.name\r\n            }\r\n        } else {\r\n            val returnCursor = context.contentResolver.query(uri, null, null, null, null)\r\n            if (returnCursor != null) {\r\n                val nameIndex = returnCursor.getColumnIndex(OpenableColumns.DISPLAY_NAME)\r\n                returnCursor.moveToFirst()\r\n                filename = returnCursor.getString(nameIndex)\r\n                returnCursor.close()\r\n            }\r\n        }\r\n\r\n        return filename\r\n    }\r\n\r\n    fun getName(filename: String?): String? {\r\n        if (filename == null) {\r\n            return null\r\n        }\r\n        val index = filename.lastIndexOf(&#39;/&#39;)\r\n        return filename.substring(index + 1)\r\n    }\r\n    }","title":"I could not choose PDF file in Android 8 Oreo (Huawei)","body":"<p>I'm posting a full solution for converting the Uri to File or file path, it works across all APIs and media libraries.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>/*\n* Copyright (C) 2018 OpenIntents.org\n*\n* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*      http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n    object FileHelperKt {\n\n    private const val DOCUMENTS_DIR = &quot;documents&quot;\n    // configured android:authorities in AndroidManifest (https://developer.android.com/reference/android/support/v4/content/FileProvider)\n    private const val AUTHORITY = &quot;YOUR_AUTHORITY.provider&quot;\n    private const val HIDDEN_PREFIX = &quot;.&quot;\n\n    private val DEBUG = false // Set to true to enable logging\n    /**\n     * File and folder comparator. TODO Expose sorting option method\n     */\n    var sComparator = { f1: File, f2: File -&gt;\n        // Sort alphabetically by lower case, which is much cleaner\n        f1.name.toLowerCase().compareTo(\n            f2.name.toLowerCase()\n        )\n    }\n    /**\n     * File (not directories) filter.\n     */\n    var sFileFilter = { file: File -&gt;\n        val fileName = file.getName()\n        // Return files only (not directories) and skip hidden files\n        file.isFile() &amp;&amp; !fileName.startsWith(HIDDEN_PREFIX)\n    }\n    /**\n     * Folder (directories) filter.\n     */\n    var sDirFilter = { file: File -&gt;\n        val fileName = file.name\n        // Return directories only and skip hidden directories\n        file.isDirectory &amp;&amp; !fileName.startsWith(HIDDEN_PREFIX)\n    }\n\n    val downloadsDir: File\n        get() = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)\n\n    /**\n     * Gets the extension of a file name, like &quot;.png&quot; or &quot;.jpg&quot;.\n     *\n     * @param uri\n     * @return Extension including the dot(&quot;.&quot;); &quot;&quot; if there is no extension;\n     * null if uri was null.\n     */\n    fun getExtension(uri: String?): String? {\n        if (uri == null) {\n            return null\n        }\n\n        val dot = uri.lastIndexOf(&quot;.&quot;)\n        return if (dot &gt;= 0) {\n            uri.substring(dot)\n        } else {\n            // No extension.\n            &quot;&quot;\n        }\n    }\n\n    /**\n     * @return Whether the URI is a local one.\n     */\n    fun isLocal(url: String?): Boolean {\n        return url != null &amp;&amp; !url.startsWith(&quot;http://&quot;) &amp;&amp; !url.startsWith(&quot;https://&quot;)\n    }\n\n    /**\n     * @return True if Uri is a MediaStore Uri.\n     * @author paulburke\n     */\n    fun isMediaUri(uri: Uri): Boolean {\n        return &quot;media&quot;.equals(uri.authority!!, ignoreCase = true)\n    }\n\n    /**\n     * Convert File into Uri.\n     *\n     * @param file\n     * @return uri\n     */\n    fun getUri(file: File?): Uri? {\n        return if (file != null) Uri.fromFile(file) else null\n    }\n\n    /**\n     * Returns the path only (without file name).\n     *\n     * @param file\n     * @return\n     */\n    fun getPathWithoutFilename(file: File?): File? {\n        if (file != null) {\n            if (file.isDirectory) {\n                // no file to be split off. Return everything\n                return file\n            } else {\n                val filename = file.name\n                val filepath = file.absolutePath\n\n                // Construct path without file name.\n                var pathwithoutname = filepath.substring(\n                    0,\n                    filepath.length - filename.length\n                )\n                if (pathwithoutname.endsWith(&quot;/&quot;)) {\n                    pathwithoutname = pathwithoutname.substring(0, pathwithoutname.length - 1)\n                }\n                return File(pathwithoutname)\n            }\n        }\n        return null\n    }\n\n    /**\n     * @return The MIME type for the given file.\n     */\n    fun getMimeType(file: File): String? {\n        val extension = getExtension(file.name)\n        if (extension!!.isNotEmpty()) {\n            return MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension.substring(1))\n        } else {\n            return &quot;application/octet-stream&quot;\n        }\n    }\n\n    /**\n     * @return The MIME type for the give Uri.\n     */\n    fun getMimeType(context: Context, uri: Uri): String? {\n        val file = File(getPath(context, uri)!!)\n        return getMimeType(file)\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is local.\n     */\n    fun isLocalStorageDocument(uri: Uri): Boolean {\n        return AUTHORITY == uri.authority\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is ExternalStorageProvider.\n     */\n    fun isExternalStorageDocument(uri: Uri): Boolean {\n        return &quot;com.android.externalstorage.documents&quot; == uri.authority\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is DownloadsProvider.\n     */\n    fun isDownloadsDocument(uri: Uri): Boolean {\n        return &quot;com.android.providers.downloads.documents&quot; == uri.authority\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is MediaProvider.\n     */\n    fun isMediaDocument(uri: Uri): Boolean {\n        return &quot;com.android.providers.media.documents&quot; == uri.authority\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is Google Photos.\n     */\n    fun isGooglePhotosUri(uri: Uri): Boolean {\n        return &quot;com.google.android.apps.photos.content&quot; == uri.authority\n    }\n\n    /**\n     * Get the value of the data column for this Uri. This is useful for\n     * MediaStore Uris, and other file-based ContentProviders.\n     *\n     * @param context The context.\n     * @param uri The Uri to query.\n     * @param selection (Optional) Filter used in the query.\n     * @param selectionArgs (Optional) Selection arguments used in the query.\n     * @return The value of the _data column, which is typically a file path.\n     */\n    fun getDataColumn(context: Context, uri: Uri?, selection: String?, selectionArgs: Array&lt;String&gt;?): String? {\n\n        var cursor: Cursor? = null\n        val column = MediaStore.Files.FileColumns.DATA\n        val projection = arrayOf(column)\n\n        try {\n            cursor = context.contentResolver.query(uri!!, projection, selection, selectionArgs, null)\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n                if (DEBUG)\n                    DatabaseUtils.dumpCursor(cursor)\n\n                val columnIndex = cursor.getColumnIndexOrThrow(column)\n                return cursor.getString(columnIndex)\n            }\n        } finally {\n            cursor?.close()\n        }\n        return null\n    }\n\n    /**\n     * Get a file path from a Uri. This will get the the path for Storage Access\n     * Framework Documents, as well as the _data field for the MediaStore and\n     * other file-based ContentProviders.&lt;br&gt;&lt;/br&gt;\n     * &lt;br&gt;&lt;/br&gt;\n     * Callers should check whether the path is local before assuming it\n     * represents a local file.\n     *\n     * @param context The context.\n     * @param uri The Uri to query.\n     * @see .isLocal\n     * @see .getFile\n     */\n    fun getPath(context: Context, uri: Uri): String? {\n        Timber.d(\n            &quot;[app] FileHelper - Authority: ${uri.authority}, &quot; +\n                &quot;Fragment: ${uri.fragment}, &quot; +\n                &quot;Port: ${uri.port}, &quot; +\n                &quot;Query: ${uri.query}, &quot; +\n                &quot;Scheme: ${uri.scheme}, &quot; +\n                &quot;Host: ${uri.host}, &quot; +\n                &quot;Segments: ${uri.pathSegments}&quot;\n        )\n\n        val isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT\n\n        // DocumentProvider\n        if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\n            // LocalStorageProvider\n            if (isLocalStorageDocument(uri)) {\n                // The path is the id\n                return DocumentsContract.getDocumentId(uri)\n            }\n            // ExternalStorageProvider\n            else if (isExternalStorageDocument(uri)) {\n                val docId = DocumentsContract.getDocumentId(uri)\n                val split = docId.split((&quot;:&quot;).toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()\n                val type = split[0]\n\n                if (&quot;primary&quot;.equals(type, ignoreCase = true)) {\n                    return (Environment.getExternalStorageDirectory()).toString() + &quot;/&quot; + split[1]\n                }\n            }\n            // DownloadsProvider\n            else if (isDownloadsDocument(uri)) {\n                val id = DocumentsContract.getDocumentId(uri)\n                if (id != null &amp;&amp; id.startsWith(&quot;raw:&quot;)) {\n                    return id.substring(4)\n                }\n                val contentUriPrefixesToTry =\n                    arrayOf(&quot;content://downloads/public_downloads&quot;, &quot;content://downloads/my_downloads&quot;)\n                for (contentUriPrefix in contentUriPrefixesToTry) {\n                    val contentUri =\n                        ContentUris.withAppendedId(Uri.parse(contentUriPrefix), java.lang.Long.valueOf(id!!))\n                    try {\n                        val path = getDataColumn(context, contentUri, null, null)\n                        if (path != null) {\n                            return path\n                        }\n                    } catch (e: Exception) {\n                    }\n                }\n\n                // path could not be retrieved using ContentResolver, therefore copy file to accessible cache using streams\n                val fileName = getFileName(context, uri)\n                val cacheDir = getDocumentCacheDir(context)\n                val file = generateFileName(fileName, cacheDir)\n                var destinationPath: String? = null\n                if (file != null) {\n                    destinationPath = file.absolutePath\n                    saveFileFromUri(context, uri, destinationPath)\n                }\n                return destinationPath\n            }\n            // MediaProvider\n            else if (isMediaDocument(uri)) {\n                val docId = DocumentsContract.getDocumentId(uri)\n                val split = docId.split((&quot;:&quot;).toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()\n                val type = split[0]\n\n                var contentUri: Uri? = null\n                when (type) {\n                    &quot;image&quot; -&gt; contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI\n                    &quot;video&quot; -&gt; contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI\n                    &quot;audio&quot; -&gt; contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI\n                }\n\n                val selection = &quot;_id=?&quot;\n                val selectionArgs = arrayOf(split[1])\n\n                return getDataColumn(context, contentUri, selection, selectionArgs)\n            }\n        } else if (&quot;content&quot;.equals(uri.scheme!!, ignoreCase = true)) {\n            // Return the remote address\n            if (isGooglePhotosUri(uri)) {\n                return uri.lastPathSegment\n            }\n            return getDataColumn(context, uri, null, null)\n        } else if (&quot;file&quot;.equals(uri.scheme!!, ignoreCase = true)) {\n            return uri.path\n        }\n\n        return null\n    }\n\n    /**\n     * Convert Uri into File, if possible.\n     *\n     * @return file A local file that the Uri was pointing to, or null if the\n     * Uri is unsupported or pointed to a remote resource.\n     * @author paulburke\n     * @see .getPath\n     */\n    fun getFile(context: Context, uri: Uri?): File? {\n        if (uri != null) {\n            val path = getPath(context, uri)\n            if (path != null &amp;&amp; isLocal(path)) {\n                return File(path)\n            }\n        }\n        return null\n    }\n\n    /**\n     * Get the file size in a human-readable string.\n     *\n     * @param size\n     * @return\n     * @author paulburke\n     */\n    fun getReadableFileSize(size: Int): String {\n        val bytesInKilobytes = 1024\n        val dec = DecimalFormat(&quot;###.#&quot;)\n        val kb = &quot; KB&quot;\n        val mb = &quot; MB&quot;\n        val gb = &quot; GB&quot;\n        var fileSize = 0f\n        var suffix = kb\n\n        if (size &gt; bytesInKilobytes) {\n            fileSize = (size / bytesInKilobytes).toFloat()\n            if (fileSize &gt; bytesInKilobytes) {\n                fileSize /= bytesInKilobytes\n                if (fileSize &gt; bytesInKilobytes) {\n                    fileSize /= bytesInKilobytes\n                    suffix = gb\n                } else {\n                    suffix = mb\n                }\n            }\n        }\n        return (dec.format(fileSize.toDouble()) + suffix).toString()\n    }\n\n    /**\n     * Get the Intent for selecting content to be used in an Intent Chooser.\n     *\n     * @return The intent for opening a file with Intent.createChooser()\n     */\n    fun createGetContentIntent(): Intent {\n        // Implicitly allow the user to select a particular kind of data\n        val intent = Intent(Intent.ACTION_GET_CONTENT)\n        // The MIME data type filter\n        intent.type = &quot;*/*&quot;\n        // Only return URIs that can be opened with ContentResolver\n        intent.addCategory(Intent.CATEGORY_OPENABLE)\n        return intent\n    }\n\n    /**\n     * Creates View intent for given file\n     *\n     * @param file\n     * @return The intent for viewing file\n     */\n    fun getViewIntent(context: Context, file: File): Intent {\n        // Uri uri = Uri.fromFile(file);\n        val uri = FileProvider.getUriForFile(context, AUTHORITY, file)\n        val intent = Intent(Intent.ACTION_VIEW)\n        val url = file.toString()\n        if (url.contains(&quot;.doc&quot;) || url.contains(&quot;.docx&quot;)) {\n            // Word document\n            intent.setDataAndType(uri, &quot;application/msword&quot;)\n        } else if (url.contains(&quot;.pdf&quot;)) {\n            // PDF file\n            intent.setDataAndType(uri, &quot;application/pdf&quot;)\n        } else if (url.contains(&quot;.ppt&quot;) || url.contains(&quot;.pptx&quot;)) {\n            // Powerpoint file\n            intent.setDataAndType(uri, &quot;application/vnd.ms-powerpoint&quot;)\n        } else if (url.contains(&quot;.xls&quot;) || url.contains(&quot;.xlsx&quot;)) {\n            // Excel file\n            intent.setDataAndType(uri, &quot;application/vnd.ms-excel&quot;)\n        } else if (url.contains(&quot;.zip&quot;) || url.contains(&quot;.rar&quot;)) {\n            // WAV audio file\n            intent.setDataAndType(uri, &quot;application/x-wav&quot;)\n        } else if (url.contains(&quot;.rtf&quot;)) {\n            // RTF file\n            intent.setDataAndType(uri, &quot;application/rtf&quot;)\n        } else if (url.contains(&quot;.wav&quot;) || url.contains(&quot;.mp3&quot;)) {\n            // WAV audio file\n            intent.setDataAndType(uri, &quot;audio/x-wav&quot;)\n        } else if (url.contains(&quot;.gif&quot;)) {\n            // GIF file\n            intent.setDataAndType(uri, &quot;image/gif&quot;)\n        } else if (url.contains(&quot;.jpg&quot;) || url.contains(&quot;.jpeg&quot;) || url.contains(&quot;.png&quot;)) {\n            // JPG file\n            intent.setDataAndType(uri, &quot;image/jpeg&quot;)\n        } else if (url.contains(&quot;.txt&quot;)) {\n            // Text file\n            intent.setDataAndType(uri, &quot;text/plain&quot;)\n        } else if ((url.contains(&quot;.3gp&quot;) || url.contains(&quot;.mpg&quot;) || url.contains(&quot;.mpeg&quot;) ||\n                url.contains(&quot;.mpe&quot;) || url.contains(&quot;.mp4&quot;) || url.contains(&quot;.avi&quot;))\n        ) {\n            // Video files\n            intent.setDataAndType(uri, &quot;video/*&quot;)\n        } else {\n            intent.setDataAndType(uri, &quot;*/*&quot;)\n        }\n\n        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)\n        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)\n        intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION)\n        return intent\n    }\n\n    fun getDocumentCacheDir(context: Context): File {\n        val dir = File(context.cacheDir, DOCUMENTS_DIR)\n        if (!dir.exists()) {\n            dir.mkdirs()\n        }\n        logDir(context.cacheDir)\n        logDir(dir)\n\n        return dir\n    }\n\n    private fun logDir(dir: File) {\n        if (!DEBUG) return\n        Timber.d(&quot;[app] FileHelper log dir=$dir&quot;)\n        val files = dir.listFiles()\n        for (file in files!!) {\n            Timber.d(&quot;[app] FileHelper path:${file.path}&quot;)\n        }\n    }\n\n    fun generateFileName(name: String?, directory: File): File? {\n        var name: String? = name ?: return null\n\n        var file = File(directory, name!!)\n\n        if (file.exists()) {\n            var fileName: String = name\n            var extension = &quot;&quot;\n            val dotIndex = name.lastIndexOf('.')\n            if (dotIndex &gt; 0) {\n                fileName = name.substring(0, dotIndex)\n                extension = name.substring(dotIndex)\n            }\n\n            var index = 0\n\n            while (file.exists()) {\n                index++\n                name = &quot;$fileName($index)$extension&quot;\n                file = File(directory, name)\n            }\n        }\n\n        try {\n            if (!file.createNewFile()) {\n                return null\n            }\n        } catch (e: IOException) {\n            Timber.w(e, &quot;[app] FileHelper&quot;)\n            return null\n        }\n\n        logDir(directory)\n\n        return file\n    }\n\n    /**\n     * Writes response body to disk\n     *\n     * @param body ResponseBody\n     * @param path file path\n     * @return File\n     */\n    fun writeResponseBodyToDisk(body: ResponseBody, path: String): File? {\n        try {\n            val target = File(path)\n\n            var inputStream: InputStream? = null\n            var outputStream: OutputStream? = null\n\n            try {\n                val fileReader = ByteArray(4096)\n\n                inputStream = body.byteStream()\n                outputStream = FileOutputStream(target)\n\n                while (true) {\n                    val read = inputStream!!.read(fileReader)\n\n                    if (read == -1) {\n                        break\n                    }\n\n                    outputStream.write(fileReader, 0, read)\n                }\n\n                outputStream.flush()\n\n                return target\n            } catch (e: IOException) {\n                return null\n            } finally {\n                if (inputStream != null) {\n                    inputStream.close()\n                }\n\n                if (outputStream != null) {\n                    outputStream.close()\n                }\n            }\n        } catch (e: IOException) {\n            return null\n        }\n    }\n\n    private fun saveFileFromUri(context: Context, uri: Uri, destinationPath: String) {\n        var inputStream: InputStream? = null\n        var bos: BufferedOutputStream? = null\n        try {\n            inputStream = context.contentResolver.openInputStream(uri)\n            bos = BufferedOutputStream(FileOutputStream(destinationPath, false))\n            val buf = ByteArray(1024)\n            inputStream!!.read(buf)\n            do {\n                bos.write(buf)\n            } while (inputStream.read(buf) != -1)\n        } catch (e: IOException) {\n            e.printStackTrace()\n        } finally {\n            try {\n                inputStream?.close()\n                bos?.close()\n            } catch (e: IOException) {\n                e.printStackTrace()\n            }\n        }\n    }\n\n    fun readBytesFromFile(filePath: String): ByteArray? {\n        var fileInputStream: FileInputStream? = null\n        var bytesArray: ByteArray? = null\n\n        try {\n            val file = File(filePath)\n            bytesArray = ByteArray(file.length().toInt())\n\n            // read file into bytes[]\n            fileInputStream = FileInputStream(file)\n            fileInputStream.read(bytesArray)\n        } catch (e: IOException) {\n            e.printStackTrace()\n        } finally {\n            if (fileInputStream != null) {\n                try {\n                    fileInputStream.close()\n                } catch (e: IOException) {\n                    e.printStackTrace()\n                }\n            }\n        }\n\n        return bytesArray\n    }\n\n    @Throws(IOException::class)\n    fun createTempImageFile(context: Context, fileName: String): File {\n        // Create an image file name\n        val storageDir = File(context.cacheDir, DOCUMENTS_DIR)\n        return File.createTempFile(fileName, &quot;.jpg&quot;, storageDir)\n    }\n\n    fun getFileName(context: Context, uri: Uri): String? {\n        val mimeType = context.contentResolver.getType(uri)\n        var filename: String? = null\n\n        if (mimeType == null) {\n            val path = getPath(context, uri)\n            if (path == null) {\n                filename = getName(uri.toString())\n            } else {\n                val file = File(path)\n                filename = file.name\n            }\n        } else {\n            val returnCursor = context.contentResolver.query(uri, null, null, null, null)\n            if (returnCursor != null) {\n                val nameIndex = returnCursor.getColumnIndex(OpenableColumns.DISPLAY_NAME)\n                returnCursor.moveToFirst()\n                filename = returnCursor.getString(nameIndex)\n                returnCursor.close()\n            }\n        }\n\n        return filename\n    }\n\n    fun getName(filename: String?): String? {\n        if (filename == null) {\n            return null\n        }\n        val index = filename.lastIndexOf('/')\n        return filename.substring(index + 1)\n    }\n    }\n</code></pre>\n"}],"owner":{"account_id":14896247,"reputation":152,"user_id":10756463,"display_name":"Ahmad Sabbagh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1068,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1647341885,"creation_date":1545228727,"question_id":53853044,"body_markdown":"I am new to android and I am  trying to choose pdf file to upload to the server in an android application \r\nI have a problem with api&gt;24 in Huawei phones \r\nI take look for similar problems in StackOverflow but did not solve my problem \r\n[like this question ][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51546617/in-android-8-oreo-intent-chooser-is-not-working-to-set-wallpaper\r\nthis problem just with Huawei&#39;s phone \r\nI have tried to pick a file from Samsung oreo and everything is okay, \r\nbut with Huawei, the activity crushed \r\n**my code**\r\n\r\n       private void imageBrowse() {\r\n\r\n\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n            Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\r\n            intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n\r\n            intent.setType(&quot;application/pdf&quot;);\r\n            startActivityForResult(Intent.createChooser(intent, &quot;Select Pdf&quot;), PICK_IMAGE_REQUEST);\r\n        }\r\n        else {\r\n            Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\r\n            intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n\r\n            intent.setType(&quot;application/pdf&quot;);\r\n          //  intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);\r\n          //  intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n\r\n          //  intent.setAction(Intent.ACTION_GET_CONTENT);\r\n            startActivityForResult(Intent.createChooser(intent, &quot;Select Pdf&quot;), PICK_IMAGE_REQUEST);\r\n        }\r\n    }\r\n      public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (resultCode == RESULT_OK) {\r\n\r\n            if(requestCode == PICK_IMAGE_REQUEST){\r\n                Uri picUri = data.getData();\r\n\r\n\r\n\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n                    filePath = getPath(this,picUri);\r\n\r\n                }\r\n\r\n\r\n                NAME = getPathfromURI(picUri);\r\n                AlertDialog.Builder a_builder = new AlertDialog.Builder(Teacher_upload_files.this);\r\n                a_builder.setMessage(&quot;اسم الملف :&quot;+NAME)\r\n                        .setCancelable(false)\r\n                        .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                 fileName.setText(NAME);\r\n                            }\r\n                        });\r\n                AlertDialog alert = a_builder.create();\r\n                alert.setTitle(&quot;شكرا :) &quot;);\r\n                alert.show();\r\n\r\n                Log.d(&quot;picUri&quot;, picUri.toString());\r\n              //  Log.d(&quot;filePath&quot;, filePath);\r\n\r\n             //   imageView.setImageURI(picUri);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n**this is how I get the path**\r\n\r\n    \r\n    public static String getPath(final Context context, final Uri uri) {\r\n\r\n        final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT;\r\n\r\n        // DocumentProvider\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n            if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\r\n                // ExternalStorageProvider\r\n                if (isExternalStorageDocument(uri)) {\r\n                    final String docId = DocumentsContract.getDocumentId(uri);\r\n                    final String[] split = docId.split(&quot;:&quot;);\r\n                    final String type = split[0];\r\n\r\n                    if (&quot;primary&quot;.equalsIgnoreCase(type)) {\r\n                        return Environment.getExternalStorageDirectory() + &quot;/&quot; + split[1];\r\n                    }\r\n\r\n                    // TODO handle non-primary volumes\r\n                }\r\n                // DownloadsProvider\r\n                else if (isDownloadsDocument(uri)) {\r\n\r\n                    final String id = DocumentsContract.getDocumentId(uri);\r\n\r\n                    final Uri contentUri = ContentUris.withAppendedId(\r\n                            Uri.parse(&quot;content://downloads/public_downloads&quot;), Long.valueOf(id));\r\n\r\n                    return getDataColumn(context, contentUri, null, null);\r\n                }\r\n                // MediaProvider\r\n                else if (isMediaDocument(uri)) {\r\n                    final String docId = DocumentsContract.getDocumentId(uri);\r\n                    final String[] split = docId.split(&quot;:&quot;);\r\n                    final String type = split[0];\r\n\r\n                    Uri contentUri = null;\r\n                    if (&quot;image&quot;.equals(type)) {\r\n                        contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\r\n                    } else if (&quot;video&quot;.equals(type)) {\r\n                        contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\r\n                    } else if (&quot;audio&quot;.equals(type)) {\r\n                        contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\r\n                    }\r\n\r\n                    final String selection = &quot;_id=?&quot;;\r\n                    final String[] selectionArgs = new String[] {\r\n                            split[1]\r\n                    };\r\n\r\n                    return getDataColumn(context, contentUri, selection, selectionArgs);\r\n                }\r\n            }\r\n            // MediaStore (and general)\r\n            else if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) {\r\n                return getDataColumn(context, uri, null, null);\r\n            }\r\n            // File\r\n            else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) {\r\n                return uri.getPath();\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n**the problem is here always null**\r\n\r\n    public static String getDataColumn(Context context, Uri uri, String selection,\r\n                                       String[] selectionArgs) {\r\n\r\n        Cursor cursor = null;\r\n        final String column = &quot;_data&quot;;\r\n        final String[] projection = {\r\n                column\r\n        };\r\n\r\n        try {\r\n            cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\r\n                    null);\r\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\r\n                final int column_index = cursor.getColumnIndexOrThrow(column);\r\n                return cursor.getString(column_index);\r\n            }\r\n        } finally {\r\n            if (cursor != null)\r\n                cursor.close();\r\n        }\r\n        return null;\r\n    }\r\n\r\n**and this is the error**\r\n\r\n     java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.providers.downloads.documents/document/4736 flg=0x43 }} to activity {com.am.ahmad/com.am.ahmad.Teacher_upload_files}: java.lang.IllegalArgumentException: Unknown URI: content://downloads/public_downloads/4736\r\n        at android.app.ActivityThread.deliverResults(ActivityThread.java:4932)\r\n        at android.app.ActivityThread.handleSendResult(ActivityThread.java:4975)\r\n        at android.app.ActivityThread.-wrap20(Unknown Source:0)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1950)\r\n        at android.os.Handler.dispatchMessage(Handler.java:108)\r\n        at android.os.Looper.loop(Looper.java:166)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7425)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921)\r\n     Caused by: java.lang.IllegalArgumentException: Unknown URI: content://downloads/public_downloads/4736\r\n        at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:165)\r\n        at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:135)\r\n        at android.content.ContentProviderProxy.query(ContentProviderNative.java:418)\r\n        at android.content.ContentResolver.query(ContentResolver.java:766)\r\n        at android.content.ContentResolver.query(ContentResolver.java:716)\r\n        at android.content.ContentResolver.query(ContentResolver.java:667)\r\n        at com.am.ahmad.Teacher_upload_files.getDataColumn(Teacher_upload_files.java:593)\r\n        at com.am.ahmad.Teacher_upload_files.getPath(Teacher_upload_files.java:536)\r\n        at com.am.ahmad.Teacher_upload_files.onActivityResult(Teacher_upload_files.java:372)\r\n        at android.app.Activity.dispatchActivityResult(Activity.java:7690)\r\n        at android.app.ActivityThread.deliverResults(ActivityThread.java:4928)\r\n        at android.app.ActivityThread.handleSendResult(ActivityThread.java:4975) \r\n        at android.app.ActivityThread.-wrap20(Unknown Source:0) \r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1950) \r\n        at android.os.Handler.dispatchMessage(Handler.java:108) \r\n        at android.os.Looper.loop(Looper.java:166) \r\n        at android.app.ActivityThread.main(ActivityThread.java:7425) \r\n        at java.lang.reflect.Method.invoke(Native Method) \r\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245) \r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921) ","title":"I could not choose PDF file in Android 8 Oreo (Huawei)","body":"<p>I am new to android and I am  trying to choose pdf file to upload to the server in an android application \nI have a problem with api>24 in Huawei phones \nI take look for similar problems in StackOverflow but did not solve my problem \n<a href=\"https://stackoverflow.com/questions/51546617/in-android-8-oreo-intent-chooser-is-not-working-to-set-wallpaper\">like this question </a></p>\n\n<p>this problem just with Huawei's phone \nI have tried to pick a file from Samsung oreo and everything is okay, \nbut with Huawei, the activity crushed \n<strong>my code</strong></p>\n\n<pre><code>   private void imageBrowse() {\n\n\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n        Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n        intent.addCategory(Intent.CATEGORY_OPENABLE);\n\n        intent.setType(\"application/pdf\");\n        startActivityForResult(Intent.createChooser(intent, \"Select Pdf\"), PICK_IMAGE_REQUEST);\n    }\n    else {\n        Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);\n        intent.addCategory(Intent.CATEGORY_OPENABLE);\n\n        intent.setType(\"application/pdf\");\n      //  intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);\n      //  intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n\n      //  intent.setAction(Intent.ACTION_GET_CONTENT);\n        startActivityForResult(Intent.createChooser(intent, \"Select Pdf\"), PICK_IMAGE_REQUEST);\n    }\n}\n  public void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    if (resultCode == RESULT_OK) {\n\n        if(requestCode == PICK_IMAGE_REQUEST){\n            Uri picUri = data.getData();\n\n\n\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n                filePath = getPath(this,picUri);\n\n            }\n\n\n            NAME = getPathfromURI(picUri);\n            AlertDialog.Builder a_builder = new AlertDialog.Builder(Teacher_upload_files.this);\n            a_builder.setMessage(\"اسم الملف :\"+NAME)\n                    .setCancelable(false)\n                    .setPositiveButton(\"Ok\", new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                             fileName.setText(NAME);\n                        }\n                    });\n            AlertDialog alert = a_builder.create();\n            alert.setTitle(\"شكرا :) \");\n            alert.show();\n\n            Log.d(\"picUri\", picUri.toString());\n          //  Log.d(\"filePath\", filePath);\n\n         //   imageView.setImageURI(picUri);\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<p><strong>this is how I get the path</strong></p>\n\n<pre><code>public static String getPath(final Context context, final Uri uri) {\n\n    final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT;\n\n    // DocumentProvider\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n        if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\n            // ExternalStorageProvider\n            if (isExternalStorageDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(\":\");\n                final String type = split[0];\n\n                if (\"primary\".equalsIgnoreCase(type)) {\n                    return Environment.getExternalStorageDirectory() + \"/\" + split[1];\n                }\n\n                // TODO handle non-primary volumes\n            }\n            // DownloadsProvider\n            else if (isDownloadsDocument(uri)) {\n\n                final String id = DocumentsContract.getDocumentId(uri);\n\n                final Uri contentUri = ContentUris.withAppendedId(\n                        Uri.parse(\"content://downloads/public_downloads\"), Long.valueOf(id));\n\n                return getDataColumn(context, contentUri, null, null);\n            }\n            // MediaProvider\n            else if (isMediaDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(\":\");\n                final String type = split[0];\n\n                Uri contentUri = null;\n                if (\"image\".equals(type)) {\n                    contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n                } else if (\"video\".equals(type)) {\n                    contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n                } else if (\"audio\".equals(type)) {\n                    contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n                }\n\n                final String selection = \"_id=?\";\n                final String[] selectionArgs = new String[] {\n                        split[1]\n                };\n\n                return getDataColumn(context, contentUri, selection, selectionArgs);\n            }\n        }\n        // MediaStore (and general)\n        else if (\"content\".equalsIgnoreCase(uri.getScheme())) {\n            return getDataColumn(context, uri, null, null);\n        }\n        // File\n        else if (\"file\".equalsIgnoreCase(uri.getScheme())) {\n            return uri.getPath();\n        }\n    }\n\n    return null;\n}\n</code></pre>\n\n<p><strong>the problem is here always null</strong></p>\n\n<pre><code>public static String getDataColumn(Context context, Uri uri, String selection,\n                                   String[] selectionArgs) {\n\n    Cursor cursor = null;\n    final String column = \"_data\";\n    final String[] projection = {\n            column\n    };\n\n    try {\n        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\n                null);\n        if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n            final int column_index = cursor.getColumnIndexOrThrow(column);\n            return cursor.getString(column_index);\n        }\n    } finally {\n        if (cursor != null)\n            cursor.close();\n    }\n    return null;\n}\n</code></pre>\n\n<p><strong>and this is the error</strong></p>\n\n<pre><code> java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.providers.downloads.documents/document/4736 flg=0x43 }} to activity {com.am.ahmad/com.am.ahmad.Teacher_upload_files}: java.lang.IllegalArgumentException: Unknown URI: content://downloads/public_downloads/4736\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:4932)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:4975)\n    at android.app.ActivityThread.-wrap20(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1950)\n    at android.os.Handler.dispatchMessage(Handler.java:108)\n    at android.os.Looper.loop(Looper.java:166)\n    at android.app.ActivityThread.main(ActivityThread.java:7425)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921)\n Caused by: java.lang.IllegalArgumentException: Unknown URI: content://downloads/public_downloads/4736\n    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:165)\n    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:135)\n    at android.content.ContentProviderProxy.query(ContentProviderNative.java:418)\n    at android.content.ContentResolver.query(ContentResolver.java:766)\n    at android.content.ContentResolver.query(ContentResolver.java:716)\n    at android.content.ContentResolver.query(ContentResolver.java:667)\n    at com.am.ahmad.Teacher_upload_files.getDataColumn(Teacher_upload_files.java:593)\n    at com.am.ahmad.Teacher_upload_files.getPath(Teacher_upload_files.java:536)\n    at com.am.ahmad.Teacher_upload_files.onActivityResult(Teacher_upload_files.java:372)\n    at android.app.Activity.dispatchActivityResult(Activity.java:7690)\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:4928)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:4975) \n    at android.app.ActivityThread.-wrap20(Unknown Source:0) \n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1950) \n    at android.os.Handler.dispatchMessage(Handler.java:108) \n    at android.os.Looper.loop(Looper.java:166) \n    at android.app.ActivityThread.main(ActivityThread.java:7425) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245) \n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921) \n</code></pre>\n"},{"tags":["java","github-actions"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1647341700,"post_id":71471424,"comment_id":126341585,"body_markdown":"I guess you are missing that &quot;executable exists&quot; isn&#39;t the same as &quot;executable is on PATH&quot;.","body":"I guess you are missing that &quot;executable exists&quot; isn&#39;t the same as &quot;executable is on PATH&quot;."}],"answers":[{"tags":[],"owner":{"account_id":4307810,"reputation":304,"user_id":3519749,"display_name":"bselu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1647341520,"creation_date":1647341520,"answer_id":71480982,"question_id":71471424,"body_markdown":"I take it, you change into the particular directory (`/home/runner/work/project/project/submodule/build/protoc/bin`) before trying to execute it? Then I believe the program is not found because the current working directory is not in your `$PATH` and you are not specifying an absolute path in your call.\r\n\r\nTry either adding `/home/runner/work/project/project/submodule/build/protoc/bin` to your `$PATH` or change `&quot;protoc&quot;` to `&quot;./protoc&quot;` in your call:\r\n```\r\nProcessBuilder(\r\n              &quot;./protoc&quot;,\r\n              &quot;--proto_path&quot;,\r\n              intermediateProtoDir.absolutePath,\r\n              &quot;--plugin&quot;,\r\n              binDir.resolve(&quot;proto-gen-rust&quot;).absolutePath,\r\n      )\r\n```","title":"Why protoc executable fails to run from Gradle on GitHub Action?","body":"<p>I take it, you change into the particular directory (<code>/home/runner/work/project/project/submodule/build/protoc/bin</code>) before trying to execute it? Then I believe the program is not found because the current working directory is not in your <code>$PATH</code> and you are not specifying an absolute path in your call.</p>\n<p>Try either adding <code>/home/runner/work/project/project/submodule/build/protoc/bin</code> to your <code>$PATH</code> or change <code>&quot;protoc&quot;</code> to <code>&quot;./protoc&quot;</code> in your call:</p>\n<pre><code>ProcessBuilder(\n              &quot;./protoc&quot;,\n              &quot;--proto_path&quot;,\n              intermediateProtoDir.absolutePath,\n              &quot;--plugin&quot;,\n              binDir.resolve(&quot;proto-gen-rust&quot;).absolutePath,\n      )\n</code></pre>\n"}],"owner":{"account_id":1111591,"reputation":2079,"user_id":1101963,"accept_rate":55,"display_name":"Yuriy Kulikov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":491,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71480982,"answer_count":1,"score":0,"last_activity_date":1647341520,"creation_date":1647276747,"question_id":71471424,"body_markdown":"I have a `ubuntu-latest` GitHub action which builds a project using Gradle. \r\n\r\nOne of the Gradle tasks is a `JavaExec` task which runs a code generator:\r\n```\r\ntask(&quot;generateCode&quot;, JavaExec::class) {\r\n  mainClass.set(&quot;code.generator.Main&quot;)\r\n  classpath = generateCodeClasspath\r\n}\r\n```\r\n\r\nRecently the Java application has been modified to download a binary (`protoc`), copy it to the file system and execute it. &quot;It works on my machine&quot;, but it fails on GitHub Action and I can&#39;t find out why.\r\n\r\nThe `protoc` binary is downloaded to `/home/runner/work/project/project/submodule/build/protoc/bin`.\r\nImmediately before the JVM attempts to spawn the `protoc` process, file exists and is executable:\r\n\r\n`stat protoc`\r\n```\r\n  File: protoc\r\n  Size: 4539800   \tBlocks: 8872       IO Block: 4096   regular file\r\nDevice: 811h/2065d\tInode: 1822895     Links: 1\r\nAccess: (0744/-rwxr--r--)  Uid: ( 1001/  runner)   Gid: (  121/  docker)\r\nAccess: 2022-03-14 14:51:45.943750443 +0000\r\nModify: 2022-03-14 14:51:45.979750853 +0000\r\nChange: 2022-03-14 14:51:45.979750853 +0000\r\n Birth: -\r\n```\r\n\r\n`ldd protoc`\r\n\r\n```\r\n\tlinux-vdso.so.1 (0x00007ffd43ba6000)\r\n\tlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fc367fd3000)\r\n\tlibpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fc367fb0000)\r\n\tlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fc367dbe000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fc368133000)\r\n ```\r\n\r\nThe program is started with ProcessBuilder using these arguments:\r\n```\r\nProcessBuilder(\r\n              &quot;protoc&quot;,\r\n              &quot;--proto_path&quot;,\r\n              intermediateProtoDir.absolutePath,\r\n              &quot;--plugin&quot;,\r\n              binDir.resolve(&quot;proto-gen-rust&quot;).absolutePath,\r\n      )\r\n```\r\n\r\nHowever, running `protoc` fails with:\r\n```\r\nException in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;protoc&quot; (in directory &quot;/home/runner/work/project/project/submodule/build/protoc/bin&quot;): error=2, No such file or directory\r\n\tat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1128)\r\n\tat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1071)\r\n```\r\n\r\nWhat am I missing?","title":"Why protoc executable fails to run from Gradle on GitHub Action?","body":"<p>I have a <code>ubuntu-latest</code> GitHub action which builds a project using Gradle.</p>\n<p>One of the Gradle tasks is a <code>JavaExec</code> task which runs a code generator:</p>\n<pre><code>task(&quot;generateCode&quot;, JavaExec::class) {\n  mainClass.set(&quot;code.generator.Main&quot;)\n  classpath = generateCodeClasspath\n}\n</code></pre>\n<p>Recently the Java application has been modified to download a binary (<code>protoc</code>), copy it to the file system and execute it. &quot;It works on my machine&quot;, but it fails on GitHub Action and I can't find out why.</p>\n<p>The <code>protoc</code> binary is downloaded to <code>/home/runner/work/project/project/submodule/build/protoc/bin</code>.\nImmediately before the JVM attempts to spawn the <code>protoc</code> process, file exists and is executable:</p>\n<p><code>stat protoc</code></p>\n<pre><code>  File: protoc\n  Size: 4539800     Blocks: 8872       IO Block: 4096   regular file\nDevice: 811h/2065d  Inode: 1822895     Links: 1\nAccess: (0744/-rwxr--r--)  Uid: ( 1001/  runner)   Gid: (  121/  docker)\nAccess: 2022-03-14 14:51:45.943750443 +0000\nModify: 2022-03-14 14:51:45.979750853 +0000\nChange: 2022-03-14 14:51:45.979750853 +0000\n Birth: -\n</code></pre>\n<p><code>ldd protoc</code></p>\n<pre><code>    linux-vdso.so.1 (0x00007ffd43ba6000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fc367fd3000)\n    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fc367fb0000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fc367dbe000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007fc368133000)\n</code></pre>\n<p>The program is started with ProcessBuilder using these arguments:</p>\n<pre><code>ProcessBuilder(\n              &quot;protoc&quot;,\n              &quot;--proto_path&quot;,\n              intermediateProtoDir.absolutePath,\n              &quot;--plugin&quot;,\n              binDir.resolve(&quot;proto-gen-rust&quot;).absolutePath,\n      )\n</code></pre>\n<p>However, running <code>protoc</code> fails with:</p>\n<pre><code>Exception in thread &quot;main&quot; java.io.IOException: Cannot run program &quot;protoc&quot; (in directory &quot;/home/runner/work/project/project/submodule/build/protoc/bin&quot;): error=2, No such file or directory\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1128)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1071)\n</code></pre>\n<p>What am I missing?</p>\n"},{"tags":["java","jpa","java-stream","record"],"comments":[{"owner":{"account_id":471113,"reputation":2483,"user_id":878700,"accept_rate":54,"display_name":"tbeernot"},"score":0,"creation_date":1646747471,"post_id":71396113,"comment_id":126196447,"body_markdown":"It works correctly if I collect the result after the map into a list and then stream over that again.","body":"It works correctly if I collect the result after the map into a list and then stream over that again."},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1646748324,"post_id":71396113,"comment_id":126196791,"body_markdown":"Could not reproduce the issue after uncommenting the line with `articlenr()` getter.  Please make sure that the name is typed correctly.  You may also provide the sample of current output.","body":"Could not reproduce the issue after uncommenting the line with <code>articlenr()</code> getter.  Please make sure that the name is typed correctly.  You may also provide the sample of current output."},{"owner":{"account_id":471113,"reputation":2483,"user_id":878700,"accept_rate":54,"display_name":"tbeernot"},"score":0,"creation_date":1646771789,"post_id":71396113,"comment_id":126205569,"body_markdown":"I copied the actual code, so the articlenr in de record matches the one in the commented line. Maybe it is a difference between the Eclipse compiler and the normal JDK... It&#39;s the Eclipse compiler that complains.","body":"I copied the actual code, so the articlenr in de record matches the one in the commented line. Maybe it is a difference between the Eclipse compiler and the normal JDK... It&#39;s the Eclipse compiler that complains."},{"owner":{"account_id":471113,"reputation":2483,"user_id":878700,"accept_rate":54,"display_name":"tbeernot"},"score":0,"creation_date":1647341207,"post_id":71396113,"comment_id":126341395,"body_markdown":"No, also the OpenJDK compiler has issues with this: cannot find symbol\n  symbol:   method articlenr()\n  location: variable consistsof of type java.lang.Object","body":"No, also the OpenJDK compiler has issues with this: cannot find symbol   symbol:   method articlenr()   location: variable consistsof of type java.lang.Object"}],"owner":{"account_id":471113,"reputation":2483,"user_id":878700,"accept_rate":54,"display_name":"tbeernot"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":905,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1647341258,"creation_date":1646747260,"question_id":71396113,"body_markdown":"I have a database with a stored procedure, so I need to use a JPA native query to include that in the output. I would like to put the result of the query in a Java record class and then process that using streams.\r\n\r\n```java\r\n    record Consistof(Integer articlenr, String articleDescription, String articletypeDescription, String locations) {}\r\n    \r\n    entityManager.createNativeQuery(&quot;SELECT ... &quot;).getResultStream()\r\n    .map(values -&gt; {\r\n    \tObject[] oa = (Object[])values;\r\n    \treturn new Consistof((Integer)oa[0], (String)oa[1], (String)oa[2], (String)oa[3]); \r\n    })\r\n    .forEach(consistsof -&gt; {\r\n    \tSystem.out.println(&quot;!!!!!&quot; + consistsof);\r\n    \t//System.out.println(&quot;!!!!!&quot; + consistsof.articlenr());\r\n    });\r\n```\r\n\r\nWhen I run the code above, the output shows instances of the record class. So the mapping is correct and working. However, the compiler feels that I cannot uncomment the last line; it does not recognize the articlenr() method. Why?\r\n\r\n```\r\ncannot find symbol\r\n  symbol:   method articlenr()\r\n  location: variable consistsof of type java.lang.Object\r\n```","title":"How to convert a JPA native query to stream of record classes","body":"<p>I have a database with a stored procedure, so I need to use a JPA native query to include that in the output. I would like to put the result of the query in a Java record class and then process that using streams.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    record Consistof(Integer articlenr, String articleDescription, String articletypeDescription, String locations) {}\n    \n    entityManager.createNativeQuery(&quot;SELECT ... &quot;).getResultStream()\n    .map(values -&gt; {\n        Object[] oa = (Object[])values;\n        return new Consistof((Integer)oa[0], (String)oa[1], (String)oa[2], (String)oa[3]); \n    })\n    .forEach(consistsof -&gt; {\n        System.out.println(&quot;!!!!!&quot; + consistsof);\n        //System.out.println(&quot;!!!!!&quot; + consistsof.articlenr());\n    });\n</code></pre>\n<p>When I run the code above, the output shows instances of the record class. So the mapping is correct and working. However, the compiler feels that I cannot uncomment the last line; it does not recognize the articlenr() method. Why?</p>\n<pre><code>cannot find symbol\n  symbol:   method articlenr()\n  location: variable consistsof of type java.lang.Object\n</code></pre>\n"},{"tags":["java","ios","appium","appium-ios"],"answers":[{"tags":[],"owner":{"account_id":7609140,"reputation":21,"user_id":5770698,"display_name":"Syl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647340853,"creation_date":1647340853,"answer_id":71480829,"question_id":70276828,"body_markdown":"What I ended up doing is using driver.activateApp() to switch to iOS Settings App, and switching back to the app I&#39;m testing afterwards. So problem is at least not blocking me anymore. I liked using the control center for various things. Oh well ...","title":"Using Appium unable to swipe from the bottom to the top to open control centre with iOS 15","body":"<p>What I ended up doing is using driver.activateApp() to switch to iOS Settings App, and switching back to the app I'm testing afterwards. So problem is at least not blocking me anymore. I liked using the control center for various things. Oh well ...</p>\n"}],"owner":{"account_id":7609140,"reputation":21,"user_id":5770698,"display_name":"Syl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647340853,"creation_date":1638974430,"question_id":70276828,"body_markdown":"I would like to open the iOS control centre (to activate airplane mode) using **appium 1.22 with iOS 15.1**. The code I am using works great with **iOS 14.8**. I have tried using TouchAction and PointerInput Actions, with the same result. The screen scrolls up on 15.1 but the control centre does not appear. Any help would be appreciated, I am blocked with automated tests on iOS 15.\r\n\r\nEnvironment:&lt;br&gt;\r\niOS 15&lt;br&gt;\r\nappium 1.22\r\n\r\nMy code:\r\n```\r\n        Dimension d = driver.manage().window().getSize();\r\n        int width = d.getWidth();\r\n        int height = d.getHeight();\r\n\r\n        int w = (int) (.5 * width);\r\n        int swipeTo = (int) (height * 0.2);\r\n\r\n        PointerInput finger = new PointerInput(PointerInput.Kind.TOUCH, &quot;finger&quot;);\r\n        Sequence swipeUpForControlCentre = new Sequence(finger, 1);\r\n        swipeUpForControlCentre.addAction(finger.createPointerMove(Duration.ofMillis(0), PointerInput.Origin.viewport(), w, height));\r\n        swipeUpForControlCentre.addAction(finger.createPointerDown(0));\r\n        swipeUpForControlCentre.addAction(finger.createPointerMove(Duration.ofMillis(700),\r\n                PointerInput.Origin.viewport(),w, swipeTo));\r\n        swipeUpForControlCentre.addAction(finger.createPointerUp(0));\r\n        driver.perform(Arrays.asList(swipeUpForControlCentre));\r\n```","title":"Using Appium unable to swipe from the bottom to the top to open control centre with iOS 15","body":"<p>I would like to open the iOS control centre (to activate airplane mode) using <strong>appium 1.22 with iOS 15.1</strong>. The code I am using works great with <strong>iOS 14.8</strong>. I have tried using TouchAction and PointerInput Actions, with the same result. The screen scrolls up on 15.1 but the control centre does not appear. Any help would be appreciated, I am blocked with automated tests on iOS 15.</p>\n<p>Environment:<br>\niOS 15<br>\nappium 1.22</p>\n<p>My code:</p>\n<pre><code>        Dimension d = driver.manage().window().getSize();\n        int width = d.getWidth();\n        int height = d.getHeight();\n\n        int w = (int) (.5 * width);\n        int swipeTo = (int) (height * 0.2);\n\n        PointerInput finger = new PointerInput(PointerInput.Kind.TOUCH, &quot;finger&quot;);\n        Sequence swipeUpForControlCentre = new Sequence(finger, 1);\n        swipeUpForControlCentre.addAction(finger.createPointerMove(Duration.ofMillis(0), PointerInput.Origin.viewport(), w, height));\n        swipeUpForControlCentre.addAction(finger.createPointerDown(0));\n        swipeUpForControlCentre.addAction(finger.createPointerMove(Duration.ofMillis(700),\n                PointerInput.Origin.viewport(),w, swipeTo));\n        swipeUpForControlCentre.addAction(finger.createPointerUp(0));\n        driver.perform(Arrays.asList(swipeUpForControlCentre));\n</code></pre>\n"},{"tags":["java","sparql","rdf","graphdb","rdf4j"],"comments":[{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1647324217,"post_id":71469747,"comment_id":126336180,"body_markdown":"what the difference to your previous question? https://stackoverflow.com/questions/71436181/how-to-setup-a-sparql-endpoint-for-a-sailrepository-in-java - also feel free to ask on the RDF4J discussions channel: https://github.com/eclipse/rdf4j/discussions/3089","body":"what the difference to your previous question? <a href=\"https://stackoverflow.com/questions/71436181/how-to-setup-a-sparql-endpoint-for-a-sailrepository-in-java\" title=\"how to setup a sparql endpoint for a sailrepository in java\">stackoverflow.com/questions/71436181/&hellip;</a> - also feel free to ask on the RDF4J discussions channel: <a href=\"https://github.com/eclipse/rdf4j/discussions/3089\" rel=\"nofollow noreferrer\">github.com/eclipse/rdf4j/discussions/3089</a>"},{"owner":{"account_id":7120536,"reputation":358,"user_id":5445329,"accept_rate":58,"display_name":"Greenfish"},"score":0,"creation_date":1647340862,"post_id":71469747,"comment_id":126341283,"body_markdown":"I answered my own question after I realized some things. thanks!","body":"I answered my own question after I realized some things. thanks!"}],"answers":[{"tags":[],"owner":{"account_id":7120536,"reputation":358,"user_id":5445329,"accept_rate":58,"display_name":"Greenfish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647340838,"creation_date":1647340838,"answer_id":71480824,"question_id":71469747,"body_markdown":"The GraphDB server needs to be running on localhost:7200 first and the SailRepository should be built into GraphDB&#39;s local data directory, which is usually on ~/.graphdb/data. The SailRepository is just the &quot;repository part&quot;, it does not provide any server. This is the beauty of SailRepositorie&#39;s that they can be mounted on any server which implements its specifications. \r\n","title":"Is it possible to create a Sail repository with sparql endpoints?","body":"<p>The GraphDB server needs to be running on localhost:7200 first and the SailRepository should be built into GraphDB's local data directory, which is usually on ~/.graphdb/data. The SailRepository is just the &quot;repository part&quot;, it does not provide any server. This is the beauty of SailRepositorie's that they can be mounted on any server which implements its specifications.</p>\n"}],"owner":{"account_id":7120536,"reputation":358,"user_id":5445329,"accept_rate":58,"display_name":"Greenfish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647340838,"creation_date":1647269698,"question_id":71469747,"body_markdown":"I have config.ttl file for a local GraphDB SailRepository but I also want to access it not only via direct java invocation but also via SPARQL endpoints. My config.ttl file looks like this:\r\n\r\n    # RDF4J configuration template for a GraphDB Free repository\r\n    \r\n    @prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;.\r\n    @prefix rep: &lt;http://www.openrdf.org/config/repository#&gt;.\r\n    @prefix sr: &lt;http://www.openrdf.org/config/repository/sail#&gt;.\r\n    @prefix sail: &lt;http://www.openrdf.org/config/sail#&gt;.\r\n    @prefix owlim: &lt;http://www.ontotext.com/trree/owlim#&gt;.\r\n    @prefix sparql: &lt;http://www.openrdf.org/config/repository/sparql#&gt;.\r\n    \r\n    [] a rep:Repository ;\r\n        rep:repositoryID &quot;test&quot; ;\r\n        rep:repositoryImpl [\r\n            rep:repositoryType &quot;graphdb:FreeSailRepository&quot; ;\r\n            sparql:query-endpoint &lt;http://localhost:7200/repositories/test&gt; ;\r\n            sparql:update-endpoint &lt;http://localhost:7200/repositories/test/statements&gt; ;\r\n            sr:sailImpl [\r\n                sail:sailType &quot;graphdb:FreeSail&quot; ;\r\n                ...\r\n            ]\r\n        ].\r\n\r\nThis configuration is a combination of a SPARQL and a Sail repository (https://rdf4j.org/documentation/reference/configuration/ 1.1 and 1.3). While an access via org.eclipse.rdf4j.repository.sail.SailRepository is possible I cannot access my local repository via org.eclipse.rdf4j.repository.sparql.SPARQLRepository\r\n\r\nHere is the full code:\r\n\r\n    private static LocalRepositoryManager repositoryManager;\r\n    private static RepositoryConnection embeddedRepoCon;\r\n    private static SPARQLProtocolSession session;\r\n\r\n    @BeforeClass\r\n    public static void init() {\r\n        try {\r\n            //Create local repo\r\n            File baseDir = new File(&quot;target&quot;,&quot;GraphDB&quot;);\r\n            if (!baseDir.exists())\r\n                baseDir.mkdirs();\r\n            repositoryManager = new LocalRepositoryManager(baseDir);\r\n            repositoryManager.init();\r\n            if(new File(&quot;target/GraphDB/repositories/test&quot;).exists()) {\r\n                repositoryManager.removeRepository(&quot;test&quot;);\r\n                System.out.println(&quot;Repository removed.&quot;);\r\n            }\r\n\r\n            //Add repository config to repository manager\r\n            InputStream config = TestRDFStarTimestampingPlugin.class.getResourceAsStream(&quot;/repo-defaults.ttl&quot;);\r\n            Model repo_config_graph = Rio.parse(config, &quot;&quot;, RDFFormat.TURTLE);\r\n            Resource repositoryNode = Models.subject(repo_config_graph.filter(null, RDF.TYPE, RepositoryConfigSchema.REPOSITORY)).orElse(null);\r\n            RepositoryConfig repositoryConfig = RepositoryConfig.create(repo_config_graph, repositoryNode);\r\n            repositoryManager.addRepositoryConfig(repositoryConfig);\r\n\r\n            //Initialize repo\r\n            //Repository repo = repositoryManager.getRepository(&quot;test&quot;);\r\n            SailRepository repo = (SailRepository) repositoryManager.getRepository(&quot;test&quot;);\r\n            repo.init();\r\n\r\n            //Establish connection to repo\r\n            embeddedRepoCon = repo.getConnection();\r\n\r\n        } catch (RDFHandlerException | RDFParseException | IOException | RepositoryConfigException | RepositoryException  e) {\r\n            System.err.println(&quot;The GraphDB repository will not be created.&quot;);\r\n            System.err.println(e.getMessage());\r\n        }\r\n\r\n    }\r\n\r\nFollowing test passes\r\n\r\n       @Test\r\n        public void repoSailConnectionTest() {\r\n            //Test queries\r\n            BooleanQuery query = embeddedRepoCon.prepareBooleanQuery(&quot;ask from &lt;http://example.com/testGraph&gt; { ?s ?p ?o }&quot;);\r\n            boolean hasResults = query.evaluate();\r\n            assertFalse(&quot;No triples should be in the graph yet.&quot;, hasResults);\r\n            System.out.println(&quot;Result from ask query: &quot; + hasResults);\r\n            System.out.println(&quot;Read queries are executable against the embedded repository&quot;);\r\n    \r\n            // Test update statements\r\n            String updateString;\r\n            updateString = &quot;clear graph &lt;http://example.com/testGraph&gt;&quot;;\r\n            embeddedRepoCon.prepareUpdate(updateString).execute();\r\n            embeddedRepoCon.commit();\r\n    \r\n            updateString = &quot;delete data {graph &lt;http://example.com/testGraph&gt; &quot; +\r\n                    &quot;{&lt;http://example.com/s/v1&gt; &lt;http://example.com/p/v2&gt; &lt;http://example.com/o/v3&gt;}}&quot;;\r\n            embeddedRepoCon.prepareUpdate(updateString).execute();\r\n            embeddedRepoCon.commit();\r\n            System.out.println(&quot;Write statements are executable against the embedded repository&quot;);\r\n\r\n\r\nBut the access via SPARQLRepository test does not pass because the connection gets refused:\r\n\r\n    @Test\r\n    public void repoSPARQLConnectionTest() {\r\n        //Test queries\r\n        SPARQLRepository repo = new SPARQLRepository(&quot;http://localhost:7200/repositories/test&quot;);\r\n        repo.init();\r\n        try (RepositoryConnection connection = repo.getConnection()) {\r\n            BooleanQuery query = connection.prepareBooleanQuery(&quot;ask from &lt;http://example.com/testGraph&gt; { ?s ?p ?o }&quot;);\r\n            boolean hasResults = query.evaluate();\r\n            assertFalse(&quot;No triples should be in the graph yet.&quot;, hasResults);\r\n            System.out.println(&quot;Result from ask query: &quot; + hasResults);\r\n            System.out.println(&quot;Read queries are executable against the embedded repository&quot;);\r\n        }\r\n        repo.shutDown();\r\n\r\n        // Test update statements\r\n        repo = new SPARQLRepository(&quot;http://localhost:7200/repositories/test/statements&quot;);\r\n        repo.init();\r\n        try (RepositoryConnection connection = repo.getConnection()) {\r\n            String updateString;\r\n            updateString = &quot;clear graph &lt;http://example.com/testGraph&gt;&quot;;\r\n            connection.begin();\r\n            connection.prepareUpdate(updateString).execute();\r\n            connection.commit();\r\n\r\n            updateString = &quot;delete data {graph &lt;http://example.com/testGraph&gt; &quot; +\r\n                    &quot;{&lt;http://example.com/s/v1&gt; &lt;http://example.com/p/v2&gt; &lt;http://example.com/o/v3&gt;}}&quot;;\r\n            connection.prepareUpdate(updateString).execute();\r\n            connection.commit();\r\n            System.out.println(&quot;Write statements are executable against the embedded repository&quot;);\r\n        }\r\n    }\r\n\r\nException:\r\n\r\n    org.eclipse.rdf4j.query.QueryEvaluationException: Connect to localhost:7200 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\r\n\r\n","title":"Is it possible to create a Sail repository with sparql endpoints?","body":"<p>I have config.ttl file for a local GraphDB SailRepository but I also want to access it not only via direct java invocation but also via SPARQL endpoints. My config.ttl file looks like this:</p>\n<pre><code># RDF4J configuration template for a GraphDB Free repository\n\n@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;.\n@prefix rep: &lt;http://www.openrdf.org/config/repository#&gt;.\n@prefix sr: &lt;http://www.openrdf.org/config/repository/sail#&gt;.\n@prefix sail: &lt;http://www.openrdf.org/config/sail#&gt;.\n@prefix owlim: &lt;http://www.ontotext.com/trree/owlim#&gt;.\n@prefix sparql: &lt;http://www.openrdf.org/config/repository/sparql#&gt;.\n\n[] a rep:Repository ;\n    rep:repositoryID &quot;test&quot; ;\n    rep:repositoryImpl [\n        rep:repositoryType &quot;graphdb:FreeSailRepository&quot; ;\n        sparql:query-endpoint &lt;http://localhost:7200/repositories/test&gt; ;\n        sparql:update-endpoint &lt;http://localhost:7200/repositories/test/statements&gt; ;\n        sr:sailImpl [\n            sail:sailType &quot;graphdb:FreeSail&quot; ;\n            ...\n        ]\n    ].\n</code></pre>\n<p>This configuration is a combination of a SPARQL and a Sail repository (<a href=\"https://rdf4j.org/documentation/reference/configuration/\" rel=\"nofollow noreferrer\">https://rdf4j.org/documentation/reference/configuration/</a> 1.1 and 1.3). While an access via org.eclipse.rdf4j.repository.sail.SailRepository is possible I cannot access my local repository via org.eclipse.rdf4j.repository.sparql.SPARQLRepository</p>\n<p>Here is the full code:</p>\n<pre><code>private static LocalRepositoryManager repositoryManager;\nprivate static RepositoryConnection embeddedRepoCon;\nprivate static SPARQLProtocolSession session;\n\n@BeforeClass\npublic static void init() {\n    try {\n        //Create local repo\n        File baseDir = new File(&quot;target&quot;,&quot;GraphDB&quot;);\n        if (!baseDir.exists())\n            baseDir.mkdirs();\n        repositoryManager = new LocalRepositoryManager(baseDir);\n        repositoryManager.init();\n        if(new File(&quot;target/GraphDB/repositories/test&quot;).exists()) {\n            repositoryManager.removeRepository(&quot;test&quot;);\n            System.out.println(&quot;Repository removed.&quot;);\n        }\n\n        //Add repository config to repository manager\n        InputStream config = TestRDFStarTimestampingPlugin.class.getResourceAsStream(&quot;/repo-defaults.ttl&quot;);\n        Model repo_config_graph = Rio.parse(config, &quot;&quot;, RDFFormat.TURTLE);\n        Resource repositoryNode = Models.subject(repo_config_graph.filter(null, RDF.TYPE, RepositoryConfigSchema.REPOSITORY)).orElse(null);\n        RepositoryConfig repositoryConfig = RepositoryConfig.create(repo_config_graph, repositoryNode);\n        repositoryManager.addRepositoryConfig(repositoryConfig);\n\n        //Initialize repo\n        //Repository repo = repositoryManager.getRepository(&quot;test&quot;);\n        SailRepository repo = (SailRepository) repositoryManager.getRepository(&quot;test&quot;);\n        repo.init();\n\n        //Establish connection to repo\n        embeddedRepoCon = repo.getConnection();\n\n    } catch (RDFHandlerException | RDFParseException | IOException | RepositoryConfigException | RepositoryException  e) {\n        System.err.println(&quot;The GraphDB repository will not be created.&quot;);\n        System.err.println(e.getMessage());\n    }\n\n}\n</code></pre>\n<p>Following test passes</p>\n<pre><code>   @Test\n    public void repoSailConnectionTest() {\n        //Test queries\n        BooleanQuery query = embeddedRepoCon.prepareBooleanQuery(&quot;ask from &lt;http://example.com/testGraph&gt; { ?s ?p ?o }&quot;);\n        boolean hasResults = query.evaluate();\n        assertFalse(&quot;No triples should be in the graph yet.&quot;, hasResults);\n        System.out.println(&quot;Result from ask query: &quot; + hasResults);\n        System.out.println(&quot;Read queries are executable against the embedded repository&quot;);\n\n        // Test update statements\n        String updateString;\n        updateString = &quot;clear graph &lt;http://example.com/testGraph&gt;&quot;;\n        embeddedRepoCon.prepareUpdate(updateString).execute();\n        embeddedRepoCon.commit();\n\n        updateString = &quot;delete data {graph &lt;http://example.com/testGraph&gt; &quot; +\n                &quot;{&lt;http://example.com/s/v1&gt; &lt;http://example.com/p/v2&gt; &lt;http://example.com/o/v3&gt;}}&quot;;\n        embeddedRepoCon.prepareUpdate(updateString).execute();\n        embeddedRepoCon.commit();\n        System.out.println(&quot;Write statements are executable against the embedded repository&quot;);\n</code></pre>\n<p>But the access via SPARQLRepository test does not pass because the connection gets refused:</p>\n<pre><code>@Test\npublic void repoSPARQLConnectionTest() {\n    //Test queries\n    SPARQLRepository repo = new SPARQLRepository(&quot;http://localhost:7200/repositories/test&quot;);\n    repo.init();\n    try (RepositoryConnection connection = repo.getConnection()) {\n        BooleanQuery query = connection.prepareBooleanQuery(&quot;ask from &lt;http://example.com/testGraph&gt; { ?s ?p ?o }&quot;);\n        boolean hasResults = query.evaluate();\n        assertFalse(&quot;No triples should be in the graph yet.&quot;, hasResults);\n        System.out.println(&quot;Result from ask query: &quot; + hasResults);\n        System.out.println(&quot;Read queries are executable against the embedded repository&quot;);\n    }\n    repo.shutDown();\n\n    // Test update statements\n    repo = new SPARQLRepository(&quot;http://localhost:7200/repositories/test/statements&quot;);\n    repo.init();\n    try (RepositoryConnection connection = repo.getConnection()) {\n        String updateString;\n        updateString = &quot;clear graph &lt;http://example.com/testGraph&gt;&quot;;\n        connection.begin();\n        connection.prepareUpdate(updateString).execute();\n        connection.commit();\n\n        updateString = &quot;delete data {graph &lt;http://example.com/testGraph&gt; &quot; +\n                &quot;{&lt;http://example.com/s/v1&gt; &lt;http://example.com/p/v2&gt; &lt;http://example.com/o/v3&gt;}}&quot;;\n        connection.prepareUpdate(updateString).execute();\n        connection.commit();\n        System.out.println(&quot;Write statements are executable against the embedded repository&quot;);\n    }\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>org.eclipse.rdf4j.query.QueryEvaluationException: Connect to localhost:7200 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\n</code></pre>\n"},{"tags":["java","junit","mockito","powermock"],"answers":[{"tags":[],"owner":{"account_id":3404089,"reputation":1913,"user_id":2855609,"accept_rate":58,"display_name":"robin"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1625491571,"creation_date":1444639359,"answer_id":33076744,"question_id":33076530,"body_markdown":"You are using the wrong mock. Try using the below one \r\n\r\n`org.mockito.Mock` instead of `org.mockito.MockitoAnnotations.Mock`","title":"The type MockitoAnnotations.Mock is deprecated","body":"<p>You are using the wrong mock. Try using the below one</p>\n<p><code>org.mockito.Mock</code> instead of <code>org.mockito.MockitoAnnotations.Mock</code></p>\n"},{"tags":[],"owner":{"account_id":5346073,"reputation":1082,"user_id":4261600,"accept_rate":100,"display_name":"6rchid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560379791,"creation_date":1560379791,"answer_id":56571293,"question_id":33076530,"body_markdown":"I know this is late, but for those who run into this issue today you probably included the wrong dependency. Make sure to add:\r\n\r\n`testImplementation &#39;org.powermock:powermock-api-mockito2:2.0.2&#39;`\r\n\r\nwhere it&#39;s mockito**2**.","title":"The type MockitoAnnotations.Mock is deprecated","body":"<p>I know this is late, but for those who run into this issue today you probably included the wrong dependency. Make sure to add:</p>\n\n<p><code>testImplementation 'org.powermock:powermock-api-mockito2:2.0.2'</code></p>\n\n<p>where it's mockito<strong>2</strong>.</p>\n"},{"tags":[],"owner":{"account_id":2043806,"reputation":4771,"user_id":2118777,"display_name":"Pipo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1632234503,"creation_date":1632234503,"answer_id":69270723,"question_id":33076530,"body_markdown":"You may consider removing the **deprecated**\r\n\r\n\t@BeforeEach\r\n\tvoid init() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t}\r\n\r\nand **replace** it with this rule inside the class\r\n\r\n    @Rule //initMocks\r\n    public MockitoRule rule = MockitoJUnit.rule();    \r\n\r\n\r\n[Source][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/mockito-deprecated-mockitojunitrunner","title":"The type MockitoAnnotations.Mock is deprecated","body":"<p>You may consider removing the <strong>deprecated</strong></p>\n<pre><code>@BeforeEach\nvoid init() {\n    MockitoAnnotations.initMocks(this);\n}\n</code></pre>\n<p>and <strong>replace</strong> it with this rule inside the class</p>\n<pre><code>@Rule //initMocks\npublic MockitoRule rule = MockitoJUnit.rule();    \n</code></pre>\n<p><a href=\"https://www.baeldung.com/mockito-deprecated-mockitojunitrunner\" rel=\"nofollow noreferrer\">Source</a></p>\n"},{"tags":[],"owner":{"account_id":6360824,"reputation":854,"user_id":4936371,"display_name":"Huang Jinlong"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1647340774,"creation_date":1647340774,"answer_id":71480810,"question_id":33076530,"body_markdown":"use\r\n\r\n```java\r\nMockitoAnnotations.openMocks(this);\r\n```","title":"The type MockitoAnnotations.Mock is deprecated","body":"<p>use</p>\n<pre class=\"lang-java prettyprint-override\"><code>MockitoAnnotations.openMocks(this);\n</code></pre>\n"}],"owner":{"account_id":6625221,"reputation":5148,"user_id":5115670,"accept_rate":70,"display_name":"Girdhar Singh Rathore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53394,"favorite_count":0,"down_vote_count":1,"up_vote_count":26,"accepted_answer_id":33076744,"answer_count":4,"score":25,"last_activity_date":1647340774,"creation_date":1444638617,"question_id":33076530,"body_markdown":"I am mocking a object using `@Mock` annotation\r\n\r\n    @Mock\r\n    Customer customer;\r\n\r\nbut the `@Mock` annotation is showing warning \r\n&gt;The type MockitoAnnotations.Mock is deprecated \r\n\r\nand my test case is failed","title":"The type MockitoAnnotations.Mock is deprecated","body":"<p>I am mocking a object using <code>@Mock</code> annotation</p>\n\n<pre><code>@Mock\nCustomer customer;\n</code></pre>\n\n<p>but the <code>@Mock</code> annotation is showing warning </p>\n\n<blockquote>\n  <p>The type MockitoAnnotations.Mock is deprecated </p>\n</blockquote>\n\n<p>and my test case is failed</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1647340756,"creation_date":1647339831,"answer_id":71480595,"question_id":71477712,"body_markdown":"Not the same. \r\n&lt;br&gt;In the first scenario, you create `InsertBankBusiness` service each time when access it, but in the second scenario, service creates once per HTTP request.\r\n&lt;br&gt;You need to use [`Prototype`][1] scope instead of [`Request`][2] to have the same behavior.\r\n```java\r\n    @Scope(value= &quot;prototype&quot;, proxyMode=TARGET_CLASS)\r\n    public class InsertBankBusiness {\r\n\r\n    }\r\n```\r\n\r\n`InsertBankBusiness` injected correctly via Scoped Proxy. Each time the method on the proxy object is called, the proxy decides itself whether to create a new instance of the real object or reuse the existing one.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-prototype\r\n  [2]: https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-request","title":"How Inject prototype spring bean to singleton bean","body":"<p>Not the same.\n<br>In the first scenario, you create <code>InsertBankBusiness</code> service each time when access it, but in the second scenario, service creates once per HTTP request.\n<br>You need to use <a href=\"https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-prototype\" rel=\"nofollow noreferrer\"><code>Prototype</code></a> scope instead of <a href=\"https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-request\" rel=\"nofollow noreferrer\"><code>Request</code></a> to have the same behavior.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Scope(value= &quot;prototype&quot;, proxyMode=TARGET_CLASS)\n    public class InsertBankBusiness {\n\n    }\n</code></pre>\n<p><code>InsertBankBusiness</code> injected correctly via Scoped Proxy. Each time the method on the proxy object is called, the proxy decides itself whether to create a new instance of the real object or reuse the existing one.</p>\n"}],"owner":{"account_id":7861285,"reputation":181,"user_id":5941624,"display_name":"fatemeakbari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1003,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71480595,"answer_count":1,"score":0,"last_activity_date":1647340756,"creation_date":1647324417,"question_id":71477712,"body_markdown":"I want to change my pojo class to spring, I have a problem for injection protoype bean to singelton bean, My old code was as follows:\r\n```\r\npublic class InsertBankBusiness(){\r\n\r\n\tprivate ServiceInput input;\r\n\t\r\n\tpublic void doBusiness(ServiceInput input){\r\n\t\tthis.input = input;\r\n\t\t....\r\n\t\t}\r\n},\r\n\r\npublic class BankService(){\r\n\t\r\n\tpublic void definebank(ServiceInput input){\r\n\t\tInsertBankBusiness insertBankBusiness = InsertBankBusiness ()\r\n\t\tinsertBankBusiness .doBusiness(input)\r\n\t\t}\r\n\r\n}\r\n```\r\nInsert BankBusiness class is not thread safe and I need to instantiate from it for every service call, I have now rewritten the code as follows:\r\n\r\n```\r\n@Component(value=&quot;insertBankBusiness&quot;)\r\n@Scope(value=&quot;request&quot;, proxyMode=TARGET_CLASS)\r\npublic class InsertBankBusiness(){\r\n\r\n    private ServiceInput input;\r\n\r\n    public void doBusiness(ServiceInput input){\r\n        this.input = input;\r\n        ....\r\n        }\r\n},\r\n\r\n@Service(value=&quot;bankService&quot;)\r\npublic class BankService(){\r\n\r\n\t@Autowire InsertBankBusiness insertBankBusiness;\r\n\t\r\n    public void definebank(ServiceInput input){\r\n        insertBankBusiness.doBusiness(input)\r\n        }\r\n\r\n}\r\n```\r\nIs the behavior of the second scenario the same as the first scenario? ","title":"How Inject prototype spring bean to singleton bean","body":"<p>I want to change my pojo class to spring, I have a problem for injection protoype bean to singelton bean, My old code was as follows:</p>\n<pre><code>public class InsertBankBusiness(){\n\n    private ServiceInput input;\n    \n    public void doBusiness(ServiceInput input){\n        this.input = input;\n        ....\n        }\n},\n\npublic class BankService(){\n    \n    public void definebank(ServiceInput input){\n        InsertBankBusiness insertBankBusiness = InsertBankBusiness ()\n        insertBankBusiness .doBusiness(input)\n        }\n\n}\n</code></pre>\n<p>Insert BankBusiness class is not thread safe and I need to instantiate from it for every service call, I have now rewritten the code as follows:</p>\n<pre><code>@Component(value=&quot;insertBankBusiness&quot;)\n@Scope(value=&quot;request&quot;, proxyMode=TARGET_CLASS)\npublic class InsertBankBusiness(){\n\n    private ServiceInput input;\n\n    public void doBusiness(ServiceInput input){\n        this.input = input;\n        ....\n        }\n},\n\n@Service(value=&quot;bankService&quot;)\npublic class BankService(){\n\n    @Autowire InsertBankBusiness insertBankBusiness;\n    \n    public void definebank(ServiceInput input){\n        insertBankBusiness.doBusiness(input)\n        }\n\n}\n</code></pre>\n<p>Is the behavior of the second scenario the same as the first scenario?</p>\n"},{"tags":["java","memory-management","jvm","jmx","snmp"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1647357066,"post_id":71480719,"comment_id":126347822,"body_markdown":"You have linked to a Q&amp;A which answers your question completely. Its answer links to [this documentation](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/MemoryUsage.html#getMax()) and cites the relevant part: “*This method returns -1 if the maximum memory size is undefined.*” before explaining why SNMP reports that -1 as 0. The only remaining question is *why do you mess around with the garbage collector configuration when you don’t understand the impact of these options?* Just specify `-XX:+UseG1GC -Xms4096m -Xmx16384m` (I assume you know what these options do), not more.","body":"You have linked to a Q&amp;A which answers your question completely. Its answer links to <a href=\"https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/MemoryUsage.html#getMax()\" rel=\"nofollow noreferrer\">this documentation</a> and cites the relevant part: “<i>This method returns -1 if the maximum memory size is undefined.</i>” before explaining why SNMP reports that -1 as 0. The only remaining question is <i>why do you mess around with the garbage collector configuration when you don’t understand the impact of these options?</i> Just specify <code>-XX:+UseG1GC -Xms4096m -Xmx16384m</code> (I assume you know what these options do), not more."},{"owner":{"account_id":2999441,"reputation":3025,"user_id":2545194,"accept_rate":50,"display_name":"Jdamian"},"score":0,"creation_date":1647418948,"post_id":71480719,"comment_id":126363230,"body_markdown":"Hi @Holger. _I do not mess around_ because I have not configured those Java servers. I&#39;m on charge on monitoring them, not configure them. Do you understand the impact of my job? The purpose of this question is understand how the config led to make the max values undefined.","body":"Hi @Holger. <i>I do not mess around</i> because I have not configured those Java servers. I&#39;m on charge on monitoring them, not configure them. Do you understand the impact of my job? The purpose of this question is understand how the config led to make the max values undefined."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1647422835,"post_id":71480719,"comment_id":126364643,"body_markdown":"No offence intended. Read “you” as plural, i.e. “your company”. Someone decided to add these options and if that person neither, documented the decision nor is available to answer questions about it, it’s kind of messing around. It’s striking that the decision to add these options was made before you (now singular) were assigned the job of monitoring the application, so the decision for these tuning options can’t be the result of this monitoring. The G1GC adapts the new generation size dynamically to meet the `MaxGCPauseMillis` goal, which doesn’t fit the idea of having an absolute maximum.","body":"No offence intended. Read “you” as plural, i.e. “your company”. Someone decided to add these options and if that person neither, documented the decision nor is available to answer questions about it, it’s kind of messing around. It’s striking that the decision to add these options was made before you (now singular) were assigned the job of monitoring the application, so the decision for these tuning options can’t be the result of this monitoring. The G1GC adapts the new generation size dynamically to meet the <code>MaxGCPauseMillis</code> goal, which doesn’t fit the idea of having an absolute maximum."},{"owner":{"account_id":2999441,"reputation":3025,"user_id":2545194,"accept_rate":50,"display_name":"Jdamian"},"score":0,"creation_date":1647432721,"post_id":71480719,"comment_id":126368618,"body_markdown":"Thank you @Holger. The *dynamic size* for new generation memory spaces makes me realize the need of change on my monitor script, which relies in the max value to display occupation percentage values (for instance, 34%) and accept percentage thresholds in order to raise alerts. The current release of my script raises a warning when the max value is either zero or -1.","body":"Thank you @Holger. The <i>dynamic size</i> for new generation memory spaces makes me realize the need of change on my monitor script, which relies in the max value to display occupation percentage values (for instance, 34%) and accept percentage thresholds in order to raise alerts. The current release of my script raises a warning when the max value is either zero or -1."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1647435684,"post_id":71480719,"comment_id":126369873,"body_markdown":"I don’t think that focusing on these values is helpful. The only relevant numbers are overall used memory and garbage collection pause times. As long as these numbers are fine, all other numbers are just the responsibility of the garbage collection algorithm. Only when there’s an actual problem, digging into details to analyze it makes sense. I know, that contradicts the philosophy of many tools which like to present you tons of statistics to make you feel like commanding a battleship or watching over a nuclear power plant. But in the end, only running fast and having enough memory matters.","body":"I don’t think that focusing on these values is helpful. The only relevant numbers are overall used memory and garbage collection pause times. As long as these numbers are fine, all other numbers are just the responsibility of the garbage collection algorithm. Only when there’s an actual problem, digging into details to analyze it makes sense. I know, that contradicts the philosophy of many tools which like to present you tons of statistics to make you feel like commanding a battleship or watching over a nuclear power plant. But in the end, only running fast and having enough memory matters."}],"owner":{"account_id":2999441,"reputation":3025,"user_id":2545194,"accept_rate":50,"display_name":"Jdamian"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":513,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647340722,"creation_date":1647340393,"question_id":71480719,"body_markdown":"A WildFly 10.1.0 server using Java 1.8.0_202 reports their max values for **Eden Space** and **Survivor Space** are both -1 (MBean via JMX) and 0 (via SNMP):\r\n\r\n**MBean**\r\n\r\n    java.lang:type=MemoryPool,name=G1 Eden Space/Usage/max (Long) = -1\r\n    java.lang:type=MemoryPool,name=G1 Survivor Space/Usage/max (Long) = -1\r\n\r\n**SNMP**\r\n\r\n    .1.3.6.1.4.1.42.2.145.3.163.1.1.2.110.1.13.4 = Counter64: 0\r\n    .1.3.6.1.4.1.42.2.145.3.163.1.1.2.110.1.13.5 = Counter64: 0\r\n\r\nThe mismatch between SNMP and MBean has been clarified in [this other question][1].\r\n\r\nThe Java process is launched with the following options:\r\n\r\n    -Xms4096m\r\n    -Xmx16384m\r\n    -XX:MetaspaceSize=256m\r\n    -XX:MaxMetaspaceSize=512m\r\n    -XX:MinMetaspaceFreeRatio=20\r\n    -XX:MaxMetaspaceFreeRatio=50\r\n    -XX:+UseG1GC\r\n    -XX:MaxNewSize=3584m\r\n    -XX:NewSize=3584m\r\n    -XX:SurvivorRatio=6\r\n\r\nIs correct that configuration?\r\n\r\nWhy does this happen?\r\n\r\nHow can it be solved?\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/71422671/java-process-snmp-monitoring-reports-max-values-for-eden-and-survivor-space-are","title":"Java max values for Eden Space and Survivor Space are -1. Why?","body":"<p>A WildFly 10.1.0 server using Java 1.8.0_202 reports their max values for <strong>Eden Space</strong> and <strong>Survivor Space</strong> are both -1 (MBean via JMX) and 0 (via SNMP):</p>\n<p><strong>MBean</strong></p>\n<pre><code>java.lang:type=MemoryPool,name=G1 Eden Space/Usage/max (Long) = -1\njava.lang:type=MemoryPool,name=G1 Survivor Space/Usage/max (Long) = -1\n</code></pre>\n<p><strong>SNMP</strong></p>\n<pre><code>.1.3.6.1.4.1.42.2.145.3.163.1.1.2.110.1.13.4 = Counter64: 0\n.1.3.6.1.4.1.42.2.145.3.163.1.1.2.110.1.13.5 = Counter64: 0\n</code></pre>\n<p>The mismatch between SNMP and MBean has been clarified in <a href=\"https://stackoverflow.com/questions/71422671/java-process-snmp-monitoring-reports-max-values-for-eden-and-survivor-space-are\">this other question</a>.</p>\n<p>The Java process is launched with the following options:</p>\n<pre><code>-Xms4096m\n-Xmx16384m\n-XX:MetaspaceSize=256m\n-XX:MaxMetaspaceSize=512m\n-XX:MinMetaspaceFreeRatio=20\n-XX:MaxMetaspaceFreeRatio=50\n-XX:+UseG1GC\n-XX:MaxNewSize=3584m\n-XX:NewSize=3584m\n-XX:SurvivorRatio=6\n</code></pre>\n<p>Is correct that configuration?</p>\n<p>Why does this happen?</p>\n<p>How can it be solved?</p>\n"},{"tags":["java","authentication","ldap","jndi"],"comments":[{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1323376940,"post_id":8294589,"comment_id":10427295,"body_markdown":"What is actually your goal? A common pattern is also implemented with SPNEGO.","body":"What is actually your goal? A common pattern is also implemented with SPNEGO."}],"answers":[{"tags":[],"owner":{"account_id":82522,"reputation":954,"user_id":231961,"accept_rate":64,"display_name":"Nageswara Rao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1323943294,"creation_date":1323943294,"answer_id":8518239,"question_id":8294589,"body_markdown":"Finally figured out that &quot;Foreign JNDI Providers&quot; is the best suite to create LDAP Connection pool and use that from your business logic","title":"LDAP Authentication using DataSource configured in Weblogic","body":"<p>Finally figured out that \"Foreign JNDI Providers\" is the best suite to create LDAP Connection pool and use that from your business logic</p>\n"}],"owner":{"account_id":82522,"reputation":954,"user_id":231961,"accept_rate":64,"display_name":"Nageswara Rao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647340309,"creation_date":1322476763,"question_id":8294589,"body_markdown":"I am aware of authenticating username/password by establishing JNDI Initialcontext with LDAP. That means authentication failed on error or success.\r\n\r\nWondering there is another means of using JNDI resource configured in Application Server and do Authenticate.\r\n\r\nPlease post me if there is any links.","title":"LDAP Authentication using DataSource configured in Weblogic","body":"<p>I am aware of authenticating username/password by establishing JNDI Initialcontext with LDAP. That means authentication failed on error or success.</p>\n\n<p>Wondering there is another means of using JNDI resource configured in Application Server and do Authenticate.</p>\n\n<p>Please post me if there is any links.</p>\n"},{"tags":["java","gradle","exception","nosuchelementexception"],"answers":[{"tags":[],"owner":{"account_id":20087205,"reputation":21,"user_id":14728506,"display_name":"The Maestro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631631920,"creation_date":1631631476,"answer_id":69180138,"question_id":69087739,"body_markdown":"I tried to copy the code to a **&quot;Java with Ant&quot;** project (instead of &quot;Java with Gradle&quot;) and it worked without problems.\r\n\r\n\r\n&gt; *File → New project → Java with Ant → Java Application*","title":"Can&#39;t run the Java project in NetBeans","body":"<p>I tried to copy the code to a <strong>&quot;Java with Ant&quot;</strong> project (instead of &quot;Java with Gradle&quot;) and it worked without problems.</p>\n<blockquote>\n<p><em>File → New project → Java with Ant → Java Application</em></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8332915,"reputation":89,"user_id":6260817,"display_name":"Fakhar uddin Malik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647340233,"creation_date":1647339873,"answer_id":71480606,"question_id":69087739,"body_markdown":"There is no problem in this code if you run it on java/ant. but if you want to run it on gradle you should see this post.\r\nhttps://stackoverflow.com/questions/36723447/java-util-scanner-throws-nosuchelementexception-when-application-is-started-with","title":"Can&#39;t run the Java project in NetBeans","body":"<p>There is no problem in this code if you run it on java/ant. but if you want to run it on gradle you should see this post.\n<a href=\"https://stackoverflow.com/questions/36723447/java-util-scanner-throws-nosuchelementexception-when-application-is-started-with\">java.util.scanner throws NoSuchElementException when application is started with gradle run</a></p>\n"}],"owner":{"account_id":20087205,"reputation":21,"user_id":14728506,"display_name":"The Maestro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1647340233,"creation_date":1631015399,"question_id":69087739,"body_markdown":"When I try to run my java project in NetBeans with a Scanner in it, it doesn&#39;t run and shows error message in the output field.\r\n&quot;FAILURE: Build failed with an exception.(Scanner). processResources NO-SOURCE&quot;.\r\n\r\nWhen I delete `names[x] = s.next();` and `grades[x] = s.nextInt();` it runs.\r\nI looked for a solution a lot but non of them have worked for me.\r\nNote that I can run the same code in Android Studio.\r\nI&#39;m a beginner in programming, anyone have an idea how to fix it??\r\n\r\n\r\nMy code:\r\n```\r\npackage codePracticing;\r\npublic class Main {\r\n    public static void main(String args[]) {\r\n        \r\n        \r\n        java.util.Scanner s = new java.util.Scanner(System.in);\r\n        \r\n        String names[] = new String[5];\r\n        int grades[] = new int[5];\r\n        \r\n        for (int x = 0; x &lt; names.length; x++){\r\n            if (x != 3){\r\n                System.out.println(&quot;Enter Name Of Student Number&quot; + String.valueOf(x + 1) + &quot;: &quot;);\r\n                names[x] = s.next();\r\n                System.out.println(&quot;Enter Grade Of Student Number&quot; + String.valueOf(x + 1) + &quot;: &quot;);\r\n                grades[x] = s.nextInt();\r\n            }\r\n        }\r\n\r\n        for (int x = 0; x &lt; names.length; x++){\r\n            if (x != 3){\r\n                System.out.println(&quot;Student Number &quot; + String.valueOf(x + 1) + &quot; &quot; + names[x] + &quot; ; Grade: &quot; + grades[x]);\r\n            }\r\n        }\r\n```\r\n\r\n\r\nThe error message in the Output tab:\r\n```\r\nJAVA_HOME=&quot;C:\\Program Files\\Java\\jdk-16.0.2&quot;\r\ncd C:\\Users\\***\\Documents\\NetBeansProjects\\codePracticing; .\\gradlew.bat --configure-on-demand -x check run\r\nConfiguration on demand is an incubating feature.\r\n&gt; Task :compileJava\r\n&gt; Task :processResources NO-SOURCE\r\n&gt; Task :classes\r\n\r\n&gt; Task :run FAILED\r\nEnter Name Of Student Number1: \r\nException in thread &quot;main&quot; java.util.NoSuchElementException\r\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:937)\r\n\tat java.base/java.util.Scanner.next(Scanner.java:1478)\r\n\tat codePracticing.Main.main(Main.java:28)\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:run&#39;.\r\n&gt; Process &#39;command &#39;C:\\Program Files\\Java\\jdk-16.0.2\\bin\\java.exe&#39;&#39; finished with non-zero exit value 1\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 381ms\r\n2 actionable tasks: 2 executed\r\n```\r\n\r\nThanks..","title":"Can&#39;t run the Java project in NetBeans","body":"<p>When I try to run my java project in NetBeans with a Scanner in it, it doesn't run and shows error message in the output field.\n&quot;FAILURE: Build failed with an exception.(Scanner). processResources NO-SOURCE&quot;.</p>\n<p>When I delete <code>names[x] = s.next();</code> and <code>grades[x] = s.nextInt();</code> it runs.\nI looked for a solution a lot but non of them have worked for me.\nNote that I can run the same code in Android Studio.\nI'm a beginner in programming, anyone have an idea how to fix it??</p>\n<p>My code:</p>\n<pre><code>package codePracticing;\npublic class Main {\n    public static void main(String args[]) {\n        \n        \n        java.util.Scanner s = new java.util.Scanner(System.in);\n        \n        String names[] = new String[5];\n        int grades[] = new int[5];\n        \n        for (int x = 0; x &lt; names.length; x++){\n            if (x != 3){\n                System.out.println(&quot;Enter Name Of Student Number&quot; + String.valueOf(x + 1) + &quot;: &quot;);\n                names[x] = s.next();\n                System.out.println(&quot;Enter Grade Of Student Number&quot; + String.valueOf(x + 1) + &quot;: &quot;);\n                grades[x] = s.nextInt();\n            }\n        }\n\n        for (int x = 0; x &lt; names.length; x++){\n            if (x != 3){\n                System.out.println(&quot;Student Number &quot; + String.valueOf(x + 1) + &quot; &quot; + names[x] + &quot; ; Grade: &quot; + grades[x]);\n            }\n        }\n</code></pre>\n<p>The error message in the Output tab:</p>\n<pre><code>JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk-16.0.2&quot;\ncd C:\\Users\\***\\Documents\\NetBeansProjects\\codePracticing; .\\gradlew.bat --configure-on-demand -x check run\nConfiguration on demand is an incubating feature.\n&gt; Task :compileJava\n&gt; Task :processResources NO-SOURCE\n&gt; Task :classes\n\n&gt; Task :run FAILED\nEnter Name Of Student Number1: \nException in thread &quot;main&quot; java.util.NoSuchElementException\n    at java.base/java.util.Scanner.throwFor(Scanner.java:937)\n    at java.base/java.util.Scanner.next(Scanner.java:1478)\n    at codePracticing.Main.main(Main.java:28)\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':run'.\n&gt; Process 'command 'C:\\Program Files\\Java\\jdk-16.0.2\\bin\\java.exe'' finished with non-zero exit value 1\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 381ms\n2 actionable tasks: 2 executed\n</code></pre>\n<p>Thanks..</p>\n"},{"tags":["java","spring-boot","testing","spring-boot-test","parameterized-tests"],"owner":{"account_id":8460659,"reputation":2301,"user_id":6346531,"display_name":"aksh1618"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":538,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1647339889,"creation_date":1647339889,"question_id":71480610,"body_markdown":"\r\n\r\nI am working on an aggregation framework using spring boot, which can be used to aggregate multiple kinds of I/O operations&#39; results. Additionally, it has support for both non-blocking (reactive) &amp; blocking aggregation layer, which is controlled by a property, which is in-turn used for conditional beans. For integration testing, I have been using this setup:\r\n\r\n```java\r\nabstract class HttpUpstreamTests {\r\n    // Setup &amp; test logic\r\n}\r\n\r\n@SpringBootTest(properties = {\r\n        &quot;aggregation.reactive.enabled=false&quot;,\r\n})\r\nclass BlockingAggregationIT extends HttpUpstreamTests {}\r\n\r\n@SpringBootTest(properties = {\r\n        &quot;aggregation.reactive.enabled=true&quot;,\r\n})\r\nclass NonBlockingAggregationIT extends HttpUpstreamTests {}\r\n```\r\n\r\nNow I have to add a couple more base classes:\r\n\r\n```java\r\nabstract class MongodbUpstreamTests {\r\n    // Setup &amp; test logic\r\n}\r\nabstract class SqlUpstreamTests {\r\n    // Setup &amp; test logic\r\n}\r\n```\r\n\r\nBut of course, I can&#39;t make the IT classes extend from multiple abstract classes. One way would be to make all the upstrteam tests parameterized tests, but I can&#39;t seem to find a way to use that approach with different values of the property in `@SpringBootTest(properties=&quot;aggregation.reactive.enabled=false&quot;)`. Is there a way to use different properties as a parameter for parameterized tests?\r\n","title":"How do I parameterize property values for spring boot test","body":"<p>I am working on an aggregation framework using spring boot, which can be used to aggregate multiple kinds of I/O operations' results. Additionally, it has support for both non-blocking (reactive) &amp; blocking aggregation layer, which is controlled by a property, which is in-turn used for conditional beans. For integration testing, I have been using this setup:</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class HttpUpstreamTests {\n    // Setup &amp; test logic\n}\n\n@SpringBootTest(properties = {\n        &quot;aggregation.reactive.enabled=false&quot;,\n})\nclass BlockingAggregationIT extends HttpUpstreamTests {}\n\n@SpringBootTest(properties = {\n        &quot;aggregation.reactive.enabled=true&quot;,\n})\nclass NonBlockingAggregationIT extends HttpUpstreamTests {}\n</code></pre>\n<p>Now I have to add a couple more base classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class MongodbUpstreamTests {\n    // Setup &amp; test logic\n}\nabstract class SqlUpstreamTests {\n    // Setup &amp; test logic\n}\n</code></pre>\n<p>But of course, I can't make the IT classes extend from multiple abstract classes. One way would be to make all the upstrteam tests parameterized tests, but I can't seem to find a way to use that approach with different values of the property in <code>@SpringBootTest(properties=&quot;aggregation.reactive.enabled=false&quot;)</code>. Is there a way to use different properties as a parameter for parameterized tests?</p>\n"},{"tags":["java","postgresql","docker"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1647327179,"post_id":71474671,"comment_id":126336740,"body_markdown":"I hope you aren&#39;t really using the superuser account `postgres` inside your application to connect to the database. That&#39;s a really bad idea.","body":"I hope you aren&#39;t really using the superuser account <code>postgres</code> inside your application to connect to the database. That&#39;s a really bad idea."},{"owner":{"account_id":19488028,"reputation":106,"user_id":14256903,"display_name":"Bartosz Raubo"},"score":0,"creation_date":1647336594,"post_id":71474671,"comment_id":126339793,"body_markdown":"Just for testing purposes - I want to make sure everything can communicate.","body":"Just for testing purposes - I want to make sure everything can communicate."}],"answers":[{"tags":[],"owner":{"account_id":497945,"reputation":968,"user_id":1360035,"display_name":"moilejter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647296187,"creation_date":1647296187,"answer_id":71474823,"question_id":71474671,"body_markdown":"You don&#39;t show how you build your Java application - but you&#39;re missing a dependency on the postgres JDBC driver.  It does not come with Java, but has to be presented to a Java application in its classpath.  Using maven, you would add this dependency: https://mvnrepository.com/artifact/org.postgresql/postgresql/42.3.3","title":"No suitable JDBC Driver when attempting to connect to Docker Postgres DB","body":"<p>You don't show how you build your Java application - but you're missing a dependency on the postgres JDBC driver.  It does not come with Java, but has to be presented to a Java application in its classpath.  Using maven, you would add this dependency: <a href=\"https://mvnrepository.com/artifact/org.postgresql/postgresql/42.3.3\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.postgresql/postgresql/42.3.3</a></p>\n"},{"tags":[],"owner":{"account_id":19488028,"reputation":106,"user_id":14256903,"display_name":"Bartosz Raubo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1647339768,"creation_date":1647339768,"answer_id":71480576,"question_id":71474671,"body_markdown":"So after a lot of trial and error, it was a problem with the docker-compose yml, specifically the environmental variable for the DB.\r\n\r\nBAD:\r\n`JDBC_DATABASE_URL=&quot;jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres&quot;`\r\n\r\nThis gives DriverManager the url wrapped in quotes. You do not want this.\r\n\r\nGOOD:\r\n`JDBC_DATABASE_URL=jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres`\r\n\r\nLack of quotation marks in docker-compose.yml leads to a happy DriverManager.","title":"No suitable JDBC Driver when attempting to connect to Docker Postgres DB","body":"<p>So after a lot of trial and error, it was a problem with the docker-compose yml, specifically the environmental variable for the DB.</p>\n<p>BAD:\n<code>JDBC_DATABASE_URL=&quot;jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres&quot;</code></p>\n<p>This gives DriverManager the url wrapped in quotes. You do not want this.</p>\n<p>GOOD:\n<code>JDBC_DATABASE_URL=jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres</code></p>\n<p>Lack of quotation marks in docker-compose.yml leads to a happy DriverManager.</p>\n"}],"owner":{"account_id":19488028,"reputation":106,"user_id":14256903,"display_name":"Bartosz Raubo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1313,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1647339768,"creation_date":1647294894,"question_id":71474671,"body_markdown":"I am working on a to-do list using a Java server and Postgres DB - specifically trying to set up a local dev environment using Docker Compose. The server has previously been deployed to Heroku and the database connection works without trouble. I am getting a `suitable driver not found error` when attempting to establish a connection between the server and DB in Docker. \r\n\r\nThe Java DB connection code:\r\n\r\n```\r\n    public void connectToDatabase() {\r\n        try {\r\n            String url = System.getenv(&quot;JDBC_DATABASE_URL&quot;);\r\n            conn = DriverManager.getConnection(url);\r\n            System.out.println(&quot;Database Connection Successful&quot;);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nThe Java Server Dockerfile:\r\n\r\n```\r\nFROM gradle:7.4-jdk17-alpine\r\nADD --chown=gradle . /code\r\nWORKDIR /code\r\nEXPOSE 5000\r\nCMD [&quot;gradle&quot;, &quot;--stacktrace&quot;, &quot;run&quot;]\r\n```\r\n\r\nThe image builds without problems. However, when starting with `docker compose up`, I get the following error: `java.sql.SQLException: No suitable driver found for &quot;jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres&quot;`\r\n\r\nThe server still runs, just without the DB connection - I can access other endpoints/features.  \r\n\r\nDocker Compose:\r\n```\r\nversion: &quot;3.9&quot;\r\nservices:\r\n  java-service:\r\n    build: \r\n      context: ./EchoServer/\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - &quot;5000:5000&quot;\r\n    environment:\r\n      - PORT=5000\r\n      - JDBC_DATABASE_URL=&quot;jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres&quot;\r\n  tasks-db:\r\n    image: postgres\r\n    restart: always\r\n    ports:\r\n      - &quot;1235:5432&quot;\r\n    environment:\r\n      - POSTGRES_USER=postgres\r\n      - POSTGRES_PASSWORD=postgres\r\n    volumes: \r\n      - tasks-db:/var/lib/postgresql/data\r\nvolumes:\r\n  tasks-db:\r\n    driver: local\r\n  logvolume01: {}\r\n```\r\n\r\nGrateful for any help, have been blocked on this most of the evening.\r\n\r\nEDIT: build.gradle dependencies:\r\n\r\n```\r\ndependencies {\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.7.0&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.7.0&#39;\r\n    implementation &#39;org.json:json:20210307&#39;\r\n    implementation &#39;org.postgresql:postgresql:42.3.1&#39;\r\n}\r\n```","title":"No suitable JDBC Driver when attempting to connect to Docker Postgres DB","body":"<p>I am working on a to-do list using a Java server and Postgres DB - specifically trying to set up a local dev environment using Docker Compose. The server has previously been deployed to Heroku and the database connection works without trouble. I am getting a <code>suitable driver not found error</code> when attempting to establish a connection between the server and DB in Docker.</p>\n<p>The Java DB connection code:</p>\n<pre><code>    public void connectToDatabase() {\n        try {\n            String url = System.getenv(&quot;JDBC_DATABASE_URL&quot;);\n            conn = DriverManager.getConnection(url);\n            System.out.println(&quot;Database Connection Successful&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>The Java Server Dockerfile:</p>\n<pre><code>FROM gradle:7.4-jdk17-alpine\nADD --chown=gradle . /code\nWORKDIR /code\nEXPOSE 5000\nCMD [&quot;gradle&quot;, &quot;--stacktrace&quot;, &quot;run&quot;]\n</code></pre>\n<p>The image builds without problems. However, when starting with <code>docker compose up</code>, I get the following error: <code>java.sql.SQLException: No suitable driver found for &quot;jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres&quot;</code></p>\n<p>The server still runs, just without the DB connection - I can access other endpoints/features.</p>\n<p>Docker Compose:</p>\n<pre><code>version: &quot;3.9&quot;\nservices:\n  java-service:\n    build: \n      context: ./EchoServer/\n      dockerfile: Dockerfile\n    ports:\n      - &quot;5000:5000&quot;\n    environment:\n      - PORT=5000\n      - JDBC_DATABASE_URL=&quot;jdbc:postgresql://tasks-db:5432/test-tasks-db?user=postgres&amp;password=postgres&quot;\n  tasks-db:\n    image: postgres\n    restart: always\n    ports:\n      - &quot;1235:5432&quot;\n    environment:\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=postgres\n    volumes: \n      - tasks-db:/var/lib/postgresql/data\nvolumes:\n  tasks-db:\n    driver: local\n  logvolume01: {}\n</code></pre>\n<p>Grateful for any help, have been blocked on this most of the evening.</p>\n<p>EDIT: build.gradle dependencies:</p>\n<pre><code>dependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'\n    implementation 'org.json:json:20210307'\n    implementation 'org.postgresql:postgresql:42.3.1'\n}\n</code></pre>\n"},{"tags":["java","json","api","gson"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1647177049,"post_id":71456816,"comment_id":126300552,"body_markdown":"Share your `Weather` class definition. Sounds like field name does not match property name in json.","body":"Share your <code>Weather</code> class definition. Sounds like field name does not match property name in json."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1647181519,"post_id":71456816,"comment_id":126301480,"body_markdown":"However you are doing the mapping is not coping with `_` in names.","body":"However you are doing the mapping is not coping with <code>_</code> in names."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1647181571,"post_id":71456816,"comment_id":126301494,"body_markdown":"See https://stackoverflow.com/questions/2370745/convert-json-style-properties-names-to-java-camelcase-names-with-gson","body":"See <a href=\"https://stackoverflow.com/questions/2370745/convert-json-style-properties-names-to-java-camelcase-names-with-gson\" title=\"convert json style properties names to java camelcase names with gson\">stackoverflow.com/questions/2370745/&hellip;</a>"},{"owner":{"account_id":19825775,"reputation":11,"user_id":14521375,"display_name":"Marisabel"},"score":0,"creation_date":1647202380,"post_id":71456816,"comment_id":126306381,"body_markdown":"Thank you so much ! I didn&#39;t know there could be an issue with those names. I&#39;ll see if I can fix that, at least I have something to work with now instead of feeling stuck.","body":"Thank you so much ! I didn&#39;t know there could be an issue with those names. I&#39;ll see if I can fix that, at least I have something to work with now instead of feeling stuck."}],"answers":[{"tags":[],"owner":{"account_id":19825775,"reputation":11,"user_id":14521375,"display_name":"Marisabel"},"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1647338750,"creation_date":1647245857,"answer_id":71464714,"question_id":71456816,"body_markdown":"&gt; *Edited for clarity:*\r\n\r\ntgdavies answer worked!\r\n\r\nWhen I generated the POJO, I did not realized there was an option to select GSON. Which returns the properties with the @SerializedName annotation.\r\n\r\n@JsonProperty does not work with camel cases on GSON as per [documentation][1]. \r\n\r\nMy properties after:\r\n\r\n```java\r\n@Generated(&quot;jsonschema2pojo&quot;)\r\npublic class Current {\r\n\r\n    @SerializedName(&quot;temp_c&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double tempC;\r\n    @SerializedName(&quot;temp_f&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double tempF;\r\n    @JsonProperty(&quot;condition&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Condition condition;\r\n    @SerializedName(&quot;feelslike_c&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double feelslikeC;\r\n    @SerializedName(&quot;feelslike_f&quot;)\r\n    @Setter\r\n    @Getter\r\n    @Expose\r\n    private Double feelslikeF;\r\n    @JsonProperty(&quot;uv&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double uv;\r\n```\r\n \r\nNow it works. \r\nI just did not know camel cases could be sometimes a problem. Now I do.\r\nThank you!\r\n\r\n  [1]: https://github.com/google/gson/blob/master/UserGuide.md#TOC-JSON-Field-Naming-Support","title":"Json values are null while some not with GSON parsing","body":"<blockquote>\n<p><em>Edited for clarity:</em></p>\n</blockquote>\n<p>tgdavies answer worked!</p>\n<p>When I generated the POJO, I did not realized there was an option to select GSON. Which returns the properties with the @SerializedName annotation.</p>\n<p>@JsonProperty does not work with camel cases on GSON as per <a href=\"https://github.com/google/gson/blob/master/UserGuide.md#TOC-JSON-Field-Naming-Support\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>My properties after:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Generated(&quot;jsonschema2pojo&quot;)\npublic class Current {\n\n    @SerializedName(&quot;temp_c&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double tempC;\n    @SerializedName(&quot;temp_f&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double tempF;\n    @JsonProperty(&quot;condition&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Condition condition;\n    @SerializedName(&quot;feelslike_c&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double feelslikeC;\n    @SerializedName(&quot;feelslike_f&quot;)\n    @Setter\n    @Getter\n    @Expose\n    private Double feelslikeF;\n    @JsonProperty(&quot;uv&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double uv;\n</code></pre>\n<p>Now it works.\nI just did not know camel cases could be sometimes a problem. Now I do.\nThank you!</p>\n"}],"owner":{"account_id":19825775,"reputation":11,"user_id":14521375,"display_name":"Marisabel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":71464714,"answer_count":1,"score":-2,"last_activity_date":1647338837,"creation_date":1647175040,"question_id":71456816,"body_markdown":"&gt; *This was my first question here :) Edited after feedback.*\r\n\r\n**Objective:** extract the temperature from the weather API\r\n\r\n**Problem:**  Temperatures and other properties are returning null when parsing with GSON even when others do not.\r\n\r\nI generated the POJO classes using [jsonschema2pojo][1] and the weird thing is that I can get some values out of it with GSON, but not others.\r\n\r\nThis is the json response:\r\n```json\r\n{\r\n  &quot;location&quot;: {\r\n    &quot;name&quot;: &quot;Ommoord&quot;,\r\n    &quot;region&quot;: &quot;South Holland&quot;,\r\n    &quot;country&quot;: &quot;Netherlands&quot;,\r\n    &quot;lat&quot;: XXX ,\r\n    &quot;lon&quot;: XXX ,\r\n    &quot;tz_id&quot;: &quot;Europe/Amsterdam&quot;,\r\n    &quot;localtime_epoch&quot;: 1647173864,\r\n    &quot;localtime&quot;: &quot;2022-03-13 13:17&quot;\r\n  },\r\n  &quot;current&quot;: {\r\n    &quot;temp_c&quot;: 14.0,\r\n    &quot;temp_f&quot;: 57.2,\r\n    &quot;condition&quot;: {\r\n      &quot;text&quot;: &quot;Sunny&quot;\r\n    },\r\n    &quot;feelslike_c&quot;: 12.3,\r\n    &quot;feelslike_f&quot;: 54.1,\r\n    &quot;uv&quot;: 4.0\r\n  }\r\n}\r\n```\r\n\r\nAnd the class for the Current object:\r\n\r\n```java\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\n@JsonPropertyOrder({\r\n        &quot;temp_c&quot;,\r\n        &quot;temp_f&quot;,\r\n        &quot;condition&quot;,\r\n        &quot;feelslike_c&quot;,\r\n        &quot;feelslike_f&quot;,\r\n        &quot;uv&quot;\r\n})\r\n@Generated(&quot;jsonschema2pojo&quot;)\r\npublic class Current {\r\n\r\n    @JsonProperty(&quot;temp_c&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double tempC;\r\n    @JsonProperty(&quot;temp_f&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double tempF;\r\n    @JsonProperty(&quot;condition&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Condition condition;\r\n    @JsonProperty(&quot;feelslike_c&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double feelslikeC;\r\n    @JsonProperty(&quot;feelslike_f&quot;)\r\n    @Setter\r\n    @Getter\r\n    @Expose\r\n    private Double feelslikeF;\r\n    @JsonProperty(&quot;uv&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Expose\r\n    private Double uv;\r\n\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(Current.class.getName()).append(&#39;@&#39;).append(Integer.toHexString(System.identityHashCode(this))).append(&#39;[&#39;);\r\n        sb.append(&quot;tempC&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.tempC == null)?&quot;&lt;null&gt;&quot;:this.tempC));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;tempF&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.tempF == null)?&quot;&lt;null&gt;&quot;:this.tempF));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;condition&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.condition == null)?&quot;&lt;null&gt;&quot;:this.condition));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;feelslikeC&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.feelslikeC == null)?&quot;&lt;null&gt;&quot;:this.feelslikeC));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;feelslikeF&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.feelslikeF == null)?&quot;&lt;null&gt;&quot;:this.feelslikeF));\r\n        sb.append(&#39;,&#39;);\r\n        sb.append(&quot;uv&quot;);\r\n        sb.append(&#39;=&#39;);\r\n        sb.append(((this.uv == null)?&quot;&lt;null&gt;&quot;:this.uv));\r\n        sb.append(&#39;,&#39;);\r\n        if (sb.charAt((sb.length()- 1)) == &#39;,&#39;) {\r\n            sb.setCharAt((sb.length()- 1), &#39;]&#39;);\r\n        } else {\r\n            sb.append(&#39;]&#39;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nWhen I call them via GSON, I can get almost everything, except temperatures and localtimeEpoch. Even **uv** is reachable. But for some reason not the temperatures. I tried them as Double, Float and String, none work.\r\n\r\n```\r\n[\r\nlocation=mypackage.utils.weather.Location@7d8995e\r\n[\r\nname=Ommoord,\r\nregion=South Holland,\r\ncountry=Netherlands,\r\nlat=xx.xx,lon=xx.xx,\r\ntzId=&lt;null&gt;,\r\nlocaltimeEpoch=&lt;null&gt;,\r\nlocaltime=2022-03-13 13:17,\r\nadditionalProperties={}]\r\n,current=mypackage.utils.weather.Current@130d63be\r\n[\r\ntempC=&lt;null&gt;,\r\ntempF=&lt;null&gt;,\r\ncondition=mypackage.utils.weather.Condition@42a48628\r\n[\r\ntext=Sunny,\r\nadditionalProperties={}\r\n],\r\nfeelslikeC=&lt;null&gt;,\r\nfeelslikeF=&lt;null&gt;,\r\nuv=4.0\r\n]\r\n,additionalProperties={}\r\n]\r\n```\r\n\r\nJava code:\r\n\r\n```java\r\nGson gson= new Gson();\r\nWeather weatherService = gson.fromJson(json, Weather.class);\r\nSystem.out.println(weatherService.getCurrent().getTempC());\r\nSystem.out.println(weatherService.getCurrent().getCondition().getText());\r\nSystem.out.println(weatherService.getLocation().getCountry());\r\n```\r\nNote: The json string is generated via the API.\r\n\r\nOutput is:\r\n\r\n```\r\nnull\r\nSunny\r\nNetherlands\r\n\r\n```\r\n\r\n\r\n  [1]: https://www.jsonschema2pojo.org/","title":"Json values are null while some not with GSON parsing","body":"<blockquote>\n<p><em>This was my first question here :) Edited after feedback.</em></p>\n</blockquote>\n<p><strong>Objective:</strong> extract the temperature from the weather API</p>\n<p><strong>Problem:</strong>  Temperatures and other properties are returning null when parsing with GSON even when others do not.</p>\n<p>I generated the POJO classes using <a href=\"https://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">jsonschema2pojo</a> and the weird thing is that I can get some values out of it with GSON, but not others.</p>\n<p>This is the json response:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;location&quot;: {\n    &quot;name&quot;: &quot;Ommoord&quot;,\n    &quot;region&quot;: &quot;South Holland&quot;,\n    &quot;country&quot;: &quot;Netherlands&quot;,\n    &quot;lat&quot;: XXX ,\n    &quot;lon&quot;: XXX ,\n    &quot;tz_id&quot;: &quot;Europe/Amsterdam&quot;,\n    &quot;localtime_epoch&quot;: 1647173864,\n    &quot;localtime&quot;: &quot;2022-03-13 13:17&quot;\n  },\n  &quot;current&quot;: {\n    &quot;temp_c&quot;: 14.0,\n    &quot;temp_f&quot;: 57.2,\n    &quot;condition&quot;: {\n      &quot;text&quot;: &quot;Sunny&quot;\n    },\n    &quot;feelslike_c&quot;: 12.3,\n    &quot;feelslike_f&quot;: 54.1,\n    &quot;uv&quot;: 4.0\n  }\n}\n</code></pre>\n<p>And the class for the Current object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonPropertyOrder({\n        &quot;temp_c&quot;,\n        &quot;temp_f&quot;,\n        &quot;condition&quot;,\n        &quot;feelslike_c&quot;,\n        &quot;feelslike_f&quot;,\n        &quot;uv&quot;\n})\n@Generated(&quot;jsonschema2pojo&quot;)\npublic class Current {\n\n    @JsonProperty(&quot;temp_c&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double tempC;\n    @JsonProperty(&quot;temp_f&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double tempF;\n    @JsonProperty(&quot;condition&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Condition condition;\n    @JsonProperty(&quot;feelslike_c&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double feelslikeC;\n    @JsonProperty(&quot;feelslike_f&quot;)\n    @Setter\n    @Getter\n    @Expose\n    private Double feelslikeF;\n    @JsonProperty(&quot;uv&quot;)\n    @Getter\n    @Setter\n    @Expose\n    private Double uv;\n\n\n    @Override\n    public String toString() {\n        StringBuilder sb = new StringBuilder();\n        sb.append(Current.class.getName()).append('@').append(Integer.toHexString(System.identityHashCode(this))).append('[');\n        sb.append(&quot;tempC&quot;);\n        sb.append('=');\n        sb.append(((this.tempC == null)?&quot;&lt;null&gt;&quot;:this.tempC));\n        sb.append(',');\n        sb.append(&quot;tempF&quot;);\n        sb.append('=');\n        sb.append(((this.tempF == null)?&quot;&lt;null&gt;&quot;:this.tempF));\n        sb.append(',');\n        sb.append(&quot;condition&quot;);\n        sb.append('=');\n        sb.append(((this.condition == null)?&quot;&lt;null&gt;&quot;:this.condition));\n        sb.append(',');\n        sb.append(&quot;feelslikeC&quot;);\n        sb.append('=');\n        sb.append(((this.feelslikeC == null)?&quot;&lt;null&gt;&quot;:this.feelslikeC));\n        sb.append(',');\n        sb.append(&quot;feelslikeF&quot;);\n        sb.append('=');\n        sb.append(((this.feelslikeF == null)?&quot;&lt;null&gt;&quot;:this.feelslikeF));\n        sb.append(',');\n        sb.append(&quot;uv&quot;);\n        sb.append('=');\n        sb.append(((this.uv == null)?&quot;&lt;null&gt;&quot;:this.uv));\n        sb.append(',');\n        if (sb.charAt((sb.length()- 1)) == ',') {\n            sb.setCharAt((sb.length()- 1), ']');\n        } else {\n            sb.append(']');\n        }\n        return sb.toString();\n    }\n\n}\n\n</code></pre>\n<p>When I call them via GSON, I can get almost everything, except temperatures and localtimeEpoch. Even <strong>uv</strong> is reachable. But for some reason not the temperatures. I tried them as Double, Float and String, none work.</p>\n<pre><code>[\nlocation=mypackage.utils.weather.Location@7d8995e\n[\nname=Ommoord,\nregion=South Holland,\ncountry=Netherlands,\nlat=xx.xx,lon=xx.xx,\ntzId=&lt;null&gt;,\nlocaltimeEpoch=&lt;null&gt;,\nlocaltime=2022-03-13 13:17,\nadditionalProperties={}]\n,current=mypackage.utils.weather.Current@130d63be\n[\ntempC=&lt;null&gt;,\ntempF=&lt;null&gt;,\ncondition=mypackage.utils.weather.Condition@42a48628\n[\ntext=Sunny,\nadditionalProperties={}\n],\nfeelslikeC=&lt;null&gt;,\nfeelslikeF=&lt;null&gt;,\nuv=4.0\n]\n,additionalProperties={}\n]\n</code></pre>\n<p>Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gson gson= new Gson();\nWeather weatherService = gson.fromJson(json, Weather.class);\nSystem.out.println(weatherService.getCurrent().getTempC());\nSystem.out.println(weatherService.getCurrent().getCondition().getText());\nSystem.out.println(weatherService.getLocation().getCountry());\n</code></pre>\n<p>Note: The json string is generated via the API.</p>\n<p>Output is:</p>\n<pre><code>null\nSunny\nNetherlands\n\n</code></pre>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1647285518,"post_id":71467204,"comment_id":126328640,"body_markdown":"Are you referring to [this connector](https://dev.mysql.com/downloads/connector/j/)? By the way, how is your question related to _Swing_?","body":"Are you referring to <a href=\"https://dev.mysql.com/downloads/connector/j/\" rel=\"nofollow noreferrer\">this connector</a>? By the way, how is your question related to <i>Swing</i>?"},{"owner":{"account_id":22381700,"reputation":1,"user_id":16595187,"display_name":"ADITI RAO"},"score":0,"creation_date":1647321731,"post_id":71467204,"comment_id":126335763,"body_markdown":"Yes. I am making a desktop application in java with mysql as database interface.","body":"Yes. I am making a desktop application in java with mysql as database interface."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1647338313,"post_id":71467204,"comment_id":126340383,"body_markdown":"You have a typo in your URL, it should be `jdbc:mysql://...`, so **one** colon after `jdbc`, not two.","body":"You have a typo in your URL, it should be <code>jdbc:mysql:&#47;&#47;...</code>, so <b>one</b> colon after <code>jdbc</code>, not two."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1647339337,"post_id":71467204,"comment_id":126340746,"body_markdown":"All JDBC database drivers are dynamically discovered via the Java SPI (Service Provider Interface). Via the URL part `jdbc:mysql:`. So if the URL is wrong it will not find the driver. You can see the working in the driver jar, a zip with path: META-INF/services/...","body":"All JDBC database drivers are dynamically discovered via the Java SPI (Service Provider Interface). Via the URL part <code>jdbc:mysql:</code>. So if the URL is wrong it will not find the driver. You can see the working in the driver jar, a zip with path: META-INF/services/..."}],"owner":{"account_id":22381700,"reputation":1,"user_id":16595187,"display_name":"ADITI RAO"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":274,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647338371,"creation_date":1647258242,"question_id":71467204,"body_markdown":"&gt; java.sql.SQLException: No suitable driver found for\r\n&gt; jdbc::mysql://localhost:3306/exp_man\r\n\r\nIt shows this error in my Java with Maven application project even after I have added and installed the MySQL connector jar file in the dependency tab. When I deleted the dependency it shows `java.lang.ClassNotFoundException com.mysql.cj.jdbc.Driver`\r\nI tried reinstalling NetBeans, still it shows the same error.\r\n\r\nWhat do I do?","title":"No suitable driver found error in Java/Maven project","body":"<blockquote>\n<p>java.sql.SQLException: No suitable driver found for\njdbc::mysql://localhost:3306/exp_man</p>\n</blockquote>\n<p>It shows this error in my Java with Maven application project even after I have added and installed the MySQL connector jar file in the dependency tab. When I deleted the dependency it shows <code>java.lang.ClassNotFoundException com.mysql.cj.jdbc.Driver</code>\nI tried reinstalling NetBeans, still it shows the same error.</p>\n<p>What do I do?</p>\n"},{"tags":["java","proguard","protobuf-java"],"answers":[{"tags":[],"owner":{"account_id":1107950,"reputation":238,"user_id":1098953,"display_name":"premek.v"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1647338148,"creation_date":1647338148,"answer_id":71480182,"question_id":71480181,"body_markdown":"In my case the problem was that another dependency already had a transitive dependency on `protobuf-javalite` and it conflicted with the `protobuf-java` I was adding.\r\n\r\nAs per https://github.com/protocolbuffers/protobuf/issues/8104#issuecomment-887076083:\r\n\r\n&gt; protobuf-java and protobuf-javalite should\r\n&gt; never be included in the same project [...]  if you&#39;re using Gradle, we\r\n&gt; recommend an approach like this:\r\n&gt; https://docs.gradle.org/current/userguide/dependency_downgrade_and_exclude.html#sec:excluding-transitive-deps\r\n&gt; \r\n&gt; Telling the system to exclude protobuf-javalite because you explicitly\r\n&gt; depend on protobuf-java is technically OK, but this might have\r\n&gt; negative side effects to performance or code size on mobile platforms,\r\n&gt; it also might be totally fine for you, your mileage may vary.\r\n&gt;\r\n\r\nThe problem was solved for me after excluding `protobuf-javalite` like this\r\n\r\n```\r\nconfigurations {\r\n    all*.exclude group: &#39;com.google.protobuf&#39;, module: &#39;protobuf-javalite&#39;\r\n}\r\n```","title":"How to use protobuf with proguard","body":"<p>In my case the problem was that another dependency already had a transitive dependency on <code>protobuf-javalite</code> and it conflicted with the <code>protobuf-java</code> I was adding.</p>\n<p>As per <a href=\"https://github.com/protocolbuffers/protobuf/issues/8104#issuecomment-887076083\" rel=\"nofollow noreferrer\">https://github.com/protocolbuffers/protobuf/issues/8104#issuecomment-887076083</a>:</p>\n<blockquote>\n<p>protobuf-java and protobuf-javalite should\nnever be included in the same project [...]  if you're using Gradle, we\nrecommend an approach like this:\n<a href=\"https://docs.gradle.org/current/userguide/dependency_downgrade_and_exclude.html#sec:excluding-transitive-deps\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/dependency_downgrade_and_exclude.html#sec:excluding-transitive-deps</a></p>\n<p>Telling the system to exclude protobuf-javalite because you explicitly\ndepend on protobuf-java is technically OK, but this might have\nnegative side effects to performance or code size on mobile platforms,\nit also might be totally fine for you, your mileage may vary.</p>\n</blockquote>\n<p>The problem was solved for me after excluding <code>protobuf-javalite</code> like this</p>\n<pre><code>configurations {\n    all*.exclude group: 'com.google.protobuf', module: 'protobuf-javalite'\n}\n</code></pre>\n"}],"owner":{"account_id":1107950,"reputation":238,"user_id":1098953,"display_name":"premek.v"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":888,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71480182,"answer_count":1,"score":0,"last_activity_date":1647338148,"creation_date":1647338148,"question_id":71480181,"body_markdown":"After adding **protobuf** dependency to a project that is using **proguard** for releases I run into the following issues:\r\n\r\n``` lang-none\r\nWarning: ***.***.Api: can&#39;t find referenced method &#39;com.google.protobuf.Descriptors$FileDescriptor getDescriptor()&#39; in library class com.google.protobuf.AnyProto\r\nWarning: ***.***.Api$Information: can&#39;t find referenced method &#39;com.google.protobuf.Any$Builder toBuilder()&#39; in library class com.google.protobuf.Any\r\nWarning: ***.***.Api$Information: can&#39;t find referenced method &#39;com.google.protobuf.Any$Builder mergeFrom(com.google.protobuf.Any)&#39; in library class com.google.protobuf.Any$Builder\r\nWarning: ***.***.Api$Information: can&#39;t find referenced method &#39;com.google.protobuf.Any buildPartial()&#39; in library class com.google.protobuf.Any$Builder\r\nWarning: ***.***.Api$Information$Builder: can&#39;t find referenced method &#39;com.google.protobuf.Any build()&#39; in library class com.google.protobuf.Any$Builder\r\nWarning: ***.***.Api$Information$Builder: can&#39;t find referenced method &#39;com.google.protobuf.Any$Builder mergeFrom(com.google.protobuf.Any)&#39; in library class com.google.protobuf.Any$Builder\r\nWarning: ***.***.Api$Information$Builder: can&#39;t find referenced method &#39;com.google.protobuf.Any buildPartial()&#39; in library class com.google.protobuf.Any$Builder\r\nWarning: ***.***Service: can&#39;t find referenced method &#39;com.google.protobuf.Any pack(com.google.protobuf.Message)&#39; in library class com.google.protobuf.Any\r\n```","title":"How to use protobuf with proguard","body":"<p>After adding <strong>protobuf</strong> dependency to a project that is using <strong>proguard</strong> for releases I run into the following issues:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Warning: ***.***.Api: can't find referenced method 'com.google.protobuf.Descriptors$FileDescriptor getDescriptor()' in library class com.google.protobuf.AnyProto\nWarning: ***.***.Api$Information: can't find referenced method 'com.google.protobuf.Any$Builder toBuilder()' in library class com.google.protobuf.Any\nWarning: ***.***.Api$Information: can't find referenced method 'com.google.protobuf.Any$Builder mergeFrom(com.google.protobuf.Any)' in library class com.google.protobuf.Any$Builder\nWarning: ***.***.Api$Information: can't find referenced method 'com.google.protobuf.Any buildPartial()' in library class com.google.protobuf.Any$Builder\nWarning: ***.***.Api$Information$Builder: can't find referenced method 'com.google.protobuf.Any build()' in library class com.google.protobuf.Any$Builder\nWarning: ***.***.Api$Information$Builder: can't find referenced method 'com.google.protobuf.Any$Builder mergeFrom(com.google.protobuf.Any)' in library class com.google.protobuf.Any$Builder\nWarning: ***.***.Api$Information$Builder: can't find referenced method 'com.google.protobuf.Any buildPartial()' in library class com.google.protobuf.Any$Builder\nWarning: ***.***Service: can't find referenced method 'com.google.protobuf.Any pack(com.google.protobuf.Message)' in library class com.google.protobuf.Any\n</code></pre>\n"},{"tags":["java","spring","multithreading","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":17269544,"reputation":799,"user_id":12505572,"display_name":"Sarjit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578050835,"creation_date":1578050835,"answer_id":59577801,"question_id":59577125,"body_markdown":"Please try to explore ExecutorService invokeAll() method which will execute all callable task defined and return Future object\r\n\r\ntry this reference code :\r\n\r\n    ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n    \r\n    Set&lt;Callable&lt;String&gt;&gt; callables = new HashSet&lt;Callable&lt;String&gt;&gt;();\r\n    \r\n    callables.add(new Callable&lt;String&gt;() {\r\n        public String call() throws Exception {\r\n            return &quot;Job1&quot;;\r\n        }\r\n    });\r\n    callables.add(new Callable&lt;String&gt;() {\r\n        public String call() throws Exception {\r\n            return &quot;Job 2&quot;;\r\n        }\r\n    });\r\n    callables.add(new Callable&lt;String&gt;() {\r\n        public String call() throws Exception {\r\n            return &quot;job 3&quot;;\r\n        }\r\n    });\r\n    \r\n    List&lt;Future&lt;String&gt;&gt; futures = executorService.invokeAll(callables);\r\n    \r\n    for(Future&lt;String&gt; future : futures){\r\n        System.out.println(&quot;future.get = &quot; + future.get());\r\n    }\r\n    \r\n    executorService.shutdown();\r\n\r\nhope it will help you","title":"How to keep main thread in waiting state after spawn multiple async jobs in spring batch","body":"<p>Please try to explore ExecutorService invokeAll() method which will execute all callable task defined and return Future object</p>\n\n<p>try this reference code :</p>\n\n<pre><code>ExecutorService executorService = Executors.newSingleThreadExecutor();\n\nSet&lt;Callable&lt;String&gt;&gt; callables = new HashSet&lt;Callable&lt;String&gt;&gt;();\n\ncallables.add(new Callable&lt;String&gt;() {\n    public String call() throws Exception {\n        return \"Job1\";\n    }\n});\ncallables.add(new Callable&lt;String&gt;() {\n    public String call() throws Exception {\n        return \"Job 2\";\n    }\n});\ncallables.add(new Callable&lt;String&gt;() {\n    public String call() throws Exception {\n        return \"job 3\";\n    }\n});\n\nList&lt;Future&lt;String&gt;&gt; futures = executorService.invokeAll(callables);\n\nfor(Future&lt;String&gt; future : futures){\n    System.out.println(\"future.get = \" + future.get());\n}\n\nexecutorService.shutdown();\n</code></pre>\n\n<p>hope it will help you</p>\n"},{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578064245,"creation_date":1578064245,"answer_id":59580943,"question_id":59577125,"body_markdown":"Using a `ThreadPoolTaskExecutor` is the way to go. This task executor implementation provides a boolean parameter called `WaitForTasksToCompleteOnShutdown` which you need to set in order to wait for jobs to finish. So what you can do is the following:\r\n\r\nSet the `WaitForTasksToCompleteOnShutdown ` on the task executor:\r\n\r\n    @Bean\r\n    public TaskExecutor taskExecutor() {\r\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n        taskExecutor.setMaxPoolSize(maxThreadCount);\r\n        taskExecutor.setWaitForTasksToCompleteOnShutdown(true);\r\n        taskExecutor.afterPropertiesSet();\r\n        return taskExecutor;\r\n    }\r\n\r\nCall `shutdown` on the task executor to wait for jobs to finish:\r\n\r\n    Class JobHandler {\r\n        @Autowired\r\n        private JobLauncher jobLauncher;\r\n        @Autowired\r\n        private ThreadPoolTaskExecutor taskExecutor;\r\n\r\n        // Main thread executing demo method\r\n\r\n        public void demo () {\r\n           launchJob(job1, builder1);\r\n           launchJob(job2, builder2);\r\n           launchJob(job3, builder3);\r\n           launchJob(job4, builder4);\r\n           launchJob(job5, builder5);\r\n           launchJob(job6, builder6);\r\n\r\n           // Here I want to do operation when all six jobs complete successfully\r\n           // Please suggest how to do.\r\n           taskExecutor.shutdown();\r\n        } \r\n\r\n    }\r\n\r\nHere is a complete example:\r\n\r\n    import org.springframework.batch.core.Job;\r\n    import org.springframework.batch.core.JobParameters;\r\n    import org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\r\n    import org.springframework.batch.core.configuration.annotation.JobBuilderFactory;\r\n    import org.springframework.batch.core.configuration.annotation.StepBuilderFactory;\r\n    import org.springframework.batch.core.launch.JobLauncher;\r\n    import org.springframework.batch.core.launch.support.SimpleJobLauncher;\r\n    import org.springframework.batch.core.repository.JobRepository;\r\n    import org.springframework.batch.repeat.RepeatStatus;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\r\n    \r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    public class JobsConfig {\r\n    \r\n    \tprivate final JobBuilderFactory jobs;\r\n    \r\n    \tprivate final StepBuilderFactory steps;\r\n    \r\n    \tpublic JobsConfig(JobBuilderFactory jobs, StepBuilderFactory steps) {\r\n    \t\tthis.jobs = jobs;\r\n    \t\tthis.steps = steps;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Job job1() {\r\n    \t\treturn jobs.get(&quot;job1&quot;)\r\n    \t\t\t\t.start(steps.get(&quot;step11&quot;)\r\n    \t\t\t\t\t\t.tasklet((contribution, chunkContext) -&gt; {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;job1&quot;);\r\n    \t\t\t\t\t\t\tThread.sleep(1000);\r\n    \t\t\t\t\t\t\treturn RepeatStatus.FINISHED;\r\n    \t\t\t\t\t\t})\r\n    \t\t\t\t\t\t.build())\r\n    \t\t\t\t.build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Job job2() {\r\n    \t\treturn jobs.get(&quot;job2&quot;)\r\n    \t\t\t\t.start(steps.get(&quot;step21&quot;)\r\n    \t\t\t\t\t\t.tasklet((contribution, chunkContext) -&gt; {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;job2&quot;);\r\n    \t\t\t\t\t\t\tThread.sleep(2000);\r\n    \t\t\t\t\t\t\treturn RepeatStatus.FINISHED;\r\n    \t\t\t\t\t\t})\r\n    \t\t\t\t\t\t.build())\r\n    \t\t\t\t.build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic ThreadPoolTaskExecutor taskExecutor() {\r\n    \t\tThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n    \t\ttaskExecutor.setMaxPoolSize(10);\r\n    \t\ttaskExecutor.setWaitForTasksToCompleteOnShutdown(true);\r\n    \t\ttaskExecutor.afterPropertiesSet();\r\n    \t\treturn taskExecutor;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic JobLauncher jobLauncher(JobRepository jobRepository, ThreadPoolTaskExecutor taskExecutor) throws Exception {\r\n    \t\tSimpleJobLauncher jobLauncher = new SimpleJobLauncher();\r\n    \t\tjobLauncher.setJobRepository(jobRepository);\r\n    \t\tjobLauncher.setTaskExecutor(taskExecutor);\r\n    \t\tjobLauncher.afterPropertiesSet();\r\n    \t\treturn jobLauncher;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tApplicationContext context = new AnnotationConfigApplicationContext(JobsConfig.class);\r\n    \t\tThreadPoolTaskExecutor taskExecutor = context.getBean(ThreadPoolTaskExecutor.class);\r\n    \t\tJobLauncher jobLauncher = context.getBean(JobLauncher.class);\r\n    \t\tJob job1 = (Job) context.getBean(&quot;job1&quot;);\r\n    \t\tJob job2 = (Job) context.getBean(&quot;job2&quot;);\r\n    \t\tjobLauncher.run(job1, new JobParameters());\r\n    \t\tjobLauncher.run(job2, new JobParameters());\r\n    \t\tSystem.out.println(&quot;submitted 2 jobs, waiting for completion..&quot;);\r\n    \t\ttaskExecutor.shutdown();\r\n    \t}\r\n    \r\n    }\r\n\r\nIt prints:\r\n\r\n    submitted 2 jobs, waiting for completion..\r\n    job1\r\n    job2\r\n\r\n","title":"How to keep main thread in waiting state after spawn multiple async jobs in spring batch","body":"<p>Using a <code>ThreadPoolTaskExecutor</code> is the way to go. This task executor implementation provides a boolean parameter called <code>WaitForTasksToCompleteOnShutdown</code> which you need to set in order to wait for jobs to finish. So what you can do is the following:</p>\n\n<p>Set the <code>WaitForTasksToCompleteOnShutdown</code> on the task executor:</p>\n\n<pre><code>@Bean\npublic TaskExecutor taskExecutor() {\n    ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n    taskExecutor.setMaxPoolSize(maxThreadCount);\n    taskExecutor.setWaitForTasksToCompleteOnShutdown(true);\n    taskExecutor.afterPropertiesSet();\n    return taskExecutor;\n}\n</code></pre>\n\n<p>Call <code>shutdown</code> on the task executor to wait for jobs to finish:</p>\n\n<pre><code>Class JobHandler {\n    @Autowired\n    private JobLauncher jobLauncher;\n    @Autowired\n    private ThreadPoolTaskExecutor taskExecutor;\n\n    // Main thread executing demo method\n\n    public void demo () {\n       launchJob(job1, builder1);\n       launchJob(job2, builder2);\n       launchJob(job3, builder3);\n       launchJob(job4, builder4);\n       launchJob(job5, builder5);\n       launchJob(job6, builder6);\n\n       // Here I want to do operation when all six jobs complete successfully\n       // Please suggest how to do.\n       taskExecutor.shutdown();\n    } \n\n}\n</code></pre>\n\n<p>Here is a complete example:</p>\n\n<pre><code>import org.springframework.batch.core.Job;\nimport org.springframework.batch.core.JobParameters;\nimport org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\nimport org.springframework.batch.core.configuration.annotation.JobBuilderFactory;\nimport org.springframework.batch.core.configuration.annotation.StepBuilderFactory;\nimport org.springframework.batch.core.launch.JobLauncher;\nimport org.springframework.batch.core.launch.support.SimpleJobLauncher;\nimport org.springframework.batch.core.repository.JobRepository;\nimport org.springframework.batch.repeat.RepeatStatus;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n\n@Configuration\n@EnableBatchProcessing\npublic class JobsConfig {\n\n    private final JobBuilderFactory jobs;\n\n    private final StepBuilderFactory steps;\n\n    public JobsConfig(JobBuilderFactory jobs, StepBuilderFactory steps) {\n        this.jobs = jobs;\n        this.steps = steps;\n    }\n\n    @Bean\n    public Job job1() {\n        return jobs.get(\"job1\")\n                .start(steps.get(\"step11\")\n                        .tasklet((contribution, chunkContext) -&gt; {\n                            System.out.println(\"job1\");\n                            Thread.sleep(1000);\n                            return RepeatStatus.FINISHED;\n                        })\n                        .build())\n                .build();\n    }\n\n    @Bean\n    public Job job2() {\n        return jobs.get(\"job2\")\n                .start(steps.get(\"step21\")\n                        .tasklet((contribution, chunkContext) -&gt; {\n                            System.out.println(\"job2\");\n                            Thread.sleep(2000);\n                            return RepeatStatus.FINISHED;\n                        })\n                        .build())\n                .build();\n    }\n\n    @Bean\n    public ThreadPoolTaskExecutor taskExecutor() {\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n        taskExecutor.setMaxPoolSize(10);\n        taskExecutor.setWaitForTasksToCompleteOnShutdown(true);\n        taskExecutor.afterPropertiesSet();\n        return taskExecutor;\n    }\n\n    @Bean\n    public JobLauncher jobLauncher(JobRepository jobRepository, ThreadPoolTaskExecutor taskExecutor) throws Exception {\n        SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\n        jobLauncher.setJobRepository(jobRepository);\n        jobLauncher.setTaskExecutor(taskExecutor);\n        jobLauncher.afterPropertiesSet();\n        return jobLauncher;\n    }\n\n    public static void main(String[] args) throws Exception {\n        ApplicationContext context = new AnnotationConfigApplicationContext(JobsConfig.class);\n        ThreadPoolTaskExecutor taskExecutor = context.getBean(ThreadPoolTaskExecutor.class);\n        JobLauncher jobLauncher = context.getBean(JobLauncher.class);\n        Job job1 = (Job) context.getBean(\"job1\");\n        Job job2 = (Job) context.getBean(\"job2\");\n        jobLauncher.run(job1, new JobParameters());\n        jobLauncher.run(job2, new JobParameters());\n        System.out.println(\"submitted 2 jobs, waiting for completion..\");\n        taskExecutor.shutdown();\n    }\n\n}\n</code></pre>\n\n<p>It prints:</p>\n\n<pre><code>submitted 2 jobs, waiting for completion..\njob1\njob2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13182025,"reputation":470,"user_id":9521107,"display_name":"truekiller"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647337876,"creation_date":1647337876,"answer_id":71480132,"question_id":59577125,"body_markdown":"When using an Executor, we can shut it down by calling the shutdown() or shutdownNow() methods. Although, it won’t wait until all threads stop executing. \r\n\r\nWaiting for existing threads to complete their execution can be achieved by using the `awaitTermination(TIME_IN_SECONDS)`  &amp; `setWaitForTasksToCompleteOnShutdown(true)` method which blocks the thread until all tasks complete their execution or the specified timeout is reached\r\n\r\n        @Bean\r\n        public ThreadPoolTaskExecutor taskExecutor() {\r\n            ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n            taskExecutor.setMaxPoolSize(10);\r\n            taskExecutor.setWaitForTasksToCompleteOnShutdown(true);\r\n            taskExecutor.awaitTermination(10000)\r\n            taskExecutor.afterPropertiesSet();\r\n            return taskExecutor;\r\n        }\r\n    \r\n        Class JobHandler {\r\n        @Autowired\r\n        private JobLauncher jobLauncher;\r\n        @Autowired\r\n        private ThreadPoolTaskExecutor taskExecutor;\r\n    \r\n        // Main thread executing demo method\r\n    \r\n        public void demo () {\r\n           launchJob(job1, builder1);\r\n           launchJob(job2, builder2);\r\n           launchJob(job3, builder3);\r\n           launchJob(job4, builder4);\r\n           launchJob(job5, builder5);\r\n           launchJob(job6, builder6);\r\n    \r\n           // Here I want to do operation when all six jobs complete successfully\r\n           // Please suggest how to do.\r\n           taskExecutor.shutdown();\r\n        } \r\n    \r\n    }\r\n\r\n","title":"How to keep main thread in waiting state after spawn multiple async jobs in spring batch","body":"<p>When using an Executor, we can shut it down by calling the shutdown() or shutdownNow() methods. Although, it won’t wait until all threads stop executing.</p>\n<p>Waiting for existing threads to complete their execution can be achieved by using the <code>awaitTermination(TIME_IN_SECONDS)</code>  &amp; <code>setWaitForTasksToCompleteOnShutdown(true)</code> method which blocks the thread until all tasks complete their execution or the specified timeout is reached</p>\n<pre><code>    @Bean\n    public ThreadPoolTaskExecutor taskExecutor() {\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n        taskExecutor.setMaxPoolSize(10);\n        taskExecutor.setWaitForTasksToCompleteOnShutdown(true);\n        taskExecutor.awaitTermination(10000)\n        taskExecutor.afterPropertiesSet();\n        return taskExecutor;\n    }\n\n    Class JobHandler {\n    @Autowired\n    private JobLauncher jobLauncher;\n    @Autowired\n    private ThreadPoolTaskExecutor taskExecutor;\n\n    // Main thread executing demo method\n\n    public void demo () {\n       launchJob(job1, builder1);\n       launchJob(job2, builder2);\n       launchJob(job3, builder3);\n       launchJob(job4, builder4);\n       launchJob(job5, builder5);\n       launchJob(job6, builder6);\n\n       // Here I want to do operation when all six jobs complete successfully\n       // Please suggest how to do.\n       taskExecutor.shutdown();\n    } \n\n}\n</code></pre>\n"}],"owner":{"account_id":4910339,"reputation":233,"user_id":3955810,"accept_rate":40,"display_name":"Ashok Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2038,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1647337876,"creation_date":1578048169,"question_id":59577125,"body_markdown":"I have configured async job launcher using TaskExecutor in spring batch.\r\n\r\nI have launched n async jobs from main thread.\r\n\r\nNow I want to keep main method wait till all n jobs get complete. I have tried to use CountDownLatch and Phaser but could not achieve. \r\n\r\nPlease suggest how to achieve it?  \r\n\r\nHere are some similar dummy code fragments.\r\n \r\n\r\n    @Configuration\r\n    public class SpringBatchConfiguration { \r\n    \t@Bean\r\n        public TaskExecutor taskExecutor() {\r\n            ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n            taskExecutor.setMaxPoolSize(maxThreadCount);\r\n            taskExecutor.afterPropertiesSet();\r\n            return taskExecutor;\r\n        }\r\n    \r\n        @Bean\r\n        @Primary\r\n        public JobLauncher getJobLauncher(JobRepository jobRepo, SimpleAsyncTaskExecutor taskExecuter) {\r\n            SimpleJobLauncher jobL = new SimpleJobLauncher();\r\n            jobL.setJobRepository(jobRepo);\r\n            jobL.setTaskExecutor(taskExecuter);\r\n            return jobL;\r\n        }\r\n    }\r\n\r\nMain thread executing below code.\r\n\r\n   \r\n\r\n     Class JobHandler {\r\n    \t@Autowired\r\n    \tJobLauncher jobLauncher;\r\n    \r\n    \t// Main thread executing demo method\r\n    \t\r\n    \tpublic void demo () {\r\n    \t\tlaunchJob(job1, builder1);\r\n    \t\tlaunchJob(job2, builder2);\r\n    \t\tlaunchJob(job3, builder3);\r\n    \t\tlaunchJob(job4, builder4);\r\n    \t\tlaunchJob(job5, builder5);\r\n    \t\tlaunchJob(job6, builder6);\r\n    \r\n    \t\t// Here I want to do operation when all six jobs complete successfully\r\n    \t\t// Please suggest how to do.\r\n    \t}\r\n    \r\n    \tpublic void launchJob(Job job, JobParametersBuilder builder ) { \r\n    \t\ttry {\r\n    \r\n    \t\t\t// Asynchronous job submission  \r\n    \t\t\tfinal JobExecution execution = jobLauncher.run(job, builder.toJobParameters());\t\t\r\n    \t\t}\r\n    \t\tcatch(Throwable th) {\r\n    \t\t\tlog.error(&quot;Job execution failed&quot;);\r\n    \t\t}\t\t\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"How to keep main thread in waiting state after spawn multiple async jobs in spring batch","body":"<p>I have configured async job launcher using TaskExecutor in spring batch.</p>\n\n<p>I have launched n async jobs from main thread.</p>\n\n<p>Now I want to keep main method wait till all n jobs get complete. I have tried to use CountDownLatch and Phaser but could not achieve. </p>\n\n<p>Please suggest how to achieve it?  </p>\n\n<p>Here are some similar dummy code fragments.</p>\n\n<pre><code>@Configuration\npublic class SpringBatchConfiguration { \n    @Bean\n    public TaskExecutor taskExecutor() {\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n        taskExecutor.setMaxPoolSize(maxThreadCount);\n        taskExecutor.afterPropertiesSet();\n        return taskExecutor;\n    }\n\n    @Bean\n    @Primary\n    public JobLauncher getJobLauncher(JobRepository jobRepo, SimpleAsyncTaskExecutor taskExecuter) {\n        SimpleJobLauncher jobL = new SimpleJobLauncher();\n        jobL.setJobRepository(jobRepo);\n        jobL.setTaskExecutor(taskExecuter);\n        return jobL;\n    }\n}\n</code></pre>\n\n<p>Main thread executing below code.</p>\n\n<pre><code> Class JobHandler {\n    @Autowired\n    JobLauncher jobLauncher;\n\n    // Main thread executing demo method\n\n    public void demo () {\n        launchJob(job1, builder1);\n        launchJob(job2, builder2);\n        launchJob(job3, builder3);\n        launchJob(job4, builder4);\n        launchJob(job5, builder5);\n        launchJob(job6, builder6);\n\n        // Here I want to do operation when all six jobs complete successfully\n        // Please suggest how to do.\n    }\n\n    public void launchJob(Job job, JobParametersBuilder builder ) { \n        try {\n\n            // Asynchronous job submission  \n            final JobExecution execution = jobLauncher.run(job, builder.toJobParameters());     \n        }\n        catch(Throwable th) {\n            log.error(\"Job execution failed\");\n        }       \n    }\n}\n</code></pre>\n"},{"tags":["java","jpa","eclipselink"],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1391516724,"creation_date":1391516724,"answer_id":21552523,"question_id":21539258,"body_markdown":"You don&#39;t seem to be maintaining both sides of your relationships in the code shown.  Calling setSecondCustomerRelationship Will set one side of it, and this side controls the foreign key field in the db. But your java object model is out of sync with your changes unless you also add the customerRelationship to customerMainInformation&#39;s collection.  JPA does not maintain your relationships for you, so if you change one side, you are responsible for keeping the other side insync. \r\n \r\nYou can either set both sides, or force the customerMainInformation to be refreshed from the database after you commit.  The first option is far more efficient.","title":"eclipselink cache on the object relationship","body":"<p>You don't seem to be maintaining both sides of your relationships in the code shown.  Calling setSecondCustomerRelationship Will set one side of it, and this side controls the foreign key field in the db. But your java object model is out of sync with your changes unless you also add the customerRelationship to customerMainInformation's collection.  JPA does not maintain your relationships for you, so if you change one side, you are responsible for keeping the other side insync. </p>\n\n<p>You can either set both sides, or force the customerMainInformation to be refreshed from the database after you commit.  The first option is far more efficient.</p>\n"}],"owner":{"account_id":3591643,"reputation":75,"user_id":2997560,"accept_rate":60,"display_name":"Mehdi Abdolmaleki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":583,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":21552523,"answer_count":1,"score":1,"last_activity_date":1647337816,"creation_date":1391466888,"question_id":21539258,"body_markdown":"I have two entities:\r\n\r\n    @Entity\r\n    public class CustomerMainInformation {\r\n    @Id @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String name;\r\n\r\n    @Column(unique = true, length = 10)\r\n    private String customerNumber;\r\n    @OneToMany(mappedBy = &quot;firstCustomerRelationship&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;CustomerRelationship&gt; firstCustomerRelationship;\r\n\r\n    @OneToMany(mappedBy = &quot;secondCustomerRelationship&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;CustomerRelationship&gt; secondCustomerRelationship;\r\n    // setter &amp; getter\r\n    }\r\n\r\n    @Entity\r\n    public class CustomerRelationship {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(columnDefinition = &quot;first&quot;)\r\n    private CustomerMainInformation firstCustomerRelationship;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(columnDefinition = &quot;second&quot;)\r\n    private CustomerMainInformation secondCustomerRelationship;\r\n\r\n    // setter &amp; getter\r\n    }\r\n\r\nI executed following code:\r\n\r\n        CustomerMainInformation customerMainInformation =manager.getReference(CustomerMainInformation.class, 1L);\r\n        System.out.println(customerMainInformation.getFirstCustomerRelationship().size());\r\n        System.out.println(customerMainInformation.getSecondCustomerRelationship().size());\r\n\r\n        CustomerMainInformation customerMainInformation2 = manager.getReference(customerMainInformation.getClass(), 2L);\r\n        CustomerRelationship customerRelationship = new CustomerRelationship();\r\n        customerRelationship.setFirstCustomerRelationship(customerMainInformation2);\r\n        customerRelationship.setSecondCustomerRelationship(customerMainInformation);\r\n        manager.persist(customerRelationship);\r\n        transaction.commit();\r\n\r\n        EntityManager manager2 = factory.createEntityManager();\r\n        CustomerMainInformation customerMainInformation3 =  manager2.getReference(CustomerMainInformation.class, 1L);\r\n        System.out.println(customerMainInformation3.getFirstCustomerRelationship().size());\r\n        System.out.println(customerMainInformation3.getSecondCustomerRelationship().size());\r\n\r\nIn this code relationship size increment but because .getSecondCustomerRelationship() before called, list size not changed.\r\n\r\nIf @Cacheable(false) add to CustomerRelationship the .size() return correct list size.\r\n\r\n","title":"eclipselink cache on the object relationship","body":"<p>I have two entities:</p>\n<pre><code>@Entity\npublic class CustomerMainInformation {\n@Id @GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\nprivate String name;\n\n@Column(unique = true, length = 10)\nprivate String customerNumber;\n@OneToMany(mappedBy = &quot;firstCustomerRelationship&quot;, cascade = CascadeType.ALL)\nprivate List&lt;CustomerRelationship&gt; firstCustomerRelationship;\n\n@OneToMany(mappedBy = &quot;secondCustomerRelationship&quot;, cascade = CascadeType.ALL)\nprivate List&lt;CustomerRelationship&gt; secondCustomerRelationship;\n// setter &amp; getter\n}\n\n@Entity\npublic class CustomerRelationship {\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\n@ManyToOne\n@JoinColumn(columnDefinition = &quot;first&quot;)\nprivate CustomerMainInformation firstCustomerRelationship;\n\n@ManyToOne\n@JoinColumn(columnDefinition = &quot;second&quot;)\nprivate CustomerMainInformation secondCustomerRelationship;\n\n// setter &amp; getter\n}\n</code></pre>\n<p>I executed following code:</p>\n<pre><code>    CustomerMainInformation customerMainInformation =manager.getReference(CustomerMainInformation.class, 1L);\n    System.out.println(customerMainInformation.getFirstCustomerRelationship().size());\n    System.out.println(customerMainInformation.getSecondCustomerRelationship().size());\n\n    CustomerMainInformation customerMainInformation2 = manager.getReference(customerMainInformation.getClass(), 2L);\n    CustomerRelationship customerRelationship = new CustomerRelationship();\n    customerRelationship.setFirstCustomerRelationship(customerMainInformation2);\n    customerRelationship.setSecondCustomerRelationship(customerMainInformation);\n    manager.persist(customerRelationship);\n    transaction.commit();\n\n    EntityManager manager2 = factory.createEntityManager();\n    CustomerMainInformation customerMainInformation3 =  manager2.getReference(CustomerMainInformation.class, 1L);\n    System.out.println(customerMainInformation3.getFirstCustomerRelationship().size());\n    System.out.println(customerMainInformation3.getSecondCustomerRelationship().size());\n</code></pre>\n<p>In this code relationship size increment but because .getSecondCustomerRelationship() before called, list size not changed.</p>\n<p>If @Cacheable(false) add to CustomerRelationship the .size() return correct list size.</p>\n"},{"tags":["java","cucumber","allure"],"answers":[{"tags":[],"owner":{"account_id":14466780,"reputation":1,"user_id":10449897,"display_name":"Ayhan Uzundal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647337704,"creation_date":1647337704,"answer_id":71480090,"question_id":71479847,"body_markdown":"you can focus missing test cases, these could have common problem, maybe syntax, tag or not executed.","title":"Allure + Cucumber - some testcases missing in report","body":"<p>you can focus missing test cases, these could have common problem, maybe syntax, tag or not executed.</p>\n"}],"owner":{"account_id":10182227,"reputation":105,"user_id":7518551,"display_name":"Waldemar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":568,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647337704,"creation_date":1647336666,"question_id":71479847,"body_markdown":"We use cucumber (cucumber-java 7.2.3) with allure reporting plugin (allure-cucumber7-jvm 2.17.3) for our tests. unfortunately we get some gaps between executed tests and allure reporting, when we execute a bigger amount of tests.\r\n\r\nE.g.:\r\n**Test Execution 1**: we execute 170 tests -&gt; 170 tests are reportet in xml, 170 tests are reported in allure report -&gt; everything works fine\r\n\r\n**Test Execution 2:** we execute 614 tests -&gt; 614 Tests are reported in xml, 604 tests are reported in allure report -&gt; 10 Tests are missing in result\r\n\r\nwe tried to...\r\n- deactivate parallelization\r\n- remove all descriptions and tags to reduce amount of data\r\n- split and merge the tests to scenario outlines \r\n\r\nall without success...\r\n\r\nAny idea how to fix that?","title":"Allure + Cucumber - some testcases missing in report","body":"<p>We use cucumber (cucumber-java 7.2.3) with allure reporting plugin (allure-cucumber7-jvm 2.17.3) for our tests. unfortunately we get some gaps between executed tests and allure reporting, when we execute a bigger amount of tests.</p>\n<p>E.g.:\n<strong>Test Execution 1</strong>: we execute 170 tests -&gt; 170 tests are reportet in xml, 170 tests are reported in allure report -&gt; everything works fine</p>\n<p><strong>Test Execution 2:</strong> we execute 614 tests -&gt; 614 Tests are reported in xml, 604 tests are reported in allure report -&gt; 10 Tests are missing in result</p>\n<p>we tried to...</p>\n<ul>\n<li>deactivate parallelization</li>\n<li>remove all descriptions and tags to reduce amount of data</li>\n<li>split and merge the tests to scenario outlines</li>\n</ul>\n<p>all without success...</p>\n<p>Any idea how to fix that?</p>\n"},{"tags":["java","architecture","scaling","state-machine","system-design"],"comments":[{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":2,"creation_date":1546891330,"post_id":54080690,"comment_id":94995447,"body_markdown":"google for java business process engine or workflow","body":"google for java business process engine or workflow"},{"owner":{"account_id":71015,"reputation":5191,"user_id":205463,"accept_rate":71,"display_name":"Vahid Hashemi"},"score":1,"creation_date":1546916609,"post_id":54080690,"comment_id":95002535,"body_markdown":"What your are looking for is, similar to BPMS. I guess you can solve it using such tools/framework/systems","body":"What your are looking for is, similar to BPMS. I guess you can solve it using such tools/framework/systems"}],"answers":[{"tags":[],"owner":{"account_id":1833470,"reputation":6598,"user_id":1664318,"display_name":"Maxim Fateev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1605466335,"creation_date":1567963224,"answer_id":57844152,"question_id":54080690,"body_markdown":"I would recommend looking into [temporal.io][1]. It supports modeling such long running business transactions as [fault-oblivious][2] Java code. It is an open source platform which is proven in production at Uber and outside.\r\n\r\n\r\n\r\n  [1]: https://temporal.io/\r\n  [2]: https://docs.temporal.io/docs/workflows\r\n","title":"User Onboarding State machine - Storage and implementation","body":"<p>I would recommend looking into <a href=\"https://temporal.io/\" rel=\"nofollow noreferrer\">temporal.io</a>. It supports modeling such long running business transactions as <a href=\"https://docs.temporal.io/docs/workflows\" rel=\"nofollow noreferrer\">fault-oblivious</a> Java code. It is an open source platform which is proven in production at Uber and outside.</p>\n"},{"tags":[],"owner":{"account_id":22535954,"reputation":1,"user_id":16727246,"display_name":"Shuvadeep Sarkar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1647337634,"creation_date":1647337634,"answer_id":71480073,"question_id":54080690,"body_markdown":"User Onboarding is the process through which new software is designed such that new users are provided and acquire the necessary knowledge, skills, and behaviors in order to become “up and running” and effective users of the website, app, or software service.\r\nState Machine modeling is one of the most traditional patterns in Computer Science. It’s one of those design patterns which impacts our daily life through different software. It’s not a coding-oriented ( Gang of Four types) design pattern, but it’s system-oriented, mostly used to model around business use cases.\r\n","title":"User Onboarding State machine - Storage and implementation","body":"<p>User Onboarding is the process through which new software is designed such that new users are provided and acquire the necessary knowledge, skills, and behaviors in order to become “up and running” and effective users of the website, app, or software service.\nState Machine modeling is one of the most traditional patterns in Computer Science. It’s one of those design patterns which impacts our daily life through different software. It’s not a coding-oriented ( Gang of Four types) design pattern, but it’s system-oriented, mostly used to model around business use cases.</p>\n"}],"owner":{"account_id":6413279,"reputation":1949,"user_id":4972226,"accept_rate":40,"display_name":"Yathish Manjunath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1647337634,"creation_date":1546889685,"question_id":54080690,"body_markdown":"How to implement a user onboarding state machine ?\r\n\r\n**For Example : onboarding drivers in a uber system has many steps as below** :\r\n\r\n&gt; 1. Sign-up\r\n&gt; \r\n&gt; 2. Vehicle details\r\n&gt; \r\n&gt;   a. If he already owns a vehicle, then fill up the details\r\n&gt; \r\n&gt;   b. If he doesn&#39;t own a vehicle, then he need to apply for one.\r\n&gt; \r\n&gt; 3. Screening Process\r\n&gt; \r\n&gt; 4. Documents verification\r\n&gt; \r\n&gt; 5. Training video\r\n\r\n\r\n[See this Onboarding process from UBER][1]\r\n\r\n - How can we store / implement this on boarding process for each user ? How to represent these details in DB ? \r\n - This on boarding process may vary in each city/state/country and our system should be capable of handling this as well.\r\n - Also, When a user has incomplete the process and logins again after sometime we should take him to the appropriate process to finish.\r\n\r\n\r\n  [1]: http://eng.uber.com/wp-content/uploads/2016/09/Paris_Flow.png","title":"User Onboarding State machine - Storage and implementation","body":"<p>How to implement a user onboarding state machine ?</p>\n\n<p><strong>For Example : onboarding drivers in a uber system has many steps as below</strong> :</p>\n\n<blockquote>\n  <ol>\n  <li><p>Sign-up</p></li>\n  <li><p>Vehicle details</p>\n  \n  <p>a. If he already owns a vehicle, then fill up the details</p>\n  \n  <p>b. If he doesn't own a vehicle, then he need to apply for one.</p></li>\n  <li><p>Screening Process</p></li>\n  <li><p>Documents verification</p></li>\n  <li><p>Training video</p></li>\n  </ol>\n</blockquote>\n\n<p><a href=\"http://eng.uber.com/wp-content/uploads/2016/09/Paris_Flow.png\" rel=\"nofollow noreferrer\">See this Onboarding process from UBER</a></p>\n\n<ul>\n<li>How can we store / implement this on boarding process for each user ? How to represent these details in DB ? </li>\n<li>This on boarding process may vary in each city/state/country and our system should be capable of handling this as well.</li>\n<li>Also, When a user has incomplete the process and logins again after sometime we should take him to the appropriate process to finish.</li>\n</ul>\n"},{"tags":["java","spring","hibernate","rest","interceptor"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637656197,"post_id":70037076,"comment_id":123877965,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1938289,"reputation":1,"user_id":1745175,"display_name":"Dimm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647337525,"creation_date":1647337525,"answer_id":71480049,"question_id":70037076,"body_markdown":"I suppose, you could use onFlashDirty","title":"Hibernate Interceptor : entity intercepted on update","body":"<p>I suppose, you could use onFlashDirty</p>\n"}],"owner":{"account_id":23376918,"reputation":1,"user_id":17445990,"display_name":"Lyudmil Stamenov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647337525,"creation_date":1637335058,"question_id":70037076,"body_markdown":"I am building REST API. And I have an entity and Interceptor. The Interceptor extends EmptyInterceptor(Hibernate). When I create a new object of the entity, the interceptor is called. However, when i update the object of the entity in the code, the interceptor is also called. But when I update the object of the entity using put request, the interceptor is not called and the entity is updated in the database. Any ideas how I can solve this?\r\nThanks in advance.","title":"Hibernate Interceptor : entity intercepted on update","body":"<p>I am building REST API. And I have an entity and Interceptor. The Interceptor extends EmptyInterceptor(Hibernate). When I create a new object of the entity, the interceptor is called. However, when i update the object of the entity in the code, the interceptor is also called. But when I update the object of the entity using put request, the interceptor is not called and the entity is updated in the database. Any ideas how I can solve this?\nThanks in advance.</p>\n"},{"tags":["java","function","generics","variadic-functions","getter"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1647335458,"post_id":71479556,"comment_id":126339375,"body_markdown":"you understand that, in order to cal (non-static) getters, you&#39;ll need an instance of the object first?","body":"you understand that, in order to cal (non-static) getters, you&#39;ll need an instance of the object first?"}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1647337099,"creation_date":1647337099,"answer_id":71479954,"question_id":71479556,"body_markdown":"You need to wrap the method calls in a [Function][1]. A [Consumer][2], or another [FunctionalInterface][3] might do the trick as well, depending on your needs.\r\n\r\nThen you need to have your method accept varargs of this function.\r\n```\r\n  public static &lt;T&gt; void generateRows(List&lt;T&gt; list, Function&lt;T, String&gt;... getters) {\r\n    for (T object : list) {\r\n      for (Function&lt;T, String&gt; getter : getters) {\r\n        System.out.println(getter.apply(object));\r\n      }\r\n    }\r\n  }\r\n```\r\nFunction will accept argument of type `T` and return a `String`. `T` can be anything - `Class1`, `Class2`, etc., as long you can return a string from this object - that means to have a getter method returning `String` in your case.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html","title":"Use getter as parameter in method","body":"<p>You need to wrap the method calls in a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html\" rel=\"nofollow noreferrer\">Function</a>. A <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html\" rel=\"nofollow noreferrer\">Consumer</a>, or another <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html\" rel=\"nofollow noreferrer\">FunctionalInterface</a> might do the trick as well, depending on your needs.</p>\n<p>Then you need to have your method accept varargs of this function.</p>\n<pre><code>  public static &lt;T&gt; void generateRows(List&lt;T&gt; list, Function&lt;T, String&gt;... getters) {\n    for (T object : list) {\n      for (Function&lt;T, String&gt; getter : getters) {\n        System.out.println(getter.apply(object));\n      }\n    }\n  }\n</code></pre>\n<p>Function will accept argument of type <code>T</code> and return a <code>String</code>. <code>T</code> can be anything - <code>Class1</code>, <code>Class2</code>, etc., as long you can return a string from this object - that means to have a getter method returning <code>String</code> in your case.</p>\n"},{"tags":[],"owner":{"account_id":9342962,"reputation":1,"user_id":6935071,"display_name":"PandaChen"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1647337513,"creation_date":1647337513,"answer_id":71480046,"question_id":71479556,"body_markdown":"First you can defined a interface eg:\r\n\r\n     interface  Get{\r\n        String getVar1();\r\n         String getVar2();\r\n         String getVar3();\r\n     }\r\n\r\nSecond All of classes implemente it:\r\n\r\n     class Class2 implements Get{\r\n        private String var2_1;\r\n        private String var2_2;\r\n        private String var2_3;\r\n    \r\n        public String getVar1() { return var2_1;}\r\n        public String getVar2() { return var2_2;}\r\n        public String getVar3() { return var2_3;}\r\n    }\r\n\r\nThird:\r\n\r\n       public void generateRows(List&lt;T&gt; list, Get ...getters) {\r\n            for(T object: list) {\r\n                /*How to use getters to print?*/\r\n                /*System.out.println(obj.firtsGetter())*/\r\n            }\r\n        }\r\n\r\n","title":"Use getter as parameter in method","body":"<p>First you can defined a interface eg:</p>\n<pre><code> interface  Get{\n    String getVar1();\n     String getVar2();\n     String getVar3();\n }\n</code></pre>\n<p>Second All of classes implemente it:</p>\n<pre><code> class Class2 implements Get{\n    private String var2_1;\n    private String var2_2;\n    private String var2_3;\n\n    public String getVar1() { return var2_1;}\n    public String getVar2() { return var2_2;}\n    public String getVar3() { return var2_3;}\n}\n</code></pre>\n<p>Third:</p>\n<pre><code>   public void generateRows(List&lt;T&gt; list, Get ...getters) {\n        for(T object: list) {\n            /*How to use getters to print?*/\n            /*System.out.println(obj.firtsGetter())*/\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":21381216,"reputation":23,"user_id":15747096,"display_name":"henry bola"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71479954,"answer_count":2,"score":0,"last_activity_date":1647337513,"creation_date":1647335364,"question_id":71479556,"body_markdown":"I have multiple different classes Class1, Class2, Class3.\r\nEach class has different variables and getters for them.\r\n```\r\npublic class Class1 {\r\n private String var1_1;\r\n private String var1_2;\r\n private String var1_3;\r\n\r\n public String getVar1_1() { return var1_1;}\r\n public String getVar1_2() { return var1_2;}\r\n public String getVar1_3() { return var1_3;}\r\n}\r\n\r\npublic class Class2 {\r\n private String var2_1;\r\n private String var2_2;\r\n private String var2_3;\r\n\r\n public String getVar2_1() { return var2_1;}\r\n public String getVar2_2() { return var2_2;}\r\n public String getVar2_3() { return var2_3;}\r\n}\r\n\r\npublic class Class3 {\r\n private String var3_1;\r\n private String var3_2;\r\n private String var3_3;\r\n\r\n public String getVar3_1() { return var3_1;}\r\n public String getVar3_2() { return var3_2;}\r\n public String getVar3_3() { return var3_3;}\r\n}\r\n```\r\nHow can I write method which takes List of objects and getters(functions) as a method parameters?\r\nFor example:\r\n```\r\nList&lt;Class1&gt; list1 = //doesn&#39;t matter\r\nList&lt;Class2&gt; list2 = //doesn&#39;t matter\r\nList&lt;Class3&gt; list3 = //doesn&#39;t matter\r\ngenerateRows(list1, Class1::getVar1_1, Class1::getVar1_3);\r\ngenerateRows(list2, Class2::getVar2_1, Class2::getVar2_2, Class2::getVar2_3);\r\ngenerateRows(list3, Class3::getVar3_1, Class3::getVar3_2);\r\n```\r\nMethod \r\n\r\n```\r\npublic void generateRows(List&lt;T&gt; list, /*???Something???*/... getters) {\r\n for(T object: list) {\r\n  /*How to use getters to print?*/\r\n  /*System.out.println(obj.firtsGetter())*/\r\n }\r\n}\r\n```\r\nWhat I should write instead of ```???Something???```. Something like ```Function&lt;T, String&gt;``` or ```Consumer&lt;T&gt;```? And how can I use getters in method?","title":"Use getter as parameter in method","body":"<p>I have multiple different classes Class1, Class2, Class3.\nEach class has different variables and getters for them.</p>\n<pre><code>public class Class1 {\n private String var1_1;\n private String var1_2;\n private String var1_3;\n\n public String getVar1_1() { return var1_1;}\n public String getVar1_2() { return var1_2;}\n public String getVar1_3() { return var1_3;}\n}\n\npublic class Class2 {\n private String var2_1;\n private String var2_2;\n private String var2_3;\n\n public String getVar2_1() { return var2_1;}\n public String getVar2_2() { return var2_2;}\n public String getVar2_3() { return var2_3;}\n}\n\npublic class Class3 {\n private String var3_1;\n private String var3_2;\n private String var3_3;\n\n public String getVar3_1() { return var3_1;}\n public String getVar3_2() { return var3_2;}\n public String getVar3_3() { return var3_3;}\n}\n</code></pre>\n<p>How can I write method which takes List of objects and getters(functions) as a method parameters?\nFor example:</p>\n<pre><code>List&lt;Class1&gt; list1 = //doesn't matter\nList&lt;Class2&gt; list2 = //doesn't matter\nList&lt;Class3&gt; list3 = //doesn't matter\ngenerateRows(list1, Class1::getVar1_1, Class1::getVar1_3);\ngenerateRows(list2, Class2::getVar2_1, Class2::getVar2_2, Class2::getVar2_3);\ngenerateRows(list3, Class3::getVar3_1, Class3::getVar3_2);\n</code></pre>\n<p>Method</p>\n<pre><code>public void generateRows(List&lt;T&gt; list, /*???Something???*/... getters) {\n for(T object: list) {\n  /*How to use getters to print?*/\n  /*System.out.println(obj.firtsGetter())*/\n }\n}\n</code></pre>\n<p>What I should write instead of <code>???Something???</code>. Something like <code>Function&lt;T, String&gt;</code> or <code>Consumer&lt;T&gt;</code>? And how can I use getters in method?</p>\n"},{"tags":["java","selenium","selenium-webdriver","ui-automation","ashot"],"comments":[{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1647337253,"post_id":71479665,"comment_id":126340022,"body_markdown":"Where is the screenshot?  What have you tried so far?","body":"Where is the screenshot?  What have you tried so far?"},{"owner":{"account_id":11136528,"reputation":45,"user_id":8193498,"display_name":"mohith"},"score":0,"creation_date":1647339766,"post_id":71479665,"comment_id":126340897,"body_markdown":"I have tried to cast my driver class object to the WebDriver but it didn&#39;t work.","body":"I have tried to cast my driver class object to the WebDriver but it didn&#39;t work."}],"owner":{"account_id":11136528,"reputation":45,"user_id":8193498,"display_name":"mohith"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647337225,"creation_date":1647335796,"question_id":71479665,"body_markdown":"I have a separate driver class which implements WebDriver and has all the common methods. I wrote another class called Screenshot util in which I wrote implementation of screenshots using Ashot, baseLinePageScreenshots(Driver driver, String name)  here name is screenshot and name driver is Driver class object. In my test case I called the above method and passed Driver class object only \r\n`sutil.baseLinePageScreenshots(driver, method.getName());` but when I execute I facing following exception:\r\n     \r\n\r\n&gt; java.lang.IllegalArgumentException: Driver must have capabilities","title":"My driver class is not working with Ashot screenshot","body":"<p>I have a separate driver class which implements WebDriver and has all the common methods. I wrote another class called Screenshot util in which I wrote implementation of screenshots using Ashot, baseLinePageScreenshots(Driver driver, String name)  here name is screenshot and name driver is Driver class object. In my test case I called the above method and passed Driver class object only\n<code>sutil.baseLinePageScreenshots(driver, method.getName());</code> but when I execute I facing following exception:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Driver must have capabilities</p>\n</blockquote>\n"},{"tags":["java","mongodb","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":22470996,"reputation":86,"user_id":16671436,"display_name":"massimo lauri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647336921,"creation_date":1647336921,"answer_id":71479911,"question_id":71479175,"body_markdown":"This is TestDocument\r\n\r\n    public class TestArrayDocument {\r\n        @Id\r\n        String id;\r\n        Integer[] x;\r\n    }\r\nInject MongoTemplate\r\n\r\n    @Autowired\r\n    MongoTemplate mongoTemplate;\r\n\r\n\r\nThis is aggregate method\r\n\r\n      TypedAggregation&lt;TestArrayDocument&gt; aggregation  = Aggregation.newAggregation(TestArrayDocument.class,Aggregation\r\n                .project()\r\n                .andExclude(&quot;_id&quot;)\r\n                .andExpression(&quot;first(x)&quot;).as(&quot;object&quot;));\r\n\r\n        List&lt;Map&gt; mapData=  mongoTemplate\r\n                .aggregate(aggregation,Map.class)\r\n                .getMappedResults();\r\n\r\nx is your $object.array.\r\n\r\nreturn in LinkedHashMap &quot;object&quot;=&gt;&quot;firstElement&quot;.\r\n\r\n\r\n","title":"Get the first element from an array with mongodb java client","body":"<p>This is TestDocument</p>\n<pre><code>public class TestArrayDocument {\n    @Id\n    String id;\n    Integer[] x;\n}\n</code></pre>\n<p>Inject MongoTemplate</p>\n<pre><code>@Autowired\nMongoTemplate mongoTemplate;\n</code></pre>\n<p>This is aggregate method</p>\n<pre><code>  TypedAggregation&lt;TestArrayDocument&gt; aggregation  = Aggregation.newAggregation(TestArrayDocument.class,Aggregation\n            .project()\n            .andExclude(&quot;_id&quot;)\n            .andExpression(&quot;first(x)&quot;).as(&quot;object&quot;));\n\n    List&lt;Map&gt; mapData=  mongoTemplate\n            .aggregate(aggregation,Map.class)\n            .getMappedResults();\n</code></pre>\n<p>x is your $object.array.</p>\n<p>return in LinkedHashMap &quot;object&quot;=&gt;&quot;firstElement&quot;.</p>\n"}],"owner":{"account_id":20017385,"reputation":122,"user_id":14673069,"display_name":"wtyork"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":864,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71479911,"answer_count":1,"score":0,"last_activity_date":1647336921,"creation_date":1647333353,"question_id":71479175,"body_markdown":"I have a JavaScript code.\r\n\r\n    db.xxx.aggregate([\r\n        {$project: {object:{$first:&#39;$object.array&#39;}, _id:0}}\r\n    ])\r\n\r\nI don&#39;t know how to overwrite it by java client.\r\n\r\n    import org.springframework.data.mongodb.core.MongoTemplate;\r\n    ...\r\n    Aggregation.newAggregation(\r\n        Aggregation.project().andExclude(&quot;_id&quot;).???\r\n    )\r\n\r\nAnd where to find the usage?","title":"Get the first element from an array with mongodb java client","body":"<p>I have a JavaScript code.</p>\n<pre><code>db.xxx.aggregate([\n    {$project: {object:{$first:'$object.array'}, _id:0}}\n])\n</code></pre>\n<p>I don't know how to overwrite it by java client.</p>\n<pre><code>import org.springframework.data.mongodb.core.MongoTemplate;\n...\nAggregation.newAggregation(\n    Aggregation.project().andExclude(&quot;_id&quot;).???\n)\n</code></pre>\n<p>And where to find the usage?</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1647282020,"post_id":71469661,"comment_id":126327429,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":15006627,"reputation":11,"user_id":10832500,"display_name":"Thanos Tsounis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1647336728,"creation_date":1647269302,"question_id":71469661,"body_markdown":"I am trying to serialise an object by converting it first to another object. At the same time I do not want to serialise twice the same object so I am using @JsonIdentityReference to serialise it only the first time. However since the converter will always create a new output object for the same input object the entire object is serialised every time. Is there a way to avoid serialising twice the same object while at the same time using a converter?\r\n## The Domain class ##\r\n```java\r\n@JsonSerialize(converter = BooleanWithNameConverter.class)\r\n@JsonDeserialize(converter = BooleanWithNameDtoConverter.class)\r\npublic class BooleanWithName {\r\n\r\n    private final boolean value;\r\n    private final String name;\r\n    \r\n    BooleanWithName(String name, boolean value) {\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public boolean getValue() {\r\n        return value;\r\n    }\r\n}\r\n```\r\n## The DTO ##\r\n```java\r\n@JsonIdentityInfo(generator = ObjectIdGenerators.UUIDGenerator.class)\r\npublic class BooleanWithNameDto {\r\n\r\n    private final boolean value;\r\n    private final String name;\r\n    \r\n    @JsonCreator\r\n    BooleanWithNameDto(@JsonProperty(&quot;name&quot;) String name, @JsonProperty(&quot;value&quot;) boolean value) {\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public boolean getValue() {\r\n        return value;\r\n    }\r\n}\r\n```\r\n## The converter to the DTO ##\r\n```java\r\npublic class BooleanWithNameConverter extends StdConverter&lt;BooleanWithName, BooleanWithNameDto&gt; {\r\n\r\n    @Override\r\n    public BooleanWithNameDto convert(BooleanWithName obj) {\r\n        return new BooleanWithNameDto(obj.getName(), obj.getValue());\r\n    }\r\n}\r\n```\r\n## The converter back to the domain object ##\r\nThis is not strictly needed since the problem can be seen just by examining the json string but helpful in order to add a small unit test demonstrating the problem\r\n```java\r\npublic class BooleanWithNameDtoConverter extends StdConverter&lt;BooleanWithNameDto, BooleanWithName&gt; {\r\n\r\n    @Override\r\n    public BooleanWithName convert(BooleanWithNameDto obj) {\r\n        return new BooleanWithName(obj.getName(), obj.getValue());\r\n    }\r\n}\r\n```\r\n## A small unit test that fails ##\r\n```java\r\npublic class UnitTest {\r\n\r\n    @Test\r\n    public void testConverter() throws JsonProcessingException {\r\n        BooleanWithName booleanWithName = new BooleanWithName(&quot;dummy&quot;, true);\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        BooleanWithName[] value = { booleanWithName, booleanWithName };\r\n        BooleanWithName[] readValue = objectMapper.readValue(objectMapper.writeValueAsString(value), BooleanWithName[].class);\r\n        Assertions.assertEquals(readValue[0], readValue[1]);\r\n    }\r\n}\r\n```\r\n\r\nThanks a lot!","title":"Using @JsonIdentityInfo along with @JsonSerialize with a custom converter","body":"<p>I am trying to serialise an object by converting it first to another object. At the same time I do not want to serialise twice the same object so I am using @JsonIdentityReference to serialise it only the first time. However since the converter will always create a new output object for the same input object the entire object is serialised every time. Is there a way to avoid serialising twice the same object while at the same time using a converter?</p>\n<h2>The Domain class</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSerialize(converter = BooleanWithNameConverter.class)\n@JsonDeserialize(converter = BooleanWithNameDtoConverter.class)\npublic class BooleanWithName {\n\n    private final boolean value;\n    private final String name;\n    \n    BooleanWithName(String name, boolean value) {\n        this.name = name;\n        this.value = value;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public boolean getValue() {\n        return value;\n    }\n}\n</code></pre>\n<h2>The DTO</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIdentityInfo(generator = ObjectIdGenerators.UUIDGenerator.class)\npublic class BooleanWithNameDto {\n\n    private final boolean value;\n    private final String name;\n    \n    @JsonCreator\n    BooleanWithNameDto(@JsonProperty(&quot;name&quot;) String name, @JsonProperty(&quot;value&quot;) boolean value) {\n        this.name = name;\n        this.value = value;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public boolean getValue() {\n        return value;\n    }\n}\n</code></pre>\n<h2>The converter to the DTO</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class BooleanWithNameConverter extends StdConverter&lt;BooleanWithName, BooleanWithNameDto&gt; {\n\n    @Override\n    public BooleanWithNameDto convert(BooleanWithName obj) {\n        return new BooleanWithNameDto(obj.getName(), obj.getValue());\n    }\n}\n</code></pre>\n<h2>The converter back to the domain object</h2>\n<p>This is not strictly needed since the problem can be seen just by examining the json string but helpful in order to add a small unit test demonstrating the problem</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BooleanWithNameDtoConverter extends StdConverter&lt;BooleanWithNameDto, BooleanWithName&gt; {\n\n    @Override\n    public BooleanWithName convert(BooleanWithNameDto obj) {\n        return new BooleanWithName(obj.getName(), obj.getValue());\n    }\n}\n</code></pre>\n<h2>A small unit test that fails</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class UnitTest {\n\n    @Test\n    public void testConverter() throws JsonProcessingException {\n        BooleanWithName booleanWithName = new BooleanWithName(&quot;dummy&quot;, true);\n        ObjectMapper objectMapper = new ObjectMapper();\n        BooleanWithName[] value = { booleanWithName, booleanWithName };\n        BooleanWithName[] readValue = objectMapper.readValue(objectMapper.writeValueAsString(value), BooleanWithName[].class);\n        Assertions.assertEquals(readValue[0], readValue[1]);\n    }\n}\n</code></pre>\n<p>Thanks a lot!</p>\n"},{"tags":["java","mysql","jdbc"],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1479143530,"creation_date":1353176335,"answer_id":13433382,"question_id":13433326,"body_markdown":"As described in the [MySQL documentation][1] you need to use `Connection.setCatalog()` to switch to another database. It also explicitly says that you should **not** execute a `USE &lt;databasename&gt;` to switch.\r\n\r\nThe reason for this warning is that JDBC is a generic interface to databases and therefor provides methods for most common tasks, including switching `catalogs` (or `databases` as they are in MySQL). The JDBC specification/javadoc also explicitly says that people should use the API over database specific commands (if both are available). There are several reasons for this: 1) it promotes database-independent code, and 2) the driver might do additional things internally in response to one of the API methods. Using database specific commands might cause the driver to misbehave because its internal state does not match the database state.\r\n\r\nA call to [`setCatalog(String)`][2] will not affect existing statements, as specified in the JDBC API documentation:\r\n\r\n&gt; Calling `setCatalog` has no effect on previously created or prepared `Statement` objects. It is implementation defined whether a DBMS prepare operation takes place immediately when the `Connection` method `prepareStatement` or `prepareCall` is invoked. For maximum portability, `setCatalog` should be called before a `Statement` is created or prepared.\r\n\r\n  [1]: http://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html#setCatalog-java.lang.String-","title":"How to change current database to another?","body":"<p>As described in the <a href=\"http://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html\" rel=\"noreferrer\">MySQL documentation</a> you need to use <code>Connection.setCatalog()</code> to switch to another database. It also explicitly says that you should <strong>not</strong> execute a <code>USE &lt;databasename&gt;</code> to switch.</p>\n\n<p>The reason for this warning is that JDBC is a generic interface to databases and therefor provides methods for most common tasks, including switching <code>catalogs</code> (or <code>databases</code> as they are in MySQL). The JDBC specification/javadoc also explicitly says that people should use the API over database specific commands (if both are available). There are several reasons for this: 1) it promotes database-independent code, and 2) the driver might do additional things internally in response to one of the API methods. Using database specific commands might cause the driver to misbehave because its internal state does not match the database state.</p>\n\n<p>A call to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html#setCatalog-java.lang.String-\" rel=\"noreferrer\"><code>setCatalog(String)</code></a> will not affect existing statements, as specified in the JDBC API documentation:</p>\n\n<blockquote>\n  <p>Calling <code>setCatalog</code> has no effect on previously created or prepared <code>Statement</code> objects. It is implementation defined whether a DBMS prepare operation takes place immediately when the <code>Connection</code> method <code>prepareStatement</code> or <code>prepareCall</code> is invoked. For maximum portability, <code>setCatalog</code> should be called before a <code>Statement</code> is created or prepared.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":371565,"reputation":10918,"user_id":720161,"accept_rate":88,"display_name":"Subin Sebastian"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1426691430,"creation_date":1353176347,"answer_id":13433384,"question_id":13433326,"body_markdown":"You can prefix the database name on your table names like this.\r\n\r\nFor example: `db1 has table1` and `db2 has table2`\r\n\r\n    select * from db1.table1, db2.table2;\r\n\r\nThis will allow you to do cross database queries","title":"How to change current database to another?","body":"<p>You can prefix the database name on your table names like this.</p>\n\n<p>For example: <code>db1 has table1</code> and <code>db2 has table2</code></p>\n\n<pre><code>select * from db1.table1, db2.table2;\n</code></pre>\n\n<p>This will allow you to do cross database queries</p>\n"}],"owner":{"account_id":1512818,"reputation":1873,"user_id":1414499,"accept_rate":89,"display_name":"Krzysztof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21277,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":13433382,"answer_count":2,"score":20,"last_activity_date":1647336496,"creation_date":1353175911,"question_id":13433326,"body_markdown":"I have a Java program connection to a MySQL database, how can I change the current database to a different one on the same connection?\r\n\r\nI connect to MySQL like this:\r\n\r\n    DriverManager.getConnection(&quot;jdbc:mysql://&quot;+server+&quot;/&quot;,log,pass);\r\n\r\nAfter some operations I want to connect to a different mysql database on the same connection.  How can I do that?\r\n\r\nI tried to use:\r\n   \r\n    Statement stat= con.createStatement();\r\n    ResultSet r=stat.executeQuery(&quot;use mysql&quot;); \r\n\r\nBut that does not change the database to be used.  ","title":"How to change current database to another?","body":"<p>I have a Java program connection to a MySQL database, how can I change the current database to a different one on the same connection?</p>\n\n<p>I connect to MySQL like this:</p>\n\n<pre><code>DriverManager.getConnection(\"jdbc:mysql://\"+server+\"/\",log,pass);\n</code></pre>\n\n<p>After some operations I want to connect to a different mysql database on the same connection.  How can I do that?</p>\n\n<p>I tried to use:</p>\n\n<pre><code>Statement stat= con.createStatement();\nResultSet r=stat.executeQuery(\"use mysql\"); \n</code></pre>\n\n<p>But that does not change the database to be used.  </p>\n"},{"tags":["java","android-studio","flask","socket.io"],"comments":[{"owner":{"account_id":5283622,"reputation":2730,"user_id":4218245,"display_name":"gaohomway"},"score":0,"creation_date":1645596882,"post_id":67155099,"comment_id":125910726,"body_markdown":"Did you solve it please?","body":"Did you solve it please?"}],"answers":[{"tags":[],"owner":{"account_id":19549873,"reputation":243,"user_id":14305770,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647336477,"creation_date":1647336477,"answer_id":71479807,"question_id":67155099,"body_markdown":"It&#39;s a bit late but if that can help someone.\r\n\r\nI think you was in polling mode.\r\n\r\nMechanism from the doc :\r\nhttps://socket.io/docs/v3/how-it-works/#upgrade-mechanism\r\n\r\nYou have to set the transport mode : (in Kotlin)\r\n\r\n    val opts = IO.Options()\r\n    opts.transports = arrayOf(WebSocket.NAME)\r\n    socket = IO.socket(&quot;url&quot;, opts)\r\n\r\nWebSocket.NAME mean &quot;websocket&quot;","title":"Android Studio Socket.io disconnecting and reconnecting every few seconds","body":"<p>It's a bit late but if that can help someone.</p>\n<p>I think you was in polling mode.</p>\n<p>Mechanism from the doc :\n<a href=\"https://socket.io/docs/v3/how-it-works/#upgrade-mechanism\" rel=\"nofollow noreferrer\">https://socket.io/docs/v3/how-it-works/#upgrade-mechanism</a></p>\n<p>You have to set the transport mode : (in Kotlin)</p>\n<pre><code>val opts = IO.Options()\nopts.transports = arrayOf(WebSocket.NAME)\nsocket = IO.socket(&quot;url&quot;, opts)\n</code></pre>\n<p>WebSocket.NAME mean &quot;websocket&quot;</p>\n"}],"owner":{"account_id":21312680,"reputation":41,"user_id":15686855,"display_name":"Domenic Salvati"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1179,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1647336477,"creation_date":1618797500,"question_id":67155099,"body_markdown":"I have a setup right now where I am running a flask server that handles websocket communication between and android phone and a raspberry pi node.js socket.io client. The android socket.io can connect to the flask server, the node.js client can connect, and I can emit messages between all 3, however my android studio socket.io client is disconnecting every 5-10 seconds and reconnecting. It continues to do this even when I leave the activity that causes it to connect, it will connect and disconnect from the server continuously. Here is the Java code in android studio:\r\n```\r\nimport io.socket.client.IO;\r\nimport io.socket.client.Socket;\r\nimport io.socket.emitter.Emitter;\r\n\r\n\r\npublic class ControlPage extends AppCompatActivity {\r\n    Button greenButton;\r\n    Button redButton;\r\n    private Socket mSocket; {\r\n        try {\r\n            mSocket = IO.socket(&quot;http://192.168.1.2:5000&quot;);\r\n        } catch (URISyntaxException e) {}\r\n    }\r\n    //private EditText mInputMessageView;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_control_page);\r\n        mSocket.connect();\r\n        mSocket.on(Socket.EVENT_CONNECT, onConnect);\r\n        greenButton = (Button) findViewById(R.id.sendButtonGreen);\r\n        greenButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                attemptSendGreen();\r\n            }\r\n        });\r\n        redButton = (Button) findViewById(R.id.sendButtonRed);\r\n        redButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                attemptSendRed();\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\nServer side in my flask code I have:\r\n```\r\nimport flask\r\nfrom flask_socketio import SocketIO, emit\r\nfrom flask import request\r\nimport json\r\n\r\napp = flask.Flask(__name__)\r\nsocketio = SocketIO(app)\r\nclients = {}\r\nsessions = {}\r\n\r\n@app.route(&#39;/&#39;)\r\ndef hello():\r\n    return &quot;&lt;h1&gt; Hello World! &lt;/h1&gt;&quot;\r\n    \r\n@socketio.on(&#39;connect&#39;)\r\ndef testConnect():\r\n    print(&#39;connected&#39;)\r\n    emit(&#39;connected&#39;)\r\n\r\n    \r\n@socketio.on(&#39;disconnect&#39;)\r\ndef testDisconnect():\r\n    userSID = request.sid\r\n    print(&#39;disconnected &#39; + str(userSID))\r\n    UserID = sessions[str(userSID)][0]\r\n    UserType = sessions[str(userSID)][1]\r\n    clients[UserID][UserType]=&#39;&#39;\r\n    sessions.pop(str(userSID))\r\n        \r\n@socketio.on(&#39;config&#39;)\r\ndef handle_config(data):\r\n    print(&#39;received message: &#39; + str(data)+ str(type(data)))\r\n    userSID = request.sid\r\n    if type(data) == str:\r\n        jsonData = eval(data)\r\n    else:\r\n        jsonData = data\r\n    print(userSID)\r\n    if jsonData[&#39;USER_KEY&#39;] in clients:\r\n        clients[jsonData[&#39;USER_KEY&#39;]][jsonData[&#39;USER_TYPE&#39;]]=userSID\r\n    else:\r\n        clients[jsonData[&#39;USER_KEY&#39;]] = {&#39;USER&#39;:&#39;&#39;,\r\n                                     &#39;HARDWARE&#39;:&#39;&#39;}\r\n        clients[jsonData[&#39;USER_KEY&#39;]][jsonData[&#39;USER_TYPE&#39;]]=userSID\r\n    sessions[str(userSID)] = [jsonData[&#39;USER_KEY&#39;], jsonData[&#39;USER_TYPE&#39;]]\r\n\r\n@socketio.on(&#39;transfer&#39;)\r\ndef transfer(data):\r\n    jsonData = eval(data)\r\n    print(jsonData)\r\n    UserID = jsonData[&#39;USER_KEY&#39;]\r\n    UserType = jsonData[&#39;USER_TYPE&#39;]\r\n    color = jsonData[&#39;MESSAGE&#39;]\r\n    #message = data[&#39;MESSAGE&#39;]\r\n    message = {&#39;COLOR&#39;: color,\r\n               &#39;STATE&#39;: 1\r\n        }\r\n    jsonMessage = json.dumps(message)\r\n    \r\n    if UserType == &#39;USER&#39;:\r\n        transferID = clients[UserID][&#39;HARDWARE&#39;]\r\n    else: \r\n        transferID = clients[UserID][&#39;USER&#39;]\r\n    emit(&#39;serverTransfer&#39;, jsonMessage, to=transferID)\r\n\r\nsocketio.run(app,host=&#39;192.168.1.2&#39;,port=&#39;5000&#39;) #remove this line when using gunicorn deployment\r\n```\r\n\r\nEverything server side is working fine with my node.js client, so I don&#39;t think that the problem is coming from the server.\r\n\r\nThis is the information I get back from my server that shows the android client disconnecting and reconnecting every few seconds:\r\n```\r\nWebSocket transport not available. Install eventlet or gevent and gevent-websocket for improved performance.\r\n * Serving Flask app &quot;websocketTest&quot; (lazy loading)\r\n * Environment: production\r\n   WARNING: This is a development server. Do not use it in a production deployment.\r\n   Use a production WSGI server instead.\r\n * Debug mode: off\r\n * Running on http://192.168.1.2:5000/ (Press CTRL+C to quit)\r\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;GET /socket.io/?EIO=4&amp;transport=polling HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\r\nconnected\r\nreceived message: { &quot;USER_KEY&quot;: &quot;TEST_USER&quot;, &quot;MESSAGE&quot;: &quot;asdfasdfasdf&quot;, &quot;USER_TYPE&quot;:&quot;USER&quot;}&lt;class &#39;str&#39;&gt;\r\n6pKGg55-qcP9rejgAAAB\r\n192.168.1.5 - - [18/Apr/2021 18:15:33] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:33] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\r\ndisconnected6pKGg55-qcP9rejgAAAB\r\n192.168.1.6 - - [18/Apr/2021 18:15:33] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidCS&amp;b64=1 HTTP/1.1&quot; 200 -\r\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidEm&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidEx&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidFW&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidFx&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\nconnected\r\nreceived message: {&#39;USER_KEY&#39;: &#39;TEST_USER&#39;, &#39;USER_TYPE&#39;: &#39;HARDWARE&#39;}&lt;class &#39;dict&#39;&gt;\r\n1nrEBb6Xny3dpELEAAAD\r\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;GET /socket.io/?EIO=4&amp;transport=polling HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\nconnected\r\nreceived message: { &quot;USER_KEY&quot;: &quot;TEST_USER&quot;, &quot;MESSAGE&quot;: &quot;asdfasdfasdf&quot;, &quot;USER_TYPE&quot;:&quot;USER&quot;}&lt;class &#39;str&#39;&gt;\r\n85Gy1EZr-XWm32-6AAAF\r\n192.168.1.5 - - [18/Apr/2021 18:15:39] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\n192.168.1.6 - - [18/Apr/2021 18:15:39] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidFj&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\n{&#39;USER_KEY&#39;: &#39;TEST_USER&#39;, &#39;MESSAGE&#39;: &#39;GREEN&#39;, &#39;USER_TYPE&#39;: &#39;USER&#39;}\r\n192.168.1.6 - - [18/Apr/2021 18:15:40] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdieaT&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:40] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\n{&#39;USER_KEY&#39;: &#39;TEST_USER&#39;, &#39;MESSAGE&#39;: &#39;GREEN&#39;, &#39;USER_TYPE&#39;: &#39;USER&#39;}\r\n192.168.1.5 - - [18/Apr/2021 18:15:41] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\n192.168.1.6 - - [18/Apr/2021 18:15:41] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdiejT&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\n{&#39;USER_KEY&#39;: &#39;TEST_USER&#39;, &#39;MESSAGE&#39;: &#39;RED&#39;, &#39;USER_TYPE&#39;: &#39;USER&#39;}\r\n192.168.1.5 - - [18/Apr/2021 18:15:42] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\n192.168.1.6 - - [18/Apr/2021 18:15:42] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdif2X&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\n{&#39;USER_KEY&#39;: &#39;TEST_USER&#39;, &#39;MESSAGE&#39;: &#39;RED&#39;, &#39;USER_TYPE&#39;: &#39;USER&#39;}\r\n192.168.1.5 - - [18/Apr/2021 18:15:45] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:45] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\r\ndisconnected85Gy1EZr-XWm32-6AAAF\r\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;GET /socket.io/?EIO=4&amp;transport=polling HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\r\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\r\nconnected\r\nreceived message: { &quot;USER_KEY&quot;: &quot;TEST_USER&quot;, &quot;MESSAGE&quot;: &quot;asdfasdfasdf&quot;, &quot;USER_TYPE&quot;:&quot;USER&quot;}&lt;class &#39;str&#39;&gt;\r\nRLGgcjYRr3G8437zAAAH\r\n192.168.1.6 - - [18/Apr/2021 18:15:58] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdifE4&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\r\ndisconnected1nrEBb6Xny3dpELEAAAD\r\n192.168.1.5 - - [18/Apr/2021 18:16:12] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\r\ndisconnectedRLGgcjYRr3G8437zAAAH\r\n```\r\nThe library I&#39;m using to handle my socket.io in Java is imported as:\r\n```\r\n    implementation (&#39;io.socket:socket.io-client:2.0.0&#39;) {\r\n        exclude group: &#39;org.json&#39;, module: &#39;json&#39;\r\n    }\r\n```\r\n\r\nAny insight into what is causing my android client to disconnect would be greatly appreciated.\r\n\r\n**Update:**\r\nThis problem goes away when I run my server in its deployed state in the Nginx, gunicorn, flask stack on port 80. The problem only persists when running flask directly on port 5000.","title":"Android Studio Socket.io disconnecting and reconnecting every few seconds","body":"<p>I have a setup right now where I am running a flask server that handles websocket communication between and android phone and a raspberry pi node.js socket.io client. The android socket.io can connect to the flask server, the node.js client can connect, and I can emit messages between all 3, however my android studio socket.io client is disconnecting every 5-10 seconds and reconnecting. It continues to do this even when I leave the activity that causes it to connect, it will connect and disconnect from the server continuously. Here is the Java code in android studio:</p>\n<pre><code>import io.socket.client.IO;\nimport io.socket.client.Socket;\nimport io.socket.emitter.Emitter;\n\n\npublic class ControlPage extends AppCompatActivity {\n    Button greenButton;\n    Button redButton;\n    private Socket mSocket; {\n        try {\n            mSocket = IO.socket(&quot;http://192.168.1.2:5000&quot;);\n        } catch (URISyntaxException e) {}\n    }\n    //private EditText mInputMessageView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_control_page);\n        mSocket.connect();\n        mSocket.on(Socket.EVENT_CONNECT, onConnect);\n        greenButton = (Button) findViewById(R.id.sendButtonGreen);\n        greenButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                attemptSendGreen();\n            }\n        });\n        redButton = (Button) findViewById(R.id.sendButtonRed);\n        redButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                attemptSendRed();\n            }\n        });\n    }\n</code></pre>\n<p>Server side in my flask code I have:</p>\n<pre><code>import flask\nfrom flask_socketio import SocketIO, emit\nfrom flask import request\nimport json\n\napp = flask.Flask(__name__)\nsocketio = SocketIO(app)\nclients = {}\nsessions = {}\n\n@app.route('/')\ndef hello():\n    return &quot;&lt;h1&gt; Hello World! &lt;/h1&gt;&quot;\n    \n@socketio.on('connect')\ndef testConnect():\n    print('connected')\n    emit('connected')\n\n    \n@socketio.on('disconnect')\ndef testDisconnect():\n    userSID = request.sid\n    print('disconnected ' + str(userSID))\n    UserID = sessions[str(userSID)][0]\n    UserType = sessions[str(userSID)][1]\n    clients[UserID][UserType]=''\n    sessions.pop(str(userSID))\n        \n@socketio.on('config')\ndef handle_config(data):\n    print('received message: ' + str(data)+ str(type(data)))\n    userSID = request.sid\n    if type(data) == str:\n        jsonData = eval(data)\n    else:\n        jsonData = data\n    print(userSID)\n    if jsonData['USER_KEY'] in clients:\n        clients[jsonData['USER_KEY']][jsonData['USER_TYPE']]=userSID\n    else:\n        clients[jsonData['USER_KEY']] = {'USER':'',\n                                     'HARDWARE':''}\n        clients[jsonData['USER_KEY']][jsonData['USER_TYPE']]=userSID\n    sessions[str(userSID)] = [jsonData['USER_KEY'], jsonData['USER_TYPE']]\n\n@socketio.on('transfer')\ndef transfer(data):\n    jsonData = eval(data)\n    print(jsonData)\n    UserID = jsonData['USER_KEY']\n    UserType = jsonData['USER_TYPE']\n    color = jsonData['MESSAGE']\n    #message = data['MESSAGE']\n    message = {'COLOR': color,\n               'STATE': 1\n        }\n    jsonMessage = json.dumps(message)\n    \n    if UserType == 'USER':\n        transferID = clients[UserID]['HARDWARE']\n    else: \n        transferID = clients[UserID]['USER']\n    emit('serverTransfer', jsonMessage, to=transferID)\n\nsocketio.run(app,host='192.168.1.2',port='5000') #remove this line when using gunicorn deployment\n</code></pre>\n<p>Everything server side is working fine with my node.js client, so I don't think that the problem is coming from the server.</p>\n<p>This is the information I get back from my server that shows the android client disconnecting and reconnecting every few seconds:</p>\n<pre><code>WebSocket transport not available. Install eventlet or gevent and gevent-websocket for improved performance.\n * Serving Flask app &quot;websocketTest&quot; (lazy loading)\n * Environment: production\n   WARNING: This is a development server. Do not use it in a production deployment.\n   Use a production WSGI server instead.\n * Debug mode: off\n * Running on http://192.168.1.2:5000/ (Press CTRL+C to quit)\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;GET /socket.io/?EIO=4&amp;transport=polling HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:23] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\nconnected\nreceived message: { &quot;USER_KEY&quot;: &quot;TEST_USER&quot;, &quot;MESSAGE&quot;: &quot;asdfasdfasdf&quot;, &quot;USER_TYPE&quot;:&quot;USER&quot;}&lt;class 'str'&gt;\n6pKGg55-qcP9rejgAAAB\n192.168.1.5 - - [18/Apr/2021 18:15:33] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:33] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=mO35rQ0Mi_5ZxYFXAAAA HTTP/1.1&quot; 200 -\ndisconnected6pKGg55-qcP9rejgAAAB\n192.168.1.6 - - [18/Apr/2021 18:15:33] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidCS&amp;b64=1 HTTP/1.1&quot; 200 -\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidEm&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidEx&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidFW&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\n192.168.1.6 - - [18/Apr/2021 18:15:34] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidFx&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\nconnected\nreceived message: {'USER_KEY': 'TEST_USER', 'USER_TYPE': 'HARDWARE'}&lt;class 'dict'&gt;\n1nrEBb6Xny3dpELEAAAD\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;GET /socket.io/?EIO=4&amp;transport=polling HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:35] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\nconnected\nreceived message: { &quot;USER_KEY&quot;: &quot;TEST_USER&quot;, &quot;MESSAGE&quot;: &quot;asdfasdfasdf&quot;, &quot;USER_TYPE&quot;:&quot;USER&quot;}&lt;class 'str'&gt;\n85Gy1EZr-XWm32-6AAAF\n192.168.1.5 - - [18/Apr/2021 18:15:39] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\n192.168.1.6 - - [18/Apr/2021 18:15:39] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdidFj&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\n{'USER_KEY': 'TEST_USER', 'MESSAGE': 'GREEN', 'USER_TYPE': 'USER'}\n192.168.1.6 - - [18/Apr/2021 18:15:40] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdieaT&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:40] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\n{'USER_KEY': 'TEST_USER', 'MESSAGE': 'GREEN', 'USER_TYPE': 'USER'}\n192.168.1.5 - - [18/Apr/2021 18:15:41] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\n192.168.1.6 - - [18/Apr/2021 18:15:41] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdiejT&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\n{'USER_KEY': 'TEST_USER', 'MESSAGE': 'RED', 'USER_TYPE': 'USER'}\n192.168.1.5 - - [18/Apr/2021 18:15:42] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\n192.168.1.6 - - [18/Apr/2021 18:15:42] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdif2X&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\n{'USER_KEY': 'TEST_USER', 'MESSAGE': 'RED', 'USER_TYPE': 'USER'}\n192.168.1.5 - - [18/Apr/2021 18:15:45] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:45] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Vo6Qo1Suk5U6dnG0AAAE HTTP/1.1&quot; 200 -\ndisconnected85Gy1EZr-XWm32-6AAAF\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;GET /socket.io/?EIO=4&amp;transport=polling HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\n192.168.1.5 - - [18/Apr/2021 18:15:47] &quot;POST /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\nconnected\nreceived message: { &quot;USER_KEY&quot;: &quot;TEST_USER&quot;, &quot;MESSAGE&quot;: &quot;asdfasdfasdf&quot;, &quot;USER_TYPE&quot;:&quot;USER&quot;}&lt;class 'str'&gt;\nRLGgcjYRr3G8437zAAAH\n192.168.1.6 - - [18/Apr/2021 18:15:58] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;t=NZdifE4&amp;b64=1&amp;sid=6pJ6UIkNrvOanjMwAAAC HTTP/1.1&quot; 200 -\ndisconnected1nrEBb6Xny3dpELEAAAD\n192.168.1.5 - - [18/Apr/2021 18:16:12] &quot;GET /socket.io/?EIO=4&amp;transport=polling&amp;sid=Axb2tK8BaYqGqrgGAAAG HTTP/1.1&quot; 200 -\ndisconnectedRLGgcjYRr3G8437zAAAH\n</code></pre>\n<p>The library I'm using to handle my socket.io in Java is imported as:</p>\n<pre><code>    implementation ('io.socket:socket.io-client:2.0.0') {\n        exclude group: 'org.json', module: 'json'\n    }\n</code></pre>\n<p>Any insight into what is causing my android client to disconnect would be greatly appreciated.</p>\n<p><strong>Update:</strong>\nThis problem goes away when I run my server in its deployed state in the Nginx, gunicorn, flask stack on port 80. The problem only persists when running flask directly on port 5000.</p>\n"},{"tags":["java","record"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1646057947,"post_id":71296331,"comment_id":126023790,"body_markdown":"I have a strong preference for using just the null constructor in objects and using setters to avoid situations like this","body":"I have a strong preference for using just the null constructor in objects and using setters to avoid situations like this"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":8,"creation_date":1646058051,"post_id":71296331,"comment_id":126023825,"body_markdown":"@ControlAltDel The question is about records, which are intended to be immutable.","body":"@ControlAltDel The question is about records, which are intended to be immutable."}],"answers":[{"tags":[],"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1646498351,"creation_date":1646058251,"answer_id":71296447,"question_id":71296331,"body_markdown":"An alternative solution is to add a static factory method to your record instead of an additional constructor.\r\n\r\nFor example:\r\n\r\n    public record MyRecord(double a, double b, double c) {\r\n\r\n        public static MyRecord newMyRecord(double a) {\r\n            var b = calculateB(a);\r\n            var c = calculateC(a, b);\r\n            return new MyRecord(a, b, c);\r\n        }\r\n\r\n\r\n        private static double calculateB(double a) {\r\n            // Some calculations \r\n            return b;\r\n\r\n        }\r\n\r\n        private static double calculateC(double a, double b) {\r\n            // Some calculations \r\n            return c;\r\n        }\r\n    }\r\n","title":"Calculate members during construction in records","body":"<p>An alternative solution is to add a static factory method to your record instead of an additional constructor.</p>\n<p>For example:</p>\n<pre><code>public record MyRecord(double a, double b, double c) {\n\n    public static MyRecord newMyRecord(double a) {\n        var b = calculateB(a);\n        var c = calculateC(a, b);\n        return new MyRecord(a, b, c);\n    }\n\n\n    private static double calculateB(double a) {\n        // Some calculations \n        return b;\n\n    }\n\n    private static double calculateC(double a, double b) {\n        // Some calculations \n        return c;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646108897,"creation_date":1646108897,"answer_id":71303731,"question_id":71296331,"body_markdown":"Using a static factory method is a solution but your API starts to get messy. \r\n\r\nIt&#39;s not possible to lessen the default record constructor visibility by design (https://stackoverflow.com/a/67627794/4425643) so using an external factory class would also be messy.\r\n\r\nIn your case it would be best if you used a regular class to gain the option of having multiple independent constructors.","title":"Calculate members during construction in records","body":"<p>Using a static factory method is a solution but your API starts to get messy.</p>\n<p>It's not possible to lessen the default record constructor visibility by design (<a href=\"https://stackoverflow.com/a/67627794/4425643\">https://stackoverflow.com/a/67627794/4425643</a>) so using an external factory class would also be messy.</p>\n<p>In your case it would be best if you used a regular class to gain the option of having multiple independent constructors.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647335747,"creation_date":1647335747,"answer_id":71479654,"question_id":71296331,"body_markdown":"The constructor’s first statement must be a constructor invocation, but it doesn’t have to be the canonical constructor. This allows to construct a chain which ends up at the canonical constructor, but introduce local variables (parameters) in-between to avoid redundant calculations:\r\n\r\n```java\r\npublic record MyRecord(double a, double b, double c) {\r\n     public MyRecord(double a) {\r\n          this(a, calculateB(a));\r\n     }\r\n\r\n     private MyRecord(double a, double b) {\r\n          this(a, b, calculateC(a, b));\r\n     }\r\n\r\n     private static double calculateB(double a) {\r\n          // Some calculations \r\n          return b;\r\n     }\r\n\r\n     private static double calculateC(double a, double b) {\r\n          // Some calculations \r\n          return c;\r\n     }\r\n}\r\n```\r\n\r\nBut using a factory method, like suggested by [this answer] might be preferable. The advantage is that factory method can have a clarifying name. E.g.\r\n\r\n```java\r\npublic static MyRecord fromA(double a) {\r\n…\r\n```\r\n\r\nwhich even allows to have, e.g.\r\n\r\n```java\r\npublic static MyRecord fromB(double b) {\r\n…\r\n```\r\n\r\nin the same class. Overloading constructors, on the other hand, requires more care. It should only be used when it is expected to be obvious to the users of the class which parameters have been omitted and in which way they will be generated from the given values.\r\n\r\n[this answer]: https://stackoverflow.com/a/71296447/2711488\r\n","title":"Calculate members during construction in records","body":"<p>The constructor’s first statement must be a constructor invocation, but it doesn’t have to be the canonical constructor. This allows to construct a chain which ends up at the canonical constructor, but introduce local variables (parameters) in-between to avoid redundant calculations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record MyRecord(double a, double b, double c) {\n     public MyRecord(double a) {\n          this(a, calculateB(a));\n     }\n\n     private MyRecord(double a, double b) {\n          this(a, b, calculateC(a, b));\n     }\n\n     private static double calculateB(double a) {\n          // Some calculations \n          return b;\n     }\n\n     private static double calculateC(double a, double b) {\n          // Some calculations \n          return c;\n     }\n}\n</code></pre>\n<p>But using a factory method, like suggested by <a href=\"https://stackoverflow.com/a/71296447/2711488\">this answer</a> might be preferable. The advantage is that factory method can have a clarifying name. E.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static MyRecord fromA(double a) {\n…\n</code></pre>\n<p>which even allows to have, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static MyRecord fromB(double b) {\n…\n</code></pre>\n<p>in the same class. Overloading constructors, on the other hand, requires more care. It should only be used when it is expected to be obvious to the users of the class which parameters have been omitted and in which way they will be generated from the given values.</p>\n"}],"owner":{"account_id":15845518,"reputation":163,"user_id":11432928,"display_name":"bleuj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1594,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1647335747,"creation_date":1646057649,"question_id":71296331,"body_markdown":"I&#39;ve created a Java [record](http://openjdk.java.net/jeps/395), and would like to have a constructor that takes in a reduced number of arguments compared to the default constructor, and calculate and initialise all members based on the given arguments. \r\n\r\nHowever, I&#39;ve found this difficult to achieve given the first line of the custom constructor must call the default constructor. My current approach is to call my calculation functions as needed, but this results in unnecessary processing.\r\n\r\nSurely there must be a better way to achieve this?\r\n\r\n```\r\npublic record MyRecord(double a, double b, double c) {\r\n     public MyRecord(double a) {\r\n          this(a, calculateB(a), calculateC(a, calculateB(a)));\r\n     }\r\n\r\n     private static double calculateB(double a) {\r\n          // Some calculations \r\n          return b;\r\n\r\n     }\r\n\r\n     private static double calculateC(double a, double b) {\r\n          // Some calculations \r\n          return c;\r\n     }\r\n}\r\n\r\n","title":"Calculate members during construction in records","body":"<p>I've created a Java <a href=\"http://openjdk.java.net/jeps/395\" rel=\"nofollow noreferrer\">record</a>, and would like to have a constructor that takes in a reduced number of arguments compared to the default constructor, and calculate and initialise all members based on the given arguments.</p>\n<p>However, I've found this difficult to achieve given the first line of the custom constructor must call the default constructor. My current approach is to call my calculation functions as needed, but this results in unnecessary processing.</p>\n<p>Surely there must be a better way to achieve this?</p>\n<pre><code>public record MyRecord(double a, double b, double c) {\n     public MyRecord(double a) {\n          this(a, calculateB(a), calculateC(a, calculateB(a)));\n     }\n\n     private static double calculateB(double a) {\n          // Some calculations \n          return b;\n\n     }\n\n     private static double calculateC(double a, double b) {\n          // Some calculations \n          return c;\n     }\n}\n\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":16235438,"reputation":175,"user_id":11723014,"display_name":"TabascoLosco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647335721,"creation_date":1647335721,"answer_id":71479646,"question_id":71479082,"body_markdown":"Create a variable that keeps the last image clicked, create a metohd onClick that takes an Image in input to animate it, check if the last is different from the actual, if yes, stop the animation using lastClicked image and start the anim on the new, something like :\r\n\r\n    ImageView lastImageClicked = null\r\n    \r\n    lion.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // check the condition is any audio is playing already\r\n                check();\r\n                animateImage(lion)\r\n    \r\n            }\r\n        });\r\n          \r\n          .\r\n          .\r\n          .\r\n          .\r\n          .\r\n     private void animateImage(ImageView actualImage){\r\n        if(lastClicked != null &amp;&amp; actualImage == lastClicked)\r\n          //block animation on lastclicked using his id\r\n          .\r\n          .\r\n          .\r\n        //startAnimation on the other image using actualImage id\r\n\r\n        //set the lastClicked Image to actual\r\n        lastClicked = actualImage\r\n    \r\n        \r\n     }\r\n\r\n","title":"I want to stop shake animation after click on another image","body":"<p>Create a variable that keeps the last image clicked, create a metohd onClick that takes an Image in input to animate it, check if the last is different from the actual, if yes, stop the animation using lastClicked image and start the anim on the new, something like :</p>\n<pre><code>ImageView lastImageClicked = null\n\nlion.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // check the condition is any audio is playing already\n            check();\n            animateImage(lion)\n\n        }\n    });\n      \n      .\n      .\n      .\n      .\n      .\n private void animateImage(ImageView actualImage){\n    if(lastClicked != null &amp;&amp; actualImage == lastClicked)\n      //block animation on lastclicked using his id\n      .\n      .\n      .\n    //startAnimation on the other image using actualImage id\n\n    //set the lastClicked Image to actual\n    lastClicked = actualImage\n\n    \n }\n</code></pre>\n"}],"owner":{"account_id":24093135,"reputation":1,"user_id":18066113,"display_name":"Channel one"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647335721,"creation_date":1647332833,"question_id":71479082,"body_markdown":"I want to play animation one by one ,  when i click on any new image the previous image also shake , I want to stop previous image animation immediately click on any new image.\r\n\r\n        public class MainActivity extends AppCompatActivity {\r\n\r\n    ImageView dog, lion, cat, cow, elephant, horse, nextB, backB, settingB;\r\n    MediaPlayer mediaPlayer;\r\n    Animation animShake;\r\n\r\n    // Firebase analyticals\r\n    private FirebaseAnalytics mFirebaseAnalytics;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // Action bar hide\r\n        Objects.requireNonNull(getSupportActionBar()).hide();\r\n\r\n        // Obtain the FirebaseAnalytics instance.\r\n        mFirebaseAnalytics = FirebaseAnalytics.getInstance(this);\r\n\r\n        // find ids of items\r\n        findId();\r\n\r\n        // on click\r\n        onClick();\r\n\r\n        // Animation of shake of items when click\r\n        animShake = AnimationUtils.loadAnimation(this, R.anim.shake);\r\n\r\n\r\n    }\r\n\r\n\r\n    private void onClick() {\r\n\r\n        // lion click\r\n        lion.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // check the condition is any audio is playing already\r\n                check();\r\n\r\n                lion.startAnimation(animShake);\r\n                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.lion);\r\n                mediaPlayer.start();\r\n\r\n            }\r\n        });\r\n\r\n        // cow click\r\n        cow.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // check the condition is any audio is playing already\r\n                check();\r\n                cow.startAnimation(animShake);\r\n                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.cow);\r\n                mediaPlayer.start();\r\n\r\n            }\r\n        });\r\n\r\n        // cat click\r\n        cat.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // check the condition is any audio is playing already\r\n                check();\r\n                cat.startAnimation(animShake);\r\n                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.cat);\r\n                mediaPlayer.start();\r\n            }\r\n        });\r\n\r\n        // dog click\r\n        dog.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // check the condition is any audio is playing already\r\n                check();\r\n                dog.startAnimation(animShake);\r\n                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.dog);\r\n                mediaPlayer.start();\r\n            }\r\n        });\r\n\r\n        // elephant click\r\n        elephant.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // check the condition is any audio is playing already\r\n                check();\r\n                elephant.startAnimation(animShake);\r\n                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.elephant);\r\n                mediaPlayer.start();\r\n            }\r\n        });\r\n\r\n        // horse click\r\n        horse.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // check the condition is any audio is playing already\r\n                check();\r\n\r\n                horse.startAnimation(animShake);\r\n                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.horse);\r\n                mediaPlayer.start();\r\n            }\r\n        });\r\n\r\n\r\n        settingB.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(MainActivity.this, SettingActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    // check is audio is playing already\r\n    public void check() {\r\n\r\n        if (mediaPlayer != null &amp;&amp; mediaPlayer.isPlaying()) {\r\n            mediaPlayer.reset();\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // find all ids here\r\n    private void findId() {\r\n        dog = findViewById(R.id.dogImg);\r\n        cat = findViewById(R.id.catImg);\r\n        cow = findViewById(R.id.cowImg);\r\n        lion = findViewById(R.id.lionImg);\r\n        elephant = findViewById(R.id.elephantImg);\r\n        horse = findViewById(R.id.horseImg);\r\n        nextB = findViewById(R.id.next_btn);\r\n        nextB.setVisibility(View.INVISIBLE);\r\n        backB = findViewById(R.id.back_btn);\r\n        backB.setVisibility(View.GONE);\r\n        settingB = findViewById(R.id.setting);\r\n    }\r\n\r\n\r\nWhen I click any new Image the previous image is also shake , how i stop it and shake image one at a time .  I tried many ways but i cannot find the solution , can any one help me.","title":"I want to stop shake animation after click on another image","body":"<p>I want to play animation one by one ,  when i click on any new image the previous image also shake , I want to stop previous image animation immediately click on any new image.</p>\n<pre><code>    public class MainActivity extends AppCompatActivity {\n\nImageView dog, lion, cat, cow, elephant, horse, nextB, backB, settingB;\nMediaPlayer mediaPlayer;\nAnimation animShake;\n\n// Firebase analyticals\nprivate FirebaseAnalytics mFirebaseAnalytics;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    // Action bar hide\n    Objects.requireNonNull(getSupportActionBar()).hide();\n\n    // Obtain the FirebaseAnalytics instance.\n    mFirebaseAnalytics = FirebaseAnalytics.getInstance(this);\n\n    // find ids of items\n    findId();\n\n    // on click\n    onClick();\n\n    // Animation of shake of items when click\n    animShake = AnimationUtils.loadAnimation(this, R.anim.shake);\n\n\n}\n\n\nprivate void onClick() {\n\n    // lion click\n    lion.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // check the condition is any audio is playing already\n            check();\n\n            lion.startAnimation(animShake);\n            mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.lion);\n            mediaPlayer.start();\n\n        }\n    });\n\n    // cow click\n    cow.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // check the condition is any audio is playing already\n            check();\n            cow.startAnimation(animShake);\n            mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.cow);\n            mediaPlayer.start();\n\n        }\n    });\n\n    // cat click\n    cat.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // check the condition is any audio is playing already\n            check();\n            cat.startAnimation(animShake);\n            mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.cat);\n            mediaPlayer.start();\n        }\n    });\n\n    // dog click\n    dog.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // check the condition is any audio is playing already\n            check();\n            dog.startAnimation(animShake);\n            mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.dog);\n            mediaPlayer.start();\n        }\n    });\n\n    // elephant click\n    elephant.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // check the condition is any audio is playing already\n            check();\n            elephant.startAnimation(animShake);\n            mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.elephant);\n            mediaPlayer.start();\n        }\n    });\n\n    // horse click\n    horse.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            // check the condition is any audio is playing already\n            check();\n\n            horse.startAnimation(animShake);\n            mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.horse);\n            mediaPlayer.start();\n        }\n    });\n\n\n    settingB.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            Intent intent = new Intent(MainActivity.this, SettingActivity.class);\n            startActivity(intent);\n        }\n    });\n\n\n}\n\n\n\n// check is audio is playing already\npublic void check() {\n\n    if (mediaPlayer != null &amp;&amp; mediaPlayer.isPlaying()) {\n        mediaPlayer.reset();\n\n    }\n}\n\n\n\n// find all ids here\nprivate void findId() {\n    dog = findViewById(R.id.dogImg);\n    cat = findViewById(R.id.catImg);\n    cow = findViewById(R.id.cowImg);\n    lion = findViewById(R.id.lionImg);\n    elephant = findViewById(R.id.elephantImg);\n    horse = findViewById(R.id.horseImg);\n    nextB = findViewById(R.id.next_btn);\n    nextB.setVisibility(View.INVISIBLE);\n    backB = findViewById(R.id.back_btn);\n    backB.setVisibility(View.GONE);\n    settingB = findViewById(R.id.setting);\n}\n</code></pre>\n<p>When I click any new Image the previous image is also shake , how i stop it and shake image one at a time .  I tried many ways but i cannot find the solution , can any one help me.</p>\n"},{"tags":["java","maven","aem","slf4j","sling"],"comments":[{"owner":{"account_id":2185890,"reputation":2302,"user_id":1934317,"display_name":"awd"},"score":1,"creation_date":1633704880,"post_id":69478997,"comment_id":122838747,"body_markdown":"it might help to upgrade your test dependencies (junit, sling-mock, aem-mock etc) to the versions in line with the fresh project from archetype that is not having this issue.","body":"it might help to upgrade your test dependencies (junit, sling-mock, aem-mock etc) to the versions in line with the fresh project from archetype that is not having this issue."},{"owner":{"account_id":70798,"reputation":2030,"user_id":204968,"display_name":"ronnyfm"},"score":0,"creation_date":1635520163,"post_id":69478997,"comment_id":123328590,"body_markdown":"Did you find a solution?","body":"Did you find a solution?"},{"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"score":0,"creation_date":1635837450,"post_id":69478997,"comment_id":123392284,"body_markdown":"@ronnyfm nope, sorry. Parked this for a while due to higher priorities and haven&#39;t had time to revisit.","body":"@ronnyfm nope, sorry. Parked this for a while due to higher priorities and haven&#39;t had time to revisit."}],"answers":[{"tags":[],"owner":{"account_id":5021414,"reputation":21,"user_id":4034811,"display_name":"lnhh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647335664,"creation_date":1647335664,"answer_id":71479633,"question_id":69478997,"body_markdown":"Adding the following dependency fixed the issue for us.\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.wcm&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;io.wcm.testing.logging.logback&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Unit test log level changes to DEBUG after updating dependencies between AEM 6.4 to 6.5","body":"<p>Adding the following dependency fixed the issue for us.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.wcm&lt;/groupId&gt;\n    &lt;artifactId&gt;io.wcm.testing.logging.logback&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":505,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647335664,"creation_date":1633600060,"question_id":69478997,"body_markdown":"I have a project generated a couple of years ago, based on the AEM Project Archetype, that is currently using AEM 6.4 and getting upgraded to AEM 6.5.\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.adobe.aem&lt;/groupId&gt;\r\n    &lt;artifactId&gt;uber-jar&lt;/artifactId&gt;\r\n    &lt;version&gt;6.5.10&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAfter upgrading the AEM uber jar dependency from 6.4.8.2 to 6.5.10, we started seeing lots of DEBUG level messages printed in the console while tests, specifically ones based on the *Sling Testing* library, are executed. Apparently, all of them pertain to registering adapters for the purpose of mocking Sling.\r\n\r\n```\r\n14:36:32.141 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.example.XXXXXXX]\r\n14:36:32.146 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\r\n14:36:32.151 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.adobe.acs.commons.workflow.bulk.execution.model.Config]\r\n14:36:32.155 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest, org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\r\n14:36:32.158 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest, org.apache.sling.api.resource.Resource] and adapters : [com.adobe.cq.wcm.core.components.models.form.Button, com.adobe.cq.export.json.ComponentExporter]\r\n14:36:32.159 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\r\n14:36:32.160 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.adobe.acs.commons.reports.models.QueryReportConfig]\r\n14:36:32.161 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource, org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.example.XXXXXXX]\r\n14:36:32.165 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.adobe.cq.wcm.core.components.models.form.Text, com.adobe.cq.export.json.ComponentExporter]\r\n14:36:32.165 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\r\n14:36:32.167 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest, org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\r\n14:36:32.168 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.adobe.cq.wcm.core.components.models.form.Field, com.adobe.cq.export.json.ComponentExporter]\r\n... and it goes on\r\n```\r\n\r\nAt first, I thought this was happening because of a [new SLF4J binding appearing on the classpath](http://www.slf4j.org/codes.html#multiple_bindings). The output does mention this being a problem.\r\n\r\n```\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/Users/foo/.m2/repository/com/adobe/aem/uber-jar/6.5.10/uber-jar-6.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/Users/foo/.m2/repository/org/slf4j/slf4j-simple/1.7.25/slf4j-simple-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/Users/foo/.m2/repository/uk/org/lidalia/slf4j-test/1.0.1/slf4j-test-1.0.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\r\n```\r\n\r\nHowever, I&#39;ve managed to get this warning to disappear by excluding different versions of SLF4J in the pom, and the DEBUG-level logging is still there.\r\n\r\nI&#39;ve also generated a fresh AEM 6.5 project [based on the Archetype](https://github.com/adobe/aem-project-archetype) and I can&#39;t reproduce the issue, despite multiple bindings being found.\r\n\r\n```\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/home/foo/.m2/repository/uk/org/lidalia/slf4j-test/1.0.1/slf4j-test-1.0.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/home/foo/.m2/repository/com/adobe/aem/uber-jar/6.5.10/uber-jar-6.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual binding is of type [uk.org.lidalia.slf4jtest.TestLoggerFactory]\r\n```\r\n\r\nOne thing I&#39;ve noticed is that as soon as I use the 6.5 jar, the type of the binding actually used becomes different. In the fresh new project, it&#39;s `uk.org.lidalia.slf4jtest.TestLoggerFactory` and in my actual project, it&#39;s `ch.qos.logback.classic.util.ContextSelectorStaticBinder`, which does appear to be coming from the Uber Jar (I can see the class inside it)\r\n\r\n[![inspecting the uber jar in IntelliJ, showing the ContextSeletorStaticBinder class included][1]][1]\r\n\r\nThis class seems to be just added to the archive, rather than as a transitive dependency so I can&#39;t find a way to exclude it.\r\n\r\nChanging the Uber Jar version back from 6.5.10 to 6.4.8.4, with no other changes to the codebase or dependencies, causes the unit tests to stop printing these DEBUG level messages.\r\n\r\nI&#39;ve tried adding https://wcm.io/testing/logging/logback/ and https://github.com/apache/sling-org-apache-sling-testing-logging-mock as dependencies but this also doesn&#39;t seem to help.\r\n\r\nWhat controls this log level and how does changing the uber-jar alter it?\r\n\r\n  [1]: https://i.stack.imgur.com/NnADu.png","title":"Unit test log level changes to DEBUG after updating dependencies between AEM 6.4 to 6.5","body":"<p>I have a project generated a couple of years ago, based on the AEM Project Archetype, that is currently using AEM 6.4 and getting upgraded to AEM 6.5.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.adobe.aem&lt;/groupId&gt;\n    &lt;artifactId&gt;uber-jar&lt;/artifactId&gt;\n    &lt;version&gt;6.5.10&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After upgrading the AEM uber jar dependency from 6.4.8.2 to 6.5.10, we started seeing lots of DEBUG level messages printed in the console while tests, specifically ones based on the <em>Sling Testing</em> library, are executed. Apparently, all of them pertain to registering adapters for the purpose of mocking Sling.</p>\n<pre><code>14:36:32.141 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.example.XXXXXXX]\n14:36:32.146 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\n14:36:32.151 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.adobe.acs.commons.workflow.bulk.execution.model.Config]\n14:36:32.155 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest, org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\n14:36:32.158 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest, org.apache.sling.api.resource.Resource] and adapters : [com.adobe.cq.wcm.core.components.models.form.Button, com.adobe.cq.export.json.ComponentExporter]\n14:36:32.159 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\n14:36:32.160 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.adobe.acs.commons.reports.models.QueryReportConfig]\n14:36:32.161 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource, org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.example.XXXXXXX]\n14:36:32.165 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.adobe.cq.wcm.core.components.models.form.Text, com.adobe.cq.export.json.ComponentExporter]\n14:36:32.165 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\n14:36:32.167 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest, org.apache.sling.api.resource.Resource] and adapters : [com.example.XXXXXXX]\n14:36:32.168 [main] DEBUG org.apache.sling.testing.mock.sling.MockAdapterManagerImpl - Registered service org.apache.sling.adapter.Adaption with adaptables : [org.apache.sling.api.SlingHttpServletRequest] and adapters : [com.adobe.cq.wcm.core.components.models.form.Field, com.adobe.cq.export.json.ComponentExporter]\n... and it goes on\n</code></pre>\n<p>At first, I thought this was happening because of a <a href=\"http://www.slf4j.org/codes.html#multiple_bindings\" rel=\"nofollow noreferrer\">new SLF4J binding appearing on the classpath</a>. The output does mention this being a problem.</p>\n<pre><code>SLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/Users/foo/.m2/repository/com/adobe/aem/uber-jar/6.5.10/uber-jar-6.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/Users/foo/.m2/repository/org/slf4j/slf4j-simple/1.7.25/slf4j-simple-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/Users/foo/.m2/repository/uk/org/lidalia/slf4j-test/1.0.1/slf4j-test-1.0.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\n</code></pre>\n<p>However, I've managed to get this warning to disappear by excluding different versions of SLF4J in the pom, and the DEBUG-level logging is still there.</p>\n<p>I've also generated a fresh AEM 6.5 project <a href=\"https://github.com/adobe/aem-project-archetype\" rel=\"nofollow noreferrer\">based on the Archetype</a> and I can't reproduce the issue, despite multiple bindings being found.</p>\n<pre><code>SLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/home/foo/.m2/repository/uk/org/lidalia/slf4j-test/1.0.1/slf4j-test-1.0.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/home/foo/.m2/repository/com/adobe/aem/uber-jar/6.5.10/uber-jar-6.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [uk.org.lidalia.slf4jtest.TestLoggerFactory]\n</code></pre>\n<p>One thing I've noticed is that as soon as I use the 6.5 jar, the type of the binding actually used becomes different. In the fresh new project, it's <code>uk.org.lidalia.slf4jtest.TestLoggerFactory</code> and in my actual project, it's <code>ch.qos.logback.classic.util.ContextSelectorStaticBinder</code>, which does appear to be coming from the Uber Jar (I can see the class inside it)</p>\n<p><a href=\"https://i.stack.imgur.com/NnADu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NnADu.png\" alt=\"inspecting the uber jar in IntelliJ, showing the ContextSeletorStaticBinder class included\" /></a></p>\n<p>This class seems to be just added to the archive, rather than as a transitive dependency so I can't find a way to exclude it.</p>\n<p>Changing the Uber Jar version back from 6.5.10 to 6.4.8.4, with no other changes to the codebase or dependencies, causes the unit tests to stop printing these DEBUG level messages.</p>\n<p>I've tried adding <a href=\"https://wcm.io/testing/logging/logback/\" rel=\"nofollow noreferrer\">https://wcm.io/testing/logging/logback/</a> and <a href=\"https://github.com/apache/sling-org-apache-sling-testing-logging-mock\" rel=\"nofollow noreferrer\">https://github.com/apache/sling-org-apache-sling-testing-logging-mock</a> as dependencies but this also doesn't seem to help.</p>\n<p>What controls this log level and how does changing the uber-jar alter it?</p>\n"},{"tags":["java"],"owner":{"account_id":24554875,"reputation":21,"user_id":18463600,"display_name":"Gulzar Ahmad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1647335525,"creation_date":1647335525,"question_id":71479597,"body_markdown":"I have an RV inside an alertdialog. Adapter for the RV extends PagingDataAdapter with DiffUtil.ItemCallback.\r\n\r\nThe problem is, the list is updated and submitted to the adapter with the new data and but the list item view is not updating based on new data provided as shown below. I&#39;m using data/view binding for updating the list item view.\r\n\r\nThe RV sometimes updates the item view when being scrolled.","title":"PagingDataAdapter item ui is not updating while submitting new data in paging 3","body":"<p>I have an RV inside an alertdialog. Adapter for the RV extends PagingDataAdapter with DiffUtil.ItemCallback.</p>\n<p>The problem is, the list is updated and submitted to the adapter with the new data and but the list item view is not updating based on new data provided as shown below. I'm using data/view binding for updating the list item view.</p>\n<p>The RV sometimes updates the item view when being scrolled.</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1647279058,"post_id":71471026,"comment_id":126326411,"body_markdown":"When you save changes as an incremental update, everything previously in the document remains in there, it merely probably gets hidden. Thus, it is clear that &quot;the document still seem to contain the deleted widget&quot;. You might want to explain more exactly what you mean here, maybe it&#39;s not as well hidden as you hoped for?","body":"When you save changes as an incremental update, everything previously in the document remains in there, it merely probably gets hidden. Thus, it is clear that &quot;the document still seem to contain the deleted widget&quot;. You might want to explain more exactly what you mean here, maybe it&#39;s not as well hidden as you hoped for?"},{"owner":{"account_id":21417409,"reputation":95,"user_id":15776425,"display_name":"Valentin Leblanc"},"score":0,"creation_date":1647280837,"post_id":71471026,"comment_id":126327028,"body_markdown":"Thank you for the answer. I edited the post so that you can understand what is my problem when I say the annotations are not deleted.","body":"Thank you for the answer. I edited the post so that you can understand what is my problem when I say the annotations are not deleted."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1647295782,"post_id":71471026,"comment_id":126331561,"body_markdown":"I don&#39;t see your code as a whole. I assume, though, that you did not `setNeedToBeUpdated(true)` to all necessary objects. In pre-3.0 PDFBox versions a whole path of objects from the catalog to the actually changed objects needs to be marked `setNeedToBeUpdated(true)`, in case of page objects, therefore, in particular a whole path through the page tree to the page in question. Also, if the annotations array is indirect, that object also must be marked...","body":"I don&#39;t see your code as a whole. I assume, though, that you did not <code>setNeedToBeUpdated(true)</code> to all necessary objects. In pre-3.0 PDFBox versions a whole path of objects from the catalog to the actually changed objects needs to be marked <code>setNeedToBeUpdated(true)</code>, in case of page objects, therefore, in particular a whole path through the page tree to the page in question. Also, if the annotations array is indirect, that object also must be marked..."}],"answers":[{"tags":[],"owner":{"account_id":21417409,"reputation":95,"user_id":15776425,"display_name":"Valentin Leblanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647335440,"creation_date":1647335440,"answer_id":71479581,"question_id":71471026,"body_markdown":"Thank you for the replies. I managed to solve my problem, as mkl said, I needed to create a path of changed objects.\r\n\r\nThis is what I did :\r\n\r\n\t\t\tCOSDictionary dictionary = document.getDocumentCatalog().getCOSObject();\r\n\t\t\tdictionary.setNeedToBeUpdated(true);\r\n\t\t\tdictionary = (COSDictionary) dictionary.getDictionaryObject(COSName.ACRO_FORM);\r\n\t\t\tdictionary.setNeedToBeUpdated(true);\r\n\t\t\tCOSArray array = (COSArray) dictionary.getDictionaryObject(COSName.FIELDS);\r\n\t\t\tarray.setNeedToBeUpdated(true);\r\n\r\n            // for each changed page\r\n            COSDictionary item = page.getCOSObject();\r\n\t                \r\n\t        while (item.containsKey(COSName.PARENT)) {\r\n\t    \t\tCOSBase parent = item.getDictionaryObject(COSName.PARENT);\r\n\t    \t\tif (parent instanceof COSDictionary) {\r\n\t    \t\t\titem = (COSDictionary) parent;\r\n\t    \t\t\titem.setNeedToBeUpdated(true);\r\n\t    \t\t}\r\n\t    \t}\r\n\t                \r\n\t        page.getCOSObject().setNeedToBeUpdated(true);\r\n","title":"java PDFBox : remove Signature field and widget","body":"<p>Thank you for the replies. I managed to solve my problem, as mkl said, I needed to create a path of changed objects.</p>\n<p>This is what I did :</p>\n<pre><code>        COSDictionary dictionary = document.getDocumentCatalog().getCOSObject();\n        dictionary.setNeedToBeUpdated(true);\n        dictionary = (COSDictionary) dictionary.getDictionaryObject(COSName.ACRO_FORM);\n        dictionary.setNeedToBeUpdated(true);\n        COSArray array = (COSArray) dictionary.getDictionaryObject(COSName.FIELDS);\n        array.setNeedToBeUpdated(true);\n\n        // for each changed page\n        COSDictionary item = page.getCOSObject();\n                \n        while (item.containsKey(COSName.PARENT)) {\n            COSBase parent = item.getDictionaryObject(COSName.PARENT);\n            if (parent instanceof COSDictionary) {\n                item = (COSDictionary) parent;\n                item.setNeedToBeUpdated(true);\n            }\n        }\n                \n        page.getCOSObject().setNeedToBeUpdated(true);\n</code></pre>\n"}],"owner":{"account_id":21417409,"reputation":95,"user_id":15776425,"display_name":"Valentin Leblanc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":953,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71479581,"answer_count":1,"score":-1,"last_activity_date":1647335440,"creation_date":1647274888,"question_id":71471026,"body_markdown":"I am trying to remove an existing signature field (PDSignatureField) from a PDF document and its associated widget (PDAnnotationWidget)\r\n\r\nI am using the code provided by the following answer :\r\n\r\nhttps://stackoverflow.com/questions/47190189/does-pdfbox-allow-to-remove-one-field-from-acroform\r\n\r\nI am actually able to retrieve both of the field and the associated widget, and I remove them from the PDDocument (remove the field from AcroForm, remove the widget from page annotations)\r\n\r\nAs my process needs to use the incremental save, I update the acroFrom and the page COSObjects as follow : \r\n\r\n```acroForm.getCOSObject().setNeedToBeUpdated(true);```\r\n\r\n```page.getCOSObject().setNeedToBeUpdated(true);```\r\n\r\nBut after saving it, the document still seem to contain the deleted widget... Even though the field seems to be deleted. Can anybody help me out on this ? Is it a good way to do it ?\r\n\r\nEDIT :\r\n\r\nThis is my problem :\r\n\r\n    try (PDDocument document = PDDocument.load(file)) {\r\n\t\t\tfor (int i = 0; i &lt; document.getNumberOfPages(); i++) {\r\n\t\t\t\tList&lt;PDAnnotation&gt; annotations = document.getPage(i).getAnnotations();\r\n       }\r\n    }\r\n\r\nHere, the &quot;annotations&quot; list returns a not empty set, although I did remove the annotations before the incremental save.\r\n\r\n\r\nThank you","title":"java PDFBox : remove Signature field and widget","body":"<p>I am trying to remove an existing signature field (PDSignatureField) from a PDF document and its associated widget (PDAnnotationWidget)</p>\n<p>I am using the code provided by the following answer :</p>\n<p><a href=\"https://stackoverflow.com/questions/47190189/does-pdfbox-allow-to-remove-one-field-from-acroform\">Does PDFBox allow to remove one field from AcroForm?</a></p>\n<p>I am actually able to retrieve both of the field and the associated widget, and I remove them from the PDDocument (remove the field from AcroForm, remove the widget from page annotations)</p>\n<p>As my process needs to use the incremental save, I update the acroFrom and the page COSObjects as follow :</p>\n<p><code>acroForm.getCOSObject().setNeedToBeUpdated(true);</code></p>\n<p><code>page.getCOSObject().setNeedToBeUpdated(true);</code></p>\n<p>But after saving it, the document still seem to contain the deleted widget... Even though the field seems to be deleted. Can anybody help me out on this ? Is it a good way to do it ?</p>\n<p>EDIT :</p>\n<p>This is my problem :</p>\n<pre><code>try (PDDocument document = PDDocument.load(file)) {\n        for (int i = 0; i &lt; document.getNumberOfPages(); i++) {\n            List&lt;PDAnnotation&gt; annotations = document.getPage(i).getAnnotations();\n   }\n}\n</code></pre>\n<p>Here, the &quot;annotations&quot; list returns a not empty set, although I did remove the annotations before the incremental save.</p>\n<p>Thank you</p>\n"},{"tags":["java","concurrency","buffer","aeron"],"answers":[{"tags":[],"owner":{"account_id":2764670,"reputation":1236,"user_id":2380737,"display_name":"Michael Szymczak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647286161,"creation_date":1647286161,"answer_id":71473243,"question_id":71473118,"body_markdown":"From the description of the problem, you should benefit from using https://github.com/real-logic/agrona/blob/master/agrona/src/main/java/org/agrona/concurrent/ringbuffer/ManyToOneRingBuffer.java and then implement the MessageHandler that makes use of `io.aeron.ExclusivePublication#offer`.","title":"Aeron publication side concurrency issue on singleton request buffer","body":"<p>From the description of the problem, you should benefit from using <a href=\"https://github.com/real-logic/agrona/blob/master/agrona/src/main/java/org/agrona/concurrent/ringbuffer/ManyToOneRingBuffer.java\" rel=\"nofollow noreferrer\">https://github.com/real-logic/agrona/blob/master/agrona/src/main/java/org/agrona/concurrent/ringbuffer/ManyToOneRingBuffer.java</a> and then implement the MessageHandler that makes use of <code>io.aeron.ExclusivePublication#offer</code>.</p>\n"},{"tags":[],"owner":{"account_id":19493182,"reputation":116,"user_id":14261005,"display_name":"Dmitry Vyazelenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647287264,"creation_date":1647287264,"answer_id":71473433,"question_id":71473118,"body_markdown":"It depends on how the `Publication` is being created, i.e. the `io.aeron.Aeron#addPublication` returns an instance of the `ConcurrentPublication` class which as the name suggest can be used by multiple threads concurrently. The `io.aeron.Aeron#addExclusivePublication` on the other hand returns an `ExclusivePublication` instance which can only be used by a single thread.\r\n\r\n@mohamadreza: Why would you use a single shared expandable array buffer?","title":"Aeron publication side concurrency issue on singleton request buffer","body":"<p>It depends on how the <code>Publication</code> is being created, i.e. the <code>io.aeron.Aeron#addPublication</code> returns an instance of the <code>ConcurrentPublication</code> class which as the name suggest can be used by multiple threads concurrently. The <code>io.aeron.Aeron#addExclusivePublication</code> on the other hand returns an <code>ExclusivePublication</code> instance which can only be used by a single thread.</p>\n<p>@mohamadreza: Why would you use a single shared expandable array buffer?</p>\n"},{"tags":[],"owner":{"account_id":1378935,"reputation":1741,"user_id":2164736,"display_name":"Martin Thompson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1647335200,"creation_date":1647335200,"answer_id":71479524,"question_id":71473118,"body_markdown":"I&#39;m assuming you are using a concurrent `Publication` and that is not the issue you have with concurrent access. The issue seems to be a shared buffer for the offer. To publish concurrently you can have thread local buffers to construct your messages within, or you can use `Publication.tryClaim` if the message length is less than MTU and construct the message using a thread local `BufferClaim` instance.","title":"Aeron publication side concurrency issue on singleton request buffer","body":"<p>I'm assuming you are using a concurrent <code>Publication</code> and that is not the issue you have with concurrent access. The issue seems to be a shared buffer for the offer. To publish concurrently you can have thread local buffers to construct your messages within, or you can use <code>Publication.tryClaim</code> if the message length is less than MTU and construct the message using a thread local <code>BufferClaim</code> instance.</p>\n"}],"owner":{"account_id":1811964,"reputation":39,"user_id":1647827,"display_name":"MohamadReza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71479524,"answer_count":3,"score":0,"last_activity_date":1647335200,"creation_date":1647285462,"question_id":71473118,"body_markdown":"is there any best practice to handle concurrency on publish side??\r\nassume that we have a client that wants to handle 1 Million concurrent requests, these requests must send to the Aeron server-side via publication offer. now we have a singleton expandable array buffer that overwrites and is corrupted by concurrency.","title":"Aeron publication side concurrency issue on singleton request buffer","body":"<p>is there any best practice to handle concurrency on publish side??\nassume that we have a client that wants to handle 1 Million concurrent requests, these requests must send to the Aeron server-side via publication offer. now we have a singleton expandable array buffer that overwrites and is corrupted by concurrency.</p>\n"},{"tags":["java","docker","elasticsearch","docker-compose"],"comments":[{"owner":{"account_id":13863020,"reputation":137033,"user_id":10008173,"display_name":"David Maze"},"score":1,"creation_date":1647341487,"post_id":71479522,"comment_id":126341504,"body_markdown":"It seems like adding another `volumes:` line like the ones you already have should do that: Docker will create both the host and container directories if either doesn&#39;t exist.  Have you tried it?  What happens?","body":"It seems like adding another <code>volumes:</code> line like the ones you already have should do that: Docker will create both the host and container directories if either doesn&#39;t exist.  Have you tried it?  What happens?"},{"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"score":0,"creation_date":1647371604,"post_id":71479522,"comment_id":126353217,"body_markdown":"I ve tried  it, it create both if not exist","body":"I ve tried  it, it create both if not exist"}],"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":385,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647335195,"creation_date":1647335195,"question_id":71479522,"body_markdown":"I have the following docker compose file for starting elastic search with kibana:\r\n\r\n    version: &quot;3.5&quot;\r\n    services:\r\n     es-master:\r\n      container_name: es-master\r\n      image: docker.elastic.co/elasticsearch/elasticsearch:7.8.1\r\n      hostname: es-master\r\n      restart: always\r\n      ports:\r\n       - 9201:9201\r\n       - 9301:9301\r\n      environment:\r\n         - ELASTICSEARCH_HOSTS=http://es-master:9201\r\n         - &quot;ES_JAVA_OPTS=-Xms4g -Xmx4g&quot;\r\n         - bootstrap.memory_lock=true \r\n      ulimits:\r\n         memlock:\r\n           soft: -1\r\n           hard: -1\r\n      networks:\r\n       - es-net\r\n    \r\n      volumes:\r\n          - /data/es/config/config.yml:/usr/share/elasticsearch/config/elasticsearch.yml\r\n          - /data/es/data:/usr/share/elasticsearch/data\r\n          - /data/es/logs:/usr/share/elasticsearch/logs\r\n          - /data/es/plugins:/usr/share/elasticsearch/plugins\r\n          - /data/es/kibana/data:/usr/share/kibana/data\r\n        kibana:\r\n       container_name: kibana-container\r\n       image: docker.elastic.co/kibana/kibana:7.8.1\r\n       ports:\r\n         - &quot;5601:5601&quot;\r\n       environment:\r\n          - ELASTICSEARCH_HOSTS=http://es-master:9201\r\n          - path.repo=/nfs_es/back_up\r\n         \r\n       ulimits:\r\n          memlock:\r\n            soft: -1\r\n            hard: -1\r\n       volumes:\r\n         - /data/es/kibana/data:/usr/share/kibana/data\r\n       depends_on:\r\n         - es-master\r\n       networks:\r\n        - es-net\r\n    networks:\r\n      es-net:\r\n        name: es-net\r\n\r\nBasically I need to create a directory `/nfs_es/back_up/` on the **container** before elastic search starts up and map it to the directory `/nfs_es/back_up/` which I have already created on the current server. Can this be achievable with docker compose?","title":"Create directory with docker compose for elastic search and map it to the one on server","body":"<p>I have the following docker compose file for starting elastic search with kibana:</p>\n<pre><code>version: &quot;3.5&quot;\nservices:\n es-master:\n  container_name: es-master\n  image: docker.elastic.co/elasticsearch/elasticsearch:7.8.1\n  hostname: es-master\n  restart: always\n  ports:\n   - 9201:9201\n   - 9301:9301\n  environment:\n     - ELASTICSEARCH_HOSTS=http://es-master:9201\n     - &quot;ES_JAVA_OPTS=-Xms4g -Xmx4g&quot;\n     - bootstrap.memory_lock=true \n  ulimits:\n     memlock:\n       soft: -1\n       hard: -1\n  networks:\n   - es-net\n\n  volumes:\n      - /data/es/config/config.yml:/usr/share/elasticsearch/config/elasticsearch.yml\n      - /data/es/data:/usr/share/elasticsearch/data\n      - /data/es/logs:/usr/share/elasticsearch/logs\n      - /data/es/plugins:/usr/share/elasticsearch/plugins\n      - /data/es/kibana/data:/usr/share/kibana/data\n    kibana:\n   container_name: kibana-container\n   image: docker.elastic.co/kibana/kibana:7.8.1\n   ports:\n     - &quot;5601:5601&quot;\n   environment:\n      - ELASTICSEARCH_HOSTS=http://es-master:9201\n      - path.repo=/nfs_es/back_up\n     \n   ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n   volumes:\n     - /data/es/kibana/data:/usr/share/kibana/data\n   depends_on:\n     - es-master\n   networks:\n    - es-net\nnetworks:\n  es-net:\n    name: es-net\n</code></pre>\n<p>Basically I need to create a directory <code>/nfs_es/back_up/</code> on the <strong>container</strong> before elastic search starts up and map it to the directory <code>/nfs_es/back_up/</code> which I have already created on the current server. Can this be achievable with docker compose?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1647333259,"post_id":71479150,"comment_id":126338528,"body_markdown":"you can use a Qualifier","body":"you can use a Qualifier"},{"owner":{"account_id":3433480,"reputation":972,"user_id":2877155,"accept_rate":50,"display_name":"Deepak"},"score":0,"creation_date":1647333475,"post_id":71479150,"comment_id":126338605,"body_markdown":"are you saying to add qualifier in ABCTest.java while autowiring?","body":"are you saying to add qualifier in ABCTest.java while autowiring?"},{"owner":{"account_id":6894157,"reputation":1612,"user_id":5296683,"accept_rate":83,"display_name":"Med Elgarnaoui"},"score":0,"creation_date":1647333746,"post_id":71479150,"comment_id":126338693,"body_markdown":"Does this answer your question? [Autowiring conflict in spring core with the xml configuration](https://stackoverflow.com/questions/55572845/autowiring-conflict-in-spring-core-with-the-xml-configuration)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/55572845/autowiring-conflict-in-spring-core-with-the-xml-configuration\">Autowiring conflict in spring core with the xml configuration</a>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1647333773,"post_id":71479150,"comment_id":126338701,"body_markdown":"I am saying you could google to find out what a Qualifier is and how it works. A Qualifier is used to decide between implementations.","body":"I am saying you could google to find out what a Qualifier is and how it works. A Qualifier is used to decide between implementations."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1647333797,"post_id":71479150,"comment_id":126338712,"body_markdown":"@MedElgarnaoui he is using annotations, not xml","body":"@MedElgarnaoui he is using annotations, not xml"},{"owner":{"account_id":6894157,"reputation":1612,"user_id":5296683,"accept_rate":83,"display_name":"Med Elgarnaoui"},"score":0,"creation_date":1647333952,"post_id":71479150,"comment_id":126338772,"body_markdown":"@Stultuske this post mentioned also the Qualifier annotation, take a look, thanks for your precision","body":"@Stultuske this post mentioned also the Qualifier annotation, take a look, thanks for your precision"},{"owner":{"account_id":3433480,"reputation":972,"user_id":2877155,"accept_rate":50,"display_name":"Deepak"},"score":0,"creation_date":1647334607,"post_id":71479150,"comment_id":126339027,"body_markdown":"sure for Qualifier. I gave names for those components saying Component(value=&quot;core&quot;) and Component(value=&quot;test&quot;). But when I tried to use Qualifier, it shows compile error saying &quot;cannot find method value&quot;. However Named annotation works and I used Named(&quot;core&quot;) but it still is injecting Component(value=&quot;test&quot;). confused.","body":"sure for Qualifier. I gave names for those components saying Component(value=&quot;core&quot;) and Component(value=&quot;test&quot;). But when I tried to use Qualifier, it shows compile error saying &quot;cannot find method value&quot;. However Named annotation works and I used Named(&quot;core&quot;) but it still is injecting Component(value=&quot;test&quot;). confused."},{"owner":{"account_id":3433480,"reputation":972,"user_id":2877155,"accept_rate":50,"display_name":"Deepak"},"score":0,"creation_date":1647336502,"post_id":71479150,"comment_id":126339754,"body_markdown":"i used the wrong import of Qualifier, however after fixing, still not injecting the right bean","body":"i used the wrong import of Qualifier, however after fixing, still not injecting the right bean"},{"owner":{"account_id":3433480,"reputation":972,"user_id":2877155,"accept_rate":50,"display_name":"Deepak"},"score":0,"creation_date":1647336622,"post_id":71479150,"comment_id":126339807,"body_markdown":"I have also tried to excludeFilters in component scan, so i can exclude the package scan of this unwanted test bean, still is not helping.","body":"I have also tried to excludeFilters in component scan, so i can exclude the package scan of this unwanted test bean, still is not helping."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647335089,"creation_date":1647335089,"answer_id":71479504,"question_id":71479150,"body_markdown":"You could use [@Profile][1] annotation on your implementations. It will load a bean only if specified profile/s are currently active.\r\n```\r\n@Component\r\n@Profile({&quot;a&quot;, &quot;b&quot;})\r\npublic IImplementationCore implements YourInterface {\r\n}\r\n```\r\nSpecify the profiles for test implementation the same way.\r\n\r\nIf this test class is very specific, like being the only one needing implementation core, you can use [@ActiveProfiles][2] on it to activate profile different from current for this test class only.\r\n```\r\n//other annotations\r\n@ActiveProfiles(&quot;a&quot;)\r\npublic TestClass {\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Profile.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/ActiveProfiles.html#:~:text=ActiveProfiles%20is%20a%20class%2Dlevel,to%20create%20custom%20composed%20annotations.","title":"Spring bean injection conflict src/main vs src/test","body":"<p>You could use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Profile.html\" rel=\"nofollow noreferrer\">@Profile</a> annotation on your implementations. It will load a bean only if specified profile/s are currently active.</p>\n<pre><code>@Component\n@Profile({&quot;a&quot;, &quot;b&quot;})\npublic IImplementationCore implements YourInterface {\n}\n</code></pre>\n<p>Specify the profiles for test implementation the same way.</p>\n<p>If this test class is very specific, like being the only one needing implementation core, you can use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/ActiveProfiles.html#:%7E:text=ActiveProfiles%20is%20a%20class%2Dlevel,to%20create%20custom%20composed%20annotations.\" rel=\"nofollow noreferrer\">@ActiveProfiles</a> on it to activate profile different from current for this test class only.</p>\n<pre><code>//other annotations\n@ActiveProfiles(&quot;a&quot;)\npublic TestClass {\n}\n</code></pre>\n"}],"owner":{"account_id":3433480,"reputation":972,"user_id":2877155,"accept_rate":50,"display_name":"Deepak"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647335089,"creation_date":1647333216,"question_id":71479150,"body_markdown":"I have two implementations for a given interface both are annotated with @Component.\r\n\r\nOne implementation is in src/main -&gt; IImplementationCore.java\r\nOther implementation is in src/test -&gt; IImplementationTest.java\r\n\r\nI have a test class ABCTest.java in src/test which is annotated with \r\n\r\n&gt; @RunWith(SpringRunner.class), @SpringBootTest, @ContextConfiguration,\r\n&gt; @ComponentScan, @EnableAutoConfiguration\r\n\r\nI want this ABCTest.java to inject IImplementationCore while running the test. But it is injecting IImplementationTest.java.\r\n\r\npackage structure:\r\n - src\r\n   - main\r\n     - package\r\n       - IImplementationCore.java\r\n   - test\r\n     - package\r\n       - IImplementationTest.java\r\n     - package2\r\n       - ABCTest.java\r\n\r\nSolution I know:\r\n* Annotating @Primary for IImplementationCore.java resolves the issue.\r\n\r\nI somehow do not like to force something as primary because it is being annotated as primary due to some bean conflict from src/test but not due to some real conflict in core implementations. \r\nwhat are my other options? What I am looking for is, is there a way to only consider beans from src/main but not from src/test? Or is there any better way?\r\n","title":"Spring bean injection conflict src/main vs src/test","body":"<p>I have two implementations for a given interface both are annotated with @Component.</p>\n<p>One implementation is in src/main -&gt; IImplementationCore.java\nOther implementation is in src/test -&gt; IImplementationTest.java</p>\n<p>I have a test class ABCTest.java in src/test which is annotated with</p>\n<blockquote>\n<p>@RunWith(SpringRunner.class), @SpringBootTest, @ContextConfiguration,\n@ComponentScan, @EnableAutoConfiguration</p>\n</blockquote>\n<p>I want this ABCTest.java to inject IImplementationCore while running the test. But it is injecting IImplementationTest.java.</p>\n<p>package structure:</p>\n<ul>\n<li>src\n<ul>\n<li>main\n<ul>\n<li>package\n<ul>\n<li>IImplementationCore.java</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>test\n<ul>\n<li>package\n<ul>\n<li>IImplementationTest.java</li>\n</ul>\n</li>\n<li>package2\n<ul>\n<li>ABCTest.java</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Solution I know:</p>\n<ul>\n<li>Annotating @Primary for IImplementationCore.java resolves the issue.</li>\n</ul>\n<p>I somehow do not like to force something as primary because it is being annotated as primary due to some bean conflict from src/test but not due to some real conflict in core implementations.\nwhat are my other options? What I am looking for is, is there a way to only consider beans from src/main but not from src/test? Or is there any better way?</p>\n"},{"tags":["java","undertow"],"comments":[{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":0,"creation_date":1647334948,"post_id":71479451,"comment_id":126339176,"body_markdown":"I don&#39;t see the code you shared referred to in any of the stacktraces you shared","body":"I don&#39;t see the code you shared referred to in any of the stacktraces you shared"},{"owner":{"account_id":22467756,"reputation":46,"user_id":16668645,"display_name":"harrison1017"},"score":0,"creation_date":1647336000,"post_id":71479451,"comment_id":126339555,"body_markdown":"I can&#39;t see the key of this problem , so I basiclly shared the code I think was involed,  it may be useless","body":"I can&#39;t see the key of this problem , so I basiclly shared the code I think was involed,  it may be useless"}],"answers":[{"tags":[],"owner":{"account_id":22903100,"reputation":34,"user_id":17041537,"display_name":"Danish Alam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647335060,"creation_date":1647335060,"answer_id":71479498,"question_id":71479451,"body_markdown":"\r\nJava IOExceptions are Input/Output exceptions (I/O), and they occur whenever an input or output operation is failed or interpreted. For example, if you are trying to read in a file that does not exist, Java would throw an I/O exception.","title":"After an io exception happened, the server was unable to response any http request","body":"<p>Java IOExceptions are Input/Output exceptions (I/O), and they occur whenever an input or output operation is failed or interpreted. For example, if you are trying to read in a file that does not exist, Java would throw an I/O exception.</p>\n"}],"owner":{"account_id":22467756,"reputation":46,"user_id":16668645,"display_name":"harrison1017"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":694,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647335060,"creation_date":1647334774,"question_id":71479451,"body_markdown":"    @PostMapping(&quot;/upload-fetal&quot;)\r\n    public Boolean uploadFetalFile(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) {\r\n    \ttry {\r\n    \t\tString path = env.getProperty(&quot;application.ctg.fetal&quot;) + File.separator;\r\n    \t\tString fileName = path + multipartFile.getOriginalFilename();\r\n    \t\tFile file = new File(fileName);\r\n    \t\tFileUtils.copyInputStreamToFile(multipartFile.getInputStream(), file);\r\n\t\t} catch (Exception e) {\r\n            log.error(ExceptionUtil.collectExceptionStackMsg(e));\r\n\t\t\treturn false;\r\n\t\t}\r\n    \treturn true;\r\n    }\r\nThere are some devices upload file througth the method as above, and sometimes it cause the exception as follow:\r\n\r\n    Caused by: java.io.IOException: UT000128: Remote peer closed connection before all data could be read\r\n\tat io.undertow.conduits.FixedLengthStreamSourceConduit.exitRead(FixedLengthStreamSourceConduit.java:351)\r\n\tat io.undertow.conduits.FixedLengthStreamSourceConduit.read(FixedLengthStreamSourceConduit.java:264)\r\n\tat org.xnio.conduits.ConduitStreamSourceChannel.read(ConduitStreamSourceChannel.java:127)\r\n\tat io.undertow.channels.DetachableStreamSourceChannel.read(DetachableStreamSourceChannel.java:209)\r\n\tat io.undertow.server.HttpServerExchange$ReadDispatchChannel.read(HttpServerExchange.java:2430)\r\n\tat org.xnio.channels.Channels.readBlocking(Channels.java:344)\r\n\tat io.undertow.servlet.spec.ServletInputStreamImpl.readIntoBuffer(ServletInputStreamImpl.java:192)\r\n\tat io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:168)\r\n\tat io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.parseBlocking(MultiPartParserDefinition.java:226)\r\n\tat io.undertow.servlet.spec.HttpServletRequestImpl.parseFormData(HttpServletRequestImpl.java:792)\r\n\t... 45 common frames omitted\r\n\r\nIn small chance the server would be unable to handle request after this, I collect the stack message of the server, most of the thread&#39;s stack was as follows:\r\n\r\n    java.lang.Thread.State: RUNNABLE\r\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\r\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(Unknown Source)\r\n\tat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(Unknown Source)\r\n\tat sun.nio.ch.WindowsSelectorImpl.doSelect(Unknown Source)\r\n\tat sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)\r\n\t- locked &lt;0x00000006cd569f88&gt; (a sun.nio.ch.Util$3)\r\n\t- locked &lt;0x00000006cd569f78&gt; (a java.util.Collections$UnmodifiableSet)\r\n\t- locked &lt;0x00000006cd569d18&gt; (a sun.nio.ch.WindowsSelectorImpl)\r\n\tat sun.nio.ch.SelectorImpl.select(Unknown Source)\r\n\tat sun.nio.ch.SelectorImpl.select(Unknown Source)\r\n\tat org.xnio.nio.SelectorUtils.await(SelectorUtils.java:51)\r\n\tat org.xnio.nio.NioSocketConduit.awaitReadable(NioSocketConduit.java:358)\r\n\tat org.xnio.conduits.AbstractSourceConduit.awaitReadable(AbstractSourceConduit.java:66)\r\n\tat io.undertow.conduits.ReadDataStreamSourceConduit.awaitReadable(ReadDataStreamSourceConduit.java:101)\r\n\tat io.undertow.conduits.FixedLengthStreamSourceConduit.awaitReadable(FixedLengthStreamSourceConduit.java:294)\r\n\tat org.xnio.conduits.ConduitStreamSourceChannel.awaitReadable(ConduitStreamSourceChannel.java:151)\r\n\tat io.undertow.channels.DetachableStreamSourceChannel.awaitReadable(DetachableStreamSourceChannel.java:77)\r\n\tat io.undertow.server.HttpServerExchange$ReadDispatchChannel.awaitReadable(HttpServerExchange.java:2290)\r\n\tat org.xnio.channels.Channels.readBlocking(Channels.java:345)\r\n\tat io.undertow.servlet.spec.ServletInputStreamImpl.readIntoBuffer(ServletInputStreamImpl.java:192)\r\n\tat io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:168)\r\n\tat io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.parseBlocking(MultiPartParserDefinition.java:226)\r\n\tat io.undertow.servlet.spec.HttpServletRequestImpl.parseFormData(HttpServletRequestImpl.java:792)\r\n\tat io.undertow.servlet.spec.HttpServletRequestImpl.getParameter(HttpServletRequestImpl.java:665)\r\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:84)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:117)\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:106)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n\tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n\tat io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:65)\r\n\tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n\tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\r\n\tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n\tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\nTherefore any request the server received was blocking there waiting for the data, What might be the root cause?","title":"After an io exception happened, the server was unable to response any http request","body":"<pre><code>@PostMapping(&quot;/upload-fetal&quot;)\npublic Boolean uploadFetalFile(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) {\n    try {\n        String path = env.getProperty(&quot;application.ctg.fetal&quot;) + File.separator;\n        String fileName = path + multipartFile.getOriginalFilename();\n        File file = new File(fileName);\n        FileUtils.copyInputStreamToFile(multipartFile.getInputStream(), file);\n    } catch (Exception e) {\n        log.error(ExceptionUtil.collectExceptionStackMsg(e));\n        return false;\n    }\n    return true;\n}\n</code></pre>\n<p>There are some devices upload file througth the method as above, and sometimes it cause the exception as follow:</p>\n<pre><code>Caused by: java.io.IOException: UT000128: Remote peer closed connection before all data could be read\nat io.undertow.conduits.FixedLengthStreamSourceConduit.exitRead(FixedLengthStreamSourceConduit.java:351)\nat io.undertow.conduits.FixedLengthStreamSourceConduit.read(FixedLengthStreamSourceConduit.java:264)\nat org.xnio.conduits.ConduitStreamSourceChannel.read(ConduitStreamSourceChannel.java:127)\nat io.undertow.channels.DetachableStreamSourceChannel.read(DetachableStreamSourceChannel.java:209)\nat io.undertow.server.HttpServerExchange$ReadDispatchChannel.read(HttpServerExchange.java:2430)\nat org.xnio.channels.Channels.readBlocking(Channels.java:344)\nat io.undertow.servlet.spec.ServletInputStreamImpl.readIntoBuffer(ServletInputStreamImpl.java:192)\nat io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:168)\nat io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.parseBlocking(MultiPartParserDefinition.java:226)\nat io.undertow.servlet.spec.HttpServletRequestImpl.parseFormData(HttpServletRequestImpl.java:792)\n... 45 common frames omitted\n</code></pre>\n<p>In small chance the server would be unable to handle request after this, I collect the stack message of the server, most of the thread's stack was as follows:</p>\n<pre><code>java.lang.Thread.State: RUNNABLE\nat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll0(Native Method)\nat sun.nio.ch.WindowsSelectorImpl$SubSelector.poll(Unknown Source)\nat sun.nio.ch.WindowsSelectorImpl$SubSelector.access$400(Unknown Source)\nat sun.nio.ch.WindowsSelectorImpl.doSelect(Unknown Source)\nat sun.nio.ch.SelectorImpl.lockAndDoSelect(Unknown Source)\n- locked &lt;0x00000006cd569f88&gt; (a sun.nio.ch.Util$3)\n- locked &lt;0x00000006cd569f78&gt; (a java.util.Collections$UnmodifiableSet)\n- locked &lt;0x00000006cd569d18&gt; (a sun.nio.ch.WindowsSelectorImpl)\nat sun.nio.ch.SelectorImpl.select(Unknown Source)\nat sun.nio.ch.SelectorImpl.select(Unknown Source)\nat org.xnio.nio.SelectorUtils.await(SelectorUtils.java:51)\nat org.xnio.nio.NioSocketConduit.awaitReadable(NioSocketConduit.java:358)\nat org.xnio.conduits.AbstractSourceConduit.awaitReadable(AbstractSourceConduit.java:66)\nat io.undertow.conduits.ReadDataStreamSourceConduit.awaitReadable(ReadDataStreamSourceConduit.java:101)\nat io.undertow.conduits.FixedLengthStreamSourceConduit.awaitReadable(FixedLengthStreamSourceConduit.java:294)\nat org.xnio.conduits.ConduitStreamSourceChannel.awaitReadable(ConduitStreamSourceChannel.java:151)\nat io.undertow.channels.DetachableStreamSourceChannel.awaitReadable(DetachableStreamSourceChannel.java:77)\nat io.undertow.server.HttpServerExchange$ReadDispatchChannel.awaitReadable(HttpServerExchange.java:2290)\nat org.xnio.channels.Channels.readBlocking(Channels.java:345)\nat io.undertow.servlet.spec.ServletInputStreamImpl.readIntoBuffer(ServletInputStreamImpl.java:192)\nat io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:168)\nat io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.parseBlocking(MultiPartParserDefinition.java:226)\nat io.undertow.servlet.spec.HttpServletRequestImpl.parseFormData(HttpServletRequestImpl.java:792)\nat io.undertow.servlet.spec.HttpServletRequestImpl.getParameter(HttpServletRequestImpl.java:665)\nat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:84)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\nat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\nat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\nat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:117)\nat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:106)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\nat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\nat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\nat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\nat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\nat io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\nat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\nat io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:65)\nat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\nat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\nat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\nat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n</code></pre>\n<p>Therefore any request the server received was blocking there waiting for the data, What might be the root cause?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1646900604,"post_id":71420848,"comment_id":126239045,"body_markdown":"Please add sample data for your table, and also tell us what the actual table name is.","body":"Please add sample data for your table, and also tell us what the actual table name is."},{"owner":{"display_name":"user18213355"},"score":0,"creation_date":1646900713,"post_id":71420848,"comment_id":126239076,"body_markdown":"the tables name is parameters and the data is like paramname=&quot;OWNER&quot; paramvalue=&quot;JOHN&quot; now can be case that paramvalue can be empty on the OWNER row so the code must detect it. That query does this specific thing because i tested it on sql","body":"the tables name is parameters and the data is like paramname=&quot;OWNER&quot; paramvalue=&quot;JOHN&quot; now can be case that paramvalue can be empty on the OWNER row so the code must detect it. That query does this specific thing because i tested it on sql"}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646901408,"creation_date":1646900971,"answer_id":71420954,"question_id":71420848,"body_markdown":"I sense that your bigger problem is on the SQL side, so here is a query you can use to detect what you want:\r\n\r\n&lt;!-- language: sql --&gt;\r\n\r\n    SELECT COUNT(CASE WHEN paramname = &#39;OWNER&#39; AND paramvalue IS NOT NULL\r\n                      THEN 1 END) AS flag;\r\n\r\nThis will return a single record result set, with the value being 1 when OWNER has a non null value.  Note that I am assuming that an empty parameter value is represented by NULL, and not empty string.  It should be represented by NULL.\r\n\r\nSample Android code:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String sql = &quot;SELECT COUNT(CASE WHEN paramname = &#39;OWNER&#39; AND &quot;;\r\n    sql += &quot;                             paramvalue IS NOT NULL &quot; +\r\n    sql += &quot;                        THEN 1 END) AS flag&quot;;\r\n    Cursor c = db.rawQuery(sql, null);\r\n    int cnt = 0;\r\n    if (c.moveToFirst()) {\r\n        cnt = c.getInt(0);\r\n    }\r\n\r\n    if (cnt &gt; 0) {\r\n        // success\r\n    }\r\n    else {\r\n        // failure\r\n    }","title":"Print SQL values in Android studio Java","body":"<p>I sense that your bigger problem is on the SQL side, so here is a query you can use to detect what you want:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT COUNT(CASE WHEN paramname = 'OWNER' AND paramvalue IS NOT NULL\n                  THEN 1 END) AS flag;\n</code></pre>\n<p>This will return a single record result set, with the value being 1 when OWNER has a non null value.  Note that I am assuming that an empty parameter value is represented by NULL, and not empty string.  It should be represented by NULL.</p>\n<p>Sample Android code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sql = &quot;SELECT COUNT(CASE WHEN paramname = 'OWNER' AND &quot;;\nsql += &quot;                             paramvalue IS NOT NULL &quot; +\nsql += &quot;                        THEN 1 END) AS flag&quot;;\nCursor c = db.rawQuery(sql, null);\nint cnt = 0;\nif (c.moveToFirst()) {\n    cnt = c.getInt(0);\n}\n\nif (cnt &gt; 0) {\n    // success\n}\nelse {\n    // failure\n}\n</code></pre>\n"}],"owner":{"display_name":"user18213355"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1647334879,"creation_date":1646900422,"question_id":71420848,"body_markdown":"I am trying to make a function that when you open the app the first thing it does it checks with a query if there are any null values in SQL the code is this:\r\n\r\n    public static String checkParameters(Context ctx) {        \r\n        Parameters prm = new Parameters(ctx);\r\n        SQLiteDatabase db = prm.getWritableDatabase();\r\n        String count = &quot;select * from table paramname where paramvalue=&#39;&#39;&quot;;\r\n        Cursor c = db.rawQuery(count, null);\r\n        c.moveToFirst();\r\n        int icount = c.getInt(0);\r\n        if(icount &gt; 0){\r\n            &quot;Success&quot;;\r\n        }else{\r\n            &quot;Error&quot;;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\nBut this isn&#39;t working I need to make the function check which paramname has paramvalue empty and print that paramname.\r\n","title":"Print SQL values in Android studio Java","body":"<p>I am trying to make a function that when you open the app the first thing it does it checks with a query if there are any null values in SQL the code is this:</p>\n<pre><code>public static String checkParameters(Context ctx) {        \n    Parameters prm = new Parameters(ctx);\n    SQLiteDatabase db = prm.getWritableDatabase();\n    String count = &quot;select * from table paramname where paramvalue=''&quot;;\n    Cursor c = db.rawQuery(count, null);\n    c.moveToFirst();\n    int icount = c.getInt(0);\n    if(icount &gt; 0){\n        &quot;Success&quot;;\n    }else{\n        &quot;Error&quot;;\n    }\n    return null;\n}\n</code></pre>\n<p>But this isn't working I need to make the function check which paramname has paramvalue empty and print that paramname.</p>\n"},{"tags":["java","uft14","testautomationfx"],"owner":{"account_id":24553249,"reputation":25,"user_id":18462188,"display_name":"ShinjiruPP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1647334260,"creation_date":1647257868,"question_id":71467139,"body_markdown":"I&#39;m developing a java application that will be used to launch remotely the UFT Mobile scripts, on related server, download the test result from it and then analyze the report in order to save the results on a specific database. \r\n\r\nI&#39;m writing this post in order to ask a help about it.\r\n\r\nThe application will have the following steps:\r\n\r\n 1. A file properties where I read the name of scripts and some properties needed for application\r\n 2. A class that will be used to connect to the Mobile Center of UFT Mobile in order to install through Mobile Center API the application that will be under the test\r\n 3. A class that will connect to the server and start the execution of test script of application installed on step 2\r\n 4. Download the test result/logs in order to analyze the report and save the result on database\r\n\r\nStep 2 (UFTLabUtils is a class of API related to Mobile Center):\r\n\r\n        package uft;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.Properties;\r\n    \r\n    import org.apache.commons.lang3.exception.ExceptionUtils;\r\n    \r\n    public class UploadFile {\r\n    \t\r\n    \tpublic static boolean uploadFile(Properties myPropertiesFile) throws IOException {\r\n    \t\t\r\n    \t\tfinal String MC_SERVER = myPropertiesFile.getProperty(&quot;CLOUD_NAME&quot;).toLowerCase();\r\n    \t\tfinal String USERNAME = myPropertiesFile.getProperty(&quot;USERNAME&quot;);\r\n    \t\tfinal String PASSWORD = myPropertiesFile.getProperty(&quot;PASSWORD&quot;);\r\n    \t\t\r\n    \t\tfinal String PACKAGE = myPropertiesFile.getProperty(&quot;PACKAGE&quot;);\r\n    \t\tfinal String VERSION = myPropertiesFile.getProperty(&quot;VERSION&quot;);\r\n    \t\tfinal String DEVICE_ID = myPropertiesFile.getProperty(&quot;DEVICE_ID&quot;);\r\n    \t\tfinal Boolean STRUMENTED = true;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t    UFTLabUtils client = new UFTLabUtils(USERNAME, PASSWORD, MC_SERVER);\r\n    \t\t\tclient.login(USERNAME, PASSWORD);\r\n    \t\t\tclient.installApp(PACKAGE, VERSION, DEVICE_ID, STRUMENTED);\r\n    \t\t\tclient.logout();\r\n    \t\t\treturn true;\r\n    \t\t}catch(Exception e) {\r\n    \t\t\tSystem.err.println(&quot;Si &#232; verificato un errore nella uploadFile: &quot;);\r\n    \t\t\tString exc = ExceptionUtils.getStackTrace(e);\r\n    \t\t\tSystem.err.println(exc);\r\n    \t\t\tSystem.exit(-1);\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nThe problem is on the step 3, where I cannot find a way to execute the script saved of UFT Mobile Server. \r\nI&#39;m looking on internet and I found some snippet code like this that I customized:\r\n\r\n   \r\n\r\n     package uft;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Properties;\r\n    import org.apache.commons.lang3.exception.ExceptionUtils;\r\n    import org.apache.http.client.utils.URIBuilder;\r\n    import org.json.JSONObject;\r\n    import org.openqa.selenium.remote.DesiredCapabilities;\r\n    import io.appium.java_client.android.AndroidDriver;\r\n    import io.appium.java_client.ios.IOSDriver;\r\n    import java.net.URI;\r\n    import java.net.URL;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpRequest;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpResponse.BodyHandlers;\r\n    \r\n    public class StartExecution {\r\n    \t\r\n    \t@SuppressWarnings(&quot;unused&quot;)\r\n    \tpublic static String startExecution(Properties myPropertiesFile) {\r\n    \t\tfinal String MC_SERVER = myPropertiesFile.getProperty(&quot;CLOUD_NAME&quot;);\r\n    \t\tfinal String MC_SERVER_CLIENT_ID = myPropertiesFile.getProperty(&quot;MC_SERVER_CLIENT_ID&quot;);\r\n    \t\tfinal String MC_SERVER_CLIENT_SECRET = myPropertiesFile.getProperty(&quot;MC_SERVER_CLIENT_SECRET&quot;);\r\n    \t\tfinal String MC_SERVER_TENANT_ID = myPropertiesFile.getProperty(&quot;MC_SERVER_TENANT_ID&quot;);\r\n    \t\tfinal String MC_SERVER_WORKSPACE_NAME = myPropertiesFile.getProperty(&quot;MC_SERVER_WORKSPACE_NAME&quot;);\r\n    \t\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\tDesiredCapabilities capabilities = new DesiredCapabilities();\r\n    \t\t\tcapabilities.setCapability(&quot;oauthClientId&quot;, MC_SERVER_CLIENT_ID);\r\n    \t\t\tcapabilities.setCapability(&quot;oauthClientSecret&quot;, MC_SERVER_CLIENT_SECRET);\r\n    \t\t\tcapabilities.setCapability(&quot;tenantId&quot;, MC_SERVER_TENANT_ID);\r\n    \t\t\tcapabilities.setCapability(&quot;mcWorkspaceName&quot;, MC_SERVER_WORKSPACE_NAME);\r\n    \t\t\t\r\n    \t\t\tswitch (myPropertiesFile.getProperty(&quot;OS&quot;).toUpperCase()) {\r\n    \t\t\t\tcase &quot;ANDROID&quot;:\r\n    \t\t\t\t\tcapabilities.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n    \t\t\t\t\tcapabilities.setCapability(&quot;appPackage&quot;, &quot;com.Advantage.aShopping&quot;);\r\n    \t\t\t\t\tcapabilities.setCapability(&quot;appActivity&quot;, &quot;com.Advantage.aShopping.SplashActivity&quot;);\r\n    \t\t\t\t\tAndroidDriver wd = new AndroidDriver(new URL(MC_SERVER + &quot;/wd/hub&quot;), capabilities);\r\n    \t\t\t\t\twd.executeScript(MC_SERVER_WORKSPACE_NAME, null);\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tHashMap&lt;String, String&gt; encoding= new HashMap&lt;String, String&gt;();\r\n    \t\t\t\t\tencoding.put(&quot;encoding&quot;, &quot;UTF-8&quot;);\r\n    \t\t\t\t\tString logFileContents = (String) wd.executeScript(&quot;mc-wd: downloadLogs&quot;, encoding);\r\n    \t\t\t\tcase &quot;IOS&quot;:\r\n    \t\t\t\t\tcapabilities.setCapability(&quot;platformName&quot;, &quot;iOS&quot;);\r\n    \t\t\t\t\tcapabilities.setCapability(&quot;bundleId&quot;, &quot;com.Advantage.aShopping&quot;);\r\n    \t\t\t\t\tIOSDriver wd2 = new IOSDriver(new URL(MC_SERVER + &quot;/wd/hub&quot;), capabilities);\r\n    \t\t\t\t\twd2.executeScript(MC_SERVER_WORKSPACE_NAME, null);\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tHashMap&lt;String, String&gt; encoding2= new HashMap&lt;String, String&gt;();\r\n    \t\t\t\t\tencoding2.put(&quot;encoding&quot;, &quot;UTF-8&quot;);\r\n    \t\t\t\t\tString logFileContents2 = (String) wd2.executeScript(&quot;mc-wd: downloadLogs&quot;, encoding2);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\treturn null;\r\n    \t\t}catch(Exception e) {\r\n    \t\t\tSystem.out.println(&quot;Si &#232; verificato un problema nella startExecution: &quot;);\r\n    \t\t\tString exc = ExceptionUtils.getStackTrace(e);\r\n    \t\t\tSystem.err.println(exc);\r\n    \t\t\tSystem.exit(-1);\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t}\r\n\r\nAll desired capabilities are read from external, in particular from the file properties that is in input to the java application.\r\nThe question is: after the connection to the mobile center, in particular, to the hub (wd/hub), how can I start and launch a test script that is saved on server (not in local)? \r\n\r\nFurthermore, I looked the documentation about the method &#39;executeScript&#39;, but it is used to run a JavaScript code/command. \r\n\r\n**UPDATE:** I also found this snippet:\r\n\r\n        public static void main(String args[]) {\r\n        try {\r\n            PrintStream out = new PrintStream(new FileOutputStream(&quot;LaunchQTP.vbs&quot;));\r\n            out.println(&quot;Set qtApp = CreateObject(\\&quot;QuickTest.Application\\&quot;)&quot;);\r\n            out.println(&quot;qtApp.Launch&quot;);\r\n            out.println(&quot;qtApp.Visible = True&quot;);\r\n            out.close();\r\n            Process p = Runtime.getRuntime().exec(&quot;cscript LaunchQTP.vbs&quot;);\r\n            p.waitFor();\r\n            out.println(p.exitValue());\r\n        } catch (Exception err) {\r\n            err.printStackTrace();\r\n        }\r\n    }\r\n\r\nthat seems to be used for launch a UFT scripts but on local machine. Could it be used also for remotely server? In this case how can i connect to the server and launch the script?\r\n\r\nThanks for supporting!","title":"How can I launch a UFT Mobile test script remotely from a java application?","body":"<p>I'm developing a java application that will be used to launch remotely the UFT Mobile scripts, on related server, download the test result from it and then analyze the report in order to save the results on a specific database.</p>\n<p>I'm writing this post in order to ask a help about it.</p>\n<p>The application will have the following steps:</p>\n<ol>\n<li>A file properties where I read the name of scripts and some properties needed for application</li>\n<li>A class that will be used to connect to the Mobile Center of UFT Mobile in order to install through Mobile Center API the application that will be under the test</li>\n<li>A class that will connect to the server and start the execution of test script of application installed on step 2</li>\n<li>Download the test result/logs in order to analyze the report and save the result on database</li>\n</ol>\n<p>Step 2 (UFTLabUtils is a class of API related to Mobile Center):</p>\n<pre><code>    package uft;\n\nimport java.io.IOException;\nimport java.util.Properties;\n\nimport org.apache.commons.lang3.exception.ExceptionUtils;\n\npublic class UploadFile {\n    \n    public static boolean uploadFile(Properties myPropertiesFile) throws IOException {\n        \n        final String MC_SERVER = myPropertiesFile.getProperty(&quot;CLOUD_NAME&quot;).toLowerCase();\n        final String USERNAME = myPropertiesFile.getProperty(&quot;USERNAME&quot;);\n        final String PASSWORD = myPropertiesFile.getProperty(&quot;PASSWORD&quot;);\n        \n        final String PACKAGE = myPropertiesFile.getProperty(&quot;PACKAGE&quot;);\n        final String VERSION = myPropertiesFile.getProperty(&quot;VERSION&quot;);\n        final String DEVICE_ID = myPropertiesFile.getProperty(&quot;DEVICE_ID&quot;);\n        final Boolean STRUMENTED = true;\n        \n        try {\n            UFTLabUtils client = new UFTLabUtils(USERNAME, PASSWORD, MC_SERVER);\n            client.login(USERNAME, PASSWORD);\n            client.installApp(PACKAGE, VERSION, DEVICE_ID, STRUMENTED);\n            client.logout();\n            return true;\n        }catch(Exception e) {\n            System.err.println(&quot;Si è verificato un errore nella uploadFile: &quot;);\n            String exc = ExceptionUtils.getStackTrace(e);\n            System.err.println(exc);\n            System.exit(-1);\n            return false;\n        }\n        \n    }\n\n}\n</code></pre>\n<p>The problem is on the step 3, where I cannot find a way to execute the script saved of UFT Mobile Server.\nI'm looking on internet and I found some snippet code like this that I customized:</p>\n<pre><code> package uft;\n\nimport java.util.HashMap;\nimport java.util.Properties;\nimport org.apache.commons.lang3.exception.ExceptionUtils;\nimport org.apache.http.client.utils.URIBuilder;\nimport org.json.JSONObject;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport io.appium.java_client.android.AndroidDriver;\nimport io.appium.java_client.ios.IOSDriver;\nimport java.net.URI;\nimport java.net.URL;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpResponse.BodyHandlers;\n\npublic class StartExecution {\n    \n    @SuppressWarnings(&quot;unused&quot;)\n    public static String startExecution(Properties myPropertiesFile) {\n        final String MC_SERVER = myPropertiesFile.getProperty(&quot;CLOUD_NAME&quot;);\n        final String MC_SERVER_CLIENT_ID = myPropertiesFile.getProperty(&quot;MC_SERVER_CLIENT_ID&quot;);\n        final String MC_SERVER_CLIENT_SECRET = myPropertiesFile.getProperty(&quot;MC_SERVER_CLIENT_SECRET&quot;);\n        final String MC_SERVER_TENANT_ID = myPropertiesFile.getProperty(&quot;MC_SERVER_TENANT_ID&quot;);\n        final String MC_SERVER_WORKSPACE_NAME = myPropertiesFile.getProperty(&quot;MC_SERVER_WORKSPACE_NAME&quot;);\n    \n        try {\n            \n            DesiredCapabilities capabilities = new DesiredCapabilities();\n            capabilities.setCapability(&quot;oauthClientId&quot;, MC_SERVER_CLIENT_ID);\n            capabilities.setCapability(&quot;oauthClientSecret&quot;, MC_SERVER_CLIENT_SECRET);\n            capabilities.setCapability(&quot;tenantId&quot;, MC_SERVER_TENANT_ID);\n            capabilities.setCapability(&quot;mcWorkspaceName&quot;, MC_SERVER_WORKSPACE_NAME);\n            \n            switch (myPropertiesFile.getProperty(&quot;OS&quot;).toUpperCase()) {\n                case &quot;ANDROID&quot;:\n                    capabilities.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\n                    capabilities.setCapability(&quot;appPackage&quot;, &quot;com.Advantage.aShopping&quot;);\n                    capabilities.setCapability(&quot;appActivity&quot;, &quot;com.Advantage.aShopping.SplashActivity&quot;);\n                    AndroidDriver wd = new AndroidDriver(new URL(MC_SERVER + &quot;/wd/hub&quot;), capabilities);\n                    wd.executeScript(MC_SERVER_WORKSPACE_NAME, null);\n                    \n                    HashMap&lt;String, String&gt; encoding= new HashMap&lt;String, String&gt;();\n                    encoding.put(&quot;encoding&quot;, &quot;UTF-8&quot;);\n                    String logFileContents = (String) wd.executeScript(&quot;mc-wd: downloadLogs&quot;, encoding);\n                case &quot;IOS&quot;:\n                    capabilities.setCapability(&quot;platformName&quot;, &quot;iOS&quot;);\n                    capabilities.setCapability(&quot;bundleId&quot;, &quot;com.Advantage.aShopping&quot;);\n                    IOSDriver wd2 = new IOSDriver(new URL(MC_SERVER + &quot;/wd/hub&quot;), capabilities);\n                    wd2.executeScript(MC_SERVER_WORKSPACE_NAME, null);\n                    \n                    HashMap&lt;String, String&gt; encoding2= new HashMap&lt;String, String&gt;();\n                    encoding2.put(&quot;encoding&quot;, &quot;UTF-8&quot;);\n                    String logFileContents2 = (String) wd2.executeScript(&quot;mc-wd: downloadLogs&quot;, encoding2);\n            }\n            \n            \n            return null;\n        }catch(Exception e) {\n            System.out.println(&quot;Si è verificato un problema nella startExecution: &quot;);\n            String exc = ExceptionUtils.getStackTrace(e);\n            System.err.println(exc);\n            System.exit(-1);\n            return null;\n        }\n    }\n</code></pre>\n<p>All desired capabilities are read from external, in particular from the file properties that is in input to the java application.\nThe question is: after the connection to the mobile center, in particular, to the hub (wd/hub), how can I start and launch a test script that is saved on server (not in local)?</p>\n<p>Furthermore, I looked the documentation about the method 'executeScript', but it is used to run a JavaScript code/command.</p>\n<p><strong>UPDATE:</strong> I also found this snippet:</p>\n<pre><code>    public static void main(String args[]) {\n    try {\n        PrintStream out = new PrintStream(new FileOutputStream(&quot;LaunchQTP.vbs&quot;));\n        out.println(&quot;Set qtApp = CreateObject(\\&quot;QuickTest.Application\\&quot;)&quot;);\n        out.println(&quot;qtApp.Launch&quot;);\n        out.println(&quot;qtApp.Visible = True&quot;);\n        out.close();\n        Process p = Runtime.getRuntime().exec(&quot;cscript LaunchQTP.vbs&quot;);\n        p.waitFor();\n        out.println(p.exitValue());\n    } catch (Exception err) {\n        err.printStackTrace();\n    }\n}\n</code></pre>\n<p>that seems to be used for launch a UFT scripts but on local machine. Could it be used also for remotely server? In this case how can i connect to the server and launch the script?</p>\n<p>Thanks for supporting!</p>\n"},{"tags":["java","docker","jsp","tomcat"],"comments":[{"owner":{"account_id":6179876,"reputation":530,"user_id":4815713,"display_name":"Paul Georg Podlech"},"score":0,"creation_date":1647332262,"post_id":71478876,"comment_id":126338165,"body_markdown":"It looks like tomcat is correctly using java 17. Seems like what is wrong is your path variable, so running java on your command line does not use the newly installed java 17. Also: you should build a new docker image with java 17, as installing it in the container will be reverted when it&#39;s being recreated.","body":"It looks like tomcat is correctly using java 17. Seems like what is wrong is your path variable, so running java on your command line does not use the newly installed java 17. Also: you should build a new docker image with java 17, as installing it in the container will be reverted when it&#39;s being recreated."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1647332318,"post_id":71478876,"comment_id":126338187,"body_markdown":"`javax.servlet.http.ServletRequest` is not part of the JDK - not of the JDK 11 and also not of the JDK 17. Tomcat however should include it. Which version of Tomcat are you using?","body":"<code>javax.servlet.http.ServletRequest</code> is not part of the JDK - not of the JDK 11 and also not of the JDK 17. Tomcat however should include it. Which version of Tomcat are you using?"},{"owner":{"account_id":24562486,"reputation":1,"user_id":18470034,"display_name":"신종호"},"score":0,"creation_date":1647332359,"post_id":71478876,"comment_id":126338202,"body_markdown":"thank you for answer but the code still doesn&#39;t work..","body":"thank you for answer but the code still doesn&#39;t work.."},{"owner":{"account_id":24562486,"reputation":1,"user_id":18470034,"display_name":"신종호"},"score":0,"creation_date":1647332414,"post_id":71478876,"comment_id":126338216,"body_markdown":"I think it is tomcat 10 latest version","body":"I think it is tomcat 10 latest version"},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1647339580,"post_id":71478876,"comment_id":126340834,"body_markdown":"You have tomcat images with jdk17 - https://hub.docker.com/_/tomcat?tab=tags&amp;page=1&amp;name=jdk17","body":"You have tomcat images with jdk17 - <a href=\"https://hub.docker.com/_/tomcat?tab=tags&amp;page=1&amp;name=jdk17\" rel=\"nofollow noreferrer\">hub.docker.com/_/tomcat?tab=tags&amp;page=1&amp;name=jdk17</a>"},{"owner":{"account_id":3093883,"reputation":1982,"user_id":2619479,"display_name":"Marco"},"score":0,"creation_date":1647342641,"post_id":71478876,"comment_id":126341921,"body_markdown":"can you share here the Dockerfile ?","body":"can you share here the Dockerfile ?"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1647344685,"post_id":71478876,"comment_id":126342620,"body_markdown":"_&quot;The code is working on eclipse with tomcat 10 and jdk17.0.2&quot;_: I somehow doubt that, since Tomcat 10 uses `jakarta.servlet.http.HttpServletRequest` instead of `javax.servlet.http.HttpServletRequest`.","body":"<i>&quot;The code is working on eclipse with tomcat 10 and jdk17.0.2&quot;</i>: I somehow doubt that, since Tomcat 10 uses <code>jakarta.servlet.http.HttpServletRequest</code> instead of <code>javax.servlet.http.HttpServletRequest</code>."}],"owner":{"account_id":24562486,"reputation":1,"user_id":18470034,"display_name":"신종호"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1717,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647332961,"creation_date":1647331848,"question_id":71478876,"body_markdown":"I want to use jdk-17 in tomcat container on docker\r\ncuz openjdk-11.0.14.1+1 which is now on the tomcat doesn&#39;t support my code\r\n(Error : The type javax.servlet.http.HttpServletRequest cannot be resolved.)\r\nwhich make me sad\r\n\r\nThe code is working on eclipse with tomcat 10 and jdk17.0.2\r\n\r\nso I tried to download jdk17 on tomcat \r\nand change the path on /usr/local/tomcat/bin/catalina.sh\r\n\r\n    Using CATALINA_BASE:   /usr/local/tomcat\r\n    Using CATALINA_HOME:   /usr/local/tomcat\r\n    Using CATALINA_TMPDIR: /usr/local/tomcat/temp\r\n    Using JRE_HOME:        /usr/lib/jvm/jdk-17\r\n    Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\r\n    Using CATALINA_OPTS:\r\n    Tomcat started.\r\n\r\nbut the java --version\r\n\r\n    openjdk 11.0.14 2022-01-18\r\n    OpenJDK Runtime Environment (build 11.0.14+9-post-Debian-1deb11u1)\r\n    OpenJDK 64-Bit Server VM (build 11.0.14+9-post-Debian-1deb11u1, mixed mode, sharing)\r\n\r\nis still same\r\n\r\ncould you help me to let me know how to fix it..","title":"How to change jdk version in tomcat which is on the docker","body":"<p>I want to use jdk-17 in tomcat container on docker\ncuz openjdk-11.0.14.1+1 which is now on the tomcat doesn't support my code\n(Error : The type javax.servlet.http.HttpServletRequest cannot be resolved.)\nwhich make me sad</p>\n<p>The code is working on eclipse with tomcat 10 and jdk17.0.2</p>\n<p>so I tried to download jdk17 on tomcat\nand change the path on /usr/local/tomcat/bin/catalina.sh</p>\n<pre><code>Using CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /usr/local/tomcat/temp\nUsing JRE_HOME:        /usr/lib/jvm/jdk-17\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nUsing CATALINA_OPTS:\nTomcat started.\n</code></pre>\n<p>but the java --version</p>\n<pre><code>openjdk 11.0.14 2022-01-18\nOpenJDK Runtime Environment (build 11.0.14+9-post-Debian-1deb11u1)\nOpenJDK 64-Bit Server VM (build 11.0.14+9-post-Debian-1deb11u1, mixed mode, sharing)\n</code></pre>\n<p>is still same</p>\n<p>could you help me to let me know how to fix it..</p>\n"},{"tags":["java","spring","spring-boot","kotlin","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":1535603,"reputation":13409,"user_id":1431750,"accept_rate":100,"display_name":"aneroid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647288486,"creation_date":1647199289,"answer_id":71460084,"question_id":71459541,"body_markdown":"You can make the adjustment by checking the size of the last item in the result, and if it&#39;s smaller than the `chunkSize`, then append it to the second-last item of the result:\r\n\r\n```kotlin\r\nfun main() {\r\n    val l = listOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\r\n    val chunkSize = 3\r\n    val c = l.chunked(chunkSize)\r\n        .let {\r\n            println(it)  // basic chunked result\r\n            if (it.size &gt;= 2 &amp;&amp; it.last().size &lt; chunkSize)\r\n                it.dropLast(2) + listOf(it.takeLast(2).flatten())\r\n            else\r\n                it\r\n        }\r\n    println(c)\r\n}\r\n```\r\n\r\nOutput for `listOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)`:\r\n```python\r\n[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]\r\n[[1, 2, 3], [4, 5, 6], [7, 8, 9, 10]]\r\n```\r\n\r\nOutput for exactly correct ending chunks, with `listOf(1, 2, 3, 4, 5, 6, 7, 8, 9)`:\r\n```python\r\n[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\r\n[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\r\n```\r\n\r\nHere&#39;s an extension function which does that using generics, so chunking + merging for Iterables of any type:\r\n\r\n```kotlin\r\nfun &lt;T&gt; Iterable&lt;T&gt;.chunkedMergeSmall(chunkSize: Int) =\r\n    chunked(chunkSize)\r\n    .let {\r\n        println(it)\r\n        if (it.size &gt;= 2 &amp;&amp; it.last().size &lt; chunkSize)\r\n            it.dropLast(2) + listOf(it.takeLast(2).flatten())\r\n        else\r\n            it\r\n    }\r\n\r\n// println(list.chunkedMergeSmall(3))\r\n```","title":"Any Way to Control Remaining Item on Spring Batch?","body":"<p>You can make the adjustment by checking the size of the last item in the result, and if it's smaller than the <code>chunkSize</code>, then append it to the second-last item of the result:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun main() {\n    val l = listOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\n    val chunkSize = 3\n    val c = l.chunked(chunkSize)\n        .let {\n            println(it)  // basic chunked result\n            if (it.size &gt;= 2 &amp;&amp; it.last().size &lt; chunkSize)\n                it.dropLast(2) + listOf(it.takeLast(2).flatten())\n            else\n                it\n        }\n    println(c)\n}\n</code></pre>\n<p>Output for <code>listOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]\n[[1, 2, 3], [4, 5, 6], [7, 8, 9, 10]]\n</code></pre>\n<p>Output for exactly correct ending chunks, with <code>listOf(1, 2, 3, 4, 5, 6, 7, 8, 9)</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n<p>Here's an extension function which does that using generics, so chunking + merging for Iterables of any type:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T&gt; Iterable&lt;T&gt;.chunkedMergeSmall(chunkSize: Int) =\n    chunked(chunkSize)\n    .let {\n        println(it)\n        if (it.size &gt;= 2 &amp;&amp; it.last().size &lt; chunkSize)\n            it.dropLast(2) + listOf(it.takeLast(2).flatten())\n        else\n            it\n    }\n\n// println(list.chunkedMergeSmall(3))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23110408,"reputation":6937,"user_id":17218429,"display_name":"lukas.j"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1647332725,"creation_date":1647203978,"answer_id":71460663,"question_id":71459541,"body_markdown":"    for (i in 1..12) {   // added for testing\r\n    \r\n      val list = IntArray(i) { it + 1 }.toList()\r\n    \r\n      val result = list\r\n        .chunked(3)\r\n        .groupBy { it.count() }\r\n        .run {\r\n          values.flatten().run {\r\n            when (keys.size) {\r\n              1    -&gt; this\r\n              else -&gt; dropLast(2).plusElement(takeLast(2).flatten())\r\n            }\r\n          }\r\n        }\r\n    \r\n      println(result)\r\n    \r\n    }\r\n\r\nTest output:\r\n\r\n    [[1]]\r\n    [[1, 2]]\r\n    [[1, 2, 3]]\r\n    [[1, 2, 3, 4]]\r\n    [[1, 2, 3, 4, 5]]\r\n    [[1, 2, 3], [4, 5, 6]]\r\n    [[1, 2, 3], [4, 5, 6, 7]]\r\n    [[1, 2, 3], [4, 5, 6, 7, 8]]\r\n    [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\r\n    [[1, 2, 3], [4, 5, 6], [7, 8, 9, 10]]\r\n    [[1, 2, 3], [4, 5, 6], [7, 8, 9, 10, 11]]\r\n    [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]\r\n\r\n","title":"Any Way to Control Remaining Item on Spring Batch?","body":"<pre><code>for (i in 1..12) {   // added for testing\n\n  val list = IntArray(i) { it + 1 }.toList()\n\n  val result = list\n    .chunked(3)\n    .groupBy { it.count() }\n    .run {\n      values.flatten().run {\n        when (keys.size) {\n          1    -&gt; this\n          else -&gt; dropLast(2).plusElement(takeLast(2).flatten())\n        }\n      }\n    }\n\n  println(result)\n\n}\n</code></pre>\n<p>Test output:</p>\n<pre><code>[[1]]\n[[1, 2]]\n[[1, 2, 3]]\n[[1, 2, 3, 4]]\n[[1, 2, 3, 4, 5]]\n[[1, 2, 3], [4, 5, 6]]\n[[1, 2, 3], [4, 5, 6, 7]]\n[[1, 2, 3], [4, 5, 6, 7, 8]]\n[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n[[1, 2, 3], [4, 5, 6], [7, 8, 9, 10]]\n[[1, 2, 3], [4, 5, 6], [7, 8, 9, 10, 11]]\n[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]\n</code></pre>\n"}],"owner":{"account_id":13412688,"reputation":29,"user_id":9678466,"display_name":"JR_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71460663,"answer_count":2,"score":0,"last_activity_date":1647332725,"creation_date":1647195263,"question_id":71459541,"body_markdown":"If I have items like this\r\n```text\r\n-&gt; [1,2,3,4,5,6,7,8,9,10]\r\n```\r\nAnd if ChunkSize =3, **spring batch ItemReader** reads item like\r\n```text\r\n[1,2,3]\r\n[4,5,6]\r\n[7,8,9]\r\n[10]\r\n```\r\nBut, I want to \r\n\r\n```\r\n[1,2,3]\r\n[4,5,6]\r\n[7,8,9,10]\r\n```\r\nIs there any way to do this?","title":"Any Way to Control Remaining Item on Spring Batch?","body":"<p>If I have items like this</p>\n<pre><code>-&gt; [1,2,3,4,5,6,7,8,9,10]\n</code></pre>\n<p>And if ChunkSize =3, <strong>spring batch ItemReader</strong> reads item like</p>\n<pre><code>[1,2,3]\n[4,5,6]\n[7,8,9]\n[10]\n</code></pre>\n<p>But, I want to</p>\n<pre><code>[1,2,3]\n[4,5,6]\n[7,8,9,10]\n</code></pre>\n<p>Is there any way to do this?</p>\n"},{"tags":["java","java-stream","completable-future"],"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":1,"creation_date":1610285754,"post_id":65653367,"comment_id":116078720,"body_markdown":"@Holger: Please, post it as an answer. Now the potential answerers would fear the copying suspicion which might cause this question will be left unanswered. And I believe this is a nice question that deserves a proper answer.","body":"@Holger: Please, post it as an answer. Now the potential answerers would fear the copying suspicion which might cause this question will be left unanswered. And I believe this is a nice question that deserves a proper answer."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1610439114,"post_id":65653367,"comment_id":116125709,"body_markdown":"@NikolasCharalambidis didn’t have the time to write a full answer when I wrote the comment. If someone writes a full-fledged answer around that straight-forward one-liner (as someone did), they should not fear copying suspicion. In fact, posting it here has the intention to invite to copy and use it, not to avoid it.","body":"@NikolasCharalambidis didn’t have the time to write a full answer when I wrote the comment. If someone writes a full-fledged answer around that straight-forward one-liner (as someone did), they should not fear copying suspicion. In fact, posting it here has the intention to invite to copy and use it, not to avoid it."}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1610295457,"creation_date":1610287438,"answer_id":65654122,"question_id":65653367,"body_markdown":"Basically you need to wait for the results of all the `CompletableFuture`s and combine then to obtain the result required.\r\n\r\nThere are several approaches for that, but the `CompletableFuture` class provides the method [`allOf`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html#allOf(java.util.concurrent.CompletableFuture...)) that can be used for that purpose.\r\n\r\nWhen I have to do with a similar problem I like to follow the Tomasz Nurkiewicz [advice](https://www.nurkiewicz.com/2013/05/java-8-completablefuture-in-action.html) and perform this kind of computation in the following way.\r\n\r\nAs suggested in the article, first, let&#39;s define the following convenient method: `allOf` receives arguments as varargs and doesn&#39;t return a future of aggregated results; this method will allow you to overcome those drawbacks so you can pass a `Collection` as argument and return the `List` of actual results instead of `Void`.\r\n\r\n```java\r\nprivate static &lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; sequence(List&lt;CompletableFuture&lt;T&gt;&gt; futures) {\r\n    CompletableFuture&lt;Void&gt; allDoneFuture =\r\n        CompletableFuture.allOf(futures.toArray(new CompletableFuture[futures.size()]));\r\n    return allDoneFuture.thenApply(v -&gt;\r\n            futures.stream().\r\n                    map(future -&gt; future.join()).\r\n                    collect(Collectors.&lt;T&gt;toList())\r\n    );\r\n}\r\n```\r\n\r\nWith this handy method in place you can reduce your values with something like:\r\n\r\n```java\r\nfinal CompletableFuture&lt;List&lt;MyValue&gt;&gt; allDone = sequence(myValueFutures);\r\n\r\n// Please, see also for alternate approaches\r\n// https://stackoverflow.com/questions/43489281/return-value-directly-from-completablefuture-thenaccept\r\nfinal List&lt;MyValue&gt; myValues = allDone.join();\r\n\r\nfinal Optional&lt;MyValue&gt; optResult = myValues.stream().\r\n  reduce((t, t2) -&gt; t.combine(t2))\r\n;\r\n\r\n// Process the returned value as you consider appropriate\r\nfinal MyValue result = optResult.get();\r\n```","title":"Reduce List&lt;CompletableFuture&lt;T&gt;&gt;","body":"<p>Basically you need to wait for the results of all the <code>CompletableFuture</code>s and combine then to obtain the result required.</p>\n<p>There are several approaches for that, but the <code>CompletableFuture</code> class provides the method <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html#allOf(java.util.concurrent.CompletableFuture...)\" rel=\"nofollow noreferrer\"><code>allOf</code></a> that can be used for that purpose.</p>\n<p>When I have to do with a similar problem I like to follow the Tomasz Nurkiewicz <a href=\"https://www.nurkiewicz.com/2013/05/java-8-completablefuture-in-action.html\" rel=\"nofollow noreferrer\">advice</a> and perform this kind of computation in the following way.</p>\n<p>As suggested in the article, first, let's define the following convenient method: <code>allOf</code> receives arguments as varargs and doesn't return a future of aggregated results; this method will allow you to overcome those drawbacks so you can pass a <code>Collection</code> as argument and return the <code>List</code> of actual results instead of <code>Void</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static &lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; sequence(List&lt;CompletableFuture&lt;T&gt;&gt; futures) {\n    CompletableFuture&lt;Void&gt; allDoneFuture =\n        CompletableFuture.allOf(futures.toArray(new CompletableFuture[futures.size()]));\n    return allDoneFuture.thenApply(v -&gt;\n            futures.stream().\n                    map(future -&gt; future.join()).\n                    collect(Collectors.&lt;T&gt;toList())\n    );\n}\n</code></pre>\n<p>With this handy method in place you can reduce your values with something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final CompletableFuture&lt;List&lt;MyValue&gt;&gt; allDone = sequence(myValueFutures);\n\n// Please, see also for alternate approaches\n// https://stackoverflow.com/questions/43489281/return-value-directly-from-completablefuture-thenaccept\nfinal List&lt;MyValue&gt; myValues = allDone.join();\n\nfinal Optional&lt;MyValue&gt; optResult = myValues.stream().\n  reduce((t, t2) -&gt; t.combine(t2))\n;\n\n// Process the returned value as you consider appropriate\nfinal MyValue result = optResult.get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1610397484,"creation_date":1610292506,"answer_id":65654939,"question_id":65653367,"body_markdown":"It&#39;s interesting that in your initial example you already mention a method you have `combine`, while for `CompletableFuture` there is a dedicated method, just for that : `thenCombine` (and its two brothers `thenCombineAsync`).\r\n\r\n\r\nSo considering that you have something like:\r\n\r\n\r\n    static class MyValue {\r\n        final int x;\r\n\r\n        MyValue(int x) {\r\n            this.x = x;\r\n        }\r\n\r\n        MyValue combine(MyValue v){\r\n            return new MyValue(this.x + v .x);\r\n        }\r\n    }\r\n\r\n    static MyValue toMyValue(int x) {\r\n        return new MyValue(x);\r\n    }\r\n\r\nAnd:\r\n\r\n    List&lt;CompletableFuture&lt;Integer&gt;&gt; list = \r\n        IntStream.range(0, 4)\r\n                 .mapToObj(x -&gt; supplyAsync(() -&gt; x))\r\n                 .collect(Collectors.toList());\r\n\r\nYou could use one of the `thenCombine` methods and achieve what you want via:\r\n\r\n\r\n    MyValue value =\r\n        list.stream()\r\n            .map(x -&gt; x.thenApply(YourClass::toMyValue))\r\n            .reduce((left, right) -&gt; left.thenCombine(right, MyValue::combine))\r\n            .orElse(CompletableFuture.completedFuture(new MyValue(0)))\r\n            .join();\r\n\r\nIf you want to execute the combine action in a _predictable_ thread, you need a pool for that, or an overloaded method, like:\r\n\r\n\r\n    .reduce((left, right) -&gt; left.thenCombineAsync(right, MyValue::combine, MY_THREAD_POOL))","title":"Reduce List&lt;CompletableFuture&lt;T&gt;&gt;","body":"<p>It's interesting that in your initial example you already mention a method you have <code>combine</code>, while for <code>CompletableFuture</code> there is a dedicated method, just for that : <code>thenCombine</code> (and its two brothers <code>thenCombineAsync</code>).</p>\n<p>So considering that you have something like:</p>\n<pre><code>static class MyValue {\n    final int x;\n\n    MyValue(int x) {\n        this.x = x;\n    }\n\n    MyValue combine(MyValue v){\n        return new MyValue(this.x + v .x);\n    }\n}\n\nstatic MyValue toMyValue(int x) {\n    return new MyValue(x);\n}\n</code></pre>\n<p>And:</p>\n<pre><code>List&lt;CompletableFuture&lt;Integer&gt;&gt; list = \n    IntStream.range(0, 4)\n             .mapToObj(x -&gt; supplyAsync(() -&gt; x))\n             .collect(Collectors.toList());\n</code></pre>\n<p>You could use one of the <code>thenCombine</code> methods and achieve what you want via:</p>\n<pre><code>MyValue value =\n    list.stream()\n        .map(x -&gt; x.thenApply(YourClass::toMyValue))\n        .reduce((left, right) -&gt; left.thenCombine(right, MyValue::combine))\n        .orElse(CompletableFuture.completedFuture(new MyValue(0)))\n        .join();\n</code></pre>\n<p>If you want to execute the combine action in a <em>predictable</em> thread, you need a pool for that, or an overloaded method, like:</p>\n<pre><code>.reduce((left, right) -&gt; left.thenCombineAsync(right, MyValue::combine, MY_THREAD_POOL))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":55444,"reputation":5230,"user_id":166062,"display_name":"Lari Hotari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647332625,"creation_date":1647332625,"answer_id":71479046,"question_id":65653367,"body_markdown":"This is not a direct answer to your question of going from `List&lt;CompeletableFuture&lt;MyValue&gt;&gt;` to a single `MyValue`\r\n\r\nThere&#39;s a library com.spotify:completable-futures which can easily reduce a `List&lt;CompletableFuture&lt;T&gt;&gt;` to `CompletableFuture&lt;List&lt;T&gt;&gt;`. That might be the most common use case.\r\n\r\nhttps://github.com/spotify/completable-futures","title":"Reduce List&lt;CompletableFuture&lt;T&gt;&gt;","body":"<p>This is not a direct answer to your question of going from <code>List&lt;CompeletableFuture&lt;MyValue&gt;&gt;</code> to a single <code>MyValue</code></p>\n<p>There's a library com.spotify:completable-futures which can easily reduce a <code>List&lt;CompletableFuture&lt;T&gt;&gt;</code> to <code>CompletableFuture&lt;List&lt;T&gt;&gt;</code>. That might be the most common use case.</p>\n<p><a href=\"https://github.com/spotify/completable-futures\" rel=\"nofollow noreferrer\">https://github.com/spotify/completable-futures</a></p>\n"}],"owner":{"account_id":1156400,"reputation":1201,"user_id":1136878,"accept_rate":41,"display_name":"Jihun No"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1829,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1647332625,"creation_date":1610282358,"question_id":65653367,"body_markdown":"When `ints` is given:\r\n```\r\nList&lt;Integer&gt; ints = IntStream.range(0, 1000).boxed().collect(Collectors.toList());\r\n```\r\n\r\nWith Java Stream API, we can reduce them \r\n```\r\nMyValue myvalue = ints\r\n        .parallelStream()\r\n        .map(x -&gt; toMyValue(x))\r\n        .reduce((t, t2) -&gt; t.combine(t2))\r\n        .get();\r\n```\r\n\r\nIn this example, what important to me are...\r\n* items will be reduced in multiple threads\r\n* early mapped items will be reduced early\r\n* not all result of `toMyValue()` will be loaded at the same time\r\n\r\n\r\nNow I want to do same processing by `CompletableFuture` API.\r\n\r\nTo do map, I did:\r\n\r\n```\r\nList&lt;CompeletableFuture&lt;MyValue&gt;&gt; myValueFutures = ints\r\n        .stream()\r\n        .map(x -&gt; CompletableFuture.supplyAsync(() -&gt; toMyValue(x), MY_THREAD_POOL))\r\n        .collect(Collectors.toList());\r\n```\r\n\r\nAnd now I have no idea how to reduce `List&lt;CompeletableFuture&lt;MyValue&gt;&gt; myValueFutures` to get single `MyValue`.\r\n\r\nParallel stream provides convenient APIs but because of these problems I want not to use Stream API:\r\n* parallel stream is hard to stop the stage during processing.\r\n* parallel stream&#39;s active worker count can exceed the parallelism when some workers blocked by IO. This helps to maximize cpu utilization but memory overhead can occur(even OOM).\r\n\r\n\r\nAny way to reduce CompetableFutures? one by one with out stream reduce api?","title":"Reduce List&lt;CompletableFuture&lt;T&gt;&gt;","body":"<p>When <code>ints</code> is given:</p>\n<pre><code>List&lt;Integer&gt; ints = IntStream.range(0, 1000).boxed().collect(Collectors.toList());\n</code></pre>\n<p>With Java Stream API, we can reduce them</p>\n<pre><code>MyValue myvalue = ints\n        .parallelStream()\n        .map(x -&gt; toMyValue(x))\n        .reduce((t, t2) -&gt; t.combine(t2))\n        .get();\n</code></pre>\n<p>In this example, what important to me are...</p>\n<ul>\n<li>items will be reduced in multiple threads</li>\n<li>early mapped items will be reduced early</li>\n<li>not all result of <code>toMyValue()</code> will be loaded at the same time</li>\n</ul>\n<p>Now I want to do same processing by <code>CompletableFuture</code> API.</p>\n<p>To do map, I did:</p>\n<pre><code>List&lt;CompeletableFuture&lt;MyValue&gt;&gt; myValueFutures = ints\n        .stream()\n        .map(x -&gt; CompletableFuture.supplyAsync(() -&gt; toMyValue(x), MY_THREAD_POOL))\n        .collect(Collectors.toList());\n</code></pre>\n<p>And now I have no idea how to reduce <code>List&lt;CompeletableFuture&lt;MyValue&gt;&gt; myValueFutures</code> to get single <code>MyValue</code>.</p>\n<p>Parallel stream provides convenient APIs but because of these problems I want not to use Stream API:</p>\n<ul>\n<li>parallel stream is hard to stop the stage during processing.</li>\n<li>parallel stream's active worker count can exceed the parallelism when some workers blocked by IO. This helps to maximize cpu utilization but memory overhead can occur(even OOM).</li>\n</ul>\n<p>Any way to reduce CompetableFutures? one by one with out stream reduce api?</p>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":1807690,"reputation":3480,"user_id":1644440,"accept_rate":100,"display_name":"Zhedar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593702357,"creation_date":1395014878,"answer_id":22444871,"question_id":22444731,"body_markdown":"As far as I know `MyPerson::getAge` is like a pointer to `MyPerson`s getAge() method, which returns an `int`. So `value.getAge()` gets invoked in `int applyAsInt(MyPerson value);`.\r\nIn other words: You just tell the stream, that it should use `getAge()`s return value from it&#39;s current `MyPerson` iteration variable to construct &lt;strike&gt;another collection&lt;/strike&gt; an [IntStream][1].\r\n\r\n\r\n  [1]: http://download.java.net/jdk8/docs/api/java/util/stream/IntStream.html","title":"Java 8 mapToInt and toIntFunction examples","body":"<p>As far as I know <code>MyPerson::getAge</code> is like a pointer to <code>MyPerson</code>s getAge() method, which returns an <code>int</code>. So <code>value.getAge()</code> gets invoked in <code>int applyAsInt(MyPerson value);</code>.\nIn other words: You just tell the stream, that it should use <code>getAge()</code>s return value from it's current <code>MyPerson</code> iteration variable to construct <strike>another collection</strike> an <a href=\"http://download.java.net/jdk8/docs/api/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\">IntStream</a>.</p>\n"},{"tags":[],"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1395015747,"creation_date":1395015372,"answer_id":22444933,"question_id":22444731,"body_markdown":"Remember a method reference is just a shortcut for a lambda. So an instance method reference is a lambda that calls that method on the argument. The type of the argument is the class given in the method reference. It helps to &quot;unwrap&quot; it.\r\n\r\n    MyPerson::getAge\r\n\r\nUnwrap to a lambda:\r\n\r\n    (MyPerson p) -&gt; p.getAge()\r\n\r\nUnwrap to an anonymous class:\r\n\r\n    new ToIntFunction&lt;MyPerson&gt;() {\r\n        @Override\r\n        public int applyAsInt(MyPerson p) {\r\n            return p.getAge();\r\n        }\r\n    }\r\n\r\nWith a static method reference, the signature must match exactly, that is, the static method takes a `T` and returns an `int`. With an instance method reference, the parameter `T` of the lambda is the object the method gets called on.","title":"Java 8 mapToInt and toIntFunction examples","body":"<p>Remember a method reference is just a shortcut for a lambda. So an instance method reference is a lambda that calls that method on the argument. The type of the argument is the class given in the method reference. It helps to \"unwrap\" it.</p>\n\n<pre><code>MyPerson::getAge\n</code></pre>\n\n<p>Unwrap to a lambda:</p>\n\n<pre><code>(MyPerson p) -&gt; p.getAge()\n</code></pre>\n\n<p>Unwrap to an anonymous class:</p>\n\n<pre><code>new ToIntFunction&lt;MyPerson&gt;() {\n    @Override\n    public int applyAsInt(MyPerson p) {\n        return p.getAge();\n    }\n}\n</code></pre>\n\n<p>With a static method reference, the signature must match exactly, that is, the static method takes a <code>T</code> and returns an <code>int</code>. With an instance method reference, the parameter <code>T</code> of the lambda is the object the method gets called on.</p>\n"}],"owner":{"account_id":2979658,"reputation":4791,"user_id":2529921,"accept_rate":72,"display_name":"chiperortiz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11841,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":22444933,"answer_count":2,"score":8,"last_activity_date":1647332573,"creation_date":1395013917,"question_id":22444731,"body_markdown":"I am testing the new major update from Java (Java 8) and it is very interesting. I am using streams; in particular I am using this simple code.\r\n\r\n    private void getAvg()\r\n    {\r\n        final ArrayList&lt;MyPerson&gt;persons = new ArrayList&lt;&gt;\r\n        (Arrays.asList(new MyPerson(&quot;Ringo&quot;,&quot;Starr&quot;),new MyPerson(&quot;John&quot;,&quot;Lennon&quot;),new MyPerson(&quot;Paul&quot;,&quot;Mccartney&quot;),new MyPerson(&quot;George&quot;,&quot;Harrison&quot;)));                \r\n        final OptionalDouble average = persons.stream().filter(p-&gt;p.age&gt;=40).mapToInt(p-&gt;p.age).average();\r\n        average.ifPresent(System.out::println);        \r\n        return;\r\n    }            \r\n    private class MyPerson\r\n    {\r\n        private final Random random = new Random();\r\n        private final String name,lastName;\r\n        private int age;\r\n        public MyPerson(String name,String lastName){this.name = name;this.lastName = lastName;this.age=random.nextInt(100);}    \r\n        public MyPerson(String name,String lastName,final int age){this(name,lastName);this.age=age;}    \r\n        public String getName(){return name;}\r\n        public String getLastName(){return lastName;}                   \r\n        public int getAge(){return age;}        \r\n    }            \r\n\r\nIn this example I understand very clear but later I have seen also can accomplish it in this way:\r\n\r\n    final OptionalDouble average = persons.stream().filter(p-&gt;p.age&gt;=40)\r\n    .mapToInt(MyPerson::getAge).average();\r\n    average.ifPresent(System.out::println);        \r\n\r\nI have checked the method **toIntFunction** and in fact have the following signature:\r\n\r\n    @FunctionalInterface\r\n    public interface ToIntFunction&lt;T&gt; {\r\n\r\n    /**\r\n     * Applies this function to the given argument.\r\n     *\r\n     * @param value the function argument\r\n     * @return the function result\r\n     */\r\n    int applyAsInt(T value);\r\n    }\r\n\r\nAs I can see the applyAsInt have a input and returns an int as long as I understand.\r\n\r\nThis code:\r\n\r\n    MyPerson::getAge\r\n\r\ncalls:\r\n\r\n    public int getAge(){return age;}//please correct me at this point        \r\n\r\nMy question is: the method `getAge` have not parameters and returns a **int** but the *toIntFunction* receive a parameter - this is the part I don&#39;t understand.\r\n\r\nThe parameter from `toIntFunction` is inferred or something.\r\n","title":"Java 8 mapToInt and toIntFunction examples","body":"<p>I am testing the new major update from Java (Java 8) and it is very interesting. I am using streams; in particular I am using this simple code.</p>\n<pre><code>private void getAvg()\n{\n    final ArrayList&lt;MyPerson&gt;persons = new ArrayList&lt;&gt;\n    (Arrays.asList(new MyPerson(&quot;Ringo&quot;,&quot;Starr&quot;),new MyPerson(&quot;John&quot;,&quot;Lennon&quot;),new MyPerson(&quot;Paul&quot;,&quot;Mccartney&quot;),new MyPerson(&quot;George&quot;,&quot;Harrison&quot;)));                \n    final OptionalDouble average = persons.stream().filter(p-&gt;p.age&gt;=40).mapToInt(p-&gt;p.age).average();\n    average.ifPresent(System.out::println);        \n    return;\n}            \nprivate class MyPerson\n{\n    private final Random random = new Random();\n    private final String name,lastName;\n    private int age;\n    public MyPerson(String name,String lastName){this.name = name;this.lastName = lastName;this.age=random.nextInt(100);}    \n    public MyPerson(String name,String lastName,final int age){this(name,lastName);this.age=age;}    \n    public String getName(){return name;}\n    public String getLastName(){return lastName;}                   \n    public int getAge(){return age;}        \n}            \n</code></pre>\n<p>In this example I understand very clear but later I have seen also can accomplish it in this way:</p>\n<pre><code>final OptionalDouble average = persons.stream().filter(p-&gt;p.age&gt;=40)\n.mapToInt(MyPerson::getAge).average();\naverage.ifPresent(System.out::println);        \n</code></pre>\n<p>I have checked the method <strong>toIntFunction</strong> and in fact have the following signature:</p>\n<pre><code>@FunctionalInterface\npublic interface ToIntFunction&lt;T&gt; {\n\n/**\n * Applies this function to the given argument.\n *\n * @param value the function argument\n * @return the function result\n */\nint applyAsInt(T value);\n}\n</code></pre>\n<p>As I can see the applyAsInt have a input and returns an int as long as I understand.</p>\n<p>This code:</p>\n<pre><code>MyPerson::getAge\n</code></pre>\n<p>calls:</p>\n<pre><code>public int getAge(){return age;}//please correct me at this point        \n</code></pre>\n<p>My question is: the method <code>getAge</code> have not parameters and returns a <strong>int</strong> but the <em>toIntFunction</em> receive a parameter - this is the part I don't understand.</p>\n<p>The parameter from <code>toIntFunction</code> is inferred or something.</p>\n"},{"tags":["java","arrays","shift"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1647303144,"post_id":71475566,"comment_id":126332944,"body_markdown":"`for (i = oldScores.length - 1; i &gt;= 0; i--)` This is just a regular `for` loop but in reverse.","body":"<code>for (i = oldScores.length - 1; i &gt;= 0; i--)</code> This is just a regular <code>for</code> loop but in reverse."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1647303627,"post_id":71475566,"comment_id":126333024,"body_markdown":"`for (i = 0; i &lt; oldScores.length; ++i) { newScores[i] = oldScores[(i + 1) % SCORES_SIZE]; }`","body":"<code>for (i = 0; i &lt; oldScores.length; ++i) { newScores[i] = oldScores[(i + 1) % SCORES_SIZE]; }</code>"}],"answers":[{"tags":[],"owner":{"account_id":24559026,"reputation":11,"user_id":18467110,"display_name":"Артем Мещерин"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647303583,"creation_date":1647303242,"answer_id":71475590,"question_id":71475566,"body_markdown":"You forgot about the first element, it should be in the last place and you don&#39;t need a second array, you can just move all the elements to the left side except the first one.","title":"How do I shift an array to the left into a new array?","body":"<p>You forgot about the first element, it should be in the last place and you don't need a second array, you can just move all the elements to the left side except the first one.</p>\n"}],"owner":{"account_id":24389918,"reputation":7,"user_id":18320042,"display_name":"Nereida"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":626,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1647332205,"creation_date":1647303004,"question_id":71475566,"body_markdown":"Write a loop that sets newScores to oldScores shifted once left, with element 0 copied to the end. Ex: If oldScores = {10, 20, 30, 40}, then newScores = {20, 30, 40, 10}.\r\n\r\n**This is my code**\r\n\r\nWhat am I missing in order to shift it to the left? My output is the same as the input.\r\n\r\n```import java.util.Scanner;\r\n   public class StudentScores {\r\n   public static void main (String [] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      final int SCORES_SIZE = 4;\r\n      int[] oldScores = new int[SCORES_SIZE];\r\n      int[] newScores = new int[SCORES_SIZE];\r\n      int i;\r\n\r\n      for (i = 0; i &lt; oldScores.length; ++i) {\r\n          oldScores[i] = scnr.nextInt();\r\n      }\r\n      for (i = oldScores.length - 1; i &gt;= 0; i--)\r\n      {\r\n           newScores[i] = oldScores[i];\r\n      }\r\n      for (i = 0; i &lt; newScores.length; ++i) {\r\n          System.out.print(newScores[i] + &quot; &quot;);\r\n      }\r\n          System.out.println();\r\n   }\r\n}```","title":"How do I shift an array to the left into a new array?","body":"<p>Write a loop that sets newScores to oldScores shifted once left, with element 0 copied to the end. Ex: If oldScores = {10, 20, 30, 40}, then newScores = {20, 30, 40, 10}.</p>\n<p><strong>This is my code</strong></p>\n<p>What am I missing in order to shift it to the left? My output is the same as the input.</p>\n<pre><code>   public class StudentScores {\n   public static void main (String [] args) {\n      Scanner scnr = new Scanner(System.in);\n      final int SCORES_SIZE = 4;\n      int[] oldScores = new int[SCORES_SIZE];\n      int[] newScores = new int[SCORES_SIZE];\n      int i;\n\n      for (i = 0; i &lt; oldScores.length; ++i) {\n          oldScores[i] = scnr.nextInt();\n      }\n      for (i = oldScores.length - 1; i &gt;= 0; i--)\n      {\n           newScores[i] = oldScores[i];\n      }\n      for (i = 0; i &lt; newScores.length; ++i) {\n          System.out.print(newScores[i] + &quot; &quot;);\n      }\n          System.out.println();\n   }\n}```\n</code></pre>\n"},{"tags":["java","spring-boot","hazelcast","sink","mapdb"],"answers":[{"tags":[],"owner":{"account_id":7592512,"reputation":3070,"user_id":5759723,"display_name":"Neil Stevenson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646320683,"creation_date":1646320683,"answer_id":71339530,"question_id":71328598,"body_markdown":"Do you need a Map or a TreeMap ?\r\nIs collating sequence relevant for storage, for access or neither.\r\n\r\nFor Hazelcast, the chance for data loss is configurable. You set up a cluster with the level of resilience you want. This is the same as with disk, if you have one disk and it fails, you lose data. If you have two and one goes offline, you don&#39;t lose data. You allocate hardware for the level of resilience you need. Three is the recommended minimum.\r\n\r\n(10,000 per second isn&#39;t worrying either, 1,000,000,000 has been done. Sync to an external store can be immediate or in batches)\r\n\r\nDisclaimer, I work for Hazelcast, but I think your question is more fundamental -- how do you keep your store available.\r\n\r\nSimply, don&#39;t restart. \r\nClustered solutions are the answer here. If you have multiple nodes, the service as a whole stays running even if a few nodes go offline.\r\nDo rolling bounces.\r\n\r\nIf you must restart everything at once, what matters is how quickly can your service bring all data back and what does it do when the restore is 50% done (is 50% data visible?). Immediate replication to elsewhere is only really necessary if you have a clustered solution that hasn&#39;t been configured for resilience. Saving intermittently is fine if you have solved resilience.\r\n\r\nSo, configure your storage so that it doesn&#39;t go offline, makes the solution options for backup/restore all the easier.","title":"How to reboot application without losing the TreeMap kept in memory?","body":"<p>Do you need a Map or a TreeMap ?\nIs collating sequence relevant for storage, for access or neither.</p>\n<p>For Hazelcast, the chance for data loss is configurable. You set up a cluster with the level of resilience you want. This is the same as with disk, if you have one disk and it fails, you lose data. If you have two and one goes offline, you don't lose data. You allocate hardware for the level of resilience you need. Three is the recommended minimum.</p>\n<p>(10,000 per second isn't worrying either, 1,000,000,000 has been done. Sync to an external store can be immediate or in batches)</p>\n<p>Disclaimer, I work for Hazelcast, but I think your question is more fundamental -- how do you keep your store available.</p>\n<p>Simply, don't restart.\nClustered solutions are the answer here. If you have multiple nodes, the service as a whole stays running even if a few nodes go offline.\nDo rolling bounces.</p>\n<p>If you must restart everything at once, what matters is how quickly can your service bring all data back and what does it do when the restore is 50% done (is 50% data visible?). Immediate replication to elsewhere is only really necessary if you have a clustered solution that hasn't been configured for resilience. Saving intermittently is fine if you have solved resilience.</p>\n<p>So, configure your storage so that it doesn't go offline, makes the solution options for backup/restore all the easier.</p>\n"}],"owner":{"account_id":9515326,"reputation":85,"user_id":12472546,"display_name":"T. &#199;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647331926,"creation_date":1646251916,"question_id":71328598,"body_markdown":"In a Spring Boot application, I keep a TreeMap in memory. I&#39;m doing around 10,000 operations per second, and it may increase. To improve performance, I kept data in memory. I want my app to be able to start from the same state when application is restarted.\r\n\r\nThere are some methods I could find for this.\r\n1. Keeping data on Hazelcast.\r\nIn this case I don&#39;t risk losing the data unless the Hazelcast dies, but if the Hazelcast dies, I can&#39;t restore data. Additionally,  I don&#39;t think it makes sense to sync that amount of operations on Hazlecast.\r\n\r\n2. Synchronizing events to database.\r\nHere, my risk of data loss is very low. However, I need to execute a query after each operation. This may affect performance. Also, I need to handle exceptions on database update.\r\n\r\n3. Synchronizing data in batches\r\nThere is only one ready solution that I could find here, [MapDB][1]. I&#39;m planning to try it but I haven&#39;t tried it yet. If there is a more reliable, optimized sink solution that also uses db instead of file, I would prefer to use it.\r\n\r\nAny recommendation to solve this question?\r\n\r\n\r\n  [1]: https://mapdb.org","title":"How to reboot application without losing the TreeMap kept in memory?","body":"<p>In a Spring Boot application, I keep a TreeMap in memory. I'm doing around 10,000 operations per second, and it may increase. To improve performance, I kept data in memory. I want my app to be able to start from the same state when application is restarted.</p>\n<p>There are some methods I could find for this.</p>\n<ol>\n<li><p>Keeping data on Hazelcast.\nIn this case I don't risk losing the data unless the Hazelcast dies, but if the Hazelcast dies, I can't restore data. Additionally,  I don't think it makes sense to sync that amount of operations on Hazlecast.</p>\n</li>\n<li><p>Synchronizing events to database.\nHere, my risk of data loss is very low. However, I need to execute a query after each operation. This may affect performance. Also, I need to handle exceptions on database update.</p>\n</li>\n<li><p>Synchronizing data in batches\nThere is only one ready solution that I could find here, <a href=\"https://mapdb.org\" rel=\"nofollow noreferrer\">MapDB</a>. I'm planning to try it but I haven't tried it yet. If there is a more reliable, optimized sink solution that also uses db instead of file, I would prefer to use it.</p>\n</li>\n</ol>\n<p>Any recommendation to solve this question?</p>\n"},{"tags":["java","spring","rest","quarkus"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1647254071,"post_id":71466221,"comment_id":126316348,"body_markdown":"Maybe you also need `@Consumes(MediaType.APPLICATION_JSON)`  .","body":"Maybe you also need <code>@Consumes(MediaType.APPLICATION_JSON)</code>  ."},{"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"score":0,"creation_date":1647254102,"post_id":71466221,"comment_id":126316364,"body_markdown":"@Arnaud Thanks a lot for the response I already tried that but did not work for me.","body":"@Arnaud Thanks a lot for the response I already tried that but did not work for me."},{"owner":{"account_id":2747016,"reputation":467,"user_id":2367228,"accept_rate":22,"display_name":"Rafa"},"score":0,"creation_date":1647254352,"post_id":71466221,"comment_id":126316467,"body_markdown":"Would you show the InputParameter class from both front end and back end!","body":"Would you show the InputParameter class from both front end and back end!"},{"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"score":0,"creation_date":1647255863,"post_id":71466221,"comment_id":126317009,"body_markdown":"@Rafa Thanks a lot for the response. I have modified my question and added the inputs, please check and let me know","body":"@Rafa Thanks a lot for the response. I have modified my question and added the inputs, please check and let me know"}],"answers":[{"tags":[],"owner":{"account_id":2747016,"reputation":467,"user_id":2367228,"accept_rate":22,"display_name":"Rafa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647272423,"creation_date":1647272089,"answer_id":71470351,"question_id":71466221,"body_markdown":"Dear in the back end the api is accepting an object of type InputParameter. For solving the problem you have to create a class the same as InputParameter class and generate an object of that and send that object to the back end.\r\n\r\nLet me know if you need more help!","title":"Method is not being detected when using the Custom class as input parameter type for the REST API service","body":"<p>Dear in the back end the api is accepting an object of type InputParameter. For solving the problem you have to create a class the same as InputParameter class and generate an object of that and send that object to the back end.</p>\n<p>Let me know if you need more help!</p>\n"},{"tags":[],"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1647331756,"creation_date":1647331756,"answer_id":71478860,"question_id":71466221,"body_markdown":"Posting the answer can be helpful to someone else in the future. I tried some things but nothing worked and finally following worked for me:\r\n\r\n```\r\n@POST\r\n@Path(&quot;/generate&quot;)\r\n@Produces(MediaType.APPLICATION_JSON)\r\n@APIResponses(value = {\r\n        @APIResponse(responseCode = &quot;200&quot;, description = &quot;returns list of JSON Objects&quot;),\r\n        @APIResponse(responseCode = &quot;500&quot;, description = &quot;An internal Server Error occurred&quot;)\r\n})\r\npublic String generate(final InputParameter inputParameter){\r\n    System.out.println(inputTemplate.toString());\r\n    return null;\r\n}\r\n\r\n```\r\n\r\nThere was also one small setting that I had to change related to `Jackson ObjectMapper` which is not relevant here because it&#39;s my project-specific that I missed in another class. Maybe that was the issue I was facing. Now everything is working as expected.","title":"Method is not being detected when using the Custom class as input parameter type for the REST API service","body":"<p>Posting the answer can be helpful to someone else in the future. I tried some things but nothing worked and finally following worked for me:</p>\n<pre><code>@POST\n@Path(&quot;/generate&quot;)\n@Produces(MediaType.APPLICATION_JSON)\n@APIResponses(value = {\n        @APIResponse(responseCode = &quot;200&quot;, description = &quot;returns list of JSON Objects&quot;),\n        @APIResponse(responseCode = &quot;500&quot;, description = &quot;An internal Server Error occurred&quot;)\n})\npublic String generate(final InputParameter inputParameter){\n    System.out.println(inputTemplate.toString());\n    return null;\n}\n\n</code></pre>\n<p>There was also one small setting that I had to change related to <code>Jackson ObjectMapper</code> which is not relevant here because it's my project-specific that I missed in another class. Maybe that was the issue I was facing. Now everything is working as expected.</p>\n"}],"owner":{"account_id":10278040,"reputation":2869,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71478860,"answer_count":2,"score":-1,"last_activity_date":1647331756,"creation_date":1647253587,"question_id":71466221,"body_markdown":"I am developing a Web application using `Vuejs/Nuxtjs` which makes call to my Java Service using the `Axios` but during the call I get the error: \r\n```\r\nPOST http://localhost:9001/generate 500 (Internal Server Error)\r\n```\r\n\r\nI am getting this error because my Java service type accepts the input parameter of Custom data type `InputParameter`. If I change to `String` then it works fine. So I would like to know what changes should I make to front-end call or to my Java Service so it can work with `InputParameter type`.\r\n\r\nFollowing is the Vuejs call that I am making to Java service:\r\n```\r\nconst headers = { &#39;Content-Type&#39;: &#39;application/json&#39; }\r\n\r\nthis.$axios.post(&#39;/generate&#39;, { ...JSON.parse(inputParameter) }, { headers })\r\n.then((response) =&gt; {\r\n    console.log(JSON.stringify(response.data))\r\n})\r\n.catch((error) =&gt; {\r\n    console.log(error)\r\n})\r\n```\r\n\r\nFollowing is my Java service method which is NOT working with custom data type `InputParameter`, the call does not detect the method and execution does not go within the method:\r\n```\r\n@Path(&quot;/generate&quot;)\r\n@Produces(MediaType.APPLICATION_JSON)\r\n@APIResponses(value = {\r\n        @APIResponse(responseCode = &quot;200&quot;, description = &quot;returns list of JSON Objects&quot;),\r\n        @APIResponse(responseCode = &quot;500&quot;, description = &quot;An internal Server Error occurred&quot;)\r\n})\r\npublic String generate(final InputParameter inputParameter){\r\n    System.out.println(inputTemplate.toString());\r\n    return null;\r\n}\r\n```\r\n\r\nIf I change the above JAVA Service method input parameter data type to String then the method is detected and input is printed:\r\n```\r\n@Path(&quot;/generate&quot;)\r\n@Produces(MediaType.APPLICATION_JSON)\r\n@APIResponses(value = {\r\n        @APIResponse(responseCode = &quot;200&quot;, description = &quot;returns list of JSON Objects&quot;),\r\n        @APIResponse(responseCode = &quot;500&quot;, description = &quot;An internal Server Error occurred&quot;)\r\n})\r\npublic String generate(final String inputParameter){\r\n    System.out.println(inputTemplate);\r\n    return null;\r\n}\r\n```\r\n\r\nI am not understanding whats wrong here. Can someone please help?\r\n\r\nThings I have tried:\r\n1. Adding `@Consumes(MediaType.APPLICATION_JSON)`.\r\n2. Changing the method to `public String generate(@RequestBody final InputParameter inputParameter)`\r\n\r\nMy `InputParameter` class looks something like this:\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class InputParameter {\r\n    private List&lt;String&gt; names;\r\n    private List&lt;String&gt; jobs;\r\n}\r\n```\r\n\r\nMy InputParameter which I am passing to Java Service looks something like this:\r\n```\r\n{\r\n  &quot;names&quot;:[\r\n    &quot;Batman&quot;,\r\n    &quot;Superman&quot;,\r\n    &quot;Ironman&quot;\r\n  ],\r\n  &quot;jobs&quot;:[\r\n    &quot;Fighting&quot;,\r\n    &quot;Fyling&quot;,\r\n    &quot;Teching&quot;\r\n  ]\r\n}","title":"Method is not being detected when using the Custom class as input parameter type for the REST API service","body":"<p>I am developing a Web application using <code>Vuejs/Nuxtjs</code> which makes call to my Java Service using the <code>Axios</code> but during the call I get the error:</p>\n<pre><code>POST http://localhost:9001/generate 500 (Internal Server Error)\n</code></pre>\n<p>I am getting this error because my Java service type accepts the input parameter of Custom data type <code>InputParameter</code>. If I change to <code>String</code> then it works fine. So I would like to know what changes should I make to front-end call or to my Java Service so it can work with <code>InputParameter type</code>.</p>\n<p>Following is the Vuejs call that I am making to Java service:</p>\n<pre><code>const headers = { 'Content-Type': 'application/json' }\n\nthis.$axios.post('/generate', { ...JSON.parse(inputParameter) }, { headers })\n.then((response) =&gt; {\n    console.log(JSON.stringify(response.data))\n})\n.catch((error) =&gt; {\n    console.log(error)\n})\n</code></pre>\n<p>Following is my Java service method which is NOT working with custom data type <code>InputParameter</code>, the call does not detect the method and execution does not go within the method:</p>\n<pre><code>@Path(&quot;/generate&quot;)\n@Produces(MediaType.APPLICATION_JSON)\n@APIResponses(value = {\n        @APIResponse(responseCode = &quot;200&quot;, description = &quot;returns list of JSON Objects&quot;),\n        @APIResponse(responseCode = &quot;500&quot;, description = &quot;An internal Server Error occurred&quot;)\n})\npublic String generate(final InputParameter inputParameter){\n    System.out.println(inputTemplate.toString());\n    return null;\n}\n</code></pre>\n<p>If I change the above JAVA Service method input parameter data type to String then the method is detected and input is printed:</p>\n<pre><code>@Path(&quot;/generate&quot;)\n@Produces(MediaType.APPLICATION_JSON)\n@APIResponses(value = {\n        @APIResponse(responseCode = &quot;200&quot;, description = &quot;returns list of JSON Objects&quot;),\n        @APIResponse(responseCode = &quot;500&quot;, description = &quot;An internal Server Error occurred&quot;)\n})\npublic String generate(final String inputParameter){\n    System.out.println(inputTemplate);\n    return null;\n}\n</code></pre>\n<p>I am not understanding whats wrong here. Can someone please help?</p>\n<p>Things I have tried:</p>\n<ol>\n<li>Adding <code>@Consumes(MediaType.APPLICATION_JSON)</code>.</li>\n<li>Changing the method to <code>public String generate(@RequestBody final InputParameter inputParameter)</code></li>\n</ol>\n<p>My <code>InputParameter</code> class looks something like this:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class InputParameter {\n    private List&lt;String&gt; names;\n    private List&lt;String&gt; jobs;\n}\n</code></pre>\n<p>My InputParameter which I am passing to Java Service looks something like this:</p>\n<pre><code>{\n  &quot;names&quot;:[\n    &quot;Batman&quot;,\n    &quot;Superman&quot;,\n    &quot;Ironman&quot;\n  ],\n  &quot;jobs&quot;:[\n    &quot;Fighting&quot;,\n    &quot;Fyling&quot;,\n    &quot;Teching&quot;\n  ]\n}\n</code></pre>\n"},{"tags":["java","quartz-scheduler"],"answers":[{"tags":[],"owner":{"account_id":1429360,"reputation":4094,"user_id":1352127,"accept_rate":45,"display_name":"Shailesh Pratapwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370499509,"creation_date":1370499509,"answer_id":16954943,"question_id":16954501,"body_markdown":"I am not sure about the cron triggers but for simple triggers yeah, \r\nif the end time of the trigger has been passed then some of the provided misfire instruction \r\nwill not work. See the [javadoc](http://quartz-scheduler.org/api/2.1.7/org/quartz/SimpleTrigger.html#MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT) snippet for more info.\r\nI guess the same would be the case with cron trigger too.\r\nSo, it totally depends on what cron expression you use.","title":"about misfire in java quartz scheduling","body":"<p>I am not sure about the cron triggers but for simple triggers yeah, \nif the end time of the trigger has been passed then some of the provided misfire instruction \nwill not work. See the <a href=\"http://quartz-scheduler.org/api/2.1.7/org/quartz/SimpleTrigger.html#MISFIRE_INSTRUCTION_RESCHEDULE_NEXT_WITH_REMAINING_COUNT\" rel=\"nofollow\">javadoc</a> snippet for more info.\nI guess the same would be the case with cron trigger too.\nSo, it totally depends on what cron expression you use.</p>\n"}],"owner":{"account_id":2863558,"reputation":1,"user_id":2458287,"display_name":"man"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1856,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647331421,"creation_date":1370497588,"question_id":16954501,"body_markdown":"I have set a trigger using `cronScheduler` with `misfireInstruction` like follows\r\n    \r\n         trigger = newTrigger().withIdentity(&quot;autoLockTrigger&quot;, &quot;autoLockGroup&quot;).startNow()\t\t\t\t\t.withSchedule(cronSchedule(croneExpression).withMisfireHandlingInstructionFireAndProceed())\r\n    \t\t\t\t\t.forJob(&quot;autoLockJob&quot;,&quot;autoLockGroup&quot;)\r\n    \t\t\t\t\t.build();\r\n        \r\n  my quartz.properties is like follows\r\n    \r\n    org.quartz.scheduler.instanceName =MyScheduler\r\n    \r\n    \r\n    # Configuring ThreadPool\r\n    org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool\r\n    org.quartz.threadPool.threadCount = 1\r\n    org.quartz.threadPool.threadPriority = 9\r\n    \r\n    org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX\r\n    org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate\r\n    org.quartz.jobStore.dataSource = myDS \r\n    org.quartz.jobStore.tablePrefix = QRTZ_\r\n    #org.quartz.dataSource.myDS.jndiURL = jdbc/vikas\r\n    \r\n    \r\n    org.quartz.dataSource.myDS.driver = com.mysql.jdbc.Driver\r\n    org.quartz.dataSource.myDS.URL = jdbc:mysql://staging:3307/facao\r\n    org.quartz.dataSource.myDS.user = root\r\n    org.quartz.dataSource.myDS.password = toor\r\n    org.quartz.dataSource.myDS.maxConnections = 30\r\n    \r\n    \r\n    #org.quartz.jobStore.nonManagedTXDataSource = myDS\r\n    #to store data in string format (name-value pair)\r\n    org.quartz.jobStore.useProperties=true   \r\n     \r\n    org.quartz.jobStore.misfireThreshold = 60000 \r\n    \r\n\r\n In my code if I set some trigger at particular time and if server is in running state then scheduler runs properly but if server is down for the time in which scheduler is suppose to be run and then started after some time then scheduler should run the misfired instruction. But in my case the misfired instruction is not running all the time it runs some time not always so my purpose is not fulfilled. Please give some solution. Thank you in advance.\r\n   ","title":"about misfire in java quartz scheduling","body":"<p>I have set a trigger using <code>cronScheduler</code> with <code>misfireInstruction</code> like follows</p>\n\n<pre><code>     trigger = newTrigger().withIdentity(\"autoLockTrigger\", \"autoLockGroup\").startNow()                 .withSchedule(cronSchedule(croneExpression).withMisfireHandlingInstructionFireAndProceed())\n                    .forJob(\"autoLockJob\",\"autoLockGroup\")\n                    .build();\n</code></pre>\n\n<p>my quartz.properties is like follows</p>\n\n<pre><code>org.quartz.scheduler.instanceName =MyScheduler\n\n\n# Configuring ThreadPool\norg.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool\norg.quartz.threadPool.threadCount = 1\norg.quartz.threadPool.threadPriority = 9\n\norg.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX\norg.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate\norg.quartz.jobStore.dataSource = myDS \norg.quartz.jobStore.tablePrefix = QRTZ_\n#org.quartz.dataSource.myDS.jndiURL = jdbc/vikas\n\n\norg.quartz.dataSource.myDS.driver = com.mysql.jdbc.Driver\norg.quartz.dataSource.myDS.URL = jdbc:mysql://staging:3307/facao\norg.quartz.dataSource.myDS.user = root\norg.quartz.dataSource.myDS.password = toor\norg.quartz.dataSource.myDS.maxConnections = 30\n\n\n#org.quartz.jobStore.nonManagedTXDataSource = myDS\n#to store data in string format (name-value pair)\norg.quartz.jobStore.useProperties=true   \n\norg.quartz.jobStore.misfireThreshold = 60000 \n</code></pre>\n\n<p>In my code if I set some trigger at particular time and if server is in running state then scheduler runs properly but if server is down for the time in which scheduler is suppose to be run and then started after some time then scheduler should run the misfired instruction. But in my case the misfired instruction is not running all the time it runs some time not always so my purpose is not fulfilled. Please give some solution. Thank you in advance.</p>\n"},{"tags":["python","java","c#"],"answers":[{"tags":[],"owner":{"account_id":23645117,"reputation":2433,"user_id":17674849,"display_name":"Tal Folkman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645346949,"creation_date":1645346949,"answer_id":71192760,"question_id":71192714,"body_markdown":"The problem with your code is that you ran `main()` after finishing in your last line of code\r\n\r\nThis will work great for you:\r\n\r\n```\r\ndef main():\r\n    for _ in range(10):\r\n        print(&quot;a. Celsius to Fahrenheit&quot;)\r\n        print(&quot;b. Fahrenheit to Celsius&quot;)\r\n\r\n        choice = str(input(&quot;Enter Choice:&quot;))\r\n\r\n        if choice == &quot;a&quot;:\r\n            def c_to_f(C):\r\n                return ((9 / 5) * C) + 32\r\n\r\n            temp = float(input(&quot;Enter Temp: &quot;))\r\n            print(temp, &quot;Celsius is&quot;, c_to_f(temp), &quot;Fahrenheit&quot;)\r\n\r\n        if choice == &quot;b&quot;:\r\n            def f_to_c(F):\r\n                return (5 / 9) * (F - 32)\r\n\r\n            temp = float(input(&quot;Enter Temp: &quot;))\r\n            print(temp, &quot;Fahrenheit is&quot;, f_to_c(temp), &quot;Celsius&quot;)\r\n\r\n        repeat = input(&quot;Do you want to convert again? (Yes/No): &quot;)\r\n        if repeat == &quot;yes&quot;:\r\n            main()\r\n        else:\r\n            exit()\r\n\r\n\r\nif __name__ == &#39;__main__&#39;:\r\n    main()\r\n```","title":"How to loop in python multiples times","body":"<p>The problem with your code is that you ran <code>main()</code> after finishing in your last line of code</p>\n<p>This will work great for you:</p>\n<pre><code>def main():\n    for _ in range(10):\n        print(&quot;a. Celsius to Fahrenheit&quot;)\n        print(&quot;b. Fahrenheit to Celsius&quot;)\n\n        choice = str(input(&quot;Enter Choice:&quot;))\n\n        if choice == &quot;a&quot;:\n            def c_to_f(C):\n                return ((9 / 5) * C) + 32\n\n            temp = float(input(&quot;Enter Temp: &quot;))\n            print(temp, &quot;Celsius is&quot;, c_to_f(temp), &quot;Fahrenheit&quot;)\n\n        if choice == &quot;b&quot;:\n            def f_to_c(F):\n                return (5 / 9) * (F - 32)\n\n            temp = float(input(&quot;Enter Temp: &quot;))\n            print(temp, &quot;Fahrenheit is&quot;, f_to_c(temp), &quot;Celsius&quot;)\n\n        repeat = input(&quot;Do you want to convert again? (Yes/No): &quot;)\n        if repeat == &quot;yes&quot;:\n            main()\n        else:\n            exit()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19252835,"reputation":257,"user_id":14070414,"display_name":"F&#233;lix Herbinet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645347771,"creation_date":1645347163,"answer_id":71192793,"question_id":71192714,"body_markdown":"Hi that&#39;s because variable has scope in which you can read their modifications, `repeat` modification in `main()` are not visible outside of their scope: here the `main` function.\r\n\r\nVariables thatcan be &quot;inspect&quot; everywhere are called globals, and you should declare them at the beggining of a file outside of a function.\r\n\r\nYou have many solution to your problem, if you want to stay close from your actual code, here is one:\r\n\r\n```py\r\nfrom sys import exit\r\n\r\ndef main():\r\n\tprint(&quot;a. Celsius to Fahrenheit&quot;)\r\n\tprint(&quot;b. Fahrenheit to Celsius&quot;)\r\n\r\n\tchoice = str(input(&quot;Enter Choice:&quot;))\r\n\r\n\tif choice == &quot;a&quot;:\r\n\t\tdef c_to_f(C):\r\n\t\t\treturn((9/5)*C) + 32\r\n\t\ttemp =float(input(&quot;Enter Temp: &quot;))\r\n\t\tprint(temp,&quot;Celsius is&quot;,c_to_f(temp),&quot;Fahrenheit&quot;)\r\n\t\t\r\n\tif choice ==&quot;b&quot;:\r\n\t\tdef f_to_c(F):\r\n\t\t\treturn (5/9)*(F-32)\r\n\t\ttemp =float(input(&quot;Enter Temp: &quot;))\r\n\t\tprint(temp,&quot;Fahrenheit is&quot;,f_to_c(temp),&quot;Celsius&quot;)\r\n\r\n\treturn input(&quot;Do you want to convert again? (Yes/No): &quot;)\r\n\r\n\r\nfor _ in range(10):\r\n\trepeat = main()\r\n\tif repeat.lower() == &#39;no&#39;:\r\n\t\texit()\r\n```","title":"How to loop in python multiples times","body":"<p>Hi that's because variable has scope in which you can read their modifications, <code>repeat</code> modification in <code>main()</code> are not visible outside of their scope: here the <code>main</code> function.</p>\n<p>Variables thatcan be &quot;inspect&quot; everywhere are called globals, and you should declare them at the beggining of a file outside of a function.</p>\n<p>You have many solution to your problem, if you want to stay close from your actual code, here is one:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from sys import exit\n\ndef main():\n    print(&quot;a. Celsius to Fahrenheit&quot;)\n    print(&quot;b. Fahrenheit to Celsius&quot;)\n\n    choice = str(input(&quot;Enter Choice:&quot;))\n\n    if choice == &quot;a&quot;:\n        def c_to_f(C):\n            return((9/5)*C) + 32\n        temp =float(input(&quot;Enter Temp: &quot;))\n        print(temp,&quot;Celsius is&quot;,c_to_f(temp),&quot;Fahrenheit&quot;)\n        \n    if choice ==&quot;b&quot;:\n        def f_to_c(F):\n            return (5/9)*(F-32)\n        temp =float(input(&quot;Enter Temp: &quot;))\n        print(temp,&quot;Fahrenheit is&quot;,f_to_c(temp),&quot;Celsius&quot;)\n\n    return input(&quot;Do you want to convert again? (Yes/No): &quot;)\n\n\nfor _ in range(10):\n    repeat = main()\n    if repeat.lower() == 'no':\n        exit()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17267872,"reputation":143,"user_id":12504196,"display_name":"Hassan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645347245,"creation_date":1645347245,"answer_id":71192798,"question_id":71192714,"body_markdown":"The problem with your code is your last user input.\r\n\r\nThis will work great for you:\r\n\r\n    def main():\r\n    \r\n        print(&quot;a. Celsius to Fahrenheit&quot;)\r\n        print(&quot;b. Fahrenheit to Celsius&quot;)\r\n    \r\n        choice = str(input(&quot;Enter Choice:&quot;))\r\n    \r\n        if choice == &quot;a&quot;:\r\n            def c_to_f(C):\r\n                return((9/5)*C) + 32\r\n            temp =float(input(&quot;Enter Temp: &quot;))\r\n            print(temp,&quot;Celsius is&quot;,c_to_f(temp),&quot;Fahrenheit&quot;)\r\n            \r\n        if choice ==&quot;b&quot;:\r\n            def f_to_c(F):\r\n                return (5/9)*(F-32)\r\n            temp =float(input(&quot;Enter Temp: &quot;))\r\n            print(temp,&quot;Fahrenheit is&quot;,f_to_c(temp),&quot;Celsius&quot;)\r\n    \r\n        repeat = str(input(&quot;Do you want to convert again? (Yes/No): &quot;))\r\n    \r\n        for _ in range(10):\r\n            if repeat == &quot;yes&quot; or repeat == &quot;Yes&quot;:\r\n                main()\r\n            else:\r\n                exit()\r\n    if __name__ == &#39;__main__&#39;:\r\n        main()\r\n\r\nHave Fun with CODE :)","title":"How to loop in python multiples times","body":"<p>The problem with your code is your last user input.</p>\n<p>This will work great for you:</p>\n<pre><code>def main():\n\n    print(&quot;a. Celsius to Fahrenheit&quot;)\n    print(&quot;b. Fahrenheit to Celsius&quot;)\n\n    choice = str(input(&quot;Enter Choice:&quot;))\n\n    if choice == &quot;a&quot;:\n        def c_to_f(C):\n            return((9/5)*C) + 32\n        temp =float(input(&quot;Enter Temp: &quot;))\n        print(temp,&quot;Celsius is&quot;,c_to_f(temp),&quot;Fahrenheit&quot;)\n        \n    if choice ==&quot;b&quot;:\n        def f_to_c(F):\n            return (5/9)*(F-32)\n        temp =float(input(&quot;Enter Temp: &quot;))\n        print(temp,&quot;Fahrenheit is&quot;,f_to_c(temp),&quot;Celsius&quot;)\n\n    repeat = str(input(&quot;Do you want to convert again? (Yes/No): &quot;))\n\n    for _ in range(10):\n        if repeat == &quot;yes&quot; or repeat == &quot;Yes&quot;:\n            main()\n        else:\n            exit()\nif __name__ == '__main__':\n    main()\n</code></pre>\n<p>Have Fun with CODE :)</p>\n"},{"tags":[],"owner":{"account_id":18924081,"reputation":64,"user_id":13807582,"display_name":"Hiten Tandon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647331414,"creation_date":1647331414,"answer_id":71478797,"question_id":71192714,"body_markdown":"This code should work\r\n\r\n        choice = &#39;y&#39;;\r\n        while choice != &#39;e&#39;:\r\n             choice = input(&#39;If you want to convert c to f press a\\nIf you want to convert f to c press b\\nIf you want to exit press e&#39;);\r\n             if choice == &#39;a&#39;:\r\n                 c = int(input(&#39;Enter temp in C&#39;));\r\n                 print(&quot;F =&quot;, c*1.8+32);\r\n             elif choice == &#39;b&#39;:\r\n                 f = int(input(&#39;Enter temp in F&#39;));\r\n                 print(&quot;C =&quot;, (F-32)/1.8);\r\n","title":"How to loop in python multiples times","body":"<p>This code should work</p>\n<pre><code>    choice = 'y';\n    while choice != 'e':\n         choice = input('If you want to convert c to f press a\\nIf you want to convert f to c press b\\nIf you want to exit press e');\n         if choice == 'a':\n             c = int(input('Enter temp in C'));\n             print(&quot;F =&quot;, c*1.8+32);\n         elif choice == 'b':\n             f = int(input('Enter temp in F'));\n             print(&quot;C =&quot;, (F-32)/1.8);\n</code></pre>\n"}],"owner":{"account_id":23821717,"reputation":3,"user_id":17829308,"display_name":"asdfghjklqwerty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71192793,"answer_count":4,"score":0,"last_activity_date":1647331414,"creation_date":1645346618,"question_id":71192714,"body_markdown":"i have assignment and we need to convert celsius to fahrenheit and vice versa. i have to loop the program but i dont know how.\r\n\r\nmy code is working but its still wrong.\r\n\r\n\r\ndef main():\r\n    \r\n    print(&quot;a. Celsius to Fahrenheit&quot;)\r\n    print(&quot;b. Fahrenheit to Celsius&quot;)\r\n\r\n    choice = str(input(&quot;Enter Choice:&quot;))\r\n\r\n    if choice == &quot;a&quot;:\r\n        def c_to_f(C):\r\n            return((9/5)*C) + 32\r\n        temp =float(input(&quot;Enter Temp: &quot;))\r\n        print(temp,&quot;Celsius is&quot;,c_to_f(temp),&quot;Fahrenheit&quot;)\r\n        \r\n    if choice ==&quot;b&quot;:\r\n        def f_to_c(F):\r\n            return (5/9)*(F-32)\r\n        temp =float(input(&quot;Enter Temp: &quot;))\r\n        print(temp,&quot;Fahrenheit is&quot;,f_to_c(temp),&quot;Celsius&quot;)\r\n\r\n    repeat = input(&quot;Do you want to convert again? (Yes/No): &quot;)\r\n    \r\n    for _ in range(10):\r\n        if repeat == &quot;yes&quot;:\r\n            main()\r\n        else:\r\n            exit()\r\n   \r\nmain()\r\n\r\n","title":"How to loop in python multiples times","body":"<p>i have assignment and we need to convert celsius to fahrenheit and vice versa. i have to loop the program but i dont know how.</p>\n<p>my code is working but its still wrong.</p>\n<p>def main():</p>\n<pre><code>print(&quot;a. Celsius to Fahrenheit&quot;)\nprint(&quot;b. Fahrenheit to Celsius&quot;)\n\nchoice = str(input(&quot;Enter Choice:&quot;))\n\nif choice == &quot;a&quot;:\n    def c_to_f(C):\n        return((9/5)*C) + 32\n    temp =float(input(&quot;Enter Temp: &quot;))\n    print(temp,&quot;Celsius is&quot;,c_to_f(temp),&quot;Fahrenheit&quot;)\n    \nif choice ==&quot;b&quot;:\n    def f_to_c(F):\n        return (5/9)*(F-32)\n    temp =float(input(&quot;Enter Temp: &quot;))\n    print(temp,&quot;Fahrenheit is&quot;,f_to_c(temp),&quot;Celsius&quot;)\n\nrepeat = input(&quot;Do you want to convert again? (Yes/No): &quot;)\n\nfor _ in range(10):\n    if repeat == &quot;yes&quot;:\n        main()\n    else:\n        exit()\n</code></pre>\n<p>main()</p>\n"},{"tags":["java","android","java-native-interface","audio-streaming","microphone"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1647335427,"post_id":71478651,"comment_id":126339361,"body_markdown":"`CHANNEL_OUT_MONO` is for output (playback). You should be using `CHANNEL_IN_MONO`.","body":"<code>CHANNEL_OUT_MONO</code> is for output (playback). You should be using <code>CHANNEL_IN_MONO</code>."},{"owner":{"account_id":11887236,"reputation":23,"user_id":11646579,"display_name":"Aung Thura Moe"},"score":0,"creation_date":1647358042,"post_id":71478651,"comment_id":126348260,"body_markdown":"yes,I would like to use for playback.Input is from microphone with CHANNEL_IN_MONO and it is also fine.","body":"yes,I would like to use for playback.Input is from microphone with CHANNEL_IN_MONO and it is also fine."}],"owner":{"account_id":11887236,"reputation":23,"user_id":11646579,"display_name":"Aung Thura Moe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647330766,"creation_date":1647330766,"question_id":71478651,"body_markdown":"I would like to make real-time audio streaming in my application.I have a function named listenUserVoice(String userVoice) accept encoded base64 voice data.My Problem is when I retrieve buffer size using **AudioRecord.getMinBufferSize** function with **AudioFormat.CHANNEL_OUT_MONO**.It&#39;s return **-2(ERROR_BAD_VALUE)**.So,I try to fix error and I found that there is no switch case for AudioFormat.CHANNEL_OUT_MONO in android **AudioRecord.java** Class.\r\n\r\n    public void listenUserVoice(String userVoice) {\r\n        Log.d(TAG, &quot;voice data  &quot; + userVoice);\r\n        try {\r\n            playBufSize = AudioRecord.getMinBufferSize(frequency, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT);\r\n            Log.d(TAG, &quot;-------------- playBufSize  &quot; + playBufSize);\r\n            audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, frequency, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, playBufSize, AudioTrack.MODE_STREAM);\r\n            bytes = new byte[playBufSize];\r\n\r\n            if (audioTrack.getState() == AudioRecord.STATE_INITIALIZED){\r\n                audioTrack.play();\r\n            }\r\n\r\n            byte[] decoded = Base64.decode(userVoice, Base64.DEFAULT);\r\n\r\n            int i = 0;\r\n            InputStream inputStream = new ByteArrayInputStream(decoded);\r\n            while (true) {\r\n                if ((i = inputStream.read(bytes)) == -1) break;\r\n                audioTrack.write(bytes, 0, i);\r\n            }\r\n            inputStream.close();\r\n        } catch (IOException e) {\r\n            Log.d(TAG, &quot;Error  &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n\r\n[![AudioRecord.java][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YBuHv.png","title":"How to parse Audio Format ( AudioFormat.CHANNEL_OUT_MONO) to AudioRecord.getMinBufferSize function in Android?","body":"<p>I would like to make real-time audio streaming in my application.I have a function named listenUserVoice(String userVoice) accept encoded base64 voice data.My Problem is when I retrieve buffer size using <strong>AudioRecord.getMinBufferSize</strong> function with <strong>AudioFormat.CHANNEL_OUT_MONO</strong>.It's return <strong>-2(ERROR_BAD_VALUE)</strong>.So,I try to fix error and I found that there is no switch case for AudioFormat.CHANNEL_OUT_MONO in android <strong>AudioRecord.java</strong> Class.</p>\n<pre><code>public void listenUserVoice(String userVoice) {\n    Log.d(TAG, &quot;voice data  &quot; + userVoice);\n    try {\n        playBufSize = AudioRecord.getMinBufferSize(frequency, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT);\n        Log.d(TAG, &quot;-------------- playBufSize  &quot; + playBufSize);\n        audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, frequency, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, playBufSize, AudioTrack.MODE_STREAM);\n        bytes = new byte[playBufSize];\n\n        if (audioTrack.getState() == AudioRecord.STATE_INITIALIZED){\n            audioTrack.play();\n        }\n\n        byte[] decoded = Base64.decode(userVoice, Base64.DEFAULT);\n\n        int i = 0;\n        InputStream inputStream = new ByteArrayInputStream(decoded);\n        while (true) {\n            if ((i = inputStream.read(bytes)) == -1) break;\n            audioTrack.write(bytes, 0, i);\n        }\n        inputStream.close();\n    } catch (IOException e) {\n        Log.d(TAG, &quot;Error  &quot; + e.getMessage());\n        e.printStackTrace();\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/YBuHv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YBuHv.png\" alt=\"AudioRecord.java\" /></a></p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":2,"creation_date":1647318202,"post_id":71477029,"comment_id":126335249,"body_markdown":"You&#39;ve overshadowed your `static int Money` field with a local variable `int Money`, i.e. there are two different `Money` variables. If you&#39;re new to Java, I would avoid the usage of `static` until you are more familiar with it. `static` is essentially a memory tool, not an access tool.","body":"You&#39;ve overshadowed your <code>static int Money</code> field with a local variable <code>int Money</code>, i.e. there are two different <code>Money</code> variables. If you&#39;re new to Java, I would avoid the usage of <code>static</code> until you are more familiar with it. <code>static</code> is essentially a memory tool, not an access tool."},{"owner":{"account_id":788777,"reputation":28977,"user_id":857132,"accept_rate":69,"display_name":"John3136"},"score":0,"creation_date":1647318216,"post_id":71477029,"comment_id":126335250,"body_markdown":"When you say `int Money = Moneys.nextInt();` inside `main` you&#39;re creating a new local variablle, not using the class data.","body":"When you say <code>int Money = Moneys.nextInt();</code> inside <code>main</code> you&#39;re creating a new local variablle, not using the class data."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1647323060,"post_id":71477029,"comment_id":126335976,"body_markdown":"Take care of java naming conventions. Variable names should start with lower case character. And don’t call your package *src*","body":"Take care of java naming conventions. Variable names should start with lower case character. And don’t call your package <i>src</i>"},{"owner":{"account_id":24560751,"reputation":1,"user_id":18468531,"display_name":"Semicircley"},"score":0,"creation_date":1647361250,"post_id":71477029,"comment_id":126349508,"body_markdown":"Thank you! I&#39;ll make sure to edit my code and work on my naming conventions, and variable types.","body":"Thank you! I&#39;ll make sure to edit my code and work on my naming conventions, and variable types."}],"answers":[{"tags":[],"owner":{"account_id":8332915,"reputation":89,"user_id":6260817,"display_name":"Fakhar uddin Malik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647330339,"creation_date":1647330339,"answer_id":71478560,"question_id":71477029,"body_markdown":"This will resolve the issues, but still you should take care of your naming conventions as @Jens said. and should not use static variables until you know what they are supposed to do.\r\n\r\n\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tScanner Moneys = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter Money.&quot;);\r\n\t\tMoney = Moneys.nextInt();\r\n\t\tgetMoney();\r\n\t\tSystem.out.println(&quot;What would you like to do?&quot;);\r\n\t\tString a = Moneys.next();\r\n\t\tif (a.equals(&quot;Percentage&quot;))\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Enter Percentage.&quot;);\r\n\t\t\tpercentage = Moneys.nextInt();\r\n\t\t\tpercentage();\r\n\t\t}\r\n\t\telse if (a.equals(&quot;Deposit&quot;))\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Enter Deposit amount.&quot;);\r\n\t\t\tDeposit = Moneys.nextInt();\r\n\t\t\tDeposit();\r\n\t\t}\r\n\t}\r\n}","title":"Variables stay at 0 and is unable to change based on user input","body":"<p>This will resolve the issues, but still you should take care of your naming conventions as @Jens said. and should not use static variables until you know what they are supposed to do.</p>\n<pre><code>public static void main(String[] args)\n{\n    Scanner Moneys = new Scanner(System.in);\n    System.out.println(&quot;Enter Money.&quot;);\n    Money = Moneys.nextInt();\n    getMoney();\n    System.out.println(&quot;What would you like to do?&quot;);\n    String a = Moneys.next();\n    if (a.equals(&quot;Percentage&quot;))\n    {\n        System.out.println(&quot;Enter Percentage.&quot;);\n        percentage = Moneys.nextInt();\n        percentage();\n    }\n    else if (a.equals(&quot;Deposit&quot;))\n    {\n        System.out.println(&quot;Enter Deposit amount.&quot;);\n        Deposit = Moneys.nextInt();\n        Deposit();\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":24560751,"reputation":1,"user_id":18468531,"display_name":"Semicircley"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647330339,"creation_date":1647318030,"question_id":71477029,"body_markdown":"I&#39;m a newbie to Java and tried making a very simple money calculator. The rest of the code works fine, except I&#39;m unable to change the instance values - they stay constantly at 0 instead of using the user input, and I was wondering what I was doing wrong. \r\n\r\n\r\n\r\n    package src;\r\nimport java.util.*;\r\nimport java.util.Scanner;\r\n\r\npublic class Sterling {\r\n\r\n    private static int Money;\r\n    private static int Deposit;\r\n    private static int percentage;\r\n\r\n    public static void main(String[] args) {\r\n        Scanner Moneys = new Scanner(System.in);\r\n        System.out.println(&quot;Enter Money.&quot;);\r\n        int Money = Moneys.nextInt();\r\n        getMoney();\r\n        System.out.println(&quot;What would you like to do?&quot;);\r\n        String a = Moneys.next();\r\n        if (a.equals(&quot;Percentage&quot;)) {\r\n            System.out.println(&quot;Enter Percentage.&quot;);\r\n            int Percentage = Moneys.nextInt();\r\n            percentage();\r\n        } else if (a.equals(&quot;Deposit&quot;)) {\r\n            System.out.println(&quot;Enter Deposit amount.&quot;);\r\n            int Deposit = Moneys.nextInt();\r\n            Deposit();\r\n        }\r\n    }\r\n\r\n    private static void Deposit() {\r\n            Money = Deposit + Money;\r\n            System.out.println(Money);\r\n\r\n        }\r\n\r\n    private static void percentage() {\r\n        Money = percentage * Money;\r\n        System.out.println(Money);\r\n\r\n    }\r\n\r\n    private static void getMoney() {\r\n        System.out.println(Money);\r\n    }\r\n\r\n\r\n}","title":"Variables stay at 0 and is unable to change based on user input","body":"<p>I'm a newbie to Java and tried making a very simple money calculator. The rest of the code works fine, except I'm unable to change the instance values - they stay constantly at 0 instead of using the user input, and I was wondering what I was doing wrong.</p>\n<pre><code>package src;\n</code></pre>\n<p>import java.util.*;\nimport java.util.Scanner;</p>\n<p>public class Sterling {</p>\n<pre><code>private static int Money;\nprivate static int Deposit;\nprivate static int percentage;\n\npublic static void main(String[] args) {\n    Scanner Moneys = new Scanner(System.in);\n    System.out.println(&quot;Enter Money.&quot;);\n    int Money = Moneys.nextInt();\n    getMoney();\n    System.out.println(&quot;What would you like to do?&quot;);\n    String a = Moneys.next();\n    if (a.equals(&quot;Percentage&quot;)) {\n        System.out.println(&quot;Enter Percentage.&quot;);\n        int Percentage = Moneys.nextInt();\n        percentage();\n    } else if (a.equals(&quot;Deposit&quot;)) {\n        System.out.println(&quot;Enter Deposit amount.&quot;);\n        int Deposit = Moneys.nextInt();\n        Deposit();\n    }\n}\n\nprivate static void Deposit() {\n        Money = Deposit + Money;\n        System.out.println(Money);\n\n    }\n\nprivate static void percentage() {\n    Money = percentage * Money;\n    System.out.println(Money);\n\n}\n\nprivate static void getMoney() {\n    System.out.println(Money);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","sslengine"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1354742506,"post_id":13722317,"comment_id":18867429,"body_markdown":"I don&#39;t believe it exists. Implementing with SSLEngine is seriously difficult and hasn&#39;t been done too many times.","body":"I don&#39;t believe it exists. Implementing with SSLEngine is seriously difficult and hasn&#39;t been done too many times."}],"answers":[{"tags":[],"owner":{"account_id":2792086,"reputation":106,"user_id":2402130,"display_name":"devesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370973494,"creation_date":1370973494,"answer_id":17050652,"question_id":13722317,"body_markdown":"A similar but more complete example for SSLEngine implementation can be found [here][1].  \r\n\r\n\r\n  [1]: http://www.cs.lafayette.edu/docs/java/guide/security/jsse/samples/","title":"Java SSLEngine example","body":"<p>A similar but more complete example for SSLEngine implementation can be found <a href=\"http://www.cs.lafayette.edu/docs/java/guide/security/jsse/samples/\" rel=\"nofollow\">here</a>.  </p>\n"},{"tags":[],"owner":{"account_id":1179627,"reputation":888,"user_id":1154859,"display_name":"Alex Karnezis"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1476212599,"creation_date":1441551428,"answer_id":32424859,"question_id":13722317,"body_markdown":"Searching for an SSLEngine implementation myself, I started writing my own one, which I shared on [Github][1]. It involves an SSL/TLS server and client, and also a Demo class containing a running example. I would be glad if you take a look and even more if you provide feedback about possible bugs or better implementation.\r\n\r\nAlso feel free to check a [post][2] I uploaded on my (really newly created!) blog, where I collected various information about SSL/TLS. :)\r\n\r\n\r\n  [1]: https://github.com/alex-travelling-with-code/sslengine.implementation\r\n  [2]: https://alkarn.github.io/2015-07-29-a-case-study-on-SSL-TLS/","title":"Java SSLEngine example","body":"<p>Searching for an SSLEngine implementation myself, I started writing my own one, which I shared on <a href=\"https://github.com/alex-travelling-with-code/sslengine.implementation\" rel=\"noreferrer\">Github</a>. It involves an SSL/TLS server and client, and also a Demo class containing a running example. I would be glad if you take a look and even more if you provide feedback about possible bugs or better implementation.</p>\n\n<p>Also feel free to check a <a href=\"https://alkarn.github.io/2015-07-29-a-case-study-on-SSL-TLS/\" rel=\"noreferrer\">post</a> I uploaded on my (really newly created!) blog, where I collected various information about SSL/TLS. :)</p>\n"},{"tags":[],"owner":{"account_id":3218847,"reputation":461,"user_id":4505326,"display_name":"Mariano Barrios"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500766922,"creation_date":1500727929,"answer_id":45254772,"question_id":13722317,"body_markdown":"I came across the same problem some years ago and ended up writing my own library. There are some examples out there and of course there is also the code inside projects like Netty, etc. But neither option is robust or easily reusable.\r\n\r\n[TLS Channel](https://github.com/marianobarrios/tls-channel) wraps an SSLEngine in a ByteBuffer and allows to use it just like normal SocketChannels.\r\n\r\n","title":"Java SSLEngine example","body":"<p>I came across the same problem some years ago and ended up writing my own library. There are some examples out there and of course there is also the code inside projects like Netty, etc. But neither option is robust or easily reusable.</p>\n\n<p><a href=\"https://github.com/marianobarrios/tls-channel\" rel=\"nofollow noreferrer\">TLS Channel</a> wraps an SSLEngine in a ByteBuffer and allows to use it just like normal SocketChannels.</p>\n"},{"tags":[],"owner":{"account_id":1089631,"reputation":2169,"user_id":1084563,"accept_rate":71,"display_name":"user1084563"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516059520,"creation_date":1516059520,"answer_id":48272189,"question_id":13722317,"body_markdown":"There are actually Oracle provided samples for a few of the JSSE classes which can be found [here][1]. Specifically their &quot;simple&quot; demo for the SSLEngine can be found [here][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/samples/index.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/samples/sslengine/SSLEngineSimpleDemo.java","title":"Java SSLEngine example","body":"<p>There are actually Oracle provided samples for a few of the JSSE classes which can be found <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/samples/index.html\" rel=\"nofollow noreferrer\">here</a>. Specifically their \"simple\" demo for the SSLEngine can be found <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/samples/sslengine/SSLEngineSimpleDemo.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":244750,"reputation":19412,"user_id":517781,"accept_rate":82,"display_name":"Dean Hiller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647330268,"creation_date":1561134514,"answer_id":56707284,"question_id":13722317,"body_markdown":"webpieces uses a jar ( https://mvnrepository.com/artifact/org.webpieces/core-ssl ) that wraps the SSLEngine and makes using it in any context much easier.\r\n\r\nOf course the project/subproject is here\r\nhttps://github.com/deanhiller/webpieces/tree/master/core/core-ssl\r\n\r\nOr you can just start up the whole webpieces server. (It&#39;s called webpieces because every part is a piece including that ssl piece, an async http1.1 parser, http2 parser, etc....all pieces you can steal and use).  It just happens all pieces are also used to create a webserver.","title":"Java SSLEngine example","body":"<p>webpieces uses a jar ( <a href=\"https://mvnrepository.com/artifact/org.webpieces/core-ssl\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.webpieces/core-ssl</a> ) that wraps the SSLEngine and makes using it in any context much easier.</p>\n<p>Of course the project/subproject is here\n<a href=\"https://github.com/deanhiller/webpieces/tree/master/core/core-ssl\" rel=\"nofollow noreferrer\">https://github.com/deanhiller/webpieces/tree/master/core/core-ssl</a></p>\n<p>Or you can just start up the whole webpieces server. (It's called webpieces because every part is a piece including that ssl piece, an async http1.1 parser, http2 parser, etc....all pieces you can steal and use).  It just happens all pieces are also used to create a webserver.</p>\n"}],"owner":{"display_name":"user1809407"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10569,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"closed_date":1605050200,"answer_count":5,"score":3,"last_activity_date":1647330268,"creation_date":1354707113,"question_id":13722317,"body_markdown":"I found an example how to implement Java SSLEngine [here][1].\r\nUnfortunately the source code of the server is not complete. Do you know where I can find the complete source code from the tutorial? \r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#OperationStatus","title":"Java SSLEngine example","body":"<p>I found an example how to implement Java SSLEngine <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#OperationStatus\" rel=\"nofollow\">here</a>.\nUnfortunately the source code of the server is not complete. Do you know where I can find the complete source code from the tutorial? </p>\n"},{"tags":["java","json","list"],"answers":[{"tags":[],"owner":{"account_id":10120939,"reputation":106,"user_id":7477870,"display_name":"Arkaitz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1647330172,"creation_date":1647330172,"answer_id":71478534,"question_id":71478467,"body_markdown":"The JSONArray from &quot;org.json&quot; doesn&#39;t have a toList() method\r\nYou should iterate directly the JSONArray object like this:\r\n\r\n    for (int i=0;i&lt;jsonArray.length();i++){   \r\n       config_bcs_filterstatuscodes.add(jsonArray.getString(i));  \r\n    }   ","title":"NoSuchMethodError when trying to convert Object List to String List","body":"<p>The JSONArray from &quot;org.json&quot; doesn't have a toList() method\nYou should iterate directly the JSONArray object like this:</p>\n<pre><code>for (int i=0;i&lt;jsonArray.length();i++){   \n   config_bcs_filterstatuscodes.add(jsonArray.getString(i));  \n}   \n</code></pre>\n"}],"owner":{"display_name":"anon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":278,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71478534,"answer_count":1,"score":0,"last_activity_date":1647330172,"creation_date":1647329826,"question_id":71478467,"body_markdown":"I&#39;m working on some other guys code and he tries to read data from a JSON config file. It always worked, but I&#39;m suddenly getting a NoSuchMethodError.\r\n\r\nThis is the part that&#39;s causing the problem:\r\n\r\n    config_bcs_filterstatuscodes = new LinkedList&lt;&gt;();\r\n            for (Object filtercode : appconfig.getJSONObject(&quot;projektron_bcs&quot;).getJSONArray(&quot;filter_statuscodes&quot;).toList()) {\r\n                config_bcs_filterstatuscodes.addLast(filtercode.toString());\r\n            }\r\n\r\nThe code tries to convert a List of Objects to a List of Strings.\r\n\r\nThe error I&#39;m getting:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: org.json.JSONArray.toList()Ljava/util/List;\r\n\tat middleware.Main.main(Main.java:103)\r\n\r\nI have no idea why it suddenly tells me that there is no such method, because it always worked until now.","title":"NoSuchMethodError when trying to convert Object List to String List","body":"<p>I'm working on some other guys code and he tries to read data from a JSON config file. It always worked, but I'm suddenly getting a NoSuchMethodError.</p>\n<p>This is the part that's causing the problem:</p>\n<pre><code>config_bcs_filterstatuscodes = new LinkedList&lt;&gt;();\n        for (Object filtercode : appconfig.getJSONObject(&quot;projektron_bcs&quot;).getJSONArray(&quot;filter_statuscodes&quot;).toList()) {\n            config_bcs_filterstatuscodes.addLast(filtercode.toString());\n        }\n</code></pre>\n<p>The code tries to convert a List of Objects to a List of Strings.</p>\n<p>The error I'm getting:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: org.json.JSONArray.toList()Ljava/util/List;\nat middleware.Main.main(Main.java:103)\n</code></pre>\n<p>I have no idea why it suddenly tells me that there is no such method, because it always worked until now.</p>\n"},{"tags":["java","angular","spring","post"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1647308628,"post_id":71476073,"comment_id":126333749,"body_markdown":"You&#39;re passing a parameter named `data` but using a variable named `postData`. That looks odd. And `dogId` is unused.","body":"You&#39;re passing a parameter named <code>data</code> but using a variable named <code>postData</code>. That looks odd. And <code>dogId</code> is unused."},{"owner":{"account_id":21266561,"reputation":27,"user_id":15646690,"display_name":"Olcsa22"},"score":0,"creation_date":1647309124,"post_id":71476073,"comment_id":126333829,"body_markdown":"@tgdavies Sorry, that&#39;s a mistake. I was editing the code before pasting it, and forgot to change that part. Now it&#39;s updated. Originally, postData was an array with dogid and data inside.","body":"@tgdavies Sorry, that&#39;s a mistake. I was editing the code before pasting it, and forgot to change that part. Now it&#39;s updated. Originally, postData was an array with dogid and data inside."}],"answers":[{"tags":[],"owner":{"account_id":10120939,"reputation":106,"user_id":7477870,"display_name":"Arkaitz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647329864,"creation_date":1647329864,"answer_id":71478471,"question_id":71476073,"body_markdown":"You are using two response bodys. Should be one.\r\n\r\nWhen you send the request from Angular, the request is creating a body with a JSON like this:\r\n\r\n    {\r\n      &quot;dogid&quot;: X,\r\n      &quot;data&quot;: Y\r\n    }\r\n\r\nThis is an object, but only one.\r\nSo your controller method should have an object as parameter for the request body, with the same structure.\r\n\r\nEdit: You can also use an object of type Map&lt;&gt; to hold the values.","title":"Why do I get a 400 error when sending multiple parameters in post? Angular + Spring Boot","body":"<p>You are using two response bodys. Should be one.</p>\n<p>When you send the request from Angular, the request is creating a body with a JSON like this:</p>\n<pre><code>{\n  &quot;dogid&quot;: X,\n  &quot;data&quot;: Y\n}\n</code></pre>\n<p>This is an object, but only one.\nSo your controller method should have an object as parameter for the request body, with the same structure.</p>\n<p>Edit: You can also use an object of type Map&lt;&gt; to hold the values.</p>\n"}],"owner":{"account_id":21266561,"reputation":27,"user_id":15646690,"display_name":"Olcsa22"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4138,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71478471,"answer_count":1,"score":1,"last_activity_date":1647329864,"creation_date":1647308342,"question_id":71476073,"body_markdown":"I&#39;m sending a localdatetime, and a number to my restcontroller from angular. This is the only one I get errors with, no matter what I do. I logged the variable values, in case they&#39;re in a wrong format. The localdatetime was in yyyy-MM-ddThh:mm format. My angular method call: \r\n```\r\nupdateDogFeeding(dogid,data)\r\n    {\r\n      return this.http.post(environment.rooturl + &quot;/api/profile/animals/feeddog&quot;,{dogid,data},{observe:&#39;response&#39;, withCredentials:true,\r\n      headers: new HttpHeaders({&#39;Content-Type&#39;:&#39;application/json&#39;})})\r\n    }\r\n```\r\n\r\nI tried sending the parameters in an array, or an array of the elements using JSON.stringify(), in HttpParams, nothing worked. I checked te error message from spring, and got this: \r\n\r\nCould not resolve parameter [0] in public com.example.vizsga_kedvenc_felugyelo.model.Dog com.example.vizsga_kedvenc_felugyelo.controll.DogController.feedDog(java.lang.Integer,java.time.LocalDateTime): JSON parse error: Cannot deserialize value of type `java.lang.Integer` from Object value (token `JsonToken.START_OBJECT`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.Integer` from Object value (token `JsonToken.START_OBJECT`)\r\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 1, column: 1]\r\n\r\nwhat could be the possible cause?\r\n\r\nMy restcontroller: \r\n\r\n```\r\n@PostMapping(value = &quot;api/profile/animals/feeddog&quot;)\r\n    public Dog feedDog(@RequestBody Integer dogID, @RequestBody LocalDateTime timestamp)\r\n    {\r\n        System.out.println(&quot;Got called&quot;); //Isn&#39;t printed on the console\r\n        return dogService.feedDog(dogID,timestamp);\r\n    }\r\n```","title":"Why do I get a 400 error when sending multiple parameters in post? Angular + Spring Boot","body":"<p>I'm sending a localdatetime, and a number to my restcontroller from angular. This is the only one I get errors with, no matter what I do. I logged the variable values, in case they're in a wrong format. The localdatetime was in yyyy-MM-ddThh:mm format. My angular method call:</p>\n<pre><code>updateDogFeeding(dogid,data)\n    {\n      return this.http.post(environment.rooturl + &quot;/api/profile/animals/feeddog&quot;,{dogid,data},{observe:'response', withCredentials:true,\n      headers: new HttpHeaders({'Content-Type':'application/json'})})\n    }\n</code></pre>\n<p>I tried sending the parameters in an array, or an array of the elements using JSON.stringify(), in HttpParams, nothing worked. I checked te error message from spring, and got this:</p>\n<p>Could not resolve parameter [0] in public com.example.vizsga_kedvenc_felugyelo.model.Dog com.example.vizsga_kedvenc_felugyelo.controll.DogController.feedDog(java.lang.Integer,java.time.LocalDateTime): JSON parse error: Cannot deserialize value of type <code>java.lang.Integer</code> from Object value (token <code>JsonToken.START_OBJECT</code>); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type <code>java.lang.Integer</code> from Object value (token <code>JsonToken.START_OBJECT</code>)\nat [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 1, column: 1]</p>\n<p>what could be the possible cause?</p>\n<p>My restcontroller:</p>\n<pre><code>@PostMapping(value = &quot;api/profile/animals/feeddog&quot;)\n    public Dog feedDog(@RequestBody Integer dogID, @RequestBody LocalDateTime timestamp)\n    {\n        System.out.println(&quot;Got called&quot;); //Isn't printed on the console\n        return dogService.feedDog(dogID,timestamp);\n    }\n</code></pre>\n"},{"tags":["java","eclipse","junit","code-coverage","eclemma"],"comments":[{"owner":{"account_id":2818342,"reputation":299856,"user_id":2422776,"display_name":"Mureinik"},"score":3,"creation_date":1484666146,"post_id":41700687,"comment_id":70597307,"body_markdown":"Can you attach a screenshot please?","body":"Can you attach a screenshot please?"},{"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"score":0,"creation_date":1484854060,"post_id":41700687,"comment_id":70692484,"body_markdown":"Unfortunately I cannot upload the code because it is copyright.","body":"Unfortunately I cannot upload the code because it is copyright."},{"owner":{"account_id":88629,"reputation":9961,"user_id":244993,"display_name":"Godin"},"score":1,"creation_date":1485006861,"post_id":41700687,"comment_id":70750568,"body_markdown":"Try to build small example that will reproduce the same problem, but in isolation from your copyrighted code (http://stackoverflow.com/help/mcve).","body":"Try to build small example that will reproduce the same problem, but in isolation from your copyrighted code (<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>)."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1566655317,"post_id":41700687,"comment_id":101729339,"body_markdown":"Red could mean e.g. that the test failed or that something is not covered, depending what is red. Maybe, you could attach a screenshot.","body":"Red could mean e.g. that the test failed or that something is not covered, depending what is red. Maybe, you could attach a screenshot."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1566655383,"post_id":41700687,"comment_id":101729351,"body_markdown":"I assume (but I&#39;m not sure) that your test failed.","body":"I assume (but I&#39;m not sure) that your test failed."}],"answers":[{"tags":[],"owner":{"account_id":8900126,"reputation":1612,"user_id":6643833,"display_name":"Tobias Otto"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1484666160,"creation_date":1484666160,"answer_id":41700716,"question_id":41700687,"body_markdown":"The Test itself is not tested and so the coverage is zero. \r\nYou only want to know the coverage of the class under test and not from the test.\r\n","title":"What does red highlight in unit test mean?","body":"<p>The Test itself is not tested and so the coverage is zero. \nYou only want to know the coverage of the class under test and not from the test.</p>\n"},{"tags":[],"owner":{"account_id":88629,"reputation":9961,"user_id":244993,"display_name":"Godin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484759384,"creation_date":1484730605,"answer_id":41715249,"question_id":41700687,"body_markdown":"In Eclipse folders containing main code and test code - are source folders. By default EclEmma performs analysis of all source folders and highlight has the same semantic everywhere. If you&#39;re not interested in highlighting in certain folders (such as folders containing tests), then you can exclude as described in https://stackoverflow.com/a/40596673/244993","title":"What does red highlight in unit test mean?","body":"<p>In Eclipse folders containing main code and test code - are source folders. By default EclEmma performs analysis of all source folders and highlight has the same semantic everywhere. If you're not interested in highlighting in certain folders (such as folders containing tests), then you can exclude as described in <a href=\"https://stackoverflow.com/a/40596673/244993\">https://stackoverflow.com/a/40596673/244993</a></p>\n"},{"tags":[],"owner":{"account_id":127602,"reputation":940,"user_id":2132069,"accept_rate":56,"display_name":"kodmanyagha"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1566655074,"creation_date":1566649747,"answer_id":57637963,"question_id":41700687,"body_markdown":"In my POM.xml JUnit&#39;s scope is `test`. I removed the scope and the problem is solved.\r\n\r\nI don&#39;t believe that this is the best possible solution; Eclipse should be able to accept the scope `test`, but I haven&#39;t been able to work out how to do this.","title":"What does red highlight in unit test mean?","body":"<p>In my POM.xml JUnit's scope is <code>test</code>. I removed the scope and the problem is solved.</p>\n\n<p>I don't believe that this is the best possible solution; Eclipse should be able to accept the scope <code>test</code>, but I haven't been able to work out how to do this.</p>\n"}],"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6134,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":3,"score":2,"last_activity_date":1647329817,"creation_date":1484666067,"question_id":41700687,"body_markdown":"I run a unit test, and see how much of the class I&#39;m testing against is covered, and I see its all green (covered). But in my unit test itself, I see red high lights. What does this mean? I don&#39;t see any information about the highlights in the tests themselves in the Eclemma documentation. ","title":"What does red highlight in unit test mean?","body":"<p>I run a unit test, and see how much of the class I'm testing against is covered, and I see its all green (covered). But in my unit test itself, I see red high lights. What does this mean? I don't see any information about the highlights in the tests themselves in the Eclemma documentation. </p>\n"},{"tags":["java","selenium","microsoft-edge","selenium-edgedriver"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1647330475,"post_id":71478424,"comment_id":126337607,"body_markdown":"see if this helps https://stackoverflow.com/questions/66682566/ms-edge-driver-error-devtoolsactiveport-file-doesnt-exist-works-only-with","body":"see if this helps <a href=\"https://stackoverflow.com/questions/66682566/ms-edge-driver-error-devtoolsactiveport-file-doesnt-exist-works-only-with\" title=\"ms edge driver error devtoolsactiveport file doesnt exist works only with\">stackoverflow.com/questions/66682566/&hellip;</a>"},{"owner":{"account_id":21316508,"reputation":1609,"user_id":15690271,"display_name":"Xudong Peng"},"score":0,"creation_date":1647418758,"post_id":71478424,"comment_id":126363150,"body_markdown":"I am afraid I cannot reproduce your issue, I tested in Edge (version 99.0.1150.39) and it works well. This is my [simple test](https://i.stack.imgur.com/w78OP.png). You could  update Edge to the lastest version and try again.","body":"I am afraid I cannot reproduce your issue, I tested in Edge (version 99.0.1150.39) and it works well. This is my <a href=\"https://i.stack.imgur.com/w78OP.png\" rel=\"nofollow noreferrer\">simple test</a>. You could  update Edge to the lastest version and try again."},{"owner":{"account_id":24274010,"reputation":11,"user_id":18221574,"display_name":"Eshna Prashar"},"score":0,"creation_date":1650618742,"post_id":71478424,"comment_id":127166559,"body_markdown":"@SMA- Thanks for routing to the post..But I am not getting addargments with EdgeOptions. i am using Selenium 4.1.2 version. If you could guide me what changes I need to make in my code.","body":"@SMA- Thanks for routing to the post..But I am not getting addargments with EdgeOptions. i am using Selenium 4.1.2 version. If you could guide me what changes I need to make in my code."}],"owner":{"account_id":24274010,"reputation":11,"user_id":18221574,"display_name":"Eshna Prashar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1647329609,"creation_date":1647329609,"question_id":71478424,"body_markdown":"I am trying to open MS Edge Chromium version browser via Selenium Java. \r\nIt gives error:-**&#39;Exception org.openqa.selenium.WebDriverException occured while creating MSEdge driver instance.&#39; errorDetails=&#39;org.openqa.selenium.WebDriverException: unknown error: MSEdge failed to start: crashed.(unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n(The process started from msedge location C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe is no longer running, so MSEdgeDriver is assuming that MSEdge has crashed.)**\r\n\r\nAfter reading various posts on stackoverflow, that we need to give administrative access. **I gave admin access to Edge** via Start &gt; Type Edge &gt; Right click on it &gt; Open file location&gt; Right click on the Edge icon&gt; Properties &gt; In the Compatibility tab tick the box of Run this program as an administrator.\r\nBy doing this it solves the above mentioned error. **But start giving another one**:-@text=&#39;Exception org.openqa.selenium.WebDriverException occured while creating MSEdge driver instance.&#39; errorDetails=&#39;org.openqa.selenium.WebDriverException: unknown error: Failed to create MSEdge process.\r\n  (Driver info: msedgedriver=98.0.1108.55 (8e8d1f96aad47d4da4fa4b0e82b2d025674395e7),platform=Windows NT 10.0.18363 x86_64) (WARNING: The server did not provide any stacktrace information)\r\n\r\nMy system&#39;s configuration details:-\r\nOS- Windows 10 Enterprise- 64 bit\r\nSelenium- Selenium 4\r\nIDE- Intelli J\r\nMS Edge Version- Version 98.0.1108.55 (64bit)\r\nMSEdge Driver Version- 98.0.1108.55 \r\n\r\nCode to configure MSEdge:-\r\n\r\n    public static WebDriver createMSEdgeDriverInstance{\r\n    \t\tSystem.setProperty(&quot;webdriver.edge.driver&quot;,&quot;CompletePath\\\\msedgedriver.exe&quot;);\r\n    \t\tEdgeDriver driver = new EdgeDriver();\r\n    \t\tdriver.get(&quot;www.google.com&quot;);\r\n    \t\treturn  driver;}\r\n\r\nPlease help me in this .","title":"Selenium not able to open MS Edge Chromium browser, getting error as :- unknown error: MSEdge failed to start: crashed.&quot;","body":"<p>I am trying to open MS Edge Chromium version browser via Selenium Java.\nIt gives error:-<strong>'Exception org.openqa.selenium.WebDriverException occured while creating MSEdge driver instance.' errorDetails='org.openqa.selenium.WebDriverException: unknown error: MSEdge failed to start: crashed.(unknown error: DevToolsActivePort file doesn't exist)\n(The process started from msedge location C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe is no longer running, so MSEdgeDriver is assuming that MSEdge has crashed.)</strong></p>\n<p>After reading various posts on stackoverflow, that we need to give administrative access. <strong>I gave admin access to Edge</strong> via Start &gt; Type Edge &gt; Right click on it &gt; Open file location&gt; Right click on the Edge icon&gt; Properties &gt; In the Compatibility tab tick the box of Run this program as an administrator.\nBy doing this it solves the above mentioned error. <strong>But start giving another one</strong>:-@text='Exception org.openqa.selenium.WebDriverException occured while creating MSEdge driver instance.' errorDetails='org.openqa.selenium.WebDriverException: unknown error: Failed to create MSEdge process.\n(Driver info: msedgedriver=98.0.1108.55 (8e8d1f96aad47d4da4fa4b0e82b2d025674395e7),platform=Windows NT 10.0.18363 x86_64) (WARNING: The server did not provide any stacktrace information)</p>\n<p>My system's configuration details:-\nOS- Windows 10 Enterprise- 64 bit\nSelenium- Selenium 4\nIDE- Intelli J\nMS Edge Version- Version 98.0.1108.55 (64bit)\nMSEdge Driver Version- 98.0.1108.55</p>\n<p>Code to configure MSEdge:-</p>\n<pre><code>public static WebDriver createMSEdgeDriverInstance{\n        System.setProperty(&quot;webdriver.edge.driver&quot;,&quot;CompletePath\\\\msedgedriver.exe&quot;);\n        EdgeDriver driver = new EdgeDriver();\n        driver.get(&quot;www.google.com&quot;);\n        return  driver;}\n</code></pre>\n<p>Please help me in this .</p>\n"},{"tags":["java","elasticsearch","rest-client","resthighlevelclient"],"comments":[{"owner":{"account_id":1138712,"reputation":7132,"user_id":1123206,"display_name":"leandrojmp"},"score":0,"creation_date":1594249689,"post_id":62803392,"comment_id":111064014,"body_markdown":"What is your Elasticsearch version? And what API are you talking about? C#?","body":"What is your Elasticsearch version? And what API are you talking about? C#?"},{"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"score":0,"creation_date":1661435599,"post_id":62803392,"comment_id":129776061,"body_markdown":"Its really long, would be great if you can upvote and accept my answer","body":"Its really long, would be great if you can upvote and accept my answer"}],"answers":[{"tags":[],"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1594256945,"creation_date":1594256945,"answer_id":62805863,"question_id":62803392,"body_markdown":"`_doc` was a temporary type name which was kept for backward compatibility and to prepare for removing it, refer [removal of type][1] for more details on this.\r\n\r\nAlso refer [schedule and how to handle this breaking change on your version][2] \r\n\r\n 1. Indices created in 6.x only allow a single-type per index. Any name\r\n    can be used for the type, but there can be only one. The preferred\r\n    type name is _doc, so that index APIs have the same path as they\r\n    will have in 7.0: PUT {index}/_doc/{id} and POST {index}/_doc\r\n\r\nAlso please refer https://www.elastic.co/guide/en/elasticsearch/reference/7.x/removal-of-types.html#_migrating_multi_type_indices_to_single_type this section where its explained how to use it in 6.X.\r\n\r\nI would suggest first try to create a index using REST API and see with the combination of `include_type_name` and `index.mapping.single_type` it works or not and accordingly add it in your code.\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/7.x/removal-of-types.html\r\n  [2]: https://www.elastic.co/guide/en/elasticsearch/reference/7.x/removal-of-types.html#_schedule_for_removal_of_mapping_types","title":"The mapping definition cannot be nested under a type [_doc] unless include_type_name is set to true","body":"<p><code>_doc</code> was a temporary type name which was kept for backward compatibility and to prepare for removing it, refer <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.x/removal-of-types.html\" rel=\"noreferrer\">removal of type</a> for more details on this.</p>\n<p>Also refer <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.x/removal-of-types.html#_schedule_for_removal_of_mapping_types\" rel=\"noreferrer\">schedule and how to handle this breaking change on your version</a></p>\n<ol>\n<li>Indices created in 6.x only allow a single-type per index. Any name\ncan be used for the type, but there can be only one. The preferred\ntype name is _doc, so that index APIs have the same path as they\nwill have in 7.0: PUT {index}/_doc/{id} and POST {index}/_doc</li>\n</ol>\n<p>Also please refer <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.x/removal-of-types.html#_migrating_multi_type_indices_to_single_type\" rel=\"noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/7.x/removal-of-types.html#_migrating_multi_type_indices_to_single_type</a> this section where its explained how to use it in 6.X.</p>\n<p>I would suggest first try to create a index using REST API and see with the combination of <code>include_type_name</code> and <code>index.mapping.single_type</code> it works or not and accordingly add it in your code.</p>\n"},{"tags":[],"owner":{"account_id":7664230,"reputation":5903,"user_id":5815086,"accept_rate":25,"display_name":"kujiy"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1647329328,"creation_date":1647329328,"answer_id":71478383,"question_id":62803392,"body_markdown":"The reason was a mapping API query. I fixed as below.\r\n\r\n\t# ES6\r\n\tPUT myindex\r\n\t{\r\n\t\t&quot;settings&quot;: {\r\n\t\t    &quot;number_of_shards&quot;: 5,\r\n\t\t    &quot;number_of_replicas&quot;: 2\r\n\t\t},\r\n\t\t&quot;mappings&quot;: {\r\n\t\t    &quot;_doc&quot;: {                 &lt;--------- Delete this layer\r\n\t\t        &quot;properties&quot;: {\r\n\t\t            &quot;blahblah&quot;: {\r\n\t \r\n\t# ES7\r\n\tPUT myindex\r\n\t{\r\n\t\t&quot;settings&quot;: {\r\n\t\t    &quot;number_of_shards&quot;: 5,\r\n\t\t    &quot;number_of_replicas&quot;: 2\r\n\t\t},\r\n\t\t&quot;mappings&quot;: {\r\n\t        &quot;properties&quot;: {\r\n\t            &quot;blahblah&quot;: {","title":"The mapping definition cannot be nested under a type [_doc] unless include_type_name is set to true","body":"<p>The reason was a mapping API query. I fixed as below.</p>\n<pre><code># ES6\nPUT myindex\n{\n    &quot;settings&quot;: {\n        &quot;number_of_shards&quot;: 5,\n        &quot;number_of_replicas&quot;: 2\n    },\n    &quot;mappings&quot;: {\n        &quot;_doc&quot;: {                 &lt;--------- Delete this layer\n            &quot;properties&quot;: {\n                &quot;blahblah&quot;: {\n \n# ES7\nPUT myindex\n{\n    &quot;settings&quot;: {\n        &quot;number_of_shards&quot;: 5,\n        &quot;number_of_replicas&quot;: 2\n    },\n    &quot;mappings&quot;: {\n        &quot;properties&quot;: {\n            &quot;blahblah&quot;: {\n</code></pre>\n"}],"owner":{"account_id":18877206,"reputation":87,"user_id":13770443,"display_name":"Zheyou Guo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15589,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1647329328,"creation_date":1594241252,"question_id":62803392,"body_markdown":"My API version is 6.3 and I try to create index. The failure says &quot;The mapping definition cannot be nested under a type [_doc] unless include_type_name is set to true&quot; .Here is my code:\r\n\r\n    CreateIndexRequest indexRequest = new CreateIndexRequest(&quot;user&quot;);\r\n\r\n    request.source(&quot;{\\n&quot; +\r\n            &quot;    \\&quot;settings\\&quot; : {\\n&quot; +\r\n            &quot;        \\&quot;number_of_shards\\&quot; : 1,\\n&quot; +\r\n            &quot;        \\&quot;number_of_replicas\\&quot; : 0\\n&quot; +\r\n            &quot;    },\\n&quot; +\r\n            &quot;    \\&quot;mappings\\&quot; : {\\n&quot; +\r\n            &quot;        \\&quot;_doc\\&quot; : {\\n&quot; +\r\n            &quot;            \\&quot;properties\\&quot; : {\\n&quot; +\r\n            &quot;                \\&quot;message\\&quot; : { \\&quot;type\\&quot; : \\&quot;text\\&quot; }\\n&quot; +\r\n            &quot;            }\\n&quot; +\r\n            &quot;        }\\n&quot; +\r\n            &quot;    },\\n&quot; +\r\n            &quot;    \\&quot;aliases\\&quot; : {\\n&quot; +\r\n            &quot;        \\&quot;twitter_alias\\&quot; : {}\\n&quot; +\r\n            &quot;    }\\n&quot; +\r\n            &quot;}&quot;, XContentType.JSON);\r\n    CreateIndexResponse createIndexResponse = restHighLevelClient.indices().create(indexRequest);\r\nAfter I remove &quot;_doc&quot; as following, failure says  &quot;Failed to parse mapping [_doc]: No type specified for field [properties]&quot;. So what should I do now?\r\n\r\n     request.source(&quot;{\\n&quot; +\r\n                &quot;    \\&quot;settings\\&quot; : {\\n&quot; +\r\n                &quot;        \\&quot;number_of_shards\\&quot; : 1,\\n&quot; +\r\n                &quot;        \\&quot;number_of_replicas\\&quot; : 0\\n&quot; +\r\n                &quot;    },\\n&quot; +\r\n                &quot;    \\&quot;mappings\\&quot; : {\\n&quot; +\r\n                &quot;       \r\n                &quot;            \\&quot;properties\\&quot; : {\\n&quot; +\r\n                &quot;                \\&quot;message\\&quot; : { \\&quot;type\\&quot; : \\&quot;text\\&quot; }\\n&quot; +\r\n                &quot;            }\\n&quot; +\r\n                &quot;     \r\n                &quot;    },\\n&quot; +\r\n                &quot;    \\&quot;aliases\\&quot; : {\\n&quot; +\r\n                &quot;        \\&quot;twitter_alias\\&quot; : {}\\n&quot; +\r\n                &quot;    }\\n&quot; +\r\n                &quot;}&quot;, XContentType.JSON);\r\n\r\n","title":"The mapping definition cannot be nested under a type [_doc] unless include_type_name is set to true","body":"<p>My API version is 6.3 and I try to create index. The failure says &quot;The mapping definition cannot be nested under a type [_doc] unless include_type_name is set to true&quot; .Here is my code:</p>\n<pre><code>CreateIndexRequest indexRequest = new CreateIndexRequest(&quot;user&quot;);\n\nrequest.source(&quot;{\\n&quot; +\n        &quot;    \\&quot;settings\\&quot; : {\\n&quot; +\n        &quot;        \\&quot;number_of_shards\\&quot; : 1,\\n&quot; +\n        &quot;        \\&quot;number_of_replicas\\&quot; : 0\\n&quot; +\n        &quot;    },\\n&quot; +\n        &quot;    \\&quot;mappings\\&quot; : {\\n&quot; +\n        &quot;        \\&quot;_doc\\&quot; : {\\n&quot; +\n        &quot;            \\&quot;properties\\&quot; : {\\n&quot; +\n        &quot;                \\&quot;message\\&quot; : { \\&quot;type\\&quot; : \\&quot;text\\&quot; }\\n&quot; +\n        &quot;            }\\n&quot; +\n        &quot;        }\\n&quot; +\n        &quot;    },\\n&quot; +\n        &quot;    \\&quot;aliases\\&quot; : {\\n&quot; +\n        &quot;        \\&quot;twitter_alias\\&quot; : {}\\n&quot; +\n        &quot;    }\\n&quot; +\n        &quot;}&quot;, XContentType.JSON);\nCreateIndexResponse createIndexResponse = restHighLevelClient.indices().create(indexRequest);\n</code></pre>\n<p>After I remove &quot;_doc&quot; as following, failure says  &quot;Failed to parse mapping [_doc]: No type specified for field [properties]&quot;. So what should I do now?</p>\n<pre><code> request.source(&quot;{\\n&quot; +\n            &quot;    \\&quot;settings\\&quot; : {\\n&quot; +\n            &quot;        \\&quot;number_of_shards\\&quot; : 1,\\n&quot; +\n            &quot;        \\&quot;number_of_replicas\\&quot; : 0\\n&quot; +\n            &quot;    },\\n&quot; +\n            &quot;    \\&quot;mappings\\&quot; : {\\n&quot; +\n            &quot;       \n            &quot;            \\&quot;properties\\&quot; : {\\n&quot; +\n            &quot;                \\&quot;message\\&quot; : { \\&quot;type\\&quot; : \\&quot;text\\&quot; }\\n&quot; +\n            &quot;            }\\n&quot; +\n            &quot;     \n            &quot;    },\\n&quot; +\n            &quot;    \\&quot;aliases\\&quot; : {\\n&quot; +\n            &quot;        \\&quot;twitter_alias\\&quot; : {}\\n&quot; +\n            &quot;    }\\n&quot; +\n            &quot;}&quot;, XContentType.JSON);\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":5506151,"reputation":3498,"user_id":4373948,"accept_rate":88,"display_name":"Abder KRIMA"},"score":0,"creation_date":1647290962,"post_id":71472918,"comment_id":126330201,"body_markdown":"i think you are using public interface `TestRepository extends MongoRepository/ReactiveCrudRepository&lt;TestClass, String&gt;` if yes so you already have many methods [ReactiveCrudRepository](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/reactive/ReactiveCrudRepository.html?is-external=true) or [MongoRepository](https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html?is-external=true)","body":"i think you are using public interface <code>TestRepository extends MongoRepository&#47;ReactiveCrudRepository&lt;TestClass, String&gt;</code> if yes so you already have many methods <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/reactive/ReactiveCrudRepository.html?is-external=true\" rel=\"nofollow noreferrer\">ReactiveCrudRepository</a> or <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html?is-external=true\" rel=\"nofollow noreferrer\">MongoRepository</a>"},{"owner":{"account_id":18355622,"reputation":11,"user_id":13368740,"display_name":"Shivam Kumar"},"score":0,"creation_date":1647329379,"post_id":71472918,"comment_id":126337277,"body_markdown":"Thank you for your suggestion, but I want to delete a product from my Cart using prodname. You can refer the schema and also I have updated my question.","body":"Thank you for your suggestion, but I want to delete a product from my Cart using prodname. You can refer the schema and also I have updated my question."}],"answers":[{"tags":[],"owner":{"account_id":22750553,"reputation":321,"user_id":17236065,"display_name":"Pedro Luiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647292569,"creation_date":1647292569,"answer_id":71474345,"question_id":71472918,"body_markdown":"1. If your repository interface looks like this:\r\n\r\n        public interface YourRepository extends MongoRepository&lt;T, ID&gt; {}\r\n\r\nThe &quot;YourRepository&quot; will have access to all these methods:\r\n\r\n[MongoRepository docs][1]\r\n\r\n\r\n2. Using @Query you are going to have to make custom queries, and indeed you can use it to perform the deletion you desire.\r\n\r\nThere is a cool article on Baeldung that can guide you to how you prefer to do it.\r\n\r\n[A guide to Queries in Spring Data MongoDB][2]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html\r\n  [2]: https://www.baeldung.com/queries-in-spring-data-mongodb","title":"How to write a query to delete an object from my MongoDB database in Springboot?","body":"<ol>\n<li><p>If your repository interface looks like this:</p>\n<pre><code> public interface YourRepository extends MongoRepository&lt;T, ID&gt; {}\n</code></pre>\n</li>\n</ol>\n<p>The &quot;YourRepository&quot; will have access to all these methods:</p>\n<p><a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html\" rel=\"nofollow noreferrer\">MongoRepository docs</a></p>\n<ol start=\"2\">\n<li>Using @Query you are going to have to make custom queries, and indeed you can use it to perform the deletion you desire.</li>\n</ol>\n<p>There is a cool article on Baeldung that can guide you to how you prefer to do it.</p>\n<p><a href=\"https://www.baeldung.com/queries-in-spring-data-mongodb\" rel=\"nofollow noreferrer\">A guide to Queries in Spring Data MongoDB</a></p>\n"}],"owner":{"account_id":18355622,"reputation":11,"user_id":13368740,"display_name":"Shivam Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647329242,"creation_date":1647284325,"question_id":71472918,"body_markdown":"My MongoDB Schema look like this. So I want to delete any one product using uname(i.e username) and prodname(i.e product name). Can we use @Query annotation to do this or any suggestions? \r\n```\r\n{\r\n&quot;Id&quot;:&quot;string&quot;,\r\n&quot;uname&quot;:&quot;string&quot;,\r\n&quot;products&quot;:[\r\n  {\r\n    &quot;prodname&quot;:&quot;string&quot;,\r\n    &quot;quantity&quot;:&quot;int&quot;,\r\n    &quot;price&quot;:&quot;double&quot;\r\n  }],\r\n&quot;tot_amt&quot;:&quot;double&quot;,\r\n}\r\n```\r\nThis is one of my model Cart.java\r\n```\r\npublic class Cart {\r\n\t\r\n\t@Id\r\n\tpublic String Id;\r\n\t\r\n\t@Indexed(unique=true)\r\n\tpublic String uname;\r\n\t\r\n\tpublic List&lt;Product&gt;products;\r\n\tpublic double tot_amt;\r\n\r\n}\r\n```\r\nThis is another model class Product.java\r\n```\r\npublic class Product {\r\n\r\n\tpublic String prodname;\r\n\tpublic int quantity;\r\n\tpublic double price;\r\n}\r\n```\r\nThis is the repository interface CartRepository.java\r\n```\r\n@Repository\r\n\r\npublic interface CartRepository extends MongoRepository&lt;Cart,String&gt;{\r\n\t\r\n\t@Query(&quot;{uname:?0}&quot;)\r\n\tOptional&lt;Cart&gt; findByName(String name);\r\n\r\n}\r\n```\r\nThis is the Service class \r\n```\r\npublic class CartService {\r\n\t\r\n\t   @Autowired\r\n\t   public CartRepository cartRepo;\r\n\t   \r\n\t   public MongoTemplate mt;\r\n\t   \r\n\t\r\n\tpublic void saveUser(Cart cart) {\r\n\t\tList&lt;Double&gt;amt= new ArrayList&lt;&gt;();\r\n\t\tList&lt;Product&gt;products=cart.getProducts();\r\n\t\tproducts.forEach(p -&gt; {\r\n\t\t\tdouble price=p.getPrice();\r\n\t\t\tint quantity=p.getQuantity();\r\n\t\t\tamt.add(price*quantity);\r\n\t\t\t\r\n\t\t\t\r\n\t\t});\r\n\t\t double tot_amount = 0;\r\n\t        for (Double i : amt)\r\n\t        \ttot_amount += i;\r\n\t        \r\n\t        cart.setTot_amt(tot_amount);\r\n\t\t\r\n       cartRepo.save(cart);        \r\n    }\r\n     \r\n\tpublic List&lt;Cart&gt; getdata()\r\n\t{\r\n\t\treturn cartRepo.findAll();\r\n\t\t\r\n\t}\r\n\r\n\tpublic Optional&lt;Cart&gt; getDetailsByName(String name) {\r\n\t\t\r\n\t\tOptional&lt;Cart&gt; savedCartData=Optional.of(cartRepo.findByName(name).orElseThrow(()-&gt;new RuntimeException(String.format(&quot;Not found %s&quot;,name))));\r\n    \treturn savedCartData;\r\n    \t \r\n\t}\r\n```\r\n","title":"How to write a query to delete an object from my MongoDB database in Springboot?","body":"<p>My MongoDB Schema look like this. So I want to delete any one product using uname(i.e username) and prodname(i.e product name). Can we use @Query annotation to do this or any suggestions?</p>\n<pre><code>{\n&quot;Id&quot;:&quot;string&quot;,\n&quot;uname&quot;:&quot;string&quot;,\n&quot;products&quot;:[\n  {\n    &quot;prodname&quot;:&quot;string&quot;,\n    &quot;quantity&quot;:&quot;int&quot;,\n    &quot;price&quot;:&quot;double&quot;\n  }],\n&quot;tot_amt&quot;:&quot;double&quot;,\n}\n</code></pre>\n<p>This is one of my model Cart.java</p>\n<pre><code>public class Cart {\n    \n    @Id\n    public String Id;\n    \n    @Indexed(unique=true)\n    public String uname;\n    \n    public List&lt;Product&gt;products;\n    public double tot_amt;\n\n}\n</code></pre>\n<p>This is another model class Product.java</p>\n<pre><code>public class Product {\n\n    public String prodname;\n    public int quantity;\n    public double price;\n}\n</code></pre>\n<p>This is the repository interface CartRepository.java</p>\n<pre><code>@Repository\n\npublic interface CartRepository extends MongoRepository&lt;Cart,String&gt;{\n    \n    @Query(&quot;{uname:?0}&quot;)\n    Optional&lt;Cart&gt; findByName(String name);\n\n}\n</code></pre>\n<p>This is the Service class</p>\n<pre><code>public class CartService {\n    \n       @Autowired\n       public CartRepository cartRepo;\n       \n       public MongoTemplate mt;\n       \n    \n    public void saveUser(Cart cart) {\n        List&lt;Double&gt;amt= new ArrayList&lt;&gt;();\n        List&lt;Product&gt;products=cart.getProducts();\n        products.forEach(p -&gt; {\n            double price=p.getPrice();\n            int quantity=p.getQuantity();\n            amt.add(price*quantity);\n            \n            \n        });\n         double tot_amount = 0;\n            for (Double i : amt)\n                tot_amount += i;\n            \n            cart.setTot_amt(tot_amount);\n        \n       cartRepo.save(cart);        \n    }\n     \n    public List&lt;Cart&gt; getdata()\n    {\n        return cartRepo.findAll();\n        \n    }\n\n    public Optional&lt;Cart&gt; getDetailsByName(String name) {\n        \n        Optional&lt;Cart&gt; savedCartData=Optional.of(cartRepo.findByName(name).orElseThrow(()-&gt;new RuntimeException(String.format(&quot;Not found %s&quot;,name))));\n        return savedCartData;\n         \n    }\n</code></pre>\n"},{"tags":["java","apache-spark","time","duration"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1647328534,"post_id":71478166,"comment_id":126337091,"body_markdown":"It looks like `Duration` doesn&#39;t support the format you want to parse and I&#39;m not sure there is a ready to use formatter. However, you could try to split at the colon and parse the resulting substrings to long. Then feed those to `Duration.ofMinutes(...).plusSeconds(...)`.","body":"It looks like <code>Duration</code> doesn&#39;t support the format you want to parse and I&#39;m not sure there is a ready to use formatter. However, you could try to split at the colon and parse the resulting substrings to long. Then feed those to <code>Duration.ofMinutes(...).plusSeconds(...)</code>."},{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":1,"creation_date":1647329691,"post_id":71478166,"comment_id":126337371,"body_markdown":"Currently, the nearest I can go is : convert to a LocalTime `LocalTime t = LocalTime.parse(&quot;07:30&quot;)`, then ask for the difference between this time and the 0 hour time : `Duration d = Duration.between(LocalTime.MIDNIGHT, t)`. It returns `println(t) =&gt; 07:30`, `println(d) =&gt; PT7H30M`. But I wonder if it&#39;s a good way to do things.","body":"Currently, the nearest I can go is : convert to a LocalTime <code>LocalTime t = LocalTime.parse(&quot;07:30&quot;)</code>, then ask for the difference between this time and the 0 hour time : <code>Duration d = Duration.between(LocalTime.MIDNIGHT, t)</code>. It returns <code>println(t) =&gt; 07:30</code>, <code>println(d) =&gt; PT7H30M</code>. But I wonder if it&#39;s a good way to do things."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1647329792,"post_id":71478166,"comment_id":126337407,"body_markdown":"Hint: `LocalTime.MIDNIGHT` (or `.MIN`) instead of `.of(0,0)`","body":"Hint: <code>LocalTime.MIDNIGHT</code> (or <code>.MIN</code>) instead of <code>.of(0,0)</code>"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1647330067,"post_id":71478166,"comment_id":126337485,"body_markdown":"You could do that as well but might run into problems if the duration is larger than an hour. Assuming your format will always be `minutes:seconds` could there be durations like `172:59` or would those then include hours as well?","body":"You could do that as well but might run into problems if the duration is larger than an hour. Assuming your format will always be <code>minutes:seconds</code> could there be durations like <code>172:59</code> or would those then include hours as well?"},{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1647330665,"post_id":71478166,"comment_id":126337681,"body_markdown":"@Thomas You are right, and it&#39;s another problem that, first : as soon as I replace `LocalTime.parse(&quot;07:30&quot;)` by a `LocalTime.parse(&quot;07:30&quot;, , DateTimeFormatter.ofPattern(&quot;mm:ss&quot;))` it fails with the message `&quot;Unable to obtain LocalTime from TemporalAccessor&quot;` I&#39;d wrote, and second that I can&#39;t tell in advance if I will receive hours or minutes being right padded with zeroes or not (but it seems not : I&#39;m receiving `&quot;7:30&quot;` instead of `&quot;07:30&quot;`). I think it will for a complemental topic on SO, because creating a datetime format that handles many cases isn&#39;t easy.","body":"@Thomas You are right, and it&#39;s another problem that, first : as soon as I replace <code>LocalTime.parse(&quot;07:30&quot;)</code> by a <code>LocalTime.parse(&quot;07:30&quot;, , DateTimeFormatter.ofPattern(&quot;mm:ss&quot;))</code> it fails with the message <code>&quot;Unable to obtain LocalTime from TemporalAccessor&quot;</code> I&#39;d wrote, and second that I can&#39;t tell in advance if I will receive hours or minutes being right padded with zeroes or not (but it seems not : I&#39;m receiving <code>&quot;7:30&quot;</code> instead of <code>&quot;07:30&quot;</code>). I think it will for a complemental topic on SO, because creating a datetime format that handles many cases isn&#39;t easy."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1647331257,"post_id":71478166,"comment_id":126337830,"body_markdown":"Can this be fitted to answer your question? [How to convert HH:mm:ss.SSS to milliseconds?](https://stackoverflow.com/questions/8826270/how-to-convert-hhmmss-sss-to-milliseconds) I am immodest enough to recommend that you look at the two options that I present in [my answer there](https://stackoverflow.com/a/70224294/5772882). Under no circumstances use `SimpleDateFormat` (presented in a couple of answers).","body":"Can this be fitted to answer your question? <a href=\"https://stackoverflow.com/questions/8826270/how-to-convert-hhmmss-sss-to-milliseconds\">How to convert HH:mm:ss.SSS to milliseconds?</a> I am immodest enough to recommend that you look at the two options that I present in <a href=\"https://stackoverflow.com/a/70224294/5772882\">my answer there</a>. Under no circumstances use <code>SimpleDateFormat</code> (presented in a couple of answers)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1647331590,"post_id":71478166,"comment_id":126337935,"body_markdown":"Using java.time as you already tried: `Duration.parse(&quot;7:30&quot;.replaceFirst(&quot;^(\\\\d+):(\\\\d{2})$&quot;, &quot;PT$1M$2S&quot;))` yields a `java.time.Duration`. It prints in ISO 8601 format, `PT7M30S` for 7 minutes 30 seconds.","body":"Using java.time as you already tried: <code>Duration.parse(&quot;7:30&quot;.replaceFirst(&quot;^(\\\\d+):(\\\\d{2})$&quot;, &quot;PT$1M$2S&quot;))</code> yields a <code>java.time.Duration</code>. It prints in ISO 8601 format, <code>PT7M30S</code> for 7 minutes 30 seconds."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1647331993,"post_id":71478166,"comment_id":126338068,"body_markdown":"If you want the detour via `LocalTime` (which I would not want), use the following formatter: `new DateTimeFormatterBuilder().appendPattern(&quot;m:ss&quot;).parseDefaulting(ChronoField.HOUR_OF_DAY, 0).toFormatter(Locale.ROOT)`. It will not work for minutes greater than 59.","body":"If you want the detour via <code>LocalTime</code> (which I would not want), use the following formatter: <code>new DateTimeFormatterBuilder().appendPattern(&quot;m:ss&quot;).parseDefaul&zwnj;&#8203;ting(ChronoField.HOU&zwnj;&#8203;R_OF_DAY, 0).toFormatter(Locale.ROOT)</code>. It will not work for minutes greater than 59."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1647332123,"post_id":71478166,"comment_id":126338117,"body_markdown":"*Currently, the nearest I can go is* It also gives you 7 hours 30 minutes where I think you wanted 7 minutes 30 seconds.","body":"<i>Currently, the nearest I can go is</i> It also gives you 7 hours 30 minutes where I think you wanted 7 minutes 30 seconds."},{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1647332350,"post_id":71478166,"comment_id":126338197,"body_markdown":"@OleV.V. I won&#39;t use any `split` or `regex` expression to parse the string received. I&#39;m not responsible of their format and won&#39;t go into low level functions.\n\nNo : the `PT7M30S` I get is the 7 min 30 seconds I&#39;m willing to have.","body":"@OleV.V. I won&#39;t use any <code>split</code> or <code>regex</code> expression to parse the string received. I&#39;m not responsible of their format and won&#39;t go into low level functions.  No : the <code>PT7M30S</code> I get is the 7 min 30 seconds I&#39;m willing to have."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1647332527,"post_id":71478166,"comment_id":126338250,"body_markdown":"I understand that. So my best suggestion is using [Time4J](http://time4j.net/) as in the first half of [the answer I linked to](https://stackoverflow.com/a/70224294/5772882). Liability: it’s an external dependency.","body":"I understand that. So my best suggestion is using <a href=\"http://time4j.net/\" rel=\"nofollow noreferrer\">Time4J</a> as in the first half of <a href=\"https://stackoverflow.com/a/70224294/5772882\">the answer I linked to</a>. Liability: it’s an external dependency."}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647329116,"creation_date":1647327914,"question_id":71478166,"body_markdown":"I have a list of timed intervals given as strings in a _CSV_ file.  \r\nFor example, one has the value of `&quot;7:30&quot;` (7 minutes and 30 seconds).\r\n\r\n_Spark_ offers the `DateType` or the `TimestampType`, but it&#39;s not these ones that are interesting me, there.  \r\nAt least, I have to treat this `&quot;7:30&quot;` value as a time (without date), and the best would be that it would be considered like a duration. But then, I don&#39;t know what is the best _Java_ or _Spark_ class to carry it.\r\n\r\nBut currently, my problem is that my code understands the string as a time __in the day__ :\r\n\r\n```java\r\nLocalTime.parse(&quot;7:30&quot;, DateTimeFormatter.ofPattern(&quot;m:ss&quot;))\r\n```\r\n\r\nand fails with a `DateTimeParseException` whose message &quot;_Unable to obtain LocalTime from TemporalAccessor_&quot; is hinting that the parser cannot tell if it is in front of an AM or PM hour.\r\n\r\n```log\r\njava.time.format.DateTimeParseException: Text &#39;7:30&#39; could not be parsed: Unable to obtain LocalTime from TemporalAccessor: {MilliOfSecond=0, SecondOfMinute=30, NanoOfSecond=0, MicroOfSecond=0, MinuteOfHour=7},ISO of type java.time.format.Parsed\r\n  at java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2017)\r\n  at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1952)\r\n  at java.base/java.time.LocalTime.parse(LocalTime.java:463)\r\n  ... 96 elided\r\n```\r\n\r\nIt would be perfect if it didn&#39;t bother about it... But well, it does. How can I circumvent the problem and adapt my code so that, for example, I can tell the parser that all the given times are AM?\r\n\r\n----------\r\n\r\nBut maybe I&#39;m wrong. I should parse with a `DateTimeFormatter`, yes, but maybe into another `java.time.*` object than one of class `LocalTime` that is made for &quot;hour of the day&quot; and not for durations.\r\n\r\nIf it&#39;s the case, which one should I use instead?  \r\nAnd how can I create it from text parsing?","title":"Going from a &quot;7:30&quot; (7 minutes 30 seconds) string to a duration or amount of time","body":"<p>I have a list of timed intervals given as strings in a <em>CSV</em> file.<br />\nFor example, one has the value of <code>&quot;7:30&quot;</code> (7 minutes and 30 seconds).</p>\n<p><em>Spark</em> offers the <code>DateType</code> or the <code>TimestampType</code>, but it's not these ones that are interesting me, there.<br />\nAt least, I have to treat this <code>&quot;7:30&quot;</code> value as a time (without date), and the best would be that it would be considered like a duration. But then, I don't know what is the best <em>Java</em> or <em>Spark</em> class to carry it.</p>\n<p>But currently, my problem is that my code understands the string as a time <strong>in the day</strong> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalTime.parse(&quot;7:30&quot;, DateTimeFormatter.ofPattern(&quot;m:ss&quot;))\n</code></pre>\n<p>and fails with a <code>DateTimeParseException</code> whose message &quot;<em>Unable to obtain LocalTime from TemporalAccessor</em>&quot; is hinting that the parser cannot tell if it is in front of an AM or PM hour.</p>\n<pre><code>java.time.format.DateTimeParseException: Text '7:30' could not be parsed: Unable to obtain LocalTime from TemporalAccessor: {MilliOfSecond=0, SecondOfMinute=30, NanoOfSecond=0, MicroOfSecond=0, MinuteOfHour=7},ISO of type java.time.format.Parsed\n  at java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2017)\n  at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1952)\n  at java.base/java.time.LocalTime.parse(LocalTime.java:463)\n  ... 96 elided\n</code></pre>\n<p>It would be perfect if it didn't bother about it... But well, it does. How can I circumvent the problem and adapt my code so that, for example, I can tell the parser that all the given times are AM?</p>\n<hr />\n<p>But maybe I'm wrong. I should parse with a <code>DateTimeFormatter</code>, yes, but maybe into another <code>java.time.*</code> object than one of class <code>LocalTime</code> that is made for &quot;hour of the day&quot; and not for durations.</p>\n<p>If it's the case, which one should I use instead?<br />\nAnd how can I create it from text parsing?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1647077002,"post_id":71436811,"comment_id":126286343,"body_markdown":"So you only want lines that contain a forward slash (`/`), correct?","body":"So you only want lines that contain a forward slash (<code>&#47;</code>), correct?"},{"owner":{"account_id":3618713,"reputation":129,"user_id":3018014,"accept_rate":25,"display_name":"bbx402"},"score":0,"creation_date":1647275040,"post_id":71436811,"comment_id":126324864,"body_markdown":"Yes, exactly. The problem is though that I don&#39;t know the length","body":"Yes, exactly. The problem is though that I don&#39;t know the length"},{"owner":{"account_id":535477,"reputation":1551,"user_id":904963,"accept_rate":80,"display_name":"user904963"},"score":0,"creation_date":1647275908,"post_id":71436811,"comment_id":126325196,"body_markdown":"Do a pattern match for 1 or more any character followed by 1 &quot;/&quot; followed by 1 or more any character. Alternatively, you could make these checks 0 or more depending on if strings like &quot;/word&quot; &quot;word/&quot; or &quot;/word/&quot; should match. You might use 1 or more for &quot;/&quot; if you think stuff like &quot;word//word2&quot; should match. Your first step will most likely be to read a basic introduction to regex matching that uses the tool you are using (Java although you should consider using Linux tools such as grep if it suffices. No need to reinvent the wheel).","body":"Do a pattern match for 1 or more any character followed by 1 &quot;/&quot; followed by 1 or more any character. Alternatively, you could make these checks 0 or more depending on if strings like &quot;/word&quot; &quot;word/&quot; or &quot;/word/&quot; should match. You might use 1 or more for &quot;/&quot; if you think stuff like &quot;word//word2&quot; should match. Your first step will most likely be to read a basic introduction to regex matching that uses the tool you are using (Java although you should consider using Linux tools such as grep if it suffices. No need to reinvent the wheel)."}],"answers":[{"tags":[],"owner":{"display_name":"user18098820"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647329018,"creation_date":1647326740,"answer_id":71477995,"question_id":71436811,"body_markdown":"The following regex pattern looks for two groups:\r\n - alpha-numeric ending with a forward slash, I&#39;ve allowed spaces, hyphens and underscores as they are often included in file and directory names\r\n - word + a number (1 or more digits)\r\nThe second capturing group therefore contains the filename that you want.\r\n```\r\n^([\\w\\d _-]*\\/)*(word\\d+)$\r\n```\r\nPlease see this tutorial for `java.util.regex.Pattern` and `java.util.regex.Matcher`    \r\nhttps://www.tutorialspoint.com/javaregex/javaregex_capturing_groups.htm#:~:text=Capturing%20groups%20are%20a%20way,%22%2C%20and%20%22g%22.\r\n","title":"Regex to validate string pattern","body":"<p>The following regex pattern looks for two groups:</p>\n<ul>\n<li>alpha-numeric ending with a forward slash, I've allowed spaces, hyphens and underscores as they are often included in file and directory names</li>\n<li>word + a number (1 or more digits)\nThe second capturing group therefore contains the filename that you want.</li>\n</ul>\n<pre><code>^([\\w\\d _-]*\\/)*(word\\d+)$\n</code></pre>\n<p>Please see this tutorial for <code>java.util.regex.Pattern</code> and <code>java.util.regex.Matcher</code><br />\n<a href=\"https://www.tutorialspoint.com/javaregex/javaregex_capturing_groups.htm#:%7E:text=Capturing%20groups%20are%20a%20way,%22%2C%20and%20%22g%22\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/javaregex/javaregex_capturing_groups.htm#:~:text=Capturing%20groups%20are%20a%20way,%22%2C%20and%20%22g%22</a>.</p>\n"},{"tags":[],"owner":{"account_id":23986363,"reputation":56,"user_id":17973124,"display_name":"TCT2001"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647327604,"creation_date":1647327604,"answer_id":71478121,"question_id":71436811,"body_markdown":"If you only want 4 matches case of 7 above strings, you can try this\r\n```\r\n\\w+(\\/\\w+)+\r\n```\r\nIf you want to match slugs in endpoints (or urls), you may want some more **rules** about your slugs.\r\n","title":"Regex to validate string pattern","body":"<p>If you only want 4 matches case of 7 above strings, you can try this</p>\n<pre><code>\\w+(\\/\\w+)+\n</code></pre>\n<p>If you want to match slugs in endpoints (or urls), you may want some more <strong>rules</strong> about your slugs.</p>\n"}],"owner":{"account_id":3618713,"reputation":129,"user_id":3018014,"accept_rate":25,"display_name":"bbx402"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":71478121,"answer_count":2,"score":-2,"last_activity_date":1647329018,"creation_date":1646993141,"question_id":71436811,"body_markdown":"I have a list of strings that represent elements. Some of them are endpoints.\r\n\r\nFor example:\r\n\r\n    Element1\r\n    service/word1/word2/word3\r\n    service/word1/word4\r\n    Element2\r\n    info/word5/word6/word7/word8\r\n    info/word5/word6/word7\r\n    Element3\r\n    Element3 word1\r\n    String ABC\r\n\r\n\r\nI need a regex to match only the endpoints **without** knowing the exact length of the endpoints\r\n\r\nI&#39;m trying to use following java code with a regex:\r\n\r\n    Pattern p = Pattern.compile(regex);\r\n    return p.matcher(str).matches();\r\n\r\nIn order to filter my list as follows:\r\n\r\n    service/word1/word2/word3\r\n    service/word1/word4\r\n    info/word5/word6/word7/word8\r\n    info/word5/word6/word7\r\n\r\nBut I cannot come up with a working regex. Can anyone help?\r\n\r\n\r\n","title":"Regex to validate string pattern","body":"<p>I have a list of strings that represent elements. Some of them are endpoints.</p>\n<p>For example:</p>\n<pre><code>Element1\nservice/word1/word2/word3\nservice/word1/word4\nElement2\ninfo/word5/word6/word7/word8\ninfo/word5/word6/word7\nElement3\nElement3 word1\nString ABC\n</code></pre>\n<p>I need a regex to match only the endpoints <strong>without</strong> knowing the exact length of the endpoints</p>\n<p>I'm trying to use following java code with a regex:</p>\n<pre><code>Pattern p = Pattern.compile(regex);\nreturn p.matcher(str).matches();\n</code></pre>\n<p>In order to filter my list as follows:</p>\n<pre><code>service/word1/word2/word3\nservice/word1/word4\ninfo/word5/word6/word7/word8\ninfo/word5/word6/word7\n</code></pre>\n<p>But I cannot come up with a working regex. Can anyone help?</p>\n"},{"tags":["java","regex","spring","mongodb","full-text-search"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1647330806,"post_id":71478264,"comment_id":126337718,"body_markdown":"Is this what you are looking for: Spring Data MongoDB [Full Text Queries](https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mongo.textsearch).","body":"Is this what you are looking for: Spring Data MongoDB <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mongo.textsearch\" rel=\"nofollow noreferrer\">Full Text Queries</a>."},{"owner":{"account_id":11697840,"reputation":53,"user_id":8563982,"display_name":"Łukasz Milunas"},"score":0,"creation_date":1647342543,"post_id":71478264,"comment_id":126341899,"body_markdown":"@prasad_ will this search for phrases like &quot;coff&quot; and &quot;cak&quot;? I&#39;m not sure","body":"@prasad_ will this search for phrases like &quot;coff&quot; and &quot;cak&quot;? I&#39;m not sure"}],"owner":{"account_id":11697840,"reputation":53,"user_id":8563982,"display_name":"Łukasz Milunas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":323,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1647328637,"creation_date":1647328637,"question_id":71478264,"body_markdown":"I have to filter documents by multiple fields using regex (text searching, but mongo text indexes don&#39;t allow partial search)\r\n\r\nEverything works fine when I make big OR Criteria\r\n```\r\n    Criteria().orOperator(\r\n            Criteria.where(fieldOne).regex(search, caseInsensitive),\r\n            Criteria.where(fieldTwo).regex(search, caseInsensitive),\r\n            ..\r\n```\r\n\r\nBut probably this could be made smoother if I used: https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/\r\n\r\nMy problem is when I trying to use this in java like that:\r\n```\r\nAggregation.addFields()\r\n        .addField(&quot;\\$fullText&quot;)\r\n        .withValueOfExpression(&quot;\\$concat&quot;, fieldOne, fieldTwo, ..\r\n```\r\n\r\nMongoTemplate sees only first param from above function\r\n```MongoTemplate : Executing aggregation: [{ &quot;$addFields&quot; : { &quot;fullText&quot; : &quot;$concat&quot;}},```\r\n\r\nFunny because if I write this like that:\r\n```Aggregation.addFields()\r\n        .addField(&quot;\\$fullText&quot;)\r\n        .withValueOfExpression(fieldOne, fieldTwo, &quot;\\$concat&quot;, ..\r\n```\r\n\r\nIt returns me result filtered only by ```fieldOne``` and query looks like that: ```\r\nMongoTemplate : Executing aggregation: [{ &quot;$addFields&quot; : { &quot;fullText&quot; : &quot;$fieldOne&quot;}},```\r\n\r\nDid anyone have similar problem?\r\nThanks in advance for any help :)","title":"Problem with mongo AddFieldsOperation in java","body":"<p>I have to filter documents by multiple fields using regex (text searching, but mongo text indexes don't allow partial search)</p>\n<p>Everything works fine when I make big OR Criteria</p>\n<pre><code>    Criteria().orOperator(\n            Criteria.where(fieldOne).regex(search, caseInsensitive),\n            Criteria.where(fieldTwo).regex(search, caseInsensitive),\n            ..\n</code></pre>\n<p>But probably this could be made smoother if I used: <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/</a></p>\n<p>My problem is when I trying to use this in java like that:</p>\n<pre><code>Aggregation.addFields()\n        .addField(&quot;\\$fullText&quot;)\n        .withValueOfExpression(&quot;\\$concat&quot;, fieldOne, fieldTwo, ..\n</code></pre>\n<p>MongoTemplate sees only first param from above function\n<code>MongoTemplate : Executing aggregation: [{ &quot;$addFields&quot; : { &quot;fullText&quot; : &quot;$concat&quot;}},</code></p>\n<p>Funny because if I write this like that:</p>\n<pre><code>        .addField(&quot;\\$fullText&quot;)\n        .withValueOfExpression(fieldOne, fieldTwo, &quot;\\$concat&quot;, ..\n</code></pre>\n<p>It returns me result filtered only by <code>fieldOne</code> and query looks like that: <code> MongoTemplate : Executing aggregation: [{ &quot;$addFields&quot; : { &quot;fullText&quot; : &quot;$fieldOne&quot;}},</code></p>\n<p>Did anyone have similar problem?\nThanks in advance for any help :)</p>\n"},{"tags":["java","apache","chomp"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1311930137,"post_id":6870858,"comment_id":8174042,"body_markdown":"`\\n` **is** U+000A (a.k.a newline). Could you tell us **exactly** what your `String` looks like? Best provide a `char`-for-`char` dump of it.","body":"<code>\\n</code> <b>is</b> U+000A (a.k.a newline). Could you tell us <b>exactly</b> what your <code>String</code> looks like? Best provide a <code>char</code>-for-<code>char</code> dump of it."},{"owner":{"account_id":125813,"reputation":23095,"user_id":321862,"accept_rate":84,"display_name":"Oh Chin Boon"},"score":0,"creation_date":1311930340,"post_id":6870858,"comment_id":8174077,"body_markdown":"Hi joachi, it is returned as &quot;5761 6920 4D61 6E0D 0A&quot; for &quot;Wai Man&quot;, a person&#39;s name.","body":"Hi joachi, it is returned as &quot;5761 6920 4D61 6E0D 0A&quot; for &quot;Wai Man&quot;, a person&#39;s name."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1311930548,"post_id":6870858,"comment_id":8174128,"body_markdown":"This is simply &quot;Wai Man&quot; with a tailing `\\r\\n` (i.e. a DOS/Windows-style newline). `input.replace(&quot;[\\r\\n]+$&quot;, &quot;&quot;)` should get rid of any tailing newlines on your input.","body":"This is simply &quot;Wai Man&quot; with a tailing <code>\\r\\n</code> (i.e. a DOS/Windows-style newline). <code>input.replace(&quot;[\\r\\n]+$&quot;, &quot;&quot;)</code> should get rid of any tailing newlines on your input."},{"owner":{"account_id":125813,"reputation":23095,"user_id":321862,"accept_rate":84,"display_name":"Oh Chin Boon"},"score":0,"creation_date":1311930605,"post_id":6870858,"comment_id":8174138,"body_markdown":"Joachim: I think that is a Unix newline..","body":"Joachim: I think that is a Unix newline.."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1311931560,"post_id":6870858,"comment_id":8174349,"body_markdown":"No, [Unix uses a simple `\\n` (a.k.a LF)](http://en.wikipedia.org/wiki/Newline).","body":"No, <a href=\"http://en.wikipedia.org/wiki/Newline\" rel=\"nofollow noreferrer\">Unix uses a simple <code>\\n</code> (a.k.a LF)</a>."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1311930124,"creation_date":1311930124,"answer_id":6870881,"question_id":6870858,"body_markdown":"You can use a regular expression\r\n\r\n    String text = &quot;Hello\\r\\nThere\\r\\n&quot;;\r\n    String shortText = text.replaceAll(&quot;\\r&quot;, &quot;&quot;);","title":"Java How to remove carriage return (HEX 0A) from String?","body":"<p>You can use a regular expression</p>\n\n<pre><code>String text = \"Hello\\r\\nThere\\r\\n\";\nString shortText = text.replaceAll(\"\\r\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24529068,"reputation":1,"user_id":18441167,"display_name":"Tarun Agrawal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647328617,"creation_date":1647017743,"answer_id":71442035,"question_id":6870858,"body_markdown":"This is what I did and it worked for me: \r\n \r\n\r\n    input_data.replaceAll(&quot;\\\\xC2&quot;,&quot; &quot;).replaceAll(&quot;\\\\xA0&quot;,&quot; &quot;)","title":"Java How to remove carriage return (HEX 0A) from String?","body":"<p>This is what I did and it worked for me:</p>\n<pre><code>input_data.replaceAll(&quot;\\\\xC2&quot;,&quot; &quot;).replaceAll(&quot;\\\\xA0&quot;,&quot; &quot;)\n</code></pre>\n"}],"owner":{"account_id":125813,"reputation":23095,"user_id":321862,"accept_rate":84,"display_name":"Oh Chin Boon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10338,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":6870881,"answer_count":2,"score":1,"last_activity_date":1647328617,"creation_date":1311929985,"question_id":6870858,"body_markdown":"If a particular String contains a newline character that is invisible (not \\n but is 0A in hexadecimal because this value is passed down from the database), how can i able to chomp it away? Will Apache Chomp help?\r\n\r\nhttp://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#chomp(java.lang.String)\r\n\r\nThe hex form of the text returned from the database is &quot;5761 6920 4D61 6E0D 0A&quot;\r\n\r\nIt translates to &quot;Wai Man&quot; with a carriage return. ","title":"Java How to remove carriage return (HEX 0A) from String?","body":"<p>If a particular String contains a newline character that is invisible (not \\n but is 0A in hexadecimal because this value is passed down from the database), how can i able to chomp it away? Will Apache Chomp help?</p>\n\n<p><a href=\"http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#chomp(java.lang.String\" rel=\"nofollow\">http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#chomp(java.lang.String</a>)</p>\n\n<p>The hex form of the text returned from the database is \"5761 6920 4D61 6E0D 0A\"</p>\n\n<p>It translates to \"Wai Man\" with a carriage return. </p>\n"},{"tags":["java","android","mqtt"],"comments":[{"owner":{"account_id":6476838,"reputation":12880,"user_id":5015207,"accept_rate":83,"display_name":"B&#246; macht Blau"},"score":0,"creation_date":1583871514,"post_id":60625160,"comment_id":107257254,"body_markdown":"Please post the dependencies closure in the  module `build.gradle`","body":"Please post the dependencies closure in the  module <code>build.gradle</code>"},{"owner":{"account_id":236814,"reputation":55963,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":0,"creation_date":1583871556,"post_id":60625160,"comment_id":107257272,"body_markdown":"Duplicate of https://stackoverflow.com/questions/59101906/after-changing-the-version-to-androidx-it-does-not-become-mqtt-connect","body":"Duplicate of <a href=\"https://stackoverflow.com/questions/59101906/after-changing-the-version-to-androidx-it-does-not-become-mqtt-connect\" title=\"after changing the version to androidx it does not become mqtt connect\">stackoverflow.com/questions/59101906/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":18504186,"reputation":1,"user_id":13480854,"display_name":"NOZUONODIE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588750155,"creation_date":1588750155,"answer_id":61629644,"question_id":60625160,"body_markdown":"Because LocalBroadcastManager is deprecated\r\nIn the build.Gradle added implementation &#39;com.android.support:support-v4:4.4.1&#39;","title":"MQTT Android Studio app crashes when conecting to broker","body":"<p>Because LocalBroadcastManager is deprecated\nIn the build.Gradle added implementation 'com.android.support:support-v4:4.4.1'</p>\n"},{"tags":[],"owner":{"account_id":24527990,"reputation":1,"user_id":18440210,"display_name":"soumaya akil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647328537,"creation_date":1647010355,"answer_id":71440362,"question_id":60625160,"body_markdown":"add this in build.gradle `implementation&#39;androidx.localbroadcastmanager:localbroadcastmanager:1.0.0&#39;`","title":"MQTT Android Studio app crashes when conecting to broker","body":"<p>add this in build.gradle <code>implementation'androidx.localbroadcastmanager:localbroadcastmanager:1.0.0'</code></p>\n"}],"owner":{"account_id":17946802,"reputation":1,"user_id":13040885,"display_name":"Keule 2"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1647328537,"creation_date":1583870821,"question_id":60625160,"body_markdown":"I am trying to publish a message to my MQTT broker(which is my Raspberry Pi) for the topic &quot;anlage&quot; via a simple button. When I press the button the app crashes and I get this error:\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: de.keule.contollerphone, PID: 16703\r\n    java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/localbroadcastmanager/content/LocalBroadcastManager;\r\n        at org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\r\n        at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\r\n        at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\r\n        at de.keule.contollerphone.MainActivity.sendMqttMsg(MainActivity.java:43)\r\n        at de.keule.contollerphone.MainActivity.onCreate(MainActivity.java:32)\r\n        at android.app.Activity.performCreate(Activity.java:7144)\r\n        at android.app.Activity.performCreate(Activity.java:7135)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1297)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2944)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3099)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1829)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:215)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6910)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\r\n     Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.localbroadcastmanager.content.LocalBroadcastManager&quot; on path: DexPathList[[zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/base.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_dependencies_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_resources_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_0_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_1_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_2_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_3_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_4_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_5_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_6_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_7_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_8_apk.apk&quot;, zip file &quot;/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_9_apk.apk&quot;],nativeLibraryDirectories=[/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/lib/arm64, /system/lib64]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        at org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)&#160;\r\n        at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)&#160;\r\n        at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)&#160;\r\n        at de.keule.contollerphone.MainActivity.sendMqttMsg(MainActivity.java:43)&#160;\r\n        at de.keule.contollerphone.MainActivity.onCreate(MainActivity.java:32)&#160;\r\n        at android.app.Activity.performCreate(Activity.java:7144)&#160;\r\n        at android.app.Activity.performCreate(Activity.java:7135)&#160;\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1297)&#160;\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2944)&#160;\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3099)&#160;\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1829)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n        at android.os.Looper.loop(Looper.java:215)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:6910)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)&#160;\r\n    \tSuppressed: java.io.IOException: No original dex files found for dex location /data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_resources_apk.apk\r\n        at dalvik.system.DexFile.openDexFileNative(Native Method)\r\n        at dalvik.system.DexFile.openDexFile(DexFile.java:354)\r\n        at dalvik.system.DexFile.&lt;init&gt;(DexFile.java:101)\r\n        at dalvik.system.DexFile.&lt;init&gt;(DexFile.java:75)\r\n        at dalvik.system.DexPathList.loadDexFile(DexPathList.java:394)\r\n        at dalvik.system.DexPathList.makeDexElements(DexPathList.java:354)\r\n        at dalvik.system.DexPathList.&lt;init&gt;(DexPathList.java:164)\r\n        at dalvik.system.BaseDexClassLoader.&lt;init&gt;(BaseDexClassLoader.java:74)\r\n        at dalvik.system.BaseDexClassLoader.&lt;init&gt;(BaseDexClassLoader.java:65)\r\n        at dalvik.system.PathClassLoader.&lt;init&gt;(PathClassLoader.java:64)\r\n        at com.android.internal.os.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:73)\r\n        at com.android.internal.os.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:88)\r\n        at android.app.ApplicationLoaders.getClassLoader(ApplicationLoaders.java:74)\r\n        at android.app.ApplicationLoaders.getClassLoader(ApplicationLoaders.java:40)\r\n        at android.app.LoadedApk.createOrUpdateClassLoaderLocked(LoadedApk.java:731)\r\n        at android.app.LoadedApk.getClassLoader(LoadedApk.java:814)\r\n        at android.app.LoadedApk.getResources(LoadedApk.java:1036)\r\n        at android.app.ContextImpl.createAppContext(ContextImpl.java:2345)\r\n        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5956)\r\n        at android.app.ActivityThread.access$1100(ActivityThread.java:201)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1669)\r\n        \t\t... 6 more\r\nDoes I miss something or I have to add somthingelse?\r\nI&#39;ve imported the mqtt library paho org.eclipse.paho:org.eclipse.paho.android.service:1.1.1 and org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.0 via maven. Is ther another way to implement mqtt in Android Studio or what can I do to get it work. I&#39;ve already searched for the problem on the web but I didn&#39;t found any solution.\r\n\r\nI&#39;ve gave the app this permissions:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\n    &lt;!--&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;--&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\nand also added \r\n\r\n    &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt;\r\n\r\nThats the code:\r\n\r\n    public  void sendMqttMsg(){\r\n            androidClient = new MqttAndroidClient(this, &quot;tcp://192.168.178.41:1883&quot;, &quot;phoneController&quot;);\r\n            options = new MqttConnectOptions();\r\n            options.setCleanSession(true);\r\n            options.setAutomaticReconnect(true);\r\n\r\n            MqttMessage msg = new MqttMessage(&quot;1&quot;.getBytes());\r\n            try {\r\n                androidClient.connect(options);\r\n                androidClient.publish(&quot;anlage&quot;, msg);\r\n                androidClient.disconnect();\r\n            }catch(MqttException e){\r\n                e.printStackTrace();\r\n      }\r\n    }\r\n\r\nEdit: build.gradle\r\n\r\n        dependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &#39;androidx.appcompat:appcompat:1.1.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n    testImplementation &#39;junit:junit:4.12&#39;\r\n    androidTestImplementation &#39;androidx.test:runner:1.2.0&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.2.0&#39;\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.0&#39;\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;\r\n}\r\n","title":"MQTT Android Studio app crashes when conecting to broker","body":"<p>I am trying to publish a message to my MQTT broker(which is my Raspberry Pi) for the topic \"anlage\" via a simple button. When I press the button the app crashes and I get this error:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: de.keule.contollerphone, PID: 16703\njava.lang.NoClassDefFoundError: Failed resolution of: Landroidx/localbroadcastmanager/content/LocalBroadcastManager;\n    at org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\n    at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\n    at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\n    at de.keule.contollerphone.MainActivity.sendMqttMsg(MainActivity.java:43)\n    at de.keule.contollerphone.MainActivity.onCreate(MainActivity.java:32)\n    at android.app.Activity.performCreate(Activity.java:7144)\n    at android.app.Activity.performCreate(Activity.java:7135)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1297)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2944)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3099)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1829)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:215)\n    at android.app.ActivityThread.main(ActivityThread.java:6910)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n Caused by: java.lang.ClassNotFoundException: Didn't find class \"androidx.localbroadcastmanager.content.LocalBroadcastManager\" on path: DexPathList[[zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/base.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_dependencies_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_resources_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_0_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_1_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_2_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_3_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_4_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_5_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_6_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_7_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_8_apk.apk\", zip file \"/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_slice_9_apk.apk\"],nativeLibraryDirectories=[/data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/lib/arm64, /system/lib64]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450) \n    at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428) \n    at org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334) \n    at de.keule.contollerphone.MainActivity.sendMqttMsg(MainActivity.java:43) \n    at de.keule.contollerphone.MainActivity.onCreate(MainActivity.java:32) \n    at android.app.Activity.performCreate(Activity.java:7144) \n    at android.app.Activity.performCreate(Activity.java:7135) \n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1297) \n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2944) \n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3099) \n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78) \n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108) \n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68) \n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1829) \n    at android.os.Handler.dispatchMessage(Handler.java:106) \n    at android.os.Looper.loop(Looper.java:215) \n    at android.app.ActivityThread.main(ActivityThread.java:6910) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493) \n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858) \n    Suppressed: java.io.IOException: No original dex files found for dex location /data/app/de.keule.contollerphone-kCw6W4HAAaPrigb6bwXOQg==/split_lib_resources_apk.apk\n    at dalvik.system.DexFile.openDexFileNative(Native Method)\n    at dalvik.system.DexFile.openDexFile(DexFile.java:354)\n    at dalvik.system.DexFile.&lt;init&gt;(DexFile.java:101)\n    at dalvik.system.DexFile.&lt;init&gt;(DexFile.java:75)\n    at dalvik.system.DexPathList.loadDexFile(DexPathList.java:394)\n    at dalvik.system.DexPathList.makeDexElements(DexPathList.java:354)\n    at dalvik.system.DexPathList.&lt;init&gt;(DexPathList.java:164)\n    at dalvik.system.BaseDexClassLoader.&lt;init&gt;(BaseDexClassLoader.java:74)\n    at dalvik.system.BaseDexClassLoader.&lt;init&gt;(BaseDexClassLoader.java:65)\n    at dalvik.system.PathClassLoader.&lt;init&gt;(PathClassLoader.java:64)\n    at com.android.internal.os.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:73)\n    at com.android.internal.os.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:88)\n    at android.app.ApplicationLoaders.getClassLoader(ApplicationLoaders.java:74)\n    at android.app.ApplicationLoaders.getClassLoader(ApplicationLoaders.java:40)\n    at android.app.LoadedApk.createOrUpdateClassLoaderLocked(LoadedApk.java:731)\n    at android.app.LoadedApk.getClassLoader(LoadedApk.java:814)\n    at android.app.LoadedApk.getResources(LoadedApk.java:1036)\n    at android.app.ContextImpl.createAppContext(ContextImpl.java:2345)\n    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5956)\n    at android.app.ActivityThread.access$1100(ActivityThread.java:201)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1669)\n            ... 6 more\n</code></pre>\n\n<p>Does I miss something or I have to add somthingelse?\nI've imported the mqtt library paho org.eclipse.paho:org.eclipse.paho.android.service:1.1.1 and org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.0 via maven. Is ther another way to implement mqtt in Android Studio or what can I do to get it work. I've already searched for the problem on the web but I didn't found any solution.</p>\n\n<p>I've gave the app this permissions:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WAKE_LOCK\" /&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n\n&lt;!--&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /&gt;--&gt;\n&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>and also added </p>\n\n<pre><code>&lt;service android:name=\"org.eclipse.paho.android.service.MqttService\" /&gt;\n</code></pre>\n\n<p>Thats the code:</p>\n\n<pre><code>public  void sendMqttMsg(){\n        androidClient = new MqttAndroidClient(this, \"tcp://192.168.178.41:1883\", \"phoneController\");\n        options = new MqttConnectOptions();\n        options.setCleanSession(true);\n        options.setAutomaticReconnect(true);\n\n        MqttMessage msg = new MqttMessage(\"1\".getBytes());\n        try {\n            androidClient.connect(options);\n            androidClient.publish(\"anlage\", msg);\n            androidClient.disconnect();\n        }catch(MqttException e){\n            e.printStackTrace();\n  }\n}\n</code></pre>\n\n<p>Edit: build.gradle</p>\n\n<pre><code>    dependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation 'androidx.appcompat:appcompat:1.1.0'\nimplementation 'androidx.constraintlayout:constraintlayout:1.1.3'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'androidx.test:runner:1.2.0'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\nimplementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.1.0'\nimplementation 'org.eclipse.paho:org.eclipse.paho.android.service:1.1.1'\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","excel","apache-poi","ms-office"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1647328489,"creation_date":1646913593,"answer_id":71423800,"question_id":71411210,"body_markdown":"The setting filter privacy is set in workbook properties of `/xl/workbook.xml`. \r\n\r\nThe XML looks like:\r\n\r\n    &lt;workbookPr filterPrivacy=&quot;1&quot; ...&gt;\r\n\r\nIt can be removed as so:\r\n\r\n    XSSFWorkbook workbook ...\r\n    workbook.getCTWorkbook().getWorkbookPr().unsetFilterPrivacy();\r\n\r\nAfter that the Option &quot;Remove personal information from file properties on save&quot; in Trust Center - Privacy Options should show as unchecked.\r\n\r\nComplete example:\r\n\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    \r\n    class ExcelRemoveFilterPrivacy {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n      String fileIn = &quot;./TestIn.xlsx&quot;;\r\n      String fileOut = &quot;./TestOut.xlsx&quot;;\r\n    \r\n      try (XSSFWorkbook workbook = (XSSFWorkbook)WorkbookFactory.create(new FileInputStream(fileIn));\r\n           FileOutputStream out = new FileOutputStream(fileOut)) {\r\n    \r\n       if (workbook.getCTWorkbook().getWorkbookPr().isSetFilterPrivacy())\r\n        workbook.getCTWorkbook().getWorkbookPr().unsetFilterPrivacy();\r\n    \r\n       workbook.write(out);\r\n      } \r\n     }\r\n    }","title":"How to disable &quot;Remove Personal Information from file properties on save&quot; in Excel using Java and Apache POI","body":"<p>The setting filter privacy is set in workbook properties of <code>/xl/workbook.xml</code>.</p>\n<p>The XML looks like:</p>\n<pre><code>&lt;workbookPr filterPrivacy=&quot;1&quot; ...&gt;\n</code></pre>\n<p>It can be removed as so:</p>\n<pre><code>XSSFWorkbook workbook ...\nworkbook.getCTWorkbook().getWorkbookPr().unsetFilterPrivacy();\n</code></pre>\n<p>After that the Option &quot;Remove personal information from file properties on save&quot; in Trust Center - Privacy Options should show as unchecked.</p>\n<p>Complete example:</p>\n<pre><code>import org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.xssf.usermodel.*;\n\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\n\nclass ExcelRemoveFilterPrivacy {\n\n public static void main(String[] args) throws Exception {\n  String fileIn = &quot;./TestIn.xlsx&quot;;\n  String fileOut = &quot;./TestOut.xlsx&quot;;\n\n  try (XSSFWorkbook workbook = (XSSFWorkbook)WorkbookFactory.create(new FileInputStream(fileIn));\n       FileOutputStream out = new FileOutputStream(fileOut)) {\n\n   if (workbook.getCTWorkbook().getWorkbookPr().isSetFilterPrivacy())\n    workbook.getCTWorkbook().getWorkbookPr().unsetFilterPrivacy();\n\n   workbook.write(out);\n  } \n }\n}\n</code></pre>\n"}],"owner":{"account_id":15131216,"reputation":3,"user_id":10919048,"display_name":"jaydvd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":728,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71423800,"answer_count":1,"score":0,"last_activity_date":1647328489,"creation_date":1646837282,"question_id":71411210,"body_markdown":"I am working on streamlining an Excel file tracking process. Basically when an excel file is uploaded to our server we need to keep a copy of the original version, as well as the new version with changes (via using the &quot;track changes&quot; option in excel).  I have all the steps of this figured out except the following. \r\n\r\nI am able to use Apache POI to disable any protection on the sheet and make a copy. However if I want to enable &quot;Tracking Changes&quot; on the spreadsheet I must go into **excel -&gt; options -&gt; Trust Center settings -&gt; privacy options  then uncheck the box that says &quot;Remove personal information from file properties on save&quot;**  once this is done, the &quot;track changes&quot; option becomes available. \r\n\r\nMy question is, can this setting be disabled via apache poi before the user even opens it so that the user does not need to open the file and navigate to the trust center settings every time? I have been googling but cant get a clear answer. any help would be much appreciated!\r\n\r\nAn overview of how I want this to work -&gt;&lt;br&gt;\r\nuser drops an xlsx file in a folder &lt;br&gt;\r\nMy app makes a copy of that file with locking and privacy disabled&lt;br&gt;\r\nthe user can then open that file and enable track changes to make changes. &lt;br&gt;\r\n\r\nHow it is working now&lt;br&gt;\r\nuser drops an xlsx file in the folder&lt;br&gt;\r\nmy app makes a copy of that file with locking disabled.&lt;br&gt;\r\n*The user then needs to open the file, go several layers deep into options to disable &quot;remove personal information&quot;*&lt;br&gt;\r\nThen the user can enable &quot;track changes&quot;\r\n\r\nI know this seems like a small change, but the idea is to make this as simple as possible. \r\n\r\nThanks for reading!","title":"How to disable &quot;Remove Personal Information from file properties on save&quot; in Excel using Java and Apache POI","body":"<p>I am working on streamlining an Excel file tracking process. Basically when an excel file is uploaded to our server we need to keep a copy of the original version, as well as the new version with changes (via using the &quot;track changes&quot; option in excel).  I have all the steps of this figured out except the following.</p>\n<p>I am able to use Apache POI to disable any protection on the sheet and make a copy. However if I want to enable &quot;Tracking Changes&quot; on the spreadsheet I must go into <strong>excel -&gt; options -&gt; Trust Center settings -&gt; privacy options  then uncheck the box that says &quot;Remove personal information from file properties on save&quot;</strong>  once this is done, the &quot;track changes&quot; option becomes available.</p>\n<p>My question is, can this setting be disabled via apache poi before the user even opens it so that the user does not need to open the file and navigate to the trust center settings every time? I have been googling but cant get a clear answer. any help would be much appreciated!</p>\n<p>An overview of how I want this to work -&gt;<br>\nuser drops an xlsx file in a folder <br>\nMy app makes a copy of that file with locking and privacy disabled<br>\nthe user can then open that file and enable track changes to make changes. <br></p>\n<p>How it is working now<br>\nuser drops an xlsx file in the folder<br>\nmy app makes a copy of that file with locking disabled.<br>\n<em>The user then needs to open the file, go several layers deep into options to disable &quot;remove personal information&quot;</em><br>\nThen the user can enable &quot;track changes&quot;</p>\n<p>I know this seems like a small change, but the idea is to make this as simple as possible.</p>\n<p>Thanks for reading!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":2,"creation_date":1647296604,"post_id":71474818,"comment_id":126331717,"body_markdown":"Rather than asking &quot;why does Java&quot;, it&#39;s useful to ask *which* part of &quot;Java&quot; is doing this to you.  It&#39;s not that you said &quot;put a null in the array&quot;, but it puts a false value there instead; you can easily determine that (e.g., look at it in the debugger.)  This sort of divide-and-conquer will quickly lead you to &quot;printf&quot; being the actor here.  Once you have that, its pretty easy to see why; it would rather produce some output (since printf is usually for debugging output) than throw an NPE and leave you wondering &quot;where did the null come from.&quot;","body":"Rather than asking &quot;why does Java&quot;, it&#39;s useful to ask <i>which</i> part of &quot;Java&quot; is doing this to you.  It&#39;s not that you said &quot;put a null in the array&quot;, but it puts a false value there instead; you can easily determine that (e.g., look at it in the debugger.)  This sort of divide-and-conquer will quickly lead you to &quot;printf&quot; being the actor here.  Once you have that, its pretty easy to see why; it would rather produce some output (since printf is usually for debugging output) than throw an NPE and leave you wondering &quot;where did the null come from.&quot;"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1647299881,"post_id":71474818,"comment_id":126332360,"body_markdown":"From the Javadoc: _&quot;&#39;b&#39;, &#39;B&#39; - If the argument arg is null, then the result is &quot;false&quot;. If arg is a boolean or Boolean, then the result is the string returned by String.valueOf(arg). Otherwise, the result is &quot;true&quot;. &quot;_","body":"From the Javadoc: <i>&quot;&#39;b&#39;, &#39;B&#39; - If the argument arg is null, then the result is &quot;false&quot;. If arg is a boolean or Boolean, then the result is the string returned by String.valueOf(arg). Otherwise, the result is &quot;true&quot;. &quot;</i>"}],"answers":[{"tags":[],"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647296411,"creation_date":1647296411,"answer_id":71474839,"question_id":71474818,"body_markdown":"Your assumptions are correct but you are printing with the format `%b` which always output true or false (&quot;true&quot; if non-null, &quot;false&quot; if null).","title":"Why does java replace null Object of class Boolean with false in this case?","body":"<p>Your assumptions are correct but you are printing with the format <code>%b</code> which always output true or false (&quot;true&quot; if non-null, &quot;false&quot; if null).</p>\n"},{"tags":[],"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1647316335,"creation_date":1647296622,"answer_id":71474864,"question_id":71474818,"body_markdown":"&gt; Why is that the case? I thought using Boolean class allows Booleans to be &quot;null&quot; ?\r\n\r\nYour example highlights the difference between a value and a *representation* of a value when you print it to the screen. The characters that print out don&#39;t necessarily reflect the true value. In this case, you are using the `%b` format specifier which can only print `true` or `false`, even if the actual value is something else.\r\n\r\nYou can [experiment with this by changing `%b` to `%s`][1]. This might get you a more accurate representation of the underlying values.\r\n\r\n\r\n  [1]: https://ideone.com/uGjoI5","title":"Why does java replace null Object of class Boolean with false in this case?","body":"<blockquote>\n<p>Why is that the case? I thought using Boolean class allows Booleans to be &quot;null&quot; ?</p>\n</blockquote>\n<p>Your example highlights the difference between a value and a <em>representation</em> of a value when you print it to the screen. The characters that print out don't necessarily reflect the true value. In this case, you are using the <code>%b</code> format specifier which can only print <code>true</code> or <code>false</code>, even if the actual value is something else.</p>\n<p>You can <a href=\"https://ideone.com/uGjoI5\" rel=\"nofollow noreferrer\">experiment with this by changing <code>%b</code> to <code>%s</code></a>. This might get you a more accurate representation of the underlying values.</p>\n"},{"tags":[],"owner":{"account_id":5544965,"reputation":6560,"user_id":4400060,"accept_rate":79,"display_name":"radrow"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647328372,"creation_date":1647296652,"answer_id":71474870,"question_id":71474818,"body_markdown":"It&#39;s because you used `printf` with `%b` format. Change it to for example `System.out.print` and you will see your nulls:\r\n```\r\nfor (int row = 0; row &lt; squaresWithPieces.length; row++) //Cycles through rows\r\n{\r\n  for (int col = 0; col &lt; squaresWithPieces[row].length; col++) //Cycles through columns\r\n  {\r\n     System.out.print(squaresWithPieces[row][col]); // Here! \r\n  }\r\n  System.out.println(); //Makes a new row\r\n}\r\n \r\n``` ","title":"Why does java replace null Object of class Boolean with false in this case?","body":"<p>It's because you used <code>printf</code> with <code>%b</code> format. Change it to for example <code>System.out.print</code> and you will see your nulls:</p>\n<pre><code>for (int row = 0; row &lt; squaresWithPieces.length; row++) //Cycles through rows\n{\n  for (int col = 0; col &lt; squaresWithPieces[row].length; col++) //Cycles through columns\n  {\n     System.out.print(squaresWithPieces[row][col]); // Here! \n  }\n  System.out.println(); //Makes a new row\n}\n \n</code></pre>\n"}],"owner":{"account_id":16601022,"reputation":43,"user_id":11996696,"display_name":"DerPascal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":3,"score":2,"last_activity_date":1647328372,"creation_date":1647296122,"question_id":71474818,"body_markdown":"So I made an array:\r\n\r\n    public static Boolean[][] squaresWithPieces = new Boolean[][]{\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\r\n        {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE}\r\n    };\r\n\r\nand when I run my main() method, which executes the following:\r\n\r\n    for (int row = 0; row &lt; squaresWithPieces.length; row++)  // Cycles through rows.\r\n    {\r\n        for (int col = 0; col &lt; squaresWithPieces[row].length; col++)  // Cycles through columns.\r\n        {\r\n            System.out.printf(&quot;%5b &quot;, squaresWithPieces[row][col]);  // Change the %5d to however much space you want.\r\n        }\r\n        System.out.println();  // Makes a new row\r\n    }\r\n\r\n\r\nI get the following output:\r\n\r\n     true  true false false false false false false \r\n     true  true false false false false false false \r\n     true  true false false false false false false \r\n     true  true false false false false false false \r\n     true  true false false false false false false \r\n     true  true false false false false false false \r\n     true  true false false false false false false \r\n     true  true false false false false false false\r\n\r\nWhy is that the case? I thought using Boolean class allows Booleans to be &quot;null&quot;?\r\n\r\n[This question][1] also shows that.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/15937715/java-check-if-boolean-is-null#:~:text=A%20boolean%20cannot%20be%20null,will%20be%20false%20by%20default.","title":"Why does java replace null Object of class Boolean with false in this case?","body":"<p>So I made an array:</p>\n<pre><code>public static Boolean[][] squaresWithPieces = new Boolean[][]{\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE},\n    {Boolean.TRUE,Boolean.TRUE,null,null,null,null,Boolean.FALSE,Boolean.FALSE}\n};\n</code></pre>\n<p>and when I run my main() method, which executes the following:</p>\n<pre><code>for (int row = 0; row &lt; squaresWithPieces.length; row++)  // Cycles through rows.\n{\n    for (int col = 0; col &lt; squaresWithPieces[row].length; col++)  // Cycles through columns.\n    {\n        System.out.printf(&quot;%5b &quot;, squaresWithPieces[row][col]);  // Change the %5d to however much space you want.\n    }\n    System.out.println();  // Makes a new row\n}\n</code></pre>\n<p>I get the following output:</p>\n<pre><code> true  true false false false false false false \n true  true false false false false false false \n true  true false false false false false false \n true  true false false false false false false \n true  true false false false false false false \n true  true false false false false false false \n true  true false false false false false false \n true  true false false false false false false\n</code></pre>\n<p>Why is that the case? I thought using Boolean class allows Booleans to be &quot;null&quot;?</p>\n<p><a href=\"https://stackoverflow.com/questions/15937715/java-check-if-boolean-is-null#:%7E:text=A%20boolean%20cannot%20be%20null,will%20be%20false%20by%20default.\">This question</a> also shows that.</p>\n"},{"tags":["java","spring","spring-boot","hazelcast"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1642427418,"post_id":70742411,"comment_id":125060871,"body_markdown":"Ofcourse it is `null`. First `@Autowired` doesn&#39;t work on `static` fields, second you aren&#39;t even using the configuration you&#39;ve created.","body":"Ofcourse it is <code>null</code>. First <code>@Autowired</code> doesn&#39;t work on <code>static</code> fields, second you aren&#39;t even using the configuration you&#39;ve created."}],"answers":[{"tags":[],"owner":{"account_id":1009321,"reputation":10671,"user_id":1022260,"accept_rate":53,"display_name":"mikeb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642427728,"creation_date":1642427728,"answer_id":70742517,"question_id":70742411,"body_markdown":"You need to use a `CommandLineRunner` so that Spring builds your context (in other words, creates your `@Bean`s and autowires them)\r\n\r\nSee the tutorial here for a good start:\r\n\r\nhttps://spring.io/guides/gs/spring-boot/\r\n\r\nBasically, instead of the `public static void main` you need to do something like this:\r\n\r\n```\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic CommandLineRunner commandLineRunner(ApplicationContext ctx) {\r\n\t\treturn args -&gt; {\r\n\r\n\t\t\tSystem.out.println(&quot;Let&#39;s inspect the beans provided by Spring Boot:&quot;);\r\n\r\n\t\t\tString[] beanNames = ctx.getBeanDefinitionNames();\r\n\t\t\tArrays.sort(beanNames);\r\n\t\t\tfor (String beanName : beanNames) {\r\n\t\t\t\tSystem.out.println(beanName);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe `@SpringBootApplication` and `SpringApplication.run` part tells Spring to do it&#39;s magic, read the tutorial I linked for the details.","title":"Spring Boot @Autowire HazelcastInstance without XML or YAML","body":"<p>You need to use a <code>CommandLineRunner</code> so that Spring builds your context (in other words, creates your <code>@Bean</code>s and autowires them)</p>\n<p>See the tutorial here for a good start:</p>\n<p><a href=\"https://spring.io/guides/gs/spring-boot/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/spring-boot/</a></p>\n<p>Basically, instead of the <code>public static void main</code> you need to do something like this:</p>\n<pre><code>@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @Bean\n    public CommandLineRunner commandLineRunner(ApplicationContext ctx) {\n        return args -&gt; {\n\n            System.out.println(&quot;Let's inspect the beans provided by Spring Boot:&quot;);\n\n            String[] beanNames = ctx.getBeanDefinitionNames();\n            Arrays.sort(beanNames);\n            for (String beanName : beanNames) {\n                System.out.println(beanName);\n            }\n\n        };\n    }\n\n}\n</code></pre>\n<p>The <code>@SpringBootApplication</code> and <code>SpringApplication.run</code> part tells Spring to do it's magic, read the tutorial I linked for the details.</p>\n"}],"owner":{"account_id":8901665,"reputation":315,"user_id":6644926,"accept_rate":12,"display_name":"Владимир Гичев"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":572,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70742517,"answer_count":1,"score":1,"last_activity_date":1647328222,"creation_date":1642427242,"question_id":70742411,"body_markdown":"I&#39;m trying to run Hazelcast client application with Spring Boot without XML/YAML file but I can&#39;t find a way to manage my Hazelcast instance via Spring. This is my code\r\n\r\n```java\r\n@Configuration\r\npublic class ConfigurationClass {\r\n\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\r\n\t@Bean\r\n\tpublic ClientConfig clientConfig() {\r\n\t\tClientConfig clientConfig = new ClientConfig();\r\n\t\tClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();\r\n\t\tnetworkConfig.addAddress(&quot;127.0.0.1:5701&quot;).setSmartRouting(true).addOutboundPortDefinition(&quot;34700-34710&quot;).setRedoOperation(true).setConnectionTimeout(5000);\r\n\r\n\t\treturn clientConfig;\r\n\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic HazelcastInstance hazelcastInstance(ClientConfig clientConfig) {\r\n\t\treturn HazelcastClient.newHazelcastClient(clientConfig);\r\n\t}\r\n}\r\n```\r\nAnd when I try to Autowire Hazelcast instance into main class I get `NULL`. Main class code\r\n\r\n```java\r\npublic class HazelcastServer implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = -1798311083790835361L;\r\n\r\n\t@Autowired\r\n\tprivate static HazelcastInstance hazelcastInstance;\r\n\r\n\tpublic static void main(String[] args) {\r\n  System.out.println(&quot;hazelcastInstance: &quot; + hazelcastInstance);\r\n }\r\n}\r\n```","title":"Spring Boot @Autowire HazelcastInstance without XML or YAML","body":"<p>I'm trying to run Hazelcast client application with Spring Boot without XML/YAML file but I can't find a way to manage my Hazelcast instance via Spring. This is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class ConfigurationClass {\n\n    @Autowired\n    private Environment env;\n\n    @Bean\n    public ClientConfig clientConfig() {\n        ClientConfig clientConfig = new ClientConfig();\n        ClientNetworkConfig networkConfig = clientConfig.getNetworkConfig();\n        networkConfig.addAddress(&quot;127.0.0.1:5701&quot;).setSmartRouting(true).addOutboundPortDefinition(&quot;34700-34710&quot;).setRedoOperation(true).setConnectionTimeout(5000);\n\n        return clientConfig;\n\n    }\n\n    @Bean\n    public HazelcastInstance hazelcastInstance(ClientConfig clientConfig) {\n        return HazelcastClient.newHazelcastClient(clientConfig);\n    }\n}\n</code></pre>\n<p>And when I try to Autowire Hazelcast instance into main class I get <code>NULL</code>. Main class code</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class HazelcastServer implements Serializable {\n\n    private static final long serialVersionUID = -1798311083790835361L;\n\n    @Autowired\n    private static HazelcastInstance hazelcastInstance;\n\n    public static void main(String[] args) {\n  System.out.println(&quot;hazelcastInstance: &quot; + hazelcastInstance);\n }\n}\n</code></pre>\n"},{"tags":["java","regex","regex-lookarounds"],"comments":[{"owner":{"account_id":9879926,"reputation":4097,"user_id":7316365,"accept_rate":80,"display_name":"Vivick"},"score":0,"creation_date":1647292649,"post_id":71474300,"comment_id":126330741,"body_markdown":"Honestly, looking at the input, you&#39;d probably be better off with using a parser. Even a simple one that&#39;s just a series of regexes you try until one matches","body":"Honestly, looking at the input, you&#39;d probably be better off with using a parser. Even a simple one that&#39;s just a series of regexes you try until one matches"},{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":2,"creation_date":1647292799,"post_id":71474300,"comment_id":126330786,"body_markdown":"Try using word boundaries `\\b` on the left and right of the pattern https://regex101.com/r/HtkEDO/1","body":"Try using word boundaries <code>\\b</code> on the left and right of the pattern <a href=\"https://regex101.com/r/HtkEDO/1\" rel=\"nofollow noreferrer\">regex101.com/r/HtkEDO/1</a>"}],"answers":[{"tags":[],"owner":{"account_id":13917404,"reputation":69,"user_id":10048805,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647328073,"creation_date":1647328073,"answer_id":71478185,"question_id":71474300,"body_markdown":"Incase anyone else is looking for this. I ended up figuring out a solution that worked. I would have just used \\b at the end but it didn&#39;t work for * characters. \r\nAnd the {0,30} in the lookbehind is because java wont let me do infinite quantifiers in a lookbehind. Kind of a mess to look at though.\r\n\r\n    (?&lt;!\\\\d(?:[xX]| and |by|\\\\*).{0,30})\\\\b(\\\\d+(?:,\\\\d+)*(?:\\\\.\\\\d+)?)[^\\\\dxX]*(?:[xX]| and |by|\\\\*)[^\\\\dxX]*(\\\\d+(?:,\\\\d+)*(?:\\\\.\\\\d+)?)(?!.*(?:[xX]| and |by|\\\\*)\\\\D*\\\\d+)","title":"Non-repeating Regex Pattern - negative lookahead","body":"<p>Incase anyone else is looking for this. I ended up figuring out a solution that worked. I would have just used \\b at the end but it didn't work for * characters.\nAnd the {0,30} in the lookbehind is because java wont let me do infinite quantifiers in a lookbehind. Kind of a mess to look at though.</p>\n<pre><code>(?&lt;!\\\\d(?:[xX]| and |by|\\\\*).{0,30})\\\\b(\\\\d+(?:,\\\\d+)*(?:\\\\.\\\\d+)?)[^\\\\dxX]*(?:[xX]| and |by|\\\\*)[^\\\\dxX]*(\\\\d+(?:,\\\\d+)*(?:\\\\.\\\\d+)?)(?!.*(?:[xX]| and |by|\\\\*)\\\\D*\\\\d+)\n</code></pre>\n"}],"owner":{"account_id":13917404,"reputation":69,"user_id":10048805,"display_name":"Alex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647328073,"creation_date":1647292286,"question_id":71474300,"body_markdown":"I am attempting to parse a string with regex in Java that is used for dimensions and return only the required parts of it.\r\n\r\nThe ideal String would be: number x number.\r\n\r\nAnything not in this format can be ignored and return null.\r\n\r\nSome of the Strings that are inputted include the following though.\r\n\r\n - 123x 132 sqft\r\n - 200 sq.ft. x 310 sq.ft.\r\n - 404X931X1007X1140\r\n - .772 Acres\r\n - 680 and 3209.05\r\n - 0.772 AC\r\n - approx 255 by 640\r\n - 111&#39;X301&#39;\r\n - approx. 2 acre\r\n\r\nMy current regex solution is this\r\n\r\n    &quot;(\\\\d+(?:\\\\.\\\\d*)?)[^\\\\dxX]*(?:[xX]| and |by|\\\\*)[^\\\\dxX]*(\\\\d+(?:\\\\.\\\\d*)?)&quot;\r\n\r\nand i return match.group(1) + &quot;x&quot; + match.group(2)\r\n\r\nThe problem I am left with is these repeating ones like &quot;404X931X1007X1140&quot;\r\nThis should also be returned as a null since its an irregular shape but instead returns 404x931\r\n\r\nMy question is how would I make sure not to include these? \r\nMy thought was to append a negative lookahead but it fails to meet my expectations and returns 404x93 for some reason.\r\n\r\n    first expression + &quot;\\\\D*(?!([xX]| and |by|\\\\*)\\\\d+)&quot;","title":"Non-repeating Regex Pattern - negative lookahead","body":"<p>I am attempting to parse a string with regex in Java that is used for dimensions and return only the required parts of it.</p>\n<p>The ideal String would be: number x number.</p>\n<p>Anything not in this format can be ignored and return null.</p>\n<p>Some of the Strings that are inputted include the following though.</p>\n<ul>\n<li>123x 132 sqft</li>\n<li>200 sq.ft. x 310 sq.ft.</li>\n<li>404X931X1007X1140</li>\n<li>.772 Acres</li>\n<li>680 and 3209.05</li>\n<li>0.772 AC</li>\n<li>approx 255 by 640</li>\n<li>111'X301'</li>\n<li>approx. 2 acre</li>\n</ul>\n<p>My current regex solution is this</p>\n<pre><code>&quot;(\\\\d+(?:\\\\.\\\\d*)?)[^\\\\dxX]*(?:[xX]| and |by|\\\\*)[^\\\\dxX]*(\\\\d+(?:\\\\.\\\\d*)?)&quot;\n</code></pre>\n<p>and i return match.group(1) + &quot;x&quot; + match.group(2)</p>\n<p>The problem I am left with is these repeating ones like &quot;404X931X1007X1140&quot;\nThis should also be returned as a null since its an irregular shape but instead returns 404x931</p>\n<p>My question is how would I make sure not to include these?\nMy thought was to append a negative lookahead but it fails to meet my expectations and returns 404x93 for some reason.</p>\n<pre><code>first expression + &quot;\\\\D*(?!([xX]| and |by|\\\\*)\\\\d+)&quot;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user15314575"},"score":0,"creation_date":1647327612,"post_id":71477916,"comment_id":126336831,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647327532,"creation_date":1647327532,"answer_id":71478113,"question_id":71477916,"body_markdown":"Have a look at regular expressions. If the content doesn&#39;t contain any new line characters (i.e. `\\n` which I assume is what you mean by `[Enter]`) you can try the following expression: \r\n\r\n`(.*?) (\\d+):(\\d+)\\t([^\\n]+)`\r\n\r\nBreak down of the expression:\r\n\r\n- `(.*?) ` matches anything but as little as possible and collects it into group 1. The match ends with a space which is not selected - this is the book\r\n- `(\\d+)` matches any sequence with at least 1 digit and captures it into a group. So `(\\d+):(\\d+)` captures chapter and verse into groups 2 and 3.\r\n- `\\t([^\\n]+)` matches a tab followed by a sequence of at least 1 non-new line character which is captured into group 4. This is the content.\r\n\r\nFor working with regex like this, have a look at the classes `Pattern` and `Matcher`.","title":"How do I convert to object different pattern in java","body":"<p>Have a look at regular expressions. If the content doesn't contain any new line characters (i.e. <code>\\n</code> which I assume is what you mean by <code>[Enter]</code>) you can try the following expression:</p>\n<p><code>(.*?) (\\d+):(\\d+)\\t([^\\n]+)</code></p>\n<p>Break down of the expression:</p>\n<ul>\n<li><code>(.*?) </code> matches anything but as little as possible and collects it into group 1. The match ends with a space which is not selected - this is the book</li>\n<li><code>(\\d+)</code> matches any sequence with at least 1 digit and captures it into a group. So <code>(\\d+):(\\d+)</code> captures chapter and verse into groups 2 and 3.</li>\n<li><code>\\t([^\\n]+)</code> matches a tab followed by a sequence of at least 1 non-new line character which is captured into group 4. This is the content.</li>\n</ul>\n<p>For working with regex like this, have a look at the classes <code>Pattern</code> and <code>Matcher</code>.</p>\n"}],"owner":{"account_id":19435180,"reputation":228,"user_id":14215175,"display_name":"anonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71478113,"answer_count":1,"score":0,"last_activity_date":1647327532,"creation_date":1647326159,"question_id":71477916,"body_markdown":"I have a set of data about book.\r\n&lt;br&gt;I have to convert the data to object. Line(book, chapter, verse, content)\r\n\r\nThe structure is&lt;br&gt;\r\nBook Chapter:Verse[tab]Content[Enter]\r\n\r\nExample&lt;br&gt;\r\ndeuteronomy 7:7\tthe lord did not set his love upon you, nor choose you, because ye were more in number than any people; for ye were the fewest of all people:\r\n&lt;br&gt;&lt;br&gt;\r\n1 samuel 17:6\tand he had greaves of brass upon his legs, and a target of brass between his shoulders.\r\n\r\nAs the book structure is different. &lt;br&gt;\r\n`1 samuel` and `deuteronomy`&lt;br&gt;\r\n`1 samuel` consist a space. how do i convert these data to object in java\r\n\r\nI have already divide into two part&lt;br&gt;\r\n`StringTokenizer itr = new StringTokenizer(value.toString().toLowerCase(),&quot;\\t&quot;);`&lt;br&gt;\r\nI think I should use `regex` to split them. But I don&#39;t know how to do that.","title":"How do I convert to object different pattern in java","body":"<p>I have a set of data about book.\n<br>I have to convert the data to object. Line(book, chapter, verse, content)</p>\n<p>The structure is<br>\nBook Chapter:Verse[tab]Content[Enter]</p>\n<p>Example<br>\ndeuteronomy 7:7 the lord did not set his love upon you, nor choose you, because ye were more in number than any people; for ye were the fewest of all people:\n<br><br>\n1 samuel 17:6   and he had greaves of brass upon his legs, and a target of brass between his shoulders.</p>\n<p>As the book structure is different. <br>\n<code>1 samuel</code> and <code>deuteronomy</code><br>\n<code>1 samuel</code> consist a space. how do i convert these data to object in java</p>\n<p>I have already divide into two part<br>\n<code>StringTokenizer itr = new StringTokenizer(value.toString().toLowerCase(),&quot;\\t&quot;);</code><br>\nI think I should use <code>regex</code> to split them. But I don't know how to do that.</p>\n"},{"tags":["java","hazelcast","hazelcast-jet"],"answers":[{"tags":[],"owner":{"account_id":920347,"reputation":10311,"user_id":952135,"accept_rate":58,"display_name":"Oliv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634546808,"creation_date":1634546808,"answer_id":69613136,"question_id":69590324,"body_markdown":"`Pipeline.readFrom` returns either `StreamStage` or `BatchStage`, depending on the source. `Sources.map()` is a batch source, it will read the map once and complete. `PostgresCdcSources.postgres()` is a streaming source, it will connect to the DB and will keep returning events as they happen until cancelled.\r\n\r\nYou need to pick a source depending on your use case, if this is your question.","title":"Hazelcast Jet change data capture","body":"<p><code>Pipeline.readFrom</code> returns either <code>StreamStage</code> or <code>BatchStage</code>, depending on the source. <code>Sources.map()</code> is a batch source, it will read the map once and complete. <code>PostgresCdcSources.postgres()</code> is a streaming source, it will connect to the DB and will keep returning events as they happen until cancelled.</p>\n<p>You need to pick a source depending on your use case, if this is your question.</p>\n"},{"tags":[],"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634762568,"creation_date":1634762568,"answer_id":69652787,"question_id":69590324,"body_markdown":"Using a CDC source only makes sense if you need your data to be continuously updated. E.g. react to each update in the database, or possibly load data into a Map and then run a batch job **repeatedly** at some time interval on an in-memory snapshot.\r\n\r\nIn this case, it&#39;s likely you want the first to happen only after the CDC source is up-to-date - after it read all _current state_ from the database and is only receiving updates as they are made to the database. Unfortunately, at the moment (Hazelcast 5.0) there is no way to tell when this happens using Jet API. \r\n\r\nIt might be possible that you can use some domain-specific information - having a timestamp field that you query for, last inserted record is present in the map or similar.\r\n\r\nIf you want to run a **single** batch job on data from a database table you should use a jdbc source.\r\n\r\n&gt;(Reason I&#39;m using CDC because if use jdbc or other alternative feature to load data into cache its taking to much of time)\r\n\r\nUsing CDC has its overhead and this is not something we usually see. Using plain SQL query like `SELECT * FROM table` with the jdbc source is faster than CDC source. Maybe you don&#39;t measure time it takes to process whole current state? It it really takes more time to load data using jdbc than CDC please file an issue with a reproducer.","title":"Hazelcast Jet change data capture","body":"<p>Using a CDC source only makes sense if you need your data to be continuously updated. E.g. react to each update in the database, or possibly load data into a Map and then run a batch job <strong>repeatedly</strong> at some time interval on an in-memory snapshot.</p>\n<p>In this case, it's likely you want the first to happen only after the CDC source is up-to-date - after it read all <em>current state</em> from the database and is only receiving updates as they are made to the database. Unfortunately, at the moment (Hazelcast 5.0) there is no way to tell when this happens using Jet API.</p>\n<p>It might be possible that you can use some domain-specific information - having a timestamp field that you query for, last inserted record is present in the map or similar.</p>\n<p>If you want to run a <strong>single</strong> batch job on data from a database table you should use a jdbc source.</p>\n<blockquote>\n<p>(Reason I'm using CDC because if use jdbc or other alternative feature to load data into cache its taking to much of time)</p>\n</blockquote>\n<p>Using CDC has its overhead and this is not something we usually see. Using plain SQL query like <code>SELECT * FROM table</code> with the jdbc source is faster than CDC source. Maybe you don't measure time it takes to process whole current state? It it really takes more time to load data using jdbc than CDC please file an issue with a reproducer.</p>\n"}],"owner":{"account_id":21111843,"reputation":125,"user_id":15519638,"display_name":"vivek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1647326955,"creation_date":1634330093,"question_id":69590324,"body_markdown":"I&#39;m using Hazelcast Change data capture (CDC) in my application. (Reason I&#39;m using CDC because if use jdbc  or other alternative feature to load data into cache its taking to much of time). So *CDC* will  have a data sync between database and Hazelcast Jet.\r\n\r\n```java\r\nStreamSource&lt;ChangeRecord&gt; source = PostgresCdcSources.postgres(&quot;source&quot;)\r\n\t\t\t\t.setCustomProperty(&quot;plugin.name&quot;, &quot;pgoutput&quot;).setDatabaseAddress(&quot;127.0.0.1&quot;).setDatabasePort(5432)\r\n\t\t\t\t.setDatabaseUser(&quot;postgres&quot;).setDatabasePassword(&quot;root&quot;).setDatabaseName(&quot;postgres&quot;)\r\n\t\t\t\t.setTableWhitelist(&quot;tblName&quot;).build();\r\n```\r\n\r\nhere I have following steps\r\n\r\n```java\r\nPipeline pipeline = Pipeline.create();\r\n\r\n// filter records based on deleted false\r\nStreamStage&lt;ChangeRecord&gt; deletedFlagRecords = pipeline.readFrom(source).withoutTimestamps()\r\n\t\t\t\t.filter(deletedFalse);\r\n\r\ndeletedFlagRecords.filter(idBasedFetch).writeTo(Sinks.logger());\r\n```\r\nHere I&#39;m using ```StreamSource&lt;ChangeRecord&gt; source``` object as input for my `pipeLine`. As you know ```source``` object is a Stream type. But in my case pipeLine data process is depends upon the user input data (some metadata). If I do any updates or delete in the db. jet will updates in all the stream instances. Since my data processing is depends upon the user data I don&#39;t want to use stream type after the first step. Only this first  ```StreamSource&lt;ChangeRecord&gt; source;``` required in the form of stream. In this next step I just want to this for batch process. So how to use ```source``` in the batch processing.\r\n\r\n```pipeLine.readFrom(source)``` //always return Stream type. so how to convert this into batch type. I tried one more way like read from ```source``` and  Sink everything to map.\r\n\r\n```\r\npipeLine.readFrom(source).writeTo(Sinks.map(&quot;dbStreamedData&quot;, e -&gt; e.key(), e -&gt; e.value()));\r\n```\r\n\r\nAgain construct pipeLine readFrom from map.\r\n\r\n```java\r\npipeline.readFrom(Sources.map(&quot;dbStreamedData&quot;)).writeTo(Sinks.logger());\r\n```\r\nthis is just returning null data. so Any suggestions would be helpful.","title":"Hazelcast Jet change data capture","body":"<p>I'm using Hazelcast Change data capture (CDC) in my application. (Reason I'm using CDC because if use jdbc  or other alternative feature to load data into cache its taking to much of time). So <em>CDC</em> will  have a data sync between database and Hazelcast Jet.</p>\n<pre class=\"lang-java prettyprint-override\"><code>StreamSource&lt;ChangeRecord&gt; source = PostgresCdcSources.postgres(&quot;source&quot;)\n                .setCustomProperty(&quot;plugin.name&quot;, &quot;pgoutput&quot;).setDatabaseAddress(&quot;127.0.0.1&quot;).setDatabasePort(5432)\n                .setDatabaseUser(&quot;postgres&quot;).setDatabasePassword(&quot;root&quot;).setDatabaseName(&quot;postgres&quot;)\n                .setTableWhitelist(&quot;tblName&quot;).build();\n</code></pre>\n<p>here I have following steps</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pipeline pipeline = Pipeline.create();\n\n// filter records based on deleted false\nStreamStage&lt;ChangeRecord&gt; deletedFlagRecords = pipeline.readFrom(source).withoutTimestamps()\n                .filter(deletedFalse);\n\ndeletedFlagRecords.filter(idBasedFetch).writeTo(Sinks.logger());\n</code></pre>\n<p>Here I'm using <code>StreamSource&lt;ChangeRecord&gt; source</code> object as input for my <code>pipeLine</code>. As you know <code>source</code> object is a Stream type. But in my case pipeLine data process is depends upon the user input data (some metadata). If I do any updates or delete in the db. jet will updates in all the stream instances. Since my data processing is depends upon the user data I don't want to use stream type after the first step. Only this first  <code>StreamSource&lt;ChangeRecord&gt; source;</code> required in the form of stream. In this next step I just want to this for batch process. So how to use <code>source</code> in the batch processing.</p>\n<p><code>pipeLine.readFrom(source)</code> //always return Stream type. so how to convert this into batch type. I tried one more way like read from <code>source</code> and  Sink everything to map.</p>\n<pre><code>pipeLine.readFrom(source).writeTo(Sinks.map(&quot;dbStreamedData&quot;, e -&gt; e.key(), e -&gt; e.value()));\n</code></pre>\n<p>Again construct pipeLine readFrom from map.</p>\n<pre class=\"lang-java prettyprint-override\"><code>pipeline.readFrom(Sources.map(&quot;dbStreamedData&quot;)).writeTo(Sinks.logger());\n</code></pre>\n<p>this is just returning null data. so Any suggestions would be helpful.</p>\n"},{"tags":["java","apache","http","elasticsearch","nio"],"answers":[{"tags":[],"owner":{"account_id":8181519,"reputation":1267,"user_id":6158542,"accept_rate":67,"display_name":"JonyD"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1487672362,"creation_date":1487672362,"answer_id":42364578,"question_id":42277635,"body_markdown":"The problem was the port was wrong. For REST requests the port should be 9200 (and not 9300 like it was configured). [More info on elasticsearch ports.][1]\r\n\r\nI wish elasticsearch could make a more explicit error log or a hint like &quot;are you connecting with the right port?&quot; for when one tries to access the 9300 port with anything other than the built-in clients.\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/guide/current/_talking_to_elasticsearch.html","title":"Elasticsearch Rest Client - ConnectionClosedException when calling performRequestAsync","body":"<p>The problem was the port was wrong. For REST requests the port should be 9200 (and not 9300 like it was configured). <a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/_talking_to_elasticsearch.html\" rel=\"noreferrer\">More info on elasticsearch ports.</a></p>\n\n<p>I wish elasticsearch could make a more explicit error log or a hint like \"are you connecting with the right port?\" for when one tries to access the 9300 port with anything other than the built-in clients.</p>\n"}],"owner":{"account_id":8181519,"reputation":1267,"user_id":6158542,"accept_rate":67,"display_name":"JonyD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14116,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":42364578,"answer_count":1,"score":5,"last_activity_date":1647326885,"creation_date":1487257548,"question_id":42277635,"body_markdown":"I&#39;m having a problem on HttpAsyncRequestExecutor.\r\n\r\nI&#39;m using [elasticsearch Java Rest Client][1] and I&#39;m always getting a `ConnectionClosedException` (see below) when I call the `performRequestAsync`:\r\n\r\n        // variables (all with valid format):\r\n        // endpoint is just a List&lt;String&gt; with &quot;14655/_search&quot;\r\n\r\n        // params is just a Map&lt;String, String&gt; with\r\n        //   &quot;pretty&quot;, &quot;true&quot;\r\n        //   &quot;search_type&quot;, &quot;query_then_fetch&quot;\r\n\r\n        // entity is just a HttpEntity entity with the Json body request\r\n \r\n        final int numRequests = endpoints.size();\r\n        final CountDownLatch latch = new CountDownLatch(numRequests);\r\n        try (Timer.Context ctx = this.requestTimer.time()) {\r\n            for (final String endpoint : endpoints) {\r\n                // ERROR hapens here:\r\n                restClient.performRequestAsync(&quot;GET&quot;, endpoint, params, entity,\r\n                        new ResponseListener() {\r\n\r\n                            @Override\r\n                            public void onSuccess(final Response response) {\r\n                                if (response != null) {\r\n                                    responses.add(response);\r\n                                    latch.countDown();\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onFailure(final Exception exception) {\r\n                                latch.countDown();\r\n\r\n                                logger.error(&quot;could not get search results for....&quot;,exception);\r\n                                exception.printStackTrace();\r\n                            }\r\n                        });\r\n            }\r\n        }\r\n\r\nException here:\r\n\r\n    org.apache.http.ConnectionClosedException: Connection closed\r\n\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.endOfInput(HttpAsyncRequestExecutor.java:341)\r\n\tat org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:263)\r\n\tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:81)\r\n\tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:39)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:116)\r\n\tat org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:164)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:339)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:317)\r\n\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:278)\r\n\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:106)\r\n\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:590)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\r\nI don&#39;t know what is the real cause for the connection close. The exact same request works well in [kopf][2] and returns valid search results.\r\nPlus, I don&#39;t call any `restClient.close()` or anything similar.\r\n\r\nAny ideas where the problem might be? \r\nIs the end of the input the cause to get a closed connection state (according to `org.apache.http.nio.protocol.HttpAsyncRequestExecutor.endOfInput(conn)`)? If yes, what input is that?\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/_example_requests.html\r\n  [2]: https://github.com/lmenezes/elasticsearch-kopf\r\n\r\n\r\n\r\n**UPDATE:**\r\n\r\nI suspect the problem is related to Tomcat&#39;s `HttpClient`, because this code works correctly in an integration test (that is, returns results)... But it does not work (get the same `ConnectionClosedException`) when I make a REST request through a tomcat deployed &quot;interface&quot; \r\n\r\nAny lights on this?\r\n\r\n","title":"Elasticsearch Rest Client - ConnectionClosedException when calling performRequestAsync","body":"<p>I'm having a problem on HttpAsyncRequestExecutor.</p>\n\n<p>I'm using <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/_example_requests.html\" rel=\"noreferrer\">elasticsearch Java Rest Client</a> and I'm always getting a <code>ConnectionClosedException</code> (see below) when I call the <code>performRequestAsync</code>:</p>\n\n<pre><code>    // variables (all with valid format):\n    // endpoint is just a List&lt;String&gt; with \"14655/_search\"\n\n    // params is just a Map&lt;String, String&gt; with\n    //   \"pretty\", \"true\"\n    //   \"search_type\", \"query_then_fetch\"\n\n    // entity is just a HttpEntity entity with the Json body request\n\n    final int numRequests = endpoints.size();\n    final CountDownLatch latch = new CountDownLatch(numRequests);\n    try (Timer.Context ctx = this.requestTimer.time()) {\n        for (final String endpoint : endpoints) {\n            // ERROR hapens here:\n            restClient.performRequestAsync(\"GET\", endpoint, params, entity,\n                    new ResponseListener() {\n\n                        @Override\n                        public void onSuccess(final Response response) {\n                            if (response != null) {\n                                responses.add(response);\n                                latch.countDown();\n                            }\n                        }\n\n                        @Override\n                        public void onFailure(final Exception exception) {\n                            latch.countDown();\n\n                            logger.error(\"could not get search results for....\",exception);\n                            exception.printStackTrace();\n                        }\n                    });\n        }\n    }\n</code></pre>\n\n<p>Exception here:</p>\n\n<pre><code>org.apache.http.ConnectionClosedException: Connection closed\nat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.endOfInput(HttpAsyncRequestExecutor.java:341)\nat org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:263)\nat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:81)\nat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:39)\nat org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:116)\nat org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:164)\nat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:339)\nat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:317)\nat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:278)\nat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:106)\nat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:590)\nat java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>I don't know what is the real cause for the connection close. The exact same request works well in <a href=\"https://github.com/lmenezes/elasticsearch-kopf\" rel=\"noreferrer\">kopf</a> and returns valid search results.\nPlus, I don't call any <code>restClient.close()</code> or anything similar.</p>\n\n<p>Any ideas where the problem might be? \nIs the end of the input the cause to get a closed connection state (according to <code>org.apache.http.nio.protocol.HttpAsyncRequestExecutor.endOfInput(conn)</code>)? If yes, what input is that?</p>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I suspect the problem is related to Tomcat's <code>HttpClient</code>, because this code works correctly in an integration test (that is, returns results)... But it does not work (get the same <code>ConnectionClosedException</code>) when I make a REST request through a tomcat deployed \"interface\" </p>\n\n<p>Any lights on this?</p>\n"},{"tags":["java","button","javafx","linechart"],"owner":{"account_id":24561714,"reputation":1,"user_id":18469356,"display_name":"Văn Ch&#226;u Thanh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1647412512,"answer_count":0,"score":-2,"last_activity_date":1647326866,"creation_date":1647326866,"question_id":71478019,"body_markdown":"I am new to JavaFX and I want to create UI that basically display different LineCharts using the Button. The linechart will display data of multiple countries, the x-value is the year, but I want the user to choose the y-value to display. How can I do that?\r\nThank you in advance!!","title":"javafx: display linechart based on selection","body":"<p>I am new to JavaFX and I want to create UI that basically display different LineCharts using the Button. The linechart will display data of multiple countries, the x-value is the year, but I want the user to choose the y-value to display. How can I do that?\nThank you in advance!!</p>\n"},{"tags":["java","apache-kafka","confluent-platform","confluent-schema-registry"],"comments":[{"owner":{"account_id":23904234,"reputation":1928,"user_id":17902018,"display_name":"rikyeah"},"score":1,"creation_date":1643796692,"post_id":70952357,"comment_id":125432149,"body_markdown":"Can you show us the code generating that error?","body":"Can you show us the code generating that error?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1643814459,"post_id":70952357,"comment_id":125439739,"body_markdown":"What version of the serializer are you using? The error should say the subject name / schema ID trying to be used (I added that feature)","body":"What version of the serializer are you using? The error should say the subject name / schema ID trying to be used (I added that feature)"},{"owner":{"account_id":16448586,"reputation":114,"user_id":11882586,"display_name":"Gayal Rupasinghe"},"score":0,"creation_date":1643823956,"post_id":70952357,"comment_id":125443912,"body_markdown":"@OneCricketeer I found the issue and you can find my answer below. Thanks!","body":"@OneCricketeer I found the issue and you can find my answer below. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":16448586,"reputation":114,"user_id":11882586,"display_name":"Gayal Rupasinghe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643823886,"creation_date":1643823886,"answer_id":70960332,"question_id":70952357,"body_markdown":"I was able to troubleshoot and find out why I was getting that exception. So after de-compiling the code for the Kafka producer and a bunch of other classes that it uses (from Confluent), I saw that the producer was POST-ing to this endpoint `/subjects/myTopic-value` of the schema registry (when `producer.send(...)` called), where it could send the schema in the request as a JSON payload and check if it has a schema matching the one sent over. Important thing to realize here is, the string that basically defines the schema which is stored in the schema registry needs to match exactly with the schema string received by that endpoint. \r\n\r\nNow this is where my troubles began, I was using HttpPost with StringEntity. It turned out that my `&#39;` inside the schema string were turned in to `?` (which is difficult to see in a large AVRO schema file) and as such there was no match when querying the schema registry. The reason is the schema registry would receive a schema string with `&#39;` turned to `?` and then later would get queried on with the schema string with `&#39;`, which is a mismatch and would result in 40403 error with the exception as seen above.\r\n\r\nSo as for the fix, make sure to mention UTF-8 as the charset (UTF-8 encoding) when constructing StringEntity class. ","title":"Confluent Kafka schema not found error from producer when auto register is off","body":"<p>I was able to troubleshoot and find out why I was getting that exception. So after de-compiling the code for the Kafka producer and a bunch of other classes that it uses (from Confluent), I saw that the producer was POST-ing to this endpoint <code>/subjects/myTopic-value</code> of the schema registry (when <code>producer.send(...)</code> called), where it could send the schema in the request as a JSON payload and check if it has a schema matching the one sent over. Important thing to realize here is, the string that basically defines the schema which is stored in the schema registry needs to match exactly with the schema string received by that endpoint.</p>\n<p>Now this is where my troubles began, I was using HttpPost with StringEntity. It turned out that my <code>'</code> inside the schema string were turned in to <code>?</code> (which is difficult to see in a large AVRO schema file) and as such there was no match when querying the schema registry. The reason is the schema registry would receive a schema string with <code>'</code> turned to <code>?</code> and then later would get queried on with the schema string with <code>'</code>, which is a mismatch and would result in 40403 error with the exception as seen above.</p>\n<p>So as for the fix, make sure to mention UTF-8 as the charset (UTF-8 encoding) when constructing StringEntity class.</p>\n"}],"owner":{"account_id":16448586,"reputation":114,"user_id":11882586,"display_name":"Gayal Rupasinghe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2472,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647326729,"creation_date":1643789934,"question_id":70952357,"body_markdown":"I have a schema registry, kafka, zookeeper with a producer running locally. Problem is that when I manually register the schema and turn off auto register on the producer, I get the following exception when I try to produce records to the topic. What&#39;s confusing is that I&#39;ve verified that the schema is available after manual register using POST, so not found doesn&#39;t really make sense. Any help on this is highly appreciated. BTW enabiling auto register on the producer makes all this work, but I really need to turn it off and manually register my schemas.\r\n\r\n    Caused by: io.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException: Schema not found; error code: 40403\r\n\tat io.confluent.kafka.schemaregistry.client.rest.RestService.sendHttpRequest(RestService.java:230)\r\n\tat io.confluent.kafka.schemaregistry.client.rest.RestService.httpRequest(RestService.java:256)\r\n\tat io.confluent.kafka.schemaregistry.client.rest.RestService.lookUpSubjectVersion(RestService.java:323)\r\n\tat io.confluent.kafka.schemaregistry.client.rest.RestService.lookUpSubjectVersion(RestService.java:311)\r\n\tat io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.getIdFromRegistry(CachedSchemaRegistryClient.java:191)\r\n\tat io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.getId(CachedSchemaRegistryClient.java:323)\r\n\tat io.confluent.kafka.serializers.AbstractKafkaAvroSerializer.serializeImpl(AbstractKafkaAvroSerializer.java:73)\r\n\tat io.confluent.kafka.serializers.KafkaAvroSerializer.serialize(KafkaAvroSerializer.java:53)\r\n\tat org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:903)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:865)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:752)\r\n\r\n","title":"Confluent Kafka schema not found error from producer when auto register is off","body":"<p>I have a schema registry, kafka, zookeeper with a producer running locally. Problem is that when I manually register the schema and turn off auto register on the producer, I get the following exception when I try to produce records to the topic. What's confusing is that I've verified that the schema is available after manual register using POST, so not found doesn't really make sense. Any help on this is highly appreciated. BTW enabiling auto register on the producer makes all this work, but I really need to turn it off and manually register my schemas.</p>\n<pre><code>Caused by: io.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException: Schema not found; error code: 40403\nat io.confluent.kafka.schemaregistry.client.rest.RestService.sendHttpRequest(RestService.java:230)\nat io.confluent.kafka.schemaregistry.client.rest.RestService.httpRequest(RestService.java:256)\nat io.confluent.kafka.schemaregistry.client.rest.RestService.lookUpSubjectVersion(RestService.java:323)\nat io.confluent.kafka.schemaregistry.client.rest.RestService.lookUpSubjectVersion(RestService.java:311)\nat io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.getIdFromRegistry(CachedSchemaRegistryClient.java:191)\nat io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.getId(CachedSchemaRegistryClient.java:323)\nat io.confluent.kafka.serializers.AbstractKafkaAvroSerializer.serializeImpl(AbstractKafkaAvroSerializer.java:73)\nat io.confluent.kafka.serializers.KafkaAvroSerializer.serialize(KafkaAvroSerializer.java:53)\nat org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62)\nat org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:903)\nat org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:865)\nat org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:752)\n</code></pre>\n"},{"tags":["java","hazelcast","hazelcast-imap"],"answers":[{"tags":[],"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643203476,"creation_date":1643203476,"answer_id":70864120,"question_id":70846352,"body_markdown":"There are 2 ways how you can add indexes from the client.\r\n\r\nIf your map doesn&#39;t exist yet you can dynamically add map config with an index config:\r\n\r\n    HazelcastInstance client = ...\r\n\r\n    MapConfig mapConfig = new MapConfig(&quot;my-map&quot;)\r\n        .addIndexConfig(new IndexConfig(IndexType.HASH, &quot;name&quot;));\r\n\r\n    client.getConfig().addMapConfig(mapConfig);\r\n\r\nIf your map already exists you can use `addIndex` on the map itself:\r\n\r\n    HazelcastInstance client = ...\r\n\r\n    IMap&lt;Object, Object&gt; clientMap = client.getMap(&quot;my-map&quot;);\r\n    clientMap.addIndex(new IndexConfig(IndexType.HASH, &quot;name&quot;));","title":"How to create index map in Hazelcast running as separate server","body":"<p>There are 2 ways how you can add indexes from the client.</p>\n<p>If your map doesn't exist yet you can dynamically add map config with an index config:</p>\n<pre><code>HazelcastInstance client = ...\n\nMapConfig mapConfig = new MapConfig(&quot;my-map&quot;)\n    .addIndexConfig(new IndexConfig(IndexType.HASH, &quot;name&quot;));\n\nclient.getConfig().addMapConfig(mapConfig);\n</code></pre>\n<p>If your map already exists you can use <code>addIndex</code> on the map itself:</p>\n<pre><code>HazelcastInstance client = ...\n\nIMap&lt;Object, Object&gt; clientMap = client.getMap(&quot;my-map&quot;);\nclientMap.addIndex(new IndexConfig(IndexType.HASH, &quot;name&quot;));\n</code></pre>\n"}],"owner":{"account_id":9477970,"reputation":23,"user_id":7046777,"display_name":"Ivo Š."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":344,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70864120,"answer_count":1,"score":0,"last_activity_date":1647326702,"creation_date":1643103516,"question_id":70846352,"body_markdown":"we are using Predicate API for querying the map in Hazelcast (4.2). I&#39;ve found a doc how to add index to the map (https://docs.hazelcast.com/imdg/4.2/query/how-distributed-query-works#indexing-queries). Unfortunately, all configuration I&#39;ve found is related to case of embedded cluster with application instance being a member. But we are using client-server topology with Hazelcast running at separate server and applications connecting to it as clients. `ClientConfig` doesn&#39;t have a possibility to add index (except to near cache).\r\n\r\nI wonder, how can we add indexes to maps on the Hazelcast server? Or did I misunderstand the way how the predicate will be processed and it is enough to set indexes on near caches?","title":"How to create index map in Hazelcast running as separate server","body":"<p>we are using Predicate API for querying the map in Hazelcast (4.2). I've found a doc how to add index to the map (<a href=\"https://docs.hazelcast.com/imdg/4.2/query/how-distributed-query-works#indexing-queries\" rel=\"nofollow noreferrer\">https://docs.hazelcast.com/imdg/4.2/query/how-distributed-query-works#indexing-queries</a>). Unfortunately, all configuration I've found is related to case of embedded cluster with application instance being a member. But we are using client-server topology with Hazelcast running at separate server and applications connecting to it as clients. <code>ClientConfig</code> doesn't have a possibility to add index (except to near cache).</p>\n<p>I wonder, how can we add indexes to maps on the Hazelcast server? Or did I misunderstand the way how the predicate will be processed and it is enough to set indexes on near caches?</p>\n"},{"tags":["java","spring","caching","hazelcast"],"comments":[{"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"score":1,"creation_date":1645463693,"post_id":71209918,"comment_id":125872987,"body_markdown":"Your MessageSourceComparator has transient fields - these won&#39;t be serialized and after deserialization, they will be null and the else branch with `return key1.compareTo(key2);` will be used for sorting. What changes did you do exactly apart from changing the version?","body":"Your MessageSourceComparator has transient fields - these won&#39;t be serialized and after deserialization, they will be null and the else branch with <code>return key1.compareTo(key2);</code> will be used for sorting. What changes did you do exactly apart from changing the version?"},{"owner":{"account_id":2050027,"reputation":127,"user_id":1829230,"accept_rate":33,"display_name":"dascolagi"},"score":0,"creation_date":1645468235,"post_id":71209918,"comment_id":125874569,"body_markdown":"We removed the following dependencies:\n hazelcast-client,\n hazelcast-kubernetes.\nApart from that, we made very minor changes to MapConfigs but only to address the refactoring of the Hazelcast library.  These configurations should be logically equivalent to the old ones.","body":"We removed the following dependencies:  hazelcast-client,  hazelcast-kubernetes. Apart from that, we made very minor changes to MapConfigs but only to address the refactoring of the Hazelcast library.  These configurations should be logically equivalent to the old ones."}],"answers":[{"tags":[],"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1645469628,"creation_date":1645469628,"answer_id":71211585,"question_id":71209918,"body_markdown":"The issue is your `MessageSourceComparator`, after deserialization it sorts differently.\r\n\r\nThere was a change how TreeMap is handled between 3.x and 4.x.\r\n\r\nIn 3.x the TreeMap is serialized using plain Java serialization. Apparently, it deserializes the data in the order it was stored in the map.\r\n\r\nIn 4.x+ a special serializer for TreeMap was added, what this serializer does  on deserialization is that it creates new TreeSet with deserialized comparator and adds all elements to it. Now because your deserialized comparator is different the elements end up in the wrong order.\r\n\r\nI don&#39;t think it is reasonable to expect to keep the order when the comparator changes on ser/de. What you can do is to cache LinkedHashMap instead:\r\n\r\n        return new LinkedHashMap&lt;&gt;(sortedCountries);\r\n\r\nThis way you avoid serializing the comparator entirely. It seems you don&#39;t modify the set afterward so it shouldn&#39;t be a problem.","title":"Spring Cache Abstraction with Hazelcast doesn&#39;t preserve the order of elements","body":"<p>The issue is your <code>MessageSourceComparator</code>, after deserialization it sorts differently.</p>\n<p>There was a change how TreeMap is handled between 3.x and 4.x.</p>\n<p>In 3.x the TreeMap is serialized using plain Java serialization. Apparently, it deserializes the data in the order it was stored in the map.</p>\n<p>In 4.x+ a special serializer for TreeMap was added, what this serializer does  on deserialization is that it creates new TreeSet with deserialized comparator and adds all elements to it. Now because your deserialized comparator is different the elements end up in the wrong order.</p>\n<p>I don't think it is reasonable to expect to keep the order when the comparator changes on ser/de. What you can do is to cache LinkedHashMap instead:</p>\n<pre><code>    return new LinkedHashMap&lt;&gt;(sortedCountries);\n</code></pre>\n<p>This way you avoid serializing the comparator entirely. It seems you don't modify the set afterward so it shouldn't be a problem.</p>\n"}],"owner":{"account_id":2050027,"reputation":127,"user_id":1829230,"accept_rate":33,"display_name":"dascolagi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":673,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71211585,"answer_count":1,"score":1,"last_activity_date":1647326401,"creation_date":1645461579,"question_id":71209918,"body_markdown":"We upgraded Hazelcast from `3.12.12` to `5.0.2` and now Spring cache doesn&#39;t preserve the order of the elements in the Map we store in the cache. It used to work before the upgrade. The `java.util.TreeMap` we store in the cache is ordered using a custom `java.util.Comparator`.\r\n\r\nBelow is the code. The `getSortedCountriesFromCountryCodes()` method, when invoked, returns a Map whose elements are sorted correctly according to the custom comparator, but when the same map is retrieved from the cache, the order is lost and map items are ordered alphabetically using the corresponding keys. Spring version is `5.3.14`. Has anyone ever seen such behaviour and maybe knows how to fix it?\r\n\r\n```java\r\n@Cacheable(value = COUNTRIES_CACHE, key = &quot;#locale?:&#39;default&#39;&quot;)\r\n@Override\r\npublic Map&lt;String, String&gt; getSortedLocaleCountriesFullMap(Locale locale) {\r\n    return getSortedCountriesFromCountryCodes(locale, ALL_COUNTRY_CODES);\r\n}\r\n\r\n(...)\r\n\r\nprivate TreeMap&lt;String, String&gt; getSortedCountriesFromCountryCodes(Locale locale, List&lt;String&gt; countryCodes) {\r\n\r\n    final TreeMap&lt;String, String&gt; sortedCountries = new TreeMap&lt;&gt;(new MessageSourceComparator(messageSource, &quot;label.country.&quot;, locale));\r\n\r\n    for (String countryCode : countryCodes) {\r\n        String label;\r\n        try {\r\n            label = messageSource.getMessage(&quot;label.country.&quot; + countryCode, null, locale);\r\n        } catch (final NoSuchMessageException nsme) {\r\n            LOG.error(&quot;NoSuchMessageException: &#39;label.country.{}&#39; not found in messages file. &quot; + &quot;Setting country label to countryCode({})&quot;, countryCode,\r\n                    countryCode);\r\n            label = countryCode;\r\n        }\r\n        sortedCountries.put(countryCode, label);\r\n    }\r\n    return sortedCountries;\r\n}\r\n\r\n    /**\r\n     * Comparator to sort based on messages retrieved using the keys\r\n     */\r\n    protected static class MessageSourceComparator implements Comparator&lt;String&gt;, Serializable {\r\n        private static final long serialVersionUID = 1L;\r\n\r\n        private final transient Locale locale;\r\n        private final transient MessageSource messageSource;\r\n        private final transient String messagePrefix;\r\n        private final transient Collator collator;\r\n\r\n        public MessageSourceComparator(MessageSource messageSource, String messagePrefix, Locale locale) {\r\n            this.messageSource = messageSource;\r\n            this.messagePrefix = messagePrefix;\r\n            this.locale = locale;\r\n            if (locale != null) {\r\n                this.collator = Collator.getInstance(locale);\r\n            } else {\r\n                this.collator = Collator.getInstance();\r\n            }\r\n\r\n        }\r\n\r\n        @Override\r\n        public int compare(final String key1, final String key2) {\r\n            if (collator != null) {\r\n                String message1 = getMessage(key1);\r\n                String message2 = getMessage(key2);\r\n                return collator.compare(message1, message2);\r\n            } else {\r\n                return key1.compareTo(key2);\r\n            }\r\n        }\r\n\r\n        private String getMessage(String key) {\r\n            String message;\r\n            try {\r\n                message = messageSource.getMessage(messagePrefix + key, null, locale);\r\n            } catch (NoSuchMessageException nsme) {\r\n                message = key;\r\n            }\r\n            return message;\r\n        }\r\n    }\r\n\r\n```\r\n\r\nHere is the Cache config\r\n\r\n```java\r\n@Configuration\r\n@EnableCaching\r\n@EnableAsync\r\n@EnableScheduling\r\n@ComponentScan({ &quot;xxx.yyyyy.zzzzzz&quot; })\r\npublic class AppConfig {\r\n\r\n    /**\r\n     * The number of backup copies of cache data to use for resilience\r\n     */\r\n    private static final int DEFAULT_BACKUP_COUNT = 2;\r\n\r\n    @Bean\r\n    public LogSanitiser logSanitiser() {\r\n        BasicLogSanitiser basicLogSanitiser = new BasicLogSanitiser();\r\n        return basicLogSanitiser;\r\n    }\r\n\r\n    /*\r\n     * Use Hazelcast for managing our caches\r\n     * \r\n     * Takes an autowired list of CacheSimpleConfig objects This allows us to set up our caches in separate config files / modules\r\n     */\r\n    @Bean\r\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance, List&lt;MapConfig&gt; mapConfigs) {\r\n\r\n        for (MapConfig mapConfig : mapConfigs) {\r\n            hazelcastInstance.getConfig()\r\n                    .addMapConfig(mapConfig);\r\n        }\r\n\r\n        HazelcastCacheManager cacheManager = new HazelcastCacheManager(hazelcastInstance);\r\n        return cacheManager;\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public MapConfig countriesCacheConfig() {\r\n        return getDefaultMapConfig(DefaultLocaleService.COUNTRIES_CACHE, 25);\r\n    }\r\n\r\n\r\n    private static MapConfig getDefaultMapConfig(String mapName, int maxHeapUsed) {\r\n        MapConfig mapConfig = new MapConfig(mapName);\r\n        mapConfig.setBackupCount(DEFAULT_BACKUP_COUNT)\r\n                .setEvictionConfig(new EvictionConfig().setEvictionPolicy(EvictionPolicy.LRU)\r\n                        .setSize(maxHeapUsed)\r\n                        .setMaxSizePolicy(MaxSizePolicy.USED_HEAP_SIZE));\r\n        return mapConfig;\r\n    }\r\n\r\n (...)\r\n\r\n}\r\n```","title":"Spring Cache Abstraction with Hazelcast doesn&#39;t preserve the order of elements","body":"<p>We upgraded Hazelcast from <code>3.12.12</code> to <code>5.0.2</code> and now Spring cache doesn't preserve the order of the elements in the Map we store in the cache. It used to work before the upgrade. The <code>java.util.TreeMap</code> we store in the cache is ordered using a custom <code>java.util.Comparator</code>.</p>\n<p>Below is the code. The <code>getSortedCountriesFromCountryCodes()</code> method, when invoked, returns a Map whose elements are sorted correctly according to the custom comparator, but when the same map is retrieved from the cache, the order is lost and map items are ordered alphabetically using the corresponding keys. Spring version is <code>5.3.14</code>. Has anyone ever seen such behaviour and maybe knows how to fix it?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Cacheable(value = COUNTRIES_CACHE, key = &quot;#locale?:'default'&quot;)\n@Override\npublic Map&lt;String, String&gt; getSortedLocaleCountriesFullMap(Locale locale) {\n    return getSortedCountriesFromCountryCodes(locale, ALL_COUNTRY_CODES);\n}\n\n(...)\n\nprivate TreeMap&lt;String, String&gt; getSortedCountriesFromCountryCodes(Locale locale, List&lt;String&gt; countryCodes) {\n\n    final TreeMap&lt;String, String&gt; sortedCountries = new TreeMap&lt;&gt;(new MessageSourceComparator(messageSource, &quot;label.country.&quot;, locale));\n\n    for (String countryCode : countryCodes) {\n        String label;\n        try {\n            label = messageSource.getMessage(&quot;label.country.&quot; + countryCode, null, locale);\n        } catch (final NoSuchMessageException nsme) {\n            LOG.error(&quot;NoSuchMessageException: 'label.country.{}' not found in messages file. &quot; + &quot;Setting country label to countryCode({})&quot;, countryCode,\n                    countryCode);\n            label = countryCode;\n        }\n        sortedCountries.put(countryCode, label);\n    }\n    return sortedCountries;\n}\n\n    /**\n     * Comparator to sort based on messages retrieved using the keys\n     */\n    protected static class MessageSourceComparator implements Comparator&lt;String&gt;, Serializable {\n        private static final long serialVersionUID = 1L;\n\n        private final transient Locale locale;\n        private final transient MessageSource messageSource;\n        private final transient String messagePrefix;\n        private final transient Collator collator;\n\n        public MessageSourceComparator(MessageSource messageSource, String messagePrefix, Locale locale) {\n            this.messageSource = messageSource;\n            this.messagePrefix = messagePrefix;\n            this.locale = locale;\n            if (locale != null) {\n                this.collator = Collator.getInstance(locale);\n            } else {\n                this.collator = Collator.getInstance();\n            }\n\n        }\n\n        @Override\n        public int compare(final String key1, final String key2) {\n            if (collator != null) {\n                String message1 = getMessage(key1);\n                String message2 = getMessage(key2);\n                return collator.compare(message1, message2);\n            } else {\n                return key1.compareTo(key2);\n            }\n        }\n\n        private String getMessage(String key) {\n            String message;\n            try {\n                message = messageSource.getMessage(messagePrefix + key, null, locale);\n            } catch (NoSuchMessageException nsme) {\n                message = key;\n            }\n            return message;\n        }\n    }\n\n</code></pre>\n<p>Here is the Cache config</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableCaching\n@EnableAsync\n@EnableScheduling\n@ComponentScan({ &quot;xxx.yyyyy.zzzzzz&quot; })\npublic class AppConfig {\n\n    /**\n     * The number of backup copies of cache data to use for resilience\n     */\n    private static final int DEFAULT_BACKUP_COUNT = 2;\n\n    @Bean\n    public LogSanitiser logSanitiser() {\n        BasicLogSanitiser basicLogSanitiser = new BasicLogSanitiser();\n        return basicLogSanitiser;\n    }\n\n    /*\n     * Use Hazelcast for managing our caches\n     * \n     * Takes an autowired list of CacheSimpleConfig objects This allows us to set up our caches in separate config files / modules\n     */\n    @Bean\n    public CacheManager cacheManager(HazelcastInstance hazelcastInstance, List&lt;MapConfig&gt; mapConfigs) {\n\n        for (MapConfig mapConfig : mapConfigs) {\n            hazelcastInstance.getConfig()\n                    .addMapConfig(mapConfig);\n        }\n\n        HazelcastCacheManager cacheManager = new HazelcastCacheManager(hazelcastInstance);\n        return cacheManager;\n    }\n\n\n\n    @Bean\n    public MapConfig countriesCacheConfig() {\n        return getDefaultMapConfig(DefaultLocaleService.COUNTRIES_CACHE, 25);\n    }\n\n\n    private static MapConfig getDefaultMapConfig(String mapName, int maxHeapUsed) {\n        MapConfig mapConfig = new MapConfig(mapName);\n        mapConfig.setBackupCount(DEFAULT_BACKUP_COUNT)\n                .setEvictionConfig(new EvictionConfig().setEvictionPolicy(EvictionPolicy.LRU)\n                        .setSize(maxHeapUsed)\n                        .setMaxSizePolicy(MaxSizePolicy.USED_HEAP_SIZE));\n        return mapConfig;\n    }\n\n (...)\n\n}\n</code></pre>\n"},{"tags":["java","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523894985,"creation_date":1523894985,"answer_id":49861774,"question_id":49780878,"body_markdown":"Remove these lines from your code:\r\n\r\n    threadGroup.addTestElement(rc);\r\n    testPlanTree.add(&quot;rc&quot;, rc);\r\n    \r\n\r\nand substitute it with the following:\r\n\r\n    testPlanTree.add(testPlanTree.getArray()[0], rc);\r\n\r\nAlso be aware that if you leave this line:\r\n\r\n    rc.setErrorLogging(true);\r\n\r\nyou will have **only errors** in your .jtl results file. \r\n\r\nI also fail to see any sampler executed so double check your test plan using following reference material:\r\n\r\n - [JMeter API][1]\r\n - [Five Ways To Launch a JMeter Test without Using the JMeter GUI][2]\r\n - [jmeter-from-code][3]\r\n\r\n\r\n\r\n\r\n  [1]: https://jmeter.apache.org/api/index.html\r\n  [2]: https://www.blazemeter.com/blog/5-ways-launch-jmeter-test-without-using-jmeter-gui\r\n  [3]: https://bitbucket.org/blazemeter/jmeter-from-code","title":"JMeter save results to file","body":"<p>Remove these lines from your code:</p>\n\n<pre><code>threadGroup.addTestElement(rc);\ntestPlanTree.add(\"rc\", rc);\n</code></pre>\n\n<p>and substitute it with the following:</p>\n\n<pre><code>testPlanTree.add(testPlanTree.getArray()[0], rc);\n</code></pre>\n\n<p>Also be aware that if you leave this line:</p>\n\n<pre><code>rc.setErrorLogging(true);\n</code></pre>\n\n<p>you will have <strong>only errors</strong> in your .jtl results file. </p>\n\n<p>I also fail to see any sampler executed so double check your test plan using following reference material:</p>\n\n<ul>\n<li><a href=\"https://jmeter.apache.org/api/index.html\" rel=\"nofollow noreferrer\">JMeter API</a></li>\n<li><a href=\"https://www.blazemeter.com/blog/5-ways-launch-jmeter-test-without-using-jmeter-gui\" rel=\"nofollow noreferrer\">Five Ways To Launch a JMeter Test without Using the JMeter GUI</a></li>\n<li><a href=\"https://bitbucket.org/blazemeter/jmeter-from-code\" rel=\"nofollow noreferrer\">jmeter-from-code</a></li>\n</ul>\n"}],"owner":{"account_id":6020653,"reputation":855,"user_id":4727842,"accept_rate":84,"display_name":"Grayden Hormes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2605,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1647326197,"creation_date":1523466498,"question_id":49780878,"body_markdown":"In the JMeter GUI it is easy to add a listener such as &#39;View Results Tree&#39; or &#39;View Results in Table&#39; and add a file name \r\n\r\n[![enter image description here][1]][1]\r\n\r\nI have a method that creates and runs a test plan that looks like this\r\n\r\n    //JMeter Engine\r\n    StandardJMeterEngine jmeter = new StandardJMeterEngine();\r\n\r\n    //JMeter initialization (properties, log levels, locale, etc)\r\n    JMeterUtils.loadJMeterProperties(&quot;/path/to/apache-jmeter-4.0/bin/jmeter.properties&quot;);\r\n    JMeterUtils.setJMeterHome(&quot;/path/to/apache-jmeter-4.0&quot;);\r\n    JMeterUtils.initLogging();// you can comment this line out to see extra log messages of i.e. DEBUG level\r\n    JMeterUtils.initLocale();\r\n\r\n    // JMeter Test Plan, basic all u JOrphan HashTree\r\n    HashTree testPlanTree = new HashTree();\r\n\r\n    // HTTP Sampler\r\n    HTTPSampler httpSampler = new HTTPSampler();\r\n    httpSampler.setDomain(&quot;example.com&quot;);\r\n    httpSampler.setPort(80);\r\n    httpSampler.setPath(&quot;/&quot;);\r\n    httpSampler.setMethod(&quot;GET&quot;);\r\n\r\n    // Loop Controller\r\n    LoopController loopController = new LoopController();\r\n    loopController.setLoops(1);\r\n    loopController.addTestElement(httpSampler);\r\n    loopController.setFirst(true);\r\n    loopController.initialize();\r\n\r\n\r\n    // Thread Group\r\n    ThreadGroup threadGroup = new ThreadGroup();\r\n    threadGroup.setNumThreads(1);\r\n    threadGroup.setRampUp(1);\r\n    threadGroup.setSamplerController(loopController);\r\n\r\n    // Test Plan\r\n    TestPlan testPlan = new TestPlan(&quot;Create JMeter Script From Java Code&quot;);\r\n\r\n    // Construct Test Plan from previously initialized elements\r\n    testPlanTree.add(&quot;testPlan&quot;, testPlan);\r\n    testPlanTree.add(&quot;loopController&quot;, loopController);\r\n    testPlanTree.add(&quot;threadGroup&quot;, threadGroup);\r\n    testPlanTree.add(&quot;httpSampler&quot;, httpSampler);\r\n\r\n    // Run Test Plan\r\n    jmeter.configure(testPlanTree);\r\n    jmeter.run();\r\n\r\n1. is there a convenient premade test element to simple add to the thread group and save the results straight to a file (in the same way the &#39;View Results in Table&#39; listener does from the gui).\r\n2. what does implementing a listener that would do this task look like \r\n\r\nEDIT: I added the changes using ResultCollector and it successfully saved the file data.csv However, it only created csv column names but never created any results.\r\n\r\n    Summariser summer = null;\r\n    String summariserName = JMeterUtils.getPropDefault(&quot;summariser.name&quot;, &quot;summary&quot;);//$NON-NLS-1$\r\n    if (summariserName.length() &gt; 0) {\r\n        summer = new Summariser(summariserName);\r\n    }\r\n\r\n    ResultCollector rc = new ResultCollector(summer);\r\n    rc.setFilename(&quot;C:\\\\Users\\\\user\\\\data.csv&quot;);\r\n    rc.setErrorLogging(true);\r\n\r\n    threadGroup.addTestElement(rc);\r\n    testPlanTree.add(&quot;rc&quot;, rc);\r\n\r\nMy full output looks like this\r\n\r\n    ERROR StatusLogger No log4j2 configuration file found. Using default configuration: logging only errors to the console. Set system property &#39;log4j2.debug&#39; to show Log4j2 internal initialization logging.\r\n    Apr 16, 2018 1:40:32 PM java.util.prefs.WindowsPreferences &lt;init&gt;\r\n    WARNING: Could not open/create prefs root node Software\\JavaSoft\\Prefs at root 0x80000002. Windows RegCreateKeyEx(...) returned error code 5. summary =      0 in 00:00:00 = ******/s Avg:     0 Min: 9223372036854775807 Max: -9223372036854775808 Err:     0 (0.00%)`\r\n    summary =      0 in 00:00:00 = ******/s Avg:     0 Min: 9223372036854775807 Max: -9223372036854775808 Err:     0 (0.00%)\r\n\r\n  [1]: https://i.stack.imgur.com/l04RF.png","title":"JMeter save results to file","body":"<p>In the JMeter GUI it is easy to add a listener such as 'View Results Tree' or 'View Results in Table' and add a file name </p>\n\n<p><a href=\"https://i.stack.imgur.com/l04RF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l04RF.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have a method that creates and runs a test plan that looks like this</p>\n\n<pre><code>//JMeter Engine\nStandardJMeterEngine jmeter = new StandardJMeterEngine();\n\n//JMeter initialization (properties, log levels, locale, etc)\nJMeterUtils.loadJMeterProperties(\"/path/to/apache-jmeter-4.0/bin/jmeter.properties\");\nJMeterUtils.setJMeterHome(\"/path/to/apache-jmeter-4.0\");\nJMeterUtils.initLogging();// you can comment this line out to see extra log messages of i.e. DEBUG level\nJMeterUtils.initLocale();\n\n// JMeter Test Plan, basic all u JOrphan HashTree\nHashTree testPlanTree = new HashTree();\n\n// HTTP Sampler\nHTTPSampler httpSampler = new HTTPSampler();\nhttpSampler.setDomain(\"example.com\");\nhttpSampler.setPort(80);\nhttpSampler.setPath(\"/\");\nhttpSampler.setMethod(\"GET\");\n\n// Loop Controller\nLoopController loopController = new LoopController();\nloopController.setLoops(1);\nloopController.addTestElement(httpSampler);\nloopController.setFirst(true);\nloopController.initialize();\n\n\n// Thread Group\nThreadGroup threadGroup = new ThreadGroup();\nthreadGroup.setNumThreads(1);\nthreadGroup.setRampUp(1);\nthreadGroup.setSamplerController(loopController);\n\n// Test Plan\nTestPlan testPlan = new TestPlan(\"Create JMeter Script From Java Code\");\n\n// Construct Test Plan from previously initialized elements\ntestPlanTree.add(\"testPlan\", testPlan);\ntestPlanTree.add(\"loopController\", loopController);\ntestPlanTree.add(\"threadGroup\", threadGroup);\ntestPlanTree.add(\"httpSampler\", httpSampler);\n\n// Run Test Plan\njmeter.configure(testPlanTree);\njmeter.run();\n</code></pre>\n\n<ol>\n<li>is there a convenient premade test element to simple add to the thread group and save the results straight to a file (in the same way the 'View Results in Table' listener does from the gui).</li>\n<li>what does implementing a listener that would do this task look like </li>\n</ol>\n\n<p>EDIT: I added the changes using ResultCollector and it successfully saved the file data.csv However, it only created csv column names but never created any results.</p>\n\n<pre><code>Summariser summer = null;\nString summariserName = JMeterUtils.getPropDefault(\"summariser.name\", \"summary\");//$NON-NLS-1$\nif (summariserName.length() &gt; 0) {\n    summer = new Summariser(summariserName);\n}\n\nResultCollector rc = new ResultCollector(summer);\nrc.setFilename(\"C:\\\\Users\\\\user\\\\data.csv\");\nrc.setErrorLogging(true);\n\nthreadGroup.addTestElement(rc);\ntestPlanTree.add(\"rc\", rc);\n</code></pre>\n\n<p>My full output looks like this</p>\n\n<pre><code>ERROR StatusLogger No log4j2 configuration file found. Using default configuration: logging only errors to the console. Set system property 'log4j2.debug' to show Log4j2 internal initialization logging.\nApr 16, 2018 1:40:32 PM java.util.prefs.WindowsPreferences &lt;init&gt;\nWARNING: Could not open/create prefs root node Software\\JavaSoft\\Prefs at root 0x80000002. Windows RegCreateKeyEx(...) returned error code 5. summary =      0 in 00:00:00 = ******/s Avg:     0 Min: 9223372036854775807 Max: -9223372036854775808 Err:     0 (0.00%)`\nsummary =      0 in 00:00:00 = ******/s Avg:     0 Min: 9223372036854775807 Max: -9223372036854775808 Err:     0 (0.00%)\n</code></pre>\n"},{"tags":["java","algorithm","sorting","radix-sort"],"comments":[{"owner":{"account_id":3568716,"reputation":28786,"user_id":2979617,"display_name":"M Oehm"},"score":1,"creation_date":1647327158,"post_id":71477882,"comment_id":126336735,"body_markdown":"You want to sort by applying the stable counting sort repeatedly to your array, but you always work on the original array: Your result has the tens right, but uses the original order for the ones. I think you want `result = countSort(result,exp);`. (I&#39;m not good with Java and I assume that `int[] result = arr` creates a copy of `arr`.)","body":"You want to sort by applying the stable counting sort repeatedly to your array, but you always work on the original array: Your result has the tens right, but uses the original order for the ones. I think you want <code>result = countSort(result,exp);</code>. (I&#39;m not good with Java and I assume that <code>int[] result = arr</code> creates a copy of <code>arr</code>.)"},{"owner":{"account_id":6170834,"reputation":1988,"user_id":4809143,"display_name":"moreON"},"score":2,"creation_date":1647327401,"post_id":71477882,"comment_id":126336782,"body_markdown":"@MOehm I haven&#39;t used java in a while, but I would strongly expect that `int[] result = arr` causes `result` and `arr` to be references to the same object. (later code does actually create a new array and assign it to result though, so conclusions made based on that assumption may still be applicable)","body":"@MOehm I haven&#39;t used java in a while, but I would strongly expect that <code>int[] result = arr</code> causes <code>result</code> and <code>arr</code> to be references to the same object. (later code does actually create a new array and assign it to result though, so conclusions made based on that assumption may still be applicable)"},{"owner":{"account_id":3568716,"reputation":28786,"user_id":2979617,"display_name":"M Oehm"},"score":1,"creation_date":1647327689,"post_id":71477882,"comment_id":126336857,"body_markdown":"@moreON: Yes, that&#39;s quite likely, given that there isn&#39;t a `new` anywhere. But the array `c`, which is returned from `countSort` is created on the heap, so that might be the cause.","body":"@moreON: Yes, that&#39;s quite likely, given that there isn&#39;t a <code>new</code> anywhere. But the array <code>c</code>, which is returned from <code>countSort</code> is created on the heap, so that might be the cause."},{"owner":{"account_id":19412949,"reputation":223,"user_id":14197058,"display_name":"SONU"},"score":0,"creation_date":1647328507,"post_id":71477882,"comment_id":126337084,"body_markdown":"Well, it turns out that I was using the **countSort()** on the same array that is arr which was causing the issue. After changing the line to ```result = countSort(result, exp);``` it is working fine. Thanks, @MOehm and @moreOn for helping.","body":"Well, it turns out that I was using the <b>countSort()</b> on the same array that is arr which was causing the issue. After changing the line to <code>result = countSort(result, exp);</code> it is working fine. Thanks, @MOehm and @moreOn for helping."}],"owner":{"account_id":19412949,"reputation":223,"user_id":14197058,"display_name":"SONU"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647325953,"creation_date":1647325953,"question_id":71477882,"body_markdown":"I am trying to sort some integers using the **Radix Sort** *(which uses **Counting Sort** to sort the integers digit by digit)* using java but I am getting unexpected results. Can you please find the bug?\r\n\r\nHere is the code for **Radix.java**\r\n```\r\npublic class Radix{\r\n\t\r\n    // getMax() function to find the maximum integer inside the array\r\n\r\n\tpublic static int getMax(int[] arr){\r\n\t\tint max = -1;\r\n\t\tfor(int num : arr){\r\n\t\t\tif(num &gt; max){\r\n\t\t\t\tmax = num;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn max;\r\n\t}\r\n\t\r\n    // countSort() uses the Counting Sort algorithm to sort the integers.\r\n    // But the function sorts the integers by the digit based upon the value of variable exp\r\n    // For example if exp is 1 then it will sort integers by comparing their one&#39;s digit and \r\n    // if exp is 10 then it will compare the ten&#39;s digit.\r\n \r\n\tpublic static int[] countSort(int [] arr, int exp){\r\n\t\tint[] b = new int[10];\r\n\t\tfor(int i = 0; i &lt; arr.length; i ++){\r\n\t\t\tb[(arr[i]/exp)%10] ++;\r\n\t\t}\r\n\t\t\r\n\t\tfor(int i= 1; i &lt; 10; i ++){\r\n\t\t\tb[i] += b[i-1];\r\n\t\t}\r\n\t\t\r\n\t\tint[] c = new int[arr.length];\r\n\t\t\r\n\t\tfor(int i = arr.length-1; i&gt;= 0; i --){\r\n\t\t\tc[b[(arr[i]/exp)%10]-1] = arr[i];\r\n\t\t\tb[(arr[i]/exp)%10] --;\r\n\t\t}\r\n\r\n        return c;\r\n\t}\r\n    \r\n    // the radixSort() function is just using the countSort() to sort by variying the value of variable exp\r\n    public static int[] radixSort(int arr[]){\r\n        int k = getMax(arr);\r\n        int[] result = arr;\r\n        for(int exp = 1; k/exp &gt; 0; exp = exp * 10){\r\n            result = countSort(arr,exp);\r\n        }\r\n        return result;\r\n    }\r\n\t\r\n    public static String toStringArray(int arr[] ){\r\n        String result = &quot;&quot;;\r\n        for(int i : arr){\r\n            result = result + i + &quot; &quot;;\r\n        }\r\n        return result;\r\n    }\r\n\tpublic static void main(String args[]){\r\n\t\tint[] arr = {2,12,5,10,9};\r\n        arr = radixSort(arr);\r\n\t\tSystem.out.println(&quot;The sorted array:&quot;+toStringArray(arr));\r\n    }\r\n}\r\n```\r\n\r\n\r\nI tried to sort the array:\r\n    *{2,12,5,10,9}*\r\n\r\nThe result I got:\r\n    *{2,5,9,12,10}*\r\n","title":"What is wrong with my program implementing Radix Sort?","body":"<p>I am trying to sort some integers using the <strong>Radix Sort</strong> <em>(which uses <strong>Counting Sort</strong> to sort the integers digit by digit)</em> using java but I am getting unexpected results. Can you please find the bug?</p>\n<p>Here is the code for <strong>Radix.java</strong></p>\n<pre><code>public class Radix{\n    \n    // getMax() function to find the maximum integer inside the array\n\n    public static int getMax(int[] arr){\n        int max = -1;\n        for(int num : arr){\n            if(num &gt; max){\n                max = num;\n            }\n        }\n        return max;\n    }\n    \n    // countSort() uses the Counting Sort algorithm to sort the integers.\n    // But the function sorts the integers by the digit based upon the value of variable exp\n    // For example if exp is 1 then it will sort integers by comparing their one's digit and \n    // if exp is 10 then it will compare the ten's digit.\n \n    public static int[] countSort(int [] arr, int exp){\n        int[] b = new int[10];\n        for(int i = 0; i &lt; arr.length; i ++){\n            b[(arr[i]/exp)%10] ++;\n        }\n        \n        for(int i= 1; i &lt; 10; i ++){\n            b[i] += b[i-1];\n        }\n        \n        int[] c = new int[arr.length];\n        \n        for(int i = arr.length-1; i&gt;= 0; i --){\n            c[b[(arr[i]/exp)%10]-1] = arr[i];\n            b[(arr[i]/exp)%10] --;\n        }\n\n        return c;\n    }\n    \n    // the radixSort() function is just using the countSort() to sort by variying the value of variable exp\n    public static int[] radixSort(int arr[]){\n        int k = getMax(arr);\n        int[] result = arr;\n        for(int exp = 1; k/exp &gt; 0; exp = exp * 10){\n            result = countSort(arr,exp);\n        }\n        return result;\n    }\n    \n    public static String toStringArray(int arr[] ){\n        String result = &quot;&quot;;\n        for(int i : arr){\n            result = result + i + &quot; &quot;;\n        }\n        return result;\n    }\n    public static void main(String args[]){\n        int[] arr = {2,12,5,10,9};\n        arr = radixSort(arr);\n        System.out.println(&quot;The sorted array:&quot;+toStringArray(arr));\n    }\n}\n</code></pre>\n<p>I tried to sort the array:\n<em>{2,12,5,10,9}</em></p>\n<p>The result I got:\n<em>{2,5,9,12,10}</em></p>\n"},{"tags":["java","jsp","google-app-engine","google-cloud-platform","gcloud-cli"],"comments":[{"owner":{"account_id":21450870,"reputation":3317,"user_id":15803365,"display_name":"Priyashree Bhadra"},"score":1,"creation_date":1646305761,"post_id":71320742,"comment_id":126092693,"body_markdown":"I think there is no error while running this in Google Cloud Tools for Eclipse plugin because it downloads required dependencies for you. To run it in CLI using javac command, you need to specify CLASSPATH. It is important to be inside of /home/user directory. However, it requires more dependencies.  I think [this stack answer](https://stackoverflow.com/a/60107392/15803365) might help you.","body":"I think there is no error while running this in Google Cloud Tools for Eclipse plugin because it downloads required dependencies for you. To run it in CLI using javac command, you need to specify CLASSPATH. It is important to be inside of /home/user directory. However, it requires more dependencies.  I think <a href=\"https://stackoverflow.com/a/60107392/15803365\">this stack answer</a> might help you."},{"owner":{"account_id":19634286,"reputation":139,"user_id":14371847,"display_name":"Venkat"},"score":0,"creation_date":1646315692,"post_id":71320742,"comment_id":126096391,"body_markdown":"Thanks you @PriyashreeBhadra. Will try out or possibly will add support of build tool.","body":"Thanks you @PriyashreeBhadra. Will try out or possibly will add support of build tool."},{"owner":{"account_id":21450870,"reputation":3317,"user_id":15803365,"display_name":"Priyashree Bhadra"},"score":0,"creation_date":1646321968,"post_id":71320742,"comment_id":126099091,"body_markdown":"Please revert if you manage to solve it. If not, do share what errors you got further.","body":"Please revert if you manage to solve it. If not, do share what errors you got further."},{"owner":{"account_id":21450870,"reputation":3317,"user_id":15803365,"display_name":"Priyashree Bhadra"},"score":0,"creation_date":1646974362,"post_id":71320742,"comment_id":126260925,"body_markdown":"Did you try it out?","body":"Did you try it out?"},{"owner":{"account_id":19634286,"reputation":139,"user_id":14371847,"display_name":"Venkat"},"score":0,"creation_date":1647266034,"post_id":71320742,"comment_id":126321044,"body_markdown":"Hey Priya, It works, Thanks to you. I changed the output path location in the classpath to point a dir inside my WebContent folder so now the class files are available during the deployment and it was fine.","body":"Hey Priya, It works, Thanks to you. I changed the output path location in the classpath to point a dir inside my WebContent folder so now the class files are available during the deployment and it was fine."},{"owner":{"account_id":21450870,"reputation":3317,"user_id":15803365,"display_name":"Priyashree Bhadra"},"score":0,"creation_date":1647326039,"post_id":71320742,"comment_id":126336503,"body_markdown":"That&#39;s great. I have posted the answer below taking into account what helped you. Could you please acknowledge it by upvoting/accepting the answer?","body":"That&#39;s great. I have posted the answer below taking into account what helped you. Could you please acknowledge it by upvoting/accepting the answer?"}],"answers":[{"tags":[],"owner":{"account_id":21450870,"reputation":3317,"user_id":15803365,"display_name":"Priyashree Bhadra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647325953,"creation_date":1647325953,"answer_id":71477883,"question_id":71320742,"body_markdown":"I think there is no error while running this in Google Cloud Tools for Eclipse plugin because it downloads required dependencies for you. To run it in CLI using the javac command, you need to specify CLASSPATH. It is important to be inside of the /home/user directory. \r\n\r\nOP confirmed that he followed the above suggestion and changed the output path location in the classpath to point a dir inside his WebContent folder. So now the class files are available during the deployment and it is working fine.\r\n","title":"Error while deploying App Engine standard project from command line","body":"<p>I think there is no error while running this in Google Cloud Tools for Eclipse plugin because it downloads required dependencies for you. To run it in CLI using the javac command, you need to specify CLASSPATH. It is important to be inside of the /home/user directory.</p>\n<p>OP confirmed that he followed the above suggestion and changed the output path location in the classpath to point a dir inside his WebContent folder. So now the class files are available during the deployment and it is working fine.</p>\n"}],"owner":{"reputation":139,"user_id":14371847,"display_name":"Venkat"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71477883,"answer_count":1,"score":0,"last_activity_date":1647325953,"creation_date":1646215245,"question_id":71320742,"body_markdown":"We have a App Engine standard Java8 project, where JSP files were used for views and each of those jsp file will be using a util class, so we&#39;ve used the page directive provided by jsp to import the required util class. The code looks like below\r\n\r\n`&lt;%@page import=&quot;util.AssetUtils&quot;%&gt;`.\r\n\r\nWe don&#39;t have any error in any of those JSPs&#39; and even the deployment was fine when done with `Google Cloud Tools for Eclipse` plugin.\r\n\r\nBut when we tried deployment with command line. We are getting the below error for some of the jsp files.\r\n\r\n```Mar 02, 2022 2:59:38 PM org.apache.jasper.JspC processFile\r\nINFO: Built File: /includes/social-ad-template.jsp\r\nMar 02, 2022 2:59:38 PM org.apache.jasper.JspC execute\r\nINFO: Generation completed with [0] errors in [926] milliseconds\r\nwarning: [options] bootstrap class path not set in conjunction with -source 8\r\n/var/folders/nn/_v6wc4tn02x45jp9f_5ysrch0000gp/T/1646213377265-0/org/apache/jsp/includes/scripts_002dto_002dinject_002din_002dhead_jsp.java:15: error: package util does not exist\r\nimport util.AssetsUtil;\r\n           ^\r\n/var/folders/nn/_v6wc4tn02x45jp9f_5ysrch0000gp/T/1646213377265-0/org/apache/jsp/includes/scripts_002dto_002dinject_002din_002dbody_jsp.java:14: error: package util does not exist\r\nimport util.ModeUtil;\r\n```\r\n\r\nGcloud version\r\n```\r\nGoogle Cloud SDK 375.0.0\r\napp-engine-java 1.9.95\r\napp-engine-python 1.9.99\r\nbq 2.0.74\r\ncloud-datastore-emulator 2.1.0\r\ncore 2022.02.25\r\ngsutil 5.6\r\n```\r\n\r\nCan someone please help with this ?\r\n\r\nThanks!","title":"Error while deploying App Engine standard project from command line","body":"<p>We have a App Engine standard Java8 project, where JSP files were used for views and each of those jsp file will be using a util class, so we've used the page directive provided by jsp to import the required util class. The code looks like below</p>\n<p><code>&lt;%@page import=&quot;util.AssetUtils&quot;%&gt;</code>.</p>\n<p>We don't have any error in any of those JSPs' and even the deployment was fine when done with <code>Google Cloud Tools for Eclipse</code> plugin.</p>\n<p>But when we tried deployment with command line. We are getting the below error for some of the jsp files.</p>\n<pre><code>INFO: Built File: /includes/social-ad-template.jsp\nMar 02, 2022 2:59:38 PM org.apache.jasper.JspC execute\nINFO: Generation completed with [0] errors in [926] milliseconds\nwarning: [options] bootstrap class path not set in conjunction with -source 8\n/var/folders/nn/_v6wc4tn02x45jp9f_5ysrch0000gp/T/1646213377265-0/org/apache/jsp/includes/scripts_002dto_002dinject_002din_002dhead_jsp.java:15: error: package util does not exist\nimport util.AssetsUtil;\n           ^\n/var/folders/nn/_v6wc4tn02x45jp9f_5ysrch0000gp/T/1646213377265-0/org/apache/jsp/includes/scripts_002dto_002dinject_002din_002dbody_jsp.java:14: error: package util does not exist\nimport util.ModeUtil;\n</code></pre>\n<p>Gcloud version</p>\n<pre><code>Google Cloud SDK 375.0.0\napp-engine-java 1.9.95\napp-engine-python 1.9.99\nbq 2.0.74\ncloud-datastore-emulator 2.1.0\ncore 2022.02.25\ngsutil 5.6\n</code></pre>\n<p>Can someone please help with this ?</p>\n<p>Thanks!</p>\n"},{"tags":["java","android","gradle","permissions"],"answers":[{"tags":[],"owner":{"account_id":3097342,"reputation":3627,"user_id":2622278,"display_name":"Johan Stuyts"},"down_vote_count":0,"up_vote_count":140,"is_accepted":true,"score":140,"last_activity_date":1647325646,"creation_date":1437759054,"answer_id":31616472,"question_id":31616334,"body_markdown":"Add attribute `tools:node` with a value of `remove` to your manifest:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;manifest ... xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n        ...\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; tools:node=&quot;remove&quot; /&gt;\r\n        ...\r\n    &lt;/manifest&gt;\r\n\r\nSee https://developer.android.com/studio/build/manage-manifests#node_markers\r\n\r\nDon&#39;t forget to add the `tools` namespace to the root element of your manifest.","title":"How to remove specific permission when build Android app with gradle?","body":"<p>Add attribute <code>tools:node</code> with a value of <code>remove</code> to your manifest:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;manifest ... xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    ...\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; tools:node=&quot;remove&quot; /&gt;\n    ...\n&lt;/manifest&gt;\n</code></pre>\n<p>See <a href=\"https://developer.android.com/studio/build/manage-manifests#node_markers\" rel=\"noreferrer\">https://developer.android.com/studio/build/manage-manifests#node_markers</a></p>\n<p>Don't forget to add the <code>tools</code> namespace to the root element of your manifest.</p>\n"}],"owner":{"account_id":2242247,"reputation":1631,"user_id":1976442,"accept_rate":50,"display_name":"DzungPV"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44479,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":31616472,"answer_count":1,"score":56,"last_activity_date":1647325646,"creation_date":1437758553,"question_id":31616334,"body_markdown":"Recently Google auto merge permission from Google Service to final release apk.\r\nSome one ask here https://stackoverflow.com/questions/30658439/why-are-permissions-being-automatically-added-to-my-androidmanifest-when-includi\r\n\r\nMy problem is some permission don&#39;t need and I don&#39;t want some sensitive permission in my app. So how to remove permission like **android.permission.ACCESS_COARSE_LOCATION** ?\r\nWith gradle build, I don&#39;t want to disable Manifest Merger. I read some where that can config Merger to remove permission from external lib, but I can&#39;t find how to do it.\r\n","title":"How to remove specific permission when build Android app with gradle?","body":"<p>Recently Google auto merge permission from Google Service to final release apk.\nSome one ask here <a href=\"https://stackoverflow.com/questions/30658439/why-are-permissions-being-automatically-added-to-my-androidmanifest-when-includi\">Why are permissions being automatically added to my AndroidManifest when including Google Play Services library</a></p>\n\n<p>My problem is some permission don't need and I don't want some sensitive permission in my app. So how to remove permission like <strong>android.permission.ACCESS_COARSE_LOCATION</strong> ?\nWith gradle build, I don't want to disable Manifest Merger. I read some where that can config Merger to remove permission from external lib, but I can't find how to do it.</p>\n"},{"tags":["java","spring-webclient"],"comments":[{"owner":{"account_id":1646676,"reputation":4100,"user_id":1518100,"accept_rate":96,"display_name":"Lei Yang"},"score":1,"creation_date":1647226232,"post_id":71462461,"comment_id":126309868,"body_markdown":"it&#39;s logically correct because your 40x error is server error from client&#39;s view.","body":"it&#39;s logically correct because your 40x error is server error from client&#39;s view."}],"answers":[{"tags":[],"owner":{"account_id":16273824,"reputation":1151,"user_id":11751609,"display_name":"finisinfinitatis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647226374,"creation_date":1647226374,"answer_id":71462524,"question_id":71462461,"body_markdown":"Maybe you can create an error handler which is triggered by the exception and then attach the http error to the response.\r\n[This][1] answer  shows how this can be done.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/58614581/11751609","title":"Spring WebClient - Purposefully returning bad request","body":"<p>Maybe you can create an error handler which is triggered by the exception and then attach the http error to the response.\n<a href=\"https://stackoverflow.com/a/58614581/11751609\">This</a> answer  shows how this can be done.</p>\n"},{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647325380,"creation_date":1647325380,"answer_id":71477819,"question_id":71462461,"body_markdown":"You would need to handle error and return corresponding status\r\n\r\n```\r\npublic Mono&lt;UserObject&gt; getData(String id){\r\n\treturn webClient.post()\r\n\t\t\t.uri(&quot;/user/getData&quot;)\r\n\t\t\t.bodyValue(id)\r\n\t\t\t.retrieve()\r\n\t\t\t.bodyToMono(UserObject.class)\r\n\t\t\t.onErrorResume(e -&gt; {\r\n\t\t\t\tif (e instanceof WebClientResponseException) {\r\n\t\t\t\t\tvar responseException = (WebClientResponseException) e;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (responseException.getStatusCode().is4xxClientError()) {\r\n\t\t\t\t\t\treturn Mono.error(new ResponseStatusException(responseException.getStatusCode()));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn Mono.error(e);\r\n\t\t\t});\r\n}\r\n```","title":"Spring WebClient - Purposefully returning bad request","body":"<p>You would need to handle error and return corresponding status</p>\n<pre><code>public Mono&lt;UserObject&gt; getData(String id){\n    return webClient.post()\n            .uri(&quot;/user/getData&quot;)\n            .bodyValue(id)\n            .retrieve()\n            .bodyToMono(UserObject.class)\n            .onErrorResume(e -&gt; {\n                if (e instanceof WebClientResponseException) {\n                    var responseException = (WebClientResponseException) e;\n                    \n                    if (responseException.getStatusCode().is4xxClientError()) {\n                        return Mono.error(new ResponseStatusException(responseException.getStatusCode()));\n                    }\n                }\n                \n                return Mono.error(e);\n            });\n}\n</code></pre>\n"}],"owner":{"account_id":13810650,"reputation":169,"user_id":9968484,"display_name":"Jenga"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3032,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1647325380,"creation_date":1647225431,"question_id":71462461,"body_markdown":"So I have a WebClient:\r\n\r\n    public Mono&lt;UserObject&gt; getData(String id){\r\n        return webClient.get()\r\n    \t\t.uri(/user/getData)\r\n    \t\t.header(&quot;header&quot;, header)\r\n            .bodyValue(id)\r\n    \t    .retrieve()\r\n    \t\t.bodyToMono(UserObject.class);\r\n    }\r\n\r\n\r\n\r\nIf `/user/getData` returns a bad request, I want the WebClient to return a bad request too. Instead, WebClient throws an internal server error saying that I&#39;ve got a bad request.\r\n\r\nDesired output when executing the WebClient:\r\n\r\n    &quot;status&quot;: 400,\r\n    &quot;message&quot; : &quot;Bad Request&quot;\r\n\r\nActual output:\r\n\r\n    &quot;status&quot;: 500,\r\n    &quot;message&quot; : &quot;org.springframework.web.reactive.function.client.WebClientResponseException$BadRequest: 400 Bad Request from GET .../user/getData&quot;","title":"Spring WebClient - Purposefully returning bad request","body":"<p>So I have a WebClient:</p>\n<pre><code>public Mono&lt;UserObject&gt; getData(String id){\n    return webClient.get()\n        .uri(/user/getData)\n        .header(&quot;header&quot;, header)\n        .bodyValue(id)\n        .retrieve()\n        .bodyToMono(UserObject.class);\n}\n</code></pre>\n<p>If <code>/user/getData</code> returns a bad request, I want the WebClient to return a bad request too. Instead, WebClient throws an internal server error saying that I've got a bad request.</p>\n<p>Desired output when executing the WebClient:</p>\n<pre><code>&quot;status&quot;: 400,\n&quot;message&quot; : &quot;Bad Request&quot;\n</code></pre>\n<p>Actual output:</p>\n<pre><code>&quot;status&quot;: 500,\n&quot;message&quot; : &quot;org.springframework.web.reactive.function.client.WebClientResponseException$BadRequest: 400 Bad Request from GET .../user/getData&quot;\n</code></pre>\n"},{"tags":["java","arraylist","libgdx"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":4,"creation_date":1582730765,"post_id":60417142,"comment_id":106879611,"body_markdown":"What exactly are you struggling with? Why not just use an index based for-loop, check the `numb` property of the current element and if it matches return the current index (and of course return -1 or something similar if no such element has been found)?","body":"What exactly are you struggling with? Why not just use an index based for-loop, check the <code>numb</code> property of the current element and if it matches return the current index (and of course return -1 or something similar if no such element has been found)?"},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1582731109,"post_id":60417142,"comment_id":106879848,"body_markdown":"@Thomas I thought there would be a better way. Like you have `.contains` if the `ArrayList` is an array of primitives.","body":"@Thomas I thought there would be a better way. Like you have <code>.contains</code> if the <code>ArrayList</code> is an array of primitives."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1582731890,"post_id":60417142,"comment_id":106880367,"body_markdown":"Well, `list.contains()` tells you whether an element is _contained_ in the list (as defined by `equals()`) but it doesn&#39;t tell you where.","body":"Well, <code>list.contains()</code> tells you whether an element is <i>contained</i> in the list (as defined by <code>equals()</code>) but it doesn&#39;t tell you where."},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1582732061,"post_id":60417142,"comment_id":106880467,"body_markdown":"@Thomas Yes, so I thought there must be some way to check only the deeper elements. Wishful thinking I guess.","body":"@Thomas Yes, so I thought there must be some way to check only the deeper elements. Wishful thinking I guess."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1582732650,"post_id":60417142,"comment_id":106880857,"body_markdown":"Well something like `for(int i; i &lt; list.size(); i++) { if(list.get(i).numb == 12) return i; } return -1;` isn&#39;t that much code (or something like `int index = 0; for( Grid g : list) { if( g.numb == 12) return index; index++; } return -1;` if you want to use a foreach).","body":"Well something like <code>for(int i; i &lt; list.size(); i++) { if(list.get(i).numb == 12) return i; } return -1;</code> isn&#39;t that much code (or something like <code>int index = 0; for( Grid g : list) { if( g.numb == 12) return index; index++; } return -1;</code> if you want to use a foreach)."},{"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"score":0,"creation_date":1582732764,"post_id":60417142,"comment_id":106880940,"body_markdown":"@Thomas Yes that&#39;s what I already did after your suggestion, certainly not long code as you say and it works fine of course. What I meant is I thought there would be something built in like `.contains`.","body":"@Thomas Yes that&#39;s what I already did after your suggestion, certainly not long code as you say and it works fine of course. What I meant is I thought there would be something built in like <code>.contains</code>."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1582789412,"post_id":60417142,"comment_id":106899898,"body_markdown":"Well, if there&#39;d be something like that it would need to look like `indexOf(Predicate&lt;Grid&gt;)`, e.g. like Apache Commons Collection&#39;s [ListUtils](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html): `ListUtils.indexOf( grid, g -&gt; g.numb == 12 )`","body":"Well, if there&#39;d be something like that it would need to look like <code>indexOf(Predicate&lt;Grid&gt;)</code>, e.g. like Apache Commons Collection&#39;s <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html\" rel=\"nofollow noreferrer\">ListUtils</a>: <code>ListUtils.indexOf( grid, g -&gt; g.numb == 12 )</code>"}],"answers":[{"tags":[],"owner":{"account_id":4162532,"reputation":415,"user_id":3412288,"accept_rate":50,"display_name":"zfChaos"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582731452,"creation_date":1582731452,"answer_id":60417452,"question_id":60417142,"body_markdown":"You can achieve it with streams\r\n\r\n        ArrayList&lt;Grid&gt; grids = new ArrayList&lt;&gt;();\r\n        Grid grid = grids.stream().filter(l -&gt; l.numb == 12).findFirst().orElse(null);\r\n        int index = grids.indexOf(grid);","title":"Java How to know if arraylist contains value in property of object","body":"<p>You can achieve it with streams</p>\n\n<pre><code>    ArrayList&lt;Grid&gt; grids = new ArrayList&lt;&gt;();\n    Grid grid = grids.stream().filter(l -&gt; l.numb == 12).findFirst().orElse(null);\n    int index = grids.indexOf(grid);\n</code></pre>\n"}],"owner":{"account_id":6450014,"reputation":11895,"user_id":4997239,"accept_rate":61,"display_name":"Hasen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":510,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1582731563,"answer_count":1,"score":0,"last_activity_date":1647324724,"creation_date":1582730488,"question_id":60417142,"body_markdown":"I want to find if the property `numb` in the `ArrayList` `grids` contains a certain value or not. Then I want to get the index of the entry that contains that value.\r\n\r\n    public class Grid {\r\n      public int numb;\r\n    \r\n      public GridSeg(int numb) {\r\n        this.numb = numb;\r\n      }\r\n    }\r\n    \r\n    public ArrayList&lt;Grid&gt; grids = new ArrayList&lt;Grid&gt;();\r\n    \r\n    for (int i = 0; i &lt; 6; i++) {\r\n      Grid grid = new Grid(i);\r\n      grids.add(grid);\r\n    }\r\n    \r\n    /pseudo code since I don&#39;t know how it is done\r\n    if (grids.numb.contains(12)) {\r\n      if (grid.numb == 12) //get grid index\r\n    }","title":"Java How to know if arraylist contains value in property of object","body":"<p>I want to find if the property <code>numb</code> in the <code>ArrayList</code> <code>grids</code> contains a certain value or not. Then I want to get the index of the entry that contains that value.</p>\n<pre><code>public class Grid {\n  public int numb;\n\n  public GridSeg(int numb) {\n    this.numb = numb;\n  }\n}\n\npublic ArrayList&lt;Grid&gt; grids = new ArrayList&lt;Grid&gt;();\n\nfor (int i = 0; i &lt; 6; i++) {\n  Grid grid = new Grid(i);\n  grids.add(grid);\n}\n\n/pseudo code since I don't know how it is done\nif (grids.numb.contains(12)) {\n  if (grid.numb == 12) //get grid index\n}\n</code></pre>\n"},{"tags":["java","hbase","gremlin","janusgraph"],"answers":[{"tags":[],"owner":{"account_id":16661951,"reputation":31,"user_id":12041687,"display_name":"Neuromancer3030"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568033468,"creation_date":1568033468,"answer_id":57854432,"question_id":57847639,"body_markdown":"I&#39;m trying to figure out the same issue. I think the problem is that Janusgraph 0.4.0 is not compatible with HBase 1.x (despite what the release notes say) and am trying an older version of Janusgraph to test out that theory.\r\n\r\nSource: https://github.com/JanusGraph/janusgraph/issues/1723","title":"Janusgraph unable to connect to Hbase","body":"<p>I'm trying to figure out the same issue. I think the problem is that Janusgraph 0.4.0 is not compatible with HBase 1.x (despite what the release notes say) and am trying an older version of Janusgraph to test out that theory.</p>\n\n<p>Source: <a href=\"https://github.com/JanusGraph/janusgraph/issues/1723\" rel=\"nofollow noreferrer\">https://github.com/JanusGraph/janusgraph/issues/1723</a></p>\n"},{"tags":[],"owner":{"account_id":9421503,"reputation":11,"user_id":7007775,"display_name":"Guruprasad Sridharan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647323675,"creation_date":1647323675,"answer_id":71477619,"question_id":57847639,"body_markdown":"I was able to get Janus Graph 0.6.1 working with HBase 1.x server using the following approach. Checkout Janus Graph source code from Github, build the source code on your local machine using the following maven command\r\n\r\n    mvn clean install -pl janusgraph-hbase -am -DskipTests -Denforcer.skip=true -Drat.skip=true -Dgpg.skip=true -Dhbase.profile -Pjanusgraph-release,hbase1\r\n\r\nThen use the produced maven artefact as dependency in your project.","title":"Janusgraph unable to connect to Hbase","body":"<p>I was able to get Janus Graph 0.6.1 working with HBase 1.x server using the following approach. Checkout Janus Graph source code from Github, build the source code on your local machine using the following maven command</p>\n<pre><code>mvn clean install -pl janusgraph-hbase -am -DskipTests -Denforcer.skip=true -Drat.skip=true -Dgpg.skip=true -Dhbase.profile -Pjanusgraph-release,hbase1\n</code></pre>\n<p>Then use the produced maven artefact as dependency in your project.</p>\n"}],"owner":{"account_id":16642655,"reputation":21,"user_id":12027751,"display_name":"James Sirota"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1647323675,"creation_date":1568000736,"question_id":57847639,"body_markdown":"I downloaded Janusgraph, unzipped it, and am trying to connect to it through gremlin. I want to use HBase as a storage backend. \r\n\r\nI ran the following commands:\r\n\r\n\r\n    JanusGraph g = JanusGraphFactory.build().set(&quot;storage.backend&quot;, &quot;hbase&quot;).set(&quot;storage.hostname&quot;, [SERVERNAME]).set(&quot;storage.port&quot;, &quot;2181&quot;).set(&quot;storage.hbase.ext.zookeeper.znode.parent&quot;, &quot;/hbase-secure&quot;).set(&quot;storage.hbase.table&quot;, &quot;test&quot;).open();\r\n\r\nAnd also tried:\r\n\r\n\r\n    JanusGraph g = JanusGraphFactory.build().set(&quot;storage.backend&quot;,&quot;hbase&quot;).set(&quot;storage.hostname,[SERVERNAME]).set(&quot;storage.hbase.ext.zookeeper.znode.parent&quot;, &quot;/hbasesecure&quot;).set(&quot;storage.hbase.table&quot;, &quot;test&quot;).set(&quot;cache.db-cache-time&quot;,&quot;180000&quot;).set(&quot;cache.db-cache-size&quot;,&quot;0.5&quot;).set(&quot;cache.db-cache-cleanwait&quot;,&quot;20&quot;).set(&quot;cache.db-cache&quot;, &quot;true&quot;).open();\r\n\r\nAnd got the following exception.  Any idea what I am doing wrong?\r\n\r\n&gt;org.janusgraph.diskstorage.hbase.HBaseStoreManager  - Unexpected exception during getDeployment()\r\njava.lang.RuntimeException: org.janusgraph.diskstorage.TemporaryBackendException: Temporary failure in storage backend\r\nat org.janusgraph.diskstorage.hbase.HBaseStoreManager.getDeployment(HBaseStoreManager.java:370)\r\nat org.janusgraph.diskstorage.hbase.HBaseStoreManager.getFeatures(HBaseStoreManager.java:409)\r\nat org.janusgraph.graphdb.configuration.GraphDatabaseConfiguration.&lt;init&gt;(GraphDatabaseConfiguration.java:1383)\r\nat org.janusgraph.core.JanusGraphFactory.open(JanusGraphFactory.java:164)\r\nat org.janusgraph.core.JanusGraphFactory.open(JanusGraphFactory.java:133)\r\nat org.janusgraph.core.JanusGraphFactory.open(JanusGraphFactory.java:80)\r\nat org.janusgraph.core.JanusGraphFactory$open.call(Unknown Source)\r\nat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\r\n","title":"Janusgraph unable to connect to Hbase","body":"<p>I downloaded Janusgraph, unzipped it, and am trying to connect to it through gremlin. I want to use HBase as a storage backend. </p>\n\n<p>I ran the following commands:</p>\n\n<pre><code>JanusGraph g = JanusGraphFactory.build().set(\"storage.backend\", \"hbase\").set(\"storage.hostname\", [SERVERNAME]).set(\"storage.port\", \"2181\").set(\"storage.hbase.ext.zookeeper.znode.parent\", \"/hbase-secure\").set(\"storage.hbase.table\", \"test\").open();\n</code></pre>\n\n<p>And also tried:</p>\n\n<pre><code>JanusGraph g = JanusGraphFactory.build().set(\"storage.backend\",\"hbase\").set(\"storage.hostname,[SERVERNAME]).set(\"storage.hbase.ext.zookeeper.znode.parent\", \"/hbasesecure\").set(\"storage.hbase.table\", \"test\").set(\"cache.db-cache-time\",\"180000\").set(\"cache.db-cache-size\",\"0.5\").set(\"cache.db-cache-cleanwait\",\"20\").set(\"cache.db-cache\", \"true\").open();\n</code></pre>\n\n<p>And got the following exception.  Any idea what I am doing wrong?</p>\n\n<blockquote>\n  <p>org.janusgraph.diskstorage.hbase.HBaseStoreManager  - Unexpected exception during getDeployment()\n  java.lang.RuntimeException: org.janusgraph.diskstorage.TemporaryBackendException: Temporary failure in storage backend\n  at org.janusgraph.diskstorage.hbase.HBaseStoreManager.getDeployment(HBaseStoreManager.java:370)\n  at org.janusgraph.diskstorage.hbase.HBaseStoreManager.getFeatures(HBaseStoreManager.java:409)\n  at org.janusgraph.graphdb.configuration.GraphDatabaseConfiguration.(GraphDatabaseConfiguration.java:1383)\n  at org.janusgraph.core.JanusGraphFactory.open(JanusGraphFactory.java:164)\n  at org.janusgraph.core.JanusGraphFactory.open(JanusGraphFactory.java:133)\n  at org.janusgraph.core.JanusGraphFactory.open(JanusGraphFactory.java:80)\n  at org.janusgraph.core.JanusGraphFactory$open.call(Unknown Source)\n  at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)</p>\n</blockquote>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1647293775,"post_id":71474462,"comment_id":126331039,"body_markdown":"Personally, I&#39;d decouple the concerns.  The issue isn&#39;t with the button or the `ActionListener`, it&#39;s with how you deal with the action itself.  To my mind, you need some kind delegate/model/datasource, which can be passed to the UI class, which performs the required operations when the action is triggered","body":"Personally, I&#39;d decouple the concerns.  The issue isn&#39;t with the button or the <code>ActionListener</code>, it&#39;s with how you deal with the action itself.  To my mind, you need some kind delegate/model/datasource, which can be passed to the UI class, which performs the required operations when the action is triggered"},{"owner":{"display_name":"user17236093"},"score":0,"creation_date":1647294656,"post_id":71474462,"comment_id":126331272,"body_markdown":"I added a sysout to the action listers that change the way that the buttons are used (I have two of them one for the front and the back) when I press the button to change the event listeners to work for the front it prints out what I put but when I press the button to change the event listeners to work for the back when i changed them for the front it prints out the same thing even though I set it so it prints out different things and vise versa, that&#39;s what lead me to think it was the action listers.","body":"I added a sysout to the action listers that change the way that the buttons are used (I have two of them one for the front and the back) when I press the button to change the event listeners to work for the front it prints out what I put but when I press the button to change the event listeners to work for the back when i changed them for the front it prints out the same thing even though I set it so it prints out different things and vise versa, that&#39;s what lead me to think it was the action listers."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1647294914,"post_id":71474462,"comment_id":126331337,"body_markdown":"The problem is with how you are designing the solution, not with the button or `ActionListener` itself, you&#39;re focused on the wrong part of the problem","body":"The problem is with how you are designing the solution, not with the button or <code>ActionListener</code> itself, you&#39;re focused on the wrong part of the problem"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647323628,"creation_date":1647294661,"answer_id":71474638,"question_id":71474462,"body_markdown":"The core issue is not with the button or `ActionListener`, but with how you want to change the functionality when the `ActionListener` is triggered.\r\n\r\nThis is a core design principle which is demonstrated through the use of things like &quot;dependency injection&quot;, &quot;delegation&quot;, &quot;observers&quot;, &quot;models&quot; and/or &quot;data sources&quot;.  Many of these are the same concept, performing slightly different roles, depending on your needs\r\n\r\nSee...\r\n\r\n* [Dependency Injection in Java](https://medium.com/groupon-eng/dependency-injection-in-java-9e9438aa55ae)\r\n* [Model-View-Controller](https://www.geeksforgeeks.org/mvc-design-pattern/)\r\n* [Observer Pattern](https://www.oodesign.com/observer-pattern.html)\r\n* [Delegation vs Inheritance in Java](https://www.geeksforgeeks.org/delegation-vs-inheritance-java/#:~:text=Delegation%20is%20simply%20passing%20a,forward%20messages%20to%20the%20instance.)\r\n* [Delegation Pattern](http://best-practice-software-engineering.ifs.tuwien.ac.at/patterns/delegation.html)\r\n\r\nfor more details.\r\n\r\nFor simplicity, a &quot;delegate&quot; can often be thought of as an &quot;observer&quot;, for example, the `ActionListener` provides delegation of workflow when a button is clicked.\r\n\r\n# Delegation\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.GridLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.border.EmptyBorder;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n\r\n                    JPanel panel = new JPanel(new GridLayout(1, 2));\r\n                    panel.add(new CommonPane(new CommonDelegate() {\r\n                        @Override\r\n                        public void didClickMe(CommonPane source) {\r\n                            JOptionPane.showMessageDialog(source, &quot;Left was clicked&quot;);\r\n                        }\r\n                    }));\r\n                    panel.add(new CommonPane(new CommonDelegate() {\r\n                        @Override\r\n                        public void didClickMe(CommonPane source) {\r\n                            JOptionPane.showMessageDialog(source, &quot;Right was clicked&quot;);\r\n                        }\r\n                    }));\r\n\r\n                    frame.add(panel);\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public interface CommonDelegate {\r\n            public void didClickMe(CommonPane source);\r\n        }\r\n\r\n        public class CommonPane extends JPanel {\r\n\r\n            public CommonPane(CommonDelegate delegate) {\r\n                setLayout(new GridBagLayout());\r\n                setBorder(new EmptyBorder(32, 32, 32, 32));\r\n\r\n                JButton btn = new JButton(&quot;Click me&quot;);\r\n                btn.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        delegate.didClickMe(CommonPane.this);\r\n                    }\r\n                });\r\n                add(btn);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n# Data source\r\n\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.GridLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.border.EmptyBorder;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n\r\n                    JPanel panel = new JPanel(new GridLayout(1, 2));\r\n                    panel.add(new CommonPane(new CommonDataSource() {\r\n                        @Override\r\n                        public String getClickMeTitle() {\r\n                            return &quot;On the left&quot;;\r\n                        }\r\n\r\n                        @Override\r\n                        public String getClickMeMessage() {\r\n                            return &quot;Left was clicked&quot;;\r\n                        }\r\n                    }));\r\n                    panel.add(new CommonPane(new CommonDataSource() {\r\n                        @Override\r\n                        public String getClickMeTitle() {\r\n                            return &quot;On the right&quot;;\r\n                        }\r\n\r\n                        @Override\r\n                        public String getClickMeMessage() {\r\n                            return &quot;Right was clicked&quot;;\r\n                        }\r\n                    }));\r\n\r\n                    frame.add(panel);\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public interface CommonDataSource {\r\n            public String getClickMeTitle();\r\n            public String getClickMeMessage();\r\n        }\r\n\r\n        public class CommonPane extends JPanel {\r\n\r\n            public CommonPane(CommonDataSource dataSource) {\r\n                setLayout(new GridBagLayout());\r\n                setBorder(new EmptyBorder(32, 32, 32, 32));\r\n\r\n                JButton btn = new JButton(dataSource.getClickMeTitle());\r\n                btn.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        JOptionPane.showMessageDialog(CommonPane.this, dataSource.getClickMeMessage());\r\n                    }\r\n                });\r\n                add(btn);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n# Important\r\n\r\nYou could combine the roles of the &quot;delegate&quot; and the &quot;data source&quot; (aka &quot;model&quot;) or you could seperate them and use both, so your UI would require both a &quot;model&quot; and a &quot;delegate&quot;, depending on your needs.\r\n\r\nOne thing I would not recommend, is exposing the `JButton` to other calls, instead, if absolutely required, I&#39;d expose a `setXxxActionListener` if you want to provide a more &quot;direct&quot; delegation of an individual action, but this would raise some alarm bells for me and I&#39;d be questioning the need to design the code this way, but that&#39;s me.","title":"swing add more then one action listener to the same button","body":"<p>The core issue is not with the button or <code>ActionListener</code>, but with how you want to change the functionality when the <code>ActionListener</code> is triggered.</p>\n<p>This is a core design principle which is demonstrated through the use of things like &quot;dependency injection&quot;, &quot;delegation&quot;, &quot;observers&quot;, &quot;models&quot; and/or &quot;data sources&quot;.  Many of these are the same concept, performing slightly different roles, depending on your needs</p>\n<p>See...</p>\n<ul>\n<li><a href=\"https://medium.com/groupon-eng/dependency-injection-in-java-9e9438aa55ae\" rel=\"nofollow noreferrer\">Dependency Injection in Java</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/mvc-design-pattern/\" rel=\"nofollow noreferrer\">Model-View-Controller</a></li>\n<li><a href=\"https://www.oodesign.com/observer-pattern.html\" rel=\"nofollow noreferrer\">Observer Pattern</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/delegation-vs-inheritance-java/#:%7E:text=Delegation%20is%20simply%20passing%20a,forward%20messages%20to%20the%20instance.\" rel=\"nofollow noreferrer\">Delegation vs Inheritance in Java</a></li>\n<li><a href=\"http://best-practice-software-engineering.ifs.tuwien.ac.at/patterns/delegation.html\" rel=\"nofollow noreferrer\">Delegation Pattern</a></li>\n</ul>\n<p>for more details.</p>\n<p>For simplicity, a &quot;delegate&quot; can often be thought of as an &quot;observer&quot;, for example, the <code>ActionListener</code> provides delegation of workflow when a button is clicked.</p>\n<h1>Delegation</h1>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n\n                JPanel panel = new JPanel(new GridLayout(1, 2));\n                panel.add(new CommonPane(new CommonDelegate() {\n                    @Override\n                    public void didClickMe(CommonPane source) {\n                        JOptionPane.showMessageDialog(source, &quot;Left was clicked&quot;);\n                    }\n                }));\n                panel.add(new CommonPane(new CommonDelegate() {\n                    @Override\n                    public void didClickMe(CommonPane source) {\n                        JOptionPane.showMessageDialog(source, &quot;Right was clicked&quot;);\n                    }\n                }));\n\n                frame.add(panel);\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public interface CommonDelegate {\n        public void didClickMe(CommonPane source);\n    }\n\n    public class CommonPane extends JPanel {\n\n        public CommonPane(CommonDelegate delegate) {\n            setLayout(new GridBagLayout());\n            setBorder(new EmptyBorder(32, 32, 32, 32));\n\n            JButton btn = new JButton(&quot;Click me&quot;);\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    delegate.didClickMe(CommonPane.this);\n                }\n            });\n            add(btn);\n        }\n\n    }\n}\n</code></pre>\n<h1>Data source</h1>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n\n                JPanel panel = new JPanel(new GridLayout(1, 2));\n                panel.add(new CommonPane(new CommonDataSource() {\n                    @Override\n                    public String getClickMeTitle() {\n                        return &quot;On the left&quot;;\n                    }\n\n                    @Override\n                    public String getClickMeMessage() {\n                        return &quot;Left was clicked&quot;;\n                    }\n                }));\n                panel.add(new CommonPane(new CommonDataSource() {\n                    @Override\n                    public String getClickMeTitle() {\n                        return &quot;On the right&quot;;\n                    }\n\n                    @Override\n                    public String getClickMeMessage() {\n                        return &quot;Right was clicked&quot;;\n                    }\n                }));\n\n                frame.add(panel);\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public interface CommonDataSource {\n        public String getClickMeTitle();\n        public String getClickMeMessage();\n    }\n\n    public class CommonPane extends JPanel {\n\n        public CommonPane(CommonDataSource dataSource) {\n            setLayout(new GridBagLayout());\n            setBorder(new EmptyBorder(32, 32, 32, 32));\n\n            JButton btn = new JButton(dataSource.getClickMeTitle());\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    JOptionPane.showMessageDialog(CommonPane.this, dataSource.getClickMeMessage());\n                }\n            });\n            add(btn);\n        }\n\n    }\n}\n</code></pre>\n<h1>Important</h1>\n<p>You could combine the roles of the &quot;delegate&quot; and the &quot;data source&quot; (aka &quot;model&quot;) or you could seperate them and use both, so your UI would require both a &quot;model&quot; and a &quot;delegate&quot;, depending on your needs.</p>\n<p>One thing I would not recommend, is exposing the <code>JButton</code> to other calls, instead, if absolutely required, I'd expose a <code>setXxxActionListener</code> if you want to provide a more &quot;direct&quot; delegation of an individual action, but this would raise some alarm bells for me and I'd be questioning the need to design the code this way, but that's me.</p>\n"}],"owner":{"display_name":"user17236093"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647323628,"creation_date":1647293338,"question_id":71474462,"body_markdown":"I am working on a project where there is a front and back course for a golf app that tracks the scores and stuff, and I am using the same frames for the front and the back, the front and the back write and read to different files and need to use different methods etc. \r\n\r\nI am setting up my action listeners like this  \r\n\r\n       BUTTON_NAME.addActionListener(new ActionListener() {\r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent e) {\r\n                  // does stuff\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\nThe problem that I am having with this if you use one of the action listeners from the front course frame they wont change when I want them to \r\n\r\nHere is now I&#39;m trying to change the action listeners \r\n\r\n       BUTTON_NAME.addActionListener(new ActionListener() {\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n\r\n              BUTTON_NAME.addActionListener(new ActionListener() {\r\n              @Override\r\n              public void actionPerformed(ActionEvent e) {\r\n                 // does stuff\r\n                       }\r\n                       });\r\n\r\n                    }\r\n                });\r\n\r\nSo how would I correctly accomplish this? Thank you in advance.","title":"swing add more then one action listener to the same button","body":"<p>I am working on a project where there is a front and back course for a golf app that tracks the scores and stuff, and I am using the same frames for the front and the back, the front and the back write and read to different files and need to use different methods etc.</p>\n<p>I am setting up my action listeners like this</p>\n<pre><code>   BUTTON_NAME.addActionListener(new ActionListener() {\n        @Override\n        public void actionPerformed(ActionEvent e) {\n              // does stuff\n                    }\n                });\n</code></pre>\n<p>The problem that I am having with this if you use one of the action listeners from the front course frame they wont change when I want them to</p>\n<p>Here is now I'm trying to change the action listeners</p>\n<pre><code>   BUTTON_NAME.addActionListener(new ActionListener() {\n    @Override\n    public void actionPerformed(ActionEvent e) {\n\n          BUTTON_NAME.addActionListener(new ActionListener() {\n          @Override\n          public void actionPerformed(ActionEvent e) {\n             // does stuff\n                   }\n                   });\n\n                }\n            });\n</code></pre>\n<p>So how would I correctly accomplish this? Thank you in advance.</p>\n"},{"tags":["java","jboss7.x","jboss6.x"],"comments":[{"owner":{"account_id":2142365,"reputation":11213,"user_id":1900722,"accept_rate":70,"display_name":"anquegi"},"score":0,"creation_date":1647323205,"post_id":71477523,"comment_id":126336004,"body_markdown":"check the documented migration guide: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html/migration_guide/index","body":"check the documented migration guide: <a href=\"https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html/migration_guide/index\" rel=\"nofollow noreferrer\">access.redhat.com/documentation/en-us/&hellip;</a>"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1647358824,"post_id":71477523,"comment_id":126348621,"body_markdown":"I&#39;d highly suggest not migrating to JBoss AS 7.1 as that is a very old at this point.","body":"I&#39;d highly suggest not migrating to JBoss AS 7.1 as that is a very old at this point."}],"owner":{"account_id":22303805,"reputation":1,"user_id":16528740,"display_name":"Learner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647322996,"creation_date":1647322630,"question_id":71477523,"body_markdown":"I&#39;m using jdk 1.8 also i have tried changing jboss modules with &#39;jboss-modules-1.1.5.GA&#39; in the root folder. No errors when the server is started but the server is not up and running. Can anyone help me? Thanks in advance.\r\n\r\nFacing below\r\n\r\nJBoss AS 7.1.1.Final &quot;Brontes&quot; starting","title":"What are the changes required for migrating Jboss 6 to Jboss 7.1.1","body":"<p>I'm using jdk 1.8 also i have tried changing jboss modules with 'jboss-modules-1.1.5.GA' in the root folder. No errors when the server is started but the server is not up and running. Can anyone help me? Thanks in advance.</p>\n<p>Facing below</p>\n<p>JBoss AS 7.1.1.Final &quot;Brontes&quot; starting</p>\n"},{"tags":["java","json","gson"],"answers":[{"tags":[],"owner":{"account_id":2029500,"reputation":18383,"user_id":1813625,"accept_rate":78,"display_name":"MikO"},"down_vote_count":3,"up_vote_count":5,"is_accepted":true,"score":2,"last_activity_date":1588770688,"creation_date":1379589186,"answer_id":18893076,"question_id":18865955,"body_markdown":"**WARNING: Answer out of date.**  \r\n*Although this answer was initially accepted and upvoted, later on it&#39;s also had downvotes and comments saying it&#39;s wrong, so I guess it&#39;s out of date.*\r\n\r\n---\r\n\r\nI&#39;m pretty sure you can use the `JsonSerializationContext context` object that you have as a parameter of the `serialize` method.\r\n\r\nActually, according to [Gson API documentation][1], this object has a method serialize that:\r\n\r\n&gt; Invokes default serialization on the specified object.\r\n\r\nSo I guess you just need to do something like this in the point where you want to serialize your `HashMap` *normally*:\r\n\r\n    context.serialize(yourMap);\r\n\r\n\r\n  [1]: http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonSerializationContext.html","title":"Applying default serializer to properties in Custom Serializer (GSON)","body":"<p><strong>WARNING: Answer out of date.</strong><br>\n<em>Although this answer was initially accepted and upvoted, later on it's also had downvotes and comments saying it's wrong, so I guess it's out of date.</em></p>\n\n<hr>\n\n<p>I'm pretty sure you can use the <code>JsonSerializationContext context</code> object that you have as a parameter of the <code>serialize</code> method.</p>\n\n<p>Actually, according to <a href=\"http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonSerializationContext.html\" rel=\"nofollow noreferrer\">Gson API documentation</a>, this object has a method serialize that:</p>\n\n<blockquote>\n  <p>Invokes default serialization on the specified object.</p>\n</blockquote>\n\n<p>So I guess you just need to do something like this in the point where you want to serialize your <code>HashMap</code> <em>normally</em>:</p>\n\n<pre><code>context.serialize(yourMap);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647321898,"creation_date":1647321898,"answer_id":71477426,"question_id":18865955,"body_markdown":"What you COULD do is to instantiate another GsonBuilder and use that.\r\nYou can even append additional info, like I do in the last line of code (33% chance of being able to edit the list)\r\n\r\n\tfinal GsonBuilder gb = new GsonBuilder();\r\n    JsonObject serializedObject = (JsonObject) gb.create().getAdapter(HashMap.class).toJsonTree(yourMap);\r\n\tserializedObject.addProperty(&quot;canEdit&quot;, Math.random &lt; 0.33); // append additional info\r\n\r\nYou can then include that serializedObject into your properties, or return it.","title":"Applying default serializer to properties in Custom Serializer (GSON)","body":"<p>What you COULD do is to instantiate another GsonBuilder and use that.\nYou can even append additional info, like I do in the last line of code (33% chance of being able to edit the list)</p>\n<pre><code>final GsonBuilder gb = new GsonBuilder();\nJsonObject serializedObject = (JsonObject) gb.create().getAdapter(HashMap.class).toJsonTree(yourMap);\nserializedObject.addProperty(&quot;canEdit&quot;, Math.random &lt; 0.33); // append additional info\n</code></pre>\n<p>You can then include that serializedObject into your properties, or return it.</p>\n"}],"owner":{"account_id":2322519,"reputation":5640,"user_id":2037846,"accept_rate":43,"display_name":"MichelReap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1964,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":18893076,"answer_count":2,"score":3,"last_activity_date":1647321898,"creation_date":1379488287,"question_id":18865955,"body_markdown":"I am writing a custom serializer for my domain objects in GSON, so it only serializes certain objects: \r\n\r\n     @Override\r\n        public JsonElement serialize(BaseModel src, Type typeOfSrc, JsonSerializationContext context) {\r\n    \r\n            JsonObject obj = new JsonObject();\r\n            \r\n\r\n            Class objClass= src.getClass();\r\n    \r\n            try {\r\n                for(PropertyDescriptor propertyDescriptor : \r\n                    Introspector.getBeanInfo(objClass, Object.class).getPropertyDescriptors()){\r\n                    \r\n                                        if(BaseModel.class.isAssignableFrom(propertyDescriptor.getPropertyType()))\r\n                    {\r\n                        //src.getId()\r\n                    }\r\n                    else if(Collection.class.isAssignableFrom(propertyDescriptor.getPropertyType()))\r\n                    {\r\n                        //whatever\r\n                    }\r\n                    else {\r\n                        String value = (propertyDescriptor.getReadMethod().invoke(src)) != null?propertyDescriptor.getReadMethod().invoke(src).toString():&quot;&quot;;\r\n                        obj.addProperty(propertyDescriptor.getName(), value);\r\n                    }\r\n                }\r\n            } catch (IntrospectionException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n            }\r\n            \r\n            \r\n            return obj;\r\n        }\r\n\r\nThe thing is I also want to serialize HashMaps, but this way I get values like these:\r\n\r\n{&quot;key&quot;=com.myproject.MyClass@28df0c98}\r\n\r\nWhile I want the default serializing behavior Gson applies to HashMaps. How can I tell GSON to act &quot;normally&quot; with serializing certain objects?","title":"Applying default serializer to properties in Custom Serializer (GSON)","body":"<p>I am writing a custom serializer for my domain objects in GSON, so it only serializes certain objects: </p>\n\n<pre><code> @Override\n    public JsonElement serialize(BaseModel src, Type typeOfSrc, JsonSerializationContext context) {\n\n        JsonObject obj = new JsonObject();\n\n\n        Class objClass= src.getClass();\n\n        try {\n            for(PropertyDescriptor propertyDescriptor : \n                Introspector.getBeanInfo(objClass, Object.class).getPropertyDescriptors()){\n\n                                    if(BaseModel.class.isAssignableFrom(propertyDescriptor.getPropertyType()))\n                {\n                    //src.getId()\n                }\n                else if(Collection.class.isAssignableFrom(propertyDescriptor.getPropertyType()))\n                {\n                    //whatever\n                }\n                else {\n                    String value = (propertyDescriptor.getReadMethod().invoke(src)) != null?propertyDescriptor.getReadMethod().invoke(src).toString():\"\";\n                    obj.addProperty(propertyDescriptor.getName(), value);\n                }\n            }\n        } catch (IntrospectionException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n\n        return obj;\n    }\n</code></pre>\n\n<p>The thing is I also want to serialize HashMaps, but this way I get values like these:</p>\n\n<p>{\"key\"=com.myproject.MyClass@28df0c98}</p>\n\n<p>While I want the default serializing behavior Gson applies to HashMaps. How can I tell GSON to act \"normally\" with serializing certain objects?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1647253663,"post_id":71466201,"comment_id":126316190,"body_markdown":"that image really doesn&#39;t add anything. What do you mean: &quot;generate getters and setters&quot;? You mean by using a tool like lombok, or having your ide generate them?","body":"that image really doesn&#39;t add anything. What do you mean: &quot;generate getters and setters&quot;? You mean by using a tool like lombok, or having your ide generate them?"},{"owner":{"account_id":11244014,"reputation":40,"user_id":8247303,"display_name":"claudy399"},"score":0,"creation_date":1647253895,"post_id":71466201,"comment_id":126316273,"body_markdown":"You have the answer in this ticket : https://stackoverflow.com/questions/21074402/generate-getters-and-setters-in-netbeans","body":"You have the answer in this ticket : <a href=\"https://stackoverflow.com/questions/21074402/generate-getters-and-setters-in-netbeans\" title=\"generate getters and setters in netbeans\">stackoverflow.com/questions/21074402/&hellip;</a>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1647253939,"post_id":71466201,"comment_id":126316301,"body_markdown":"You should find the solution in the netbeans help","body":"You should find the solution in the netbeans help"},{"owner":{"account_id":24514895,"reputation":1,"user_id":18428799,"display_name":"bosso_ivan"},"score":0,"creation_date":1647254569,"post_id":71466201,"comment_id":126316550,"body_markdown":"I&#39;ve tried using  the alt + ins shortcut but nothing comes up, Even when i right click there there is no option to generate constructor, getters or setters . This works perfectly on netbeans 8.2 but not in v12, i don&#39;t know why","body":"I&#39;ve tried using  the alt + ins shortcut but nothing comes up, Even when i right click there there is no option to generate constructor, getters or setters . This works perfectly on netbeans 8.2 but not in v12, i don&#39;t know why"}],"answers":[{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647321348,"creation_date":1647321348,"answer_id":71477369,"question_id":71466201,"body_markdown":"To generate getters and setters:\r\n- Place the cursor within the class where your fields have been declared. Position it where you want the generated code to be inserted. \r\n- Right click. From the context menu that is displayed select **Insert Code...**\r\n- The **Generate** context menu is displayed:\r\n[![generateMenu][1]][1]\r\n- Select **Getter...** or **Setter...** or **Getter and Setter...** from that context menu as appropriate (though in your case you want **Getter and Setter...**), and press [enter].\r\n- The **Generate Getters and Setters** dialog is displayed:\r\n[![dialog][2]][2]\r\n- In that dialog check the check box next to the class name, or click **Select All**, to generate a getter and a setter for all fields. Otherwise check the specific fields for which you want a getter and a setter to be generated. In my case I checked only the fields `firstname` and `lastname`, and then clicked **Generate**. \r\n\r\nThis is the result:\r\n\r\n    package employee;\r\n    public class Employee {\r\n    \r\n        private long id;\r\n        private String firstname;\r\n        private String lastname;\r\n        private String emailId;\r\n    \r\n        public static void main(String[] args) {\r\n            // TODO code application logic here\r\n        }\r\n    \r\n        public String getFirstname() {\r\n            return firstname;\r\n        }\r\n    \r\n        public void setFirstname(String firstname) {\r\n            this.firstname = firstname;\r\n        }\r\n    \r\n        public String getLastname() {\r\n            return lastname;\r\n        }\r\n    \r\n        public void setLastname(String lastname) {\r\n            this.lastname = lastname;\r\n        }\r\n    \r\n    }\r\n\r\nNotes:\r\n- The process has not changed since NetBeans 8.x as far as I know.\r\n- Keyboard shortcuts can vary according to the environment, so it is more reliable to right click the mouse in order to access the **Generate** context menu instead. However, since you do not see a menu entry for **Getter and Setter...** in the **Generate** context menu, it may be that you have the cursor in an inappropriate place. For example, if I place the cursor at the very end of my **Employee.java** file I see a suitably reduced context menu without an entry for **Getter and Setter...**\r\n\r\n  [![reducedMenu][3]][3]\r\n- If you are still stuck, update your question with a screen shot showing your entire class, and the context menu that is shown after right clicking with the cursor in an appropriate place (such as immediately before the final curly brace of your `Employee` class).\r\n\r\n  [1]: https://i.stack.imgur.com/rFvSX.png\r\n  [2]: https://i.stack.imgur.com/umUqp.png\r\n  [3]: https://i.stack.imgur.com/r6A4B.png","title":"How to generate setter and getter methods Java class in Netbeans IDE 12.0","body":"<p>To generate getters and setters:</p>\n<ul>\n<li>Place the cursor within the class where your fields have been declared. Position it where you want the generated code to be inserted.</li>\n<li>Right click. From the context menu that is displayed select <strong>Insert Code...</strong></li>\n<li>The <strong>Generate</strong> context menu is displayed:\n<a href=\"https://i.stack.imgur.com/rFvSX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rFvSX.png\" alt=\"generateMenu\" /></a></li>\n<li>Select <strong>Getter...</strong> or <strong>Setter...</strong> or <strong>Getter and Setter...</strong> from that context menu as appropriate (though in your case you want <strong>Getter and Setter...</strong>), and press [enter].</li>\n<li>The <strong>Generate Getters and Setters</strong> dialog is displayed:\n<a href=\"https://i.stack.imgur.com/umUqp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/umUqp.png\" alt=\"dialog\" /></a></li>\n<li>In that dialog check the check box next to the class name, or click <strong>Select All</strong>, to generate a getter and a setter for all fields. Otherwise check the specific fields for which you want a getter and a setter to be generated. In my case I checked only the fields <code>firstname</code> and <code>lastname</code>, and then clicked <strong>Generate</strong>.</li>\n</ul>\n<p>This is the result:</p>\n<pre><code>package employee;\npublic class Employee {\n\n    private long id;\n    private String firstname;\n    private String lastname;\n    private String emailId;\n\n    public static void main(String[] args) {\n        // TODO code application logic here\n    }\n\n    public String getFirstname() {\n        return firstname;\n    }\n\n    public void setFirstname(String firstname) {\n        this.firstname = firstname;\n    }\n\n    public String getLastname() {\n        return lastname;\n    }\n\n    public void setLastname(String lastname) {\n        this.lastname = lastname;\n    }\n\n}\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><p>The process has not changed since NetBeans 8.x as far as I know.</p>\n</li>\n<li><p>Keyboard shortcuts can vary according to the environment, so it is more reliable to right click the mouse in order to access the <strong>Generate</strong> context menu instead. However, since you do not see a menu entry for <strong>Getter and Setter...</strong> in the <strong>Generate</strong> context menu, it may be that you have the cursor in an inappropriate place. For example, if I place the cursor at the very end of my <strong>Employee.java</strong> file I see a suitably reduced context menu without an entry for <strong>Getter and Setter...</strong></p>\n<p><a href=\"https://i.stack.imgur.com/r6A4B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r6A4B.png\" alt=\"reducedMenu\" /></a></p>\n</li>\n<li><p>If you are still stuck, update your question with a screen shot showing your entire class, and the context menu that is shown after right clicking with the cursor in an appropriate place (such as immediately before the final curly brace of your <code>Employee</code> class).</p>\n</li>\n</ul>\n"}],"owner":{"account_id":24514895,"reputation":1,"user_id":18428799,"display_name":"bosso_ivan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1673,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1648308906,"answer_count":1,"score":-2,"last_activity_date":1647321348,"creation_date":1647253470,"question_id":71466201,"body_markdown":"    public class Employee {\r\n    \r\n        private long id;\r\n        private String firstname;\r\n        private String lastname;\r\n        private String emailId;\r\n        \r\n        \r\n    \r\n    }\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G24hX.png","title":"How to generate setter and getter methods Java class in Netbeans IDE 12.0","body":"<pre><code>public class Employee {\n\n    private long id;\n    private String firstname;\n    private String lastname;\n    private String emailId;\n    \n    \n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/G24hX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G24hX.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1583523855,"post_id":60570588,"comment_id":107159384,"body_markdown":"Please read: [How to debug small programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/)","body":"Please read: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"},{"owner":{"account_id":5573654,"reputation":5164,"user_id":4417924,"display_name":"Jason"},"score":1,"creation_date":1583523865,"post_id":60570588,"comment_id":107159387,"body_markdown":"Why do you expect to get the output that you posted? What are you intending to have done?","body":"Why do you expect to get the output that you posted? What are you intending to have done?"},{"owner":{"account_id":16958355,"reputation":1,"user_id":12266100,"display_name":"RickyRiccardo00"},"score":0,"creation_date":1583524014,"post_id":60570588,"comment_id":107159445,"body_markdown":"im just trying to modify the array elements i mean its in the title:P","body":"im just trying to modify the array elements i mean its in the title:P"},{"owner":{"account_id":9891343,"reputation":131,"user_id":7324205,"display_name":"Meet Sinojia"},"score":0,"creation_date":1583524064,"post_id":60570588,"comment_id":107159471,"body_markdown":"What input are you providing in your terminal? It is not immediately clear where the numbers come from. Please provide these details to help others understand your problem better.","body":"What input are you providing in your terminal? It is not immediately clear where the numbers come from. Please provide these details to help others understand your problem better."},{"owner":{"account_id":16958355,"reputation":1,"user_id":12266100,"display_name":"RickyRiccardo00"},"score":0,"creation_date":1583524162,"post_id":60570588,"comment_id":107159514,"body_markdown":"the numbers being inputted are 10, 20, 30, 40, forgot to mention that","body":"the numbers being inputted are 10, 20, 30, 40, forgot to mention that"},{"owner":{"account_id":9891343,"reputation":131,"user_id":7324205,"display_name":"Meet Sinojia"},"score":0,"creation_date":1583524434,"post_id":60570588,"comment_id":107159603,"body_markdown":"Then why do you expect the output to be 30, 50, 70, 40? In your code, you are doing bonusScores[i] = bonusScores[i+1], which means &quot;set i&#39;th element equal to i+1&#39;th&quot;. In other words, you are just &#39;bringing&#39; 2nd, 3rd, 4th elements to one place left, and also leaving 4th element unchanged.","body":"Then why do you expect the output to be 30, 50, 70, 40? In your code, you are doing bonusScores[i] = bonusScores[i+1], which means &quot;set i&#39;th element equal to i+1&#39;th&quot;. In other words, you are just &#39;bringing&#39; 2nd, 3rd, 4th elements to one place left, and also leaving 4th element unchanged."}],"answers":[{"tags":[],"owner":{"account_id":6463623,"reputation":981,"user_id":5544978,"accept_rate":60,"display_name":"Don Hosek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1583524331,"creation_date":1583524331,"answer_id":60570723,"question_id":60570588,"body_markdown":"Your loop\r\n```\r\nfor (i = 0; i &lt; 3; ++i) {\r\n   bonusScores[i] = bonusScores[i+1]; \r\n}\r\n```\r\nis doing exactly what you&#39;re telling it to do: copy the second element over the first, the third over the second, etc. so [10,20,30,40] becomes [20,20,30,40].\r\n\r\nI&#39;m guessing that you meant to do `+=` instead of `=` from your description of the expected output.","title":"Modify array elements using other elements","body":"<p>Your loop</p>\n\n<pre><code>for (i = 0; i &lt; 3; ++i) {\n   bonusScores[i] = bonusScores[i+1]; \n}\n</code></pre>\n\n<p>is doing exactly what you're telling it to do: copy the second element over the first, the third over the second, etc. so [10,20,30,40] becomes [20,20,30,40].</p>\n\n<p>I'm guessing that you meant to do <code>+=</code> instead of <code>=</code> from your description of the expected output.</p>\n"},{"tags":[],"owner":{"account_id":24389918,"reputation":7,"user_id":18320042,"display_name":"Nereida"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647320630,"creation_date":1647320630,"answer_id":71477298,"question_id":60570588,"body_markdown":"It is probably too late but this is what my code looks like: \r\n```\r\nfor (i = 0; i &lt; 3; ++i) \r\n{\r\n    bonusScores[i] = bonusScores[i] + bonusScores[i+1]; \r\n}\r\n```\r\n\r\n**I added bonusScores[i] = bonusScores[i] + bonusScores[i+1]**\r\n\r\nor just add +=","title":"Modify array elements using other elements","body":"<p>It is probably too late but this is what my code looks like:</p>\n<pre><code>for (i = 0; i &lt; 3; ++i) \n{\n    bonusScores[i] = bonusScores[i] + bonusScores[i+1]; \n}\n</code></pre>\n<p><strong>I added bonusScores[i] = bonusScores[i] + bonusScores[i+1]</strong></p>\n<p>or just add +=</p>\n"}],"owner":{"account_id":16958355,"reputation":1,"user_id":12266100,"display_name":"RickyRiccardo00"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":60570723,"answer_count":2,"score":-1,"last_activity_date":1647320630,"creation_date":1583523695,"question_id":60570588,"body_markdown":"I&#39;m having trouble figuring out my output isn&#39;t doing the correct thing.  This is the piece of code I wrote for \r\n\r\n             final int SCORES_SIZE = 4;\r\n          int[] bonusScores = new int[SCORES_SIZE];\r\n          int i;\r\n    \r\n          for (i = 0; i &lt; bonusScores.length; ++i) {\r\n             bonusScores[i] = scnr.nextInt();\r\n          }\r\n    \r\n         \r\n    for (i = 0; i &lt; 3; ++i) {\r\n       bonusScores[i] = bonusScores[i+1]; \r\n    }\r\n          for (i = 0; i &lt; bonusScores.length; ++i) {\r\n             System.out.print(bonusScores[i] + &quot; &quot;);\r\n          }\r\n          System.out.println();\r\n       }\r\n    }\r\n\r\nright now im getting an output of |20 30 40 40| instead of |30 50 70 40|. I&#39;m getting the error in my second for loop but im not sure how to correct it. ","title":"Modify array elements using other elements","body":"<p>I'm having trouble figuring out my output isn't doing the correct thing.  This is the piece of code I wrote for </p>\n\n<pre><code>         final int SCORES_SIZE = 4;\n      int[] bonusScores = new int[SCORES_SIZE];\n      int i;\n\n      for (i = 0; i &lt; bonusScores.length; ++i) {\n         bonusScores[i] = scnr.nextInt();\n      }\n\n\nfor (i = 0; i &lt; 3; ++i) {\n   bonusScores[i] = bonusScores[i+1]; \n}\n      for (i = 0; i &lt; bonusScores.length; ++i) {\n         System.out.print(bonusScores[i] + \" \");\n      }\n      System.out.println();\n   }\n}\n</code></pre>\n\n<p>right now im getting an output of |20 30 40 40| instead of |30 50 70 40|. I'm getting the error in my second for loop but im not sure how to correct it. </p>\n"},{"tags":["java","ssl","youtube-data-api"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1647320468,"post_id":71476608,"comment_id":126335591,"body_markdown":"&quot;Youtube or proxy(if there is) actively close the connection?&quot; Yes. &quot;The local network is unstable?&quot; No.","body":"&quot;Youtube or proxy(if there is) actively close the connection?&quot; Yes. &quot;The local network is unstable?&quot; No."},{"owner":{"account_id":24560393,"reputation":1,"user_id":18468240,"display_name":"Wei Feng"},"score":0,"creation_date":1647324686,"post_id":71476608,"comment_id":126336262,"body_markdown":"ty,Why the connection is actively closed?","body":"ty,Why the connection is actively closed?"}],"owner":{"account_id":24560393,"reputation":1,"user_id":18468240,"display_name":"Wei Feng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647320389,"creation_date":1647314167,"question_id":71476608,"body_markdown":"**1.Analyze the phenomenon**\r\n\r\nSimilar exceptions and keyword on the upload Youtube failed: \r\n\r\nSSLHandshakeException: Remote host terminated the handshake and EOFException: SSL peer shut down incorrectly\r\n\r\nSocketTimeoutException: Read timed out\r\n\r\nCase1:\r\n\r\n        \tat sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1392)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.security.ssl.SSLTransport.decode(SSLTransport.java:109)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:167)\r\n        2022-03-04 03:27:27\t\r\n        Caused by: java.io.EOFException: SSL peer shut down incorrectly\r\n        2022-03-04 03:27:27\t\r\n        \tat java.lang.Thread.run(Thread.java:750)\r\n        2022-03-04 03:27:27\t\r\n        \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        2022-03-04 03:27:27\t\r\n        \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        2022-03-04 03:27:27\t\r\n    some code.\r\n    \r\n    com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:591)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:474)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:550)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:336)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.googleapis.media.MediaHttpUploader.resumableUpload(MediaHttpUploader.java:384)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.googleapis.media.MediaHttpUploader.executeUploadInitiation(MediaHttpUploader.java:525)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.googleapis.media.MediaHttpUploader.executeCurrentRequest(MediaHttpUploader.java:568)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.googleapis.media.MediaHttpUploader.executeCurrentRequestWithoutGZip(MediaHttpUploader.java:551)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.http.HttpRequest.execute(HttpRequest.java:996)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:79)\r\n        2022-03-04 03:27:27\t\r\n        \tat com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:108)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:264)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1317)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1342)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:197)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:435)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1300)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1400)\r\n        2022-03-04 03:27:27\t\r\n        \tat sun.security.ssl.SSLSocketImpl.handleEOF(SSLSocketImpl.java:1570)\r\n        2022-03-04 03:27:27\t\r\n        javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\r\n        2022-03-04 03:27:27\t\r\n\r\n**2.Context**\r\nAccording to the logs, the above error occurred when calling the Youtube APIs while uploading a video, but this is not frequent, and it has occurred twice in about 2 weeks in production.\r\n\r\n**3.Now doubts are as follows**\r\n\r\nCase1 : \r\n\r\nYoutube or proxy(if there is) actively close the connection?\r\n\r\nThe local network is unstable?\r\n\r\nPods SLB effect？\r\n\r\nCase2:\r\n\r\nYoutube service stopped? \r\n\r\nThe local network is unstable?\r\n\r\nProcessing takes longer than timeout？\r\n\r\nThe amount of host bandwidth at the relevant time?\r\n\r\n","title":"SSLHandshakeException: Remote host terminated the handshake","body":"<p><strong>1.Analyze the phenomenon</strong></p>\n<p>Similar exceptions and keyword on the upload Youtube failed:</p>\n<p>SSLHandshakeException: Remote host terminated the handshake and EOFException: SSL peer shut down incorrectly</p>\n<p>SocketTimeoutException: Read timed out</p>\n<p>Case1:</p>\n<pre><code>        at sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1392)\n    2022-03-04 03:27:27 \n        at sun.security.ssl.SSLTransport.decode(SSLTransport.java:109)\n    2022-03-04 03:27:27 \n        at sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:167)\n    2022-03-04 03:27:27 \n    Caused by: java.io.EOFException: SSL peer shut down incorrectly\n    2022-03-04 03:27:27 \n        at java.lang.Thread.run(Thread.java:750)\n    2022-03-04 03:27:27 \n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    2022-03-04 03:27:27 \n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    2022-03-04 03:27:27 \nsome code.\n\ncom.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:591)\n    2022-03-04 03:27:27 \n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:474)\n    2022-03-04 03:27:27 \n        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:550)\n    2022-03-04 03:27:27 \n        at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:336)\n    2022-03-04 03:27:27 \n        at com.google.api.client.googleapis.media.MediaHttpUploader.resumableUpload(MediaHttpUploader.java:384)\n    2022-03-04 03:27:27 \n        at com.google.api.client.googleapis.media.MediaHttpUploader.executeUploadInitiation(MediaHttpUploader.java:525)\n    2022-03-04 03:27:27 \n        at com.google.api.client.googleapis.media.MediaHttpUploader.executeCurrentRequest(MediaHttpUploader.java:568)\n    2022-03-04 03:27:27 \n        at com.google.api.client.googleapis.media.MediaHttpUploader.executeCurrentRequestWithoutGZip(MediaHttpUploader.java:551)\n    2022-03-04 03:27:27 \n        at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:996)\n    2022-03-04 03:27:27 \n        at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:79)\n    2022-03-04 03:27:27 \n        at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:108)\n    2022-03-04 03:27:27 \n        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:264)\n    2022-03-04 03:27:27 \n        at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1317)\n    2022-03-04 03:27:27 \n        at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1342)\n    2022-03-04 03:27:27 \n        at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:197)\n    2022-03-04 03:27:27 \n        at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)\n    2022-03-04 03:27:27 \n        at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:435)\n    2022-03-04 03:27:27 \n        at sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1300)\n    2022-03-04 03:27:27 \n        at sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1400)\n    2022-03-04 03:27:27 \n        at sun.security.ssl.SSLSocketImpl.handleEOF(SSLSocketImpl.java:1570)\n    2022-03-04 03:27:27 \n    javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\n    2022-03-04 03:27:27 \n</code></pre>\n<p><strong>2.Context</strong>\nAccording to the logs, the above error occurred when calling the Youtube APIs while uploading a video, but this is not frequent, and it has occurred twice in about 2 weeks in production.</p>\n<p><strong>3.Now doubts are as follows</strong></p>\n<p>Case1 :</p>\n<p>Youtube or proxy(if there is) actively close the connection?</p>\n<p>The local network is unstable?</p>\n<p>Pods SLB effect？</p>\n<p>Case2:</p>\n<p>Youtube service stopped?</p>\n<p>The local network is unstable?</p>\n<p>Processing takes longer than timeout？</p>\n<p>The amount of host bandwidth at the relevant time?</p>\n"},{"tags":["java","sqlite","set"],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647245545,"creation_date":1647245102,"answer_id":71464580,"question_id":71464030,"body_markdown":"If performance is *really no problem*, what about a sorted array where you apply a binary search on? This is taking memory space closest to the raw size of the data, and once sorted, the access to the entries of the array is relatively fast.\r\n\r\n```Java\r\nfinal String [] passwords = … // Array is already sorted!\r\nfinal var index = Arrays.binarySearch( passwords, password );\r\nif( index &lt; 0 )\r\n{\r\n  out.printf( &quot;Password &#39;%1$s&#39; is discouraged!%n&quot;, password );\r\n}\r\nelse\r\n{\r\n  out.printf( &quot;Password &#39;%1$s&#39; seems to be ok!%n&quot;, password );\r\n} \r\n```\r\n\r\nConfessed, updating the password list would be a nightmare, but I understood that this is not your issue here.\r\n\r\nAnd of course, this is not the answer on your question on how to optimise your SQLite database.","title":"Optimize SQLITE to store large number of words","body":"<p>If performance is <em>really no problem</em>, what about a sorted array where you apply a binary search on? This is taking memory space closest to the raw size of the data, and once sorted, the access to the entries of the array is relatively fast.</p>\n<pre><code>final String [] passwords = … // Array is already sorted!\nfinal var index = Arrays.binarySearch( passwords, password );\nif( index &lt; 0 )\n{\n  out.printf( &quot;Password '%1$s' is discouraged!%n&quot;, password );\n}\nelse\n{\n  out.printf( &quot;Password '%1$s' seems to be ok!%n&quot;, password );\n} \n</code></pre>\n<p>Confessed, updating the password list would be a nightmare, but I understood that this is not your issue here.</p>\n<p>And of course, this is not the answer on your question on how to optimise your SQLite database.</p>\n"},{"tags":[],"owner":{"account_id":7642693,"reputation":1180,"user_id":5794313,"display_name":"Sync it"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647319220,"creation_date":1647279291,"answer_id":71471933,"question_id":71464030,"body_markdown":"Dont use sqlite or any database for your purpose. Creating a table with just 2 columns for the sake of compressing an long list of data defeats the purpose of Structure in SQL and you also have to deal with the extra communication overhead.\r\n\r\n**High Level Overview**\r\n\r\nIn your case i am assuming you have an unencrypted text file of 4 million lines where each password is stored in an new line.\r\n\r\n3 simple steps for processing any large amount of sequential data\r\n\r\n**Pagify** :  Divide your file up into chunks or pages. Out of 4 million lines try to process every 100,1000 or N number of lines and write them as seperate chunks inside your file\r\n\r\n**Process** : Processing means taking the above chunks and Compress/Deflate them. \r\n\r\n The java Deflater class has an [setDictionary](https://docs.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html#setDictionary(byte[])) method where you pass the most frequently occuring byte sequence inside your target chunk which improves overall compression quality. \r\n\r\nFinding what value to pass to this parameter is a little complicated as we will see in the coming sections.\r\n\r\n**Lazy Read** : The problem with your previous approach is you treated your text file as an single unit which you loaded fully into your memory. But now since your file is in chunks we read,check,free each chunk at a time. There are 2 advantages to this approach\r\n\r\n1. After reading an chunk you can free it from memory if it does not match your criteria\r\n\r\n2. If the chunk contains the password you are looking for then you can stop processing there itself and don&#39;t have to process further chunks thus saving computation time . Chunks towards the end of the file can be skipped if what you are looking for is in the beginning of the file.\r\n\r\n\r\n**Test Case**\r\n\r\nI use this code to generate your 4 million lines of text for testing purposes\r\n\r\n    public static void main(String[] args) throws Exception\r\n     {\r\n      try(PrintWriter writer=new PrintWriter(new File(&quot;E:/Passwords.txt&quot;)))\r\n      {\r\n       //for random password generation\r\n       Random random=new Random();\r\n       int \r\n       ch, \r\n       passlength;\r\n       String password;\r\n       \r\n       //4 million lines[comes upto 40MB]\r\n       for(int i=0;i&lt;4 * 1000 * 1000;i++)\r\n       {\r\n        password=&quot;&quot;;\r\n        \r\n        //generate any password whose length is between 5 and 15 characters\r\n        passlength=random.nextInt(5,15);\r\n        for(int j=0;j&lt;passlength;j++)\r\n        {\r\n         //65-&gt;122 is the range of all alphabetic characters in US ASCII\r\n         ch=random.nextInt(65,122);\r\n         \r\n         //exclude characters like [ ( and so on \r\n         if(ch&gt;=91 &amp;&amp; ch&lt;=96){continue;}\r\n         \r\n         password+=(char)(ch);\r\n        }\r\n        \r\n        //write password to file\r\n        writer.println(password);\r\n       }\r\n      }\r\n     }\r\n\r\nSo we have our test file now lets get started\r\n\r\n**Finding the longest &amp; most frequently occuring string in your list of passwords[Optional operation]**\r\n\r\nAs mentioned the [setDictionary](https://docs.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html#setDictionary(byte[])) accepts the above required bytes for proper compression. For most of the cases you don&#39;t need to use this as the Compressor most of the time is smart enough to figure this out but if you pass it the exact pattern occurring in your list of passwords then compression speed and performance is improved. Now comes the complicated part\r\n\r\n  **Figuring out the sequence**\r\n  Lets say we have an example string\r\n\r\n      ABC/123/ABC/456/ABC/789\r\n\r\n The most frequently occuring string is /ABC/ including the slashes how we find this string is as follows\r\n\r\n\r\n&gt; 1.  Find the length of the longest password in your list which will also be longest word to check for it&#39;s occurence in the list[length call it N]\r\n&gt; \r\n&gt; 3. Create an for loop n which goes from 2-&gt;N where n is the length of the substring from i-&gt;i+n which we should create and then check for its\r\n&gt; occurence in the password list\r\n\r\nRemember the longer the string we find the better for compression for example lets say we have 2 passwords\r\n\r\n    ABC\r\n    ABCD\r\n\r\n    Longest Password=length 3[2nd line]\r\n\r\n    for i=0-&gt;length of full text\r\n       for n=2-&gt;N\r\n        Generate  substring from i-&gt;i+n\r\n         check for occurences\r\n\r\nFor each of these strings generated we find the number of occurences in the password list and we store the one with the highest occurence.\r\n\r\nBut if we encounter an substring with an longer length than the previous one we override the previous longest word irrespective of its occurences as it is always favoured more in compression\r\n\r\nThe Dictionary class does this\r\n\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    final class Dictionary\r\n    {\r\n     private static final class Info\r\n     {\r\n      private final int longestLine;\r\n      \r\n      private int highestOccurence;\r\n      private String longestWord=&quot;&quot;;\r\n      \r\n      public Info(int longestLine) {this.longestLine = longestLine;}\r\n     } \r\n     \r\n     private static Info getInfo(List&lt;String&gt; lines)\r\n     {\r\n      int \r\n      currentLine, \r\n      longestLine=0;\r\n      \r\n      for(String line:lines)\r\n      {\r\n       //find longest line in the password list\r\n       if((currentLine=line.length())&gt;longestLine)\r\n       {\r\n        longestLine=currentLine;\r\n       }\r\n      }\r\n      \r\n      return new Info(longestLine);\r\n     }\r\n     \r\n     static String getLongestOccurence(List&lt;String&gt; lines,int minLength,int maxLength)\r\n     {\r\n      //user dosent want dictionary hence return empty string\r\n      if(minLength&lt;0){return &quot;&quot;;}\r\n      \r\n      Info info=getInfo(lines);\r\n     \r\n      minLength=Math.max(2,minLength);\r\n      maxLength=maxLength&lt;=0?info.longestLine:Math.min(maxLength,info.longestLine);\r\n      \r\n      String fullText=lines.stream().collect(Collectors.joining(&quot;\\n&quot;));\r\n      int \r\n      startIndex=0, \r\n      count;\r\n      \r\n      int length=fullText.length();\r\n      outer : for(int i=0;i&lt;length;i++)\r\n      {\r\n       for(int n=minLength;n&lt;maxLength;n++)\r\n       {\r\n        //if substring is longer than text length break\r\n        if((i+n+1)&gt;length){break outer;}\r\n        //if combination length is lesser than previous longestWord length then continue as we dont care about shorter words\r\n        if(n&lt;info.longestWord.length()){continue;}   \r\n        //get combination\r\n        String combination=fullText.substring(i,i+n+1);  \r\n        \r\n        //count occurences\r\n        count=0;\r\n        do\r\n        {\r\n         startIndex=fullText.indexOf(combination,startIndex);\r\n         if(startIndex!=-1)\r\n         {\r\n          startIndex+=combination.length();\r\n          \r\n          count++;\r\n         }\r\n        } \r\n        while(startIndex!=-1);\r\n        \r\n        //we only care about more than one occurences\r\n        if(count&gt;1)\r\n        {   \r\n         if(length&gt;info.longestWord.length()) //if new combination is longer than previous one give it more precedence\r\n         {\r\n          info.longestWord=combination;\r\n          info.highestOccurence=count;\r\n         }\r\n         else if(count&gt;info.highestOccurence)  //else if both are equal length then check counts\r\n         {\r\n          info.longestWord=combination;       \r\n          info.highestOccurence=count;      \r\n         }\r\n        }\r\n       }\r\n      }\r\n      \r\n      return info.longestWord;\r\n     }\r\n    }\r\n\r\n  \r\n   \r\n     \r\nHere we are looking for an frequently occuring word which is minimum length 2 and maximum length 4 \r\n\r\n     public static void main(String[] args)\r\n     {\r\n      System.out.println\r\n      (\r\n       &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\r\n       (\r\n        List.of\r\n        (\r\n          &quot;Pass A&quot;\r\n         ,&quot;Pass B&quot;\r\n         ,&quot;Pass C&quot;\r\n         ,&quot;Pass D&quot;\r\n        )\r\n        ,2,4\r\n       )\r\n      );\r\n     }\r\n\r\nWe get\r\n\r\n    Dictionary=Pass\r\n\r\nDifference in compression?\r\n\r\nWith all that complex logic what compression do we get? lets see\r\n\r\n    public static void main(String[] args)throws Exception\r\n     {\r\n      String text=&quot;Pass A\\nPass B\\n Pass C\\nPass D&quot;;\r\n      \r\n      Deflater def=new Deflater(9);\r\n      def.setDictionary(Dictionary.getLongestOccurence(List.of(text),2,6).getBytes());\r\n      \r\n      byte[] original=text.getBytes();\r\n      try(ByteArrayOutputStream baos=new ByteArrayOutputStream())\r\n      {\r\n       try(DeflaterOutputStream dos=new DeflaterOutputStream(baos,def))\r\n       {\r\n        dos.write(original);\r\n        dos.flush();\r\n       }\r\n       System.out.println(original.length+&quot;/&quot;+baos.toByteArray().length);\r\n      }    \r\n     }\r\n    \r\nOutput\r\n\r\n    28/24\r\n\r\nSo using dictionary the ratio of the uncompressed to the compressed data is 28/24\r\n\r\nIf you comment out the line  \r\n`//def.setDictionary(Dictionary.getLongestOccurence(List.of(text),2,6).getBytes());`\r\n\r\nWe get\r\n\r\n        28/26\r\n\r\nNot so great but we saved 2 whole bytes of data by using the dictionary. Off course this is an small test case but if you have sorted your passwords such that very similar passwords are close to each other then savings become much greater.\r\n\r\n\r\n**Pagifying your data[Main Core]**\r\n\r\nThis is the most important part of the operation where all your savings come into play.\r\n\r\nIt&#39;s pretty simple as the code will explain it all\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileReader;\r\n    import java.util.ArrayList;\r\n    import java.util.stream.Collectors;\r\n    import java.util.zip.Deflater;\r\n    import java.util.zip.DeflaterOutputStream;\r\n\r\n\r\n    final class Compressor\r\n    {\r\n     public static void compress(File textFile,int linesPerChunk,int minWord,int maxWord,File output)throws Exception\r\n     {\r\n      try(BufferedReader reader=new BufferedReader(new FileReader(textFile));\r\n          FileOutputStream fos=new FileOutputStream(output))\r\n      {\r\n       ArrayList&lt;String&gt; lines=new ArrayList();\r\n       Deflater compresser=new Deflater(9);\r\n       ByteArrayOutputStream baos=new ByteArrayOutputStream();\r\n       DataOutputStream dos=new DataOutputStream(fos);\r\n       int linesDone=0;\r\n       \r\n       String line;   \r\n       while(true)\r\n       {\r\n        line=reader.readLine();\r\n        \r\n        //add only if more input is available\r\n        if(line!=null){lines.add(line);}\r\n    \r\n        //parse if we have linePerChunk number of lines or if this was the last input\r\n        if(line==null || lines.size()&gt;=linesPerChunk)\r\n        {\r\n         //occurs if this was the last input and there are no more left over lines to parse\r\n         if(lines.isEmpty()){break;}\r\n         \r\n         byte[] dictionary=Dictionary.getLongestOccurence(lines,minWord,maxWord).getBytes();\r\n         \r\n         //Compress chunk\r\n         baos.reset();      \r\n         compresser.reset();\r\n         if(dictionary.length!=0){compresser.setDictionary(dictionary);}    \r\n         try(DeflaterOutputStream deos=new DeflaterOutputStream(baos,compresser))\r\n         {\r\n          deos.write(lines.stream().collect(Collectors.joining(&quot;\\n&quot;)).getBytes());\r\n          deos.flush();\r\n         }\r\n         byte[] compressed=baos.toByteArray();\r\n         \r\n         //write chunk\r\n         dos.writeInt(dictionary.length);\r\n         dos.write(dictionary);\r\n         dos.writeInt(compressed.length);\r\n         dos.write(compressed);\r\n         dos.flush();\r\n         \r\n         System.out.println(&quot;Compressed Lines=&quot;+(linesDone+=lines.size()));\r\n         \r\n         //clear to read next chunk\r\n         lines.clear();\r\n        }\r\n        \r\n       \r\n        if(line==null){break;}\r\n       }\r\n       \r\n       //used while reading to check for end point\r\n       dos.writeInt(-1);\r\n      }\r\n     }\r\n    }\r\n\r\nBasically we divide your file into pages of N lines and compress each page and write it as a chunk into an new file. This method also accepts the min and max word length to use in your dictionary . You can pass -1 for either value if you wish to skip using dictionary. Performance benefits of dictionary largely depends on your password data and is your preference\r\n\r\n**Lazy Reading[Final]**\r\n\r\nFinally we read each chunk and if the chunk contains the password we are looking for we return the method there only and don&#39;t proceed further\r\n\r\n    public class Validater \r\n    {\r\n     public static boolean isAllowed(String password,File compressed)throws Exception\r\n     {\r\n      Inflater inf=new Inflater();\r\n      ByteArrayOutputStream baos=new ByteArrayOutputStream();\r\n      \r\n      try(DataInputStream dis=new DataInputStream(new FileInputStream(compressed));)\r\n      {\r\n       int size;\r\n       while((size=dis.readInt())!=-1)\r\n       {\r\n         byte[] dictionary=new byte[size];\r\n         dis.read(dictionary);\r\n         byte[] data=new byte[dis.readInt()];\r\n         dis.read(data);\r\n    \r\n         inf.reset();\r\n         try(InflaterInputStream iis=new InflaterInputStream(new ByteArrayInputStream(data),inf))\r\n         {\r\n          baos.reset();\r\n          \r\n          int length;\r\n          byte[] output=new byte[1000];   \r\n          while(true)\r\n          {\r\n           length=iis.read(output);\r\n           if(inf.needsDictionary()){inf.setDictionary(dictionary);}\r\n           else\r\n           {\r\n            if(length==-1){break;}\r\n            baos.write(output,0,length);\r\n           }\r\n          }\r\n         }\r\n         \r\n         //the actual validation\r\n         if(new String(baos.toByteArray()).contains(password)){return false;}  \r\n       }\r\n      }\r\n      return true;\r\n     }\r\n    }\r\n\r\n**Performance**\r\n\r\n     public static void main(String[] args)throws Exception\r\n     {\r\n      //beginning of the file\r\n      long start=System.currentTimeMillis();\r\n      System.out.println(Validater.isAllowed(&quot;ELIdjajPKsmeZ&quot;,new File(&quot;E:/Compressed.bin&quot;)));\r\n      System.out.println(System.currentTimeMillis()-start);\r\n      \r\n      //middle of the file\r\n      start=System.currentTimeMillis();\r\n      System.out.println(Validater.isAllowed(&quot;kSIvmu&quot;,new File(&quot;E:/Compressed.bin&quot;)));\r\n      System.out.println(System.currentTimeMillis()-start);\r\n      \r\n      //end of the file\r\n      start=System.currentTimeMillis();\r\n      System.out.println(Validater.isAllowed(&quot;CcFylRChZDyd&quot;,new File(&quot;E:/Compressed.bin&quot;)));\r\n      System.out.println(System.currentTimeMillis()-start);\r\n     }\r\n\r\nThe above test case is some random passwords i copied from each part of the notepad passwords file\r\n\r\nBefore executing you must compress your file using\r\n\r\n    public static void main4(String[] args)throws Exception\r\n     {\r\n      //i used -1 to skip dictionary but you can specify whatever value and i create each chunk of length 100 lines\r\n      Compressor.compress(new File(&quot;E:/Passwords.txt&quot;),100,-1,4,new File(&quot;E:/Compressed.bin&quot;));\r\n     }\r\n\r\nHere are the results\r\n\r\n    false\r\n    5\r\n    false\r\n    713\r\n    false\r\n    1554 \r\n\r\nAs you can see the worst case took just 1554 milliseconds to execute over 4 million lines of passwords and the memory usage didn&#39;t even exceed 1 MB in my potato system\r\n\r\n**The Full Code**\r\n\r\nDictionary.java\r\n\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    final class Dictionary\r\n    {\r\n     private static final class Info\r\n     {\r\n      private final int longestLine;\r\n      \r\n      private int highestOccurence;\r\n      private String longestWord=&quot;&quot;;\r\n      \r\n      public Info(int longestLine) {this.longestLine = longestLine;}\r\n     } \r\n     \r\n     private static Info getInfo(List&lt;String&gt; lines)\r\n     {\r\n      int \r\n      currentLine, \r\n      longestLine=0;\r\n      \r\n      for(String line:lines)\r\n      {\r\n       //find longest line in the password list\r\n       if((currentLine=line.length())&gt;longestLine)\r\n       {\r\n        longestLine=currentLine;\r\n       }\r\n      }\r\n      \r\n      return new Info(longestLine);\r\n     }\r\n     \r\n     static String getLongestOccurence(List&lt;String&gt; lines,int minLength,int maxLength)\r\n     {\r\n      //user dosent want dictionary hence return empty string\r\n      if(minLength&lt;0){return &quot;&quot;;}\r\n      \r\n      Info info=getInfo(lines);\r\n     \r\n      minLength=Math.max(2,minLength);\r\n      maxLength=maxLength&lt;=0?info.longestLine:Math.min(maxLength,info.longestLine);\r\n      \r\n      String fullText=lines.stream().collect(Collectors.joining(&quot;\\n&quot;));\r\n      int \r\n      startIndex=0, \r\n      count;\r\n      \r\n      int length=fullText.length();\r\n      outer : for(int i=0;i&lt;length;i++)\r\n      {\r\n       for(int n=minLength;n&lt;maxLength;n++)\r\n       {\r\n        //if substring is longer than text length break\r\n        if((i+n+1)&gt;length){break outer;}\r\n        //if combination length is lesser than previous longestWord length then continue as we dont care about shorter words\r\n        if(n&lt;info.longestWord.length()){continue;}   \r\n        //get combination\r\n        String combination=fullText.substring(i,i+n+1);  \r\n        \r\n        //count occurences\r\n        count=0;\r\n        do\r\n        {\r\n         startIndex=fullText.indexOf(combination,startIndex);\r\n         if(startIndex!=-1)\r\n         {\r\n          startIndex+=combination.length();\r\n          \r\n          count++;\r\n         }\r\n        } \r\n        while(startIndex!=-1);\r\n        \r\n        //we only care about more than one occurences\r\n        if(count&gt;1)\r\n        {   \r\n         if(length&gt;info.longestWord.length()) //if new combination is longer than previous one give it more precedence\r\n         {\r\n          info.longestWord=combination;\r\n          info.highestOccurence=count;\r\n         }\r\n         else if(count&gt;info.highestOccurence)  //else if both are equal length then check counts\r\n         {\r\n          info.longestWord=combination;       \r\n          info.highestOccurence=count;      \r\n         }\r\n        }\r\n       }\r\n      }\r\n      \r\n      return info.longestWord;\r\n     }\r\n    }\r\n     \r\n\r\nCompressor.java\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileReader;\r\n    import java.util.ArrayList;\r\n    import java.util.stream.Collectors;\r\n    import java.util.zip.Deflater;\r\n    import java.util.zip.DeflaterOutputStream;\r\n    \r\n    \r\n    final class Compressor\r\n    {\r\n     public static void compress(File textFile,int linesPerChunk,int minWord,int maxWord,File output)throws Exception\r\n     {\r\n      try(BufferedReader reader=new BufferedReader(new FileReader(textFile));\r\n          FileOutputStream fos=new FileOutputStream(output))\r\n      {\r\n       ArrayList&lt;String&gt; lines=new ArrayList();\r\n       Deflater compresser=new Deflater(9);\r\n       ByteArrayOutputStream baos=new ByteArrayOutputStream();\r\n       DataOutputStream dos=new DataOutputStream(fos);\r\n       int linesDone=0;\r\n       \r\n       String line;   \r\n       while(true)\r\n       {\r\n        line=reader.readLine();\r\n        \r\n        //add only if more input is available\r\n        if(line!=null){lines.add(line);}\r\n    \r\n        //parse if we have linePerChunk number of lines or if this was the last input\r\n        if(line==null || lines.size()&gt;=linesPerChunk)\r\n        {\r\n         //occurs if this was the last input and there are no more left over lines to parse\r\n         if(lines.isEmpty()){break;}\r\n         \r\n         byte[] dictionary=Dictionary.getLongestOccurence(lines,minWord,maxWord).getBytes();\r\n         \r\n         //Compress chunk\r\n         baos.reset();      \r\n         compresser.reset();\r\n         if(dictionary.length!=0){compresser.setDictionary(dictionary);}    \r\n         try(DeflaterOutputStream deos=new DeflaterOutputStream(baos,compresser))\r\n         {\r\n          deos.write(lines.stream().collect(Collectors.joining(&quot;\\n&quot;)).getBytes());\r\n          deos.flush();\r\n         }\r\n         byte[] compressed=baos.toByteArray();\r\n         \r\n         //write chunk\r\n         dos.writeInt(dictionary.length);\r\n         dos.write(dictionary);\r\n         dos.writeInt(compressed.length);\r\n         dos.write(compressed);\r\n         dos.flush();\r\n         \r\n         System.out.println(&quot;Compressed Lines=&quot;+(linesDone+=lines.size()));\r\n         \r\n         lines.clear();\r\n        }\r\n        //clear to read next chunk\r\n       \r\n        if(line==null){break;}\r\n       }\r\n       \r\n       //used while reading to check for end point\r\n       dos.writeInt(-1);\r\n      }\r\n     }\r\n    }\r\n\r\nValidater.java\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.DataInputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.util.zip.Inflater;\r\n    import java.util.zip.InflaterInputStream;\r\n    \r\n    \r\n    public class Validater \r\n    {\r\n     public static boolean isAllowed(String password,File compressed)throws Exception\r\n     {\r\n      Inflater inf=new Inflater();\r\n      ByteArrayOutputStream baos=new ByteArrayOutputStream();\r\n      \r\n      try(DataInputStream dis=new DataInputStream(new FileInputStream(compressed));)\r\n      {\r\n       int size;\r\n       while((size=dis.readInt())!=-1)\r\n       {\r\n         byte[] dictionary=new byte[size];\r\n         dis.read(dictionary);\r\n         byte[] data=new byte[dis.readInt()];\r\n         dis.read(data);\r\n    \r\n         inf.reset();\r\n         try(InflaterInputStream iis=new InflaterInputStream(new ByteArrayInputStream(data),inf))\r\n         {\r\n          baos.reset();\r\n          \r\n          int length;\r\n          byte[] output=new byte[1000];   \r\n          while(true)\r\n          {\r\n           length=iis.read(output);\r\n           if(inf.needsDictionary()){inf.setDictionary(dictionary);}\r\n           else\r\n           {\r\n            if(length==-1){break;}\r\n            baos.write(output,0,length);\r\n           }\r\n          }\r\n         }\r\n         \r\n         if(new String(baos.toByteArray()).contains(password)){return false;}  \r\n       }\r\n      }\r\n      return true;\r\n     }\r\n    }\r\n\r\nAll Test cases rename any method to main and test\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.File;\r\n    import java.io.PrintWriter;\r\n    import java.util.List;\r\n    import java.util.Random;\r\n    import java.util.zip.Deflater;\r\n    import java.util.zip.DeflaterOutputStream;\r\n    \r\n    final class Test \r\n    {\r\n     public static void main1(String[] args)throws Exception\r\n     {\r\n      String text=&quot;Pass A\\nPass B\\n Pass C\\nPass D&quot;;\r\n      \r\n      Deflater def=new Deflater(9);\r\n      //def.setDictionary(Dictionary.getLongestOccurence(List.of(text),2,6).getBytes());\r\n      \r\n      byte[] original=text.getBytes();\r\n      try(ByteArrayOutputStream baos=new ByteArrayOutputStream())\r\n      {\r\n       try(DeflaterOutputStream dos=new DeflaterOutputStream(baos,def))\r\n       {\r\n        dos.write(original);\r\n        dos.flush();\r\n       }\r\n       System.out.println(original.length+&quot;/&quot;+baos.toByteArray().length);\r\n      }    \r\n     }\r\n     \r\n     public static void main2(String[] args) throws Exception\r\n     {\r\n      try(PrintWriter writer=new PrintWriter(new File(&quot;E:/Passwords.txt&quot;)))\r\n      {\r\n       Random random=new Random();\r\n       int \r\n       ch, \r\n       passlength;\r\n       String password;\r\n       \r\n       for(int i=0;i&lt;4 * 1000 * 1000;i++)\r\n       {\r\n        password=&quot;&quot;;\r\n        \r\n        passlength=random.nextInt(5,15);\r\n        for(int j=0;j&lt;passlength;j++)\r\n        {\r\n         ch=random.nextInt(65,122);\r\n         \r\n         if(ch&gt;=91 &amp;&amp; ch&lt;=96){continue;}\r\n         \r\n         password+=(char)(ch);\r\n        }\r\n        if(password.isEmpty()){continue;}\r\n        \r\n        writer.println(password);\r\n       }\r\n      }\r\n     }\r\n     \r\n \r\n\r\n     public static void main(String[] args)\r\n     {\r\n      System.out.println\r\n      (\r\n       &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\r\n       (\r\n        List.of\r\n        (\r\n          &quot;ABC&quot;\r\n         ,&quot;ABCD&quot;\r\n        )\r\n        ,2,3\r\n       )\r\n      );\r\n      \r\n      System.out.println\r\n      (\r\n       &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\r\n       (\r\n        List.of\r\n        (\r\n          &quot;Pass A1&quot;\r\n         ,&quot;Pass B2&quot;\r\n         ,&quot;Pass C3&quot;\r\n         ,&quot;Pass D4&quot;\r\n        )\r\n        ,2,4\r\n       )\r\n      );\r\n      \r\n      System.out.println\r\n      (\r\n       &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\r\n       (\r\n        List.of\r\n        (\r\n          &quot;123/ABC/345/ABC/678/ABC/908&quot;\r\n        )\r\n        ,2,5\r\n       )\r\n      );\r\n      \r\n      System.out.println\r\n      (\r\n       &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\r\n       (\r\n        List.of\r\n        (\r\n          &quot;HHH123HHH456HHH789HHH092&quot;\r\n        )\r\n        ,2,4\r\n       )\r\n      );\r\n     }\r\n     \r\n     public static void main4(String[] args)throws Exception\r\n     {\r\n      Compressor.compress(new File(&quot;E:/Passwords2.txt&quot;),2,2,4,new File(&quot;E:/Compressed2.bin&quot;));\r\n     }\r\n     \r\n     public static void main5(String[] args)throws Exception\r\n     {\r\n      //beginning of the file\r\n      long start=System.currentTimeMillis();\r\n      System.out.println(Validater.isAllowed(&quot;ELIdjajPKsmeZ&quot;,new File(&quot;E:/Compressed.bin&quot;)));\r\n      System.out.println(System.currentTimeMillis()-start);\r\n      \r\n      //middle of the file\r\n      start=System.currentTimeMillis();\r\n      System.out.println(Validater.isAllowed(&quot;kSIvmu&quot;,new File(&quot;E:/Compressed.bin&quot;)));\r\n      System.out.println(System.currentTimeMillis()-start);\r\n      \r\n      //end of the file\r\n      start=System.currentTimeMillis();\r\n      System.out.println(Validater.isAllowed(&quot;CcFylRChZDyd&quot;,new File(&quot;E:/Compressed.bin&quot;)));\r\n      System.out.println(System.currentTimeMillis()-start);\r\n     }\r\n    }\r\n\r\n**Conclusion**\r\n\r\nWell this was very insightful . All the classes used here are all present in java 7 except streams which is java 8  which most android versions support so you should be ok on that end. If you cant be bothered to read my poorly documented explanations then you can go right ahead and copy the full code after the FullCode Section. This took pretty much the whole day. One down side is while before your compressed file was 11 MB the final compressed file in my system came up to 26.9 MB. for my randomly generated passwords but as you have seen from the outputs memory and speed is overall very good. You can play around with the settings to get your preferred sizes Also if you have a better approach for finding the dictionary please do edit this answer. Don&#39;t bother using SqLite. \r\n\r\nYou have a good day now :)   \r\n\r\n**EDIT**\r\nDictionary class is much faster and improved. Hope it helps","title":"Optimize SQLITE to store large number of words","body":"<p>Dont use sqlite or any database for your purpose. Creating a table with just 2 columns for the sake of compressing an long list of data defeats the purpose of Structure in SQL and you also have to deal with the extra communication overhead.</p>\n<p><strong>High Level Overview</strong></p>\n<p>In your case i am assuming you have an unencrypted text file of 4 million lines where each password is stored in an new line.</p>\n<p>3 simple steps for processing any large amount of sequential data</p>\n<p><strong>Pagify</strong> :  Divide your file up into chunks or pages. Out of 4 million lines try to process every 100,1000 or N number of lines and write them as seperate chunks inside your file</p>\n<p><strong>Process</strong> : Processing means taking the above chunks and Compress/Deflate them.</p>\n<p>The java Deflater class has an <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html#setDictionary(byte%5B%5D)\" rel=\"nofollow noreferrer\">setDictionary</a> method where you pass the most frequently occuring byte sequence inside your target chunk which improves overall compression quality.</p>\n<p>Finding what value to pass to this parameter is a little complicated as we will see in the coming sections.</p>\n<p><strong>Lazy Read</strong> : The problem with your previous approach is you treated your text file as an single unit which you loaded fully into your memory. But now since your file is in chunks we read,check,free each chunk at a time. There are 2 advantages to this approach</p>\n<ol>\n<li><p>After reading an chunk you can free it from memory if it does not match your criteria</p>\n</li>\n<li><p>If the chunk contains the password you are looking for then you can stop processing there itself and don't have to process further chunks thus saving computation time . Chunks towards the end of the file can be skipped if what you are looking for is in the beginning of the file.</p>\n</li>\n</ol>\n<p><strong>Test Case</strong></p>\n<p>I use this code to generate your 4 million lines of text for testing purposes</p>\n<pre><code>public static void main(String[] args) throws Exception\n {\n  try(PrintWriter writer=new PrintWriter(new File(&quot;E:/Passwords.txt&quot;)))\n  {\n   //for random password generation\n   Random random=new Random();\n   int \n   ch, \n   passlength;\n   String password;\n   \n   //4 million lines[comes upto 40MB]\n   for(int i=0;i&lt;4 * 1000 * 1000;i++)\n   {\n    password=&quot;&quot;;\n    \n    //generate any password whose length is between 5 and 15 characters\n    passlength=random.nextInt(5,15);\n    for(int j=0;j&lt;passlength;j++)\n    {\n     //65-&gt;122 is the range of all alphabetic characters in US ASCII\n     ch=random.nextInt(65,122);\n     \n     //exclude characters like [ ( and so on \n     if(ch&gt;=91 &amp;&amp; ch&lt;=96){continue;}\n     \n     password+=(char)(ch);\n    }\n    \n    //write password to file\n    writer.println(password);\n   }\n  }\n }\n</code></pre>\n<p>So we have our test file now lets get started</p>\n<p><strong>Finding the longest &amp; most frequently occuring string in your list of passwords[Optional operation]</strong></p>\n<p>As mentioned the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/zip/Deflater.html#setDictionary(byte%5B%5D)\" rel=\"nofollow noreferrer\">setDictionary</a> accepts the above required bytes for proper compression. For most of the cases you don't need to use this as the Compressor most of the time is smart enough to figure this out but if you pass it the exact pattern occurring in your list of passwords then compression speed and performance is improved. Now comes the complicated part</p>\n<p><strong>Figuring out the sequence</strong>\nLets say we have an example string</p>\n<pre><code>  ABC/123/ABC/456/ABC/789\n</code></pre>\n<p>The most frequently occuring string is /ABC/ including the slashes how we find this string is as follows</p>\n<blockquote>\n<ol>\n<li><p>Find the length of the longest password in your list which will also be longest word to check for it's occurence in the list[length call it N]</p>\n</li>\n<li><p>Create an for loop n which goes from 2-&gt;N where n is the length of the substring from i-&gt;i+n which we should create and then check for its\noccurence in the password list</p>\n</li>\n</ol>\n</blockquote>\n<p>Remember the longer the string we find the better for compression for example lets say we have 2 passwords</p>\n<pre><code>ABC\nABCD\n\nLongest Password=length 3[2nd line]\n\nfor i=0-&gt;length of full text\n   for n=2-&gt;N\n    Generate  substring from i-&gt;i+n\n     check for occurences\n</code></pre>\n<p>For each of these strings generated we find the number of occurences in the password list and we store the one with the highest occurence.</p>\n<p>But if we encounter an substring with an longer length than the previous one we override the previous longest word irrespective of its occurences as it is always favoured more in compression</p>\n<p>The Dictionary class does this</p>\n<pre><code>import java.util.List;\nimport java.util.stream.Collectors;\n\nfinal class Dictionary\n{\n private static final class Info\n {\n  private final int longestLine;\n  \n  private int highestOccurence;\n  private String longestWord=&quot;&quot;;\n  \n  public Info(int longestLine) {this.longestLine = longestLine;}\n } \n \n private static Info getInfo(List&lt;String&gt; lines)\n {\n  int \n  currentLine, \n  longestLine=0;\n  \n  for(String line:lines)\n  {\n   //find longest line in the password list\n   if((currentLine=line.length())&gt;longestLine)\n   {\n    longestLine=currentLine;\n   }\n  }\n  \n  return new Info(longestLine);\n }\n \n static String getLongestOccurence(List&lt;String&gt; lines,int minLength,int maxLength)\n {\n  //user dosent want dictionary hence return empty string\n  if(minLength&lt;0){return &quot;&quot;;}\n  \n  Info info=getInfo(lines);\n \n  minLength=Math.max(2,minLength);\n  maxLength=maxLength&lt;=0?info.longestLine:Math.min(maxLength,info.longestLine);\n  \n  String fullText=lines.stream().collect(Collectors.joining(&quot;\\n&quot;));\n  int \n  startIndex=0, \n  count;\n  \n  int length=fullText.length();\n  outer : for(int i=0;i&lt;length;i++)\n  {\n   for(int n=minLength;n&lt;maxLength;n++)\n   {\n    //if substring is longer than text length break\n    if((i+n+1)&gt;length){break outer;}\n    //if combination length is lesser than previous longestWord length then continue as we dont care about shorter words\n    if(n&lt;info.longestWord.length()){continue;}   \n    //get combination\n    String combination=fullText.substring(i,i+n+1);  \n    \n    //count occurences\n    count=0;\n    do\n    {\n     startIndex=fullText.indexOf(combination,startIndex);\n     if(startIndex!=-1)\n     {\n      startIndex+=combination.length();\n      \n      count++;\n     }\n    } \n    while(startIndex!=-1);\n    \n    //we only care about more than one occurences\n    if(count&gt;1)\n    {   \n     if(length&gt;info.longestWord.length()) //if new combination is longer than previous one give it more precedence\n     {\n      info.longestWord=combination;\n      info.highestOccurence=count;\n     }\n     else if(count&gt;info.highestOccurence)  //else if both are equal length then check counts\n     {\n      info.longestWord=combination;       \n      info.highestOccurence=count;      \n     }\n    }\n   }\n  }\n  \n  return info.longestWord;\n }\n}\n\n\n\n \n</code></pre>\n<p>Here we are looking for an frequently occuring word which is minimum length 2 and maximum length 4</p>\n<pre><code> public static void main(String[] args)\n {\n  System.out.println\n  (\n   &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\n   (\n    List.of\n    (\n      &quot;Pass A&quot;\n     ,&quot;Pass B&quot;\n     ,&quot;Pass C&quot;\n     ,&quot;Pass D&quot;\n    )\n    ,2,4\n   )\n  );\n }\n</code></pre>\n<p>We get</p>\n<pre><code>Dictionary=Pass\n</code></pre>\n<p>Difference in compression?</p>\n<p>With all that complex logic what compression do we get? lets see</p>\n<pre><code>public static void main(String[] args)throws Exception\n {\n  String text=&quot;Pass A\\nPass B\\n Pass C\\nPass D&quot;;\n  \n  Deflater def=new Deflater(9);\n  def.setDictionary(Dictionary.getLongestOccurence(List.of(text),2,6).getBytes());\n  \n  byte[] original=text.getBytes();\n  try(ByteArrayOutputStream baos=new ByteArrayOutputStream())\n  {\n   try(DeflaterOutputStream dos=new DeflaterOutputStream(baos,def))\n   {\n    dos.write(original);\n    dos.flush();\n   }\n   System.out.println(original.length+&quot;/&quot;+baos.toByteArray().length);\n  }    \n }\n</code></pre>\n<p>Output</p>\n<pre><code>28/24\n</code></pre>\n<p>So using dictionary the ratio of the uncompressed to the compressed data is 28/24</p>\n<p>If you comment out the line<br />\n<code>//def.setDictionary(Dictionary.getLongestOccurence(List.of(text),2,6).getBytes());</code></p>\n<p>We get</p>\n<pre><code>    28/26\n</code></pre>\n<p>Not so great but we saved 2 whole bytes of data by using the dictionary. Off course this is an small test case but if you have sorted your passwords such that very similar passwords are close to each other then savings become much greater.</p>\n<p><strong>Pagifying your data[Main Core]</strong></p>\n<p>This is the most important part of the operation where all your savings come into play.</p>\n<p>It's pretty simple as the code will explain it all</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.FileReader;\nimport java.util.ArrayList;\nimport java.util.stream.Collectors;\nimport java.util.zip.Deflater;\nimport java.util.zip.DeflaterOutputStream;\n\n\nfinal class Compressor\n{\n public static void compress(File textFile,int linesPerChunk,int minWord,int maxWord,File output)throws Exception\n {\n  try(BufferedReader reader=new BufferedReader(new FileReader(textFile));\n      FileOutputStream fos=new FileOutputStream(output))\n  {\n   ArrayList&lt;String&gt; lines=new ArrayList();\n   Deflater compresser=new Deflater(9);\n   ByteArrayOutputStream baos=new ByteArrayOutputStream();\n   DataOutputStream dos=new DataOutputStream(fos);\n   int linesDone=0;\n   \n   String line;   \n   while(true)\n   {\n    line=reader.readLine();\n    \n    //add only if more input is available\n    if(line!=null){lines.add(line);}\n\n    //parse if we have linePerChunk number of lines or if this was the last input\n    if(line==null || lines.size()&gt;=linesPerChunk)\n    {\n     //occurs if this was the last input and there are no more left over lines to parse\n     if(lines.isEmpty()){break;}\n     \n     byte[] dictionary=Dictionary.getLongestOccurence(lines,minWord,maxWord).getBytes();\n     \n     //Compress chunk\n     baos.reset();      \n     compresser.reset();\n     if(dictionary.length!=0){compresser.setDictionary(dictionary);}    \n     try(DeflaterOutputStream deos=new DeflaterOutputStream(baos,compresser))\n     {\n      deos.write(lines.stream().collect(Collectors.joining(&quot;\\n&quot;)).getBytes());\n      deos.flush();\n     }\n     byte[] compressed=baos.toByteArray();\n     \n     //write chunk\n     dos.writeInt(dictionary.length);\n     dos.write(dictionary);\n     dos.writeInt(compressed.length);\n     dos.write(compressed);\n     dos.flush();\n     \n     System.out.println(&quot;Compressed Lines=&quot;+(linesDone+=lines.size()));\n     \n     //clear to read next chunk\n     lines.clear();\n    }\n    \n   \n    if(line==null){break;}\n   }\n   \n   //used while reading to check for end point\n   dos.writeInt(-1);\n  }\n }\n}\n</code></pre>\n<p>Basically we divide your file into pages of N lines and compress each page and write it as a chunk into an new file. This method also accepts the min and max word length to use in your dictionary . You can pass -1 for either value if you wish to skip using dictionary. Performance benefits of dictionary largely depends on your password data and is your preference</p>\n<p><strong>Lazy Reading[Final]</strong></p>\n<p>Finally we read each chunk and if the chunk contains the password we are looking for we return the method there only and don't proceed further</p>\n<pre><code>public class Validater \n{\n public static boolean isAllowed(String password,File compressed)throws Exception\n {\n  Inflater inf=new Inflater();\n  ByteArrayOutputStream baos=new ByteArrayOutputStream();\n  \n  try(DataInputStream dis=new DataInputStream(new FileInputStream(compressed));)\n  {\n   int size;\n   while((size=dis.readInt())!=-1)\n   {\n     byte[] dictionary=new byte[size];\n     dis.read(dictionary);\n     byte[] data=new byte[dis.readInt()];\n     dis.read(data);\n\n     inf.reset();\n     try(InflaterInputStream iis=new InflaterInputStream(new ByteArrayInputStream(data),inf))\n     {\n      baos.reset();\n      \n      int length;\n      byte[] output=new byte[1000];   \n      while(true)\n      {\n       length=iis.read(output);\n       if(inf.needsDictionary()){inf.setDictionary(dictionary);}\n       else\n       {\n        if(length==-1){break;}\n        baos.write(output,0,length);\n       }\n      }\n     }\n     \n     //the actual validation\n     if(new String(baos.toByteArray()).contains(password)){return false;}  \n   }\n  }\n  return true;\n }\n}\n</code></pre>\n<p><strong>Performance</strong></p>\n<pre><code> public static void main(String[] args)throws Exception\n {\n  //beginning of the file\n  long start=System.currentTimeMillis();\n  System.out.println(Validater.isAllowed(&quot;ELIdjajPKsmeZ&quot;,new File(&quot;E:/Compressed.bin&quot;)));\n  System.out.println(System.currentTimeMillis()-start);\n  \n  //middle of the file\n  start=System.currentTimeMillis();\n  System.out.println(Validater.isAllowed(&quot;kSIvmu&quot;,new File(&quot;E:/Compressed.bin&quot;)));\n  System.out.println(System.currentTimeMillis()-start);\n  \n  //end of the file\n  start=System.currentTimeMillis();\n  System.out.println(Validater.isAllowed(&quot;CcFylRChZDyd&quot;,new File(&quot;E:/Compressed.bin&quot;)));\n  System.out.println(System.currentTimeMillis()-start);\n }\n</code></pre>\n<p>The above test case is some random passwords i copied from each part of the notepad passwords file</p>\n<p>Before executing you must compress your file using</p>\n<pre><code>public static void main4(String[] args)throws Exception\n {\n  //i used -1 to skip dictionary but you can specify whatever value and i create each chunk of length 100 lines\n  Compressor.compress(new File(&quot;E:/Passwords.txt&quot;),100,-1,4,new File(&quot;E:/Compressed.bin&quot;));\n }\n</code></pre>\n<p>Here are the results</p>\n<pre><code>false\n5\nfalse\n713\nfalse\n1554 \n</code></pre>\n<p>As you can see the worst case took just 1554 milliseconds to execute over 4 million lines of passwords and the memory usage didn't even exceed 1 MB in my potato system</p>\n<p><strong>The Full Code</strong></p>\n<p>Dictionary.java</p>\n<pre><code>import java.util.List;\nimport java.util.stream.Collectors;\n\nfinal class Dictionary\n{\n private static final class Info\n {\n  private final int longestLine;\n  \n  private int highestOccurence;\n  private String longestWord=&quot;&quot;;\n  \n  public Info(int longestLine) {this.longestLine = longestLine;}\n } \n \n private static Info getInfo(List&lt;String&gt; lines)\n {\n  int \n  currentLine, \n  longestLine=0;\n  \n  for(String line:lines)\n  {\n   //find longest line in the password list\n   if((currentLine=line.length())&gt;longestLine)\n   {\n    longestLine=currentLine;\n   }\n  }\n  \n  return new Info(longestLine);\n }\n \n static String getLongestOccurence(List&lt;String&gt; lines,int minLength,int maxLength)\n {\n  //user dosent want dictionary hence return empty string\n  if(minLength&lt;0){return &quot;&quot;;}\n  \n  Info info=getInfo(lines);\n \n  minLength=Math.max(2,minLength);\n  maxLength=maxLength&lt;=0?info.longestLine:Math.min(maxLength,info.longestLine);\n  \n  String fullText=lines.stream().collect(Collectors.joining(&quot;\\n&quot;));\n  int \n  startIndex=0, \n  count;\n  \n  int length=fullText.length();\n  outer : for(int i=0;i&lt;length;i++)\n  {\n   for(int n=minLength;n&lt;maxLength;n++)\n   {\n    //if substring is longer than text length break\n    if((i+n+1)&gt;length){break outer;}\n    //if combination length is lesser than previous longestWord length then continue as we dont care about shorter words\n    if(n&lt;info.longestWord.length()){continue;}   \n    //get combination\n    String combination=fullText.substring(i,i+n+1);  \n    \n    //count occurences\n    count=0;\n    do\n    {\n     startIndex=fullText.indexOf(combination,startIndex);\n     if(startIndex!=-1)\n     {\n      startIndex+=combination.length();\n      \n      count++;\n     }\n    } \n    while(startIndex!=-1);\n    \n    //we only care about more than one occurences\n    if(count&gt;1)\n    {   \n     if(length&gt;info.longestWord.length()) //if new combination is longer than previous one give it more precedence\n     {\n      info.longestWord=combination;\n      info.highestOccurence=count;\n     }\n     else if(count&gt;info.highestOccurence)  //else if both are equal length then check counts\n     {\n      info.longestWord=combination;       \n      info.highestOccurence=count;      \n     }\n    }\n   }\n  }\n  \n  return info.longestWord;\n }\n}\n \n</code></pre>\n<p>Compressor.java</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.FileReader;\nimport java.util.ArrayList;\nimport java.util.stream.Collectors;\nimport java.util.zip.Deflater;\nimport java.util.zip.DeflaterOutputStream;\n\n\nfinal class Compressor\n{\n public static void compress(File textFile,int linesPerChunk,int minWord,int maxWord,File output)throws Exception\n {\n  try(BufferedReader reader=new BufferedReader(new FileReader(textFile));\n      FileOutputStream fos=new FileOutputStream(output))\n  {\n   ArrayList&lt;String&gt; lines=new ArrayList();\n   Deflater compresser=new Deflater(9);\n   ByteArrayOutputStream baos=new ByteArrayOutputStream();\n   DataOutputStream dos=new DataOutputStream(fos);\n   int linesDone=0;\n   \n   String line;   \n   while(true)\n   {\n    line=reader.readLine();\n    \n    //add only if more input is available\n    if(line!=null){lines.add(line);}\n\n    //parse if we have linePerChunk number of lines or if this was the last input\n    if(line==null || lines.size()&gt;=linesPerChunk)\n    {\n     //occurs if this was the last input and there are no more left over lines to parse\n     if(lines.isEmpty()){break;}\n     \n     byte[] dictionary=Dictionary.getLongestOccurence(lines,minWord,maxWord).getBytes();\n     \n     //Compress chunk\n     baos.reset();      \n     compresser.reset();\n     if(dictionary.length!=0){compresser.setDictionary(dictionary);}    \n     try(DeflaterOutputStream deos=new DeflaterOutputStream(baos,compresser))\n     {\n      deos.write(lines.stream().collect(Collectors.joining(&quot;\\n&quot;)).getBytes());\n      deos.flush();\n     }\n     byte[] compressed=baos.toByteArray();\n     \n     //write chunk\n     dos.writeInt(dictionary.length);\n     dos.write(dictionary);\n     dos.writeInt(compressed.length);\n     dos.write(compressed);\n     dos.flush();\n     \n     System.out.println(&quot;Compressed Lines=&quot;+(linesDone+=lines.size()));\n     \n     lines.clear();\n    }\n    //clear to read next chunk\n   \n    if(line==null){break;}\n   }\n   \n   //used while reading to check for end point\n   dos.writeInt(-1);\n  }\n }\n}\n</code></pre>\n<p>Validater.java</p>\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataInputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.util.zip.Inflater;\nimport java.util.zip.InflaterInputStream;\n\n\npublic class Validater \n{\n public static boolean isAllowed(String password,File compressed)throws Exception\n {\n  Inflater inf=new Inflater();\n  ByteArrayOutputStream baos=new ByteArrayOutputStream();\n  \n  try(DataInputStream dis=new DataInputStream(new FileInputStream(compressed));)\n  {\n   int size;\n   while((size=dis.readInt())!=-1)\n   {\n     byte[] dictionary=new byte[size];\n     dis.read(dictionary);\n     byte[] data=new byte[dis.readInt()];\n     dis.read(data);\n\n     inf.reset();\n     try(InflaterInputStream iis=new InflaterInputStream(new ByteArrayInputStream(data),inf))\n     {\n      baos.reset();\n      \n      int length;\n      byte[] output=new byte[1000];   \n      while(true)\n      {\n       length=iis.read(output);\n       if(inf.needsDictionary()){inf.setDictionary(dictionary);}\n       else\n       {\n        if(length==-1){break;}\n        baos.write(output,0,length);\n       }\n      }\n     }\n     \n     if(new String(baos.toByteArray()).contains(password)){return false;}  \n   }\n  }\n  return true;\n }\n}\n</code></pre>\n<p>All Test cases rename any method to main and test</p>\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.PrintWriter;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.zip.Deflater;\nimport java.util.zip.DeflaterOutputStream;\n\nfinal class Test \n{\n public static void main1(String[] args)throws Exception\n {\n  String text=&quot;Pass A\\nPass B\\n Pass C\\nPass D&quot;;\n  \n  Deflater def=new Deflater(9);\n  //def.setDictionary(Dictionary.getLongestOccurence(List.of(text),2,6).getBytes());\n  \n  byte[] original=text.getBytes();\n  try(ByteArrayOutputStream baos=new ByteArrayOutputStream())\n  {\n   try(DeflaterOutputStream dos=new DeflaterOutputStream(baos,def))\n   {\n    dos.write(original);\n    dos.flush();\n   }\n   System.out.println(original.length+&quot;/&quot;+baos.toByteArray().length);\n  }    \n }\n \n public static void main2(String[] args) throws Exception\n {\n  try(PrintWriter writer=new PrintWriter(new File(&quot;E:/Passwords.txt&quot;)))\n  {\n   Random random=new Random();\n   int \n   ch, \n   passlength;\n   String password;\n   \n   for(int i=0;i&lt;4 * 1000 * 1000;i++)\n   {\n    password=&quot;&quot;;\n    \n    passlength=random.nextInt(5,15);\n    for(int j=0;j&lt;passlength;j++)\n    {\n     ch=random.nextInt(65,122);\n     \n     if(ch&gt;=91 &amp;&amp; ch&lt;=96){continue;}\n     \n     password+=(char)(ch);\n    }\n    if(password.isEmpty()){continue;}\n    \n    writer.println(password);\n   }\n  }\n }\n \n\n\n public static void main(String[] args)\n {\n  System.out.println\n  (\n   &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\n   (\n    List.of\n    (\n      &quot;ABC&quot;\n     ,&quot;ABCD&quot;\n    )\n    ,2,3\n   )\n  );\n  \n  System.out.println\n  (\n   &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\n   (\n    List.of\n    (\n      &quot;Pass A1&quot;\n     ,&quot;Pass B2&quot;\n     ,&quot;Pass C3&quot;\n     ,&quot;Pass D4&quot;\n    )\n    ,2,4\n   )\n  );\n  \n  System.out.println\n  (\n   &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\n   (\n    List.of\n    (\n      &quot;123/ABC/345/ABC/678/ABC/908&quot;\n    )\n    ,2,5\n   )\n  );\n  \n  System.out.println\n  (\n   &quot;Dictionary=&quot;+Dictionary.getLongestOccurence\n   (\n    List.of\n    (\n      &quot;HHH123HHH456HHH789HHH092&quot;\n    )\n    ,2,4\n   )\n  );\n }\n \n public static void main4(String[] args)throws Exception\n {\n  Compressor.compress(new File(&quot;E:/Passwords2.txt&quot;),2,2,4,new File(&quot;E:/Compressed2.bin&quot;));\n }\n \n public static void main5(String[] args)throws Exception\n {\n  //beginning of the file\n  long start=System.currentTimeMillis();\n  System.out.println(Validater.isAllowed(&quot;ELIdjajPKsmeZ&quot;,new File(&quot;E:/Compressed.bin&quot;)));\n  System.out.println(System.currentTimeMillis()-start);\n  \n  //middle of the file\n  start=System.currentTimeMillis();\n  System.out.println(Validater.isAllowed(&quot;kSIvmu&quot;,new File(&quot;E:/Compressed.bin&quot;)));\n  System.out.println(System.currentTimeMillis()-start);\n  \n  //end of the file\n  start=System.currentTimeMillis();\n  System.out.println(Validater.isAllowed(&quot;CcFylRChZDyd&quot;,new File(&quot;E:/Compressed.bin&quot;)));\n  System.out.println(System.currentTimeMillis()-start);\n }\n}\n</code></pre>\n<p><strong>Conclusion</strong></p>\n<p>Well this was very insightful . All the classes used here are all present in java 7 except streams which is java 8  which most android versions support so you should be ok on that end. If you cant be bothered to read my poorly documented explanations then you can go right ahead and copy the full code after the FullCode Section. This took pretty much the whole day. One down side is while before your compressed file was 11 MB the final compressed file in my system came up to 26.9 MB. for my randomly generated passwords but as you have seen from the outputs memory and speed is overall very good. You can play around with the settings to get your preferred sizes Also if you have a better approach for finding the dictionary please do edit this answer. Don't bother using SqLite.</p>\n<p>You have a good day now :)</p>\n<p><strong>EDIT</strong>\nDictionary class is much faster and improved. Hope it helps</p>\n"}],"owner":{"account_id":165721,"reputation":13113,"user_id":389405,"accept_rate":84,"display_name":"Gui13"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1647319220,"creation_date":1647241418,"question_id":71464030,"body_markdown":"I&#39;m trying to replace a big text file that we keed in memory by an SQLite DB.\r\n\r\nWe have this large file, which consists of common passwords that we refuse when a user creates a new password. It&#39;s about 4M lines, and 41MB on disk (uncompressed, compressed is 11MB). We historically loaded it at startup in a Java `Set` and would query it. The issue is that it takes a whopping 400MB of ram once loaded.\r\n\r\nSo I figured, I will put these words in a sqlite DB and query it at runtime. To my surprise, the database is humongous, even after a `VACUUM;`: \r\n\r\n```\r\n-rw-r--r--  1 guillaume  admin   137M 11 mar 18:47 commonPasswords.db\r\n```\r\n\r\nI&#39;m using a very simple schema:\r\n\r\n```sql\r\nCREATE TABLE common_passwords (\r\n\tid INTEGER PRIMARY KEY ,\r\n\tpassword VARCHAR(50) NOT NULL UNIQUE\r\n);\r\n```\r\n\r\nI figured that SQLite would be able to compress that textual list to somewhere between 40MB and the GZIPed size (11MB). GZiping the DB shrinks it to 63MB but at runtime I&#39;ll still have to unzip it (so have it in memory..) so it&#39;s useless.\r\n\r\nDo you have any idea on how to store that list in a more efficient way so that it is queryable in Java? Or how to tune SQLite to optimize for size? I&#39;m not interested in perf, since this DB is only queried a few times per hour.","title":"Optimize SQLITE to store large number of words","body":"<p>I'm trying to replace a big text file that we keed in memory by an SQLite DB.</p>\n<p>We have this large file, which consists of common passwords that we refuse when a user creates a new password. It's about 4M lines, and 41MB on disk (uncompressed, compressed is 11MB). We historically loaded it at startup in a Java <code>Set</code> and would query it. The issue is that it takes a whopping 400MB of ram once loaded.</p>\n<p>So I figured, I will put these words in a sqlite DB and query it at runtime. To my surprise, the database is humongous, even after a <code>VACUUM;</code>:</p>\n<pre><code>-rw-r--r--  1 guillaume  admin   137M 11 mar 18:47 commonPasswords.db\n</code></pre>\n<p>I'm using a very simple schema:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE common_passwords (\n    id INTEGER PRIMARY KEY ,\n    password VARCHAR(50) NOT NULL UNIQUE\n);\n</code></pre>\n<p>I figured that SQLite would be able to compress that textual list to somewhere between 40MB and the GZIPed size (11MB). GZiping the DB shrinks it to 63MB but at runtime I'll still have to unzip it (so have it in memory..) so it's useless.</p>\n<p>Do you have any idea on how to store that list in a more efficient way so that it is queryable in Java? Or how to tune SQLite to optimize for size? I'm not interested in perf, since this DB is only queried a few times per hour.</p>\n"},{"tags":["java","minecraft","bukkit"],"comments":[{"owner":{"account_id":5339493,"reputation":7038,"user_id":4257162,"accept_rate":80,"display_name":"LeoColman"},"score":0,"creation_date":1490569592,"post_id":43035520,"comment_id":73156487,"body_markdown":"Maybe make the lists static? I think the access is different in event handlers. Check if your list contains anything on your event, AKA print them out","body":"Maybe make the lists static? I think the access is different in event handlers. Check if your list contains anything on your event, AKA print them out"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1490569864,"post_id":43035520,"comment_id":73156539,"body_markdown":"Where is the code for `Player`? Does it implement `equals` correctly?","body":"Where is the code for <code>Player</code>? Does it implement <code>equals</code> correctly?"},{"owner":{"account_id":10547315,"reputation":9,"user_id":7771108,"display_name":"Marcin Rubach"},"score":0,"creation_date":1490570694,"post_id":43035520,"comment_id":73156751,"body_markdown":"Oh making arrays static helped thank you a lot :),","body":"Oh making arrays static helped thank you a lot :),"},{"owner":{"account_id":5339493,"reputation":7038,"user_id":4257162,"accept_rate":80,"display_name":"LeoColman"},"score":0,"creation_date":1490572151,"post_id":43035520,"comment_id":73157074,"body_markdown":"@JimGarrison Player is implemented by Bukkit, it&#39;s provided.","body":"@JimGarrison Player is implemented by Bukkit, it&#39;s provided."}],"answers":[{"tags":[],"owner":{"account_id":5339493,"reputation":7038,"user_id":4257162,"accept_rate":80,"display_name":"LeoColman"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1490572131,"creation_date":1490572131,"answer_id":43035948,"question_id":43035520,"body_markdown":"The solution for this is pretty simple:\r\n\r\nTurn all your ArrayLists static. The EventHandler handles classes in different ways, creating a new one everytime, making your declaration of variables useless to the events.\r\n\r\n    private static ArrayList&lt;String&gt; ooc = new ArrayList&lt;String&gt;();\r\n    private static ArrayList&lt;String&gt; ic = new ArrayList&lt;String&gt;();\r\n    private static ArrayList&lt;String&gt; shout = new ArrayList&lt;String&gt;();\r\n    private static ArrayList&lt;String&gt; whisper = new ArrayList&lt;String&gt;();\r\n\r\nThis way, your Lists are used by all the event handlers, rendering it a unique list.","title":"Bukkit ArrayList contains cant find element","body":"<p>The solution for this is pretty simple:</p>\n\n<p>Turn all your ArrayLists static. The EventHandler handles classes in different ways, creating a new one everytime, making your declaration of variables useless to the events.</p>\n\n<pre><code>private static ArrayList&lt;String&gt; ooc = new ArrayList&lt;String&gt;();\nprivate static ArrayList&lt;String&gt; ic = new ArrayList&lt;String&gt;();\nprivate static ArrayList&lt;String&gt; shout = new ArrayList&lt;String&gt;();\nprivate static ArrayList&lt;String&gt; whisper = new ArrayList&lt;String&gt;();\n</code></pre>\n\n<p>This way, your Lists are used by all the event handlers, rendering it a unique list.</p>\n"},{"tags":[],"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647318752,"creation_date":1647318752,"answer_id":71477101,"question_id":43035520,"body_markdown":"Making your `ArrayList` fields static is a poor choice/workaround for what is likely a bug elsewheres in your code. When you use `new RpChat()`, you are creating a new object with a separate copy of the lists in the class. If you registered `RpChat` like so:\r\n\r\n    getServer().getPluginManager().registerEvents(new RpChat(), plugin);\r\n    plugin.getCommand(&quot;ooc&quot;).setExecutor(new RpChat());\r\n\r\nThen the two `RpChat` variables would be distinct, and the lists contained in them would never interact between the listener and the command execution. Instead, you should register the same object to both:\r\n\r\n    RpChat chat = new RpChat();\r\n    getServer().getPluginManager().registerEvents(chat, plugin);\r\n    plugin.getCommand(&quot;ooc&quot;).setExecutor(chat);\r\n\r\nThis is a fairly common developer bug for bukkit that I&#39;ve seen a lot over the last decade. Making all your fields `static` will quickly lead to a plugin with no OOP design, and `static` having to be added to everything you can think of.\r\n\r\n    ","title":"Bukkit ArrayList contains cant find element","body":"<p>Making your <code>ArrayList</code> fields static is a poor choice/workaround for what is likely a bug elsewheres in your code. When you use <code>new RpChat()</code>, you are creating a new object with a separate copy of the lists in the class. If you registered <code>RpChat</code> like so:</p>\n<pre><code>getServer().getPluginManager().registerEvents(new RpChat(), plugin);\nplugin.getCommand(&quot;ooc&quot;).setExecutor(new RpChat());\n</code></pre>\n<p>Then the two <code>RpChat</code> variables would be distinct, and the lists contained in them would never interact between the listener and the command execution. Instead, you should register the same object to both:</p>\n<pre><code>RpChat chat = new RpChat();\ngetServer().getPluginManager().registerEvents(chat, plugin);\nplugin.getCommand(&quot;ooc&quot;).setExecutor(chat);\n</code></pre>\n<p>This is a fairly common developer bug for bukkit that I've seen a lot over the last decade. Making all your fields <code>static</code> will quickly lead to a plugin with no OOP design, and <code>static</code> having to be added to everything you can think of.</p>\n"}],"owner":{"account_id":10547315,"reputation":9,"user_id":7771108,"display_name":"Marcin Rubach"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":2,"score":-3,"last_activity_date":1647318752,"creation_date":1490568744,"question_id":43035520,"body_markdown":"I&#39;m trying to do Chat Channels and have problems with lists. Im adding one element to the list when executing command and later im trying to check if the element is added on list but it&#39;s always shows that it isnt.\r\n\r\nHere is my code:\r\n```\r\npublic class RpChat implements CommandExecutor, Listener {\r\n\r\n    private ArrayList&lt;Player&gt; ooc = new ArrayList&lt;Player&gt;();\r\n    private ArrayList&lt;Player&gt; ic = new ArrayList&lt;Player&gt;();\r\n    private ArrayList&lt;Player&gt; shout = new ArrayList&lt;Player&gt;();\r\n    private ArrayList&lt;Player&gt; whisper = new ArrayList&lt;Player&gt;();\r\n\r\n    public boolean onCommand(CommandSender cs, org.bukkit.command.Command cmnd, String string, String[] strings) {\r\n        Player s = (Player) cs;\r\n        if (cmnd.getName().equalsIgnoreCase(&quot;ooc&quot;)) {\r\n            s.sendMessage(&quot;Debug: OOC&quot;);\r\n            ooc.add(s);\r\n            \r\n            if (ic.contains(s))\r\n                ooc.remove(s);\r\n            if (shout.contains(s))\r\n                ooc.remove(s);\r\n            if (whisper.contains(s))\r\n                ooc.remove(s);\r\n        }\r\n        return false;\r\n\r\n    }\r\n\r\n    @EventHandler\r\n    public void onPlayerChatEvent(AsyncPlayerChatEvent event) {\r\n        Player p = event.getPlayer();\r\n        Bukkit.getScheduler().scheduleSyncRepeatingTask(Dungeon.getPlugin(), new Runnable() {\r\n            public void run() {\r\n                if (ooc.contains(p)) {\r\n                    event.setFormat(ChatColor.RED + &quot;[OOC] &quot; + ChatColor.WHITE + &quot;%s&quot; + &quot;: &quot; + &quot;%s&quot;);\r\n                    p.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(p));\r\n                }\r\n                else{\r\n                    p.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(p));\r\n                }\r\n\r\n        }\r\n        }, 0, 40);\r\n\r\n    }\r\n```\r\nIn game I&#39;m getting `Debug: OOC Message` Back so `ooc.add(s)` should be OK, but the second d message from my listener is always returning false and never gets into if statement. I thought it may be caused by casting `Sender` to `Player`, so I also tried to do it on string arrays, and both debug messages from command and listener was returning exactly the same playername but the contains was always false. Here is also code with String attempt.\r\n```\r\npublic class RpChat implements CommandExecutor, Listener {\r\n\r\n\tprivate ArrayList&lt;String&gt; ooc = new ArrayList&lt;String&gt;();\r\n\tprivate ArrayList&lt;String&gt; ic = new ArrayList&lt;String&gt;();\r\n\tprivate ArrayList&lt;String&gt; shout = new ArrayList&lt;String&gt;();\r\n\tprivate ArrayList&lt;String&gt; whisper = new ArrayList&lt;String&gt;();\r\n\t\r\n\tpublic boolean onCommand(CommandSender cs, org.bukkit.command.Command cmnd, String string, String[] strings) {\r\n\t\tPlayer p = (Player) cs;\r\n\t\tString s = p.getName();\r\n\t\t\tif (cmnd.getName().equalsIgnoreCase(&quot;ooc&quot;)) {\r\n\t\t\tp.sendMessage(&quot;Debug: OOC: Plaer Name: &quot;+ s);\r\n\t\t\tif (ic.contains(s))\r\n\t\t\t\tic.remove(s);\r\n\t\t\tif (shout.contains(s))\r\n\t\t\t\tshout.remove(s);\r\n\t\t\tif (whisper.contains(s))\r\n\t\t\t\twhisper.remove(s);\r\n\t\t\tooc.add(s);\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\t@EventHandler\r\n\tpublic void onPlayerChatEvent(AsyncPlayerChatEvent event) {\r\n\t\tPlayer p = event.getPlayer();\r\n\t\tString s = p.getName();\r\n\t\tBukkit.getScheduler().scheduleSyncRepeatingTask(Dungeon.getPlugin(), new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\tif (ooc.contains(s)) {\r\n\t\t\t\t\tevent.setFormat(ChatColor.RED + &quot;[OOC] &quot; + ChatColor.WHITE + &quot;%s&quot; + &quot;: &quot; + &quot;%s&quot;);\r\n\t\t\t\t\tp.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(s)+ &quot; Plaer Name: &quot;+ s);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tp.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(s)+ &quot; Plaer Name: &quot;+ s);\r\n\t\t\t\t}\r\n\r\n\t\t}\r\n\t\t}, 0, 40);\r\n\r\n\t}\r\n```","title":"Bukkit ArrayList contains cant find element","body":"<p>I'm trying to do Chat Channels and have problems with lists. Im adding one element to the list when executing command and later im trying to check if the element is added on list but it's always shows that it isnt.</p>\n<p>Here is my code:</p>\n<pre><code>public class RpChat implements CommandExecutor, Listener {\n\n    private ArrayList&lt;Player&gt; ooc = new ArrayList&lt;Player&gt;();\n    private ArrayList&lt;Player&gt; ic = new ArrayList&lt;Player&gt;();\n    private ArrayList&lt;Player&gt; shout = new ArrayList&lt;Player&gt;();\n    private ArrayList&lt;Player&gt; whisper = new ArrayList&lt;Player&gt;();\n\n    public boolean onCommand(CommandSender cs, org.bukkit.command.Command cmnd, String string, String[] strings) {\n        Player s = (Player) cs;\n        if (cmnd.getName().equalsIgnoreCase(&quot;ooc&quot;)) {\n            s.sendMessage(&quot;Debug: OOC&quot;);\n            ooc.add(s);\n            \n            if (ic.contains(s))\n                ooc.remove(s);\n            if (shout.contains(s))\n                ooc.remove(s);\n            if (whisper.contains(s))\n                ooc.remove(s);\n        }\n        return false;\n\n    }\n\n    @EventHandler\n    public void onPlayerChatEvent(AsyncPlayerChatEvent event) {\n        Player p = event.getPlayer();\n        Bukkit.getScheduler().scheduleSyncRepeatingTask(Dungeon.getPlugin(), new Runnable() {\n            public void run() {\n                if (ooc.contains(p)) {\n                    event.setFormat(ChatColor.RED + &quot;[OOC] &quot; + ChatColor.WHITE + &quot;%s&quot; + &quot;: &quot; + &quot;%s&quot;);\n                    p.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(p));\n                }\n                else{\n                    p.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(p));\n                }\n\n        }\n        }, 0, 40);\n\n    }\n</code></pre>\n<p>In game I'm getting <code>Debug: OOC Message</code> Back so <code>ooc.add(s)</code> should be OK, but the second d message from my listener is always returning false and never gets into if statement. I thought it may be caused by casting <code>Sender</code> to <code>Player</code>, so I also tried to do it on string arrays, and both debug messages from command and listener was returning exactly the same playername but the contains was always false. Here is also code with String attempt.</p>\n<pre><code>public class RpChat implements CommandExecutor, Listener {\n\n    private ArrayList&lt;String&gt; ooc = new ArrayList&lt;String&gt;();\n    private ArrayList&lt;String&gt; ic = new ArrayList&lt;String&gt;();\n    private ArrayList&lt;String&gt; shout = new ArrayList&lt;String&gt;();\n    private ArrayList&lt;String&gt; whisper = new ArrayList&lt;String&gt;();\n    \n    public boolean onCommand(CommandSender cs, org.bukkit.command.Command cmnd, String string, String[] strings) {\n        Player p = (Player) cs;\n        String s = p.getName();\n            if (cmnd.getName().equalsIgnoreCase(&quot;ooc&quot;)) {\n            p.sendMessage(&quot;Debug: OOC: Plaer Name: &quot;+ s);\n            if (ic.contains(s))\n                ic.remove(s);\n            if (shout.contains(s))\n                shout.remove(s);\n            if (whisper.contains(s))\n                whisper.remove(s);\n            ooc.add(s);\n        }\n        return true;\n\n    }\n\n    @EventHandler\n    public void onPlayerChatEvent(AsyncPlayerChatEvent event) {\n        Player p = event.getPlayer();\n        String s = p.getName();\n        Bukkit.getScheduler().scheduleSyncRepeatingTask(Dungeon.getPlugin(), new Runnable() {\n            public void run() {\n                if (ooc.contains(s)) {\n                    event.setFormat(ChatColor.RED + &quot;[OOC] &quot; + ChatColor.WHITE + &quot;%s&quot; + &quot;: &quot; + &quot;%s&quot;);\n                    p.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(s)+ &quot; Plaer Name: &quot;+ s);\n                }\n                else{\n                    p.sendMessage(&quot;Debug Player = &quot; +  ooc.contains(s)+ &quot; Plaer Name: &quot;+ s);\n                }\n\n        }\n        }, 0, 40);\n\n    }\n</code></pre>\n"},{"tags":["java","mysql","angular","hibernate"],"comments":[{"owner":{"account_id":16194217,"reputation":622,"user_id":11692264,"display_name":"petrov.aleksandr"},"score":0,"creation_date":1617019226,"post_id":66853749,"comment_id":118174997,"body_markdown":"driver-class-name in properties?","body":"driver-class-name in properties?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1617087786,"post_id":66853749,"comment_id":118197473,"body_markdown":"Does the application start? Unrelated but it irks me that people do it, the `@Repository` on the interface for the repository is useless, remove it.","body":"Does the application start? Unrelated but it irks me that people do it, the <code>@Repository</code> on the interface for the repository is useless, remove it."}],"answers":[{"tags":[],"owner":{"account_id":3868372,"reputation":4436,"user_id":3204335,"display_name":"MD Ruhul Amin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1617019439,"creation_date":1617019439,"answer_id":66853881,"question_id":66853749,"body_markdown":"You also need to add the following `driver-class-name`, `platform` and `generate-dll` properties to auto-generate ddl.\r\n\r\nAdd these properties also.\r\n```\r\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\nspring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect\r\nspring.jpa.generate-ddl=true\r\n```","title":"Why hibernate doesn&#39;t create tables automatically?","body":"<p>You also need to add the following <code>driver-class-name</code>, <code>platform</code> and <code>generate-dll</code> properties to auto-generate ddl.</p>\n<p>Add these properties also.</p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.generate-ddl=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17556968,"reputation":167,"user_id":12736215,"display_name":"Sarthak Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617019752,"creation_date":1617019752,"answer_id":66853945,"question_id":66853749,"body_markdown":"Try changing your value of `hibernate.hbm2ddl.auto` to **create** instead of **update**","title":"Why hibernate doesn&#39;t create tables automatically?","body":"<p>Try changing your value of <code>hibernate.hbm2ddl.auto</code> to <strong>create</strong> instead of <strong>update</strong></p>\n"},{"tags":[],"owner":{"account_id":24560852,"reputation":1,"user_id":18468620,"display_name":"Alejandro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647318649,"creation_date":1647318649,"answer_id":71477085,"question_id":66853749,"body_markdown":"you know it worked for me removing the useSSL=false\r\n\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/users_database?\r\n    spring.datasource.username = root\r\n    spring.datasource.password = root","title":"Why hibernate doesn&#39;t create tables automatically?","body":"<p>you know it worked for me removing the useSSL=false</p>\n<pre><code>spring.datasource.url = jdbc:mysql://localhost:3306/users_database?\nspring.datasource.username = root\nspring.datasource.password = root\n</code></pre>\n"}],"owner":{"account_id":20509070,"reputation":406,"user_id":15051230,"display_name":"a_l_e_x"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1647318649,"creation_date":1617018911,"question_id":66853749,"body_markdown":"I am trying to do a project in Angular but I noticed that the table is not created automatically. I put the structure of the project and the related code to do this.\r\nAs you can see in mysql, the users_database database is created with the statement &quot;create database&quot;, but the employee table is not created.\r\n\r\n![STRUCTURE PROJECT][1]\r\n\r\n![MYSQL][2]\r\n\r\npom.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.4.4&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;net.guides.springboot2&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;springboot2-jpa-crud-example&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;Student_Angular-1&lt;/name&gt;\r\n    \t&lt;description&gt;Rest API for a Simple Employee Management Application&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t\r\n    \t\t       &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n               &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n           &lt;/dependency&gt;\r\n\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n               &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n               &lt;scope&gt;runtime&lt;/scope&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n               &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n               &lt;scope&gt;runtime&lt;/scope&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0.GA&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n               &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n               &lt;scope&gt;test&lt;/scope&gt;\r\n          &lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\n\r\n\r\napplication.properties\r\n\r\n\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/users_database?useSSL=false\r\n    spring.datasource.username = root\r\n    spring.datasource.password = root\r\n\r\n\r\n    ## Hibernate Properties\r\n    # The SQL dialect makes Hibernate generate better SQL for the chosen database\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\r\n\r\n    # Hibernate ddl auto (create, create-drop, validate, update)\r\n    spring.jpa.hibernate.ddl-auto = update\r\n\r\n    server.servlet.context-path=/springboot-crud-rest\r\n\r\nEmployee.java\r\n\r\n    package net.guides.springboot2.springboot2jpacrudexample.model;\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n\r\n    @Entity\r\n    @Table(name = &quot;employees&quot;)\r\n    public class Employee {\r\n\r\n        private long id;\r\n        private String firstName;\r\n        private String lastName;\r\n        private String emailId;\r\n     \r\n        public Employee() {\r\n      \r\n        }\r\n     \r\n        public Employee(String firstName, String lastName, String emailId) {\r\n             this.firstName = firstName;\r\n             this.lastName = lastName;\r\n             this.emailId = emailId;\r\n        }\r\n     \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n            public long getId() {\r\n            return id;\r\n        }\r\n        public void setId(long id) {\r\n            this.id = id;\r\n        }\r\n     \r\n        @Column(name = &quot;first_name&quot;, nullable = false)\r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n     \r\n        @Column(name = &quot;last_name&quot;, nullable = false)\r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n     \r\n        @Column(name = &quot;email_address&quot;, nullable = false)\r\n        public String getEmailId() {\r\n            return emailId;\r\n        }\r\n        public void setEmailId(String emailId) {\r\n            this.emailId = emailId;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Employee [id=&quot; + id + &quot;, firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;, emailId=&quot; + emailId\r\n           + &quot;]&quot;;\r\n        }\r\n     \r\n    }\r\n\r\nEmployeeRepository.java\r\n\r\n    package net.guides.springboot2.springboot2jpacrudexample.repository;\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    import net.guides.springboot2.springboot2jpacrudexample.model.Employee;\r\n\r\n    @Repository\r\n    public interface EmployeeRepository extends JpaRepository&lt;Employee, Long&gt;{\r\n\r\n    }\r\n\r\nEmployeeController.java\r\n\r\n    package net.guides.springboot2.springboot2jpacrudexample.controller;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n\r\n    import javax.validation.Valid;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.DeleteMapping;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PathVariable;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.PutMapping;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n\r\n    import net.guides.springboot2.springboot2jpacrudexample.exception.ResourceNotFoundException;\r\n    import net.guides.springboot2.springboot2jpacrudexample.model.Employee;\r\n    import net.guides.springboot2.springboot2jpacrudexample.repository.EmployeeRepository;\r\n\r\n    @RestController @CrossOrigin(origins = &quot;http://localhost:4200&quot;)\r\n    @RequestMapping(&quot;/api/v1&quot;)\r\n    public class EmployeeController {\r\n        @Autowired\r\n        private EmployeeRepository employeeRepository;\r\n\r\n        @GetMapping(&quot;/employees&quot;)\r\n        public List&lt;Employee&gt; getAllEmployees() {\r\n            return employeeRepository.findAll();\r\n        }\r\n\r\n        @GetMapping(&quot;/employees/{id}&quot;)\r\n        public ResponseEntity&lt;Employee&gt; getEmployeeById(@PathVariable(value = &quot;id&quot;) Long employeeId)\r\n            throws ResourceNotFoundException {\r\n            Employee employee = employeeRepository.findById(employeeId)\r\n              .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\r\n            return ResponseEntity.ok().body(employee);\r\n        }\r\n        \r\n        @PostMapping(&quot;/employees&quot;)\r\n        public Employee createEmployee(@Valid @RequestBody Employee employee) {\r\n            return employeeRepository.save(employee);\r\n        }\r\n\r\n        @PutMapping(&quot;/employees/{id}&quot;)\r\n        public ResponseEntity&lt;Employee&gt; updateEmployee(@PathVariable(value = &quot;id&quot;) Long employeeId,\r\n             @Valid @RequestBody Employee employeeDetails) throws ResourceNotFoundException {\r\n            Employee employee = employeeRepository.findById(employeeId)\r\n            .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\r\n\r\n            employee.setEmailId(employeeDetails.getEmailId());\r\n            employee.setLastName(employeeDetails.getLastName());\r\n            employee.setFirstName(employeeDetails.getFirstName());\r\n            final Employee updatedEmployee = employeeRepository.save(employee);\r\n            return ResponseEntity.ok(updatedEmployee);\r\n        }\r\n\r\n        @DeleteMapping(&quot;/employees/{id}&quot;)\r\n        public Map&lt;String, Boolean&gt; deleteEmployee(@PathVariable(value = &quot;id&quot;) Long employeeId)\r\n             throws ResourceNotFoundException {\r\n            Employee employee = employeeRepository.findById(employeeId)\r\n           .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\r\n\r\n            employeeRepository.delete(employee);\r\n            Map&lt;String, Boolean&gt; response = new HashMap&lt;&gt;();\r\n            response.put(&quot;deleted&quot;, Boolean.TRUE);\r\n            return response;\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/EwDFr.png\r\n  [2]: https://i.stack.imgur.com/oFnif.png","title":"Why hibernate doesn&#39;t create tables automatically?","body":"<p>I am trying to do a project in Angular but I noticed that the table is not created automatically. I put the structure of the project and the related code to do this.\nAs you can see in mysql, the users_database database is created with the statement &quot;create database&quot;, but the employee table is not created.</p>\n<p><img src=\"https://i.stack.imgur.com/EwDFr.png\" alt=\"STRUCTURE PROJECT\" /></p>\n<p><img src=\"https://i.stack.imgur.com/oFnif.png\" alt=\"MYSQL\" /></p>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;net.guides.springboot2&lt;/groupId&gt;\n    &lt;artifactId&gt;springboot2-jpa-crud-example&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Student_Angular-1&lt;/name&gt;\n    &lt;description&gt;Rest API for a Simple Employee Management Application&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        \n               &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n       &lt;/dependency&gt;\n       &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n       &lt;/dependency&gt;\n\n       &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n           &lt;scope&gt;runtime&lt;/scope&gt;\n       &lt;/dependency&gt;\n       &lt;dependency&gt;\n           &lt;groupId&gt;mysql&lt;/groupId&gt;\n           &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n           &lt;scope&gt;runtime&lt;/scope&gt;\n       &lt;/dependency&gt;\n       &lt;dependency&gt;\n    &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0.GA&lt;/version&gt;\n&lt;/dependency&gt;\n       &lt;dependency&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n           &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.datasource.url = jdbc:mysql://localhost:3306/users_database?useSSL=false\nspring.datasource.username = root\nspring.datasource.password = root\n\n\n## Hibernate Properties\n# The SQL dialect makes Hibernate generate better SQL for the chosen database\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\n\n# Hibernate ddl auto (create, create-drop, validate, update)\nspring.jpa.hibernate.ddl-auto = update\n\nserver.servlet.context-path=/springboot-crud-rest\n</code></pre>\n<p>Employee.java</p>\n<pre><code>package net.guides.springboot2.springboot2jpacrudexample.model;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;employees&quot;)\npublic class Employee {\n\n    private long id;\n    private String firstName;\n    private String lastName;\n    private String emailId;\n \n    public Employee() {\n  \n    }\n \n    public Employee(String firstName, String lastName, String emailId) {\n         this.firstName = firstName;\n         this.lastName = lastName;\n         this.emailId = emailId;\n    }\n \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n        public long getId() {\n        return id;\n    }\n    public void setId(long id) {\n        this.id = id;\n    }\n \n    @Column(name = &quot;first_name&quot;, nullable = false)\n    public String getFirstName() {\n        return firstName;\n    }\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n \n    @Column(name = &quot;last_name&quot;, nullable = false)\n    public String getLastName() {\n        return lastName;\n    }\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n \n    @Column(name = &quot;email_address&quot;, nullable = false)\n    public String getEmailId() {\n        return emailId;\n    }\n    public void setEmailId(String emailId) {\n        this.emailId = emailId;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Employee [id=&quot; + id + &quot;, firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;, emailId=&quot; + emailId\n       + &quot;]&quot;;\n    }\n \n}\n</code></pre>\n<p>EmployeeRepository.java</p>\n<pre><code>package net.guides.springboot2.springboot2jpacrudexample.repository;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport net.guides.springboot2.springboot2jpacrudexample.model.Employee;\n\n@Repository\npublic interface EmployeeRepository extends JpaRepository&lt;Employee, Long&gt;{\n\n}\n</code></pre>\n<p>EmployeeController.java</p>\n<pre><code>package net.guides.springboot2.springboot2jpacrudexample.controller;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport javax.validation.Valid;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.DeleteMapping;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.PutMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport net.guides.springboot2.springboot2jpacrudexample.exception.ResourceNotFoundException;\nimport net.guides.springboot2.springboot2jpacrudexample.model.Employee;\nimport net.guides.springboot2.springboot2jpacrudexample.repository.EmployeeRepository;\n\n@RestController @CrossOrigin(origins = &quot;http://localhost:4200&quot;)\n@RequestMapping(&quot;/api/v1&quot;)\npublic class EmployeeController {\n    @Autowired\n    private EmployeeRepository employeeRepository;\n\n    @GetMapping(&quot;/employees&quot;)\n    public List&lt;Employee&gt; getAllEmployees() {\n        return employeeRepository.findAll();\n    }\n\n    @GetMapping(&quot;/employees/{id}&quot;)\n    public ResponseEntity&lt;Employee&gt; getEmployeeById(@PathVariable(value = &quot;id&quot;) Long employeeId)\n        throws ResourceNotFoundException {\n        Employee employee = employeeRepository.findById(employeeId)\n          .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\n        return ResponseEntity.ok().body(employee);\n    }\n    \n    @PostMapping(&quot;/employees&quot;)\n    public Employee createEmployee(@Valid @RequestBody Employee employee) {\n        return employeeRepository.save(employee);\n    }\n\n    @PutMapping(&quot;/employees/{id}&quot;)\n    public ResponseEntity&lt;Employee&gt; updateEmployee(@PathVariable(value = &quot;id&quot;) Long employeeId,\n         @Valid @RequestBody Employee employeeDetails) throws ResourceNotFoundException {\n        Employee employee = employeeRepository.findById(employeeId)\n        .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\n\n        employee.setEmailId(employeeDetails.getEmailId());\n        employee.setLastName(employeeDetails.getLastName());\n        employee.setFirstName(employeeDetails.getFirstName());\n        final Employee updatedEmployee = employeeRepository.save(employee);\n        return ResponseEntity.ok(updatedEmployee);\n    }\n\n    @DeleteMapping(&quot;/employees/{id}&quot;)\n    public Map&lt;String, Boolean&gt; deleteEmployee(@PathVariable(value = &quot;id&quot;) Long employeeId)\n         throws ResourceNotFoundException {\n        Employee employee = employeeRepository.findById(employeeId)\n       .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;Employee not found for this id :: &quot; + employeeId));\n\n        employeeRepository.delete(employee);\n        Map&lt;String, Boolean&gt; response = new HashMap&lt;&gt;();\n        response.put(&quot;deleted&quot;, Boolean.TRUE);\n        return response;\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":8726421,"reputation":821,"user_id":15119028,"display_name":"Junaid Khalid"},"score":0,"creation_date":1647284409,"post_id":71472846,"comment_id":126328253,"body_markdown":"Make A the parent activity of the D","body":"Make A the parent activity of the D"},{"owner":{"account_id":9360759,"reputation":993,"user_id":6947156,"display_name":"Burhan Khanzada"},"score":0,"creation_date":1647287160,"post_id":71472846,"comment_id":126329164,"body_markdown":"it depends on how you manging navigation like raw using start activity or through jetpack navigation","body":"it depends on how you manging navigation like raw using start activity or through jetpack navigation"},{"owner":{"account_id":6571089,"reputation":389,"user_id":5079088,"display_name":"Steve Brown"},"score":0,"creation_date":1647341065,"post_id":71472846,"comment_id":126341351,"body_markdown":"&gt; Make A the parent activity of the D – Junaid Khalid\n\nInteresting. How?\n\nMainApplication.getTopActivity().startActivity(intent); does&#39;t work, I still go back in stack.","body":"&gt; Make A the parent activity of the D – Junaid Khalid  Interesting. How?  MainApplication.getTopActivity().startActivity(intent); does&#39;t work, I still go back in stack."}],"answers":[{"tags":[],"owner":{"account_id":6409843,"reputation":912,"user_id":4969957,"accept_rate":88,"display_name":"Saksham Khurana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647317738,"creation_date":1647317738,"answer_id":71477001,"question_id":71472846,"body_markdown":"you can also finish the activity when you leave them... eg when you navigate from B -&gt; C, you can finish activity B by calling `finish()` after intent.. and do the same with C -&gt; D.. so when you press back on D.. you will directly go to A","title":"How to remove all but one activity from the stack?","body":"<p>you can also finish the activity when you leave them... eg when you navigate from B -&gt; C, you can finish activity B by calling <code>finish()</code> after intent.. and do the same with C -&gt; D.. so when you press back on D.. you will directly go to A</p>\n"}],"owner":{"account_id":6571089,"reputation":389,"user_id":5079088,"display_name":"Steve Brown"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1647317738,"creation_date":1647283947,"question_id":71472846,"body_markdown":"I have activities like \r\nA, B, C\r\nThen I want to remove B, C and add D as a one after A (so that when we click BACK in D, we go to A).\r\n\r\nHow can I do it? Flags do not work, as they clear all, including A.","title":"How to remove all but one activity from the stack?","body":"<p>I have activities like\nA, B, C\nThen I want to remove B, C and add D as a one after A (so that when we click BACK in D, we go to A).</p>\n<p>How can I do it? Flags do not work, as they clear all, including A.</p>\n"},{"tags":["java","junit","netbeans"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1647269998,"post_id":71469810,"comment_id":126322790,"body_markdown":"Have you tried rebuilding your project?","body":"Have you tried rebuilding your project?"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1647270162,"post_id":71469810,"comment_id":126322851,"body_markdown":"&quot;when I do localDb.justForTest()&quot; sounds like you call these methods from a different class. How is this different class related to `LocalDb`? Is it in a different project?","body":"&quot;when I do localDb.justForTest()&quot; sounds like you call these methods from a different class. How is this different class related to <code>LocalDb</code>? Is it in a different project?"},{"owner":{"account_id":8468404,"reputation":2305,"user_id":6351897,"accept_rate":77,"display_name":"HelloWorld"},"score":0,"creation_date":1647275364,"post_id":71469810,"comment_id":126324987,"body_markdown":"@QBrute Yes I did (clean and buil)!","body":"@QBrute Yes I did (clean and buil)!"},{"owner":{"account_id":8468404,"reputation":2305,"user_id":6351897,"accept_rate":77,"display_name":"HelloWorld"},"score":0,"creation_date":1647275975,"post_id":71469810,"comment_id":126325224,"body_markdown":"@f1sh I use a singleton pattern (see my edit). THis is the same project and the same object. I wanted to summarize the issue but I meant `LocalDb localDb = new LocalDb()` and now with the edit it is `localDb = LocalDb.getInstance()`. Is it clearer :) ?","body":"@f1sh I use a singleton pattern (see my edit). THis is the same project and the same object. I wanted to summarize the issue but I meant <code>LocalDb localDb = new LocalDb()</code> and now with the edit it is <code>localDb = LocalDb.getInstance()</code>. Is it clearer :) ?"}],"owner":{"account_id":8468404,"reputation":2305,"user_id":6351897,"accept_rate":77,"display_name":"HelloWorld"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1647317464,"creation_date":1647269915,"question_id":71469810,"body_markdown":"I want to test a public method from a class that already has tests.\r\n\r\n```\r\npublic class LocalDb {\r\n  private final static LocalDb INSTANCE = new LocalDb();\r\n\r\n public synchronized static LocalDb getInstance() {\r\n   ...\r\n   return INSTANCE;\r\n }\r\n \r\n private LocalDb() {\r\n    }\r\n\r\n public boolean getSomething(){\r\n}\r\n\r\n public void justForTest(){\r\n       \r\n }\r\n\r\n}\r\n```\r\n\r\nHowever in my test, when I do `LocalDb.getInstance().justForTest()` I get `symbol not found` whereas `LocalDb.getInstance().getSomething()` is found and other tests within this Test Class run fine.\r\n\r\nThe only difference between the two is that getSomething was created months ago, whereas justForTest has just been created. No new method can be &quot;found&quot; in test class, whereas it can be found anywhereelse in code.\r\n\r\nEdit : If I use from the command line `mvn -Dtest=LocalDbTest#testJustForTest test` I don&#39;t get the &quot;Uncompilable code : cannot find symbol&quot; error I get in Netbeans and the test succeeds.\r\n\r\nI also tried to delete the project &quot;target&quot; directory, to &quot;clean and build&quot; the project, to restart Netbeans, to reboot the computer.\r\n\r\nWhat is happening ? I am using Netbeans 12.8.\r\n\r\nAny help appreciated\r\n","title":"Cannot find public method in test (Uncompilable code) in Netbeans (but works from command line)","body":"<p>I want to test a public method from a class that already has tests.</p>\n<pre><code>public class LocalDb {\n  private final static LocalDb INSTANCE = new LocalDb();\n\n public synchronized static LocalDb getInstance() {\n   ...\n   return INSTANCE;\n }\n \n private LocalDb() {\n    }\n\n public boolean getSomething(){\n}\n\n public void justForTest(){\n       \n }\n\n}\n</code></pre>\n<p>However in my test, when I do <code>LocalDb.getInstance().justForTest()</code> I get <code>symbol not found</code> whereas <code>LocalDb.getInstance().getSomething()</code> is found and other tests within this Test Class run fine.</p>\n<p>The only difference between the two is that getSomething was created months ago, whereas justForTest has just been created. No new method can be &quot;found&quot; in test class, whereas it can be found anywhereelse in code.</p>\n<p>Edit : If I use from the command line <code>mvn -Dtest=LocalDbTest#testJustForTest test</code> I don't get the &quot;Uncompilable code : cannot find symbol&quot; error I get in Netbeans and the test succeeds.</p>\n<p>I also tried to delete the project &quot;target&quot; directory, to &quot;clean and build&quot; the project, to restart Netbeans, to reboot the computer.</p>\n<p>What is happening ? I am using Netbeans 12.8.</p>\n<p>Any help appreciated</p>\n"},{"tags":["java","arguments","minecraft","args"],"answers":[{"tags":[],"owner":{"account_id":1006589,"reputation":551,"user_id":1020190,"display_name":"Taha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1632147412,"creation_date":1632147412,"answer_id":69255994,"question_id":69255792,"body_markdown":"You can start the `for-loop` from index one. That way the first argument will not be included at all.\r\n\r\n```java\r\nif (args.length &lt;= 0) {\r\n\tsender.sendMessage(ChatColor.RED + &quot;No player specified.&quot;);\r\n} else {\r\n\tif (args.length == 1) {\r\n\t\tsender.sendMessage(ChatColor.RED + &quot;No message specified&quot;);\r\n\t} else {\r\n\t\tStringBuilder message = new StringBuilder();\r\n\t\tfor (int i = 1; i &lt; args.length; i++) {\r\n\t\t\tmessage.append(args[i]);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n","title":"How do I remove an argument from a String without removing any potential duplicates?","body":"<p>You can start the <code>for-loop</code> from index one. That way the first argument will not be included at all.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (args.length &lt;= 0) {\n    sender.sendMessage(ChatColor.RED + &quot;No player specified.&quot;);\n} else {\n    if (args.length == 1) {\n        sender.sendMessage(ChatColor.RED + &quot;No message specified&quot;);\n    } else {\n        StringBuilder message = new StringBuilder();\n        for (int i = 1; i &lt; args.length; i++) {\n            message.append(args[i]);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19535278,"reputation":15,"user_id":14294193,"display_name":"Alty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":270,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69255994,"answer_count":1,"score":0,"last_activity_date":1647316373,"creation_date":1632146706,"question_id":69255792,"body_markdown":"I am currently working on a Java program that takes the arguments of a person&#39;s input (I figured that part out) and then adds it to a string to then send it to another person. However, I&#39;m stuck with this one part, where the first argument is not to be included in the message. I originally thought of `if (!arg.equals(args[0])){}`, but in the case where the first argument is mentioned again in the message, it also removes that from the message. How do I make it remove the first argument without getting rid of any others exactly like it?\r\n\r\nMy code right now:\r\n\r\n    if (args.length&lt;=0){\r\n                sender.sendMessage(ChatColor.RED + &quot;No player specified.&quot;);\r\n            } else {\r\n                if (args.length==1){\r\n                    sender.sendMessage(ChatColor.RED + &quot;No message specified&quot;);\r\n                } else {\r\n                    String message = &quot;&quot;;\r\n                    for (String arg : args){\r\n                        if (!arg.equals(args[0])){\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }","title":"How do I remove an argument from a String without removing any potential duplicates?","body":"<p>I am currently working on a Java program that takes the arguments of a person's input (I figured that part out) and then adds it to a string to then send it to another person. However, I'm stuck with this one part, where the first argument is not to be included in the message. I originally thought of <code>if (!arg.equals(args[0])){}</code>, but in the case where the first argument is mentioned again in the message, it also removes that from the message. How do I make it remove the first argument without getting rid of any others exactly like it?</p>\n<p>My code right now:</p>\n<pre><code>if (args.length&lt;=0){\n            sender.sendMessage(ChatColor.RED + &quot;No player specified.&quot;);\n        } else {\n            if (args.length==1){\n                sender.sendMessage(ChatColor.RED + &quot;No message specified&quot;);\n            } else {\n                String message = &quot;&quot;;\n                for (String arg : args){\n                    if (!arg.equals(args[0])){\n\n                    }\n                }\n            }\n        }\n</code></pre>\n"},{"tags":["java","sql","spring-data","hazelcast","spring-jdbc"],"answers":[{"tags":[],"owner":{"account_id":6696336,"reputation":478,"user_id":5164237,"display_name":"Vlado Schreiner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644592799,"creation_date":1644592799,"answer_id":71082459,"question_id":71081739,"body_markdown":"I see a few choices with different trade-offs:\r\n\r\n 1. Use an ORM library (e.g. Hibernate) with Hazelcast as a 2nd level cache. ORM fully manages the cache by caching the entities and queries automatically. You should however use the ORM API instead of the native SQL. That might require you to rewrite the app code.\r\n\r\n 2. Cache complete query results and use the SQL query as a key. This is the least invasive option and is just good enough if the DB data change rarely and you use the same SQL queries repeatedly. By using cache-aside pattern, the changes to your app will be minimal (https://hazelcast.com/blog/a-hitchhikers-guide-to-caching-patterns/)\r\n\r\n3. Query Hazelcast using SQL. This gives you most options to optimize the performance. Cache the DB tables you need and query Hazelcast using SQL. Might require rewriting the SQL queries to comply with Hazelcast SQL limitations: https://docs.hazelcast.com/hazelcast/5.1-beta-1/sql/sql-overview#limitations ","title":"Adapter/Mapper to translate SQL queries to Hazelcast predicates and/or SQL queries","body":"<p>I see a few choices with different trade-offs:</p>\n<ol>\n<li><p>Use an ORM library (e.g. Hibernate) with Hazelcast as a 2nd level cache. ORM fully manages the cache by caching the entities and queries automatically. You should however use the ORM API instead of the native SQL. That might require you to rewrite the app code.</p>\n</li>\n<li><p>Cache complete query results and use the SQL query as a key. This is the least invasive option and is just good enough if the DB data change rarely and you use the same SQL queries repeatedly. By using cache-aside pattern, the changes to your app will be minimal (<a href=\"https://hazelcast.com/blog/a-hitchhikers-guide-to-caching-patterns/\" rel=\"nofollow noreferrer\">https://hazelcast.com/blog/a-hitchhikers-guide-to-caching-patterns/</a>)</p>\n</li>\n<li><p>Query Hazelcast using SQL. This gives you most options to optimize the performance. Cache the DB tables you need and query Hazelcast using SQL. Might require rewriting the SQL queries to comply with Hazelcast SQL limitations: <a href=\"https://docs.hazelcast.com/hazelcast/5.1-beta-1/sql/sql-overview#limitations\" rel=\"nofollow noreferrer\">https://docs.hazelcast.com/hazelcast/5.1-beta-1/sql/sql-overview#limitations</a></p>\n</li>\n</ol>\n"}],"owner":{"account_id":24195814,"reputation":1,"user_id":18154392,"display_name":"Casual Gamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647315331,"creation_date":1644589746,"question_id":71081739,"body_markdown":"I am working with an application where we have SQL Server as a database. There is a requirement to add Hazelcast cache layer over the SQL Server. This is a legacy system and sort of works like SQL as a service where SQL queries to be executed against SQL Server DB are stored in a configuration table. For instance there is a UI for which data is returned by the query\r\n\r\n```sql\r\nSelect case when page &gt; 18 then &#39;Adult&#39; else &#39;Teen&#39; as Category, convert(varchar(20), p.registrationDate) as registeredOn from Person p\r\n``` \r\n\r\nThis is dynamically fetched and retrieved and executed against the database. There are many such views rendered off dynamic queries. With Hazelcast some of these SQL syntax will not just work. Is there any database abstraction framework or library or some adapter layer which can take in the SQL query and execute it against Hazelcast?","title":"Adapter/Mapper to translate SQL queries to Hazelcast predicates and/or SQL queries","body":"<p>I am working with an application where we have SQL Server as a database. There is a requirement to add Hazelcast cache layer over the SQL Server. This is a legacy system and sort of works like SQL as a service where SQL queries to be executed against SQL Server DB are stored in a configuration table. For instance there is a UI for which data is returned by the query</p>\n<pre class=\"lang-sql prettyprint-override\"><code>Select case when page &gt; 18 then 'Adult' else 'Teen' as Category, convert(varchar(20), p.registrationDate) as registeredOn from Person p\n</code></pre>\n<p>This is dynamically fetched and retrieved and executed against the database. There are many such views rendered off dynamic queries. With Hazelcast some of these SQL syntax will not just work. Is there any database abstraction framework or library or some adapter layer which can take in the SQL query and execute it against Hazelcast?</p>\n"},{"tags":["java","log4j2","disruptor-pattern"],"answers":[{"tags":[],"owner":{"account_id":47929,"reputation":4545,"user_id":142182,"accept_rate":78,"display_name":"Slugart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647315080,"creation_date":1647315080,"answer_id":71476712,"question_id":71468707,"body_markdown":"How would you prevent multiple producers from writing into the same slot?\r\n\r\nAsuming you are using the `MultiProducerSequencer`, a single producer can write into multiple slots by calling `next(int)` and multiple parallel producers can obviously write into slots in parallel either in single slots (`next()`) or batches (`next(int)`).","title":"Parallel Producers in Disruptor (Ring buffer) (used in log4j2)","body":"<p>How would you prevent multiple producers from writing into the same slot?</p>\n<p>Asuming you are using the <code>MultiProducerSequencer</code>, a single producer can write into multiple slots by calling <code>next(int)</code> and multiple parallel producers can obviously write into slots in parallel either in single slots (<code>next()</code>) or batches (<code>next(int)</code>).</p>\n"}],"owner":{"account_id":24554632,"reputation":1,"user_id":18463393,"display_name":"Apratim Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1647315080,"creation_date":1647265113,"question_id":71468707,"body_markdown":"So I understand the purpose of the LMX Disruptor algorithm (used in log4j2). My question is why can’t producers just write to multiple slots in the ring buffer in parallel. Why do we need a write pointer, since next sequence generator is assigning incrementing numbers to different processes. I understand that serialising writes (and write pointers), helps consumers to know up to which slot can be read. Is that the only reason?\r\n\r\n","title":"Parallel Producers in Disruptor (Ring buffer) (used in log4j2)","body":"<p>So I understand the purpose of the LMX Disruptor algorithm (used in log4j2). My question is why can’t producers just write to multiple slots in the ring buffer in parallel. Why do we need a write pointer, since next sequence generator is assigning incrementing numbers to different processes. I understand that serialising writes (and write pointers), helps consumers to know up to which slot can be read. Is that the only reason?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1647303042,"post_id":71475561,"comment_id":126332926,"body_markdown":"`return projectDataMap.stream().map(p -&gt; p.preview_description).peek(System.out::println).collect(Collectors.joining());` Please don&#39;t shout.","body":"<code>return projectDataMap.stream().map(p -&gt; p.preview_description).peek(System.out::println).collect(Col&zwnj;&#8203;lectors.joining());</code> Please don&#39;t shout."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647314075,"creation_date":1647314075,"answer_id":71476601,"question_id":71475561,"body_markdown":"For that, you have to invoke `stream()` method on the given list of projects. Then turn the stream of projects `Stream&lt;Project&gt;` into a stream of string by of strings by passing `Stream&lt;String&gt;` the following [*lambda expression*](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html) (or [*method reference*](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html)) into a `map` operation:\r\n```\r\nproject -&gt; project.getPreviewDescription() // or Project::getPreviewDescription\r\n```\r\n*Note that in Java (*contrary to other languages*), preferred way to access object properties is by using **getters**. And by [convention](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) names of methods and variables should be written in camel-case starting with lower-case letter.*\r\n\r\nIn order to join stream elements into a single `String` apply `collect` as a terminal operation by passing `Collectors.joining` as an argument.\r\n\r\nI assume you didn&#39;t want all the descriptions to jumbled together without any delimiters (*that is what your code does*), but rather intended to separate them somehow. Therefore, the following code uses newline `&quot;\\n&quot;` as a delimiter.\r\n\r\n    public static String getGlobalPreviewDesc(List&lt;Project&gt; projectDataMap) {\r\n        return projectDataMap.stream()               // Stream&lt;Project&gt;\r\n                .map(Project::getPreviewDescription) // Stream&lt;String&gt;\r\n                .collect(Collectors.joining(&quot;\\n&quot;));\r\n    }\r\n\r\n[*For more information on streams take a look at this tutorial*](https://docs.oracle.com/javase/tutorial/collections/streams/)","title":"How to implement this logic using Streams","body":"<p>For that, you have to invoke <code>stream()</code> method on the given list of projects. Then turn the stream of projects <code>Stream&lt;Project&gt;</code> into a stream of string by of strings by passing <code>Stream&lt;String&gt;</code> the following <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\"><em>lambda expression</em></a> (or <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\"><em>method reference</em></a>) into a <code>map</code> operation:</p>\n<pre><code>project -&gt; project.getPreviewDescription() // or Project::getPreviewDescription\n</code></pre>\n<p><em>Note that in Java (<em>contrary to other languages</em>), preferred way to access object properties is by using <strong>getters</strong>. And by <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">convention</a> names of methods and variables should be written in camel-case starting with lower-case letter.</em></p>\n<p>In order to join stream elements into a single <code>String</code> apply <code>collect</code> as a terminal operation by passing <code>Collectors.joining</code> as an argument.</p>\n<p>I assume you didn't want all the descriptions to jumbled together without any delimiters (<em>that is what your code does</em>), but rather intended to separate them somehow. Therefore, the following code uses newline <code>&quot;\\n&quot;</code> as a delimiter.</p>\n<pre><code>public static String getGlobalPreviewDesc(List&lt;Project&gt; projectDataMap) {\n    return projectDataMap.stream()               // Stream&lt;Project&gt;\n            .map(Project::getPreviewDescription) // Stream&lt;String&gt;\n            .collect(Collectors.joining(&quot;\\n&quot;));\n}\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/\" rel=\"nofollow noreferrer\"><em>For more information on streams take a look at this tutorial</em></a></p>\n"}],"owner":{"account_id":19075473,"reputation":11,"user_id":13928839,"display_name":"Raviraj Savaliya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1647314748,"creation_date":1647302935,"question_id":71475561,"body_markdown":"I want to change the following code into a stream. Functionality should be the same, but I want to do it with streams.\r\n\r\n\r\n    public static String getGlobalPreviewDesc(List&lt;Project&gt; projectDataMap) {\r\n        StringBuilder globalPreviewDesc = new StringBuilder();\r\n        for (Project project : projectDataMap) {\r\n            globalPreviewDesc.append(project.preview_description);\r\n        }\r\n        System.out.println(globalPreviewDesc);\r\n\r\n        return globalPreviewDesc.toString();\r\n    }","title":"How to implement this logic using Streams","body":"<p>I want to change the following code into a stream. Functionality should be the same, but I want to do it with streams.</p>\n<pre><code>public static String getGlobalPreviewDesc(List&lt;Project&gt; projectDataMap) {\n    StringBuilder globalPreviewDesc = new StringBuilder();\n    for (Project project : projectDataMap) {\n        globalPreviewDesc.append(project.preview_description);\n    }\n    System.out.println(globalPreviewDesc);\n\n    return globalPreviewDesc.toString();\n}\n</code></pre>\n"},{"tags":["java","git","docker","openjdk-17"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":2,"creation_date":1646984194,"post_id":71433911,"comment_id":126262982,"body_markdown":"I would build my own image, `FROM openjdk:17.0.2-jdk` and install git with `RUN microdnf install git`. Then use this image for the build system.","body":"I would build my own image, <code>FROM openjdk:17.0.2-jdk</code> and install git with <code>RUN microdnf install git</code>. Then use this image for the build system."}],"answers":[{"tags":[],"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1647311680,"creation_date":1647311680,"answer_id":71476383,"question_id":71433911,"body_markdown":"`microdnf install git` to install git.\r\n\r\nNeed to execute bash explicitly if you want to connect and run commands.","title":"How to install Git on the standard openjdk docker image?","body":"<p><code>microdnf install git</code> to install git.</p>\n<p>Need to execute bash explicitly if you want to connect and run commands.</p>\n"}],"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2264,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71476383,"answer_count":1,"score":2,"last_activity_date":1647311680,"creation_date":1646975462,"question_id":71433911,"body_markdown":"Recently started upgrading my app from JDK 8 to 17.\r\n\r\nMy build infrastructure uses docker containers.  Previously, I was using `openjdk:8u322-jdk`.  So I bumped the docker image to `openjdk:17.0.2-jdk`, but things&#39;ve changed drastically.\r\n\r\nThere&#39;s no Git installed by default now, I think the underlying OS has changed and the default CMD is &quot;jshell&quot;, whatever that is o_O\r\n\r\nI don&#39;t want to spend time faffing about creating my own docker image with the needed tools installed.\r\nAt the end of the day, I just need to run two commands on the build container: `git clone` and `gradlew`.\r\n\r\nWhat do I need to run to get Git installed so I can run a `git clone` and `gradlew`?\r\n\r\n","title":"How to install Git on the standard openjdk docker image?","body":"<p>Recently started upgrading my app from JDK 8 to 17.</p>\n<p>My build infrastructure uses docker containers.  Previously, I was using <code>openjdk:8u322-jdk</code>.  So I bumped the docker image to <code>openjdk:17.0.2-jdk</code>, but things've changed drastically.</p>\n<p>There's no Git installed by default now, I think the underlying OS has changed and the default CMD is &quot;jshell&quot;, whatever that is o_O</p>\n<p>I don't want to spend time faffing about creating my own docker image with the needed tools installed.\nAt the end of the day, I just need to run two commands on the build container: <code>git clone</code> and <code>gradlew</code>.</p>\n<p>What do I need to run to get Git installed so I can run a <code>git clone</code> and <code>gradlew</code>?</p>\n"},{"tags":["java","performance","concurrency"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1558224468,"post_id":56203500,"comment_id":99029776,"body_markdown":"`String.intern` uses a [hash table](https://en.wikipedia.org/wiki/Hash_table) (a structure), but not `java.util.Hashtable` class.","body":"<code>String.intern</code> uses a <a href=\"https://en.wikipedia.org/wiki/Hash_table\" rel=\"nofollow noreferrer\">hash table</a> (a structure), but not <code>java.util.Hashtable</code> class."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1647311382,"creation_date":1558225728,"answer_id":56203867,"question_id":56203500,"body_markdown":"There are a number of things going on here:\r\n\r\n  1.  Your benchmarks have very large error bars.  The repeat counts are probably too small.  This makes the results *questionable*.\r\n\r\n  2.  It doesn&#39;t look like your benchmarks are resetting the &quot;interned string&quot; caches after each run&lt;sup&gt;1&lt;/sup&gt;.  So that means that the caches are growing, and each repetition will be starting with different conditions.   This may explain the error bars ...\r\n\r\n  3.  Your `ConcurrentHashMap` is not functionally equivalent to `String::intern`.    The latter uses a native equivalent to `Reference` objects to ensure that interned strings can be garbage collected.  Your `ConcurrentHashMap` implementation doesn&#39;t.  Why does this matter?\r\n\r\n       - Your `ConcurrentHashMap` is a massive memory leak.   \r\n       - A reference mechanism is expensive ... at GC time.  (Though possibly less expensive&lt;sup&gt;2&lt;/sup&gt; than a memory leak.)\r\n\r\n---------------\r\n\r\n&gt; String.intern() slower than ConcurrentHashMap because String.intern() is native HashTable implementation. \r\n\r\nNo. The real reason is that the native implementation is doing things differently:\r\n\r\n  - The internal representations are different.  The native (`intern`) string pool uses a custom hash table implemented in native code.\r\n  - It has to handle references which impacts on GC performance.\r\n  - There are also behind-the-scenes interactions with string deduping and other things.\r\n\r\nNote that these things vary considerably across different Java versions.\r\n\r\n&gt; This is very confusing situation. It recommend ConcurrentHashMap, but it using HashTable although performance penalty. \r\n\r\nNow you are talking about a different scenario, that is not relevant to what you are doing.\r\n\r\n   - Note that `String::intern` doesn&#39;t use either `HashTable` or `HashMap`; see above.\r\n\r\n   - The quote that you found is about how to get good **concurrent** performance from a hash table.  Your benchmark is (AFAIK) single threaded.   For a serial use-use case, `HashMap` will give better performance than the others.\r\n\r\n&gt; Does anyone have any idea about why used native `HashTable` implementation instance of `ConcurrentHashMap` ?\r\n\r\nIt doesn&#39;t use a hash table; see above.  There are a number of reason that it doesn&#39;t `HashTable` or `HashMap` or `ConcurrentHashMap`:\r\n\r\n  - It is that it is paying  more attention to memory utilization.  All of the Java hash table implementations are *memory hungry* and that makes them unsuitable for general purpose string interning.  \r\n  - The memory and CPU overheads of using `Reference` classes are significant.\r\n  - Computing a hash of a newly created string of length N is O(N) which will be significant when interning strings that may be hundreds / thousands of characters long. \r\n\r\n-------------\r\n\r\nFinally, be carefully that you are not focusing on the wrong problem here.  If you are trying to optimize interning because it is a bottleneck in your application, the other strategy is to not intern at all.  In practice, it rarely saved memory (especially compared with G1GC&#39;s string de-duping) and rarely improves string handling performance.\r\n\r\n-------------\r\n\r\nIn summary:\r\n  \r\n   - You are comparing apples and oranges.  Your map-base implementation is not equivalent to native interning.\r\n   - `String::intern` is not optimized solely (even primarily) for speed.\r\n   - By focusing on speed, you are ignoring memory utilization ... and the secondary effect of memory utilization on speed.\r\n   - Consider the potential optimization of not interning at all.\r\n\r\n-------------\r\n\r\n&lt;sup&gt;1 - And in the native `intern` case, I don&#39;t think that is possible.&lt;br&gt;\r\n2 - A Java memory leak in the regular heap impacts on long-term GC performance because the retained objects need to be repeatedly marked and copied by the GC.  There may be secondary effects too.&lt;/sup&gt;","title":"Java String.intern() use HashTable instead of ConcurrentHashMap","body":"<p>There are a number of things going on here:</p>\n<ol>\n<li><p>Your benchmarks have very large error bars.  The repeat counts are probably too small.  This makes the results <em>questionable</em>.</p>\n</li>\n<li><p>It doesn't look like your benchmarks are resetting the &quot;interned string&quot; caches after each run<sup>1</sup>.  So that means that the caches are growing, and each repetition will be starting with different conditions.   This may explain the error bars ...</p>\n</li>\n<li><p>Your <code>ConcurrentHashMap</code> is not functionally equivalent to <code>String::intern</code>.    The latter uses a native equivalent to <code>Reference</code> objects to ensure that interned strings can be garbage collected.  Your <code>ConcurrentHashMap</code> implementation doesn't.  Why does this matter?</p>\n<ul>\n<li>Your <code>ConcurrentHashMap</code> is a massive memory leak.</li>\n<li>A reference mechanism is expensive ... at GC time.  (Though possibly less expensive<sup>2</sup> than a memory leak.)</li>\n</ul>\n</li>\n</ol>\n<hr />\n<blockquote>\n<p>String.intern() slower than ConcurrentHashMap because String.intern() is native HashTable implementation.</p>\n</blockquote>\n<p>No. The real reason is that the native implementation is doing things differently:</p>\n<ul>\n<li>The internal representations are different.  The native (<code>intern</code>) string pool uses a custom hash table implemented in native code.</li>\n<li>It has to handle references which impacts on GC performance.</li>\n<li>There are also behind-the-scenes interactions with string deduping and other things.</li>\n</ul>\n<p>Note that these things vary considerably across different Java versions.</p>\n<blockquote>\n<p>This is very confusing situation. It recommend ConcurrentHashMap, but it using HashTable although performance penalty.</p>\n</blockquote>\n<p>Now you are talking about a different scenario, that is not relevant to what you are doing.</p>\n<ul>\n<li><p>Note that <code>String::intern</code> doesn't use either <code>HashTable</code> or <code>HashMap</code>; see above.</p>\n</li>\n<li><p>The quote that you found is about how to get good <strong>concurrent</strong> performance from a hash table.  Your benchmark is (AFAIK) single threaded.   For a serial use-use case, <code>HashMap</code> will give better performance than the others.</p>\n</li>\n</ul>\n<blockquote>\n<p>Does anyone have any idea about why used native <code>HashTable</code> implementation instance of <code>ConcurrentHashMap</code> ?</p>\n</blockquote>\n<p>It doesn't use a hash table; see above.  There are a number of reason that it doesn't <code>HashTable</code> or <code>HashMap</code> or <code>ConcurrentHashMap</code>:</p>\n<ul>\n<li>It is that it is paying  more attention to memory utilization.  All of the Java hash table implementations are <em>memory hungry</em> and that makes them unsuitable for general purpose string interning.</li>\n<li>The memory and CPU overheads of using <code>Reference</code> classes are significant.</li>\n<li>Computing a hash of a newly created string of length N is O(N) which will be significant when interning strings that may be hundreds / thousands of characters long.</li>\n</ul>\n<hr />\n<p>Finally, be carefully that you are not focusing on the wrong problem here.  If you are trying to optimize interning because it is a bottleneck in your application, the other strategy is to not intern at all.  In practice, it rarely saved memory (especially compared with G1GC's string de-duping) and rarely improves string handling performance.</p>\n<hr />\n<p>In summary:</p>\n<ul>\n<li>You are comparing apples and oranges.  Your map-base implementation is not equivalent to native interning.</li>\n<li><code>String::intern</code> is not optimized solely (even primarily) for speed.</li>\n<li>By focusing on speed, you are ignoring memory utilization ... and the secondary effect of memory utilization on speed.</li>\n<li>Consider the potential optimization of not interning at all.</li>\n</ul>\n<hr />\n<p><sup>1 - And in the native <code>intern</code> case, I don't think that is possible.<br>\n2 - A Java memory leak in the regular heap impacts on long-term GC performance because the retained objects need to be repeatedly marked and copied by the GC.  There may be secondary effects too.</sup></p>\n"}],"owner":{"account_id":10837897,"reputation":667,"user_id":7970245,"display_name":"Turac"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":56203867,"answer_count":1,"score":1,"last_activity_date":1647311382,"creation_date":1558220581,"question_id":56203500,"body_markdown":"I am research String.intern() and this method have a performance penalty. I&#39;ve compared String.intern() with ConcurrentHashMap.putIfAbsent(s,s) with Microbenchmark. Used Java1.8.0_212, Ubuntu 18.04.2 LTS\r\n\r\n\r\n    @Param({&quot;1&quot;, &quot;100&quot;, &quot;10000&quot;, &quot;1000000&quot;})\r\n    private int size;\r\n\r\n    private StringIntern stringIntern;\r\n    private ConcurrentHashMapIntern concurrentHashMapIntern;\r\n\r\n    @Setup\r\n    public void setup(){\r\n        stringIntern = new StringIntern();\r\n        concurrentHashMapIntern = new ConcurrentHashMapIntern();\r\n    }\r\n    public static class StringIntern{\r\n        public String intern(String s){\r\n            return s.intern();\r\n        }\r\n    }\r\n    public static class ConcurrentHashMapIntern{\r\n        private final Map&lt;String, String&gt; map;\r\n\r\n        public ConcurrentHashMapIntern(){\r\n            map= new ConcurrentHashMap&lt;&gt;();\r\n        }\r\n        public String intern(String s){\r\n            String existString = map.putIfAbsent(s, s);\r\n            return (existString == null) ? s : existString;\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void intern(Blackhole blackhole){\r\n        for(int count =0; count&lt;size; count ++){\r\n            blackhole.consume(stringIntern.intern(&quot;Example &quot;+count));\r\n        }\r\n    }\r\n    @Benchmark\r\n    public void concurrentHashMapIntern(Blackhole blackhole){\r\n        for(int count =0; count&lt;size; count++){\r\n            blackhole.consume(concurrentHashMapIntern.intern(&quot;Example &quot; +count));\r\n        }\r\n    }\r\n\r\nResult as expected. ConcurrentHashMap faster than String.intern() when search string.\r\n\r\n    Benchmark                             (size)  Mode  Cnt        Score        Error  Units\r\n    MyBenchmark.concurrentHashMapIntern        1  avgt    5        0.056 &#177;      0.007  us/op\r\n    MyBenchmark.concurrentHashMapIntern      100  avgt    5        6.094 &#177;      2.359  us/op\r\n    MyBenchmark.concurrentHashMapIntern    10000  avgt    5      787.802 &#177;    264.179  us/op\r\n    MyBenchmark.concurrentHashMapIntern  1000000  avgt    5   136504.010 &#177;  17872.866  us/op\r\n    MyBenchmark.intern                         1  avgt    5        0.129 &#177;      0.007  us/op\r\n    MyBenchmark.intern                       100  avgt    5       13.700 &#177;      2.404  us/op\r\n    MyBenchmark.intern                     10000  avgt    5     1618.514 &#177;    460.563  us/op\r\n    MyBenchmark.intern                   1000000  avgt    5  1027915.854 &#177; 638910.023  us/op\r\n\r\n\r\nString.intern() slower than ConcurrentHashMap because String.intern() is native HashTable implementation. And then, read [javadoc][1] about HashTable, this documantation says:\r\n\r\n&gt; If a thread-safe implementation is not needed, it is recommended to use HashMap in place of Hashtable. If a thread-safe highly-concurrent implementation is desired, then it is recommended to use ConcurrentHashMap in place of Hashtable.\r\n\r\nThis is very confusing situation. It recommend ConcurrentHashMap, but it using HashTable although performance penalty.  Does anyone have any idea about why used native HashTable implemantation instance of ConcurrentHashMap ?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Hashtable.html","title":"Java String.intern() use HashTable instead of ConcurrentHashMap","body":"<p>I am research String.intern() and this method have a performance penalty. I've compared String.intern() with ConcurrentHashMap.putIfAbsent(s,s) with Microbenchmark. Used Java1.8.0_212, Ubuntu 18.04.2 LTS</p>\n\n<pre><code>@Param({\"1\", \"100\", \"10000\", \"1000000\"})\nprivate int size;\n\nprivate StringIntern stringIntern;\nprivate ConcurrentHashMapIntern concurrentHashMapIntern;\n\n@Setup\npublic void setup(){\n    stringIntern = new StringIntern();\n    concurrentHashMapIntern = new ConcurrentHashMapIntern();\n}\npublic static class StringIntern{\n    public String intern(String s){\n        return s.intern();\n    }\n}\npublic static class ConcurrentHashMapIntern{\n    private final Map&lt;String, String&gt; map;\n\n    public ConcurrentHashMapIntern(){\n        map= new ConcurrentHashMap&lt;&gt;();\n    }\n    public String intern(String s){\n        String existString = map.putIfAbsent(s, s);\n        return (existString == null) ? s : existString;\n    }\n}\n\n@Benchmark\npublic void intern(Blackhole blackhole){\n    for(int count =0; count&lt;size; count ++){\n        blackhole.consume(stringIntern.intern(\"Example \"+count));\n    }\n}\n@Benchmark\npublic void concurrentHashMapIntern(Blackhole blackhole){\n    for(int count =0; count&lt;size; count++){\n        blackhole.consume(concurrentHashMapIntern.intern(\"Example \" +count));\n    }\n}\n</code></pre>\n\n<p>Result as expected. ConcurrentHashMap faster than String.intern() when search string.</p>\n\n<pre><code>Benchmark                             (size)  Mode  Cnt        Score        Error  Units\nMyBenchmark.concurrentHashMapIntern        1  avgt    5        0.056 ±      0.007  us/op\nMyBenchmark.concurrentHashMapIntern      100  avgt    5        6.094 ±      2.359  us/op\nMyBenchmark.concurrentHashMapIntern    10000  avgt    5      787.802 ±    264.179  us/op\nMyBenchmark.concurrentHashMapIntern  1000000  avgt    5   136504.010 ±  17872.866  us/op\nMyBenchmark.intern                         1  avgt    5        0.129 ±      0.007  us/op\nMyBenchmark.intern                       100  avgt    5       13.700 ±      2.404  us/op\nMyBenchmark.intern                     10000  avgt    5     1618.514 ±    460.563  us/op\nMyBenchmark.intern                   1000000  avgt    5  1027915.854 ± 638910.023  us/op\n</code></pre>\n\n<p>String.intern() slower than ConcurrentHashMap because String.intern() is native HashTable implementation. And then, read <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Hashtable.html\" rel=\"nofollow noreferrer\">javadoc</a> about HashTable, this documantation says:</p>\n\n<blockquote>\n  <p>If a thread-safe implementation is not needed, it is recommended to use HashMap in place of Hashtable. If a thread-safe highly-concurrent implementation is desired, then it is recommended to use ConcurrentHashMap in place of Hashtable.</p>\n</blockquote>\n\n<p>This is very confusing situation. It recommend ConcurrentHashMap, but it using HashTable although performance penalty.  Does anyone have any idea about why used native HashTable implemantation instance of ConcurrentHashMap ?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8476,"page":1516,"page_size":100}
