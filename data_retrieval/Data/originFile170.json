{"items":[{"tags":["java","spring-boot","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669657671,"creation_date":1669657671,"answer_id":74604577,"question_id":74604442,"body_markdown":"Ugh -- use Spring&#39;s `FileSystemResource`:\r\n\r\n```\r\nvar uploadFile = new File(home+&quot;/upload.csv&quot;);\r\n\r\nvar multipartBodyBuilder = new MultipartBodyBuilder();\r\nmultipartBodyBuilder.part(&quot;file&quot;, new FileSystemResource(uploadFile));\r\n\r\nvar mimeMultipartData = multipartBodyBuilder.build();\r\n```\r\nand everything works fine.","title":"Spring WebClient multi-part file upload","body":"<p>Ugh -- use Spring's <code>FileSystemResource</code>:</p>\n<pre><code>var uploadFile = new File(home+&quot;/upload.csv&quot;);\n\nvar multipartBodyBuilder = new MultipartBodyBuilder();\nmultipartBodyBuilder.part(&quot;file&quot;, new FileSystemResource(uploadFile));\n\nvar mimeMultipartData = multipartBodyBuilder.build();\n</code></pre>\n<p>and everything works fine.</p>\n"},{"tags":[],"owner":{"account_id":16535035,"reputation":437,"user_id":11947303,"display_name":"CodeSlave"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695306481,"creation_date":1695306481,"answer_id":77151209,"question_id":74604442,"body_markdown":"This worked for me:\r\n\r\n    private static MultipartInserter getMultiPartFile(MultipartFile file) {\r\n        MultipartBodyBuilder builder = new MultipartBodyBuilder();\r\n        builder.part(&quot;file&quot;, file.getResource());\r\n\r\n        return BodyInserters.fromMultipartData(builder.build());\r\n    }\r\n\r\nand I used it here:\r\n\r\n              return client.post()\r\n                           .uri(exampleUri)\r\n                           .contentType(MediaType.MULTIPART_FORM_DATA)\r\n                           .body(getMultiPartFile(file))\r\n                           .retrieve()\r\n                           .toEntity(Example.class)\r\n                           .block();","title":"Spring WebClient multi-part file upload","body":"<p>This worked for me:</p>\n<pre><code>private static MultipartInserter getMultiPartFile(MultipartFile file) {\n    MultipartBodyBuilder builder = new MultipartBodyBuilder();\n    builder.part(&quot;file&quot;, file.getResource());\n\n    return BodyInserters.fromMultipartData(builder.build());\n}\n</code></pre>\n<p>and I used it here:</p>\n<pre><code>          return client.post()\n                       .uri(exampleUri)\n                       .contentType(MediaType.MULTIPART_FORM_DATA)\n                       .body(getMultiPartFile(file))\n                       .retrieve()\n                       .toEntity(Example.class)\n                       .block();\n</code></pre>\n"}],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3580,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74604577,"answer_count":2,"score":1,"last_activity_date":1695306481,"creation_date":1669656959,"question_id":74604442,"body_markdown":"A simple Spring Boot 2.7.5 WebClient application fails with a 400 BAD REQUEST:\r\n\r\n```\r\nvar home = &quot;/home/me&quot;;\r\n\r\nvar uploadFile = new File(home+&quot;/upload.csv&quot;);\t \r\nvar uploadPath = uploadFile.toPath();\r\nvar uploadContent = Files.readString(uploadPath);\r\n\r\nvar multipartBodyBuilder = new MultipartBodyBuilder();\r\nmultipartBodyBuilder.part(&quot;file&quot;, uploadPath);\r\n//multipartBodyBuilder.part(&quot;file&quot;, uploadFile);\r\nvar mimeMultipartData = multipartBodyBuilder.build();\r\n\r\nvar configuration = new Configuration(/* ... */);\r\n\r\nvar webClient = WebClient.builder()\r\n        .baseUrl(_baseUrl(configuration.getEndpoint()))\r\n        .filters( filters -&gt; {\r\n            filters.add(authentication(configuration));\r\n\r\n            if (configuration.capturePackets()) {\r\n                filters.add(captureRequest());\r\n                filters.add(captureResponse());\r\n            }\r\n        })\r\n        .build();\r\n\r\nMono&lt;HttpStatus&gt; httpStatusMono = webClient\r\n     .post()\r\n     .uri(URI.create(&quot;http://localhost:8080/api/marketplaces/1/holdings/uploads&quot;))\r\n\t .body(BodyInserters.fromMultipartData(mimeMultipartData))\r\n\t .retrieve()\r\n\t .bodyToMono(HttpStatus.class);\r\n```\r\n\r\nagainst a Spring Boot 2.7.5 multi-part file upload API:\r\n\r\n```\r\n    @PostMapping(&quot;/uploads&quot;)\r\n    public ResponseEntity&lt;?&gt; uploads(@RequestParam(value=&quot;file&quot;, required=true) MultipartFile file) throws IOException {\r\n        try (InputStream input = file.getInputStream()) {\r\n            doSomething(input);\r\n        }\r\n        return ResponseEntity.ok().build();\r\n    }\r\n```\r\n\r\nThe bad request exception is:\r\n\r\n```\r\norg.springframework.web.reactive.function.client.WebClientResponseException$BadRequest: 400 Bad Request from POST http://localhost:8080/api/uploads\r\n\tat org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:217)\r\n\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \r\nError has been observed at the following site(s):\r\n\t*__checkpoint ⇢ 400 from POST http://localhost:8080/api/uploads [DefaultWebClient]\r\nOriginal Stack Trace:\r\n\t\tat org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:217)\r\n\t\tat org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:207)\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)\r\n\t\tat reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)\r\n\t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:109)\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)\r\n\t\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)\r\n\t\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onComplete(FluxFilterFuseable.java:391)\r\n\t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1817)\r\n\t\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n\t\tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:400)\r\n\t\tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:419)\r\n\t\tat reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:473)\r\n\t\tat reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:702)\r\n\t\tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\t\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\t\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n\t\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:336)\r\n\t\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:308)\r\n\t\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\t\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\t\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\t\tat io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:800)\r\n\t\tat io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:499)\r\n\t\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397)\r\n\t\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\t\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\t\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tSuppressed: java.lang.Exception: #block terminated with an error\r\n\t\tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99)\r\n\t\tat reactor.core.publisher.Mono.block(Mono.java:1707)\r\n\t\tat UploadsTest.springUpload(UploadsTest.java:165)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\t\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\t\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\t\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\t\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\t\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\t\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\t\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\t\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\t\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\t\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\t\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\t\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\t\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\t\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\t\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\t\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\t\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\t\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\t\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\t\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\t\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\t\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\t\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\t\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\r\n\t\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\r\n\t\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\r\n\t\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\t\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\t\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\t\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\t\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\t\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n```\r\n\r\nThis simple post from curl works fine:\r\n\r\n```\r\ncurl -X POST -v --user &quot;username:password&quot; -H &quot;Content-Type: multipart/form-data&quot; \\\\\r\n     --form file=@upload.csv  http://localhost:8080/api/uploads\r\n```\r\n\r\nas does this Angular POST (not shown is the authentication interceptor):\r\n\r\n```\r\nupload(file: File): Observable&lt;any&gt; {\r\n    const formData: FormData = new FormData()\r\n\r\n    formData.append(&#39;file&#39;, file, file.name);\r\n\r\n    const observable: Observable&lt;any&gt; = this._http\r\n      .post(url, formData)\r\n      .pipe(\r\n        // map(response =&gt; response),\r\n        share()\r\n    );\r\n```\r\n\r\nAny ideas on how to get the Spring WebClient API to work like the curl &amp; Angular clients?","title":"Spring WebClient multi-part file upload","body":"<p>A simple Spring Boot 2.7.5 WebClient application fails with a 400 BAD REQUEST:</p>\n<pre><code>var home = &quot;/home/me&quot;;\n\nvar uploadFile = new File(home+&quot;/upload.csv&quot;);   \nvar uploadPath = uploadFile.toPath();\nvar uploadContent = Files.readString(uploadPath);\n\nvar multipartBodyBuilder = new MultipartBodyBuilder();\nmultipartBodyBuilder.part(&quot;file&quot;, uploadPath);\n//multipartBodyBuilder.part(&quot;file&quot;, uploadFile);\nvar mimeMultipartData = multipartBodyBuilder.build();\n\nvar configuration = new Configuration(/* ... */);\n\nvar webClient = WebClient.builder()\n        .baseUrl(_baseUrl(configuration.getEndpoint()))\n        .filters( filters -&gt; {\n            filters.add(authentication(configuration));\n\n            if (configuration.capturePackets()) {\n                filters.add(captureRequest());\n                filters.add(captureResponse());\n            }\n        })\n        .build();\n\nMono&lt;HttpStatus&gt; httpStatusMono = webClient\n     .post()\n     .uri(URI.create(&quot;http://localhost:8080/api/marketplaces/1/holdings/uploads&quot;))\n     .body(BodyInserters.fromMultipartData(mimeMultipartData))\n     .retrieve()\n     .bodyToMono(HttpStatus.class);\n</code></pre>\n<p>against a Spring Boot 2.7.5 multi-part file upload API:</p>\n<pre><code>    @PostMapping(&quot;/uploads&quot;)\n    public ResponseEntity&lt;?&gt; uploads(@RequestParam(value=&quot;file&quot;, required=true) MultipartFile file) throws IOException {\n        try (InputStream input = file.getInputStream()) {\n            doSomething(input);\n        }\n        return ResponseEntity.ok().build();\n    }\n</code></pre>\n<p>The bad request exception is:</p>\n<pre><code>org.springframework.web.reactive.function.client.WebClientResponseException$BadRequest: 400 Bad Request from POST http://localhost:8080/api/uploads\n    at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:217)\n    Suppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \nError has been observed at the following site(s):\n    *__checkpoint ⇢ 400 from POST http://localhost:8080/api/uploads [DefaultWebClient]\nOriginal Stack Trace:\n        at org.springframework.web.reactive.function.client.WebClientResponseException.create(WebClientResponseException.java:217)\n        at org.springframework.web.reactive.function.client.DefaultClientResponse.lambda$createException$1(DefaultClientResponse.java:207)\n        at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)\n        at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:109)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)\n        at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)\n        at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onComplete(FluxFilterFuseable.java:391)\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1817)\n        at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:160)\n        at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\n        at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n        at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:400)\n        at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:419)\n        at reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:473)\n        at reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:702)\n        at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n        at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n        at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n        at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:336)\n        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:308)\n        at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n        at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n        at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:800)\n        at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:499)\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:397)\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n    Suppressed: java.lang.Exception: #block terminated with an error\n        at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99)\n        at reactor.core.publisher.Mono.block(Mono.java:1707)\n        at UploadsTest.springUpload(UploadsTest.java:165)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n        at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n        at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n        at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n        at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n        at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n        at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n        at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n        at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n        at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n        at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n        at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:95)\n        at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:91)\n        at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:60)\n        at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n        at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\n        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\n        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\n        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\n        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>This simple post from curl works fine:</p>\n<pre><code>curl -X POST -v --user &quot;username:password&quot; -H &quot;Content-Type: multipart/form-data&quot; \\\\\n     --form file=@upload.csv  http://localhost:8080/api/uploads\n</code></pre>\n<p>as does this Angular POST (not shown is the authentication interceptor):</p>\n<pre><code>upload(file: File): Observable&lt;any&gt; {\n    const formData: FormData = new FormData()\n\n    formData.append('file', file, file.name);\n\n    const observable: Observable&lt;any&gt; = this._http\n      .post(url, formData)\n      .pipe(\n        // map(response =&gt; response),\n        share()\n    );\n</code></pre>\n<p>Any ideas on how to get the Spring WebClient API to work like the curl &amp; Angular clients?</p>\n"},{"tags":["java","selenium-webdriver","selenium-jupiter"],"answers":[{"tags":[],"owner":{"account_id":4420200,"reputation":4708,"user_id":3877746,"accept_rate":100,"display_name":"Boni Garc&#237;a"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695306228,"creation_date":1695306228,"answer_id":77151168,"question_id":77150945,"body_markdown":"This is not possible in the current implementation of Selenium Manager, since browsers are always disposed after each test. But you can introduce a custom wait after each test to manually inspect your browser, for instance, as follows:\r\n\r\n    @AfterEach\r\n    void teardown() throws InterruptedException {\r\n        Thread.sleep(60000);\r\n    }","title":"How to prevent SeleniumJupiter from quit the driver?","body":"<p>This is not possible in the current implementation of Selenium Manager, since browsers are always disposed after each test. But you can introduce a custom wait after each test to manually inspect your browser, for instance, as follows:</p>\n<pre><code>@AfterEach\nvoid teardown() throws InterruptedException {\n    Thread.sleep(60000);\n}\n</code></pre>\n"}],"owner":{"account_id":22764027,"reputation":11,"user_id":16922382,"display_name":"ladida"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695306269,"creation_date":1695304555,"question_id":77150945,"body_markdown":"Selenium Jupiter run driver.quit() automatically after every test. But in some cases I would like to look at the browser after the test manually. In Selenium it&#39;s easy, don&#39;t call `driver.quit()`. But how does I can do that in Selenium Jupiter?","title":"How to prevent SeleniumJupiter from quit the driver?","body":"<p>Selenium Jupiter run driver.quit() automatically after every test. But in some cases I would like to look at the browser after the test manually. In Selenium it's easy, don't call <code>driver.quit()</code>. But how does I can do that in Selenium Jupiter?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2042,"reputation":29163,"user_id":2811,"accept_rate":75,"display_name":"diciu"},"score":24,"creation_date":1263034174,"post_id":2033088,"comment_id":1957067,"body_markdown":"Use *if(drawable==null)* Calling any method on a NULL object is a NullPointerException.","body":"Use <i>if(drawable==null)</i> Calling any method on a NULL object is a NullPointerException."},{"owner":{"account_id":85409,"reputation":89783,"user_id":238134,"accept_rate":73,"display_name":"deamon"},"score":3,"creation_date":1263035810,"post_id":2033088,"comment_id":1957142,"body_markdown":"Why don&#39;t you write a usual answer instead of a comment, diciu?","body":"Why don&#39;t you write a usual answer instead of a comment, diciu?"},{"owner":{"account_id":164368,"reputation":104823,"user_id":387076,"accept_rate":47,"display_name":"Gilles &#39;SO- stop being evil&#39;"},"score":0,"creation_date":1408283633,"post_id":2033088,"comment_id":39522970,"body_markdown":"@JaredBurrows Do not edit the code in a question in a way that defeats the purpose of the question!","body":"@JaredBurrows Do not edit the code in a question in a way that defeats the purpose of the question!"},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1408283786,"post_id":2033088,"comment_id":39523010,"body_markdown":"@Gilles Read my editorial comment, I made the code more readable.","body":"@Gilles Read my editorial comment, I made the code more readable."},{"owner":{"account_id":164368,"reputation":104823,"user_id":387076,"accept_rate":47,"display_name":"Gilles &#39;SO- stop being evil&#39;"},"score":0,"creation_date":1408283966,"post_id":2033088,"comment_id":39523056,"body_markdown":"@JaredBurrows No, your edit was not a “formatting” change. You changed non-working code which was the object of the question, into working code which made the question moot.","body":"@JaredBurrows No, your edit was not a “formatting” change. You changed non-working code which was the object of the question, into working code which made the question moot."},{"owner":{"account_id":1542737,"reputation":4319,"user_id":1436981,"accept_rate":45,"display_name":"stuXnet"},"score":0,"creation_date":1408284028,"post_id":2033088,"comment_id":39523074,"body_markdown":"@JaredBurrows I had to revert (some of) your changes - you changed it from `drawable.equals(null)` to `isNull(drawable)` - I assume you copied from your first (formatting only) edit on Eddie B&#39;s answer. Please don&#39;t do that.","body":"@JaredBurrows I had to revert (some of) your changes - you changed it from <code>drawable.equals(null)</code> to <code>isNull(drawable)</code> - I assume you copied from your first (formatting only) edit on Eddie B&#39;s answer. Please don&#39;t do that."},{"owner":{"account_id":1542737,"reputation":4319,"user_id":1436981,"accept_rate":45,"display_name":"stuXnet"},"score":0,"creation_date":1408284084,"post_id":2033088,"comment_id":39523086,"body_markdown":"@Giles `isNull(drawable)` won&#39;t compile, because there is no `isNull` defined in the context of the question.","body":"@Giles <code>isNull(drawable)</code> won&#39;t compile, because there is no <code>isNull</code> defined in the context of the question."},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1408284564,"post_id":2033088,"comment_id":39523216,"body_markdown":"@stuXnet That&#39;s perfectly fine. Good question just needed reformatting.","body":"@stuXnet That&#39;s perfectly fine. Good question just needed reformatting."}],"answers":[{"tags":[],"owner":{"account_id":8198,"reputation":176773,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":190,"is_accepted":false,"score":190,"last_activity_date":1544689034,"creation_date":1263034132,"answer_id":2033090,"question_id":2033088,"body_markdown":"    Drawable drawable = Common.getDrawableFromUrl(this, product.getMapPath());\r\n    if (drawable == null) {\r\n        drawable = getRandomDrawable();\r\n    }\r\n\r\nThe `equals()` method checks for *value* equality, which means that it compares the *contents* of two objects. Since `null` is not an object, this crashes when trying to compare the contents of your object to the contents of `null`.\r\n\r\nThe `==` operator checks for *reference* equality, which means that it looks whether the two objects are actually the *very same object*. This does not require the objects to actually exist; two nonexistent objects (`null` references) are also equal.\r\n","title":"How to check if object is null?","body":"<pre><code>Drawable drawable = Common.getDrawableFromUrl(this, product.getMapPath());\nif (drawable == null) {\n    drawable = getRandomDrawable();\n}\n</code></pre>\n\n<p>The <code>equals()</code> method checks for <em>value</em> equality, which means that it compares the <em>contents</em> of two objects. Since <code>null</code> is not an object, this crashes when trying to compare the contents of your object to the contents of <code>null</code>.</p>\n\n<p>The <code>==</code> operator checks for <em>reference</em> equality, which means that it looks whether the two objects are actually the <em>very same object</em>. This does not require the objects to actually exist; two nonexistent objects (<code>null</code> references) are also equal.</p>\n"},{"tags":[],"owner":{"account_id":85409,"reputation":89783,"user_id":238134,"accept_rate":73,"display_name":"deamon"},"down_vote_count":4,"up_vote_count":39,"is_accepted":true,"score":35,"last_activity_date":1413791835,"creation_date":1263035443,"answer_id":2033135,"question_id":2033088,"body_markdown":"**Edited Java 8 Solution:**\r\n\r\n    final Drawable drawable = \r\n        Optional.ofNullable(Common.getDrawableFromUrl(this, product.getMapPath()))\r\n            .orElseGet(() -&gt; getRandomDrawable());\r\n\r\nYou can declare `drawable` `final` in this case.\r\n\r\nAs Chasmo pointed out, Android doesn&#39;t support Java 8 at the moment. So this solution is only possible in other contexts.\r\n","title":"How to check if object is null?","body":"<p><strong>Edited Java 8 Solution:</strong></p>\n\n<pre><code>final Drawable drawable = \n    Optional.ofNullable(Common.getDrawableFromUrl(this, product.getMapPath()))\n        .orElseGet(() -&gt; getRandomDrawable());\n</code></pre>\n\n<p>You can declare <code>drawable</code> <code>final</code> in this case.</p>\n\n<p>As Chasmo pointed out, Android doesn't support Java 8 at the moment. So this solution is only possible in other contexts.</p>\n"},{"tags":[],"owner":{"account_id":52535,"reputation":34017,"user_id":157027,"accept_rate":67,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1263048455,"creation_date":1263048455,"answer_id":2033709,"question_id":2033088,"body_markdown":"    drawable.equals(null)\r\n\r\nThe above line calls the &quot;equals(...)&quot; method on the drawable object.\r\n\r\nSo, when drawable is not null and it is a real object, then all goes well as calling the &quot;equals(null)&quot; method will return &quot;false&quot;\r\n\r\nBut when &quot;drawable&quot; is null, then it means calling the &quot;equals(...)&quot; method on null object, means calling a method on an object that doesn&#39;t exist so it throws &quot;NullPointerException&quot;\r\n\r\nTo check whether an object exists and it is not null, use the following\r\n\r\n    if(drawable == null) {\r\n        ...\r\n        ...\r\n    }\r\n\r\nIn above condition, we are checking that the reference variable &quot;drawable&quot; is null or contains some value (reference to its object) so it won&#39;t throw exception in case drawable is null as checking \r\n\r\n    null == null\r\n\r\nis valid.","title":"How to check if object is null?","body":"<pre><code>drawable.equals(null)\n</code></pre>\n\n<p>The above line calls the \"equals(...)\" method on the drawable object.</p>\n\n<p>So, when drawable is not null and it is a real object, then all goes well as calling the \"equals(null)\" method will return \"false\"</p>\n\n<p>But when \"drawable\" is null, then it means calling the \"equals(...)\" method on null object, means calling a method on an object that doesn't exist so it throws \"NullPointerException\"</p>\n\n<p>To check whether an object exists and it is not null, use the following</p>\n\n<pre><code>if(drawable == null) {\n    ...\n    ...\n}\n</code></pre>\n\n<p>In above condition, we are checking that the reference variable \"drawable\" is null or contains some value (reference to its object) so it won't throw exception in case drawable is null as checking </p>\n\n<pre><code>null == null\n</code></pre>\n\n<p>is valid.</p>\n"},{"tags":[],"owner":{"account_id":89591,"reputation":639,"user_id":1691669,"display_name":"outofcoffee"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1263048880,"creation_date":1263048880,"answer_id":2033732,"question_id":2033088,"body_markdown":"I use this approach:\r\n\r\n    if (null == drawable) {\r\n      //do stuff\r\n    } else {\r\n      //other things\r\n    }\r\n\r\nThis way I find improves the readability of the line - as I read quickly through a source file I can see it&#39;s a null check.\r\n\r\nWith regards to why you can&#39;t call `.equals()` on an object which may be `null`; if the object reference you have (namely &#39;drawable&#39;) **is** in fact `null`, it doesn&#39;t point to an object on the heap. This means there&#39;s no object on the heap on which the call to `equals()` can succeed.\r\n\r\nBest of luck!","title":"How to check if object is null?","body":"<p>I use this approach:</p>\n\n<pre><code>if (null == drawable) {\n  //do stuff\n} else {\n  //other things\n}\n</code></pre>\n\n<p>This way I find improves the readability of the line - as I read quickly through a source file I can see it's a null check.</p>\n\n<p>With regards to why you can't call <code>.equals()</code> on an object which may be <code>null</code>; if the object reference you have (namely 'drawable') <strong>is</strong> in fact <code>null</code>, it doesn't point to an object on the heap. This means there's no object on the heap on which the call to <code>equals()</code> can succeed.</p>\n\n<p>Best of luck!</p>\n"},{"tags":[],"owner":{"account_id":72724,"reputation":5991,"user_id":209838,"accept_rate":67,"display_name":"Tom R"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1263050006,"creation_date":1263050006,"answer_id":2033795,"question_id":2033088,"body_markdown":"It&#39;s probably slightly more efficient to catch a NullPointerException. The above methods mean that the runtime is checking for null pointers twice. ","title":"How to check if object is null?","body":"<p>It's probably slightly more efficient to catch a NullPointerException. The above methods mean that the runtime is checking for null pointers twice. </p>\n"},{"tags":[],"owner":{"account_id":1280634,"reputation":331,"user_id":1234797,"display_name":"heapuser"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1408282772,"creation_date":1348714457,"answer_id":12613413,"question_id":2033088,"body_markdown":"`if (yourObject instanceof yourClassName)` will evaluate to `false` if `yourObject` is `null`.","title":"How to check if object is null?","body":"<p><code>if (yourObject instanceof yourClassName)</code> will evaluate to <code>false</code> if <code>yourObject</code> is <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":966925,"reputation":4497,"user_id":990208,"accept_rate":82,"display_name":"Bala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1408282687,"creation_date":1369399818,"answer_id":16735388,"question_id":2033088,"body_markdown":"Use [google guava libs][1] to handle is-null-check (deamon&#39;s update)\r\n\r\n    Drawable drawable = Optional.of(Common.getDrawableFromUrl(this, product.getMapPath())).or(getRandomDrawable());\r\n\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained","title":"How to check if object is null?","body":"<p>Use <a href=\"https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"nofollow\">google guava libs</a> to handle is-null-check (deamon's update)</p>\n\n<pre><code>Drawable drawable = Optional.of(Common.getDrawableFromUrl(this, product.getMapPath())).or(getRandomDrawable());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":257480,"reputation":5081,"user_id":538921,"accept_rate":91,"display_name":"Edward J Beckett"},"down_vote_count":3,"up_vote_count":10,"is_accepted":false,"score":7,"last_activity_date":1408282755,"creation_date":1392601869,"answer_id":21819440,"question_id":2033088,"body_markdown":"DIY\r\n\r\n\tprivate boolean isNull(Object obj) {\r\n\t\treturn obj == null;\r\n\t}\r\n\r\n\r\n---\r\n\r\n    Drawable drawable = Common.getDrawableFromUrl(this, product.getMapPath());\r\n    if (isNull(drawable)) {\r\n        drawable = getRandomDrawable();\r\n    }","title":"How to check if object is null?","body":"<p>DIY</p>\n\n<pre><code>private boolean isNull(Object obj) {\n    return obj == null;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>Drawable drawable = Common.getDrawableFromUrl(this, product.getMapPath());\nif (isNull(drawable)) {\n    drawable = getRandomDrawable();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12821400,"reputation":43,"user_id":9276135,"display_name":"Meet Vyas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695302996,"creation_date":1695302996,"answer_id":77150748,"question_id":2033088,"body_markdown":"You can use ```Objects.isNull(Object)```","title":"How to check if object is null?","body":"<p>You can use <code>Objects.isNull(Object)</code></p>\n"}],"owner":{"account_id":11824,"reputation":66155,"user_id":22996,"accept_rate":92,"display_name":"Niko Gamulin"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":451419,"favorite_count":0,"down_vote_count":1,"up_vote_count":98,"accepted_answer_id":2033135,"answer_count":9,"score":97,"last_activity_date":1695305466,"creation_date":1263034030,"question_id":2033088,"body_markdown":"I am creating an application which retrieves images from the web. In case the image cannot be retrieved another local image should be used.\r\n\r\nWhile trying to execute the following lines:\r\n\r\n    Drawable drawable = Common.getDrawableFromUrl(this, product.getMapPath());\r\n    if (drawable.equals(null)) {\r\n      drawable = getRandomDrawable();\r\n    }\r\n\r\nThe line if(drawable.equals(null)) throws an exception if drawable is null.\r\n\r\nDoes anyone know how should the value of drawable be checked in order not to throw an exception in case it is null and retrieve the local image (execute `drawable = getRandomDrawable()`)?\r\n","title":"How to check if object is null?","body":"<p>I am creating an application which retrieves images from the web. In case the image cannot be retrieved another local image should be used.</p>\n<p>While trying to execute the following lines:</p>\n<pre><code>Drawable drawable = Common.getDrawableFromUrl(this, product.getMapPath());\nif (drawable.equals(null)) {\n  drawable = getRandomDrawable();\n}\n</code></pre>\n<p>The line if(drawable.equals(null)) throws an exception if drawable is null.</p>\n<p>Does anyone know how should the value of drawable be checked in order not to throw an exception in case it is null and retrieve the local image (execute <code>drawable = getRandomDrawable()</code>)?</p>\n"},{"tags":["java","maven","jenkins","maven-plugin"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1552581174,"post_id":55167612,"comment_id":97074697,"body_markdown":"Delete the local repository and try again.","body":"Delete the local repository and try again."},{"owner":{"account_id":1665858,"reputation":2523,"user_id":1533273,"accept_rate":83,"display_name":"clD"},"score":0,"creation_date":1552581701,"post_id":55167612,"comment_id":97075014,"body_markdown":"I have update my question. Only work for one or two builds. What would be causing this?","body":"I have update my question. Only work for one or two builds. What would be causing this?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1552597686,"post_id":55167612,"comment_id":97083287,"body_markdown":"Your local cache is screwed up. You have to cleanup your cache and turn on checksum policy... Details https://blog.soebes.de/blog/2018/10/13/maven-artifact-checksums-what/","body":"Your local cache is screwed up. You have to cleanup your cache and turn on checksum policy... Details <a href=\"https://blog.soebes.de/blog/2018/10/13/maven-artifact-checksums-what/\" rel=\"nofollow noreferrer\">blog.soebes.de/blog/2018/10/13/maven-artifact-checksums-what</a>"},{"owner":{"account_id":910975,"reputation":14592,"user_id":944849,"accept_rate":87,"display_name":"user944849"},"score":0,"creation_date":1552607005,"post_id":55167612,"comment_id":97086144,"body_markdown":"Another possibility is multiple builds downloading the same jars simultaneously and one stepping on another.","body":"Another possibility is multiple builds downloading the same jars simultaneously and one stepping on another."}],"answers":[{"tags":[],"owner":{"account_id":3061143,"reputation":1338,"user_id":2593751,"display_name":"Mohannd"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1658663246,"creation_date":1590095329,"answer_id":61943870,"question_id":55167612,"body_markdown":"The JAR in your local Maven cache is corrupt.\r\n\r\nJust delete the file \r\n\r\n    .m2/com.some_company/any_random.jar\r\n\r\nand rerun your goal again.\r\n Maybe your network or internet connection is slow or your hard disk need check. ","title":"Maven clean install COMPILATION ERROR cannot access jar, zip END header not found","body":"<p>The JAR in your local Maven cache is corrupt.</p>\n<p>Just delete the file</p>\n<pre><code>.m2/com.some_company/any_random.jar\n</code></pre>\n<p>and rerun your goal again.\nMaybe your network or internet connection is slow or your hard disk need check.</p>\n"},{"tags":[],"owner":{"account_id":20145936,"reputation":472,"user_id":14774446,"display_name":"Davide Calarco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652368680,"creation_date":1652368680,"answer_id":72218193,"question_id":55167612,"body_markdown":"## Error reproduction\r\nI&#39;ve experienced the same error as soon as I&#39;ve added a global variable at the beginning of a tag in the `pom.xml` file:\r\n\r\n```maven\r\n&lt;url&gt;${env.CI_PROJECT_URL}/api/v4/projects/000/packages/maven&lt;/url&gt;\r\n```\r\n\r\nJust for a try, I added the `a` letter at the beginning, even if it doesn&#39;t resolve to an existing URL:\r\n\r\n```maven\r\n&lt;url&gt;a${env.CI_PROJECT_URL}/api/v4/projects/000/packages/maven&lt;/url&gt;\r\n```\r\n\r\nAnd the compilation worked, but the publication could not due to the wrong URL.\r\n\r\n## Solution\r\n\r\nI&#39;ve solved the error by just interpolating the domain of the server, while I manually wrote the protocol part as `https`:\r\n\r\n```maven\r\n&lt;url&gt;https://${env.CI_SERVER_HOST}/api/v4/projects/000/packages/maven&lt;/url&gt;\r\n```\r\n\r\nIn your case you may need to apply a similar modification in order to solve the issue.","title":"Maven clean install COMPILATION ERROR cannot access jar, zip END header not found","body":"<h2>Error reproduction</h2>\n<p>I've experienced the same error as soon as I've added a global variable at the beginning of a tag in the <code>pom.xml</code> file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;url&gt;${env.CI_PROJECT_URL}/api/v4/projects/000/packages/maven&lt;/url&gt;\n</code></pre>\n<p>Just for a try, I added the <code>a</code> letter at the beginning, even if it doesn't resolve to an existing URL:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;url&gt;a${env.CI_PROJECT_URL}/api/v4/projects/000/packages/maven&lt;/url&gt;\n</code></pre>\n<p>And the compilation worked, but the publication could not due to the wrong URL.</p>\n<h2>Solution</h2>\n<p>I've solved the error by just interpolating the domain of the server, while I manually wrote the protocol part as <code>https</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;url&gt;https://${env.CI_SERVER_HOST}/api/v4/projects/000/packages/maven&lt;/url&gt;\n</code></pre>\n<p>In your case you may need to apply a similar modification in order to solve the issue.</p>\n"},{"tags":[],"owner":{"account_id":17582586,"reputation":164,"user_id":12756065,"display_name":"Alberto Azinar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695305376,"creation_date":1695305376,"answer_id":77151043,"question_id":55167612,"body_markdown":"Mohannd answer helped me knowing what was going on.\r\n\r\nBut, I was pulling the dependency from an internal repository, so the solution was accessing the internal repository and replacing the corrupted JAR file.\r\n\r\nGo to your local repository (cache) and remove the JAR file.\r\n\r\nAfter that run `mvn clean install -U` to download it again from the internal repository.","title":"Maven clean install COMPILATION ERROR cannot access jar, zip END header not found","body":"<p>Mohannd answer helped me knowing what was going on.</p>\n<p>But, I was pulling the dependency from an internal repository, so the solution was accessing the internal repository and replacing the corrupted JAR file.</p>\n<p>Go to your local repository (cache) and remove the JAR file.</p>\n<p>After that run <code>mvn clean install -U</code> to download it again from the internal repository.</p>\n"}],"owner":{"account_id":1665858,"reputation":2523,"user_id":1533273,"accept_rate":83,"display_name":"clD"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36270,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":3,"score":19,"last_activity_date":1695305376,"creation_date":1552580876,"question_id":55167612,"body_markdown":"When building my application on Jenkins using maven I am seeing the following error after running:\r\n\r\n`mvn clean install -q -U -T 1.5C -DskipTests -Dsvn.info.skip=true`\r\n\r\n**Error:**\r\n&gt;** [ERROR] COMPILATION ERROR : \r\n[ERROR] error reading /apps/jenkins/workspace/some_branch/.m2/com.some_company/any_random.jar; zip file is empty &lt;br/&gt;\r\n[ERROR] cannot access com.some_company.some_class\r\ncannot access cannot access com.some_company.some_class zip END header not found\r\ncannot access jar\r\n\r\n&lt;br/&gt;\r\nI tried excluding the dependency that was causing the issue as it was transitive but now it happens for other dependencies.\r\n\r\nThe dependencies are stored in nexus.\r\n\r\nI have looked at the JDK being used to build the JARS and considered Network issues but nothing explains this.\r\n\r\nClearing Jenkins and the .m2 folder works sometime for one or two builds but I would like to find a better solution.\r\n\r\nAny ideas?","title":"Maven clean install COMPILATION ERROR cannot access jar, zip END header not found","body":"<p>When building my application on Jenkins using maven I am seeing the following error after running:</p>\n\n<p><code>mvn clean install -q -U -T 1.5C -DskipTests -Dsvn.info.skip=true</code></p>\n\n<p><strong>Error:</strong></p>\n\n<blockquote>\n  <p>** [ERROR] COMPILATION ERROR : \n  [ERROR] error reading /apps/jenkins/workspace/some_branch/.m2/com.some_company/any_random.jar; zip file is empty <br/>\n  [ERROR] cannot access com.some_company.some_class\n  cannot access cannot access com.some_company.some_class zip END header not found\n  cannot access jar</p>\n</blockquote>\n\n<p><br/>\nI tried excluding the dependency that was causing the issue as it was transitive but now it happens for other dependencies.</p>\n\n<p>The dependencies are stored in nexus.</p>\n\n<p>I have looked at the JDK being used to build the JARS and considered Network issues but nothing explains this.</p>\n\n<p>Clearing Jenkins and the .m2 folder works sometime for one or two builds but I would like to find a better solution.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","spring","postgresql","spring-data-jpa"],"comments":[{"owner":{"account_id":6188216,"reputation":53,"user_id":4821691,"display_name":"Cosmin Mavrichi"},"score":0,"creation_date":1695290467,"post_id":77148505,"comment_id":136005959,"body_markdown":"Did you try this in a transactional context? Also, it would be helpful to have the full code sample of what seems to be the service.\nI suspect the reason might have to do with detached entities, which might get dropped when doing the findAll.","body":"Did you try this in a transactional context? Also, it would be helpful to have the full code sample of what seems to be the service. I suspect the reason might have to do with detached entities, which might get dropped when doing the findAll."},{"owner":{"account_id":9179794,"reputation":408,"user_id":6824092,"accept_rate":64,"display_name":"Hayk  Mkhitaryan"},"score":0,"creation_date":1695293073,"post_id":77148505,"comment_id":136006502,"body_markdown":"1. Yes, I&#39;m also trying this with @Transactional annotation on method, calling this repository, but results are the same.\n2. The same code is tested without the findAll method call, it&#39;s just a demostration for finding out that read operation works, but write, no.","body":"1. Yes, I&#39;m also trying this with @Transactional annotation on method, calling this repository, but results are the same. 2. The same code is tested without the findAll method call, it&#39;s just a demostration for finding out that read operation works, but write, no."}],"answers":[{"tags":[],"owner":{"account_id":6188216,"reputation":53,"user_id":4821691,"display_name":"Cosmin Mavrichi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695305068,"creation_date":1695298247,"answer_id":77150126,"question_id":77148505,"body_markdown":"Just created my little test, and when using a composite key if nothing changes on the entity, then there is no reason for the entity to get inserted or updated, hence no update or insert in logs.\r\n\r\nTry changing anything on your entity e.g. other_data and you will see an update getting triggered. If you change any of the composite keys, an insert statement will be done.","title":"JPA entity composite primery key not saving to the database","body":"<p>Just created my little test, and when using a composite key if nothing changes on the entity, then there is no reason for the entity to get inserted or updated, hence no update or insert in logs.</p>\n<p>Try changing anything on your entity e.g. other_data and you will see an update getting triggered. If you change any of the composite keys, an insert statement will be done.</p>\n"}],"owner":{"account_id":9179794,"reputation":408,"user_id":6824092,"accept_rate":64,"display_name":"Hayk  Mkhitaryan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695305068,"creation_date":1695285347,"question_id":77148505,"body_markdown":"I&#39;m facing such kind of issue. I have this code base. This is my Entity class:\r\n\r\n    @Entity\r\n    @Table(name = &quot;your_entity&quot;)\r\n    public class MyEntity implements Serializable {\r\n    \r\n        @EmbeddedId\r\n        private MyEntityId id;\r\n    \r\n        @Column(name = &quot;other_data&quot;)\r\n        private String otherData;\r\n    \r\n        // Getters and setters\r\n    }\r\n\r\nAnd this one is the composite primery key part in java code, \r\n\r\n    \r\n    @Embeddable\r\n    public class MyEntityId implements Serializable {\r\n    \r\n        @Column(name = &quot;id1&quot;)\r\n        private Long id1;\r\n    \r\n        @Column(name = &quot;id2&quot;)\r\n        private Long id2;\r\n    \r\n        // Getters and setters\r\n    }\r\n\r\nHere is the repository part to save that entity\r\n\r\n    public interface MyEntityRepository extends JpaRepository&lt;MyEntity, MyEntityId&gt; {}\r\n\r\nthis one is the service layer:\r\n\r\n    @Service\r\n    public class MyEntityService {\r\n    \r\n        @Autowired\r\n        private MyEntityRepository repository;\r\n    \r\n        public void saveEntity(MyEntity entity) {\r\n            repository.save(entity);\r\n        }\r\n    }\r\n\r\nAnd this is the code of saving the record to the database:\r\n\r\n    \r\n\r\n  \r\n\r\n       1. final MyEntity entity = new MyEntity();\r\n       2. entity.setId(new MyEntityId(&quot;id_1&quot;, &quot;e56962a6-4747-49cd-b67b-bf8b01975c4c&quot;));\r\n       3. final List&lt;MyEntity&gt; got = repository.findAll();\r\n       4. final MyEntity saved = repository.save(entity);\r\n\r\nThe interesting part here is that, when executing the line 3, it gets the previously saved list, and when executing the line 4, it normally passes that line, without any error, but no new records are being saved in the database. \r\nAlso in the log section I see that there are only two selects after line 4, but no insert is present there.\r\nAny ideas of what can be the reason of this weird behavior?","title":"JPA entity composite primery key not saving to the database","body":"<p>I'm facing such kind of issue. I have this code base. This is my Entity class:</p>\n<pre><code>@Entity\n@Table(name = &quot;your_entity&quot;)\npublic class MyEntity implements Serializable {\n\n    @EmbeddedId\n    private MyEntityId id;\n\n    @Column(name = &quot;other_data&quot;)\n    private String otherData;\n\n    // Getters and setters\n}\n</code></pre>\n<p>And this one is the composite primery key part in java code,</p>\n<pre><code>@Embeddable\npublic class MyEntityId implements Serializable {\n\n    @Column(name = &quot;id1&quot;)\n    private Long id1;\n\n    @Column(name = &quot;id2&quot;)\n    private Long id2;\n\n    // Getters and setters\n}\n</code></pre>\n<p>Here is the repository part to save that entity</p>\n<pre><code>public interface MyEntityRepository extends JpaRepository&lt;MyEntity, MyEntityId&gt; {}\n</code></pre>\n<p>this one is the service layer:</p>\n<pre><code>@Service\npublic class MyEntityService {\n\n    @Autowired\n    private MyEntityRepository repository;\n\n    public void saveEntity(MyEntity entity) {\n        repository.save(entity);\n    }\n}\n</code></pre>\n<p>And this is the code of saving the record to the database:</p>\n<pre><code>   1. final MyEntity entity = new MyEntity();\n   2. entity.setId(new MyEntityId(&quot;id_1&quot;, &quot;e56962a6-4747-49cd-b67b-bf8b01975c4c&quot;));\n   3. final List&lt;MyEntity&gt; got = repository.findAll();\n   4. final MyEntity saved = repository.save(entity);\n</code></pre>\n<p>The interesting part here is that, when executing the line 3, it gets the previously saved list, and when executing the line 4, it normally passes that line, without any error, but no new records are being saved in the database.\nAlso in the log section I see that there are only two selects after line 4, but no insert is present there.\nAny ideas of what can be the reason of this weird behavior?</p>\n"},{"tags":["java","lambda","iteration","google-chrome-devtools","selenium4"],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695304714,"creation_date":1695300792,"answer_id":77150446,"question_id":77150352,"body_markdown":"The listener is likely receiving events on another thread. I&#39;m guessing you want to block the main thread whilst waiting for the response event. There&#39;s a few ways to do this, here&#39;s an example with a [CountDownLatch](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html)\r\n\r\n```java\r\nCountDownLatch latch = new CountDownLatch(1);\r\nList&lt;Response&gt; responses = new CopyOnWriteArrayList&lt;&gt;();\r\nAtomicBoolean urlFound = new AtomicBoolean(false);\r\n\r\ndevTools.addListener(Network.responseReceived(), entry -&gt; {\r\n   responses.add(entry.getResponse());\r\n   if (response.getUrl().contains(expectedUrl)) {\r\n      urlFound.set(true);\r\n      latch.countDown(); // decrement the count\r\n   }\r\n});\r\n\r\nlatch.await(10, TimeUnit.SECONDS); // waits until count is zero for max of 10 seconds\r\n\r\nif (urlFound.get()) {\r\n   // yay we found it\r\n} else {\r\n   for (Response response : responses) {\r\n      // report errors\r\n   }\r\n}\r\n```\r\n","title":"Perform value validation with lambda expression","body":"<p>The listener is likely receiving events on another thread. I'm guessing you want to block the main thread whilst waiting for the response event. There's a few ways to do this, here's an example with a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">CountDownLatch</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>CountDownLatch latch = new CountDownLatch(1);\nList&lt;Response&gt; responses = new CopyOnWriteArrayList&lt;&gt;();\nAtomicBoolean urlFound = new AtomicBoolean(false);\n\ndevTools.addListener(Network.responseReceived(), entry -&gt; {\n   responses.add(entry.getResponse());\n   if (response.getUrl().contains(expectedUrl)) {\n      urlFound.set(true);\n      latch.countDown(); // decrement the count\n   }\n});\n\nlatch.await(10, TimeUnit.SECONDS); // waits until count is zero for max of 10 seconds\n\nif (urlFound.get()) {\n   // yay we found it\n} else {\n   for (Response response : responses) {\n      // report errors\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77150446,"answer_count":1,"score":0,"last_activity_date":1695304714,"creation_date":1695300172,"question_id":77150352,"body_markdown":"I need to perform validation that specific String is appearing in DevTools traffic (Selenium 4 / Java)  \r\nI saw several examples like this:  \r\n```\r\ndevTools.addListener(Network.responseReceived(), entry -&gt; {\r\n    System.out.println(&quot;Response (Req id) URL : (&quot; + entry.getRequestId() + &quot;) &quot;\r\n            + entry.getResponse().getUrl()\r\n            + &quot; (&quot; + entry.getResponse().getStatus() + &quot;)&quot;);\r\n});\r\n```\r\nThe code above works correctly, it prints out the traffic response value.  \r\nBut I need not just to print the values but to perform validation if some specific String is contained in one of the entries response URL.  \r\nI tried something like this:\r\n```\r\nboolean responseFound = false;\r\n\r\ndevTools.addListener(Network.responseReceived(), entry -&gt; {            \r\n            if (entry.getResponse().getUrl().contains(expectedUrl)){\r\n                responseFound = true;\r\n            }            \r\n});\r\n```\r\nHowever Java considered this as illegal since \r\n&gt;Variable used in lambda expression should be final or effectively final\r\n\r\nSo I changed it to be\r\n```\r\nAtomicBoolean responseFound = new AtomicBoolean(false);\r\n\r\ndevTools.addListener(Network.responseReceived(), entry -&gt; {\r\n            if (entry.getResponse().getUrl().contains(expectedUrl)){\r\n               responseFound.set(true);\r\n           }\r\n});\r\n```\r\nHowever the code above doesn&#39;t work.  \r\nWhile debugging I see the flow never performs the `if` statement, it directly goes to the next line....  \r\nHow can I make it working correctly?","title":"Perform value validation with lambda expression","body":"<p>I need to perform validation that specific String is appearing in DevTools traffic (Selenium 4 / Java)<br />\nI saw several examples like this:</p>\n<pre><code>devTools.addListener(Network.responseReceived(), entry -&gt; {\n    System.out.println(&quot;Response (Req id) URL : (&quot; + entry.getRequestId() + &quot;) &quot;\n            + entry.getResponse().getUrl()\n            + &quot; (&quot; + entry.getResponse().getStatus() + &quot;)&quot;);\n});\n</code></pre>\n<p>The code above works correctly, it prints out the traffic response value.<br />\nBut I need not just to print the values but to perform validation if some specific String is contained in one of the entries response URL.<br />\nI tried something like this:</p>\n<pre><code>boolean responseFound = false;\n\ndevTools.addListener(Network.responseReceived(), entry -&gt; {            \n            if (entry.getResponse().getUrl().contains(expectedUrl)){\n                responseFound = true;\n            }            \n});\n</code></pre>\n<p>However Java considered this as illegal since</p>\n<blockquote>\n<p>Variable used in lambda expression should be final or effectively final</p>\n</blockquote>\n<p>So I changed it to be</p>\n<pre><code>AtomicBoolean responseFound = new AtomicBoolean(false);\n\ndevTools.addListener(Network.responseReceived(), entry -&gt; {\n            if (entry.getResponse().getUrl().contains(expectedUrl)){\n               responseFound.set(true);\n           }\n});\n</code></pre>\n<p>However the code above doesn't work.<br />\nWhile debugging I see the flow never performs the <code>if</code> statement, it directly goes to the next line....<br />\nHow can I make it working correctly?</p>\n"},{"tags":["java","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":5,"creation_date":1695303109,"post_id":77150740,"comment_id":136008617,"body_markdown":"You need to add a hidden field for the `id` so it gets bound as well.","body":"You need to add a hidden field for the <code>id</code> so it gets bound as well."}],"answers":[{"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695304614,"creation_date":1695304614,"answer_id":77150956,"question_id":77150740,"body_markdown":"\r\n\r\nAs one of the comments already suggested, try adding a hidden field for ***id***, because it must be included in the form data before submitting. Spring is initializing a new Job object for the POST request, and since the ***id*** field is not set, it defaults to zero.\r\n\r\nIt should be simple like this:\r\n\r\n```\r\n&lt;form th:object=&quot;${updateJob}&quot; th:action=&quot;@{/savejob}&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; class=&quot;form-horizontal&quot;&gt;\r\n    &lt;!-- ... other form fields ... --&gt;\r\n\r\n    &lt;!-- Hidden input for &#39;id&#39; --&gt;\r\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{id}&quot; /&gt;\r\n\r\n    &lt;!-- Submit button --&gt;\r\n    &lt;div class=&quot;input-group&quot;&gt;\r\n        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot; name=&quot;button&quot;&gt;Save&lt;/button&gt;\r\n    &lt;/div&gt;\r\n&lt;/form&gt;\r\n\r\n```","title":"Spring save() inserting instead of merging","body":"<p>As one of the comments already suggested, try adding a hidden field for <em><strong>id</strong></em>, because it must be included in the form data before submitting. Spring is initializing a new Job object for the POST request, and since the <em><strong>id</strong></em> field is not set, it defaults to zero.</p>\n<p>It should be simple like this:</p>\n<pre><code>&lt;form th:object=&quot;${updateJob}&quot; th:action=&quot;@{/savejob}&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; class=&quot;form-horizontal&quot;&gt;\n    &lt;!-- ... other form fields ... --&gt;\n\n    &lt;!-- Hidden input for 'id' --&gt;\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{id}&quot; /&gt;\n\n    &lt;!-- Submit button --&gt;\n    &lt;div class=&quot;input-group&quot;&gt;\n        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot; name=&quot;button&quot;&gt;Save&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n\n</code></pre>\n"}],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695304614,"creation_date":1695302954,"question_id":77150740,"body_markdown":"I have searched similar topics and found it didn&#39;t help unfortunately.\r\n\r\nI start by providing a button to edit an arbitrary `Job`\r\n```\r\n&lt;td&gt;&lt;button class=&quot;btn btn-primary&quot; th:onclick=&quot;&#39;window.location.href = \\&#39;&#39; + @{/updateprep/{id}(id=${job.id})} + &#39;\\&#39;&#39;&quot;&gt;Edit&lt;/button&gt;&lt;/td&gt;\r\n```\r\n\r\n\r\nController handles that thus:\r\n\r\n```\r\n    // show update form\r\n    @RequestMapping(value = &quot;/updateprep/{id}&quot;, method = RequestMethod.GET)\r\n    public String showUpdateUserForm(@PathVariable(&quot;id&quot;) Long id, Model model) {\r\n        Job jobToUpdate = repository.findById(id).orElseThrow();\r\n        model.addAttribute(&quot;updateJob&quot;, jobToUpdate);\r\n        if (log.isDebugEnabled()) {\r\n            log.debug(&quot;/updateprep: would edit job with ID {}&quot;, id);\r\n            log.debug(&quot;/updateprep: Job is {}&quot;, jobToUpdate);\r\n        }\r\n\r\n        return &quot;updatejob&quot;;\r\n\r\n    }\r\n```\r\nThis provides the form to update the `Job`, which *should* have the correct `Job`, found by its id. Inspecting my log debug in the controller above shows that the correct one was found.\r\n\r\n```\r\n            &lt;h3&gt;Update Job&lt;/h3&gt;\r\n            &lt;form th:object=&quot;${updateJob}&quot; th:action=&quot;@{/savejob}&quot; method=&quot;post&quot; enctype=\r\n                                                        &quot;multipart/form-data&quot; class=&quot;form-horizontal&quot;&gt;\r\n                &lt;fieldset&gt;\r\n\r\n                    &lt;div class=&quot;form-group col-lg-3&quot;&gt;\r\n                        &lt;label for=&quot;picker&quot; class=&quot;control-label&quot;&gt;Date&lt;/label&gt;\r\n                        &lt;div class=&quot;input-group date&quot; id=&quot;picker&quot;&gt;\r\n                            &lt;input type=&quot;text&quot; th:value=&quot;${updateJob.date}&quot; name=&quot;date&quot; placeholder=\r\n                                                 &quot;YYYY-MM-DD&quot; class=&quot;form-control&quot; style=&quot;background: transparent&quot; /&gt;\r\n                            &lt;span class=&quot;input-group-addon&quot;&gt;\r\n                                &lt;span class=&quot;glyphicon glyphicon-calendar&quot;&gt;&lt;/span&gt;\r\n                            &lt;/span&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;!-- Time part --&gt;\r\n                        &lt;label for=&quot;timepicker&quot; class=&quot;control-label&quot;&gt;Time&lt;/label&gt;\r\n                        &lt;div class=&#39;input-group date&#39; id=&#39;timepicker&#39;&gt;\r\n                            &lt;input type=&#39;text&#39; class=&quot;form-control&quot; /&gt;\r\n                            &lt;span class=&quot;input-group-addon&quot;&gt;\r\n                                &lt;span class=&quot;glyphicon glyphicon-time&quot;&gt;&lt;/span&gt;\r\n                            &lt;/span&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;!-- Place --&gt;\r\n                        &lt;div class=&quot;input-group&quot; id=&quot;place&quot;&gt;\r\n                            &lt;label for=&quot;place&quot; class=&quot;control-label&quot;&gt;Place&lt;/label&gt;\r\n                            &lt;input type=&#39;text&#39; th:field=&quot;*{place}&quot;  name=&quot;place&quot; class=&quot;form-control&quot; /&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;!-- Amount --&gt;\r\n                        &lt;div class=&quot;input-group&quot; id=&quot;amount&quot;&gt;\r\n                            &lt;label for=&quot;amount&quot; class=&quot;control-label&quot;&gt;Amount&lt;/label&gt;\r\n                            &lt;input type=&#39;text&#39; th:field=&quot;*{amount}&quot; name=&quot;amount&quot; placeholder=&quot;0.00&quot; class=&quot;form-control&quot; /&gt;\r\n                        &lt;/div&gt;\r\n\r\n                        &lt;!-- Billed --&gt;\r\n                        &lt;div class=&quot;form-check form-check-inline&quot;&gt;\r\n                            &lt;!--\r\n                            &lt;input type=&quot;checkbox&quot; class=&quot;form-control&quot; /&gt;\r\n                            --&gt;\r\n                            &lt;label for=&quot;billed&quot; class=&quot;form-check-label&quot;&gt;Billed&lt;/label&gt;\r\n                            &lt;input id=&quot;billed&quot; th:field=&quot;*{billed}&quot; type=&quot;checkbox&quot; name=&quot;billed&quot; class=&quot;form-check-input&quot; /&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;!-- Paid --&gt;\r\n                        &lt;div class=&quot;form-check form-check-inline&quot;&gt;\r\n                            &lt;label for=&quot;paid&quot; class=&quot;form-check-label&quot;&gt;Paid&lt;/label&gt;\r\n                            &lt;input id=&quot;paid&quot; th:field=&quot;*{paid}&quot; type=&quot;checkbox&quot; name=&quot;paid&quot; class=&quot;form-check-input&quot; /&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;!-- Notes --&gt;\r\n                        &lt;div class=&quot;input-group&quot;&gt;\r\n                            &lt;label for=&quot;notes&quot; class=&quot;control-label&quot;&gt;Notes&lt;/label&gt;\r\n                            &lt;!--\r\n                            &lt;textarea class=&quot;form-control&quot;rows=&quot;10&quot; value=&quot;${updateJob.notes}&quot; id=&quot;notes&quot; name=&quot;notes&quot;&gt;&lt;/textarea&gt;\r\n                            --&gt;\r\n                            &lt;textarea class=&quot;form-control&quot; th:field=&quot;*{notes}&quot; rows=&quot;10&quot; id=&quot;notes&quot; name=&quot;notes&quot;&gt;&lt;/textarea&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;!-- Submit --&gt;\r\n                        &lt;div class=&quot;input-group&quot;&gt;\r\n                            &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot; name=&quot;button&quot;&gt;Save&lt;/button&gt;\r\n                        &lt;/div&gt;\r\n\r\n                    &lt;/div&gt;&lt;!-- end form-group --&gt;\r\n                &lt;/fieldset&gt;\r\n            &lt;/form&gt;\r\n```\r\n\r\nThis is the uncomplicated routine for saving, but it&#39;s at this point that the ID becomes zero and the result is that the correct `Job` is *not* updated, but a totally new row is inserted into the database table:\r\n\r\n```\r\n    @RequestMapping(value = &quot;/savejob&quot;, method = RequestMethod.POST)\r\n    // public String saveJob(@RequestParam Job updateJob) {\r\n    public String saveJob(@ModelAttribute(&quot;updateJob&quot;) Job updateJob) {\r\n        if(log.isDebugEnabled()) {\r\n            log.debug(&quot;/savejob: saving Job with id {} and date {}&quot;, updateJob.getId(), updateJob.getDate());\r\n        }\r\n        repository.save(updateJob);\r\n        return &quot;controlpanel&quot;;\r\n    }\r\n```\r\nThe definition of `Job` includes:\r\n```\r\n@Entity\r\npublic class Job {\r\n    @Id\r\n    // @GeneratedValue(strategy=GenerationType.SEQUENCE)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    // @GeneratedValue(strategy=GenerationType.AUTO)\r\n    private long id;\r\n    @Column(name = &quot;Date&quot;, nullable = false, columnDefinition = &quot;DATE&quot;)\r\n    private LocalDate date;\r\n    private String place;\r\n    private double amount;\r\n    @Column(name = &quot;Billed&quot;, nullable = false, columnDefinition = &quot;TINYINT(1)&quot;)\r\n    private boolean billed;\r\n    @Column(name = &quot;Paid&quot;, nullable = false, columnDefinition = &quot;TINYINT(1)&quot;)\r\n    private boolean paid;\r\n    private String notes;\r\n```\r\n\r\nWhat is going wrong?\r\n","title":"Spring save() inserting instead of merging","body":"<p>I have searched similar topics and found it didn't help unfortunately.</p>\n<p>I start by providing a button to edit an arbitrary <code>Job</code></p>\n<pre><code>&lt;td&gt;&lt;button class=&quot;btn btn-primary&quot; th:onclick=&quot;'window.location.href = \\'' + @{/updateprep/{id}(id=${job.id})} + '\\''&quot;&gt;Edit&lt;/button&gt;&lt;/td&gt;\n</code></pre>\n<p>Controller handles that thus:</p>\n<pre><code>    // show update form\n    @RequestMapping(value = &quot;/updateprep/{id}&quot;, method = RequestMethod.GET)\n    public String showUpdateUserForm(@PathVariable(&quot;id&quot;) Long id, Model model) {\n        Job jobToUpdate = repository.findById(id).orElseThrow();\n        model.addAttribute(&quot;updateJob&quot;, jobToUpdate);\n        if (log.isDebugEnabled()) {\n            log.debug(&quot;/updateprep: would edit job with ID {}&quot;, id);\n            log.debug(&quot;/updateprep: Job is {}&quot;, jobToUpdate);\n        }\n\n        return &quot;updatejob&quot;;\n\n    }\n</code></pre>\n<p>This provides the form to update the <code>Job</code>, which <em>should</em> have the correct <code>Job</code>, found by its id. Inspecting my log debug in the controller above shows that the correct one was found.</p>\n<pre><code>            &lt;h3&gt;Update Job&lt;/h3&gt;\n            &lt;form th:object=&quot;${updateJob}&quot; th:action=&quot;@{/savejob}&quot; method=&quot;post&quot; enctype=\n                                                        &quot;multipart/form-data&quot; class=&quot;form-horizontal&quot;&gt;\n                &lt;fieldset&gt;\n\n                    &lt;div class=&quot;form-group col-lg-3&quot;&gt;\n                        &lt;label for=&quot;picker&quot; class=&quot;control-label&quot;&gt;Date&lt;/label&gt;\n                        &lt;div class=&quot;input-group date&quot; id=&quot;picker&quot;&gt;\n                            &lt;input type=&quot;text&quot; th:value=&quot;${updateJob.date}&quot; name=&quot;date&quot; placeholder=\n                                                 &quot;YYYY-MM-DD&quot; class=&quot;form-control&quot; style=&quot;background: transparent&quot; /&gt;\n                            &lt;span class=&quot;input-group-addon&quot;&gt;\n                                &lt;span class=&quot;glyphicon glyphicon-calendar&quot;&gt;&lt;/span&gt;\n                            &lt;/span&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Time part --&gt;\n                        &lt;label for=&quot;timepicker&quot; class=&quot;control-label&quot;&gt;Time&lt;/label&gt;\n                        &lt;div class='input-group date' id='timepicker'&gt;\n                            &lt;input type='text' class=&quot;form-control&quot; /&gt;\n                            &lt;span class=&quot;input-group-addon&quot;&gt;\n                                &lt;span class=&quot;glyphicon glyphicon-time&quot;&gt;&lt;/span&gt;\n                            &lt;/span&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Place --&gt;\n                        &lt;div class=&quot;input-group&quot; id=&quot;place&quot;&gt;\n                            &lt;label for=&quot;place&quot; class=&quot;control-label&quot;&gt;Place&lt;/label&gt;\n                            &lt;input type='text' th:field=&quot;*{place}&quot;  name=&quot;place&quot; class=&quot;form-control&quot; /&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Amount --&gt;\n                        &lt;div class=&quot;input-group&quot; id=&quot;amount&quot;&gt;\n                            &lt;label for=&quot;amount&quot; class=&quot;control-label&quot;&gt;Amount&lt;/label&gt;\n                            &lt;input type='text' th:field=&quot;*{amount}&quot; name=&quot;amount&quot; placeholder=&quot;0.00&quot; class=&quot;form-control&quot; /&gt;\n                        &lt;/div&gt;\n\n                        &lt;!-- Billed --&gt;\n                        &lt;div class=&quot;form-check form-check-inline&quot;&gt;\n                            &lt;!--\n                            &lt;input type=&quot;checkbox&quot; class=&quot;form-control&quot; /&gt;\n                            --&gt;\n                            &lt;label for=&quot;billed&quot; class=&quot;form-check-label&quot;&gt;Billed&lt;/label&gt;\n                            &lt;input id=&quot;billed&quot; th:field=&quot;*{billed}&quot; type=&quot;checkbox&quot; name=&quot;billed&quot; class=&quot;form-check-input&quot; /&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Paid --&gt;\n                        &lt;div class=&quot;form-check form-check-inline&quot;&gt;\n                            &lt;label for=&quot;paid&quot; class=&quot;form-check-label&quot;&gt;Paid&lt;/label&gt;\n                            &lt;input id=&quot;paid&quot; th:field=&quot;*{paid}&quot; type=&quot;checkbox&quot; name=&quot;paid&quot; class=&quot;form-check-input&quot; /&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Notes --&gt;\n                        &lt;div class=&quot;input-group&quot;&gt;\n                            &lt;label for=&quot;notes&quot; class=&quot;control-label&quot;&gt;Notes&lt;/label&gt;\n                            &lt;!--\n                            &lt;textarea class=&quot;form-control&quot;rows=&quot;10&quot; value=&quot;${updateJob.notes}&quot; id=&quot;notes&quot; name=&quot;notes&quot;&gt;&lt;/textarea&gt;\n                            --&gt;\n                            &lt;textarea class=&quot;form-control&quot; th:field=&quot;*{notes}&quot; rows=&quot;10&quot; id=&quot;notes&quot; name=&quot;notes&quot;&gt;&lt;/textarea&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Submit --&gt;\n                        &lt;div class=&quot;input-group&quot;&gt;\n                            &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot; name=&quot;button&quot;&gt;Save&lt;/button&gt;\n                        &lt;/div&gt;\n\n                    &lt;/div&gt;&lt;!-- end form-group --&gt;\n                &lt;/fieldset&gt;\n            &lt;/form&gt;\n</code></pre>\n<p>This is the uncomplicated routine for saving, but it's at this point that the ID becomes zero and the result is that the correct <code>Job</code> is <em>not</em> updated, but a totally new row is inserted into the database table:</p>\n<pre><code>    @RequestMapping(value = &quot;/savejob&quot;, method = RequestMethod.POST)\n    // public String saveJob(@RequestParam Job updateJob) {\n    public String saveJob(@ModelAttribute(&quot;updateJob&quot;) Job updateJob) {\n        if(log.isDebugEnabled()) {\n            log.debug(&quot;/savejob: saving Job with id {} and date {}&quot;, updateJob.getId(), updateJob.getDate());\n        }\n        repository.save(updateJob);\n        return &quot;controlpanel&quot;;\n    }\n</code></pre>\n<p>The definition of <code>Job</code> includes:</p>\n<pre><code>@Entity\npublic class Job {\n    @Id\n    // @GeneratedValue(strategy=GenerationType.SEQUENCE)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    // @GeneratedValue(strategy=GenerationType.AUTO)\n    private long id;\n    @Column(name = &quot;Date&quot;, nullable = false, columnDefinition = &quot;DATE&quot;)\n    private LocalDate date;\n    private String place;\n    private double amount;\n    @Column(name = &quot;Billed&quot;, nullable = false, columnDefinition = &quot;TINYINT(1)&quot;)\n    private boolean billed;\n    @Column(name = &quot;Paid&quot;, nullable = false, columnDefinition = &quot;TINYINT(1)&quot;)\n    private boolean paid;\n    private String notes;\n</code></pre>\n<p>What is going wrong?</p>\n"},{"tags":["java","hibernate","jpa","hibernate-mapping","many-to-one"],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":75,"is_accepted":true,"score":75,"last_activity_date":1695304516,"creation_date":1410156716,"answer_id":25718313,"question_id":25718229,"body_markdown":"The `@ManyToOne` associations are optional by default, so you don&#39;t need to set anything if you want them to be nullable.\r\n\r\nHowever, because you set the `optional=false` attribute, you made it mandatory.\r\n\r\nSo instead of:\r\n\r\n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\r\n\r\nSet it like this:\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n\r\nThe [`optional`](https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/manytoone#optional()) is `true` by default.\r\n\r\nOn the other hand, the `@Column(nullable=true)` is to instruct the DDL generation tool to include a `NULL` SQL column type constraint.","title":"Can a @ManyToOne JPA relation be null?","body":"<p>The <code>@ManyToOne</code> associations are optional by default, so you don't need to set anything if you want them to be nullable.</p>\n<p>However, because you set the <code>optional=false</code> attribute, you made it mandatory.</p>\n<p>So instead of:</p>\n<pre><code>@ManyToOne(optional = false, fetch = FetchType.LAZY)\n</code></pre>\n<p>Set it like this:</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY)\n</code></pre>\n<p>The <a href=\"https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/manytoone#optional()\" rel=\"noreferrer\"><code>optional</code></a> is <code>true</code> by default.</p>\n<p>On the other hand, the <code>@Column(nullable=true)</code> is to instruct the DDL generation tool to include a <code>NULL</code> SQL column type constraint.</p>\n"},{"tags":[],"owner":{"account_id":2360664,"reputation":111,"user_id":2067390,"display_name":"Sarwar kamal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1410157517,"creation_date":1410157517,"answer_id":25718464,"question_id":25718229,"body_markdown":"try this:\r\n\r\n    @JoinColumn(name = &quot;subType_id&quot;, nullable = true)","title":"Can a @ManyToOne JPA relation be null?","body":"<p>try this:</p>\n\n<pre><code>@JoinColumn(name = \"subType_id\", nullable = true)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1062565,"reputation":1464,"user_id":1063882,"accept_rate":60,"display_name":"Oleksandr_DJ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542853497,"creation_date":1542853497,"answer_id":53423045,"question_id":25718229,"body_markdown":"Only this helped me:\r\n\r\n    public class TopUp {\r\n        @ManyToOne\r\n        @JoinColumn(columnDefinition=&quot;integer&quot;, name=&quot;subtype_id&quot;)\r\n        private SubType subType;\r\n    }\r\n\r\ncolumnDefinition is a solution!","title":"Can a @ManyToOne JPA relation be null?","body":"<p>Only this helped me:</p>\n\n<pre><code>public class TopUp {\n    @ManyToOne\n    @JoinColumn(columnDefinition=\"integer\", name=\"subtype_id\")\n    private SubType subType;\n}\n</code></pre>\n\n<p>columnDefinition is a solution!</p>\n"}],"owner":{"account_id":1657768,"reputation":1355,"user_id":1526810,"accept_rate":52,"display_name":"Narges"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62354,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":25718313,"answer_count":3,"score":33,"last_activity_date":1695304516,"creation_date":1410156165,"question_id":25718229,"body_markdown":"I have a table that has foreign key of another table (many to one relationship) but i want it to be nullable.\r\n\r\nSomething like this:\r\n\r\n    public class SubType() {\r\n\t\r\n        @Id\r\n\t    @GeneratedValue(generator = &quot;system-uuid&quot;)\r\n\t    @GenericGenerator(name = &quot;system-uuid&quot;, strategy = &quot;uuid&quot;)\r\n        private String id;\r\n    \r\n    }\r\n    \r\n    public class TopUp {\r\n    \r\n        @Column(nullable = true)\r\n        @ManyToOne(optional = false, fetch = FetchType.LAZY)\r\n\t    private SubType subType;\r\n    \r\n    }\r\n\r\nBut `@Column(nullable = true)` throws the `NullPointerException` and  says subtype can not be null.\r\nIs there any way to get the ManyToOne accept null?","title":"Can a @ManyToOne JPA relation be null?","body":"<p>I have a table that has foreign key of another table (many to one relationship) but i want it to be nullable.</p>\n\n<p>Something like this:</p>\n\n<pre><code>public class SubType() {\n\n    @Id\n    @GeneratedValue(generator = \"system-uuid\")\n    @GenericGenerator(name = \"system-uuid\", strategy = \"uuid\")\n    private String id;\n\n}\n\npublic class TopUp {\n\n    @Column(nullable = true)\n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\n    private SubType subType;\n\n}\n</code></pre>\n\n<p>But <code>@Column(nullable = true)</code> throws the <code>NullPointerException</code> and  says subtype can not be null.\nIs there any way to get the ManyToOne accept null?</p>\n"},{"tags":["java","maven"],"answers":[{"tags":[],"owner":{"account_id":171331,"reputation":310904,"user_id":398670,"accept_rate":73,"display_name":"Craig Ringer"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1557984337,"creation_date":1557982101,"answer_id":56161022,"question_id":56161021,"body_markdown":"`-Xlint` is a compiler option, not a maven option or jvm option.\r\n\r\nOn the command line maven accepts `-Xlint` but it treats it as the `-X` maven option (&quot;debug&quot;) and ignores the rest. So it doesn&#39;t have the expected effect.\r\n\r\nIn the specific case of these two compiler options you can set Maven properties that result in the desired compiler options being set. Put these in your project&#39;s [`.mvn/maven.config`](https://stackoverflow.com/q/11568135/398670), `MAVEN_OPTS` env var, or on the command line:\r\n\r\n    -Dmaven.compiler.showWarnings=true\r\n    -Dmaven.compiler.showDeprecation=true\r\n\r\nSee [maven compiler plugin](https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html).\r\n\r\nYou can also use the `compilerArgs` property in your `pom.xml` or a Maven `settings.xml` user-defined profile. I don&#39;t see a way to set that List valued property as a system property. You can&#39;t use `compilerArgument` or `compilerArguments` either, they [don&#39;t have user properties](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#Parameter_Details).\r\n\r\nYou may also find it useful to control the compiler&#39;s logging level; for example, you can silence these warnings with:\r\n\r\n    -Dorg.slf4j.simpleLogger.log.org.apache.maven.plugin.compiler.CompilerMojo=warn\r\n\r\nNote that explicitly setting `-Dmaven.compiler.showWarnings=false` will *not* suppress the `-Xlint` messages. See https://stackoverflow.com/q/1554538/398670 . Maven doesn&#39;t appear to offer a way to set the relevant properties `-Xlint:-deprecated -Xlint:-unchecked` on the command line. You can&#39;t set them directly  `settings.xml` either because you can&#39;t set individual plugin properties. It has to be the `pom.xml`.","title":"How do I pass -Xlint:deprecation or -Xlint:unchecked to Maven?","body":"<p><code>-Xlint</code> is a compiler option, not a maven option or jvm option.</p>\n\n<p>On the command line maven accepts <code>-Xlint</code> but it treats it as the <code>-X</code> maven option (\"debug\") and ignores the rest. So it doesn't have the expected effect.</p>\n\n<p>In the specific case of these two compiler options you can set Maven properties that result in the desired compiler options being set. Put these in your project's <a href=\"https://stackoverflow.com/q/11568135/398670\"><code>.mvn/maven.config</code></a>, <code>MAVEN_OPTS</code> env var, or on the command line:</p>\n\n<pre><code>-Dmaven.compiler.showWarnings=true\n-Dmaven.compiler.showDeprecation=true\n</code></pre>\n\n<p>See <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\" rel=\"noreferrer\">maven compiler plugin</a>.</p>\n\n<p>You can also use the <code>compilerArgs</code> property in your <code>pom.xml</code> or a Maven <code>settings.xml</code> user-defined profile. I don't see a way to set that List valued property as a system property. You can't use <code>compilerArgument</code> or <code>compilerArguments</code> either, they <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#Parameter_Details\" rel=\"noreferrer\">don't have user properties</a>.</p>\n\n<p>You may also find it useful to control the compiler's logging level; for example, you can silence these warnings with:</p>\n\n<pre><code>-Dorg.slf4j.simpleLogger.log.org.apache.maven.plugin.compiler.CompilerMojo=warn\n</code></pre>\n\n<p>Note that explicitly setting <code>-Dmaven.compiler.showWarnings=false</code> will <em>not</em> suppress the <code>-Xlint</code> messages. See <a href=\"https://stackoverflow.com/q/1554538/398670\">How can I suppress javac warnings about deprecated api?</a> . Maven doesn't appear to offer a way to set the relevant properties <code>-Xlint:-deprecated -Xlint:-unchecked</code> on the command line. You can't set them directly  <code>settings.xml</code> either because you can't set individual plugin properties. It has to be the <code>pom.xml</code>.</p>\n"},{"tags":[],"owner":{"account_id":6500168,"reputation":930,"user_id":5116356,"accept_rate":100,"display_name":"luca.vercelli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695304168,"creation_date":1695304168,"answer_id":77150898,"question_id":56161021,"body_markdown":"In my program, I added `-Dmaven.compiler.showWarnings=true -Dmaven.compiler.showDeprecation=true` and Maven still told me `Recompile with -Xlint:unchecked for details`.\r\n\r\nI am using Maven 3.9.0 and jdk 11.\r\n\r\nI solved adding required arguments in `pom.xml`:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;compilerArgument&gt;-Xlint:unchecked&lt;/compilerArgument&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n","title":"How do I pass -Xlint:deprecation or -Xlint:unchecked to Maven?","body":"<p>In my program, I added <code>-Dmaven.compiler.showWarnings=true -Dmaven.compiler.showDeprecation=true</code> and Maven still told me <code>Recompile with -Xlint:unchecked for details</code>.</p>\n<p>I am using Maven 3.9.0 and jdk 11.</p>\n<p>I solved adding required arguments in <code>pom.xml</code>:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;compilerArgument&gt;-Xlint:unchecked&lt;/compilerArgument&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":171331,"reputation":310904,"user_id":398670,"accept_rate":73,"display_name":"Craig Ringer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5075,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1695304168,"creation_date":1557982101,"question_id":56161021,"body_markdown":"When I build my project I get errors like:\r\n\r\n```\r\n[INFO] SomeClass.java: Some input files use or override a deprecated API.\r\n[INFO] SomeClass.java: Recompile with -Xlint:deprecation for details.\r\n[INFO] SomeClass.java: Some input files use unchecked or unsafe operations.\r\n[INFO] SomeClass.java: Recompile with -Xlint:unchecked for details.\r\n```\r\n\r\nBut when I put `-Xlint:deprecation` or `-Xlint:unchecked` in my `MAVEN_OPTS` or `.mvn/maven.config` I get:\r\n\r\n    $ MAVEN_OPTS=&quot;-Xlint:unchecked &quot; mvn -B clean test \r\n    Unrecognized option: -Xlint:unchecked\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n\r\nWhat gives?","title":"How do I pass -Xlint:deprecation or -Xlint:unchecked to Maven?","body":"<p>When I build my project I get errors like:</p>\n\n<pre><code>[INFO] SomeClass.java: Some input files use or override a deprecated API.\n[INFO] SomeClass.java: Recompile with -Xlint:deprecation for details.\n[INFO] SomeClass.java: Some input files use unchecked or unsafe operations.\n[INFO] SomeClass.java: Recompile with -Xlint:unchecked for details.\n</code></pre>\n\n<p>But when I put <code>-Xlint:deprecation</code> or <code>-Xlint:unchecked</code> in my <code>MAVEN_OPTS</code> or <code>.mvn/maven.config</code> I get:</p>\n\n<pre><code>$ MAVEN_OPTS=\"-Xlint:unchecked \" mvn -B clean test \nUnrecognized option: -Xlint:unchecked\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n\n<p>What gives?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7637243,"reputation":571,"user_id":6645112,"display_name":"Daxesh V"},"score":0,"creation_date":1695274529,"post_id":77147180,"comment_id":136003007,"body_markdown":"Create BLE simulator and test \n\nhttps://play.google.com/store/apps/details?id=io.github.webbluetoothcg.bletestperipheral","body":"Create BLE simulator and test   <a href=\"https://play.google.com/store/apps/details?id=io.github.webbluetoothcg.bletestperipheral\" rel=\"nofollow noreferrer\">play.google.com/store/apps/&hellip;</a>"},{"owner":{"account_id":11064381,"reputation":1063,"user_id":8124605,"display_name":"Risto"},"score":0,"creation_date":1695281962,"post_id":77147180,"comment_id":136004145,"body_markdown":"Which Bluetooth devices do you wan&#39;t to scan/discover?  *Bluetooth classic* or *Bluetooth low energy*","body":"Which Bluetooth devices do you wan&#39;t to scan/discover?  <i>Bluetooth classic</i> or <i>Bluetooth low energy</i>"},{"owner":{"account_id":29496908,"reputation":1,"user_id":22604735,"display_name":"lastminuter025"},"score":0,"creation_date":1695664039,"post_id":77147180,"comment_id":136051830,"body_markdown":"I want to discover BT low energy","body":"I want to discover BT low energy"}],"answers":[{"tags":[],"owner":{"account_id":25113732,"reputation":155,"user_id":18963042,"display_name":"Vishnu S Dharan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695304084,"creation_date":1695304084,"answer_id":77150888,"question_id":77147180,"body_markdown":"1. Try adding permission Bluetooth connect without location `&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; android:usesPermissionFlags=&quot;neverForLocation&quot; /&gt;`\r\n2. If you are trying to search for a beacon, then add Location permissions in Manifest and try turning ON Location.\r\n3. If you are scanning a BLE device you can use BluetoothLeScanner.startScan() method instead. ","title":"I am trying to develop an android app where I am scanning for nearby bluetooth devices. But when I run it, there are no results","body":"<ol>\n<li>Try adding permission Bluetooth connect without location <code>&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; android:usesPermissionFlags=&quot;neverForLocation&quot; /&gt;</code></li>\n<li>If you are trying to search for a beacon, then add Location permissions in Manifest and try turning ON Location.</li>\n<li>If you are scanning a BLE device you can use BluetoothLeScanner.startScan() method instead.</li>\n</ol>\n"}],"owner":{"account_id":29496908,"reputation":1,"user_id":22604735,"display_name":"lastminuter025"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695304084,"creation_date":1695270073,"question_id":77147180,"body_markdown":"I am developing an Android app in Java to scan for nearby Bluetooth devices. All permissions have been given, no errors in the code and yet when I run it, there are no results. The tutorials I followed seem to be old. Can anyone point out what can be done or show me some newer tutorial. Thanks in advance.\r\n\r\n\r\n```\r\npublic class ThirdActivity extends AppCompatActivity {\r\n\r\n    private BluetoothAdapter bluetoothAdapter;\r\n    private final int REQUEST_ENABLE_BT = 1;\r\n    private final int REQUEST_PERMISSION = 2;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.third_activity);\r\n\r\n        Button scanButton = findViewById(R.id.scanButton);\r\n\r\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\r\n\r\n        if (bluetoothAdapter == null) {\r\n            // Device does not support Bluetooth\r\n            Toast.makeText(this, &quot;Bluetooth is not available on this device.&quot;, Toast.LENGTH_SHORT).show();\r\n            finish();\r\n            return;\r\n        }\r\n\r\n        scanButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                checkBluetoothPermission();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void checkBluetoothPermission() {\r\n        // Check if BLUETOOTH and BLUETOOTH_CONNECT permissions are granted\r\n        int bluetoothPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH);\r\n        int bluetoothConnectPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT);\r\n\r\n        if (bluetoothPermission == PackageManager.PERMISSION_GRANTED &amp;&amp;\r\n                bluetoothConnectPermission == PackageManager.PERMISSION_GRANTED) {\r\n            // Permissions are granted, start scanning\r\n            startBluetoothScan();\r\n        }\r\n        else {\r\n            // Request permissions\r\n            ActivityCompat.requestPermissions(\r\n                    this,\r\n                    new String[]{Manifest.permission.BLUETOOTH, Manifest.permission.BLUETOOTH_CONNECT},\r\n                    REQUEST_PERMISSION\r\n            );\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults); // Call super\r\n\r\n        if (requestCode == REQUEST_PERMISSION) {\r\n            if (grantResults.length &gt; 0 &amp;&amp;\r\n                    grantResults[0] == PackageManager.PERMISSION_GRANTED &amp;&amp;\r\n                    grantResults[1] == PackageManager.PERMISSION_GRANTED) {\r\n                // Permissions granted\r\n                startBluetoothScan();\r\n            } else {\r\n                // Permission(s) denied\r\n                Toast.makeText(this, &quot;Permission(s) denied. Cannot scan for Bluetooth devices.&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n        int bluetoothPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH);\r\n        int bluetoothConnectPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT);\r\n        int bluetoothScanPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN);\r\n\r\n\r\n        if (bluetoothPermission == PackageManager.PERMISSION_GRANTED &amp;&amp;\r\n                bluetoothConnectPermission == PackageManager.PERMISSION_GRANTED &amp;&amp;\r\n                bluetoothScanPermission == PackageManager.PERMISSION_GRANTED) {\r\n            // Permissions are granted, start scanning\r\n            startBluetoothScan();\r\n        } else {\r\n            // Request permissions\r\n            ActivityCompat.requestPermissions(\r\n                    this,\r\n                    new String[]{\r\n                            Manifest.permission.BLUETOOTH,\r\n                            Manifest.permission.BLUETOOTH_CONNECT,\r\n                            Manifest.permission.BLUETOOTH_SCAN\r\n                    },\r\n                    REQUEST_PERMISSION\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private void startBluetoothScan() {\r\n        // Ensure Bluetooth is enabled\r\n        if (!bluetoothAdapter.isEnabled()) {\r\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n                // TODO: Consider calling\r\n                //    ActivityCompat#requestPermissions\r\n                // here to request the missing permissions, and then overriding\r\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                //                                          int[] grantResults)\r\n                // to handle the case where the user grants the permission. See the documentation\r\n                // for ActivityCompat#requestPermissions for more details.\r\n                return;\r\n            }\r\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\r\n        }\r\n        else {\r\n            // Bluetooth is enabled, start scanning\r\n            doBluetoothDiscovery();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == REQUEST_ENABLE_BT) {\r\n            if (resultCode == Activity.RESULT_OK) {\r\n                // Bluetooth is enabled, start scan\r\n                doBluetoothDiscovery();\r\n            } else {\r\n                // User canceled enabling Bluetooth\r\n                Toast.makeText(this, &quot;Bluetooth must be enabled to scan for devices.&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void doBluetoothDiscovery() {\r\n        // Register a BroadcastReceiver to listen for discovered devices\r\n        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\r\n        registerReceiver(receiver, filter);\r\n\r\n        // Start discovery\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n            // TODO: Consider calling\r\n            //    ActivityCompat#requestPermissions\r\n            // here to request the missing permissions, and then overriding\r\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n            //                                          int[] grantResults)\r\n            // to handle the case where the user grants the permission. See the documentation\r\n            // for ActivityCompat#requestPermissions for more details.\r\n            return;\r\n        }\r\n        if (bluetoothAdapter.isDiscovering()) {\r\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n                // TODO: Consider calling\r\n                //    ActivityCompat#requestPermissions\r\n                // here to request the missing permissions, and then overriding\r\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                //                                          int[] grantResults)\r\n                // to handle the case where the user grants the permission. See the documentation\r\n                // for ActivityCompat#requestPermissions for more details.\r\n                return;\r\n            }\r\n            bluetoothAdapter.cancelDiscovery();\r\n        }\r\n        bluetoothAdapter.startDiscovery();\r\n    }\r\n\r\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\r\n        public void onReceive(Context context, Intent intent) {\r\n            String action = intent.getAction();\r\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n                // Device found\r\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                if (ActivityCompat.checkSelfPermission(ThirdActivity.this, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n                    // TODO: Consider calling\r\n                    //    ActivityCompat#requestPermissions\r\n                    // here to request the missing permissions, and then overriding\r\n                    //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                    //                                          int[] grantResults)\r\n                    // to handle the case where the user grants the permission. See the documentation\r\n                    // for ActivityCompat#requestPermissions for more details.\r\n                    return;\r\n                }\r\n                String deviceName = device.getName();\r\n                String deviceAddress = device.getAddress();\r\n                // Handle the discovered device, e.g., add it to a list or display it\r\n                System.out.println(deviceName+deviceAddress);\r\n                Toast.makeText(ThirdActivity.this, &quot;Found Bluetooth Device: &quot; + deviceName + &quot; (&quot; + deviceAddress + &quot;)&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    };\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        // Unregister the BroadcastReceiver when the activity is destroyed\r\n        unregisterReceiver(receiver);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI thought maybe it was a mistake with the way of displaying the results, so i replaced toast with a listview object. But that didn&#39;t help either.","title":"I am trying to develop an android app where I am scanning for nearby bluetooth devices. But when I run it, there are no results","body":"<p>I am developing an Android app in Java to scan for nearby Bluetooth devices. All permissions have been given, no errors in the code and yet when I run it, there are no results. The tutorials I followed seem to be old. Can anyone point out what can be done or show me some newer tutorial. Thanks in advance.</p>\n<pre><code>public class ThirdActivity extends AppCompatActivity {\n\n    private BluetoothAdapter bluetoothAdapter;\n    private final int REQUEST_ENABLE_BT = 1;\n    private final int REQUEST_PERMISSION = 2;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.third_activity);\n\n        Button scanButton = findViewById(R.id.scanButton);\n\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\n\n        if (bluetoothAdapter == null) {\n            // Device does not support Bluetooth\n            Toast.makeText(this, &quot;Bluetooth is not available on this device.&quot;, Toast.LENGTH_SHORT).show();\n            finish();\n            return;\n        }\n\n        scanButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                checkBluetoothPermission();\n            }\n        });\n    }\n\n    private void checkBluetoothPermission() {\n        // Check if BLUETOOTH and BLUETOOTH_CONNECT permissions are granted\n        int bluetoothPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH);\n        int bluetoothConnectPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT);\n\n        if (bluetoothPermission == PackageManager.PERMISSION_GRANTED &amp;&amp;\n                bluetoothConnectPermission == PackageManager.PERMISSION_GRANTED) {\n            // Permissions are granted, start scanning\n            startBluetoothScan();\n        }\n        else {\n            // Request permissions\n            ActivityCompat.requestPermissions(\n                    this,\n                    new String[]{Manifest.permission.BLUETOOTH, Manifest.permission.BLUETOOTH_CONNECT},\n                    REQUEST_PERMISSION\n            );\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults); // Call super\n\n        if (requestCode == REQUEST_PERMISSION) {\n            if (grantResults.length &gt; 0 &amp;&amp;\n                    grantResults[0] == PackageManager.PERMISSION_GRANTED &amp;&amp;\n                    grantResults[1] == PackageManager.PERMISSION_GRANTED) {\n                // Permissions granted\n                startBluetoothScan();\n            } else {\n                // Permission(s) denied\n                Toast.makeText(this, &quot;Permission(s) denied. Cannot scan for Bluetooth devices.&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n        int bluetoothPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH);\n        int bluetoothConnectPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT);\n        int bluetoothScanPermission = ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN);\n\n\n        if (bluetoothPermission == PackageManager.PERMISSION_GRANTED &amp;&amp;\n                bluetoothConnectPermission == PackageManager.PERMISSION_GRANTED &amp;&amp;\n                bluetoothScanPermission == PackageManager.PERMISSION_GRANTED) {\n            // Permissions are granted, start scanning\n            startBluetoothScan();\n        } else {\n            // Request permissions\n            ActivityCompat.requestPermissions(\n                    this,\n                    new String[]{\n                            Manifest.permission.BLUETOOTH,\n                            Manifest.permission.BLUETOOTH_CONNECT,\n                            Manifest.permission.BLUETOOTH_SCAN\n                    },\n                    REQUEST_PERMISSION\n            );\n        }\n\n    }\n\n\n    private void startBluetoothScan() {\n        // Ensure Bluetooth is enabled\n        if (!bluetoothAdapter.isEnabled()) {\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n                // TODO: Consider calling\n                //    ActivityCompat#requestPermissions\n                // here to request the missing permissions, and then overriding\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                //                                          int[] grantResults)\n                // to handle the case where the user grants the permission. See the documentation\n                // for ActivityCompat#requestPermissions for more details.\n                return;\n            }\n            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\n        }\n        else {\n            // Bluetooth is enabled, start scanning\n            doBluetoothDiscovery();\n        }\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode == REQUEST_ENABLE_BT) {\n            if (resultCode == Activity.RESULT_OK) {\n                // Bluetooth is enabled, start scan\n                doBluetoothDiscovery();\n            } else {\n                // User canceled enabling Bluetooth\n                Toast.makeText(this, &quot;Bluetooth must be enabled to scan for devices.&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    private void doBluetoothDiscovery() {\n        // Register a BroadcastReceiver to listen for discovered devices\n        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\n        registerReceiver(receiver, filter);\n\n        // Start discovery\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n            return;\n        }\n        if (bluetoothAdapter.isDiscovering()) {\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n                // TODO: Consider calling\n                //    ActivityCompat#requestPermissions\n                // here to request the missing permissions, and then overriding\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                //                                          int[] grantResults)\n                // to handle the case where the user grants the permission. See the documentation\n                // for ActivityCompat#requestPermissions for more details.\n                return;\n            }\n            bluetoothAdapter.cancelDiscovery();\n        }\n        bluetoothAdapter.startDiscovery();\n    }\n\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n                // Device found\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                if (ActivityCompat.checkSelfPermission(ThirdActivity.this, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n                    // TODO: Consider calling\n                    //    ActivityCompat#requestPermissions\n                    // here to request the missing permissions, and then overriding\n                    //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                    //                                          int[] grantResults)\n                    // to handle the case where the user grants the permission. See the documentation\n                    // for ActivityCompat#requestPermissions for more details.\n                    return;\n                }\n                String deviceName = device.getName();\n                String deviceAddress = device.getAddress();\n                // Handle the discovered device, e.g., add it to a list or display it\n                System.out.println(deviceName+deviceAddress);\n                Toast.makeText(ThirdActivity.this, &quot;Found Bluetooth Device: &quot; + deviceName + &quot; (&quot; + deviceAddress + &quot;)&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    };\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        // Unregister the BroadcastReceiver when the activity is destroyed\n        unregisterReceiver(receiver);\n    }\n}\n</code></pre>\n<p>I thought maybe it was a mistake with the way of displaying the results, so i replaced toast with a listview object. But that didn't help either.</p>\n"},{"tags":["java","spring-boot","parallel-processing"],"comments":[{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":0,"creation_date":1486820593,"post_id":42176468,"comment_id":71516494,"body_markdown":"How do you perform parallel requests?","body":"How do you perform parallel requests?"},{"owner":{"account_id":1839892,"reputation":743,"user_id":1669515,"display_name":"algojava"},"score":0,"creation_date":1486820805,"post_id":42176468,"comment_id":71516567,"body_markdown":"how do you you test to call your HelloController endpoint ? By using your browser(open 2 tab) or unit-testing (use threading)?","body":"how do you you test to call your HelloController endpoint ? By using your browser(open 2 tab) or unit-testing (use threading)?"},{"owner":{"account_id":3274522,"reputation":242,"user_id":2757000,"accept_rate":60,"display_name":"gregfqt"},"score":1,"creation_date":1486820820,"post_id":42176468,"comment_id":71516573,"body_markdown":"&quot;Since I already learned that a @RestController will be instantiated as singleton, it is clear for me, that multiple requests (which are handled by the same method) will be processed sequentially.&quot; This assertion is false. In a servlet container, each request is processed in an different thread. Unless your controller method is synchronized, requests will be processed by your controller in parrallel","body":"&quot;Since I already learned that a @RestController will be instantiated as singleton, it is clear for me, that multiple requests (which are handled by the same method) will be processed sequentially.&quot; This assertion is false. In a servlet container, each request is processed in an different thread. Unless your controller method is synchronized, requests will be processed by your controller in parrallel"},{"owner":{"account_id":3274522,"reputation":242,"user_id":2757000,"accept_rate":60,"display_name":"gregfqt"},"score":0,"creation_date":1486820961,"post_id":42176468,"comment_id":71516631,"body_markdown":"Moreover, as your controller is a singleton, `@PostConstruct` and `@PreDestroy` should be called only once during your container lifecycle","body":"Moreover, as your controller is a singleton, <code>@PostConstruct</code> and <code>@PreDestroy</code> should be called only once during your container lifecycle"},{"owner":{"account_id":1839892,"reputation":743,"user_id":1669515,"display_name":"algojava"},"score":0,"creation_date":1486821136,"post_id":42176468,"comment_id":71516682,"body_markdown":"@gregfqt: he modify the Controller to use scope = &quot;request&quot;","body":"@gregfqt: he modify the Controller to use scope = &quot;request&quot;"},{"owner":{"account_id":3274522,"reputation":242,"user_id":2757000,"accept_rate":60,"display_name":"gregfqt"},"score":0,"creation_date":1486821326,"post_id":42176468,"comment_id":71516743,"body_markdown":"@algojava oh, I didn&#39;t read carefully !","body":"@algojava oh, I didn&#39;t read carefully !"}],"answers":[{"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695303884,"creation_date":1486820934,"answer_id":42176607,"question_id":42176468,"body_markdown":"You wrote:\r\n\r\n&gt; Since I already learned that a @RestController will be instantiated as\r\n&gt; singleton, it is clear for me, that multiple requests (which are\r\n&gt; handled by the same method) will be processed sequentially.\r\n\r\n&quot;***...will be processed sequentially***&quot; - this is false statement. I even have no idea on what basis it was made. Until you make method synchronized (or will use other lock technics), it will be accessible by multiple threads simultaneously. \r\n\r\nIn second case you&#39;ve just configured it to create new instance for each request. I have only one idea explaining why do you receive sequential results in debugger: you perform this requests from browser sequentially as well.\r\n\r\nIf you want to test how multiply requests are perfectly handled even by 1st case, just open separate tabs in browser and start requests almost at the same time. ","title":"How to handle multiple requests in parallel with SpringBoot&#39;s @RestController?","body":"<p>You wrote:</p>\n<blockquote>\n<p>Since I already learned that a @RestController will be instantiated as\nsingleton, it is clear for me, that multiple requests (which are\nhandled by the same method) will be processed sequentially.</p>\n</blockquote>\n<p>&quot;<em><strong>...will be processed sequentially</strong></em>&quot; - this is false statement. I even have no idea on what basis it was made. Until you make method synchronized (or will use other lock technics), it will be accessible by multiple threads simultaneously.</p>\n<p>In second case you've just configured it to create new instance for each request. I have only one idea explaining why do you receive sequential results in debugger: you perform this requests from browser sequentially as well.</p>\n<p>If you want to test how multiply requests are perfectly handled even by 1st case, just open separate tabs in browser and start requests almost at the same time.</p>\n"},{"tags":[],"owner":{"account_id":1680363,"reputation":7992,"user_id":1544715,"accept_rate":71,"display_name":"Magnus"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1486820945,"creation_date":1486820945,"answer_id":42176610,"question_id":42176468,"body_markdown":"The controller being a singleton has nothing to do with whether it can be accessed concurrently.  \r\n\r\nYou really shouldn&#39;t need to use request based scoping unless you have some mutable field that cant be shared across threads, but implementing something like that is probably just bad design.  \r\n\r\nI imagine the reason you are seeing the two requests take 30 seconds is because you arent actually making concurrent requests, rather you are waiting for the first request to complete before starting the second.","title":"How to handle multiple requests in parallel with SpringBoot&#39;s @RestController?","body":"<p>The controller being a singleton has nothing to do with whether it can be accessed concurrently.  </p>\n\n<p>You really shouldn't need to use request based scoping unless you have some mutable field that cant be shared across threads, but implementing something like that is probably just bad design.  </p>\n\n<p>I imagine the reason you are seeing the two requests take 30 seconds is because you arent actually making concurrent requests, rather you are waiting for the first request to complete before starting the second.</p>\n"},{"tags":[],"owner":{"account_id":1839892,"reputation":743,"user_id":1669515,"display_name":"algojava"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1499775525,"creation_date":1486821081,"answer_id":42176640,"question_id":42176468,"body_markdown":"I am using Spring since 2009, I know that their Controller is Singleton.\r\nBut it doesn&#39;t mean they process your request sequentially(wait for one to finish, then execute the next one).\r\n\r\n\r\nThe example codes from Spring Boot website are able to handle parallel request. It will create singleton instance of `HelloController` but Spring is able to call `index()` multiple times at the same time(parallel).\r\n\r\n    @RestController\r\n    public class HelloController {\r\n    \r\n        @RequestMapping(&quot;/&quot;)\r\n        public String index() {\r\n            return &quot;Greetings from Spring Boot!&quot;;\r\n        }\r\n    \r\n    }","title":"How to handle multiple requests in parallel with SpringBoot&#39;s @RestController?","body":"<p>I am using Spring since 2009, I know that their Controller is Singleton.\nBut it doesn't mean they process your request sequentially(wait for one to finish, then execute the next one).</p>\n\n<p>The example codes from Spring Boot website are able to handle parallel request. It will create singleton instance of <code>HelloController</code> but Spring is able to call <code>index()</code> multiple times at the same time(parallel).</p>\n\n<pre><code>@RestController\npublic class HelloController {\n\n    @RequestMapping(\"/\")\n    public String index() {\n        return \"Greetings from Spring Boot!\";\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16026602,"reputation":1,"user_id":11566682,"display_name":"Mahmoud H.Mohamed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637336320,"creation_date":1637335993,"answer_id":70037289,"question_id":42176468,"body_markdown":"Actually, The problem is not from your controller, the tomcat server create a thread for each request you send, the problem is from the browser itself if you send 2 requests to the same endpoint the browser stalls the second request until the first one get the response &quot;I don&#39;t know why or how to fix it&quot;, and you will find that the actual time server take is the time form sending  the request to getting the first byte of the response TTFB time [check this screenshot from browser Networking of the second request][1], you can use other browser or another device connected to your network to test sending 2 requests at the same time \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bHcM0.png","title":"How to handle multiple requests in parallel with SpringBoot&#39;s @RestController?","body":"<p>Actually, The problem is not from your controller, the tomcat server create a thread for each request you send, the problem is from the browser itself if you send 2 requests to the same endpoint the browser stalls the second request until the first one get the response &quot;I don't know why or how to fix it&quot;, and you will find that the actual time server take is the time form sending  the request to getting the first byte of the response TTFB time <a href=\"https://i.stack.imgur.com/bHcM0.png\" rel=\"nofollow noreferrer\">check this screenshot from browser Networking of the second request</a>, you can use other browser or another device connected to your network to test sending 2 requests at the same time</p>\n"}],"owner":{"account_id":64961,"reputation":3691,"user_id":191466,"accept_rate":83,"display_name":"philonous"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16452,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1695303884,"creation_date":1486820164,"question_id":42176468,"body_markdown":"I am relatively new to Spring Boot and started with the very simple example from their [getting started site](https://spring.io/guides/gs/spring-boot/), which is (on the controller side):  \r\n\r\n    @RestController\r\n    public class HelloController {\r\n\r\n        @RequestMapping(&quot;/&quot;)\r\n        public String index() {\r\n            return &quot;Greetings from Spring Boot!&quot;;\r\n        }\r\n\r\n    }\r\n\r\nWhat I want now, is that multiple (potentially long running) requests **of the same controller** can be served in **parallel**.\r\n\r\n&lt;del&gt;Since I already learned that a `@RestController` will be instantiated as singleton, it is clear for me, that multiple requests (which are handled by the same method) will be processed **sequentially**.&lt;/del&gt;\r\n**Update**: My bad: I thought it was related to the fact that the controller was a singleton. But true: Why should it not be able to run in parallel then?\r\n\r\nSo I changed the example from above as follows so that a new instance of the controller is created on every request and with some means of inspecting what&#39;s actually happening:\r\n\r\n    @RestController\r\n    @Scope(value = &quot;request&quot;)\r\n    public class HelloController {\r\n\r\n        private static AtomicInteger count = new AtomicInteger(0);\r\n\r\n        public HelloController() {\r\n            count.incrementAndGet();\r\n        }\r\n\r\n        @PostConstruct\r\n        public void init() {\r\n            System.out.println(&quot;start request &quot; + count);\r\n        }\r\n\r\n        @PreDestroy\r\n        public void onDestroy() {\r\n            System.out.println(&quot;end request &quot; + count);\r\n        }\r\n\r\n        @RequestMapping(&quot;/&quot;)\r\n        public String index() throws InterruptedException {\r\n            LocalDateTime now = LocalDateTime.now();\r\n            TimeUnit.SECONDS.sleep(15);\r\n            System.out.println(now);\r\n            return &quot;Greetings from Spring Boot! &quot; + now + &quot;  &quot; + count.get();\r\n        }\r\n\r\n    }\r\n\r\nNow I would expect to see that the requests are handled in parallel in about 15 seconds, but in fact I can only see that it is obviously processed sequentially and that it takes 30 seconds (on stdout):\r\n\r\n    start request 1\r\n    2017-02-11T14:19:47.429\r\n    end request 1\r\n    start request 2\r\n    2017-02-11T14:20:02.467\r\n    end request 2\r\n\r\nSo my question is: How can I achieve that such requests are processed in parallel since it is obviously not sufficient to create an instance for each request? \r\n\r\n----\r\nLittle remark: I already tried using the `@Asnync` annotation in combination with `@EnableAsync` for the application class, but this seems to be a &quot;fire and forget&quot; such that I cannot get a response to show on the client side.\r\n\r\nSeveral entries here on stackoverflow (eg. [this](https://stackoverflow.com/questions/38500627/rest-api-for-processing-parallel-http-get-requests) and [this](https://stackoverflow.com/questions/27681570/spring-parallel-execution-of-a-method)) were interesting, but did not answer my question either, neither did this tutorial about [asynchronous methods](https://spring.io/guides/gs/async-method/). \r\n\r\n----\r\n**Update**: Since several people pointed out that the issue may be related to the way I tested, I tried to run it with a different browser. Interestingly enough I experienced the same issues on Chrome as well as on Firefox. But when doing one request from each, it showed the expected behavior (serving the requests in parallel) – so I was fooled by the browers ... ","title":"How to handle multiple requests in parallel with SpringBoot&#39;s @RestController?","body":"<p>I am relatively new to Spring Boot and started with the very simple example from their <a href=\"https://spring.io/guides/gs/spring-boot/\" rel=\"nofollow noreferrer\">getting started site</a>, which is (on the controller side):  </p>\n\n<pre><code>@RestController\npublic class HelloController {\n\n    @RequestMapping(\"/\")\n    public String index() {\n        return \"Greetings from Spring Boot!\";\n    }\n\n}\n</code></pre>\n\n<p>What I want now, is that multiple (potentially long running) requests <strong>of the same controller</strong> can be served in <strong>parallel</strong>.</p>\n\n<p><del>Since I already learned that a <code>@RestController</code> will be instantiated as singleton, it is clear for me, that multiple requests (which are handled by the same method) will be processed <strong>sequentially</strong>.</del>\n<strong>Update</strong>: My bad: I thought it was related to the fact that the controller was a singleton. But true: Why should it not be able to run in parallel then?</p>\n\n<p>So I changed the example from above as follows so that a new instance of the controller is created on every request and with some means of inspecting what's actually happening:</p>\n\n<pre><code>@RestController\n@Scope(value = \"request\")\npublic class HelloController {\n\n    private static AtomicInteger count = new AtomicInteger(0);\n\n    public HelloController() {\n        count.incrementAndGet();\n    }\n\n    @PostConstruct\n    public void init() {\n        System.out.println(\"start request \" + count);\n    }\n\n    @PreDestroy\n    public void onDestroy() {\n        System.out.println(\"end request \" + count);\n    }\n\n    @RequestMapping(\"/\")\n    public String index() throws InterruptedException {\n        LocalDateTime now = LocalDateTime.now();\n        TimeUnit.SECONDS.sleep(15);\n        System.out.println(now);\n        return \"Greetings from Spring Boot! \" + now + \"  \" + count.get();\n    }\n\n}\n</code></pre>\n\n<p>Now I would expect to see that the requests are handled in parallel in about 15 seconds, but in fact I can only see that it is obviously processed sequentially and that it takes 30 seconds (on stdout):</p>\n\n<pre><code>start request 1\n2017-02-11T14:19:47.429\nend request 1\nstart request 2\n2017-02-11T14:20:02.467\nend request 2\n</code></pre>\n\n<p>So my question is: How can I achieve that such requests are processed in parallel since it is obviously not sufficient to create an instance for each request? </p>\n\n<hr>\n\n<p>Little remark: I already tried using the <code>@Asnync</code> annotation in combination with <code>@EnableAsync</code> for the application class, but this seems to be a \"fire and forget\" such that I cannot get a response to show on the client side.</p>\n\n<p>Several entries here on stackoverflow (eg. <a href=\"https://stackoverflow.com/questions/38500627/rest-api-for-processing-parallel-http-get-requests\">this</a> and <a href=\"https://stackoverflow.com/questions/27681570/spring-parallel-execution-of-a-method\">this</a>) were interesting, but did not answer my question either, neither did this tutorial about <a href=\"https://spring.io/guides/gs/async-method/\" rel=\"nofollow noreferrer\">asynchronous methods</a>. </p>\n\n<hr>\n\n<p><strong>Update</strong>: Since several people pointed out that the issue may be related to the way I tested, I tried to run it with a different browser. Interestingly enough I experienced the same issues on Chrome as well as on Firefox. But when doing one request from each, it showed the expected behavior (serving the requests in parallel) – so I was fooled by the browers ... </p>\n"},{"tags":["java","android","cryptography","key-pair"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1695302968,"post_id":77150700,"comment_id":136008583,"body_markdown":"I would open the key store in https://keystore-explorer.org which will identify the key store type (even if it is a JKS file it doesn&#39;t have to be a Java KeyStore File). And then I would recommend to explicitly set the KeyStore type instead of using `KeyStore.getDefaultType()`.","body":"I would open the key store in <a href=\"https://keystore-explorer.org\" rel=\"nofollow noreferrer\">keystore-explorer.org</a> which will identify the key store type (even if it is a JKS file it doesn&#39;t have to be a Java KeyStore File). And then I would recommend to explicitly set the KeyStore type instead of using <code>KeyStore.getDefaultType()</code>."},{"owner":{"account_id":1287196,"reputation":764,"user_id":1240052,"accept_rate":41,"display_name":"Hajitsu"},"score":0,"creation_date":1695303171,"post_id":77150700,"comment_id":136008635,"body_markdown":"@Robert I opened with the Keystore Explorer app. It showed that the algorithm is EC and 256. Where I can find the store type?","body":"@Robert I opened with the Keystore Explorer app. It showed that the algorithm is EC and 256. Where I can find the store type?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1695310383,"post_id":77150700,"comment_id":136010231,"body_markdown":"Have a look at the status bar at the bottom. It starts `KeyStore Type: ...`.","body":"Have a look at the status bar at the bottom. It starts <code>KeyStore Type: ...</code>."},{"owner":{"account_id":1287196,"reputation":764,"user_id":1240052,"accept_rate":41,"display_name":"Hajitsu"},"score":0,"creation_date":1695312863,"post_id":77150700,"comment_id":136010785,"body_markdown":"@Robert It says the key store type is JKS, I changed the code to `KeyStore.getInstance(&quot;JKS&quot;)` but the `java.security.KeyStoreException: JKS not found` fired.","body":"@Robert It says the key store type is JKS, I changed the code to <code>KeyStore.getInstance(&quot;JKS&quot;)</code> but the <code>java.security.KeyStoreException: JKS not found</code> fired."}],"owner":{"account_id":1287196,"reputation":764,"user_id":1240052,"accept_rate":41,"display_name":"Hajitsu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695303400,"creation_date":1695302637,"question_id":77150700,"body_markdown":"I have a `JKS` file in `/src/main/res/raw/ecc.jks`. The `EC` algorithm makes the `JKS` file with 256 lengths of key size. My issue is that I want to extract the private and public keys of the `JKS` file and return the new KeyPair. I used the below method but got `java.io.IOException: Wrong version of key store`.\r\n\r\n    public KeyPair easyLoadJKS(String alias, String pass) {\r\n    \ttry {\r\n    \t\tString keyStoreType = KeyStore.getDefaultType();\r\n    \t\tKeyStore keystore = KeyStore.getInstance(keyStoreType);\r\n    \t\tInputStream in = _context.getResources().openRawResource(R.raw.ecc);\r\n    \t\tkeystore.load(in, pass.toCharArray());\r\n    \t\tKey key = keystore.getKey(alias, pass.toCharArray());\r\n    \t\tif (!(key instanceof PrivateKey))\r\n    \t\t\treturn null;\r\n    \t\tCertificate cert = keystore.getCertificate(alias);\r\n    \t\tPublicKey publicKey = cert.getPublicKey();\r\n    \t\treturn new KeyPair(publicKey, (PrivateKey) key);\r\n    \t} catch (Throwable e) {\r\n    \t\tSystem.out.println(e.getMessage());\r\n    \t\treturn null;\r\n    \t}\r\n    }\r\n\r\n\r\nThe Keystore Explorer app show the below details:\r\n\r\n[![Algorithem][1]][1]\r\n\r\n[![Certificate Details][2]][2]\r\n\r\n[![Private key details][3]][3]\r\n\r\n[![public key details][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ppfy8.png\r\n  [2]: https://i.stack.imgur.com/Gg6aZ.png\r\n  [3]: https://i.stack.imgur.com/2KpAM.png\r\n  [4]: https://i.stack.imgur.com/65YLP.png","title":"Android extract private and public key from JKS in assets","body":"<p>I have a <code>JKS</code> file in <code>/src/main/res/raw/ecc.jks</code>. The <code>EC</code> algorithm makes the <code>JKS</code> file with 256 lengths of key size. My issue is that I want to extract the private and public keys of the <code>JKS</code> file and return the new KeyPair. I used the below method but got <code>java.io.IOException: Wrong version of key store</code>.</p>\n<pre><code>public KeyPair easyLoadJKS(String alias, String pass) {\n    try {\n        String keyStoreType = KeyStore.getDefaultType();\n        KeyStore keystore = KeyStore.getInstance(keyStoreType);\n        InputStream in = _context.getResources().openRawResource(R.raw.ecc);\n        keystore.load(in, pass.toCharArray());\n        Key key = keystore.getKey(alias, pass.toCharArray());\n        if (!(key instanceof PrivateKey))\n            return null;\n        Certificate cert = keystore.getCertificate(alias);\n        PublicKey publicKey = cert.getPublicKey();\n        return new KeyPair(publicKey, (PrivateKey) key);\n    } catch (Throwable e) {\n        System.out.println(e.getMessage());\n        return null;\n    }\n}\n</code></pre>\n<p>The Keystore Explorer app show the below details:</p>\n<p><a href=\"https://i.stack.imgur.com/Ppfy8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ppfy8.png\" alt=\"Algorithem\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Gg6aZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gg6aZ.png\" alt=\"Certificate Details\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/2KpAM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2KpAM.png\" alt=\"Private key details\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/65YLP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/65YLP.png\" alt=\"public key details\" /></a></p>\n"},{"tags":["java","arrays","file","file-io"],"comments":[{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":0,"creation_date":1299876087,"post_id":5278019,"comment_id":5947154,"body_markdown":"Take a look at this answer http://stackoverflow.com/questions/4717838/text-file-parsing-using-java-suggestions-needed-on-which-one-to-use/4717928#4717928 ... does this suffice ?","body":"Take a look at this answer <a href=\"http://stackoverflow.com/questions/4717838/text-file-parsing-using-java-suggestions-needed-on-which-one-to-use/4717928#4717928\" title=\"text file parsing using java suggestions needed on which one to use\">stackoverflow.com/questions/4717838/&hellip;</a> ... does this suffice ?"}],"answers":[{"tags":[],"owner":{"account_id":47523,"reputation":89783,"user_id":140816,"accept_rate":90,"display_name":"Jo&#227;o Silva"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1299876835,"creation_date":1299876026,"answer_id":5278070,"question_id":5278019,"body_markdown":" 1. Wrap a [`BufferedReader`][1] around a `FileReader` so that you can easily read every line of the file;\r\n 2. Store the lines in a `List` (assuming you don&#39;t know how many lines you are going to read);\r\n 3. Convert the `List` to an array using `toArray`.\r\n\r\nSimple implementation:\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\r\n        BufferedReader reader = null;\r\n        try {\r\n            reader = new BufferedReader(new FileReader(&quot;file.txt&quot;));\r\n            String line = null;\r\n            while ((line = reader.readLine()) != null) {\r\n                lines.add(line);\r\n            }\r\n        } finally {\r\n            reader.close();\r\n        }\r\n        String[] array = lines.toArray();\r\n    }\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/io/BufferedReader.html\r\n","title":"Create an Array populating it by .txt elements","body":"<ol>\n<li>Wrap a <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/BufferedReader.html\" rel=\"nofollow\"><code>BufferedReader</code></a> around a <code>FileReader</code> so that you can easily read every line of the file;</li>\n<li>Store the lines in a <code>List</code> (assuming you don't know how many lines you are going to read);</li>\n<li>Convert the <code>List</code> to an array using <code>toArray</code>.</li>\n</ol>\n\n<p>Simple implementation:</p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n    List&lt;String&gt; lines = new ArrayList&lt;String&gt;();\n    BufferedReader reader = null;\n    try {\n        reader = new BufferedReader(new FileReader(\"file.txt\"));\n        String line = null;\n        while ((line = reader.readLine()) != null) {\n            lines.add(line);\n        }\n    } finally {\n        reader.close();\n    }\n    String[] array = lines.toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":130645,"reputation":81695,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1299876040,"creation_date":1299876040,"answer_id":5278073,"question_id":5278019,"body_markdown":"This smells like homework. If it is you should re-read your notes, and tell us what you&#39;ve tried.\r\n\r\nPersonally, I would use a Scanner (from java.util).\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    public class Franky {\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(new File(&quot;myfile.txt&quot;));\r\n            String[] items = new String[3]; // use ArrayList if you don&#39;t know how many\r\n            int i = 0;\r\n            while(sc.hasNextLine() &amp;&amp; i &lt; items.length) {\r\n                items[i] = sc.nextLine();\r\n                i++;\r\n            }\r\n        }\r\n    \r\n    }","title":"Create an Array populating it by .txt elements","body":"<p>This smells like homework. If it is you should re-read your notes, and tell us what you've tried.</p>\n\n<p>Personally, I would use a Scanner (from java.util).</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Franky {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(new File(\"myfile.txt\"));\n        String[] items = new String[3]; // use ArrayList if you don't know how many\n        int i = 0;\n        while(sc.hasNextLine() &amp;&amp; i &lt; items.length) {\n            items[i] = sc.nextLine();\n            i++;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4300596,"reputation":398,"user_id":3514386,"display_name":"AlexF"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695303327,"creation_date":1695303327,"answer_id":77150780,"question_id":5278019,"body_markdown":"This sums up to a single line in Java 7 as described in this [answer][1].\r\n\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n\r\n    String[] myArray = Files.readAllLines(Paths.get(&quot;file.txt&quot;)).toArray(new String[0]);\r\n\r\n  [1]: https://stackoverflow.com/a/12857273/3514386","title":"Create an Array populating it by .txt elements","body":"<p>This sums up to a single line in Java 7 as described in this <a href=\"https://stackoverflow.com/a/12857273/3514386\">answer</a>.</p>\n<pre><code>import java.nio.file.Files;\nimport java.nio.file.Paths;\n\nString[] myArray = Files.readAllLines(Paths.get(&quot;file.txt&quot;)).toArray(new String[0]);\n</code></pre>\n"}],"owner":{"account_id":76990,"reputation":2547,"user_id":220040,"accept_rate":92,"display_name":"Fseee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14818,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":5278070,"answer_count":3,"score":4,"last_activity_date":1695303327,"creation_date":1299875717,"question_id":5278019,"body_markdown":"I want to create an array, populating it while reading elements from a .txt file formatted like so:\r\n\r\n    item1\r\n    item2\r\n    item3\r\n\r\n\r\nSo the final result has to be an array like this:\r\n\r\n    String[] myArray = {item1, item2, item3}\r\n\r\nThanks in advance.","title":"Create an Array populating it by .txt elements","body":"<p>I want to create an array, populating it while reading elements from a .txt file formatted like so:</p>\n\n<pre><code>item1\nitem2\nitem3\n</code></pre>\n\n<p>So the final result has to be an array like this:</p>\n\n<pre><code>String[] myArray = {item1, item2, item3}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","generics","lambda","compiler-errors"],"comments":[{"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"score":0,"creation_date":1695213071,"post_id":77142333,"comment_id":135993719,"body_markdown":"The question&#39;s underlying is already answered at https://stackoverflow.com/questions/2559527/non-static-variable-cannot-be-referenced-from-a-static-context","body":"The question&#39;s underlying is already answered at <a href=\"https://stackoverflow.com/questions/2559527/non-static-variable-cannot-be-referenced-from-a-static-context\" title=\"non static variable cannot be referenced from a static context\">stackoverflow.com/questions/2559527/&hellip;</a>"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1695213110,"post_id":77142333,"comment_id":135993725,"body_markdown":"I just compiled your program.   I don&#39;t get that error message.  Not certain what @Data is doing but your class is missing a getter.  When I add the getter What I get is `The type Snippet2.Student does not define getName(Object) that is applicable here. The method get2(Function&lt;?,?&gt;) in the type Snippet2 is not applicable for the arguments (Student::getName)`","body":"I just compiled your program.   I don&#39;t get that error message.  Not certain what @Data is doing but your class is missing a getter.  When I add the getter What I get is <code>The type Snippet2.Student does not define getName(Object) that is applicable here. The method get2(Function&lt;?,?&gt;) in the type Snippet2 is not applicable for the arguments (Student::getName)</code>"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1695213174,"post_id":77142333,"comment_id":135993745,"body_markdown":"@WJS That annotation adds the getter.","body":"@WJS That annotation adds the getter."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695213213,"post_id":77142333,"comment_id":135993761,"body_markdown":"@StephenQu copy/pasting the exact code you wrote and compiling it: No errors. Hence, VTC: Not reproducible. Perhaps double check that you&#39;re compiling what you think you are compiling / that you have saved this file in your editor.","body":"@StephenQu copy/pasting the exact code you wrote and compiling it: No errors. Hence, VTC: Not reproducible. Perhaps double check that you&#39;re compiling what you think you are compiling / that you have saved this file in your editor."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1695213464,"post_id":77142333,"comment_id":135993822,"body_markdown":"@rzwitserloot Interesting you didn&#39;t get any compilation errors.  Something is awry.  I am using Eclipse.","body":"@rzwitserloot Interesting you didn&#39;t get any compilation errors.  Something is awry.  I am using Eclipse."},{"owner":{"account_id":23932137,"reputation":15,"user_id":17926482,"display_name":"Stephen Qu"},"score":0,"creation_date":1695213822,"post_id":77142333,"comment_id":135993916,"body_markdown":"@rzwitserloot I add error image above.  I am using idea","body":"@rzwitserloot I add error image above.  I am using idea"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695217156,"post_id":77142333,"comment_id":135994832,"body_markdown":"@WJS `@Data` is `lombok.Data`. `Function` is `java.util.function.Function`.","body":"@WJS <code>@Data</code> is <code>lombok.Data</code>. <code>Function</code> is <code>java.util.function.Function</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695302944,"post_id":77142333,"comment_id":136008577,"body_markdown":"What in the world.  How on earth is this a duplicate of a question about using non-static members in static methods?  Method references can be used anywhere.  Voting to reopen.","body":"What in the world.  How on earth is this a duplicate of a question about using non-static members in static methods?  Method references can be used anywhere.  Voting to reopen."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695222610,"creation_date":1695222610,"answer_id":77143775,"question_id":77142333,"body_markdown":"This is a tricky one.  It helps to recall that this:\r\n\r\n    Function&lt;?, ?&gt; fun\r\n\r\nis exactly the same as writing this:\r\n\r\n    Function&lt;? extends Object, ? extends Object&gt; fun\r\n\r\nWhen the compiler attempts to resolve a call to get2, such as `get2(Student::getName)`, it evaluates the generic parameters one by one.  First, it sees that the first parameter is `? extends Object`.  The compiler only knows that the first argument will be… Object or some subclass of Object.  (You, the human, know that it’s a Student instance, but the compiler doesn’t know that.)\r\n\r\nWith only that information at its disposal, the compiler is not able to assume that the argument has a getName method.\r\n\r\nI found this a little easier to understand by replacing `Student::getName` with a lambda:\r\n\r\n    get2(s -&gt; s.getName());\r\n\r\nThat also produces a compiler error, but the cause is more apparent:  `s` is only known to be Object or some subclass of Object, so how can the compiler assume it has a `getName()` method?\r\n\r\nBut if I tell the compiler exactly what type `s` is, it will compile:\r\n\r\n    get2((Student s) -&gt; s.getName());\r\n","title":"Java compile-error Non-static method cannot be referenced from a static context","body":"<p>This is a tricky one.  It helps to recall that this:</p>\n<pre><code>Function&lt;?, ?&gt; fun\n</code></pre>\n<p>is exactly the same as writing this:</p>\n<pre><code>Function&lt;? extends Object, ? extends Object&gt; fun\n</code></pre>\n<p>When the compiler attempts to resolve a call to get2, such as <code>get2(Student::getName)</code>, it evaluates the generic parameters one by one.  First, it sees that the first parameter is <code>? extends Object</code>.  The compiler only knows that the first argument will be… Object or some subclass of Object.  (You, the human, know that it’s a Student instance, but the compiler doesn’t know that.)</p>\n<p>With only that information at its disposal, the compiler is not able to assume that the argument has a getName method.</p>\n<p>I found this a little easier to understand by replacing <code>Student::getName</code> with a lambda:</p>\n<pre><code>get2(s -&gt; s.getName());\n</code></pre>\n<p>That also produces a compiler error, but the cause is more apparent:  <code>s</code> is only known to be Object or some subclass of Object, so how can the compiler assume it has a <code>getName()</code> method?</p>\n<p>But if I tell the compiler exactly what type <code>s</code> is, it will compile:</p>\n<pre><code>get2((Student s) -&gt; s.getName());\n</code></pre>\n"}],"owner":{"account_id":23932137,"reputation":15,"user_id":17926482,"display_name":"Stephen Qu"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1695302950,"creation_date":1695212178,"question_id":77142333,"body_markdown":"My code:\r\n\r\n``` java\r\npublic static void main(String[] args) {\r\n    // ok\r\n    get1(Student::getName);\r\n    // error! why?\r\n    get2(Student::getName);\r\n}\r\n\r\n\r\npublic static &lt;T, R&gt; void get1(Function&lt;T, R&gt; fun) {\r\n    // ok! why?\r\n    get2(fun);\r\n}\r\n\r\npublic static void get2(Function&lt;?, ?&gt; fun) {\r\n\r\n}\r\n\r\n@Data\r\nclass Student {\r\n    private String name;\r\n}\r\n```\r\nError:\r\n[enter image description here][1]\r\n\r\nWhy get2 compile error and report &#39;Non-static method cannot be referenced from a static context&#39;, but get1 is ok?\r\n\r\nThis problem may be caused by generics.\r\n\r\nHope someone can answer my confusion.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CBVe6.png","title":"Java compile-error Non-static method cannot be referenced from a static context","body":"<p>My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    // ok\n    get1(Student::getName);\n    // error! why?\n    get2(Student::getName);\n}\n\n\npublic static &lt;T, R&gt; void get1(Function&lt;T, R&gt; fun) {\n    // ok! why?\n    get2(fun);\n}\n\npublic static void get2(Function&lt;?, ?&gt; fun) {\n\n}\n\n@Data\nclass Student {\n    private String name;\n}\n</code></pre>\n<p>Error:\n<a href=\"https://i.stack.imgur.com/CBVe6.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Why get2 compile error and report 'Non-static method cannot be referenced from a static context', but get1 is ok?</p>\n<p>This problem may be caused by generics.</p>\n<p>Hope someone can answer my confusion.</p>\n"},{"tags":["java","amazon-web-services","email","amazon-s3","amazon-ses"],"answers":[{"tags":[],"owner":{"account_id":2591791,"reputation":8731,"user_id":2246345,"display_name":"samtoddler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613125530,"creation_date":1613125530,"answer_id":66170093,"question_id":66169654,"body_markdown":"[Q: Can Amazon SES send emails with attachments?](https://aws.amazon.com/ses/faqs/)\r\n\r\n&gt;You can also send email with attachments programmatically. To include an attachment in your email, construct a new multipart email message. In the message, include a MIME part that contains an appropriate Content-Type header, along with the MIME-encoded content. Next, use the Content-Disposition header to specify whether the content is to be displayed inline or treated as an attachment.\r\n\r\nOnce you&#39;ve composed your message, you can use the `SendRawEmail API operation`to send \r\n\r\n[Sending raw email using the Amazon SES API](https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-raw.html)\r\n\r\nThis post covers how to forward emails with attachment in S3 [Forward Incoming Email to an External Destination](https://aws.amazon.com/blogs/messaging-and-targeting/forward-incoming-email-to-an-external-destination/)\r\n\r\nRelevant post with necessary code [How to convert raw emails (MIME) from AWS SES to Gmail?](https://stackoverflow.com/a/62363395/2246345)","title":"How to send SES raw emails with attachment files from S3 using java","body":"<p><a href=\"https://aws.amazon.com/ses/faqs/\" rel=\"nofollow noreferrer\">Q: Can Amazon SES send emails with attachments?</a></p>\n<blockquote>\n<p>You can also send email with attachments programmatically. To include an attachment in your email, construct a new multipart email message. In the message, include a MIME part that contains an appropriate Content-Type header, along with the MIME-encoded content. Next, use the Content-Disposition header to specify whether the content is to be displayed inline or treated as an attachment.</p>\n</blockquote>\n<p>Once you've composed your message, you can use the <code>SendRawEmail API operation</code>to send</p>\n<p><a href=\"https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-raw.html\" rel=\"nofollow noreferrer\">Sending raw email using the Amazon SES API</a></p>\n<p>This post covers how to forward emails with attachment in S3 <a href=\"https://aws.amazon.com/blogs/messaging-and-targeting/forward-incoming-email-to-an-external-destination/\" rel=\"nofollow noreferrer\">Forward Incoming Email to an External Destination</a></p>\n<p>Relevant post with necessary code <a href=\"https://stackoverflow.com/a/62363395/2246345\">How to convert raw emails (MIME) from AWS SES to Gmail?</a></p>\n"},{"tags":[],"owner":{"account_id":8410789,"reputation":123,"user_id":6312790,"accept_rate":100,"display_name":"neil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656518220,"creation_date":1656518220,"answer_id":72804460,"question_id":66169654,"body_markdown":"Instead of getting the bytes from string, use byte array\r\n\r\n    MimeBodyPart att = new MimeBodyPart();\r\n    att.setFileName(attachment.getFileName());\r\n    S3Object s3Object = s3.getObject(emailServiceConfiguration.getAttachmentS3Bucket(), attachment.getPath());\r\n    byte[] byteArray = IOUtils.toByteArray(s3Object.getObjectContent());\r\n    DataSource source = new ByteArrayDataSource(byteArray,&quot;application/png&quot;);\r\n    att.setDataHandler(new DataHandler(source));\r\n    msg.addBodyPart(att);","title":"How to send SES raw emails with attachment files from S3 using java","body":"<p>Instead of getting the bytes from string, use byte array</p>\n<pre><code>MimeBodyPart att = new MimeBodyPart();\natt.setFileName(attachment.getFileName());\nS3Object s3Object = s3.getObject(emailServiceConfiguration.getAttachmentS3Bucket(), attachment.getPath());\nbyte[] byteArray = IOUtils.toByteArray(s3Object.getObjectContent());\nDataSource source = new ByteArrayDataSource(byteArray,&quot;application/png&quot;);\natt.setDataHandler(new DataHandler(source));\nmsg.addBodyPart(att);\n</code></pre>\n"}],"owner":{"account_id":16310517,"reputation":11,"user_id":11779280,"display_name":"24Circles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2281,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695302657,"creation_date":1613123672,"question_id":66169654,"body_markdown":"Im trying to send raw emails with images as attachments using java, the attachment files are present in S3, however, when receiving email the attachment images are corrupted. \r\nI tried reading file from my disk and it worked correctly but somehow not working for S3 files. Here&#39;s the code I&#39;m using.\r\n```\r\n                    MimeBodyPart att = new MimeBodyPart();\r\n                    att.setFileName(attachment.getFileName());\r\n                    String attContent = s3.getObjectAsString(emailServiceConfiguration.getAttachmentS3Bucket(), attachment.getPath());\r\n                    DataSource source = new ByteArrayDataSource(attContent.getBytes(),&quot;application/png&quot;);\r\n                    att.setDataHandler(new DataHandler(source));\r\n                    msg.addBodyPart(att);\r\n\r\n```\r\nPlease help, I&#39;m stuck here for quite some time.","title":"How to send SES raw emails with attachment files from S3 using java","body":"<p>Im trying to send raw emails with images as attachments using java, the attachment files are present in S3, however, when receiving email the attachment images are corrupted.\nI tried reading file from my disk and it worked correctly but somehow not working for S3 files. Here's the code I'm using.</p>\n<pre><code>                    MimeBodyPart att = new MimeBodyPart();\n                    att.setFileName(attachment.getFileName());\n                    String attContent = s3.getObjectAsString(emailServiceConfiguration.getAttachmentS3Bucket(), attachment.getPath());\n                    DataSource source = new ByteArrayDataSource(attContent.getBytes(),&quot;application/png&quot;);\n                    att.setDataHandler(new DataHandler(source));\n                    msg.addBodyPart(att);\n\n</code></pre>\n<p>Please help, I'm stuck here for quite some time.</p>\n"},{"tags":["java","gradle","build.gradle","java-11","java-17"],"owner":{"account_id":6559234,"reputation":1,"user_id":5070944,"display_name":"Phalguna Aramalla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695302288,"creation_date":1695302288,"question_id":77150649,"body_markdown":"This is regarding multi module gradle project and JDK version support.\r\n\r\nWe have a common module(Commons) where we have a custom plugin along with other utilities which used to keep restrictions on the sub projects i.e., Microservices.\r\n\r\nWe have many Microservices using this common custom plugin to impose restrictions on build properties and tasks of gradle.\r\n\r\n\r\nThis Commons gradle project previously used to run on JDK 11.\r\n\r\nThe previous config looks following way:\r\n\r\n\r\nCommons build.gradle\r\n\r\n```\r\n\r\n\r\nsourceCompatibility= JavaVersion.VERSION_11\r\n\r\n\r\n```\r\n\r\n\r\nplugin.gradle to build common plugin ( which is present inside subproject of Commons module)\r\n```\r\nallprojects {\r\napply plugin: &#39;java&#39;\r\napply plugin: &#39;java-library&#39;\r\n}\r\n\r\nsubprojects {\r\nsourceCompatibility= JavaVersion.VERSION_11\r\ntargetcompatibility = JavaVersion.VERSIOM_11\r\n\r\n}\r\n```\r\n \r\nMicroservice build.gradle\r\n```\r\napply plugin: &#39;com.commons.common-plugin&#39;\r\n\r\nallprojects{\r\n}\r\nbuildsript {\r\n\r\next{\r\n\r\n}\r\n\r\n}\r\n```\r\n\r\nNow we want the Commons module to be on JDK 17 and the plugin to build and apply java version on Microservices should be on JDK 11.\r\nI tried changing aroung in the above plugin.gradle for source and target comparability but end up facing same issue.\r\n\r\nThe issue i faced in Microservice during build was \r\n\r\n\r\n```\r\nCaused by org.gradle.internal.component. NoMatchingConfigurationSelectionException: No matching variant of com.commons\r\n\r\n- Variant &#39;apiElements&#39; capability com.commons declares as a library,packaged as a jar, and its dependencies declared externally\r\n  - Incompatible because this component declares a component for use during compile- time, compatible with Java17 and consumer needed a component for use during runtime, compatible with Java 11\r\n\r\n- Variant &#39;runtimeElements&#39;.... same error\r\n```\r\n\r\n\r\nIs there any possible way i could achieve this. If so can you suggest. \r\n\r\nThanks in advance.\r\n\r\nNow we want the Commons module to be on JDK 17 and the plugin to build and apply java version on Microservices should be on JDK 11. I tried changing aroung in the above plugin.gradle for source and target comparability but end up facing same issue.","title":"Gradle plugin - Different Java version for sub project","body":"<p>This is regarding multi module gradle project and JDK version support.</p>\n<p>We have a common module(Commons) where we have a custom plugin along with other utilities which used to keep restrictions on the sub projects i.e., Microservices.</p>\n<p>We have many Microservices using this common custom plugin to impose restrictions on build properties and tasks of gradle.</p>\n<p>This Commons gradle project previously used to run on JDK 11.</p>\n<p>The previous config looks following way:</p>\n<p>Commons build.gradle</p>\n<pre><code>\n\nsourceCompatibility= JavaVersion.VERSION_11\n\n\n</code></pre>\n<p>plugin.gradle to build common plugin ( which is present inside subproject of Commons module)</p>\n<pre><code>allprojects {\napply plugin: 'java'\napply plugin: 'java-library'\n}\n\nsubprojects {\nsourceCompatibility= JavaVersion.VERSION_11\ntargetcompatibility = JavaVersion.VERSIOM_11\n\n}\n</code></pre>\n<p>Microservice build.gradle</p>\n<pre><code>apply plugin: 'com.commons.common-plugin'\n\nallprojects{\n}\nbuildsript {\n\next{\n\n}\n\n}\n</code></pre>\n<p>Now we want the Commons module to be on JDK 17 and the plugin to build and apply java version on Microservices should be on JDK 11.\nI tried changing aroung in the above plugin.gradle for source and target comparability but end up facing same issue.</p>\n<p>The issue i faced in Microservice during build was</p>\n<pre><code>Caused by org.gradle.internal.component. NoMatchingConfigurationSelectionException: No matching variant of com.commons\n\n- Variant 'apiElements' capability com.commons declares as a library,packaged as a jar, and its dependencies declared externally\n  - Incompatible because this component declares a component for use during compile- time, compatible with Java17 and consumer needed a component for use during runtime, compatible with Java 11\n\n- Variant 'runtimeElements'.... same error\n</code></pre>\n<p>Is there any possible way i could achieve this. If so can you suggest.</p>\n<p>Thanks in advance.</p>\n<p>Now we want the Commons module to be on JDK 17 and the plugin to build and apply java version on Microservices should be on JDK 11. I tried changing aroung in the above plugin.gradle for source and target comparability but end up facing same issue.</p>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":3209227,"reputation":471,"user_id":2709542,"display_name":"Mathew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681399246,"creation_date":1681399246,"answer_id":76007192,"question_id":75976503,"body_markdown":"use Native Query,\r\n\r\n        package com.lazyaudio;\r\n\r\n        import org.springframework.data.domain.Pageable;\r\n        import org.springframework.data.domain.Sort;\r\n        import org.springframework.data.elasticsearch.client.elc.NativeQuery;\r\n        import org.springframework.data.elasticsearch.client.elc.QueryBuilders;\r\n        import org.springframework.data.elasticsearch.core.query.FetchSourceFilterBuilder;\r\n\r\n        public class Test {\r\n\r\n            public static void main(String[] args) {\r\n                Pageable pageable = null;\r\n                NativeQuery query = NativeQuery.builder()\r\n                        .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\r\n                        .withQuery(QueryBuilders.termQueryAsQuery(&quot;fieldName&quot;, &quot;&quot;))\r\n                        .withSort(Sort.by(Sort.Direction.DESC, &quot;fieldName&quot;))\r\n                        .withPageable(pageable)\r\n                        .build();\r\n\r\n            }\r\n        }\r\n\r\n","title":"NativeSearchQuery is deprecated what is the equivalent beyond 5.0","body":"<p>use Native Query,</p>\n<pre><code>    package com.lazyaudio;\n\n    import org.springframework.data.domain.Pageable;\n    import org.springframework.data.domain.Sort;\n    import org.springframework.data.elasticsearch.client.elc.NativeQuery;\n    import org.springframework.data.elasticsearch.client.elc.QueryBuilders;\n    import org.springframework.data.elasticsearch.core.query.FetchSourceFilterBuilder;\n\n    public class Test {\n\n        public static void main(String[] args) {\n            Pageable pageable = null;\n            NativeQuery query = NativeQuery.builder()\n                    .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\n                    .withQuery(QueryBuilders.termQueryAsQuery(&quot;fieldName&quot;, &quot;&quot;))\n                    .withSort(Sort.by(Sort.Direction.DESC, &quot;fieldName&quot;))\n                    .withPageable(pageable)\n                    .build();\n\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20929807,"reputation":161,"user_id":15376457,"display_name":"gcbox999"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695302064,"creation_date":1695302064,"answer_id":77150608,"question_id":75976503,"body_markdown":"I had the same issue, thank you. For my part, I also want to perform a groupBy on &#39;brand&#39; by aggregation.\r\n\r\nThe JSON query I&#39;m trying to formulate with NativeQuery looks like this:\r\n\r\n    {\r\n         &quot;size&quot;: 0,\r\n         &quot;aggs&quot;: {\r\n             &quot;distinct_brand&quot;: {\r\n                 &quot;terms&quot;: {\r\n                     &quot;field&quot;: &quot;brand&quot;,\r\n                     &quot;size&quot;: 10000,\r\n                     &quot;order&quot;: {\r\n                     &quot;_key&quot;: &quot;asc&quot;\r\n             }\r\n           }\r\n         }\r\n       }\r\n    }\r\n\r\nAnd my code is currently like this:\r\n\r\n     Query query = NativeQuery.builder()\r\n             .withQuery(q -&gt; q\r\n                     .matchAll(my -&gt; my))\r\n             .withSort(Sort.by(Sort.Direction.ASC, &quot;brand&quot;)).build();\r\n\r\nHow can I add the aggregation?","title":"NativeSearchQuery is deprecated what is the equivalent beyond 5.0","body":"<p>I had the same issue, thank you. For my part, I also want to perform a groupBy on 'brand' by aggregation.</p>\n<p>The JSON query I'm trying to formulate with NativeQuery looks like this:</p>\n<pre><code>{\n     &quot;size&quot;: 0,\n     &quot;aggs&quot;: {\n         &quot;distinct_brand&quot;: {\n             &quot;terms&quot;: {\n                 &quot;field&quot;: &quot;brand&quot;,\n                 &quot;size&quot;: 10000,\n                 &quot;order&quot;: {\n                 &quot;_key&quot;: &quot;asc&quot;\n         }\n       }\n     }\n   }\n}\n</code></pre>\n<p>And my code is currently like this:</p>\n<pre><code> Query query = NativeQuery.builder()\n         .withQuery(q -&gt; q\n                 .matchAll(my -&gt; my))\n         .withSort(Sort.by(Sort.Direction.ASC, &quot;brand&quot;)).build();\n</code></pre>\n<p>How can I add the aggregation?</p>\n"}],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2303,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1695302064,"creation_date":1681124441,"question_id":75976503,"body_markdown":"What is the equivalent of org.springframework.data.elasticsearch.core.query.NativeSearchQuery for support beyond 5.0.\r\n\r\nMigrated the following snippet from\r\n\r\n        NativeSearchQuery query = new NativeSearchQueryBuilder()\r\n                .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\r\n                .withQuery(QueryBuilders.termQuery(Configuration.CONFIGURATION_TYPE, field))\r\n                .withSorts(new FieldSortBuilder(Configuration.NAME).order(SortOrder.ASC)).withPageable(pageable)\r\n                .build();\r\n\r\n\r\nto the following query, but it fails\r\n\r\n    import org.springframework.data.elasticsearch.client.elc.NativeQuery;\r\n    import org.springframework.data.elasticsearch.client.elc.NativeQueryBuilder;\r\n\r\n\r\n        NativeQuery query = new NativeQueryBuilder()\r\n                .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\r\n                .withQuery(QueryBuilders.termQuery(Configuration.CONFIGURATION_TYPE, field))\r\n                .withSorts(new FieldSortBuilder(Configuration.NAME).order(SortOrder.ASC)).withPageable(pageable)\r\n                .build();\r\n","title":"NativeSearchQuery is deprecated what is the equivalent beyond 5.0","body":"<p>What is the equivalent of org.springframework.data.elasticsearch.core.query.NativeSearchQuery for support beyond 5.0.</p>\n<p>Migrated the following snippet from</p>\n<pre><code>    NativeSearchQuery query = new NativeSearchQueryBuilder()\n            .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\n            .withQuery(QueryBuilders.termQuery(Configuration.CONFIGURATION_TYPE, field))\n            .withSorts(new FieldSortBuilder(Configuration.NAME).order(SortOrder.ASC)).withPageable(pageable)\n            .build();\n</code></pre>\n<p>to the following query, but it fails</p>\n<pre><code>import org.springframework.data.elasticsearch.client.elc.NativeQuery;\nimport org.springframework.data.elasticsearch.client.elc.NativeQueryBuilder;\n\n\n    NativeQuery query = new NativeQueryBuilder()\n            .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\n            .withQuery(QueryBuilders.termQuery(Configuration.CONFIGURATION_TYPE, field))\n            .withSorts(new FieldSortBuilder(Configuration.NAME).order(SortOrder.ASC)).withPageable(pageable)\n            .build();\n</code></pre>\n"},{"tags":["java","java-8","future"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1414404274,"post_id":26579139,"comment_id":41785657,"body_markdown":"You can’t “implement static methods”; that’s impossible. I doubt that you are “supposed to subclass `CompletableFuture`” at all. The hint you have cited only tells me, how hard subclassing would be as you have to override *all* overloads to ensure modified behavior. But of course, you can’t alter the behavior of `static` methods by subclassing. It would be pointless anyway; if the caller of a `static` method wants to use a subclass instead, the caller can simply call a method of the subclass instead. But Java code using the base class will never be affected by the mere existence of a subclass.","body":"You can’t “implement static methods”; that’s impossible. I doubt that you are “supposed to subclass <code>CompletableFuture</code>” at all. The hint you have cited only tells me, how hard subclassing would be as you have to override <i>all</i> overloads to ensure modified behavior. But of course, you can’t alter the behavior of <code>static</code> methods by subclassing. It would be pointless anyway; if the caller of a <code>static</code> method wants to use a subclass instead, the caller can simply call a method of the subclass instead. But Java code using the base class will never be affected by the mere existence of a subclass."},{"owner":{"account_id":43047,"reputation":12737,"user_id":125663,"accept_rate":100,"display_name":"Alice Purcell"},"score":0,"creation_date":1414424528,"post_id":26579139,"comment_id":41797454,"body_markdown":"The CompletableFuture docs *do* refer to subclasses.","body":"The CompletableFuture docs <i>do</i> refer to subclasses."},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1414429127,"post_id":26579139,"comment_id":41800246,"body_markdown":"@chrispy, updated question with use-case.","body":"@chrispy, updated question with use-case."},{"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"score":0,"creation_date":1414433982,"post_id":26579139,"comment_id":41803016,"body_markdown":"I think CompletableFuture is too unwieldy to be used directly in applications. Shameless plug, see my Async API for java8 - http://bayou.io/release/0.9/docs/async/Async_Programming.html","body":"I think CompletableFuture is too unwieldy to be used directly in applications. Shameless plug, see my Async API for java8 - <a href=\"http://bayou.io/release/0.9/docs/async/Async_Programming.html\" rel=\"nofollow noreferrer\">bayou.io/release/0.9/docs/async/Async_Programming.html</a>"},{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":0,"creation_date":1414438775,"post_id":26579139,"comment_id":41805591,"body_markdown":"What is the point to call your functions this way? Since each stage waits for the result of the previous stage, all functions are executed serially, not in parallel. Just call f3(f1(f0))).","body":"What is the point to call your functions this way? Since each stage waits for the result of the previous stage, all functions are executed serially, not in parallel. Just call f3(f1(f0)))."},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1414439246,"post_id":26579139,"comment_id":41805804,"body_markdown":"@AlexeiKaigorodov, I am intentionally introducing a delay between each call. I am hitting a rate-limiting web service and need to respect its limits.","body":"@AlexeiKaigorodov, I am intentionally introducing a delay between each call. I am hitting a rate-limiting web service and need to respect its limits."},{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":0,"creation_date":1414444093,"post_id":26579139,"comment_id":41808165,"body_markdown":"but I cannot see delays in your code. Do you make delays in your custom Executor?","body":"but I cannot see delays in your code. Do you make delays in your custom Executor?"},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1414445004,"post_id":26579139,"comment_id":41808569,"body_markdown":"@AlexeiKaigorodov, yes. My custom `Executor`delegates to `ScheduledExecutorService`, scheduling the task to run at some future time.","body":"@AlexeiKaigorodov, yes. My custom <code>Executor</code>delegates to <code>ScheduledExecutorService</code>, scheduling the task to run at some future time."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1414493133,"post_id":26579139,"comment_id":41825052,"body_markdown":"I still don’t get your question. If you want to create a subclass of `CompletableFuture` overriding `thenApplyAsync`, then just do it. Why do you bother with how the `static` method `supplyAsync` works internally?","body":"I still don’t get your question. If you want to create a subclass of <code>CompletableFuture</code> overriding <code>thenApplyAsync</code>, then just do it. Why do you bother with how the <code>static</code> method <code>supplyAsync</code> works internally?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1414494893,"post_id":26579139,"comment_id":41826048,"body_markdown":"@chrispy: so it’s just a typical “failed to show what he tried” thing, maybe a simple mistake in his source code?","body":"@chrispy: so it’s just a typical “failed to show what he tried” thing, maybe a simple mistake in his source code?"},{"owner":{"account_id":130073,"reputation":21988,"user_id":329063,"accept_rate":75,"display_name":"glts"},"score":4,"creation_date":1452970575,"post_id":26579139,"comment_id":57403306,"body_markdown":"Judging from the message [&#39;Candidate jdk9 CompletableFuture additions&#39;](http://cs.oswego.edu/pipermail/concurrency-interest/2015-January/013600.html) posted to the concurrency-interest mailing list, it seems that the authors of `CompletableFuture` agree that it should be easier to extend it. Looks like the proposed new methods `newIncompleteFuture` and `defaultExecutor` might help to resolve this question.","body":"Judging from the message <a href=\"http://cs.oswego.edu/pipermail/concurrency-interest/2015-January/013600.html\" rel=\"nofollow noreferrer\">&#39;Candidate jdk9 CompletableFuture additions&#39;</a> posted to the concurrency-interest mailing list, it seems that the authors of <code>CompletableFuture</code> agree that it should be easier to extend it. Looks like the proposed new methods <code>newIncompleteFuture</code> and <code>defaultExecutor</code> might help to resolve this question."}],"answers":[{"tags":[],"owner":{"account_id":91915,"reputation":1401,"user_id":252155,"accept_rate":50,"display_name":"Amir Moghimi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414384501,"creation_date":1414384501,"answer_id":26581246,"question_id":26579139,"body_markdown":"As far as I can see, you need your own implementation of `internalComplete()` which instantiates your own equivalent of `AltResult` in case of null or exception. And your subclass `supplyAsync()` is supposed to return a new instance of your new `CompletableFuture` subclass.","title":"How to subclass CompletableFuture?","body":"<p>As far as I can see, you need your own implementation of <code>internalComplete()</code> which instantiates your own equivalent of <code>AltResult</code> in case of null or exception. And your subclass <code>supplyAsync()</code> is supposed to return a new instance of your new <code>CompletableFuture</code> subclass.</p>\n"},{"tags":[],"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1414472520,"creation_date":1414472090,"answer_id":26601128,"question_id":26579139,"body_markdown":"Async programming is widely misunderstood. Theoretical approach is to represent async program as Petri net, where main components are tokens, places, and transitions. From programming point of view, transition should be split further into firing rule and action. Logical chain appears to be too long, programmers prefer oversimplified scheme &quot;event-reaction&quot;, which does not work in any complex cases. CompletableFuture  is even more restricted, with scheme &quot;action - primitive transition - action&quot;.\r\n\r\nIn your case, each stage has to be feed from two sources: result of previous stage and resource token allowing to access the web service. CompletableFuture simply does not fit for such cases. I would recommend first draw the Petri net for your case, and then implement basic infrastructure from scratch, using classes with synchronized methods. Or try my async library  [df4j2][1], which allows to build transitions with several places. \r\n\r\n\r\n  [1]: https://github.com/rfqu/df4j2","title":"How to subclass CompletableFuture?","body":"<p>Async programming is widely misunderstood. Theoretical approach is to represent async program as Petri net, where main components are tokens, places, and transitions. From programming point of view, transition should be split further into firing rule and action. Logical chain appears to be too long, programmers prefer oversimplified scheme \"event-reaction\", which does not work in any complex cases. CompletableFuture  is even more restricted, with scheme \"action - primitive transition - action\".</p>\n\n<p>In your case, each stage has to be feed from two sources: result of previous stage and resource token allowing to access the web service. CompletableFuture simply does not fit for such cases. I would recommend first draw the Petri net for your case, and then implement basic infrastructure from scratch, using classes with synchronized methods. Or try my async library  <a href=\"https://github.com/rfqu/df4j2\" rel=\"nofollow\">df4j2</a>, which allows to build transitions with several places. </p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1695301992,"creation_date":1414496434,"answer_id":26607433,"question_id":26579139,"body_markdown":"Starting with Java&#160;9, there is built-in support for this task:\r\n\r\n```java\r\npublic class MyCompletableFuture&lt;T&gt; extends CompletableFuture&lt;T&gt; {\r\n\r\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(Supplier&lt;T&gt; s, Executor e) {\r\n        Objects.requireNonNull(s);\r\n        Objects.requireNonNull(e);\r\n        return new MyCompletableFuture&lt;T&gt;(e).completeAsync(s);\r\n    }\r\n\r\n    private final Executor executor;\r\n\r\n    public MyCompletableFuture(Executor executor) {\r\n        this.executor = executor;\r\n    }\r\n\r\n    @Override\r\n    public &lt;U&gt; CompletableFuture&lt;U&gt; newIncompleteFuture() {\r\n        return new MyCompletableFuture&lt;&gt;(executor);\r\n    }\r\n\r\n    @Override\r\n    public Executor defaultExecutor() {\r\n        return executor;\r\n    }\r\n}\r\n```\r\n\r\n - By overriding `newIncompleteFuture()`, we can ensure that all `then…` and `when…`, etc. methods will return instances of `MyCompletableFuture`, without overriding each of them.\r\n\r\n - The `defaultExecutor()` method specifies the executor to be used by all async methods without `Executor` parameter.\r\n\r\n - Conveniently, the non-`static` method `completeAsync` allows us to get the `supplyAsync` behavior using an instance of our future implementation. The example above provides a `static` method `supplyAsync` which can be used similarly to the original one, i.e. `MyCompletableFuture.supplyAsync(supplier, executor)`\r\n\r\n---\r\n\r\nIn Java&#160;8, you have to override all methods whose behavior you want to alter, using the decoration pattern, which still doesn’t need to touch any of the `CompletableFuture`’s inner workings.\r\n\r\n    import java.util.concurrent.*;\r\n    import java.util.function.*;\r\n    \r\n    public class MyCompletableFuture&lt;T&gt; extends CompletableFuture&lt;T&gt; {\r\n        public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(Supplier&lt;T&gt; s, Executor e){\r\n            return my(CompletableFuture.supplyAsync(s, e), e);\r\n        }\r\n        private static &lt;T&gt; CompletableFuture&lt;T&gt; my(CompletableFuture&lt;T&gt; f,Executor e){\r\n            MyCompletableFuture&lt;T&gt; my=new MyCompletableFuture&lt;&gt;(f, e);\r\n            f.whenComplete((v,t)-&gt; {\r\n                if(t!=null) my.completeExceptionally(t); else my.complete(v);\r\n            });\r\n            return my;\r\n        }\r\n        private final CompletableFuture&lt;T&gt; baseFuture;\r\n        private final Executor executor;\r\n    \r\n        MyCompletableFuture(CompletableFuture&lt;T&gt; base, Executor e) {\r\n            baseFuture=base;\r\n            executor=e;\r\n        }\r\n        private &lt;T&gt; CompletableFuture&lt;T&gt; my(CompletableFuture&lt;T&gt; base) {\r\n            return my(base, executor);\r\n        }\r\n        @Override\r\n        public CompletableFuture&lt;Void&gt; acceptEitherAsync(\r\n                CompletionStage&lt;? extends T&gt; other, Consumer&lt;? super T&gt; action) {\r\n            return my(baseFuture.acceptEitherAsync(other, action, executor));\r\n        }\r\n        @Override\r\n        public &lt;U&gt; CompletableFuture&lt;U&gt; applyToEitherAsync(\r\n                CompletionStage&lt;? extends T&gt; other, Function&lt;? super T, U&gt; fn) {\r\n            return my(baseFuture.applyToEitherAsync(other, fn, executor));\r\n        }\r\n        @Override\r\n        public &lt;U&gt; CompletableFuture&lt;U&gt; handleAsync(\r\n                BiFunction&lt;? super T, Throwable, ? extends U&gt; fn) {\r\n            return my(baseFuture.handleAsync(fn, executor));\r\n        }\r\n        @Override\r\n        public CompletableFuture&lt;Void&gt; runAfterBothAsync(\r\n                CompletionStage&lt;?&gt; other, Runnable action) {\r\n            return my(baseFuture.runAfterBothAsync(other, action, executor));\r\n        }\r\n        @Override\r\n        public CompletableFuture&lt;Void&gt; runAfterEitherAsync(\r\n                CompletionStage&lt;?&gt; other, Runnable action) {\r\n            return my(baseFuture.runAfterEitherAsync(other, action, executor));\r\n        }\r\n        @Override\r\n        public CompletableFuture&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action) {\r\n            return my(baseFuture.thenAcceptAsync(action, executor));\r\n        }\r\n        @Override\r\n        public &lt;U&gt; CompletableFuture&lt;Void&gt; thenAcceptBothAsync(\r\n                CompletionStage&lt;? extends U&gt; other,\r\n                BiConsumer&lt;? super T, ? super U&gt; action) {\r\n            return my(baseFuture.thenAcceptBothAsync(other, action, executor));\r\n        }\r\n        @Override\r\n        public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(\r\n                Function&lt;? super T, ? extends U&gt; fn) {\r\n            return my(baseFuture.thenApplyAsync(fn, executor));\r\n        }\r\n        @Override\r\n        public &lt;U, V&gt; CompletableFuture&lt;V&gt; thenCombineAsync(\r\n                CompletionStage&lt;? extends U&gt; other,\r\n                BiFunction&lt;? super T, ? super U, ? extends V&gt; fn) {\r\n            return my(baseFuture.thenCombineAsync(other, fn, executor));\r\n        }\r\n        @Override\r\n        public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(\r\n                Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn) {\r\n            return my(baseFuture.thenComposeAsync(fn, executor));\r\n        }\r\n        @Override\r\n        public CompletableFuture&lt;Void&gt; thenRunAsync(Runnable action) {\r\n            return my(baseFuture.thenRunAsync(action, executor));\r\n        }\r\n        @Override\r\n        public CompletableFuture&lt;T&gt; whenCompleteAsync(\r\n                BiConsumer&lt;? super T, ? super Throwable&gt; action) {\r\n            return my(baseFuture.whenCompleteAsync(action, executor));\r\n        }\r\n    }\r\n\r\nHere is a simple test case which shows that it works as expected:\r\n\r\n    ScheduledExecutorService ses=Executors.newSingleThreadScheduledExecutor();\r\n    Executor e=r -&gt; {\r\n        System.out.println(&quot;adding delay&quot;);\r\n        ses.schedule(r, 2, TimeUnit.SECONDS);\r\n    };\r\n    MyCompletableFuture.supplyAsync(()-&gt;&quot;initial value&quot;, e)\r\n      .thenApplyAsync(String::hashCode)\r\n      .thenApplyAsync(Integer::toOctalString)\r\n      .thenAcceptAsync(System.out::println);\r\n","title":"How to subclass CompletableFuture?","body":"<p>Starting with Java 9, there is built-in support for this task:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyCompletableFuture&lt;T&gt; extends CompletableFuture&lt;T&gt; {\n\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(Supplier&lt;T&gt; s, Executor e) {\n        Objects.requireNonNull(s);\n        Objects.requireNonNull(e);\n        return new MyCompletableFuture&lt;T&gt;(e).completeAsync(s);\n    }\n\n    private final Executor executor;\n\n    public MyCompletableFuture(Executor executor) {\n        this.executor = executor;\n    }\n\n    @Override\n    public &lt;U&gt; CompletableFuture&lt;U&gt; newIncompleteFuture() {\n        return new MyCompletableFuture&lt;&gt;(executor);\n    }\n\n    @Override\n    public Executor defaultExecutor() {\n        return executor;\n    }\n}\n</code></pre>\n<ul>\n<li><p>By overriding <code>newIncompleteFuture()</code>, we can ensure that all <code>then…</code> and <code>when…</code>, etc. methods will return instances of <code>MyCompletableFuture</code>, without overriding each of them.</p>\n</li>\n<li><p>The <code>defaultExecutor()</code> method specifies the executor to be used by all async methods without <code>Executor</code> parameter.</p>\n</li>\n<li><p>Conveniently, the non-<code>static</code> method <code>completeAsync</code> allows us to get the <code>supplyAsync</code> behavior using an instance of our future implementation. The example above provides a <code>static</code> method <code>supplyAsync</code> which can be used similarly to the original one, i.e. <code>MyCompletableFuture.supplyAsync(supplier, executor)</code></p>\n</li>\n</ul>\n<hr />\n<p>In Java 8, you have to override all methods whose behavior you want to alter, using the decoration pattern, which still doesn’t need to touch any of the <code>CompletableFuture</code>’s inner workings.</p>\n<pre><code>import java.util.concurrent.*;\nimport java.util.function.*;\n\npublic class MyCompletableFuture&lt;T&gt; extends CompletableFuture&lt;T&gt; {\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; supplyAsync(Supplier&lt;T&gt; s, Executor e){\n        return my(CompletableFuture.supplyAsync(s, e), e);\n    }\n    private static &lt;T&gt; CompletableFuture&lt;T&gt; my(CompletableFuture&lt;T&gt; f,Executor e){\n        MyCompletableFuture&lt;T&gt; my=new MyCompletableFuture&lt;&gt;(f, e);\n        f.whenComplete((v,t)-&gt; {\n            if(t!=null) my.completeExceptionally(t); else my.complete(v);\n        });\n        return my;\n    }\n    private final CompletableFuture&lt;T&gt; baseFuture;\n    private final Executor executor;\n\n    MyCompletableFuture(CompletableFuture&lt;T&gt; base, Executor e) {\n        baseFuture=base;\n        executor=e;\n    }\n    private &lt;T&gt; CompletableFuture&lt;T&gt; my(CompletableFuture&lt;T&gt; base) {\n        return my(base, executor);\n    }\n    @Override\n    public CompletableFuture&lt;Void&gt; acceptEitherAsync(\n            CompletionStage&lt;? extends T&gt; other, Consumer&lt;? super T&gt; action) {\n        return my(baseFuture.acceptEitherAsync(other, action, executor));\n    }\n    @Override\n    public &lt;U&gt; CompletableFuture&lt;U&gt; applyToEitherAsync(\n            CompletionStage&lt;? extends T&gt; other, Function&lt;? super T, U&gt; fn) {\n        return my(baseFuture.applyToEitherAsync(other, fn, executor));\n    }\n    @Override\n    public &lt;U&gt; CompletableFuture&lt;U&gt; handleAsync(\n            BiFunction&lt;? super T, Throwable, ? extends U&gt; fn) {\n        return my(baseFuture.handleAsync(fn, executor));\n    }\n    @Override\n    public CompletableFuture&lt;Void&gt; runAfterBothAsync(\n            CompletionStage&lt;?&gt; other, Runnable action) {\n        return my(baseFuture.runAfterBothAsync(other, action, executor));\n    }\n    @Override\n    public CompletableFuture&lt;Void&gt; runAfterEitherAsync(\n            CompletionStage&lt;?&gt; other, Runnable action) {\n        return my(baseFuture.runAfterEitherAsync(other, action, executor));\n    }\n    @Override\n    public CompletableFuture&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action) {\n        return my(baseFuture.thenAcceptAsync(action, executor));\n    }\n    @Override\n    public &lt;U&gt; CompletableFuture&lt;Void&gt; thenAcceptBothAsync(\n            CompletionStage&lt;? extends U&gt; other,\n            BiConsumer&lt;? super T, ? super U&gt; action) {\n        return my(baseFuture.thenAcceptBothAsync(other, action, executor));\n    }\n    @Override\n    public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(\n            Function&lt;? super T, ? extends U&gt; fn) {\n        return my(baseFuture.thenApplyAsync(fn, executor));\n    }\n    @Override\n    public &lt;U, V&gt; CompletableFuture&lt;V&gt; thenCombineAsync(\n            CompletionStage&lt;? extends U&gt; other,\n            BiFunction&lt;? super T, ? super U, ? extends V&gt; fn) {\n        return my(baseFuture.thenCombineAsync(other, fn, executor));\n    }\n    @Override\n    public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(\n            Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn) {\n        return my(baseFuture.thenComposeAsync(fn, executor));\n    }\n    @Override\n    public CompletableFuture&lt;Void&gt; thenRunAsync(Runnable action) {\n        return my(baseFuture.thenRunAsync(action, executor));\n    }\n    @Override\n    public CompletableFuture&lt;T&gt; whenCompleteAsync(\n            BiConsumer&lt;? super T, ? super Throwable&gt; action) {\n        return my(baseFuture.whenCompleteAsync(action, executor));\n    }\n}\n</code></pre>\n<p>Here is a simple test case which shows that it works as expected:</p>\n<pre><code>ScheduledExecutorService ses=Executors.newSingleThreadScheduledExecutor();\nExecutor e=r -&gt; {\n    System.out.println(&quot;adding delay&quot;);\n    ses.schedule(r, 2, TimeUnit.SECONDS);\n};\nMyCompletableFuture.supplyAsync(()-&gt;&quot;initial value&quot;, e)\n  .thenApplyAsync(String::hashCode)\n  .thenApplyAsync(Integer::toOctalString)\n  .thenAcceptAsync(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414525658,"creation_date":1414525658,"answer_id":26617214,"question_id":26579139,"body_markdown":"Your goal is to limit the rate of access to the web service. Your solution is to use special executor which introduces delays. This is not the best solution, because some function in the chain can spend some time for other activity, or just wait too long in the queue to processor on O/S level and thus need not be delayed before accessing the web service, but will be delayed by the executor anyway. Delays should be embedded in the module which actually performs requests to the web service. It should remember the time of the previous request and, if it is too small, just call Thread.sleep() before sending request via socket. This way you need not any CompletableFuture and can call functions directly like f3(f1(f0))). At least it is more readable.","title":"How to subclass CompletableFuture?","body":"<p>Your goal is to limit the rate of access to the web service. Your solution is to use special executor which introduces delays. This is not the best solution, because some function in the chain can spend some time for other activity, or just wait too long in the queue to processor on O/S level and thus need not be delayed before accessing the web service, but will be delayed by the executor anyway. Delays should be embedded in the module which actually performs requests to the web service. It should remember the time of the previous request and, if it is too small, just call Thread.sleep() before sending request via socket. This way you need not any CompletableFuture and can call functions directly like f3(f1(f0))). At least it is more readable.</p>\n"},{"tags":[],"owner":{"account_id":7334204,"reputation":199,"user_id":5586158,"display_name":"Valery Silaev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1463664251,"creation_date":1463664251,"answer_id":37324585,"question_id":26579139,"body_markdown":"Answering the original question -- **How is one supposed to subclass CompletableFuture?**\r\n\r\nProbably starting from a clean-room CompletionStage interface implementation (rather than from the concrete CompletableFuture class) a  is a better option. Please take a look here:\r\n\r\nhttps://github.com/lukas-krecan/completion-stage","title":"How to subclass CompletableFuture?","body":"<p>Answering the original question -- <strong>How is one supposed to subclass CompletableFuture?</strong></p>\n\n<p>Probably starting from a clean-room CompletionStage interface implementation (rather than from the concrete CompletableFuture class) a  is a better option. Please take a look here:</p>\n\n<p><a href=\"https://github.com/lukas-krecan/completion-stage\" rel=\"nofollow\">https://github.com/lukas-krecan/completion-stage</a></p>\n"}],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4964,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":26607433,"answer_count":5,"score":13,"last_activity_date":1695301992,"creation_date":1414365858,"question_id":26579139,"body_markdown":"I&#39;d like to subclass [CompletableFuture](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) to override the default `Executor`. That is, if a user invokes a method without specifying an `Executor`, I want my own `Executor` to get used instead of the one normally used by `CompletableFuture`.\r\n\r\nThe Javadoc hints at the possibility of subclassing:\r\n\r\n&gt; All CompletionStage methods are implemented independently of other public methods, so the behavior of one method is not impacted by overrides of others in subclasses.\r\n\r\nHow am I supposed to implement static methods like `CompletableFuture.supplyAsync()` in the subclass if the underlying implementation depends on methods like `internalComplete()` which is package-private?\r\n\r\n**How is one supposed to subclass CompletableFuture?**\r\n\r\n---\r\nWhat I&#39;m trying to do...\r\n---\r\n\r\nMy user code needs to execute multiple tasks asynchronously using the same executor. For example: `CompletableFuture.supplyAsync(..., executor).thenApplyAsync(..., executor).thenApplyAsync(..., executor)`. I&#39;d like the custom `CompletableFuture` implementation to use the first executor throughout all follow-up calls.","title":"How to subclass CompletableFuture?","body":"<p>I'd like to subclass <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"noreferrer\">CompletableFuture</a> to override the default <code>Executor</code>. That is, if a user invokes a method without specifying an <code>Executor</code>, I want my own <code>Executor</code> to get used instead of the one normally used by <code>CompletableFuture</code>.</p>\n\n<p>The Javadoc hints at the possibility of subclassing:</p>\n\n<blockquote>\n  <p>All CompletionStage methods are implemented independently of other public methods, so the behavior of one method is not impacted by overrides of others in subclasses.</p>\n</blockquote>\n\n<p>How am I supposed to implement static methods like <code>CompletableFuture.supplyAsync()</code> in the subclass if the underlying implementation depends on methods like <code>internalComplete()</code> which is package-private?</p>\n\n<p><strong>How is one supposed to subclass CompletableFuture?</strong></p>\n\n<hr>\n\n<h2>What I'm trying to do...</h2>\n\n<p>My user code needs to execute multiple tasks asynchronously using the same executor. For example: <code>CompletableFuture.supplyAsync(..., executor).thenApplyAsync(..., executor).thenApplyAsync(..., executor)</code>. I'd like the custom <code>CompletableFuture</code> implementation to use the first executor throughout all follow-up calls.</p>\n"},{"tags":["java","xml","spring-boot","jackson","jackson-dataformat-xml"],"owner":{"account_id":29500724,"reputation":1,"user_id":22607798,"display_name":"wasd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695301798,"creation_date":1695301798,"question_id":77150566,"body_markdown":"I wanted to define classes to map into an XML response to be returned by the controller:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/v1&quot;)\r\n@Validated\r\npublic class Controller {\r\n\r\n    @PostMapping(value = &quot;/inquiry&quot;, consumes = MediaType.APPLICATION_XML_VALUE, produces = MediaType.APPLICATION_XML_VALUE)\r\n    @ApiResponses(\r\n            value = {\r\n                    @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Success&quot;, content = {\r\n                            @Content(mediaType = MediaType.APPLICATION_XML_VALUE, schema = @Schema(implementation = RequestModel.class))\r\n                    })\r\n            }\r\n    )\r\n    @ResponseStatus(HttpStatus.OK)\r\n    public @ResponseBody ResponseModel inquiry(\r\n            @Parameter(description = &quot;Request&quot;, required = true) @RequestBody RequestModel requestModel) {\r\n        return new ResponseModel(\r\n                new SubResponse1(&quot;value1&quot;),\r\n                new SubResponse2(&quot;value2&quot;)\r\n        );\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nI tried the following:\r\n**ResponseModel.java**\r\n```\r\n@JacksonXmlRootElement(localName = &quot;Message&quot;, namespace = &quot;abc&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ResponseModel {\r\n\r\n    @JacksonXmlProperty(localName = &quot;SubResponse1&quot;)\r\n    private SubResponse1 subResponse1;\r\n\r\n    @JacksonXmlProperty(localName = &quot;SubResponse2&quot;)\r\n    private SubResponse2 subResponse2;\r\n\r\n}\r\n```\r\n\r\n**SubResponse1.java**\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class SubResponse1 {\r\n\r\n    @JacksonXmlProperty(localName = &quot;S&quot;, namespace = &quot;abc:def&quot;)\r\n    private String s;\r\n\r\n}\r\n```\r\n\r\n**SubResponse2.java**\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class SubResponse2 {\r\n\r\n    @JacksonXmlProperty(localName = &quot;T&quot;, namespace = &quot;abc:ghi&quot;)\r\n    private String t;\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nAnd I was expecting the result would be\r\n**Expected Result**\r\n```\r\n&lt;Message\r\n    xmlns=&quot;abc&quot;\r\n    xmlns:sub1=&quot;abc:def&quot;\r\n    xlmns:sub2=&quot;abc:ghi&quot;&gt;\r\n    &lt;SubResponse1&gt;\r\n        &lt;sub1:S&gt;value1&lt;/sub1:S&gt;\r\n    &lt;/SubResponse1&gt;\r\n    &lt;SubResponse2&gt;\r\n        &lt;sub2:T&gt;value2&lt;/sub2:T&gt;\r\n    &lt;/SubResponse2&gt;\r\n&lt;/Message&gt;\r\n```\r\n\r\nBut the result was\r\n**Actual Result**\r\n\r\n```\r\n&lt;Message xmlns=&quot;&quot; xmlns=&quot;abc&quot;&gt;\r\n    &lt;zdef1417610378:SubResponse1 xmlns:zdef1417610378=&quot;&quot;&gt;\r\n        &lt;zdef1574590916:S xmlns:zdef1574590916=&quot;abc:def&quot;&gt;value1&lt;/zdef1574590916:S&gt;\r\n    &lt;/zdef1417610378:SubResponse1&gt;\r\n    &lt;zdef-1648736682:SubResponse2 xmlns:zdef-1648736682=&quot;&quot;&gt;\r\n        &lt;zdef103979484:T xmlns:zdef103979484=&quot;abc:ghi&quot;&gt;value2&lt;/zdef103979484:T&gt;\r\n    &lt;/zdef-1648736682:SubResponse2&gt;\r\n&lt;/Message&gt;\r\n```\r\n\r\n\r\nI don&#39;t know how to define namespaces at the very top, and somehow the namespaces became two (`xmlns=&quot;&quot; xmlns=&quot;abc&quot;`) or weird string (`zdef1417610378`). How should I define my classes to handle the problem?\r\n\r\n","title":"How to marshal into XML response with custom namespaces in Java","body":"<p>I wanted to define classes to map into an XML response to be returned by the controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/v1&quot;)\n@Validated\npublic class Controller {\n\n    @PostMapping(value = &quot;/inquiry&quot;, consumes = MediaType.APPLICATION_XML_VALUE, produces = MediaType.APPLICATION_XML_VALUE)\n    @ApiResponses(\n            value = {\n                    @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Success&quot;, content = {\n                            @Content(mediaType = MediaType.APPLICATION_XML_VALUE, schema = @Schema(implementation = RequestModel.class))\n                    })\n            }\n    )\n    @ResponseStatus(HttpStatus.OK)\n    public @ResponseBody ResponseModel inquiry(\n            @Parameter(description = &quot;Request&quot;, required = true) @RequestBody RequestModel requestModel) {\n        return new ResponseModel(\n                new SubResponse1(&quot;value1&quot;),\n                new SubResponse2(&quot;value2&quot;)\n        );\n    }\n\n}\n</code></pre>\n<p>I tried the following:\n<strong>ResponseModel.java</strong></p>\n<pre><code>@JacksonXmlRootElement(localName = &quot;Message&quot;, namespace = &quot;abc&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ResponseModel {\n\n    @JacksonXmlProperty(localName = &quot;SubResponse1&quot;)\n    private SubResponse1 subResponse1;\n\n    @JacksonXmlProperty(localName = &quot;SubResponse2&quot;)\n    private SubResponse2 subResponse2;\n\n}\n</code></pre>\n<p><strong>SubResponse1.java</strong></p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SubResponse1 {\n\n    @JacksonXmlProperty(localName = &quot;S&quot;, namespace = &quot;abc:def&quot;)\n    private String s;\n\n}\n</code></pre>\n<p><strong>SubResponse2.java</strong></p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class SubResponse2 {\n\n    @JacksonXmlProperty(localName = &quot;T&quot;, namespace = &quot;abc:ghi&quot;)\n    private String t;\n\n}\n</code></pre>\n<p>And I was expecting the result would be\n<strong>Expected Result</strong></p>\n<pre><code>&lt;Message\n    xmlns=&quot;abc&quot;\n    xmlns:sub1=&quot;abc:def&quot;\n    xlmns:sub2=&quot;abc:ghi&quot;&gt;\n    &lt;SubResponse1&gt;\n        &lt;sub1:S&gt;value1&lt;/sub1:S&gt;\n    &lt;/SubResponse1&gt;\n    &lt;SubResponse2&gt;\n        &lt;sub2:T&gt;value2&lt;/sub2:T&gt;\n    &lt;/SubResponse2&gt;\n&lt;/Message&gt;\n</code></pre>\n<p>But the result was\n<strong>Actual Result</strong></p>\n<pre><code>&lt;Message xmlns=&quot;&quot; xmlns=&quot;abc&quot;&gt;\n    &lt;zdef1417610378:SubResponse1 xmlns:zdef1417610378=&quot;&quot;&gt;\n        &lt;zdef1574590916:S xmlns:zdef1574590916=&quot;abc:def&quot;&gt;value1&lt;/zdef1574590916:S&gt;\n    &lt;/zdef1417610378:SubResponse1&gt;\n    &lt;zdef-1648736682:SubResponse2 xmlns:zdef-1648736682=&quot;&quot;&gt;\n        &lt;zdef103979484:T xmlns:zdef103979484=&quot;abc:ghi&quot;&gt;value2&lt;/zdef103979484:T&gt;\n    &lt;/zdef-1648736682:SubResponse2&gt;\n&lt;/Message&gt;\n</code></pre>\n<p>I don't know how to define namespaces at the very top, and somehow the namespaces became two (<code>xmlns=&quot;&quot; xmlns=&quot;abc&quot;</code>) or weird string (<code>zdef1417610378</code>). How should I define my classes to handle the problem?</p>\n"},{"tags":["java","multithreading","jvm"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":4,"creation_date":1484902282,"post_id":41759261,"comment_id":70710493,"body_markdown":"There is no such thing as the &#39;JVM thread scheduler&#39;. Thread scheduling is done by the operating system.","body":"There is no such thing as the &#39;JVM thread scheduler&#39;. Thread scheduling is done by the operating system."},{"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"score":0,"creation_date":1484902470,"post_id":41759261,"comment_id":70710604,"body_markdown":"I don&#39;t know why are you writing so. But in head first, it is written clearly, JVM Thread Scheduler does this scheduling. @EJP","body":"I don&#39;t know why are you writing so. But in head first, it is written clearly, JVM Thread Scheduler does this scheduling. @EJP"},{"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"score":0,"creation_date":1484902567,"post_id":41759261,"comment_id":70710659,"body_markdown":"And I&#39;m not writing anything out of that &#39;famous&#39; book.  @EJP","body":"And I&#39;m not writing anything out of that &#39;famous&#39; book.  @EJP"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1484902584,"post_id":41759261,"comment_id":70710667,"body_markdown":"I say so because it&#39;s correct. JVMs haven&#39;t done thread scheduling since last century. Please provide the actual text from your book that says otherwise. If any.","body":"I say so because it&#39;s correct. JVMs haven&#39;t done thread scheduling since last century. Please provide the actual text from your book that says otherwise. If any."},{"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"score":0,"creation_date":1484903278,"post_id":41759261,"comment_id":70711086,"body_markdown":"&quot;This is the state all thread lust after! To be the Chosen One. The Currently Running Thread. Only the JVM thread scheduler can make that decision.&quot; From Head First(2nd Edition), Page no: 495 @EJP","body":"&quot;This is the state all thread lust after! To be the Chosen One. The Currently Running Thread. Only the JVM thread scheduler can make that decision.&quot; From Head First(2nd Edition), Page no: 495 @EJP"},{"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"score":0,"creation_date":1484903466,"post_id":41759261,"comment_id":70711197,"body_markdown":"you can look this too... http://www.javatpoint.com/thread-scheduler-in-java @EJP","body":"you can look this too... <a href=\"http://www.javatpoint.com/thread-scheduler-in-java\" rel=\"nofollow noreferrer\">javatpoint.com/thread-scheduler-in-java</a> @EJP"},{"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"score":0,"creation_date":1484903945,"post_id":41759261,"comment_id":70711517,"body_markdown":"I&#39;ve provided. I have given a link too. Would you please explain your words now? If I&#39;m wrong show me that, if wrong is written in that book, show me that too. And if you are wrong, then it&#39;s up to you. @EJP","body":"I&#39;ve provided. I have given a link too. Would you please explain your words now? If I&#39;m wrong show me that, if wrong is written in that book, show me that too. And if you are wrong, then it&#39;s up to you. @EJP"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1484904967,"post_id":41759261,"comment_id":70712174,"body_markdown":"The 2nd edition was published in 2005. You can&#39;t place any reliance whatsoever on third-party tutorials, especially from a rubbish site like that one; or on third-party books for that matter. I&#39;ve explained quite enough here already. See also [this question](http://stackoverflow.com/q/41394714/207421), and many others here, all of which confirm what I&#39;ve stated. In any case surely it is obvious that whatever scheduler is involved will mark as many threads runnable as possible?","body":"The 2nd edition was published in 2005. You can&#39;t place any reliance whatsoever on third-party tutorials, especially from a rubbish site like that one; or on third-party books for that matter. I&#39;ve explained quite enough here already. See also <a href=\"http://stackoverflow.com/q/41394714/207421\">this question</a>, and many others here, all of which confirm what I&#39;ve stated. In any case surely it is obvious that whatever scheduler is involved will mark as many threads runnable as possible?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1484914653,"post_id":41759261,"comment_id":70718376,"body_markdown":"Consider the term “*JVM thread scheduler*” as a logical entity that in most implementations consist of something that creates an operating system level thread for each Java thread and does no active scheduling activity itself. A particular JVM implementation may contain a scheduler for operating systems that don’t have one, for Sun’s JVM that was the case back in the last millennium…","body":"Consider the term “<i>JVM thread scheduler</i>” as a logical entity that in most implementations consist of something that creates an operating system level thread for each Java thread and does no active scheduling activity itself. A particular JVM implementation may contain a scheduler for operating systems that don’t have one, for Sun’s JVM that was the case back in the last millennium…"},{"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"score":0,"creation_date":1484915779,"post_id":41759261,"comment_id":70719045,"body_markdown":"ok, got it @Holger, thanks for your nice explanation. Would you please, give this comment as an answer, so that I can accept your answer?","body":"ok, got it @Holger, thanks for your nice explanation. Would you please, give this comment as an answer, so that I can accept your answer?"}],"answers":[{"tags":[],"owner":{"account_id":2265731,"reputation":667,"user_id":2599910,"accept_rate":0,"display_name":"Pandey Amit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484901677,"creation_date":1484901677,"answer_id":41759328,"question_id":41759261,"body_markdown":"JVM use underlying OS(Unix, Windows etc) threading mechanism to schedule java thread on multiprocessor system.","title":"How JVM thread scheduler control threads for multiprocessors?","body":"<p>JVM use underlying OS(Unix, Windows etc) threading mechanism to schedule java thread on multiprocessor system.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1695301126,"creation_date":1484921827,"answer_id":41765718,"question_id":41759261,"body_markdown":"The term “JVM thread scheduler” makes only sense, if we consider operating system, JVM and class library as an execution environment as a whole. Then, it’s guaranteed that this environment has a scheduler, regardless of how it is implemented.\r\n\r\nIn most of today’s implementations the JVM will create an operating system level thread for each Java [platform thread] and let the operating system do the scheduling. Starting with Java&#160;21, there are also [virtual threads], managed by the JVM but running atop platform threads, which still leaves the preemptive scheduling to the operating system. But a particular JVM implementation *may* contain a preemptive scheduler for operating systems that don’t have one.\r\n\r\nE.g., for Sun’s JVM that was the case back in the last millennium. At this time, there was the option to use [green threads], as opposed to native threads. Note that these threads implemented without the aid of the operating system aren’t capable of using multiple CPUs/cores.\r\n\r\nSo in practice, when you run your example program, the operating system’s scheduler may indeed assign the second thread to a different core. However, since this is a tiny program, it’s also possible that the first thread terminates before the second even starts its actual work, and in that case, it will likely run on the same core as the first, but there is no guaranty about any particular scheduling behavior at all.\r\n\r\nWhile there is no guaranty regarding a particular scheduling behavior, most SMP libraries and tools are built on the (founded) assumption, that if there are enough runnable threads with sufficient workload, the underlying system will assign these threads to available CPU cores.\r\n\r\n[green threads]: https://en.wikipedia.org/wiki/Green_threads\r\n[platform thread]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#platform-threads\r\n[virtual threads]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#virtual-threads","title":"How JVM thread scheduler control threads for multiprocessors?","body":"<p>The term “JVM thread scheduler” makes only sense, if we consider operating system, JVM and class library as an execution environment as a whole. Then, it’s guaranteed that this environment has a scheduler, regardless of how it is implemented.</p>\n<p>In most of today’s implementations the JVM will create an operating system level thread for each Java <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#platform-threads\" rel=\"nofollow noreferrer\">platform thread</a> and let the operating system do the scheduling. Starting with Java 21, there are also <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#virtual-threads\" rel=\"nofollow noreferrer\">virtual threads</a>, managed by the JVM but running atop platform threads, which still leaves the preemptive scheduling to the operating system. But a particular JVM implementation <em>may</em> contain a preemptive scheduler for operating systems that don’t have one.</p>\n<p>E.g., for Sun’s JVM that was the case back in the last millennium. At this time, there was the option to use <a href=\"https://en.wikipedia.org/wiki/Green_threads\" rel=\"nofollow noreferrer\">green threads</a>, as opposed to native threads. Note that these threads implemented without the aid of the operating system aren’t capable of using multiple CPUs/cores.</p>\n<p>So in practice, when you run your example program, the operating system’s scheduler may indeed assign the second thread to a different core. However, since this is a tiny program, it’s also possible that the first thread terminates before the second even starts its actual work, and in that case, it will likely run on the same core as the first, but there is no guaranty about any particular scheduling behavior at all.</p>\n<p>While there is no guaranty regarding a particular scheduling behavior, most SMP libraries and tools are built on the (founded) assumption, that if there are enough runnable threads with sufficient workload, the underlying system will assign these threads to available CPU cores.</p>\n"},{"tags":[],"owner":{"account_id":19135528,"reputation":53,"user_id":13976582,"display_name":"Yash Nasery"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599716454,"creation_date":1599716454,"answer_id":63823467,"question_id":41759261,"body_markdown":"As the others answered correctly, JVM uses the underlying OS (Windows 10 in my case) to manage threads. The windows OS will do pre-emptive (priority-based) scheduling. If there exists multiple threads with Highest priority, windows will use round-robin based time-slicing scheduling for the threads.\r\n\r\n( Reference:- https://learn.microsoft.com/en-us/windows/win32/procthread/scheduling-priorities )\r\n\r\nTo answer the specific question about the multi-processor systems (windows again here as OS), it depends on the architecture such a system is using. Typically there are 2 types of architecture\r\n\r\n 1. NUMA - Non Uniform Memory Access\r\n 2. SMP - Symmetric Multi-Processing\r\n\r\nIn case of NUMA, the thread is assigned to a processor which is closer (physically) to the memory being used. Because, that way the memory access is faster.\r\n\r\nHowever, in an SMP computer, two or more identical processors or cores connect to a single shared main memory. Essentially, it is like running things on a single integrated processor. Here, we cannot guarantee which processor the thread will be assigned to.\r\n\r\nYou can also specify a thread to execute on a particular processor by setting the &quot;ThreadAffinity&quot; or the &quot;Thread Ideal Processor&quot; property.\r\n\r\n( Reference:- https://learn.microsoft.com/en-us/windows/win32/procthread/multiple-processors ).\r\n\r\nHope this helps !! Cheers !!\r\n\r\n","title":"How JVM thread scheduler control threads for multiprocessors?","body":"<p>As the others answered correctly, JVM uses the underlying OS (Windows 10 in my case) to manage threads. The windows OS will do pre-emptive (priority-based) scheduling. If there exists multiple threads with Highest priority, windows will use round-robin based time-slicing scheduling for the threads.</p>\n<p>( Reference:- <a href=\"https://learn.microsoft.com/en-us/windows/win32/procthread/scheduling-priorities\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/windows/win32/procthread/scheduling-priorities</a> )</p>\n<p>To answer the specific question about the multi-processor systems (windows again here as OS), it depends on the architecture such a system is using. Typically there are 2 types of architecture</p>\n<ol>\n<li>NUMA - Non Uniform Memory Access</li>\n<li>SMP - Symmetric Multi-Processing</li>\n</ol>\n<p>In case of NUMA, the thread is assigned to a processor which is closer (physically) to the memory being used. Because, that way the memory access is faster.</p>\n<p>However, in an SMP computer, two or more identical processors or cores connect to a single shared main memory. Essentially, it is like running things on a single integrated processor. Here, we cannot guarantee which processor the thread will be assigned to.</p>\n<p>You can also specify a thread to execute on a particular processor by setting the &quot;ThreadAffinity&quot; or the &quot;Thread Ideal Processor&quot; property.</p>\n<p>( Reference:- <a href=\"https://learn.microsoft.com/en-us/windows/win32/procthread/multiple-processors\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/windows/win32/procthread/multiple-processors</a> ).</p>\n<p>Hope this helps !! Cheers !!</p>\n"}],"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3139,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"accepted_answer_id":41765718,"answer_count":3,"score":13,"last_activity_date":1695301126,"creation_date":1484901437,"question_id":41759261,"body_markdown":"I&#39;ve been reading Head First for multithreading. What I know about multithreading is: \r\n\r\nWhen we call **start()** with an object of **Thread** class that thread goes to the **Runnable** state. So all the threads go to **Runnable** state after calling **start()** by the object of those threads. It is ***JVM thread scheduler***, who picks thread randomly from **Runnable** state to give it in **Running** state. After going to **Running** state, the determined call stack for that specific thread becomes executed. \r\n\r\nAgain, JVM thread scheduler can stop the execution of a thread by picking that thread from Running state to Runnable state. This time, code execution is paused in the call stack of that thread. \r\n\r\n&gt; Now my question is, for multiprocessor machine, how JVM thread\r\n&gt; scheduler picks thread from the Runnable state? Does it pick only one\r\n&gt; thread and give it to a processor? Or, does it pick more than one\r\n&gt; thread and give those threads to Running state of different\r\n&gt; processors?\r\n\r\nI have written below code: \r\n\r\n    // Class of main thread\r\n    public class ThreadMain {\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t\r\n\t\t    Runnable threadJob=new MyRunnable();\r\n\t\t    Thread t=new Thread(threadJob);\r\n\t\t    t.start();\r\n\t\t    System.out.println(&quot;Back in the Main&quot;);\r\n\t    }\r\n    }\r\n    // Class of another thread\r\n    public class MyRunnable implements Runnable{\r\n\t\r\n\t    public void run()\r\n\t    {\r\n\t        System.out.println(&quot;I&#39;m Thread&quot;);\r\n\t    }\r\n    }\r\n\r\nHere, there are two threads. Main thread, and the thread I&#39;ve created. If my machine has multiprocessor, how will it behave? Will the JVM thread scheduler pick two threads at a time, and give those to two processors?  \r\n","title":"How JVM thread scheduler control threads for multiprocessors?","body":"<p>I've been reading Head First for multithreading. What I know about multithreading is: </p>\n\n<p>When we call <strong>start()</strong> with an object of <strong>Thread</strong> class that thread goes to the <strong>Runnable</strong> state. So all the threads go to <strong>Runnable</strong> state after calling <strong>start()</strong> by the object of those threads. It is <strong><em>JVM thread scheduler</em></strong>, who picks thread randomly from <strong>Runnable</strong> state to give it in <strong>Running</strong> state. After going to <strong>Running</strong> state, the determined call stack for that specific thread becomes executed. </p>\n\n<p>Again, JVM thread scheduler can stop the execution of a thread by picking that thread from Running state to Runnable state. This time, code execution is paused in the call stack of that thread. </p>\n\n<blockquote>\n  <p>Now my question is, for multiprocessor machine, how JVM thread\n  scheduler picks thread from the Runnable state? Does it pick only one\n  thread and give it to a processor? Or, does it pick more than one\n  thread and give those threads to Running state of different\n  processors?</p>\n</blockquote>\n\n<p>I have written below code: </p>\n\n<pre><code>// Class of main thread\npublic class ThreadMain {\n\n    public static void main(String[] args) {\n\n        Runnable threadJob=new MyRunnable();\n        Thread t=new Thread(threadJob);\n        t.start();\n        System.out.println(\"Back in the Main\");\n    }\n}\n// Class of another thread\npublic class MyRunnable implements Runnable{\n\n    public void run()\n    {\n        System.out.println(\"I'm Thread\");\n    }\n}\n</code></pre>\n\n<p>Here, there are two threads. Main thread, and the thread I've created. If my machine has multiprocessor, how will it behave? Will the JVM thread scheduler pick two threads at a time, and give those to two processors?  </p>\n"},{"tags":["java","maven","intellij-idea","bcrypt","bukkit"],"comments":[{"owner":{"account_id":20256516,"reputation":45,"user_id":14856171,"display_name":"Mikachu"},"score":0,"creation_date":1695300738,"post_id":77144805,"comment_id":136008029,"body_markdown":"Looks like a neat solution. I&#39;ll try if it works, but it seems kind of verbose(?) due to having to specify the main class explicitly, while its usually handled by my IDE. If there is a better solution to this I&#39;d love to know about it.","body":"Looks like a neat solution. I&#39;ll try if it works, but it seems kind of verbose(?) due to having to specify the main class explicitly, while its usually handled by my IDE. If there is a better solution to this I&#39;d love to know about it."},{"owner":{"account_id":12618974,"reputation":113,"user_id":9550393,"display_name":"BrunnoFdc"},"score":0,"creation_date":1700255585,"post_id":77144805,"comment_id":136636415,"body_markdown":"You don&#39;t need to specify the classpath using maven-shade-plugin","body":"You don&#39;t need to specify the classpath using maven-shade-plugin"}],"owner":{"account_id":20256516,"reputation":45,"user_id":14856171,"display_name":"Mikachu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695300789,"answer_count":0,"score":0,"last_activity_date":1695300971,"creation_date":1695231550,"question_id":77144805,"body_markdown":"I&#39;ve been developing a plugin that includes a feature of saving people&#39;s alt accounts in a database. I want it to be secure, so I decided to use the same hashing algorithm/library I used in my javascript projects, BCrypt. I included jBCrypt in my pom.xml like this:\r\n```xml\r\n    &lt;dependencies&gt;\r\n        ...\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mindrot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jbcrypt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\nAnd it compiles successfully when running the `install` lifecycle within IntelliJ IDEA. However, after facing the `java.lang.NoClassDefFoundError: org/mindrot/jbcrypt/BCrypt` error ([full error](https://paste.ee/p/neZVJ))\r\n\r\nIf there is any solution to this, please let me know.\r\n\r\nI tried to solve it by googling it, deleting my local maven repo, asking ChatGPT, restarting my server, my IDE and even my PC. I later unzipped the .jar and found that it was not including ANY classes from dependencies. This was never an issue because all of my dependencies like database drivers etc. were already included in the spigot.jar.\r\n\r\nEDIT: Using the maven-shade-plugin/maven-assembly-plugin solves this, but the solution seems verbose to me. Is there a less verbose way e.g. not having to specify the class path?","title":"Is there a less verbose way to bundle a library with an additional jar?","body":"<p>I've been developing a plugin that includes a feature of saving people's alt accounts in a database. I want it to be secure, so I decided to use the same hashing algorithm/library I used in my javascript projects, BCrypt. I included jBCrypt in my pom.xml like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependencies&gt;\n        ...\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mindrot&lt;/groupId&gt;\n            &lt;artifactId&gt;jbcrypt&lt;/artifactId&gt;\n            &lt;version&gt;0.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>And it compiles successfully when running the <code>install</code> lifecycle within IntelliJ IDEA. However, after facing the <code>java.lang.NoClassDefFoundError: org/mindrot/jbcrypt/BCrypt</code> error (<a href=\"https://paste.ee/p/neZVJ\" rel=\"nofollow noreferrer\">full error</a>)</p>\n<p>If there is any solution to this, please let me know.</p>\n<p>I tried to solve it by googling it, deleting my local maven repo, asking ChatGPT, restarting my server, my IDE and even my PC. I later unzipped the .jar and found that it was not including ANY classes from dependencies. This was never an issue because all of my dependencies like database drivers etc. were already included in the spigot.jar.</p>\n<p>EDIT: Using the maven-shade-plugin/maven-assembly-plugin solves this, but the solution seems verbose to me. Is there a less verbose way e.g. not having to specify the class path?</p>\n"},{"tags":["java","spring","spring-webflux","reactive-programming","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695283840,"creation_date":1695282579,"answer_id":77148202,"question_id":77147178,"body_markdown":"Actually, there are many ways to implement this.\r\n\r\nHere is an example where you apply function with `flatMap()` to every element of your product flux. This function uses your category `Mono` to to set the category to the product.\r\n\r\n&lt;!-- language: java --&gt;\r\n    productsFlux.flatMap(product -&gt; categoryMono.map(category -&gt; {\r\n        product.setCategory(category);\r\n        return product;\r\n    }));\r\n\r\nOr vice versa using `flatMapMany()` on you category Mono:\r\n\r\n&lt;!-- language: java --&gt;\r\n    categoryMono.flatMapMany(category -&gt; productsFlux.map(product -&gt; {\r\n        product.setCategory(category);\r\n        return product;\r\n    }));\r\n\r\nOr you can turn your category `Mono` into hot-never-ending flux with cache and do `Flux.zip()` on your products flux and category flux, like this: (I would prefer this option since it is better to ensure that db call for category called only once)\r\n\r\n&lt;!-- language: java --&gt;\r\n    Flux&lt;String&gt; categoryHotFlux = categoryMono.cache().repeat();\r\n\r\n    Flux.zip(productsFlux, categoryHotFlux)\r\n            .map(tuple -&gt; {\r\n                Product product = tuple.getT1();\r\n                Category category = tuple.getT2();\r\n                product.setCategory(category);\r\n                return product;\r\n            });","title":"How can I combine a Mono and a Flux","body":"<p>Actually, there are many ways to implement this.</p>\n<p>Here is an example where you apply function with <code>flatMap()</code> to every element of your product flux. This function uses your category <code>Mono</code> to to set the category to the product.</p>\n<pre class=\"lang-java prettyprint-override\"><code>productsFlux.flatMap(product -&gt; categoryMono.map(category -&gt; {\n    product.setCategory(category);\n    return product;\n}));\n</code></pre>\n<p>Or vice versa using <code>flatMapMany()</code> on you category Mono:</p>\n<pre class=\"lang-java prettyprint-override\"><code>categoryMono.flatMapMany(category -&gt; productsFlux.map(product -&gt; {\n    product.setCategory(category);\n    return product;\n}));\n</code></pre>\n<p>Or you can turn your category <code>Mono</code> into hot-never-ending flux with cache and do <code>Flux.zip()</code> on your products flux and category flux, like this: (I would prefer this option since it is better to ensure that db call for category called only once)</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux&lt;String&gt; categoryHotFlux = categoryMono.cache().repeat();\n\nFlux.zip(productsFlux, categoryHotFlux)\n        .map(tuple -&gt; {\n            Product product = tuple.getT1();\n            Category category = tuple.getT2();\n            product.setCategory(category);\n            return product;\n        });\n</code></pre>\n"}],"owner":{"account_id":2425828,"reputation":596,"user_id":2117774,"accept_rate":63,"display_name":"BreenDeen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77148202,"answer_count":1,"score":1,"last_activity_date":1695300869,"creation_date":1695270034,"question_id":77147178,"body_markdown":"I am creating a Flux of Product and a Mono Category object that needs to be applied to the Products because all they all all to be grouped into the same category. I am attempting to add the category to each Product like this.\r\n\r\n```java\r\n\r\n     Flux&lt;Product&gt; products = productRepository.findAllById(productCodes);\r\n     Mono&lt;Category&gt; category = categoryRepository.findById(productCodes.get(0));\r\n     \r\n     The category for all these products should be set as:\r\n\r\n     //If these were a list of products i.e List&lt;Product&gt; productList and Category was \r\n     //not a Mono I would set them like this:\r\n \r\n     productList.forEach( product -&gt; product.setCategory(category));\r\n\r\n```\r\n\r\nSince the respective repositories return Mono and Flux respectively, I am unsure how to do that use the reactive framework as I am very new to it. Can someone please show me how to achieve this using reactive?","title":"How can I combine a Mono and a Flux","body":"<p>I am creating a Flux of Product and a Mono Category object that needs to be applied to the Products because all they all all to be grouped into the same category. I am attempting to add the category to each Product like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n     Flux&lt;Product&gt; products = productRepository.findAllById(productCodes);\n     Mono&lt;Category&gt; category = categoryRepository.findById(productCodes.get(0));\n     \n     The category for all these products should be set as:\n\n     //If these were a list of products i.e List&lt;Product&gt; productList and Category was \n     //not a Mono I would set them like this:\n \n     productList.forEach( product -&gt; product.setCategory(category));\n\n</code></pre>\n<p>Since the respective repositories return Mono and Flux respectively, I am unsure how to do that use the reactive framework as I am very new to it. Can someone please show me how to achieve this using reactive?</p>\n"},{"tags":["java","testng","appium-android","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695300533,"creation_date":1695300533,"answer_id":77150404,"question_id":77150309,"body_markdown":"To share data between steps you&#39;ll want to use dependency injection. Cucumber supports a few frameworks, but picocontainer is the easiest to get started with.\r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n  [...]\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  [...]\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nSo suppose you have a class you want to share between different step definition classes. Note the absence of static fields, thread locals or concurrent data structures - you don&#39;t need them, `cucumber-picocontainer` care of that. \r\n\r\n```java\r\nimport java.util.List;\r\n\r\npublic class Belly {\r\n\r\n    private final List&lt;String&gt; contents;\r\n\r\n    public void setContents(List&lt;String&gt; contents){\r\n        this.contents = contents;\r\n    }\r\n    \r\n    public List&lt;String&gt; getContents(){\r\n        return contents;\r\n    }\r\n}\r\n```\r\n\r\nThen you declare `Belly` as a constructor argument for your step definitions. \r\n\r\n```java\r\n\r\nimport cucumber.api.java.en.Given;\r\nimport cucumber.api.java.en.Then;\r\n\r\nimport java.util.Collections;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\npublic class StepDefinition {\r\n\r\n    private final Belly belly;\r\n\r\n    public StepDefinitions(Belly belly) {\r\n        this.belly = belly;\r\n    }\r\n\r\n    @Given(&quot;I have {int} {word} in my belly&quot;)\r\n    public void I_have_n_things_in_my_belly(int n, String what) {\r\n        belly.setContents(Collections.nCopies(n, what));\r\n    }\r\n\r\n    @Then(&quot;there are {int} cukes in my belly&quot;)\r\n    public void checkCukes(int n) {\r\n        assertEquals(belly.getContents(), Collections.nCopies(n, &quot;cukes&quot;));\r\n    }\r\n}\r\n```\r\n\r\nWhen running your steps, Cucumber will when creating an instance of the `StepDefinition` class also create an instance of `Belly`. This instance is unique for each scenario and any data stored in it won&#39;t leak to the next scenario. \r\n\r\nSee: https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-picocontainer for more.","title":"Managing Concurrent Data Storage for Cucumber BDD Tests in a Parallel Execution Environment","body":"<p>To share data between steps you'll want to use dependency injection. Cucumber supports a few frameworks, but picocontainer is the easiest to get started with.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n  [...]\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  [...]\n&lt;/dependencies&gt;\n</code></pre>\n<p>So suppose you have a class you want to share between different step definition classes. Note the absence of static fields, thread locals or concurrent data structures - you don't need them, <code>cucumber-picocontainer</code> care of that.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\n\npublic class Belly {\n\n    private final List&lt;String&gt; contents;\n\n    public void setContents(List&lt;String&gt; contents){\n        this.contents = contents;\n    }\n    \n    public List&lt;String&gt; getContents(){\n        return contents;\n    }\n}\n</code></pre>\n<p>Then you declare <code>Belly</code> as a constructor argument for your step definitions.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport cucumber.api.java.en.Given;\nimport cucumber.api.java.en.Then;\n\nimport java.util.Collections;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\npublic class StepDefinition {\n\n    private final Belly belly;\n\n    public StepDefinitions(Belly belly) {\n        this.belly = belly;\n    }\n\n    @Given(&quot;I have {int} {word} in my belly&quot;)\n    public void I_have_n_things_in_my_belly(int n, String what) {\n        belly.setContents(Collections.nCopies(n, what));\n    }\n\n    @Then(&quot;there are {int} cukes in my belly&quot;)\n    public void checkCukes(int n) {\n        assertEquals(belly.getContents(), Collections.nCopies(n, &quot;cukes&quot;));\n    }\n}\n</code></pre>\n<p>When running your steps, Cucumber will when creating an instance of the <code>StepDefinition</code> class also create an instance of <code>Belly</code>. This instance is unique for each scenario and any data stored in it won't leak to the next scenario.</p>\n<p>See: <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-picocontainer\" rel=\"nofollow noreferrer\">https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-picocontainer</a> for more.</p>\n"}],"owner":{"account_id":21977865,"reputation":21,"user_id":16253400,"display_name":"Dhananjay kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695300533,"creation_date":1695299860,"question_id":77150309,"body_markdown":"Issue Summary:\r\nIn our Cucumber BDD framework using Java, we&#39;ve encountered a conflict while attempting to run multiple test cases in parallel. Each test case relies on storing raw data in a shared data structure (like a Map Interface). However, due to parallel execution, different threads end up containing conflicting values, leading to inaccurate test results.\r\n\r\nContext:\r\n\r\nWe are utilizing the Cucumber BDD framework with Java for our test automation.\r\nEach test case involves storing raw data in a shared data structure, specifically a Map Interface.\r\nThe goal is to parallelize test execution to improve efficiency and reduce test execution time.\r\nHowever, the parallel execution is causing conflicts in the shared data structure due to different threads accessing and modifying the data concurrently.\r\nRequest for Assistance:\r\n\r\nHow can we organize the storage of the Map Interface to ensure that each thread has its own isolated data for each test case?\r\nWhat approaches or best practices can we adopt to manage data storage efficiently and handle concurrent access during parallel test execution?\r\nPotential Approaches:\r\n\r\nThreadLocal with ConcurrentHashMap:\r\nUtilize ThreadLocal along with a ConcurrentHashMap to create thread-specific data storage, ensuring each test case has its independent data map.\r\n\r\nInheritableThreadLocal:\r\nExplore using InheritableThreadLocal to allow child threads to inherit the initial data map from the parent thread, providing a hierarchical approach to thread-specific data.\r\n\r\nCustom Data Structure with Synchronization:\r\nConsider a synchronized data structure (e.g., synchronized map) to handle concurrent access, ensuring each thread can access its test data in a synchronized manner.\r\n\r\nDatabase or External Storage:\r\nEvaluate the option of storing test data in a database or an external storage system, allowing each thread to retrieve and update its specific test data without conflicts.\r\n\r\nRequest for Guidance:\r\nWe are seeking advice, best practices, or code examples on implementing the chosen approach to handle concurrent data storage effectively during parallel test execution in our Cucumber BDD framework using Java.\r\n\r\n\r\n\r\n**1. Thread-Safe Data Structure Initialization:**\r\nInitialize a ThreadLocal variable to hold the Map for each thread. This ensures that each thread has its own isolated Map.\r\n\r\n```\r\npublic class TestData {\r\n    private static ThreadLocal&lt;Map&lt;String, Object&gt;&gt; testData = ThreadLocal.withInitial(HashMap::new);\r\n\r\n    public static Map&lt;String, Object&gt; getTestData() {\r\n        return testData.get();\r\n    }\r\n\r\n    public static void setTestData(Map&lt;String, Object&gt; data) {\r\n        testData.set(data);\r\n    }\r\n\r\n    public static void clearTestData() {\r\n        testData.remove();\r\n    }\r\n}\r\n```\r\n**2. Updating Raw Data for Each Test Case:**\r\nWhenever a step updates raw data, it should use the ThreadLocal Map to store data specific to the current test case.\r\n```\r\npublic class YourStepDefinitions {\r\n    @Given(&quot;some condition&quot;)\r\n    public void givenSomeCondition() {\r\n        // Retrieve the thread-specific Map for this test case\r\n        Map&lt;String, Object&gt; testData = TestData.getTestData();\r\n\r\n        // Add/update raw data for this test case\r\n        testData.put(&quot;key&quot;, &quot;value&quot;);\r\n    }\r\n\r\n    // Other step definitions\r\n}\r\n```\r\n**3. Usage in Cucumber Runner:**\r\nWhen running the tests in parallel, ensure that each thread operates on its own test data using the ThreadLocal Map and this is done for the Hooks class.\r\n`public class RunCucumberTests {\r\n    @Before\r\n    public void setUp() {\r\n        // Initialize thread-specific test data\r\n        TestData.setTestData(new HashMap&lt;&gt;());\r\n    }\r\n\r\n    @After\r\n    public void tearDown() {\r\n        // Clear thread-specific test data after each scenario\r\n        TestData.clearTestData();\r\n    }\r\n}`\r\n\r\n","title":"Managing Concurrent Data Storage for Cucumber BDD Tests in a Parallel Execution Environment","body":"<p>Issue Summary:\nIn our Cucumber BDD framework using Java, we've encountered a conflict while attempting to run multiple test cases in parallel. Each test case relies on storing raw data in a shared data structure (like a Map Interface). However, due to parallel execution, different threads end up containing conflicting values, leading to inaccurate test results.</p>\n<p>Context:</p>\n<p>We are utilizing the Cucumber BDD framework with Java for our test automation.\nEach test case involves storing raw data in a shared data structure, specifically a Map Interface.\nThe goal is to parallelize test execution to improve efficiency and reduce test execution time.\nHowever, the parallel execution is causing conflicts in the shared data structure due to different threads accessing and modifying the data concurrently.\nRequest for Assistance:</p>\n<p>How can we organize the storage of the Map Interface to ensure that each thread has its own isolated data for each test case?\nWhat approaches or best practices can we adopt to manage data storage efficiently and handle concurrent access during parallel test execution?\nPotential Approaches:</p>\n<p>ThreadLocal with ConcurrentHashMap:\nUtilize ThreadLocal along with a ConcurrentHashMap to create thread-specific data storage, ensuring each test case has its independent data map.</p>\n<p>InheritableThreadLocal:\nExplore using InheritableThreadLocal to allow child threads to inherit the initial data map from the parent thread, providing a hierarchical approach to thread-specific data.</p>\n<p>Custom Data Structure with Synchronization:\nConsider a synchronized data structure (e.g., synchronized map) to handle concurrent access, ensuring each thread can access its test data in a synchronized manner.</p>\n<p>Database or External Storage:\nEvaluate the option of storing test data in a database or an external storage system, allowing each thread to retrieve and update its specific test data without conflicts.</p>\n<p>Request for Guidance:\nWe are seeking advice, best practices, or code examples on implementing the chosen approach to handle concurrent data storage effectively during parallel test execution in our Cucumber BDD framework using Java.</p>\n<p><strong>1. Thread-Safe Data Structure Initialization:</strong>\nInitialize a ThreadLocal variable to hold the Map for each thread. This ensures that each thread has its own isolated Map.</p>\n<pre><code>public class TestData {\n    private static ThreadLocal&lt;Map&lt;String, Object&gt;&gt; testData = ThreadLocal.withInitial(HashMap::new);\n\n    public static Map&lt;String, Object&gt; getTestData() {\n        return testData.get();\n    }\n\n    public static void setTestData(Map&lt;String, Object&gt; data) {\n        testData.set(data);\n    }\n\n    public static void clearTestData() {\n        testData.remove();\n    }\n}\n</code></pre>\n<p><strong>2. Updating Raw Data for Each Test Case:</strong>\nWhenever a step updates raw data, it should use the ThreadLocal Map to store data specific to the current test case.</p>\n<pre><code>public class YourStepDefinitions {\n    @Given(&quot;some condition&quot;)\n    public void givenSomeCondition() {\n        // Retrieve the thread-specific Map for this test case\n        Map&lt;String, Object&gt; testData = TestData.getTestData();\n\n        // Add/update raw data for this test case\n        testData.put(&quot;key&quot;, &quot;value&quot;);\n    }\n\n    // Other step definitions\n}\n</code></pre>\n<p><strong>3. Usage in Cucumber Runner:</strong>\nWhen running the tests in parallel, ensure that each thread operates on its own test data using the ThreadLocal Map and this is done for the Hooks class.\n`public class RunCucumberTests {\n@Before\npublic void setUp() {\n// Initialize thread-specific test data\nTestData.setTestData(new HashMap&lt;&gt;());\n}</p>\n<pre><code>@After\npublic void tearDown() {\n    // Clear thread-specific test data after each scenario\n    TestData.clearTestData();\n}\n</code></pre>\n<p>}`</p>\n"},{"tags":["java","spring","opensearch"],"answers":[{"tags":[],"owner":{"account_id":19199389,"reputation":21,"user_id":14027622,"display_name":"Inconvenient9"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695300073,"creation_date":1695300073,"answer_id":77150339,"question_id":77141277,"body_markdown":"I found a solution:\r\n\r\n```\r\n.setRequestConfigCallback(requestConfigBuilder -&gt; requestConfigBuilder.setSocketTimeout(10000))\r\n```","title":"Configure read timeout OpenSearch client","body":"<p>I found a solution:</p>\n<pre><code>.setRequestConfigCallback(requestConfigBuilder -&gt; requestConfigBuilder.setSocketTimeout(10000))\n</code></pre>\n"}],"owner":{"account_id":19199389,"reputation":21,"user_id":14027622,"display_name":"Inconvenient9"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695300073,"creation_date":1695203656,"question_id":77141277,"body_markdown":"I don&#39;t find in documentation how to configure read timeout on an opensearch RestHighLevelClient\r\n\r\n\r\n\r\n\r\n\r\n```\r\nfinal CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\r\n            credentialsProvider.setCredentials(AuthScope.ANY, new UsernamePasswordCredentials(username, password));\r\n            RestClientBuilder builder = RestClient.builder(\r\n                            new HttpHost(url, port, scheme))\r\n                    .setHttpClientConfigCallback(httpClientBuilder -&gt; httpClientBuilder\r\n                            .setDefaultCredentialsProvider(credentialsProvider));\r\n            return new RestHighLevelClient(builder);\r\n```","title":"Configure read timeout OpenSearch client","body":"<p>I don't find in documentation how to configure read timeout on an opensearch RestHighLevelClient</p>\n<pre><code>final CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\n            credentialsProvider.setCredentials(AuthScope.ANY, new UsernamePasswordCredentials(username, password));\n            RestClientBuilder builder = RestClient.builder(\n                            new HttpHost(url, port, scheme))\n                    .setHttpClientConfigCallback(httpClientBuilder -&gt; httpClientBuilder\n                            .setDefaultCredentialsProvider(credentialsProvider));\n            return new RestHighLevelClient(builder);\n</code></pre>\n"},{"tags":["java","android","json"],"answers":[{"tags":[],"owner":{"account_id":6901421,"reputation":1030,"user_id":5370569,"display_name":"Nataraj KR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586536569,"creation_date":1586536569,"answer_id":61144627,"question_id":61144481,"body_markdown":"`error` in `obj.getBoolean(&quot;error&quot;)` is the key name. `getBoolean` method looks for `error` key name and returns its value if it exists and is of Boolean type else throws `JSONException`. Use `optBoolean` instead which returns `false` for exception or fallback value if specified.","title":"How JSONObject method getBoolean(&quot;error&quot;) works?","body":"<p><code>error</code> in <code>obj.getBoolean(\"error\")</code> is the key name. <code>getBoolean</code> method looks for <code>error</code> key name and returns its value if it exists and is of Boolean type else throws <code>JSONException</code>. Use <code>optBoolean</code> instead which returns <code>false</code> for exception or fallback value if specified.</p>\n"},{"tags":[],"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1586536602,"creation_date":1586536602,"answer_id":61144634,"question_id":61144481,"body_markdown":"`&quot;error&quot;` is a key.\r\n\r\n`JSONObject` represents a single object in JSON, and the `JSONObject.getBoolean(String key)` method looks for a key-value pair with the given key in that object. It look only at the first level of that one object, not deeper. ","title":"How JSONObject method getBoolean(&quot;error&quot;) works?","body":"<p><code>\"error\"</code> is a key.</p>\n\n<p><code>JSONObject</code> represents a single object in JSON, and the <code>JSONObject.getBoolean(String key)</code> method looks for a key-value pair with the given key in that object. It look only at the first level of that one object, not deeper. </p>\n"},{"tags":[],"owner":{"account_id":11225900,"reputation":51,"user_id":8235504,"display_name":"Elango Sk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695299351,"creation_date":1695299351,"answer_id":77150245,"question_id":61144481,"body_markdown":"Try this\r\n&#39;&#39;&#39;boolean remarks = processInput.containsKey(&quot;status&quot;); &#39;&#39;&#39;","title":"How JSONObject method getBoolean(&quot;error&quot;) works?","body":"<p>Try this\n'''boolean remarks = processInput.containsKey(&quot;status&quot;); '''</p>\n"}],"owner":{"account_id":18221864,"reputation":57,"user_id":13262453,"display_name":"Crunch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1327,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":61144634,"answer_count":3,"score":0,"last_activity_date":1695299351,"creation_date":1586536034,"question_id":61144481,"body_markdown":"I have following code which includes error checking expression:\r\n\r\n    JSONObject obj = new JSONObject(response);\r\n    if (!obj.getBoolean(&quot;error&quot;))\r\n\r\nI am wondering, how **getBoolean(String name)** works, will it search just &quot;error&quot; string in whole response body &amp; return TRUE or FALSE as we did not provide any arguments except &quot;error&quot; or there is something deeper than this?\r\nIs &quot;error&quot; a **key** or a **value** in the returned object?\r\n","title":"How JSONObject method getBoolean(&quot;error&quot;) works?","body":"<p>I have following code which includes error checking expression:</p>\n\n<pre><code>JSONObject obj = new JSONObject(response);\nif (!obj.getBoolean(\"error\"))\n</code></pre>\n\n<p>I am wondering, how <strong>getBoolean(String name)</strong> works, will it search just \"error\" string in whole response body &amp; return TRUE or FALSE as we did not provide any arguments except \"error\" or there is something deeper than this?\nIs \"error\" a <strong>key</strong> or a <strong>value</strong> in the returned object?</p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1633528326,"creation_date":1633528326,"answer_id":69467064,"question_id":69466279,"body_markdown":"As per `Selenium` documentation,\r\n\r\n- The version `v4.0.0-rc-1` supports `CDP` versions: `85`, `92`, `93`.\r\n\r\nBut you are using `94` version of `Chrome` and `ChromeDriver`. So please update your dependencies to latest version\r\n`v4.0.0-rc-2` \r\n\r\n**Dependency**: \r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.0-rc-2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Reference**: https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\r\n","title":"Java - Selenium - Unable to find an exact match for CDP version 94, so returning the closest version found: 93","body":"<p>As per <code>Selenium</code> documentation,</p>\n<ul>\n<li>The version <code>v4.0.0-rc-1</code> supports <code>CDP</code> versions: <code>85</code>, <code>92</code>, <code>93</code>.</li>\n</ul>\n<p>But you are using <code>94</code> version of <code>Chrome</code> and <code>ChromeDriver</code>. So please update your dependencies to latest version\n<code>v4.0.0-rc-2</code></p>\n<p><strong>Dependency</strong>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.0.0-rc-2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Reference</strong>: <a href=\"https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG\" rel=\"noreferrer\">https://github.com/SeleniumHQ/selenium/blob/trunk/java/CHANGELOG</a></p>\n"},{"tags":[],"owner":{"account_id":6385042,"reputation":63,"user_id":8077939,"display_name":"aakaasaraamanna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684904274,"creation_date":1684904274,"answer_id":76320194,"question_id":69466279,"body_markdown":"What worked for me is adding the specific dependency that directly supports the webdriver and browser I am using. I am using v113 of chrome, so I added the selenium-devtools-v113 dependency and that got rid of all the warnings.\r\n[Get the version you need from the link here.][1]\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-devtools-v113&lt;/artifactId&gt;\r\n            &lt;version&gt;4.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nAnd for the sl4j warning (which I see in the question), I added the below dependency\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://mvnrepository.com/search?q=Selenium%20DevTools","title":"Java - Selenium - Unable to find an exact match for CDP version 94, so returning the closest version found: 93","body":"<p>What worked for me is adding the specific dependency that directly supports the webdriver and browser I am using. I am using v113 of chrome, so I added the selenium-devtools-v113 dependency and that got rid of all the warnings.\n<a href=\"https://mvnrepository.com/search?q=Selenium%20DevTools\" rel=\"nofollow noreferrer\">Get the version you need from the link here.</a></p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-devtools-v113&lt;/artifactId&gt;\n            &lt;version&gt;4.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And for the sl4j warning (which I see in the question), I added the below dependency</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.6.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":18887601,"reputation":83,"user_id":13778663,"display_name":"Maca Prado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42359,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":69467064,"answer_count":2,"score":7,"last_activity_date":1695298232,"creation_date":1633525491,"question_id":69466279,"body_markdown":"I&#39;m new to Selenium and I&#39;m having an error about CDP versions when running my code.\r\nThis is my code. It&#39;s simple, aiming to log in into some web page. The driver opens, fills the email and password but when reaching the button, the driver closes. Even if I set another wait for ten minutes after the button. \r\n\r\n```\r\n    public static void main(String[] args) {\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;path/to/my/chromedriver&quot;);\r\n            WebDriver driver = new ChromeDriver();\r\n            WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\r\n            try {\r\n                driver.get(&quot;https://someweb.com/&quot;);\r\n                driver.findElement(By.name(&quot;Email&quot;)).sendKeys(&quot;anemail@email.com&quot;);\r\n                driver.findElement(By.name(&quot;Password&quot;)).sendKeys(&quot;randomPass&quot;);\r\n                driver.findElement(By.xpath(&quot;//*[@id=\\&quot;login-form\\&quot;]/button&quot;)).sendKeys(Keys.ENTER);\r\n            } finally {\r\n                driver.quit();\r\n            }\r\n\r\n        }\r\n```\r\n\r\nI get the following warning in my log\r\n\r\n```\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nStarting ChromeDriver 94.0.4606.61 (418b78f5838ed0b1c69bb4e51ea0252171854915-refs/branch-heads/4606@{#1204}) on port 44814\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\noct 06, 2021 9:45:02 AM org.openqa.selenium.remote.ProtocolHandshake createSession\r\nINFO: Detected dialect: W3C\r\noct 06, 2021 9:45:02 AM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\r\nWARNING: Unable to find an exact match for CDP version 94, so returning the closest version found: 93\r\noct 06, 2021 9:45:02 AM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\r\nINFO: Found CDP implementation for version 94 of 93\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nAnd I have the following dependencies in my pom\r\n\r\n```\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.0-rc-1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.0-rc-1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-devtools&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.0-rc-1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nI have no idea why the driver exits so suddenly. Chrome and ChromeDriver version is 94.0.4606.61. Thanks in advance!","title":"Java - Selenium - Unable to find an exact match for CDP version 94, so returning the closest version found: 93","body":"<p>I'm new to Selenium and I'm having an error about CDP versions when running my code.\nThis is my code. It's simple, aiming to log in into some web page. The driver opens, fills the email and password but when reaching the button, the driver closes. Even if I set another wait for ten minutes after the button.</p>\n<pre><code>    public static void main(String[] args) {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;path/to/my/chromedriver&quot;);\n            WebDriver driver = new ChromeDriver();\n            WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n            try {\n                driver.get(&quot;https://someweb.com/&quot;);\n                driver.findElement(By.name(&quot;Email&quot;)).sendKeys(&quot;anemail@email.com&quot;);\n                driver.findElement(By.name(&quot;Password&quot;)).sendKeys(&quot;randomPass&quot;);\n                driver.findElement(By.xpath(&quot;//*[@id=\\&quot;login-form\\&quot;]/button&quot;)).sendKeys(Keys.ENTER);\n            } finally {\n                driver.quit();\n            }\n\n        }\n</code></pre>\n<p>I get the following warning in my log</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nStarting ChromeDriver 94.0.4606.61 (418b78f5838ed0b1c69bb4e51ea0252171854915-refs/branch-heads/4606@{#1204}) on port 44814\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\noct 06, 2021 9:45:02 AM org.openqa.selenium.remote.ProtocolHandshake createSession\nINFO: Detected dialect: W3C\noct 06, 2021 9:45:02 AM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\nWARNING: Unable to find an exact match for CDP version 94, so returning the closest version found: 93\noct 06, 2021 9:45:02 AM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\nINFO: Found CDP implementation for version 94 of 93\n\nProcess finished with exit code 0\n</code></pre>\n<p>And I have the following dependencies in my pom</p>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-rc-1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-rc-1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-devtools&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-rc-1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>I have no idea why the driver exits so suddenly. Chrome and ChromeDriver version is 94.0.4606.61. Thanks in advance!</p>\n"},{"tags":["java","java-record"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1695287125,"post_id":77148710,"comment_id":136005204,"body_markdown":"There are immutable collection types. [Example](https://guava.dev/releases/23.0/api/docs/com/google/common/collect/ImmutableList.html)","body":"There are immutable collection types. <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/ImmutableList.html\" rel=\"nofollow noreferrer\">Example</a>"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1695294242,"post_id":77148710,"comment_id":136006708,"body_markdown":"Use `List.copyOf(..)` instead of `new ArrayList(..)`, and remove the use of `unmodifiableList`.","body":"Use <code>List.copyOf(..)</code> instead of <code>new ArrayList(..)</code>, and remove the use of <code>unmodifiableList</code>."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1695380654,"post_id":77148710,"comment_id":136020064,"body_markdown":"In later JDKs another benefit of `List.copyOf(bar)` is that the list won&#39;t be copied if the list is known to be immutable - say from an earlier `List.copyOf(xyz)`.","body":"In later JDKs another benefit of <code>List.copyOf(bar)</code> is that the list won&#39;t be copied if the list is known to be immutable - say from an earlier <code>List.copyOf(xyz)</code>."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1695298107,"creation_date":1695288803,"answer_id":77148959,"question_id":77148710,"body_markdown":"As far as the state of the list is concerned, this is enough for the record to be immutable. A test that proves it:\r\n```\r\npublic class ImmutabilityTests {\r\n\r\n  private List&lt;String&gt; initialList;\r\n  private Foo foo;\r\n  private List&lt;String&gt; expectedList;\r\n\r\n  @BeforeEach\r\n  void setUp() {\r\n    this.initialList = new ArrayList&lt;&gt;(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\r\n    this.foo = new Foo(this.initialList);\r\n    this.expectedList = new ArrayList&lt;&gt;(this.initialList);\r\n  }\r\n\r\n  @Test\r\n  public void testRecordListEqualsInitialList() {\r\n    assertEquals(this.expectedList, this.foo.bar(), &quot;Record list does not equal initial list&quot;);\r\n  }\r\n\r\n  @Test\r\n  public void testChangingInitialListDoesNotAffectRecordList() {\r\n    this.initialList.clear();\r\n    assertEquals(this.expectedList, this.foo.bar(), &quot;Changing initial list should not affect record list&quot;);\r\n  }\r\n\r\n  @Test\r\n  public void testChangingRecordListThrowsException() {\r\n    assertThrows(UnsupportedOperationException.class, () -&gt; this.foo.bar().clear(), &quot;Record list was not immutable&quot;);\r\n  }\r\n}\r\n```\r\nThe list in `Foo` is equal to the initial list, changing initial list does not change list in record, and attempting to change list in `Foo` throws exception.\r\n\r\nAdditionally you can simplify the record constructor, using [`List.copyOf()`][1]:\r\n\r\n&gt; Returns an unmodifiable List containing the elements of the given Collection, in its iteration order. The given Collection must not be null, and it must not contain any null elements. If the given Collection is subsequently modified, the returned List will not reflect such modifications.\r\n\r\n```\r\npublic record Foo(List&lt;String&gt; bar) {\r\n  public Foo {\r\n    bar = List.copyOf(bar);\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#copyOf(java.util.Collection)","title":"Make record truly immutable even a field is a collection","body":"<p>As far as the state of the list is concerned, this is enough for the record to be immutable. A test that proves it:</p>\n<pre><code>public class ImmutabilityTests {\n\n  private List&lt;String&gt; initialList;\n  private Foo foo;\n  private List&lt;String&gt; expectedList;\n\n  @BeforeEach\n  void setUp() {\n    this.initialList = new ArrayList&lt;&gt;(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\n    this.foo = new Foo(this.initialList);\n    this.expectedList = new ArrayList&lt;&gt;(this.initialList);\n  }\n\n  @Test\n  public void testRecordListEqualsInitialList() {\n    assertEquals(this.expectedList, this.foo.bar(), &quot;Record list does not equal initial list&quot;);\n  }\n\n  @Test\n  public void testChangingInitialListDoesNotAffectRecordList() {\n    this.initialList.clear();\n    assertEquals(this.expectedList, this.foo.bar(), &quot;Changing initial list should not affect record list&quot;);\n  }\n\n  @Test\n  public void testChangingRecordListThrowsException() {\n    assertThrows(UnsupportedOperationException.class, () -&gt; this.foo.bar().clear(), &quot;Record list was not immutable&quot;);\n  }\n}\n</code></pre>\n<p>The list in <code>Foo</code> is equal to the initial list, changing initial list does not change list in record, and attempting to change list in <code>Foo</code> throws exception.</p>\n<p>Additionally you can simplify the record constructor, using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#copyOf(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>List.copyOf()</code></a>:</p>\n<blockquote>\n<p>Returns an unmodifiable List containing the elements of the given Collection, in its iteration order. The given Collection must not be null, and it must not contain any null elements. If the given Collection is subsequently modified, the returned List will not reflect such modifications.</p>\n</blockquote>\n<pre><code>public record Foo(List&lt;String&gt; bar) {\n  public Foo {\n    bar = List.copyOf(bar);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695293866,"creation_date":1695293866,"answer_id":77149616,"question_id":77148710,"body_markdown":"Method `Collections.unmodifiableList()` is your answer. it creates an immutable list regardless of what are the contents. Even if the instances that you store in the list are of a mutable class. One more trick before you pass your list as a parameter do this:\r\n\r\n    public final ArrayList&lt;MyClass&gt; constantList = Collections.unmodifiableList(origList);\r\n\r\nThis will protect you from someone assigning new list instance to your `constantList`","title":"Make record truly immutable even a field is a collection","body":"<p>Method <code>Collections.unmodifiableList()</code> is your answer. it creates an immutable list regardless of what are the contents. Even if the instances that you store in the list are of a mutable class. One more trick before you pass your list as a parameter do this:</p>\n<pre><code>public final ArrayList&lt;MyClass&gt; constantList = Collections.unmodifiableList(origList);\n</code></pre>\n<p>This will protect you from someone assigning new list instance to your <code>constantList</code></p>\n"}],"owner":{"account_id":123781,"reputation":516,"user_id":318457,"accept_rate":20,"display_name":"hibbelig"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1695298107,"creation_date":1695286884,"question_id":77148710,"body_markdown":"The naive approach to have a record field that is a collection leads to mutable records, and I think that&#39;s something we don&#39;t want.\r\n\r\nDo people generally ignore this aspect, or does one try hard to make the record truly immutable?\r\n\r\nIf the latter, what would one do?\r\n\r\nThe naive approach would be `record Foo(List&lt;String&gt; bar) { }`, and I guess people can do `foo.bar().add(...)` and similar things to mutate this “immutable” record.\r\n\r\nThe record constructor could clone the list, then make it unmodifiable, would that be sufficient?\r\n\r\n```java\r\nrecord Foo(List&lt;String&gt; bar) {\r\n    Foo {\r\n        bar = new ArrayList&lt;&gt;(bar);\r\n        bar = Collections.unmodifiableList(bar);\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m not sure if this leads to some other way where `foo.bar()` ends up being mutable after all.\r\n\r\nAll of the above can only work because `String` is immutable, I understand that we need to make sure that a record is only constructed of immutable things.","title":"Make record truly immutable even a field is a collection","body":"<p>The naive approach to have a record field that is a collection leads to mutable records, and I think that's something we don't want.</p>\n<p>Do people generally ignore this aspect, or does one try hard to make the record truly immutable?</p>\n<p>If the latter, what would one do?</p>\n<p>The naive approach would be <code>record Foo(List&lt;String&gt; bar) { }</code>, and I guess people can do <code>foo.bar().add(...)</code> and similar things to mutate this “immutable” record.</p>\n<p>The record constructor could clone the list, then make it unmodifiable, would that be sufficient?</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Foo(List&lt;String&gt; bar) {\n    Foo {\n        bar = new ArrayList&lt;&gt;(bar);\n        bar = Collections.unmodifiableList(bar);\n    }\n}\n</code></pre>\n<p>I'm not sure if this leads to some other way where <code>foo.bar()</code> ends up being mutable after all.</p>\n<p>All of the above can only work because <code>String</code> is immutable, I understand that we need to make sure that a record is only constructed of immutable things.</p>\n"},{"tags":["java","postgresql","jdbctemplate"],"answers":[{"tags":[],"owner":{"account_id":5230492,"reputation":3451,"user_id":4181015,"display_name":"Bohdan Levchenko"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1496675409,"creation_date":1496674365,"answer_id":44371703,"question_id":44371117,"body_markdown":"Ok, the first thing you should do is design that function for insert/update data. Postgres supports many languages for that, but the most popular one is plpgsql.\r\n\r\nThe function itself might look like:\r\n\r\n    CREATE OR REPLACE FUNCTION update_employee(p_id INT, p_name VARCHAR(255), p_age INT, p_salary DECIMAL)\r\n      RETURNS INT\r\n    LANGUAGE plpgsql\r\n    AS $$\r\n    BEGIN\r\n      IF p_id IS NULL\r\n      THEN\r\n        INSERT INTO employee (name, age, salary) VALUES (p_name, p_age, p_salary) RETURNING id INTO p_id;\r\n      ELSE\r\n        UPDATE employee\r\n        SET name = p_name, age = p_age, salary = p_salary\r\n        WHERE id = p_id;\r\n      END IF;\r\n      RETURN p_id;\r\n    END;\r\n    $$;\r\n\r\nNow if you call this function with `null` as ID it will insert the data, otherwise data will be found by specified id and updated.\r\n\r\nIn both cases you&#39;ll get the ID of modified record back.\r\n\r\n&lt;!-- language: sql --&gt;\r\n\r\n    SELECT update_employee(NULL, &#39;John&#39;, 42, 100000);  -- insert (returns 1)\r\n    SELECT update_employee(1, &#39;John Smith&#39;, 42, 200000); -- update previous record\r\n\r\nProbably it would be better to separate insert function from update, but it is just a sample.\r\n\r\nSo, with that you can call the function from spring using for example SimpleJdbcCall:\r\n\r\n    final SimpleJdbcCall updateEmployeeCall = new SimpleJdbcCall(jdbcTemplate).withFunctionName(&quot;update_employee&quot;);\r\n    final Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;p_id&quot;, null);\r\n    params.put(&quot;p_name&quot;, &quot;John&quot;);\r\n    params.put(&quot;p_age&quot;, 28);\r\n    params.put(&quot;p_salary&quot;, 150000);\r\n    \r\n    final Map&lt;String, Object&gt; result = updateEmployeeCall.execute(params);\r\n    System.out.println(result.get(&quot;returnvalue&quot;));","title":"How to invoke PostgreSQL function using spring jdbctemplate instead of direct insert query in Java?","body":"<p>Ok, the first thing you should do is design that function for insert/update data. Postgres supports many languages for that, but the most popular one is plpgsql.</p>\n\n<p>The function itself might look like:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION update_employee(p_id INT, p_name VARCHAR(255), p_age INT, p_salary DECIMAL)\n  RETURNS INT\nLANGUAGE plpgsql\nAS $$\nBEGIN\n  IF p_id IS NULL\n  THEN\n    INSERT INTO employee (name, age, salary) VALUES (p_name, p_age, p_salary) RETURNING id INTO p_id;\n  ELSE\n    UPDATE employee\n    SET name = p_name, age = p_age, salary = p_salary\n    WHERE id = p_id;\n  END IF;\n  RETURN p_id;\nEND;\n$$;\n</code></pre>\n\n<p>Now if you call this function with <code>null</code> as ID it will insert the data, otherwise data will be found by specified id and updated.</p>\n\n<p>In both cases you'll get the ID of modified record back.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT update_employee(NULL, 'John', 42, 100000);  -- insert (returns 1)\nSELECT update_employee(1, 'John Smith', 42, 200000); -- update previous record\n</code></pre>\n\n<p>Probably it would be better to separate insert function from update, but it is just a sample.</p>\n\n<p>So, with that you can call the function from spring using for example SimpleJdbcCall:</p>\n\n<pre><code>final SimpleJdbcCall updateEmployeeCall = new SimpleJdbcCall(jdbcTemplate).withFunctionName(\"update_employee\");\nfinal Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\nparams.put(\"p_id\", null);\nparams.put(\"p_name\", \"John\");\nparams.put(\"p_age\", 28);\nparams.put(\"p_salary\", 150000);\n\nfinal Map&lt;String, Object&gt; result = updateEmployeeCall.execute(params);\nSystem.out.println(result.get(\"returnvalue\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21427279,"reputation":9,"user_id":15784373,"display_name":"ivvasch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695298083,"creation_date":1695298083,"answer_id":77150109,"question_id":44371117,"body_markdown":"if you use spring data jdbc, you will call function like this:\r\n\r\n    @Repository \r\n    public interface ExchangeRateRepository extends CrudRepository&lt;ExchangeRate, Integer&gt; {\r\n    @Modifying\r\n    @Query(value = &quot;call s_pay_dev.p_load_rates(:from::varchar, :to::varchar, :date::date, :time::time, :rate::numeric)&quot;)\r\n    void saveRateToDB(@Param(&quot;from&quot;) String from, @Param(&quot;to&quot;) String to,\r\n                      @Param(&quot;date&quot;) String date, @Param(&quot;time&quot;) String time,\r\n                      @Param(&quot;rate&quot;) Float rate);}","title":"How to invoke PostgreSQL function using spring jdbctemplate instead of direct insert query in Java?","body":"<p>if you use spring data jdbc, you will call function like this:</p>\n<pre><code>@Repository \npublic interface ExchangeRateRepository extends CrudRepository&lt;ExchangeRate, Integer&gt; {\n@Modifying\n@Query(value = &quot;call s_pay_dev.p_load_rates(:from::varchar, :to::varchar, :date::date, :time::time, :rate::numeric)&quot;)\nvoid saveRateToDB(@Param(&quot;from&quot;) String from, @Param(&quot;to&quot;) String to,\n                  @Param(&quot;date&quot;) String date, @Param(&quot;time&quot;) String time,\n                  @Param(&quot;rate&quot;) Float rate);}\n</code></pre>\n"}],"owner":{"account_id":11007769,"reputation":147,"user_id":8086205,"accept_rate":60,"display_name":"User123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9018,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44371703,"answer_count":2,"score":4,"last_activity_date":1695298083,"creation_date":1496672494,"question_id":44371117,"body_markdown":"I am new to PostgreSQL. I need to call postgresql function from spring jdbctemplate for storing Employee table details. Below is my code in which I am using insert query to store the Employee details. I need to replace insert query with the Postgresql function-&quot;UpdateEmployee&quot;.\r\n\r\n    @Autowired\r\n\tJdbcTemplate postgressqljdbctemplate;\r\n\r\n\r\n    @Override\r\n\tpublic void update(Employee employee) {\r\n\tString SQL = &quot;insert into employee(Id, name, age, salary) values (?,?,?,?)&quot;;\r\n\tpostgressqljdbctemplate.update(SQL, new Object[] { employee.getId(), employee.getName(),\r\n    employee.getAge(), employee.getSalary()});\r\n\t}","title":"How to invoke PostgreSQL function using spring jdbctemplate instead of direct insert query in Java?","body":"<p>I am new to PostgreSQL. I need to call postgresql function from spring jdbctemplate for storing Employee table details. Below is my code in which I am using insert query to store the Employee details. I need to replace insert query with the Postgresql function-\"UpdateEmployee\".</p>\n\n<pre><code>@Autowired\nJdbcTemplate postgressqljdbctemplate;\n\n\n@Override\npublic void update(Employee employee) {\nString SQL = \"insert into employee(Id, name, age, salary) values (?,?,?,?)\";\npostgressqljdbctemplate.update(SQL, new Object[] { employee.getId(), employee.getName(),\nemployee.getAge(), employee.getSalary()});\n}\n</code></pre>\n"},{"tags":["java","charts","jzy3d"],"answers":[{"tags":[],"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320748034,"creation_date":1320747687,"answer_id":8048919,"question_id":8048028,"body_markdown":"You should add `jogl.jar` to classpath and `jogl.dll` to PATH. &lt;br/&gt;\r\nFor more info look [here][1] and [here][2].\r\n\r\nYou can read `jogl` *Installation Instructions* [here][3]. \r\n\r\n\r\n  [1]: http://forum.worldwindcentral.com/showthread.php?t=21721\r\n  [2]: http://code.google.com/p/jzy3d/wiki/FAQ\r\n  [3]: http://www.cs.umd.edu/~meesh/kmconroy/JOGLTutorial/","title":"How to use Jzy3d java 3d chart library?","body":"<p>You should add <code>jogl.jar</code> to classpath and <code>jogl.dll</code> to PATH. <br/>\nFor more info look <a href=\"http://forum.worldwindcentral.com/showthread.php?t=21721\" rel=\"nofollow\">here</a> and <a href=\"http://code.google.com/p/jzy3d/wiki/FAQ\" rel=\"nofollow\">here</a>.</p>\n\n<p>You can read <code>jogl</code> <em>Installation Instructions</em> <a href=\"http://www.cs.umd.edu/~meesh/kmconroy/JOGLTutorial/\" rel=\"nofollow\">here</a>. </p>\n"},{"tags":[],"owner":{"account_id":81375,"reputation":2305,"user_id":229513,"accept_rate":57,"display_name":"Martin Pernollet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320748695,"creation_date":1320748695,"answer_id":8049121,"question_id":8048028,"body_markdown":"You should run your program or demo where the JOGL native libraries stand, i.e. ./bin/{platform}. If you are working with Eclipse, right click on the project, choose Propeties, Java Build Path then the Libraries tab. Under the item &quot;jogl.jar - ...&quot; select &quot;Native library location: (None)&quot; and click the Edit button. Press the Workspace... button and select the ./bin/{platform} folder.","title":"How to use Jzy3d java 3d chart library?","body":"<p>You should run your program or demo where the JOGL native libraries stand, i.e. ./bin/{platform}. If you are working with Eclipse, right click on the project, choose Propeties, Java Build Path then the Libraries tab. Under the item \"jogl.jar - ...\" select \"Native library location: (None)\" and click the Edit button. Press the Workspace... button and select the ./bin/{platform} folder.</p>\n"}],"owner":{"account_id":1025966,"reputation":3015,"user_id":1035271,"accept_rate":50,"display_name":"Jsncrdnl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8627,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695297960,"creation_date":1320743021,"question_id":8048028,"body_markdown":"Can someone please give me some extra basic example of how `jzy3d` should be used?  \r\n(The source site&#39;s examples don&#39;t seam to work for me)\r\n\r\nI tried the following code:\r\n\r\n    import org.jzy3d.chart.Chart;\r\n    import org.jzy3d.colors.Color;\r\n    import org.jzy3d.colors.ColorMapper;\r\n    import org.jzy3d.colors.colormaps.ColorMapRainbow;\r\n    import org.jzy3d.maths.Range;\r\n    import org.jzy3d.plot3d.builder.Builder;\r\n    import org.jzy3d.plot3d.builder.Mapper;\r\n    import org.jzy3d.plot3d.builder.concrete.OrthonormalGrid;\r\n    import org.jzy3d.plot3d.primitives.Shape;\r\n    \r\n    public class Test {\r\n\r\n        public static void main(String[] args) {\r\n    \r\n            JFrame frame = new JFrame();\r\n            Chart chart = getChart();\r\n    \r\n            frame.add((javax.swing.JComponent) chart.getCanvas());\r\n    \r\n            frame.setSize(800, 800);\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setTitle(&quot;test&quot;);\r\n            frame.setVisible(true);\r\n        }\r\n    \r\n        public static Chart getChart() {\r\n            // Define a function to plot\r\n            Mapper mapper = new Mapper() {\r\n                public double f(double x, double y) {\r\n                    return 10 * Math.sin(x / 10) * Math.cos(y / 20) * x;\r\n                }\r\n            };\r\n    \r\n            // Define range and precision for the function to plot\r\n            Range range = new Range(-150, 150);\r\n            int steps = 50;\r\n    \r\n            // Create the object to represent the function over the given range.\r\n            org.jzy3d.plot3d.primitives.Shape surface = (Shape) Builder.buildOrthonormal(new OrthonormalGrid(range, steps, range, steps), mapper);\r\n            surface.setColorMapper(new ColorMapper(new ColorMapRainbow(), surface.getBounds().getZmin(), surface.getBounds().getZmax(), new Color(1, 1, 1, .5f)));\r\n            surface.setWireframeDisplayed(true);\r\n            surface.setWireframeColor(Color.BLACK);\r\n            //surface.setFace(new ColorbarFace(surface));\r\n            surface.setFaceDisplayed(true);\r\n            //surface.setFace2dDisplayed(true); // opens a colorbar on the right part of the display\r\n    \r\n            // Create a chart\r\n            Chart chart = new Chart();\r\n            chart.getScene().getGraph().add(surface);\r\n            return chart;\r\n        }\r\n    }\r\n\r\nBut when I try to run it, I get that exception:\r\n\r\n&gt;&gt;Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no jogl in java.library.path\r\n\r\nCan anyone help?","title":"How to use Jzy3d java 3d chart library?","body":"<p>Can someone please give me some extra basic example of how <code>jzy3d</code> should be used?<br>\n(The source site's examples don't seam to work for me)</p>\n\n<p>I tried the following code:</p>\n\n<pre><code>import org.jzy3d.chart.Chart;\nimport org.jzy3d.colors.Color;\nimport org.jzy3d.colors.ColorMapper;\nimport org.jzy3d.colors.colormaps.ColorMapRainbow;\nimport org.jzy3d.maths.Range;\nimport org.jzy3d.plot3d.builder.Builder;\nimport org.jzy3d.plot3d.builder.Mapper;\nimport org.jzy3d.plot3d.builder.concrete.OrthonormalGrid;\nimport org.jzy3d.plot3d.primitives.Shape;\n\npublic class Test {\n\n    public static void main(String[] args) {\n\n        JFrame frame = new JFrame();\n        Chart chart = getChart();\n\n        frame.add((javax.swing.JComponent) chart.getCanvas());\n\n        frame.setSize(800, 800);\n        frame.setLocationRelativeTo(null);\n        frame.setTitle(\"test\");\n        frame.setVisible(true);\n    }\n\n    public static Chart getChart() {\n        // Define a function to plot\n        Mapper mapper = new Mapper() {\n            public double f(double x, double y) {\n                return 10 * Math.sin(x / 10) * Math.cos(y / 20) * x;\n            }\n        };\n\n        // Define range and precision for the function to plot\n        Range range = new Range(-150, 150);\n        int steps = 50;\n\n        // Create the object to represent the function over the given range.\n        org.jzy3d.plot3d.primitives.Shape surface = (Shape) Builder.buildOrthonormal(new OrthonormalGrid(range, steps, range, steps), mapper);\n        surface.setColorMapper(new ColorMapper(new ColorMapRainbow(), surface.getBounds().getZmin(), surface.getBounds().getZmax(), new Color(1, 1, 1, .5f)));\n        surface.setWireframeDisplayed(true);\n        surface.setWireframeColor(Color.BLACK);\n        //surface.setFace(new ColorbarFace(surface));\n        surface.setFaceDisplayed(true);\n        //surface.setFace2dDisplayed(true); // opens a colorbar on the right part of the display\n\n        // Create a chart\n        Chart chart = new Chart();\n        chart.getScene().getGraph().add(surface);\n        return chart;\n    }\n}\n</code></pre>\n\n<p>But when I try to run it, I get that exception:</p>\n\n<blockquote>\n  <blockquote>\n    <p>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no jogl in java.library.path</p>\n  </blockquote>\n</blockquote>\n\n<p>Can anyone help?</p>\n"},{"tags":["javascript","java","android","android-studio","webview"],"owner":{"account_id":16719703,"reputation":125,"user_id":12084946,"display_name":"Harry K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695297593,"creation_date":1695297593,"question_id":77150051,"body_markdown":"I&#39;m trying to build a web view app for a site and I have added the places API with key and tested. It works fine.\r\n\r\nBut when I built the app in web view the places API didn&#39;t work. \r\n\r\nHere&#39;s my Code : \r\n\r\n[**Activity:**][1]\r\n\r\n\r\n[**Manifest:**][2]\r\n\r\n\r\nAny help is greatly appreciated.\r\n\r\n\r\n  [1]: https://codeshare.io/X8DvWK\r\n  [2]: https://codeshare.io/DZK7rk","title":"Unable to use Google Places API in android webview","body":"<p>I'm trying to build a web view app for a site and I have added the places API with key and tested. It works fine.</p>\n<p>But when I built the app in web view the places API didn't work.</p>\n<p>Here's my Code :</p>\n<p><a href=\"https://codeshare.io/X8DvWK\" rel=\"nofollow noreferrer\"><strong>Activity:</strong></a></p>\n<p><a href=\"https://codeshare.io/DZK7rk\" rel=\"nofollow noreferrer\"><strong>Manifest:</strong></a></p>\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["java","regex","regex-group","regex-negation"],"comments":[{"owner":{"account_id":13113751,"reputation":142064,"user_id":9473764,"display_name":"Nick"},"score":1,"creation_date":1692320888,"post_id":76925874,"comment_id":135610699,"body_markdown":"You probably want a negative lookahead for `.writing` at the end of the string i.e. `(?!.*\\.writing$)`","body":"You probably want a negative lookahead for <code>.writing</code> at the end of the string i.e. <code>(?!.*\\.writing$)</code>"},{"owner":{"account_id":13113751,"reputation":142064,"user_id":9473764,"display_name":"Nick"},"score":0,"creation_date":1692320949,"post_id":76925874,"comment_id":135610702,"body_markdown":"It would be helpful to know which language you are using","body":"It would be helpful to know which language you are using"},{"owner":{"account_id":106565,"reputation":18790,"user_id":283837,"accept_rate":70,"display_name":"Simeon Leyzerzon"},"score":0,"creation_date":1692321020,"post_id":76925874,"comment_id":135610705,"body_markdown":"@Nick I will be passing the regex to Java, but is it not language agnostic?","body":"@Nick I will be passing the regex to Java, but is it not language agnostic?"},{"owner":{"account_id":13113751,"reputation":142064,"user_id":9473764,"display_name":"Nick"},"score":0,"creation_date":1692321129,"post_id":76925874,"comment_id":135610716,"body_markdown":"Not necessarily. For example, not all languages support all forms of lookarounds.","body":"Not necessarily. For example, not all languages support all forms of lookarounds."},{"owner":{"account_id":13113751,"reputation":142064,"user_id":9473764,"display_name":"Nick"},"score":0,"creation_date":1692321280,"post_id":76925874,"comment_id":135610725,"body_markdown":"You probably want something like this https://regex101.com/r/QI43Cn/1","body":"You probably want something like this <a href=\"https://regex101.com/r/QI43Cn/1\" rel=\"nofollow noreferrer\">regex101.com/r/QI43Cn/1</a>"},{"owner":{"account_id":8432669,"reputation":307,"user_id":6327834,"display_name":"ABaumstumpf"},"score":0,"creation_date":1692352298,"post_id":76925874,"comment_id":135614351,"body_markdown":"There is no 1 correct Regex - there are many variations and slight differences between each and every regex-engine.\nhttps://en.wikipedia.org/wiki/Regular_expression#Standards\nFor many languages you can also get various different libraries offering different behaviour.\nFor java https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html - it should ofer lookahead.","body":"There is no 1 correct Regex - there are many variations and slight differences between each and every regex-engine. <a href=\"https://en.wikipedia.org/wiki/Regular_expression#Standards\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Regular_expression#Standards</a> For many languages you can also get various different libraries offering different behaviour. For java <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.ht&zwnj;&#8203;ml</a> - it should ofer lookahead."}],"answers":[{"tags":[],"owner":{"account_id":212394,"reputation":176424,"user_id":465183,"accept_rate":77,"display_name":"Gilles Qu&#233;not"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692320913,"creation_date":1692320913,"answer_id":76925877,"question_id":76925874,"body_markdown":"With `grep`:\r\n\r\n    AaA.BbB.CcC.DdD.EeE\r\n    a1.b2.c3.d4.e5\r\n    AaA.BbB.CcC.DdD.EeE.writing\r\n    \r\n    $ grep -v &#39;.writing&#39; file\r\n    AaA.BbB.CcC.DdD.EeE\r\n    a1.b2.c3.d4.e5\r\n\r\n","title":"How to filter out a string with regular expression","body":"<p>With <code>grep</code>:</p>\n<pre><code>AaA.BbB.CcC.DdD.EeE\na1.b2.c3.d4.e5\nAaA.BbB.CcC.DdD.EeE.writing\n\n$ grep -v '.writing' file\nAaA.BbB.CcC.DdD.EeE\na1.b2.c3.d4.e5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8432669,"reputation":307,"user_id":6327834,"display_name":"ABaumstumpf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692353779,"creation_date":1692353779,"answer_id":76928409,"question_id":76925874,"body_markdown":"your examples do not really match up.\r\n\r\n`[\\d\\w]` &#236;s redundant:  `\\d` is `[0-9]` but `\\w` already is matching that with `[a-zA-Z_0-9]`,\r\n\r\nAnd you say \r\n\r\n&gt; `AaA.BbB.CcC.DdD.EeE.writing` or `a1.b2.c3.d4.e5.writing` shouldn&#39;t due to the `.writing` suffix.\r\n\r\nNow if you only care about if it matches or not then you can check if there is a match for the prohibited ending and negate your following logic.\r\n\r\n    String inputString = &lt;your-input&gt;;\r\n    if( Pattern.compile(&quot;\\\\w*\\\\.writing$&quot;).matcher(inputstring).matches() ) {\r\n     // no match - so the string is &quot;valid&quot;\r\n    }\r\n\r\n","title":"How to filter out a string with regular expression","body":"<p>your examples do not really match up.</p>\n<p><code>[\\d\\w]</code> ìs redundant:  <code>\\d</code> is <code>[0-9]</code> but <code>\\w</code> already is matching that with <code>[a-zA-Z_0-9]</code>,</p>\n<p>And you say</p>\n<blockquote>\n<p><code>AaA.BbB.CcC.DdD.EeE.writing</code> or <code>a1.b2.c3.d4.e5.writing</code> shouldn't due to the <code>.writing</code> suffix.</p>\n</blockquote>\n<p>Now if you only care about if it matches or not then you can check if there is a match for the prohibited ending and negate your following logic.</p>\n<pre><code>String inputString = &lt;your-input&gt;;\nif( Pattern.compile(&quot;\\\\w*\\\\.writing$&quot;).matcher(inputstring).matches() ) {\n // no match - so the string is &quot;valid&quot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8571883,"reputation":821,"user_id":6422459,"display_name":"DigitShifter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695297436,"creation_date":1695296599,"answer_id":77149916,"question_id":76925874,"body_markdown":"Alternative regex:\r\n\r\n&quot;^(?:\\\\w+\\\\.)+\\\\w+$&quot; and &quot;\\\\.writing$&quot;\r\n\r\nRegex in testbench and context:\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; inputs = List.of(&quot;AaA.BbB.CcC.DdD.EeE&quot;, &quot;a1.b2.c3.d4.e5&quot;, &quot;AaA.BbB.CcC.DdD.EeE.writing&quot;, &quot;a1.b2.c3.d4.e5.writing&quot;);\r\n\r\n        for (String input: inputs) {\r\n            printResult(input);\r\n        }\r\n    }\r\n\r\n    private static void printResult(String input) {\r\n        // Pattern allowedPattern = Pattern.compile(&quot;^(?:\\\\w+\\\\.)+\\\\w+$&quot;); -&gt; \\\\w will match &#39;A word character: [a-zA-Z_0-9]&#39;\r\n        // Pattern allowedPattern = Pattern.compile(&quot;^(?:[a-zA-Z0-9]+\\\\.){4}[a-zA-Z0-9]+$&quot;); -&gt; if you know that it always going to be 4 sections with ending dot, and the last section with no dot\r\n\r\n        Pattern allowedPattern = Pattern.compile(&quot;^(?:[a-zA-Z0-9]+\\\\.)+[a-zA-Z0-9]+$&quot;);\r\n        Pattern notAllowedSuffixPattern = Pattern.compile(&quot;\\\\.writing$&quot;);\r\n        System.out.println(&quot;Incoming input: &quot; + input);\r\n        String result = (!notAllowedSuffixPattern.matcher(input).find() &amp;&amp; allowedPattern.matcher(input).find())\r\n                ? &quot;Matching.\\n&quot;\r\n                : &quot;Not Matching!\\n&quot;;\r\n        System.out.println(result);\r\n    }\r\n\r\nOutput:\r\n\r\n\tIncoming input: AaA.BbB.CcC.DdD.EeE\r\n\tMatching.\r\n\t\r\n\tIncoming input: a1.b2.c3.d4.e5\r\n\tMatching.\r\n\t\r\n\tIncoming input: AaA.BbB.CcC.DdD.EeE.writing\r\n\tNot Matching!\r\n\t\r\n\tIncoming input: a1.b2.c3.d4.e5.writing\r\n\tNot Matching!","title":"How to filter out a string with regular expression","body":"<p>Alternative regex:</p>\n<p>&quot;^(?:\\w+\\.)+\\w+$&quot; and &quot;\\.writing$&quot;</p>\n<p>Regex in testbench and context:</p>\n<pre><code>public static void main(String[] args) {\n    List&lt;String&gt; inputs = List.of(&quot;AaA.BbB.CcC.DdD.EeE&quot;, &quot;a1.b2.c3.d4.e5&quot;, &quot;AaA.BbB.CcC.DdD.EeE.writing&quot;, &quot;a1.b2.c3.d4.e5.writing&quot;);\n\n    for (String input: inputs) {\n        printResult(input);\n    }\n}\n\nprivate static void printResult(String input) {\n    // Pattern allowedPattern = Pattern.compile(&quot;^(?:\\\\w+\\\\.)+\\\\w+$&quot;); -&gt; \\\\w will match 'A word character: [a-zA-Z_0-9]'\n    // Pattern allowedPattern = Pattern.compile(&quot;^(?:[a-zA-Z0-9]+\\\\.){4}[a-zA-Z0-9]+$&quot;); -&gt; if you know that it always going to be 4 sections with ending dot, and the last section with no dot\n\n    Pattern allowedPattern = Pattern.compile(&quot;^(?:[a-zA-Z0-9]+\\\\.)+[a-zA-Z0-9]+$&quot;);\n    Pattern notAllowedSuffixPattern = Pattern.compile(&quot;\\\\.writing$&quot;);\n    System.out.println(&quot;Incoming input: &quot; + input);\n    String result = (!notAllowedSuffixPattern.matcher(input).find() &amp;&amp; allowedPattern.matcher(input).find())\n            ? &quot;Matching.\\n&quot;\n            : &quot;Not Matching!\\n&quot;;\n    System.out.println(result);\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Incoming input: AaA.BbB.CcC.DdD.EeE\nMatching.\n\nIncoming input: a1.b2.c3.d4.e5\nMatching.\n\nIncoming input: AaA.BbB.CcC.DdD.EeE.writing\nNot Matching!\n\nIncoming input: a1.b2.c3.d4.e5.writing\nNot Matching!\n</code></pre>\n"}],"owner":{"account_id":106565,"reputation":18790,"user_id":283837,"accept_rate":70,"display_name":"Simeon Leyzerzon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695297436,"creation_date":1692320709,"question_id":76925874,"body_markdown":"Let&#39;s say I want a regex expressing a filter selecting a string of a particular shape only if it doesn&#39;t end in a specific suffix, for example:\r\n\r\n- `AaA.BbB.CcC.DdD.EeE` or `a1.b2.c3.d4.e5` should both pass the filter \r\n\r\nwhereas \r\n\r\n- `AaA.BbB.CcC.DdD.EeE.writing` or `a1.b2.c3.d4.e5.writing` shouldn&#39;t due to the `.writing` suffix.\r\n\r\nSounds like a composite of something like `[\\d\\w]` with `!.writing`, but unsure how to express such a combo in a valid regex expression.\r\n\r\nCould someone please help?","title":"How to filter out a string with regular expression","body":"<p>Let's say I want a regex expressing a filter selecting a string of a particular shape only if it doesn't end in a specific suffix, for example:</p>\n<ul>\n<li><code>AaA.BbB.CcC.DdD.EeE</code> or <code>a1.b2.c3.d4.e5</code> should both pass the filter</li>\n</ul>\n<p>whereas</p>\n<ul>\n<li><code>AaA.BbB.CcC.DdD.EeE.writing</code> or <code>a1.b2.c3.d4.e5.writing</code> shouldn't due to the <code>.writing</code> suffix.</li>\n</ul>\n<p>Sounds like a composite of something like <code>[\\d\\w]</code> with <code>!.writing</code>, but unsure how to express such a combo in a valid regex expression.</p>\n<p>Could someone please help?</p>\n"},{"tags":["java","spring-boot","eclipse","gradle","junit5"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1695293854,"post_id":77149537,"comment_id":136006645,"body_markdown":"Seems the method was dropped in newer versions of JUnit 5, [here (JUnit 5.7.1)](https://junit.org/junit5/docs/5.7.1/api/org.junit.platform.engine/org/junit/platform/engine/TestDescriptor.html) it isn&#39;t listed anymore in contrast to [this (JUnit 5)](https://junit.org/junit5/docs/snapshot/api/org.junit.platform.engine/org/junit/platform/engine/TestDescriptor.html).","body":"Seems the method was dropped in newer versions of JUnit 5, <a href=\"https://junit.org/junit5/docs/5.7.1/api/org.junit.platform.engine/org/junit/platform/engine/TestDescriptor.html\" rel=\"nofollow noreferrer\">here (JUnit 5.7.1)</a> it isn&#39;t listed anymore in contrast to <a href=\"https://junit.org/junit5/docs/snapshot/api/org.junit.platform.engine/org/junit/platform/engine/TestDescriptor.html\" rel=\"nofollow noreferrer\">this (JUnit 5)</a>."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1695294283,"post_id":77149537,"comment_id":136006715,"body_markdown":"Does eclipse use any other version of JUnit which might have been updated during the eclipse update?","body":"Does eclipse use any other version of JUnit which might have been updated during the eclipse update?"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1695294817,"post_id":77149537,"comment_id":136006799,"body_markdown":"See https://stackoverflow.com/questions/77110882/i-cant-run-junit5-tests-with-eclipseversion-2023-09-4-29-0?noredirect=1#comment135979254_77110882","body":"See <a href=\"https://stackoverflow.com/questions/77110882/i-cant-run-junit5-tests-with-eclipseversion-2023-09-4-29-0?noredirect=1#comment135979254_77110882\" title=\"i cant run junit5 tests with eclipseversion 2023 09 4 29 0\">stackoverflow.com/questions/77110882/&hellip;</a>"},{"owner":{"account_id":8733951,"reputation":368,"user_id":6533159,"display_name":"Daniele Repici"},"score":0,"creation_date":1695295413,"post_id":77149537,"comment_id":136006894,"body_markdown":"Can I force Eclipse to use the platform version that my project declares rather than its own?","body":"Can I force Eclipse to use the platform version that my project declares rather than its own?"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695297447,"post_id":77149537,"comment_id":136007353,"body_markdown":"See my answer below.","body":"See my answer below."}],"owner":{"account_id":8733951,"reputation":368,"user_id":6533159,"display_name":"Daniele Repici"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1695298223,"answer_count":0,"score":0,"last_activity_date":1695297372,"creation_date":1695293203,"question_id":77149537,"body_markdown":"I was using Eclipse 2022-09 and all was working fine.\r\n\r\nI manage all dependencies via Gradle. The version of JUnit 5 is defined by the Spring Boot management plugin.\r\n\r\nOnce I upgraded to Eclipse 2023-09, JUnit tests started failing when executed from within Eclipse.\r\n\r\n    java.lang.NoSuchMethodError: &#39;java.util.Set org.junit.platform.engine.TestDescriptor.getAncestors()&#39;\r\n\tat org.junit.platform.launcher.core.StackTracePruningEngineExecutionListener.getTestClassNames(StackTracePruningEngineExecutionListener.java:50)\r\n\tat org.junit.platform.launcher.core.StackTracePruningEngineExecutionListener.executionFinished(StackTracePruningEngineExecutionListener.java:39)\r\n\tat org.junit.platform.launcher.core.DelegatingEngineExecutionListener.executionFinished(DelegatingEngineExecutionListener.java:46)\r\n\tat org.junit.platform.launcher.core.OutcomeDelayingEngineExecutionListener.reportEngineFailure(OutcomeDelayingEngineExecutionListener.java:83)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:203)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:94)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:52)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:70)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n\r\nJVM is Adoptium OpenJDK 17 (17.0.8.101-hotspot).\r\n\r\nExecuting the test via `gradlew test --tests Xyz` is just fine. The problem is when I run the tests in Eclipse (any test).\r\n\r\nI&#39;ve been searching SO for hours and couldn&#39;t find a suitable solution or a meaningful explanation.","title":"NoSuchMethod on JUnit test after upgrading Eclipse (using Gradle)","body":"<p>I was using Eclipse 2022-09 and all was working fine.</p>\n<p>I manage all dependencies via Gradle. The version of JUnit 5 is defined by the Spring Boot management plugin.</p>\n<p>Once I upgraded to Eclipse 2023-09, JUnit tests started failing when executed from within Eclipse.</p>\n<pre><code>java.lang.NoSuchMethodError: 'java.util.Set org.junit.platform.engine.TestDescriptor.getAncestors()'\nat org.junit.platform.launcher.core.StackTracePruningEngineExecutionListener.getTestClassNames(StackTracePruningEngineExecutionListener.java:50)\nat org.junit.platform.launcher.core.StackTracePruningEngineExecutionListener.executionFinished(StackTracePruningEngineExecutionListener.java:39)\nat org.junit.platform.launcher.core.DelegatingEngineExecutionListener.executionFinished(DelegatingEngineExecutionListener.java:46)\nat org.junit.platform.launcher.core.OutcomeDelayingEngineExecutionListener.reportEngineFailure(OutcomeDelayingEngineExecutionListener.java:83)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:203)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:94)\nat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:52)\nat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:70)\nat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:756)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>JVM is Adoptium OpenJDK 17 (17.0.8.101-hotspot).</p>\n<p>Executing the test via <code>gradlew test --tests Xyz</code> is just fine. The problem is when I run the tests in Eclipse (any test).</p>\n<p>I've been searching SO for hours and couldn't find a suitable solution or a meaningful explanation.</p>\n"},{"tags":["java","kotlin","jvm","typing"],"comments":[{"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"score":0,"creation_date":1695297073,"post_id":77149956,"comment_id":136007259,"body_markdown":"I asked this question while trying to find the &quot;whole-number-interface&quot; (I assumed it would exist) and came across a definitive answer myself (using Kotlins source-code). While my question is resolved I would prefer an answer that points me to official documentation or a note by the developers of Kotlin explaining how the number-hierarchy is designed, especially with respect to Java-compatibility.","body":"I asked this question while trying to find the &quot;whole-number-interface&quot; (I assumed it would exist) and came across a definitive answer myself (using Kotlins source-code). While my question is resolved I would prefer an answer that points me to official documentation or a note by the developers of Kotlin explaining how the number-hierarchy is designed, especially with respect to Java-compatibility."},{"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"score":0,"creation_date":1695297165,"post_id":77149956,"comment_id":136007283,"body_markdown":"I know that &quot;Why&quot;-questions are off-topic, so lets phrase it like this: What was my misunderstanding about subtyping on the JVM when I assumed that such a type should exist?","body":"I know that &quot;Why&quot;-questions are off-topic, so lets phrase it like this: What was my misunderstanding about subtyping on the JVM when I assumed that such a type should exist?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":3,"creation_date":1695301107,"post_id":77149956,"comment_id":136008118,"body_markdown":"What would be the use of such a type? I&#39;ve never even found a use for Number in 13 years of Java programming. As for the downvote, maybe someone thought it was unclear to ask such a question without explaining why you would expect such a feature or what it could possibly be used for. But I think there are a lot of nonsensical downvotes on this site so it could just be that.","body":"What would be the use of such a type? I&#39;ve never even found a use for Number in 13 years of Java programming. As for the downvote, maybe someone thought it was unclear to ask such a question without explaining why you would expect such a feature or what it could possibly be used for. But I think there are a lot of nonsensical downvotes on this site so it could just be that."},{"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"score":0,"creation_date":1695309207,"post_id":77149956,"comment_id":136009970,"body_markdown":"I am writing a module that works internally with BigInteger but takes any input without forcing the `toBigInteger`-boilerplate on the user and without having to overload all my methods. But I felt that context is unnecessary to the question. I expected the feature to exist because: A) kotlin does a lot to avoid boilerplate B) this is a feature which can only be provided by language designers C) It could be added in a backwards-compatible way (just add an interface whose methods are already there)","body":"I am writing a module that works internally with BigInteger but takes any input without forcing the <code>toBigInteger</code>-boilerplate on the user and without having to overload all my methods. But I felt that context is unnecessary to the question. I expected the feature to exist because: A) kotlin does a lot to avoid boilerplate B) this is a feature which can only be provided by language designers C) It could be added in a backwards-compatible way (just add an interface whose methods are already there)"},{"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"score":0,"creation_date":1695309479,"post_id":77149956,"comment_id":136010035,"body_markdown":"The close-vote says &quot;needs detail or clarity&quot;. To me the question is so clear that I could answer it with &quot;No&quot; and definitive proof of that &quot;No&quot;. What is missing? I will try to improve the post if someone tells me.","body":"The close-vote says &quot;needs detail or clarity&quot;. To me the question is so clear that I could answer it with &quot;No&quot; and definitive proof of that &quot;No&quot;. What is missing? I will try to improve the post if someone tells me."}],"answers":[{"tags":[],"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695297201,"creation_date":1695296881,"answer_id":77149957,"question_id":77149956,"body_markdown":"**There is no such type.**\r\n\r\nLooking into the source-code of Kotlin we can see that the type-hierarchy of numbers is exactly the same as in Java: All number-types directly subclass `Number` and implement no interface that would describe them further.\r\n\r\nhttps://github.com/JetBrains/kotlin/blob/master/core/builtins/native/kotlin/Primitives.kt","title":"Kotlin common base type of types representing whole numbers?","body":"<p><strong>There is no such type.</strong></p>\n<p>Looking into the source-code of Kotlin we can see that the type-hierarchy of numbers is exactly the same as in Java: All number-types directly subclass <code>Number</code> and implement no interface that would describe them further.</p>\n<p><a href=\"https://github.com/JetBrains/kotlin/blob/master/core/builtins/native/kotlin/Primitives.kt\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/blob/master/core/builtins/native/kotlin/Primitives.kt</a></p>\n"}],"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77149957,"answer_count":1,"score":-1,"last_activity_date":1695297201,"creation_date":1695296881,"question_id":77149956,"body_markdown":"Does Kotlin offer a way to describe a &#39;whole number&#39; such as `Int`, `Long` or `BigInteger` but **not** `Double`?\r\n\r\nIn Kotlin, as in Java, there is `Number` as the supertype of all numerical types including the floating-point numbers. Java does not let you exclude the floating-points, as the [oracle docs][1] about the numerical types state that they directly subclass the abstract class `Number` and implement no Interfaces (except Comparable and Serializable).\r\n\r\nIn the Kotlin-documentation, I could not find any such whole-number-type, but I did not find any definitive List of numerical types or a statement that says such a whole-number-type was purposefully not included.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/lang/Integer.html","title":"Kotlin common base type of types representing whole numbers?","body":"<p>Does Kotlin offer a way to describe a 'whole number' such as <code>Int</code>, <code>Long</code> or <code>BigInteger</code> but <strong>not</strong> <code>Double</code>?</p>\n<p>In Kotlin, as in Java, there is <code>Number</code> as the supertype of all numerical types including the floating-point numbers. Java does not let you exclude the floating-points, as the <a href=\"https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/lang/Integer.html\" rel=\"nofollow noreferrer\">oracle docs</a> about the numerical types state that they directly subclass the abstract class <code>Number</code> and implement no Interfaces (except Comparable and Serializable).</p>\n<p>In the Kotlin-documentation, I could not find any such whole-number-type, but I did not find any definitive List of numerical types or a statement that says such a whole-number-type was purposefully not included.</p>\n"},{"tags":["java","string","conventions"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1695292703,"post_id":77149368,"comment_id":136006442,"body_markdown":"That&#39;s highly dependent on what the class represents. Does it represent a train? In that case (T)UI stuff shouldn&#39;t belong there. Does it represent the interactions of your application. Then it *may* belong there.","body":"That&#39;s highly dependent on what the class represents. Does it represent a train? In that case (T)UI stuff shouldn&#39;t belong there. Does it represent the interactions of your application. Then it <i>may</i> belong there."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1695292720,"post_id":77149368,"comment_id":136006445,"body_markdown":"In configuration files to enable [Java internationalization](https://docs.oracle.com/javase/tutorial/i18n/).","body":"In configuration files to enable <a href=\"https://docs.oracle.com/javase/tutorial/i18n/\" rel=\"nofollow noreferrer\">Java internationalization</a>."}],"answers":[{"tags":[],"owner":{"account_id":5765146,"reputation":138,"user_id":16108607,"display_name":"qa30m"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695292438,"creation_date":1695292438,"answer_id":77149453,"question_id":77149368,"body_markdown":"It is generally recommended to keep the responsibilities of each class well-defined and separate.\r\n\r\nDefining the text message within the class allows for better cohesion and encapsulation. By keeping the text message within the class, you keep related code and logic together, making it easier to read and understand. \r\n\r\n    public class Train {\r\n        // ...\r\n    \r\n        public void createTrain() {\r\n            String createMessage = &quot;Create how many trains?&quot;;\r\n            // Prompt the user with createMessage\r\n            // ...\r\n        }\r\n    \r\n        // ...\r\n    }","title":"Best practice: where should user prompt messages reside in Java classes - main or method class?","body":"<p>It is generally recommended to keep the responsibilities of each class well-defined and separate.</p>\n<p>Defining the text message within the class allows for better cohesion and encapsulation. By keeping the text message within the class, you keep related code and logic together, making it easier to read and understand.</p>\n<pre><code>public class Train {\n    // ...\n\n    public void createTrain() {\n        String createMessage = &quot;Create how many trains?&quot;;\n        // Prompt the user with createMessage\n        // ...\n    }\n\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":29313591,"reputation":19,"user_id":22458828,"display_name":"Kerem Tazedal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1695292709,"accepted_answer_id":77149453,"answer_count":1,"score":0,"last_activity_date":1695297008,"creation_date":1695291772,"question_id":77149368,"body_markdown":"I&#39;m creating a Java class with methods, setters, and getters. I have a createTrain method that prompts the user with a message like &#39;Create how many trains?&#39; in the form of a string. Should this text message be defined in the main class or within the class where the createTrain method is executed for better code organization and best practices?\r\n\r\nI wondering regarding best practices, head different views, a bit confused. ","title":"Best practice: where should user prompt messages reside in Java classes - main or method class?","body":"<p>I'm creating a Java class with methods, setters, and getters. I have a createTrain method that prompts the user with a message like 'Create how many trains?' in the form of a string. Should this text message be defined in the main class or within the class where the createTrain method is executed for better code organization and best practices?</p>\n<p>I wondering regarding best practices, head different views, a bit confused.</p>\n"},{"tags":["java","linux","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":1044240,"reputation":3720,"user_id":1049569,"accept_rate":91,"display_name":"kiks73"},"score":0,"creation_date":1695796980,"post_id":77149845,"comment_id":136070464,"body_markdown":"After the last Chrome update, I noticed that when a file download starts, Chrome asks for path and filename, even if the preference is not to ask for folder when downloading.. I&#39;ve got the issue on Selenium with Python in OSX","body":"After the last Chrome update, I noticed that when a file download starts, Chrome asks for path and filename, even if the preference is not to ask for folder when downloading.. I&#39;ve got the issue on Selenium with Python in OSX"}],"owner":{"account_id":17078252,"reputation":21,"user_id":12357345,"display_name":"oskan001"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695296930,"creation_date":1695296046,"question_id":77149845,"body_markdown":"I have a Java Selenium application running on a Linux server. The application is supposed to click a button and download a file to a directory that I have specified. However, even though the clicking action is performed successfully, the downloaded file doesn&#39;t appear in the designated directory. I&#39;m wondering if it&#39;s not downloading at all or if it&#39;s being saved in a different location that I&#39;m unaware of. Can someone please assist me with this issue?\r\n\r\n    HashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\r\n    chromePrefs.put(&quot;download.default_directory&quot;, directoryPath);\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\r\n\r\n    String chromeDriverPath = &quot;/usr/bin/chromedriver&quot;;\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, chromeDriverPath);\r\n    options.addArguments(&quot;--headless&quot;);\r\n    options.addArguments(&quot;window-size=1920,1080&quot;);\r\n\r\nAny insights or suggestions on what might be causing this problem would be greatly appreciated.\r\n\r\nThe application is running successfully locally. It also clicks the download button without throwing any errors. However, it&#39;s not downloading the file to the directory I specified or any other visible directory.\r\n","title":"Issue with Selenium Java application on Linux server: downloads not working as expected","body":"<p>I have a Java Selenium application running on a Linux server. The application is supposed to click a button and download a file to a directory that I have specified. However, even though the clicking action is performed successfully, the downloaded file doesn't appear in the designated directory. I'm wondering if it's not downloading at all or if it's being saved in a different location that I'm unaware of. Can someone please assist me with this issue?</p>\n<pre><code>HashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\nchromePrefs.put(&quot;download.default_directory&quot;, directoryPath);\nChromeOptions options = new ChromeOptions();\noptions.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\n\nString chromeDriverPath = &quot;/usr/bin/chromedriver&quot;;\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, chromeDriverPath);\noptions.addArguments(&quot;--headless&quot;);\noptions.addArguments(&quot;window-size=1920,1080&quot;);\n</code></pre>\n<p>Any insights or suggestions on what might be causing this problem would be greatly appreciated.</p>\n<p>The application is running successfully locally. It also clicks the download button without throwing any errors. However, it's not downloading the file to the directory I specified or any other visible directory.</p>\n"},{"tags":["java","postgresql","spring-boot"],"comments":[{"owner":{"account_id":135407,"reputation":10653,"user_id":338249,"accept_rate":100,"display_name":"rjdkolb"},"score":0,"creation_date":1695278504,"post_id":77147655,"comment_id":136003559,"body_markdown":"Can assume this is a JPA @Entity?","body":"Can assume this is a JPA @Entity?"},{"owner":{"account_id":29406272,"reputation":11,"user_id":22531278,"display_name":"Akter Hossain"},"score":0,"creation_date":1695280486,"post_id":77147655,"comment_id":136003878,"body_markdown":"Yes. This is a JPA @Entity","body":"Yes. This is a JPA @Entity"},{"owner":{"account_id":135407,"reputation":10653,"user_id":338249,"accept_rate":100,"display_name":"rjdkolb"},"score":0,"creation_date":1695282456,"post_id":77147655,"comment_id":136004234,"body_markdown":"And are you using a JPA Repository? Can you edit your question and add it please","body":"And are you using a JPA Repository? Can you edit your question and add it please"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695285703,"post_id":77147655,"comment_id":136004886,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":6807379,"reputation":21,"user_id":5238727,"display_name":"YOGENDRA SONI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695278105,"creation_date":1695278105,"answer_id":77147700,"question_id":77147655,"body_markdown":"You can use FTS on postgres.\r\nhttps://www.postgresql.org/docs/current/textsearch.html\r\n\r\nfts will provide searching similar to search engines but you need to configure it as per your need. it will be much faster than like/ilike &#39;%query%&#39;.\r\n","title":"How to search a text efficient way in a text field? Spring Boot + JPA + PostgresSQL","body":"<p>You can use FTS on postgres.\n<a href=\"https://www.postgresql.org/docs/current/textsearch.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/textsearch.html</a></p>\n<p>fts will provide searching similar to search engines but you need to configure it as per your need. it will be much faster than like/ilike '%query%'.</p>\n"},{"tags":[],"owner":{"account_id":135407,"reputation":10653,"user_id":338249,"accept_rate":100,"display_name":"rjdkolb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695295956,"creation_date":1695295956,"answer_id":77149832,"question_id":77147655,"body_markdown":"If I understand your question correctly you have a JPA repository already.\r\nAll you need to do is add a method and add the JPQL as below.\r\n\r\n\r\n    public interface PostRepository extends JpaRepository&lt;Post, Integer&gt; {\r\n    \r\n        @Query(&quot;SELECT p FROM Post p WHERE p.content LIKE %:keyword%&quot;)\r\n        List&lt;Post&gt; searchByContent(String keyword);\r\n    }\r\n\r\nThen in your service:\r\n\r\n\r\n    @Service\r\n    public class PostService {\r\n    \r\n        @Autowired\r\n        private PostRepository postRepository;\r\n    \r\n        public List&lt;Post&gt; searchByContent(String keyword) {\r\n            return postRepository.searchByContent(keyword);\r\n       \r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"How to search a text efficient way in a text field? Spring Boot + JPA + PostgresSQL","body":"<p>If I understand your question correctly you have a JPA repository already.\nAll you need to do is add a method and add the JPQL as below.</p>\n<pre><code>public interface PostRepository extends JpaRepository&lt;Post, Integer&gt; {\n\n    @Query(&quot;SELECT p FROM Post p WHERE p.content LIKE %:keyword%&quot;)\n    List&lt;Post&gt; searchByContent(String keyword);\n}\n</code></pre>\n<p>Then in your service:</p>\n<pre><code>@Service\npublic class PostService {\n\n    @Autowired\n    private PostRepository postRepository;\n\n    public List&lt;Post&gt; searchByContent(String keyword) {\n        return postRepository.searchByContent(keyword);\n   \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5745621,"reputation":699,"user_id":4536931,"display_name":"Vincent C."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695296650,"creation_date":1695296650,"answer_id":77149924,"question_id":77147655,"body_markdown":"If `content` is JSON, why not use native Postgres `json` (or `jsonb`) type for that field, and then search inside it using native [JSON operators][1].\r\n\r\nThis should allow you to request on the actual value, instead of doing clunky text search on a `String` (and potentially even selecting unexpected data).\r\n\r\n_e.g._: if you want to request an ID in a `jsonb` field, you would do something like:\r\n```sql\r\n-- using JSON native operator, clean\r\nselect p.* from post p where p.content -&gt;&gt; &#39;id&#39; = &lt;ID&gt;;\r\nselect p.* from post p where p.content -&gt;&gt; &#39;id&#39; like &#39;%PARTIAL_ID%&#39;;\r\n\r\n-- using text field, clunky\r\nselect p.* from post p where p.content like &#39;%&quot;id&quot;: &quot;&lt;ID&gt;&quot;%&#39;;\r\n```\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/9.5/functions-json.html","title":"How to search a text efficient way in a text field? Spring Boot + JPA + PostgresSQL","body":"<p>If <code>content</code> is JSON, why not use native Postgres <code>json</code> (or <code>jsonb</code>) type for that field, and then search inside it using native <a href=\"https://www.postgresql.org/docs/9.5/functions-json.html\" rel=\"nofollow noreferrer\">JSON operators</a>.</p>\n<p>This should allow you to request on the actual value, instead of doing clunky text search on a <code>String</code> (and potentially even selecting unexpected data).</p>\n<p><em>e.g.</em>: if you want to request an ID in a <code>jsonb</code> field, you would do something like:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>-- using JSON native operator, clean\nselect p.* from post p where p.content -&gt;&gt; 'id' = &lt;ID&gt;;\nselect p.* from post p where p.content -&gt;&gt; 'id' like '%PARTIAL_ID%';\n\n-- using text field, clunky\nselect p.* from post p where p.content like '%&quot;id&quot;: &quot;&lt;ID&gt;&quot;%';\n</code></pre>\n"}],"owner":{"account_id":29406272,"reputation":11,"user_id":22531278,"display_name":"Akter Hossain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1695296650,"creation_date":1695277545,"question_id":77147655,"body_markdown":"\r\n\r\n```\r\npublic class Post {\r\n    private int id;\r\n    private String title;\r\n    private String content;\r\n    private Date createdAt;\r\n}\r\n```\r\n\r\ncontent field is the text field. This field value actually is a Json object, I converted it to text.\r\n\r\n\r\nHow can search efficient way a text pattern match or not?\r\n\r\nI want to implement using spring boot, JPA and postgresSQL","title":"How to search a text efficient way in a text field? Spring Boot + JPA + PostgresSQL","body":"<pre><code>public class Post {\n    private int id;\n    private String title;\n    private String content;\n    private Date createdAt;\n}\n</code></pre>\n<p>content field is the text field. This field value actually is a Json object, I converted it to text.</p>\n<p>How can search efficient way a text pattern match or not?</p>\n<p>I want to implement using spring boot, JPA and postgresSQL</p>\n"},{"tags":["java","android","kotlin","service","background-service"],"owner":{"account_id":23224850,"reputation":69,"user_id":17316514,"display_name":"ShaRy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695296166,"creation_date":1695269457,"question_id":77147145,"body_markdown":"So what my app is doing compressing videos and reducing its size. &lt;br/&gt;\r\nFor this, I am using an Android background service and it&#39;s currently working fine. &lt;br/&gt;&lt;br/&gt;\r\nAlso looks good for one selected video, now what I am thinking what if the user selects multiple videos how can I compress all these videos using a background service in a better way..&lt;br /&gt;\r\ncompressing video takes time and for each video, it depends on video length and some other properties.&lt;br/&gt;\r\nFor now what I have done so far is just a rough idea...&lt;br/&gt;\r\n\r\nI am starting a service providing all video details passing it as intent extras..like below&lt;br/&gt;\r\n```\r\n        val intent = Intent(this, MyService::class.java)\r\n        intent.putExtra(EXTRA_NAME, selectedVideos)          // selectedVideo =&gt; ArrayList&lt;Video&gt; \r\n        intent.putExtra(EXTRA_NAME, compressionPrams)        // compressionPrams =&gt; Hasmap&lt;String, String&gt;\r\n        ContextCompat.startForegroundService(this, intent)\r\n```\r\n\r\nNow my service is like this...&lt;br/&gt;\r\n```\r\nclass MyService : Service() {\r\n\r\noverride fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\r\n\r\n    ...retrieving all data from intent extras...\r\n    val **selectedVideos** ArrayList&lt;Video&gt;...    // supposed we&#39;ve 6 video needs to compress \r\n    val **compressionPrams** HashMap&lt;*, *&gt;...\r\n\r\n    // Now after this, I am parsing all compression prams and building command to execute for\r\n    // compressing video. (Below is just a rough idea of my app functionality.)\r\n\r\n    // Note: CompressingVideo.compressAsync runs in its own separate background thread.\r\n    CompressingVideo.compressAsync(selectedVideos[0], object: CompletionCallback { status -&gt;\r\n              // Whenever the compression is completed we get notified by callback...\r\n              // Now the first video compression is completed, processing another one...\r\n           \r\n              // Here I am checking if I have more videos to process then update command and prams \r\n              // and then start its compression\r\n              CompressingVideo.compress(seletedVideo[...], this)   // passing this as completion callback\r\n          }\r\n      )\r\n   }\r\n}\r\n```\r\n\r\nSo now what do you think..is this approach good or is there any other more better way to do it...&lt;br/&gt;\r\nThe supposed first video takes 3 mint, 2nd 10 mint, 3rd 5 mint...and so on till 6. approx 30 mint. to complete all tasks.&lt;br/&gt;\r\nOne thing came to my mind what if I pass a second video to the service by myself when the previous one gets compressed, like telling the service hey this needs to process as well.&lt;br/&gt;\r\nafter starting the service can we send more data so that `onStartCommand(...)` gets called again to process another video...etc","title":"How to perform multipe task under single android background service?","body":"<p>So what my app is doing compressing videos and reducing its size. <br/>\nFor this, I am using an Android background service and it's currently working fine. <br/><br/>\nAlso looks good for one selected video, now what I am thinking what if the user selects multiple videos how can I compress all these videos using a background service in a better way..<br />\ncompressing video takes time and for each video, it depends on video length and some other properties.<br/>\nFor now what I have done so far is just a rough idea...<br/></p>\n<p>I am starting a service providing all video details passing it as intent extras..like below<br/></p>\n<pre><code>        val intent = Intent(this, MyService::class.java)\n        intent.putExtra(EXTRA_NAME, selectedVideos)          // selectedVideo =&gt; ArrayList&lt;Video&gt; \n        intent.putExtra(EXTRA_NAME, compressionPrams)        // compressionPrams =&gt; Hasmap&lt;String, String&gt;\n        ContextCompat.startForegroundService(this, intent)\n</code></pre>\n<p>Now my service is like this...<br/></p>\n<pre><code>class MyService : Service() {\n\noverride fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n\n    ...retrieving all data from intent extras...\n    val **selectedVideos** ArrayList&lt;Video&gt;...    // supposed we've 6 video needs to compress \n    val **compressionPrams** HashMap&lt;*, *&gt;...\n\n    // Now after this, I am parsing all compression prams and building command to execute for\n    // compressing video. (Below is just a rough idea of my app functionality.)\n\n    // Note: CompressingVideo.compressAsync runs in its own separate background thread.\n    CompressingVideo.compressAsync(selectedVideos[0], object: CompletionCallback { status -&gt;\n              // Whenever the compression is completed we get notified by callback...\n              // Now the first video compression is completed, processing another one...\n           \n              // Here I am checking if I have more videos to process then update command and prams \n              // and then start its compression\n              CompressingVideo.compress(seletedVideo[...], this)   // passing this as completion callback\n          }\n      )\n   }\n}\n</code></pre>\n<p>So now what do you think..is this approach good or is there any other more better way to do it...<br/>\nThe supposed first video takes 3 mint, 2nd 10 mint, 3rd 5 mint...and so on till 6. approx 30 mint. to complete all tasks.<br/>\nOne thing came to my mind what if I pass a second video to the service by myself when the previous one gets compressed, like telling the service hey this needs to process as well.<br/>\nafter starting the service can we send more data so that <code>onStartCommand(...)</code> gets called again to process another video...etc</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695296188,"post_id":77149697,"comment_id":136007058,"body_markdown":"No you cannot. Your only option is to dynamically generate the XML and feed that to the library (if at all possible) if that isn&#39;t possible then it simply cannot be done and you have to find another way of configuring the library.","body":"No you cannot. Your only option is to dynamically generate the XML and feed that to the library (if at all possible) if that isn&#39;t possible then it simply cannot be done and you have to find another way of configuring the library."}],"answers":[{"tags":[],"owner":{"account_id":1162627,"reputation":1638,"user_id":1141829,"accept_rate":86,"display_name":"practical programmer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695295461,"creation_date":1695295461,"answer_id":77149785,"question_id":77149697,"body_markdown":"You should be able to create this `config.xml` at startup using some templating mechanism. If XML is small and static (aside of placeholder values) you can even use string formatter. If you need more sophisticated solutions you can consider Apache Velocity. \r\n\r\nSimilar question is here: https://stackoverflow.com/questions/1680175/xml-template-in-java","title":"Spring Boot inject property value into XML file","body":"<p>You should be able to create this <code>config.xml</code> at startup using some templating mechanism. If XML is small and static (aside of placeholder values) you can even use string formatter. If you need more sophisticated solutions you can consider Apache Velocity.</p>\n<p>Similar question is here: <a href=\"https://stackoverflow.com/questions/1680175/xml-template-in-java\">XML template in Java</a></p>\n"}],"owner":{"account_id":14683884,"reputation":47,"user_id":10604509,"display_name":"Iv&#225;n Mart&#237;n Jim&#233;nez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695295461,"creation_date":1695294769,"question_id":77149697,"body_markdown":"first of all sorry if the question is already answered, if so, I did not find it before. I am developing a Spring boot project with Maven. The properties configuration are done via an application.properties in my classpath, as I always do in spring boot. For this project, the client needs some external dependencies which I declared in the POM and used later in my code. The thing is that this dependency is configured via a &quot;config.xml&quot; file. And I cannot give this config via application.properties directly because the dependency has not this option. So, the client told me they need to configure the dependency from the spring cloud / application.properties. Thats where the problem began, because I have tried everything to pass properties values from application.properties to the config.xml and nothing worked.\r\nIts even possible in Spring boot to dynamically inject properties into some .xml file?\r\nThis is my application.properties:\r\n\r\n    config.xml.active = true\r\n    config.xml.url = someurl\r\n    config.xml.user= someuser\r\n\r\n\r\nAnd this is my config.xml:\r\n\r\n    &lt;reg-enter&gt;\r\n        &lt;active&gt;**I need the property value here**&lt;/active&gt;\r\n        &lt;url&gt;**I need the property value here**&lt;&lt;/url&gt;\r\n        &lt;user&gt;**I need the property value here**&lt;&lt;/user&gt; \r\n    &lt;/reg-enter&gt;\r\n","title":"Spring Boot inject property value into XML file","body":"<p>first of all sorry if the question is already answered, if so, I did not find it before. I am developing a Spring boot project with Maven. The properties configuration are done via an application.properties in my classpath, as I always do in spring boot. For this project, the client needs some external dependencies which I declared in the POM and used later in my code. The thing is that this dependency is configured via a &quot;config.xml&quot; file. And I cannot give this config via application.properties directly because the dependency has not this option. So, the client told me they need to configure the dependency from the spring cloud / application.properties. Thats where the problem began, because I have tried everything to pass properties values from application.properties to the config.xml and nothing worked.\nIts even possible in Spring boot to dynamically inject properties into some .xml file?\nThis is my application.properties:</p>\n<pre><code>config.xml.active = true\nconfig.xml.url = someurl\nconfig.xml.user= someuser\n</code></pre>\n<p>And this is my config.xml:</p>\n<pre><code>&lt;reg-enter&gt;\n    &lt;active&gt;**I need the property value here**&lt;/active&gt;\n    &lt;url&gt;**I need the property value here**&lt;&lt;/url&gt;\n    &lt;user&gt;**I need the property value here**&lt;&lt;/user&gt; \n&lt;/reg-enter&gt;\n</code></pre>\n"},{"tags":["java","jboss-eap-7","mbeans","jbossmq","wildfly-27"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1695392232,"post_id":77149780,"comment_id":136022488,"body_markdown":"Did you migrate the SAR to Jakarta EE 10?","body":"Did you migrate the SAR to Jakarta EE 10?"},{"owner":{"account_id":19301594,"reputation":43,"user_id":14109359,"display_name":"Shipra Shahi"},"score":0,"creation_date":1695393089,"post_id":77149780,"comment_id":136022668,"body_markdown":"Yes, fixed all the import statements from javax.* to jakarta.*","body":"Yes, fixed all the import statements from javax.* to jakarta.*"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1695574745,"post_id":77149780,"comment_id":136039555,"body_markdown":"What kind of errors are you seeing? Is there a stack trace?","body":"What kind of errors are you seeing? Is there a stack trace?"},{"owner":{"account_id":19301594,"reputation":43,"user_id":14109359,"display_name":"Shipra Shahi"},"score":0,"creation_date":1695700534,"post_id":77149780,"comment_id":136055832,"body_markdown":"There are no errors, the deployment is successful and jar.deployed file is also generated. However, nothing is printed in logs related to SAR deployment. Is there any other way to deploy SAR files? Or do I have to mention a dependency on SAR file for deployment?","body":"There are no errors, the deployment is successful and jar.deployed file is also generated. However, nothing is printed in logs related to SAR deployment. Is there any other way to deploy SAR files? Or do I have to mention a dependency on SAR file for deployment?"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1695741126,"post_id":77149780,"comment_id":136063449,"body_markdown":"Without some kind of reproducer it&#39;s hard to say what the issue could be.","body":"Without some kind of reproducer it&#39;s hard to say what the issue could be."}],"owner":{"account_id":19301594,"reputation":43,"user_id":14109359,"display_name":"Shipra Shahi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695295414,"creation_date":1695295414,"question_id":77149780,"body_markdown":"I have a JAR file which includes few SAR files. Earlier in Jboss AS(4.2.3), upon deploying the jar nested SAR files were getting deployed as well and services were starting, now we are moving to Wildfly 29 (Java 17) and upon adding jar file to deployments directory, deployment is successful but nested files of SAR are not deployed.\r\n\r\nHow to deploy SAR files in Wildfly 29 Java 17.\r\n\r\nTried to deploy SAR file by placing it in standalone/deployment directory but it keeps giving error for some or the other class being referred by Service Class.","title":"Deploy SAR file in WildFly 29","body":"<p>I have a JAR file which includes few SAR files. Earlier in Jboss AS(4.2.3), upon deploying the jar nested SAR files were getting deployed as well and services were starting, now we are moving to Wildfly 29 (Java 17) and upon adding jar file to deployments directory, deployment is successful but nested files of SAR are not deployed.</p>\n<p>How to deploy SAR files in Wildfly 29 Java 17.</p>\n<p>Tried to deploy SAR file by placing it in standalone/deployment directory but it keeps giving error for some or the other class being referred by Service Class.</p>\n"},{"tags":["java","spring","penetration-testing"],"comments":[{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":2,"creation_date":1586666822,"post_id":61166898,"comment_id":108208434,"body_markdown":"You may find it in a jar file inside `WEB-INF/lib` (but it may also be stored somewhere else).","body":"You may find it in a jar file inside <code>WEB-INF&#47;lib</code> (but it may also be stored somewhere else)."}],"answers":[{"tags":[],"owner":{"account_id":29490771,"reputation":1,"user_id":22599822,"display_name":"Haku"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695295357,"creation_date":1695295357,"answer_id":77149775,"question_id":61166898,"body_markdown":"Double-check the package and folder structure to ensure you have the correct path. Typos or case sensitivity issues can cause problems. \r\nBut if this does not work look within the WEB-INF/lib directory for JAR files. (This is a common location for packaged libraries and classes.)\r\n\r\nAlso sometimes the web application might have security mechanisms to prevent direct access to class files, even if you have access to web.xml.\r\n\r\nAnd also you can try to verify that you have the necessary permissions to access the class files in the WEB-INF/classes directory. If the permissions are restrictive, you might need to escalate privileges or find another way to access the files.\r\n\r\nHope this helps.","title":"Where are imported files&#39; class files stored in Java","body":"<p>Double-check the package and folder structure to ensure you have the correct path. Typos or case sensitivity issues can cause problems.\nBut if this does not work look within the WEB-INF/lib directory for JAR files. (This is a common location for packaged libraries and classes.)</p>\n<p>Also sometimes the web application might have security mechanisms to prevent direct access to class files, even if you have access to web.xml.</p>\n<p>And also you can try to verify that you have the necessary permissions to access the class files in the WEB-INF/classes directory. If the permissions are restrictive, you might need to escalate privileges or find another way to access the files.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":1464069,"reputation":605,"user_id":1377480,"accept_rate":23,"display_name":"Justin Gardner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695295357,"creation_date":1586665988,"question_id":61166898,"body_markdown":"I am a penetration tester and I found a path traversal that allows me to access to the WEB-INF folder. I was able to extract web.xml and now I&#39;m trying to download the class files for the application. I was able to grab one referenced in the web.xml. In that code was referenced the following line:\r\n```\r\nimport com.SITE.NAME.biz.r.RenderSystemProxy;\r\n```\r\nSo naturally, I tried to access:\r\n```\r\nWEB-INF/classes/com/site/name/biz/r/RendersSystemProxy.class\r\n```\r\nBut it wasn&#39;t accessible. Where might I find the class file for this import?","title":"Where are imported files&#39; class files stored in Java","body":"<p>I am a penetration tester and I found a path traversal that allows me to access to the WEB-INF folder. I was able to extract web.xml and now I'm trying to download the class files for the application. I was able to grab one referenced in the web.xml. In that code was referenced the following line:</p>\n\n<pre><code>import com.SITE.NAME.biz.r.RenderSystemProxy;\n</code></pre>\n\n<p>So naturally, I tried to access:</p>\n\n<pre><code>WEB-INF/classes/com/site/name/biz/r/RendersSystemProxy.class\n</code></pre>\n\n<p>But it wasn't accessible. Where might I find the class file for this import?</p>\n"},{"tags":["java","spring","spring-boot","inversion-of-control"],"answers":[{"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695295209,"creation_date":1695295209,"answer_id":77149755,"question_id":77149323,"body_markdown":"If you&#39;re not using Spring Boot, then you have to set up the Spring container by yourself by creating an [`ApplicationContext` bean](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html).\r\n\r\nOne way of doing so is by using the `AnnotationConfigApplicationContext` class. For example:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    ApplicationContext context = new ApplicationConfigApplicationContext(TestSpringApplication.class);\r\n    MessageService messageService = context.getBean(MessageService.class);\r\n    messageService.printAllMessages();\r\n}\r\n```\r\n\r\nBut this only creates a basic application context for you. Without Spring Boot, you no longer have access to autoconfigurations. This means that:\r\n\r\n- If you&#39;re depending on a database, you now have to manually create a `DataSource` bean.\r\n- If you&#39;re depending on Spring Data JPA&#39;s repositories, you now have to manually create an `EntityManagerFactory` bean and a `TransactionManager` (and you have to configure Spring Data JPA as well).\r\n- If you&#39;re running a web application, you no longer have access to Spring Boot&#39;s embedded servlet container. Now you either have to configure the embedded Tomcat by yourself, or configure your application for traditional WAR-file deployments.\r\n- If `printAllMessages()` relies on a logging framework, you now have to configure that one by yourself as well.\r\n\r\nIn addition, classes like `CommandLineRunner` are also no longer available. Now you have to rely on alternatives such as listening to the `ContextRefreshedEvent`.","title":"SpringApplication.run() without boot","body":"<p>If you're not using Spring Boot, then you have to set up the Spring container by yourself by creating an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html\" rel=\"nofollow noreferrer\"><code>ApplicationContext</code> bean</a>.</p>\n<p>One way of doing so is by using the <code>AnnotationConfigApplicationContext</code> class. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    ApplicationContext context = new ApplicationConfigApplicationContext(TestSpringApplication.class);\n    MessageService messageService = context.getBean(MessageService.class);\n    messageService.printAllMessages();\n}\n</code></pre>\n<p>But this only creates a basic application context for you. Without Spring Boot, you no longer have access to autoconfigurations. This means that:</p>\n<ul>\n<li>If you're depending on a database, you now have to manually create a <code>DataSource</code> bean.</li>\n<li>If you're depending on Spring Data JPA's repositories, you now have to manually create an <code>EntityManagerFactory</code> bean and a <code>TransactionManager</code> (and you have to configure Spring Data JPA as well).</li>\n<li>If you're running a web application, you no longer have access to Spring Boot's embedded servlet container. Now you either have to configure the embedded Tomcat by yourself, or configure your application for traditional WAR-file deployments.</li>\n<li>If <code>printAllMessages()</code> relies on a logging framework, you now have to configure that one by yourself as well.</li>\n</ul>\n<p>In addition, classes like <code>CommandLineRunner</code> are also no longer available. Now you have to rely on alternatives such as listening to the <code>ContextRefreshedEvent</code>.</p>\n"}],"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77149755,"answer_count":1,"score":0,"last_activity_date":1695295209,"creation_date":1695291468,"question_id":77149323,"body_markdown":"I&#39;m a total beginner with Spring. I&#39;m currently trying to just run a very simple project just to start learning about Spring and understanding IoC and dependency injection. At first I created a simple Spring Boot project and it worked, but now I&#39;m trying to do it without boot because I want to understand better what&#39;s going on. I don&#39;t understand how to do this (full class below):\r\n\r\n`SpringApplication.run(TestSpringApplication.class, args);`\r\n\r\nI tried to do this:\r\n\r\n    TestSpringApplication app = new TestSpringApplication();\r\n    app.run(args);\r\n\r\nBut then inside the run() method, the @Autowired messageRepository is null. I&#39;m guessing this is because I created my TestSpringApplication using new instead of applicationContext.getBean()? But how can I access/get the applicationContext in my static main method?\r\n\r\nForgive me if it might sound trivial, I&#39;m starting from almost zero here and I have a very hard time finding easy tutorials.\r\n\r\nHere is what I&#39;m trying to do but is not working:\r\n\r\n    package com.cypherf;\r\n    import com.cypherf.model.Message;\r\n    import com.cypherf.repository.MessageRepository;\r\n    import com.cypherf.service.MessageService;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n\r\n    @Configuration\r\n    @ComponentScan\r\n    public class TestSpringApplication {\r\n        @Autowired\r\n        private ApplicationContext context;\r\n\r\n        @Autowired\r\n        private MessageRepository messageRepository;\r\n\r\n        @Autowired\r\n        private MessageService messageService;\r\n\r\n        public static void main(String[] args) {\r\n            TestSpringApplication app = new TestSpringApplication();\r\n            app.run(args);\r\n        }\r\n\r\n        public void run(String... args) {\r\n            messageRepository.save(new Message(&quot;Message one&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n\r\n            messageService.printAllMessages();\r\n        }\r\n    }\r\n\r\nHere is my previous class with Spring Boot which is working:\r\n\r\n    package com.cypherf;\r\n    import com.cypherf.model.Message;\r\n    import com.cypherf.repository.MessageRepository;\r\n    import com.cypherf.service.MessageService;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n    @SpringBootApplication\r\n    public class TestSpringApplication implements CommandLineRunner {\r\n\r\n        @Autowired\r\n        private MessageRepository messageRepository;\r\n\r\n        @Autowired\r\n        private MessageService messageService;\r\n\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(TestSpringApplication.class, args);\r\n        }\r\n\r\n        public void run(String... args) throws Exception {\r\n            messageRepository.save(new Message(&quot;Message one&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n            messageRepository.save(new Message(&quot;Message two&quot;));\r\n\r\n            messageService.printAllMessages();\r\n        }\r\n    }","title":"SpringApplication.run() without boot","body":"<p>I'm a total beginner with Spring. I'm currently trying to just run a very simple project just to start learning about Spring and understanding IoC and dependency injection. At first I created a simple Spring Boot project and it worked, but now I'm trying to do it without boot because I want to understand better what's going on. I don't understand how to do this (full class below):</p>\n<p><code>SpringApplication.run(TestSpringApplication.class, args);</code></p>\n<p>I tried to do this:</p>\n<pre><code>TestSpringApplication app = new TestSpringApplication();\napp.run(args);\n</code></pre>\n<p>But then inside the run() method, the @Autowired messageRepository is null. I'm guessing this is because I created my TestSpringApplication using new instead of applicationContext.getBean()? But how can I access/get the applicationContext in my static main method?</p>\n<p>Forgive me if it might sound trivial, I'm starting from almost zero here and I have a very hard time finding easy tutorials.</p>\n<p>Here is what I'm trying to do but is not working:</p>\n<pre><code>package com.cypherf;\nimport com.cypherf.model.Message;\nimport com.cypherf.repository.MessageRepository;\nimport com.cypherf.service.MessageService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan\npublic class TestSpringApplication {\n    @Autowired\n    private ApplicationContext context;\n\n    @Autowired\n    private MessageRepository messageRepository;\n\n    @Autowired\n    private MessageService messageService;\n\n    public static void main(String[] args) {\n        TestSpringApplication app = new TestSpringApplication();\n        app.run(args);\n    }\n\n    public void run(String... args) {\n        messageRepository.save(new Message(&quot;Message one&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n\n        messageService.printAllMessages();\n    }\n}\n</code></pre>\n<p>Here is my previous class with Spring Boot which is working:</p>\n<pre><code>package com.cypherf;\nimport com.cypherf.model.Message;\nimport com.cypherf.repository.MessageRepository;\nimport com.cypherf.service.MessageService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TestSpringApplication implements CommandLineRunner {\n\n    @Autowired\n    private MessageRepository messageRepository;\n\n    @Autowired\n    private MessageService messageService;\n\n    public static void main(String[] args) {\n        SpringApplication.run(TestSpringApplication.class, args);\n    }\n\n    public void run(String... args) throws Exception {\n        messageRepository.save(new Message(&quot;Message one&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n        messageRepository.save(new Message(&quot;Message two&quot;));\n\n        messageService.printAllMessages();\n    }\n}\n</code></pre>\n"},{"tags":["java","json","serialization","jackson"],"comments":[{"owner":{"account_id":1952668,"reputation":7464,"user_id":1756430,"accept_rate":88,"display_name":"Sam Berry"},"score":1,"creation_date":1467385338,"post_id":12046786,"comment_id":63726809,"body_markdown":"I wrote a post about [How to Write a Custom Serializer with Jackson](https://spin.atomicobject.com/2016/07/01/custom-serializer-jackson/?utm_source=stack-overflow-ao&amp;utm_medium=referral&amp;utm_campaign=custom-serializer-jackson) that may be helpful to some.","body":"I wrote a post about <a href=\"https://spin.atomicobject.com/2016/07/01/custom-serializer-jackson/?utm_source=stack-overflow-ao&amp;utm_medium=referral&amp;utm_campaign=custom-serializer-jackson\" rel=\"nofollow noreferrer\">How to Write a Custom Serializer with Jackson</a> that may be helpful to some."}],"answers":[{"tags":[],"owner":{"account_id":47523,"reputation":89783,"user_id":140816,"accept_rate":90,"display_name":"Jo&#227;o Silva"},"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1345509179,"creation_date":1345508038,"answer_id":12046909,"question_id":12046786,"body_markdown":"Add a `@JsonProperty` annotated getter, which returns a `String`, for the `favoriteNumber` field:\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        private int favoriteNumber;\r\n        \r\n        public Person(String name, int age, int favoriteNumber) {\r\n        \tthis.name = name;\r\n        \tthis.age = age;\r\n        \tthis.favoriteNumber = favoriteNumber;\r\n        }\r\n        \r\n        @JsonProperty\r\n        public String getFavoriteNumber() {\r\n        \treturn String.valueOf(favoriteNumber);\r\n        }\r\n    \r\n    \tpublic static void main(String... args) throws Exception {\r\n        \tPerson p = new Person(&quot;Joe&quot;, 25, 123);\r\n        \tObjectMapper mapper = new ObjectMapper();\r\n        \tSystem.out.println(mapper.writeValueAsString(p)); \r\n            // {&quot;name&quot;:&quot;Joe&quot;,&quot;age&quot;:25,&quot;favoriteNumber&quot;:&quot;123&quot;}\r\n        }\r\n    }","title":"Jackson JSON custom serialization for certain fields","body":"<p>Add a <code>@JsonProperty</code> annotated getter, which returns a <code>String</code>, for the <code>favoriteNumber</code> field:</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    private int favoriteNumber;\n\n    public Person(String name, int age, int favoriteNumber) {\n        this.name = name;\n        this.age = age;\n        this.favoriteNumber = favoriteNumber;\n    }\n\n    @JsonProperty\n    public String getFavoriteNumber() {\n        return String.valueOf(favoriteNumber);\n    }\n\n    public static void main(String... args) throws Exception {\n        Person p = new Person(\"Joe\", 25, 123);\n        ObjectMapper mapper = new ObjectMapper();\n        System.out.println(mapper.writeValueAsString(p)); \n        // {\"name\":\"Joe\",\"age\":25,\"favoriteNumber\":\"123\"}\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"down_vote_count":2,"up_vote_count":139,"is_accepted":true,"score":137,"last_activity_date":1455670772,"creation_date":1345508717,"answer_id":12046979,"question_id":12046786,"body_markdown":"You can implement a custom serializer as follows: \r\n\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        @JsonSerialize(using = IntToStringSerializer.class, as=String.class)\r\n        public int favoriteNumber:\r\n    }\r\n    \r\n     \r\n    public class IntToStringSerializer extends JsonSerializer&lt;Integer&gt; {\r\n      \r\n        @Override\r\n        public void serialize(Integer tmpInt, \r\n                              JsonGenerator jsonGenerator, \r\n                              SerializerProvider serializerProvider) \r\n                              throws IOException, JsonProcessingException {\r\n            jsonGenerator.writeObject(tmpInt.toString());\r\n        }\r\n    }\r\n\r\nJava should handle the autoboxing from `int` to `Integer` for you.","title":"Jackson JSON custom serialization for certain fields","body":"<p>You can implement a custom serializer as follows: </p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    @JsonSerialize(using = IntToStringSerializer.class, as=String.class)\n    public int favoriteNumber:\n}\n\n\npublic class IntToStringSerializer extends JsonSerializer&lt;Integer&gt; {\n\n    @Override\n    public void serialize(Integer tmpInt, \n                          JsonGenerator jsonGenerator, \n                          SerializerProvider serializerProvider) \n                          throws IOException, JsonProcessingException {\n        jsonGenerator.writeObject(tmpInt.toString());\n    }\n}\n</code></pre>\n\n<p>Java should handle the autoboxing from <code>int</code> to <code>Integer</code> for you.</p>\n"},{"tags":[],"owner":{"account_id":2145392,"reputation":776,"user_id":1903113,"display_name":"werupokz"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1360841096,"creation_date":1360841096,"answer_id":14873731,"question_id":12046786,"body_markdown":"Jackson-databind (at least 2.1.3) provides special `ToStringSerializer` (`com.fasterxml.jackson.databind.ser.std.ToStringSerializer`)\r\n\r\nExample:\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        @JsonSerialize(using = ToStringSerializer.class)\r\n        public int favoriteNumber:\r\n    }","title":"Jackson JSON custom serialization for certain fields","body":"<p>Jackson-databind (at least 2.1.3) provides special <code>ToStringSerializer</code> (<code>com.fasterxml.jackson.databind.ser.std.ToStringSerializer</code>)</p>\n\n<p>Example:</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    @JsonSerialize(using = ToStringSerializer.class)\n    public int favoriteNumber:\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4236253,"reputation":41,"user_id":3820510,"display_name":"Chetan Pardeshi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1468304704,"creation_date":1468304704,"answer_id":38321400,"question_id":12046786,"body_markdown":"with the help of **@JsonView** we can decide fields of model classes to serialize which satisfy the minimal criteria ( we have to define the criteria) like we can have one core class with 10 properties but only 5 properties can be serialize which are needful for client only\r\n\r\nDefine our Views by simply creating following class:\r\n\r\n    public class Views\r\n    {\r\n    \tstatic class Android{};\r\n    \tstatic class IOS{};\r\n    \tstatic class Web{};\r\n    }\r\n\r\nAnnotated model class with views:\r\n\r\n    public class Demo \r\n    {\r\n    \tpublic Demo() \r\n    \t{\r\n    \t}\r\n\t\r\n    @JsonView(Views.IOS.class)\r\n    private String iosField;\r\n    \r\n    @JsonView(Views.Android.class)\r\n    private String androidField;\r\n    \r\n    @JsonView(Views.Web.class)\r\n    private String webField;\r\n\r\n     // getters/setters\r\n    ...\r\n    ..\r\n    }\r\n\r\nNow we have to write custom json converter by simply extending HttpMessageConverter class from spring as:\r\n\r\n        public class CustomJacksonConverter implements HttpMessageConverter&lt;Object&gt; \r\n        {\r\n        public CustomJacksonConverter() \r\n        \t{\r\n        \t\tsuper();\r\n    \t\t//this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.ClientView.class));\r\n    \t\tthis.delegate.getObjectMapper().configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\r\n    \t\tthis.delegate.getObjectMapper().setSerializationInclusion(Include.NON_NULL);\r\n    \r\n    \t}\r\n    \t\r\n    \t// a real message converter that will respond to methods and do the actual work\r\n    \tprivate MappingJackson2HttpMessageConverter delegate = new MappingJackson2HttpMessageConverter();\r\n    \r\n    \t@Override\r\n    \tpublic boolean canRead(Class&lt;?&gt; clazz, MediaType mediaType) {\r\n    \t\treturn delegate.canRead(clazz, mediaType);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean canWrite(Class&lt;?&gt; clazz, MediaType mediaType) {\r\n    \t\treturn delegate.canWrite(clazz, mediaType);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;MediaType&gt; getSupportedMediaTypes() {\r\n    \t\treturn delegate.getSupportedMediaTypes();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Object read(Class&lt;? extends Object&gt; clazz,\r\n    \t\t\tHttpInputMessage inputMessage) throws IOException,\r\n    \t\t\tHttpMessageNotReadableException {\r\n    \t\treturn delegate.read(clazz, inputMessage);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void write(Object obj, MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException \r\n    \t{\r\n    \t\tsynchronized(this) \r\n    \t\t{\r\n    \t\t\tString userAgent = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(&quot;userAgent&quot;);\r\n    \t\t\tif ( userAgent != null ) \r\n    \t\t\t{\r\n    \t\t\t\tswitch (userAgent) \r\n    \t\t\t\t{\r\n    \t\t\t\tcase &quot;IOS&quot; :\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.IOS.class));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &quot;Android&quot; :\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.Android.class));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &quot;Web&quot; :\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( Views.Web.class));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tdefault:\r\n    \t\t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\t// reset to default view\r\n    \t\t\t\tthis.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\r\n    \t\t\t}\r\n    \t\t\tdelegate.write(obj, contentType, outputMessage);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nNow there is need to tell spring to use this custom json convert by simply putting this in dispatcher-servlet.xml\r\n\r\n    &lt;mvc:annotation-driven&gt;\r\n    \t\t&lt;mvc:message-converters register-defaults=&quot;true&quot;&gt;\r\n    \t\t\t&lt;bean id=&quot;jsonConverter&quot; class=&quot;com.mactores.org.CustomJacksonConverter&quot; &gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/mvc:message-converters&gt;\r\n    \t&lt;/mvc:annotation-driven&gt;\r\n\r\nThat&#39;s how you will able to decide which fields to get serialize.\r\n","title":"Jackson JSON custom serialization for certain fields","body":"<p>with the help of <strong>@JsonView</strong> we can decide fields of model classes to serialize which satisfy the minimal criteria ( we have to define the criteria) like we can have one core class with 10 properties but only 5 properties can be serialize which are needful for client only</p>\n\n<p>Define our Views by simply creating following class:</p>\n\n<pre><code>public class Views\n{\n    static class Android{};\n    static class IOS{};\n    static class Web{};\n}\n</code></pre>\n\n<p>Annotated model class with views:</p>\n\n<pre><code>public class Demo \n{\n    public Demo() \n    {\n    }\n\n@JsonView(Views.IOS.class)\nprivate String iosField;\n\n@JsonView(Views.Android.class)\nprivate String androidField;\n\n@JsonView(Views.Web.class)\nprivate String webField;\n\n // getters/setters\n...\n..\n}\n</code></pre>\n\n<p>Now we have to write custom json converter by simply extending HttpMessageConverter class from spring as:</p>\n\n<pre><code>    public class CustomJacksonConverter implements HttpMessageConverter&lt;Object&gt; \n    {\n    public CustomJacksonConverter() \n        {\n            super();\n        //this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.ClientView.class));\n        this.delegate.getObjectMapper().configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\n        this.delegate.getObjectMapper().setSerializationInclusion(Include.NON_NULL);\n\n    }\n\n    // a real message converter that will respond to methods and do the actual work\n    private MappingJackson2HttpMessageConverter delegate = new MappingJackson2HttpMessageConverter();\n\n    @Override\n    public boolean canRead(Class&lt;?&gt; clazz, MediaType mediaType) {\n        return delegate.canRead(clazz, mediaType);\n    }\n\n    @Override\n    public boolean canWrite(Class&lt;?&gt; clazz, MediaType mediaType) {\n        return delegate.canWrite(clazz, mediaType);\n    }\n\n    @Override\n    public List&lt;MediaType&gt; getSupportedMediaTypes() {\n        return delegate.getSupportedMediaTypes();\n    }\n\n    @Override\n    public Object read(Class&lt;? extends Object&gt; clazz,\n            HttpInputMessage inputMessage) throws IOException,\n            HttpMessageNotReadableException {\n        return delegate.read(clazz, inputMessage);\n    }\n\n    @Override\n    public void write(Object obj, MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException \n    {\n        synchronized(this) \n        {\n            String userAgent = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader(\"userAgent\");\n            if ( userAgent != null ) \n            {\n                switch (userAgent) \n                {\n                case \"IOS\" :\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.IOS.class));\n                    break;\n                case \"Android\" :\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.Android.class));\n                    break;\n                case \"Web\" :\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( Views.Web.class));\n                    break;\n                default:\n                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\n                    break;\n                }\n            }\n            else\n            {\n                // reset to default view\n                this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));\n            }\n            delegate.write(obj, contentType, outputMessage);\n        }\n    }\n\n}\n</code></pre>\n\n<p>Now there is need to tell spring to use this custom json convert by simply putting this in dispatcher-servlet.xml</p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n        &lt;mvc:message-converters register-defaults=\"true\"&gt;\n            &lt;bean id=\"jsonConverter\" class=\"com.mactores.org.CustomJacksonConverter\" &gt;\n            &lt;/bean&gt;\n        &lt;/mvc:message-converters&gt;\n    &lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>That's how you will able to decide which fields to get serialize.</p>\n"},{"tags":[],"owner":{"account_id":259073,"reputation":8102,"user_id":541688,"display_name":"Oleg Estekhin"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1502948710,"creation_date":1502805076,"answer_id":45694302,"question_id":12046786,"body_markdown":"jackson-annotations provides `@JsonFormat` which can handle a lot of customizations without the need to write the custom serializer. \r\n\r\nFor example, requesting a `STRING` shape for a field with numeric type will output the numeric value as string\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        @JsonFormat(shape = JsonFormat.Shape.STRING)\r\n        public int favoriteNumber;\r\n    }\r\n\r\nwill result in the desired output\r\n\r\n    {&quot;name&quot;:&quot;Joe&quot;,&quot;age&quot;:25,&quot;favoriteNumber&quot;:&quot;123&quot;}","title":"Jackson JSON custom serialization for certain fields","body":"<p>jackson-annotations provides <code>@JsonFormat</code> which can handle a lot of customizations without the need to write the custom serializer. </p>\n\n<p>For example, requesting a <code>STRING</code> shape for a field with numeric type will output the numeric value as string</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    @JsonFormat(shape = JsonFormat.Shape.STRING)\n    public int favoriteNumber;\n}\n</code></pre>\n\n<p>will result in the desired output</p>\n\n<pre><code>{\"name\":\"Joe\",\"age\":25,\"favoriteNumber\":\"123\"}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1724767,"reputation":6919,"user_id":1579718,"accept_rate":75,"display_name":"Igor G."},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1554456889,"creation_date":1554456889,"answer_id":55532363,"question_id":12046786,"body_markdown":"In case you don&#39;t want to pollute your model with annotations and want to perform some custom operations, you could use mixins.\r\n\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\nSimpleModule simpleModule = new SimpleModule();\r\nsimpleModule.setMixInAnnotation(Person.class, PersonMixin.class);\r\nmapper.registerModule(simpleModule);\r\n```\r\nOverride age:\r\n```\r\npublic abstract class PersonMixin {\r\n    @JsonSerialize(using = PersonAgeSerializer.class)\r\n    public String age;\r\n}\r\n```\r\nDo whatever you need with the age:\r\n```\r\npublic class PersonAgeSerializer extends JsonSerializer&lt;Integer&gt; {\r\n    @Override\r\n    public void serialize(Integer integer, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\r\n        jsonGenerator.writeString(String.valueOf(integer * 52) + &quot; months&quot;);\r\n    }\r\n}\r\n```","title":"Jackson JSON custom serialization for certain fields","body":"<p>In case you don't want to pollute your model with annotations and want to perform some custom operations, you could use mixins.</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nSimpleModule simpleModule = new SimpleModule();\nsimpleModule.setMixInAnnotation(Person.class, PersonMixin.class);\nmapper.registerModule(simpleModule);\n</code></pre>\n\n<p>Override age:</p>\n\n<pre><code>public abstract class PersonMixin {\n    @JsonSerialize(using = PersonAgeSerializer.class)\n    public String age;\n}\n</code></pre>\n\n<p>Do whatever you need with the age:</p>\n\n<pre><code>public class PersonAgeSerializer extends JsonSerializer&lt;Integer&gt; {\n    @Override\n    public void serialize(Integer integer, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {\n        jsonGenerator.writeString(String.valueOf(integer * 52) + \" months\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3237003,"reputation":1250,"user_id":2730950,"display_name":"Vladimir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1608232275,"creation_date":1608230824,"answer_id":65346619,"question_id":12046786,"body_markdown":"You can create a custom serializer inline in the mixin. Then annotate a field with it. See example below that appends &quot; *- something else* &quot; to lang field. This is kind of ***hackish*** - if your serializer requires something like a repository or anything injected by spring, this is going to be a problem. Probably best to use a custom deserializer/serializer instead of a mixin.\r\n\r\n    package com.test;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonAutoDetect;\r\n    import com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.fasterxml.jackson.annotation.JsonPropertyOrder;\r\n    import com.fasterxml.jackson.core.JsonGenerator;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.JsonSerializer;\r\n    import com.fasterxml.jackson.databind.SerializerProvider;\r\n    import com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\n    import com.test.Argument;\r\n    import java.io.IOException;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    //Serialize only fields explicitly mentioned by this mixin.\r\n    @JsonAutoDetect(\r\n        fieldVisibility = Visibility.NONE,\r\n        setterVisibility = Visibility.NONE,\r\n        getterVisibility = Visibility.NONE,\r\n        isGetterVisibility = Visibility.NONE,\r\n        creatorVisibility = Visibility.NONE\r\n    )\r\n    @JsonPropertyOrder({&quot;lang&quot;, &quot;name&quot;, &quot;value&quot;})\r\n    public abstract class V2ArgumentMixin {\r\n    \r\n      @JsonProperty(&quot;name&quot;)\r\n      private String name;\r\n    \r\n      @JsonSerialize(using = LangCustomSerializer.class, as=String.class)\r\n      @JsonProperty(&quot;lang&quot;)\r\n      private String lang;\r\n    \r\n      @JsonProperty(&quot;value&quot;)\r\n      private Object value;\r\n    \r\n    \r\n      \r\n      public static class LangCustomSerializer extends JsonSerializer&lt;String&gt; {\r\n    \r\n        @Override\r\n        public void serialize(String value,\r\n                              JsonGenerator jsonGenerator,\r\n                              SerializerProvider serializerProvider)\r\n            throws IOException, JsonProcessingException {\r\n          jsonGenerator.writeObject(value.toString() + &quot;  - something else&quot;);\r\n        }\r\n      }\r\n    }","title":"Jackson JSON custom serialization for certain fields","body":"<p>You can create a custom serializer inline in the mixin. Then annotate a field with it. See example below that appends &quot; <em>- something else</em> &quot; to lang field. This is kind of <em><strong>hackish</strong></em> - if your serializer requires something like a repository or anything injected by spring, this is going to be a problem. Probably best to use a custom deserializer/serializer instead of a mixin.</p>\n<pre><code>package com.test;\n\nimport com.fasterxml.jackson.annotation.JsonAutoDetect;\nimport com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.annotation.JsonPropertyOrder;\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport com.test.Argument;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n//Serialize only fields explicitly mentioned by this mixin.\n@JsonAutoDetect(\n    fieldVisibility = Visibility.NONE,\n    setterVisibility = Visibility.NONE,\n    getterVisibility = Visibility.NONE,\n    isGetterVisibility = Visibility.NONE,\n    creatorVisibility = Visibility.NONE\n)\n@JsonPropertyOrder({&quot;lang&quot;, &quot;name&quot;, &quot;value&quot;})\npublic abstract class V2ArgumentMixin {\n\n  @JsonProperty(&quot;name&quot;)\n  private String name;\n\n  @JsonSerialize(using = LangCustomSerializer.class, as=String.class)\n  @JsonProperty(&quot;lang&quot;)\n  private String lang;\n\n  @JsonProperty(&quot;value&quot;)\n  private Object value;\n\n\n  \n  public static class LangCustomSerializer extends JsonSerializer&lt;String&gt; {\n\n    @Override\n    public void serialize(String value,\n                          JsonGenerator jsonGenerator,\n                          SerializerProvider serializerProvider)\n        throws IOException, JsonProcessingException {\n      jsonGenerator.writeObject(value.toString() + &quot;  - something else&quot;);\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218186,"reputation":783,"user_id":474377,"display_name":"Vijay Vepakomma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695295114,"creation_date":1695295114,"answer_id":77149741,"question_id":12046786,"body_markdown":"I ended up combining the two answers (and using the implementation provided by ToStringSerializer)\r\n\r\n- https://stackoverflow.com/a/12046979/474377\r\n- https://stackoverflow.com/a/14873731/474377\r\n\r\nPOJO:\r\n\r\n    public class MyPojo{\r\n      LocalDate date;\r\n    \r\n      @JsonSerialize(using = CurrencySerializer.class)\r\n      double amount;\r\n    }\r\n\r\nSerializer:\r\n\r\n    import com.fasterxml.jackson.databind.annotation.JacksonStdImpl;\r\n    import com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase;\r\n    \r\n    @JacksonStdImpl\r\n    public class CurrencySerializer extends ToStringSerializerBase\r\n    {\r\n      public final static CurrencySerializer instance = new CurrencySerializer();\r\n    \r\n      public CurrencySerializer() { super(Object.class); }\r\n    \r\n    \r\n      public CurrencySerializer(Class&lt;?&gt; handledType) {\r\n        super(handledType);\r\n      }\r\n    \r\n      @Override\r\n      public final String valueToString(Object value) {\r\n        return &quot;$ &quot; + value.toString();\r\n      }\r\n    }\r\n\r\n\r\n\r\n","title":"Jackson JSON custom serialization for certain fields","body":"<p>I ended up combining the two answers (and using the implementation provided by ToStringSerializer)</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/12046979/474377\">https://stackoverflow.com/a/12046979/474377</a></li>\n<li><a href=\"https://stackoverflow.com/a/14873731/474377\">https://stackoverflow.com/a/14873731/474377</a></li>\n</ul>\n<p>POJO:</p>\n<pre><code>public class MyPojo{\n  LocalDate date;\n\n  @JsonSerialize(using = CurrencySerializer.class)\n  double amount;\n}\n</code></pre>\n<p>Serializer:</p>\n<pre><code>import com.fasterxml.jackson.databind.annotation.JacksonStdImpl;\nimport com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase;\n\n@JacksonStdImpl\npublic class CurrencySerializer extends ToStringSerializerBase\n{\n  public final static CurrencySerializer instance = new CurrencySerializer();\n\n  public CurrencySerializer() { super(Object.class); }\n\n\n  public CurrencySerializer(Class&lt;?&gt; handledType) {\n    super(handledType);\n  }\n\n  @Override\n  public final String valueToString(Object value) {\n    return &quot;$ &quot; + value.toString();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162694,"favorite_count":0,"down_vote_count":0,"up_vote_count":122,"accepted_answer_id":12046979,"answer_count":8,"score":122,"last_activity_date":1695295114,"creation_date":1345506878,"question_id":12046786,"body_markdown":"Is there a way using Jackson JSON Processor to do custom field level serialization? For example, I&#39;d like to have the class\r\n\r\n    public class Person {\r\n        public String name;\r\n        public int age;\r\n        public int favoriteNumber;\r\n    }\r\n\r\nserialized to the follow JSON:\r\n\r\n    { &quot;name&quot;: &quot;Joe&quot;, &quot;age&quot;: 25, &quot;favoriteNumber&quot;: &quot;123&quot; }\r\n\r\nNote that age=25 is encoded as a **number** while favoriteNumber=123 is encoded as a **string**. Out of the box Jackson marshalls `int` to a number. In this case I want favoriteNumber to be encoded as a string.\r\n","title":"Jackson JSON custom serialization for certain fields","body":"<p>Is there a way using Jackson JSON Processor to do custom field level serialization? For example, I'd like to have the class</p>\n\n<pre><code>public class Person {\n    public String name;\n    public int age;\n    public int favoriteNumber;\n}\n</code></pre>\n\n<p>serialized to the follow JSON:</p>\n\n<pre><code>{ \"name\": \"Joe\", \"age\": 25, \"favoriteNumber\": \"123\" }\n</code></pre>\n\n<p>Note that age=25 is encoded as a <strong>number</strong> while favoriteNumber=123 is encoded as a <strong>string</strong>. Out of the box Jackson marshalls <code>int</code> to a number. In this case I want favoriteNumber to be encoded as a string.</p>\n"},{"tags":["java","azure"],"comments":[{"owner":{"account_id":1826174,"reputation":55261,"user_id":1658906,"accept_rate":100,"display_name":"juunas"},"score":2,"creation_date":1695288152,"post_id":77148810,"comment_id":136005446,"body_markdown":"Have you assigned Azure RBAC roles to that application? It would need for example Storage Blob Data Reader role.","body":"Have you assigned Azure RBAC roles to that application? It would need for example Storage Blob Data Reader role."},{"owner":{"account_id":1826174,"reputation":55261,"user_id":1658906,"accept_rate":100,"display_name":"juunas"},"score":2,"creation_date":1695292210,"post_id":77148810,"comment_id":136006357,"body_markdown":"You can do that through Portal or through Bicep/ARM/Terraform templates or command line.","body":"You can do that through Portal or through Bicep/ARM/Terraform templates or command line."},{"owner":{"account_id":25323437,"reputation":5142,"user_id":19144428,"display_name":"Venkatesan"},"score":0,"creation_date":1695292711,"post_id":77148810,"comment_id":136006443,"body_markdown":"Hi, @Im Go to azure portal -&gt; subscription -&gt; Access control(IAM)  -&gt; Add -&gt; Add Role assignments -&gt; select the azure storage blob reader role -&gt; select members (Your Application) -&gt; click review + assign.","body":"Hi, @Im Go to azure portal -&gt; subscription -&gt; Access control(IAM)  -&gt; Add -&gt; Add Role assignments -&gt; select the azure storage blob reader role -&gt; select members (Your Application) -&gt; click review + assign."},{"owner":{"account_id":110000,"reputation":4107,"user_id":291253,"accept_rate":37,"display_name":"lm."},"score":0,"creation_date":1695293648,"post_id":77148810,"comment_id":136006597,"body_markdown":"Added screenshot for roles defined , Is \n&quot;Storage Blob Data Reader&quot;  different from azure &quot;storage blob reader role&quot; ?","body":"Added screenshot for roles defined , Is  &quot;Storage Blob Data Reader&quot;  different from azure &quot;storage blob reader role&quot; ?"},{"owner":{"account_id":25323437,"reputation":5142,"user_id":19144428,"display_name":"Venkatesan"},"score":0,"creation_date":1695294538,"post_id":77148810,"comment_id":136006757,"body_markdown":"Yes, it is different for blob storage level you need to assign  `Storage Blob Data Reader` role.","body":"Yes, it is different for blob storage level you need to assign  <code>Storage Blob Data Reader</code> role."},{"owner":{"account_id":25323437,"reputation":5142,"user_id":19144428,"display_name":"Venkatesan"},"score":1,"creation_date":1695295146,"post_id":77148810,"comment_id":136006856,"body_markdown":"Hi @Im. You need to assign the role for Azure AD application like https://i.imgur.com/jXCvo1u.png not for the user because you are authenticating by clientsecretcredential.","body":"Hi @Im. You need to assign the role for Azure AD application like <a href=\"https://i.imgur.com/jXCvo1u.png\" rel=\"nofollow noreferrer\">i.imgur.com/jXCvo1u.png</a> not for the user because you are authenticating by clientsecretcredential."}],"answers":[{"tags":[],"owner":{"account_id":25323437,"reputation":5142,"user_id":19144428,"display_name":"Venkatesan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695292824,"creation_date":1695292063,"answer_id":77149410,"question_id":77148810,"body_markdown":"Initially, I tried in my environment and got the same error.\r\n\r\n![enter image description here](https://i.imgur.com/znEtr3F.png)\r\n\r\n&gt; The question : Is there something missing / wrong in code or it is ONLY permission issue ?\r\n\r\nI agree with Junna&#39;s comment After assigning **`Storage blob data reader`** role to my application. I can able to download the file.\r\n\r\n**Portal:**\r\n![enter image description here](https://i.imgur.com/sYz9ymL.png)\r\n\r\n\r\n**Code:**\r\n\r\n    import com.azure.core.credential.TokenCredential;\r\n    import com.azure.identity.ClientSecretCredentialBuilder;\r\n    import com.azure.storage.blob.BlobClient;\r\n    import com.azure.storage.blob.BlobContainerClient;\r\n    import com.azure.storage.blob.BlobContainerClientBuilder;\r\n    \r\n    import java.util.Locale;\r\n    \r\n    public class App {\r\n        public static void main(String[] args) {\r\n            // Set the values for your Azure Blob Storage account\r\n            String accountName = &quot;venkat123&quot;;\r\n            String containerName = &quot;test1&quot;;\r\n            String blobName = &quot;file2.txt&quot;;\r\n            String tenantId = &quot;xxxx&quot;;\r\n            String clientId = &quot;xxxxx&quot;;\r\n            String clientSecret = &quot;xxxxx&quot;;\r\n    \r\n            // Create a token credential using the client secret\r\n            TokenCredential credential = new ClientSecretCredentialBuilder()\r\n                    .tenantId(tenantId)\r\n                    .clientId(clientId)\r\n                    .clientSecret(clientSecret)\r\n                    .build();\r\n    \r\n            // Create a BlobContainerClient using the token credential\r\n            String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net&quot;, accountName);\r\n            BlobContainerClient containerClient = new BlobContainerClientBuilder()\r\n                    .endpoint(endpoint)\r\n                    .credential(credential)\r\n                    .containerName(containerName)\r\n                    .buildClient();\r\n    \r\n            // Download the blob to a file\r\n            String destinationPath = &quot;C:\\\\Users\\\\xxx\\\\xxx\\\\Documents\\\\xx\\\\sample.txt&quot;;\r\n                BlobClient blobClient = containerClient.getBlobClient(blobName);\r\n                blobClient.downloadToFile(destinationPath, true);\r\n                System.out.println(&quot;Download OK&quot;);\r\n        }\r\n    }\r\n\r\n**Output:** \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**File:** \r\n\r\n![enter image description here](https://i.imgur.com/9r1abIb.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BpuG4.png","title":"Issue with download from Azure with ClientID , TennantID and ClientSecret","body":"<p>Initially, I tried in my environment and got the same error.</p>\n<p><img src=\"https://i.imgur.com/znEtr3F.png\" alt=\"enter image description here\" /></p>\n<blockquote>\n<p>The question : Is there something missing / wrong in code or it is ONLY permission issue ?</p>\n</blockquote>\n<p>I agree with Junna's comment After assigning <strong><code>Storage blob data reader</code></strong> role to my application. I can able to download the file.</p>\n<p><strong>Portal:</strong>\n<img src=\"https://i.imgur.com/sYz9ymL.png\" alt=\"enter image description here\" /></p>\n<p><strong>Code:</strong></p>\n<pre><code>import com.azure.core.credential.TokenCredential;\nimport com.azure.identity.ClientSecretCredentialBuilder;\nimport com.azure.storage.blob.BlobClient;\nimport com.azure.storage.blob.BlobContainerClient;\nimport com.azure.storage.blob.BlobContainerClientBuilder;\n\nimport java.util.Locale;\n\npublic class App {\n    public static void main(String[] args) {\n        // Set the values for your Azure Blob Storage account\n        String accountName = &quot;venkat123&quot;;\n        String containerName = &quot;test1&quot;;\n        String blobName = &quot;file2.txt&quot;;\n        String tenantId = &quot;xxxx&quot;;\n        String clientId = &quot;xxxxx&quot;;\n        String clientSecret = &quot;xxxxx&quot;;\n\n        // Create a token credential using the client secret\n        TokenCredential credential = new ClientSecretCredentialBuilder()\n                .tenantId(tenantId)\n                .clientId(clientId)\n                .clientSecret(clientSecret)\n                .build();\n\n        // Create a BlobContainerClient using the token credential\n        String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net&quot;, accountName);\n        BlobContainerClient containerClient = new BlobContainerClientBuilder()\n                .endpoint(endpoint)\n                .credential(credential)\n                .containerName(containerName)\n                .buildClient();\n\n        // Download the blob to a file\n        String destinationPath = &quot;C:\\\\Users\\\\xxx\\\\xxx\\\\Documents\\\\xx\\\\sample.txt&quot;;\n            BlobClient blobClient = containerClient.getBlobClient(blobName);\n            blobClient.downloadToFile(destinationPath, true);\n            System.out.println(&quot;Download OK&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/BpuG4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BpuG4.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>File:</strong></p>\n<p><img src=\"https://i.imgur.com/9r1abIb.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":110000,"reputation":4107,"user_id":291253,"accept_rate":37,"display_name":"lm."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695294803,"creation_date":1695287645,"question_id":77148810,"body_markdown":"I am trying to download blob from Azure storage from java code m by using  ClientID , TennantID and ClientSecret\r\n\r\nHere is code for obtaining client : \r\n\r\n    private BlobContainerClient getContainerClient_SP(String containerName) {\r\n        ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\r\n                .tenantId(tenantId)\r\n                .clientId(clientId)\r\n                .clientSecret(clientSecret)\r\n                .build();\r\n    \r\n        String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net/%s&quot;, accountName, containerName);\r\n        BlobContainerClient containerClient = new BlobContainerClientBuilder()\r\n                .endpoint(endpoint)\r\n                .credential(clientSecretCredential)\r\n                .buildClient();\r\n    \r\n        return containerClient;\r\n    \r\n    }\r\n\r\nHere is code snippet for download :\r\n\r\n    try {\r\n    \tBlobContainerClient containerClient = getContainerClient_SP(containerName);\r\n    \tBlobClient blobClient = containerClient.getBlobClient(blobName);\t\t\r\n    \tString destinationPath = &quot;C:\\\\MyFolder\\\\MyFileName&quot;;\r\n    \tblobClient.downloadToFile(destinationPath,true); //Exception thrown here \r\n    \tSystem.out.println(&quot;Download OK&quot;);\r\n    }\r\n    catch (Exception ex) {\r\n    \tSystem.out.println(&quot;APP exception: &quot;+ex.getMessage());\r\n    \tthrow ex;\r\n    }\r\nException is : \r\n\r\n        Exception in thread &quot;main&quot; \r\n    com.azure.storage.blob.models.BlobStorageException: If you are using a StorageSharedKeyCredential, and the server returned an error message that says &#39;Signature did not match&#39;, you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair &#39;Azure-Storage-Log-String-To-Sign&#39;: true to the appropriate method call.\r\n        If you are using a SAS token, and the server returned an error message that says &#39;Signature did not match&#39;, you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair &#39;Azure-Storage-Log-String-To-Sign&#39;: true to the appropriate generateSas method call.\r\n        Please remember to disable &#39;Azure-Storage-Log-String-To-Sign&#39; before going to production as this string can potentially contain PII.\r\n        Status code 403, &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AuthorizationPermissionMismatch&lt;/Code&gt;&lt;Message&gt;This request is not authorized to perform this operation using this permission.\r\n        RequestId:57625f26-801e-0036-206a-ec1d2e000000\r\n        Time:2023-09-21T09:07:08.3082584Z&lt;/Message&gt;&lt;/Error&gt;&quot;\r\n        \tat java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:627)\r\n        \tat com.azure.core.implementation.http.rest.ResponseExceptionConstructorCache.invoke(ResponseExceptionConstructorCache.java:56)\r\n\r\nThe question : Is there something missing / wrong in code or it is ONLY permission issue ?\r\nThanks in advance \r\nRoles defined : [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8Izyo.png","title":"Issue with download from Azure with ClientID , TennantID and ClientSecret","body":"<p>I am trying to download blob from Azure storage from java code m by using  ClientID , TennantID and ClientSecret</p>\n<p>Here is code for obtaining client :</p>\n<pre><code>private BlobContainerClient getContainerClient_SP(String containerName) {\n    ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\n            .tenantId(tenantId)\n            .clientId(clientId)\n            .clientSecret(clientSecret)\n            .build();\n\n    String endpoint = String.format(Locale.ROOT, &quot;https://%s.blob.core.windows.net/%s&quot;, accountName, containerName);\n    BlobContainerClient containerClient = new BlobContainerClientBuilder()\n            .endpoint(endpoint)\n            .credential(clientSecretCredential)\n            .buildClient();\n\n    return containerClient;\n\n}\n</code></pre>\n<p>Here is code snippet for download :</p>\n<pre><code>try {\n    BlobContainerClient containerClient = getContainerClient_SP(containerName);\n    BlobClient blobClient = containerClient.getBlobClient(blobName);        \n    String destinationPath = &quot;C:\\\\MyFolder\\\\MyFileName&quot;;\n    blobClient.downloadToFile(destinationPath,true); //Exception thrown here \n    System.out.println(&quot;Download OK&quot;);\n}\ncatch (Exception ex) {\n    System.out.println(&quot;APP exception: &quot;+ex.getMessage());\n    throw ex;\n}\n</code></pre>\n<p>Exception is :</p>\n<pre><code>    Exception in thread &quot;main&quot; \ncom.azure.storage.blob.models.BlobStorageException: If you are using a StorageSharedKeyCredential, and the server returned an error message that says 'Signature did not match', you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair 'Azure-Storage-Log-String-To-Sign': true to the appropriate method call.\n    If you are using a SAS token, and the server returned an error message that says 'Signature did not match', you can compare the string to sign with the one generated by the SDK. To log the string to sign, pass in the context key value pair 'Azure-Storage-Log-String-To-Sign': true to the appropriate generateSas method call.\n    Please remember to disable 'Azure-Storage-Log-String-To-Sign' before going to production as this string can potentially contain PII.\n    Status code 403, &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AuthorizationPermissionMismatch&lt;/Code&gt;&lt;Message&gt;This request is not authorized to perform this operation using this permission.\n    RequestId:57625f26-801e-0036-206a-ec1d2e000000\n    Time:2023-09-21T09:07:08.3082584Z&lt;/Message&gt;&lt;/Error&gt;&quot;\n        at java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:627)\n        at com.azure.core.implementation.http.rest.ResponseExceptionConstructorCache.invoke(ResponseExceptionConstructorCache.java:56)\n</code></pre>\n<p>The question : Is there something missing / wrong in code or it is ONLY permission issue ?\nThanks in advance\nRoles defined : <a href=\"https://i.stack.imgur.com/8Izyo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Izyo.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","hibernate","jpa","transactions"],"comments":[{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1484696169,"post_id":41705197,"comment_id":70613329,"body_markdown":"I&#39;m puzzled by ```PersistenceContextImpl``` class, why would you override the PersistenceContext annotation? In Spring the injected EntityManager is a proxy which interacts with Transactional and ThreadLocal storage, and it is almost like the Transactional annotation is not respected. I think you will be extremely lucky if someone else has tried this before, and knows the cause. I fear you will have to some debugging to figure this one out.","body":"I&#39;m puzzled by <code>PersistenceContextImpl</code> class, why would you override the PersistenceContext annotation? In Spring the injected EntityManager is a proxy which interacts with Transactional and ThreadLocal storage, and it is almost like the Transactional annotation is not respected. I think you will be extremely lucky if someone else has tried this before, and knows the cause. I fear you will have to some debugging to figure this one out."},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1484696251,"post_id":41705197,"comment_id":70613356,"body_markdown":"And if you are already upgrading the project, you not get rid of Maven and the bloated XML configuration, and make the switch to Gradle ;)","body":"And if you are already upgrading the project, you not get rid of Maven and the bloated XML configuration, and make the switch to Gradle ;)"},{"owner":{"account_id":10052845,"reputation":41,"user_id":7432066,"display_name":"ProgEngineer"},"score":0,"creation_date":1484739192,"post_id":41705197,"comment_id":70631155,"body_markdown":"@KlausGroenbaek I&#39;m sorry for confusing you here, PersistenceContextImpl in this case is not overriding the PersistenceContext annotation but is just a normal class which is used and which has some interaction with the database. And thanks for the info about Gradle ;) I will check out Gradle in the future, but I&#39;m pretty sure a migration from Maven to Gradle at this point would be pretty lethal... :D","body":"@KlausGroenbaek I&#39;m sorry for confusing you here, PersistenceContextImpl in this case is not overriding the PersistenceContext annotation but is just a normal class which is used and which has some interaction with the database. And thanks for the info about Gradle ;) I will check out Gradle in the future, but I&#39;m pretty sure a migration from Maven to Gradle at this point would be pretty lethal... :D"},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1484748144,"post_id":41705197,"comment_id":70637340,"body_markdown":"How does ```PersistenceContextImpl``` compile when there are references to two different```PersistenceContext```classes, and none of them are fully qualified? And based on the functionality of the Impl class it should probably be called something that ends with Repository.","body":"How does <code>PersistenceContextImpl</code> compile when there are references to two different<code>PersistenceContext</code>classes, and none of them are fully qualified? And based on the functionality of the Impl class it should probably be called something that ends with Repository."}],"answers":[{"tags":[],"owner":{"account_id":7521965,"reputation":117,"user_id":5713506,"display_name":"Saket Puranik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484740819,"creation_date":1484740819,"answer_id":41718877,"question_id":41705197,"body_markdown":"I suspect that this can be an issue with your component scanning or package scanning. I cannot find the package scanning code in your spring configuration file. Please check that or update your configuration file.","title":"No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call","body":"<p>I suspect that this can be an issue with your component scanning or package scanning. I cannot find the package scanning code in your spring configuration file. Please check that or update your configuration file.</p>\n"},{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484750880,"creation_date":1484750074,"answer_id":41722128,"question_id":41705197,"body_markdown":"The scanning seems to work. If you look at the stacktrace you can see the EntityManager ```Proxy``` (com.sun.proxy.$Proxy163) and that it forwards to```SharedEntityManagerCreator```as expected. \r\n\r\nHowever, before creating the SharedEntityManager it checks if there is a transaction, and this check fails. The transaction should be created by the ```@Transactional``` annotation. This happens through Spring AOP, either creating a GCLIB proxy extending```DBLockingImpl```or a JDK Proxy implementing ```Locking```. This can be determined by setting a breakpoint inside a method and looking at the callstack to see how the method was called. \r\n\r\nLooking at ```DBLockingImpl``` I noticed that you use ```SpringBeanAutowiringInterceptor```which suggests that DBLockingImpl is not a Spring bean, but you just autowire Spring beans into it. If this is that case then I think that is your problem, because then ```DBLockingImpl```will not be AOP proxied, and the @Transactional will therefore not be applied. \r\n\r\nTry making ```DBLockingImpl```a spring bean.\r\n\r\n\r\n","title":"No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call","body":"<p>The scanning seems to work. If you look at the stacktrace you can see the EntityManager <code>Proxy</code> (com.sun.proxy.$Proxy163) and that it forwards to<code>SharedEntityManagerCreator</code>as expected. </p>\n\n<p>However, before creating the SharedEntityManager it checks if there is a transaction, and this check fails. The transaction should be created by the <code>@Transactional</code> annotation. This happens through Spring AOP, either creating a GCLIB proxy extending<code>DBLockingImpl</code>or a JDK Proxy implementing <code>Locking</code>. This can be determined by setting a breakpoint inside a method and looking at the callstack to see how the method was called. </p>\n\n<p>Looking at <code>DBLockingImpl</code> I noticed that you use <code>SpringBeanAutowiringInterceptor</code>which suggests that DBLockingImpl is not a Spring bean, but you just autowire Spring beans into it. If this is that case then I think that is your problem, because then <code>DBLockingImpl</code>will not be AOP proxied, and the @Transactional will therefore not be applied. </p>\n\n<p>Try making <code>DBLockingImpl</code>a spring bean.</p>\n"}],"owner":{"account_id":10052845,"reputation":41,"user_id":7432066,"display_name":"ProgEngineer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8332,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695294426,"creation_date":1484680567,"question_id":41705197,"body_markdown":"Some background info: I am trying to migrate a big project from Hibernate 3.6.8 to 5.2.5 (including JPA upgrade 2.0 to 2.1), Spring 3.2.3 to 4.3.5 and am facing serious issues. The configuration has not been changed for Spring and Hibernate so far and has been working fine on the old versions, however with the upgrade problems that I can&#39;t solve myself arose.\r\n\r\n&gt; The exception I&#39;m getting is:\r\n\r\n    2017-01-16 10:15:25,635 ERROR [[ACTIVE] ExecuteThread: &#39;15&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;] org.myproject.common.messaging.BaseMDB: Code: (11702) Source: (Common) Exception caught - Exception org.springframework.dao.InvalidDataAccessApiUsageException in org.myproject.core.processing.message.MessageReceiverImpl caught\r\n    org.springframework.dao.InvalidDataAccessApiUsageException: No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call; nested exception is javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call\r\n                    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:413)\r\n                    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)\r\n                    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:491)\r\n                    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:59)\r\n                    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)\r\n                    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:147)\r\n                    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n                    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n                    at com.sun.proxy.$Proxy187.flushAndClear(Unknown Source)\r\n                    at org.myproject.core.BasePersistenceMDB.synchronizeBackend(BasePersistenceMDB.java:46)\r\n                    at org.myproject.core.BasePersistenceMDB.onTextMessage(BasePersistenceMDB.java:32)\r\n                    at org.myproject.common.messaging.BaseMDB.evaluateJMSMessage(BaseMDB.java:100)\r\n                    at org.myproject.common.messaging.BaseMDB.onMessage(BaseMDB.java:51)\r\n                    at sun.reflect.GeneratedMethodAccessor591.invoke(Unknown Source)\r\n                    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                    at java.lang.reflect.Method.invoke(Method.java:498)\r\n                    at com.bea.core.repackaged.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\r\n                    at com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:100)\r\n                    at com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:117)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n                    at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)\r\n                    at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\r\n                    at com.bea.core.repackaged.springframework.aop.framework.JdkDynamicAopProxy.invoke(Unknown Source)\r\n                    at com.sun.proxy.$Proxy121.onMessage(Unknown Source)\r\n                    at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:451)\r\n                    at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:375)\r\n                    at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.processOneMessage(TokenBasedJMSMessagePoller.java:279)\r\n                    at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.run(TokenBasedJMSMessagePoller.java:121)\r\n                    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\r\n                    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\r\n                    at weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\r\n    Caused by: javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call\r\n                    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:282)\r\n                    at com.sun.proxy.$Proxy163.flush(Unknown Source)\r\n                    at org.myproject.core.data.dao.impl.MyPersistenceContextImpl.flushAndClear(MyPersistenceContextImpl.java:49)\r\n                    at sun.reflect.GeneratedMethodAccessor616.invoke(Unknown Source)\r\n                    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                    at java.lang.reflect.Method.invoke(Method.java:498)\r\n                    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n                    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n                    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n                    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\r\n                    ... 28 more\r\n\r\n**My configuration looks as follows:\r\npom.xml (relevant snippets):**\r\n**for Spring:**\r\n  \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n       &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n        &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\t  \r\n**for Hibernate:**\r\n\t  \r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.1.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n           &lt;version&gt;5.2.6.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.6.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.6.Final&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n          &lt;/dependency&gt;\r\n\r\n\t  \r\n**persistence.xml (full):** (here some things have been changed but didn&#39;t help: jta-data-source has been added, xsd versions have been updated)\r\n\r\n    &lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;\r\n                 version=&quot;2.1&quot;&gt;\r\n    \r\n        &lt;persistence-unit name=&quot;MYPROJECT_PU&quot; transaction-type=&quot;JTA&quot;&gt;        \r\n    \t\t&lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n    \t\t&lt;jta-data-source&gt;myproject-ds_jndi&lt;/jta-data-source&gt;\r\n    \t\r\n    \t\t&lt;mapping-file&gt;META-INF/named-queries.xml&lt;/mapping-file&gt;\r\n            \r\n    \t\t&lt;class&gt;org.myproj.core.domain.Message&lt;/class&gt;\r\n    \r\n    \t&lt;/persistence-unit&gt;\r\n    \t\r\n    &lt;/persistence&gt;\r\n\r\n**appContext.xml (relevant snippets):** (just added one extra property in jpaProperties since the upgrade)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    \thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \thttp://www.springframework.org/schema/context\r\n    \thttp://www.springframework.org/schema/context/spring-context.xsd\r\n    \thttp://www.springframework.org/schema/tx\r\n    \thttp://www.springframework.org/schema/tx/spring-tx.xsd\r\n    \thttp://www.springframework.org/schema/jdbc\r\n    \thttp://www.springframework.org/schema/jdbc/spring-jdbc.xsd&quot;&gt;\r\n    \t\r\n    ...\r\n    \r\n    &lt;bean\r\n    \t\tclass=&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot; /&gt;\r\n    \r\n    \t&lt;bean\r\n    \t\tclass=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot; /&gt;\r\n    \r\n    \t&lt;bean\r\n    \t\tclass=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n    \t\t&lt;property name=&quot;locations&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;value&gt;classpath:configuration.properties&lt;/value&gt;\r\n    \t\t\t\t&lt;value&gt;classpath:externalized-queries.properties&lt;/value&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;jndiDataSource&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;jndiName&quot; value=&quot;${datasourceJndiName}&quot;&gt;&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;!-- Indicates a JpaVendorAdapter implementation for Hibernate EntityManager. --&gt;\r\n    \t&lt;bean id=&quot;jpaVendorAdapter&quot;\r\n    \t\tclass=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\r\n    \t\t&lt;property name=&quot;database&quot; value=&quot;${databaseVendor}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;showSql&quot; value=&quot;${showSql}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;generateDdl&quot; value=&quot;${generateDdl}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;databasePlatform&quot; value=&quot;${databaseDialect}&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;entityManagerFactory&quot;\r\n    \t\tclass=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;persistenceXmlLocation&quot; value=&quot;${persistenceXmlFileLocation}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;persistenceUnitName&quot; value=&quot;${persistenceUnitName}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;jndiDataSource&quot; /&gt;\r\n    \t\t&lt;property name=&quot;jpaVendorAdapter&quot; ref=&quot;jpaVendorAdapter&quot; /&gt;\r\n    \t\t&lt;property name=&quot;jpaProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.transaction.manager_lookup_class&quot;&gt;${transactionManagerLookupClass}&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.transaction.jta.platform&quot;&gt;org.hibernate.service.jta.platform.internal.WeblogicJtaPlatform&lt;/prop&gt; &lt;!-- this was newly added --&gt;\r\n    \t\t\t\t\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;tx:annotation-driven /&gt;\r\n    \r\n    \t&lt;tx:jta-transaction-manager /&gt;\r\n    \t\r\n    ...\r\n\r\n**Relevant snippets from the class that opens the transaction demonstrating what annotations have been used here:**\r\n\r\n    import java.sql.SQLException;\r\n    import java.util.Set;\r\n    \r\n    import javax.interceptor.Interceptors;\r\n    \r\n    import org.springframework.ejb.interceptor.SpringBeanAutowiringInterceptor;\r\n    import org.springframework.transaction.annotation.Propagation;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    \r\n    ...\r\n    \r\n    @Interceptors(SpringBeanAutowiringInterceptor.class)\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    public class DBLockingImpl implements Locking {\r\n    \r\n    @Autowired\r\n    private DataSource dataSource;\r\n\r\n\r\n\r\n\r\n**This is the class calling the entityManager (the transaction has already been opened at this point, but the exception happens when the flush method gets called on the EntityManager here):**\r\n\r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    \r\n    @Repository(value = &quot;persistenceContext&quot;)\r\n    public class PersistenceContextImpl\r\n        implements PersistenceContext {\r\n    \r\n        /**\r\n         * Instance variable for EntityManager.\r\n         */\r\n        @PersistenceContext\r\n        private EntityManager entityManager;\r\n    \r\n        @Override\r\n        public void flushAndClear() {\r\n            entityManager.flush();\r\n            entityManager.clear();\r\n        }\r\n    }\r\n\r\nSo can anybody please help me with this issue? I don&#39;t understand what&#39;s missing and why I am getting that exception. I get the impression that Spring is not connecting properly to Hibernates entity manager and that&#39;s why the exception comes, since the trasanction itself seems to be created, but whenever it tries to persist this exception flies. After all I find it weird that it is not working anymore, although it worked fine with the old versions of these frameworks. Have there been any big changes in configuration from the old versions?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"No EntityManager with actual transaction available for current thread - cannot reliably process &#39;flush&#39; call","body":"<p>Some background info: I am trying to migrate a big project from Hibernate 3.6.8 to 5.2.5 (including JPA upgrade 2.0 to 2.1), Spring 3.2.3 to 4.3.5 and am facing serious issues. The configuration has not been changed for Spring and Hibernate so far and has been working fine on the old versions, however with the upgrade problems that I can't solve myself arose.</p>\n\n<blockquote>\n  <p>The exception I'm getting is:</p>\n</blockquote>\n\n<pre><code>2017-01-16 10:15:25,635 ERROR [[ACTIVE] ExecuteThread: '15' for queue: 'weblogic.kernel.Default (self-tuning)'] org.myproject.common.messaging.BaseMDB: Code: (11702) Source: (Common) Exception caught - Exception org.springframework.dao.InvalidDataAccessApiUsageException in org.myproject.core.processing.message.MessageReceiverImpl caught\norg.springframework.dao.InvalidDataAccessApiUsageException: No EntityManager with actual transaction available for current thread - cannot reliably process 'flush' call; nested exception is javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'flush' call\n                at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:413)\n                at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)\n                at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:491)\n                at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:59)\n                at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)\n                at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:147)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n                at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\n                at com.sun.proxy.$Proxy187.flushAndClear(Unknown Source)\n                at org.myproject.core.BasePersistenceMDB.synchronizeBackend(BasePersistenceMDB.java:46)\n                at org.myproject.core.BasePersistenceMDB.onTextMessage(BasePersistenceMDB.java:32)\n                at org.myproject.common.messaging.BaseMDB.evaluateJMSMessage(BaseMDB.java:100)\n                at org.myproject.common.messaging.BaseMDB.onMessage(BaseMDB.java:51)\n                at sun.reflect.GeneratedMethodAccessor591.invoke(Unknown Source)\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.lang.reflect.Method.invoke(Method.java:498)\n                at com.bea.core.repackaged.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)\n                at com.oracle.pitchfork.intercept.MethodInvocationInvocationContext.proceed(MethodInvocationInvocationContext.java:100)\n                at com.oracle.pitchfork.intercept.JeeInterceptorInterceptor.invoke(JeeInterceptorInterceptor.java:117)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\n                at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)\n                at com.bea.core.repackaged.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)\n                at com.bea.core.repackaged.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)\n                at com.bea.core.repackaged.springframework.aop.framework.JdkDynamicAopProxy.invoke(Unknown Source)\n                at com.sun.proxy.$Proxy121.onMessage(Unknown Source)\n                at weblogic.ejb.container.internal.MDListener.execute(MDListener.java:451)\n                at weblogic.ejb.container.internal.MDListener.transactionalOnMessage(MDListener.java:375)\n                at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.processOneMessage(TokenBasedJMSMessagePoller.java:279)\n                at weblogic.ejb.container.internal.TokenBasedJMSMessagePoller.run(TokenBasedJMSMessagePoller.java:121)\n                at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:548)\n                at weblogic.work.ExecuteThread.execute(ExecuteThread.java:311)\n                at weblogic.work.ExecuteThread.run(ExecuteThread.java:263)\nCaused by: javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'flush' call\n                at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:282)\n                at com.sun.proxy.$Proxy163.flush(Unknown Source)\n                at org.myproject.core.data.dao.impl.MyPersistenceContextImpl.flushAndClear(MyPersistenceContextImpl.java:49)\n                at sun.reflect.GeneratedMethodAccessor616.invoke(Unknown Source)\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.lang.reflect.Method.invoke(Method.java:498)\n                at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\n                at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n                at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136)\n                ... 28 more\n</code></pre>\n\n<p><strong>My configuration looks as follows:\npom.xml (relevant snippets):</strong>\n<strong>for Spring:</strong></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n  &lt;/dependency&gt;\n   &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n    &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n\n<p><strong>for Hibernate:</strong></p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n        &lt;version&gt;5.0.1.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n       &lt;version&gt;5.2.6.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.2.6.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;\n        &lt;version&gt;5.2.6.Final&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n      &lt;/dependency&gt;\n</code></pre>\n\n<p><strong>persistence.xml (full):</strong> (here some things have been changed but didn't help: jta-data-source has been added, xsd versions have been updated)</p>\n\n<pre><code>&lt;persistence xmlns=\"http://xmlns.jcp.org/xml/ns/persistence\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd\"\n             version=\"2.1\"&gt;\n\n    &lt;persistence-unit name=\"MYPROJECT_PU\" transaction-type=\"JTA\"&gt;        \n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;jta-data-source&gt;myproject-ds_jndi&lt;/jta-data-source&gt;\n\n        &lt;mapping-file&gt;META-INF/named-queries.xml&lt;/mapping-file&gt;\n\n        &lt;class&gt;org.myproj.core.domain.Message&lt;/class&gt;\n\n    &lt;/persistence-unit&gt;\n\n&lt;/persistence&gt;\n</code></pre>\n\n<p><strong>appContext.xml (relevant snippets):</strong> (just added one extra property in jpaProperties since the upgrade)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:jdbc=\"http://www.springframework.org/schema/jdbc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/tx\n    http://www.springframework.org/schema/tx/spring-tx.xsd\n    http://www.springframework.org/schema/jdbc\n    http://www.springframework.org/schema/jdbc/spring-jdbc.xsd\"&gt;\n\n...\n\n&lt;bean\n        class=\"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor\" /&gt;\n\n    &lt;bean\n        class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\" /&gt;\n\n    &lt;bean\n        class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:configuration.properties&lt;/value&gt;\n                &lt;value&gt;classpath:externalized-queries.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"jndiDataSource\" class=\"org.springframework.jndi.JndiObjectFactoryBean\"&gt;\n        &lt;property name=\"jndiName\" value=\"${datasourceJndiName}\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Indicates a JpaVendorAdapter implementation for Hibernate EntityManager. --&gt;\n    &lt;bean id=\"jpaVendorAdapter\"\n        class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"&gt;\n        &lt;property name=\"database\" value=\"${databaseVendor}\" /&gt;\n        &lt;property name=\"showSql\" value=\"${showSql}\" /&gt;\n        &lt;property name=\"generateDdl\" value=\"${generateDdl}\" /&gt;\n        &lt;property name=\"databasePlatform\" value=\"${databaseDialect}\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"entityManagerFactory\"\n        class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"persistenceXmlLocation\" value=\"${persistenceXmlFileLocation}\" /&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"${persistenceUnitName}\" /&gt;\n        &lt;property name=\"dataSource\" ref=\"jndiDataSource\" /&gt;\n        &lt;property name=\"jpaVendorAdapter\" ref=\"jpaVendorAdapter\" /&gt;\n        &lt;property name=\"jpaProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.transaction.manager_lookup_class\"&gt;${transactionManagerLookupClass}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.transaction.jta.platform\"&gt;org.hibernate.service.jta.platform.internal.WeblogicJtaPlatform&lt;/prop&gt; &lt;!-- this was newly added --&gt;\n\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven /&gt;\n\n    &lt;tx:jta-transaction-manager /&gt;\n\n...\n</code></pre>\n\n<p><strong>Relevant snippets from the class that opens the transaction demonstrating what annotations have been used here:</strong></p>\n\n<pre><code>import java.sql.SQLException;\nimport java.util.Set;\n\nimport javax.interceptor.Interceptors;\n\nimport org.springframework.ejb.interceptor.SpringBeanAutowiringInterceptor;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\n...\n\n@Interceptors(SpringBeanAutowiringInterceptor.class)\n@Transactional(propagation = Propagation.REQUIRED)\npublic class DBLockingImpl implements Locking {\n\n@Autowired\nprivate DataSource dataSource;\n</code></pre>\n\n<p><strong>This is the class calling the entityManager (the transaction has already been opened at this point, but the exception happens when the flush method gets called on the EntityManager here):</strong></p>\n\n<pre><code>import javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\n\n\n@Repository(value = \"persistenceContext\")\npublic class PersistenceContextImpl\n    implements PersistenceContext {\n\n    /**\n     * Instance variable for EntityManager.\n     */\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Override\n    public void flushAndClear() {\n        entityManager.flush();\n        entityManager.clear();\n    }\n}\n</code></pre>\n\n<p>So can anybody please help me with this issue? I don't understand what's missing and why I am getting that exception. I get the impression that Spring is not connecting properly to Hibernates entity manager and that's why the exception comes, since the trasanction itself seems to be created, but whenever it tries to persist this exception flies. After all I find it weird that it is not working anymore, although it worked fine with the old versions of these frameworks. Have there been any big changes in configuration from the old versions?</p>\n"},{"tags":["java","spring","spring-boot","websocket","socket.io"],"comments":[{"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"score":0,"creation_date":1591655929,"post_id":57505589,"comment_id":110133682,"body_markdown":"similar to https://stackoverflow.com/questions/15568700/best-java-server-implementation-for-socket-io but not flagging as duplicate as this specifically mentions Spring boot","body":"similar to <a href=\"https://stackoverflow.com/questions/15568700/best-java-server-implementation-for-socket-io\" title=\"best java server implementation for socket io\">stackoverflow.com/questions/15568700/&hellip;</a> but not flagging as duplicate as this specifically mentions Spring boot"}],"answers":[{"tags":[],"owner":{"account_id":3514618,"reputation":12090,"user_id":2938364,"accept_rate":88,"display_name":"Markus Weninger"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1695294209,"creation_date":1605807120,"answer_id":64916962,"question_id":57505589,"body_markdown":"The original [Socket.IO](https://socket.io) server is designed to be used in Javascript, mostly Node.\r\n\r\nYet, there are other implementations of the Socket.IO server for other languages.\r\n\r\nFor Java, there is the [Netty-socketio](https://github.com/mrniko/netty-socketio) project, an open-source Java implementation of the Socket.IO server, based on the [Netty](https://netty.io) Java server framework (the Netty-socketio project is also suggested in [this answer](https://stackoverflow.com/a/16711894/2938364)).\r\n\r\n[This example Spring Boot application](https://github.com/jamesjieye/netty-socketio.spring) uses Netty-socketio to provide a Socket.IO server within a Spring Boot application.\r\n\r\nSo **yes**, you can use (an open-source Java implementation of) Socket.IO together with Spring Boot.","title":"Can i use Socket.io with Spring-boot?","body":"<p>The original <a href=\"https://socket.io\" rel=\"nofollow noreferrer\">Socket.IO</a> server is designed to be used in Javascript, mostly Node.</p>\n<p>Yet, there are other implementations of the Socket.IO server for other languages.</p>\n<p>For Java, there is the <a href=\"https://github.com/mrniko/netty-socketio\" rel=\"nofollow noreferrer\">Netty-socketio</a> project, an open-source Java implementation of the Socket.IO server, based on the <a href=\"https://netty.io\" rel=\"nofollow noreferrer\">Netty</a> Java server framework (the Netty-socketio project is also suggested in <a href=\"https://stackoverflow.com/a/16711894/2938364\">this answer</a>).</p>\n<p><a href=\"https://github.com/jamesjieye/netty-socketio.spring\" rel=\"nofollow noreferrer\">This example Spring Boot application</a> uses Netty-socketio to provide a Socket.IO server within a Spring Boot application.</p>\n<p>So <strong>yes</strong>, you can use (an open-source Java implementation of) Socket.IO together with Spring Boot.</p>\n"}],"owner":{"account_id":11992823,"reputation":169,"user_id":8775363,"display_name":"Maziar Karimi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34264,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"answer_count":1,"score":16,"last_activity_date":1695294209,"creation_date":1565850241,"question_id":57505589,"body_markdown":"I am gonna develop a real time game for andriod/ios and i need a server which transmit data with client real time.\r\nCan i use socket.io with Spring boot?\r\nOr if the answer is no , using websockets with Spring boot is the solution?","title":"Can i use Socket.io with Spring-boot?","body":"<p>I am gonna develop a real time game for andriod/ios and i need a server which transmit data with client real time.\nCan i use socket.io with Spring boot?\nOr if the answer is no , using websockets with Spring boot is the solution?</p>\n"},{"tags":["java","spring","admin","crud"],"answers":[{"tags":[],"owner":{"account_id":146145,"reputation":72,"user_id":5193219,"display_name":"Depanker Sharma"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1500286053,"creation_date":1500285745,"answer_id":45141269,"question_id":45105710,"body_markdown":"https://www.javatpoint.com/spring-mvc-crud-example contains an example of how to create a Spring MVC CRUD there are plenty more examples of various spring project (This particular falls under Spring MVC). \r\n\r\nThis is not a ready-made CRUD, but a way how you could quickly implement one. \r\nhttps://spring.io/guides/gs/crud-with-vaadin/ is also worth checking.\r\n\r\nAlthough there are few project like spring batch admin (For batch administration), or Spring boot admin (Monitoring spring boot applications), which provides a UI, mainly spring project provides a simple programmatically way of plugging in what&#39;s needed. \r\n\r\nIt&#39;s a plug &amp; play kind of framework which targets various aspects of an enterprise application. Chances of finding a ready-made UI app would be more on GitHub rather than a specific spring plugin. ","title":"Spring web-based admin tool with CRUD","body":"<p><a href=\"https://www.javatpoint.com/spring-mvc-crud-example\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/spring-mvc-crud-example</a> contains an example of how to create a Spring MVC CRUD there are plenty more examples of various spring project (This particular falls under Spring MVC). </p>\n\n<p>This is not a ready-made CRUD, but a way how you could quickly implement one. \n<a href=\"https://spring.io/guides/gs/crud-with-vaadin/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/crud-with-vaadin/</a> is also worth checking.</p>\n\n<p>Although there are few project like spring batch admin (For batch administration), or Spring boot admin (Monitoring spring boot applications), which provides a UI, mainly spring project provides a simple programmatically way of plugging in what's needed. </p>\n\n<p>It's a plug &amp; play kind of framework which targets various aspects of an enterprise application. Chances of finding a ready-made UI app would be more on GitHub rather than a specific spring plugin. </p>\n"},{"tags":[],"owner":{"account_id":10161183,"reputation":405,"user_id":7504603,"accept_rate":90,"display_name":"Adib Rajiwate"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500445975,"creation_date":1500445975,"answer_id":45182573,"question_id":45105710,"body_markdown":" Simple answer to your question is No spring does not provide any tool for that but spring gives you the functionalities that can reduce your work but not with zero coding.\r\n\r\n example:\r\n\r\n -  Using Spring Data JPA there is an Interface name curdRepository which \r\n takes care of the curd Operations we dont need to implement the methods \r\n for Curd Spring takes care of Curd operation.\r\n - Spring Security Provides the login configuration with the login form and logout mechanism.\r\n\r\nYou can use spring boot or just visit the https://start.spring.io/ it will initialize the spring project with the dependencies you need ","title":"Spring web-based admin tool with CRUD","body":"<p>Simple answer to your question is No spring does not provide any tool for that but spring gives you the functionalities that can reduce your work but not with zero coding.</p>\n\n<p>example:</p>\n\n<ul>\n<li>Using Spring Data JPA there is an Interface name curdRepository which \ntakes care of the curd Operations we dont need to implement the methods \nfor Curd Spring takes care of Curd operation.</li>\n<li>Spring Security Provides the login configuration with the login form and logout mechanism.</li>\n</ul>\n\n<p>You can use spring boot or just visit the <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a> it will initialize the spring project with the dependencies you need </p>\n"},{"tags":[],"owner":{"account_id":2926765,"reputation":523,"user_id":2507899,"accept_rate":100,"display_name":"Lucas Colombo"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1631991365,"creation_date":1500501671,"answer_id":45201774,"question_id":45105710,"body_markdown":"Take a look at JHipster project https://www.jhipster.tech/\r\n\r\nWith it you can create Spring Boot+Angular/React/Vue based applications. It provides some cool tools for generating CRUD entities by scaffolding.","title":"Spring web-based admin tool with CRUD","body":"<p>Take a look at JHipster project <a href=\"https://www.jhipster.tech/\" rel=\"nofollow noreferrer\">https://www.jhipster.tech/</a></p>\n<p>With it you can create Spring Boot+Angular/React/Vue based applications. It provides some cool tools for generating CRUD entities by scaffolding.</p>\n"},{"tags":[],"owner":{"account_id":270162,"reputation":7734,"user_id":559940,"accept_rate":74,"display_name":"Ailef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695291791,"creation_date":1695291791,"answer_id":77149372,"question_id":45105710,"body_markdown":"I&#39;ve recently started developing [Spring Boot Database Admin][1], which is a tool that does just what you ask. It&#39;s still in a very early stage though and it is not stable yet, but the main features are there.\r\n\r\nUnlike Bootify, it doesn&#39;t generate code for you but you just include it as a JAR and everything is detected automatically (you do need to just make some minor configuration changes).\r\n\r\n\r\n  [1]: https://github.com/aileftech/spring-boot-database-admin","title":"Spring web-based admin tool with CRUD","body":"<p>I've recently started developing <a href=\"https://github.com/aileftech/spring-boot-database-admin\" rel=\"nofollow noreferrer\">Spring Boot Database Admin</a>, which is a tool that does just what you ask. It's still in a very early stage though and it is not stable yet, but the main features are there.</p>\n<p>Unlike Bootify, it doesn't generate code for you but you just include it as a JAR and everything is detected automatically (you do need to just make some minor configuration changes).</p>\n"}],"owner":{"account_id":296506,"reputation":2368,"user_id":1079659,"display_name":"Cmyker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11508,"favorite_count":0,"down_vote_count":2,"up_vote_count":9,"accepted_answer_id":45201774,"answer_count":4,"score":7,"last_activity_date":1695291791,"creation_date":1500043223,"question_id":45105710,"body_markdown":"In PHP &amp; Symfony world there is a tool called Sonata Admin https://sonata-project.org/ based on AdminLTE template, that is all-in-one admin tool with login, menu configuration, and what is most important - database tables HTML grid CRUD generators.\r\nThe tool saves you tons of efforts by avoiding you writing boilerplate code, moreover, there might be a scenario that you would write zero code.\r\n\r\nWe need the same but for Java and Spring stack. Any recommendations?","title":"Spring web-based admin tool with CRUD","body":"<p>In PHP &amp; Symfony world there is a tool called Sonata Admin <a href=\"https://sonata-project.org/\" rel=\"noreferrer\">https://sonata-project.org/</a> based on AdminLTE template, that is all-in-one admin tool with login, menu configuration, and what is most important - database tables HTML grid CRUD generators.\nThe tool saves you tons of efforts by avoiding you writing boilerplate code, moreover, there might be a scenario that you would write zero code.</p>\n\n<p>We need the same but for Java and Spring stack. Any recommendations?</p>\n"},{"tags":["java","oracle","spring-boot","testcontainers-junit5"],"comments":[{"owner":{"account_id":2588804,"reputation":951,"user_id":2243919,"display_name":"zpavel"},"score":0,"creation_date":1694770897,"post_id":77079986,"comment_id":135937990,"body_markdown":"Hi. Create sql script init.sql with : CREATE USER OPIOWNER IDENTIFIED BY &quot;password&quot; QUOTA UNLIMITED ON USERS;\nGRANT CONNECT,RESOURCE TO OPIOWNER; Then on initialization of testcontainers add : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;component/db/init.sql&quot;)","body":"Hi. Create sql script init.sql with : CREATE USER OPIOWNER IDENTIFIED BY &quot;password&quot; QUOTA UNLIMITED ON USERS; GRANT CONNECT,RESOURCE TO OPIOWNER; Then on initialization of testcontainers add : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;component/db/init&zwnj;&#8203;.sql&quot;)"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1694784219,"post_id":77079986,"comment_id":135940531,"body_markdown":"Hi @zpavel, thanks for your attention. I tried and I get ORA-01031:insufficient privileges...","body":"Hi @zpavel, thanks for your attention. I tried and I get ORA-01031:insufficient privileges..."},{"owner":{"account_id":2588804,"reputation":951,"user_id":2243919,"display_name":"zpavel"},"score":0,"creation_date":1694873899,"post_id":77079986,"comment_id":135950175,"body_markdown":"Sorry i coulent not ediit but it was : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;init.sql&quot;). So i suppose your init.sql was loaded as well (and you modified it). After which query it shows ora-01031 error?","body":"Sorry i coulent not ediit but it was : ORACLE_OPIOWNER_CONTANINER.withInitScript(&quot;init.sql&quot;). So i suppose your init.sql was loaded as well (and you modified it). After which query it shows ora-01031 error?"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1694888591,"post_id":77079986,"comment_id":135951778,"body_markdown":"@zpavel, Yes, correct.","body":"@zpavel, Yes, correct."},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1694930904,"post_id":77079986,"comment_id":135954651,"body_markdown":"Please add the error in the question and also is there any way to reproduce the issue?","body":"Please add the error in the question and also is there any way to reproduce the issue?"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695225937,"post_id":77079986,"comment_id":135997050,"body_markdown":"@AnishB. your answer has disappeared...","body":"@AnishB. your answer has disappeared..."},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695225966,"post_id":77079986,"comment_id":135997057,"body_markdown":"Hi. I deleted my answer. I felt it was not helping you.","body":"Hi. I deleted my answer. I felt it was not helping you."},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695226019,"post_id":77079986,"comment_id":135997067,"body_markdown":"Can you tell me if you have privilege to create any account in your test container.","body":"Can you tell me if you have privilege to create any account in your test container."},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1695226114,"post_id":77079986,"comment_id":135997087,"body_markdown":"It seems I do not have any privilege","body":"It seems I do not have any privilege"},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695226181,"post_id":77079986,"comment_id":135997104,"body_markdown":"So, without privilege, you can&#39;t create a user.","body":"So, without privilege, you can&#39;t create a user."},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695226679,"post_id":77079986,"comment_id":135997202,"body_markdown":"Can you put the create user statement in init.sql and execute it to see if it works? Which version of the test containers are you using?","body":"Can you put the create user statement in init.sql and execute it to see if it works? Which version of the test containers are you using?"}],"answers":[{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695291529,"creation_date":1694936804,"answer_id":77120924,"question_id":77079986,"body_markdown":"I guess I found the issue that you are facing. Kindly go through this **Github issue** below:\r\n\r\n[[OracleContainer] Unable to execute statements which need system privileges][1]\r\n\r\n**Note:** I&#39;m not a DB Expert. \r\n\r\nBased on the information provided there, I&#39;ve formed my answer which is as follows:\r\n\r\n- For an `oracle-xe` image, now the default user and schema is now &quot;**TEST**&quot;. \r\n\r\n- I guess you won&#39;t be able to create any random user where you don&#39;t have the privileges. To overcome that, you have to use **TEST** user which is kind of acts as a super-user for test containers (Oracle Test containers uses/detects **TEST** as the default user).\r\n\r\n- So, what can I suggest is to create an **init.sql** some like this below:\r\n\r\n      CREATE USER OPIOWNER IDENTIFIED BY password;\r\n      GRANT CONNECT TO OPIOWNER;\r\n      GRANT SYSDBA TO OPIOWNER;\r\n      GRANT CREATE SESSION GRANT ANY PRIVILEGE TO OPIOWNER;\r\n      GRANT UNLIMITED TABLESPACE TO OPIOWNER;\r\n\r\n- Update **AbstractContanierBaseTest** class to some like this:\r\n\r\n\r\n\r\n \r\n\r\n        @Slf4\r\n        public class AbstractContanierBaseTest {\r\n    \r\n        static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\r\n        static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\r\n    \r\n        static {\r\n            ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\r\n            ORACLE_OPIOWNER_CONTANINER\r\n                    .withUsername(&quot;test&quot;)\r\n                    .withInitScript(&quot;init.sql&quot;);\r\n                    .usingSid();\r\n            ORACLE_OPIOWNER_CONTANINER.start();\r\n    \r\n            System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\r\n            System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\r\n            System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\r\n            System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\r\n    \r\n            ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;).withCopyFileToContainer(MountableFile.forClasspathResource(&quot;init.sql&quot;), &quot;/container-entrypoint-startdb.d/init.sql&quot;);\r\n            ORACLE_FIRMAOWNER_CONTANINER\r\n                    .withUsername(&quot;firmaowner&quot;)\r\n                    .withPassword(&quot;password&quot;)\r\n                    .withDatabaseName(&quot;FIRMAOWNER&quot;)\r\n                    .withLogConsumer(new Slf4jLogConsumer(log))\r\n                    .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\r\n                    .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\r\n                    .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\r\n                    .usingSid();\r\n            ;\r\n            ORACLE_FIRMAOWNER_CONTANINER.start();\r\n    \r\n            System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\r\n            System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\r\n            System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\r\n    \r\n        }\r\n\r\n- Now, update the create table script to this:\r\n\r\n        ALTER SESSION SET CONTAINER=&lt;&lt;NAME OF TEST CONTAINER&gt;&gt;;\r\n    \r\n        CREATE TABLE TEST.OPI_CONFLUENZA_DATI\r\n        (\r\n            &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\r\n            &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\r\n            &quot;OPI_DATADISPOSIZIONE&quot; DATE,\r\n            &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\r\n            &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\r\n            &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\r\n            &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\r\n            &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\r\n            &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\r\n            &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\r\n            &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\r\n            &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\r\n            &quot;OPI_IMPORTO&quot; NUMBER(15,3),\r\n            &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\r\n            &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\r\n         );\r\n    \r\n         ALTER TABLE TEST.OPI_CONFLUENZA_DATI\r\n         ADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\r\n\r\nSee if this changes work. That&#39;s all. Look at that github issue for more info.\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/testcontainers/testcontainers-java/issues/4615\r\n","title":"Oracle Test Container throwing SQLSyntaxErrorException: ORA-01918: user does not exist","body":"<p>I guess I found the issue that you are facing. Kindly go through this <strong>Github issue</strong> below:</p>\n<p><a href=\"https://github.com/testcontainers/testcontainers-java/issues/4615\" rel=\"nofollow noreferrer\">[OracleContainer] Unable to execute statements which need system privileges</a></p>\n<p><strong>Note:</strong> I'm not a DB Expert.</p>\n<p>Based on the information provided there, I've formed my answer which is as follows:</p>\n<ul>\n<li><p>For an <code>oracle-xe</code> image, now the default user and schema is now &quot;<strong>TEST</strong>&quot;.</p>\n</li>\n<li><p>I guess you won't be able to create any random user where you don't have the privileges. To overcome that, you have to use <strong>TEST</strong> user which is kind of acts as a super-user for test containers (Oracle Test containers uses/detects <strong>TEST</strong> as the default user).</p>\n</li>\n<li><p>So, what can I suggest is to create an <strong>init.sql</strong> some like this below:</p>\n<pre><code>CREATE USER OPIOWNER IDENTIFIED BY password;\nGRANT CONNECT TO OPIOWNER;\nGRANT SYSDBA TO OPIOWNER;\nGRANT CREATE SESSION GRANT ANY PRIVILEGE TO OPIOWNER;\nGRANT UNLIMITED TABLESPACE TO OPIOWNER;\n</code></pre>\n</li>\n<li><p>Update <strong>AbstractContanierBaseTest</strong> class to some like this:</p>\n<pre><code>  @Slf4\n  public class AbstractContanierBaseTest {\n\n  static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\n  static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\n\n  static {\n      ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\n      ORACLE_OPIOWNER_CONTANINER\n              .withUsername(&quot;test&quot;)\n              .withInitScript(&quot;init.sql&quot;);\n              .usingSid();\n      ORACLE_OPIOWNER_CONTANINER.start();\n\n      System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\n      System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\n      System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\n      System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\n\n      ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;).withCopyFileToContainer(MountableFile.forClasspathResource(&quot;init.sql&quot;), &quot;/container-entrypoint-startdb.d/init.sql&quot;);\n      ORACLE_FIRMAOWNER_CONTANINER\n              .withUsername(&quot;firmaowner&quot;)\n              .withPassword(&quot;password&quot;)\n              .withDatabaseName(&quot;FIRMAOWNER&quot;)\n              .withLogConsumer(new Slf4jLogConsumer(log))\n              .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\n              .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\n              .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\n              .usingSid();\n      ;\n      ORACLE_FIRMAOWNER_CONTANINER.start();\n\n      System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\n      System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\n      System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\n\n  }\n</code></pre>\n</li>\n<li><p>Now, update the create table script to this:</p>\n<pre><code>  ALTER SESSION SET CONTAINER=&lt;&lt;NAME OF TEST CONTAINER&gt;&gt;;\n\n  CREATE TABLE TEST.OPI_CONFLUENZA_DATI\n  (\n      &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\n      &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\n      &quot;OPI_DATADISPOSIZIONE&quot; DATE,\n      &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\n      &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\n      &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\n      &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\n      &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\n      &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\n      &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\n      &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\n      &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\n      &quot;OPI_IMPORTO&quot; NUMBER(15,3),\n      &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\n      &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\n   );\n\n   ALTER TABLE TEST.OPI_CONFLUENZA_DATI\n   ADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\n</code></pre>\n</li>\n</ul>\n<p>See if this changes work. That's all. Look at that github issue for more info.</p>\n"}],"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":274,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695291529,"creation_date":1694420532,"question_id":77079986,"body_markdown":"I am new to **Oracle Container** and I&#39;m having a test container to open 2 database connections since I have 2 datasource in my spring boot application.\r\n\r\nThis is the abstract class where I create Oracle container instances:\r\n\r\n``` lang-java\r\n@Slf4j\r\npublic class AbstractContanierBaseTest {\r\n\r\n    static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\r\n    static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\r\n\r\n    static {\r\n        ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\r\n        ORACLE_OPIOWNER_CONTANINER\r\n                .withUsername(&quot;opiowner&quot;)\r\n                .withPassword(&quot;password&quot;)\r\n                .withDatabaseName(&quot;OPIOWNER&quot;)\r\n                .withExposedPorts(1521)\r\n                .withLogConsumer(new Slf4jLogConsumer(log))\r\n                .withEnv(&quot;ORACLE_DATABASE&quot;, &quot;OPIOWNER&quot;)\r\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\r\n                .withEnv(&quot;APP_USER&quot;, &quot;opiowner&quot;)\r\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\r\n                .usingSid();\r\n        ORACLE_OPIOWNER_CONTANINER.start();\r\n\r\n        System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\r\n        System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\r\n        System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\r\n        System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\r\n\r\n        ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;);\r\n        ORACLE_FIRMAOWNER_CONTANINER\r\n                .withUsername(&quot;firmaowner&quot;)\r\n                .withPassword(&quot;password&quot;)\r\n                .withDatabaseName(&quot;FIRMAOWNER&quot;)\r\n                .withLogConsumer(new Slf4jLogConsumer(log))\r\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\r\n                .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\r\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\r\n                .usingSid();\r\n        ;\r\n        ORACLE_FIRMAOWNER_CONTANINER.start();\r\n\r\n        System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\r\n        System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\r\n        System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\r\n\r\n    }\r\n``` \r\n\r\nThis class inherited by my integration tests written in junit5.\r\n\r\nWhen executing junits an Sql script is launched before tests by means of `@Sql` annotation:\r\n\r\n``` lang-java\r\n@Sql(config = @SqlConfig(transactionManager = &quot;opiownerTransactionManager&quot;), scripts = {&quot;classpath:scripts/ddl/Recall_create_table_opiConfluenzaDati.sql&quot;, &quot;classpath:scripts/dml/Recall_opiConfluenzaDati_script.sql&quot;})\r\n```\r\n\r\nThe script is executed properly, but I receive an oracle `SqlSyntaxException` as per Question title.\r\n\r\nThis is my create table script:\r\n\r\n``` lang-sql\r\nCREATE TABLE opiowner.OPI_CONFLUENZA_DATI\r\n(\r\n    &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\r\n    &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\r\n    &quot;OPI_DATADISPOSIZIONE&quot; DATE,\r\n    &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\r\n    &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\r\n    &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\r\n    &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\r\n    &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\r\n    &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\r\n    &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\r\n    &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\r\n    &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\r\n    &quot;OPI_IMPORTO&quot; NUMBER(15,3),\r\n    &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\r\n    &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\r\n);\r\n\r\nALTER TABLE opiowner.OPI_CONFLUENZA_DATI\r\nADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\r\n```\r\n\r\nAs you may guess I need the &#39;opiowner&#39; user to be present in the database. In particular in the first instance of the Oracle container: `ORACLE_OPIOWNER` firstly.\r\n\r\n**Question:** How can I create &#39;opiowner&#39; user in a Oracle Container instance?\r\n\r\nI thought methods `withUsername` and `withPassword` would do the trick, but they do not...\r\n\r\nSo as you can see with method `withEnv` I tried to override environment variables of the Docker image, but again no way...\r\n\r\nHow to fix this issue?","title":"Oracle Test Container throwing SQLSyntaxErrorException: ORA-01918: user does not exist","body":"<p>I am new to <strong>Oracle Container</strong> and I'm having a test container to open 2 database connections since I have 2 datasource in my spring boot application.</p>\n<p>This is the abstract class where I create Oracle container instances:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\npublic class AbstractContanierBaseTest {\n\n    static final OracleContainer ORACLE_OPIOWNER_CONTANINER;\n    static final OracleContainer ORACLE_FIRMAOWNER_CONTANINER;\n\n    static {\n        ORACLE_OPIOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:21-slim&quot;);\n        ORACLE_OPIOWNER_CONTANINER\n                .withUsername(&quot;opiowner&quot;)\n                .withPassword(&quot;password&quot;)\n                .withDatabaseName(&quot;OPIOWNER&quot;)\n                .withExposedPorts(1521)\n                .withLogConsumer(new Slf4jLogConsumer(log))\n                .withEnv(&quot;ORACLE_DATABASE&quot;, &quot;OPIOWNER&quot;)\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\n                .withEnv(&quot;APP_USER&quot;, &quot;opiowner&quot;)\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\n                .usingSid();\n        ORACLE_OPIOWNER_CONTANINER.start();\n\n        System.setProperty(&quot;spring.datasource.driver-class-name&quot;, ORACLE_OPIOWNER_CONTANINER.getDriverClassName());\n        System.setProperty(&quot;spring.datasource.url&quot;, ORACLE_OPIOWNER_CONTANINER.getJdbcUrl());\n        System.setProperty(&quot;spring.datasource.username&quot;, ORACLE_OPIOWNER_CONTANINER.getUsername());\n        System.setProperty(&quot;spring.datasource.password&quot;, ORACLE_OPIOWNER_CONTANINER.getPassword());\n\n        ORACLE_FIRMAOWNER_CONTANINER = new OracleContainer(&quot;gvenzl/oracle-xe:11-slim&quot;);\n        ORACLE_FIRMAOWNER_CONTANINER\n                .withUsername(&quot;firmaowner&quot;)\n                .withPassword(&quot;password&quot;)\n                .withDatabaseName(&quot;FIRMAOWNER&quot;)\n                .withLogConsumer(new Slf4jLogConsumer(log))\n                .withEnv(&quot;ORACLE_PASSWORD&quot;, &quot;password&quot;)\n                .withEnv(&quot;APP_USER&quot;, &quot;firmaowner&quot;)\n                .withEnv(&quot;APP_USER_PASSWORD&quot;, &quot;password&quot;)\n                .usingSid();\n        ;\n        ORACLE_FIRMAOWNER_CONTANINER.start();\n\n        System.setProperty(&quot;spring.second-datasource.url&quot;, ORACLE_FIRMAOWNER_CONTANINER.getJdbcUrl());\n        System.setProperty(&quot;spring.second-datasource.username&quot;, ORACLE_FIRMAOWNER_CONTANINER.getUsername());\n        System.setProperty(&quot;spring.second-datasource.password&quot;, ORACLE_FIRMAOWNER_CONTANINER.getPassword());\n\n    }\n</code></pre>\n<p>This class inherited by my integration tests written in junit5.</p>\n<p>When executing junits an Sql script is launched before tests by means of <code>@Sql</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Sql(config = @SqlConfig(transactionManager = &quot;opiownerTransactionManager&quot;), scripts = {&quot;classpath:scripts/ddl/Recall_create_table_opiConfluenzaDati.sql&quot;, &quot;classpath:scripts/dml/Recall_opiConfluenzaDati_script.sql&quot;})\n</code></pre>\n<p>The script is executed properly, but I receive an oracle <code>SqlSyntaxException</code> as per Question title.</p>\n<p>This is my create table script:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE opiowner.OPI_CONFLUENZA_DATI\n(\n    &quot;OPI_ANNO_EMISSIONE_TITOLO&quot; NUMBER(4,0),\n    &quot;OPI_TIPOLOGIADISPOSIZIONE&quot; VARCHAR2(11),\n    &quot;OPI_DATADISPOSIZIONE&quot; DATE,\n    &quot;OPI_ID_DISPOSIZIONE&quot; NUMBER(10,0) NOT NULL,\n    &quot;OPI_NUM_TITOLO&quot; NUMBER(9,0),\n    &quot;OPI_PROG_QUOTA&quot; NUMBER(15,0),\n    &quot;OPI_TIPO_COD_BENEF&quot; VARCHAR2(2),\n    &quot;OPI_CODICE_BENEF&quot; VARCHAR2(16),\n    &quot;OPI_TIPO_RECORD&quot; VARCHAR2(11),\n    &quot;OPI_SPECIE_TITOLO&quot; VARCHAR2(2),\n    &quot;OPI_TIPO_SPESA&quot; VARCHAR2(5),\n    &quot;OPI_COD_ENTE&quot; VARCHAR2(15),\n    &quot;OPI_IMPORTO&quot; NUMBER(15,3),\n    &quot;OPI_NOME_FILE&quot; VARCHAR2(100),\n    &quot;OPI_ORDINANTE&quot; VARCHAR2(100)\n);\n\nALTER TABLE opiowner.OPI_CONFLUENZA_DATI\nADD CONSTRAINT OPI_CONFLUENZA_DATI_PK PRIMARY KEY (&quot;OPI_TIPOLOGIADISPOSIZIONE&quot;, &quot;OPI_DATADISPOSIZIONE&quot;, &quot;OPI_ID_DISPOSIZIONE&quot;);\n</code></pre>\n<p>As you may guess I need the 'opiowner' user to be present in the database. In particular in the first instance of the Oracle container: <code>ORACLE_OPIOWNER</code> firstly.</p>\n<p><strong>Question:</strong> How can I create 'opiowner' user in a Oracle Container instance?</p>\n<p>I thought methods <code>withUsername</code> and <code>withPassword</code> would do the trick, but they do not...</p>\n<p>So as you can see with method <code>withEnv</code> I tried to override environment variables of the Docker image, but again no way...</p>\n<p>How to fix this issue?</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1576497016,"post_id":59354878,"comment_id":104906672,"body_markdown":"The message seemed to be saying that your download does not work ..","body":"The message seemed to be saying that your download does not work .."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":1,"creation_date":1576497787,"post_id":59354878,"comment_id":104907068,"body_markdown":"Does Maven command line build work?","body":"Does Maven command line build work?"},{"owner":{"account_id":6931141,"reputation":503,"user_id":5320602,"display_name":"The Sun"},"score":1,"creation_date":1576565598,"post_id":59354878,"comment_id":104930928,"body_markdown":"Thank @Andrey! I installed by maven, and then invalidate caches and restart IntelliJ. The plugin worked.","body":"Thank @Andrey! I installed by maven, and then invalidate caches and restart IntelliJ. The plugin worked."}],"answers":[{"tags":[],"owner":{"account_id":6931141,"reputation":503,"user_id":5320602,"display_name":"The Sun"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1576568627,"creation_date":1576566184,"answer_id":59369106,"question_id":59354878,"body_markdown":"I fixed this issue, I do:\r\n\r\n - I installed maven-surefire-plugin version 2.22.2 successfully by\r\n   maven command line: mvn install. It downloaded the plugin but\r\n   IntelliJ still has the error.  \r\n - And then I tried to invalidate caches and restart IntelliJ, it\r\n   worked.\r\n\r\nThanks @Andrey for the great suggestion!","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>I fixed this issue, I do:</p>\n\n<ul>\n<li>I installed maven-surefire-plugin version 2.22.2 successfully by\nmaven command line: mvn install. It downloaded the plugin but\nIntelliJ still has the error.  </li>\n<li>And then I tried to invalidate caches and restart IntelliJ, it\nworked.</li>\n</ul>\n\n<p>Thanks @Andrey for the great suggestion!</p>\n"},{"tags":[],"owner":{"account_id":10317284,"reputation":518,"user_id":10130045,"display_name":"Daniel Bentes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646395069,"creation_date":1646395069,"answer_id":71351071,"question_id":59354878,"body_markdown":"my solution was to add the dependency, but to stay organized, I added it as test scope\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.22.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>my solution was to add the dependency, but to stay organized, I added it as test scope</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.22.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22355702,"reputation":1,"user_id":19256703,"display_name":"Vladimir Petrovsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695291264,"creation_date":1695291264,"answer_id":77149296,"question_id":59354878,"body_markdown":"I tried to add dependency org.apache.maven.plugins and it works.","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>I tried to add dependency org.apache.maven.plugins and it works.</p>\n"}],"owner":{"account_id":6931141,"reputation":503,"user_id":5320602,"display_name":"The Sun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28249,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":59369106,"answer_count":3,"score":18,"last_activity_date":1695291264,"creation_date":1576492638,"question_id":59354878,"body_markdown":"I tried to migrate to java 11. But when I change the version of plugin maven-surefire-plugin to 2.22.2 that supports java 11, maven or IntelliJ can not find it:\r\n\r\n![enter image description here][1] \r\n\r\n\r\nI tried with other versions &gt;= 2.20, but had same error. \r\nI tried to fix it:\r\n\r\n 1. Firstly, invalidate caches and restart IntelliJ, then reimport maven. But still error.\r\n 2. I deleted all directories in ~/.m2/repository/org/apache/maven/plugins, and then reimport maven. But maven imported plugin maven-surefire-plugin version 2.19.1 automatically, not imported version 2.22.2 (:\r\n\r\n![enter image description here][2]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/H0Yrx.png\r\n  [2]: https://i.stack.imgur.com/n0Pik.png\r\n\r\n * Update: I installed maven-surefire-plugin version 2.22.2 successfully by maven command line: **mvn install**. It downloaded the plugin but IntelliJ still has the error. I tried to invalidate caches and restart IntelliJ, it worked.\r\n\r\nThanks @Andrey for the great suggestion!","title":"How to fix error not found plugin maven-surefire-plugin &gt;= 2.20 on IntelliJ","body":"<p>I tried to migrate to java 11. But when I change the version of plugin maven-surefire-plugin to 2.22.2 that supports java 11, maven or IntelliJ can not find it:</p>\n\n<p><img src=\"https://i.stack.imgur.com/H0Yrx.png\" alt=\"enter image description here\"> </p>\n\n<p>I tried with other versions >= 2.20, but had same error. \nI tried to fix it:</p>\n\n<ol>\n<li>Firstly, invalidate caches and restart IntelliJ, then reimport maven. But still error.</li>\n<li>I deleted all directories in ~/.m2/repository/org/apache/maven/plugins, and then reimport maven. But maven imported plugin maven-surefire-plugin version 2.19.1 automatically, not imported version 2.22.2 (:</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/n0Pik.png\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>Update: I installed maven-surefire-plugin version 2.22.2 successfully by maven command line: <strong>mvn install</strong>. It downloaded the plugin but IntelliJ still has the error. I tried to invalidate caches and restart IntelliJ, it worked.</li>\n</ul>\n\n<p>Thanks @Andrey for the great suggestion!</p>\n"},{"tags":["java","realm","realm-list"],"answers":[{"tags":[],"owner":{"account_id":8445215,"reputation":11578,"user_id":6336139,"display_name":"T. Claverie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1463395304,"creation_date":1463395304,"answer_id":37251985,"question_id":37250987,"body_markdown":"RealmResults&amp;lt;E&amp;gt; implements the Iterable&amp;lt;E&amp;gt; interface, so you can iterate with:\r\n\r\n    for (E e : realmResults) {\r\n        // Do stuff\r\n    }\r\n\r\nIf this does not answer the question, then please precise it and add a sample of code.","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>RealmResults&lt;E&gt; implements the Iterable&lt;E&gt; interface, so you can iterate with:</p>\n\n<pre><code>for (E e : realmResults) {\n    // Do stuff\n}\n</code></pre>\n\n<p>If this does not answer the question, then please precise it and add a sample of code.</p>\n"},{"tags":[],"owner":{"account_id":6679130,"reputation":553,"user_id":5152885,"display_name":"fierce_bunny"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1482419155,"creation_date":1482419155,"answer_id":41286106,"question_id":37250987,"body_markdown":"All fetches are lazy in Realm, and the data is never copied. So if you want to get current data from RealmResults, you must call realm.copyFromRealm(results).\r\n\r\n    public List&lt;Model&gt; getModelList() {\r\n        List&lt;Model&gt; list = new ArrayList&lt;&gt;();\r\n        Realm realm;\r\n        try {\r\n            realm = Realm.getDefaultInstance();\r\n            RealmResults&lt;Model&gt; results = realm\r\n                    .where(Model.class)\r\n                    .findAll();\r\n            list.addAll(realm.copyFromRealm(results));\r\n        } finally {\r\n            if (realm != null) {\r\n                realm.close();\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n    ","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>All fetches are lazy in Realm, and the data is never copied. So if you want to get current data from RealmResults, you must call realm.copyFromRealm(results).</p>\n\n<pre><code>public List&lt;Model&gt; getModelList() {\n    List&lt;Model&gt; list = new ArrayList&lt;&gt;();\n    Realm realm;\n    try {\n        realm = Realm.getDefaultInstance();\n        RealmResults&lt;Model&gt; results = realm\n                .where(Model.class)\n                .findAll();\n        list.addAll(realm.copyFromRealm(results));\n    } finally {\n        if (realm != null) {\n            realm.close();\n        }\n    }\n    return list;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21006588,"reputation":1,"user_id":15436243,"display_name":"Terio dev"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677871466,"creation_date":1677871466,"answer_id":75631130,"question_id":37250987,"body_markdown":"    Realm realm = Realm.getDefaultInstance();\r\n            realm.where(Object.class)\r\n                    .findAllAsync()\r\n                    .addChangeListener(list -&gt; {\r\n                       List&lt;Object&gt; listObjects = realm.copyFromRealm(list);\r\n                    });","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<pre><code>Realm realm = Realm.getDefaultInstance();\n        realm.where(Object.class)\n                .findAllAsync()\n                .addChangeListener(list -&gt; {\n                   List&lt;Object&gt; listObjects = realm.copyFromRealm(list);\n                });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24062299,"reputation":1,"user_id":18039360,"display_name":"Renzo Sampietro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290983,"creation_date":1694958443,"answer_id":77122080,"question_id":37250987,"body_markdown":"kotlin version used in my app :\r\n\r\n    /**\r\n     * convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;\r\n     * REFER to [stackoverflow](https://stackoverflow.com/questions/37250987/how-to-convert-realmresultsmodel-to-arraylistmodel)\r\n     * answer of [DH28](https://stackoverflow.com/users/5152885/dh28)\r\n     *\r\n     * @param realm realm\r\n     * @param results RealmResults&lt;Model&gt; to convert\r\n     * @return resultsList List&lt;Model&gt; converted\r\n    */\r\n    fun getResultsList(\r\n        realm: Realm,\r\n        results: RealmResults&lt;Model&gt;?\r\n    ): MutableList&lt;Model&gt; {\r\n        val resultsList: MutableList&lt;Model&gt; = ArrayList()\r\n        resultsList.addAll(realm.copyFromRealm(results!!))\r\n        return resultsList\r\n    }\r\n\r\n\r\n\r\nsee also [www.mongodb.com][1] method \r\n\r\n    copyFromRealm(Iterable&lt;E&gt; realmObjects)\r\n\r\n    \r\n\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/realm-sdks/java/10.0.1/io/realm/Realm.html","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>kotlin version used in my app :</p>\n<pre><code>/**\n * convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;\n * REFER to [stackoverflow](https://stackoverflow.com/questions/37250987/how-to-convert-realmresultsmodel-to-arraylistmodel)\n * answer of [DH28](https://stackoverflow.com/users/5152885/dh28)\n *\n * @param realm realm\n * @param results RealmResults&lt;Model&gt; to convert\n * @return resultsList List&lt;Model&gt; converted\n*/\nfun getResultsList(\n    realm: Realm,\n    results: RealmResults&lt;Model&gt;?\n): MutableList&lt;Model&gt; {\n    val resultsList: MutableList&lt;Model&gt; = ArrayList()\n    resultsList.addAll(realm.copyFromRealm(results!!))\n    return resultsList\n}\n</code></pre>\n<p>see also <a href=\"https://www.mongodb.com/docs/realm-sdks/java/10.0.1/io/realm/Realm.html\" rel=\"nofollow noreferrer\">www.mongodb.com</a> method</p>\n<pre><code>copyFromRealm(Iterable&lt;E&gt; realmObjects)\n</code></pre>\n"}],"owner":{"account_id":6652231,"reputation":5354,"user_id":5133852,"accept_rate":82,"display_name":"Vassily"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13066,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":41286106,"answer_count":4,"score":8,"last_activity_date":1695290983,"creation_date":1463391986,"question_id":37250987,"body_markdown":"When I use realm.where(Model.class) it returns RealmResults&lt;Model&gt; and list item&#39;s fields are empty. How to convert queryset to readable ArrayList or iterate over RealmResults to get actual data from objects in DB?","title":"How to convert RealmResults&lt;Model&gt; to ArrayList&lt;Model&gt;?","body":"<p>When I use realm.where(Model.class) it returns RealmResults and list item's fields are empty. How to convert queryset to readable ArrayList or iterate over RealmResults to get actual data from objects in DB?</p>\n"},{"tags":["java","sql","apache-camel"],"owner":{"account_id":24503238,"reputation":51,"user_id":18418577,"display_name":"Beerus239"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695290670,"creation_date":1695290670,"question_id":77149215,"body_markdown":"I&#39;m currently building a Spring Boot application which runs multiple select queries. From my understanding the output of a select query is in the form of a map. I want to make the output viewable from my console, but it&#39;s not working. Not sure if something is going wrong in my route or that my Map is not defined correctly. The last run it gave me the following exception : cannot be cast to class java.util.HashMap (org.springframework.util.LinkedCaseInsensitiveMap is in unnamed module of loader\r\n\r\nThis is the route:\r\n\r\n        @Override\r\n        public void configure() throws Exception {\r\n            from(&quot;timer:Timer?period=60000&quot;)\r\n                    //.setHeader(&quot;CamelSqlQuery&quot;, constant(selectBridgeQuery))\r\n                    .routeId(&quot;test route&quot;)\r\n                    .to(&quot;sql:select * from basetimestamps?dataSource=#dataSource&quot;)\r\n                    .bean(databaseStorage, &quot;monitor&quot;)\r\n                    .to(&quot;log:result&quot;)\r\n                    .log(LoggingLevel.INFO,&quot;Output: ${body}&quot;);\r\n        }\r\n    }\r\n\r\nAnd this is the map:\r\n\r\n    @Component\r\n    public class DatabaseStorage {\r\n    \r\n        public void monitor(Exchange exchange) throws Exception {\r\n            List&lt;HashMap&gt; out = (ArrayList&lt;HashMap&gt;) exchange.getIn().getBody();\r\n    \r\n            try{\r\n                for(HashMap outContent:out){\r\n                    String message = outContent.get(&quot;output_obj&quot;).toString();\r\n    \r\n                    System.out.println(message);\r\n                }\r\n            }catch(Exception e){\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    }","title":"How to view this sql select query with a map with Apache Camel?","body":"<p>I'm currently building a Spring Boot application which runs multiple select queries. From my understanding the output of a select query is in the form of a map. I want to make the output viewable from my console, but it's not working. Not sure if something is going wrong in my route or that my Map is not defined correctly. The last run it gave me the following exception : cannot be cast to class java.util.HashMap (org.springframework.util.LinkedCaseInsensitiveMap is in unnamed module of loader</p>\n<p>This is the route:</p>\n<pre><code>    @Override\n    public void configure() throws Exception {\n        from(&quot;timer:Timer?period=60000&quot;)\n                //.setHeader(&quot;CamelSqlQuery&quot;, constant(selectBridgeQuery))\n                .routeId(&quot;test route&quot;)\n                .to(&quot;sql:select * from basetimestamps?dataSource=#dataSource&quot;)\n                .bean(databaseStorage, &quot;monitor&quot;)\n                .to(&quot;log:result&quot;)\n                .log(LoggingLevel.INFO,&quot;Output: ${body}&quot;);\n    }\n}\n</code></pre>\n<p>And this is the map:</p>\n<pre><code>@Component\npublic class DatabaseStorage {\n\n    public void monitor(Exchange exchange) throws Exception {\n        List&lt;HashMap&gt; out = (ArrayList&lt;HashMap&gt;) exchange.getIn().getBody();\n\n        try{\n            for(HashMap outContent:out){\n                String message = outContent.get(&quot;output_obj&quot;).toString();\n\n                System.out.println(message);\n            }\n        }catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","tomcat"],"comments":[{"owner":{"account_id":28330620,"reputation":58,"user_id":21664963,"display_name":"bdev"},"score":0,"creation_date":1695320885,"post_id":77149191,"comment_id":136012352,"body_markdown":"Can you try defining a Servlet Filter and catch the exception?","body":"Can you try defining a Servlet Filter and catch the exception?"}],"owner":{"account_id":22887919,"reputation":1,"user_id":17028498,"display_name":"Kairos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695290665,"creation_date":1695290416,"question_id":77149191,"body_markdown":"I am getting http 400 error when the header exceeds the limit, I want to change it as http 431. Is there any way to modify the response? \r\n\r\n```INFO: Error parsing HTTP request header\r\nNote: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\r\njava.lang. IllegalArgumentException: Request header is too large\r\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:512)\r\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:501)\r\nat org.apache.coyote.http11.InternalInputBuffer.parseRequestLine(InternalInputBuffer.java:171)\r\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:996)\r\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:623)\r\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:318)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\r\nat java.util.concurrent.ThreadPoolExecutorSWorker.run(ThreadPoolExecutor.java:603)\r\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\nat java. lang. Thread. run(Thread. java: 722```\r\n\r\n\r\nhow to change the response status code as http 431. Is there any way to modify the response status code and body? ","title":"How to customise the error response from spring-boot app for Error parsing HTTP request header","body":"<p>I am getting http 400 error when the header exceeds the limit, I want to change it as http 431. Is there any way to modify the response?</p>\n<pre><code>Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\njava.lang. IllegalArgumentException: Request header is too large\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:512)\nat org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:501)\nat org.apache.coyote.http11.InternalInputBuffer.parseRequestLine(InternalInputBuffer.java:171)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:996)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:623)\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:318)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\nat java.util.concurrent.ThreadPoolExecutorSWorker.run(ThreadPoolExecutor.java:603)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java. lang. Thread. run(Thread. java: 722```\n\n\nhow to change the response status code as http 431. Is there any way to modify the response status code and body? \n</code></pre>\n"},{"tags":["java","selenium-webdriver","automated-tests","selenium-firefoxdriver"],"answers":[{"tags":[],"owner":{"account_id":25717722,"reputation":10119,"user_id":19475185,"display_name":"Barry the Platipus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290610,"creation_date":1695290610,"answer_id":77149209,"question_id":77148082,"body_markdown":"You should also add the following prefs:\r\n\r\n    ffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf, application/zip, application/octet-stream,application/, text/octet-stream, application/x-gzip, application/x-tar, application/xml, text/plain&quot;);\r\n    ffop.addPreference(&quot;browser.download.folderList&quot;, 2);\r\n    ffop.addPreference(&quot;browser.helperApps.alwaysAsk.force&quot;, false);\r\n    ffop.addPreference(&quot;browser.download.manager.showWhenStarting&quot;, false);","title":"Downloading PDF in Selenium 4 Firefox opens a new tab","body":"<p>You should also add the following prefs:</p>\n<pre><code>ffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf, application/zip, application/octet-stream,application/, text/octet-stream, application/x-gzip, application/x-tar, application/xml, text/plain&quot;);\nffop.addPreference(&quot;browser.download.folderList&quot;, 2);\nffop.addPreference(&quot;browser.helperApps.alwaysAsk.force&quot;, false);\nffop.addPreference(&quot;browser.download.manager.showWhenStarting&quot;, false);\n</code></pre>\n"}],"owner":{"account_id":29480367,"reputation":11,"user_id":22591289,"display_name":"WarzoneSpecialist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695290610,"creation_date":1695281626,"question_id":77148082,"body_markdown":"I am trying to change the version of a Selenium Project from 3 to 4. The issue that I am facing is that after downloading a PDF using Firefox, the PDF is opened in a new tab, and I do not wish for this.\r\nI have set the capabilities that were supposed to handle this, but it still does not work.\r\nThe language is Java, I am using Selenium 4.12.0, firefox version is 116.\r\n```\r\nFirefox ffop = new FirefoxOptions();\r\nffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf&quot;);\r\nffop.addPreference(&quot;pdfjs.disabled&quot;, true);\r\nffop.addPreference(&quot;browser.download.panel.shown&quot;, false);\r\nffop.addPreference(&quot;useAutomationExtension&quot;, false);\r\nffop.addPreference( &quot;plugins.always_open_pdf_externally&quot;, false);\r\nffop.addPreference(&quot;pdfjs.firstRun&quot;, false);\r\nffop.addPreference(&quot;plugin.disable_full_page_plugin_for_types&quot;, &quot;application/pdf,application/vnd.adobe.xfdf,application/vnd.fdf,application/vnd.adobe.xdp+xml&quot;);\r\nffop.addPreference(&quot;plugin.scan.Acrobat&quot;, &quot;99.0&quot;);\r\nffop.addPreference(&quot;plugin.scan.plid.all&quot;, false);\r\n```\r\nI am passing the options as this: \r\n```\r\nFirefoxOptions firefoxOptions = new FirefoxOptions();\r\nstatic Map&lt;String, Object&gt; capabilities = new HashMap&lt;&gt;();\r\ncapabilities.put(&quot;moz:firefoxOptions&quot;, ffop);\r\nfirefoxOptions.setCapability(&quot;cloud:options&quot;,capabilities);\r\n\r\nremoteWebDriver = new RemoteWebDriver(url, firefoxOptions);\r\n```\r\nAny help is welcome. \r\nThank you. \r\n","title":"Downloading PDF in Selenium 4 Firefox opens a new tab","body":"<p>I am trying to change the version of a Selenium Project from 3 to 4. The issue that I am facing is that after downloading a PDF using Firefox, the PDF is opened in a new tab, and I do not wish for this.\nI have set the capabilities that were supposed to handle this, but it still does not work.\nThe language is Java, I am using Selenium 4.12.0, firefox version is 116.</p>\n<pre><code>Firefox ffop = new FirefoxOptions();\nffop.addPreference(&quot;browser.helperApps.neverAsk.saveToDisk&quot;, &quot;application/pdf&quot;);\nffop.addPreference(&quot;pdfjs.disabled&quot;, true);\nffop.addPreference(&quot;browser.download.panel.shown&quot;, false);\nffop.addPreference(&quot;useAutomationExtension&quot;, false);\nffop.addPreference( &quot;plugins.always_open_pdf_externally&quot;, false);\nffop.addPreference(&quot;pdfjs.firstRun&quot;, false);\nffop.addPreference(&quot;plugin.disable_full_page_plugin_for_types&quot;, &quot;application/pdf,application/vnd.adobe.xfdf,application/vnd.fdf,application/vnd.adobe.xdp+xml&quot;);\nffop.addPreference(&quot;plugin.scan.Acrobat&quot;, &quot;99.0&quot;);\nffop.addPreference(&quot;plugin.scan.plid.all&quot;, false);\n</code></pre>\n<p>I am passing the options as this:</p>\n<pre><code>FirefoxOptions firefoxOptions = new FirefoxOptions();\nstatic Map&lt;String, Object&gt; capabilities = new HashMap&lt;&gt;();\ncapabilities.put(&quot;moz:firefoxOptions&quot;, ffop);\nfirefoxOptions.setCapability(&quot;cloud:options&quot;,capabilities);\n\nremoteWebDriver = new RemoteWebDriver(url, firefoxOptions);\n</code></pre>\n<p>Any help is welcome.\nThank you.</p>\n"},{"tags":["java","spring","mockmvc"],"answers":[{"tags":[],"owner":{"account_id":12241772,"reputation":129,"user_id":8934639,"display_name":"Chedva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290455,"creation_date":1695290455,"answer_id":77149195,"question_id":77149101,"body_markdown":"Well ChatGPT won...\r\nthis works:\r\n```\r\n@Test\r\npublic void test() throws Exception {\r\n    final MyRequest request = MyRequest.builder()\r\n            .field(&quot;bla&quot;)\r\n            .build();\r\n\r\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .content(getObjectMapper().writeValueAsString(request)))\r\n            .andExpectAll(status().isOk(),\r\n                    header().exists(HttpHeaders.CONTENT_DISPOSITION),\r\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\r\n            .andReturn()\r\n            .getResponse();\r\n    \r\n    System.out.println(res);\r\n    assertTrue(res.getHeader(HttpHeaders.CONTENT_DISPOSITION).matches(&quot;prefix(.*?)suffix&quot;));\r\n    }\r\n```","title":"How to check header regex in response with Spring MockMvc","body":"<p>Well ChatGPT won...\nthis works:</p>\n<pre><code>@Test\npublic void test() throws Exception {\n    final MyRequest request = MyRequest.builder()\n            .field(&quot;bla&quot;)\n            .build();\n\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(getObjectMapper().writeValueAsString(request)))\n            .andExpectAll(status().isOk(),\n                    header().exists(HttpHeaders.CONTENT_DISPOSITION),\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\n            .andReturn()\n            .getResponse();\n    \n    System.out.println(res);\n    assertTrue(res.getHeader(HttpHeaders.CONTENT_DISPOSITION).matches(&quot;prefix(.*?)suffix&quot;));\n    }\n</code></pre>\n"}],"owner":{"account_id":12241772,"reputation":129,"user_id":8934639,"display_name":"Chedva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695290455,"creation_date":1695289853,"question_id":77149101,"body_markdown":"I have the an API that should return a response containing the header `HttpHeaders.CONTENT_DISPOSITION` with a value that should match the regex `&quot;prefix(.*?)suffix&quot;`.\r\n\r\nMy test:\r\n```\r\n@Test\r\npublic void test() throws Exception {\r\n    final MyRequest request = MyRequest.builder()\r\n            .field(&quot;bla&quot;)\r\n            .build();\r\n\r\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .content(getObjectMapper().writeValueAsString(request)))\r\n            .andExpectAll(status().isOk(),\r\n                    header().string(HttpHeaders.CONTENT_DISPOSITION, matches(&quot;prefix(.*?)suffix&quot;)),\r\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\r\n            .andReturn()\r\n            .getResponse();\r\n        System.out.println(res);\r\n    }\r\n```\r\nWhen running it I&#39;m getting this error: `You cannot use argument matchers outside of verification or stubbing.`\r\n\r\nAny idea how can I check the header CONTENT_DISPOSITION?","title":"How to check header regex in response with Spring MockMvc","body":"<p>I have the an API that should return a response containing the header <code>HttpHeaders.CONTENT_DISPOSITION</code> with a value that should match the regex <code>&quot;prefix(.*?)suffix&quot;</code>.</p>\n<p>My test:</p>\n<pre><code>@Test\npublic void test() throws Exception {\n    final MyRequest request = MyRequest.builder()\n            .field(&quot;bla&quot;)\n            .build();\n\n    var res = mockMvc.perform(post(&quot;my-uri&quot;)\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(getObjectMapper().writeValueAsString(request)))\n            .andExpectAll(status().isOk(),\n                    header().string(HttpHeaders.CONTENT_DISPOSITION, matches(&quot;prefix(.*?)suffix&quot;)),\n                    header().string(HttpHeaders.CONTENT_TYPE, &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;))\n            .andReturn()\n            .getResponse();\n        System.out.println(res);\n    }\n</code></pre>\n<p>When running it I'm getting this error: <code>You cannot use argument matchers outside of verification or stubbing.</code></p>\n<p>Any idea how can I check the header CONTENT_DISPOSITION?</p>\n"},{"tags":["java","java-native-interface","free"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1695290840,"post_id":77148675,"comment_id":136006063,"body_markdown":"By `String`, do you mean `java.lang.String` or not?","body":"By <code>String</code>, do you mean <code>java.lang.String</code> or not?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1695291060,"post_id":77148675,"comment_id":136006111,"body_markdown":"Impossible to anwserwithout seeing the JNI code concerned.","body":"Impossible to anwserwithout seeing the JNI code concerned."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1695301119,"post_id":77148675,"comment_id":136008122,"body_markdown":"Unless the native methods go out of their way to do the non-obvious thing, it all results with the fields holding references to JVM objects, just as they would in a normal java class.","body":"Unless the native methods go out of their way to do the non-obvious thing, it all results with the fields holding references to JVM objects, just as they would in a normal java class."}],"answers":[{"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695290294,"creation_date":1695290294,"answer_id":77149163,"question_id":77148675,"body_markdown":"In my experience, the Java-wrapper object for the native object is garbage-collected as usual, however native code must do its own memory management. Let&#39;s use the OpenCV library as an example, because I&#39;m familiar with it:\r\n\r\nOpenCV has `Mat` objects which usually represents an image loaded into memory (but that is irrelevant for this example). A `Mat` objects holds its image data in native memory, but it also has a wrapper object in Java-memory so-that Java code can interact with it. The Java-wrapper is garbage-collected as soon as it goes out of scope, but for the native memory to be freed, the programmer needs to explicitly call `mat.release()`. This, however, introduces all manual memory management bugs back into Java:\r\n\r\n- Memory leak if you forget to call `mat.release()`\r\n- Use-after-free if you call `mat.release() and then attempt to do something with it again\r\n\r\nSo, with my limited experience, I would say that the native code needs to offer a method that frees the native memory (c.f. `Mat.release()`) and Java code needs to call that method explicitly.","title":"Do java programmers need to deallocate memory for jni object","body":"<p>In my experience, the Java-wrapper object for the native object is garbage-collected as usual, however native code must do its own memory management. Let's use the OpenCV library as an example, because I'm familiar with it:</p>\n<p>OpenCV has <code>Mat</code> objects which usually represents an image loaded into memory (but that is irrelevant for this example). A <code>Mat</code> objects holds its image data in native memory, but it also has a wrapper object in Java-memory so-that Java code can interact with it. The Java-wrapper is garbage-collected as soon as it goes out of scope, but for the native memory to be freed, the programmer needs to explicitly call <code>mat.release()</code>. This, however, introduces all manual memory management bugs back into Java:</p>\n<ul>\n<li>Memory leak if you forget to call <code>mat.release()</code></li>\n<li>Use-after-free if you call `mat.release() and then attempt to do something with it again</li>\n</ul>\n<p>So, with my limited experience, I would say that the native code needs to offer a method that frees the native memory (c.f. <code>Mat.release()</code>) and Java code needs to call that method explicitly.</p>\n"}],"owner":{"account_id":319461,"reputation":7386,"user_id":637242,"accept_rate":88,"display_name":"Juneyoung Oh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695290294,"creation_date":1695286618,"question_id":77148675,"body_markdown":"There is a class using JNI. Some code like below\r\n\r\n``` java\r\npublic class JniUser {\r\n\tprivate String name;\r\n\tprivate int age;\r\n\tpublic native int getAge();\r\n\tpublic native String getName();\r\n}\r\n```\r\n\r\nIn native code, set name and age fields. As far as I know Garbage collector will collect no referenced java objects. But in even in this case, GC can detect this object is target of GC or not?\r\n\r\nI question about this since String is referenced type but not allocated by VM.\r\n\r\nShould I free memory manually?\r\n\r\nP.S. I know using JNI to implement VO is weird. \r\n","title":"Do java programmers need to deallocate memory for jni object","body":"<p>There is a class using JNI. Some code like below</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JniUser {\n    private String name;\n    private int age;\n    public native int getAge();\n    public native String getName();\n}\n</code></pre>\n<p>In native code, set name and age fields. As far as I know Garbage collector will collect no referenced java objects. But in even in this case, GC can detect this object is target of GC or not?</p>\n<p>I question about this since String is referenced type but not allocated by VM.</p>\n<p>Should I free memory manually?</p>\n<p>P.S. I know using JNI to implement VO is weird.</p>\n"},{"tags":["java","spring-boot","hibernate","joincolumn"],"owner":{"account_id":19610869,"reputation":39,"user_id":14353401,"display_name":"kunal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695290272,"creation_date":1695289073,"question_id":77149003,"body_markdown":"I have two entities as shown below\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;ice_folder&quot;)\r\n    @AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\r\n    @Audited\r\n    public class Folder extends BaseResourceEntity {\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;parent_folder&quot;)\r\n      private Folder parentFolder;\r\n    }\r\n      \r\n      \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;ice_folder&quot;)\r\n    @AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\r\n    public class FolderView extends BaseResourceEntity {\r\n    \r\n      @ManyToOne(fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;parent_folder&quot;, insertable = false, updatable = false)\r\n      private Folder parentFolder;\r\n    }\r\n\r\nwhen I fetch the records by using the FolderView, I&#39;m getting the below infinite recursion error, can anyone tell me how to fix this and fetch the record easily. I can fetch the records only by using the FolderView.\r\n\r\n    `Infinite recursion (StackOverflowError) (through reference chain: org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-\r\n","title":"How to fetch records from entities having join in it","body":"<p>I have two entities as shown below</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;ice_folder&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\n@Audited\npublic class Folder extends BaseResourceEntity {\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;parent_folder&quot;)\n  private Folder parentFolder;\n}\n  \n  \n@Entity\n@Getter\n@Setter\n@Table(name = &quot;ice_folder&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;folder_id&quot;))\npublic class FolderView extends BaseResourceEntity {\n\n  @ManyToOne(fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;parent_folder&quot;, insertable = false, updatable = false)\n  private Folder parentFolder;\n}\n</code></pre>\n<p>when I fetch the records by using the FolderView, I'm getting the below infinite recursion error, can anyone tell me how to fix this and fetch the record easily. I can fetch the records only by using the FolderView.</p>\n<pre><code>`Infinite recursion (StackOverflowError) (through reference chain: org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;parentFolder&quot;]-&gt;org.icedq.admin.api.v1.entity.Folder$HibernateProxy$GwYLH9jE[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentSet[0]-\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","rest","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695290250,"creation_date":1695290250,"answer_id":77149148,"question_id":77144359,"body_markdown":"In short, Lazy fetching is work under the transaction, mark your class with `@Transactional`.\r\n","title":"Spring Boot parent child self reference relationship returning the child records as null","body":"<p>In short, Lazy fetching is work under the transaction, mark your class with <code>@Transactional</code>.</p>\n"}],"owner":{"account_id":28242228,"reputation":9,"user_id":21589845,"display_name":"Furqan Ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695290250,"creation_date":1695227180,"question_id":77144359,"body_markdown":"I am working on a Rest Api endpoint using Spring Boot and Spring Data Jpa. The issue I am facing is the child records are coming as null. Following are the codes and the screenshot about the data that I am receiving.\r\n\r\nFirst, the screenshot of the returned data.\r\n[Json returned Data][1]\r\n\r\n\r\nFollowing is my model &quot;Article&quot;\r\n\r\n\t@Entity\r\n    //@JsonInclude(JsonInclude.Include.NON_NULL)\r\n    @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\r\n    @EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n    @JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n    public class Article {\r\n    @Id\r\n\t@Getter\r\n\t@Setter\r\n\t@EqualsAndHashCode.Include\r\n\tprivate Long id;\r\n\t\r\n\t@Getter\r\n\t@Setter\r\n\t@EqualsAndHashCode.Include\r\n\tprivate Long parent_id;\r\n\t\r\n\t@Getter\r\n\t@Setter\t\r\n\t@EqualsAndHashCode.Include\r\n\tprivate String name;\r\n\t\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t@Getter\r\n\t@Setter\r\n\tprivate Article article;\r\n\t\r\n\t@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;article&quot;)\r\n\t@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n\t@Setter\r\n\tprivate Set&lt;Article&gt; subArticles;\r\n\t\r\n\t@JsonIgnore\r\n\tpublic Set&lt;Article&gt; subArticles() {\r\n\t\treturn subArticles;\r\n\t}\r\n    }\r\n\r\nFollowing is my DTO\r\n\r\n    @Data\r\n    @Builder\r\n    //@JsonInclude(JsonInclude.Include.NON_NULL)\r\n    @JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n    @JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\r\n    public class ArticleDTO {\r\n\r\n\tprivate Long id;\r\n\tprivate String name;\r\n\tprivate Long parent_id;\r\n\tprivate Article article;\r\n\tprivate Set&lt;Article&gt; subArticle;\r\n\t\r\n    }\r\n\r\nFollowing is my Controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/v1/article&quot;)\r\n    public class ArticleController {\r\n\t\r\n\t@Autowired\r\n\tprivate ArticleRepository articleRepository;\r\n\t\r\n\t@GetMapping(&quot;/{id}&quot;)\r\n\tpublic ResponseEntity&lt;ArticleDTO&gt; getAllArticles(@PathVariable(&quot;id&quot;) Long id) {\r\n\t\t\r\n\t\t// here first show simple result/\r\n\t\treturn articleRepository\r\n\t\t\t\t.findById(id)\r\n\t\t\t\t.map(mapToArticleDTO)\r\n\t\t\t\t.map(ResponseEntity::ok)\r\n\t\t\t\t.orElse(ResponseEntity.notFound().build());\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/{id}/siblings&quot;)\r\n\tpublic ResponseEntity&lt;Set&lt;ArticleDTO&gt;&gt; getAllSiblings(@PathVariable(&quot;id&quot;) Long id) {\r\n\t\treturn articleRepository.findById(id).map(findSubArticles).map(ResponseEntity::ok)\r\n\t\t\t\t.orElse(ResponseEntity.notFound().build());\r\n\t}\r\n\r\n\tprivate Function&lt;Article, ArticleDTO&gt; mapToArticleDTO = a -&gt; ArticleDTO.builder()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.id(a.getId())\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.name(a.getName())\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent_id(a.getParent_id())\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n\t\r\n\tprivate Function&lt;Article, Set&lt;ArticleDTO&gt;&gt; findSubArticles = article -&gt; article.getArticle().subArticles().stream()\r\n            .map(a -&gt; ArticleDTO.builder().id(a.getId()).name(a.getName()).build()).collect(Collectors.toSet());\r\n    }\r\n\r\nFollowing is my Repository:\r\n\r\n    @Repository\r\n    public interface ArticleRepository extends JpaRepository&lt;Article, Long&gt;{\r\n\r\n    }\r\n\r\nFollowing are my database records screenshot\r\n[Database records][2]\r\n\r\nAny guidance where I am going wrong would be highly appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EFzOK.png\r\n  [2]: https://i.stack.imgur.com/uaM9P.png","title":"Spring Boot parent child self reference relationship returning the child records as null","body":"<p>I am working on a Rest Api endpoint using Spring Boot and Spring Data Jpa. The issue I am facing is the child records are coming as null. Following are the codes and the screenshot about the data that I am receiving.</p>\n<p>First, the screenshot of the returned data.\n<a href=\"https://i.stack.imgur.com/EFzOK.png\" rel=\"nofollow noreferrer\">Json returned Data</a></p>\n<p>Following is my model &quot;Article&quot;</p>\n<pre><code>@Entity\n//@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\npublic class Article {\n@Id\n@Getter\n@Setter\n@EqualsAndHashCode.Include\nprivate Long id;\n\n@Getter\n@Setter\n@EqualsAndHashCode.Include\nprivate Long parent_id;\n\n@Getter\n@Setter \n@EqualsAndHashCode.Include\nprivate String name;\n\n@ManyToOne(fetch = FetchType.LAZY)\n@Getter\n@Setter\nprivate Article article;\n\n@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;article&quot;)\n@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n@Setter\nprivate Set&lt;Article&gt; subArticles;\n\n@JsonIgnore\npublic Set&lt;Article&gt; subArticles() {\n    return subArticles;\n}\n}\n</code></pre>\n<p>Following is my DTO</p>\n<pre><code>@Data\n@Builder\n//@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\n@JsonIgnoreProperties({&quot;hibernate_lazy_initializer&quot;, &quot;handler&quot;})\npublic class ArticleDTO {\n\nprivate Long id;\nprivate String name;\nprivate Long parent_id;\nprivate Article article;\nprivate Set&lt;Article&gt; subArticle;\n\n}\n</code></pre>\n<p>Following is my Controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/article&quot;)\npublic class ArticleController {\n\n@Autowired\nprivate ArticleRepository articleRepository;\n\n@GetMapping(&quot;/{id}&quot;)\npublic ResponseEntity&lt;ArticleDTO&gt; getAllArticles(@PathVariable(&quot;id&quot;) Long id) {\n    \n    // here first show simple result/\n    return articleRepository\n            .findById(id)\n            .map(mapToArticleDTO)\n            .map(ResponseEntity::ok)\n            .orElse(ResponseEntity.notFound().build());\n}\n\n@GetMapping(&quot;/{id}/siblings&quot;)\npublic ResponseEntity&lt;Set&lt;ArticleDTO&gt;&gt; getAllSiblings(@PathVariable(&quot;id&quot;) Long id) {\n    return articleRepository.findById(id).map(findSubArticles).map(ResponseEntity::ok)\n            .orElse(ResponseEntity.notFound().build());\n}\n\nprivate Function&lt;Article, ArticleDTO&gt; mapToArticleDTO = a -&gt; ArticleDTO.builder()\n                                                        .id(a.getId())\n                                                        .name(a.getName())\n                                                        .parent_id(a.getParent_id())\n                                                        .build();\n\nprivate Function&lt;Article, Set&lt;ArticleDTO&gt;&gt; findSubArticles = article -&gt; article.getArticle().subArticles().stream()\n        .map(a -&gt; ArticleDTO.builder().id(a.getId()).name(a.getName()).build()).collect(Collectors.toSet());\n}\n</code></pre>\n<p>Following is my Repository:</p>\n<pre><code>@Repository\npublic interface ArticleRepository extends JpaRepository&lt;Article, Long&gt;{\n\n}\n</code></pre>\n<p>Following are my database records screenshot\n<a href=\"https://i.stack.imgur.com/uaM9P.png\" rel=\"nofollow noreferrer\">Database records</a></p>\n<p>Any guidance where I am going wrong would be highly appreciated.</p>\n"},{"tags":["java","exception"],"answers":[{"tags":[],"owner":{"account_id":156391,"reputation":9819,"user_id":373653,"display_name":"sjr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1303888225,"creation_date":1303888225,"answer_id":5800641,"question_id":5800629,"body_markdown":"class `Exception` has constructors that take a `cause` Throwable. You need to call those constructors or provide constructors to your custom exception classes that call these super constructors.","title":"Setting an exception cause in Java","body":"<p>class <code>Exception</code> has constructors that take a <code>cause</code> Throwable. You need to call those constructors or provide constructors to your custom exception classes that call these super constructors.</p>\n"},{"tags":[],"owner":{"account_id":169521,"reputation":37107,"user_id":395659,"accept_rate":90,"display_name":"CloudyMarble"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1634804141,"creation_date":1303888326,"answer_id":5800652,"question_id":5800629,"body_markdown":"&gt; **getCause** - Returns the cause of this throwable or null if the cause is nonexistent or unknown. (The cause is the throwable that caused this throwable to get thrown.)\r\n\r\nRead the Java documentation: [getCause][1]\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#getCause()\r\n\r\n\r\n","title":"Setting an exception cause in Java","body":"<blockquote>\n<p><strong>getCause</strong> - Returns the cause of this throwable or null if the cause is nonexistent or unknown. (The cause is the throwable that caused this throwable to get thrown.)</p>\n</blockquote>\n<p>Read the Java documentation: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#getCause()\" rel=\"nofollow noreferrer\">getCause</a></p>\n"},{"tags":[],"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1695290170,"creation_date":1303888351,"answer_id":5800655,"question_id":5800629,"body_markdown":"The cause is usually set in the constructor of the exception, e.g. [`Exception(String message, Throwable cause)`][1].\r\n\r\nIf it isn&#39;t set in the constructor, you can call [`initCause(Throwable cause)`][2].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html#Exception%28java.lang.String,%20java.lang.Throwable%29\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html#initCause%28java.lang.Throwable%29","title":"Setting an exception cause in Java","body":"<p>The cause is usually set in the constructor of the exception, e.g. <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Exception.html#Exception%28java.lang.String,%20java.lang.Throwable%29\" rel=\"nofollow noreferrer\"><code>Exception(String message, Throwable cause)</code></a>.</p>\n<p>If it isn't set in the constructor, you can call <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Throwable.html#initCause%28java.lang.Throwable%29\" rel=\"nofollow noreferrer\"><code>initCause(Throwable cause)</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":95,"is_accepted":true,"score":95,"last_activity_date":1598922650,"creation_date":1303888834,"answer_id":5800718,"question_id":5800629,"body_markdown":"An Exception has the attributes `message` and `cause`. The message is a description, telling a human reader more or less exactly, what went wrong. The `cause` is something different: it is, if available, another (nested) `Throwable`.\r\n\r\nThe concept is often used if we use custom exceptions like this:\r\n\r\n    catch(IOException e) {\r\n      throw new ApplicationException(&quot;Failed on reading file soandso&quot;, e);\r\n      //                              ^ Message                        ^ Cause\r\n    }\r\n\r\nIn response to [djangofan&#39;s comment][1]:\r\n\r\nThe standard is that the nested expression (the cause) is printed with its stack trace too.\r\n\r\nRunning this little application\r\n\r\n    public class Exceptions {\r\n        public static void main(String[] args) {\r\n            Exception r = new RuntimeException(&quot;Some message&quot;);\r\n            throw new RuntimeException(&quot;Some other message&quot;, r);\r\n        }\r\n    }\r\n\r\nwill output\r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: Some other message\r\n        at Exceptions.main(Exceptions.java:4)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\n    Caused by: java.lang.RuntimeException: Some message\r\n        at Exceptions.main(Exceptions.java:3)\r\n        ... 5 more\r\n\r\nBoth messages are included.\r\n\r\n  [1]: https://stackoverflow.com/questions/5800629/setting-exception-cause-in-java#comment70512488_5800718\r\n","title":"Setting an exception cause in Java","body":"<p>An Exception has the attributes <code>message</code> and <code>cause</code>. The message is a description, telling a human reader more or less exactly, what went wrong. The <code>cause</code> is something different: it is, if available, another (nested) <code>Throwable</code>.</p>\n<p>The concept is often used if we use custom exceptions like this:</p>\n<pre><code>catch(IOException e) {\n  throw new ApplicationException(&quot;Failed on reading file soandso&quot;, e);\n  //                              ^ Message                        ^ Cause\n}\n</code></pre>\n<p>In response to <a href=\"https://stackoverflow.com/questions/5800629/setting-exception-cause-in-java#comment70512488_5800718\">djangofan's comment</a>:</p>\n<p>The standard is that the nested expression (the cause) is printed with its stack trace too.</p>\n<p>Running this little application</p>\n<pre><code>public class Exceptions {\n    public static void main(String[] args) {\n        Exception r = new RuntimeException(&quot;Some message&quot;);\n        throw new RuntimeException(&quot;Some other message&quot;, r);\n    }\n}\n</code></pre>\n<p>will output</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: Some other message\n    at Exceptions.main(Exceptions.java:4)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\nCaused by: java.lang.RuntimeException: Some message\n    at Exceptions.main(Exceptions.java:3)\n    ... 5 more\n</code></pre>\n<p>Both messages are included.</p>\n"},{"tags":[],"owner":{"account_id":24891415,"reputation":21,"user_id":18763335,"display_name":"Priyabrat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649675199,"creation_date":1649666874,"answer_id":71825001,"question_id":5800629,"body_markdown":"If you just want to get rid of **null** as the cause\r\nthen override toString() method of your *CustomException* class that extends Exception class.\r\n\r\n\r\n\tpublic class CustomException extends Exception {\t\r\n\t\tprivate static final long serialVersionUID = 9355648L;\r\n\t\tpublic CustomException(String message, Throwable cause) {\r\n\t\t\tsuper(message, cause);\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;Business Exception&quot;;\r\n\t\t}\r\n\t}\r\n\r\nand\r\n\r\n\tthrow new CustomException(&quot;Stopping further processing.&quot;, new CustomException(&quot;stale message&quot;));\r\n\r\nthe output is as follows\r\n\r\n\tStopping further processing. Cause : Business Exception\r\n\r\nfor following catch block.\r\n\r\n\t} catch (CustomException ce) {\r\n\t\tSystem.out.print(ce.getMessage());\r\n\t\tSystem.out.println(&quot; Cause : &quot; + ce.getCause());\r\n\t}","title":"Setting an exception cause in Java","body":"<p>If you just want to get rid of <strong>null</strong> as the cause\nthen override toString() method of your <em>CustomException</em> class that extends Exception class.</p>\n<pre><code>public class CustomException extends Exception {    \n    private static final long serialVersionUID = 9355648L;\n    public CustomException(String message, Throwable cause) {\n        super(message, cause);\n    }\n    @Override\n    public String toString() {\n        return &quot;Business Exception&quot;;\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>throw new CustomException(&quot;Stopping further processing.&quot;, new CustomException(&quot;stale message&quot;));\n</code></pre>\n<p>the output is as follows</p>\n<pre><code>Stopping further processing. Cause : Business Exception\n</code></pre>\n<p>for following catch block.</p>\n<pre><code>} catch (CustomException ce) {\n    System.out.print(ce.getMessage());\n    System.out.println(&quot; Cause : &quot; + ce.getCause());\n}\n</code></pre>\n"}],"owner":{"account_id":46067,"reputation":8871,"user_id":135982,"accept_rate":64,"display_name":"Vik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84454,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":5800718,"answer_count":5,"score":50,"last_activity_date":1695290170,"creation_date":1303888151,"question_id":5800629,"body_markdown":"I can see on catching an exception that I can print `e.getCause()`, though it is always `null`.\r\n\r\nDo I need to set it somewhere, or is something missing which is setting the cause to null?\r\n\r\n\r\n","title":"Setting an exception cause in Java","body":"<p>I can see on catching an exception that I can print <code>e.getCause()</code>, though it is always <code>null</code>.</p>\n<p>Do I need to set it somewhere, or is something missing which is setting the cause to null?</p>\n"},{"tags":["java","apache-spark","rdd"],"comments":[{"owner":{"account_id":4166553,"reputation":39856,"user_id":3415409,"accept_rate":93,"display_name":"eliasah"},"score":0,"creation_date":1446450743,"post_id":33472829,"comment_id":54731204,"body_markdown":"I&#39;m not sure I quite understand what you are trying to do. You want to create a union on a empty RDD? What for?","body":"I&#39;m not sure I quite understand what you are trying to do. You want to create a union on a empty RDD? What for?"},{"owner":{"account_id":6507624,"reputation":211,"user_id":5036019,"accept_rate":0,"display_name":"Chaitra Bannihatti"},"score":0,"creation_date":1446451222,"post_id":33472829,"comment_id":54731403,"body_markdown":"Yes. When i loop through eachRDD i mean foreachRDD in my code i need to do union of rdd&#39;s to this existingRDD so that final i can save this existingRDD to my s3","body":"Yes. When i loop through eachRDD i mean foreachRDD in my code i need to do union of rdd&#39;s to this existingRDD so that final i can save this existingRDD to my s3"},{"owner":{"account_id":6178987,"reputation":13196,"user_id":4815083,"display_name":"Till Rohrmann"},"score":1,"creation_date":1446452170,"post_id":33472829,"comment_id":54731831,"body_markdown":"Why can&#39;t you simply set the `existingRDD` to `rdd` in the first iteration after writing it to s3?","body":"Why can&#39;t you simply set the <code>existingRDD</code> to <code>rdd</code> in the first iteration after writing it to s3?"}],"answers":[{"tags":[],"owner":{"account_id":4166553,"reputation":39856,"user_id":3415409,"accept_rate":93,"display_name":"eliasah"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1550851788,"creation_date":1446453162,"answer_id":33473504,"question_id":33472829,"body_markdown":"To create an empty RDD in **Java**, you&#39;ll just to do the following:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    // Get an RDD that has no partitions or elements.\r\n    JavaSparkContext jsc;\r\n    ...\r\n    JavaRDD&lt;T&gt; emptyRDD = jsc.emptyRDD();\r\n\r\nI trust you know how to use generics, otherwise, for your case, you&#39;ll need:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    \r\n    JavaRDD&lt;Tuple2&lt;String,List&lt;String&gt;&gt;&gt; emptyRDD = jsc.emptyRDD();\r\n    JavaPairRDD&lt;String,List&lt;String&gt;&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(\r\n      existingRDD\r\n    );\r\n\r\n\r\nYou can also use the `mapToPair` method to convert your `JavaRDD` to a `JavaPairRDD`.\r\n\r\nIn **Scala** :\r\n\r\n&lt;!-- language: scala --&gt;\r\n\r\n    val sc: SparkContext = ???\r\n    ... \r\n    val emptyRDD = sc.emptyRDD\r\n    // emptyRDD: org.apache.spark.rdd.EmptyRDD[Nothing] = EmptyRDD[1] at ...\r\n\r\n","title":"Initialize an RDD to empty","body":"<p>To create an empty RDD in <strong>Java</strong>, you'll just to do the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Get an RDD that has no partitions or elements.\nJavaSparkContext jsc;\n...\nJavaRDD&lt;T&gt; emptyRDD = jsc.emptyRDD();\n</code></pre>\n\n<p>I trust you know how to use generics, otherwise, for your case, you'll need:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>JavaRDD&lt;Tuple2&lt;String,List&lt;String&gt;&gt;&gt; emptyRDD = jsc.emptyRDD();\nJavaPairRDD&lt;String,List&lt;String&gt;&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(\n  existingRDD\n);\n</code></pre>\n\n<p>You can also use the <code>mapToPair</code> method to convert your <code>JavaRDD</code> to a <code>JavaPairRDD</code>.</p>\n\n<p>In <strong>Scala</strong> :</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>val sc: SparkContext = ???\n... \nval emptyRDD = sc.emptyRDD\n// emptyRDD: org.apache.spark.rdd.EmptyRDD[Nothing] = EmptyRDD[1] at ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9697233,"reputation":17,"user_id":7193275,"display_name":"이동준"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1479802711,"creation_date":1479802711,"answer_id":40736835,"question_id":33472829,"body_markdown":"In scala, I used &quot;parallelize&quot; command.\r\n\r\n    val emptyRDD = sc.parallelize(Seq(&quot;&quot;))\r\n\r\n","title":"Initialize an RDD to empty","body":"<p>In scala, I used \"parallelize\" command.</p>\n\n<pre><code>val emptyRDD = sc.parallelize(Seq(\"\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8085762,"reputation":728,"user_id":6093375,"display_name":"Nikhil Bhide"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493988475,"creation_date":1493988475,"answer_id":43805399,"question_id":33472829,"body_markdown":"@eliasah answer is very useful, I am providing code to create empty pair RDD. Consider a scenario in which it is required to create empty pair RDD (key,value). Following scala code illustrates how to create empty pair RDD with key as String and value as Int.\r\n\r\n    type pairRDD = (String,Int)\r\n    var resultRDD = sparkContext.emptyRDD[pairRDD]\r\n\r\nRDD would be created as follows :\r\n\r\n    resultRDD: org.apache.spark.rdd.EmptyRDD[(String, Int)] = EmptyRDD[0] at emptyRDD at &lt;console&gt;:29\r\n\r\n","title":"Initialize an RDD to empty","body":"<p>@eliasah answer is very useful, I am providing code to create empty pair RDD. Consider a scenario in which it is required to create empty pair RDD (key,value). Following scala code illustrates how to create empty pair RDD with key as String and value as Int.</p>\n\n<pre><code>type pairRDD = (String,Int)\nvar resultRDD = sparkContext.emptyRDD[pairRDD]\n</code></pre>\n\n<p>RDD would be created as follows :</p>\n\n<pre><code>resultRDD: org.apache.spark.rdd.EmptyRDD[(String, Int)] = EmptyRDD[0] at emptyRDD at &lt;console&gt;:29\n</code></pre>\n"},{"tags":[],"owner":{"account_id":206715,"reputation":2845,"user_id":456164,"accept_rate":100,"display_name":"Thiago Mata"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496121316,"creation_date":1496121316,"answer_id":44253931,"question_id":33472829,"body_markdown":"In Java, create the empty RDD was a little complex. I tried using the scala.reflect.classTag but it not work either. After many tests, the code that worked was even more simple.\r\n\r\n\r\n    private JavaRDD&lt;Foo&gt; getEmptyJavaRdd() {\r\n\r\n    /* this code does not compile because require &lt;T&gt; as parameter into emptyRDD */\r\n    //        JavaRDD&lt;Foo&gt; emptyRDD = sparkContext.emptyRDD();\r\n    //        return emptyRDD;\r\n\r\n    /* this should be the solution that try to emulate the scala &lt;T&gt; */\r\n    /* but i could not make it work too */\r\n    //        ClassTag&lt;Foo&gt; tag = scala.reflect.ClassTag$.MODULE$.apply(Foo.class);\r\n    //        return sparkContext.emptyRDD(tag);\r\n\r\n    /* this alternative worked into java 8 */\r\n        return SparkContext.parallelize(\r\n                java.util.Arrays.asList()\r\n        );\r\n\r\n    }\r\n","title":"Initialize an RDD to empty","body":"<p>In Java, create the empty RDD was a little complex. I tried using the scala.reflect.classTag but it not work either. After many tests, the code that worked was even more simple.</p>\n\n<pre><code>private JavaRDD&lt;Foo&gt; getEmptyJavaRdd() {\n\n/* this code does not compile because require &lt;T&gt; as parameter into emptyRDD */\n//        JavaRDD&lt;Foo&gt; emptyRDD = sparkContext.emptyRDD();\n//        return emptyRDD;\n\n/* this should be the solution that try to emulate the scala &lt;T&gt; */\n/* but i could not make it work too */\n//        ClassTag&lt;Foo&gt; tag = scala.reflect.ClassTag$.MODULE$.apply(Foo.class);\n//        return sparkContext.emptyRDD(tag);\n\n/* this alternative worked into java 8 */\n    return SparkContext.parallelize(\n            java.util.Arrays.asList()\n    );\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10258703,"reputation":1721,"user_id":8235911,"display_name":"Thirupathi Chavati"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1529406104,"creation_date":1529400727,"answer_id":50925003,"question_id":33472829,"body_markdown":"    val emptyRdd=sc.emptyRDD[String]\r\n\r\nAbove statement will create empty RDD with `String` Type\r\n\r\nFrom SparkContext class: \r\n&gt;Get an RDD that has no partitions or elements\r\n  \r\n    def emptyRDD[T: ClassTag]: EmptyRDD[T] = new EmptyRDD[T] (this)\r\n","title":"Initialize an RDD to empty","body":"<pre><code>val emptyRdd=sc.emptyRDD[String]\n</code></pre>\n\n<p>Above statement will create empty RDD with <code>String</code> Type</p>\n\n<p>From SparkContext class: </p>\n\n<blockquote>\n  <p>Get an RDD that has no partitions or elements</p>\n</blockquote>\n\n<pre><code>def emptyRDD[T: ClassTag]: EmptyRDD[T] = new EmptyRDD[T] (this)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10234529,"reputation":21,"user_id":7554008,"display_name":"osac"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531865615,"creation_date":1531863984,"answer_id":51390650,"question_id":33472829,"body_markdown":"In Java, create empty pair RDD as follows:\r\n\r\n    JavaPairRDD&lt;T, T&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(SparkContext.emptyRDD());","title":"Initialize an RDD to empty","body":"<p>In Java, create empty pair RDD as follows:</p>\n\n<pre><code>JavaPairRDD&lt;T, T&gt; emptyPairRDD = JavaPairRDD.fromJavaRDD(SparkContext.emptyRDD());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16342248,"reputation":693,"user_id":11802888,"display_name":"AshuGG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695289983,"creation_date":1695289983,"answer_id":77149121,"question_id":33472829,"body_markdown":"you can try the below snippet:\r\n\r\n    val emptyRDD = spark.emptyDataset[T].rdd","title":"Initialize an RDD to empty","body":"<p>you can try the below snippet:</p>\n<pre><code>val emptyRDD = spark.emptyDataset[T].rdd\n</code></pre>\n"}],"owner":{"account_id":6507624,"reputation":211,"user_id":5036019,"accept_rate":0,"display_name":"Chaitra Bannihatti"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33346,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":7,"score":19,"last_activity_date":1695289983,"creation_date":1446450281,"question_id":33472829,"body_markdown":"I have an RDD called\r\n    \r\n\tJavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD; \r\n\r\nNow I need to initialize this  `existingRDD` to empty so that when I get the actual rdd&#39;s I can do a union with this `existingRDD`.\r\nHow do I initialize `existingRDD` to an empty RDD except initializing it to null?\r\nHere is my code:\r\n\r\n    JavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD;\r\n    if(ai.get()%10==0)\r\n    {\r\n        existingRDD.saveAsNewAPIHadoopFile(&quot;s3://manthan-impala-test/kinesis-dump/&quot; + startTime + &quot;/&quot; + k + &quot;/&quot; + System.currentTimeMillis() + &quot;/&quot;,\r\n        NullWritable.class, Text.class, TextOutputFormat.class); //on worker failure this will get overwritten\t\t\t\t\t\t\t\t\t\r\n    }\r\n    else\r\n    {\r\n        existingRDD.union(rdd);\r\n    }","title":"Initialize an RDD to empty","body":"<p>I have an RDD called</p>\n\n<pre><code>JavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD; \n</code></pre>\n\n<p>Now I need to initialize this  <code>existingRDD</code> to empty so that when I get the actual rdd's I can do a union with this <code>existingRDD</code>.\nHow do I initialize <code>existingRDD</code> to an empty RDD except initializing it to null?\nHere is my code:</p>\n\n<pre><code>JavaPairRDD&lt;String, List&lt;String&gt;&gt; existingRDD;\nif(ai.get()%10==0)\n{\n    existingRDD.saveAsNewAPIHadoopFile(\"s3://manthan-impala-test/kinesis-dump/\" + startTime + \"/\" + k + \"/\" + System.currentTimeMillis() + \"/\",\n    NullWritable.class, Text.class, TextOutputFormat.class); //on worker failure this will get overwritten                                  \n}\nelse\n{\n    existingRDD.union(rdd);\n}\n</code></pre>\n"},{"tags":["java","android","flutter","kotlin","dart"],"comments":[{"owner":{"account_id":27516669,"reputation":398,"user_id":20997501,"display_name":"Wh1t3rabbit"},"score":0,"creation_date":1695182814,"post_id":77139155,"comment_id":135988343,"body_markdown":"&quot;the emulators are being detected as real devices&quot; Show the code you are using that is giving false results. You should be able to check ```isPhysicalDevice``` https://stackoverflow.com/questions/49866014/how-to-determine-if-flutter-is-running-in-simulator","body":"&quot;the emulators are being detected as real devices&quot; Show the code you are using that is giving false results. You should be able to check <code>isPhysicalDevice</code> <a href=\"https://stackoverflow.com/questions/49866014/how-to-determine-if-flutter-is-running-in-simulator\" title=\"how to determine if flutter is running in simulator\">stackoverflow.com/questions/49866014/&hellip;</a>"},{"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"score":1,"creation_date":1695188859,"post_id":77139155,"comment_id":135988895,"body_markdown":"The **isPhysicalDevice** property only works in the Android Studio Emulator. It does not work in other emulators such as Bluestacks, NoxPlayer, or LDPlayer.","body":"The <b>isPhysicalDevice</b> property only works in the Android Studio Emulator. It does not work in other emulators such as Bluestacks, NoxPlayer, or LDPlayer."},{"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"score":0,"creation_date":1695257657,"post_id":77139155,"comment_id":136001580,"body_markdown":"The solution to my problem is not working perfectly yet, but I have already found a way to fix it. Thank you for your suggestion. [MY SOLUTION](https://stackoverflow.com/a/77139422/22005920)","body":"The solution to my problem is not working perfectly yet, but I have already found a way to fix it. Thank you for your suggestion. <a href=\"https://stackoverflow.com/a/77139422/22005920\">MY SOLUTION</a>"}],"answers":[{"tags":[],"owner":{"account_id":7130379,"reputation":1308,"user_id":5451849,"display_name":"Dharam Budh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695184223,"creation_date":1695184223,"answer_id":77139291,"question_id":77139155,"body_markdown":"Try this:\r\n\r\n    class HomeScreen extends StatefulWidget {\r\n      const HomeScreen({super.key});\r\n    \r\n      @override\r\n      State&lt;HomeScreen&gt; createState() =&gt; _HomeScreenState();\r\n    }\r\n    \r\n    class _HomeScreenState extends State&lt;HomeScreen&gt; {\r\n      @override\r\n      Widget build(BuildContext context) {\r\n        return Scaffold(\r\n          body: SafeArea(\r\n            child: ElevatedButton(\r\n              onPressed: () async {\r\n                log(&quot;isPhysicalDevice: ${await checkIsPhysicalDevice()}&quot;);\r\n              },\r\n              child: const Text(&quot;Check Is Physical Device&quot;),\r\n            ),\r\n          ),\r\n        );\r\n      }\r\n    \r\n      Future&lt;bool&gt; checkIsPhysicalDevice() async {\r\n        final AndroidDeviceInfo androidInfo = await DeviceInfoPlugin().androidInfo;\r\n        final bool finalCondition = androidInfo.fingerprint.startsWith(&quot;generic&quot;) ||\r\n            androidInfo.fingerprint.startsWith(&quot;unknown&quot;) ||\r\n            androidInfo.model.contains(&quot;google_sdk&quot;) ||\r\n            androidInfo.model.contains(&quot;Emulator&quot;) ||\r\n            androidInfo.model.contains(&quot;Android SDK built for x86&quot;) ||\r\n            androidInfo.manufacturer.contains(&quot;Genymotion&quot;) ||\r\n            androidInfo.brand.startsWith(&quot;generic&quot;) ||\r\n            androidInfo.device.startsWith(&quot;generic&quot;) ||\r\n            androidInfo.product == &quot;vbox86p&quot; ||\r\n            androidInfo.device == &quot;vbox86&quot; ||\r\n            androidInfo.hardware == &quot;vbox86&quot; ||\r\n            androidInfo.product == &quot;google_sdk&quot;;\r\n        return Future&lt;bool&gt;.value(finalCondition);\r\n      }\r\n    }\r\n\r\nI assure you that it is more accurate than `androidInfo.isPhysicalDevice`.\r\n\r\nOR\r\n\r\nTry this: [safe_device][1]\r\n\r\n\r\n  [1]: https://pub.dev/packages/safe_device","title":"How to detect emulator or real device in flutter? (Bluestacks, NoxPlayer, or LDPlayer)","body":"<p>Try this:</p>\n<pre><code>class HomeScreen extends StatefulWidget {\n  const HomeScreen({super.key});\n\n  @override\n  State&lt;HomeScreen&gt; createState() =&gt; _HomeScreenState();\n}\n\nclass _HomeScreenState extends State&lt;HomeScreen&gt; {\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: SafeArea(\n        child: ElevatedButton(\n          onPressed: () async {\n            log(&quot;isPhysicalDevice: ${await checkIsPhysicalDevice()}&quot;);\n          },\n          child: const Text(&quot;Check Is Physical Device&quot;),\n        ),\n      ),\n    );\n  }\n\n  Future&lt;bool&gt; checkIsPhysicalDevice() async {\n    final AndroidDeviceInfo androidInfo = await DeviceInfoPlugin().androidInfo;\n    final bool finalCondition = androidInfo.fingerprint.startsWith(&quot;generic&quot;) ||\n        androidInfo.fingerprint.startsWith(&quot;unknown&quot;) ||\n        androidInfo.model.contains(&quot;google_sdk&quot;) ||\n        androidInfo.model.contains(&quot;Emulator&quot;) ||\n        androidInfo.model.contains(&quot;Android SDK built for x86&quot;) ||\n        androidInfo.manufacturer.contains(&quot;Genymotion&quot;) ||\n        androidInfo.brand.startsWith(&quot;generic&quot;) ||\n        androidInfo.device.startsWith(&quot;generic&quot;) ||\n        androidInfo.product == &quot;vbox86p&quot; ||\n        androidInfo.device == &quot;vbox86&quot; ||\n        androidInfo.hardware == &quot;vbox86&quot; ||\n        androidInfo.product == &quot;google_sdk&quot;;\n    return Future&lt;bool&gt;.value(finalCondition);\n  }\n}\n</code></pre>\n<p>I assure you that it is more accurate than <code>androidInfo.isPhysicalDevice</code>.</p>\n<p>OR</p>\n<p>Try this: <a href=\"https://pub.dev/packages/safe_device\" rel=\"nofollow noreferrer\">safe_device</a></p>\n"},{"tags":[],"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695191740,"creation_date":1695186466,"answer_id":77139422,"question_id":77139155,"body_markdown":"I have found a solution to the problem:\r\n\r\n  - Add the **[get_radio_version_plugin: ^1.0.0][1]** plugin to your pubspec.yaml file.\r\n  - Get the value of radioVersion and compare it to the following values:\r\n    * 1.0.0.0\r\n    * &quot;&quot; (empty string)\r\n    * null\r\n\r\n  - If **radioVersion** is equal to any of these values, then the device is an emulator. Otherwise, the device is a real device.\r\n  \r\n\r\n  &gt;&gt; **Example Code :** \r\n  \r\n\r\n    if(radioVersion == &#39;1.0.0.0&#39; || radioVersion == &#39;&#39;|| radioVersion == null){\r\n      //Emulator\r\n    } else {\r\n      //Real Device\r\n    }\r\n   [ &gt;&gt; Image Result &lt;&lt;][2]\r\n    \r\n\r\n\r\n  [1]: https://pub.dev/packages/get_radio_version_plugin\r\n  [2]: https://i.stack.imgur.com/75QkB.png","title":"How to detect emulator or real device in flutter? (Bluestacks, NoxPlayer, or LDPlayer)","body":"<p>I have found a solution to the problem:</p>\n<ul>\n<li><p>Add the <strong><a href=\"https://pub.dev/packages/get_radio_version_plugin\" rel=\"nofollow noreferrer\">get_radio_version_plugin: ^1.0.0</a></strong> plugin to your pubspec.yaml file.</p>\n</li>\n<li><p>Get the value of radioVersion and compare it to the following values:</p>\n<ul>\n<li>1.0.0.0</li>\n<li>&quot;&quot; (empty string)</li>\n<li>null</li>\n</ul>\n</li>\n<li><p>If <strong>radioVersion</strong> is equal to any of these values, then the device is an emulator. Otherwise, the device is a real device.</p>\n</li>\n</ul>\n<blockquote>\n<blockquote>\n<p><strong>Example Code :</strong></p>\n</blockquote>\n</blockquote>\n<pre><code>if(radioVersion == '1.0.0.0' || radioVersion == ''|| radioVersion == null){\n  //Emulator\n} else {\n  //Real Device\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/75QkB.png\" rel=\"nofollow noreferrer\"> &gt;&gt; Image Result &lt;&lt;</a></p>\n"}],"owner":{"account_id":28734687,"reputation":61,"user_id":22005920,"display_name":"Ropon Pov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1695263242,"accepted_answer_id":77139422,"answer_count":2,"score":2,"last_activity_date":1695289509,"creation_date":1695181219,"question_id":77139155,"body_markdown":"I want to detect the difference between an emulator and a real device. I use the device_info_plus package to determine whether the device is an emulator or a real device. It works well, but when I try to run my app and test it in Bluestacks, NoxPlayer, or LDPlayer, it doesn&#39;t work. When I run it in those emulators, the result is that it detects the device as a real device. How can I solve this problem?\r\n\r\nI am trying to run my app on emulators such as Bluestacks, NoxPlayer, and LDPlayer to test whether it is running on an emulator or a real device. However, the emulators are being detected as real devices. How can I fix this?","title":"How to detect emulator or real device in flutter? (Bluestacks, NoxPlayer, or LDPlayer)","body":"<p>I want to detect the difference between an emulator and a real device. I use the device_info_plus package to determine whether the device is an emulator or a real device. It works well, but when I try to run my app and test it in Bluestacks, NoxPlayer, or LDPlayer, it doesn't work. When I run it in those emulators, the result is that it detects the device as a real device. How can I solve this problem?</p>\n<p>I am trying to run my app on emulators such as Bluestacks, NoxPlayer, and LDPlayer to test whether it is running on an emulator or a real device. However, the emulators are being detected as real devices. How can I fix this?</p>\n"},{"tags":["java","protocol-buffers","protostuff"],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":317,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695289298,"creation_date":1682589706,"question_id":76119142,"body_markdown":"Protostuff has a ProtobufIOUtil that seems to be able to convert Java objects into protobuf bytes. \r\nCurrently, it has been found that there may be differences when dealing with map types.\r\n\r\nFor example:\r\n```\r\n@Getter\r\n@Setter\r\npublic class User {\r\n    @Tag(1)\r\n    private long uid;\r\n\r\n    @Tag(2)\r\n    private String name;\r\n\r\n    @Tag(3)\r\n    private Map&lt;Long, Integer&gt; map = new HashMap&lt;&gt;(); // Map type field\r\n}\r\n```\r\n```\r\nsyntax=&quot;proto3&quot;;\r\n\r\nmessage User {\r\n  int64 uid = 1;\r\n  string name = 2;\r\n  map&lt;int64, int32&gt; map = 3;\r\n}\r\n```\r\nThe test:\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) throws InvalidProtocolBufferException {\r\n        User user = new User();\r\n        user.setUid(1);\r\n        user.setName(&quot;s&quot;);\r\n        Map&lt;Long, Integer&gt; map = new HashMap&lt;Long, Integer&gt;();\r\n        map.put(1L, 1);\r\n        user.setMap(map);\r\n        Schema&lt;User&gt; schema = RuntimeSchema.getSchema(User.class);\r\n        byte[] bytes = ProtobufIOUtil.toByteArray(user, schema, LinkedBuffer.allocate());\r\n        System.out.println(Arrays.toString(bytes));\r\n\r\n        UserOuterClass.User pbUser = UserOuterClass.User.newBuilder()\r\n                .setUid(1)\r\n                .setName(&quot;s&quot;)\r\n                .putMap(1, 1)\r\n                .build();\r\n        System.out.println(Arrays.toString(pbUser.toByteArray()));\r\n        UserOuterClass.User newPbUser = UserOuterClass.User.parseFrom(bytes);\r\n        System.out.println(newPbUser.toString());\r\n    }\r\n}\r\n```\r\nThe console output is:\r\n```\r\n[8, 1, 18, 1, 115, 26, 6, 10, 4, 8, 1, 16, 1]\r\n[8, 1, 18, 1, 115, 26, 4, 8, 1, 16, 1]\r\nuid: 1\r\nname: &quot;s&quot;\r\nmap {\r\n  key: 0\r\n  value: 0\r\n}\r\n```\r\n\r\nThe dependencies:\r\n```\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protostuff-core&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protostuff-runtime&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protostuff-runtime-registry&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n            &lt;version&gt;3.21.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n\r\nBytes generated by `ProtobufIOUtil.toByteArray()` in ProtoStuff differs from bytes generated in ProtoBuf, once with `Map` type fields in Pojo class.\r\n\r\nThe map data structure encoded by protobuf is roughly `fieldTag, eleLen, eleData, fieldTag, eleLen, eleData`.\r\n\r\nThe byte data converted from protostuff to protobuf is roughly `fieldTag, fieldLen, fieldTag, eleLen, eleData, fieldTag, eleLen, eleData`.\r\n\r\nCompared to protobuf, there are two more data points: `fieldTag, fieldLen`.\r\n\r\nAnyway, I want the bytes generated by protostuff to be parsed in protobuf to generate the same object as the original object.\r\n\r\nIs there any relevant configuration for protostuff that supports not writing `fieldTag` and `fieldLen` at the beginning?\r\n\r\nIf not, does protostuff support custom encoding and decoding (I know  `Delegate` could be used to customize encoding and decoding, but it seems to require writing by myself. I want to combine it with the original map encoding and decoding, but I haven&#39;t found an implementation yet).\r\n\r\n---UPDATE---\r\n\r\nI now decide to use Delegate:\r\n```\r\npublic class MapDelegate {\r\n    public static final Delegate&lt;Map&lt;Long, Integer&gt;&gt; MAP_INT_LONG_DELEGATE = new Delegate&lt;Map&lt;Long, Integer&gt;&gt;() {\r\n        @Override\r\n        public WireFormat.FieldType getFieldType() {\r\n            return WireFormat.FieldType.MESSAGE;\r\n        }\r\n\r\n        @Override\r\n        public Map&lt;Long, Integer&gt; readFrom(Input input) throws IOException {\r\n            // to be implemented\r\n        }\r\n\r\n        @Override\r\n        public void writeTo(Output output, int number, Map&lt;Long, Integer&gt; value, boolean repeated) throws IOException {\r\n            // to be implemented\r\n        }\r\n\r\n        @Override\r\n        public void transfer(Pipe pipe, Input input, Output output, int number, boolean repeated) throws IOException {\r\n            throw new UnsupportedOperationException(&quot;Transfer operation is not supported.&quot;);\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;?&gt; typeClass() {\r\n            return Map.class;\r\n        }\r\n    };\r\n\r\n}\r\n\r\n```\r\nThe updated `Test`:\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) throws InvalidProtocolBufferException {\r\n        DefaultIdStrategy strategy = (DefaultIdStrategy) RuntimeEnv.ID_STRATEGY;\r\n        strategy.registerDelegate(MAP_INT_LONG_DELEGATE);\r\n\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nBut no idea on how to implement `readFrom` and `writeTo`.\r\n","title":"Protostuff cannot be converted into Protobuf bytes?","body":"<p>Protostuff has a ProtobufIOUtil that seems to be able to convert Java objects into protobuf bytes.\nCurrently, it has been found that there may be differences when dealing with map types.</p>\n<p>For example:</p>\n<pre><code>@Getter\n@Setter\npublic class User {\n    @Tag(1)\n    private long uid;\n\n    @Tag(2)\n    private String name;\n\n    @Tag(3)\n    private Map&lt;Long, Integer&gt; map = new HashMap&lt;&gt;(); // Map type field\n}\n</code></pre>\n<pre><code>syntax=&quot;proto3&quot;;\n\nmessage User {\n  int64 uid = 1;\n  string name = 2;\n  map&lt;int64, int32&gt; map = 3;\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws InvalidProtocolBufferException {\n        User user = new User();\n        user.setUid(1);\n        user.setName(&quot;s&quot;);\n        Map&lt;Long, Integer&gt; map = new HashMap&lt;Long, Integer&gt;();\n        map.put(1L, 1);\n        user.setMap(map);\n        Schema&lt;User&gt; schema = RuntimeSchema.getSchema(User.class);\n        byte[] bytes = ProtobufIOUtil.toByteArray(user, schema, LinkedBuffer.allocate());\n        System.out.println(Arrays.toString(bytes));\n\n        UserOuterClass.User pbUser = UserOuterClass.User.newBuilder()\n                .setUid(1)\n                .setName(&quot;s&quot;)\n                .putMap(1, 1)\n                .build();\n        System.out.println(Arrays.toString(pbUser.toByteArray()));\n        UserOuterClass.User newPbUser = UserOuterClass.User.parseFrom(bytes);\n        System.out.println(newPbUser.toString());\n    }\n}\n</code></pre>\n<p>The console output is:</p>\n<pre><code>[8, 1, 18, 1, 115, 26, 6, 10, 4, 8, 1, 16, 1]\n[8, 1, 18, 1, 115, 26, 4, 8, 1, 16, 1]\nuid: 1\nname: &quot;s&quot;\nmap {\n  key: 0\n  value: 0\n}\n</code></pre>\n<p>The dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-core&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-runtime&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-runtime-registry&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n            &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n            &lt;version&gt;3.21.8&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Bytes generated by <code>ProtobufIOUtil.toByteArray()</code> in ProtoStuff differs from bytes generated in ProtoBuf, once with <code>Map</code> type fields in Pojo class.</p>\n<p>The map data structure encoded by protobuf is roughly <code>fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>The byte data converted from protostuff to protobuf is roughly <code>fieldTag, fieldLen, fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>Compared to protobuf, there are two more data points: <code>fieldTag, fieldLen</code>.</p>\n<p>Anyway, I want the bytes generated by protostuff to be parsed in protobuf to generate the same object as the original object.</p>\n<p>Is there any relevant configuration for protostuff that supports not writing <code>fieldTag</code> and <code>fieldLen</code> at the beginning?</p>\n<p>If not, does protostuff support custom encoding and decoding (I know  <code>Delegate</code> could be used to customize encoding and decoding, but it seems to require writing by myself. I want to combine it with the original map encoding and decoding, but I haven't found an implementation yet).</p>\n<p>---UPDATE---</p>\n<p>I now decide to use Delegate:</p>\n<pre><code>public class MapDelegate {\n    public static final Delegate&lt;Map&lt;Long, Integer&gt;&gt; MAP_INT_LONG_DELEGATE = new Delegate&lt;Map&lt;Long, Integer&gt;&gt;() {\n        @Override\n        public WireFormat.FieldType getFieldType() {\n            return WireFormat.FieldType.MESSAGE;\n        }\n\n        @Override\n        public Map&lt;Long, Integer&gt; readFrom(Input input) throws IOException {\n            // to be implemented\n        }\n\n        @Override\n        public void writeTo(Output output, int number, Map&lt;Long, Integer&gt; value, boolean repeated) throws IOException {\n            // to be implemented\n        }\n\n        @Override\n        public void transfer(Pipe pipe, Input input, Output output, int number, boolean repeated) throws IOException {\n            throw new UnsupportedOperationException(&quot;Transfer operation is not supported.&quot;);\n        }\n\n        @Override\n        public Class&lt;?&gt; typeClass() {\n            return Map.class;\n        }\n    };\n\n}\n\n</code></pre>\n<p>The updated <code>Test</code>:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws InvalidProtocolBufferException {\n        DefaultIdStrategy strategy = (DefaultIdStrategy) RuntimeEnv.ID_STRATEGY;\n        strategy.registerDelegate(MAP_INT_LONG_DELEGATE);\n\n        ...\n    }\n}\n</code></pre>\n<p>But no idea on how to implement <code>readFrom</code> and <code>writeTo</code>.</p>\n"},{"tags":["java","datetime","jodatime"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1340786593,"post_id":11222316,"comment_id":14738600,"body_markdown":"Is your X always going to be a factor of 60?","body":"Is your X always going to be a factor of 60?"},{"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"score":0,"creation_date":1340786875,"post_id":11222316,"comment_id":14738747,"body_markdown":"Yes. `X` is actually a fraction of an hour.","body":"Yes. <code>X</code> is actually a fraction of an hour."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1340787558,"post_id":11222316,"comment_id":14739030,"body_markdown":"Starting from the hour, then?","body":"Starting from the hour, then?"}],"answers":[{"tags":[],"owner":{"account_id":1527414,"reputation":2329,"user_id":1425488,"accept_rate":82,"display_name":"Scorpio"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1340787410,"creation_date":1340787410,"answer_id":11222664,"question_id":11222316,"body_markdown":"I once hacked this Method to do something like it. It&#39;s not optimized in any way, but it did what I wanted at the time. Never made it in any production environment, and I cannot tell you anything about performance.\r\n\r\n\r\n   \r\n\r\n    @Test\r\n         public void test() {\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(13)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(48)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(0)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(59)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(22)));\r\n             System.out.println(roundDate(new DateTime().withMinuteOfHour(37)));\r\n         }\r\n    \r\n        private DateTime roundDate(final DateTime dateTime) {\r\n            final double minuteOfHour = dateTime.getMinuteOfHour();\r\n            final double tenth = minuteOfHour / 10;\r\n            final long round = Math.round(tenth);\r\n            final int i = (int) (round * 10);\r\n    \r\n            if (i == 60) {\r\n                return dateTime.plusHours(1).withMinuteOfHour(0);\r\n            } else {\r\n                return dateTime.withMinuteOfHour(i);\r\n            }\r\n    \r\n        }\r\n\r\n","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>I once hacked this Method to do something like it. It's not optimized in any way, but it did what I wanted at the time. Never made it in any production environment, and I cannot tell you anything about performance.</p>\n\n<pre><code>@Test\n     public void test() {\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(13)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(48)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(0)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(59)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(22)));\n         System.out.println(roundDate(new DateTime().withMinuteOfHour(37)));\n     }\n\n    private DateTime roundDate(final DateTime dateTime) {\n        final double minuteOfHour = dateTime.getMinuteOfHour();\n        final double tenth = minuteOfHour / 10;\n        final long round = Math.round(tenth);\n        final int i = (int) (round * 10);\n\n        if (i == 60) {\n            return dateTime.plusHours(1).withMinuteOfHour(0);\n        } else {\n            return dateTime.withMinuteOfHour(i);\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24377,"reputation":818003,"user_id":61974,"display_name":"Mark Byers"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1695289216,"creation_date":1349788268,"answer_id":12800826,"question_id":11222316,"body_markdown":"[The original accepted answer][1] doesn&#39;t correctly handle datetimes that have seconds or milliseconds set. For completeness, here&#39;s a version that does handle that correctly:\r\n\r\n    private DateTime roundDate(final DateTime dateTime, final int minutes) {\r\n        if (minutes &lt; 1 || 60 % minutes != 0) {\r\n            throw new IllegalArgumentException(&quot;minutes must be a factor of 60&quot;);\r\n        }\r\n\r\n        final DateTime hour = dateTime.hourOfDay().roundFloorCopy();\r\n        final long millisSinceHour = new Duration(hour, dateTime).getMillis();\r\n        final int roundedMinutes = ((int)Math.round(\r\n            millisSinceHour / 60000.0 / minutes)) * minutes;\r\n        return hour.plusMinutes(roundedMinutes);\r\n    }\r\n\r\n\r\n[1]: https://stackoverflow.com/a/11222664","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p><a href=\"https://stackoverflow.com/a/11222664\">The original accepted answer</a> doesn't correctly handle datetimes that have seconds or milliseconds set. For completeness, here's a version that does handle that correctly:</p>\n<pre><code>private DateTime roundDate(final DateTime dateTime, final int minutes) {\n    if (minutes &lt; 1 || 60 % minutes != 0) {\n        throw new IllegalArgumentException(&quot;minutes must be a factor of 60&quot;);\n    }\n\n    final DateTime hour = dateTime.hourOfDay().roundFloorCopy();\n    final long millisSinceHour = new Duration(hour, dateTime).getMillis();\n    final int roundedMinutes = ((int)Math.round(\n        millisSinceHour / 60000.0 / minutes)) * minutes;\n    return hour.plusMinutes(roundedMinutes);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136350,"reputation":1526,"user_id":339785,"display_name":"qerub"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1378483449,"creation_date":1378483449,"answer_id":18661969,"question_id":11222316,"body_markdown":"Here&#39;s another approach that uses arithmetic on Unix time for completeness:\r\n\r\n(Implemented in Scala for clarity.)\r\n\r\n    import org.joda.time.{DateTime, Duration}\r\n    \r\n    def roundDateTime(t: DateTime, d: Duration) = {\r\n      t minus (t.getMillis - (t.getMillis.toDouble / d.getMillis).round * d.getMillis)\r\n    }\r\n\r\nExample usage:\r\n\r\n    roundDateTime(new DateTime(&quot;2013-06-27T11:32:00&quot;), Duration.standardMinutes(10))\r\n    // =&gt; 2013-06-27T11:30:00.000+02:00\r\n    \r\n    roundDateTime(new DateTime(&quot;2013-06-27T11:37:00&quot;), Duration.standardMinutes(10))\r\n    // =&gt; 2013-06-27T11:40:00.000+02:00","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>Here's another approach that uses arithmetic on Unix time for completeness:</p>\n\n<p>(Implemented in Scala for clarity.)</p>\n\n<pre><code>import org.joda.time.{DateTime, Duration}\n\ndef roundDateTime(t: DateTime, d: Duration) = {\n  t minus (t.getMillis - (t.getMillis.toDouble / d.getMillis).round * d.getMillis)\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>roundDateTime(new DateTime(\"2013-06-27T11:32:00\"), Duration.standardMinutes(10))\n// =&gt; 2013-06-27T11:30:00.000+02:00\n\nroundDateTime(new DateTime(\"2013-06-27T11:37:00\"), Duration.standardMinutes(10))\n// =&gt; 2013-06-27T11:40:00.000+02:00\n</code></pre>\n"},{"tags":[],"owner":{"account_id":459717,"reputation":3789,"user_id":860350,"display_name":"vladaman"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1385578363,"creation_date":1385578363,"answer_id":20250692,"question_id":11222316,"body_markdown":"Using pure DateTime (Joda) Java Library:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n\tDateTime dt = new DateTime(1385577373517L, DateTimeZone.UTC);\r\n\t// Prints 2013-11-27T18:36:13.517Z\r\n\tSystem.out.println(dt);\r\n\t\r\n\t// Prints 2013-11-27T18:36:00.000Z (Floor rounded to a minute)\r\n\tSystem.out.println(dt.minuteOfDay().roundFloorCopy());\r\n\t\r\n\t// Prints 2013-11-27T18:30:00.000Z (Rounded to custom minute Window)\r\n\tint windowMinutes = 10;\r\n\tSystem.out.println(\r\n        dt.withMinuteOfHour((dt.getMinuteOfHour() / windowMinutes) * windowMinutes)\r\n\t\t\t.minuteOfDay().roundFloorCopy()\r\n        );","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>Using pure DateTime (Joda) Java Library:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>DateTime dt = new DateTime(1385577373517L, DateTimeZone.UTC);\n// Prints 2013-11-27T18:36:13.517Z\nSystem.out.println(dt);\n\n// Prints 2013-11-27T18:36:00.000Z (Floor rounded to a minute)\nSystem.out.println(dt.minuteOfDay().roundFloorCopy());\n\n// Prints 2013-11-27T18:30:00.000Z (Rounded to custom minute Window)\nint windowMinutes = 10;\nSystem.out.println(\n    dt.withMinuteOfHour((dt.getMinuteOfHour() / windowMinutes) * windowMinutes)\n        .minuteOfDay().roundFloorCopy()\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1488798454,"creation_date":1488798454,"answer_id":42624023,"question_id":11222316,"body_markdown":"When you want to round [Joda DateTime][1] the best solution IMHO is to use the built-in `roundHalfCeilingCopy` and `roundHalfFloorCopy` methods:\r\n\r\n    DateTime dateTime = DateTime.now();\r\n    DateTime newDateTime = dateTime.minuteOfHour().roundHalfCeilingCopy();\r\n\r\nPlease note that `roundHalfCeilingCopy` will favor the ceiling if halfway. You can use `roundHalfFloorCopy` in order to favor the floor in case it&#39;s halfway.\r\n\r\n\r\n  [1]: http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>When you want to round <a href=\"http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html\" rel=\"noreferrer\">Joda DateTime</a> the best solution IMHO is to use the built-in <code>roundHalfCeilingCopy</code> and <code>roundHalfFloorCopy</code> methods:</p>\n\n<pre><code>DateTime dateTime = DateTime.now();\nDateTime newDateTime = dateTime.minuteOfHour().roundHalfCeilingCopy();\n</code></pre>\n\n<p>Please note that <code>roundHalfCeilingCopy</code> will favor the ceiling if halfway. You can use <code>roundHalfFloorCopy</code> in order to favor the floor in case it's halfway.</p>\n"},{"tags":[],"owner":{"account_id":5112414,"reputation":962,"user_id":4098638,"display_name":"Sviatoslav Zaitsev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1602445122,"creation_date":1602445122,"answer_id":64308265,"question_id":11222316,"body_markdown":"I have a function for LocalTime class but I think it&#39;s very easy to adopt my sample for your case:\r\n\r\n(Kotlin lang)\r\n\r\n    fun LocalTime.round(roundValue: Int): LocalTime {\r\n        val timeInMillis = this.millisOfDay\r\n        val remainder = timeInMillis % roundValue\r\n        return when {\r\n            remainder &lt; (roundValue / 2) -&gt; LocalTime.fromMillisOfDay((timeInMillis - remainder).toLong())\r\n            else -&gt; LocalTime.fromMillisOfDay((timeInMillis + (roundValue - remainder)).toLong())\r\n        }\r\n    }\r\n\r\nAnd usage:\r\n\r\n    var userWakeTime = LocalTime(6, 42)\r\n    userWakeTime = userWakeTime.round(15 * 60 * 1000) // userWakeTime = 6:45","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>I have a function for LocalTime class but I think it's very easy to adopt my sample for your case:</p>\n<p>(Kotlin lang)</p>\n<pre><code>fun LocalTime.round(roundValue: Int): LocalTime {\n    val timeInMillis = this.millisOfDay\n    val remainder = timeInMillis % roundValue\n    return when {\n        remainder &lt; (roundValue / 2) -&gt; LocalTime.fromMillisOfDay((timeInMillis - remainder).toLong())\n        else -&gt; LocalTime.fromMillisOfDay((timeInMillis + (roundValue - remainder)).toLong())\n    }\n}\n</code></pre>\n<p>And usage:</p>\n<pre><code>var userWakeTime = LocalTime(6, 42)\nuserWakeTime = userWakeTime.round(15 * 60 * 1000) // userWakeTime = 6:45\n</code></pre>\n"}],"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23347,"favorite_count":0,"down_vote_count":1,"up_vote_count":30,"accepted_answer_id":12800826,"answer_count":6,"score":29,"last_activity_date":1695289216,"creation_date":1340786081,"question_id":11222316,"body_markdown":"How to round `DateTime` of `Joda` library to the nearest `X` minutes ?  \r\nFor example:\r\n\r\n&lt;pre&gt;X = 10 minutes\r\nJun 27, 11:32 -&gt; Jun 27, 11:30\r\nJun 27, 11:33 -&gt; Jun 27, 11:30\r\nJun 27, 11:34 -&gt; Jun 27, 11:30\r\nJun 27, 11:35 -&gt; Jun 27, 11:40\r\nJun 27, 11:36 -&gt; Jun 27, 11:40\r\nJun 27, 11:37 -&gt; Jun 27, 11:40\r\n&lt;/pre&gt;","title":"How to round DateTime of Joda library to the nearest X minutes?","body":"<p>How to round <code>DateTime</code> of <code>Joda</code> library to the nearest <code>X</code> minutes ?<br>\nFor example:</p>\n\n<pre>X = 10 minutes\nJun 27, 11:32 -> Jun 27, 11:30\nJun 27, 11:33 -> Jun 27, 11:30\nJun 27, 11:34 -> Jun 27, 11:30\nJun 27, 11:35 -> Jun 27, 11:40\nJun 27, 11:36 -> Jun 27, 11:40\nJun 27, 11:37 -> Jun 27, 11:40\n</pre>\n"},{"tags":["java","spring-boot","rabbitmq","ssl-certificate"],"answers":[{"tags":[],"owner":{"account_id":10466881,"reputation":166,"user_id":7716050,"display_name":"hugoalexandremf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688385365,"creation_date":1681296635,"answer_id":75994594,"question_id":67917016,"body_markdown":"Spring is complaining that it doesn&#39;t trust on the certificate presented by the host `rmq-lb.uat.mycompany.com`. \r\n\r\nIndeed the issue appears to be with the TrustStore that is being passed to the application. \r\n\r\nLocally it works because the code is creating an accepting TrustStrategy, i.e. the Spring application is going to trust in all the presented server certificates.\r\n\r\nIf the certificate that is being used in `rmq-lb.uat.mycompany.com` is trusted, i.e. was issued by a trusted CA (Certificate Authority) contained in the cacerts, there shouldn&#39;t be a problem. \r\n\r\nFor development purposes it is ok to trust in all the server certificates, but in production environment it is not advisable as one should only trust in SSL certificates that were issued by official Certificate Authorities.\r\n\r\nOne thing to check is the certificate chain of the server certificate present in `rmq-lb.uat.mycompany.com`, and more precisely the CA root certificate. One must also check the intermediate certificates present in the certificate chain. If it was indeed issued by a trusted authority and this CA is not included in the cacerts of the JDK we can include it manually in an already created TrustStore with the command (keytool is present in the JDK bin folder):\r\n\r\n    keytool -importcert -file /pathToCert/certToTrust.cer -keystore /pathToJKS/truststore.jks -alias &quot;certToTrust&quot;\r\n\r\nor alternatively if we want to create a Java KeyStore (JKS) with the specific certificate we can use the same command and it will create a TrustStore with the specified certificate inside.","title":"Error connecting to RabbitMQ instance with SSL using java spring-boot","body":"<p>Spring is complaining that it doesn't trust on the certificate presented by the host <code>rmq-lb.uat.mycompany.com</code>.</p>\n<p>Indeed the issue appears to be with the TrustStore that is being passed to the application.</p>\n<p>Locally it works because the code is creating an accepting TrustStrategy, i.e. the Spring application is going to trust in all the presented server certificates.</p>\n<p>If the certificate that is being used in <code>rmq-lb.uat.mycompany.com</code> is trusted, i.e. was issued by a trusted CA (Certificate Authority) contained in the cacerts, there shouldn't be a problem.</p>\n<p>For development purposes it is ok to trust in all the server certificates, but in production environment it is not advisable as one should only trust in SSL certificates that were issued by official Certificate Authorities.</p>\n<p>One thing to check is the certificate chain of the server certificate present in <code>rmq-lb.uat.mycompany.com</code>, and more precisely the CA root certificate. One must also check the intermediate certificates present in the certificate chain. If it was indeed issued by a trusted authority and this CA is not included in the cacerts of the JDK we can include it manually in an already created TrustStore with the command (keytool is present in the JDK bin folder):</p>\n<pre><code>keytool -importcert -file /pathToCert/certToTrust.cer -keystore /pathToJKS/truststore.jks -alias &quot;certToTrust&quot;\n</code></pre>\n<p>or alternatively if we want to create a Java KeyStore (JKS) with the specific certificate we can use the same command and it will create a TrustStore with the specified certificate inside.</p>\n"}],"owner":{"account_id":7728613,"reputation":794,"user_id":5852506,"display_name":"R13mus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3444,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695288514,"creation_date":1623311823,"question_id":67917016,"body_markdown":"I have a problem connecting with my java app in spring-boog to a UAT server in AWS where my RabbitMQ is hosted. I have a load balancer in front which then redirects my requests to one of the RMQ instances.\r\n\r\nI use SSL to connect to RabbitMQ and I generated a .p12 (PKCS12) cert file. \r\n\r\nThis is the properties file for the spring-boot java app : \r\n\r\n```\r\nspring.rabbitmq.host=rmq-lb.uat.mycompany.com\r\nspring.rabbitmq.port=5671\r\nspring.rabbitmq.username=live_prices\r\nspring.rabbitmq.password=aaaa\r\nspring.rabbitmq.virtualHost=my_virtualhost\r\nspring.rabbitmq.ssl.enabled=true\r\nspring.rabbitmq.ssl.algorithm=TLSv1.2\r\nspring.rabbitmq.ssl.key-store=classpath:/rmq_wr.uat.p12\r\nspring.rabbitmq.ssl.key-store-password=bbbb\r\n...\r\n```\r\n\r\nIf I use a .NET app I don&#39;t have to do any additional steps and I can connect to the RMQ instance with this single .p12 file. Also, if I try to connect locally via a docker container to a RMQ instance it works as well.\r\n\r\nBelow is my Spring configuration class :\r\n\r\n```\r\n@Configuration\r\npublic class RabbitMQConfig {\r\n\r\n\t@Value(&quot;${mycompany.rabbitmq.queue}&quot;)\r\n\tString queueName;\r\n\r\n\t@Value(&quot;${mycompany.rabbitmq.exchange}&quot;)\r\n\tString exchange;\r\n\r\n\t@Value(&quot;${mycompany.rabbitmq.routingkey}&quot;)\r\n\tprivate String routingkey;    \r\n\r\n\t@Bean\r\n\tQueue queue() {\r\n\t\treturn new Queue(queueName, true);\r\n\t}\r\n\r\n\t@Bean\r\n\tTopicExchange exchange() {\r\n\t\treturn new TopicExchange (exchange);\r\n\t}\r\n\r\n\t@Bean\r\n\tBinding binding(Queue queue, TopicExchange exchange) {\r\n\t\treturn BindingBuilder.bind(queue).to(exchange).with(routingkey);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic MessageConverter jsonMessageConverter() {\r\n\t\treturn new Jackson2JsonMessageConverter();\r\n\t}\r\n\t\r\n\tpublic AmqpTemplate rabbitTemplate(ConnectionFactory connectionFactory) {\r\n\t\tfinal RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\r\n\t\trabbitTemplate.setMessageConverter(jsonMessageConverter());\r\n\t\treturn rabbitTemplate;\r\n\t}\r\n}\r\n```\r\n\r\nThis is the error that I get when debugging the app: \r\n\r\n```\r\n2021-06-10 09:38:19.914  INFO 20056 --- [  restartedMain] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rmq-lb.uat.mycompany.com:5671]\r\n2021-06-10 09:38:20.145 ERROR 20056 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n2021-06-10 09:38:20.149  INFO 20056 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2021-06-10 09:38:20.176 ERROR 20056 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at com.mycompany.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:119) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\r\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at com.mycompany.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\r\n        at com.mycompany.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:99) ~[classes/:na]\r\n        at com.mycompany.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:60) ~[classes/:na]\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        ... 10 common frames omitted\r\nCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\r\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\r\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:170) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        ... 21 common frames omitted\r\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439) ~[na:na]\r\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306) ~[na:na]\r\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\r\n        ... 44 common frames omitted\r\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141) ~[na:na]\r\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126) ~[na:na]\r\n        at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297) ~[na:na]\r\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434) ~[na:na]\r\n        ... 50 common frames omitted\r\n```\r\n\r\nAny ideas ? Thanks a lot ! \r\n\r\n## Edit 1\r\n\r\nI managed to make it work in a simple Java app using Maven with the simple RabbitMQ client library. \r\n\r\nThis is the code :\r\n\r\n```\r\nchar[] keyPassphrase = &quot;bbbb&quot;.toCharArray();\r\n        KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        ks.load(this.getClass().getClassLoader().getResourceAsStream(&quot;rmq_wr.uat.p12&quot;), keyPassphrase);\r\n\r\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n        kmf.init(ks, keyPassphrase);\r\n\r\n        TrustManager[] trustAllCerts = new TrustManager[]{\r\n                new X509ExtendedTrustManager() {\r\n                    @Override\r\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() { return null; }\r\n                    @Override\r\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\r\n                    @Override\r\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\r\n                    @Override\r\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\r\n                    @Override\r\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\r\n                    @Override\r\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\r\n                    @Override\r\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\r\n                }\r\n        };\r\n\r\n        SSLContext c = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n        c.init(kmf.getKeyManagers(), trustAllCerts, null);\r\n\r\n        ConnectionFactory factory = new ConnectionFactory();\r\n        factory.setHost(rmqHost);\r\n        factory.setPort(rmqPort);\r\n        factory.setUsername(rmqUsername);\r\n        factory.setPassword(rmqPassword);\r\n        factory.setVirtualHost(vhost);\r\n        factory.useSslProtocol(c);\r\n        //factory.enableHostnameVerification();\r\n\r\n        conn = factory.newConnection();\r\n        channel = conn.createChannel();\r\n\r\n        channel.basicPublish(&quot;my_exchange&quot;, &quot;test&quot;, null, &quot;Hello, World&quot;.getBytes());\r\n```\r\n\r\nI believe it has something to do with the TrustStore option in the application.properties\r\n\r\n```\r\n...\r\nspring.rabbitmq.ssl.trust-store=file:/C:/Users/User/Desktop/rmqconnector/src/main/resources/cacerts\r\nspring.rabbitmq.ssl.trust-store-password=changeit\r\nspring.rabbitmq.ssl.trust-store-type=JKS\r\n...\r\n```\r\n\r\nand in the code I tried : \r\n\r\n```\r\n@Bean\r\n\tpublic CachingConnectionFactory rabbitConnectionFactory(RabbitProperties config) throws Exception {\r\n\t\tClassPathResource keyStorePath = new ClassPathResource(&quot;rmq_wr.uat.p12&quot;);    \r\n\t\tClassPathResource trustStorePath = new ClassPathResource(&quot;rmquat.jks&quot;);\r\n\r\n\t\tRabbitConnectionFactoryBean factory = new RabbitConnectionFactoryBean();\r\n\t\tif (config.determineHost() != null) {\r\n\t\t\tfactory.setHost(config.determineHost());\r\n\t\t}\r\n\t\tfactory.setPort(config.determinePort());\r\n\t\tif (config.determineUsername() != null) {\r\n\t\t\tfactory.setUsername(config.determineUsername());\r\n\t\t}\r\n\t\tif (config.determinePassword() != null) {\r\n\t\t\tfactory.setPassword(config.determinePassword());\r\n\t\t}\r\n\t\tif (config.determineVirtualHost() != null) {\r\n\t\t\tfactory.setVirtualHost(config.determineVirtualHost());\r\n\t\t}\r\n\t\t// read ssl properties from applicaiton.properties\r\n\t\tRabbitProperties.Ssl ssl = config.getSsl();\r\n\t\tif (ssl.getEnabled()) {\r\n\t\t\tfactory.setUseSSL(true);\r\n\t\t\tif (ssl.getAlgorithm() != null) {\r\n\t\t\t\tfactory.setSslAlgorithm(ssl.getAlgorithm());\r\n\t\t\t}\r\n\t\t\t//System.out.println(&quot;keystore = &quot; + ssl.getKeyStore());\r\n\t\t\t// factory.set\r\n\t\t\t factory.setKeyStore(keyStorePath.getPath());\r\n\t\t\t factory.setKeyStoreType(ssl.getKeyStoreType());\r\n\t\t\t factory.setKeyStorePassphrase(ssl.getKeyStorePassword());\r\n\t\t\t\r\n\t\t\t factory.setTrustStore(ssl.getTrustStore());\r\n\t\t\t //factory.setTrustStore(trustStorePath.getPath());\r\n\t\t\t factory.setTrustStorePassphrase(&quot;changeit&quot;);\r\n\t\t\t factory.setTrustStoreType(&quot;JKS&quot;);\r\n\t\t\t//factory.setSkipServerCertificateValidation(true);\r\n\t\t}\r\n\t\tfactory.afterPropertiesSet();\r\n\r\n\t\tCachingConnectionFactory connectionFactory = new CachingConnectionFactory(factory.getObject());\t\t\r\n\t\tconnectionFactory.setAddresses(config.determineAddresses());\r\n\t\t//connectionFactory.setPublisherConfirms(config.isPublisherConfirms());\r\n\t\tconnectionFactory.setPublisherReturns(config.isPublisherReturns());\r\n\t\tif (config.getCache().getChannel().getSize() != null) {\r\n\t\t\tconnectionFactory.setChannelCacheSize(config.getCache().getChannel().getSize());\r\n\t\t}\r\n\t\tif (config.getCache().getConnection().getMode() != null) {\r\n\t\t\tconnectionFactory.setCacheMode(config.getCache().getConnection().getMode());\r\n\t\t}\r\n\t\tif (config.getCache().getConnection().getSize() != null) {\r\n\t\t\tconnectionFactory.setConnectionCacheSize(config.getCache().getConnection().getSize());\r\n\t\t}\r\n\t\treturn connectionFactory;\r\n\t}\r\n```\r\n\r\nbut this results in the following exception : \r\n\r\n```\r\n2021-06-15 20:32:04.345 ERROR 17816 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: No trusted certificate found\r\n2021-06-15 20:32:04.355  INFO 17816 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2021-06-15 20:32:04.375 ERROR 17816 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        at eu.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:125) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\r\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: No trusted certificate found\r\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at eu.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\r\n        at eu.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:105) ~[classes/:na]\r\n        at eu.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:66) ~[classes/:na]\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\r\n        ... 10 common frames omitted\r\nCaused by: javax.net.ssl.SSLHandshakeException: No trusted certificate found\r\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\r\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\r\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\r\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\r\n        ... 21 common frames omitted\r\nCaused by: sun.security.validator.ValidatorException: No trusted certificate found\r\n        at java.base/sun.security.validator.SimpleValidator.buildTrustedChain(SimpleValidator.java:411) ~[na:na]\r\n        at java.base/sun.security.validator.SimpleValidator.engineValidate(SimpleValidator.java:135) ~[na:na]\r\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\r\n        ... 44 common frames omitted\r\n```\r\n\r\nI list the entries in the keystore as following : \r\n\r\n```\r\nPS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\rmq_wr.uat.p12 -storepass bbbb -storetype PKCS12\r\nKeystore type: PKCS12\r\nKeystore provider: SUN\r\n\r\nYour keystore contains 1 entry\r\n\r\n1, Jun 15, 2021, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): D0:B5:76:...\r\n```\r\n\r\nI also copied the cacerts file to use it as a TrustStore, but this also does not work. \r\n\r\n```\r\nPS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\cacerts -storepass changeit -storetype PKCS12\r\nKeystore type: PKCS12\r\nKeystore provider: SUN\r\n\r\nYour keystore contains 93 entries\r\n\r\n1, Jun 14, 2021, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256): D0:B5:76:...\r\n...\r\n```\r\n\r\n.","title":"Error connecting to RabbitMQ instance with SSL using java spring-boot","body":"<p>I have a problem connecting with my java app in spring-boog to a UAT server in AWS where my RabbitMQ is hosted. I have a load balancer in front which then redirects my requests to one of the RMQ instances.</p>\n<p>I use SSL to connect to RabbitMQ and I generated a .p12 (PKCS12) cert file.</p>\n<p>This is the properties file for the spring-boot java app :</p>\n<pre><code>spring.rabbitmq.host=rmq-lb.uat.mycompany.com\nspring.rabbitmq.port=5671\nspring.rabbitmq.username=live_prices\nspring.rabbitmq.password=aaaa\nspring.rabbitmq.virtualHost=my_virtualhost\nspring.rabbitmq.ssl.enabled=true\nspring.rabbitmq.ssl.algorithm=TLSv1.2\nspring.rabbitmq.ssl.key-store=classpath:/rmq_wr.uat.p12\nspring.rabbitmq.ssl.key-store-password=bbbb\n...\n</code></pre>\n<p>If I use a .NET app I don't have to do any additional steps and I can connect to the RMQ instance with this single .p12 file. Also, if I try to connect locally via a docker container to a RMQ instance it works as well.</p>\n<p>Below is my Spring configuration class :</p>\n<pre><code>@Configuration\npublic class RabbitMQConfig {\n\n    @Value(&quot;${mycompany.rabbitmq.queue}&quot;)\n    String queueName;\n\n    @Value(&quot;${mycompany.rabbitmq.exchange}&quot;)\n    String exchange;\n\n    @Value(&quot;${mycompany.rabbitmq.routingkey}&quot;)\n    private String routingkey;    \n\n    @Bean\n    Queue queue() {\n        return new Queue(queueName, true);\n    }\n\n    @Bean\n    TopicExchange exchange() {\n        return new TopicExchange (exchange);\n    }\n\n    @Bean\n    Binding binding(Queue queue, TopicExchange exchange) {\n        return BindingBuilder.bind(queue).to(exchange).with(routingkey);\n    }\n\n    @Bean\n    public MessageConverter jsonMessageConverter() {\n        return new Jackson2JsonMessageConverter();\n    }\n    \n    public AmqpTemplate rabbitTemplate(ConnectionFactory connectionFactory) {\n        final RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\n        rabbitTemplate.setMessageConverter(jsonMessageConverter());\n        return rabbitTemplate;\n    }\n}\n</code></pre>\n<p>This is the error that I get when debugging the app:</p>\n<pre><code>2021-06-10 09:38:19.914  INFO 20056 --- [  restartedMain] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [rmq-lb.uat.mycompany.com:5671]\n2021-06-10 09:38:20.145 ERROR 20056 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n2021-06-10 09:38:20.149  INFO 20056 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-06-10 09:38:20.176 ERROR 20056 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\n        at com.mycompany.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:119) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at com.mycompany.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\n        at com.mycompany.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:99) ~[classes/:na]\n        at com.mycompany.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:60) ~[classes/:na]\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\n        ... 10 common frames omitted\nCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:170) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        ... 21 common frames omitted\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439) ~[na:na]\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306) ~[na:na]\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\n        ... 44 common frames omitted\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141) ~[na:na]\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126) ~[na:na]\n        at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297) ~[na:na]\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434) ~[na:na]\n        ... 50 common frames omitted\n</code></pre>\n<p>Any ideas ? Thanks a lot !</p>\n<h2>Edit 1</h2>\n<p>I managed to make it work in a simple Java app using Maven with the simple RabbitMQ client library.</p>\n<p>This is the code :</p>\n<pre><code>char[] keyPassphrase = &quot;bbbb&quot;.toCharArray();\n        KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\n        ks.load(this.getClass().getClassLoader().getResourceAsStream(&quot;rmq_wr.uat.p12&quot;), keyPassphrase);\n\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n        kmf.init(ks, keyPassphrase);\n\n        TrustManager[] trustAllCerts = new TrustManager[]{\n                new X509ExtendedTrustManager() {\n                    @Override\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() { return null; }\n                    @Override\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\n                    @Override\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {}\n                    @Override\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\n                    @Override\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, Socket socket) throws CertificateException {}\n                    @Override\n                    public void checkClientTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\n                    @Override\n                    public void checkServerTrusted(java.security.cert.X509Certificate[] xcs, String string, SSLEngine ssle) throws CertificateException {}\n                }\n        };\n\n        SSLContext c = SSLContext.getInstance(&quot;TLSv1.2&quot;);\n        c.init(kmf.getKeyManagers(), trustAllCerts, null);\n\n        ConnectionFactory factory = new ConnectionFactory();\n        factory.setHost(rmqHost);\n        factory.setPort(rmqPort);\n        factory.setUsername(rmqUsername);\n        factory.setPassword(rmqPassword);\n        factory.setVirtualHost(vhost);\n        factory.useSslProtocol(c);\n        //factory.enableHostnameVerification();\n\n        conn = factory.newConnection();\n        channel = conn.createChannel();\n\n        channel.basicPublish(&quot;my_exchange&quot;, &quot;test&quot;, null, &quot;Hello, World&quot;.getBytes());\n</code></pre>\n<p>I believe it has something to do with the TrustStore option in the application.properties</p>\n<pre><code>...\nspring.rabbitmq.ssl.trust-store=file:/C:/Users/User/Desktop/rmqconnector/src/main/resources/cacerts\nspring.rabbitmq.ssl.trust-store-password=changeit\nspring.rabbitmq.ssl.trust-store-type=JKS\n...\n</code></pre>\n<p>and in the code I tried :</p>\n<pre><code>@Bean\n    public CachingConnectionFactory rabbitConnectionFactory(RabbitProperties config) throws Exception {\n        ClassPathResource keyStorePath = new ClassPathResource(&quot;rmq_wr.uat.p12&quot;);    \n        ClassPathResource trustStorePath = new ClassPathResource(&quot;rmquat.jks&quot;);\n\n        RabbitConnectionFactoryBean factory = new RabbitConnectionFactoryBean();\n        if (config.determineHost() != null) {\n            factory.setHost(config.determineHost());\n        }\n        factory.setPort(config.determinePort());\n        if (config.determineUsername() != null) {\n            factory.setUsername(config.determineUsername());\n        }\n        if (config.determinePassword() != null) {\n            factory.setPassword(config.determinePassword());\n        }\n        if (config.determineVirtualHost() != null) {\n            factory.setVirtualHost(config.determineVirtualHost());\n        }\n        // read ssl properties from applicaiton.properties\n        RabbitProperties.Ssl ssl = config.getSsl();\n        if (ssl.getEnabled()) {\n            factory.setUseSSL(true);\n            if (ssl.getAlgorithm() != null) {\n                factory.setSslAlgorithm(ssl.getAlgorithm());\n            }\n            //System.out.println(&quot;keystore = &quot; + ssl.getKeyStore());\n            // factory.set\n             factory.setKeyStore(keyStorePath.getPath());\n             factory.setKeyStoreType(ssl.getKeyStoreType());\n             factory.setKeyStorePassphrase(ssl.getKeyStorePassword());\n            \n             factory.setTrustStore(ssl.getTrustStore());\n             //factory.setTrustStore(trustStorePath.getPath());\n             factory.setTrustStorePassphrase(&quot;changeit&quot;);\n             factory.setTrustStoreType(&quot;JKS&quot;);\n            //factory.setSkipServerCertificateValidation(true);\n        }\n        factory.afterPropertiesSet();\n\n        CachingConnectionFactory connectionFactory = new CachingConnectionFactory(factory.getObject());     \n        connectionFactory.setAddresses(config.determineAddresses());\n        //connectionFactory.setPublisherConfirms(config.isPublisherConfirms());\n        connectionFactory.setPublisherReturns(config.isPublisherReturns());\n        if (config.getCache().getChannel().getSize() != null) {\n            connectionFactory.setChannelCacheSize(config.getCache().getChannel().getSize());\n        }\n        if (config.getCache().getConnection().getMode() != null) {\n            connectionFactory.setCacheMode(config.getCache().getConnection().getMode());\n        }\n        if (config.getCache().getConnection().getSize() != null) {\n            connectionFactory.setConnectionCacheSize(config.getCache().getConnection().getSize());\n        }\n        return connectionFactory;\n    }\n</code></pre>\n<p>but this results in the following exception :</p>\n<pre><code>2021-06-15 20:32:04.345 ERROR 17816 --- [  restartedMain] c.r.client.impl.SocketFrameHandler       : TLS connection failed: No trusted certificate found\n2021-06-15 20:32:04.355  INFO 17816 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-06-15 20:32:04.375 ERROR 17816 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]\n        at eu.rmqconnector.RMQConnectorApp.main(RMQConnectorApp.java:125) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.5.jar:2.4.5]\nCaused by: org.springframework.amqp.AmqpIOException: javax.net.ssl.SSLHandshakeException: No trusted certificate found\n        at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:602) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:724) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:216) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2132) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2105) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1049) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1114) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1107) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at eu.rmq.RabbitMQSender.send(RabbitMQSender.java:26) ~[classes/:na]\n        at eu.rmqconnector.RMQConnectorApp.givenUsingTimer_whenSchedulingTaskOnce_thenCorrect(RMQConnectorApp.java:105) ~[classes/:na]\n        at eu.rmqconnector.RMQConnectorApp.lambda$0(RMQConnectorApp.java:66) ~[classes/:na]\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]\n        ... 10 common frames omitted\nCaused by: javax.net.ssl.SSLHandshakeException: No trusted certificate found\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:326) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:269) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:264) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:183) ~[na:na]\n        at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:171) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1403) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1309) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:440) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:814) ~[na:na]\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1184) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81) ~[na:na]\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142) ~[na:na]\n        at java.base/java.io.DataOutputStream.flush(DataOutputStream.java:123) ~[na:na]\n        at com.rabbitmq.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:160) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:314) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1139) ~[amqp-client-5.10.0.jar:5.10.0]\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1087) ~[amqp-client-5.10.0.jar:5.10.0]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:638) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:613) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:565) ~[spring-rabbit-2.3.6.jar:2.3.6]\n        ... 21 common frames omitted\nCaused by: sun.security.validator.ValidatorException: No trusted certificate found\n        at java.base/sun.security.validator.SimpleValidator.buildTrustedChain(SimpleValidator.java:411) ~[na:na]\n        at java.base/sun.security.validator.SimpleValidator.engineValidate(SimpleValidator.java:135) ~[na:na]\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:222) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:129) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:629) ~[na:na]\n        ... 44 common frames omitted\n</code></pre>\n<p>I list the entries in the keystore as following :</p>\n<pre><code>PS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\rmq_wr.uat.p12 -storepass bbbb -storetype PKCS12\nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 1 entry\n\n1, Jun 15, 2021, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): D0:B5:76:...\n</code></pre>\n<p>I also copied the cacerts file to use it as a TrustStore, but this also does not work.</p>\n<pre><code>PS C:\\Users\\User\\Desktop\\rmqconnector\\src\\main\\resources&gt; keytool -list -keystore .\\cacerts -storepass changeit -storetype PKCS12\nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 93 entries\n\n1, Jun 14, 2021, PrivateKeyEntry,\nCertificate fingerprint (SHA-256): D0:B5:76:...\n...\n</code></pre>\n<p>.</p>\n"},{"tags":["java","minecraft"],"answers":[{"tags":[],"owner":{"account_id":29482069,"reputation":11,"user_id":22592744,"display_name":"Umatriz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695199236,"creation_date":1695199236,"answer_id":77140710,"question_id":77134835,"body_markdown":"Solution:\r\n\r\n 1. Download natives libs for LWJGL. They are in the `classifiers` section in the version manifest\r\n 3. Add them to classpath","title":"Running Minecraft. [LWJGL] Failed to load a library","body":"<p>Solution:</p>\n<ol>\n<li>Download natives libs for LWJGL. They are in the <code>classifiers</code> section in the version manifest</li>\n<li>Add them to classpath</li>\n</ol>\n"}],"owner":{"account_id":29482069,"reputation":11,"user_id":22592744,"display_name":"Umatriz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77140710,"answer_count":1,"score":-1,"last_activity_date":1695288469,"creation_date":1695128885,"question_id":77134835,"body_markdown":"I&#39;m developing my own Minecraft launcher in Rust. Now I have problems with running it.\r\n\r\nI use this command to run Minecraft:\r\n```bash\r\njava -XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump -Dos.name=Windows 10 -Dos.version=10.0 -Xss1M -Djava.library.path=E:\\\\programming\\\\code\\\\nomi\\\\nomi_core\\\\minecraft\\\\versions\\\\1.18.2\\\\natives -Dminecraft.launcher.brand=nomi -Dminecraft.launcher.version=0.0.1 -cp classpath_here net.minecraft.client.main.Main --username Name --version 1.18.2 --gameDir Path/to/game/dir --assetsDir Path/to/assets/dir --assetIndex 1.18 --uuid null --accessToken null unknow_params(below) --versionType release\r\n```\r\nI don&#39;t know what these params do (I ignore them in my command):\r\n```bash\r\n--clientId ${clientid} --xuid ${auth_xuid} --userType ${user_type}\r\n```\r\n\r\nAnd I&#39;m getting this error:\r\n```bash\r\n[16:03:53] [main/WARN]: Unrecognized user type: ${user_type}\r\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Failed to load a library. Possible solutions:\r\n        a) Add the directory that contains the shared library to -Djava.library.path or -Dorg.lwjgl.librarypath.\r\n        b) Add the JAR that contains the shared library to the classpath.\r\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable debug mode with -Dorg.lwjgl.util.Debug=true for better diagnostics.\r\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable the SharedLibraryLoader debug mode with -Dorg.lwjgl.util.DebugLoader=true for better diagnostics.\r\nException in thread &quot;Render thread&quot; [16:03:53] [Render thread/INFO]: [STDERR]: java.lang.NoClassDefFoundError: Could not initialize class com.mojang.blaze3d.systems.RenderSystem\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at ac.a(SourceFile:65)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2394)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2389)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:206)\r\n[16:03:54] [Render thread/INFO]: [STDERR]: Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: Failed to locate \r\nlibrary: lwjgl.dll [in thread &quot;Render thread&quot;]\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:147)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:67)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.&lt;clinit&gt;(Library.java:50)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.MemoryUtil.&lt;clinit&gt;(MemoryUtil.java:97)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dsk.&lt;clinit&gt;(SourceFile:8)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dth.&lt;init&gt;(SourceFile:56)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:19)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:23)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;clinit&gt;(SourceFile:11)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at com.mojang.blaze3d.systems.RenderSystem.&lt;clinit&gt;(SourceFile:46)\r\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:194)\r\n```\r\n\r\nI have java 17.0.7\r\n`java --version` output:\r\n```bash\r\nopenjdk 17.0.7 2023-04-18\r\nOpenJDK Runtime Environment Temurin-17.0.7+7 (build 17.0.7+7)\r\nOpenJDK 64-Bit Server VM Temurin-17.0.7+7 (build 17.0.7+7, mixed mode, sharing)\r\n```\r\n\r\nI have no idea how to fix it but Minecraft must launch","title":"Running Minecraft. [LWJGL] Failed to load a library","body":"<p>I'm developing my own Minecraft launcher in Rust. Now I have problems with running it.</p>\n<p>I use this command to run Minecraft:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump -Dos.name=Windows 10 -Dos.version=10.0 -Xss1M -Djava.library.path=E:\\\\programming\\\\code\\\\nomi\\\\nomi_core\\\\minecraft\\\\versions\\\\1.18.2\\\\natives -Dminecraft.launcher.brand=nomi -Dminecraft.launcher.version=0.0.1 -cp classpath_here net.minecraft.client.main.Main --username Name --version 1.18.2 --gameDir Path/to/game/dir --assetsDir Path/to/assets/dir --assetIndex 1.18 --uuid null --accessToken null unknow_params(below) --versionType release\n</code></pre>\n<p>I don't know what these params do (I ignore them in my command):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>--clientId ${clientid} --xuid ${auth_xuid} --userType ${user_type}\n</code></pre>\n<p>And I'm getting this error:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[16:03:53] [main/WARN]: Unrecognized user type: ${user_type}\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Failed to load a library. Possible solutions:\n        a) Add the directory that contains the shared library to -Djava.library.path or -Dorg.lwjgl.librarypath.\n        b) Add the JAR that contains the shared library to the classpath.\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable debug mode with -Dorg.lwjgl.util.Debug=true for better diagnostics.\n[16:03:53] [Render thread/INFO]: [STDERR]: [LWJGL] Enable the SharedLibraryLoader debug mode with -Dorg.lwjgl.util.DebugLoader=true for better diagnostics.\nException in thread &quot;Render thread&quot; [16:03:53] [Render thread/INFO]: [STDERR]: java.lang.NoClassDefFoundError: Could not initialize class com.mojang.blaze3d.systems.RenderSystem\n[16:03:54] [Render thread/INFO]: [STDERR]:      at ac.a(SourceFile:65)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2394)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dyr.a(SourceFile:2389)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:206)\n[16:03:54] [Render thread/INFO]: [STDERR]: Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: Failed to locate \nlibrary: lwjgl.dll [in thread &quot;Render thread&quot;]\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:147)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.loadSystem(Library.java:67)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.Library.&lt;clinit&gt;(Library.java:50)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at org.lwjgl.system.MemoryUtil.&lt;clinit&gt;(MemoryUtil.java:97)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dsk.&lt;clinit&gt;(SourceFile:8)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dth.&lt;init&gt;(SourceFile:56)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:19)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;init&gt;(SourceFile:23)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at dto.&lt;clinit&gt;(SourceFile:11)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at com.mojang.blaze3d.systems.RenderSystem.&lt;clinit&gt;(SourceFile:46)\n[16:03:54] [Render thread/INFO]: [STDERR]:      at net.minecraft.client.main.Main.main(SourceFile:194)\n</code></pre>\n<p>I have java 17.0.7\n<code>java --version</code> output:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>openjdk 17.0.7 2023-04-18\nOpenJDK Runtime Environment Temurin-17.0.7+7 (build 17.0.7+7)\nOpenJDK 64-Bit Server VM Temurin-17.0.7+7 (build 17.0.7+7, mixed mode, sharing)\n</code></pre>\n<p>I have no idea how to fix it but Minecraft must launch</p>\n"},{"tags":["java","android","kotlin","bluetooth-lowenergy","android-bluetooth"],"comments":[{"owner":{"account_id":11064381,"reputation":1063,"user_id":8124605,"display_name":"Risto"},"score":0,"creation_date":1695282371,"post_id":77144957,"comment_id":136004220,"body_markdown":"Which version of Android API/SDK is your app targeting? it might be a [permissions issue](https://developer.android.com/guide/topics/connectivity/bluetooth/permissions)","body":"Which version of Android API/SDK is your app targeting? it might be a <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth/permissions\" rel=\"nofollow noreferrer\">permissions issue</a>"},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1695636479,"post_id":77144957,"comment_id":136046167,"body_markdown":"In the `BluetoothLE` class, I don&#39;t see any runtime permissions handling? Did you omit that intentionally? The class must implement a callback named `onRequestPermissionsResult` where your app get response from the user interaction either positive or negative.","body":"In the <code>BluetoothLE</code> class, I don&#39;t see any runtime permissions handling? Did you omit that intentionally? The class must implement a callback named <code>onRequestPermissionsResult</code> where your app get response from the user interaction either positive or negative."}],"answers":[{"tags":[],"owner":{"account_id":25113732,"reputation":155,"user_id":18963042,"display_name":"Vishnu S Dharan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695288433,"creation_date":1695288433,"answer_id":77148916,"question_id":77144957,"body_markdown":"1. Try adding permission Bluetooth connect without location `&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; android:usesPermissionFlags=&quot;neverForLocation&quot; /&gt;`\r\n2. If you are trying to search for a beacon, try turning ON Location.\r\n3. Bluetooth.CONNECT, Bluetooth.SCAN are runtime permissions, I assume that you ask them on runtime, if not go to app settings and grand Nearby devices permission","title":"Android 13 BLE ScanCallback not called","body":"<ol>\n<li>Try adding permission Bluetooth connect without location <code>&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; android:usesPermissionFlags=&quot;neverForLocation&quot; /&gt;</code></li>\n<li>If you are trying to search for a beacon, try turning ON Location.</li>\n<li>Bluetooth.CONNECT, Bluetooth.SCAN are runtime permissions, I assume that you ask them on runtime, if not go to app settings and grand Nearby devices permission</li>\n</ol>\n"}],"owner":{"account_id":29484188,"reputation":19,"user_id":22594480,"display_name":"yuz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695288433,"creation_date":1695232855,"question_id":77144957,"body_markdown":"I&#39;m currently working on a BLE product that I picked up after a previous dev left. According to them, the BLE scan functionality was working, but not for me anymore. I was given a new product (Android 13) so we hypothesized that that might be a reason, but I checked the new updates for Android 13 but still can&#39;t find the issue.\r\n\r\nHere&#39;s an overview of the code (yes I know one file&#39;s in Kotlin and one&#39;s in Java. I&#39;m not sure why they decided to write it like this. I also didn&#39;t write any of this, but I think the logic works):\r\n\r\n```\r\nvar mBluetoothAdapter: BluetoothAdapter? = null\r\nvar mBTDevice: BluetoothDevice? = null\r\nvar mBTDevices = ArrayList&lt;BluetoothDevice&gt;()\r\nvar mDeviceListAdapter: DeviceListAdapter? = null\r\nvar mBLEMain: BLEMain? = null\r\n\r\nclass HomeFragment : Fragment() {\r\n    var _binding: FragmentSettingBinding? = null\r\n    val binding get() = _binding!!\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        _binding = FragmentHomeBinding.inflate(inflater)\r\n        initUI()\r\n        setAdapter()\r\n        handleOnClickListener()\r\n        return binding.root\r\n    }\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        mBTDevices = java.util.ArrayList()\r\n        val btManager: BluetoothManager = context?.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager;\r\n        mBluetoothAdapter = btManager.adapter;\r\n    }\r\n\r\n    private fun handleOnClickListener() {\r\n        binding.apply {\r\n            btnBTScanButton click {\r\n                 mBLEMain = BluetoothLE(mBluetoothAdapter, mBTDevice, mBTDevices,this@SettingFragment, viewModel)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\npublic class BluetoothLE extends AppCompatActivity implements AdapterView.OnItemClickListener {\r\n\r\n    BluetoothAdapter mBluetoothAdapter;\r\n    BluetoothDevice mBTDevice;\r\n\r\n    public ArrayList&lt;BluetoothDevice&gt; mBTDevices = new ArrayList&lt;&gt;();\r\n\r\n    private BluetoothLeScanner bluetoothLeScanner;\r\n\r\n    private boolean scanning;\r\n    private boolean connected;\r\n    private Handler handler = new Handler();\r\n\r\n    // Stops scanning after 10 seconds.\r\n    private static final long SCAN_PERIOD = 10000;\r\n\r\n    private ServiceConnection serviceConnection;\r\n\r\n    public BluetoothLE(BluetoothAdapter mBluetoothAdapter, BluetoothDevice mBTDevice, ArrayList&lt;BluetoothDevice&gt; mBTDevices) {\r\n\r\n        this.mBluetoothAdapter = mBluetoothAdapter;\r\n        this.mBTDevices = mBTDevices;\r\n        this.mBTDevice = mBTDevice;\r\n        this.mDeviceListAdapter = new DeviceListAdapter(fragment.requireContext(), R.layout.bluetooth_list, mBTDevices);\r\n\r\n        this.fragment = fragment;\r\n\r\n        this.bluetoothLeScanner = mBluetoothAdapter.getBluetoothLeScanner();\r\n        this.serviceConnection = new ServiceConnection() {\r\n            @Override\r\n            public void onServiceConnected(ComponentName name, IBinder service) {\r\n                bluetoothService = ((BLEConnectionService.LocalBinder) service).getService();\r\n                if (bluetoothService != null) {\r\n                    // call functions on service to check connection and connect to devices\r\n                    if (!bluetoothService.initialize()) {\r\n                        Log.e(TAG, &quot;Unable to initialize Bluetooth&quot;);\r\n                        finish();\r\n                    }\r\n                    // perform device connection\r\n                    bluetoothService.connect(deviceAddress);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onServiceDisconnected(ComponentName name) {\r\n                bluetoothService = null;\r\n            }\r\n        };\r\n\r\n        IntentFilter discoverDevicesIntent = makeGattUpdateIntentFilter();\r\n        fragment.getContext().registerReceiver(gattUpdateReceiver, discoverDevicesIntent);\r\n        scanLeDevice();\r\n    }\r\n\r\n    private void scanLeDevice() {\r\n        if (!scanning) {\r\n            // Stops scanning after a predefined scan period.\r\n            handler.postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    scanning = false;\r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\r\n                        }\r\n                    }else{\r\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 105);\r\n                        }\r\n                    }\r\n                    bluetoothLeScanner.stopScan(leScanCallback);\r\n                }\r\n            }, SCAN_PERIOD);\r\n\r\n            scanning = true;\r\n\r\n\t    // i&#39;m not sure if we actually need all of this, but i put it in to troubleshoot to see if there&#39;s anything wrong with the perms - doesn&#39;t seem like there is\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\r\n                }\r\n            } else {\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\r\n                }\r\n\r\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\r\n                }\r\n            }\r\n            bluetoothLeScanner.startScan(leScanCallback);\r\n        } else {\r\n            scanning = false;\r\n            bluetoothLeScanner.stopScan(leScanCallback);\r\n        }\r\n    }\r\n\r\n    private ScanCallback leScanCallback = new ScanCallback() {\r\n                @Override\r\n                public void onScanResult(int callbackType, ScanResult result) {\r\n                    super.onScanResult(callbackType, result);\r\n                    Log.d(&quot;BLE&quot;, &quot;in scanCallback&quot;);\r\n                    if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n                        ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_CONNECT}, 100);\r\n                    }\r\n\r\n                    Log.d(&quot;BLE&quot;, &quot;Device Name is: &quot; + result.getDevice().getName());\r\n                    Log.d(&quot;BLE&quot;, &quot;Device Address is: &quot; + result.getDevice().getAddress());\r\n                    if (result.getDevice().getName() != null &amp;&amp; result.getDevice().getName().contains(&quot;ESP32&quot;) == true) {\r\n                        mBTDevices.add(result.getDevice());\r\n                    }\r\n                    mDeviceListAdapter = new DeviceListAdapter(fragment.getContext(), R.layout.bluetooth_list, mBTDevices);\r\n                    lvNewDevices.setAdapter(mDeviceListAdapter);\r\n                    mDeviceListAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n                @Override\r\n                public void onBatchScanResults(List&lt;ScanResult&gt; results) {\r\n                    super.onBatchScanResults(results);\r\n                    for (ScanResult sr : results) {\r\n                        Log.d(&quot;BLE&quot;, sr.toString());\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onScanFailed(int errorCode) {\r\n                    super.onScanFailed(errorCode);\r\n                    Log.d(&quot;BLE&quot;, &quot;Error Code: &quot; + errorCode);\r\n                }\r\n    };\r\n\r\n}\r\n```\r\n\r\nMy issue is that nothing in the ScanCallback is being logged, which I&#39;m using to assume that it&#39;s not being called.\r\n\r\nSome things I saw while trying to troubleshoot:\r\n\r\n1. PERMISSIONS\r\n\r\nBluetooth is enabled in settings. The code above also checks for every scanning perm I can think of.\r\n\r\nManifest:\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\r\n\r\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.BLUETOOTH_PRIVILEGED&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\r\n```\r\n\r\n2. RESTRICTIVE BUCKET (?)\r\n\r\nI saw through various SO posts that a new Android 13 updated caused some apps to be restricted so they can&#39;t run BLE anymore. I ran the code to check for my app and it returns a 10, which I&#39;m fairly sure means it&#39;s fine.\r\n\r\nRight now I&#39;m only concerned with scanning, so I omitted the relevant BLEService and GATT code. I&#39;m pretty sure those codes aren&#39;t relevant to being able to scan correctly. If not I&#39;ll edit my post and include those.","title":"Android 13 BLE ScanCallback not called","body":"<p>I'm currently working on a BLE product that I picked up after a previous dev left. According to them, the BLE scan functionality was working, but not for me anymore. I was given a new product (Android 13) so we hypothesized that that might be a reason, but I checked the new updates for Android 13 but still can't find the issue.</p>\n<p>Here's an overview of the code (yes I know one file's in Kotlin and one's in Java. I'm not sure why they decided to write it like this. I also didn't write any of this, but I think the logic works):</p>\n<pre><code>var mBluetoothAdapter: BluetoothAdapter? = null\nvar mBTDevice: BluetoothDevice? = null\nvar mBTDevices = ArrayList&lt;BluetoothDevice&gt;()\nvar mDeviceListAdapter: DeviceListAdapter? = null\nvar mBLEMain: BLEMain? = null\n\nclass HomeFragment : Fragment() {\n    var _binding: FragmentSettingBinding? = null\n    val binding get() = _binding!!\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        _binding = FragmentHomeBinding.inflate(inflater)\n        initUI()\n        setAdapter()\n        handleOnClickListener()\n        return binding.root\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        mBTDevices = java.util.ArrayList()\n        val btManager: BluetoothManager = context?.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager;\n        mBluetoothAdapter = btManager.adapter;\n    }\n\n    private fun handleOnClickListener() {\n        binding.apply {\n            btnBTScanButton click {\n                 mBLEMain = BluetoothLE(mBluetoothAdapter, mBTDevice, mBTDevices,this@SettingFragment, viewModel)\n            }\n        }\n    }\n}\n\n\npublic class BluetoothLE extends AppCompatActivity implements AdapterView.OnItemClickListener {\n\n    BluetoothAdapter mBluetoothAdapter;\n    BluetoothDevice mBTDevice;\n\n    public ArrayList&lt;BluetoothDevice&gt; mBTDevices = new ArrayList&lt;&gt;();\n\n    private BluetoothLeScanner bluetoothLeScanner;\n\n    private boolean scanning;\n    private boolean connected;\n    private Handler handler = new Handler();\n\n    // Stops scanning after 10 seconds.\n    private static final long SCAN_PERIOD = 10000;\n\n    private ServiceConnection serviceConnection;\n\n    public BluetoothLE(BluetoothAdapter mBluetoothAdapter, BluetoothDevice mBTDevice, ArrayList&lt;BluetoothDevice&gt; mBTDevices) {\n\n        this.mBluetoothAdapter = mBluetoothAdapter;\n        this.mBTDevices = mBTDevices;\n        this.mBTDevice = mBTDevice;\n        this.mDeviceListAdapter = new DeviceListAdapter(fragment.requireContext(), R.layout.bluetooth_list, mBTDevices);\n\n        this.fragment = fragment;\n\n        this.bluetoothLeScanner = mBluetoothAdapter.getBluetoothLeScanner();\n        this.serviceConnection = new ServiceConnection() {\n            @Override\n            public void onServiceConnected(ComponentName name, IBinder service) {\n                bluetoothService = ((BLEConnectionService.LocalBinder) service).getService();\n                if (bluetoothService != null) {\n                    // call functions on service to check connection and connect to devices\n                    if (!bluetoothService.initialize()) {\n                        Log.e(TAG, &quot;Unable to initialize Bluetooth&quot;);\n                        finish();\n                    }\n                    // perform device connection\n                    bluetoothService.connect(deviceAddress);\n                }\n            }\n\n            @Override\n            public void onServiceDisconnected(ComponentName name) {\n                bluetoothService = null;\n            }\n        };\n\n        IntentFilter discoverDevicesIntent = makeGattUpdateIntentFilter();\n        fragment.getContext().registerReceiver(gattUpdateReceiver, discoverDevicesIntent);\n        scanLeDevice();\n    }\n\n    private void scanLeDevice() {\n        if (!scanning) {\n            // Stops scanning after a predefined scan period.\n            handler.postDelayed(new Runnable() {\n                @Override\n                public void run() {\n                    scanning = false;\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\n                        }\n                    }else{\n                        if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                            ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 105);\n                        }\n                    }\n                    bluetoothLeScanner.stopScan(leScanCallback);\n                }\n            }, SCAN_PERIOD);\n\n            scanning = true;\n\n        // i'm not sure if we actually need all of this, but i put it in to troubleshoot to see if there's anything wrong with the perms - doesn't seem like there is\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\n                }\n            } else {\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_SCAN}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_PRIVILEGED) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_PRIVILEGED}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_COARSE_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.ACCESS_BACKGROUND_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 102);\n                }\n\n                if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_ADMIN) != PackageManager.PERMISSION_GRANTED) {\n                    ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_ADMIN}, 102);\n                }\n            }\n            bluetoothLeScanner.startScan(leScanCallback);\n        } else {\n            scanning = false;\n            bluetoothLeScanner.stopScan(leScanCallback);\n        }\n    }\n\n    private ScanCallback leScanCallback = new ScanCallback() {\n                @Override\n                public void onScanResult(int callbackType, ScanResult result) {\n                    super.onScanResult(callbackType, result);\n                    Log.d(&quot;BLE&quot;, &quot;in scanCallback&quot;);\n                    if (ActivityCompat.checkSelfPermission(fragment.getContext(), Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n                        ActivityCompat.requestPermissions(fragment.getActivity(), new String[]{Manifest.permission.BLUETOOTH_CONNECT}, 100);\n                    }\n\n                    Log.d(&quot;BLE&quot;, &quot;Device Name is: &quot; + result.getDevice().getName());\n                    Log.d(&quot;BLE&quot;, &quot;Device Address is: &quot; + result.getDevice().getAddress());\n                    if (result.getDevice().getName() != null &amp;&amp; result.getDevice().getName().contains(&quot;ESP32&quot;) == true) {\n                        mBTDevices.add(result.getDevice());\n                    }\n                    mDeviceListAdapter = new DeviceListAdapter(fragment.getContext(), R.layout.bluetooth_list, mBTDevices);\n                    lvNewDevices.setAdapter(mDeviceListAdapter);\n                    mDeviceListAdapter.notifyDataSetChanged();\n                }\n\n                @Override\n                public void onBatchScanResults(List&lt;ScanResult&gt; results) {\n                    super.onBatchScanResults(results);\n                    for (ScanResult sr : results) {\n                        Log.d(&quot;BLE&quot;, sr.toString());\n                    }\n                }\n\n                @Override\n                public void onScanFailed(int errorCode) {\n                    super.onScanFailed(errorCode);\n                    Log.d(&quot;BLE&quot;, &quot;Error Code: &quot; + errorCode);\n                }\n    };\n\n}\n</code></pre>\n<p>My issue is that nothing in the ScanCallback is being logged, which I'm using to assume that it's not being called.</p>\n<p>Some things I saw while trying to troubleshoot:</p>\n<ol>\n<li>PERMISSIONS</li>\n</ol>\n<p>Bluetooth is enabled in settings. The code above also checks for every scanning perm I can think of.</p>\n<p>Manifest:</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\n\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth&quot; /&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.BLUETOOTH_PRIVILEGED&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\n</code></pre>\n<ol start=\"2\">\n<li>RESTRICTIVE BUCKET (?)</li>\n</ol>\n<p>I saw through various SO posts that a new Android 13 updated caused some apps to be restricted so they can't run BLE anymore. I ran the code to check for my app and it returns a 10, which I'm fairly sure means it's fine.</p>\n<p>Right now I'm only concerned with scanning, so I omitted the relevant BLEService and GATT code. I'm pretty sure those codes aren't relevant to being able to scan correctly. If not I'll edit my post and include those.</p>\n"},{"tags":["java","spring","spring-boot","rest","webclient"],"owner":{"account_id":27849471,"reputation":11,"user_id":21264263,"display_name":"minhat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695288362,"creation_date":1695288362,"question_id":77148907,"body_markdown":"```\r\n@PutMapping()\r\npublic void calApi() {\r\n    Map&lt;String, Object&gt; requestBody = new HashMap&lt;&gt;();\r\n    requestBody.put(&quot;foo&quot;, &quot;bar&quot;);\r\n    webClient\r\n        .post()\r\n        .uri(&quot;/api/v1/endpoint&quot;)\r\n        .bodyValue(requestBody)\r\n        .retrieve()\r\n        .toBodilessEntity()\r\n        .block();\r\n}\r\n```\r\n\r\nWhen i call the calApi controller method, the webClient call end point twice. Why the webClient do that or did i do something wrong?","title":"WebClient call endpoint API twice","body":"<pre><code>@PutMapping()\npublic void calApi() {\n    Map&lt;String, Object&gt; requestBody = new HashMap&lt;&gt;();\n    requestBody.put(&quot;foo&quot;, &quot;bar&quot;);\n    webClient\n        .post()\n        .uri(&quot;/api/v1/endpoint&quot;)\n        .bodyValue(requestBody)\n        .retrieve()\n        .toBodilessEntity()\n        .block();\n}\n</code></pre>\n<p>When i call the calApi controller method, the webClient call end point twice. Why the webClient do that or did i do something wrong?</p>\n"},{"tags":["java","android","arrays","hashmap"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695291195,"post_id":61061622,"comment_id":136006149,"body_markdown":"Please report the error message accurately. Cut and paste. It doesn&#39;t look like that, and it isn&#39;t recognizable after your mangling.","body":"Please report the error message accurately. Cut and paste. It doesn&#39;t look like that, and it isn&#39;t recognizable after your mangling."}],"answers":[{"tags":[],"owner":{"account_id":14739603,"reputation":264,"user_id":10644556,"display_name":"PaianganuOm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695287825,"creation_date":1586181975,"answer_id":61061683,"question_id":61061622,"body_markdown":"You are using the wrong syntax here: \r\n```\r\nlistItem.put(listGroup).get(0),list1;\r\n```\r\n\r\nThe method `put` from the `Map` API, takes 2 arguments, a key and a value. Both of those arguments need to be provided in the put method call parenthesis:\r\n\r\n```\r\nlistItem.put(listGroup.get(0), list1);\r\n```","title":"Error: put(java.lang.string, list&lt;string&gt;) in hashmap cannot be applied to (java.util.list&lt;java.lang.string&gt;)","body":"<p>You are using the wrong syntax here:</p>\n<pre><code>listItem.put(listGroup).get(0),list1;\n</code></pre>\n<p>The method <code>put</code> from the <code>Map</code> API, takes 2 arguments, a key and a value. Both of those arguments need to be provided in the put method call parenthesis:</p>\n<pre><code>listItem.put(listGroup.get(0), list1);\n</code></pre>\n"}],"owner":{"account_id":18192785,"reputation":49,"user_id":13238365,"display_name":"Ismail"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1587,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":61061683,"answer_count":1,"score":0,"last_activity_date":1695287825,"creation_date":1586181785,"question_id":61061622,"body_markdown":"I&#39;m a beginner following a tutorial and just can&#39;t understand what I&#39;m doing wrong. I tried to ask the owner of the tutorial without any luck. I&#39;m receiving the error mentioned in the title when trying to build and expendable menu. The listGroup gives the error from line 72 to 76 `(listItem.put(listGroup).get(0),list1;)`. Looks like I&#39;m using the HashMap wrongly. I&#39;m using Android Studios 3.6.1. Please help me out. Thank you in advance! \r\n\r\n    package com.mystartup.start;\r\n    \r\n    import android.os.Bundle;\r\n    import android.view.Menu;\r\n    import android.view.MenuInflater;\r\n    import android.widget.ExpandableListView;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    \r\n    public class MenuActivity extends AppCompatActivity {\r\n        ExpandableListView expandableListView;\r\n        List&lt;String&gt; listGroup;\r\n        HashMap&lt;String,List&lt;String&gt;&gt; listItem;\r\n        MainAdapter adapter;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.menu);\r\n            assert getSupportActionBar() != null;   //null check\r\n            getSupportActionBar().setDisplayHomeAsUpEnabled(true);   //show back button\r\n    \r\n            expandableListView = findViewById(R.id.expanded_listview);\r\n            listGroup = new ArrayList&lt;&gt;();\r\n            listItem = new HashMap&lt;&gt;();\r\n            adapter = new MainAdapter(this,listGroup,listItem);\r\n            expandableListView.setAdapter(adapter);\r\n            initListData();\r\n        }\r\n    \r\n        private void initListData() {\r\n            listGroup.add(getString(R.string.group1));\r\n            listGroup.add(getString(R.string.group2));\r\n            listGroup.add(getString(R.string.group3));\r\n            listGroup.add(getString(R.string.group4));\r\n            listGroup.add(getString(R.string.group5));\r\n    \r\n            String[] array;\r\n    \r\n            List&lt;String&gt; list1 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group1);\r\n            for (String item : array){\r\n                list1.add(item);\r\n            }\r\n            List&lt;String&gt; list2 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group2);\r\n            for (String item : array){\r\n                list2.add(item);\r\n            }\r\n            List&lt;String&gt; list3 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group3);\r\n            for (String item : array){\r\n                list3.add(item);\r\n            }\r\n            List&lt;String&gt; list4 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group4);\r\n            for (String item : array){\r\n                list4.add(item);\r\n            }\r\n            List&lt;String&gt; list5 = new ArrayList&lt;&gt;();\r\n            array = getResources().getStringArray(R.array.group5);\r\n            for (String item : array){\r\n                list5.add(item);\r\n            }\r\n            listItem.put(listGroup).get(0),list1;\r\n            listItem.put(listGroup).get(1),list2;\r\n            listItem.put(listGroup).get(2),list3;\r\n            listItem.put(listGroup).get(3),list4;\r\n            listItem.put(listGroup).get(4),list5;\r\n            adapter.notifyDataSetChanged();\r\n        }\r\n    \r\n        @Override\r\n        public boolean onCreateOptionsMenu(Menu menu) {\r\n            MenuInflater inflater = getMenuInflater();\r\n            inflater.inflate(R.menu.options_menu, menu);\r\n    \r\n            return true;\r\n        }\r\n        @Override\r\n        public boolean onSupportNavigateUp(){\r\n            finish();\r\n            return true;\r\n        }\r\n    \r\n    }\r\n\r\nThe Strings.xml code:\r\n\r\n    &lt;resources&gt;\r\n        &lt;string name=&quot;app_name&quot;&gt;Start&lt;/string&gt;\r\n        &lt;string name=&quot;name&quot;&gt;Profile:&lt;/string&gt;\r\n        &lt;string name=&quot;menu&quot;&gt;Menu&lt;/string&gt;\r\n        &lt;string name=&quot;search&quot;&gt;Search&lt;/string&gt;\r\n        &lt;string name=&quot;group1&quot;&gt;Group 1&lt;/string&gt;\r\n        &lt;string name=&quot;group2&quot;&gt;Group 2&lt;/string&gt;\r\n        &lt;string name=&quot;group3&quot;&gt;Group 3&lt;/string&gt;\r\n        &lt;string name=&quot;group4&quot;&gt;Group 4&lt;/string&gt;\r\n        &lt;string name=&quot;group5&quot;&gt;Group 5&lt;/string&gt;\r\n        &lt;string-array name=&quot;group1&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group2&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group3&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group4&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n        &lt;string-array name=&quot;group5&quot;&gt;\r\n            &lt;item&gt;item1&lt;/item&gt;\r\n            &lt;item&gt;item2&lt;/item&gt;\r\n            &lt;item&gt;item3&lt;/item&gt;\r\n        &lt;/string-array&gt;\r\n    \r\n    \r\n    &lt;/resources&gt;","title":"Error: put(java.lang.string, list&lt;string&gt;) in hashmap cannot be applied to (java.util.list&lt;java.lang.string&gt;)","body":"<p>I'm a beginner following a tutorial and just can't understand what I'm doing wrong. I tried to ask the owner of the tutorial without any luck. I'm receiving the error mentioned in the title when trying to build and expendable menu. The listGroup gives the error from line 72 to 76 <code>(listItem.put(listGroup).get(0),list1;)</code>. Looks like I'm using the HashMap wrongly. I'm using Android Studios 3.6.1. Please help me out. Thank you in advance! </p>\n\n<pre><code>package com.mystartup.start;\n\nimport android.os.Bundle;\nimport android.view.Menu;\nimport android.view.MenuInflater;\nimport android.widget.ExpandableListView;\nimport androidx.appcompat.app.AppCompatActivity;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class MenuActivity extends AppCompatActivity {\n    ExpandableListView expandableListView;\n    List&lt;String&gt; listGroup;\n    HashMap&lt;String,List&lt;String&gt;&gt; listItem;\n    MainAdapter adapter;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.menu);\n        assert getSupportActionBar() != null;   //null check\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);   //show back button\n\n        expandableListView = findViewById(R.id.expanded_listview);\n        listGroup = new ArrayList&lt;&gt;();\n        listItem = new HashMap&lt;&gt;();\n        adapter = new MainAdapter(this,listGroup,listItem);\n        expandableListView.setAdapter(adapter);\n        initListData();\n    }\n\n    private void initListData() {\n        listGroup.add(getString(R.string.group1));\n        listGroup.add(getString(R.string.group2));\n        listGroup.add(getString(R.string.group3));\n        listGroup.add(getString(R.string.group4));\n        listGroup.add(getString(R.string.group5));\n\n        String[] array;\n\n        List&lt;String&gt; list1 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group1);\n        for (String item : array){\n            list1.add(item);\n        }\n        List&lt;String&gt; list2 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group2);\n        for (String item : array){\n            list2.add(item);\n        }\n        List&lt;String&gt; list3 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group3);\n        for (String item : array){\n            list3.add(item);\n        }\n        List&lt;String&gt; list4 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group4);\n        for (String item : array){\n            list4.add(item);\n        }\n        List&lt;String&gt; list5 = new ArrayList&lt;&gt;();\n        array = getResources().getStringArray(R.array.group5);\n        for (String item : array){\n            list5.add(item);\n        }\n        listItem.put(listGroup).get(0),list1;\n        listItem.put(listGroup).get(1),list2;\n        listItem.put(listGroup).get(2),list3;\n        listItem.put(listGroup).get(3),list4;\n        listItem.put(listGroup).get(4),list5;\n        adapter.notifyDataSetChanged();\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inflater = getMenuInflater();\n        inflater.inflate(R.menu.options_menu, menu);\n\n        return true;\n    }\n    @Override\n    public boolean onSupportNavigateUp(){\n        finish();\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>The Strings.xml code:</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"app_name\"&gt;Start&lt;/string&gt;\n    &lt;string name=\"name\"&gt;Profile:&lt;/string&gt;\n    &lt;string name=\"menu\"&gt;Menu&lt;/string&gt;\n    &lt;string name=\"search\"&gt;Search&lt;/string&gt;\n    &lt;string name=\"group1\"&gt;Group 1&lt;/string&gt;\n    &lt;string name=\"group2\"&gt;Group 2&lt;/string&gt;\n    &lt;string name=\"group3\"&gt;Group 3&lt;/string&gt;\n    &lt;string name=\"group4\"&gt;Group 4&lt;/string&gt;\n    &lt;string name=\"group5\"&gt;Group 5&lt;/string&gt;\n    &lt;string-array name=\"group1\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group2\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group3\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group4\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=\"group5\"&gt;\n        &lt;item&gt;item1&lt;/item&gt;\n        &lt;item&gt;item2&lt;/item&gt;\n        &lt;item&gt;item3&lt;/item&gt;\n    &lt;/string-array&gt;\n\n\n&lt;/resources&gt;\n</code></pre>\n"},{"tags":["java","duosecurity"],"owner":{"account_id":4933250,"reputation":4859,"user_id":3972291,"accept_rate":100,"display_name":"Enamul Haque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695287738,"creation_date":1695287738,"question_id":77148826,"body_markdown":"I am using Duo Security Admin API. But when I call the api using below code it shows:\r\n\r\n    Get Users request failed with HTTP (response code: 401)\r\n\r\nHere is my java code:\r\n\r\n        void users(){\r\n\r\n        // Duo Admin API credentials and API hostname\r\n        String integrationKey = &quot;DI7ABPU9TUJQO14RET9Q&quot;;\r\n        String secretKey = &quot;YzDs7ZeQGMllravxDQxcn4jNAwyqF42P1XBDdGd2&quot;;\r\n        String apiHostname = &quot;api-d221a358.duosecurity.com&quot;;\r\n\r\n        try {\r\n\r\n            String usersUrl = &quot;https://&quot; + apiHostname + &quot;/admin/v1/users&quot;;\r\n            // Create URL object\r\n            URL url = new URL(usersUrl);\r\n\r\n            // Open a connection to the URL\r\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n\r\n            // Set request method to GET\r\n            connection.setRequestMethod(&quot;GET&quot;);\r\n\r\n            // Set request headers\r\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + getBase64Credentials(integrationKey, secretKey));\r\n            connection.setRequestProperty(&quot;Date&quot;, OffsetDateTime.now().format(DateTimeFormatter.RFC_1123_DATE_TIME));\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n            // Get the HTTP response code\r\n            int responseCode = connection.getResponseCode();\r\n\r\n            if (responseCode == HttpURLConnection.HTTP_OK) {\r\n                // Read and print the response (list of users)\r\n                try (BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\r\n                    String inputLine;\r\n                    StringBuilder response = new StringBuilder();\r\n\r\n                    while ((inputLine = in.readLine()) != null) {\r\n                        response.append(inputLine);\r\n                    }\r\n\r\n                    System.out.println(&quot;List of Users: &quot; + response.toString());\r\n                }\r\n            } else {\r\n                System.out.println(&quot;Get Users request failed with HTTP response code: &quot; + responseCode);\r\n            }\r\n\r\n            // Close the connection\r\n            connection.disconnect();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    // Encode credentials as Base64\r\n    private static String getBase64Credentials(String integrationKey, String secretKey) {\r\n        String credentials = integrationKey + &quot;:&quot; + secretKey;\r\n        return java.util.Base64.getEncoder().encodeToString(credentials.getBytes());\r\n    }\r\n\r\nWhat is the mistake i have done with my code? \r\nIs it right way to call Duo Security Admin API?\r\n\r\nPlease help me..\r\n","title":"Duo Security Admin API users request failed using in Java","body":"<p>I am using Duo Security Admin API. But when I call the api using below code it shows:</p>\n<pre><code>Get Users request failed with HTTP (response code: 401)\n</code></pre>\n<p>Here is my java code:</p>\n<pre><code>    void users(){\n\n    // Duo Admin API credentials and API hostname\n    String integrationKey = &quot;DI7ABPU9TUJQO14RET9Q&quot;;\n    String secretKey = &quot;YzDs7ZeQGMllravxDQxcn4jNAwyqF42P1XBDdGd2&quot;;\n    String apiHostname = &quot;api-d221a358.duosecurity.com&quot;;\n\n    try {\n\n        String usersUrl = &quot;https://&quot; + apiHostname + &quot;/admin/v1/users&quot;;\n        // Create URL object\n        URL url = new URL(usersUrl);\n\n        // Open a connection to the URL\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n\n        // Set request method to GET\n        connection.setRequestMethod(&quot;GET&quot;);\n\n        // Set request headers\n        connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + getBase64Credentials(integrationKey, secretKey));\n        connection.setRequestProperty(&quot;Date&quot;, OffsetDateTime.now().format(DateTimeFormatter.RFC_1123_DATE_TIME));\n        connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n        // Get the HTTP response code\n        int responseCode = connection.getResponseCode();\n\n        if (responseCode == HttpURLConnection.HTTP_OK) {\n            // Read and print the response (list of users)\n            try (BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\n                String inputLine;\n                StringBuilder response = new StringBuilder();\n\n                while ((inputLine = in.readLine()) != null) {\n                    response.append(inputLine);\n                }\n\n                System.out.println(&quot;List of Users: &quot; + response.toString());\n            }\n        } else {\n            System.out.println(&quot;Get Users request failed with HTTP response code: &quot; + responseCode);\n        }\n\n        // Close the connection\n        connection.disconnect();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\n// Encode credentials as Base64\nprivate static String getBase64Credentials(String integrationKey, String secretKey) {\n    String credentials = integrationKey + &quot;:&quot; + secretKey;\n    return java.util.Base64.getEncoder().encodeToString(credentials.getBytes());\n}\n</code></pre>\n<p>What is the mistake i have done with my code?\nIs it right way to call Duo Security Admin API?</p>\n<p>Please help me..</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":2810614,"reputation":408,"user_id":2416929,"accept_rate":100,"display_name":"kalimba"},"score":0,"creation_date":1638944024,"post_id":70270690,"comment_id":124219428,"body_markdown":"pass `a` as parameter to `increase`","body":"pass <code>a</code> as parameter to <code>increase</code>"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695289244,"post_id":70270690,"comment_id":136005688,"body_markdown":"different solution: `void increase(int n) { if (n &gt; 0) { increase(n-1);  System.out.println(n); } }` call it with the final number, e.g. `increase(5)` to print `1 2 3 4 5` (one number per line)","body":"different solution: <code>void increase(int n) { if (n &gt; 0) { increase(n-1);  System.out.println(n); } }</code> call it with the final number, e.g. <code>increase(5)</code> to print <code>1 2 3 4 5</code> (one number per line)"}],"answers":[{"tags":[],"owner":{"display_name":"user15256253"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638944053,"creation_date":1638944053,"answer_id":70270709,"question_id":70270690,"body_markdown":"You can just put `a` outside the function:\r\n```\r\n// I don&#39;t know your class\r\nprivate a = 1;\r\n\r\nstatic void increase(int N){\r\n        \r\n    int a = 1;\r\n    if(b &lt;= N){\r\n        System.out.print(a+&quot; &quot;);\r\n        a=a+1;\r\n    \r\n        \r\n    }\r\n    else\r\n    {\r\n        increase(N);                \r\n    }\r\n\r\n}\r\n```","title":"How to print numbers from 1 to n using recrsion in java","body":"<p>You can just put <code>a</code> outside the function:</p>\n<pre><code>// I don't know your class\nprivate a = 1;\n\nstatic void increase(int N){\n        \n    int a = 1;\n    if(b &lt;= N){\n        System.out.print(a+&quot; &quot;);\n        a=a+1;\n    \n        \n    }\n    else\n    {\n        increase(N);                \n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2810614,"reputation":408,"user_id":2416929,"accept_rate":100,"display_name":"kalimba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638944134,"creation_date":1638944134,"answer_id":70270718,"question_id":70270690,"body_markdown":"    static void increase(int N, int a){\r\n        if (a&gt;N) return;\r\n        System.out.print(a+&quot; &quot;);\r\n        a=a+1;\r\n        increase(N,a);\r\n    }\r\n    \r\n    //example call from static context print 1-100\r\n    increase(100,1);\r\n","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre><code>static void increase(int N, int a){\n    if (a&gt;N) return;\n    System.out.print(a+&quot; &quot;);\n    a=a+1;\n    increase(N,a);\n}\n\n//example call from static context print 1-100\nincrease(100,1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8645052,"reputation":29,"user_id":6472502,"display_name":"Ants-double"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638944825,"creation_date":1638944825,"answer_id":70270816,"question_id":70270690,"body_markdown":"``` java\r\n  public static void main(String[] args) {\r\n        increase(10,1);\r\n    }\r\n    private static  void increase(int N,int begin){\r\n\r\n        if(begin &lt;= N){\r\n            System.out.print(begin+&quot; &quot;);\r\n            begin=begin+1;\r\n            increase(N,begin);\r\n        }\r\n        return;\r\n    }\r\n```","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre class=\"lang-java prettyprint-override\"><code>  public static void main(String[] args) {\n        increase(10,1);\n    }\n    private static  void increase(int N,int begin){\n\n        if(begin &lt;= N){\n            System.out.print(begin+&quot; &quot;);\n            begin=begin+1;\n            increase(N,begin);\n        }\n        return;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638946438,"creation_date":1638945139,"answer_id":70270852,"question_id":70270690,"body_markdown":"You have to create one additional `private` method to count current value.\r\n```java\r\npublic static void increase(int N) {\r\n    increase(1, N);\r\n}\r\n\r\nprivate static void increase(int a, int N) {\r\n    if (a &lt;= N) {\r\n        if (a &gt; 1)\r\n            System.out.print(&#39; &#39;);\r\n\r\n        System.out.print(i);\r\n        increase(a + 1, N);\r\n    }\r\n}\r\n```","title":"How to print numbers from 1 to n using recrsion in java","body":"<p>You have to create one additional <code>private</code> method to count current value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void increase(int N) {\n    increase(1, N);\n}\n\nprivate static void increase(int a, int N) {\n    if (a &lt;= N) {\n        if (a &gt; 1)\n            System.out.print(' ');\n\n        System.out.print(i);\n        increase(a + 1, N);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29498906,"reputation":1,"user_id":22606354,"display_name":"Rajkumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695287685,"creation_date":1695287685,"answer_id":77148814,"question_id":70270690,"body_markdown":"``` \r\npublic static void main(String[] args) {\r\nincrease(10);\r\n}\r\n\r\npublic static void increase(int a){\r\nif(a == 11)\r\nreturn;\r\n\r\nSystem.out.println(a);\r\nincrease(a+1);\r\n}\r\n```\r\n","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre><code>public static void main(String[] args) {\nincrease(10);\n}\n\npublic static void increase(int a){\nif(a == 11)\nreturn;\n\nSystem.out.println(a);\nincrease(a+1);\n}\n</code></pre>\n"}],"owner":{"account_id":23276428,"reputation":11,"user_id":17360502,"display_name":"Tarang Rastogi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3045,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1695287685,"creation_date":1638943922,"question_id":70270690,"body_markdown":"    public static void increase(int N){\r\n        int a = 1;\r\n\r\n        if(b &lt;= N) {\r\n            System.out.print(a + &quot; &quot;);\r\n            a++;\r\n        } else {\r\n            increase(N);                \r\n        }\r\n    }\r\n\r\nI can see the problem with this approach that the int a gets initialized to `1` every time the code goes for a recursive call. Can anyone suggest the correct solution?","title":"How to print numbers from 1 to n using recrsion in java","body":"<pre><code>public static void increase(int N){\n    int a = 1;\n\n    if(b &lt;= N) {\n        System.out.print(a + &quot; &quot;);\n        a++;\n    } else {\n        increase(N);                \n    }\n}\n</code></pre>\n<p>I can see the problem with this approach that the int a gets initialized to <code>1</code> every time the code goes for a recursive call. Can anyone suggest the correct solution?</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1458551178,"creation_date":1458551178,"answer_id":36126746,"question_id":36126705,"body_markdown":"     Person person = (Person)query.list();\r\n\r\nThat is an illegal cast. Though the list have a single element, you cannot magically cast a list to `Person`. When you set max result, it still returns a list with 1 element.\r\n\r\nHence you have to do \r\n\r\n    Person person = (Person)query.list().get(0);","title":"SetMaxResults() not working as expected in Hibernate","body":"<pre><code> Person person = (Person)query.list();\n</code></pre>\n\n<p>That is an illegal cast. Though the list have a single element, you cannot magically cast a list to <code>Person</code>. When you set max result, it still returns a list with 1 element.</p>\n\n<p>Hence you have to do </p>\n\n<pre><code>Person person = (Person)query.list().get(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4248512,"reputation":143,"user_id":3476390,"accept_rate":82,"display_name":"Fr0stDev1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458551236,"creation_date":1458551236,"answer_id":36126771,"question_id":36126705,"body_markdown":"Better use \r\n\r\n    Person person = (Person)query.uniqueResult();\r\n\r\nBut be careful with this, it throws exception if there is not unique entry.\r\n\r\nBut it your case use \r\n\r\n    Person person = (Person)query.list().get(0);","title":"SetMaxResults() not working as expected in Hibernate","body":"<p>Better use </p>\n\n<pre><code>Person person = (Person)query.uniqueResult();\n</code></pre>\n\n<p>But be careful with this, it throws exception if there is not unique entry.</p>\n\n<p>But it your case use </p>\n\n<pre><code>Person person = (Person)query.list().get(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7734689,"reputation":21,"user_id":5856634,"display_name":"MKRISH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458552156,"creation_date":1458552156,"answer_id":36127091,"question_id":36126705,"body_markdown":"Just change your code like this, i hope it will work. Thanks\r\n\r\n    private Person findPerson(Session session, String name){\r\n            Query query = session.createQuery(&quot;from Person p where p.name=:name&quot;)\r\n            query.setParameter(&quot;name&quot;, name)\r\n            query.setMaxResults(1);\r\n            return (Person)query.uniqueResult();\r\n    }","title":"SetMaxResults() not working as expected in Hibernate","body":"<p>Just change your code like this, i hope it will work. Thanks</p>\n\n<pre><code>private Person findPerson(Session session, String name){\n        Query query = session.createQuery(\"from Person p where p.name=:name\")\n        query.setParameter(\"name\", name)\n        query.setMaxResults(1);\n        return (Person)query.uniqueResult();\n}\n</code></pre>\n"}],"owner":{"account_id":959020,"reputation":3213,"user_id":983783,"accept_rate":63,"display_name":"Eddy Freeman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2328,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695287530,"creation_date":1458551047,"question_id":36126705,"body_markdown":"I am a beginner in Hibernate and getting some errors using the `SetMaxResults()` function. This is my MySQL table data:\r\n\r\n    1 \tJ. C. Smell\r\n    2 \tJ. C. Smell\r\n    3 \tJ. C. Smell\r\n    4 \tJ. C. Smell\r\n\r\nThis is the method to retrieve one record from 4 identical records:\r\n\r\n    private Person findPerson(Session session, String name){\r\n    \t\tQuery query = session.createQuery(&quot;from Person p where p.name=:name&quot;);\r\n    \t\tquery.setParameter(&quot;name&quot;, name);\r\n    \t\tquery.setMaxResults(1);\r\n    \t\tPerson person = (Person)query.list();\r\n    \t\tif(person == null)\r\n    \t\t\treturn null;\r\n    \t\treturn person;\r\n    \t}\r\n\r\nI expect to get one record, but according to the Exception am getting an ArrayList of records. The exception comes from this line \r\n `Person person = (Person)query.list();` That line has the number `34` in my source code. This is the exception:\r\n\r\n    java.lang.ClassCastException: java.util.ArrayList cannot be cast to chapter3.simple.Person\r\n    \tat chapter3.simple.RankingTest.findPerson(RankingTest.java:34)\r\n    \tat chapter3.simple.RankingTest.savePerson(RankingTest.java:41)\r\n    \tat chapter3.simple.RankingTest.testSaveRanking(RankingTest.java:72)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:606)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n    \t...\r\n        ...\r\n\r\nWhat am I doing wrong?\r\n\r\nEdit\r\n---\r\n\r\nIs the setMaxResults(1) not supposed to return 1 results from the records?\r\n","title":"SetMaxResults() not working as expected in Hibernate","body":"<p>I am a beginner in Hibernate and getting some errors using the <code>SetMaxResults()</code> function. This is my MySQL table data:</p>\n<pre><code>1   J. C. Smell\n2   J. C. Smell\n3   J. C. Smell\n4   J. C. Smell\n</code></pre>\n<p>This is the method to retrieve one record from 4 identical records:</p>\n<pre><code>private Person findPerson(Session session, String name){\n        Query query = session.createQuery(&quot;from Person p where p.name=:name&quot;);\n        query.setParameter(&quot;name&quot;, name);\n        query.setMaxResults(1);\n        Person person = (Person)query.list();\n        if(person == null)\n            return null;\n        return person;\n    }\n</code></pre>\n<p>I expect to get one record, but according to the Exception am getting an ArrayList of records. The exception comes from this line\n<code>Person person = (Person)query.list();</code> That line has the number <code>34</code> in my source code. This is the exception:</p>\n<pre><code>java.lang.ClassCastException: java.util.ArrayList cannot be cast to chapter3.simple.Person\n    at chapter3.simple.RankingTest.findPerson(RankingTest.java:34)\n    at chapter3.simple.RankingTest.savePerson(RankingTest.java:41)\n    at chapter3.simple.RankingTest.testSaveRanking(RankingTest.java:72)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    ...\n    ...\n</code></pre>\n<p>What am I doing wrong?</p>\n<h2>Edit</h2>\n<p>Is the setMaxResults(1) not supposed to return 1 results from the records?</p>\n"},{"tags":["java","javac","type-inference","java-11","compiler-bug"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":8,"creation_date":1550614026,"post_id":54775253,"comment_id":96331305,"body_markdown":"An exception from the compiler is a bug. Write up a test case and submit the bug.","body":"An exception from the compiler is a bug. Write up a test case and submit the bug."},{"owner":{"account_id":1806748,"reputation":3695,"user_id":1643711,"accept_rate":67,"display_name":"Mircea Stanciu"},"score":0,"creation_date":1553546628,"post_id":54775253,"comment_id":97417038,"body_markdown":"I confirm this bug as well","body":"I confirm this bug as well"},{"owner":{"account_id":6227013,"reputation":912,"user_id":4844908,"accept_rate":75,"display_name":"Robert Ravikumar"},"score":1,"creation_date":1605492198,"post_id":54775253,"comment_id":114658525,"body_markdown":"I am not able to build the project while my other team mates are able to build it . I tried to delete my repo . no luck .","body":"I am not able to build the project while my other team mates are able to build it . I tried to delete my repo . no luck ."},{"owner":{"account_id":4748063,"reputation":144,"user_id":3838849,"accept_rate":50,"display_name":"Callum Atwal"},"score":2,"creation_date":1643295238,"post_id":54775253,"comment_id":125305973,"body_markdown":"This is a bug in any version older than 11.0.8. Try upgrading your JDK to 11.0.8 or newer","body":"This is a bug in any version older than 11.0.8. Try upgrading your JDK to 11.0.8 or newer"},{"owner":{"account_id":2130230,"reputation":15498,"user_id":1891219,"display_name":"gaborsch"},"score":1,"creation_date":1651158874,"post_id":54775253,"comment_id":127302236,"body_markdown":"JDK 11.0.14 works, haven&#39;t tried earlier versions.","body":"JDK 11.0.14 works, haven&#39;t tried earlier versions."},{"owner":{"account_id":16535035,"reputation":437,"user_id":11947303,"display_name":"CodeSlave"},"score":0,"creation_date":1657793484,"post_id":54775253,"comment_id":128897041,"body_markdown":"JDK 11.0.15 also worked for me","body":"JDK 11.0.15 also worked for me"}],"answers":[{"tags":[],"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"down_vote_count":0,"up_vote_count":65,"is_accepted":true,"score":65,"last_activity_date":1553553946,"creation_date":1550619527,"answer_id":54776592,"question_id":54775253,"body_markdown":"Bug ([JDK-8212586][1]) has been already submitted and [fixed][2] in version 12.\r\n\r\nMinimal, verifiable example:\r\n\r\n    public static void main(String[] args) {\r\n        new Bug&lt;&gt;(){};\r\n    }\r\n\r\n    static class Bug&lt;T&gt; {\r\n\r\n        Bug() {\r\n            test(new ParameterizedTypeReference&lt;&gt;(){});\r\n        }\r\n\r\n        void test(ParameterizedTypeReference&lt;T&gt; typeReference) {\r\n        }\r\n    }\r\n\r\n[Some Details.][3]\r\n\r\n\r\n----------\r\nFix has been also backported to JDK 11 - https://bugs.openjdk.java.net/browse/JDK-8220578. \r\n\r\nAvailable starting JDK **11.0.4**.\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8212586\r\n  [2]: http://hg.openjdk.java.net/jdk/jdk/rev/bbbc110cdffe\r\n  [3]: http://mail.openjdk.java.net/pipermail/compiler-dev/2018-November/012592.html","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>Bug (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8212586\" rel=\"noreferrer\">JDK-8212586</a>) has been already submitted and <a href=\"http://hg.openjdk.java.net/jdk/jdk/rev/bbbc110cdffe\" rel=\"noreferrer\">fixed</a> in version 12.</p>\n\n<p>Minimal, verifiable example:</p>\n\n<pre><code>public static void main(String[] args) {\n    new Bug&lt;&gt;(){};\n}\n\nstatic class Bug&lt;T&gt; {\n\n    Bug() {\n        test(new ParameterizedTypeReference&lt;&gt;(){});\n    }\n\n    void test(ParameterizedTypeReference&lt;T&gt; typeReference) {\n    }\n}\n</code></pre>\n\n<p><a href=\"http://mail.openjdk.java.net/pipermail/compiler-dev/2018-November/012592.html\" rel=\"noreferrer\">Some Details.</a></p>\n\n<hr>\n\n<p>Fix has been also backported to JDK 11 - <a href=\"https://bugs.openjdk.java.net/browse/JDK-8220578\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8220578</a>. </p>\n\n<p>Available starting JDK <strong>11.0.4</strong>.</p>\n"},{"tags":[],"owner":{"account_id":12583603,"reputation":91,"user_id":9153408,"display_name":"Otmane el alami el hassani"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569040432,"creation_date":1561451871,"answer_id":56749957,"question_id":54775253,"body_markdown":"I Had the same error,you need to create a function : \r\n\r\n    ParameterizedTypeReference&lt;Object&gt; createParameterizedTypeReference(){ return new ParameterizedTypeReference&lt;&gt;(){}; }\r\n\r\nand call it : \r\n\r\n    ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\r\n    &quot;https://example.com&quot;,\r\n    HttpMethod.GET,\r\n    new HttpEntity&lt;&gt;(headers),\r\n    createParameterizedTypeReference() { \r\n    });\r\n","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>I Had the same error,you need to create a function : </p>\n\n<pre><code>ParameterizedTypeReference&lt;Object&gt; createParameterizedTypeReference(){ return new ParameterizedTypeReference&lt;&gt;(){}; }\n</code></pre>\n\n<p>and call it : </p>\n\n<pre><code>ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\n\"https://example.com\",\nHttpMethod.GET,\nnew HttpEntity&lt;&gt;(headers),\ncreateParameterizedTypeReference() { \n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18957548,"reputation":41,"user_id":13833816,"display_name":"Martin Langvatn"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1593505676,"creation_date":1593504134,"answer_id":62652849,"question_id":54775253,"body_markdown":"Java 11.0.7 has the same problem. \r\n\r\nThis changed from:\r\n\r\n    new ParameterizedTypeReference&lt;&gt;() {\r\n    })\r\n\r\nto this:\r\n\r\n    new ParameterizedTypeReference&lt;HashMap&lt;String, MyClass&gt;&gt;() {\r\n    })","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>Java 11.0.7 has the same problem.</p>\n<p>This changed from:</p>\n<pre><code>new ParameterizedTypeReference&lt;&gt;() {\n})\n</code></pre>\n<p>to this:</p>\n<pre><code>new ParameterizedTypeReference&lt;HashMap&lt;String, MyClass&gt;&gt;() {\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14173637,"reputation":105,"user_id":10239573,"display_name":"Miri"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1594295693,"creation_date":1594295693,"answer_id":62814267,"question_id":54775253,"body_markdown":"As pointed out in previous comments, the problem is with parametrized anonymous classes, e.g. when using TypeToken from Guava, this does **NOT** work:\r\n\r\n    public List&lt;SomeClass&gt; list() {\r\n        return getData(new TypeToken&lt;&gt;() { });\r\n    }\r\n\r\nBut this **DOES** work:\r\n\r\n    public List&lt;SomeClass&gt; list() {\r\n        return getData(new TypeToken&lt;List&lt;SomeClass&gt;&gt;() { });\r\n    }\r\n\r\nI tried that in versions 11.0.3 - 11.0.7 versions and all contains the bug.","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>As pointed out in previous comments, the problem is with parametrized anonymous classes, e.g. when using TypeToken from Guava, this does <strong>NOT</strong> work:</p>\n<pre><code>public List&lt;SomeClass&gt; list() {\n    return getData(new TypeToken&lt;&gt;() { });\n}\n</code></pre>\n<p>But this <strong>DOES</strong> work:</p>\n<pre><code>public List&lt;SomeClass&gt; list() {\n    return getData(new TypeToken&lt;List&lt;SomeClass&gt;&gt;() { });\n}\n</code></pre>\n<p>I tried that in versions 11.0.3 - 11.0.7 versions and all contains the bug.</p>\n"},{"tags":[],"owner":{"account_id":2824572,"reputation":208,"user_id":2427475,"display_name":"bogdancep"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597062638,"creation_date":1597062638,"answer_id":63340262,"question_id":54775253,"body_markdown":"I&#39;ve fixed this problem on my machine by upgrading to AdoptOpenJDK 11.0.8.\r\n\r\nhttps://adoptopenjdk.net/installation.html#x64_mac-jdk","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>I've fixed this problem on my machine by upgrading to AdoptOpenJDK 11.0.8.</p>\n<p><a href=\"https://adoptopenjdk.net/installation.html#x64_mac-jdk\" rel=\"nofollow noreferrer\">https://adoptopenjdk.net/installation.html#x64_mac-jdk</a></p>\n"},{"tags":[],"owner":{"account_id":5600723,"reputation":649,"user_id":4437074,"display_name":"Ashutosh Srivastav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665740485,"creation_date":1665740485,"answer_id":74067342,"question_id":54775253,"body_markdown":"Most of the times, this error doesn&#39;t tell you the originating class so it&#39;s very hard to intentionally reproduce the problem. After trying a lot, I finally updated project JDK to 11.0.16 (from 11.0.7) and it worked!","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>Most of the times, this error doesn't tell you the originating class so it's very hard to intentionally reproduce the problem. After trying a lot, I finally updated project JDK to 11.0.16 (from 11.0.7) and it worked!</p>\n"},{"tags":[],"owner":{"account_id":1013261,"reputation":61,"user_id":1025387,"display_name":"Naveen LP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686692584,"creation_date":1686692584,"answer_id":76468908,"question_id":54775253,"body_markdown":"In case anyone else faces this issue: we had to change the java compiler from javac to eclipse (anything else that&#39;s not javac) to get our code to compile. Upgrading/downgrading jdk didn&#39;t fix the issue for us. \r\n\r\n[![settings on intellij idea][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AhWkT.png","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>In case anyone else faces this issue: we had to change the java compiler from javac to eclipse (anything else that's not javac) to get our code to compile. Upgrading/downgrading jdk didn't fix the issue for us.</p>\n<p><a href=\"https://i.stack.imgur.com/AhWkT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AhWkT.png\" alt=\"settings on intellij idea\" /></a></p>\n"},{"tags":[],"owner":{"account_id":17426473,"reputation":990,"user_id":12631293,"display_name":"Tomasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695287396,"creation_date":1695287396,"answer_id":77148779,"question_id":54775253,"body_markdown":"In my case I &lt;b&gt;intalled latest java 11 from oracle &lt;/b&gt;(Java SE Development Kit 11.0.19) and it solved problem. You can download latest version here : https://www.oracle.com/pl/java/technologies/javase/jdk11-archive-downloads.html","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p>In my case I <b>intalled latest java 11 from oracle </b>(Java SE Development Kit 11.0.19) and it solved problem. You can download latest version here : <a href=\"https://www.oracle.com/pl/java/technologies/javase/jdk11-archive-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/pl/java/technologies/javase/jdk11-archive-downloads.html</a></p>\n"}],"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41217,"favorite_count":0,"down_vote_count":0,"up_vote_count":73,"accepted_answer_id":54776592,"answer_count":8,"score":73,"last_activity_date":1695287396,"creation_date":1550612018,"question_id":54775253,"body_markdown":"**Code** (spring-web 5.1.2)\r\n\r\n    public static void main(String[] args) {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.set(HttpHeaders.AUTHORIZATION, &quot;token&quot;);\r\n        HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\r\n\r\n        ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\r\n                &quot;https://example.com&quot;,\r\n                HttpMethod.GET,\r\n                new HttpEntity&lt;&gt;(headers),\r\n                new ParameterizedTypeReference&lt;&gt;() { // fails here\r\n                });\r\n    }\r\n\r\n**OracleJDK 1.8** (expected output)\r\n\r\n&gt; cannot infer type arguments for\r\n&gt; org.springframework.core.ParameterizedTypeReference&lt;T&gt; \r\n\r\n&gt; reason: cannot use &#39;&lt;&gt;&#39; with anonymous inner classes\r\n\r\n**OracleJDK 11.0.2** (not expected output)\r\n\r\n&gt; compiler message file broken: key=compiler.misc.msg.bug\r\n&gt; arguments=11.0.2, {1}, {2}, {3}, {4}, {5}, {6}, {7}\r\n&gt; java.lang.NullPointerException \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitApply(Flow.java:1235)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.tree.JCTree$JCMethodInvocation.accept(JCTree.java:1634)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.comp.Flow$BaseAnalyzer.scan(Flow.java:398)\r\n&gt; \tat\r\n&gt; jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitVarDef(Flow.java:989) &lt;br/&gt;\r\n&gt; ...\r\n\r\nIf I change diamond operator to explicit type\r\n\r\n `new ParameterizedTypeReference&lt;&gt;(){}` to `new ParameterizedTypeReference&lt;Object&gt;(){}`\r\n\r\nthen the code compiles successfully on both JDKs.\r\n\r\nIs it a known compiler bug?","title":"JDK 11.0.2 compilation fails with javac NPE on anonymous parameterized class type inference","body":"<p><strong>Code</strong> (spring-web 5.1.2)</p>\n\n<pre><code>public static void main(String[] args) {\n    RestTemplate restTemplate = new RestTemplate();\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.set(HttpHeaders.AUTHORIZATION, \"token\");\n    HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\n\n    ResponseEntity&lt;Object&gt; test = restTemplate.exchange(\n            \"https://example.com\",\n            HttpMethod.GET,\n            new HttpEntity&lt;&gt;(headers),\n            new ParameterizedTypeReference&lt;&gt;() { // fails here\n            });\n}\n</code></pre>\n\n<p><strong>OracleJDK 1.8</strong> (expected output)</p>\n\n<blockquote>\n  <p>cannot infer type arguments for\n  org.springframework.core.ParameterizedTypeReference </p>\n  \n  <p>reason: cannot use '&lt;>' with anonymous inner classes</p>\n</blockquote>\n\n<p><strong>OracleJDK 11.0.2</strong> (not expected output)</p>\n\n<blockquote>\n  <p>compiler message file broken: key=compiler.misc.msg.bug\n  arguments=11.0.2, {1}, {2}, {3}, {4}, {5}, {6}, {7}\n  java.lang.NullPointerException    at\n  jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitApply(Flow.java:1235)\n    at\n  jdk.compiler/com.sun.tools.javac.tree.JCTree$JCMethodInvocation.accept(JCTree.java:1634)\n    at\n  jdk.compiler/com.sun.tools.javac.tree.TreeScanner.scan(TreeScanner.java:49)\n    at\n  jdk.compiler/com.sun.tools.javac.comp.Flow$BaseAnalyzer.scan(Flow.java:398)\n    at\n  jdk.compiler/com.sun.tools.javac.comp.Flow$FlowAnalyzer.visitVarDef(Flow.java:989) <br/>\n  ...</p>\n</blockquote>\n\n<p>If I change diamond operator to explicit type</p>\n\n<p><code>new ParameterizedTypeReference&lt;&gt;(){}</code> to <code>new ParameterizedTypeReference&lt;Object&gt;(){}</code></p>\n\n<p>then the code compiles successfully on both JDKs.</p>\n\n<p>Is it a known compiler bug?</p>\n"},{"tags":["java","jms","ibm-mq","cics"],"comments":[{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":0,"creation_date":1694052169,"post_id":77056065,"comment_id":135841619,"body_markdown":"Does this answer your question? [getting 2110 MQRC format error from Mainframe when sending request and getting reply from IBM MQ using JMS](https://stackoverflow.com/questions/76998990/getting-2110-mqrc-format-error-from-mainframe-when-sending-request-and-getting-r)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/76998990/getting-2110-mqrc-format-error-from-mainframe-when-sending-request-and-getting-r\">getting 2110 MQRC format error from Mainframe when sending request and getting reply from IBM MQ using JMS</a>"},{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":1,"creation_date":1694052244,"post_id":77056065,"comment_id":135841630,"body_markdown":"You should refine your original question not open a duplicate because you didn&#39;t like the response.","body":"You should refine your original question not open a duplicate because you didn&#39;t like the response."}],"answers":[{"tags":[],"owner":{"account_id":1535582,"reputation":7172,"user_id":1431734,"display_name":"Roger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694131784,"creation_date":1694131784,"answer_id":77063456,"question_id":77056065,"body_markdown":"You didn&#39;t follow any tips I gave you in the other post on the same subject. There is a lot wrong with your code so I decided to play around with my own code because I was bored today. \r\n\r\nI don&#39;t think you are understanding how MQ handles the chaining of embedded structures:\r\n\r\nThis sets the CCSID of the MQMD header:\r\n\r\n    message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\r\n\r\nWhereas this sets the CCSID of the first embedded structure:\r\n\r\n    message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\r\n\r\nNext, why are you setting the MQMD UserId field? There is really no purpose to it. \r\n\r\nAnd your setting of the MQMD format field is not correct.  \r\n\r\nFinally, is the message payload or any of the structures going to be in EBCDIC? If not, then do NOT attempt to set the CCSID, because it will just break or generate an error.\r\n\r\nHere is a fully functioning JMS application that puts a CICS message to a queue.\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import java.util.Hashtable;\r\n    \r\n    import javax.jms.BytesMessage;\r\n    import javax.jms.Destination;\r\n    import javax.jms.JMSException;\r\n    import javax.jms.Queue;\r\n    import javax.jms.QueueConnection;\r\n    import javax.jms.QueueConnectionFactory;\r\n    import javax.jms.QueueSender;\r\n    import javax.jms.QueueSession;\r\n    import javax.jms.Session;\r\n    import javax.naming.Context;\r\n    import javax.naming.InitialContext;\r\n    import javax.naming.NamingException;\r\n    \r\n    import com.ibm.msg.client.jms.JmsDestination;\r\n    \r\n    import com.ibm.mq.MQException;\r\n    import com.ibm.mq.constants.MQConstants;\r\n    \r\n    /**\r\n     * Program Name\r\n     *  MQTestJMS03\r\n     *\r\n     * Description\r\n     *  This java JMS class will connect to a remote queue manager using JNDI and put a message to a queue.\r\n     *\r\n     * Sample Command Line Parameters\r\n     *  -c myQCF -q dev.test.q -f C:\\JNDI-Directory\\roger\\mqjndi -u UserID -x Password\r\n     *\r\n     *  Sample MQ JNDI Commands:\r\n     *    DEFINE QCF(myQCF) QMANAGER(MQA1) CHANNEL(TEST.CHL) HOSTNAME(127.0.0.1) PORT(1414) TRANSPORT(CLIENT) FAILIFQUIESCE(YES)\r\n     *    DEFINE Q(dev.test.q) QUEUE(TEST.Q1) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\r\n     *    DEFINE Q(dev.test.q.reply) QUEUE(TEST.REPLY.Q) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\r\n     *\r\n     * @author Roger Lacroix\r\n     */\r\n    public class MQTestJMS03\r\n    {\r\n       private static final SimpleDateFormat  LOGGER_TIMESTAMP = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss.SSS&quot;);\r\n       private final String BLANK4 = &quot;    &quot;;\r\n       private final String BLANK8 = &quot;        &quot;;\r\n    \r\n       private QueueConnectionFactory cf;\r\n       private String qName;\r\n       private Destination destination = null;\r\n       private Queue replyQ;\r\n       private Hashtable&lt;String,String&gt; params;\r\n    \r\n       public MQTestJMS03() throws NamingException\r\n       {\r\n          super();\r\n          params = new Hashtable&lt;String,String&gt;();\r\n       }\r\n    \r\n       /**\r\n        * Make sure the required parameters are present.\r\n        * @return true/false\r\n        */\r\n       private boolean allParamsPresent()\r\n       {\r\n          boolean b = params.containsKey(&quot;-c&quot;) &amp;&amp; params.containsKey(&quot;-q&quot;) &amp;&amp;\r\n                      params.containsKey(&quot;-f&quot;) &amp;&amp;\r\n                      params.containsKey(&quot;-u&quot;) &amp;&amp; params.containsKey(&quot;-x&quot;);\r\n    \r\n          return b;\r\n       }\r\n    \r\n       /**\r\n        * Extract the command-line parameters and initialize the MQ variables.\r\n        * @param args\r\n        * @throws IllegalArgumentException\r\n        */\r\n       private void init(String[] args) throws IllegalArgumentException\r\n       {\r\n          if (args.length &gt; 0 &amp;&amp; (args.length % 2) == 0)\r\n          {\r\n             for (int i = 0; i &lt; args.length; i += 2)\r\n             {\r\n                params.put(args[i], args[i + 1]);\r\n             }\r\n          }\r\n          else\r\n          {\r\n             throw new IllegalArgumentException();\r\n          }\r\n    \r\n          if (allParamsPresent())\r\n          {\r\n             Hashtable&lt;String,String&gt; env = new Hashtable&lt;String,String&gt;();\r\n             env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.fscontext.RefFSContextFactory&quot;);\r\n             env.put(Context.PROVIDER_URL, &quot;file:/&quot;+(String) params.get(&quot;-f&quot;));\r\n    \r\n             try\r\n             {\r\n                Context ctx = new InitialContext(env);\r\n    \r\n                cf = (QueueConnectionFactory) ctx.lookup((String) params.get(&quot;-c&quot;));\r\n                qName = ((Queue) ctx.lookup((String) params.get(&quot;-q&quot;))).getQueueName();\r\n                replyQ = (Queue) ctx.lookup((String) params.get(&quot;-q&quot;) + &quot;.reply&quot;);\r\n             }\r\n             catch (NamingException e)\r\n             {\r\n                MQTestJMS03.logger(e.getLocalizedMessage());\r\n                e.printStackTrace();\r\n                throw new IllegalArgumentException();\r\n             }\r\n             catch (JMSException e)\r\n             {\r\n                MQTestJMS03.logger(e.getLocalizedMessage());\r\n                e.printStackTrace();\r\n             }\r\n          }\r\n          else\r\n          {\r\n             throw new IllegalArgumentException();\r\n          }\r\n       }\r\n    \r\n       /**\r\n        * Test the connection to the queue manager.\r\n        * @throws MQException\r\n        */\r\n       private void testConn() throws JMSException\r\n       {\r\n          QueueConnection conn = null;\r\n          QueueSession session = null;\r\n    \r\n          try\r\n          {\r\n             conn = cf.createQueueConnection((String) params.get(&quot;-u&quot;), (String) params.get(&quot;-x&quot;));\r\n             conn.start();\r\n    \r\n             session = conn.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\r\n             MQTestJMS03.logger(&quot;successfully connected.&quot;);\r\n    \r\n             sendMsg(session);\r\n          }\r\n          catch (JMSException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          finally\r\n          {\r\n             try\r\n             {\r\n                if (session != null)\r\n                   session.close();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;session.close() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n    \r\n             try\r\n             {\r\n                if (conn != null)\r\n                   conn.stop();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;connection.stop() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n    \r\n             try\r\n             {\r\n                if (conn != null)\r\n                   conn.close();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;connection.close() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n          }\r\n       }\r\n    \r\n       /**\r\n        * Send a message to a queue.\r\n        * @throws MQException\r\n        */\r\n       private void sendMsg(QueueSession session) throws JMSException\r\n       {\r\n          QueueSender sender = null;\r\n    \r\n          try\r\n          {\r\n             destination = session.createQueue(qName);\r\n    \r\n             ((JmsDestination) destination).setIntProperty(MQConstants.WMQ_MQMD_MESSAGE_CONTEXT,MQConstants.WMQ_MDCTX_SET_IDENTITY_CONTEXT);\r\n    \r\n             // Enable write of MQMD fields. See documentation for further details.\r\n             ((JmsDestination) destination).setBooleanProperty(MQConstants.WMQ_MQMD_WRITE_ENABLED, true);\r\n    \r\n             sender = session.createSender((Queue) destination);\r\n    \r\n             BytesMessage message = session.createBytesMessage();\r\n    \r\n             // Request Headers\r\n             message.setStringProperty(&quot;JMS_IBM_MQMD_UserIdentifier&quot;, &quot;RECFUSER&quot;);\r\n    //         message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\r\n             message.setJMSReplyTo(replyQ);\r\n    \r\n             /* Set the format value in the MQRFH2 header to CICS because that is the next embedded message. */\r\n             message.setStringProperty(&quot;JMS_IBM_Format&quot;, &quot;MQCICS&quot;);\r\n    //         message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\r\n    \r\n             // Construct the CIH header as a byte array\r\n             ByteArrayOutputStream outBytes = new ByteArrayOutputStream();\r\n             DataOutputStream outData = new DataOutputStream(outBytes);\r\n    \r\n             outData.writeBytes(&quot;CIH &quot;);     // MQCHAR strucId\r\n             outData.writeInt(2);            // MQLONG version\r\n             outData.writeInt(180);          // MQLONG strucLength\r\n             outData.writeInt(MQConstants.MQENC_INTEGER_NORMAL); // MQLONG encoding\r\n    \r\n             // Only set this to 500 if your comm area aka message data is EBCDIC\r\n             outData.writeInt(500);          // MQLONG CodedCharSetId;\r\n             outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8 Format;\r\n             outData.writeInt(4);            // MQLONG Flags;\r\n             outData.writeInt(0);            // MQLONG ReturnCode;\r\n             outData.writeInt(0);            // MQLONG CompCode; Completion code\r\n             outData.writeInt(0);            // MQLONG Reason; MQ reason code\r\n             outData.writeInt(0x111);        // MQCUOWC_ONLY // MQLONG UOWControl; Unit of work control\r\n    \r\n             outData.writeInt(-2);       // MQCGWI_DEFAULT // MQLONG GetWaitInterval;\r\n             outData.writeInt(1);        // MQCLT_PROGRAM // MQLONG LinkType;\r\n             outData.writeInt(-1);       // MQLONG OutputDataLength;\r\n             outData.writeInt(0);        // MQLONG FacilityKeepTime;\r\n             outData.writeInt(0);        // MQLONG ADSDescriptor;\r\n             outData.writeInt(0);        // MQLONG ConversationalTask;\r\n             outData.writeInt(0);        // MQLONG TaskEndStatus;\r\n             outData.write(BLANK8.getBytes()); // MQBYTE Facility[8];\r\n             outData.writeBytes(BLANK4); // MQCHAR4 Function;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 `    ;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Authenticator;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Reserved1;\r\n             outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8\r\n             outData.writeBytes(BLANK4); // MQCHAR4 RemoteSysId;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 RemoteTrans Id;\r\n             outData.writeBytes(&quot;ABCD&quot;); // MQCHAR4 TransactionId;;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 FacilityLike;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 AttentionId;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 StartCode;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 CancelCode;\r\n             outData.writeBytes(BLANK4); // MQCHAR4 NextTransactionId;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Reserved2;\r\n             outData.writeBytes(BLANK8); // MQCHAR8 Reserved3;\r\n             outData.writeInt(0);        // MQLONG CursorPosition;\r\n             outData.writeInt(0);        // MQLONG ErrorOffset;\r\n             outData.writeInt(0);        // MQLONG InputItem;\r\n             outData.writeInt(0);        // MQLONG Reserved4;\r\n             // ---- make sure progName is exactly 8 characters\r\n             StringBuffer pgmName = new StringBuffer(&quot;TESTPGM&quot;);\r\n             for (int i = pgmName.length(); i &lt; 8; i++)\r\n                 pgmName.append(&#39; &#39;);\r\n             // ---- write program name followed by commarea\r\n             outData.writeBytes(pgmName.substring(0, 8));\r\n             outData.writeBytes(&quot;commArea 012356789&quot;);\r\n    \r\n             message.writeBytes(outBytes.toByteArray());\r\n    \r\n             sender.send(message);\r\n    \r\n             MQTestJMS03.logger(&quot;Message sent.&quot;);\r\n          }\r\n          catch (JMSException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          catch (IOException e)\r\n          {\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          finally\r\n          {\r\n             try\r\n             {\r\n                if (sender != null)\r\n                   sender.close();\r\n             }\r\n             catch (Exception ex)\r\n             {\r\n                MQTestJMS03.logger(&quot;sender.close() : &quot; + ex.getLocalizedMessage());\r\n             }\r\n          }\r\n       }\r\n    \r\n       /**\r\n        * A simple logger method\r\n        * @param data\r\n        */\r\n       public static void logger(String data)\r\n       {\r\n          String className = Thread.currentThread().getStackTrace()[2].getClassName();\r\n    \r\n          // Remove the package info.\r\n          if ( (className != null) &amp;&amp; (className.lastIndexOf(&#39;.&#39;) != -1) )\r\n             className = className.substring(className.lastIndexOf(&#39;.&#39;)+1);\r\n    \r\n          System.out.println(LOGGER_TIMESTAMP.format(new Date())+&quot; &quot;+className+&quot;: &quot;+Thread.currentThread().getStackTrace()[2].getMethodName()+&quot;: &quot;+data);\r\n       }\r\n    \r\n       /**\r\n        * main line\r\n        * @param args\r\n        */\r\n       public static void main(String[] args)\r\n       {\r\n          try\r\n          {\r\n             MQTestJMS03 tj = new MQTestJMS03();\r\n             tj.init(args);\r\n             tj.testConn();\r\n             MQTestJMS03.logger(&quot;finished.&quot;);\r\n          }\r\n          catch (IllegalArgumentException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;Usage: java MQTestJMS03 -c QueueConnectionFactoryName -q JMS_Queue_Name -f path_to_MQ_JNDI -u UserID -x Password&quot;);\r\n             System.exit(1);\r\n          }\r\n          catch (NamingException ex)\r\n          {\r\n             MQTestJMS03.logger(ex.getLocalizedMessage());\r\n             ex.printStackTrace();\r\n    \r\n          }\r\n          catch (JMSException e)\r\n          {\r\n             MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\r\n             MQTestJMS03.logger(e.getLocalizedMessage());\r\n             e.printStackTrace();\r\n          }\r\n          catch (Exception ex)\r\n          {\r\n             MQTestJMS03.logger(ex.getLocalizedMessage());\r\n             ex.printStackTrace();\r\n          }\r\n       }\r\n    }\r\n\r\nHere is a HEX dump of the message sent from my code showing the 2 embedded structures:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe message&#39;s MQMD Format field is shown here:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAnd the MQRFH2 header, JMS properties and the correctly set CICS format is shown here:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nNow, I don&#39;t currently have a CICS region to test your actual formatting CICS header and message payload. But if its not correct, just refer to the MQCIH structure in the cmqc.h file.\r\n\r\nOr you could just use the MQCIH class from the MQ Java base classes.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1R0H5.png\r\n  [2]: https://i.stack.imgur.com/05kA1.png\r\n  [3]: https://i.stack.imgur.com/IacPu.png","title":"How to resolve Unable to put message to reply queue. MQRC=2110?","body":"<p>You didn't follow any tips I gave you in the other post on the same subject. There is a lot wrong with your code so I decided to play around with my own code because I was bored today.</p>\n<p>I don't think you are understanding how MQ handles the chaining of embedded structures:</p>\n<p>This sets the CCSID of the MQMD header:</p>\n<pre><code>message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\n</code></pre>\n<p>Whereas this sets the CCSID of the first embedded structure:</p>\n<pre><code>message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\n</code></pre>\n<p>Next, why are you setting the MQMD UserId field? There is really no purpose to it.</p>\n<p>And your setting of the MQMD format field is not correct.</p>\n<p>Finally, is the message payload or any of the structures going to be in EBCDIC? If not, then do NOT attempt to set the CCSID, because it will just break or generate an error.</p>\n<p>Here is a fully functioning JMS application that puts a CICS message to a queue.</p>\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Hashtable;\n\nimport javax.jms.BytesMessage;\nimport javax.jms.Destination;\nimport javax.jms.JMSException;\nimport javax.jms.Queue;\nimport javax.jms.QueueConnection;\nimport javax.jms.QueueConnectionFactory;\nimport javax.jms.QueueSender;\nimport javax.jms.QueueSession;\nimport javax.jms.Session;\nimport javax.naming.Context;\nimport javax.naming.InitialContext;\nimport javax.naming.NamingException;\n\nimport com.ibm.msg.client.jms.JmsDestination;\n\nimport com.ibm.mq.MQException;\nimport com.ibm.mq.constants.MQConstants;\n\n/**\n * Program Name\n *  MQTestJMS03\n *\n * Description\n *  This java JMS class will connect to a remote queue manager using JNDI and put a message to a queue.\n *\n * Sample Command Line Parameters\n *  -c myQCF -q dev.test.q -f C:\\JNDI-Directory\\roger\\mqjndi -u UserID -x Password\n *\n *  Sample MQ JNDI Commands:\n *    DEFINE QCF(myQCF) QMANAGER(MQA1) CHANNEL(TEST.CHL) HOSTNAME(127.0.0.1) PORT(1414) TRANSPORT(CLIENT) FAILIFQUIESCE(YES)\n *    DEFINE Q(dev.test.q) QUEUE(TEST.Q1) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\n *    DEFINE Q(dev.test.q.reply) QUEUE(TEST.REPLY.Q) QMANAGER(MQA1) TARGCLIENT(JMS) FAILIFQUIESCE(YES)\n *\n * @author Roger Lacroix\n */\npublic class MQTestJMS03\n{\n   private static final SimpleDateFormat  LOGGER_TIMESTAMP = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss.SSS&quot;);\n   private final String BLANK4 = &quot;    &quot;;\n   private final String BLANK8 = &quot;        &quot;;\n\n   private QueueConnectionFactory cf;\n   private String qName;\n   private Destination destination = null;\n   private Queue replyQ;\n   private Hashtable&lt;String,String&gt; params;\n\n   public MQTestJMS03() throws NamingException\n   {\n      super();\n      params = new Hashtable&lt;String,String&gt;();\n   }\n\n   /**\n    * Make sure the required parameters are present.\n    * @return true/false\n    */\n   private boolean allParamsPresent()\n   {\n      boolean b = params.containsKey(&quot;-c&quot;) &amp;&amp; params.containsKey(&quot;-q&quot;) &amp;&amp;\n                  params.containsKey(&quot;-f&quot;) &amp;&amp;\n                  params.containsKey(&quot;-u&quot;) &amp;&amp; params.containsKey(&quot;-x&quot;);\n\n      return b;\n   }\n\n   /**\n    * Extract the command-line parameters and initialize the MQ variables.\n    * @param args\n    * @throws IllegalArgumentException\n    */\n   private void init(String[] args) throws IllegalArgumentException\n   {\n      if (args.length &gt; 0 &amp;&amp; (args.length % 2) == 0)\n      {\n         for (int i = 0; i &lt; args.length; i += 2)\n         {\n            params.put(args[i], args[i + 1]);\n         }\n      }\n      else\n      {\n         throw new IllegalArgumentException();\n      }\n\n      if (allParamsPresent())\n      {\n         Hashtable&lt;String,String&gt; env = new Hashtable&lt;String,String&gt;();\n         env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.fscontext.RefFSContextFactory&quot;);\n         env.put(Context.PROVIDER_URL, &quot;file:/&quot;+(String) params.get(&quot;-f&quot;));\n\n         try\n         {\n            Context ctx = new InitialContext(env);\n\n            cf = (QueueConnectionFactory) ctx.lookup((String) params.get(&quot;-c&quot;));\n            qName = ((Queue) ctx.lookup((String) params.get(&quot;-q&quot;))).getQueueName();\n            replyQ = (Queue) ctx.lookup((String) params.get(&quot;-q&quot;) + &quot;.reply&quot;);\n         }\n         catch (NamingException e)\n         {\n            MQTestJMS03.logger(e.getLocalizedMessage());\n            e.printStackTrace();\n            throw new IllegalArgumentException();\n         }\n         catch (JMSException e)\n         {\n            MQTestJMS03.logger(e.getLocalizedMessage());\n            e.printStackTrace();\n         }\n      }\n      else\n      {\n         throw new IllegalArgumentException();\n      }\n   }\n\n   /**\n    * Test the connection to the queue manager.\n    * @throws MQException\n    */\n   private void testConn() throws JMSException\n   {\n      QueueConnection conn = null;\n      QueueSession session = null;\n\n      try\n      {\n         conn = cf.createQueueConnection((String) params.get(&quot;-u&quot;), (String) params.get(&quot;-x&quot;));\n         conn.start();\n\n         session = conn.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\n         MQTestJMS03.logger(&quot;successfully connected.&quot;);\n\n         sendMsg(session);\n      }\n      catch (JMSException e)\n      {\n         MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      finally\n      {\n         try\n         {\n            if (session != null)\n               session.close();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;session.close() : &quot; + ex.getLocalizedMessage());\n         }\n\n         try\n         {\n            if (conn != null)\n               conn.stop();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;connection.stop() : &quot; + ex.getLocalizedMessage());\n         }\n\n         try\n         {\n            if (conn != null)\n               conn.close();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;connection.close() : &quot; + ex.getLocalizedMessage());\n         }\n      }\n   }\n\n   /**\n    * Send a message to a queue.\n    * @throws MQException\n    */\n   private void sendMsg(QueueSession session) throws JMSException\n   {\n      QueueSender sender = null;\n\n      try\n      {\n         destination = session.createQueue(qName);\n\n         ((JmsDestination) destination).setIntProperty(MQConstants.WMQ_MQMD_MESSAGE_CONTEXT,MQConstants.WMQ_MDCTX_SET_IDENTITY_CONTEXT);\n\n         // Enable write of MQMD fields. See documentation for further details.\n         ((JmsDestination) destination).setBooleanProperty(MQConstants.WMQ_MQMD_WRITE_ENABLED, true);\n\n         sender = session.createSender((Queue) destination);\n\n         BytesMessage message = session.createBytesMessage();\n\n         // Request Headers\n         message.setStringProperty(&quot;JMS_IBM_MQMD_UserIdentifier&quot;, &quot;RECFUSER&quot;);\n//         message.setIntProperty(&quot;JMS_IBM_MQMD_CodedCharSetId&quot;,819);\n         message.setJMSReplyTo(replyQ);\n\n         /* Set the format value in the MQRFH2 header to CICS because that is the next embedded message. */\n         message.setStringProperty(&quot;JMS_IBM_Format&quot;, &quot;MQCICS&quot;);\n//         message.setIntProperty(&quot;JMS_IBM_Character_Set&quot;, 819);\n\n         // Construct the CIH header as a byte array\n         ByteArrayOutputStream outBytes = new ByteArrayOutputStream();\n         DataOutputStream outData = new DataOutputStream(outBytes);\n\n         outData.writeBytes(&quot;CIH &quot;);     // MQCHAR strucId\n         outData.writeInt(2);            // MQLONG version\n         outData.writeInt(180);          // MQLONG strucLength\n         outData.writeInt(MQConstants.MQENC_INTEGER_NORMAL); // MQLONG encoding\n\n         // Only set this to 500 if your comm area aka message data is EBCDIC\n         outData.writeInt(500);          // MQLONG CodedCharSetId;\n         outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8 Format;\n         outData.writeInt(4);            // MQLONG Flags;\n         outData.writeInt(0);            // MQLONG ReturnCode;\n         outData.writeInt(0);            // MQLONG CompCode; Completion code\n         outData.writeInt(0);            // MQLONG Reason; MQ reason code\n         outData.writeInt(0x111);        // MQCUOWC_ONLY // MQLONG UOWControl; Unit of work control\n\n         outData.writeInt(-2);       // MQCGWI_DEFAULT // MQLONG GetWaitInterval;\n         outData.writeInt(1);        // MQCLT_PROGRAM // MQLONG LinkType;\n         outData.writeInt(-1);       // MQLONG OutputDataLength;\n         outData.writeInt(0);        // MQLONG FacilityKeepTime;\n         outData.writeInt(0);        // MQLONG ADSDescriptor;\n         outData.writeInt(0);        // MQLONG ConversationalTask;\n         outData.writeInt(0);        // MQLONG TaskEndStatus;\n         outData.write(BLANK8.getBytes()); // MQBYTE Facility[8];\n         outData.writeBytes(BLANK4); // MQCHAR4 Function;\n         outData.writeBytes(BLANK4); // MQCHAR4 `    ;\n         outData.writeBytes(BLANK8); // MQCHAR8 Authenticator;\n         outData.writeBytes(BLANK8); // MQCHAR8 Reserved1;\n         outData.writeBytes(MQConstants.MQFMT_STRING); // MQCHAR8\n         outData.writeBytes(BLANK4); // MQCHAR4 RemoteSysId;\n         outData.writeBytes(BLANK4); // MQCHAR4 RemoteTrans Id;\n         outData.writeBytes(&quot;ABCD&quot;); // MQCHAR4 TransactionId;;\n         outData.writeBytes(BLANK4); // MQCHAR4 FacilityLike;\n         outData.writeBytes(BLANK4); // MQCHAR4 AttentionId;\n         outData.writeBytes(BLANK4); // MQCHAR4 StartCode;\n         outData.writeBytes(BLANK4); // MQCHAR4 CancelCode;\n         outData.writeBytes(BLANK4); // MQCHAR4 NextTransactionId;\n         outData.writeBytes(BLANK8); // MQCHAR8 Reserved2;\n         outData.writeBytes(BLANK8); // MQCHAR8 Reserved3;\n         outData.writeInt(0);        // MQLONG CursorPosition;\n         outData.writeInt(0);        // MQLONG ErrorOffset;\n         outData.writeInt(0);        // MQLONG InputItem;\n         outData.writeInt(0);        // MQLONG Reserved4;\n         // ---- make sure progName is exactly 8 characters\n         StringBuffer pgmName = new StringBuffer(&quot;TESTPGM&quot;);\n         for (int i = pgmName.length(); i &lt; 8; i++)\n             pgmName.append(' ');\n         // ---- write program name followed by commarea\n         outData.writeBytes(pgmName.substring(0, 8));\n         outData.writeBytes(&quot;commArea 012356789&quot;);\n\n         message.writeBytes(outBytes.toByteArray());\n\n         sender.send(message);\n\n         MQTestJMS03.logger(&quot;Message sent.&quot;);\n      }\n      catch (JMSException e)\n      {\n         MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      catch (IOException e)\n      {\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      finally\n      {\n         try\n         {\n            if (sender != null)\n               sender.close();\n         }\n         catch (Exception ex)\n         {\n            MQTestJMS03.logger(&quot;sender.close() : &quot; + ex.getLocalizedMessage());\n         }\n      }\n   }\n\n   /**\n    * A simple logger method\n    * @param data\n    */\n   public static void logger(String data)\n   {\n      String className = Thread.currentThread().getStackTrace()[2].getClassName();\n\n      // Remove the package info.\n      if ( (className != null) &amp;&amp; (className.lastIndexOf('.') != -1) )\n         className = className.substring(className.lastIndexOf('.')+1);\n\n      System.out.println(LOGGER_TIMESTAMP.format(new Date())+&quot; &quot;+className+&quot;: &quot;+Thread.currentThread().getStackTrace()[2].getMethodName()+&quot;: &quot;+data);\n   }\n\n   /**\n    * main line\n    * @param args\n    */\n   public static void main(String[] args)\n   {\n      try\n      {\n         MQTestJMS03 tj = new MQTestJMS03();\n         tj.init(args);\n         tj.testConn();\n         MQTestJMS03.logger(&quot;finished.&quot;);\n      }\n      catch (IllegalArgumentException e)\n      {\n         MQTestJMS03.logger(&quot;Usage: java MQTestJMS03 -c QueueConnectionFactoryName -q JMS_Queue_Name -f path_to_MQ_JNDI -u UserID -x Password&quot;);\n         System.exit(1);\n      }\n      catch (NamingException ex)\n      {\n         MQTestJMS03.logger(ex.getLocalizedMessage());\n         ex.printStackTrace();\n\n      }\n      catch (JMSException e)\n      {\n         MQTestJMS03.logger(&quot;getLinkedException()=&quot; + e.getLinkedException());\n         MQTestJMS03.logger(e.getLocalizedMessage());\n         e.printStackTrace();\n      }\n      catch (Exception ex)\n      {\n         MQTestJMS03.logger(ex.getLocalizedMessage());\n         ex.printStackTrace();\n      }\n   }\n}\n</code></pre>\n<p>Here is a HEX dump of the message sent from my code showing the 2 embedded structures:</p>\n<p><a href=\"https://i.stack.imgur.com/1R0H5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1R0H5.png\" alt=\"enter image description here\" /></a></p>\n<p>The message's MQMD Format field is shown here:</p>\n<p><a href=\"https://i.stack.imgur.com/05kA1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/05kA1.png\" alt=\"enter image description here\" /></a></p>\n<p>And the MQRFH2 header, JMS properties and the correctly set CICS format is shown here:</p>\n<p><a href=\"https://i.stack.imgur.com/IacPu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IacPu.png\" alt=\"enter image description here\" /></a></p>\n<p>Now, I don't currently have a CICS region to test your actual formatting CICS header and message payload. But if its not correct, just refer to the MQCIH structure in the cmqc.h file.</p>\n<p>Or you could just use the MQCIH class from the MQ Java base classes.</p>\n"}],"owner":{"account_id":29272689,"reputation":27,"user_id":22427101,"display_name":"SRA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695287389,"creation_date":1694050014,"question_id":77056065,"body_markdown":"I am encountering an issue when sending the message in this following manner. I am sending the message using CICS via JMS. I receive the error &quot;Unable to put message to reply queue&quot; with an MQRC=2110 error code on the mainframe side, and I also receive a null response. Can you help me resolve this issues.\r\n\r\nVersion : IBM MQ 9.1\r\nI am sending the code like this...\r\n\r\n```\r\nHashtable&lt;String, String&gt; environment = new Hashtable&lt;String, String&gt;();\r\n\r\n\t\t\tenvironment.put(Context.INITIAL_CONTEXT_FACTORY,\r\n\t\t\t\t\t&quot;com.ibm.websphere.naming.WsnInitialContextFactory&quot;);\r\n\r\n\t\t\t// Setup JNDI context\r\n\t\t\tContext context = new InitialContext(environment);\r\n\r\n\t\t\t// Look up connection factory and destination queue\r\n\t\t\tConnectionFactory connectionFactory = (ConnectionFactory) context\r\n\t\t\t\t\t.lookup(&quot;jms/xyz&quot;);\r\n\t\t\t\r\n\t\t\t// creating request Queue\r\n\t\t\tDestination requestQueue = (Destination) context\r\n\t\t\t\t\t.lookup(requestQueueName);\r\n\r\n\t\t\tConnection connection = connectionFactory.createConnection();\r\n\t\t\tSession session = connection.createSession(false,\r\n\t\t\t\t\tSession.AUTO_ACKNOWLEDGE);\r\n\t\t\tlogger.info(&quot;getJMSConnection:: JMS connections  created ...&quot;);\r\n","title":"How to resolve Unable to put message to reply queue. MQRC=2110?","body":"<p>I am encountering an issue when sending the message in this following manner. I am sending the message using CICS via JMS. I receive the error &quot;Unable to put message to reply queue&quot; with an MQRC=2110 error code on the mainframe side, and I also receive a null response. Can you help me resolve this issues.</p>\n<p>Version : IBM MQ 9.1\nI am sending the code like this...</p>\n<pre><code>Hashtable&lt;String, String&gt; environment = new Hashtable&lt;String, String&gt;();\n\n            environment.put(Context.INITIAL_CONTEXT_FACTORY,\n                    &quot;com.ibm.websphere.naming.WsnInitialContextFactory&quot;);\n\n            // Setup JNDI context\n            Context context = new InitialContext(environment);\n\n            // Look up connection factory and destination queue\n            ConnectionFactory connectionFactory = (ConnectionFactory) context\n                    .lookup(&quot;jms/xyz&quot;);\n            \n            // creating request Queue\n            Destination requestQueue = (Destination) context\n                    .lookup(requestQueueName);\n\n            Connection connection = connectionFactory.createConnection();\n            Session session = connection.createSession(false,\n                    Session.AUTO_ACKNOWLEDGE);\n            logger.info(&quot;getJMSConnection:: JMS connections  created ...&quot;);\n</code></pre>\n"},{"tags":["java","apache-camel","messaging","multicast"],"owner":{"account_id":235050,"reputation":75,"user_id":1794333,"accept_rate":100,"display_name":"Sheri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695287090,"creation_date":1695287090,"question_id":77148741,"body_markdown":"I am working on a messaging system using Apache Camel, where I need to send a message to two different endpoints using the `.to(...)` and `.toD(...)` methods. The challenge I&#39;m facing is that I want to prevent the message from being sent to all endpoints if any one of them throws an exception.\r\n\r\nI&#39;ve experimented with using `OnException`, but the issue is that when an exception is caught, the previous messages have already been sent to healthy endpoints that were processed before the one with the exception.\r\n\r\nDo you have any suggestions or techniques to achieve the desired behavior of stopping message propagation to all endpoints if an exception occurs at any point in the process?\r\n\r\nClarification: if `.toD(&quot;endpoint2&quot;)` throws and exception, no message need to sent to the `endpoint1` as well\r\n```java\r\n// Code snippet illustrating the message sending to two different endpoints\r\nfrom(&quot;direct:start&quot;)\r\n    .multicast()\r\n      .to(&quot;endpoint1&quot;)\r\n      .toD(&quot;endpoint2&quot;)\r\n    .end()\r\n...\r\n```\r\n\r\nThank you for your assistance!","title":"How to configure Apache Camel Multicast to avoid sending message to all endpoints if just one endpoint throws exception","body":"<p>I am working on a messaging system using Apache Camel, where I need to send a message to two different endpoints using the <code>.to(...)</code> and <code>.toD(...)</code> methods. The challenge I'm facing is that I want to prevent the message from being sent to all endpoints if any one of them throws an exception.</p>\n<p>I've experimented with using <code>OnException</code>, but the issue is that when an exception is caught, the previous messages have already been sent to healthy endpoints that were processed before the one with the exception.</p>\n<p>Do you have any suggestions or techniques to achieve the desired behavior of stopping message propagation to all endpoints if an exception occurs at any point in the process?</p>\n<p>Clarification: if <code>.toD(&quot;endpoint2&quot;)</code> throws and exception, no message need to sent to the <code>endpoint1</code> as well</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Code snippet illustrating the message sending to two different endpoints\nfrom(&quot;direct:start&quot;)\n    .multicast()\n      .to(&quot;endpoint1&quot;)\n      .toD(&quot;endpoint2&quot;)\n    .end()\n...\n</code></pre>\n<p>Thank you for your assistance!</p>\n"},{"tags":["java","inner-classes","static-initializer"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695286284,"creation_date":1695285490,"answer_id":77148523,"question_id":77148390,"body_markdown":"`new Foo().new Bar()` is compiled to the following bytecode:\r\n\r\n    NEW Foo$Bar\r\n    DUP\r\n    NEW Foo\r\n    DUP\r\n    INVOKESPECIAL Foo.&lt;init&gt; ()V\r\n    INVOKESPECIAL Foo$Bar.&lt;init&gt; (LFoo;)V\r\n\r\nNote that it is `Bar` that is first created (though `Foo`&#39;s constructor is called first). The `new` instruction is what causes a class to be initialised (see [spec][1]), *not* the constructor call. The  When a class is initialised, its static initialisers run (see [spec][2]).\r\n\r\nJust in case you are not aware, non-static inner classes are implemented by having the constructors take an extra parameter, which serves as the enclosing instance. `new Foo().new Bar()` is basically saying `new Foo.Bar(new Foo())`, but only the former syntax is valid.\r\n\r\nI&#39;m not sure if such an output is behaviour *guaranteed* by the spec. It could technically have been compiled in a way such that `NEW Foo` occurs first, but that would require an additional variable, as if you wrote:\r\n\r\n```\r\nvar f = new Foo();\r\nf.new Bar();\r\n```\r\n\r\nSo when you put `new Foo().new Bar()` in an unrelated class, `Bar` gets initialised first, and so `Bar` is printed first.\r\n\r\nWhen you put `new Foo().new Bar()` in a static method declared in `Foo`, however, `Foo` will be initialised before any of the `new` instructions, hence `Foo` is printed first. This is because calling a static method in `Foo` causes `Foo` to be initialised.\r\n\r\nSee all the conditions for a class or interface `T` to be initialised in the [spec][3]:\r\n\r\n&gt; - T is a class and an instance of T is created.\r\n&gt; \r\n&gt; - A static method declared by T is invoked.\r\n&gt; \r\n&gt; - A static field declared by T is assigned.\r\n&gt; \r\n&gt; - A static field declared by T is used and the field is not a constant variable (&#167;4.12.4).\r\n\r\nNote that the first one refers to the execution of the `new` instruction, not the constructor call.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-6.html#jvms-6.5.new\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.7\r\n  [3]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-12.html#jls-12.4.1","title":"Between outer and inner classes, their static initializers run order is different when invoking main method inside or outside the outer class","body":"<p><code>new Foo().new Bar()</code> is compiled to the following bytecode:</p>\n<pre><code>NEW Foo$Bar\nDUP\nNEW Foo\nDUP\nINVOKESPECIAL Foo.&lt;init&gt; ()V\nINVOKESPECIAL Foo$Bar.&lt;init&gt; (LFoo;)V\n</code></pre>\n<p>Note that it is <code>Bar</code> that is first created (though <code>Foo</code>'s constructor is called first). The <code>new</code> instruction is what causes a class to be initialised (see <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-6.html#jvms-6.5.new\" rel=\"nofollow noreferrer\">spec</a>), <em>not</em> the constructor call. The  When a class is initialised, its static initialisers run (see <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.7\" rel=\"nofollow noreferrer\">spec</a>).</p>\n<p>Just in case you are not aware, non-static inner classes are implemented by having the constructors take an extra parameter, which serves as the enclosing instance. <code>new Foo().new Bar()</code> is basically saying <code>new Foo.Bar(new Foo())</code>, but only the former syntax is valid.</p>\n<p>I'm not sure if such an output is behaviour <em>guaranteed</em> by the spec. It could technically have been compiled in a way such that <code>NEW Foo</code> occurs first, but that would require an additional variable, as if you wrote:</p>\n<pre><code>var f = new Foo();\nf.new Bar();\n</code></pre>\n<p>So when you put <code>new Foo().new Bar()</code> in an unrelated class, <code>Bar</code> gets initialised first, and so <code>Bar</code> is printed first.</p>\n<p>When you put <code>new Foo().new Bar()</code> in a static method declared in <code>Foo</code>, however, <code>Foo</code> will be initialised before any of the <code>new</code> instructions, hence <code>Foo</code> is printed first. This is because calling a static method in <code>Foo</code> causes <code>Foo</code> to be initialised.</p>\n<p>See all the conditions for a class or interface <code>T</code> to be initialised in the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-12.html#jls-12.4.1\" rel=\"nofollow noreferrer\">spec</a>:</p>\n<blockquote>\n<ul>\n<li><p>T is a class and an instance of T is created.</p>\n</li>\n<li><p>A static method declared by T is invoked.</p>\n</li>\n<li><p>A static field declared by T is assigned.</p>\n</li>\n<li><p>A static field declared by T is used and the field is not a constant variable (§4.12.4).</p>\n</li>\n</ul>\n</blockquote>\n<p>Note that the first one refers to the execution of the <code>new</code> instruction, not the constructor call.</p>\n"}],"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77148523,"answer_count":1,"score":2,"last_activity_date":1695286594,"creation_date":1695284352,"question_id":77148390,"body_markdown":"I have the following code:\r\n\r\n```\r\nclass Foo {\r\n    static { //static initializer block\r\n        System.out.print(&quot;Foo&quot;);\r\n    }\r\n    class Bar {\r\n        static { //static initializer block\r\n            System.out.print(&quot;Bar&quot;);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) { // =&gt; This will print &quot;FooBar&quot; to the console\r\n        new Foo().new Bar();\r\n    }\r\n}\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) { // This will print &quot;BarFoo&quot; to the console\r\n        new Foo().new Bar();\r\n    }\r\n}\r\n```\r\n\r\nAs the comments say, they will print different result on independent invocation of main methods. Why the placement of main method in this case affect the result printed to the screen?\r\n","title":"Between outer and inner classes, their static initializers run order is different when invoking main method inside or outside the outer class","body":"<p>I have the following code:</p>\n<pre><code>class Foo {\n    static { //static initializer block\n        System.out.print(&quot;Foo&quot;);\n    }\n    class Bar {\n        static { //static initializer block\n            System.out.print(&quot;Bar&quot;);\n        }\n    }\n\n    public static void main(String[] args) { // =&gt; This will print &quot;FooBar&quot; to the console\n        new Foo().new Bar();\n    }\n}\n\npublic class Main {\n\n    public static void main(String[] args) { // This will print &quot;BarFoo&quot; to the console\n        new Foo().new Bar();\n    }\n}\n</code></pre>\n<p>As the comments say, they will print different result on independent invocation of main methods. Why the placement of main method in this case affect the result printed to the screen?</p>\n"},{"tags":["java","intellij-idea","enums"],"comments":[{"owner":{"account_id":11211027,"reputation":531,"user_id":8225099,"display_name":"wartoshika"},"score":0,"creation_date":1654623190,"post_id":72535123,"comment_id":128133074,"body_markdown":"I dont know a way within intellij directly but a small script with classpath reflection would do the trick. Scan for all classes that are enums and get all available values from it.","body":"I dont know a way within intellij directly but a small script with classpath reflection would do the trick. Scan for all classes that are enums and get all available values from it."},{"owner":{"account_id":14879298,"reputation":1234,"user_id":10744483,"display_name":"Olga Klisho"},"score":0,"creation_date":1654671179,"post_id":72535123,"comment_id":128143154,"body_markdown":"Please feel free to create a feature request for the issue: https://youtrack.jetbrains.com/issues/IDEA","body":"Please feel free to create a feature request for the issue: <a href=\"https://youtrack.jetbrains.com/issues/IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/IDEA</a>"}],"answers":[{"tags":[],"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695285611,"creation_date":1654623454,"answer_id":72535419,"question_id":72535123,"body_markdown":"Yes, you can do this using the type hierarchy view and export the entries to a file. I&#39;m using eclipse shortcuts and I can open the type hierarchy using `F4`. Just make sure to filter `Production` files.\r\n\r\nExample using the Guava project:\r\n\r\n[![All enums within the project][1]][1]\r\n\r\nAs for getting all the values for each enum, I don&#39;t think there&#39;s such a feature in IntelliJ, but you could probably write a script to process the exported file.\r\n\r\n**Edit**\r\n\r\nThis method will print enum values using the file exported from IntelliJ. You might need to modify it to handle errors, etc.\r\n\r\n```java\r\n    private static void printEnumClassesAndValues(String file) throws IOException {\r\n        Files.lines(Path.of(file))\r\n                .filter(line -&gt; !line.contains(&quot;java.lang&quot;))\r\n                .map(line -&gt; {\r\n                    String[] tokens = line.replaceAll(&quot;[\\\\(\\\\),]&quot;, &quot;&quot;).trim().split(&quot; &quot;);\r\n                    return String.format(&quot;%s.%s&quot;, tokens[1], tokens[0]); // package + class name\r\n                })\r\n                .forEach(enumClass -&gt; System.out.printf(&quot;%s: %s%n&quot;, enumClass, Arrays.toString(getEnumValues(enumClass))));\r\n    }\r\n\r\n    private static Enum&lt;?&gt;[] getEnumValues(String enumClass) {\r\n        try {\r\n            Method m = Class.forName(enumClass).getDeclaredMethod(&quot;values&quot;);\r\n            return (Enum&lt;?&gt;[]) m.invoke(null);\r\n        } catch (Exception ex) {\r\n            throw new RuntimeException(ex); // log or handle otherwise\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/mjenP.png","title":"Is there any way to get all the enums classes and their respective values from a project in IntelliJ?","body":"<p>Yes, you can do this using the type hierarchy view and export the entries to a file. I'm using eclipse shortcuts and I can open the type hierarchy using <code>F4</code>. Just make sure to filter <code>Production</code> files.</p>\n<p>Example using the Guava project:</p>\n<p><a href=\"https://i.stack.imgur.com/mjenP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mjenP.png\" alt=\"All enums within the project\" /></a></p>\n<p>As for getting all the values for each enum, I don't think there's such a feature in IntelliJ, but you could probably write a script to process the exported file.</p>\n<p><strong>Edit</strong></p>\n<p>This method will print enum values using the file exported from IntelliJ. You might need to modify it to handle errors, etc.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void printEnumClassesAndValues(String file) throws IOException {\n        Files.lines(Path.of(file))\n                .filter(line -&gt; !line.contains(&quot;java.lang&quot;))\n                .map(line -&gt; {\n                    String[] tokens = line.replaceAll(&quot;[\\\\(\\\\),]&quot;, &quot;&quot;).trim().split(&quot; &quot;);\n                    return String.format(&quot;%s.%s&quot;, tokens[1], tokens[0]); // package + class name\n                })\n                .forEach(enumClass -&gt; System.out.printf(&quot;%s: %s%n&quot;, enumClass, Arrays.toString(getEnumValues(enumClass))));\n    }\n\n    private static Enum&lt;?&gt;[] getEnumValues(String enumClass) {\n        try {\n            Method m = Class.forName(enumClass).getDeclaredMethod(&quot;values&quot;);\n            return (Enum&lt;?&gt;[]) m.invoke(null);\n        } catch (Exception ex) {\n            throw new RuntimeException(ex); // log or handle otherwise\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1967071,"reputation":1336,"user_id":1767021,"accept_rate":76,"display_name":"deldev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695285611,"creation_date":1654621716,"question_id":72535123,"body_markdown":"I need to create a list of classes declared as enum in a project in IntelliJ and, inside each one, list the respective values. Is there any automated way to accomplish this task, as it is a rather large project, with hundreds of occurrences.","title":"Is there any way to get all the enums classes and their respective values from a project in IntelliJ?","body":"<p>I need to create a list of classes declared as enum in a project in IntelliJ and, inside each one, list the respective values. Is there any automated way to accomplish this task, as it is a rather large project, with hundreds of occurrences.</p>\n"},{"tags":["java","spring","hibernate","jpa","jdbc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695127025,"post_id":77134580,"comment_id":135979995,"body_markdown":"Have you tried `List&lt;MyEntityDto&gt; getByUniqueName(@Param(&quot;someNamee&quot;) name)`","body":"Have you tried <code>List&lt;MyEntityDto&gt; getByUniqueName(@Param(&quot;someNamee&quot;) name)</code>"},{"owner":{"account_id":29315873,"reputation":1,"user_id":22460635,"display_name":"Bob Marley"},"score":0,"creation_date":1695127120,"post_id":77134580,"comment_id":135980017,"body_markdown":"@Jens oh sorry not someNamee, it is someName. I edited","body":"@Jens oh sorry not someNamee, it is someName. I edited"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695129604,"post_id":77134580,"comment_id":135980517,"body_markdown":"No, JPA will not return collections in queries. &#39;m.projects&#39; is treated as a join to projects and so will give you individual projects one by one from the collection. You might be better off returning MyEntity to the DTO and letting it pull out the collection: &quot;SELECT new MyEntityDto(m) FROM MyEntity m WHERE m.name=:someName&quot;","body":"No, JPA will not return collections in queries. &#39;m.projects&#39; is treated as a join to projects and so will give you individual projects one by one from the collection. You might be better off returning MyEntity to the DTO and letting it pull out the collection: &quot;SELECT new MyEntityDto(m) FROM MyEntity m WHERE m.name=:someName&quot;"},{"owner":{"account_id":29315873,"reputation":1,"user_id":22460635,"display_name":"Bob Marley"},"score":0,"creation_date":1695129985,"post_id":77134580,"comment_id":135980623,"body_markdown":"@Chris Okay, I&#39;ll give it a try, thanks for the reply.","body":"@Chris Okay, I&#39;ll give it a try, thanks for the reply."}],"answers":[{"tags":[],"owner":{"account_id":27507552,"reputation":1,"user_id":20990054,"display_name":"Adesh Malunjkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695285572,"creation_date":1695285572,"answer_id":77148535,"question_id":77134580,"body_markdown":"@Query(value=&quot;&quot;&quot;\r\nSELECT new com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\r\n&quot;&quot;&quot;) and change return to List&lt;MyEntityDto&gt;.\r\nAnd use the all-args contructor in DTO . Try with this...\r\n\r\n","title":"JPQL Collection field Mapping it is possible?","body":"<p>@Query(value=&quot;&quot;&quot;\nSELECT new com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\n&quot;&quot;&quot;) and change return to List.\nAnd use the all-args contructor in DTO . Try with this...</p>\n"}],"owner":{"account_id":29315873,"reputation":1,"user_id":22460635,"display_name":"Bob Marley"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695285572,"creation_date":1695126630,"question_id":77134580,"body_markdown":"I have a question, is it possible in Jpa to map collections of entity field to Dto?\r\nBelow is an example with List&lt;Projects&gt;\r\n\r\n\r\nEntity:\r\n\r\n    @Entity\r\n    @Table\r\n    public class MyEntity {\r\n       private String name;\r\n       @ManyToMany(...)\r\n       private List&lt;Projects&gt; projects;\r\n\r\n    }\r\n\r\n\r\nDto:\r\n\r\n    public class MyEntityDto {\r\n      private List&lt;Projects&gt; projects;\r\n    }\r\n\r\n\r\nQuery:\r\n\r\n    @Query(value=&quot;&quot;&quot;\r\n    SELECT com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\r\n    &quot;&quot;&quot;)\r\n    MyEntityDto getByUniqueName(@Param(&quot;someName&quot;) name)\r\n\r\n\r\n\r\nIt didn&#39;t work in my project, so I wanted to ask as a question","title":"JPQL Collection field Mapping it is possible?","body":"<p>I have a question, is it possible in Jpa to map collections of entity field to Dto?\nBelow is an example with List</p>\n<p>Entity:</p>\n<pre><code>@Entity\n@Table\npublic class MyEntity {\n   private String name;\n   @ManyToMany(...)\n   private List&lt;Projects&gt; projects;\n\n}\n</code></pre>\n<p>Dto:</p>\n<pre><code>public class MyEntityDto {\n  private List&lt;Projects&gt; projects;\n}\n</code></pre>\n<p>Query:</p>\n<pre><code>@Query(value=&quot;&quot;&quot;\nSELECT com.myprojects.myapp.dto.MyEntityDto (m.projects) FROM MyEntity m WHERE m.name=:someName\n&quot;&quot;&quot;)\nMyEntityDto getByUniqueName(@Param(&quot;someName&quot;) name)\n</code></pre>\n<p>It didn't work in my project, so I wanted to ask as a question</p>\n"},{"tags":["java","intellij-idea","enums"],"comments":[{"owner":{"account_id":14387497,"reputation":1756,"user_id":10393067,"display_name":"logbasex"},"score":0,"creation_date":1586516762,"post_id":42605374,"comment_id":108160653,"body_markdown":"Search tirelessly to find out :(","body":"Search tirelessly to find out :("},{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1695285722,"post_id":42605374,"comment_id":136004892,"body_markdown":"Turns out this can help: https://stackoverflow.com/a/72535419","body":"Turns out this can help: <a href=\"https://stackoverflow.com/a/72535419\">stackoverflow.com/a/72535419</a>"}],"answers":[{"tags":[],"owner":{"account_id":2748311,"reputation":469,"user_id":2368223,"display_name":"Gan Quan"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1597084120,"creation_date":1597084120,"answer_id":63345982,"question_id":42605374,"body_markdown":"Sometimes plain string search works well. Try search ` enum ` using &quot;Find in Path&quot; (`CTRL+SHIFT+F` or `CMD+SHIFT+F`). Notice the space before and after `enum`, you can adjust the search keyword depending on your code style.","title":"How to search for an Enum file type in IntelliJ","body":"<p>Sometimes plain string search works well. Try search <code>enum</code> using &quot;Find in Path&quot; (<code>CTRL+SHIFT+F</code> or <code>CMD+SHIFT+F</code>). Notice the space before and after <code>enum</code>, you can adjust the search keyword depending on your code style.</p>\n"}],"owner":{"account_id":5683576,"reputation":563,"user_id":4493848,"display_name":"Oxobo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3516,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1695285364,"creation_date":1488696399,"question_id":42605374,"body_markdown":"I&#39;m using IntelliJ 16. I know I can find *classes* by `Ctrl+N` and *files* with `Ctrl+Shift+N`, and I&#39;m also aware of [Structural Search][1], but I want to search with enum&#39;s name (not listing all enums or all files).\r\n\r\n Is there a way to **search for an Enum** file in IntelliJ (with shortcut keys)?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/26526238/how-to-search-navigate-for-to-a-java-file-type-in-intellij-13","title":"How to search for an Enum file type in IntelliJ","body":"<p>I'm using IntelliJ 16. I know I can find <em>classes</em> by <code>Ctrl+N</code> and <em>files</em> with <code>Ctrl+Shift+N</code>, and I'm also aware of <a href=\"https://stackoverflow.com/questions/26526238/how-to-search-navigate-for-to-a-java-file-type-in-intellij-13\">Structural Search</a>, but I want to search with enum's name (not listing all enums or all files).</p>\n<p>Is there a way to <strong>search for an Enum</strong> file in IntelliJ (with shortcut keys)?</p>\n"},{"tags":["java","junit4","spring-boot-test","sprint","serenity"],"answers":[{"tags":[],"owner":{"account_id":7784343,"reputation":25,"user_id":6693884,"display_name":"Satam Guin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695285112,"creation_date":1695285112,"answer_id":77148475,"question_id":76866300,"body_markdown":"I have somehow able to make it parallel. You have to add the below line in the pom.xml, \r\n\r\n    &lt;argLine&gt;-Xmx1600m&lt;/argLine&gt;\r\n\r\n\r\nThis actually help to assign the Java Heap Memory for per thread to operate so that more fork can be spawned in the the same JVM and parallel test cases can be excecuted \r\n","title":"Running Parallel With SpringIntegrationSerenityRunner is not working with maven-surefire","body":"<p>I have somehow able to make it parallel. You have to add the below line in the pom.xml,</p>\n<pre><code>&lt;argLine&gt;-Xmx1600m&lt;/argLine&gt;\n</code></pre>\n<p>This actually help to assign the Java Heap Memory for per thread to operate so that more fork can be spawned in the the same JVM and parallel test cases can be excecuted</p>\n"}],"owner":{"account_id":7784343,"reputation":25,"user_id":6693884,"display_name":"Satam Guin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77148475,"answer_count":1,"score":0,"last_activity_date":1695285112,"creation_date":1691572914,"question_id":76866300,"body_markdown":"I am trying to run the 6 test classes having 6-12 test cases in each test class with the below configuration. But somehow the parallelism is not being achieved so far. Using fork count I am able to do that but more than 1 fork means that multiple processes will be running and every test depends on 1 setUp method(actually this set up method taking much time and want to run only once and then use the returned value thereafter for the next set of test cases) which will be running once and we will use that data to perform. Please help as I don&#39;t want to create the new process and instead I want to run by multiple threads only to achieve parallelism.\r\n\r\n     `     &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t&lt;include&gt;**/stories/**/*.java&lt;/include&gt;\r\n\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;**/stories/Base*.java&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t&lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n\t\t\t\t\t&lt;parallel&gt;all&lt;/parallel&gt;\r\n\t\t\t\t\t&lt;threadCountClasses&gt;2&lt;/threadCountClasses&gt;\r\n\t\t\t\t\t&lt;threadCountMethods&gt;6&lt;/threadCountMethods&gt;\r\n\t\t\t\t\t&lt;threadCount&gt;10&lt;/threadCount&gt;\r\n\t\t\t\t\t&lt;!--&lt;forkCount&gt;3&lt;/forkCount&gt;--&gt;\r\n\t\t\t\t\t&lt;!--&lt;useUnlimitedThreads&gt;true&lt;/useUnlimitedThreads&gt;--&gt;\r\n\t\t\t\t\t&lt;perCoreThreadCount&gt;false&lt;/perCoreThreadCount&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;`","title":"Running Parallel With SpringIntegrationSerenityRunner is not working with maven-surefire","body":"<p>I am trying to run the 6 test classes having 6-12 test cases in each test class with the below configuration. But somehow the parallelism is not being achieved so far. Using fork count I am able to do that but more than 1 fork means that multiple processes will be running and every test depends on 1 setUp method(actually this set up method taking much time and want to run only once and then use the returned value thereafter for the next set of test cases) which will be running once and we will use that data to perform. Please help as I don't want to create the new process and instead I want to run by multiple threads only to achieve parallelism.</p>\n<pre><code> `     &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/stories/**/*.java&lt;/include&gt;\n                &lt;/includes&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/stories/Base*.java&lt;/exclude&gt;\n                &lt;/excludes&gt;\n                &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                &lt;parallel&gt;all&lt;/parallel&gt;\n                &lt;threadCountClasses&gt;2&lt;/threadCountClasses&gt;\n                &lt;threadCountMethods&gt;6&lt;/threadCountMethods&gt;\n                &lt;threadCount&gt;10&lt;/threadCount&gt;\n                &lt;!--&lt;forkCount&gt;3&lt;/forkCount&gt;--&gt;\n                &lt;!--&lt;useUnlimitedThreads&gt;true&lt;/useUnlimitedThreads&gt;--&gt;\n                &lt;perCoreThreadCount&gt;false&lt;/perCoreThreadCount&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;`\n</code></pre>\n"},{"tags":["python","java","pip","pyinstaller","pyenv"],"owner":{"account_id":29498563,"reputation":1,"user_id":22606064,"display_name":"tch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695285010,"creation_date":1695285010,"question_id":77148465,"body_markdown":"I am using python 3.11.5 and pytinstaller to convert my python scripts to exe but i have this error Traceback (most recent call last):\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe\\__main__.py&quot;, line 4, in &lt;module&gt;\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller\\__init__.py&quot;, line 45, in &lt;module&gt;\r\n    import pkg_resources\r\nModuleNotFoundError: No module named &#39;pkg_resources&#39;   how i can solve it?\r\n\r\nTraceback (most recent call last):\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main\r\n  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe\\__main__.py&quot;, line 4, in &lt;module&gt;\r\n  File &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller\\__init__.py&quot;, line 45, in &lt;module&gt;\r\n    import pkg_resources\r\nModuleNotFoundError: No module named &#39;pkg_resources&#39;","title":"ModuleNotFoundError: No module named &#39;pkg_resources&#39;","body":"<p>I am using python 3.11.5 and pytinstaller to convert my python scripts to exe but i have this error Traceback (most recent call last):\nFile &quot;&quot;, line 198, in <em>run_module_as_main\nFile &quot;&quot;, line 88, in <em>run_code\nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe_<em>main</em></em>.py&quot;, line 4, in \nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller_<em>init</em></em>.py&quot;, line 45, in \nimport pkg_resources\nModuleNotFoundError: No module named 'pkg_resources'   how i can solve it?</p>\n<p>Traceback (most recent call last):\nFile &quot;&quot;, line 198, in <em>run_module_as_main\nFile &quot;&quot;, line 88, in <em>run_code\nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\pyinstaller.exe_<em>main</em></em>.py&quot;, line 4, in \nFile &quot;C:\\Users\\pc\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\PyInstaller_<em>init</em></em>.py&quot;, line 45, in \nimport pkg_resources\nModuleNotFoundError: No module named 'pkg_resources'</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":6078,"reputation":61187,"user_id":10077,"accept_rate":90,"display_name":"Fred Larson"},"score":0,"creation_date":1477680309,"post_id":40311069,"comment_id":67879837,"body_markdown":"Do you have &quot;Show Console When Standard Out Changes&quot; enabled? It&#39;s on the console toolbar.","body":"Do you have &quot;Show Console When Standard Out Changes&quot; enabled? It&#39;s on the console toolbar."},{"owner":{"account_id":5962920,"reputation":117,"user_id":4687529,"accept_rate":75,"display_name":"Eric Marchetti Santos"},"score":0,"creation_date":1477680945,"post_id":40311069,"comment_id":67880187,"body_markdown":"Tried with it both turned on and off","body":"Tried with it both turned on and off"},{"owner":{"account_id":6078,"reputation":61187,"user_id":10077,"accept_rate":90,"display_name":"Fred Larson"},"score":0,"creation_date":1477681035,"post_id":40311069,"comment_id":67880228,"body_markdown":"Did you also try &quot;Pin Console&quot;?","body":"Did you also try &quot;Pin Console&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":14231490,"reputation":359,"user_id":10280599,"display_name":"Osama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695027174,"creation_date":1695027174,"answer_id":77125733,"question_id":40311069,"body_markdown":"I know this question is old, but since I&#39;ve found the [answer](https://stackoverflow.com/questions/7261151/in-eclipse-can-i-have-multiple-console-views-at-once-each-showing-a-different#comment13161278_7261264) (link to comment), I&#39;d like to leave it here:\r\n\r\nIf you want a console to remain fixed for a project/app, simply **press the button &quot;Pin Console&quot; in the console view**:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WIdIb.png","title":"Eclipse keeps changing all of my console view&#39;s display to the last run project","body":"<p>I know this question is old, but since I've found the <a href=\"https://stackoverflow.com/questions/7261151/in-eclipse-can-i-have-multiple-console-views-at-once-each-showing-a-different#comment13161278_7261264\">answer</a> (link to comment), I'd like to leave it here:</p>\n<p>If you want a console to remain fixed for a project/app, simply <strong>press the button &quot;Pin Console&quot; in the console view</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/WIdIb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WIdIb.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5962920,"reputation":117,"user_id":4687529,"accept_rate":75,"display_name":"Eric Marchetti Santos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77125733,"answer_count":1,"score":1,"last_activity_date":1695284986,"creation_date":1477679016,"question_id":40311069,"body_markdown":"I am building two applications that communicates via sockets, and I have one console view for each. However, when I run a class, every console view changes to the project I am running. I just want them to remain fixed. How do I do that?","title":"Eclipse keeps changing all of my console view&#39;s display to the last run project","body":"<p>I am building two applications that communicates via sockets, and I have one console view for each. However, when I run a class, every console view changes to the project I am running. I just want them to remain fixed. How do I do that?</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":8319552,"reputation":407,"user_id":10063655,"display_name":"vc73"},"score":0,"creation_date":1556108353,"post_id":55829684,"comment_id":98324422,"body_markdown":"I didn&#39;t understand the question, do you want to join the tables into a JPA query(and you already have the entities), or do you want to know how to map them into an entity?","body":"I didn&#39;t understand the question, do you want to join the tables into a JPA query(and you already have the entities), or do you want to know how to map them into an entity?"},{"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"score":0,"creation_date":1556108571,"post_id":55829684,"comment_id":98324548,"body_markdown":"@vc73 not i don&#39;t want to join them i want the result of &#39; UNION&#39; query of these tables","body":"@vc73 not i don&#39;t want to join them i want the result of &#39; UNION&#39; query of these tables"},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":1,"creation_date":1556117334,"post_id":55829684,"comment_id":98330427,"body_markdown":"They are 2 completely different things. Why would you want to do that?","body":"They are 2 completely different things. Why would you want to do that?"},{"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"score":0,"creation_date":1556119103,"post_id":55829684,"comment_id":98331477,"body_markdown":"@AlanHay think of it like result is gonna be used as list of users or group of users that can be choosed to receive email or sth like that","body":"@AlanHay think of it like result is gonna be used as list of users or group of users that can be choosed to receive email or sth like that"},{"owner":{"account_id":7527241,"reputation":652,"user_id":9416473,"display_name":"Akhil Surapuram"},"score":0,"creation_date":1584526210,"post_id":55829684,"comment_id":107460744,"body_markdown":"Make it as Native Query. It will work","body":"Make it as Native Query. It will work"}],"answers":[{"tags":[],"owner":{"account_id":336191,"reputation":1069,"user_id":1458562,"display_name":"Patrice Blanchardie"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1556262064,"creation_date":1556109252,"answer_id":55830177,"question_id":55829684,"body_markdown":"If you want union, I guess the structure of these 2 entities are similar.\r\n\r\nYou could create a super entity and make User and UserGroup extend this new entity. Add `@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)` on the new entity if you want to keep 2 separate tables.\r\n\r\nThen, create a Spring Data JPA Repository for the parent entity.\r\n\r\n    /**\r\n     * new abstract Superclass\r\n     */\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public abstract class User {\r\n\r\n        @Id\r\n        private String id;\r\n\r\n        //...\r\n    }\r\n    \r\n    /**\r\n     * Existing User entity\r\n     */\r\n    @Entity\r\n    @Table(name=&quot;my_users&quot;)\r\n    public class LoginUser extends User {\r\n    \r\n        private String password;\r\n    \r\n        @ManyToOne\r\n        private Group group;\r\n    \r\n        //...\r\n    }\r\n    \r\n    /**\r\n     * Existing Group entity\r\n     */\r\n    @Entity\r\n    @Table(name=&quot;my_groups&quot;)\r\n    public class Group extends User {\r\n    \r\n        private String name;\r\n    \r\n        @OneToMany(mappedBy=&quot;group&quot;)\r\n        private Set&lt;LoginUser&gt; users;\r\n\r\n        //...\r\n    }\r\n\r\n    /**\r\n     * Super repository, providing UNION\r\n     */\r\n    public interface UserRepository extends JpaRepository&lt;User, String&gt; {}\r\n\r\nCalling `UserRepository.findAll` will make JPA do the `UNION` of the 2 tables, and can return a `List&lt;User&gt;`. You&#39;ll have both `LoginUser` and `Group` instances in this list:\r\n\r\n    // UNION query returning both LoginUser and Group instances\r\n    List&lt;User&gt; myUnion = userRepository.findAll();\r\n\r\nSee https://en.wikibooks.org/wiki/Java_Persistence/Inheritance for more details about JPA inheritance.\r\n\r\nJPA/Hibernate don&#39;t support custom UNION queries, but inheritance provides out-of-the-box UNION between entities of the same hierarchy when using `TABLE_PER_CLASS` strategy.\r\n\r\nYou cant generate the query you want with JPA. It&#39;s not possible to UNION the different fields. But if you map email and title to the same field (which is a nonsense) and write the following JPQL, JPA will generate your query.\r\n\r\n     SELECT u.yourField FROM User u;","title":"Union tables with spring data jpa","body":"<p>If you want union, I guess the structure of these 2 entities are similar.</p>\n\n<p>You could create a super entity and make User and UserGroup extend this new entity. Add <code>@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)</code> on the new entity if you want to keep 2 separate tables.</p>\n\n<p>Then, create a Spring Data JPA Repository for the parent entity.</p>\n\n<pre><code>/**\n * new abstract Superclass\n */\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic abstract class User {\n\n    @Id\n    private String id;\n\n    //...\n}\n\n/**\n * Existing User entity\n */\n@Entity\n@Table(name=\"my_users\")\npublic class LoginUser extends User {\n\n    private String password;\n\n    @ManyToOne\n    private Group group;\n\n    //...\n}\n\n/**\n * Existing Group entity\n */\n@Entity\n@Table(name=\"my_groups\")\npublic class Group extends User {\n\n    private String name;\n\n    @OneToMany(mappedBy=\"group\")\n    private Set&lt;LoginUser&gt; users;\n\n    //...\n}\n\n/**\n * Super repository, providing UNION\n */\npublic interface UserRepository extends JpaRepository&lt;User, String&gt; {}\n</code></pre>\n\n<p>Calling <code>UserRepository.findAll</code> will make JPA do the <code>UNION</code> of the 2 tables, and can return a <code>List&lt;User&gt;</code>. You'll have both <code>LoginUser</code> and <code>Group</code> instances in this list:</p>\n\n<pre><code>// UNION query returning both LoginUser and Group instances\nList&lt;User&gt; myUnion = userRepository.findAll();\n</code></pre>\n\n<p>See <a href=\"https://en.wikibooks.org/wiki/Java_Persistence/Inheritance\" rel=\"noreferrer\">https://en.wikibooks.org/wiki/Java_Persistence/Inheritance</a> for more details about JPA inheritance.</p>\n\n<p>JPA/Hibernate don't support custom UNION queries, but inheritance provides out-of-the-box UNION between entities of the same hierarchy when using <code>TABLE_PER_CLASS</code> strategy.</p>\n\n<p>You cant generate the query you want with JPA. It's not possible to UNION the different fields. But if you map email and title to the same field (which is a nonsense) and write the following JPQL, JPA will generate your query.</p>\n\n<pre><code> SELECT u.yourField FROM User u;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1562741020,"creation_date":1556624155,"answer_id":55920061,"question_id":55829684,"body_markdown":"So I solved my problem with creating a view in database itself and then map that to my java entity because it seems that hibernate doesn&#39;t support &#39;union&#39; query\r\n","title":"Union tables with spring data jpa","body":"<p>So I solved my problem with creating a view in database itself and then map that to my java entity because it seems that hibernate doesn't support 'union' query</p>\n"},{"tags":[],"owner":{"account_id":7990830,"reputation":187,"user_id":6028739,"display_name":"KHanusova"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641560334,"creation_date":1641560334,"answer_id":70621635,"question_id":55829684,"body_markdown":"You can use nativeQuery:\r\n\r\n    @Query(&quot;select u.email from user u union select g.title from group&quot;, nativeQuery = true)\r\n    public String findResult();\r\n\r\nSpring documentation: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native","title":"Union tables with spring data jpa","body":"<p>You can use nativeQuery:</p>\n<pre><code>@Query(&quot;select u.email from user u union select g.title from group&quot;, nativeQuery = true)\npublic String findResult();\n</code></pre>\n<p>Spring documentation: <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native</a></p>\n"}],"owner":{"account_id":10884793,"reputation":61,"user_id":8002643,"display_name":"mehran qorbani"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16032,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":55920061,"answer_count":3,"score":3,"last_activity_date":1695284753,"creation_date":1556107606,"question_id":55829684,"body_markdown":"I have 2 tables one is `Users` and the other is `UserGroup` Having `ManyToMany` relationship , how can I union them into a single List with spring-data-JPA .\r\n\r\n**  don&#39;t want to use native Queries\r\n\r\n**UPDATE**:\r\n\r\n  The exact query that I need:\r\n\r\nSELECT email FROM user\r\n\r\nUNION\r\n\r\nSELECT title FROM group","title":"Union tables with spring data jpa","body":"<p>I have 2 tables one is <code>Users</code> and the other is <code>UserGroup</code> Having <code>ManyToMany</code> relationship , how can I union them into a single List with spring-data-JPA .</p>\n<p>**  don't want to use native Queries</p>\n<p><strong>UPDATE</strong>:</p>\n<p>The exact query that I need:</p>\n<p>SELECT email FROM user</p>\n<p>UNION</p>\n<p>SELECT title FROM group</p>\n"},{"tags":["java","git","jgit"],"comments":[{"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"score":0,"creation_date":1506095520,"post_id":46368062,"comment_id":79696817,"body_markdown":"https://stackoverflow.com/questions/10993634/how-do-i-do-git-show-sha1file-using-jgit","body":"<a href=\"https://stackoverflow.com/questions/10993634/how-do-i-do-git-show-sha1file-using-jgit\" title=\"how do i do git show sha1file using jgit\">stackoverflow.com/questions/10993634/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695284614,"creation_date":1506135343,"answer_id":46375568,"question_id":46368062,"body_markdown":"While there is no direct equivalent to `git show` in JGit, it provides API to implement what the command does yourself.\r\n\r\nIf all you have is the ref to a branch, then you first need to resolve the tree id of its head commit. Luckily, `Repository::resolve` accepts an expression that will return the necessary tree id:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    ObjectId treeId = repository.resolve(&quot;refs/heads/master^{tree}&quot;);\r\n\r\nGiven the tree id, you can use a `TreeWalk` to obtain the blob id that holds the contents of the desired file.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    TreeWalk treeWalk = TreeWalk.forPath(git.getRepository(), &quot;README.md&quot;, treeId);\r\n    ObjectId blobId = treeWalk.getObjectId(0);\r\n\r\nThe `forPath` factory method creates a `TreeWalk` and positions it at the path that was given in the second argument.\r\n\r\nWith the blob id in turn, you can finally load the contents from Git&#39;s object database.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    ObjectReader objectReader = repository.newObjectReader();\r\n    ObjectLoader objectLoader = objectReader.open(blobId);\r\n    byte[] bytes = objectLoader.getBytes();\r\n    objectReader.close();\r\n\r\nThe complete source code can be found here: https://gist.github.com/rherrmann/0c682ea327862cb6847704acf90b1d5d\r\n\r\nFor more details about the inner workings of the Git object database, you may want to read [Explore Git Internals with the JGit API](http://www.codeaffine.com/2014/10/20/git-internals).","title":"Git show file in target branch in JGit?","body":"<p>While there is no direct equivalent to <code>git show</code> in JGit, it provides API to implement what the command does yourself.</p>\n<p>If all you have is the ref to a branch, then you first need to resolve the tree id of its head commit. Luckily, <code>Repository::resolve</code> accepts an expression that will return the necessary tree id:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectId treeId = repository.resolve(&quot;refs/heads/master^{tree}&quot;);\n</code></pre>\n<p>Given the tree id, you can use a <code>TreeWalk</code> to obtain the blob id that holds the contents of the desired file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TreeWalk treeWalk = TreeWalk.forPath(git.getRepository(), &quot;README.md&quot;, treeId);\nObjectId blobId = treeWalk.getObjectId(0);\n</code></pre>\n<p>The <code>forPath</code> factory method creates a <code>TreeWalk</code> and positions it at the path that was given in the second argument.</p>\n<p>With the blob id in turn, you can finally load the contents from Git's object database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectReader objectReader = repository.newObjectReader();\nObjectLoader objectLoader = objectReader.open(blobId);\nbyte[] bytes = objectLoader.getBytes();\nobjectReader.close();\n</code></pre>\n<p>The complete source code can be found here: <a href=\"https://gist.github.com/rherrmann/0c682ea327862cb6847704acf90b1d5d\" rel=\"nofollow noreferrer\">https://gist.github.com/rherrmann/0c682ea327862cb6847704acf90b1d5d</a></p>\n<p>For more details about the inner workings of the Git object database, you may want to read <a href=\"http://www.codeaffine.com/2014/10/20/git-internals\" rel=\"nofollow noreferrer\">Explore Git Internals with the JGit API</a>.</p>\n"}],"owner":{"account_id":5516910,"reputation":5424,"user_id":4381330,"accept_rate":92,"display_name":"Mincong Huang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":808,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46375568,"answer_count":1,"score":1,"last_activity_date":1695284614,"creation_date":1506093515,"question_id":46368062,"body_markdown":"I want to show to file content of a target branch in JGit without checking out that branch. For example, showing the content of `README.md` of `master` branch while the current branch is `iss1`. The equivalent Git command should be:\r\n\r\n    myProj (iss1) $ git show master:README.md\r\n    Hello world!\r\n\r\nHow can I do it using JGit?","title":"Git show file in target branch in JGit?","body":"<p>I want to show to file content of a target branch in JGit without checking out that branch. For example, showing the content of <code>README.md</code> of <code>master</code> branch while the current branch is <code>iss1</code>. The equivalent Git command should be:</p>\n\n<pre><code>myProj (iss1) $ git show master:README.md\nHello world!\n</code></pre>\n\n<p>How can I do it using JGit?</p>\n"},{"tags":["java","maven","dependencies","mule","mule-component"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1695296451,"post_id":77148328,"comment_id":136007123,"body_markdown":"This is not a duplicated because the issue is specifically related to Mule 4 classloaders. It should be reopened so a proper answer can be provided.","body":"This is not a duplicated because the issue is specifically related to Mule 4 classloaders. It should be reopened so a proper answer can be provided."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695296599,"post_id":77148328,"comment_id":136007152,"body_markdown":"Please **do not** post images of code, data, error messages, etc. For more details read the Meta FAQ entry [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). Mule applications, flows and configurations should be copied as XML into the question. Images and screenshots of flows don&#39;t provide any useful details for troubleshooting.","body":"Please <b>do not</b> post images of code, data, error messages, etc. For more details read the Meta FAQ entry <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Why not upload images of code/errors when asking a question?</a>. Mule applications, flows and configurations should be copied as XML into the question. Images and screenshots of flows don&#39;t provide any useful details for troubleshooting."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695297012,"post_id":77148328,"comment_id":136007241,"body_markdown":"Since the question is currently closed I&#39;ll give you the short answer: this will not work. You should not try to use the internals of another module or library in your own module. Internals are not even exported.","body":"Since the question is currently closed I&#39;ll give you the short answer: this will not work. You should not try to use the internals of another module or library in your own module. Internals are not even exported."}],"owner":{"account_id":29491695,"reputation":1,"user_id":22600598,"display_name":"Julian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695286155,"answer_count":0,"score":0,"last_activity_date":1695283940,"creation_date":1695283821,"question_id":77148328,"body_markdown":"I built a Mule 4 module/connector with the Mule Java SDK using mule-module-batch-ee (4.5.0-20220622) internally.\r\n\r\nTo build the &#39;batch-manager-connector&#39; project, I used the Maven archetype org.mule.extensions:mule-extensions-archetype-maven-plugin:1.2.0. I can build the &#39;batch-manager-connector&#39; and include it in my &#39;test_mule_project&#39; application (Anypoint Studio 7.15.0). But when I run it, it fails and I get a &#39;java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager\r\n\r\n&#39; because the library cannot be found.\r\n\r\nTo make the library available at runtime, what must I do?\r\n\r\nAny help would be appreciated &#128512;\r\n\r\n[I was able to add more images to my post on the official Mulesoft forum.](https://help.mulesoft.com/s/question/0D56R00008lpDCsSAM/mule-java-sdk-moduleconnector-javalangnoclassdeffounderror-javalangnoclassdeffounderror-commulesoftmuleruntimemodulebatchinternaldefaultbatchmanager)\r\n\r\n\r\n**Error:**\r\n\r\n```\r\n********************************************************************************\r\nMessage               : java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager\r\nElement               : batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs)\r\nElement DSL           : &lt;batchmanager:get-all-batch-jobs doc:name=&quot;Get all batch jobs&quot; doc:id=&quot;c14b575f-d739-4b4a-aef6-69c5985c8a50&quot;&gt;&lt;/batchmanager:get-all-batch-jobs&gt;\r\nError type            : MULE:FATAL_JVM_ERROR\r\nFlowStack             : at batchProcessCSVAccounts(batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs))\r\nPayload Type          : com.mulesoft.mule.runtime.module.batch.internal.ImmutableBatchJobInstance\r\n--------------------------------------------------------------------------------\r\nRoot Exception stack trace:\r\njava.lang.ClassNotFoundException: com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.findLocalClass(FineGrainedControlClassLoader.java:178)\r\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.loadClass(FineGrainedControlClassLoader.java:90)\r\n        at org.mule.runtime.module.artifact.api.classloader.MuleArtifactClassLoader.loadClass(MuleArtifactClassLoader.java:263)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations.getAllBatchJobs(BatchManagerOperations.java:31)\r\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations$getAllBatchJobs$MethodComponentExecutor_test_mule_project.execute(Unknown Source)\r\n        at org.mule.runtime.module.extension.internal.runtime.execution.GeneratedMethodComponentExecutor.execute(GeneratedMethodComponentExecutor.java:94)\r\n        at org.mule.runtime.module.extension.internal.runtime.execution.CompletableMethodOperationExecutor.doExecute(CompletableMethodOperationExecutor.java:26)\r\n        at org.mule.runtime.module.extension.internal.runtime.execution.AbstractCompletableMethodOperationExecutor.execute(AbstractCompletableMethodOperationExecutor.java:61)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeCommand(DefaultExecutionMediator.java:237)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeWithInterceptors(DefaultExecutionMediator.java:221)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$execute$1(DefaultExecutionMediator.java:130)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$new$0(DefaultExecutionMediator.java:73)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.withExecutionTemplate(DefaultExecutionMediator.java:316)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.execute(DefaultExecutionMediator.java:129)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.executeOperation(ComponentMessageProcessor.java:581)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.prepareAndExecuteOperation(ComponentMessageProcessor.java:820)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$onEventSynchronous$16(ComponentMessageProcessor.java:483)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.onEventSynchronous(ComponentMessageProcessor.java:490)\r\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$null$6(ComponentMessageProcessor.java:399)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:482)\r\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:287)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:496)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\r\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\r\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\r\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:213)\r\n        at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:242)\r\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:537)\r\n        at reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:999)\r\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\r\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:76)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\r\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\r\n        at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:180)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\r\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\r\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\r\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\r\n        at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:178)\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:50)\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:27)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.mule.service.scheduler.internal.AbstractRunnableFutureDecorator.doRun(AbstractRunnableFutureDecorator.java:151)\r\n        at org.mule.service.scheduler.internal.RunnableFutureDecorator.run(RunnableFutureDecorator.java:54)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n \r\n********************************************************************************\r\n```\r\n\r\n**Java: 1.8.0_381 &amp; Maven: 3.9.4**\r\n\r\n**[Flow &#39;test_mule_project&#39;](https://i.stack.imgur.com/eLcGj.png)**\r\n\r\n**Batch Manager - BatchManagerOperations Class (line 29+):**\r\n\r\n```\r\npackage org.mule.extension.batchmanager.internal;\r\n \r\nimport static org.mule.runtime.extension.api.annotation.param.MediaType.ANY;\r\n \r\nimport org.mule.runtime.extension.api.annotation.param.MediaType;\r\nimport org.mule.runtime.extension.api.annotation.param.Config;\r\nimport org.mule.runtime.extension.api.annotation.param.Connection;\r\n \r\nimport com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n \r\n \r\n/**\r\n * This class is a container for operations, every public method in this class will be taken as an extension operation.\r\n */\r\npublic class BatchManagerOperations {\r\n        \r\n  private static final Logger LOGGER = LoggerFactory.getLogger(BatchManagerOperations.class);\r\n  /**\r\n   * Example of an operation that uses the configuration and a connection instance to perform some action.\r\n   */\r\n  @MediaType(value = ANY, strict = false)\r\n  public String retrieveInfo(@Config BatchManagerConfiguration configuration, @Connection BatchManagerConnection connection){\r\n    return &quot;Using Configuration [&quot; + configuration.getConfigId() + &quot;] with Connection id [&quot; + connection.getId() + &quot;]&quot;;\r\n  }\r\n \r\n \r\n  @MediaType(value = ANY, strict = false)\r\n  public String getAllBatchJobs() {\r\n        DefaultBatchManager bm = new DefaultBatchManager();\r\n        String jobs = bm.getBatchJobs().toString();\r\n        LOGGER.info(jobs);\r\n    return jobs;\r\n  }\r\n  \r\n}\r\n```\r\n\r\nBatch Manager - pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;project\r\n\txmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.BatchManager.muleConnector&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mulesoft-batchmanager-connector&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0.4&lt;/version&gt;\r\n\t&lt;packaging&gt;mule-extension&lt;/packaging&gt;\r\n\t&lt;name&gt;BatchManager Extension&lt;/name&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.mule.extensions&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;mule-modules-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.1.3&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.mulesoft.mule.runtime.modules/mule-module-batch-ee --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mulesoft.mule.runtime.modules&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mule-module-batch-ee&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.0-20220622&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.mule.runtime/mule-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mule.runtime&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mule-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.0-20220622&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**Batch Manager - Java Build Path**:\r\nclasspath variable:\r\n\r\n&gt; M2_REPO/com/mulesoft/mule/runtime/modules/mule-module-batch-ee/4.5.0-20220622/mule-module-batch-ee-4.5.0-20220622.jar -\r\n&gt; C:\\\\Users{username}.m2\\\\repository\\\\com\\\\mulesoft\\\\mule\\\\runtime\\\\modules\\\\mule-module-batch-ee\\\\4.5.0-20220622\\\\mule-module-batch-ee-4.5.0-20220622","title":"Mule Java SDK Module/Connector - java.lang.NoClassDefFoundError: java.lang.NoClassDefFoundError","body":"<p>I built a Mule 4 module/connector with the Mule Java SDK using mule-module-batch-ee (4.5.0-20220622) internally.</p>\n<p>To build the 'batch-manager-connector' project, I used the Maven archetype org.mule.extensions:mule-extensions-archetype-maven-plugin:1.2.0. I can build the 'batch-manager-connector' and include it in my 'test_mule_project' application (Anypoint Studio 7.15.0). But when I run it, it fails and I get a 'java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager</p>\n<p>' because the library cannot be found.</p>\n<p>To make the library available at runtime, what must I do?</p>\n<p>Any help would be appreciated 😀</p>\n<p><a href=\"https://help.mulesoft.com/s/question/0D56R00008lpDCsSAM/mule-java-sdk-moduleconnector-javalangnoclassdeffounderror-javalangnoclassdeffounderror-commulesoftmuleruntimemodulebatchinternaldefaultbatchmanager\" rel=\"nofollow noreferrer\">I was able to add more images to my post on the official Mulesoft forum.</a></p>\n<p><strong>Error:</strong></p>\n<pre><code>********************************************************************************\nMessage               : java.lang.NoClassDefFoundError: com/mulesoft/mule/runtime/module/batch/internal/DefaultBatchManager\nElement               : batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs)\nElement DSL           : &lt;batchmanager:get-all-batch-jobs doc:name=&quot;Get all batch jobs&quot; doc:id=&quot;c14b575f-d739-4b4a-aef6-69c5985c8a50&quot;&gt;&lt;/batchmanager:get-all-batch-jobs&gt;\nError type            : MULE:FATAL_JVM_ERROR\nFlowStack             : at batchProcessCSVAccounts(batchProcessCSVAccounts/processors/3 @ test_mule_project:test_mule_project.xml:39 (Get all batch jobs))\nPayload Type          : com.mulesoft.mule.runtime.module.batch.internal.ImmutableBatchJobInstance\n--------------------------------------------------------------------------------\nRoot Exception stack trace:\njava.lang.ClassNotFoundException: com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.findLocalClass(FineGrainedControlClassLoader.java:178)\n        at org.mule.runtime.module.artifact.api.classloader.FineGrainedControlClassLoader.loadClass(FineGrainedControlClassLoader.java:90)\n        at org.mule.runtime.module.artifact.api.classloader.MuleArtifactClassLoader.loadClass(MuleArtifactClassLoader.java:263)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations.getAllBatchJobs(BatchManagerOperations.java:31)\n        at org.mule.extension.batchmanager.internal.BatchManagerOperations$getAllBatchJobs$MethodComponentExecutor_test_mule_project.execute(Unknown Source)\n        at org.mule.runtime.module.extension.internal.runtime.execution.GeneratedMethodComponentExecutor.execute(GeneratedMethodComponentExecutor.java:94)\n        at org.mule.runtime.module.extension.internal.runtime.execution.CompletableMethodOperationExecutor.doExecute(CompletableMethodOperationExecutor.java:26)\n        at org.mule.runtime.module.extension.internal.runtime.execution.AbstractCompletableMethodOperationExecutor.execute(AbstractCompletableMethodOperationExecutor.java:61)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeCommand(DefaultExecutionMediator.java:237)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.executeWithInterceptors(DefaultExecutionMediator.java:221)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$execute$1(DefaultExecutionMediator.java:130)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.lambda$new$0(DefaultExecutionMediator.java:73)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.withExecutionTemplate(DefaultExecutionMediator.java:316)\n        at org.mule.runtime.module.extension.internal.runtime.operation.DefaultExecutionMediator.execute(DefaultExecutionMediator.java:129)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.executeOperation(ComponentMessageProcessor.java:581)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.prepareAndExecuteOperation(ComponentMessageProcessor.java:820)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$onEventSynchronous$16(ComponentMessageProcessor.java:483)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.onEventSynchronous(ComponentMessageProcessor.java:490)\n        at org.mule.runtime.module.extension.internal.runtime.operation.ComponentMessageProcessor.lambda$null$6(ComponentMessageProcessor.java:399)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:482)\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:287)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:496)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:213)\n        at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:242)\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:537)\n        at reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:999)\n        at reactor.core.publisher.FluxContextStart$ContextStartSubscriber.onNext(FluxContextStart.java:103)\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:76)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\n        at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:180)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:527)\n        at org.mule.runtime.core.privileged.processor.chain.AbstractMessageProcessorChain$2.onNext(AbstractMessageProcessorChain.java:522)\n        at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:127)\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:204)\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onNext(FluxOnAssembly.java:351)\n        at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:178)\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:50)\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:27)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.mule.service.scheduler.internal.AbstractRunnableFutureDecorator.doRun(AbstractRunnableFutureDecorator.java:151)\n        at org.mule.service.scheduler.internal.RunnableFutureDecorator.run(RunnableFutureDecorator.java:54)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:750)\n \n********************************************************************************\n</code></pre>\n<p><strong>Java: 1.8.0_381 &amp; Maven: 3.9.4</strong></p>\n<p><strong><a href=\"https://i.stack.imgur.com/eLcGj.png\" rel=\"nofollow noreferrer\">Flow 'test_mule_project'</a></strong></p>\n<p><strong>Batch Manager - BatchManagerOperations Class (line 29+):</strong></p>\n<pre><code>package org.mule.extension.batchmanager.internal;\n \nimport static org.mule.runtime.extension.api.annotation.param.MediaType.ANY;\n \nimport org.mule.runtime.extension.api.annotation.param.MediaType;\nimport org.mule.runtime.extension.api.annotation.param.Config;\nimport org.mule.runtime.extension.api.annotation.param.Connection;\n \nimport com.mulesoft.mule.runtime.module.batch.internal.DefaultBatchManager;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n \n \n/**\n * This class is a container for operations, every public method in this class will be taken as an extension operation.\n */\npublic class BatchManagerOperations {\n        \n  private static final Logger LOGGER = LoggerFactory.getLogger(BatchManagerOperations.class);\n  /**\n   * Example of an operation that uses the configuration and a connection instance to perform some action.\n   */\n  @MediaType(value = ANY, strict = false)\n  public String retrieveInfo(@Config BatchManagerConfiguration configuration, @Connection BatchManagerConnection connection){\n    return &quot;Using Configuration [&quot; + configuration.getConfigId() + &quot;] with Connection id [&quot; + connection.getId() + &quot;]&quot;;\n  }\n \n \n  @MediaType(value = ANY, strict = false)\n  public String getAllBatchJobs() {\n        DefaultBatchManager bm = new DefaultBatchManager();\n        String jobs = bm.getBatchJobs().toString();\n        LOGGER.info(jobs);\n    return jobs;\n  }\n  \n}\n</code></pre>\n<p>Batch Manager - pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;project\n    xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.BatchManager.muleConnector&lt;/groupId&gt;\n    &lt;artifactId&gt;mulesoft-batchmanager-connector&lt;/artifactId&gt;\n    &lt;version&gt;1.0.4&lt;/version&gt;\n    &lt;packaging&gt;mule-extension&lt;/packaging&gt;\n    &lt;name&gt;BatchManager Extension&lt;/name&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.mule.extensions&lt;/groupId&gt;\n        &lt;artifactId&gt;mule-modules-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.1.3&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.7.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.mulesoft.mule.runtime.modules/mule-module-batch-ee --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mulesoft.mule.runtime.modules&lt;/groupId&gt;\n            &lt;artifactId&gt;mule-module-batch-ee&lt;/artifactId&gt;\n            &lt;version&gt;4.5.0-20220622&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.mule.runtime/mule-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mule.runtime&lt;/groupId&gt;\n            &lt;artifactId&gt;mule-api&lt;/artifactId&gt;\n            &lt;version&gt;1.5.0-20220622&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Batch Manager - Java Build Path</strong>:\nclasspath variable:</p>\n<blockquote>\n<p>M2_REPO/com/mulesoft/mule/runtime/modules/mule-module-batch-ee/4.5.0-20220622/mule-module-batch-ee-4.5.0-20220622.jar -\nC:\\Users{username}.m2\\repository\\com\\mulesoft\\mule\\runtime\\modules\\mule-module-batch-ee\\4.5.0-20220622\\mule-module-batch-ee-4.5.0-20220622</p>\n</blockquote>\n"},{"tags":["java","java-stream","java-time","duration","localdate"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":3,"creation_date":1695194499,"post_id":77140056,"comment_id":135989823,"body_markdown":"You showed a list of people as your expected result, but you are collecting to a `Map`? Which one do you want exactly?","body":"You showed a list of people as your expected result, but you are collecting to a <code>Map</code>? Which one do you want exactly?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1695195414,"post_id":77140056,"comment_id":135989989,"body_markdown":"Do you want the sum of all durations for each member for each date? And why are you instantiating a `Person` with `new Item(…)`?","body":"Do you want the sum of all durations for each member for each date? And why are you instantiating a <code>Person</code> with <code>new Item(…)</code>?"},{"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"score":0,"creation_date":1695196373,"post_id":77140056,"comment_id":135990201,"body_markdown":"As a result I want a list of persons. It is my understanding that I need a map for that. if a have all the results in map, I can create a list again. However if its possible without a map, that would be better.","body":"As a result I want a list of persons. It is my understanding that I need a map for that. if a have all the results in map, I can create a list again. However if its possible without a map, that would be better."},{"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"score":0,"creation_date":1695196545,"post_id":77140056,"comment_id":135990242,"body_markdown":"As for the  provided example with &quot;new item&quot;: this is just  to demonstrate the &quot;layout&quot; of each person-list-object.","body":"As for the  provided example with &quot;new item&quot;: this is just  to demonstrate the &quot;layout&quot; of each person-list-object."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695218839,"post_id":77140056,"comment_id":135995282,"body_markdown":"The first argument to the `toMap` collector is for the *key*, so its not the right place for trying to sum values. The second function determines the value, but only the single value  of a single element, so it isn’t the right place either. For aggregating multiple values, a *third* argument has to be specified. The function specified as third argument will receive two values and allows you to insert your summation.","body":"The first argument to the <code>toMap</code> collector is for the <i>key</i>, so its not the right place for trying to sum values. The second function determines the value, but only the single value  of a single element, so it isn’t the right place either. For aggregating multiple values, a <i>third</i> argument has to be specified. The function specified as third argument will receive two values and allows you to insert your summation."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695226739,"post_id":77140056,"comment_id":135997224,"body_markdown":"By the way… Standard format for duration text is [defined in ISO 8601](https://en.wikipedia.org/wiki/ISO_8601#Durations): `PnYnMnDTnHnMnS`. Ex: `PT8H` vs `08:00`.","body":"By the way… Standard format for duration text is <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">defined in ISO 8601</a>: <code>PnYnMnDTnHnMnS</code>. Ex: <code>PT8H</code> vs <code>08:00</code>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695244028,"post_id":77140056,"comment_id":136000287,"body_markdown":"Your result is *not* a list a persons. You have duplicates, with &quot;member1&quot; and &quot;member2&quot; both listed multiple times. What you really have is a flattened hierarchy of date -&gt; person.","body":"Your result is <i>not</i> a list a persons. You have duplicates, with &quot;member1&quot; and &quot;member2&quot; both listed multiple times. What you really have is a flattened hierarchy of date -&gt; person."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695244421,"post_id":77140056,"comment_id":136000336,"body_markdown":"Why padding zero on your `time1` inputs but not `time2`?","body":"Why padding zero on your <code>time1</code> inputs but not <code>time2</code>?"}],"answers":[{"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695283365,"creation_date":1695203229,"answer_id":77141225,"question_id":77140056,"body_markdown":"One way to do it is with a cascade of groupings and a reduction to sum the durations. The following results in a 2-level map that contains the sum per date and type:\r\n\r\n```java\r\nMap&lt;LocalDate, Map&lt;String, Optional&lt;Person&gt;&gt;&gt; perDateAndTypeAggregated = \r\n\tpersonList.stream().collect(Collectors.groupingBy(\r\n\t\tPerson::getStartDate,\r\n\t\tCollectors.groupingBy(\r\n\t\t\t\tPerson::getType,\r\n\t\t\t\tCollectors.reducing((p1, p2) -&gt;\r\n\t\t\t\t\t// this is where we sum the durations\r\n\t\t\t\t\tnew Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\r\n\t\t\t\t)\r\n\t\t)\r\n\t));\r\n```\r\n\r\nIf you want a list (the map gives richer information, but it&#39;s your application), you can flatten and sort the previous map as follows:\r\n\r\n```java\r\nComparator&lt;Person&gt; byDateThenType =\r\n\tComparator.comparing(Person::getStartDate).thenComparing(Person::getType);\r\n\r\nList&lt;Person&gt; result =\r\n\tperDateAndTypeAggregated.values().stream()\r\n\t\t.flatMap(m -&gt; m.values().stream())\r\n\t\t.filter(Optional::isPresent)\r\n\t\t.map(Optional::get)\r\n\t\t.sorted(byDateThenType)\r\n\t\t.toList();\r\n```\r\n\r\n---\r\n\r\n**EDIT:** As per the comments from Holger, the above can be simplified using `toMap` instead of the `groupingBy`/`reducing` combination, with the added advantage of simplifying the second operation (`toList`) by removing the `.filter().map()` combo:\r\n\r\n```java\r\nMap&lt;LocalDate, Map&lt;String, Person&gt;&gt; perDateAndTypeAggregated2 = \r\n\tpersonList.stream().collect(Collectors.groupingBy(\r\n\t\tPerson::getStartDate,\r\n\t\tCollectors.toMap(\r\n\t\t\t\tPerson::getType,\r\n\t\t\t\tFunction.identity(),\r\n\t\t\t\t(p1, p2) -&gt;\r\n\t\t\t\t\t// this is where we sum the durations\r\n\t\t\t\t\tnew Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\r\n\t\t)\r\n\t));\r\n\r\nList&lt;Person&gt; result2 =\r\n\tperDateAndTypeAggregated2.values().stream()\r\n\t\t.flatMap(m -&gt; m.values().stream())\r\n\t\t.sorted(byDateThenType)\r\n\t\t.toList();\r\n```\r\n\r\n---\r\n\r\n**EDIT 2:** I used the following `Person` class:\r\n\r\n```java\r\npublic static class Person {\r\n\tprivate LocalDate startDate;\r\n\tprivate String type;\r\n\tprivate Duration time1;\r\n\tprivate Duration time2;\r\n\r\n\tpublic Person() {}\r\n\r\n\tpublic Person(String startDate, String type, String time1, String time2) {\r\n\t\tthis.startDate = LocalDate.parse(startDate);\r\n\t\tthis.type = type;\r\n\t\tthis.time1 = Duration.parse(time1);\r\n\t\tthis.time2 = Duration.parse(time2);\r\n\t}\r\n\r\n\tpublic Person(LocalDate startDate, String type, Duration time1, Duration time2) {\r\n\t\tthis.startDate = startDate;\r\n\t\tthis.type = type;\r\n\t\tthis.time1 = time1;\r\n\t\tthis.time2 = time2;\r\n\t}\r\n\r\n\t// getters and setters...\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Person(&quot; + startDate + &quot;,&quot; + type + &quot;,&quot; + time1 + &quot;,&quot; + time2 + &quot;)&quot;;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean equals(Object o) {\r\n\t\tif (this == o) return true;\r\n\t\tif (o == null || getClass() != o.getClass()) return false;\r\n\t\tPerson person = (Person) o;\r\n\t\treturn Objects.equals(startDate, person.startDate) &amp;&amp; Objects.equals(type, person.type) &amp;&amp; Objects.equals(time1, person.time1) &amp;&amp; Objects.equals(time2, person.time2);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int hashCode() {\r\n\t\treturn Objects.hash(startDate, type, time1, time2);\r\n\t}\r\n}\r\n```\r\n\r\nAnd initialize the list as:\r\n\r\n```java\r\nList&lt;Person&gt; personList = Arrays.asList(\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT4H00M&quot;),\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT50H00M&quot;,&quot;PT0H45M&quot;),\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT0H40M&quot;),\r\n\t\tnew Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT1H00M&quot;,&quot;PT1H20M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT2H00M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT10H00M&quot;,&quot;PT0H45M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT1H40M&quot;),\r\n\t\tnew Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT2H00M&quot;,&quot;PT1H20M&quot;)\r\n);\r\n```\r\n\r\nAll this code is giving me the desired outcome from the question.","title":"How to group and reduce a list of objects with duration","body":"<p>One way to do it is with a cascade of groupings and a reduction to sum the durations. The following results in a 2-level map that contains the sum per date and type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;LocalDate, Map&lt;String, Optional&lt;Person&gt;&gt;&gt; perDateAndTypeAggregated = \n    personList.stream().collect(Collectors.groupingBy(\n        Person::getStartDate,\n        Collectors.groupingBy(\n                Person::getType,\n                Collectors.reducing((p1, p2) -&gt;\n                    // this is where we sum the durations\n                    new Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\n                )\n        )\n    ));\n</code></pre>\n<p>If you want a list (the map gives richer information, but it's your application), you can flatten and sort the previous map as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Comparator&lt;Person&gt; byDateThenType =\n    Comparator.comparing(Person::getStartDate).thenComparing(Person::getType);\n\nList&lt;Person&gt; result =\n    perDateAndTypeAggregated.values().stream()\n        .flatMap(m -&gt; m.values().stream())\n        .filter(Optional::isPresent)\n        .map(Optional::get)\n        .sorted(byDateThenType)\n        .toList();\n</code></pre>\n<hr />\n<p><strong>EDIT:</strong> As per the comments from Holger, the above can be simplified using <code>toMap</code> instead of the <code>groupingBy</code>/<code>reducing</code> combination, with the added advantage of simplifying the second operation (<code>toList</code>) by removing the <code>.filter().map()</code> combo:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;LocalDate, Map&lt;String, Person&gt;&gt; perDateAndTypeAggregated2 = \n    personList.stream().collect(Collectors.groupingBy(\n        Person::getStartDate,\n        Collectors.toMap(\n                Person::getType,\n                Function.identity(),\n                (p1, p2) -&gt;\n                    // this is where we sum the durations\n                    new Person(p1.getStartDate(), p1.getType(), p1.getTime1().plus(p2.getTime1()), p1.getTime2().plus(p2.getTime2()))\n        )\n    ));\n\nList&lt;Person&gt; result2 =\n    perDateAndTypeAggregated2.values().stream()\n        .flatMap(m -&gt; m.values().stream())\n        .sorted(byDateThenType)\n        .toList();\n</code></pre>\n<hr />\n<p><strong>EDIT 2:</strong> I used the following <code>Person</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static class Person {\n    private LocalDate startDate;\n    private String type;\n    private Duration time1;\n    private Duration time2;\n\n    public Person() {}\n\n    public Person(String startDate, String type, String time1, String time2) {\n        this.startDate = LocalDate.parse(startDate);\n        this.type = type;\n        this.time1 = Duration.parse(time1);\n        this.time2 = Duration.parse(time2);\n    }\n\n    public Person(LocalDate startDate, String type, Duration time1, Duration time2) {\n        this.startDate = startDate;\n        this.type = type;\n        this.time1 = time1;\n        this.time2 = time2;\n    }\n\n    // getters and setters...\n\n    @Override\n    public String toString() {\n        return &quot;Person(&quot; + startDate + &quot;,&quot; + type + &quot;,&quot; + time1 + &quot;,&quot; + time2 + &quot;)&quot;;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        Person person = (Person) o;\n        return Objects.equals(startDate, person.startDate) &amp;&amp; Objects.equals(type, person.type) &amp;&amp; Objects.equals(time1, person.time1) &amp;&amp; Objects.equals(time2, person.time2);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(startDate, type, time1, time2);\n    }\n}\n</code></pre>\n<p>And initialize the list as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; personList = Arrays.asList(\n        new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT4H00M&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;PT50H00M&quot;,&quot;PT0H45M&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT0H40M&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;PT1H00M&quot;,&quot;PT1H20M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT8H00M&quot;,&quot;PT2H00M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;PT10H00M&quot;,&quot;PT0H45M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT10H00M&quot;,&quot;PT1H40M&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;PT2H00M&quot;,&quot;PT1H20M&quot;)\n);\n</code></pre>\n<p>All this code is giving me the desired outcome from the question.</p>\n"}],"owner":{"account_id":28943042,"reputation":3,"user_id":22169225,"display_name":"Mc_Android"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77141225,"answer_count":1,"score":0,"last_activity_date":1695283365,"creation_date":1695193640,"question_id":77140056,"body_markdown":"I want to create a list of persons sorted by `LocalDate` and `String` as well as aggregated by duration.\r\n\r\nI did some research regarding the use of duration in streams:\r\n- https://stackoverflow.com/questions/70606831/how-to-get-the-average-duration-for-each-category-having-films-using-stream-api\r\n- https://stackoverflow.com/questions/60816247/using-streams-to-sum-a-collection-of-immutable-duration-objects-in-java\r\n\r\nand on using streams with grouping and reducing a list of objects into subgroups:\r\n- https://stackoverflow.com/questions/57337508/grouping-list-of-objects-and-reduce-subgroups-into-different-objects-in-java-8\r\n\r\nHowever, it&#39;s impossible for me to solve my problem, class `Person` looks like this:\r\n\r\n```java\r\nclass Person { \r\n    private LocalDate startDate; \r\n    private String personType;\r\n    private Duration time1;\r\n    private Duration time2;//constructor, getter+setter, other methods\r\n}\r\n```\r\n\r\nAn example of the created list looks like this:\r\n\r\n```\r\nList&lt;Person&gt; personList = Arrays.asList(\r\n          new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;4:00&quot;),\r\n\t    new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;50:00&quot;,&quot;0:45&quot;),\t\r\n\t    new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;0:40&quot;),\r\n\t    new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;01:00&quot;,&quot;1:20&quot;),\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;2:00&quot;),\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;10:00&quot;,&quot;0:45&quot;),\t\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;1:40&quot;),\r\n\t    new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;02:00&quot;,&quot;1:20&quot;),//... \r\n );\r\n```\r\n\r\nI want to create a list of persons sorted by startdate and personType, with the sum of duration.\r\n\r\nDesired output:\r\n\r\n```none\r\n(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;58:00&quot;,&quot;4:45&quot;),\r\n(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;),\r\n(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;18:00&quot;,&quot;2:45&quot;),\r\n(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;12:00&quot;,&quot;3:00&quot;),\r\n...\r\n```\r\n\r\nMy approach is to use something like this. However, I can&#39;t map duration and string values:\r\n\r\n```\r\nMap&lt;LocalDate,List&lt;Person&gt;&gt; result=personList.stream()\r\n.collect(Collectors.groupingBy(Person::getstartDate))\r\n        .entrySet().stream()\r\n        .collect(Collectors.toMap(x -&gt; {\r\n            //how to sum duration values in here?\r\n           // Duration duration1 = x.getValue().stream() ...;\r\n            //how to use String values in here?\r\n           // String string = x.getValue().stream()....\r\n            return new Person(x.getKey(), string, duration1,duration2);\r\n        }, Map.Entry::getValue));\r\n```","title":"How to group and reduce a list of objects with duration","body":"<p>I want to create a list of persons sorted by <code>LocalDate</code> and <code>String</code> as well as aggregated by duration.</p>\n<p>I did some research regarding the use of duration in streams:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/70606831/how-to-get-the-average-duration-for-each-category-having-films-using-stream-api\">How to get the average duration for each category having films using stream API java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/60816247/using-streams-to-sum-a-collection-of-immutable-duration-objects-in-java\">Using streams to sum a collection of immutable `Duration` objects, in Java</a></li>\n</ul>\n<p>and on using streams with grouping and reducing a list of objects into subgroups:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/57337508/grouping-list-of-objects-and-reduce-subgroups-into-different-objects-in-java-8\">Grouping list of objects and reduce subgroups into different objects in Java 8</a></li>\n</ul>\n<p>However, it's impossible for me to solve my problem, class <code>Person</code> looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Person { \n    private LocalDate startDate; \n    private String personType;\n    private Duration time1;\n    private Duration time2;//constructor, getter+setter, other methods\n}\n</code></pre>\n<p>An example of the created list looks like this:</p>\n<pre><code>List&lt;Person&gt; personList = Arrays.asList(\n          new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;4:00&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;50:00&quot;,&quot;0:45&quot;),  \n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;0:40&quot;),\n        new Person(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;01:00&quot;,&quot;1:20&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;08:00&quot;,&quot;2:00&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;10:00&quot;,&quot;0:45&quot;),  \n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;10:00&quot;,&quot;1:40&quot;),\n        new Person(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;02:00&quot;,&quot;1:20&quot;),//... \n );\n</code></pre>\n<p>I want to create a list of persons sorted by startdate and personType, with the sum of duration.</p>\n<p>Desired output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>(&quot;2023-02-02&quot;,&quot;member1&quot;,&quot;58:00&quot;,&quot;4:45&quot;),\n(&quot;2023-02-02&quot;,&quot;member2&quot;,&quot;11:00&quot;,&quot;2:00&quot;),\n(&quot;2023-02-03&quot;,&quot;member1&quot;,&quot;18:00&quot;,&quot;2:45&quot;),\n(&quot;2023-02-03&quot;,&quot;member2&quot;,&quot;12:00&quot;,&quot;3:00&quot;),\n...\n</code></pre>\n<p>My approach is to use something like this. However, I can't map duration and string values:</p>\n<pre><code>Map&lt;LocalDate,List&lt;Person&gt;&gt; result=personList.stream()\n.collect(Collectors.groupingBy(Person::getstartDate))\n        .entrySet().stream()\n        .collect(Collectors.toMap(x -&gt; {\n            //how to sum duration values in here?\n           // Duration duration1 = x.getValue().stream() ...;\n            //how to use String values in here?\n           // String string = x.getValue().stream()....\n            return new Person(x.getKey(), string, duration1,duration2);\n        }, Map.Entry::getValue));\n</code></pre>\n"},{"tags":["java","regex","kotlin"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1695252005,"post_id":77146361,"comment_id":136001124,"body_markdown":"Add the code you tried please.","body":"Add the code you tried please."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695254293,"post_id":77146361,"comment_id":136001316,"body_markdown":"Look up &#39;positive lookahead&#39;. If you want `split()` to remove no characters at all, call `.split(&quot;(?=pattern here)` - that&#39;s positive lookahead.","body":"Look up &#39;positive lookahead&#39;. If you want <code>split()</code> to remove no characters at all, call <code>.split(&quot;(?=pattern here)</code> - that&#39;s positive lookahead."},{"owner":{"account_id":94036,"reputation":107726,"user_id":256970,"accept_rate":86,"display_name":"Cary Swoveland"},"score":0,"creation_date":1695256050,"post_id":77146361,"comment_id":136001458,"body_markdown":"Match something like `[^रषत्रज्ञ]+|[रषत्रज्ञ]+` but I don&#39;t know Hindi or how that works with regular expressions.","body":"Match something like <code>[^रषत्रज्ञ]+|[रषत्रज्ञ]+</code> but I don&#39;t know Hindi or how that works with regular expressions."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1695260183,"post_id":77146361,"comment_id":136001780,"body_markdown":"I can make it split to `[क्ष, त्र, िय]` using a straightforward apporach - are you sure the split should be `[&quot;क्ष&quot;, &quot;त्र&quot;, &quot;ि&quot;, &quot;य&quot;]`?","body":"I can make it split to <code>[क्ष, त्र, िय]</code> using a straightforward apporach - are you sure the split should be <code>[&quot;क्ष&quot;, &quot;त्र&quot;, &quot;ि&quot;, &quot;य&quot;]</code>?"},{"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"score":0,"creation_date":1695284609,"post_id":77146361,"comment_id":136004683,"body_markdown":"@CarySwoveland there are few compound characters in Hindi e.g. `श्र=श+्+र, क्ष=क+्+ष, त्र=त+्+र, ज्ञ=ज+्+ञ` , though for the regex @Bohemian &#39;s answer helped me, Thanks.","body":"@CarySwoveland there are few compound characters in Hindi e.g. <code>श्र=श+्+र, क्ष=क+्+ष, त्र=त+्+र, ज्ञ=ज+्+ञ</code> , though for the regex @Bohemian &#39;s answer helped me, Thanks."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695260486,"creation_date":1695260486,"answer_id":77146740,"question_id":77146361,"body_markdown":"Using only the delimiters given as a look behind, splits to what you want \r\nexcept the the last element:\r\n\r\n    String str = &quot;क्षत्रिय&quot;;\r\n    List&lt;String&gt; delims = List.of(&quot;श्र&quot;,&quot;क्ष&quot;,&quot;त्र&quot;,&quot;ज्ञ&quot;);\r\n    String[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))&quot;);\r\n\r\nOutput:\r\n\r\n    [क्ष, त्र, िय]\r\n\r\n----\r\n\r\nTo split exactly to your desire, I has to add an alternate split on the last character:\r\n\r\n    String[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))|(?=.$)&quot;);\r\n\r\nOutput:\r\n\r\n    [क्ष, त्र, ि, य]\r\n","title":"split string using a given unicode sequence as delimiter and keep the delimeter","body":"<p>Using only the delimiters given as a look behind, splits to what you want\nexcept the the last element:</p>\n<pre><code>String str = &quot;क्षत्रिय&quot;;\nList&lt;String&gt; delims = List.of(&quot;श्र&quot;,&quot;क्ष&quot;,&quot;त्र&quot;,&quot;ज्ञ&quot;);\nString[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))&quot;);\n</code></pre>\n<p>Output:</p>\n<pre><code>[क्ष, त्र, िय]\n</code></pre>\n<hr />\n<p>To split exactly to your desire, I has to add an alternate split on the last character:</p>\n<pre><code>String[] parts = str.split(&quot;(?&lt;=(&quot; + String.join(&quot;|&quot;, delims) + &quot;))|(?=.$)&quot;);\n</code></pre>\n<p>Output:</p>\n<pre><code>[क्ष, त्र, ि, य]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695282962,"creation_date":1695282962,"answer_id":77148240,"question_id":77146361,"body_markdown":"Not sure if it&#39;s the Java vs Kotlin issue (since the answers I was following were from Java considering both are interoperable), but the root problem lied in the direct string literal used in the split method in case of kotlin.\r\n\r\nThe below code doesn&#39;t work:\r\n\r\n    val array = &quot;क्षत्रिय&quot;.split(&quot;(?&lt;=(श्र|क्ष|त्र|ज्ञ))|(?=.\\$)&quot;)\r\n    println(array)\r\n    \r\n    Answer: [क्षत्रिय] // no split\r\n\r\nBut using `Pattern.compile(&lt;string_regex&gt;)` as below worked:\r\n\r\n    val array = &quot;क्षत्रिय&quot;.split(Pattern.compile(&quot;(?&lt;=(श्र|क्ष|त्र|ज्ञ))|(?=.\\$)&quot;))\r\n    println(array)\r\n    \r\n    Answer: [क्ष, त्र, ि, य] // splits as expected\r\n\r\nThe differences between these two code in AndroidStudio:\r\n\r\n[![split with regex literal][1]][1]\r\n[![split with Pattern][2]][2]\r\n\r\nThe single line regex is followed from the [Bohemian][3]&#39;s answer to this question.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ldbEv.png\r\n  [2]: https://i.stack.imgur.com/srdRw.png\r\n  [3]: https://stackoverflow.com/users/256196/bohemian","title":"split string using a given unicode sequence as delimiter and keep the delimeter","body":"<p>Not sure if it's the Java vs Kotlin issue (since the answers I was following were from Java considering both are interoperable), but the root problem lied in the direct string literal used in the split method in case of kotlin.</p>\n<p>The below code doesn't work:</p>\n<pre><code>val array = &quot;क्षत्रिय&quot;.split(&quot;(?&lt;=(श्र|क्ष|त्र|ज्ञ))|(?=.\\$)&quot;)\nprintln(array)\n\nAnswer: [क्षत्रिय] // no split\n</code></pre>\n<p>But using <code>Pattern.compile(&lt;string_regex&gt;)</code> as below worked:</p>\n<pre><code>val array = &quot;क्षत्रिय&quot;.split(Pattern.compile(&quot;(?&lt;=(श्र|क्ष|त्र|ज्ञ))|(?=.\\$)&quot;))\nprintln(array)\n\nAnswer: [क्ष, त्र, ि, य] // splits as expected\n</code></pre>\n<p>The differences between these two code in AndroidStudio:</p>\n<p><a href=\"https://i.stack.imgur.com/ldbEv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ldbEv.png\" alt=\"split with regex literal\" /></a>\n<a href=\"https://i.stack.imgur.com/srdRw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/srdRw.png\" alt=\"split with Pattern\" /></a></p>\n<p>The single line regex is followed from the <a href=\"https://stackoverflow.com/users/256196/bohemian\">Bohemian</a>'s answer to this question.</p>\n"}],"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695282962,"creation_date":1695251875,"question_id":77146361,"body_markdown":"This could be a possible duplicate but I tried many answers available from here but none worked for my requirement.\r\n\r\nI want to split the String = &quot;क्षत्रिय&quot; into [&quot;क्ष&quot;, &quot;त्र&quot;, &quot;ि&quot;, &quot;य&quot;] using a listOf(&quot;श्र&quot;,&quot;क्ष&quot;,&quot;त्र&quot;,&quot;ज्ञ&quot;) delimiters and want to keep them into result array as above.\r\nNote that the श्र, क्ष, त्र, ज्ञ themselves are made of a group of characters so are Strings but not characters.","title":"split string using a given unicode sequence as delimiter and keep the delimeter","body":"<p>This could be a possible duplicate but I tried many answers available from here but none worked for my requirement.</p>\n<p>I want to split the String = &quot;क्षत्रिय&quot; into [&quot;क्ष&quot;, &quot;त्र&quot;, &quot;ि&quot;, &quot;य&quot;] using a listOf(&quot;श्र&quot;,&quot;क्ष&quot;,&quot;त्र&quot;,&quot;ज्ञ&quot;) delimiters and want to keep them into result array as above.\nNote that the श्र, क्ष, त्र, ज्ञ themselves are made of a group of characters so are Strings but not characters.</p>\n"},{"tags":["java","spring","activemq","message-queue"],"comments":[{"owner":{"account_id":2048438,"reputation":8159,"user_id":1827992,"accept_rate":88,"display_name":"BevynQ"},"score":2,"creation_date":1355206058,"post_id":13814321,"comment_id":19007080,"body_markdown":"the xml validator is complaining that &lt;beans&gt; is not a valid element. This validates in an external xml site. can you open http://www.springframework.org/schema/beans/spring-beans.xsd from where you are? does copying it local help? could be a firewall issue.","body":"the xml validator is complaining that &lt;beans&gt; is not a valid element. This validates in an external xml site. can you open <a href=\"http://www.springframework.org/schema/beans/spring-beans.xsd\" rel=\"nofollow noreferrer\">springframework.org/schema/beans/spring-beans.xsd</a> from where you are? does copying it local help? could be a firewall issue."},{"owner":{"account_id":1985389,"reputation":631,"user_id":1780772,"accept_rate":80,"display_name":"Parvez"},"score":0,"creation_date":1355208364,"post_id":13814321,"comment_id":19007838,"body_markdown":"Could be this reason [getting-error-message-with-spring-cvc-elt-1-cannot-find-the-declaration-of-ele][1]\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/10182857/getting-error-message-with-spring-cvc-elt-1-cannot-find-the-declaration-of-ele?rq=1","body":"Could be this reason [getting-error-message-with-spring-cvc-elt-1-cannot-find-the&zwnj;&#8203;-declaration-of-ele]&zwnj;&#8203;[1]        [1]: <a href=\"http://stackoverflow.com/questions/10182857/getting-error-message-with-spring-cvc-elt-1-cannot-find-the-declaration-of-ele?rq=1\" title=\"getting error message with spring cvc elt 1 cannot find the declaration of ele\">stackoverflow.com/questions/10182857/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1435499924,"creation_date":1355206357,"answer_id":13814648,"question_id":13814321,"body_markdown":"Try this, assuming you&#39;re on Spring 3.1:\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd&quot;&gt;\r\n\r\nReplace `3.1` on the last line with whatever _major_ Spring version you use. Meaning: there is no `3.1.1` XSD even though there is a Spring version `3.1.1`.","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Try this, assuming you're on Spring 3.1:</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd\"&gt;\n</code></pre>\n\n<p>Replace <code>3.1</code> on the last line with whatever <em>major</em> Spring version you use. Meaning: there is no <code>3.1.1</code> XSD even though there is a Spring version <code>3.1.1</code>.</p>\n"},{"tags":[],"owner":{"account_id":1435959,"reputation":4869,"user_id":1357328,"accept_rate":55,"display_name":"mickeymoon"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1391670387,"creation_date":1391670387,"answer_id":21596238,"question_id":13814321,"body_markdown":"Found it on another thread that solved my problem... was using an internet connection less network.\r\n\r\nIn that case copy the xsd files from the url and place it next to the beans.xml file and change the xsi:schemaLocation as under:\r\n\r\n     &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    spring-beans-3.1.xsd&quot;&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Found it on another thread that solved my problem... was using an internet connection less network.</p>\n\n<p>In that case copy the xsd files from the url and place it next to the beans.xml file and change the xsi:schemaLocation as under:</p>\n\n<pre><code> &lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://www.springframework.org/schema/beans \nspring-beans-3.1.xsd\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1575209,"reputation":10468,"user_id":1461862,"accept_rate":67,"display_name":"Mauricio Gracia Gutierrez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442442228,"creation_date":1442440371,"answer_id":32619402,"question_id":13814321,"body_markdown":"This error of Cannot find the declaration of element &#39;beans&#39; but for a whole different reason\r\n\r\nIt turs out my internet connection was not very reliable, so i decided to check first for this url\r\n\r\nhttp://www.springframework.org/schema/context/spring-context-4.0.xsd\r\n\r\nOnce I saw that the xsd was open succesfully I clean the Eclipse(IDE) project and the error was gone\r\n\r\nIf you try this steps and still get the error then\r\ncheck the Spring version so that it matches as mentioned by another answer\r\n\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans-**[MAYOR.MINOR]**.xsd&quot;&gt;\r\n\r\nReplace [MAYOR.MINOR] on the last line with whatever major.minor  Spring version that you are using\r\n\r\nFor Spring 4.0\r\nhttp://www.springframework.org/schema/context/spring-context-4.0.xsd\r\n\r\nFor Sprint 3.1\r\nhttp://www.springframework.org/schema/beans \r\nspring-beans-3.1.xsd\r\n\r\nAll the contexts are available here\r\nhttp://www.springframework.org/schema/context/","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>This error of Cannot find the declaration of element 'beans' but for a whole different reason</p>\n\n<p>It turs out my internet connection was not very reliable, so i decided to check first for this url</p>\n\n<p><a href=\"http://www.springframework.org/schema/context/spring-context-4.0.xsd\" rel=\"nofollow\">http://www.springframework.org/schema/context/spring-context-4.0.xsd</a></p>\n\n<p>Once I saw that the xsd was open succesfully I clean the Eclipse(IDE) project and the error was gone</p>\n\n<p>If you try this steps and still get the error then\ncheck the Spring version so that it matches as mentioned by another answer</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-**[MAYOR.MINOR]**.xsd\"&gt;\n</code></pre>\n\n<p>Replace [MAYOR.MINOR] on the last line with whatever major.minor  Spring version that you are using</p>\n\n<p>For Spring 4.0\n<a href=\"http://www.springframework.org/schema/context/spring-context-4.0.xsd\" rel=\"nofollow\">http://www.springframework.org/schema/context/spring-context-4.0.xsd</a></p>\n\n<p>For Sprint 3.1\n<a href=\"http://www.springframework.org/schema/beans\" rel=\"nofollow\">http://www.springframework.org/schema/beans</a> \nspring-beans-3.1.xsd</p>\n\n<p>All the contexts are available here\n<a href=\"http://www.springframework.org/schema/context/\" rel=\"nofollow\">http://www.springframework.org/schema/context/</a></p>\n"},{"tags":[],"owner":{"account_id":3146860,"reputation":21,"user_id":2661177,"display_name":"user2661177"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1458059721,"creation_date":1458059721,"answer_id":36017043,"question_id":13814321,"body_markdown":"I had this issue and the root cause turned out to be white-space (shown as dots below) after the www.springframework.org/schema/beans reference in xsi:schemaLocation, i.e.\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n    xsi:schemaLocation=&quot;\r\n    http://www.springframework.org/schema/beans....\r\n    http://www.springframework.org/schema/beans/spring-beans-4.2.xsd\r\n    http://www.springframework.org/schema/context\r\n    http://www.springframework.org/schema/context/spring-context-4.2.xsd\r\n    http://www.springframework.org/schema/mvc\r\n    http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd&quot;&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I had this issue and the root cause turned out to be white-space (shown as dots below) after the www.springframework.org/schema/beans reference in xsi:schemaLocation, i.e.</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxmlns:mvc=\"http://www.springframework.org/schema/mvc\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:p=\"http://www.springframework.org/schema/p\"\nxsi:schemaLocation=\"\nhttp://www.springframework.org/schema/beans....\nhttp://www.springframework.org/schema/beans/spring-beans-4.2.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context-4.2.xsd\nhttp://www.springframework.org/schema/mvc\nhttp://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9422694,"reputation":1,"user_id":7008663,"display_name":"prem"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1476287551,"creation_date":1476284454,"answer_id":40001942,"question_id":13814321,"body_markdown":"Use this to solve your problem:\r\n\r\n    &lt;context:annotation-config/&gt;\r\n","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Use this to solve your problem:</p>\n\n<pre><code>&lt;context:annotation-config/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9282265,"reputation":81,"user_id":6893170,"display_name":"Sushma"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1483434346,"creation_date":1483428776,"answer_id":41438516,"question_id":13814321,"body_markdown":"Add this code     ..It helped me\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n             xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \r\n             xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; \r\n             xsi:schemaLocation=&quot;\r\n             http://www.springframework.org/schema/beans \r\n               classpath:/org/springframework/beans/factory/xml/spring-beans-3.0.xsd \r\n             http://www.springframework.org/schema/context \r\n             classpath:/org/springframework/context/config/spring-context-3.0.xsd\r\n            http://www.springframework.org/schema/aop \r\n            classpath:/org/springframework/aop/config/spring-aop-3.0.xsd\r\n             &quot;&gt;      \r\n         &lt;/beans&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Add this code     ..It helped me</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;beans xmlns=\"http://www.springframework.org/schema/beans\" \n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n         xmlns:context=\"http://www.springframework.org/schema/context\" \n         xmlns:aop=\"http://www.springframework.org/schema/aop\" \n         xsi:schemaLocation=\"\n         http://www.springframework.org/schema/beans \n           classpath:/org/springframework/beans/factory/xml/spring-beans-3.0.xsd \n         http://www.springframework.org/schema/context \n         classpath:/org/springframework/context/config/spring-context-3.0.xsd\n        http://www.springframework.org/schema/aop \n        classpath:/org/springframework/aop/config/spring-aop-3.0.xsd\n         \"&gt;      \n     &lt;/beans&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13455857,"reputation":1,"user_id":9709447,"display_name":"Sujit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524820850,"creation_date":1524820850,"answer_id":50059211,"question_id":13814321,"body_markdown":"Try Using this- Spring 4.0. Working\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans                                               http://www.springframework.org/schema/beans/spring-beans.xsd\r\n           http://www.springframework.org/schema/context \r\n           http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; ","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Try Using this- Spring 4.0. Working</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:p=\"http://www.springframework.org/schema/p\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\" \n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans                                               http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context \n       http://www.springframework.org/schema/context/spring-context.xsd\"&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":12999640,"reputation":158,"user_id":9396130,"display_name":"Nancy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554187948,"creation_date":1554187948,"answer_id":55468590,"question_id":13814321,"body_markdown":"Make sure if all the spring jar file&#39;s version in your build path and the version mentioned in the xml file are same.","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Make sure if all the spring jar file's version in your build path and the version mentioned in the xml file are same.</p>\n"},{"tags":[],"owner":{"account_id":5159456,"reputation":183,"user_id":4420109,"display_name":"sebke CCU"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591365157,"creation_date":1591363846,"answer_id":62216499,"question_id":13814321,"body_markdown":"For me the problem was my file encoding...I used powershell to write the xml file and this was not UTF-8 ...\r\nIt seems that spring requires UTF8 because as soon as I changed the encoding (using notepad++) it works again without any errors\r\n\r\nNow i Use in my powershellscript the following line to output the xml file in UTF-8:\r\n[IO.File]::WriteAllLines($fname_dataloader_xml_config_file, $dataloader_configfile)\r\n\r\ninstead of using the redirection operator &gt; to create my file\r\n\r\nNote: I didn&#39;t put any xml parameters in my beans tag and it works","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>For me the problem was my file encoding...I used powershell to write the xml file and this was not UTF-8 ...\nIt seems that spring requires UTF8 because as soon as I changed the encoding (using notepad++) it works again without any errors</p>\n\n<p>Now i Use in my powershellscript the following line to output the xml file in UTF-8:\n[IO.File]::WriteAllLines($fname_dataloader_xml_config_file, $dataloader_configfile)</p>\n\n<p>instead of using the redirection operator > to create my file</p>\n\n<p>Note: I didn't put any xml parameters in my beans tag and it works</p>\n"},{"tags":[],"owner":{"account_id":7439229,"reputation":105,"user_id":5657520,"display_name":"Devashish Priyadarshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593608180,"creation_date":1593608180,"answer_id":62677359,"question_id":13814321,"body_markdown":"For me the problem was that spring was not able to download http://www.springframework.org/schema/beans/spring-beans.xsd or http://www.springframework.org/schema/context/spring-context.xsd\r\n\r\nHowever I was able to access those from my browser as it was using my machines proxy. So I just copied the content of the two xsds to files named spring-beans.xsd and spring-context.xsd and replaced the http url with the file names and it worked for me. ","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>For me the problem was that spring was not able to download <a href=\"http://www.springframework.org/schema/beans/spring-beans.xsd\" rel=\"nofollow noreferrer\">http://www.springframework.org/schema/beans/spring-beans.xsd</a> or <a href=\"http://www.springframework.org/schema/context/spring-context.xsd\" rel=\"nofollow noreferrer\">http://www.springframework.org/schema/context/spring-context.xsd</a></p>\n<p>However I was able to access those from my browser as it was using my machines proxy. So I just copied the content of the two xsds to files named spring-beans.xsd and spring-context.xsd and replaced the http url with the file names and it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":9663586,"reputation":51,"user_id":7170757,"display_name":"ManhKM"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616942326,"creation_date":1616942326,"answer_id":66842588,"question_id":13814321,"body_markdown":"I have encountered this same as you.\r\nWith my solution as follows:\r\n1. Reconfig file: Spring Configuration File (no use XSD namespace declaration).\r\n[![2.][1]][1] \r\n-&gt; with the main purpose of not having tag name( bean, ...)\r\n2. Create tag &lt;bean&gt; with class you want to use.\r\n[![enter image description here][2]][2]\r\n---HappyCoding---\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UYVMz.png\r\n  [2]: https://i.stack.imgur.com/B73HU.png","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I have encountered this same as you.\nWith my solution as follows:</p>\n<ol>\n<li>Reconfig file: Spring Configuration File (no use XSD namespace declaration).\n<a href=\"https://i.stack.imgur.com/UYVMz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UYVMz.png\" alt=\"2.\" /></a>\n-&gt; with the main purpose of not having tag name( bean, ...)</li>\n<li>Create tag  with class you want to use.\n<a href=\"https://i.stack.imgur.com/B73HU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B73HU.png\" alt=\"enter image description here\" /></a>\n---HappyCoding---</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21399682,"reputation":1,"user_id":15762079,"display_name":"Abhishek Sakalkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619367457,"creation_date":1619367457,"answer_id":67255614,"question_id":13814321,"body_markdown":" Try using this:\r\n\r\n   \r\n\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    http://www.springframework.org/schema/context\r\n    http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>Try using this:</p>\n<pre><code>xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19117694,"reputation":13,"user_id":13962274,"display_name":"Ajith Samraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643279410,"creation_date":1643279410,"answer_id":70877009,"question_id":13814321,"body_markdown":"I resolved this using the following code. \r\n\r\n    &lt;? xml version=&quot;1.0&quot; encoding=&quot;UTF-8 ?&gt;\r\n\r\n        &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n        xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot; \r\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \r\n        xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd \r\n        http://www.springframework.org/schema/jee \r\n        http://www.springframework.org/schema/jee/spring-jee-3.0.xsd \r\n        http://www.springframework.org/schema/context \r\n        http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt; \r\n\r\n    &lt;/Beans&gt;\r\n\r\n    ","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I resolved this using the following code.</p>\n<pre><code>&lt;? xml version=&quot;1.0&quot; encoding=&quot;UTF-8 ?&gt;\n\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n    xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot; \n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot; \n    xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd \n    http://www.springframework.org/schema/jee \n    http://www.springframework.org/schema/jee/spring-jee-3.0.xsd \n    http://www.springframework.org/schema/context \n    http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt; \n\n&lt;/Beans&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5979310,"reputation":281,"user_id":4698969,"display_name":"Andrew Santosa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669115783,"creation_date":1669115783,"answer_id":74531763,"question_id":13814321,"body_markdown":"For Spring 5.1.0.RELEASE, the configuration file format specified in [an answer for another question][1] works for me.\r\n\r\nThis is the copy:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    http://www.springframework.org/schema/beans/spring-beans.xsd \r\n    http://www.springframework.org/schema/context \r\n    http://www.springframework.org/schema/context/spring-context.xsd\r\n    http://www.springframework.org/schema/mvc\r\n    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\r\n     \r\n    &lt;!-- Bean declaration and other configurations --&gt;\r\n     \r\n&lt;/beans&gt; \r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/52659844/4698969","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>For Spring 5.1.0.RELEASE, the configuration file format specified in <a href=\"https://stackoverflow.com/a/52659844/4698969\">an answer for another question</a> works for me.</p>\n<p>This is the copy:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans.xsd \n    http://www.springframework.org/schema/context \n    http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\n     \n    &lt;!-- Bean declaration and other configurations --&gt;\n     \n&lt;/beans&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":29498279,"reputation":1,"user_id":22605835,"display_name":"Rahul Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695282555,"creation_date":1695282555,"answer_id":77148197,"question_id":13814321,"body_markdown":"This one is the spring version related issues. Just try to change spring version to lower or 4.1.8.RELEASE","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>This one is the spring version related issues. Just try to change spring version to lower or 4.1.8.RELEASE</p>\n"}],"owner":{"account_id":413891,"reputation":3932,"user_id":787793,"accept_rate":70,"display_name":"nebula"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136409,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":13814648,"answer_count":15,"score":29,"last_activity_date":1695282555,"creation_date":1355204560,"question_id":13814321,"body_markdown":"I have the spring jars of `spring-3.2.0.RC1.jar` and trying to implement `Apache ActiveMQ` `helloWorld` program from tutorial given [here][1]. The xml configuration file is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;beans xmlns:jms=&quot;http://www.springframework.org/schema/jms&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot; \r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txsi:schemalocation=&quot;http://www.springframework.org/schema/beans \r\n    \thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n        http://www.springframework.org/schema/jms \r\n    \thttp://www.springframework.org/schema/jms/spring-jms.xsd&quot;&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;org.apache.activemq.command.ActiveMQQueue&quot; id=&quot;destination&quot;&gt;\r\n    \t\t&lt;constructor-arg value=&quot;TEST.Q1&quot;&gt;&lt;/constructor-arg&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot; id=&quot;connectionFactory&quot;\r\n    \t\tp:brokerurl=&quot;tcp://localhost:8161&quot;&gt;&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;com.jms.helloworld.listner.MessageListenerImpl&quot; id=&quot;simpleMessageListener&quot;&gt;\r\n    \t\t&lt;bean\r\n    \t\t\tclass=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;\r\n    \t\t\tid=&quot;jmsContainer&quot;&gt;\r\n    \t\t\t&lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;&gt;&lt;/property&gt;\r\n    \t\t\t&lt;property name=&quot;destination&quot; ref=&quot;destination&quot;&gt;&lt;/property&gt;\r\n    \t\t\t&lt;property name=&quot;messageListener&quot; ref=&quot;simpleMessageListener&quot;&gt;&lt;/property&gt;\r\n    \t\t&lt;/bean&gt;\r\n    \t&lt;/bean&gt;\r\n    &lt;/beans&gt;    \r\n\r\n**main:**\r\n\r\n    public static void main(String[] args) throws JMSException {\r\n    \t\tSystem.out.println(&quot;LISTNER STARTED&quot;);\r\n    \t\tApplicationContext context =  new FileSystemXmlApplicationContext(&quot;src/com/jms/helloworld/config/JMSConfig.xml&quot;);\r\n    \t}\r\n\r\n    **Exception on console**\r\n\r\n\r\n    LISTNER STARTED\r\n    log4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from file [/home/neal/workspace/ActiveMQListener/src/com/jms/helloworld/config/JMSConfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element &#39;beans&#39;.\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)\r\n    \tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)\r\n    \tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)\r\n    \tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)\r\n    \tat org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:140)\r\n    \tat org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:84)\r\n    \tat com.jms.helloworld.test.TestJMSListner.main(TestJMSListner.java:15)\r\n    Caused by: org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element &#39;beans&#39;.\r\n    \tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)\r\n    \tat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)\r\n    \tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1920)\r\n    \tat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:709)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:602)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3080)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:899)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)\r\n    \tat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)\r\n    \tat com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)\r\n    \tat com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)\r\n    \tat org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\r\n    \t... 14 more\r\n\r\nI don&#39;t know what is wrong with the beans.So far any suggestion in other question doesn&#39;t help. Any help?\r\n\r\n\r\n  [1]: http://icodingclub.blogspot.com/2011/07/introduction-of-spring-jms-with.html","title":"Cannot find the declaration of element &#39;beans&#39;","body":"<p>I have the spring jars of <code>spring-3.2.0.RC1.jar</code> and trying to implement <code>Apache ActiveMQ</code> <code>helloWorld</code> program from tutorial given <a href=\"http://icodingclub.blogspot.com/2011/07/introduction-of-spring-jms-with.html\" rel=\"noreferrer\">here</a>. The xml configuration file is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns:jms=\"http://www.springframework.org/schema/jms\"\n    xmlns:p=\"http://www.springframework.org/schema/p\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://www.springframework.org/schema/beans\"\n    xsi:schemalocation=\"http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/jms \n    http://www.springframework.org/schema/jms/spring-jms.xsd\"&gt;\n\n    &lt;bean class=\"org.apache.activemq.command.ActiveMQQueue\" id=\"destination\"&gt;\n        &lt;constructor-arg value=\"TEST.Q1\"&gt;&lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n\n    &lt;bean class=\"org.apache.activemq.ActiveMQConnectionFactory\" id=\"connectionFactory\"\n        p:brokerurl=\"tcp://localhost:8161\"&gt;&lt;/bean&gt;\n\n    &lt;bean class=\"com.jms.helloworld.listner.MessageListenerImpl\" id=\"simpleMessageListener\"&gt;\n        &lt;bean\n            class=\"org.springframework.jms.listener.DefaultMessageListenerContainer\"\n            id=\"jmsContainer\"&gt;\n            &lt;property name=\"connectionFactory\" ref=\"connectionFactory\"&gt;&lt;/property&gt;\n            &lt;property name=\"destination\" ref=\"destination\"&gt;&lt;/property&gt;\n            &lt;property name=\"messageListener\" ref=\"simpleMessageListener\"&gt;&lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;    \n</code></pre>\n\n<p><strong>main:</strong></p>\n\n<pre><code>public static void main(String[] args) throws JMSException {\n        System.out.println(\"LISTNER STARTED\");\n        ApplicationContext context =  new FileSystemXmlApplicationContext(\"src/com/jms/helloworld/config/JMSConfig.xml\");\n    }\n\n**Exception on console**\n\n\nLISTNER STARTED\nlog4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nException in thread \"main\" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from file [/home/neal/workspace/ActiveMQListener/src/com/jms/helloworld/config/JMSConfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element 'beans'.\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)\n    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)\n    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:140)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:84)\n    at com.jms.helloworld.test.TestJMSListner.main(TestJMSListner.java:15)\nCaused by: org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element 'beans'.\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)\n    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)\n    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)\n    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1920)\n    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:709)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:602)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3080)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:899)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\n    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)\n    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)\n    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)\n    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)\n    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)\n    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)\n    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)\n    ... 14 more\n</code></pre>\n\n<p>I don't know what is wrong with the beans.So far any suggestion in other question doesn't help. Any help?</p>\n"},{"tags":["java","android","kotlin","android-edittext","keyboard-events"],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1695282006,"creation_date":1695282006,"question_id":77148124,"body_markdown":"I have an EditView in which I have set the below OnKeyListener to record the ctrl + left arrow key and ctrl + right arrow key.\r\n\r\n            val MyKeyListener: View.OnKeyListener\r\n\r\n        MyKeyListener = object : View.OnKeyListener {\r\n\r\n            override fun onKey (v: View?, keyCode: Int, event: KeyEvent?): Boolean\r\n            {\r\n                if (event?.action == KeyEvent.ACTION_DOWN) {\r\n\r\n                     if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;left arrow&quot;)\r\n\r\n                         if (event.isCtrlPressed) {\r\n\r\n                             Log.d (&quot;Key&quot;, &quot;cntl + left&quot;)\r\n                             return true\r\n                         }\r\n\r\n                    } else if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;right arrow&quot;)\r\n\r\n                        if (event.isCtrlPressed) {\r\n\r\n                            Log.d (&quot;Key&quot;, &quot;cntl + right&quot;)\r\n                            return true\r\n                        }\r\n                    } \r\n                }\r\n                return false\r\n            }\r\n\r\n        }\r\n        textfeild.setOnKeyListener(MyKeyListener)\r\n\r\nI&#39;m able to get only the left/right arrow click log i.e. if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) is true but not able to get (ctrl + left)/(ctrl + right) log.\r\n\r\nThe Android docs also specify the same way to handle modifier keys: https://developer.android.com/develop/ui/views/touch-and-input/keyboard-input/commands#ModifierKey\r\n\r\nbut it&#39;s doesn&#39;t seem to be working in my case, could anyone tell me why and what&#39;s the solution to handle modifier keys?\r\n\r\n(I have also tried the same thing with event.isShiftPressed, but it&#39;s again not working)\r\n","title":"Unable to handle(Keypress) modifier keys in android studio&#39;s emulator","body":"<p>I have an EditView in which I have set the below OnKeyListener to record the ctrl + left arrow key and ctrl + right arrow key.</p>\n<pre><code>        val MyKeyListener: View.OnKeyListener\n\n    MyKeyListener = object : View.OnKeyListener {\n\n        override fun onKey (v: View?, keyCode: Int, event: KeyEvent?): Boolean\n        {\n            if (event?.action == KeyEvent.ACTION_DOWN) {\n\n                 if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {\n\n                     Log.d (&quot;Key&quot;, &quot;left arrow&quot;)\n\n                     if (event.isCtrlPressed) {\n\n                         Log.d (&quot;Key&quot;, &quot;cntl + left&quot;)\n                         return true\n                     }\n\n                } else if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {\n\n                     Log.d (&quot;Key&quot;, &quot;right arrow&quot;)\n\n                    if (event.isCtrlPressed) {\n\n                        Log.d (&quot;Key&quot;, &quot;cntl + right&quot;)\n                        return true\n                    }\n                } \n            }\n            return false\n        }\n\n    }\n    textfeild.setOnKeyListener(MyKeyListener)\n</code></pre>\n<p>I'm able to get only the left/right arrow click log i.e. if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) is true but not able to get (ctrl + left)/(ctrl + right) log.</p>\n<p>The Android docs also specify the same way to handle modifier keys: <a href=\"https://developer.android.com/develop/ui/views/touch-and-input/keyboard-input/commands#ModifierKey\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/touch-and-input/keyboard-input/commands#ModifierKey</a></p>\n<p>but it's doesn't seem to be working in my case, could anyone tell me why and what's the solution to handle modifier keys?</p>\n<p>(I have also tried the same thing with event.isShiftPressed, but it's again not working)</p>\n"},{"tags":["java","mysql","spring","error-handling","runtime-error"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695281754,"post_id":77148083,"comment_id":136004105,"body_markdown":"honestly, if this is your code, I&#39;m surprised it compiles","body":"honestly, if this is your code, I&#39;m surprised it compiles"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1695283759,"post_id":77148083,"comment_id":136004504,"body_markdown":"The exception message tells you that the field (or variable) `jdbcMapping` is null - most probably because you never initialize it (or because you didn&#39;t configure your beans correctly)","body":"The exception message tells you that the field (or variable) <code>jdbcMapping</code> is null - most probably because you never initialize it (or because you didn&#39;t configure your beans correctly)"}],"owner":{"account_id":28986737,"reputation":1,"user_id":22203405,"display_name":"Bhoma Ram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695282012,"answer_count":0,"score":0,"last_activity_date":1695281686,"creation_date":1695281630,"question_id":77148083,"body_markdown":"this is the problem while I am hitting api it will give this error\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.metamodel.mapping.JdbcMapping.getJdbcValueBinder()&quot; because &quot;jdbcMapping&quot; is null\r\n    \tat org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:118) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:108) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.bindParameters(DeferredResultSetAccess.java:199) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:228) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n\r\n\r\n\r\n\r\n    @GetMapping(&quot;/get_product_by_category_and_price_greater_than&quot;)\r\n    List&lt;Product&gt;products  \r\n    @Query(value = &quot;select p from Product p where p.price &gt;= :price and p.catagory = :catagory&quot;, nativeQuery = true)\r\n\r\nI expect a product list from which price is greater then given price\r\n","title":"Why null pointer exception was giving in jQuary section please give me brief explanation","body":"<p>this is the problem while I am hitting api it will give this error</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.metamodel.mapping.JdbcMapping.getJdbcValueBinder()&quot; because &quot;jdbcMapping&quot; is null\n    at org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:118) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.exec.internal.AbstractJdbcParameter.bindParameterValue(AbstractJdbcParameter.java:108) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.bindParameters(DeferredResultSetAccess.java:199) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:228) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:163) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:36) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:52) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:193) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:477) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n\n\n\n\n@GetMapping(&quot;/get_product_by_category_and_price_greater_than&quot;)\nList&lt;Product&gt;products  \n@Query(value = &quot;select p from Product p where p.price &gt;= :price and p.catagory = :catagory&quot;, nativeQuery = true)\n</code></pre>\n<p>I expect a product list from which price is greater then given price</p>\n"},{"tags":["java","google-bigquery","dataflow","google-compute-engine"],"answers":[{"tags":[],"owner":{"account_id":9807938,"reputation":21,"user_id":7267078,"display_name":"이용운"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1481793499,"creation_date":1481710361,"answer_id":41139960,"question_id":41135892,"body_markdown":"I resolve this problem myself.\r\nFor someone who encounter same problem like me.\r\n\r\nTo correct this, you may check permission is set on each project. Permission is set each account even though it`s service account. I mean you should check accounts both GCP login account and service account is added as a member to each project.\r\nIn my case, I added a GCP login account but not service account.\r\n\r\nI hope this help you","title":"&quot;Access Denied&quot; when trying to access BigQuery on GCE","body":"<p>I resolve this problem myself.\nFor someone who encounter same problem like me.</p>\n\n<p>To correct this, you may check permission is set on each project. Permission is set each account even though it`s service account. I mean you should check accounts both GCP login account and service account is added as a member to each project.\nIn my case, I added a GCP login account but not service account.</p>\n\n<p>I hope this help you</p>\n"},{"tags":[],"owner":{"account_id":29498133,"reputation":1,"user_id":22605720,"display_name":"Raviteja S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695281451,"creation_date":1695281451,"answer_id":77148065,"question_id":41135892,"body_markdown":"I got it resolved by providing the the Service Account &quot;Storage Admin&quot; permission. More finer access control should be explored.","title":"&quot;Access Denied&quot; when trying to access BigQuery on GCE","body":"<p>I got it resolved by providing the the Service Account &quot;Storage Admin&quot; permission. More finer access control should be explored.</p>\n"}],"owner":{"account_id":9807938,"reputation":21,"user_id":7267078,"display_name":"이용운"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2603,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695281451,"creation_date":1481695696,"question_id":41135892,"body_markdown":"I developed and built a jar file is processing read from two BigQuery tables and then write it another BigQuery table.\r\n(There are three GCP projects and each project has own BigQuery table.)\r\nThe jar file is a result building and packaging by Maven. I used Dataflow SDK dependency. \r\n\r\nAfter building a jar file, I tested it on my Mac and I checked it works well.\r\nAnd then, I uploaded a jar file to GCE and tested it again. I thought it would work well but it occurs some error like this :\r\n\r\ncom.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\r\n{\r\n  &quot;code&quot; : 403,\r\n  &quot;errors&quot; : [ {\r\n    &quot;domain&quot; : &quot;global&quot;,\r\n    &quot;message&quot; : &quot;Access Denied: Dataset ${PROJECT_ID}:${DATASET_ID}: The user ${MY_ACCOUNT_ID} does not have bigquery.tables.list permission for dataset ${PROJECT_ID}:${DATASET_ID}.&quot;,\r\n    &quot;reason&quot; : &quot;accessDenied\r\n....\r\n}\r\n\r\nWhen I created GCE instance, I set service account properly. I am sure it`s not about this.\r\n\r\nI do not understand why same jar runs differently, makes error or not?\r\n\r\nThe account on testing is member or owner of three projects.\r\nBefore testing, I use this commands on my Mac and GCE :\r\n\r\n 1. gcloud auth login\r\n 2. gcloud config set project rgpkorea-datalake\r\n 3. gcloud auth application-default login\r\n\r\nIn Java project, I created credential object and build BigQuery service with credential object.\r\n \r\n    GoogleCredential credential = GoogleCredential.getApplicationDefault(HTTP_TRANSPORT, JSON_FACTORY);\r\n    Bigquery bigquery = new Bigquery.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)\r\n                    .setApplicationName(&quot;BdtAndroidGaSessionMigrator&quot; + CalendarUtil.getYesterdayAsDateFormat()).build();\r\n    List&lt;Tables&gt; tableList = bigquery.tables().list(&quot;${PROJECT_ID}&quot;, &quot;${DATASET_ID}&quot;).setMaxResults(9999999L).execute().getTables();\r\n\r\nFor security, I replaced project id and dataset id as EL expression.\r\n\r\nAs you know as, &quot;gcloud init&quot; command is supported on Google-Cloud-SDK. I also tried &quot;gcloud init&quot; command, but result is not different.\r\nIn my guess, above commands work differently depends on environments such as GCP instance or local machine.\r\n\r\nHow do I resolve &quot;Access denied&quot; issue? please help this.\r\n\r\nP.S.\r\nForgive my poor English.\r\nI doubt my English presents what I have problem to you exactly.","title":"&quot;Access Denied&quot; when trying to access BigQuery on GCE","body":"<p>I developed and built a jar file is processing read from two BigQuery tables and then write it another BigQuery table.\n(There are three GCP projects and each project has own BigQuery table.)\nThe jar file is a result building and packaging by Maven. I used Dataflow SDK dependency. </p>\n\n<p>After building a jar file, I tested it on my Mac and I checked it works well.\nAnd then, I uploaded a jar file to GCE and tested it again. I thought it would work well but it occurs some error like this :</p>\n\n<p>com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\n{\n  \"code\" : 403,\n  \"errors\" : [ {\n    \"domain\" : \"global\",\n    \"message\" : \"Access Denied: Dataset ${PROJECT_ID}:${DATASET_ID}: The user ${MY_ACCOUNT_ID} does not have bigquery.tables.list permission for dataset ${PROJECT_ID}:${DATASET_ID}.\",\n    \"reason\" : \"accessDenied\n....\n}</p>\n\n<p>When I created GCE instance, I set service account properly. I am sure it`s not about this.</p>\n\n<p>I do not understand why same jar runs differently, makes error or not?</p>\n\n<p>The account on testing is member or owner of three projects.\nBefore testing, I use this commands on my Mac and GCE :</p>\n\n<ol>\n<li>gcloud auth login</li>\n<li>gcloud config set project rgpkorea-datalake</li>\n<li>gcloud auth application-default login</li>\n</ol>\n\n<p>In Java project, I created credential object and build BigQuery service with credential object.</p>\n\n<pre><code>GoogleCredential credential = GoogleCredential.getApplicationDefault(HTTP_TRANSPORT, JSON_FACTORY);\nBigquery bigquery = new Bigquery.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)\n                .setApplicationName(\"BdtAndroidGaSessionMigrator\" + CalendarUtil.getYesterdayAsDateFormat()).build();\nList&lt;Tables&gt; tableList = bigquery.tables().list(\"${PROJECT_ID}\", \"${DATASET_ID}\").setMaxResults(9999999L).execute().getTables();\n</code></pre>\n\n<p>For security, I replaced project id and dataset id as EL expression.</p>\n\n<p>As you know as, \"gcloud init\" command is supported on Google-Cloud-SDK. I also tried \"gcloud init\" command, but result is not different.\nIn my guess, above commands work differently depends on environments such as GCP instance or local machine.</p>\n\n<p>How do I resolve \"Access denied\" issue? please help this.</p>\n\n<p>P.S.\nForgive my poor English.\nI doubt my English presents what I have problem to you exactly.</p>\n"},{"tags":["java","android"],"owner":{"account_id":21597414,"reputation":75,"user_id":19374684,"display_name":"Michele Bolognini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695280860,"creation_date":1695217679,"question_id":77143107,"body_markdown":"I am writing an Android App for which the user is required to connect an external storage through the USB-C port of a tablet.\r\nOnce operations on the external storage are complete, I would like the user to unmount the USB device correctly, which means he should either:\r\n1) tap the &quot;unmount&quot; button in the &quot;USB storage added&quot; notification that automatically appears as soon as the device is connected.\r\n2) Open the Storage settings page, tap on the external USB device and press &quot;unmount&quot;.\r\n\r\nIdeally, this process would be quick and as automated as possible. My understanding from reading other questions is that I cannot re-implement in my app the functionality of the button in option 1, because apps are not allowed to mount and unmount storage units.\r\nWhat I can do is open the settings page [ACTION_MEMORY_CARD_SETTINGS][1], except on Android API level 33+ this specific action does not open the Storage settings anymore, but the *Internal Storage* settings. So I have two questions:\r\n\r\n- Is there an easier way of unmounting the storage for the user?\r\n- In case there is not, is there an equivalent action to ACTION_MEMORY_CARD_SETTINGS for API level 33+, that opens the specific memory setting page where a user can unmount an *external* USB device?\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/provider/Settings#ACTION_MEMORY_CARD_SETTINGS","title":"Prompt the user to unmount a USB device","body":"<p>I am writing an Android App for which the user is required to connect an external storage through the USB-C port of a tablet.\nOnce operations on the external storage are complete, I would like the user to unmount the USB device correctly, which means he should either:</p>\n<ol>\n<li>tap the &quot;unmount&quot; button in the &quot;USB storage added&quot; notification that automatically appears as soon as the device is connected.</li>\n<li>Open the Storage settings page, tap on the external USB device and press &quot;unmount&quot;.</li>\n</ol>\n<p>Ideally, this process would be quick and as automated as possible. My understanding from reading other questions is that I cannot re-implement in my app the functionality of the button in option 1, because apps are not allowed to mount and unmount storage units.\nWhat I can do is open the settings page <a href=\"https://developer.android.com/reference/android/provider/Settings#ACTION_MEMORY_CARD_SETTINGS\" rel=\"nofollow noreferrer\">ACTION_MEMORY_CARD_SETTINGS</a>, except on Android API level 33+ this specific action does not open the Storage settings anymore, but the <em>Internal Storage</em> settings. So I have two questions:</p>\n<ul>\n<li>Is there an easier way of unmounting the storage for the user?</li>\n<li>In case there is not, is there an equivalent action to ACTION_MEMORY_CARD_SETTINGS for API level 33+, that opens the specific memory setting page where a user can unmount an <em>external</em> USB device?</li>\n</ul>\n"},{"tags":["java","quarkus","mutiny"],"answers":[{"tags":[],"owner":{"account_id":27690871,"reputation":1,"user_id":21137607,"display_name":"eksklyuzyv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695274238,"creation_date":1695263179,"answer_id":77146850,"question_id":77133693,"body_markdown":"To make it happen, just try this: \r\n```\r\nUni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; {\r\n            minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build());\r\n            return null;\r\n        }))\r\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\r\n        .await().indefinitely();\r\n```","title":"How to use Smallrye Mutiny to call a void method which throws checked exceptions","body":"<p>To make it happen, just try this:</p>\n<pre><code>Uni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; {\n            minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build());\n            return null;\n        }))\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\n        .await().indefinitely();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3568344,"reputation":645,"user_id":2979325,"display_name":"Serkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695280598,"creation_date":1695280150,"answer_id":77147924,"question_id":77133693,"body_markdown":"Easiest way is to call it like this:\r\n\r\n    public Uni&lt;Void&gt; foo() {\r\n       return Uni.createFrom().voidItem().invoke(() -&gt; yourVoidMethod());\r\n    }\r\n\r\nOr if you want to catch any exceptions from your void method then you can call it like this:\r\n\r\n    public Uni&lt;Void&gt; foo() {\r\n       return Uni.createFrom().voidItem().invoke(Unchecked.consumer(x -&gt; yourVoidMethod()));\r\n    }\r\n\r\n","title":"How to use Smallrye Mutiny to call a void method which throws checked exceptions","body":"<p>Easiest way is to call it like this:</p>\n<pre><code>public Uni&lt;Void&gt; foo() {\n   return Uni.createFrom().voidItem().invoke(() -&gt; yourVoidMethod());\n}\n</code></pre>\n<p>Or if you want to catch any exceptions from your void method then you can call it like this:</p>\n<pre><code>public Uni&lt;Void&gt; foo() {\n   return Uni.createFrom().voidItem().invoke(Unchecked.consumer(x -&gt; yourVoidMethod()));\n}\n</code></pre>\n"}],"owner":{"account_id":16559898,"reputation":47,"user_id":11966054,"display_name":"EthanStudent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695280598,"creation_date":1695118710,"question_id":77133693,"body_markdown":"When using Smallrye Mutiny to handle exceptions, the imperative code becomes more fluent. I can even call methods that throw checked exceptions by using ```Unchecked.supplier()``` to handle them: \r\n```\r\nLifecycleConfiguration lifecycleConfiguration = Uni.createFrom().item(Unchecked.supplier(() -&gt; minioClient.getBucketLifecycle(GetBucketLifecycleArgs.builder().bucket(bucketName).build())))\r\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to get MinIO bucket life cycle configuration&quot;, e))\r\n        .await().indefinitely();\r\n```\r\nHowever, I cannot apply the same approach to methods that throw checked exceptions and return ```void```. For instance, consider the following method:\r\n```\r\npublic void setBucketLifecycle(SetBucketLifecycleArgs args) throws ErrorResponseException, InsufficientDataException, InternalException, InvalidKeyException, InvalidResponseException, IOException, NoSuchAlgorithmException, ServerException, XmlParserException {\r\n    try {\r\n        this.asyncClient.setBucketLifecycle(args).get();\r\n    } catch (InterruptedException var3) {\r\n        throw new RuntimeException(var3);\r\n    } catch (ExecutionException var4) {\r\n        this.asyncClient.throwEncapsulatedException(var4);\r\n    }\r\n\r\n}\r\n```\r\nIf I write the code below, the IDE raises alerts in two places:\r\n```\r\n//                     vvvv IDE alerts: Cannot resolve method &#39;item(Supplier&lt;T&gt;)&#39;\r\nUni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build())))\r\n//                                                   ^^^^ IDE alerts: Bad return type in lambda expression: void cannot be converted to T\r\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\r\n        .await().indefinitely();\r\n```\r\nIs it possible that I can call methods that throw checked exceptions and return ```void``` using Smallrye Mutiny, without additionally using try and catch?","title":"How to use Smallrye Mutiny to call a void method which throws checked exceptions","body":"<p>When using Smallrye Mutiny to handle exceptions, the imperative code becomes more fluent. I can even call methods that throw checked exceptions by using <code>Unchecked.supplier()</code> to handle them:</p>\n<pre><code>LifecycleConfiguration lifecycleConfiguration = Uni.createFrom().item(Unchecked.supplier(() -&gt; minioClient.getBucketLifecycle(GetBucketLifecycleArgs.builder().bucket(bucketName).build())))\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to get MinIO bucket life cycle configuration&quot;, e))\n        .await().indefinitely();\n</code></pre>\n<p>However, I cannot apply the same approach to methods that throw checked exceptions and return <code>void</code>. For instance, consider the following method:</p>\n<pre><code>public void setBucketLifecycle(SetBucketLifecycleArgs args) throws ErrorResponseException, InsufficientDataException, InternalException, InvalidKeyException, InvalidResponseException, IOException, NoSuchAlgorithmException, ServerException, XmlParserException {\n    try {\n        this.asyncClient.setBucketLifecycle(args).get();\n    } catch (InterruptedException var3) {\n        throw new RuntimeException(var3);\n    } catch (ExecutionException var4) {\n        this.asyncClient.throwEncapsulatedException(var4);\n    }\n\n}\n</code></pre>\n<p>If I write the code below, the IDE raises alerts in two places:</p>\n<pre><code>//                     vvvv IDE alerts: Cannot resolve method 'item(Supplier&lt;T&gt;)'\nUni.createFrom().&lt;Void&gt;item(Unchecked.supplier(() -&gt; minioClient.setBucketLifecycle(SetBucketLifecycleArgs.builder().config(lifecycleConfiguration).bucket(bucketName).build())))\n//                                                   ^^^^ IDE alerts: Bad return type in lambda expression: void cannot be converted to T\n        .onFailure().transform(e -&gt; new CommonSystemErrorException(&quot;Failed to set MinIO bucket life cycle configuration&quot;, e))\n        .await().indefinitely();\n</code></pre>\n<p>Is it possible that I can call methods that throw checked exceptions and return <code>void</code> using Smallrye Mutiny, without additionally using try and catch?</p>\n"},{"tags":["java","future"],"owner":{"account_id":7473334,"reputation":1161,"user_id":5680504,"accept_rate":98,"display_name":"sclee1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695280008,"creation_date":1695280008,"question_id":77147906,"body_markdown":"I tried to estimate the performance between async and sync.\r\nI wrote some easy async code which is reading the file and printing the result.\r\nI divided them into two parts, one is reading the file and the other is printing the result.\r\n\r\nbelow is my whole code.\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.util.concurrent.*;\r\n    import java.util.concurrent.atomic.AtomicLong;\r\n    \r\n    public class AsyncExample {\r\n    \r\n      private static AtomicLong counter = new AtomicLong(0);\r\n    \r\n      public static void main(String[] args) {\r\n        AsyncExample asyncExample = new AsyncExample();\r\n        ExecutorService executor = Executors.newFixedThreadPool(2);\r\n        ExecutorService dbExecutor = Executors.newFixedThreadPool(32);\r\n    \r\n        ClassLoader classLoader = AsyncExample.class.getClassLoader();\r\n        InputStream inputStream = classLoader.getResourceAsStream(\r\n                &quot;data_id.json&quot;);\r\n    \r\n        Long ts = System.currentTimeMillis();\r\n    \r\n        BlockingQueue&lt;String&gt; lineQueue = new LinkedBlockingQueue&lt;&gt;();\r\n    \r\n        CompletableFuture&lt;Void&gt; readFileFuture = CompletableFuture.runAsync(() -&gt; {\r\n          try (BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n              lineQueue.offer(line);\r\n              counter.incrementAndGet();\r\n            }\r\n          } catch (IOException e) {\r\n            e.printStackTrace();\r\n          }\r\n        }, executor);\r\n    \r\n        CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\r\n          while (true) {\r\n            String line = lineQueue.poll();\r\n            if (line != null) {\r\n              CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\r\n                asyncExample.doTask(line);\r\n              }, dbExecutor);\r\n    \r\n              dbTask.thenAccept(result -&gt; {\r\n                System.out.println(&quot;Task is done&quot;);\r\n              });\r\n            } else if (readFileFuture.isDone()) {\r\n              if (counter.get()==0) {\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }, dbExecutor);\r\n    \r\n        try {\r\n          readFileFuture.get();\r\n          writeToDbFuture1.get();\r\n    \r\n        } catch (Exception e) {\r\n          e.printStackTrace();\r\n        } finally {\r\n          executor.shutdown();\r\n          dbExecutor.shutdown();\r\n          Long end = System.currentTimeMillis() - ts;\r\n          System.out.println(&quot;time : &quot; + end);\r\n        }\r\n      }\r\n    \r\n      private void doTask(String line) {\r\n        try {\r\n          System.out.println(line);\r\n          Thread.sleep(500);\r\n          counter.decrementAndGet();\r\n        } catch (InterruptedException e) {\r\n          throw new RuntimeException(e);\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nThe `data_is.json` looks as \r\n\r\n````\r\n1\r\n2\r\n3\r\n4\r\n5\r\n6\r\n7\r\n8\r\n9\r\n10\r\n11\r\n12\r\n13\r\n14\r\n15\r\n````\r\n\r\n\r\nThe program finished within 1 seconds because the task is parallel.\r\n\r\nTo enhance my code, I think that below code is little bit strange to me because it has nested completable future.\r\n\r\n    CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\r\n          while (true) {\r\n            String line = lineQueue.poll();\r\n            if (line != null) {\r\n              CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\r\n                asyncExample.doTask(line);\r\n              }, dbExecutor);\r\n    \r\n              dbTask.thenAccept(result -&gt; {\r\n                System.out.println(&quot;Task is done&quot;);\r\n              });\r\n            } else if (readFileFuture.isDone()) {\r\n              if (counter.get()==0) {\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }, dbExecutor);\r\n\r\nSo I changed it into as below one.\r\n\r\n    CompletableFuture&lt;Void&gt; writeToDbFuture2 = CompletableFuture.runAsync(() -&gt; {\r\n      while (true) {\r\n        String line = lineQueue.poll();\r\n        if (line != null) {\r\n          asyncExample.doTask(line);\r\n        } else if (readFileFuture.isDone()) {\r\n          if (counter.get() == 0) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }, dbExecutor);\r\n\r\nI removed the nested and expected the result is same but it didn&#39;t.\r\n\r\nIt took about 7 secs which is similar to the sync one.\r\n\r\nFrom this observation, I have the following questions.\r\n\r\n1) Why the second one cannot be run as parallel?\r\n\r\n2) the first code is no problem in programmatic way?","title":"Confused when using the completableFuture for reading the file","body":"<p>I tried to estimate the performance between async and sync.\nI wrote some easy async code which is reading the file and printing the result.\nI divided them into two parts, one is reading the file and the other is printing the result.</p>\n<p>below is my whole code.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.concurrent.*;\nimport java.util.concurrent.atomic.AtomicLong;\n\npublic class AsyncExample {\n\n  private static AtomicLong counter = new AtomicLong(0);\n\n  public static void main(String[] args) {\n    AsyncExample asyncExample = new AsyncExample();\n    ExecutorService executor = Executors.newFixedThreadPool(2);\n    ExecutorService dbExecutor = Executors.newFixedThreadPool(32);\n\n    ClassLoader classLoader = AsyncExample.class.getClassLoader();\n    InputStream inputStream = classLoader.getResourceAsStream(\n            &quot;data_id.json&quot;);\n\n    Long ts = System.currentTimeMillis();\n\n    BlockingQueue&lt;String&gt; lineQueue = new LinkedBlockingQueue&lt;&gt;();\n\n    CompletableFuture&lt;Void&gt; readFileFuture = CompletableFuture.runAsync(() -&gt; {\n      try (BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {\n        String line;\n        while ((line = reader.readLine()) != null) {\n          lineQueue.offer(line);\n          counter.incrementAndGet();\n        }\n      } catch (IOException e) {\n        e.printStackTrace();\n      }\n    }, executor);\n\n    CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\n      while (true) {\n        String line = lineQueue.poll();\n        if (line != null) {\n          CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\n            asyncExample.doTask(line);\n          }, dbExecutor);\n\n          dbTask.thenAccept(result -&gt; {\n            System.out.println(&quot;Task is done&quot;);\n          });\n        } else if (readFileFuture.isDone()) {\n          if (counter.get()==0) {\n            break;\n          }\n        }\n      }\n    }, dbExecutor);\n\n    try {\n      readFileFuture.get();\n      writeToDbFuture1.get();\n\n    } catch (Exception e) {\n      e.printStackTrace();\n    } finally {\n      executor.shutdown();\n      dbExecutor.shutdown();\n      Long end = System.currentTimeMillis() - ts;\n      System.out.println(&quot;time : &quot; + end);\n    }\n  }\n\n  private void doTask(String line) {\n    try {\n      System.out.println(line);\n      Thread.sleep(500);\n      counter.decrementAndGet();\n    } catch (InterruptedException e) {\n      throw new RuntimeException(e);\n    }\n  }\n}\n</code></pre>\n<p>The <code>data_is.json</code> looks as</p>\n<pre><code>1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n</code></pre>\n<p>The program finished within 1 seconds because the task is parallel.</p>\n<p>To enhance my code, I think that below code is little bit strange to me because it has nested completable future.</p>\n<pre><code>CompletableFuture&lt;Void&gt; writeToDbFuture1 = CompletableFuture.runAsync(() -&gt; {\n      while (true) {\n        String line = lineQueue.poll();\n        if (line != null) {\n          CompletableFuture&lt;Void&gt; dbTask = CompletableFuture.runAsync(() -&gt; {\n            asyncExample.doTask(line);\n          }, dbExecutor);\n\n          dbTask.thenAccept(result -&gt; {\n            System.out.println(&quot;Task is done&quot;);\n          });\n        } else if (readFileFuture.isDone()) {\n          if (counter.get()==0) {\n            break;\n          }\n        }\n      }\n    }, dbExecutor);\n</code></pre>\n<p>So I changed it into as below one.</p>\n<pre><code>CompletableFuture&lt;Void&gt; writeToDbFuture2 = CompletableFuture.runAsync(() -&gt; {\n  while (true) {\n    String line = lineQueue.poll();\n    if (line != null) {\n      asyncExample.doTask(line);\n    } else if (readFileFuture.isDone()) {\n      if (counter.get() == 0) {\n        break;\n      }\n    }\n  }\n}, dbExecutor);\n</code></pre>\n<p>I removed the nested and expected the result is same but it didn't.</p>\n<p>It took about 7 secs which is similar to the sync one.</p>\n<p>From this observation, I have the following questions.</p>\n<ol>\n<li><p>Why the second one cannot be run as parallel?</p>\n</li>\n<li><p>the first code is no problem in programmatic way?</p>\n</li>\n</ol>\n"},{"tags":["java","weblogic","oracle-adf","jdeveloper"],"answers":[{"tags":[],"owner":{"account_id":371386,"reputation":3693,"user_id":719884,"display_name":"Shay Shmeltzer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1357776200,"creation_date":1357776200,"answer_id":14248682,"question_id":14193616,"body_markdown":"The easiest thing to do would be to click the debug icon instead of the run icon in JDeveloper - that will start your WebLogic in debug mode and you&#39;ll be able to debug your JSPs.\r\n\r\nhttps://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger\r\n\r\nYou can also start WebLogic itself with debug parameters \r\nhttp://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>The easiest thing to do would be to click the debug icon instead of the run icon in JDeveloper - that will start your WebLogic in debug mode and you'll be able to debug your JSPs.</p>\n\n<p><a href=\"https://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger\" rel=\"nofollow\">https://blogs.oracle.com/shay/entry/introduction_to_the_adf_debugger</a></p>\n\n<p>You can also start WebLogic itself with debug parameters \n<a href=\"http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html</a></p>\n"},{"tags":[],"owner":{"account_id":2098089,"reputation":5795,"user_id":1866427,"accept_rate":67,"display_name":"lokoko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361298337,"creation_date":1361298337,"answer_id":14964714,"question_id":14193616,"body_markdown":"As Shay mentioned, you could just debug your project instead of running it. To set the debug params, just goto :\r\n\r\n    project properties - run debug - launch settings - java options and add all your params","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>As Shay mentioned, you could just debug your project instead of running it. To set the debug params, just goto :</p>\n\n<pre><code>project properties - run debug - launch settings - java options and add all your params\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33617,"reputation":1850,"user_id":94225,"display_name":"St.Shadow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471948357,"creation_date":1471948357,"answer_id":39098756,"question_id":14193616,"body_markdown":"Another option - start Weblogic in debug mode and connect to it using remote debugger from JDeveloper.","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>Another option - start Weblogic in debug mode and connect to it using remote debugger from JDeveloper.</p>\n"}],"owner":{"account_id":1942336,"reputation":1581,"user_id":1748237,"accept_rate":76,"display_name":"Alexander Tumin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8286,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695279665,"creation_date":1357553005,"question_id":14193616,"body_markdown":"For  some reason, instead of target jspx page i am gettin the error\r\n\r\n    OracleJSP error: java.io.FileNotFoundException:\r\n    \r\n    Set the init-param debug_mode to &quot;true&quot; to see the complete exception message.\r\n\r\n(thats it, no file name).\r\n\r\nBut i have no idea where to set this init-param.\r\n\r\nAs far as i googled, everyone suggesting (well, back in 2001-2009 years) to set it in `global-web-application.xml` file, but it seems missing in modern JDeveloper setup.\r\n\r\nAlso ones are suggesting to add init-param in `web.xml` (which is exists), but to non-existing section:\r\n\r\n    &lt;servlet&gt;\r\n      &lt;servlet-name&gt;jsp&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;oracle.jsp.runtimev2.JspServlet&lt;/servlet-class&gt;\r\n\r\nSo i am confused. Where should i add this init-param in modern (11.1.1.6.0+) JDeveloper setups?","title":"How to enable debug_mode for a JSP page in modern JDeveloper/Weblogic/ADF","body":"<p>For  some reason, instead of target jspx page i am gettin the error</p>\n\n<pre><code>OracleJSP error: java.io.FileNotFoundException:\n\nSet the init-param debug_mode to \"true\" to see the complete exception message.\n</code></pre>\n\n<p>(thats it, no file name).</p>\n\n<p>But i have no idea where to set this init-param.</p>\n\n<p>As far as i googled, everyone suggesting (well, back in 2001-2009 years) to set it in <code>global-web-application.xml</code> file, but it seems missing in modern JDeveloper setup.</p>\n\n<p>Also ones are suggesting to add init-param in <code>web.xml</code> (which is exists), but to non-existing section:</p>\n\n<pre><code>&lt;servlet&gt;\n  &lt;servlet-name&gt;jsp&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;oracle.jsp.runtimev2.JspServlet&lt;/servlet-class&gt;\n</code></pre>\n\n<p>So i am confused. Where should i add this init-param in modern (11.1.1.6.0+) JDeveloper setups?</p>\n"},{"tags":["java","volatile","java-threads"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1682188288,"post_id":76081253,"comment_id":134177303,"body_markdown":"`value = value + 1` requires an `AtomicInteger`, not just a volatile.","body":"<code>value = value + 1</code> requires an <code>AtomicInteger</code>, not just a volatile."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1682188343,"post_id":76081253,"comment_id":134177313,"body_markdown":"Hi &amp; welcome! :) ..maybe...but: `thread1.start();thread1.join();thread2.start();` *is sequential* (i.e. *not parallel*)","body":"Hi &amp; welcome! :) ..maybe...but: <code>thread1.start();thread1.join();thread2.start();</code> <i>is sequential</i> (i.e. <i>not parallel</i>)"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1682189143,"post_id":76081253,"comment_id":134177413,"body_markdown":"`volatile` makes reads and writes atomic, but not their combination.  See, for example, https://www.scaler.com/topics/volatile-keyword-in-java/.  Incrementing a volatile variable is _not_ safe and needs a full `AtomicInteger`.","body":"<code>volatile</code> makes reads and writes atomic, but not their combination.  See, for example, <a href=\"https://www.scaler.com/topics/volatile-keyword-in-java/\" rel=\"nofollow noreferrer\">scaler.com/topics/volatile-keyword-in-java</a>.  Incrementing a volatile variable is <i>not</i> safe and needs a full <code>AtomicInteger</code>."},{"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"score":0,"creation_date":1682192378,"post_id":76081253,"comment_id":134177765,"body_markdown":"@Louis Wasserman `volatile` is not about atomicity, do not please confuse others: https://stackoverflow.com/questions/19744508/volatile-vs-atomic#:~:text=Volatile%20and%20Atomic%20are%20two,on%20variables%20are%20performed%20atomically.","body":"@Louis Wasserman <code>volatile</code> is not about atomicity, do not please confuse others: <a href=\"https://stackoverflow.com/questions/19744508/volatile-vs-atomic#:~:text=Volatile%20and%20Atomic%20are%20two,on%20variables%20are%20performed%20atomically\" title=\"volatile vs atomic%23%3a%7e%3atext%3dVolatile%2520and%2520Atomic%2520are%2520two%2con%2520variables%2520are%2520performed%2520atomically\">stackoverflow.com/questions/19744508/&hellip;</a>."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1682250402,"post_id":76081253,"comment_id":134182493,"body_markdown":"Each instance of `MutliThreadExample` has its own `value`, so there is only one thread accessing it anyway; volatile isn&#39;t really necessary for your code.","body":"Each instance of <code>MutliThreadExample</code> has its own <code>value</code>, so there is only one thread accessing it anyway; volatile isn&#39;t really necessary for your code."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695280207,"post_id":76081253,"comment_id":136003832,"body_markdown":"@Mikhail2048 - Actually, atomicity *can* come into it.  JLS 17.7 says: *&quot;For the purposes of the Java programming language memory model, a single write to a **non-volatile** long or double value is treated as two separate writes: one to each 32-bit half. This can result in a situation where a thread sees the first 32 bits of a 64-bit value from one write, and the second 32 bits from another write.&quot;*.","body":"@Mikhail2048 - Actually, atomicity <i>can</i> come into it.  JLS 17.7 says: <i>&quot;For the purposes of the Java programming language memory model, a single write to a <b>non-volatile</b> long or double value is treated as two separate writes: one to each 32-bit half. This can result in a situation where a thread sees the first 32 bits of a 64-bit value from one write, and the second 32 bits from another write.&quot;</i>."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695280491,"post_id":76081253,"comment_id":136003879,"body_markdown":"Note that it is implementation specific whether a JVM is actually subject to &quot;word tearing&quot; issues with non-volatile `long` and `double` shared variables.","body":"Note that it is implementation specific whether a JVM is actually subject to &quot;word tearing&quot; issues with non-volatile <code>long</code> and <code>double</code> shared variables."},{"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"score":0,"creation_date":1695283080,"post_id":76081253,"comment_id":136004384,"body_markdown":"@StephenC - yes, if we are talking about the atomicity of double and long writes that&#39;s ok. But this atomicity is achieved on the CPU level on 64-bit machines, and almost all of the machines today are 64-bit, including mobile devices. I am not saying you are wrong, I am saying that the author is using a ridiculous example which is not relevant at all - he uses an integer.","body":"@StephenC - yes, if we are talking about the atomicity of double and long writes that&#39;s ok. But this atomicity is achieved on the CPU level on 64-bit machines, and almost all of the machines today are 64-bit, including mobile devices. I am not saying you are wrong, I am saying that the author is using a ridiculous example which is not relevant at all - he uses an integer."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695284599,"post_id":76081253,"comment_id":136004678,"body_markdown":"That&#39;s not what your comment **says**.  You respond to a *general* comment about what volatile with an (incorrect) general denial.","body":"That&#39;s not what your comment <b>says</b>.  You respond to a <i>general</i> comment about what volatile with an (incorrect) general denial."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1695279636,"creation_date":1682232769,"answer_id":76083499,"question_id":76081253,"body_markdown":"&gt; Am I doing anything wrong in this ?\r\n\r\nYes.  Multiple things.\r\n\r\nFirstly, your application is effectively single-threaded (NOT multi-threaded) because of this:\r\n\r\n        thread1.start();\r\n        thread1.join();\r\n        thread2.start();\r\n\r\nWhat that says is\r\n\r\n  1.  Start thread1\r\n  2.  Wait for thread1 to finish\r\n  3.  Start thread2.\r\n\r\nSo thread1 and thread2 will not be running at the same time.\r\n\r\nSecondly, the threads do this:\r\n\r\n        Thread.sleep(1000);\r\n\r\nWhen you call `sleep`, variable values that are cached in registers, etcetera are liable to be written to main memory.  That is liable to make this code behave differently, and interfere with any observations you are attempting to make. \r\n\r\nThirdly, they do this:\r\n\r\n        System.out.println(value + &quot;-&quot; + Thread.currentThread());\r\n\r\nIn the `println` call, the I/O stack typically does some synchronization under the hood, and *that* will also interfere with the observation of `value`.  Furthermore `value` may have changed since you incremented it.\r\n\r\nFourthly, you increment the variable like this:\r\n\r\n        value = value + 1;\r\n\r\nThat is not an atomic operation, even when `value` is declared as `volatile`.  It is in fact a read operation followed by an addition followed by a write operation.  The same would be true if you wrote\r\n\r\n        value++;  // or ++value;\r\n\r\nIf two threads *actually* execute these statement simultaneously, they are liable to *occasionally* lose an increment due to the interleaving of the read, add, and write operations on the shared variable from different threads.\r\n\r\n(Declaring a variable as `volatile` gives a *happens before* relationship between a write of the variable by one thread a subsequent reads of the same variable by other threads.  But that is not sufficient to implement a counter that can be updated by two or more threads in a thread-safe fashion.   To do that you need to use `synchronized`, an `AtomicInteger` or equivalent.)\r\n\r\nFinally, you have declared `value` as an instance variable of `MutliThreadExample`, and `thread1` and `thread2` are different instances of that class.  That means that `thread1` and `thread2` are updating *different* `value` variables.  There is no shared variable, so the whole example is moot! \r\n\r\n----------------------\r\n\r\nIn summary your code produces the same output in both versions because it is not multi-threaded.  The `sleep` and `println` calls are also liable to interfere with the &quot;observations&quot;.  And the threads are updating *different* `value` variables anyway.\r\n\r\nIf you fixed all of those problems, your code is *not thread-safe*, either with the `volatile` or without it.  Neither version would be guaranteed produce either correct or incorrect answers.  They would both have non-deterministic behavior.\r\n\r\nReliably demonstrating the effects of `volatile` is difficult.  And making basic programming mistakes doesn&#39;t help.\r\n","title":"Volatile keyword not able to use properly","body":"<blockquote>\n<p>Am I doing anything wrong in this ?</p>\n</blockquote>\n<p>Yes.  Multiple things.</p>\n<p>Firstly, your application is effectively single-threaded (NOT multi-threaded) because of this:</p>\n<pre><code>    thread1.start();\n    thread1.join();\n    thread2.start();\n</code></pre>\n<p>What that says is</p>\n<ol>\n<li>Start thread1</li>\n<li>Wait for thread1 to finish</li>\n<li>Start thread2.</li>\n</ol>\n<p>So thread1 and thread2 will not be running at the same time.</p>\n<p>Secondly, the threads do this:</p>\n<pre><code>    Thread.sleep(1000);\n</code></pre>\n<p>When you call <code>sleep</code>, variable values that are cached in registers, etcetera are liable to be written to main memory.  That is liable to make this code behave differently, and interfere with any observations you are attempting to make.</p>\n<p>Thirdly, they do this:</p>\n<pre><code>    System.out.println(value + &quot;-&quot; + Thread.currentThread());\n</code></pre>\n<p>In the <code>println</code> call, the I/O stack typically does some synchronization under the hood, and <em>that</em> will also interfere with the observation of <code>value</code>.  Furthermore <code>value</code> may have changed since you incremented it.</p>\n<p>Fourthly, you increment the variable like this:</p>\n<pre><code>    value = value + 1;\n</code></pre>\n<p>That is not an atomic operation, even when <code>value</code> is declared as <code>volatile</code>.  It is in fact a read operation followed by an addition followed by a write operation.  The same would be true if you wrote</p>\n<pre><code>    value++;  // or ++value;\n</code></pre>\n<p>If two threads <em>actually</em> execute these statement simultaneously, they are liable to <em>occasionally</em> lose an increment due to the interleaving of the read, add, and write operations on the shared variable from different threads.</p>\n<p>(Declaring a variable as <code>volatile</code> gives a <em>happens before</em> relationship between a write of the variable by one thread a subsequent reads of the same variable by other threads.  But that is not sufficient to implement a counter that can be updated by two or more threads in a thread-safe fashion.   To do that you need to use <code>synchronized</code>, an <code>AtomicInteger</code> or equivalent.)</p>\n<p>Finally, you have declared <code>value</code> as an instance variable of <code>MutliThreadExample</code>, and <code>thread1</code> and <code>thread2</code> are different instances of that class.  That means that <code>thread1</code> and <code>thread2</code> are updating <em>different</em> <code>value</code> variables.  There is no shared variable, so the whole example is moot!</p>\n<hr />\n<p>In summary your code produces the same output in both versions because it is not multi-threaded.  The <code>sleep</code> and <code>println</code> calls are also liable to interfere with the &quot;observations&quot;.  And the threads are updating <em>different</em> <code>value</code> variables anyway.</p>\n<p>If you fixed all of those problems, your code is <em>not thread-safe</em>, either with the <code>volatile</code> or without it.  Neither version would be guaranteed produce either correct or incorrect answers.  They would both have non-deterministic behavior.</p>\n<p>Reliably demonstrating the effects of <code>volatile</code> is difficult.  And making basic programming mistakes doesn't help.</p>\n"}],"owner":{"account_id":28381698,"reputation":31,"user_id":21708882,"display_name":"shravan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1682317390,"answer_count":1,"score":3,"last_activity_date":1695279636,"creation_date":1682187565,"question_id":76081253,"body_markdown":"I get the same output with and without the `volatile` keyword.\r\n\r\nHave I made a mistake in the code?\r\n\r\n\r\n```java \r\npublic class MutliThreadExample extends Thread{\r\n\r\n\tvolatile int value;\r\n\t\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\tMutliThreadExample thread1 = new MutliThreadExample();\r\n\t\tMutliThreadExample thread2 = new MutliThreadExample();\r\n\t\tthread1.start();\r\n\t\tthread1.join();\r\n\t\tthread2.start();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tfor (int i = 1; i &lt;= 5; i++) {\r\n\t\t\tvalue = value + 1;\r\n\t\t\tSystem.out.println(value + &quot;-&quot; + Thread.currentThread());\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI am not able to use `volatile` keyword properly in Java.","title":"Volatile keyword not able to use properly","body":"<p>I get the same output with and without the <code>volatile</code> keyword.</p>\n<p>Have I made a mistake in the code?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MutliThreadExample extends Thread{\n\n    volatile int value;\n    \n    public static void main(String[] args) throws InterruptedException {\n        MutliThreadExample thread1 = new MutliThreadExample();\n        MutliThreadExample thread2 = new MutliThreadExample();\n        thread1.start();\n        thread1.join();\n        thread2.start();\n    }\n\n    @Override\n    public void run() {\n        for (int i = 1; i &lt;= 5; i++) {\n            value = value + 1;\n            System.out.println(value + &quot;-&quot; + Thread.currentThread());\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>I am not able to use <code>volatile</code> keyword properly in Java.</p>\n"},{"tags":["java","pdf","google-cloud-platform","itext","google-bucket"],"owner":{"account_id":10471939,"reputation":1,"user_id":7719549,"display_name":"Aamir Sheraz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695279573,"creation_date":1695279573,"question_id":77147859,"body_markdown":"I am trying to generate pdf byte array from image array and then storing in google bucket.\r\nEverything is working fine except resultant pdf page size.\r\nInput image size is reasonable (can be viewed without scrolling page) but when output file is uploaded to google bucket its size becomes more than what it had in inout image.\r\nI have to scroll to view the complete output file\r\n\r\n\r\nBelow is my code\r\n\r\n```\r\npublic static byte[] receiptImageToPdf(byte[] receipt) throws IOException, DocumentException {\r\n        Image image = Image.getInstance(receipt);\r\n        Rectangle imageSize = new Rectangle( image.getWidth() + 1f,   image.getHeight() + 1f);\r\n        image.scaleAbsolute(image.getWidth(), image.getHeight());\r\n        Document document = new Document(imageSize, 0, 0, 0, 0);\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        PdfWriter writer = PdfWriter.getInstance(document, out);\r\n        document.open();\r\n        document.add(image);\r\n        document.close();\r\n        writer.close();\r\n        return out.toByteArray();\r\n    }\r\n```\r\nLater:\r\n```\r\nbyte[] pdfBytes = Util.receiptImageToPdf(imageBytes);\r\nstorage.createFrom(blobInfo, new ByteArrayInputStream(pdfBytes));\r\n```\r\n\r\n Downloaded file from google bucket\r\n[enter image description here](https://i.stack.imgur.com/T714w.jpg)\r\n\r\nI need to generate byte array and then upload to google bucket which can be fit to one page as per input image.","title":"Generate pdf byte array from image byte array with same size in java","body":"<p>I am trying to generate pdf byte array from image array and then storing in google bucket.\nEverything is working fine except resultant pdf page size.\nInput image size is reasonable (can be viewed without scrolling page) but when output file is uploaded to google bucket its size becomes more than what it had in inout image.\nI have to scroll to view the complete output file</p>\n<p>Below is my code</p>\n<pre><code>public static byte[] receiptImageToPdf(byte[] receipt) throws IOException, DocumentException {\n        Image image = Image.getInstance(receipt);\n        Rectangle imageSize = new Rectangle( image.getWidth() + 1f,   image.getHeight() + 1f);\n        image.scaleAbsolute(image.getWidth(), image.getHeight());\n        Document document = new Document(imageSize, 0, 0, 0, 0);\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        PdfWriter writer = PdfWriter.getInstance(document, out);\n        document.open();\n        document.add(image);\n        document.close();\n        writer.close();\n        return out.toByteArray();\n    }\n</code></pre>\n<p>Later:</p>\n<pre><code>byte[] pdfBytes = Util.receiptImageToPdf(imageBytes);\nstorage.createFrom(blobInfo, new ByteArrayInputStream(pdfBytes));\n</code></pre>\n<p>Downloaded file from google bucket\n<a href=\"https://i.stack.imgur.com/T714w.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I need to generate byte array and then upload to google bucket which can be fit to one page as per input image.</p>\n"},{"tags":["java","apache-camel","activemq"],"answers":[{"tags":[],"owner":{"account_id":7156997,"reputation":167,"user_id":5469081,"display_name":"Michal Ambrož"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695279161,"creation_date":1695279161,"answer_id":77147804,"question_id":77147690,"body_markdown":"    activeMQConnectionFactory.setAlwaysSyncSend(true);\r\n\r\nhelped me and now I see messages in AMQ and it fails if it is down","title":"Camel and Active MQ connects to some local broker","body":"<pre><code>activeMQConnectionFactory.setAlwaysSyncSend(true);\n</code></pre>\n<p>helped me and now I see messages in AMQ and it fails if it is down</p>\n"}],"owner":{"account_id":7156997,"reputation":167,"user_id":5469081,"display_name":"Michal Ambrož"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695279161,"creation_date":1695277967,"question_id":77147690,"body_markdown":"I have camel spring boot application and I want to connect local active MQ broker. I added libraries \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-activemq&lt;/artifactId&gt;\r\n            &lt;version&gt;${cammel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nconfiguration\r\n\r\n      @Bean(name = &quot;activemq&quot;)\r\n      public ActiveMQComponent createComponent() {\r\n        ActiveMQConnectionFactory activeMQConnectionFactory = new ActiveMQConnectionFactory();\r\n        activeMQConnectionFactory.setBrokerURL(&quot;tcp://AP934467:61616&quot;);\r\n    \r\n    \r\n        ActiveMQComponent activeMQComponent = new ActiveMQComponent();\r\n        activeMQComponent.setConnectionFactory(activeMQConnectionFactory);\r\n        return activeMQComponent;\r\n      }\r\n\r\nand two simple flows\r\n\r\n        from(&quot;file:src/data&quot;)\r\n                .log(LoggingLevel.ERROR, &quot;Forwarding message...&quot;)\r\n                .to(&quot;activemq:queue:In.Queue&quot;);\r\n\r\n        from(&quot;activemq:queue:In.Queue&quot;)\r\n                .log(LoggingLevel.ERROR, &quot;Forwarding message again...&quot;)\r\n                .to(&quot;activemq:queue:Out.Queue&quot;);\r\n\r\nEverything works fine. It takes the file, puts it &#39;somewhere&#39; reads it and puts it to Out.Queue. The issue is, that i do not see messages in ActiveMQ. It even works if I terminate ActiveMQ on &quot;tcp://AP934467:61616&quot;. The messages are handled by something else. \r\n\r\nLog below\r\n\r\n    2023-09-21 08:11:36.126 DEBUG o.a.c.c.file.GenericFileConsumer.processExchange - About to process file: GenericFile[message1.xml] using exchange: Exchange[]\r\n    2023-09-21 08:11:36.126 ERROR route2.log - Forwarding message...\r\n    2023-09-21 08:11:36.126 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:Out.Queue Exchange[063A6440B9046E0-0000000000000002]\r\n    2023-09-21 08:11:36.126 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:2,started=true,closed=false} java.lang.Object@613d705a\r\n    2023-09-21 08:11:36.126 DEBUG o.a.camel.component.jms.JmsBinding.appendJmsProperty - Ignoring non primitive header: CamelFileInitialOffset of class: org.apache.camel.support.resume.Resumables$AnonymousResumable with value: org.apache.camel.support.resume.Resumables$AnonymousResumable@63c9e513\r\n    2023-09-21 08:11:36.126 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://Out.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = null, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 0, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@4bf3c3ed, dataOut = java.io.DataOutputStream@7a43afe9, dataIn = null }\r\n    2023-09-21 08:11:36.129 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:2:1:2 sent to queue://Out.Queue\r\n    2023-09-21 08:11:36.130 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=1, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 1, memUsage:1184, maxPageSize:200\r\n    2023-09-21 08:11:36.130 DEBUG o.a.c.c.file.GenericFileOnCompletion.onCompletion - Done processing file: GenericFile[message1.xml] using exchange: Exchange[063A6440B9046E0-0000000000000002]\r\n    2023-09-21 08:11:36.131 DEBUG o.a.c.c.j.DefaultJmsMessageListenerContainer.doReceiveAndExecute - Received message of type [class org.apache.activemq.command.ActiveMQBytesMessage] from consumer [ActiveMQMessageConsumer { value=ID:AP934467-53582-1695276133517-4:1:1:1, started=true }] of session [Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb]\r\n    2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\r\n    2023-09-21 08:11:36.131 DEBUG o.a.c.c.f.s.GenericFileProcessStrategySupport.renameFile - Renaming file: GenericFile[message1.xml] to: GenericFile[.camel\\message1.xml]\r\n    2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\r\n    2023-09-21 08:11:36.131 DEBUG o.a.c.c.jms.EndpointMessageListener.onMessage - activemq://queue:Out.Queue consumer received JMS message: ActiveMQBytesMessage {commandId = 11, responseRequired = true, messageId = ID:AP934467-53582-1695276133517-4:1:2:1:2, originalDestination = null, originalTransactionId = null, producerId = ID:AP934467-53582-1695276133517-4:1:2:1, destination = queue://Out.Queue, transactionId = null, expiration = 0, timestamp = 1695276696126, arrival = 0, brokerInTime = 1695276696126, brokerOutTime = 1695276696130, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@3c088eb, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 1184, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = true, readOnlyBody = true, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = null, dataOut = null, dataIn = null }\r\n    2023-09-21 08:11:36.132 ERROR route3.log - Forwarding message again...\r\n    2023-09-21 08:11:36.132 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:In.Queue Exchange[063A6440B9046E0-0000000000000003]\r\n    2023-09-21 08:11:36.132 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb\r\n    2023-09-21 08:11:36.132 DEBUG org.apache.camel.util.FileUtil.renameFile - Tried 1 to rename file: C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml to: src\\data\\.camel\\message1.xml with result: true\r\n    2023-09-21 08:11:36.132 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://In.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = queue://Out.Queue, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1695276696126, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelJmsDeliveryMode=2, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@1af2b730, dataOut = java.io.DataOutputStream@294cf90a, dataIn = null }\r\n    2023-09-21 08:11:36.133 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:1:1:2 sent to queue://In.Queue\r\n    2023-09-21 08:11:36.134 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://In.Queue, subscriptions=0, memory=0%, size=2, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 1, pagedInPendingDispatch.size 1, enqueueCount: 2, dequeueCount: 0, memUsage:2368, maxPageSize:200\r\n\r\n\r\n","title":"Camel and Active MQ connects to some local broker","body":"<p>I have camel spring boot application and I want to connect local active MQ broker. I added libraries</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n        &lt;artifactId&gt;camel-activemq&lt;/artifactId&gt;\n        &lt;version&gt;${cammel.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>configuration</p>\n<pre><code>  @Bean(name = &quot;activemq&quot;)\n  public ActiveMQComponent createComponent() {\n    ActiveMQConnectionFactory activeMQConnectionFactory = new ActiveMQConnectionFactory();\n    activeMQConnectionFactory.setBrokerURL(&quot;tcp://AP934467:61616&quot;);\n\n\n    ActiveMQComponent activeMQComponent = new ActiveMQComponent();\n    activeMQComponent.setConnectionFactory(activeMQConnectionFactory);\n    return activeMQComponent;\n  }\n</code></pre>\n<p>and two simple flows</p>\n<pre><code>    from(&quot;file:src/data&quot;)\n            .log(LoggingLevel.ERROR, &quot;Forwarding message...&quot;)\n            .to(&quot;activemq:queue:In.Queue&quot;);\n\n    from(&quot;activemq:queue:In.Queue&quot;)\n            .log(LoggingLevel.ERROR, &quot;Forwarding message again...&quot;)\n            .to(&quot;activemq:queue:Out.Queue&quot;);\n</code></pre>\n<p>Everything works fine. It takes the file, puts it 'somewhere' reads it and puts it to Out.Queue. The issue is, that i do not see messages in ActiveMQ. It even works if I terminate ActiveMQ on &quot;tcp://AP934467:61616&quot;. The messages are handled by something else.</p>\n<p>Log below</p>\n<pre><code>2023-09-21 08:11:36.126 DEBUG o.a.c.c.file.GenericFileConsumer.processExchange - About to process file: GenericFile[message1.xml] using exchange: Exchange[]\n2023-09-21 08:11:36.126 ERROR route2.log - Forwarding message...\n2023-09-21 08:11:36.126 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:Out.Queue Exchange[063A6440B9046E0-0000000000000002]\n2023-09-21 08:11:36.126 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:2,started=true,closed=false} java.lang.Object@613d705a\n2023-09-21 08:11:36.126 DEBUG o.a.camel.component.jms.JmsBinding.appendJmsProperty - Ignoring non primitive header: CamelFileInitialOffset of class: org.apache.camel.support.resume.Resumables$AnonymousResumable with value: org.apache.camel.support.resume.Resumables$AnonymousResumable@63c9e513\n2023-09-21 08:11:36.126 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://Out.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = null, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 0, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@4bf3c3ed, dataOut = java.io.DataOutputStream@7a43afe9, dataIn = null }\n2023-09-21 08:11:36.129 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:2:1:2 sent to queue://Out.Queue\n2023-09-21 08:11:36.130 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=1, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 1, memUsage:1184, maxPageSize:200\n2023-09-21 08:11:36.130 DEBUG o.a.c.c.file.GenericFileOnCompletion.onCompletion - Done processing file: GenericFile[message1.xml] using exchange: Exchange[063A6440B9046E0-0000000000000002]\n2023-09-21 08:11:36.131 DEBUG o.a.c.c.j.DefaultJmsMessageListenerContainer.doReceiveAndExecute - Received message of type [class org.apache.activemq.command.ActiveMQBytesMessage] from consumer [ActiveMQMessageConsumer { value=ID:AP934467-53582-1695276133517-4:1:1:1, started=true }] of session [Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb]\n2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\n2023-09-21 08:11:36.131 DEBUG o.a.c.c.f.s.GenericFileProcessStrategySupport.renameFile - Renaming file: GenericFile[message1.xml] to: GenericFile[.camel\\message1.xml]\n2023-09-21 08:11:36.131 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://Out.Queue, subscriptions=1, memory=0%, size=0, pending=0 toPageIn: 0, force:false, Inflight: 0, pagedInMessages.size 0, pagedInPendingDispatch.size 0, enqueueCount: 2, dequeueCount: 2, memUsage:0, maxPageSize:200\n2023-09-21 08:11:36.131 DEBUG o.a.c.c.jms.EndpointMessageListener.onMessage - activemq://queue:Out.Queue consumer received JMS message: ActiveMQBytesMessage {commandId = 11, responseRequired = true, messageId = ID:AP934467-53582-1695276133517-4:1:2:1:2, originalDestination = null, originalTransactionId = null, producerId = ID:AP934467-53582-1695276133517-4:1:2:1, destination = queue://Out.Queue, transactionId = null, expiration = 0, timestamp = 1695276696126, arrival = 0, brokerInTime = 1695276696126, brokerOutTime = 1695276696130, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@3c088eb, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 1184, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1693383287223, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = true, readOnlyBody = true, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = null, dataOut = null, dataIn = null }\n2023-09-21 08:11:36.132 ERROR route3.log - Forwarding message again...\n2023-09-21 08:11:36.132 DEBUG o.a.camel.processor.SendProcessor.process - &gt;&gt;&gt;&gt; activemq://queue:In.Queue Exchange[063A6440B9046E0-0000000000000003]\n2023-09-21 08:11:36.132 DEBUG o.a.c.c.j.JmsConfiguration$CamelJmsTemplate.execute - Executing callback on JMS Session: Cached JMS Session: ActiveMQSession {id=ID:AP934467-53582-1695276133517-4:1:1,started=true,closed=false} java.lang.Object@4a1954fb\n2023-09-21 08:11:36.132 DEBUG org.apache.camel.util.FileUtil.renameFile - Tried 1 to rename file: C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml to: src\\data\\.camel\\message1.xml with result: true\n2023-09-21 08:11:36.132 DEBUG o.a.c.component.jms.JmsConfiguration.doSend - Sending JMS message to: queue://In.Queue with message: ActiveMQBytesMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = queue://Out.Queue, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = {CamelFileLastModified=1693383287223, CamelFileParent=src\\data, CamelMessageTimestamp=1695276696126, CamelFilePath=src\\data\\message1.xml, CamelFileNameConsumed=message1.xml, CamelFileLength=160, CamelFileRelativePath=message1.xml, CamelJmsDeliveryMode=2, CamelFileAbsolute=false, CamelFileAbsolutePath=C:\\devenv\\IdeaProjects\\eai-cammel\\web\\src\\data\\message1.xml, CamelFileName=message1.xml, CamelFileNameOnly=message1.xml}, readOnlyProperties = false, readOnlyBody = false, droppable = false, jmsXGroupFirstForConsumer = false} ActiveMQBytesMessage{ bytesOut = org.apache.activemq.util.ByteArrayOutputStream@1af2b730, dataOut = java.io.DataOutputStream@294cf90a, dataIn = null }\n2023-09-21 08:11:36.133 DEBUG o.a.activemq.broker.region.Queue.messageSent - localhost Message ID:AP934467-53582-1695276133517-4:1:1:1:2 sent to queue://In.Queue\n2023-09-21 08:11:36.134 DEBUG o.a.activemq.broker.region.Queue.doPageInForDispatch - queue://In.Queue, subscriptions=0, memory=0%, size=2, pending=0 toPageIn: 1, force:false, Inflight: 0, pagedInMessages.size 1, pagedInPendingDispatch.size 1, enqueueCount: 2, dequeueCount: 0, memUsage:2368, maxPageSize:200\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":1628571,"reputation":6081,"user_id":1503570,"accept_rate":51,"display_name":"lorraine batol"},"score":0,"creation_date":1550887788,"post_id":54837368,"comment_id":96449541,"body_markdown":"Might not be what you are looking for exactly, an alternative option could be: in your logging configuration, you could add an entry for AbstractHandlerExceptionResolver then set the level to DEBUG. Note that it would get rid of all your WARN logs for that class not just the one specific that you don&#39;t want","body":"Might not be what you are looking for exactly, an alternative option could be: in your logging configuration, you could add an entry for AbstractHandlerExceptionResolver then set the level to DEBUG. Note that it would get rid of all your WARN logs for that class not just the one specific that you don&#39;t want"},{"owner":{"account_id":4101203,"reputation":1539,"user_id":3366706,"accept_rate":65,"display_name":"user3366706"},"score":0,"creation_date":1551116727,"post_id":54837368,"comment_id":96514047,"body_markdown":"@lorraine Our application uses log4j2, but Spring uses some other logging I guess, Spring is not taking the log configuration from our log4j2.xml file.","body":"@lorraine Our application uses log4j2, but Spring uses some other logging I guess, Spring is not taking the log configuration from our log4j2.xml file."},{"owner":{"account_id":1628571,"reputation":6081,"user_id":1503570,"accept_rate":51,"display_name":"lorraine batol"},"score":0,"creation_date":1551117119,"post_id":54837368,"comment_id":96514232,"body_markdown":"You can override libraries log level if I&#39;m not wrong, just put an entry on your log config file.  We do it for hibernate if when we want to examine its execution by adding entry on our log config file using the hibernate class and specify level.","body":"You can override libraries log level if I&#39;m not wrong, just put an entry on your log config file.  We do it for hibernate if when we want to examine its execution by adding entry on our log config file using the hibernate class and specify level."}],"answers":[{"tags":[],"owner":{"account_id":14600138,"reputation":250,"user_id":10544615,"display_name":"Centos"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555669152,"creation_date":1555669152,"answer_id":55760310,"question_id":54837368,"body_markdown":"You can disable this warning log in your logback configuration,\r\nby specifying in my case in &#39;logback-spring.groovy&#39; following line\r\n\r\n    logger(&quot;org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver&quot;, ERROR)","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>You can disable this warning log in your logback configuration,\nby specifying in my case in 'logback-spring.groovy' following line</p>\n\n<pre><code>logger(\"org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver\", ERROR)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1612811168,"creation_date":1612811168,"answer_id":66107778,"question_id":54837368,"body_markdown":"You mentioned `spring.mvc.log-resolved-exception=false` as a possible solution:\r\n\r\n&gt; Also, I see on google to set this property &quot;spring.mvc.log-resolved-exception=false&quot; to disable warning, but not sure where/how to set it.\r\n\r\nThe `spring.mvc.log-resolved-exception` property is a [Spring Boot property](https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#spring.mvc.log-resolved-exception), and would be set using standard Spring Boot [externalized configuration](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config) mechanisms.  Enabling the property causes Spring Boot to configure `HandlerExceptionResolver` beans to log exceptions when they otherwise wouldn&#39;t.\r\n\r\n&gt; Whether to enable warn logging of exceptions resolved by a &quot;HandlerExceptionResolver&quot;, except for &quot;DefaultHandlerExceptionResolver&quot;.\r\n\r\nSince you&#39;ve stated you&#39;re not using Spring Boot, this property is not applicable to your scenario.","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>You mentioned <code>spring.mvc.log-resolved-exception=false</code> as a possible solution:</p>\n<blockquote>\n<p>Also, I see on google to set this property &quot;spring.mvc.log-resolved-exception=false&quot; to disable warning, but not sure where/how to set it.</p>\n</blockquote>\n<p>The <code>spring.mvc.log-resolved-exception</code> property is a <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#spring.mvc.log-resolved-exception\" rel=\"noreferrer\">Spring Boot property</a>, and would be set using standard Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config\" rel=\"noreferrer\">externalized configuration</a> mechanisms.  Enabling the property causes Spring Boot to configure <code>HandlerExceptionResolver</code> beans to log exceptions when they otherwise wouldn't.</p>\n<blockquote>\n<p>Whether to enable warn logging of exceptions resolved by a &quot;HandlerExceptionResolver&quot;, except for &quot;DefaultHandlerExceptionResolver&quot;.</p>\n</blockquote>\n<p>Since you've stated you're not using Spring Boot, this property is not applicable to your scenario.</p>\n"},{"tags":[],"owner":{"account_id":29497803,"reputation":1,"user_id":22605474,"display_name":"Trifolium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695279053,"creation_date":1695279053,"answer_id":77147791,"question_id":54837368,"body_markdown":"When introducing spring-boot-devtools in Spring Boot, the log-resolved-exception will be automatically enabled. To disable it, you need to set `spring.mvc.log-resolved-exception: false` in the profile file. In the production environment where devtools does not exist, you don’t need to worry about this issue.","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>When introducing spring-boot-devtools in Spring Boot, the log-resolved-exception will be automatically enabled. To disable it, you need to set <code>spring.mvc.log-resolved-exception: false</code> in the profile file. In the production environment where devtools does not exist, you don’t need to worry about this issue.</p>\n"}],"owner":{"account_id":4101203,"reputation":1539,"user_id":3366706,"accept_rate":65,"display_name":"user3366706"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3569,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1695279053,"creation_date":1550885718,"question_id":54837368,"body_markdown":"Below exception handler that is common for all my controllers, is working fine except that I need to disable the WARN log from `AbstractHandlerExceptionResolver` class after processing the exception. Using Spring Web MVC 5.x version.\r\n\r\n\r\n```lang-java\r\n@ControllerAdvice\r\npublic class AllExceptionHandler{\r\n    @ExceptionHandler(SomeCustomException.class)\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    public void exceptionHandler() {\r\n    }\r\n}\r\n```\r\n\r\nThis is the log that is generated which I&#39;m trying to avoid:\r\n&gt; 02-20-2019 15:22:54,896  WARN [http-nio-8080-exec-1] (AbstractHandlerExceptionResolver.java:140) - Resolved [com.rasa.rrt.ste.controller.SomeCustomException]\r\n\r\nI&#39;m not using Spring Boot.\r\n\r\nTried to extend the above `AllExceptionHandler` class with  `ExceptionHandlerExceptionResolver` and call `warnLogCategory(null)` in the `AllExceptionHandler` constructor, but it throws `NullPointerException`.\r\n\r\nAlso, I see on Google to set this property `spring.mvc.log-resolved-exception=false` to disable warning, but not sure where/how to set it.\r\n","title":"Disable WARN logging from AbstractHandlerExceptionResolver in Spring","body":"<p>Below exception handler that is common for all my controllers, is working fine except that I need to disable the WARN log from <code>AbstractHandlerExceptionResolver</code> class after processing the exception. Using Spring Web MVC 5.x version.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class AllExceptionHandler{\n    @ExceptionHandler(SomeCustomException.class)\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public void exceptionHandler() {\n    }\n}\n</code></pre>\n<p>This is the log that is generated which I'm trying to avoid:</p>\n<blockquote>\n<p>02-20-2019 15:22:54,896  WARN [http-nio-8080-exec-1] (AbstractHandlerExceptionResolver.java:140) - Resolved [com.rasa.rrt.ste.controller.SomeCustomException]</p>\n</blockquote>\n<p>I'm not using Spring Boot.</p>\n<p>Tried to extend the above <code>AllExceptionHandler</code> class with  <code>ExceptionHandlerExceptionResolver</code> and call <code>warnLogCategory(null)</code> in the <code>AllExceptionHandler</code> constructor, but it throws <code>NullPointerException</code>.</p>\n<p>Also, I see on Google to set this property <code>spring.mvc.log-resolved-exception=false</code> to disable warning, but not sure where/how to set it.</p>\n"},{"tags":["java","maven","gitlab"],"owner":{"account_id":12063747,"reputation":297,"user_id":8821759,"display_name":"tarmogoyf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695278153,"creation_date":1695186886,"question_id":77139457,"body_markdown":"I struggle with Maven fetching dependency from Gitlab package repository: \r\n- I run &#39;mvn clean install&#39;, then get:\r\n\r\n```\r\n[WARNING] Checksum validation failed, expected &#39;&lt;!DOCTYPE&#39; (REMOTE_EXTERNAL) but is &gt;actually &#39;86eb59572f3ab956e455569321e8a82df68bb7d1&#39; from gitlab-maven for foo.jar\r\n```\r\n\r\n- and compilation then falls with:\r\n\r\n```\r\norg.eclipse.aether.transfer.ChecksumFailureException: Checksum validation failed, &gt;expected &#39;&lt;!DOCTYPE&#39; (REMOTE_EXTERNAL) but is actually &#39;37aa76a5d2b8d41249421e35470ca14c5e6a0b69&#39;\r\n   at org.eclipse.aether.connector.basic.ChecksumValidator.validateExternalChecksums &gt;(ChecksumValidator.java:179)\r\n    at org.eclipse.aether.connector.basic.ChecksumValidator.validate (ChecksumValidator.java:109)\r\n    at org.eclipse.aether.connector.basic.BasicRepositoryConnector$GetTaskRunner.runTask (BasicRepositoryConnector.java:484)\r\n```\r\n\r\n\r\n- My maven repository is configured like that:\r\n\r\n```\r\n&lt;repositories&gt;\r\n    &lt;repository&gt;\r\n        &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n        &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages/&lt;/url&gt;\r\n        &lt;snapshots&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n        &lt;/snapshots&gt;\r\n    &lt;/repository&gt;\r\n&lt;/repositories&gt;\r\n&lt;distributionManagement&gt;\r\n     &lt;repository&gt;\r\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\r\n     &lt;/repository&gt;\r\n     &lt;snapshotRepository&gt;\r\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\r\n     &lt;/snapshotRepository&gt;\r\n&lt;/distributionManagement&gt;\r\n```\r\nI added personal access token to my settings.xml, with all possible permissions to Gitlab repo:\r\n\r\n```\r\n&lt;servers&gt;\r\n    &lt;server&gt;\r\n      &lt;id&gt;gitlab-maven&lt;/id&gt;\r\n      &lt;configuration&gt;\r\n        &lt;httpHeaders&gt;\r\n          &lt;property&gt;\r\n            &lt;name&gt;Private-Token&lt;/name&gt;\r\n            &lt;value&gt;*********&lt;/value&gt;\r\n          &lt;/property&gt;\r\n        &lt;/httpHeaders&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/server&gt;\r\n&lt;/servers&gt;\r\n```\r\n\r\nIt seems that foo.jar file is ok, since I am capable to load it on my own and install it using  **mvn install:install-file**\r\nI would appreciate any advice to resolve the problem.","title":"Checksum failed for gitlab artefact","body":"<p>I struggle with Maven fetching dependency from Gitlab package repository:</p>\n<ul>\n<li>I run 'mvn clean install', then get:</li>\n</ul>\n<pre><code>[WARNING] Checksum validation failed, expected '&lt;!DOCTYPE' (REMOTE_EXTERNAL) but is &gt;actually '86eb59572f3ab956e455569321e8a82df68bb7d1' from gitlab-maven for foo.jar\n</code></pre>\n<ul>\n<li>and compilation then falls with:</li>\n</ul>\n<pre><code>org.eclipse.aether.transfer.ChecksumFailureException: Checksum validation failed, &gt;expected '&lt;!DOCTYPE' (REMOTE_EXTERNAL) but is actually '37aa76a5d2b8d41249421e35470ca14c5e6a0b69'\n   at org.eclipse.aether.connector.basic.ChecksumValidator.validateExternalChecksums &gt;(ChecksumValidator.java:179)\n    at org.eclipse.aether.connector.basic.ChecksumValidator.validate (ChecksumValidator.java:109)\n    at org.eclipse.aether.connector.basic.BasicRepositoryConnector$GetTaskRunner.runTask (BasicRepositoryConnector.java:484)\n</code></pre>\n<ul>\n<li>My maven repository is configured like that:</li>\n</ul>\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;gitlab-maven&lt;/id&gt;\n        &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages/&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;distributionManagement&gt;\n     &lt;repository&gt;\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\n     &lt;/repository&gt;\n     &lt;snapshotRepository&gt;\n            &lt;id&gt;gitlab-maven&lt;/id&gt;\n            &lt;url&gt;https://gitlab.foo.bar/company_name/-/packages&lt;/url&gt;\n     &lt;/snapshotRepository&gt;\n&lt;/distributionManagement&gt;\n</code></pre>\n<p>I added personal access token to my settings.xml, with all possible permissions to Gitlab repo:</p>\n<pre><code>&lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;gitlab-maven&lt;/id&gt;\n      &lt;configuration&gt;\n        &lt;httpHeaders&gt;\n          &lt;property&gt;\n            &lt;name&gt;Private-Token&lt;/name&gt;\n            &lt;value&gt;*********&lt;/value&gt;\n          &lt;/property&gt;\n        &lt;/httpHeaders&gt;\n      &lt;/configuration&gt;\n    &lt;/server&gt;\n&lt;/servers&gt;\n</code></pre>\n<p>It seems that foo.jar file is ok, since I am capable to load it on my own and install it using  <strong>mvn install:install-file</strong>\nI would appreciate any advice to resolve the problem.</p>\n"},{"tags":["java","jpa","persistence","hql"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695298427,"post_id":77147703,"comment_id":136007548,"body_markdown":"You mention it is deployed on a server, but not what server or how you&#39;ve configured it. Judging by you putting in jakarta.persistence.jdbc.url in the persistence.xml, you haven&#39;t configured this to be container managed persistence - check your logs and I&#39;m sure your server will be warning you about it not knowing what to do with your @PersistenceContext or that it is loading it with a default one instead of your named &quot;GreedTechDB&quot;","body":"You mention it is deployed on a server, but not what server or how you&#39;ve configured it. Judging by you putting in jakarta.persistence.jdbc.url in the persistence.xml, you haven&#39;t configured this to be container managed persistence - check your logs and I&#39;m sure your server will be warning you about it not knowing what to do with your @PersistenceContext or that it is loading it with a default one instead of your named &quot;GreedTechDB&quot;"},{"owner":{"account_id":10882772,"reputation":128,"user_id":8001135,"display_name":"recklessGreed"},"score":0,"creation_date":1695305622,"post_id":77147703,"comment_id":136009130,"body_markdown":"Yes i deploy the jar on a server and it is started with &quot;java -jar &quot; command in the CLI. Unfortunately i do not get any logs. Neither in Deployment nor in Debug mode on localhost","body":"Yes i deploy the jar on a server and it is started with &quot;java -jar &quot; command in the CLI. Unfortunately i do not get any logs. Neither in Deployment nor in Debug mode on localhost"},{"owner":{"account_id":14376658,"reputation":383,"user_id":10384954,"display_name":"Wladimir Diskowski"},"score":0,"creation_date":1695307754,"post_id":77147703,"comment_id":136009610,"body_markdown":"How do you create instance of MainSource? I hope not something like new MainSource()?","body":"How do you create instance of MainSource? I hope not something like new MainSource()?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695319045,"post_id":77147703,"comment_id":136012028,"body_markdown":"What configuration did you do so that the container will inject the &quot;GreedTechDB&quot; into your EntityManager instances? I&#39;d suggest you look at tutorials out there for your server (still not mentioned) on using JPA within it - for transactional management, you are going to need the container to manage the datasource","body":"What configuration did you do so that the container will inject the &quot;GreedTechDB&quot; into your EntityManager instances? I&#39;d suggest you look at tutorials out there for your server (still not mentioned) on using JPA within it - for transactional management, you are going to need the container to manage the datasource"}],"owner":{"account_id":10882772,"reputation":128,"user_id":8001135,"display_name":"recklessGreed"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695278112,"creation_date":1695278112,"question_id":77147703,"body_markdown":"I work on a maven project which is deployed as a runnable jar on a server.\r\n\r\nUnfortunately my EntityManager stays null if I not assign it manually.\r\n\r\nPersistence.xml \r\n```java\r\n&lt;persistence-unit name=&quot;GreedTechDB&quot;&gt;\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;shared-cache-mode&gt;NONE&lt;/shared-cache-mode&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://CORRECT_URL/GreedTechV1&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;CORRECT_USER&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;CORRECT_PASSWORD&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.schema-generation.database.action&quot; value=&quot;create&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot;    value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot;   value=&quot;true&quot; /&gt;\r\n            &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n```\r\n\r\nThen in my BaseSource,java\r\n```java\r\npublic class BaseSource implements Serializable {\r\n\r\n    @Getter\r\n    @PersistenceContext\r\n    protected EntityManager em;\r\n\r\n    private JPAQueryFactory queryFactory = null;\r\n\r\n    protected JPAQueryFactory jpaQueryFactory() {\r\n        if (queryFactory == null)\r\n            queryFactory = new JPAQueryFactory(em);\r\n        //em.clear();\r\n        return queryFactory;\r\n    }\r\n}\r\n```\r\n\r\nWhen my MainSource does the most Part of Insert//Updates\r\n```java\r\npublic class MainSource extends BaseSource {\r\n\r\n    public List&lt;Streamer&gt; getChannelsToJoin() {\r\n        QStreamer qStreamer = QStreamer.streamer;\r\n        return jpaQueryFactory().selectFrom(qStreamer).where(qStreamer.modules.like(&quot;%bot%&quot;)).fetch();\r\n    }\r\n\r\n    @Transactional\r\n    public void insertPengStats(int channel_id, int user_id, boolean success, int time_done) {\r\n        PengStats stats = new PengStats();\r\n        stats.setChannelId(channel_id);\r\n        stats.setUserId(user_id);\r\n        stats.setKilled(success);\r\n        stats.setTimeDone(time_done);\r\n        stats.setTimestamp(LocalDateTime.now());\r\n        em.persist(stats);\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nI tried to assign the EntityManager manually, then the Selects all worked but my Update/Inserts were not processed correctly. \r\nNo Exception was thrown but no data was persisted either...","title":"EntityManager is null if not created Manually","body":"<p>I work on a maven project which is deployed as a runnable jar on a server.</p>\n<p>Unfortunately my EntityManager stays null if I not assign it manually.</p>\n<p>Persistence.xml</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;persistence-unit name=&quot;GreedTechDB&quot;&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;shared-cache-mode&gt;NONE&lt;/shared-cache-mode&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://CORRECT_URL/GreedTechV1&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;CORRECT_USER&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;CORRECT_PASSWORD&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.schema-generation.database.action&quot; value=&quot;create&quot; /&gt;\n            &lt;property name=&quot;hibernate.dialect&quot;    value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot;   value=&quot;true&quot; /&gt;\n            &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n</code></pre>\n<p>Then in my BaseSource,java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BaseSource implements Serializable {\n\n    @Getter\n    @PersistenceContext\n    protected EntityManager em;\n\n    private JPAQueryFactory queryFactory = null;\n\n    protected JPAQueryFactory jpaQueryFactory() {\n        if (queryFactory == null)\n            queryFactory = new JPAQueryFactory(em);\n        //em.clear();\n        return queryFactory;\n    }\n}\n</code></pre>\n<p>When my MainSource does the most Part of Insert//Updates</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainSource extends BaseSource {\n\n    public List&lt;Streamer&gt; getChannelsToJoin() {\n        QStreamer qStreamer = QStreamer.streamer;\n        return jpaQueryFactory().selectFrom(qStreamer).where(qStreamer.modules.like(&quot;%bot%&quot;)).fetch();\n    }\n\n    @Transactional\n    public void insertPengStats(int channel_id, int user_id, boolean success, int time_done) {\n        PengStats stats = new PengStats();\n        stats.setChannelId(channel_id);\n        stats.setUserId(user_id);\n        stats.setKilled(success);\n        stats.setTimeDone(time_done);\n        stats.setTimestamp(LocalDateTime.now());\n        em.persist(stats);\n    }\n\n\n}\n</code></pre>\n<p>I tried to assign the EntityManager manually, then the Selects all worked but my Update/Inserts were not processed correctly.\nNo Exception was thrown but no data was persisted either...</p>\n"},{"tags":["java","xml","stax"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384511049,"post_id":19998460,"comment_id":29775702,"body_markdown":"I don&#39;t think you can. It would be *far* too easy to write broken XML that way.","body":"I don&#39;t think you can. It would be <i>far</i> too easy to write broken XML that way."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384511194,"post_id":19998460,"comment_id":29775769,"body_markdown":"You could transform your XML with an Xslt identity transform and output the result to a StaxResult based on your XMLStreamWriter...","body":"You could transform your XML with an Xslt identity transform and output the result to a StaxResult based on your XMLStreamWriter..."},{"owner":{"account_id":302030,"reputation":3942,"user_id":610159,"accept_rate":78,"display_name":"Andrei Petrenko"},"score":0,"creation_date":1384511251,"post_id":19998460,"comment_id":29775801,"body_markdown":"@JoachimSauer Sure it would. But let&#39;s assume I know what I&#39;m trying to do :).","body":"@JoachimSauer Sure it would. But let&#39;s assume I know what I&#39;m trying to do :)."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384512106,"post_id":19998460,"comment_id":29776270,"body_markdown":"I didn&#39;t try to imply otherwise ;-) I was just trying to explain a likely reason why this interface is lacking that (kind-of obvious) feature. I think going the path via an identity transformer (just as if writing to a file) is the way to go here","body":"I didn&#39;t try to imply otherwise ;-) I was just trying to explain a likely reason why this interface is lacking that (kind-of obvious) feature. I think going the path via an identity transformer (just as if writing to a file) is the way to go here"},{"owner":{"account_id":302030,"reputation":3942,"user_id":610159,"accept_rate":78,"display_name":"Andrei Petrenko"},"score":0,"creation_date":1384512442,"post_id":19998460,"comment_id":29776441,"body_markdown":"Thanks for idea. Maybe it makes sense to put it to answer?","body":"Thanks for idea. Maybe it makes sense to put it to answer?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1384512839,"post_id":19998460,"comment_id":29776644,"body_markdown":"For an answer I&#39;d have to look up the details, I don&#39;t think what I wrote here is answer-worthy. But feel free to put it as an answer yourself when you&#39;ve figured out the nitty-gritty ;-)","body":"For an answer I&#39;d have to look up the details, I don&#39;t think what I wrote here is answer-worthy. But feel free to put it as an answer yourself when you&#39;ve figured out the nitty-gritty ;-)"}],"answers":[{"tags":[],"owner":{"account_id":162425,"reputation":148009,"user_id":383861,"display_name":"bdoughan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1624899432,"creation_date":1384516459,"answer_id":20000514,"question_id":19998460,"body_markdown":"Below are a couple of options for handling this:\r\n\r\n## Option #1 - Use `javax.xml.transform.Transformer`\r\n\r\nYou could use a `javax.xml.transform.Transformer` to transform a `StreamSource` representing your XML fragment onto your `StAXResult` which is wrapping your `XMLStreamWriter`.\r\n\r\n## Option #2 - Interact Directly with the `OutputStream`\r\n\r\nAlternatively you could do something like the following. You can leverage `flush()` to force the `XMLStreamWriter` to output its contents.  Then you&#39;ll note that I do `xsw.writeCharacters(&quot;&quot;)` this forces the start element to end for `bar` before writing the nested XML as a `String`.  The sample code below needs to be flushed out to properly handle encoding issues.\r\n\r\n    import java.io.*;\r\n    import javax.xml.stream.*;\r\n    \r\n    public class Demo {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            OutputStream stream = System.out;\r\n            \r\n            XMLOutputFactory xof = XMLOutputFactory.newFactory();\r\n            XMLStreamWriter xsw = xof.createXMLStreamWriter(stream);\r\n            \r\n            xsw.writeStartDocument();\r\n            xsw.writeStartElement(&quot;foo&quot;);\r\n            xsw.writeStartElement(&quot;bar&quot;);\r\n            \r\n            /* Following line is very important, without it unescaped data \r\n               will appear inside the &lt;bar&gt; tag. */\r\n            xsw.writeCharacters(&quot;&quot;);\r\n            xsw.flush();\r\n            \r\n            OutputStreamWriter osw = new OutputStreamWriter(stream);\r\n            osw.write(&quot;&lt;baz&gt;Hello World&lt;baz&gt;&quot;);\r\n            osw.flush();\r\n            \r\n            xsw.writeEndElement();\r\n            xsw.writeEndElement();\r\n            xsw.writeEndDocument();\r\n            xsw.close();\r\n        }\r\n    \r\n    }","title":"How to write unescaped XML to XMLStreamWriter?","body":"<p>Below are a couple of options for handling this:</p>\n<h2>Option #1 - Use <code>javax.xml.transform.Transformer</code></h2>\n<p>You could use a <code>javax.xml.transform.Transformer</code> to transform a <code>StreamSource</code> representing your XML fragment onto your <code>StAXResult</code> which is wrapping your <code>XMLStreamWriter</code>.</p>\n<h2>Option #2 - Interact Directly with the <code>OutputStream</code></h2>\n<p>Alternatively you could do something like the following. You can leverage <code>flush()</code> to force the <code>XMLStreamWriter</code> to output its contents.  Then you'll note that I do <code>xsw.writeCharacters(&quot;&quot;)</code> this forces the start element to end for <code>bar</code> before writing the nested XML as a <code>String</code>.  The sample code below needs to be flushed out to properly handle encoding issues.</p>\n<pre><code>import java.io.*;\nimport javax.xml.stream.*;\n\npublic class Demo {\n\n    public static void main(String[] args) throws Exception {\n        OutputStream stream = System.out;\n        \n        XMLOutputFactory xof = XMLOutputFactory.newFactory();\n        XMLStreamWriter xsw = xof.createXMLStreamWriter(stream);\n        \n        xsw.writeStartDocument();\n        xsw.writeStartElement(&quot;foo&quot;);\n        xsw.writeStartElement(&quot;bar&quot;);\n        \n        /* Following line is very important, without it unescaped data \n           will appear inside the &lt;bar&gt; tag. */\n        xsw.writeCharacters(&quot;&quot;);\n        xsw.flush();\n        \n        OutputStreamWriter osw = new OutputStreamWriter(stream);\n        osw.write(&quot;&lt;baz&gt;Hello World&lt;baz&gt;&quot;);\n        osw.flush();\n        \n        xsw.writeEndElement();\n        xsw.writeEndElement();\n        xsw.writeEndDocument();\n        xsw.close();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":239789,"reputation":29807,"user_id":509627,"accept_rate":63,"display_name":"David Thielen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1395933763,"creation_date":1395933763,"answer_id":22692045,"question_id":19998460,"body_markdown":"woodstox has a stax implementation and their [XMLStreamWriter2][1] class has a writeRaw() call. We have the same need and this gave us a very nice solution.\r\n\r\n\r\n  [1]: http://woodstox.codehaus.org/3.2.8/javadoc/org/codehaus/stax2/XMLStreamWriter2.html","title":"How to write unescaped XML to XMLStreamWriter?","body":"<p>woodstox has a stax implementation and their <a href=\"http://woodstox.codehaus.org/3.2.8/javadoc/org/codehaus/stax2/XMLStreamWriter2.html\" rel=\"nofollow\">XMLStreamWriter2</a> class has a writeRaw() call. We have the same need and this gave us a very nice solution.</p>\n"},{"tags":[],"owner":{"account_id":427657,"reputation":2580,"user_id":809536,"accept_rate":80,"display_name":"ZiglioUK"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1449090490,"creation_date":1449090490,"answer_id":34053012,"question_id":19998460,"body_markdown":"    final XMLOutputFactory streamWriterFactory = XMLOutputFactory.newFactory();\r\n    streamWriterFactory.setProperty(&quot;escapeCharacters&quot;, false);\r\n\r\n[From here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/13508779/809536","title":"How to write unescaped XML to XMLStreamWriter?","body":"<pre><code>final XMLOutputFactory streamWriterFactory = XMLOutputFactory.newFactory();\nstreamWriterFactory.setProperty(\"escapeCharacters\", false);\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/13508779/809536\">From here</a></p>\n"}],"owner":{"account_id":302030,"reputation":3942,"user_id":610159,"accept_rate":78,"display_name":"Andrei Petrenko"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5170,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":20000514,"answer_count":3,"score":5,"last_activity_date":1695277866,"creation_date":1384509974,"question_id":19998460,"body_markdown":"I have a number of small XML chunks, that should be embedded in one big XML as child elements. Is there any way to write these chunks to &lt;code&gt;XMLStreamWriter&lt;/code&gt; without escaping them?","title":"How to write unescaped XML to XMLStreamWriter?","body":"<p>I have a number of small XML chunks, that should be embedded in one big XML as child elements. Is there any way to write these chunks to <code>XMLStreamWriter</code> without escaping them?</p>\n"},{"tags":["java","firebase","firebase-authentication"],"answers":[{"tags":[],"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695226138,"creation_date":1695226138,"answer_id":77144238,"question_id":77144056,"body_markdown":"If you want to write a java program to delete users in Firebase Auth, you must use the [Firebase Admin SDK][1].  You can&#39;t use the Android client SDK - it won&#39;t work at all outside of an Android app, and it doesn&#39;t even expose a method to delete a user by UID.  I suggest referring to the Firebase Admin documentation on [deleting a user][2].\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/admin/setup\r\n  [2]: https://firebase.google.com/docs/auth/admin/manage-users#delete_a_user","title":"Why I can&#39;t use the FirebaseAuth.getInstance.deleteUser(uid);","body":"<p>If you want to write a java program to delete users in Firebase Auth, you must use the <a href=\"https://firebase.google.com/docs/admin/setup\" rel=\"nofollow noreferrer\">Firebase Admin SDK</a>.  You can't use the Android client SDK - it won't work at all outside of an Android app, and it doesn't even expose a method to delete a user by UID.  I suggest referring to the Firebase Admin documentation on <a href=\"https://firebase.google.com/docs/auth/admin/manage-users#delete_a_user\" rel=\"nofollow noreferrer\">deleting a user</a>.</p>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695276974,"creation_date":1695276974,"answer_id":77147601,"question_id":77144056,"body_markdown":"While @DougStevenson solution solves the problem using the Firebase Admin SDK, please also note that the [FirebaseAuth][1] class doesn&#39;t contain any `deleteUser(uid)` method. However, there is a [delete()][2] method inside the [FirebaseUser][3] class, which:\r\n\r\n&gt; Deletes the user record from your Firebase project&#39;s database.\r\n\r\nSo if you want to delete a user from an Android app, that&#39;s the function that you have to use.\r\n\r\nOne more thing to notice, the delete operation is an asynchronous operation, so you have to attach a listener to see when the operation is complete or fails with an error.\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser#delete()\r\n  [3]: https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser","title":"Why I can&#39;t use the FirebaseAuth.getInstance.deleteUser(uid);","body":"<p>While @DougStevenson solution solves the problem using the Firebase Admin SDK, please also note that the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth\" rel=\"nofollow noreferrer\">FirebaseAuth</a> class doesn't contain any <code>deleteUser(uid)</code> method. However, there is a <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser#delete()\" rel=\"nofollow noreferrer\">delete()</a> method inside the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser\" rel=\"nofollow noreferrer\">FirebaseUser</a> class, which:</p>\n<blockquote>\n<p>Deletes the user record from your Firebase project's database.</p>\n</blockquote>\n<p>So if you want to delete a user from an Android app, that's the function that you have to use.</p>\n<p>One more thing to notice, the delete operation is an asynchronous operation, so you have to attach a listener to see when the operation is complete or fails with an error.</p>\n"}],"owner":{"account_id":29492925,"reputation":1,"user_id":22601623,"display_name":"Shiyu Pan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695277020,"creation_date":1695224513,"question_id":77144056,"body_markdown":"```\r\nFirebaseApp.initializeApp(this);\r\nFirebaseAuth.getInstance().deleteUser(uid);\r\nSystem.out.println(&quot;Successfully deleted user.&quot;);\r\n```\r\n\r\nIn this code，`deleteUser(uid)` shows that &quot;Cannot resolve method &#39;deleteUser&#39; in &#39;FirebaseAuth&#39;&quot;. I don&#39;t know why. My doubt is that: there may be some conflicts between client SDK and service SDK. I have not created my service code and just want to test the function so I write all the code in the client.\r\n\r\nI have tried a lot of ways, I want to know what should I do. Thank you guys.\r\nIf I need to separate the client and service then will it work?","title":"Why I can&#39;t use the FirebaseAuth.getInstance.deleteUser(uid);","body":"<pre><code>FirebaseApp.initializeApp(this);\nFirebaseAuth.getInstance().deleteUser(uid);\nSystem.out.println(&quot;Successfully deleted user.&quot;);\n</code></pre>\n<p>In this code，<code>deleteUser(uid)</code> shows that &quot;Cannot resolve method 'deleteUser' in 'FirebaseAuth'&quot;. I don't know why. My doubt is that: there may be some conflicts between client SDK and service SDK. I have not created my service code and just want to test the function so I write all the code in the client.</p>\n<p>I have tried a lot of ways, I want to know what should I do. Thank you guys.\nIf I need to separate the client and service then will it work?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9822,"page":170,"page_size":100}
