{"items":[{"tags":["java","sql","spring","jdbc"],"answers":[{"comments":[{"owner":{"account_id":23420828,"reputation":389,"user_id":17481061,"display_name":"Ilze"},"score":0,"creation_date":1695217661,"post_id":77138922,"comment_id":135994966,"body_markdown":"Thank you so much, it was indeed in controller called other method, you pointed me to right direction.","body":"Thank you so much, it was indeed in controller called other method, you pointed me to right direction."}],"tags":[],"owner":{"account_id":29479773,"reputation":36,"user_id":22590790,"display_name":"Chunlin Wu"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695371788,"creation_date":1695176447,"answer_id":77138922,"question_id":77138477,"body_markdown":"I tried your code and didn&#39;t reproduce the same error.Here is my code:\r\n\r\n```java\r\n@Repository\r\npublic class GardeningPostRepository {\r\n\r\n    private JdbcTemplate jdbcTemplate;\r\n\r\n    @Autowired\r\n    public GardeningPostRepository(DataSource dataSource) {\r\n        this.jdbcTemplate = new JdbcTemplate(dataSource);\r\n    }\r\n\r\n    public void test() {\r\n        RowMapper&lt;GardeningPost&gt; gardeningPostRowMapper = (rs, i) -&gt; {\r\n            GardeningPost post = new GardeningPost();\r\n            post.setUser_image_url(rs.getString(&quot;user_image_url&quot;));\r\n            return post;\r\n        };\r\n        List&lt;GardeningPost&gt; postList = jdbcTemplate.query(&quot;SELECT GardeningPost.*, Users.image_url AS user_image_url &quot; +\r\n                &quot;FROM GardeningPost &quot; +\r\n                &quot;INNER JOIN Users ON GardeningPost.users_gardening_post_id = Users.id &quot;, gardeningPostRowMapper);\r\n        System.out.println(postList);\r\n    }\r\n}\r\n\r\n```\r\n\r\nSince your error sql script is `SELECT * FROM GardeningPost limit ? offset ?`  and it&#39;s not the same one in `getAllGardeningPosts` method, I guess you called another method, and used the wrong rowMapper that tries to map `user_image_url` from an non-existent column in GardeningPost table.","title":"Column not found in JDBC join method","body":"<p>I tried your code and didn't reproduce the same error.Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class GardeningPostRepository {\n\n    private JdbcTemplate jdbcTemplate;\n\n    @Autowired\n    public GardeningPostRepository(DataSource dataSource) {\n        this.jdbcTemplate = new JdbcTemplate(dataSource);\n    }\n\n    public void test() {\n        RowMapper&lt;GardeningPost&gt; gardeningPostRowMapper = (rs, i) -&gt; {\n            GardeningPost post = new GardeningPost();\n            post.setUser_image_url(rs.getString(&quot;user_image_url&quot;));\n            return post;\n        };\n        List&lt;GardeningPost&gt; postList = jdbcTemplate.query(&quot;SELECT GardeningPost.*, Users.image_url AS user_image_url &quot; +\n                &quot;FROM GardeningPost &quot; +\n                &quot;INNER JOIN Users ON GardeningPost.users_gardening_post_id = Users.id &quot;, gardeningPostRowMapper);\n        System.out.println(postList);\n    }\n}\n\n</code></pre>\n<p>Since your error sql script is <code>SELECT * FROM GardeningPost limit ? offset ?</code>  and it's not the same one in <code>getAllGardeningPosts</code> method, I guess you called another method, and used the wrong rowMapper that tries to map <code>user_image_url</code> from an non-existent column in GardeningPost table.</p>\n"}],"owner":{"account_id":23420828,"reputation":389,"user_id":17481061,"display_name":"Ilze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77138922,"answer_count":1,"score":0,"last_activity_date":1695371788,"creation_date":1695165789,"question_id":77138477,"body_markdown":"I tried several options, but every time get the same error:\r\n\r\n&gt; PreparedStatementCallback; uncategorized SQLException for SQL [SELECT\r\n&gt; * FROM GardeningPost limit ? offset ?]; SQL state [S0022]; error code [0]; Column &#39;user_image_url&#39; not found.\r\n\r\n```\r\n@Override\r\npublic List&lt;GardeningPost&gt; getAllGardeningPosts(int pageSize, int offset) {\r\n    return jdbcTemplate.query(&quot;SELECT GardeningPost.*, Users.image_url AS user_image_url &quot; +\r\n            &quot;FROM GardeningPost &quot; +\r\n            &quot;INNER JOIN Users ON GardeningPost.users_gardening_post_id = Users.id &quot; +\r\n            &quot;LIMIT ? OFFSET ?&quot;, gardeningPostRowMapper, pageSize, offset);\r\n}\r\n```\r\n\r\nSince I&#39;m using only JDBC, I didn&#39;t modify my schema.sql which is: \r\n\r\n```sql\r\nCREATE TABLE Users\r\n(\r\n    id         BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\r\n    username VARCHAR(50) NOT NULL,\r\n    email      VARCHAR(100) NOT NULL,\r\n    password   VARCHAR(255) DEFAULT NULL,\r\n    enabled    BOOLEAN DEFAULT FALSE,\r\n    non_locked BOOLEAN DEFAULT TRUE,\r\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n    image_url  VARCHAR(255) DEFAULT &#39;https://cdn-icons-png.flaticon.com/512/149/149071.png&#39;,\r\n    CONSTRAINT UQ_Users_Email UNIQUE (email)\r\n); \r\nCREATE TABLE GardeningPost (\r\n                      id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\r\n                      date DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                      title VARCHAR(60) NOT NULL,\r\n                      description TEXT,\r\n                      tag VARCHAR(50),\r\n                      likes INT,\r\n                      view_count INT,\r\n                      img_url  VARCHAR(255),\r\n                      users_gardening_post_id BIGINT UNSIGNED NOT NULL,\r\n                      FOREIGN KEY (users_gardening_post_id) REFERENCES Users(id)\r\n);\r\n```\r\n\r\nI added a new column user_image_url in the class directly: \r\n\r\n```\r\n@Data\r\n@SuperBuilder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@JsonInclude(NON_DEFAULT)\r\npublic class GardeningPost {\r\n    private Long id;\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;)\r\n    private LocalDateTime date;\r\n    private String title;\r\n    private String description;\r\n    private String tag;\r\n    private Long likes;\r\n    private Long view_count;\r\n    private String img_url;\r\n    private String user_image_url;\r\n}\r\n```\r\n\r\nThe reason I created the method is because I want to use the relation and provide in controller response which would include in GardeningPost also user_image_url as user profile picture.","title":"Column not found in JDBC join method","body":"<p>I tried several options, but every time get the same error:</p>\n<blockquote>\n<p>PreparedStatementCallback; uncategorized SQLException for SQL [SELECT</p>\n<ul>\n<li>FROM GardeningPost limit ? offset ?]; SQL state [S0022]; error code [0]; Column 'user_image_url' not found.</li>\n</ul>\n</blockquote>\n<pre><code>@Override\npublic List&lt;GardeningPost&gt; getAllGardeningPosts(int pageSize, int offset) {\n    return jdbcTemplate.query(&quot;SELECT GardeningPost.*, Users.image_url AS user_image_url &quot; +\n            &quot;FROM GardeningPost &quot; +\n            &quot;INNER JOIN Users ON GardeningPost.users_gardening_post_id = Users.id &quot; +\n            &quot;LIMIT ? OFFSET ?&quot;, gardeningPostRowMapper, pageSize, offset);\n}\n</code></pre>\n<p>Since I'm using only JDBC, I didn't modify my schema.sql which is:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE Users\n(\n    id         BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    username VARCHAR(50) NOT NULL,\n    email      VARCHAR(100) NOT NULL,\n    password   VARCHAR(255) DEFAULT NULL,\n    enabled    BOOLEAN DEFAULT FALSE,\n    non_locked BOOLEAN DEFAULT TRUE,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    image_url  VARCHAR(255) DEFAULT 'https://cdn-icons-png.flaticon.com/512/149/149071.png',\n    CONSTRAINT UQ_Users_Email UNIQUE (email)\n); \nCREATE TABLE GardeningPost (\n                      id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\n                      date DATETIME DEFAULT CURRENT_TIMESTAMP,\n                      title VARCHAR(60) NOT NULL,\n                      description TEXT,\n                      tag VARCHAR(50),\n                      likes INT,\n                      view_count INT,\n                      img_url  VARCHAR(255),\n                      users_gardening_post_id BIGINT UNSIGNED NOT NULL,\n                      FOREIGN KEY (users_gardening_post_id) REFERENCES Users(id)\n);\n</code></pre>\n<p>I added a new column user_image_url in the class directly:</p>\n<pre><code>@Data\n@SuperBuilder\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonInclude(NON_DEFAULT)\npublic class GardeningPost {\n    private Long id;\n    @JsonFormat(pattern = &quot;yyyy-MM-dd'T'HH:mm:ss&quot;)\n    private LocalDateTime date;\n    private String title;\n    private String description;\n    private String tag;\n    private Long likes;\n    private Long view_count;\n    private String img_url;\n    private String user_image_url;\n}\n</code></pre>\n<p>The reason I created the method is because I want to use the relation and provide in controller response which would include in GardeningPost also user_image_url as user profile picture.</p>\n"},{"tags":["java","random","motion"],"owner":{"account_id":16995186,"reputation":105,"user_id":12293801,"display_name":"sushiwithoutsushi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695371692,"creation_date":1695371692,"question_id":77156023,"body_markdown":"I have a `Drone` class implemented as a Thread that is called from a `Map` class and every X milliseconds the `movement()` function of the `Drone` class is called to update the position and show it on the map.\r\n\r\nCurrently the `movement()` function looks as follows. \r\n```\r\n\tpublic void moveDrone() {\r\n\t\tdouble increment = 0.000007;\r\n//\t\tStraight line movement\r\n\t\tif(this.mode == true)\r\n\t\t\tp.setX(this.p.getX() + increment);\r\n\t\tif(this.mode == false)\r\n\t\t\tp.setX(p.getX() - increment);\r\n\t\tif(p.getX()&gt;38.88602||p.getX()&lt;38.88453)\r\n\t\t\tthis.mode = !this.mode;\r\n```\r\nWhich creates a movement in a straight line that looks pretty simple.\r\n\r\nI would like to simulate a random motion that looks kind of natural. I&#39;ve been reading about different implementations like brownian motion and boids but I couldn&#39;t find how to implement them for a single particle (drone in this case) that moves randomly inside a bounding box.\r\n\r\nAny link or pseudocode will help.\r\n","title":"How to implement a random natural motion for a single particle?","body":"<p>I have a <code>Drone</code> class implemented as a Thread that is called from a <code>Map</code> class and every X milliseconds the <code>movement()</code> function of the <code>Drone</code> class is called to update the position and show it on the map.</p>\n<p>Currently the <code>movement()</code> function looks as follows.</p>\n<pre><code>    public void moveDrone() {\n        double increment = 0.000007;\n//      Straight line movement\n        if(this.mode == true)\n            p.setX(this.p.getX() + increment);\n        if(this.mode == false)\n            p.setX(p.getX() - increment);\n        if(p.getX()&gt;38.88602||p.getX()&lt;38.88453)\n            this.mode = !this.mode;\n</code></pre>\n<p>Which creates a movement in a straight line that looks pretty simple.</p>\n<p>I would like to simulate a random motion that looks kind of natural. I've been reading about different implementations like brownian motion and boids but I couldn't find how to implement them for a single particle (drone in this case) that moves randomly inside a bounding box.</p>\n<p>Any link or pseudocode will help.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695373594,"post_id":77156013,"comment_id":136018628,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":22647836,"reputation":1,"user_id":16822947,"display_name":"10TN3 T&#242;ng"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695371577,"creation_date":1695371577,"question_id":77156013,"body_markdown":"i want to ask after i verify with \r\n```\r\nfrom(&quot;direct:signJwt&quot;)\r\n                 .setHeader(DigitalSignatureConstants.SIGNATURE_PRIVATE_KEY, constant(keys.getPrivate()))\r\n                 .to(&quot;crypto:sign:message?algorithm=SHA256withRSA&quot;)\r\n                 .to(&quot;direct:verify&quot;);\r\n\r\nfrom(&quot;direct:verify&quot;)\r\n                .setHeader(DigitalSignatureConstants.SIGNATURE_PUBLIC_KEY_OR_CERT, constant(keys.getPublic()))\r\n                .to(&quot;crypto:verify:check?algorithm=SHA256withRSA&quot;)\r\n                 .end();\r\n```\r\nHow to get the result if it&#39;s success or fail. Thank you\r\nI used camel crypto version 2.25.4\r\n\r\ni try to sign a jwt token with privatekey and use a public key to verify it","title":"Camel-Crypto sign and verify","body":"<p>i want to ask after i verify with</p>\n<pre><code>from(&quot;direct:signJwt&quot;)\n                 .setHeader(DigitalSignatureConstants.SIGNATURE_PRIVATE_KEY, constant(keys.getPrivate()))\n                 .to(&quot;crypto:sign:message?algorithm=SHA256withRSA&quot;)\n                 .to(&quot;direct:verify&quot;);\n\nfrom(&quot;direct:verify&quot;)\n                .setHeader(DigitalSignatureConstants.SIGNATURE_PUBLIC_KEY_OR_CERT, constant(keys.getPublic()))\n                .to(&quot;crypto:verify:check?algorithm=SHA256withRSA&quot;)\n                 .end();\n</code></pre>\n<p>How to get the result if it's success or fail. Thank you\nI used camel crypto version 2.25.4</p>\n<p>i try to sign a jwt token with privatekey and use a public key to verify it</p>\n"},{"tags":["java","sql","jdbc"],"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1695241917,"post_id":77144908,"comment_id":135999962,"body_markdown":"What for? Do you want to parse a query for some specific goal? What&#39;s the use case?","body":"What for? Do you want to parse a query for some specific goal? What&#39;s the use case?"},{"owner":{"account_id":1245174,"reputation":344,"user_id":1206791,"display_name":"makrom"},"score":0,"creation_date":1695248497,"post_id":77144908,"comment_id":136000805,"body_markdown":"No quite the opposite actually, parsing is pretty much what I want to avoid (and might be outright impossible without DB specific implementations since different DBs interpret statements differently). What I want to do is pretty much what the title says, execute arbitrary statements and receive a meaningful result, which is different depending on the type of the statement (returning a result set for select statements, or a message &quot;40 rows updated&quot; for an update statement, &quot;30 rows inserted for an insert statement, &quot;table xyz created&quot; for a create table statement and so on).","body":"No quite the opposite actually, parsing is pretty much what I want to avoid (and might be outright impossible without DB specific implementations since different DBs interpret statements differently). What I want to do is pretty much what the title says, execute arbitrary statements and receive a meaningful result, which is different depending on the type of the statement (returning a result set for select statements, or a message &quot;40 rows updated&quot; for an update statement, &quot;30 rows inserted for an insert statement, &quot;table xyz created&quot; for a create table statement and so on)."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1695371484,"post_id":77144908,"comment_id":136018229,"body_markdown":"_&quot;most informative method to execute arbitrary statements is likely .executeUpdate()&quot;_ That is not correct. The most flexible way is using `execute()`. If it returns `true` the first result is a result set (use `getResultSet()` to get the result set), if it is false, it is an update count (use `getUpdateCount()`, if that returns -1, there are no more results), after processing that result, use `getMoreResults()` to process subsequent results, if any. Its return value has the same meaning as for `execute()` (true result set, false update count), etc.","body":"<i>&quot;most informative method to execute arbitrary statements is likely .executeUpdate()&quot;</i> That is not correct. The most flexible way is using <code>execute()</code>. If it returns <code>true</code> the first result is a result set (use <code>getResultSet()</code> to get the result set), if it is false, it is an update count (use <code>getUpdateCount()</code>, if that returns -1, there are no more results), after processing that result, use <code>getMoreResults()</code> to process subsequent results, if any. Its return value has the same meaning as for <code>execute()</code> (true result set, false update count), etc."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695371540,"post_id":77144908,"comment_id":136018242,"body_markdown":"This will allow you to process arbitrary results, but does not actually identify the type of statement at hand. There is no common way that database systems expose information like that (if they even expose such information, or if they don&#39;t use a different level of abstraction).","body":"This will allow you to process arbitrary results, but does not actually identify the type of statement at hand. There is no common way that database systems expose information like that (if they even expose such information, or if they don&#39;t use a different level of abstraction)."},{"owner":{"account_id":1245174,"reputation":344,"user_id":1206791,"display_name":"makrom"},"score":0,"creation_date":1695402548,"post_id":77144908,"comment_id":136024519,"body_markdown":"@Mark Rotteveel Are you sure .execute() would be more flexible? Even if not, you are right that .getUpdateCount() can substitute the return value of .executeUpdate(), just like checking .getResultSet() for null could substitute the return value of .execute(). But even if they are equivalent in that regard, aesthetically .execute() would definitely be preferable. And perhaps you are right after all, in case there are DBs that refuse non-writing statements through .executeUpdate() (though I haven&#39;t encountered that yet).","body":"@Mark Rotteveel Are you sure .execute() would be more flexible? Even if not, you are right that .getUpdateCount() can substitute the return value of .executeUpdate(), just like checking .getResultSet() for null could substitute the return value of .execute(). But even if they are equivalent in that regard, aesthetically .execute() would definitely be preferable. And perhaps you are right after all, in case there are DBs that refuse non-writing statements through .executeUpdate() (though I haven&#39;t encountered that yet)."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695458242,"post_id":77144908,"comment_id":136029505,"body_markdown":"Yes, I&#39;m sure. The `execute()` method is for cases where you don&#39;t know what the result will be and how many results there will be (e.g. for example a SQL Server stored procedure can return multiple result sets and update counts in arbitrary order).","body":"Yes, I&#39;m sure. The <code>execute()</code> method is for cases where you don&#39;t know what the result will be and how many results there will be (e.g. for example a SQL Server stored procedure can return multiple result sets and update counts in arbitrary order)."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695458288,"post_id":77144908,"comment_id":136029510,"body_markdown":"Just checking `getResultSet` for `null` is not a good substitute, because that would go against the protocol established for `execute()` and `getMoreResults()`, and calling `executeUpdate()` when the first result is a result set should produce an exception, and it is driver-specific if that exception happens *before* or *after* the statement is executed on the server, so trying that might work on one driver, but not on another (not to mention that the driver might clear results on exceptions, or rollback the transaction in auto-commit, etc).","body":"Just checking <code>getResultSet</code> for <code>null</code> is not a good substitute, because that would go against the protocol established for <code>execute()</code> and <code>getMoreResults()</code>, and calling <code>executeUpdate()</code> when the first result is a result set should produce an exception, and it is driver-specific if that exception happens <i>before</i> or <i>after</i> the statement is executed on the server, so trying that might work on one driver, but not on another (not to mention that the driver might clear results on exceptions, or rollback the transaction in auto-commit, etc)."}],"answers":[{"comments":[{"owner":{"account_id":1245174,"reputation":344,"user_id":1206791,"display_name":"makrom"},"score":1,"creation_date":1695251471,"post_id":77145599,"comment_id":136001073,"body_markdown":"Thanks for your extensive answer, I appreciate it.\nRegarding not using executeUpdate(), obviously you are right that it can&#39;t determine the type, I meant &quot;most informative&quot; as it returns the most information without knowing the type.\nAre you sure parsing is more reliable? There are many cases how different DBs interpret statements differently (proprietary syntax, reserved keywords, priority of alias over keywords...).","body":"Thanks for your extensive answer, I appreciate it. Regarding not using executeUpdate(), obviously you are right that it can&#39;t determine the type, I meant &quot;most informative&quot; as it returns the most information without knowing the type. Are you sure parsing is more reliable? There are many cases how different DBs interpret statements differently (proprietary syntax, reserved keywords, priority of alias over keywords...)."},{"owner":{"account_id":1245174,"reputation":344,"user_id":1206791,"display_name":"makrom"},"score":0,"creation_date":1695251507,"post_id":77145599,"comment_id":136001081,"body_markdown":"As for your suggestions, the way I understand it 2.-4. are meant in a context of changing the objective. 1. is kind of what I was thinking of as a fallback. But unless I have a solution for every DB, .executeUpdate() might still be needed as the type would only be known after execution and could therefore not be used to determine the execution method.","body":"As for your suggestions, the way I understand it 2.-4. are meant in a context of changing the objective. 1. is kind of what I was thinking of as a fallback. But unless I have a solution for every DB, .executeUpdate() might still be needed as the type would only be known after execution and could therefore not be used to determine the execution method."},{"owner":{"account_id":1245174,"reputation":344,"user_id":1206791,"display_name":"makrom"},"score":0,"creation_date":1695251822,"post_id":77145599,"comment_id":136001113,"body_markdown":"And for the record, I fully understand your skepticism towards using.executeUpdate() for executing generic statements. The only reason I&#39;m considering it is due to a perceived lack of alternatives. Comment spam over ;)","body":"And for the record, I fully understand your skepticism towards using.executeUpdate() for executing generic statements. The only reason I&#39;m considering it is due to a perceived lack of alternatives. Comment spam over ;)"}],"tags":[],"owner":{"account_id":2730061,"reputation":1242,"user_id":2867361,"accept_rate":100,"display_name":"CHHIBI AMOR"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1695239937,"creation_date":1695239937,"answer_id":77145599,"question_id":77144908,"body_markdown":"Determining the exact type of an SQL statement without parsing it extensively can be challenging, especially when you want to cover all possible SQL dialects and variations across different database systems. JDBC and the `PreparedStatement` interface do not provide a direct way to ascertain the statement type.\r\n\r\nAs you&#39;ve mentioned, checking the first keyword might give you a rough idea but isn&#39;t foolproof due to the variety of SQL dialects and proprietary extensions. Additionally, using `executeUpdate()` for all statements isn&#39;t a good practice and won&#39;t reliably indicate the statement type.\r\n\r\nA more reliable approach would involve parsing the SQL statement, but this can be complex and error-prone. There are third-party SQL parsers available that can help with this, but they may not cover every possible SQL variation.\r\n\r\nHere are a few considerations:\r\n\r\n1. **Database-Specific Features**: Some databases provide extensions or system tables/functions to determine the statement type. For example, PostgreSQL has `pg_stat_statements`, and Oracle has `V$SQL` for tracking SQL statements. However, these are database-specific solutions and not part of standard JDBC.\r\n\r\n2. **Custom Logging**: Another approach is to log the SQL statements along with their types in your application for auditing purposes. This way, you can record the statement types at the time they are executed.\r\n\r\n3. **Stored Procedures**: Encapsulating SQL statements within stored procedures can provide more control and auditing capabilities. You can create stored procedures for different types of statements and then call those procedures from your application.\r\n\r\n4. **Query Builder**: Consider using a query builder or an Object-Relational Mapping (ORM) framework like Hibernate. These tools often abstract away the need to write raw SQL statements and can provide a more reliable way to perform database operations.\r\n\r\nIn summary, while there isn&#39;t a foolproof, database-agnostic way to determine the exact type of an SQL statement using `PreparedStatement`, you can combine various approaches based on your specific requirements and constraints. Custom logging and database-specific features can be useful, but you may still need to rely on some level of SQL parsing or use higher-level abstractions provided by frameworks to make your code more robust and maintainable.","title":"Getting meaningful results when executing arbitrary SQL statements (DML, DDL)","body":"<p>Determining the exact type of an SQL statement without parsing it extensively can be challenging, especially when you want to cover all possible SQL dialects and variations across different database systems. JDBC and the <code>PreparedStatement</code> interface do not provide a direct way to ascertain the statement type.</p>\n<p>As you've mentioned, checking the first keyword might give you a rough idea but isn't foolproof due to the variety of SQL dialects and proprietary extensions. Additionally, using <code>executeUpdate()</code> for all statements isn't a good practice and won't reliably indicate the statement type.</p>\n<p>A more reliable approach would involve parsing the SQL statement, but this can be complex and error-prone. There are third-party SQL parsers available that can help with this, but they may not cover every possible SQL variation.</p>\n<p>Here are a few considerations:</p>\n<ol>\n<li><p><strong>Database-Specific Features</strong>: Some databases provide extensions or system tables/functions to determine the statement type. For example, PostgreSQL has <code>pg_stat_statements</code>, and Oracle has <code>V$SQL</code> for tracking SQL statements. However, these are database-specific solutions and not part of standard JDBC.</p>\n</li>\n<li><p><strong>Custom Logging</strong>: Another approach is to log the SQL statements along with their types in your application for auditing purposes. This way, you can record the statement types at the time they are executed.</p>\n</li>\n<li><p><strong>Stored Procedures</strong>: Encapsulating SQL statements within stored procedures can provide more control and auditing capabilities. You can create stored procedures for different types of statements and then call those procedures from your application.</p>\n</li>\n<li><p><strong>Query Builder</strong>: Consider using a query builder or an Object-Relational Mapping (ORM) framework like Hibernate. These tools often abstract away the need to write raw SQL statements and can provide a more reliable way to perform database operations.</p>\n</li>\n</ol>\n<p>In summary, while there isn't a foolproof, database-agnostic way to determine the exact type of an SQL statement using <code>PreparedStatement</code>, you can combine various approaches based on your specific requirements and constraints. Custom logging and database-specific features can be useful, but you may still need to rely on some level of SQL parsing or use higher-level abstractions provided by frameworks to make your code more robust and maintainable.</p>\n"}],"owner":{"account_id":1245174,"reputation":344,"user_id":1206791,"display_name":"makrom"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695371283,"creation_date":1695232390,"question_id":77144908,"body_markdown":"Is there a reliable way to get the type of an SQL statement (SELECT, INSERT, UPDATE, DELETE, if possible also CREATE, TRUNCATE, DROP, ALTER...) without extensively parsing it? Do DBs return a reliable indicator for the type of the executed statement, ideally one that can be deducted from a `java.sql.PreparedStatement`?\r\n\r\nTo elaborate on the problem: A trivial way would be to check the first keyword, however this seems very error prone (e.g. statements starting with `WITH`, PL/SQL syntax, proprietary keywords and so on). The idea of reliably determining the type purely in Java without external resources seems daunting, especially when considering various DB vendors and versions (including future versions).\r\n\r\nAs far as I can tell, the most informative method to execute arbitrary statements is likely .executeUpdate(), as it returns the number of affected rows for writing statements; furthermore it won&#39;t return SQL errors for successfully executed DDLs (which from what I understand is the only indicator of success) and the `PreparedStatement` still has a retrievable `java.sql.ResultSet` for SELECT statements. But beside the fact that this would be in breach of various best practice approaches due to the misnomer/abuse of the method, this would still not give a clear indication of the type of the executed statement.","title":"Getting meaningful results when executing arbitrary SQL statements (DML, DDL)","body":"<p>Is there a reliable way to get the type of an SQL statement (SELECT, INSERT, UPDATE, DELETE, if possible also CREATE, TRUNCATE, DROP, ALTER...) without extensively parsing it? Do DBs return a reliable indicator for the type of the executed statement, ideally one that can be deducted from a <code>java.sql.PreparedStatement</code>?</p>\n<p>To elaborate on the problem: A trivial way would be to check the first keyword, however this seems very error prone (e.g. statements starting with <code>WITH</code>, PL/SQL syntax, proprietary keywords and so on). The idea of reliably determining the type purely in Java without external resources seems daunting, especially when considering various DB vendors and versions (including future versions).</p>\n<p>As far as I can tell, the most informative method to execute arbitrary statements is likely .executeUpdate(), as it returns the number of affected rows for writing statements; furthermore it won't return SQL errors for successfully executed DDLs (which from what I understand is the only indicator of success) and the <code>PreparedStatement</code> still has a retrievable <code>java.sql.ResultSet</code> for SELECT statements. But beside the fact that this would be in breach of various best practice approaches due to the misnomer/abuse of the method, this would still not give a clear indication of the type of the executed statement.</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":788777,"reputation":28977,"user_id":857132,"accept_rate":69,"display_name":"John3136"},"score":6,"creation_date":1695345542,"post_id":77154395,"comment_id":136015425,"body_markdown":"Does this answer your question? [Scanner is skipping nextLine() after using next() or nextFoo()?](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo) - this answer is clear and concise https://stackoverflow.com/a/7056782/857132","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a> - this answer is clear and concise <a href=\"https://stackoverflow.com/a/7056782/857132\">stackoverflow.com/a/7056782/857132</a>"},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695346283,"post_id":77154395,"comment_id":136015486,"body_markdown":"When you call scanner.nextInt() it retrieves the next number it finds. Calling scanner.nextLine() retrieves any remaining input until it encounters a new line character which happens when the person presses enter. Try this out by inputting &quot;1 Heart&quot;. That should end up working in the following code. The solution is skipping the line after getting the int.","body":"When you call scanner.nextInt() it retrieves the next number it finds. Calling scanner.nextLine() retrieves any remaining input until it encounters a new line character which happens when the person presses enter. Try this out by inputting &quot;1 Heart&quot;. That should end up working in the following code. The solution is skipping the line after getting the int."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695371305,"post_id":77154395,"comment_id":136018192,"body_markdown":"Nothing to do with [tag:switch-statement], [tag:contains], or [tag:if-statement] whatsoever.","body":"Nothing to do with <a href=\"https://stackoverflow.com/questions/tagged/switch-statement\">switch-statement</a>, <a href=\"https://stackoverflow.com/questions/tagged/contains\">contains</a>, or <a href=\"https://stackoverflow.com/questions/tagged/if-statement\">if-statement</a> whatsoever."}],"owner":{"account_id":29504770,"reputation":1,"user_id":22610986,"display_name":"satanicseraphs"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695345888,"answer_count":0,"score":0,"last_activity_date":1695371266,"creation_date":1695345361,"question_id":77154395,"body_markdown":"I have an assignment due for a class and I have to use contains() and toUpperCase(). I am not allowed to use loops or arrays. I know a loop would make this a whole lot easier, but I have to do it the long way. Also, I am using Eclipse for this class if that matters.\r\n\r\nI run the program for this case and it skips right over my `bookSearch = input.nextLine();` and just displays the first if statement but with no output after `System.out.println(&quot;You searched for: &quot; + bookSearch.toUpperCase());` and displays bookOne. My problem is that I need to be able to get input for bookSearch or have some way to compare it to the 3 string variables books using contains().\r\n\r\nI have tried adjusting how I present the string bookSearch and reorganizing where it is, I&#39;ve tried running it without the else-if statements as well and that also results in skipping over the user input and just ending the case. I am honestly not even sure if the else-if statements work yet because I cannot get input for bookSearch. \r\n\r\nI have only included the first case so ignore that there are 2 other options for the switch.\r\n\r\n```\r\npublic class DemoMathCharString {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.println(&quot;~~ Hello and welcome to your Local Library Portal. Please select from one of the following options. ~~&quot;);\r\n\t\t\tSystem.out.println(&quot;1.) Library Catalog\\n2.) Library Visitors Statistics\\n3.) Library Books Statistics&quot;);\r\n\t\t\r\n\t\tint option = input.nextInt(); //get user&#39;s menu selection\r\n\t\t\r\n\t\tswitch(option) { \r\n\t\tcase 1: \r\n\t\t\tString bookOne = &quot;The Telltale Heart&quot;;\r\n\t\t\tString bookTwo = &quot;Wuthering Heights&quot;;\r\n\t\t\tString bookThree = &quot;A Court of Thorns and Roses&quot;; \r\n\t\t\tString bookSearch;\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;Please enter your search for this library catalog. Please note that search is case sensitive.\\nThe books shown after your search are the books we have available for borrowing at this time.&quot;);\r\n\t\t\tbookSearch = input.nextLine();\r\n\t\t\tif (bookOne.contains(bookSearch)) {\r\n\t\t\t\tSystem.out.println(&quot;You searched for: &quot; + bookSearch.toUpperCase());\r\n\t\t\t\tSystem.out.println(&quot;We have the following book available to be borrowed: &quot; + bookOne);\r\n\t\t\t}\r\n\r\n```\r\n\r\n","title":"Switch case skipping input and going straight to first if statement","body":"<p>I have an assignment due for a class and I have to use contains() and toUpperCase(). I am not allowed to use loops or arrays. I know a loop would make this a whole lot easier, but I have to do it the long way. Also, I am using Eclipse for this class if that matters.</p>\n<p>I run the program for this case and it skips right over my <code>bookSearch = input.nextLine();</code> and just displays the first if statement but with no output after <code>System.out.println(&quot;You searched for: &quot; + bookSearch.toUpperCase());</code> and displays bookOne. My problem is that I need to be able to get input for bookSearch or have some way to compare it to the 3 string variables books using contains().</p>\n<p>I have tried adjusting how I present the string bookSearch and reorganizing where it is, I've tried running it without the else-if statements as well and that also results in skipping over the user input and just ending the case. I am honestly not even sure if the else-if statements work yet because I cannot get input for bookSearch.</p>\n<p>I have only included the first case so ignore that there are 2 other options for the switch.</p>\n<pre><code>public class DemoMathCharString {\n\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        \n        System.out.println(&quot;~~ Hello and welcome to your Local Library Portal. Please select from one of the following options. ~~&quot;);\n            System.out.println(&quot;1.) Library Catalog\\n2.) Library Visitors Statistics\\n3.) Library Books Statistics&quot;);\n        \n        int option = input.nextInt(); //get user's menu selection\n        \n        switch(option) { \n        case 1: \n            String bookOne = &quot;The Telltale Heart&quot;;\n            String bookTwo = &quot;Wuthering Heights&quot;;\n            String bookThree = &quot;A Court of Thorns and Roses&quot;; \n            String bookSearch;\n            \n            System.out.println(&quot;Please enter your search for this library catalog. Please note that search is case sensitive.\\nThe books shown after your search are the books we have available for borrowing at this time.&quot;);\n            bookSearch = input.nextLine();\n            if (bookOne.contains(bookSearch)) {\n                System.out.println(&quot;You searched for: &quot; + bookSearch.toUpperCase());\n                System.out.println(&quot;We have the following book available to be borrowed: &quot; + bookOne);\n            }\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jdbc"],"owner":{"account_id":20570786,"reputation":25,"user_id":15099175,"display_name":"Pasindu Prabhath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695371047,"creation_date":1695359488,"question_id":77155007,"body_markdown":"I have a project which is running in java 1.8 and spring 1.x, It runs finely without any errors. But I just want to handle the error happens when it loose the DB connection.\r\n\r\nI kill the process to test using sudo kill and then it give typical jdbc connection error.\r\n\r\n```\r\nCould not open JDBC Connection for transaction; nested exception is org.postgresql.util.PSQLException: FATAL: terminating connection due to administrator command\r\n\tat org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:242)\r\n```\r\n\r\nI want to handle this and want to reconnect the DB. I&#39;m new to spring. And also this finely work after I restart the application. It again create jdbc connection and work finely.\r\n\r\nAnd this is the properties file\r\n\r\n```\r\n\r\nspring.batch.job.enabled=false\r\n\r\n# HikariCP configuration\r\nspring.datasource.type=com.zaxxer.hikari.HikariDataSource\r\nspring.datasource.hikari.connection-test-query=SELECT 1\r\nspring.datasource.hikari.maximum-pool-size=20 \r\nspring.datasource.hikari.idle-timeout=30000 \r\n\r\nspring.datasource.hikari.minimumIdle=5\r\nspring.datasource.hikari.maximumPoolSize=20\r\nspring.datasource.hikari.idleTimeout=30000\r\nspring.datasource.hikari.poolName=SpringBootJPAHikariCP\r\nspring.datasource.hikari.maxLifetime=2000000\r\nspring.datasource.hikari.connectionTimeout=30000\r\n\r\n# Database connection details\r\nspring.datasource.url=jdbc:postgresql://127.0.0.1:5432/octopus_retaildemo\r\nspring.datasource.driver-class-name=org.postgresql.Driver\r\nspring.datasource.username=retaildemo\r\nspring.datasource.password=demo\r\n#spring.jpa.database=default\r\n\r\nautocount.datasource.url=jdbc:postgresql://127.0.0.1:5432/aed_foroctopustestdata\r\nautocount.datasource.username=pasinduprabhath\r\nautocount.datasource.password=demo\r\nautocount.datasource.default_schema=public\r\nautocount.datasource.driver-class-name=org.postgresql.Driver\r\nspring.jpa.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.hibernate.ddl-auto=none\r\nspring.jpa.show-sql=false\r\n\r\n\r\noctopus.directoryPath=/Users/pasinduprabhath/Documents/workspace-spring-tool-suite-4-4.19.1.RELEASE/Sentinal/reports\r\n\r\noctopus.testmode=0\r\noctopus.maxpoolsize=20\r\noctopus.terminal=HQ001\r\noctopus.location=HQ\r\noctopus.username=admin\r\n\r\noctopus.invjob.enabled=false\r\noctopus.invjob.attachzip=0\r\noctopus.invjob.time=1 * * * * *\r\n\r\noctopus.autocount.enabled=true\r\n\r\noctopus.autocount.salescsvread.enabled=false\r\noctopus.autocount.salescsvread.readtime=1 * * * * *\r\noctopus.autocount.salescsvread.salesfilename=POS Sales Transaction\r\noctopus.autocount.salescsvread.salesfilename.columns=dateTime,empty1,documentNo,itemCode,description,qty,unitPrice,gross,discount,subTotal,tax,totalEx,totalInc\r\n#octopus.autocount.salescsvread.paymentfilename=Sale Receipt by payment\r\noctopus.autocount.salescsvread.paymentfilename=Cash Receipt Report \r\noctopus.autocount.salescsvread.paymentfilename.columns=documentDate,documentNo,totalEx,tax,total,roundAdj,finalTotal,cashPayment,creditCardPayment,debitCardPayment,chequePayment,voucherPayment,pointPayment,creditPayment\r\noctopus.autocount.salescsvread.customerfilename=Customer Transaction\r\noctopus.autocount.salescsvread.customerfilename.columns=date,docNo,customerid,customerName,email\r\noctopus.autocount.salescsvread.hpenabled=false\r\n\r\npos.customer.point.job.enabled=false\r\npos.customer.point.job.time=1 * * * * *\r\nlogging.file=sentinal.log\r\nlogging.level.root=INFO\r\n\r\noctopus.autocount.readitemenabled=true\r\noctopus.autocount.readitemtable=1 * * * * *\r\n\r\noctopus.autocount.doreadenabled=false\r\noctopus.autocount.readdotable=1 * * * * *\r\n#octopus.autocount.readitemtable=0 0/1 * * * *\r\n\r\n# Reconnect properties\r\nspring.datasource.hikari.initialization-fail-fast=true\r\nspring.datasource.hikari.connection-init-sql=SELECT 1\r\n```\r\n\r\nI just tried with a class(ConnectionValidator class)\r\n\r\n```\r\npackage com.octopus.services.common.network;\r\nimport org.apache.commons.logging.Log;\r\nimport org.apache.commons.logging.LogFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\nimport org.springframework.scheduling.annotation.Scheduled;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport com.Application;\r\n\r\nimport javax.sql.DataSource;\r\nimport java.sql.Connection;\r\nimport java.sql.SQLException;\r\n\r\n@Component\r\npublic class ConnectionValidator {\r\n\r\n    private final DataSource dataSource;\r\n    private int maxReconnectAttempts = 3; // Maximum number of reconnection attempts\r\n    private int reconnectAttemptInterval = 3000; // Interval between reconnection attempts in milliseconds\r\n    \r\n    @Autowired\r\n    public ConnectionValidator(DataSource dataSource) {\r\n        this.dataSource = dataSource;\r\n    }\r\n\r\n    @Scheduled(fixedRate = 50000) // Run every minute\r\n    public void validateConnection() {\r\n        try (Connection connection = dataSource.getConnection()) {\r\n            // Perform a simple query to validate the connection\r\n            JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\r\n            jdbcTemplate.queryForObject(&quot;SELECT 1&quot;, Integer.class);\r\n        } catch (SQLException e) {\r\n            // Handle the exception (e.g., attempt to reconnect)\r\n            if (isConnectionClosedException(e)) {\r\n                reconnect();\r\n            } else {\r\n                // Handle other types of SQLExceptions as needed\r\n                log.error(&quot;Error occurred during connection validation:&quot;, e);\r\n            }\r\n        }\r\n    }\r\n    \r\n    private boolean isConnectionClosedException(SQLException e) {\r\n        return e.getMessage() != null &amp;&amp; e.getMessage().contains(&quot;This connection has been closed&quot;);\r\n    }\r\n\r\n    private void handleReconnectionFailure() {\r\n        System.err.println(&quot;Failed to reconnect after max attempts. Performing custom action...&quot;);\r\n    }\r\n    \r\n    private void reconnect() {\r\n        int reconnectAttempts = 0;\r\n        while (reconnectAttempts &lt; maxReconnectAttempts) {\r\n            try {\r\n                Thread.sleep(reconnectAttemptInterval);\r\n                Connection connection = dataSource.getConnection();\r\n                if (connection.isValid(5)) { // Check if the reconnected connection is valid\r\n                    return;\r\n                }\r\n            } catch (SQLException | InterruptedException ex) {\r\n                log.error(&quot;Reconnection attempt failed:&quot;, ex);\r\n            }\r\n            reconnectAttempts++;\r\n        }\r\n        handleReconnectionFailure();\r\n    }\r\n}\r\n```\r\n\r\nlike above and calling it in main. Here is the main,\r\n\r\n```\r\npackage com;\r\n\r\nimport java.io.IOException;\r\nimport com.octopus.pos.utils.DatabaseManager;\r\nimport com.octopus.services.common.network.ConnectionValidator;\r\n\r\nimport org.apache.commons.logging.Log;\r\nimport org.apache.commons.logging.LogFactory;\r\nimport org.springframework.batch.core.JobParametersInvalidException;\r\nimport org.springframework.batch.core.repository.JobExecutionAlreadyRunningException;\r\nimport org.springframework.batch.core.repository.JobInstanceAlreadyCompleteException;\r\nimport org.springframework.batch.core.repository.JobRestartException;\r\nimport org.springframework.beans.BeansException;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\nimport org.springframework.context.ConfigurableApplicationContext;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.PropertySource;\r\nimport org.springframework.scheduling.annotation.EnableScheduling;\r\n\r\n@ComponentScan\r\n@EnableAutoConfiguration\r\n@PropertySource(&quot;file:application.properties&quot;)\r\n@EnableScheduling\r\npublic class Application {\r\n\tprivate static Log log = LogFactory.getLog(Application.class);\r\n\tpublic static void main(String[] args)\r\n\t\t\tthrows BeansException, JobExecutionAlreadyRunningException, JobRestartException,\r\n\t\t\tJobInstanceAlreadyCompleteException, JobParametersInvalidException, InterruptedException, IOException {\r\n\r\n\t\tSpringApplication app = new SpringApplication(Application.class);\r\n\t\tapp.setWebEnvironment(false);\r\n\t\tConfigurableApplicationContext ctx = app.run(args);\r\n\t\t\r\n\t\t Application application = ctx.getBean(Application.class);\r\n\t\t ConnectionValidator connectionValidator = ctx.getBean(ConnectionValidator.class);\r\n\t\t log.info(&quot;PP calling validation&quot;);\r\n\t\t connectionValidator.validateConnection();\r\n\t}\t\r\n\r\n}\r\n```\r\n\r\nBut it still gives the same jdbc error. Can someone tell me what can I do to fix this? I just want to reconnect when DB connection killed.  \r\nI&#39;m using postgres DB. And tried both&#160;**Apache Commons DBCP**&#160;and the HikariCP.","title":"How to setup spring project reconnect automatically after losing the jdbc connection","body":"<p>I have a project which is running in java 1.8 and spring 1.x, It runs finely without any errors. But I just want to handle the error happens when it loose the DB connection.</p>\n<p>I kill the process to test using sudo kill and then it give typical jdbc connection error.</p>\n<pre><code>Could not open JDBC Connection for transaction; nested exception is org.postgresql.util.PSQLException: FATAL: terminating connection due to administrator command\n    at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:242)\n</code></pre>\n<p>I want to handle this and want to reconnect the DB. I'm new to spring. And also this finely work after I restart the application. It again create jdbc connection and work finely.</p>\n<p>And this is the properties file</p>\n<pre><code>\nspring.batch.job.enabled=false\n\n# HikariCP configuration\nspring.datasource.type=com.zaxxer.hikari.HikariDataSource\nspring.datasource.hikari.connection-test-query=SELECT 1\nspring.datasource.hikari.maximum-pool-size=20 \nspring.datasource.hikari.idle-timeout=30000 \n\nspring.datasource.hikari.minimumIdle=5\nspring.datasource.hikari.maximumPoolSize=20\nspring.datasource.hikari.idleTimeout=30000\nspring.datasource.hikari.poolName=SpringBootJPAHikariCP\nspring.datasource.hikari.maxLifetime=2000000\nspring.datasource.hikari.connectionTimeout=30000\n\n# Database connection details\nspring.datasource.url=jdbc:postgresql://127.0.0.1:5432/octopus_retaildemo\nspring.datasource.driver-class-name=org.postgresql.Driver\nspring.datasource.username=retaildemo\nspring.datasource.password=demo\n#spring.jpa.database=default\n\nautocount.datasource.url=jdbc:postgresql://127.0.0.1:5432/aed_foroctopustestdata\nautocount.datasource.username=pasinduprabhath\nautocount.datasource.password=demo\nautocount.datasource.default_schema=public\nautocount.datasource.driver-class-name=org.postgresql.Driver\nspring.jpa.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.hibernate.ddl-auto=none\nspring.jpa.show-sql=false\n\n\noctopus.directoryPath=/Users/pasinduprabhath/Documents/workspace-spring-tool-suite-4-4.19.1.RELEASE/Sentinal/reports\n\noctopus.testmode=0\noctopus.maxpoolsize=20\noctopus.terminal=HQ001\noctopus.location=HQ\noctopus.username=admin\n\noctopus.invjob.enabled=false\noctopus.invjob.attachzip=0\noctopus.invjob.time=1 * * * * *\n\noctopus.autocount.enabled=true\n\noctopus.autocount.salescsvread.enabled=false\noctopus.autocount.salescsvread.readtime=1 * * * * *\noctopus.autocount.salescsvread.salesfilename=POS Sales Transaction\noctopus.autocount.salescsvread.salesfilename.columns=dateTime,empty1,documentNo,itemCode,description,qty,unitPrice,gross,discount,subTotal,tax,totalEx,totalInc\n#octopus.autocount.salescsvread.paymentfilename=Sale Receipt by payment\noctopus.autocount.salescsvread.paymentfilename=Cash Receipt Report \noctopus.autocount.salescsvread.paymentfilename.columns=documentDate,documentNo,totalEx,tax,total,roundAdj,finalTotal,cashPayment,creditCardPayment,debitCardPayment,chequePayment,voucherPayment,pointPayment,creditPayment\noctopus.autocount.salescsvread.customerfilename=Customer Transaction\noctopus.autocount.salescsvread.customerfilename.columns=date,docNo,customerid,customerName,email\noctopus.autocount.salescsvread.hpenabled=false\n\npos.customer.point.job.enabled=false\npos.customer.point.job.time=1 * * * * *\nlogging.file=sentinal.log\nlogging.level.root=INFO\n\noctopus.autocount.readitemenabled=true\noctopus.autocount.readitemtable=1 * * * * *\n\noctopus.autocount.doreadenabled=false\noctopus.autocount.readdotable=1 * * * * *\n#octopus.autocount.readitemtable=0 0/1 * * * *\n\n# Reconnect properties\nspring.datasource.hikari.initialization-fail-fast=true\nspring.datasource.hikari.connection-init-sql=SELECT 1\n</code></pre>\n<p>I just tried with a class(ConnectionValidator class)</p>\n<pre><code>package com.octopus.services.common.network;\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.scheduling.annotation.Scheduled;\nimport org.springframework.stereotype.Component;\n\nimport com.Application;\n\nimport javax.sql.DataSource;\nimport java.sql.Connection;\nimport java.sql.SQLException;\n\n@Component\npublic class ConnectionValidator {\n\n    private final DataSource dataSource;\n    private int maxReconnectAttempts = 3; // Maximum number of reconnection attempts\n    private int reconnectAttemptInterval = 3000; // Interval between reconnection attempts in milliseconds\n    \n    @Autowired\n    public ConnectionValidator(DataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n    @Scheduled(fixedRate = 50000) // Run every minute\n    public void validateConnection() {\n        try (Connection connection = dataSource.getConnection()) {\n            // Perform a simple query to validate the connection\n            JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n            jdbcTemplate.queryForObject(&quot;SELECT 1&quot;, Integer.class);\n        } catch (SQLException e) {\n            // Handle the exception (e.g., attempt to reconnect)\n            if (isConnectionClosedException(e)) {\n                reconnect();\n            } else {\n                // Handle other types of SQLExceptions as needed\n                log.error(&quot;Error occurred during connection validation:&quot;, e);\n            }\n        }\n    }\n    \n    private boolean isConnectionClosedException(SQLException e) {\n        return e.getMessage() != null &amp;&amp; e.getMessage().contains(&quot;This connection has been closed&quot;);\n    }\n\n    private void handleReconnectionFailure() {\n        System.err.println(&quot;Failed to reconnect after max attempts. Performing custom action...&quot;);\n    }\n    \n    private void reconnect() {\n        int reconnectAttempts = 0;\n        while (reconnectAttempts &lt; maxReconnectAttempts) {\n            try {\n                Thread.sleep(reconnectAttemptInterval);\n                Connection connection = dataSource.getConnection();\n                if (connection.isValid(5)) { // Check if the reconnected connection is valid\n                    return;\n                }\n            } catch (SQLException | InterruptedException ex) {\n                log.error(&quot;Reconnection attempt failed:&quot;, ex);\n            }\n            reconnectAttempts++;\n        }\n        handleReconnectionFailure();\n    }\n}\n</code></pre>\n<p>like above and calling it in main. Here is the main,</p>\n<pre><code>package com;\n\nimport java.io.IOException;\nimport com.octopus.pos.utils.DatabaseManager;\nimport com.octopus.services.common.network.ConnectionValidator;\n\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.springframework.batch.core.JobParametersInvalidException;\nimport org.springframework.batch.core.repository.JobExecutionAlreadyRunningException;\nimport org.springframework.batch.core.repository.JobInstanceAlreadyCompleteException;\nimport org.springframework.batch.core.repository.JobRestartException;\nimport org.springframework.beans.BeansException;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.scheduling.annotation.EnableScheduling;\n\n@ComponentScan\n@EnableAutoConfiguration\n@PropertySource(&quot;file:application.properties&quot;)\n@EnableScheduling\npublic class Application {\n    private static Log log = LogFactory.getLog(Application.class);\n    public static void main(String[] args)\n            throws BeansException, JobExecutionAlreadyRunningException, JobRestartException,\n            JobInstanceAlreadyCompleteException, JobParametersInvalidException, InterruptedException, IOException {\n\n        SpringApplication app = new SpringApplication(Application.class);\n        app.setWebEnvironment(false);\n        ConfigurableApplicationContext ctx = app.run(args);\n        \n         Application application = ctx.getBean(Application.class);\n         ConnectionValidator connectionValidator = ctx.getBean(ConnectionValidator.class);\n         log.info(&quot;PP calling validation&quot;);\n         connectionValidator.validateConnection();\n    }   \n\n}\n</code></pre>\n<p>But it still gives the same jdbc error. Can someone tell me what can I do to fix this? I just want to reconnect when DB connection killed.<br />\nI'm using postgres DB. And tried both <strong>Apache Commons DBCP</strong> and the HikariCP.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","model-view-controller"],"answers":[{"comments":[{"owner":{"account_id":24561597,"reputation":21,"user_id":18469257,"display_name":"alpha"},"score":0,"creation_date":1695380353,"post_id":77154010,"comment_id":136020009,"body_markdown":"in which controller i use that?","body":"in which controller i use that?"}],"tags":[],"owner":{"account_id":7313335,"reputation":4794,"user_id":5571795,"display_name":"Hezy Ziv"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695335920,"creation_date":1695335920,"answer_id":77154010,"question_id":77153899,"body_markdown":"use getAttribute \r\n\r\n    @Controller\r\n    public class SampleController1 {\r\n    \r\n        @GetMapping(&quot;/endpoint1&quot;)\r\n        public String handleRequest1(Model model) {\r\n            // You can access the shared attribute directly\r\n            String attrValue = (String) model.getAttribute(&quot;sharedAttribute&quot;);\r\n            // Do something with the attribute\r\n            return &quot;view1&quot;;\r\n        }\r\n    }","title":"How to share model attribute through controllers","body":"<p>use getAttribute</p>\n<pre><code>@Controller\npublic class SampleController1 {\n\n    @GetMapping(&quot;/endpoint1&quot;)\n    public String handleRequest1(Model model) {\n        // You can access the shared attribute directly\n        String attrValue = (String) model.getAttribute(&quot;sharedAttribute&quot;);\n        // Do something with the attribute\n        return &quot;view1&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24561597,"reputation":21,"user_id":18469257,"display_name":"alpha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695370085,"creation_date":1695334060,"question_id":77153899,"body_markdown":"I have three controllers for ordering tacos, either through a menu or design custom ones.\r\n\r\nThis is the menu controller, we can order pre-made taco and then it redirects to current order where it shows the tacos in the order made.\r\n```\r\n@Slf4j\r\n@Controller\r\n@RequestMapping(&quot;/menu&quot;)\r\n@SessionAttributes(&quot;tacoOrder&quot;)\r\npublic class MenuController {\r\n    private final PreMadeTacoRepository preMadeTacoRepository;\r\n    private final PreMadeTacoToTacoService preMadeTacoToTacoService;\r\n\r\n    public MenuController(PreMadeTacoRepository preMadeTacoRepository, PreMadeTacoToTacoService preMadeTacoToTacoService){\r\n        this.preMadeTacoRepository=preMadeTacoRepository;\r\n        this.preMadeTacoToTacoService=preMadeTacoToTacoService;\r\n    }\r\n\r\n    @GetMapping\r\n    public String getMenu(){\r\n        return &quot;menu&quot;;\r\n    }\r\n\r\n    @PostMapping\r\n    public String orderMenu(@Valid PreMadeTacoList preMadeTacoList, Errors errors,@ModelAttribute TacoOrder tacoOrder){\r\n        if(errors.hasErrors()){\r\n            return &quot;menu&quot;;\r\n        }\r\n        List&lt;Taco&gt; tacos = preMadeTacoToTacoService.convert(preMadeTacoList);\r\n        tacos.forEach(tacoOrder::addTaco);\r\n        if(tacos.size()==1){\r\n            log.info(&quot;Processing taco: {}&quot; , tacos);\r\n        }\r\n        else {\r\n            log.info(&quot;Processing tacos: {}&quot;,tacos);\r\n        }\r\n        return &quot;redirect:/orders/current&quot;;\r\n    }\r\n\r\n    @ModelAttribute\r\n    public void addTacoToModel(Model model){\r\n        Iterable&lt;PreMadeTaco&gt; tempo= preMadeTacoRepository.findAll();\r\n        List&lt;PreMadeTaco&gt; preMadeTacos = new ArrayList&lt;&gt;();\r\n        tempo.forEach(preMadeTacos::add);\r\n        model.addAttribute(&quot;preMadeTacos&quot;,preMadeTacos);\r\n    }\r\n\r\n    @ModelAttribute\r\n    public TacoOrder tacoOrder(){\r\n        return new TacoOrder();\r\n    }\r\n\r\n    @ModelAttribute\r\n    public PreMadeTaco preMadeTaco(){\r\n        return new PreMadeTaco();\r\n    }\r\n\r\n    @ModelAttribute\r\n    public PreMadeTacoList preMadeTacoList(){\r\n        return new PreMadeTacoList();\r\n    }\r\n}\r\n```\r\n\r\nThis is custom design controller, we can customize our own taco and it redirects similarly to current orders and it shows tacos in order\r\n```\r\n@Slf4j\r\n@Controller\r\n@RequestMapping(&quot;/design&quot;)\r\n@SessionAttributes(&quot;tacoOrder&quot;)\r\npublic class DesignTacoController {\r\n    private IngredientRepository ingredientRepository;\r\n\r\n    @Autowired\r\n    public DesignTacoController(IngredientRepository ingredientRepository){\r\n        this.ingredientRepository=ingredientRepository;\r\n    }\r\n\r\n    @GetMapping\r\n    public String showDesignForm() {\r\n        return &quot;design&quot;;\r\n    }\r\n\r\n    @PostMapping\r\n    public String processTaco(@Valid Taco taco,Errors errors, @ModelAttribute(&quot;tacoOrder&quot;) TacoOrder tacoOrder) {\r\n        if(errors.hasErrors()){\r\n            return &quot;design&quot;;\r\n        }\r\n        tacoOrder.addTaco(taco);\r\n        log.info(&quot;Processing taco: {}&quot;, taco);\r\n        return &quot;redirect:/orders/current&quot;;\r\n    }\r\n\r\n    @ModelAttribute\r\n    public void addIngredientsToModel(Model model){\r\n        Iterable&lt;Ingredient&gt; tempo = ingredientRepository.findAll();\r\n        List&lt;Ingredient&gt; ingredients = new ArrayList&lt;&gt;();\r\n        tempo.forEach(ingredients::add);\r\n        Ingredient.Type[] types = Ingredient.Type.values();\r\n        for(Ingredient.Type type: types){\r\n            model.addAttribute(type.toString().toLowerCase(),filterByType(ingredients , type));\r\n        }\r\n    }\r\n\r\n    @ModelAttribute(name = &quot;tacoOrder&quot;)\r\n    public TacoOrder order() {\r\n        return new TacoOrder();\r\n    }\r\n\r\n    @ModelAttribute(name = &quot;taco&quot;)\r\n    public Taco taco() {\r\n        return new Taco();\r\n    }\r\n\r\n    private Iterable&lt;Ingredient&gt; filterByType(\r\n            List&lt;Ingredient&gt; ingredients, Ingredient.Type type) {\r\n        return ingredients\r\n                .stream()\r\n                .filter(x -&gt; x.getType().equals(type))\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\nThis is order class which shows current Order as it takes tacoOrder model attribute from session in either of them. The model with this class accepts one custom taco per request and a list of tacos from menu. (Ignore reviews they work fine)\r\n```\r\n@Slf4j\r\n@Controller\r\n@RequestMapping(&quot;/orders&quot;)\r\npublic class OrderController {\r\n    private final OrderRepository orderRepository;\r\n    private final ReviewRepository reviewRepository;\r\n\r\n    public OrderController(OrderRepository orderRepository, ReviewRepository reviewRepository){\r\n        this.orderRepository=orderRepository;\r\n        this.reviewRepository = reviewRepository;\r\n    }\r\n\r\n    @GetMapping\r\n    public String returnOrder(Model model){\r\n        return &quot;return&quot;;\r\n    }\r\n\r\n    @PostMapping\r\n    public String saveReview(@Valid Review review,Errors errors){\r\n        if(errors.hasErrors()){\r\n            return &quot;return&quot;;\r\n        }\r\n        reviewRepository.save(review);\r\n        log.info(&quot;Review saved:\\n By: &quot; + review.getUser().getFullName() + &quot;\\n Comment: &quot; + review.getComment()\r\n        + &quot;\\n Rating: &quot; + review.getRating());\r\n        return &quot;return&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/current&quot;)\r\n    public String orderForm(@ModelAttribute(&quot;tacoOrder&quot;) TacoOrder tacoOrder){\r\n        return &quot;orderForm&quot;;\r\n    }\r\n\r\n    @PostMapping\r\n    public String processOrder(@Valid TacoOrder order, Errors errors, SessionStatus sessionStatus,\r\n                               @AuthenticationPrincipal User user, RedirectAttributes redirectAttributes) {\r\n        if(errors.hasErrors()){\r\n            return &quot;orderForm&quot;;\r\n        }\r\n        order.setUser(user);\r\n        TacoOrder tacoOrder = orderRepository.save(order);\r\n        user.addTacoOrder(order);\r\n        log.info(&quot;Order submitted: {}&quot;, tacoOrder);\r\n        redirectAttributes.addFlashAttribute(&quot;order&quot;,order);\r\n        sessionStatus.setComplete();\r\n        return &quot;redirect:/orders&quot;;\r\n    }\r\n\r\n    @ModelAttribute\r\n    public Review reviews(){\r\n        return new Review();\r\n    }\r\n\r\n    @ModelAttribute\r\n    public void addReviewsToModel(Model model){\r\n        Iterable&lt;Review&gt; tempo = reviewRepository.findAll();\r\n        List&lt;Review&gt; reviews = new ArrayList&lt;&gt;();\r\n        tempo.forEach(reviews::add);\r\n        model.addAttribute(&quot;reviews&quot;,reviews);\r\n    }\r\n}\r\n```\r\nIt all works fine if I just order from menu or design a custom one. However, I want to be able to add both custom and from menu in one Order.\r\n\r\nHow will SessionAttribute work as both names are same in design and menu? (Spring will make two instances of tacoOrder and I will have two orders as far as I can tell.) I thought of using a super class annotated with @SessionAttribute and it makes one instance of that model attribute and then remove that from menu and design. Please let me know how to fix this issue.","title":"How to share model attribute through controllers","body":"<p>I have three controllers for ordering tacos, either through a menu or design custom ones.</p>\n<p>This is the menu controller, we can order pre-made taco and then it redirects to current order where it shows the tacos in the order made.</p>\n<pre><code>@Slf4j\n@Controller\n@RequestMapping(&quot;/menu&quot;)\n@SessionAttributes(&quot;tacoOrder&quot;)\npublic class MenuController {\n    private final PreMadeTacoRepository preMadeTacoRepository;\n    private final PreMadeTacoToTacoService preMadeTacoToTacoService;\n\n    public MenuController(PreMadeTacoRepository preMadeTacoRepository, PreMadeTacoToTacoService preMadeTacoToTacoService){\n        this.preMadeTacoRepository=preMadeTacoRepository;\n        this.preMadeTacoToTacoService=preMadeTacoToTacoService;\n    }\n\n    @GetMapping\n    public String getMenu(){\n        return &quot;menu&quot;;\n    }\n\n    @PostMapping\n    public String orderMenu(@Valid PreMadeTacoList preMadeTacoList, Errors errors,@ModelAttribute TacoOrder tacoOrder){\n        if(errors.hasErrors()){\n            return &quot;menu&quot;;\n        }\n        List&lt;Taco&gt; tacos = preMadeTacoToTacoService.convert(preMadeTacoList);\n        tacos.forEach(tacoOrder::addTaco);\n        if(tacos.size()==1){\n            log.info(&quot;Processing taco: {}&quot; , tacos);\n        }\n        else {\n            log.info(&quot;Processing tacos: {}&quot;,tacos);\n        }\n        return &quot;redirect:/orders/current&quot;;\n    }\n\n    @ModelAttribute\n    public void addTacoToModel(Model model){\n        Iterable&lt;PreMadeTaco&gt; tempo= preMadeTacoRepository.findAll();\n        List&lt;PreMadeTaco&gt; preMadeTacos = new ArrayList&lt;&gt;();\n        tempo.forEach(preMadeTacos::add);\n        model.addAttribute(&quot;preMadeTacos&quot;,preMadeTacos);\n    }\n\n    @ModelAttribute\n    public TacoOrder tacoOrder(){\n        return new TacoOrder();\n    }\n\n    @ModelAttribute\n    public PreMadeTaco preMadeTaco(){\n        return new PreMadeTaco();\n    }\n\n    @ModelAttribute\n    public PreMadeTacoList preMadeTacoList(){\n        return new PreMadeTacoList();\n    }\n}\n</code></pre>\n<p>This is custom design controller, we can customize our own taco and it redirects similarly to current orders and it shows tacos in order</p>\n<pre><code>@Slf4j\n@Controller\n@RequestMapping(&quot;/design&quot;)\n@SessionAttributes(&quot;tacoOrder&quot;)\npublic class DesignTacoController {\n    private IngredientRepository ingredientRepository;\n\n    @Autowired\n    public DesignTacoController(IngredientRepository ingredientRepository){\n        this.ingredientRepository=ingredientRepository;\n    }\n\n    @GetMapping\n    public String showDesignForm() {\n        return &quot;design&quot;;\n    }\n\n    @PostMapping\n    public String processTaco(@Valid Taco taco,Errors errors, @ModelAttribute(&quot;tacoOrder&quot;) TacoOrder tacoOrder) {\n        if(errors.hasErrors()){\n            return &quot;design&quot;;\n        }\n        tacoOrder.addTaco(taco);\n        log.info(&quot;Processing taco: {}&quot;, taco);\n        return &quot;redirect:/orders/current&quot;;\n    }\n\n    @ModelAttribute\n    public void addIngredientsToModel(Model model){\n        Iterable&lt;Ingredient&gt; tempo = ingredientRepository.findAll();\n        List&lt;Ingredient&gt; ingredients = new ArrayList&lt;&gt;();\n        tempo.forEach(ingredients::add);\n        Ingredient.Type[] types = Ingredient.Type.values();\n        for(Ingredient.Type type: types){\n            model.addAttribute(type.toString().toLowerCase(),filterByType(ingredients , type));\n        }\n    }\n\n    @ModelAttribute(name = &quot;tacoOrder&quot;)\n    public TacoOrder order() {\n        return new TacoOrder();\n    }\n\n    @ModelAttribute(name = &quot;taco&quot;)\n    public Taco taco() {\n        return new Taco();\n    }\n\n    private Iterable&lt;Ingredient&gt; filterByType(\n            List&lt;Ingredient&gt; ingredients, Ingredient.Type type) {\n        return ingredients\n                .stream()\n                .filter(x -&gt; x.getType().equals(type))\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>This is order class which shows current Order as it takes tacoOrder model attribute from session in either of them. The model with this class accepts one custom taco per request and a list of tacos from menu. (Ignore reviews they work fine)</p>\n<pre><code>@Slf4j\n@Controller\n@RequestMapping(&quot;/orders&quot;)\npublic class OrderController {\n    private final OrderRepository orderRepository;\n    private final ReviewRepository reviewRepository;\n\n    public OrderController(OrderRepository orderRepository, ReviewRepository reviewRepository){\n        this.orderRepository=orderRepository;\n        this.reviewRepository = reviewRepository;\n    }\n\n    @GetMapping\n    public String returnOrder(Model model){\n        return &quot;return&quot;;\n    }\n\n    @PostMapping\n    public String saveReview(@Valid Review review,Errors errors){\n        if(errors.hasErrors()){\n            return &quot;return&quot;;\n        }\n        reviewRepository.save(review);\n        log.info(&quot;Review saved:\\n By: &quot; + review.getUser().getFullName() + &quot;\\n Comment: &quot; + review.getComment()\n        + &quot;\\n Rating: &quot; + review.getRating());\n        return &quot;return&quot;;\n    }\n\n    @GetMapping(&quot;/current&quot;)\n    public String orderForm(@ModelAttribute(&quot;tacoOrder&quot;) TacoOrder tacoOrder){\n        return &quot;orderForm&quot;;\n    }\n\n    @PostMapping\n    public String processOrder(@Valid TacoOrder order, Errors errors, SessionStatus sessionStatus,\n                               @AuthenticationPrincipal User user, RedirectAttributes redirectAttributes) {\n        if(errors.hasErrors()){\n            return &quot;orderForm&quot;;\n        }\n        order.setUser(user);\n        TacoOrder tacoOrder = orderRepository.save(order);\n        user.addTacoOrder(order);\n        log.info(&quot;Order submitted: {}&quot;, tacoOrder);\n        redirectAttributes.addFlashAttribute(&quot;order&quot;,order);\n        sessionStatus.setComplete();\n        return &quot;redirect:/orders&quot;;\n    }\n\n    @ModelAttribute\n    public Review reviews(){\n        return new Review();\n    }\n\n    @ModelAttribute\n    public void addReviewsToModel(Model model){\n        Iterable&lt;Review&gt; tempo = reviewRepository.findAll();\n        List&lt;Review&gt; reviews = new ArrayList&lt;&gt;();\n        tempo.forEach(reviews::add);\n        model.addAttribute(&quot;reviews&quot;,reviews);\n    }\n}\n</code></pre>\n<p>It all works fine if I just order from menu or design a custom one. However, I want to be able to add both custom and from menu in one Order.</p>\n<p>How will SessionAttribute work as both names are same in design and menu? (Spring will make two instances of tacoOrder and I will have two orders as far as I can tell.) I thought of using a super class annotated with @SessionAttribute and it makes one instance of that model attribute and then remove that from menu and design. Please let me know how to fix this issue.</p>\n"},{"tags":["java","spring-boot","maven","cucumber"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1695327257,"post_id":77148272,"comment_id":136013407,"body_markdown":"What is the full stacktrace?","body":"What is the full stacktrace?"},{"owner":{"account_id":10633773,"reputation":123,"user_id":7831061,"display_name":"Aditya Abinash"},"score":0,"creation_date":1695369719,"post_id":77148272,"comment_id":136017945,"body_markdown":"I have added the full stacktrace to the post.","body":"I have added the full stacktrace to the post."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":1,"creation_date":1695372295,"post_id":77148272,"comment_id":136018378,"body_markdown":"Looks like you&#39;re not correctly assembling your executable jar file. You need to merge the files from `META-INF/services`. See https://stackoverflow.com/questions/47310215/merging-meta-inf-services-files-with-maven-assembly-plugin","body":"Looks like you&#39;re not correctly assembling your executable jar file. You need to merge the files from <code>META-INF&#47;services</code>. See <a href=\"https://stackoverflow.com/questions/47310215/merging-meta-inf-services-files-with-maven-assembly-plugin\" title=\"merging meta inf services files with maven assembly plugin\">stackoverflow.com/questions/47310215/&hellip;</a>"},{"owner":{"account_id":10633773,"reputation":123,"user_id":7831061,"display_name":"Aditya Abinash"},"score":0,"creation_date":1695497487,"post_id":77148272,"comment_id":136033407,"body_markdown":"Thanks, @M.P.Korstanje for looking into this, but this still doesn&#39;t work for me.","body":"Thanks, @M.P.Korstanje for looking into this, but this still doesn&#39;t work for me."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1695505673,"post_id":77148272,"comment_id":136034121,"body_markdown":"Did you verify that the contents of `META-INF/services` is correct?","body":"Did you verify that the contents of <code>META-INF&#47;services</code> is correct?"},{"owner":{"account_id":10633773,"reputation":123,"user_id":7831061,"display_name":"Aditya Abinash"},"score":0,"creation_date":1696191626,"post_id":77148272,"comment_id":136118756,"body_markdown":"Yes, I see a lot of new classes being added in spring.factories, and I also see\n\n&quot;&quot;&quot;# PropertySource Loaders\norg.springframework.boot.env.PropertySourceLoader=\\\norg.springframework.boot.env.PropertiesPropertySourceLoader,\\\norg.springframework.boot.env.YamlPropertySourceLoader&quot;&quot;&quot;\n\nBut it still doesn&#39;t work.","body":"Yes, I see a lot of new classes being added in spring.factories, and I also see  &quot;&quot;&quot;# PropertySource Loaders org.springframework.boot.env.PropertySourceLoader=\\ org.springframework.boot.env.PropertiesPropertySourceLoader,&zwnj;&#8203;\\ org.springframework.boot.env.YamlPropertySourceLoader&quot;&quot;&quot;  But it still doesn&#39;t work."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1696204448,"post_id":77148272,"comment_id":136119826,"body_markdown":"Seeing lots of classes being added does not mean that what is being added is correct. These files must be merged - not overwritten.","body":"Seeing lots of classes being added does not mean that what is being added is correct. These files must be merged - not overwritten."},{"owner":{"account_id":10633773,"reputation":123,"user_id":7831061,"display_name":"Aditya Abinash"},"score":0,"creation_date":1696271445,"post_id":77148272,"comment_id":136129052,"body_markdown":"I&#39;m not sure what I should be looking for. Could you please provide me with some links to documentation related to this stuff?\nI&#39;ve never worked on this part of Spring.","body":"I&#39;m not sure what I should be looking for. Could you please provide me with some links to documentation related to this stuff? I&#39;ve never worked on this part of Spring."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1696280208,"post_id":77148272,"comment_id":136130529,"body_markdown":"You are merging multiple jar files into one. Some files in the jars may have identical names but different content. This content should be merged. You should be looking for a effect called clobbering.  https://en.m.wikipedia.org/wiki/Clobbering","body":"You are merging multiple jar files into one. Some files in the jars may have identical names but different content. This content should be merged. You should be looking for a effect called clobbering.  <a href=\"https://en.m.wikipedia.org/wiki/Clobbering\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Clobbering</a>"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1696280287,"post_id":77148272,"comment_id":136130545,"body_markdown":"If you are not familiar with how Jar files are structured then consider using the Spring Boot Maven plugin to create a jar file for you. https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins.maven This will package the jar in a way that is supported and understood by Spring. It has it&#39;s limitations, Cucumber only understands it partially. But if you have only a single module, it should be fine.","body":"If you are not familiar with how Jar files are structured then consider using the Spring Boot Maven plugin to create a jar file for you. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins.maven\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a> This will package the jar in a way that is supported and understood by Spring. It has it&#39;s limitations, Cucumber only understands it partially. But if you have only a single module, it should be fine."},{"owner":{"account_id":10633773,"reputation":123,"user_id":7831061,"display_name":"Aditya Abinash"},"score":0,"creation_date":1696348797,"post_id":77148272,"comment_id":136140002,"body_markdown":"Thanks @M.P.Korstanje, I&#39;ll have a look.","body":"Thanks @M.P.Korstanje, I&#39;ll have a look."}],"owner":{"account_id":10633773,"reputation":123,"user_id":7831061,"display_name":"Aditya Abinash"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695369702,"creation_date":1695283277,"question_id":77148272,"body_markdown":"I have a requirement to run the Software Qualification Tests of my project as an **executable JAR**. I&#39;m using *Cucumber* along with *SpringBootTests* for the tests and used *maven-assembly-plugin* to create the executable JAR.\r\nI have created a sample project ([link][1] to GitHub) where I have implemented what I want to do. \r\n\r\nIn the project, I am able to:\r\n\r\n 1. Execute ```CucumberMainTest```, which is simple runner that can be executed from an IDE\r\n```\r\nimport io.cucumber.junit.Cucumber;\r\nimport io.cucumber.junit.CucumberOptions;\r\nimport org.junit.runner.RunWith;\r\n\r\n@RunWith(Cucumber.class)\r\n@CucumberOptions(\r\n    features = &quot;src/test/resources/features&quot;,\r\n    glue = &quot;example/cucumberspringexecutabletests/steps&quot;)\r\npublic class CucumberMainTest {\r\n}\r\n```\r\n\r\n2. Execute ```MainTest``` from the IDE, which is the *main* class\r\n```\r\nimport io.cucumber.core.cli.Main;\r\n\r\npublic class MainTest {\r\n\r\n    public static void main(String[] args) {\r\n        String[] defaultArgs = {\r\n            &quot;--glue&quot;, &quot;example/cucumberspringexecutabletests/steps&quot;,\r\n            &quot;classpath:features&quot;,\r\n            &quot;--plugin&quot;, &quot;pretty&quot;\r\n        };\r\n\r\n        Main.main(defaultArgs);\r\n    }\r\n}\r\n```\r\n\r\nBut, I&#39;m not able to achieve my main goal of executing the *main* class from an executable JAR. When I try to execute the JAR, after packaging, I get an error.\r\n\r\nCommand used:\r\n```\r\njava -jar .\\target\\cucumber-spring-executable-tests-3.1.3-test-jar-with-dependencies.jar\r\n```\r\nError:\r\n```\r\nScenario: As a developer, I want to run an executable test jar # features/spring.feature:3\r\n  Given the test jar is built                                  # example.cucumberspringexecutabletests.steps.MyStepDefs.MyStepDefs()                              \r\n      io.cucumber.core.exception.CucumberException: class example.cucumberspringexecutabletests.steps.MyStepDefs does not have a public zero-argument constructor.\r\n                                                                                                                                                                  \r\nTo use dependency injection add an other ObjectFactory implementation such as:                                                                                    \r\n * cucumber-picocontainer                                                                                                                                         \r\n * cucumber-spring                                                                                                                                                \r\n * cucumber-jakarta-cdi                                                                                                                                           \r\n * ...etc                                                                                                                                                         \r\n\r\n        at io.cucumber.core.backend.DefaultObjectFactory.cacheNewInstance(DefaultObjectFactory.java:57)\r\n        at io.cucumber.core.backend.DefaultObjectFactory.getInstance(DefaultObjectFactory.java:45)\r\n        at io.cucumber.java.AbstractGlueDefinition.invokeMethod(AbstractGlueDefinition.java:47)\r\n        at io.cucumber.java.JavaStepDefinition.execute(JavaStepDefinition.java:29)\r\n        at io.cucumber.core.runner.CoreStepDefinition.execute(CoreStepDefinition.java:66)\r\n        at io.cucumber.core.runner.PickleStepDefinitionMatch.runStep(PickleStepDefinitionMatch.java:63)\r\n        at io.cucumber.core.runner.ExecutionMode$1.execute(ExecutionMode.java:10)\r\n        at io.cucumber.core.runner.TestStep.executeStep(TestStep.java:84)\r\n        at io.cucumber.core.runner.TestStep.run(TestStep.java:56)\r\n        at io.cucumber.core.runner.PickleStepTestStep.run(PickleStepTestStep.java:51)\r\n        at io.cucumber.core.runner.TestCase.run(TestCase.java:84)\r\n        at io.cucumber.core.runner.Runner.runPickle(Runner.java:75)\r\n        at io.cucumber.core.runtime.Runtime.lambda$executePickle$6(Runtime.java:107)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runTestCase$5(CucumberExecutionContext.java:137)\r\n        at io.cucumber.core.runtime.RethrowingThrowableCollector.executeAndThrow(RethrowingThrowableCollector.java:23)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.runTestCase(CucumberExecutionContext.java:137)\r\n        at io.cucumber.core.runtime.Runtime.lambda$executePickle$7(Runtime.java:107)\r\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at io.cucumber.core.runtime.Runtime$SameThreadExecutorService.execute(Runtime.java:235)\r\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\r\n        at io.cucumber.core.runtime.Runtime.lambda$runFeatures$3(Runtime.java:89)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.stream.SliceOps$1$1.accept(SliceOps.java:200)\r\n        at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)\r\n        at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)\r\n        at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\r\n        at io.cucumber.core.runtime.Runtime.runFeatures(Runtime.java:90)\r\n        at io.cucumber.core.runtime.Runtime.lambda$run$0(Runtime.java:78)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runFeatures$6(CucumberExecutionContext.java:148)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.execute(CucumberExecutionContext.java:163)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.runFeatures(CucumberExecutionContext.java:146)\r\n        at io.cucumber.core.runtime.Runtime.run(Runtime.java:78)\r\n        at io.cucumber.core.cli.Main.run(Main.java:87)\r\n        at io.cucumber.core.cli.Main.main(Main.java:30)\r\n        at example.cucumberspringexecutabletests.MainTest.main(MainTest.java:14)\r\nCaused by: java.lang.NoSuchMethodException: example.cucumberspringexecutabletests.steps.MyStepDefs.&lt;init&gt;()\r\n        at java.base/java.lang.Class.getConstructor0(Class.java:3585)\r\n        at java.base/java.lang.Class.getConstructor(Class.java:2271)\r\n        at io.cucumber.core.backend.DefaultObjectFactory.cacheNewInstance(DefaultObjectFactory.java:52)\r\n        ... 40 more\r\n\r\n  When the test jar is executed                                # example.cucumberspringexecutabletests.steps.MyStepDefs.when()\r\n  Then the test jar prints &quot;Hello World&quot;                       # example.cucumberspringexecutabletests.steps.MyStepDefs.then()\r\n\r\nFailed scenarios:\r\nclasspath:features/spring.feature:3 # As a developer, I want to run an executable test jar\r\n\r\n1 Scenarios (1 failed)\r\n3 Steps (1 failed, 2 skipped)\r\n0m0.183s\r\n\r\n\r\nio.cucumber.core.exception.CucumberException: class example.cucumberspringexecutabletests.steps.MyStepDefs does not have a public zero-argument constructor.\r\n\r\nTo use dependency injection add an other ObjectFactory implementation such as:\r\n * cucumber-picocontainer\r\n * cucumber-spring\r\n * cucumber-jakarta-cdi\r\n * ...etc\r\n        at io.cucumber.core.runtime.Runtime.lambda$run$0(Runtime.java:78)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runFeatures$6(CucumberExecutionContext.java:148)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.execute(CucumberExecutionContext.java:163)\r\n        at io.cucumber.core.runtime.CucumberExecutionContext.runFeatures(CucumberExecutionContext.java:146)\r\n        at io.cucumber.core.runtime.Runtime.run(Runtime.java:78)\r\n        at io.cucumber.core.cli.Main.run(Main.java:87)\r\n        at io.cucumber.core.cli.Main.main(Main.java:30)\r\n        at example.cucumberspringexecutabletests.MainTest.main(MainTest.java:14)\r\nCaused by: java.lang.NoSuchMethodException: example.cucumberspringexecutabletests.steps.MyStepDefs.&lt;init&gt;()\r\n        at java.base/java.lang.Class.getConstructor0(Class.java:3585)\r\n        at java.base/java.lang.Class.getConstructor(Class.java:2271)\r\n        at io.cucumber.core.backend.DefaultObjectFactory.cacheNewInstance(DefaultObjectFactory.java:52)\r\n        ... 40 more\r\n```\r\n\r\nIt seems like the Spring context is not getting initialized/invoked. I looked into the following links to reach this point but looks like some configuration is still missing:\r\n\r\n - [Running Cucumber from command line][2]\r\n\r\n - [Running spring tests from executable jar][3]\r\n\r\n\r\nRight now the only way it works using the executable JAR is to remove any Autowiring.\r\n\r\n\r\n\r\n  [1]: https://github.com/AdityaAbinash-TomTom/cucumber-spring-executable-tests\r\n  [2]: https://cucumber.io/docs/cucumber/api/?lang=java#running-cucumber\r\n  [3]: https://stackoverflow.com/questions/52188683/running-spring-tests-from-executable-jar","title":"Running Cucumber + SpringBootTest in an executable test JAR","body":"<p>I have a requirement to run the Software Qualification Tests of my project as an <strong>executable JAR</strong>. I'm using <em>Cucumber</em> along with <em>SpringBootTests</em> for the tests and used <em>maven-assembly-plugin</em> to create the executable JAR.\nI have created a sample project (<a href=\"https://github.com/AdityaAbinash-TomTom/cucumber-spring-executable-tests\" rel=\"nofollow noreferrer\">link</a> to GitHub) where I have implemented what I want to do.</p>\n<p>In the project, I am able to:</p>\n<ol>\n<li>Execute <code>CucumberMainTest</code>, which is simple runner that can be executed from an IDE</li>\n</ol>\n<pre><code>import io.cucumber.junit.Cucumber;\nimport io.cucumber.junit.CucumberOptions;\nimport org.junit.runner.RunWith;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(\n    features = &quot;src/test/resources/features&quot;,\n    glue = &quot;example/cucumberspringexecutabletests/steps&quot;)\npublic class CucumberMainTest {\n}\n</code></pre>\n<ol start=\"2\">\n<li>Execute <code>MainTest</code> from the IDE, which is the <em>main</em> class</li>\n</ol>\n<pre><code>import io.cucumber.core.cli.Main;\n\npublic class MainTest {\n\n    public static void main(String[] args) {\n        String[] defaultArgs = {\n            &quot;--glue&quot;, &quot;example/cucumberspringexecutabletests/steps&quot;,\n            &quot;classpath:features&quot;,\n            &quot;--plugin&quot;, &quot;pretty&quot;\n        };\n\n        Main.main(defaultArgs);\n    }\n}\n</code></pre>\n<p>But, I'm not able to achieve my main goal of executing the <em>main</em> class from an executable JAR. When I try to execute the JAR, after packaging, I get an error.</p>\n<p>Command used:</p>\n<pre><code>java -jar .\\target\\cucumber-spring-executable-tests-3.1.3-test-jar-with-dependencies.jar\n</code></pre>\n<p>Error:</p>\n<pre><code>Scenario: As a developer, I want to run an executable test jar # features/spring.feature:3\n  Given the test jar is built                                  # example.cucumberspringexecutabletests.steps.MyStepDefs.MyStepDefs()                              \n      io.cucumber.core.exception.CucumberException: class example.cucumberspringexecutabletests.steps.MyStepDefs does not have a public zero-argument constructor.\n                                                                                                                                                                  \nTo use dependency injection add an other ObjectFactory implementation such as:                                                                                    \n * cucumber-picocontainer                                                                                                                                         \n * cucumber-spring                                                                                                                                                \n * cucumber-jakarta-cdi                                                                                                                                           \n * ...etc                                                                                                                                                         \n\n        at io.cucumber.core.backend.DefaultObjectFactory.cacheNewInstance(DefaultObjectFactory.java:57)\n        at io.cucumber.core.backend.DefaultObjectFactory.getInstance(DefaultObjectFactory.java:45)\n        at io.cucumber.java.AbstractGlueDefinition.invokeMethod(AbstractGlueDefinition.java:47)\n        at io.cucumber.java.JavaStepDefinition.execute(JavaStepDefinition.java:29)\n        at io.cucumber.core.runner.CoreStepDefinition.execute(CoreStepDefinition.java:66)\n        at io.cucumber.core.runner.PickleStepDefinitionMatch.runStep(PickleStepDefinitionMatch.java:63)\n        at io.cucumber.core.runner.ExecutionMode$1.execute(ExecutionMode.java:10)\n        at io.cucumber.core.runner.TestStep.executeStep(TestStep.java:84)\n        at io.cucumber.core.runner.TestStep.run(TestStep.java:56)\n        at io.cucumber.core.runner.PickleStepTestStep.run(PickleStepTestStep.java:51)\n        at io.cucumber.core.runner.TestCase.run(TestCase.java:84)\n        at io.cucumber.core.runner.Runner.runPickle(Runner.java:75)\n        at io.cucumber.core.runtime.Runtime.lambda$executePickle$6(Runtime.java:107)\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runTestCase$5(CucumberExecutionContext.java:137)\n        at io.cucumber.core.runtime.RethrowingThrowableCollector.executeAndThrow(RethrowingThrowableCollector.java:23)\n        at io.cucumber.core.runtime.CucumberExecutionContext.runTestCase(CucumberExecutionContext.java:137)\n        at io.cucumber.core.runtime.Runtime.lambda$executePickle$7(Runtime.java:107)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at io.cucumber.core.runtime.Runtime$SameThreadExecutorService.execute(Runtime.java:235)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\n        at io.cucumber.core.runtime.Runtime.lambda$runFeatures$3(Runtime.java:89)\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n        at java.base/java.util.stream.SliceOps$1$1.accept(SliceOps.java:200)\n        at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)\n        at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)\n        at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\n        at io.cucumber.core.runtime.Runtime.runFeatures(Runtime.java:90)\n        at io.cucumber.core.runtime.Runtime.lambda$run$0(Runtime.java:78)\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runFeatures$6(CucumberExecutionContext.java:148)\n        at io.cucumber.core.runtime.CucumberExecutionContext.execute(CucumberExecutionContext.java:163)\n        at io.cucumber.core.runtime.CucumberExecutionContext.runFeatures(CucumberExecutionContext.java:146)\n        at io.cucumber.core.runtime.Runtime.run(Runtime.java:78)\n        at io.cucumber.core.cli.Main.run(Main.java:87)\n        at io.cucumber.core.cli.Main.main(Main.java:30)\n        at example.cucumberspringexecutabletests.MainTest.main(MainTest.java:14)\nCaused by: java.lang.NoSuchMethodException: example.cucumberspringexecutabletests.steps.MyStepDefs.&lt;init&gt;()\n        at java.base/java.lang.Class.getConstructor0(Class.java:3585)\n        at java.base/java.lang.Class.getConstructor(Class.java:2271)\n        at io.cucumber.core.backend.DefaultObjectFactory.cacheNewInstance(DefaultObjectFactory.java:52)\n        ... 40 more\n\n  When the test jar is executed                                # example.cucumberspringexecutabletests.steps.MyStepDefs.when()\n  Then the test jar prints &quot;Hello World&quot;                       # example.cucumberspringexecutabletests.steps.MyStepDefs.then()\n\nFailed scenarios:\nclasspath:features/spring.feature:3 # As a developer, I want to run an executable test jar\n\n1 Scenarios (1 failed)\n3 Steps (1 failed, 2 skipped)\n0m0.183s\n\n\nio.cucumber.core.exception.CucumberException: class example.cucumberspringexecutabletests.steps.MyStepDefs does not have a public zero-argument constructor.\n\nTo use dependency injection add an other ObjectFactory implementation such as:\n * cucumber-picocontainer\n * cucumber-spring\n * cucumber-jakarta-cdi\n * ...etc\n        at io.cucumber.core.runtime.Runtime.lambda$run$0(Runtime.java:78)\n        at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runFeatures$6(CucumberExecutionContext.java:148)\n        at io.cucumber.core.runtime.CucumberExecutionContext.execute(CucumberExecutionContext.java:163)\n        at io.cucumber.core.runtime.CucumberExecutionContext.runFeatures(CucumberExecutionContext.java:146)\n        at io.cucumber.core.runtime.Runtime.run(Runtime.java:78)\n        at io.cucumber.core.cli.Main.run(Main.java:87)\n        at io.cucumber.core.cli.Main.main(Main.java:30)\n        at example.cucumberspringexecutabletests.MainTest.main(MainTest.java:14)\nCaused by: java.lang.NoSuchMethodException: example.cucumberspringexecutabletests.steps.MyStepDefs.&lt;init&gt;()\n        at java.base/java.lang.Class.getConstructor0(Class.java:3585)\n        at java.base/java.lang.Class.getConstructor(Class.java:2271)\n        at io.cucumber.core.backend.DefaultObjectFactory.cacheNewInstance(DefaultObjectFactory.java:52)\n        ... 40 more\n</code></pre>\n<p>It seems like the Spring context is not getting initialized/invoked. I looked into the following links to reach this point but looks like some configuration is still missing:</p>\n<ul>\n<li><p><a href=\"https://cucumber.io/docs/cucumber/api/?lang=java#running-cucumber\" rel=\"nofollow noreferrer\">Running Cucumber from command line</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/52188683/running-spring-tests-from-executable-jar\">Running spring tests from executable jar</a></p>\n</li>\n</ul>\n<p>Right now the only way it works using the executable JAR is to remove any Autowiring.</p>\n"},{"tags":["java","android","android-activity","android-button","back"],"comments":[{"owner":{"account_id":6017569,"reputation":3366,"user_id":8007341,"display_name":"Kishan Maurya"},"score":0,"creation_date":1695365748,"post_id":77155314,"comment_id":136017206,"body_markdown":"Back arrow, its device back button or your custom arrow button? Can you share code for back click on Activity B?","body":"Back arrow, its device back button or your custom arrow button? Can you share code for back click on Activity B?"},{"owner":{"account_id":4851581,"reputation":2569,"user_id":3913732,"accept_rate":53,"display_name":"Sudheesh Mohan"},"score":0,"creation_date":1695365806,"post_id":77155314,"comment_id":136017215,"body_markdown":"Post the code for moving from Activity A to B. You might be starting Activity B 2 times.","body":"Post the code for moving from Activity A to B. You might be starting Activity B 2 times."},{"owner":{"account_id":20866182,"reputation":114,"user_id":15327167,"display_name":"Saif Khan"},"score":0,"creation_date":1695366040,"post_id":77155314,"comment_id":136017247,"body_markdown":"Use the finish() method to finish the current activity when you want to navigate back to the previous activity. This will remove the current activity from the back button stack and ensure that the back button will navigate back to the previous activity.\n@Override\npublic void onBackPressed() {\n    super.onBackPressed();\n\n    // Finish the current activity to navigate back to the previous activity.\n    finish();\n}","body":"Use the finish() method to finish the current activity when you want to navigate back to the previous activity. This will remove the current activity from the back button stack and ensure that the back button will navigate back to the previous activity. @Override public void onBackPressed() {     super.onBackPressed();      // Finish the current activity to navigate back to the previous activity.     finish(); }"},{"owner":{"account_id":2647431,"reputation":9890,"user_id":2289835,"accept_rate":38,"display_name":"Rumit Patel"},"score":0,"creation_date":1695367003,"post_id":77155314,"comment_id":136017445,"body_markdown":"May be ActivityB is opening twice.","body":"May be ActivityB is opening twice."},{"owner":{"account_id":27318490,"reputation":1,"user_id":20832625,"display_name":"Nayana Petkar"},"score":0,"creation_date":1695368671,"post_id":77155314,"comment_id":136017765,"body_markdown":"I am using my custom back arrow. For back click, I am using onBackPressed mentioned in my question","body":"I am using my custom back arrow. For back click, I am using onBackPressed mentioned in my question"},{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1695908126,"post_id":77155314,"comment_id":136088680,"body_markdown":"Sounds strange. Please edit your question and post your manifest.","body":"Sounds strange. Please edit your question and post your manifest."},{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1695908213,"post_id":77155314,"comment_id":136088698,"body_markdown":"Your code for `onBackPressed()` makes no sense and basically does nothing. It just calls the default implementation of `onBackPressed()` in the super class, which calls `finish()` on the current `Activity`. If you remove this code, the effect is the same, as the default implementation of `onBackPressed()` will be called when the BACK button is tapped.","body":"Your code for <code>onBackPressed()</code> makes no sense and basically does nothing. It just calls the default implementation of <code>onBackPressed()</code> in the super class, which calls <code>finish()</code> on the current <code>Activity</code>. If you remove this code, the effect is the same, as the default implementation of <code>onBackPressed()</code> will be called when the BACK button is tapped."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695368250,"creation_date":1695368250,"answer_id":77155676,"question_id":77155314,"body_markdown":"You need to define the parent Activity of your Activity in your Manifest and get lost of the onBackPressed method:\r\n\r\n    &lt;activity\r\n        android:name=&quot;.BActivity&quot;\r\n        android:parentActivityName=&quot;.AActivity&quot;&gt;\r\n        &lt;meta-data\r\n            android:name=&quot;android.support.PARENT_ACTIVITY&quot;\r\n            android:value=&quot;.AActivity&quot;/&gt;\r\n    &lt;/activity&gt;\r\n\r\nThat is how it is done.","title":"Need to click back arrow twice to go back to previous activity, how to prevent it","body":"<p>You need to define the parent Activity of your Activity in your Manifest and get lost of the onBackPressed method:</p>\n<pre><code>&lt;activity\n    android:name=&quot;.BActivity&quot;\n    android:parentActivityName=&quot;.AActivity&quot;&gt;\n    &lt;meta-data\n        android:name=&quot;android.support.PARENT_ACTIVITY&quot;\n        android:value=&quot;.AActivity&quot;/&gt;\n&lt;/activity&gt;\n</code></pre>\n<p>That is how it is done.</p>\n"}],"owner":{"account_id":27318490,"reputation":1,"user_id":20832625,"display_name":"Nayana Petkar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695369632,"creation_date":1695364357,"question_id":77155314,"body_markdown":"I have one activity A and when I click on one button from activity A and come to an another activity B and when I click on back arrow from activity B to go back to A, its comes to the same activity B, so I need to click the back arrow again to go back and when I click on second time, it works.\r\n\r\nI have used below approach.\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        super.onBackPressed();\r\n    }\r\n\r\nI have also used onKeyDown() approach. But it does not work, its comes to the same activity B, so I need to click the back arrow again to go back to previous activity.\r\n\r\nIs there any way to prevent this from happening?","title":"Need to click back arrow twice to go back to previous activity, how to prevent it","body":"<p>I have one activity A and when I click on one button from activity A and come to an another activity B and when I click on back arrow from activity B to go back to A, its comes to the same activity B, so I need to click the back arrow again to go back and when I click on second time, it works.</p>\n<p>I have used below approach.</p>\n<pre><code>@Override\npublic void onBackPressed() {\n    super.onBackPressed();\n}\n</code></pre>\n<p>I have also used onKeyDown() approach. But it does not work, its comes to the same activity B, so I need to click the back arrow again to go back to previous activity.</p>\n<p>Is there any way to prevent this from happening?</p>\n"},{"tags":["java","docker","cpu","threadpool","vmware"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695368804,"post_id":77155707,"comment_id":136017789,"body_markdown":"Be aware that a CPU with hyper-threading can have that feature disabled if the sysadmin so chooses.","body":"Be aware that a CPU with hyper-threading can have that feature disabled if the sysadmin so chooses."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1695370615,"post_id":77155707,"comment_id":136018093,"body_markdown":"There is not a single answer to this, as it will actually depend on what your threads will be doing (e.g. CPU-bound work vs IO-bound work). In addition, just looking at it in the form of logical/hyper-threading or physical cores is too simple, especially when working with virtualization technology like Kubernetes.","body":"There is not a single answer to this, as it will actually depend on what your threads will be doing (e.g. CPU-bound work vs IO-bound work). In addition, just looking at it in the form of logical/hyper-threading or physical cores is too simple, especially when working with virtualization technology like Kubernetes."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695370727,"post_id":77155707,"comment_id":136018112,"body_markdown":"Also, Java can report on the number of CPUs it *thinks* it has available, either because the OS reported that to Java (possibly taking into account quotas or virtualization limits), or it was configured with a specific value on the commandline.","body":"Also, Java can report on the number of CPUs it <i>thinks</i> it has available, either because the OS reported that to Java (possibly taking into account quotas or virtualization limits), or it was configured with a specific value on the commandline."},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":2,"creation_date":1695378284,"post_id":77155707,"comment_id":136019655,"body_markdown":"You may intentionally want to set the thread pool larger than the number of cores (physical, virtual, CPU execution units).  If one of them is blocked on something like database I/O, that would let another thread work rather than forcing a CPU to sit idle.  This is more of a tuning question, along the same lines as &quot;what should I set the heap size to&quot;.","body":"You may intentionally want to set the thread pool larger than the number of cores (physical, virtual, CPU execution units).  If one of them is blocked on something like database I/O, that would let another thread work rather than forcing a CPU to sit idle.  This is more of a tuning question, along the same lines as &quot;what should I set the heap size to&quot;."}],"owner":{"account_id":17334403,"reputation":1,"user_id":12556668,"display_name":"turtler000"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695369246,"creation_date":1695368561,"question_id":77155707,"body_markdown":"When the java program sets thread pool parameters, it will refer to the number of cpu cores.\r\nWhen configuring the number of core threads in the thread pool, should we use the number of physical cores or logical cores of the CPU?\r\nIn addition, I also want to know the number of CPU cores displayed by container technology, such as docker or vmware, is the number of logical cores or the number of physical cores?\r\nFor CPUs that support hyper-threading, these two values are different.","title":"When configuring the number of core threads in the thread pool, should we use the number of physical cores or logical cores of the CPU?","body":"<p>When the java program sets thread pool parameters, it will refer to the number of cpu cores.\nWhen configuring the number of core threads in the thread pool, should we use the number of physical cores or logical cores of the CPU?\nIn addition, I also want to know the number of CPU cores displayed by container technology, such as docker or vmware, is the number of logical cores or the number of physical cores?\nFor CPUs that support hyper-threading, these two values are different.</p>\n"},{"tags":["java","android","delphi","bluetooth-lowenergy","firemonkey"],"comments":[{"owner":{"account_id":3814324,"reputation":3408,"user_id":3164070,"accept_rate":60,"display_name":"Dave Nottage"},"score":0,"creation_date":1695369261,"post_id":77155516,"comment_id":136017852,"body_markdown":"You don&#39;t actually create an instance of `TJBluetoothGatt` (which you&#39;re doing wrong anyway) - an instance of `JBluetoothGatt` is returned when you call `connectGatt` on an instance of `JBluetoothDevice`. I expect you would call `requestConnectionPriority` once you&#39;ve done that. It might help you understand how it works by looking at the `System.Android.Bluetooth` unit","body":"You don&#39;t actually create an instance of <code>TJBluetoothGatt</code> (which you&#39;re doing wrong anyway) - an instance of <code>JBluetoothGatt</code> is returned when you call <code>connectGatt</code> on an instance of <code>JBluetoothDevice</code>. I expect you would call <code>requestConnectionPriority</code> once you&#39;ve done that. It might help you understand how it works by looking at the <code>System.Android.Bluetooth</code> unit"},{"owner":{"account_id":3814324,"reputation":3408,"user_id":3164070,"accept_rate":60,"display_name":"Dave Nottage"},"score":0,"creation_date":1695369492,"post_id":77155516,"comment_id":136017900,"body_markdown":"Also, the call would look like this: `requestConnectionPriority(TJBluetoothGatt.JavaClass.CONNECTION_PRIORITY_HIGH)` (you are missing a T). It&#39;s not nonsense - it&#39;s how the Java bridge works","body":"Also, the call would look like this: <code>requestConnectionPriority(TJBluetoothGatt.JavaClass.CONNECTI&zwnj;&#8203;ON_PRIORITY_HIGH)</code> (you are missing a T). It&#39;s not nonsense - it&#39;s how the Java bridge works"},{"owner":{"account_id":29506685,"reputation":1,"user_id":22612512,"display_name":"kdu300"},"score":0,"creation_date":1695652893,"post_id":77155516,"comment_id":136049662,"body_markdown":"Hello Dave,\nThanks for your help.\nBut I&#39;m afraid it&#39;s not enough. Unfortunately, the FMX is completely new material for me. \nI tried to call requestConnectionPriority() after the device is connected and the notification is switched on.\n\nlike this:\nADevice is the connected device. \n\nconst ADevice: TBluetoothLEDevice\n\nTJBluetoothGatt.Wrap(ADevice).requestConnectionPriority(TJBluetoothGatt.JavaClass.CONNECTION_PRIORITY_LOW) ;\n\nUnfortunately, my calls are aborted with an error. Maybe you can show me the complete functioncall.","body":"Hello Dave, Thanks for your help. But I&#39;m afraid it&#39;s not enough. Unfortunately, the FMX is completely new material for me.  I tried to call requestConnectionPriority() after the device is connected and the notification is switched on.  like this: ADevice is the connected device.   const ADevice: TBluetoothLEDevice  TJBluetoothGatt.Wrap(ADevice).requestConnectionPriority(TJBl&zwnj;&#8203;uetoothGatt.JavaClas&zwnj;&#8203;s.CONNECTION_PRIORIT&zwnj;&#8203;Y_LOW) ;  Unfortunately, my calls are aborted with an error. Maybe you can show me the complete functioncall."},{"owner":{"account_id":3814324,"reputation":3408,"user_id":3164070,"accept_rate":60,"display_name":"Dave Nottage"},"score":0,"creation_date":1695672211,"post_id":77155516,"comment_id":136053192,"body_markdown":"The code in your comment is incorrect, since `TBluetoothLEDevice` is a Delphi class, and you cannot use `TJBluetoothGatt.Wrap` with it, not to mention that it does not even make sense. As per my earlier comment: an instance of `JBluetoothGatt` is returned when you call `connectGatt` on an instance of `JBluetoothDevice`. If all this is new, that is why I suggested looking at the Delphi source to learn from it.","body":"The code in your comment is incorrect, since <code>TBluetoothLEDevice</code> is a Delphi class, and you cannot use <code>TJBluetoothGatt.Wrap</code> with it, not to mention that it does not even make sense. As per my earlier comment: an instance of <code>JBluetoothGatt</code> is returned when you call <code>connectGatt</code> on an instance of <code>JBluetoothDevice</code>. If all this is new, that is why I suggested looking at the Delphi source to learn from it."}],"owner":{"account_id":29506685,"reputation":1,"user_id":22612512,"display_name":"kdu300"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695368824,"creation_date":1695366725,"question_id":77155516,"body_markdown":"I can&#39;t get `requestConnectionPriority` called correctly in Delphi Alexandria 11.3 FMX for Andoid BLE?\r\n\r\nI actually assumed that the following code is sufficient to get the `requestConnectionPriority`.\r\n`Androidapi.JNI.Bluetooth` is included in uses and declared in `Androidapi.JNI.Bluetooth.pas` like this:\r\n\r\n    TJBluetoothGatt = class(TJavaGenericImport&lt;JBluetoothGattClass, JBluetoothGatt&gt;) end;\r\n\r\nNow here is my code:\r\n\r\n*&lt;snip&gt;*\r\n\r\n    var\r\n      JBluetoothGatt: TJBluetoothGatt; // requestConnectionPriority added in API level 21\r\n    begin\r\n      JBluetoothGatt.Create;\r\n     \r\n     JBluetoothGatt.Wrap(self).requestConnectionPriority(JBluetoothGatt.JavaClass.CONNECTION_PRIORITY_HIGH); // this is nonsense but all function calls are visible, why ????\r\n      JBluetoothGatt.Free;\r\n    end;\r\n\r\n*&lt;snip&gt;*\r\n\r\nI would have expected more of a function like this now: \r\n\r\n    JBluetoothGatt.requestConnectionPriority(CONNECTION_PRIORITY_HIGH);\r\n\r\nJBluetoothGatt has no functions. Only wrap lets me access the functions (list).\r\nI have no idea what AJINIObjectID or IJavaInstance is supposed to be, with is to call Wrap.\r\n\r\nAnyway, I&#39;m sure it is to act completely different. What is the right way? \r\n","title":"How to call requestConnectionPriority correctly in FMX for Andoid BLE?","body":"<p>I can't get <code>requestConnectionPriority</code> called correctly in Delphi Alexandria 11.3 FMX for Andoid BLE?</p>\n<p>I actually assumed that the following code is sufficient to get the <code>requestConnectionPriority</code>.\n<code>Androidapi.JNI.Bluetooth</code> is included in uses and declared in <code>Androidapi.JNI.Bluetooth.pas</code> like this:</p>\n<pre><code>TJBluetoothGatt = class(TJavaGenericImport&lt;JBluetoothGattClass, JBluetoothGatt&gt;) end;\n</code></pre>\n<p>Now here is my code:</p>\n<p><em></em></p>\n<pre><code>var\n  JBluetoothGatt: TJBluetoothGatt; // requestConnectionPriority added in API level 21\nbegin\n  JBluetoothGatt.Create;\n \n JBluetoothGatt.Wrap(self).requestConnectionPriority(JBluetoothGatt.JavaClass.CONNECTION_PRIORITY_HIGH); // this is nonsense but all function calls are visible, why ????\n  JBluetoothGatt.Free;\nend;\n</code></pre>\n<p><em></em></p>\n<p>I would have expected more of a function like this now:</p>\n<pre><code>JBluetoothGatt.requestConnectionPriority(CONNECTION_PRIORITY_HIGH);\n</code></pre>\n<p>JBluetoothGatt has no functions. Only wrap lets me access the functions (list).\nI have no idea what AJINIObjectID or IJavaInstance is supposed to be, with is to call Wrap.</p>\n<p>Anyway, I'm sure it is to act completely different. What is the right way?</p>\n"},{"tags":["java","maven","security","access-control","project-structure"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695365303,"post_id":77155331,"comment_id":136017126,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"comments":[{"owner":{"account_id":20856181,"reputation":1,"user_id":15319440,"display_name":"Dheeraj Kumar Rajak"},"score":0,"creation_date":1696504265,"post_id":77155706,"comment_id":136162849,"body_markdown":"Thanks. I am beginer into this so please bear with my basic questions but is there a way by creating jar file of the main folder? Like we create jar or aar file in release mode which allows to use but hide the implementation.","body":"Thanks. I am beginer into this so please bear with my basic questions but is there a way by creating jar file of the main folder? Like we create jar or aar file in release mode which allows to use but hide the implementation."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1696575812,"post_id":77155706,"comment_id":136173300,"body_markdown":"Generally, hiding implementation is a difficult thing. Java Byte code can be decompiled, with often pretty good results. You can, of course, obfuscate the code, but that might lead to other problems for the users of the code. What is the reason you want to hide the implementation?","body":"Generally, hiding implementation is a difficult thing. Java Byte code can be decompiled, with often pretty good results. You can, of course, obfuscate the code, but that might lead to other problems for the users of the code. What is the reason you want to hide the implementation?"},{"owner":{"account_id":20856181,"reputation":1,"user_id":15319440,"display_name":"Dheeraj Kumar Rajak"},"score":0,"creation_date":1696837694,"post_id":77155706,"comment_id":136199093,"body_markdown":"We provide frameworks to external companies for use in their projects. One of our key concerns is safeguarding. By hiding the implementation details, we aim to ensure that the core logic  behind the framework remain proprietary and inaccessible to others.","body":"We provide frameworks to external companies for use in their projects. One of our key concerns is safeguarding. By hiding the implementation details, we aim to ensure that the core logic  behind the framework remain proprietary and inaccessible to others."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1696853858,"post_id":77155706,"comment_id":136202060,"body_markdown":"@DheerajKumarRajak Then I would probably take a deep look into obfuscator software. On the other hand, you should note that many companies don&#39;t like to buy frameworks if they cannot get the source code as well.","body":"@DheerajKumarRajak Then I would probably take a deep look into obfuscator software. On the other hand, you should note that many companies don&#39;t like to buy frameworks if they cannot get the source code as well."}],"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695368544,"creation_date":1695368544,"answer_id":77155706,"question_id":77155331,"body_markdown":"If you allow someone to extend a class, then you give them access to the implementation details.\r\n\r\nThere is no real way around that.","title":"How to Restrict Access to Maven automation testing framework Project&#39;s Main Folder Contents?","body":"<p>If you allow someone to extend a class, then you give them access to the implementation details.</p>\n<p>There is no real way around that.</p>\n"}],"owner":{"account_id":20856181,"reputation":1,"user_id":15319440,"display_name":"Dheeraj Kumar Rajak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695368544,"creation_date":1695364588,"question_id":77155331,"body_markdown":"I have a Maven automation testing BDD-Cucumber framework project where the main folder contains essential testing configurations and reusable components. I want to allow clients to use these components and extend classes from the main folder, but I need to prevent them from viewing the implementation details available in main folder.\r\n\r\nWhat would be the best approach or set of configurations to achieve this level of access restriction in a Maven project? Any insights or suggestions would be greatly appreciated.\r\n\r\nI&#39;ve explored various Maven configuration options and access control mechanisms, but haven&#39;t found a specific solution that addresses this scenario. I&#39;ve looked into Maven&#39;s build profiles and resource filtering, but they don&#39;t seem to provide the level of access restriction I&#39;m aiming for.\r\n\r\nI&#39;m looking for a way to configure my Maven automation testing BDD-Cucumber project so that clients can utilize the reusable components and extend classes from the main folder, but they shouldn&#39;t be able to view the implementation details within the main folder. This would provide a level of abstraction and protect sensitive information.","title":"How to Restrict Access to Maven automation testing framework Project&#39;s Main Folder Contents?","body":"<p>I have a Maven automation testing BDD-Cucumber framework project where the main folder contains essential testing configurations and reusable components. I want to allow clients to use these components and extend classes from the main folder, but I need to prevent them from viewing the implementation details available in main folder.</p>\n<p>What would be the best approach or set of configurations to achieve this level of access restriction in a Maven project? Any insights or suggestions would be greatly appreciated.</p>\n<p>I've explored various Maven configuration options and access control mechanisms, but haven't found a specific solution that addresses this scenario. I've looked into Maven's build profiles and resource filtering, but they don't seem to provide the level of access restriction I'm aiming for.</p>\n<p>I'm looking for a way to configure my Maven automation testing BDD-Cucumber project so that clients can utilize the reusable components and extend classes from the main folder, but they shouldn't be able to view the implementation details within the main folder. This would provide a level of abstraction and protect sensitive information.</p>\n"},{"tags":["java","proguard"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1571849306,"post_id":58527481,"comment_id":103379474,"body_markdown":"FWIW 55.0 is the class file version for Java 11. So it seems that somewhere `javac` from JDK11 is being picked up (maybe check `javac -version` output).","body":"FWIW 55.0 is the class file version for Java 11. So it seems that somewhere <code>javac</code> from JDK11 is being picked up (maybe check <code>javac -version</code> output)."},{"owner":{"account_id":26863828,"reputation":51,"user_id":20446879,"display_name":"Payal Rajput"},"score":0,"creation_date":1672144118,"post_id":58527481,"comment_id":132228350,"body_markdown":"I had similar issue and I have answered for the same [here](https://stackoverflow.com/a/74928391/20446879)","body":"I had similar issue and I have answered for the same <a href=\"https://stackoverflow.com/a/74928391/20446879\">here</a>"}],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571850122,"creation_date":1571850122,"answer_id":58527774,"question_id":58527481,"body_markdown":"The `company.application.actions.AboutAction` class has been compiled for Java 11.\n\nProGuard 6.0 only supports Java 10.\n\nYou need ProGuard 6.1 for Java 11 support.\n\nSee [Version history][1] in the [ProGuard Manual][2]:\n\n &gt; &lt;h3&gt;Version 6.1 (May 2019)&lt;/h3&gt;\n &gt;\n &gt;  - ...\n &gt;  - [PGD-188] Added support for Java 10, 11, and 12.\n &gt;  - ...\n &gt;\n &gt; &lt;h3&gt;Version 6.0 (Feb 2018)&lt;/h3&gt;\n &gt;\n &gt;  - ...\n &gt;  - [PGD-186] Added support for Java 10.\n &gt;  - ...\n\n\n  [1]: https://www.guardsquare.com/en/products/proguard/manual/versions\n  [2]: https://www.guardsquare.com/en/products/proguard/manual","title":"java.io.IOException: Can&#39;t process class [class path] (Unsupported version number [55.0] (maximum 54.0, Java 10))","body":"<p>The <code>company.application.actions.AboutAction</code> class has been compiled for Java 11.</p>\n<p>ProGuard 6.0 only supports Java 10.</p>\n<p>You need ProGuard 6.1 for Java 11 support.</p>\n<p>See <a href=\"https://www.guardsquare.com/en/products/proguard/manual/versions\" rel=\"nofollow noreferrer\">Version history</a> in the <a href=\"https://www.guardsquare.com/en/products/proguard/manual\" rel=\"nofollow noreferrer\">ProGuard Manual</a>:</p>\n<blockquote>\n<h3>Version 6.1 (May 2019)</h3>\n<ul>\n<li>...</li>\n<li>[PGD-188] Added support for Java 10, 11, and 12.</li>\n<li>...</li>\n</ul>\n<h3>Version 6.0 (Feb 2018)</h3>\n<ul>\n<li>...</li>\n<li>[PGD-186] Added support for Java 10.</li>\n<li>...</li>\n</ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3814553,"reputation":722,"user_id":3164227,"display_name":"shubomb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680187747,"creation_date":1680187747,"answer_id":75889728,"question_id":58527481,"body_markdown":"    Update gradle version work for me\r\n\r\nI have updated gradle version and gradle wrapper version and its work for me \r\n\r\n    classpath &#39;com.android.tools.build:gradle:7.0.4&#39;  \r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-bin.zip\r\n\r\n","title":"java.io.IOException: Can&#39;t process class [class path] (Unsupported version number [55.0] (maximum 54.0, Java 10))","body":"<pre><code>Update gradle version work for me\n</code></pre>\n<p>I have updated gradle version and gradle wrapper version and its work for me</p>\n<pre><code>classpath 'com.android.tools.build:gradle:7.0.4'  \n\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.0.2-bin.zip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26947292,"reputation":11,"user_id":20517083,"display_name":"Jairin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695368154,"creation_date":1694817581,"answer_id":77115663,"question_id":58527481,"body_markdown":"It worked for me to perform an upgrade of Android Studio and my Java version, in addition to the Android Gradle plugin, as I began encountering issues with Android Studio after updating the Gradle plugin to 7+. These are the configured versions that made the &#39;Unsupported version number [55.0] (maximum 54.0, Java 10)&#39; error disappear:\r\n\r\nPrevious:\r\n\r\n - Android Studio 4.1 \r\n - Java 8 \r\n - Gradle 4.6 \r\n - Android Gradle Plugin 2.3.3\r\n\r\nNew:\r\n\r\n- Android Studio Giraffe | 2022.3.1 Patch 1\r\n- Java 11\r\n- Gradle 7.4\r\n- Android Gradle Plugin 7.3","title":"java.io.IOException: Can&#39;t process class [class path] (Unsupported version number [55.0] (maximum 54.0, Java 10))","body":"<p>It worked for me to perform an upgrade of Android Studio and my Java version, in addition to the Android Gradle plugin, as I began encountering issues with Android Studio after updating the Gradle plugin to 7+. These are the configured versions that made the 'Unsupported version number [55.0] (maximum 54.0, Java 10)' error disappear:</p>\n<p>Previous:</p>\n<ul>\n<li>Android Studio 4.1</li>\n<li>Java 8</li>\n<li>Gradle 4.6</li>\n<li>Android Gradle Plugin 2.3.3</li>\n</ul>\n<p>New:</p>\n<ul>\n<li>Android Studio Giraffe | 2022.3.1 Patch 1</li>\n<li>Java 11</li>\n<li>Gradle 7.4</li>\n<li>Android Gradle Plugin 7.3</li>\n</ul>\n"}],"owner":{"account_id":16831332,"reputation":21,"user_id":12169233,"display_name":"deputylactose"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7384,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1694818918,"answer_count":3,"score":2,"last_activity_date":1695368154,"creation_date":1571848773,"question_id":58527481,"body_markdown":"I&#39;m unable to compile java code that my coworker can successfully compile.\r\n\r\nI have JRE 8u221.\r\n\r\nProguard is version 6.03\r\n\r\nFrom my build.bat output:\r\n\r\ndist-obfuscate:\r\n     [echo] Extracting Objfuscator\r\n    [unzip] Expanding: c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\proguard6.0.3.zip into c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\r\n     [echo] Jarring Base ESDE\r\n     [copy] Copying 1 file to c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\r\n\r\n     [java] ProGuard, version 6.0.3java.io.IOException: Can&#39;t read [c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\sdeIn.jar] (Can&#39;t process class [company/application/actions/AboutAction.class] (Unsupported version number [55.0] (maximum 54.0, Java 10)))\r\n\r\n     [java]\r\n     [java] Reading input...\r\n     [java]     at proguard.InputReader.readInput(InputReader.java:214)Reading program jar [c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\sdeIn.jar]\r\n     [java]\r\n     [java]     at proguard.InputReader.readInput(InputReader.java:184)\r\n     [java]     at proguard.InputReader.readInput(InputReader.java:162)\r\n     [java]     at proguard.InputReader.execute(InputReader.java:90)\r\n     [java]     at proguard.ProGuard.readInput(ProGuard.java:255)\r\n     [java]     at proguard.ProGuard.execute(ProGuard.java:96)\r\n     [java]     at proguard.ProGuard.main(ProGuard.java:572)\r\n     [java] Caused by: java.io.IOException: Can&#39;t process class [company/application/actions/AboutAction.class] (Unsupported version number [55.0] (maximum 54.0, Java 10))\r\n     [java]     at proguard.io.ClassReader.read(ClassReader.java:114)\r\n     [java]     at proguard.io.FilteredDataEntryReader.read(FilteredDataEntryReader.java:87)\r\n     [java]     at proguard.io.FilteredDataEntryReader.read(FilteredDataEntryReader.java:87)\r\n     [java]     at proguard.io.JarReader.read(JarReader.java:83)\r\n     [java]     at proguard.io.DirectoryPump.readFiles(DirectoryPump.java:65)\r\n     [java]     at proguard.io.DirectoryPump.pumpDataEntries(DirectoryPump.java:53)\r\n     [java]     at proguard.InputReader.readInput(InputReader.java:210)\r\n     [java]     ... 6 more\r\n     [java] Caused by: java.lang.UnsupportedOperationException: Unsupported version number [55.0] (maximum 54.0, Java 10)\r\n     [java]     at proguard.classfile.util.ClassUtil.checkVersionNumbers(ClassUtil.java:148)\r\n     [java]     at proguard.classfile.io.ProgramClassReader.visitProgramClass(ProgramClassReader.java:101)\r\n     [java]     at proguard.classfile.ProgramClass.accept(ProgramClass.java:430)\r\n     [java]     at proguard.io.ClassReader.read(ClassReader.java:91)\r\n     [java]     ... 12 more\r\n     [java] Java Result: 1\r\n\r\nBUILD FAILED\r\nc:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\build.xml:877: Warning: Could not find file c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\sde.jar to copy.\r\n\r\nQuestions:\r\n\r\n1) &quot;Version 55.0&quot;?  Version of...what?\r\n\r\nProguard version = 6.0.3.\r\n\r\n2) &quot;Java 10&quot;?  Nope.\r\n\r\njava -version\r\njava version &quot;1.8.0_221&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_221-b11)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.221-b11, mixed mode)\r\n\r\nThis is Java *8*, not 10.\r\n\r\n","title":"java.io.IOException: Can&#39;t process class [class path] (Unsupported version number [55.0] (maximum 54.0, Java 10))","body":"<p>I'm unable to compile java code that my coworker can successfully compile.</p>\n\n<p>I have JRE 8u221.</p>\n\n<p>Proguard is version 6.03</p>\n\n<p>From my build.bat output:</p>\n\n<p>dist-obfuscate:\n     [echo] Extracting Objfuscator\n    [unzip] Expanding: c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\proguard6.0.3.zip into c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\n     [echo] Jarring Base ESDE\n     [copy] Copying 1 file to c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard</p>\n\n<pre><code> [java] ProGuard, version 6.0.3java.io.IOException: Can't read [c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\sdeIn.jar] (Can't process class [company/application/actions/AboutAction.class] (Unsupported version number [55.0] (maximum 54.0, Java 10)))\n\n [java]\n [java] Reading input...\n [java]     at proguard.InputReader.readInput(InputReader.java:214)Reading program jar [c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\sdeIn.jar]\n [java]\n [java]     at proguard.InputReader.readInput(InputReader.java:184)\n [java]     at proguard.InputReader.readInput(InputReader.java:162)\n [java]     at proguard.InputReader.execute(InputReader.java:90)\n [java]     at proguard.ProGuard.readInput(ProGuard.java:255)\n [java]     at proguard.ProGuard.execute(ProGuard.java:96)\n [java]     at proguard.ProGuard.main(ProGuard.java:572)\n [java] Caused by: java.io.IOException: Can't process class [company/application/actions/AboutAction.class] (Unsupported version number [55.0] (maximum 54.0, Java 10))\n [java]     at proguard.io.ClassReader.read(ClassReader.java:114)\n [java]     at proguard.io.FilteredDataEntryReader.read(FilteredDataEntryReader.java:87)\n [java]     at proguard.io.FilteredDataEntryReader.read(FilteredDataEntryReader.java:87)\n [java]     at proguard.io.JarReader.read(JarReader.java:83)\n [java]     at proguard.io.DirectoryPump.readFiles(DirectoryPump.java:65)\n [java]     at proguard.io.DirectoryPump.pumpDataEntries(DirectoryPump.java:53)\n [java]     at proguard.InputReader.readInput(InputReader.java:210)\n [java]     ... 6 more\n [java] Caused by: java.lang.UnsupportedOperationException: Unsupported version number [55.0] (maximum 54.0, Java 10)\n [java]     at proguard.classfile.util.ClassUtil.checkVersionNumbers(ClassUtil.java:148)\n [java]     at proguard.classfile.io.ProgramClassReader.visitProgramClass(ProgramClassReader.java:101)\n [java]     at proguard.classfile.ProgramClass.accept(ProgramClass.java:430)\n [java]     at proguard.io.ClassReader.read(ClassReader.java:91)\n [java]     ... 12 more\n [java] Java Result: 1\n</code></pre>\n\n<p>BUILD FAILED\nc:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\build.xml:877: Warning: Could not find file c:\\Workspaces\\abcd\\efg\\Trunk\\ESDE\\Scripts\\proguard\\sde.jar to copy.</p>\n\n<p>Questions:</p>\n\n<p>1) \"Version 55.0\"?  Version of...what?</p>\n\n<p>Proguard version = 6.0.3.</p>\n\n<p>2) \"Java 10\"?  Nope.</p>\n\n<p>java -version\njava version \"1.8.0_221\"\nJava(TM) SE Runtime Environment (build 1.8.0_221-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.221-b11, mixed mode)</p>\n\n<p>This is Java <em>8</em>, not 10.</p>\n"},{"tags":["java","eclipse","hibernate","maven"],"comments":[{"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"score":0,"creation_date":1695367545,"post_id":77155438,"comment_id":136017566,"body_markdown":"I recommend you to try to do changes in the pom.xml directly with text and not with an visual editor. Have you installed any new Plugins? Can you right click on the pom.xml and &quot;Open with&quot; an &quot;Text Editor&quot;? If nothing works, you can workaround this by opening the pom.xml not in Eclipse but in your OS-Explorer with Notepad++ e.g..","body":"I recommend you to try to do changes in the pom.xml directly with text and not with an visual editor. Have you installed any new Plugins? Can you right click on the pom.xml and &quot;Open with&quot; an &quot;Text Editor&quot;? If nothing works, you can workaround this by opening the pom.xml not in Eclipse but in your OS-Explorer with Notepad++ e.g.."},{"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"score":0,"creation_date":1695367866,"post_id":77155438,"comment_id":136017621,"body_markdown":"No problem, please mark my answer below as &quot;Answer&quot; so that everybody sees the solution too! :)","body":"No problem, please mark my answer below as &quot;Answer&quot; so that everybody sees the solution too! :)"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695368548,"post_id":77155438,"comment_id":136017741,"body_markdown":"Please go to the _Error Log_ view, select the error (do not open it, just select it), hit Ctrl+C and paste it into your question formatted as _Sample Code_. Did you do a fresh installation or an (maybe incomplete) upgrade? Does right-clicking the `pom.xml` file and choosing _Open With &gt; Generic Editor_ work? Please be aware that something like Notepad++ does not show problems and information that an IDE does.","body":"Please go to the <i>Error Log</i> view, select the error (do not open it, just select it), hit Ctrl+C and paste it into your question formatted as <i>Sample Code</i>. Did you do a fresh installation or an (maybe incomplete) upgrade? Does right-clicking the <code>pom.xml</code> file and choosing <i>Open With &gt; Generic Editor</i> work? Please be aware that something like Notepad++ does not show problems and information that an IDE does."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695367801,"creation_date":1695367801,"answer_id":77155618,"question_id":77155438,"body_markdown":"I recommend you to try to do changes in the pom.xml directly with text and not with an visual editor. Have you installed any new Plugins? Can you right click on the pom.xml and &quot;Open with&quot; an &quot;Text Editor&quot;? If nothing works, you can workaround this by opening the pom.xml not in Eclipse but in your OS-Explorer with Notepad++ e.g.. ","title":"Unable to Edit pom.xml in Eclipse Maven Project - Only Overview Mode Available","body":"<p>I recommend you to try to do changes in the pom.xml directly with text and not with an visual editor. Have you installed any new Plugins? Can you right click on the pom.xml and &quot;Open with&quot; an &quot;Text Editor&quot;? If nothing works, you can workaround this by opening the pom.xml not in Eclipse but in your OS-Explorer with Notepad++ e.g..</p>\n"}],"owner":{"account_id":29506070,"reputation":3,"user_id":22612014,"display_name":"Pratik Lokhande "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77155618,"answer_count":1,"score":0,"last_activity_date":1695367801,"creation_date":1695365904,"question_id":77155438,"body_markdown":"**I created a Maven project in Eclipse, but I can&#39;t edit the pom.xml file because it&#39;s not showing the editing window to add dependencies. It&#39;s only showing the overview window when I open it.**\r\n\r\nWhat could be causing this problem, and how can I fix it?\r\n\r\nAdditional information:\r\n\r\nI am using Eclipse version 2023-09(4.29.2).\r\nI have tried restarting Eclipse.\r\nI have tried making new project.\r\nI have checked my Window \\&gt; Preferences \\&gt; Maven \\&gt; User Interface settings, and the &quot;Open XML page in the POM editor by default&quot; checkbox is checked.\r\n\r\n[This is what my eclipse showing](https://i.stack.imgur.com/covbA.png)\r\n\r\nPlease help!","title":"Unable to Edit pom.xml in Eclipse Maven Project - Only Overview Mode Available","body":"<p><strong>I created a Maven project in Eclipse, but I can't edit the pom.xml file because it's not showing the editing window to add dependencies. It's only showing the overview window when I open it.</strong></p>\n<p>What could be causing this problem, and how can I fix it?</p>\n<p>Additional information:</p>\n<p>I am using Eclipse version 2023-09(4.29.2).\nI have tried restarting Eclipse.\nI have tried making new project.\nI have checked my Window &gt; Preferences &gt; Maven &gt; User Interface settings, and the &quot;Open XML page in the POM editor by default&quot; checkbox is checked.</p>\n<p><a href=\"https://i.stack.imgur.com/covbA.png\" rel=\"nofollow noreferrer\">This is what my eclipse showing</a></p>\n<p>Please help!</p>\n"},{"tags":["java","arrays","string","yaml","pattern-matching"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1695211001,"post_id":77141613,"comment_id":135993264,"body_markdown":"What you have tried so far? Would you please share that?","body":"What you have tried so far? Would you please share that?"},{"owner":{"account_id":15689318,"reputation":21,"user_id":11320951,"display_name":"maria_so"},"score":0,"creation_date":1695213400,"post_id":77141613,"comment_id":135993805,"body_markdown":"I have tried \n```\n requestBody:\n        description: &#39;&#39;\n        required: true\n        content:\n          application/json:\n            schema:\n              type: &#39;object&#39;\n              properties:\n                languages:\n                  type: &#39;array&#39;\n                  items:\n                    type: &#39;string&#39;\n                    pattern: &quot;^[0-9a-zA-Z]{1,50}$&quot;\n                    maxLength: 50\n                    example: &#39;english&#39;\n```","body":"I have tried  ```  requestBody:         description: &#39;&#39;         required: true         content:           application/json:             schema:               type: &#39;object&#39;               properties:                 languages:                   type: &#39;array&#39;                   items:                     type: &#39;string&#39;                     pattern: &quot;^[0-9a-zA-Z]{1,50}$&quot;                     maxLength: 50                     example: &#39;english&#39; ```"},{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1695276616,"post_id":77141613,"comment_id":136003276,"body_markdown":"please add your current swagger in the question. Not in comments.","body":"please add your current swagger in the question. Not in comments."}],"answers":[{"comments":[{"owner":{"account_id":15689318,"reputation":21,"user_id":11320951,"display_name":"maria_so"},"score":0,"creation_date":1695213285,"post_id":77142234,"comment_id":135993776,"body_markdown":"```\nrequestBody:\n        description: &#39;&#39;\n        required: true\n        content:\n          application/json:\n            schema:\n              languages:\n                type: object\n                properties:\n                  language:\n                    type: array\n                    items:\n                      $ref: &#39;#/components/schemas/language&#39;\n```\nthis is not valid swagger","body":"``` requestBody:         description: &#39;&#39;         required: true         content:           application/json:             schema:               languages:                 type: object                 properties:                   language:                     type: array                     items:                       $ref: &#39;#/components/schemas/language&#39; ``` this is not valid swagger"},{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1695276569,"post_id":77142234,"comment_id":136003266,"body_markdown":"I have not created complete swagger for you. I just mentioned how to create Array in your requested format. This is part of swagger. That&#39;s why I asked to share your current swagger.","body":"I have not created complete swagger for you. I just mentioned how to create Array in your requested format. This is part of swagger. That&#39;s why I asked to share your current swagger."}],"tags":[],"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695211405,"creation_date":1695211405,"answer_id":77142234,"question_id":77141613,"body_markdown":"It should look like this:\r\n\r\n    Languages:\r\n      type: object\r\n      properties:\r\n        languages:\r\n          type: array\r\n          items:\r\n            type: string\r\n\r\nAnd you can refer this `Language` Schema.","title":"Swagger Schema - Pattern and length not applied to string array","body":"<p>It should look like this:</p>\n<pre><code>Languages:\n  type: object\n  properties:\n    languages:\n      type: array\n      items:\n        type: string\n</code></pre>\n<p>And you can refer this <code>Language</code> Schema.</p>\n"}],"owner":{"account_id":15689318,"reputation":21,"user_id":11320951,"display_name":"maria_so"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695367526,"creation_date":1695206494,"question_id":77141613,"body_markdown":"This is related to this question: https://stackoverflow.com/questions/68184411/swagger-schema-pattern-not-applied-to-string-array which has received an answer that checks an array of fields (like key-values) instead of a list of single strings. I need the body of the request to look like this: \r\n```\r\n{\r\n    &quot;languages&quot;: [\r\n        &quot;english&quot;\r\n    ]\r\n}\r\n```\r\nnot like this (as the answer I was mentioning refers to):\r\n```\r\n{\r\n  &quot;languages&quot;: [\r\n    {\r\n      &quot;language&quot;: &quot;english&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nThis is the swagger piece I am using right now: \r\n```\r\n      requestBody:\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              type: &#39;object&#39;\r\n              additionalProperties: false\r\n              properties:\r\n                languages:\r\n                  type: &#39;array&#39;\r\n                  items:\r\n                    type: &#39;string&#39;\r\n                    pattern: &quot;^[0-9a-zA-Z]{1,50}$&quot;\r\n                    maxLength: 50\r\n                    example: &#39;english&#39;\r\n```","title":"Swagger Schema - Pattern and length not applied to string array","body":"<p>This is related to this question: <a href=\"https://stackoverflow.com/questions/68184411/swagger-schema-pattern-not-applied-to-string-array\">Swagger Schema - Pattern not applied to string array</a> which has received an answer that checks an array of fields (like key-values) instead of a list of single strings. I need the body of the request to look like this:</p>\n<pre><code>{\n    &quot;languages&quot;: [\n        &quot;english&quot;\n    ]\n}\n</code></pre>\n<p>not like this (as the answer I was mentioning refers to):</p>\n<pre><code>{\n  &quot;languages&quot;: [\n    {\n      &quot;language&quot;: &quot;english&quot;\n    }\n  ]\n}\n</code></pre>\n<p>This is the swagger piece I am using right now:</p>\n<pre><code>      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: 'object'\n              additionalProperties: false\n              properties:\n                languages:\n                  type: 'array'\n                  items:\n                    type: 'string'\n                    pattern: &quot;^[0-9a-zA-Z]{1,50}$&quot;\n                    maxLength: 50\n                    example: 'english'\n</code></pre>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":2536797,"reputation":618,"user_id":2203665,"display_name":"joaonlima"},"score":0,"creation_date":1367019781,"post_id":16246675,"comment_id":23244649,"body_markdown":"See if this [**answer**](http://stackoverflow.com/questions/1074081/hibernate-error-org-hibernate-nonuniqueobjectexception-a-different-object-with) helps you..","body":"See if this <a href=\"http://stackoverflow.com/questions/1074081/hibernate-error-org-hibernate-nonuniqueobjectexception-a-different-object-with\"><b>answer</b></a> helps you.."}],"answers":[{"comments":[{"owner":{"account_id":1697926,"reputation":1471,"user_id":1558877,"accept_rate":88,"display_name":"John"},"score":4,"creation_date":1367251125,"post_id":16246858,"comment_id":23305206,"body_markdown":"Thanks jbx. As you said, it turns out that the B objects are referring to multiple C instances in memory. Essentially what is happening is that one part of my program is reading in C, and attaching it to B. Another part is loading a different B with the same C from the database. Both are being attached to A which triggers the error on save.\n\nI&#39;ve set the &lt;pre&gt;cascade&lt;/pre&gt; for the B-&gt;C relationship to &quot;&lt;pre&gt;none&lt;/pre&gt;,&quot; but I&#39;m still getting the same error. In many-to-one or one-to-many relationships, is there a way to tell Hibernate only to change the foreign key and not worry about the rest?","body":"Thanks jbx. As you said, it turns out that the B objects are referring to multiple C instances in memory. Essentially what is happening is that one part of my program is reading in C, and attaching it to B. Another part is loading a different B with the same C from the database. Both are being attached to A which triggers the error on save.  I&#39;ve set the &lt;pre&gt;cascade&lt;/pre&gt; for the B-&gt;C relationship to &quot;&lt;pre&gt;none&lt;/pre&gt;,&quot; but I&#39;m still getting the same error. In many-to-one or one-to-many relationships, is there a way to tell Hibernate only to change the foreign key and not worry about the rest?"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":1,"creation_date":1367346384,"post_id":16246858,"comment_id":23346675,"body_markdown":"Does C&#39;s primary key have any ID generation strategy? Like a sequence-generator or something similar?","body":"Does C&#39;s primary key have any ID generation strategy? Like a sequence-generator or something similar?"},{"owner":{"account_id":1697926,"reputation":1471,"user_id":1558877,"accept_rate":88,"display_name":"John"},"score":0,"creation_date":1368204523,"post_id":16246858,"comment_id":23660719,"body_markdown":"Yes, each has its own sequence in the database.\n\nAs you mentioned, cascading turned out to be the issue. We turned off cascadeing for the type tables, and for the others we used &quot;merge&quot; cascade, which allowed us to call merge() without creating all those null rows. I&#39;ve marked your answer accordingly, thanks!","body":"Yes, each has its own sequence in the database.  As you mentioned, cascading turned out to be the issue. We turned off cascadeing for the type tables, and for the others we used &quot;merge&quot; cascade, which allowed us to call merge() without creating all those null rows. I&#39;ve marked your answer accordingly, thanks!"},{"owner":{"account_id":175450,"reputation":351,"user_id":405475,"accept_rate":84,"display_name":"Lahiru Ruhunage"},"score":17,"creation_date":1383647575,"post_id":16246858,"comment_id":29411888,"body_markdown":"I have used merge() instead of saveOrUpdate() and BOOM! it works :)","body":"I have used merge() instead of saveOrUpdate() and BOOM! it works :)"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":0,"creation_date":1617968122,"post_id":16246858,"comment_id":118465601,"body_markdown":"@AmirhoseinAl what does this have to do with the answer? ask a new question about your problem and describe it well","body":"@AmirhoseinAl what does this have to do with the answer? ask a new question about your problem and describe it well"}],"tags":[],"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"comment_count":5,"down_vote_count":0,"up_vote_count":118,"is_accepted":true,"score":118,"last_activity_date":1367020623,"creation_date":1367020623,"answer_id":16246858,"question_id":16246675,"body_markdown":"Most probably its because the B objects are not referring to the same Java C object instance. They are referring to the same row in the database (i.e. the same primary key) but they&#39;re different copies of it. \r\n\r\nSo what is happening is that the Hibernate session, which is managing the entities would be keeping track of which Java object corresponds to the row with the same primary key.\r\n\r\nOne option would be to make sure that the Entities of objects B that refer to the same row are actually referring to the same object instance of C. Alternatively turn off cascading for that member variable. This way when B is persisted C is not. You will have to save C manually separately though. If C is a type/category table, then it probably makes sense to be that way.\r\n","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Most probably its because the B objects are not referring to the same Java C object instance. They are referring to the same row in the database (i.e. the same primary key) but they're different copies of it. </p>\n\n<p>So what is happening is that the Hibernate session, which is managing the entities would be keeping track of which Java object corresponds to the row with the same primary key.</p>\n\n<p>One option would be to make sure that the Entities of objects B that refer to the same row are actually referring to the same object instance of C. Alternatively turn off cascading for that member variable. This way when B is persisted C is not. You will have to save C manually separately though. If C is a type/category table, then it probably makes sense to be that way.</p>\n"},{"comments":[{"owner":{"account_id":100259,"reputation":2880,"user_id":270349,"accept_rate":62,"display_name":"aalku"},"score":3,"creation_date":1384165197,"post_id":19903478,"comment_id":29612691,"body_markdown":"If he was not he wouldn&#39;t have this problem. The problem is he has two objects with the same identifier.","body":"If he was not he wouldn&#39;t have this problem. The problem is he has two objects with the same identifier."}],"tags":[],"owner":{"account_id":1315905,"reputation":89,"user_id":1262787,"display_name":"Fawad Khaliq"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1384163982,"creation_date":1384163982,"answer_id":19903478,"question_id":16246675,"body_markdown":"you might not be setting the identifier of the object before calling update query.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>you might not be setting the identifier of the object before calling update query.</p>\n"},{"tags":[],"owner":{"account_id":80980,"reputation":3007,"user_id":228638,"accept_rate":52,"display_name":"Ales Potocnik Hahonina"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1403085298,"creation_date":1403085298,"answer_id":24282492,"question_id":16246675,"body_markdown":"Just came across this message but in c# code. Not sure if it&#39;s relevant (exactly the same error message though).\r\n\r\nI was debugging the code with breakpoints and expanded some collections through private members while debugger was at a breakpoint. Having re-run the code without digging through structures made the error message go away. It seems like the act of looking into private lazy-loaded collections has made NHibernate load things that were not supposed to be loaded at that time (because they were in private members).\r\n\r\nThe code itself is wrapped in a fairly complicated transaction that can update large number of records and many dependencies as part of that transaction (import process).\r\n\r\nHopefully a clue to anyone else who comes across the issue.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Just came across this message but in c# code. Not sure if it's relevant (exactly the same error message though).</p>\n\n<p>I was debugging the code with breakpoints and expanded some collections through private members while debugger was at a breakpoint. Having re-run the code without digging through structures made the error message go away. It seems like the act of looking into private lazy-loaded collections has made NHibernate load things that were not supposed to be loaded at that time (because they were in private members).</p>\n\n<p>The code itself is wrapped in a fairly complicated transaction that can update large number of records and many dependencies as part of that transaction (import process).</p>\n\n<p>Hopefully a clue to anyone else who comes across the issue.</p>\n"},{"tags":[],"owner":{"account_id":3391156,"reputation":1765,"user_id":2845946,"display_name":"user2845946"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1406222780,"creation_date":1406222780,"answer_id":24940189,"question_id":16246675,"body_markdown":"Transfer the task of assigning the object ID from Hibernate to the database by using:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    &lt;generator class=&quot;native&quot;/&gt;\r\n\r\nThis solved the problem for me.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Transfer the task of assigning the object ID from Hibernate to the database by using:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>&lt;generator class=\"native\"/&gt;\n</code></pre>\n\n<p>This solved the problem for me.</p>\n"},{"comments":[{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":4,"creation_date":1608802076,"post_id":25907179,"comment_id":115688534,"body_markdown":"How do I get a hold of the `session_object` that has the `clear()` method?","body":"How do I get a hold of the <code>session_object</code> that has the <code>clear()</code> method?"},{"owner":{"account_id":2444741,"reputation":71,"user_id":2132398,"display_name":"bel_dbo"},"score":0,"creation_date":1639570046,"post_id":25907179,"comment_id":124381050,"body_markdown":"`session.clear()` also removes all other (non-offending) objects from the session. So this is not a good option.","body":"<code>session.clear()</code> also removes all other (non-offending) objects from the session. So this is not a good option."}],"tags":[],"owner":{"account_id":4532124,"reputation":615,"user_id":3682254,"accept_rate":33,"display_name":"dsk"},"comment_count":2,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1452026836,"creation_date":1411026943,"answer_id":25907179,"question_id":16246675,"body_markdown":"You only need to do one thing. Run `session_object.clear()` and then save the new object. This will clear the session (as aptly named) and remove the offending duplicate object from your session.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>You only need to do one thing. Run <code>session_object.clear()</code> and then save the new object. This will clear the session (as aptly named) and remove the offending duplicate object from your session.</p>\n"},{"tags":[],"owner":{"account_id":3761985,"reputation":428,"user_id":3126639,"accept_rate":100,"display_name":"Waqar"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1450446296,"creation_date":1412660448,"answer_id":26229217,"question_id":16246675,"body_markdown":"One way to solve the above problem will be to override the `hashcode()`.  \r\nAlso flush the hibernate session before and after save.  \r\n\r\n    getHibernateTemplate().flush();\r\n\r\nExplicitly setting the detached object to `null` also helps.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>One way to solve the above problem will be to override the <code>hashcode()</code>.<br>\nAlso flush the hibernate session before and after save.  </p>\n\n<pre><code>getHibernateTemplate().flush();\n</code></pre>\n\n<p>Explicitly setting the detached object to <code>null</code> also helps.</p>\n"},{"comments":[{"owner":{"account_id":8090350,"reputation":1585,"user_id":6096478,"accept_rate":47,"display_name":"DriLLFreAK100"},"score":0,"creation_date":1558021815,"post_id":29277906,"comment_id":98971182,"body_markdown":"Thanks! This was exactly my problem","body":"Thanks! This was exactly my problem"}],"tags":[],"owner":{"account_id":2415860,"reputation":41,"user_id":2109879,"display_name":"Hemant kumar"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1695367478,"creation_date":1427371309,"answer_id":29277906,"question_id":16246675,"body_markdown":"Add the annotation\r\n`@GeneratedValue`\r\nto the bean you are inserting.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Add the annotation\n<code>@GeneratedValue</code>\nto the bean you are inserting.</p>\n"},{"tags":[],"owner":{"account_id":1918867,"reputation":85,"user_id":1730814,"accept_rate":100,"display_name":"Buddhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435430719,"creation_date":1435430719,"answer_id":31092266,"question_id":16246675,"body_markdown":"I had this error few days a go and I sped too many time on fixing this error. \r\n\r\n     public boolean save(OrderHeader header) {\r\n        Session session = sessionFactory.openSession();\r\n\r\n\r\n        Transaction transaction = session.beginTransaction();\r\n\r\n        try {\r\n            session.save(header);\r\n\r\n            for (OrderDetail detail : header.getDetails()) {\r\n                session.save(detail);\r\n            }\r\n\r\n            transaction.commit();\r\n            session.close();\r\n\r\n            return true;\r\n        } catch (HibernateException exception) {\r\n\r\n            exception.printStackTrace();\r\n            transaction.rollback();\r\n            return false;\r\n        }\r\n    }\r\n\r\nBefore i get this error , I didn&#39;t have mentioned ID generation type on the OrderDetil Object. when without generating Orderdetails&#39; id it keeps Id as 0 for every OrderDetail objects.  this what #jbx explained. Yes it is the best answer. this one example how it happens.  ","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>I had this error few days a go and I sped too many time on fixing this error. </p>\n\n<pre><code> public boolean save(OrderHeader header) {\n    Session session = sessionFactory.openSession();\n\n\n    Transaction transaction = session.beginTransaction();\n\n    try {\n        session.save(header);\n\n        for (OrderDetail detail : header.getDetails()) {\n            session.save(detail);\n        }\n\n        transaction.commit();\n        session.close();\n\n        return true;\n    } catch (HibernateException exception) {\n\n        exception.printStackTrace();\n        transaction.rollback();\n        return false;\n    }\n}\n</code></pre>\n\n<p>Before i get this error , I didn't have mentioned ID generation type on the OrderDetil Object. when without generating Orderdetails' id it keeps Id as 0 for every OrderDetail objects.  this what #jbx explained. Yes it is the best answer. this one example how it happens.  </p>\n"},{"comments":[{"owner":{"account_id":9734520,"reputation":81,"user_id":8226543,"display_name":"andreshincapier"},"score":0,"creation_date":1697402604,"post_id":31898721,"comment_id":136272326,"body_markdown":"This works for me ` session.getDatabaseSession().merge(op)`  thank you.","body":"This works for me ` session.getDatabaseSession().merge(op)`  thank you."}],"tags":[],"owner":{"account_id":402206,"reputation":1256,"user_id":4136337,"accept_rate":40,"display_name":"0x4ndy"},"comment_count":1,"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1439068911,"creation_date":1439068911,"answer_id":31898721,"question_id":16246675,"body_markdown":"Just set cascade to MERGE, that should do the trick.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Just set cascade to MERGE, that should do the trick.</p>\n"},{"comments":[{"owner":{"account_id":13654645,"reputation":1102,"user_id":9851541,"display_name":"Swati Srivastava"},"score":1,"creation_date":1646697999,"post_id":41846442,"comment_id":126183772,"body_markdown":"After adding the @GeneratedValue annotation, you may need to increase the connection pool size. Also, GenerationType.IDENTITY worked for me, otherwise, it was throwing &quot;hibernate_sequence does not exist&quot;","body":"After adding the @GeneratedValue annotation, you may need to increase the connection pool size. Also, GenerationType.IDENTITY worked for me, otherwise, it was throwing &quot;hibernate_sequence does not exist&quot;"},{"owner":{"account_id":4546280,"reputation":1606,"user_id":3692788,"accept_rate":67,"display_name":"JCarlosR"},"score":0,"creation_date":1655096042,"post_id":41846442,"comment_id":128240335,"body_markdown":"Should I set any of these strategies if using an `@EmbeddedId`?","body":"Should I set any of these strategies if using an <code>@EmbeddedId</code>?"}],"tags":[],"owner":{"account_id":7644072,"reputation":287,"user_id":7427275,"display_name":"Ice Blue"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1562963895,"creation_date":1485332037,"answer_id":41846442,"question_id":16246675,"body_markdown":"I agree with @Hemant Kumar, thank you very much. According his solution, I solved my problem.\r\n\r\nFor example：\r\n  \r\n    @Test\r\n    public void testSavePerson() {\r\n        try (Session session = sessionFactory.openSession()) {\r\n            Transaction tx = session.beginTransaction();\r\n            Person person1 = new Person();\r\n            Person person2 = new Person();\r\n            person1.setName(&quot;222&quot;);\r\n            person2.setName(&quot;111&quot;);\r\n            session.save(person1);\r\n            session.save(person2);\r\n            tx.commit();\r\n        }\r\n    }\r\n\r\nPerson.java\r\n\r\n    public class Person {\r\n        private int id;\r\n        private String name;\r\n    \r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        public int getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;name&quot;)\r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n    }\r\n\r\n\r\nThis code always make mistake in my application:\r\n`A different object with the same identifier value was already associated with the session`, later I found out that I forgot\r\nto **autoincrease my primary key!** \r\n\r\nMy solution is to add this code on your primary key:\r\n\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>I agree with @Hemant Kumar, thank you very much. According his solution, I solved my problem.</p>\n\n<p>For example：</p>\n\n<pre><code>@Test\npublic void testSavePerson() {\n    try (Session session = sessionFactory.openSession()) {\n        Transaction tx = session.beginTransaction();\n        Person person1 = new Person();\n        Person person2 = new Person();\n        person1.setName(\"222\");\n        person2.setName(\"111\");\n        session.save(person1);\n        session.save(person2);\n        tx.commit();\n    }\n}\n</code></pre>\n\n<p>Person.java</p>\n\n<pre><code>public class Person {\n    private int id;\n    private String name;\n\n    @Id\n    @Column(name = \"id\")\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    @Basic\n    @Column(name = \"name\")\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p>This code always make mistake in my application:\n<code>A different object with the same identifier value was already associated with the session</code>, later I found out that I forgot\nto <strong>autoincrease my primary key!</strong> </p>\n\n<p>My solution is to add this code on your primary key:</p>\n\n<pre><code>@GeneratedValue(strategy = GenerationType.AUTO)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4609492,"reputation":139,"user_id":3738027,"accept_rate":50,"display_name":"juldeh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486712449,"creation_date":1486712449,"answer_id":42153978,"question_id":16246675,"body_markdown":"Try to place the code of your query before.\r\nThat fix my problem.\r\ne.g. change this:\r\n\r\n    query1 \r\n    query2 - get the error \r\n    update\r\n\r\nto this:\r\n\r\n    query2\r\n    query1\r\n    update","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Try to place the code of your query before.\nThat fix my problem.\ne.g. change this:</p>\n\n<pre><code>query1 \nquery2 - get the error \nupdate\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>query2\nquery1\nupdate\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10679943,"reputation":831,"user_id":7862350,"display_name":"Nguyen Vu Quang"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1492091509,"creation_date":1492091509,"answer_id":43394132,"question_id":16246675,"body_markdown":"Find the &quot;Cascade&quot; atribute in Hibernate and delete it. When you set &quot;Cascade&quot; available, it will call other operations (save, update and delete) on another entities which has relationship with related classes. So same identities value will be  happened. \r\nIt worked with me.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Find the \"Cascade\" atribute in Hibernate and delete it. When you set \"Cascade\" available, it will call other operations (save, update and delete) on another entities which has relationship with related classes. So same identities value will be  happened. \nIt worked with me.</p>\n"},{"tags":[],"owner":{"account_id":10661176,"reputation":1,"user_id":7849096,"display_name":"张云风"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513233661,"creation_date":1513232911,"answer_id":47807138,"question_id":16246675,"body_markdown":"I met the problem because of the primary key generation is wrong,when I insert a row like this:\r\n\r\n    public void addTerminal(String typeOfDevice,Map&lt;Byte,Integer&gt; map) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\ttry {\r\n    \t\t\tSet&lt;Byte&gt; keySet = map.keySet();\r\n    \t\t\tfor (Byte byte1 : keySet) {\r\n    \t\t\t\tDevice device=new Device();\r\n    \t\t\t\tdevice.setNumDevice(DeviceCount.map.get(byte1));\r\n    \t\t\t\tdevice.setTimestamp(System.currentTimeMillis());\r\n    \t\t\t\tdevice.setTypeDevice(byte1);\r\n    \t\t\t\tthis.getHibernateTemplate().save(device);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;hah&quot;);\r\n    \t\t}catch (Exception e) {\r\n    \t\t\t// TODO: handle exception\r\n    \t\t\tlogger.warn(&quot;wrong&quot;);\r\n    \t\t\tlogger.warn(e.getStackTrace()+e.getMessage());\r\n    \t\t}\r\n    }\r\n\r\nI change the id generator class to identity\r\n\r\n    &lt;id name=&quot;id&quot; type=&quot;int&quot;&gt;\r\n        &lt;column name=&quot;id&quot; /&gt;\r\n        &lt;generator class=&quot;identity&quot;  /&gt;\r\n     &lt;/id&gt;","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>I met the problem because of the primary key generation is wrong,when I insert a row like this:</p>\n\n<pre><code>public void addTerminal(String typeOfDevice,Map&lt;Byte,Integer&gt; map) {\n        // TODO Auto-generated method stub\n        try {\n            Set&lt;Byte&gt; keySet = map.keySet();\n            for (Byte byte1 : keySet) {\n                Device device=new Device();\n                device.setNumDevice(DeviceCount.map.get(byte1));\n                device.setTimestamp(System.currentTimeMillis());\n                device.setTypeDevice(byte1);\n                this.getHibernateTemplate().save(device);\n            }\n            System.out.println(\"hah\");\n        }catch (Exception e) {\n            // TODO: handle exception\n            logger.warn(\"wrong\");\n            logger.warn(e.getStackTrace()+e.getMessage());\n        }\n}\n</code></pre>\n\n<p>I change the id generator class to identity</p>\n\n<pre><code>&lt;id name=\"id\" type=\"int\"&gt;\n    &lt;column name=\"id\" /&gt;\n    &lt;generator class=\"identity\"  /&gt;\n &lt;/id&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8695701,"reputation":409,"user_id":6507129,"display_name":"shubhranshu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521464421,"creation_date":1521464421,"answer_id":49363634,"question_id":16246675,"body_markdown":"In my case only flush() did not work. I had to use a clear() after flush().\r\n\r\n    public Object merge(final Object detachedInstance)\r\n        {\r\n            this.getHibernateTemplate().flush();\r\n            this.getHibernateTemplate().clear();\r\n            try\r\n            {\r\n                this.getHibernateTemplate().evict(detachedInstance);\r\n            }\r\n    }\r\n\r\n","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>In my case only flush() did not work. I had to use a clear() after flush().</p>\n\n<pre><code>public Object merge(final Object detachedInstance)\n    {\n        this.getHibernateTemplate().flush();\n        this.getHibernateTemplate().clear();\n        try\n        {\n            this.getHibernateTemplate().evict(detachedInstance);\n        }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4803880,"reputation":2185,"user_id":4589003,"accept_rate":57,"display_name":"Sudip Bhandari"},"score":1,"creation_date":1552893898,"post_id":49444349,"comment_id":97167804,"body_markdown":"not the case with question as per description given","body":"not the case with question as per description given"}],"tags":[],"owner":{"account_id":6329781,"reputation":1049,"user_id":4915001,"display_name":"rex roy"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1521789596,"creation_date":1521789596,"answer_id":49444349,"question_id":16246675,"body_markdown":"This means you are trying to save multiple rows in your table with the reference to the same object.\r\n\r\ncheck your Entity Class&#39; id property.\r\n\r\n    @Id\r\n    private Integer id;\r\nto\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(unique = true, nullable = false)\r\n    private Integer id;","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>This means you are trying to save multiple rows in your table with the reference to the same object.</p>\n\n<p>check your Entity Class' id property.</p>\n\n<pre><code>@Id\nprivate Integer id;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(unique = true, nullable = false)\nprivate Integer id;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4296016,"reputation":407,"user_id":3511090,"display_name":"Jayen Chondigara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695367497,"creation_date":1542723260,"answer_id":53394945,"question_id":16246675,"body_markdown":"If you use `EntityRepository` then use `saveAndFlush` instead of `save`.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>If you use <code>EntityRepository</code> then use <code>saveAndFlush</code> instead of <code>save</code>.</p>\n"},{"tags":[],"owner":{"account_id":15840283,"reputation":1,"user_id":11428939,"display_name":"Aaron Byrnes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556569142,"creation_date":1556568728,"answer_id":55910186,"question_id":16246675,"body_markdown":"If left an expressions tab in my IDE open which was making a hibernate get call on the object causing this exception. I was trying to delete this same object. Also I had a breakpoint on the delete call which seems to be necessary to get this error to happen. Simply making another expressions tab to be the front tab or changing the setting so that the ide does not stop on breakpoints solved this problem.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>If left an expressions tab in my IDE open which was making a hibernate get call on the object causing this exception. I was trying to delete this same object. Also I had a breakpoint on the delete call which seems to be necessary to get this error to happen. Simply making another expressions tab to be the front tab or changing the setting so that the ide does not stop on breakpoints solved this problem.</p>\n"},{"tags":[],"owner":{"account_id":13406436,"reputation":2199,"user_id":9895452,"display_name":"Sandeep Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574154522,"creation_date":1574154198,"answer_id":58930164,"question_id":16246675,"body_markdown":"Make Sure, your entity have same Generation Type with all Mapped Entitys\r\n\r\nEx : UserRole \r\n\r\n    public class UserRole extends AbstractDomain {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    \r\n    private String longName;\r\n    \r\n    private String shortName;\r\n    \r\n    @Enumerated(EnumType.STRING)\r\n    private CommonStatus status;\r\n    \r\n    private String roleCode;\r\n    \r\n    private Long level;\r\n    \r\n    @Column(columnDefinition = &quot;integer default 0&quot;)\r\n    private Integer subRoleCount;\r\n    \r\n    private String modification;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private TypeOfUsers licenseType;\r\n    \r\n}\r\n\r\nModule : \r\n\r\n    public class Modules implements Serializable {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    \r\n    private String longName;\r\n    \r\n    private String shortName;\r\n    \r\n}\r\n\r\nMain Entity with Mapping\r\n\r\n    public class RoleModules implements Serializable{\r\n        \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\r\n    private UserRole role;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\r\n    private Modules modules;\r\n    \r\n    @Type(type = &quot;yes_no&quot;)\r\n    private boolean isPrimaryModule;\r\n\r\n    public boolean getIsPrimaryModule() {\r\n        return isPrimaryModule;\r\n    }\r\n}\r\n\r\n\r\n","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Make Sure, your entity have same Generation Type with all Mapped Entitys</p>\n\n<p>Ex : UserRole </p>\n\n<pre><code>public class UserRole extends AbstractDomain {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\nprivate String longName;\n\nprivate String shortName;\n\n@Enumerated(EnumType.STRING)\nprivate CommonStatus status;\n\nprivate String roleCode;\n\nprivate Long level;\n\n@Column(columnDefinition = \"integer default 0\")\nprivate Integer subRoleCount;\n\nprivate String modification;\n\n@ManyToOne(fetch = FetchType.LAZY)\nprivate TypeOfUsers licenseType;\n</code></pre>\n\n<p>}</p>\n\n<p>Module : </p>\n\n<pre><code>public class Modules implements Serializable {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\nprivate String longName;\n\nprivate String shortName;\n</code></pre>\n\n<p>}</p>\n\n<p>Main Entity with Mapping</p>\n\n<pre><code>public class RoleModules implements Serializable{\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\nprivate UserRole role;\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\nprivate Modules modules;\n\n@Type(type = \"yes_no\")\nprivate boolean isPrimaryModule;\n\npublic boolean getIsPrimaryModule() {\n    return isPrimaryModule;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":17564422,"reputation":1,"user_id":12741607,"display_name":"George Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579430661,"creation_date":1579430661,"answer_id":59809268,"question_id":16246675,"body_markdown":"In addition to all the previous answers, a possible fix to this problem in a large scale project, if your using a Value Object for your classes don&#39;t set the id attribute in the VO Transformer class.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>In addition to all the previous answers, a possible fix to this problem in a large scale project, if your using a Value Object for your classes don't set the id attribute in the VO Transformer class.</p>\n"},{"comments":[{"owner":{"account_id":2362245,"reputation":381,"user_id":2068694,"accept_rate":20,"display_name":"Ditscheridou"},"score":0,"creation_date":1624281661,"post_id":60389154,"comment_id":120308310,"body_markdown":"DONT use this approach. a commit should be done after you finished your whole work, since the transaction handling is very expensive.","body":"DONT use this approach. a commit should be done after you finished your whole work, since the transaction handling is very expensive."}],"tags":[],"owner":{"account_id":14668216,"reputation":47,"user_id":10593431,"display_name":"Mahdi"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1582630997,"creation_date":1582614370,"answer_id":60389154,"question_id":16246675,"body_markdown":"just commit current transaction. &lt;/br&gt;\r\n\r\n    currentSession.getTransaction().commit();\r\n\r\n&lt;/br&gt;\r\nnow you can begin another Transaction and do anything on entity","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>just commit current transaction. </p>\n\n<pre><code>currentSession.getTransaction().commit();\n</code></pre>\n\n<p>\nnow you can begin another Transaction and do anything on entity</p>\n"},{"comments":[{"owner":{"account_id":8384414,"reputation":1048,"user_id":6295272,"display_name":"D.Tomov"},"score":0,"creation_date":1635367150,"post_id":64264730,"comment_id":123282335,"body_markdown":"Had this problem, adding allocationSize = 1 , fixed it because the sequence generator in db was defined with increment of 1 and hibernate&#39;s allocationSize default is 50 (for some weird reason).","body":"Had this problem, adding allocationSize = 1 , fixed it because the sequence generator in db was defined with increment of 1 and hibernate&#39;s allocationSize default is 50 (for some weird reason)."}],"tags":[],"owner":{"account_id":52873,"reputation":2689,"user_id":158037,"display_name":"user158037"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1602167391,"creation_date":1602167391,"answer_id":64264730,"question_id":16246675,"body_markdown":"Another case when same error message can by generated, custom `allocationSize`:\r\n\r\n    @Id\r\n    @Column(name = &quot;idpar&quot;)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;paramsSequence&quot;)\r\n    @SequenceGenerator(name = &quot;paramsSequence&quot;, sequenceName = &quot;par_idpar_seq&quot;, allocationSize = 20)\r\n    private Long id;\r\n\r\nwithout matching\r\n\r\n    alter sequence par_idpar_seq increment 20;\r\n\r\ncan cause constraint validation during insert(that one is easy to understand) or ths &quot;a different object with the same identifier value was already associated with the session&quot; - this case was less obvious.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Another case when same error message can by generated, custom <code>allocationSize</code>:</p>\n<pre><code>@Id\n@Column(name = &quot;idpar&quot;)\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;paramsSequence&quot;)\n@SequenceGenerator(name = &quot;paramsSequence&quot;, sequenceName = &quot;par_idpar_seq&quot;, allocationSize = 20)\nprivate Long id;\n</code></pre>\n<p>without matching</p>\n<pre><code>alter sequence par_idpar_seq increment 20;\n</code></pre>\n<p>can cause constraint validation during insert(that one is easy to understand) or ths &quot;a different object with the same identifier value was already associated with the session&quot; - this case was less obvious.</p>\n"},{"tags":[],"owner":{"account_id":13580955,"reputation":3,"user_id":9796970,"display_name":"Pradeepa Mendis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628111627,"creation_date":1628111627,"answer_id":68658097,"question_id":16246675,"body_markdown":"The reason for this issue is you have have different copies of objects referring into same raw in your child table, so spring trying to treat your object as new object but while saving it identifies there is a raw with same primary key. So it gives above error.\r\n\r\nBest solution for this issue is to load the whole object (parent entity with child entities) from DB (you already know the primary key of parent object), then update values in the object loaded from DB from your new object(which you were trying to save) and then save the object you loaded from the DB which has new values.\r\n\r\nThis will update your values in the DB without giving above error.\r\n\r\nPS- Do not need to update ids as they already exist in object loaded from DB, update only the values need to be changed ","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>The reason for this issue is you have have different copies of objects referring into same raw in your child table, so spring trying to treat your object as new object but while saving it identifies there is a raw with same primary key. So it gives above error.</p>\n<p>Best solution for this issue is to load the whole object (parent entity with child entities) from DB (you already know the primary key of parent object), then update values in the object loaded from DB from your new object(which you were trying to save) and then save the object you loaded from the DB which has new values.</p>\n<p>This will update your values in the DB without giving above error.</p>\n<p>PS- Do not need to update ids as they already exist in object loaded from DB, update only the values need to be changed</p>\n"},{"tags":[],"owner":{"account_id":1734438,"reputation":36275,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640252570,"creation_date":1640252570,"answer_id":70460246,"question_id":16246675,"body_markdown":"Another way to solve this if you are using spring data:\r\n\r\n- replace calls to `entityManager.persist()` with calls to `repository.save()`, and\r\n- replace calls to `entityManager.query().getResultList()` etc with calls to `repository.findBy...`\r\n\r\nThis way, spring data keeps track of the objects. It enables multiple get and persist  calls.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Another way to solve this if you are using spring data:</p>\n<ul>\n<li>replace calls to <code>entityManager.persist()</code> with calls to <code>repository.save()</code>, and</li>\n<li>replace calls to <code>entityManager.query().getResultList()</code> etc with calls to <code>repository.findBy...</code></li>\n</ul>\n<p>This way, spring data keeps track of the objects. It enables multiple get and persist  calls.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1643815443,"post_id":70953701,"comment_id":125440191,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70953701/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":22721239,"reputation":1,"user_id":16885722,"display_name":"Asharudheen Mt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695367516,"creation_date":1643796467,"answer_id":70953701,"question_id":16246675,"body_markdown":"instead of just `@Id`\r\ntry \r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n\r\nit worked for me\r\n\r\n","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>instead of just <code>@Id</code>\ntry</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\n</code></pre>\n<p>it worked for me</p>\n"},{"tags":[],"owner":{"account_id":4195407,"reputation":456,"user_id":3436941,"accept_rate":75,"display_name":"Khasan 24-7"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645077797,"creation_date":1645077797,"answer_id":71153182,"question_id":16246675,"body_markdown":"In my case, I had OneToOne relationship and after saving one row with a foreign key, attempt to save another row with the same foreign key throw the same exception. It means that requirement was not OneToOne relationship, but should be ManyToOne. So I have changed it to ManyToOne and it started working.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>In my case, I had OneToOne relationship and after saving one row with a foreign key, attempt to save another row with the same foreign key throw the same exception. It means that requirement was not OneToOne relationship, but should be ManyToOne. So I have changed it to ManyToOne and it started working.</p>\n"},{"tags":[],"owner":{"account_id":20833834,"reputation":1,"user_id":15795723,"display_name":"Blas Albir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647283021,"creation_date":1647283021,"answer_id":71472673,"question_id":16246675,"body_markdown":"This error commonly occurs because you are violating a column of unique type or primary key when trying to insert repeated data.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>This error commonly occurs because you are violating a column of unique type or primary key when trying to insert repeated data.</p>\n"},{"tags":[],"owner":{"account_id":19503564,"reputation":311,"user_id":14269062,"display_name":"Ritunjay kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653297949,"creation_date":1653297949,"answer_id":72346175,"question_id":16246675,"body_markdown":"make sure primary key is different for every entity.\r\n&gt; primary key must be unique","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>make sure primary key is different for every entity.</p>\n<blockquote>\n<p>primary key must be unique</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7661721,"reputation":545,"user_id":5806811,"accept_rate":50,"display_name":"Sultan Zhumatayev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680266019,"creation_date":1680266019,"answer_id":75898577,"question_id":16246675,"body_markdown":"Faced this error too.\r\nIn my case problem was in row which has somehow zero id.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Faced this error too.\nIn my case problem was in row which has somehow zero id.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1684491007,"post_id":76284900,"comment_id":134528439,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76284900/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":10460859,"reputation":1,"user_id":7711645,"display_name":"Lobots"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684449316,"creation_date":1684449316,"answer_id":76284900,"question_id":16246675,"body_markdown":"not using saveorupdate, as the experts say, is an aberration, using save and update or delete separately for Hibernate 5, for 6, this function is no longer used flush an clear","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>not using saveorupdate, as the experts say, is an aberration, using save and update or delete separately for Hibernate 5, for 6, this function is no longer used flush an clear</p>\n"},{"tags":[],"owner":{"account_id":3098417,"reputation":1074,"user_id":2623162,"accept_rate":67,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686319905,"creation_date":1686317754,"answer_id":76440802,"question_id":16246675,"body_markdown":"I had this same error with JPA repository.\r\n\r\nThe save operation returns a completely different instance. Use that one.\r\n\r\nIn JPA repository, the javadoc of `CrudRepository.save()` operation states:\r\n\r\n&gt; Use the returned instance for further operations as the save operation\r\n&gt; might have changed the entity instance completely.\r\n\r\nSo, instead of:\r\n    \r\n    repository.save(fooEntity);\r\n    buzEntity.setFoo(fooEntity);\r\n\r\nUse the returned instance which is the one that is now merged into the EntityManager, for further operations:\r\n\r\n    Foo mergedFooEntity = repository.save(fooEntity);\r\n    buzEntity.setFoo(mergedFooEntity);\r\n","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>I had this same error with JPA repository.</p>\n<p>The save operation returns a completely different instance. Use that one.</p>\n<p>In JPA repository, the javadoc of <code>CrudRepository.save()</code> operation states:</p>\n<blockquote>\n<p>Use the returned instance for further operations as the save operation\nmight have changed the entity instance completely.</p>\n</blockquote>\n<p>So, instead of:</p>\n<pre><code>repository.save(fooEntity);\nbuzEntity.setFoo(fooEntity);\n</code></pre>\n<p>Use the returned instance which is the one that is now merged into the EntityManager, for further operations:</p>\n<pre><code>Foo mergedFooEntity = repository.save(fooEntity);\nbuzEntity.setFoo(mergedFooEntity);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21662503,"reputation":69,"user_id":15981431,"display_name":"Jonathan Mark Mwigo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686376605,"creation_date":1686376605,"answer_id":76444923,"question_id":16246675,"body_markdown":"Faced the same error, In my case B has a bi~directional one-to-many relationship with A and a `Cascade.ALL`.&lt;br /&gt;\r\nThe cause of this error in my case was me trying to insert B(I update A which auto saves B due to `Cascade.ALL`) to an existing row.&lt;br /&gt;\r\nTo solve this I had to check if B was updated then relate it to A and update or else don&#39;t relate B to A then update(Add an if condition to do the checks). This solve the issue in my case.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>Faced the same error, In my case B has a bi~directional one-to-many relationship with A and a <code>Cascade.ALL</code>.<br />\nThe cause of this error in my case was me trying to insert B(I update A which auto saves B due to <code>Cascade.ALL</code>) to an existing row.<br />\nTo solve this I had to check if B was updated then relate it to A and update or else don't relate B to A then update(Add an if condition to do the checks). This solve the issue in my case.</p>\n"}],"owner":{"account_id":1697926,"reputation":1471,"user_id":1558877,"accept_rate":88,"display_name":"John"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":410915,"favorite_count":0,"down_vote_count":1,"up_vote_count":124,"accepted_answer_id":16246858,"answer_count":31,"score":123,"last_activity_date":1695367516,"creation_date":1367019335,"question_id":16246675,"body_markdown":"I essentially have some objects in this configuration (the real data model is a bit more complex):\r\n\r\n - A has a many-to-many relationship with B. (B has `inverse=&quot;true&quot;`)\r\n - B has a many-to-one relationship with C. (I have `cascade` set to `&quot;save-update&quot;`)\r\n - C is a kind of type/category table.\r\n\r\nAlso, I should probably mention that the primary keys are generated by the database on save.\r\n\r\nWith my data, I sometimes run into problems where A has a set of different B objects, and these B objects refer to the same C object.\r\n\r\nWhen I call `session.saveOrUpdate(myAObject)`, I get a hibernate error saying: `&quot;a different object with the same identifier value was already associated with the session: C&quot;`. I know that hibernate can&#39;t insert/update/delete the same object twice in the same session, but is there some way around this? This doesn&#39;t seem like it would be that uncommon of a situation.\r\n\r\nDuring my research of this problem, I have seen folks suggest the use of `session.merge()`, but when I do that, any &quot;conflicting&quot; objects get inserted into the database as blank objects with all values set to null. Clearly that isn&#39;t what we want.\r\n\r\n[Edit] Another thing I forgot to mention is that (for architectural reasons beyond my control), each read or write needs to be done in a separate session.","title":"Hibernate Error: a different object with the same identifier value was already associated with the session","body":"<p>I essentially have some objects in this configuration (the real data model is a bit more complex):</p>\n\n<ul>\n<li>A has a many-to-many relationship with B. (B has <code>inverse=\"true\"</code>)</li>\n<li>B has a many-to-one relationship with C. (I have <code>cascade</code> set to <code>\"save-update\"</code>)</li>\n<li>C is a kind of type/category table.</li>\n</ul>\n\n<p>Also, I should probably mention that the primary keys are generated by the database on save.</p>\n\n<p>With my data, I sometimes run into problems where A has a set of different B objects, and these B objects refer to the same C object.</p>\n\n<p>When I call <code>session.saveOrUpdate(myAObject)</code>, I get a hibernate error saying: <code>\"a different object with the same identifier value was already associated with the session: C\"</code>. I know that hibernate can't insert/update/delete the same object twice in the same session, but is there some way around this? This doesn't seem like it would be that uncommon of a situation.</p>\n\n<p>During my research of this problem, I have seen folks suggest the use of <code>session.merge()</code>, but when I do that, any \"conflicting\" objects get inserted into the database as blank objects with all values set to null. Clearly that isn't what we want.</p>\n\n<p>[Edit] Another thing I forgot to mention is that (for architectural reasons beyond my control), each read or write needs to be done in a separate session.</p>\n"},{"tags":["java","android","flutter","dart","nfc"],"owner":{"account_id":18582630,"reputation":61,"user_id":13541808,"display_name":"BatoulAlani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695367428,"creation_date":1675843253,"question_id":75382798,"body_markdown":"I am trying to use NFC Manager Plugin in my flutter app when I used Lock Nfc Function using these functions:\r\n\r\n*Handle Tag Function for locking card:*\r\n[![Handle Tag Function for locking card][1]][1]\r\n\r\n*Start session to use handle tag function:*\r\n\r\n[![Start session to use handle tag function][2]][2]\r\n\r\n\r\n[![using start session on screen][3]][3]\r\n\r\nBut on some android devices which have Android 13, when we try to use the lock function we face an error :\r\n[![enter image description here][4]][4]\r\n\r\nand we can&#39;t turn off The Nfc on the device until about 1 minute, then this error is shown:\r\n\r\n[![enter image description here][5]][5]\r\n\r\nalso, we try to use the example project on the plugin but it has the same problem.\r\n\r\nFlutter Doctor:\r\n[![Flutter doctor][6]][6]\r\n\r\nwe are still on this error trying to fix the issue, any solutions to fix this issue?\r\n\r\n  [1]: https://i.stack.imgur.com/2IAH3.png\r\n  [2]: https://i.stack.imgur.com/3btQe.png\r\n  [3]: https://i.stack.imgur.com/e4Pag.png\r\n  [4]: https://i.stack.imgur.com/MKDtf.jpg\r\n  [5]: https://i.stack.imgur.com/O5ntY.jpg\r\n  [6]: https://i.stack.imgur.com/0gkF1.jpg","title":"Wrote stack traces to tombstoned on Android 13 using NFC Manager plugin in flutter app","body":"<p>I am trying to use NFC Manager Plugin in my flutter app when I used Lock Nfc Function using these functions:</p>\n<p><em>Handle Tag Function for locking card:</em>\n<a href=\"https://i.stack.imgur.com/2IAH3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2IAH3.png\" alt=\"Handle Tag Function for locking card\" /></a></p>\n<p><em>Start session to use handle tag function:</em></p>\n<p><a href=\"https://i.stack.imgur.com/3btQe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3btQe.png\" alt=\"Start session to use handle tag function\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/e4Pag.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e4Pag.png\" alt=\"using start session on screen\" /></a></p>\n<p>But on some android devices which have Android 13, when we try to use the lock function we face an error :\n<a href=\"https://i.stack.imgur.com/MKDtf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MKDtf.jpg\" alt=\"enter image description here\" /></a></p>\n<p>and we can't turn off The Nfc on the device until about 1 minute, then this error is shown:</p>\n<p><a href=\"https://i.stack.imgur.com/O5ntY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O5ntY.jpg\" alt=\"enter image description here\" /></a></p>\n<p>also, we try to use the example project on the plugin but it has the same problem.</p>\n<p>Flutter Doctor:\n<a href=\"https://i.stack.imgur.com/0gkF1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0gkF1.jpg\" alt=\"Flutter doctor\" /></a></p>\n<p>we are still on this error trying to fix the issue, any solutions to fix this issue?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":8616011,"reputation":2950,"user_id":6452829,"display_name":"Mario Santini"},"score":0,"creation_date":1695122637,"post_id":77133878,"comment_id":135979139,"body_markdown":"I found some documentation by Maven: https://maven.apache.org/plugins/maven-jar-plugin/examples/create-test-jar.html","body":"I found some documentation by Maven: <a href=\"https://maven.apache.org/plugins/maven-jar-plugin/examples/create-test-jar.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-jar-plugin/examples/&hellip;</a>"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1695123287,"post_id":77133878,"comment_id":135979248,"body_markdown":"What is this for? Tests in `src/test/java` are meant to be run during the build. There is no need to package them into a JAR.","body":"What is this for? Tests in <code>src&#47;test&#47;java</code> are meant to be run during the build. There is no need to package them into a JAR."},{"owner":{"account_id":1712713,"reputation":223,"user_id":1570402,"accept_rate":44,"display_name":"Anand Murugan"},"score":0,"creation_date":1695123707,"post_id":77133878,"comment_id":135979327,"body_markdown":"This is some specific requirement to create the jar and run in on some different environment, because in that particular environment we can&#39;t build and bundle the jars.. so our aim is to create this jar as a executable one..","body":"This is some specific requirement to create the jar and run in on some different environment, because in that particular environment we can&#39;t build and bundle the jars.. so our aim is to create this jar as a executable one.."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1695131516,"post_id":77133878,"comment_id":135980994,"body_markdown":"Do you want to create a test jar for some testing purposes?","body":"Do you want to create a test jar for some testing purposes?"},{"owner":{"account_id":1712713,"reputation":223,"user_id":1570402,"accept_rate":44,"display_name":"Anand Murugan"},"score":0,"creation_date":1695142062,"post_id":77133878,"comment_id":135983304,"body_markdown":"Yes Maksim.. As said already this jar will be running in some different env.. Creating jars in diff env, push it another and run there..","body":"Yes Maksim.. As said already this jar will be running in some different env.. Creating jars in diff env, push it another and run there.."}],"answers":[{"tags":[],"owner":{"account_id":18182,"reputation":33673,"user_id":41423,"accept_rate":100,"display_name":"Nick Holt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695123832,"creation_date":1695123832,"answer_id":77134261,"question_id":77133878,"body_markdown":"See [skipIfEmpty][1] configuration for the `maven-jar-plugin`.\r\n\r\nYou need something like:\r\n\r\n```\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n  &lt;configuration&gt;\r\n    &lt;skipIfEmpty&gt;true&lt;/skipIfEmpty&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;test-jar&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nAnd you should stick to the default jar naming (remove the `finalName` from the configuration shown in your question) - messing with the jar names can have unexpected consequences.\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#skipIfEmpty","title":"How to build the jar for the project having only test classes using maven build","body":"<p>See <a href=\"https://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#skipIfEmpty\" rel=\"nofollow noreferrer\">skipIfEmpty</a> configuration for the <code>maven-jar-plugin</code>.</p>\n<p>You need something like:</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;skipIfEmpty&gt;true&lt;/skipIfEmpty&gt;\n  &lt;/configuration&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;test-jar&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>And you should stick to the default jar naming (remove the <code>finalName</code> from the configuration shown in your question) - messing with the jar names can have unexpected consequences.</p>\n"},{"tags":[],"owner":{"account_id":1712713,"reputation":223,"user_id":1570402,"accept_rate":44,"display_name":"Anand Murugan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695366891,"creation_date":1695366891,"answer_id":77155536,"question_id":77133878,"body_markdown":"The issue is solved by creating an assembly.xml and adding maven-assembly-plugin in the pom.xml. Now the jar is created with all the test classes along with the dependency classes too. \r\n\r\n    &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.6.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;descriptors&gt;src/main/assembly/assembly.xml&lt;/descriptors&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;make-assembly&lt;/id&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;single&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;archive&gt;\r\n                                    &lt;manifest&gt;\r\n                                        &lt;mainClass&gt;mainclassName&lt;/mainClass&gt;\r\n                                    &lt;/manifest&gt;\r\n                                &lt;/archive&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n\r\n","title":"How to build the jar for the project having only test classes using maven build","body":"<p>The issue is solved by creating an assembly.xml and adding maven-assembly-plugin in the pom.xml. Now the jar is created with all the test classes along with the dependency classes too.</p>\n<pre><code>&lt;plugin&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;descriptors&gt;src/main/assembly/assembly.xml&lt;/descriptors&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;archive&gt;\n                                &lt;manifest&gt;\n                                    &lt;mainClass&gt;mainclassName&lt;/mainClass&gt;\n                                &lt;/manifest&gt;\n                            &lt;/archive&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":1712713,"reputation":223,"user_id":1570402,"accept_rate":44,"display_name":"Anand Murugan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695366891,"creation_date":1695120436,"question_id":77133878,"body_markdown":"My Project is having only test classes inside src/test/java (No src/main/java folder). I want to build the project using maven and create the jar &lt;jarname&gt;-1.0.0-SNAPSHOT.jar file including all the classes.\r\nI am using the following pom.xml \r\n\r\n**pom.xml**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;11&lt;/source&gt;\r\n                        &lt;target&gt;11&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.0&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;test-jar&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;finalName&gt;jarName&lt;/finalName&gt;&lt;!-- Name of the resulting JAR file --&gt;\r\n                                &lt;archive&gt;\r\n                                    &lt;manifest&gt;\r\n                                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                                        &lt;mainClass&gt;ClassNameWithPackageStructure&lt;/mainClass&gt;\r\n                                    &lt;/manifest&gt;\r\n                                &lt;/archive&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;GroupPackage&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xxxxxxxxx&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;artifactId&gt;integration-tests&lt;/artifactId&gt;\r\n    \r\n        &lt;properties&gt;\r\n    \t\t........\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n    \t\t..........\r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nI am using maven package command and the build is success, but inside target folder, two jars (***jarName-tests.jar*** and ***jarName-1.0.0.SNAPSHOT.jar***) are generated with warning ***JAR will be empty - no content was marked for inclusion!***. When I checked the jars, ***jarName-tests.jar*** has the compiled classes inside and ***jarName-1.0.0.SNAPSHOT.jar*** not having the compiled classes. But my goal is to generate the ***jarName-1.0.0.SNAPSHOT.jar*** including all the classes.\r\n\r\nPlease correct me what I am doing wrong to get the proper jar.\r\n\r\n","title":"How to build the jar for the project having only test classes using maven build","body":"<p>My Project is having only test classes inside src/test/java (No src/main/java folder). I want to build the project using maven and create the jar -1.0.0-SNAPSHOT.jar file including all the classes.\nI am using the following pom.xml</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-jar&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;finalName&gt;jarName&lt;/finalName&gt;&lt;!-- Name of the resulting JAR file --&gt;\n                            &lt;archive&gt;\n                                &lt;manifest&gt;\n                                    &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                                    &lt;mainClass&gt;ClassNameWithPackageStructure&lt;/mainClass&gt;\n                                &lt;/manifest&gt;\n                            &lt;/archive&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;GroupPackage&lt;/groupId&gt;\n        &lt;artifactId&gt;xxxxxxxxx&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;integration-tests&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        ........\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        ..........\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I am using maven package command and the build is success, but inside target folder, two jars (<em><strong>jarName-tests.jar</strong></em> and <em><strong>jarName-1.0.0.SNAPSHOT.jar</strong></em>) are generated with warning <em><strong>JAR will be empty - no content was marked for inclusion!</strong></em>. When I checked the jars, <em><strong>jarName-tests.jar</strong></em> has the compiled classes inside and <em><strong>jarName-1.0.0.SNAPSHOT.jar</strong></em> not having the compiled classes. But my goal is to generate the <em><strong>jarName-1.0.0.SNAPSHOT.jar</strong></em> including all the classes.</p>\n<p>Please correct me what I am doing wrong to get the proper jar.</p>\n"},{"tags":["java","spring-boot","reactive","server-sent-events","flux"],"owner":{"account_id":14207449,"reputation":309,"user_id":10263578,"display_name":"Thomas P&#246;tzsch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695366849,"creation_date":1695366849,"question_id":77155530,"body_markdown":"I want to achieve the following:\r\n\r\n * Provide an endpoint &quot;/sse/bus&quot; that my frontend can use to subscribe to server sent events\r\n * Publish useful events to all subscribers\r\n * Subscribers only get the latest events, only the ones that were published _after_ they subscribed\r\n\r\nI created the following Flux sink:\r\n\r\n```java\r\nimport java.util.concurrent.BlockingQueue;\r\nimport java.util.concurrent.Executor;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport java.util.concurrent.TimeUnit;\r\nimport java.util.function.Consumer;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.context.event.EventListener;\r\nimport org.springframework.stereotype.Service;\r\nimport reactor.core.publisher.FluxSink;\r\n\r\n@Service\r\npublic class FEBus implements Consumer&lt;FluxSink&lt;FEMessage&gt;&gt; {\r\n\r\n  private final Executor executor;\r\n  private final BlockingQueue&lt;FEMessage&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n\r\n  FEBus(@Qualifier(&quot;applicationTaskExecutor&quot;) Executor executor) {\r\n    this.executor = executor;\r\n  }\r\n\r\n  @EventListener\r\n  public void on(FEMessage message) {\r\n    try {\r\n      this.queue.offer(message, 3, TimeUnit.SECONDS);\r\n    } catch (InterruptedException e) {\r\n      throw new IllegalStateException(&quot;Unable to offer the message to the FEBus: %s&quot;.formatted(e));\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public void accept(FluxSink&lt;FEMessage&gt; sink) {\r\n\r\n    this.executor.execute(() -&gt; {\r\n      while (true) {\r\n        try {\r\n          final var message = queue.take();\r\n          sink.next(message);\r\n        } catch (InterruptedException e) {\r\n          throw new IllegalStateException(\r\n              &quot;Unable to take a message from the FEBus: %s&quot;.formatted(e));\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n```\r\n\r\nand a controller for the frontend:\r\n\r\n```java\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport reactor.core.publisher.Flux;\r\n\r\n@Controller\r\npublic class FEBusController {\r\n\r\n  private final Flux&lt;FEMessage&gt; notifications;\r\n\r\n  public FEBusController(FEBus febus) {\r\n    this.notifications = Flux.create(febus).share();\r\n    // this.notifications.subscribe().dispose();\r\n\r\n  }\r\n\r\n  @GetMapping(path = &quot;/sse/bus&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)\r\n  public Flux&lt;FEMessage&gt; streamNotifications() {\r\n    return notifications;\r\n  }\r\n\r\n}\r\n```\r\n\r\nMy frontend can successfully subscribe and receives all events, nearly everything works as expected, however:\r\n\r\nUntil the first subscriber subscribes via the endpoint, the data is cached. The moment the first frontend subscribes, he receives all messages that built up until that moment.\r\n\r\nI am aware that [the documentation states][1] &quot;Nothing Happens Until You subscribe()&quot; -- this is confirmed by uncommenting l.13 in the controller.\r\n\r\nBut it is not clear to me\r\n* how/where the data is cached?\r\n* how to circumvent the behaviour correctly?\r\n\r\nAgain, the goal is to provide the events that occur _after_ the frontend subscribes and ignore all that happened before that.\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/reference/index.html#reactive.subscribe","title":"Flux seems to cache until the first SSE subscriber","body":"<p>I want to achieve the following:</p>\n<ul>\n<li>Provide an endpoint &quot;/sse/bus&quot; that my frontend can use to subscribe to server sent events</li>\n<li>Publish useful events to all subscribers</li>\n<li>Subscribers only get the latest events, only the ones that were published <em>after</em> they subscribed</li>\n</ul>\n<p>I created the following Flux sink:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.Executor;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.TimeUnit;\nimport java.util.function.Consumer;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.context.event.EventListener;\nimport org.springframework.stereotype.Service;\nimport reactor.core.publisher.FluxSink;\n\n@Service\npublic class FEBus implements Consumer&lt;FluxSink&lt;FEMessage&gt;&gt; {\n\n  private final Executor executor;\n  private final BlockingQueue&lt;FEMessage&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n\n  FEBus(@Qualifier(&quot;applicationTaskExecutor&quot;) Executor executor) {\n    this.executor = executor;\n  }\n\n  @EventListener\n  public void on(FEMessage message) {\n    try {\n      this.queue.offer(message, 3, TimeUnit.SECONDS);\n    } catch (InterruptedException e) {\n      throw new IllegalStateException(&quot;Unable to offer the message to the FEBus: %s&quot;.formatted(e));\n    }\n  }\n\n  @Override\n  public void accept(FluxSink&lt;FEMessage&gt; sink) {\n\n    this.executor.execute(() -&gt; {\n      while (true) {\n        try {\n          final var message = queue.take();\n          sink.next(message);\n        } catch (InterruptedException e) {\n          throw new IllegalStateException(\n              &quot;Unable to take a message from the FEBus: %s&quot;.formatted(e));\n        }\n      }\n    });\n  }\n}\n</code></pre>\n<p>and a controller for the frontend:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.http.MediaType;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport reactor.core.publisher.Flux;\n\n@Controller\npublic class FEBusController {\n\n  private final Flux&lt;FEMessage&gt; notifications;\n\n  public FEBusController(FEBus febus) {\n    this.notifications = Flux.create(febus).share();\n    // this.notifications.subscribe().dispose();\n\n  }\n\n  @GetMapping(path = &quot;/sse/bus&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)\n  public Flux&lt;FEMessage&gt; streamNotifications() {\n    return notifications;\n  }\n\n}\n</code></pre>\n<p>My frontend can successfully subscribe and receives all events, nearly everything works as expected, however:</p>\n<p>Until the first subscriber subscribes via the endpoint, the data is cached. The moment the first frontend subscribes, he receives all messages that built up until that moment.</p>\n<p>I am aware that <a href=\"https://projectreactor.io/docs/core/release/reference/index.html#reactive.subscribe\" rel=\"nofollow noreferrer\">the documentation states</a> &quot;Nothing Happens Until You subscribe()&quot; -- this is confirmed by uncommenting l.13 in the controller.</p>\n<p>But it is not clear to me</p>\n<ul>\n<li>how/where the data is cached?</li>\n<li>how to circumvent the behaviour correctly?</li>\n</ul>\n<p>Again, the goal is to provide the events that occur <em>after</em> the frontend subscribes and ignore all that happened before that.</p>\n"},{"tags":["java","spring","spring-boot","micrometer","spring-micrometer"],"comments":[{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695019685,"post_id":77100008,"comment_id":135962774,"body_markdown":"Does your app use spring-boot?","body":"Does your app use spring-boot?"},{"owner":{"account_id":2519985,"reputation":3670,"user_id":2190546,"accept_rate":83,"display_name":"J Freebird"},"score":1,"creation_date":1695032053,"post_id":77100008,"comment_id":135965088,"body_markdown":"@AnishB. Yes, it&#39;s a spring boot app.","body":"@AnishB. Yes, it&#39;s a spring boot app."},{"owner":{"account_id":22562332,"reputation":582,"user_id":16749821,"display_name":"Hans-Christian"},"score":0,"creation_date":1695121895,"post_id":77100008,"comment_id":135978999,"body_markdown":"I would say the first option since Micrometer has a Map of all the Meters. The register method will either create a new Gauge or return an existing one if the combination of the name and tags already was used.\n(see the JavaDoc on the register method for more details)\n\nInstead of using the Gauge builder directly, you can use the gauge method on the registry\n\nExample:\nmeterRegistry.gauge(&quot;withdraw.cycle&quot;, \n    Tags.of(&quot;currency&quot;, currency),\n    minutes);","body":"I would say the first option since Micrometer has a Map of all the Meters. The register method will either create a new Gauge or return an existing one if the combination of the name and tags already was used. (see the JavaDoc on the register method for more details)  Instead of using the Gauge builder directly, you can use the gauge method on the registry  Example: meterRegistry.gauge(&quot;withdraw.cycle&quot;,      Tags.of(&quot;currency&quot;, currency),     minutes);"}],"answers":[{"comments":[{"owner":{"account_id":2519985,"reputation":3670,"user_id":2190546,"accept_rate":83,"display_name":"J Freebird"},"score":0,"creation_date":1695125806,"post_id":77134255,"comment_id":135979708,"body_markdown":"How about the first one?  Keeping a reference in my own code is not the cleanest way.  I&#39;ll need multiple maps if I have more gauge metrics.","body":"How about the first one?  Keeping a reference in my own code is not the cleanest way.  I&#39;ll need multiple maps if I have more gauge metrics."},{"owner":{"account_id":4470098,"reputation":284,"user_id":3636639,"display_name":"silh"},"score":0,"creation_date":1695126989,"post_id":77134255,"comment_id":135979991,"body_markdown":"@JFreebird that won&#39;t work. You can check using the following code sample:\n```\n    SimpleMeterRegistry meterRegistry = new SimpleMeterRegistry();\n    Tags tags = Tags.of(&quot;currency&quot;, &quot;a&quot;);\n    Gauge.builder(&quot;withdraw.cycle&quot;,() -&gt; 10)\n      .tags(tags)\n      .strongReference(true)\n      .register(meterRegistry);\n    System.out.println(meterRegistry.getMetersAsString());\n    Gauge.builder(&quot;withdraw.cycle&quot;,() -&gt; 20)\n      .tags(tags)\n      .strongReference(true)\n      .register(meterRegistry);\n    System.out.println(meterRegistry.getMetersAsString());\n```\nIt would print &quot;...10.0&quot;","body":"@JFreebird that won&#39;t work. You can check using the following code sample: ```     SimpleMeterRegistry meterRegistry = new SimpleMeterRegistry();     Tags tags = Tags.of(&quot;currency&quot;, &quot;a&quot;);     Gauge.builder(&quot;withdraw.cycle&quot;,() -&gt; 10)       .tags(tags)       .strongReference(true)       .register(meterRegistry);     System.out.println(meterRegistry.getMetersAsString());     Gauge.builder(&quot;withdraw.cycle&quot;,() -&gt; 20)       .tags(tags)       .strongReference(true)       .register(meterRegistry);     System.out.println(meterRegistry.getMetersAsString()); ``` It would print &quot;...10.0&quot;"},{"owner":{"account_id":4470098,"reputation":284,"user_id":3636639,"display_name":"silh"},"score":1,"creation_date":1695127152,"post_id":77134255,"comment_id":135980022,"body_markdown":"@JFreebird and the reason is `register` won&#39;t create a new gauge if one already exists with that combination of tags (and other properties). And it won&#39;t reassign a supplier for an existing gouge.","body":"@JFreebird and the reason is <code>register</code> won&#39;t create a new gauge if one already exists with that combination of tags (and other properties). And it won&#39;t reassign a supplier for an existing gouge."},{"owner":{"account_id":2519985,"reputation":3670,"user_id":2190546,"accept_rate":83,"display_name":"J Freebird"},"score":1,"creation_date":1695229324,"post_id":77134255,"comment_id":135997717,"body_markdown":"I think Anish B&#39;s second example seems to be simpler. It doesn&#39;t require map computations. The gauge can directly get values from the map, and I can just use Integer/Long classes etc. as map entries instead of the Atomic classes.","body":"I think Anish B&#39;s second example seems to be simpler. It doesn&#39;t require map computations. The gauge can directly get values from the map, and I can just use Integer/Long classes etc. as map entries instead of the Atomic classes."}],"tags":[],"owner":{"account_id":4470098,"reputation":284,"user_id":3636639,"display_name":"silh"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695123764,"creation_date":1695123764,"answer_id":77134255,"question_id":77100008,"body_markdown":"You are right about micrometer not storing the reference to a gauge, so your second approach looks correct and in order with what is mentioned in micrometer [documentation][1]:\r\n```java\r\n// maintain a reference to myGauge\r\nAtomicInteger myGauge = registry.gauge(&quot;numberGauge&quot;, new AtomicInteger(0));\r\n\r\n// ... elsewhere you can update the value it holds using the object reference\r\nmyGauge.set(27);\r\nmyGauge.set(11);\r\n```\r\nI would, however, change that code a bit, as it has come race conditions:\r\n```java\r\n  private final ConcurrentMap&lt;String, AtomicLong&gt; cycleGaugeMap = new ConcurrentHashMap&lt;&gt;();\r\n  // Use cycleGaugeMap to hold the reference to the gauge\r\n  private void updateGauge(String currency, int minutes) {\r\n    cycleGaugeMap.compute(currency, (k, v) -&gt; {\r\n      if (v == null) {\r\n        v = meterRegistry.gauge(&quot;withdraw.cycle&quot;, Tags.of(&quot;currency&quot;, currency), new AtomicLong(minutes));\r\n      } else {\r\n        v.set(minutes);\r\n      }\r\n      return v;\r\n    });\r\n  }\r\n```\r\n\r\n  [1]: https://micrometer.io/docs/concepts#_gauges","title":"Java Update Micrometer Gauge with Dynamic Labels","body":"<p>You are right about micrometer not storing the reference to a gauge, so your second approach looks correct and in order with what is mentioned in micrometer <a href=\"https://micrometer.io/docs/concepts#_gauges\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// maintain a reference to myGauge\nAtomicInteger myGauge = registry.gauge(&quot;numberGauge&quot;, new AtomicInteger(0));\n\n// ... elsewhere you can update the value it holds using the object reference\nmyGauge.set(27);\nmyGauge.set(11);\n</code></pre>\n<p>I would, however, change that code a bit, as it has come race conditions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private final ConcurrentMap&lt;String, AtomicLong&gt; cycleGaugeMap = new ConcurrentHashMap&lt;&gt;();\n  // Use cycleGaugeMap to hold the reference to the gauge\n  private void updateGauge(String currency, int minutes) {\n    cycleGaugeMap.compute(currency, (k, v) -&gt; {\n      if (v == null) {\n        v = meterRegistry.gauge(&quot;withdraw.cycle&quot;, Tags.of(&quot;currency&quot;, currency), new AtomicLong(minutes));\n      } else {\n        v.set(minutes);\n      }\n      return v;\n    });\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2519985,"reputation":3670,"user_id":2190546,"accept_rate":83,"display_name":"J Freebird"},"score":0,"creation_date":1695143849,"post_id":77136467,"comment_id":135983607,"body_markdown":"I tried MultiGauge, but it doesn&#39;t work this way. The gauge with newer tags would just overwrite the previous ones. If you change to second `updateGauge` to `updateGauge(&quot;Dollar&quot;, 2);`, only the gauge with tag `Dollar` exists.  The `Rupee` one is overwritten.","body":"I tried MultiGauge, but it doesn&#39;t work this way. The gauge with newer tags would just overwrite the previous ones. If you change to second <code>updateGauge</code> to <code>updateGauge(&quot;Dollar&quot;, 2);</code>, only the gauge with tag <code>Dollar</code> exists.  The <code>Rupee</code> one is overwritten."},{"owner":{"account_id":2519985,"reputation":3670,"user_id":2190546,"accept_rate":83,"display_name":"J Freebird"},"score":1,"creation_date":1695145175,"post_id":77136467,"comment_id":135983850,"body_markdown":"The second approach seems to work well and it&#39;s quite elegant.","body":"The second approach seems to work well and it&#39;s quite elegant."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695147462,"post_id":77136467,"comment_id":135984181,"body_markdown":"@JFreebird Multigauge way should have worked too. Let me check on that.","body":"@JFreebird Multigauge way should have worked too. Let me check on that."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695174724,"post_id":77136467,"comment_id":135987744,"body_markdown":"@JFreebird I have updated my answer and fixed the MultiGauge part. Also, update the example with multiple use cases. Please verify now. Everything works. :)","body":"@JFreebird I have updated my answer and fixed the MultiGauge part. Also, update the example with multiple use cases. Please verify now. Everything works. :)"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695175104,"post_id":77136467,"comment_id":135987771,"body_markdown":"@JFreebird I guess the MultiGauge approach is quite cleaner way than the normal way. But you can choose as per your wish.","body":"@JFreebird I guess the MultiGauge approach is quite cleaner way than the normal way. But you can choose as per your wish."}],"tags":[],"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695174515,"creation_date":1695141831,"answer_id":77136467,"question_id":77100008,"body_markdown":"Kindly follow this github issue [here][1]. \r\n\r\n**To Summarize:**\r\n\r\n- First approach to update gauge is via [MultiGauge][2]:\r\n\r\n&gt; By definition, Micrometer supports one special type of Gauge, called a\r\n&gt; `MultiGauge`, to help manage gauging a growing or shrinking list of\r\n&gt; criteria. This feature lets you select a set of well-bounded but\r\n&gt; slightly changing set of criteria from something like an SQL query and\r\n&gt; report some metric for each row as a Gauge.\r\n\r\nWorking example:\r\n\r\n    public class Example {\r\n    \r\n        private static final SimpleMeterRegistry registry = new SimpleMeterRegistry();\r\n        private static final MultiGauge gauge = MultiGauge.builder(&quot;withdraw.cycle&quot;).register(registry);\r\n\r\n        private static final Map&lt;String, Number&gt; values = new ConcurrentHashMap&lt;&gt;(); \r\n    \r\n        private static void updateGauge(String currency, int minutes) {\r\n            values.put(currency, minutes);\r\n            List&lt;MultiGauge.Row&lt;?&gt;&gt; rows = values.entrySet()\r\n                .stream()\r\n                .map(row -&gt; MultiGauge.Row.of(Tags.of(&quot;currency&quot;, row.getKey()), row.getValue()))\r\n                .collect(Collectors.toList());\r\n            gauge.register(rows, true);\r\n        }\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n           updateGauge(&quot;Rupee&quot;, 1);\r\n           System.out.println(registry.getMetersAsString());\r\n           System.out.println(&quot;--------&quot;);\r\n           updateGauge(&quot;Dollar&quot;, 2);\r\n           System.out.println(registry.getMetersAsString());\r\n           System.out.println(&quot;--------&quot;);\r\n           updateGauge(&quot;Rupee&quot;, 3);\r\n           System.out.println(registry.getMetersAsString());\r\n        }\r\nOutput:\r\n\r\n    withdraw.cycle(GAUGE)[currency=&#39;Rupee&#39;]; value=1.0\r\n    --------\r\n    withdraw.cycle(GAUGE)[currency=&#39;Dollar&#39;]; value=2.0\r\n    withdraw.cycle(GAUGE)[currency=&#39;Rupee&#39;]; value=1.0\r\n    --------\r\n    withdraw.cycle(GAUGE)[currency=&#39;Dollar&#39;]; value=2.0\r\n    withdraw.cycle(GAUGE)[currency=&#39;Rupee&#39;]; value=3.0\r\n\r\n- Second Approach to update gauge via `Gauge` itself.\r\n\r\nWorking example:\r\n\r\n    public class Example {\r\n    \r\n        private static final SimpleMeterRegistry registry = new SimpleMeterRegistry();\r\n    \r\n        private static final Map&lt;String, Number&gt; values = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n        private static void updateGauge(String currency, int minutes) {\r\n            Tags tags = Tags.of(&quot;currency&quot;, currency);\r\n            values.put(currency, minutes);\r\n            if (registry.find(&quot;withdraw.cycle&quot;).tags(tags).gauge() == null) {\r\n                Gauge.builder(&quot;withdraw.cycle&quot;, () -&gt; values.get(currency))\r\n                        .tags(tags)\r\n                        .register(registry);\r\n            }\r\n        }\r\n    \r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            updateGauge(&quot;Rupee&quot;, 1);\r\n            System.out.println(registry.getMetersAsString());\r\n            System.out.println(&quot;--------&quot;);\r\n            updateGauge(&quot;Dollar&quot;, 2);\r\n            System.out.println(registry.getMetersAsString());\r\n            System.out.println(&quot;--------&quot;);\r\n            updateGauge(&quot;Rupee&quot;, 3);\r\n            System.out.println(registry.getMetersAsString());\r\n        }\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    withdraw.cycle(GAUGE)[currency=&#39;Rupee&#39;]; value=1.0\r\n    --------\r\n    withdraw.cycle(GAUGE)[currency=&#39;Dollar&#39;]; value=2.0\r\n    withdraw.cycle(GAUGE)[currency=&#39;Rupee&#39;]; value=1.0\r\n    --------\r\n    withdraw.cycle(GAUGE)[currency=&#39;Dollar&#39;]; value=2.0\r\n    withdraw.cycle(GAUGE)[currency=&#39;Rupee&#39;]; value=3.0\r\n\r\nI guess this is the optimal approach that you were looking for.\r\n\r\n\r\n  [1]: https://github.com/micrometer-metrics/micrometer/issues/3826\r\n  [2]: https://micrometer.io/docs/concepts#_multi_gauge\r\n","title":"Java Update Micrometer Gauge with Dynamic Labels","body":"<p>Kindly follow this github issue <a href=\"https://github.com/micrometer-metrics/micrometer/issues/3826\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>To Summarize:</strong></p>\n<ul>\n<li>First approach to update gauge is via <a href=\"https://micrometer.io/docs/concepts#_multi_gauge\" rel=\"nofollow noreferrer\">MultiGauge</a>:</li>\n</ul>\n<blockquote>\n<p>By definition, Micrometer supports one special type of Gauge, called a\n<code>MultiGauge</code>, to help manage gauging a growing or shrinking list of\ncriteria. This feature lets you select a set of well-bounded but\nslightly changing set of criteria from something like an SQL query and\nreport some metric for each row as a Gauge.</p>\n</blockquote>\n<p>Working example:</p>\n<pre><code>public class Example {\n\n    private static final SimpleMeterRegistry registry = new SimpleMeterRegistry();\n    private static final MultiGauge gauge = MultiGauge.builder(&quot;withdraw.cycle&quot;).register(registry);\n\n    private static final Map&lt;String, Number&gt; values = new ConcurrentHashMap&lt;&gt;(); \n\n    private static void updateGauge(String currency, int minutes) {\n        values.put(currency, minutes);\n        List&lt;MultiGauge.Row&lt;?&gt;&gt; rows = values.entrySet()\n            .stream()\n            .map(row -&gt; MultiGauge.Row.of(Tags.of(&quot;currency&quot;, row.getKey()), row.getValue()))\n            .collect(Collectors.toList());\n        gauge.register(rows, true);\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n       updateGauge(&quot;Rupee&quot;, 1);\n       System.out.println(registry.getMetersAsString());\n       System.out.println(&quot;--------&quot;);\n       updateGauge(&quot;Dollar&quot;, 2);\n       System.out.println(registry.getMetersAsString());\n       System.out.println(&quot;--------&quot;);\n       updateGauge(&quot;Rupee&quot;, 3);\n       System.out.println(registry.getMetersAsString());\n    }\n</code></pre>\n<p>Output:</p>\n<pre><code>withdraw.cycle(GAUGE)[currency='Rupee']; value=1.0\n--------\nwithdraw.cycle(GAUGE)[currency='Dollar']; value=2.0\nwithdraw.cycle(GAUGE)[currency='Rupee']; value=1.0\n--------\nwithdraw.cycle(GAUGE)[currency='Dollar']; value=2.0\nwithdraw.cycle(GAUGE)[currency='Rupee']; value=3.0\n</code></pre>\n<ul>\n<li>Second Approach to update gauge via <code>Gauge</code> itself.</li>\n</ul>\n<p>Working example:</p>\n<pre><code>public class Example {\n\n    private static final SimpleMeterRegistry registry = new SimpleMeterRegistry();\n\n    private static final Map&lt;String, Number&gt; values = new ConcurrentHashMap&lt;&gt;();\n\n    private static void updateGauge(String currency, int minutes) {\n        Tags tags = Tags.of(&quot;currency&quot;, currency);\n        values.put(currency, minutes);\n        if (registry.find(&quot;withdraw.cycle&quot;).tags(tags).gauge() == null) {\n            Gauge.builder(&quot;withdraw.cycle&quot;, () -&gt; values.get(currency))\n                    .tags(tags)\n                    .register(registry);\n        }\n    }\n\n\n    public static void main(String[] args) throws InterruptedException {\n        updateGauge(&quot;Rupee&quot;, 1);\n        System.out.println(registry.getMetersAsString());\n        System.out.println(&quot;--------&quot;);\n        updateGauge(&quot;Dollar&quot;, 2);\n        System.out.println(registry.getMetersAsString());\n        System.out.println(&quot;--------&quot;);\n        updateGauge(&quot;Rupee&quot;, 3);\n        System.out.println(registry.getMetersAsString());\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>withdraw.cycle(GAUGE)[currency='Rupee']; value=1.0\n--------\nwithdraw.cycle(GAUGE)[currency='Dollar']; value=2.0\nwithdraw.cycle(GAUGE)[currency='Rupee']; value=1.0\n--------\nwithdraw.cycle(GAUGE)[currency='Dollar']; value=2.0\nwithdraw.cycle(GAUGE)[currency='Rupee']; value=3.0\n</code></pre>\n<p>I guess this is the optimal approach that you were looking for.</p>\n"},{"comments":[{"owner":{"account_id":2519985,"reputation":3670,"user_id":2190546,"accept_rate":83,"display_name":"J Freebird"},"score":1,"creation_date":1695229267,"post_id":77143541,"comment_id":135997703,"body_markdown":"Thank you for the answer. But I think Anish B&#39;s second example seems to be cleaner. It doesn&#39;t require map computations.  The gauge can directly get value from the map, and I can just use Integer/Long etc. as map entries instead of Atomic classes.","body":"Thank you for the answer. But I think Anish B&#39;s second example seems to be cleaner. It doesn&#39;t require map computations.  The gauge can directly get value from the map, and I can just use Integer/Long etc. as map entries instead of Atomic classes."}],"tags":[],"owner":{"account_id":2730061,"reputation":1242,"user_id":2867361,"accept_rate":100,"display_name":"CHHIBI AMOR"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695220733,"creation_date":1695220733,"answer_id":77143541,"question_id":77100008,"body_markdown":"Micrometer doesn&#39;t provide a direct API for updating the value of a gauge with dynamically retrieved labels, so your approaches are reasonable workarounds. However, your second approach using a `ConcurrentHashMap` to hold references to the gauges can be improved for clarity and safety. Here&#39;s an updated version of your second approach:\r\n\r\n```java\r\nprivate final ConcurrentMap&lt;Tags, AtomicLong&gt; cycleGaugeMap = new ConcurrentHashMap&lt;&gt;();\r\n\r\nprivate void updateGauge(String currency, int minutes) {\r\n    Tags tags = Tags.of(&quot;currency&quot;, currency);\r\n    AtomicLong gaugeValue = cycleGaugeMap.computeIfAbsent(tags, key -&gt; {\r\n        AtomicLong gauge = new AtomicLong(minutes);\r\n        meterRegistry.gauge(&quot;withdraw.cycle&quot;, tags, gauge);\r\n        return gauge;\r\n    });\r\n\r\n    gaugeValue.set(minutes);\r\n}\r\n```\r\n\r\nIn this updated version, `computeIfAbsent` is used to atomically check if the gauge already exists in the `cycleGaugeMap`. If it doesn&#39;t exist, it creates the gauge and registers it with Micrometer before returning the reference to it. This ensures that gauge creation and retrieval are done atomically and avoids the need to separately check and putIfAbsent.\r\n\r\nThis approach is more concise and still thread-safe. It also clearly conveys your intention of creating and managing gauges dynamically while keeping track of them for future updates.\r\n\r\nOverall, this updated version of your second approach is a reasonable and elegant way to manage dynamically labeled gauges in Micrometer.","title":"Java Update Micrometer Gauge with Dynamic Labels","body":"<p>Micrometer doesn't provide a direct API for updating the value of a gauge with dynamically retrieved labels, so your approaches are reasonable workarounds. However, your second approach using a <code>ConcurrentHashMap</code> to hold references to the gauges can be improved for clarity and safety. Here's an updated version of your second approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final ConcurrentMap&lt;Tags, AtomicLong&gt; cycleGaugeMap = new ConcurrentHashMap&lt;&gt;();\n\nprivate void updateGauge(String currency, int minutes) {\n    Tags tags = Tags.of(&quot;currency&quot;, currency);\n    AtomicLong gaugeValue = cycleGaugeMap.computeIfAbsent(tags, key -&gt; {\n        AtomicLong gauge = new AtomicLong(minutes);\n        meterRegistry.gauge(&quot;withdraw.cycle&quot;, tags, gauge);\n        return gauge;\n    });\n\n    gaugeValue.set(minutes);\n}\n</code></pre>\n<p>In this updated version, <code>computeIfAbsent</code> is used to atomically check if the gauge already exists in the <code>cycleGaugeMap</code>. If it doesn't exist, it creates the gauge and registers it with Micrometer before returning the reference to it. This ensures that gauge creation and retrieval are done atomically and avoids the need to separately check and putIfAbsent.</p>\n<p>This approach is more concise and still thread-safe. It also clearly conveys your intention of creating and managing gauges dynamically while keeping track of them for future updates.</p>\n<p>Overall, this updated version of your second approach is a reasonable and elegant way to manage dynamically labeled gauges in Micrometer.</p>\n"}],"owner":{"account_id":2519985,"reputation":3670,"user_id":2190546,"accept_rate":83,"display_name":"J Freebird"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":521,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77136467,"answer_count":3,"score":4,"last_activity_date":1695366678,"creation_date":1694633377,"question_id":77100008,"body_markdown":"I&#39;m using Java Micrometer gauge to measure a metric that has a range of labels. The label values are dynamically retrieved but bounded. \r\n\r\nFor example: I have `withdraw.cycle` metric with label `currency`.\r\n\r\nBecause Micrometer doesn&#39;t hold the reference to the gauge itself, it makes the code look quite cumbersome. \r\n\r\nI&#39;ve got two ways to do it:\r\n\r\n\r\n    private void updateGauge(String currency, int minutes) {\r\n        Tags tags = Tags.of(&quot;currency&quot;, currency);\r\n        Gauge.builder(&quot;withdraw.cycle&quot;,() -&gt; minutes)\r\n             .tags(tags)\r\n             .strongReference(true)\r\n             .register(meterRegistry);\r\n    }\r\n\r\n**OR**\r\n\r\n\r\n    private final Map&lt;Tags, AtomicLong&gt; cycleGaugeMap = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n    // Use cycleGaugeMap to hold the reference to the gauge\r\n    private void updateGauge(String currency, int minutes) {\r\n        Tags tags = Tags.of(&quot;currency&quot;, currency);\r\n        if (cycleGaugeMap.containsKey(tags)) {\r\n            cycleGaugeMap.get(tags).set(minutes);\r\n        } else {\r\n            AtomicLong old = cycleGaugeMap.putIfAbsent(tags, meterRegistry.gauge(&quot;withdraw.cycle&quot;, tags,\r\n                                                                                         new AtomicLong(minutes)));\r\n            if (old != null) {\r\n                old.set(minutes);\r\n            }\r\n        }\r\n     }\r\n\r\n\r\n**Question:** Are they the right ways to do it or does Micrometer have an API that I&#39;m not aware of for such cases? I&#39;d really want to know a &quot;standard&quot; and elegant way to do it.","title":"Java Update Micrometer Gauge with Dynamic Labels","body":"<p>I'm using Java Micrometer gauge to measure a metric that has a range of labels. The label values are dynamically retrieved but bounded.</p>\n<p>For example: I have <code>withdraw.cycle</code> metric with label <code>currency</code>.</p>\n<p>Because Micrometer doesn't hold the reference to the gauge itself, it makes the code look quite cumbersome.</p>\n<p>I've got two ways to do it:</p>\n<pre><code>private void updateGauge(String currency, int minutes) {\n    Tags tags = Tags.of(&quot;currency&quot;, currency);\n    Gauge.builder(&quot;withdraw.cycle&quot;,() -&gt; minutes)\n         .tags(tags)\n         .strongReference(true)\n         .register(meterRegistry);\n}\n</code></pre>\n<p><strong>OR</strong></p>\n<pre><code>private final Map&lt;Tags, AtomicLong&gt; cycleGaugeMap = new ConcurrentHashMap&lt;&gt;();\n\n// Use cycleGaugeMap to hold the reference to the gauge\nprivate void updateGauge(String currency, int minutes) {\n    Tags tags = Tags.of(&quot;currency&quot;, currency);\n    if (cycleGaugeMap.containsKey(tags)) {\n        cycleGaugeMap.get(tags).set(minutes);\n    } else {\n        AtomicLong old = cycleGaugeMap.putIfAbsent(tags, meterRegistry.gauge(&quot;withdraw.cycle&quot;, tags,\n                                                                                     new AtomicLong(minutes)));\n        if (old != null) {\n            old.set(minutes);\n        }\n    }\n }\n</code></pre>\n<p><strong>Question:</strong> Are they the right ways to do it or does Micrometer have an API that I'm not aware of for such cases? I'd really want to know a &quot;standard&quot; and elegant way to do it.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1520765638,"post_id":49219092,"comment_id":85442033,"body_markdown":"See https://stackoverflow.com/questions/34647624/how-to-colspan-a-table-in-word-with-apache-poi/34663420#34663420","body":"See <a href=\"https://stackoverflow.com/questions/34647624/how-to-colspan-a-table-in-word-with-apache-poi/34663420#34663420\" title=\"how to colspan a table in word with apache poi\">stackoverflow.com/questions/34647624/&hellip;</a>"},{"owner":{"account_id":11401943,"reputation":72,"user_id":8358646,"accept_rate":75,"display_name":"Joel George"},"score":0,"creation_date":1520766306,"post_id":49219092,"comment_id":85442208,"body_markdown":"@AxelRichter. I also tried this method. I got the output as row 0, col 0 as verticaly merged. I need columns to be vertically merged. I am using WPS writer for the docx file. Will that be the problem?","body":"@AxelRichter. I also tried this method. I got the output as row 0, col 0 as verticaly merged. I need columns to be vertically merged. I am using WPS writer for the docx file. Will that be the problem?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1520766850,"post_id":49219092,"comment_id":85442361,"body_markdown":"Sure because the code does exactly this using `mergeCellVertically(table, 0, 0, 1);`. But it also does merging horizontally row 1, col 2 using `mergeCellHorizontally(table, 1, 2, 3);` and row 2, col 1 using `mergeCellHorizontally(table, 2, 1, 4);`.","body":"Sure because the code does exactly this using <code>mergeCellVertically(table, 0, 0, 1);</code>. But it also does merging horizontally row 1, col 2 using <code>mergeCellHorizontally(table, 1, 2, 3);</code> and row 2, col 1 using <code>mergeCellHorizontally(table, 2, 1, 4);</code>."},{"owner":{"account_id":11401943,"reputation":72,"user_id":8358646,"accept_rate":75,"display_name":"Joel George"},"score":0,"creation_date":1520767537,"post_id":49219092,"comment_id":85442552,"body_markdown":"@AxelRichter. Yes. Vertical merging is happening. But horizontal merging is not happening. This is the output i got after commenting the vertical merging code. [Pic](https://prnt.sc/ipn0ic)","body":"@AxelRichter. Yes. Vertical merging is happening. But horizontal merging is not happening. This is the output i got after commenting the vertical merging code. <a href=\"https://prnt.sc/ipn0ic\" rel=\"nofollow noreferrer\">Pic</a>"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1520767818,"post_id":49219092,"comment_id":85442609,"body_markdown":"The code in my linked answer works (tested) for Microsoft Office Word from 2007 on upwards. Please show the exact code you are using and the exact result in your  `WPS writer` as a screen shot.","body":"The code in my linked answer works (tested) for Microsoft Office Word from 2007 on upwards. Please show the exact code you are using and the exact result in your  <code>WPS writer</code> as a screen shot."},{"owner":{"account_id":11401943,"reputation":72,"user_id":8358646,"accept_rate":75,"display_name":"Joel George"},"score":0,"creation_date":1520768093,"post_id":49219092,"comment_id":85442676,"body_markdown":"@AxelRichter i used the same code provided in the link. except commented (mergeCellVertically(table, 0, 0, 1); ).This is the ouptui I got in WPS writer:[PIC] https://prnt.sc/ipn0ic","body":"@AxelRichter i used the same code provided in the link. except commented (mergeCellVertically(table, 0, 0, 1); ).This is the ouptui I got in WPS writer:[PIC] <a href=\"https://prnt.sc/ipn0ic\" rel=\"nofollow noreferrer\">prnt.sc/ipn0ic</a>"},{"owner":{"account_id":11401943,"reputation":72,"user_id":8358646,"accept_rate":75,"display_name":"Joel George"},"score":0,"creation_date":1520769155,"post_id":49219092,"comment_id":85442944,"body_markdown":"@AxelRichter the same output without any data","body":"@AxelRichter the same output without any data"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1520773002,"post_id":49219092,"comment_id":85444015,"body_markdown":"I have updated the code in my linked answer by creating table grid and deleting the content of the merged cells to support `Libreoffice Writer` too. Maybe this also will already support `WPS Writer`? Can you please try again?","body":"I have updated the code in my linked answer by creating table grid and deleting the content of the merged cells to support <code>Libreoffice Writer</code> too. Maybe this also will already support <code>WPS Writer</code>? Can you please try again?"},{"owner":{"account_id":11401943,"reputation":72,"user_id":8358646,"accept_rate":75,"display_name":"Joel George"},"score":0,"creation_date":1520775965,"post_id":49219092,"comment_id":85444842,"body_markdown":"@AxelRichter Still horizontal merge is not happening. This was the output I got. [Picture](https://prnt.sc/ipoaai)","body":"@AxelRichter Still horizontal merge is not happening. This was the output I got. <a href=\"https://prnt.sc/ipoaai\" rel=\"nofollow noreferrer\">Picture</a>"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1520776518,"post_id":49219092,"comment_id":85444989,"body_markdown":"Well then `WPS Writer` must be the problem. Later I will try installing this software to detect where the problem comes from. Now it is not possible since currenty my Windows 10 virtual machine runs Windows 10 Update Assistant and this seems taking for ever ;-).","body":"Well then <code>WPS Writer</code> must be the problem. Later I will try installing this software to detect where the problem comes from. Now it is not possible since currenty my Windows 10 virtual machine runs Windows 10 Update Assistant and this seems taking for ever ;-)."},{"owner":{"account_id":11401943,"reputation":72,"user_id":8358646,"accept_rate":75,"display_name":"Joel George"},"score":0,"creation_date":1520778364,"post_id":49219092,"comment_id":85445615,"body_markdown":"@AxelRichter Thanks Axel. Please let me know if you find a solution.","body":"@AxelRichter Thanks Axel. Please let me know if you find a solution."}],"answers":[{"comments":[{"owner":{"account_id":7625234,"reputation":231,"user_id":5781924,"display_name":"mindSet"},"score":0,"creation_date":1537277798,"post_id":49222078,"comment_id":91720309,"body_markdown":"awesome - Thank you Richter","body":"awesome - Thank you Richter"},{"owner":{"account_id":986239,"reputation":1789,"user_id":1004651,"accept_rate":67,"display_name":"Matthias"},"score":0,"creation_date":1550523606,"post_id":49222078,"comment_id":96292143,"body_markdown":"At the place where the merged cells are removed, I had to add ```table.getRow(row).removeCell(currentColumnIndex);```. Otherwise it looked like some data structures got out of sync, leading to strange exceptions when accessing CTTcPr  later again.","body":"At the place where the merged cells are removed, I had to add <code>table.getRow(row).removeCell(currentColumnIndex);</code>. Otherwise it looked like some data structures got out of sync, leading to strange exceptions when accessing CTTcPr  later again."},{"owner":{"account_id":5319378,"reputation":345,"user_id":4243238,"display_name":"csufsag"},"score":0,"creation_date":1583605770,"post_id":49222078,"comment_id":107176659,"body_markdown":"I have the same issue here, when I am getting rid of the &quot;merged&quot; cells I am facing with XmlValueDisconnectedException. Could you please share your solution for this?","body":"I have the same issue here, when I am getting rid of the &quot;merged&quot; cells I am facing with XmlValueDisconnectedException. Could you please share your solution for this?"}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1695366647,"creation_date":1520784414,"answer_id":49222078,"question_id":49219092,"body_markdown":"There are two methods setting horizontally merging. The first is using `CTHMerge` which is similar to the vertically merging using `CTVMerge` and it does not explicitly need a table grid. The second is using grid span properties. This method needs a table grid and the cells which are merged with the first one must be removed.\r\n\r\n`Microsoft Word` supports all methods.\r\n\r\n`Libreoffice Writer` supports `CTHMerge` too but a table grid must be set because of the correct rendering the table.\r\n\r\n`WPS Writer` supports only setting grid span.\r\n\r\nSo this should be the most compatible solution:\r\n\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    \r\n    import java.math.BigInteger;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.XWPFDocument;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTable;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTableCell;\r\n    import org.apache.poi.xwpf.usermodel.XWPFParagraph;\r\n    import org.apache.poi.xwpf.usermodel.XWPFRun;\r\n    \r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblWidth;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.STTblWidth;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTVMerge;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.STMerge;\r\n    \r\n    public class CreateWordTableMerge {\r\n    \r\n     static void mergeCellVertically(XWPFTable table, int col, int fromRow, int toRow) {\r\n      for(int rowIndex = fromRow; rowIndex &lt;= toRow; rowIndex++) {\r\n       XWPFTableCell cell = table.getRow(rowIndex).getCell(col);\r\n       CTVMerge vmerge = CTVMerge.Factory.newInstance();\r\n       if(rowIndex == fromRow){\r\n        // The first merged cell is set with RESTART merge value\r\n        vmerge.setVal(STMerge.RESTART);\r\n       } else {\r\n        // Cells which join (merge) the first one, are set with CONTINUE\r\n        vmerge.setVal(STMerge.CONTINUE);\r\n        // and the content should be removed\r\n        for (int i = cell.getParagraphs().size(); i &gt; 0; i--) {\r\n         cell.removeParagraph(0);\r\n        }\r\n        cell.addParagraph();\r\n       }\r\n       // Try getting the TcPr. Not simply setting an new one every time.\r\n       CTTcPr tcPr = cell.getCTTc().getTcPr();\r\n       if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\r\n       tcPr.setVMerge(vmerge);\r\n      }\r\n     }\r\n    \r\n     //merging horizontally by setting grid span instead of using CTHMerge\r\n     static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\r\n      XWPFTableCell cell = table.getRow(row).getCell(fromCol);\r\n      // Try getting the TcPr. Not simply setting an new one every time.\r\n      CTTcPr tcPr = cell.getCTTc().getTcPr();\r\n      if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\r\n      // The first merged cell has grid span property set\r\n      if (tcPr.isSetGridSpan()) {\r\n       tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      } else {\r\n       tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      }\r\n      // Cells which join (merge) the first one, must be removed\r\n      for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\r\n       table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\r\n       //table.getRow(row).getCtRow().removeTc(colIndex); // use this for apache poi versions up to 4.1.1\r\n       //table.getRow(row).removeCell(colIndex);\r\n      }\r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      XWPFDocument document= new XWPFDocument();\r\n    \r\n      XWPFParagraph paragraph = document.createParagraph();\r\n      XWPFRun run=paragraph.createRun();  \r\n      run.setText(&quot;The table:&quot;);\r\n    \r\n      //create table\r\n      XWPFTable table = document.createTable(3,5);\r\n    \r\n      for (int row = 0; row &lt; 3; row++) {\r\n       for (int col = 0; col &lt; 5; col++) {\r\n        table.getRow(row).getCell(col).setText(&quot;row &quot; + row + &quot;, col &quot; + col);\r\n       }\r\n      }\r\n    \r\n      //create CTTblGrid for this table with widths of the 5 columns. \r\n      //necessary for Libreoffice/Openoffice to accept the column widths.\r\n      //values are in unit twentieths of a point (1/1440 of an inch)\r\n      //first column = 1 inches width\r\n      table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\r\n      //other columns (2 in this case) also each 1 inches width\r\n      for (int col = 1 ; col &lt; 5; col++) {\r\n       table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\r\n      }\r\n    \r\n      //create and set column widths for all columns in all rows\r\n      //most examples don&#39;t set the type of the CTTblWidth but this\r\n      //is necessary for working in all office versions\r\n      for (int col = 0; col &lt; 5; col++) {\r\n       CTTblWidth tblWidth = CTTblWidth.Factory.newInstance();\r\n       tblWidth.setW(BigInteger.valueOf(1*1440));\r\n       tblWidth.setType(STTblWidth.DXA);\r\n       for (int row = 0; row &lt; 3; row++) {\r\n        CTTcPr tcPr = table.getRow(row).getCell(col).getCTTc().getTcPr();\r\n        if (tcPr != null) {\r\n         tcPr.setTcW(tblWidth);\r\n        } else {\r\n         tcPr = CTTcPr.Factory.newInstance();\r\n         tcPr.setTcW(tblWidth);\r\n         table.getRow(row).getCell(col).getCTTc().setTcPr(tcPr);\r\n        }\r\n       }\r\n      }\r\n    \r\n      //using the merge methods\r\n      mergeCellVertically(table, 0, 0, 1); \r\n      mergeCellHorizontally(table, 1, 2, 3); \r\n      mergeCellHorizontally(table, 2, 1, 4); \r\n    \r\n      paragraph = document.createParagraph();\r\n    \r\n      FileOutputStream out = new FileOutputStream(&quot;create_table.docx&quot;); \r\n      document.write(out);\r\n      out.close();\r\n    \r\n      System.out.println(&quot;create_table.docx written successully&quot;);\r\n     }\r\n    }","title":"How to horizontally merge XWPFTable using POI in Java","body":"<p>There are two methods setting horizontally merging. The first is using <code>CTHMerge</code> which is similar to the vertically merging using <code>CTVMerge</code> and it does not explicitly need a table grid. The second is using grid span properties. This method needs a table grid and the cells which are merged with the first one must be removed.</p>\n<p><code>Microsoft Word</code> supports all methods.</p>\n<p><code>Libreoffice Writer</code> supports <code>CTHMerge</code> too but a table grid must be set because of the correct rendering the table.</p>\n<p><code>WPS Writer</code> supports only setting grid span.</p>\n<p>So this should be the most compatible solution:</p>\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\n\nimport java.math.BigInteger;\n\nimport org.apache.poi.xwpf.usermodel.XWPFDocument;\nimport org.apache.poi.xwpf.usermodel.XWPFTable;\nimport org.apache.poi.xwpf.usermodel.XWPFTableCell;\nimport org.apache.poi.xwpf.usermodel.XWPFParagraph;\nimport org.apache.poi.xwpf.usermodel.XWPFRun;\n\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblWidth;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.STTblWidth;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTVMerge;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.STMerge;\n\npublic class CreateWordTableMerge {\n\n static void mergeCellVertically(XWPFTable table, int col, int fromRow, int toRow) {\n  for(int rowIndex = fromRow; rowIndex &lt;= toRow; rowIndex++) {\n   XWPFTableCell cell = table.getRow(rowIndex).getCell(col);\n   CTVMerge vmerge = CTVMerge.Factory.newInstance();\n   if(rowIndex == fromRow){\n    // The first merged cell is set with RESTART merge value\n    vmerge.setVal(STMerge.RESTART);\n   } else {\n    // Cells which join (merge) the first one, are set with CONTINUE\n    vmerge.setVal(STMerge.CONTINUE);\n    // and the content should be removed\n    for (int i = cell.getParagraphs().size(); i &gt; 0; i--) {\n     cell.removeParagraph(0);\n    }\n    cell.addParagraph();\n   }\n   // Try getting the TcPr. Not simply setting an new one every time.\n   CTTcPr tcPr = cell.getCTTc().getTcPr();\n   if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\n   tcPr.setVMerge(vmerge);\n  }\n }\n\n //merging horizontally by setting grid span instead of using CTHMerge\n static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\n  XWPFTableCell cell = table.getRow(row).getCell(fromCol);\n  // Try getting the TcPr. Not simply setting an new one every time.\n  CTTcPr tcPr = cell.getCTTc().getTcPr();\n  if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\n  // The first merged cell has grid span property set\n  if (tcPr.isSetGridSpan()) {\n   tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  } else {\n   tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  }\n  // Cells which join (merge) the first one, must be removed\n  for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\n   table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\n   //table.getRow(row).getCtRow().removeTc(colIndex); // use this for apache poi versions up to 4.1.1\n   //table.getRow(row).removeCell(colIndex);\n  }\n }\n\n public static void main(String[] args) throws Exception {\n\n  XWPFDocument document= new XWPFDocument();\n\n  XWPFParagraph paragraph = document.createParagraph();\n  XWPFRun run=paragraph.createRun();  \n  run.setText(&quot;The table:&quot;);\n\n  //create table\n  XWPFTable table = document.createTable(3,5);\n\n  for (int row = 0; row &lt; 3; row++) {\n   for (int col = 0; col &lt; 5; col++) {\n    table.getRow(row).getCell(col).setText(&quot;row &quot; + row + &quot;, col &quot; + col);\n   }\n  }\n\n  //create CTTblGrid for this table with widths of the 5 columns. \n  //necessary for Libreoffice/Openoffice to accept the column widths.\n  //values are in unit twentieths of a point (1/1440 of an inch)\n  //first column = 1 inches width\n  table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\n  //other columns (2 in this case) also each 1 inches width\n  for (int col = 1 ; col &lt; 5; col++) {\n   table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\n  }\n\n  //create and set column widths for all columns in all rows\n  //most examples don't set the type of the CTTblWidth but this\n  //is necessary for working in all office versions\n  for (int col = 0; col &lt; 5; col++) {\n   CTTblWidth tblWidth = CTTblWidth.Factory.newInstance();\n   tblWidth.setW(BigInteger.valueOf(1*1440));\n   tblWidth.setType(STTblWidth.DXA);\n   for (int row = 0; row &lt; 3; row++) {\n    CTTcPr tcPr = table.getRow(row).getCell(col).getCTTc().getTcPr();\n    if (tcPr != null) {\n     tcPr.setTcW(tblWidth);\n    } else {\n     tcPr = CTTcPr.Factory.newInstance();\n     tcPr.setTcW(tblWidth);\n     table.getRow(row).getCell(col).getCTTc().setTcPr(tcPr);\n    }\n   }\n  }\n\n  //using the merge methods\n  mergeCellVertically(table, 0, 0, 1); \n  mergeCellHorizontally(table, 1, 2, 3); \n  mergeCellHorizontally(table, 2, 1, 4); \n\n  paragraph = document.createParagraph();\n\n  FileOutputStream out = new FileOutputStream(&quot;create_table.docx&quot;); \n  document.write(out);\n  out.close();\n\n  System.out.println(&quot;create_table.docx written successully&quot;);\n }\n}\n</code></pre>\n"}],"owner":{"account_id":11401943,"reputation":72,"user_id":8358646,"accept_rate":75,"display_name":"Joel George"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49222078,"answer_count":1,"score":0,"last_activity_date":1695366647,"creation_date":1520764945,"question_id":49219092,"body_markdown":"I want to horizontally merge columns of the row in a XWPFTable. I tried the answer in this link. \r\n https://stackoverflow.com/questions/15984896/how-to-merge-cells-or-apply-colspan-using-xwpftable-in-poi-in-java \r\nand also of this link \r\nhttps://stackoverflow.com/questions/35554185/how-to-merge-cells-horizontally-using-apache-poi?noredirect=1&amp;lq=1\r\n\r\nIt helped me to get cells merged vertically. But horizontal merge is not happening.\r\nI am attaching the sample screenshot of what I really wanted.\r\n\r\n[![excel image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pf7qZ.jpg\r\n\r\nThanks.","title":"How to horizontally merge XWPFTable using POI in Java","body":"<p>I want to horizontally merge columns of the row in a XWPFTable. I tried the answer in this link. \n <a href=\"https://stackoverflow.com/questions/15984896/how-to-merge-cells-or-apply-colspan-using-xwpftable-in-poi-in-java\">How to merge cells (or apply colspan) using XWPFTable in POI in Java?</a> \nand also of this link \n<a href=\"https://stackoverflow.com/questions/35554185/how-to-merge-cells-horizontally-using-apache-poi?noredirect=1&amp;lq=1\">How to merge cells horizontally using apache-poi</a></p>\n\n<p>It helped me to get cells merged vertically. But horizontal merge is not happening.\nI am attaching the sample screenshot of what I really wanted.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pf7qZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pf7qZ.jpg\" alt=\"excel image\"></a></p>\n\n<p>Thanks.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1687880553,"post_id":76566277,"comment_id":134997400,"body_markdown":"[Create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) please.","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Create a Minimal, Reproducible Example</a> please."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695366541,"creation_date":1688291675,"answer_id":76598323,"question_id":76566277,"body_markdown":"I would not see the table in the picture in your question to be table in table. The table-in-table-construct is not really good practice. It should be avoided if possible.\r\n\r\nI see a table having 4 columns where in rows 1, 2 and 5 columns 1 and 2 as well as 3 and 4 are merged. In rows 3 and 4 column 1 is hidden and columns 2 and 3 are merged.\r\n\r\nFollowing code produces this using Apache POI (current version 5.2.3).\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    \r\n    import java.util.Map;\r\n    import java.util.TreeMap;\r\n    \r\n    import java.math.BigInteger;\r\n    \r\n    public class CreateWordKeyValueTable {\r\n        \r\n     static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\r\n      XWPFTableCell cell = table.getRow(row).getCell(fromCol);\r\n      // Try getting the TcPr. Not simply setting an new one every time.\r\n      org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr tcPr = cell.getCTTc().getTcPr();\r\n      if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\r\n      // The first merged cell has grid span property set\r\n      if (tcPr.isSetGridSpan()) {\r\n       tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      } else {\r\n       tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      }\r\n      // Cells which join (merge) the first one, must be removed\r\n      for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\r\n       table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\r\n      }\r\n     }\r\n     \r\n     static void createGrid(XWPFTable table, int[] colWidths) {\r\n      //create CTTblGrid for this table with widths of the columns. \r\n      //necessary for Libreoffice/Openoffice to accept the column widths.\r\n      //values are in unit twentieths of a point (1/1440 of an inch)\r\n      //if widths of table cells are in percent, then this is only to store the relations\r\n      org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblGrid tblGrid = table.getCTTbl().getTblGrid();\r\n      if (tblGrid == null) tblGrid = table.getCTTbl().addNewTblGrid();\r\n      for (org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblGridCol tblGridCol : tblGrid.getGridColList()) {\r\n       tblGrid.removeGridCol(0);  \r\n      }\r\n      //first column\r\n      tblGrid.addNewGridCol().setW(BigInteger.valueOf(colWidths[0]));\r\n      //other columns\r\n      for (int c = 1 ; c &lt; colWidths.length; c++) {\r\n       tblGrid.addNewGridCol().setW(BigInteger.valueOf(colWidths[c]));\r\n      }     \r\n     }\r\n     \r\n     static void hideFirstCell(XWPFTableRow tableRow) {\r\n      //set gridBefore\r\n      org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTrPr trPr = tableRow.getCtRow().getTrPr();\r\n      if (trPr==null) trPr = tableRow.getCtRow().addNewTrPr();\r\n      for (org.openxmlformats.schemas.wordprocessingml.x2006.main.CTDecimalNumber gridBefore : trPr.getGridBeforeList()) {\r\n       trPr.removeGridBefore(0);  \r\n      }\r\n      org.openxmlformats.schemas.wordprocessingml.x2006.main.CTDecimalNumber gridBefore = trPr.addNewGridBefore();\r\n      gridBefore.setVal(BigInteger.valueOf(1));\r\n      //set wBefore \r\n      for (org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblWidth wBefore : trPr.getWBeforeList()) {\r\n       trPr.removeWBefore(0);  \r\n      }\r\n      org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblWidth wBefore = trPr.addNewWBefore();\r\n      XWPFTableCell tableCell = tableRow.getCell(0);\r\n      wBefore.setW(tableCell.getWidth());\r\n      wBefore.setType(org.openxmlformats.schemas.wordprocessingml.x2006.main.STTblWidth.PCT);\r\n      tableRow.removeCell(0);\r\n     }\r\n    \r\n    \r\n     static XWPFTableRow getOrCreateTableRow(XWPFTable table, int r, String[] colWidths) {\r\n      //create a row having count of cells having special width\r\n      XWPFTableRow tableRow = null;\r\n      if (r==0) {\r\n       tableRow = table.getRow(0); \r\n      } else {\r\n       tableRow = table.createRow();\r\n      }\r\n      //fill up cell list up to needed count\r\n      while (tableRow.getTableCells().size() &lt; colWidths.length) {\r\n       tableRow.createCell();\r\n      }\r\n      //set the widths\r\n      for (int c = 0 ; c &lt; colWidths.length; c++) {\r\n       tableRow.getCell(c).setWidth(colWidths[c]);   \r\n      }\r\n      return tableRow;\r\n     }\r\n    \t\r\n     public static void main(String[] args) throws Exception {\r\n         \r\n      Map&lt;String, Object&gt; keyValue = new TreeMap&lt;String, Object&gt;();\r\n      keyValue.put(&quot;Key1&quot;, &quot;Value1&quot;);\r\n      Map&lt;String, String&gt; subKeyValue = new TreeMap&lt;String, String&gt;();\r\n      subKeyValue.put(&quot;Key2a&quot;, &quot;Value2a&quot;);\r\n      subKeyValue.put(&quot;Key2b&quot;, &quot;Value2b&quot;);\r\n      keyValue.put(&quot;Key2&quot;, subKeyValue);\r\n      keyValue.put(&quot;Key3&quot;, &quot;Value3&quot;);\r\n      \r\n      System.out.println(keyValue);\r\n      \r\n      String multiValues = &quot;Multivalued Key&quot;;\r\n      \r\n      double[] dWidthsPCT = new double[]{10d, 30d, 10d, 50d};\r\n      \r\n      java.util.stream.Stream&lt;String&gt; stream = \r\n       java.util.stream.DoubleStream.of(dWidthsPCT).boxed()\r\n       .map(d -&gt; String.valueOf(d)+&quot;%&quot;);\r\n      String[] widthsPCT = stream.toArray(String[]::new);\r\n          \r\n      XWPFDocument document = new XWPFDocument();\r\n    \r\n      XWPFParagraph paragraph = document.createParagraph();\r\n      XWPFRun run = paragraph.createRun();  \r\n      run.setText(&quot;The table:&quot;);\r\n    \r\n      XWPFTable table = document.createTable();  \r\n      table.setWidth(&quot;100%&quot;);\r\n      \r\n      //set borders\r\n      table.setTopBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\r\n      table.setBottomBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\r\n      table.setLeftBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\r\n      table.setRightBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\r\n      table.setInsideHBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\r\n      table.setInsideVBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\r\n      \r\n      createGrid(table, new int[]{ // 5000 = 100%\r\n        (int)Math.round(5000d/(100d/dWidthsPCT[0])), \r\n        (int)Math.round(5000d/(100d/dWidthsPCT[1])), \r\n        (int)Math.round(5000d/(100d/dWidthsPCT[2])), \r\n        (int)Math.round(5000d/(100d/dWidthsPCT[3]))\r\n       }\r\n      ); \r\n      \r\n      XWPFTableRow tableRow;\r\n      XWPFTableCell tableCell;\r\n      String key;\r\n      Object objectValue;\r\n      String stringValue;\r\n      int r = -1;\r\n      for(Map.Entry&lt;String, Object&gt; entry : keyValue.entrySet()) {\r\n       r++;   \r\n       tableRow = getOrCreateTableRow(table, r, widthsPCT);\r\n       \r\n       key = entry.getKey();\r\n       objectValue = entry.getValue();\r\n       \r\n       tableCell = tableRow.getCell(0);\r\n       tableCell.setText(key);\r\n       mergeCellHorizontally(table, r, 0, 1);\r\n       tableCell.setWidth((int)(dWidthsPCT[0]+dWidthsPCT[1])+&quot;%&quot;); // col width 0 and 1\r\n       tableCell.setColor(&quot;00B0F0&quot;);\r\n       if (objectValue instanceof String) {\r\n        stringValue = (String)objectValue;\r\n        tableCell = tableRow.getCell(1);\r\n        tableCell.setText(stringValue);\r\n        mergeCellHorizontally(table, r, 1, 2);\r\n        tableCell.setWidth((int)(dWidthsPCT[2]+dWidthsPCT[3])+&quot;%&quot;); // col width 2 and 3\r\n        tableCell.setColor(&quot;C0C0C0&quot;);\r\n       } else if (objectValue instanceof Map) {\r\n        tableCell = tableRow.getCell(1);\r\n        tableCell.setText(multiValues);\r\n        mergeCellHorizontally(table, r, 1, 2);\r\n        tableCell.setWidth((int)(dWidthsPCT[2]+dWidthsPCT[3])+&quot;%&quot;); // col width 2 and 3\r\n        tableCell.setColor(&quot;C0C0C0&quot;);\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        Map&lt;String, String&gt; mapValue = (Map&lt;String, String&gt;)objectValue;  \r\n        for(Map.Entry&lt;String, String&gt; subEntry : mapValue.entrySet()) {\r\n         r++;\r\n         tableRow = getOrCreateTableRow(table, r, widthsPCT);\r\n         hideFirstCell(tableRow);\r\n         key = subEntry.getKey();\r\n         stringValue = subEntry.getValue();\r\n         tableCell = tableRow.getCell(0);\r\n         tableCell.setText(key);\r\n         mergeCellHorizontally(table, r, 0, 1);\r\n         tableCell.setWidth((int)(dWidthsPCT[1]+dWidthsPCT[2])+&quot;%&quot;); // col width 1 and 2\r\n         tableCell.setColor(&quot;00B0F0&quot;);\r\n         tableCell = tableRow.getCell(1);\r\n         tableCell.setText(stringValue);\r\n         tableCell.setWidth(widthsPCT[3]); // col width 3\r\n         tableCell.setColor(&quot;C0C0C0&quot;);\r\n        }         \r\n       }\r\n      }\r\n      paragraph = document.createParagraph();\r\n    \r\n      FileOutputStream out = new FileOutputStream(&quot;./CreateWordKeyValueTable.docx&quot;);\r\n      document.write(out);\r\n      out.close();\r\n      document.close();\r\n    \r\n     }\r\n    }\r\n\r\nIt produces:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RrNLs.png\r\n","title":"How to properly size nested tables in a .DOCX?","body":"<p>I would not see the table in the picture in your question to be table in table. The table-in-table-construct is not really good practice. It should be avoided if possible.</p>\n<p>I see a table having 4 columns where in rows 1, 2 and 5 columns 1 and 2 as well as 3 and 4 are merged. In rows 3 and 4 column 1 is hidden and columns 2 and 3 are merged.</p>\n<p>Following code produces this using Apache POI (current version 5.2.3).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.xwpf.usermodel.*;\n\nimport java.util.Map;\nimport java.util.TreeMap;\n\nimport java.math.BigInteger;\n\npublic class CreateWordKeyValueTable {\n    \n static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\n  XWPFTableCell cell = table.getRow(row).getCell(fromCol);\n  // Try getting the TcPr. Not simply setting an new one every time.\n  org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr tcPr = cell.getCTTc().getTcPr();\n  if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\n  // The first merged cell has grid span property set\n  if (tcPr.isSetGridSpan()) {\n   tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  } else {\n   tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  }\n  // Cells which join (merge) the first one, must be removed\n  for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\n   table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\n  }\n }\n \n static void createGrid(XWPFTable table, int[] colWidths) {\n  //create CTTblGrid for this table with widths of the columns. \n  //necessary for Libreoffice/Openoffice to accept the column widths.\n  //values are in unit twentieths of a point (1/1440 of an inch)\n  //if widths of table cells are in percent, then this is only to store the relations\n  org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblGrid tblGrid = table.getCTTbl().getTblGrid();\n  if (tblGrid == null) tblGrid = table.getCTTbl().addNewTblGrid();\n  for (org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblGridCol tblGridCol : tblGrid.getGridColList()) {\n   tblGrid.removeGridCol(0);  \n  }\n  //first column\n  tblGrid.addNewGridCol().setW(BigInteger.valueOf(colWidths[0]));\n  //other columns\n  for (int c = 1 ; c &lt; colWidths.length; c++) {\n   tblGrid.addNewGridCol().setW(BigInteger.valueOf(colWidths[c]));\n  }     \n }\n \n static void hideFirstCell(XWPFTableRow tableRow) {\n  //set gridBefore\n  org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTrPr trPr = tableRow.getCtRow().getTrPr();\n  if (trPr==null) trPr = tableRow.getCtRow().addNewTrPr();\n  for (org.openxmlformats.schemas.wordprocessingml.x2006.main.CTDecimalNumber gridBefore : trPr.getGridBeforeList()) {\n   trPr.removeGridBefore(0);  \n  }\n  org.openxmlformats.schemas.wordprocessingml.x2006.main.CTDecimalNumber gridBefore = trPr.addNewGridBefore();\n  gridBefore.setVal(BigInteger.valueOf(1));\n  //set wBefore \n  for (org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblWidth wBefore : trPr.getWBeforeList()) {\n   trPr.removeWBefore(0);  \n  }\n  org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTblWidth wBefore = trPr.addNewWBefore();\n  XWPFTableCell tableCell = tableRow.getCell(0);\n  wBefore.setW(tableCell.getWidth());\n  wBefore.setType(org.openxmlformats.schemas.wordprocessingml.x2006.main.STTblWidth.PCT);\n  tableRow.removeCell(0);\n }\n\n\n static XWPFTableRow getOrCreateTableRow(XWPFTable table, int r, String[] colWidths) {\n  //create a row having count of cells having special width\n  XWPFTableRow tableRow = null;\n  if (r==0) {\n   tableRow = table.getRow(0); \n  } else {\n   tableRow = table.createRow();\n  }\n  //fill up cell list up to needed count\n  while (tableRow.getTableCells().size() &lt; colWidths.length) {\n   tableRow.createCell();\n  }\n  //set the widths\n  for (int c = 0 ; c &lt; colWidths.length; c++) {\n   tableRow.getCell(c).setWidth(colWidths[c]);   \n  }\n  return tableRow;\n }\n    \n public static void main(String[] args) throws Exception {\n     \n  Map&lt;String, Object&gt; keyValue = new TreeMap&lt;String, Object&gt;();\n  keyValue.put(&quot;Key1&quot;, &quot;Value1&quot;);\n  Map&lt;String, String&gt; subKeyValue = new TreeMap&lt;String, String&gt;();\n  subKeyValue.put(&quot;Key2a&quot;, &quot;Value2a&quot;);\n  subKeyValue.put(&quot;Key2b&quot;, &quot;Value2b&quot;);\n  keyValue.put(&quot;Key2&quot;, subKeyValue);\n  keyValue.put(&quot;Key3&quot;, &quot;Value3&quot;);\n  \n  System.out.println(keyValue);\n  \n  String multiValues = &quot;Multivalued Key&quot;;\n  \n  double[] dWidthsPCT = new double[]{10d, 30d, 10d, 50d};\n  \n  java.util.stream.Stream&lt;String&gt; stream = \n   java.util.stream.DoubleStream.of(dWidthsPCT).boxed()\n   .map(d -&gt; String.valueOf(d)+&quot;%&quot;);\n  String[] widthsPCT = stream.toArray(String[]::new);\n      \n  XWPFDocument document = new XWPFDocument();\n\n  XWPFParagraph paragraph = document.createParagraph();\n  XWPFRun run = paragraph.createRun();  \n  run.setText(&quot;The table:&quot;);\n\n  XWPFTable table = document.createTable();  \n  table.setWidth(&quot;100%&quot;);\n  \n  //set borders\n  table.setTopBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\n  table.setBottomBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\n  table.setLeftBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\n  table.setRightBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\n  table.setInsideHBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\n  table.setInsideVBorder(XWPFTable.XWPFBorderType.SINGLE   , 32, 0, &quot;FFFFFF&quot;);\n  \n  createGrid(table, new int[]{ // 5000 = 100%\n    (int)Math.round(5000d/(100d/dWidthsPCT[0])), \n    (int)Math.round(5000d/(100d/dWidthsPCT[1])), \n    (int)Math.round(5000d/(100d/dWidthsPCT[2])), \n    (int)Math.round(5000d/(100d/dWidthsPCT[3]))\n   }\n  ); \n  \n  XWPFTableRow tableRow;\n  XWPFTableCell tableCell;\n  String key;\n  Object objectValue;\n  String stringValue;\n  int r = -1;\n  for(Map.Entry&lt;String, Object&gt; entry : keyValue.entrySet()) {\n   r++;   \n   tableRow = getOrCreateTableRow(table, r, widthsPCT);\n   \n   key = entry.getKey();\n   objectValue = entry.getValue();\n   \n   tableCell = tableRow.getCell(0);\n   tableCell.setText(key);\n   mergeCellHorizontally(table, r, 0, 1);\n   tableCell.setWidth((int)(dWidthsPCT[0]+dWidthsPCT[1])+&quot;%&quot;); // col width 0 and 1\n   tableCell.setColor(&quot;00B0F0&quot;);\n   if (objectValue instanceof String) {\n    stringValue = (String)objectValue;\n    tableCell = tableRow.getCell(1);\n    tableCell.setText(stringValue);\n    mergeCellHorizontally(table, r, 1, 2);\n    tableCell.setWidth((int)(dWidthsPCT[2]+dWidthsPCT[3])+&quot;%&quot;); // col width 2 and 3\n    tableCell.setColor(&quot;C0C0C0&quot;);\n   } else if (objectValue instanceof Map) {\n    tableCell = tableRow.getCell(1);\n    tableCell.setText(multiValues);\n    mergeCellHorizontally(table, r, 1, 2);\n    tableCell.setWidth((int)(dWidthsPCT[2]+dWidthsPCT[3])+&quot;%&quot;); // col width 2 and 3\n    tableCell.setColor(&quot;C0C0C0&quot;);\n    @SuppressWarnings(&quot;unchecked&quot;)\n    Map&lt;String, String&gt; mapValue = (Map&lt;String, String&gt;)objectValue;  \n    for(Map.Entry&lt;String, String&gt; subEntry : mapValue.entrySet()) {\n     r++;\n     tableRow = getOrCreateTableRow(table, r, widthsPCT);\n     hideFirstCell(tableRow);\n     key = subEntry.getKey();\n     stringValue = subEntry.getValue();\n     tableCell = tableRow.getCell(0);\n     tableCell.setText(key);\n     mergeCellHorizontally(table, r, 0, 1);\n     tableCell.setWidth((int)(dWidthsPCT[1]+dWidthsPCT[2])+&quot;%&quot;); // col width 1 and 2\n     tableCell.setColor(&quot;00B0F0&quot;);\n     tableCell = tableRow.getCell(1);\n     tableCell.setText(stringValue);\n     tableCell.setWidth(widthsPCT[3]); // col width 3\n     tableCell.setColor(&quot;C0C0C0&quot;);\n    }         \n   }\n  }\n  paragraph = document.createParagraph();\n\n  FileOutputStream out = new FileOutputStream(&quot;./CreateWordKeyValueTable.docx&quot;);\n  document.write(out);\n  out.close();\n  document.close();\n\n }\n}\n</code></pre>\n<p>It produces:</p>\n<p><a href=\"https://i.stack.imgur.com/RrNLs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RrNLs.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1086374,"reputation":1,"user_id":15506927,"display_name":"Anderson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695366541,"creation_date":1687878495,"question_id":76566277,"body_markdown":"I&#39;m trying to create a .docx document, using Apache POI, which is expected to contain a table of Key-Value pairs. Some keys may have another set of Key-Value pair (instead of a single string value), which means I need to create a table inside another table.\r\n\r\nExample table\r\n[![enter image description here][1]][1]\r\n\r\nI hoped that this would be easy to implement if I started from a document template, created in MS Word, so that it already has all the desired formatting. And, it kind of works, for the most part. The only problem is that in cases when there is a nested table in the generated document, MS Word will show a message about the file having some errors and whether he wants Word to recover it, when the user tries to open the file. After clicking &#39;Yes&#39;, the &quot;recovered&quot; file will appear correct. \r\n\r\nAs you can see in the above example image, I want it to have an &quot;indent&quot; for the next level (nested table). Which is achieved by having the template table formatted with 97% width and right alignment.\r\n\r\nFrom what I could find, the differences in the document.xml from the &quot;recovered&quot; document to the one I created are only in the values for column width in the \\&lt;w:tblGrid\\&gt; element. However, It still unclear to me how those values are calculated.\r\n\r\nI have tried adjusting the \\&lt;w:tblGrid\\&gt; in the nested table by setting the width to 97% of those in the parent table, and played a bit around that idea. But, still no lucky.\r\n\r\nIf I force it to be generated with the exact same values, then it will be opened by MS Word without any errors. So this confirms the grid sizes are the problem. But, of course, I can&#39;t rely on hard-coded values.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uvYgu.png","title":"How to properly size nested tables in a .DOCX?","body":"<p>I'm trying to create a .docx document, using Apache POI, which is expected to contain a table of Key-Value pairs. Some keys may have another set of Key-Value pair (instead of a single string value), which means I need to create a table inside another table.</p>\n<p>Example table\n<a href=\"https://i.stack.imgur.com/uvYgu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uvYgu.png\" alt=\"enter image description here\" /></a></p>\n<p>I hoped that this would be easy to implement if I started from a document template, created in MS Word, so that it already has all the desired formatting. And, it kind of works, for the most part. The only problem is that in cases when there is a nested table in the generated document, MS Word will show a message about the file having some errors and whether he wants Word to recover it, when the user tries to open the file. After clicking 'Yes', the &quot;recovered&quot; file will appear correct.</p>\n<p>As you can see in the above example image, I want it to have an &quot;indent&quot; for the next level (nested table). Which is achieved by having the template table formatted with 97% width and right alignment.</p>\n<p>From what I could find, the differences in the document.xml from the &quot;recovered&quot; document to the one I created are only in the values for column width in the &lt;w:tblGrid&gt; element. However, It still unclear to me how those values are calculated.</p>\n<p>I have tried adjusting the &lt;w:tblGrid&gt; in the nested table by setting the width to 97% of those in the parent table, and played a bit around that idea. But, still no lucky.</p>\n<p>If I force it to be generated with the exact same values, then it will be opened by MS Word without any errors. So this confirms the grid sizes are the problem. But, of course, I can't rely on hard-coded values.</p>\n"},{"tags":["java","singly-linked-list"],"comments":[{"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"score":1,"creation_date":1492004357,"post_id":43371172,"comment_id":73804238,"body_markdown":"`if (userInputNumber &lt; 0)`? Also i might check how the native implementation of a `LinkedList` does work. there no chance for you to iterate through it,","body":"<code>if (userInputNumber &lt; 0)</code>? Also i might check how the native implementation of a <code>LinkedList</code> does work. there no chance for you to iterate through it,"},{"owner":{"account_id":10662772,"reputation":23,"user_id":7850267,"display_name":"Prem"},"score":0,"creation_date":1492004509,"post_id":43371172,"comment_id":73804365,"body_markdown":"Can you give me the code for this and linking the numbers? It will be very helpful for me.","body":"Can you give me the code for this and linking the numbers? It will be very helpful for me."},{"owner":{"account_id":4942701,"reputation":665,"user_id":3978990,"display_name":"Vladimir Parfenov"},"score":0,"creation_date":1492004580,"post_id":43371172,"comment_id":73804416,"body_markdown":"Your class MyList isn&#39;t implementation of Linked List structure. Now you have list of lists of lists...","body":"Your class MyList isn&#39;t implementation of Linked List structure. Now you have list of lists of lists..."},{"owner":{"account_id":10662772,"reputation":23,"user_id":7850267,"display_name":"Prem"},"score":0,"creation_date":1492004747,"post_id":43371172,"comment_id":73804562,"body_markdown":"here I want to make linked list of input numbers given by user. for example a use wants to make a singly linked list of 10  positive number. but if he gives any negative number it will warn the user to input positive number. I am unable to create linking between numbers or making the linked list.","body":"here I want to make linked list of input numbers given by user. for example a use wants to make a singly linked list of 10  positive number. but if he gives any negative number it will warn the user to input positive number. I am unable to create linking between numbers or making the linked list."},{"owner":{"account_id":10662772,"reputation":23,"user_id":7850267,"display_name":"Prem"},"score":0,"creation_date":1492004913,"post_id":43371172,"comment_id":73804692,"body_markdown":"can you give me proper solution @VladimirParfenov","body":"can you give me proper solution @VladimirParfenov"},{"owner":{"account_id":4942701,"reputation":665,"user_id":3978990,"display_name":"Vladimir Parfenov"},"score":0,"creation_date":1492005483,"post_id":43371172,"comment_id":73805155,"body_markdown":"@Prem First, you need to learn linked lists as data structures in theory. You can read Sedgewick&#39;s or Lafore&#39;s books about data structures and algorithms in java.","body":"@Prem First, you need to learn linked lists as data structures in theory. You can read Sedgewick&#39;s or Lafore&#39;s books about data structures and algorithms in java."}],"answers":[{"tags":[],"owner":{"account_id":4034273,"reputation":383,"user_id":3319324,"display_name":"M. Haverbier"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492074803,"creation_date":1492074803,"answer_id":43388118,"question_id":43371172,"body_markdown":"This could help you understand Linked Lists:\r\n[LinkedList in wikipedia][1]\r\n\r\nA LinkedList consists of Nodes. A node could look like this:\r\n\r\n    class Node {\r\n      Node previousNode, nextNode;\r\n      int value;\r\n\r\n      public Node getLastNode() {\r\n        // traverse nextNode till it is null.. return the Node before.\r\n      }\r\n    }\r\n\r\nMake a method for reading the user input, which returns the number entered.\r\n\r\n    private int getUserInput() {\r\n      int result = -1;\r\n      Scanner userInput= new Scanner(System.in);\r\n      while ( result &lt; 0) {\r\n        result = userInput.nextInt();\r\n      }\r\n      return result;\r\n    }\r\n\r\nAfter that you can create your LinkedList by creating Nodes as much as needed.\r\n\r\n    Node myLinkedList = new Node();\r\n    myLinkedList.value = 0;\r\n    for (int i = 1; i &lt; getUserInputResult; i++) {\r\n      var newNode = new Node();\r\n      newNode.value = i;\r\n      // concat new Node to last Node in List;\r\n      var lastNodeInList = myLinkedList.getLastNode();\r\n      lastNodeInList .NextNode = newNode;\r\n      newNode.previousNode = lastNodeInList;\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Linked_list","title":"Linked List User Input","body":"<p>This could help you understand Linked Lists:\n<a href=\"https://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow noreferrer\">LinkedList in wikipedia</a></p>\n\n<p>A LinkedList consists of Nodes. A node could look like this:</p>\n\n<pre><code>class Node {\n  Node previousNode, nextNode;\n  int value;\n\n  public Node getLastNode() {\n    // traverse nextNode till it is null.. return the Node before.\n  }\n}\n</code></pre>\n\n<p>Make a method for reading the user input, which returns the number entered.</p>\n\n<pre><code>private int getUserInput() {\n  int result = -1;\n  Scanner userInput= new Scanner(System.in);\n  while ( result &lt; 0) {\n    result = userInput.nextInt();\n  }\n  return result;\n}\n</code></pre>\n\n<p>After that you can create your LinkedList by creating Nodes as much as needed.</p>\n\n<pre><code>Node myLinkedList = new Node();\nmyLinkedList.value = 0;\nfor (int i = 1; i &lt; getUserInputResult; i++) {\n  var newNode = new Node();\n  newNode.value = i;\n  // concat new Node to last Node in List;\n  var lastNodeInList = myLinkedList.getLastNode();\n  lastNodeInList .NextNode = newNode;\n  newNode.previousNode = lastNodeInList;\n}\n</code></pre>\n"}],"owner":{"account_id":10662772,"reputation":23,"user_id":7850267,"display_name":"Prem"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9907,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695366445,"creation_date":1492004215,"question_id":43371172,"body_markdown":"I am trying to make a linked list which will take input from user that how many number he wants to make the linked list not using the built in LinkedList function. but if the user input a negative number it will give message the user to input a positive number. I have done the code for user input but finding very difficulty for other parts-negative input and linking the numbers.can anyone please give me these parts of codes. \r\n\r\n   \r\n\r\n     import java.io.*;\r\n    import java.util.Scanner;\r\n    \r\n        class MyList{\r\n    \tpublic MyList firstLink,lastLink;\r\n    \tint info,size;\r\n    \tMyList link;\r\n    \tprivate MyList next;\r\n    \t\r\n    \tMyList(){\r\n    \t\tthis.link=null;\r\n    \t\tfirstLink = null;\r\n    \t\tlastLink=null;\r\n    \t}\r\n    \tpublic boolean isEmpty(){\r\n    \t\t return(firstLink == null);\r\n    \t }\r\n    \t \r\n    \t public void showMyList() {\r\n    \t\t MyList currentLink = firstLink;\r\n    \t        System.out.print(&quot;List: &quot;);\r\n    \t        while(currentLink != null) {\r\n    \t            currentLink.showMyList();\r\n    \t            currentLink = currentLink.lastLink;\r\n    \t        }\r\n    \t        System.out.println(&quot;&quot;);\r\n    \t    }\r\n    }\r\n    \r\n        public class MyLinkedList {\r\n    \t\r\n    \tpublic static void main(String[] args){\r\n    \t\t\r\n    \t\tMyList newMyList=new MyList();\r\n    \t\tScanner userInput= new Scanner(System.in);\r\n    \t\t\r\n    \t\tint userInputNumber;\r\n    \t\tSystem.out.println(&quot;Enter Total Data&quot;);\r\n    \t\tuserInputNumber = userInput.nextInt();\r\n    \t\t\tint i=1;\r\n    \t\t\twhile(i&lt;=userInputNumber){\r\n    \t\t\tSystem.out.println(&quot;Enter Data &quot;+ i +&quot;:&quot;);\r\n    \t\t\ti++; \r\n    \t\t\tnewMyList.info=userInput.nextInt();\r\n    \t\t\t}\r\n    \t\t\tif(newMyList.firstLink!=null){\r\n    \t\t\t\tnewMyList=newMyList.firstLink;\r\n    \t\t\t\tnewMyList=newMyList.lastLink;\r\n    \t\t\t\tnewMyList.firstLink=newMyList.firstLink.link;\r\n        \t}\r\n    \t}\r\n    }\r\n\r\n","title":"Linked List User Input","body":"<p>I am trying to make a linked list which will take input from user that how many number he wants to make the linked list not using the built in LinkedList function. but if the user input a negative number it will give message the user to input a positive number. I have done the code for user input but finding very difficulty for other parts-negative input and linking the numbers.can anyone please give me these parts of codes. </p>\n\n<pre><code> import java.io.*;\nimport java.util.Scanner;\n\n    class MyList{\n    public MyList firstLink,lastLink;\n    int info,size;\n    MyList link;\n    private MyList next;\n\n    MyList(){\n        this.link=null;\n        firstLink = null;\n        lastLink=null;\n    }\n    public boolean isEmpty(){\n         return(firstLink == null);\n     }\n\n     public void showMyList() {\n         MyList currentLink = firstLink;\n            System.out.print(\"List: \");\n            while(currentLink != null) {\n                currentLink.showMyList();\n                currentLink = currentLink.lastLink;\n            }\n            System.out.println(\"\");\n        }\n}\n\n    public class MyLinkedList {\n\n    public static void main(String[] args){\n\n        MyList newMyList=new MyList();\n        Scanner userInput= new Scanner(System.in);\n\n        int userInputNumber;\n        System.out.println(\"Enter Total Data\");\n        userInputNumber = userInput.nextInt();\n            int i=1;\n            while(i&lt;=userInputNumber){\n            System.out.println(\"Enter Data \"+ i +\":\");\n            i++; \n            newMyList.info=userInput.nextInt();\n            }\n            if(newMyList.firstLink!=null){\n                newMyList=newMyList.firstLink;\n                newMyList=newMyList.lastLink;\n                newMyList.firstLink=newMyList.firstLink.link;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","if-statement"],"comments":[{"owner":{"account_id":6077988,"reputation":1434,"user_id":4744661,"accept_rate":75,"display_name":"IAspireToBeGladOS"},"score":0,"creation_date":1428030636,"post_id":29424984,"comment_id":47022491,"body_markdown":"@HovercraftFullOfEels No, actually... my question specifically (as stated in the beginning of the post) is that I don&#39;t know how to compare the given user input with the array of correct answers. For example, if the answers are [1,2,3,4,5] and the user input is [1,2,3,8,5] it should report that one element differed. What I need to know is what is a way I could do that?","body":"@HovercraftFullOfEels No, actually... my question specifically (as stated in the beginning of the post) is that I don&#39;t know how to compare the given user input with the array of correct answers. For example, if the answers are [1,2,3,4,5] and the user input is [1,2,3,8,5] it should report that one element differed. What I need to know is what is a way I could do that?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1428030854,"post_id":29424984,"comment_id":47022527,"body_markdown":"Inside your for-loop if boolean check, you&#39;re hard-coding the array item checked in the answer array to be the 0th item only and not the answer item corresponding to the ith question: `if (answer.compareTo(answerkey[0])==0){`. Shouldn&#39;t it be `if (answer.compareTo(answerkey[i]) == 0) {` or `if (answer.equals(answerkey[i])) {`?","body":"Inside your for-loop if boolean check, you&#39;re hard-coding the array item checked in the answer array to be the 0th item only and not the answer item corresponding to the ith question: <code>if (answer.compareTo(answerkey[0])==0){</code>. Shouldn&#39;t it be <code>if (answer.compareTo(answerkey[i]) == 0) {</code> or <code>if (answer.equals(answerkey[i])) {</code>?"},{"owner":{"account_id":6077988,"reputation":1434,"user_id":4744661,"accept_rate":75,"display_name":"IAspireToBeGladOS"},"score":0,"creation_date":1428031234,"post_id":29424984,"comment_id":47022589,"body_markdown":"AH. Unsure how I missed that, thank you so much.","body":"AH. Unsure how I missed that, thank you so much."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1428031353,"post_id":29424984,"comment_id":47022605,"body_markdown":"And I totally missed your question -- sorry about that.","body":"And I totally missed your question -- sorry about that."}],"answers":[{"tags":[],"owner":{"account_id":4070058,"reputation":132,"user_id":3738337,"accept_rate":75,"display_name":"mrfixij"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1428032462,"creation_date":1428032462,"answer_id":29425874,"question_id":29424984,"body_markdown":"Use a dynamic index accessing variable.  Right now, every answer you have will be compared to the first answer (&quot;b&quot;)\r\n\r\nAn example of this would be\r\n\r\n    String[] myArray = { //initialize values here\r\n                           };\r\n\r\n    for (int index = 0; index &lt;= myArray.length-1; index++){\r\n        if (answer.equals(myArray[index]){\r\n            correct++;}\r\n        else{\r\n            incorrect++;}\r\n        }","title":"Making a quiz with Java using arrays. Need pointers with grading answers","body":"<p>Use a dynamic index accessing variable.  Right now, every answer you have will be compared to the first answer (\"b\")</p>\n\n<p>An example of this would be</p>\n\n<pre><code>String[] myArray = { //initialize values here\n                       };\n\nfor (int index = 0; index &lt;= myArray.length-1; index++){\n    if (answer.equals(myArray[index]){\n        correct++;}\n    else{\n        incorrect++;}\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12677226,"reputation":1,"user_id":9212435,"display_name":"HopingToPassITCourse"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1515842280,"creation_date":1515841234,"answer_id":48239208,"question_id":29424984,"body_markdown":"Try this code on comparing the user input with the array `myArray`.\r\n\r\nHope this helps.\r\n\r\n    String[] myArray= { //initialize values here \r\n    };\r\n    \r\n\r\n    if ((myArray[0]).equals(answer)){\r\n        correct++;\r\n    } else{\r\n        incorrect++;\r\n    } ","title":"Making a quiz with Java using arrays. Need pointers with grading answers","body":"<p>Try this code on comparing the user input with the array <code>myArray</code>.</p>\n\n<p>Hope this helps.</p>\n\n<pre><code>String[] myArray= { //initialize values here \n};\n\n\nif ((myArray[0]).equals(answer)){\n    correct++;\n} else{\n    incorrect++;\n} \n</code></pre>\n"}],"owner":{"account_id":6077988,"reputation":1434,"user_id":4744661,"accept_rate":75,"display_name":"IAspireToBeGladOS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17904,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695366445,"creation_date":1428024350,"question_id":29424984,"body_markdown":"This is for a class. I&#39;m having trouble figuring out how to best compare the user input with the array answerkey and consequently grade the answers given. I tried searching for a while but wasn&#39;t able to find what I needed, so any pointers would be much appreciated!\r\n\r\nThe prompt for the exercise is: \r\n\r\nWrite a DMV program that grades the written portion of the driver&#39;s license exam. It should have 20 multiple choice questions. It should ask the user to enter the student’s answers for each of the 20 questions, which should be stored in another array. After the student’s answer have been entered, the program should display a message indicating whether the student passed or failed the exam.( A student must correctly answer 15 of the 20 questions to pas the exam). It should then display the total number of correctly answered questions, and the total number of incorrectly answered questions. Input validation: Only accept the letters A, B, C or D.\r\n\r\nMy code so far:\r\n\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n            \r\n        String[] answerkey = {&quot;b&quot;,&quot;d&quot;,&quot;a&quot;,&quot;a&quot;,&quot;c&quot;,&quot;a&quot;,&quot;a&quot;,&quot;d&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;d&quot;,&quot;c&quot;,&quot;a&quot;,&quot;c&quot;,&quot;c&quot;,&quot;a&quot;,&quot;d&quot;,&quot;a&quot;,&quot;a&quot;};\r\n        int n = 0;\r\n            \r\n            int correct = 0;\r\n            int incorrect = 0;\r\n            String answer = &quot;&quot;;\r\n\r\n            for (int i = 0; i &lt; 20; i++){\r\n                System.out.println(&quot;Please enter your answers. Acceptable input is limited to A,B,C and D.\\n&quot;);\r\n                answer = input.next();\r\n\r\n                if (answer.compareTo(answerkey[0])==0){\r\n                    correct++;} \r\n                else {incorrect++;}\r\n            }\r\n                \r\n            if (correct &gt; 14){\r\n                System.out.println(&quot;You passed.&quot;);\r\n            } else {\r\n               System.out.println(&quot;You failed.&quot;);\r\n            }\r\n            System.out.println(&quot;You have &quot; + correct + &quot; correct answers.&quot;);\r\n            System.out.println(&quot;You have &quot; + incorrect + &quot; incorrect answers.&quot;);\r\n        \r\n    }","title":"Making a quiz with Java using arrays. Need pointers with grading answers","body":"<p>This is for a class. I'm having trouble figuring out how to best compare the user input with the array answerkey and consequently grade the answers given. I tried searching for a while but wasn't able to find what I needed, so any pointers would be much appreciated!</p>\n\n<p>The prompt for the exercise is: </p>\n\n<p>Write a DMV program that grades the written portion of the driver's license exam. It should have 20 multiple choice questions. It should ask the user to enter the student’s answers for each of the 20 questions, which should be stored in another array. After the student’s answer have been entered, the program should display a message indicating whether the student passed or failed the exam.( A student must correctly answer 15 of the 20 questions to pas the exam). It should then display the total number of correctly answered questions, and the total number of incorrectly answered questions. Input validation: Only accept the letters A, B, C or D.</p>\n\n<p>My code so far:</p>\n\n<pre><code>public static void main(String[] args) {\n    Scanner input = new Scanner(System.in);\n\n    String[] answerkey = {\"b\",\"d\",\"a\",\"a\",\"c\",\"a\",\"a\",\"d\",\"b\",\"b\",\"b\",\"d\",\"c\",\"a\",\"c\",\"c\",\"a\",\"d\",\"a\",\"a\"};\n    int n = 0;\n\n        int correct = 0;\n        int incorrect = 0;\n        String answer = \"\";\n\n        for (int i = 0; i &lt; 20; i++){\n            System.out.println(\"Please enter your answers. Acceptable input is limited to A,B,C and D.\\n\");\n            answer = input.next();\n\n            if (answer.compareTo(answerkey[0])==0){\n                correct++;} \n            else {incorrect++;}\n        }\n\n        if (correct &gt; 14){\n            System.out.println(\"You passed.\");\n        } else {\n           System.out.println(\"You failed.\");\n        }\n        System.out.println(\"You have \" + correct + \" correct answers.\");\n        System.out.println(\"You have \" + incorrect + \" incorrect answers.\");\n\n}\n</code></pre>\n"},{"tags":["java","mysql","tomcat","jdbc","amazon-web-services"],"comments":[{"owner":{"account_id":407817,"reputation":2467,"user_id":778109,"accept_rate":36,"display_name":"Garreth McDaid"},"score":0,"creation_date":1397127276,"post_id":22985904,"comment_id":35102171,"body_markdown":"Where is the Tomcat server? In Amazon EC2 or elsewhere? Amazon RDS instances are protected by Security Groups. You need to ensure your Security Group is set up correctly.","body":"Where is the Tomcat server? In Amazon EC2 or elsewhere? Amazon RDS instances are protected by Security Groups. You need to ensure your Security Group is set up correctly."},{"owner":{"account_id":1916207,"reputation":2821,"user_id":1728753,"accept_rate":71,"display_name":"teekib"},"score":0,"creation_date":1397127698,"post_id":22985904,"comment_id":35102454,"body_markdown":"@GarrethMcDaid yes tomcat is in EC2, in security groups gave all permission also Added my IP for MYSQl rule","body":"@GarrethMcDaid yes tomcat is in EC2, in security groups gave all permission also Added my IP for MYSQl rule"},{"owner":{"account_id":407817,"reputation":2467,"user_id":778109,"accept_rate":36,"display_name":"Garreth McDaid"},"score":0,"creation_date":1397139622,"post_id":22985904,"comment_id":35111168,"body_markdown":"It could be that your instance is in a VPC and your RDS isn&#39;t set up with a VPC subnet.","body":"It could be that your instance is in a VPC and your RDS isn&#39;t set up with a VPC subnet."}],"answers":[{"tags":[],"owner":{"account_id":407817,"reputation":2467,"user_id":778109,"accept_rate":36,"display_name":"Garreth McDaid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397139744,"creation_date":1397139744,"answer_id":22990835,"question_id":22985904,"body_markdown":"It could be that your instance is in a VPC and your RDS instance isn&#39;t set up in a VPC subnet group.\r\n\r\nIf you want to connect to an RDS instance from a server instance in a VPC, your RDS instance has to be deployed in a VPC subnet.\r\n\r\nhttp://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_VPC.CreateDBSubnetGroup.html","title":"Unable to Access RDS with JDBC in AWS","body":"<p>It could be that your instance is in a VPC and your RDS instance isn't set up in a VPC subnet group.</p>\n\n<p>If you want to connect to an RDS instance from a server instance in a VPC, your RDS instance has to be deployed in a VPC subnet.</p>\n\n<p><a href=\"http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_VPC.CreateDBSubnetGroup.html\" rel=\"nofollow\">http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_VPC.CreateDBSubnetGroup.html</a></p>\n"}],"owner":{"account_id":1916207,"reputation":2821,"user_id":1728753,"accept_rate":71,"display_name":"teekib"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12237,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1695366445,"creation_date":1397126992,"question_id":22985904,"body_markdown":"I am finding hard time connecting to RDS using JDBC connection, I am able to connect through MYSQL workbench, I deployed my WAR file in A WSwhich is running tomcat, this WAR file has my JDBCcode connecting to RDS, but I am not even able to establish connection.\r\nMy code is as below:-\r\n\r\n    public static Connection getconnection(){\r\n    \r\n    \t String connectionUrl = &quot;jdbc:mysql://testinstance.cj3ixhryi3fb.us-west-2.rds.amazonaws.com:3306/testDB&quot;;\r\n    \t    String dbUser = &quot;testuser&quot;;\r\n    \t    String dbPwd = &quot;usertest&quot;;\r\n    \t    Connection conn = null;\r\n    \t    \r\n    \t    try {\r\n    \t\t\tconn = (Connection) DriverManager.getConnection(connectionUrl, dbUser, dbPwd);\r\n    \t\t\tSystem.out.println(&quot;conn Available&quot;);\r\n    \t\t} catch (SQLException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t\tSystem.out.println(&quot;fetch otion error&quot;+e.getLocalizedMessage());\r\n    \t\t}\r\n    \t    \r\n    \t    return conn;\r\n    }   \r\n\r\nI included all the necessary jar files, and rules security groups but no luck.\r\n\r\n**I am using the EC2 security group for RDS. Does RDS will use ec2 security groups?**\r\nor I need to have different security group for RDS?\r\n\r\n\r\nthe testinstance is a working link if any one wanna test.","title":"Unable to Access RDS with JDBC in AWS","body":"<p>I am finding hard time connecting to RDS using JDBC connection, I am able to connect through MYSQL workbench, I deployed my WAR file in A WSwhich is running tomcat, this WAR file has my JDBCcode connecting to RDS, but I am not even able to establish connection.\nMy code is as below:-</p>\n\n<pre><code>public static Connection getconnection(){\n\n     String connectionUrl = \"jdbc:mysql://testinstance.cj3ixhryi3fb.us-west-2.rds.amazonaws.com:3306/testDB\";\n        String dbUser = \"testuser\";\n        String dbPwd = \"usertest\";\n        Connection conn = null;\n\n        try {\n            conn = (Connection) DriverManager.getConnection(connectionUrl, dbUser, dbPwd);\n            System.out.println(\"conn Available\");\n        } catch (SQLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n            System.out.println(\"fetch otion error\"+e.getLocalizedMessage());\n        }\n\n        return conn;\n}   \n</code></pre>\n\n<p>I included all the necessary jar files, and rules security groups but no luck.</p>\n\n<p><strong>I am using the EC2 security group for RDS. Does RDS will use ec2 security groups?</strong>\nor I need to have different security group for RDS?</p>\n\n<p>the testinstance is a working link if any one wanna test.</p>\n"},{"tags":["java","spring","jpa"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1695364295,"post_id":77155291,"comment_id":136016978,"body_markdown":"What do you mean with &quot;distinct&quot;? like &quot;onetable&quot; and &quot;twotable&quot; could be the same object?","body":"What do you mean with &quot;distinct&quot;? like &quot;onetable&quot; and &quot;twotable&quot; could be the same object?"}],"answers":[{"comments":[{"owner":{"account_id":22951251,"reputation":23,"user_id":17082496,"display_name":"new001"},"score":0,"creation_date":1695400742,"post_id":77155306,"comment_id":136024244,"body_markdown":"i have another issue that given query return 10 same tid and my query is pegeble and per query count is 10.my case is after distinct it return only one my other data not pick form there any chance for that.\nex:order by onetable .tid asc fetch first 10 rows only","body":"i have another issue that given query return 10 same tid and my query is pegeble and per query count is 10.my case is after distinct it return only one my other data not pick form there any chance for that. ex:order by onetable .tid asc fetch first 10 rows only"}],"tags":[],"owner":{"account_id":29506577,"reputation":56,"user_id":22612418,"display_name":"coderMan"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695364250,"creation_date":1695364250,"answer_id":77155306,"question_id":77155291,"body_markdown":"To distinct the results based on the &quot;tid&quot; column and get a unique result set, you can use a Set to keep track of unique tid values while iterating through the datasetresults. Here&#39;s how you can modify your code to achieve this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-python --&gt;\r\n\r\n    Page&lt;Object[]&gt; datasetresults = repository.findtest(tid, PageRequest.of(page, per_page, Sort.by(s, sort)));\r\n\r\n    // Create a Set to keep track of unique tid values\r\n    Set&lt;Long&gt; uniqueTids = new HashSet&lt;&gt;();\r\n\r\n    for (Object[] object : datasetresults.getContent()) {\r\n        if (object[0] instanceof onetable &amp;&amp; object[1] instanceof twotable) {\r\n            onetable onetable = (onetable) object[0];\r\n            twotable twotable = (twotable) object[1];\r\n\r\n            // Check if the tid is unique\r\n            if (uniqueTids.add(onetable.getTid())) {\r\n                // This tid is unique, process the result\r\n                TestBean test = new TestBean();\r\n\r\n                // Add your code here to process the unique result\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIn this code, we use a Set&lt;Long&gt; called uniqueTids to keep track of unique &quot;tid&quot; values. Before processing each result, we check if the &quot;tid&quot; is already in the set using uniqueTids.add(onetable.getTid()). If it&#39;s a new &quot;tid,&quot; we process the result. This ensures that only unique &quot;tid&quot; values are processed, giving you a distinct result set based on &quot;tid.&quot;\r\n","title":"how to distinct below result using java","body":"<p>To distinct the results based on the &quot;tid&quot; column and get a unique result set, you can use a Set to keep track of unique tid values while iterating through the datasetresults. Here's how you can modify your code to achieve this:</p>\n<pre class=\"lang-python prettyprint-override\"><code>Page&lt;Object[]&gt; datasetresults = repository.findtest(tid, PageRequest.of(page, per_page, Sort.by(s, sort)));\n\n// Create a Set to keep track of unique tid values\nSet&lt;Long&gt; uniqueTids = new HashSet&lt;&gt;();\n\nfor (Object[] object : datasetresults.getContent()) {\n    if (object[0] instanceof onetable &amp;&amp; object[1] instanceof twotable) {\n        onetable onetable = (onetable) object[0];\n        twotable twotable = (twotable) object[1];\n\n        // Check if the tid is unique\n        if (uniqueTids.add(onetable.getTid())) {\n            // This tid is unique, process the result\n            TestBean test = new TestBean();\n\n            // Add your code here to process the unique result\n        }\n    }\n}\n</code></pre>\n<p>In this code, we use a Set called uniqueTids to keep track of unique &quot;tid&quot; values. Before processing each result, we check if the &quot;tid&quot; is already in the set using uniqueTids.add(onetable.getTid()). If it's a new &quot;tid,&quot; we process the result. This ensures that only unique &quot;tid&quot; values are processed, giving you a distinct result set based on &quot;tid.&quot;</p>\n"}],"owner":{"account_id":22951251,"reputation":23,"user_id":17082496,"display_name":"new001"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77155306,"answer_count":1,"score":2,"last_activity_date":1695365417,"creation_date":1695364017,"question_id":77155291,"body_markdown":"How to distinct below result using java? My code is as per below:\r\n\r\n    Page&lt;Object[]&gt; datasetresults=repository.findtest(tid,\r\n    \t\t\t\t\tPageRequest.of(page, per_page, Sort.by(s, sort)));\r\n\r\n\tfor (Object[] object : datasetresults.getContent()) {\r\n\t\tif (object[0] instanceof onetable ) {\r\n\t\t\tonetable onetable = (onetable) object[0];\r\n\t\t\tTestBean test = new TestBean();\r\n\t\t}\t\r\n\t}\r\n\r\nI need to distinct using `tid` to get one unique result set.\r\n","title":"how to distinct below result using java","body":"<p>How to distinct below result using java? My code is as per below:</p>\n<pre><code>Page&lt;Object[]&gt; datasetresults=repository.findtest(tid,\n                    PageRequest.of(page, per_page, Sort.by(s, sort)));\n\nfor (Object[] object : datasetresults.getContent()) {\n    if (object[0] instanceof onetable ) {\n        onetable onetable = (onetable) object[0];\n        TestBean test = new TestBean();\n    }   \n}\n</code></pre>\n<p>I need to distinct using <code>tid</code> to get one unique result set.</p>\n"},{"tags":["java","mysql","docker","docker-compose"],"comments":[{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695321579,"post_id":77152819,"comment_id":136012486,"body_markdown":"In case it&#39;s relevant, Windows Task Manager shows two `mysqld` processes (maybe it has something to do with 3306 being occupied). No other MySQL-related processes were discovered","body":"In case it&#39;s relevant, Windows Task Manager shows two <code>mysqld</code> processes (maybe it has something to do with 3306 being occupied). No other MySQL-related processes were discovered"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695321920,"post_id":77152819,"comment_id":136012545,"body_markdown":"Maybe, I need to add and run some additional image (Tomcat, for example)?","body":"Maybe, I need to add and run some additional image (Tomcat, for example)?"},{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695326959,"post_id":77152819,"comment_id":136013373,"body_markdown":"You&#39;re declaring env variables like SPRING_DATASOURCE_URL but you&#39;re not using them anywhere. Uncomment your application.properties file and configure the properties like spring.datasource.url=${SPRING_DATASOURCE_URL} and see if it works.","body":"You&#39;re declaring env variables like SPRING_DATASOURCE_URL but you&#39;re not using them anywhere. Uncomment your application.properties file and configure the properties like spring.datasource.url=${SPRING_DATASOURCE_URL} and see if it works."},{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695327093,"post_id":77152819,"comment_id":136013399,"body_markdown":"Alternatively, you can check the answer in here https://stackoverflow.com/questions/66169935/how-to-set-spring-datasource-url-inside-a-docker-container","body":"Alternatively, you can check the answer in here <a href=\"https://stackoverflow.com/questions/66169935/how-to-set-spring-datasource-url-inside-a-docker-container\" title=\"how to set spring datasource url inside a docker container\">stackoverflow.com/questions/66169935/&hellip;</a>"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1695340365,"post_id":77152819,"comment_id":136014988,"body_markdown":"Connections between containers don&#39;t use (or require) `ports:`.  In the Compose file setting `SPRING_DATASOURCE_URL`, does changing the port number back to the standard MySQL port 3306 help?  (Spring knows how to set the `spring.datasource.url` property from that environment variable, you don&#39;t need to change your jar file at all.)  Also see _e.g._ [Docker MySQL connection refused on different port](https://stackoverflow.com/questions/54993731/docker-mysql-connection-refused-on-different-port).","body":"Connections between containers don&#39;t use (or require) <code>ports:</code>.  In the Compose file setting <code>SPRING_DATASOURCE_URL</code>, does changing the port number back to the standard MySQL port 3306 help?  (Spring knows how to set the <code>spring.datasource.url</code> property from that environment variable, you don&#39;t need to change your jar file at all.)  Also see <i>e.g.</i> <a href=\"https://stackoverflow.com/questions/54993731/docker-mysql-connection-refused-on-different-port\">Docker MySQL connection refused on different port</a>."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695361868,"post_id":77152819,"comment_id":136016687,"body_markdown":"@CaptainAye thank you, you helped me a lot. See the answer","body":"@CaptainAye thank you, you helped me a lot. See the answer"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695361873,"post_id":77152819,"comment_id":136016688,"body_markdown":"@DavidMaze thank you, you helped me a lot. See the answer","body":"@DavidMaze thank you, you helped me a lot. See the answer"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695361998,"post_id":77152819,"comment_id":136016697,"body_markdown":"It seems to work, but I&#39;m not 100% certain. I now can&#39;t just open Workbench and make sure the changes in the UI are actually reflected in the database with a simple `SELECT` query. Can I somehow access that database data from outside the Docker container? I can&#39;t just type `localhost:3307` in my browser and get some web interface to perform my queries (in fact, I don&#39;t get any meaningful response at all when I do that)","body":"It seems to work, but I&#39;m not 100% certain. I now can&#39;t just open Workbench and make sure the changes in the UI are actually reflected in the database with a simple <code>SELECT</code> query. Can I somehow access that database data from outside the Docker container? I can&#39;t just type <code>localhost:3307</code> in my browser and get some web interface to perform my queries (in fact, I don&#39;t get any meaningful response at all when I do that)"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695363886,"post_id":77152819,"comment_id":136016936,"body_markdown":"Once I open MySQL 8.0 Command Line Client, I&#39;m simply prompted to enter a password, presumably from my root user. At this point, I can&#39;t execute any commands relating to my Docker db. Once I enter the password, I&#39;m automatically connected to my local MySQL server and the only thing I can do is to execute queries. Can MySQL Command Line Client even help me in achieving my goal (to connect to the Docker db and execute a query to check my web app updates database data, not just the UI)? `mysql` doesn&#39;t work in a regular Powershell","body":"Once I open MySQL 8.0 Command Line Client, I&#39;m simply prompted to enter a password, presumably from my root user. At this point, I can&#39;t execute any commands relating to my Docker db. Once I enter the password, I&#39;m automatically connected to my local MySQL server and the only thing I can do is to execute queries. Can MySQL Command Line Client even help me in achieving my goal (to connect to the Docker db and execute a query to check my web app updates database data, not just the UI)? <code>mysql</code> doesn&#39;t work in a regular Powershell"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695364846,"post_id":77152819,"comment_id":136017051,"body_markdown":"Oh, I figured that out. See the answer&#39;s edit","body":"Oh, I figured that out. See the answer&#39;s edit"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695369112,"post_id":77152819,"comment_id":136017834,"body_markdown":"What kinda annoys me a bit, though, is that 3307:3306 mismatch. Is that the right way to do it after all? 3306:3306 doesn&#39;t work, but maybe I was supposed to resolve that some other way","body":"What kinda annoys me a bit, though, is that 3307:3306 mismatch. Is that the right way to do it after all? 3306:3306 doesn&#39;t work, but maybe I was supposed to resolve that some other way"}],"answers":[{"tags":[],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695365235,"creation_date":1695361789,"answer_id":77155120,"question_id":77152819,"body_markdown":"My problem had to do with these mistakes\r\n\r\n#### 1. Not including the properties\r\nI had to reference the `docker-compose.yml` properties in my `application.properties` file\r\n```properties\r\nspring.datasource.url=${SPRING_DATASOURCE_URL}\r\nspring.datasource.username=${SPRING_DATASOURCE_USERNAME}\r\nspring.datasource.password=${SPRING_DATASOURCE_PASSWORD}\r\n```\r\n\r\n#### 2. Specifying a wrong port\r\n\r\nEven though the host port was 3307, I still needed to specify 3306 in my property\r\n```yml\r\n# the correct version\r\n\r\nversion: &#39;3&#39;\r\n\r\nservices:\r\n  app:\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    depends_on:\r\n      - db\r\n    environment:\r\n      # note the change in the following line\r\n      SPRING_DATASOURCE_URL: jdbc:mysql://db:3306/users_db?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true\r\n      SPRING_DATASOURCE_USERNAME: pp_user\r\n      SPRING_DATASOURCE_PASSWORD: pp_user\r\n\r\n  db:\r\n    image: mysql:latest\r\n    ports:\r\n      - &quot;3307:3306&quot;\r\n    environment:\r\n      MYSQL_DATABASE: users_db\r\n      MYSQL_USER: pp_user\r\n      MYSQL_PASSWORD: pp_user\r\n      MYSQL_ROOT_PASSWORD: root_password\r\n```\r\nIf you want to access the database running inside the Docker container and check that the data is actually modified, you can install MySQL Shell (I used MySQL Installer), run it, and execute something like this\r\n```\r\nMySQL Shell 8.0.34 \r\nCopyright (c) 2016, 2023, Oracle and/or its affiliates.\r\nOracle is a registered trademark of Oracle Corporation and/or its affiliates.                                           \r\nOther names may be trademarks of their respective owners.                                                                                                                                                                               \r\nType &#39;\\help&#39; or &#39;\\?&#39; for help; &#39;\\quit&#39; to exit.                                                                           \r\nMySQL  JS &gt; \\connect --mysql -h localhost -P 3307 -u pp_user -p                                                        \r\nCreating a Classic session to &#39;pp_user@localhost:3307&#39;                                                                  \r\nPlease provide the password for &#39;pp_user@localhost:3307&#39;: *******                                                       \r\nSave password for &#39;pp_user@localhost:3307&#39;? [Y]es/[N]o/Ne[v]er (default No): Y                                          \r\nFetching schema names for auto-completion... Press ^C to stop.                                                          \r\nYour MySQL connection id is 44                                                                                          \r\nServer version: 8.1.0 MySQL Community Server - GPL                                                                      \r\nNo default schema selected; type \\use &lt;schema&gt; to set one.                                                               \r\nMySQL  localhost:3307 ssl  JS &gt; \\sql                                                                                   \r\nSwitching to SQL mode... Commands end with ;                                                                            \r\nFetching global names for auto-completion... Press ^C to stop.                                                          \r\nError during auto-completion cache update: Access denied; you need (at least one of) the PROCESS privilege(s) for this operation                                                                                                                 \r\nMySQL  localhost:3307 ssl  SQL &gt; select * from users_db.users;\r\n````\r\n\r\nI appreciate the help from *CaptainAye* and *David Maze*. They helped me a great deal","title":"Can&#39;t dockerize a web app: java.net.ConnectException","body":"<p>My problem had to do with these mistakes</p>\n<h4>1. Not including the properties</h4>\n<p>I had to reference the <code>docker-compose.yml</code> properties in my <code>application.properties</code> file</p>\n<pre><code>spring.datasource.url=${SPRING_DATASOURCE_URL}\nspring.datasource.username=${SPRING_DATASOURCE_USERNAME}\nspring.datasource.password=${SPRING_DATASOURCE_PASSWORD}\n</code></pre>\n<h4>2. Specifying a wrong port</h4>\n<p>Even though the host port was 3307, I still needed to specify 3306 in my property</p>\n<pre class=\"lang-yaml prettyprint-override\"><code># the correct version\n\nversion: '3'\n\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - &quot;8080:8080&quot;\n    depends_on:\n      - db\n    environment:\n      # note the change in the following line\n      SPRING_DATASOURCE_URL: jdbc:mysql://db:3306/users_db?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true\n      SPRING_DATASOURCE_USERNAME: pp_user\n      SPRING_DATASOURCE_PASSWORD: pp_user\n\n  db:\n    image: mysql:latest\n    ports:\n      - &quot;3307:3306&quot;\n    environment:\n      MYSQL_DATABASE: users_db\n      MYSQL_USER: pp_user\n      MYSQL_PASSWORD: pp_user\n      MYSQL_ROOT_PASSWORD: root_password\n</code></pre>\n<p>If you want to access the database running inside the Docker container and check that the data is actually modified, you can install MySQL Shell (I used MySQL Installer), run it, and execute something like this</p>\n<pre><code>MySQL Shell 8.0.34 \nCopyright (c) 2016, 2023, Oracle and/or its affiliates.\nOracle is a registered trademark of Oracle Corporation and/or its affiliates.                                           \nOther names may be trademarks of their respective owners.                                                                                                                                                                               \nType '\\help' or '\\?' for help; '\\quit' to exit.                                                                           \nMySQL  JS &gt; \\connect --mysql -h localhost -P 3307 -u pp_user -p                                                        \nCreating a Classic session to 'pp_user@localhost:3307'                                                                  \nPlease provide the password for 'pp_user@localhost:3307': *******                                                       \nSave password for 'pp_user@localhost:3307'? [Y]es/[N]o/Ne[v]er (default No): Y                                          \nFetching schema names for auto-completion... Press ^C to stop.                                                          \nYour MySQL connection id is 44                                                                                          \nServer version: 8.1.0 MySQL Community Server - GPL                                                                      \nNo default schema selected; type \\use &lt;schema&gt; to set one.                                                               \nMySQL  localhost:3307 ssl  JS &gt; \\sql                                                                                   \nSwitching to SQL mode... Commands end with ;                                                                            \nFetching global names for auto-completion... Press ^C to stop.                                                          \nError during auto-completion cache update: Access denied; you need (at least one of) the PROCESS privilege(s) for this operation                                                                                                                 \nMySQL  localhost:3307 ssl  SQL &gt; select * from users_db.users;\n</code></pre>\n<p>I appreciate the help from <em>CaptainAye</em> and <em>David Maze</em>. They helped me a great deal</p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695365235,"creation_date":1695321292,"question_id":77152819,"body_markdown":"I have a web app that uses MySQL. I was hoping to &quot;dockerize&quot; it so that I learn to use Docker and at the same time make my app more &quot;shareable&quot; (anyone could check it out without downloading and setting up a MySQL server). Here&#39;s my attempt:\r\n\r\n### Step 1. Write `Dockerfile`\r\nIn the project root I created a file called Dockerfile with the following content:\r\n```\r\nFROM amazoncorretto:17-alpine-jdk\r\n\r\nWORKDIR /app\r\n\r\nCOPY target/spring_bootstrap-0.0.1-SNAPSHOT.jar .\r\n\r\nEXPOSE 8080\r\n\r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;spring_bootstrap-0.0.1-SNAPSHOT.jar&quot;]\r\n```\r\n### Step 2. Write `docker-compose.yml`\r\nI need to have both JDK and a MySQL server components in my container. As I understand, I need a `docker-compose.yml` file. Here&#39;s what it looks like:\r\n```yml\r\nversion: &#39;3&#39;\r\n\r\nservices:\r\n  app:\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    depends_on:\r\n      - db\r\n    environment:\r\n      SPRING_DATASOURCE_URL: jdbc:mysql://db:3307/users_db?useSSL=false&amp;serverTimezone=UTC\r\n      SPRING_DATASOURCE_USERNAME: pp_user\r\n      SPRING_DATASOURCE_PASSWORD: pp_user\r\n\r\n  db:\r\n    image: mysql:latest\r\n    ports:\r\n      - &quot;3307:3306&quot;\r\n    environment:\r\n      MYSQL_DATABASE: users_db\r\n      MYSQL_USER: pp_user\r\n      MYSQL_PASSWORD: pp_user\r\n      MYSQL_ROOT_PASSWORD: root_password\r\n```\r\nYou might be wondering why it&#39;s 3307. It&#39;s because for some reason 3306 was already occupied (I have no idea why, MySQL server doesn&#39;t seem to be running outside the Docker container)\r\n### Step 3. Remove datasource properties from `application.properties`\r\n```properties\r\n# connection properties\r\n#spring.datasource.url=jdbc:mysql://localhost:3306/users_db?useSSL=false&amp;serverTimezone=UTC\r\n#spring.datasource.username=pp_user\r\n#spring.datasource.password=pp_user\r\n```\r\n### Step 4. Clean and package so that I have an up-to-date jar\r\n\r\n### Step 5. Navigate to the project directory and run `docker-compose up`\r\nThe command produced colossal log output. My MySQL server got up and running, but the project itself failed\r\n\r\n[![the Docker Desktop screenshot showing that MySQL is running, the app has &quot;exited&quot;][1]][1]\r\n\r\nThis was the killer. Not very informative to me, though\r\n```\r\nbootstrap_fetch-app-1  | Caused by: java.net.ConnectException: Connection refused\r\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\r\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\r\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547) ~[na:na]\r\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602) ~[na:na]\r\nbootstrap_fetch-app-1  |        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\nbootstrap_fetch-app-1  |        at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\nbootstrap_fetch-app-1  |        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\nbootstrap_fetch-app-1  |        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\nbootstrap_fetch-app-1  |        ... 51 common frames omitted\r\nbootstrap_fetch-app-1  |\r\nbootstrap_fetch-app-1 exited with code 1\r\n```\r\nWhat may be the problem? Please let me know if you need more details\r\n\r\n  [1]: https://i.stack.imgur.com/NLPHC.png","title":"Can&#39;t dockerize a web app: java.net.ConnectException","body":"<p>I have a web app that uses MySQL. I was hoping to &quot;dockerize&quot; it so that I learn to use Docker and at the same time make my app more &quot;shareable&quot; (anyone could check it out without downloading and setting up a MySQL server). Here's my attempt:</p>\n<h3>Step 1. Write <code>Dockerfile</code></h3>\n<p>In the project root I created a file called Dockerfile with the following content:</p>\n<pre><code>FROM amazoncorretto:17-alpine-jdk\n\nWORKDIR /app\n\nCOPY target/spring_bootstrap-0.0.1-SNAPSHOT.jar .\n\nEXPOSE 8080\n\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;spring_bootstrap-0.0.1-SNAPSHOT.jar&quot;]\n</code></pre>\n<h3>Step 2. Write <code>docker-compose.yml</code></h3>\n<p>I need to have both JDK and a MySQL server components in my container. As I understand, I need a <code>docker-compose.yml</code> file. Here's what it looks like:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: '3'\n\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - &quot;8080:8080&quot;\n    depends_on:\n      - db\n    environment:\n      SPRING_DATASOURCE_URL: jdbc:mysql://db:3307/users_db?useSSL=false&amp;serverTimezone=UTC\n      SPRING_DATASOURCE_USERNAME: pp_user\n      SPRING_DATASOURCE_PASSWORD: pp_user\n\n  db:\n    image: mysql:latest\n    ports:\n      - &quot;3307:3306&quot;\n    environment:\n      MYSQL_DATABASE: users_db\n      MYSQL_USER: pp_user\n      MYSQL_PASSWORD: pp_user\n      MYSQL_ROOT_PASSWORD: root_password\n</code></pre>\n<p>You might be wondering why it's 3307. It's because for some reason 3306 was already occupied (I have no idea why, MySQL server doesn't seem to be running outside the Docker container)</p>\n<h3>Step 3. Remove datasource properties from <code>application.properties</code></h3>\n<pre><code># connection properties\n#spring.datasource.url=jdbc:mysql://localhost:3306/users_db?useSSL=false&amp;serverTimezone=UTC\n#spring.datasource.username=pp_user\n#spring.datasource.password=pp_user\n</code></pre>\n<h3>Step 4. Clean and package so that I have an up-to-date jar</h3>\n<h3>Step 5. Navigate to the project directory and run <code>docker-compose up</code></h3>\n<p>The command produced colossal log output. My MySQL server got up and running, but the project itself failed</p>\n<p><a href=\"https://i.stack.imgur.com/NLPHC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NLPHC.png\" alt=\"the Docker Desktop screenshot showing that MySQL is running, the app has &quot;exited&quot;\" /></a></p>\n<p>This was the killer. Not very informative to me, though</p>\n<pre><code>bootstrap_fetch-app-1  | Caused by: java.net.ConnectException: Connection refused\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547) ~[na:na]\nbootstrap_fetch-app-1  |        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602) ~[na:na]\nbootstrap_fetch-app-1  |        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\nbootstrap_fetch-app-1  |        at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\nbootstrap_fetch-app-1  |        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\nbootstrap_fetch-app-1  |        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\nbootstrap_fetch-app-1  |        ... 51 common frames omitted\nbootstrap_fetch-app-1  |\nbootstrap_fetch-app-1 exited with code 1\n</code></pre>\n<p>What may be the problem? Please let me know if you need more details</p>\n"},{"tags":["java","jackson","rest-assured"],"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1425340979,"post_id":28821715,"comment_id":45915145,"body_markdown":"Cannot be cast to **what**?  What is the rest of the error message?","body":"Cannot be cast to <b>what</b>?  What is the rest of the error message?"},{"owner":{"account_id":447462,"reputation":10144,"user_id":841090,"accept_rate":61,"display_name":"Passionate Engineer"},"score":1,"creation_date":1425341108,"post_id":28821715,"comment_id":45915192,"body_markdown":"@OliverCharlesworth also added entire stacktrace","body":"@OliverCharlesworth also added entire stacktrace"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1425341174,"post_id":28821715,"comment_id":45915208,"body_markdown":"What&#39;s an `Account`? Why are you trying to cast to it from a map?","body":"What&#39;s an <code>Account</code>? Why are you trying to cast to it from a map?"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1425341245,"post_id":28821715,"comment_id":45915230,"body_markdown":"For those of us who might be unfamiliar with the library, can you say what class this `given()` method is statically imported from?","body":"For those of us who might be unfamiliar with the library, can you say what class this <code>given()</code> method is statically imported from?"},{"owner":{"account_id":447462,"reputation":10144,"user_id":841090,"accept_rate":61,"display_name":"Passionate Engineer"},"score":0,"creation_date":1425341280,"post_id":28821715,"comment_id":45915246,"body_markdown":"@DaveNewton `Account` is a model from Dropwizard which uses `com.fasterxml.jackson.databind.annotations`","body":"@DaveNewton <code>Account</code> is a model from Dropwizard which uses <code>com.fasterxml.jackson.databind.annotations</code>"},{"owner":{"account_id":1007997,"reputation":2357,"user_id":1046584,"accept_rate":83,"display_name":"Lu&#237;s Bianchin"},"score":0,"creation_date":1425341285,"post_id":28821715,"comment_id":45915247,"body_markdown":"Where do you use LinkedHashMap in your code?","body":"Where do you use LinkedHashMap in your code?"},{"owner":{"account_id":447462,"reputation":10144,"user_id":841090,"accept_rate":61,"display_name":"Passionate Engineer"},"score":0,"creation_date":1425341383,"post_id":28821715,"comment_id":45915278,"body_markdown":"@MarkPeters it&#39;s `com.jayway.restassured.RestAssured.given`","body":"@MarkPeters it&#39;s <code>com.jayway.restassured.RestAssured.given</code>"},{"owner":{"account_id":447462,"reputation":10144,"user_id":841090,"accept_rate":61,"display_name":"Passionate Engineer"},"score":0,"creation_date":1425341449,"post_id":28821715,"comment_id":45915293,"body_markdown":"To library link is https://github.com/jayway/rest-assured","body":"To library link is <a href=\"https://github.com/jayway/rest-assured\" rel=\"nofollow noreferrer\">github.com/jayway/rest-assured</a>"},{"owner":{"account_id":4089780,"reputation":1489,"user_id":3358126,"accept_rate":44,"display_name":"Pavel Niedoba"},"score":0,"creation_date":1425341566,"post_id":28821715,"comment_id":45915330,"body_markdown":"Seems to me you are trying to deserialize JSON string onto Java object. The problem might be in structure mismatch. You should put here response from this URL:&quot;accounts/&quot; + newClub.getOwner().getCustId() + &quot;/clubs&quot; and Account class","body":"Seems to me you are trying to deserialize JSON string onto Java object. The problem might be in structure mismatch. You should put here response from this URL:&quot;accounts/&quot; + newClub.getOwner().getCustId() + &quot;/clubs&quot; and Account class"}],"answers":[{"comments":[{"owner":{"account_id":190636,"reputation":103,"user_id":430733,"display_name":"BIGDeutsch"},"score":0,"creation_date":1465464307,"post_id":28821825,"comment_id":62915662,"body_markdown":"You can also set the response asString(), saves having to do extra conversions - readValue will accept a String as the first arg.","body":"You can also set the response asString(), saves having to do extra conversions - readValue will accept a String as the first arg."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1551892028,"post_id":28821825,"comment_id":96809725,"body_markdown":"@BIGDeutsch: Just revisiting this, there was no need for me to convert back to tokens there when `convertValue` could do it in one step.  Going to a string works too.","body":"@BIGDeutsch: Just revisiting this, there was no need for me to convert back to tokens there when <code>convertValue</code> could do it in one step.  Going to a string works too."},{"owner":{"account_id":2125067,"reputation":547,"user_id":1887464,"accept_rate":80,"display_name":"user1887464"},"score":0,"creation_date":1633782553,"post_id":28821825,"comment_id":122855144,"body_markdown":"what to do when an object contains a varibale which is  list . How to deserialize the object using jackson ?","body":"what to do when an object contains a varibale which is  list . How to deserialize the object using jackson ?"},{"owner":{"account_id":3252408,"reputation":835,"user_id":2742330,"accept_rate":27,"display_name":"danisupr4"},"score":0,"creation_date":1644520595,"post_id":28821825,"comment_id":125635506,"body_markdown":"very helpful, thanks","body":"very helpful, thanks"},{"owner":{"account_id":25411796,"reputation":121,"user_id":19219457,"display_name":"mikegrep"},"score":0,"creation_date":1672485751,"post_id":28821825,"comment_id":132297028,"body_markdown":"Simple and do the work.","body":"Simple and do the work."}],"tags":[],"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"comment_count":5,"down_vote_count":0,"up_vote_count":151,"is_accepted":true,"score":151,"last_activity_date":1551891933,"creation_date":1425341762,"answer_id":28821825,"question_id":28821715,"body_markdown":"The issue&#39;s coming from Jackson. When it doesn&#39;t have enough information on what class to deserialize to, it uses `LinkedHashMap`.  \r\n\r\nSince you&#39;re not informing Jackson of the element type of your `ArrayList`, it doesn&#39;t know that you want to deserialize into an `ArrayList` of `Account`s.  So it falls back to the default.\r\n\r\nInstead, you could probably use `as(JsonNode.class)`, and then deal with the `ObjectMapper` in a richer manner than rest-assured allows.  Something like this:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    \r\n    JsonNode accounts = given().when().expect().statusCode(expectedResponseCode)\r\n        .get(&quot;accounts/&quot; + newClub.getOwner().getCustId() + &quot;/clubs&quot;)\r\n        .as(JsonNode.class);\r\n\r\n\r\n    //Jackson&#39;s use of generics here are completely unsafe, but that&#39;s another issue\r\n    List&lt;Account&gt; accountList = mapper.convertValue(\r\n        accounts, \r\n        new TypeReference&lt;List&lt;Account&gt;&gt;(){}\r\n    );\r\n    \r\n    assertThat(accountList.get(0).getId()).isEqualTo(expectedId);","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>The issue's coming from Jackson. When it doesn't have enough information on what class to deserialize to, it uses <code>LinkedHashMap</code>.  </p>\n\n<p>Since you're not informing Jackson of the element type of your <code>ArrayList</code>, it doesn't know that you want to deserialize into an <code>ArrayList</code> of <code>Account</code>s.  So it falls back to the default.</p>\n\n<p>Instead, you could probably use <code>as(JsonNode.class)</code>, and then deal with the <code>ObjectMapper</code> in a richer manner than rest-assured allows.  Something like this:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n\nJsonNode accounts = given().when().expect().statusCode(expectedResponseCode)\n    .get(\"accounts/\" + newClub.getOwner().getCustId() + \"/clubs\")\n    .as(JsonNode.class);\n\n\n//Jackson's use of generics here are completely unsafe, but that's another issue\nList&lt;Account&gt; accountList = mapper.convertValue(\n    accounts, \n    new TypeReference&lt;List&lt;Account&gt;&gt;(){}\n);\n\nassertThat(accountList.get(0).getId()).isEqualTo(expectedId);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1643281874,"post_id":37656927,"comment_id":125300493,"body_markdown":"How did you set up your constructor for the Document class?","body":"How did you set up your constructor for the Document class?"}],"tags":[],"owner":{"account_id":5843610,"reputation":325,"user_id":4604360,"display_name":"nurb"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1467972143,"creation_date":1465214543,"answer_id":37656927,"question_id":28821715,"body_markdown":"I had a similar exception (but different problem) -  `java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to org.bson.Document` , and fortunately it&#39;s solved easier:\r\n\r\nInstead of \r\n\r\n    List&lt;Document&gt; docs = obj.get(&quot;documents&quot;);\r\n    Document doc = docs.get(0)\r\n\r\nwhich gives error on second line, One can use    \r\n\r\n    List&lt;Document&gt; docs = obj.get(&quot;documents&quot;);\r\n    Document doc = new Document(docs.get(0));","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>I had a similar exception (but different problem) -  <code>java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to org.bson.Document</code> , and fortunately it's solved easier:</p>\n\n<p>Instead of </p>\n\n<pre><code>List&lt;Document&gt; docs = obj.get(\"documents\");\nDocument doc = docs.get(0)\n</code></pre>\n\n<p>which gives error on second line, One can use    </p>\n\n<pre><code>List&lt;Document&gt; docs = obj.get(\"documents\");\nDocument doc = new Document(docs.get(0));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1720411,"reputation":1802,"user_id":1576467,"accept_rate":62,"display_name":"GameSalutes"},"score":3,"creation_date":1497992559,"post_id":38605480,"comment_id":76311560,"body_markdown":"+1 for showing &quot;convertValue&quot;.  I had a case where I needed to read a particular property out of json as a List and this is exactly what I needed.","body":"+1 for showing &quot;convertValue&quot;.  I had a case where I needed to read a particular property out of json as a List and this is exactly what I needed."}],"tags":[],"owner":{"account_id":3042144,"reputation":830,"user_id":2578871,"display_name":"user2578871"},"comment_count":1,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1537202427,"creation_date":1469601605,"answer_id":38605480,"question_id":28821715,"body_markdown":"Try the following:\r\n\r\n    POJO pojo = mapper.convertValue(singleObject, POJO.class);\r\n\r\nor:\r\n\r\n    List&lt;POJO&gt; pojos = mapper.convertValue(\r\n        listOfObjects,\r\n        new TypeReference&lt;List&lt;POJO&gt;&gt;() { });\r\n\r\nSee [conversion of LinkedHashMap][1] for more information.\r\n\r\n  [1]: http://stackoverflow.com/questions/15430715/casting-linkedhashmap-to-complex-object\r\n","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>Try the following:</p>\n\n<pre><code>POJO pojo = mapper.convertValue(singleObject, POJO.class);\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>List&lt;POJO&gt; pojos = mapper.convertValue(\n    listOfObjects,\n    new TypeReference&lt;List&lt;POJO&gt;&gt;() { });\n</code></pre>\n\n<p>See <a href=\"http://stackoverflow.com/questions/15430715/casting-linkedhashmap-to-complex-object\">conversion of LinkedHashMap</a> for more information.</p>\n"},{"comments":[{"owner":{"account_id":1524256,"reputation":861,"user_id":1423082,"display_name":"Vladimir Gilevich"},"score":3,"creation_date":1507215204,"post_id":46233446,"comment_id":80130546,"body_markdown":"Saved my problem as well. Thank you!","body":"Saved my problem as well. Thank you!"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":1,"creation_date":1511536934,"post_id":46233446,"comment_id":81906835,"body_markdown":"+1, the difference in your case was that the method itself was generic so `T` could not be reified via the TypeToken, which is typically easier.  Personally I prefer Guava&#39;s helper because it&#39;s still typesafe and not specific to any container type: `return new TypeToken&lt;List&lt;T&gt;&gt;(){}.where(new TypeParameter&lt;T&gt;(){}, tClass)`.  But Jackson doesn&#39;t take `TypeToken`s so you then need `.getType()`.","body":"+1, the difference in your case was that the method itself was generic so <code>T</code> could not be reified via the TypeToken, which is typically easier.  Personally I prefer Guava&#39;s helper because it&#39;s still typesafe and not specific to any container type: <code>return new TypeToken&lt;List&lt;T&gt;&gt;(){}.where(new TypeParameter&lt;T&gt;(){}, tClass)</code>.  But Jackson doesn&#39;t take <code>TypeToken</code>s so you then need <code>.getType()</code>."},{"owner":{"account_id":13045696,"reputation":717,"user_id":9427614,"display_name":"Shashank"},"score":0,"creation_date":1594956743,"post_id":46233446,"comment_id":111314191,"body_markdown":"Saved my problem as well. Thank you!","body":"Saved my problem as well. Thank you!"},{"owner":{"account_id":11248940,"reputation":156,"user_id":8250693,"display_name":"glco"},"score":0,"creation_date":1607452396,"post_id":46233446,"comment_id":115275374,"body_markdown":"Thank you! Spent a lot of time to fix this error untill i found this answer!!","body":"Thank you! Spent a lot of time to fix this error untill i found this answer!!"},{"owner":{"account_id":3802737,"reputation":178,"user_id":3155909,"display_name":"sumanr"},"score":0,"creation_date":1614084308,"post_id":46233446,"comment_id":117271361,"body_markdown":"Lovely!!. This saved my day as well :)..Struggled for hours before i hit this solution. I was trying to write a genric JSONB array convertor for JOOQ in kotlin.","body":"Lovely!!. This saved my day as well :)..Struggled for hours before i hit this solution. I was trying to write a genric JSONB array convertor for JOOQ in kotlin."}],"tags":[],"owner":{"account_id":2154086,"reputation":2201,"user_id":1909708,"display_name":"Himadri Pant"},"comment_count":5,"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1505458349,"creation_date":1505458349,"answer_id":46233446,"question_id":28821715,"body_markdown":"The way I could mitigate the **JSON Array to collection of LinkedHashMap objects** problem was by using `CollectionType` rather than a  `TypeReference` .\r\nThis is what I did and **worked**:\r\n    \r\n\r\n    public &lt;T&gt; List&lt;T&gt; jsonArrayToObjectList(String json, Class&lt;T&gt; tClass) throws IOException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        CollectionType listType = mapper.getTypeFactory().constructCollectionType(ArrayList.class, tClass);\r\n        List&lt;T&gt; ts = mapper.readValue(json, listType);\r\n        LOGGER.debug(&quot;class name: {}&quot;, ts.get(0).getClass().getName());\r\n        return ts;\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\nUsing the `TypeReference`, I was still getting an ArrayList of LinkedHashMaps, i.e. **does not work**:\r\n\r\n    public &lt;T&gt; List&lt;T&gt; jsonArrayToObjectList(String json, Class&lt;T&gt; tClass) throws IOException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        List&lt;T&gt; ts = mapper.readValue(json, new TypeReference&lt;List&lt;T&gt;&gt;(){});\r\n        LOGGER.debug(&quot;class name: {}&quot;, ts.get(0).getClass().getName());\r\n        return ts;\r\n    }","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>The way I could mitigate the <strong>JSON Array to collection of LinkedHashMap objects</strong> problem was by using <code>CollectionType</code> rather than a  <code>TypeReference</code> .\nThis is what I did and <strong>worked</strong>:</p>\n\n<pre><code>public &lt;T&gt; List&lt;T&gt; jsonArrayToObjectList(String json, Class&lt;T&gt; tClass) throws IOException {\n    ObjectMapper mapper = new ObjectMapper();\n    CollectionType listType = mapper.getTypeFactory().constructCollectionType(ArrayList.class, tClass);\n    List&lt;T&gt; ts = mapper.readValue(json, listType);\n    LOGGER.debug(\"class name: {}\", ts.get(0).getClass().getName());\n    return ts;\n}\n</code></pre>\n\n<hr>\n\n<p>Using the <code>TypeReference</code>, I was still getting an ArrayList of LinkedHashMaps, i.e. <strong>does not work</strong>:</p>\n\n<pre><code>public &lt;T&gt; List&lt;T&gt; jsonArrayToObjectList(String json, Class&lt;T&gt; tClass) throws IOException {\n    ObjectMapper mapper = new ObjectMapper();\n    List&lt;T&gt; ts = mapper.readValue(json, new TypeReference&lt;List&lt;T&gt;&gt;(){});\n    LOGGER.debug(\"class name: {}\", ts.get(0).getClass().getName());\n    return ts;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14997432,"reputation":1,"user_id":10826324,"display_name":"Mohamed Farghaly"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545590630,"creation_date":1545578226,"answer_id":53904766,"question_id":28821715,"body_markdown":"I have this method for deserializing an XML and converting the type:\r\n\r\n\tpublic &lt;T&gt; Object deserialize(String xml, Class objClass ,TypeReference&lt;T&gt; typeReference ) throws IOException {\r\n\t    XmlMapper xmlMapper = new XmlMapper();\r\n\t    Object obj = xmlMapper.readValue(xml,objClass);\r\n\t    return  xmlMapper.convertValue(obj,typeReference );   \r\n\t}\r\n\r\nand this is the call:\r\n\r\n    List&lt;POJO&gt; pojos = (List&lt;POJO&gt;) MyUtilClass.deserialize(xml, ArrayList.class,new TypeReference&lt; List&lt; POJO &gt;&gt;(){ });","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>I have this method for deserializing an XML and converting the type:</p>\n\n<pre><code>public &lt;T&gt; Object deserialize(String xml, Class objClass ,TypeReference&lt;T&gt; typeReference ) throws IOException {\n    XmlMapper xmlMapper = new XmlMapper();\n    Object obj = xmlMapper.readValue(xml,objClass);\n    return  xmlMapper.convertValue(obj,typeReference );   \n}\n</code></pre>\n\n<p>and this is the call:</p>\n\n<pre><code>List&lt;POJO&gt; pojos = (List&lt;POJO&gt;) MyUtilClass.deserialize(xml, ArrayList.class,new TypeReference&lt; List&lt; POJO &gt;&gt;(){ });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4229586,"reputation":590,"user_id":3462243,"accept_rate":100,"display_name":"uncle bob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598610784,"creation_date":1598610784,"answer_id":63632081,"question_id":28821715,"body_markdown":"When you use jackson to map from string to your concrete class, especially if you work with generic type. then this issue may happen because of different class loader. i met it one time with below scenarior:\r\n\r\nProject B depend on Library A\r\n\r\nin Library A:\r\n\r\n    public class DocSearchResponse&lt;T&gt; {\r\n     private T data;\r\n    }\r\n\r\nit has service to query data from external source, and use jackson to convert to concrete class\r\n\r\n    public class ServiceA&lt;T&gt;{\r\n      @Autowired\r\n      private ObjectMapper mapper;\r\n      @Autowired\r\n      private ClientDocSearch searchClient;\r\n    \r\n      public DocSearchResponse&lt;T&gt; query(Criteria criteria){\r\n          String resultInString = searchClient.search(criteria);\r\n          return convertJson(resultInString)\r\n      }\r\n    }\r\n    \r\n    public DocSearchResponse&lt;T&gt; convertJson(String result){\r\n         return mapper.readValue(result, new TypeReference&lt;DocSearchResponse&lt;T&gt;&gt;() {});\r\n      }\r\n    }\r\n\r\nin Project B:\r\n\r\n    public class Account{\r\n     private String name;\r\n     //come with other attributes\r\n    }\r\n\r\nand i use ServiceA from library to make query and as well convert data\r\n\r\n    public class ServiceAImpl extends ServiceA&lt;Account&gt; {\r\n        \r\n    }\r\n\r\nand make use of that\r\n\r\n    public class MakingAccountService {\r\n        @Autowired\r\n        private ServiceA service;\r\n        public void execute(Criteria criteria){\r\n          \r\n            DocSearchResponse&lt;Account&gt; result = service.query(criteria);\r\n            Account acc = result.getData(); //  java.util.LinkedHashMap cannot be cast to com.testing.models.Account\r\n        }\r\n    }\r\n\r\nit happen because from classloader of LibraryA, jackson can not load Account class, then just override method `convertJson` in Project B to let jackson do its job\r\n\r\n    public class ServiceAImpl extends ServiceA&lt;Account&gt; {\r\n            @Override\r\n            public DocSearchResponse&lt;T&gt; convertJson(String result){\r\n             return mapper.readValue(result, new TypeReference&lt;DocSearchResponse&lt;T&gt;&gt;() {});\r\n          }\r\n        }\r\n     }","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>When you use jackson to map from string to your concrete class, especially if you work with generic type. then this issue may happen because of different class loader. i met it one time with below scenarior:</p>\n<p>Project B depend on Library A</p>\n<p>in Library A:</p>\n<pre><code>public class DocSearchResponse&lt;T&gt; {\n private T data;\n}\n</code></pre>\n<p>it has service to query data from external source, and use jackson to convert to concrete class</p>\n<pre><code>public class ServiceA&lt;T&gt;{\n  @Autowired\n  private ObjectMapper mapper;\n  @Autowired\n  private ClientDocSearch searchClient;\n\n  public DocSearchResponse&lt;T&gt; query(Criteria criteria){\n      String resultInString = searchClient.search(criteria);\n      return convertJson(resultInString)\n  }\n}\n\npublic DocSearchResponse&lt;T&gt; convertJson(String result){\n     return mapper.readValue(result, new TypeReference&lt;DocSearchResponse&lt;T&gt;&gt;() {});\n  }\n}\n</code></pre>\n<p>in Project B:</p>\n<pre><code>public class Account{\n private String name;\n //come with other attributes\n}\n</code></pre>\n<p>and i use ServiceA from library to make query and as well convert data</p>\n<pre><code>public class ServiceAImpl extends ServiceA&lt;Account&gt; {\n    \n}\n</code></pre>\n<p>and make use of that</p>\n<pre><code>public class MakingAccountService {\n    @Autowired\n    private ServiceA service;\n    public void execute(Criteria criteria){\n      \n        DocSearchResponse&lt;Account&gt; result = service.query(criteria);\n        Account acc = result.getData(); //  java.util.LinkedHashMap cannot be cast to com.testing.models.Account\n    }\n}\n</code></pre>\n<p>it happen because from classloader of LibraryA, jackson can not load Account class, then just override method <code>convertJson</code> in Project B to let jackson do its job</p>\n<pre><code>public class ServiceAImpl extends ServiceA&lt;Account&gt; {\n        @Override\n        public DocSearchResponse&lt;T&gt; convertJson(String result){\n         return mapper.readValue(result, new TypeReference&lt;DocSearchResponse&lt;T&gt;&gt;() {});\n      }\n    }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15343732,"reputation":11,"user_id":11069884,"display_name":"Love Java"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604548077,"creation_date":1604548077,"answer_id":64690952,"question_id":28821715,"body_markdown":"Solve problem with two method parse common\r\n  1. Whith type is an object\r\n\r\n    public &lt;T&gt; T jsonToObject(String json, Class&lt;T&gt; type) {\r\n            T target = null;\r\n            try {\r\n                target = objectMapper.readValue(json, type);\r\n            } catch (Jsenter code hereonProcessingException e) {\r\n                e.printStackTrace();\r\n            }\r\n        \r\n            return target;\r\n        }\r\n  2. With type is collection wrap object\r\n\r\n    public &lt;T&gt; T jsonToObject(String json, TypeReference&lt;T&gt; type) {\r\n        T target = null;\r\n        try {\r\n            target = objectMapper.readValue(json, type);\r\n        } catch (JsonProcessingException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return target;\r\n    }\r\n\r\n","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>Solve problem with two method parse common</p>\n<ol>\n<li>Whith type is an object</li>\n</ol>\n<pre><code>public &lt;T&gt; T jsonToObject(String json, Class&lt;T&gt; type) {\n        T target = null;\n        try {\n            target = objectMapper.readValue(json, type);\n        } catch (Jsenter code hereonProcessingException e) {\n            e.printStackTrace();\n        }\n    \n        return target;\n    }\n</code></pre>\n<ol start=\"2\">\n<li>With type is collection wrap object</li>\n</ol>\n<pre><code>public &lt;T&gt; T jsonToObject(String json, TypeReference&lt;T&gt; type) {\n    T target = null;\n    try {\n        target = objectMapper.readValue(json, type);\n    } catch (JsonProcessingException e) {\n        e.printStackTrace();\n    }\n    return target;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20570038,"reputation":9,"user_id":15098575,"display_name":"siddharth jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620885597,"creation_date":1620885597,"answer_id":67514560,"question_id":28821715,"body_markdown":"This is something i used in my project, Json object was returned, i converted it to a List of POJO, List&lt;Pojo&gt; and then accessed the element.\r\nI took the input of Json object from another microservice.\r\n\r\nMain thing is:-\r\n**JsonNode stocks = restTemplate.getForObject(&quot;http://localhost:2000/stocks/qty&quot;, JsonNode.class);\r\n            List&lt;Stock_id_qty&gt; stockList = mapper.convertValue(stocks, new TypeReference&lt;List&lt;Stock_id_qty&gt;&gt;() {});**\r\n\r\n    \r\n    @GetMapping(&quot;/&quot;)\r\n        public List&lt;Stock_id_qty&gt; checkQty() throws JsonProcessingException {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            JsonNode stocks = restTemplate.getForObject(&quot;http://localhost:2000/stocks/qty&quot;, JsonNode.class);\r\n            List&lt;Stock_id_qty&gt; stockList = mapper.convertValue(stocks, new TypeReference&lt;List&lt;Stock_id_qty&gt;&gt;() {});\r\n            List&lt;Stock_id_qty&gt; result = new ArrayList&lt;&gt;();\r\n            for(Stock_id_qty s : stockList){\r\n                if(s.getStockQty() &lt; 10)\r\n                {\r\n                    result.add(s);\r\n                }\r\n            }\r\n            return result;\r\n        }","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>This is something i used in my project, Json object was returned, i converted it to a List of POJO, List and then accessed the element.\nI took the input of Json object from another microservice.</p>\n<p>Main thing is:-\n<strong>JsonNode stocks = restTemplate.getForObject(&quot;http://localhost:2000/stocks/qty&quot;, JsonNode.class);\nList&lt;Stock_id_qty&gt; stockList = mapper.convertValue(stocks, new TypeReference&lt;List&lt;Stock_id_qty&gt;&gt;() {});</strong></p>\n<pre><code>@GetMapping(&quot;/&quot;)\n    public List&lt;Stock_id_qty&gt; checkQty() throws JsonProcessingException {\n        ObjectMapper mapper = new ObjectMapper();\n        JsonNode stocks = restTemplate.getForObject(&quot;http://localhost:2000/stocks/qty&quot;, JsonNode.class);\n        List&lt;Stock_id_qty&gt; stockList = mapper.convertValue(stocks, new TypeReference&lt;List&lt;Stock_id_qty&gt;&gt;() {});\n        List&lt;Stock_id_qty&gt; result = new ArrayList&lt;&gt;();\n        for(Stock_id_qty s : stockList){\n            if(s.getStockQty() &lt; 10)\n            {\n                result.add(s);\n            }\n        }\n        return result;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17737955,"reputation":1051,"user_id":12878982,"display_name":"CodingBee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643379894,"creation_date":1642486858,"answer_id":70751106,"question_id":28821715,"body_markdown":"&gt;     public class ObjectHelper {\r\n&gt;\r\n&gt;       private static ObjectMapper objectMapper = new ObjectMapper();\r\n&gt; \r\n&gt;       public static ObjectMapper getObjectMapper() {\r\n&gt;         objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL).configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,false);\r\n&gt;         return objectMapper;\r\n&gt;       } \r\n&gt;     }\r\n\r\nUse\r\n&gt;     FetchResponse fetchResponse =\r\n&gt;     ObjectHelper.getObjectMapper().convertValue(\r\n&gt;                         data, new TypeReference&lt;FetchResponse&gt;() {});\r\n\r\nOR\r\n\r\n    List&lt;Map&lt;String, Object&gt;&gt; responseObj = (List&lt;Map&lt;String, Object&gt;&gt;) response.get(&quot;content&quot;);\r\n\r\n    List&lt;LkAuthUserDetail&gt; responseData = ObjectHelper.getObjectMapper().convertValue(responseObj,\r\n                        new TypeReference&lt;List&lt;LkAuthUserDetail&gt;&gt;() {});","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<blockquote>\n<pre><code>public class ObjectHelper {\n\n  private static ObjectMapper objectMapper = new ObjectMapper();\n\n  public static ObjectMapper getObjectMapper() {\n    objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL).configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,false);\n    return objectMapper;\n  } \n}\n</code></pre>\n</blockquote>\n<p>Use</p>\n<blockquote>\n<pre><code>FetchResponse fetchResponse =\nObjectHelper.getObjectMapper().convertValue(\n                    data, new TypeReference&lt;FetchResponse&gt;() {});\n</code></pre>\n</blockquote>\n<p>OR</p>\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; responseObj = (List&lt;Map&lt;String, Object&gt;&gt;) response.get(&quot;content&quot;);\n\nList&lt;LkAuthUserDetail&gt; responseData = ObjectHelper.getObjectMapper().convertValue(responseObj,\n                    new TypeReference&lt;List&lt;LkAuthUserDetail&gt;&gt;() {});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695365160,"creation_date":1695365160,"answer_id":77155376,"question_id":28821715,"body_markdown":"We faced a similar sort of issue in our microservices communication. We had two services `approval` and `transfer`, so once a transfer is approved there will be a communication between the above services using `Kafka`, where the `transfer` will be the consumer.\r\n\r\nBoth the services are maintaining a common bean `Payload`, which has some fields as `Object` type\r\n\r\n    @Getter\r\n    @Setter\r\n    public class Payload extends KafkaParameters implements Serializable {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \tprivate Object requestedBy;\r\n    \tprivate Object requestDetails;\r\n    \tprivate Object payload;\r\n    \tprivate Object existingPayload;\r\n    \tprivate Object payloadDifference;\r\n    }\r\n\r\nInitially from the `transfer` service we&#39;ll set the value to the `payload` attribute inside `Payload` bean which will be a reference of type `TransactionRequest`. So, once the consumer in the `transfer` service is getting the callback from the `approval` service we are getting the `Payload` and when we tried to downcast we got this error\r\n\r\n    @Service\r\n    @Slf4j\r\n    public class AdjustmentApprovalConsumer {\r\n    \r\n        @KafkaListener(topics = TransferConstants.ADJUSTMENT_APPROVAL_TOPIC, containerFactory = &quot;ApprovalConcurrentKafkaListenerContainerFactory&quot;)\r\n    \tpublic void listenCdr(@org.springframework.messaging.handler.annotation.Payload Payload approvalRequest) {\r\n    \r\n            TransactionRequest request = (TransactionRequest) approvalRequest.getPayload();\r\n        }\r\n    }\r\n\r\nWe fixed this issues by using two methods\r\n\r\n 1) Convert the payload to a JSON string\r\n\r\n```\r\n\tpublic static String asJsonString(final Object obj) {\r\n\t\ttry {\r\n\t\t\treturn new ObjectMapper().writeValueAsString(obj);\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n```\r\n\r\n2) Convert the JSON string to a given bean\r\n\r\n```\r\n\tpublic static &lt;T&gt; Object jsonToObject(final String json, Class&lt;T&gt; type) {\r\n\t\ttry {\r\n\t\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\treturn mapper.readValue(json, type);\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n```\r\n\r\nSo the final code was like this\r\n\r\n    TransactionRequest request = (TransactionRequest) JsonUtils.jsonToObject(JsonUtils.asJsonString(approvalRequest.getPayload()), TransactionRequest.class);\r\n\r\nThis is may not be a conventional way of doing it but surely fixed the issue.","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>We faced a similar sort of issue in our microservices communication. We had two services <code>approval</code> and <code>transfer</code>, so once a transfer is approved there will be a communication between the above services using <code>Kafka</code>, where the <code>transfer</code> will be the consumer.</p>\n<p>Both the services are maintaining a common bean <code>Payload</code>, which has some fields as <code>Object</code> type</p>\n<pre><code>@Getter\n@Setter\npublic class Payload extends KafkaParameters implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    private Object requestedBy;\n    private Object requestDetails;\n    private Object payload;\n    private Object existingPayload;\n    private Object payloadDifference;\n}\n</code></pre>\n<p>Initially from the <code>transfer</code> service we'll set the value to the <code>payload</code> attribute inside <code>Payload</code> bean which will be a reference of type <code>TransactionRequest</code>. So, once the consumer in the <code>transfer</code> service is getting the callback from the <code>approval</code> service we are getting the <code>Payload</code> and when we tried to downcast we got this error</p>\n<pre><code>@Service\n@Slf4j\npublic class AdjustmentApprovalConsumer {\n\n    @KafkaListener(topics = TransferConstants.ADJUSTMENT_APPROVAL_TOPIC, containerFactory = &quot;ApprovalConcurrentKafkaListenerContainerFactory&quot;)\n    public void listenCdr(@org.springframework.messaging.handler.annotation.Payload Payload approvalRequest) {\n\n        TransactionRequest request = (TransactionRequest) approvalRequest.getPayload();\n    }\n}\n</code></pre>\n<p>We fixed this issues by using two methods</p>\n<ol>\n<li>Convert the payload to a JSON string</li>\n</ol>\n<pre><code>    public static String asJsonString(final Object obj) {\n        try {\n            return new ObjectMapper().writeValueAsString(obj);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<ol start=\"2\">\n<li>Convert the JSON string to a given bean</li>\n</ol>\n<pre><code>    public static &lt;T&gt; Object jsonToObject(final String json, Class&lt;T&gt; type) {\n        try {\n            ObjectMapper mapper = new ObjectMapper();\n            return mapper.readValue(json, type);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>So the final code was like this</p>\n<pre><code>TransactionRequest request = (TransactionRequest) JsonUtils.jsonToObject(JsonUtils.asJsonString(approvalRequest.getPayload()), TransactionRequest.class);\n</code></pre>\n<p>This is may not be a conventional way of doing it but surely fixed the issue.</p>\n"}],"owner":{"account_id":447462,"reputation":10144,"user_id":841090,"accept_rate":61,"display_name":"Passionate Engineer"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307824,"favorite_count":0,"down_vote_count":1,"up_vote_count":121,"accepted_answer_id":28821825,"answer_count":10,"score":120,"last_activity_date":1695365160,"creation_date":1425340931,"question_id":28821715,"body_markdown":"I&#39;m getting below error:\r\n\r\n    java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account\r\n\r\nwith below code\r\n\r\n    final int expectedId = 1;\r\n\r\n    Test newTest = create();\r\n\r\n    int expectedResponseCode = Response.SC_OK;\r\n\r\n    ArrayList&lt;Account&gt; account = given().when().expect().statusCode(expectedResponseCode)\r\n        .get(&quot;accounts/&quot; + newTest.id() + &quot;/users&quot;)\r\n        .as(ArrayList.class);\r\n    assertThat(account.get(0).getId()).isEqualTo(expectedId);\r\n\r\nIs there a reason why I cannot do `get(0)`?\r\n","title":"java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account","body":"<p>I'm getting below error:</p>\n\n<pre><code>java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.testing.models.Account\n</code></pre>\n\n<p>with below code</p>\n\n<pre><code>final int expectedId = 1;\n\nTest newTest = create();\n\nint expectedResponseCode = Response.SC_OK;\n\nArrayList&lt;Account&gt; account = given().when().expect().statusCode(expectedResponseCode)\n    .get(\"accounts/\" + newTest.id() + \"/users\")\n    .as(ArrayList.class);\nassertThat(account.get(0).getId()).isEqualTo(expectedId);\n</code></pre>\n\n<p>Is there a reason why I cannot do <code>get(0)</code>?</p>\n"},{"tags":["java","csv","jsf","primefaces"],"answers":[{"comments":[{"owner":{"account_id":13826190,"reputation":493,"user_id":9980464,"display_name":"rolo"},"score":0,"creation_date":1596198262,"post_id":63191165,"comment_id":111742708,"body_markdown":"Thanks for the answer. I have a question, dataExporter isnt just for dataTable componente? Is there a way to use it with the method exportCsv of my example?","body":"Thanks for the answer. I have a question, dataExporter isnt just for dataTable componente? Is there a way to use it with the method exportCsv of my example?"},{"owner":{"account_id":235505,"reputation":10708,"user_id":502366,"display_name":"Melloware"},"score":2,"creation_date":1596199210,"post_id":63191165,"comment_id":111743119,"body_markdown":"If you really are hand generating a CSV why not use Apache Commons CSV? It will handle escaping your CSV correctly even columns that contain commas in them!","body":"If you really are hand generating a CSV why not use Apache Commons CSV? It will handle escaping your CSV correctly even columns that contain commas in them!"},{"owner":{"account_id":13826190,"reputation":493,"user_id":9980464,"display_name":"rolo"},"score":1,"creation_date":1596299554,"post_id":63191165,"comment_id":111770587,"body_markdown":"Yes you are right @Melloware, the correct answer was using an API, in my case I used openCSV, thank you","body":"Yes you are right @Melloware, the correct answer was using an API, in my case I used openCSV, thank you"}],"tags":[],"owner":{"account_id":235505,"reputation":10708,"user_id":502366,"display_name":"Melloware"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596195487,"creation_date":1596195487,"answer_id":63191165,"question_id":63182170,"body_markdown":"You can in PF 7.0 or higher using the `options` attribute!\r\n\r\nFixed: https://github.com/primefaces/primefaces/issues/48\r\n\r\n```xml\r\n&lt;p:dataExporter type=&quot;csv&quot; target=&quot;tbl&quot; fileName=&quot;cars&quot; options=&quot;#{view.csvOptions}&quot; /&gt;\r\n```\r\n\r\nAnd your Options class looks like this to set to colon (:) for example...\r\n```java\r\npublic CSVOptions getCsvOptions() {\r\n    CSVOptions options = new CSVOptions();\r\n    options.setDelimiterChar(&quot;:&quot;);\r\n    return options;\r\n}\r\n```","title":"Exporting a csv using component fileDownload of primefaces generates problems with comma separator when data have commas","body":"<p>You can in PF 7.0 or higher using the <code>options</code> attribute!</p>\n<p>Fixed: <a href=\"https://github.com/primefaces/primefaces/issues/48\" rel=\"nofollow noreferrer\">https://github.com/primefaces/primefaces/issues/48</a></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;p:dataExporter type=&quot;csv&quot; target=&quot;tbl&quot; fileName=&quot;cars&quot; options=&quot;#{view.csvOptions}&quot; /&gt;\n</code></pre>\n<p>And your Options class looks like this to set to colon (:) for example...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public CSVOptions getCsvOptions() {\n    CSVOptions options = new CSVOptions();\n    options.setDelimiterChar(&quot;:&quot;);\n    return options;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695606782,"post_id":77155332,"comment_id":136042343,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77155332/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":7131394,"reputation":1,"user_id":5452476,"display_name":"jkl"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695364589,"creation_date":1695364589,"answer_id":77155332,"question_id":63182170,"body_markdown":"in Primefaces 11 you can&#39;t set the delimiter anymore. \r\nBut maybe \r\n\r\n    public CSVOptions getCsvOptions() {\r\n        // delimiter = ;\r\n        return CSVOptions.EXCEL_NORTHERN_EUROPE;\r\n    }\r\n\r\ndoes what you need. ","title":"Exporting a csv using component fileDownload of primefaces generates problems with comma separator when data have commas","body":"<p>in Primefaces 11 you can't set the delimiter anymore.\nBut maybe</p>\n<pre><code>public CSVOptions getCsvOptions() {\n    // delimiter = ;\n    return CSVOptions.EXCEL_NORTHERN_EUROPE;\n}\n</code></pre>\n<p>does what you need.</p>\n"}],"owner":{"account_id":13826190,"reputation":493,"user_id":9980464,"display_name":"rolo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":819,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695364589,"creation_date":1596147420,"question_id":63182170,"body_markdown":"I have the following problem. I am working with Primefaces, JSF and Java. I am trying to generate a csv file with data of the data base and exporting it with the component p:fileDownload of primefaces. The csv is generated without problems but some of the data are strings with commas init, so the result is that there are separated in different columns. Is there a way of setting another separator? (for example ;) .\r\n\r\nThe method that generates the byte array is this:\r\n\r\n    public byte[] generateCsv(){\r\n                    StringBuilder data = new StringBuilder();\r\n                    data.append(&quot;header1, header2, header3\\n&quot;);\r\n                    for (element elem : listElements) {\r\n                        data.append(elem.getCode()+&quot;,&quot;+elem.getName()+&quot;,&quot;+elem.getData+&quot;\\n&quot;);\r\n                    }\r\n                    byte[] bytes = String.valueOf(data).getBytes();\r\n                    return bytes;\r\n    }\r\n\r\nIn the frontend, the bean has this method:\r\n\r\n    public StreamedContent exportCsv() {\r\n            try {\r\n                \r\n                byte[] cert = businessBean.generateCsv();\r\n                if (cert != null) {\r\n                    InputStream targetStream = new ByteArrayInputStream(cert);\r\n                    StreamedContent file = new DefaultStreamedContent(targetStream, &quot;application/csv&quot;, &quot;Example.csv&quot;);\r\n                    \r\n                    return file;\r\n                } else {\r\n                   //ERROR\r\n                }\r\n    \r\n            } catch (Exception ex) {\r\n                \r\n            }\r\n            return null;\r\n        }\r\n\r\nAnd the button that generates the csv in the xhtml is this one:\r\n\r\n    &lt;p:fileDownload contentDisposition=&quot;inline&quot;   value=&quot;#{exampleBean.exportCsv()}&quot; /&gt;\r\n\r\nResult:\r\nIf the elements of each column are supposed to be:\r\n\r\n    column1= elem1\r\n    column2= elem2.1,elem2.2\r\n    column3=elem3.1,elem3.2\r\nIn the file every element appears like.\r\n\r\n    column1= elem1\r\n    column2= elem2.1\r\n    column3=elem2.2\r\n    column4=elem3.1\r\n    column5=elem3.2\r\n\r\nThere is a way to set a different separator?\r\nThanks","title":"Exporting a csv using component fileDownload of primefaces generates problems with comma separator when data have commas","body":"<p>I have the following problem. I am working with Primefaces, JSF and Java. I am trying to generate a csv file with data of the data base and exporting it with the component p:fileDownload of primefaces. The csv is generated without problems but some of the data are strings with commas init, so the result is that there are separated in different columns. Is there a way of setting another separator? (for example ;) .</p>\n<p>The method that generates the byte array is this:</p>\n<pre><code>public byte[] generateCsv(){\n                StringBuilder data = new StringBuilder();\n                data.append(&quot;header1, header2, header3\\n&quot;);\n                for (element elem : listElements) {\n                    data.append(elem.getCode()+&quot;,&quot;+elem.getName()+&quot;,&quot;+elem.getData+&quot;\\n&quot;);\n                }\n                byte[] bytes = String.valueOf(data).getBytes();\n                return bytes;\n}\n</code></pre>\n<p>In the frontend, the bean has this method:</p>\n<pre><code>public StreamedContent exportCsv() {\n        try {\n            \n            byte[] cert = businessBean.generateCsv();\n            if (cert != null) {\n                InputStream targetStream = new ByteArrayInputStream(cert);\n                StreamedContent file = new DefaultStreamedContent(targetStream, &quot;application/csv&quot;, &quot;Example.csv&quot;);\n                \n                return file;\n            } else {\n               //ERROR\n            }\n\n        } catch (Exception ex) {\n            \n        }\n        return null;\n    }\n</code></pre>\n<p>And the button that generates the csv in the xhtml is this one:</p>\n<pre><code>&lt;p:fileDownload contentDisposition=&quot;inline&quot;   value=&quot;#{exampleBean.exportCsv()}&quot; /&gt;\n</code></pre>\n<p>Result:\nIf the elements of each column are supposed to be:</p>\n<pre><code>column1= elem1\ncolumn2= elem2.1,elem2.2\ncolumn3=elem3.1,elem3.2\n</code></pre>\n<p>In the file every element appears like.</p>\n<pre><code>column1= elem1\ncolumn2= elem2.1\ncolumn3=elem2.2\ncolumn4=elem3.1\ncolumn5=elem3.2\n</code></pre>\n<p>There is a way to set a different separator?\nThanks</p>\n"},{"tags":["java","matrix","complex-numbers","polynomial-math","root-finding"],"answers":[{"comments":[{"owner":{"account_id":1061185,"reputation":289,"user_id":1062778,"accept_rate":83,"display_name":"Virginie"},"score":0,"creation_date":1363464441,"post_id":15386243,"comment_id":21865763,"body_markdown":"Thanks a lot! This method was indeed quite easy to implement, and I&#39;m getting good results like that - problem solved.","body":"Thanks a lot! This method was indeed quite easy to implement, and I&#39;m getting good results like that - problem solved."}],"tags":[],"owner":{"account_id":2237265,"reputation":26976,"user_id":1973271,"accept_rate":100,"display_name":"flup"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1363202261,"creation_date":1363180088,"answer_id":15386243,"question_id":15385867,"body_markdown":"The [Durand-Kerner method][1] also works for complex coefficients and does not rely on matrix computations.\r\n\r\nIt&#39;s quite simple to implement, you could google up an implementation (Stackoverflow forbids me to link the one I found) or make one of your own. You could use the [jscience][2] library for the complex data types, not for the algorithm itself.\r\n\r\nEDIT: Didn&#39;t see that you need evd too, never mind my mention of jscience as an option to do the complex matrix math.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Durand%E2%80%93Kerner_method\r\n  [2]: http://jscience.org/\r\n  [3]: http://jscience.org/api/org/jscience/mathematics/vector/Matrix.html","title":"Complex-coefficient polynomial root finding in Java","body":"<p>The <a href=\"http://en.wikipedia.org/wiki/Durand%E2%80%93Kerner_method\" rel=\"nofollow\">Durand-Kerner method</a> also works for complex coefficients and does not rely on matrix computations.</p>\n\n<p>It's quite simple to implement, you could google up an implementation (Stackoverflow forbids me to link the one I found) or make one of your own. You could use the <a href=\"http://jscience.org/\" rel=\"nofollow\">jscience</a> library for the complex data types, not for the algorithm itself.</p>\n\n<p>EDIT: Didn't see that you need evd too, never mind my mention of jscience as an option to do the complex matrix math.</p>\n"},{"tags":[],"owner":{"account_id":3710720,"reputation":25429,"user_id":3088138,"display_name":"Lutz Lehmann"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1386967186,"creation_date":1386967186,"answer_id":20575604,"question_id":15385867,"body_markdown":"If one wants to keep it real, use the `Bairstow method`. If the polynomial has odd degree, use first `Newton&#39;s method` to find a real root and reduce the polynomial to even degree. This avoids an odd singularity of the Bairstow method where it converges towards a quadratic polynomial that has infinity as one root. Information of good quality can be found at the usual places. Some of it written or edited by yours truly.\r\n\r\nDetermine an inner root radius r and use z^2-2r*cos(phi)*z+r^2 with random angle phi as initial factor for Bairstow&#39;s method. It produces in each step a quadratic factor, always in and with real coefficients, containing either a pair of real roots or a conjugate pair of complex roots. \r\n\r\nCheck in each step for speed of convergence and restart with a different initial point if necessary. Find new roots after deflation, and polish the roots or quadratic factors by executing the method with the original polynomial and the factors as starting point.","title":"Complex-coefficient polynomial root finding in Java","body":"<p>If one wants to keep it real, use the <code>Bairstow method</code>. If the polynomial has odd degree, use first <code>Newton's method</code> to find a real root and reduce the polynomial to even degree. This avoids an odd singularity of the Bairstow method where it converges towards a quadratic polynomial that has infinity as one root. Information of good quality can be found at the usual places. Some of it written or edited by yours truly.</p>\n\n<p>Determine an inner root radius r and use z^2-2r*cos(phi)*z+r^2 with random angle phi as initial factor for Bairstow's method. It produces in each step a quadratic factor, always in and with real coefficients, containing either a pair of real roots or a conjugate pair of complex roots. </p>\n\n<p>Check in each step for speed of convergence and restart with a different initial point if necessary. Find new roots after deflation, and polish the roots or quadratic factors by executing the method with the original polynomial and the factors as starting point.</p>\n"}],"owner":{"account_id":1061185,"reputation":289,"user_id":1062778,"accept_rate":83,"display_name":"Virginie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1347,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":15386243,"answer_count":2,"score":15,"last_activity_date":1695364052,"creation_date":1363179075,"question_id":15385867,"body_markdown":"I&#39;m trying to find a way to compute roots of a polynomial with complex coefficients in Java (i.e. an  equivalent of what is ridiculously easily done with roots() in MATLAB).\r\n\r\nI&#39;m ready to recode a root finding algorithm that builds the companion matrix and then uses generalized eigenvalue decomposition to find the roots, but for this I would need a library that handles complex-valued matrix operations.\r\n\r\nI browsed for a while and nothing convincing seems to be available out there, which I think is rather weird. Then, I&#39;d like to ask you:\r\n\r\n1. Do you know a (stable) Java library that performs root finding on polynomials defined by COMPLEX coefficients?\r\n\r\n2. Do you know a (stable) Java library that performs evd, svd, inverse, etc. on COMPLEX-valued matrices?\r\n\r\n\r\n\r\n*Note:* I already looked at JAMA (doesn&#39;t handle complex), Michael Thomas Flanagan&#39;s Java Scientific Library (not available anymore), colt (doesn&#39;t seem to handle complex), Efficient Java Matrix Library (no complex either), DDogleg Numerics (does not handle polynomial with complex coefficients), JScience (not clear if evd is available) and common-math from Apache (not clear if they allow for complex matrices, and if yes, if evd is available).\r\n\r\n\r\n","title":"Complex-coefficient polynomial root finding in Java","body":"<p>I'm trying to find a way to compute roots of a polynomial with complex coefficients in Java (i.e. an  equivalent of what is ridiculously easily done with roots() in MATLAB).</p>\n\n<p>I'm ready to recode a root finding algorithm that builds the companion matrix and then uses generalized eigenvalue decomposition to find the roots, but for this I would need a library that handles complex-valued matrix operations.</p>\n\n<p>I browsed for a while and nothing convincing seems to be available out there, which I think is rather weird. Then, I'd like to ask you:</p>\n\n<ol>\n<li><p>Do you know a (stable) Java library that performs root finding on polynomials defined by COMPLEX coefficients?</p></li>\n<li><p>Do you know a (stable) Java library that performs evd, svd, inverse, etc. on COMPLEX-valued matrices?</p></li>\n</ol>\n\n<p><em>Note:</em> I already looked at JAMA (doesn't handle complex), Michael Thomas Flanagan's Java Scientific Library (not available anymore), colt (doesn't seem to handle complex), Efficient Java Matrix Library (no complex either), DDogleg Numerics (does not handle polynomial with complex coefficients), JScience (not clear if evd is available) and common-math from Apache (not clear if they allow for complex matrices, and if yes, if evd is available).</p>\n"},{"tags":["java","excel","apache-poi","xls"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695358723,"post_id":77148517,"comment_id":136016392,"body_markdown":"The issue is not reproducible from this vague problem description. To be able to reproduce, one would need the `*.xls` file and the code used and the information what Apache POI version used.","body":"The issue is not reproducible from this vague problem description. To be able to reproduce, one would need the <code>*.xls</code> file and the code used and the information what Apache POI version used."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1695364013,"post_id":77148517,"comment_id":136016943,"body_markdown":"Hi Axel, sorry if the problem description is too vague, I have updated with part of code I use to write in the excel, the sheet contains the data validation list is supposedly to not be changed which is index 0, the code only writes to sheet index 1 and the `*.xls` file is protected with password. Is it easier if i were able to provide the `*.xls` file?","body":"Hi Axel, sorry if the problem description is too vague, I have updated with part of code I use to write in the excel, the sheet contains the data validation list is supposedly to not be changed which is index 0, the code only writes to sheet index 1 and the <code>*.xls</code> file is protected with password. Is it easier if i were able to provide the <code>*.xls</code> file?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695368656,"post_id":77148517,"comment_id":136017761,"body_markdown":"The code alone will not help. Unless cell `C11`, which gets changed is part of something special and not simply a data cell. See my first comment. There I told what would be needed.","body":"The code alone will not help. Unless cell <code>C11</code>, which gets changed is part of something special and not simply a data cell. See my first comment. There I told what would be needed."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1695369645,"post_id":77148517,"comment_id":136017926,"body_markdown":"The Apache POI version used is 3.15 beta 1, for the test excel file, where do I pass it? Sorry for this kind of question because I rarely ask any questions on this site.","body":"The Apache POI version used is 3.15 beta 1, for the test excel file, where do I pass it? Sorry for this kind of question because I rarely ask any questions on this site."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695370482,"post_id":77148517,"comment_id":136018071,"body_markdown":"This site does not provide file storage. You need upload it to some public available file storage. But be aware uploading files containing secret data. Correct way is to create a file containing only test data but nevertheless produces the issue. That&#39;s your task. Else hire a specialist and put confidentiality obligation in the contract.","body":"This site does not provide file storage. You need upload it to some public available file storage. But be aware uploading files containing secret data. Correct way is to create a file containing only test data but nevertheless produces the issue. That&#39;s your task. Else hire a specialist and put confidentiality obligation in the contract."}],"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695363534,"creation_date":1695285428,"question_id":77148517,"body_markdown":"I need to write data to existing excel workbook (.xls) but when the workbook is created, it become corrupted with error `We found a problem with some content in...`. When yes is clicked, the excel workbook lost some of the formula and the cell style.\r\n\r\nThe excel file is protected and cannot change anything in the sheet that contains the data validation list.\r\n\r\nThere are two cells with data validation list. The first one has list of 54 items and the second one has list of 229 items and the format is custom date. The validation data list is pre-existing and protected, so cannot change anything in the sheet.\r\n\r\nIs there any workaround can be done? I cannot change any other thing to the excel except for write the data to the unprotected cell using the java code.\r\n\r\nThis is test code that I use:\r\n```\r\nFileInputStream fileInput = new FileInputStream(&quot;D:/Test/Test.xls&quot;);\r\nWorkbook wb = null;\r\nwb = new HSSFWorkbook(fileInput);\r\n\r\nfileInput.close();\r\n\r\nSheet sheet = null;\r\nCell cell = null;\r\n\r\nsheet = wb.getSheetAt(1);\r\n\r\ncell = sheet.getRow(10).getCell(2);\r\n\r\ncell.setCellValue(&quot;10.00&quot;);\r\n\r\nFileOutputStream fileOut = new FileOutputStream(&quot;D:/Out/Test_Updated.xls&quot;);\r\nworkbook.write(fileOut);\r\nfileOut.close();\r\n```","title":"Excel file become corrupted and remove existing data validation when workbook created from original file with Apache POI","body":"<p>I need to write data to existing excel workbook (.xls) but when the workbook is created, it become corrupted with error <code>We found a problem with some content in...</code>. When yes is clicked, the excel workbook lost some of the formula and the cell style.</p>\n<p>The excel file is protected and cannot change anything in the sheet that contains the data validation list.</p>\n<p>There are two cells with data validation list. The first one has list of 54 items and the second one has list of 229 items and the format is custom date. The validation data list is pre-existing and protected, so cannot change anything in the sheet.</p>\n<p>Is there any workaround can be done? I cannot change any other thing to the excel except for write the data to the unprotected cell using the java code.</p>\n<p>This is test code that I use:</p>\n<pre><code>FileInputStream fileInput = new FileInputStream(&quot;D:/Test/Test.xls&quot;);\nWorkbook wb = null;\nwb = new HSSFWorkbook(fileInput);\n\nfileInput.close();\n\nSheet sheet = null;\nCell cell = null;\n\nsheet = wb.getSheetAt(1);\n\ncell = sheet.getRow(10).getCell(2);\n\ncell.setCellValue(&quot;10.00&quot;);\n\nFileOutputStream fileOut = new FileOutputStream(&quot;D:/Out/Test_Updated.xls&quot;);\nworkbook.write(fileOut);\nfileOut.close();\n</code></pre>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695351476,"post_id":77154405,"comment_id":136015881,"body_markdown":"The *java.time* classes use the ISO 8601 standard formats when parsing/generating text. That means using a `T` in the middle rather than the SPACE seen in your text: `2023-09-22T02:11:13.855618`.  I guess you either need to correct your inputs to comply with ISO 8601 or you need to configure Jackson with a formatter to parse your particular inputs.  https://en.wikipedia.org/wiki/ISO_8601","body":"The <i>java.time</i> classes use the ISO 8601 standard formats when parsing/generating text. That means using a <code>T</code> in the middle rather than the SPACE seen in your text: <code>2023-09-22T02:11:13.855618</code>.  I guess you either need to correct your inputs to comply with ISO 8601 or you need to configure Jackson with a formatter to parse your particular inputs.  <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ISO_8601</a>"}],"answers":[{"tags":[],"owner":{"account_id":17683470,"reputation":158,"user_id":12836822,"display_name":"Ashrik Ahamed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695358266,"creation_date":1695358266,"answer_id":77154942,"question_id":77154405,"body_markdown":"Am no sure how you interact from front end, passing json data from the front end or when you call the end point just put this to the @PathVariable or @RequestParam like this in controller class: \r\n\r\n    @RequestMapping(method = RequestMethod.GET, path = &quot;/v{version}&quot;, produces = &quot;application/json&quot;)\r\n\tResponseEntity&lt;List&lt;Test&gt;&gt; findByDate(@RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME) LocalDateTime date)}\r\n\r\nUse this standard ISO method.\r\n\r\n\r\n","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.time.LocalDateTime`","body":"<p>Am no sure how you interact from front end, passing json data from the front end or when you call the end point just put this to the @PathVariable or @RequestParam like this in controller class:</p>\n<pre><code>@RequestMapping(method = RequestMethod.GET, path = &quot;/v{version}&quot;, produces = &quot;application/json&quot;)\nResponseEntity&lt;List&lt;Test&gt;&gt; findByDate(@RequestParam(required = false) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME) LocalDateTime date)}\n</code></pre>\n<p>Use this standard ISO method.</p>\n"},{"tags":[],"owner":{"account_id":20679683,"reputation":31,"user_id":15183550,"display_name":"Satya Raj Awasthi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695363351,"creation_date":1695363351,"answer_id":77155237,"question_id":77154405,"body_markdown":"you are getting that error since Json is trying to deserialize the date sting into instance of `LocalDateTime ` but it not being able to do that due no constructor or such method on that class.\r\n\r\nYou can get to solution by creating a custom deserializer class by extending `JsonDeserializer` and override the deserializer method and return to required by Parsing.\r\n\r\n    import java.io.IOException;\r\n    import java.time.LocalDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.JsonDeserializer;\r\n    \r\n    public class CustomLocalDateTimeDeserializer extends JsonDeserializer&lt;LocalDateTime&gt; {\r\n        private static final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;);\r\n    \r\n        @Override\r\n        public LocalDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n            String dateStr = jsonParser.getValueAsString();\r\n            return LocalDateTime.parse(dateStr, formatter);\r\n        }\r\n    }\r\n\r\nThen annotate the field with custom deserializer instead.\r\n\r\n    @JsonDeserialize(using = CustomLocalDateTimeDeserializer.class)\r\n    @JsonSerialize(using = LocalDateTimeSerializer.class)\r\n    public LocalDateTime date;\r\n\r\nI am sure that you have this dependency.\r\n\r\n\r\n    implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\r\n\r\nHope this works for you. I did have get some shortcut just before 3-4 months. Sorry I forgot that.\r\n","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.time.LocalDateTime`","body":"<p>you are getting that error since Json is trying to deserialize the date sting into instance of <code>LocalDateTime </code> but it not being able to do that due no constructor or such method on that class.</p>\n<p>You can get to solution by creating a custom deserializer class by extending <code>JsonDeserializer</code> and override the deserializer method and return to required by Parsing.</p>\n<pre><code>import java.io.IOException;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\n\npublic class CustomLocalDateTimeDeserializer extends JsonDeserializer&lt;LocalDateTime&gt; {\n    private static final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;);\n\n    @Override\n    public LocalDateTime deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        String dateStr = jsonParser.getValueAsString();\n        return LocalDateTime.parse(dateStr, formatter);\n    }\n}\n</code></pre>\n<p>Then annotate the field with custom deserializer instead.</p>\n<pre><code>@JsonDeserialize(using = CustomLocalDateTimeDeserializer.class)\n@JsonSerialize(using = LocalDateTimeSerializer.class)\npublic LocalDateTime date;\n</code></pre>\n<p>I am sure that you have this dependency.</p>\n<pre><code>implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\n</code></pre>\n<p>Hope this works for you. I did have get some shortcut just before 3-4 months. Sorry I forgot that.</p>\n"}],"owner":{"account_id":1759709,"reputation":1,"user_id":1607148,"display_name":"Paulo Roberto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695363351,"creation_date":1695345547,"question_id":77154405,"body_markdown":"In Json return the field date time:\r\n```none\r\n&quot;date&quot;: &quot;2023-09-22 01:07:50.062477&quot;\r\n```\r\nIn class Json:\r\n```java\r\n@JsonDeserialize(using = LocalDateTimeDeserializer.class)\r\n@JsonSerialize(using = LocalDateTimeSerializer.class)\r\npublic LocalDateTime date;\r\n```\r\nReturn error:\r\n\r\n&gt;Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.time.LocalDateTime` (no Creators, like default construct, exist): no String-argument constructor/factory method to deserialize from String value (&#39;2023-09-22 02:11:13.855618&#39;)\r\n\r\nHow to solve?\r\n```java\r\n@JsonDeserialize(using = LocalDateTimeDeserializer.class)\r\n@JsonSerialize(using = LocalDateTimeSerializer.class)\r\npublic LocalDateTime date;\r\n```\r\n","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.time.LocalDateTime`","body":"<p>In Json return the field date time:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;date&quot;: &quot;2023-09-22 01:07:50.062477&quot;\n</code></pre>\n<p>In class Json:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonDeserialize(using = LocalDateTimeDeserializer.class)\n@JsonSerialize(using = LocalDateTimeSerializer.class)\npublic LocalDateTime date;\n</code></pre>\n<p>Return error:</p>\n<blockquote>\n<p>Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of <code>java.time.LocalDateTime</code> (no Creators, like default construct, exist): no String-argument constructor/factory method to deserialize from String value ('2023-09-22 02:11:13.855618')</p>\n</blockquote>\n<p>How to solve?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonDeserialize(using = LocalDateTimeDeserializer.class)\n@JsonSerialize(using = LocalDateTimeSerializer.class)\npublic LocalDateTime date;\n</code></pre>\n"},{"tags":["java","multithreading","glassfish","jax-ws","executorservice"],"comments":[{"owner":{"account_id":281678,"reputation":5500,"user_id":578116,"accept_rate":68,"display_name":"smk"},"score":1,"creation_date":1360329847,"post_id":14773517,"comment_id":20681504,"body_markdown":"Im surprised the executor is making it sequential. Cannot help without any code snippets. Also take a look at Akka actors.","body":"Im surprised the executor is making it sequential. Cannot help without any code snippets. Also take a look at Akka actors."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1360330122,"post_id":14773517,"comment_id":20681639,"body_markdown":"it&#39;s possible the webservice client library you are using is making the calls synchronized.  again, impossible to tell much w/out more details and code.","body":"it&#39;s possible the webservice client library you are using is making the calls synchronized.  again, impossible to tell much w/out more details and code."},{"owner":{"account_id":104539,"reputation":399,"user_id":279436,"accept_rate":73,"display_name":"AD."},"score":0,"creation_date":1360332647,"post_id":14773517,"comment_id":20682900,"body_markdown":"i have edited my question including the code inside my web method","body":"i have edited my question including the code inside my web method"},{"owner":{"account_id":258668,"reputation":3728,"user_id":540981,"accept_rate":82,"display_name":"Danish"},"score":2,"creation_date":1360332678,"post_id":14773517,"comment_id":20682920,"body_markdown":"What is the value of `size` in `ExecutorService executor = Executors.newFixedThreadPool(size);`","body":"What is the value of <code>size</code> in <code>ExecutorService executor = Executors.newFixedThreadPool(size);</code>"},{"owner":{"account_id":2130230,"reputation":15498,"user_id":1891219,"display_name":"gaborsch"},"score":1,"creation_date":1360332999,"post_id":14773517,"comment_id":20683094,"body_markdown":"IMHO there can be 2 reasons: 1) because of the load there are so many threads waiting that they will &quot;seem to be serialized&quot;, 2) there is a common resource, e.g. in `data` where the 2 threads synchronize to each other.","body":"IMHO there can be 2 reasons: 1) because of the load there are so many threads waiting that they will &quot;seem to be serialized&quot;, 2) there is a common resource, e.g. in <code>data</code> where the 2 threads synchronize to each other."},{"owner":{"account_id":2130230,"reputation":15498,"user_id":1891219,"display_name":"gaborsch"},"score":0,"creation_date":1360333423,"post_id":14773517,"comment_id":20683334,"body_markdown":"If there are 2 jobs only, maybe you could do one of the jobs *in your current thread*, and start a parallel job for the other job. This way you save the costs of keeping of half of the threads.","body":"If there are 2 jobs only, maybe you could do one of the jobs <i>in your current thread</i>, and start a parallel job for the other job. This way you save the costs of keeping of half of the threads."}],"answers":[{"tags":[],"owner":{"account_id":2130230,"reputation":15498,"user_id":1891219,"display_name":"gaborsch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360338843,"creation_date":1360338843,"answer_id":14776394,"question_id":14773517,"body_markdown":"As I noted in the prevoius comments, there can be 2 major reasons why it is &quot;serialized&quot;:\r\n\r\n 1. There is a huge load, it may be that too many request arrive parallelly, so your `MyThread`s are not put into the waiting queue at the same time. If the number of executing threads is small enough, you may *see* that the jobs are executes one after the other.\r\n 2. There may be a `synchronized` resource somewhere is your `data`. Both threads have access to them. \r\n\r\nBut I don&#39;t really understand why you have to run *both jobs* in a separate Thread. You could do like this:\r\n\r\n    ExecutorService executor = Executors.newFixedThreadPool(size);\r\n    Future&lt;Boolean&gt; futureOne = executor.submit(new MyThread(serviceOne, data));\r\n    Runnable jobTwo = new  MyThread(serviceTwo, data);\r\n    jobTwo.run();\r\n    bSuccessfulOne = futureOne.get();\r\n\r\nThis way you need half as much `Thread`s in your `ThreadPool`, this will surely give you better performance. \r\n\r\nIf you stick to the original version, I recommend you to *measure* (I mean prove your assumption, e.g. by log).\r\n\r\n","title":"Executing multiple threads in java web service","body":"<p>As I noted in the prevoius comments, there can be 2 major reasons why it is \"serialized\":</p>\n\n<ol>\n<li>There is a huge load, it may be that too many request arrive parallelly, so your <code>MyThread</code>s are not put into the waiting queue at the same time. If the number of executing threads is small enough, you may <em>see</em> that the jobs are executes one after the other.</li>\n<li>There may be a <code>synchronized</code> resource somewhere is your <code>data</code>. Both threads have access to them. </li>\n</ol>\n\n<p>But I don't really understand why you have to run <em>both jobs</em> in a separate Thread. You could do like this:</p>\n\n<pre><code>ExecutorService executor = Executors.newFixedThreadPool(size);\nFuture&lt;Boolean&gt; futureOne = executor.submit(new MyThread(serviceOne, data));\nRunnable jobTwo = new  MyThread(serviceTwo, data);\njobTwo.run();\nbSuccessfulOne = futureOne.get();\n</code></pre>\n\n<p>This way you need half as much <code>Thread</code>s in your <code>ThreadPool</code>, this will surely give you better performance. </p>\n\n<p>If you stick to the original version, I recommend you to <em>measure</em> (I mean prove your assumption, e.g. by log).</p>\n"},{"tags":[],"owner":{"account_id":5855624,"reputation":1,"user_id":4612972,"display_name":"satya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425008138,"creation_date":1425008138,"answer_id":28757087,"question_id":14773517,"body_markdown":"Your sequential execution is due to below lines:\r\nbSuccessfulOne = futureOne.get();\r\nbSuccessfulTwo = futureTwo.get();\r\n\r\nPlease make a list of future add your result there and stop the thread execution.\r\nYou may use awaitTermination or some other thing.\r\nThen get the future object from list and do get operation.","title":"Executing multiple threads in java web service","body":"<p>Your sequential execution is due to below lines:\nbSuccessfulOne = futureOne.get();\nbSuccessfulTwo = futureTwo.get();</p>\n\n<p>Please make a list of future add your result there and stop the thread execution.\nYou may use awaitTermination or some other thing.\nThen get the future object from list and do get operation.</p>\n"}],"owner":{"account_id":104539,"reputation":399,"user_id":279436,"accept_rate":73,"display_name":"AD."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9178,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695362860,"creation_date":1360329651,"question_id":14773517,"body_markdown":"I have a web service which in one of its web methods creates two threads and calls two more web service for inserting data. Now, my original web service is expected to receive calls in range of 1,000 to 10,000 in parallel. So you may understand that for each such call internally my web service is going to create two more threads. I have already tuned my application server for such heavy load. trust me.\r\n\r\nI used Executor with fixed thread pool size using future objects in my original web service but i found that the calls made to the other two web services seem to be processed sequentially. I have checked all tutorials/code snippets. My code seems correct.\r\n\r\n    ExecutorService executor = Executors.newFixedThreadPool(size);\r\n    Future&lt;Boolean&gt; futureOne = executor.submit(new MyThread(serviceOne, data));\r\n    Future&lt;Boolean&gt; futureTwo = executor.submit(new  MyThread(serviceTwo, data));\r\n    bSuccessfulOne = futureOne.get();\r\n    bSuccessfulTwo = futureTwo.get();\r\n    \r\n\r\nIn view of the first para that i wrote is there any multithreading/job parallel framework/just some common-sense programming that might help process these web service calls in parallel. If any, please suggest.","title":"Executing multiple threads in java web service","body":"<p>I have a web service which in one of its web methods creates two threads and calls two more web service for inserting data. Now, my original web service is expected to receive calls in range of 1,000 to 10,000 in parallel. So you may understand that for each such call internally my web service is going to create two more threads. I have already tuned my application server for such heavy load. trust me.</p>\n\n<p>I used Executor with fixed thread pool size using future objects in my original web service but i found that the calls made to the other two web services seem to be processed sequentially. I have checked all tutorials/code snippets. My code seems correct.</p>\n\n<pre><code>ExecutorService executor = Executors.newFixedThreadPool(size);\nFuture&lt;Boolean&gt; futureOne = executor.submit(new MyThread(serviceOne, data));\nFuture&lt;Boolean&gt; futureTwo = executor.submit(new  MyThread(serviceTwo, data));\nbSuccessfulOne = futureOne.get();\nbSuccessfulTwo = futureTwo.get();\n</code></pre>\n\n<p>In view of the first para that i wrote is there any multithreading/job parallel framework/just some common-sense programming that might help process these web service calls in parallel. If any, please suggest.</p>\n"},{"tags":["java","maven","parent-pom","apache-dubbo"],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695362833,"creation_date":1695362833,"answer_id":77155209,"question_id":77154712,"body_markdown":"Perhaps the problem could be in defining dependencies in the `&lt;dependentManagement/&gt;` section in the parent `pom`. For example:\r\n\r\n```xml\r\n&lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot-dubbo.version}&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt; &lt;!-- wrong --&gt;\r\n            &lt;scope&gt;import&lt;/scope&gt; &lt;!-- wrong --&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n```\r\n\r\nThe `&lt;type/&gt;` and `&lt;/scope&gt;` are incorrect, beacuse the `dubbo-spring-boot-starter` dependency isn&#39;t of type `pom` and you didn&#39;t should to define the scope as `import`.\r\n\r\nAccording to [official docs][1], the `import` scope is only relevant for depepndencies with type `pom`:\r\n\r\n&gt; This scope is only supported on a dependency of type `pom` in the `&lt;dependencyManagement&gt;` section. It indicates the dependency is to be replaced with the effective list of dependencies in the specified POM&#39;s `&lt;dependencyManagement&gt;` section. Since they are replaced, dependencies with a scope of `import` do not actually participate in limiting the transitivity of a dependency.\r\n\r\nTry to remove the type and scope from all dependencies in the `&lt;dependentManagement/&gt;` section in the parent `pom`.\r\n\r\n\r\nIt is just a guess.\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-scope","title":"why child pom create a new version？","body":"<p>Perhaps the problem could be in defining dependencies in the <code>&lt;dependentManagement/&gt;</code> section in the parent <code>pom</code>. For example:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot-dubbo.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt; &lt;!-- wrong --&gt;\n            &lt;scope&gt;import&lt;/scope&gt; &lt;!-- wrong --&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>The <code>&lt;type/&gt;</code> and <code>&lt;/scope&gt;</code> are incorrect, beacuse the <code>dubbo-spring-boot-starter</code> dependency isn't of type <code>pom</code> and you didn't should to define the scope as <code>import</code>.</p>\n<p>According to <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-scope\" rel=\"nofollow noreferrer\">official docs</a>, the <code>import</code> scope is only relevant for depepndencies with type <code>pom</code>:</p>\n<blockquote>\n<p>This scope is only supported on a dependency of type <code>pom</code> in the <code>&lt;dependencyManagement&gt;</code> section. It indicates the dependency is to be replaced with the effective list of dependencies in the specified POM's <code>&lt;dependencyManagement&gt;</code> section. Since they are replaced, dependencies with a scope of <code>import</code> do not actually participate in limiting the transitivity of a dependency.</p>\n</blockquote>\n<p>Try to remove the type and scope from all dependencies in the <code>&lt;dependentManagement/&gt;</code> section in the parent <code>pom</code>.</p>\n<p>It is just a guess.</p>\n"}],"owner":{"account_id":9427444,"reputation":45,"user_id":7011962,"display_name":"gfq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77155209,"answer_count":1,"score":2,"last_activity_date":1695362833,"creation_date":1695353382,"question_id":77154712,"body_markdown":"1. Parent pom code\r\n\r\n   ```\r\n   \r\n       &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n       &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n       &lt;artifactId&gt;SpringCloudDemo&lt;/artifactId&gt;\r\n       &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n       &lt;name&gt;SpringCloudDemo&lt;/name&gt;\r\n       &lt;description&gt;SpringCloudDemo&lt;/description&gt;\r\n       &lt;packaging&gt;pom&lt;/packaging&gt;\r\n   \r\n       &lt;dependencyManagement&gt;\r\n           &lt;dependencies&gt;\r\n   \r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\r\n                   &lt;version&gt;${spring-boot-dubbo.version}&lt;/version&gt;\r\n                   &lt;type&gt;pom&lt;/type&gt;\r\n                   &lt;scope&gt;import&lt;/scope&gt;\r\n               &lt;/dependency&gt;\r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;dubbo&lt;/artifactId&gt;\r\n                   &lt;version&gt;${spring-boot-dubbo.version}&lt;/version&gt;\r\n                   &lt;type&gt;pom&lt;/type&gt;\r\n                   &lt;scope&gt;import&lt;/scope&gt;\r\n               &lt;/dependency&gt;\r\n         \r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;dubbo-registry-nacos&lt;/artifactId&gt;\r\n                   &lt;version&gt;${spring-boot-dubbo-nacos.version}&lt;/version&gt;\r\n                   &lt;type&gt;pom&lt;/type&gt;\r\n                   &lt;scope&gt;import&lt;/scope&gt;\r\n               &lt;/dependency&gt;\r\n   \r\n   \r\n           &lt;/dependencies&gt;\r\n       &lt;/dependencyManagement&gt;\r\n   \r\n   ```\r\n\r\n2. in child pom ，child extends parent pom In Child POM\r\n\r\n```\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;SpringCloudDemo&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dubbo&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Nacos依赖 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dubbo-registry-nacos&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\n3. But my child pom download 2.7.4.1 version，no use Parent Pom 3.1.9 Version dubbo，like picture\r\n4. I have one questions: \r\n\r\nI want use 3.1.9 Version Dubbo ,But In Child Pom download 2.7.4.1 Version Dubbo？what happening？","title":"why child pom create a new version？","body":"<ol>\n<li><p>Parent pom code</p>\n<pre><code>\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;SpringCloudDemo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;SpringCloudDemo&lt;/name&gt;\n    &lt;description&gt;SpringCloudDemo&lt;/description&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n                &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\n                &lt;version&gt;${spring-boot-dubbo.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n                &lt;artifactId&gt;dubbo&lt;/artifactId&gt;\n                &lt;version&gt;${spring-boot-dubbo.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n                &lt;artifactId&gt;dubbo-registry-nacos&lt;/artifactId&gt;\n                &lt;version&gt;${spring-boot-dubbo-nacos.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n</code></pre>\n</li>\n<li><p>in child pom ，child extends parent pom In Child POM</p>\n</li>\n</ol>\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;SpringCloudDemo&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n            &lt;artifactId&gt;dubbo&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Nacos依赖 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;\n            &lt;artifactId&gt;dubbo-registry-nacos&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n</code></pre>\n<ol start=\"3\">\n<li>But my child pom download 2.7.4.1 version，no use Parent Pom 3.1.9 Version dubbo，like picture</li>\n<li>I have one questions:</li>\n</ol>\n<p>I want use 3.1.9 Version Dubbo ,But In Child Pom download 2.7.4.1 Version Dubbo？what happening？</p>\n"},{"tags":["java","spring-cloud","spring-kafka","spring-cloud-config"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1695390229,"post_id":77155183,"comment_id":136022031,"body_markdown":"You can&#39;t reference something in config server with classpath. We don&#39;t have support for what you want to do","body":"You can&#39;t reference something in config server with classpath. We don&#39;t have support for what you want to do"},{"owner":{"account_id":8928886,"reputation":1066,"user_id":9719337,"display_name":"Dred"},"score":0,"creation_date":1695612884,"post_id":77155183,"comment_id":136042857,"body_markdown":"Thank you for your answer. Anyway, what is correct way to specify each keystore and/or path for it for each environment?","body":"Thank you for your answer. Anyway, what is correct way to specify each keystore and/or path for it for each environment?"}],"owner":{"account_id":8928886,"reputation":1066,"user_id":9719337,"display_name":"Dred"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695362472,"creation_date":1695362472,"question_id":77155183,"body_markdown":" I have spring-config-server inside which there is \r\n\r\n    main/resources/configs/app1\r\n    main/resources/configs/app2\r\n    main/resources/configs/app3\r\n\r\nAnd inside each folder there are different settings like\r\n\r\n    app1-development.yml\r\n    app1-integration.yml\r\n    app1-production.yml\r\n\r\nAnd now 1 of the applications, for example, the same app1, has certificates for Kafka, which it needs in its work.\r\n\r\nIf you put them in a container inside the application, everything works. \r\nLike this\r\n\r\n    app1/src/main/resources/certs/truststore.jks\r\n\r\nAll the keys are inside that truststore.jks, for all environments. I want to put it from app1 to spring cloud\r\n\r\n    spring-config-server/src/main/resources/configs/app1/certs/truststore.jks\r\n\r\nThe settings are something like this\r\n\r\n    spring-config-server/src/main/resources/configs/app1/app1-development.yml\r\n\r\n    ...\r\n    ssl:\r\n    trust-store-location: classpath:/certs/truststore.jks\r\n    ...\r\nBut after starting app1 it doesn&#39;t find any certs. Why?\r\n","title":"spring cloud with common trustore for kafka in configs","body":"<p>I have spring-config-server inside which there is</p>\n<pre><code>main/resources/configs/app1\nmain/resources/configs/app2\nmain/resources/configs/app3\n</code></pre>\n<p>And inside each folder there are different settings like</p>\n<pre><code>app1-development.yml\napp1-integration.yml\napp1-production.yml\n</code></pre>\n<p>And now 1 of the applications, for example, the same app1, has certificates for Kafka, which it needs in its work.</p>\n<p>If you put them in a container inside the application, everything works.\nLike this</p>\n<pre><code>app1/src/main/resources/certs/truststore.jks\n</code></pre>\n<p>All the keys are inside that truststore.jks, for all environments. I want to put it from app1 to spring cloud</p>\n<pre><code>spring-config-server/src/main/resources/configs/app1/certs/truststore.jks\n</code></pre>\n<p>The settings are something like this</p>\n<pre><code>spring-config-server/src/main/resources/configs/app1/app1-development.yml\n\n...\nssl:\ntrust-store-location: classpath:/certs/truststore.jks\n...\n</code></pre>\n<p>But after starting app1 it doesn't find any certs. Why?</p>\n"},{"tags":["java","android","text-files","delete-file"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1695362396,"post_id":77154563,"comment_id":136016741,"body_markdown":"You wrote (in your question): _I wanted to completely erase all text in it and delete the file if possible._ What exactly do you mean by _erase all text in it_? Do you want to make it an empty file before you delete it? Why would you need to do that if you are going to delete the file anyway?","body":"You wrote (in your question): <i>I wanted to completely erase all text in it and delete the file if possible.</i> What exactly do you mean by <i>erase all text in it</i>? Do you want to make it an empty file before you delete it? Why would you need to do that if you are going to delete the file anyway?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1695362672,"post_id":77154563,"comment_id":136016786,"body_markdown":"Unrelated to your problem: If possible, I recommend that you use [try-with-resources](https://stackoverflow.com/questions/47314061/android-studio-3-0-try-with-resources-requires-api-level-19)","body":"Unrelated to your problem: If possible, I recommend that you use <a href=\"https://stackoverflow.com/questions/47314061/android-studio-3-0-try-with-resources-requires-api-level-19\">try-with-resources</a>"}],"answers":[{"tags":[],"owner":{"account_id":29004116,"reputation":337,"user_id":22217083,"display_name":"Sarah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695362407,"creation_date":1695362407,"answer_id":77155177,"question_id":77154563,"body_markdown":"This code will open the file, erase its content, and then delete the file if needed:\r\n\r\n    import java.io.File;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    \r\n    // ...\r\n    \r\n    // Define the file name\r\n    String fileName = &quot;your_text_file.txt&quot;;\r\n    \r\n    // Get the file object\r\n    File file = new File(getFilesDir(), fileName);\r\n    \r\n    try {\r\n        // Open the file for writing, this will erase its content\r\n        FileWriter writer = new FileWriter(file);\r\n    \r\n        // Optionally, delete the file after erasing its content\r\n        boolean deleteFileAfterErase = true;\r\n    \r\n        // If you want to delete the file, uncomment the next line\r\n        // deleteFileAfterErase = file.delete();\r\n    \r\n        writer.close();\r\n    \r\n        if (deleteFileAfterErase) {\r\n            // The file is deleted after erasing its content\r\n            Toast.makeText(Home2.this, &quot;File content erased and deleted.&quot;, Toast.LENGTH_LONG).show();\r\n        } else {\r\n            // The file content is erased, but the file is not deleted\r\n            Toast.makeText(Home2.this, &quot;File content erased.&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n        Toast.makeText(Home2.this, &quot;Error erasing file content.&quot;, Toast.LENGTH_LONG).show();\r\n    }\r\n\r\nThis code first opens the file in write mode, erasing the contents of the file. You can then choose whether to delete the file after clearing the contents by setting the `deleteFileAfterErase` variable to true or false.\r\n\r\nIf you set `deleteFileAfterErase` to true, the contents of the file are deleted, and if you set it to false, only the contents are deleted and the empty file remains.","title":"Java code in Android Studio to delete a file or erase data in it","body":"<p>This code will open the file, erase its content, and then delete the file if needed:</p>\n<pre><code>import java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\n// ...\n\n// Define the file name\nString fileName = &quot;your_text_file.txt&quot;;\n\n// Get the file object\nFile file = new File(getFilesDir(), fileName);\n\ntry {\n    // Open the file for writing, this will erase its content\n    FileWriter writer = new FileWriter(file);\n\n    // Optionally, delete the file after erasing its content\n    boolean deleteFileAfterErase = true;\n\n    // If you want to delete the file, uncomment the next line\n    // deleteFileAfterErase = file.delete();\n\n    writer.close();\n\n    if (deleteFileAfterErase) {\n        // The file is deleted after erasing its content\n        Toast.makeText(Home2.this, &quot;File content erased and deleted.&quot;, Toast.LENGTH_LONG).show();\n    } else {\n        // The file content is erased, but the file is not deleted\n        Toast.makeText(Home2.this, &quot;File content erased.&quot;, Toast.LENGTH_LONG).show();\n    }\n} catch (IOException e) {\n    e.printStackTrace();\n    Toast.makeText(Home2.this, &quot;Error erasing file content.&quot;, Toast.LENGTH_LONG).show();\n}\n</code></pre>\n<p>This code first opens the file in write mode, erasing the contents of the file. You can then choose whether to delete the file after clearing the contents by setting the <code>deleteFileAfterErase</code> variable to true or false.</p>\n<p>If you set <code>deleteFileAfterErase</code> to true, the contents of the file are deleted, and if you set it to false, only the contents are deleted and the empty file remains.</p>\n"}],"owner":{"account_id":18767908,"reputation":11,"user_id":19696722,"display_name":"jeswin kannath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695362407,"creation_date":1695349469,"question_id":77154563,"body_markdown":"I tried different codes but none seem to work. The deletion is going into the same directory. It can detect the file. It also gives false positive as deleted but when the file is prompted to be opened the text in the files opens without any problem. Is it that the file is not deleted or is that the file is saved in the memory? It is OK if not deleting the file. I just want to delete the content inside it, it is a text file.\r\n\r\nThis is the code that I&#39;m currently using:\r\n```java\r\nFile dir = getFilesDir();\r\nFile file = new File(dir, n);\r\ndeleteFile(n);\r\n```\r\nI tried this code earlier to erase data, or modify it, but it&#39;s not working either:\r\n```java\r\nFileOutputStream fos = null;\r\ntry {\r\n    fos = openFileOutput(name1, MODE_PRIVATE);\r\n    fos.write(save.getBytes());\r\n    Toast.makeText(Home2.this,\r\n                   &quot;Saved to &quot; + getFilesDir() + &quot;/&quot; + name1,\r\n                   Toast.LENGTH_LONG)\r\n         .show();\r\n} catch (FileNotFoundException e) {\r\n    e.printStackTrace();\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n} finally {\r\n    if (fos != null) {\r\n        try {\r\n            fos.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nI wanted to completely erase all text in it and delete the file if possible.","title":"Java code in Android Studio to delete a file or erase data in it","body":"<p>I tried different codes but none seem to work. The deletion is going into the same directory. It can detect the file. It also gives false positive as deleted but when the file is prompted to be opened the text in the files opens without any problem. Is it that the file is not deleted or is that the file is saved in the memory? It is OK if not deleting the file. I just want to delete the content inside it, it is a text file.</p>\n<p>This is the code that I'm currently using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File dir = getFilesDir();\nFile file = new File(dir, n);\ndeleteFile(n);\n</code></pre>\n<p>I tried this code earlier to erase data, or modify it, but it's not working either:</p>\n<pre class=\"lang-java prettyprint-override\"><code>FileOutputStream fos = null;\ntry {\n    fos = openFileOutput(name1, MODE_PRIVATE);\n    fos.write(save.getBytes());\n    Toast.makeText(Home2.this,\n                   &quot;Saved to &quot; + getFilesDir() + &quot;/&quot; + name1,\n                   Toast.LENGTH_LONG)\n         .show();\n} catch (FileNotFoundException e) {\n    e.printStackTrace();\n} catch (IOException e) {\n    e.printStackTrace();\n} finally {\n    if (fos != null) {\n        try {\n            fos.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I wanted to completely erase all text in it and delete the file if possible.</p>\n"},{"tags":["java","unit-testing","kotlin","junit","junit5"],"answers":[{"comments":[{"owner":{"account_id":209504,"reputation":81,"user_id":460558,"display_name":"Michael McCallum"},"score":5,"creation_date":1596282030,"post_id":52074920,"comment_id":111765860,"body_markdown":"This is lovely but if you have mildly complicated tests then you have to pass the testinfo around the method changes which makes them unnecessarily complicated.\n\n```\n@Test\nvoid test(TestInfo info) {\n  complicatedValidation(info);\n}\n```","body":"This is lovely but if you have mildly complicated tests then you have to pass the testinfo around the method changes which makes them unnecessarily complicated.  ``` @Test void test(TestInfo info) {   complicatedValidation(info); } ```"},{"owner":{"account_id":16752149,"reputation":2993,"user_id":12109043,"display_name":"zr0gravity7"},"score":0,"creation_date":1644295958,"post_id":52074920,"comment_id":125562120,"body_markdown":"@MichaelMcCallum see my answer below.","body":"@MichaelMcCallum see my answer below."},{"owner":{"account_id":2402015,"reputation":1422,"user_id":2099489,"display_name":"Miguel Ortiz"},"score":0,"creation_date":1660920249,"post_id":52074920,"comment_id":129654916,"body_markdown":"Remember that testInfo.getDisplayName() will return spaces, special characters and even emoticons. This was designed for IDES specifically. For a programatically approach it would be necessary to add some regex or use a custom name with @Display in each test.","body":"Remember that testInfo.getDisplayName() will return spaces, special characters and even emoticons. This was designed for IDES specifically. For a programatically approach it would be necessary to add some regex or use a custom name with @Display in each test."}],"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":3,"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1695362332,"creation_date":1535537546,"answer_id":52074920,"question_id":52074872,"body_markdown":"Declare a parameter of type `TestInfo` in your test method and [JUnit will automatically supply an instance] of that for the method:\r\n\r\n```java\r\n@Test\r\nvoid getTestInfo(TestInfo testInfo) { // Automatically injected\r\n    System.out.println(testInfo.getDisplayName());\r\n    System.out.println(testInfo.getTestMethod());\r\n    System.out.println(testInfo.getTestClass());\r\n    System.out.println(testInfo.getTags());\r\n}\r\n```\r\n\r\nYou can get test method name (and more) from the `TestInfo` instance as shown above.\r\n\r\n[JUnit will automatically supply an instance]: https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\r\n","title":"What is the equivalent of TestName rule in JUnit 5?","body":"<p>Declare a parameter of type <code>TestInfo</code> in your test method and <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\" rel=\"nofollow noreferrer\">JUnit will automatically supply an instance</a> of that for the method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid getTestInfo(TestInfo testInfo) { // Automatically injected\n    System.out.println(testInfo.getDisplayName());\n    System.out.println(testInfo.getTestMethod());\n    System.out.println(testInfo.getTestClass());\n    System.out.println(testInfo.getTags());\n}\n</code></pre>\n<p>You can get test method name (and more) from the <code>TestInfo</code> instance as shown above.</p>\n"},{"comments":[{"owner":{"account_id":1373175,"reputation":3363,"user_id":1448512,"display_name":"Lorcan O&#39;Neill"},"score":0,"creation_date":1623314760,"post_id":62160598,"comment_id":120045744,"body_markdown":"This was much more useful for the situation I was facing where we had a base test class that each of our other tests extended - assigning the TestInfo variable to an instance method here meant we only had to add our fix in one place!","body":"This was much more useful for the situation I was facing where we had a base test class that each of our other tests extended - assigning the TestInfo variable to an instance method here meant we only had to add our fix in one place!"},{"owner":{"account_id":1309871,"reputation":2196,"user_id":1258091,"accept_rate":78,"display_name":"Kajzer"},"score":1,"creation_date":1677478414,"post_id":62160598,"comment_id":133338423,"body_markdown":"The seems to be the best and most clean solution I&#39;ve found on this matter.","body":"The seems to be the best and most clean solution I&#39;ve found on this matter."}],"tags":[],"owner":{"account_id":2573819,"reputation":15175,"user_id":2231972,"display_name":"Roman-Stop RU aggression in UA"},"comment_count":2,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1677478361,"creation_date":1591128667,"answer_id":62160598,"question_id":52074872,"body_markdown":"In addition to what is written about injecting `TestInfo` to test method it is also possible to inject `TestInfo` to methods annotated with `@BeforeEach` and `@AfterEach` which might be useful sometimes:\r\n\r\n```\r\n@BeforeEach\r\nvoid setUp(TestInfo testInfo) {\r\n  log.info(String.format(&quot;test started: %s&quot;, testInfo.getDisplayName()));\r\n}\r\n@AfterEach\r\nvoid tearDown(TestInfo testInfo) {\r\n  log.info(String.format(&quot;test finished: %s&quot;, testInfo.getDisplayName()));\r\n}\r\n```","title":"What is the equivalent of TestName rule in JUnit 5?","body":"<p>In addition to what is written about injecting <code>TestInfo</code> to test method it is also possible to inject <code>TestInfo</code> to methods annotated with <code>@BeforeEach</code> and <code>@AfterEach</code> which might be useful sometimes:</p>\n<pre><code>@BeforeEach\nvoid setUp(TestInfo testInfo) {\n  log.info(String.format(&quot;test started: %s&quot;, testInfo.getDisplayName()));\n}\n@AfterEach\nvoid tearDown(TestInfo testInfo) {\n  log.info(String.format(&quot;test finished: %s&quot;, testInfo.getDisplayName()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16752149,"reputation":2993,"user_id":12109043,"display_name":"zr0gravity7"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1644296679,"creation_date":1644295942,"answer_id":71028762,"question_id":52074872,"body_markdown":"An alternative for having the test name globally available as was possible in JUnit 4 is to shim the functionality yourself in a setup method using the [`TestInfo`][1] interface.\r\n\r\nFrom the [JUnit documentation on &quot;Dependency Injection for Constructors and Methods&quot;][2]:\r\n\r\n&gt; The `TestInfo` can then be used to retrieve information about the current container or test such as the display name, the test class, the test method, and associated tags. \r\n\r\nHere we leverage the fact that the built-in resolvers will supply an instance of `TestInfo` corresponding to the current container or test as the value for parameters of type `TestInfo` to methods annotated as lifecycle hooks (here we use `@BeforeEach`).\r\n\r\n```java\r\nimport org.junit.jupiter.api.TestInfo;\r\n\r\npublic class MyTestClass {\r\n  String displayName;\r\n\r\n  @BeforeEach\r\n  void setUp(TestInfo testInfo) {\r\n    displayName = testInfo.getDisplayName();\r\n    // ... the rest of your setup\r\n  }\r\n}\r\n```\r\n\r\nThis for example enables you to reference the current test name in other non-test methods (such as various utility methods) without having to include the test name as a parameter to each function call from the initial test method to that utility method.\r\n\r\nYou can do the same for other information about the current container or test.\r\n\r\nSeems like the only disadvantages are:\r\n- the instance variable cannot be made `final`, as it is set dynamically\r\n- may pollute your setup code\r\n\r\n--- \r\nFor reference, here is how the [TestName-Rule][3] might be implemented in JUnit 4:\r\n\r\n```\r\npublic class MyTestClass {\r\n  @Rule\r\n  public final TestName name = new TestName();\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestInfo.html\r\n  [2]: https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\r\n  [3]: https://github.com/junit-team/junit4/wiki/Rules#testname-rule","title":"What is the equivalent of TestName rule in JUnit 5?","body":"<p>An alternative for having the test name globally available as was possible in JUnit 4 is to shim the functionality yourself in a setup method using the <a href=\"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestInfo.html\" rel=\"noreferrer\"><code>TestInfo</code></a> interface.</p>\n<p>From the <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\" rel=\"noreferrer\">JUnit documentation on &quot;Dependency Injection for Constructors and Methods&quot;</a>:</p>\n<blockquote>\n<p>The <code>TestInfo</code> can then be used to retrieve information about the current container or test such as the display name, the test class, the test method, and associated tags.</p>\n</blockquote>\n<p>Here we leverage the fact that the built-in resolvers will supply an instance of <code>TestInfo</code> corresponding to the current container or test as the value for parameters of type <code>TestInfo</code> to methods annotated as lifecycle hooks (here we use <code>@BeforeEach</code>).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.TestInfo;\n\npublic class MyTestClass {\n  String displayName;\n\n  @BeforeEach\n  void setUp(TestInfo testInfo) {\n    displayName = testInfo.getDisplayName();\n    // ... the rest of your setup\n  }\n}\n</code></pre>\n<p>This for example enables you to reference the current test name in other non-test methods (such as various utility methods) without having to include the test name as a parameter to each function call from the initial test method to that utility method.</p>\n<p>You can do the same for other information about the current container or test.</p>\n<p>Seems like the only disadvantages are:</p>\n<ul>\n<li>the instance variable cannot be made <code>final</code>, as it is set dynamically</li>\n<li>may pollute your setup code</li>\n</ul>\n<hr />\n<p>For reference, here is how the <a href=\"https://github.com/junit-team/junit4/wiki/Rules#testname-rule\" rel=\"noreferrer\">TestName-Rule</a> might be implemented in JUnit 4:</p>\n<pre><code>public class MyTestClass {\n  @Rule\n  public final TestName name = new TestName();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":242262,"reputation":3530,"user_id":513660,"accept_rate":72,"display_name":"Will"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677870169,"creation_date":1677870169,"answer_id":75630935,"question_id":52074872,"body_markdown":"The answers here already cover what the OP asked, but for completeness sake, I am adding a link here to a [Baeldung article][1] which covers this topic for both JUnit 5 and JUnit 4, in case someone stumbles upon this question while looking for how to get the test name in JUnit 4.\r\n\r\nAs already mentioned, for JUnit 5 one can utilize the `TestInfo` class, injecting an instance of it as a parameter to either your test method or to a method annotated with the `@BeforeEach` annotation. For JUnit 4, one would use a `TestName` instance annotated with the `@Rule` annotation. The article linked here also touches on handling parameterized tests.\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/junit-get-name-of-currently-executing-test","title":"What is the equivalent of TestName rule in JUnit 5?","body":"<p>The answers here already cover what the OP asked, but for completeness sake, I am adding a link here to a <a href=\"https://www.baeldung.com/junit-get-name-of-currently-executing-test\" rel=\"nofollow noreferrer\">Baeldung article</a> which covers this topic for both JUnit 5 and JUnit 4, in case someone stumbles upon this question while looking for how to get the test name in JUnit 4.</p>\n<p>As already mentioned, for JUnit 5 one can utilize the <code>TestInfo</code> class, injecting an instance of it as a parameter to either your test method or to a method annotated with the <code>@BeforeEach</code> annotation. For JUnit 4, one would use a <code>TestName</code> instance annotated with the <code>@Rule</code> annotation. The article linked here also touches on handling parameterized tests.</p>\n"}],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11434,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":52074920,"answer_count":4,"score":39,"last_activity_date":1695362332,"creation_date":1535537397,"question_id":52074872,"body_markdown":"How can I get name of the test method in JUnit 5?","title":"What is the equivalent of TestName rule in JUnit 5?","body":"<p>How can I get name of the test method in JUnit 5?</p>\n"},{"tags":["java","android","kotlin","android-edittext","android-keypad"],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695362190,"creation_date":1695362190,"question_id":77155151,"body_markdown":"For the below code:\r\n\r\n        val MyKeyListener: View.OnKeyListener\r\n\r\n        MyKeyListener = object : View.OnKeyListener {\r\n\r\n            override fun onKey (v: View?, keyCode: Int, event: KeyEvent?): Boolean\r\n            {\r\n                if (event?.action == KeyEvent.ACTION_DOWN) {\r\n\r\n                     if (keyCode == KEYCODE_DPAD_UP) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;Up Arrow Pressed&quot;)\r\n                         MoveCursor (KEYCODE_DPAD_UP, textfeild.id, textfeild.text.length)\r\n\r\n                     } else if (keyCode == KEYCODE_DPAD_DOWN) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;Down Arrow Pressed&quot;)\r\n                         MoveCursor (KEYCODE_DPAD_DOWN, textfeild.id, textfeild.text.length)\r\n\r\n                     } else if (keyCode == KEYCODE_DPAD_UP_LEFT) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;Up + Left Arrow Pressed&quot;)\r\n\r\n                     } else if (keyCode == KEYCODE_DPAD_UP_RIGHT) {\r\n\r\n                         Log.d (&quot;Key&quot;, &quot;Up + Right Arrow Pressed&quot;)\r\n                     }\r\n\r\n                }\r\n                return false\r\n            }\r\n\r\n        }\r\n        textfeild.setOnKeyListener(MyKeyListener)\r\n\r\nI&#39;m able to get the log for &quot;Up Arrow Pressed&quot; and &quot;Down Arrow Pressed&quot; when I press the up/down arrow on my keyboard but I&#39;m not getting Logs for &quot;Up + Left Arrow Pressed&quot; and &quot;Up + Right Arrow Pressed&quot; when I pressing the left and up arrow together (or right and up arrow).\r\n\r\ncan someone please tell me why and how to record an up and left arrow being pressed together in android?","title":"How to detect key event KEYCODE_DPAD_UP_RIGHT and KEYCODE_DPAD_UP_LEFT in android","body":"<p>For the below code:</p>\n<pre><code>    val MyKeyListener: View.OnKeyListener\n\n    MyKeyListener = object : View.OnKeyListener {\n\n        override fun onKey (v: View?, keyCode: Int, event: KeyEvent?): Boolean\n        {\n            if (event?.action == KeyEvent.ACTION_DOWN) {\n\n                 if (keyCode == KEYCODE_DPAD_UP) {\n\n                     Log.d (&quot;Key&quot;, &quot;Up Arrow Pressed&quot;)\n                     MoveCursor (KEYCODE_DPAD_UP, textfeild.id, textfeild.text.length)\n\n                 } else if (keyCode == KEYCODE_DPAD_DOWN) {\n\n                     Log.d (&quot;Key&quot;, &quot;Down Arrow Pressed&quot;)\n                     MoveCursor (KEYCODE_DPAD_DOWN, textfeild.id, textfeild.text.length)\n\n                 } else if (keyCode == KEYCODE_DPAD_UP_LEFT) {\n\n                     Log.d (&quot;Key&quot;, &quot;Up + Left Arrow Pressed&quot;)\n\n                 } else if (keyCode == KEYCODE_DPAD_UP_RIGHT) {\n\n                     Log.d (&quot;Key&quot;, &quot;Up + Right Arrow Pressed&quot;)\n                 }\n\n            }\n            return false\n        }\n\n    }\n    textfeild.setOnKeyListener(MyKeyListener)\n</code></pre>\n<p>I'm able to get the log for &quot;Up Arrow Pressed&quot; and &quot;Down Arrow Pressed&quot; when I press the up/down arrow on my keyboard but I'm not getting Logs for &quot;Up + Left Arrow Pressed&quot; and &quot;Up + Right Arrow Pressed&quot; when I pressing the left and up arrow together (or right and up arrow).</p>\n<p>can someone please tell me why and how to record an up and left arrow being pressed together in android?</p>\n"},{"tags":["java","rest","post","quarkus"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1657104293,"post_id":72881943,"comment_id":128728593,"body_markdown":"https://quarkus.io/guides/resteasy-reactive#accessing-the-request-body; you need to aggregate your `input-n` parameters in a single object and let Quarkus mapping it using JSON mapper","body":"<a href=\"https://quarkus.io/guides/resteasy-reactive#accessing-the-request-body\" rel=\"nofollow noreferrer\">quarkus.io/guides/resteasy-reactive#accessing-the-request-bo&zwnj;&#8203;dy</a>; you need to aggregate your <code>input-n</code> parameters in a single object and let Quarkus mapping it using JSON mapper"},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1657111341,"post_id":72881943,"comment_id":128731226,"body_markdown":"Where exactly are the parameters coming from? HTTP Body, Headers, something else?","body":"Where exactly are the parameters coming from? HTTP Body, Headers, something else?"},{"owner":{"account_id":10278040,"reputation":2879,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"score":0,"creation_date":1657112454,"post_id":72881943,"comment_id":128731758,"body_markdown":"@geoand Thanks a lot for the response. It is like I need to pass multiple parameters to my Quarkus service which will internally call the Java method by passing these parameters.  I have added an simple example code. Please see in the question.","body":"@geoand Thanks a lot for the response. It is like I need to pass multiple parameters to my Quarkus service which will internally call the Java method by passing these parameters.  I have added an simple example code. Please see in the question."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1657114033,"post_id":72881943,"comment_id":128732487,"body_markdown":"I see the sample code, but it&#39;s not obvious where you expect `input1`, `input2` etc to be coming from.","body":"I see the sample code, but it&#39;s not obvious where you expect <code>input1</code>, <code>input2</code> etc to be coming from."},{"owner":{"account_id":10278040,"reputation":2879,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"score":0,"creation_date":1657117924,"post_id":72881943,"comment_id":128734299,"body_markdown":"@geoand It is user-provided meaning that users can either provide it in Quarkus Swagger-UI or using Postman or using the CURL command etc. Basically, users will provide different information.","body":"@geoand It is user-provided meaning that users can either provide it in Quarkus Swagger-UI or using Postman or using the CURL command etc. Basically, users will provide different information."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1657277247,"post_id":72881943,"comment_id":128778018,"body_markdown":"Sure, but where does it come from? Query parameters, headers, request body?","body":"Sure, but where does it come from? Query parameters, headers, request body?"},{"owner":{"account_id":3628785,"reputation":123,"user_id":3025610,"display_name":"stanly"},"score":0,"creation_date":1671113939,"post_id":72881943,"comment_id":132031896,"body_markdown":"I have the same issue when using `QueryParams`","body":"I have the same issue when using <code>QueryParams</code>"}],"answers":[{"tags":[],"owner":{"account_id":200258,"reputation":653,"user_id":446011,"display_name":"gschaden"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672420364,"creation_date":1672420364,"answer_id":74964103,"question_id":72881943,"body_markdown":"Maybe a MessageBodyReader is what you are looking for.\r\n\r\nYou define a single Class for your input\r\n\r\n``` java\r\npublic class MyInput {\r\n    public List&lt;String&gt; lines;\r\n}\r\n```\r\nand a api method\r\n\r\n    @Path(&quot;/example&quot;)\r\n    @POST\r\n    @Consumes({MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN})\r\n    public String generate(@HeaderParam(&quot;Content-Type&quot;) String contentType, MyInput input){\r\n        return String.join(&quot;,&quot;, input.lines);\r\n    }\r\n\r\nand a message reader, which can convert text/plain to MyInput. In this case we just read all the lines from input.\r\n\r\n    @Provider\r\n    @Consumes(MediaType.TEXT_PLAIN)\r\n    public class MyInputReaderFromText implements MessageBodyReader {\r\n        @Override\r\n        public boolean isReadable(Class aClass, Type type, Annotation[] annotations, MediaType mediaType) {\r\n            return aClass.equals(MyInput.class);\r\n        }\r\n        @Override\r\n        public Object readFrom(Class aClass, Type type, Annotation[] annotations, MediaType mediaType, MultivaluedMap multivaluedMap, InputStream inputStream) throws IOException, WebApplicationException {\r\n            MyInput result = null;\r\n            try(BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {\r\n                result = new MyInput();\r\n                result.lines = new LinkedList();\r\n                while (reader.ready()){\r\n                    result.lines.add(reader.readLine());\r\n                }\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(&quot;cannot parse input&quot;);\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\nNow you can post a plain text with lines \r\n```\r\nline1\r\nline2\r\n```\r\nor json like\r\n``` lang-js\r\n{\r\n &quot;lines&quot;: [&quot;line1&quot;, &quot;line2&quot;]\r\n}\r\n```\r\n","title":"Is there a way to pass multiple parameters to Quarkus resource with POST request?","body":"<p>Maybe a MessageBodyReader is what you are looking for.</p>\n<p>You define a single Class for your input</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyInput {\n    public List&lt;String&gt; lines;\n}\n</code></pre>\n<p>and a api method</p>\n<pre><code>@Path(&quot;/example&quot;)\n@POST\n@Consumes({MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN})\npublic String generate(@HeaderParam(&quot;Content-Type&quot;) String contentType, MyInput input){\n    return String.join(&quot;,&quot;, input.lines);\n}\n</code></pre>\n<p>and a message reader, which can convert text/plain to MyInput. In this case we just read all the lines from input.</p>\n<pre><code>@Provider\n@Consumes(MediaType.TEXT_PLAIN)\npublic class MyInputReaderFromText implements MessageBodyReader {\n    @Override\n    public boolean isReadable(Class aClass, Type type, Annotation[] annotations, MediaType mediaType) {\n        return aClass.equals(MyInput.class);\n    }\n    @Override\n    public Object readFrom(Class aClass, Type type, Annotation[] annotations, MediaType mediaType, MultivaluedMap multivaluedMap, InputStream inputStream) throws IOException, WebApplicationException {\n        MyInput result = null;\n        try(BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {\n            result = new MyInput();\n            result.lines = new LinkedList();\n            while (reader.ready()){\n                result.lines.add(reader.readLine());\n            }\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;cannot parse input&quot;);\n        }\n        return result;\n    }\n}\n</code></pre>\n<p>Now you can post a plain text with lines</p>\n<pre><code>line1\nline2\n</code></pre>\n<p>or json like</p>\n<pre class=\"lang-js prettyprint-override\"><code>{\n &quot;lines&quot;: [&quot;line1&quot;, &quot;line2&quot;]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29491235,"reputation":13,"user_id":22600216,"display_name":"Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695362109,"creation_date":1695362109,"answer_id":77155148,"question_id":72881943,"body_markdown":"Here you have a good How-To. \r\nThis is for resteasy-reactive, but you should be able to use it for your needs.\r\n\r\n\r\nxy-url.com/api/v1/foo?var1=111111111&amp;var2=222222&amp;var3=3333333\r\n\r\n    @GET\r\n@Path(&quot;/api/v1/foo&quot;)\r\n@Produces(MediaType.xxxxxx)\r\npublic void yourParameters(@QueryParam(&quot;code&quot;) String var1, @QueryParam(&quot;var2&quot;) String var2,@QueryParam(&quot;var3&quot;) String var3);\r\n\r\n-----------------------------------\r\n \r\nhttps://quarkus.io/guides/resteasy-reactive\r\n\r\n\r\n    @POST\r\n        public String allParams(@RestPath String type,\r\n                                @RestMatrix String variant,\r\n                                @RestQuery String age,\r\n                                @RestCookie String level,\r\n                                @RestHeader(&quot;X-Cheese-Secret-Handshake&quot;)\r\n                                String secretHandshake,\r\n                                @RestForm String smell) {\r\n            return type + &quot;/&quot; + variant + &quot;/&quot; + age + &quot;/&quot; + level + &quot;/&quot;\r\n                + secretHandshake + &quot;/&quot; + smell;\r\n\r\n\r\n-------------\r\n\r\n    @Path(&quot;/cheeses/{type}&quot;)\r\npublic class Endpoint {\r\n\r\n    public static class Parameters {\r\n        @RestPath\r\n        String type;\r\n\r\n        @RestMatrix\r\n        String variant;\r\n\r\n        @RestQuery\r\n        String age;\r\n\r\n        @RestCookie\r\n        String level;\r\n\r\n        @RestHeader(&quot;X-Cheese-Secret-Handshake&quot;)\r\n        String secretHandshake;\r\n\r\n        @RestForm\r\n        String smell;\r\n    }\r\n\r\n    @POST\r\n    public String allParams(@BeanParam Parameters parameters) { \r\n        return parameters.type + &quot;/&quot; + parameters.variant + &quot;/&quot; + parameters.age\r\n            + &quot;/&quot; + parameters.level + &quot;/&quot; + parameters.secretHandshake\r\n            + &quot;/&quot; + parameters.smell;\r\n    }\r\n\r\n\r\nGreetings.","title":"Is there a way to pass multiple parameters to Quarkus resource with POST request?","body":"<p>Here you have a good How-To.\nThis is for resteasy-reactive, but you should be able to use it for your needs.</p>\n<p>xy-url.com/api/v1/foo?var1=111111111&amp;var2=222222&amp;var3=3333333</p>\n<pre><code>@GET\n</code></pre>\n<p>@Path(&quot;/api/v1/foo&quot;)\n@Produces(MediaType.xxxxxx)\npublic void yourParameters(@QueryParam(&quot;code&quot;) String var1, @QueryParam(&quot;var2&quot;) String var2,@QueryParam(&quot;var3&quot;) String var3);</p>\n<hr />\n<p><a href=\"https://quarkus.io/guides/resteasy-reactive\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/resteasy-reactive</a></p>\n<pre><code>@POST\n    public String allParams(@RestPath String type,\n                            @RestMatrix String variant,\n                            @RestQuery String age,\n                            @RestCookie String level,\n                            @RestHeader(&quot;X-Cheese-Secret-Handshake&quot;)\n                            String secretHandshake,\n                            @RestForm String smell) {\n        return type + &quot;/&quot; + variant + &quot;/&quot; + age + &quot;/&quot; + level + &quot;/&quot;\n            + secretHandshake + &quot;/&quot; + smell;\n</code></pre>\n<hr />\n<pre><code>@Path(&quot;/cheeses/{type}&quot;)\n</code></pre>\n<p>public class Endpoint {</p>\n<pre><code>public static class Parameters {\n    @RestPath\n    String type;\n\n    @RestMatrix\n    String variant;\n\n    @RestQuery\n    String age;\n\n    @RestCookie\n    String level;\n\n    @RestHeader(&quot;X-Cheese-Secret-Handshake&quot;)\n    String secretHandshake;\n\n    @RestForm\n    String smell;\n}\n\n@POST\npublic String allParams(@BeanParam Parameters parameters) { \n    return parameters.type + &quot;/&quot; + parameters.variant + &quot;/&quot; + parameters.age\n        + &quot;/&quot; + parameters.level + &quot;/&quot; + parameters.secretHandshake\n        + &quot;/&quot; + parameters.smell;\n}\n</code></pre>\n<p>Greetings.</p>\n"}],"owner":{"account_id":10278040,"reputation":2879,"user_id":7584240,"accept_rate":17,"display_name":"BATMAN_2008"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695362109,"creation_date":1657103419,"question_id":72881943,"body_markdown":"I am developing an application using Quarkus which is based on the Java. I have a requirement where I would like to pass multiple parameters to my `Quarkus` based REST API. As of now everything works well when I pass a single parameter but when I increase the parameter then I get the error:\r\n```\r\nquarkus java.io.IOException can only have a single body parameter:\r\n```\r\n\r\nCan someone please let me know how can I pass multiple parameters to my quarkus application?\r\n\r\nFollowing is the example code I have:\r\n```\r\n@Path(&quot;/api&quot;)\r\npublic class ExampleResource {\r\n\r\n    @Path(&quot;/example&quot;)\r\n    @POST\r\n    @Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public String generate(@HeaderParam(&quot;Content-Type&quot;) String contentType, final String input1, final String input2, final String input3){\r\n        System.out.println(&quot;Parameter 1 : &quot; + contentType);\r\n        System.out.println(&quot;Parameter 2 : &quot; + input1);\r\n        System.out.println(&quot;Parameter 3 : &quot; + input2);\r\n        System.out.println(&quot;Parameter 4 : &quot; + input3);\r\n\r\n        final MyClass myObj = new MyClass();\r\n        return contentType.equals(&quot;application/xml&quot;) ? myObj.xmlMethod(input1, input2, input3) : myObj.jsonMethod(input1, input2, input3);\r\n    }\r\n}\r\n```","title":"Is there a way to pass multiple parameters to Quarkus resource with POST request?","body":"<p>I am developing an application using Quarkus which is based on the Java. I have a requirement where I would like to pass multiple parameters to my <code>Quarkus</code> based REST API. As of now everything works well when I pass a single parameter but when I increase the parameter then I get the error:</p>\n<pre><code>quarkus java.io.IOException can only have a single body parameter:\n</code></pre>\n<p>Can someone please let me know how can I pass multiple parameters to my quarkus application?</p>\n<p>Following is the example code I have:</p>\n<pre><code>@Path(&quot;/api&quot;)\npublic class ExampleResource {\n\n    @Path(&quot;/example&quot;)\n    @POST\n    @Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n    @Produces(MediaType.APPLICATION_JSON)\n    public String generate(@HeaderParam(&quot;Content-Type&quot;) String contentType, final String input1, final String input2, final String input3){\n        System.out.println(&quot;Parameter 1 : &quot; + contentType);\n        System.out.println(&quot;Parameter 2 : &quot; + input1);\n        System.out.println(&quot;Parameter 3 : &quot; + input2);\n        System.out.println(&quot;Parameter 4 : &quot; + input3);\n\n        final MyClass myObj = new MyClass();\n        return contentType.equals(&quot;application/xml&quot;) ? myObj.xmlMethod(input1, input2, input3) : myObj.jsonMethod(input1, input2, input3);\n    }\n}\n</code></pre>\n"},{"tags":["java","java-time","archunit"],"answers":[{"comments":[{"owner":{"account_id":19049159,"reputation":121,"user_id":13907719,"display_name":"Codinggeek"},"score":0,"creation_date":1695189123,"post_id":77129517,"comment_id":135988925,"body_markdown":"Given Solution is not checking the Violation inside a Method (as I mentioned in question). It is only checking violation on the class level Variables. \nI want to restrict the usage inside a method of a class","body":"Given Solution is not checking the Violation inside a Method (as I mentioned in question). It is only checking violation on the class level Variables.  I want to restrict the usage inside a method of a class"},{"owner":{"account_id":18069010,"reputation":2524,"user_id":13134095,"display_name":"Manfred"},"score":0,"creation_date":1695200517,"post_id":77129517,"comment_id":135991049,"body_markdown":"Have you tried it? &#128521; It should work in the way you want it to.","body":"Have you tried it? 😉 It should work in the way you want it to."},{"owner":{"account_id":19049159,"reputation":121,"user_id":13907719,"display_name":"Codinggeek"},"score":0,"creation_date":1695279144,"post_id":77129517,"comment_id":136003669,"body_markdown":"Yes, I tried it but it didn&#39;t work as expected .\nit is working for the class level variables i.e \n\nClass Demo {\nDate dt = new Date(); // it is marked as violation by ArchUnit\n\nvoid doSomething(){\nInstant it = Instant.ow(); // it is not marked as violation by test case\n}\n\n}","body":"Yes, I tried it but it didn&#39;t work as expected . it is working for the class level variables i.e   Class Demo { Date dt = new Date(); // it is marked as violation by ArchUnit  void doSomething(){ Instant it = Instant.ow(); // it is not marked as violation by test case }  }"},{"owner":{"account_id":18069010,"reputation":2524,"user_id":13134095,"display_name":"Manfred"},"score":0,"creation_date":1695362019,"post_id":77129517,"comment_id":136016700,"body_markdown":"I&#39;ve added the failure you should get to my answer.","body":"I&#39;ve added the failure you should get to my answer."}],"tags":[],"owner":{"account_id":18069010,"reputation":2524,"user_id":13134095,"display_name":"Manfred"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695362001,"creation_date":1695060740,"answer_id":77129517,"question_id":77127672,"body_markdown":"The following simple `ArchRule` unconditionally forbids calling these methods:\r\n\r\n```java\r\n    @ArchTest\r\n    ArchRule no_direct_date_or_instant_instantiation =\r\n        com.tngtech.archunit.lang.syntax.ArchRuleDefinition\r\n            .noClasses()\r\n            .should().callConstructor(Date.class)\r\n            .orShould().callMethod(Instant.class, &quot;now&quot;);\r\n```\r\n\r\nFor your `Demo` class, this gives:\r\n&gt; `java.lang.AssertionError`: Architecture Violation [Priority: MEDIUM] - Rule &#39;no classes should call constructor Date.&lt;init&gt;() or should call method Instant.now()&#39; was violated (2 times):  \r\nMethod &lt;`Demo.methodOne()`&gt; calls constructor &lt;`java.util.Date.&lt;init&gt;()`&gt; in (SO77127672.java:29)  \r\nMethod &lt;`Demo.methodTwo()`&gt; calls method &lt;`java.time.Instant.now()`&gt; in (SO77127672.java:34)\r\n","title":"How to enforce a restriction of using Instant.now() or new Date() in any Java Test Methods?","body":"<p>The following simple <code>ArchRule</code> unconditionally forbids calling these methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @ArchTest\n    ArchRule no_direct_date_or_instant_instantiation =\n        com.tngtech.archunit.lang.syntax.ArchRuleDefinition\n            .noClasses()\n            .should().callConstructor(Date.class)\n            .orShould().callMethod(Instant.class, &quot;now&quot;);\n</code></pre>\n<p>For your <code>Demo</code> class, this gives:</p>\n<blockquote>\n<p><code>java.lang.AssertionError</code>: Architecture Violation [Priority: MEDIUM] - Rule 'no classes should call constructor Date.() or should call method Instant.now()' was violated (2 times):<br />\nMethod &lt;<code>Demo.methodOne()</code>&gt; calls constructor &lt;<code>java.util.Date.&lt;init&gt;()</code>&gt; in (SO77127672.java:29)<br />\nMethod &lt;<code>Demo.methodTwo()</code>&gt; calls method &lt;<code>java.time.Instant.now()</code>&gt; in (SO77127672.java:34)</p>\n</blockquote>\n"}],"owner":{"account_id":19049159,"reputation":121,"user_id":13907719,"display_name":"Codinggeek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695362001,"creation_date":1695043874,"question_id":77127672,"body_markdown":"Want to enforce a restriction of using Instant.now() or new Date() in any Java Method.\r\nBelow is the sample class\r\n\r\n```java\r\nclass Demo {\r\n\r\n    void methodOne() {\r\n        Date date = new Date();\r\n        // ...\r\n    }\r\n\r\n    void methodTwo() {\r\n        Instant instant = Instant.now();\r\n        // ...\r\n    }\r\n}\r\n\r\n```","title":"How to enforce a restriction of using Instant.now() or new Date() in any Java Test Methods?","body":"<p>Want to enforce a restriction of using Instant.now() or new Date() in any Java Method.\nBelow is the sample class</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Demo {\n\n    void methodOne() {\n        Date date = new Date();\n        // ...\n    }\n\n    void methodTwo() {\n        Instant instant = Instant.now();\n        // ...\n    }\n}\n\n</code></pre>\n"},{"tags":["java","oracle","hibernate","spring-data-jpa","timezone"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1678086471,"post_id":75645452,"comment_id":133458155,"body_markdown":"Can Oracle store a time that didn&#39;t exist in your time zone? Just asking to be sure.","body":"Can Oracle store a time that didn&#39;t exist in your time zone? Just asking to be sure."},{"owner":{"account_id":5773,"reputation":3320,"user_id":9458,"accept_rate":67,"display_name":"F&#225;bio"},"score":1,"creation_date":1678100548,"post_id":75645452,"comment_id":133461790,"body_markdown":"Yes, if I do an INSERT using SQL Developer it ignores the daylight savings time.","body":"Yes, if I do an INSERT using SQL Developer it ignores the daylight savings time."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678115319,"creation_date":1678115319,"answer_id":75652492,"question_id":75645452,"body_markdown":"Hibernate usually converts the `LocalDate`, `LocalDateTime` etc. types to `java.sql.Date`, `java.sql.Timestamp` etc. when binding to JDBC. The reason for that is, that not all JDBC drivers support the java.time types.\r\n\r\nI don&#39;t think that Hibernate does any time zone translation for `LocalDate`, so if the `java.sql.Date` object that is passed to the JDBC driver ends up with a timezone shift in your database, this means that the JDBC driver is doing some conversion. Consult the Oracle documentation about this. ","title":"Hibernate LocalDate conversion","body":"<p>Hibernate usually converts the <code>LocalDate</code>, <code>LocalDateTime</code> etc. types to <code>java.sql.Date</code>, <code>java.sql.Timestamp</code> etc. when binding to JDBC. The reason for that is, that not all JDBC drivers support the java.time types.</p>\n<p>I don't think that Hibernate does any time zone translation for <code>LocalDate</code>, so if the <code>java.sql.Date</code> object that is passed to the JDBC driver ends up with a timezone shift in your database, this means that the JDBC driver is doing some conversion. Consult the Oracle documentation about this.</p>\n"},{"tags":[],"owner":{"account_id":5773,"reputation":3320,"user_id":9458,"accept_rate":67,"display_name":"F&#225;bio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695361701,"creation_date":1678467439,"answer_id":75698972,"question_id":75645452,"body_markdown":"Even though JPA 2.2 doesn&#39;t support *ZonedDateTime*, Hibernate does. I ended changing the properties to ZonedDateTime and added `spring.jpa.properties.hibernate.jdbc.time_zone=UTC`.\r\n\r\nThis was the only way I found to force Hibernate to behave in the way I expected.\r\n\r\nInternally, Hibernate uses TimeStamp to handle OffsetDateTime and Date to handle LocalDate. No matter what I tried, it always uses the default timezone to make the conversion before sending the data to the database.\r\n\r\nI also tried setting `spring.datasource.hikari.data-source-properties.oracle.jdbc.timezoneAsRegion` but it made no difference.\r\n\r\nWorking with Hibernate is quite frustrating, this is not the first time I have to handle some buggy behavior because they re-implemented poorly something already offered by the JDBC driver.\r\n\r\nI didn&#39;t had the chance to try Hibernate 6, maybe I&#39;ll update this answer in the future.\r\n\r\n## Update for Hibernate 6.2 ##\r\nWell, it got even worse: LocalDate is still converted using the default timezone, no matter what I tried.\r\n\r\nIn addition to the previous property, now I also had to add `spring.jpa.properties.hibernate.timezone.default_storage=NORMALIZE`.\r\n\r\nDespite what the documentation says, after I tried to use `NORMALIZE_UTC`, Oracle started throwing `ORA-01878` errors.","title":"Hibernate LocalDate conversion","body":"<p>Even though JPA 2.2 doesn't support <em>ZonedDateTime</em>, Hibernate does. I ended changing the properties to ZonedDateTime and added <code>spring.jpa.properties.hibernate.jdbc.time_zone=UTC</code>.</p>\n<p>This was the only way I found to force Hibernate to behave in the way I expected.</p>\n<p>Internally, Hibernate uses TimeStamp to handle OffsetDateTime and Date to handle LocalDate. No matter what I tried, it always uses the default timezone to make the conversion before sending the data to the database.</p>\n<p>I also tried setting <code>spring.datasource.hikari.data-source-properties.oracle.jdbc.timezoneAsRegion</code> but it made no difference.</p>\n<p>Working with Hibernate is quite frustrating, this is not the first time I have to handle some buggy behavior because they re-implemented poorly something already offered by the JDBC driver.</p>\n<p>I didn't had the chance to try Hibernate 6, maybe I'll update this answer in the future.</p>\n<h2>Update for Hibernate 6.2</h2>\n<p>Well, it got even worse: LocalDate is still converted using the default timezone, no matter what I tried.</p>\n<p>In addition to the previous property, now I also had to add <code>spring.jpa.properties.hibernate.timezone.default_storage=NORMALIZE</code>.</p>\n<p>Despite what the documentation says, after I tried to use <code>NORMALIZE_UTC</code>, Oracle started throwing <code>ORA-01878</code> errors.</p>\n"}],"owner":{"account_id":5773,"reputation":3320,"user_id":9458,"accept_rate":67,"display_name":"F&#225;bio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":892,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75698972,"answer_count":2,"score":0,"last_activity_date":1695361701,"creation_date":1678051610,"question_id":75645452,"body_markdown":"Both my application and the database are on *America/Sao_Paulo* timezone.\r\n\r\nThe database is Oracle 19c and the application is using:\r\n\r\n* Spring 2.7.8\r\n* Hibernate 5.6.15.Final\r\n* Java 11\r\n\r\nMy problem is saving LocalDate or LocalDateTime to Oracle using JPA entities.\r\n\r\nThe table columns are all using the *DATE* type and the problem happens if I map them to *LocalDate* or *LocalDateTime* properties. The problem only happens on days where Daylight Time Savings starts.\r\n\r\nLet&#39;s say I have 2 properties:\r\n\r\n    @Column(name = &quot;holiday1&quot;)\r\n    private LocalDate holiday1;\r\n    \r\n    @Column(name = &quot;holiday2&quot;)\r\n    private LocalDateTime holiday2;\r\n    ...\r\n    entity.setHoliday1(LocalDate.of(2004, 11, 2));\r\n    entity.setHoliday2(LocalDateTime.of(2004, 11, 2, 0, 0, 0));\r\n\r\nIn this example, 2004-11-02 was the start of DTS in Brazil, on this day there was no midnight, so Hibernate is changing the 00:00 time part to 01:00 whenever it does the INSERT command and I end up with 2004-11-02 01:00:00 on the database.\r\n\r\nI tried adding the property _spring.jpa.properties.hibernate.jdbc.time_zone=UTC_ and it made no difference.\r\n\r\nIf I change the properties&#39; type to *OffsetDateTime* and do:\r\n\r\n    entity.setHoliday1(LocalDateTime.of(2004, 11, 2, 0, 0, 0).atOffset(ZoneOffset.UTC));\r\n\r\nI end up with 2004-11-02 21:00:00 on the database. However if use both _spring.jpa.properties.hibernate.jdbc.time_zone=UTC_ and _OffsetDateTime_ Hibernate finally inserts 2004-11-02 00:00 on the database.\r\n\r\nIs there a way to make Hibernate ignore the local timezone settings and treat LocalDate correctly? I can&#39;t globally set the application timezone to UTC or change a huge amount of legacy code to _OffsetDateTime_.","title":"Hibernate LocalDate conversion","body":"<p>Both my application and the database are on <em>America/Sao_Paulo</em> timezone.</p>\n<p>The database is Oracle 19c and the application is using:</p>\n<ul>\n<li>Spring 2.7.8</li>\n<li>Hibernate 5.6.15.Final</li>\n<li>Java 11</li>\n</ul>\n<p>My problem is saving LocalDate or LocalDateTime to Oracle using JPA entities.</p>\n<p>The table columns are all using the <em>DATE</em> type and the problem happens if I map them to <em>LocalDate</em> or <em>LocalDateTime</em> properties. The problem only happens on days where Daylight Time Savings starts.</p>\n<p>Let's say I have 2 properties:</p>\n<pre><code>@Column(name = &quot;holiday1&quot;)\nprivate LocalDate holiday1;\n\n@Column(name = &quot;holiday2&quot;)\nprivate LocalDateTime holiday2;\n...\nentity.setHoliday1(LocalDate.of(2004, 11, 2));\nentity.setHoliday2(LocalDateTime.of(2004, 11, 2, 0, 0, 0));\n</code></pre>\n<p>In this example, 2004-11-02 was the start of DTS in Brazil, on this day there was no midnight, so Hibernate is changing the 00:00 time part to 01:00 whenever it does the INSERT command and I end up with 2004-11-02 01:00:00 on the database.</p>\n<p>I tried adding the property <em>spring.jpa.properties.hibernate.jdbc.time_zone=UTC</em> and it made no difference.</p>\n<p>If I change the properties' type to <em>OffsetDateTime</em> and do:</p>\n<pre><code>entity.setHoliday1(LocalDateTime.of(2004, 11, 2, 0, 0, 0).atOffset(ZoneOffset.UTC));\n</code></pre>\n<p>I end up with 2004-11-02 21:00:00 on the database. However if use both <em>spring.jpa.properties.hibernate.jdbc.time_zone=UTC</em> and <em>OffsetDateTime</em> Hibernate finally inserts 2004-11-02 00:00 on the database.</p>\n<p>Is there a way to make Hibernate ignore the local timezone settings and treat LocalDate correctly? I can't globally set the application timezone to UTC or change a huge amount of legacy code to <em>OffsetDateTime</em>.</p>\n"},{"tags":["java","websphere","sslsocketfactory","linkageerror"],"owner":{"account_id":29499247,"reputation":1,"user_id":22606634,"display_name":"Gaurav Nayak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695361569,"creation_date":1695291286,"question_id":77149300,"body_markdown":"Caused by: org.apache.kafka.common.KafkaException: java.lang.LinkageError: loading constraint violation when resolving method &quot;javax/net/ssl/SSLContext.getSocketFactory()Ljavax/net/ssl/SSLSocketFactory;&quot; : loader &quot;com/ibm/ws/classloader/CompoundClassLoader@31bff837&quot; of class &quot;org/apache/kafka/common/security/oauthbearer/secured/JaasOptionsUtils&quot; and loader &quot;com/ibm/oti/vm/BootstrapClassLoader@b46c41f7&quot; of class &quot;javax/net/ssl/SSLContext&quot; have different types for the method signature\r\n\tat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:184)\r\n\tat org.apache.kafka.common.network.ChannelBuilders.create(ChannelBuilders.java:192)\r\n\tat org.apache.kafka.common.network.ChannelBuilders.clientChannelBuilder(ChannelBuilders.java:81)\r\n\tat org.apache.kafka.clients.ClientUtils.createChannelBuilder(ClientUtils.java:105)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.newSender(KafkaProducer.java:484)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:428)\r\n\t... 19 more\r\nCaused by: java.lang.LinkageError: loading constraint violation when resolving method &quot;javax/net/ssl/SSLContext.getSocketFactory()Ljavax/net/ssl/SSLSocketFactory;&quot; : loader &quot;com/ibm/ws/classloader/CompoundClassLoader@31bff837&quot; of class &quot;org/apache/kafka/common/security/oauthbearer/secured/JaasOptionsUtils&quot; and loader &quot;com/ibm/oti/vm/BootstrapClassLoader@b46c41f7&quot; of class &quot;javax/net/ssl/SSLContext&quot; have different types for the method signature\r\n\tat org.apache.kafka.common.security.oauthbearer.secured.JaasOptionsUtils.createSSLSocketFactory(JaasOptionsUtils.java:77)\r\n\tat org.apache.kafka.common.security.oauthbearer.secured.AccessTokenRetrieverFactory.create(AccessTokenRetrieverFactory.java:69)\r\n\tat org.apache.kafka.common.security.oauthbearer.secured.OAuthBearerLoginCallbackHandler.configure(OAuthBearerLoginCallbackHandler.java:186)\r\n\tat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:151)\r\n\t... 24 more\r\n\r\nThis error comes up after adding the dependency, \r\n\r\n\r\n```\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nThe application is using java 8 and deployed on websphere server.\r\nTheapplication is also having httpclient dependency as well\r\nDoes anybody knows what should I do? Or what I am doing wrong?\r\n\r\nMany thanks in advance.","title":"java.lang.LinkageError:when resolving method &quot;javax.net.ssl.SSLContext.getSocketFactory()","body":"<p>Caused by: org.apache.kafka.common.KafkaException: java.lang.LinkageError: loading constraint violation when resolving method &quot;javax/net/ssl/SSLContext.getSocketFactory()Ljavax/net/ssl/SSLSocketFactory;&quot; : loader &quot;com/ibm/ws/classloader/CompoundClassLoader@31bff837&quot; of class &quot;org/apache/kafka/common/security/oauthbearer/secured/JaasOptionsUtils&quot; and loader &quot;com/ibm/oti/vm/BootstrapClassLoader@b46c41f7&quot; of class &quot;javax/net/ssl/SSLContext&quot; have different types for the method signature\nat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:184)\nat org.apache.kafka.common.network.ChannelBuilders.create(ChannelBuilders.java:192)\nat org.apache.kafka.common.network.ChannelBuilders.clientChannelBuilder(ChannelBuilders.java:81)\nat org.apache.kafka.clients.ClientUtils.createChannelBuilder(ClientUtils.java:105)\nat org.apache.kafka.clients.producer.KafkaProducer.newSender(KafkaProducer.java:484)\nat org.apache.kafka.clients.producer.KafkaProducer.(KafkaProducer.java:428)\n... 19 more\nCaused by: java.lang.LinkageError: loading constraint violation when resolving method &quot;javax/net/ssl/SSLContext.getSocketFactory()Ljavax/net/ssl/SSLSocketFactory;&quot; : loader &quot;com/ibm/ws/classloader/CompoundClassLoader@31bff837&quot; of class &quot;org/apache/kafka/common/security/oauthbearer/secured/JaasOptionsUtils&quot; and loader &quot;com/ibm/oti/vm/BootstrapClassLoader@b46c41f7&quot; of class &quot;javax/net/ssl/SSLContext&quot; have different types for the method signature\nat org.apache.kafka.common.security.oauthbearer.secured.JaasOptionsUtils.createSSLSocketFactory(JaasOptionsUtils.java:77)\nat org.apache.kafka.common.security.oauthbearer.secured.AccessTokenRetrieverFactory.create(AccessTokenRetrieverFactory.java:69)\nat org.apache.kafka.common.security.oauthbearer.secured.OAuthBearerLoginCallbackHandler.configure(OAuthBearerLoginCallbackHandler.java:186)\nat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:151)\n... 24 more</p>\n<p>This error comes up after adding the dependency,</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;3.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The application is using java 8 and deployed on websphere server.\nTheapplication is also having httpclient dependency as well\nDoes anybody knows what should I do? Or what I am doing wrong?</p>\n<p>Many thanks in advance.</p>\n"},{"tags":["java","android","webview","filebrowse"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684908441,"post_id":76315149,"comment_id":134584194,"body_markdown":"https://stackoverflow.com/questions/76319946/uploading-files-through-the-camera-is-0-bytes-but-if-its-via-the-gallery-its-o","body":"<a href=\"https://stackoverflow.com/questions/76319946/uploading-files-through-the-camera-is-0-bytes-but-if-its-via-the-gallery-its-o\" title=\"uploading files through the camera is 0 bytes but if its via the gallery its o\">stackoverflow.com/questions/76319946/&hellip;</a>"},{"owner":{"account_id":15414279,"reputation":13,"user_id":11120404,"display_name":"Sukh"},"score":0,"creation_date":1684930909,"post_id":76315149,"comment_id":134589078,"body_markdown":"Thank you @blackapps. That question has helped. Thankfully, that question was posted today :-) I will work on it and post the result, or ask a question, if I face some problem.","body":"Thank you @blackapps. That question has helped. Thankfully, that question was posted today :-) I will work on it and post the result, or ask a question, if I face some problem."}],"answers":[{"tags":[],"owner":{"account_id":15414279,"reputation":13,"user_id":11120404,"display_name":"Sukh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695361367,"creation_date":1695361367,"answer_id":77155100,"question_id":76315149,"body_markdown":"I was able to solve this problem. The link provided by @blackapps has helped. This also allows file downloads, which I later realized did not work. This is partial code:\r\n\r\n     public class MainActivity extends AppCompatActivity {\r\n    \r\n        private WebView webView;\r\n        private ProgressBar progressBar;\r\n    \r\n        private ValueCallback&lt;Uri[]&gt; filePath;\r\n        private ActivityResultLauncher&lt;Intent&gt; activityResultLauncher;\r\n        private static final int PERMISSIONS_REQUEST_CODE = 1;\r\n    \r\n        protected void onCreate(Bundle savedInstanceState) {\r\n    \r\n            String webUrl = getString(R.string.hosting_url);\r\n            super.onCreate(savedInstanceState);\r\n            if (getSupportActionBar() != null) {\r\n                getSupportActionBar().hide();\r\n            }\r\n    \r\n            setContentView(R.layout.activity_main);\r\n            progressBar = findViewById(R.id.progressBar);\r\n            webView = findViewById(R.id.webView);\r\n            WebSettings webSettings = webView.getSettings();\r\n    \r\n            webView.setWebViewClient(new CustomWebViewClient());\r\n            webSettings.setJavaScriptEnabled(true);\r\n            webSettings.setDomStorageEnabled(true);\r\n            webSettings.setSupportZoom(false);\r\n    \r\n            webView.setDownloadListener(new DownloadListener() {\r\n                public void onDownloadStart(String url, String userAgent,\r\n                                            String contentDisposition, String mimetype,\r\n                                            long contentLength) {\r\n                    Intent i = new Intent(Intent.ACTION_VIEW);\r\n                    i.setData(Uri.parse(url));\r\n                    startActivity(i);\r\n                }\r\n            });\r\n            webView.addJavascriptInterface(new WebAppInterface(this), &quot;Android&quot;);\r\n    \r\n            activityResultLauncher = registerForActivityResult(\r\n                    new ActivityResultContracts.StartActivityForResult(),\r\n                    new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n                        @Override\r\n                        public void onActivityResult(ActivityResult result) {\r\n    \r\n                            if (result.getResultCode() == Activity.RESULT_OK) {\r\n                                Uri[] uris;\r\n    \r\n    \r\n                                Intent data = result.getData();\r\n                                if (data != null) {\r\n                                    if (data.getClipData() != null) { // more than one file\r\n    \r\n                                        int totalFiles = data.getClipData().getItemCount();\r\n                                        uris = new Uri[totalFiles];\r\n                                        for (int i = 0; i &lt; totalFiles; i++) {\r\n                                            Uri uri = data.getClipData().getItemAt(i).getUri();\r\n                                            uris[i] = uri;\r\n                                        }\r\n                                    } else { // one file\r\n                                        uris = new Uri[]{data.getData()};\r\n                                    }\r\n                                    filePath.onReceiveValue(uris);\r\n    \r\n                                }\r\n    \r\n                            } else {\r\n                                filePath.onReceiveValue(null);\r\n                            }\r\n                        }\r\n                    }\r\n    \r\n            );\r\n    \r\n            webView.setWebChromeClient(new WebChromeClient() {\r\n                @Override\r\n                public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {\r\n                    filePath = filePathCallback;\r\n    \r\n                    if (checkPermissions()) {\r\n                        Intent getContent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                        getContent.addCategory(Intent.CATEGORY_OPENABLE);\r\n                        getContent.setType(&quot;*/*&quot;);\r\n                        if (fileChooserParams.getMode() == FileChooserParams.MODE_OPEN_MULTIPLE) {\r\n                            getContent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                        }\r\n                        Intent chooserIntent = new Intent(Intent.ACTION_CHOOSER);\r\n                        chooserIntent.putExtra(Intent.EXTRA_INTENT, getContent);\r\n                        activityResultLauncher.launch(chooserIntent);\r\n                        return true;\r\n                    }\r\n    \r\n                    return false;\r\n                }\r\n    \r\n            });\r\n    \r\n            // .....\r\n        }\r\n    \r\n        public boolean checkPermissions() {\r\n    \r\n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED\r\n    \r\n            ) {\r\n                String[] requiredPermissions = new String[]{Manifest.permission.READ_EXTERNAL_STORAGE};\r\n                ActivityCompat.requestPermissions(MainActivity.this, requiredPermissions, MainActivity.PERMISSIONS_REQUEST_CODE);\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n            super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n            if (requestCode == MainActivity.PERMISSIONS_REQUEST_CODE) {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    Toast.makeText(MainActivity.this, &quot;Please click the browse button again.&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    Toast.makeText(MainActivity.this, &quot;Permission is required to upload files, otherwise browse button will not work.&quot;, Toast.LENGTH_SHORT).show();\r\n                    Toast.makeText(MainActivity.this, &quot;If permission was denied more than once, then from Settings, allow Media and file access permission for &quot; + R.string.app_name, Toast.LENGTH_SHORT).show();\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n    \r\n        }\r\n    }\r\n\r\n\r\nAndoidManifest.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.STORAGE&quot; /&gt;\r\n\r\n    &lt;!-- .... --&gt;\r\n    \r\n    &lt;/manifest&gt;","title":"Android WebView html file browse buttons are not selecting files. The ActivityResult.getResultCode() is always 0","body":"<p>I was able to solve this problem. The link provided by @blackapps has helped. This also allows file downloads, which I later realized did not work. This is partial code:</p>\n<pre><code> public class MainActivity extends AppCompatActivity {\n\n    private WebView webView;\n    private ProgressBar progressBar;\n\n    private ValueCallback&lt;Uri[]&gt; filePath;\n    private ActivityResultLauncher&lt;Intent&gt; activityResultLauncher;\n    private static final int PERMISSIONS_REQUEST_CODE = 1;\n\n    protected void onCreate(Bundle savedInstanceState) {\n\n        String webUrl = getString(R.string.hosting_url);\n        super.onCreate(savedInstanceState);\n        if (getSupportActionBar() != null) {\n            getSupportActionBar().hide();\n        }\n\n        setContentView(R.layout.activity_main);\n        progressBar = findViewById(R.id.progressBar);\n        webView = findViewById(R.id.webView);\n        WebSettings webSettings = webView.getSettings();\n\n        webView.setWebViewClient(new CustomWebViewClient());\n        webSettings.setJavaScriptEnabled(true);\n        webSettings.setDomStorageEnabled(true);\n        webSettings.setSupportZoom(false);\n\n        webView.setDownloadListener(new DownloadListener() {\n            public void onDownloadStart(String url, String userAgent,\n                                        String contentDisposition, String mimetype,\n                                        long contentLength) {\n                Intent i = new Intent(Intent.ACTION_VIEW);\n                i.setData(Uri.parse(url));\n                startActivity(i);\n            }\n        });\n        webView.addJavascriptInterface(new WebAppInterface(this), &quot;Android&quot;);\n\n        activityResultLauncher = registerForActivityResult(\n                new ActivityResultContracts.StartActivityForResult(),\n                new ActivityResultCallback&lt;ActivityResult&gt;() {\n                    @Override\n                    public void onActivityResult(ActivityResult result) {\n\n                        if (result.getResultCode() == Activity.RESULT_OK) {\n                            Uri[] uris;\n\n\n                            Intent data = result.getData();\n                            if (data != null) {\n                                if (data.getClipData() != null) { // more than one file\n\n                                    int totalFiles = data.getClipData().getItemCount();\n                                    uris = new Uri[totalFiles];\n                                    for (int i = 0; i &lt; totalFiles; i++) {\n                                        Uri uri = data.getClipData().getItemAt(i).getUri();\n                                        uris[i] = uri;\n                                    }\n                                } else { // one file\n                                    uris = new Uri[]{data.getData()};\n                                }\n                                filePath.onReceiveValue(uris);\n\n                            }\n\n                        } else {\n                            filePath.onReceiveValue(null);\n                        }\n                    }\n                }\n\n        );\n\n        webView.setWebChromeClient(new WebChromeClient() {\n            @Override\n            public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {\n                filePath = filePathCallback;\n\n                if (checkPermissions()) {\n                    Intent getContent = new Intent(Intent.ACTION_GET_CONTENT);\n                    getContent.addCategory(Intent.CATEGORY_OPENABLE);\n                    getContent.setType(&quot;*/*&quot;);\n                    if (fileChooserParams.getMode() == FileChooserParams.MODE_OPEN_MULTIPLE) {\n                        getContent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\n                    }\n                    Intent chooserIntent = new Intent(Intent.ACTION_CHOOSER);\n                    chooserIntent.putExtra(Intent.EXTRA_INTENT, getContent);\n                    activityResultLauncher.launch(chooserIntent);\n                    return true;\n                }\n\n                return false;\n            }\n\n        });\n\n        // .....\n    }\n\n    public boolean checkPermissions() {\n\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED\n\n        ) {\n            String[] requiredPermissions = new String[]{Manifest.permission.READ_EXTERNAL_STORAGE};\n            ActivityCompat.requestPermissions(MainActivity.this, requiredPermissions, MainActivity.PERMISSIONS_REQUEST_CODE);\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == MainActivity.PERMISSIONS_REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                Toast.makeText(MainActivity.this, &quot;Please click the browse button again.&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                Toast.makeText(MainActivity.this, &quot;Permission is required to upload files, otherwise browse button will not work.&quot;, Toast.LENGTH_SHORT).show();\n                Toast.makeText(MainActivity.this, &quot;If permission was denied more than once, then from Settings, allow Media and file access permission for &quot; + R.string.app_name, Toast.LENGTH_SHORT).show();\n\n            }\n\n        }\n\n\n    }\n}\n</code></pre>\n<p>AndoidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.STORAGE&quot; /&gt;\n\n&lt;!-- .... --&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"}],"owner":{"account_id":15414279,"reputation":13,"user_id":11120404,"display_name":"Sukh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695361367,"creation_date":1684847297,"question_id":76315149,"body_markdown":"I have just started using Android, but I have used the Java language in the past.\r\n\r\nI have loaded a web application in an android WebWiew. The app was published successfully but the file browse buttons did not work. I have tried searching for many days, but most of the code that I tried, either did not work or is outdated.\r\n\r\nRelated, answers on the internet too, are for old Android versions or were answered many years ago. For example, startActivityForResult() is now deprecated.\r\n\r\n**The file selection dialog does open**, but after selecting the file nothing happens.\r\n**The ActivityResult.getResultCode() is always returned as 0) zero**.\r\n\r\nThis is the string version of the result:\r\n\r\n*ActivityResult{resultCode=RESULT_CANCELED, data=null}*\r\n\r\nFor now, I Just want the browse button file selections to work, so that these get uploaded with the form.\r\n\r\nI have tried changing the permissions, and almost everything that I could.\r\n\r\nTarget SDK version is 33\r\nMin SDK version is 25\r\n\r\nI am posting the code that I have tried. For testing, I have replaced the app with a simple html page. I have tried accept=&#39;image/*&#39; , attributes as well. Please let me know what I am missing?\r\n\r\n\r\n```\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private WebView webView;\r\n        private static final int FILE_CHOOSER_ACTIVITY_CODE = 1;\r\n        private ValueCallback&lt;Uri[]&gt; filePath;\r\n        private ActivityResultLauncher&lt;Intent&gt; activityResultLauncher;\r\n    \r\n        protected void onCreate(Bundle savedInstanceState) {\r\n    \r\n            String webUrl = getString(R.string.hosting_url);\r\n            super.onCreate(savedInstanceState);\r\n            if (getSupportActionBar() != null) {\r\n                getSupportActionBar().hide();\r\n            }\r\n    \r\n            setContentView(R.layout.activity_main);\r\n            webView = findViewById(R.id.webView);\r\n            WebSettings webSettings = webView.getSettings();\r\n    \r\n            webView.setWebViewClient(new CustomWebViewClient());\r\n            webSettings.setJavaScriptEnabled(true);\r\n            webSettings.setDomStorageEnabled(true);\r\n            webSettings.setSupportZoom(false);\r\n            //webSettings.setAllowFileAccess(true);\r\n            //webSettings.setAllowContentAccess(true);\r\n    \r\n            webView.addJavascriptInterface(new WebAppInterface(this), &quot;Android&quot;);\r\n    \r\n            activityResultLauncher = registerForActivityResult(\r\n                    new ActivityResultContracts.StartActivityForResult(),\r\n                    new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n                        @Override\r\n                        public void onActivityResult(ActivityResult result) {\r\n                            if (filePath != null) {\r\n                                filePath.onReceiveValue(null);\r\n                            }\r\n                            System.out.println(result);\r\n                            Log.d(&quot;info&quot;, &quot;Result code is &quot; + result.getResultCode());\r\n                            if (result.getResultCode() == FILE_CHOOSER_ACTIVITY_CODE) {\r\n                                Uri[] results = null;\r\n    \r\n                                Log.d(&quot;Info&quot;, &quot;Result code  &quot; + result.getResultCode());\r\n                                //if (result.getResultCode() == Activity.RESULT_OK) {\r\n                                Intent data = result.getData();\r\n                                //Uri uri = new Uri(data.getData());\r\n                                if (data != null) {\r\n                                    if (null == filePath) {\r\n                                        return;\r\n                                    }\r\n                                    results = new Uri[]{data.getData()};\r\n                                    filePath.onReceiveValue(results);\r\n                                    System.out.println(results.toString());\r\n                                }\r\n                                //} else {\r\n                                //    filePath = null;\r\n                                //}\r\n                            }\r\n    \r\n                        }\r\n                    }\r\n    \r\n            );\r\n    \r\n            webView.setWebChromeClient(new WebChromeClient() {\r\n                @Override\r\n                public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {\r\n                    filePath = filePathCallback;\r\n                    if (checkPermissions()) {\r\n                        Intent getContent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                        //getContent.addCategory(Intent.CATEGORY_OPENABLE);\r\n                        getContent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                        getContent.setType(&quot;*/*&quot;);\r\n                        //String[] mimeTypes = {&quot;text/*&quot;, &quot;image/&quot;};\r\n                        //getContent.putExtra(Intent.EXTRA_MIME_TYPES, mimeTypes);\r\n                        //getContent.createChooser(getContent, &quot;Choose a File&quot;);\r\n    \r\n                        activityResultLauncher.launch(getContent);\r\n    \r\n                        return true;\r\n    \r\n                    } else {\r\n                        Toast.makeText(MainActivity.this, &quot;Permissions are required&quot;, Toast.LENGTH_SHORT);\r\n                    }\r\n    \r\n                    return false;\r\n                }\r\n    \r\n            });\r\n    \r\n    \r\n        }\r\n    \r\n        public boolean checkPermissions() {\r\n    \r\n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED\r\n                    || ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED\r\n                    //|| ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED\r\n            ) {\r\n                String requiredPermissions[] = new String[]{Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.CAMERA};\r\n                ActivityCompat.requestPermissions(MainActivity.this, requiredPermissions, 1);\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n    \r\n         ....\r\n         ....\r\n    }\r\n\r\n```\r\n\r\nAndroidManifest.xml\r\n\r\n```\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;!-- &lt;uses-feature android:name=&quot;android.hardware.camera&quot; android:required=&quot;true&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt; --&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.abc&quot;\r\n            tools:targetApi=&quot;31&quot;\r\n            android:usesCleartextTraffic=&quot;true&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;\r\n                android:configChanges=&quot;orientation|screenSize&quot;\r\n                &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n    \r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n```\r\n\r\ntest.html\r\n```\r\n\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    \t&lt;title&gt;\r\n    \t\tUpload\r\n    \t&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t&lt;form method=&#39;post&#39; enctype=&#39;multipart/form-data&#39; action=&#39;&#39;&gt;\r\n    &lt;input type=&quot;file&quot;/&gt;\r\n    \t\t&lt;input type=&#39;submit&#39; value=&#39;Upload Now&#39; /&gt;\r\n    \t&lt;/form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n```","title":"Android WebView html file browse buttons are not selecting files. The ActivityResult.getResultCode() is always 0","body":"<p>I have just started using Android, but I have used the Java language in the past.</p>\n<p>I have loaded a web application in an android WebWiew. The app was published successfully but the file browse buttons did not work. I have tried searching for many days, but most of the code that I tried, either did not work or is outdated.</p>\n<p>Related, answers on the internet too, are for old Android versions or were answered many years ago. For example, startActivityForResult() is now deprecated.</p>\n<p><strong>The file selection dialog does open</strong>, but after selecting the file nothing happens.\n<strong>The ActivityResult.getResultCode() is always returned as 0) zero</strong>.</p>\n<p>This is the string version of the result:</p>\n<p><em>ActivityResult{resultCode=RESULT_CANCELED, data=null}</em></p>\n<p>For now, I Just want the browse button file selections to work, so that these get uploaded with the form.</p>\n<p>I have tried changing the permissions, and almost everything that I could.</p>\n<p>Target SDK version is 33\nMin SDK version is 25</p>\n<p>I am posting the code that I have tried. For testing, I have replaced the app with a simple html page. I have tried accept='image/*' , attributes as well. Please let me know what I am missing?</p>\n<pre><code>\n    public class MainActivity extends AppCompatActivity {\n    \n        private WebView webView;\n        private static final int FILE_CHOOSER_ACTIVITY_CODE = 1;\n        private ValueCallback&lt;Uri[]&gt; filePath;\n        private ActivityResultLauncher&lt;Intent&gt; activityResultLauncher;\n    \n        protected void onCreate(Bundle savedInstanceState) {\n    \n            String webUrl = getString(R.string.hosting_url);\n            super.onCreate(savedInstanceState);\n            if (getSupportActionBar() != null) {\n                getSupportActionBar().hide();\n            }\n    \n            setContentView(R.layout.activity_main);\n            webView = findViewById(R.id.webView);\n            WebSettings webSettings = webView.getSettings();\n    \n            webView.setWebViewClient(new CustomWebViewClient());\n            webSettings.setJavaScriptEnabled(true);\n            webSettings.setDomStorageEnabled(true);\n            webSettings.setSupportZoom(false);\n            //webSettings.setAllowFileAccess(true);\n            //webSettings.setAllowContentAccess(true);\n    \n            webView.addJavascriptInterface(new WebAppInterface(this), &quot;Android&quot;);\n    \n            activityResultLauncher = registerForActivityResult(\n                    new ActivityResultContracts.StartActivityForResult(),\n                    new ActivityResultCallback&lt;ActivityResult&gt;() {\n                        @Override\n                        public void onActivityResult(ActivityResult result) {\n                            if (filePath != null) {\n                                filePath.onReceiveValue(null);\n                            }\n                            System.out.println(result);\n                            Log.d(&quot;info&quot;, &quot;Result code is &quot; + result.getResultCode());\n                            if (result.getResultCode() == FILE_CHOOSER_ACTIVITY_CODE) {\n                                Uri[] results = null;\n    \n                                Log.d(&quot;Info&quot;, &quot;Result code  &quot; + result.getResultCode());\n                                //if (result.getResultCode() == Activity.RESULT_OK) {\n                                Intent data = result.getData();\n                                //Uri uri = new Uri(data.getData());\n                                if (data != null) {\n                                    if (null == filePath) {\n                                        return;\n                                    }\n                                    results = new Uri[]{data.getData()};\n                                    filePath.onReceiveValue(results);\n                                    System.out.println(results.toString());\n                                }\n                                //} else {\n                                //    filePath = null;\n                                //}\n                            }\n    \n                        }\n                    }\n    \n            );\n    \n            webView.setWebChromeClient(new WebChromeClient() {\n                @Override\n                public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {\n                    filePath = filePathCallback;\n                    if (checkPermissions()) {\n                        Intent getContent = new Intent(Intent.ACTION_GET_CONTENT);\n                        //getContent.addCategory(Intent.CATEGORY_OPENABLE);\n                        getContent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                        getContent.setType(&quot;*/*&quot;);\n                        //String[] mimeTypes = {&quot;text/*&quot;, &quot;image/&quot;};\n                        //getContent.putExtra(Intent.EXTRA_MIME_TYPES, mimeTypes);\n                        //getContent.createChooser(getContent, &quot;Choose a File&quot;);\n    \n                        activityResultLauncher.launch(getContent);\n    \n                        return true;\n    \n                    } else {\n                        Toast.makeText(MainActivity.this, &quot;Permissions are required&quot;, Toast.LENGTH_SHORT);\n                    }\n    \n                    return false;\n                }\n    \n            });\n    \n    \n        }\n    \n        public boolean checkPermissions() {\n    \n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED\n                    || ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED\n                    //|| ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED\n            ) {\n                String requiredPermissions[] = new String[]{Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.CAMERA};\n                ActivityCompat.requestPermissions(MainActivity.this, requiredPermissions, 1);\n                return false;\n            } else {\n                return true;\n            }\n        }\n    \n         ....\n         ....\n    }\n\n</code></pre>\n<p>AndroidManifest.xml</p>\n<pre><code>\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n        &lt;uses-permission android:name=&quot;android.permission.STORAGE&quot; /&gt;\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n        &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n        &lt;!-- &lt;uses-feature android:name=&quot;android.hardware.camera&quot; android:required=&quot;true&quot; /&gt;\n        &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt; --&gt;\n    \n        &lt;application\n            android:allowBackup=&quot;true&quot;\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\n            android:icon=&quot;@mipmap/ic_launcher&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n            android:supportsRtl=&quot;true&quot;\n            android:theme=&quot;@style/Theme.abc&quot;\n            tools:targetApi=&quot;31&quot;\n            android:usesCleartextTraffic=&quot;true&quot;&gt;\n            &lt;activity\n                android:name=&quot;.MainActivity&quot;\n                android:exported=&quot;true&quot;\n                android:configChanges=&quot;orientation|screenSize&quot;\n                &gt;\n                &lt;intent-filter&gt;\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n                &lt;/intent-filter&gt;\n            &lt;/activity&gt;\n    \n    \n        &lt;/application&gt;\n    \n    &lt;/manifest&gt;\n\n</code></pre>\n<p>test.html</p>\n<pre><code>\n    &lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;\n            Upload\n        &lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;form method='post' enctype='multipart/form-data' action=''&gt;\n    &lt;input type=&quot;file&quot;/&gt;\n            &lt;input type='submit' value='Upload Now' /&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n\n</code></pre>\n"},{"tags":["java","spring","spring-security","spring-boot","cors"],"comments":[{"owner":{"account_id":3592539,"reputation":2396,"user_id":2998222,"display_name":"Issam El-atif"},"score":1,"creation_date":1478252115,"post_id":40418441,"comment_id":68087372,"body_markdown":"There is an issue with Chrome it does not support localhost to go through the Access-Control-Allow-Origin. Try with another browser","body":"There is an issue with Chrome it does not support localhost to go through the Access-Control-Allow-Origin. Try with another browser"},{"owner":{"account_id":9578797,"reputation":1089,"user_id":7113955,"accept_rate":50,"display_name":"Mace"},"score":0,"creation_date":1478252425,"post_id":40418441,"comment_id":68087548,"body_markdown":"We tried with Edge and it is working... but firefox isn&#39;t working as well.","body":"We tried with Edge and it is working... but firefox isn&#39;t working as well."},{"owner":{"account_id":3592539,"reputation":2396,"user_id":2998222,"display_name":"Issam El-atif"},"score":0,"creation_date":1478252770,"post_id":40418441,"comment_id":68087739,"body_markdown":"I was having the same issue i solve it by adding `127.0.0.1   localhost local.net` to `/etc/hosts` then call http://local.net:8080/getKunden","body":"I was having the same issue i solve it by adding <code>127.0.0.1   localhost local.net</code> to <code>&#47;etc&#47;hosts</code> then call <a href=\"http://local.net:8080/getKunden\" rel=\"nofollow noreferrer\">local.net:8080/getKunden</a>"},{"owner":{"account_id":3592539,"reputation":2396,"user_id":2998222,"display_name":"Issam El-atif"},"score":0,"creation_date":1478254055,"post_id":40418441,"comment_id":68088545,"body_markdown":"see http://stackoverflow.com/questions/28547288/no-access-control-allow-origin-header-is-present-on-the-requested-resource-err it could help","body":"see <a href=\"http://stackoverflow.com/questions/28547288/no-access-control-allow-origin-header-is-present-on-the-requested-resource-err\" title=\"no access control allow origin header is present on the requested resource err\">stackoverflow.com/questions/28547288/&hellip;</a> it could help"}],"answers":[{"tags":[],"owner":{"account_id":4565974,"reputation":998,"user_id":3706986,"accept_rate":57,"display_name":"Piotr Sołtysiak"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1549458693,"creation_date":1478250862,"answer_id":40418894,"question_id":40418441,"body_markdown":" 1. You don&#39;t need:\r\n\r\n        @Configuration\r\n        @ComponentScan(&quot;com.company.praktikant&quot;)\r\n    `@EnableWebSecurity` already has  `@Configuration` in it, and I cannot imagine why you put `@ComponentScan` there.\r\n\r\n 2. About CORS filter, I would just put this:\r\n\r\n        @Bean\r\n        public FilterRegistrationBean corsFilter() {\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            CorsConfiguration config = new CorsConfiguration();\r\n            config.setAllowCredentials(true);\r\n            config.addAllowedOrigin(&quot;*&quot;);\r\n            config.addAllowedHeader(&quot;*&quot;);\r\n            config.addAllowedMethod(&quot;*&quot;);\r\n            source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n            FilterRegistrationBean bean = new FilterRegistrationBean(new CorsFilter(source));\r\n            bean.setOrder(0); \r\n            return bean;\r\n        }\r\nInto SecurityConfiguration class and remove configure and configure global methods. You don&#39;t need to set allowde orgins, headers and methods twice. Especially if you put different properties in filter and spring security config :)\r\n\r\n 3. According to above, your &quot;MyFilter&quot; class is redundant.\r\n\r\n 4. You can also remove those:\r\n\r\n        final AnnotationConfigApplicationContext annotationConfigApplicationContext = new AnnotationConfigApplicationContext();\r\n        annotationConfigApplicationContext.register(CORSConfig.class);\r\n        annotationConfigApplicationContext.refresh();\r\nFrom Application class.\r\n\r\n 5. At the end small advice - not connected to the question. You don&#39;t want to put verbs in URI. Instead of `http://localhost:8080/getKunden` you should use HTTP GET method on `http://localhost:8080/kunden` resource. You can learn about best practices for design RESTful api here: http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api ","title":"Spring security CORS Filter","body":"<ol>\n<li><p>You don't need:</p>\n\n<pre><code>@Configuration\n@ComponentScan(\"com.company.praktikant\")\n</code></pre>\n\n<p><code>@EnableWebSecurity</code> already has  <code>@Configuration</code> in it, and I cannot imagine why you put <code>@ComponentScan</code> there.</p></li>\n<li><p>About CORS filter, I would just put this:</p>\n\n<pre><code>@Bean\npublic FilterRegistrationBean corsFilter() {\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    CorsConfiguration config = new CorsConfiguration();\n    config.setAllowCredentials(true);\n    config.addAllowedOrigin(\"*\");\n    config.addAllowedHeader(\"*\");\n    config.addAllowedMethod(\"*\");\n    source.registerCorsConfiguration(\"/**\", config);\n    FilterRegistrationBean bean = new FilterRegistrationBean(new CorsFilter(source));\n    bean.setOrder(0); \n    return bean;\n}\n</code></pre>\n\n<p>Into SecurityConfiguration class and remove configure and configure global methods. You don't need to set allowde orgins, headers and methods twice. Especially if you put different properties in filter and spring security config :)</p></li>\n<li><p>According to above, your \"MyFilter\" class is redundant.</p></li>\n<li><p>You can also remove those:</p>\n\n<pre><code>final AnnotationConfigApplicationContext annotationConfigApplicationContext = new AnnotationConfigApplicationContext();\nannotationConfigApplicationContext.register(CORSConfig.class);\nannotationConfigApplicationContext.refresh();\n</code></pre>\n\n<p>From Application class.</p></li>\n<li><p>At the end small advice - not connected to the question. You don't want to put verbs in URI. Instead of <code>http://localhost:8080/getKunden</code> you should use HTTP GET method on <code>http://localhost:8080/kunden</code> resource. You can learn about best practices for design RESTful api here: <a href=\"http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api\" rel=\"nofollow noreferrer\">http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api</a> </p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5294228,"reputation":1902,"user_id":4225803,"accept_rate":75,"display_name":"Alex Fernandez"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1605746161,"creation_date":1478252087,"answer_id":40419273,"question_id":40418441,"body_markdown":"In my case, I just added this class and use `@EnableAutConfiguration`:\r\n```java\r\n@Component\r\npublic class SimpleCORSFilter extends GenericFilterBean {\r\n    /**\r\n     * The Logger for this class.\r\n     */\r\n    private final Logger logger = LoggerFactory.getLogger(this.getClass());\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest req, ServletResponse resp,\r\n                         FilterChain chain) throws IOException, ServletException {\r\n        logger.info(&quot;&gt; doFilter&quot;);\r\n\r\n        HttpServletResponse response = (HttpServletResponse) resp;\r\n        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, PUT, GET, OPTIONS, DELETE&quot;);\r\n        response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\r\n        response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Authorization, Content-Type&quot;);\r\n        //response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n        chain.doFilter(req, resp);\r\n\r\n        logger.info(&quot;&lt; doFilter&quot;);\r\n    }\r\n}\r\n```\r\n","title":"Spring security CORS Filter","body":"<p>In my case, I just added this class and use <code>@EnableAutConfiguration</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SimpleCORSFilter extends GenericFilterBean {\n    /**\n     * The Logger for this class.\n     */\n    private final Logger logger = LoggerFactory.getLogger(this.getClass());\n\n    @Override\n    public void doFilter(ServletRequest req, ServletResponse resp,\n                         FilterChain chain) throws IOException, ServletException {\n        logger.info(&quot;&gt; doFilter&quot;);\n\n        HttpServletResponse response = (HttpServletResponse) resp;\n        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, PUT, GET, OPTIONS, DELETE&quot;);\n        response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\n        response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Authorization, Content-Type&quot;);\n        //response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n        chain.doFilter(req, resp);\n\n        logger.info(&quot;&lt; doFilter&quot;);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1180793,"reputation":1541,"user_id":1155758,"accept_rate":70,"display_name":"Manish"},"score":5,"creation_date":1484370234,"post_id":40419969,"comment_id":70493310,"body_markdown":"What type of authentication you were using? Basic, Form?","body":"What type of authentication you were using? Basic, Form?"}],"tags":[],"owner":{"account_id":9578797,"reputation":1089,"user_id":7113955,"accept_rate":50,"display_name":"Mace"},"comment_count":1,"down_vote_count":1,"up_vote_count":33,"is_accepted":true,"score":32,"last_activity_date":1605632613,"creation_date":1478254147,"answer_id":40419969,"question_id":40418441,"body_markdown":"Ok, after over 2 days of searching we finally fixed the problem. We deleted all our filter and configurations and instead used this 5 lines of code in the application class.\r\n```java\r\n@SpringBootApplication\r\npublic class Application {\r\n    public static void main(String[] args) {\r\n        final ApplicationContext ctx = SpringApplication.run(Application.class, args);\r\n    }\r\n\r\n    @Bean\r\n    public WebMvcConfigurer corsConfigurer() {\r\n        return new WebMvcConfigurerAdapter() {\r\n            @Override\r\n            public void addCorsMappings(CorsRegistry registry) {\r\n                registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:3000&quot;);\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n","title":"Spring security CORS Filter","body":"<p>Ok, after over 2 days of searching we finally fixed the problem. We deleted all our filter and configurations and instead used this 5 lines of code in the application class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        final ApplicationContext ctx = SpringApplication.run(Application.class, args);\n    }\n\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurerAdapter() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:3000&quot;);\n            }\n        };\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7182925,"reputation":3609,"user_id":5486116,"accept_rate":70,"display_name":"Strider"},"score":1,"creation_date":1499079201,"post_id":43559288,"comment_id":76745492,"body_markdown":"That works for me but I had to keep `the http.csrf().disable()`, because once it is deleted I got the error: `Could not verify the provided CSRF token because your session was not found`","body":"That works for me but I had to keep <code>the http.csrf().disable()</code>, because once it is deleted I got the error: <code>Could not verify the provided CSRF token because your session was not found</code>"},{"owner":{"account_id":7405841,"reputation":897,"user_id":5634808,"display_name":"Amos Kosgei"},"score":1,"creation_date":1499865205,"post_id":43559288,"comment_id":77090761,"body_markdown":"Perfect answer...\nThough for me I had to uncomment  http.csrf().disable();","body":"Perfect answer... Though for me I had to uncomment  http.csrf().disable();"},{"owner":{"account_id":5858283,"reputation":4931,"user_id":4614870,"display_name":"Brian"},"score":5,"creation_date":1512992703,"post_id":43559288,"comment_id":82464692,"body_markdown":"If you aren&#39;t using Guava, you can always do this: `Collections.unmodifiableList(Arrays.asList(&quot;HEAD&quot;,...))`","body":"If you aren&#39;t using Guava, you can always do this: <code>Collections.unmodifiableList(Arrays.asList(&quot;HEAD&quot;,...))</code>"},{"owner":{"account_id":4713249,"reputation":2149,"user_id":3813155,"accept_rate":79,"display_name":"heez"},"score":1,"creation_date":1521045615,"post_id":43559288,"comment_id":85569144,"body_markdown":"This does not work with Firefox clients if your app is operating in a 2-way SSL environment using x509 certificates.  Spring Security still expects credentials on OPTIONS requests, which is in violation of the CORS spec:  https://fetch.spec.whatwg.org/#cors-preflight-fetch, and unfortunately Firefox strictly adheres to this spec and rips out credentials in preflight requests.","body":"This does not work with Firefox clients if your app is operating in a 2-way SSL environment using x509 certificates.  Spring Security still expects credentials on OPTIONS requests, which is in violation of the CORS spec:  <a href=\"https://fetch.spec.whatwg.org/#cors-preflight-fetch\" rel=\"nofollow noreferrer\">fetch.spec.whatwg.org/#cors-preflight-fetch</a>, and unfortunately Firefox strictly adheres to this spec and rips out credentials in preflight requests."},{"owner":{"account_id":426158,"reputation":2189,"user_id":807210,"accept_rate":44,"display_name":"priteshbaviskar"},"score":9,"creation_date":1533460254,"post_id":43559288,"comment_id":90347324,"body_markdown":"Please note that WebMvcConfigurerAdapter is deprecated now.","body":"Please note that WebMvcConfigurerAdapter is deprecated now."},{"owner":{"account_id":4965083,"reputation":142,"user_id":3994713,"accept_rate":86,"display_name":"Manish Sharma"},"score":1,"creation_date":1540303097,"post_id":43559288,"comment_id":92809730,"body_markdown":"Type mismatch: cannot convert from UrlBasedCorsConfigurationSource to CorsConfigurationSource","body":"Type mismatch: cannot convert from UrlBasedCorsConfigurationSource to CorsConfigurationSource"},{"owner":{"account_id":85878,"reputation":44865,"user_id":239168,"accept_rate":87,"display_name":"Eran Medan"},"score":5,"creation_date":1550546765,"post_id":43559288,"comment_id":96298102,"body_markdown":"**Don&#39;t** remove the CSRF without knowing what you are doing! https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)","body":"<b>Don&#39;t</b> remove the CSRF without knowing what you are doing! <a href=\"https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)\" rel=\"nofollow noreferrer\">owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)</a>"},{"owner":{"account_id":1317316,"reputation":406,"user_id":1263901,"accept_rate":36,"display_name":"Vortilion"},"score":2,"creation_date":1552464698,"post_id":43559288,"comment_id":97014508,"body_markdown":"Still doesn&#39;t work with this solution, cause preflight requests are blocked.","body":"Still doesn&#39;t work with this solution, cause preflight requests are blocked."},{"owner":{"account_id":425500,"reputation":793,"user_id":5822240,"display_name":"Filomat"},"score":7,"creation_date":1579435809,"post_id":43559288,"comment_id":105758787,"body_markdown":"The type `WebMvcConfigurerAdapter` is deprecated.\nSince Spring 5 you just need to implement the interface `WebMvcConfigurer`","body":"The type <code>WebMvcConfigurerAdapter</code> is deprecated. Since Spring 5 you just need to implement the interface <code>WebMvcConfigurer</code>"},{"owner":{"account_id":19995586,"reputation":160,"user_id":14655728,"display_name":"Pollongz"},"score":0,"creation_date":1621893358,"post_id":43559288,"comment_id":119626590,"body_markdown":"For `configuration.setAllowedOrigins()` I had to change &quot;*&quot; to a specific url like: http://localhost:3000 and it works just fine. Thanks :)","body":"For <code>configuration.setAllowedOrigins()</code> I had to change &quot;*&quot; to a specific url like: <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">localhost:3000</a> and it works just fine. Thanks :)"}],"tags":[],"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"comment_count":10,"down_vote_count":1,"up_vote_count":124,"is_accepted":false,"score":123,"last_activity_date":1492866137,"creation_date":1492864553,"answer_id":43559288,"question_id":40418441,"body_markdown":"Since Spring Security 4.1, this is the proper way to make Spring Security support CORS (also needed in Spring Boot 1.4/1.5):\r\n\r\n    @Configuration\r\n    public class WebConfig extends WebMvcConfigurerAdapter {\r\n    \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedMethods(&quot;HEAD&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;);\r\n        }\r\n    }\r\n\r\nand:\r\n\r\n    @Configuration\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n    //        http.csrf().disable();\r\n            http.cors();\r\n        }\r\n    \r\n        @Bean\r\n        public CorsConfigurationSource corsConfigurationSource() {\r\n            final CorsConfiguration configuration = new CorsConfiguration();\r\n            configuration.setAllowedOrigins(ImmutableList.of(&quot;*&quot;));\r\n            configuration.setAllowedMethods(ImmutableList.of(&quot;HEAD&quot;,\r\n                    &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\r\n            // setAllowCredentials(true) is important, otherwise:\r\n            // The value of the &#39;Access-Control-Allow-Origin&#39; header in the response must not be the wildcard &#39;*&#39; when the request&#39;s credentials mode is &#39;include&#39;.\r\n            configuration.setAllowCredentials(true);\r\n            // setAllowedHeaders is important! Without it, OPTIONS preflight request\r\n            // will fail with 403 Invalid CORS request\r\n            configuration.setAllowedHeaders(ImmutableList.of(&quot;Authorization&quot;, &quot;Cache-Control&quot;, &quot;Content-Type&quot;));\r\n            final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n            return source;\r\n        }\r\n    }\r\n\r\nDo _not_ do any of below, which are the wrong way to attempt solving the problem:\r\n\r\n* `http.authorizeRequests().antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll();`\r\n* `web.ignoring().antMatchers(HttpMethod.OPTIONS);`\r\n\r\nReference: http://docs.spring.io/spring-security/site/docs/4.2.x/reference/html/cors.html\r\n","title":"Spring security CORS Filter","body":"<p>Since Spring Security 4.1, this is the proper way to make Spring Security support CORS (also needed in Spring Boot 1.4/1.5):</p>\n\n<pre><code>@Configuration\npublic class WebConfig extends WebMvcConfigurerAdapter {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(\"/**\")\n                .allowedMethods(\"HEAD\", \"GET\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\");\n    }\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n//        http.csrf().disable();\n        http.cors();\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        final CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(ImmutableList.of(\"*\"));\n        configuration.setAllowedMethods(ImmutableList.of(\"HEAD\",\n                \"GET\", \"POST\", \"PUT\", \"DELETE\", \"PATCH\"));\n        // setAllowCredentials(true) is important, otherwise:\n        // The value of the 'Access-Control-Allow-Origin' header in the response must not be the wildcard '*' when the request's credentials mode is 'include'.\n        configuration.setAllowCredentials(true);\n        // setAllowedHeaders is important! Without it, OPTIONS preflight request\n        // will fail with 403 Invalid CORS request\n        configuration.setAllowedHeaders(ImmutableList.of(\"Authorization\", \"Cache-Control\", \"Content-Type\"));\n        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(\"/**\", configuration);\n        return source;\n    }\n}\n</code></pre>\n\n<p>Do <em>not</em> do any of below, which are the wrong way to attempt solving the problem:</p>\n\n<ul>\n<li><code>http.authorizeRequests().antMatchers(HttpMethod.OPTIONS, \"/**\").permitAll();</code></li>\n<li><code>web.ignoring().antMatchers(HttpMethod.OPTIONS);</code></li>\n</ul>\n\n<p>Reference: <a href=\"http://docs.spring.io/spring-security/site/docs/4.2.x/reference/html/cors.html\" rel=\"noreferrer\">http://docs.spring.io/spring-security/site/docs/4.2.x/reference/html/cors.html</a></p>\n"},{"comments":[{"owner":{"account_id":9949440,"reputation":636,"user_id":7362736,"display_name":"Marcel"},"score":0,"creation_date":1555600237,"post_id":46951171,"comment_id":98174681,"body_markdown":"Same here. Had to replace Authorization with X-Authorization though.","body":"Same here. Had to replace Authorization with X-Authorization though."},{"owner":{"account_id":6383638,"reputation":63,"user_id":4952219,"display_name":"Srinivasan Thoyyeti"},"score":0,"creation_date":1594037826,"post_id":46951171,"comment_id":110976931,"body_markdown":"Why I chose this solution: Because I have AuthorizationFilter which responds before CorsBean, hence all Cors preflighted requests are answered by AuthFilter as opposed to Spring Cors config. Hence I have replaced CorsConfig bean with CorsFilter mentioned in this solution; now Cors pre-flight requests are answered by CorsFilter as intended. @David Thank you.","body":"Why I chose this solution: Because I have AuthorizationFilter which responds before CorsBean, hence all Cors preflighted requests are answered by AuthFilter as opposed to Spring Cors config. Hence I have replaced CorsConfig bean with CorsFilter mentioned in this solution; now Cors pre-flight requests are answered by CorsFilter as intended. @David Thank you."}],"tags":[],"owner":{"account_id":3117470,"reputation":336,"user_id":2637940,"display_name":"David Eibensteiner"},"comment_count":2,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1551792135,"creation_date":1509011465,"answer_id":46951171,"question_id":40418441,"body_markdown":"Since i had problems with the other solutions (especially to get it working in all browsers, for example edge doesn&#39;t recognize &quot;*&quot; as a valid value for &quot;Access-Control-Allow-Methods&quot;), i had to use a custom filter component, which in the end worked for me and did exactly what i wanted to achieve.\r\n\r\n\r\n\r\n    @Component\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class CorsFilter implements Filter {\r\n        public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)\r\n                throws IOException, ServletException {\r\n            HttpServletResponse response = (HttpServletResponse) res;\r\n            HttpServletRequest request = (HttpServletRequest) req;\r\n            response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Methods&quot;,\r\n                    &quot;ACL, CANCELUPLOAD, CHECKIN, CHECKOUT, COPY, DELETE, GET, HEAD, LOCK, MKCALENDAR, MKCOL, MOVE, OPTIONS, POST, PROPFIND, PROPPATCH, PUT, REPORT, SEARCH, UNCHECKOUT, UNLOCK, UPDATE, VERSION-CONTROL&quot;);\r\n            response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Headers&quot;,\r\n                    &quot;Origin, X-Requested-With, Content-Type, Accept, Key, Authorization&quot;);\r\n    \r\n            if (&quot;OPTIONS&quot;.equalsIgnoreCase(request.getMethod())) {\r\n                response.setStatus(HttpServletResponse.SC_OK);\r\n            } else {\r\n                chain.doFilter(req, res);\r\n            }\r\n        }\r\n    \r\n        public void init(FilterConfig filterConfig) {\r\n            // not needed\r\n        }\r\n    \r\n        public void destroy() {\r\n            //not needed\r\n        }\r\n    \r\n    }","title":"Spring security CORS Filter","body":"<p>Since i had problems with the other solutions (especially to get it working in all browsers, for example edge doesn't recognize \"*\" as a valid value for \"Access-Control-Allow-Methods\"), i had to use a custom filter component, which in the end worked for me and did exactly what i wanted to achieve.</p>\n\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class CorsFilter implements Filter {\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)\n            throws IOException, ServletException {\n        HttpServletResponse response = (HttpServletResponse) res;\n        HttpServletRequest request = (HttpServletRequest) req;\n        response.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n        response.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n        response.setHeader(\"Access-Control-Allow-Methods\",\n                \"ACL, CANCELUPLOAD, CHECKIN, CHECKOUT, COPY, DELETE, GET, HEAD, LOCK, MKCALENDAR, MKCOL, MOVE, OPTIONS, POST, PROPFIND, PROPPATCH, PUT, REPORT, SEARCH, UNCHECKOUT, UNLOCK, UPDATE, VERSION-CONTROL\");\n        response.setHeader(\"Access-Control-Max-Age\", \"3600\");\n        response.setHeader(\"Access-Control-Allow-Headers\",\n                \"Origin, X-Requested-With, Content-Type, Accept, Key, Authorization\");\n\n        if (\"OPTIONS\".equalsIgnoreCase(request.getMethod())) {\n            response.setStatus(HttpServletResponse.SC_OK);\n        } else {\n            chain.doFilter(req, res);\n        }\n    }\n\n    public void init(FilterConfig filterConfig) {\n        // not needed\n    }\n\n    public void destroy() {\n        //not needed\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3187759,"reputation":3112,"user_id":2692914,"accept_rate":93,"display_name":"lmiguelmh"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1605696013,"creation_date":1509484136,"answer_id":47044574,"question_id":40418441,"body_markdown":"According the [CORS filter documentation][1]:\r\n\r\n&gt; &quot;Spring MVC provides fine-grained support for CORS configuration\r\n&gt; through annotations on controllers. However **when used with Spring\r\n&gt; Security it is advisable to rely on the built-in CorsFilter** that must\r\n&gt; be ordered ahead of Spring Security’s chain of filters&quot;\r\n\r\nSomething like this will allow `GET` access to the `/ajaxUri`:\r\n    \r\n    @Component\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class AjaxCorsFilter extends CorsFilter {\r\n        public AjaxCorsFilter() {\r\n            super(configurationSource());\r\n        }\r\n    \r\n        private static UrlBasedCorsConfigurationSource configurationSource() {\r\n            CorsConfiguration config = new CorsConfiguration();\r\n    \r\n            // origins\r\n            config.addAllowedOrigin(&quot;*&quot;);\r\n    \r\n            // when using ajax: withCredentials: true, we require exact origin match\r\n            config.setAllowCredentials(true);\r\n    \r\n            // headers\r\n            config.addAllowedHeader(&quot;x-requested-with&quot;);\r\n    \r\n            // methods\r\n            config.addAllowedMethod(HttpMethod.OPTIONS);\r\n            config.addAllowedMethod(HttpMethod.GET);\r\n    \r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            source.registerCorsConfiguration(&quot;/startAsyncAuthorize&quot;, config);\r\n            source.registerCorsConfiguration(&quot;/ajaxUri&quot;, config);\r\n            return source;\r\n        }\r\n    }\r\n\r\nOf course, your SpringSecurity configuration must allow access to the URI with the listed methods. See @Hendy Irawan answer.\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#filters-cors","title":"Spring security CORS Filter","body":"<p>According the <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#filters-cors\" rel=\"nofollow noreferrer\">CORS filter documentation</a>:</p>\n<blockquote>\n<p>&quot;Spring MVC provides fine-grained support for CORS configuration\nthrough annotations on controllers. However <strong>when used with Spring\nSecurity it is advisable to rely on the built-in CorsFilter</strong> that must\nbe ordered ahead of Spring Security’s chain of filters&quot;</p>\n</blockquote>\n<p>Something like this will allow <code>GET</code> access to the <code>/ajaxUri</code>:</p>\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class AjaxCorsFilter extends CorsFilter {\n    public AjaxCorsFilter() {\n        super(configurationSource());\n    }\n\n    private static UrlBasedCorsConfigurationSource configurationSource() {\n        CorsConfiguration config = new CorsConfiguration();\n\n        // origins\n        config.addAllowedOrigin(&quot;*&quot;);\n\n        // when using ajax: withCredentials: true, we require exact origin match\n        config.setAllowCredentials(true);\n\n        // headers\n        config.addAllowedHeader(&quot;x-requested-with&quot;);\n\n        // methods\n        config.addAllowedMethod(HttpMethod.OPTIONS);\n        config.addAllowedMethod(HttpMethod.GET);\n\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/startAsyncAuthorize&quot;, config);\n        source.registerCorsConfiguration(&quot;/ajaxUri&quot;, config);\n        return source;\n    }\n}\n</code></pre>\n<p>Of course, your SpringSecurity configuration must allow access to the URI with the listed methods. See @Hendy Irawan answer.</p>\n"},{"tags":[],"owner":{"account_id":7301500,"reputation":129,"user_id":5564064,"display_name":"Garik Kalashyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1537267745,"creation_date":1537262751,"answer_id":52383283,"question_id":40418441,"body_markdown":"In many places, I see the answer that needs to add this code:   \r\n\r\n    @Bean\r\n    public FilterRegistrationBean corsFilter() {\r\n       UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n       CorsConfiguration config = new CorsConfiguration();\r\n       config.setAllowCredentials(true);\r\n       config.addAllowedOrigin(&quot;*&quot;);\r\n       config.addAllowedHeader(&quot;*&quot;);\r\n       config.addAllowedMethod(&quot;*&quot;);\r\n       source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n       FilterRegistrationBean bean = new FilterRegistrationBean(new CorsFilter(source));\r\n       bean.setOrder(0); \r\n       return bean;\r\n    }\r\n\r\nbut in my case, it throws an unexpected class type exception. `corsFilter()` bean requires `CorsFilter` type, so I have done this changes and put this definition of bean in my config and all is OK now.\r\n\r\n    @Bean\r\n    public CorsFilter corsFilter() {\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        CorsConfiguration config = new CorsConfiguration();\r\n        config.setAllowCredentials(true);\r\n        config.addAllowedOrigin(&quot;*&quot;);\r\n        config.addAllowedHeader(&quot;*&quot;);\r\n        config.addAllowedMethod(&quot;*&quot;);\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n        return new CorsFilter(source);\r\n    }","title":"Spring security CORS Filter","body":"<p>In many places, I see the answer that needs to add this code:   </p>\n\n<pre><code>@Bean\npublic FilterRegistrationBean corsFilter() {\n   UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n   CorsConfiguration config = new CorsConfiguration();\n   config.setAllowCredentials(true);\n   config.addAllowedOrigin(\"*\");\n   config.addAllowedHeader(\"*\");\n   config.addAllowedMethod(\"*\");\n   source.registerCorsConfiguration(\"/**\", config);\n   FilterRegistrationBean bean = new FilterRegistrationBean(new CorsFilter(source));\n   bean.setOrder(0); \n   return bean;\n}\n</code></pre>\n\n<p>but in my case, it throws an unexpected class type exception. <code>corsFilter()</code> bean requires <code>CorsFilter</code> type, so I have done this changes and put this definition of bean in my config and all is OK now.</p>\n\n<pre><code>@Bean\npublic CorsFilter corsFilter() {\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    CorsConfiguration config = new CorsConfiguration();\n    config.setAllowCredentials(true);\n    config.addAllowedOrigin(\"*\");\n    config.addAllowedHeader(\"*\");\n    config.addAllowedMethod(\"*\");\n    source.registerCorsConfiguration(\"/**\", config);\n    return new CorsFilter(source);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1649677913,"post_id":55270051,"comment_id":126929032,"body_markdown":"I&#39;m getting Compiler error `cannot convert from UrlBasedCorsConfigurationSource to CorsConfigurationSource`","body":"I&#39;m getting Compiler error <code>cannot convert from UrlBasedCorsConfigurationSource to CorsConfigurationSource</code>"}],"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1564249297,"creation_date":1553115411,"answer_id":55270051,"question_id":40418441,"body_markdown":"With Spring Security in Spring Boot 2 to configure CORS globally (e.g. enabled all request for development) you can do:\r\n\r\n    @Bean\r\n    protected CorsConfigurationSource corsConfigurationSource() {\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\r\n        return source;\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.cors()\r\n                .and().authorizeRequests()\r\n                .anyRequest().permitAll()\r\n                .and().csrf().disable();\r\n    }\r\n","title":"Spring security CORS Filter","body":"<p>With Spring Security in Spring Boot 2 to configure CORS globally (e.g. enabled all request for development) you can do:</p>\n\n<pre><code>@Bean\nprotected CorsConfigurationSource corsConfigurationSource() {\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(\"/**\", new CorsConfiguration().applyPermitDefaultValues());\n    return source;\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.cors()\n            .and().authorizeRequests()\n            .anyRequest().permitAll()\n            .and().csrf().disable();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1636168,"reputation":109,"user_id":1512248,"display_name":"mehdi"},"score":0,"creation_date":1658498031,"post_id":59306983,"comment_id":129073211,"body_markdown":"Your solution exactly works. Thank you so much","body":"Your solution exactly works. Thank you so much"},{"owner":{"account_id":1295200,"reputation":74,"user_id":1246437,"display_name":"Bohdan Shulha"},"score":0,"creation_date":1677710234,"post_id":59306983,"comment_id":133394225,"body_markdown":"Works for me with Spring Boot 2.7 + Spring Security. Thanks a lot.","body":"Works for me with Spring Boot 2.7 + Spring Security. Thanks a lot."},{"owner":{"account_id":14698858,"reputation":519,"user_id":10615480,"display_name":"khalid tounoussi"},"score":1,"creation_date":1677934618,"post_id":59306983,"comment_id":133437412,"body_markdown":"It is working wirh spring boot 3","body":"It is working wirh spring boot 3"}],"tags":[],"owner":{"account_id":4924982,"reputation":907,"user_id":3966452,"accept_rate":57,"display_name":"mljohns89"},"comment_count":3,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1576161601,"creation_date":1576161601,"answer_id":59306983,"question_id":40418441,"body_markdown":"There&#39;s 8 hours of my life I will never get back...\r\n\r\nMake sure that you set both Exposed Headers AND Allowed Headers in your CorsConfiguration\r\n\r\n    @Bean\r\n    CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:3000&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTIONS&quot;));\r\n        configuration.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\r\n        configuration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }","title":"Spring security CORS Filter","body":"<p>There's 8 hours of my life I will never get back...</p>\n\n<p>Make sure that you set both Exposed Headers AND Allowed Headers in your CorsConfiguration</p>\n\n<pre><code>@Bean\nCorsConfigurationSource corsConfigurationSource() {\n    CorsConfiguration configuration = new CorsConfiguration();\n    configuration.setAllowedOrigins(Collections.singletonList(\"http://localhost:3000\"));\n    configuration.setAllowedMethods(Arrays.asList(\"GET\",\"POST\", \"PUT\", \"DELETE\", \"PATCH\", \"OPTIONS\"));\n    configuration.setExposedHeaders(Arrays.asList(\"Authorization\", \"content-type\"));\n    configuration.setAllowedHeaders(Arrays.asList(\"Authorization\", \"content-type\"));\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(\"/**\", configuration);\n    return source;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6882690,"reputation":141,"user_id":5288918,"display_name":"Theo Dury"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1585232888,"creation_date":1585232888,"answer_id":60869534,"question_id":40418441,"body_markdown":"This solution unlock me after couple of hours of research  : \r\n\r\nIn the configuration initialize the core() option\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n    http\r\n        .cors()\r\n        .and()\r\n        .etc\r\n    }\r\n\r\n\r\nInitialize your Credential, Origin, Header and Method as your wish in the corsFilter.\r\n\r\n    @Bean\r\n    public CorsFilter corsFilter() {\r\n      UrlBasedCorsConfigurationSource source = new \r\n      UrlBasedCorsConfigurationSource();\r\n      CorsConfiguration config = new CorsConfiguration();\r\n      config.setAllowCredentials(true);\r\n      config.addAllowedOrigin(&quot;*&quot;);\r\n      config.addAllowedHeader(&quot;*&quot;);\r\n      config.addAllowedMethod(&quot;*&quot;);\r\n      source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n      return new CorsFilter(source);\r\n    }\r\n\r\n\r\nI didn&#39;t need to use this class: \r\n\r\n    @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n    }","title":"Spring security CORS Filter","body":"<p>This solution unlock me after couple of hours of research  : </p>\n\n<p>In the configuration initialize the core() option</p>\n\n<pre><code>@Override\npublic void configure(HttpSecurity http) throws Exception {\nhttp\n    .cors()\n    .and()\n    .etc\n}\n</code></pre>\n\n<p>Initialize your Credential, Origin, Header and Method as your wish in the corsFilter.</p>\n\n<pre><code>@Bean\npublic CorsFilter corsFilter() {\n  UrlBasedCorsConfigurationSource source = new \n  UrlBasedCorsConfigurationSource();\n  CorsConfiguration config = new CorsConfiguration();\n  config.setAllowCredentials(true);\n  config.addAllowedOrigin(\"*\");\n  config.addAllowedHeader(\"*\");\n  config.addAllowedMethod(\"*\");\n  source.registerCorsConfiguration(\"/**\", config);\n  return new CorsFilter(source);\n}\n</code></pre>\n\n<p>I didn't need to use this class: </p>\n\n<pre><code>@Bean\npublic CorsConfigurationSource corsConfigurationSource() {\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user11141611"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1605516868,"creation_date":1587600645,"answer_id":61377195,"question_id":40418441,"body_markdown":"Class [`WebMvcConfigurerAdapter`][1] is deprecated as of 5.0 [`WebMvcConfigurer`][2] has default methods and can be implemented directly without the need for this adapter. For this case:\r\n```java\r\n@Configuration\r\n@EnableWebMvc\r\npublic class WebMvcConfig implements WebMvcConfigurer {\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:3000&quot;);\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nSee also: [Same-Site flag for session cookie][3]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html\r\n  [3]: https://stackoverflow.com/a/64128734/11141611","title":"Spring security CORS Filter","body":"<p>Class <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html\" rel=\"noreferrer\"><code>WebMvcConfigurerAdapter</code></a> is deprecated as of 5.0 <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html\" rel=\"noreferrer\"><code>WebMvcConfigurer</code></a> has default methods and can be implemented directly without the need for this adapter. For this case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebMvc\npublic class WebMvcConfig implements WebMvcConfigurer {\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:3000&quot;);\n    }\n}\n</code></pre>\n<hr />\n<p>See also: <a href=\"https://stackoverflow.com/a/64128734/11141611\">Same-Site flag for session cookie</a></p>\n"},{"tags":[],"owner":{"account_id":19787972,"reputation":1,"user_id":14491550,"display_name":"Green Bud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605681785,"creation_date":1603273233,"answer_id":64460812,"question_id":40418441,"body_markdown":"I had a similar problem but with the specific requirement to have the CORS header set from decorators in our endpoints, like this:\r\n```java\r\n@CrossOrigin(origins = &quot;*&quot;, allowCredentials = &quot;true&quot;)\r\n@PostMapping(value = &quot;/login&quot;)\r\n```\r\nOr\r\n```java\r\n@CrossOrigin(origins = &quot;*&quot;)\r\n@GetMapping(value = &quot;/verificationState&quot;)\r\n```\r\nSo simply intercepting the request, setting the CORS header manually and sending 200 back was not an option, because allowCredentials was needed to be true in some cases and wildcards are not allowed then. Sure, a CORS registry would have helped, but since our clients are angular in capacitor on android and iOS, there is no specific domain to register. So the clean way to do - in my opinion - is to pipe preflights directly to the endpoints to let them handle it. I solved it with this:\r\n```java\r\n@Component\r\npublic class PreflightFilter extends OncePerRequestFilter {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(PreflightFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request,\r\n                                    HttpServletResponse response, FilterChain chain)\r\n            throws ServletException, IOException {\r\n\r\n        if (CorsUtils.isPreFlightRequest(request)) {\r\n            logger.info(&quot;Preflight request accepted&quot;);\r\n            SecurityContextHolder.getContext().setAuthentication(createPreflightToken(request));\r\n        }\r\n        chain.doFilter(request, response);\r\n    }\r\n\r\n    private UsernamePasswordAuthenticationToken createPreflightToken(HttpServletRequest request) {\r\n        UserDetails userDetails = new User(&quot;Preflight&quot;, &quot;&quot;,\r\n                true, true, true, true,\r\n                Stream.of(new SimpleGrantedAuthority(&quot;AppUser&quot;)).collect(Collectors.toSet()));\r\n        UsernamePasswordAuthenticationToken preflightToken =\r\n                new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n        preflightToken\r\n                .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n        return preflightToken;\r\n    }\r\n}\r\n```\r\nKeep in mind that the endpoint decorators don&#39;t work like wildcards here as one would expect!\r\n","title":"Spring security CORS Filter","body":"<p>I had a similar problem but with the specific requirement to have the CORS header set from decorators in our endpoints, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin(origins = &quot;*&quot;, allowCredentials = &quot;true&quot;)\n@PostMapping(value = &quot;/login&quot;)\n</code></pre>\n<p>Or</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin(origins = &quot;*&quot;)\n@GetMapping(value = &quot;/verificationState&quot;)\n</code></pre>\n<p>So simply intercepting the request, setting the CORS header manually and sending 200 back was not an option, because allowCredentials was needed to be true in some cases and wildcards are not allowed then. Sure, a CORS registry would have helped, but since our clients are angular in capacitor on android and iOS, there is no specific domain to register. So the clean way to do - in my opinion - is to pipe preflights directly to the endpoints to let them handle it. I solved it with this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class PreflightFilter extends OncePerRequestFilter {\n\n    private static final Logger logger = LoggerFactory.getLogger(PreflightFilter.class);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n\n        if (CorsUtils.isPreFlightRequest(request)) {\n            logger.info(&quot;Preflight request accepted&quot;);\n            SecurityContextHolder.getContext().setAuthentication(createPreflightToken(request));\n        }\n        chain.doFilter(request, response);\n    }\n\n    private UsernamePasswordAuthenticationToken createPreflightToken(HttpServletRequest request) {\n        UserDetails userDetails = new User(&quot;Preflight&quot;, &quot;&quot;,\n                true, true, true, true,\n                Stream.of(new SimpleGrantedAuthority(&quot;AppUser&quot;)).collect(Collectors.toSet()));\n        UsernamePasswordAuthenticationToken preflightToken =\n                new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n        preflightToken\n                .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n        return preflightToken;\n    }\n}\n</code></pre>\n<p>Keep in mind that the endpoint decorators don't work like wildcards here as one would expect!</p>\n"},{"tags":[],"owner":{"account_id":3205334,"reputation":51,"user_id":2706465,"display_name":"Nandom Gusen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1605681770,"creation_date":1605011831,"answer_id":64769087,"question_id":40418441,"body_markdown":"With SpringBoot 2 Spring Security, The code below perfectly resolved Cors issues\r\n```java\r\n@Bean\r\npublic CorsConfigurationSource corsConfigurationSource() {\r\n    CorsConfiguration configuration = new CorsConfiguration();\r\n    configuration.setAllowedOrigins(Collections.singletonList(&quot;*&quot;)); // &lt;-- you may change &quot;*&quot;\r\n    configuration.setAllowedMethods(Arrays.asList(&quot;HEAD&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\r\n    configuration.setAllowCredentials(true);\r\n    configuration.setAllowedHeaders(Arrays.asList(\r\n            &quot;Accept&quot;, &quot;Origin&quot;, &quot;Content-Type&quot;, &quot;Depth&quot;, &quot;User-Agent&quot;, &quot;If-Modified-Since,&quot;,\r\n            &quot;Cache-Control&quot;, &quot;Authorization&quot;, &quot;X-Req&quot;, &quot;X-File-Size&quot;, &quot;X-Requested-With&quot;, &quot;X-File-Name&quot;));\r\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n    source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n    return source;\r\n}\r\n\r\n@Bean\r\npublic FilterRegistrationBean&lt;CorsFilter&gt; corsFilterRegistrationBean() {\r\n    FilterRegistrationBean&lt;CorsFilter&gt; bean = new FilterRegistrationBean&lt;&gt;(new CorsFilter(corsConfigurationSource()));\r\n    bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n    return bean;\r\n}\r\n```\r\n\r\nThen for the WebSecurity Configuration, I added this\r\n```java\r\n@Override\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n    http.headers().frameOptions().disable()\r\n            .and()\r\n            .authorizeRequests()\r\n            .antMatchers(&quot;/oauth/tokeen&quot;).permitAll()\r\n            .antMatchers(HttpMethod.GET, &quot;/&quot;).permitAll()\r\n            .antMatchers(HttpMethod.POST, &quot;/&quot;).permitAll()\r\n            .antMatchers(HttpMethod.PUT, &quot;/&quot;).permitAll()\r\n            .antMatchers(HttpMethod.DELETE, &quot;/**&quot;).permitAll()\r\n            .antMatchers(HttpMethod.OPTIONS, &quot;*&quot;).permitAll()\r\n            .anyRequest().authenticated()\r\n            .and().cors().configurationSource(corsConfigurationSource());\r\n}\r\n```\r\n","title":"Spring security CORS Filter","body":"<p>With SpringBoot 2 Spring Security, The code below perfectly resolved Cors issues</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic CorsConfigurationSource corsConfigurationSource() {\n    CorsConfiguration configuration = new CorsConfiguration();\n    configuration.setAllowedOrigins(Collections.singletonList(&quot;*&quot;)); // &lt;-- you may change &quot;*&quot;\n    configuration.setAllowedMethods(Arrays.asList(&quot;HEAD&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\n    configuration.setAllowCredentials(true);\n    configuration.setAllowedHeaders(Arrays.asList(\n            &quot;Accept&quot;, &quot;Origin&quot;, &quot;Content-Type&quot;, &quot;Depth&quot;, &quot;User-Agent&quot;, &quot;If-Modified-Since,&quot;,\n            &quot;Cache-Control&quot;, &quot;Authorization&quot;, &quot;X-Req&quot;, &quot;X-File-Size&quot;, &quot;X-Requested-With&quot;, &quot;X-File-Name&quot;));\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n    return source;\n}\n\n@Bean\npublic FilterRegistrationBean&lt;CorsFilter&gt; corsFilterRegistrationBean() {\n    FilterRegistrationBean&lt;CorsFilter&gt; bean = new FilterRegistrationBean&lt;&gt;(new CorsFilter(corsConfigurationSource()));\n    bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n    return bean;\n}\n</code></pre>\n<p>Then for the WebSecurity Configuration, I added this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.headers().frameOptions().disable()\n            .and()\n            .authorizeRequests()\n            .antMatchers(&quot;/oauth/tokeen&quot;).permitAll()\n            .antMatchers(HttpMethod.GET, &quot;/&quot;).permitAll()\n            .antMatchers(HttpMethod.POST, &quot;/&quot;).permitAll()\n            .antMatchers(HttpMethod.PUT, &quot;/&quot;).permitAll()\n            .antMatchers(HttpMethod.DELETE, &quot;/**&quot;).permitAll()\n            .antMatchers(HttpMethod.OPTIONS, &quot;*&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and().cors().configurationSource(corsConfigurationSource());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19376019,"reputation":31,"user_id":14168271,"display_name":"rrain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628814367,"creation_date":1628768523,"answer_id":68756823,"question_id":40418441,"body_markdown":"This ALLOWS ANY origin WITH CREDENTIALS for CORS:\r\n\r\n```\r\n@Component\r\npublic class FilterChainConfig implements Filter {\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n        if (servletResponse instanceof HttpServletResponse){\r\n            HttpServletResponse response = (HttpServletResponse)servletResponse;\r\n            HttpServletRequest request = (HttpServletRequest) servletRequest;\r\n            String requestOrigin = request.getHeader(&quot;Origin&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Origin&quot;, requestOrigin);\r\n            response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n            //response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;*&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, DELETE, PUT, OPTIONS, HEAD&quot;);\r\n            response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\r\n            response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n}\r\n```","title":"Spring security CORS Filter","body":"<p>This ALLOWS ANY origin WITH CREDENTIALS for CORS:</p>\n<pre><code>@Component\npublic class FilterChainConfig implements Filter {\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        if (servletResponse instanceof HttpServletResponse){\n            HttpServletResponse response = (HttpServletResponse)servletResponse;\n            HttpServletRequest request = (HttpServletRequest) servletRequest;\n            String requestOrigin = request.getHeader(&quot;Origin&quot;);\n            response.setHeader(&quot;Access-Control-Allow-Origin&quot;, requestOrigin);\n            response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n            //response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;*&quot;);\n            response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, DELETE, PUT, OPTIONS, HEAD&quot;);\n            response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\n            response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);\n            filterChain.doFilter(request, response);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3620019,"reputation":5321,"user_id":3019006,"accept_rate":68,"display_name":"Deb"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637775631,"creation_date":1637775631,"answer_id":70100619,"question_id":40418441,"body_markdown":"To enable CORS Globally you need to make changes in two places, if you are also using spring security with boot:\r\n\r\n**1. Spring Boot:**\r\n\r\n    @Configuration\r\n    public class CorsConfiguration extends WebMvcConfigurationSupport {  \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n        \tregistry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;*&quot;).allowedMethods(&quot;*&quot;)\r\n        \t.allowCredentials(true);\r\n        }\r\n    }\r\nYou can do the same in `WebMvcConfigurerAdapter`, or create bean of `WebMvcConfigurer`.\r\n\r\n**2. Spring Security**\r\n\r\n    @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.cors().and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(HttpMethod.OPTIONS).permitAll() //Permits your preflight request\r\n    }\r\n\r\nThis enables all methods, all paths and origins. So, use with caution and only in development.\r\nWorks as on Spring Boot 2.3.3.RELEASE","title":"Spring security CORS Filter","body":"<p>To enable CORS Globally you need to make changes in two places, if you are also using spring security with boot:</p>\n<p><strong>1. Spring Boot:</strong></p>\n<pre><code>@Configuration\npublic class CorsConfiguration extends WebMvcConfigurationSupport {  \n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;*&quot;).allowedMethods(&quot;*&quot;)\n        .allowCredentials(true);\n    }\n}\n</code></pre>\n<p>You can do the same in <code>WebMvcConfigurerAdapter</code>, or create bean of <code>WebMvcConfigurer</code>.</p>\n<p><strong>2. Spring Security</strong></p>\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and()\n                .authorizeRequests()\n                .antMatchers(HttpMethod.OPTIONS).permitAll() //Permits your preflight request\n}\n</code></pre>\n<p>This enables all methods, all paths and origins. So, use with caution and only in development.\nWorks as on Spring Boot 2.3.3.RELEASE</p>\n"},{"tags":[],"owner":{"account_id":14681960,"reputation":346,"user_id":10603143,"display_name":"Mohsin Ejaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641109795,"creation_date":1641109795,"answer_id":70554397,"question_id":40418441,"body_markdown":"    import org.springframework.web.cors.CorsConfiguration;\r\n    import org.springframework.web.cors.CorsConfigurationSource;\r\n    import org.springframework.web.cors.UrlBasedCorsConfigurationSource;\r\n    \r\n        \r\n        public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n        .....  \r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n          http.authorizeRequests().antMatchers(&quot;/api/**&quot;).authenticated().and().httpBasic().and().csrf().disable();\r\n    \r\n        }\r\n        \r\n        @Bean\r\n        protected CorsConfigurationSource corsConfigurationSource() {\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\r\n            return source;\r\n        }\r\n        ......\r\n        \r\n      }","title":"Spring security CORS Filter","body":"<pre><code>import org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.CorsConfigurationSource;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\n\n    \n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    .....  \n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n      http.authorizeRequests().antMatchers(&quot;/api/**&quot;).authenticated().and().httpBasic().and().csrf().disable();\n\n    }\n    \n    @Bean\n    protected CorsConfigurationSource corsConfigurationSource() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\n        return source;\n    }\n    ......\n    \n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12716296,"reputation":82,"user_id":9238226,"display_name":"Nay Oo Kyaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671300114,"creation_date":1671300114,"answer_id":74836308,"question_id":40418441,"body_markdown":"Use below sample\r\n\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(BasicAuthConfigProperties.class)\r\n    @EnableWebSecurity\r\n\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    private final BasicAuthConfigProperties basicAuth;\r\n\r\n    public SecurityConfiguration(BasicAuthConfigProperties basicAuth) {\r\n        this.basicAuth = basicAuth;\r\n    }\r\n\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.cors();\r\n    }\r\n    }","title":"Spring security CORS Filter","body":"<p>Use below sample</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties(BasicAuthConfigProperties.class)\n@EnableWebSecurity\n\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\nprivate final BasicAuthConfigProperties basicAuth;\n\npublic SecurityConfiguration(BasicAuthConfigProperties basicAuth) {\n    this.basicAuth = basicAuth;\n}\n\nprotected void configure(HttpSecurity http) throws Exception {\n    http.cors();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16425512,"reputation":93,"user_id":11865678,"display_name":"Shakib hasan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695360083,"creation_date":1695360083,"answer_id":77155043,"question_id":40418441,"body_markdown":"After 2 days of research,i fix the problem.I am using spring boot 3.1.2 and spring security 6.1.2 with jwt token.Just add this class in your codebase.\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig {\r\n    \r\n        private static final Long MAX_AGE = 3600L;\r\n        private static final int CORS_FILTER_ORDER = -102;\r\n    \r\n        @Bean\r\n        public FilterRegistrationBean corsFilter() {\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            CorsConfiguration config = new CorsConfiguration();\r\n            config.setAllowCredentials(true);\r\n            config.addAllowedOrigin(&quot;http://localhost:5173&quot;);\r\n            config.setAllowedHeaders(Arrays.asList(\r\n                    HttpHeaders.AUTHORIZATION,\r\n                    HttpHeaders.CONTENT_TYPE,\r\n                    HttpHeaders.ACCEPT));\r\n            config.setAllowedMethods(Arrays.asList(\r\n                    HttpMethod.OPTIONS.name(),\r\n                    HttpMethod.GET.name(),\r\n                    HttpMethod.POST.name(),\r\n                    HttpMethod.PUT.name(),\r\n                    HttpMethod.DELETE.name()));\r\n            config.setMaxAge(MAX_AGE);\r\n            source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n            FilterRegistrationBean bean = new FilterRegistrationBean(new CorsFilter(source));\r\n    \r\n            // should be set order to -100 because we need to CorsFilter before SpringSecurityFilter\r\n            bean.setOrder(CORS_FILTER_ORDER);\r\n            return bean;\r\n        }\r\n    }\r\nDo not use * on  config.addAllowedOrigin() method argument.Explicitly define the domain you need to allow.","title":"Spring security CORS Filter","body":"<p>After 2 days of research,i fix the problem.I am using spring boot 3.1.2 and spring security 6.1.2 with jwt token.Just add this class in your codebase.</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig {\n\n    private static final Long MAX_AGE = 3600L;\n    private static final int CORS_FILTER_ORDER = -102;\n\n    @Bean\n    public FilterRegistrationBean corsFilter() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin(&quot;http://localhost:5173&quot;);\n        config.setAllowedHeaders(Arrays.asList(\n                HttpHeaders.AUTHORIZATION,\n                HttpHeaders.CONTENT_TYPE,\n                HttpHeaders.ACCEPT));\n        config.setAllowedMethods(Arrays.asList(\n                HttpMethod.OPTIONS.name(),\n                HttpMethod.GET.name(),\n                HttpMethod.POST.name(),\n                HttpMethod.PUT.name(),\n                HttpMethod.DELETE.name()));\n        config.setMaxAge(MAX_AGE);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        FilterRegistrationBean bean = new FilterRegistrationBean(new CorsFilter(source));\n\n        // should be set order to -100 because we need to CorsFilter before SpringSecurityFilter\n        bean.setOrder(CORS_FILTER_ORDER);\n        return bean;\n    }\n}\n</code></pre>\n<p>Do not use * on  config.addAllowedOrigin() method argument.Explicitly define the domain you need to allow.</p>\n"}],"owner":{"account_id":9578797,"reputation":1089,"user_id":7113955,"accept_rate":50,"display_name":"Mace"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246630,"favorite_count":0,"down_vote_count":0,"up_vote_count":67,"accepted_answer_id":40419969,"answer_count":18,"score":67,"last_activity_date":1695360083,"creation_date":1478249212,"question_id":40418441,"body_markdown":"We added `Spring Security` to our existing project. \n\nFrom this moment on we get a 401 `No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource` error from the our server. \n\nThat&#39;s because no `Access-Control-Allow-Origin` header is attached to the response. To fix this we added our own filter which is in the `Filter` chain before the logout filter, but the filter does not apply for our requests.\n\nOur Error:\n\n&gt; XMLHttpRequest cannot load `http://localhost:8080/getKunden`. No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. Origin `http://localhost:3000` is therefore not allowed access. The response had HTTP status code 401.\n\nOur Security configuration:\n\n    @EnableWebSecurity\n    @Configuration\n    @ComponentScan(&quot;com.company.praktikant&quot;)\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private MyFilter filter;\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        final CorsConfiguration config = new CorsConfiguration();\n\n        config.addAllowedOrigin(&quot;*&quot;);\n        config.addAllowedHeader(&quot;*&quot;);\n        config.addAllowedMethod(&quot;GET&quot;);\n        config.addAllowedMethod(&quot;PUT&quot;);\n        config.addAllowedMethod(&quot;POST&quot;);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        http.addFilterBefore(new MyFilter(), LogoutFilter.class).authorizeRequests()\n                .antMatchers(HttpMethod.OPTIONS, &quot;/*&quot;).permitAll();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n    }\n    }\n\nOur filter\n\n    @Component\n    public class MyFilter extends OncePerRequestFilter {\n\n    @Override\n    public void destroy() {\n\n    }\n\n    private String getAllowedDomainsRegex() {\n        return &quot;individual / customized Regex&quot;;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        final String origin = &quot;http://localhost:3000&quot;;\n\n        response.addHeader(&quot;Access-Control-Allow-Origin&quot;, origin);\n        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS&quot;);\n        response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n        response.setHeader(&quot;Access-Control-Allow-Headers&quot;,\n                &quot;content-type, x-gwt-module-base, x-gwt-permutation, clientid, longpush&quot;);\n\n        filterChain.doFilter(request, response);\n\n    }\n    }\n\nOur Application\n\n    @SpringBootApplication\n    public class Application {\n    public static void main(String[] args) {\n        final ApplicationContext ctx = SpringApplication.run(Application.class, args);\n        final AnnotationConfigApplicationContext annotationConfigApplicationContext = new AnnotationConfigApplicationContext();\n        annotationConfigApplicationContext.register(CORSConfig.class);\n        annotationConfigApplicationContext.refresh();\n    }\n    }\n\nOur filter is registered from spring-boot:\n\n&gt; 2016-11-04 09:19:51.494  INFO 9704 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;myFilter&#39; to: [/*]\n\n\nOur generated filterchain:\n\n&gt; 2016-11-04 09:19:52.729  INFO 9704 --- [ost-startStop-1] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: org.springframework.security.web.util.matcher.AnyRequestMatcher@1, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d8c5a8a, org.springframework.security.web.context.SecurityContextPersistenceFilter@7d6938f, org.springframework.security.web.header.HeaderWriterFilter@72aa89c, org.springframework.security.web.csrf.CsrfFilter@4af4df11, com.company.praktikant.MyFilter@5ba65db2, org.springframework.security.web.authentication.logout.LogoutFilter@2330834f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@396532d1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4fc0f1a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2357120f, org.springframework.security.web.session.SessionManagementFilter@10867bfb, org.springframework.security.web.access.ExceptionTranslationFilter@4b8bf1fb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@42063cf1]\n\nThe Response: \n[Response headers][1]\n\n\n  [1]: https://i.stack.imgur.com/tw8pd.png\n\nWe tried the solution from spring as well but it didn&#39;t work! The annotation @CrossOrigin in our controller didn&#39;t help either.\n\n\n# Edit 1:\nTried the solution from @Piotr Sołtysiak. \nThe cors filter isn&#39;t listed in the generated filter chain and we still get the same error.\n\n&gt; 2016-11-04 10:22:49.881  INFO 8820 --- [ost-startStop-1] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: org.springframework.security.web.util.matcher.AnyRequestMatcher@1, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c191377, org.springframework.security.web.context.SecurityContextPersistenceFilter@28bad32a, org.springframework.security.web.header.HeaderWriterFilter@3c3ec668, org.springframework.security.web.csrf.CsrfFilter@288460dd, org.springframework.security.web.authentication.logout.LogoutFilter@1c9cd096, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3990c331, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1e8d4ac1, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2d61d2a4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@380d9a9b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@abf2de3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a5c161b, org.springframework.security.web.session.SessionManagementFilter@3c1fd3e5, org.springframework.security.web.access.ExceptionTranslationFilter@3d7055ef, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d27725a]\n\nBtw we are using spring-security version 4.1.3.!","title":"Spring security CORS Filter","body":"<p>We added <code>Spring Security</code> to our existing project.</p>\n<p>From this moment on we get a 401 <code>No 'Access-Control-Allow-Origin' header is present on the requested resource</code> error from the our server.</p>\n<p>That's because no <code>Access-Control-Allow-Origin</code> header is attached to the response. To fix this we added our own filter which is in the <code>Filter</code> chain before the logout filter, but the filter does not apply for our requests.</p>\n<p>Our Error:</p>\n<blockquote>\n<p>XMLHttpRequest cannot load <code>http://localhost:8080/getKunden</code>. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin <code>http://localhost:3000</code> is therefore not allowed access. The response had HTTP status code 401.</p>\n</blockquote>\n<p>Our Security configuration:</p>\n<pre><code>@EnableWebSecurity\n@Configuration\n@ComponentScan(&quot;com.company.praktikant&quot;)\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n@Autowired\nprivate MyFilter filter;\n\n@Override\npublic void configure(HttpSecurity http) throws Exception {\n    final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    final CorsConfiguration config = new CorsConfiguration();\n\n    config.addAllowedOrigin(&quot;*&quot;);\n    config.addAllowedHeader(&quot;*&quot;);\n    config.addAllowedMethod(&quot;GET&quot;);\n    config.addAllowedMethod(&quot;PUT&quot;);\n    config.addAllowedMethod(&quot;POST&quot;);\n    source.registerCorsConfiguration(&quot;/**&quot;, config);\n    http.addFilterBefore(new MyFilter(), LogoutFilter.class).authorizeRequests()\n            .antMatchers(HttpMethod.OPTIONS, &quot;/*&quot;).permitAll();\n}\n\n@Autowired\npublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n}\n}\n</code></pre>\n<p>Our filter</p>\n<pre><code>@Component\npublic class MyFilter extends OncePerRequestFilter {\n\n@Override\npublic void destroy() {\n\n}\n\nprivate String getAllowedDomainsRegex() {\n    return &quot;individual / customized Regex&quot;;\n}\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n        throws ServletException, IOException {\n\n    final String origin = &quot;http://localhost:3000&quot;;\n\n    response.addHeader(&quot;Access-Control-Allow-Origin&quot;, origin);\n    response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Headers&quot;,\n            &quot;content-type, x-gwt-module-base, x-gwt-permutation, clientid, longpush&quot;);\n\n    filterChain.doFilter(request, response);\n\n}\n}\n</code></pre>\n<p>Our Application</p>\n<pre><code>@SpringBootApplication\npublic class Application {\npublic static void main(String[] args) {\n    final ApplicationContext ctx = SpringApplication.run(Application.class, args);\n    final AnnotationConfigApplicationContext annotationConfigApplicationContext = new AnnotationConfigApplicationContext();\n    annotationConfigApplicationContext.register(CORSConfig.class);\n    annotationConfigApplicationContext.refresh();\n}\n}\n</code></pre>\n<p>Our filter is registered from spring-boot:</p>\n<blockquote>\n<p>2016-11-04 09:19:51.494  INFO 9704 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'myFilter' to: [/*]</p>\n</blockquote>\n<p>Our generated filterchain:</p>\n<blockquote>\n<p>2016-11-04 09:19:52.729  INFO 9704 --- [ost-startStop-1] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: org.springframework.security.web.util.matcher.AnyRequestMatcher@1, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d8c5a8a, org.springframework.security.web.context.SecurityContextPersistenceFilter@7d6938f, org.springframework.security.web.header.HeaderWriterFilter@72aa89c, org.springframework.security.web.csrf.CsrfFilter@4af4df11, com.company.praktikant.MyFilter@5ba65db2, org.springframework.security.web.authentication.logout.LogoutFilter@2330834f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@396532d1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4fc0f1a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2357120f, org.springframework.security.web.session.SessionManagementFilter@10867bfb, org.springframework.security.web.access.ExceptionTranslationFilter@4b8bf1fb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@42063cf1]</p>\n</blockquote>\n<p>The Response:\n<a href=\"https://i.stack.imgur.com/tw8pd.png\" rel=\"noreferrer\">Response headers</a></p>\n<p>We tried the solution from spring as well but it didn't work! The annotation @CrossOrigin in our controller didn't help either.</p>\n<h1>Edit 1:</h1>\n<p>Tried the solution from @Piotr Sołtysiak.\nThe cors filter isn't listed in the generated filter chain and we still get the same error.</p>\n<blockquote>\n<p>2016-11-04 10:22:49.881  INFO 8820 --- [ost-startStop-1] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: org.springframework.security.web.util.matcher.AnyRequestMatcher@1, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c191377, org.springframework.security.web.context.SecurityContextPersistenceFilter@28bad32a, org.springframework.security.web.header.HeaderWriterFilter@3c3ec668, org.springframework.security.web.csrf.CsrfFilter@288460dd, org.springframework.security.web.authentication.logout.LogoutFilter@1c9cd096, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3990c331, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1e8d4ac1, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2d61d2a4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@380d9a9b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@abf2de3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a5c161b, org.springframework.security.web.session.SessionManagementFilter@3c1fd3e5, org.springframework.security.web.access.ExceptionTranslationFilter@3d7055ef, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d27725a]</p>\n</blockquote>\n<p>Btw we are using spring-security version 4.1.3.!</p>\n"},{"tags":["java","error-handling"],"answers":[{"comments":[{"owner":{"account_id":5214553,"reputation":508,"user_id":4169943,"accept_rate":81,"display_name":"user1993"},"score":21,"creation_date":1572836892,"post_id":53142252,"comment_id":103672211,"body_markdown":"why does Eclipse force us to create one in the first place?","body":"why does Eclipse force us to create one in the first place?"},{"owner":{"account_id":1494810,"reputation":8228,"user_id":1401019,"accept_rate":79,"display_name":"Sundararaj Govindasamy"},"score":31,"creation_date":1578070446,"post_id":53142252,"comment_id":105330983,"body_markdown":"upvoted, Even though this solution works, small explanation of _why_ to delete it would be helpful.","body":"upvoted, Even though this solution works, small explanation of <i>why</i> to delete it would be helpful."},{"owner":{"account_id":10357854,"reputation":417,"user_id":7639174,"display_name":"greendino"},"score":0,"creation_date":1649465500,"post_id":53142252,"comment_id":126890263,"body_markdown":"i cannot delete it","body":"i cannot delete it"}],"tags":[],"owner":{"account_id":14207789,"reputation":2764,"user_id":10263853,"display_name":"Morpheus"},"comment_count":3,"down_vote_count":1,"up_vote_count":272,"is_accepted":true,"score":271,"last_activity_date":1541352108,"creation_date":1541344481,"answer_id":53142252,"question_id":53033899,"body_markdown":"Just delete *module-info.java* at your Project Explorer tab.","title":"must declare a named package eclipse because this compilation unit is associated to the named module","body":"<p>Just delete <em>module-info.java</em> at your Project Explorer tab.</p>\n"},{"tags":[],"owner":{"account_id":14394715,"reputation":861,"user_id":10421473,"display_name":"reben"},"comment_count":0,"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1558271697,"creation_date":1558271697,"answer_id":56208170,"question_id":53033899,"body_markdown":"The &quot;delete module-info.java at your Project Explorer tab&quot; answer is the easiest and most straightforward answer, but\r\n\r\nfor those who would want a _little_ more understanding or control of what&#39;s happening, the following alternate methods may be desirable;\r\n\r\n- make an ever so slightly more realistic application; com.YourCompany.etc\r\nor just com.HelloWorld (Project name: com.HelloWorld and class name: HelloWorld)\r\n\r\nor\r\n\r\n- when creating the java project; when in the Create Java Project dialog, don&#39;t choose Finish but Next, and deselect Create module-info.java file\r\n","title":"must declare a named package eclipse because this compilation unit is associated to the named module","body":"<p>The \"delete module-info.java at your Project Explorer tab\" answer is the easiest and most straightforward answer, but</p>\n\n<p>for those who would want a <em>little</em> more understanding or control of what's happening, the following alternate methods may be desirable;</p>\n\n<ul>\n<li>make an ever so slightly more realistic application; com.YourCompany.etc\nor just com.HelloWorld (Project name: com.HelloWorld and class name: HelloWorld)</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>when creating the java project; when in the Create Java Project dialog, don't choose Finish but Next, and deselect Create module-info.java file</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":3446000,"reputation":435,"user_id":2886813,"display_name":"Samwise Ganges"},"score":1,"creation_date":1689185798,"post_id":64045250,"comment_id":135179182,"body_markdown":"This should be the accepted answer. It is the &quot;right way&quot; to fix this issue and thoroughly explains why it happens","body":"This should be the accepted answer. It is the &quot;right way&quot; to fix this issue and thoroughly explains why it happens"}],"tags":[],"owner":{"account_id":10307639,"reputation":1329,"user_id":7604395,"display_name":"Deepak Gautam"},"comment_count":1,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1600945923,"creation_date":1600945923,"answer_id":64045250,"question_id":53033899,"body_markdown":"**Reason of the error:** Package name left blank while creating a class. This make use of default package. Thus causes this error.\r\n\r\n**Quick fix:** \r\n\r\n 1. Create a package eg. `helloWorld` inside the `src` folder.\r\n 2. Move `helloWorld.java` file in that package. Just drag and drop on\r\n    the package. Error should disappear. \r\n\r\n\r\n**Explanation:**\r\n - My Eclipse version: *2020-09 (4.17.0)*\r\n - My Java version: *Java 15, 2020-09-15*\r\n \r\nLatest version of *Eclipse* required *java11* or above. The `module` feature is introduced in java9 and onward. It was proposed in 2005 for Java7 but later suspended. Java is object oriented based. And module is the moduler approach which can be seen in language like C. It was harder to implement it, due to which it took long time for the release. **Source:** [Understanding Java 9 Modules][1]\r\n\r\n\r\n**W**hen you create a new project in Eclipse then by default module feature is selected. And in Eclipse-2020-09-R, a pop-up appears which ask for creation of `module-info.java` file. If you select `don&#39;t create` then `module-info.java` will not create and your project will free from this issue.\r\n\r\nBest practice is while crating project, after giving project name. Click on `next` button instead of `finish`. On next page at the bottom it ask for creation of `module-info.java` file. Select or deselect as per need.\r\n\r\n**If selected:** (by default) click on `finish` button and give name for module. Now while creating a class **don&#39;t forget to give package name**. Whenever you create a class just give package name. Any name, just don&#39;t left it blank. \r\n\r\n**If deselect:** No issue \r\n\r\n\r\n  [1]: https://www.oracle.com/corporate/features/understanding-java-9-modules.html","title":"must declare a named package eclipse because this compilation unit is associated to the named module","body":"<p><strong>Reason of the error:</strong> Package name left blank while creating a class. This make use of default package. Thus causes this error.</p>\n<p><strong>Quick fix:</strong></p>\n<ol>\n<li>Create a package eg. <code>helloWorld</code> inside the <code>src</code> folder.</li>\n<li>Move <code>helloWorld.java</code> file in that package. Just drag and drop on\nthe package. Error should disappear.</li>\n</ol>\n<p><strong>Explanation:</strong></p>\n<ul>\n<li>My Eclipse version: <em>2020-09 (4.17.0)</em></li>\n<li>My Java version: <em>Java 15, 2020-09-15</em></li>\n</ul>\n<p>Latest version of <em>Eclipse</em> required <em>java11</em> or above. The <code>module</code> feature is introduced in java9 and onward. It was proposed in 2005 for Java7 but later suspended. Java is object oriented based. And module is the moduler approach which can be seen in language like C. It was harder to implement it, due to which it took long time for the release. <strong>Source:</strong> <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"noreferrer\">Understanding Java 9 Modules</a></p>\n<p><strong>W</strong>hen you create a new project in Eclipse then by default module feature is selected. And in Eclipse-2020-09-R, a pop-up appears which ask for creation of <code>module-info.java</code> file. If you select <code>don't create</code> then <code>module-info.java</code> will not create and your project will free from this issue.</p>\n<p>Best practice is while crating project, after giving project name. Click on <code>next</code> button instead of <code>finish</code>. On next page at the bottom it ask for creation of <code>module-info.java</code> file. Select or deselect as per need.</p>\n<p><strong>If selected:</strong> (by default) click on <code>finish</code> button and give name for module. Now while creating a class <strong>don't forget to give package name</strong>. Whenever you create a class just give package name. Any name, just don't left it blank.</p>\n<p><strong>If deselect:</strong> No issue</p>\n"}],"owner":{"account_id":13853253,"reputation":1515,"user_id":10000669,"display_name":"J. Doe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345951,"favorite_count":0,"down_vote_count":1,"up_vote_count":118,"accepted_answer_id":53142252,"answer_count":3,"score":117,"last_activity_date":1695360007,"creation_date":1540745511,"question_id":53033899,"body_markdown":"I just downloaded eclipse for Java Yesterday but when I was trying to make my first program, I kept on getting this error: \r\n    \r\n&gt; must declare a named package eclipse because this compilation unit is associated to the named module x. \r\n\r\nHow do I fix this?","title":"must declare a named package eclipse because this compilation unit is associated to the named module","body":"<p>I just downloaded eclipse for Java Yesterday but when I was trying to make my first program, I kept on getting this error:</p>\n<blockquote>\n<p>must declare a named package eclipse because this compilation unit is associated to the named module x.</p>\n</blockquote>\n<p>How do I fix this?</p>\n"},{"tags":["java","json","httpurlconnection"],"answers":[{"comments":[{"owner":{"account_id":4110511,"reputation":301,"user_id":3373408,"accept_rate":58,"display_name":"dmaprasad"},"score":0,"creation_date":1465983167,"post_id":37831434,"comment_id":63124593,"body_markdown":"Thank u very much. Adding &quot;Accept: application/json&quot; worked. :)","body":"Thank u very much. Adding &quot;Accept: application/json&quot; worked. :)"},{"owner":{"account_id":10493113,"reputation":957,"user_id":7734270,"accept_rate":48,"display_name":"dice2011"},"score":0,"creation_date":1646743038,"post_id":37831434,"comment_id":126194681,"body_markdown":"thank you for you answer, it helped me a lot!","body":"thank you for you answer, it helped me a lot!"}],"tags":[],"owner":{"account_id":7971290,"reputation":321,"user_id":6015878,"display_name":"Bruce H"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1465982943,"creation_date":1465982943,"answer_id":37831434,"question_id":37831025,"body_markdown":"Perhaps try sending the header Accept: application/json\r\n\r\nIf that doesn&#39;t work, then review the documentation for the API and see if there&#39;s something else you should be sending to return json.","title":"Getting HTML response instead of Json response","body":"<p>Perhaps try sending the header Accept: application/json</p>\n\n<p>If that doesn't work, then review the documentation for the API and see if there's something else you should be sending to return json.</p>\n"},{"comments":[{"owner":{"account_id":9790657,"reputation":2283,"user_id":7255359,"accept_rate":80,"display_name":"Sudheesh Singanamalla"},"score":2,"creation_date":1517994904,"post_id":48659679,"comment_id":84317166,"body_markdown":"While this answer may be correct, it doesn&#39;t explain &quot;Why&quot; the code would solve the issue for a reader who might reach here later facing a similar problem. Please describe the answer clearly.","body":"While this answer may be correct, it doesn&#39;t explain &quot;Why&quot; the code would solve the issue for a reader who might reach here later facing a similar problem. Please describe the answer clearly."}],"tags":[],"owner":{"account_id":10638952,"reputation":11,"user_id":7834737,"display_name":"Shubham gosain"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1517997087,"creation_date":1517994205,"answer_id":48659679,"question_id":37831025,"body_markdown":"For `java`\r\n\r\nSet The Request Property as the following:\r\n\r\n    con.setRequestProperty(&quot;Accept&quot;,&quot;application/json&quot;)\r\n\r\nIt will solve the issue you are facing.","title":"Getting HTML response instead of Json response","body":"<p>For <code>java</code></p>\n\n<p>Set The Request Property as the following:</p>\n\n<pre><code>con.setRequestProperty(\"Accept\",\"application/json\")\n</code></pre>\n\n<p>It will solve the issue you are facing.</p>\n"},{"tags":[],"owner":{"account_id":19685252,"reputation":11,"user_id":14411337,"display_name":"David DiRico"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695359757,"creation_date":1695359757,"answer_id":77155029,"question_id":37831025,"body_markdown":"If anyone stops here, often times receiving HTML as a response is due to `not calling a valid request method to your API in your fetch requests`","title":"Getting HTML response instead of Json response","body":"<p>If anyone stops here, often times receiving HTML as a response is due to <code>not calling a valid request method to your API in your fetch requests</code></p>\n"}],"owner":{"account_id":4110511,"reputation":301,"user_id":3373408,"accept_rate":58,"display_name":"dmaprasad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15320,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":37831434,"answer_count":3,"score":4,"last_activity_date":1695359757,"creation_date":1465981856,"question_id":37831025,"body_markdown":"I&#39;m getting HTML response instead of JSON response. I&#39;m using following code and I&#39;m receiving HTML response as bf.readLine(). Is there any issue in following code or is this API issue? \r\n\r\n    String uri = &quot;http://192.168.77.6/Ivr_ABN_API/?id=&quot; + mobile;\r\n\t\tURL url;\r\n\t\tGson json = null;\r\n\t\ttry {\r\n\t\t\turl = new URL(uri);\r\n\t\t\tjson = new Gson();\r\n\r\n\t\t\tHttpURLConnection connection;\r\n\t\t\taccess_token = db.getAccessTokenFromDB();\r\n\t\t\tconnection = (HttpURLConnection) url.openConnection();\r\n\t\t\tconnection.setRequestMethod(&quot;GET&quot;);\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;URL:&quot; + uri);\r\n\t\t\t\r\n\t\t\tconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\t\t\tint status = connection.getResponseCode();\r\n\t\t\tresCode = Integer.toString(status);\r\n\t\t\tSystem.out.println(&quot;status is &quot; + status);\r\n\t\t\tInputStream in = connection.getInputStream();\r\n\t\t\tSystem.out.println(&quot;inputStreamer &quot; + in);\r\n\t\t\tBufferedReader bf = new BufferedReader(new InputStreamReader(\r\n\t\t\t\t\tconnection.getInputStream()));\r\n\t\t\tSystem.out.println(&quot;bf.readLine() - &quot; + bf.readLine());\r\n\r\n\t\t\twhile ((output = bf.readLine()) != null) {\r\n\t\t\t\tJSONObject obj = new JSONObject(output);\r\n\t\t\t\tSystem.out.println(&quot;output is &quot; + output);\r\n\t\t\t\tresCode = obj.getString(&quot;resCode&quot;);\r\n\t\t\t\tresDesc = obj.getString(&quot;COUNT&quot;);\r\n\r\n\t\t\t}","title":"Getting HTML response instead of Json response","body":"<p>I'm getting HTML response instead of JSON response. I'm using following code and I'm receiving HTML response as bf.readLine(). Is there any issue in following code or is this API issue? </p>\n\n<pre><code>String uri = \"http://192.168.77.6/Ivr_ABN_API/?id=\" + mobile;\n    URL url;\n    Gson json = null;\n    try {\n        url = new URL(uri);\n        json = new Gson();\n\n        HttpURLConnection connection;\n        access_token = db.getAccessTokenFromDB();\n        connection = (HttpURLConnection) url.openConnection();\n        connection.setRequestMethod(\"GET\");\n\n        System.out.println(\"URL:\" + uri);\n\n        connection.setRequestProperty(\"Content-Type\", \"application/json\");\n        int status = connection.getResponseCode();\n        resCode = Integer.toString(status);\n        System.out.println(\"status is \" + status);\n        InputStream in = connection.getInputStream();\n        System.out.println(\"inputStreamer \" + in);\n        BufferedReader bf = new BufferedReader(new InputStreamReader(\n                connection.getInputStream()));\n        System.out.println(\"bf.readLine() - \" + bf.readLine());\n\n        while ((output = bf.readLine()) != null) {\n            JSONObject obj = new JSONObject(output);\n            System.out.println(\"output is \" + output);\n            resCode = obj.getString(\"resCode\");\n            resDesc = obj.getString(\"COUNT\");\n\n        }\n</code></pre>\n"},{"tags":["java","linux","spring-boot"],"comments":[{"owner":{"account_id":5814796,"reputation":268,"user_id":13027493,"display_name":"rav"},"score":0,"creation_date":1695271478,"post_id":77147190,"comment_id":136002720,"body_markdown":"Have you added the Spring JDBC dependency in pom.xml?","body":"Have you added the Spring JDBC dependency in pom.xml?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695285551,"post_id":77147190,"comment_id":136004855,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":26389799,"reputation":1,"user_id":20041820,"display_name":"Vignesh"},"score":0,"creation_date":1695359238,"post_id":77147190,"comment_id":136016437,"body_markdown":"Yes , i have added jdbc in my pom.xml","body":"Yes , i have added jdbc in my pom.xml"}],"owner":{"account_id":26389799,"reputation":1,"user_id":20041820,"display_name":"Vignesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695359326,"creation_date":1695270204,"question_id":77147190,"body_markdown":"Error starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-09-21T09:51:20.646+05:30 ERROR 18538 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField jdbcTemplate in com.snigdha.snigdhahospitals.controller required a bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n        - @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; in your configuration.\r\n\r\n\r\nI tried to run the springboot application after adding the JDBC and application failed to start\r\n\r\n\r\n\r\npom.xml\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.snigdha&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;snigdhahospitals&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;snigdhahospitals&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;20&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.26&lt;/version&gt;\r\n\t\t&lt;/dependency&gt; --&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;!-- &lt;build&gt;\r\n    \t&lt;plugins&gt;\r\n        \t&lt;plugin&gt;\r\n           \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            \t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        \t    \t&lt;executions&gt;\r\n            \t    \t\t&lt;execution&gt;\r\n                \t    \t\t&lt;goals&gt;\r\n                    \t    \t\t&lt;goal&gt;repackage&lt;/goal&gt;\r\n                    \t\t\t&lt;/goals&gt;\r\n                \t\t\t&lt;/execution&gt;\r\n            \t\t&lt;/executions&gt;\r\n     \t\t&lt;/plugin&gt;\r\n    \t&lt;/plugins&gt;\r\n\t&lt;/build&gt; --&gt;\r\n\r\n&lt;/project&gt;\r\n\r\ncontroller.java\r\n\r\n    package com.snigdha.snigdhahospitals;\r\n    \r\n    // import javax.swing.tree.RowMapper;\r\n    \r\n    // import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    // import javax.sql.DataSource;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    // import org.springframework.context.annotation.Bean;\r\n    // import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    // import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.jdbc.core.BeanPropertyRowMapper;\r\n    import org.springframework.jdbc.core.JdbcTemplate;\r\n    // import org.springframework.jdbc.datasource.DriverManagerDataSource;\r\n    // import org.springframework.jdbc.core.RowMapper;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    // import org.springframework.stereotype.Controller;\r\n    // import org.springframework.web.bind.annotation.RequestMapping;\r\n    // import org.springframework.web.bind.annotation.ResponseBody;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    // import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    import com.snigdha.snigdhahospitals.model.Doctor;\r\n    \r\n    // import ch.qos.logback.core.model.Model;\r\n    \r\n    \r\n    \r\n    @RestController\r\n    public class controller {\r\n    \r\n    \r\n        @Autowired\r\n        JdbcTemplate jdbcTemplate;\r\n    \r\n        @GetMapping(&quot;/d&quot;)\r\n        public ResponseEntity&lt;List&lt;Doctor&gt;&gt; getDoctors(){\r\n            List&lt;Doctor&gt; doctors = jdbcTemplate.query(&quot;SELECT * FROM DOCTOR&quot;, new BeanPropertyRowMapper&lt;Doctor&gt;(Doctor.class));\r\n            return new ResponseEntity&lt;&gt;(doctors,HttpStatus.OK);\r\n        }\r\n        \r\n    \r\n        @RequestMapping(&quot;/&quot;)\r\n        public ModelAndView home(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;home&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/home&quot;)\r\n        public ModelAndView homepage(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;home&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/doctors&quot;)\r\n        public ModelAndView doctors(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;doctors&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/login&quot;)\r\n        public ModelAndView login(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;login&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/signup&quot;)\r\n        public ModelAndView signup(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;signup&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/appointments&quot;)\r\n        public ModelAndView appointments(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;appointments&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/contactus&quot;)\r\n        public ModelAndView contactus(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;contactus&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/grievance&quot;)\r\n        public ModelAndView grievance(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;grievance&quot;);\r\n            return mv;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/aboutus&quot;)\r\n        public ModelAndView aboutus(){\r\n            ModelAndView mv = new ModelAndView();\r\n            mv.setViewName(&quot;aboutus&quot;);\r\n            return mv;\r\n        }\r\n        \r\n    }\r\n    \r\n     \r\n\r\n\r\n\r\n","title":"ERROR 18538 --- [ restartedMain] o.s.b.d.LoggingFailureAnalysisReporter :","body":"<p>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-09-21T09:51:20.646+05:30 ERROR 18538 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   :</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Field jdbcTemplate in com.snigdha.snigdhahospitals.controller required a bean of type 'org.springframework.jdbc.core.JdbcTemplate' that could not be found.</p>\n<p>The injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'org.springframework.jdbc.core.JdbcTemplate' in your configuration.</p>\n<p>I tried to run the springboot application after adding the JDBC and application failed to start</p>\n<p>pom.xml</p>\n\n<p>\n4.0.0\n\norg.springframework.boot\nspring-boot-starter-parent\n3.1.3\n \n\ncom.snigdha\nsnigdhahospitals\n0.0.1-SNAPSHOT\nsnigdhahospitals\nDemo project for Spring Boot\n\n&lt;java.version&gt;20&lt;/java.version&gt;\n\n\n\norg.springframework.boot\nspring-boot-starter-data-jdbc\n\n\norg.springframework.boot\nspring-boot-starter-jdbc\n\n\norg.springframework.boot\nspring-boot-starter-oauth2-client\n\n\norg.springframework.boot\nspring-boot-starter-web\n\n\norg.springframework.boot\nspring-boot-starter-webflux\n</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n        &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.26&lt;/version&gt;\n    &lt;/dependency&gt; --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                    &lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;!-- &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;repackage&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt; --&gt;\n</code></pre>\n\n<p>controller.java</p>\n<pre><code>package com.snigdha.snigdhahospitals;\n\n// import javax.swing.tree.RowMapper;\n\n// import java.util.ArrayList;\nimport java.util.List;\n\n// import javax.sql.DataSource;\n\nimport org.springframework.beans.factory.annotation.Autowired;\n// import org.springframework.context.annotation.Bean;\n// import org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\n// import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.BeanPropertyRowMapper;\nimport org.springframework.jdbc.core.JdbcTemplate;\n// import org.springframework.jdbc.datasource.DriverManagerDataSource;\n// import org.springframework.jdbc.core.RowMapper;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n// import org.springframework.stereotype.Controller;\n// import org.springframework.web.bind.annotation.RequestMapping;\n// import org.springframework.web.bind.annotation.ResponseBody;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.servlet.ModelAndView;\n// import org.springframework.web.servlet.ModelAndView;\n\nimport com.snigdha.snigdhahospitals.model.Doctor;\n\n// import ch.qos.logback.core.model.Model;\n\n\n\n@RestController\npublic class controller {\n\n\n    @Autowired\n    JdbcTemplate jdbcTemplate;\n\n    @GetMapping(&quot;/d&quot;)\n    public ResponseEntity&lt;List&lt;Doctor&gt;&gt; getDoctors(){\n        List&lt;Doctor&gt; doctors = jdbcTemplate.query(&quot;SELECT * FROM DOCTOR&quot;, new BeanPropertyRowMapper&lt;Doctor&gt;(Doctor.class));\n        return new ResponseEntity&lt;&gt;(doctors,HttpStatus.OK);\n    }\n    \n\n    @RequestMapping(&quot;/&quot;)\n    public ModelAndView home(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;home&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/home&quot;)\n    public ModelAndView homepage(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;home&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/doctors&quot;)\n    public ModelAndView doctors(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;doctors&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/login&quot;)\n    public ModelAndView login(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;login&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/signup&quot;)\n    public ModelAndView signup(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;signup&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/appointments&quot;)\n    public ModelAndView appointments(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;appointments&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/contactus&quot;)\n    public ModelAndView contactus(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;contactus&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/grievance&quot;)\n    public ModelAndView grievance(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;grievance&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/aboutus&quot;)\n    public ModelAndView aboutus(){\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(&quot;aboutus&quot;);\n        return mv;\n    }\n    \n}\n\n \n</code></pre>\n"},{"tags":["java","sql","jpql"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":1,"creation_date":1694698299,"post_id":77105235,"comment_id":135927763,"body_markdown":"`AND ((:locationList) IS NULL OR customer_receiver.area IN (:locationList))` and other such uses of `List` on the left is not correct, I think.\nInstead of having a fixed query, and passing on the burden to check if the parameter is NULL or not and ignore the rest of the conditions on that parameter if it is NULL on the DB is not correct.\nInstead of this, use a StringBuilder and keep appending `AND condition` to it in IF blocks if a parameter is NOT NULL.","body":"<code>AND ((:locationList) IS NULL OR customer_receiver.area IN (:locationList))</code> and other such uses of <code>List</code> on the left is not correct, I think. Instead of having a fixed query, and passing on the burden to check if the parameter is NULL or not and ignore the rest of the conditions on that parameter if it is NULL on the DB is not correct. Instead of this, use a StringBuilder and keep appending <code>AND condition</code> to it in IF blocks if a parameter is NOT NULL."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":1,"creation_date":1694698664,"post_id":77105235,"comment_id":135927837,"body_markdown":"https://stackoverflow.com/questions/28874135/dynamic-spring-data-jpa-repository-query-with-arbitrary-and-clauses - Like this - Have a CriteriaBuilder and add keep adding criteria to it only if the parameter is not null","body":"<a href=\"https://stackoverflow.com/questions/28874135/dynamic-spring-data-jpa-repository-query-with-arbitrary-and-clauses\" title=\"dynamic spring data jpa repository query with arbitrary and clauses\">stackoverflow.com/questions/28874135/&hellip;</a> - Like this - Have a CriteriaBuilder and add keep adding criteria to it only if the parameter is not null"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":1,"creation_date":1694698766,"post_id":77105235,"comment_id":135927856,"body_markdown":"What I mean to say is, the final query executed should not have `AND (:isPovertyLineCheck IS NULL OR :isPovertyLineCheck = false OR customer_receiver.isEligible = :isPovertyLineCheck)` at all, if `isPovertyLineCheck` is NULL. And like this for all the ANDs. And if it is not-null, then `AND (:isPovertyLineCheck = false OR customer_receiver.isEligible = :isPovertyLineCheck)`","body":"What I mean to say is, the final query executed should not have <code>AND (:isPovertyLineCheck IS NULL OR :isPovertyLineCheck = false OR customer_receiver.isEligible = :isPovertyLineCheck)</code> at all, if <code>isPovertyLineCheck</code> is NULL. And like this for all the ANDs. And if it is not-null, then <code>AND (:isPovertyLineCheck = false OR customer_receiver.isEligible = :isPovertyLineCheck)</code>"}],"answers":[{"comments":[{"owner":{"account_id":10270603,"reputation":17,"user_id":7579112,"display_name":"Ashik1291"},"score":0,"creation_date":1694699136,"post_id":77105421,"comment_id":135927955,"body_markdown":"Thanks for replying. But that&#39;s not the issue. eligibility check is fine. The problem is when multiples values are coming in the list field like :genderList. (:genderList has two values for example Male, Female). when checking :genderList is null, there causes the error I have mentioned in the title.","body":"Thanks for replying. But that&#39;s not the issue. eligibility check is fine. The problem is when multiples values are coming in the list field like :genderList. (:genderList has two values for example Male, Female). when checking :genderList is null, there causes the error I have mentioned in the title."}],"tags":[],"owner":{"account_id":20277505,"reputation":40,"user_id":14872179,"display_name":"Faiz Akbar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694698348,"creation_date":1694698348,"answer_id":77105421,"question_id":77105235,"body_markdown":"There are 2 things that you have to check.\r\n 1. That you are not passing any null value parameter in query.\r\n 2. Check there parameter type as well e.g &lt; customer_receiver.isEligible &gt; make sure isEligible and all other parameters types are same.","title":"Getting Error: An expression of non-boolean type specified in a context where a condition is expected, near &#39;,&#39;&quot;, using JPQL","body":"<p>There are 2 things that you have to check.</p>\n<ol>\n<li>That you are not passing any null value parameter in query.</li>\n<li>Check there parameter type as well e.g &lt; customer_receiver.isEligible &gt; make sure isEligible and all other parameters types are same.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10270603,"reputation":17,"user_id":7579112,"display_name":"Ashik1291"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695357803,"creation_date":1695357803,"answer_id":77154924,"question_id":77105235,"body_markdown":"I have solved the issue using JpaSpecification. Thanks all for answering.","title":"Getting Error: An expression of non-boolean type specified in a context where a condition is expected, near &#39;,&#39;&quot;, using JPQL","body":"<p>I have solved the issue using JpaSpecification. Thanks all for answering.</p>\n"}],"owner":{"account_id":10270603,"reputation":17,"user_id":7579112,"display_name":"Ashik1291"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695357803,"creation_date":1694697065,"question_id":77105235,"body_markdown":"I have written the following JPQL query. In the query while multiple values(Male, Female etc.) come in the list like gender list or other list. It shows an error in the console like &quot;An expression of non-boolean type specified in a context where a condition is expected, near &#39;,&#39;&quot;,&quot;. Help me out please. Tried a lot to solve.\r\n\r\nQuery:\r\n\r\n```\r\n@Query(&quot;&quot;&quot;\r\n\t\t\tSELECT customer_receiver\r\n\t\t\tFROM SubsidyCustomerUserReceiverEntity customer_receiver\r\n\t\t\tWHERE customer_receiver.deleted = false\r\n\t\t\t\tAND (:isPovertyLineCheck IS NULL OR :isPovertyLineCheck = false OR customer_receiver.isEligible = :isPovertyLineCheck)\r\n\t\t\t\tAND (:incomeLowerLimit IS NULL OR :incomeUpperLimit IS NULL OR\r\n\t\t\t\t\t\t\tcustomer_receiver.receiverGrossHouseholdIncomeAmount BETWEEN :incomeLowerLimit AND :incomeUpperLimit)\r\n\t\t\t\tAND (:ageLowerLimit IS NULL OR :ageUpperLimit IS NULL OR\r\n\t\t\t\t\t\t\tcustomer_receiver.ageYear BETWEEN :ageLowerLimit AND :ageUpperLimit)\r\n\t\t\t\tAND ((:locationList) IS NULL OR customer_receiver.area IN (:locationList))\r\n\t\t\t\tAND ((:employmentTypeList) IS NULL OR customer_receiver.employmentType IN (:employmentTypeList))\r\n\t\t\t\tAND ((:occupationList) IS NULL OR customer_receiver.incomeSourceOrOccupationName IN (:occupationList))\r\n\t\t\t\tAND ((:genderList) IS NULL OR customer_receiver.gender IN (:genderList))\r\n\t\t\t&quot;&quot;&quot;)\r\n\tList&lt;SubsidyCustomerUserReceiverEntity&gt; getEligibleCustomerReceiver(BigDecimal incomeLowerLimit,\r\n\t\t\tBigDecimal incomeUpperLimit, Integer ageLowerLimit, Integer ageUpperLimit, Boolean isPovertyLineCheck,\r\n\t\t\tList&lt;String&gt; locationList, List&lt;EmploymentType&gt; employmentTypeList, List&lt;String&gt; occupationList,\r\n\t\t\tList&lt;String&gt; genderList);\r\n```\r\n\r\n\r\nI have tried tweaking queries.","title":"Getting Error: An expression of non-boolean type specified in a context where a condition is expected, near &#39;,&#39;&quot;, using JPQL","body":"<p>I have written the following JPQL query. In the query while multiple values(Male, Female etc.) come in the list like gender list or other list. It shows an error in the console like &quot;An expression of non-boolean type specified in a context where a condition is expected, near ','&quot;,&quot;. Help me out please. Tried a lot to solve.</p>\n<p>Query:</p>\n<pre><code>@Query(&quot;&quot;&quot;\n            SELECT customer_receiver\n            FROM SubsidyCustomerUserReceiverEntity customer_receiver\n            WHERE customer_receiver.deleted = false\n                AND (:isPovertyLineCheck IS NULL OR :isPovertyLineCheck = false OR customer_receiver.isEligible = :isPovertyLineCheck)\n                AND (:incomeLowerLimit IS NULL OR :incomeUpperLimit IS NULL OR\n                            customer_receiver.receiverGrossHouseholdIncomeAmount BETWEEN :incomeLowerLimit AND :incomeUpperLimit)\n                AND (:ageLowerLimit IS NULL OR :ageUpperLimit IS NULL OR\n                            customer_receiver.ageYear BETWEEN :ageLowerLimit AND :ageUpperLimit)\n                AND ((:locationList) IS NULL OR customer_receiver.area IN (:locationList))\n                AND ((:employmentTypeList) IS NULL OR customer_receiver.employmentType IN (:employmentTypeList))\n                AND ((:occupationList) IS NULL OR customer_receiver.incomeSourceOrOccupationName IN (:occupationList))\n                AND ((:genderList) IS NULL OR customer_receiver.gender IN (:genderList))\n            &quot;&quot;&quot;)\n    List&lt;SubsidyCustomerUserReceiverEntity&gt; getEligibleCustomerReceiver(BigDecimal incomeLowerLimit,\n            BigDecimal incomeUpperLimit, Integer ageLowerLimit, Integer ageUpperLimit, Boolean isPovertyLineCheck,\n            List&lt;String&gt; locationList, List&lt;EmploymentType&gt; employmentTypeList, List&lt;String&gt; occupationList,\n            List&lt;String&gt; genderList);\n</code></pre>\n<p>I have tried tweaking queries.</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1690449349,"post_id":76730024,"comment_id":135356436,"body_markdown":"have you tried to use @Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE) ?","body":"have you tried to use @Mapper(unmappedTargetPolicy = ReportingPolicy.IGNORE) ?"}],"answers":[{"tags":[],"owner":{"account_id":16051139,"reputation":83,"user_id":11584992,"display_name":"Kartik"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695356496,"creation_date":1695356496,"answer_id":77154854,"question_id":76730024,"body_markdown":"As mentioned in [MapStruct Discussion], this is a known bug in MapStruct versions up to 1.5.5 and is fixed in main (possibly in 1.6.0 Release)\r\n\r\n\r\n  [MapStruct Discussion]: https://https:/https://github.com/mapstruct/mapstruct/discussions/3329","title":"MapStruct mapper with BeanMapping#ignoreByDefault=true and SubclassMapping doesn&#39;t ignore properties from Subclasses","body":"<p>As mentioned in <a href=\"https://https:/https://github.com/mapstruct/mapstruct/discussions/3329\" rel=\"nofollow noreferrer\">MapStruct Discussion</a>, this is a known bug in MapStruct versions up to 1.5.5 and is fixed in main (possibly in 1.6.0 Release)</p>\n"}],"owner":{"account_id":16051139,"reputation":83,"user_id":11584992,"display_name":"Kartik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1695356496,"creation_date":1689857055,"question_id":76730024,"body_markdown":"Below is an example of the entity to DTO mapping and mapper and generated Map Struct implementation.\r\n\r\n\r\n```java\r\n\r\npublic abstract class User {\r\n    private int id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private int age;\r\n    private LocalDateTime dateOfBirth;\r\n    private List&lt;Address&gt; addresses;\r\n}\r\n\r\npublic class Address {\r\n    private int userId;\r\n    private String streetAddress;\r\n    private String city;\r\n    private String state;\r\n    private String zipCode;\r\n}\r\n\r\npublic class Employee extends User {\r\n    private String designation;\r\n    private Employee reportingManager;\r\n}\r\n\r\npublic class Contractor extends User {\r\n    private String contractingCompanyName;\r\n\r\n}\r\n\r\npublic abstract class UserDTO {\r\n    private int id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private int age;\r\n    private LocalDateTime dateOfBirth;\r\n}\r\n\r\npublic class EmployeeDTO extends UserDTO {\r\n    private String designation;\r\n    private EmployeeDTO reportingManager;\r\n}\r\n\r\npublic class ContractorDTO extends UserDTO {\r\n    private String contractingCompanyName;\r\n\r\n}\r\n\r\n@Mapper(subclassExhaustiveStrategy = SubclassExhaustiveStrategy.RUNTIME_EXCEPTION)\r\npublic abstract class UserMapper {\r\n\r\n    @BeanMapping(ignoreByDefault = true)\r\n    @SubclassMapping(source = Employee.class, target = EmployeeDTO.class)\r\n    @SubclassMapping(source = Contractor.class, target = ContractorDTO.class)\r\n    @Mapping(source = &quot;id&quot;, target = &quot;id&quot;)\r\n    @Mapping(source = &quot;firstName&quot;, target = &quot;firstName&quot;)\r\n    @Mapping(source = &quot;lastName&quot;, target = &quot;lastName&quot;)\r\n    public abstract UserDTO map(User user);\r\n}\r\n\r\n\r\n\r\n```\r\n\r\nGenerated Mapper\r\n\r\n\r\n```java\r\n@Generated(\r\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\r\n    date = &quot;2023-07-14T12:56:15-0400&quot;,\r\n    comments = &quot;version: 1.5.5.Final, compiler: javac, environment: Java 17.0.5 (Amazon.com Inc.)&quot;\r\n)\r\npublic class UserMapperImpl extends UserMapper {\r\n\r\n    @Override\r\n    public UserDTO map(User user) {\r\n        if ( user == null ) {\r\n            return null;\r\n        }\r\n\r\n        if (user instanceof Employee) {\r\n            return employeeToEmployeeDTO( (Employee) user );\r\n        }\r\n        else if (user instanceof Contractor) {\r\n            return contractorToContractorDTO( (Contractor) user );\r\n        }\r\n        else {\r\n            throw new IllegalArgumentException(&quot;Not all subclasses are supported for this mapping. Missing for &quot; + user.getClass());\r\n        }\r\n    }\r\n\r\n    protected EmployeeDTO employeeToEmployeeDTO(Employee employee) {\r\n        if ( employee == null ) {\r\n            return null;\r\n        }\r\n\r\n        EmployeeDTO employeeDTO = new EmployeeDTO();\r\n\r\n        employeeDTO.setId( employee.getId() );\r\n        employeeDTO.setFirstName( employee.getFirstName() );\r\n        employeeDTO.setLastName( employee.getLastName() );\r\n        employeeDTO.setDesignation( employee.getDesignation() );\r\n        employeeDTO.setReportingManager( employeeToEmployeeDTO( employee.getReportingManager() ) );\r\n\r\n        return employeeDTO;\r\n    }\r\n\r\n    protected ContractorDTO contractorToContractorDTO(Contractor contractor) {\r\n        if ( contractor == null ) {\r\n            return null;\r\n        }\r\n\r\n        ContractorDTO contractorDTO = new ContractorDTO();\r\n\r\n        contractorDTO.setId( contractor.getId() );\r\n        contractorDTO.setFirstName( contractor.getFirstName() );\r\n        contractorDTO.setLastName( contractor.getLastName() );\r\n        contractorDTO.setContractingCompanyName( contractor.getContractingCompanyName() );\r\n\r\n        return contractorDTO;\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nI expected that adding `BeanMapping#ignoreByDefault=true` would only map the explicitly mapped properties. But that is not the case with the subclasses.\r\n\r\nI was hoping for a better way other than explicitly mapping each subtype and annotating with InhertConfiguration and excluding the other properties from the subclasses.","title":"MapStruct mapper with BeanMapping#ignoreByDefault=true and SubclassMapping doesn&#39;t ignore properties from Subclasses","body":"<p>Below is an example of the entity to DTO mapping and mapper and generated Map Struct implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic abstract class User {\n    private int id;\n    private String firstName;\n    private String lastName;\n    private int age;\n    private LocalDateTime dateOfBirth;\n    private List&lt;Address&gt; addresses;\n}\n\npublic class Address {\n    private int userId;\n    private String streetAddress;\n    private String city;\n    private String state;\n    private String zipCode;\n}\n\npublic class Employee extends User {\n    private String designation;\n    private Employee reportingManager;\n}\n\npublic class Contractor extends User {\n    private String contractingCompanyName;\n\n}\n\npublic abstract class UserDTO {\n    private int id;\n    private String firstName;\n    private String lastName;\n    private int age;\n    private LocalDateTime dateOfBirth;\n}\n\npublic class EmployeeDTO extends UserDTO {\n    private String designation;\n    private EmployeeDTO reportingManager;\n}\n\npublic class ContractorDTO extends UserDTO {\n    private String contractingCompanyName;\n\n}\n\n@Mapper(subclassExhaustiveStrategy = SubclassExhaustiveStrategy.RUNTIME_EXCEPTION)\npublic abstract class UserMapper {\n\n    @BeanMapping(ignoreByDefault = true)\n    @SubclassMapping(source = Employee.class, target = EmployeeDTO.class)\n    @SubclassMapping(source = Contractor.class, target = ContractorDTO.class)\n    @Mapping(source = &quot;id&quot;, target = &quot;id&quot;)\n    @Mapping(source = &quot;firstName&quot;, target = &quot;firstName&quot;)\n    @Mapping(source = &quot;lastName&quot;, target = &quot;lastName&quot;)\n    public abstract UserDTO map(User user);\n}\n\n\n\n</code></pre>\n<p>Generated Mapper</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2023-07-14T12:56:15-0400&quot;,\n    comments = &quot;version: 1.5.5.Final, compiler: javac, environment: Java 17.0.5 (Amazon.com Inc.)&quot;\n)\npublic class UserMapperImpl extends UserMapper {\n\n    @Override\n    public UserDTO map(User user) {\n        if ( user == null ) {\n            return null;\n        }\n\n        if (user instanceof Employee) {\n            return employeeToEmployeeDTO( (Employee) user );\n        }\n        else if (user instanceof Contractor) {\n            return contractorToContractorDTO( (Contractor) user );\n        }\n        else {\n            throw new IllegalArgumentException(&quot;Not all subclasses are supported for this mapping. Missing for &quot; + user.getClass());\n        }\n    }\n\n    protected EmployeeDTO employeeToEmployeeDTO(Employee employee) {\n        if ( employee == null ) {\n            return null;\n        }\n\n        EmployeeDTO employeeDTO = new EmployeeDTO();\n\n        employeeDTO.setId( employee.getId() );\n        employeeDTO.setFirstName( employee.getFirstName() );\n        employeeDTO.setLastName( employee.getLastName() );\n        employeeDTO.setDesignation( employee.getDesignation() );\n        employeeDTO.setReportingManager( employeeToEmployeeDTO( employee.getReportingManager() ) );\n\n        return employeeDTO;\n    }\n\n    protected ContractorDTO contractorToContractorDTO(Contractor contractor) {\n        if ( contractor == null ) {\n            return null;\n        }\n\n        ContractorDTO contractorDTO = new ContractorDTO();\n\n        contractorDTO.setId( contractor.getId() );\n        contractorDTO.setFirstName( contractor.getFirstName() );\n        contractorDTO.setLastName( contractor.getLastName() );\n        contractorDTO.setContractingCompanyName( contractor.getContractingCompanyName() );\n\n        return contractorDTO;\n    }\n\n</code></pre>\n<p>I expected that adding <code>BeanMapping#ignoreByDefault=true</code> would only map the explicitly mapped properties. But that is not the case with the subclasses.</p>\n<p>I was hoping for a better way other than explicitly mapping each subtype and annotating with InhertConfiguration and excluding the other properties from the subclasses.</p>\n"},{"tags":["java","spring-boot","aop","aspectj","spring-aop"],"answers":[{"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1695223179,"post_id":77143262,"comment_id":135996439,"body_markdown":"Sorry, this answer is completely incomprehensible. Please improve it.","body":"Sorry, this answer is completely incomprehensible. Please improve it."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695224664,"post_id":77143262,"comment_id":135996780,"body_markdown":"I did it, i think that now is more clearly sorry for discomfort. And also i think that the OP will get it.","body":"I did it, i think that now is more clearly sorry for discomfort. And also i think that the OP will get it."}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695224964,"creation_date":1695218738,"answer_id":77143262,"question_id":77142146,"body_markdown":"I think the best answer of this question you will find in [documentation][1]\r\n\r\nAbout your topic:\r\n`* *..*Repository.find*(..)`\r\nThis pointcut matches any method starts with find with any numbers of params and is located in any classes that are invoking some method that are ending with `Repository.find`\r\n\r\n`* *Repository.find*(..)`\r\nThis pointcut mean anything that match this one and method find have any number of params\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/core/aop/ataspectj/pointcuts.html#aop-common-pointcuts","title":"PointCut expressions in spring","body":"<p>I think the best answer of this question you will find in <a href=\"https://docs.spring.io/spring-framework/reference/core/aop/ataspectj/pointcuts.html#aop-common-pointcuts\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>About your topic:\n<code>* *..*Repository.find*(..)</code>\nThis pointcut matches any method starts with find with any numbers of params and is located in any classes that are invoking some method that are ending with <code>Repository.find</code></p>\n<p><code>* *Repository.find*(..)</code>\nThis pointcut mean anything that match this one and method find have any number of params</p>\n"},{"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1695353834,"post_id":77144561,"comment_id":136016041,"body_markdown":"This is a great answer. I took the liberty of re-formatting it and explaining that `*..*` does **not** match the default package, which is a caveat that was not mentioned explicitly before.","body":"This is a great answer. I took the liberty of re-formatting it and explaining that <code>*..*</code> does <b>not</b> match the default package, which is a caveat that was not mentioned explicitly before."}],"tags":[],"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695353779,"creation_date":1695229220,"answer_id":77144561,"question_id":77142146,"body_markdown":"Do read through the official documentation section **&quot;Declaring a Pointcut&quot;**. See the [examples][1] for more details.\r\n\r\n```none\r\nexecution(modifiers-pattern?\r\n          ret-type-pattern\r\n          declaring-type-pattern?name-pattern(param-pattern)\r\n          throws-pattern?)\r\n```\r\n  \r\n### `* *..*Repository.find*(..)`\r\n\r\n| Pattern type | Pattern | Description |\r\n|------------------|---|-----|\r\n| ret-type-pattern | `*` | any |\r\n| declaring-type-pattern | `*..*Repository` | Type with a name that ends with `Repository` within **any package _except for_ the root (default) package** |\r\n| ?name-pattern(param-pattern) | `find*(..)` | A method with a name that starts with `find` accepting any number (zero or more) of parameters |\r\n\r\n### `* *Repository.find*(..)`\r\n\t   \r\n| Pattern type | Pattern | Description |\r\n|------------------|---|-----|\r\n| ret-type-pattern | `*` | any |\r\n| declaring-type-pattern | `*Repository` | Type with a name that ends with `Repository` within **root (default) package only** |\r\n| ?name-pattern(param-pattern) | `find*(..)` | A method with a name that starts with `find` accepting any number (zero or more) of parameters |\r\n\r\nThe difference is that the second expression is specific about the package where the type exists. Please note that the first package noes **not** include the root package, which is one of the many reasons that Java code should never be declared in the default package.\r\n\t\r\n`..` is a special wildcard to match any number of arguments and `*..*` in `declaring-type-pattern` means starting from root package and any of its sub-package.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/core/aop/ataspectj/pointcuts.html#aop-pointcuts-examples\r\n","title":"PointCut expressions in spring","body":"<p>Do read through the official documentation section <strong>&quot;Declaring a Pointcut&quot;</strong>. See the <a href=\"https://docs.spring.io/spring-framework/reference/core/aop/ataspectj/pointcuts.html#aop-pointcuts-examples\" rel=\"nofollow noreferrer\">examples</a> for more details.</p>\n<pre class=\"lang-none prettyprint-override\"><code>execution(modifiers-pattern?\n          ret-type-pattern\n          declaring-type-pattern?name-pattern(param-pattern)\n          throws-pattern?)\n</code></pre>\n<h3><code>* *..*Repository.find*(..)</code></h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Pattern type</th>\n<th>Pattern</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ret-type-pattern</td>\n<td><code>*</code></td>\n<td>any</td>\n</tr>\n<tr>\n<td>declaring-type-pattern</td>\n<td><code>*..*Repository</code></td>\n<td>Type with a name that ends with <code>Repository</code> within <strong>any package <em>except for</em> the root (default) package</strong></td>\n</tr>\n<tr>\n<td>?name-pattern(param-pattern)</td>\n<td><code>find*(..)</code></td>\n<td>A method with a name that starts with <code>find</code> accepting any number (zero or more) of parameters</td>\n</tr>\n</tbody>\n</table>\n</div><h3><code>* *Repository.find*(..)</code></h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Pattern type</th>\n<th>Pattern</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ret-type-pattern</td>\n<td><code>*</code></td>\n<td>any</td>\n</tr>\n<tr>\n<td>declaring-type-pattern</td>\n<td><code>*Repository</code></td>\n<td>Type with a name that ends with <code>Repository</code> within <strong>root (default) package only</strong></td>\n</tr>\n<tr>\n<td>?name-pattern(param-pattern)</td>\n<td><code>find*(..)</code></td>\n<td>A method with a name that starts with <code>find</code> accepting any number (zero or more) of parameters</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>The difference is that the second expression is specific about the package where the type exists. Please note that the first package noes <strong>not</strong> include the root package, which is one of the many reasons that Java code should never be declared in the default package.</p>\n<p><code>..</code> is a special wildcard to match any number of arguments and <code>*..*</code> in <code>declaring-type-pattern</code> means starting from root package and any of its sub-package.</p>\n"}],"owner":{"account_id":20010765,"reputation":27,"user_id":14667826,"display_name":"firemancer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77144561,"answer_count":2,"score":0,"last_activity_date":1695353779,"creation_date":1695210797,"question_id":77142146,"body_markdown":"I have two pointcut expressions:\r\n1. ```* *..*Repository.find*(..)```\r\n2. ```* *Repository.find*(..)```\r\n\r\nWhat is the difference between these two and what does the ```*..```part  of the first pointcut means? ","title":"PointCut expressions in spring","body":"<p>I have two pointcut expressions:</p>\n<ol>\n<li><code>* *..*Repository.find*(..)</code></li>\n<li><code>* *Repository.find*(..)</code></li>\n</ol>\n<p>What is the difference between these two and what does the <code>*..</code>part  of the first pointcut means?</p>\n"},{"tags":["java","spring","spring-boot","jackson"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1623080073,"post_id":67874510,"comment_id":119970724,"body_markdown":"Just adding the dependency is not enough. You need to configure the object mapper to add the Jackson module","body":"Just adding the dependency is not enough. You need to configure the object mapper to add the Jackson module"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":1,"creation_date":1623080661,"post_id":67874510,"comment_id":119971027,"body_markdown":"But why it is working in SB 2.4.5 in stopped working in 2.5.0 ?","body":"But why it is working in SB 2.4.5 in stopped working in 2.5.0 ?"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1623080972,"post_id":67874510,"comment_id":119971207,"body_markdown":"Could conceivably be [this](https://github.com/spring-projects/spring-boot/commit/b1f3d91f7df5dd311bf7e835cf6df003865a069c). If so, it&#39;s a bug","body":"Could conceivably be <a href=\"https://github.com/spring-projects/spring-boot/commit/b1f3d91f7df5dd311bf7e835cf6df003865a069c\" rel=\"nofollow noreferrer\">this</a>. If so, it&#39;s a bug"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1623081269,"post_id":67874510,"comment_id":119971338,"body_markdown":"Kind of looks like the copy might screw things up. If you&#39;re appending your time module to the ObjectMapper after this copy happens, then the copied mapper won&#39;t pick up your change (obviously). Previously, you would just be mutating the instance held by the `JacksonClusterEnvironmentBuilderCustomizer`, which is fine so long as ObjectMapper is thread-safe, which it is","body":"Kind of looks like the copy might screw things up. If you&#39;re appending your time module to the ObjectMapper after this copy happens, then the copied mapper won&#39;t pick up your change (obviously). Previously, you would just be mutating the instance held by the <code>JacksonClusterEnvironmentBuilderCustomizer</code>, which is fine so long as ObjectMapper is thread-safe, which it is"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623081474,"post_id":67874510,"comment_id":119971429,"body_markdown":"Thanks. So, should I wait for the newer version of SB in order to get it solved or how ?","body":"Thanks. So, should I wait for the newer version of SB in order to get it solved or how ?"},{"owner":{"account_id":326040,"reputation":3140,"user_id":647581,"display_name":"Patrick Herrera"},"score":1,"creation_date":1623308728,"post_id":67874510,"comment_id":120043307,"body_markdown":"Personally I would wait until the next release.  In addition to this issue, 2.5.0 also broke our application due to: https://github.com/spring-projects/spring-boot/issues/26627","body":"Personally I would wait until the next release.  In addition to this issue, 2.5.0 also broke our application due to: <a href=\"https://github.com/spring-projects/spring-boot/issues/26627\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/26627</a>"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623359276,"post_id":67874510,"comment_id":120064873,"body_markdown":"@PatrickHerrera Spring Boot 2.5.1 was released. Did this release solve the mentioned bugs?","body":"@PatrickHerrera Spring Boot 2.5.1 was released. Did this release solve the mentioned bugs?"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623393512,"post_id":67874510,"comment_id":120071136,"body_markdown":"Looks like the issue with &#39;Java 8 date/time type&#39; has not yet been resolved","body":"Looks like the issue with &#39;Java 8 date/time type&#39; has not yet been resolved"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1623394924,"post_id":67874510,"comment_id":120071616,"body_markdown":"2.4.5 and 2.5.1 use different versions of Jackson. I suspect that Maven may have corrupted the `jackson-datatype-jsr310` jar when it downloaded it. I would try clearing Maven’s local cache and building your application again.","body":"2.4.5 and 2.5.1 use different versions of Jackson. I suspect that Maven may have corrupted the <code>jackson-datatype-jsr310</code> jar when it downloaded it. I would try clearing Maven’s local cache and building your application again."},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1623395273,"post_id":67874510,"comment_id":120071761,"body_markdown":"For the record, the copying of the ObjectMapper is specific to Couchbase and, judging by the stack trace, it is JMS not Couchbase that’s involved here.","body":"For the record, the copying of the ObjectMapper is specific to Couchbase and, judging by the stack trace, it is JMS not Couchbase that’s involved here."},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623404583,"post_id":67874510,"comment_id":120075339,"body_markdown":"@AndyWilkinson thanks for your answer! I completely wiped my local Maven repo and redownloaded it from scratch. After this I&#39;d like to confirm that the issue still exists","body":"@AndyWilkinson thanks for your answer! I completely wiped my local Maven repo and redownloaded it from scratch. After this I&#39;d like to confirm that the issue still exists"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1623407134,"post_id":67874510,"comment_id":120076420,"body_markdown":"Thanks for trying that. Can you share a [minimal, reproducible example](/help/mcve)?","body":"Thanks for trying that. Can you share a <a href=\"/help/mcve\">minimal, reproducible example</a>?"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623421807,"post_id":67874510,"comment_id":120082522,"body_markdown":"Unfortunately, I&#39;m only able to catch such exception during execution of the application and receiving messages from Telegram API","body":"Unfortunately, I&#39;m only able to catch such exception during execution of the application and receiving messages from Telegram API"},{"owner":{"account_id":16236497,"reputation":199,"user_id":11723872,"display_name":"orid"},"score":1,"creation_date":1623671978,"post_id":67874510,"comment_id":120136769,"body_markdown":"For me - the /actuator/info endpoint stopped working after upgrading to sb 2.5.1, and fail with the same InvalidDefinitionException and jsr310 error regarding Instant type. \nIs the commit pointed by @Michael solved this issue ?","body":"For me - the /actuator/info endpoint stopped working after upgrading to sb 2.5.1, and fail with the same InvalidDefinitionException and jsr310 error regarding Instant type.  Is the commit pointed by @Michael solved this issue ?"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1623672904,"post_id":67874510,"comment_id":120137108,"body_markdown":"The commit pointed to be @Michael is completely unrelated to the Actuator&#39;s info endpoint","body":"The commit pointed to be @Michael is completely unrelated to the Actuator&#39;s info endpoint"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623686245,"post_id":67874510,"comment_id":120143398,"body_markdown":"I don&#39;t have `Jackson2ObjectMappearBuilder&#39; on the application classpath in 2.4.5 and everything works correctly. Do I need to have `Jackson2ObjectMappearBuilder` on the classpath with SB 2.5.1 and if so, what Maven dependecy should I use for this purpose?","body":"I don&#39;t have <code>Jackson2ObjectMappearBuilder&#39; on the application classpath in 2.4.5 and everything works correctly. Do I need to have </code>Jackson2ObjectMappearBuilder` on the classpath with SB 2.5.1 and if so, what Maven dependecy should I use for this purpose?"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623687599,"post_id":67874510,"comment_id":120143988,"body_markdown":"@Andy Wilkinson I&#39;m testing right now, but looks like the issue is that I don&#39;t have `spring-web` Maven dependency on my application classpath. Anyway, I added `spring-web` Maven dependency to test this issue - but my Spring Boot application doesn&#39;t need `spring-web` because this is Telegram Bot","body":"@Andy Wilkinson I&#39;m testing right now, but looks like the issue is that I don&#39;t have <code>spring-web</code> Maven dependency on my application classpath. Anyway, I added <code>spring-web</code> Maven dependency to test this issue - but my Spring Boot application doesn&#39;t need <code>spring-web</code> because this is Telegram Bot"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623689010,"post_id":67874510,"comment_id":120144517,"body_markdown":"Unfortunately, adding spring-web to the classpath didn&#39;t help :(","body":"Unfortunately, adding spring-web to the classpath didn&#39;t help :("},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1623693395,"post_id":67874510,"comment_id":120146130,"body_markdown":"If you weren’t using `spring-web` then Spring Boot won’t have been involved in configuring Jackson. Without it, `Jacskon2ObjectMapperBuilder`won’t be available and Boot’s Jackson auto-configuration will back off.","body":"If you weren’t using <code>spring-web</code> then Spring Boot won’t have been involved in configuring Jackson. Without it, <code>Jacskon2ObjectMapperBuilder</code>won’t be available and Boot’s Jackson auto-configuration will back off."},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1623693491,"post_id":67874510,"comment_id":120146171,"body_markdown":"I added spring-web but it didn’t help with this issue","body":"I added spring-web but it didn’t help with this issue"},{"owner":{"account_id":326040,"reputation":3140,"user_id":647581,"display_name":"Patrick Herrera"},"score":0,"creation_date":1623709137,"post_id":67874510,"comment_id":120150936,"body_markdown":"@alexanoid No, 2.5.1 didn&#39;t fix it for me, but it turns out the issue was that in some tests we were creating ObjectMappers from scratch that didn&#39;t have the right modules registered.  Fixing that fixed the problem (and I didn&#39;t need to add `com.fasterxml.jackson.datatype:jackson-datatype-jsr310` as an explicit dependency either).\nStill not sure why this was never an issue before, but this fix should prevent future issues","body":"@alexanoid No, 2.5.1 didn&#39;t fix it for me, but it turns out the issue was that in some tests we were creating ObjectMappers from scratch that didn&#39;t have the right modules registered.  Fixing that fixed the problem (and I didn&#39;t need to add <code>com.fasterxml.jackson.datatype:jackson-datatype-jsr310</code> as an explicit dependency either). Still not sure why this was never an issue before, but this fix should prevent future issues"},{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":1,"creation_date":1626177059,"post_id":67874510,"comment_id":120818135,"body_markdown":"@AndyWilkinson you were right. After deep investigation I found the following code in the 3rdparty library `= new ObjectMapper();`  I added the following fix `ObjectMapper o = new ObjectMapper().registerModule(new JavaTimeModule());` and the issue is gone. Thank you!","body":"@AndyWilkinson you were right. After deep investigation I found the following code in the 3rdparty library <code>= new ObjectMapper();</code>  I added the following fix <code>ObjectMapper o = new ObjectMapper().registerModule(new JavaTimeModule());</code> and the issue is gone. Thank you!"}],"answers":[{"comments":[{"owner":{"account_id":1543709,"reputation":114,"user_id":1437758,"display_name":"xwandi"},"score":1,"creation_date":1624021923,"post_id":67973800,"comment_id":120250932,"body_markdown":"Try to use `Jackson2ObjectMapperBuilder` class to build instances of the `ObjectMapper` class: `Jackson2ObjectMapperBuilder.json().build()`. In this case you would obtain properly configured mappers. Wherever you have Spring Context, you could also inject a bean of  `ObjectMapper` which Spring Boot exposes via `JacksonAutoConfiguration`.","body":"Try to use <code>Jackson2ObjectMapperBuilder</code> class to build instances of the <code>ObjectMapper</code> class: <code>Jackson2ObjectMapperBuilder.json().build()</code>. In this case you would obtain properly configured mappers. Wherever you have Spring Context, you could also inject a bean of  <code>ObjectMapper</code> which Spring Boot exposes via <code>JacksonAutoConfiguration</code>."},{"owner":{"account_id":3818241,"reputation":4374,"user_id":3167016,"accept_rate":94,"display_name":"TuGordoBello"},"score":2,"creation_date":1636386541,"post_id":67973800,"comment_id":123536545,"body_markdown":"I had this problem evaluating values on unit test and this fixed it doing\n```new ObjectMapper().registerModule(new JavaTimeModule()).writeValueAsString(value);```\n :D thanks","body":"I had this problem evaluating values on unit test and this fixed it doing <code>new ObjectMapper().registerModule(new JavaTimeModule()).writeValueAsString(value);</code>  :D thanks"},{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1638044271,"post_id":67973800,"comment_id":123984487,"body_markdown":"@TuGordoBello aggree and advice to use the fluent-mutator to initialize in one line: [`new ObjectMapper().registerModule(new JavaTimeModule())`](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#registerModule(com.fasterxml.jackson.databind.Module)).","body":"@TuGordoBello aggree and advice to use the fluent-mutator to initialize in one line: <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#registerModule(com.fasterxml.jackson.databind.Module)\" rel=\"nofollow noreferrer\"><code>new ObjectMapper().registerModule(new JavaTimeModule())</code></a>."},{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":3,"creation_date":1640272780,"post_id":67973800,"comment_id":124559310,"body_markdown":"This isn&#39;t an answer just tells you how to reproduce the issue. Doesn&#39;t help if your dependecies are using ObjectMapper. Nothing will stop spring from picking up the broken ObjectMapper.","body":"This isn&#39;t an answer just tells you how to reproduce the issue. Doesn&#39;t help if your dependecies are using ObjectMapper. Nothing will stop spring from picking up the broken ObjectMapper."}],"tags":[],"owner":{"account_id":51694,"reputation":1101,"user_id":1616612,"display_name":"Saifuddin Merchant"},"comment_count":4,"down_vote_count":2,"up_vote_count":35,"is_accepted":true,"score":33,"last_activity_date":1623687343,"creation_date":1623687343,"answer_id":67973800,"question_id":67874510,"body_markdown":"I saw an issue in one of my test classes. The problem there was it was creating a new ObjectMapper instance that was not adding the JavaTimeModule.\r\n\r\nHere is a sample test that works in Spring 2.4.5 but fails in 2.5.0/2.5.1 with com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.ZonedDateTime` not supported by default\r\n\r\nIt might be due to the upgrade in the jackson-datatype-jsr310 version\r\n\r\n    package net.jpmchase.gti.gtfabric;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import java.time.ZonedDateTime;\r\n    \r\n    public class ObjectMapperTest {\r\n    \r\n        @Test\r\n        public void objectMapperTest() throws Exception{\r\n    \r\n            ZonedDateTime time = ZonedDateTime.now();\r\n            ObjectMapper o = new ObjectMapper();\r\n            o.writeValueAsString(time);\r\n        }\r\n    }\r\n\r\nTo fix this particular test case had to add an explicit\r\n\r\n    ObjectMapper o = new ObjectMapper();\r\n    o.registerModule(new JavaTimeModule()); \r\n\r\n","title":"Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default","body":"<p>I saw an issue in one of my test classes. The problem there was it was creating a new ObjectMapper instance that was not adding the JavaTimeModule.</p>\n<p>Here is a sample test that works in Spring 2.4.5 but fails in 2.5.0/2.5.1 with com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type <code>java.time.ZonedDateTime</code> not supported by default</p>\n<p>It might be due to the upgrade in the jackson-datatype-jsr310 version</p>\n<pre><code>package net.jpmchase.gti.gtfabric;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.Test;\n\nimport java.time.ZonedDateTime;\n\npublic class ObjectMapperTest {\n\n    @Test\n    public void objectMapperTest() throws Exception{\n\n        ZonedDateTime time = ZonedDateTime.now();\n        ObjectMapper o = new ObjectMapper();\n        o.writeValueAsString(time);\n    }\n}\n</code></pre>\n<p>To fix this particular test case had to add an explicit</p>\n<pre><code>ObjectMapper o = new ObjectMapper();\no.registerModule(new JavaTimeModule()); \n</code></pre>\n"},{"comments":[{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1637924964,"post_id":68287391,"comment_id":123958714,"body_markdown":"Can you explain, why the constructor use is considered wrong and with injected builder correct ?","body":"Can you explain, why the constructor use is considered wrong and with injected builder correct ?"},{"owner":{"account_id":5702783,"reputation":686,"user_id":4507281,"display_name":"Dawid Świtoń-Maniakowski"},"score":1,"creation_date":1637947419,"post_id":68287391,"comment_id":123966582,"body_markdown":"If you are creating an instance yourself, you will need to configure everything yourself, for example add all the extensions you need. Using the builder provided by Spring, you have everything set up.","body":"If you are creating an instance yourself, you will need to configure everything yourself, for example add all the extensions you need. Using the builder provided by Spring, you have everything set up."},{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1638045070,"post_id":68287391,"comment_id":123984625,"body_markdown":"Would add this great explanation to your answer &#128077;️ Spring&#39;s auto-configuration already registers available modules like `JavaTimeModule` to its default `ObjectMapper` bean. You can simply use this by adding a field to the test-class: `@Autowired ObjectMapper mapper;` (see [related answer](https://stackoverflow.com/a/64297951/5730279)). I would only use the _builder_ if Spring&#39;s auto-configured `ObjectMapper` is not sufficient and I need to [customize a separate one](https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.spring-mvc.customize-jackson-objectmapper).","body":"Would add this great explanation to your answer 👍️ Spring&#39;s auto-configuration already registers available modules like <code>JavaTimeModule</code> to its default <code>ObjectMapper</code> bean. You can simply use this by adding a field to the test-class: <code>@Autowired ObjectMapper mapper;</code> (see <a href=\"https://stackoverflow.com/a/64297951/5730279\">related answer</a>). I would only use the <i>builder</i> if Spring&#39;s auto-configured <code>ObjectMapper</code> is not sufficient and I need to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.spring-mvc.customize-jackson-objectmapper\" rel=\"nofollow noreferrer\">customize a separate one</a>."},{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":0,"creation_date":1640272828,"post_id":68287391,"comment_id":124559321,"body_markdown":"Not helpful because you can&#39;t change your depdencies code to use Jackson2ObjectMapperBuilder.","body":"Not helpful because you can&#39;t change your depdencies code to use Jackson2ObjectMapperBuilder."}],"tags":[],"owner":{"account_id":5702783,"reputation":686,"user_id":4507281,"display_name":"Dawid Świtoń-Maniakowski"},"comment_count":4,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1625666000,"creation_date":1625666000,"answer_id":68287391,"question_id":67874510,"body_markdown":"Perhaps you are not using in your code Object Mapper provided by spring.\r\n\r\nWrong way:\r\n\r\n    ObjectMapper o = new ObjectMapper();\r\n\r\nCorrect way:\r\n\r\n    @Autowired\r\n    Jackson2ObjectMapperBuilder mapperBuilder;\r\n\r\n... \r\n\r\n    ObjectMapper mapper = mapperBuilder.build();\r\n\r\n","title":"Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default","body":"<p>Perhaps you are not using in your code Object Mapper provided by spring.</p>\n<p>Wrong way:</p>\n<pre><code>ObjectMapper o = new ObjectMapper();\n</code></pre>\n<p>Correct way:</p>\n<pre><code>@Autowired\nJackson2ObjectMapperBuilder mapperBuilder;\n</code></pre>\n<p>...</p>\n<pre><code>ObjectMapper mapper = mapperBuilder.build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":38281,"reputation":2015,"user_id":109795,"accept_rate":88,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642430266,"creation_date":1642430266,"answer_id":70743093,"question_id":67874510,"body_markdown":"In case you are using Spring Data Couchbase then this might be your problem:\r\nhttps://github.com/spring-projects/spring-data-couchbase/blame/4.2.x/src/main/java/org/springframework/data/couchbase/config/AbstractCouchbaseConfiguration.java#L309\r\n\r\nThe bug report is here:\r\nhttps://github.com/spring-projects/spring-data-couchbase/issues/1209\r\n\r\nThis has been fixed in Spring-Data-Couchbase 4.3","title":"Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default","body":"<p>In case you are using Spring Data Couchbase then this might be your problem:\n<a href=\"https://github.com/spring-projects/spring-data-couchbase/blame/4.2.x/src/main/java/org/springframework/data/couchbase/config/AbstractCouchbaseConfiguration.java#L309\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-couchbase/blame/4.2.x/src/main/java/org/springframework/data/couchbase/config/AbstractCouchbaseConfiguration.java#L309</a></p>\n<p>The bug report is here:\n<a href=\"https://github.com/spring-projects/spring-data-couchbase/issues/1209\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-couchbase/issues/1209</a></p>\n<p>This has been fixed in Spring-Data-Couchbase 4.3</p>\n"},{"tags":[],"owner":{"account_id":2106266,"reputation":5117,"user_id":1872540,"display_name":"LovaBill"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667292989,"creation_date":1667292989,"answer_id":74273536,"question_id":67874510,"body_markdown":"Posting a proper answer for the future me (that forgets):\r\n\r\n    @Configuration\r\n    public class JacksonConfig {\r\n\r\n    @Bean\r\n    public BatchConfigurer batchConfigurer(DataSource dataSource, PlatformTransactionManager transactionManager) {\r\n        return new DefaultBatchConfigurer(dataSource) {\r\n            @Override\r\n            protected JobRepository createJobRepository() throws Exception {\r\n                Jackson2ExecutionContextStringSerializer serializer = new Jackson2ExecutionContextStringSerializer();\r\n                ObjectMapper objectMapper = new ObjectMapper().registerModule(new JavaTimeModule()).findAndRegisterModules();\r\n                objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, true);\r\n                serializer.setObjectMapper(objectMapper);\r\n\r\n                JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\r\n                factory.setDataSource(dataSource);\r\n                factory.setTransactionManager(transactionManager);\r\n                factory.setSerializer(serializer);\r\n                return factory.getObject();\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nSource: https://docs.spring.io/spring-batch/docs/current/reference/html/job.html ","title":"Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default","body":"<p>Posting a proper answer for the future me (that forgets):</p>\n<pre><code>@Configuration\npublic class JacksonConfig {\n\n@Bean\npublic BatchConfigurer batchConfigurer(DataSource dataSource, PlatformTransactionManager transactionManager) {\n    return new DefaultBatchConfigurer(dataSource) {\n        @Override\n        protected JobRepository createJobRepository() throws Exception {\n            Jackson2ExecutionContextStringSerializer serializer = new Jackson2ExecutionContextStringSerializer();\n            ObjectMapper objectMapper = new ObjectMapper().registerModule(new JavaTimeModule()).findAndRegisterModules();\n            objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, true);\n            serializer.setObjectMapper(objectMapper);\n\n            JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\n            factory.setDataSource(dataSource);\n            factory.setTransactionManager(transactionManager);\n            factory.setSerializer(serializer);\n            return factory.getObject();\n        }\n    };\n}\n</code></pre>\n<p>}</p>\n<p>Source: <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/job.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-batch/docs/current/reference/html/job.html</a></p>\n"},{"tags":[],"owner":{"account_id":9925559,"reputation":430,"user_id":7347278,"accept_rate":86,"display_name":"V&#225;clav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688145205,"creation_date":1688145205,"answer_id":76591039,"question_id":67874510,"body_markdown":"While both Saifuddin Merchant and Dawid Świtoń-Maniakowski have provided different but equally working ways to make the library \r\n\r\n```\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n    &lt;version&gt;2.15.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nactually work, my proposal is to remove it from your `pom.xml` completely and to write your own serializer (_as an inner static class in this example_): \r\n\r\n```\r\npublic static class CustomDateSerializer extends com.fasterxml.jackson.databind.ser.std.StdSerializer&lt;LocalDateTime&gt; {\r\n\t    private static final long serialVersionUID = 4365897561L;\r\n\t    public CustomDateSerializer() { \r\n\t        this(null); \r\n\t    } \r\n\t    public CustomDateSerializer(Class&lt;LocalDateTime&gt; t) {\r\n\t        super(t); \r\n\t    }\r\n\t    @Override\r\n\t    public void serialize(\r\n\t    \t\tLocalDateTime value, JsonGenerator gen, SerializerProvider arg2) \r\n\t      throws IOException, JsonProcessingException {\r\n\t        gen.writeString(value.format(DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy hh:mm:ss&quot;)));\r\n\t    }\r\n\t}\r\n\r\n```\r\n\r\nNext, annotate the time field of the object you want to serialize as JSON: \r\n\r\n```\r\n@JsonSerialize(using = CustomDateSerializer.class)\r\nprivate LocalDateTime time = LocalDateTime.now();\r\n\r\n```\r\n\r\nNot much of code, right? The `pom.xml` dependency is 5 lines of code itself. But then autowiring `Jackson2ObjectMapperBuilder` is 2 lines, or if you decide to go with registering `new JavaTimeModule()` then it would be much more lines of code since this JavaTimeModule provides inappropriate date time serialization (as an array of numbers!) out of the box, so you would be in need to wire your own formatter into this `JavaTimeModule` somehow... not what you want probably.\r\n\r\nWatch out for the generic type of the custom serializer - it is suited for `&lt;LocalDateTime&gt;` here. Just modify it to fit your needs.","title":"Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default","body":"<p>While both Saifuddin Merchant and Dawid Świtoń-Maniakowski have provided different but equally working ways to make the library</p>\n<pre><code>\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;version&gt;2.15.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>actually work, my proposal is to remove it from your <code>pom.xml</code> completely and to write your own serializer (<em>as an inner static class in this example</em>):</p>\n<pre><code>public static class CustomDateSerializer extends com.fasterxml.jackson.databind.ser.std.StdSerializer&lt;LocalDateTime&gt; {\n        private static final long serialVersionUID = 4365897561L;\n        public CustomDateSerializer() { \n            this(null); \n        } \n        public CustomDateSerializer(Class&lt;LocalDateTime&gt; t) {\n            super(t); \n        }\n        @Override\n        public void serialize(\n                LocalDateTime value, JsonGenerator gen, SerializerProvider arg2) \n          throws IOException, JsonProcessingException {\n            gen.writeString(value.format(DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy hh:mm:ss&quot;)));\n        }\n    }\n\n</code></pre>\n<p>Next, annotate the time field of the object you want to serialize as JSON:</p>\n<pre><code>@JsonSerialize(using = CustomDateSerializer.class)\nprivate LocalDateTime time = LocalDateTime.now();\n\n</code></pre>\n<p>Not much of code, right? The <code>pom.xml</code> dependency is 5 lines of code itself. But then autowiring <code>Jackson2ObjectMapperBuilder</code> is 2 lines, or if you decide to go with registering <code>new JavaTimeModule()</code> then it would be much more lines of code since this JavaTimeModule provides inappropriate date time serialization (as an array of numbers!) out of the box, so you would be in need to wire your own formatter into this <code>JavaTimeModule</code> somehow... not what you want probably.</p>\n<p>Watch out for the generic type of the custom serializer - it is suited for <code>&lt;LocalDateTime&gt;</code> here. Just modify it to fit your needs.</p>\n"},{"tags":[],"owner":{"account_id":29077594,"reputation":1,"user_id":22274338,"display_name":"nerapa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695353766,"creation_date":1695353766,"answer_id":77154727,"question_id":67874510,"body_markdown":"I faced the same issue with Spring 3.1.2, after trying different approaches the solution that worked for me was composed of 2 changes:\r\n\r\n- Adding the dependency as follows (this project uses gradle)\r\n\r\n`implementation &#39;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.15.2&#39;`\r\n\r\n- Adding this annotation to the Instant property that was causing the problem\r\n\r\n`@JsonSerialize(using = InstantSerializer.class)`","title":"Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default","body":"<p>I faced the same issue with Spring 3.1.2, after trying different approaches the solution that worked for me was composed of 2 changes:</p>\n<ul>\n<li>Adding the dependency as follows (this project uses gradle)</li>\n</ul>\n<p><code>implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.15.2'</code></p>\n<ul>\n<li>Adding this annotation to the Instant property that was causing the problem</li>\n</ul>\n<p><code>@JsonSerialize(using = InstantSerializer.class)</code></p>\n"}],"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29339,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":67973800,"answer_count":6,"score":17,"last_activity_date":1695353766,"creation_date":1623079861,"question_id":67874510,"body_markdown":"After update from Spring Boot 2.4.5 to Spring 2.5.0 I noticed the following exceptions in the application logs:\r\n\r\n    Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: org.telegram.telegrambots.meta.api.objects.Update[&quot;my_chat_member&quot;]-&gt;org.telegram.telegrambots.meta.api.objects.ChatMemberUpdated[&quot;new_chat_member&quot;]-&gt;org.telegram.telegrambots.meta.api.objects.ChatMember[&quot;untilDateAsInstant&quot;])\r\n    \tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1276) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1514) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1215) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1059) ~[jackson-databind-2.12.3.jar!/:2.12.3]\r\n    \tat org.springframework.jms.support.converter.MappingJackson2MessageConverter.mapToTextMessage(MappingJackson2MessageConverter.java:279) ~[spring-jms-5.3.7.jar!/:5.3.7]\r\n    \tat org.springframework.jms.support.converter.MappingJackson2MessageConverter.toMessage(MappingJackson2MessageConverter.java:184) ~[spring-jms-5.3.7.jar!/:5.3.7]\r\n    \t... 37 common frames omitted\r\n\r\nthis is my pom.xml:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nI reverted to Spring Boot 2.4.5 and not everything works fine. What may be wrong with Spring Boot 2.5.0 ? \r\n\r\n**Updated**\r\n\r\nThe corresponding GitHub https://github.com/spring-projects/spring-boot/issues/26859","title":"Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default","body":"<p>After update from Spring Boot 2.4.5 to Spring 2.5.0 I noticed the following exceptions in the application logs:</p>\n<pre><code>Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: org.telegram.telegrambots.meta.api.objects.Update[&quot;my_chat_member&quot;]-&gt;org.telegram.telegrambots.meta.api.objects.ChatMemberUpdated[&quot;new_chat_member&quot;]-&gt;org.telegram.telegrambots.meta.api.objects.ChatMember[&quot;untilDateAsInstant&quot;])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1276) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1514) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1215) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1059) ~[jackson-databind-2.12.3.jar!/:2.12.3]\n    at org.springframework.jms.support.converter.MappingJackson2MessageConverter.mapToTextMessage(MappingJackson2MessageConverter.java:279) ~[spring-jms-5.3.7.jar!/:5.3.7]\n    at org.springframework.jms.support.converter.MappingJackson2MessageConverter.toMessage(MappingJackson2MessageConverter.java:184) ~[spring-jms-5.3.7.jar!/:5.3.7]\n    ... 37 common frames omitted\n</code></pre>\n<p>this is my pom.xml:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I reverted to Spring Boot 2.4.5 and not everything works fine. What may be wrong with Spring Boot 2.5.0 ?</p>\n<p><strong>Updated</strong></p>\n<p>The corresponding GitHub <a href=\"https://github.com/spring-projects/spring-boot/issues/26859\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/issues/26859</a></p>\n"},{"tags":["java","rmi"],"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1695338139,"post_id":77153765,"comment_id":136014782,"body_markdown":"@erickson: on Unix 1..1023 are privileged (and 0 isn&#39;t used because the socket calls replace it), but I don&#39;t know any system where 1099 is. OP: I don&#39;t think you can use the same port (on the same machine) for the registry and the server, but I don&#39;t have time to test right now. What Java are you using, and on what platform (at least OS, maybe ISA)?","body":"@erickson: on Unix 1..1023 are privileged (and 0 isn&#39;t used because the socket calls replace it), but I don&#39;t know any system where 1099 is. OP: I don&#39;t think you can use the same port (on the same machine) for the registry and the server, but I don&#39;t have time to test right now. What Java are you using, and on what platform (at least OS, maybe ISA)?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695338888,"post_id":77153765,"comment_id":136014854,"body_markdown":"You need to tell us whether the client got that exception on the lookup or on the RMI call. @dave_thompson_085 You can only reuse the same port for Registry and server if you start the Registry in the same JVM, but the OP isn&#39;t doing that. His `Server` object will use a system-allocated port, and it is only using the port on the command line to contact the Registry which is using it.","body":"You need to tell us whether the client got that exception on the lookup or on the RMI call. @dave_thompson_085 You can only reuse the same port for Registry and server if you start the Registry in the same JVM, but the OP isn&#39;t doing that. His <code>Server</code> object will use a system-allocated port, and it is only using the port on the command line to contact the Registry which is using it."},{"owner":{"account_id":1639049,"reputation":1,"user_id":1511862,"display_name":"William Dickerson"},"score":0,"creation_date":1695352625,"post_id":77153765,"comment_id":136015961,"body_markdown":"I edited the question to answer some of your comments. I think having root start the server may be the answer but the Oracle example doesn&#39;t mention that. Thank you.","body":"I edited the question to answer some of your comments. I think having root start the server may be the answer but the Oracle example doesn&#39;t mention that. Thank you."},{"owner":{"account_id":1639049,"reputation":1,"user_id":1511862,"display_name":"William Dickerson"},"score":0,"creation_date":1695353302,"post_id":77153765,"comment_id":136015998,"body_markdown":"Also, I don&#39;t know if I tried having the server create the registry when I tried other users. I&#39;ll try that.","body":"Also, I don&#39;t know if I tried having the server create the registry when I tried other users. I&#39;ll try that."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1695361838,"post_id":77153765,"comment_id":136016682,"body_markdown":"You&#39;re right. Not sure what I was thinking. 1099 is fine.","body":"You&#39;re right. Not sure what I was thinking. 1099 is fine."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695365147,"post_id":77153765,"comment_id":136017094,"body_markdown":"This is the *server* getting `connection refused`, to the Registry. *Ergo* there is something wrong with the configuration of `localhost` in that host. Try `127.0.0.1`. BTW Using a `file://` codebase is a complete waste of time unless the clients are in the same host, as they won&#39;t be able to use it: and, if the clients are in the same host, you don&#39;t need the codebase feature at all.","body":"This is the <i>server</i> getting <code>connection refused</code>, to the Registry. <i>Ergo</i> there is something wrong with the configuration of <code>localhost</code> in that host. Try <code>127.0.0.1</code>. BTW Using a <code>file:&#47;&#47;</code> codebase is a complete waste of time unless the clients are in the same host, as they won&#39;t be able to use it: and, if the clients are in the same host, you don&#39;t need the codebase feature at all."},{"owner":{"account_id":1639049,"reputation":1,"user_id":1511862,"display_name":"William Dickerson"},"score":0,"creation_date":1695399052,"post_id":77153765,"comment_id":136023912,"body_markdown":"I tested on another PC (Centos 8) and it worked for the other user for both localhost and 127.0.0.1.  They will be on the same host so I took out codebase.  The first PC is Centos 7.  &quot;/etc/hosts&quot; localhost looks the same as the 2nd PC so I don&#39;t know what&#39;s wrong with localhost.  Ping returns 127.0.0.1.  Traceroute localhost or 127.0.0.1 is the same.","body":"I tested on another PC (Centos 8) and it worked for the other user for both localhost and 127.0.0.1.  They will be on the same host so I took out codebase.  The first PC is Centos 7.  &quot;/etc/hosts&quot; localhost looks the same as the 2nd PC so I don&#39;t know what&#39;s wrong with localhost.  Ping returns 127.0.0.1.  Traceroute localhost or 127.0.0.1 is the same."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695459132,"post_id":77153765,"comment_id":136029584,"body_markdown":"Well it seems that your Registry isn&#39;t starting on some of your hosts for some reason.","body":"Well it seems that your Registry isn&#39;t starting on some of your hosts for some reason."}],"owner":{"account_id":1639049,"reputation":1,"user_id":1511862,"display_name":"William Dickerson"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695352734,"creation_date":1695331918,"question_id":77153765,"body_markdown":"I&#39;ve been using RMI for years but now I have a problem I would like to fix on my development PC before I eliminate RMI.  (We no longer need RPCs.)  I must have mangled something and now RMI only works for me and root (firewall stopped or not).  I&#39;ve been working on this all week and finally tried a simple test program.  This was the Oracle Hello RMI example.  I stopped and disabled rmiregistry and all Java programs that were running. The other user gets &quot;host:localhost port:1099&quot; then the infamous \r\n&quot;Server exception: java.rmi.ConnectException: Connection refused to host.&quot;  Running the script with sudo connects as expected.\r\n\r\ngo script\r\n```\r\n#!/bin/bash\r\n#\r\n#\r\n\r\nport=&quot;$1&quot;\r\n[[ $port = &quot;&quot; ]] &amp;&amp; port=&quot;1099&quot;\r\n\r\nip=&quot;localhost&quot;\r\n#ip=&quot;127.0.0.1&quot;\r\n\r\n#sudo systemctl stop rmiregistry\r\n\r\nwhile true; do sudo netstat -a --numeric-ports|grep $port; if [ $? -eq 0 ]; then echo -e &quot;$port is in use - waiting&quot;; sleep 1; else break; fi; done\r\n\r\nJAVA_BIN=&quot;/usr/java/jdk/bin&quot;\r\n\r\n$JAVA_BIN/javac -d &quot;.&quot; *.java\r\n\r\n$JAVA_BIN/rmiregistry $port &amp;\r\nrmiregistryPID=$!\r\necho -n &quot;rmiregistry:&quot;;ps -p $rmiregistryPID\r\n\r\nclassDir=&quot;.&quot;\r\n\r\n#strace\r\n$JAVA_BIN/java -classpath $classDir \\\r\n    -Djava.rmi.server.codebase=file:$classDir/ \\\r\n    -Djava.rmi.server.hostname=$ip \\\r\n    example.hello.Server $ip $port &amp;\r\nserverPID=$!\r\necho\r\n\r\nsleep 5;echo -e &quot;\\nServer PID:&quot;;ps -p $serverPID\r\n\r\n$JAVA_BIN/java  -classpath $classDir example.hello.Client $ip $port\r\nclientPID=$!;kill $clientPID\r\n\r\necho\r\nkill $rmiregistryPID; ps -p $rmiregistryPID\r\nkill $serverPID;ps -p $serverPID\r\n```\r\nHello.java\r\n```\r\npackage example.hello;\r\n\r\nimport java.rmi.Remote;\r\nimport java.rmi.RemoteException;\r\n\r\npublic interface Hello extends Remote {\r\n    String sayHello() throws RemoteException;\r\n}\r\n```\r\n\r\nServer.java\r\n```\r\npackage example.hello;\r\n\r\nimport java.rmi.registry.Registry;\r\nimport java.rmi.registry.LocateRegistry;\r\nimport java.rmi.Naming;\r\nimport java.rmi.RemoteException;\r\nimport java.rmi.server.UnicastRemoteObject;\r\n\r\npublic class Server extends UnicastRemoteObject implements Hello {\r\n\r\n    public Server() throws RemoteException {}\r\n\r\n    public String sayHello() throws RemoteException {\r\n        try {\r\n            return &quot;Hello, world!&quot;;\r\n        } catch (Exception ex) {\r\n            System.err.println(&quot;Server exception: &quot; + ex.toString());\r\n            ex.printStackTrace();\r\n            return &quot;error&quot;;\r\n        }\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n\r\n        try {\r\n            String host = (args.length &lt; 1) ? &quot;127.0.0.1&quot; : args[0];\r\n            String portString = (args.length &lt; 2) ? &quot;1099&quot; : args[1];\r\n            int port = Integer.parseInt(portString);\r\n            System.out.println(&quot;host:&quot;+host+&quot; port:&quot;+port);\r\n\r\n            Server obj = new Server();\r\n\r\n            //LocateRegistry.createRegistry(port);\r\n            String name = &quot;//&quot;+host+&quot;:&quot;+port+&quot;/Hello&quot;;\r\n            Naming.rebind(name, obj);\r\n            System.out.println(&quot;Server ready; host:&quot;+host+&quot; port:&quot;+port);\r\n        } catch (Exception ex) {\r\n            System.err.println(&quot;Server exception: &quot; + ex.toString());\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nClient.java\r\n```\r\npackage example.hello;\r\n\r\nimport java.rmi.registry.LocateRegistry;\r\nimport java.rmi.registry.Registry;\r\n\r\npublic class Client {\r\n\r\n    private Client() {}\r\n\r\n    public static void main(String[] args) {\r\n\r\n        String host = (args.length &lt; 1) ? null : args[0];\r\n        String portString = (args.length &lt; 2) ? &quot;1099&quot; : args[1];\r\n        int port = Integer.parseInt(portString);\r\n        System.out.println(&quot;host:&quot;+host+&quot; port:&quot;+port);\r\n        try {\r\n            Registry registry = LocateRegistry.getRegistry(host, port);\r\n            Hello stub = (Hello) registry.lookup(&quot;Hello&quot;);\r\n            String response = stub.sayHello();\r\n            System.out.println(&quot;\\nresponse: &quot; + response);\r\n        } catch (Exception e) {\r\n            System.err.println(&quot;Client exception: &quot; + e.toString());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nI tried copying the example directory and making everything owned by the other user.  I also tried strace on the server but the result looked the same.\r\n\r\nMore info: The example works for me or root but not for other users. The exception occurs when the server tries to bind to the rmiregistry. I tried other ports. We&#39;ve used 1099 for years and that&#39;s the default if you don&#39;t supply a port. I tried with the firewall stopped.\r\n\r\nWhen I have a chance, I&#39;m going to try having root start the server. Our system starts the registry and server at boot.\r\n\r\nThanks","title":"Why does this Hello RMI example work for me or root but not for other users?","body":"<p>I've been using RMI for years but now I have a problem I would like to fix on my development PC before I eliminate RMI.  (We no longer need RPCs.)  I must have mangled something and now RMI only works for me and root (firewall stopped or not).  I've been working on this all week and finally tried a simple test program.  This was the Oracle Hello RMI example.  I stopped and disabled rmiregistry and all Java programs that were running. The other user gets &quot;host:localhost port:1099&quot; then the infamous\n&quot;Server exception: java.rmi.ConnectException: Connection refused to host.&quot;  Running the script with sudo connects as expected.</p>\n<p>go script</p>\n<pre><code>#!/bin/bash\n#\n#\n\nport=&quot;$1&quot;\n[[ $port = &quot;&quot; ]] &amp;&amp; port=&quot;1099&quot;\n\nip=&quot;localhost&quot;\n#ip=&quot;127.0.0.1&quot;\n\n#sudo systemctl stop rmiregistry\n\nwhile true; do sudo netstat -a --numeric-ports|grep $port; if [ $? -eq 0 ]; then echo -e &quot;$port is in use - waiting&quot;; sleep 1; else break; fi; done\n\nJAVA_BIN=&quot;/usr/java/jdk/bin&quot;\n\n$JAVA_BIN/javac -d &quot;.&quot; *.java\n\n$JAVA_BIN/rmiregistry $port &amp;\nrmiregistryPID=$!\necho -n &quot;rmiregistry:&quot;;ps -p $rmiregistryPID\n\nclassDir=&quot;.&quot;\n\n#strace\n$JAVA_BIN/java -classpath $classDir \\\n    -Djava.rmi.server.codebase=file:$classDir/ \\\n    -Djava.rmi.server.hostname=$ip \\\n    example.hello.Server $ip $port &amp;\nserverPID=$!\necho\n\nsleep 5;echo -e &quot;\\nServer PID:&quot;;ps -p $serverPID\n\n$JAVA_BIN/java  -classpath $classDir example.hello.Client $ip $port\nclientPID=$!;kill $clientPID\n\necho\nkill $rmiregistryPID; ps -p $rmiregistryPID\nkill $serverPID;ps -p $serverPID\n</code></pre>\n<p>Hello.java</p>\n<pre><code>package example.hello;\n\nimport java.rmi.Remote;\nimport java.rmi.RemoteException;\n\npublic interface Hello extends Remote {\n    String sayHello() throws RemoteException;\n}\n</code></pre>\n<p>Server.java</p>\n<pre><code>package example.hello;\n\nimport java.rmi.registry.Registry;\nimport java.rmi.registry.LocateRegistry;\nimport java.rmi.Naming;\nimport java.rmi.RemoteException;\nimport java.rmi.server.UnicastRemoteObject;\n\npublic class Server extends UnicastRemoteObject implements Hello {\n\n    public Server() throws RemoteException {}\n\n    public String sayHello() throws RemoteException {\n        try {\n            return &quot;Hello, world!&quot;;\n        } catch (Exception ex) {\n            System.err.println(&quot;Server exception: &quot; + ex.toString());\n            ex.printStackTrace();\n            return &quot;error&quot;;\n        }\n    }\n\n    public static void main(String args[]) {\n\n        try {\n            String host = (args.length &lt; 1) ? &quot;127.0.0.1&quot; : args[0];\n            String portString = (args.length &lt; 2) ? &quot;1099&quot; : args[1];\n            int port = Integer.parseInt(portString);\n            System.out.println(&quot;host:&quot;+host+&quot; port:&quot;+port);\n\n            Server obj = new Server();\n\n            //LocateRegistry.createRegistry(port);\n            String name = &quot;//&quot;+host+&quot;:&quot;+port+&quot;/Hello&quot;;\n            Naming.rebind(name, obj);\n            System.out.println(&quot;Server ready; host:&quot;+host+&quot; port:&quot;+port);\n        } catch (Exception ex) {\n            System.err.println(&quot;Server exception: &quot; + ex.toString());\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Client.java</p>\n<pre><code>package example.hello;\n\nimport java.rmi.registry.LocateRegistry;\nimport java.rmi.registry.Registry;\n\npublic class Client {\n\n    private Client() {}\n\n    public static void main(String[] args) {\n\n        String host = (args.length &lt; 1) ? null : args[0];\n        String portString = (args.length &lt; 2) ? &quot;1099&quot; : args[1];\n        int port = Integer.parseInt(portString);\n        System.out.println(&quot;host:&quot;+host+&quot; port:&quot;+port);\n        try {\n            Registry registry = LocateRegistry.getRegistry(host, port);\n            Hello stub = (Hello) registry.lookup(&quot;Hello&quot;);\n            String response = stub.sayHello();\n            System.out.println(&quot;\\nresponse: &quot; + response);\n        } catch (Exception e) {\n            System.err.println(&quot;Client exception: &quot; + e.toString());\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I tried copying the example directory and making everything owned by the other user.  I also tried strace on the server but the result looked the same.</p>\n<p>More info: The example works for me or root but not for other users. The exception occurs when the server tries to bind to the rmiregistry. I tried other ports. We've used 1099 for years and that's the default if you don't supply a port. I tried with the firewall stopped.</p>\n<p>When I have a chance, I'm going to try having root start the server. Our system starts the registry and server at boot.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695059174,"post_id":77129318,"comment_id":135970710,"body_markdown":"Please take care of java naming conventions. package names should be lower case","body":"Please take care of java naming conventions. package names should be lower case"},{"owner":{"account_id":25505810,"reputation":29,"user_id":20370750,"display_name":"dddryinside"},"score":0,"creation_date":1695059352,"post_id":77129318,"comment_id":135970743,"body_markdown":"I didn&#39;t change anything in the package names and the application always worked correctly","body":"I didn&#39;t change anything in the package names and the application always worked correctly"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695059425,"post_id":77129318,"comment_id":135970755,"body_markdown":"Try to rebuild you project","body":"Try to rebuild you project"},{"owner":{"account_id":25505810,"reputation":29,"user_id":20370750,"display_name":"dddryinside"},"score":0,"creation_date":1695059565,"post_id":77129318,"comment_id":135970776,"body_markdown":"I&#39;ve already tried it - it doesn&#39;t help!","body":"I&#39;ve already tried it - it doesn&#39;t help!"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695059675,"post_id":77129318,"comment_id":135970796,"body_markdown":"Can you share a picture of the file structure and how you run the program?","body":"Can you share a picture of the file structure and how you run the program?"},{"owner":{"account_id":25505810,"reputation":29,"user_id":20370750,"display_name":"dddryinside"},"score":0,"creation_date":1695059883,"post_id":77129318,"comment_id":135970842,"body_markdown":"I run project using green triangle near class name","body":"I run project using green triangle near class name"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695059996,"post_id":77129318,"comment_id":135970855,"body_markdown":"https://www.geeksforgeeks.org/how-to-run-your-first-spring-boot-application-in-intellij-idea/","body":"<a href=\"https://www.geeksforgeeks.org/how-to-run-your-first-spring-boot-application-in-intellij-idea/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>"},{"owner":{"account_id":25505810,"reputation":29,"user_id":20370750,"display_name":"dddryinside"},"score":0,"creation_date":1695060191,"post_id":77129318,"comment_id":135970886,"body_markdown":"Thank you, but I know wery well how run projects in intelleje idea. Also, I taked screenshot which reflects structure of my project, pleese, look at it","body":"Thank you, but I know wery well how run projects in intelleje idea. Also, I taked screenshot which reflects structure of my project, pleese, look at it"}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695061098,"creation_date":1695061098,"answer_id":77129566,"question_id":77129318,"body_markdown":"Obviously something is wrong with your project. I can see the outer project `MusicJournal` and then the other `MusicJournal` project inside. This is kind of a weird identification of the project by Intellij IDEA. \r\n\r\nYou should delete your project from Intellij IDEA, take a look at the directory hierarchy, and then import the project again.","title":"Could not find or load main class in Spring Application","body":"<p>Obviously something is wrong with your project. I can see the outer project <code>MusicJournal</code> and then the other <code>MusicJournal</code> project inside. This is kind of a weird identification of the project by Intellij IDEA.</p>\n<p>You should delete your project from Intellij IDEA, take a look at the directory hierarchy, and then import the project again.</p>\n"},{"tags":[],"owner":{"account_id":26604716,"reputation":1,"user_id":20225791,"display_name":"etolzheesch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695111450,"creation_date":1695111450,"answer_id":77132796,"question_id":77129318,"body_markdown":"Basically, what I see in your picture is you have two MusicJournal projects with two .idea folders which include the metainformation of you projects. They may cause conflict. Try to recreate structure with only one project so that you have only one .idea, .mvn etc. folders and build project again","title":"Could not find or load main class in Spring Application","body":"<p>Basically, what I see in your picture is you have two MusicJournal projects with two .idea folders which include the metainformation of you projects. They may cause conflict. Try to recreate structure with only one project so that you have only one .idea, .mvn etc. folders and build project again</p>\n"},{"tags":[],"owner":{"account_id":10206781,"reputation":179,"user_id":7535274,"display_name":"HaiZi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695352439,"creation_date":1695352439,"answer_id":77154673,"question_id":77129318,"body_markdown":"You can specify the main class in the pom.xml file\r\n```xml\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.1.18.RELEASE&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;your main class&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;repackage&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```","title":"Could not find or load main class in Spring Application","body":"<p>You can specify the main class in the pom.xml file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.1.18.RELEASE&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;your main class&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;repackage&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":25505810,"reputation":29,"user_id":20370750,"display_name":"dddryinside"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1695352439,"creation_date":1695058854,"question_id":77129318,"body_markdown":"I create my web site on Spring and everything was going well, but in one second my application stopped starting and I see such a mistake: \r\n```\r\nError: Could not find or load main class com.MusicJournal.MusicJournal.MusicJournalApplication\r\nCaused by: java.lang.ClassNotFoundException: com.MusicJournal.MusicJournal.MusicJournalApplication\r\n```\r\n\r\nThis is my main class:\r\n```\r\npackage com.MusicJournal.MusicJournal;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class MusicJournalApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MusicJournalApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI tryed to rebuild project, reload IDE and PC, but it didn&#39;t help. It looks like a bug. So, how can I fix it?\r\n\r\nP.S. I use Intellije IDEA; Structure of my project on screenshot\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W7MyN.png","title":"Could not find or load main class in Spring Application","body":"<p>I create my web site on Spring and everything was going well, but in one second my application stopped starting and I see such a mistake:</p>\n<pre><code>Error: Could not find or load main class com.MusicJournal.MusicJournal.MusicJournalApplication\nCaused by: java.lang.ClassNotFoundException: com.MusicJournal.MusicJournal.MusicJournalApplication\n</code></pre>\n<p>This is my main class:</p>\n<pre><code>package com.MusicJournal.MusicJournal;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class MusicJournalApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MusicJournalApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>I tryed to rebuild project, reload IDE and PC, but it didn't help. It looks like a bug. So, how can I fix it?</p>\n<p>P.S. I use Intellije IDEA; Structure of my project on screenshot\n<a href=\"https://i.stack.imgur.com/W7MyN.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","maven","jlink","moditect"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1685885280,"post_id":76400567,"comment_id":134720433,"body_markdown":"First why using plugins as dependencies? Second why have you defined the modules output as `modules` because a usual modul-info.class must be located into `jar/root-location`... ?","body":"First why using plugins as dependencies? Second why have you defined the modules output as <code>modules</code> because a usual modul-info.class must be located into <code>jar&#47;root-location</code>... ?"},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1685886880,"post_id":76400567,"comment_id":134720627,"body_markdown":"Good point, removed moditect from dependencies. I used this output because that was provided in the example from Moditect&#39;s GitHub. What should it be?","body":"Good point, removed moditect from dependencies. I used this output because that was provided in the example from Moditect&#39;s GitHub. What should it be?"},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1685887299,"post_id":76400567,"comment_id":134720681,"body_markdown":"Also removed other plugins from dependencies &amp; updated my question.","body":"Also removed other plugins from dependencies &amp; updated my question."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695159255,"post_id":76400567,"comment_id":135986072,"body_markdown":"Can you show the jlink configuration? Does it even use `${project.build.directory}/modules`?","body":"Can you show the jlink configuration? Does it even use <code>${project.build.directory}&#47;modules</code>?"},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1695165479,"post_id":76400567,"comment_id":135986897,"body_markdown":"@dan1st The options you can provide are found here: https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options. I have the maven configuration but none of the optional options. I&#39;m not sure what you mean?","body":"@dan1st The options you can provide are found here: <a href=\"https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options\" rel=\"nofollow noreferrer\">github.com/openjfx/javafx-maven-plugin#javafxjlink-options</a>. I have the maven configuration but none of the optional options. I&#39;m not sure what you mean?"},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1695165835,"post_id":76400567,"comment_id":135986941,"body_markdown":"I also followed: https://openjfx.io/openjfx-docs/#maven. Runtime images &gt; Modular with Maven.","body":"I also followed: <a href=\"https://openjfx.io/openjfx-docs/#maven\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs/#maven</a>. Runtime images &gt; Modular with Maven."}],"answers":[{"comments":[{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1695242145,"post_id":77144657,"comment_id":135999996,"body_markdown":"Thanks for the reply. You do not need a main class that does not extend Application if you are using module-info.java, which I am. Where would I put the last execution you provided? And why would switching to Gradle make working with automatic modules easier?","body":"Thanks for the reply. You do not need a main class that does not extend Application if you are using module-info.java, which I am. Where would I put the last execution you provided? And why would switching to Gradle make working with automatic modules easier?"},{"owner":{"account_id":13552269,"reputation":126,"user_id":9776809,"display_name":"Ian Wang"},"score":1,"creation_date":1695257878,"post_id":77144657,"comment_id":136001601,"body_markdown":"in the executions of moditect plugin, please refer to pom.xml in the project link.  In gradle, it supports automatic modules. You won&#39;t have to figure out the module-info.java using jdeps, which sometime doesn&#39;t work very well and require more labor in larger 3rd-party dependencies such as some library of Spring framework","body":"in the executions of moditect plugin, please refer to pom.xml in the project link.  In gradle, it supports automatic modules. You won&#39;t have to figure out the module-info.java using jdeps, which sometime doesn&#39;t work very well and require more labor in larger 3rd-party dependencies such as some library of Spring framework"},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1695296803,"post_id":77144657,"comment_id":136007195,"body_markdown":"Thanks for the info, I want to try and get it working with Maven, but if that fails I will try and migrate to Gradle. The project link provided does not work, please can you edit your answer?","body":"Thanks for the info, I want to try and get it working with Maven, but if that fails I will try and migrate to Gradle. The project link provided does not work, please can you edit your answer?"},{"owner":{"account_id":13552269,"reputation":126,"user_id":9776809,"display_name":"Ian Wang"},"score":1,"creation_date":1695352142,"post_id":77144657,"comment_id":136015932,"body_markdown":"sorry for the late reply, I&#39;ve updated the link","body":"sorry for the late reply, I&#39;ve updated the link"},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1695387703,"post_id":77144657,"comment_id":136021495,"body_markdown":"After trying with Maven, I get the following error: `Error: Module com.fasterxml.jackson.databind not found, required by info.movito.themoviedbapi`.","body":"After trying with Maven, I get the following error: <code>Error: Module com.fasterxml.jackson.databind not found, required by info.movito.themoviedbapi</code>."},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1695387742,"post_id":77144657,"comment_id":136021501,"body_markdown":"I tried to generate the module-info source to add to the moditect execution, but jdeps outputs: `...\\m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.15.0\\jackson-databind-2.15.0.jar is a modular JAR file that cannot be specified with the --generate-module-info option`. Any ideas?","body":"I tried to generate the module-info source to add to the moditect execution, but jdeps outputs: <code>...\\m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databin&zwnj;&#8203;d\\2.15.0\\jackson-dat&zwnj;&#8203;abind-2.15.0.jar is a modular JAR file that cannot be specified with the --generate-module-info option</code>. Any ideas?"},{"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"score":0,"creation_date":1695390482,"post_id":77144657,"comment_id":136022091,"body_markdown":"I switched to Gradle and it worked with no issues. I will use this from now on, thank you.","body":"I switched to Gradle and it worked with no issues. I will use this from now on, thank you."},{"owner":{"account_id":13552269,"reputation":126,"user_id":9776809,"display_name":"Ian Wang"},"score":1,"creation_date":1695441057,"post_id":77144657,"comment_id":136028421,"body_markdown":"By &#39;modular jar&#39; it means that it&#39;s already modularized, has a `module-info.java` and does not need additional settings in Moditect. But as far as I can recall, you&#39;ll encounter some multi-release problems using `jackson-databind`, which is another topic. Glad that you have no problems with Gradle :)","body":"By &#39;modular jar&#39; it means that it&#39;s already modularized, has a <code>module-info.java</code> and does not need additional settings in Moditect. But as far as I can recall, you&#39;ll encounter some multi-release problems using <code>jackson-databind</code>, which is another topic. Glad that you have no problems with Gradle :)"}],"tags":[],"owner":{"account_id":13552269,"reputation":126,"user_id":9776809,"display_name":"Ian Wang"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695352121,"creation_date":1695230214,"answer_id":77144657,"question_id":76400567,"body_markdown":"# Problem\r\n\r\n- JLink does not work with [automatic modules][1] (i.e. packages without a module-info.java file)\r\n\r\n# Steps\r\n\r\n## Copy dependencies to {build_folder}/dependency using [maven-dependency-plugin][2]\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.6.0&lt;/version&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;copy&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n## Add module-info for automatic modules using [moditect-maven-plugin][3]\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.moditect&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;add-module-infos&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;generate-resources&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;add-module-info&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;outputDirectory&gt;\r\n\t\t\t\t\t${project.build.directory}/dependency\r\n\t\t\t\t&lt;/outputDirectory&gt;\r\n\t\t\t\t&lt;modules&gt;\r\n\t\t\t\t\t&lt;module&gt;\r\n\t\t\t\t\t\t&lt;artifact&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;2.13.0&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/artifact&gt;\r\n\t\t\t\t\t\t&lt;moduleInfoSource&gt;\r\n\t\t\t\t\t\t\tmodule org.apache.commons.io {\r\n\t\t\t\t\t\t\texports org.apache.commons.io;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.build;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.charset;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.comparator;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.file;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.file.attribute;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.file.spi;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.filefilter;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.function;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.input;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.input.buffer;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.monitor;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.output;\r\n\t\t\t\t\t\t\texports org.apache.commons.io.serialization;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&lt;/moduleInfoSource&gt;\r\n\t\t\t\t\t&lt;/module&gt;\r\n\t\t\t\t&lt;/modules&gt;\r\n\t\t\t\t&lt;overwriteExistingFiles&gt;true&lt;/overwriteExistingFiles&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n### How to get the `&lt;moduleInfoSource&gt;` content?\r\n\r\n- go to the folder with the required (dependency) .jar file\r\n- If you use Intellij IDEA, in project view, there&#39;s a section named `External Libraries`. Double-click on the entry, right click on the `.jar`, open in -&gt; Explorer.\r\n- open command prompt in that folder\r\n- `jdeps -generate-module-info . {jar_file_name}.jar`\r\n- Make sure the PATH environment variable is correct\r\n- open the generated `module-info.java` file with a text editor and copy the content\r\n- paste to the `&lt;moduleInfoSource&gt;` section\r\n\r\n## Create runtime image (with jlink, in the backend)\r\n\r\n- please change the `&lt;modules&gt;`, `&lt;launcher&gt;`sections according to your project information.\r\n- If your module is non-modular, it is important that the main class does not  extend `javafx.Application` directly. We can create a launcher class which looks like this (reference pending):\r\n\r\n&gt; launcher class\r\n```java\r\npublic class Launcher {  \r\n    public static void main(String[] args) {  \r\n        HelloApplication.main(args);  \r\n    }  \r\n}\r\n```\r\n\r\n&gt; pom.xml\r\n```xml\r\n&lt;execution&gt;\r\n\t&lt;id&gt;create-runtime-image&lt;/id&gt;\r\n\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t&lt;goals&gt;\r\n\t\t&lt;goal&gt;create-runtime-image&lt;/goal&gt;\r\n\t&lt;/goals&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;jarInclusionPolicy&gt;APP_WITH_DEPENDENCIES&lt;/jarInclusionPolicy&gt;\r\n\t\t&lt;modulePath&gt;\r\n\t\t\t&lt;path&gt;${project.build.directory}/${project.artifactId}-${project.version}.${project.packaging}&lt;/path&gt;\r\n\t\t\t&lt;path&gt;${project.build.directory}/dependency&lt;/path&gt;\r\n\t\t&lt;/modulePath&gt;\r\n\t\t&lt;modules&gt;\r\n\t\t\t&lt;module&gt;com.example.soone&lt;/module&gt;\r\n\t\t&lt;/modules&gt;\r\n\t\t&lt;launcher&gt;\r\n\t\t\t&lt;name&gt;hello&lt;/name&gt;\r\n\t\t\t&lt;module&gt;com.example.soone/com.example.soone.Launcher&lt;/module&gt;\r\n\t\t&lt;/launcher&gt;\r\n\t\t&lt;outputDirectory&gt;\r\n\t\t\t${project.build.directory}/jlink-image\r\n\t\t&lt;/outputDirectory&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/execution&gt;\r\n```\r\n\r\n&gt; [link to demo repository][4]\r\n\r\n\r\n# Recommendation\r\n\r\n- I suggest changing the build system to Gradle, it works better with automatic modules and you won&#39;t have to manually figure out the dependencies, saves a lot of time especially when working with JavaFX.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/46741907/what-is-an-automatic-module\r\n  [2]: https://maven.apache.org/plugins/maven-dependency-plugin/\r\n  [3]: https://github.com/moditect/moditect#adding-module-descriptors-to-existing-jar-files\r\n  [4]: https://github.com/0100Light/so-javafx-moditect","title":"Using Moditect to add module-info to existing maven dependencies","body":"<h1>Problem</h1>\n<ul>\n<li>JLink does not work with <a href=\"https://stackoverflow.com/questions/46741907/what-is-an-automatic-module\">automatic modules</a> (i.e. packages without a module-info.java file)</li>\n</ul>\n<h1>Steps</h1>\n<h2>Copy dependencies to {build_folder}/dependency using <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/\" rel=\"nofollow noreferrer\">maven-dependency-plugin</a></h2>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.6.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;copy&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<h2>Add module-info for automatic modules using <a href=\"https://github.com/moditect/moditect#adding-module-descriptors-to-existing-jar-files\" rel=\"nofollow noreferrer\">moditect-maven-plugin</a></h2>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.moditect&lt;/groupId&gt;\n    &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0.Final&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;add-module-infos&lt;/id&gt;\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;add-module-info&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;outputDirectory&gt;\n                    ${project.build.directory}/dependency\n                &lt;/outputDirectory&gt;\n                &lt;modules&gt;\n                    &lt;module&gt;\n                        &lt;artifact&gt;\n                            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n                            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n                            &lt;version&gt;2.13.0&lt;/version&gt;\n                        &lt;/artifact&gt;\n                        &lt;moduleInfoSource&gt;\n                            module org.apache.commons.io {\n                            exports org.apache.commons.io;\n                            exports org.apache.commons.io.build;\n                            exports org.apache.commons.io.charset;\n                            exports org.apache.commons.io.comparator;\n                            exports org.apache.commons.io.file;\n                            exports org.apache.commons.io.file.attribute;\n                            exports org.apache.commons.io.file.spi;\n                            exports org.apache.commons.io.filefilter;\n                            exports org.apache.commons.io.function;\n                            exports org.apache.commons.io.input;\n                            exports org.apache.commons.io.input.buffer;\n                            exports org.apache.commons.io.monitor;\n                            exports org.apache.commons.io.output;\n                            exports org.apache.commons.io.serialization;\n\n                            }\n\n                        &lt;/moduleInfoSource&gt;\n                    &lt;/module&gt;\n                &lt;/modules&gt;\n                &lt;overwriteExistingFiles&gt;true&lt;/overwriteExistingFiles&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<h3>How to get the <code>&lt;moduleInfoSource&gt;</code> content?</h3>\n<ul>\n<li>go to the folder with the required (dependency) .jar file</li>\n<li>If you use Intellij IDEA, in project view, there's a section named <code>External Libraries</code>. Double-click on the entry, right click on the <code>.jar</code>, open in -&gt; Explorer.</li>\n<li>open command prompt in that folder</li>\n<li><code>jdeps -generate-module-info . {jar_file_name}.jar</code></li>\n<li>Make sure the PATH environment variable is correct</li>\n<li>open the generated <code>module-info.java</code> file with a text editor and copy the content</li>\n<li>paste to the <code>&lt;moduleInfoSource&gt;</code> section</li>\n</ul>\n<h2>Create runtime image (with jlink, in the backend)</h2>\n<ul>\n<li>please change the <code>&lt;modules&gt;</code>, <code>&lt;launcher&gt;</code>sections according to your project information.</li>\n<li>If your module is non-modular, it is important that the main class does not  extend <code>javafx.Application</code> directly. We can create a launcher class which looks like this (reference pending):</li>\n</ul>\n<blockquote>\n<p>launcher class</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class Launcher {  \n    public static void main(String[] args) {  \n        HelloApplication.main(args);  \n    }  \n}\n</code></pre>\n<blockquote>\n<p>pom.xml</p>\n</blockquote>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;execution&gt;\n    &lt;id&gt;create-runtime-image&lt;/id&gt;\n    &lt;phase&gt;package&lt;/phase&gt;\n    &lt;goals&gt;\n        &lt;goal&gt;create-runtime-image&lt;/goal&gt;\n    &lt;/goals&gt;\n    &lt;configuration&gt;\n        &lt;jarInclusionPolicy&gt;APP_WITH_DEPENDENCIES&lt;/jarInclusionPolicy&gt;\n        &lt;modulePath&gt;\n            &lt;path&gt;${project.build.directory}/${project.artifactId}-${project.version}.${project.packaging}&lt;/path&gt;\n            &lt;path&gt;${project.build.directory}/dependency&lt;/path&gt;\n        &lt;/modulePath&gt;\n        &lt;modules&gt;\n            &lt;module&gt;com.example.soone&lt;/module&gt;\n        &lt;/modules&gt;\n        &lt;launcher&gt;\n            &lt;name&gt;hello&lt;/name&gt;\n            &lt;module&gt;com.example.soone/com.example.soone.Launcher&lt;/module&gt;\n        &lt;/launcher&gt;\n        &lt;outputDirectory&gt;\n            ${project.build.directory}/jlink-image\n        &lt;/outputDirectory&gt;\n    &lt;/configuration&gt;\n&lt;/execution&gt;\n</code></pre>\n<blockquote>\n<p><a href=\"https://github.com/0100Light/so-javafx-moditect\" rel=\"nofollow noreferrer\">link to demo repository</a></p>\n</blockquote>\n<h1>Recommendation</h1>\n<ul>\n<li>I suggest changing the build system to Gradle, it works better with automatic modules and you won't have to manually figure out the dependencies, saves a lot of time especially when working with JavaFX.</li>\n</ul>\n"}],"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":77144657,"answer_count":1,"score":6,"last_activity_date":1695352121,"creation_date":1685883892,"question_id":76400567,"body_markdown":"I am using JavaFX and have some dependencies that are not automatic modules.  When trying to run `mvn clean javafx:jlink` I get the following error:\r\n\r\n```\r\nError: automatic module cannot be used with jlink: org.apache.commons.io from [...]`\r\n```\r\nThis also errored for `org.apache.commons.commons-lang3` and `commons-codec.commons-codec`. Which error I was shown was random.\r\n\r\nSo I looked into using jdeps to generate a module info for the dependency, e.g.\r\n```\r\njdeps --generate-module-info tmp .../.m2/repository/commons-io/commons-io/2.12.0/commons-io-2.12.0.jar\r\n```\r\n\r\nThen I used Moditect to add the module-info to the existing jar:\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.moditect&lt;/groupId&gt;\r\n    &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;add-module-infos&lt;/id&gt;\r\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;add-module-info&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n                &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\r\n                &lt;modules&gt;\r\n                    &lt;module&gt;\r\n                        &lt;artifact&gt;\r\n                            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.12.0&lt;/version&gt;\r\n                        &lt;/artifact&gt;\r\n                        &lt;moduleInfoSource&gt;\r\n                            module org.apache.commons.io {\r\n                                exports org.apache.commons.io;\r\n                                exports org.apache.commons.io.build;\r\n                                exports org.apache.commons.io.charset;\r\n                                exports org.apache.commons.io.comparator;\r\n                                exports org.apache.commons.io.file;\r\n                                exports org.apache.commons.io.file.attribute;\r\n                                exports org.apache.commons.io.file.spi;\r\n                                exports org.apache.commons.io.filefilter;\r\n                                exports org.apache.commons.io.function;\r\n                                exports org.apache.commons.io.input;\r\n                                exports org.apache.commons.io.input.buffer;\r\n                                exports org.apache.commons.io.monitor;\r\n                                exports org.apache.commons.io.output;\r\n                                exports org.apache.commons.io.serialization;\r\n                            }\r\n                        &lt;/moduleInfoSource&gt;\r\n                    &lt;/module&gt;\r\n                    &lt;module&gt;\r\n                        &lt;artifact&gt;\r\n                            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.12.0&lt;/version&gt;\r\n                        &lt;/artifact&gt;\r\n                        &lt;moduleInfoSource&gt;\r\n                            module org.apache.commons.lang3 {\r\n                                requires transitive java.desktop;\r\n\r\n                                exports org.apache.commons.lang3;\r\n                                exports org.apache.commons.lang3.arch;\r\n                                exports org.apache.commons.lang3.builder;\r\n                                exports org.apache.commons.lang3.compare;\r\n                                exports org.apache.commons.lang3.concurrent;\r\n                                exports org.apache.commons.lang3.concurrent.locks;\r\n                                exports org.apache.commons.lang3.event;\r\n                                exports org.apache.commons.lang3.exception;\r\n                                exports org.apache.commons.lang3.function;\r\n                                exports org.apache.commons.lang3.math;\r\n                                exports org.apache.commons.lang3.mutable;\r\n                                exports org.apache.commons.lang3.reflect;\r\n                                exports org.apache.commons.lang3.stream;\r\n                                exports org.apache.commons.lang3.text;\r\n                                exports org.apache.commons.lang3.text.translate;\r\n                                exports org.apache.commons.lang3.time;\r\n                                exports org.apache.commons.lang3.tuple;\r\n                            }\r\n                        &lt;/moduleInfoSource&gt;\r\n                    &lt;/module&gt;\r\n                    &lt;module&gt;\r\n                        &lt;artifact&gt;\r\n                            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.15&lt;/version&gt;\r\n                        &lt;/artifact&gt;\r\n                        &lt;moduleInfoSource&gt;\r\n                            module org.apache.commons.codec {\r\n                                exports org.apache.commons.codec;\r\n                                exports org.apache.commons.codec.binary;\r\n                                exports org.apache.commons.codec.cli;\r\n                                exports org.apache.commons.codec.digest;\r\n                                exports org.apache.commons.codec.language;\r\n                                exports org.apache.commons.codec.language.bm;\r\n                                exports org.apache.commons.codec.net;\r\n                            }\r\n                        &lt;/moduleInfoSource&gt;\r\n                    &lt;/module&gt;\r\n                &lt;/modules&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nBut I am still getting the same errors.\r\n\r\nMy module-info:\r\n```java\r\nmodule uk.co.conoregan.showrenamer {\r\n    requires info.movito.themoviedbapi;\r\n    requires java.prefs;\r\n    requires javafx.fxml;\r\n    requires javafx.controls;\r\n    requires org.apache.commons.io;\r\n    requires org.slf4j;\r\n\r\n    opens uk.co.conoregan.showrenamer to javafx.fxml, javafx.graphics;\r\n    opens uk.co.conoregan.showrenamer.controller to javafx.fxml;\r\n\r\n    exports uk.co.conoregan.showrenamer;\r\n    exports uk.co.conoregan.showrenamer.api;\r\n    exports uk.co.conoregan.showrenamer.config.preference;\r\n    exports uk.co.conoregan.showrenamer.config.property;\r\n    exports uk.co.conoregan.showrenamer.controller;\r\n    exports uk.co.conoregan.showrenamer.suggestion;\r\n    exports uk.co.conoregan.showrenamer.util;\r\n}\r\n```\r\n\r\nMy full pom.xml:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;name&gt;ShowRenamer&lt;/name&gt;\r\n    &lt;groupId&gt;uk.co.conoregan.show-renamer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;show-renamer&lt;/artifactId&gt;\r\n    &lt;version&gt;1.4.0&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.java.version&gt;17&lt;/maven.compiler.java.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;junit.version&gt;5.9.3&lt;/junit.version&gt;\r\n        &lt;javafx.version&gt;20.0.1&lt;/javafx.version&gt;\r\n        &lt;slf4j.version&gt;2.0.7&lt;/slf4j.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-simple --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- JavaFX --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://search.maven.org/artifact/com.github.holgerbrandl/themoviedbapi --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.holgerbrandl&lt;/groupId&gt;\r\n            &lt;artifactId&gt;themoviedbapi&lt;/artifactId&gt;\r\n            &lt;version&gt;1.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;testResources&gt;\r\n            &lt;testResource&gt;\r\n                &lt;directory&gt;${project.basedir}/src/test/resources&lt;/directory&gt;\r\n            &lt;/testResource&gt;\r\n        &lt;/testResources&gt;\r\n\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.moditect&lt;/groupId&gt;\r\n                &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;add-module-infos&lt;/id&gt;\r\n                        &lt;phase&gt;generate-resources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;add-module-info&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\r\n                            &lt;modules&gt;\r\n                                &lt;module&gt;\r\n                                    &lt;artifact&gt;\r\n                                        &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n                                        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n                                        &lt;version&gt;2.12.0&lt;/version&gt;\r\n                                    &lt;/artifact&gt;\r\n                                    &lt;moduleInfoSource&gt;\r\n                                        module org.apache.commons.io {\r\n                                            exports org.apache.commons.io;\r\n                                            exports org.apache.commons.io.build;\r\n                                            exports org.apache.commons.io.charset;\r\n                                            exports org.apache.commons.io.comparator;\r\n                                            exports org.apache.commons.io.file;\r\n                                            exports org.apache.commons.io.file.attribute;\r\n                                            exports org.apache.commons.io.file.spi;\r\n                                            exports org.apache.commons.io.filefilter;\r\n                                            exports org.apache.commons.io.function;\r\n                                            exports org.apache.commons.io.input;\r\n                                            exports org.apache.commons.io.input.buffer;\r\n                                            exports org.apache.commons.io.monitor;\r\n                                            exports org.apache.commons.io.output;\r\n                                            exports org.apache.commons.io.serialization;\r\n                                        }\r\n                                    &lt;/moduleInfoSource&gt;\r\n                                &lt;/module&gt;\r\n                                &lt;module&gt;\r\n                                    &lt;artifact&gt;\r\n                                        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                                        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                                        &lt;version&gt;3.12.0&lt;/version&gt;\r\n                                    &lt;/artifact&gt;\r\n                                    &lt;moduleInfoSource&gt;\r\n                                        module org.apache.commons.lang3 {\r\n                                            requires transitive java.desktop;\r\n\r\n                                            exports org.apache.commons.lang3;\r\n                                            exports org.apache.commons.lang3.arch;\r\n                                            exports org.apache.commons.lang3.builder;\r\n                                            exports org.apache.commons.lang3.compare;\r\n                                            exports org.apache.commons.lang3.concurrent;\r\n                                            exports org.apache.commons.lang3.concurrent.locks;\r\n                                            exports org.apache.commons.lang3.event;\r\n                                            exports org.apache.commons.lang3.exception;\r\n                                            exports org.apache.commons.lang3.function;\r\n                                            exports org.apache.commons.lang3.math;\r\n                                            exports org.apache.commons.lang3.mutable;\r\n                                            exports org.apache.commons.lang3.reflect;\r\n                                            exports org.apache.commons.lang3.stream;\r\n                                            exports org.apache.commons.lang3.text;\r\n                                            exports org.apache.commons.lang3.text.translate;\r\n                                            exports org.apache.commons.lang3.time;\r\n                                            exports org.apache.commons.lang3.tuple;\r\n                                        }\r\n                                    &lt;/moduleInfoSource&gt;\r\n                                &lt;/module&gt;\r\n                                &lt;module&gt;\r\n                                    &lt;artifact&gt;\r\n                                        &lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n                                        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n                                        &lt;version&gt;1.15&lt;/version&gt;\r\n                                    &lt;/artifact&gt;\r\n                                    &lt;moduleInfoSource&gt;\r\n                                        module org.apache.commons.codec {\r\n                                            exports org.apache.commons.codec;\r\n                                            exports org.apache.commons.codec.binary;\r\n                                            exports org.apache.commons.codec.cli;\r\n                                            exports org.apache.commons.codec.digest;\r\n                                            exports org.apache.commons.codec.language;\r\n                                            exports org.apache.commons.codec.language.bm;\r\n                                            exports org.apache.commons.codec.net;\r\n                                        }\r\n                                    &lt;/moduleInfoSource&gt;\r\n                                &lt;/module&gt;\r\n                            &lt;/modules&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${maven.compiler.java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${maven.compiler.java.version}&lt;/target&gt;\r\n                    &lt;release&gt;${maven.compiler.java.version}&lt;/release&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;uk.co.conoregan.showrenamer/uk.co.conoregan.showrenamer.ShowRenamerApplication&lt;/mainClass&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nI also ran `mvn dependency:tree` to generate the following:\r\n```\r\n[INFO] uk.co.conoregan.show-renamer:show-renamer:jar:1.4.0\r\n[INFO] +- org.slf4j:slf4j-api:jar:2.0.7:compile\r\n[INFO] +- org.slf4j:slf4j-simple:jar:2.0.7:runtime\r\n[INFO] +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test\r\n[INFO] |  +- org.opentest4j:opentest4j:jar:1.2.0:test\r\n[INFO] |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test\r\n[INFO] |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\r\n[INFO] +- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test\r\n[INFO] |  \\- org.junit.platform:junit-platform-engine:jar:1.9.3:test\r\n[INFO] +- org.mockito:mockito-core:jar:5.3.1:test\r\n[INFO] |  +- net.bytebuddy:byte-buddy:jar:1.14.4:test\r\n[INFO] |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.4:test\r\n[INFO] |  \\- org.objenesis:objenesis:jar:3.3:test\r\n[INFO] +- org.openjfx:javafx-controls:jar:20.0.1:compile\r\n[INFO] |  +- org.openjfx:javafx-controls:jar:win:20.0.1:compile\r\n[INFO] |  \\- org.openjfx:javafx-graphics:jar:20.0.1:compile\r\n[INFO] |     +- org.openjfx:javafx-graphics:jar:win:20.0.1:compile\r\n[INFO] |     \\- org.openjfx:javafx-base:jar:20.0.1:compile\r\n[INFO] |        \\- org.openjfx:javafx-base:jar:win:20.0.1:compile\r\n[INFO] +- org.openjfx:javafx-fxml:jar:20.0.1:compile\r\n[INFO] |  \\- org.openjfx:javafx-fxml:jar:win:20.0.1:compile\r\n[INFO] +- commons-io:commons-io:jar:2.12.0:compile\r\n[INFO] \\- com.github.holgerbrandl:themoviedbapi:jar:1.15:compile\r\n[INFO]    +- org.slf4j:jcl-over-slf4j:jar:2.0.7:runtime\r\n[INFO]    +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.0:runtime\r\n[INFO]    +- com.fasterxml.jackson.core:jackson-core:jar:2.15.0:runtime\r\n[INFO]    +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.0:runtime\r\n[INFO]    +- com.google.guava:guava:jar:31.1-jre:runtime\r\n[INFO]    |  +- com.google.guava:failureaccess:jar:1.0.1:runtime\r\n[INFO]    |  +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:runtime\r\n[INFO]    |  +- com.google.code.findbugs:jsr305:jar:3.0.2:runtime\r\n[INFO]    |  +- org.checkerframework:checker-qual:jar:3.12.0:runtime\r\n[INFO]    |  +- com.google.errorprone:error_prone_annotations:jar:2.11.0:runtime\r\n[INFO]    |  \\- com.google.j2objc:j2objc-annotations:jar:1.3:runtime\r\n[INFO]    +- org.apache.commons:commons-lang3:jar:3.12.0:runtime\r\n[INFO]    \\- commons-codec:commons-codec:jar:1.15:runtime\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n","title":"Using Moditect to add module-info to existing maven dependencies","body":"<p>I am using JavaFX and have some dependencies that are not automatic modules.  When trying to run <code>mvn clean javafx:jlink</code> I get the following error:</p>\n<pre><code>Error: automatic module cannot be used with jlink: org.apache.commons.io from [...]`\n</code></pre>\n<p>This also errored for <code>org.apache.commons.commons-lang3</code> and <code>commons-codec.commons-codec</code>. Which error I was shown was random.</p>\n<p>So I looked into using jdeps to generate a module info for the dependency, e.g.</p>\n<pre><code>jdeps --generate-module-info tmp .../.m2/repository/commons-io/commons-io/2.12.0/commons-io-2.12.0.jar\n</code></pre>\n<p>Then I used Moditect to add the module-info to the existing jar:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.moditect&lt;/groupId&gt;\n    &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0.Final&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;add-module-infos&lt;/id&gt;\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;add-module-info&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\n                &lt;modules&gt;\n                    &lt;module&gt;\n                        &lt;artifact&gt;\n                            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n                            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n                            &lt;version&gt;2.12.0&lt;/version&gt;\n                        &lt;/artifact&gt;\n                        &lt;moduleInfoSource&gt;\n                            module org.apache.commons.io {\n                                exports org.apache.commons.io;\n                                exports org.apache.commons.io.build;\n                                exports org.apache.commons.io.charset;\n                                exports org.apache.commons.io.comparator;\n                                exports org.apache.commons.io.file;\n                                exports org.apache.commons.io.file.attribute;\n                                exports org.apache.commons.io.file.spi;\n                                exports org.apache.commons.io.filefilter;\n                                exports org.apache.commons.io.function;\n                                exports org.apache.commons.io.input;\n                                exports org.apache.commons.io.input.buffer;\n                                exports org.apache.commons.io.monitor;\n                                exports org.apache.commons.io.output;\n                                exports org.apache.commons.io.serialization;\n                            }\n                        &lt;/moduleInfoSource&gt;\n                    &lt;/module&gt;\n                    &lt;module&gt;\n                        &lt;artifact&gt;\n                            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n                            &lt;version&gt;3.12.0&lt;/version&gt;\n                        &lt;/artifact&gt;\n                        &lt;moduleInfoSource&gt;\n                            module org.apache.commons.lang3 {\n                                requires transitive java.desktop;\n\n                                exports org.apache.commons.lang3;\n                                exports org.apache.commons.lang3.arch;\n                                exports org.apache.commons.lang3.builder;\n                                exports org.apache.commons.lang3.compare;\n                                exports org.apache.commons.lang3.concurrent;\n                                exports org.apache.commons.lang3.concurrent.locks;\n                                exports org.apache.commons.lang3.event;\n                                exports org.apache.commons.lang3.exception;\n                                exports org.apache.commons.lang3.function;\n                                exports org.apache.commons.lang3.math;\n                                exports org.apache.commons.lang3.mutable;\n                                exports org.apache.commons.lang3.reflect;\n                                exports org.apache.commons.lang3.stream;\n                                exports org.apache.commons.lang3.text;\n                                exports org.apache.commons.lang3.text.translate;\n                                exports org.apache.commons.lang3.time;\n                                exports org.apache.commons.lang3.tuple;\n                            }\n                        &lt;/moduleInfoSource&gt;\n                    &lt;/module&gt;\n                    &lt;module&gt;\n                        &lt;artifact&gt;\n                            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n                            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n                            &lt;version&gt;1.15&lt;/version&gt;\n                        &lt;/artifact&gt;\n                        &lt;moduleInfoSource&gt;\n                            module org.apache.commons.codec {\n                                exports org.apache.commons.codec;\n                                exports org.apache.commons.codec.binary;\n                                exports org.apache.commons.codec.cli;\n                                exports org.apache.commons.codec.digest;\n                                exports org.apache.commons.codec.language;\n                                exports org.apache.commons.codec.language.bm;\n                                exports org.apache.commons.codec.net;\n                            }\n                        &lt;/moduleInfoSource&gt;\n                    &lt;/module&gt;\n                &lt;/modules&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>But I am still getting the same errors.</p>\n<p>My module-info:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module uk.co.conoregan.showrenamer {\n    requires info.movito.themoviedbapi;\n    requires java.prefs;\n    requires javafx.fxml;\n    requires javafx.controls;\n    requires org.apache.commons.io;\n    requires org.slf4j;\n\n    opens uk.co.conoregan.showrenamer to javafx.fxml, javafx.graphics;\n    opens uk.co.conoregan.showrenamer.controller to javafx.fxml;\n\n    exports uk.co.conoregan.showrenamer;\n    exports uk.co.conoregan.showrenamer.api;\n    exports uk.co.conoregan.showrenamer.config.preference;\n    exports uk.co.conoregan.showrenamer.config.property;\n    exports uk.co.conoregan.showrenamer.controller;\n    exports uk.co.conoregan.showrenamer.suggestion;\n    exports uk.co.conoregan.showrenamer.util;\n}\n</code></pre>\n<p>My full pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;name&gt;ShowRenamer&lt;/name&gt;\n    &lt;groupId&gt;uk.co.conoregan.show-renamer&lt;/groupId&gt;\n    &lt;artifactId&gt;show-renamer&lt;/artifactId&gt;\n    &lt;version&gt;1.4.0&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.java.version&gt;17&lt;/maven.compiler.java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.9.3&lt;/junit.version&gt;\n        &lt;javafx.version&gt;20.0.1&lt;/javafx.version&gt;\n        &lt;slf4j.version&gt;2.0.7&lt;/slf4j.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-simple --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;version&gt;5.3.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- JavaFX --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://search.maven.org/artifact/com.github.holgerbrandl/themoviedbapi --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.holgerbrandl&lt;/groupId&gt;\n            &lt;artifactId&gt;themoviedbapi&lt;/artifactId&gt;\n            &lt;version&gt;1.15&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;${project.basedir}/src/test/resources&lt;/directory&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.moditect&lt;/groupId&gt;\n                &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.0.0.Final&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;add-module-infos&lt;/id&gt;\n                        &lt;phase&gt;generate-resources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;add-module-info&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\n                            &lt;modules&gt;\n                                &lt;module&gt;\n                                    &lt;artifact&gt;\n                                        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n                                        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n                                        &lt;version&gt;2.12.0&lt;/version&gt;\n                                    &lt;/artifact&gt;\n                                    &lt;moduleInfoSource&gt;\n                                        module org.apache.commons.io {\n                                            exports org.apache.commons.io;\n                                            exports org.apache.commons.io.build;\n                                            exports org.apache.commons.io.charset;\n                                            exports org.apache.commons.io.comparator;\n                                            exports org.apache.commons.io.file;\n                                            exports org.apache.commons.io.file.attribute;\n                                            exports org.apache.commons.io.file.spi;\n                                            exports org.apache.commons.io.filefilter;\n                                            exports org.apache.commons.io.function;\n                                            exports org.apache.commons.io.input;\n                                            exports org.apache.commons.io.input.buffer;\n                                            exports org.apache.commons.io.monitor;\n                                            exports org.apache.commons.io.output;\n                                            exports org.apache.commons.io.serialization;\n                                        }\n                                    &lt;/moduleInfoSource&gt;\n                                &lt;/module&gt;\n                                &lt;module&gt;\n                                    &lt;artifact&gt;\n                                        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                                        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n                                        &lt;version&gt;3.12.0&lt;/version&gt;\n                                    &lt;/artifact&gt;\n                                    &lt;moduleInfoSource&gt;\n                                        module org.apache.commons.lang3 {\n                                            requires transitive java.desktop;\n\n                                            exports org.apache.commons.lang3;\n                                            exports org.apache.commons.lang3.arch;\n                                            exports org.apache.commons.lang3.builder;\n                                            exports org.apache.commons.lang3.compare;\n                                            exports org.apache.commons.lang3.concurrent;\n                                            exports org.apache.commons.lang3.concurrent.locks;\n                                            exports org.apache.commons.lang3.event;\n                                            exports org.apache.commons.lang3.exception;\n                                            exports org.apache.commons.lang3.function;\n                                            exports org.apache.commons.lang3.math;\n                                            exports org.apache.commons.lang3.mutable;\n                                            exports org.apache.commons.lang3.reflect;\n                                            exports org.apache.commons.lang3.stream;\n                                            exports org.apache.commons.lang3.text;\n                                            exports org.apache.commons.lang3.text.translate;\n                                            exports org.apache.commons.lang3.time;\n                                            exports org.apache.commons.lang3.tuple;\n                                        }\n                                    &lt;/moduleInfoSource&gt;\n                                &lt;/module&gt;\n                                &lt;module&gt;\n                                    &lt;artifact&gt;\n                                        &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n                                        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n                                        &lt;version&gt;1.15&lt;/version&gt;\n                                    &lt;/artifact&gt;\n                                    &lt;moduleInfoSource&gt;\n                                        module org.apache.commons.codec {\n                                            exports org.apache.commons.codec;\n                                            exports org.apache.commons.codec.binary;\n                                            exports org.apache.commons.codec.cli;\n                                            exports org.apache.commons.codec.digest;\n                                            exports org.apache.commons.codec.language;\n                                            exports org.apache.commons.codec.language.bm;\n                                            exports org.apache.commons.codec.net;\n                                        }\n                                    &lt;/moduleInfoSource&gt;\n                                &lt;/module&gt;\n                            &lt;/modules&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${maven.compiler.java.version}&lt;/source&gt;\n                    &lt;target&gt;${maven.compiler.java.version}&lt;/target&gt;\n                    &lt;release&gt;${maven.compiler.java.version}&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;uk.co.conoregan.showrenamer/uk.co.conoregan.showrenamer.ShowRenamerApplication&lt;/mainClass&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I also ran <code>mvn dependency:tree</code> to generate the following:</p>\n<pre><code>[INFO] uk.co.conoregan.show-renamer:show-renamer:jar:1.4.0\n[INFO] +- org.slf4j:slf4j-api:jar:2.0.7:compile\n[INFO] +- org.slf4j:slf4j-simple:jar:2.0.7:runtime\n[INFO] +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test\n[INFO] |  +- org.opentest4j:opentest4j:jar:1.2.0:test\n[INFO] |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test\n[INFO] |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\n[INFO] +- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test\n[INFO] |  \\- org.junit.platform:junit-platform-engine:jar:1.9.3:test\n[INFO] +- org.mockito:mockito-core:jar:5.3.1:test\n[INFO] |  +- net.bytebuddy:byte-buddy:jar:1.14.4:test\n[INFO] |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.4:test\n[INFO] |  \\- org.objenesis:objenesis:jar:3.3:test\n[INFO] +- org.openjfx:javafx-controls:jar:20.0.1:compile\n[INFO] |  +- org.openjfx:javafx-controls:jar:win:20.0.1:compile\n[INFO] |  \\- org.openjfx:javafx-graphics:jar:20.0.1:compile\n[INFO] |     +- org.openjfx:javafx-graphics:jar:win:20.0.1:compile\n[INFO] |     \\- org.openjfx:javafx-base:jar:20.0.1:compile\n[INFO] |        \\- org.openjfx:javafx-base:jar:win:20.0.1:compile\n[INFO] +- org.openjfx:javafx-fxml:jar:20.0.1:compile\n[INFO] |  \\- org.openjfx:javafx-fxml:jar:win:20.0.1:compile\n[INFO] +- commons-io:commons-io:jar:2.12.0:compile\n[INFO] \\- com.github.holgerbrandl:themoviedbapi:jar:1.15:compile\n[INFO]    +- org.slf4j:jcl-over-slf4j:jar:2.0.7:runtime\n[INFO]    +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.0:runtime\n[INFO]    +- com.fasterxml.jackson.core:jackson-core:jar:2.15.0:runtime\n[INFO]    +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.0:runtime\n[INFO]    +- com.google.guava:guava:jar:31.1-jre:runtime\n[INFO]    |  +- com.google.guava:failureaccess:jar:1.0.1:runtime\n[INFO]    |  +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:runtime\n[INFO]    |  +- com.google.code.findbugs:jsr305:jar:3.0.2:runtime\n[INFO]    |  +- org.checkerframework:checker-qual:jar:3.12.0:runtime\n[INFO]    |  +- com.google.errorprone:error_prone_annotations:jar:2.11.0:runtime\n[INFO]    |  \\- com.google.j2objc:j2objc-annotations:jar:1.3:runtime\n[INFO]    +- org.apache.commons:commons-lang3:jar:3.12.0:runtime\n[INFO]    \\- commons-codec:commons-codec:jar:1.15:runtime\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1695319922,"post_id":77151752,"comment_id":136012177,"body_markdown":"Check out the stack trace - it shows you the issue is in your User.hashCode method. The problem is with your Lombok generated hashcode, which just like the JSON issue&#39;s you&#39;ve been researching, has its hashcode implementation set to go through ALL your relationships to calculate equality and the hashcode, and it does so recursively on all these objects in the entire object graph. Don&#39;t use Lombok.. or don&#39;t use it for anything you don&#39;t explicitly need anyway. Check out the known issues with &#39;@Data&#39; annotations.","body":"Check out the stack trace - it shows you the issue is in your User.hashCode method. The problem is with your Lombok generated hashcode, which just like the JSON issue&#39;s you&#39;ve been researching, has its hashcode implementation set to go through ALL your relationships to calculate equality and the hashcode, and it does so recursively on all these objects in the entire object graph. Don&#39;t use Lombok.. or don&#39;t use it for anything you don&#39;t explicitly need anyway. Check out the known issues with &#39;@Data&#39; annotations."}],"answers":[{"comments":[{"owner":{"account_id":6414502,"reputation":69,"user_id":4973124,"accept_rate":27,"display_name":"cornstar94"},"score":0,"creation_date":1695351362,"post_id":77153556,"comment_id":136015871,"body_markdown":"Thanks, I removed the `followee.getFollowers().add(follower)` line and there is no longer any stackoverflow.\n\nTo paraphrase your explanation - am I right to say that what I was doing here was that because I already added the `followee` to the `follower`, in the next line I try to load the follower, which has a following (which is a user) that has followers that has followings etc.. and hence resulting in a stackoverflow?","body":"Thanks, I removed the <code>followee.getFollowers().add(follower)</code> line and there is no longer any stackoverflow.  To paraphrase your explanation - am I right to say that what I was doing here was that because I already added the <code>followee</code> to the <code>follower</code>, in the next line I try to load the follower, which has a following (which is a user) that has followers that has followings etc.. and hence resulting in a stackoverflow?"}],"tags":[],"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695329076,"creation_date":1695329076,"answer_id":77153556,"question_id":77151752,"body_markdown":"Your **following** attribute is mapped to **followers**, end the end they have the same value. But since you do this:\r\n\r\n    follower.getFollowing().add(followee);\r\n    followee.getFollowers().add(follower);\r\n\r\nYou add the **followee** as a following and the **follower** as a follower. But the follower already contains a followee. So when you will try to load each, It will try to load the other and so on until StackOverflow.\r\n\r\nAccording to me, you don&#39;t really need to have both **following** and **followers** list. According to your design, if a user is your follower, you are also his follower. So you just have to keep one list. But if **following** and **followers** lists should be different, you have to remove the **mappedBy** attribute.","title":"Self Join many to many relationship leads to Stack overflow","body":"<p>Your <strong>following</strong> attribute is mapped to <strong>followers</strong>, end the end they have the same value. But since you do this:</p>\n<pre><code>follower.getFollowing().add(followee);\nfollowee.getFollowers().add(follower);\n</code></pre>\n<p>You add the <strong>followee</strong> as a following and the <strong>follower</strong> as a follower. But the follower already contains a followee. So when you will try to load each, It will try to load the other and so on until StackOverflow.</p>\n<p>According to me, you don't really need to have both <strong>following</strong> and <strong>followers</strong> list. According to your design, if a user is your follower, you are also his follower. So you just have to keep one list. But if <strong>following</strong> and <strong>followers</strong> lists should be different, you have to remove the <strong>mappedBy</strong> attribute.</p>\n"}],"owner":{"account_id":6414502,"reputation":69,"user_id":4973124,"accept_rate":27,"display_name":"cornstar94"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77153556,"answer_count":1,"score":1,"last_activity_date":1695351624,"creation_date":1695311023,"question_id":77151752,"body_markdown":"I am new to spring boot and Java and I am trying to establish a follower-following relationship by self joining my `tb_user` table.\r\n\r\nHowever I am getting a stackoverflow error. I tried to solve it but using `@JsonIgnore` and `@JsonIdentityInfo` like what many answers suggested but it doesn&#39;t seem to work. \r\n\r\nBelow is my code:\r\n\r\n\r\n**User.java**\r\n```\r\npackage com.codaholic.shop.models.security.user;\r\n\r\nimport com.codaholic.shop.models.Article;\r\nimport com.fasterxml.jackson.annotation.*;\r\nimport jakarta.persistence.*;\r\nimport lombok.*;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Set;\r\nimport java.util.UUID;\r\nimport java.util.List;\r\nimport java.util.Collection;\r\n\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;tb_user&quot;)\r\npublic class User implements UserDetails{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private UUID id;\r\n\r\n    private String firstName;\r\n    private String lastName;\r\n    private String email;\r\n    private String password;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Role role;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Builder.Default\r\n    private UserStatus status = UserStatus.ACTIVE;\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return List.of(new SimpleGrantedAuthority(role.name()));\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public String getPassword(){\r\n        return password;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired(){\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked(){\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired(){\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n\r\n    @OneToMany\r\n    private List&lt;Article&gt; articles;\r\n\r\n\r\n    @ManyToMany(\r\n            cascade={CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH},\r\n            fetch = FetchType.LAZY)\r\n    @JoinTable(\r\n            name = &quot;tb_follower_following&quot;,\r\n            joinColumns = @JoinColumn(name=&quot;followee_id&quot;, referencedColumnName = &quot;id&quot;), // the owning side of the r/s is this user\r\n            inverseJoinColumns = @JoinColumn(name=&quot;follower_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    )\r\n    @JsonIgnore\r\n    private Set&lt;User&gt; followers;\r\n\r\n\r\n    @ManyToMany(mappedBy=&quot;followers&quot;)\r\n    @JsonIgnore\r\n    private Set&lt;User&gt; following;\r\n\r\n}\r\n```\r\n\r\n**UserRepository.java**\r\n\r\n```\r\npackage com.codaholic.shop.repository;\r\nimport com.codaholic.shop.models.security.user.User;\r\nimport com.codaholic.shop.models.security.user.UserStatus;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.repository.query.Param;\r\n\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\n\r\npublic interface UserRepository extends JpaRepository&lt;User, UUID&gt; {\r\n\r\n    Optional&lt;User&gt; findByEmail(String email);\r\n    Optional&lt;User&gt; findById(UUID id);\r\n    Optional&lt;User&gt; findByIdAndStatus(@Param(&quot;id&quot;) UUID id, UserStatus status);\r\n}\r\n```\r\n\r\n**FollowingService.java**\r\n```\r\npackage com.codaholic.shop.services;\r\n\r\nimport com.codaholic.shop.dto.FollowingResponseDTO;\r\nimport com.codaholic.shop.exceptions.ResourceNotFoundException;\r\nimport com.codaholic.shop.models.security.user.FollowingRequest;\r\nimport com.codaholic.shop.models.security.user.User;\r\nimport com.codaholic.shop.models.security.user.UserStatus;\r\nimport com.codaholic.shop.repository.UserRepository;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.UUID;\r\n\r\n@Service\r\npublic class FollowingService {\r\n\r\n    private final UserRepository userRepository;\r\n\r\n    FollowingService(UserRepository userRepository){\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    public FollowingResponseDTO createFollowing(FollowingRequest request) throws ResourceNotFoundException {\r\n        UUID followerId = request.getFollowerId();\r\n        User follower = userRepository.findByIdAndStatus(followerId, UserStatus.ACTIVE)\r\n            .orElseThrow(\r\n                ()-&gt; new ResourceNotFoundException(String.format(&quot;User %s is not found&quot;, followerId))\r\n            );\r\n        UUID followingId = request.getFollowingId();\r\n\r\n        User followee = userRepository.findByIdAndStatus(followingId, UserStatus.ACTIVE)\r\n            .orElseThrow(\r\n                () -&gt; new ResourceNotFoundException(String.format(&quot;User %s is not found&quot;, followingId))\r\n            );\r\n\r\n        // Next create a new relation by setting their status to ACTIVE\r\n        follower.getFollowing().add(followee);\r\n        followee.getFollowers().add(follower);\r\n\r\n        userRepository.save(follower);\r\n        userRepository.save(followee);\r\n\r\n        FollowingResponseDTO followingResult = new FollowingResponseDTO();\r\n        followingResult.setFollowerId(followerId);\r\n        followingResult.setFollowingId(followingId);\r\n        followingResult.setSuccess(true);\r\n\r\n        return followingResult;\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n**FollowingController**\r\n```\r\npackage com.codaholic.shop.controllers;\r\n\r\nimport com.codaholic.shop.dto.FollowingResponseDTO;\r\nimport com.codaholic.shop.exceptions.ResourceNotFoundException;\r\nimport com.codaholic.shop.models.security.user.FollowingRequest;\r\nimport com.codaholic.shop.services.FollowingService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/following&quot;)\r\npublic class FollowingController {\r\n    private final FollowingService followingService;\r\n\r\n    @Autowired\r\n    public FollowingController(FollowingService followingService) {\r\n        this.followingService = followingService;\r\n    }\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;FollowingResponseDTO&gt; createFollowing(@RequestBody FollowingRequest request) throws ResourceNotFoundException {\r\n        FollowingResponseDTO result = followingService.createFollowing(request);\r\n        return ResponseEntity.ok().body(result);\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nStack trace:\r\n```\r\n2023-09-21T23:41:46.787+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \r\n    select\r\n        u1_0.id,\r\n        u1_0.email,\r\n        u1_0.first_name,\r\n        u1_0.last_name,\r\n        u1_0.password,\r\n        u1_0.role,\r\n        u1_0.status \r\n    from\r\n        tb_user u1_0 \r\n    where\r\n        u1_0.id=? \r\n        and u1_0.status=?\r\nHibernate: \r\n    select\r\n        u1_0.id,\r\n        u1_0.email,\r\n        u1_0.first_name,\r\n        u1_0.last_name,\r\n        u1_0.password,\r\n        u1_0.role,\r\n        u1_0.status \r\n    from\r\n        tb_user u1_0 \r\n    where\r\n        u1_0.id=? \r\n        and u1_0.status=?\r\n2023-09-21T23:41:46.791+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \r\n    select\r\n        u1_0.id,\r\n        u1_0.email,\r\n        u1_0.first_name,\r\n        u1_0.last_name,\r\n        u1_0.password,\r\n        u1_0.role,\r\n        u1_0.status \r\n    from\r\n        tb_user u1_0 \r\n    where\r\n        u1_0.id=? \r\n        and u1_0.status=?\r\nHibernate: \r\n    select\r\n        u1_0.id,\r\n        u1_0.email,\r\n        u1_0.first_name,\r\n        u1_0.last_name,\r\n        u1_0.password,\r\n        u1_0.role,\r\n        u1_0.status \r\n    from\r\n        tb_user u1_0 \r\n    where\r\n        u1_0.id=? \r\n        and u1_0.status=?\r\n2023-09-21T23:41:46.794+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \r\n    select\r\n        f1_0.follower_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.followee_id \r\n    where\r\n        f1_0.follower_id=?\r\nHibernate: \r\n    select\r\n        f1_0.follower_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.followee_id \r\n    where\r\n        f1_0.follower_id=?\r\n2023-09-21T23:41:46.796+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \r\n    select\r\n        f1_0.followee_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.follower_id \r\n    where\r\n        f1_0.followee_id=?\r\nHibernate: \r\n    select\r\n        f1_0.followee_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.follower_id \r\n    where\r\n        f1_0.followee_id=?\r\n2023-09-21T23:41:46.798+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \r\n    select\r\n        f1_0.follower_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.followee_id \r\n    where\r\n        f1_0.follower_id=?\r\nHibernate: \r\n    select\r\n        f1_0.follower_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.followee_id \r\n    where\r\n        f1_0.follower_id=?\r\n2023-09-21T23:41:46.800+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \r\n    select\r\n        f1_0.followee_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.follower_id \r\n    where\r\n        f1_0.followee_id=?\r\nHibernate: \r\n    select\r\n        f1_0.followee_id,\r\n        f1_1.id,\r\n        f1_1.email,\r\n        f1_1.first_name,\r\n        f1_1.last_name,\r\n        f1_1.password,\r\n        f1_1.role,\r\n        f1_1.status \r\n    from\r\n        tb_follower_following f1_0 \r\n    join\r\n        tb_user f1_1 \r\n            on f1_1.id=f1_0.follower_id \r\n    where\r\n        f1_0.followee_id=?\r\n2023-09-21T23:41:46.810+08:00 DEBUG 75113 --- [nio-3000-exec-2] o.s.web.servlet.DispatcherServlet        : Failed to complete request: jakarta.servlet.ServletException: Handler dispatch failed: java.lang.StackOverflowError\r\n2023-09-21T23:41:46.811+08:00 ERROR 75113 --- [nio-3000-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.StackOverflowError] with root cause\r\n\r\njava.lang.StackOverflowError: null\r\n        at org.hibernate.collection.spi.PersistentSet.hashCode(PersistentSet.java:413) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n        at com.codaholic.shop.models.security.user.User.hashCode(User.java:16) ~[main/:na]\r\n        at java.base/java.util.AbstractSet.hashCode(AbstractSet.java:124) ~[na:na]\r\n        at org.hibernate.collection.spi.PersistentSet.hashCode(PersistentSet.java:413) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n        at com.codaholic.shop.models.security.user.User.hashCode(User.java:16) ~[main/:na]\r\n        at java.base/java.util.AbstractSet.hashCode(AbstractSet.java:124) ~[na:na]\r\n        at org.hibernate.collection.spi.PersistentSet.hashCode(PersistentSet.java:413) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\r\n\r\n```\r\n\r\nEdit: \r\nAs per @RomanC&#39;s explanation, I have since removed adding one side of the list and now the stackoverflow is resolved.\r\ni.e from \r\n```\r\n        follower.getFollowing().add(followee);\r\n        followee.getFollowers().add(follower);\r\n\r\n        userRepository.save(follower);\r\n        userRepository.save(followee);\r\n```\r\n\r\nto \r\n\r\n```\r\n        follower.getFollowing().add(followee);\r\n        userRepository.save(follower);\r\n```\r\n\r\nSimilarly, I also made amendments to remove the `mappedBy` as suggested since both the follower and following can &quot;own&quot; the relationship.\r\n\r\n```\r\n    @ManyToMany(\r\n            cascade={CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH},\r\n            fetch = FetchType.LAZY)\r\n    @JoinTable(\r\n            name = &quot;tb_follower_following&quot;,\r\n            joinColumns = @JoinColumn(name=&quot;following_id&quot;, referencedColumnName = &quot;id&quot;), // ie. the FK is the follower_id\r\n            inverseJoinColumns = @JoinColumn(name=&quot;follower_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    )\r\n    private Set&lt;User&gt; followers;\r\n\r\n\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;tb_follower_following&quot;,\r\n            joinColumns = @JoinColumn(name=&quot;follower_id&quot;, referencedColumnName = &quot;id&quot;), // ie. the FK is the following_id\r\n            inverseJoinColumns = @JoinColumn(name=&quot;following_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    )\r\n    private Set&lt;User&gt; following;\r\n\r\n```\r\n\r\nAlso realized that the @JsonIgnore was no longer necessary.\r\n","title":"Self Join many to many relationship leads to Stack overflow","body":"<p>I am new to spring boot and Java and I am trying to establish a follower-following relationship by self joining my <code>tb_user</code> table.</p>\n<p>However I am getting a stackoverflow error. I tried to solve it but using <code>@JsonIgnore</code> and <code>@JsonIdentityInfo</code> like what many answers suggested but it doesn't seem to work.</p>\n<p>Below is my code:</p>\n<p><strong>User.java</strong></p>\n<pre><code>package com.codaholic.shop.models.security.user;\n\nimport com.codaholic.shop.models.Article;\nimport com.fasterxml.jackson.annotation.*;\nimport jakarta.persistence.*;\nimport lombok.*;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Set;\nimport java.util.UUID;\nimport java.util.List;\nimport java.util.Collection;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;tb_user&quot;)\npublic class User implements UserDetails{\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID id;\n\n    private String firstName;\n    private String lastName;\n    private String email;\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    private Role role;\n\n    @Enumerated(EnumType.STRING)\n    @Builder.Default\n    private UserStatus status = UserStatus.ACTIVE;\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return List.of(new SimpleGrantedAuthority(role.name()));\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public String getPassword(){\n        return password;\n    }\n\n    @Override\n    public boolean isAccountNonExpired(){\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked(){\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired(){\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n\n    @OneToMany\n    private List&lt;Article&gt; articles;\n\n\n    @ManyToMany(\n            cascade={CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH},\n            fetch = FetchType.LAZY)\n    @JoinTable(\n            name = &quot;tb_follower_following&quot;,\n            joinColumns = @JoinColumn(name=&quot;followee_id&quot;, referencedColumnName = &quot;id&quot;), // the owning side of the r/s is this user\n            inverseJoinColumns = @JoinColumn(name=&quot;follower_id&quot;, referencedColumnName = &quot;id&quot;)\n    )\n    @JsonIgnore\n    private Set&lt;User&gt; followers;\n\n\n    @ManyToMany(mappedBy=&quot;followers&quot;)\n    @JsonIgnore\n    private Set&lt;User&gt; following;\n\n}\n</code></pre>\n<p><strong>UserRepository.java</strong></p>\n<pre><code>package com.codaholic.shop.repository;\nimport com.codaholic.shop.models.security.user.User;\nimport com.codaholic.shop.models.security.user.UserStatus;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.repository.query.Param;\n\nimport java.util.Optional;\nimport java.util.UUID;\n\npublic interface UserRepository extends JpaRepository&lt;User, UUID&gt; {\n\n    Optional&lt;User&gt; findByEmail(String email);\n    Optional&lt;User&gt; findById(UUID id);\n    Optional&lt;User&gt; findByIdAndStatus(@Param(&quot;id&quot;) UUID id, UserStatus status);\n}\n</code></pre>\n<p><strong>FollowingService.java</strong></p>\n<pre><code>package com.codaholic.shop.services;\n\nimport com.codaholic.shop.dto.FollowingResponseDTO;\nimport com.codaholic.shop.exceptions.ResourceNotFoundException;\nimport com.codaholic.shop.models.security.user.FollowingRequest;\nimport com.codaholic.shop.models.security.user.User;\nimport com.codaholic.shop.models.security.user.UserStatus;\nimport com.codaholic.shop.repository.UserRepository;\nimport org.springframework.stereotype.Service;\n\nimport java.util.UUID;\n\n@Service\npublic class FollowingService {\n\n    private final UserRepository userRepository;\n\n    FollowingService(UserRepository userRepository){\n        this.userRepository = userRepository;\n    }\n\n    public FollowingResponseDTO createFollowing(FollowingRequest request) throws ResourceNotFoundException {\n        UUID followerId = request.getFollowerId();\n        User follower = userRepository.findByIdAndStatus(followerId, UserStatus.ACTIVE)\n            .orElseThrow(\n                ()-&gt; new ResourceNotFoundException(String.format(&quot;User %s is not found&quot;, followerId))\n            );\n        UUID followingId = request.getFollowingId();\n\n        User followee = userRepository.findByIdAndStatus(followingId, UserStatus.ACTIVE)\n            .orElseThrow(\n                () -&gt; new ResourceNotFoundException(String.format(&quot;User %s is not found&quot;, followingId))\n            );\n\n        // Next create a new relation by setting their status to ACTIVE\n        follower.getFollowing().add(followee);\n        followee.getFollowers().add(follower);\n\n        userRepository.save(follower);\n        userRepository.save(followee);\n\n        FollowingResponseDTO followingResult = new FollowingResponseDTO();\n        followingResult.setFollowerId(followerId);\n        followingResult.setFollowingId(followingId);\n        followingResult.setSuccess(true);\n\n        return followingResult;\n\n    }\n\n}\n</code></pre>\n<p><strong>FollowingController</strong></p>\n<pre><code>package com.codaholic.shop.controllers;\n\nimport com.codaholic.shop.dto.FollowingResponseDTO;\nimport com.codaholic.shop.exceptions.ResourceNotFoundException;\nimport com.codaholic.shop.models.security.user.FollowingRequest;\nimport com.codaholic.shop.services.FollowingService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/api/v1/following&quot;)\npublic class FollowingController {\n    private final FollowingService followingService;\n\n    @Autowired\n    public FollowingController(FollowingService followingService) {\n        this.followingService = followingService;\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;FollowingResponseDTO&gt; createFollowing(@RequestBody FollowingRequest request) throws ResourceNotFoundException {\n        FollowingResponseDTO result = followingService.createFollowing(request);\n        return ResponseEntity.ok().body(result);\n\n    }\n}\n\n</code></pre>\n<p>Stack trace:</p>\n<pre><code>2023-09-21T23:41:46.787+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \n    select\n        u1_0.id,\n        u1_0.email,\n        u1_0.first_name,\n        u1_0.last_name,\n        u1_0.password,\n        u1_0.role,\n        u1_0.status \n    from\n        tb_user u1_0 \n    where\n        u1_0.id=? \n        and u1_0.status=?\nHibernate: \n    select\n        u1_0.id,\n        u1_0.email,\n        u1_0.first_name,\n        u1_0.last_name,\n        u1_0.password,\n        u1_0.role,\n        u1_0.status \n    from\n        tb_user u1_0 \n    where\n        u1_0.id=? \n        and u1_0.status=?\n2023-09-21T23:41:46.791+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \n    select\n        u1_0.id,\n        u1_0.email,\n        u1_0.first_name,\n        u1_0.last_name,\n        u1_0.password,\n        u1_0.role,\n        u1_0.status \n    from\n        tb_user u1_0 \n    where\n        u1_0.id=? \n        and u1_0.status=?\nHibernate: \n    select\n        u1_0.id,\n        u1_0.email,\n        u1_0.first_name,\n        u1_0.last_name,\n        u1_0.password,\n        u1_0.role,\n        u1_0.status \n    from\n        tb_user u1_0 \n    where\n        u1_0.id=? \n        and u1_0.status=?\n2023-09-21T23:41:46.794+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \n    select\n        f1_0.follower_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.followee_id \n    where\n        f1_0.follower_id=?\nHibernate: \n    select\n        f1_0.follower_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.followee_id \n    where\n        f1_0.follower_id=?\n2023-09-21T23:41:46.796+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \n    select\n        f1_0.followee_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.follower_id \n    where\n        f1_0.followee_id=?\nHibernate: \n    select\n        f1_0.followee_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.follower_id \n    where\n        f1_0.followee_id=?\n2023-09-21T23:41:46.798+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \n    select\n        f1_0.follower_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.followee_id \n    where\n        f1_0.follower_id=?\nHibernate: \n    select\n        f1_0.follower_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.followee_id \n    where\n        f1_0.follower_id=?\n2023-09-21T23:41:46.800+08:00 DEBUG 75113 --- [nio-3000-exec-2] org.hibernate.SQL                        : \n    select\n        f1_0.followee_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.follower_id \n    where\n        f1_0.followee_id=?\nHibernate: \n    select\n        f1_0.followee_id,\n        f1_1.id,\n        f1_1.email,\n        f1_1.first_name,\n        f1_1.last_name,\n        f1_1.password,\n        f1_1.role,\n        f1_1.status \n    from\n        tb_follower_following f1_0 \n    join\n        tb_user f1_1 \n            on f1_1.id=f1_0.follower_id \n    where\n        f1_0.followee_id=?\n2023-09-21T23:41:46.810+08:00 DEBUG 75113 --- [nio-3000-exec-2] o.s.web.servlet.DispatcherServlet        : Failed to complete request: jakarta.servlet.ServletException: Handler dispatch failed: java.lang.StackOverflowError\n2023-09-21T23:41:46.811+08:00 ERROR 75113 --- [nio-3000-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.StackOverflowError] with root cause\n\njava.lang.StackOverflowError: null\n        at org.hibernate.collection.spi.PersistentSet.hashCode(PersistentSet.java:413) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n        at com.codaholic.shop.models.security.user.User.hashCode(User.java:16) ~[main/:na]\n        at java.base/java.util.AbstractSet.hashCode(AbstractSet.java:124) ~[na:na]\n        at org.hibernate.collection.spi.PersistentSet.hashCode(PersistentSet.java:413) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n        at com.codaholic.shop.models.security.user.User.hashCode(User.java:16) ~[main/:na]\n        at java.base/java.util.AbstractSet.hashCode(AbstractSet.java:124) ~[na:na]\n        at org.hibernate.collection.spi.PersistentSet.hashCode(PersistentSet.java:413) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]\n\n</code></pre>\n<p>Edit:\nAs per @RomanC's explanation, I have since removed adding one side of the list and now the stackoverflow is resolved.\ni.e from</p>\n<pre><code>        follower.getFollowing().add(followee);\n        followee.getFollowers().add(follower);\n\n        userRepository.save(follower);\n        userRepository.save(followee);\n</code></pre>\n<p>to</p>\n<pre><code>        follower.getFollowing().add(followee);\n        userRepository.save(follower);\n</code></pre>\n<p>Similarly, I also made amendments to remove the <code>mappedBy</code> as suggested since both the follower and following can &quot;own&quot; the relationship.</p>\n<pre><code>    @ManyToMany(\n            cascade={CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH},\n            fetch = FetchType.LAZY)\n    @JoinTable(\n            name = &quot;tb_follower_following&quot;,\n            joinColumns = @JoinColumn(name=&quot;following_id&quot;, referencedColumnName = &quot;id&quot;), // ie. the FK is the follower_id\n            inverseJoinColumns = @JoinColumn(name=&quot;follower_id&quot;, referencedColumnName = &quot;id&quot;)\n    )\n    private Set&lt;User&gt; followers;\n\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;tb_follower_following&quot;,\n            joinColumns = @JoinColumn(name=&quot;follower_id&quot;, referencedColumnName = &quot;id&quot;), // ie. the FK is the following_id\n            inverseJoinColumns = @JoinColumn(name=&quot;following_id&quot;, referencedColumnName = &quot;id&quot;)\n    )\n    private Set&lt;User&gt; following;\n\n</code></pre>\n<p>Also realized that the @JsonIgnore was no longer necessary.</p>\n"},{"tags":["java","android","flutter","android-studio","android-emulator"],"comments":[{"owner":{"account_id":251706,"reputation":5323,"user_id":529282,"display_name":"Martheen"},"score":1,"creation_date":1695347763,"post_id":77154477,"comment_id":136015621,"body_markdown":"Have you tried installing the proper gradle version?","body":"Have you tried installing the proper gradle version?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695365056,"post_id":77154477,"comment_id":136017082,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"comments":[{"owner":{"account_id":29505247,"reputation":1,"user_id":22611343,"display_name":"Mayar Ism"},"score":0,"creation_date":1695422292,"post_id":77154634,"comment_id":136027343,"body_markdown":"i ran gradle -v and this is what came out\n```\n ------------------------------------------------------------\nGradle 7.5\n------------------------------------------------------------\n\nBuild time:   2022-07-14 12:48:15 UTC\nRevision:     c7db7b958189ad2b0c1472b6fe663e6d654a5103\n\nKotlin:       1.6.21\nGroovy:       3.0.10\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          17.0.8 (Oracle Corporation 17.0.8+9-LTS-211)\nOS:           Windows 10 10.0 amd64 ```\n```\ni already tried changing jdk from 1.8 to 21 and 17\n i don&#39;t know if they are compatible or not","body":"i ran gradle -v and this is what came out ```  ------------------------------------------------------------ Gradle 7.5 ------------------------------------------------------------  Build time:   2022-07-14 12:48:15 UTC Revision:     c7db7b958189ad2b0c1472b6fe663e6d654a5103  Kotlin:       1.6.21 Groovy:       3.0.10 Ant:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021 JVM:          17.0.8 (Oracle Corporation 17.0.8+9-LTS-211) OS:           Windows 10 10.0 amd64 ``` ``` i already tried changing jdk from 1.8 to 21 and 17  i don&#39;t know if they are compatible or not"},{"owner":{"account_id":21009359,"reputation":1194,"user_id":15438326,"display_name":"Priyanshu Paliwal"},"score":0,"creation_date":1695445771,"post_id":77154634,"comment_id":136028622,"body_markdown":"@MayarIsm you can also try gradlew clean and gradlew build from the android folder in the terminal","body":"@MayarIsm you can also try gradlew clean and gradlew build from the android folder in the terminal"}],"tags":[],"owner":{"account_id":21009359,"reputation":1194,"user_id":15438326,"display_name":"Priyanshu Paliwal"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695351497,"creation_date":1695351497,"answer_id":77154634,"question_id":77154477,"body_markdown":"Try these\r\n\r\nCheck if your `Gradle plugin` version and `Kotlin` version used in your project are compatible with each other.\r\n\r\nAnd\r\n\r\nCheck your `Java SDK` if it compatible with the `Gradle plugin` version \r\n\r\nif not change the `Java SDK` or `Gradle plugin` accordingly \r\n\r\nThen run the Gradle build.\r\n\r\nI hope this will resolve your issue.\r\n","title":"i can&#39;t run a flutter app on android studio emulator","body":"<p>Try these</p>\n<p>Check if your <code>Gradle plugin</code> version and <code>Kotlin</code> version used in your project are compatible with each other.</p>\n<p>And</p>\n<p>Check your <code>Java SDK</code> if it compatible with the <code>Gradle plugin</code> version</p>\n<p>if not change the <code>Java SDK</code> or <code>Gradle plugin</code> accordingly</p>\n<p>Then run the Gradle build.</p>\n<p>I hope this will resolve your issue.</p>\n"}],"owner":{"account_id":29505247,"reputation":1,"user_id":22611343,"display_name":"Mayar Ism"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695351497,"creation_date":1695347300,"question_id":77154477,"body_markdown":"i&#39;m having a problem running the flutter app on the androidstudio emulator\r\n\r\n\r\n\r\n```\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring root project &#39;android&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n   &gt; Could not find gradle-7.3.0.jar (com.android.tools.build:gradle:7.3.0).\r\n     Searched in the following locations:\r\n         https://dl.google.com/dl/android/maven2/com/android/tools/build/gradle/7.3.0/gradle-7.3.0.jar\r\n   &gt; Could not find builder-7.3.0.jar (com.android.tools.build:builder:7.3.0).\r\n     Searched in the following locations:\r\n         https://dl.google.com/dl/android/maven2/com/android/tools/build/builder/7.3.0/builder-7.3.0.jar\r\n   &gt; Could not find bundletool-1.9.0.jar (com.android.tools.build:bundletool:1.9.0).\r\n     Searched in the following locations:\r\n         https://dl.google.com/dl/android/maven2/com/android/tools/build/bundletool/1.9.0/bundletool-1.9.0.jar\r\n   &gt; Could not find protos-30.3.0.jar (com.android.tools.analytics-library:protos:30.3.0).\r\n     Searched in the following locations:\r\n         https://dl.google.com/dl/android/maven2/com/android/tools/analytics-library/protos/30.3.0/protos-30.3.0.jar\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 1s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n```\r\n\r\n\r\n\r\ni tried updating java and it gave me an error ","title":"i can&#39;t run a flutter app on android studio emulator","body":"<p>i'm having a problem running the flutter app on the androidstudio emulator</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring root project 'android'.\n&gt; Could not resolve all files for configuration ':classpath'.\n   &gt; Could not find gradle-7.3.0.jar (com.android.tools.build:gradle:7.3.0).\n     Searched in the following locations:\n         https://dl.google.com/dl/android/maven2/com/android/tools/build/gradle/7.3.0/gradle-7.3.0.jar\n   &gt; Could not find builder-7.3.0.jar (com.android.tools.build:builder:7.3.0).\n     Searched in the following locations:\n         https://dl.google.com/dl/android/maven2/com/android/tools/build/builder/7.3.0/builder-7.3.0.jar\n   &gt; Could not find bundletool-1.9.0.jar (com.android.tools.build:bundletool:1.9.0).\n     Searched in the following locations:\n         https://dl.google.com/dl/android/maven2/com/android/tools/build/bundletool/1.9.0/bundletool-1.9.0.jar\n   &gt; Could not find protos-30.3.0.jar (com.android.tools.analytics-library:protos:30.3.0).\n     Searched in the following locations:\n         https://dl.google.com/dl/android/maven2/com/android/tools/analytics-library/protos/30.3.0/protos-30.3.0.jar\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 1s\nException: Gradle task assembleDebug failed with exit code 1\n</code></pre>\n<p>i tried updating java and it gave me an error</p>\n"},{"tags":["java","large-files","netflix-zuul"],"comments":[{"owner":{"account_id":3583709,"reputation":1,"user_id":2991306,"display_name":"lightling"},"score":0,"creation_date":1695351440,"post_id":77154619,"comment_id":136015877,"body_markdown":"The reason I want to fix this problem is because my zuul is being brokered by nginx, which is consider this is exception package, and finally  the service times out","body":"The reason I want to fix this problem is because my zuul is being brokered by nginx, which is consider this is exception package, and finally  the service times out"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695351882,"post_id":77154619,"comment_id":136015913,"body_markdown":"Do not use images for text information. Add the information as text in the question and not as links. And what is a `response package`?","body":"Do not use images for text information. Add the information as text in the question and not as links. And what is a <code>response package</code>?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695366151,"post_id":77154619,"comment_id":136017268,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":3583709,"reputation":1,"user_id":2991306,"display_name":"lightling"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695351026,"creation_date":1695351026,"question_id":77154619,"body_markdown":"My project uses zuul1, has a file upload module, and the client call interface, as others have reported, is http://zuul-proxy/zuul/upload-module/file\r\n\r\nHowever, I found that when the file is large, the response package is not normal, which causes nginx to think that the response is not normal and wait for a timeout. From this curl, you can see that the terminal will be linked\r\n[url http://ip:port/zuul/upload-module  failed](https://i.stack.imgur.com/uyovF.png)\r\n\r\n\r\nBut if the request http://zuul-proxy/upload-module/file is normal\r\n[url http://ip:port/upload-module  success](https://i.stack.imgur.com/l5S32.png)\r\n\r\nVery strange problem, after analysis when using zuul in the url will skip the DispatcherServlet, should be related to this, but do not know how to solve?\r\n\r\nuse zuul prefix will skip the DispatcherServlet, which leads to the above problem\r\n\r\nAnd if i config zuul.servlet-path = /,   Whether used or not &quot;zuul&quot; prefix will go wrong.\r\n\r\nI guess I skipped the DispatcherServlet but didn&#39;t know how to solve it\r\n\r\nPlease help ","title":"netflix zuul1, a strange phenomenon of uploading large files with multipart file?","body":"<p>My project uses zuul1, has a file upload module, and the client call interface, as others have reported, is http://zuul-proxy/zuul/upload-module/file</p>\n<p>However, I found that when the file is large, the response package is not normal, which causes nginx to think that the response is not normal and wait for a timeout. From this curl, you can see that the terminal will be linked\n<a href=\"https://i.stack.imgur.com/uyovF.png\" rel=\"nofollow noreferrer\">url http://ip:port/zuul/upload-module  failed</a></p>\n<p>But if the request http://zuul-proxy/upload-module/file is normal\n<a href=\"https://i.stack.imgur.com/l5S32.png\" rel=\"nofollow noreferrer\">url http://ip:port/upload-module  success</a></p>\n<p>Very strange problem, after analysis when using zuul in the url will skip the DispatcherServlet, should be related to this, but do not know how to solve?</p>\n<p>use zuul prefix will skip the DispatcherServlet, which leads to the above problem</p>\n<p>And if i config zuul.servlet-path = /,   Whether used or not &quot;zuul&quot; prefix will go wrong.</p>\n<p>I guess I skipped the DispatcherServlet but didn't know how to solve it</p>\n<p>Please help</p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1695250240,"post_id":77139808,"comment_id":136000974,"body_markdown":"If you only want to run one task at a time, why use multiple threads at all?","body":"If you only want to run one task at a time, why use multiple threads at all?"}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695350309,"creation_date":1695350309,"answer_id":77154592,"question_id":77139808,"body_markdown":"If you wish to run each command sequentially, the simplest solution is to use a single-threaded executor:\r\n\r\n    ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n    executorService.execute(command);\r\n\r\nAn `Executor` already implements an internal queue of commands or tasks, so it&#39;s unnecessary to add another queue to it.\r\n\r\nThe [documentation for `Executors.newSingleThreadExecutor`][1] describes it this way:\r\n\r\n&gt; Creates an Executor that uses a single worker thread operating off an unbounded queue. (Note however that if this single thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks.) Tasks are guaranteed to execute sequentially, and no more than one task will be active at any given time.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor--","title":"how to avoid using lock primitive to ensure only one task in the queue is running until it has finished?","body":"<p>If you wish to run each command sequentially, the simplest solution is to use a single-threaded executor:</p>\n<pre><code>ExecutorService executorService = Executors.newSingleThreadExecutor();\nexecutorService.execute(command);\n</code></pre>\n<p>An <code>Executor</code> already implements an internal queue of commands or tasks, so it's unnecessary to add another queue to it.</p>\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor--\" rel=\"nofollow noreferrer\">documentation for <code>Executors.newSingleThreadExecutor</code></a> describes it this way:</p>\n<blockquote>\n<p>Creates an Executor that uses a single worker thread operating off an unbounded queue. (Note however that if this single thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks.) Tasks are guaranteed to execute sequentially, and no more than one task will be active at any given time.</p>\n</blockquote>\n"}],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695350309,"creation_date":1695191351,"question_id":77139808,"body_markdown":"For the following code, I think using `synchronized` is expensive because thread switching consuming much resource. \r\n\r\n```\r\npublic class Queue {\r\n    public static final Executor EXECUTOR = new Executor(16, 16);\r\n\r\n    @Getter\r\n    private final long id;\r\n    @Getter\r\n    private final String name;\r\n    @Getter\r\n    private final int capacity;\r\n\r\n    private final java.util.Queue&lt;Command&gt; queue;\r\n\r\n    private boolean running = false;\r\n    @Getter\r\n    @Setter\r\n    private boolean destroy = false;\r\n\r\n\r\n    public Queue(long id, String name, int capacity) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.capacity = capacity;\r\n        this.queue = new ArrayDeque&lt;&gt;();\r\n    }\r\n\r\n    public boolean append(Command command) {\r\n        command.setQueue(this);\r\n        synchronized (this) {\r\n            if (!running &amp;&amp; !destroy) {\r\n                running = true;\r\n                EXECUTOR.execute(command);\r\n                return true;\r\n            }\r\n            return queue.offer(command);\r\n        }\r\n    }\r\n\r\n    protected void resume() {\r\n        synchronized (this) {\r\n            if (destroy) {\r\n                running = false;\r\n                return;\r\n            }\r\n            Command command = queue.poll();\r\n            if (command == null) {\r\n                running = false;\r\n                return;\r\n            }\r\n            EXECUTOR.execute(command);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\npublic class Executor extends ThreadPoolExecutor {\r\n    public Executor(int corePoolSize, int maxPoolSize) {\r\n        super(corePoolSize, maxPoolSize, 30L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;(), new ThreadFactory() {\r\n            final AtomicInteger n = new AtomicInteger(0);\r\n            @Override\r\n            public Thread newThread(Runnable r) {\r\n                String name = &quot;queue-execute-thread-&quot; + n.incrementAndGet();\r\n                return new Thread(r, name);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void afterExecute(Runnable r, Throwable t) {\r\n        super.afterExecute(r, t);\r\n        ((Command) r).getQueue().resume();\r\n    }\r\n}\r\n```\r\n\r\nIs there any solution to avoid using lock primitive to ensure only one task in the queue is running until it has finished?","title":"how to avoid using lock primitive to ensure only one task in the queue is running until it has finished?","body":"<p>For the following code, I think using <code>synchronized</code> is expensive because thread switching consuming much resource.</p>\n<pre><code>public class Queue {\n    public static final Executor EXECUTOR = new Executor(16, 16);\n\n    @Getter\n    private final long id;\n    @Getter\n    private final String name;\n    @Getter\n    private final int capacity;\n\n    private final java.util.Queue&lt;Command&gt; queue;\n\n    private boolean running = false;\n    @Getter\n    @Setter\n    private boolean destroy = false;\n\n\n    public Queue(long id, String name, int capacity) {\n        this.id = id;\n        this.name = name;\n        this.capacity = capacity;\n        this.queue = new ArrayDeque&lt;&gt;();\n    }\n\n    public boolean append(Command command) {\n        command.setQueue(this);\n        synchronized (this) {\n            if (!running &amp;&amp; !destroy) {\n                running = true;\n                EXECUTOR.execute(command);\n                return true;\n            }\n            return queue.offer(command);\n        }\n    }\n\n    protected void resume() {\n        synchronized (this) {\n            if (destroy) {\n                running = false;\n                return;\n            }\n            Command command = queue.poll();\n            if (command == null) {\n                running = false;\n                return;\n            }\n            EXECUTOR.execute(command);\n        }\n    }\n\n}\n\n\npublic class Executor extends ThreadPoolExecutor {\n    public Executor(int corePoolSize, int maxPoolSize) {\n        super(corePoolSize, maxPoolSize, 30L, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;&gt;(), new ThreadFactory() {\n            final AtomicInteger n = new AtomicInteger(0);\n            @Override\n            public Thread newThread(Runnable r) {\n                String name = &quot;queue-execute-thread-&quot; + n.incrementAndGet();\n                return new Thread(r, name);\n            }\n        });\n    }\n\n    @Override\n    protected void afterExecute(Runnable r, Throwable t) {\n        super.afterExecute(r, t);\n        ((Command) r).getQueue().resume();\n    }\n}\n</code></pre>\n<p>Is there any solution to avoid using lock primitive to ensure only one task in the queue is running until it has finished?</p>\n"},{"tags":["java","unit-testing","groovy","spock","spy"],"comments":[{"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"score":0,"creation_date":1695299111,"post_id":77147011,"comment_id":136007694,"body_markdown":"Is `method1` in your class `A`?","body":"Is <code>method1</code> in your class <code>A</code>?"},{"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"score":2,"creation_date":1695302977,"post_id":77147011,"comment_id":136008586,"body_markdown":"Well, it is called unit-test not method-test, so you are testing a unit of code. I&#39;d argue that these private methods belong to the unit you are testing. If that is not the case, then you should refactor your code, so that you can inject them as dependencies, which will also allow you to mock them easily. More importantly you want to test for the outcome, not what happens inside the method, as that leads to over-specification.","body":"Well, it is called unit-test not method-test, so you are testing a unit of code. I&#39;d argue that these private methods belong to the unit you are testing. If that is not the case, then you should refactor your code, so that you can inject them as dependencies, which will also allow you to mock them easily. More importantly you want to test for the outcome, not what happens inside the method, as that leads to over-specification."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1695429852,"post_id":77147011,"comment_id":136027866,"body_markdown":"Do you have any specific reason to be stuck on Spock 1.x? I recommend Spock 2.x, it has lots of improvements. Besides, for this test you do not need PowerMock. And when you need it, it is usually a sign that the code under test should be refactored.","body":"Do you have any specific reason to be stuck on Spock 1.x? I recommend Spock 2.x, it has lots of improvements. Besides, for this test you do not need PowerMock. And when you need it, it is usually a sign that the code under test should be refactored."}],"answers":[{"comments":[{"owner":{"account_id":20677272,"reputation":79,"user_id":15181599,"display_name":"wu wei"},"score":0,"creation_date":1695362440,"post_id":77154489,"comment_id":136016751,"body_markdown":"very precise and accurate, seems like Hemingway&#39;s writing style","body":"very precise and accurate, seems like Hemingway&#39;s writing style"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1695374954,"post_id":77154489,"comment_id":136018927,"body_markdown":"I take that as a compliment, because I happen to like Hemingway&#39;s short stories. Thank you.","body":"I take that as a compliment, because I happen to like Hemingway&#39;s short stories. Thank you."}],"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695348933,"creation_date":1695347596,"answer_id":77154489,"question_id":77147011,"body_markdown":"Leonard is totally right: In &gt;99% of normal unit tests\r\n  * you do not mock or spy on the class under test,\r\n  * you test behaviour, not inner workings of a class.\r\n\r\nWhat you want is technically possible, but it usually is a code smell, if it is necessary. For argument&#39;s sake, let us assume your class under test looks like this:\r\n\r\n```java\r\nclass A {\r\n  void method(User user) {\r\n    if (&#39;Tom&#39; == user.name)\r\n      method1(user)\r\n    else\r\n      method2(user)\r\n  }\r\n\r\n  void method1(User user) {\r\n    println &quot;method1, doing something expensive &amp; slow with $user.name&quot;\r\n  }\r\n\r\n  void method2(User user) {\r\n    println &quot;method2, doing something expensive &amp; slow with $user.name&quot;\r\n  }\r\n}\r\n```\r\n\r\n```java\r\nclass User {\r\n  String name\r\n}\r\n```\r\n\r\nNow you can test like this:\r\n\r\n```java\r\nimport spock.lang.Specification\r\nimport spock.lang.Unroll\r\n\r\nclass ATest extends Specification {\r\n  @Unroll(&#39;user #user.name&#39;)\r\n  def &#39;expensive calculation (no mocks)&#39;() {\r\n    given:\r\n    def process = new A()\r\n\r\n    expect:\r\n    process.method(user)\r\n\r\n    where:\r\n    user &lt;&lt; [new User(name: &#39;Tom&#39;), new User(name: &#39;Tina&#39;)]\r\n  }\r\n\r\n  @Unroll(&#39;user #user.name&#39;)\r\n  def &#39;expensive calculation (spy)&#39;() {\r\n    given:\r\n    A process = Spy()\r\n\r\n    when:\r\n    process.method(user)\r\n\r\n    then:\r\n    1 * process.&quot;$calledMethod&quot;(user) &gt;&gt; null\r\n\r\n    where:\r\n    user                   | calledMethod\r\n    new User(name: &#39;Tom&#39;)  | &#39;method1&#39;\r\n    new User(name: &#39;Tina&#39;) | &#39;method2&#39;\r\n  }\r\n```\r\n\r\nWhile in the first test, you will see the log output for the called methods, for the second one you will not, because the two methods have been stubbed out. By default, a spy calls the original method, if you do not change its behaviour.\r\n\r\nLeonard also said that you should refactor, if the helper methods do something that is not the core responsibility of the class under test. Let us assume, we have this case here. Then you can refactor and test like this:\r\n\r\n```java\r\nclass B {\r\n  ExpensiveCalculation calculation\r\n\r\n  void method(User user) {\r\n    if (&#39;Tom&#39; == user.name)\r\n      this.calculation.method1(user)\r\n    else\r\n      this.calculation.method2(user)\r\n  }\r\n}\r\n```\r\n\r\n```java\r\nclass ExpensiveCalculation {\r\n  void method1(User user) {\r\n    println &quot;method1, doing something expensive &amp; slow with $user.name&quot;\r\n  }\r\n\r\n  void method2(User user) {\r\n    println &quot;method2, doing something expensive &amp; slow with $user.name&quot;\r\n  }\r\n}\r\n```\r\n\r\n```java\r\n  @Unroll(&#39;user #user.name&#39;)\r\n  def &#39;expensive calculation (factored out, mocked)&#39;() {\r\n    given:\r\n    def calculation = Mock(ExpensiveCalculation)\r\n    def process = new B(calculation: calculation)\r\n\r\n    when:\r\n    process.method(user)\r\n\r\n    then:\r\n    1 * calculation.&quot;$calledMethod&quot;(user)\r\n\r\n    where:\r\n    user                   | calledMethod\r\n    new User(name: &#39;Tom&#39;)  | &#39;method1&#39;\r\n    new User(name: &#39;Tina&#39;) | &#39;method2&#39;\r\n  }\r\n```\r\n\r\nSee how easy it is to inject a mock and verify its behaviour? No more ugly self-spying on the class under test, but clear separation of concerns. But before you use interaction testing (verifying behaviour), think about whether you need it at all. Just because it is possible, it does not mean it is always necessary.\r\n\r\nTry it in the [Groovy Web Console](https://gwc-experiment.appspot.com/?g=groovy_4_0&amp;codez=eNrdVM1r2zAUv_uveGRlkkcwcxgEQlOWjh17SnsaYwj5JRG1JU-Sk5au__sk2bNV4qzQXMZ8MLbf7-N9yTXj92yLUGBmuG6qHxUzFnVmrAuoPepNqQ7Zz_k8_zT_mOdJIqpaaQumVvw-K5ncZusaudgIzqxQciR-J7UqyyThJTMGVrdoLOCDRVkYeMGFpwTgcwunpDGo4Z2_Z5JVSFIXLHADBB9qlEbsETgreVO2XCoVVM7TpISmQQlg60ByER49s9aKo0thCRIPsKJpEkJej9sW1kGyCu1OFdS7d6jDDjW2oJDZ5SV88zJ37oX6BBdAblVF0ikcfRaSkfS74z4n51Ro6sfx4lZRaev6kQ4py9fKsj0mhw89bnLhjEssbgJ-0hLg6gpk4yc51o_j6xfEIgE52jCPJG1mORmHhQYOsBk5u5cbxq3SWIBq7DQsDhanNyemLuHGoenXP7pfhlh6YtWuaSSwiNXePKlIY3xa_8yUnvuTH3q7V6KArjrPhna32raLDdBgB8sl9MNs2wodK-_qC0e3NPgiOOuDYT0is_zYrdZC2lLCpENMoVBCbsEo_8E_DcvzHoz7EcJB2B1c9JlNRoxmrxrN3mrUtzI4eO211Z7uIUP0OoTGFjRem-S8Ybi8TRZv4V-ncwIdj6tPfzTxp_9xmr8BPE9WOg) and click on the &quot;Result&quot; tab to see the test report.","title":"how to use spock to skip some inner void methods","body":"<p>Leonard is totally right: In &gt;99% of normal unit tests</p>\n<ul>\n<li>you do not mock or spy on the class under test,</li>\n<li>you test behaviour, not inner workings of a class.</li>\n</ul>\n<p>What you want is technically possible, but it usually is a code smell, if it is necessary. For argument's sake, let us assume your class under test looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n  void method(User user) {\n    if ('Tom' == user.name)\n      method1(user)\n    else\n      method2(user)\n  }\n\n  void method1(User user) {\n    println &quot;method1, doing something expensive &amp; slow with $user.name&quot;\n  }\n\n  void method2(User user) {\n    println &quot;method2, doing something expensive &amp; slow with $user.name&quot;\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class User {\n  String name\n}\n</code></pre>\n<p>Now you can test like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import spock.lang.Specification\nimport spock.lang.Unroll\n\nclass ATest extends Specification {\n  @Unroll('user #user.name')\n  def 'expensive calculation (no mocks)'() {\n    given:\n    def process = new A()\n\n    expect:\n    process.method(user)\n\n    where:\n    user &lt;&lt; [new User(name: 'Tom'), new User(name: 'Tina')]\n  }\n\n  @Unroll('user #user.name')\n  def 'expensive calculation (spy)'() {\n    given:\n    A process = Spy()\n\n    when:\n    process.method(user)\n\n    then:\n    1 * process.&quot;$calledMethod&quot;(user) &gt;&gt; null\n\n    where:\n    user                   | calledMethod\n    new User(name: 'Tom')  | 'method1'\n    new User(name: 'Tina') | 'method2'\n  }\n</code></pre>\n<p>While in the first test, you will see the log output for the called methods, for the second one you will not, because the two methods have been stubbed out. By default, a spy calls the original method, if you do not change its behaviour.</p>\n<p>Leonard also said that you should refactor, if the helper methods do something that is not the core responsibility of the class under test. Let us assume, we have this case here. Then you can refactor and test like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class B {\n  ExpensiveCalculation calculation\n\n  void method(User user) {\n    if ('Tom' == user.name)\n      this.calculation.method1(user)\n    else\n      this.calculation.method2(user)\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class ExpensiveCalculation {\n  void method1(User user) {\n    println &quot;method1, doing something expensive &amp; slow with $user.name&quot;\n  }\n\n  void method2(User user) {\n    println &quot;method2, doing something expensive &amp; slow with $user.name&quot;\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>  @Unroll('user #user.name')\n  def 'expensive calculation (factored out, mocked)'() {\n    given:\n    def calculation = Mock(ExpensiveCalculation)\n    def process = new B(calculation: calculation)\n\n    when:\n    process.method(user)\n\n    then:\n    1 * calculation.&quot;$calledMethod&quot;(user)\n\n    where:\n    user                   | calledMethod\n    new User(name: 'Tom')  | 'method1'\n    new User(name: 'Tina') | 'method2'\n  }\n</code></pre>\n<p>See how easy it is to inject a mock and verify its behaviour? No more ugly self-spying on the class under test, but clear separation of concerns. But before you use interaction testing (verifying behaviour), think about whether you need it at all. Just because it is possible, it does not mean it is always necessary.</p>\n<p>Try it in the <a href=\"https://gwc-experiment.appspot.com/?g=groovy_4_0&amp;codez=eNrdVM1r2zAUv_uveGRlkkcwcxgEQlOWjh17SnsaYwj5JRG1JU-Sk5au__sk2bNV4qzQXMZ8MLbf7-N9yTXj92yLUGBmuG6qHxUzFnVmrAuoPepNqQ7Zz_k8_zT_mOdJIqpaaQumVvw-K5ncZusaudgIzqxQciR-J7UqyyThJTMGVrdoLOCDRVkYeMGFpwTgcwunpDGo4Z2_Z5JVSFIXLHADBB9qlEbsETgreVO2XCoVVM7TpISmQQlg60ByER49s9aKo0thCRIPsKJpEkJej9sW1kGyCu1OFdS7d6jDDjW2oJDZ5SV88zJ37oX6BBdAblVF0ikcfRaSkfS74z4n51Ro6sfx4lZRaev6kQ4py9fKsj0mhw89bnLhjEssbgJ-0hLg6gpk4yc51o_j6xfEIgE52jCPJG1mORmHhQYOsBk5u5cbxq3SWIBq7DQsDhanNyemLuHGoenXP7pfhlh6YtWuaSSwiNXePKlIY3xa_8yUnvuTH3q7V6KArjrPhna32raLDdBgB8sl9MNs2wodK-_qC0e3NPgiOOuDYT0is_zYrdZC2lLCpENMoVBCbsEo_8E_DcvzHoz7EcJB2B1c9JlNRoxmrxrN3mrUtzI4eO211Z7uIUP0OoTGFjRem-S8Ybi8TRZv4V-ncwIdj6tPfzTxp_9xmr8BPE9WOg\" rel=\"nofollow noreferrer\">Groovy Web Console</a> and click on the &quot;Result&quot; tab to see the test report.</p>\n"}],"owner":{"account_id":20677272,"reputation":79,"user_id":15181599,"display_name":"wu wei"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77154489,"answer_count":1,"score":1,"last_activity_date":1695348933,"creation_date":1695266848,"question_id":77147011,"body_markdown":"code:\r\n\r\n```\r\npublic class A{\r\n    public void method(User user){\r\n        String name = user.getName();\r\n        if(&quot;Tom&quot;.equals(name)){\r\n            method1(user);\r\n        }else{\r\n            method2(user);\r\n        }\r\n    }\r\n}\r\n```\r\nI want to write a test about A#method() by using spock. As you can see,When I test method(),I don&#39;t care the execution of method1() or method2(),I just want to verify that those two methods will invoked in certain case.\r\nMy test code:\r\n```\r\n@RunWith(PowerMockRunner.class)\r\n@PowerMockRunnerDelegate(Sputnik.class)\r\nclass ASpec extends Specification {\r\n   \r\n    def &quot;method&quot;(){\r\n        given:\r\n        def process = new A()\r\n\r\n        expect:\r\n        process.method(input as User)\r\n\r\n        where:\r\n        input                || _\r\n        new User(name:&quot;Tom&quot;) || _\r\n    }\r\n}\r\n```\r\nI find that method1() does executed,but I think that the meaning of a unit test is just to verify the process is right, so I don&#39;t want method1() executed actually,but just invoked.\r\nWhat should I do?\r\n\r\np.s. \r\nI also use spy:\r\n```\r\n@RunWith(PowerMockRunner.class)\r\n@PowerMockRunnerDelegate(Sputnik.class)\r\nclass ASpec extends Specification {\r\n\r\n    def &quot;method&quot;(){\r\n        given:\r\n        A process = Spy()\r\n\r\n        expect:\r\n        process.method(input as User)\r\n\r\n        where:\r\n        input                || _\r\n        new User(name:&quot;Tom&quot;) || _\r\n    }\r\n}\r\n```\r\nbut the method1() also executed.","title":"how to use spock to skip some inner void methods","body":"<p>code:</p>\n<pre><code>public class A{\n    public void method(User user){\n        String name = user.getName();\n        if(&quot;Tom&quot;.equals(name)){\n            method1(user);\n        }else{\n            method2(user);\n        }\n    }\n}\n</code></pre>\n<p>I want to write a test about A#method() by using spock. As you can see,When I test method(),I don't care the execution of method1() or method2(),I just want to verify that those two methods will invoked in certain case.\nMy test code:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PowerMockRunnerDelegate(Sputnik.class)\nclass ASpec extends Specification {\n   \n    def &quot;method&quot;(){\n        given:\n        def process = new A()\n\n        expect:\n        process.method(input as User)\n\n        where:\n        input                || _\n        new User(name:&quot;Tom&quot;) || _\n    }\n}\n</code></pre>\n<p>I find that method1() does executed,but I think that the meaning of a unit test is just to verify the process is right, so I don't want method1() executed actually,but just invoked.\nWhat should I do?</p>\n<p>p.s.\nI also use spy:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PowerMockRunnerDelegate(Sputnik.class)\nclass ASpec extends Specification {\n\n    def &quot;method&quot;(){\n        given:\n        A process = Spy()\n\n        expect:\n        process.method(input as User)\n\n        where:\n        input                || _\n        new User(name:&quot;Tom&quot;) || _\n    }\n}\n</code></pre>\n<p>but the method1() also executed.</p>\n"},{"tags":["java","algorithm","data-structures","treeset"],"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1695052660,"post_id":77127621,"comment_id":135969480,"body_markdown":"View the source code, TreeSet uses TreeMap, and `iter.remove()` / `set.remove()` both should end up at a the same private call `TreeMap.deleteEntry()`;","body":"View the source code, TreeSet uses TreeMap, and <code>iter.remove()</code> / <code>set.remove()</code> both should end up at a the same private call <code>TreeMap.deleteEntry()</code>;"},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":1,"creation_date":1695081828,"post_id":77127621,"comment_id":135973735,"body_markdown":"It&#39;s a red-black tree, so `iterator.remove` *should* be O(1) amortized.","body":"It&#39;s a red-black tree, so <code>iterator.remove</code> <i>should</i> be O(1) amortized."}],"answers":[{"comments":[{"owner":{"account_id":11774606,"reputation":1337,"user_id":10969942,"display_name":"maplemaple"},"score":0,"creation_date":1695413224,"post_id":77154493,"comment_id":136026193,"body_markdown":"However, Occasional O(log n) means worst case. It needs to prove that the number of this occurrence is order of O(n). Then the armotized time is O(log n). If the occurrence is O(1), then it is still armotized O(1).","body":"However, Occasional O(log n) means worst case. It needs to prove that the number of this occurrence is order of O(n). Then the armotized time is O(log n). If the occurrence is O(1), then it is still armotized O(1)."}],"tags":[],"owner":{"account_id":11803185,"reputation":592,"user_id":8636342,"display_name":"Jeet Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695347722,"creation_date":1695347722,"answer_id":77154493,"question_id":77127621,"body_markdown":"The amortized time complexity of `remove()` with a `TreeSet` iterator is O(log n) due to occasional O(log n) restructuring during removals in a binary search tree.","title":"Amortized Time Complexity of remove() Method in Java&#39;s TreeSet Iterator","body":"<p>The amortized time complexity of <code>remove()</code> with a <code>TreeSet</code> iterator is O(log n) due to occasional O(log n) restructuring during removals in a binary search tree.</p>\n"}],"owner":{"account_id":11774606,"reputation":1337,"user_id":10969942,"display_name":"maplemaple"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695347722,"creation_date":1695043467,"question_id":77127621,"body_markdown":"What is the **amortized time complexity** of the [`remove()`](https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html#remove--) method when used with a `TreeSet` [`iterator()`](https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#iterator--) in Java? For instance, consider the following code:\r\n```java\r\npublic static void main(String[] args) {\r\n    TreeSet&lt;Integer&gt; set = new TreeSet&lt;&gt;();\r\n    for (int i = 0; i &lt; 1000; i++) {\r\n        set.add(i);\r\n    }\r\n\r\n    Iterator&lt;Integer&gt; iter = set.iterator();\r\n    while (iter.hasNext()) {\r\n        System.out.println(iter.next());\r\n        iter.remove();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI understand that the worst-case time complexity of `iter.next()` is `O(log n)` as it may sometimes traverse to the depth of the tree. The amortized time complexity of `iter.next()` is `O(1)`, given that the in-order tree traversal is `O(n)` in total. I also know that the worst-case time complexity of `iter.remove()` is O(log n) for the same reason. However, I&#39;m uncertain about the amortized time complexity for `iter.remove()`. **I&#39;m puzzled because when I use the iterator, locating the next target node in the tree takes only `O(1)` time. I&#39;m uncertain whether the rebalancing step will consistently require `O(log n)` time.** Can you clarify?\r\n\r\nPS: it&#39;s not the TreeSet&#39;s [remove()](https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#remove-java.lang.Object-). TreeSet&#39;s remove must be `O(log n)` for sure.","title":"Amortized Time Complexity of remove() Method in Java&#39;s TreeSet Iterator","body":"<p>What is the <strong>amortized time complexity</strong> of the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html#remove--\" rel=\"nofollow noreferrer\"><code>remove()</code></a> method when used with a <code>TreeSet</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#iterator--\" rel=\"nofollow noreferrer\"><code>iterator()</code></a> in Java? For instance, consider the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    TreeSet&lt;Integer&gt; set = new TreeSet&lt;&gt;();\n    for (int i = 0; i &lt; 1000; i++) {\n        set.add(i);\n    }\n\n    Iterator&lt;Integer&gt; iter = set.iterator();\n    while (iter.hasNext()) {\n        System.out.println(iter.next());\n        iter.remove();\n    }\n}\n\n</code></pre>\n<p>I understand that the worst-case time complexity of <code>iter.next()</code> is <code>O(log n)</code> as it may sometimes traverse to the depth of the tree. The amortized time complexity of <code>iter.next()</code> is <code>O(1)</code>, given that the in-order tree traversal is <code>O(n)</code> in total. I also know that the worst-case time complexity of <code>iter.remove()</code> is O(log n) for the same reason. However, I'm uncertain about the amortized time complexity for <code>iter.remove()</code>. <strong>I'm puzzled because when I use the iterator, locating the next target node in the tree takes only <code>O(1)</code> time. I'm uncertain whether the rebalancing step will consistently require <code>O(log n)</code> time.</strong> Can you clarify?</p>\n<p>PS: it's not the TreeSet's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#remove-java.lang.Object-\" rel=\"nofollow noreferrer\">remove()</a>. TreeSet's remove must be <code>O(log n)</code> for sure.</p>\n"},{"tags":["java","javafx","jetty","jlink","jpackage"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1695344158,"post_id":77154323,"comment_id":136015297,"body_markdown":"&quot;I have already validated that the packages (jmod) are added to the destination folder where the .exe is located&quot; FWIW, .jmod files are only used as input for jlink, they can not be used as runtime dependencies.","body":"&quot;I have already validated that the packages (jmod) are added to the destination folder where the .exe is located&quot; FWIW, .jmod files are only used as input for jlink, they can not be used as runtime dependencies."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1695344292,"post_id":77154323,"comment_id":136015305,"body_markdown":"Is your application modular? (i.e. do you have your own `module-info` file?) You are using `jlink` with `--add-modules` to add all the JDK modules, but you should only have to add the main module of your application.","body":"Is your application modular? (i.e. do you have your own <code>module-info</code> file?) You are using <code>jlink</code> with <code>--add-modules</code> to add all the JDK modules, but you should only have to add the main module of your application."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1695345121,"post_id":77154323,"comment_id":136015392,"body_markdown":"I see you&#39;re also using `--input ../../target/libs`, are there extra jar files or native libraries that need to be added to the application?","body":"I see you&#39;re also using <code>--input ..&#47;..&#47;target&#47;libs</code>, are there extra jar files or native libraries that need to be added to the application?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1695354891,"post_id":77154323,"comment_id":136016118,"body_markdown":"If your websocket connections are using tls, you may [require cryptoki](https://stackoverflow.com/questions/60081037/modular-java-13-javafx-webwiew-fails-to-display-when-jlinked).","body":"If your websocket connections are using tls, you may <a href=\"https://stackoverflow.com/questions/60081037/modular-java-13-javafx-webwiew-fails-to-display-when-jlinked\">require cryptoki</a>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1695355683,"post_id":77154323,"comment_id":136016178,"body_markdown":"You&#39;re most likely missing cryptographic modules in the custom run-time image and that is leading to failed SSL handshakes. See Q&amp;A linked by jewelsea for more information. Also see https://stackoverflow.com/q/73590370/6395627 and its duplicates.","body":"You&#39;re most likely missing cryptographic modules in the custom run-time image and that is leading to failed SSL handshakes. See Q&amp;A linked by jewelsea for more information. Also see <a href=\"https://stackoverflow.com/q/73590370/6395627\">stackoverflow.com/q/73590370/6395627</a> and its duplicates."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1695369378,"post_id":77154323,"comment_id":136017873,"body_markdown":"See also [Java FX Application with Jpackage not work](https://stackoverflow.com/questions/70456027/java-fx-application-with-jpackage-not-work)","body":"See also <a href=\"https://stackoverflow.com/questions/70456027/java-fx-application-with-jpackage-not-work\">Java FX Application with Jpackage not work</a>"}],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695345209,"creation_date":1695345209,"answer_id":77154390,"question_id":77154323,"body_markdown":"&gt; How can I validate the log of the application when it starts if it automatically closes?, Does Java have a way to monitor the execution of an .exe created with jpackage?\r\n\r\nYou can try running jpackage with `--win-console`, and then running the application from the console to see if any error message is printed.\r\n\r\n&gt; How can I verify that the runtime that is included in the application image can load all the necessary packages for the application to start?\r\n\r\nCreate the runtime image without the `--strip-native-commands` option. That will result in a runtime image that includes the `java` launcher. You can then use that launcher to try and launch the application manually, by manually specifying the module path and main module.","title":"Cannot start program created with jpackage","body":"<blockquote>\n<p>How can I validate the log of the application when it starts if it automatically closes?, Does Java have a way to monitor the execution of an .exe created with jpackage?</p>\n</blockquote>\n<p>You can try running jpackage with <code>--win-console</code>, and then running the application from the console to see if any error message is printed.</p>\n<blockquote>\n<p>How can I verify that the runtime that is included in the application image can load all the necessary packages for the application to start?</p>\n</blockquote>\n<p>Create the runtime image without the <code>--strip-native-commands</code> option. That will result in a runtime image that includes the <code>java</code> launcher. You can then use that launcher to try and launch the application manually, by manually specifying the module path and main module.</p>\n"}],"owner":{"account_id":14765348,"reputation":43,"user_id":10663562,"display_name":"hanarce"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695345209,"creation_date":1695343395,"question_id":77154323,"body_markdown":"Hello everyone I am new using jpackage and I am building a java aplicaction with JavaFx framework and I added a Websocket server (using org.eclipse.jetty.websocket and org.eclipse.jetty dependencies) but the application does not start when I double click to the .exe.\r\nI am using  the following dependencies in my pom file to add the websocket server:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jetty-server&lt;/artifactId&gt;\r\n            &lt;version&gt;11.0.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;\r\n            &lt;version&gt;11.0.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.jetty.websocket&lt;/groupId&gt;\r\n            &lt;artifactId&gt;websocket-jetty-api&lt;/artifactId&gt;\r\n            &lt;version&gt;11.0.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.jetty.websocket&lt;/groupId&gt;\r\n            &lt;artifactId&gt;websocket-jetty-server&lt;/artifactId&gt;\r\n            &lt;version&gt;11.0.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nThe application was made in IntelliJ with java 20 and is working fine when i debug and I can interact with the graphical interface and I can connect to the websocket server but when I create  app image (.exe) with the following commands:\r\n\r\n```\r\njlink --verbose --output runtime --module-path &quot;$Env:JAVA_HOME/jmods&quot; --add-modules javafx.base,javafx.controls,javafx.fxml,javafx.graphics,javafx.media,javafx.swing,javafx.web,java.base,java.desktop,java.instrument,java.logging,java.naming,java.net.http,java.scripting,java.sql,java.xml,jdk.unsupported,jdk.crypto.ec,jdk.accessibility,jdk.management.jfr --strip-native-commands --no-header-files --no-man-pages --strip-debug --compress=1\r\n```\r\n\r\n```\r\njpackage --verbose --type app-image --runtime-image runtime --input ../../target/libs --module-path ../../target/mods --module $ModuleAndMainClass --dest . --name $AppName --vendor $Vendor --resource-dir resources --java-options &quot;-XshowSettings:all&quot; --icon resources/$AppName.ico\r\n```\r\n\r\nI get the .exe application successfully but when I double click to the .exe, the process opens but ends immediately without warning or errors and when I create the .exe without websocket and without  org.eclipse.jetty, org.eclipse.websocket dependencies, the .exe runs successfully and I can interact with the graphical interface created with Javafx.\r\n\r\nI am using Jdk 20.0.2 with javafx framework 20.0.2 and I have installed Javafx jmod in the path %JAVA_HOME%/jmods and I tried the following:\r\n\r\n1. I tried install JavaxFx 20.0.2 framework from libs, copying the .jar files to the %JAVA_HOME%\\\\lib folder\r\n2. I tried clear cache memory\r\n3. I tried reinstall Java and JavaFx 20.0.2\r\n4. I tried disable antivirus when I execute Jpackage and Jlink commands\r\n5. I tried clear maeven packages repository.\r\n6. I have already validated that I only have a single version of Java installed(20.0.2)\r\n   7\\.I have already validated that the packages (jmod) are added to the destination folder where the .exe is located, I even copied them manually but the problem persists.\r\n7. I tried manually downloading javafx jmod packages to include the folder path in the --module-path parameter of the jLink command.\r\n\r\nMy system environment look fine: JAVA_HOME is the path of my jdk 20 installation folder and the Path has %JAVA_HOME%\\\\bin\r\nAfter that the problem still persists and I have the following questions:\r\n\r\n1. What do I have to include in jlink or jpackage so that I can create the application image and run it with javafx and websocket server (org.eclipse.jetty)?\r\n2. How can I validate the log of the application when it starts if it automatically closes?, Does Java have a way to monitor the execution of an .exe created with jpackage?\r\n3. How can I verify that the runtime that is included in the application image can load all the necessary packages for the application to start?\r\n   Any thoughts will be greatly appreciated.\r\n   Best","title":"Cannot start program created with jpackage","body":"<p>Hello everyone I am new using jpackage and I am building a java aplicaction with JavaFx framework and I added a Websocket server (using org.eclipse.jetty.websocket and org.eclipse.jetty dependencies) but the application does not start when I double click to the .exe.\nI am using  the following dependencies in my pom file to add the websocket server:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n            &lt;artifactId&gt;jetty-server&lt;/artifactId&gt;\n            &lt;version&gt;11.0.15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n            &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;\n            &lt;version&gt;11.0.15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.jetty.websocket&lt;/groupId&gt;\n            &lt;artifactId&gt;websocket-jetty-api&lt;/artifactId&gt;\n            &lt;version&gt;11.0.15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.jetty.websocket&lt;/groupId&gt;\n            &lt;artifactId&gt;websocket-jetty-server&lt;/artifactId&gt;\n            &lt;version&gt;11.0.15&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The application was made in IntelliJ with java 20 and is working fine when i debug and I can interact with the graphical interface and I can connect to the websocket server but when I create  app image (.exe) with the following commands:</p>\n<pre><code>jlink --verbose --output runtime --module-path &quot;$Env:JAVA_HOME/jmods&quot; --add-modules javafx.base,javafx.controls,javafx.fxml,javafx.graphics,javafx.media,javafx.swing,javafx.web,java.base,java.desktop,java.instrument,java.logging,java.naming,java.net.http,java.scripting,java.sql,java.xml,jdk.unsupported,jdk.crypto.ec,jdk.accessibility,jdk.management.jfr --strip-native-commands --no-header-files --no-man-pages --strip-debug --compress=1\n</code></pre>\n<pre><code>jpackage --verbose --type app-image --runtime-image runtime --input ../../target/libs --module-path ../../target/mods --module $ModuleAndMainClass --dest . --name $AppName --vendor $Vendor --resource-dir resources --java-options &quot;-XshowSettings:all&quot; --icon resources/$AppName.ico\n</code></pre>\n<p>I get the .exe application successfully but when I double click to the .exe, the process opens but ends immediately without warning or errors and when I create the .exe without websocket and without  org.eclipse.jetty, org.eclipse.websocket dependencies, the .exe runs successfully and I can interact with the graphical interface created with Javafx.</p>\n<p>I am using Jdk 20.0.2 with javafx framework 20.0.2 and I have installed Javafx jmod in the path %JAVA_HOME%/jmods and I tried the following:</p>\n<ol>\n<li>I tried install JavaxFx 20.0.2 framework from libs, copying the .jar files to the %JAVA_HOME%\\lib folder</li>\n<li>I tried clear cache memory</li>\n<li>I tried reinstall Java and JavaFx 20.0.2</li>\n<li>I tried disable antivirus when I execute Jpackage and Jlink commands</li>\n<li>I tried clear maeven packages repository.</li>\n<li>I have already validated that I only have a single version of Java installed(20.0.2)\n7.I have already validated that the packages (jmod) are added to the destination folder where the .exe is located, I even copied them manually but the problem persists.</li>\n<li>I tried manually downloading javafx jmod packages to include the folder path in the --module-path parameter of the jLink command.</li>\n</ol>\n<p>My system environment look fine: JAVA_HOME is the path of my jdk 20 installation folder and the Path has %JAVA_HOME%\\bin\nAfter that the problem still persists and I have the following questions:</p>\n<ol>\n<li>What do I have to include in jlink or jpackage so that I can create the application image and run it with javafx and websocket server (org.eclipse.jetty)?</li>\n<li>How can I validate the log of the application when it starts if it automatically closes?, Does Java have a way to monitor the execution of an .exe created with jpackage?</li>\n<li>How can I verify that the runtime that is included in the application image can load all the necessary packages for the application to start?\nAny thoughts will be greatly appreciated.\nBest</li>\n</ol>\n"},{"tags":["java","awtrobot"],"answers":[{"tags":[],"owner":{"account_id":6595050,"reputation":344,"user_id":5095124,"accept_rate":59,"display_name":"The Law"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1445534428,"creation_date":1445534428,"answer_id":33286873,"question_id":33286724,"body_markdown":"Java generally does not recognize multimedia key strokes (and Fn is generally considered non-standard keyboard key) as valid ones in its inbuilt libraries and will return 0 on non-standard `keystroke event`.\r\n\r\nBut you can get your key by using [Intellitype][1] library for non-standard keys and also as possible work-around for the input.\r\n\r\n\r\n  [1]: https://code.google.com/p/jintellitype/","title":"Using the Robot class in Java to simulate &quot;Fn&quot; key press","body":"<p>Java generally does not recognize multimedia key strokes (and Fn is generally considered non-standard keyboard key) as valid ones in its inbuilt libraries and will return 0 on non-standard <code>keystroke event</code>.</p>\n\n<p>But you can get your key by using <a href=\"https://code.google.com/p/jintellitype/\" rel=\"noreferrer\">Intellitype</a> library for non-standard keys and also as possible work-around for the input.</p>\n"}],"owner":{"account_id":7168504,"reputation":393,"user_id":5476825,"accept_rate":50,"display_name":"Daanv z"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2990,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1695343954,"creation_date":1445533841,"question_id":33286724,"body_markdown":"I&#39;m trying to write a small program that makes the backlight of my laptop&#39;s keyboard flash whenever I receive an email/text/other type of message.\r\nI&#39;m trying to use Java&#39;s Robot class to do this.\r\n\r\nMy problem so far is that I cannot seem to find the keycode for the &quot;Fn&quot; key.","title":"Using the Robot class in Java to simulate &quot;Fn&quot; key press","body":"<p>I'm trying to write a small program that makes the backlight of my laptop's keyboard flash whenever I receive an email/text/other type of message.\nI'm trying to use Java's Robot class to do this.</p>\n\n<p>My problem so far is that I cannot seem to find the keycode for the \"Fn\" key.</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695351069,"post_id":77154243,"comment_id":136015850,"body_markdown":"You can utilize an _[XPath](https://en.wikipedia.org/wiki/XPath)_ for the _NodeList_, _//*[@*[contains(name(), &#39;ID&#39;)]]_.","body":"You can utilize an <i><a href=\"https://en.wikipedia.org/wiki/XPath\" rel=\"nofollow noreferrer\">XPath</a></i> for the <i>NodeList</i>, <i>//*[@*[contains(name(), &#39;ID&#39;)]]</i>."}],"answers":[{"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695342787,"creation_date":1695342787,"answer_id":77154302,"question_id":77154243,"body_markdown":"If you want to reduce the spaghetti, make each method fulfill a small step that returns a result and make each step happen one by one in the main method, passing on each result to the next method. \r\n\r\nHere&#39;s an example of how that could be done.\r\n\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String fullPath = &quot;[Path to Folder]&quot;;\r\n        fullPath = fullPath.replace(&quot;\\\\&quot;, &quot;/&quot;);\r\n        Path dir = Paths.get(fullPath);\r\n        List&lt;String&gt; xmlFileList = createListOfAllXMLFiles(dir);\r\n        List&lt;Document&gt; xmlDocuments = readDirectory(dir);\r\n        xmlDocuments.forEach(doc -&gt; readContents(doc.getDocumentElement(), xmlFileList));\r\n    }\r\n\r\n    public static List&lt;Document&gt; readDirectory(Path dir) throws IOException {\r\n        List&lt;Document&gt; documents = new LinkedList&lt;&gt;();\r\n        Files.walk(dir).forEach(\r\n                //path -&gt; showFile(path.toFile())\r\n                path -&gt; {\r\n                        if (path.toFile().isFile()) {\r\n                            try {\r\n                                Document document = readXML(path);\r\n                                documents.add(document);\r\n                            } catch (Exception e) {\r\n                            //System.out.println(&quot;Exception: &quot; + e.getMessage());\r\n                            }\r\n                        }\r\n                }\r\n        );\r\n        return documents;\r\n    }\r\n\r\n    public static List&lt;String&gt; createListOfAllXMLFiles(Path dir) {\r\n        List&lt;String&gt; fileList = new ArrayList&lt;String&gt;();\r\n\r\n        try (Stream&lt;Path&gt; walkStream = Files.walk(dir)) {\r\n            walkStream.filter(p -&gt; p.toFile().isFile()).forEach(f -&gt; {\r\n                String fileName = f.getFileName().toString().substring(0, f.getFileName().toString().lastIndexOf(&#39;.&#39;));\r\n\r\n                fileList.add(fileName );\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return fileList;\r\n    }\r\n\r\n    public static Document readXML(Path path) throws ParserConfigurationException, IOException, SAXException {\r\n\r\n        Document document;\r\n        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();\r\n        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\r\n        document = docBuilder.parse(path.toFile());\r\n        return document;\r\n    }\r\n\r\n    public static void readContents(Node node, List&lt;String&gt; fileList) {\r\n        // do something with the current node instead of System.out\r\n        //System.out.println(node.getNodeName());\r\n\r\n        checkAttributes(node, fileList);\r\n\r\n\r\n        NodeList nodeList = node.getChildNodes();\r\n        for (int i = 0; i &lt; nodeList.getLength(); i++) {\r\n            Node currentNode = nodeList.item(i);\r\n            if (currentNode.getNodeType() == Node.ELEMENT_NODE) {\r\n                //calls this method for all the children which is Element\r\n                readContents(currentNode, fileList);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void checkAttributes(Node element, List&lt;String&gt; fileList) {\r\n        String lookupString = &quot;ID&quot;;\r\n\r\n        String nodeName = element.getNodeName();\r\n        NamedNodeMap attributes = element.getAttributes();\r\n        for (int i = 0; i &lt; attributes.getLength(); i++) {\r\n            Node node = attributes.item(i);\r\n            String attributeName = node.getNodeName();\r\n            String attributeValue = node.getNodeValue();\r\n\r\n            if (attributeName.contains(lookupString)) {\r\n\r\n                boolean idExists = fileList.contains(attributeValue);\r\n\r\n                if (!idExists) {\r\n                    System.out.println(&quot;  Cannot find attributeName: &quot; + attributeName + &quot;; attributeValue: &quot; + attributeValue + &quot;; nodeName: &quot; + nodeName);\r\n                }\r\n            }\r\n        }\r\n    }","title":"Issue with passing too many arguments to lower level functions","body":"<p>If you want to reduce the spaghetti, make each method fulfill a small step that returns a result and make each step happen one by one in the main method, passing on each result to the next method.</p>\n<p>Here's an example of how that could be done.</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    String fullPath = &quot;[Path to Folder]&quot;;\n    fullPath = fullPath.replace(&quot;\\\\&quot;, &quot;/&quot;);\n    Path dir = Paths.get(fullPath);\n    List&lt;String&gt; xmlFileList = createListOfAllXMLFiles(dir);\n    List&lt;Document&gt; xmlDocuments = readDirectory(dir);\n    xmlDocuments.forEach(doc -&gt; readContents(doc.getDocumentElement(), xmlFileList));\n}\n\npublic static List&lt;Document&gt; readDirectory(Path dir) throws IOException {\n    List&lt;Document&gt; documents = new LinkedList&lt;&gt;();\n    Files.walk(dir).forEach(\n            //path -&gt; showFile(path.toFile())\n            path -&gt; {\n                    if (path.toFile().isFile()) {\n                        try {\n                            Document document = readXML(path);\n                            documents.add(document);\n                        } catch (Exception e) {\n                        //System.out.println(&quot;Exception: &quot; + e.getMessage());\n                        }\n                    }\n            }\n    );\n    return documents;\n}\n\npublic static List&lt;String&gt; createListOfAllXMLFiles(Path dir) {\n    List&lt;String&gt; fileList = new ArrayList&lt;String&gt;();\n\n    try (Stream&lt;Path&gt; walkStream = Files.walk(dir)) {\n        walkStream.filter(p -&gt; p.toFile().isFile()).forEach(f -&gt; {\n            String fileName = f.getFileName().toString().substring(0, f.getFileName().toString().lastIndexOf('.'));\n\n            fileList.add(fileName );\n        });\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return fileList;\n}\n\npublic static Document readXML(Path path) throws ParserConfigurationException, IOException, SAXException {\n\n    Document document;\n    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\n    document = docBuilder.parse(path.toFile());\n    return document;\n}\n\npublic static void readContents(Node node, List&lt;String&gt; fileList) {\n    // do something with the current node instead of System.out\n    //System.out.println(node.getNodeName());\n\n    checkAttributes(node, fileList);\n\n\n    NodeList nodeList = node.getChildNodes();\n    for (int i = 0; i &lt; nodeList.getLength(); i++) {\n        Node currentNode = nodeList.item(i);\n        if (currentNode.getNodeType() == Node.ELEMENT_NODE) {\n            //calls this method for all the children which is Element\n            readContents(currentNode, fileList);\n        }\n    }\n}\n\npublic static void checkAttributes(Node element, List&lt;String&gt; fileList) {\n    String lookupString = &quot;ID&quot;;\n\n    String nodeName = element.getNodeName();\n    NamedNodeMap attributes = element.getAttributes();\n    for (int i = 0; i &lt; attributes.getLength(); i++) {\n        Node node = attributes.item(i);\n        String attributeName = node.getNodeName();\n        String attributeValue = node.getNodeValue();\n\n        if (attributeName.contains(lookupString)) {\n\n            boolean idExists = fileList.contains(attributeValue);\n\n            if (!idExists) {\n                System.out.println(&quot;  Cannot find attributeName: &quot; + attributeName + &quot;; attributeValue: &quot; + attributeValue + &quot;; nodeName: &quot; + nodeName);\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2474796,"reputation":387,"user_id":2155646,"accept_rate":88,"display_name":"Spacko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77154302,"answer_count":1,"score":0,"last_activity_date":1695343075,"creation_date":1695341162,"question_id":77154243,"body_markdown":"I am struggling to how to improve the code of the problem that I written below.\r\n\r\n\r\nI have a folder with subfolders containing many xml files\r\nEach file represents an single object\r\n\r\n* Parent Folder\r\n    * Attributes\r\n        * id1.xml\r\n        * id2.xml\r\n        * id3.xml\r\n    * AttributeGroups\r\n        * id4.xml\r\n        * id5.xml\r\n        * id6.xml\r\n    * UserTypes\r\n        * id7.xml\r\n        * id8.xml\r\n\r\nEach xml contains references to other objects.\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;ProductInformation&gt;\r\n   &lt;AttributeList&gt;\r\n        &lt;Attribute ID=&quot;id1&quot;&gt;\r\n            &lt;AttributeGroupLink AttributeGroupID=&quot;id4&quot;&gt;&lt;/AttributeGroupLink&gt;\r\n            &lt;UserTypeLink UserTypeID=&quot;id8&quot;&gt;&lt;/UserTypeLink&gt;\r\n            &lt;UserTypeLink UserTypeID=&quot;id9&quot;&gt;&lt;/UserTypeLink&gt;\r\n        &lt;/Attribute&gt;\r\n    &lt;/AttributeList&gt;\r\n&lt;/ProductInformation&gt;\r\n```\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;ProductInformation&gt;\r\n   &lt;AttributeList&gt;\r\n        &lt;Attribute ID=&quot;id2&quot;&gt;\r\n            &lt;AttributeGroupLink AttributeGroupID=&quot;id5&quot;&gt;&lt;/AttributeGroupLink&gt;\r\n            &lt;AttributeGroupLink AttributeGroupID=&quot;id6&quot;&gt;&lt;/AttributeGroupLink&gt;\r\n            &lt;UserTypeLink UserTypeID=&quot;id7&quot;&gt;&lt;/UserTypeLink&gt;\r\n            &lt;UserTypeLink UserTypeID=&quot;id9&quot;&gt;&lt;/UserTypeLink&gt;\r\n        &lt;/Attribute&gt;\r\n    &lt;/AttributeList&gt;\r\n&lt;/ProductInformation&gt;\r\n```\r\n\r\nI want to write a program to loop through each xml file, read the relevant attributes to get the referenced ids. If a file with the referenced id does not exist, I want to log that.\r\n\r\nI have written a first pass that works. However I think that the design can be improved, as I am\r\n* Passing a lot of data from higher level functions to lower level functions\r\n* Unable to log all the information I want such as \r\n    * Directory Name where the error was found\r\n* Unsure how to only log each unique error once (i.e. above id9 \r\n\r\nMy code\r\n\r\n```java\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String fullPath = &quot;[Path to Folder]&quot;;\r\n        fullPath = fullPath.replace(&quot;\\\\&quot;, &quot;/&quot;);\r\n        Path dir = Paths.get(fullPath);\r\n        readDirectory(dir);\r\n    }\r\n\r\n    public static void readDirectory(Path dir) throws IOException {\r\n\r\n\r\n        List&lt;String&gt; xmlList = createListOfAllXMLFiles(dir);\r\n\r\n        Files.walk(dir).forEach(\r\n                //path -&gt; showFile(path.toFile())\r\n                path -&gt; {\r\n                    try {\r\n                        if (path.toFile().isFile()) {\r\n                            readXML(path, xmlList );\r\n                        }\r\n                    } catch (ParserConfigurationException | IOException | SAXException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n        );\r\n    }\r\n\r\n    public static List&lt;String&gt; createListOfAllXMLFiles(Path dir) {\r\n        List&lt;String&gt; fileList = new ArrayList&lt;String&gt;();\r\n\r\n        try (Stream&lt;Path&gt; walkStream = Files.walk(dir)) {\r\n            walkStream.filter(p -&gt; p.toFile().isFile()).forEach(f -&gt; {\r\n                String fileName = f.getFileName().toString().substring(0, f.getFileName().toString().lastIndexOf(&#39;.&#39;));\r\n\r\n                fileList.add(fileName );\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return fileList;\r\n    }\r\n\r\n    public static void readXML(Path path, List&lt;String&gt; fileList) throws ParserConfigurationException, IOException, SAXException {\r\n\r\n        Document document;\r\n        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();\r\n        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\r\n        try {\r\n            document = docBuilder.parse(path.toFile());\r\n        } catch (Exception e) {\r\n            //System.out.println(&quot;Exception: &quot; + e.getMessage());\r\n            return;\r\n        }\r\n\r\n        readContents(document.getDocumentElement(), fileList);\r\n\r\n    }\r\n\r\n    public static void readContents(Node node, List&lt;String&gt; fileList) {\r\n        // do something with the current node instead of System.out\r\n        //System.out.println(node.getNodeName());\r\n\r\n        checkAttributes(node, fileList);\r\n\r\n\r\n        NodeList nodeList = node.getChildNodes();\r\n        for (int i = 0; i &lt; nodeList.getLength(); i++) {\r\n            Node currentNode = nodeList.item(i);\r\n            if (currentNode.getNodeType() == Node.ELEMENT_NODE) {\r\n                //calls this method for all the children which is Element\r\n                readContents(currentNode, fileList);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void checkAttributes(Node element, List&lt;String&gt; fileList) {\r\n        String lookupString = &quot;ID&quot;;\r\n\r\n        String nodeName = element.getNodeName();\r\n        NamedNodeMap attributes = element.getAttributes();\r\n        for (int i = 0; i &lt; attributes.getLength(); i++) {\r\n            Node node = attributes.item(i);\r\n            String attributeName = node.getNodeName();\r\n            String attributeValue = node.getNodeValue();\r\n\r\n            if (attributeName.contains(lookupString)) {\r\n\r\n                boolean idExists = fileList.contains(attributeValue);\r\n\r\n                if (!idExists) {\r\n                    System.out.println(&quot;  Cannot find attributeName: &quot; + attributeName + &quot;; attributeValue: &quot; + attributeValue + &quot;; nodeName: &quot; + nodeName);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n","title":"Issue with passing too many arguments to lower level functions","body":"<p>I am struggling to how to improve the code of the problem that I written below.</p>\n<p>I have a folder with subfolders containing many xml files\nEach file represents an single object</p>\n<ul>\n<li>Parent Folder\n<ul>\n<li>Attributes\n<ul>\n<li>id1.xml</li>\n<li>id2.xml</li>\n<li>id3.xml</li>\n</ul>\n</li>\n<li>AttributeGroups\n<ul>\n<li>id4.xml</li>\n<li>id5.xml</li>\n<li>id6.xml</li>\n</ul>\n</li>\n<li>UserTypes\n<ul>\n<li>id7.xml</li>\n<li>id8.xml</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Each xml contains references to other objects.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;ProductInformation&gt;\n   &lt;AttributeList&gt;\n        &lt;Attribute ID=&quot;id1&quot;&gt;\n            &lt;AttributeGroupLink AttributeGroupID=&quot;id4&quot;&gt;&lt;/AttributeGroupLink&gt;\n            &lt;UserTypeLink UserTypeID=&quot;id8&quot;&gt;&lt;/UserTypeLink&gt;\n            &lt;UserTypeLink UserTypeID=&quot;id9&quot;&gt;&lt;/UserTypeLink&gt;\n        &lt;/Attribute&gt;\n    &lt;/AttributeList&gt;\n&lt;/ProductInformation&gt;\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;ProductInformation&gt;\n   &lt;AttributeList&gt;\n        &lt;Attribute ID=&quot;id2&quot;&gt;\n            &lt;AttributeGroupLink AttributeGroupID=&quot;id5&quot;&gt;&lt;/AttributeGroupLink&gt;\n            &lt;AttributeGroupLink AttributeGroupID=&quot;id6&quot;&gt;&lt;/AttributeGroupLink&gt;\n            &lt;UserTypeLink UserTypeID=&quot;id7&quot;&gt;&lt;/UserTypeLink&gt;\n            &lt;UserTypeLink UserTypeID=&quot;id9&quot;&gt;&lt;/UserTypeLink&gt;\n        &lt;/Attribute&gt;\n    &lt;/AttributeList&gt;\n&lt;/ProductInformation&gt;\n</code></pre>\n<p>I want to write a program to loop through each xml file, read the relevant attributes to get the referenced ids. If a file with the referenced id does not exist, I want to log that.</p>\n<p>I have written a first pass that works. However I think that the design can be improved, as I am</p>\n<ul>\n<li>Passing a lot of data from higher level functions to lower level functions</li>\n<li>Unable to log all the information I want such as\n<ul>\n<li>Directory Name where the error was found</li>\n</ul>\n</li>\n<li>Unsure how to only log each unique error once (i.e. above id9</li>\n</ul>\n<p>My code</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String[] args) throws Exception {\n        String fullPath = &quot;[Path to Folder]&quot;;\n        fullPath = fullPath.replace(&quot;\\\\&quot;, &quot;/&quot;);\n        Path dir = Paths.get(fullPath);\n        readDirectory(dir);\n    }\n\n    public static void readDirectory(Path dir) throws IOException {\n\n\n        List&lt;String&gt; xmlList = createListOfAllXMLFiles(dir);\n\n        Files.walk(dir).forEach(\n                //path -&gt; showFile(path.toFile())\n                path -&gt; {\n                    try {\n                        if (path.toFile().isFile()) {\n                            readXML(path, xmlList );\n                        }\n                    } catch (ParserConfigurationException | IOException | SAXException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n        );\n    }\n\n    public static List&lt;String&gt; createListOfAllXMLFiles(Path dir) {\n        List&lt;String&gt; fileList = new ArrayList&lt;String&gt;();\n\n        try (Stream&lt;Path&gt; walkStream = Files.walk(dir)) {\n            walkStream.filter(p -&gt; p.toFile().isFile()).forEach(f -&gt; {\n                String fileName = f.getFileName().toString().substring(0, f.getFileName().toString().lastIndexOf('.'));\n\n                fileList.add(fileName );\n            });\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        return fileList;\n    }\n\n    public static void readXML(Path path, List&lt;String&gt; fileList) throws ParserConfigurationException, IOException, SAXException {\n\n        Document document;\n        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();\n        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\n        try {\n            document = docBuilder.parse(path.toFile());\n        } catch (Exception e) {\n            //System.out.println(&quot;Exception: &quot; + e.getMessage());\n            return;\n        }\n\n        readContents(document.getDocumentElement(), fileList);\n\n    }\n\n    public static void readContents(Node node, List&lt;String&gt; fileList) {\n        // do something with the current node instead of System.out\n        //System.out.println(node.getNodeName());\n\n        checkAttributes(node, fileList);\n\n\n        NodeList nodeList = node.getChildNodes();\n        for (int i = 0; i &lt; nodeList.getLength(); i++) {\n            Node currentNode = nodeList.item(i);\n            if (currentNode.getNodeType() == Node.ELEMENT_NODE) {\n                //calls this method for all the children which is Element\n                readContents(currentNode, fileList);\n            }\n        }\n    }\n\n    public static void checkAttributes(Node element, List&lt;String&gt; fileList) {\n        String lookupString = &quot;ID&quot;;\n\n        String nodeName = element.getNodeName();\n        NamedNodeMap attributes = element.getAttributes();\n        for (int i = 0; i &lt; attributes.getLength(); i++) {\n            Node node = attributes.item(i);\n            String attributeName = node.getNodeName();\n            String attributeValue = node.getNodeValue();\n\n            if (attributeName.contains(lookupString)) {\n\n                boolean idExists = fileList.contains(attributeValue);\n\n                if (!idExists) {\n                    System.out.println(&quot;  Cannot find attributeName: &quot; + attributeName + &quot;; attributeValue: &quot; + attributeValue + &quot;; nodeName: &quot; + nodeName);\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","testng","ui-automation","testng-eclipse"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1695352525,"post_id":77131218,"comment_id":136015956,"body_markdown":"Did you see the error message? It cannot find  `org.slf4j.LoggerFactory`. At this point you can either install that manually (a web search should find it) and hope that this is the only dependency TestNG has, and if not, resolve any other dependencies manually as well. Or, and I&#39;d recommend that, switch to Maven or Gradle and let the tool handle the dependencies for you.","body":"Did you see the error message? It cannot find  <code>org.slf4j.LoggerFactory</code>. At this point you can either install that manually (a web search should find it) and hope that this is the only dependency TestNG has, and if not, resolve any other dependencies manually as well. Or, and I&#39;d recommend that, switch to Maven or Gradle and let the tool handle the dependencies for you."}],"owner":{"account_id":29477807,"reputation":1,"user_id":22589153,"display_name":"Papiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695342758,"creation_date":1695087330,"question_id":77131218,"body_markdown":"I am getting the below error on running `TestNG` test. Kindly suggest what could be wrong.\r\n\r\nNote: I have installed `TestNG` v 708 from Eclipse IDE. My project is not a Maven Project so I have not added any dependency, it&#39;s a normal Java project.\r\n\r\n```\r\n[RemoteTestNG] detected TestNG version 7.8.0\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory\r\n\tat org.testng.log4testng.Logger.lambda$getLogger$0(Logger.java:30)\r\n\tat java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)\r\n\tat org.testng.log4testng.Logger.getLogger(Logger.java:30)\r\n\tat org.testng.TestNG.&lt;clinit&gt;(TestNG.java:113)\r\n\tat org.testng.remote.support.RemoteTestNGFactory7_8.createRemoteTestNG(RemoteTestNGFactory7_8.java:16)\r\n\tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:67)\r\nCaused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\t... 6 more\r\n```\r\n\r\nHow can I resolve it?","title":"Not able to run TestNG test","body":"<p>I am getting the below error on running <code>TestNG</code> test. Kindly suggest what could be wrong.</p>\n<p>Note: I have installed <code>TestNG</code> v 708 from Eclipse IDE. My project is not a Maven Project so I have not added any dependency, it's a normal Java project.</p>\n<pre><code>[RemoteTestNG] detected TestNG version 7.8.0\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory\n    at org.testng.log4testng.Logger.lambda$getLogger$0(Logger.java:30)\n    at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)\n    at org.testng.log4testng.Logger.getLogger(Logger.java:30)\n    at org.testng.TestNG.&lt;clinit&gt;(TestNG.java:113)\n    at org.testng.remote.support.RemoteTestNGFactory7_8.createRemoteTestNG(RemoteTestNGFactory7_8.java:16)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:67)\nCaused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 6 more\n</code></pre>\n<p>How can I resolve it?</p>\n"},{"tags":["java","string","stream","byte"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":2,"creation_date":1695318478,"post_id":77152491,"comment_id":136011902,"body_markdown":"There&#39;s no advantage to using StringWriter","body":"There&#39;s no advantage to using StringWriter"},{"owner":{"account_id":251706,"reputation":5323,"user_id":529282,"display_name":"Martheen"},"score":2,"creation_date":1695318558,"post_id":77152491,"comment_id":136011918,"body_markdown":"Where do you even get that second part? It looks like it comes from a decompression logic that gets extracted and then adapted without understanding the reasoning.","body":"Where do you even get that second part? It looks like it comes from a decompression logic that gets extracted and then adapted without understanding the reasoning."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695342453,"post_id":77152491,"comment_id":136015163,"body_markdown":"Are you certain the bytes represent text?","body":"Are you certain the bytes represent text?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1695343710,"post_id":77152491,"comment_id":136015261,"body_markdown":"`String s = Files.readString(Paths.get(&quot;... .txt&quot;));` would be better - if possible.","body":"<code>String s = Files.readString(Paths.get(&quot;... .txt&quot;));</code> would be better - if possible."}],"answers":[{"tags":[],"owner":{"account_id":25728677,"reputation":29,"user_id":19484558,"display_name":"firapinch"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695319946,"creation_date":1695319946,"answer_id":77152667,"question_id":77152491,"body_markdown":"For small to moderately sized byte arrays, use new String(byteArr, UTF_8) for simplicity and efficiency. For very large files or stream-based processing, consider the ByteArrayInputStream approach, but it&#39;s more complex.","title":"Java: String vs StringWriter?","body":"<p>For small to moderately sized byte arrays, use new String(byteArr, UTF_8) for simplicity and efficiency. For very large files or stream-based processing, consider the ByteArrayInputStream approach, but it's more complex.</p>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695342576,"creation_date":1695342576,"answer_id":77154293,"question_id":77152491,"body_markdown":"If the goal is to convert from a byte array you already have, that represents UTF-8 text, to a single `String`, then `new String(bytes, UTF_8)` is unambiguously the best, most efficient solution.\r\n\r\nIf any of those aren&#39;t true, e.g. you are reading the file incrementally, the situation may change, but you will have to specify the situation.","title":"Java: String vs StringWriter?","body":"<p>If the goal is to convert from a byte array you already have, that represents UTF-8 text, to a single <code>String</code>, then <code>new String(bytes, UTF_8)</code> is unambiguously the best, most efficient solution.</p>\n<p>If any of those aren't true, e.g. you are reading the file incrementally, the situation may change, but you will have to specify the situation.</p>\n"}],"owner":{"account_id":20053569,"reputation":141,"user_id":14701745,"display_name":"HelloWorld"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695342576,"creation_date":1695318035,"question_id":77152491,"body_markdown":"If I have an array of bytes(which could be from fairly large file), which is better for constructing a String?\r\n\r\n```\r\nnew String(byteArr, UTF_8);\r\n```\r\n\r\nvs\r\n\r\n```\r\ntry (final ByteArrayInputStream decompressed = new ByteArrayInputStream(byteArr);\r\n     final StringWriter stringWriter = new StringWriter()) {\r\n\r\n  IOUtils.copy(decompressed, stringWriter, UTF_8);\r\n  return stringWriter.toString();\r\n\r\n} catch(...) {//...}\r\n```\r\nIs there any benefit to using `StringWriter` here?","title":"Java: String vs StringWriter?","body":"<p>If I have an array of bytes(which could be from fairly large file), which is better for constructing a String?</p>\n<pre><code>new String(byteArr, UTF_8);\n</code></pre>\n<p>vs</p>\n<pre><code>try (final ByteArrayInputStream decompressed = new ByteArrayInputStream(byteArr);\n     final StringWriter stringWriter = new StringWriter()) {\n\n  IOUtils.copy(decompressed, stringWriter, UTF_8);\n  return stringWriter.toString();\n\n} catch(...) {//...}\n</code></pre>\n<p>Is there any benefit to using <code>StringWriter</code> here?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1695018998,"post_id":77124891,"comment_id":135962667,"body_markdown":"I think you need to use [TextFlow](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/TextFlow.html) (rather than `TextArea`). Also refer to [JavaFX Multiple colors in textarea (JavaFX 8)](https://stackoverflow.com/questions/23202828/javafx-multiple-colors-in-textarea-javafx-8).","body":"I think you need to use <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/TextFlow.html\" rel=\"nofollow noreferrer\">TextFlow</a> (rather than <code>TextArea</code>). Also refer to <a href=\"https://stackoverflow.com/questions/23202828/javafx-multiple-colors-in-textarea-javafx-8\">JavaFX Multiple colors in textarea (JavaFX 8)</a>."},{"owner":{"display_name":"user16612111"},"score":0,"creation_date":1695019093,"post_id":77124891,"comment_id":135962682,"body_markdown":"@Abra ,Okay I will try. But have you tried to reproduce my code and see whether it gets past the isPresent block? Thanks. On my end it&#39;s not printing the text and not executing the code in the false block","body":"@Abra ,Okay I will try. But have you tried to reproduce my code and see whether it gets past the isPresent block? Thanks. On my end it&#39;s not printing the text and not executing the code in the false block"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1695019327,"post_id":77124891,"comment_id":135962716,"body_markdown":"If you want someone to try to reproduce the behavior you claim to be seeing, then I suggest that you post a [mcve].","body":"If you want someone to try to reproduce the behavior you claim to be seeing, then I suggest that you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1695030216,"post_id":77124891,"comment_id":135964743,"body_markdown":"Don’t create new text, set [the selection](https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/TextInputControl.html#selectionProperty) on the existing text and style the selection in a css style sheet.","body":"Don’t create new text, set <a href=\"https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/TextInputControl.html#selectionProperty\" rel=\"nofollow noreferrer\">the selection</a> on the existing text and style the selection in a css style sheet."}],"answers":[{"tags":[],"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695173909,"creation_date":1695173909,"answer_id":77138802,"question_id":77124891,"body_markdown":"+1 for all the suggestions provided in the comments. I do recommend to use TextFlow for getting a better styled text. \r\n\r\nI also like @jewelsea suggestion of selecting the required text (to keep it simple) . But keep a note that, this approach has few limitations. You can only change the color but not the text style. And the selection/highlighting will be cleared, the moment you try to select the text manually.\r\n\r\nBut if you say you need to get this behavior with TextArea and you need to still have the selection behavior (while your text is highlighted), you can check the below solution.\r\n\r\nFirstly, I recommend to work with a Stage rather than using Dialog. This way you have better control over the buttons.\r\n\r\nSecondly, I created a custom TextArea control, that has an extra feature of highlighting the text. This logic is same as how TextArea selection works (like using Path for building selection area). And for this Path, I am using BlendMode.ADD to let the color apply on text instead of background.\r\n\r\nThe complete working demo is below. This is just to give you some ideas. If you think this looks like an overkill for your requirement, then ignore this approach and stick to @jewelsea suggestion.\r\n\r\n*Note: This may not cover all scenarios. Check the logic thoroughly and fix if you are going with this approach* ;)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.IntegerProperty;\r\n    import javafx.beans.property.SimpleIntegerProperty;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Point2D;\r\n    import javafx.geometry.Pos;\r\n    import javafx.geometry.Rectangle2D;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.TextArea;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.control.skin.TextAreaSkin;\r\n    import javafx.scene.effect.BlendMode;\r\n    import javafx.scene.layout.*;\r\n    import javafx.scene.shape.LineTo;\r\n    import javafx.scene.shape.MoveTo;\r\n    import javafx.scene.shape.Path;\r\n    import javafx.scene.shape.PathElement;\r\n    import javafx.stage.Stage;\r\n    import javafx.stage.StageStyle;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class TextAreaSearchDemo extends Application {\r\n        String text = &quot;One day he was sitting on a rock, watching the goats, and he heard something in the bushes.&quot; +\r\n                &quot;A lion was moving slowly toward one of the goats. Wilson knew that he had to be brave.&quot; +\r\n                &quot;He thought about what he had learned from his father. He sat quietly, waiting for the right&quot; +\r\n                &quot;moment. He knew that if he did the wrong thing, the lion would kill him. Wilson lifted his&quot; +\r\n                &quot;spear and moved quietly toward the lion. When the lion saw him he looked him in the eye.&quot; +\r\n                &quot;They both froze. Wilson remembered all that his father had told him about being brave.&quot; +\r\n                &quot;He knew that he could throw his spear and kill the lion. Suddenly the lion turned away and&quot; +\r\n                &quot;disappeared over the rocks. Wilson stood strong and watched. After the danger passed he&quot; +\r\n                &quot;took a deep breath. He felt the sun on his face and put down his spear. Wilson knew that he&quot; +\r\n                &quot;could take care of the people in his family and his tribe.&quot;;\r\n    \r\n        @Override\r\n        public void start(final Stage stage) throws Exception {\r\n            Button search = new Button(&quot;Search&quot;);\r\n            CustomTextArea textArea = new CustomTextArea();\r\n            textArea.setText(text);\r\n            textArea.setWrapText(true);\r\n            VBox.setVgrow(textArea, Priority.ALWAYS);\r\n    \r\n            search.setOnAction(e -&gt; {\r\n                IntegerProperty index = new SimpleIntegerProperty(-1);\r\n    \r\n                TextField textField = new TextField();\r\n                textField.textProperty().addListener(p -&gt; index.set(-1));\r\n                HBox pane = new HBox(10, new Label(&quot;Enter the search phrase&quot;), textField);\r\n    \r\n                Button nextBtn = new Button(&quot;Next&quot;);\r\n                Button prevBtn = new Button(&quot;Previous&quot;);\r\n                nextBtn.setOnAction(e1 -&gt; handleSearch(textField.getText(), true, textArea, index));\r\n                prevBtn.setOnAction(e1 -&gt; handleSearch(textField.getText(), false, textArea, index));\r\n                HBox btnPane = new HBox(10, nextBtn, prevBtn);\r\n                btnPane.setAlignment(Pos.CENTER);\r\n    \r\n                VBox root = new VBox(20, pane, btnPane);\r\n                root.setPadding(new Insets(20));\r\n    \r\n                Stage dialog = new Stage();\r\n                dialog.initStyle(StageStyle.UTILITY);\r\n                dialog.setTitle(&quot;Find&quot;);\r\n                dialog.setScene(new Scene(root, 350, 150));\r\n                dialog.show();\r\n            });\r\n    \r\n            VBox root = new VBox(15, search, textArea);\r\n            root.setPadding(new Insets(10));\r\n            Scene scene = new Scene(root, 300, 400);\r\n            stage.setScene(scene);\r\n            stage.setTitle(&quot;TextArea Search&quot;);\r\n            stage.show();\r\n        }\r\n    \r\n        private void handleSearch(final String text, final boolean isNext, CustomTextArea textArea, IntegerProperty index) {\r\n            if (text == null || text.isEmpty()) {\r\n                return;\r\n            }\r\n    \r\n            int newIndex = isNext ? index.get() + 1 : index.get() - 1;\r\n            Pattern pattern = Pattern.compile(text);\r\n            Matcher matcher = pattern.matcher(textArea.getText());\r\n            int count = 0;\r\n            while (matcher.find()) {\r\n                if (count == newIndex) {\r\n                    textArea.highlightRange(matcher.start(), matcher.end() - 1);\r\n                    index.set(newIndex);\r\n                    break;\r\n                }\r\n                count++;\r\n            }\r\n        }\r\n    \r\n        class CustomTextArea extends TextArea {\r\n            /**\r\n             * Start index of the highlight.\r\n             */\r\n            private int highlightStartIndex;\r\n    \r\n            /**\r\n             * End index of the highlight.\r\n             */\r\n            private int highlightEndIndex;\r\n    \r\n            /**\r\n             * Rectangle node to act as highlight.\r\n             */\r\n            private final Path highlightPath;\r\n    \r\n            /**\r\n             * Node to keep reference of the all contents of the TextArea.\r\n             */\r\n            private StackPane contentPane;\r\n    \r\n            boolean highlightRequired = false;\r\n    \r\n            public CustomTextArea() {\r\n                /* Setting default values */\r\n                highlightStartIndex = -1;\r\n                highlightEndIndex = -1;\r\n    \r\n                /* Settings for text highlighting */\r\n                highlightPath = new Path();\r\n                highlightPath.getStyleClass().add(&quot;textarea-highlight&quot;);\r\n                highlightPath.setMouseTransparent(true);\r\n                highlightPath.setManaged(false);\r\n                highlightPath.setStroke(null);\r\n                highlightPath.setStyle(&quot;-fx-fill:red;-fx-stroke-width:0px;&quot;);\r\n                highlightPath.setBlendMode(BlendMode.ADD);\r\n    \r\n                textProperty().addListener((obs, oldVal, newVal) -&gt; removeHighlight());\r\n                /*\r\n                 * When the width of the TextArea changes, we need to update the selection path bounds.\r\n                 */\r\n                widthProperty().addListener((obs, oldVal, newVal) -&gt; {\r\n                    if (highlightStartIndex &gt; -1) {\r\n                        doHighlightIndex();\r\n                    }\r\n                });\r\n    \r\n                needsLayoutProperty().addListener((obs, oldval, needsLayout) -&gt; {\r\n                    if (!needsLayout &amp;&amp; highlightRequired) {\r\n                        doHighlightIndex();\r\n                        highlightRequired = false;\r\n                    }\r\n                });\r\n            }\r\n    \r\n            /**\r\n             * Removes the highlight in the text area.\r\n             */\r\n            public final void removeHighlight() {\r\n                if (contentPane != null) {\r\n                    contentPane.getChildren().remove(highlightPath);\r\n                }\r\n                highlightStartIndex = -1;\r\n                highlightEndIndex = -1;\r\n            }\r\n    \r\n            /**\r\n             * Highlights the character at the provided index in the text area.\r\n             *\r\n             * @param highlightPos Position of the character in the text\r\n             */\r\n            public final void highlight(final int highlightPos) {\r\n                highlightRange(highlightPos, highlightPos);\r\n            }\r\n    \r\n            /**\r\n             * Highlights the characters for the provided index range in the text area.\r\n             *\r\n             * @param start Start character index for highlighting\r\n             * @param end   End character index for highlighting\r\n             */\r\n            public final void highlightRange(final int start, final int end) {\r\n                if (end &lt; start) {\r\n                    throw new IllegalArgumentException(&quot;Caret cannot be less than the anchor index&quot;);\r\n                }\r\n                if (getLength() &gt; 0) {\r\n                    highlightStartIndex = start;\r\n                    highlightEndIndex = end;\r\n    \r\n                    if (highlightStartIndex &gt;= getLength()) {\r\n                        highlightStartIndex = getLength() - 1;\r\n                    } else if (highlightStartIndex &lt; 0) {\r\n                        highlightStartIndex = 0;\r\n                    }\r\n    \r\n                    if (highlightEndIndex &gt;= getLength()) {\r\n                        highlightEndIndex = getLength() - 1;\r\n                    } else if (highlightEndIndex &lt; 0) {\r\n                        highlightEndIndex = 0;\r\n                    }\r\n    \r\n                    if (getSkin() != null) {\r\n                        doHighlightIndex();\r\n                    } else {\r\n                        highlightRequired = true;\r\n                    }\r\n                }\r\n    \r\n            }\r\n    \r\n            /**\r\n             * Highlights the character at the specified index.\r\n             */\r\n            private void doHighlightIndex() {\r\n                if (highlightStartIndex &gt; -1) {\r\n                    /* Compute the highlight bounds based on the index range. Handles multi line highlighting as well. */\r\n                    List&lt;HighlightBound&gt; highlightBounds = computeHighlightBounds();\r\n    \r\n                    /* Building the selection path based on the character bounds */\r\n                    final List&lt;PathElement&gt; elements = new ArrayList&lt;&gt;();\r\n                    highlightBounds.forEach(bound -&gt; {\r\n                        elements.add(new MoveTo(bound.point1.getX(), bound.point1.getY()));\r\n                        elements.add(new LineTo(bound.point2.getX(), bound.point2.getY()));\r\n                        elements.add(new LineTo(bound.point3.getX(), bound.point3.getY()));\r\n                        elements.add(new LineTo(bound.point4.getX(), bound.point4.getY()));\r\n                        elements.add(new LineTo(bound.point1.getX(), bound.point1.getY()));\r\n                    });\r\n                    highlightPath.getElements().clear();\r\n                    highlightPath.getElements().addAll(elements);\r\n    \r\n                    /* Ensuring to lookup contentPane if it not yet loaded */\r\n                    if (contentPane == null) {\r\n                        lookupContentPane();\r\n                    }\r\n    \r\n                    /* If the highlightPath is not yet added in the pane then adding in the contentPane */\r\n                    if (contentPane != null &amp;&amp; !contentPane.getChildren().contains(highlightPath)) {\r\n                        contentPane.getChildren().add(highlightPath);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            /**\r\n             * Lookup for the content pane in which all nodes are rendered.\r\n             */\r\n            private void lookupContentPane() {\r\n                final Region content = (Region) lookup(&quot;.content&quot;);\r\n                if (content != null) {\r\n                    contentPane = (StackPane) content.getParent();\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            protected final void layoutChildren() {\r\n                super.layoutChildren();\r\n                /*\r\n                 * Looking for appropriate nodes that are required to determine text selection. Using these nodes, we build\r\n                 * an extra node(Path) inside the TextArea to show the custom selection.\r\n                 */\r\n                if (contentPane == null) {\r\n                    lookupContentPane();\r\n                }\r\n            }\r\n    \r\n            public Path getHighlightPath() {\r\n                return highlightPath;\r\n            }\r\n    \r\n            /**\r\n             * Computes the bounds for each highlight line based on the provided highlight indexes.\r\n             *\r\n             * @return List of HighLightBounds for multiple lines\r\n             */\r\n            private List&lt;HighlightBound&gt; computeHighlightBounds() {\r\n                final List&lt;HighlightBound&gt; list = new ArrayList&lt;&gt;();\r\n                /* If it is single character highlighting, including only one character bounds. */\r\n                if (highlightEndIndex &lt;= highlightStartIndex) {\r\n                    /* If it is single character highlighting, including only one character bounds. */\r\n                    final Rectangle2D bounds = ((TextAreaSkin) getSkin()).getCharacterBounds(highlightStartIndex);\r\n                    list.add(new HighlightBound(bounds.getMinX(), bounds.getMinY(), bounds.getMaxX(), bounds.getMaxY()));\r\n                    return list;\r\n                }\r\n    \r\n                /* If it is a range highlighting... */\r\n                double minX = -1;\r\n                double minY = -1;\r\n                double maxX = -1;\r\n                double maxY = -1;\r\n                /*\r\n                 * Looping through each character in the range and taking its bound to compute each line highlight bound\r\n                 */\r\n                for (int index = highlightStartIndex; index &lt;= highlightEndIndex; index++) {\r\n                    final Rectangle2D bounds = ((TextAreaSkin) getSkin()).getCharacterBounds(index);\r\n                    if (index == highlightStartIndex) {\r\n                        minX = bounds.getMinX();\r\n                        minY = bounds.getMinY();\r\n                        maxX = bounds.getMaxX();\r\n                        maxY = bounds.getMaxY();\r\n                    } else {\r\n                        /* If the new character minX is less than previous minX, then it is a new line */\r\n                        if (bounds.getMinX() &lt;= minX) {\r\n                            /* Registering the previous bounds for the line */\r\n                            list.add(new HighlightBound(minX, minY, maxX, maxY));\r\n    \r\n                            /* ... and starting a new line bounds */\r\n                            minX = bounds.getMinX();\r\n                            minY = bounds.getMinY();\r\n                            maxX = bounds.getMaxX();\r\n                            maxY = bounds.getMaxY();\r\n                        } else {\r\n                            /*\r\n                             * If the character falls next to the previous character, then updating the highlight end\r\n                             * bounds\r\n                             */\r\n                            maxX = bounds.getMaxX();\r\n                            maxY = bounds.getMaxY();\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                /* Registering the last highlight bound */\r\n                if (minX &gt; -1) {\r\n                    list.add(new HighlightBound(minX, minY, maxX, maxY));\r\n                }\r\n                return list;\r\n            }\r\n    \r\n            /**\r\n             * Class to hold the bounds of the highlight for each line. This class provided the four corners of the bounds.\r\n             */\r\n            final class HighlightBound {\r\n                /* Top left point of the bound */\r\n                private final Point2D point1;\r\n                /* Top right point of the bound */\r\n                private final Point2D point2;\r\n                /* Bottom right point of the bound */\r\n                private final Point2D point3;\r\n                /* Bottom left point of the bound */\r\n                private final Point2D point4;\r\n    \r\n                /**\r\n                 * Constructor\r\n                 *\r\n                 * @param minX Minimun X value of the bound\r\n                 * @param minY Minimum Y value of the bound\r\n                 * @param maxX Maximum X value of the bound\r\n                 * @param maxY Maximum Y value of the bound\r\n                 */\r\n                public HighlightBound(double minX, double minY, double maxX, double maxY) {\r\n                    point1 = new Point2D(minX, minY);\r\n                    point2 = new Point2D(maxX, minY);\r\n                    point3 = new Point2D(maxX, maxY);\r\n                    point4 = new Point2D(minX, maxY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wr2tL.gif","title":"How to search and format text block in Text Area with javafx","body":"<p>+1 for all the suggestions provided in the comments. I do recommend to use TextFlow for getting a better styled text.</p>\n<p>I also like @jewelsea suggestion of selecting the required text (to keep it simple) . But keep a note that, this approach has few limitations. You can only change the color but not the text style. And the selection/highlighting will be cleared, the moment you try to select the text manually.</p>\n<p>But if you say you need to get this behavior with TextArea and you need to still have the selection behavior (while your text is highlighted), you can check the below solution.</p>\n<p>Firstly, I recommend to work with a Stage rather than using Dialog. This way you have better control over the buttons.</p>\n<p>Secondly, I created a custom TextArea control, that has an extra feature of highlighting the text. This logic is same as how TextArea selection works (like using Path for building selection area). And for this Path, I am using BlendMode.ADD to let the color apply on text instead of background.</p>\n<p>The complete working demo is below. This is just to give you some ideas. If you think this looks like an overkill for your requirement, then ignore this approach and stick to @jewelsea suggestion.</p>\n<p><em>Note: This may not cover all scenarios. Check the logic thoroughly and fix if you are going with this approach</em> ;)</p>\n<p><a href=\"https://i.stack.imgur.com/wr2tL.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wr2tL.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.IntegerProperty;\nimport javafx.beans.property.SimpleIntegerProperty;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Point2D;\nimport javafx.geometry.Pos;\nimport javafx.geometry.Rectangle2D;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.control.skin.TextAreaSkin;\nimport javafx.scene.effect.BlendMode;\nimport javafx.scene.layout.*;\nimport javafx.scene.shape.LineTo;\nimport javafx.scene.shape.MoveTo;\nimport javafx.scene.shape.Path;\nimport javafx.scene.shape.PathElement;\nimport javafx.stage.Stage;\nimport javafx.stage.StageStyle;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class TextAreaSearchDemo extends Application {\n    String text = &quot;One day he was sitting on a rock, watching the goats, and he heard something in the bushes.&quot; +\n            &quot;A lion was moving slowly toward one of the goats. Wilson knew that he had to be brave.&quot; +\n            &quot;He thought about what he had learned from his father. He sat quietly, waiting for the right&quot; +\n            &quot;moment. He knew that if he did the wrong thing, the lion would kill him. Wilson lifted his&quot; +\n            &quot;spear and moved quietly toward the lion. When the lion saw him he looked him in the eye.&quot; +\n            &quot;They both froze. Wilson remembered all that his father had told him about being brave.&quot; +\n            &quot;He knew that he could throw his spear and kill the lion. Suddenly the lion turned away and&quot; +\n            &quot;disappeared over the rocks. Wilson stood strong and watched. After the danger passed he&quot; +\n            &quot;took a deep breath. He felt the sun on his face and put down his spear. Wilson knew that he&quot; +\n            &quot;could take care of the people in his family and his tribe.&quot;;\n\n    @Override\n    public void start(final Stage stage) throws Exception {\n        Button search = new Button(&quot;Search&quot;);\n        CustomTextArea textArea = new CustomTextArea();\n        textArea.setText(text);\n        textArea.setWrapText(true);\n        VBox.setVgrow(textArea, Priority.ALWAYS);\n\n        search.setOnAction(e -&gt; {\n            IntegerProperty index = new SimpleIntegerProperty(-1);\n\n            TextField textField = new TextField();\n            textField.textProperty().addListener(p -&gt; index.set(-1));\n            HBox pane = new HBox(10, new Label(&quot;Enter the search phrase&quot;), textField);\n\n            Button nextBtn = new Button(&quot;Next&quot;);\n            Button prevBtn = new Button(&quot;Previous&quot;);\n            nextBtn.setOnAction(e1 -&gt; handleSearch(textField.getText(), true, textArea, index));\n            prevBtn.setOnAction(e1 -&gt; handleSearch(textField.getText(), false, textArea, index));\n            HBox btnPane = new HBox(10, nextBtn, prevBtn);\n            btnPane.setAlignment(Pos.CENTER);\n\n            VBox root = new VBox(20, pane, btnPane);\n            root.setPadding(new Insets(20));\n\n            Stage dialog = new Stage();\n            dialog.initStyle(StageStyle.UTILITY);\n            dialog.setTitle(&quot;Find&quot;);\n            dialog.setScene(new Scene(root, 350, 150));\n            dialog.show();\n        });\n\n        VBox root = new VBox(15, search, textArea);\n        root.setPadding(new Insets(10));\n        Scene scene = new Scene(root, 300, 400);\n        stage.setScene(scene);\n        stage.setTitle(&quot;TextArea Search&quot;);\n        stage.show();\n    }\n\n    private void handleSearch(final String text, final boolean isNext, CustomTextArea textArea, IntegerProperty index) {\n        if (text == null || text.isEmpty()) {\n            return;\n        }\n\n        int newIndex = isNext ? index.get() + 1 : index.get() - 1;\n        Pattern pattern = Pattern.compile(text);\n        Matcher matcher = pattern.matcher(textArea.getText());\n        int count = 0;\n        while (matcher.find()) {\n            if (count == newIndex) {\n                textArea.highlightRange(matcher.start(), matcher.end() - 1);\n                index.set(newIndex);\n                break;\n            }\n            count++;\n        }\n    }\n\n    class CustomTextArea extends TextArea {\n        /**\n         * Start index of the highlight.\n         */\n        private int highlightStartIndex;\n\n        /**\n         * End index of the highlight.\n         */\n        private int highlightEndIndex;\n\n        /**\n         * Rectangle node to act as highlight.\n         */\n        private final Path highlightPath;\n\n        /**\n         * Node to keep reference of the all contents of the TextArea.\n         */\n        private StackPane contentPane;\n\n        boolean highlightRequired = false;\n\n        public CustomTextArea() {\n            /* Setting default values */\n            highlightStartIndex = -1;\n            highlightEndIndex = -1;\n\n            /* Settings for text highlighting */\n            highlightPath = new Path();\n            highlightPath.getStyleClass().add(&quot;textarea-highlight&quot;);\n            highlightPath.setMouseTransparent(true);\n            highlightPath.setManaged(false);\n            highlightPath.setStroke(null);\n            highlightPath.setStyle(&quot;-fx-fill:red;-fx-stroke-width:0px;&quot;);\n            highlightPath.setBlendMode(BlendMode.ADD);\n\n            textProperty().addListener((obs, oldVal, newVal) -&gt; removeHighlight());\n            /*\n             * When the width of the TextArea changes, we need to update the selection path bounds.\n             */\n            widthProperty().addListener((obs, oldVal, newVal) -&gt; {\n                if (highlightStartIndex &gt; -1) {\n                    doHighlightIndex();\n                }\n            });\n\n            needsLayoutProperty().addListener((obs, oldval, needsLayout) -&gt; {\n                if (!needsLayout &amp;&amp; highlightRequired) {\n                    doHighlightIndex();\n                    highlightRequired = false;\n                }\n            });\n        }\n\n        /**\n         * Removes the highlight in the text area.\n         */\n        public final void removeHighlight() {\n            if (contentPane != null) {\n                contentPane.getChildren().remove(highlightPath);\n            }\n            highlightStartIndex = -1;\n            highlightEndIndex = -1;\n        }\n\n        /**\n         * Highlights the character at the provided index in the text area.\n         *\n         * @param highlightPos Position of the character in the text\n         */\n        public final void highlight(final int highlightPos) {\n            highlightRange(highlightPos, highlightPos);\n        }\n\n        /**\n         * Highlights the characters for the provided index range in the text area.\n         *\n         * @param start Start character index for highlighting\n         * @param end   End character index for highlighting\n         */\n        public final void highlightRange(final int start, final int end) {\n            if (end &lt; start) {\n                throw new IllegalArgumentException(&quot;Caret cannot be less than the anchor index&quot;);\n            }\n            if (getLength() &gt; 0) {\n                highlightStartIndex = start;\n                highlightEndIndex = end;\n\n                if (highlightStartIndex &gt;= getLength()) {\n                    highlightStartIndex = getLength() - 1;\n                } else if (highlightStartIndex &lt; 0) {\n                    highlightStartIndex = 0;\n                }\n\n                if (highlightEndIndex &gt;= getLength()) {\n                    highlightEndIndex = getLength() - 1;\n                } else if (highlightEndIndex &lt; 0) {\n                    highlightEndIndex = 0;\n                }\n\n                if (getSkin() != null) {\n                    doHighlightIndex();\n                } else {\n                    highlightRequired = true;\n                }\n            }\n\n        }\n\n        /**\n         * Highlights the character at the specified index.\n         */\n        private void doHighlightIndex() {\n            if (highlightStartIndex &gt; -1) {\n                /* Compute the highlight bounds based on the index range. Handles multi line highlighting as well. */\n                List&lt;HighlightBound&gt; highlightBounds = computeHighlightBounds();\n\n                /* Building the selection path based on the character bounds */\n                final List&lt;PathElement&gt; elements = new ArrayList&lt;&gt;();\n                highlightBounds.forEach(bound -&gt; {\n                    elements.add(new MoveTo(bound.point1.getX(), bound.point1.getY()));\n                    elements.add(new LineTo(bound.point2.getX(), bound.point2.getY()));\n                    elements.add(new LineTo(bound.point3.getX(), bound.point3.getY()));\n                    elements.add(new LineTo(bound.point4.getX(), bound.point4.getY()));\n                    elements.add(new LineTo(bound.point1.getX(), bound.point1.getY()));\n                });\n                highlightPath.getElements().clear();\n                highlightPath.getElements().addAll(elements);\n\n                /* Ensuring to lookup contentPane if it not yet loaded */\n                if (contentPane == null) {\n                    lookupContentPane();\n                }\n\n                /* If the highlightPath is not yet added in the pane then adding in the contentPane */\n                if (contentPane != null &amp;&amp; !contentPane.getChildren().contains(highlightPath)) {\n                    contentPane.getChildren().add(highlightPath);\n                }\n            }\n        }\n\n        /**\n         * Lookup for the content pane in which all nodes are rendered.\n         */\n        private void lookupContentPane() {\n            final Region content = (Region) lookup(&quot;.content&quot;);\n            if (content != null) {\n                contentPane = (StackPane) content.getParent();\n            }\n        }\n\n        @Override\n        protected final void layoutChildren() {\n            super.layoutChildren();\n            /*\n             * Looking for appropriate nodes that are required to determine text selection. Using these nodes, we build\n             * an extra node(Path) inside the TextArea to show the custom selection.\n             */\n            if (contentPane == null) {\n                lookupContentPane();\n            }\n        }\n\n        public Path getHighlightPath() {\n            return highlightPath;\n        }\n\n        /**\n         * Computes the bounds for each highlight line based on the provided highlight indexes.\n         *\n         * @return List of HighLightBounds for multiple lines\n         */\n        private List&lt;HighlightBound&gt; computeHighlightBounds() {\n            final List&lt;HighlightBound&gt; list = new ArrayList&lt;&gt;();\n            /* If it is single character highlighting, including only one character bounds. */\n            if (highlightEndIndex &lt;= highlightStartIndex) {\n                /* If it is single character highlighting, including only one character bounds. */\n                final Rectangle2D bounds = ((TextAreaSkin) getSkin()).getCharacterBounds(highlightStartIndex);\n                list.add(new HighlightBound(bounds.getMinX(), bounds.getMinY(), bounds.getMaxX(), bounds.getMaxY()));\n                return list;\n            }\n\n            /* If it is a range highlighting... */\n            double minX = -1;\n            double minY = -1;\n            double maxX = -1;\n            double maxY = -1;\n            /*\n             * Looping through each character in the range and taking its bound to compute each line highlight bound\n             */\n            for (int index = highlightStartIndex; index &lt;= highlightEndIndex; index++) {\n                final Rectangle2D bounds = ((TextAreaSkin) getSkin()).getCharacterBounds(index);\n                if (index == highlightStartIndex) {\n                    minX = bounds.getMinX();\n                    minY = bounds.getMinY();\n                    maxX = bounds.getMaxX();\n                    maxY = bounds.getMaxY();\n                } else {\n                    /* If the new character minX is less than previous minX, then it is a new line */\n                    if (bounds.getMinX() &lt;= minX) {\n                        /* Registering the previous bounds for the line */\n                        list.add(new HighlightBound(minX, minY, maxX, maxY));\n\n                        /* ... and starting a new line bounds */\n                        minX = bounds.getMinX();\n                        minY = bounds.getMinY();\n                        maxX = bounds.getMaxX();\n                        maxY = bounds.getMaxY();\n                    } else {\n                        /*\n                         * If the character falls next to the previous character, then updating the highlight end\n                         * bounds\n                         */\n                        maxX = bounds.getMaxX();\n                        maxY = bounds.getMaxY();\n                    }\n                }\n            }\n\n            /* Registering the last highlight bound */\n            if (minX &gt; -1) {\n                list.add(new HighlightBound(minX, minY, maxX, maxY));\n            }\n            return list;\n        }\n\n        /**\n         * Class to hold the bounds of the highlight for each line. This class provided the four corners of the bounds.\n         */\n        final class HighlightBound {\n            /* Top left point of the bound */\n            private final Point2D point1;\n            /* Top right point of the bound */\n            private final Point2D point2;\n            /* Bottom right point of the bound */\n            private final Point2D point3;\n            /* Bottom left point of the bound */\n            private final Point2D point4;\n\n            /**\n             * Constructor\n             *\n             * @param minX Minimun X value of the bound\n             * @param minY Minimum Y value of the bound\n             * @param maxX Maximum X value of the bound\n             * @param maxY Maximum Y value of the bound\n             */\n            public HighlightBound(double minX, double minY, double maxX, double maxY) {\n                point1 = new Point2D(minX, minY);\n                point2 = new Point2D(maxX, minY);\n                point3 = new Point2D(maxX, maxY);\n                point4 = new Point2D(minX, maxY);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695342443,"creation_date":1695342443,"answer_id":77154288,"question_id":77124891,"body_markdown":"A basic search implementation leveraging the text selection capability of TextArea.  \r\n\r\nThis works (somewhat) similarly to the Windows Notepad app and the Mac TextEdit app, but with a bit less bling.\r\n\r\n[![search][1]][1]\r\n\r\nThe example screen shows the output after pressing the next button twice.\r\n\r\nIf a more sophisticated solution is required, look at [Sai&#39;s answer][2].\r\n\r\nThere are a lot of subtle corner cases, like whether to disable or disable next and previous buttons if no next match is available in a given direction and if not, how to handle such a situation (in this solution&#39;s case it just removes the selection).  So the solution may need adjustments and may not be directly applicable to your case.  Also, the solution has been minimally tested, so may have some errors (if using it in your application test it thoroughly first).  \r\n\r\nThe solution is based on a non-editable text area.  It might also work with an editable text area, but I didn&#39;t try it.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.IndexRange;\r\n    import javafx.scene.control.TextArea;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class FindItApp extends Application {\r\n        private final TextField searchBox = new TextField(DEFAULT_SEARCH_TEXT);\r\n        private final Button previous = new Button(&quot;&lt;&quot;);\r\n        private final Button next = new Button(&quot;&gt;&quot;);\r\n    \r\n        private final TextArea textArea = new TextArea(TEXT);\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            previous.setOnAction(e -&gt; findPrevious());\r\n            next.setOnAction(e -&gt; findNext());\r\n    \r\n            searchBox.setOnAction(e -&gt; next.fire());\r\n    \r\n            HBox controls = new HBox(10, searchBox, previous, next);\r\n    \r\n            textArea.setEditable(false);\r\n    \r\n            VBox layout = new VBox(10, controls, textArea);\r\n            layout.setPadding(new Insets(10));\r\n            stage.setScene(new Scene(layout, 250, 200));\r\n            stage.show();\r\n        }\r\n    \r\n        private void findPrevious() {\r\n            String text = textArea.getText();\r\n            String searchText = searchBox.getText();\r\n    \r\n            if (text == null || text.isEmpty() || searchText == null || searchText.isEmpty()) {\r\n                textArea.selectRange(0,0);\r\n                return;\r\n            }\r\n    \r\n            IndexRange selection = textArea.getSelection();\r\n            int endPos = selection == null || selection.getStart() == 0 ? text.length() : selection.getStart();\r\n            int textPos = text.substring(0, endPos).lastIndexOf(searchText);\r\n            if (textPos == -1) {\r\n                textArea.selectRange(0,0);\r\n                return;\r\n            }\r\n    \r\n            textArea.selectRange(textPos, textPos + searchText.length());\r\n        }\r\n    \r\n        private void findNext() {\r\n            String text = textArea.getText();\r\n            String searchText = searchBox.getText();\r\n    \r\n            if (text == null || text.isEmpty() || searchText == null || searchText.isEmpty()) {\r\n                textArea.selectRange(0,0);\r\n                return;\r\n            }\r\n    \r\n            IndexRange selection = textArea.getSelection();\r\n            int startPos = selection != null ? selection.getEnd() : 0;\r\n            int textPos = text.indexOf(searchText, startPos);\r\n            if (textPos == -1) {\r\n                textArea.selectRange(0,0);\r\n                return;\r\n            }\r\n    \r\n            textArea.selectRange(textPos, textPos + searchText.length());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        private static final String TEXT = &quot;&quot;&quot;\r\n                If we shadows have offended,\r\n                Think but this, and all is mended,\r\n                That you have but slumber’d here,\r\n                While these visions did appear,\r\n                And this weak and idle theme,\r\n                No more yielding, but a dream.\r\n                &quot;&quot;&quot;;\r\n        \r\n        private static final String DEFAULT_SEARCH_TEXT = &quot;but&quot;;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RZAQL.png\r\n  [2]: https://stackoverflow.com/a/77138802/1155209","title":"How to search and format text block in Text Area with javafx","body":"<p>A basic search implementation leveraging the text selection capability of TextArea.</p>\n<p>This works (somewhat) similarly to the Windows Notepad app and the Mac TextEdit app, but with a bit less bling.</p>\n<p><a href=\"https://i.stack.imgur.com/RZAQL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RZAQL.png\" alt=\"search\" /></a></p>\n<p>The example screen shows the output after pressing the next button twice.</p>\n<p>If a more sophisticated solution is required, look at <a href=\"https://stackoverflow.com/a/77138802/1155209\">Sai's answer</a>.</p>\n<p>There are a lot of subtle corner cases, like whether to disable or disable next and previous buttons if no next match is available in a given direction and if not, how to handle such a situation (in this solution's case it just removes the selection).  So the solution may need adjustments and may not be directly applicable to your case.  Also, the solution has been minimally tested, so may have some errors (if using it in your application test it thoroughly first).</p>\n<p>The solution is based on a non-editable text area.  It might also work with an editable text area, but I didn't try it.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.IndexRange;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\npublic class FindItApp extends Application {\n    private final TextField searchBox = new TextField(DEFAULT_SEARCH_TEXT);\n    private final Button previous = new Button(&quot;&lt;&quot;);\n    private final Button next = new Button(&quot;&gt;&quot;);\n\n    private final TextArea textArea = new TextArea(TEXT);\n\n    @Override\n    public void start(Stage stage) {\n        previous.setOnAction(e -&gt; findPrevious());\n        next.setOnAction(e -&gt; findNext());\n\n        searchBox.setOnAction(e -&gt; next.fire());\n\n        HBox controls = new HBox(10, searchBox, previous, next);\n\n        textArea.setEditable(false);\n\n        VBox layout = new VBox(10, controls, textArea);\n        layout.setPadding(new Insets(10));\n        stage.setScene(new Scene(layout, 250, 200));\n        stage.show();\n    }\n\n    private void findPrevious() {\n        String text = textArea.getText();\n        String searchText = searchBox.getText();\n\n        if (text == null || text.isEmpty() || searchText == null || searchText.isEmpty()) {\n            textArea.selectRange(0,0);\n            return;\n        }\n\n        IndexRange selection = textArea.getSelection();\n        int endPos = selection == null || selection.getStart() == 0 ? text.length() : selection.getStart();\n        int textPos = text.substring(0, endPos).lastIndexOf(searchText);\n        if (textPos == -1) {\n            textArea.selectRange(0,0);\n            return;\n        }\n\n        textArea.selectRange(textPos, textPos + searchText.length());\n    }\n\n    private void findNext() {\n        String text = textArea.getText();\n        String searchText = searchBox.getText();\n\n        if (text == null || text.isEmpty() || searchText == null || searchText.isEmpty()) {\n            textArea.selectRange(0,0);\n            return;\n        }\n\n        IndexRange selection = textArea.getSelection();\n        int startPos = selection != null ? selection.getEnd() : 0;\n        int textPos = text.indexOf(searchText, startPos);\n        if (textPos == -1) {\n            textArea.selectRange(0,0);\n            return;\n        }\n\n        textArea.selectRange(textPos, textPos + searchText.length());\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    private static final String TEXT = &quot;&quot;&quot;\n            If we shadows have offended,\n            Think but this, and all is mended,\n            That you have but slumber’d here,\n            While these visions did appear,\n            And this weak and idle theme,\n            No more yielding, but a dream.\n            &quot;&quot;&quot;;\n    \n    private static final String DEFAULT_SEARCH_TEXT = &quot;but&quot;;\n}\n</code></pre>\n"}],"owner":{"display_name":"user16612111"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77138802,"answer_count":2,"score":1,"last_activity_date":1695342443,"creation_date":1695017696,"question_id":77124891,"body_markdown":"I have a javafx program and I am trying to locate a certain phrase in a text area. The phrase is entered by the user via a TextInputDialog control. I then handle the Next button inside the dialog that should locate and style the found text in the text area when its clicked. I pass an instance of the return type of the method `TextInputDialog.showAndWait()` to the action methods for the next button. I try to check if the result is present in the type `Optional&lt;String&gt;` and it doesn&#39;t return true or false, also checking if it&#39;s null via the method `result.isEmpty()` does not return true or false. How do I change my code to make it achieve the desired objective \r\n```\r\n//method to locate text inside the text area\r\n@FXML\r\n    protected void onLocateText(){\r\n        //show an alert for the user to enter text\r\n        TextInputDialog dialog = new TextInputDialog();\r\n        dialog.setTitle(&quot;Find&quot;);\r\n        dialog.setHeaderText(&quot;Enter the search phrase&quot;);\r\n        //set buttons for iterating through the next and previous words\r\n        ButtonType next = new ButtonType(&quot;Next&quot;, ButtonBar.ButtonData.OK_DONE);\r\n        ButtonType previous = new ButtonType(&quot;Previous&quot;,ButtonBar.ButtonData.CANCEL_CLOSE);\r\n        //what happens when the next button is clicked;\r\n        //add the buttons to the prompt\r\n        dialog.getDialogPane().getButtonTypes().setAll(next, previous);\r\n        Button nxt = (Button) dialog.getDialogPane().lookupButton(next);\r\n        Button prev = (Button) dialog.getDialogPane().lookupButton(previous);\r\n        Optional&lt;String&gt; result = dialog.showAndWait();\r\n        nxt.setOnAction(e-&gt; handleNextClick(result));\r\n        prev.setOnAction(e-&gt; handlePreviousClick(result));\r\n}\r\n```\r\nThe implementation details of handleNextClick\r\n```\r\nprivate void handleNextClick(Optional&lt;String&gt; result) {\r\n        //show and wait for the user input\r\n        if (result.isPresent()) {\r\n            //get the text entered\r\n            String text = result.get();\r\n            System.out.println(text);\r\n            //loop through the text in the text area and locate\r\n            Pattern pattern = Pattern.compile(text);\r\n            Matcher matcher = pattern.matcher(text);\r\n            while (matcher.find()) {\r\n                Text textNode = new Text(matcher.group());\r\n                textNode.setStyle(&quot;-fx-fill: red; -fx-font-weight: bold;&quot;);\r\n                //replace the matched text with the formatted text\r\n                textArea.replaceText(matcher.start(), matcher.end(), &quot;&quot;);\r\n            }\r\n        }else{\r\n            System.out.println(&quot;block returning false&quot;);\r\n        }\r\n    }\r\n```","title":"How to search and format text block in Text Area with javafx","body":"<p>I have a javafx program and I am trying to locate a certain phrase in a text area. The phrase is entered by the user via a TextInputDialog control. I then handle the Next button inside the dialog that should locate and style the found text in the text area when its clicked. I pass an instance of the return type of the method <code>TextInputDialog.showAndWait()</code> to the action methods for the next button. I try to check if the result is present in the type <code>Optional&lt;String&gt;</code> and it doesn't return true or false, also checking if it's null via the method <code>result.isEmpty()</code> does not return true or false. How do I change my code to make it achieve the desired objective</p>\n<pre><code>//method to locate text inside the text area\n@FXML\n    protected void onLocateText(){\n        //show an alert for the user to enter text\n        TextInputDialog dialog = new TextInputDialog();\n        dialog.setTitle(&quot;Find&quot;);\n        dialog.setHeaderText(&quot;Enter the search phrase&quot;);\n        //set buttons for iterating through the next and previous words\n        ButtonType next = new ButtonType(&quot;Next&quot;, ButtonBar.ButtonData.OK_DONE);\n        ButtonType previous = new ButtonType(&quot;Previous&quot;,ButtonBar.ButtonData.CANCEL_CLOSE);\n        //what happens when the next button is clicked;\n        //add the buttons to the prompt\n        dialog.getDialogPane().getButtonTypes().setAll(next, previous);\n        Button nxt = (Button) dialog.getDialogPane().lookupButton(next);\n        Button prev = (Button) dialog.getDialogPane().lookupButton(previous);\n        Optional&lt;String&gt; result = dialog.showAndWait();\n        nxt.setOnAction(e-&gt; handleNextClick(result));\n        prev.setOnAction(e-&gt; handlePreviousClick(result));\n}\n</code></pre>\n<p>The implementation details of handleNextClick</p>\n<pre><code>private void handleNextClick(Optional&lt;String&gt; result) {\n        //show and wait for the user input\n        if (result.isPresent()) {\n            //get the text entered\n            String text = result.get();\n            System.out.println(text);\n            //loop through the text in the text area and locate\n            Pattern pattern = Pattern.compile(text);\n            Matcher matcher = pattern.matcher(text);\n            while (matcher.find()) {\n                Text textNode = new Text(matcher.group());\n                textNode.setStyle(&quot;-fx-fill: red; -fx-font-weight: bold;&quot;);\n                //replace the matched text with the formatted text\n                textArea.replaceText(matcher.start(), matcher.end(), &quot;&quot;);\n            }\n        }else{\n            System.out.println(&quot;block returning false&quot;);\n        }\n    }\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1695322515,"post_id":77152730,"comment_id":136012645,"body_markdown":"You are basically answering your own question. You need the correct event to broadcast this information from. The events you mentioned (`onStart`, `onResume`, etc.) happen before the view is fully rendered. This is why when you leave and come back, you can get the information you want from the `onViewStateRestored` and/or from `onResume`. You need to find out about all of the UI events in Android and find one that fires when the application is loaded, or a view finish rendering. I am no Android expert, but I assume there is an event for those activities.","body":"You are basically answering your own question. You need the correct event to broadcast this information from. The events you mentioned (<code>onStart</code>, <code>onResume</code>, etc.) happen before the view is fully rendered. This is why when you leave and come back, you can get the information you want from the <code>onViewStateRestored</code> and/or from <code>onResume</code>. You need to find out about all of the UI events in Android and find one that fires when the application is loaded, or a view finish rendering. I am no Android expert, but I assume there is an event for those activities."},{"owner":{"account_id":918720,"reputation":943,"user_id":950907,"accept_rate":71,"display_name":"Radu"},"score":0,"creation_date":1695323076,"post_id":77152730,"comment_id":136012757,"body_markdown":"I am no Android expert either :) I tried all the events I could think of, but couldn&#39;t find one. That doesn&#39;t mean there isn&#39;t one, just that I didn&#39;t find it. Also, I thought there might be some other way, similar to the getMeasuredHeight() (or maybe some way to convert it from what getMeasuredHeight() gives me to actual pixels)?","body":"I am no Android expert either :) I tried all the events I could think of, but couldn&#39;t find one. That doesn&#39;t mean there isn&#39;t one, just that I didn&#39;t find it. Also, I thought there might be some other way, similar to the getMeasuredHeight() (or maybe some way to convert it from what getMeasuredHeight() gives me to actual pixels)?"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":1,"creation_date":1695323529,"post_id":77152730,"comment_id":136012842,"body_markdown":"Maybe you can find information [here](https://developer.android.com/topic/performance/vitals/launch-time)?","body":"Maybe you can find information <a href=\"https://developer.android.com/topic/performance/vitals/launch-time\" rel=\"nofollow noreferrer\">here</a>?"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":1,"creation_date":1695324658,"post_id":77152730,"comment_id":136013003,"body_markdown":"It&#39;s possible to get from a layout after it&#39;s loaded using `ViewTreeObserver`. You can find some code for this here: https://stackoverflow.com/questions/43633485/why-we-use-viewtreeobserveraddongloballayoutlistener.","body":"It&#39;s possible to get from a layout after it&#39;s loaded using <code>ViewTreeObserver</code>. You can find some code for this here: <a href=\"https://stackoverflow.com/questions/43633485/why-we-use-viewtreeobserveraddongloballayoutlistener\" title=\"why we use viewtreeobserveraddongloballayoutlistener\">stackoverflow.com/questions/43633485/&hellip;</a>."},{"owner":{"account_id":918720,"reputation":943,"user_id":950907,"accept_rate":71,"display_name":"Radu"},"score":0,"creation_date":1695326747,"post_id":77152730,"comment_id":136013336,"body_markdown":"Great, the viewitreeobserver really helped me. I put it in onStart() and when it fires it calls my function. The problem is that it fires a lot, I have to now find a way how to remove itself after firing for the first time :) (I am not really a Java guy).","body":"Great, the viewitreeobserver really helped me. I put it in onStart() and when it fires it calls my function. The problem is that it fires a lot, I have to now find a way how to remove itself after firing for the first time :) (I am not really a Java guy)."},{"owner":{"account_id":918720,"reputation":943,"user_id":950907,"accept_rate":71,"display_name":"Radu"},"score":1,"creation_date":1695327124,"post_id":77152730,"comment_id":136013401,"body_markdown":"Ok, just had to add layout.getViewTreeObserver().removeOnGlobalLayoutListener(this); at the end and it worked.  \nAlias Cartellano, post it as an answer so I can accept it.","body":"Ok, just had to add layout.getViewTreeObserver().removeOnGlobalLayoutListener(th&zwnj;&#8203;is); at the end and it worked.   Alias Cartellano, post it as an answer so I can accept it."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":1,"creation_date":1695329120,"post_id":77152730,"comment_id":136013692,"body_markdown":"@Radu you can also post your own answer. Of course, you will need to provide sufficient code to be helpful to others. I also suggest improving your question to show the minimal, reproducible code.","body":"@Radu you can also post your own answer. Of course, you will need to provide sufficient code to be helpful to others. I also suggest improving your question to show the minimal, reproducible code."}],"answers":[{"tags":[],"owner":{"account_id":918720,"reputation":943,"user_id":950907,"accept_rate":71,"display_name":"Radu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695341595,"creation_date":1695341595,"answer_id":77154258,"question_id":77152730,"body_markdown":"Ok, thanks to the help from Alias Cartellano I managed to solve it.\r\nThis is the code, in case anyone else finds it useful:\r\n\r\n```\r\n    @Override\r\n    public void onViewStateRestored(Bundle savedInstanceState) {\r\n        super.onViewStateRestored(savedInstanceState);\r\n        Log.e(TAG, &quot;On view state restored called...&quot;);\r\n\r\n        final RelativeLayout layout = (RelativeLayout) getActivity().findViewById(R.id.myRelativeLayout);\r\n\r\n        layout.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\r\n            @Override\r\n            public void onGlobalLayout() {\r\n                int height = layout.getHeight();\r\n                place_camera_buttons(height);\r\n                layout.getViewTreeObserver().removeOnGlobalLayoutListener(this);\r\n            }\r\n        });\r\n\r\n    }\r\n```","title":"How to get the height of an Android layout in Java?","body":"<p>Ok, thanks to the help from Alias Cartellano I managed to solve it.\nThis is the code, in case anyone else finds it useful:</p>\n<pre><code>    @Override\n    public void onViewStateRestored(Bundle savedInstanceState) {\n        super.onViewStateRestored(savedInstanceState);\n        Log.e(TAG, &quot;On view state restored called...&quot;);\n\n        final RelativeLayout layout = (RelativeLayout) getActivity().findViewById(R.id.myRelativeLayout);\n\n        layout.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\n            @Override\n            public void onGlobalLayout() {\n                int height = layout.getHeight();\n                place_camera_buttons(height);\n                layout.getViewTreeObserver().removeOnGlobalLayoutListener(this);\n            }\n        });\n\n    }\n</code></pre>\n"}],"owner":{"account_id":918720,"reputation":943,"user_id":950907,"accept_rate":71,"display_name":"Radu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695341595,"creation_date":1695320556,"question_id":77152730,"body_markdown":"I have a fragment and I want to know the layout height at runtime, somewhere like onStart() or onResume() or onViewStateRestored()\r\nI am using layout.getHeight() but it returns 0 unless if I leave the app and come back to it again.\r\nI&#39;ve read that this doesn&#39;t work because it must display the layout first, and that another method is to use layout.measure() and then layout.getMeasuredHeight()\r\nThis works better, in the sense that it returns a value, but the value is a &#39;bit&#39; off. For example I get 625 instead of ~2200\r\n\r\nI guess I could cheat a bit and get the screen height and then substract the action bar and nav bar, but this might not work well if the window is not full screen.\r\n\r\nSo any idea on how I can get the proper layout height?","title":"How to get the height of an Android layout in Java?","body":"<p>I have a fragment and I want to know the layout height at runtime, somewhere like onStart() or onResume() or onViewStateRestored()\nI am using layout.getHeight() but it returns 0 unless if I leave the app and come back to it again.\nI've read that this doesn't work because it must display the layout first, and that another method is to use layout.measure() and then layout.getMeasuredHeight()\nThis works better, in the sense that it returns a value, but the value is a 'bit' off. For example I get 625 instead of ~2200</p>\n<p>I guess I could cheat a bit and get the screen height and then substract the action bar and nav bar, but this might not work well if the window is not full screen.</p>\n<p>So any idea on how I can get the proper layout height?</p>\n"},{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":21534,"reputation":59456,"user_id":52443,"display_name":"Welbog"},"score":1,"creation_date":1695306391,"post_id":77150984,"comment_id":136009307,"body_markdown":"Welcome to Stack Overflow. Instead of linking to a picture of a problem, or a picture of output, paste the problem and the output. Text is always better in text format, rather than in image format.","body":"Welcome to Stack Overflow. Instead of linking to a picture of a problem, or a picture of output, paste the problem and the output. Text is always better in text format, rather than in image format."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1695318514,"post_id":77150984,"comment_id":136011913,"body_markdown":"Off-topic: Someone who knows more about Java generics than I do should take a look at this, and possibly talk to your professor, or set me straight. The issue is here: *&quot;You can use an array of queues to simulate checkout lines.&quot;*  Java generics and arrays don&#39;t mix well. I would expect an array of queues to generate a `generic array creation` error. Instead, try `List &lt;Queue&lt;Integer&gt;&gt; checkoutLines = new ArrayList&lt;&gt; (5);`.","body":"Off-topic: Someone who knows more about Java generics than I do should take a look at this, and possibly talk to your professor, or set me straight. The issue is here: <i>&quot;You can use an array of queues to simulate checkout lines.&quot;</i>  Java generics and arrays don&#39;t mix well. I would expect an array of queues to generate a <code>generic array creation</code> error. Instead, try <code>List &lt;Queue&lt;Integer&gt;&gt; checkoutLines = new ArrayList&lt;&gt; (5);</code>."}],"answers":[{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695341116,"creation_date":1695340067,"answer_id":77154194,"question_id":77150984,"body_markdown":"There is some lack of clarity in the instructions your professor gave. The instructions are open to interpretation. It may be the professor relied on students&#39; understanding of material presented in the lecture or previous assignments. However, we on Stack Overflow don&#39;t have access to that unless you update the question. It may be the students need to discuss this with the professor and request explanations. Presenting examples would be a good idea.\r\n\r\nNonetheless, I have some suggestions:\r\n\r\n**First** *&quot;Each transaction takes a random amount of time to complete.&quot;*\r\n\r\nI assume a transaction is a customer checking out. One way to handle this is to &quot;glue&quot; transaction time to a customer. Fields can be &quot;glued&quot; together through instances of a `class`. So, a `Customer` class may be appropriate:\r\n\r\n     public class Customer {\r\n       public static int nextID = 0;\r\n       private final int customerID;\r\n       private int transactionTime;  // remaining, countdown \r\n    \r\n       public Customer () { \r\n           customerID = ++nextID;\r\n           transactionTime = 10;\r\n       }\r\n    \r\n       public Customer (int time) { \r\n          customerID = ++nextID;\r\n          transactionTime = time;\r\n       }\r\n    \r\n       public int getID () { return customerID; }\r\n       public int tick () { return --transactionTime; }  \r\n       @Override\r\n       public String toString () { return &quot;Customer &quot; + customerID + &quot; &quot;; }\r\n    }\r\n\r\nThe constructor assigns customer numbers in order. I do not believe having the customer numbers in random order is a requirement. \r\n\r\nThe transaction time is number of clock ticks to complete a transaction.  \r\n\r\n**Next**, I would like to mention an issue with arrays and generics. Because of the way generics were implemented in Java, arrays and generics do not work well together. You should not create an array of a generic `Collection`. A line such as the following will generate an &quot;generic array creation&quot; compiler error: \r\n\r\n    Queue&lt;Integer&gt;[] checkoutLines = new Queue&lt;Integer&gt;[numCheckoutLines];\r\n\r\nTo get around that, you can nest generics. In the suggested code in this answer, I used this line:\r\n          \r\n    List&lt;Queue&lt;Customer&gt;&gt; checkoutLines = new ArrayList&lt;&gt;(NUM_CHECKOUT_LINES);\r\n\r\nIf you want to access a specific checkout queue, use code like the following:\r\n\r\n     Queue&lt;Customer&gt; lane = checkoutLines.get(3);\r\n\r\nThis accesses lane 3. Of course, you would replace `3` with a variable or expression that resolves to an integer.\r\n\r\nThe code for `findShortestLine` and `allQueuesEmpty` looks like this:\r\n\r\n    // Find the shortest checkout lane\r\n    private static int findShortestLine(List&lt;Queue&lt;Customer&gt;&gt; checkoutLines) {\r\n        int shortestLineIndex = 0;\r\n        int minLength = checkoutLines.size();\r\n\r\n        for (int i = 1; i &lt; checkoutLines.size(); i++) {\r\n            int length = checkoutLines.get(i).size();\r\n            if (length &lt; minLength) {\r\n                minLength = length;\r\n                shortestLineIndex = i;\r\n            }\r\n        }\r\n        return shortestLineIndex;\r\n    }\r\n\r\n    // Check if all checkout lines are empty\r\n    private static boolean allQueuesEmpty(List&lt;Queue&lt;Customer&gt;&gt; checkoutLines) {\r\n        for (Queue&lt;Customer&gt; line : checkoutLines) {\r\n            if (!line.isEmpty()) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n**By the way**, Named constants are usually declared with `final`, and with names written in all uppercase.  The beginning of the program looks like this:\r\n\r\n        public class GroceryStore {\r\n\r\n           public static void main(String[] args) {\r\n\r\n              final int    NUM_CHECKOUT_LINES = 5;\r\n              final double PROBABILITY_CUSTOMER_JOINS = 0.35;\r\n              final int    MAX_TRANSACTION_TIME = 25;\r\n              final int    MAX_CUSTOMERS = 40;    \r\n\r\n              List&lt;Queue&lt;Customer&gt;&gt; checkoutLines\r\n                   = new ArrayList&lt;&gt;(NUM_CHECKOUT_LINES);\r\n              Random random = new Random(); \r\n\r\n - `NUM_CHECKOUT_LINES` is your `numCheckoutLines`\r\n - `MAX_CUSTOMERS` is the maximum number of customers that will be processed in one run of the simulation. It corresponds to your \r\n - `numCustomers`, but is not quite the same. \r\n - `MAX_TRANSACTION_TIME` is the maximum amount of time (ticks) a customer will take to check out.\r\n - `PROBABILITY_CUSTOMER_JOINS` is the probability that one customer will begin waiting in line in one tick. \r\n\r\n**Trivial** Since you are to &quot;Open&quot; the store with one customer in each lane, you can create the lanes and first customers at the same time. \r\n\r\n        // Initialize checkout lines\r\n        for (int i = 0; i &lt; NUM_CHECKOUT_LINES; i++) {\r\n            checkoutLines.add(new LinkedList&lt;Customer&gt;());\r\n            checkoutLines.get(i).add\r\n                (new Customer(random.nextInt(MAX_TRANSACTION_TIME)));\r\n            System.out.println (checkoutLines.get(i).peek() \r\n                    + &quot;joined queue &quot; +  i);\r\n        }\r\n\r\n**And now, the main idea:**\r\n\r\nThe main idea is to run the simulation one-clock-tick-at-a-time until all queues are empty, just as you coded in the main loop. With each tick we want to do two things:\r\n\r\n - Add a customer or not, at random. This code generates a random `double` in the range [0.0, 1.0). If the generated number exceeds `PROBABILITY_CUSTOMER_JOINS`, the customer is not added. \r\n - Decrease the remaining transaction time for the first customer in each lane by one tick. If a remaining time reaches zero, the transaction is complete, and the customer leaves the queue. \r\n\r\n             for (int time = 1; !allQueuesEmpty(checkoutLines);  time++) {\r\n                if (     Customer.nextID &lt; MAX_CUSTOMERS \r\n                      &amp;&amp; random.nextDouble() &lt; PROBABILITY_CUSTOMER_JOINS) {\r\n                int shortestLineIndex = findShortestLine(checkoutLines);\r\n                Customer customer = \r\n                   new Customer(random.nextInt(MAX_TRANSACTION_TIME));\r\n                if (checkoutLines.get(shortestLineIndex).offer(customer)) {\r\n                    System.out.println(&quot;Customer &quot; + customer.getID()\r\n                            + &quot; joined queue &quot; + (shortestLineIndex));\r\n                } else {\r\n                    System.out.println (customer \r\n                         + &quot; got frustrated and left the store &quot; \r\n                         + &quot;without checking out!&quot;);\r\n                }\r\n            }\r\n\r\n            for (int lane = 0; lane &lt; checkoutLines.size (); lane++) {\r\n                Customer customer = checkoutLines.get(lane).peek();\r\n                   if (customer == null) { continue; } // lane empty\r\n                   if (customer.tick() &lt;= 0) { \r\n                      System.out.println (customer + &quot;is checking out from queue &quot;\r\n                            + lane);\r\n                      checkoutLines.get(lane).remove();\r\n                }\r\n            }                     \r\n        }\r\n     }\r\n\r\n**Other thoughts**\r\n\r\n - It is possible the program will terminate before the number of customers generated reaches MAX_CUSTOMERS. If MAX_CUSTOMERS is reached, the program should continue to run until all customers have checked out.\r\n\r\n - You might consider having the possibility that more than one customer could get in line during one tick. \r\n\r\n - I like that you coded methods to find the shortest line, and tested for all queues empty. You might consider coding a method to add a customer. \r\n\r\n - You might want to code a consistent way of accessing a customer. I wanted to show that a customer can be accessed within a Collection by using a (temporary) `Customer` reference, and doing that without. \r\n\r\n - Do not assume this code is bug free! \r\n\r\n - Demo run:\r\n\r\n````\r\nCustomer 1 joined queue 0\r\nCustomer 2 joined queue 1\r\nCustomer 3 joined queue 2\r\nCustomer 4 joined queue 3\r\nCustomer 5 joined queue 4\r\nCustomer 6 joined queue 1\r\nCustomer 7 joined queue 2\r\nCustomer 8 joined queue 3\r\nCustomer 9 joined queue 4\r\nCustomer 10 joined queue 1\r\nCustomer 11 joined queue 2\r\nCustomer 12 joined queue 3\r\nCustomer 3 is checking out from queue 2\r\nCustomer 13 joined queue 2\r\nCustomer 14 joined queue 4\r\nCustomer 1 is checking out from queue 0\r\nCustomer 4 is checking out from queue 3\r\nCustomer 5 is checking out from queue 4\r\nCustomer 15 joined queue 3\r\nCustomer 2 is checking out from queue 1\r\nCustomer 16 joined queue 1\r\nCustomer 7 is checking out from queue 2\r\nCustomer 17 joined queue 2\r\nCustomer 6 is checking out from queue 1\r\nCustomer 18 joined queue 1\r\nCustomer 8 is checking out from queue 3\r\nCustomer 19 joined queue 3\r\nCustomer 9 is checking out from queue 4\r\nCustomer 20 joined queue 4\r\nCustomer 10 is checking out from queue 1\r\nCustomer 14 is checking out from queue 4\r\nCustomer 16 is checking out from queue 1\r\nCustomer 11 is checking out from queue 2\r\nCustomer 18 is checking out from queue 1\r\nCustomer 20 is checking out from queue 4\r\nCustomer 12 is checking out from queue 3\r\nCustomer 15 is checking out from queue 3\r\nCustomer 19 is checking out from queue 3\r\nCustomer 13 is checking out from queue 2\r\nCustomer 17 is checking out from queue 2\r\n````\r\n \r\n","title":"Grocery Checkout Lines using Queues in Java","body":"<p>There is some lack of clarity in the instructions your professor gave. The instructions are open to interpretation. It may be the professor relied on students' understanding of material presented in the lecture or previous assignments. However, we on Stack Overflow don't have access to that unless you update the question. It may be the students need to discuss this with the professor and request explanations. Presenting examples would be a good idea.</p>\n<p>Nonetheless, I have some suggestions:</p>\n<p><strong>First</strong> <em>&quot;Each transaction takes a random amount of time to complete.&quot;</em></p>\n<p>I assume a transaction is a customer checking out. One way to handle this is to &quot;glue&quot; transaction time to a customer. Fields can be &quot;glued&quot; together through instances of a <code>class</code>. So, a <code>Customer</code> class may be appropriate:</p>\n<pre><code> public class Customer {\n   public static int nextID = 0;\n   private final int customerID;\n   private int transactionTime;  // remaining, countdown \n\n   public Customer () { \n       customerID = ++nextID;\n       transactionTime = 10;\n   }\n\n   public Customer (int time) { \n      customerID = ++nextID;\n      transactionTime = time;\n   }\n\n   public int getID () { return customerID; }\n   public int tick () { return --transactionTime; }  \n   @Override\n   public String toString () { return &quot;Customer &quot; + customerID + &quot; &quot;; }\n}\n</code></pre>\n<p>The constructor assigns customer numbers in order. I do not believe having the customer numbers in random order is a requirement.</p>\n<p>The transaction time is number of clock ticks to complete a transaction.</p>\n<p><strong>Next</strong>, I would like to mention an issue with arrays and generics. Because of the way generics were implemented in Java, arrays and generics do not work well together. You should not create an array of a generic <code>Collection</code>. A line such as the following will generate an &quot;generic array creation&quot; compiler error:</p>\n<pre><code>Queue&lt;Integer&gt;[] checkoutLines = new Queue&lt;Integer&gt;[numCheckoutLines];\n</code></pre>\n<p>To get around that, you can nest generics. In the suggested code in this answer, I used this line:</p>\n<pre><code>List&lt;Queue&lt;Customer&gt;&gt; checkoutLines = new ArrayList&lt;&gt;(NUM_CHECKOUT_LINES);\n</code></pre>\n<p>If you want to access a specific checkout queue, use code like the following:</p>\n<pre><code> Queue&lt;Customer&gt; lane = checkoutLines.get(3);\n</code></pre>\n<p>This accesses lane 3. Of course, you would replace <code>3</code> with a variable or expression that resolves to an integer.</p>\n<p>The code for <code>findShortestLine</code> and <code>allQueuesEmpty</code> looks like this:</p>\n<pre><code>// Find the shortest checkout lane\nprivate static int findShortestLine(List&lt;Queue&lt;Customer&gt;&gt; checkoutLines) {\n    int shortestLineIndex = 0;\n    int minLength = checkoutLines.size();\n\n    for (int i = 1; i &lt; checkoutLines.size(); i++) {\n        int length = checkoutLines.get(i).size();\n        if (length &lt; minLength) {\n            minLength = length;\n            shortestLineIndex = i;\n        }\n    }\n    return shortestLineIndex;\n}\n\n// Check if all checkout lines are empty\nprivate static boolean allQueuesEmpty(List&lt;Queue&lt;Customer&gt;&gt; checkoutLines) {\n    for (Queue&lt;Customer&gt; line : checkoutLines) {\n        if (!line.isEmpty()) {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n<p><strong>By the way</strong>, Named constants are usually declared with <code>final</code>, and with names written in all uppercase.  The beginning of the program looks like this:</p>\n<pre><code>    public class GroceryStore {\n\n       public static void main(String[] args) {\n\n          final int    NUM_CHECKOUT_LINES = 5;\n          final double PROBABILITY_CUSTOMER_JOINS = 0.35;\n          final int    MAX_TRANSACTION_TIME = 25;\n          final int    MAX_CUSTOMERS = 40;    \n\n          List&lt;Queue&lt;Customer&gt;&gt; checkoutLines\n               = new ArrayList&lt;&gt;(NUM_CHECKOUT_LINES);\n          Random random = new Random(); \n</code></pre>\n<ul>\n<li><code>NUM_CHECKOUT_LINES</code> is your <code>numCheckoutLines</code></li>\n<li><code>MAX_CUSTOMERS</code> is the maximum number of customers that will be processed in one run of the simulation. It corresponds to your</li>\n<li><code>numCustomers</code>, but is not quite the same.</li>\n<li><code>MAX_TRANSACTION_TIME</code> is the maximum amount of time (ticks) a customer will take to check out.</li>\n<li><code>PROBABILITY_CUSTOMER_JOINS</code> is the probability that one customer will begin waiting in line in one tick.</li>\n</ul>\n<p><strong>Trivial</strong> Since you are to &quot;Open&quot; the store with one customer in each lane, you can create the lanes and first customers at the same time.</p>\n<pre><code>    // Initialize checkout lines\n    for (int i = 0; i &lt; NUM_CHECKOUT_LINES; i++) {\n        checkoutLines.add(new LinkedList&lt;Customer&gt;());\n        checkoutLines.get(i).add\n            (new Customer(random.nextInt(MAX_TRANSACTION_TIME)));\n        System.out.println (checkoutLines.get(i).peek() \n                + &quot;joined queue &quot; +  i);\n    }\n</code></pre>\n<p><strong>And now, the main idea:</strong></p>\n<p>The main idea is to run the simulation one-clock-tick-at-a-time until all queues are empty, just as you coded in the main loop. With each tick we want to do two things:</p>\n<ul>\n<li><p>Add a customer or not, at random. This code generates a random <code>double</code> in the range [0.0, 1.0). If the generated number exceeds <code>PROBABILITY_CUSTOMER_JOINS</code>, the customer is not added.</p>\n</li>\n<li><p>Decrease the remaining transaction time for the first customer in each lane by one tick. If a remaining time reaches zero, the transaction is complete, and the customer leaves the queue.</p>\n<pre><code>      for (int time = 1; !allQueuesEmpty(checkoutLines);  time++) {\n         if (     Customer.nextID &lt; MAX_CUSTOMERS \n               &amp;&amp; random.nextDouble() &lt; PROBABILITY_CUSTOMER_JOINS) {\n         int shortestLineIndex = findShortestLine(checkoutLines);\n         Customer customer = \n            new Customer(random.nextInt(MAX_TRANSACTION_TIME));\n         if (checkoutLines.get(shortestLineIndex).offer(customer)) {\n             System.out.println(&quot;Customer &quot; + customer.getID()\n                     + &quot; joined queue &quot; + (shortestLineIndex));\n         } else {\n             System.out.println (customer \n                  + &quot; got frustrated and left the store &quot; \n                  + &quot;without checking out!&quot;);\n         }\n     }\n\n     for (int lane = 0; lane &lt; checkoutLines.size (); lane++) {\n         Customer customer = checkoutLines.get(lane).peek();\n            if (customer == null) { continue; } // lane empty\n            if (customer.tick() &lt;= 0) { \n               System.out.println (customer + &quot;is checking out from queue &quot;\n                     + lane);\n               checkoutLines.get(lane).remove();\n         }\n     }                     \n }\n</code></pre>\n<p>}</p>\n</li>\n</ul>\n<p><strong>Other thoughts</strong></p>\n<ul>\n<li><p>It is possible the program will terminate before the number of customers generated reaches MAX_CUSTOMERS. If MAX_CUSTOMERS is reached, the program should continue to run until all customers have checked out.</p>\n</li>\n<li><p>You might consider having the possibility that more than one customer could get in line during one tick.</p>\n</li>\n<li><p>I like that you coded methods to find the shortest line, and tested for all queues empty. You might consider coding a method to add a customer.</p>\n</li>\n<li><p>You might want to code a consistent way of accessing a customer. I wanted to show that a customer can be accessed within a Collection by using a (temporary) <code>Customer</code> reference, and doing that without.</p>\n</li>\n<li><p>Do not assume this code is bug free!</p>\n</li>\n<li><p>Demo run:</p>\n</li>\n</ul>\n<pre><code>Customer 1 joined queue 0\nCustomer 2 joined queue 1\nCustomer 3 joined queue 2\nCustomer 4 joined queue 3\nCustomer 5 joined queue 4\nCustomer 6 joined queue 1\nCustomer 7 joined queue 2\nCustomer 8 joined queue 3\nCustomer 9 joined queue 4\nCustomer 10 joined queue 1\nCustomer 11 joined queue 2\nCustomer 12 joined queue 3\nCustomer 3 is checking out from queue 2\nCustomer 13 joined queue 2\nCustomer 14 joined queue 4\nCustomer 1 is checking out from queue 0\nCustomer 4 is checking out from queue 3\nCustomer 5 is checking out from queue 4\nCustomer 15 joined queue 3\nCustomer 2 is checking out from queue 1\nCustomer 16 joined queue 1\nCustomer 7 is checking out from queue 2\nCustomer 17 joined queue 2\nCustomer 6 is checking out from queue 1\nCustomer 18 joined queue 1\nCustomer 8 is checking out from queue 3\nCustomer 19 joined queue 3\nCustomer 9 is checking out from queue 4\nCustomer 20 joined queue 4\nCustomer 10 is checking out from queue 1\nCustomer 14 is checking out from queue 4\nCustomer 16 is checking out from queue 1\nCustomer 11 is checking out from queue 2\nCustomer 18 is checking out from queue 1\nCustomer 20 is checking out from queue 4\nCustomer 12 is checking out from queue 3\nCustomer 15 is checking out from queue 3\nCustomer 19 is checking out from queue 3\nCustomer 13 is checking out from queue 2\nCustomer 17 is checking out from queue 2\n</code></pre>\n"}],"owner":{"account_id":29501186,"reputation":1,"user_id":22608171,"display_name":"Emily Zhu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695341116,"creation_date":1695304839,"question_id":77150984,"body_markdown":"This is my assignment over queues. (https://i.stack.imgur.com/XSXLS.png)\r\nI have a rubric of everything I need to make sure I have in order to make a perfect score. I ran into two problems. First problem I ran into was: I&#39;m not too sure how to make customers enter/exit the lines. I know there&#39;s some lines of code I need to write but my brain at this point cannot wrap around it. Second problem I ran into was: When I run my program, it shows which customers is joining what queues. However, it&#39;s not randomized. They come in a order and I need to make it to where it comes at random time with a random order. I probably can&#39;t explain this well so hopefully the assignment description helps and also my output screenshot! here is my output: (https://i.stack.imgur.com/SfYDS.png). and here is my code so far. What can I do to fix my issue?\r\n\r\n    import java.util.LinkedList;\r\n    import java.util.Queue;\r\n    import java.util.Random;\r\n\r\n    public class Main {\r\n    public static void main(String[] args) {\r\n        int numCheckoutLines = 5;\r\n        Queue&lt;Integer&gt;[] checkoutLines = new Queue[numCheckoutLines];\r\n        Random random = new Random();\r\n\r\n        // Initialize checkout lines\r\n        for (int i = 0; i &lt; numCheckoutLines; i++) {\r\n            checkoutLines[i] = new LinkedList&lt;&gt;();\r\n        }\r\n\r\n        int numCustomers = 10; // Change this value as needed\r\n\r\n        // Generate and enqueue customers\r\n        for (int i = 1; i &lt;= numCustomers; i++) {\r\n            int shortestLineIndex = findShortestLine(checkoutLines);\r\n            checkoutLines[shortestLineIndex].offer(i);\r\n            System.out.println(&quot;Customer &quot; + i + &quot; joined Queue &quot; + (shortestLineIndex + 1));\r\n        }\r\n\r\n        // Simulate checkout process\r\n        for (int time = 1; !allQueuesEmpty(checkoutLines); time++) {\r\n            for (int i = 0; i &lt; numCheckoutLines; i++) {\r\n                if (!checkoutLines[i].isEmpty()) {\r\n                    int customer = checkoutLines[i].poll();\r\n                    System.out.println(&quot;Queue &quot; + (i + 1) + &quot;: Customer &quot; + customer + &quot; is checking out.&quot;);\r\n                    // Simulate checkout time (random time between 1 and 5 seconds)\r\n                    int checkoutTime = random.nextInt(5) + 1;\r\n                    if (checkoutTime == 5) {\r\n                        System.out.println(&quot;Queue &quot; + (i + 1) + &quot;: Customer &quot; + customer + &quot; has an issue and needs assistance.&quot;);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Find the shortest checkout line\r\n    private static int findShortestLine(Queue&lt;Integer&gt;[] checkoutLines) {\r\n        int shortestLineIndex = 0;\r\n        int minLength = checkoutLines[0].size();\r\n\r\n        for (int i = 1; i &lt; checkoutLines.length; i++) {\r\n            int length = checkoutLines[i].size();\r\n            if (length &lt; minLength) {\r\n                minLength = length;\r\n                shortestLineIndex = i;\r\n            }\r\n        }\r\n\r\n        return shortestLineIndex;\r\n    }\r\n\r\n    // Check if all checkout lines are empty\r\n    private static boolean allQueuesEmpty(Queue&lt;Integer&gt;[] checkoutLines) {\r\n        for (Queue&lt;Integer&gt; line : checkoutLines) {\r\n            if (!line.isEmpty()) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}","title":"Grocery Checkout Lines using Queues in Java","body":"<p>This is my assignment over queues. (<a href=\"https://i.stack.imgur.com/XSXLS.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/XSXLS.png</a>)\nI have a rubric of everything I need to make sure I have in order to make a perfect score. I ran into two problems. First problem I ran into was: I'm not too sure how to make customers enter/exit the lines. I know there's some lines of code I need to write but my brain at this point cannot wrap around it. Second problem I ran into was: When I run my program, it shows which customers is joining what queues. However, it's not randomized. They come in a order and I need to make it to where it comes at random time with a random order. I probably can't explain this well so hopefully the assignment description helps and also my output screenshot! here is my output: (<a href=\"https://i.stack.imgur.com/SfYDS.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/SfYDS.png</a>). and here is my code so far. What can I do to fix my issue?</p>\n<pre><code>import java.util.LinkedList;\nimport java.util.Queue;\nimport java.util.Random;\n\npublic class Main {\npublic static void main(String[] args) {\n    int numCheckoutLines = 5;\n    Queue&lt;Integer&gt;[] checkoutLines = new Queue[numCheckoutLines];\n    Random random = new Random();\n\n    // Initialize checkout lines\n    for (int i = 0; i &lt; numCheckoutLines; i++) {\n        checkoutLines[i] = new LinkedList&lt;&gt;();\n    }\n\n    int numCustomers = 10; // Change this value as needed\n\n    // Generate and enqueue customers\n    for (int i = 1; i &lt;= numCustomers; i++) {\n        int shortestLineIndex = findShortestLine(checkoutLines);\n        checkoutLines[shortestLineIndex].offer(i);\n        System.out.println(&quot;Customer &quot; + i + &quot; joined Queue &quot; + (shortestLineIndex + 1));\n    }\n\n    // Simulate checkout process\n    for (int time = 1; !allQueuesEmpty(checkoutLines); time++) {\n        for (int i = 0; i &lt; numCheckoutLines; i++) {\n            if (!checkoutLines[i].isEmpty()) {\n                int customer = checkoutLines[i].poll();\n                System.out.println(&quot;Queue &quot; + (i + 1) + &quot;: Customer &quot; + customer + &quot; is checking out.&quot;);\n                // Simulate checkout time (random time between 1 and 5 seconds)\n                int checkoutTime = random.nextInt(5) + 1;\n                if (checkoutTime == 5) {\n                    System.out.println(&quot;Queue &quot; + (i + 1) + &quot;: Customer &quot; + customer + &quot; has an issue and needs assistance.&quot;);\n                }\n            }\n        }\n    }\n}\n\n// Find the shortest checkout line\nprivate static int findShortestLine(Queue&lt;Integer&gt;[] checkoutLines) {\n    int shortestLineIndex = 0;\n    int minLength = checkoutLines[0].size();\n\n    for (int i = 1; i &lt; checkoutLines.length; i++) {\n        int length = checkoutLines[i].size();\n        if (length &lt; minLength) {\n            minLength = length;\n            shortestLineIndex = i;\n        }\n    }\n\n    return shortestLineIndex;\n}\n\n// Check if all checkout lines are empty\nprivate static boolean allQueuesEmpty(Queue&lt;Integer&gt;[] checkoutLines) {\n    for (Queue&lt;Integer&gt; line : checkoutLines) {\n        if (!line.isEmpty()) {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","android","xml","android-layout","android-view"],"answers":[{"comments":[{"owner":{"account_id":1228162,"reputation":17908,"user_id":1193321,"accept_rate":65,"display_name":"EGHDK"},"score":0,"creation_date":1331366098,"post_id":9632101,"comment_id":12245227,"body_markdown":"Will try this within 24 hours and I&#39;ll let you know. Thanks","body":"Will try this within 24 hours and I&#39;ll let you know. Thanks"},{"owner":{"account_id":1228162,"reputation":17908,"user_id":1193321,"accept_rate":65,"display_name":"EGHDK"},"score":0,"creation_date":1331586709,"post_id":9632101,"comment_id":12290328,"body_markdown":"I couldn&#39;t get a video to play in a video view. I tried following some tutorials. No luck so far.","body":"I couldn&#39;t get a video to play in a video view. I tried following some tutorials. No luck so far."},{"owner":{"account_id":1228162,"reputation":17908,"user_id":1193321,"accept_rate":65,"display_name":"EGHDK"},"score":0,"creation_date":1331729400,"post_id":9632101,"comment_id":12330658,"body_markdown":"I believe I found my problem. I was trying to set a path for the video in my actual res/raw folder. I need to first save it to SD card it seems, but I was having a problem because my Galaxy Nexus does not have an SD card and the only file system paths I&#39;ve seen on android started with SDCARD/Something/Folder/File.extension.\n\nThanks","body":"I believe I found my problem. I was trying to set a path for the video in my actual res/raw folder. I need to first save it to SD card it seems, but I was having a problem because my Galaxy Nexus does not have an SD card and the only file system paths I&#39;ve seen on android started with SDCARD/Something/Folder/File.extension.  Thanks"}],"tags":[],"owner":{"account_id":1236882,"reputation":609,"user_id":1200303,"accept_rate":80,"display_name":"curiousguy"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1331287174,"creation_date":1331287174,"answer_id":9632101,"question_id":9611791,"body_markdown":"I am not sure whether you can put a video as a background view. But you can try to use a video view and put it inside Frame layout.\r\n\r\nYou can use this link for further reference:\r\n[https://stackoverflow.com/questions/7074600/android-video-as-background-view][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7074600/android-video-as-background-view","title":"Setting a video to play as the background in Android","body":"<p>I am not sure whether you can put a video as a background view. But you can try to use a video view and put it inside Frame layout.</p>\n\n<p>You can use this link for further reference:\n<a href=\"https://stackoverflow.com/questions/7074600/android-video-as-background-view\">android: video as background view</a></p>\n"},{"tags":[],"owner":{"account_id":19338624,"reputation":359,"user_id":14138691,"display_name":"Antony Nicolas Huaman Alikhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695340659,"creation_date":1695340659,"answer_id":77154219,"question_id":9611791,"body_markdown":"Im using exoplayer to put a video from local: \r\n\r\nin xml:\r\n\r\n    &lt;com.google.android.exoplayer2.ui.PlayerView\r\n        android:id=&quot;@+id/compensation_video_view&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        app:resize_mode=&quot;fill&quot;\r\n        android:layout_height=&quot;match_parent&quot;/&gt;\r\n\r\nin activity or fragment:\r\n\r\n    private val exoPlayerTwo by lazy(LazyThreadSafetyMode.NONE) {\r\n        SimpleExoPlayer.Builder(requireContext()).build()\r\n    }\r\n\r\n    private fun showBackgroundVideo() {\r\n        //also set to the player view\r\n        binding.compensationVideoView.player = exoPlayerTwo\r\n        exoPlayerTwo.playWhenReady = true\r\n        exoPlayerTwo.volume = 0f\r\n        exoPlayerTwo.repeatMode = SimpleExoPlayer.REPEAT_MODE_ALL // With thi loop the video\r\n        val uri = RawResourceDataSource.buildRawResourceUri(R.raw.compensalia_background_video)\r\n        val mediaItem = MediaItem.fromUri(uri)\r\n        exoPlayerTwo.setMediaItem(mediaItem)\r\n        exoPlayerTwo.prepare()\r\n    }\r\n\r\n\r\nalso realease the component:\r\n\r\n    override fun onDestroy() {\r\n        super.onDestroy()\r\n        exoPlayerTwo.release()\r\n    }\r\n\r\n","title":"Setting a video to play as the background in Android","body":"<p>Im using exoplayer to put a video from local:</p>\n<p>in xml:</p>\n<pre><code>&lt;com.google.android.exoplayer2.ui.PlayerView\n    android:id=&quot;@+id/compensation_video_view&quot;\n    android:layout_width=&quot;match_parent&quot;\n    app:resize_mode=&quot;fill&quot;\n    android:layout_height=&quot;match_parent&quot;/&gt;\n</code></pre>\n<p>in activity or fragment:</p>\n<pre><code>private val exoPlayerTwo by lazy(LazyThreadSafetyMode.NONE) {\n    SimpleExoPlayer.Builder(requireContext()).build()\n}\n\nprivate fun showBackgroundVideo() {\n    //also set to the player view\n    binding.compensationVideoView.player = exoPlayerTwo\n    exoPlayerTwo.playWhenReady = true\n    exoPlayerTwo.volume = 0f\n    exoPlayerTwo.repeatMode = SimpleExoPlayer.REPEAT_MODE_ALL // With thi loop the video\n    val uri = RawResourceDataSource.buildRawResourceUri(R.raw.compensalia_background_video)\n    val mediaItem = MediaItem.fromUri(uri)\n    exoPlayerTwo.setMediaItem(mediaItem)\n    exoPlayerTwo.prepare()\n}\n</code></pre>\n<p>also realease the component:</p>\n<pre><code>override fun onDestroy() {\n    super.onDestroy()\n    exoPlayerTwo.release()\n}\n</code></pre>\n"}],"owner":{"account_id":1228162,"reputation":17908,"user_id":1193321,"accept_rate":65,"display_name":"EGHDK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11214,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":9632101,"answer_count":2,"score":2,"last_activity_date":1695340659,"creation_date":1331170703,"question_id":9611791,"body_markdown":"I&#39;m trying to make a video run in the background of my application.\r\n\r\nI&#39;ve searched high and low and the closest thing I could find was this other post:\r\nhttps://stackoverflow.com/questions/8830111/integrating-video-file-in-android-app-as-app-background\r\n\r\nThe code provided does not work (I get 3 errors in java).\r\n\r\nDoes anyone know how I would go about doing this? I want it to play in the background as I would later like to set a zoom in and out buttons that will allow you to magnify the video playing in the background. Thanks in advance.","title":"Setting a video to play as the background in Android","body":"<p>I'm trying to make a video run in the background of my application.</p>\n\n<p>I've searched high and low and the closest thing I could find was this other post:\n<a href=\"https://stackoverflow.com/questions/8830111/integrating-video-file-in-android-app-as-app-background\">Integrating video file in android app as app background</a></p>\n\n<p>The code provided does not work (I get 3 errors in java).</p>\n\n<p>Does anyone know how I would go about doing this? I want it to play in the background as I would later like to set a zoom in and out buttons that will allow you to magnify the video playing in the background. Thanks in advance.</p>\n"},{"tags":["java","spring","lazy-initialization"],"comments":[{"owner":{"account_id":181397,"reputation":2579,"user_id":2283319,"accept_rate":100,"display_name":"Chris Kitching"},"score":0,"creation_date":1458745153,"post_id":36181611,"comment_id":59998454,"body_markdown":"There&#39;s the general problem of lazy initialisation: if the wrong thing happens you might be triggered to initialise a lot of stuff all at once, creating a huge load spike that might not otherwise have existed. It depends on how your program works.","body":"There&#39;s the general problem of lazy initialisation: if the wrong thing happens you might be triggered to initialise a lot of stuff all at once, creating a huge load spike that might not otherwise have existed. It depends on how your program works."}],"answers":[{"tags":[],"owner":{"account_id":1424961,"reputation":30720,"user_id":1348743,"display_name":"Javaru"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1458746351,"creation_date":1458745406,"answer_id":36181718,"question_id":36181611,"body_markdown":"The primary &quot;downside&quot; is not catching configuration issues immediately. If you have a bean that is only used &quot;occasionally&quot;, and that bean is misconfigured, your application could be out in production for several days before it goes to use that bean and throws the error. It&#39;s much better to know about that issue at startup. \r\n\r\nAdditionally, it is generally more desirable to pay initialization costs (i.e. performance, time delays, etc.) at startup rather than during use. In a Web Application for example, you want the cost of initializing the bean at startup, not the first time a customer uses your shopping cart (waiting for the shopping cart bean to do its first initialization), and then again when she goes to checkout, and then again when payment is processed, etc.\r\n\r\nThose are some of the reasons.\r\n\r\n[EDIT]\r\n\r\np.s. from the Spring reference guide section [6.4.4 Lazy-initialized beans][1]\r\n\r\n&gt; By default, ApplicationContext implementations eagerly create and configure all singleton beans as part of the initialization process. Generally, this pre-instantiation is desirable, because errors in the configuration or surrounding environment are discovered immediately, as opposed to hours or even days later. When this behavior is not desirable, you can prevent pre-instantiation of a singleton bean by marking the bean definition as lazy-initialized. A lazy-initialized bean tells the IoC container to create a bean instance when it is first requested, rather than at startup.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-lazy-init","title":"Are there any real downsides to lazy bean initialization?","body":"<p>The primary \"downside\" is not catching configuration issues immediately. If you have a bean that is only used \"occasionally\", and that bean is misconfigured, your application could be out in production for several days before it goes to use that bean and throws the error. It's much better to know about that issue at startup. </p>\n\n<p>Additionally, it is generally more desirable to pay initialization costs (i.e. performance, time delays, etc.) at startup rather than during use. In a Web Application for example, you want the cost of initializing the bean at startup, not the first time a customer uses your shopping cart (waiting for the shopping cart bean to do its first initialization), and then again when she goes to checkout, and then again when payment is processed, etc.</p>\n\n<p>Those are some of the reasons.</p>\n\n<p>[EDIT]</p>\n\n<p>p.s. from the Spring reference guide section <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-lazy-init\" rel=\"noreferrer\">6.4.4 Lazy-initialized beans</a></p>\n\n<blockquote>\n  <p>By default, ApplicationContext implementations eagerly create and configure all singleton beans as part of the initialization process. Generally, this pre-instantiation is desirable, because errors in the configuration or surrounding environment are discovered immediately, as opposed to hours or even days later. When this behavior is not desirable, you can prevent pre-instantiation of a singleton bean by marking the bean definition as lazy-initialized. A lazy-initialized bean tells the IoC container to create a bean instance when it is first requested, rather than at startup.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695338988,"creation_date":1695338988,"answer_id":77154141,"question_id":36181611,"body_markdown":"Something we only discovered today, if one of your bean methods has the @KafkaListener annotation (there are probably variants of this problem in other frameworks), and you make the bean @Lazy to avoid circular references with another bean associated with this bean, and there are otherwise no other references to those beans, then the bean will never be instantiated, and the Kafka listener method will never activate, and not fire on available messages.","title":"Are there any real downsides to lazy bean initialization?","body":"<p>Something we only discovered today, if one of your bean methods has the @KafkaListener annotation (there are probably variants of this problem in other frameworks), and you make the bean @Lazy to avoid circular references with another bean associated with this bean, and there are otherwise no other references to those beans, then the bean will never be instantiated, and the Kafka listener method will never activate, and not fire on available messages.</p>\n"}],"owner":{"account_id":1523507,"reputation":966,"user_id":1430008,"accept_rate":75,"display_name":"ingenious"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2991,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":36181718,"answer_count":2,"score":5,"last_activity_date":1695338988,"creation_date":1458745100,"question_id":36181611,"body_markdown":"Recently I&#39;ve started using the lazy initialization feature in spring *a lot*. And so I&#39;ve been wandering - are there any actual downsides to initializing your beans lazily? If not - why is not lazy the default behaviour?","title":"Are there any real downsides to lazy bean initialization?","body":"<p>Recently I've started using the lazy initialization feature in spring <em>a lot</em>. And so I've been wandering - are there any actual downsides to initializing your beans lazily? If not - why is not lazy the default behaviour?</p>\n"},{"tags":["java","osgi","osgi-bundle","declarative-services"],"answers":[{"tags":[],"owner":{"account_id":88135,"reputation":15266,"user_id":243991,"accept_rate":22,"display_name":"Peter Kriens"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629470757,"creation_date":1629470757,"answer_id":68864076,"question_id":68861860,"body_markdown":"Well, why the AtomicReference? You also don&#39;t need bind and unbind services. You seem confused :-) You might want to take a look at the [videos][1] or the [OSGi starter][2]\r\n\r\nFor the dynamic case, this is what would work:\r\n\r\n    @Component(immediate = true)\r\n    public class ServiceImpl implements Service {\r\n\r\n        @Reference    \r\n        volatile CounterService myCounterService;\r\n        \r\n        @Activate\r\n       void activate() {\r\n        ...\r\n        }\r\n        \r\n    }\r\n\r\nIf the `CounterService` is not dynamic, this is a very nice pattern:\r\n\r\n    @Component(immediate = true)\r\n    public class ServiceImpl implements Service {\r\n    \r\n        final CounterService myCounterService;\r\n        \r\n        @Activate\r\n        public ServiceImpl( @Reference  CounterService  c ) {\r\n            this.myCounterService = c;\r\n        }\r\n        \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n[1]: https://www.youtube.com/channel/UCooLOwpb_wqvHIVyccnFacw\r\n[2]: https://bndtools.org/workspace/osgi-starter.html\r\n\r\n\r\n","title":"unsupported type java.util.concurrent.atomic.AtomicReference","body":"<p>Well, why the AtomicReference? You also don't need bind and unbind services. You seem confused :-) You might want to take a look at the <a href=\"https://www.youtube.com/channel/UCooLOwpb_wqvHIVyccnFacw\" rel=\"nofollow noreferrer\">videos</a> or the <a href=\"https://bndtools.org/workspace/osgi-starter.html\" rel=\"nofollow noreferrer\">OSGi starter</a></p>\n<p>For the dynamic case, this is what would work:</p>\n<pre><code>@Component(immediate = true)\npublic class ServiceImpl implements Service {\n\n    @Reference    \n    volatile CounterService myCounterService;\n    \n    @Activate\n   void activate() {\n    ...\n    }\n    \n}\n</code></pre>\n<p>If the <code>CounterService</code> is not dynamic, this is a very nice pattern:</p>\n<pre><code>@Component(immediate = true)\npublic class ServiceImpl implements Service {\n\n    final CounterService myCounterService;\n    \n    @Activate\n    public ServiceImpl( @Reference  CounterService  c ) {\n        this.myCounterService = c;\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29504659,"reputation":1,"user_id":22610902,"display_name":"Saurav Suman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695337648,"creation_date":1695337324,"answer_id":77154069,"question_id":68861860,"body_markdown":"Another way to fix this is to remove the **@Reference** annotation from the field and add it to your bind method. Something like this:\r\n    \r\n    @Component (service = Service.class, immediate = true)\r\n    public class ServiceImpl implements Service{\r\n    \r\n        public static final AtomicReference&lt;CounterService&gt; myCounterService = new AtomicReference&lt;&gt;();\r\n    \r\n    @Reference (name = &quot;CounterService&quot;, policy = ReferencePolicy.DYNAMIC, cardinality = ReferenceCardinality.MANDATORY,\r\n                bind = &quot;bindCounterService&quot;, unbind = &quot;unbindCounterService&quot;, service = CounterService.class)\r\n    public void bindCounterService(CounterService counterService)\r\n    {     \r\n         myCounterService = counterService;\r\n    }\r\n    \r\n    public void unbindCounterService(CounterService counterService)\r\n    {     \r\n        myCounterService = null;\r\n    }\r\n    \r\n    }","title":"unsupported type java.util.concurrent.atomic.AtomicReference","body":"<p>Another way to fix this is to remove the <strong>@Reference</strong> annotation from the field and add it to your bind method. Something like this:</p>\n<pre><code>@Component (service = Service.class, immediate = true)\npublic class ServiceImpl implements Service{\n\n    public static final AtomicReference&lt;CounterService&gt; myCounterService = new AtomicReference&lt;&gt;();\n\n@Reference (name = &quot;CounterService&quot;, policy = ReferencePolicy.DYNAMIC, cardinality = ReferenceCardinality.MANDATORY,\n            bind = &quot;bindCounterService&quot;, unbind = &quot;unbindCounterService&quot;, service = CounterService.class)\npublic void bindCounterService(CounterService counterService)\n{     \n     myCounterService = counterService;\n}\n\npublic void unbindCounterService(CounterService counterService)\n{     \n    myCounterService = null;\n}\n\n}\n</code></pre>\n"}],"owner":{"account_id":8865517,"reputation":17,"user_id":6620817,"display_name":"Kamalraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695337648,"creation_date":1629460606,"question_id":68861860,"body_markdown":"I am writing OSGI services .After Starting the service,I got Below Message.Kindly suggest to overcome this Issue.\r\n\r\n    @Component (service = Service.class, immediate = true)\r\n    public class ServiceImpl implements Service{\r\n    \r\n    @Reference (name = &quot;CounterService&quot;, policy = ReferencePolicy.DYNAMIC, cardinality = ReferenceCardinality.MANDATORY,\r\n                bind = &quot;bindCounter&quot;, unbind = &quot;unbindCounter&quot;, service = CounterService.class)\r\n        public static final AtomicReference&lt;CounterService&gt; myCounterService = new AtomicReference&lt;&gt;();\r\n    \r\n    public void bindCService(CounterService counterService)\r\n    {     \r\n        this.cacheService= cacheService;\r\n    }\r\n    \r\n    public void unbindService(CounterService cacheService)\r\n    {     \r\n        this.cacheService= null;\r\n    }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\nAnd i got this Message after Starting Service\r\n\r\n    \r\n\r\n&gt; -!MESSAGE [com.xxx.xxx.xxx.CounterImpl(29)] Field counterService in component class com.xxx.xxx.xxx.CounterImpl has unsupported type\r\n&gt; java.util.concurrent.atomic.AtomicReference","title":"unsupported type java.util.concurrent.atomic.AtomicReference","body":"<p>I am writing OSGI services .After Starting the service,I got Below Message.Kindly suggest to overcome this Issue.</p>\n<pre><code>@Component (service = Service.class, immediate = true)\npublic class ServiceImpl implements Service{\n\n@Reference (name = &quot;CounterService&quot;, policy = ReferencePolicy.DYNAMIC, cardinality = ReferenceCardinality.MANDATORY,\n            bind = &quot;bindCounter&quot;, unbind = &quot;unbindCounter&quot;, service = CounterService.class)\n    public static final AtomicReference&lt;CounterService&gt; myCounterService = new AtomicReference&lt;&gt;();\n\npublic void bindCService(CounterService counterService)\n{     \n    this.cacheService= cacheService;\n}\n\npublic void unbindService(CounterService cacheService)\n{     \n    this.cacheService= null;\n}\n\n}\n</code></pre>\n<p>And i got this Message after Starting Service</p>\n<blockquote>\n<p>-!MESSAGE [com.xxx.xxx.xxx.CounterImpl(29)] Field counterService in component class com.xxx.xxx.xxx.CounterImpl has unsupported type\njava.util.concurrent.atomic.AtomicReference</p>\n</blockquote>\n"},{"tags":["java","types","casting","superclass"],"comments":[{"owner":{"account_id":431527,"reputation":9888,"user_id":815653,"accept_rate":81,"display_name":"zell"},"score":0,"creation_date":1325677079,"post_id":8726096,"comment_id":10864621,"body_markdown":"Plz tell the reason of the -1","body":"Plz tell the reason of the -1"},{"owner":{"account_id":431527,"reputation":9888,"user_id":815653,"accept_rate":81,"display_name":"zell"},"score":0,"creation_date":1325677742,"post_id":8726096,"comment_id":10864856,"body_markdown":"honestly, no. Maybe it&#39;s my way to formulate the problem like this if you like.","body":"honestly, no. Maybe it&#39;s my way to formulate the problem like this if you like."}],"answers":[{"comments":[{"owner":{"account_id":431527,"reputation":9888,"user_id":815653,"accept_rate":81,"display_name":"zell"},"score":1,"creation_date":1325677881,"post_id":8726167,"comment_id":10864906,"body_markdown":"Sorry, supertype includes &quot;the same type&quot; by convention.","body":"Sorry, supertype includes &quot;the same type&quot; by convention."},{"owner":{"account_id":1106606,"reputation":3836,"user_id":1097883,"display_name":"afrischke"},"score":0,"creation_date":1325679256,"post_id":8726167,"comment_id":10865354,"body_markdown":"Sorry, you didn&#39;t mention in your question whether you were referring to proper supertypes or not.","body":"Sorry, you didn&#39;t mention in your question whether you were referring to proper supertypes or not."}],"tags":[],"owner":{"account_id":1106606,"reputation":3836,"user_id":1097883,"display_name":"afrischke"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1325679376,"creation_date":1325676869,"answer_id":8726167,"question_id":8726096,"body_markdown":"Certainly:\r\n\r\n    Object o = new Object();\r\n    Object o2 = o;\r\n\r\nIn this example, the type of o2 is not a proper supertype of the type of o. However as far as the intention of the question (probably) goes, see the accepted answer.  ","title":"For Java assignment &quot;x=y&quot;, does a Java compiler requires that x&#39;s declared type is the supertype of y&#39;s (including the same type)?","body":"<p>Certainly:</p>\n\n<pre><code>Object o = new Object();\nObject o2 = o;\n</code></pre>\n\n<p>In this example, the type of o2 is not a proper supertype of the type of o. However as far as the intention of the question (probably) goes, see the accepted answer.  </p>\n"},{"tags":[],"owner":{"account_id":41449,"reputation":9952,"user_id":120471,"accept_rate":83,"display_name":"hrnt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1325677263,"creation_date":1325677263,"answer_id":8726263,"question_id":8726096,"body_markdown":"Well, depends on what you mean by &quot;supertype&quot;. However, if used as a general OOP term:\r\n`Object[] arr = new Integer[5];`\r\n\r\nFor discussion on why this is a flaw of the type system, please see for example http://c2.com/cgi/wiki?JavaArraysBreakTypeSafety","title":"For Java assignment &quot;x=y&quot;, does a Java compiler requires that x&#39;s declared type is the supertype of y&#39;s (including the same type)?","body":"<p>Well, depends on what you mean by \"supertype\". However, if used as a general OOP term:\n<code>Object[] arr = new Integer[5];</code></p>\n\n<p>For discussion on why this is a flaw of the type system, please see for example <a href=\"http://c2.com/cgi/wiki?JavaArraysBreakTypeSafety\" rel=\"nofollow\">http://c2.com/cgi/wiki?JavaArraysBreakTypeSafety</a></p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1325677370,"creation_date":1325677370,"answer_id":8726291,"question_id":8726096,"body_markdown":"In assignment the LHS must be the type or the RHS or a **super** type.\r\nWith supertype also covariant array types are meant: String[] to Object[] (never use that!).\r\nOr **widening** (primitive types) may take place: assigning an `int` to a `float`.\r\nOr **boxing** may happen: Integer to int, int to Integer.","title":"For Java assignment &quot;x=y&quot;, does a Java compiler requires that x&#39;s declared type is the supertype of y&#39;s (including the same type)?","body":"<p>In assignment the LHS must be the type or the RHS or a <strong>super</strong> type.\nWith supertype also covariant array types are meant: String[] to Object[] (never use that!).\nOr <strong>widening</strong> (primitive types) may take place: assigning an <code>int</code> to a <code>float</code>.\nOr <strong>boxing</strong> may happen: Integer to int, int to Integer.</p>\n"},{"comments":[{"owner":{"account_id":431527,"reputation":9888,"user_id":815653,"accept_rate":81,"display_name":"zell"},"score":0,"creation_date":1325678770,"post_id":8726526,"comment_id":10865181,"body_markdown":"I may misunderstand something. The bold part gives a positive answer to the question I think?","body":"I may misunderstand something. The bold part gives a positive answer to the question I think?"},{"owner":{"account_id":9187,"reputation":9248,"user_id":16873,"accept_rate":100,"display_name":"Thiago Chaves"},"score":0,"creation_date":1325679206,"post_id":8726526,"comment_id":10865332,"body_markdown":"It means: for **T x = S y** to work, the type of y must be the type of x or a subtype. Or, in another words, the type of x must be a supertype of the type of y.","body":"It means: for <b>T x = S y</b> to work, the type of y must be the type of x or a subtype. Or, in another words, the type of x must be a supertype of the type of y."}],"tags":[],"owner":{"account_id":9187,"reputation":9248,"user_id":16873,"accept_rate":100,"display_name":"Thiago Chaves"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1325678392,"creation_date":1325678392,"answer_id":8726526,"question_id":8726096,"body_markdown":"The answer is no, according to the Java language specification, below. See the **bold** text.\r\n\r\n&gt; Assignment of a value of compile-time reference type S (source) to a\r\n&gt; variable of compile-time reference type T (target) is checked as\r\n&gt; follows: \r\n\r\n&gt; If S is a class type:\r\n\r\n&gt; * **If T is a class type, then S must either be the same class as T, or S must be a subclass of T, or a compile-time error occurs.**\r\n&gt; * If T is an interface type, then S must implement interface T, or a compile-time error occurs.\r\n&gt; * If T is an array type, then a compile-time error occurs. \r\n\r\n&gt; If S is an interface type: \r\n\r\n&gt; * If T is a class type, then T must be Object, or a\r\n&gt; compile-time error occurs. \r\n&gt; * If T is an interface type, then T must be\r\n&gt; either the same interface as S or a superinterface of S, or a\r\n&gt; compile-time error occurs. \r\n&gt; * If T is an array type, then a compile-time\r\n&gt; error occurs. \r\n\r\n&gt; If S is an array type SC[], that is, an array of\r\n&gt; components of type SC: \r\n\r\n&gt; * If T is a class type, then T must be Object, or\r\n&gt; a compile-time error occurs. \r\n&gt; * If T is an interface type, then a\r\n&gt; compile-time error occurs unless T is the type java.io.Serializable or\r\n&gt; the type Cloneable, the only interfaces implemented by arrays. \r\n&gt; * If T is\r\n&gt; an array type TC[], that is, an array of components of type TC, then a\r\n&gt; compile-time error occurs unless one of the following is true: \r\n\r\n&gt;  * TC and\r\n&gt; SC are the same primitive type. \r\n&gt;  * TC and SC are both reference types and\r\n&gt; type SC is assignable to TC, as determined by a recursive application\r\n&gt; of these compile-time rules for assignability.","title":"For Java assignment &quot;x=y&quot;, does a Java compiler requires that x&#39;s declared type is the supertype of y&#39;s (including the same type)?","body":"<p>The answer is no, according to the Java language specification, below. See the <strong>bold</strong> text.</p>\n\n<blockquote>\n  <p>Assignment of a value of compile-time reference type S (source) to a\n  variable of compile-time reference type T (target) is checked as\n  follows: </p>\n  \n  <p>If S is a class type:</p>\n  \n  <ul>\n  <li><strong>If T is a class type, then S must either be the same class as T, or S must be a subclass of T, or a compile-time error occurs.</strong></li>\n  <li>If T is an interface type, then S must implement interface T, or a compile-time error occurs.</li>\n  <li>If T is an array type, then a compile-time error occurs. </li>\n  </ul>\n  \n  <p>If S is an interface type: </p>\n  \n  <ul>\n  <li>If T is a class type, then T must be Object, or a\n  compile-time error occurs. </li>\n  <li>If T is an interface type, then T must be\n  either the same interface as S or a superinterface of S, or a\n  compile-time error occurs. </li>\n  <li>If T is an array type, then a compile-time\n  error occurs. </li>\n  </ul>\n  \n  <p>If S is an array type SC[], that is, an array of\n  components of type SC: </p>\n  \n  <ul>\n  <li>If T is a class type, then T must be Object, or\n  a compile-time error occurs. </li>\n  <li>If T is an interface type, then a\n  compile-time error occurs unless T is the type java.io.Serializable or\n  the type Cloneable, the only interfaces implemented by arrays. </li>\n  <li><p>If T is\n  an array type TC[], that is, an array of components of type TC, then a\n  compile-time error occurs unless one of the following is true: </p>\n  \n  <ul>\n  <li>TC and\n  SC are the same primitive type. </li>\n  <li>TC and SC are both reference types and\n  type SC is assignable to TC, as determined by a recursive application\n  of these compile-time rules for assignability.</li>\n  </ul></li>\n  </ul>\n</blockquote>\n"}],"owner":{"account_id":431527,"reputation":9888,"user_id":815653,"accept_rate":81,"display_name":"zell"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":8726291,"answer_count":4,"score":0,"last_activity_date":1695337095,"creation_date":1325676564,"question_id":8726096,"body_markdown":"Formulated in another way: \r\n\r\ncould you give an example assignment of JAVA, x=y, such that the declared type of &quot;x&quot; is not a supertype of that of &quot;y&quot;? \r\n\r\nRecall that the declared type is &quot;T&quot; if x is declared as &quot;T x&quot;. (supertype includes &quot;the same type&quot; by convention.) ","title":"For Java assignment &quot;x=y&quot;, does a Java compiler requires that x&#39;s declared type is the supertype of y&#39;s (including the same type)?","body":"<p>Formulated in another way:</p>\n<p>could you give an example assignment of JAVA, x=y, such that the declared type of &quot;x&quot; is not a supertype of that of &quot;y&quot;?</p>\n<p>Recall that the declared type is &quot;T&quot; if x is declared as &quot;T x&quot;. (supertype includes &quot;the same type&quot; by convention.)</p>\n"},{"tags":["java","jackson","jackson-databind"],"owner":{"account_id":16901977,"reputation":1,"user_id":12223093,"display_name":"unfuse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695334839,"creation_date":1695334839,"question_id":77153947,"body_markdown":"I am trying to write custom deserialization handling using Jackson (2.14.0) to address common boilerplate repeated in our DTO/POJO classes used in our integrations. \r\n\r\nWe currently use DTOs to handle all integration schema complexity (field name differences, type differences, wrapping/unwrapping fields) - and I specifically want to remove some of these DTOs with replacement annotations / custom deserializers where common patterns are repeated but also formulaic. \r\n\r\nMy current problem is one use case where there are multiple schema complications existing simultaneously:\r\n* The serialized format is UNWRAPPED relative to the POJO\r\n* The serialized format&#39;s unwrapped fields are named differently (it&#39;s a deterministic name change, but not a simple prefix/suffix, despite my examples)\r\n* The serializes format&#39;s unwrapped fields are TYPED differently\r\n\r\n\r\n```java\r\n/* \r\n  POJOs\r\n*/\r\nclass Foo {\r\n    TimeRange timeRange;\r\n}\r\n\r\nclass TimeRange {\r\n    long start;\r\n    long end;\r\n}\r\n\r\n/*\r\n  DTOs - an exact mirror of what JSON is transmitted\r\n*/\r\nclass FooDTO {\r\n    String startDateTime;\r\n    String endDateTime;\r\n}\r\n```\r\n\r\nMy tentative solution for this is to register custom deserialization `SimpleModule`s - by using a new annotation on the POJO fields - that registers and changes fields using `BeanDeserializerModifier`s. Fields can then opt into the special logic by using a custom annotation. Like: \r\n\r\n```java\r\nclass Foo {\r\n    @JsonTimeRange(format = &quot;ISO_DATE_TIME&quot;)\r\n    TimeRange timeRange;\r\n}\r\n\r\nclass TimeRange {\r\n    long start;\r\n    long end;\r\n\r\n    @JsonCreator TimeRange(final long start, final long end) { ... }\r\n}\r\n```\r\n\r\nThe one I have working so far for this `TimeRange` use case attempts to use existing Jackson `@JsonUnwrapped` logic present in `BeanDeserializer/Base` and I feel is SO CLOSE to working perfectly.\r\n\r\nMy problem as I can see it is I do not know how to effectively propagate state down in the deserialization hierarchy.\r\n\r\nJackson handles `@JsonUnwrapped` by taking the original `BeanDeserializer` associated with the class and building virtual bean properties matching the transformed names. When deserializing it scans a copied token buffer looking for those values and injects those properties into the base deserializer as if they had always been there. The base deserializer then operates normally, barely cognizant of the difference. \r\n\r\nIn my case, I&#39;m hoping to leverage the existing `@JsonCreator` for `TimeRange`. The trouble is that it&#39;s _`creatorProperties` is built with a `LongDeserializer` for it&#39;s own fields when built by Jackson (which is technically correct) - and I cannot find how how in the world to intercept these and replace them. I can build the exact &quot;String To Long Deserializer&quot; required when processing `@JsonTimeRange` but that state is nowhere to be found when processing the `BeanDeserializer` for `TimeRange`.\r\n\r\nI also can&#39;t seem to find a place to re-intercept `Foo.timeRange` - neither the property NOR the deserializer - in a way that matters. \r\n* I can retrieve the canonical deserializer for `TimeRange` from `DeserializationContext` when building my custom property - but I can&#39;t reach down into `deserializer -&gt; bean properties -&gt; creator -&gt; creator properties -&gt; deserializer` and swap anything out. it&#39;s all hidden and immutable by this point\r\n* `ContextualDeserializer#createContextual` as executed by `BeanDeserializer` is the most often cited place in other posts I have read, but it&#39;s insufficient for my intention here for what seems to be the same reason - cannot access and change the fields I need to.\r\n\r\nI accept that my desire to use as much vanilla Jackson as possible - including relying on the standard `JsonCreator` for `TimeRange`, and how it processes &quot;Unwrapped&quot; fields (`NameTransformer`, `UnwrappedPropertyHandler`, and their retrievals within `BeanDeserializer#resolve`) - may be too much to expect.\r\n\r\nBut on the other hand it SEEMS to fit so well and I&#39;m hoping there&#39;s a connection between these deserialization levels I can utilize to dynamically tweak the CreatorProperties for TimeRange just enough to let it go. The error I get right now is just type type difference. \r\n\r\n```\r\nCannot deserialize value of type `long` from String &quot;2019-01-01T08:00:00.000Z&quot;: not a valid `long` value\r\n at [Source: (String)&quot;{&quot;startDateTime&quot;:&quot;2019-01-01T08:00:00.000Z&quot;,&quot;endDateTime&quot;:&quot;2019-01-01T18:00:00.000Z&quot;}&quot;; line: 1, column: 141] (through reference chain: com.my.project.TimeRange[&quot;startDateTime&quot;])\r\ncom.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `long` from String &quot;2019-01-01T08:00:00.000Z&quot;: not a valid `long` value\r\n at [Source: (String)&quot;{&quot;startDateTime&quot;:&quot;2019-01-01T08:00:00.000Z&quot;,&quot;endDateTime&quot;:&quot;2019-01-01T18:00:00.000Z&quot;}&quot;; line: 1, column: 141] (through reference chain: com.my.project.TimeRange[&quot;startDateTime&quot;])\r\n\tat app//com.fasterxml.jackson.databind.exc.InvalidFormatException.from(InvalidFormatException.java:67)\r\n\tat app//com.fasterxml.jackson.databind.DeserializationContext.weirdStringException(DeserializationContext.java:1996)\r\n\tat app//com.fasterxml.jackson.databind.DeserializationContext.handleWeirdStringValue(DeserializationContext.java:1224)\r\n\tat app//com.fasterxml.jackson.databind.deser.std.StdDeserializer._parseLongPrimitive(StdDeserializer.java:916)\r\n\tat app//com.fasterxml.jackson.databind.deser.std.StdDeserializer._parseLongPrimitive(StdDeserializer.java:904)\r\n\tat app//com.fasterxml.jackson.databind.deser.std.NumberDeserializers$LongDeserializer.deserialize(NumberDeserializers.java:573)\r\n\tat app//com.fasterxml.jackson.databind.deser.std.NumberDeserializers$LongDeserializer.deserialize(NumberDeserializers.java:550)\r\n\tat app//com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:542)\r\n```\r\n\r\nAlso open to alternatives, but this seems the most Jackson-like solution to me for this problem since they already have some support for Unwrapped fields! \r\n","title":"Modify Deserializer for a Creator Property to handle unwrapped field of a different type","body":"<p>I am trying to write custom deserialization handling using Jackson (2.14.0) to address common boilerplate repeated in our DTO/POJO classes used in our integrations.</p>\n<p>We currently use DTOs to handle all integration schema complexity (field name differences, type differences, wrapping/unwrapping fields) - and I specifically want to remove some of these DTOs with replacement annotations / custom deserializers where common patterns are repeated but also formulaic.</p>\n<p>My current problem is one use case where there are multiple schema complications existing simultaneously:</p>\n<ul>\n<li>The serialized format is UNWRAPPED relative to the POJO</li>\n<li>The serialized format's unwrapped fields are named differently (it's a deterministic name change, but not a simple prefix/suffix, despite my examples)</li>\n<li>The serializes format's unwrapped fields are TYPED differently</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>/* \n  POJOs\n*/\nclass Foo {\n    TimeRange timeRange;\n}\n\nclass TimeRange {\n    long start;\n    long end;\n}\n\n/*\n  DTOs - an exact mirror of what JSON is transmitted\n*/\nclass FooDTO {\n    String startDateTime;\n    String endDateTime;\n}\n</code></pre>\n<p>My tentative solution for this is to register custom deserialization <code>SimpleModule</code>s - by using a new annotation on the POJO fields - that registers and changes fields using <code>BeanDeserializerModifier</code>s. Fields can then opt into the special logic by using a custom annotation. Like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo {\n    @JsonTimeRange(format = &quot;ISO_DATE_TIME&quot;)\n    TimeRange timeRange;\n}\n\nclass TimeRange {\n    long start;\n    long end;\n\n    @JsonCreator TimeRange(final long start, final long end) { ... }\n}\n</code></pre>\n<p>The one I have working so far for this <code>TimeRange</code> use case attempts to use existing Jackson <code>@JsonUnwrapped</code> logic present in <code>BeanDeserializer/Base</code> and I feel is SO CLOSE to working perfectly.</p>\n<p>My problem as I can see it is I do not know how to effectively propagate state down in the deserialization hierarchy.</p>\n<p>Jackson handles <code>@JsonUnwrapped</code> by taking the original <code>BeanDeserializer</code> associated with the class and building virtual bean properties matching the transformed names. When deserializing it scans a copied token buffer looking for those values and injects those properties into the base deserializer as if they had always been there. The base deserializer then operates normally, barely cognizant of the difference.</p>\n<p>In my case, I'm hoping to leverage the existing <code>@JsonCreator</code> for <code>TimeRange</code>. The trouble is that it's _<code>creatorProperties</code> is built with a <code>LongDeserializer</code> for it's own fields when built by Jackson (which is technically correct) - and I cannot find how how in the world to intercept these and replace them. I can build the exact &quot;String To Long Deserializer&quot; required when processing <code>@JsonTimeRange</code> but that state is nowhere to be found when processing the <code>BeanDeserializer</code> for <code>TimeRange</code>.</p>\n<p>I also can't seem to find a place to re-intercept <code>Foo.timeRange</code> - neither the property NOR the deserializer - in a way that matters.</p>\n<ul>\n<li>I can retrieve the canonical deserializer for <code>TimeRange</code> from <code>DeserializationContext</code> when building my custom property - but I can't reach down into <code>deserializer -&gt; bean properties -&gt; creator -&gt; creator properties -&gt; deserializer</code> and swap anything out. it's all hidden and immutable by this point</li>\n<li><code>ContextualDeserializer#createContextual</code> as executed by <code>BeanDeserializer</code> is the most often cited place in other posts I have read, but it's insufficient for my intention here for what seems to be the same reason - cannot access and change the fields I need to.</li>\n</ul>\n<p>I accept that my desire to use as much vanilla Jackson as possible - including relying on the standard <code>JsonCreator</code> for <code>TimeRange</code>, and how it processes &quot;Unwrapped&quot; fields (<code>NameTransformer</code>, <code>UnwrappedPropertyHandler</code>, and their retrievals within <code>BeanDeserializer#resolve</code>) - may be too much to expect.</p>\n<p>But on the other hand it SEEMS to fit so well and I'm hoping there's a connection between these deserialization levels I can utilize to dynamically tweak the CreatorProperties for TimeRange just enough to let it go. The error I get right now is just type type difference.</p>\n<pre><code>Cannot deserialize value of type `long` from String &quot;2019-01-01T08:00:00.000Z&quot;: not a valid `long` value\n at [Source: (String)&quot;{&quot;startDateTime&quot;:&quot;2019-01-01T08:00:00.000Z&quot;,&quot;endDateTime&quot;:&quot;2019-01-01T18:00:00.000Z&quot;}&quot;; line: 1, column: 141] (through reference chain: com.my.project.TimeRange[&quot;startDateTime&quot;])\ncom.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `long` from String &quot;2019-01-01T08:00:00.000Z&quot;: not a valid `long` value\n at [Source: (String)&quot;{&quot;startDateTime&quot;:&quot;2019-01-01T08:00:00.000Z&quot;,&quot;endDateTime&quot;:&quot;2019-01-01T18:00:00.000Z&quot;}&quot;; line: 1, column: 141] (through reference chain: com.my.project.TimeRange[&quot;startDateTime&quot;])\n    at app//com.fasterxml.jackson.databind.exc.InvalidFormatException.from(InvalidFormatException.java:67)\n    at app//com.fasterxml.jackson.databind.DeserializationContext.weirdStringException(DeserializationContext.java:1996)\n    at app//com.fasterxml.jackson.databind.DeserializationContext.handleWeirdStringValue(DeserializationContext.java:1224)\n    at app//com.fasterxml.jackson.databind.deser.std.StdDeserializer._parseLongPrimitive(StdDeserializer.java:916)\n    at app//com.fasterxml.jackson.databind.deser.std.StdDeserializer._parseLongPrimitive(StdDeserializer.java:904)\n    at app//com.fasterxml.jackson.databind.deser.std.NumberDeserializers$LongDeserializer.deserialize(NumberDeserializers.java:573)\n    at app//com.fasterxml.jackson.databind.deser.std.NumberDeserializers$LongDeserializer.deserialize(NumberDeserializers.java:550)\n    at app//com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:542)\n</code></pre>\n<p>Also open to alternatives, but this seems the most Jackson-like solution to me for this problem since they already have some support for Unwrapped fields!</p>\n"},{"tags":["java","database","hibernate"],"comments":[{"owner":{"account_id":4000458,"reputation":17823,"user_id":3296621,"accept_rate":78,"display_name":"Smutje"},"score":0,"creation_date":1478851241,"post_id":40542633,"comment_id":68325679,"body_markdown":"`create` works only one time and not for extending databases, `drop-and-create` may destroy your production data - most people use `create` as initial setup and migrate production databases via third party products (manually, Flyway, Liquibase).","body":"<code>create</code> works only one time and not for extending databases, <code>drop-and-create</code> may destroy your production data - most people use <code>create</code> as initial setup and migrate production databases via third party products (manually, Flyway, Liquibase)."}],"answers":[{"tags":[],"owner":{"account_id":2739343,"reputation":131,"user_id":2361219,"display_name":"Turan Y&#252;ksel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1479035281,"creation_date":1479035281,"answer_id":40573130,"question_id":40542633,"body_markdown":"Hibernate generates DDL statements by analysing your annotations or `&lt;class&gt;` and `&lt;database-object&gt;` definitions in the XML files, it does not take your queries into account. Anyways, it is performance-wise enough for many developers who just develop big software in small chunks and easy to put into automation (e.g. in testing).\r\n\r\nNormally one should define partitions and indexes in a production (or production-like) environment after seeing the nature of the data and queries on the data.\r\n","title":"Good practice while creating schema in Hibernate application","body":"<p>Hibernate generates DDL statements by analysing your annotations or <code>&lt;class&gt;</code> and <code>&lt;database-object&gt;</code> definitions in the XML files, it does not take your queries into account. Anyways, it is performance-wise enough for many developers who just develop big software in small chunks and easy to put into automation (e.g. in testing).</p>\n\n<p>Normally one should define partitions and indexes in a production (or production-like) environment after seeing the nature of the data and queries on the data.</p>\n"},{"tags":[],"owner":{"account_id":29317993,"reputation":31,"user_id":22462274,"display_name":"unimatrix10"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695334563,"creation_date":1695334563,"answer_id":77153929,"question_id":40542633,"body_markdown":"TL;DR: Hibernate recommends manual (assisted whit version control system) administration of the schema for production environments.\r\n\r\nhttps://docs.jboss.org/hibernate/orm/6.3/userguide/html_single/Hibernate_User_Guide.html#best-practices-schema\r\n","title":"Good practice while creating schema in Hibernate application","body":"<p>TL;DR: Hibernate recommends manual (assisted whit version control system) administration of the schema for production environments.</p>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/6.3/userguide/html_single/Hibernate_User_Guide.html#best-practices-schema\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/6.3/userguide/html_single/Hibernate_User_Guide.html#best-practices-schema</a></p>\n"}],"owner":{"account_id":8405839,"reputation":3,"user_id":6309359,"accept_rate":50,"display_name":"rakesh kapri"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40573130,"answer_count":2,"score":0,"last_activity_date":1695334563,"creation_date":1478847167,"question_id":40542633,"body_markdown":"This might seem to be a very basic question but what is usually a good practice for creating database schema while using Hibernate application (especially while creating an application from scratch).\r\n\r\nAlthough we can create it using hibernate by using &quot;hibernate.hbm2ddl.auto = create&quot; property but should it be preferred over creating schema using DB administration applications like PL/SQL developer.\r\n\r\nThough we can create partitions, indexes and sequences using PL/SQL Developer but is it also possible to do same using hibernate as well. Even if so, is it a good practice.\r\n\r\nThanks in advance.\r\n","title":"Good practice while creating schema in Hibernate application","body":"<p>This might seem to be a very basic question but what is usually a good practice for creating database schema while using Hibernate application (especially while creating an application from scratch).</p>\n\n<p>Although we can create it using hibernate by using \"hibernate.hbm2ddl.auto = create\" property but should it be preferred over creating schema using DB administration applications like PL/SQL developer.</p>\n\n<p>Though we can create partitions, indexes and sequences using PL/SQL Developer but is it also possible to do same using hibernate as well. Even if so, is it a good practice.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","javascript","http","facebook-graph-api","curl"],"comments":[{"owner":{"account_id":4944108,"reputation":1241,"user_id":3980029,"display_name":"Aninda Bhattacharyya"},"score":1,"creation_date":1426096444,"post_id":28993724,"comment_id":46235891,"body_markdown":"It depends if the producer has done something like a discovery service or not. If not, then I am afraid you can&#39;t.","body":"It depends if the producer has done something like a discovery service or not. If not, then I am afraid you can&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":1181763,"reputation":2612,"user_id":1156554,"display_name":"David"},"comment_count":0,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1479905980,"creation_date":1426096561,"answer_id":28993964,"question_id":28993724,"body_markdown":"Some RESTful APIs publish a Web Application Description Language resource (WADL - pronounced like the walk that ducks do - for short).  JAX-RS, or at least Jersy webapps will do this by default at the application root URL /application.wadl.  It doesn&#39;t appear that Twitter&#39;s API is one of these.  Many REST purists would argue that the API should be self describing and self discoverable simply by interacting with it and seeing what other endpoints it will give you.\r\n\r\n[More about WADL from wikipedia...](http://en.wikipedia.org/wiki/Web_Application_Description_Language)","title":"Is there a way to discover all endpoints of a REST API?","body":"<p>Some RESTful APIs publish a Web Application Description Language resource (WADL - pronounced like the walk that ducks do - for short).  JAX-RS, or at least Jersy webapps will do this by default at the application root URL /application.wadl.  It doesn't appear that Twitter's API is one of these.  Many REST purists would argue that the API should be self describing and self discoverable simply by interacting with it and seeing what other endpoints it will give you.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Web_Application_Description_Language\" rel=\"noreferrer\">More about WADL from wikipedia...</a></p>\n"},{"comments":[{"owner":{"account_id":15242745,"reputation":150,"user_id":10998484,"display_name":"Dustin K"},"score":0,"creation_date":1641664022,"post_id":28993965,"comment_id":124865987,"body_markdown":"Isn&#39;t one of the constraints of a REST api is &quot;code on demand&quot;. If you can&#39;t dynamically discover endpoints, then is it really RESTful?","body":"Isn&#39;t one of the constraints of a REST api is &quot;code on demand&quot;. If you can&#39;t dynamically discover endpoints, then is it really RESTful?"},{"owner":{"account_id":18977250,"reputation":661,"user_id":13849446,"display_name":"farhan jatt"},"score":0,"creation_date":1657628846,"post_id":28993965,"comment_id":128851553,"body_markdown":"You can create the API using FastAPI which documents automatically for you","body":"You can create the API using FastAPI which documents automatically for you"}],"tags":[],"owner":{"account_id":435280,"reputation":14323,"user_id":821786,"display_name":"Gergely Bacso"},"comment_count":2,"down_vote_count":2,"up_vote_count":88,"is_accepted":true,"score":86,"last_activity_date":1695333990,"creation_date":1426096561,"answer_id":28993965,"question_id":28993724,"body_markdown":"There is no way of programmatically discovering REST services as they do not have a standard registry service.\r\n\r\nApart from doing something insane brute-force search there is no way of finding the right URLs ( not to mention the right parameters). So the only option is documenting your API. For that the best choice I have seen so far is:\r\n\r\n - [Swagger][1]\r\n - And people also like [API Blueprint][2].\r\n\r\n\r\n  [1]: http://swagger.io/\r\n  [2]: https://apiblueprint.org/","title":"Is there a way to discover all endpoints of a REST API?","body":"<p>There is no way of programmatically discovering REST services as they do not have a standard registry service.</p>\n<p>Apart from doing something insane brute-force search there is no way of finding the right URLs ( not to mention the right parameters). So the only option is documenting your API. For that the best choice I have seen so far is:</p>\n<ul>\n<li><a href=\"http://swagger.io/\" rel=\"nofollow noreferrer\">Swagger</a></li>\n<li>And people also like <a href=\"https://apiblueprint.org/\" rel=\"nofollow noreferrer\">API Blueprint</a>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":9521405,"reputation":24976,"user_id":7076153,"accept_rate":50,"display_name":"Stargateur"},"score":4,"creation_date":1563997433,"post_id":56931291,"comment_id":100890224,"body_markdown":"You are hurting a conflict between practice and theory, the true is user always win. Rest is more what you call guidelines, than actual rules.","body":"You are hurting a conflict between practice and theory, the true is user always win. Rest is more what you call guidelines, than actual rules."},{"owner":{"account_id":16521992,"reputation":65,"user_id":11939049,"display_name":"MoltasDev"},"score":2,"creation_date":1581083508,"post_id":56931291,"comment_id":106321765,"body_markdown":"How would one go about to actually see said links?","body":"How would one go about to actually see said links?"},{"owner":{"account_id":927463,"reputation":3905,"user_id":957950,"display_name":"brichins"},"score":1,"creation_date":1641419658,"post_id":56931291,"comment_id":124803386,"body_markdown":"The self-describing aspect is not generally used in practice, but here&#39;s more reading on the definition - https://en.wikipedia.org/wiki/HATEOAS (short for &quot;Hypermedia as the Engine of Application State&quot;)","body":"The self-describing aspect is not generally used in practice, but here&#39;s more reading on the definition - <a href=\"https://en.wikipedia.org/wiki/HATEOAS\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/HATEOAS</a> (short for &quot;Hypermedia as the Engine of Application State&quot;)"}],"tags":[],"owner":{"account_id":198697,"reputation":18245,"user_id":443515,"accept_rate":56,"display_name":"Qwerky"},"comment_count":3,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1562575609,"creation_date":1562575609,"answer_id":56931291,"question_id":28993724,"body_markdown":"You should be able to discover everything you need to know about a REST API by only knowing the initial entry point. This is one of the fundamental points of REST; that it should be hypermedia driven and self describing. It is also one of the least understood principles. The discovery of resources is down to hypermedia links in the responses from the server.\r\n\r\nBack as long ago as [2008 Roy Fielding started to get annoyed about people writing HTTP based APIs and calling them REST][1] just because it was the hot new thing. Here are a couple of points he makes;\r\n\r\n&gt; A REST API **must not define fixed resource names or hierarchies** (an\r\n&gt; obvious coupling of client and server). Servers must have the freedom\r\n&gt; to control their own namespace. Instead, allow servers to instruct\r\n&gt; clients on how to construct appropriate URIs, such as is done in HTML\r\n&gt; forms and URI templates, by defining those instructions within media\r\n&gt; types and link relations. [Failure here implies that clients are\r\n&gt; assuming a resource structure due to out-of band information, such as\r\n&gt; a domain-specific standard, which is the data-oriented equivalent to\r\n&gt; RPC’s functional coupling].\r\n\r\nand\r\n\r\n&gt; A REST API **should be entered with no prior knowledge beyond the\r\n&gt; initial URI (bookmark) and set of standardized media types that are\r\n&gt; appropriate for the intended audience** (i.e., expected to be understood\r\n&gt; by any client that might use the API). From that point on, all\r\n&gt; application state transitions must be driven by client selection of\r\n&gt; server-provided choices that are present in the received\r\n&gt; representations or implied by the user’s manipulation of those\r\n&gt; representations. The transitions may be determined (or limited by) the\r\n&gt; client’s knowledge of media types and resource communication\r\n&gt; mechanisms, both of which may be improved on-the-fly (e.g.,\r\n&gt; code-on-demand). [Failure here implies that out-of-band information is\r\n&gt; driving interaction instead of hypertext.]\r\n\r\nWhat this means in practice is that the entry point (typically using the root URI of &quot;/&quot;) contains links to other REST APIs. Those APIs will contain links to other APIs and so on. There should be no API that doesn&#39;t have a link to it. That would mean it is not discoverable.\r\n\r\nThe other answers here fundamentally wrong in that they fail to acknowledge the most basic principle of REST.\r\n\r\n[1]: https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven","title":"Is there a way to discover all endpoints of a REST API?","body":"<p>You should be able to discover everything you need to know about a REST API by only knowing the initial entry point. This is one of the fundamental points of REST; that it should be hypermedia driven and self describing. It is also one of the least understood principles. The discovery of resources is down to hypermedia links in the responses from the server.</p>\n\n<p>Back as long ago as <a href=\"https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven\" rel=\"noreferrer\">2008 Roy Fielding started to get annoyed about people writing HTTP based APIs and calling them REST</a> just because it was the hot new thing. Here are a couple of points he makes;</p>\n\n<blockquote>\n  <p>A REST API <strong>must not define fixed resource names or hierarchies</strong> (an\n  obvious coupling of client and server). Servers must have the freedom\n  to control their own namespace. Instead, allow servers to instruct\n  clients on how to construct appropriate URIs, such as is done in HTML\n  forms and URI templates, by defining those instructions within media\n  types and link relations. [Failure here implies that clients are\n  assuming a resource structure due to out-of band information, such as\n  a domain-specific standard, which is the data-oriented equivalent to\n  RPC’s functional coupling].</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>A REST API <strong>should be entered with no prior knowledge beyond the\n  initial URI (bookmark) and set of standardized media types that are\n  appropriate for the intended audience</strong> (i.e., expected to be understood\n  by any client that might use the API). From that point on, all\n  application state transitions must be driven by client selection of\n  server-provided choices that are present in the received\n  representations or implied by the user’s manipulation of those\n  representations. The transitions may be determined (or limited by) the\n  client’s knowledge of media types and resource communication\n  mechanisms, both of which may be improved on-the-fly (e.g.,\n  code-on-demand). [Failure here implies that out-of-band information is\n  driving interaction instead of hypertext.]</p>\n</blockquote>\n\n<p>What this means in practice is that the entry point (typically using the root URI of \"/\") contains links to other REST APIs. Those APIs will contain links to other APIs and so on. There should be no API that doesn't have a link to it. That would mean it is not discoverable.</p>\n\n<p>The other answers here fundamentally wrong in that they fail to acknowledge the most basic principle of REST.</p>\n"}],"owner":{"account_id":2656383,"reputation":12294,"user_id":2296997,"accept_rate":62,"display_name":"4m1r"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202412,"favorite_count":0,"down_vote_count":0,"up_vote_count":92,"accepted_answer_id":28993965,"answer_count":3,"score":92,"last_activity_date":1695333990,"creation_date":1426095858,"question_id":28993724,"body_markdown":"I&#39;m wondering if its possible to programmatically discover all the endpoints of a particular API. \r\n\r\nSo for example if I GET this URL with a browser or curl:\r\nhttps://api.twitter.com/1.1/\r\n\r\nI might get something like this as a JSON response:\r\n\r\n```\r\n&quot;TwitterAPI&quot;:{\r\n\t&quot;version&quot; : 1.1,\r\n\t&quot;GET&quot; : {\r\n\t\t&quot;search/&quot; : [&quot;users&quot;, &quot;trending&quot;],\r\n\t\t&quot;users/&quot; : [&quot;id&quot;, &quot;handle&quot;]\r\n\t}\r\n}\r\n```\r\n\r\nOf course Twitter could choose to publish or not publish this format. So as a side question, are there any libraries for Java or JavaScript that will automatically map and publish the API routes you created in your controllers?  ","title":"Is there a way to discover all endpoints of a REST API?","body":"<p>I'm wondering if its possible to programmatically discover all the endpoints of a particular API.</p>\n<p>So for example if I GET this URL with a browser or curl:\n<a href=\"https://api.twitter.com/1.1/\" rel=\"noreferrer\">https://api.twitter.com/1.1/</a></p>\n<p>I might get something like this as a JSON response:</p>\n<pre><code>&quot;TwitterAPI&quot;:{\n    &quot;version&quot; : 1.1,\n    &quot;GET&quot; : {\n        &quot;search/&quot; : [&quot;users&quot;, &quot;trending&quot;],\n        &quot;users/&quot; : [&quot;id&quot;, &quot;handle&quot;]\n    }\n}\n</code></pre>\n<p>Of course Twitter could choose to publish or not publish this format. So as a side question, are there any libraries for Java or JavaScript that will automatically map and publish the API routes you created in your controllers?</p>\n"},{"tags":["java","input","timer","android-view","countdowntimer"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695229963,"post_id":77139751,"comment_id":135997845,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"comments":[{"owner":{"account_id":28912062,"reputation":13,"user_id":22144862,"display_name":"codec123"},"score":0,"creation_date":1695231246,"post_id":77139900,"comment_id":135998095,"body_markdown":"My problem is that the user typed number should replace zeros then move from right to left . It just display 00 initially then disappear","body":"My problem is that the user typed number should replace zeros then move from right to left . It just display 00 initially then disappear"}],"tags":[],"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695192307,"creation_date":1695192307,"answer_id":77139900,"question_id":77139751,"body_markdown":"**First Method:**\r\n\r\nTry using Strings features (I haven&#39;t tested):\r\n\r\n    String formattedSecond = second + Html.fromHtml(&quot;&lt;sub&gt;&lt;small&gt;&quot; + s + &quot;&lt;/small&gt;&lt;/sub&gt;&quot;)\r\n    \r\n    secondTextView.setText(formattedSecond);\r\n\r\n\r\n**Second Method:**\r\n\r\nYou can add an extra `TextView` aligned in Right (End) Bottom of each `TextView` of smaller size both inside a `RelativeLayout`.\r\n\r\n    &lt;RelativeLayout\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;TextView\r\n                android:id=&quot;@+id/aa&quot;\r\n                android:layout_width=&quot;80dp&quot;\r\n                android:layout_height=&quot;80dp&quot;\r\n                android:text=&quot;12&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:textSize=&quot;50sp&quot;/&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/bb&quot;\r\n                android:layout_width=&quot;24dp&quot;\r\n                android:layout_height=&quot;24dp&quot;\r\n                android:text=&quot;S&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:textSize=&quot;20sp&quot;\r\n                android:layout_alignBottom=&quot;@id/aa&quot;\r\n                android:layout_alignEnd=&quot;@id/aa&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;","title":"How to take input for timer with 11 buttons","body":"<p><strong>First Method:</strong></p>\n<p>Try using Strings features (I haven't tested):</p>\n<pre><code>String formattedSecond = second + Html.fromHtml(&quot;&lt;sub&gt;&lt;small&gt;&quot; + s + &quot;&lt;/small&gt;&lt;/sub&gt;&quot;)\n\nsecondTextView.setText(formattedSecond);\n</code></pre>\n<p><strong>Second Method:</strong></p>\n<p>You can add an extra <code>TextView</code> aligned in Right (End) Bottom of each <code>TextView</code> of smaller size both inside a <code>RelativeLayout</code>.</p>\n<pre><code>&lt;RelativeLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;TextView\n            android:id=&quot;@+id/aa&quot;\n            android:layout_width=&quot;80dp&quot;\n            android:layout_height=&quot;80dp&quot;\n            android:text=&quot;12&quot;\n            android:gravity=&quot;center&quot;\n            android:textSize=&quot;50sp&quot;/&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/bb&quot;\n            android:layout_width=&quot;24dp&quot;\n            android:layout_height=&quot;24dp&quot;\n            android:text=&quot;S&quot;\n            android:gravity=&quot;center&quot;\n            android:textSize=&quot;20sp&quot;\n            android:layout_alignBottom=&quot;@id/aa&quot;\n            android:layout_alignEnd=&quot;@id/aa&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28912062,"reputation":13,"user_id":22144862,"display_name":"codec123"},"score":1,"creation_date":1695474128,"post_id":77153891,"comment_id":136030913,"body_markdown":"Thank you so much for helping a noobie . Gotta try it .","body":"Thank you so much for helping a noobie . Gotta try it ."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1695333951,"creation_date":1695333951,"answer_id":77153891,"question_id":77139751,"body_markdown":"&gt; _&#39;... When a user type input like &quot;123&quot; the textview should change from right to left like &quot;00h 01m 23s&quot; . I cant figure out how to do this. It should take input like google clock app GOOGLE CLOCK APP ...&#39;_\r\n\r\nUtilize a _class structure_ to parse the value into _hours_, _minutes_, and _seconds_.\r\n\r\n```java\r\nimport static java.lang.Integer.parseInt;\r\n```\r\n\r\n```java\r\nclass Time {\r\n    String string = &quot;&quot;;\r\n    int h, m, s;\r\n\r\n    Time() { }\r\n    Time(String s) { append(s); }\r\n\r\n    void append(String s) {\r\n        string += s;\r\n        parse();\r\n    }\r\n\r\n    private void parse() {\r\n        int n = string.length();\r\n        if (n &lt; 3) s = parseInt(string);\r\n        else {\r\n            if (n &lt;= 4) m = parseInt(string.substring(0, n - 2));\r\n            else {\r\n                h = parseInt(string.substring(0, n - 4));\r\n                m = parseInt(string.substring(n - 4, n - 2));\r\n            }\r\n            s = parseInt(string.substring(n - 2));\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;%02dh %02dm %02ds&quot;.formatted(h, m, s);\r\n    }\r\n}\r\nString s = &quot;12345&quot;;\r\nSystem.out.println(new Time(s));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n01h 23m 45s\r\n```\r\n\r\nHere is an example of an appending value.\r\n\r\n```java\r\nTime t = new Time();\r\nfor (int i = 1; i &lt; 10; i++) {\r\n    t.append(String.valueOf(i));\r\n    System.out.println(t);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n00h 00m 01s\r\n00h 00m 12s\r\n00h 01m 23s\r\n00h 12m 34s\r\n01h 23m 45s\r\n12h 34m 56s\r\n123h 45m 67s\r\n1234h 56m 78s\r\n12345h 67m 89s\r\n```","title":"How to take input for timer with 11 buttons","body":"<blockquote>\n<p><em>'... When a user type input like &quot;123&quot; the textview should change from right to left like &quot;00h 01m 23s&quot; . I cant figure out how to do this. It should take input like google clock app GOOGLE CLOCK APP ...'</em></p>\n</blockquote>\n<p>Utilize a <em>class structure</em> to parse the value into <em>hours</em>, <em>minutes</em>, and <em>seconds</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.lang.Integer.parseInt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Time {\n    String string = &quot;&quot;;\n    int h, m, s;\n\n    Time() { }\n    Time(String s) { append(s); }\n\n    void append(String s) {\n        string += s;\n        parse();\n    }\n\n    private void parse() {\n        int n = string.length();\n        if (n &lt; 3) s = parseInt(string);\n        else {\n            if (n &lt;= 4) m = parseInt(string.substring(0, n - 2));\n            else {\n                h = parseInt(string.substring(0, n - 4));\n                m = parseInt(string.substring(n - 4, n - 2));\n            }\n            s = parseInt(string.substring(n - 2));\n        }\n    }\n\n    @Override\n    public String toString() {\n        return &quot;%02dh %02dm %02ds&quot;.formatted(h, m, s);\n    }\n}\nString s = &quot;12345&quot;;\nSystem.out.println(new Time(s));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>01h 23m 45s\n</code></pre>\n<p>Here is an example of an appending value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Time t = new Time();\nfor (int i = 1; i &lt; 10; i++) {\n    t.append(String.valueOf(i));\n    System.out.println(t);\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>00h 00m 01s\n00h 00m 12s\n00h 01m 23s\n00h 12m 34s\n01h 23m 45s\n12h 34m 56s\n123h 45m 67s\n1234h 56m 78s\n12345h 67m 89s\n</code></pre>\n"}],"owner":{"account_id":28912062,"reputation":13,"user_id":22144862,"display_name":"codec123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1695333951,"creation_date":1695190739,"question_id":77139751,"body_markdown":"I am new to android development . I am trying to make a timer app . My UI has 11 buttons from 0-9 , a 00 button and a backspace button . The initial format of my textview will be like &quot;00h 00m 00s&quot; . When a user type input like &quot;123&quot; the textview should change from right to left like &quot;00h 01m 23s&quot; . I cant figure out how to do this. \r\nIt should take input like google clock app\r\nGOOGLE CLOCK APP\r\n\r\n[![GOOGLE CLOCK APP][1]][1]\r\n\r\nPLS WRITE CLEAR CODE IN JAVA . \r\n\r\nI tried using three textview for h , m and s .  I used SpannableStringBuilder to reduce the size of h , m and s . \r\ni was expecting it to replace zeros in the text view but it is removing it and writing new number . in short i am messed up.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0Vs8K.jpg","title":"How to take input for timer with 11 buttons","body":"<p>I am new to android development . I am trying to make a timer app . My UI has 11 buttons from 0-9 , a 00 button and a backspace button . The initial format of my textview will be like &quot;00h 00m 00s&quot; . When a user type input like &quot;123&quot; the textview should change from right to left like &quot;00h 01m 23s&quot; . I cant figure out how to do this.\nIt should take input like google clock app\nGOOGLE CLOCK APP</p>\n<p><a href=\"https://i.stack.imgur.com/0Vs8K.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Vs8K.jpg\" alt=\"GOOGLE CLOCK APP\" /></a></p>\n<p>PLS WRITE CLEAR CODE IN JAVA .</p>\n<p>I tried using three textview for h , m and s .  I used SpannableStringBuilder to reduce the size of h , m and s .\ni was expecting it to replace zeros in the text view but it is removing it and writing new number . in short i am messed up.</p>\n"},{"tags":["java","jackson","java-time"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1639930941,"post_id":70412805,"comment_id":124468585,"body_markdown":"Do you use the latest version of jackson?","body":"Do you use the latest version of jackson?"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1639934677,"post_id":70412805,"comment_id":124469566,"body_markdown":"In _Project &gt; Properties: Java Build Path_ tab _Module Dependencies_ select the `java.base` module and click _Expose Package..._ button. Enter as _Package_ `java.time`, as _Target module_ `UNNAMED` and select _opens_. Does this fix your issue? But probably the root cause is that you use a too old library that was written for an older Java version. So first check, if your used libraries are up to date.","body":"In <i>Project &gt; Properties: Java Build Path</i> tab <i>Module Dependencies</i> select the <code>java.base</code> module and click <i>Expose Package...</i> button. Enter as <i>Package</i> <code>java.time</code>, as <i>Target module</i> <code>UNNAMED</code> and select <i>opens</i>. Does this fix your issue? But probably the root cause is that you use a too old library that was written for an older Java version. So first check, if your used libraries are up to date."},{"owner":{"display_name":"user17173618"},"score":0,"creation_date":1640013555,"post_id":70412805,"comment_id":124488021,"body_markdown":"I got it now, default constructor was missing and I had a mistake in it and yes I had to use JavaTime for it. Thanks","body":"I got it now, default constructor was missing and I had a mistake in it and yes I had to use JavaTime for it. Thanks"}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":6,"creation_date":1668382091,"post_id":70630580,"comment_id":131385264,"body_markdown":"You haven&#39;t solved it.  You have just put off the problem so that it can come back and bite you when you move to Java 17 (or later).","body":"You haven&#39;t solved it.  You have just put off the problem so that it can come back and bite you when you move to Java 17 (or later)."}],"tags":[],"owner":{"account_id":23867602,"reputation":21,"user_id":17869745,"display_name":"necmiye"},"comment_count":1,"down_vote_count":13,"up_vote_count":4,"is_accepted":false,"score":-9,"last_activity_date":1641628740,"creation_date":1641628740,"answer_id":70630580,"question_id":70412805,"body_markdown":"I solved this problem to change jdk16 to jdk11.","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>I solved this problem to change jdk16 to jdk11.</p>\n"},{"comments":[{"owner":{"account_id":6499292,"reputation":5620,"user_id":5030709,"accept_rate":40,"display_name":"Imran"},"score":0,"creation_date":1653409242,"post_id":70878195,"comment_id":127843635,"body_markdown":"if you are on Windows, use `--add-opens=java.base/java.time=ALL-UNNAMED` for `JAVA_TOOL_OPTIONS` environment variable.","body":"if you are on Windows, use <code>--add-opens=java.base&#47;java.time=ALL-UNNAMED</code> for <code>JAVA_TOOL_OPTIONS</code> environment variable."}],"tags":[],"owner":{"account_id":6403427,"reputation":2065,"user_id":5471235,"accept_rate":90,"display_name":"makson"},"comment_count":1,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1643284679,"creation_date":1643284679,"answer_id":70878195,"question_id":70412805,"body_markdown":"You can fix this issue on your own.\r\n\r\nadd `--add-opens java.base/java.time=ALL-UNNAMED` as start-argument and it&#39;ll work.\r\n\r\nHere is the corresponding [JEP][1]\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/396","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>You can fix this issue on your own.</p>\n<p>add <code>--add-opens java.base/java.time=ALL-UNNAMED</code> as start-argument and it'll work.</p>\n<p>Here is the corresponding <a href=\"https://openjdk.java.net/jeps/396\" rel=\"noreferrer\">JEP</a></p>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695333065,"post_id":73752279,"comment_id":136014270,"body_markdown":"The question is about Jackson, so why Gson answer?","body":"The question is about Jackson, so why Gson answer?"}],"tags":[],"owner":{"account_id":15922144,"reputation":97,"user_id":11488835,"display_name":"Ahmed Ahmed"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1663391248,"creation_date":1663391248,"answer_id":73752279,"question_id":70412805,"body_markdown":"I used this way and fixed this Problem. Firstly you have to create LocalDateTime Deserializer with the given Date Format in your Json Data.\r\n\r\n    class LocalDateTimeDeserializer implements JsonDeserializer &lt; LocalDateTime &gt; {\r\n    @Override\r\n    public LocalDateTime deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)\r\n    throws JsonParseException {\r\n        return LocalDateTime.parse(json.getAsString(),\r\n            DateTimeFormatter.ofPattern(&quot;d::MMM::uuuu HH::mm::ss&quot;).withLocale(Locale.ENGLISH));\r\n    }\r\n}\r\n\r\nThen create Object of Type GsonBuilder and adapt it with your LocalDateDeserializer.\r\n\r\n    gsonBuilder.registerTypeAdapter(LocalDateTime.class, new LocalDateTimeDeserializer());\r\n    \r\n    Gson gson = gsonBuilder.setPrettyPrinting().create();\r\n\r\n","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>I used this way and fixed this Problem. Firstly you have to create LocalDateTime Deserializer with the given Date Format in your Json Data.</p>\n<pre><code>class LocalDateTimeDeserializer implements JsonDeserializer &lt; LocalDateTime &gt; {\n@Override\npublic LocalDateTime deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)\nthrows JsonParseException {\n    return LocalDateTime.parse(json.getAsString(),\n        DateTimeFormatter.ofPattern(&quot;d::MMM::uuuu HH::mm::ss&quot;).withLocale(Locale.ENGLISH));\n}\n</code></pre>\n<p>}</p>\n<p>Then create Object of Type GsonBuilder and adapt it with your LocalDateDeserializer.</p>\n<pre><code>gsonBuilder.registerTypeAdapter(LocalDateTime.class, new LocalDateTimeDeserializer());\n\nGson gson = gsonBuilder.setPrettyPrinting().create();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"score":0,"creation_date":1668587730,"post_id":74239950,"comment_id":131439162,"body_markdown":"Where do you use this adapter","body":"Where do you use this adapter"},{"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"score":0,"creation_date":1668587741,"post_id":74239950,"comment_id":131439167,"body_markdown":"Could you please add code maybe as an example","body":"Could you please add code maybe as an example"},{"owner":{"account_id":1010706,"reputation":1264,"user_id":1023341,"display_name":"gkephorus"},"score":0,"creation_date":1701334063,"post_id":74239950,"comment_id":136763390,"body_markdown":"Example of registering the TypeAdapter:\n\n    static final Gson GSON;\n    static {\n        GSON = new GsonBuilder() //\n                .registerTypeAdapter(LocalDateTime.class, new LocalDateTimeDeserializer()) //\n                .setFieldNamingPolicy(FieldNamingPolicy.IDENTITY) //\n                .setDateFormat(&quot;YYYY-MM-dd&quot;) //\n                .setPrettyPrinting() //\n                .create();\n    }","body":"Example of registering the TypeAdapter:      static final Gson GSON;     static {         GSON = new GsonBuilder() //                 .registerTypeAdapter(LocalDateTime.class, new LocalDateTimeDeserializer()) //                 .setFieldNamingPolicy(FieldNamingPolicy.IDENTITY) //                 .setDateFormat(&quot;YYYY-MM-dd&quot;) //                 .setPrettyPrinting() //                 .create();     }"}],"tags":[],"owner":{"account_id":3469431,"reputation":31,"user_id":2904223,"display_name":"nbarm"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1666984411,"creation_date":1666984411,"answer_id":74239950,"question_id":70412805,"body_markdown":"I got this exception with JDK 17 and Gson:\r\n\r\n    Unable to make field private final java.time.LocalDate java.time.LocalDateTime.date accessible: module java.base does not &quot;opens java.time&quot;\r\n\r\nso I used this custom TypeAdapter with null checks:\r\n\r\n    public class LocalDateTimeTypeAdapter extends TypeAdapter&lt;LocalDateTime&gt; {\r\n    \r\n        @Override\r\n        public void write(final JsonWriter jsonWriter, final LocalDateTime localDate) throws IOException {\r\n            if (localDate == null) {\r\n                jsonWriter.nullValue();\r\n                return;\r\n            }\r\n            jsonWriter.value(localDate.toString());\r\n        }\r\n    \r\n        @Override\r\n        public LocalDateTime read(final JsonReader jsonReader) throws IOException {\r\n            if (jsonReader.peek() == JsonToken.NULL) {\r\n                jsonReader.nextNull();\r\n                return null;\r\n            }\r\n            return ZonedDateTime.parse(jsonReader.nextString()).toLocalDateTime();\r\n        }\r\n    }","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>I got this exception with JDK 17 and Gson:</p>\n<pre><code>Unable to make field private final java.time.LocalDate java.time.LocalDateTime.date accessible: module java.base does not &quot;opens java.time&quot;\n</code></pre>\n<p>so I used this custom TypeAdapter with null checks:</p>\n<pre><code>public class LocalDateTimeTypeAdapter extends TypeAdapter&lt;LocalDateTime&gt; {\n\n    @Override\n    public void write(final JsonWriter jsonWriter, final LocalDateTime localDate) throws IOException {\n        if (localDate == null) {\n            jsonWriter.nullValue();\n            return;\n        }\n        jsonWriter.value(localDate.toString());\n    }\n\n    @Override\n    public LocalDateTime read(final JsonReader jsonReader) throws IOException {\n        if (jsonReader.peek() == JsonToken.NULL) {\n            jsonReader.nextNull();\n            return null;\n        }\n        return ZonedDateTime.parse(jsonReader.nextString()).toLocalDateTime();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1260896,"reputation":1488,"user_id":1219213,"accept_rate":60,"display_name":"TheRealChx101"},"score":0,"creation_date":1683543705,"post_id":74425662,"comment_id":134377734,"body_markdown":"Thits a gson issue not jackson (?)","body":"Thits a gson issue not jackson (?)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1683547852,"post_id":74425662,"comment_id":134378701,"body_markdown":"This is a Jackson issue.  The question is about Jackson and so is my answer.","body":"This is a Jackson issue.  The question is about Jackson and so is my answer."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668383567,"creation_date":1668383029,"answer_id":74425662,"question_id":70412805,"body_markdown":"From my reading of [this issue](https://github.com/fasterxml/jackson-databind/issues/3168), the problems that required you to [do the &quot;--add-opens&quot; hack][1]  or other work-arounds **should be fixed** in current Jackson releases.\r\n\r\nSo, if you are still finding you need to do this:\r\n\r\n  1.  Make sure you are using a recent Jackson release&lt;sup&gt;1&lt;/sup&gt;.\r\n  2.  If that doesn&#39;t help, raise a Jackson issue which sufficient specificity to allow the Jackson developers to figure out where this instance of the problem is occuring.\r\n\r\nThe &quot;--add-opens&quot; approach will work, but it is not a good solution.  The good solution is to *help* the developers to fix the problem by reporting it.\r\n\r\n-------------------\r\n\r\n&lt;sup&gt;1 - I can&#39;t give you a specific release because it is not clear from the issue tracker or release notes *precisely* when the problem(s) were fixed.   But 2.14.0 or later seems like a good bet, based on the date of the issue closure.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70878195/139985","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>From my reading of <a href=\"https://github.com/fasterxml/jackson-databind/issues/3168\" rel=\"nofollow noreferrer\">this issue</a>, the problems that required you to <a href=\"https://stackoverflow.com/a/70878195/139985\">do the &quot;--add-opens&quot; hack</a>  or other work-arounds <strong>should be fixed</strong> in current Jackson releases.</p>\n<p>So, if you are still finding you need to do this:</p>\n<ol>\n<li>Make sure you are using a recent Jackson release<sup>1</sup>.</li>\n<li>If that doesn't help, raise a Jackson issue which sufficient specificity to allow the Jackson developers to figure out where this instance of the problem is occuring.</li>\n</ol>\n<p>The &quot;--add-opens&quot; approach will work, but it is not a good solution.  The good solution is to <em>help</em> the developers to fix the problem by reporting it.</p>\n<hr />\n<p><sup>1 - I can't give you a specific release because it is not clear from the issue tracker or release notes <em>precisely</em> when the problem(s) were fixed.   But 2.14.0 or later seems like a good bet, based on the date of the issue closure.</sup></p>\n"},{"comments":[{"owner":{"account_id":6650234,"reputation":428,"user_id":5132665,"display_name":"Fırat &#199;ağlar Akbulut"},"score":1,"creation_date":1673456242,"post_id":75015574,"comment_id":132504928,"body_markdown":"if you&#39;re testing or trying to initiate a project on your local machine, this is the best solution to fix this problem. thanks for the answer!","body":"if you&#39;re testing or trying to initiate a project on your local machine, this is the best solution to fix this problem. thanks for the answer!"}],"tags":[],"owner":{"account_id":7514053,"reputation":61,"user_id":15321318,"display_name":"chetan"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1672906920,"creation_date":1672906920,"answer_id":75015574,"question_id":70412805,"body_markdown":"In STS or eclipse **add** the folowing statement in **default VM arguments**\r\n\r\n**--add-opens java.base/java.time=ALL-UNNAMED**\r\n\r\nDefault VM arguments path: \r\nWindow -&gt; Preferences -&gt; Installed JREs -&gt; select jre -&gt; edit\r\n","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>In STS or eclipse <strong>add</strong> the folowing statement in <strong>default VM arguments</strong></p>\n<p><strong>--add-opens java.base/java.time=ALL-UNNAMED</strong></p>\n<p>Default VM arguments path:\nWindow -&gt; Preferences -&gt; Installed JREs -&gt; select jre -&gt; edit</p>\n"},{"comments":[{"owner":{"account_id":6563370,"reputation":2385,"user_id":5073792,"display_name":"Sudharsan Thumatti"},"score":0,"creation_date":1698939738,"post_id":75250722,"comment_id":136470627,"body_markdown":"Dude, your answer was right on the spot. It fixed the issue.","body":"Dude, your answer was right on the spot. It fixed the issue."}],"tags":[],"owner":{"account_id":19953994,"reputation":11,"user_id":14622992,"display_name":"Ken"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674760788,"creation_date":1674760717,"answer_id":75250722,"question_id":70412805,"body_markdown":"I encountered a similar issue when I was unit testing Twilio SMS.\r\n\r\nI solved the issue by registering [JavaTimeModule][1] on the ObjectMapper.\r\n\r\n\r\n```\r\n        String json = &quot;{\\&quot;status\\&quot;: \\&quot;sent\\&quot;}&quot;;\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.registerModule(new JavaTimeModule());\r\n        var message = Message.fromJson(json, mapper);\r\n```\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-modules-java8/javadoc/datetime/2.9/com/fasterxml/jackson/datatype/jsr310/JavaTimeModule.html","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>I encountered a similar issue when I was unit testing Twilio SMS.</p>\n<p>I solved the issue by registering <a href=\"https://fasterxml.github.io/jackson-modules-java8/javadoc/datetime/2.9/com/fasterxml/jackson/datatype/jsr310/JavaTimeModule.html\" rel=\"nofollow noreferrer\">JavaTimeModule</a> on the ObjectMapper.</p>\n<pre><code>        String json = &quot;{\\&quot;status\\&quot;: \\&quot;sent\\&quot;}&quot;;\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.registerModule(new JavaTimeModule());\n        var message = Message.fromJson(json, mapper);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695333149,"post_id":76568767,"comment_id":136014283,"body_markdown":"The question is asking about Jackson, though, not Gson. Jackson is the preferred default in Spring Boot. https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.json","body":"The question is asking about Jackson, though, not Gson. Jackson is the preferred default in Spring Boot. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.json\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"}],"tags":[],"owner":{"account_id":6579550,"reputation":524,"user_id":5084232,"display_name":"Tushar Wasson"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687901582,"creation_date":1687901582,"answer_id":76568767,"question_id":70412805,"body_markdown":"I got this error after upgrading the application to Java 17 and Spring Boot 3. Adding VM options will lead to other problems.\r\n\r\n1.Fixed by adding the adapter.\r\n\r\n   \r\n\r\n     public class LocalDateTypeAdapter\r\n        implements JsonSerializer&lt;LocalDate&gt;, JsonDeserializer&lt;LocalDate&gt; {\r\n    \r\n      private final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\r\n    \r\n      @Override\r\n      public JsonElement serialize(final LocalDate date, final Type typeOfSrc,\r\n          final JsonSerializationContext context) {\r\n        return new JsonPrimitive(date.format(formatter));\r\n      }\r\n    \r\n      @Override\r\n      public LocalDate deserialize(final JsonElement json, final Type typeOfT,\r\n          final JsonDeserializationContext context) throws JsonParseException {\r\n        return LocalDate.parse(json.getAsString(), formatter);\r\n      }\r\n    }\r\n\r\n2.Then register the adapter like this :-\r\n\r\n    @Configuration\r\n    public class GsonConfiguration {\r\n    \r\n        @Bean\r\n        public GsonBuilderCustomizer typeAdapterRegistration() {\r\n            return builder -&gt; {\r\n                builder.registerTypeAdapter(LocalDate.class, new LocalDateTypeAdapter());\r\n            };\r\n        }\r\n    }","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>I got this error after upgrading the application to Java 17 and Spring Boot 3. Adding VM options will lead to other problems.</p>\n<p>1.Fixed by adding the adapter.</p>\n<pre><code> public class LocalDateTypeAdapter\n    implements JsonSerializer&lt;LocalDate&gt;, JsonDeserializer&lt;LocalDate&gt; {\n\n  private final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\n\n  @Override\n  public JsonElement serialize(final LocalDate date, final Type typeOfSrc,\n      final JsonSerializationContext context) {\n    return new JsonPrimitive(date.format(formatter));\n  }\n\n  @Override\n  public LocalDate deserialize(final JsonElement json, final Type typeOfT,\n      final JsonDeserializationContext context) throws JsonParseException {\n    return LocalDate.parse(json.getAsString(), formatter);\n  }\n}\n</code></pre>\n<p>2.Then register the adapter like this :-</p>\n<pre><code>@Configuration\npublic class GsonConfiguration {\n\n    @Bean\n    public GsonBuilderCustomizer typeAdapterRegistration() {\n        return builder -&gt; {\n            builder.registerTypeAdapter(LocalDate.class, new LocalDateTypeAdapter());\n        };\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11657675,"reputation":996,"user_id":8536903,"display_name":"Lukk17s"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688715360,"creation_date":1688715360,"answer_id":76634850,"question_id":70412805,"body_markdown":"You can always use additional DTO object with already parsed LocalDate to String.","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>You can always use additional DTO object with already parsed LocalDate to String.</p>\n"}],"owner":{"display_name":"user17173618"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60590,"favorite_count":0,"down_vote_count":1,"up_vote_count":25,"answer_count":9,"score":24,"last_activity_date":1695333117,"creation_date":1639927919,"question_id":70412805,"body_markdown":"I&#39;m trying to make a method, which uses the Json data with jackson library to have a list of objects.\r\nIf I run my code, I get the error:\r\n\r\njava.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year accessible: module java.base does not &quot;opens java.time&quot; to unnamed module @5c90e579\r\n\r\nWhy is it giving me an error about LocalDate even though I have JodaModul in my Code?\r\n\r\n```    \r\npublic static List&lt;Tweet&gt; getTweetsFile() throws Exception{\r\n\r\n            ObjectMapper mapper = new ObjectMapper().\r\n                    registerModule(new JodaModule()).\r\n                    configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n            \r\n            File path = new File (&quot;C:/Users/PC/eclipse-workspace/hw4/tw.json&quot;);\r\n\r\n            List&lt;Tweet&gt; myObjects3 =  Arrays.asList(mapper.readValue(path, Tweet.class));\r\n    \r\n            return myObjects3;\r\n    }\r\n```\r\n\r\nHow it looks in my File:\r\n\r\n    [{&quot;date&quot;:&quot;2001-12-28&quot;,&quot;tweetNumber&quot;:1,&quot;country&quot;:&quot;England&quot;,&quot;comments&quot;:11,&quot;message&quot;:&quot;I like to watch anime and reading books&quot;,&quot;retweets&quot;:3,&quot;username&quot;:&quot;Isabelle&quot;,&quot;likes&quot;:55},{&quot;date&quot;:&quot;2003-05-11&quot;,&quot;tweetNumber&quot;:2,&quot;country&quot;:&quot;France&quot;,&quot;comments&quot;:25,&quot;message&quot;:&quot;I&#39;m Viatnamese, but I live in France&quot;,&quot;retweets&quot;:30,&quot;username&quot;:&quot;Vin&quot;,&quot;likes&quot;:110}..\r\n    \r\n**It&#39;s not in the right order like my Object has in their constructor, could that be the reaseon?**","title":"What does this error mean? java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year","body":"<p>I'm trying to make a method, which uses the Json data with jackson library to have a list of objects.\nIf I run my code, I get the error:</p>\n<p>java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year accessible: module java.base does not &quot;opens java.time&quot; to unnamed module @5c90e579</p>\n<p>Why is it giving me an error about LocalDate even though I have JodaModul in my Code?</p>\n<pre><code>public static List&lt;Tweet&gt; getTweetsFile() throws Exception{\n\n            ObjectMapper mapper = new ObjectMapper().\n                    registerModule(new JodaModule()).\n                    configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n            \n            File path = new File (&quot;C:/Users/PC/eclipse-workspace/hw4/tw.json&quot;);\n\n            List&lt;Tweet&gt; myObjects3 =  Arrays.asList(mapper.readValue(path, Tweet.class));\n    \n            return myObjects3;\n    }\n</code></pre>\n<p>How it looks in my File:</p>\n<pre><code>[{&quot;date&quot;:&quot;2001-12-28&quot;,&quot;tweetNumber&quot;:1,&quot;country&quot;:&quot;England&quot;,&quot;comments&quot;:11,&quot;message&quot;:&quot;I like to watch anime and reading books&quot;,&quot;retweets&quot;:3,&quot;username&quot;:&quot;Isabelle&quot;,&quot;likes&quot;:55},{&quot;date&quot;:&quot;2003-05-11&quot;,&quot;tweetNumber&quot;:2,&quot;country&quot;:&quot;France&quot;,&quot;comments&quot;:25,&quot;message&quot;:&quot;I'm Viatnamese, but I live in France&quot;,&quot;retweets&quot;:30,&quot;username&quot;:&quot;Vin&quot;,&quot;likes&quot;:110}..\n</code></pre>\n<p><strong>It's not in the right order like my Object has in their constructor, could that be the reaseon?</strong></p>\n"},{"tags":["java","macos","intellij-idea","groovy"],"answers":[{"comments":[{"owner":{"account_id":105891,"reputation":14627,"user_id":282315,"accept_rate":82,"display_name":"David"},"score":3,"creation_date":1481646192,"post_id":41111852,"comment_id":69455522,"body_markdown":"This was useful to know, but ultimately didn&#39;t fix things. I think there might be a problem on the intelliJ side. It wound up wanting a folder named groovy-x.y.z, which I got manually from the Groovy website and unzipped under ~/tools/groovy-x.y.z/","body":"This was useful to know, but ultimately didn&#39;t fix things. I think there might be a problem on the intelliJ side. It wound up wanting a folder named groovy-x.y.z, which I got manually from the Groovy website and unzipped under ~/tools/groovy-x.y.z/"}],"tags":[],"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1481588583,"creation_date":1481588583,"answer_id":41111852,"question_id":41110256,"body_markdown":"`/usr/local/opt/groovy/libexec`.\r\n\r\nuse `brew info groovy` to print help:\r\n\r\n    ==&gt; Caveats\r\n      You should set GROOVY_HOME:\r\n        export GROOVY_HOME=/usr/local/opt/groovy/libexec","title":"How do I tell IntelliJ about groovy installed with brew on OSX","body":"<p><code>/usr/local/opt/groovy/libexec</code>.</p>\n\n<p>use <code>brew info groovy</code> to print help:</p>\n\n<pre><code>==&gt; Caveats\n  You should set GROOVY_HOME:\n    export GROOVY_HOME=/usr/local/opt/groovy/libexec\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1589916,"reputation":2586,"user_id":1473481,"accept_rate":100,"display_name":"etech"},"score":0,"creation_date":1669845599,"post_id":41149255,"comment_id":131738831,"body_markdown":"Only thing that worked for me. IntelliJ does not make this easy.","body":"Only thing that worked for me. IntelliJ does not make this easy."}],"tags":[],"owner":{"account_id":306132,"reputation":414,"user_id":616703,"display_name":"Will"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1481738838,"creation_date":1481738838,"answer_id":41149255,"question_id":41110256,"body_markdown":"I did this with Intellij IDEA 2016.3 on OS X.\r\n\r\nI am able to configure this under **Project Settings** -&gt; **Global Libraries**.\r\n\r\n1. Add a new global library  by clicking the `+` and select `Java`\r\n\r\n2. Navigate to the location `homebrew` installed Groovy, `/usr/local/Cellar/groovy/2.4.7` and select all the JAR files in the `libexec/lib` directory.\r\n\r\n3. Set the name to `groovy-2.4.7`, or whatever works for you.\r\n","title":"How do I tell IntelliJ about groovy installed with brew on OSX","body":"<p>I did this with Intellij IDEA 2016.3 on OS X.</p>\n\n<p>I am able to configure this under <strong>Project Settings</strong> -> <strong>Global Libraries</strong>.</p>\n\n<ol>\n<li><p>Add a new global library  by clicking the <code>+</code> and select <code>Java</code></p></li>\n<li><p>Navigate to the location <code>homebrew</code> installed Groovy, <code>/usr/local/Cellar/groovy/2.4.7</code> and select all the JAR files in the <code>libexec/lib</code> directory.</p></li>\n<li><p>Set the name to <code>groovy-2.4.7</code>, or whatever works for you.</p></li>\n</ol>\n"},{"comments":[{"owner":{"display_name":"user2964500"},"score":67,"creation_date":1501157002,"post_id":42952785,"comment_id":77661336,"body_markdown":"Use &lt;CMD&gt;&lt;shift&gt; &lt;.&gt; to see hidden directory tree in the Finder","body":"Use &lt;CMD&gt;&lt;shift&gt; &lt;.&gt; to see hidden directory tree in the Finder"},{"owner":{"account_id":1855835,"reputation":1651,"user_id":1681440,"display_name":"juice"},"score":3,"creation_date":1506805126,"post_id":42952785,"comment_id":79968329,"body_markdown":"That was so painful to figure out - thanks for posting this tip","body":"That was so painful to figure out - thanks for posting this tip"},{"owner":{"account_id":7719944,"reputation":1410,"user_id":5846481,"accept_rate":71,"display_name":"kindjacket"},"score":6,"creation_date":1520360990,"post_id":42952785,"comment_id":85280395,"body_markdown":"you also do cmd + g to navigate to a specific folder","body":"you also do cmd + g to navigate to a specific folder"},{"owner":{"account_id":86800,"reputation":1350,"user_id":241135,"accept_rate":100,"display_name":"Daniel Werner"},"score":0,"creation_date":1528122837,"post_id":42952785,"comment_id":88375638,"body_markdown":"IntelliJ 2018.1 doesn&#39;t report the installation as broken for me, even though GROOVY_HOME isn&#39;t set. Perhaps this has been fixed already.","body":"IntelliJ 2018.1 doesn&#39;t report the installation as broken for me, even though GROOVY_HOME isn&#39;t set. Perhaps this has been fixed already."},{"owner":{"account_id":4682835,"reputation":1519,"user_id":3791111,"accept_rate":0,"display_name":"user3791111"},"score":1,"creation_date":1545151575,"post_id":42952785,"comment_id":94523198,"body_markdown":"I managed to browse to this hidden folder (I had to press and hold these keys to make it work). Now Idea doesn&#39;t create any SDK, after I &quot;open&quot; that directory. What&#39;s wrong now?...","body":"I managed to browse to this hidden folder (I had to press and hold these keys to make it work). Now Idea doesn&#39;t create any SDK, after I &quot;open&quot; that directory. What&#39;s wrong now?..."},{"owner":{"account_id":10764,"reputation":34965,"user_id":20479,"accept_rate":17,"display_name":"Rhubarb"},"score":0,"creation_date":1580578553,"post_id":42952785,"comment_id":106146750,"body_markdown":"@kindjacket its CMD SHIFT g  (good tip though, wouldn&#39;t have tried it without having tried your advice first)","body":"@kindjacket its CMD SHIFT g  (good tip though, wouldn&#39;t have tried it without having tried your advice first)"},{"owner":{"account_id":10088218,"reputation":634,"user_id":7456022,"display_name":"Arman"},"score":2,"creation_date":1606211596,"post_id":42952785,"comment_id":114887549,"body_markdown":"GROOVY_HOME path should have groovysdk and not groovy, isn&#39;t it?","body":"GROOVY_HOME path should have groovysdk and not groovy, isn&#39;t it?"},{"owner":{"account_id":16704955,"reputation":423,"user_id":15407955,"display_name":"user124"},"score":1,"creation_date":1625360456,"post_id":42952785,"comment_id":120606626,"body_markdown":"why to remove groovy to install groovy sdk?","body":"why to remove groovy to install groovy sdk?"}],"tags":[],"owner":{"account_id":3449,"reputation":11830,"user_id":4979,"accept_rate":72,"display_name":"Omer van Kloeten"},"comment_count":8,"down_vote_count":0,"up_vote_count":144,"is_accepted":false,"score":144,"last_activity_date":1695331237,"creation_date":1490188640,"answer_id":42952785,"question_id":41110256,"body_markdown":"1. Install groovysdk:&lt;pre&gt;\r\n   brew remove groovy \r\n   brew install groovysdk&lt;/pre&gt;\r\n\r\n1. Set `GROOVY_HOME`, otherwise IntelliJ reports as broken installation:&lt;pre&gt;\r\n   export GROOVY_HOME=/usr/local/opt/groovy/libexec&lt;/pre&gt;\r\n\r\n1. Point IntelliJ to the installed directory, e.g.:&lt;pre&gt;\r\n   /usr/local/Cellar/groovysdk/2.4.7/libexec&lt;/pre&gt;","title":"How do I tell IntelliJ about groovy installed with brew on OSX","body":"<ol>\n<li><p>Install groovysdk:<pre>\nbrew remove groovy\nbrew install groovysdk</pre></p>\n</li>\n<li><p>Set <code>GROOVY_HOME</code>, otherwise IntelliJ reports as broken installation:<pre>\nexport GROOVY_HOME=/usr/local/opt/groovy/libexec</pre></p>\n</li>\n<li><p>Point IntelliJ to the installed directory, e.g.:<pre>\n/usr/local/Cellar/groovysdk/2.4.7/libexec</pre></p>\n</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2035516,"reputation":573,"user_id":1817963,"accept_rate":100,"display_name":"Troup"},"score":3,"creation_date":1520283070,"post_id":43695068,"comment_id":85243948,"body_markdown":"cmd + shift + . will show &quot;hidden&quot; folders such as /usr","body":"cmd + shift + . will show &quot;hidden&quot; folders such as /usr"},{"owner":{"account_id":6939954,"reputation":4193,"user_id":5326679,"accept_rate":89,"display_name":"xandermonkey"},"score":0,"creation_date":1585162445,"post_id":43695068,"comment_id":107669543,"body_markdown":"you can also open it via `open /path/to/folder` in terminal and then drag that folder to the favorites bar.","body":"you can also open it via <code>open &#47;path&#47;to&#47;folder</code> in terminal and then drag that folder to the favorites bar."}],"tags":[],"owner":{"account_id":1984827,"reputation":709,"user_id":2390967,"display_name":"Fusca Software"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493464996,"creation_date":1493464996,"answer_id":43695068,"question_id":41110256,"body_markdown":"Because I could not select /usr in the open dialog, I used to &#39;go to folder&#39; function of finder and created a favorite entry for /usr/local/opt/groovy/libexec\r\nwhich worked.","title":"How do I tell IntelliJ about groovy installed with brew on OSX","body":"<p>Because I could not select /usr in the open dialog, I used to 'go to folder' function of finder and created a favorite entry for /usr/local/opt/groovy/libexec\nwhich worked.</p>\n"},{"comments":[{"owner":{"account_id":4885169,"reputation":12610,"user_id":3937850,"display_name":"Jakub Kukul"},"score":0,"creation_date":1570619812,"post_id":46182040,"comment_id":102968109,"body_markdown":"I just tried with IntelliJ 2019.2.3 and `shift + command + g` wasn&#39;t needed.","body":"I just tried with IntelliJ 2019.2.3 and <code>shift + command + g</code> wasn&#39;t needed."},{"owner":{"account_id":1599692,"reputation":21034,"user_id":1480995,"accept_rate":84,"display_name":"Michael Oryl"},"score":1,"creation_date":1578059578,"post_id":46182040,"comment_id":105325743,"body_markdown":"This actually works with the 2019 versions of IntelliJ.  Nothing else posted here worked (or was specific enough).","body":"This actually works with the 2019 versions of IntelliJ.  Nothing else posted here worked (or was specific enough)."}],"tags":[],"owner":{"account_id":2975925,"reputation":2918,"user_id":2526975,"display_name":"f-society"},"comment_count":2,"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1695332512,"creation_date":1505236069,"answer_id":46182040,"question_id":41110256,"body_markdown":"    brew install groovysdk\r\n\r\n - Right-Click on Project Root Folder or if a Config Wizard Pops up at the top of your windows we can click that link.\r\n\r\n - Select **&quot;Add Framework Support&quot;**.  \r\n   NOTE: if you don&#39;t see it, just press &lt;kbd&gt;⌘ command&lt;/kbd&gt;&lt;kbd&gt;⇧ shift&lt;/kbd&gt;&lt;kbd&gt;a&lt;/kbd&gt; and type &quot;Add Framework Support&quot; (i.e. use the [&quot;Find Action&quot;][1] command).\r\n\r\n - Scroll down and select **Groovy**.\r\n\r\n   If it does not show in the list, it&#39;s because it already has the framework added.\r\n - If Groovy has not been added to IntellJ then select **Create...**\r\n\r\n - navigate to `/usr/local/Cellar/groovysdk/&lt;version&gt;/libexec/`.  \r\n   E.g: `/usr/local/Cellar/groovysdk/2.4.11/libexec/`\r\n\r\n**Gotcha:** if it shows the file browser, bit does not let you view your `/usr/local` file path, you need to press &lt;kbd&gt;⇧ shift&lt;/kbd&gt;&lt;kbd&gt;⌘ command&lt;/kbd&gt;&lt;kbd&gt;g&lt;/kbd&gt; to open a dialog where you can type the path of any folder that you want to open.\r\n\r\nDone.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/idea/guide/tutorials/presenting/find-action/","title":"How do I tell IntelliJ about groovy installed with brew on OSX","body":"<pre><code>brew install groovysdk\n</code></pre>\n<ul>\n<li><p>Right-Click on Project Root Folder or if a Config Wizard Pops up at the top of your windows we can click that link.</p>\n</li>\n<li><p>Select <strong>&quot;Add Framework Support&quot;</strong>.<br />\nNOTE: if you don't see it, just press <kbd>⌘ command</kbd><kbd>⇧ shift</kbd><kbd>a</kbd> and type &quot;Add Framework Support&quot; (i.e. use the <a href=\"https://www.jetbrains.com/idea/guide/tutorials/presenting/find-action/\" rel=\"nofollow noreferrer\">&quot;Find Action&quot;</a> command).</p>\n</li>\n<li><p>Scroll down and select <strong>Groovy</strong>.</p>\n<p>If it does not show in the list, it's because it already has the framework added.</p>\n</li>\n<li><p>If Groovy has not been added to IntellJ then select <strong>Create...</strong></p>\n</li>\n<li><p>navigate to <code>/usr/local/Cellar/groovysdk/&lt;version&gt;/libexec/</code>.<br />\nE.g: <code>/usr/local/Cellar/groovysdk/2.4.11/libexec/</code></p>\n</li>\n</ul>\n<p><strong>Gotcha:</strong> if it shows the file browser, bit does not let you view your <code>/usr/local</code> file path, you need to press <kbd>⇧ shift</kbd><kbd>⌘ command</kbd><kbd>g</kbd> to open a dialog where you can type the path of any folder that you want to open.</p>\n<p>Done.</p>\n"},{"comments":[{"owner":{"account_id":16704955,"reputation":423,"user_id":15407955,"display_name":"user124"},"score":0,"creation_date":1625360479,"post_id":55425977,"comment_id":120606631,"body_markdown":"there is no folder as groovysdk in Cellar?","body":"there is no folder as groovysdk in Cellar?"}],"tags":[],"owner":{"account_id":8150044,"reputation":455,"user_id":6137387,"display_name":"RB7"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1553896765,"creation_date":1553896765,"answer_id":55425977,"question_id":41110256,"body_markdown":"**It is very easy to do:**\r\n\r\n**Install groovy**:\r\n\r\n    brew install groovy\r\n\r\n**Point IntelliJ to the following directory:**\r\n\r\n    /usr/local/Cellar/groovysdk/&lt;version&gt;/libexec\r\n\r\nYou will see that intellij will get all the required dependencies\r\n\r\n","title":"How do I tell IntelliJ about groovy installed with brew on OSX","body":"<p><strong>It is very easy to do:</strong></p>\n\n<p><strong>Install groovy</strong>:</p>\n\n<pre><code>brew install groovy\n</code></pre>\n\n<p><strong>Point IntelliJ to the following directory:</strong></p>\n\n<pre><code>/usr/local/Cellar/groovysdk/&lt;version&gt;/libexec\n</code></pre>\n\n<p>You will see that intellij will get all the required dependencies</p>\n"}],"owner":{"account_id":105891,"reputation":14627,"user_id":282315,"accept_rate":82,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33747,"favorite_count":0,"down_vote_count":0,"up_vote_count":76,"answer_count":6,"score":76,"last_activity_date":1695332512,"creation_date":1481579516,"question_id":41110256,"body_markdown":"I&#39;m running: \r\n\r\n - IntelliJ Ultimate 2016.3\r\n - Homebrew 1.1.2\r\n - OS X 10.11.5 El Capitan \r\n\r\nI ran `brew install groovy` which resulted in groovy being installed in `/usr/local/Cellar/groovy/2.4.7/`. Brew also added a symlink: `/usr/local/bin/groovy -&gt; ../Cellar/groovy/2.4.7/bin/groovy`\r\n\r\n\r\nWhen I open the groovy project in IntelliJ, it gives me an option to Configure a Groovy SDK. I haven&#39;t set this up yet, so I get a &quot;Create&quot; button, which launches finder. From what I can tell there&#39;s nothing that I can select to make IntelliJ happy. I&#39;ve tried `/user/local/bin/groovy`, `/user/local/Cellar/groovy`, `/user/local/Cellar/groovy/2.4.7`, `/user/local/Cellar/groovy/2.4.7/bin` etc. No mater which I choose, IntelliJ doesn&#39;t accept the library and continues to tell me &quot;Error: library is not specified&quot;. \r\n\r\nDoes anyone know how I&#39;m supposed to go about telling IntelliJ where groovy is? ","title":"How do I tell IntelliJ about groovy installed with brew on OSX","body":"<p>I'm running: </p>\n\n<ul>\n<li>IntelliJ Ultimate 2016.3</li>\n<li>Homebrew 1.1.2</li>\n<li>OS X 10.11.5 El Capitan </li>\n</ul>\n\n<p>I ran <code>brew install groovy</code> which resulted in groovy being installed in <code>/usr/local/Cellar/groovy/2.4.7/</code>. Brew also added a symlink: <code>/usr/local/bin/groovy -&gt; ../Cellar/groovy/2.4.7/bin/groovy</code></p>\n\n<p>When I open the groovy project in IntelliJ, it gives me an option to Configure a Groovy SDK. I haven't set this up yet, so I get a \"Create\" button, which launches finder. From what I can tell there's nothing that I can select to make IntelliJ happy. I've tried <code>/user/local/bin/groovy</code>, <code>/user/local/Cellar/groovy</code>, <code>/user/local/Cellar/groovy/2.4.7</code>, <code>/user/local/Cellar/groovy/2.4.7/bin</code> etc. No mater which I choose, IntelliJ doesn't accept the library and continues to tell me \"Error: library is not specified\". </p>\n\n<p>Does anyone know how I'm supposed to go about telling IntelliJ where groovy is? </p>\n"},{"tags":["java","maven","ehcache","ehcache-3"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1695330804,"post_id":77153593,"comment_id":136013926,"body_markdown":"If you compile _modular_ java, with `module-info.java`, you need a `require` in it","body":"If you compile <i>modular</i> java, with <code>module-info.java</code>, you need a <code>require</code> in it"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":2,"creation_date":1695331832,"post_id":77153593,"comment_id":136014092,"body_markdown":"The dependency for you project should be under `&lt;dependencies&gt;` element not `&lt;dependencyManagement&gt;` get rid of it and test it out if that is what you have in your pom file.","body":"The dependency for you project should be under <code>&lt;dependencies&gt;</code> element not <code>&lt;dependencyManagement&gt;</code> get rid of it and test it out if that is what you have in your pom file."},{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":3,"creation_date":1695331991,"post_id":77153593,"comment_id":136014117,"body_markdown":"Does this answer your question? [Differences between dependencyManagement and dependencies in Maven](https://stackoverflow.com/questions/2619598/differences-between-dependencymanagement-and-dependencies-in-maven)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2619598/differences-between-dependencymanagement-and-dependencies-in-maven\">Differences between dependencyManagement and dependencies in Maven</a>"},{"owner":{"account_id":13022992,"reputation":204,"user_id":9411757,"display_name":"tehmas"},"score":0,"creation_date":1695332097,"post_id":77153593,"comment_id":136014132,"body_markdown":"@JorgeCampos Man... yes that was the issue. Thank you very much.","body":"@JorgeCampos Man... yes that was the issue. Thank you very much."}],"owner":{"account_id":13022992,"reputation":204,"user_id":9411757,"display_name":"tehmas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695331633,"creation_date":1695329542,"question_id":77153593,"body_markdown":"I&#39;m trying to use `echache` but I can&#39;t seem to use in my project. I&#39;m getting the following error:\r\n\r\n&quot;Cannot resolve symbol &#39;ehcache&#39;&quot;\r\n\r\nI&#39;m using IntelliJ IDEA and have installed `Maven 3.9.4`. I&#39;ve tried `mvn clean install` and `mvn dependency:resolve`. After spending around 6+ hours on this, I&#39;m not sure what step to follow now.\r\n\r\n\r\nMain.java file:\r\n\r\n    package org.example;\r\n    \r\n    import org.ehcache.*;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello world!&quot;);\r\n        }\r\n    }\r\n\r\npom.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;demo3&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.3&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n    &lt;/project&gt;\r\n\r\nmvn clean install output:\r\n\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] -------------------------&lt; org.example:demo3 &gt;--------------------------\r\n    [INFO] Building demo3 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ demo3 ---\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ demo3 ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Copying 0 resource\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ demo3 ---\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 1 source file to /Users/asad-raheem/Documents/workspace/demo3/target/classes\r\n    [INFO] -------------------------------------------------------------\r\n    [ERROR] COMPILATION ERROR : \r\n    [INFO] -------------------------------------------------------------\r\n    [ERROR] /Users/asad-raheem/Documents/workspace/demo3/src/main/java/org/example/Main.java:[3,1] package org.ehcache does not exist\r\n    [INFO] 1 error\r\n    [INFO] -------------------------------------------------------------\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  0.634 s\r\n    [INFO] Finished at: 2023-09-22T02:23:00+05:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project demo3: Compilation failure\r\n    [ERROR] /Users/asad-raheem/Documents/workspace/demo3/src/main/java/org/example/Main.java:[3,1] package org.ehcache does not exist\r\n    [ERROR] \r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n    \r\n    Process finished with exit code 1","title":"Not able to use org.ehcache in project","body":"<p>I'm trying to use <code>echache</code> but I can't seem to use in my project. I'm getting the following error:</p>\n<p>&quot;Cannot resolve symbol 'ehcache'&quot;</p>\n<p>I'm using IntelliJ IDEA and have installed <code>Maven 3.9.4</code>. I've tried <code>mvn clean install</code> and <code>mvn dependency:resolve</code>. After spending around 6+ hours on this, I'm not sure what step to follow now.</p>\n<p>Main.java file:</p>\n<pre><code>package org.example;\n\nimport org.ehcache.*;\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello world!&quot;);\n    }\n}\n</code></pre>\n<p>pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo3&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n                &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n                &lt;version&gt;3.1.3&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n&lt;/project&gt;\n</code></pre>\n<p>mvn clean install output:</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] -------------------------&lt; org.example:demo3 &gt;--------------------------\n[INFO] Building demo3 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ demo3 ---\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ demo3 ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ demo3 ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 1 source file to /Users/asad-raheem/Documents/workspace/demo3/target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] /Users/asad-raheem/Documents/workspace/demo3/src/main/java/org/example/Main.java:[3,1] package org.ehcache does not exist\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.634 s\n[INFO] Finished at: 2023-09-22T02:23:00+05:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project demo3: Compilation failure\n[ERROR] /Users/asad-raheem/Documents/workspace/demo3/src/main/java/org/example/Main.java:[3,1] package org.ehcache does not exist\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","string","pdf","replace","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1624039457,"post_id":68037448,"comment_id":120257996,"body_markdown":"The text stripper merely gives you an independent string representing the text PDFBox could recognized. You cannot change the PDF by manipulating that string (and strictly speaking you don&#39;t even manipulate that string but create a new, again independent string...).","body":"The text stripper merely gives you an independent string representing the text PDFBox could recognized. You cannot change the PDF by manipulating that string (and strictly speaking you don&#39;t even manipulate that string but create a new, again independent string...)."},{"owner":{"account_id":17458558,"reputation":3,"user_id":12656778,"display_name":"Fl00der"},"score":0,"creation_date":1624046699,"post_id":68037448,"comment_id":120260213,"body_markdown":"Then how should I approach this problem, if the text stripper is not the thing I&#39;m looking for?","body":"Then how should I approach this problem, if the text stripper is not the thing I&#39;m looking for?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1624083345,"post_id":68037448,"comment_id":120265881,"body_markdown":"First of all, PDF is not designed for replacing text pieces in a search and replace manner, see [this answer](https://stackoverflow.com/a/60655298/1729265). Thus, you should reconsider the architecture of your task. Alternatives might be using pdfs with form fields to fill in, or doing search and replace in another, more suitable format and only thereafter exporting to pdf.","body":"First of all, PDF is not designed for replacing text pieces in a search and replace manner, see <a href=\"https://stackoverflow.com/a/60655298/1729265\">this answer</a>. Thus, you should reconsider the architecture of your task. Alternatives might be using pdfs with form fields to fill in, or doing search and replace in another, more suitable format and only thereafter exporting to pdf."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1624084066,"post_id":68037448,"comment_id":120266007,"body_markdown":"If you really cannot avoid having to search and replace text in pdfs, then there are two cases: 1. Your pdf is internally built in a very simple way, avoiding all the pitfalls mentioned in the answer referred to above. In this case you can do text replacement in content streams. 2. Otherwise you&#39;ll essentially have to apply redaction to the pdf to remove the text to replace and add new text there.","body":"If you really cannot avoid having to search and replace text in pdfs, then there are two cases: 1. Your pdf is internally built in a very simple way, avoiding all the pitfalls mentioned in the answer referred to above. In this case you can do text replacement in content streams. 2. Otherwise you&#39;ll essentially have to apply redaction to the pdf to remove the text to replace and add new text there."},{"owner":{"account_id":17458558,"reputation":3,"user_id":12656778,"display_name":"Fl00der"},"score":0,"creation_date":1624189843,"post_id":68037448,"comment_id":120285408,"body_markdown":"In your opinion, this text stripper option should be used for a pdf with fill forms, or is there another way to do it? I checked out the API documentation a few times, but I couldn&#39;t find anything related to my issue.","body":"In your opinion, this text stripper option should be used for a pdf with fill forms, or is there another way to do it? I checked out the API documentation a few times, but I couldn&#39;t find anything related to my issue."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1624196920,"post_id":68037448,"comment_id":120287069,"body_markdown":"The text stripper is for text extraction. If you extend it a bit, for extraction of text with position or with some style information. It is not for text changing. For form field fill-ins look for `PDAcroForm` use in the API and the examples.","body":"The text stripper is for text extraction. If you extend it a bit, for extraction of text with position or with some style information. It is not for text changing. For form field fill-ins look for <code>PDAcroForm</code> use in the API and the examples."}],"answers":[{"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1695362094,"post_id":77153405,"comment_id":136016712,"body_markdown":"The OP wanted to eventually have a PDF with the text replaced, not only is extracted text.","body":"The OP wanted to eventually have a PDF with the text replaced, not only is extracted text."}],"tags":[],"owner":{"account_id":29124356,"reputation":1,"user_id":22311037,"display_name":"sweetcookitalys"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695327599,"creation_date":1695327599,"answer_id":77153405,"question_id":68037448,"body_markdown":" **If I understand correctly, you want to edit a sentence in the PDF**\r\n\r\n&gt;        PDDocument doc = PDDocument.load(file);\r\n\t\t\t\r\n    \t          stripper = new PDFTextStripper();\r\n\t\t\t\t\t\r\n    \t          String text = stripper.getText(doc);\r\n    \t          Pattern pattern = Pattern.compile(&quot;\\\\bluca\\\\b&quot;);\r\n    \t          Matcher matcher = pattern.matcher(text);\r\n    \t            \r\n\r\n    \t matcher.find();\r\n    \t              String group = matcher.group();\r\n    \t              int start = matcher.start();\r\n    \t              int end = matcher.end();\r\n    \t    String hj=  matcher.\treplaceFirst(&quot;Carlone&quot;);\r\n    \t          System.out.println(group + &quot; &quot; + start + &quot; &quot; + end+hj);\r\n\r\n    \t     ","title":"How to save a string into PDF in PDFBox?","body":"<p><strong>If I understand correctly, you want to edit a sentence in the PDF</strong></p>\n<blockquote>\n<pre><code>   PDDocument doc = PDDocument.load(file);\n</code></pre>\n</blockquote>\n<pre><code>              stripper = new PDFTextStripper();\n                \n              String text = stripper.getText(doc);\n              Pattern pattern = Pattern.compile(&quot;\\\\bluca\\\\b&quot;);\n              Matcher matcher = pattern.matcher(text);\n                \n\n     matcher.find();\n                  String group = matcher.group();\n                  int start = matcher.start();\n                  int end = matcher.end();\n        String hj=  matcher.    replaceFirst(&quot;Carlone&quot;);\n              System.out.println(group + &quot; &quot; + start + &quot; &quot; + end+hj);\n\n         \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695361953,"post_id":77153719,"comment_id":136016694,"body_markdown":"*&quot;Here you would ideally re-add all the previous content (this example won&#39;t cover that)&quot;* - but adding the previous content (except the `nameReplace` occurrence) in general is the only non-trivial part of your approach...","body":"<i>&quot;Here you would ideally re-add all the previous content (this example won&#39;t cover that)&quot;</i> - but adding the previous content (except the <code>nameReplace</code> occurrence) in general is the only non-trivial part of your approach..."}],"tags":[],"owner":{"account_id":7313335,"reputation":4794,"user_id":5571795,"display_name":"Hezy Ziv"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695331338,"creation_date":1695331338,"answer_id":77153719,"question_id":68037448,"body_markdown":"try this\r\n\r\n    public static void main(String[] args) {\r\n            String fileName = &quot;testPDF.pdf&quot;;\r\n            \r\n            try {\r\n                PDDocument doc = PDDocument.load(new File(&quot;sample.pdf&quot;));\r\n                String text = new PDFTextStripper().getText(doc);\r\n    \r\n                // Assuming the text you want to replace is on the first page\r\n                PDPage page = doc.getPage(0);\r\n                \r\n                if (text.contains(&quot;nameReplace&quot;)) {\r\n                    // Remove the content of the first page\r\n                    page.setContents(null);\r\n                    \r\n                    try (PDPageContentStream contentStream = new PDPageContentStream(doc, page, PDPageContentStream.AppendMode.APPEND, true)) {\r\n                        // Here you would ideally re-add all the previous content (this example won&#39;t cover that)\r\n                        \r\n                        // Add replaced text (for simplicity, this example assumes the text fits in the given position)\r\n                        contentStream.beginText();\r\n                        contentStream.setFont(PDType1Font.HELVETICA_BOLD, 12);\r\n                        contentStream.newLineAtOffset(100, 700);\r\n                        contentStream.showText(text.replace(&quot;nameReplace&quot;, &quot;Example Ethan&quot;));\r\n                        contentStream.endText();\r\n                    }\r\n                }\r\n    \r\n                doc.save(fileName);\r\n                doc.close();\r\n    \r\n            } catch (IOException e) {\r\n                System.out.println(e.getMessage());\r\n            }\r\n        }\r\n\r\n","title":"How to save a string into PDF in PDFBox?","body":"<p>try this</p>\n<pre><code>public static void main(String[] args) {\n        String fileName = &quot;testPDF.pdf&quot;;\n        \n        try {\n            PDDocument doc = PDDocument.load(new File(&quot;sample.pdf&quot;));\n            String text = new PDFTextStripper().getText(doc);\n\n            // Assuming the text you want to replace is on the first page\n            PDPage page = doc.getPage(0);\n            \n            if (text.contains(&quot;nameReplace&quot;)) {\n                // Remove the content of the first page\n                page.setContents(null);\n                \n                try (PDPageContentStream contentStream = new PDPageContentStream(doc, page, PDPageContentStream.AppendMode.APPEND, true)) {\n                    // Here you would ideally re-add all the previous content (this example won't cover that)\n                    \n                    // Add replaced text (for simplicity, this example assumes the text fits in the given position)\n                    contentStream.beginText();\n                    contentStream.setFont(PDType1Font.HELVETICA_BOLD, 12);\n                    contentStream.newLineAtOffset(100, 700);\n                    contentStream.showText(text.replace(&quot;nameReplace&quot;, &quot;Example Ethan&quot;));\n                    contentStream.endText();\n                }\n            }\n\n            doc.save(fileName);\n            doc.close();\n\n        } catch (IOException e) {\n            System.out.println(e.getMessage());\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":17458558,"reputation":3,"user_id":12656778,"display_name":"Fl00der"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":482,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695331338,"creation_date":1624028523,"question_id":68037448,"body_markdown":"I&#39;m currently working with PDFBox to create a PDF where the necessary spots are filled with the correct information. I have my string in the project, but for some reason, I cannot put that string into a pdf file with the `doc.save();` functionality.\r\n\r\nIs there any way to do such things, or should I approach this problem with a different manner?\r\n```java\r\npublic static void main(String[] args) {\r\n        String fileName = &quot;testPDF.pdf&quot;;\r\n        \r\n        try{\r\n            PDDocument doc = PDDocument.load(new File(&quot;sample.pdf&quot;));\r\n            String text = new PDFTextStripper().getText(doc);\r\n\r\n            String name = text.replace(&quot;nameReplace&quot;, &quot;Example Ethan&quot;);\r\n            \r\n            doc.save(fileName);\r\n            doc.close();\r\n\r\n        }\r\n        catch(IOException e){\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }","title":"How to save a string into PDF in PDFBox?","body":"<p>I'm currently working with PDFBox to create a PDF where the necessary spots are filled with the correct information. I have my string in the project, but for some reason, I cannot put that string into a pdf file with the <code>doc.save();</code> functionality.</p>\n<p>Is there any way to do such things, or should I approach this problem with a different manner?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n        String fileName = &quot;testPDF.pdf&quot;;\n        \n        try{\n            PDDocument doc = PDDocument.load(new File(&quot;sample.pdf&quot;));\n            String text = new PDFTextStripper().getText(doc);\n\n            String name = text.replace(&quot;nameReplace&quot;, &quot;Example Ethan&quot;);\n            \n            doc.save(fileName);\n            doc.close();\n\n        }\n        catch(IOException e){\n            System.out.println(e.getMessage());\n        }\n    }\n</code></pre>\n"},{"tags":["java","kotlin","swing"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1695336656,"post_id":77153718,"comment_id":136014649,"body_markdown":"Maybe test with [this?](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Files.html#isRegularFile(java.nio.file.Path,java.nio.file.LinkOption...))","body":"Maybe test with <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Files.html#isRegularFile(java.nio.file.Path,java.nio.file.LinkOption...)\" rel=\"nofollow noreferrer\">this?</a>"}],"owner":{"account_id":13446245,"reputation":154,"user_id":9702105,"display_name":"Josh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695331308,"creation_date":1695331308,"question_id":77153718,"body_markdown":"JDK 17.0.3 - Azul Zulu\r\n\r\nI have a custom FileFilter class which extends the java classes of `javax.swing.filechooser.FileFilter` and `java.io.FileFilter`. (All code is in Kotlin)\r\n\r\nThe `accept()` method is overridden and overloaded with these two functions:\r\n```\r\nclass MyCustomFileFilter(\r\n    /* Irrelevant constructor parameters */\r\n    private val predicate: (path: Path) -&gt; Boolean, // function to pass to the constructor\r\n) : SwingFileFilter(), FileFilter {\r\n\r\n    fun accept(path: Path): Boolean {\r\n        return path.isDirectory() || predicate(path)\r\n    }\r\n\r\n    override fun accept(file: File): Boolean = accept(file.toPath())\r\n}\r\n```\r\n\r\nAnd the `JFileChooser` is instantiated with an instance of my `FileFilter` class.\r\n\r\n```\r\nprivate val fileChooser = JFileChooser(HomeLocation.currentValue.toFile()).apply {\r\n    isMultiSelectionEnabled = true\r\n    fileFilter = some.object.path.to.filter // filter is an instance of MyCustomFileFilter\r\n}\r\n```\r\n\r\nWhen navigating to the &quot;Desktop&quot; in the file chooser (Windows 10), this error is thrown:\r\n```\r\nException in thread &quot;Basic L&amp;F File Loading Thread&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index 0: ::{20D04FE0-3AEA-1069-A2D8-08002B30309D}\r\n\tat java.base/sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)\r\n\tat java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)\r\n\tat java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)\r\n\tat java.base/sun.nio.fs.WindowsPath.parse(WindowsPath.java:92)\r\n\tat java.base/sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:232)\r\n\tat java.base/java.io.File.toPath(File.java:2387)\r\n\tat fully.qualified.classname.of.MyCustomFileFilter.accept(MyCustomFileFilter.kt:43)\r\n\tat java.desktop/javax.swing.JFileChooser.accept(JFileChooser.java:1654)\r\n\tat java.desktop/javax.swing.plaf.basic.BasicDirectoryModel$FilesLoader.run0(BasicDirectoryModel.java:319)\r\n\tat java.desktop/javax.swing.plaf.basic.BasicDirectoryModel$FilesLoader.run(BasicDirectoryModel.java:295)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nAfter some debugging, it appears that the file chooser, when browsing the Desktop folder and deciding which files should appear based on the filter, is giving the file object of the &quot;This PC&quot; folder to the accept method. My implementation calls `toPath()` on the `File` and that is when the error happens, because apprently the path string resolves to `::{20D04FE0-3AEA-1069-A2D8-08002B30309D}`.\r\n\r\nAm I doing something wrong or in bad practice by using the `toPath()` function, or is the implementation broken somewhere? Is this a known issue?\r\n\r\nNote: I do have a workaround for this problem (which is to not use the `Paths` library, and stick to files) but I would like to know what is going wrong here and why it is happening, or perhaps if there is an open issue for it somehwere.","title":"InvalidPathException when browsing to &quot;Desktop&quot; in JFileChooser with custom FileFilter on Windows","body":"<p>JDK 17.0.3 - Azul Zulu</p>\n<p>I have a custom FileFilter class which extends the java classes of <code>javax.swing.filechooser.FileFilter</code> and <code>java.io.FileFilter</code>. (All code is in Kotlin)</p>\n<p>The <code>accept()</code> method is overridden and overloaded with these two functions:</p>\n<pre><code>class MyCustomFileFilter(\n    /* Irrelevant constructor parameters */\n    private val predicate: (path: Path) -&gt; Boolean, // function to pass to the constructor\n) : SwingFileFilter(), FileFilter {\n\n    fun accept(path: Path): Boolean {\n        return path.isDirectory() || predicate(path)\n    }\n\n    override fun accept(file: File): Boolean = accept(file.toPath())\n}\n</code></pre>\n<p>And the <code>JFileChooser</code> is instantiated with an instance of my <code>FileFilter</code> class.</p>\n<pre><code>private val fileChooser = JFileChooser(HomeLocation.currentValue.toFile()).apply {\n    isMultiSelectionEnabled = true\n    fileFilter = some.object.path.to.filter // filter is an instance of MyCustomFileFilter\n}\n</code></pre>\n<p>When navigating to the &quot;Desktop&quot; in the file chooser (Windows 10), this error is thrown:</p>\n<pre><code>Exception in thread &quot;Basic L&amp;F File Loading Thread&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index 0: ::{20D04FE0-3AEA-1069-A2D8-08002B30309D}\n    at java.base/sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)\n    at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)\n    at java.base/sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)\n    at java.base/sun.nio.fs.WindowsPath.parse(WindowsPath.java:92)\n    at java.base/sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:232)\n    at java.base/java.io.File.toPath(File.java:2387)\n    at fully.qualified.classname.of.MyCustomFileFilter.accept(MyCustomFileFilter.kt:43)\n    at java.desktop/javax.swing.JFileChooser.accept(JFileChooser.java:1654)\n    at java.desktop/javax.swing.plaf.basic.BasicDirectoryModel$FilesLoader.run0(BasicDirectoryModel.java:319)\n    at java.desktop/javax.swing.plaf.basic.BasicDirectoryModel$FilesLoader.run(BasicDirectoryModel.java:295)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>After some debugging, it appears that the file chooser, when browsing the Desktop folder and deciding which files should appear based on the filter, is giving the file object of the &quot;This PC&quot; folder to the accept method. My implementation calls <code>toPath()</code> on the <code>File</code> and that is when the error happens, because apprently the path string resolves to <code>::{20D04FE0-3AEA-1069-A2D8-08002B30309D}</code>.</p>\n<p>Am I doing something wrong or in bad practice by using the <code>toPath()</code> function, or is the implementation broken somewhere? Is this a known issue?</p>\n<p>Note: I do have a workaround for this problem (which is to not use the <code>Paths</code> library, and stick to files) but I would like to know what is going wrong here and why it is happening, or perhaps if there is an open issue for it somehwere.</p>\n"},{"tags":["java","reactive-programming","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":1126254,"reputation":27393,"user_id":1113486,"display_name":"Simon Basl&#233;"},"score":2,"creation_date":1609922713,"post_id":65572611,"comment_id":115969554,"body_markdown":"are you aware that `doFinally` triggers on upstream onComplete/onError signals _but also on downstream `cancel()` signal_? if so, there isn&#39;t an operator that delays the cancel signal propagation. if you&#39;re only interested in onComplete|onError, then your approach is the recommended one.","body":"are you aware that <code>doFinally</code> triggers on upstream onComplete/onError signals <i>but also on downstream <code>cancel()</code> signal</i>? if so, there isn&#39;t an operator that delays the cancel signal propagation. if you&#39;re only interested in onComplete|onError, then your approach is the recommended one."}],"answers":[{"tags":[],"owner":{"account_id":28957730,"reputation":49,"user_id":22180933,"display_name":"RonVe"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695330641,"creation_date":1695330641,"answer_id":77153668,"question_id":65572611,"body_markdown":"`doOnTerminate()` will execute the side-effect before termination.\r\nIt does not get the Mono value.\r\n\r\n`doOnNext()` will only be called with the value of the Mono, but not on error/cancel.\r\n\r\n`tap()` Can be used to capture all possible signals and take an action when appropriate.\r\n\r\n`doFinally()` executes after the Mono terminates.","title":"Project reactor: Is there a non-side-effect finally like method (Not the side-effect method doFinally)","body":"<p><code>doOnTerminate()</code> will execute the side-effect before termination.\nIt does not get the Mono value.</p>\n<p><code>doOnNext()</code> will only be called with the value of the Mono, but not on error/cancel.</p>\n<p><code>tap()</code> Can be used to capture all possible signals and take an action when appropriate.</p>\n<p><code>doFinally()</code> executes after the Mono terminates.</p>\n"}],"owner":{"account_id":4844268,"reputation":1484,"user_id":3908406,"display_name":"user3908406"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2222,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1695330641,"creation_date":1609815326,"question_id":65572611,"body_markdown":"Given such an example:\r\n```\r\nMono.create(callback -&gt; {\r\n    try { callback.success(someLogic()); }\r\n    catch (Exception e) { callback.error(e); }\r\n   })\r\n   .doFinally((v) -&gt; Mono.fromRunnable(() -&gt; {\r\n       Thread.sleep(1000); // In reality, we have a blocking I/O code here and needs to be executed on a separate thread \r\n   }).block())\r\n   .block();\r\n```\r\n\r\nWhen I run this code, it finishes immediately without waiting for the 1000ms delay. This is because `doFinally` is a side effect method, so it does not execute as part of the chain. Is there a finally like method that can execute as part of the chain? \r\n\r\nMy current workaround is\r\n\r\n```\r\nMono.create(callback -&gt; {\r\n    try { callback.success(someLogic()); }\r\n    catch (Exception e) { callback.error(e); }\r\n   })\r\n   .then(Mono.fromRunnable(() -&gt; {\r\n       Thread.sleep(1000);\r\n   }))\r\n   .onErrorResume(e -&gt; Mono.fromRunnable(() -&gt; {\r\n       Thread.sleep(1000);\r\n   }))\r\n   .block();\r\n```\r\n\r\nIf no such method is there a better approach?","title":"Project reactor: Is there a non-side-effect finally like method (Not the side-effect method doFinally)","body":"<p>Given such an example:</p>\n<pre><code>Mono.create(callback -&gt; {\n    try { callback.success(someLogic()); }\n    catch (Exception e) { callback.error(e); }\n   })\n   .doFinally((v) -&gt; Mono.fromRunnable(() -&gt; {\n       Thread.sleep(1000); // In reality, we have a blocking I/O code here and needs to be executed on a separate thread \n   }).block())\n   .block();\n</code></pre>\n<p>When I run this code, it finishes immediately without waiting for the 1000ms delay. This is because <code>doFinally</code> is a side effect method, so it does not execute as part of the chain. Is there a finally like method that can execute as part of the chain?</p>\n<p>My current workaround is</p>\n<pre><code>Mono.create(callback -&gt; {\n    try { callback.success(someLogic()); }\n    catch (Exception e) { callback.error(e); }\n   })\n   .then(Mono.fromRunnable(() -&gt; {\n       Thread.sleep(1000);\n   }))\n   .onErrorResume(e -&gt; Mono.fromRunnable(() -&gt; {\n       Thread.sleep(1000);\n   }))\n   .block();\n</code></pre>\n<p>If no such method is there a better approach?</p>\n"},{"tags":["java","selenium-webdriver","junit","jmeter","load-testing"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695421173,"post_id":77153183,"comment_id":136027229,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695326313,"creation_date":1695326313,"answer_id":77153294,"question_id":77153183,"body_markdown":"Given you&#39;re testing a web application you should rather go for [Apache JMeter][1]\r\n\r\nloadtest4j is a very simple tool which &quot;hammers&quot; the URL while modern web applications are way more &quot;complex&quot; so you will need to take care of:\r\n\r\n - [Embedded resources][2] (images, scripts, styles, fonts, etc.)\r\n - [Caching][3] of these resources  \r\n - Handling [cookies][4] and other [headers][5] \r\n - Handling [AJAX][6] requests \r\n\r\nSo JMeter would be way more &quot;future-proof&quot; solution \r\n\r\n\r\n  [1]: https://jmeter.apache.org/\r\n  [2]: https://www.blazemeter.com/blog/web-testing-jmeter\r\n  [3]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching\r\n  [4]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\r\n  [5]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers\r\n  [6]: https://www.w3schools.com/js/js_ajax_intro.asp","title":"how to perform load tests using a java framework?","body":"<p>Given you're testing a web application you should rather go for <a href=\"https://jmeter.apache.org/\" rel=\"nofollow noreferrer\">Apache JMeter</a></p>\n<p>loadtest4j is a very simple tool which &quot;hammers&quot; the URL while modern web applications are way more &quot;complex&quot; so you will need to take care of:</p>\n<ul>\n<li><a href=\"https://www.blazemeter.com/blog/web-testing-jmeter\" rel=\"nofollow noreferrer\">Embedded resources</a> (images, scripts, styles, fonts, etc.)</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching\" rel=\"nofollow noreferrer\">Caching</a> of these resources</li>\n<li>Handling <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\" rel=\"nofollow noreferrer\">cookies</a> and other <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers\" rel=\"nofollow noreferrer\">headers</a></li>\n<li>Handling <a href=\"https://www.w3schools.com/js/js_ajax_intro.asp\" rel=\"nofollow noreferrer\">AJAX</a> requests</li>\n</ul>\n<p>So JMeter would be way more &quot;future-proof&quot; solution</p>\n"}],"owner":{"account_id":13271282,"reputation":1,"user_id":9582238,"display_name":"Calin_m"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695330277,"creation_date":1695325137,"question_id":77153183,"body_markdown":"I&#39;m using Serenity Bdd (based on Selenium WebDriver) framework to test UI of an app. We need some load testing to be done as well.\r\nDo you guys have any suggestions regarding best practices or any tips? I&#39;ve seen that Jmeter and loadtest4j libraries can be integrated by adding the dependency to the pom.xml file and using imports.\r\nA basic scenario would be to see if an endpoint can handle 100 or 1000 connections at once.\r\nthank you for any input \r\n\r\ntried to import Jmeter and loadtest4j but not sure which one will be more useful in the future when complexity increases, using java 17, on a Windows 10 environment with Eclipse ","title":"how to perform load tests using a java framework?","body":"<p>I'm using Serenity Bdd (based on Selenium WebDriver) framework to test UI of an app. We need some load testing to be done as well.\nDo you guys have any suggestions regarding best practices or any tips? I've seen that Jmeter and loadtest4j libraries can be integrated by adding the dependency to the pom.xml file and using imports.\nA basic scenario would be to see if an endpoint can handle 100 or 1000 connections at once.\nthank you for any input</p>\n<p>tried to import Jmeter and loadtest4j but not sure which one will be more useful in the future when complexity increases, using java 17, on a Windows 10 environment with Eclipse</p>\n"},{"tags":["java","typescript","spring-boot","cors","vercel"],"comments":[{"owner":{"account_id":16673497,"reputation":2011,"user_id":12050506,"display_name":"possum"},"score":0,"creation_date":1695329494,"post_id":77153545,"comment_id":136013744,"body_markdown":"Why is &quot;Can someone help me?&quot; not an actual question? https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question","body":"Why is &quot;Can someone help me?&quot; not an actual question? <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\" title=\"why is can someone help me not an actual question\">meta.stackoverflow.com/questions/284236/&hellip;</a>"},{"owner":{"account_id":17683470,"reputation":158,"user_id":12836822,"display_name":"Ashrik Ahamed"},"score":0,"creation_date":1695359100,"post_id":77153545,"comment_id":136016424,"body_markdown":"Did you use @CrossOrigin(origins = { &quot;*&quot; }) as controller class  annotation?","body":"Did you use @CrossOrigin(origins = { &quot;*&quot; }) as controller class  annotation?"}],"owner":{"account_id":27308220,"reputation":1,"user_id":20823838,"display_name":"Gustavo Nepomuceno"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695329747,"creation_date":1695328970,"question_id":77153545,"body_markdown":"I&#39;m having problems with cors with my spring java API, I deployed it to render but when I try to consume it it gives a CORS error even though I passed the domain from my frontend to the backend to allow access.\r\n\r\napplication.properties\r\n```\r\ncors.origins=${CORS_ORIGINS:https://ds-commerce-v1.netlify.app}\r\n```\r\nthe error:\r\n(ds-commerce-v1.netlify.app/:1 Access to XMLHttpRequest at &#39;https://api-dsecommerce.onrender.com/products?page=0&amp;name=&amp;size=12&amp;sort=name&#39; from origin &#39;https://ds-commerce-v1.netlify.app&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.*\r\n\r\nI passed the environment variables in the frontend deploy to match my api address but it seems like something is wrong and it is not accepting the req at that frontend address.\r\n\r\n\r\n\r\n\r\nThis is the code for CORS in my api but idkn where the problem is\r\n```\r\n@Configuration\r\n@EnableResourceServer\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class ResourceServerConfig extends ResourceServerConfigurerAdapter {\r\n\r\n\t@Value(&quot;${cors.origins}&quot;)\r\n\tprivate String corsOrigins;\r\n\t\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\t\r\n\t@Autowired\r\n\tprivate JwtTokenStore tokenStore;\r\n\t\r\n\t@Override\r\n\tpublic void configure(ResourceServerSecurityConfigurer resources) throws Exception {\r\n\t\tresources.tokenStore(tokenStore);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void configure(HttpSecurity http) throws Exception {\r\n\r\n\t\t// H2\r\n\t\tif (Arrays.asList(env.getActiveProfiles()).contains(&quot;test&quot;)) {\r\n\t\t\thttp.headers().frameOptions().disable();\r\n\t\t}\r\n\t\t\r\n\t\thttp.authorizeRequests().anyRequest().permitAll();\r\n\t\t\r\n\t\thttp.cors().configurationSource(corsConfigurationSource());\r\n\t}\r\n\t\r\n\t@Bean\r\n\tCorsConfigurationSource corsConfigurationSource() {\r\n\r\n\t\tString[] origins = corsOrigins.split(&quot;,&quot;);\r\n\r\n\t    CorsConfiguration corsConfig = new CorsConfiguration();\r\n\t    corsConfig.setAllowedOriginPatterns(Arrays.asList(origins));\r\n\t    corsConfig.setAllowedMethods(Arrays.asList(&quot;POST&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\r\n\t    corsConfig.setAllowCredentials(true);\r\n\t    corsConfig.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-Type&quot;));\r\n\t \r\n\t    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n\t    source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\r\n\t    return source;\r\n\t}\r\n\r\n\t@Bean\r\n\tFilterRegistrationBean&lt;CorsFilter&gt; corsFilter() {\r\n\t    FilterRegistrationBean&lt;CorsFilter&gt; bean\r\n\t            = new FilterRegistrationBean&lt;&gt;(new CorsFilter(corsConfigurationSource()));\r\n\t    bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n\t    return bean;\r\n\t}\r\n}\r\n```\r\n","title":"How do I get rid of this problem blocked by CORS policy (with java spring boot)?","body":"<p>I'm having problems with cors with my spring java API, I deployed it to render but when I try to consume it it gives a CORS error even though I passed the domain from my frontend to the backend to allow access.</p>\n<p>application.properties</p>\n<pre><code>cors.origins=${CORS_ORIGINS:https://ds-commerce-v1.netlify.app}\n</code></pre>\n<p>the error:\n(ds-commerce-v1.netlify.app/:1 Access to XMLHttpRequest at 'https://api-dsecommerce.onrender.com/products?page=0&amp;name=&amp;size=12&amp;sort=name' from origin 'https://ds-commerce-v1.netlify.app' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.*</p>\n<p>I passed the environment variables in the frontend deploy to match my api address but it seems like something is wrong and it is not accepting the req at that frontend address.</p>\n<p>This is the code for CORS in my api but idkn where the problem is</p>\n<pre><code>@Configuration\n@EnableResourceServer\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class ResourceServerConfig extends ResourceServerConfigurerAdapter {\n\n    @Value(&quot;${cors.origins}&quot;)\n    private String corsOrigins;\n    \n    @Autowired\n    private Environment env;\n    \n    @Autowired\n    private JwtTokenStore tokenStore;\n    \n    @Override\n    public void configure(ResourceServerSecurityConfigurer resources) throws Exception {\n        resources.tokenStore(tokenStore);\n    }\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n\n        // H2\n        if (Arrays.asList(env.getActiveProfiles()).contains(&quot;test&quot;)) {\n            http.headers().frameOptions().disable();\n        }\n        \n        http.authorizeRequests().anyRequest().permitAll();\n        \n        http.cors().configurationSource(corsConfigurationSource());\n    }\n    \n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n\n        String[] origins = corsOrigins.split(&quot;,&quot;);\n\n        CorsConfiguration corsConfig = new CorsConfiguration();\n        corsConfig.setAllowedOriginPatterns(Arrays.asList(origins));\n        corsConfig.setAllowedMethods(Arrays.asList(&quot;POST&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\n        corsConfig.setAllowCredentials(true);\n        corsConfig.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-Type&quot;));\n     \n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);\n        return source;\n    }\n\n    @Bean\n    FilterRegistrationBean&lt;CorsFilter&gt; corsFilter() {\n        FilterRegistrationBean&lt;CorsFilter&gt; bean\n                = new FilterRegistrationBean&lt;&gt;(new CorsFilter(corsConfigurationSource()));\n        bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n        return bean;\n    }\n}\n</code></pre>\n"},{"tags":["java","java-8","mockito"],"answers":[{"tags":[],"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695326151,"creation_date":1695326151,"answer_id":77153273,"question_id":77153047,"body_markdown":"You can use `doAnswer` in order to print the parameters the way you&#39;re expecting. It will allow you to access the parameters of the mocked method by using `getArgument(int i)` method.\r\n\r\n    Mockito.doAnswer(i -&gt; {\r\n                throw new Exception(String.format(&quot;Failed step 1. Received parameters: %s, %s&quot;, i.getArgument(0), i.getArgument(1)));\r\n                    })\r\n                    .when(factory).load(any(), any());\r\n    Mockito.doNothing().when(factory).load(eq(&quot;correct&quot;), eq(&quot;correct&quot;));","title":"Throw an exception displaying parameters passed into a void method in Java 8 Mockito","body":"<p>You can use <code>doAnswer</code> in order to print the parameters the way you're expecting. It will allow you to access the parameters of the mocked method by using <code>getArgument(int i)</code> method.</p>\n<pre><code>Mockito.doAnswer(i -&gt; {\n            throw new Exception(String.format(&quot;Failed step 1. Received parameters: %s, %s&quot;, i.getArgument(0), i.getArgument(1)));\n                })\n                .when(factory).load(any(), any());\nMockito.doNothing().when(factory).load(eq(&quot;correct&quot;), eq(&quot;correct&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10556120,"reputation":97,"user_id":7777243,"display_name":"Disruptis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695328996,"creation_date":1695328996,"answer_id":77153548,"question_id":77153047,"body_markdown":"While CaptainAye&#39;s solution is a great one, I realized I could do what I was looking for in a lot less code by using `Mockito.verify`.\r\n\r\n    Mockito.verify(factory).load(eq(&quot;correct&quot;), eq(&quot;correct&quot;));","title":"Throw an exception displaying parameters passed into a void method in Java 8 Mockito","body":"<p>While CaptainAye's solution is a great one, I realized I could do what I was looking for in a lot less code by using <code>Mockito.verify</code>.</p>\n<pre><code>Mockito.verify(factory).load(eq(&quot;correct&quot;), eq(&quot;correct&quot;));\n</code></pre>\n"}],"owner":{"account_id":10556120,"reputation":97,"user_id":7777243,"display_name":"Disruptis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77153273,"answer_count":2,"score":0,"last_activity_date":1695328996,"creation_date":1695323645,"question_id":77153047,"body_markdown":"I have a test suite using Mockito that mocks certain void functions to `doNothing()` if passed the correct parameters and to throw an error if passed wrong ones. When it detects incorrect parameters I want it to also print the parameters it received in the exception it throws.\r\n\r\n \r\n\r\n   \r\n    Mockito.doThrow(new Exception(String.format(&quot;Failed step 1. Received parameters: %s, %s&quot;, param1, param2)))\r\n            .when(factory).load(any(), any());\r\n    Mockito.doNothing().when(factory).load(eq(&quot;correct&quot;), eq(&quot;correct&quot;));\r\n\r\nI can&#39;t seem to find a way to do this because Additional Answers does not apply to void return types. This needs to work for Java 8.","title":"Throw an exception displaying parameters passed into a void method in Java 8 Mockito","body":"<p>I have a test suite using Mockito that mocks certain void functions to <code>doNothing()</code> if passed the correct parameters and to throw an error if passed wrong ones. When it detects incorrect parameters I want it to also print the parameters it received in the exception it throws.</p>\n<pre><code>Mockito.doThrow(new Exception(String.format(&quot;Failed step 1. Received parameters: %s, %s&quot;, param1, param2)))\n        .when(factory).load(any(), any());\nMockito.doNothing().when(factory).load(eq(&quot;correct&quot;), eq(&quot;correct&quot;));\n</code></pre>\n<p>I can't seem to find a way to do this because Additional Answers does not apply to void return types. This needs to work for Java 8.</p>\n"},{"tags":["java","jetbrains-ide"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695325782,"post_id":77153237,"comment_id":136013189,"body_markdown":"Clone the repo, check out the said branch and follow the other instructions from the markdown file. Note that you need to use cygwin if you&#39;re using Windows (though I wouldn&#39;t recommend building the JDK on Windows). Also, I want to mention that building a JDK requires some time and a reasonable amount of resources if I recall correctly. What _specifically_ do you need help with?","body":"Clone the repo, check out the said branch and follow the other instructions from the markdown file. Note that you need to use cygwin if you&#39;re using Windows (though I wouldn&#39;t recommend building the JDK on Windows). Also, I want to mention that building a JDK requires some time and a reasonable amount of resources if I recall correctly. What <i>specifically</i> do you need help with?"},{"owner":{"account_id":21208933,"reputation":922,"user_id":15597975,"display_name":"mars8"},"score":0,"creation_date":1695326657,"post_id":77153237,"comment_id":136013320,"body_markdown":"i am running hyprland desktop (on arch linux) which uses Wayland. Intellij IDE&#39;s generally do not work on wayland, however user &#39;j run&#39; from the youtrack link was able to get it running, per his screenshot. i am stille not sure what repo i need to clone. the build instructions say &#39;git clone https://git.openjdk.org/jdk/&#39;, &#39;j run&#39; mentions OpenJDK21U-jdk_x64_linux_hotspot_2023-08-09-06-56.tar.gz.&#39; None of them sound like the [jbr21 branch](https://github.com/JetBrains/JetBrainsRuntime/tree/jbr21)....","body":"i am running hyprland desktop (on arch linux) which uses Wayland. Intellij IDE&#39;s generally do not work on wayland, however user &#39;j run&#39; from the youtrack link was able to get it running, per his screenshot. i am stille not sure what repo i need to clone. the build instructions say &#39;git clone <a href=\"https://git.openjdk.org/jdk/\" rel=\"nofollow noreferrer\">git.openjdk.org/jdk</a>&#39;, &#39;j run&#39; mentions OpenJDK21U-jdk_x64_linux_hotspot_2023-08-09-06-56.tar.gz.&#39; None of them sound like the <a href=\"https://github.com/JetBrains/JetBrainsRuntime/tree/jbr21\" rel=\"nofollow noreferrer\">jbr21 branch</a>...."}],"answers":[{"comments":[{"owner":{"account_id":21208933,"reputation":922,"user_id":15597975,"display_name":"mars8"},"score":0,"creation_date":1695369450,"post_id":77153522,"comment_id":136017893,"body_markdown":"thank you, I will try it out. quick question, how would I actually launch the IDE once it&#39;s installed?","body":"thank you, I will try it out. quick question, how would I actually launch the IDE once it&#39;s installed?"},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695422285,"post_id":77153522,"comment_id":136027342,"body_markdown":"I assume you&#39;d copy the built jbr into the folder in the IDE. For example on Windows it&#39;s at: %programfiles%\\JetBrains\\&lt;IDE&gt;\\jbr\n\nAnd it sounds like you&#39;ll need to use that custom run file for the IDE that the fellow provided on youtrack.","body":"I assume you&#39;d copy the built jbr into the folder in the IDE. For example on Windows it&#39;s at: %programfiles%\\JetBrains\\&lt;IDE&gt;\\jbr  And it sounds like you&#39;ll need to use that custom run file for the IDE that the fellow provided on youtrack."},{"owner":{"account_id":21208933,"reputation":922,"user_id":15597975,"display_name":"mars8"},"score":0,"creation_date":1695479487,"post_id":77153522,"comment_id":136031407,"body_markdown":"When i try to run `sh ./configure` i get `configure: error: The path of BOOT_JDK_ARG, which resolves as &quot;/usr/bin/java&quot; is not found.` When i try to use the flag `--with-boot-jdk=/usr/bin/java` i get similar &quot;path not found&quot; error. It looks docker it is putting me into some weird shell and i don&#39;t know if it is able to &#39;talk&#39; with the local directories on my machine. Note I have installed [jdk21](https://archlinux.org/packages/extra/x86_64/jdk-openjdk/) on my machine which has been saved in `/usr/lib/jvm/java-21-openjdk/.`","body":"When i try to run <code>sh .&#47;configure</code> i get <code>configure: error: The path of BOOT_JDK_ARG, which resolves as &quot;&#47;usr&#47;bin&#47;java&quot; is not found.</code> When i try to use the flag <code>--with-boot-jdk=&#47;usr&#47;bin&#47;java</code> i get similar &quot;path not found&quot; error. It looks docker it is putting me into some weird shell and i don&#39;t know if it is able to &#39;talk&#39; with the local directories on my machine. Note I have installed <a href=\"https://archlinux.org/packages/extra/x86_64/jdk-openjdk/\" rel=\"nofollow noreferrer\">jdk21</a> on my machine which has been saved in <code>&#47;usr&#47;lib&#47;jvm&#47;java-21-openjdk&#47;.</code>"},{"owner":{"account_id":21208933,"reputation":922,"user_id":15597975,"display_name":"mars8"},"score":0,"creation_date":1695479708,"post_id":77153522,"comment_id":136031417,"body_markdown":"is it possible to build with another tool like gradle?","body":"is it possible to build with another tool like gradle?"},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":1,"creation_date":1695510411,"post_id":77153522,"comment_id":136034508,"body_markdown":"https://docs.docker.com/storage/bind-mounts/#start-a-container-with-a-bind-mount\n\n`docker run -v \\`pwd\\`../../../../:/JetBrainsRuntime --mount type=bind,source=/usr/bin/java,target=/usr/bin/java -it 942ea9900054`","body":"<a href=\"https://docs.docker.com/storage/bind-mounts/#start-a-container-with-a-bind-mount\" rel=\"nofollow noreferrer\">docs.docker.com/storage/bind-mounts/&hellip;</a>  <code>docker run -v `pwd`..&#47;..&#47;..&#47;..&#47;:&#47;JetBrainsRuntime --mount type=bind,source=&#47;usr&#47;bin&#47;java,target=&#47;usr&#47;bin&#47;java -it 942ea9900054</code>"}],"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695328748,"creation_date":1695328748,"answer_id":77153522,"question_id":77153237,"body_markdown":"First clone the jbr repository and switch to the branch version you&#39;d like to build. \r\n\r\n    git clone https://github.com/JetBrains/JetBrainsRuntime.git\r\n    cd JetBrainsRuntime\r\n    git checkout jbr21\r\n\r\nNext, follow the Build instructions in the README: https://github.com/JetBrains/JetBrainsRuntime/tree/jbr21#configuring-the-build-environment\r\n\r\n\r\n## Example for Linux (Docker):\r\n\r\nCreate a container:\r\n\r\n    $ cd jb/project/docker\r\n    $ docker build .\r\n    ...\r\n    Successfully built 942ea9900054\r\n\r\nRun these commands in the new container:\r\n\r\n    $ docker run -v `pwd`../../../../:/JetBrainsRuntime -it 942ea9900054\r\n    # cd /JetBrainsRuntime\r\n    # sh ./configure\r\n    # make images CONF=linux-x86_64-normal-server-release\r\n\r\n","title":"How to build JetBrains runtime from its GitHub repo?","body":"<p>First clone the jbr repository and switch to the branch version you'd like to build.</p>\n<pre><code>git clone https://github.com/JetBrains/JetBrainsRuntime.git\ncd JetBrainsRuntime\ngit checkout jbr21\n</code></pre>\n<p>Next, follow the Build instructions in the README: <a href=\"https://github.com/JetBrains/JetBrainsRuntime/tree/jbr21#configuring-the-build-environment\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/JetBrainsRuntime/tree/jbr21#configuring-the-build-environment</a></p>\n<h2>Example for Linux (Docker):</h2>\n<p>Create a container:</p>\n<pre><code>$ cd jb/project/docker\n$ docker build .\n...\nSuccessfully built 942ea9900054\n</code></pre>\n<p>Run these commands in the new container:</p>\n<pre><code>$ docker run -v `pwd`../../../../:/JetBrainsRuntime -it 942ea9900054\n# cd /JetBrainsRuntime\n# sh ./configure\n# make images CONF=linux-x86_64-normal-server-release\n</code></pre>\n"}],"owner":{"account_id":21208933,"reputation":922,"user_id":15597975,"display_name":"mars8"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77153522,"answer_count":1,"score":1,"last_activity_date":1695328748,"creation_date":1695325642,"question_id":77153237,"body_markdown":"I am specifically trying to follow [this](https://youtrack.jetbrains.com/issue/JBR-3206/Native-Wayland-support) post. It mentions \r\n\r\n*&quot;build jbr21 off of nightly openjdk, e.g. OpenJDK21U-jdk_x64_linux_hotspot_2023-08-09-06-56.tar.gz&quot;*\r\n\r\nA [link](https://github.com/JetBrains/JetBrainsRuntime/blob/main/doc/building.md) is provided to the build instructions but it is too hard for a noob to follow. \r\n\r\nWhat are the steps I need to follow in order to build and run the `jbr21` branch from the JetBrains runtime repository?","title":"How to build JetBrains runtime from its GitHub repo?","body":"<p>I am specifically trying to follow <a href=\"https://youtrack.jetbrains.com/issue/JBR-3206/Native-Wayland-support\" rel=\"nofollow noreferrer\">this</a> post. It mentions</p>\n<p><em>&quot;build jbr21 off of nightly openjdk, e.g. OpenJDK21U-jdk_x64_linux_hotspot_2023-08-09-06-56.tar.gz&quot;</em></p>\n<p>A <a href=\"https://github.com/JetBrains/JetBrainsRuntime/blob/main/doc/building.md\" rel=\"nofollow noreferrer\">link</a> is provided to the build instructions but it is too hard for a noob to follow.</p>\n<p>What are the steps I need to follow in order to build and run the <code>jbr21</code> branch from the JetBrains runtime repository?</p>\n"},{"tags":["java","spring-boot","cors"],"owner":{"account_id":26829339,"reputation":1,"user_id":20417541,"display_name":"Michell Antonionny Bizerra de "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695328252,"creation_date":1695328252,"question_id":77153472,"body_markdown":"I&#39;m receiving the message &#39;http://localhost:4200&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; when making a request via an Angular application (version 8.1.2).\r\nThank you in advance for everyone&#39;s attention.\r\nI will put my CorsFilter handling classes below.\r\nIn this AppConfig class I am trying to treat cors globally and not within controllers using @CrossOrigin(origins = &quot;*&quot;) for example.\r\n\r\n\r\n```\r\nimport java.time.Duration;\r\n\r\nimport org.springframework.boot.web.client.RestTemplateBuilder;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.client.RestTemplate;\r\nimport org.springframework.web.cors.CorsConfiguration;\r\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\r\nimport org.springframework.web.filter.CorsFilter;\r\n\r\n@Configuration\r\npublic class AppConfig {\r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n\r\n        return builder\r\n                .setConnectTimeout(Duration.ofMillis(240000)) //2m\r\n                .setReadTimeout(Duration.ofMillis(240000))  //2m\r\n                .build();\r\n    }\r\n\r\n\r\n    @Bean\r\n    public CorsFilter corsFilter() {\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        CorsConfiguration config = new CorsConfiguration().applyPermitDefaultValues();\r\n        config.setAllowCredentials(true);\r\n        config.addAllowedOrigin(&quot;*&quot;);\r\n        config.addAllowedHeader(&quot;*&quot;);\r\n        config.addAllowedMethod(&quot;OPTIONS&quot;);\r\n        config.addAllowedMethod(&quot;GET&quot;);\r\n        config.addAllowedMethod(&quot;POST&quot;);\r\n        config.addAllowedMethod(&quot;PUT&quot;);\r\n        config.addAllowedMethod(&quot;DELETE&quot;);\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n        return new CorsFilter(source);\r\n    }\r\n}\r\n```\r\n","title":"http://localhost:4200&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39;","body":"<p>I'm receiving the message 'http://localhost:4200' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' when making a request via an Angular application (version 8.1.2).\nThank you in advance for everyone's attention.\nI will put my CorsFilter handling classes below.\nIn this AppConfig class I am trying to treat cors globally and not within controllers using @CrossOrigin(origins = &quot;*&quot;) for example.</p>\n<pre><code>import java.time.Duration;\n\nimport org.springframework.boot.web.client.RestTemplateBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.client.RestTemplate;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\nimport org.springframework.web.filter.CorsFilter;\n\n@Configuration\npublic class AppConfig {\n    @Bean\n    public RestTemplate restTemplate(RestTemplateBuilder builder) {\n\n        return builder\n                .setConnectTimeout(Duration.ofMillis(240000)) //2m\n                .setReadTimeout(Duration.ofMillis(240000))  //2m\n                .build();\n    }\n\n\n    @Bean\n    public CorsFilter corsFilter() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration().applyPermitDefaultValues();\n        config.setAllowCredentials(true);\n        config.addAllowedOrigin(&quot;*&quot;);\n        config.addAllowedHeader(&quot;*&quot;);\n        config.addAllowedMethod(&quot;OPTIONS&quot;);\n        config.addAllowedMethod(&quot;GET&quot;);\n        config.addAllowedMethod(&quot;POST&quot;);\n        config.addAllowedMethod(&quot;PUT&quot;);\n        config.addAllowedMethod(&quot;DELETE&quot;);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return new CorsFilter(source);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","ssl-certificate"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1695330851,"post_id":77153255,"comment_id":136013936,"body_markdown":"Let&#39;s encrypted doesn&#39;t issue certificates for localhost. Certificates only work correctly if you install them on the server they are issued for and then you have to use the full address which is noted in the certificate for accessing it.","body":"Let&#39;s encrypted doesn&#39;t issue certificates for localhost. Certificates only work correctly if you install them on the server they are issued for and then you have to use the full address which is noted in the certificate for accessing it."},{"owner":{"account_id":3405565,"reputation":840,"user_id":2856694,"accept_rate":30,"display_name":"Victor Soares"},"score":0,"creation_date":1695334493,"post_id":77153255,"comment_id":136014449,"body_markdown":"@Robert my application is running on a subdomain and the certificate was generated for the domain. For example: domain.com is where I got the certificate from and app.domain.com is where my application is. In this case, do I need to generate another certificate for the subdomain?","body":"@Robert my application is running on a subdomain and the certificate was generated for the domain. For example: domain.com is where I got the certificate from and app.domain.com is where my application is. In this case, do I need to generate another certificate for the subdomain?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1695337708,"post_id":77153255,"comment_id":136014745,"body_markdown":"You need to obtain and use a cert that _contains_ the name you use to connect, OR (optionally) a wildcard form of that name -- you can get a wildcard for \\*.example.com and use it for fred.example.com and wilma.example.com but NOT example.com or boo.boo.example.com (two levels of name). LetsEncrypt will issue a cert for more than one name (up to 100 IIRC) so you can get e.g. example.com,sub.example.com or example.com,\\*.example.com . But name mismatch can&#39;t cause the error you&#39;re reporting -- a more likely cause for that is if your keystore contains only the cert and not the privatekey; ...","body":"You need to obtain and use a cert that <i>contains</i> the name you use to connect, OR (optionally) a wildcard form of that name -- you can get a wildcard for *.example.com and use it for fred.example.com and wilma.example.com but NOT example.com or boo.boo.example.com (two levels of name). LetsEncrypt will issue a cert for more than one name (up to 100 IIRC) so you can get e.g. example.com,sub.example.com or example.com,*.example.com . But name mismatch can&#39;t cause the error you&#39;re reporting -- a more likely cause for that is if your keystore contains only the cert and not the privatekey; ..."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1695337884,"post_id":77153255,"comment_id":136014763,"body_markdown":"... you cannot convert the _two or more_ PEM files created by certbot (if that&#39;s what you used) to a keystore with `keytool`, you need instead `openssl pkcs12 -export -in fullchain.pem -inkey privatekey.pem -out p12keystore` (see about a hundred existing Qs) or something like keystore-explorer.org .","body":"... you cannot convert the <i>two or more</i> PEM files created by certbot (if that&#39;s what you used) to a keystore with <code>keytool</code>, you need instead <code>openssl pkcs12 -export -in fullchain.pem -inkey privatekey.pem -out p12keystore</code> (see about a hundred existing Qs) or something like keystore-explorer.org ."}],"owner":{"account_id":3405565,"reputation":840,"user_id":2856694,"accept_rate":30,"display_name":"Victor Soares"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695327775,"creation_date":1695325831,"question_id":77153255,"body_markdown":"I&#39;m trying to generate a keystore and enable SSL in my Spring Boot application, but I&#39;m getting the error **ERR_SSL_VERSION_OR_CIPHER_MISMATCH**.\r\n\r\n**Here&#39;s what I&#39;ve done:**\r\n\r\n 1. Exported my valid .crt certificate generated by Let&#39;s Encrypt.\r\n 2. Imported my .crt into a .p12 keystore with this command:  \r\n\r\n&gt; keytool -import -alias springboot -file myCertificate.crt -keystore\r\n&gt; springboot.p12 -storepass password\r\n\r\n 3. Added the keystore &quot;springboot.p12&quot; to &#39;src/main/resources&#39; of the project.\r\n 4. Added the configuration in the application.yml file:\r\n\r\n\r\n&gt;         ssl:\r\n&gt;             key-store: classpath:springboot.p12\r\n&gt;             key-store-password: password\r\n\r\n 5. Started the server at https://localhost:8080/ and received the &quot;ERR_SSL_VERSION_OR_CIPHER_MISMATCH&quot; message in Chrome.\r\n\r\n\r\nI believe I might be doing something wrong in keystore generation. **Does anyone have any tips?**\r\n\r\n**Note:** I tested this update in production, and instead of ERR_SSL_VERSION_OR_CIPHER_MISMATCH, I get ERR_CONNECTION_TIMED_OUT.&quot;\r\n\r\n**Note2:** If I generete a self-sign certificate that error not occurrus, but I need a valid certificate","title":"How to resolve ERR_SSL_VERSION_OR_CIPHER_MISMATCH error when wnabling SSL in Java Spring Boot?","body":"<p>I'm trying to generate a keystore and enable SSL in my Spring Boot application, but I'm getting the error <strong>ERR_SSL_VERSION_OR_CIPHER_MISMATCH</strong>.</p>\n<p><strong>Here's what I've done:</strong></p>\n<ol>\n<li>Exported my valid .crt certificate generated by Let's Encrypt.</li>\n<li>Imported my .crt into a .p12 keystore with this command:</li>\n</ol>\n<blockquote>\n<p>keytool -import -alias springboot -file myCertificate.crt -keystore\nspringboot.p12 -storepass password</p>\n</blockquote>\n<ol start=\"3\">\n<li>Added the keystore &quot;springboot.p12&quot; to 'src/main/resources' of the project.</li>\n<li>Added the configuration in the application.yml file:</li>\n</ol>\n<blockquote>\n<pre><code>    ssl:\n        key-store: classpath:springboot.p12\n        key-store-password: password\n</code></pre>\n</blockquote>\n<ol start=\"5\">\n<li>Started the server at https://localhost:8080/ and received the &quot;ERR_SSL_VERSION_OR_CIPHER_MISMATCH&quot; message in Chrome.</li>\n</ol>\n<p>I believe I might be doing something wrong in keystore generation. <strong>Does anyone have any tips?</strong></p>\n<p><strong>Note:</strong> I tested this update in production, and instead of ERR_SSL_VERSION_OR_CIPHER_MISMATCH, I get ERR_CONNECTION_TIMED_OUT.&quot;</p>\n<p><strong>Note2:</strong> If I generete a self-sign certificate that error not occurrus, but I need a valid certificate</p>\n"},{"tags":["java","logging","execution"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1695333683,"post_id":77153389,"comment_id":136014354,"body_markdown":"Why do you want to do that? Most people use automated tests, e.g. with [JUnit](https://junit.org) (at least for the bulk of their testing). In an automated test, the test is code (not a script that someone has to manually follow), and it includes one or more assertions that check that variables have expected values. Needing to know about the trace is a brittle way of tying test and code under test together; the details how the code gets whatever value probably shouldn&#39;t matter. If you do automated testing please disregard the above and [edit] your question, explain more, and add a [mcve].","body":"Why do you want to do that? Most people use automated tests, e.g. with <a href=\"https://junit.org\" rel=\"nofollow noreferrer\">JUnit</a> (at least for the bulk of their testing). In an automated test, the test is code (not a script that someone has to manually follow), and it includes one or more assertions that check that variables have expected values. Needing to know about the trace is a brittle way of tying test and code under test together; the details how the code gets whatever value probably shouldn&#39;t matter. If you do automated testing please disregard the above and <a href=\"https://stackoverflow.com/posts/77153389/edit\">edit</a> your question, explain more, and add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":29503893,"reputation":1,"user_id":22610314,"display_name":"LYL"},"score":0,"creation_date":1695344013,"post_id":77153389,"comment_id":136015284,"body_markdown":"@Robert Thanks for your reply! I want to do this because my previous teammates wrote some test cases without explanation. My current work is to understand their existing test cases and generate more for the untested parts of our projects. Because there is more than one project on my hand now, I would like to find a more convenient/automatic way to collect log files and understand existing test cases more efficiently. In the current stage, I am not using the automated testing you described. Sorry for the confusion.","body":"@Robert Thanks for your reply! I want to do this because my previous teammates wrote some test cases without explanation. My current work is to understand their existing test cases and generate more for the untested parts of our projects. Because there is more than one project on my hand now, I would like to find a more convenient/automatic way to collect log files and understand existing test cases more efficiently. In the current stage, I am not using the automated testing you described. Sorry for the confusion."}],"owner":{"account_id":29503893,"reputation":1,"user_id":22610314,"display_name":"LYL"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695327397,"creation_date":1695327397,"question_id":77153389,"body_markdown":"I&#39;m relatively new to Java. Recently, I&#39;ve been attempting to run test cases on existing projects. I&#39;m aware that debugging tools, like those in Eclipse, allow me to step through test cases and monitor variable values at each step.\r\n\r\n\r\n\r\nHowever, as the projects grow more intricate and the number of test cases rise, manually stepping through each one and noting down all the details becomes cumbersome. Is there a more efficient method to gather the code&#39;s execution sequence (I think it is also called execution trace) and the variable value changes during each statement&#39;s execution? (For example, is there a tool that can automatically produce log files containing this information?) Any assistance would be greatly appreciated!","title":"Collecting variable value changes and execution trace in Java","body":"<p>I'm relatively new to Java. Recently, I've been attempting to run test cases on existing projects. I'm aware that debugging tools, like those in Eclipse, allow me to step through test cases and monitor variable values at each step.</p>\n<p>However, as the projects grow more intricate and the number of test cases rise, manually stepping through each one and noting down all the details becomes cumbersome. Is there a more efficient method to gather the code's execution sequence (I think it is also called execution trace) and the variable value changes during each statement's execution? (For example, is there a tool that can automatically produce log files containing this information?) Any assistance would be greatly appreciated!</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0","spring-webflux"],"comments":[{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1695301893,"post_id":77150450,"comment_id":136008300,"body_markdown":"Have you confirmed that a new `httpClient` or `authorizedClientManager` is not being created everytime due to the service lifetime?","body":"Have you confirmed that a new <code>httpClient</code> or <code>authorizedClientManager</code> is not being created everytime due to the service lifetime?"},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1695302457,"post_id":77150450,"comment_id":136008451,"body_markdown":"Yes, since the are being created as Spring `@Bean`s, those objects will be created as singletons when the application starts.","body":"Yes, since the are being created as Spring <code>@Bean</code>s, those objects will be created as singletons when the application starts."},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1695302815,"post_id":77150450,"comment_id":136008545,"body_markdown":"OK great. And what requests are made? Are they auth code flow or client credentials requests? New tokens are definitely being generated?","body":"OK great. And what requests are made? Are they auth code flow or client credentials requests? New tokens are definitely being generated?"},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":1,"creation_date":1695308365,"post_id":77150450,"comment_id":136009776,"body_markdown":"@ErmiyaEskandary please see the sequence diagrams that I have added to the question","body":"@ErmiyaEskandary please see the sequence diagrams that I have added to the question"},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1695308651,"post_id":77150450,"comment_id":136009849,"body_markdown":"Thank you, great diagram software btw - curious what application it is! That aside, it looks you&#39;re using the client creds flow here. Do just this and see if it works - if not, still update your question with it `ReactiveOAuth2AuthorizedClientProviderBuilder.builder().clientCredentials().build();`","body":"Thank you, great diagram software btw - curious what application it is! That aside, it looks you&#39;re using the client creds flow here. Do just this and see if it works - if not, still update your question with it <code>ReactiveOAuth2AuthorizedClientProviderBuilder.builder().clie&zwnj;&#8203;ntCredentials().buil&zwnj;&#8203;d();</code>"},{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":1,"creation_date":1695313778,"post_id":77150450,"comment_id":136010985,"body_markdown":"Spring Security caches the `OAuth2AuthorizedClient` (which contains the `access_token`) with the `ReactiveOAuth2AuthorizedClientService` for you. Are you sure the tokens you receive do not expire quickly?","body":"Spring Security caches the <code>OAuth2AuthorizedClient</code> (which contains the <code>access_token</code>) with the <code>ReactiveOAuth2AuthorizedClientService</code> for you. Are you sure the tokens you receive do not expire quickly?"},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1695325517,"post_id":77150450,"comment_id":136013138,"body_markdown":"@ErmiyaEskandary I tried to remove the `.authorizationCode().refreshToken()` from the `ReactiveOAuth2AuthorizedClientProviderBuilder`, but the behavior is unchanged. The sequence diagrams were generated by using [PlantUML](https://plantuml.com/sequence-diagram).","body":"@ErmiyaEskandary I tried to remove the <code>.authorizationCode().refreshToken()</code> from the <code>ReactiveOAuth2AuthorizedClientProviderBuilder</code>, but the behavior is unchanged. The sequence diagrams were generated by using <a href=\"https://plantuml.com/sequence-diagram\" rel=\"nofollow noreferrer\">PlantUML</a>."},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1695326491,"post_id":77150450,"comment_id":136013291,"body_markdown":"@SteveRiesenberg Yes I thought that Spring Security would have in memory caching enabled by default. Please see my second updated above for details about the token expiration.","body":"@SteveRiesenberg Yes I thought that Spring Security would have in memory caching enabled by default. Please see my second updated above for details about the token expiration."},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1695327512,"post_id":77150450,"comment_id":136013436,"body_markdown":"@SteveRiesenberg Please also see my update about not currently having configured the `.attributes(oauth2AuthorizedClient(authorizedClient))` method call. Is that relevant? Where do I find the `authorizedClient`?","body":"@SteveRiesenberg Please also see my update about not currently having configured the <code>.attributes(oauth2AuthorizedClient(authorizedClient))</code> method call. Is that relevant? Where do I find the <code>authorizedClient</code>?"},{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1695328498,"post_id":77150450,"comment_id":136013592,"body_markdown":"Information is available in [the docs](https://docs.spring.io/spring-security/reference/reactive/oauth2/client/authorized-clients.html). See [defaulting the authorized client](https://docs.spring.io/spring-security/reference/reactive/oauth2/client/authorized-clients.html#_defaulting_the_authorized_client). It might be easier to provide a minimal sample and I can explore it further.","body":"Information is available in <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/client/authorized-clients.html\" rel=\"nofollow noreferrer\">the docs</a>. See <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/client/authorized-clients.html#_defaulting_the_authorized_client\" rel=\"nofollow noreferrer\">defaulting the authorized client</a>. It might be easier to provide a minimal sample and I can explore it further."}],"answers":[{"comments":[{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1695302799,"post_id":77150619,"comment_id":136008541,"body_markdown":"Ok, so there is no need of a request token. I would expect that Spring Security would support caching of valid tokens given the correct configuration? What would such configuration look like?","body":"Ok, so there is no need of a request token. I would expect that Spring Security would support caching of valid tokens given the correct configuration? What would such configuration look like?"},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1695302950,"post_id":77150619,"comment_id":136008579,"body_markdown":"There is no need for a database here, as JWTs are stateless and store expiry time in the `exp` claim. Though the point about the grant types are correct, this answer doesn&#39;t actually answer the question and is incorrect in that regard.","body":"There is no need for a database here, as JWTs are stateless and store expiry time in the <code>exp</code> claim. Though the point about the grant types are correct, this answer doesn&#39;t actually answer the question and is incorrect in that regard."},{"owner":{"account_id":5060337,"reputation":12,"user_id":4062178,"display_name":"Beck-воин"},"score":0,"creation_date":1695303551,"post_id":77150619,"comment_id":136008706,"body_markdown":"There is no mention of JWT tokens here, besides, he is interested in caching oAuth token and if i am not mistaken, it&#39;s more likely a Bearer token. I mentioned h2 database, which can be used for caching tokens. There is difference between, JWT and Bearer tokens.  And for JWTs, even the algorithm of encryption is mentioned in the header, and holds also other info other than exp.\n\nAs for the database, it can be used, since spring security also uses a database to store permissions and roles in it, so i don&#39;t see the issue in taking advantage of it.","body":"There is no mention of JWT tokens here, besides, he is interested in caching oAuth token and if i am not mistaken, it&#39;s more likely a Bearer token. I mentioned h2 database, which can be used for caching tokens. There is difference between, JWT and Bearer tokens.  And for JWTs, even the algorithm of encryption is mentioned in the header, and holds also other info other than exp.  As for the database, it can be used, since spring security also uses a database to store permissions and roles in it, so i don&#39;t see the issue in taking advantage of it."},{"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"score":0,"creation_date":1695306231,"post_id":77150619,"comment_id":136009272,"body_markdown":"Sorry for being unclear, what I would like to know is how the Spring Security and / or WebClient configuration code snippets in my question should be modified to enable caching (in H2, in memory cache or by other means)?","body":"Sorry for being unclear, what I would like to know is how the Spring Security and / or WebClient configuration code snippets in my question should be modified to enable caching (in H2, in memory cache or by other means)?"},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":1,"creation_date":1695310640,"post_id":77150619,"comment_id":136010289,"body_markdown":"You can use the DB but there is no reason why it can&#39;t be cached in memory. The issue here is why it&#39;s not being cached, not the location of the cache.","body":"You can use the DB but there is no reason why it can&#39;t be cached in memory. The issue here is why it&#39;s not being cached, not the location of the cache."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1695326356,"post_id":77150619,"comment_id":136013270,"body_markdown":"`The appropriate way, is to store it in the database` why would this be the appropriate way? when in memory caching is faster, a lot faster and if the tokens are short lived there is no reason at all to have persistent storage.","body":"<code>The appropriate way, is to store it in the database</code> why would this be the appropriate way? when in memory caching is faster, a lot faster and if the tokens are short lived there is no reason at all to have persistent storage."}],"tags":[],"owner":{"account_id":5060337,"reputation":12,"user_id":4062178,"display_name":"Beck-воин"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695302125,"creation_date":1695302125,"answer_id":77150619,"question_id":77150450,"body_markdown":"The appropriate way, is to store it in the database, same as it is done with the users and roles/permissions with Spring security. The only difference is that, you to update it, when it&#39;s expired. \r\n\r\nBesides, in your code there are few things you need to take into consideration.\r\n\r\nYou are using refresh token, which means once you have the first token, the refresh token is used to extend the validity of the previous token, without the need to issue a new one.\r\n\r\nYou are also using authorization code grant type for refresh token, which means it follows a whole process, which is used with front application user oriented, therefore it makes sense to have refresh token.\r\n\r\nIf the grant type was client credentials, then there will not be any need to have refresh token, but to just fire a request each time with client_id and client_secret to get the new bearer token.\r\n\r\nWhat i would recommend, is for you to first check the difference between oAuth grant types, as for your question, you can store them in a h2 or even persist them in mysql databse, once a token is expired, you can set it as expired.\r\n\r\nThen the token value, should be in an Authorization header appended with a prefix depending on which type of token, i.e\r\n\r\n&gt; Authorization Bearer {token-value}\r\n\r\n.","title":"How can one cache Oauth2 tokens using Spring Security and WebClient?","body":"<p>The appropriate way, is to store it in the database, same as it is done with the users and roles/permissions with Spring security. The only difference is that, you to update it, when it's expired.</p>\n<p>Besides, in your code there are few things you need to take into consideration.</p>\n<p>You are using refresh token, which means once you have the first token, the refresh token is used to extend the validity of the previous token, without the need to issue a new one.</p>\n<p>You are also using authorization code grant type for refresh token, which means it follows a whole process, which is used with front application user oriented, therefore it makes sense to have refresh token.</p>\n<p>If the grant type was client credentials, then there will not be any need to have refresh token, but to just fire a request each time with client_id and client_secret to get the new bearer token.</p>\n<p>What i would recommend, is for you to first check the difference between oAuth grant types, as for your question, you can store them in a h2 or even persist them in mysql databse, once a token is expired, you can set it as expired.</p>\n<p>Then the token value, should be in an Authorization header appended with a prefix depending on which type of token, i.e</p>\n<blockquote>\n<p>Authorization Bearer {token-value}</p>\n</blockquote>\n<p>.</p>\n"}],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695327327,"creation_date":1695300835,"question_id":77150450,"body_markdown":"How can configure refresh token requests and caching of Oauth2 tokens using Spring Security, WebClient and Spring Boot 3.1.3?\r\n\r\nI would like to configure a service with the following flow:\r\n1. polls messages from a queue (i.e. the flow is not a result of an incoming http request)\r\n2. does some processing \r\n3. requests an Oauth2 token from an authentication server\r\n4. post the processed data together with the token using `WebClient` to a third party API that uses Oauth2 for authentication\r\n5. re-use the same token for subsequent requests for the duration of the token validity\r\n\r\nThe flow is working up until step 4. The application successfully makes Oauth authentication request, receives a token and posts the processed data to the third party API with the token added as a `Bearer` token to the `Authorization` header. However, it seems like step 5 is missing as additional authentication requests are made to the authentication server for _every_ request, despite that the token suggests that it is valid for one hour.\r\n\r\nWhat is the appropriate way of configuring Spring Security and/or WebClient so that valid tokens are cached and refresh token requests are issued to the authentication server when the existing token is about to expire?\r\n\r\n\r\nThis is what I currently have:\r\n\r\n**Configuration Class**\r\n```java\r\npackage com.company.example;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.oauth2.client.AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager;\r\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientManager;\r\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientProvider;\r\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientProviderBuilder;\r\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientService;\r\nimport org.springframework.security.oauth2.client.registration.ReactiveClientRegistrationRepository;\r\nimport org.springframework.security.oauth2.client.web.reactive.function.client.ServerOAuth2AuthorizedClientExchangeFilterFunction;\r\nimport org.springframework.web.reactive.function.client.WebClient;\r\n\r\n@Configuration\r\npublic class SomeConfig {\r\n    private static final String REMOTE_SERVER_URL = &quot;https://www.remote.com&quot;;\r\n    private static final String OAUTH_CLIENT_REGISTRATION = &quot;example&quot;;\r\n\r\n    @Bean\r\n    public ReactiveOAuth2AuthorizedClientManager authorizedClientManager(\r\n            ReactiveClientRegistrationRepository clientRegistrationRepository,\r\n            ReactiveOAuth2AuthorizedClientService authorizedClientService) {\r\n        ReactiveOAuth2AuthorizedClientProvider authorizedClientProvider =\r\n                ReactiveOAuth2AuthorizedClientProviderBuilder.builder()\r\n                        .authorizationCode()\r\n                        .refreshToken()\r\n                        .clientCredentials()\r\n                        .build();\r\n\r\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager =\r\n                new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(\r\n                        clientRegistrationRepository, authorizedClientService);\r\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\r\n        return authorizedClientManager;\r\n    }\r\n\r\n    @Bean\r\n    WebClient httpClient(\r\n            ReactiveOAuth2AuthorizedClientManager authorizedClientManager) {\r\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\r\n                new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        oauth2Client.setDefaultClientRegistrationId(OAUTH_CLIENT_REGISTRATION);\r\n\r\n        return WebClient.builder()\r\n                .filter(oauth2Client)\r\n                .baseUrl(REMOTE_SERVER_URL)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n**Request Service**\r\n```java\r\npackage com.company.example;\r\n\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.web.reactive.function.client.WebClient;\r\nimport reactor.core.publisher.Mono;\r\n\r\nimport static org.springframework.http.HttpHeaders.ACCEPT;\r\nimport static org.springframework.http.HttpHeaders.CONTENT_TYPE;\r\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\r\n\r\n@Service\r\npublic class RequestService {\r\n    private static final String SERVER_ENDPOINT = &quot;/endpoint&quot;;\r\n    private final WebClient webClient;\r\n\r\n    public RequestService(WebClient webClient) {\r\n        this.webClient = webClient;\r\n    }\r\n\r\n    public Mono&lt;ResponseObject&gt; makeRequest(Mono&lt;RequestObject&gt; requestObject) {\r\n        return requestObject.flatMap(req -&gt; this.webClient\r\n                .post()\r\n                .uri(SERVER_ENDPOINT)\r\n                .header(ACCEPT, APPLICATION_JSON_VALUE)\r\n                .header(CONTENT_TYPE, APPLICATION_JSON_VALUE)\r\n                .bodyValue(requestObject)\r\n                .retrieve()\r\n                .bodyToMono(ResponseObject.class));\r\n    }\r\n}\r\n```\r\n\r\n**application.yaml**\r\n```yaml\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          example:\r\n            authorization-grant-type: client_credentials\r\n            client-id: ${client-id}\r\n            client-secret: ${client-secret}\r\n            scope: api://${app-id}/.default\r\n        provider:\r\n          example:\r\n            token-uri: https://example.oauth.server.com/oauth2/v2.0/token\r\n```\r\n\r\n**Dependencies**\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.3&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;com.example.oauth&lt;/groupId&gt;\r\n    &lt;artifactId&gt;webclient&lt;/artifactId&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**Update 1**\r\n\r\nWhat I see is that an authentication request is made to the authentication server before every request to the third party API:\r\n\r\n[![what I see][1]][1]\r\n\r\nWhat I would like os that a single authentication request is made before the first request with the third party API. The token should be cached and re-used for every subsequent request with the third party API as long as it is valid:\r\n\r\n[![what I would like to see][2]][2]\r\n\r\n\r\n**Update 2**\r\n\r\nThe token validity period is one hour. I know this that the response authentication server has the following content:\r\n\r\n```json\r\n{\r\n  &quot;token_type&quot;: &quot;Bearer&quot;,\r\n  &quot;expires_in&quot;: 3599,\r\n  &quot;ext_expires_in&quot;: 3599,\r\n  &quot;access_token&quot;: [token]\r\n}\r\n```\r\n\r\nThe `[token]` is a JWT token and when analysed using https://jwt.io it has (among other things) an `exp` field with an epoch timestamp one hour after the authentication request was made.\r\n\r\n\r\n**Update 3**\r\n\r\nLooking through the JavaDoc I found this code snippet in the [ServerOAuth2AuthorizedClientExchangeFilterFunction#oauth2AuthorizedClient()][3]:\r\n\r\n```java\r\n WebClient webClient = WebClient.builder()\r\n    .filter(new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager))\r\n    .build();\r\n Mono&lt;String&gt; response = webClient\r\n    .get()\r\n    .uri(uri)\r\n    .attributes(oauth2AuthorizedClient(authorizedClient))\r\n    // ...\r\n    .retrieve()\r\n    .bodyToMono(String.class);\r\n```\r\nOne thing that is missing from my current configuration is the `.attributes(oauth2AuthorizedClient(authorizedClient))` part. Is this relevant? If so, from where do I get the `authorizedClient`?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/K2aUK.png\r\n  [2]: https://i.stack.imgur.com/TYjWl.png\r\n  [3]: https://docs.spring.io/spring-security/site/docs/6.1.3/api/org/springframework/security/oauth2/client/web/reactive/function/client/ServerOAuth2AuthorizedClientExchangeFilterFunction.html#oauth2AuthorizedClient(org.springframework.security.oauth2.client.OAuth2AuthorizedClient)","title":"How can one cache Oauth2 tokens using Spring Security and WebClient?","body":"<p>How can configure refresh token requests and caching of Oauth2 tokens using Spring Security, WebClient and Spring Boot 3.1.3?</p>\n<p>I would like to configure a service with the following flow:</p>\n<ol>\n<li>polls messages from a queue (i.e. the flow is not a result of an incoming http request)</li>\n<li>does some processing</li>\n<li>requests an Oauth2 token from an authentication server</li>\n<li>post the processed data together with the token using <code>WebClient</code> to a third party API that uses Oauth2 for authentication</li>\n<li>re-use the same token for subsequent requests for the duration of the token validity</li>\n</ol>\n<p>The flow is working up until step 4. The application successfully makes Oauth authentication request, receives a token and posts the processed data to the third party API with the token added as a <code>Bearer</code> token to the <code>Authorization</code> header. However, it seems like step 5 is missing as additional authentication requests are made to the authentication server for <em>every</em> request, despite that the token suggests that it is valid for one hour.</p>\n<p>What is the appropriate way of configuring Spring Security and/or WebClient so that valid tokens are cached and refresh token requests are issued to the authentication server when the existing token is about to expire?</p>\n<p>This is what I currently have:</p>\n<p><strong>Configuration Class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.company.example;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.oauth2.client.AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager;\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientManager;\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientProvider;\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientProviderBuilder;\nimport org.springframework.security.oauth2.client.ReactiveOAuth2AuthorizedClientService;\nimport org.springframework.security.oauth2.client.registration.ReactiveClientRegistrationRepository;\nimport org.springframework.security.oauth2.client.web.reactive.function.client.ServerOAuth2AuthorizedClientExchangeFilterFunction;\nimport org.springframework.web.reactive.function.client.WebClient;\n\n@Configuration\npublic class SomeConfig {\n    private static final String REMOTE_SERVER_URL = &quot;https://www.remote.com&quot;;\n    private static final String OAUTH_CLIENT_REGISTRATION = &quot;example&quot;;\n\n    @Bean\n    public ReactiveOAuth2AuthorizedClientManager authorizedClientManager(\n            ReactiveClientRegistrationRepository clientRegistrationRepository,\n            ReactiveOAuth2AuthorizedClientService authorizedClientService) {\n        ReactiveOAuth2AuthorizedClientProvider authorizedClientProvider =\n                ReactiveOAuth2AuthorizedClientProviderBuilder.builder()\n                        .authorizationCode()\n                        .refreshToken()\n                        .clientCredentials()\n                        .build();\n\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager =\n                new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(\n                        clientRegistrationRepository, authorizedClientService);\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n        return authorizedClientManager;\n    }\n\n    @Bean\n    WebClient httpClient(\n            ReactiveOAuth2AuthorizedClientManager authorizedClientManager) {\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\n                new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n        oauth2Client.setDefaultClientRegistrationId(OAUTH_CLIENT_REGISTRATION);\n\n        return WebClient.builder()\n                .filter(oauth2Client)\n                .baseUrl(REMOTE_SERVER_URL)\n                .build();\n    }\n}\n</code></pre>\n<p><strong>Request Service</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.company.example;\n\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport reactor.core.publisher.Mono;\n\nimport static org.springframework.http.HttpHeaders.ACCEPT;\nimport static org.springframework.http.HttpHeaders.CONTENT_TYPE;\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\n@Service\npublic class RequestService {\n    private static final String SERVER_ENDPOINT = &quot;/endpoint&quot;;\n    private final WebClient webClient;\n\n    public RequestService(WebClient webClient) {\n        this.webClient = webClient;\n    }\n\n    public Mono&lt;ResponseObject&gt; makeRequest(Mono&lt;RequestObject&gt; requestObject) {\n        return requestObject.flatMap(req -&gt; this.webClient\n                .post()\n                .uri(SERVER_ENDPOINT)\n                .header(ACCEPT, APPLICATION_JSON_VALUE)\n                .header(CONTENT_TYPE, APPLICATION_JSON_VALUE)\n                .bodyValue(requestObject)\n                .retrieve()\n                .bodyToMono(ResponseObject.class));\n    }\n}\n</code></pre>\n<p><strong>application.yaml</strong></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  security:\n    oauth2:\n      client:\n        registration:\n          example:\n            authorization-grant-type: client_credentials\n            client-id: ${client-id}\n            client-secret: ${client-secret}\n            scope: api://${app-id}/.default\n        provider:\n          example:\n            token-uri: https://example.oauth.server.com/oauth2/v2.0/token\n</code></pre>\n<p><strong>Dependencies</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.example.oauth&lt;/groupId&gt;\n    &lt;artifactId&gt;webclient&lt;/artifactId&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Update 1</strong></p>\n<p>What I see is that an authentication request is made to the authentication server before every request to the third party API:</p>\n<p><a href=\"https://i.stack.imgur.com/K2aUK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K2aUK.png\" alt=\"what I see\" /></a></p>\n<p>What I would like os that a single authentication request is made before the first request with the third party API. The token should be cached and re-used for every subsequent request with the third party API as long as it is valid:</p>\n<p><a href=\"https://i.stack.imgur.com/TYjWl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TYjWl.png\" alt=\"what I would like to see\" /></a></p>\n<p><strong>Update 2</strong></p>\n<p>The token validity period is one hour. I know this that the response authentication server has the following content:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;token_type&quot;: &quot;Bearer&quot;,\n  &quot;expires_in&quot;: 3599,\n  &quot;ext_expires_in&quot;: 3599,\n  &quot;access_token&quot;: [token]\n}\n</code></pre>\n<p>The <code>[token]</code> is a JWT token and when analysed using <a href=\"https://jwt.io\" rel=\"nofollow noreferrer\">https://jwt.io</a> it has (among other things) an <code>exp</code> field with an epoch timestamp one hour after the authentication request was made.</p>\n<p><strong>Update 3</strong></p>\n<p>Looking through the JavaDoc I found this code snippet in the <a href=\"https://docs.spring.io/spring-security/site/docs/6.1.3/api/org/springframework/security/oauth2/client/web/reactive/function/client/ServerOAuth2AuthorizedClientExchangeFilterFunction.html#oauth2AuthorizedClient(org.springframework.security.oauth2.client.OAuth2AuthorizedClient)\" rel=\"nofollow noreferrer\">ServerOAuth2AuthorizedClientExchangeFilterFunction#oauth2AuthorizedClient()</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code> WebClient webClient = WebClient.builder()\n    .filter(new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager))\n    .build();\n Mono&lt;String&gt; response = webClient\n    .get()\n    .uri(uri)\n    .attributes(oauth2AuthorizedClient(authorizedClient))\n    // ...\n    .retrieve()\n    .bodyToMono(String.class);\n</code></pre>\n<p>One thing that is missing from my current configuration is the <code>.attributes(oauth2AuthorizedClient(authorizedClient))</code> part. Is this relevant? If so, from where do I get the <code>authorizedClient</code>?</p>\n"},{"tags":["java","android","image","mediarecorder"],"comments":[{"owner":{"account_id":6330683,"reputation":5229,"user_id":4915707,"display_name":"Alexander Ushakov"},"score":0,"creation_date":1695320400,"post_id":77152531,"comment_id":136012280,"body_markdown":"What version of Android you use to run this code?","body":"What version of Android you use to run this code?"},{"owner":{"account_id":6330683,"reputation":5229,"user_id":4915707,"display_name":"Alexander Ushakov"},"score":0,"creation_date":1695320509,"post_id":77152531,"comment_id":136012301,"body_markdown":"Please show setupCamera method content","body":"Please show setupCamera method content"}],"answers":[{"comments":[{"owner":{"account_id":6871137,"reputation":933,"user_id":5281431,"display_name":"mrousavy"},"score":0,"creation_date":1695372709,"post_id":77153362,"comment_id":136018457,"body_markdown":"Aha I see - thanks for the explanation Eddy! With OpenGL I can&#39;t expose the frames as YUV to the user, so that won&#39;t be possible I think. Unless I delegate them through another ImageReader I guess.\n\nDoes this also apply to MediaCodec? Is there any benefit of using that lower-level alternative instead of the MediaRecorder class?","body":"Aha I see - thanks for the explanation Eddy! With OpenGL I can&#39;t expose the frames as YUV to the user, so that won&#39;t be possible I think. Unless I delegate them through another ImageReader I guess.  Does this also apply to MediaCodec? Is there any benefit of using that lower-level alternative instead of the MediaRecorder class?"},{"owner":{"account_id":1420007,"reputation":17492,"user_id":1344825,"display_name":"Eddy Talvala"},"score":0,"creation_date":1695522128,"post_id":77153362,"comment_id":136035175,"body_markdown":"MediaRecorder is basically meant to be a simpler front end to MediaCodec+MediaMuxer.  The latter is much more flexible overall, but if MediaRecorder meets your needs, it&#39;s simpler. It becomes an issue if your needs change and you hit a wall with MediaRecorder no longer covering them, of course.  Under the hood, it&#39;s basically the same stack either way.","body":"MediaRecorder is basically meant to be a simpler front end to MediaCodec+MediaMuxer.  The latter is much more flexible overall, but if MediaRecorder meets your needs, it&#39;s simpler. It becomes an issue if your needs change and you hit a wall with MediaRecorder no longer covering them, of course.  Under the hood, it&#39;s basically the same stack either way."}],"tags":[],"owner":{"account_id":1420007,"reputation":17492,"user_id":1344825,"display_name":"Eddy Talvala"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695327161,"creation_date":1695327161,"answer_id":77153362,"question_id":77152531,"body_markdown":"When directly connecting the camera to the video encoder, the buffers are allocated with flags indicating they will be consumed by the encoder. This flag is used by the camera HAL and graphics buffer allocators to select appropriate formats/layouts/etc for the buffers.\r\n\r\nWhen you use an ImageReader like this, only a flag for &#39;CPU use&#39; is set; when you then try to send the buffer to the encoder, it likely errors out when trying to access the buffer from the hardware encoder.\r\n\r\nYou can try using this variant of the ImageReader constructor: \r\nhttps://developer.android.com/reference/android/media/ImageReader?hl=en#newInstance(int,%20int,%20int,%20int,%20long)\r\n\r\nand pass in the `USAGE_VIDEO_ENCODE` and `USAGE_CPU_READ_OFTEN` flags.  Note that this isn&#39;t a guaranteed-to-work combination, unfortunately. That said, I&#39;d expect it to likely work with YUV_420_888 as the format. (PRIVATE format would mean you couldn&#39;t read from it in app code, since you won&#39;t know the layout).\r\n\r\nThe most compatible option is to either have two output streams, one to the encoder and one to the ImageReader for ML. Or do the copying in the GPU like you did before.\r\n\r\n","title":"Not able to pass Images to RecordingSession Surface with ImageWriter","body":"<p>When directly connecting the camera to the video encoder, the buffers are allocated with flags indicating they will be consumed by the encoder. This flag is used by the camera HAL and graphics buffer allocators to select appropriate formats/layouts/etc for the buffers.</p>\n<p>When you use an ImageReader like this, only a flag for 'CPU use' is set; when you then try to send the buffer to the encoder, it likely errors out when trying to access the buffer from the hardware encoder.</p>\n<p>You can try using this variant of the ImageReader constructor:\n<a href=\"https://developer.android.com/reference/android/media/ImageReader?hl=en#newInstance(int,%20int,%20int,%20int,%20long)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/media/ImageReader?hl=en#newInstance(int,%20int,%20int,%20int,%20long)</a></p>\n<p>and pass in the <code>USAGE_VIDEO_ENCODE</code> and <code>USAGE_CPU_READ_OFTEN</code> flags.  Note that this isn't a guaranteed-to-work combination, unfortunately. That said, I'd expect it to likely work with YUV_420_888 as the format. (PRIVATE format would mean you couldn't read from it in app code, since you won't know the layout).</p>\n<p>The most compatible option is to either have two output streams, one to the encoder and one to the ImageReader for ML. Or do the copying in the GPU like you did before.</p>\n"}],"owner":{"account_id":6871137,"reputation":933,"user_id":5281431,"display_name":"mrousavy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77153362,"answer_count":1,"score":0,"last_activity_date":1695327161,"creation_date":1695318365,"question_id":77152531,"body_markdown":"I&#39;m trying to create an app that uses Camera2 to both detect QR codes and record a video.\r\n\r\nI have many outputs, and since I cannot attach everything at once to the Camera, I needed to do both my frame processing (QR Code or whatever) and my media recording in one single Camera Output.\r\nI decided to go for an `ImageReader`, where I receive my `Image`s which I can then process, and then pass them through to another output surface, in this case the `MediaRecorder`&#39;s Surface, using an `ImageWriter`. So:\r\n\r\n`ImageReader` -&gt; do some ML processing on the `Image` -&gt; `ImageWriter` -&gt; `MediaRecorder`\r\n\r\nMy current setup looks like this:\r\n\r\n```kt\r\nclass VideoPipeline(width: Int,\r\n                    height: Int,\r\n                    format: Int): ImageReader.OnImageAvailableListener {\r\n  private var passThroughImageWriter: ImageWriter? = null\r\n\r\n  init {\r\n    imageReader = ImageReader.newInstance(width, height, format, 5)\r\n    imageReader.setOnImageAvailableListener(this, videoThreadHandler)\r\n    setupCamera(imageReader.surface, previewSurface, photoOutputSurface)\r\n  }\r\n\r\n  fun startRecording() {\r\n    val recorderSurface = MediaCodec.createPersistentInputSurface()\r\n    val recorder = MediaRecorder(...)\r\n    recorder.setVideoSource(MediaRecorder.VideoSource.SURFACE)\r\n    // a bunch of other setup code for media recorder\r\n    recorder.setInputSurface(surface)\r\n    recorder.prepare()\r\n    recorder.start()\r\n\r\n    passThroughImageWriter = ImageWriter.newInstance(recorderSurface, 5)\r\n  }\r\n  \r\n  override fun onImageAvailable(reader: ImageReader) {\r\n    val image = reader.acquireLatestImage()\r\n    \r\n    if (passThroughImageWriter != null) {\r\n      // Moves the Image to the ImageWriter, no need to close\r\n      passThroughImageWriter?.queueInputImage(image)\r\n    } else {\r\n      // Nothing else happening here, close image.\r\n      image.close()\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBut this just fails every time, no matter what `format` I use (Tried `ImageFormat.YUV_420_888`, `ImageFormat.PRIVATE` and `PixelFormat.RGB888`):\r\n\r\n```\r\nVideoPipeline           D  --&gt; writing 1280 x 960 34 frame..\r\nGraphicBufferSource     D  got buffer with new dataSpace #104\r\nGraphicBufferSource     W  released unpopulated slots: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63]\r\nVideoPipeline           D  --&gt; writing 1280 x 960 34 frame..\r\nGraphicBufferSource     W  released unpopulated slots: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63]\r\nRecordingSession        E  MediaRecorder Error: 268435556 (-1007)\r\nRecordingSession        I  Stopping RecordingSession..\r\nVideoPipeline           D  --&gt; writing 1280 x 960 34 frame..\r\nGraphicBufferSource     W  released unpopulated slots: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63]\r\nMediaRecorder           E  stop failed: -1007\r\nAndroidRuntime          D  Shutting down VM\r\nAndroidRuntime          E  FATAL EXCEPTION: main\r\n                            Process: com.mrousavy.camera.example, PID: 6406\r\n                            java.lang.RuntimeException: stop failed.\r\n                              at android.media.MediaRecorder.stop(Native Method)\r\n                              at com.mrousavy.camera.core.RecordingSession.stop(RecordingSession.kt:103)\r\n                              at com.mrousavy.camera.core.RecordingSession._init_$lambda$0(RecordingSession.kt:75)\r\n                              at com.mrousavy.camera.core.RecordingSession.$r8$lambda$enBPf4dA0r-MTevnd6ChW75ZCDg(Unknown Source:0)\r\n                              at com.mrousavy.camera.core.RecordingSession$$ExternalSyntheticLambda0.onError(Unknown Source:2)\r\n                              at android.media.MediaRecorder$EventHandler.handleMessage(MediaRecorder.java:1615)\r\n                              at android.os.Handler.dispatchMessage(Handler.java:106)\r\n                              at android.os.Looper.loopOnce(Looper.java:201)\r\n                              at android.os.Looper.loop(Looper.java:288)\r\n                              at android.app.ActivityThread.main(ActivityThread.java:7872)\r\n                              at java.lang.reflect.Method.invoke(Native Method)\r\n                              at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n                              at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\r\n```\r\n\r\nAny ideas why?\r\n\r\nFull code:\r\n- [`VideoPipeline.kt`](https://github.com/mrousavy/react-native-vision-camera/blob/fix/image-writer-queueing/package/android/src/main/java/com/mrousavy/camera/core/VideoPipeline.kt)\r\n- [`RecordingSession.kt`](https://github.com/mrousavy/react-native-vision-camera/blob/fix/image-writer-queueing/package/android/src/main/java/com/mrousavy/camera/core/RecordingSession.kt)\r\n\r\nJFYI: Before I used `ImageWriter`, I had an OpenGL pipeline that just streamed into the `MediaRecorder`&#39;s surface using OpenGL Surfaces, that worked perfectly fine. So I think the `MediaRecorder` is set up properly, it&#39;s gotta be something with the `ImageWriter` imo.\r\n\r\nHere&#39;s the diff where I switched from the OpenGL pipeline to `ImageWriter`: [`4e96eb7`](https://github.com/mrousavy/react-native-vision-camera/commit/4e96eb77e0755edf5a4351d61fa36d60415f1db6) (reason being that OpenGL is always RGB, and I want PRIVATE/YUV frames)\r\n\r\nI&#39;d appreciate any pointers/help here!","title":"Not able to pass Images to RecordingSession Surface with ImageWriter","body":"<p>I'm trying to create an app that uses Camera2 to both detect QR codes and record a video.</p>\n<p>I have many outputs, and since I cannot attach everything at once to the Camera, I needed to do both my frame processing (QR Code or whatever) and my media recording in one single Camera Output.\nI decided to go for an <code>ImageReader</code>, where I receive my <code>Image</code>s which I can then process, and then pass them through to another output surface, in this case the <code>MediaRecorder</code>'s Surface, using an <code>ImageWriter</code>. So:</p>\n<p><code>ImageReader</code> -&gt; do some ML processing on the <code>Image</code> -&gt; <code>ImageWriter</code> -&gt; <code>MediaRecorder</code></p>\n<p>My current setup looks like this:</p>\n<pre><code>class VideoPipeline(width: Int,\n                    height: Int,\n                    format: Int): ImageReader.OnImageAvailableListener {\n  private var passThroughImageWriter: ImageWriter? = null\n\n  init {\n    imageReader = ImageReader.newInstance(width, height, format, 5)\n    imageReader.setOnImageAvailableListener(this, videoThreadHandler)\n    setupCamera(imageReader.surface, previewSurface, photoOutputSurface)\n  }\n\n  fun startRecording() {\n    val recorderSurface = MediaCodec.createPersistentInputSurface()\n    val recorder = MediaRecorder(...)\n    recorder.setVideoSource(MediaRecorder.VideoSource.SURFACE)\n    // a bunch of other setup code for media recorder\n    recorder.setInputSurface(surface)\n    recorder.prepare()\n    recorder.start()\n\n    passThroughImageWriter = ImageWriter.newInstance(recorderSurface, 5)\n  }\n  \n  override fun onImageAvailable(reader: ImageReader) {\n    val image = reader.acquireLatestImage()\n    \n    if (passThroughImageWriter != null) {\n      // Moves the Image to the ImageWriter, no need to close\n      passThroughImageWriter?.queueInputImage(image)\n    } else {\n      // Nothing else happening here, close image.\n      image.close()\n    }\n  }\n}\n</code></pre>\n<p>But this just fails every time, no matter what <code>format</code> I use (Tried <code>ImageFormat.YUV_420_888</code>, <code>ImageFormat.PRIVATE</code> and <code>PixelFormat.RGB888</code>):</p>\n<pre><code>VideoPipeline           D  --&gt; writing 1280 x 960 34 frame..\nGraphicBufferSource     D  got buffer with new dataSpace #104\nGraphicBufferSource     W  released unpopulated slots: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63]\nVideoPipeline           D  --&gt; writing 1280 x 960 34 frame..\nGraphicBufferSource     W  released unpopulated slots: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63]\nRecordingSession        E  MediaRecorder Error: 268435556 (-1007)\nRecordingSession        I  Stopping RecordingSession..\nVideoPipeline           D  --&gt; writing 1280 x 960 34 frame..\nGraphicBufferSource     W  released unpopulated slots: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63]\nMediaRecorder           E  stop failed: -1007\nAndroidRuntime          D  Shutting down VM\nAndroidRuntime          E  FATAL EXCEPTION: main\n                            Process: com.mrousavy.camera.example, PID: 6406\n                            java.lang.RuntimeException: stop failed.\n                              at android.media.MediaRecorder.stop(Native Method)\n                              at com.mrousavy.camera.core.RecordingSession.stop(RecordingSession.kt:103)\n                              at com.mrousavy.camera.core.RecordingSession._init_$lambda$0(RecordingSession.kt:75)\n                              at com.mrousavy.camera.core.RecordingSession.$r8$lambda$enBPf4dA0r-MTevnd6ChW75ZCDg(Unknown Source:0)\n                              at com.mrousavy.camera.core.RecordingSession$$ExternalSyntheticLambda0.onError(Unknown Source:2)\n                              at android.media.MediaRecorder$EventHandler.handleMessage(MediaRecorder.java:1615)\n                              at android.os.Handler.dispatchMessage(Handler.java:106)\n                              at android.os.Looper.loopOnce(Looper.java:201)\n                              at android.os.Looper.loop(Looper.java:288)\n                              at android.app.ActivityThread.main(ActivityThread.java:7872)\n                              at java.lang.reflect.Method.invoke(Native Method)\n                              at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n                              at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\n</code></pre>\n<p>Any ideas why?</p>\n<p>Full code:</p>\n<ul>\n<li><a href=\"https://github.com/mrousavy/react-native-vision-camera/blob/fix/image-writer-queueing/package/android/src/main/java/com/mrousavy/camera/core/VideoPipeline.kt\" rel=\"nofollow noreferrer\"><code>VideoPipeline.kt</code></a></li>\n<li><a href=\"https://github.com/mrousavy/react-native-vision-camera/blob/fix/image-writer-queueing/package/android/src/main/java/com/mrousavy/camera/core/RecordingSession.kt\" rel=\"nofollow noreferrer\"><code>RecordingSession.kt</code></a></li>\n</ul>\n<p>JFYI: Before I used <code>ImageWriter</code>, I had an OpenGL pipeline that just streamed into the <code>MediaRecorder</code>'s surface using OpenGL Surfaces, that worked perfectly fine. So I think the <code>MediaRecorder</code> is set up properly, it's gotta be something with the <code>ImageWriter</code> imo.</p>\n<p>Here's the diff where I switched from the OpenGL pipeline to <code>ImageWriter</code>: <a href=\"https://github.com/mrousavy/react-native-vision-camera/commit/4e96eb77e0755edf5a4351d61fa36d60415f1db6\" rel=\"nofollow noreferrer\"><code>4e96eb7</code></a> (reason being that OpenGL is always RGB, and I want PRIVATE/YUV frames)</p>\n<p>I'd appreciate any pointers/help here!</p>\n"},{"tags":["java","spring-jms","activemq-artemis"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695246296,"post_id":77146030,"comment_id":136000559,"body_markdown":"What do you mean by, &quot;when the listener ends the treatment&quot;?","body":"What do you mean by, &quot;when the listener ends the treatment&quot;?"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695246330,"post_id":77146030,"comment_id":136000564,"body_markdown":"What version of ActiveMQ Artemis are you using?","body":"What version of ActiveMQ Artemis are you using?"},{"owner":{"account_id":3445746,"reputation":85,"user_id":2886612,"display_name":"Jonathan"},"score":0,"creation_date":1695279202,"post_id":77146030,"comment_id":136003674,"body_markdown":"When the listener sends the response (so after the timeout of the original producer). I&#39;m using the version 2.29.0, but I tried the last one (2.31.0) and I have the same behavior","body":"When the listener sends the response (so after the timeout of the original producer). I&#39;m using the version 2.29.0, but I tried the last one (2.31.0) and I have the same behavior"},{"owner":{"account_id":3445746,"reputation":85,"user_id":2886612,"display_name":"Jonathan"},"score":0,"creation_date":1695286981,"post_id":77146030,"comment_id":136005180,"body_markdown":"An explanation of what I see in the code of Spring &amp; artemis-jms-client. When Spring tries to send the response, it calls ActiveMQSession#createProducer that will create a durable address and the temporary queue through the method ActiveMQSession#checkDestination.  \n\nAs the address is not temporary, I can&#39;t set specific configuration to delete temporary queues if there&#39;s no consumer on it.  \n\nThe only solution I see here is to forbidden the automatic creations of queues. It will throws an InvalidDestinationException, but I don&#39;t have the temporary queue created after the timeout","body":"An explanation of what I see in the code of Spring &amp; artemis-jms-client. When Spring tries to send the response, it calls ActiveMQSession#createProducer that will create a durable address and the temporary queue through the method ActiveMQSession#checkDestination.    As the address is not temporary, I can&#39;t set specific configuration to delete temporary queues if there&#39;s no consumer on it.    The only solution I see here is to forbidden the automatic creations of queues. It will throws an InvalidDestinationException, but I don&#39;t have the temporary queue created after the timeout"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695923863,"post_id":77146030,"comment_id":136092015,"body_markdown":"This looks like a bug to me. For the time being you can work-around the issue by configuring automatic address deletion via the `auto-delete-addresses` address-setting. See [the documentation](https://activemq.apache.org/components/artemis/documentation/latest/address-settings.html#address-settings) for more details on that setting and other related settings.","body":"This looks like a bug to me. For the time being you can work-around the issue by configuring automatic address deletion via the <code>auto-delete-addresses</code> address-setting. See <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/address-settings.html#address-settings\" rel=\"nofollow noreferrer\">the documentation</a> for more details on that setting and other related settings."}],"answers":[{"comments":[{"owner":{"account_id":3445746,"reputation":85,"user_id":2886612,"display_name":"Jonathan"},"score":0,"creation_date":1695365717,"post_id":77153318,"comment_id":136017197,"body_markdown":"The problem is the address. It&#39;s not a temporary address (unlike the address created by the original producer), so I can&#39;t set a specific configuration through the address settings.\n\nSet a time to live can be a good idea, but it only will delete the message  (and maybe the temporary queue, I will test it). But the address, not temporary, can stay without any queue in it. It&#39;s what I can see when I shutdown my application : the queue is destroyed but not the address.","body":"The problem is the address. It&#39;s not a temporary address (unlike the address created by the original producer), so I can&#39;t set a specific configuration through the address settings.  Set a time to live can be a good idea, but it only will delete the message  (and maybe the temporary queue, I will test it). But the address, not temporary, can stay without any queue in it. It&#39;s what I can see when I shutdown my application : the queue is destroyed but not the address."}],"tags":[],"owner":{"account_id":18991509,"reputation":190,"user_id":13860684,"display_name":"Nine Friends"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695326544,"creation_date":1695326544,"answer_id":77153318,"question_id":77146030,"body_markdown":"In many use cases of synchronous communication pattern, the response of the service provider is of no value anymore, after the requester stops waiting for it. And I believe you describe such a use case. Then it makes sense to set a time to live for the request message:\r\n\r\n    JMSTemplate.setTimeToLive(long timeToLiveInMs)\r\n\r\nSet it to a value corresponding to your timeout. If there is a delay in the service provider consuming the request, the message will expire approximately at the time you stop waiting for the response, thus the service provider won’t be bothered with processing this request anymore and hence won’t send a redundant response. Unless you have not specified an expiry address in your address setting, the expired messages are deleted.\r\n\r\nThis might not eliminate every single case of redundant response, for example, when the response is created in time, but there is a delay in transmitting it to your application, or because your application goes down during your timeout interval. Thus, the service provider should propagate a time to live value of the request message to the response message. And I agree with your comment, the service provider should not be allowed to re-create the response queue. With time to live, the occurrence of these attempts will happen less often.\r\n","title":"Spring JMS &amp; ActiveMQ Artemis: manage timeout for synchronous messages","body":"<p>In many use cases of synchronous communication pattern, the response of the service provider is of no value anymore, after the requester stops waiting for it. And I believe you describe such a use case. Then it makes sense to set a time to live for the request message:</p>\n<pre><code>JMSTemplate.setTimeToLive(long timeToLiveInMs)\n</code></pre>\n<p>Set it to a value corresponding to your timeout. If there is a delay in the service provider consuming the request, the message will expire approximately at the time you stop waiting for the response, thus the service provider won’t be bothered with processing this request anymore and hence won’t send a redundant response. Unless you have not specified an expiry address in your address setting, the expired messages are deleted.</p>\n<p>This might not eliminate every single case of redundant response, for example, when the response is created in time, but there is a delay in transmitting it to your application, or because your application goes down during your timeout interval. Thus, the service provider should propagate a time to live value of the request message to the response message. And I agree with your comment, the service provider should not be allowed to re-create the response queue. With time to live, the occurrence of these attempts will happen less often.</p>\n"}],"owner":{"account_id":3445746,"reputation":85,"user_id":2886612,"display_name":"Jonathan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695326544,"creation_date":1695245459,"question_id":77146030,"body_markdown":"I have a huge application using JMS to communicate. Unfortunately, all the messages are synchronous for now and we use the method `JmsTemplate#sendAndReceive`.\r\n\r\nAll right, it works ! But....\r\n\r\nIf we have a timeout, the producer closes the temporary queue (defined to receive the response), as expected. But when the listener ends the treatment, it will recreate the temporary queue to send the response. This queue is temporary (with no consumer), but the address is not flagged as temporary as well. \r\n\r\nThe result is that we have multiple addresses and queues waiting a consumer to treat the response and it will never happen.\r\n\r\nHow to prevent the re-creation of the temporary queue if the producer (of the original message) closed it before, and doesn&#39;t wait anymore?\r\n\r\nEdit: I&#39;m using Artemis 2.29.0, but I have the the same behavior with the last version 2.31.0","title":"Spring JMS &amp; ActiveMQ Artemis: manage timeout for synchronous messages","body":"<p>I have a huge application using JMS to communicate. Unfortunately, all the messages are synchronous for now and we use the method <code>JmsTemplate#sendAndReceive</code>.</p>\n<p>All right, it works ! But....</p>\n<p>If we have a timeout, the producer closes the temporary queue (defined to receive the response), as expected. But when the listener ends the treatment, it will recreate the temporary queue to send the response. This queue is temporary (with no consumer), but the address is not flagged as temporary as well.</p>\n<p>The result is that we have multiple addresses and queues waiting a consumer to treat the response and it will never happen.</p>\n<p>How to prevent the re-creation of the temporary queue if the producer (of the original message) closed it before, and doesn't wait anymore?</p>\n<p>Edit: I'm using Artemis 2.29.0, but I have the the same behavior with the last version 2.31.0</p>\n"},{"tags":["java","amazon-web-services","jersey","jax-rs","jersey-client"],"comments":[{"owner":{"account_id":984172,"reputation":594,"user_id":1003113,"display_name":"Martynas Jusevičius"},"score":0,"creation_date":1695410294,"post_id":77153267,"comment_id":136025818,"body_markdown":"So far no luck injecting `Providers` (or otherwise obtaining a `MessageBodyWriter` instance) in the `ClientRequestFilter` :/","body":"So far no luck injecting <code>Providers</code> (or otherwise obtaining a <code>MessageBodyWriter</code> instance) in the <code>ClientRequestFilter</code> :/"},{"owner":{"account_id":984172,"reputation":594,"user_id":1003113,"display_name":"Martynas Jusevičius"},"score":0,"creation_date":1695413285,"post_id":77153267,"comment_id":136026208,"body_markdown":"Using a `WriterInterceptor` might be another approach: https://stackoverflow.com/a/33519702/1003113","body":"Using a <code>WriterInterceptor</code> might be another approach: <a href=\"https://stackoverflow.com/a/33519702/1003113\">stackoverflow.com/a/33519702/1003113</a>"}],"owner":{"account_id":984172,"reputation":594,"user_id":1003113,"display_name":"Martynas Jusevičius"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695326452,"creation_date":1695326079,"question_id":77153267,"body_markdown":"My application is using [Jersey client](https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest/client.html) and I want to deploy it on AWS and access resources that require [request authentication using AWS SigV4](https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html).\r\n\r\nI have looked at client code [examples specific to the Neptune DB](https://github.com/aws/amazon-neptune-sigv4-signer/tree/master/src/main/java/com/amazonaws/neptune/auth) (which is the service I&#39;m planning to use). They depend on getting the request entity content, which is one of the things used for SigV4 signing, together with the request URI and headers.\r\n\r\nI was planning to implement the Jersey version as `ClientRequestFilter`, but I realized that while the entity object is set (it can be retrieved using [`ClientRequestContext::getEntity`](https://docs.oracle.com/javaee/7/api/javax/ws/rs/client/ClientRequestContext.html#getEntity--)), it is not yet written at that stage. Serialization [happens later in the lifecycle in the `MessageBodyWriter`](https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest/filters-and-interceptors.html#d0e10038).\r\n\r\nAny ideas how to implement it? One caveat is that signing has to be applied even when the request has no entity (empty string is used as the entity in that case).\r\n\r\nIn the meanwhile I will try to inject `Providers` into the `ClientRequestFilter` and serialize the entity there, or split this implementation over the `ClientRequestFilter` and the `MessageBodyWriter`, which would not be ideal.","title":"Getting request entity in Jersey&#39;s ClientRequestFilter","body":"<p>My application is using <a href=\"https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest/client.html\" rel=\"nofollow noreferrer\">Jersey client</a> and I want to deploy it on AWS and access resources that require <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html\" rel=\"nofollow noreferrer\">request authentication using AWS SigV4</a>.</p>\n<p>I have looked at client code <a href=\"https://github.com/aws/amazon-neptune-sigv4-signer/tree/master/src/main/java/com/amazonaws/neptune/auth\" rel=\"nofollow noreferrer\">examples specific to the Neptune DB</a> (which is the service I'm planning to use). They depend on getting the request entity content, which is one of the things used for SigV4 signing, together with the request URI and headers.</p>\n<p>I was planning to implement the Jersey version as <code>ClientRequestFilter</code>, but I realized that while the entity object is set (it can be retrieved using <a href=\"https://docs.oracle.com/javaee/7/api/javax/ws/rs/client/ClientRequestContext.html#getEntity--\" rel=\"nofollow noreferrer\"><code>ClientRequestContext::getEntity</code></a>), it is not yet written at that stage. Serialization <a href=\"https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest/filters-and-interceptors.html#d0e10038\" rel=\"nofollow noreferrer\">happens later in the lifecycle in the <code>MessageBodyWriter</code></a>.</p>\n<p>Any ideas how to implement it? One caveat is that signing has to be applied even when the request has no entity (empty string is used as the entity in that case).</p>\n<p>In the meanwhile I will try to inject <code>Providers</code> into the <code>ClientRequestFilter</code> and serialize the entity there, or split this implementation over the <code>ClientRequestFilter</code> and the <code>MessageBodyWriter</code>, which would not be ideal.</p>\n"},{"tags":["java","spring","spring-kafka"],"answers":[{"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1695326717,"post_id":77153242,"comment_id":136013333,"body_markdown":"Correct - docs here: https://docs.spring.io/spring-kafka/docs/current/reference/html/#custom-naming-strategies","body":"Correct - docs here: <a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#custom-naming-strategies\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1695326847,"post_id":77153242,"comment_id":136013351,"body_markdown":"Another example here: https://stackoverflow.com/questions/75723808/send-kafka-retryable-message-to-one-topic-via-spring-retry/75733513#75733513","body":"Another example here: <a href=\"https://stackoverflow.com/questions/75723808/send-kafka-retryable-message-to-one-topic-via-spring-retry/75733513#75733513\" title=\"send kafka retryable message to one topic via spring retry\">stackoverflow.com/questions/75723808/&hellip;</a>"},{"owner":{"account_id":7037433,"reputation":61,"user_id":5390986,"display_name":"feenix110998"},"score":0,"creation_date":1695927004,"post_id":77153242,"comment_id":136092453,"body_markdown":"After subclassing RetryTopicConfigurationSupport and overriding createComponentFactory  the dlt is using the correct topic name ( yay!) however the app is logging : &quot;threw an error at topic mytopic-retry and won&#39;t be retried. Sending to DLT with name mytopic_dead.&quot; So the configured retry cycle is being skipped and the message goes directly to the DLT .  Is there any other configuration needed? Should I override other methods is RetryTopicConfigurationSupport ? Thanks","body":"After subclassing RetryTopicConfigurationSupport and overriding createComponentFactory  the dlt is using the correct topic name ( yay!) however the app is logging : &quot;threw an error at topic mytopic-retry and won&#39;t be retried. Sending to DLT with name mytopic_dead.&quot; So the configured retry cycle is being skipped and the message goes directly to the DLT .  Is there any other configuration needed? Should I override other methods is RetryTopicConfigurationSupport ? Thanks"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1695928689,"post_id":77153242,"comment_id":136092723,"body_markdown":"It depends on the exception type; some exceptions (such as message conversion etc) are considered fatal and not retried. If something else is happening; ask a new question showing your code, config, logs etc.","body":"It depends on the exception type; some exceptions (such as message conversion etc) are considered fatal and not retried. If something else is happening; ask a new question showing your code, config, logs etc."},{"owner":{"account_id":7037433,"reputation":61,"user_id":5390986,"display_name":"feenix110998"},"score":0,"creation_date":1695929501,"post_id":77153242,"comment_id":136092829,"body_markdown":"will do, thanks","body":"will do, thanks"}],"tags":[],"owner":{"account_id":7037433,"reputation":61,"user_id":5390986,"display_name":"feenix110998"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695325715,"creation_date":1695325715,"answer_id":77153242,"question_id":77153219,"body_markdown":"I think we can use the  RetryTopicConfigurationSupport https://docs.spring.io/spring-kafka/api/org/springframework/kafka/retrytopic/RetryTopicConfigurationSupport.html\r\n","title":"RetryTopicNamesProviderFactory with Spring-Kafka 3.0.10","body":"<p>I think we can use the  RetryTopicConfigurationSupport <a href=\"https://docs.spring.io/spring-kafka/api/org/springframework/kafka/retrytopic/RetryTopicConfigurationSupport.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/api/org/springframework/kafka/retrytopic/RetryTopicConfigurationSupport.html</a></p>\n"}],"owner":{"account_id":7037433,"reputation":61,"user_id":5390986,"display_name":"feenix110998"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77153242,"answer_count":1,"score":0,"last_activity_date":1695325715,"creation_date":1695325445,"question_id":77153219,"body_markdown":"I implemented a non-blocking retry for my kafka app using Spring-Kafa 2.7. I needed a custom topic name for the DLT so RetryTopicNamesProviderFactory was used. The retry process worked as expected with this version. Recently the app was migrated to Spring Kafka 3.0.10 and now the default DLT is used. It appears the RetryTopicNamesProviderFactory is ignored now. I found a post [post ][1]that claims that:\r\nIn 2.9.x and above the RetryTopicNamesProviderFactory bean configuration is no longer supported.\r\nIs there an equivalent or alternate method to configure a custom DLT name for retryable topic using Spring-Kafka 3.0.10 ? I looked at RetryTopicConfigurer but I need the entire name changed not just the suffix so I don&#39;t believe this will work.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/73284479/spring-kafka-retrytopicconfiguration-with-custom-names-for-retry-and-dead-lette","title":"RetryTopicNamesProviderFactory with Spring-Kafka 3.0.10","body":"<p>I implemented a non-blocking retry for my kafka app using Spring-Kafa 2.7. I needed a custom topic name for the DLT so RetryTopicNamesProviderFactory was used. The retry process worked as expected with this version. Recently the app was migrated to Spring Kafka 3.0.10 and now the default DLT is used. It appears the RetryTopicNamesProviderFactory is ignored now. I found a post <a href=\"https://stackoverflow.com/questions/73284479/spring-kafka-retrytopicconfiguration-with-custom-names-for-retry-and-dead-lette\">post </a>that claims that:\nIn 2.9.x and above the RetryTopicNamesProviderFactory bean configuration is no longer supported.\nIs there an equivalent or alternate method to configure a custom DLT name for retryable topic using Spring-Kafka 3.0.10 ? I looked at RetryTopicConfigurer but I need the entire name changed not just the suffix so I don't believe this will work.</p>\n"},{"tags":["java","recursion","backtracking","sudoku","crossword"],"answers":[{"tags":[],"owner":{"account_id":1881735,"reputation":7688,"user_id":1701776,"accept_rate":71,"display_name":"BambooleanLogic"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695313803,"creation_date":1695312692,"answer_id":77151949,"question_id":77151638,"body_markdown":"There are two issues with the code.\r\n\r\nThe first is a bug in the recursion that results in the second-to-last blank cell never getting filled in.\r\n\r\n```\r\nif (isFilled(matrix)) {\r\n    return;\r\n} else {\r\n    fillMatrixBruteForce(matrix);\r\n}\r\n```\r\n\r\nIn the first case, we check if we just placed the final letter. If we did, we return. That part is fine.\r\n\r\nIn the second case, we call ourselves recursively to see if this guess leads to a solution. However, _regardless of the outcome_, we act as if we failed and undo our guess.\r\n\r\nTo fix this, we also check whether the recursion succeeded, in which case we return:\r\n\r\n```java\r\nif (isFilled(matrix)) {\r\n    return;\r\n} else {\r\n    fillMatrixBruteForce(matrix);\r\n    if (isFilled(matrix)) {\r\n        return;\r\n    }\r\n}\r\n```\r\n\r\n(Alternatively, `fillMatrixBruteForce` can return either `true` or `false` to signal whether it succeeded or gave up. This means we won&#39;t have to check `isFilled` a second time.)\r\n\r\nThe second issue is the performance. The algorithm, as written, is very slow. Luckily, there is a simple tweak to massively speed it up.\r\n\r\nFor context, there are 11 open cells, each capable of containing one of five letters. That&#39;s 48,828,125 different possibilities to check. You really don&#39;t want to force your computer to recursively check all of those, meaning that rapidly giving up on impossible values is crucial.\r\n\r\nYou already do this somewhat with your `containsLetter` method. However, that only checks if a given _row_ contains the letter. This means that a LOT of obviously impossible combinations slip through the cracks and are fully brute-forced. By adding a second method, `columnContainsLetter` and checking whether the letter exists in _either_ the current row or the column (or both), that MASSIVELY cuts down on the number of possibilities we&#39;re forced to check and makes the algorithm run in mere seconds on my computer.","title":"How do I implement crossword solver correctly in Java","body":"<p>There are two issues with the code.</p>\n<p>The first is a bug in the recursion that results in the second-to-last blank cell never getting filled in.</p>\n<pre><code>if (isFilled(matrix)) {\n    return;\n} else {\n    fillMatrixBruteForce(matrix);\n}\n</code></pre>\n<p>In the first case, we check if we just placed the final letter. If we did, we return. That part is fine.</p>\n<p>In the second case, we call ourselves recursively to see if this guess leads to a solution. However, <em>regardless of the outcome</em>, we act as if we failed and undo our guess.</p>\n<p>To fix this, we also check whether the recursion succeeded, in which case we return:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (isFilled(matrix)) {\n    return;\n} else {\n    fillMatrixBruteForce(matrix);\n    if (isFilled(matrix)) {\n        return;\n    }\n}\n</code></pre>\n<p>(Alternatively, <code>fillMatrixBruteForce</code> can return either <code>true</code> or <code>false</code> to signal whether it succeeded or gave up. This means we won't have to check <code>isFilled</code> a second time.)</p>\n<p>The second issue is the performance. The algorithm, as written, is very slow. Luckily, there is a simple tweak to massively speed it up.</p>\n<p>For context, there are 11 open cells, each capable of containing one of five letters. That's 48,828,125 different possibilities to check. You really don't want to force your computer to recursively check all of those, meaning that rapidly giving up on impossible values is crucial.</p>\n<p>You already do this somewhat with your <code>containsLetter</code> method. However, that only checks if a given <em>row</em> contains the letter. This means that a LOT of obviously impossible combinations slip through the cracks and are fully brute-forced. By adding a second method, <code>columnContainsLetter</code> and checking whether the letter exists in <em>either</em> the current row or the column (or both), that MASSIVELY cuts down on the number of possibilities we're forced to check and makes the algorithm run in mere seconds on my computer.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695325593,"creation_date":1695318740,"answer_id":77152574,"question_id":77151638,"body_markdown":"This is the same algorithm used to solve _Sudoku_ puzzles, referred to as _[backtracking](https://en.wikipedia.org/wiki/Sudoku_solving_algorithms#Sudoku_brute_force)_.\r\n\r\n```java\r\nclass Crossword {\r\n    char matrix[][], v[];\r\n    int length;\r\n    boolean solved;\r\n\r\n    Crossword(char[][] matrix, char[] v) {\r\n        this.matrix = matrix;\r\n        length = (this.v = v).length;\r\n    }\r\n\r\n    void solve(int m, int n) {\r\n        if (matrix[m][n] == &#39; &#39;) {\r\n            for (int i = 0, a, b; i &lt; length; i++) {\r\n                if (valid(m, n, v[i])) {\r\n                    matrix[m][n] = v[i];\r\n                    a = m;\r\n                    b = n;\r\n                    if (++n == length) {\r\n                        n = 0;\r\n                        if (++m == length) {\r\n                            solved = true;\r\n                            return;\r\n                        }\r\n                    }\r\n                    solve(m, n);\r\n                    if (solved) return;\r\n                    m = a;\r\n                    n = b;\r\n                    matrix[m][n] = &#39; &#39;;\r\n                }\r\n            }\r\n        } else {\r\n            if (++n == length) {\r\n                n = 0;\r\n                if (++m == length) {\r\n                    solved = true;\r\n                    return;\r\n                }\r\n            }\r\n            solve(m, n);\r\n        }\r\n    }\r\n\r\n    boolean valid(int m, int n, char c) {\r\n        for (int i = 0; i &lt; length; i++) {\r\n            if (matrix[m][i] == c) return false;\r\n            if (matrix[i][n] == c) return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nHere is an example.\r\n\r\n```java\r\nchar[][] matrix = {\r\n    {&#39;B&#39;, &#39;R&#39;, &#39;A&#39;, &#39;V&#39;, &#39;E&#39;},\r\n    {&#39; &#39;, &#39;E&#39;, &#39;B&#39;, &#39;R&#39;, &#39; &#39;},\r\n    {&#39; &#39;, &#39; &#39;, &#39;V&#39;, &#39; &#39;, &#39;B&#39;},\r\n    {&#39; &#39;, &#39;B&#39;, &#39;R&#39;, &#39; &#39;, &#39; &#39;},\r\n    {&#39; &#39;, &#39; &#39;, &#39;E&#39;, &#39;B&#39;, &#39; &#39;}\r\n};\r\nchar[] v = new char[] { &#39;B&#39;, &#39;R&#39;, &#39;A&#39;, &#39;V&#39;, &#39;E&#39; };\r\nCrossword c = new Crossword(matrix, v);\r\nc.solve(0, 0);\r\nStream.of(c.matrix).forEach(x -&gt; System.out.println(Arrays.toString(x)));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[B, R, A, V, E]\r\n[V, E, B, R, A]\r\n[R, A, V, E, B]\r\n[E, B, R, A, V]\r\n[A, V, E, B, R]\r\n```","title":"How do I implement crossword solver correctly in Java","body":"<p>This is the same algorithm used to solve <em>Sudoku</em> puzzles, referred to as <em><a href=\"https://en.wikipedia.org/wiki/Sudoku_solving_algorithms#Sudoku_brute_force\" rel=\"nofollow noreferrer\">backtracking</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Crossword {\n    char matrix[][], v[];\n    int length;\n    boolean solved;\n\n    Crossword(char[][] matrix, char[] v) {\n        this.matrix = matrix;\n        length = (this.v = v).length;\n    }\n\n    void solve(int m, int n) {\n        if (matrix[m][n] == ' ') {\n            for (int i = 0, a, b; i &lt; length; i++) {\n                if (valid(m, n, v[i])) {\n                    matrix[m][n] = v[i];\n                    a = m;\n                    b = n;\n                    if (++n == length) {\n                        n = 0;\n                        if (++m == length) {\n                            solved = true;\n                            return;\n                        }\n                    }\n                    solve(m, n);\n                    if (solved) return;\n                    m = a;\n                    n = b;\n                    matrix[m][n] = ' ';\n                }\n            }\n        } else {\n            if (++n == length) {\n                n = 0;\n                if (++m == length) {\n                    solved = true;\n                    return;\n                }\n            }\n            solve(m, n);\n        }\n    }\n\n    boolean valid(int m, int n, char c) {\n        for (int i = 0; i &lt; length; i++) {\n            if (matrix[m][i] == c) return false;\n            if (matrix[i][n] == c) return false;\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char[][] matrix = {\n    {'B', 'R', 'A', 'V', 'E'},\n    {' ', 'E', 'B', 'R', ' '},\n    {' ', ' ', 'V', ' ', 'B'},\n    {' ', 'B', 'R', ' ', ' '},\n    {' ', ' ', 'E', 'B', ' '}\n};\nchar[] v = new char[] { 'B', 'R', 'A', 'V', 'E' };\nCrossword c = new Crossword(matrix, v);\nc.solve(0, 0);\nStream.of(c.matrix).forEach(x -&gt; System.out.println(Arrays.toString(x)));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[B, R, A, V, E]\n[V, E, B, R, A]\n[R, A, V, E, B]\n[E, B, R, A, V]\n[A, V, E, B, R]\n</code></pre>\n"}],"owner":{"account_id":21590296,"reputation":388,"user_id":15920030,"display_name":"vanderwaal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77151949,"answer_count":2,"score":2,"last_activity_date":1695325593,"creation_date":1695310121,"question_id":77151638,"body_markdown":"I have a problem with implementing the following task.\r\n\r\n&gt; A square matrix has eleven letters missing, which you have to replace.\r\n&gt;\r\n&gt; Every row, column contain all the letters in the word &quot;BRAVE&quot;.\r\n\r\nThe problem is when I try to run this code it seems that there is infinite recursion,\r\nthe program is never ending. \r\n\r\nI have been debugging for two days, Still I cannot find what is wrong.\r\n\r\n\r\n```\r\npublic class Crossword {\r\n\r\n    static Character[] letters = new Character[]{&#39;B&#39;, &#39;R&#39;, &#39;A&#39;, &#39;V&#39;, &#39;E&#39;};\r\n\r\n    static boolean isFilled(char[][] matrix) {\r\n        Set&lt;Character&gt; lettersSet = new HashSet&lt;&gt;(Arrays.asList(letters));\r\n\r\n        // Check rows and columns simultaneously\r\n        for (int i = 0; i &lt; matrix.length; i++) {\r\n            Set&lt;Character&gt; rowLetters = new HashSet&lt;&gt;();\r\n            Set&lt;Character&gt; colLetters = new HashSet&lt;&gt;();\r\n\r\n            for (int j = 0; j &lt; matrix.length; j++) {\r\n                rowLetters.add(matrix[i][j]);\r\n                colLetters.add(matrix[j][i]);\r\n            }\r\n\r\n            if (!rowLetters.containsAll(lettersSet) || !colLetters.containsAll(lettersSet)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    static boolean containsLetter(char[] row, char symbol) {\r\n        for (char c : row) {\r\n            if (c == symbol) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    static void fillMatrixBruteForce(char[][] matrix) {\r\n\r\n        for (int i = 0; i &lt; matrix.length; i++) {\r\n            for (int j = 0; j &lt; matrix.length; j++) {\r\n\r\n                if (matrix[i][j] == &#39; &#39;) {\r\n\r\n                    for (int k = 0; k &lt; letters.length; k++) {\r\n                        if (!containsLetter(matrix[i], letters[k])) {\r\n\r\n                            matrix[i][j] = letters[k];\r\n                            if (isFilled(matrix)) {\r\n                                return;\r\n                            } else {\r\n                                fillMatrixBruteForce(matrix);\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                    matrix[i][j] = &#39; &#39;;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    static void print(char[][] matrix) {\r\n        Arrays.stream(matrix).forEach(\r\n                System.out::println\r\n        );\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        char[][] matrix = {\r\n                {&#39;B&#39;, &#39;R&#39;, &#39;A&#39;, &#39;V&#39;, &#39;E&#39;},\r\n                {&#39; &#39;, &#39;E&#39;, &#39;B&#39;, &#39;R&#39;, &#39; &#39;},\r\n                {&#39; &#39;, &#39; &#39;, &#39;V&#39;, &#39; &#39;, &#39;B&#39;},\r\n                {&#39; &#39;, &#39;B&#39;, &#39;R&#39;, &#39; &#39;, &#39; &#39;},\r\n                {&#39; &#39;, &#39; &#39;, &#39;E&#39;, &#39;B&#39;, &#39; &#39;}\r\n        };\r\n        print(matrix);\r\n\r\n        fillMatrixBruteForce(matrix);\r\n        print(matrix);\r\n```\r\n","title":"How do I implement crossword solver correctly in Java","body":"<p>I have a problem with implementing the following task.</p>\n<blockquote>\n<p>A square matrix has eleven letters missing, which you have to replace.</p>\n<p>Every row, column contain all the letters in the word &quot;BRAVE&quot;.</p>\n</blockquote>\n<p>The problem is when I try to run this code it seems that there is infinite recursion,\nthe program is never ending.</p>\n<p>I have been debugging for two days, Still I cannot find what is wrong.</p>\n<pre><code>public class Crossword {\n\n    static Character[] letters = new Character[]{'B', 'R', 'A', 'V', 'E'};\n\n    static boolean isFilled(char[][] matrix) {\n        Set&lt;Character&gt; lettersSet = new HashSet&lt;&gt;(Arrays.asList(letters));\n\n        // Check rows and columns simultaneously\n        for (int i = 0; i &lt; matrix.length; i++) {\n            Set&lt;Character&gt; rowLetters = new HashSet&lt;&gt;();\n            Set&lt;Character&gt; colLetters = new HashSet&lt;&gt;();\n\n            for (int j = 0; j &lt; matrix.length; j++) {\n                rowLetters.add(matrix[i][j]);\n                colLetters.add(matrix[j][i]);\n            }\n\n            if (!rowLetters.containsAll(lettersSet) || !colLetters.containsAll(lettersSet)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    static boolean containsLetter(char[] row, char symbol) {\n        for (char c : row) {\n            if (c == symbol) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    static void fillMatrixBruteForce(char[][] matrix) {\n\n        for (int i = 0; i &lt; matrix.length; i++) {\n            for (int j = 0; j &lt; matrix.length; j++) {\n\n                if (matrix[i][j] == ' ') {\n\n                    for (int k = 0; k &lt; letters.length; k++) {\n                        if (!containsLetter(matrix[i], letters[k])) {\n\n                            matrix[i][j] = letters[k];\n                            if (isFilled(matrix)) {\n                                return;\n                            } else {\n                                fillMatrixBruteForce(matrix);\n                            }\n\n                        }\n                    }\n                    matrix[i][j] = ' ';\n                }\n            }\n        }\n\n    }\n\n    static void print(char[][] matrix) {\n        Arrays.stream(matrix).forEach(\n                System.out::println\n        );\n    }\n\n    public static void main(String[] args) {\n        char[][] matrix = {\n                {'B', 'R', 'A', 'V', 'E'},\n                {' ', 'E', 'B', 'R', ' '},\n                {' ', ' ', 'V', ' ', 'B'},\n                {' ', 'B', 'R', ' ', ' '},\n                {' ', ' ', 'E', 'B', ' '}\n        };\n        print(matrix);\n\n        fillMatrixBruteForce(matrix);\n        print(matrix);\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1695258623,"post_id":77146522,"comment_id":136001666,"body_markdown":"Possibly useful: https://stackoverflow.com/a/6810409/256196","body":"Possibly useful: <a href=\"https://stackoverflow.com/a/6810409/256196\">stackoverflow.com/a/6810409/256196</a>"}],"answers":[{"comments":[{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695258600,"post_id":77146531,"comment_id":136001664,"body_markdown":"@BasilBourque those additions are very kind of you.","body":"@BasilBourque those additions are very kind of you."}],"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695322939,"creation_date":1695255387,"answer_id":77146531,"question_id":77146522,"body_markdown":"Well you need to convert your number into a word. \r\n\r\nUse a series of `if` statements. See [tutorial][1].\r\n\r\n    String word = &quot;&quot;;\r\n    \r\n    if (i == 1) {\r\n       word = &quot;first&quot;;\r\n    }\r\n    \r\n    if (i == 2) {\r\n       word = &quot;second&quot;;\r\n    }\r\n    \r\n    if (i == 3) {\r\n       word = &quot;last&quot;;\r\n    }\r\n\r\nOr use a `switch` for the same effect. See [tutorial for basic `switch`][2], and see [JEP 361][3] for switch expressions.\r\n\r\n```java\r\nString word = switch ( i )\r\n{\r\n    case 1 -&gt; &quot;first&quot;;\r\n    case 2 -&gt; &quot;second&quot;;\r\n    case 3 -&gt; &quot;last&quot;;\r\n    default -&gt; throw new IllegalStateException ( &quot;Not 1-2-3.&quot; );\r\n};\r\n```\r\n\r\nThen you can use your word in the message instead of `i`. See [tutorial on concatenating strings][4].\r\n\r\n    System.out.println(&quot;Please enter the name for the &quot; + word + &quot; dog&quot;); \r\n    String dogName = input.nextLine();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\r\n  [3]: https://openjdk.org/jeps/361\r\n  [4]: https://docs.oracle.com/javase/tutorial/java/data/strings.html","title":"how to have &#39;i&#39; spelled out in a word instead of number format in java","body":"<p>Well you need to convert your number into a word.</p>\n<p>Use a series of <code>if</code> statements. See <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n<pre><code>String word = &quot;&quot;;\n\nif (i == 1) {\n   word = &quot;first&quot;;\n}\n\nif (i == 2) {\n   word = &quot;second&quot;;\n}\n\nif (i == 3) {\n   word = &quot;last&quot;;\n}\n</code></pre>\n<p>Or use a <code>switch</code> for the same effect. See <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow noreferrer\">tutorial for basic <code>switch</code></a>, and see <a href=\"https://openjdk.org/jeps/361\" rel=\"nofollow noreferrer\">JEP 361</a> for switch expressions.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String word = switch ( i )\n{\n    case 1 -&gt; &quot;first&quot;;\n    case 2 -&gt; &quot;second&quot;;\n    case 3 -&gt; &quot;last&quot;;\n    default -&gt; throw new IllegalStateException ( &quot;Not 1-2-3.&quot; );\n};\n</code></pre>\n<p>Then you can use your word in the message instead of <code>i</code>. See <a href=\"https://docs.oracle.com/javase/tutorial/java/data/strings.html\" rel=\"nofollow noreferrer\">tutorial on concatenating strings</a>.</p>\n<pre><code>System.out.println(&quot;Please enter the name for the &quot; + word + &quot; dog&quot;); \nString dogName = input.nextLine();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"score":0,"creation_date":1695261349,"post_id":77146774,"comment_id":136001866,"body_markdown":"Given the level of the question, introducing something like `printf`` here is probably not the best idea.","body":"Given the level of the question, introducing something like `printf`` here is probably not the best idea."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1695262479,"post_id":77146774,"comment_id":136001961,"body_markdown":"@aroth I don&#39;t know. `printf(&quot;Hello, World\\n&quot;);` was one of my first programs. I realize that *might **not*** be a point in favor.","body":"@aroth I don&#39;t know. <code>printf(&quot;Hello, World\\n&quot;);</code> was one of my first programs. I realize that <i>might <b>not</i></b> be a point in favor."},{"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"score":0,"creation_date":1695264526,"post_id":77146774,"comment_id":136002142,"body_markdown":"Well, case in point. Here are [two](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/How-to-use-Java-printf-to-format-output) [articles](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/System-out-println-print-Java-meaning-explain-class-PrintStream-String-text) from the same publisher explaining `printf` and `println` respectively.  `printf` takes 1900 words, `println` under 500. I suspect the 1900-word `printf` explanation is inadequate. :)","body":"Well, case in point. Here are <a href=\"https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/How-to-use-Java-printf-to-format-output\" rel=\"nofollow noreferrer\">two</a> <a href=\"https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/System-out-println-print-Java-meaning-explain-class-PrintStream-String-text\" rel=\"nofollow noreferrer\">articles</a> from the same publisher explaining <code>printf</code> and <code>println</code> respectively.  <code>printf</code> takes 1900 words, <code>println</code> under 500. I suspect the 1900-word <code>printf</code> explanation is inadequate. :)"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1695264902,"post_id":77146774,"comment_id":136002172,"body_markdown":"@aroth K&amp;R could have used `puts(&quot;Hello, World&quot;);` presumably they felt `printf` was important to introduce early. K&amp;R is a *masterwork* in **terseness**.","body":"@aroth K&amp;R could have used <code>puts(&quot;Hello, World&quot;);</code> presumably they felt <code>printf</code> was important to introduce early. K&amp;R is a <i>masterwork</i> in <b>terseness</b>."},{"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"score":0,"creation_date":1695265322,"post_id":77146774,"comment_id":136002206,"body_markdown":"But that&#39;s not a Java reference.  We don&#39;t know what the authors might have done if C had `println` too. Perhaps they avoided `puts` because its naming convention, while terse, is awful/completely opaque to the uninitiated.","body":"But that&#39;s not a Java reference.  We don&#39;t know what the authors might have done if C had <code>println</code> too. Perhaps they avoided <code>puts</code> because its naming convention, while terse, is awful/completely opaque to the uninitiated."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1695266655,"post_id":77146774,"comment_id":136002329,"body_markdown":"@aroth That implies `printf` isn&#39;t awful/completely opaque to the uninitiated, I wouldn&#39;t go that far. Java has `String.format`, that isn&#39;t really ***better*** is it?","body":"@aroth That implies <code>printf</code> isn&#39;t awful/completely opaque to the uninitiated, I wouldn&#39;t go that far. Java has <code>String.format</code>, that isn&#39;t really <b><i>better</i></b> is it?"}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695261106,"creation_date":1695261106,"answer_id":77146774,"question_id":77146522,"body_markdown":"I would normally recommend a new class over parallel arrays, but this is a trivial case and parallel arrays would work almost exactly as you described. Something like,\r\n\r\n\tString[] ordinals = { &quot;first&quot;, &quot;second&quot;, &quot;last&quot; };\r\n\tString[] dogNames = new String[ordinals.length];\r\n\tfor (int i = 0; i &lt; ordinals.length; i++) {\r\n\t\tSystem.out.printf(&quot;Please enter the name for the %s dog%n&quot;, ordinals[i]);\r\n\t\tdogNames[i] = input.nextLine();\r\n\t}\r\n\r\nAfter the loop executes `dogNames` contains the names of the first, second and last dogs.\r\n","title":"how to have &#39;i&#39; spelled out in a word instead of number format in java","body":"<p>I would normally recommend a new class over parallel arrays, but this is a trivial case and parallel arrays would work almost exactly as you described. Something like,</p>\n<pre><code>String[] ordinals = { &quot;first&quot;, &quot;second&quot;, &quot;last&quot; };\nString[] dogNames = new String[ordinals.length];\nfor (int i = 0; i &lt; ordinals.length; i++) {\n    System.out.printf(&quot;Please enter the name for the %s dog%n&quot;, ordinals[i]);\n    dogNames[i] = input.nextLine();\n}\n</code></pre>\n<p>After the loop executes <code>dogNames</code> contains the names of the first, second and last dogs.</p>\n"},{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695261281,"creation_date":1695261281,"answer_id":77146782,"question_id":77146522,"body_markdown":"In addition to the other suggestions, an array seems a natural solution.\r\n\r\n    static final String[] ordinal = { &quot;first&quot;, &quot;second&quot;, &quot;last&quot; };\r\n    \r\n    System.out.println(&quot;Please enter the name for the &quot; +\r\n                       ordinal[i-1] + &quot; dog&quot;); \r\n\r\n(Use of &quot;last&quot; for &quot;third&quot; as per question).\r\n\r\n(Checks for out-of-range `i` omitted).\r\n","title":"how to have &#39;i&#39; spelled out in a word instead of number format in java","body":"<p>In addition to the other suggestions, an array seems a natural solution.</p>\n<pre><code>static final String[] ordinal = { &quot;first&quot;, &quot;second&quot;, &quot;last&quot; };\n\nSystem.out.println(&quot;Please enter the name for the &quot; +\n                   ordinal[i-1] + &quot; dog&quot;); \n</code></pre>\n<p>(Use of &quot;last&quot; for &quot;third&quot; as per question).</p>\n<p>(Checks for out-of-range <code>i</code> omitted).</p>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695270604,"creation_date":1695270604,"answer_id":77147212,"question_id":77146522,"body_markdown":"Another alternative would be to make use of the [Ternary Operator](https://www.educative.io/answers/ternary-operator-in-java), for example:\r\n\r\n```\r\nfor (int i = 0; i &lt; 3; i++) {\r\n    // Example of nested Ternary Operators:\r\n    System.out.println(&quot;Please enter the name for the &quot; \r\n            + (i == 0 ? &quot;first&quot; : (i == 1 ? &quot;second&quot; : &quot;last&quot;)) + &quot; dog&quot;);\r\n}\r\n```\r\n\r\nThe output to the Console Window will be:\r\n\r\n```\r\nPlease enter the name for the first dog\r\nPlease enter the name for the second dog\r\nPlease enter the name for the last dog\r\n```\r\n\r\n**A usable example might be:**\r\n\r\n```\r\nScanner userInput = new Scanner(System.in);\r\nString ls = System.lineSeparator();\r\nString[] dogNames = new String[3];\r\nString dName;\r\n        \r\nfor (int i = 0; i &lt; dogNames.length; i++) {\r\n    dName = &quot;&quot;;\r\n    while (dName.isEmpty()) {\r\n        // Example of nested Ternary Operators:\r\n        System.out.print(&quot;Please enter the name for the &quot; \r\n                + (i == 0 ? &quot;first&quot; : (i == 1 ? &quot;second&quot; : &quot;last&quot;)) + &quot; dog: -&gt; &quot;);\r\n        dName = userInput.nextLine().trim();\r\n        if (dName.isEmpty()) {\r\n            System.out.println(&quot;You must enter a dog name! Try again...&quot; + ls);\r\n        }\r\n    }\r\n    dogNames[i] = dName;\r\n}\r\n        \r\nSystem.out.println(ls + &quot;Dog names provided are:&quot; + ls \r\n                        + &quot;-----------------------&quot;);\r\nfor (String names : dogNames) {\r\n    System.out.println(names);\r\n}\r\n```","title":"how to have &#39;i&#39; spelled out in a word instead of number format in java","body":"<p>Another alternative would be to make use of the <a href=\"https://www.educative.io/answers/ternary-operator-in-java\" rel=\"nofollow noreferrer\">Ternary Operator</a>, for example:</p>\n<pre><code>for (int i = 0; i &lt; 3; i++) {\n    // Example of nested Ternary Operators:\n    System.out.println(&quot;Please enter the name for the &quot; \n            + (i == 0 ? &quot;first&quot; : (i == 1 ? &quot;second&quot; : &quot;last&quot;)) + &quot; dog&quot;);\n}\n</code></pre>\n<p>The output to the Console Window will be:</p>\n<pre><code>Please enter the name for the first dog\nPlease enter the name for the second dog\nPlease enter the name for the last dog\n</code></pre>\n<p><strong>A usable example might be:</strong></p>\n<pre><code>Scanner userInput = new Scanner(System.in);\nString ls = System.lineSeparator();\nString[] dogNames = new String[3];\nString dName;\n        \nfor (int i = 0; i &lt; dogNames.length; i++) {\n    dName = &quot;&quot;;\n    while (dName.isEmpty()) {\n        // Example of nested Ternary Operators:\n        System.out.print(&quot;Please enter the name for the &quot; \n                + (i == 0 ? &quot;first&quot; : (i == 1 ? &quot;second&quot; : &quot;last&quot;)) + &quot; dog: -&gt; &quot;);\n        dName = userInput.nextLine().trim();\n        if (dName.isEmpty()) {\n            System.out.println(&quot;You must enter a dog name! Try again...&quot; + ls);\n        }\n    }\n    dogNames[i] = dName;\n}\n        \nSystem.out.println(ls + &quot;Dog names provided are:&quot; + ls \n                        + &quot;-----------------------&quot;);\nfor (String names : dogNames) {\n    System.out.println(names);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1695333037,"post_id":77153184,"comment_id":136014265,"body_markdown":"Nice and general.","body":"Nice and general."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695325142,"creation_date":1695325142,"answer_id":77153184,"question_id":77146522,"body_markdown":"Use the _[ordinal indicator](https://en.wikipedia.org/wiki/Ordinal_indicator)_ instead.\r\n\r\n```java\r\nString suffix(int i) {\r\n    return switch (i) {\r\n        case 11, 12, 13 -&gt; &quot;th&quot;;\r\n        default -&gt; switch (i % 10) {\r\n            case 1 -&gt; &quot;st&quot;;\r\n            case 2 -&gt; &quot;nd&quot;;\r\n            case 3 -&gt; &quot;rd&quot;;\r\n            default -&gt; &quot;th&quot;;\r\n        };\r\n    };\r\n}\r\n```\r\n\r\nHere is an example.\r\n\r\n```java\r\nfor (int i = 1; i &lt;= 5; i++)\r\n    System.out.print(i + suffix(i) + &#39; &#39;);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n1st 2nd 3rd 4th 5th \r\n```","title":"how to have &#39;i&#39; spelled out in a word instead of number format in java","body":"<p>Use the <em><a href=\"https://en.wikipedia.org/wiki/Ordinal_indicator\" rel=\"nofollow noreferrer\">ordinal indicator</a></em> instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String suffix(int i) {\n    return switch (i) {\n        case 11, 12, 13 -&gt; &quot;th&quot;;\n        default -&gt; switch (i % 10) {\n            case 1 -&gt; &quot;st&quot;;\n            case 2 -&gt; &quot;nd&quot;;\n            case 3 -&gt; &quot;rd&quot;;\n            default -&gt; &quot;th&quot;;\n        };\n    };\n}\n</code></pre>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 1; i &lt;= 5; i++)\n    System.out.print(i + suffix(i) + ' ');\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>1st 2nd 3rd 4th 5th \n</code></pre>\n"}],"owner":{"account_id":29318455,"reputation":1,"user_id":22462611,"display_name":"Angela A.A"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1695325142,"creation_date":1695255075,"question_id":77146522,"body_markdown":"Instead of having java print out \r\n\r\n    Please enter the name for dog 1:\r\n    Please enter the name for dog 2:\r\n    Please enter the name for dog 3:\r\n\r\nwith code:\r\n\r\n\r\n    System.out.println(&quot;Please enter the name for the &quot; + i + &quot;dog&quot;);\r\n    String dogName = input.nextLine();\r\n\r\nHow can I get it to print out:\r\n\r\n    Please enter the name for the first dog.\r\n    Please enter the name for the second dog.\r\n    Please enter the name for the last dog.\r\n\r\nI used:\r\n\r\n    System.out.println(&quot;Please enter the name for the &quot; + i + &quot;dog&quot;);\r\n    String dogName = input.nextLine();\r\n\r\nbut it don&#39;t want the numbers there, I want first, second, and last.\r\n","title":"how to have &#39;i&#39; spelled out in a word instead of number format in java","body":"<p>Instead of having java print out</p>\n<pre><code>Please enter the name for dog 1:\nPlease enter the name for dog 2:\nPlease enter the name for dog 3:\n</code></pre>\n<p>with code:</p>\n<pre><code>System.out.println(&quot;Please enter the name for the &quot; + i + &quot;dog&quot;);\nString dogName = input.nextLine();\n</code></pre>\n<p>How can I get it to print out:</p>\n<pre><code>Please enter the name for the first dog.\nPlease enter the name for the second dog.\nPlease enter the name for the last dog.\n</code></pre>\n<p>I used:</p>\n<pre><code>System.out.println(&quot;Please enter the name for the &quot; + i + &quot;dog&quot;);\nString dogName = input.nextLine();\n</code></pre>\n<p>but it don't want the numbers there, I want first, second, and last.</p>\n"},{"tags":["java","github","okhttp","github-api","intellij-14"],"answers":[{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694935913,"creation_date":1694870837,"answer_id":77117968,"question_id":77098825,"body_markdown":"The request `List pull requests` does not provide the query parameters `since` and `until`. That&#39;s why it is returning pull requests that don&#39;t fall within the given range. The only query parameters allowed are: `state`, `head`, `base`, `sort`, `direction`, `per_page` and `page`. See the documentation below:\r\n\r\nhttps://docs.github.com/en/rest/pulls/pulls?apiVersion=2022-11-28#list-pull-requests\r\n\r\nI think you might be mixing up the request with `List repositories for the authenticated user`, which instead accepts the query parameters `since` and `after` and allows you to filter &lt;b&gt;&lt;i&gt;repositories&lt;/i&gt;&lt;/b&gt; for their &lt;b&gt;&lt;i&gt;update&lt;/i&gt;&lt;/b&gt; date.\r\n\r\nhttps://docs.github.com/en/rest/repos/repos?apiVersion=2022-11-28#list-repositories-for-the-authenticated-user\r\n\r\nIt seems from the documentation that there are no requests that allow you to filter pull requests by their creation date. The only thing you could do is get the pull requests of a repository and then filter them manually.\r\n\r\nYour code could look something like this:\r\n\r\n```\r\npublic class ConsumeGithubAPI {\r\n\r\n    static final DateTimeFormatter GITHUB_DATE_TIME_FORMAT = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssz&quot;);\r\n\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        JsonArray pullRequests = getPullRequests(&quot;-Owner-&quot;, &quot;-reponame-&quot;, &quot;2022-06-01&quot;, &quot;2022-07-10&quot;);\r\n        String formattedOutput = formatOutput(pullRequests);\r\n        System.out.println(formattedOutput);\r\n    }\r\n\r\n    public static JsonArray getPullRequests(String owner, String repositoryName, String startDate, String endDate) throws IOException {\r\n        //Reading auth config\r\n        InputStream stream = Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;auth.properties&quot;);\r\n        Properties prop = new Properties();\r\n        prop.load(stream);\r\n\r\n        //Building URLs with HttpUrl offers:\r\n        //   1. Delegating the building without worrying about the actual syntax that holds the URL elements together (:// after the scheme, / between path segments, ? before the list of query parameters, and so on)\r\n        //   2. Parameterizing the elements of the URL. Employing actual variables would be better than using fixed expressions as I did (this was just for demonstration&#39;s sake).\r\n        OkHttpClient client = new OkHttpClient();\r\n        Request request = new Request.Builder()\r\n                .url(new HttpUrl.Builder()\r\n                        .scheme(&quot;https&quot;)\r\n                        .host(&quot;api.github.com&quot;)\r\n                        .addPathSegment(&quot;repos&quot;)\r\n                        .addPathSegment(owner)\r\n                        .addPathSegment(repositoryName)\r\n                        .addPathSegment(&quot;pulls&quot;)\r\n                        .addQueryParameter(&quot;state&quot;, &quot;all&quot;)\r\n                        .addQueryParameter(&quot;per_page&quot;, &quot;100&quot;)\r\n                        .addQueryParameter(&quot;page&quot;, &quot;1&quot;)\r\n                        .build())\r\n                .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + prop.get(&quot;auth&quot;))\r\n                .build();\r\n\r\n        //Parsing the response\r\n        JsonArray modifiedPRs = new JsonArray();\r\n        Response response = client.newCall(request).execute();\r\n        String responseBody = response.body().string();\r\n        JsonArray pullRequests = JsonParser.parseString(responseBody).getAsJsonArray();\r\n\r\n        //Employing the LocalDateTime class to better handle date/time confrontations\r\n        LocalDateTime tempDateTime;\r\n        LocalDateTime startDateTime = LocalDate.parse(startDate, DateTimeFormatter.ISO_LOCAL_DATE).atStartOfDay();\r\n        LocalDateTime endDateTime = LocalDate.parse(endDate, DateTimeFormatter.ISO_LOCAL_DATE).plusDays(1).atStartOfDay();\r\n\r\n        for (JsonElement pR : pullRequests) {\r\n            JsonObject prObject = pR.getAsJsonObject();\r\n\r\n            //Reading the creation date of the current pull request\r\n            tempDateTime = LocalDateTime.parse(prObject.get(&quot;created_at&quot;).getAsString(), GITHUB_DATE_TIME_FORMAT);\r\n\r\n            //Assuming that the date range limits are included,\r\n            //Skipping the pull request if its creation date/time is lower than startDate or greater/equal than the endDate (equal because endDate has been moved to the next day)\r\n            if (tempDateTime.isBefore(startDateTime) || tempDateTime.isEqual(endDateTime) || tempDateTime.isAfter(endDateTime)) {\r\n                continue;\r\n            }\r\n\r\n            JsonObject prData = new JsonObject();\r\n            prData.addProperty(&quot;id&quot;, prObject.get(&quot;id&quot;).getAsBigInteger());\r\n            prData.addProperty(&quot;user&quot;, prObject.get(&quot;user&quot;).getAsJsonObject().get(&quot;login&quot;).getAsString());\r\n            prData.addProperty(&quot;title&quot;, prObject.get(&quot;title&quot;).getAsString());\r\n            prData.addProperty(&quot;state&quot;, prObject.get(&quot;state&quot;).getAsString());\r\n            prData.addProperty(&quot;created_at&quot;, prObject.get(&quot;created_at&quot;).getAsString());\r\n            modifiedPRs.add(prData);\r\n        }\r\n        response.close();\r\n        return modifiedPRs;\r\n    }\r\n\r\n    private static String formatOutput(JsonArray jsonArray) {\r\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n        return gson.toJson(jsonArray);\r\n    }\r\n}\r\n```","title":"Trouble Fetching GitHub Pull Requests by Date Range in Java Using OkHttp","body":"<p>The request <code>List pull requests</code> does not provide the query parameters <code>since</code> and <code>until</code>. That's why it is returning pull requests that don't fall within the given range. The only query parameters allowed are: <code>state</code>, <code>head</code>, <code>base</code>, <code>sort</code>, <code>direction</code>, <code>per_page</code> and <code>page</code>. See the documentation below:</p>\n<p><a href=\"https://docs.github.com/en/rest/pulls/pulls?apiVersion=2022-11-28#list-pull-requests\" rel=\"nofollow noreferrer\">https://docs.github.com/en/rest/pulls/pulls?apiVersion=2022-11-28#list-pull-requests</a></p>\n<p>I think you might be mixing up the request with <code>List repositories for the authenticated user</code>, which instead accepts the query parameters <code>since</code> and <code>after</code> and allows you to filter <b><i>repositories</i></b> for their <b><i>update</i></b> date.</p>\n<p><a href=\"https://docs.github.com/en/rest/repos/repos?apiVersion=2022-11-28#list-repositories-for-the-authenticated-user\" rel=\"nofollow noreferrer\">https://docs.github.com/en/rest/repos/repos?apiVersion=2022-11-28#list-repositories-for-the-authenticated-user</a></p>\n<p>It seems from the documentation that there are no requests that allow you to filter pull requests by their creation date. The only thing you could do is get the pull requests of a repository and then filter them manually.</p>\n<p>Your code could look something like this:</p>\n<pre><code>public class ConsumeGithubAPI {\n\n    static final DateTimeFormatter GITHUB_DATE_TIME_FORMAT = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ssz&quot;);\n\n\n    public static void main(String[] args) throws IOException {\n        JsonArray pullRequests = getPullRequests(&quot;-Owner-&quot;, &quot;-reponame-&quot;, &quot;2022-06-01&quot;, &quot;2022-07-10&quot;);\n        String formattedOutput = formatOutput(pullRequests);\n        System.out.println(formattedOutput);\n    }\n\n    public static JsonArray getPullRequests(String owner, String repositoryName, String startDate, String endDate) throws IOException {\n        //Reading auth config\n        InputStream stream = Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;auth.properties&quot;);\n        Properties prop = new Properties();\n        prop.load(stream);\n\n        //Building URLs with HttpUrl offers:\n        //   1. Delegating the building without worrying about the actual syntax that holds the URL elements together (:// after the scheme, / between path segments, ? before the list of query parameters, and so on)\n        //   2. Parameterizing the elements of the URL. Employing actual variables would be better than using fixed expressions as I did (this was just for demonstration's sake).\n        OkHttpClient client = new OkHttpClient();\n        Request request = new Request.Builder()\n                .url(new HttpUrl.Builder()\n                        .scheme(&quot;https&quot;)\n                        .host(&quot;api.github.com&quot;)\n                        .addPathSegment(&quot;repos&quot;)\n                        .addPathSegment(owner)\n                        .addPathSegment(repositoryName)\n                        .addPathSegment(&quot;pulls&quot;)\n                        .addQueryParameter(&quot;state&quot;, &quot;all&quot;)\n                        .addQueryParameter(&quot;per_page&quot;, &quot;100&quot;)\n                        .addQueryParameter(&quot;page&quot;, &quot;1&quot;)\n                        .build())\n                .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + prop.get(&quot;auth&quot;))\n                .build();\n\n        //Parsing the response\n        JsonArray modifiedPRs = new JsonArray();\n        Response response = client.newCall(request).execute();\n        String responseBody = response.body().string();\n        JsonArray pullRequests = JsonParser.parseString(responseBody).getAsJsonArray();\n\n        //Employing the LocalDateTime class to better handle date/time confrontations\n        LocalDateTime tempDateTime;\n        LocalDateTime startDateTime = LocalDate.parse(startDate, DateTimeFormatter.ISO_LOCAL_DATE).atStartOfDay();\n        LocalDateTime endDateTime = LocalDate.parse(endDate, DateTimeFormatter.ISO_LOCAL_DATE).plusDays(1).atStartOfDay();\n\n        for (JsonElement pR : pullRequests) {\n            JsonObject prObject = pR.getAsJsonObject();\n\n            //Reading the creation date of the current pull request\n            tempDateTime = LocalDateTime.parse(prObject.get(&quot;created_at&quot;).getAsString(), GITHUB_DATE_TIME_FORMAT);\n\n            //Assuming that the date range limits are included,\n            //Skipping the pull request if its creation date/time is lower than startDate or greater/equal than the endDate (equal because endDate has been moved to the next day)\n            if (tempDateTime.isBefore(startDateTime) || tempDateTime.isEqual(endDateTime) || tempDateTime.isAfter(endDateTime)) {\n                continue;\n            }\n\n            JsonObject prData = new JsonObject();\n            prData.addProperty(&quot;id&quot;, prObject.get(&quot;id&quot;).getAsBigInteger());\n            prData.addProperty(&quot;user&quot;, prObject.get(&quot;user&quot;).getAsJsonObject().get(&quot;login&quot;).getAsString());\n            prData.addProperty(&quot;title&quot;, prObject.get(&quot;title&quot;).getAsString());\n            prData.addProperty(&quot;state&quot;, prObject.get(&quot;state&quot;).getAsString());\n            prData.addProperty(&quot;created_at&quot;, prObject.get(&quot;created_at&quot;).getAsString());\n            modifiedPRs.add(prData);\n        }\n        response.close();\n        return modifiedPRs;\n    }\n\n    private static String formatOutput(JsonArray jsonArray) {\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n        return gson.toJson(jsonArray);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29145798,"reputation":11,"user_id":22327742,"display_name":"Lungelo Thabethe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695325099,"creation_date":1694621747,"question_id":77098825,"body_markdown":"I&#39;m working on a Java program to retrieve pull requests from a GitHub repository within a specified date range using `OkHttp` and the GitHub API. However, I&#39;m encountering issues where the code doesn&#39;t seem to filter pull requests correctly based on the date range. \r\n\r\nI&#39;m using `OkHttp` to make a GET request to the GitHub API to fetch pull requests from a specific repository.\r\n\r\nI want to filter the pull requests based on their creation date, and I&#39;m using the &#39;created&#39; parameter in the API URL to specify the date range. The dates are correctly formatted in ISO 8601 format (&#39;yyyy-MM-dd&#39;).\r\n\r\nDespite setting the date range, the API response doesn&#39;t seem to be filtering the pull requests as expected. I&#39;m still receiving pull requests outside the specified date range.\r\n\r\n\r\n```\r\npackage ConsumeGithubAPI;\r\n\r\nimport com.google.gson.*;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.Response;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class ConsumeGithubAPI {\r\n    public static void main(String[] args) {\r\n        JsonArray pullRequests = getPullRequests(&quot;-Owner-&quot;, &quot;-reponame-&quot;, &quot;2022-06-01&quot;, &quot;2022-07-10&quot;);\r\n        String formattedOutput = formatOutput(pullRequests);\r\n        System.out.println(formattedOutput);\r\n    }\r\n\r\n    public static JsonArray getPullRequests(String owner, String repositoryName, String startDate, String endDate) {\r\n\r\n        OkHttpClient client = new OkHttpClient();\r\n        Request request = new Request.Builder()\r\n                .url(&quot;https://api.github.com/repos/&quot; + owner + &quot;/&quot; + repositoryName + &quot;/pulls&quot; +\r\n                        &quot;?state=all&amp;per_page=100&amp;page=1&quot; +\r\n                        &quot;&amp;since=&quot; + startDate + &quot;T00:00:00Z&quot; +\r\n                        &quot;&amp;until=&quot; + endDate + &quot;T23:59:59Z&quot;)\r\n                .addHeader(&quot;Authorization&quot;, &quot;-token-&quot;)\r\n                .build();\r\n        JsonArray modifiedPRs = new JsonArray();\r\n        try {\r\n            Response response = client.newCall(request).execute();\r\n            String responseBody = response.body().string();\r\n\r\n            JsonArray pullRequests = JsonParser.parseString(responseBody).getAsJsonArray();\r\n\r\n            for (JsonElement pR : pullRequests) {\r\n                JsonObject prObject = pR.getAsJsonObject();\r\n                JsonObject prData = new JsonObject();\r\n                prData.addProperty(&quot;id&quot;, prObject.get(&quot;id&quot;).getAsBigInteger());\r\n                prData.addProperty(&quot;user&quot;, prObject.get(&quot;user&quot;).getAsJsonObject().get(&quot;login&quot;).getAsString());\r\n                prData.addProperty(&quot;title&quot;, prObject.get(&quot;title&quot;).getAsString());\r\n                prData.addProperty(&quot;state&quot;, prObject.get(&quot;state&quot;).getAsString());\r\n                prData.addProperty(&quot;created_at&quot;, prObject.get(&quot;created_at&quot;).getAsString());\r\n                modifiedPRs.add(prData);\r\n\r\n            }\r\n            response.close();\r\n            return modifiedPRs;\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return modifiedPRs;\r\n    }\r\n\r\n    private static String formatOutput(JsonArray jsonArray) {\r\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n        return gson.toJson(jsonArray);\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhat I&#39;ve tried:\r\n\r\nI&#39;ve checked the date formatting to ensure it&#39;s correct.\r\nI&#39;ve verified that the repository exists and contains pull requests within the date range.\r\nI&#39;ve reviewed the GitHub API documentation to confirm the correct parameter usage.\r\n","title":"Trouble Fetching GitHub Pull Requests by Date Range in Java Using OkHttp","body":"<p>I'm working on a Java program to retrieve pull requests from a GitHub repository within a specified date range using <code>OkHttp</code> and the GitHub API. However, I'm encountering issues where the code doesn't seem to filter pull requests correctly based on the date range.</p>\n<p>I'm using <code>OkHttp</code> to make a GET request to the GitHub API to fetch pull requests from a specific repository.</p>\n<p>I want to filter the pull requests based on their creation date, and I'm using the 'created' parameter in the API URL to specify the date range. The dates are correctly formatted in ISO 8601 format ('yyyy-MM-dd').</p>\n<p>Despite setting the date range, the API response doesn't seem to be filtering the pull requests as expected. I'm still receiving pull requests outside the specified date range.</p>\n<pre><code>package ConsumeGithubAPI;\n\nimport com.google.gson.*;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\nimport java.io.IOException;\n\npublic class ConsumeGithubAPI {\n    public static void main(String[] args) {\n        JsonArray pullRequests = getPullRequests(&quot;-Owner-&quot;, &quot;-reponame-&quot;, &quot;2022-06-01&quot;, &quot;2022-07-10&quot;);\n        String formattedOutput = formatOutput(pullRequests);\n        System.out.println(formattedOutput);\n    }\n\n    public static JsonArray getPullRequests(String owner, String repositoryName, String startDate, String endDate) {\n\n        OkHttpClient client = new OkHttpClient();\n        Request request = new Request.Builder()\n                .url(&quot;https://api.github.com/repos/&quot; + owner + &quot;/&quot; + repositoryName + &quot;/pulls&quot; +\n                        &quot;?state=all&amp;per_page=100&amp;page=1&quot; +\n                        &quot;&amp;since=&quot; + startDate + &quot;T00:00:00Z&quot; +\n                        &quot;&amp;until=&quot; + endDate + &quot;T23:59:59Z&quot;)\n                .addHeader(&quot;Authorization&quot;, &quot;-token-&quot;)\n                .build();\n        JsonArray modifiedPRs = new JsonArray();\n        try {\n            Response response = client.newCall(request).execute();\n            String responseBody = response.body().string();\n\n            JsonArray pullRequests = JsonParser.parseString(responseBody).getAsJsonArray();\n\n            for (JsonElement pR : pullRequests) {\n                JsonObject prObject = pR.getAsJsonObject();\n                JsonObject prData = new JsonObject();\n                prData.addProperty(&quot;id&quot;, prObject.get(&quot;id&quot;).getAsBigInteger());\n                prData.addProperty(&quot;user&quot;, prObject.get(&quot;user&quot;).getAsJsonObject().get(&quot;login&quot;).getAsString());\n                prData.addProperty(&quot;title&quot;, prObject.get(&quot;title&quot;).getAsString());\n                prData.addProperty(&quot;state&quot;, prObject.get(&quot;state&quot;).getAsString());\n                prData.addProperty(&quot;created_at&quot;, prObject.get(&quot;created_at&quot;).getAsString());\n                modifiedPRs.add(prData);\n\n            }\n            response.close();\n            return modifiedPRs;\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return modifiedPRs;\n    }\n\n    private static String formatOutput(JsonArray jsonArray) {\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n        return gson.toJson(jsonArray);\n    }\n}\n\n</code></pre>\n<p>What I've tried:</p>\n<p>I've checked the date formatting to ensure it's correct.\nI've verified that the repository exists and contains pull requests within the date range.\nI've reviewed the GitHub API documentation to confirm the correct parameter usage.</p>\n"},{"tags":["java","android","rtsp","exoplayer","exoplayer2.x"],"owner":{"account_id":22802274,"reputation":1,"user_id":16954774,"display_name":"Bob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695324850,"creation_date":1695315589,"question_id":77152260,"body_markdown":"I integrated the code from this repo into my app:\r\nhttps://github.com/kardelencanoglu/ExoPlayerRTSP\r\nAnd I&#39;m able to see the compile, and see the player on my android app in the emulator.\r\n\r\nOn my local machine I generate a rtsp stream this way, that I can recover from VLC:\r\n\r\n`/Applications/VLC.app/Contents/MacOS/VLC -I dummy blabla.mp4 --sout &#39;#rtp{sdp=rtsp://0.0.0.0:8082/live}&#39; --no-sout-all --sout-keep`\r\n\r\nin my app build.gradle:\r\n\r\n```\r\nimplementation &#39;com.google.android.exoplayer:exoplayer:2.19.1&#39;\r\n```\r\nIncluded:\r\n```\r\n\r\nimport com.google.android.exoplayer2.MediaItem;\r\nimport com.google.android.exoplayer2.SimpleExoPlayer;\r\nimport com.google.android.exoplayer2.source.MediaSource;\r\nimport com.google.android.exoplayer2.source.ProgressiveMediaSource;\r\nimport com.google.android.exoplayer2.ui.PlayerView;\r\nimport com.google.android.exoplayer2.upstream.DefaultDataSourceFactory;\r\n```\r\n\r\nin my main activity I have:\r\n```\r\n   private SimpleExoPlayer player;\r\n   private PlayerView playerView;\r\n```\r\n....\r\n\r\n playerView = findViewById(R.id.player_view);\r\n        \r\n```\r\ntry {\r\n            \r\n            // Overriding rtspStreamUrl for testing purposes\r\n            rtspStreamUrl = &quot;rtsp://10.0.2.2:8082/live&quot;;\r\n            Uri videoUri = Uri.parse(rtspStreamUrl);\r\n\r\n            player = new SimpleExoPlayer.Builder(this).build();\r\n            playerView.setPlayer(player);\r\n            MediaSource mediaSource = new ProgressiveMediaSource.Factory(new DefaultDataSourceFactory(this, &quot;exoplayer-codelab&quot;)).createMediaSource(MediaItem.fromUri(videoUri));\r\n            player.prepare(mediaSource);\r\n            player.setPlayWhenReady(true);\r\n            playerView.bringToFront();\r\n        }\r\n        catch (Exception e) {\r\n            Log.e(&quot;Unable to start EXO player&quot;,&quot;&quot;);\r\n        }\r\n```\r\n\r\nI get the following error in logcat:\r\n\r\nPlayback error\r\n                                                                                                      c*om.google.android.exoplayer2.ExoPlaybackException: Source error\r\n                                                                                                          at com.google.android.exoplayer2.ExoPlayerImplInternal.handleIoException(ExoPlayerImplInternal.java:684)\r\n                                                                                                          at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:656)\r\n                                                                                                          at android.os.Handler.dispatchMessage(Handler.java:102)\r\n                                                                                                          at android.os.Looper.loopOnce(Looper.java:205)\r\n                                                                                                          at android.os.Looper.loop(Looper.java:294)\r\n                                                                                                          at android.os.HandlerThread.run(HandlerThread.java:67)\r\n                                                                                                      Caused by: com.google.android.exoplayer2.upstream.HttpDataSource$HttpDataSourceException: java.net.MalformedURLException: unknown protocol: rtsp\r\n                                                                                                          at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:388)\r\n                                                                                                          at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:269)\r\n                                                                                                          at com.google.android.exoplayer2.upstream.StatsDataSource.open(StatsDataSource.java:90)\r\n                                                                                                          at com.google.android.exoplayer2.source.ProgressiveMediaPeriod$ExtractingLoadable.load(ProgressiveMediaPeriod.java:1013)\r\n                                                                                                          at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:420)\r\n                                                                                                          at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n                                                                                                          at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:644)\r\n                                                                                                          at java.lang.Thread.run(Thread.java:1012)\r\n                                                                                                      **Caused by: java.net.MalformedURLException: unknown protocol: rtsp**\r\n                                                                                                          at java.net.URL.&lt;init&gt;(URL.java:608)\r\n                                                                                                          at java.net.URL.&lt;init&gt;(URL.java:498)\r\n                                                                                                          at java.net.URL.&lt;init&gt;(URL.java:447)\r\n                                                                                                          at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:530)\r\n                                                                                                          at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:382)\r\n                                                                                                          at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:269)&#160;\r\n                                                                                                          at com.google.android.exoplayer2.upstream.StatsDataSource.open(StatsDataSource.java:90)&#160;\r\n                                                                                                          at com.google.android.exoplayer2.source.ProgressiveMediaPeriod$ExtractingLoadable.load(ProgressiveMediaPeriod.java:1013)&#160;\r\n                                                                                                          at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:420)&#160;\r\n                                                                                                          at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&#160;\r\n                                                                                                          at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:644)&#160;\r\n                                                                                                          at java.lang.Thread.run(Thread.java:1012)&#160;*\r\n\r\n\r\nAny idea would be much appreciated, thanks in advance!\r\n\r\n\r\n\r\nI tried to retrieve the stream in VLC, it works all fine, but not in emulator.\r\n\r\n\r\n**EDIT:**\r\nthe problem changes if I do:\r\n\r\n    import com.google.android.exoplayer2.source.rtsp.RtspMediaSource;\r\n\r\nand instead of Progressive I use:\r\n\r\n    MediaSource mediaSource =\r\n                        new RtspMediaSource.Factory().createMediaSource(MediaItem.fromUri(rtspStreamUrl));\r\n\r\nthen I get:\r\nPlayback error\r\n                                                                                                      com.google.android.exoplayer2.ExoPlaybackException: Source error\r\n                                                                                                          at com.google.android.exoplayer2.ExoPlayerImplInternal.handleIoException(ExoPlayerImplInternal.java:684)\r\n                                                                                                          at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:660)\r\n                                                                                                          at android.os.Handler.dispatchMessage(Handler.java:102)\r\n                                                                                                          at android.os.Looper.loopOnce(Looper.java:205)\r\n                                                                                                          at android.os.Looper.loop(Looper.java:294)\r\n                                                                                                          at android.os.HandlerThread.run(HandlerThread.java:67)\r\n                                                                                                      Caused by: com.google.android.exoplayer2.source.rtsp.RtspMediaSource$RtspPlaybackException: SETUP 461\r\n","title":"Exoplayer unknown source android java","body":"<p>I integrated the code from this repo into my app:\n<a href=\"https://github.com/kardelencanoglu/ExoPlayerRTSP\" rel=\"nofollow noreferrer\">https://github.com/kardelencanoglu/ExoPlayerRTSP</a>\nAnd I'm able to see the compile, and see the player on my android app in the emulator.</p>\n<p>On my local machine I generate a rtsp stream this way, that I can recover from VLC:</p>\n<p><code>/Applications/VLC.app/Contents/MacOS/VLC -I dummy blabla.mp4 --sout '#rtp{sdp=rtsp://0.0.0.0:8082/live}' --no-sout-all --sout-keep</code></p>\n<p>in my app build.gradle:</p>\n<pre><code>implementation 'com.google.android.exoplayer:exoplayer:2.19.1'\n</code></pre>\n<p>Included:</p>\n<pre><code>\nimport com.google.android.exoplayer2.MediaItem;\nimport com.google.android.exoplayer2.SimpleExoPlayer;\nimport com.google.android.exoplayer2.source.MediaSource;\nimport com.google.android.exoplayer2.source.ProgressiveMediaSource;\nimport com.google.android.exoplayer2.ui.PlayerView;\nimport com.google.android.exoplayer2.upstream.DefaultDataSourceFactory;\n</code></pre>\n<p>in my main activity I have:</p>\n<pre><code>   private SimpleExoPlayer player;\n   private PlayerView playerView;\n</code></pre>\n<p>....</p>\n<p>playerView = findViewById(R.id.player_view);</p>\n<pre><code>try {\n            \n            // Overriding rtspStreamUrl for testing purposes\n            rtspStreamUrl = &quot;rtsp://10.0.2.2:8082/live&quot;;\n            Uri videoUri = Uri.parse(rtspStreamUrl);\n\n            player = new SimpleExoPlayer.Builder(this).build();\n            playerView.setPlayer(player);\n            MediaSource mediaSource = new ProgressiveMediaSource.Factory(new DefaultDataSourceFactory(this, &quot;exoplayer-codelab&quot;)).createMediaSource(MediaItem.fromUri(videoUri));\n            player.prepare(mediaSource);\n            player.setPlayWhenReady(true);\n            playerView.bringToFront();\n        }\n        catch (Exception e) {\n            Log.e(&quot;Unable to start EXO player&quot;,&quot;&quot;);\n        }\n</code></pre>\n<p>I get the following error in logcat:</p>\n<p>Playback error\nc*om.google.android.exoplayer2.ExoPlaybackException: Source error\nat com.google.android.exoplayer2.ExoPlayerImplInternal.handleIoException(ExoPlayerImplInternal.java:684)\nat com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:656)\nat android.os.Handler.dispatchMessage(Handler.java:102)\nat android.os.Looper.loopOnce(Looper.java:205)\nat android.os.Looper.loop(Looper.java:294)\nat android.os.HandlerThread.run(HandlerThread.java:67)\nCaused by: com.google.android.exoplayer2.upstream.HttpDataSource$HttpDataSourceException: java.net.MalformedURLException: unknown protocol: rtsp\nat com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:388)\nat com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:269)\nat com.google.android.exoplayer2.upstream.StatsDataSource.open(StatsDataSource.java:90)\nat com.google.android.exoplayer2.source.ProgressiveMediaPeriod$ExtractingLoadable.load(ProgressiveMediaPeriod.java:1013)\nat com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:420)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:644)\nat java.lang.Thread.run(Thread.java:1012)\n<strong>Caused by: java.net.MalformedURLException: unknown protocol: rtsp</strong>\nat java.net.URL.(URL.java:608)\nat java.net.URL.(URL.java:498)\nat java.net.URL.(URL.java:447)\nat com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:530)\nat com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:382)\nat com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:269) \nat com.google.android.exoplayer2.upstream.StatsDataSource.open(StatsDataSource.java:90) \nat com.google.android.exoplayer2.source.ProgressiveMediaPeriod$ExtractingLoadable.load(ProgressiveMediaPeriod.java:1013) \nat com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:420) \nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) \nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:644) \nat java.lang.Thread.run(Thread.java:1012) *</p>\n<p>Any idea would be much appreciated, thanks in advance!</p>\n<p>I tried to retrieve the stream in VLC, it works all fine, but not in emulator.</p>\n<p><strong>EDIT:</strong>\nthe problem changes if I do:</p>\n<pre><code>import com.google.android.exoplayer2.source.rtsp.RtspMediaSource;\n</code></pre>\n<p>and instead of Progressive I use:</p>\n<pre><code>MediaSource mediaSource =\n                    new RtspMediaSource.Factory().createMediaSource(MediaItem.fromUri(rtspStreamUrl));\n</code></pre>\n<p>then I get:\nPlayback error\ncom.google.android.exoplayer2.ExoPlaybackException: Source error\nat com.google.android.exoplayer2.ExoPlayerImplInternal.handleIoException(ExoPlayerImplInternal.java:684)\nat com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:660)\nat android.os.Handler.dispatchMessage(Handler.java:102)\nat android.os.Looper.loopOnce(Looper.java:205)\nat android.os.Looper.loop(Looper.java:294)\nat android.os.HandlerThread.run(HandlerThread.java:67)\nCaused by: com.google.android.exoplayer2.source.rtsp.RtspMediaSource$RtspPlaybackException: SETUP 461</p>\n"},{"tags":["java","spring","junit","spring-junit"],"comments":[{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1444147308,"post_id":32974432,"comment_id":53774021,"body_markdown":"How are you instantiating an instance of `A`? My guess is that you are using `new` rather than looking it up from the ApplicationContext","body":"How are you instantiating an instance of <code>A</code>? My guess is that you are using <code>new</code> rather than looking it up from the ApplicationContext"},{"owner":{"account_id":406060,"reputation":21895,"user_id":775345,"accept_rate":96,"display_name":"Robert Moskal"},"score":0,"creation_date":1444147335,"post_id":32974432,"comment_id":53774032,"body_markdown":"So shouldn&#39;t application.properties in the @PropertySource read application-test.properties?","body":"So shouldn&#39;t application.properties in the @PropertySource read application-test.properties?"},{"owner":{"account_id":1888409,"reputation":1893,"user_id":1707141,"accept_rate":48,"display_name":"Nikhil Das Nomula"},"score":0,"creation_date":1444147383,"post_id":32974432,"comment_id":53774059,"body_markdown":"@Lance Java: Yes I am using new. Will try looking up from ApplicationContext..","body":"@Lance Java: Yes I am using new. Will try looking up from ApplicationContext.."},{"owner":{"account_id":1888409,"reputation":1893,"user_id":1707141,"accept_rate":48,"display_name":"Nikhil Das Nomula"},"score":0,"creation_date":1444147407,"post_id":32974432,"comment_id":53774071,"body_markdown":"@RobertMoskal I tried that and did&#39;nt seem to work either.","body":"@RobertMoskal I tried that and did&#39;nt seem to work either."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1444147461,"post_id":32974432,"comment_id":53774110,"body_markdown":"@user1707141 using `new` means that spring is not managing the object and does not have a chance to populate it.","body":"@user1707141 using <code>new</code> means that spring is not managing the object and does not have a chance to populate it."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1444147682,"post_id":32974432,"comment_id":53774240,"body_markdown":"This is a good argument for using [constructor injection](https://en.wikipedia.org/wiki/Dependency_injection#Constructor_injection) rather than [setter/field injection](https://en.wikipedia.org/wiki/Dependency_injection#Setter_injection)","body":"This is a good argument for using <a href=\"https://en.wikipedia.org/wiki/Dependency_injection#Constructor_injection\" rel=\"nofollow noreferrer\">constructor injection</a> rather than <a href=\"https://en.wikipedia.org/wiki/Dependency_injection#Setter_injection\" rel=\"nofollow noreferrer\">setter/field injection</a>"},{"owner":{"account_id":1888409,"reputation":1893,"user_id":1707141,"accept_rate":48,"display_name":"Nikhil Das Nomula"},"score":0,"creation_date":1444147948,"post_id":32974432,"comment_id":53774407,"body_markdown":"Aah ok, however when I use new object for running the application normally it is picking up the value(from properties file). Its only in jUnit that the value is null. I just tried to fetch the object from the applicationContext it says that the bean does not exist. I am surprised as to why it come up with that as it is annotated with @Component","body":"Aah ok, however when I use new object for running the application normally it is picking up the value(from properties file). Its only in jUnit that the value is null. I just tried to fetch the object from the applicationContext it says that the bean does not exist. I am surprised as to why it come up with that as it is annotated with @Component"},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":1,"creation_date":1444220185,"post_id":32974432,"comment_id":53808386,"body_markdown":"You will need either @ComponentScan or `&lt;context:component-scan/&gt;` to pick up your @Component","body":"You will need either @ComponentScan or <code>&lt;context:component-scan&#47;&gt;</code> to pick up your @Component"}],"answers":[{"comments":[{"owner":{"account_id":1888409,"reputation":1893,"user_id":1707141,"accept_rate":48,"display_name":"Nikhil Das Nomula"},"score":0,"creation_date":1444162742,"post_id":32974945,"comment_id":53783252,"body_markdown":"I have made the suggested changes, but it is still not loading the value from the properties file... is there something that I am missing","body":"I have made the suggested changes, but it is still not loading the value from the properties file... is there something that I am missing"},{"owner":{"account_id":406060,"reputation":21895,"user_id":775345,"accept_rate":96,"display_name":"Robert Moskal"},"score":0,"creation_date":1444164924,"post_id":32974945,"comment_id":53784555,"body_markdown":"Are your classpaths set up? How do you run this?","body":"Are your classpaths set up? How do you run this?"},{"owner":{"account_id":1888409,"reputation":1893,"user_id":1707141,"accept_rate":48,"display_name":"Nikhil Das Nomula"},"score":0,"creation_date":1444333316,"post_id":32974945,"comment_id":53871675,"body_markdown":"Yes the classpaths are set up. The code above in class D mentions how it is set up.. I am using eclipse and I do a run as -&gt; jUnit test","body":"Yes the classpaths are set up. The code above in class D mentions how it is set up.. I am using eclipse and I do a run as -&gt; jUnit test"}],"tags":[],"owner":{"account_id":406060,"reputation":21895,"user_id":775345,"accept_rate":96,"display_name":"Robert Moskal"},"comment_count":3,"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1689582784,"creation_date":1444148699,"answer_id":32974945,"question_id":32974432,"body_markdown":"Firstly, application.properties in the @PropertySource should read `application-test.properties` if that&#39;s what the file is named (matching these things up matters):\r\n\r\n    @PropertySource(&quot;classpath:application-test.properties&quot;)\r\n\r\nThat file should be under your `/src/test/resources` classpath (at the root).\r\n\r\nI don&#39;t understand why you&#39;d specify a dependency hard coded to a file called `application-test.properties`. Is that component only to be used in the test environment?\r\n\r\nThe normal thing to do is to have property files with the same name on different classpaths. You load one or the other depending on whether you are running your tests or not.\r\n\r\nIn a typically laid out application, you&#39;d have:\r\n\r\n    src/test/resources/application.properties\r\n\r\nand \r\n\r\n    src/main/resources/application.properties\r\n\r\nAnd then inject it like this:\r\n\r\n    @PropertySource(&quot;classpath:application.properties&quot;)\r\n\r\nThe even better thing to do would be to expose that property file as a bean in your spring context and then inject that bean into any component that needs it. This way your code is not littered with references to application.properties and you can use anything you want as a source of properties. Here&#39;s an example: https://stackoverflow.com/questions/14570477/how-to-read-properties-file-in-spring-project","title":"Spring jUnit Testing properties file","body":"<p>Firstly, application.properties in the @PropertySource should read <code>application-test.properties</code> if that's what the file is named (matching these things up matters):</p>\n<pre><code>@PropertySource(&quot;classpath:application-test.properties&quot;)\n</code></pre>\n<p>That file should be under your <code>/src/test/resources</code> classpath (at the root).</p>\n<p>I don't understand why you'd specify a dependency hard coded to a file called <code>application-test.properties</code>. Is that component only to be used in the test environment?</p>\n<p>The normal thing to do is to have property files with the same name on different classpaths. You load one or the other depending on whether you are running your tests or not.</p>\n<p>In a typically laid out application, you'd have:</p>\n<pre><code>src/test/resources/application.properties\n</code></pre>\n<p>and</p>\n<pre><code>src/main/resources/application.properties\n</code></pre>\n<p>And then inject it like this:</p>\n<pre><code>@PropertySource(&quot;classpath:application.properties&quot;)\n</code></pre>\n<p>The even better thing to do would be to expose that property file as a bean in your spring context and then inject that bean into any component that needs it. This way your code is not littered with references to application.properties and you can use anything you want as a source of properties. Here's an example: <a href=\"https://stackoverflow.com/questions/14570477/how-to-read-properties-file-in-spring-project\">how to read properties file in spring project?</a></p>\n"},{"comments":[{"owner":{"account_id":3144751,"reputation":405,"user_id":2659424,"accept_rate":86,"display_name":"ttiurani"},"score":1,"creation_date":1552030497,"post_id":43608301,"comment_id":96865724,"body_markdown":"Thanks! In spring-boot 2.1.2, `@TestPropertySource` works with `@ContextConfiguration` in a JUnit test, where `@PropertySource` doesn&#39;t.","body":"Thanks! In spring-boot 2.1.2, <code>@TestPropertySource</code> works with <code>@ContextConfiguration</code> in a JUnit test, where <code>@PropertySource</code> doesn&#39;t."}],"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1493116495,"creation_date":1493116495,"answer_id":43608301,"question_id":32974432,"body_markdown":"As for the testing, you should use from Spring 4.1 which will overwrite the properties defined in other places:\r\n\r\n    @TestPropertySource(&quot;classpath:application-test.properties&quot;)\r\n\r\nTest property sources have higher precedence than those loaded from the operating system&#39;s environment or Java system properties as well as property sources added by the application like @PropertySource","title":"Spring jUnit Testing properties file","body":"<p>As for the testing, you should use from Spring 4.1 which will overwrite the properties defined in other places:</p>\n\n<pre><code>@TestPropertySource(\"classpath:application-test.properties\")\n</code></pre>\n\n<p>Test property sources have higher precedence than those loaded from the operating system's environment or Java system properties as well as property sources added by the application like @PropertySource</p>\n"},{"comments":[{"owner":{"account_id":321190,"reputation":460,"user_id":639863,"display_name":"M Kowalski"},"score":0,"creation_date":1687963689,"post_id":64176708,"comment_id":135010906,"body_markdown":"Thank you, I was getting dangerously low on calories too.","body":"Thank you, I was getting dangerously low on calories too."}],"tags":[],"owner":{"account_id":5942206,"reputation":784,"user_id":4673017,"accept_rate":75,"display_name":"Siena"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1601665856,"creation_date":1601664019,"answer_id":64176708,"question_id":32974432,"body_markdown":"I faced the same issue, spent too much calories searching for the right fix until I decided to settle down with file reading:\r\n\r\n    Properties configProps = new Properties();\r\n    InputStream iStream = new ClassPathResource(&quot;myapp-test.properties&quot;).getInputStream();\r\n    InputStream iStream = getConfigFile();\r\n    configProps.load(iStream);\r\n    \r\n\r\n\r\n","title":"Spring jUnit Testing properties file","body":"<p>I faced the same issue, spent too much calories searching for the right fix until I decided to settle down with file reading:</p>\n<pre><code>Properties configProps = new Properties();\nInputStream iStream = new ClassPathResource(&quot;myapp-test.properties&quot;).getInputStream();\nInputStream iStream = getConfigFile();\nconfigProps.load(iStream);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18383700,"reputation":23,"user_id":16259996,"display_name":"loud_mouth"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656882568,"creation_date":1656882568,"answer_id":72849926,"question_id":32974432,"body_markdown":"If you are using a jar file inside a docker container, and the resource properties file, say `application.properties` is packaged within the same `classes` directory that contains the java(this is what IntelliJ IDE does automatically for resources file stored in `/src/main/resources`), this is what helped me: \r\n\r\n```\r\npublic static Properties props = new Properties();\r\n\r\n    static {\r\n        try {\r\n            props.load(\r\n                    Thread\r\n                            .currentThread()\r\n                            .getContextClassLoader()\r\n                            .getResourceAsStream(&quot;application.properties&quot;)\r\n            );\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nMost other methods either only worked inside the IDE or inside the Docker. This one works in both. ","title":"Spring jUnit Testing properties file","body":"<p>If you are using a jar file inside a docker container, and the resource properties file, say <code>application.properties</code> is packaged within the same <code>classes</code> directory that contains the java(this is what IntelliJ IDE does automatically for resources file stored in <code>/src/main/resources</code>), this is what helped me:</p>\n<pre><code>public static Properties props = new Properties();\n\n    static {\n        try {\n            props.load(\n                    Thread\n                            .currentThread()\n                            .getContextClassLoader()\n                            .getResourceAsStream(&quot;application.properties&quot;)\n            );\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>Most other methods either only worked inside the IDE or inside the Docker. This one works in both.</p>\n"},{"tags":[],"owner":{"account_id":1180343,"reputation":81,"user_id":1155396,"display_name":"Tapan Upadhyay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695323898,"creation_date":1673899766,"answer_id":75139211,"question_id":32974432,"body_markdown":"If you want to load a few properties, I found a good way in the spring ReflectionTestUtils:\r\n\r\n    \r\n    @Before\r\n    Public void setup(){\r\n     ReflectionTestUtils.setField(youclassobject, &quot;value&quot;, &quot;yourValue&quot;)\r\n     \r\n    }\r\n    \r\nYou can follow this link as well for more details https://roytuts.com/mock-an-autowired-value-field-in-spring-with-junit-mockito/\r\n","title":"Spring jUnit Testing properties file","body":"<p>If you want to load a few properties, I found a good way in the spring ReflectionTestUtils:</p>\n<pre><code>@Before\nPublic void setup(){\n ReflectionTestUtils.setField(youclassobject, &quot;value&quot;, &quot;yourValue&quot;)\n \n}\n</code></pre>\n<p>You can follow this link as well for more details <a href=\"https://roytuts.com/mock-an-autowired-value-field-in-spring-with-junit-mockito/\" rel=\"nofollow noreferrer\">https://roytuts.com/mock-an-autowired-value-field-in-spring-with-junit-mockito/</a></p>\n"},{"tags":[],"owner":{"account_id":19320165,"reputation":99,"user_id":14124017,"display_name":"Om Prakash N"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678877366,"creation_date":1678877366,"answer_id":75743669,"question_id":32974432,"body_markdown":"How to read values from properties file while running JUnit Test ?\r\nReflectionTestUtils is the simplest way to set values for any variable that is reading values from properties file.\r\n\r\nInside the setup function, add the below line:\r\n\r\n`ReflectionTestUtils.setField(ObjectName, &quot;VariableToSetValue&quot;, &quot;Value&quot;);` \r\n\r\nEg: `ReflectionTestUtils.setField(studentService, &quot;uri&quot;, &quot;http://example.com&quot;);`\r\n","title":"Spring jUnit Testing properties file","body":"<p>How to read values from properties file while running JUnit Test ?\nReflectionTestUtils is the simplest way to set values for any variable that is reading values from properties file.</p>\n<p>Inside the setup function, add the below line:</p>\n<p><code>ReflectionTestUtils.setField(ObjectName, &quot;VariableToSetValue&quot;, &quot;Value&quot;);</code></p>\n<p>Eg: <code>ReflectionTestUtils.setField(studentService, &quot;uri&quot;, &quot;http://example.com&quot;);</code></p>\n"},{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686949467,"post_id":76493562,"comment_id":134874096,"body_markdown":"First this is an old question and pre-dates Spring Boot. Second this is not true. You can use it in a regular Spring based test with `@ContextConfiguration` and the proper extension as well, as well as the different sliced tests. So this answer simply isn&#39;t giving the correct facts.","body":"First this is an old question and pre-dates Spring Boot. Second this is not true. You can use it in a regular Spring based test with <code>@ContextConfiguration</code> and the proper extension as well, as well as the different sliced tests. So this answer simply isn&#39;t giving the correct facts."}],"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686949339,"creation_date":1686949339,"answer_id":76493562,"question_id":32974432,"body_markdown":"The answer to your question is that \r\n`@PropertySource(&quot;classpath:application-test.properties&quot;)` does not work outside of spring boot test. Only when you have `@SpringBootTest` only then this works and properties are automatically injected.","title":"Spring jUnit Testing properties file","body":"<p>The answer to your question is that\n<code>@PropertySource(&quot;classpath:application-test.properties&quot;)</code> does not work outside of spring boot test. Only when you have <code>@SpringBootTest</code> only then this works and properties are automatically injected.</p>\n"}],"owner":{"account_id":1888409,"reputation":1893,"user_id":1707141,"accept_rate":48,"display_name":"Nikhil Das Nomula"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184090,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"answer_count":7,"score":33,"last_activity_date":1695323898,"creation_date":1444147087,"question_id":32974432,"body_markdown":"I have a jUnit Test that has its own properties file(application-test.properties) and its spring config file(application-core-test.xml). \r\n\r\nOne of the method uses an object instantiated by spring config and that is a spring component. One of the members in the classes derives its value from application.properties which is our main properties file. While accessing this value through jUnit it is always null. I even tried changing the properties file to point to the actual properties file, but that doesnt seem to work. \r\n\r\nHere is how I am accessing the properties file object\r\n\r\n    @Component\r\n    @PropertySource(&quot;classpath:application.properties&quot;)\r\n    public abstract class A {\r\n\r\n\t    @Value(&quot;${test.value}&quot;)\r\n\t    public String value;\r\n\r\n        public A(){\r\n            SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n        }\r\n\r\n        public A(String text) {\r\n            this();\r\n            // do something with text and value.. here is where I run into NPE\r\n        }\r\n\r\n    }\r\n\r\n    public class B extends A { \r\n         //addtnl code\r\n\r\n        private B() {\r\n\r\n        }\r\n        \r\n\r\n        private B(String text) {\r\n             super(text)\r\n        }\r\n    }\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(locations={&quot;classpath:META-INF/spring/application-core-test.xml&quot;,\r\n\t\t\t\t\t\t\t\t &quot;classpath:META-INF/spring/application-schedule-test.xml&quot;})\r\n    @PropertySource(&quot;classpath:application-test.properties&quot;)\r\n    public class TestD {\r\n\r\n\t\t@Value(&quot;${value.works}&quot;)\r\n\t\tpublic String valueWorks;\r\n\t\t\r\n\t\t@Test\r\n\t\tpublic void testBlah() {     \r\n\t\t\tSpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n\t\t\tB b= new B(&quot;blah&quot;);\r\n\t\t\t//...addtnl code\r\n\t\r\n\t\t}    \r\n\t}      ","title":"Spring jUnit Testing properties file","body":"<p>I have a jUnit Test that has its own properties file(application-test.properties) and its spring config file(application-core-test.xml). </p>\n\n<p>One of the method uses an object instantiated by spring config and that is a spring component. One of the members in the classes derives its value from application.properties which is our main properties file. While accessing this value through jUnit it is always null. I even tried changing the properties file to point to the actual properties file, but that doesnt seem to work. </p>\n\n<p>Here is how I am accessing the properties file object</p>\n\n<pre><code>@Component\n@PropertySource(\"classpath:application.properties\")\npublic abstract class A {\n\n    @Value(\"${test.value}\")\n    public String value;\n\n    public A(){\n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n    }\n\n    public A(String text) {\n        this();\n        // do something with text and value.. here is where I run into NPE\n    }\n\n}\n\npublic class B extends A { \n     //addtnl code\n\n    private B() {\n\n    }\n\n\n    private B(String text) {\n         super(text)\n    }\n}\n\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations={\"classpath:META-INF/spring/application-core-test.xml\",\n                             \"classpath:META-INF/spring/application-schedule-test.xml\"})\n@PropertySource(\"classpath:application-test.properties\")\npublic class TestD {\n\n    @Value(\"${value.works}\")\n    public String valueWorks;\n\n    @Test\n    public void testBlah() {     \n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n        B b= new B(\"blah\");\n        //...addtnl code\n\n    }    \n}      \n</code></pre>\n"},{"tags":["java","lwjgl"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695322497,"post_id":77152926,"comment_id":136012642,"body_markdown":"Are you using the z-axis? Is this 2D or 3D?","body":"Are you using the z-axis? Is this 2D or 3D?"},{"owner":{"account_id":29346081,"reputation":5,"user_id":22484365,"display_name":"The Typholorian"},"score":0,"creation_date":1695322594,"post_id":77152926,"comment_id":136012669,"body_markdown":"Yes, making a 3D game. Camera y is side to side, x is up and down. 90 y would be looking right.","body":"Yes, making a 3D game. Camera y is side to side, x is up and down. 90 y would be looking right."},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695322743,"post_id":77152926,"comment_id":136012698,"body_markdown":"So it&#39;s a right-handed coordinate system (because of OpenGL) with Z facing up.","body":"So it&#39;s a right-handed coordinate system (because of OpenGL) with Z facing up."},{"owner":{"account_id":29346081,"reputation":5,"user_id":22484365,"display_name":"The Typholorian"},"score":0,"creation_date":1695322822,"post_id":77152926,"comment_id":136012712,"body_markdown":"Think so? Kinda new to this sort of thing. My controls are\n        Game.newKeybind(GLFW_KEY_S, () -&gt; {Game.cameraInc.z = 1;});\n        Game.newKeybind(GLFW_KEY_W, () -&gt; {Game.cameraInc.z = -1;});\n        Game.newKeybind(GLFW_KEY_D, () -&gt; {Game.cameraInc.x = 1;});\n        Game.newKeybind(GLFW_KEY_A, () -&gt; {Game.cameraInc.x = -1;});\n        Game.newKeybind(GLFW_KEY_SPACE, () -&gt; {Game.cameraInc.y = 1;});\n        Game.newKeybind(GLFW_KEY_LEFT_SHIFT, () -&gt; {Game.cameraInc.y = -1;});\nif that helps.","body":"Think so? Kinda new to this sort of thing. My controls are         Game.newKeybind(GLFW_KEY_S, () -&gt; {Game.cameraInc.z = 1;});         Game.newKeybind(GLFW_KEY_W, () -&gt; {Game.cameraInc.z = -1;});         Game.newKeybind(GLFW_KEY_D, () -&gt; {Game.cameraInc.x = 1;});         Game.newKeybind(GLFW_KEY_A, () -&gt; {Game.cameraInc.x = -1;});         Game.newKeybind(GLFW_KEY_SPACE, () -&gt; {Game.cameraInc.y = 1;});         Game.newKeybind(GLFW_KEY_LEFT_SHIFT, () -&gt; {Game.cameraInc.y = -1;}); if that helps."},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695326333,"post_id":77152926,"comment_id":136013267,"body_markdown":"I know it&#39;s not Java OpenGL code, but the [following WebGL code](https://webglfundamentals.org/webgl/lessons/webgl-3d-camera.html#:~:text=Here%27s%20the%20code%20to%20compute%20a%20%22lookAt%22%20matrix) could be ported. It is a function to calculate a &quot;lookAt matrix&quot;. It involves normlizing the cross product of two vectors along multiple axis. All of the vector math is given. You just need to supply the position, target, and the &quot;up&quot; vector.","body":"I know it&#39;s not Java OpenGL code, but the <a href=\"https://webglfundamentals.org/webgl/lessons/webgl-3d-camera.html#:~:text=Here%27s%20the%20code%20to%20compute%20a%20%22lookAt%22%20matrix\" rel=\"nofollow noreferrer\">following WebGL code</a> could be ported. It is a function to calculate a &quot;lookAt matrix&quot;. It involves normlizing the cross product of two vectors along multiple axis. All of the vector math is given. You just need to supply the position, target, and the &quot;up&quot; vector."}],"owner":{"account_id":29346081,"reputation":5,"user_id":22484365,"display_name":"The Typholorian"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695323289,"creation_date":1695322295,"question_id":77152926,"body_markdown":"Trying to make some code to look at a specific point in the world. ChatGPT isn&#39;t helping. Probably should have paid attention in school. Here&#39;s what I have so far (it doesn&#39;t work very well but Y is on to something)\r\n\r\n```java\r\npublic void lookAtCoordinate(Vector3f target) {\r\n    double xSide = target.x - position.x;\r\n    double ySide = target.y - position.y;\r\n    double zSide = target.z - position.z;\r\n    setRotation((float) Math.toDegrees(Math.acos(xSide / ySide)), (float) -Math.toDegrees(Math.acos(xSide / zSide)), 0);\r\n    //setRotation(target.x - position.x, target.y - position.x, 0;\r\n}\r\n```\r\nHelp?\r\n\r\nGame controls:\r\n\r\n```java\r\nGame.newKeybind(GLFW_KEY_S, () -&gt; { Game.cameraInc.z = 1; });\r\nGame.newKeybind(GLFW_KEY_W, () -&gt; { Game.cameraInc.z = -1; });\r\nGame.newKeybind(GLFW_KEY_D, () -&gt; { Game.cameraInc.x = 1; });\r\nGame.newKeybind(GLFW_KEY_A, () -&gt; { Game.cameraInc.x = -1; });\r\nGame.newKeybind(GLFW_KEY_SPACE, () -&gt; { Game.cameraInc.y = 1; });\r\nGame.newKeybind(GLFW_KEY_LEFT_SHIFT, () -&gt; { Game.cameraInc.y = -1; });\r\n```","title":"Look at specific point in LWJGL","body":"<p>Trying to make some code to look at a specific point in the world. ChatGPT isn't helping. Probably should have paid attention in school. Here's what I have so far (it doesn't work very well but Y is on to something)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void lookAtCoordinate(Vector3f target) {\n    double xSide = target.x - position.x;\n    double ySide = target.y - position.y;\n    double zSide = target.z - position.z;\n    setRotation((float) Math.toDegrees(Math.acos(xSide / ySide)), (float) -Math.toDegrees(Math.acos(xSide / zSide)), 0);\n    //setRotation(target.x - position.x, target.y - position.x, 0;\n}\n</code></pre>\n<p>Help?</p>\n<p>Game controls:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Game.newKeybind(GLFW_KEY_S, () -&gt; { Game.cameraInc.z = 1; });\nGame.newKeybind(GLFW_KEY_W, () -&gt; { Game.cameraInc.z = -1; });\nGame.newKeybind(GLFW_KEY_D, () -&gt; { Game.cameraInc.x = 1; });\nGame.newKeybind(GLFW_KEY_A, () -&gt; { Game.cameraInc.x = -1; });\nGame.newKeybind(GLFW_KEY_SPACE, () -&gt; { Game.cameraInc.y = 1; });\nGame.newKeybind(GLFW_KEY_LEFT_SHIFT, () -&gt; { Game.cameraInc.y = -1; });\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9964,"page":170,"page_size":100}
