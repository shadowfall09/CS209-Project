{"items":[{"tags":["java","constraints","optaplanner","heuristics","timefold"],"comments":[{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;Å¡ Petrovick&#253;"},"score":0,"creation_date":1699465508,"post_id":77447152,"comment_id":136536191,"body_markdown":"Why is the solver not starting? Is there an exception perhaps? Please update the question.","body":"Why is the solver not starting? Is there an exception perhaps? Please update the question."},{"owner":{"account_id":29206918,"reputation":11,"user_id":22375815,"display_name":"sicario_23"},"score":0,"creation_date":1699466995,"post_id":77447152,"comment_id":136536431,"body_markdown":"I have updated the question with the error in api response which is:\nThe &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;\n\nFor construction heuristics do we need to define the filter in a different format?","body":"I have updated the question with the error in api response which is: The &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;  For construction heuristics do we need to define the filter in a different format?"}],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700038498,"creation_date":1700038498,"answer_id":77486321,"question_id":77447152,"body_markdown":"Here be dragons.\r\n\r\nFrom [this docs section][1], here&#39;s an example of a proper CH power-tweaked config:\r\n\r\n      &lt;constructionHeuristic&gt;\r\n        &lt;queuedEntityPlacer&gt;\r\n          &lt;entitySelector id=&quot;placerEntitySelector&quot;&gt;\r\n            &lt;!-- your filter? --&gt;\r\n      \r\n          &lt;/entitySelector&gt;\r\n          &lt;changeMoveSelector&gt;\r\n            &lt;entitySelector mimicSelectorRef=&quot;placerEntitySelector&quot;/&gt;\r\n            &lt;valueSelector&gt;\r\n              \r\n            &lt;/valueSelector&gt;\r\n          &lt;/changeMoveSelector&gt;\r\n        &lt;/queuedEntityPlacer&gt;\r\n      &lt;/constructionHeuristic&gt;\r\n\r\nThat being said, in my experience, this is probably the wrong rabbit hole to follow to solve the scaling problem you want to fix.\r\n\r\n  [1]: https://timefold.ai/docs/timefold-solver/latest/optimization-algorithms/optimization-algorithms#allocateEntityFromQueue","title":"OptaPlanner - How to configure a selectionFilter in construction heuristics phase?","body":"<p>Here be dragons.</p>\n<p>From <a href=\"https://timefold.ai/docs/timefold-solver/latest/optimization-algorithms/optimization-algorithms#allocateEntityFromQueue\" rel=\"nofollow noreferrer\">this docs section</a>, here's an example of a proper CH power-tweaked config:</p>\n<pre><code>  &lt;constructionHeuristic&gt;\n    &lt;queuedEntityPlacer&gt;\n      &lt;entitySelector id=&quot;placerEntitySelector&quot;&gt;\n        &lt;!-- your filter? --&gt;\n  \n      &lt;/entitySelector&gt;\n      &lt;changeMoveSelector&gt;\n        &lt;entitySelector mimicSelectorRef=&quot;placerEntitySelector&quot;/&gt;\n        &lt;valueSelector&gt;\n          \n        &lt;/valueSelector&gt;\n      &lt;/changeMoveSelector&gt;\n    &lt;/queuedEntityPlacer&gt;\n  &lt;/constructionHeuristic&gt;\n</code></pre>\n<p>That being said, in my experience, this is probably the wrong rabbit hole to follow to solve the scaling problem you want to fix.</p>\n"}],"owner":{"account_id":29206918,"reputation":11,"user_id":22375815,"display_name":"sicario_23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700038498,"creation_date":1699459341,"question_id":77447152,"body_markdown":"\r\nI am trying to add a selectionFilter during the CH phase as below in solverConfig.xml:\r\n\r\n```\r\n\t&lt;constructionHeuristic&gt;\r\n\t\t&lt;constructionHeuristicType&gt;FIRST_FIT&lt;/constructionHeuristicType&gt;\r\n\t\t&lt;changeMoveSelector&gt;\r\n\t\t\t&lt;entitySelector&gt;\r\n\t\t\t\t&lt;filterClass&gt;org.example.entity.ShiftFilter\r\n\t\t\t\t&lt;/filterClass&gt;\r\n\t\t\t&lt;/entitySelector&gt;\r\n\t\t&lt;/changeMoveSelector&gt;\r\n\t&lt;/constructionHeuristic&gt;\r\n```\r\nAfter adding this to the config, the solver is not starting. The same filter works fine within a local search phase.\r\n\r\nThe error in the solve api response is as follows:\r\n\r\n    The &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;\r\n\r\nCould someone help me point in the right direction on how to add selection filer in CH.","title":"OptaPlanner - How to configure a selectionFilter in construction heuristics phase?","body":"<p>I am trying to add a selectionFilter during the CH phase as below in solverConfig.xml:</p>\n<pre><code>    &lt;constructionHeuristic&gt;\n        &lt;constructionHeuristicType&gt;FIRST_FIT&lt;/constructionHeuristicType&gt;\n        &lt;changeMoveSelector&gt;\n            &lt;entitySelector&gt;\n                &lt;filterClass&gt;org.example.entity.ShiftFilter\n                &lt;/filterClass&gt;\n            &lt;/entitySelector&gt;\n        &lt;/changeMoveSelector&gt;\n    &lt;/constructionHeuristic&gt;\n</code></pre>\n<p>After adding this to the config, the solver is not starting. The same filter works fine within a local search phase.</p>\n<p>The error in the solve api response is as follows:</p>\n<pre><code>The &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;\n</code></pre>\n<p>Could someone help me point in the right direction on how to add selection filer in CH.</p>\n"},{"tags":["java","optimization","optaplanner"],"comments":[{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1698614894,"post_id":77382509,"comment_id":136424787,"body_markdown":"See [the issue for this](https://github.com/TimefoldAI/timefold-solver/issues/76) on Timefold (the continuation of OptaPlanner) too.","body":"See <a href=\"https://github.com/TimefoldAI/timefold-solver/issues/76\" rel=\"nofollow noreferrer\">the issue for this</a> on Timefold (the continuation of OptaPlanner) too."}],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700038213,"creation_date":1700038213,"answer_id":77486295,"question_id":77382509,"body_markdown":"I wouldn&#39;t make `isVirtual` a planning variable, that will explode the search space.\r\n\r\nInstead, I &#39;d add a medium constraint (after switching to a HardMediumSoftLongScore) to penalize the number of assigned virtual vehicles.\r\n\r\nThat way, you don&#39;t have to deal with the fickle 150,000 meters thresholds etc. ","title":"Dynamic entity property adjustment in OptaPlanner during pptimization process","body":"<p>I wouldn't make <code>isVirtual</code> a planning variable, that will explode the search space.</p>\n<p>Instead, I 'd add a medium constraint (after switching to a HardMediumSoftLongScore) to penalize the number of assigned virtual vehicles.</p>\n<p>That way, you don't have to deal with the fickle 150,000 meters thresholds etc.</p>\n"}],"owner":{"account_id":29772340,"reputation":1,"user_id":22817225,"display_name":"Divij"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700038213,"creation_date":1698567804,"question_id":77382509,"body_markdown":"I&#39;m working on an OptaPlanner project for vehicle routing optimization, and I have a specific requirement. We are facing overconstrained planning problem, i.e. skip customer stops. We&#39;ve decided to go with one plausible solution of adding virtual values to catch the unassigned entities as mentioned in the documentation. I want to automatically adjust the isVirtual property of certain BusStop entities in my domain based on the optimization&#160;process.\r\n\r\nHere&#39;s a simplified version of my domain model:\r\n```\r\npublic class BusStop {\r\n    private boolean isVirtual;\r\n    // Other properties and getters/setters\r\n}\r\n```\r\n\r\nI want this change to be dynamic and influence the optimization process to improve the overall score, as if the isVirtual property was part of the score calculation.\r\n\r\nCould anyone provide some guidance or an example of how I can achieve this behavior in OptaPlanner? \r\n\r\nWork done till now: during the optimization process, when the total route distance of a Bus exceeds a certain threshold (e.g., 150,000 meters), I automatically set the isVirtual property of some BusStop entities to true in constraint provider implementation itself but that is being carried out to other solutions as well.","title":"Dynamic entity property adjustment in OptaPlanner during pptimization process","body":"<p>I'm working on an OptaPlanner project for vehicle routing optimization, and I have a specific requirement. We are facing overconstrained planning problem, i.e. skip customer stops. We've decided to go with one plausible solution of adding virtual values to catch the unassigned entities as mentioned in the documentation. I want to automatically adjust the isVirtual property of certain BusStop entities in my domain based on the optimizationÂ process.</p>\n<p>Here's a simplified version of my domain model:</p>\n<pre><code>public class BusStop {\n    private boolean isVirtual;\n    // Other properties and getters/setters\n}\n</code></pre>\n<p>I want this change to be dynamic and influence the optimization process to improve the overall score, as if the isVirtual property was part of the score calculation.</p>\n<p>Could anyone provide some guidance or an example of how I can achieve this behavior in OptaPlanner?</p>\n<p>Work done till now: during the optimization process, when the total route distance of a Bus exceeds a certain threshold (e.g., 150,000 meters), I automatically set the isVirtual property of some BusStop entities to true in constraint provider implementation itself but that is being carried out to other solutions as well.</p>\n"},{"tags":["java","android","active-directory","ldap","unboundid-ldap-sdk"],"answers":[{"tags":[],"owner":{"account_id":7560293,"reputation":140,"user_id":5802018,"display_name":"CravateRouge"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037260,"creation_date":1700037260,"answer_id":77486203,"question_id":76553287,"body_markdown":"This behavior seems to be induced by a [bug on Windows Server][1] introduced in May 2023 and fixed in [October 2023 update][2]. Causing an issue in which an external bind might fail. This leads to issues with Lightweight Directory Access Protocol (LDAP) queries and authentication.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/answers/questions/1373156/why-does-kb5026409-cause-sasl-external-to-fail\r\n  [2]: https://support.microsoft.com/en-us/topic/october-10-2023-kb5031407-security-only-update-fbabe467-2b2e-4871-891a-3716394b2a45","title":"LDAP server claims &quot;The server did not receive any credentials via TLS&quot;","body":"<p>This behavior seems to be induced by a <a href=\"https://learn.microsoft.com/en-us/answers/questions/1373156/why-does-kb5026409-cause-sasl-external-to-fail\" rel=\"nofollow noreferrer\">bug on Windows Server</a> introduced in May 2023 and fixed in <a href=\"https://support.microsoft.com/en-us/topic/october-10-2023-kb5031407-security-only-update-fbabe467-2b2e-4871-891a-3716394b2a45\" rel=\"nofollow noreferrer\">October 2023 update</a>. Causing an issue in which an external bind might fail. This leads to issues with Lightweight Directory Access Protocol (LDAP) queries and authentication.</p>\n"}],"owner":{"account_id":28879495,"reputation":21,"user_id":22119257,"display_name":"sstb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1700038153,"creation_date":1687748581,"question_id":76553287,"body_markdown":"My Android app connects to an LDAP server during normal operation. The initial connection is anonymous, and startTLS with `EXTERNAL` binding is used to perform authentication as anonymous access is disallowed. UnboundID LDAP SDK is used as the LDAP library.\r\n\r\nRecently the `EXTERNAL` binding has been failing with the error &quot;80090317: The server did not receive any credentials via TLS, data 0, v2580&quot;. This is without changes to the app or Android platform, and the server team claims that there are no changes to the server either. I have confirmed that both client and server certs are valid, and that certs were indeed exchanged (by means of [`HandshakeCompletedListener`](https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/HandshakeCompletedListener.html)).\r\n\r\n**Code**\r\n\r\n```java\r\n// connect to server - anonymous login, non-SSL\r\nLDAPConnection mConn = new LDAPConnection(address, port, &quot;&quot;, &quot;&quot;, null)\r\n\r\n// start TLS\r\nKeyManager km = (...);\r\nSSLUtil sslUtil = new SSLUtil(km, new TrustAllTrustManager());\r\nStartTLSExtendedRequest req = new StartTLSExtendedRequest(sslUtil.createSSLContext());\r\nmConn.processExtendedRequest(req);\r\n\r\n// TLS connection succeeds, proceed with bind\r\n// EXTERNAL bind request with authzId left blank\r\n// It should use the cert supplied during TLS\r\nBindRequest request = new EXTERNALBindRequest(&quot;&quot;);\r\nmConn.bind(request); // fails here\r\n```\r\n\r\n\r\nI have tried the following:\r\n\r\n* Starting the initial connection over SSL, presenting the user certificate at the beginning. The server claims that the connection is not bound yet, contrary to [Microsoft&#39;s Active Directory specs](https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/8e73932f-70cf-46d6-88b1-8d9f86235e81).\r\n* Attempting to manually trace the handshake proved unfruitful - the Android socket code seems non-debuggable through Android Studio, and setting the [javax.net.debug](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ReadDebug.html) options produced no output.\r\n* Packet capture solutions I found would require root as the connection to the server is done over a VPN\r\n\r\nThe remote server&#39;s team may take some time to arrange tests, so in the meantime I would like to hear some ideas on what could be happening here.","title":"LDAP server claims &quot;The server did not receive any credentials via TLS&quot;","body":"<p>My Android app connects to an LDAP server during normal operation. The initial connection is anonymous, and startTLS with <code>EXTERNAL</code> binding is used to perform authentication as anonymous access is disallowed. UnboundID LDAP SDK is used as the LDAP library.</p>\n<p>Recently the <code>EXTERNAL</code> binding has been failing with the error &quot;80090317: The server did not receive any credentials via TLS, data 0, v2580&quot;. This is without changes to the app or Android platform, and the server team claims that there are no changes to the server either. I have confirmed that both client and server certs are valid, and that certs were indeed exchanged (by means of <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/HandshakeCompletedListener.html\" rel=\"nofollow noreferrer\"><code>HandshakeCompletedListener</code></a>).</p>\n<p><strong>Code</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// connect to server - anonymous login, non-SSL\nLDAPConnection mConn = new LDAPConnection(address, port, &quot;&quot;, &quot;&quot;, null)\n\n// start TLS\nKeyManager km = (...);\nSSLUtil sslUtil = new SSLUtil(km, new TrustAllTrustManager());\nStartTLSExtendedRequest req = new StartTLSExtendedRequest(sslUtil.createSSLContext());\nmConn.processExtendedRequest(req);\n\n// TLS connection succeeds, proceed with bind\n// EXTERNAL bind request with authzId left blank\n// It should use the cert supplied during TLS\nBindRequest request = new EXTERNALBindRequest(&quot;&quot;);\nmConn.bind(request); // fails here\n</code></pre>\n<p>I have tried the following:</p>\n<ul>\n<li>Starting the initial connection over SSL, presenting the user certificate at the beginning. The server claims that the connection is not bound yet, contrary to <a href=\"https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/8e73932f-70cf-46d6-88b1-8d9f86235e81\" rel=\"nofollow noreferrer\">Microsoft's Active Directory specs</a>.</li>\n<li>Attempting to manually trace the handshake proved unfruitful - the Android socket code seems non-debuggable through Android Studio, and setting the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ReadDebug.html\" rel=\"nofollow noreferrer\">javax.net.debug</a> options produced no output.</li>\n<li>Packet capture solutions I found would require root as the connection to the server is done over a VPN</li>\n</ul>\n<p>The remote server's team may take some time to arrange tests, so in the meantime I would like to hear some ideas on what could be happening here.</p>\n"},{"tags":["java","spring-boot","hibernate","mariadb","h2"],"owner":{"account_id":9952587,"reputation":11,"user_id":7364634,"display_name":"Shuvo Kumar Sarkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700038121,"creation_date":1700038121,"question_id":77486278,"body_markdown":"```\r\n@Column(name = &quot;trust&quot;, length = 1, nullable = false, columnDefinition = &quot;int&quot;)\r\nprivate Boolean trust;\r\n```\r\n\r\norg.h2.jdbc.JdbcSQLSyntaxErrorException: Domain &quot;int&quot; not found;\r\n\r\nI believe the issue is with the data type specification. How should I correctly define these columns in H2(version: 2.1.214) for intregation test? I&#39;m also using MariaDB, so any suggestions on compatibility between the two databases would be helpful.\r\n\r\nThanks in advance!","title":"Error in H2 Database: &quot;Domain &#39;int&#39; not found&quot;","body":"<pre><code>@Column(name = &quot;trust&quot;, length = 1, nullable = false, columnDefinition = &quot;int&quot;)\nprivate Boolean trust;\n</code></pre>\n<p>org.h2.jdbc.JdbcSQLSyntaxErrorException: Domain &quot;int&quot; not found;</p>\n<p>I believe the issue is with the data type specification. How should I correctly define these columns in H2(version: 2.1.214) for intregation test? I'm also using MariaDB, so any suggestions on compatibility between the two databases would be helpful.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","inheritance","mapstruct"],"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1701124158,"post_id":77486214,"comment_id":136734097,"body_markdown":"Can you explain better what you are looking for? What do you want to achieve? Maybe an example of the expected output can help","body":"Can you explain better what you are looking for? What do you want to achieve? Maybe an example of the expected output can help"}],"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700038040,"creation_date":1700037445,"question_id":77486214,"body_markdown":"I have these Dtos: \r\n\r\n    public class AnimalDTO {\r\n        \r\n        Long id;\r\n        String name;\r\n       \r\n    }\r\n\r\n    public class DogDTO extends AnimalDTO {\r\n        \r\n        Long furType;\r\n        String furColor;\r\n        ...\r\n    }\r\n\r\n    public class FarmDTO {\r\n        \r\n        Long id;\r\n        AnimalDTO mainAnimal;\r\n        Double size;\r\n        Integer employees;\r\n        ...\r\n    }\r\n\r\n    public class FarmMinimalDTO {\r\n        \r\n        Long id;\r\n        AnimalDTO mainAnimal;\r\n       \r\n    }\r\n\r\n\r\nIf now in Mapstruct i would write something like: \r\n\r\n    \r\n    @Mapper(config = MapperConfiguration.class) // nothing fancy in there\r\n    public abstract class FarmMapper {\r\n\r\n           public abstract FarmMinimalDTO mapToFarmDTO(FarmDTO farmDTO);\r\n    }\r\n\r\n\r\nIf the `farmDTO.mainAnimal` is a `DogDTO`, mapstruct does not implicitly convert that into an `AnimalDTO`. But the main point of me putting `AnimalDTO` in the `FarmMinimalDTO`, is because I want less data in this DTO. \r\n\r\nCan I configure that with mapstruct? Or do I have to map that individually? \r\n\r\nOr is that `DogDTO extends AnimalDTO` already a red flag? I inherited this project, in my last projects I liked keeping my DTOs untangled although this meant duplicate code.\r\n\r\n\r\n\r\n\r\n","title":"Mapstruct explicitly map to subclass","body":"<p>I have these Dtos:</p>\n<pre><code>public class AnimalDTO {\n    \n    Long id;\n    String name;\n   \n}\n\npublic class DogDTO extends AnimalDTO {\n    \n    Long furType;\n    String furColor;\n    ...\n}\n\npublic class FarmDTO {\n    \n    Long id;\n    AnimalDTO mainAnimal;\n    Double size;\n    Integer employees;\n    ...\n}\n\npublic class FarmMinimalDTO {\n    \n    Long id;\n    AnimalDTO mainAnimal;\n   \n}\n</code></pre>\n<p>If now in Mapstruct i would write something like:</p>\n<pre><code>@Mapper(config = MapperConfiguration.class) // nothing fancy in there\npublic abstract class FarmMapper {\n\n       public abstract FarmMinimalDTO mapToFarmDTO(FarmDTO farmDTO);\n}\n</code></pre>\n<p>If the <code>farmDTO.mainAnimal</code> is a <code>DogDTO</code>, mapstruct does not implicitly convert that into an <code>AnimalDTO</code>. But the main point of me putting <code>AnimalDTO</code> in the <code>FarmMinimalDTO</code>, is because I want less data in this DTO.</p>\n<p>Can I configure that with mapstruct? Or do I have to map that individually?</p>\n<p>Or is that <code>DogDTO extends AnimalDTO</code> already a red flag? I inherited this project, in my last projects I liked keeping my DTOs untangled although this meant duplicate code.</p>\n"},{"tags":["java","android","android-studio","annotation-processing"],"comments":[{"owner":{"account_id":1371468,"reputation":5748,"user_id":1306546,"accept_rate":79,"display_name":"Rens Verhage"},"score":0,"creation_date":1405534773,"post_id":24787751,"comment_id":38470279,"body_markdown":"Ok, this is just weird. I restarted Android Studio, reopened my project and now I have two &#39;Compiler&#39; options, both options as shown in the screens above...","body":"Ok, this is just weird. I restarted Android Studio, reopened my project and now I have two &#39;Compiler&#39; options, both options as shown in the screens above..."},{"owner":{"account_id":2157585,"reputation":15037,"user_id":2129654,"accept_rate":41,"display_name":"Jacob"},"score":1,"creation_date":1417388521,"post_id":24787751,"comment_id":42917836,"body_markdown":"So only restart has solved your problem or maybe some additional acitons? Even after restart I still have this issue like (Compiler(Gradle-based Android Projects)) etc. and only one tab.","body":"So only restart has solved your problem or maybe some additional acitons? Even after restart I still have this issue like (Compiler(Gradle-based Android Projects)) etc. and only one tab."}],"answers":[{"comments":[{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":3,"creation_date":1453216574,"post_id":28312665,"comment_id":57498656,"body_markdown":"There is no `Default Settings` under Other Settings in A.S. anymore.","body":"There is no <code>Default Settings</code> under Other Settings in A.S. anymore."},{"owner":{"account_id":6251884,"reputation":168,"user_id":4861695,"display_name":"Cool Soft"},"score":0,"creation_date":1659795703,"post_id":28312665,"comment_id":129382475,"body_markdown":"It&#39;s moved to File -&gt; New Projects Setup","body":"It&#39;s moved to File -&gt; New Projects Setup"}],"tags":[],"owner":{"account_id":194941,"reputation":531,"user_id":437550,"accept_rate":82,"display_name":"Eli Lipsitz"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1423017901,"creation_date":1423017901,"answer_id":28312665,"question_id":24787751,"body_markdown":"This is a little late, but for me, it&#39;s under\r\n\r\nFile -&gt; Other Settings -&gt; Default Settings -&gt; Compiler\r\n\r\nThis compiler has dropdown options, including Annotation Processors.","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>This is a little late, but for me, it's under</p>\n\n<p>File -> Other Settings -> Default Settings -> Compiler</p>\n\n<p>This compiler has dropdown options, including Annotation Processors.</p>\n"},{"comments":[{"owner":{"account_id":3800955,"reputation":90,"user_id":3154633,"display_name":"Jo&#235;l V."},"score":0,"creation_date":1566490803,"post_id":50675771,"comment_id":101682079,"body_markdown":"With Open Studio 3.4.2 under Linux, I can&#39;t find the Java compiler options in any of these places. I would like to add the -Xlint:deprecation option to find out which API is obsolete when compiling code for bluetooth. The Compiler options I found in the &quot;Build, execution, deployment&quot; settings obviously only apply to Gradle. Does anybody know where to set the Java compiler options now?","body":"With Open Studio 3.4.2 under Linux, I can&#39;t find the Java compiler options in any of these places. I would like to add the -Xlint:deprecation option to find out which API is obsolete when compiling code for bluetooth. The Compiler options I found in the &quot;Build, execution, deployment&quot; settings obviously only apply to Gradle. Does anybody know where to set the Java compiler options now?"},{"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"score":0,"creation_date":1566531124,"post_id":50675771,"comment_id":101693423,"body_markdown":"@Jo&#235;lV. I just updated this answer, check now if it works for you [tested on the last Android Studio 3.5 for Windows but theoretically should be identical on Linux]","body":"@Jo&#235;lV. I just updated this answer, check now if it works for you [tested on the last Android Studio 3.5 for Windows but theoretically should be identical on Linux]"},{"owner":{"account_id":2037607,"reputation":111,"user_id":1819570,"display_name":"meghraj27"},"score":0,"creation_date":1569299790,"post_id":50675771,"comment_id":102541426,"body_markdown":"update is about &quot;new projects&quot;, what about the current project","body":"update is about &quot;new projects&quot;, what about the current project"},{"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"score":0,"creation_date":1569462900,"post_id":50675771,"comment_id":102607372,"body_markdown":"@meghraj27 I just updated the answer again, let me know if it solves your issue or not","body":"@meghraj27 I just updated the answer again, let me know if it solves your issue or not"}],"tags":[],"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569462844,"creation_date":1528098759,"answer_id":50675771,"question_id":24787751,"body_markdown":"In Android Studio 3.1.2 this setting is under:\r\n\r\nFile -&gt; Other Settings -&gt; Default Settings... -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler -&gt; Additional command line parameters\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n----------\r\n\r\n\r\n**Update**\r\n\r\nFor more recent versions of Android Studio [tested on Android Studio 3.5 but probably starting from 3.4 according to Joel&#39;s comment] this setting is under:\r\n\r\nFile -&gt; Other Settings -&gt; Settings for New Projects... -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler -&gt; Additional command line parameters\r\n\r\n\r\n----------\r\n\r\n\r\nFor existing projects it seems to me that the only option is to implement the solution described in these two answers [A1][2] and [A2][3], modifying the `build.gradle` file wrapping around `allprojects` or not based on your needs:\r\n\r\n    allprojects {\r\n        gradle.projectsEvaluated {\r\n            tasks.withType(JavaCompile) {\r\n                options.compilerArgs &lt;&lt; &quot;-Xlint:unchecked&quot; &lt;&lt; &quot;-Xlint:deprecation&quot;\r\n            }\r\n        }\r\n    }\r\n\r\nMore details about Gradle&#39;s Multi-Project Builds can be found [here][4] on their official website\r\n\r\n  [1]: https://i.stack.imgur.com/RjI9y.jpg\r\n  [2]: https://stackoverflow.com/a/22183825/4092588\r\n  [3]: https://stackoverflow.com/a/28270322/4092588\r\n  [4]: https://docs.gradle.org/current/userguide/multi_project_builds.html\r\n","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>In Android Studio 3.1.2 this setting is under:</p>\n\n<p>File -> Other Settings -> Default Settings... -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Additional command line parameters</p>\n\n<p><a href=\"https://i.stack.imgur.com/RjI9y.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RjI9y.jpg\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>For more recent versions of Android Studio [tested on Android Studio 3.5 but probably starting from 3.4 according to Joel's comment] this setting is under:</p>\n\n<p>File -> Other Settings -> Settings for New Projects... -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Additional command line parameters</p>\n\n<hr>\n\n<p>For existing projects it seems to me that the only option is to implement the solution described in these two answers <a href=\"https://stackoverflow.com/a/22183825/4092588\">A1</a> and <a href=\"https://stackoverflow.com/a/28270322/4092588\">A2</a>, modifying the <code>build.gradle</code> file wrapping around <code>allprojects</code> or not based on your needs:</p>\n\n<pre><code>allprojects {\n    gradle.projectsEvaluated {\n        tasks.withType(JavaCompile) {\n            options.compilerArgs &lt;&lt; \"-Xlint:unchecked\" &lt;&lt; \"-Xlint:deprecation\"\n        }\n    }\n}\n</code></pre>\n\n<p>More details about Gradle's Multi-Project Builds can be found <a href=\"https://docs.gradle.org/current/userguide/multi_project_builds.html\" rel=\"nofollow noreferrer\">here</a> on their official website</p>\n"},{"tags":[],"owner":{"account_id":29103520,"reputation":1,"user_id":22294840,"display_name":"J&#243;zef Pr&#243;chniewicz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037717,"creation_date":1699461062,"answer_id":77447342,"question_id":24787751,"body_markdown":"This option now is moved to:\r\n\r\n&gt; File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Gradle-Android\r\n&gt; Compiler -&gt; Command-line Options:\r\n\r\n![Screen of settings][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EMIB7.png","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>This option now is moved to:</p>\n<blockquote>\n<p>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Gradle-Android\nCompiler -&gt; Command-line Options:</p>\n</blockquote>\n<p><img src=\"https://i.stack.imgur.com/EMIB7.png\" alt=\"Screen of settings\" /></p>\n"}],"owner":{"account_id":1371468,"reputation":5748,"user_id":1306546,"accept_rate":79,"display_name":"Rens Verhage"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9814,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":3,"score":10,"last_activity_date":1700037717,"creation_date":1405534053,"question_id":24787751,"body_markdown":"Recently I upgraded my `Android Studio` to `0.8.2`. Now, my android-annotations based project fails to build. It seems like annotation processing is disabled somehow. It seems the project compiler settings have been changed, the option to turn annotation processing on/off is nowhere to be found...\r\n\r\n![Compiler settings in 0.8.2][1]\r\n\r\n\r\nI can&#39;t expand the &#39;Compiler&#39; option as I could before:\r\n\r\n![Expected compiler settings][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/VYuea.png\r\n  [2]: http://i.stack.imgur.com/jjHgt.png\r\n\r\nWhere have they put these options?\r\n","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>Recently I upgraded my <code>Android Studio</code> to <code>0.8.2</code>. Now, my android-annotations based project fails to build. It seems like annotation processing is disabled somehow. It seems the project compiler settings have been changed, the option to turn annotation processing on/off is nowhere to be found...</p>\n\n<p><img src=\"https://i.stack.imgur.com/VYuea.png\" alt=\"Compiler settings in 0.8.2\"></p>\n\n<p>I can't expand the 'Compiler' option as I could before:</p>\n\n<p><img src=\"https://i.stack.imgur.com/jjHgt.png\" alt=\"Expected compiler settings\"></p>\n\n<p>Where have they put these options?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","criteriaquery","criteriabuilder"],"answers":[{"comments":[{"owner":{"account_id":17497078,"reputation":1,"user_id":12688105,"display_name":"Vishal Naik"},"score":0,"creation_date":1685163096,"post_id":76345268,"comment_id":134626457,"body_markdown":"Still not wokring now I am getting this error\n\njava: method greatest in interface javax.persistence.criteria.CriteriaBuilder cannot be applied to given types;\n  required: javax.persistence.criteria.Expression&lt;X&gt;\n  found: javax.persistence.criteria.Path&lt;java.lang.Object&gt;\n  reason: inferred type does not conform to upper bound(s)\n    inferred: java.lang.Object\n    upper bound(s): java.lang.Comparable&lt;? super java.lang.Object&gt;,java.lang.Object","body":"Still not wokring now I am getting this error  java: method greatest in interface javax.persistence.criteria.CriteriaBuilder cannot be applied to given types;   required: javax.persistence.criteria.Expression&lt;X&gt;   found: javax.persistence.criteria.Path&lt;java.lang.Object&gt;   reason: inferred type does not conform to upper bound(s)     inferred: java.lang.Object     upper bound(s): java.lang.Comparable&lt;? super java.lang.Object&gt;,java.lang.Object"},{"owner":{"account_id":2669818,"reputation":715,"user_id":2307460,"accept_rate":60,"display_name":"Yogesh"},"score":0,"creation_date":1685194347,"post_id":76345268,"comment_id":134629257,"body_markdown":"I think it seems your date field is has data type other then Timestamp.","body":"I think it seems your date field is has data type other then Timestamp."},{"owner":{"account_id":17497078,"reputation":1,"user_id":12688105,"display_name":"Vishal Naik"},"score":1,"creation_date":1685252993,"post_id":76345268,"comment_id":134634222,"body_markdown":"Solved it had to as() sq.select(cb.greatest(s2.get(Exam.end)).as(LocalDate.class)). Thanks for the help.","body":"Solved it had to as() sq.select(cb.greatest(s2.get(Exam.end)).as(LocalDate.class))&zwnj;&#8203;. Thanks for the help."}],"tags":[],"owner":{"account_id":2669818,"reputation":715,"user_id":2307460,"accept_rate":60,"display_name":"Yogesh"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685160369,"creation_date":1685160369,"answer_id":76345268,"question_id":76345153,"body_markdown":"Instead of `max` you have to use `greatest` for dates. `Max` is for Numeric types. refer below piece of code for reference\r\n\r\n    EntityManger em;      //to be injected or constructed\r\n    \r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;Exam&gt; cq = cb.createQuery(Exam.class);\r\n    Subquery&lt;Date&gt; sq = cq.subquery(Date.class);\r\n    Root&lt;Exam&gt; s1 = cq.from(Exam.class);\r\n    Root&lt;Exam&gt; s2 = sq.from(Exam.class);\r\n    sq.select(cb.greatest(s2.get(Exam.end)));\r\n    List&lt;Exam&gt; result = em.createQuery(cq).getResultList();","title":"Error using criteriaBuilder.max() for LocalDate","body":"<p>Instead of <code>max</code> you have to use <code>greatest</code> for dates. <code>Max</code> is for Numeric types. refer below piece of code for reference</p>\n<pre><code>EntityManger em;      //to be injected or constructed\n\nCriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery&lt;Exam&gt; cq = cb.createQuery(Exam.class);\nSubquery&lt;Date&gt; sq = cq.subquery(Date.class);\nRoot&lt;Exam&gt; s1 = cq.from(Exam.class);\nRoot&lt;Exam&gt; s2 = sq.from(Exam.class);\nsq.select(cb.greatest(s2.get(Exam.end)));\nList&lt;Exam&gt; result = em.createQuery(cq).getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5702540,"reputation":31,"user_id":4507091,"display_name":"RamChandra Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037688,"creation_date":1699614089,"answer_id":77459492,"question_id":76345153,"body_markdown":"This should work too:\r\n```\r\nsq.select(cb.max(s2.get(Exam.end)).as(LocalDate.class)));\r\n```","title":"Error using criteriaBuilder.max() for LocalDate","body":"<p>This should work too:</p>\n<pre><code>sq.select(cb.max(s2.get(Exam.end)).as(LocalDate.class)));\n</code></pre>\n"}],"owner":{"account_id":17497078,"reputation":1,"user_id":12688105,"display_name":"Vishal Naik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700037688,"creation_date":1685156112,"question_id":76345153,"body_markdown":"I am trying to get max date using criteria builder in a subquery.\r\nBut I am getting this error\r\n\r\n&gt; ```\r\n&gt; Required type: Expression &lt;LocalDate&gt;\r\n&gt; Provided: Expression &lt;Number&gt;\r\n&gt; ```\r\n \r\nThis is my code:\r\n\r\n```java\r\nSubquery&lt;LocalDate&gt; subRoot = criteriaQuery.subquery(LocalDate.class);\r\nsubRoot.select(criteriaBuilder.max(root.get(&quot;date&quot;)));\r\n```\r\n\r\nI am trying to get max date from sub query which is required in my parent query.","title":"Error using criteriaBuilder.max() for LocalDate","body":"<p>I am trying to get max date using criteria builder in a subquery.\nBut I am getting this error</p>\n<blockquote>\n<pre><code>Required type: Expression &lt;LocalDate&gt;\nProvided: Expression &lt;Number&gt;\n</code></pre>\n</blockquote>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Subquery&lt;LocalDate&gt; subRoot = criteriaQuery.subquery(LocalDate.class);\nsubRoot.select(criteriaBuilder.max(root.get(&quot;date&quot;)));\n</code></pre>\n<p>I am trying to get max date from sub query which is required in my parent query.</p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1466602008,"post_id":37969140,"comment_id":63384701,"body_markdown":"are you saying that later on when you do context.getBean(&quot;bean1&quot;); it doesnt work??","body":"are you saying that later on when you do context.getBean(&quot;bean1&quot;); it doesnt work??"},{"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"score":0,"creation_date":1466602315,"post_id":37969140,"comment_id":63385012,"body_markdown":"@Mudassar yep, exactly","body":"@Mudassar yep, exactly"}],"answers":[{"comments":[{"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"score":0,"creation_date":1466604844,"post_id":37970307,"comment_id":63387409,"body_markdown":"Can you please give me an example with @ConditionalOnExpression and multivalue property? I mean some thing like @ConditionalOnExpression(&quot;${my.prop}.contains(&#39;a&#39;)&quot;)?","body":"Can you please give me an example with @ConditionalOnExpression and multivalue property? I mean some thing like @ConditionalOnExpression(&quot;${my.prop}.contains(&#39;a&#39;)&quot;)?"},{"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"score":0,"creation_date":1466605136,"post_id":37970307,"comment_id":63387677,"body_markdown":"@Value approach isn&#39;t good for me, cause I want to register in the context the collection of beans, not only one. and I don&#39;t know in advance the beans count (it depends on the property &#39;prop&#39;)","body":"@Value approach isn&#39;t good for me, cause I want to register in the context the collection of beans, not only one. and I don&#39;t know in advance the beans count (it depends on the property &#39;prop&#39;)"},{"owner":{"account_id":2073508,"reputation":2779,"user_id":1847482,"accept_rate":60,"display_name":"Alexander"},"score":1,"creation_date":1466669938,"post_id":37970307,"comment_id":63416406,"body_markdown":"I think it should be @ConditionalOnExpression(&quot;&#39;${my.prop}&#39;.contains(&#39;a&#39;)&quot;) or for example @ConditionalOnExpression(&quot;&#39;${my.prop}&#39;==&#39;abc&#39;&quot;). You can use any expression that SpEL supports. I understand that you want to rely on the component scan, otherwise you could just do all the logic inside you @Configuration class.","body":"I think it should be @ConditionalOnExpression(&quot;&#39;${my.prop}&#39;.contains(&#39;a&#39;)&quot;) or for example @ConditionalOnExpression(&quot;&#39;${my.prop}&#39;==&#39;abc&#39;&quot;). You can use any expression that SpEL supports. I understand that you want to rely on the component scan, otherwise you could just do all the logic inside you @Configuration class."},{"owner":{"account_id":2073508,"reputation":2779,"user_id":1847482,"accept_rate":60,"display_name":"Alexander"},"score":0,"creation_date":1466670386,"post_id":37970307,"comment_id":63416696,"body_markdown":"I still personally prefer to have this logic in pure Java, for example: class SomeBeanManager {@Autowired void setAllOfThem(List&lt;SomeBean&gt; allOfThem) {...} } and choose the ones based on your properties.","body":"I still personally prefer to have this logic in pure Java, for example: class SomeBeanManager {@Autowired void setAllOfThem(List&lt;SomeBean&gt; allOfThem) {...} } and choose the ones based on your properties."},{"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"score":0,"creation_date":1466671616,"post_id":37970307,"comment_id":63417546,"body_markdown":"Unfurtunately @ConditionalOnExpression(&quot;${my.prop}.contains(&#39;a&#39;)&quot;) throws an exception. I&#39;m not sure but it seems that spring conditional SpEL can&#39;t work with multivalued properties. I&#39;ll try to implement my own @Conditional extension to deal with it.","body":"Unfurtunately @ConditionalOnExpression(&quot;${my.prop}.contains(&#39;a&#39;)&quot;) throws an exception. I&#39;m not sure but it seems that spring conditional SpEL can&#39;t work with multivalued properties. I&#39;ll try to implement my own @Conditional extension to deal with it."},{"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"score":0,"creation_date":1466671763,"post_id":37970307,"comment_id":63417663,"body_markdown":"I&#39;ve got your poin about pure java way and totoly agree with such approach, but I don&#39;t want to register in context beans that aren&#39;t specified by property (they have time consuming initialize methods)","body":"I&#39;ve got your poin about pure java way and totoly agree with such approach, but I don&#39;t want to register in context beans that aren&#39;t specified by property (they have time consuming initialize methods)"},{"owner":{"account_id":2073508,"reputation":2779,"user_id":1847482,"accept_rate":60,"display_name":"Alexander"},"score":0,"creation_date":1466682251,"post_id":37970307,"comment_id":63424882,"body_markdown":"Did you try to surround ${my.prop} with single quotes? &quot; &#39;${my.prop}&#39;.contains(&#39;a&#39;) &quot;","body":"Did you try to surround ${my.prop} with single quotes? &quot; &#39;${my.prop}&#39;.contains(&#39;a&#39;) &quot;"},{"owner":{"account_id":2073508,"reputation":2779,"user_id":1847482,"accept_rate":60,"display_name":"Alexander"},"score":0,"creation_date":1466682492,"post_id":37970307,"comment_id":63425065,"body_markdown":"${my.prop} is going to be replaced by a literal by PropertyXxxBeanFactoryPostProcessor (don&#39;t remember its exact name) before your SpEL expression is evaluated. So without single quotes your expression will become &quot;abc.contains(&#39;a&#39;)&quot; if my.prop=abc which will deservedly throw an exception. I think Spring will look for a bean named &#39;abc&#39; in this case and will not find it.","body":"${my.prop} is going to be replaced by a literal by PropertyXxxBeanFactoryPostProcessor (don&#39;t remember its exact name) before your SpEL expression is evaluated. So without single quotes your expression will become &quot;abc.contains(&#39;a&#39;)&quot; if my.prop=abc which will deservedly throw an exception. I think Spring will look for a bean named &#39;abc&#39; in this case and will not find it."},{"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"score":0,"creation_date":1466773397,"post_id":37970307,"comment_id":63470441,"body_markdown":"Yes, I&#39;ve tryed to surround ${my.prop} with single quotes, but it haven&#39;t helped me. As I&#39;ve understood sping treats such expression as a string, but my property is something like array or list. Anyway thank you very much for your help! I really appreciate it :)","body":"Yes, I&#39;ve tryed to surround ${my.prop} with single quotes, but it haven&#39;t helped me. As I&#39;ve understood sping treats such expression as a string, but my property is something like array or list. Anyway thank you very much for your help! I really appreciate it :)"},{"owner":{"account_id":2073508,"reputation":2779,"user_id":1847482,"accept_rate":60,"display_name":"Alexander"},"score":0,"creation_date":1466775032,"post_id":37970307,"comment_id":63471435,"body_markdown":"Welcome :). I still suggest you to take a look at Spring EL: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html . It is very powerful, it can for example run any static method where you could split your property as you like and place a breakpoint if needed.","body":"Welcome :). I still suggest you to take a look at Spring EL: <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/spring-framework-referenc&zwnj;&#8203;e/&hellip;</a> . It is very powerful, it can for example run any static method where you could split your property as you like and place a breakpoint if needed."},{"owner":{"account_id":4845615,"reputation":1065,"user_id":3909315,"accept_rate":33,"display_name":"Thiagarajan Ramanathan"},"score":1,"creation_date":1591080381,"post_id":37970307,"comment_id":109912069,"body_markdown":"@ConditionalOnExpression(&quot;&#39;${vault.environment.type}&#39;.contains(&#39;MAP&#39;)&quot;) worked for me.","body":"@ConditionalOnExpression(&quot;&#39;${vault.environment.type}&#39;.contai&zwnj;&#8203;ns(&#39;MAP&#39;)&quot;) worked for me."}],"tags":[],"owner":{"account_id":2073508,"reputation":2779,"user_id":1847482,"accept_rate":60,"display_name":"Alexander"},"comment_count":11,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1466603971,"creation_date":1466603971,"answer_id":37970307,"question_id":37969140,"body_markdown":"You can use Spring Boot @ConditionalOnExpression annotation, not just in the @bean-annotated methods, but directly on classes as well:\r\n\r\n    @ConditionalOnExpression(&quot;${my.prop}&quot;)\r\n    @Component\r\n    class SomeBean1 implements SomeBean {}\r\n\r\n    @ConditionalOnExpression(&quot;!${my.prop}&quot;)\r\n    @Component\r\n    class SomeBean2 implements SomeBean {}\r\n\r\nHaving said this I personally prefer using pure Java:\r\n\r\n    @Value(&quot;${my.prop}&quot;) String myProp;\r\n    ...\r\n    @Bean SomeBean someBean() {\r\n        if (&quot;abc&quot;.equals(myProp)) {return new SomeBean1();} else {return new SomeBean2();}\r\n    }\r\n\r\n","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>You can use Spring Boot @ConditionalOnExpression annotation, not just in the @bean-annotated methods, but directly on classes as well:</p>\n\n<pre><code>@ConditionalOnExpression(\"${my.prop}\")\n@Component\nclass SomeBean1 implements SomeBean {}\n\n@ConditionalOnExpression(\"!${my.prop}\")\n@Component\nclass SomeBean2 implements SomeBean {}\n</code></pre>\n\n<p>Having said this I personally prefer using pure Java:</p>\n\n<pre><code>@Value(\"${my.prop}\") String myProp;\n...\n@Bean SomeBean someBean() {\n    if (\"abc\".equals(myProp)) {return new SomeBean1();} else {return new SomeBean2();}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":0,"creation_date":1539349168,"post_id":37986942,"comment_id":92481601,"body_markdown":"If running with Spring Boot, one may want to to extends `SpringBootCondition` instead as it provides more logging info if something does not work properly.","body":"If running with Spring Boot, one may want to to extends <code>SpringBootCondition</code> instead as it provides more logging info if something does not work properly."}],"tags":[],"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466672601,"creation_date":1466672601,"answer_id":37986942,"question_id":37969140,"body_markdown":"It looks like @ConditionalOnProperty haven&#39;t multivalued properies.\r\nIn spring environment they are presented as\r\n\r\n    prop[0]=a\r\n    prop[1]=b\r\n\r\nMy solution is to make my own @Conditional extension, that is able to work with multivalued properies. Here is the example.\r\n\r\nAnnotation:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ ElementType.TYPE, ElementType.METHOD })\r\n    @Documented\r\n    @Conditional(OnPropertyCondition.class)\r\n    public @interface ConditionalOnProperty2 {\r\n        String name();\r\n        String value();\r\n    }\r\nCondition:\r\n\r\n    class OnPropertyCondition implements Condition {\r\n        @Override\r\n        public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n            String name = attribute(metadata, &quot;name&quot;);\r\n            String value = attribute(metadata, &quot;value&quot;);\r\n    \r\n            String searchName = name;\r\n            String property = property(context, searchName);\r\n            int i = 0;\r\n            do {\r\n                if (value.equals(property)) return true;\r\n                searchName = name + &#39;[&#39; + i++ + &#39;]&#39;;\r\n            } while ((property = property(context, searchName)) != null);\r\n            return false;\r\n        }\r\n    \r\n        private String attribute(AnnotatedTypeMetadata metadata, String name) {\r\n            return (String) metadata.getAnnotationAttributes(ConditionalOnProperty2.class.getName()).get(name);\r\n        }\r\n    \r\n        private String property(ConditionContext context, String name) {\r\n            return context.getEnvironment().getProperty(name);\r\n        }\r\n    }\r\nUsage:\r\n   \r\n\r\n     @Bean\r\n     @ConditionalOnProperty2(name = &quot;prop&quot;, havingValue = &quot;a&quot;)\r\n     public SomeBean bean1() {\r\n         return new SomeBean1();\r\n     }\r\n     \r\n     @Bean\r\n     @ConditionalOnProperty2(name = &quot;prop&quot;, havingValue = &quot;b&quot;)\r\n     public SomeBean bean2() {\r\n         return new SomeBean2();\r\n     }","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>It looks like @ConditionalOnProperty haven't multivalued properies.\nIn spring environment they are presented as</p>\n\n<pre><code>prop[0]=a\nprop[1]=b\n</code></pre>\n\n<p>My solution is to make my own @Conditional extension, that is able to work with multivalued properies. Here is the example.</p>\n\n<p>Annotation:</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.TYPE, ElementType.METHOD })\n@Documented\n@Conditional(OnPropertyCondition.class)\npublic @interface ConditionalOnProperty2 {\n    String name();\n    String value();\n}\n</code></pre>\n\n<p>Condition:</p>\n\n<pre><code>class OnPropertyCondition implements Condition {\n    @Override\n    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n        String name = attribute(metadata, \"name\");\n        String value = attribute(metadata, \"value\");\n\n        String searchName = name;\n        String property = property(context, searchName);\n        int i = 0;\n        do {\n            if (value.equals(property)) return true;\n            searchName = name + '[' + i++ + ']';\n        } while ((property = property(context, searchName)) != null);\n        return false;\n    }\n\n    private String attribute(AnnotatedTypeMetadata metadata, String name) {\n        return (String) metadata.getAnnotationAttributes(ConditionalOnProperty2.class.getName()).get(name);\n    }\n\n    private String property(ConditionContext context, String name) {\n        return context.getEnvironment().getProperty(name);\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code> @Bean\n @ConditionalOnProperty2(name = \"prop\", havingValue = \"a\")\n public SomeBean bean1() {\n     return new SomeBean1();\n }\n\n @Bean\n @ConditionalOnProperty2(name = \"prop\", havingValue = \"b\")\n public SomeBean bean2() {\n     return new SomeBean2();\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18612517,"reputation":1,"user_id":13564528,"display_name":"Reminis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668407935,"creation_date":1668407935,"answer_id":74427743,"question_id":37969140,"body_markdown":"`havingValue` doesn&#39;t mean that a object has this value. It means that the value we get from this key equals `havingValue` or not.\r\n\r\nso, a list object `prop` neither equals `a` nor `b`, it equals `[a, b]`. Both of them will not be load.","title":"@ConditionalOnProperty for multi-valued properies","body":"<p><code>havingValue</code> doesn't mean that a object has this value. It means that the value we get from this key equals <code>havingValue</code> or not.</p>\n<p>so, a list object <code>prop</code> neither equals <code>a</code> nor <code>b</code>, it equals <code>[a, b]</code>. Both of them will not be load.</p>\n"},{"tags":[],"owner":{"account_id":892699,"reputation":41,"user_id":930662,"display_name":"Kobi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037519,"creation_date":1699522512,"answer_id":77451983,"question_id":37969140,"body_markdown":"I think the comment of Thiagarajan Ramanathan is very helpful and answers the question:\r\n```\r\n @ConditionalOnExpression(&quot;&#39;${vault.environment.type}&#39;.contains(&#39;MAP&#39;)&quot;) \r\n```\r\nworked for me. ","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>I think the comment of Thiagarajan Ramanathan is very helpful and answers the question:</p>\n<pre><code> @ConditionalOnExpression(&quot;'${vault.environment.type}'.contains('MAP')&quot;) \n</code></pre>\n<p>worked for me.</p>\n"}],"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16809,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":4,"score":10,"last_activity_date":1700037519,"creation_date":1466601183,"question_id":37969140,"body_markdown":"Is there any way to use @ConditionalOnProperty annotation based on multi-valued property?\r\n\r\nSpring configuration:\r\n\r\n    @Bean\r\n    @ConditionalOnProperty(name = &quot;prop&quot;, havingValue = &quot;a&quot;)\r\n    public SomeBean bean1() {\r\n        return new SomeBean1();\r\n    }\r\n\r\n    @Bean\r\n    @ConditionalOnProperty(name = &quot;prop&quot;, havingValue = &quot;b&quot;)\r\n    public SomeBean bean2() {\r\n        return new SomeBean2();\r\n    }\r\n\r\nand application.yaml\r\n\r\n    prop: \r\n     - a\r\n     - b\r\n\r\nI expect that both beans: bean1 and bean2 will be registered in the spring context, but no one from them isn&#39;t registered. Is there any way to do it?\r\n","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>Is there any way to use @ConditionalOnProperty annotation based on multi-valued property?</p>\n\n<p>Spring configuration:</p>\n\n<pre><code>@Bean\n@ConditionalOnProperty(name = \"prop\", havingValue = \"a\")\npublic SomeBean bean1() {\n    return new SomeBean1();\n}\n\n@Bean\n@ConditionalOnProperty(name = \"prop\", havingValue = \"b\")\npublic SomeBean bean2() {\n    return new SomeBean2();\n}\n</code></pre>\n\n<p>and application.yaml</p>\n\n<pre><code>prop: \n - a\n - b\n</code></pre>\n\n<p>I expect that both beans: bean1 and bean2 will be registered in the spring context, but no one from them isn't registered. Is there any way to do it?</p>\n"},{"tags":["java","certificate"],"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1458698307,"post_id":1270703,"comment_id":59974152,"body_markdown":"This Java demo (URLConnection) program connects to a https url and prints/calculates all kinds of fingerprints, including pin-sha256, SKI and Thumbprints: https://github.com/ecki/JavaCryptoTest/blob/master/src/main/java/net/eckenfels/test/ssl/UrlInspect.java","body":"This Java demo (URLConnection) program connects to a https url and prints/calculates all kinds of fingerprints, including pin-sha256, SKI and Thumbprints: <a href=\"https://github.com/ecki/JavaCryptoTest/blob/master/src/main/java/net/eckenfels/test/ssl/UrlInspect.java\" rel=\"nofollow noreferrer\">github.com/ecki/JavaCryptoTest/blob/master/src/main/java/net&zwnj;&#8203;/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":38055,"reputation":1294,"user_id":109012,"display_name":"Matt Z"},"score":6,"creation_date":1250270929,"post_id":1271148,"comment_id":1107970,"body_markdown":"Thanks for the answer! Googling around I found that the thumbprint is commonly used as a unique identifier for a certificate, so it doesn&#39;t seem to be .NET specific. The web service I&#39;m calling is using it to find the certificate in their store.","body":"Thanks for the answer! Googling around I found that the thumbprint is commonly used as a unique identifier for a certificate, so it doesn&#39;t seem to be .NET specific. The web service I&#39;m calling is using it to find the certificate in their store."},{"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"score":0,"creation_date":1250274128,"post_id":1271148,"comment_id":1108267,"body_markdown":"The web service must be a .NET server. I haven&#39;t seen any other servers using thumbprint to store client cert. .NET made so much security-related extensions, you might encounter other issues also. Unless your client needs to be cross-platform, it would be a lot easier to write client in .NET too.","body":"The web service must be a .NET server. I haven&#39;t seen any other servers using thumbprint to store client cert. .NET made so much security-related extensions, you might encounter other issues also. Unless your client needs to be cross-platform, it would be a lot easier to write client in .NET too."},{"owner":{"account_id":24902,"reputation":9752,"user_id":63621,"accept_rate":64,"display_name":"Henrik"},"score":10,"creation_date":1347715089,"post_id":1271148,"comment_id":16723506,"body_markdown":"Thumbprints aren&#39;t .Net exclusive. Have you tried connecting to a server using SSH that you haven&#39;t connected to before? You&#39;ll see its thumbprint. The certificate store will have thumbprints listed, too.","body":"Thumbprints aren&#39;t .Net exclusive. Have you tried connecting to a server using SSH that you haven&#39;t connected to before? You&#39;ll see its thumbprint. The certificate store will have thumbprints listed, too."},{"owner":{"account_id":301110,"reputation":98854,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":10,"creation_date":1395734322,"post_id":1271148,"comment_id":34459982,"body_markdown":"&quot;Why do you need it in Java?&quot; - He&#39;s probably pinning the certificate. Its much safer than trusting any of the hundreds of CA and subordinate CAs and DNS.","body":"&quot;Why do you need it in Java?&quot; - He&#39;s probably pinning the certificate. Its much safer than trusting any of the hundreds of CA and subordinate CAs and DNS."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1696349012,"post_id":1271148,"comment_id":136140036,"body_markdown":"Since Java 17 instead of using `DataTypeConverter` you can use [`java.util.HexFormat`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html) (this also allows customizing the format of the hex string)","body":"Since Java 17 instead of using <code>DataTypeConverter</code> you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html\" rel=\"nofollow noreferrer\"><code>java.util.HexFormat</code></a> (this also allows customizing the format of the hex string)"}],"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"comment_count":5,"down_vote_count":2,"up_vote_count":87,"is_accepted":true,"score":85,"last_activity_date":1509234191,"creation_date":1250158674,"answer_id":1271148,"question_id":1270703,"body_markdown":"The SHA-1 hash of the [DER encoding][1] of the certificate is what .NET is getting with **X509Certificate2.Thumbprint**.\r\n\r\nAs noted on the [remarks on MSDN](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx#Remarks):\r\n\r\n&gt; The thumbprint is dynamically generated using the SHA1 algorithm and does not physically exist in the certificate. Since the thumbprint is a unique value for the certificate, it is commonly used to find a particular certificate in a certificate store.\r\n\r\nJava&#39;s standard library doesn&#39;t provide the thumbprint directly, but you can get it like this:\r\n\r\n    DatatypeConverter.printHexBinary(\r\n            MessageDigest.getInstance(&quot;SHA-1&quot;).digest(\r\n                    cert.getEncoded())).toLowerCase();\r\n\r\nHere&#39;s a full worked example using a conveniently accessible PEM file:\r\n\r\n1. Create **stackoverflow.crt.pem**:\r\n\r\n        -----BEGIN CERTIFICATE-----\r\n        MIIHHjCCBgagAwIBAgIQDhG71w1UtxDQxvVAtrUspDANBgkqhkiG9w0BAQsFADBw\r\n        MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\r\n        d3cuZGlnaWNlcnQuY29tMS8wLQYDVQQDEyZEaWdpQ2VydCBTSEEyIEhpZ2ggQXNz\r\n        dXJhbmNlIFNlcnZlciBDQTAeFw0xNjA1MjEwMDAwMDBaFw0xOTA4MTQxMjAwMDBa\r\n        MGoxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJOWTERMA8GA1UEBxMITmV3IFlvcmsx\r\n        HTAbBgNVBAoTFFN0YWNrIEV4Y2hhbmdlLCBJbmMuMRwwGgYDVQQDDBMqLnN0YWNr\r\n        ZXhjaGFuZ2UuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAr0YD\r\n        zscT5i6T2FaRsTGNCiLB8OtPXu8N9iAyuaROh/nS0kRRsN8wUMk1TmgZhPuYM6oF\r\n        S377V8W2LqhLBMrPXi7lnhvKt2DFWCyw38RrDbEsM5dzVGErmhux3F0QqcTI92zj\r\n        VW61DmE7NSQLiR4yonVpTpdAaO4jSPJxn8d+4p1sIlU2JGSk8LZSWFqaROc7KtXt\r\n        lWP4HahNRZtdwvL5dIEGGNWx+7B+XVAfY1ygc/UisldkA+a3D2+3WAtXgFZRZZ/1\r\n        CWFjKWJNMAI6ZBAtlbgSNgRYxdcdleIhPLCzkzWysfltfiBmsmgz6VCoFR4KgJo8\r\n        Gd3MeTWojBthM10SLwIDAQABo4IDuDCCA7QwHwYDVR0jBBgwFoAUUWj/kK8CB3U8\r\n        zNllZGKiErhZcjswHQYDVR0OBBYEFFrBQmPCYhOznZSEqjIeF8tto4Z7MIIB6AYD\r\n        VR0RBIIB3zCCAduCEyouc3RhY2tleGNoYW5nZS5jb22CEXN0YWNrb3ZlcmZsb3cu\r\n        Y29tghMqLnN0YWNrb3ZlcmZsb3cuY29tgg1zdGFja2F1dGguY29tggtzc3RhdGlj\r\n        Lm5ldIINKi5zc3RhdGljLm5ldIIPc2VydmVyZmF1bHQuY29tghEqLnNlcnZlcmZh\r\n        dWx0LmNvbYINc3VwZXJ1c2VyLmNvbYIPKi5zdXBlcnVzZXIuY29tgg1zdGFja2Fw\r\n        cHMuY29tghRvcGVuaWQuc3RhY2thdXRoLmNvbYIRc3RhY2tleGNoYW5nZS5jb22C\r\n        GCoubWV0YS5zdGFja2V4Y2hhbmdlLmNvbYIWbWV0YS5zdGFja2V4Y2hhbmdlLmNv\r\n        bYIQbWF0aG92ZXJmbG93Lm5ldIISKi5tYXRob3ZlcmZsb3cubmV0gg1hc2t1YnVu\r\n        dHUuY29tgg8qLmFza3VidW50dS5jb22CEXN0YWNrc25pcHBldHMubmV0ghIqLmJs\r\n        b2dvdmVyZmxvdy5jb22CEGJsb2dvdmVyZmxvdy5jb22CGCoubWV0YS5zdGFja292\r\n        ZXJmbG93LmNvbYIVKi5zdGFja292ZXJmbG93LmVtYWlsghNzdGFja292ZXJmbG93\r\n        LmVtYWlsMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYB\r\n        BQUHAwIwdQYDVR0fBG4wbDA0oDKgMIYuaHR0cDovL2NybDMuZGlnaWNlcnQuY29t\r\n        L3NoYTItaGEtc2VydmVyLWc1LmNybDA0oDKgMIYuaHR0cDovL2NybDQuZGlnaWNl\r\n        cnQuY29tL3NoYTItaGEtc2VydmVyLWc1LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG\r\n        /WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BT\r\n        MAgGBmeBDAECAjCBgwYIKwYBBQUHAQEEdzB1MCQGCCsGAQUFBzABhhhodHRwOi8v\r\n        b2NzcC5kaWdpY2VydC5jb20wTQYIKwYBBQUHMAKGQWh0dHA6Ly9jYWNlcnRzLmRp\r\n        Z2ljZXJ0LmNvbS9EaWdpQ2VydFNIQTJIaWdoQXNzdXJhbmNlU2VydmVyQ0EuY3J0\r\n        MAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAAzJAMGSdKoX1frdqNlN\r\n        iXu8Gcbsm/DxWMXpcTXlZn8s+/qQQoc+/3o0CK3C8/j9n5DmsYa88P6Ntt5ysDs+\r\n        b0ynXFva4CAEyKaoPM4SIpOjwfWBRSUOqAIkQO2/LhKBwT/EnpaIHIKGnI0UdXLQ\r\n        oDfkMDg6mgJsEBsKdKF5EfEX7iU3NO5xVJPJE8/R0btLAdYwxB9S6fSpCXGe2HqQ\r\n        D101O/7/4MWNdFSbfdDSFcn5oEm+idimrqiNrF5knmuJy4qPBkL7thNuGK6rvYCF\r\n        ZJM03ZEZhkQmn2jG/7LgjfwZmvfcITeADCpylf88bL+lf+vxe6cCl9CyqWgBDpsI\r\n        xpE=\r\n        -----END CERTIFICATE-----\r\n\r\n\r\n1. Create **X509.java**:\r\n\r\n        import javax.xml.bind.DatatypeConverter;\r\n        import java.io.FileInputStream;\r\n        import java.io.FileNotFoundException;\r\n        import java.security.MessageDigest;\r\n        import java.security.NoSuchAlgorithmException;\r\n        import java.security.cert.CertificateEncodingException;\r\n        import java.security.cert.CertificateException;\r\n        import java.security.cert.CertificateFactory;\r\n        import java.security.cert.X509Certificate;\r\n    \r\n        public final class X509 {\r\n            public static void main(String[] args)\r\n                    throws FileNotFoundException, CertificateException, NoSuchAlgorithmException {\r\n                FileInputStream is = new FileInputStream(args[0]);\r\n                CertificateFactory certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n                X509Certificate cert = (X509Certificate) certificateFactory.generateCertificate(is);\r\n                String thumbprint = getThumbprint(cert);\r\n                System.out.println(thumbprint);\r\n            }\r\n    \r\n            private static String getThumbprint(X509Certificate cert)\r\n                    throws NoSuchAlgorithmException, CertificateEncodingException {\r\n                MessageDigest md = MessageDigest.getInstance(&quot;SHA-1&quot;);\r\n                byte[] der = cert.getEncoded();\r\n                md.update(der);\r\n                byte[] digest = md.digest();\r\n                String digestHex = DatatypeConverter.printHexBinary(digest);\r\n                return digestHex.toLowerCase();\r\n            }\r\n        }\r\n\r\n1. Compile the program with Java 8:\r\n\r\n        javac X509.java\r\n\r\n   Or Java 9 - due to modular JDK/JPMS - **DataTypeConverter** is not in **java.base**, but **java.xml.bind**, so you need to explicitly depend on it during your build:\r\n\r\n        javac --add-modules java.xml.bind X509.java\r\n\r\n   Otherwise, on Java 9, you get this when you try to build it:\r\n\r\n        X509.java:3: error: package javax.xml.bind is not visible\r\n                import javax.xml.bind.DatatypeConverter;\r\n                ^\r\n                (package javax.xml.bind is declared in module java.xml.bind, which is not in the module graph)\r\n                1 error\r\n\r\n1. Run it with Java 8:\r\n\r\n        java X509 stackoverflow.crt.pem\r\n\r\n   In Java 9 - due to modular JDK/JPMS - **DataTypeConverter** is not in **java.base**, but **java.xml.bind**, so you need to explicitly depend on it when running your program:\r\n\r\n        java --add-modules java.xml.bind X509 stackoverflow.crt.pem\r\n\r\n   Otherwise, on Java 9, you get this when you try to run it:\r\n\r\n        Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\r\n            at X509.getThumbPrint(X509.java:29)\r\n            at X509.main(X509.java:19)\r\n            Caused by: java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter\r\n            at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)\r\n            at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:185)\r\n            at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)\r\n            ... 2 more\r\n\r\n1. Get the expected output:\r\n\r\n        47adb03649a2eb18f63ffa29790818349a99cab7\r\n\r\n  [1]: https://en.wikipedia.org/wiki/X.690#DER_encoding","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>The SHA-1 hash of the <a href=\"https://en.wikipedia.org/wiki/X.690#DER_encoding\" rel=\"noreferrer\">DER encoding</a> of the certificate is what .NET is getting with <strong>X509Certificate2.Thumbprint</strong>.</p>\n\n<p>As noted on the <a href=\"https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx#Remarks\" rel=\"noreferrer\">remarks on MSDN</a>:</p>\n\n<blockquote>\n  <p>The thumbprint is dynamically generated using the SHA1 algorithm and does not physically exist in the certificate. Since the thumbprint is a unique value for the certificate, it is commonly used to find a particular certificate in a certificate store.</p>\n</blockquote>\n\n<p>Java's standard library doesn't provide the thumbprint directly, but you can get it like this:</p>\n\n<pre><code>DatatypeConverter.printHexBinary(\n        MessageDigest.getInstance(\"SHA-1\").digest(\n                cert.getEncoded())).toLowerCase();\n</code></pre>\n\n<p>Here's a full worked example using a conveniently accessible PEM file:</p>\n\n<ol>\n<li><p>Create <strong>stackoverflow.crt.pem</strong>:</p>\n\n<pre><code>-----BEGIN CERTIFICATE-----\nMIIHHjCCBgagAwIBAgIQDhG71w1UtxDQxvVAtrUspDANBgkqhkiG9w0BAQsFADBw\nMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\nd3cuZGlnaWNlcnQuY29tMS8wLQYDVQQDEyZEaWdpQ2VydCBTSEEyIEhpZ2ggQXNz\ndXJhbmNlIFNlcnZlciBDQTAeFw0xNjA1MjEwMDAwMDBaFw0xOTA4MTQxMjAwMDBa\nMGoxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJOWTERMA8GA1UEBxMITmV3IFlvcmsx\nHTAbBgNVBAoTFFN0YWNrIEV4Y2hhbmdlLCBJbmMuMRwwGgYDVQQDDBMqLnN0YWNr\nZXhjaGFuZ2UuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAr0YD\nzscT5i6T2FaRsTGNCiLB8OtPXu8N9iAyuaROh/nS0kRRsN8wUMk1TmgZhPuYM6oF\nS377V8W2LqhLBMrPXi7lnhvKt2DFWCyw38RrDbEsM5dzVGErmhux3F0QqcTI92zj\nVW61DmE7NSQLiR4yonVpTpdAaO4jSPJxn8d+4p1sIlU2JGSk8LZSWFqaROc7KtXt\nlWP4HahNRZtdwvL5dIEGGNWx+7B+XVAfY1ygc/UisldkA+a3D2+3WAtXgFZRZZ/1\nCWFjKWJNMAI6ZBAtlbgSNgRYxdcdleIhPLCzkzWysfltfiBmsmgz6VCoFR4KgJo8\nGd3MeTWojBthM10SLwIDAQABo4IDuDCCA7QwHwYDVR0jBBgwFoAUUWj/kK8CB3U8\nzNllZGKiErhZcjswHQYDVR0OBBYEFFrBQmPCYhOznZSEqjIeF8tto4Z7MIIB6AYD\nVR0RBIIB3zCCAduCEyouc3RhY2tleGNoYW5nZS5jb22CEXN0YWNrb3ZlcmZsb3cu\nY29tghMqLnN0YWNrb3ZlcmZsb3cuY29tgg1zdGFja2F1dGguY29tggtzc3RhdGlj\nLm5ldIINKi5zc3RhdGljLm5ldIIPc2VydmVyZmF1bHQuY29tghEqLnNlcnZlcmZh\ndWx0LmNvbYINc3VwZXJ1c2VyLmNvbYIPKi5zdXBlcnVzZXIuY29tgg1zdGFja2Fw\ncHMuY29tghRvcGVuaWQuc3RhY2thdXRoLmNvbYIRc3RhY2tleGNoYW5nZS5jb22C\nGCoubWV0YS5zdGFja2V4Y2hhbmdlLmNvbYIWbWV0YS5zdGFja2V4Y2hhbmdlLmNv\nbYIQbWF0aG92ZXJmbG93Lm5ldIISKi5tYXRob3ZlcmZsb3cubmV0gg1hc2t1YnVu\ndHUuY29tgg8qLmFza3VidW50dS5jb22CEXN0YWNrc25pcHBldHMubmV0ghIqLmJs\nb2dvdmVyZmxvdy5jb22CEGJsb2dvdmVyZmxvdy5jb22CGCoubWV0YS5zdGFja292\nZXJmbG93LmNvbYIVKi5zdGFja292ZXJmbG93LmVtYWlsghNzdGFja292ZXJmbG93\nLmVtYWlsMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYB\nBQUHAwIwdQYDVR0fBG4wbDA0oDKgMIYuaHR0cDovL2NybDMuZGlnaWNlcnQuY29t\nL3NoYTItaGEtc2VydmVyLWc1LmNybDA0oDKgMIYuaHR0cDovL2NybDQuZGlnaWNl\ncnQuY29tL3NoYTItaGEtc2VydmVyLWc1LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG\n/WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BT\nMAgGBmeBDAECAjCBgwYIKwYBBQUHAQEEdzB1MCQGCCsGAQUFBzABhhhodHRwOi8v\nb2NzcC5kaWdpY2VydC5jb20wTQYIKwYBBQUHMAKGQWh0dHA6Ly9jYWNlcnRzLmRp\nZ2ljZXJ0LmNvbS9EaWdpQ2VydFNIQTJIaWdoQXNzdXJhbmNlU2VydmVyQ0EuY3J0\nMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAAzJAMGSdKoX1frdqNlN\niXu8Gcbsm/DxWMXpcTXlZn8s+/qQQoc+/3o0CK3C8/j9n5DmsYa88P6Ntt5ysDs+\nb0ynXFva4CAEyKaoPM4SIpOjwfWBRSUOqAIkQO2/LhKBwT/EnpaIHIKGnI0UdXLQ\noDfkMDg6mgJsEBsKdKF5EfEX7iU3NO5xVJPJE8/R0btLAdYwxB9S6fSpCXGe2HqQ\nD101O/7/4MWNdFSbfdDSFcn5oEm+idimrqiNrF5knmuJy4qPBkL7thNuGK6rvYCF\nZJM03ZEZhkQmn2jG/7LgjfwZmvfcITeADCpylf88bL+lf+vxe6cCl9CyqWgBDpsI\nxpE=\n-----END CERTIFICATE-----\n</code></pre></li>\n<li><p>Create <strong>X509.java</strong>:</p>\n\n<pre><code>import javax.xml.bind.DatatypeConverter;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.CertificateEncodingException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\n\npublic final class X509 {\n    public static void main(String[] args)\n            throws FileNotFoundException, CertificateException, NoSuchAlgorithmException {\n        FileInputStream is = new FileInputStream(args[0]);\n        CertificateFactory certificateFactory = CertificateFactory.getInstance(\"X.509\");\n        X509Certificate cert = (X509Certificate) certificateFactory.generateCertificate(is);\n        String thumbprint = getThumbprint(cert);\n        System.out.println(thumbprint);\n    }\n\n    private static String getThumbprint(X509Certificate cert)\n            throws NoSuchAlgorithmException, CertificateEncodingException {\n        MessageDigest md = MessageDigest.getInstance(\"SHA-1\");\n        byte[] der = cert.getEncoded();\n        md.update(der);\n        byte[] digest = md.digest();\n        String digestHex = DatatypeConverter.printHexBinary(digest);\n        return digestHex.toLowerCase();\n    }\n}\n</code></pre></li>\n<li><p>Compile the program with Java 8:</p>\n\n<pre><code>javac X509.java\n</code></pre>\n\n<p>Or Java 9 - due to modular JDK/JPMS - <strong>DataTypeConverter</strong> is not in <strong>java.base</strong>, but <strong>java.xml.bind</strong>, so you need to explicitly depend on it during your build:</p>\n\n<pre><code>javac --add-modules java.xml.bind X509.java\n</code></pre>\n\n<p>Otherwise, on Java 9, you get this when you try to build it:</p>\n\n<pre><code>X509.java:3: error: package javax.xml.bind is not visible\n        import javax.xml.bind.DatatypeConverter;\n        ^\n        (package javax.xml.bind is declared in module java.xml.bind, which is not in the module graph)\n        1 error\n</code></pre></li>\n<li><p>Run it with Java 8:</p>\n\n<pre><code>java X509 stackoverflow.crt.pem\n</code></pre>\n\n<p>In Java 9 - due to modular JDK/JPMS - <strong>DataTypeConverter</strong> is not in <strong>java.base</strong>, but <strong>java.xml.bind</strong>, so you need to explicitly depend on it when running your program:</p>\n\n<pre><code>java --add-modules java.xml.bind X509 stackoverflow.crt.pem\n</code></pre>\n\n<p>Otherwise, on Java 9, you get this when you try to run it:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\n    at X509.getThumbPrint(X509.java:29)\n    at X509.main(X509.java:19)\n    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:185)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)\n    ... 2 more\n</code></pre></li>\n<li><p>Get the expected output:</p>\n\n<pre><code>47adb03649a2eb18f63ffa29790818349a99cab7\n</code></pre></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":36036,"reputation":5314,"user_id":102483,"accept_rate":100,"display_name":"Hiro2k"},"score":5,"creation_date":1374592644,"post_id":2545730,"comment_id":25994524,"body_markdown":"How does that help with Java?","body":"How does that help with Java?"}],"tags":[],"owner":{"account_id":603447,"reputation":53,"user_id":305159,"display_name":"Clarence "},"comment_count":1,"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1460246825,"creation_date":1269957305,"answer_id":2545730,"question_id":1270703,"body_markdown":"You can generate the thumbprint by using the openssl command, so example if you have the pem format of the certificate in a file (file.txt)\r\n\r\nthen:\r\n\r\n`cat file.txt | openssl x509 -sha1 -fingerprint` - this would generate the same thumbprint","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>You can generate the thumbprint by using the openssl command, so example if you have the pem format of the certificate in a file (file.txt)</p>\n\n<p>then:</p>\n\n<p><code>cat file.txt | openssl x509 -sha1 -fingerprint</code> - this would generate the same thumbprint</p>\n"},{"tags":[],"owner":{"account_id":109369,"reputation":3006,"user_id":289827,"accept_rate":47,"display_name":"Martin Å½dila"},"comment_count":0,"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1374592346,"creation_date":1374592346,"answer_id":17814152,"question_id":1270703,"body_markdown":"Using Apache Commons Codec you can do:\r\n\r\n    DigestUtils.sha1Hex(cert.getEncoded())\r\n\r\n","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>Using Apache Commons Codec you can do:</p>\n\n<pre><code>DigestUtils.sha1Hex(cert.getEncoded())\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1158421,"reputation":401,"user_id":1138438,"display_name":"Andreas Haufler"},"score":1,"creation_date":1514453723,"post_id":47939494,"comment_id":82978042,"body_markdown":"For completeness - commonly SHA-1 (`Hashing.sha1()`) is used as thumbprint (as seen in the other answers).","body":"For completeness - commonly SHA-1 (<code>Hashing.sha1()</code>) is used as thumbprint (as seen in the other answers)."},{"owner":{"account_id":1459946,"reputation":2384,"user_id":1374532,"accept_rate":67,"display_name":"Nagaraj Alagusundaram"},"score":0,"creation_date":1603329316,"post_id":47939494,"comment_id":114005580,"body_markdown":"sha1 is deprecated in Guava","body":"sha1 is deprecated in Guava"}],"tags":[],"owner":{"account_id":2271010,"reputation":12268,"user_id":1998422,"accept_rate":60,"display_name":"Ahmad Abdelghany"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1603379076,"creation_date":1513936812,"answer_id":47939494,"question_id":1270703,"body_markdown":"One-liner using Google&#39;s [Guava][1]\r\n\r\n    Hashing.sha256().hashBytes(cert.getEncoded()).toString();\r\n\r\n  [1]: https://github.com/google/guava","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>One-liner using Google's <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a></p>\n<pre><code>Hashing.sha256().hashBytes(cert.getEncoded()).toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5714780,"reputation":5395,"user_id":4515438,"accept_rate":0,"display_name":"Vahe Gharibyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579952047,"creation_date":1579952047,"answer_id":59908805,"question_id":1270703,"body_markdown":"Short example without using any libraries.\r\n\r\n\r\n    object MessageDigestUtil {\r\n    \r\n        private val hexCode = &quot;0123456789ABCDEF&quot;.toCharArray()\r\n    \r\n        fun sha1(input: ByteArray): ByteArray {\r\n            return digest(input,&quot;SHA-1&quot;)\r\n        }\r\n    \r\n        @Throws(NoSuchAlgorithmException::class)\r\n        fun getFingerprint(publicKey: PublicKey): String? {\r\n            return printHexBinary(sha1(publicKey.encoded))\r\n        }\r\n    \r\n        private fun printHexBinary(data: ByteArray): String {\r\n            val r = StringBuilder(data.size * 2)\r\n            for (b in data) {\r\n                r.append(hexCode[b.toInt() shr 4 and 0xF])\r\n                r.append(hexCode[(b and 0xF).toInt()])\r\n            }\r\n            return r.toString()\r\n        }\r\n    \r\n        @Throws(NoSuchAlgorithmException::class)\r\n        private fun digest(input: ByteArray, algorithm: String): ByteArray {\r\n            val digest = MessageDigest.getInstance(algorithm)\r\n            digest.update(input)\r\n            return digest.digest()\r\n        }\r\n    }","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>Short example without using any libraries.</p>\n\n<pre><code>object MessageDigestUtil {\n\n    private val hexCode = \"0123456789ABCDEF\".toCharArray()\n\n    fun sha1(input: ByteArray): ByteArray {\n        return digest(input,\"SHA-1\")\n    }\n\n    @Throws(NoSuchAlgorithmException::class)\n    fun getFingerprint(publicKey: PublicKey): String? {\n        return printHexBinary(sha1(publicKey.encoded))\n    }\n\n    private fun printHexBinary(data: ByteArray): String {\n        val r = StringBuilder(data.size * 2)\n        for (b in data) {\n            r.append(hexCode[b.toInt() shr 4 and 0xF])\n            r.append(hexCode[(b and 0xF).toInt()])\n        }\n        return r.toString()\n    }\n\n    @Throws(NoSuchAlgorithmException::class)\n    private fun digest(input: ByteArray, algorithm: String): ByteArray {\n        val digest = MessageDigest.getInstance(algorithm)\n        digest.update(input)\n        return digest.digest()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14035506,"reputation":81,"user_id":10138318,"display_name":"teejar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037470,"creation_date":1700036655,"answer_id":77486159,"question_id":1270703,"body_markdown":"If you stumbled to this thread while having problems how to generate the correct thumbprint for MSGraph API which is base64 encoded [as stated in this document.][1]\r\n\r\nThis will generate correct x5t header parameter. \r\n\r\n    import java.io.FileInputStream;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.cert.CertificateEncodingException;\r\n    import java.security.cert.X509Certificate;\r\n    import java.security.cert.CertificateFactory;\r\n    import java.util.Base64;\r\n    \r\n    X509Certificate cert = getPublicKey();\r\n    \r\n    String thumbprint = getThumbprint(cert); // base64 encoded thumbprint\r\n        \r\n    X509Certificate getPublicKey() {\r\n        try (FileInputStream inStream = new FileInputStream(&quot;{your .crt or .cer file here}&quot;)) {\r\n\r\n            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n            X509Certificate cert = (X509Certificate) cf.generateCertificate(inStream);\r\n\r\n            return cert;\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;no file!&quot;);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    String getThumbprint(X509Certificate cert) {\r\n        try {\r\n            return Base64.getEncoder().encodeToString(getHash(cert));\r\n        } catch (Exception e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static byte[] getHash(X509Certificate cert) throws NoSuchAlgorithmException, CertificateEncodingException {\r\n        final MessageDigest md = MessageDigest.getInstance(&quot;SHA-1&quot;);\r\n        md.update(cert.getEncoded());\r\n        return md.digest();\r\n    }\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/entra/identity-platform/certificate-credentials","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>If you stumbled to this thread while having problems how to generate the correct thumbprint for MSGraph API which is base64 encoded <a href=\"https://learn.microsoft.com/en-us/entra/identity-platform/certificate-credentials\" rel=\"nofollow noreferrer\">as stated in this document.</a></p>\n<p>This will generate correct x5t header parameter.</p>\n<pre><code>import java.io.FileInputStream;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.CertificateEncodingException;\nimport java.security.cert.X509Certificate;\nimport java.security.cert.CertificateFactory;\nimport java.util.Base64;\n\nX509Certificate cert = getPublicKey();\n\nString thumbprint = getThumbprint(cert); // base64 encoded thumbprint\n    \nX509Certificate getPublicKey() {\n    try (FileInputStream inStream = new FileInputStream(&quot;{your .crt or .cer file here}&quot;)) {\n\n        CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n        X509Certificate cert = (X509Certificate) cf.generateCertificate(inStream);\n\n        return cert;\n    } catch (Exception e) {\n        System.out.println(&quot;no file!&quot;);\n        return null;\n    }\n}\n\nString getThumbprint(X509Certificate cert) {\n    try {\n        return Base64.getEncoder().encodeToString(getHash(cert));\n    } catch (Exception e) {\n        return null;\n    }\n}\n\nstatic byte[] getHash(X509Certificate cert) throws NoSuchAlgorithmException, CertificateEncodingException {\n    final MessageDigest md = MessageDigest.getInstance(&quot;SHA-1&quot;);\n    md.update(cert.getEncoded());\n    return md.digest();\n}\n</code></pre>\n"}],"owner":{"account_id":38055,"reputation":1294,"user_id":109012,"display_name":"Matt Z"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65851,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"accepted_answer_id":1271148,"answer_count":6,"score":47,"last_activity_date":1700037470,"creation_date":1250150982,"question_id":1270703,"body_markdown":"I have a java client that is calling a web service operation which takes a certificate &quot;thumbprint&quot; as a parameter. I believe the thumbprint is some kind of SHA1 hash, in hexadecimal string format, of the cert&#39;s public key, but I&#39;m not sure.\r\n\r\nThe .NET framework seems to include a simple way to get this value ([X509Certificate2.Thumbprint][1] property). Viewing a .cer file&#39;s properties in Windows also displays the thumbprint, which looks like:\r\n\r\n    a6 9c fd b0 58 0d a4 ee ae 9a 47 75 24 c3 0b 9f 5d b6 1c 77\r\n\r\nMy question is therefore: Does anybody know how to retrieve or compute this thumbprint string within Java, if I have an instance of a [java.security.cert.X509Certificate][2]?\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/javax/security/cert/X509Certificate.html","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>I have a java client that is calling a web service operation which takes a certificate \"thumbprint\" as a parameter. I believe the thumbprint is some kind of SHA1 hash, in hexadecimal string format, of the cert's public key, but I'm not sure.</p>\n\n<p>The .NET framework seems to include a simple way to get this value (<a href=\"http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx\" rel=\"noreferrer\">X509Certificate2.Thumbprint</a> property). Viewing a .cer file's properties in Windows also displays the thumbprint, which looks like:</p>\n\n<pre><code>a6 9c fd b0 58 0d a4 ee ae 9a 47 75 24 c3 0b 9f 5d b6 1c 77\n</code></pre>\n\n<p>My question is therefore: Does anybody know how to retrieve or compute this thumbprint string within Java, if I have an instance of a <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/security/cert/X509Certificate.html\" rel=\"noreferrer\">java.security.cert.X509Certificate</a>?</p>\n"},{"tags":["java","arrays","sorting","collections"],"answers":[{"comments":[{"owner":{"account_id":1083888,"reputation":10344,"user_id":1080093,"accept_rate":92,"display_name":"Nav"},"score":2,"creation_date":1328619591,"post_id":9176670,"comment_id":11544509,"body_markdown":"That&#39;s what I didn&#39;t get. Its like a riddle to me. can u please explain what you mean by default ordering","body":"That&#39;s what I didn&#39;t get. Its like a riddle to me. can u please explain what you mean by default ordering"},{"owner":{"account_id":1083888,"reputation":10344,"user_id":1080093,"accept_rate":92,"display_name":"Nav"},"score":0,"creation_date":1328620653,"post_id":9176670,"comment_id":11544856,"body_markdown":"lol i know but as i said didn&#39;t quite understood it when u said natural cause the meaning is ambiguous to understand for me :(","body":"lol i know but as i said didn&#39;t quite understood it when u said natural cause the meaning is ambiguous to understand for me :("},{"owner":{"account_id":109303,"reputation":3464,"user_id":289684,"display_name":"Ha."},"score":0,"creation_date":1328630494,"post_id":9176670,"comment_id":11548648,"body_markdown":"When you define object, you can choose ordering which will be used when no other ordering is provided. So one usually implements ordering that is used most often in practice.","body":"When you define object, you can choose ordering which will be used when no other ordering is provided. So one usually implements ordering that is used most often in practice."},{"owner":{"account_id":3355555,"reputation":2794,"user_id":2818583,"display_name":"AnV"},"score":0,"creation_date":1481122598,"post_id":9176670,"comment_id":69248303,"body_markdown":"@Ha.  But what is **total ordering** ?","body":"@Ha.  But what is <b>total ordering</b> ?"},{"owner":{"account_id":2844395,"reputation":800,"user_id":2443208,"accept_rate":29,"display_name":"krohit"},"score":0,"creation_date":1493888840,"post_id":9176670,"comment_id":74597457,"body_markdown":"@AnV - Suppose you have a class &#39;Student&#39; then ordering the Student Collection based on multiple/different elements of class &#39;Student&#39; is called total ordering.","body":"@AnV - Suppose you have a class &#39;Student&#39; then ordering the Student Collection based on multiple/different elements of class &#39;Student&#39; is called total ordering."}],"tags":[],"owner":{"account_id":109303,"reputation":3464,"user_id":289684,"display_name":"Ha."},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1328619492,"creation_date":1328619492,"answer_id":9176670,"question_id":9176643,"body_markdown":"Natural ordering is a default total ordering. This is the only difference between the two.","title":"difference between natural ordering and total ordering","body":"<p>Natural ordering is a default total ordering. This is the only difference between the two.</p>\n"},{"comments":[{"owner":{"account_id":3355555,"reputation":2794,"user_id":2818583,"display_name":"AnV"},"score":2,"creation_date":1481106506,"post_id":9176776,"comment_id":69237254,"body_markdown":"What exactly do you mean by **all values can be compared to all other values.**  Can you elaborate more on this?","body":"What exactly do you mean by <b>all values can be compared to all other values.</b>  Can you elaborate more on this?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1481107393,"post_id":9176776,"comment_id":69237867,"body_markdown":"@AbhinavVutukuri in the collection you can say some are comparable and others are not. All values have to be comparable to every other value.","body":"@AbhinavVutukuri in the collection you can say some are comparable and others are not. All values have to be comparable to every other value."},{"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"score":1,"creation_date":1626132533,"post_id":9176776,"comment_id":120806391,"body_markdown":"@PeterLawrey How does `z` come before `a` when ordering Strings?  Can you confirm that is accurate? https://gist.github.com/kmb385demo/d580f0c47b359eba9b41b6e35293d2ce","body":"@PeterLawrey How does <code>z</code> come before <code>a</code> when ordering Strings?  Can you confirm that is accurate? <a href=\"https://gist.github.com/kmb385demo/d580f0c47b359eba9b41b6e35293d2ce\" rel=\"nofollow noreferrer\">gist.github.com/kmb385demo/d580f0c47b359eba9b41b6e35293d2ce</a>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1626248312,"post_id":9176776,"comment_id":120838919,"body_markdown":"@KevinBowersox Case matters in Java. Upper case Z is before lower case a. https://ideone.com/fXjyo8","body":"@KevinBowersox Case matters in Java. Upper case Z is before lower case a. <a href=\"https://ideone.com/fXjyo8\" rel=\"nofollow noreferrer\">ideone.com/fXjyo8</a>"},{"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"score":3,"creation_date":1626252676,"post_id":9176776,"comment_id":120840600,"body_markdown":"@PeterLawrey Time for me to turn up the monitor resolution (the new line doesn&#39;t help either).  I thought that was a lowercase `z` as you can see from my example.  Thanks for pointing that out, you had me questioning everything I ever learned!  I made a quick edit for aging developers with waning eye sight.","body":"@PeterLawrey Time for me to turn up the monitor resolution (the new line doesn&#39;t help either).  I thought that was a lowercase <code>z</code> as you can see from my example.  Thanks for pointing that out, you had me questioning everything I ever learned!  I made a quick edit for aging developers with waning eye sight."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":5,"down_vote_count":1,"up_vote_count":36,"is_accepted":true,"score":35,"last_activity_date":1626252857,"creation_date":1328619949,"answer_id":9176776,"question_id":9176643,"body_markdown":"Total ordering means all values can be compared to all other values.  For example, if you have a collection of `BigDecimal` and `String` there is no natural total order (but you could invent one)\r\n\r\nIn Java, the Natural order is defined as the ordering provided by the JVM.  This might not match what a people might believe is the natural order. e.g. Strings are sorted ASCIIbetically. Meaning an uppercase `Z` comes before a lowercase `a` and `10` is before `2`\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html\r\n\r\n&gt; This interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class&#39;s natural ordering, and the class&#39;s compareTo method is referred to as its natural comparison method.\r\n","title":"difference between natural ordering and total ordering","body":"<p>Total ordering means all values can be compared to all other values.  For example, if you have a collection of <code>BigDecimal</code> and <code>String</code> there is no natural total order (but you could invent one)</p>\n<p>In Java, the Natural order is defined as the ordering provided by the JVM.  This might not match what a people might believe is the natural order. e.g. Strings are sorted ASCIIbetically. Meaning an uppercase <code>Z</code> comes before a lowercase <code>a</code> and <code>10</code> is before <code>2</code></p>\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html</a></p>\n<blockquote>\n<p>This interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class's natural ordering, and the class's compareTo method is referred to as its natural comparison method.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1328620455,"creation_date":1328620455,"answer_id":9176883,"question_id":9176643,"body_markdown":"[Total ordering][1] is a general mathematical concept. It differs mainly from partial ordering in that for each *a* and *b* in set *X*, either &quot;*a &lt;= b*&quot; or &quot;*b &lt;= a*&quot; are meaningful and true. As far as Java is concerned, this means that of two `Comparable` instances, one must be greater or equal than the other (i.e. it makes sense to compare them).\r\n\r\n\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Total_order","title":"difference between natural ordering and total ordering","body":"<p><a href=\"http://en.wikipedia.org/wiki/Total_order\" rel=\"noreferrer\">Total ordering</a> is a general mathematical concept. It differs mainly from partial ordering in that for each <em>a</em> and <em>b</em> in set <em>X</em>, either \"<em>a &lt;= b</em>\" or \"<em>b &lt;= a</em>\" are meaningful and true. As far as Java is concerned, this means that of two <code>Comparable</code> instances, one must be greater or equal than the other (i.e. it makes sense to compare them).</p>\n"},{"tags":[],"owner":{"account_id":324083,"reputation":2451,"user_id":644467,"accept_rate":68,"display_name":"Java"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1328620748,"creation_date":1328620748,"answer_id":9176956,"question_id":9176643,"body_markdown":"Natural Order\r\n\r\nIt depends on our collections that we use, for example, say, we have characters object, then natural order is their unicode values, for numbers natural order is as usual, ascending order\r\n\r\nComparable Interface-\r\nThis interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class&#39;s natural ordering, and the class&#39;s compareTo method is referred to as its natural comparison method.\r\n\r\nLists (and arrays) of objects that implement this interface can be sorted automatically by Collections.sort (and Arrays.sort). Objects that implement this interface can be used as keys in a sorted map or elements in a sorted set, without the need to specify a comparator.\r\n\r\n\r\n\r\n    public interface Comparable&lt;T&gt; {\r\n    \r\n    \t/**\r\n    \t * Compares this object with the specified object for order.  Returns a\r\n    \t * negative integer, zero, or a positive integer as this object is less\r\n    \t * than, equal to, or greater than the specified object.\r\n    \t */\r\n    \tpublic int compareTo(T o);\r\n    }\r\n\r\n\r\nComparator Interface:\r\n\r\nThis interface Represents an order relation, which may be used to sort a list or maintain order in a sorted set or map. Can override a type&#39;s natural ordering, or order objects of a type that does not implement the Comparable interface.\r\n\r\nA comparison function, which imposes a total ordering on &quot;some collection of objects&quot;.\r\nComparators can be passed to a sort method (such as Collections.sort) to allow precise control over the sort order. Comparators can also be used to control the order of certain data structures (such as TreeSet or TreeMap). \t\t\t\t\t\t\t\t\r\n\t\r\n\r\n    \tpublic interface Comparator&lt;T&gt; {\r\n    \t/**\r\n    \t * Compares its two arguments for order.  Returns a negative integer,\r\n    \t * zero, or a positive integer as the first argument is less than, equal\r\n    \t * to, or greater than the second.\r\n    \t */\r\n    \tint compare(T o1, T o2);\r\n    \t\r\n    \tboolean equals(Object obj);\r\n    }\r\n\r\n\tHope This helps you.\t\t\t\t\t","title":"difference between natural ordering and total ordering","body":"<p>Natural Order</p>\n\n<p>It depends on our collections that we use, for example, say, we have characters object, then natural order is their unicode values, for numbers natural order is as usual, ascending order</p>\n\n<p>Comparable Interface-\nThis interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class's natural ordering, and the class's compareTo method is referred to as its natural comparison method.</p>\n\n<p>Lists (and arrays) of objects that implement this interface can be sorted automatically by Collections.sort (and Arrays.sort). Objects that implement this interface can be used as keys in a sorted map or elements in a sorted set, without the need to specify a comparator.</p>\n\n<pre><code>public interface Comparable&lt;T&gt; {\n\n    /**\n     * Compares this object with the specified object for order.  Returns a\n     * negative integer, zero, or a positive integer as this object is less\n     * than, equal to, or greater than the specified object.\n     */\n    public int compareTo(T o);\n}\n</code></pre>\n\n<p>Comparator Interface:</p>\n\n<p>This interface Represents an order relation, which may be used to sort a list or maintain order in a sorted set or map. Can override a type's natural ordering, or order objects of a type that does not implement the Comparable interface.</p>\n\n<p>A comparison function, which imposes a total ordering on \"some collection of objects\".\nComparators can be passed to a sort method (such as Collections.sort) to allow precise control over the sort order. Comparators can also be used to control the order of certain data structures (such as TreeSet or TreeMap).                              </p>\n\n<pre><code>    public interface Comparator&lt;T&gt; {\n    /**\n     * Compares its two arguments for order.  Returns a negative integer,\n     * zero, or a positive integer as the first argument is less than, equal\n     * to, or greater than the second.\n     */\n    int compare(T o1, T o2);\n\n    boolean equals(Object obj);\n}\n\nHope This helps you.                    \n</code></pre>\n"},{"comments":[{"owner":{"account_id":3355555,"reputation":2794,"user_id":2818583,"display_name":"AnV"},"score":1,"creation_date":1481106586,"post_id":11170373,"comment_id":69237308,"body_markdown":"What exactly do you mean by **all values can be compared to all other values.**  Can you elaborate more on this?","body":"What exactly do you mean by <b>all values can be compared to all other values.</b>  Can you elaborate more on this?"}],"tags":[],"owner":{"account_id":1594349,"reputation":1990,"user_id":1476921,"display_name":"chipiik"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1340505044,"creation_date":1340462512,"answer_id":11170373,"question_id":9176643,"body_markdown":"*Important point:* **natural** ordering should be **consistent with equals**!\r\n\r\n*Summary:* natural ordering is one kind of total ordering which is default (used the most often) for the given class and is consistent with equals. Total ordering is any ordering where all values can be compared to all other values.\r\n\r\n*e.g.* when you design new class then you can choose the natural ordering inside the class. Any other ordering can be then only the total one ;)","title":"difference between natural ordering and total ordering","body":"<p><em>Important point:</em> <strong>natural</strong> ordering should be <strong>consistent with equals</strong>!</p>\n\n<p><em>Summary:</em> natural ordering is one kind of total ordering which is default (used the most often) for the given class and is consistent with equals. Total ordering is any ordering where all values can be compared to all other values.</p>\n\n<p><em>e.g.</em> when you design new class then you can choose the natural ordering inside the class. Any other ordering can be then only the total one ;)</p>\n"},{"tags":[],"owner":{"account_id":2632038,"reputation":2080,"user_id":2277746,"display_name":"Andrea Dusza"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1511305959,"creation_date":1511305022,"answer_id":47424123,"question_id":9176643,"body_markdown":"To elaborate on @Bruno&#39;s answer: an example of a **partial ordering** is the **divisibility relation** between positive numbers. If you compare 5 and 15, you can say that 5 is a divisor of 15, and 15 is the multiple of 5. However, 3 and 5 are not comparable because 3 is neither the divisor nor the multiple of 5. \r\n\r\nAn example of **total ordering** is the **less than relation**, because if you take any two different numbers, one of them is less than the other. So any value is comparable with any other value.\r\n\r\nOn the concept of **natural ordering**: If the objects of a type have a really-really obvious way to be sorted, than it is the natural ordering. For example, the natural ordering of Strings is the alphabetical order, and the natural order of numbers is ascending order, because it is the first choice anybody would think of. However, sometimes you would want to order Strings in a different way, e.g. sorting by length from the 1-character ones to the longer ones. This is a possible total ordering on Strings, but not the natural one.\r\n\r\nNot all objects necessarily have a natural ordering. E.g. if you have Person objects, sorting them by height is a possible total ordering, but so is sorting them by age... None of these are more obvious than the other, this is why there is no natural ordering.","title":"difference between natural ordering and total ordering","body":"<p>To elaborate on @Bruno's answer: an example of a <strong>partial ordering</strong> is the <strong>divisibility relation</strong> between positive numbers. If you compare 5 and 15, you can say that 5 is a divisor of 15, and 15 is the multiple of 5. However, 3 and 5 are not comparable because 3 is neither the divisor nor the multiple of 5. </p>\n\n<p>An example of <strong>total ordering</strong> is the <strong>less than relation</strong>, because if you take any two different numbers, one of them is less than the other. So any value is comparable with any other value.</p>\n\n<p>On the concept of <strong>natural ordering</strong>: If the objects of a type have a really-really obvious way to be sorted, than it is the natural ordering. For example, the natural ordering of Strings is the alphabetical order, and the natural order of numbers is ascending order, because it is the first choice anybody would think of. However, sometimes you would want to order Strings in a different way, e.g. sorting by length from the 1-character ones to the longer ones. This is a possible total ordering on Strings, but not the natural one.</p>\n\n<p>Not all objects necessarily have a natural ordering. E.g. if you have Person objects, sorting them by height is a possible total ordering, but so is sorting them by age... None of these are more obvious than the other, this is why there is no natural ordering.</p>\n"},{"tags":[],"owner":{"account_id":2424487,"reputation":3103,"user_id":2116739,"accept_rate":25,"display_name":"okrunner"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529342106,"creation_date":1529342106,"answer_id":50914518,"question_id":9176643,"body_markdown":"`Comparable` implementations provide a **natural ordering** for a class, which allows objects of that class to be sorted automatically. (Ref: https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html) \r\n\r\nImplementation of the `Comparable` interface enforces **total ordering** or the ability to sort the entire array from beginning to end.\r\n","title":"difference between natural ordering and total ordering","body":"<p><code>Comparable</code> implementations provide a <strong>natural ordering</strong> for a class, which allows objects of that class to be sorted automatically. (Ref: <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html</a>) </p>\n\n<p>Implementation of the <code>Comparable</code> interface enforces <strong>total ordering</strong> or the ability to sort the entire array from beginning to end.</p>\n"},{"tags":[],"owner":{"account_id":29871637,"reputation":1,"user_id":22892868,"display_name":"KM Graf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037262,"creation_date":1699613397,"answer_id":77459423,"question_id":9176643,"body_markdown":"Simple answer: There is no natural order in Java.\r\n\r\nIf a class (like many do) implements `java.util.Comparable` the `compareTo` method defines the order of the instances and we can use e.g. `java.util.Arrays.sort`. If the class does not provide the `compareTo` method the order is undefined and `java.util.Arrays.sort` gives Runtime `java.lang.ClassCastException: ... cannot be cast to java.lang.Comparable`.\r\nBecause allmost all(?) classes implement `java.util.Comparable` this appears to be their natural order.","title":"difference between natural ordering and total ordering","body":"<p>Simple answer: There is no natural order in Java.</p>\n<p>If a class (like many do) implements <code>java.util.Comparable</code> the <code>compareTo</code> method defines the order of the instances and we can use e.g. <code>java.util.Arrays.sort</code>. If the class does not provide the <code>compareTo</code> method the order is undefined and <code>java.util.Arrays.sort</code> gives Runtime <code>java.lang.ClassCastException: ... cannot be cast to java.lang.Comparable</code>.\nBecause allmost all(?) classes implement <code>java.util.Comparable</code> this appears to be their natural order.</p>\n"}],"owner":{"account_id":1083888,"reputation":10344,"user_id":1080093,"accept_rate":92,"display_name":"Nav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57474,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"accepted_answer_id":9176776,"answer_count":8,"score":47,"last_activity_date":1700037262,"creation_date":1328619333,"question_id":9176643,"body_markdown":"I happen to come across many statements like comparable is used when natural ordering is required while sorting an array or collection and comparator for total ordering.\r\n\r\nThe version you may have heard could be same or different with the same meaning but ultimately its one of the distinguishing factors between the two(comparator and comparable interfaces).\r\n\r\nBut, I couldn&#39;t find a difference between the two types of ordering anywhere.\r\nI&#39;d appreciate if someone could explain it with a good example :)\r\n","title":"difference between natural ordering and total ordering","body":"<p>I happen to come across many statements like comparable is used when natural ordering is required while sorting an array or collection and comparator for total ordering.</p>\n\n<p>The version you may have heard could be same or different with the same meaning but ultimately its one of the distinguishing factors between the two(comparator and comparable interfaces).</p>\n\n<p>But, I couldn't find a difference between the two types of ordering anywhere.\nI'd appreciate if someone could explain it with a good example :)</p>\n"},{"tags":["java","docker","docker-compose","cassandra","spring-data-cassandra"],"owner":{"account_id":22640087,"reputation":1,"user_id":16816385,"display_name":"Ivan Didichenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1700036765,"creation_date":1700024965,"question_id":77485394,"body_markdown":"My application is dep on Cassandra, so i have put all of them in a docker-compose file, now simply using plain docker as given here i&#39;m able to run it fine locally but when i try using the same configuration in compose i keep getting the error\r\n\r\ntop stacktrace:\r\n\r\n`[s0] Error connecting to Node(endPoint=localhost/127.0.0.1:9042, hostId=null, hashCode=8a90356), trying next node (ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException))`\r\n\r\nend:\r\n\r\n```\r\n\tSuppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9042\r\n\tCaused by: java.net.ConnectException: Connection refused\r\n\t\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n\t\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\r\n\t\tat java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)\r\n\t\tat io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\r\n\t\tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\t\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\t\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\t\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\t\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:840)\r\nCaused by: io.netty.channel.StacklessClosedChannelException: null\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe.flush0()(Unknown Source)\r\n```\r\n\r\nmy docker-compose:\r\n\r\n```yaml\r\nversion: &quot;3.8&quot;\r\n\r\nservices:\r\n  urls-storage:\r\n    image: cassandra:latest\r\n    container_name: urls-storage-db\r\n    command: [ -f ]\r\n    environment:\r\n      CASSANDRA_CLUSTER_NAME: app\r\n    ports:\r\n      - &quot;9042:9042&quot;\r\n      - &quot;9160:9160&quot;\r\n      - &quot;7199:7199&quot;\r\n    healthcheck:\r\n      test: [ &quot;CMD-SHELL&quot;, &quot;[ $$(nodetool statusgossip) = running ]&quot; ]\r\n      interval: 10s\r\n      timeout: 5s\r\n      retries: 3\r\n    volumes:\r\n      - cassandra_data:/var/lib/cassandra\r\n  app:\r\n    build: .\r\n    container_name: url-shortener-service\r\n    ports:\r\n      - &#39;8083:8083&#39;\r\n    depends_on:\r\n      urls-storage:\r\n        condition: service_healthy\r\n\r\nvolumes:\r\n  cassandra_data:\r\n    driver: local\r\n```\r\n\r\napplication.yaml:\r\n\r\n```\r\nserver:\r\n  port: 8083\r\nspring:\r\n  application:\r\n    name: url-shortener-service\r\n  cassandra:\r\n    port: 9042\r\n    keyspace-name: links\r\n    schema-action: create-if-not-exists\r\n    connection:\r\n      connect-timeout: 30s\r\n      init-query-timeout: 10s\r\n    request:\r\n      timeout: 10s\r\n    contact-points: urls-storage-db\r\n    local-datacenter: datacenter1\r\n```\r\n\r\nI have tried to even hard code the contact-point but to no avail, I&#39;m able to access the cassandra in the compose container, but my application can&#39;t seem to access it.","title":"Docker compose : Cassandra not connecting to my spring app in same network","body":"<p>My application is dep on Cassandra, so i have put all of them in a docker-compose file, now simply using plain docker as given here i'm able to run it fine locally but when i try using the same configuration in compose i keep getting the error</p>\n<p>top stacktrace:</p>\n<p><code>[s0] Error connecting to Node(endPoint=localhost/127.0.0.1:9042, hostId=null, hashCode=8a90356), trying next node (ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException))</code></p>\n<p>end:</p>\n<pre><code>    Suppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9042\n    Caused by: java.net.ConnectException: Connection refused\n        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)\n        at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\n        at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:840)\nCaused by: io.netty.channel.StacklessClosedChannelException: null\n    at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0()(Unknown Source)\n</code></pre>\n<p>my docker-compose:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: &quot;3.8&quot;\n\nservices:\n  urls-storage:\n    image: cassandra:latest\n    container_name: urls-storage-db\n    command: [ -f ]\n    environment:\n      CASSANDRA_CLUSTER_NAME: app\n    ports:\n      - &quot;9042:9042&quot;\n      - &quot;9160:9160&quot;\n      - &quot;7199:7199&quot;\n    healthcheck:\n      test: [ &quot;CMD-SHELL&quot;, &quot;[ $$(nodetool statusgossip) = running ]&quot; ]\n      interval: 10s\n      timeout: 5s\n      retries: 3\n    volumes:\n      - cassandra_data:/var/lib/cassandra\n  app:\n    build: .\n    container_name: url-shortener-service\n    ports:\n      - '8083:8083'\n    depends_on:\n      urls-storage:\n        condition: service_healthy\n\nvolumes:\n  cassandra_data:\n    driver: local\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>server:\n  port: 8083\nspring:\n  application:\n    name: url-shortener-service\n  cassandra:\n    port: 9042\n    keyspace-name: links\n    schema-action: create-if-not-exists\n    connection:\n      connect-timeout: 30s\n      init-query-timeout: 10s\n    request:\n      timeout: 10s\n    contact-points: urls-storage-db\n    local-datacenter: datacenter1\n</code></pre>\n<p>I have tried to even hard code the contact-point but to no avail, I'm able to access the cassandra in the compose container, but my application can't seem to access it.</p>\n"},{"tags":["java","checkbox","radio-button","bluej"],"answers":[{"tags":[],"owner":{"account_id":3180912,"reputation":980,"user_id":2687641,"accept_rate":81,"display_name":"TheEyesHaveIt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700036751,"creation_date":1379129523,"answer_id":18798002,"question_id":18787029,"body_markdown":"Take a look at the error you are getting.  It says NumberFormatException.  I believe the problem lies in your Double.parseDouble(gasL.getText()).  What happens when gasL is left blank? How will the program parse a null string into a double?  Try setting the default value of gasL to 0 or look into try/catch to handle exceptions.\r\n\r\n    gasL = new JTextField(&quot;0&quot;,5);\r\n\r\nThis removes the error message but I cannot figure out why your Gas Station panel isn&#39;t opening.","title":"A couple of Questions Regarding Buttons in BlueJ","body":"<p>Take a look at the error you are getting.  It says NumberFormatException.  I believe the problem lies in your Double.parseDouble(gasL.getText()).  What happens when gasL is left blank? How will the program parse a null string into a double?  Try setting the default value of gasL to 0 or look into try/catch to handle exceptions.</p>\n<pre><code>gasL = new JTextField(&quot;0&quot;,5);\n</code></pre>\n<p>This removes the error message but I cannot figure out why your Gas Station panel isn't opening.</p>\n"},{"tags":[],"owner":{"account_id":1020179,"reputation":484,"user_id":1030745,"display_name":"Kaydell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700036731,"creation_date":1379137418,"answer_id":18798729,"question_id":18787029,"body_markdown":"I think that it is best **not** to use methods such as: Double.parseDouble() **directly**.\r\n\r\nOf course, you wouldn&#39;t want to develop your own methods to parse doubles, etc.\r\n\r\nWhat I like to do is to map the empty string and even nulls into zero.\r\n\r\n    public static double myParseDouble(String s) {\r\n        if (s == null || s.equals(&quot;&quot;)) {\r\n            return 0.0;\r\n        } else {\r\n            return Double.parseDouble(s);\r\n        }\r\n    }\r\n\r\nYou have to do the same sort of thing when parsing ints, floats, longs, and BigIntegers.\r\n\r\nI suggest that you take my method, in its own project, and &quot;play with it&quot;, running various strings through it and see what it does.","title":"A couple of Questions Regarding Buttons in BlueJ","body":"<p>I think that it is best <strong>not</strong> to use methods such as: Double.parseDouble() <strong>directly</strong>.</p>\n<p>Of course, you wouldn't want to develop your own methods to parse doubles, etc.</p>\n<p>What I like to do is to map the empty string and even nulls into zero.</p>\n<pre><code>public static double myParseDouble(String s) {\n    if (s == null || s.equals(&quot;&quot;)) {\n        return 0.0;\n    } else {\n        return Double.parseDouble(s);\n    }\n}\n</code></pre>\n<p>You have to do the same sort of thing when parsing ints, floats, longs, and BigIntegers.</p>\n<p>I suggest that you take my method, in its own project, and &quot;play with it&quot;, running various strings through it and see what it does.</p>\n"}],"owner":{"account_id":2228940,"reputation":93,"user_id":1967055,"accept_rate":50,"display_name":"Bobby Ores"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1321,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700036751,"creation_date":1379077436,"question_id":18787029,"body_markdown":"My issue is that my radio buttons causes a huge error in the java terminal when I select it. It is in the beginning buttons (button1 to button 4) button1 starts up the gas station (so you can choose what type of gas you want), but instead of opening up radio  buttons to choose from, it gives me a bunch of errors that relates to \r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: empty String\r\nThe radiobuttons worked before, but after I made the checkboxes method it stopped working, but the checkbox selection works (not clearing, however).\r\nFound the error, it belonged to this  \r\n\r\n    litres=Double.parseDouble(gasL.getText());\r\nSo I temporarily removed that part, but not sure how to get it to work because I am trying to get the litres from the text box the user can input. The gas bar still doesn&#39;t open up\r\n\r\nClearing works for check boxes, but I am not sure for radio buttons, which gives me the errors\r\n\r\nHere is my code\r\n\r\n        import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    /**\r\n     * A GUI for a Gas Bar, which allows you to choose the gas type you want, and optional car checks for things like \r\n     * windshield and gas check. The price is outputted afterwards.\r\n     * \r\n     * @author Kevin Hy \r\n     * @date   08/06/13\r\n     */\r\n    public class New_Gas_Bar extends JFrame\r\n    {\r\n        public JPanel panel1,panel2,panel3,panel4,panel5;\r\n        public JLabel main1, main2, main3,main4,main5,main6;\r\n        public JLabel gasBar,total;\r\n        public JButton button1,button2,button3,button4,clearGas,clearCar;\r\n        public JRadioButton bronzeG,silverG,goldG,selfS,fullS,fullService,selfService;\r\n        public JCheckBox oilC,windWash,pressureClock;\r\n        public JTextField gasL;\r\n        static double fullCost,selfCost,discount,gasCost,litres,cleaningC;\r\n        static boolean boughtGas=false;\r\n    \r\n        public New_Gas_Bar()\r\n        {\r\n            super (&quot;      New Gas Bar&quot;);\r\n            setSize(640,640);\r\n            Container container = getContentPane();\r\n    \r\n            panel1=new JPanel();\r\n            panel2=new JPanel();\r\n            panel3=new JPanel();\r\n            panel4=new JPanel();\r\n            panel5=new JPanel();\r\n    \r\n            panel1.setBackground(new Color(107,202,226));\r\n            panel1.setLayout(new GridLayout(6,1));\r\n    \r\n            main1 = new JLabel (&quot;         Gas Bar Project &quot;);\r\n            main2 = new JLabel (&quot;         ICS4U0 - September 2013&quot;);\r\n            main3 = new JLabel (&quot;     &quot;);\r\n            main4 = new JLabel (&quot;Enter Litres of Gas&quot;);\r\n            main5 = new JLabel (&quot;Select Full or Self Serve&quot;);\r\n            main6 = new JLabel (&quot;Select Gas Quality&quot;);\r\n    \r\n            button1 = new JButton (&quot;Gas Station&quot;);\r\n            button2 = new JButton (&quot;Car Wash&quot;);\r\n            button3 = new JButton (&quot;Total&quot;);\r\n            button4 = new JButton (&quot;Exit&quot;);\r\n            clearCar = new JButton (&quot;Clear&quot;);\r\n            clearGas = new JButton (&quot;Clear&quot;);\r\n    \r\n            panel2.setBackground(new Color(144,160,170));\r\n            panel2.setLayout(new FlowLayout ());\r\n            panel2.add (button1);\r\n            panel2.add (button2);\r\n            panel2.add (button3);\r\n            panel2.add (button4);\r\n            panel1.add (main1);\r\n            panel1.add (main2);\r\n            panel1.add (main3);\r\n    \r\n            //container.setLayout(new BorderLayout());\r\n            container.add(panel1,BorderLayout.NORTH);\r\n            container.add(panel2,BorderLayout.CENTER);\r\n            container.add(panel3,BorderLayout.EAST);\r\n            container.add(panel4,BorderLayout.EAST);\r\n            panel3.setBackground(new Color(107,202,226));\r\n            panel4.setBackground(new Color(107,202,226));\r\n    \r\n            ButtonHandler handler = new ButtonHandler ();\r\n            button1.addActionListener (handler);\r\n            button2.addActionListener (handler);\r\n            button3.addActionListener (handler);\r\n            button4.addActionListener (handler);\r\n            clearCar.addActionListener (handler);\r\n    clearGas.addActionListener (handler);\r\n            ButtonGroup serveStyle = new ButtonGroup();\r\n            fullS = new JRadioButton (&quot;Full Serve&quot;);\r\n            selfS = new JRadioButton (&quot;Self Serve&quot;);\r\n            serveStyle.add (fullS);\r\n            serveStyle.add (selfS);\r\n    \r\n            ButtonGroup serveGas = new ButtonGroup();\r\n            bronzeG = new JRadioButton(&quot;Bronze Service&quot;);\r\n            silverG = new JRadioButton(&quot;Silver Service&quot;);\r\n            goldG = new JRadioButton(&quot;Gold Service&quot;);\r\n            serveGas.add (bronzeG);\r\n            serveGas.add (silverG);\r\n            serveGas.add (goldG);\r\n    \r\n            gasL = new JTextField(5);\r\n            oilC = new JCheckBox(&quot;Oil Change&quot;);\r\n            windWash = new JCheckBox(&quot;Windshield Wash&quot;);\r\n            pressureClock = new JCheckBox(&quot;Air Pressure Check&quot;);\r\n    \r\n            RadioButtonHandler radioHand = new RadioButtonHandler ();\r\n            bronzeG.addItemListener (radioHand);\r\n            silverG.addItemListener (radioHand);\r\n            goldG.addItemListener (radioHand);\r\n            fullS.addItemListener (radioHand);\r\n            selfS.addItemListener (radioHand);\r\n            CheckBoxHandler checkHand = new CheckBoxHandler();\r\n            oilC.addItemListener (checkHand);\r\n            windWash.addItemListener (checkHand);\r\n            pressureClock.addItemListener (checkHand);\r\n            setVisible(true);\r\n        }\r\n    \r\n        public static void main (String [] args)\r\n        {\r\n    \r\n            New_Gas_Bar application = new New_Gas_Bar();    \r\n        }\r\n    \r\n        public class ButtonHandler implements ActionListener\r\n    \r\n        {\r\n            public void actionPerformed (ActionEvent event)\r\n            {\r\n                if (event.getSource () == button1)\r\n                {           \r\n                    panel1.setVisible(true);\r\n                    panel2.setVisible(true);\r\n                    panel3.setVisible(true);\r\n                    panel4.setVisible(false);\r\n                    panel3.setLayout(new GridLayout(10,1));\r\n                    panel3.add(clearGas);\r\n                    panel3.add(main5);\r\n                    panel3.add(fullS);\r\n                    panel3.add(selfS);\r\n                    panel3.add(main6);\r\n                    panel3.add(bronzeG);\r\n                    panel3.add(silverG);\r\n                    panel3.add(goldG);\r\n                    panel3.add(main4);\r\n                    panel3.add(gasL);\r\n    \r\n                    litres=Double.parseDouble(gasL.getText());\r\n                    //JOptionPane.showMessageDialog (null, litres);\r\n                }\r\n                else if (event.getSource () == button2)\r\n                {\r\n                    panel1.setVisible(true);\r\n                    panel2.setVisible(true);\r\n                    panel3.setVisible(false);\r\n                    panel4.setVisible(true);\r\n                    panel4.setLayout(new FlowLayout ());\r\n                    panel4.add(clearCar);\r\n                    panel4.add(oilC);\r\n                    panel4.add(windWash);\r\n                    panel4.add(pressureClock);\r\n                }\r\n                else if (event.getSource () == button3)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;This is your total:&quot;);\r\n                    JOptionPane.showMessageDialog (null, litres);\r\n                }\r\n                else if (event.getSource () == button4)\r\n                {\r\n                    System.exit(0);\r\n                }\r\n                if (event.getSource () == clearGas)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Clearing All Selected Options&quot;);\r\n                    bronzeG.setSelected(false);\r\n                    silverG.setSelected(false);\r\n                    goldG.setSelected(false);\r\n                    fullS.setSelected(false);\r\n                    selfS.setSelected(false);\r\n                    gasCost=0;\r\n                    boughtGas=false;\r\n                }\r\n                if (event.getSource () == clearCar)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Clearing All Selected Options&quot;);\r\n                    pressureClock.setSelected(false);\r\n                    windWash.setSelected(false);\r\n                    oilC.setSelected(false);\r\n                    cleaningC=0;\r\n                }\r\n            }\r\n        }\r\n        public class RadioButtonHandler implements ItemListener\r\n    \r\n        {\r\n            public void itemStateChanged(ItemEvent event)\r\n            {\r\n                if (event.getSource () == fullS)\r\n                {        \r\n                    JOptionPane.showMessageDialog (null, &quot;Full Serve Selected&quot;);\r\n                    fullCost =1.25;\r\n                    boughtGas=true;\r\n                }\r\n    \r\n                else if (event.getSource () == selfS)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Self Serve Selected&quot;);\r\n                    selfCost =0.60;\r\n                    boughtGas=true;\r\n                }\r\n                if (event.getSource () == bronzeG)\r\n                {           \r\n                    JOptionPane.showMessageDialog (null, &quot;Bronze Gas Option Selected&quot;);\r\n                    gasCost=0.50;\r\n                    boughtGas=true;\r\n                }\r\n                if (event.getSource () == silverG)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Silver Gas Option Selected&quot;);\r\n                    gasCost=0.75;\r\n                    boughtGas=true;\r\n                }\r\n                if (event.getSource () == goldG)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Gold Gas Option Selected&quot;);\r\n                    gasCost=0.95;\r\n                    boughtGas=true;\r\n                }\r\n                \r\n            }\r\n        }\r\n        public class CheckBoxHandler implements ItemListener\r\n    \r\n        {\r\n            public void itemStateChanged (ItemEvent event)\r\n            {\r\n                if (event.getSource () == oilC)\r\n                {           \r\n                    JOptionPane.showMessageDialog (null, &quot;Oil Cleaning Selected&quot;);\r\n                    if (boughtGas==true)\r\n                    {\r\n                        cleaningC+=10.00;\r\n                    }\r\n                    else \r\n                    {\r\n                        cleaningC+=12.50;\r\n                    }\r\n                }\r\n                if (event.getSource () == windWash)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Windshield Washing Selected&quot;);\r\n                    if (boughtGas==true)\r\n                    {\r\n                        cleaningC+=10.00;\r\n                    }\r\n                    else \r\n                    {\r\n                        cleaningC+=12.50;\r\n                    }\r\n                }\r\n                if (event.getSource () == pressureClock)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Air Pressure Check Selected&quot;);\r\n                    if (boughtGas==true)\r\n                    {\r\n                        cleaningC+=10.00;\r\n                    }\r\n                    else \r\n                    {\r\n                        cleaningC+=12.50;\r\n                    }\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n","title":"A couple of Questions Regarding Buttons in BlueJ","body":"<p>My issue is that my radio buttons causes a huge error in the java terminal when I select it. It is in the beginning buttons (button1 to button 4) button1 starts up the gas station (so you can choose what type of gas you want), but instead of opening up radio  buttons to choose from, it gives me a bunch of errors that relates to </p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" java.lang.NumberFormatException: empty String\n</code></pre>\n\n<p>The radiobuttons worked before, but after I made the checkboxes method it stopped working, but the checkbox selection works (not clearing, however).\nFound the error, it belonged to this  </p>\n\n<pre><code>litres=Double.parseDouble(gasL.getText());\n</code></pre>\n\n<p>So I temporarily removed that part, but not sure how to get it to work because I am trying to get the litres from the text box the user can input. The gas bar still doesn't open up</p>\n\n<p>Clearing works for check boxes, but I am not sure for radio buttons, which gives me the errors</p>\n\n<p>Here is my code</p>\n\n<pre><code>    import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\n/**\n * A GUI for a Gas Bar, which allows you to choose the gas type you want, and optional car checks for things like \n * windshield and gas check. The price is outputted afterwards.\n * \n * @author Kevin Hy \n * @date   08/06/13\n */\npublic class New_Gas_Bar extends JFrame\n{\n    public JPanel panel1,panel2,panel3,panel4,panel5;\n    public JLabel main1, main2, main3,main4,main5,main6;\n    public JLabel gasBar,total;\n    public JButton button1,button2,button3,button4,clearGas,clearCar;\n    public JRadioButton bronzeG,silverG,goldG,selfS,fullS,fullService,selfService;\n    public JCheckBox oilC,windWash,pressureClock;\n    public JTextField gasL;\n    static double fullCost,selfCost,discount,gasCost,litres,cleaningC;\n    static boolean boughtGas=false;\n\n    public New_Gas_Bar()\n    {\n        super (\"      New Gas Bar\");\n        setSize(640,640);\n        Container container = getContentPane();\n\n        panel1=new JPanel();\n        panel2=new JPanel();\n        panel3=new JPanel();\n        panel4=new JPanel();\n        panel5=new JPanel();\n\n        panel1.setBackground(new Color(107,202,226));\n        panel1.setLayout(new GridLayout(6,1));\n\n        main1 = new JLabel (\"         Gas Bar Project \");\n        main2 = new JLabel (\"         ICS4U0 - September 2013\");\n        main3 = new JLabel (\"     \");\n        main4 = new JLabel (\"Enter Litres of Gas\");\n        main5 = new JLabel (\"Select Full or Self Serve\");\n        main6 = new JLabel (\"Select Gas Quality\");\n\n        button1 = new JButton (\"Gas Station\");\n        button2 = new JButton (\"Car Wash\");\n        button3 = new JButton (\"Total\");\n        button4 = new JButton (\"Exit\");\n        clearCar = new JButton (\"Clear\");\n        clearGas = new JButton (\"Clear\");\n\n        panel2.setBackground(new Color(144,160,170));\n        panel2.setLayout(new FlowLayout ());\n        panel2.add (button1);\n        panel2.add (button2);\n        panel2.add (button3);\n        panel2.add (button4);\n        panel1.add (main1);\n        panel1.add (main2);\n        panel1.add (main3);\n\n        //container.setLayout(new BorderLayout());\n        container.add(panel1,BorderLayout.NORTH);\n        container.add(panel2,BorderLayout.CENTER);\n        container.add(panel3,BorderLayout.EAST);\n        container.add(panel4,BorderLayout.EAST);\n        panel3.setBackground(new Color(107,202,226));\n        panel4.setBackground(new Color(107,202,226));\n\n        ButtonHandler handler = new ButtonHandler ();\n        button1.addActionListener (handler);\n        button2.addActionListener (handler);\n        button3.addActionListener (handler);\n        button4.addActionListener (handler);\n        clearCar.addActionListener (handler);\nclearGas.addActionListener (handler);\n        ButtonGroup serveStyle = new ButtonGroup();\n        fullS = new JRadioButton (\"Full Serve\");\n        selfS = new JRadioButton (\"Self Serve\");\n        serveStyle.add (fullS);\n        serveStyle.add (selfS);\n\n        ButtonGroup serveGas = new ButtonGroup();\n        bronzeG = new JRadioButton(\"Bronze Service\");\n        silverG = new JRadioButton(\"Silver Service\");\n        goldG = new JRadioButton(\"Gold Service\");\n        serveGas.add (bronzeG);\n        serveGas.add (silverG);\n        serveGas.add (goldG);\n\n        gasL = new JTextField(5);\n        oilC = new JCheckBox(\"Oil Change\");\n        windWash = new JCheckBox(\"Windshield Wash\");\n        pressureClock = new JCheckBox(\"Air Pressure Check\");\n\n        RadioButtonHandler radioHand = new RadioButtonHandler ();\n        bronzeG.addItemListener (radioHand);\n        silverG.addItemListener (radioHand);\n        goldG.addItemListener (radioHand);\n        fullS.addItemListener (radioHand);\n        selfS.addItemListener (radioHand);\n        CheckBoxHandler checkHand = new CheckBoxHandler();\n        oilC.addItemListener (checkHand);\n        windWash.addItemListener (checkHand);\n        pressureClock.addItemListener (checkHand);\n        setVisible(true);\n    }\n\n    public static void main (String [] args)\n    {\n\n        New_Gas_Bar application = new New_Gas_Bar();    \n    }\n\n    public class ButtonHandler implements ActionListener\n\n    {\n        public void actionPerformed (ActionEvent event)\n        {\n            if (event.getSource () == button1)\n            {           \n                panel1.setVisible(true);\n                panel2.setVisible(true);\n                panel3.setVisible(true);\n                panel4.setVisible(false);\n                panel3.setLayout(new GridLayout(10,1));\n                panel3.add(clearGas);\n                panel3.add(main5);\n                panel3.add(fullS);\n                panel3.add(selfS);\n                panel3.add(main6);\n                panel3.add(bronzeG);\n                panel3.add(silverG);\n                panel3.add(goldG);\n                panel3.add(main4);\n                panel3.add(gasL);\n\n                litres=Double.parseDouble(gasL.getText());\n                //JOptionPane.showMessageDialog (null, litres);\n            }\n            else if (event.getSource () == button2)\n            {\n                panel1.setVisible(true);\n                panel2.setVisible(true);\n                panel3.setVisible(false);\n                panel4.setVisible(true);\n                panel4.setLayout(new FlowLayout ());\n                panel4.add(clearCar);\n                panel4.add(oilC);\n                panel4.add(windWash);\n                panel4.add(pressureClock);\n            }\n            else if (event.getSource () == button3)\n            {\n                JOptionPane.showMessageDialog (null, \"This is your total:\");\n                JOptionPane.showMessageDialog (null, litres);\n            }\n            else if (event.getSource () == button4)\n            {\n                System.exit(0);\n            }\n            if (event.getSource () == clearGas)\n            {\n                JOptionPane.showMessageDialog (null, \"Clearing All Selected Options\");\n                bronzeG.setSelected(false);\n                silverG.setSelected(false);\n                goldG.setSelected(false);\n                fullS.setSelected(false);\n                selfS.setSelected(false);\n                gasCost=0;\n                boughtGas=false;\n            }\n            if (event.getSource () == clearCar)\n            {\n                JOptionPane.showMessageDialog (null, \"Clearing All Selected Options\");\n                pressureClock.setSelected(false);\n                windWash.setSelected(false);\n                oilC.setSelected(false);\n                cleaningC=0;\n            }\n        }\n    }\n    public class RadioButtonHandler implements ItemListener\n\n    {\n        public void itemStateChanged(ItemEvent event)\n        {\n            if (event.getSource () == fullS)\n            {        \n                JOptionPane.showMessageDialog (null, \"Full Serve Selected\");\n                fullCost =1.25;\n                boughtGas=true;\n            }\n\n            else if (event.getSource () == selfS)\n            {\n                JOptionPane.showMessageDialog (null, \"Self Serve Selected\");\n                selfCost =0.60;\n                boughtGas=true;\n            }\n            if (event.getSource () == bronzeG)\n            {           \n                JOptionPane.showMessageDialog (null, \"Bronze Gas Option Selected\");\n                gasCost=0.50;\n                boughtGas=true;\n            }\n            if (event.getSource () == silverG)\n            {\n                JOptionPane.showMessageDialog (null, \"Silver Gas Option Selected\");\n                gasCost=0.75;\n                boughtGas=true;\n            }\n            if (event.getSource () == goldG)\n            {\n                JOptionPane.showMessageDialog (null, \"Gold Gas Option Selected\");\n                gasCost=0.95;\n                boughtGas=true;\n            }\n\n        }\n    }\n    public class CheckBoxHandler implements ItemListener\n\n    {\n        public void itemStateChanged (ItemEvent event)\n        {\n            if (event.getSource () == oilC)\n            {           \n                JOptionPane.showMessageDialog (null, \"Oil Cleaning Selected\");\n                if (boughtGas==true)\n                {\n                    cleaningC+=10.00;\n                }\n                else \n                {\n                    cleaningC+=12.50;\n                }\n            }\n            if (event.getSource () == windWash)\n            {\n                JOptionPane.showMessageDialog (null, \"Windshield Washing Selected\");\n                if (boughtGas==true)\n                {\n                    cleaningC+=10.00;\n                }\n                else \n                {\n                    cleaningC+=12.50;\n                }\n            }\n            if (event.getSource () == pressureClock)\n            {\n                JOptionPane.showMessageDialog (null, \"Air Pressure Check Selected\");\n                if (boughtGas==true)\n                {\n                    cleaningC+=10.00;\n                }\n                else \n                {\n                    cleaningC+=12.50;\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":8,"creation_date":1699994425,"post_id":77483694,"comment_id":136599862,"body_markdown":"In `Product.read()`, doing `String name = in.nextLine();` is declaring a new _local variable_. It is not assigning the value to the name _field_. Try just `name = in.nextLine();` (and same for the other fields you want to assign values to).","body":"In <code>Product.read()</code>, doing <code>String name = in.nextLine();</code> is declaring a new <i>local variable</i>. It is not assigning the value to the name <i>field</i>. Try just <code>name = in.nextLine();</code> (and same for the other fields you want to assign values to)."}],"answers":[{"tags":[],"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699994723,"creation_date":1699994723,"answer_id":77483729,"question_id":77483694,"body_markdown":"You have declared new _local_ variables to store the input data, rather than assigning to the instance variables.\r\n\r\n```\r\n    public void read() {     \r\n        Scanner in  = new Scanner(System.in);\r\n        \r\n        System.out.println(&quot;Product name: &quot;);\r\n        name = in.nextLine(); \r\n        System.out.println(&quot;Price: &quot;);\r\n        price = in.nextDouble();\r\n        System.out.println(&quot;Score: &quot;);\r\n        core = in.nextInt();\r\n    }\r\n```","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<p>You have declared new <em>local</em> variables to store the input data, rather than assigning to the instance variables.</p>\n<pre><code>    public void read() {     \n        Scanner in  = new Scanner(System.in);\n        \n        System.out.println(&quot;Product name: &quot;);\n        name = in.nextLine(); \n        System.out.println(&quot;Price: &quot;);\n        price = in.nextDouble();\n        System.out.println(&quot;Score: &quot;);\n        core = in.nextInt();\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"score":1,"creation_date":1699996578,"post_id":77483734,"comment_id":136600185,"body_markdown":"If there is no ambiguity because of a locally scoped variable whose name shadows the instance variable name, the `this.` is extraneous.","body":"If there is no ambiguity because of a locally scoped variable whose name shadows the instance variable name, the <code>this.</code> is extraneous."}],"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1700036535,"creation_date":1699994742,"answer_id":77483734,"question_id":77483694,"body_markdown":"In the read method you have created local variables for name price and core. You are reading into these local variables instead of into the member variables (fields) of your class.\r\n\r\nInstead of\r\n\r\n```java\r\n        String name = in.nextLine(); \r\n        double price = in.nextDouble();\r\n        int core = in.nextInt();\r\n```\r\n\r\nYou should do\r\n\r\n```java\r\n        this.name = in.nextLine(); \r\n        this.price = in.nextDouble();\r\n        this.core = in.nextInt();\r\n```\r\n\r\nNow that we&#39;ve removed the local variables we are no longer shadowing the instance variables. We can therefore omit `this.` in the solution above so could do\r\n\r\n```java\r\n        name = in.nextLine(); \r\n        price = in.nextDouble();\r\n        core = in.nextInt();\r\n```","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<p>In the read method you have created local variables for name price and core. You are reading into these local variables instead of into the member variables (fields) of your class.</p>\n<p>Instead of</p>\n<pre class=\"lang-java prettyprint-override\"><code>        String name = in.nextLine(); \n        double price = in.nextDouble();\n        int core = in.nextInt();\n</code></pre>\n<p>You should do</p>\n<pre class=\"lang-java prettyprint-override\"><code>        this.name = in.nextLine(); \n        this.price = in.nextDouble();\n        this.core = in.nextInt();\n</code></pre>\n<p>Now that we've removed the local variables we are no longer shadowing the instance variables. We can therefore omit <code>this.</code> in the solution above so could do</p>\n<pre class=\"lang-java prettyprint-override\"><code>        name = in.nextLine(); \n        price = in.nextDouble();\n        core = in.nextInt();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699998240,"creation_date":1699998240,"answer_id":77484018,"question_id":77483694,"body_markdown":"&gt; _&quot;... When i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones ...&quot;_\r\n\r\nYou don&#39;t have to re-declare the values, in the _read_ method.\r\n\r\n```java\r\npublic void read() {\r\n\r\n    Scanner in  = new Scanner(System.in);\r\n\r\n    System.out.println(&quot;Product name: &quot;);\r\n    name = in.nextLine();\r\n    System.out.println(&quot;Price: &quot;);\r\n    price = in.nextDouble();\r\n    System.out.println(&quot;Score: &quot;);\r\n    score = in.nextInt();\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nProduct name: \r\nabc\r\nPrice: \r\n1.23\r\nScore: \r\n123\r\nMore Products? 1:YES, 2:NO\r\n2\r\nName: abc\r\nPrice: 1.23\r\nScore: 123\r\n```","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<blockquote>\n<p><em>&quot;... When i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones ...&quot;</em></p>\n</blockquote>\n<p>You don't have to re-declare the values, in the <em>read</em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void read() {\n\n    Scanner in  = new Scanner(System.in);\n\n    System.out.println(&quot;Product name: &quot;);\n    name = in.nextLine();\n    System.out.println(&quot;Price: &quot;);\n    price = in.nextDouble();\n    System.out.println(&quot;Score: &quot;);\n    score = in.nextInt();\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Product name: \nabc\nPrice: \n1.23\nScore: \n123\nMore Products? 1:YES, 2:NO\n2\nName: abc\nPrice: 1.23\nScore: 123\n</code></pre>\n"}],"owner":{"account_id":29903601,"reputation":1,"user_id":22916716,"display_name":"Smn666x"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1700036535,"creation_date":1699994342,"question_id":77483694,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\nclass Product{\r\n\t\r\n\t//Class attributes\r\n\tprivate String name;\r\n\tprivate double price;\r\n\tprivate int score; \r\n\t\r\n\tpublic Product() {\r\n\t\tname = &quot;&quot;;\r\n\t    score = 0; \r\n\t    price = 1;\r\n\t}\r\n\t\r\n\tpublic void printData(){\r\n\t\tSystem.out.println(&quot;Name: &quot; + name);\r\n\t\tSystem.out.println(&quot;Price: &quot; + price);\r\n\t\tSystem.out.println(&quot;Score: &quot; + score);\r\n\t}\r\n\t\r\n\t\r\n\tpublic void read() {\r\n\t\t\r\n\t\tScanner in  = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Product name: &quot;);\r\n    \tString name = in.nextLine(); \r\n    \tSystem.out.println(&quot;Price: &quot;);\r\n    \tdouble price = in.nextDouble();\r\n    \tSystem.out.println(&quot;Score: &quot;);\r\n    \tint core = in.nextInt();\r\n\t}\r\n\t\r\n\tpublic boolean is_better_than(Product other) {\r\n\t\t\r\n\t\tif (score/price &gt; other.score/other.price)\r\n\t\t\treturn true;\r\n\t\t \r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n}\r\n\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n \r\n\t\tScanner in  = new Scanner(System.in);\r\n\t\t\r\n\t\tProduct best = new Product();\r\n\t    \r\n\t\tboolean more = true;\r\n\t    while(more) {\r\n\t    \t\r\n\t    \t\r\n\t    \tProduct current = new Product();\r\n\t    \t\r\n\t    \tcurrent.read(); // \r\n\t    \tif (current.is_better_than(best)) {\r\n\t    \t\tbest = current;\r\n\t    \t}\r\n\t    \t\t\t    \t\r\n\t    \tSystem.out.println(&quot;More Products? 1:YES, 2:NO&quot;);\r\n            int answer\t= in.nextInt();\r\n            if (answer != 1)\r\n            \tmore = false;\r\n            in.nextLine();\r\n\t    \r\n\t    }\r\n\t    \r\n\t    best.printData(); \r\n\t}\r\n}\r\n```\r\n\r\n\r\nWhen i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<pre><code>import java.util.Scanner;\n\nclass Product{\n    \n    //Class attributes\n    private String name;\n    private double price;\n    private int score; \n    \n    public Product() {\n        name = &quot;&quot;;\n        score = 0; \n        price = 1;\n    }\n    \n    public void printData(){\n        System.out.println(&quot;Name: &quot; + name);\n        System.out.println(&quot;Price: &quot; + price);\n        System.out.println(&quot;Score: &quot; + score);\n    }\n    \n    \n    public void read() {\n        \n        Scanner in  = new Scanner(System.in);\n        \n        System.out.println(&quot;Product name: &quot;);\n        String name = in.nextLine(); \n        System.out.println(&quot;Price: &quot;);\n        double price = in.nextDouble();\n        System.out.println(&quot;Score: &quot;);\n        int core = in.nextInt();\n    }\n    \n    public boolean is_better_than(Product other) {\n        \n        if (score/price &gt; other.score/other.price)\n            return true;\n         \n        return false;\n        \n    }\n}\n\n\npublic class Main {\n    public static void main(String[] args) {\n \n        Scanner in  = new Scanner(System.in);\n        \n        Product best = new Product();\n        \n        boolean more = true;\n        while(more) {\n            \n            \n            Product current = new Product();\n            \n            current.read(); // \n            if (current.is_better_than(best)) {\n                best = current;\n            }\n                            \n            System.out.println(&quot;More Products? 1:YES, 2:NO&quot;);\n            int answer  = in.nextInt();\n            if (answer != 1)\n                more = false;\n            in.nextLine();\n        \n        }\n        \n        best.printData(); \n    }\n}\n</code></pre>\n<p>When i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones</p>\n"},{"tags":["java","android","android-studio","android-viewbinding"],"comments":[{"owner":{"account_id":10510169,"reputation":18796,"user_id":7746134,"display_name":"Saurabh Thorat"},"score":0,"creation_date":1594703026,"post_id":62888211,"comment_id":111209908,"body_markdown":"What is the version of your Android Gradle Plugin?","body":"What is the version of your Android Gradle Plugin?"},{"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"score":0,"creation_date":1594705396,"post_id":62888211,"comment_id":111210579,"body_markdown":"@SaurabhThorat  classpath &#39;com.google.gms:google-services:4.3.3&#39;","body":"@SaurabhThorat  classpath &#39;com.google.gms:google-services:4.3.3&#39;"},{"owner":{"account_id":10510169,"reputation":18796,"user_id":7746134,"display_name":"Saurabh Thorat"},"score":0,"creation_date":1594706911,"post_id":62888211,"comment_id":111211056,"body_markdown":"Not that one. In your project-level `build.gradle`, what is the version of `classpath &#39;com.android.tools.build:gradle:x.x.x`?","body":"Not that one. In your project-level <code>build.gradle</code>, what is the version of <code>classpath &#39;com.android.tools.build:gradle:x.x.x</code>?"},{"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"score":0,"creation_date":1594711054,"post_id":62888211,"comment_id":111212740,"body_markdown":"@SaurabhThorat It&#39;s 4.0.0. I copied the wrong line.","body":"@SaurabhThorat It&#39;s 4.0.0. I copied the wrong line."}],"answers":[{"comments":[{"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"score":0,"creation_date":1594705583,"post_id":62888262,"comment_id":111210628,"body_markdown":"Sorry, I am asking for view binding rather than data binding","body":"Sorry, I am asking for view binding rather than data binding"}],"tags":[],"owner":{"account_id":11440512,"reputation":2403,"user_id":8386274,"display_name":"chand mohd"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1594702787,"creation_date":1594702115,"answer_id":62888262,"question_id":62888211,"body_markdown":"xml level inclose your xml root with &lt;/layout&gt; tag\r\n\r\n \r\n\r\n       &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    \r\n        &lt;data&gt;\r\n    \r\n        &lt;/data&gt;\r\n    \r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n        &lt;LinearLayout\r\n            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            &gt;\r\n    \r\n        &lt;include\r\n            android:id=&quot;@+id/topBar&quot;\r\n            layout=&quot;@layout/view_title&quot;/&gt;\r\n    &lt;/layout&gt;\r\n\r\n\r\n","title":"View binding with include layout not working","body":"<p>xml level inclose your xml root with  tag</p>\n<pre><code>   &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;data&gt;\n\n    &lt;/data&gt;\n\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;LinearLayout\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        &gt;\n\n    &lt;include\n        android:id=&quot;@+id/topBar&quot;\n        layout=&quot;@layout/view_title&quot;/&gt;\n&lt;/layout&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3123068,"reputation":4253,"user_id":2642478,"accept_rate":90,"display_name":"Alessandro Scarozza"},"score":0,"creation_date":1607272606,"post_id":63108101,"comment_id":115214415,"body_markdown":"same, i lost 1 hour, after just restart android studio and works","body":"same, i lost 1 hour, after just restart android studio and works"}],"tags":[],"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1700036443,"creation_date":1595818801,"answer_id":63108101,"question_id":62888211,"body_markdown":"I do nothing on it and it just works automatically. I surely did clean, rebuild, restart Android studio... something at that time but not working. Maybe link another layout in another class would trigger something just fix it under the hood cause I set aside this problem and keep going.\r\n\r\n2023/11/15 Update:\r\nIf you met any resource syncing problem in Android Studio, you can delete your whole folder and pull it from remote again. This would be  my last try for this kind of problem","title":"View binding with include layout not working","body":"<p>I do nothing on it and it just works automatically. I surely did clean, rebuild, restart Android studio... something at that time but not working. Maybe link another layout in another class would trigger something just fix it under the hood cause I set aside this problem and keep going.</p>\n<p>2023/11/15 Update:\nIf you met any resource syncing problem in Android Studio, you can delete your whole folder and pull it from remote again. This would be  my last try for this kind of problem</p>\n"},{"tags":[],"owner":{"account_id":8604168,"reputation":1277,"user_id":6444809,"display_name":"Mohammed Fathi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642573921,"creation_date":1642573921,"answer_id":70766175,"question_id":62888211,"body_markdown":"in my case I was including a layout from another module and was not able to access the inner views in the included layout via binding and the problem was that I was not enabling the viewBinding in the module that contains the xml file that I wanted to include so adding \r\n\r\n    buildFeatures {\r\n            viewBinding true\r\n        }\r\n\r\nto the `gradle.build` of that module fixed it for me! ","title":"View binding with include layout not working","body":"<p>in my case I was including a layout from another module and was not able to access the inner views in the included layout via binding and the problem was that I was not enabling the viewBinding in the module that contains the xml file that I wanted to include so adding</p>\n<pre><code>buildFeatures {\n        viewBinding true\n    }\n</code></pre>\n<p>to the <code>gradle.build</code> of that module fixed it for me!</p>\n"}],"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6348,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":63108101,"answer_count":3,"score":5,"last_activity_date":1700036443,"creation_date":1594701658,"question_id":62888211,"body_markdown":"I want to use view binding to bind the view in include layout. I had given the included layout with an id &#39;topBar&#39; but still failed to access the views inside of it. And I try to use Android studio auto-fix to create a local variable to see its type. It shows type &quot;android.widget . a&quot;\r\nI am using Android Studio4.0. Is this a bug in Android Studio?\r\n\r\nMy Activity\r\n```\r\n    private ActivityWalletBinding viewBinding;\r\n    private ViewTitleBinding topBarBinding;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        viewBinding = ActivityWalletBinding.inflate(getLayoutInflater());\r\n        setContentView(viewBinding.getRoot());\r\n        viewBinding.topBar;\r\n        android.widget . a = viewBinding.topBar; //Create local var using auto fix in android \r\nstudio \r\n}\r\n```\r\n\r\n\r\nactivity_wallet.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    &gt;\r\n\r\n    &lt;include\r\n        android:id=&quot;@+id/topBar&quot;\r\n        layout=&quot;@layout/view_title&quot;/&gt;\r\n```\r\n\r\n\r\nview_title.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;65dp&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:background=&quot;@color/white&quot;\r\n    android:paddingTop=&quot;19dp&quot;\r\n    android:id=&quot;@+id/fl_tab&quot;&gt;\r\n    &lt;RelativeLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        &gt;\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/btn_back&quot;\r\n            android:layout_width=&quot;39dp&quot;\r\n            android:layout_height=&quot;39dp&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            android:onClick=&quot;backClick&quot;\r\n            android:padding=&quot;11dp&quot;\r\n            android:src=&quot;@mipmap/icon_back&quot;\r\n            android:tint=&quot;@color/gray1&quot;\r\n            /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/titleView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:textColor=&quot;@color/textColor&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/tv_right_title&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:layout_alignParentRight=&quot;true&quot;\r\n            android:layout_marginRight=&quot;11dp&quot;\r\n            android:textColor=&quot;@color/enable_right_title&quot;\r\n            android:textSize=&quot;15sp&quot;\r\n            tools:text=&quot;åæå­&quot;\r\n            /&gt;\r\n    &lt;/RelativeLayout&gt;\r\n&lt;/FrameLayout&gt;\r\n```\r\n\r\n\r\n\r\nIs this a bug for android studio or something?","title":"View binding with include layout not working","body":"<p>I want to use view binding to bind the view in include layout. I had given the included layout with an id 'topBar' but still failed to access the views inside of it. And I try to use Android studio auto-fix to create a local variable to see its type. It shows type &quot;android.widget . a&quot;\nI am using Android Studio4.0. Is this a bug in Android Studio?</p>\n<p>My Activity</p>\n<pre><code>    private ActivityWalletBinding viewBinding;\n    private ViewTitleBinding topBarBinding;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        viewBinding = ActivityWalletBinding.inflate(getLayoutInflater());\n        setContentView(viewBinding.getRoot());\n        viewBinding.topBar;\n        android.widget . a = viewBinding.topBar; //Create local var using auto fix in android \nstudio \n}\n</code></pre>\n<p>activity_wallet.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    &gt;\n\n    &lt;include\n        android:id=&quot;@+id/topBar&quot;\n        layout=&quot;@layout/view_title&quot;/&gt;\n</code></pre>\n<p>view_title.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;65dp&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:background=&quot;@color/white&quot;\n    android:paddingTop=&quot;19dp&quot;\n    android:id=&quot;@+id/fl_tab&quot;&gt;\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        &gt;\n        &lt;ImageView\n            android:id=&quot;@+id/btn_back&quot;\n            android:layout_width=&quot;39dp&quot;\n            android:layout_height=&quot;39dp&quot;\n            android:layout_centerVertical=&quot;true&quot;\n            android:onClick=&quot;backClick&quot;\n            android:padding=&quot;11dp&quot;\n            android:src=&quot;@mipmap/icon_back&quot;\n            android:tint=&quot;@color/gray1&quot;\n            /&gt;\n        &lt;TextView\n            android:id=&quot;@+id/titleView&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:gravity=&quot;center&quot;\n            android:textColor=&quot;@color/textColor&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textStyle=&quot;bold&quot;\n            /&gt;\n        &lt;TextView\n            android:id=&quot;@+id/tv_right_title&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:gravity=&quot;center&quot;\n            android:layout_alignParentRight=&quot;true&quot;\n            android:layout_marginRight=&quot;11dp&quot;\n            android:textColor=&quot;@color/enable_right_title&quot;\n            android:textSize=&quot;15sp&quot;\n            tools:text=&quot;åæå­&quot;\n            /&gt;\n    &lt;/RelativeLayout&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>Is this a bug for android studio or something?</p>\n"},{"tags":["java","eclipse-plugin","eclipse-rcp","rcp"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1700037453,"post_id":77486084,"comment_id":136604440,"body_markdown":"The translation packages are not complete, and this is because there a many companies that build Eclipse-based applications consuming language packages but do not contribute to them. In the early days of Eclipse, there were complete language packages donated by IBM. But that was years ago. With the [pseudo translations](https://download.eclipse.org/technology/babel/babel_language_packs/latest/index.php#en_AA) language packs you can find out whether the string has be externalized and if so, the keys of the strings.","body":"The translation packages are not complete, and this is because there a many companies that build Eclipse-based applications consuming language packages but do not contribute to them. In the early days of Eclipse, there were complete language packages donated by IBM. But that was years ago. With the <a href=\"https://download.eclipse.org/technology/babel/babel_language_packs/latest/index.php#en_AA\" rel=\"nofollow noreferrer\">pseudo translations</a> language packs you can find out whether the string has be externalized and if so, the keys of the strings."},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1700038399,"post_id":77486084,"comment_id":136604609,"body_markdown":"I don&#39;t think this is the problem. I checked for the org.eclipse.ui.edit.delete command and it&#39;s available in the german translation of babel. Important: In 99% of all &quot;runs&quot; the client shows the correct labels in german. But in 1% they are missing (or not used).","body":"I don&#39;t think this is the problem. I checked for the org.eclipse.ui.edit.delete command and it&#39;s available in the german translation of babel. Important: In 99% of all &quot;runs&quot; the client shows the correct labels in german. But in 1% they are missing (or not used)."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1700039719,"post_id":77486084,"comment_id":136604827,"body_markdown":"Use the pseudo translations language pack to track it down. Is this reproducible in the Eclipse SDK? You might have code that sets the language programmatically (when it happens, check whether _Window &gt; New Window_ is also affected).","body":"Use the pseudo translations language pack to track it down. Is this reproducible in the Eclipse SDK? You might have code that sets the language programmatically (when it happens, check whether <i>Window &gt; New Window</i> is also affected)."},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1700472456,"post_id":77486084,"comment_id":136654334,"body_markdown":"No it&#39;s not reproducible. The translation is clearly there. But for some reason it is not always used.","body":"No it&#39;s not reproducible. The translation is clearly there. But for some reason it is not always used."}],"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700036413,"creation_date":1700035670,"question_id":77486084,"body_markdown":"Our RCP client application has german and french translations. For all the standard commands like Delete or Cancel we include the org.eclipse.babel. Most of the time this works fine and delete menu items or cancel buttons are translated to german or french.\r\n\r\nBut sometimes we see this standard labels in english, while all our own translations are shown in the correct language.\r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][1]][1]\r\n\r\nWe did not find any rule why this happens. We see this behaviour occasionaly on different plattforms: when we start the product in eclispe for debugging, standalone on windows, on jenkins (for automated gui tests) or even when the client is used from citrix.\r\n\r\nWe have a target plattform definition which includes:\r\n\r\n    &lt;location includeAllPlatforms=&quot;false&quot; includeConfigurePhase=&quot;true&quot; includeMode=&quot;planner&quot; includeSource=&quot;true&quot; type=&quot;InstallableUnit&quot;&gt;\r\n        &lt;repository location=&quot;https://download.eclipse.org/technology/babel/update-site/R0.20.0/2022-12/&quot;/&gt;\r\n        &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_de.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\r\n        &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_fr.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\r\n        &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_it.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\r\n    &lt;/location&gt;\r\n\r\nWe define a menu entry with the standard delete command in the plugin.xml like this:\r\n\r\n    &lt;command commandId=&quot;org.eclipse.ui.edit.delete&quot;&gt;\r\n    \t&lt;visibleWhen checkEnabled=&quot;true&quot;&gt;\r\n    \t\t&lt;and&gt;\r\n    \t\t\t&lt;with variable=&quot;AuftragRW&quot;&gt;\r\n    \t\t\t\t&lt;equals value=&quot;AuftragRW&quot;/&gt;\r\n    \t\t\t&lt;/with&gt;\r\n    \t\t&lt;/and&gt;\r\n    \t&lt;/visibleWhen&gt;\r\n    &lt;/command&gt;\r\n\r\nWe use the -nl switch up on start-up to set the language\r\n\r\n    -nl de_CH\r\n\r\nFor good measure we also set some more VM Arguments\r\n\r\n    -Duser.country=CH\r\n    -Duser.language=de\r\n    -Dosgi.nl=de_CH\r\n\r\nOur own translations are located in the standar folder of every bundle\r\n\r\n    OSGI-INF\r\n    âââ l10n\r\n        âââ bundle.properties (german translations)\r\n        âââ bundle_fr.properties\r\n        âââ bundle_it.properties    \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jTLEx.png\r\n  [2]: https://i.stack.imgur.com/MNGHp.png\r\n\r\n\r\nAny idea why this happens?","title":"org.eclipse.babel labels displayed in the wrong language","body":"<p>Our RCP client application has german and french translations. For all the standard commands like Delete or Cancel we include the org.eclipse.babel. Most of the time this works fine and delete menu items or cancel buttons are translated to german or french.</p>\n<p>But sometimes we see this standard labels in english, while all our own translations are shown in the correct language.</p>\n<p><a href=\"https://i.stack.imgur.com/MNGHp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MNGHp.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/jTLEx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jTLEx.png\" alt=\"enter image description here\" /></a></p>\n<p>We did not find any rule why this happens. We see this behaviour occasionaly on different plattforms: when we start the product in eclispe for debugging, standalone on windows, on jenkins (for automated gui tests) or even when the client is used from citrix.</p>\n<p>We have a target plattform definition which includes:</p>\n<pre><code>&lt;location includeAllPlatforms=&quot;false&quot; includeConfigurePhase=&quot;true&quot; includeMode=&quot;planner&quot; includeSource=&quot;true&quot; type=&quot;InstallableUnit&quot;&gt;\n    &lt;repository location=&quot;https://download.eclipse.org/technology/babel/update-site/R0.20.0/2022-12/&quot;/&gt;\n    &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_de.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\n    &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_fr.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\n    &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_it.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\n&lt;/location&gt;\n</code></pre>\n<p>We define a menu entry with the standard delete command in the plugin.xml like this:</p>\n<pre><code>&lt;command commandId=&quot;org.eclipse.ui.edit.delete&quot;&gt;\n    &lt;visibleWhen checkEnabled=&quot;true&quot;&gt;\n        &lt;and&gt;\n            &lt;with variable=&quot;AuftragRW&quot;&gt;\n                &lt;equals value=&quot;AuftragRW&quot;/&gt;\n            &lt;/with&gt;\n        &lt;/and&gt;\n    &lt;/visibleWhen&gt;\n&lt;/command&gt;\n</code></pre>\n<p>We use the -nl switch up on start-up to set the language</p>\n<pre><code>-nl de_CH\n</code></pre>\n<p>For good measure we also set some more VM Arguments</p>\n<pre><code>-Duser.country=CH\n-Duser.language=de\n-Dosgi.nl=de_CH\n</code></pre>\n<p>Our own translations are located in the standar folder of every bundle</p>\n<pre><code>OSGI-INF\nâââ l10n\n    âââ bundle.properties (german translations)\n    âââ bundle_fr.properties\n    âââ bundle_it.properties    \n</code></pre>\n<p>Any idea why this happens?</p>\n"},{"tags":["java","jpackage"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1668865627,"post_id":74498307,"comment_id":131512450,"body_markdown":"Are `light` and `candle` not included in `wix 4`? They have to be on the PATH I think for `jpackage` to find them.","body":"Are <code>light</code> and <code>candle</code> not included in <code>wix 4</code>? They have to be on the PATH I think for <code>jpackage</code> to find them."},{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":0,"creation_date":1668870319,"post_id":74498307,"comment_id":131513438,"body_markdown":"@JornVernee, Yes, in `wix 4` the two tools, `light.exe` and `candle.exe` are replaced by a common one named `wix.exe`. The new `wix.exe` tool has an option to convert projects from `wix 3` to `wix 4` which gives a chance to manually migrate a package already generated by `jpakager` with `wix 3` (as long as its temp files are available). But I don&#39;t know if the effort is worth it. I find it easier to generate the app-image with `jpakager` (or if I use my launcher with `jlink`) and do the installer with `inno setup` (due to fewer dependencies).","body":"@JornVernee, Yes, in <code>wix 4</code> the two tools, <code>light.exe</code> and <code>candle.exe</code> are replaced by a common one named <code>wix.exe</code>. The new <code>wix.exe</code> tool has an option to convert projects from <code>wix 3</code> to <code>wix 4</code> which gives a chance to manually migrate a package already generated by <code>jpakager</code> with <code>wix 3</code> (as long as its temp files are available). But I don&#39;t know if the effort is worth it. I find it easier to generate the app-image with <code>jpakager</code> (or if I use my launcher with <code>jlink</code>) and do the installer with <code>inno setup</code> (due to fewer dependencies)."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1679987295,"post_id":74498307,"comment_id":133814801,"body_markdown":"Did you learn anything more about this? Is there an enhancement request to support Wix 4 (I couldn&#39;t find any)?","body":"Did you learn anything more about this? Is there an enhancement request to support Wix 4 (I couldn&#39;t find any)?"},{"owner":{"account_id":1480323,"reputation":273,"user_id":1389877,"accept_rate":0,"display_name":"Michael Ellis"},"score":1,"creation_date":1688998061,"post_id":74498307,"comment_id":135146908,"body_markdown":"Just to add I have the identical problem. I am using jpackage version: 17.0.7 the version of jpackage that sipped with my GraalVM v17. Is jpackage that ships with  GraalVM v20, Wix 4 compatible?","body":"Just to add I have the identical problem. I am using jpackage version: 17.0.7 the version of jpackage that sipped with my GraalVM v17. Is jpackage that ships with  GraalVM v20, Wix 4 compatible?"},{"owner":{"account_id":18506166,"reputation":147,"user_id":13482411,"display_name":"joakie"},"score":0,"creation_date":1694770089,"post_id":74498307,"comment_id":135937842,"body_markdown":"I ran into this issue as well. I reluctantly downloaded .Net 3.5.1 and WiX 3. Managed to produce an installer but it wouldnât run. Iâm not gonna investigate further because it all seems like a suboptimal solution until WiX 4 is supported. To avoid ambiguity they should anyway change the requirements to something like âWiX (&gt;3.0 &amp;&amp; &lt;4.0) is requiredâ.","body":"I ran into this issue as well. I reluctantly downloaded .Net 3.5.1 and WiX 3. Managed to produce an installer but it wouldnât run. Iâm not gonna investigate further because it all seems like a suboptimal solution until WiX 4 is supported. To avoid ambiguity they should anyway change the requirements to something like âWiX (&gt;3.0 &amp;&amp; &lt;4.0) is requiredâ."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1699294852,"post_id":74498307,"comment_id":136511098,"body_markdown":"There&#39;s now an enhancement request to support WiX v4: [JDK-8319457](https://bugs.openjdk.org/browse/JDK-8319457). We&#39;ll see if something comes of it.","body":"There&#39;s now an enhancement request to support WiX v4: <a href=\"https://bugs.openjdk.org/browse/JDK-8319457\" rel=\"nofollow noreferrer\">JDK-8319457</a>. We&#39;ll see if something comes of it."}],"answers":[{"tags":[],"owner":{"account_id":3177795,"reputation":1503,"user_id":2685239,"display_name":"mariusm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700036288,"creation_date":1699613758,"answer_id":77459463,"question_id":74498307,"body_markdown":"Workaround using `wix-3` (no need to mess with dotnet):\r\n\r\n1. Download `wix311-binaries.zip` from [WiX Toolset v3 releases](https://github.com/wixtoolset/wix3/releases)\r\n2. Unpack the archive into `wix3` folder\r\n3. Add the `wix3` folder to `PATH` environment variable\r\n4. Restart your terminal for the PATH setting to take effect\r\n5. Try `jpackage` again","title":"Use jpackage with WiX 4","body":"<p>Workaround using <code>wix-3</code> (no need to mess with dotnet):</p>\n<ol>\n<li>Download <code>wix311-binaries.zip</code> from <a href=\"https://github.com/wixtoolset/wix3/releases\" rel=\"nofollow noreferrer\">WiX Toolset v3 releases</a></li>\n<li>Unpack the archive into <code>wix3</code> folder</li>\n<li>Add the <code>wix3</code> folder to <code>PATH</code> environment variable</li>\n<li>Restart your terminal for the PATH setting to take effect</li>\n<li>Try <code>jpackage</code> again</li>\n</ol>\n"}],"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":997,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"answer_count":1,"score":12,"last_activity_date":1700036288,"creation_date":1668843782,"question_id":74498307,"body_markdown":"I am trying to package an application with `jpackage` for Windows. I am using `Java 19` and `WiX 4`.\r\n\r\n    Package Id      Version              Commands\r\n    ---------------------------------------------\r\n    wix             4.0.0-preview.1      wix\r\n\r\n&lt;!-- --&gt;\r\n\r\n    java 19.0.1 2022-10-18\r\n    Java(TM) SE Runtime Environment (build 19.0.1+10-21)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\r\n\r\nAccording to the `Packaging Tool User&#39;s Guide`, the requirements for generating an installation package for windows are:\r\n&gt; WiX 3.0 or later is required.\r\n\r\nHowever, when trying to generate a package I get an error:\r\n\r\n    [09:26:34.026] Can not find WiX tools (light.exe, candle.exe)\r\n    [09:26:34.026] Download WiX 3.0 or later from https://wixtoolset.org and add it to the PATH.\r\n\r\nThe very nature of the problem is clear. `jpackage` does not support `WiX 4`, although it is not written anywhere in plain text.\r\n\r\nThe solution is also clear, I install `WiX 3`. However, here comes the &quot;problem&quot;. `WiX 3` requires an old version of .Net (3.5.1) or at least &quot;Windows features .Net 3.5.1&quot;. However, this is what I want to avoid.\r\n\r\nMy question is, as of today, is there a way to directly use `WiX 4` with `jpackage`?","title":"Use jpackage with WiX 4","body":"<p>I am trying to package an application with <code>jpackage</code> for Windows. I am using <code>Java 19</code> and <code>WiX 4</code>.</p>\n<pre><code>Package Id      Version              Commands\n---------------------------------------------\nwix             4.0.0-preview.1      wix\n</code></pre>\n\n<pre><code>java 19.0.1 2022-10-18\nJava(TM) SE Runtime Environment (build 19.0.1+10-21)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\n</code></pre>\n<p>According to the <code>Packaging Tool User's Guide</code>, the requirements for generating an installation package for windows are:</p>\n<blockquote>\n<p>WiX 3.0 or later is required.</p>\n</blockquote>\n<p>However, when trying to generate a package I get an error:</p>\n<pre><code>[09:26:34.026] Can not find WiX tools (light.exe, candle.exe)\n[09:26:34.026] Download WiX 3.0 or later from https://wixtoolset.org and add it to the PATH.\n</code></pre>\n<p>The very nature of the problem is clear. <code>jpackage</code> does not support <code>WiX 4</code>, although it is not written anywhere in plain text.</p>\n<p>The solution is also clear, I install <code>WiX 3</code>. However, here comes the &quot;problem&quot;. <code>WiX 3</code> requires an old version of .Net (3.5.1) or at least &quot;Windows features .Net 3.5.1&quot;. However, this is what I want to avoid.</p>\n<p>My question is, as of today, is there a way to directly use <code>WiX 4</code> with <code>jpackage</code>?</p>\n"},{"tags":["java","sql","kotlin","generics","jooq"],"answers":[{"comments":[{"owner":{"account_id":29906194,"reputation":3,"user_id":22918638,"display_name":"Chris"},"score":0,"creation_date":1700062898,"post_id":77486127,"comment_id":136609165,"body_markdown":"Thanks for the reply! I am already using the Jooq generator to generate my table classeses, fields, etc. For example, `TAG_ID` above is `TableField&lt;TagV2Record, String?&gt;` from `createField(DSL.name(&quot;tag_id&quot;), SQLDataType.CLOB.nullable(false), this, &quot;&quot;)`in the generated table class.\n\nMaybe I should have been clearer before: What I need to do is accept string identifiers like &quot;tag_id&quot; from an API and be able to **look up** the corresponding TableField to use dynamically in a WHERE clause. This is the reason for the the String to TableField Map lookup. Is there a typesafe Kotlin way to do this?","body":"Thanks for the reply! I am already using the Jooq generator to generate my table classeses, fields, etc. For example, <code>TAG_ID</code> above is <code>TableField&lt;TagV2Record, String?&gt;</code> from <code>createField(DSL.name(&quot;tag_id&quot;), SQLDataType.CLOB.nullable(false), this, &quot;&quot;)</code>in the generated table class.  Maybe I should have been clearer before: What I need to do is accept string identifiers like &quot;tag_id&quot; from an API and be able to <b>look up</b> the corresponding TableField to use dynamically in a WHERE clause. This is the reason for the the String to TableField Map lookup. Is there a typesafe Kotlin way to do this?"},{"owner":{"account_id":29906194,"reputation":3,"user_id":22918638,"display_name":"Chris"},"score":0,"creation_date":1700065434,"post_id":77486127,"comment_id":136609647,"body_markdown":"I was able to use an unchecked cast to get it to work. I did this: `(API_STRING_TO_JOOQ_FIELD_MAP[it.fieldName]!! as Field&lt;Any&gt;).eq(it.value)`. The compiler warns: `Unchecked cast: TableField&lt;out UpdatableRecordImpl&lt;*&gt;, *&gt; to Field&lt;Any&gt;`. I am unsure if there is a better way to do this (open to any ideas). A friend of mine told me to read https://youtrack.jetbrains.com/issue/KT-41062/Allow-Java-classes-to-specify-declaration-site-variance for more background. I have yet to digest it, but it is a Kotlin feature request so won&#39;t address this issue.","body":"I was able to use an unchecked cast to get it to work. I did this: <code>(API_STRING_TO_JOOQ_FIELD_MAP[it.fieldName]!! as Field&lt;Any&gt;).eq(it.value)</code>. The compiler warns: <code>Unchecked cast: TableField&lt;out UpdatableRecordImpl&lt;*&gt;, *&gt; to Field&lt;Any&gt;</code>. I am unsure if there is a better way to do this (open to any ideas). A friend of mine told me to read <a href=\"https://youtrack.jetbrains.com/issue/KT-41062/Allow-Java-classes-to-specify-declaration-site-variance\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-41062/&hellip;</a> for more background. I have yet to digest it, but it is a Kotlin feature request so won&#39;t address this issue."}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700036198,"creation_date":1700036198,"answer_id":77486127,"question_id":77485541,"body_markdown":"### Solving the type safety problem\r\n\r\n[Kotlin doesn&#39;t have the equivalent of Java&#39;s rawtypes][1], but you can always unsafe cast like this:\r\n\r\n```kotlin\r\n.and((idField as Field&lt;String&gt;).eq(&quot;myId&quot;))\r\n.and((createTimeField as Field&lt;Instant&gt;).lt(Instant.ofEpochMilli(123456)))\r\n```\r\n\r\nOr, rather than using a simple map, you write a more sophisticated utility (wrapping a map) that takes care of the typing.\r\n\r\n### Alternative approach to your *actual* problem\r\n\r\nYour actual problem seems to be having reusable columns across your schema. You could declare an interface returning those columns from any table and let generated tables extend this interface using a [generator strategy][2] or a [matcher strategy][3].\r\n\r\nE.g.\r\n\r\n```kotlin\r\ninterface MyJooqTable&lt;R : Record&gt; : Table&lt;R&gt; {\r\n    fun tagId(): Field&lt;String&gt; = field(&quot;tag_id&quot;, SQLDataType.STRING)\r\n    fun createdDate(): Field&lt;Instant&gt; = field(&quot;CREATED_DATE&quot;, SQLDataType.INSTANT)\r\n}\r\n```\r\n\r\nNow you can pass around `MyJooqTable` references to your utilities and type safely dereference your columns from it, assuming the columns exist.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/46828680/521799\r\n  [2]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-generatorstrategy/\r\n  [3]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-matcherstrategy/","title":"How can I use Jooq to create a dynamic Condition generator using Kotlin based on included working Java code?","body":"<h3>Solving the type safety problem</h3>\n<p><a href=\"https://stackoverflow.com/q/46828680/521799\">Kotlin doesn't have the equivalent of Java's rawtypes</a>, but you can always unsafe cast like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>.and((idField as Field&lt;String&gt;).eq(&quot;myId&quot;))\n.and((createTimeField as Field&lt;Instant&gt;).lt(Instant.ofEpochMilli(123456)))\n</code></pre>\n<p>Or, rather than using a simple map, you write a more sophisticated utility (wrapping a map) that takes care of the typing.</p>\n<h3>Alternative approach to your <em>actual</em> problem</h3>\n<p>Your actual problem seems to be having reusable columns across your schema. You could declare an interface returning those columns from any table and let generated tables extend this interface using a <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-generatorstrategy/\" rel=\"nofollow noreferrer\">generator strategy</a> or a <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-matcherstrategy/\" rel=\"nofollow noreferrer\">matcher strategy</a>.</p>\n<p>E.g.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface MyJooqTable&lt;R : Record&gt; : Table&lt;R&gt; {\n    fun tagId(): Field&lt;String&gt; = field(&quot;tag_id&quot;, SQLDataType.STRING)\n    fun createdDate(): Field&lt;Instant&gt; = field(&quot;CREATED_DATE&quot;, SQLDataType.INSTANT)\n}\n</code></pre>\n<p>Now you can pass around <code>MyJooqTable</code> references to your utilities and type safely dereference your columns from it, assuming the columns exist.</p>\n"}],"owner":{"account_id":29906194,"reputation":3,"user_id":22918638,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77486127,"answer_count":1,"score":0,"last_activity_date":1700036198,"creation_date":1700027800,"question_id":77485541,"body_markdown":"I would like to use Jooq with the Kotlin language to create a way to dynamically generate Jooq Condition objects.\r\n\r\nI want to put Jooq Field objects in a Kotlin Map from String to TableField (a Jooq class). I want to pull values from this map and use them to build the Condition object.\r\n\r\n\r\nI have a simple proof of concept of this working with Java that I coded in the form of a unit test. That code looks like this (omitted the imports and class, but this is the idea.\r\n\r\n\r\n```\r\n    private static final Map&lt;String, TableField&gt; FIELDS = Map.of(\r\n            &quot;tagId&quot;, TagV2Table.Companion.getTAG_V2().getTAG_ID(),\r\n            &quot;createdDate&quot;, ApplicationTable.Companion.getAPPLICATION().getCREATED_DATE()\r\n    );\r\n\r\n    @Test\r\n    void testDynamicGeneration() {\r\n        TableField idField = FIELDS.get(&quot;tagId&quot;);\r\n        TableField createTimeField = FIELDS.get(&quot;createdDate&quot;);\r\n\r\n        final Condition condition = noCondition()\r\n                .and(idField.eq(&quot;myId&quot;))\r\n                .and(createTimeField.lt(Instant.ofEpochMilli(123456)));\r\n\r\n        final String expected = &quot;(\\n&quot; +\r\n                &quot;  \\&quot;public\\&quot;.\\&quot;tag_v2\\&quot;.\\&quot;tag_id\\&quot; = &#39;myId&#39;\\n&quot; +\r\n                &quot;  and \\&quot;public\\&quot;.\\&quot;application\\&quot;.\\&quot;created_date\\&quot; &lt; timestamp with time zone &#39;1970-01-01 00:02:03.456+00:00&#39;\\n&quot; +\r\n                &quot;)&quot;;\r\n        assertEquals(expected, condition.toString());\r\n\r\n```\r\n\r\nThe condition that gets created is what is in &quot;expected&quot;, which is what I want.\r\n\r\nIf I try and translate the same code into Kotlin, I get compilation errors, which I am pretty sure is due to the &quot;out&quot; on the Map. But I don&#39;t know enough to know how to fix it. This is the equivalent Kotlin code I wrote:\r\n\r\n```\r\n    private companion object {\r\n        // The IntelliJ inferred type is:\r\n        //  Map&lt;String, TableField&lt;out UpdatableRecordImpl&lt;*&gt;, out Any?&gt;&gt;\r\n        // AFAICT, the &quot;out&quot; of &quot;out Any?&quot; is making the &quot;.eq&quot; and &quot;.lt&quot; functions unavailable\r\n        // because it&#39;s unsafe.\r\n        val fields = mapOf(\r\n            &quot;tagId&quot; to TAG_V2.TAG_ID,\r\n            &quot;createdDate&quot; to APPLICATION.CREATED_DATE,\r\n        )\r\n    }\r\n\r\n    @Test\r\n    fun testDynamicGenerationKotlin() {\r\n        val idField = fields[&quot;tagId&quot;]\r\n        val createTimeField = fields[&quot;createdDate&quot;]\r\n\r\n        val condition = noCondition()\r\n            // .eq and .lt &quot;None of the following functions can be called with the arguments supplied&quot;\r\n            // and the accepted arguments are all Nothing\r\n            .and(idField.eq(&quot;myId&quot;))\r\n            .and(createTimeField.lt(Instant.ofEpochMilli(123456)))\r\n    }\r\n```\r\n\r\nThe issue is that the functions `.eq(...)` and `.lt(...)` are not available on the objects `idField` and `createTimeField` that get pulled out of the Map.\r\n\r\nIs there a way for me to declare this Map such that the Kotlin code will work (like the Java code does)?","title":"How can I use Jooq to create a dynamic Condition generator using Kotlin based on included working Java code?","body":"<p>I would like to use Jooq with the Kotlin language to create a way to dynamically generate Jooq Condition objects.</p>\n<p>I want to put Jooq Field objects in a Kotlin Map from String to TableField (a Jooq class). I want to pull values from this map and use them to build the Condition object.</p>\n<p>I have a simple proof of concept of this working with Java that I coded in the form of a unit test. That code looks like this (omitted the imports and class, but this is the idea.</p>\n<pre><code>    private static final Map&lt;String, TableField&gt; FIELDS = Map.of(\n            &quot;tagId&quot;, TagV2Table.Companion.getTAG_V2().getTAG_ID(),\n            &quot;createdDate&quot;, ApplicationTable.Companion.getAPPLICATION().getCREATED_DATE()\n    );\n\n    @Test\n    void testDynamicGeneration() {\n        TableField idField = FIELDS.get(&quot;tagId&quot;);\n        TableField createTimeField = FIELDS.get(&quot;createdDate&quot;);\n\n        final Condition condition = noCondition()\n                .and(idField.eq(&quot;myId&quot;))\n                .and(createTimeField.lt(Instant.ofEpochMilli(123456)));\n\n        final String expected = &quot;(\\n&quot; +\n                &quot;  \\&quot;public\\&quot;.\\&quot;tag_v2\\&quot;.\\&quot;tag_id\\&quot; = 'myId'\\n&quot; +\n                &quot;  and \\&quot;public\\&quot;.\\&quot;application\\&quot;.\\&quot;created_date\\&quot; &lt; timestamp with time zone '1970-01-01 00:02:03.456+00:00'\\n&quot; +\n                &quot;)&quot;;\n        assertEquals(expected, condition.toString());\n\n</code></pre>\n<p>The condition that gets created is what is in &quot;expected&quot;, which is what I want.</p>\n<p>If I try and translate the same code into Kotlin, I get compilation errors, which I am pretty sure is due to the &quot;out&quot; on the Map. But I don't know enough to know how to fix it. This is the equivalent Kotlin code I wrote:</p>\n<pre><code>    private companion object {\n        // The IntelliJ inferred type is:\n        //  Map&lt;String, TableField&lt;out UpdatableRecordImpl&lt;*&gt;, out Any?&gt;&gt;\n        // AFAICT, the &quot;out&quot; of &quot;out Any?&quot; is making the &quot;.eq&quot; and &quot;.lt&quot; functions unavailable\n        // because it's unsafe.\n        val fields = mapOf(\n            &quot;tagId&quot; to TAG_V2.TAG_ID,\n            &quot;createdDate&quot; to APPLICATION.CREATED_DATE,\n        )\n    }\n\n    @Test\n    fun testDynamicGenerationKotlin() {\n        val idField = fields[&quot;tagId&quot;]\n        val createTimeField = fields[&quot;createdDate&quot;]\n\n        val condition = noCondition()\n            // .eq and .lt &quot;None of the following functions can be called with the arguments supplied&quot;\n            // and the accepted arguments are all Nothing\n            .and(idField.eq(&quot;myId&quot;))\n            .and(createTimeField.lt(Instant.ofEpochMilli(123456)))\n    }\n</code></pre>\n<p>The issue is that the functions <code>.eq(...)</code> and <code>.lt(...)</code> are not available on the objects <code>idField</code> and <code>createTimeField</code> that get pulled out of the Map.</p>\n<p>Is there a way for me to declare this Map such that the Kotlin code will work (like the Java code does)?</p>\n"},{"tags":["java","android","default","kiosk"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1700049729,"post_id":77486118,"comment_id":136606559,"body_markdown":"&quot;when click button1 I want to set my app as the home default app by changing the phone settings&quot; -- that is not an option.","body":"&quot;when click button1 I want to set my app as the home default app by changing the phone settings&quot; -- that is not an option."},{"owner":{"account_id":25454249,"reputation":1,"user_id":19255160,"display_name":"Nayani Madhusanki"},"score":0,"creation_date":1700720847,"post_id":77486118,"comment_id":136689604,"body_markdown":"Is there another way to do it programatically","body":"Is there another way to do it programatically"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1700743126,"post_id":77486118,"comment_id":136693461,"body_markdown":"You cannot force your app to be the home default app. The user needs to do this, for obvious security reasons.","body":"You cannot force your app to be the home default app. The user needs to do this, for obvious security reasons."},{"owner":{"account_id":25454249,"reputation":1,"user_id":19255160,"display_name":"Nayani Madhusanki"},"score":0,"creation_date":1701331468,"post_id":77486118,"comment_id":136763037,"body_markdown":"I want to create this for only specific devices. and with user permissions.","body":"I want to create this for only specific devices. and with user permissions."},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1701346614,"post_id":77486118,"comment_id":136765642,"body_markdown":"In this case, &quot;user permissions&quot; means that you cannot &quot;set my app as the home default app by changing the phone settings&quot;. You can *offer* to be a launcher app, but whether you are the *default* launcher app is up to the user via system UI when they use HOME navigation.","body":"In this case, &quot;user permissions&quot; means that you cannot &quot;set my app as the home default app by changing the phone settings&quot;. You can <i>offer</i> to be a launcher app, but whether you are the <i>default</i> launcher app is up to the user via system UI when they use HOME navigation."}],"owner":{"account_id":25454249,"reputation":1,"user_id":19255160,"display_name":"Nayani Madhusanki"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700036103,"creation_date":1700036103,"question_id":77486118,"body_markdown":"`I want to create android app using java and when install app it add to home default app list automatically. And add two buttons. when click button1  I want to set my app as the home default app by changing the phone settings. and when click button2 I want to deselect my app from the list and set default phone app. But without root access\r\n\r\n**I added below code to Manifest XML file**\r\n\r\n    &lt;category android:name=&quot;android.intent.category.HOME&quot; /&gt;\r\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n\r\n**And added two buttons to main_activity.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/button1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Start&quot;\r\n            android:onClick=&quot;setPreferred&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.266&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/button2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Stop&quot;\r\n            android:onClick=&quot;clearPreferred&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.503&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/button1&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.143&quot; /&gt;\r\n\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n**And created two methods in MainActivity.java **\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n\r\n        private void setPreferred() {\r\n            PackageManager pm = getPackageManager();\r\n            IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\r\n            f.addCategory(&quot;android.intent.category.HOME&quot;);\r\n            f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\r\n            ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\r\n            pm.addPreferredActivity(f, IntentFilter.MATCH_CATEGORY_EMPTY, null, cn);\r\n        }\r\n\r\n        private void clearPreferred() {\r\n            PackageManager pm = getPackageManager();\r\n            IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\r\n            f.addCategory(&quot;android.intent.category.HOME&quot;);\r\n            f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\r\n            ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\r\n            pm.clearPackagePreferredActivities(&quot;com.rcs2.kiosktest&quot;);\r\n        }\r\n    }\r\n\r\nBut didn&#39;t worked as I need`","title":"How to set android app as home default and remove it programmatically","body":"<p>`I want to create android app using java and when install app it add to home default app list automatically. And add two buttons. when click button1  I want to set my app as the home default app by changing the phone settings. and when click button2 I want to deselect my app from the list and set default phone app. But without root access</p>\n<p><strong>I added below code to Manifest XML file</strong></p>\n<pre><code>&lt;category android:name=&quot;android.intent.category.HOME&quot; /&gt;\n&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n</code></pre>\n<p><strong>And added two buttons to main_activity.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button1&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Start&quot;\n        android:onClick=&quot;setPreferred&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.266&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Stop&quot;\n        android:onClick=&quot;clearPreferred&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.503&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/button1&quot;\n        app:layout_constraintVertical_bias=&quot;0.143&quot; /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>**And created two methods in MainActivity.java **</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    private void setPreferred() {\n        PackageManager pm = getPackageManager();\n        IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\n        f.addCategory(&quot;android.intent.category.HOME&quot;);\n        f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\n        ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\n        pm.addPreferredActivity(f, IntentFilter.MATCH_CATEGORY_EMPTY, null, cn);\n    }\n\n    private void clearPreferred() {\n        PackageManager pm = getPackageManager();\n        IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\n        f.addCategory(&quot;android.intent.category.HOME&quot;);\n        f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\n        ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\n        pm.clearPackagePreferredActivities(&quot;com.rcs2.kiosktest&quot;);\n    }\n}\n</code></pre>\n<p>But didn't worked as I need`</p>\n"},{"tags":["java","android","gradle"],"answers":[{"comments":[{"owner":{"account_id":26139520,"reputation":11,"user_id":19829096,"display_name":"Alxis Jeffery"},"score":0,"creation_date":1661267814,"post_id":73460222,"comment_id":129729113,"body_markdown":"still shows me this error : Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.","body":"still shows me this error : Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomM&zwnj;&#8203;essageMissingMethodE&zwnj;&#8203;xception: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension&zwnj;&#8203;."},{"owner":{"account_id":26139520,"reputation":11,"user_id":19829096,"display_name":"Alxis Jeffery"},"score":0,"creation_date":1661267944,"post_id":73460222,"comment_id":129729185,"body_markdown":"16:15\tGradle sync failed: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension. (1 m 49 s 506 ms)","body":"16:15\tGradle sync failed: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension&zwnj;&#8203;. (1 m 49 s 506 ms)"}],"tags":[],"owner":{"account_id":2918786,"reputation":637,"user_id":3576968,"display_name":"Daniel Schr&#246;der"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661263537,"creation_date":1661263537,"answer_id":73460222,"question_id":73459594,"body_markdown":"You&#39;re missing the `Version` part of the `compileSdkVersion`, `minSdkVersion` and `targetSdkVersion` variables.\r\n\r\nTry updating your `build.gradle` file to the following and see if it works.\r\n\r\n```groovy\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;25.0.3&quot;\r\n    defaultConfig {\r\n        applicationId &quot;Net.er.bate.accel&quot;\r\n        minSdkVersion 19\r\n        targetSdkVersion 31\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n```","title":"Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk()","body":"<p>You're missing the <code>Version</code> part of the <code>compileSdkVersion</code>, <code>minSdkVersion</code> and <code>targetSdkVersion</code> variables.</p>\n<p>Try updating your <code>build.gradle</code> file to the following and see if it works.</p>\n<pre><code>android {\n    compileSdkVersion 30\n    buildToolsVersion &quot;25.0.3&quot;\n    defaultConfig {\n        applicationId &quot;Net.er.bate.accel&quot;\n        minSdkVersion 19\n        targetSdkVersion 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"score":1,"creation_date":1686584638,"post_id":76455287,"comment_id":134815420,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76455287/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23592292,"reputation":1,"user_id":17629899,"display_name":"Md Jobayer Hossan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686773958,"creation_date":1686562293,"answer_id":76455287,"question_id":73459594,"body_markdown":"    android {\r\n        compileSdk 30\r\n        buildToolsVersion &quot;25.0.3&quot;\r\n        defaultConfig {\r\n            applicationId &quot;Net.er.bate.accel&quot;\r\n                minSdk 19\r\n            targetSdk 30\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }","title":"Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk()","body":"<pre><code>android {\n    compileSdk 30\n    buildToolsVersion &quot;25.0.3&quot;\n    defaultConfig {\n        applicationId &quot;Net.er.bate.accel&quot;\n            minSdk 19\n        targetSdk 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n</code></pre>\n"}],"owner":{"account_id":26139520,"reputation":11,"user_id":19829096,"display_name":"Alxis Jeffery"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11520,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700035560,"creation_date":1661261112,"question_id":73459594,"body_markdown":"Hello Guys i have this Problem Here with android studio , here is my sdk Installed : \r\n[my sdk installed except those 2][1]\r\n\r\n  [1]: https://i.stack.imgur.com/HgarG.jpg\r\n\r\nI got a problem like that :\r\n```\r\nCaused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\r\n```\r\n```\r\nGradle sync failed: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\r\n```\r\n```\r\nCaused by: java.lang.IllegalStateException: compileSdkVersion is not specified.\r\n```\r\n\r\n\r\nMy `build.gradle` file :\r\n\r\n```\r\nandroid {\r\n    compileSdk 30\r\n    buildToolsVersion &quot;25.0.3&quot;\r\n    defaultConfig {\r\n        applicationId &quot;Net.er.bate.accel&quot;\r\n            minSdk 19\r\n        targetSdk 31\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n```\r\n","title":"Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk()","body":"<p>Hello Guys i have this Problem Here with android studio , here is my sdk Installed :\n<a href=\"https://i.stack.imgur.com/HgarG.jpg\" rel=\"nofollow noreferrer\">my sdk installed except those 2</a></p>\n<p>I got a problem like that :</p>\n<pre><code>Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk() for arguments [30] on extension 'android' of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\n</code></pre>\n<pre><code>Gradle sync failed: Could not find method compileSdk() for arguments [30] on extension 'android' of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\n</code></pre>\n<pre><code>Caused by: java.lang.IllegalStateException: compileSdkVersion is not specified.\n</code></pre>\n<p>My <code>build.gradle</code> file :</p>\n<pre><code>android {\n    compileSdk 30\n    buildToolsVersion &quot;25.0.3&quot;\n    defaultConfig {\n        applicationId &quot;Net.er.bate.accel&quot;\n            minSdk 19\n        targetSdk 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n</code></pre>\n"},{"tags":["java","json","jackson-databind"],"comments":[{"owner":{"account_id":175636,"reputation":4009,"user_id":405793,"accept_rate":62,"display_name":"Benjamin Peter"},"score":0,"creation_date":1700036284,"post_id":77486062,"comment_id":136604267,"body_markdown":"You did not provide the mapping configuration of your classes like `SomeEnum` this makes it hard to know what is going on.But have you looked at the Annotations `@JsonIdentityReference` also mentioned here https://stackoverflow.com/a/38445604/405793","body":"You did not provide the mapping configuration of your classes like <code>SomeEnum</code> this makes it hard to know what is going on.But have you looked at the Annotations <code>@JsonIdentityReference</code> also mentioned here <a href=\"https://stackoverflow.com/a/38445604/405793\">stackoverflow.com/a/38445604/405793</a>"}],"owner":{"account_id":1689409,"reputation":1059,"user_id":1552080,"accept_rate":64,"display_name":"WolfiG"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700035425,"creation_date":1700035425,"question_id":77486062,"body_markdown":"**Summary/Question:**\r\nHow do you save and load complex data structures to/from JSON using jackson-databind ObjectMapper? In my case jackson fails to re-establish objects referenced by id in the JSON string.\r\n\r\n**Details:**\r\nI am saving data with the following structure via Jackson.databind to a JSON-formatted file:\r\n\r\n    class Container {\r\n\r\n         private HeaderClass header;\r\n         private List&lt;Class1&gt; class1Data;\r\n         private List&lt;Class2&gt; class2Data;\r\n    \r\n         public String generateJsonString() {\r\n             List&lt;Object&gt; outputWrapper = new ArrayList&lt;&gt;();\r\n             outputWrapper.add(header);\r\n             outputWrapper.add(class1Data);\r\n             outputWrapper.add(class2Data);\r\n\r\n             ObjectMapper mapper = new ObjectMapper();\r\n             SimpleModule module = new SimpleModule(&quot;Serializer/Deserializer module for DeviceAutomator configuration data&quot;) \r\n                .registerSubtypes(\r\n                        HeaderClass.class,\r\n                        Class1.class,\r\n                        Class2.class);\r\n             mapper.registerModule(module);\r\n             mapper.writeValueAsString(outputWrapper);    \r\n\r\n         }\r\n\r\n         ... public field accessors, other methods ...    \r\n\r\n    }\r\n\r\nthe classes Class1 and Class2 are children of an abstract class ParentClass looking like this:\r\n\r\n    abstract class ParentClass {\r\n         private String name;\r\n         List&lt;SomeEnum&gt; enumItemList;\r\n\r\n         ... getters and setters ...\r\n    }\r\n\r\nBesides this List&lt;SomeEnum&gt;, Class1 and Class2 do have a number of simple fields.\r\n\r\nNow, if I create a JSON String with ```generateJsonString()```, in principle everything works fine. However, the items in ```enumItemList``` are resolved into some more complicated structures. The output look like this:\r\n\r\n    [ {\r\n        &quot;headerField1&quot; : false,\r\n        &quot;headerField2&quot; : 1000.0,\r\n        ... some more header fields ...\r\n    }, [ { // List&lt;Class1&gt;.item1:\r\n        &quot;class1Field1&quot; : 2.2523,\r\n        ... more simple fields ...\r\n        &quot;enumItemList&quot; : [ {\r\n            &quot;@type&quot; : &quot;SomeEnum&quot;,\r\n            &quot;@id&quot; : &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;,\r\n            &quot;name&quot; : &quot;name1&quot;\r\n        }, {\r\n            &quot;@type&quot; : &quot;SomeEnum&quot;,\r\n            &quot;@id&quot; : &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;,\r\n            &quot;name&quot; : &quot;name2&quot;\r\n       }, \r\n       ... more list items ...\r\n    ]}, { // List&lt;Class1&gt;.item2:\r\n        &quot;class1Field1&quot; : 2.2523,\r\n        ... more simple fields ...\r\n        &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;, ... more ids from above ... ],\r\n    } ], [ { // List&lt;Class2&gt;.item1:\r\n        &quot;class2Field1&quot; : field1Value,\r\n        &quot;class2Field2&quot; : field2Value,\r\n        ... more fields ...,\r\n        &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, ... more ids ... ]\r\n    } ] ]\r\n\r\nIf I read this string back from file to reconstruct my data objects, the code fails to resolve the references ```&quot;enumItemList&quot;: [ id1, id2, ...]``` back to fully expanded objects but it works fine for the fully specified SomeEnum items.\r\n\r\nThis is how I process the Json String from file:\r\n\r\n    ObjectMapper jsonMapper = new ObjectMapper();\r\n    jsonMapper.enable(DeserializationFeature.UNWRAP_ROOT_VALUE);\r\n    jsonMapper.enable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE);\r\n    jsonMapper.registerModule(module); // module from above","title":"Problem with saving/loading/parsing JSON using Jackson.databind ObjectMapper","body":"<p><strong>Summary/Question:</strong>\nHow do you save and load complex data structures to/from JSON using jackson-databind ObjectMapper? In my case jackson fails to re-establish objects referenced by id in the JSON string.</p>\n<p><strong>Details:</strong>\nI am saving data with the following structure via Jackson.databind to a JSON-formatted file:</p>\n<pre><code>class Container {\n\n     private HeaderClass header;\n     private List&lt;Class1&gt; class1Data;\n     private List&lt;Class2&gt; class2Data;\n\n     public String generateJsonString() {\n         List&lt;Object&gt; outputWrapper = new ArrayList&lt;&gt;();\n         outputWrapper.add(header);\n         outputWrapper.add(class1Data);\n         outputWrapper.add(class2Data);\n\n         ObjectMapper mapper = new ObjectMapper();\n         SimpleModule module = new SimpleModule(&quot;Serializer/Deserializer module for DeviceAutomator configuration data&quot;) \n            .registerSubtypes(\n                    HeaderClass.class,\n                    Class1.class,\n                    Class2.class);\n         mapper.registerModule(module);\n         mapper.writeValueAsString(outputWrapper);    \n\n     }\n\n     ... public field accessors, other methods ...    \n\n}\n</code></pre>\n<p>the classes Class1 and Class2 are children of an abstract class ParentClass looking like this:</p>\n<pre><code>abstract class ParentClass {\n     private String name;\n     List&lt;SomeEnum&gt; enumItemList;\n\n     ... getters and setters ...\n}\n</code></pre>\n<p>Besides this List, Class1 and Class2 do have a number of simple fields.</p>\n<p>Now, if I create a JSON String with <code>generateJsonString()</code>, in principle everything works fine. However, the items in <code>enumItemList</code> are resolved into some more complicated structures. The output look like this:</p>\n<pre><code>[ {\n    &quot;headerField1&quot; : false,\n    &quot;headerField2&quot; : 1000.0,\n    ... some more header fields ...\n}, [ { // List&lt;Class1&gt;.item1:\n    &quot;class1Field1&quot; : 2.2523,\n    ... more simple fields ...\n    &quot;enumItemList&quot; : [ {\n        &quot;@type&quot; : &quot;SomeEnum&quot;,\n        &quot;@id&quot; : &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;,\n        &quot;name&quot; : &quot;name1&quot;\n    }, {\n        &quot;@type&quot; : &quot;SomeEnum&quot;,\n        &quot;@id&quot; : &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;,\n        &quot;name&quot; : &quot;name2&quot;\n   }, \n   ... more list items ...\n]}, { // List&lt;Class1&gt;.item2:\n    &quot;class1Field1&quot; : 2.2523,\n    ... more simple fields ...\n    &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;, ... more ids from above ... ],\n} ], [ { // List&lt;Class2&gt;.item1:\n    &quot;class2Field1&quot; : field1Value,\n    &quot;class2Field2&quot; : field2Value,\n    ... more fields ...,\n    &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, ... more ids ... ]\n} ] ]\n</code></pre>\n<p>If I read this string back from file to reconstruct my data objects, the code fails to resolve the references <code>&quot;enumItemList&quot;: [ id1, id2, ...]</code> back to fully expanded objects but it works fine for the fully specified SomeEnum items.</p>\n<p>This is how I process the Json String from file:</p>\n<pre><code>ObjectMapper jsonMapper = new ObjectMapper();\njsonMapper.enable(DeserializationFeature.UNWRAP_ROOT_VALUE);\njsonMapper.enable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE);\njsonMapper.registerModule(module); // module from above\n</code></pre>\n"},{"tags":["java","rest","apigee"],"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1701860237,"post_id":77460653,"comment_id":136826535,"body_markdown":"Did you manage to resolve this issue @Prudhvi?","body":"Did you manage to resolve this issue @Prudhvi?"}],"answers":[{"tags":[],"owner":{"account_id":5982778,"reputation":39,"user_id":4701193,"display_name":"cfhayes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699627744,"creation_date":1699627744,"answer_id":77460853,"question_id":77460653,"body_markdown":"Apigee often has policies in place to manage request and response sizes. There could be a policy configured to limit the size of the message you&#39;re trying to send. Check your Apigee API proxy configuration, specifically the policies applied to the request, and see if there&#39;s a size limit policy in place. ","title":"Getting Buffer overflow for API proxy","body":"<p>Apigee often has policies in place to manage request and response sizes. There could be a policy configured to limit the size of the message you're trying to send. Check your Apigee API proxy configuration, specifically the policies applied to the request, and see if there's a size limit policy in place.</p>\n"},{"tags":[],"owner":{"account_id":12416415,"reputation":256,"user_id":9045679,"display_name":"jarus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700035111,"creation_date":1700035111,"answer_id":77486041,"question_id":77460653,"body_markdown":"By default, Apigee sets a limitation on the message size to 10 MB. If this size is exceeded, it results in a protocol.http.TooBigBody error. You can refer [here][1]. Streaming can be used as an alternative to deal with this issue. \r\n\r\nI noticed that you added the property only to the target endpoint. To enable response streaming, you need to add the following property under the properties tag for both the ProxyEndpoint and TargetEndpoint in your proxy:\r\n\r\n    &lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;\r\n\r\nSimilarly, for request streaming, you should use the following property:\r\n\r\n    &lt;Property name=&quot;request.streaming.enabled&quot;&gt;true&lt;/Property&gt;\r\n\r\n\r\n  [1]: https://cloud.google.com/apigee/docs/api-platform/reference/limits","title":"Getting Buffer overflow for API proxy","body":"<p>By default, Apigee sets a limitation on the message size to 10 MB. If this size is exceeded, it results in a protocol.http.TooBigBody error. You can refer <a href=\"https://cloud.google.com/apigee/docs/api-platform/reference/limits\" rel=\"nofollow noreferrer\">here</a>. Streaming can be used as an alternative to deal with this issue.</p>\n<p>I noticed that you added the property only to the target endpoint. To enable response streaming, you need to add the following property under the properties tag for both the ProxyEndpoint and TargetEndpoint in your proxy:</p>\n<pre><code>&lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;\n</code></pre>\n<p>Similarly, for request streaming, you should use the following property:</p>\n<pre><code>&lt;Property name=&quot;request.streaming.enabled&quot;&gt;true&lt;/Property&gt;\n</code></pre>\n"}],"owner":{"account_id":16094768,"reputation":51,"user_id":11617238,"display_name":"Prudhvi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700035111,"creation_date":1699625848,"question_id":77460653,"body_markdown":"When accessing apigee proxy, I am getting buffer overflow error.\r\n\r\n```json\r\n{\r\n    &quot;fault&quot;: {\r\n        &quot;faultstring&quot;: &quot;Body buffer overflow&quot;,\r\n        &quot;detail&quot;: {\r\n            &quot;errorcode&quot;: &quot;protocol.http.TooBigBody&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI tried to add this property on target endpoint:\r\n\r\n     &lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;.\r\n\r\nBut still getting same error.","title":"Getting Buffer overflow for API proxy","body":"<p>When accessing apigee proxy, I am getting buffer overflow error.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;fault&quot;: {\n        &quot;faultstring&quot;: &quot;Body buffer overflow&quot;,\n        &quot;detail&quot;: {\n            &quot;errorcode&quot;: &quot;protocol.http.TooBigBody&quot;\n        }\n    }\n}\n</code></pre>\n<p>I tried to add this property on target endpoint:</p>\n<pre><code> &lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;.\n</code></pre>\n<p>But still getting same error.</p>\n"},{"tags":["java","intellij-idea","formatting","record"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1657881305,"post_id":72992425,"comment_id":128920381,"body_markdown":"I think you need to do one or more structural replaces to be able to do this.","body":"I think you need to do one or more structural replaces to be able to do this."}],"answers":[{"comments":[{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1657880751,"post_id":72992506,"comment_id":128920213,"body_markdown":"But that will affect all method declarations, not only records (and it will not insert newlines after annotations).","body":"But that will affect all method declarations, not only records (and it will not insert newlines after annotations)."},{"owner":{"account_id":300561,"reputation":6020,"user_id":607767,"accept_rate":89,"display_name":"Lovro PandÅ¾iÄ"},"score":0,"creation_date":1657881201,"post_id":72992506,"comment_id":128920347,"body_markdown":"Yes, after doing some digging it seems the main problem are annotations as none of the annotation options do anything in case of record components.","body":"Yes, after doing some digging it seems the main problem are annotations as none of the annotation options do anything in case of record components."}],"tags":[],"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657880458,"creation_date":1657880458,"answer_id":72992506,"question_id":72992425,"body_markdown":"By checking checkbox &quot;New Line after &#39;(&#39; as shown below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i3J9P.png","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>By checking checkbox &quot;New Line after '(' as shown below:</p>\n<p><a href=\"https://i.stack.imgur.com/i3J9P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i3J9P.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":300561,"reputation":6020,"user_id":607767,"accept_rate":89,"display_name":"Lovro PandÅ¾iÄ"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659423998,"creation_date":1659423998,"answer_id":73203296,"question_id":72992425,"body_markdown":"Currently this doesn&#39;t seem to be supported - I&#39;ve opened [a ticket](https://youtrack.jetbrains.com/issue/IDEA-298007/Formatting-Java-record-fields-similar-to-classes-with-Intellij-IDEA) on JetBrains issue tracker.","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>Currently this doesn't seem to be supported - I've opened <a href=\"https://youtrack.jetbrains.com/issue/IDEA-298007/Formatting-Java-record-fields-similar-to-classes-with-Intellij-IDEA\" rel=\"nofollow noreferrer\">a ticket</a> on JetBrains issue tracker.</p>\n"},{"tags":[],"owner":{"account_id":106263,"reputation":3151,"user_id":283136,"accept_rate":38,"display_name":"timomeinen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700034992,"creation_date":1700034992,"answer_id":77486030,"question_id":72992425,"body_markdown":"When positioning the cursor over one of the members and pressing the lightbulb, one can select &quot;Put record components on separate lines&quot;. This reformats the code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nBefore:\r\n\r\n    record FooBar(String foo, Integer bar) {\r\n\r\n    }\r\n\r\nAfter:\r\n\r\n    record FooBar(\r\n            String foo,\r\n            Integer bar\r\n    ) {\r\n\r\n    }\r\n  [1]: https://i.stack.imgur.com/IzeQc.png","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>When positioning the cursor over one of the members and pressing the lightbulb, one can select &quot;Put record components on separate lines&quot;. This reformats the code:</p>\n<p><a href=\"https://i.stack.imgur.com/IzeQc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IzeQc.png\" alt=\"enter image description here\" /></a></p>\n<p>Before:</p>\n<pre><code>record FooBar(String foo, Integer bar) {\n\n}\n</code></pre>\n<p>After:</p>\n<pre><code>record FooBar(\n        String foo,\n        Integer bar\n) {\n\n}\n</code></pre>\n"}],"owner":{"account_id":300561,"reputation":6020,"user_id":607767,"accept_rate":89,"display_name":"Lovro PandÅ¾iÄ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":598,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1700034992,"creation_date":1657880008,"question_id":72992425,"body_markdown":"I have the following code:\r\n\r\n```java\r\nrecord FooBar(@NotNull String foo, @NotNull Integer bar) {\r\n}\r\n```\r\n\r\nI&#39;d like Intellij IDEA to format it to:\r\n\r\n```java\r\nrecord FooBar(\r\n\r\n    @NotNull \r\n    String foo, \r\n\r\n    @NotNull \r\n    Integer bar\r\n\r\n) {\r\n}\r\n```\r\n\r\nIs this possible?\r\n\r\nThe closest I was able to get is:\r\n\r\n```java\r\nrecord FooBar(\r\n    @NotNull String foo, \r\n    @NotNull Integer bar\r\n) {\r\n}\r\n```\r\nwhich is not ideal as number of annotations can vary.\r\n\r\nThe options I used to get to this result are\r\n\r\n```\r\nRecord components\tWrap always\r\nAlign when multiline\ttrue\r\nNew line after &#39;(&#39;\ttrue\r\nPlace &#39;)&#39; on new line\ttrue\r\n```","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>I have the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record FooBar(@NotNull String foo, @NotNull Integer bar) {\n}\n</code></pre>\n<p>I'd like Intellij IDEA to format it to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record FooBar(\n\n    @NotNull \n    String foo, \n\n    @NotNull \n    Integer bar\n\n) {\n}\n</code></pre>\n<p>Is this possible?</p>\n<p>The closest I was able to get is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record FooBar(\n    @NotNull String foo, \n    @NotNull Integer bar\n) {\n}\n</code></pre>\n<p>which is not ideal as number of annotations can vary.</p>\n<p>The options I used to get to this result are</p>\n<pre><code>Record components   Wrap always\nAlign when multiline    true\nNew line after '('  true\nPlace ')' on new line   true\n</code></pre>\n"},{"tags":["java","android","android-spinner"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1699766304,"post_id":77467746,"comment_id":136571470,"body_markdown":"Welcome to Stack Overflow. To understand how to use this site, you may take the [tour](https://stackoverflow.com/tour), read [How to Ask a Good Question](https://stackoverflow.com/help/how-to-ask), visit the [Help Center](https://stackoverflow.com/help), and pages they link to. In particular, it will help if a question like this has code, as a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) that illustrates the problem.  Please include the code sample as text.","body":"Welcome to Stack Overflow. To understand how to use this site, you may take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask a Good Question</a>, visit the <a href=\"https://stackoverflow.com/help\">Help Center</a>, and pages they link to. In particular, it will help if a question like this has code, as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that illustrates the problem.  Please include the code sample as text."}],"answers":[{"tags":[],"owner":{"account_id":29439484,"reputation":94,"user_id":22557788,"display_name":"Davit Hovhannisyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699779145,"creation_date":1699779145,"answer_id":77468296,"question_id":77467746,"body_markdown":"It is hard to answer your question without specific code snippets, but I will suggest you check whether you have implemented the click listeners for your spinners correctly, and when a spinner is clicked, it should toggle its open/close state.","title":"If I have 2 spinners and one is open, if I try to open the other it doesn&#39;t open on first click. Is there a way to fix that?","body":"<p>It is hard to answer your question without specific code snippets, but I will suggest you check whether you have implemented the click listeners for your spinners correctly, and when a spinner is clicked, it should toggle its open/close state.</p>\n"},{"comments":[{"owner":{"account_id":19803531,"reputation":11,"user_id":14503945,"display_name":"vincatzero"},"score":0,"creation_date":1699808605,"post_id":77468960,"comment_id":136574938,"body_markdown":"It sounds like you&#39;re understanding my question, but just to hold out hope, you&#39;re saying there&#39;s no way to set up 2 spinners so that when one is open, clicking another will close the open one and open the one that was just clicked on?\n\nSo 2 spinners would never be open at the same time. I just want one click to close one and open another.","body":"It sounds like you&#39;re understanding my question, but just to hold out hope, you&#39;re saying there&#39;s no way to set up 2 spinners so that when one is open, clicking another will close the open one and open the one that was just clicked on?  So 2 spinners would never be open at the same time. I just want one click to close one and open another."},{"owner":{"account_id":6098824,"reputation":2137,"user_id":4758618,"display_name":"V-master"},"score":0,"creation_date":1699812703,"post_id":77468960,"comment_id":136575415,"body_markdown":"you would need to create custom solutions for that, I don&#39;t know of any library that could help with that. Also i would suggest not to change that behavior as user on this platform is used to things work like that.","body":"you would need to create custom solutions for that, I don&#39;t know of any library that could help with that. Also i would suggest not to change that behavior as user on this platform is used to things work like that."}],"tags":[],"owner":{"account_id":6098824,"reputation":2137,"user_id":4758618,"display_name":"V-master"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699793033,"creation_date":1699793033,"answer_id":77468960,"question_id":77467746,"body_markdown":"you can&#39;t have two spinners open at the same time.\r\nFirst time you click you are selecting/dismissing opened spinner, and only then you are able to open next one.\r\n\r\nIt is standard Android platform behavior.","title":"If I have 2 spinners and one is open, if I try to open the other it doesn&#39;t open on first click. Is there a way to fix that?","body":"<p>you can't have two spinners open at the same time.\nFirst time you click you are selecting/dismissing opened spinner, and only then you are able to open next one.</p>\n<p>It is standard Android platform behavior.</p>\n"}],"owner":{"account_id":19803531,"reputation":11,"user_id":14503945,"display_name":"vincatzero"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1699912599,"answer_count":2,"score":1,"last_activity_date":1700034740,"creation_date":1699763431,"question_id":77467746,"body_markdown":"\r\nI have **few spinners** in a **Linearlayout**. When I click first one to open it, I&#39;d like to be able to click another one and have that click close the first one and open the second one. \r\n\r\nBut that&#39;s not what happens now. I have to click the second one **twice** to get it to open.\r\n\r\nI&#39;ve tried googling but couldn&#39;t find anything relevant. Here is the below image reference\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nlSlh.jpg","title":"If I have 2 spinners and one is open, if I try to open the other it doesn&#39;t open on first click. Is there a way to fix that?","body":"<p>I have <strong>few spinners</strong> in a <strong>Linearlayout</strong>. When I click first one to open it, I'd like to be able to click another one and have that click close the first one and open the second one.</p>\n<p>But that's not what happens now. I have to click the second one <strong>twice</strong> to get it to open.</p>\n<p>I've tried googling but couldn't find anything relevant. Here is the below image reference</p>\n<p><a href=\"https://i.stack.imgur.com/nlSlh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nlSlh.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","rabbitmq","spring-amqp","spring-rabbit","spring-retry"],"answers":[{"comments":[{"owner":{"account_id":29870675,"reputation":1,"user_id":22892111,"display_name":"Ruslan"},"score":0,"creation_date":1700035559,"post_id":77481196,"comment_id":136604162,"body_markdown":"Thank you. \nI managed to solve this issue adding this config:    \n   ```statefulRetryOperationsInterceptor\n      .setRollbackClassifier(\n        (Classifier&lt;Throwable, Boolean&gt;) classifiable -&gt;\n          ExceptionUtils.getThrowableList(classifiable)\n            .stream()\n            .noneMatch(AmqpRejectAndDontRequeueException.class::isInstance));```","body":"Thank you.  I managed to solve this issue adding this config:        <code>statefulRetryOperationsInterceptor       .setRollbackClassifier(         (Classifier&lt;Throwable, Boolean&gt;) classifiable -&gt;           ExceptionUtils.getThrowableList(classifiable)             .stream()             .noneMatch(AmqpRejectAndDontRequeueException.class::isInstan&zwnj;&#8203;ce));</code>"}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699970420,"creation_date":1699970420,"answer_id":77481196,"question_id":77458692,"body_markdown":"Spring Retry knows nothing about the semantics of Spring AMQP exceptions.\r\n\r\nYou should configure the interceptor such that `AmqpRejectAndDontRequeueException` is a not-retryable exception to avoid this problem.","title":"Spring amqp RetryCache is not cleared when AmqpRejectAndDontRequeueException is thrown","body":"<p>Spring Retry knows nothing about the semantics of Spring AMQP exceptions.</p>\n<p>You should configure the interceptor such that <code>AmqpRejectAndDontRequeueException</code> is a not-retryable exception to avoid this problem.</p>\n"}],"owner":{"account_id":29870675,"reputation":1,"user_id":22892111,"display_name":"Ruslan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700034607,"creation_date":1699605924,"question_id":77458692,"body_markdown":"I have a simple Rabbit listener which always throws `AmqpRejectAndDontRequeueException` (to test if listener can handle multiple invalid messages).\r\n\r\nThe config is:\r\n\r\n```java\r\n@RabbitListener(\r\n\tid = TestConfig.LISTENER_ID,\r\n\tqueues = TestConfig.DATA_QUEUE,\r\n\tcontainerFactory = TestConfig.LISTENER_FACTORY\r\n)\r\npublic void consume(String data, Message message) {\r\n\tif (true) {\r\n\t\tthrow new AmqpRejectAndDontRequeueException(&quot;don&#39;t requeue&quot;);\r\n\t}\r\n}\r\n```\r\n\r\n```java\r\nstatic final String LISTENER_ID = &quot;listenerId&quot;;\r\n\r\nstatic final String DATA_QUEUE = &quot;data.queue&quot;;\r\n\r\nstatic final String LISTENER_FACTORY = &quot;listenerFactory&quot;;\r\n\r\nprivate final AmqpAdmin amqpAdmin;\r\n\r\nprivate final ConnectionFactory connectionFactory;\r\n\r\nTestConfig(AmqpAdmin amqpAdmin, ConnectionFactory connectionFactory) {\r\n\tthis.amqpAdmin = amqpAdmin;\r\n\tthis.connectionFactory = connectionFactory;\r\n}\r\n\r\n@Bean\r\nRabbitTransactionManager rabbitTransactionManager(ConnectionFactory connectionFactory) {\r\n\treturn new RabbitTransactionManager(connectionFactory);\r\n}\r\n\r\n@Bean\r\npublic Queue consumedDataQueue() {\r\n\tQueue queue = new Queue(DATA_QUEUE);\r\n\tqueue.setAdminsThatShouldDeclare(amqpAdmin);\r\n\treturn queue;\r\n}\r\n\r\n@Bean(name = LISTENER_FACTORY)\r\npublic SimpleRabbitListenerContainerFactory listenerFactory(RabbitTransactionManager rabbitTransactionManager) {\r\n\r\n\tStatefulRetryOperationsInterceptor backOffRetryInterceptor = statefulRetryOperationsInterceptor();\r\n\tSimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\r\n\r\n\tfactory.setConnectionFactory(connectionFactory);\r\n\tfactory.setConcurrentConsumers(1);\r\n\tfactory.setAutoStartup(true);\r\n\tfactory.setTransactionManager(rabbitTransactionManager);\r\n\tfactory.setAdviceChain(backOffRetryInterceptor);\r\n\r\n    return factory;\r\n}\r\n\r\nprivate StatefulRetryOperationsInterceptor statefulRetryOperationsInterceptor() {\r\n\r\n\tRejectAndDontRequeueRecoverer messageRecoverer = new RejectAndDontRequeueRecoverer(); // to be changed\r\n\r\n\tRetryTemplate retryTemplate = new RetryTemplate();\r\n\tretryTemplate.setRetryContextCache(new MapRetryContextCache(3));\r\n\tretryTemplate.setRetryPolicy(new SimpleRetryPolicy(1));\r\n\r\n\treturn RetryInterceptorBuilder.stateful()\r\n      .retryOperations(retryTemplate)\r\n      .recoverer(messageRecoverer)\r\n      .build();\r\n}\r\n```\r\n\r\nWhen `AmqpRejectAndDontRequeueException` is thrown in listener, `MapRetryContextCache` is filling up, but not cleared. Application ends up with `RetryCacheCapacityExceededException` thrown.\r\n\r\nI&#39;ve managed to make it working throwing custom exception from listener and processing it in custom message recoverer. But message is still requeued once in this case according to retry policy.\r\nWhat I am doing wrong?\r\nShouldn&#39;t I use `AmqpRejectAndDontRequeueException` with stateful interceptor?\r\nHow to reject and do not requeue message with stateful interceptor?","title":"Spring amqp RetryCache is not cleared when AmqpRejectAndDontRequeueException is thrown","body":"<p>I have a simple Rabbit listener which always throws <code>AmqpRejectAndDontRequeueException</code> (to test if listener can handle multiple invalid messages).</p>\n<p>The config is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RabbitListener(\n    id = TestConfig.LISTENER_ID,\n    queues = TestConfig.DATA_QUEUE,\n    containerFactory = TestConfig.LISTENER_FACTORY\n)\npublic void consume(String data, Message message) {\n    if (true) {\n        throw new AmqpRejectAndDontRequeueException(&quot;don't requeue&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>static final String LISTENER_ID = &quot;listenerId&quot;;\n\nstatic final String DATA_QUEUE = &quot;data.queue&quot;;\n\nstatic final String LISTENER_FACTORY = &quot;listenerFactory&quot;;\n\nprivate final AmqpAdmin amqpAdmin;\n\nprivate final ConnectionFactory connectionFactory;\n\nTestConfig(AmqpAdmin amqpAdmin, ConnectionFactory connectionFactory) {\n    this.amqpAdmin = amqpAdmin;\n    this.connectionFactory = connectionFactory;\n}\n\n@Bean\nRabbitTransactionManager rabbitTransactionManager(ConnectionFactory connectionFactory) {\n    return new RabbitTransactionManager(connectionFactory);\n}\n\n@Bean\npublic Queue consumedDataQueue() {\n    Queue queue = new Queue(DATA_QUEUE);\n    queue.setAdminsThatShouldDeclare(amqpAdmin);\n    return queue;\n}\n\n@Bean(name = LISTENER_FACTORY)\npublic SimpleRabbitListenerContainerFactory listenerFactory(RabbitTransactionManager rabbitTransactionManager) {\n\n    StatefulRetryOperationsInterceptor backOffRetryInterceptor = statefulRetryOperationsInterceptor();\n    SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\n\n    factory.setConnectionFactory(connectionFactory);\n    factory.setConcurrentConsumers(1);\n    factory.setAutoStartup(true);\n    factory.setTransactionManager(rabbitTransactionManager);\n    factory.setAdviceChain(backOffRetryInterceptor);\n\n    return factory;\n}\n\nprivate StatefulRetryOperationsInterceptor statefulRetryOperationsInterceptor() {\n\n    RejectAndDontRequeueRecoverer messageRecoverer = new RejectAndDontRequeueRecoverer(); // to be changed\n\n    RetryTemplate retryTemplate = new RetryTemplate();\n    retryTemplate.setRetryContextCache(new MapRetryContextCache(3));\n    retryTemplate.setRetryPolicy(new SimpleRetryPolicy(1));\n\n    return RetryInterceptorBuilder.stateful()\n      .retryOperations(retryTemplate)\n      .recoverer(messageRecoverer)\n      .build();\n}\n</code></pre>\n<p>When <code>AmqpRejectAndDontRequeueException</code> is thrown in listener, <code>MapRetryContextCache</code> is filling up, but not cleared. Application ends up with <code>RetryCacheCapacityExceededException</code> thrown.</p>\n<p>I've managed to make it working throwing custom exception from listener and processing it in custom message recoverer. But message is still requeued once in this case according to retry policy.\nWhat I am doing wrong?\nShouldn't I use <code>AmqpRejectAndDontRequeueException</code> with stateful interceptor?\nHow to reject and do not requeue message with stateful interceptor?</p>\n"},{"tags":["java","http","date","http-headers"],"answers":[{"comments":[{"owner":{"account_id":43112,"reputation":58953,"user_id":125844,"accept_rate":85,"display_name":"notnoop"},"score":3,"creation_date":1261164294,"post_id":1930199,"comment_id":1838480,"body_markdown":"+1 almost correct, the `hh` should be `HH`, as the hours are 0-23.","body":"+1 almost correct, the <code>hh</code> should be <code>HH</code>, as the hours are 0-23."},{"owner":{"account_id":82716,"reputation":1478,"user_id":232358,"display_name":"Shaun"},"score":0,"creation_date":1261166350,"post_id":1930199,"comment_id":1838704,"body_markdown":"I also had the timezone &quot;ZZZ&quot; instead of &quot;zzz&quot;.  Hopefully that will do it.  If you still have issues you can reference the documentation linked above.","body":"I also had the timezone &quot;ZZZ&quot; instead of &quot;zzz&quot;.  Hopefully that will do it.  If you still have issues you can reference the documentation linked above."},{"owner":{"account_id":66436,"reputation":4095,"user_id":194890,"accept_rate":67,"display_name":"levanovd"},"score":1,"creation_date":1261166365,"post_id":1930199,"comment_id":1838708,"body_markdown":"Works great for me, thank you! The only thing that I should say is that this example is for Locale.ENGLISH.","body":"Works great for me, thank you! The only thing that I should say is that this example is for Locale.ENGLISH."},{"owner":{"account_id":5550,"reputation":78192,"user_id":8992,"display_name":"Ry4an Brase"},"score":7,"creation_date":1261166932,"post_id":1930199,"comment_id":1838768,"body_markdown":"If you&#39;re doing this often make sure you reuse the SimpleDateFormat object (they&#39;re amazingly expensive to construct) and synchronize on it  when calling `parse` (they&#39;re not threadsafe).","body":"If you&#39;re doing this often make sure you reuse the SimpleDateFormat object (they&#39;re amazingly expensive to construct) and synchronize on it  when calling <code>parse</code> (they&#39;re not threadsafe)."},{"owner":{"account_id":22422,"reputation":82373,"user_id":55246,"accept_rate":69,"display_name":"Sridhar Ratnakumar"},"score":20,"creation_date":1264023290,"post_id":1930199,"comment_id":2039596,"body_markdown":"The standard allows not one format, but **three** formats. http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3","body":"The standard allows not one format, but <b>three</b> formats. <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3\" rel=\"nofollow noreferrer\">w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3</a>"},{"owner":{"account_id":94749,"reputation":2530,"user_id":258510,"accept_rate":75,"display_name":"P&#229;lOliver"},"score":5,"creation_date":1305200901,"post_id":1930199,"comment_id":6898118,"body_markdown":"If you are going to compare that Date object to a time stamp in your application, remember that the header **only include whole seconds** and  you should discard the 3 least significant digits to be able to compare properly. So do (TS/1000)*1000 == headerTS if needed.","body":"If you are going to compare that Date object to a time stamp in your application, remember that the header <b>only include whole seconds</b> and  you should discard the 3 least significant digits to be able to compare properly. So do (TS/1000)*1000 == headerTS if needed."},{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":8,"creation_date":1334250384,"post_id":1930199,"comment_id":12981833,"body_markdown":"Anyone getting a &quot;ParseException: Unparseable date&quot;?","body":"Anyone getting a &quot;ParseException: Unparseable date&quot;?"},{"owner":{"account_id":946,"reputation":18105,"user_id":1247,"accept_rate":91,"display_name":"Mike Deck"},"score":0,"creation_date":1339623381,"post_id":1930199,"comment_id":14412103,"body_markdown":"@Ry4an synchronizing is an option as DateFormat instances are not threadsafe, but using a ThreadLocal variable can be more efficient if the instance is going to be contended for often.","body":"@Ry4an synchronizing is an option as DateFormat instances are not threadsafe, but using a ThreadLocal variable can be more efficient if the instance is going to be contended for often."},{"owner":{"account_id":24915,"reputation":9561,"user_id":63678,"accept_rate":67,"display_name":"Daniel  Magnusson"},"score":1,"creation_date":1341831438,"post_id":1930199,"comment_id":15019833,"body_markdown":"java.text.ParseException: Unparseable date: &quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;at java.text.DateFormat.parse(Unknown Source)","body":"java.text.ParseException: Unparseable date: &quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;at java.text.DateFormat.parse(Unknown Source)"},{"owner":{"account_id":2982680,"reputation":358,"user_id":2532329,"display_name":"Iree"},"score":3,"creation_date":1420764029,"post_id":1930199,"comment_id":44108186,"body_markdown":"I think it could be `new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss zzz&quot;, Locale.US);` not to fail on other locales.","body":"I think it could be <code>new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss zzz&quot;, Locale.US);</code> not to fail on other locales."},{"owner":{"account_id":2487404,"reputation":860,"user_id":2165595,"display_name":"Roman"},"score":12,"creation_date":1420971728,"post_id":1930199,"comment_id":44173082,"body_markdown":"To avoid `ParseException` use `new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.US)` instead","body":"To avoid <code>ParseException</code> use <code>new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.US)</code> instead"},{"owner":{"account_id":3001208,"reputation":577,"user_id":2546679,"display_name":"haui"},"score":1,"creation_date":1485330816,"post_id":1930199,"comment_id":70876341,"body_markdown":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Last-Modified states that the time zone must always be exactly &quot;GMT&quot;. Therefore, a `format.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));` is is necessary, when using the same format for also creating `Last-Modified` header values.","body":"<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Last-Modified\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Last-Modif&zwnj;&#8203;ied</a> states that the time zone must always be exactly &quot;GMT&quot;. Therefore, a <code>format.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));</code> is is necessary, when using the same format for also creating <code>Last-Modified</code> header values."},{"owner":{"account_id":3840401,"reputation":491,"user_id":4859846,"display_name":"Dylan Smith"},"score":5,"creation_date":1510581987,"post_id":1930199,"comment_id":81482974,"body_markdown":"@SridharRatnakumar Two of the three formats are now obsolete, so `new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.US)` is all you need now.  [https://tools.ietf.org/html/rfc7231#page-65](https://tools.ietf.org/html/rfc7231#page-65)","body":"@SridharRatnakumar Two of the three formats are now obsolete, so <code>new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.US)</code> is all you need now.  <a href=\"https://tools.ietf.org/html/rfc7231#page-65\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc7231#page-65</a>"},{"owner":{"account_id":9181967,"reputation":3148,"user_id":7037695,"accept_rate":89,"display_name":"Markus Appel"},"score":0,"creation_date":1538402283,"post_id":1930199,"comment_id":92120196,"body_markdown":"Submitted an edit request according to @DylanSmith &#39;s comment.","body":"Submitted an edit request according to @DylanSmith &#39;s comment."}],"tags":[],"owner":{"account_id":82716,"reputation":1478,"user_id":232358,"display_name":"Shaun"},"comment_count":14,"down_vote_count":4,"up_vote_count":79,"is_accepted":true,"score":75,"last_activity_date":1392942547,"creation_date":1261164156,"answer_id":1930199,"question_id":1930158,"body_markdown":"This should be pretty close\r\n\r\n    String dateString = &quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;;\r\n    SimpleDateFormat format = new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss zzz&quot;);\r\n    Date d = format.parse(dateString);\r\n\r\n[SimpleDateFormat][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>This should be pretty close</p>\n\n<pre><code>String dateString = \"Wed, 09 Apr 2008 23:55:38 GMT\";\nSimpleDateFormat format = new SimpleDateFormat(\"EEE, dd MMM yyyy HH:mm:ss zzz\");\nDate d = format.parse(dateString);\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">SimpleDateFormat</a></p>\n"},{"comments":[{"owner":{"account_id":162661,"reputation":301,"user_id":384267,"display_name":"John Glassmyer"},"score":1,"creation_date":1329738166,"post_id":1930240,"comment_id":11818943,"body_markdown":"BTW, commons-httpclient has been superseded by org.apache.httpcomponents:httpclient.","body":"BTW, commons-httpclient has been superseded by org.apache.httpcomponents:httpclient."},{"owner":{"account_id":6957,"reputation":74531,"user_id":11858,"accept_rate":93,"display_name":"daveb"},"score":2,"creation_date":1361527635,"post_id":1930240,"comment_id":21106476,"body_markdown":"The class is now org.apache.http.impl.cookie.DateUtils   http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/cookie/DateUtils.html","body":"The class is now org.apache.http.impl.cookie.DateUtils   <a href=\"http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/cookie/DateUtils.html\" rel=\"nofollow noreferrer\">hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/or&zwnj;&#8203;g/&hellip;</a>"},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":1,"creation_date":1398241265,"post_id":1930240,"comment_id":35555669,"body_markdown":"I had to use `org.apache.http.client.utils.DateUtils`, `httpclient-4.3.3`","body":"I had to use <code>org.apache.http.client.utils.DateUtils</code>, <code>httpclient-4.3.3</code>"},{"owner":{"account_id":1576989,"reputation":1062,"user_id":1463168,"display_name":"Massimo"},"score":0,"creation_date":1486771336,"post_id":1930240,"comment_id":71506029,"body_markdown":"DateUtil still uses SimpleDateFormat inside with a ThreadLocal cache. If you are looking also for performance see joda DateTimeFormatter","body":"DateUtil still uses SimpleDateFormat inside with a ThreadLocal cache. If you are looking also for performance see joda DateTimeFormatter"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":4,"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1394641046,"creation_date":1261164750,"answer_id":1930240,"question_id":1930158,"body_markdown":"[`DateUtil.parseDate(dateString)`][1] from apache http-components\r\n\r\n(legacy: &lt;a href=&quot;http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/util/DateUtil.html#parseDate%28java.lang.String%29&quot;&gt;`DateUtil.parseDate(dateString)`&lt;/a&gt; (from apache commons-httpclient))\r\n\r\nIt has the correct format defined as a Constant, which is guaranteed to be compliant with the protocol.\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/cookie/DateUtils.html","title":"How to parse Date from HTTP Last-Modified header?","body":"<p><a href=\"http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/cookie/DateUtils.html\" rel=\"noreferrer\"><code>DateUtil.parseDate(dateString)</code></a> from apache http-components</p>\n\n<p>(legacy: <a href=\"http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/util/DateUtil.html#parseDate%28java.lang.String%29\" rel=\"noreferrer\"><code>DateUtil.parseDate(dateString)</code></a> (from apache commons-httpclient))</p>\n\n<p>It has the correct format defined as a Constant, which is guaranteed to be compliant with the protocol.</p>\n"},{"comments":[{"owner":{"account_id":6957,"reputation":74531,"user_id":11858,"accept_rate":93,"display_name":"daveb"},"score":3,"creation_date":1361527490,"post_id":2034274,"comment_id":21106401,"body_markdown":"Just a minor point in case people get confused: the date format RFC is 1123, which is referred to from RFC 2616 here: http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1","body":"Just a minor point in case people get confused: the date format RFC is 1123, which is referred to from RFC 2616 here: <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1\" rel=\"nofollow noreferrer\">w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1</a>"},{"owner":{"account_id":134018,"reputation":12073,"user_id":335847,"accept_rate":89,"display_name":"ian"},"score":1,"creation_date":1374220058,"post_id":2034274,"comment_id":25863913,"body_markdown":"@Raedwald which itself is superseded by [RFC 2822](https://www.ietf.org/rfc/rfc2822.txt).","body":"@Raedwald which itself is superseded by <a href=\"https://www.ietf.org/rfc/rfc2822.txt\" rel=\"nofollow noreferrer\">RFC 2822</a>."}],"tags":[],"owner":{"account_id":89623,"reputation":3913,"user_id":247159,"accept_rate":67,"display_name":"ralfstx"},"comment_count":2,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1700034596,"creation_date":1263059270,"answer_id":2034274,"question_id":1930158,"body_markdown":"RFC 2616 defines three different date formats that a conforming client must understand.\r\n\r\nThe Apache HttpClient provides a DateUtil that complies with the standard:\r\n\r\nhttps://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/utils/DateUtils.html\r\n\r\nhttps://github.com/apache/httpcomponents-client/blob/4.5.x/httpclient/src/main/java/org/apache/http/client/utils/DateUtils.java\r\n\r\n  `Date date = DateUtils.parseDate( headerValue );`\r\n","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>RFC 2616 defines three different date formats that a conforming client must understand.</p>\n<p>The Apache HttpClient provides a DateUtil that complies with the standard:</p>\n<p><a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/utils/DateUtils.html\" rel=\"nofollow noreferrer\">https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/utils/DateUtils.html</a></p>\n<p><a href=\"https://github.com/apache/httpcomponents-client/blob/4.5.x/httpclient/src/main/java/org/apache/http/client/utils/DateUtils.java\" rel=\"nofollow noreferrer\">https://github.com/apache/httpcomponents-client/blob/4.5.x/httpclient/src/main/java/org/apache/http/client/utils/DateUtils.java</a></p>\n<p><code>Date date = DateUtils.parseDate( headerValue );</code></p>\n"},{"comments":[{"owner":{"account_id":42347,"reputation":15894,"user_id":123336,"accept_rate":73,"display_name":"Trevor Robinson"},"score":1,"creation_date":1418071998,"post_id":12344948,"comment_id":43185295,"body_markdown":"Note that this method uses the deprecated `Date.parse` method, at least  as of Oracle JDK 7, which _seems_ to support all three HTTP 1.1 [Full Date](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1) formats.","body":"Note that this method uses the deprecated <code>Date.parse</code> method, at least  as of Oracle JDK 7, which <i>seems</i> to support all three HTTP 1.1 <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1\" rel=\"nofollow noreferrer\">Full Date</a> formats."}],"tags":[],"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1347246764,"creation_date":1347246764,"answer_id":12344948,"question_id":1930158,"body_markdown":"If you&#39;re using `URLConnection`s, there is already a handy method.\r\n\r\nSee\r\n[URLConnection#getLastModified]( http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getLastModified())\r\n\r\nThis method parses the date string and returns a milliseconds value. Then you can happily create a `Date` with that value.","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>If you're using <code>URLConnection</code>s, there is already a handy method.</p>\n\n<p>See\n<a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getLastModified%28%29\">URLConnection#getLastModified</a></p>\n\n<p>This method parses the date string and returns a milliseconds value. Then you can happily create a <code>Date</code> with that value.</p>\n"},{"tags":[],"owner":{"account_id":6873812,"reputation":449,"user_id":5282992,"display_name":"Stan Svec"},"comment_count":0,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1481003083,"creation_date":1480955675,"answer_id":40978944,"question_id":1930158,"body_markdown":"# java.time\r\n\r\nWhen using the new [Java Date and Time API][1] the code would simply be:\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.parse(&quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;, DateTimeFormatter.RFC_1123_DATE_TIME);\r\n\r\nThe [`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html) class pre-defines a constant for that particular format in [`RFC_1123_DATE_TIME`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#RFC_1123_DATE_TIME). As the name suggests, [RFC 1123][2] defines that format.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [2]: https://www.rfc-editor.org/rfc/rfc1123","title":"How to parse Date from HTTP Last-Modified header?","body":"<h1>java.time</h1>\n<p>When using the new <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">Java Date and Time API</a> the code would simply be:</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.parse(&quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;, DateTimeFormatter.RFC_1123_DATE_TIME);\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"noreferrer\"><code>DateTimeFormatter</code></a> class pre-defines a constant for that particular format in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#RFC_1123_DATE_TIME\" rel=\"noreferrer\"><code>RFC_1123_DATE_TIME</code></a>. As the name suggests, <a href=\"https://www.rfc-editor.org/rfc/rfc1123\" rel=\"noreferrer\">RFC 1123</a> defines that format.</p>\n"}],"owner":{"account_id":66436,"reputation":4095,"user_id":194890,"accept_rate":67,"display_name":"levanovd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52478,"favorite_count":0,"down_vote_count":1,"up_vote_count":64,"accepted_answer_id":1930199,"answer_count":5,"score":63,"last_activity_date":1700034596,"creation_date":1261163704,"question_id":1930158,"body_markdown":"HTTP Last-Modified header contains date in following format (example):  \r\n`Wed, 09 Apr 2008 23:55:38 GMT`  \r\nWhat is the easiest way to parse **java.util.Date** from this string?","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>HTTP Last-Modified header contains date in following format (example):<br>\n<code>Wed, 09 Apr 2008 23:55:38 GMT</code><br>\nWhat is the easiest way to parse <strong>java.util.Date</strong> from this string?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1545821742,"post_id":53931046,"comment_id":94702659,"body_markdown":"&quot;At the same time I don&#39;t want to use exceptions for code flow&quot;. This is what exceptions are made for. Don&#39;t make things more complicated than needed by taking on weird self-imposed requirements.","body":"&quot;At the same time I don&#39;t want to use exceptions for code flow&quot;. This is what exceptions are made for. Don&#39;t make things more complicated than needed by taking on weird self-imposed requirements."},{"owner":{"account_id":3507195,"reputation":14509,"user_id":2932476,"display_name":"Bourbia Brahim"},"score":0,"creation_date":1545824723,"post_id":53931046,"comment_id":94703686,"body_markdown":"You can use directly the ResourceLoader interface in your class (by autowiring ) or just foloow my bleow answer in order to use this class in all project !","body":"You can use directly the ResourceLoader interface in your class (by autowiring ) or just foloow my bleow answer in order to use this class in all project !"}],"answers":[{"comments":[{"owner":{"account_id":5961968,"reputation":1269,"user_id":4686871,"accept_rate":100,"display_name":"Sergei Sirik"},"score":0,"creation_date":1578013428,"post_id":53931635,"comment_id":105311637,"body_markdown":"It doesn&#39;t work for me. `resource.exists()` returns false. But it exists for sure.","body":"It doesn&#39;t work for me. <code>resource.exists()</code> returns false. But it exists for sure."},{"owner":{"account_id":5961968,"reputation":1269,"user_id":4686871,"accept_rate":100,"display_name":"Sergei Sirik"},"score":1,"creation_date":1578014445,"post_id":53931635,"comment_id":105311855,"body_markdown":"Actually, it works. Forgot to add prefix &quot;&quot;classpath:&quot;. Thanks!","body":"Actually, it works. Forgot to add prefix &quot;&quot;classpath:&quot;. Thanks!"}],"tags":[],"owner":{"account_id":3507195,"reputation":14509,"user_id":2932476,"display_name":"Bourbia Brahim"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1545831102,"creation_date":1545824626,"answer_id":53931635,"question_id":53931046,"body_markdown":"You can use the [ResourceLoader Interface][1] in order to load use [getResource()][2], then use [Resource.exists()][3] to check if the file exists or not.\r\n\r\n    @Autowired\r\n    ResourceLoader resourceLoader;  \r\n              \r\n    Resource resource = resourceLoader.getResource(&quot;classpath:my-file.json&quot;);\r\n    if (resource.exists()) {\r\n      // do one thing\r\n    } else {\r\n      // do something else\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html#getResource-java.lang.String-\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html#exists--","title":"Spring: Check if a classpath resource exists before loading","body":"<p>You can use the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html\" rel=\"noreferrer\">ResourceLoader Interface</a> in order to load use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html#getResource-java.lang.String-\" rel=\"noreferrer\">getResource()</a>, then use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html#exists--\" rel=\"noreferrer\">Resource.exists()</a> to check if the file exists or not.</p>\n\n<pre><code>@Autowired\nResourceLoader resourceLoader;  \n\nResource resource = resourceLoader.getResource(\"classpath:my-file.json\");\nif (resource.exists()) {\n  // do one thing\n} else {\n  // do something else\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1310803,"reputation":2557,"user_id":1258838,"accept_rate":68,"display_name":"Juliyanage Silva"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620832975,"creation_date":1620832975,"answer_id":67506543,"question_id":53931046,"body_markdown":"It&#39;s been answered and old but thought of putting is someone sees docker and maven cannot use the same solution even the resource.exists() returns true.  in that case we can do something like this (it&#39;s bit hacky though):\r\n\r\n                Resource resource = resourceLoader.getResource(&quot;classpath:path/to/file&quot;);\r\n                if (resource.exists()) {\r\n                    try {\r\n                        // below throws file not found if the app runs in docker\r\n                        resource.getFile()\r\n                    } catch (FileNotFoundException e) {\r\n                        // docker uses this\r\n                        InputStream stream = new ClassPathResource(&quot;classpath:path/to/file&quot;).getInputStream();                        \r\n                    }\r\n                }","title":"Spring: Check if a classpath resource exists before loading","body":"<p>It's been answered and old but thought of putting is someone sees docker and maven cannot use the same solution even the resource.exists() returns true.  in that case we can do something like this (it's bit hacky though):</p>\n<pre><code>            Resource resource = resourceLoader.getResource(&quot;classpath:path/to/file&quot;);\n            if (resource.exists()) {\n                try {\n                    // below throws file not found if the app runs in docker\n                    resource.getFile()\n                } catch (FileNotFoundException e) {\n                    // docker uses this\n                    InputStream stream = new ClassPathResource(&quot;classpath:path/to/file&quot;).getInputStream();                        \n                }\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6180392,"reputation":1028,"user_id":4816080,"accept_rate":100,"display_name":"ÙØ¹ÙÙØ¨"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700034460,"creation_date":1699289878,"answer_id":77432900,"question_id":53931046,"body_markdown":"you can call ***org.springframework.util.ResourceUtils*** without @Autowired.\r\n\r\n    org.springframework.util.Assert.state(ResourceUtils.getFile(&quot;yourPath&quot;).exists(), &quot;Path is not valid&quot;);\r\n\r\nPS: Utility methods for resolving resource locations to files in the file system. Mainly for internal use within the framework. [documentation link][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ResourceUtils.html","title":"Spring: Check if a classpath resource exists before loading","body":"<p>you can call <em><strong>org.springframework.util.ResourceUtils</strong></em> without @Autowired.</p>\n<pre><code>org.springframework.util.Assert.state(ResourceUtils.getFile(&quot;yourPath&quot;).exists(), &quot;Path is not valid&quot;);\n</code></pre>\n<p>PS: Utility methods for resolving resource locations to files in the file system. Mainly for internal use within the framework. <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ResourceUtils.html\" rel=\"nofollow noreferrer\">documentation link</a>.</p>\n"}],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14047,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":53931635,"answer_count":3,"score":5,"last_activity_date":1700034460,"creation_date":1545821566,"question_id":53931046,"body_markdown":"I have a code where I need to check if a classpath resource exists and apply some actions.\r\n\r\n    File file = ResourceUtils.getFile(&quot;classpath:my-file.json&quot;);\r\n    if (file.exists()) {\r\n        // do one thing\r\n    } else {\r\n        // do something else\r\n    }\r\n\r\n**Problem:** `ResourceUtils.getFile()` throws `FileNotFoundException` if the resource doesn&#39;t exist. At the same time I don&#39;t want to use exceptions for code flow and I&#39;d like to check if a resource exists.\r\n\r\n**Question:** Is there any way to check if a resource exists using Spring&#39;s API?\r\n\r\n**Why I need this to be done with Spring:** Because without spring I&#39;d need to pick a correct class loader myself which is not convenient. I&#39;d need to have a different code to make it work in unit tests.","title":"Spring: Check if a classpath resource exists before loading","body":"<p>I have a code where I need to check if a classpath resource exists and apply some actions.</p>\n\n<pre><code>File file = ResourceUtils.getFile(\"classpath:my-file.json\");\nif (file.exists()) {\n    // do one thing\n} else {\n    // do something else\n}\n</code></pre>\n\n<p><strong>Problem:</strong> <code>ResourceUtils.getFile()</code> throws <code>FileNotFoundException</code> if the resource doesn't exist. At the same time I don't want to use exceptions for code flow and I'd like to check if a resource exists.</p>\n\n<p><strong>Question:</strong> Is there any way to check if a resource exists using Spring's API?</p>\n\n<p><strong>Why I need this to be done with Spring:</strong> Because without spring I'd need to pick a correct class loader myself which is not convenient. I'd need to have a different code to make it work in unit tests.</p>\n"},{"tags":["java","rapidminer"],"answers":[{"tags":[],"owner":{"account_id":9025883,"reputation":3482,"user_id":6725184,"display_name":"Christian K&#246;nig"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700034078,"creation_date":1700034078,"answer_id":77485960,"question_id":77482752,"body_markdown":"Citing the solution from the RapidMiner Community post https://community.rapidminer.com/discussion/comment/73142/#Comment_73142\r\n\r\n&gt; There is a known issue with non-ascii usernames in 10.2 / 10.3.\r\n&gt; \r\n&gt; As a workaround you could point your .RapidMiner folder to another\r\n&gt; directory by adding i.e.\r\n&gt; `-Drapidminer.user-home=C:\\.RapidMiner` to line 158 of the `C:\\Program Files\\RapidMiner\\RapidMiner Studio\\RapidMiner Studio.bat` \r\n&gt; \r\n&gt; `&quot;%JAVA%&quot; %JVM_OPTIONS% -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%`\r\n&gt; would change to:\r\n&gt; `&quot;%JAVA%&quot; %JVM_OPTIONS% -Drapidminer.user-home=C:\\.RapidMiner -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%`\r\n&gt; \r\n&gt; Afterwards you would need to start RapidMiner Studio via the .bat file\r\n&gt; until this is fixed.","title":"RapidMiner Java could not be launched - Error 1","body":"<p>Citing the solution from the RapidMiner Community post <a href=\"https://community.rapidminer.com/discussion/comment/73142/#Comment_73142\" rel=\"nofollow noreferrer\">https://community.rapidminer.com/discussion/comment/73142/#Comment_73142</a></p>\n<blockquote>\n<p>There is a known issue with non-ascii usernames in 10.2 / 10.3.</p>\n<p>As a workaround you could point your .RapidMiner folder to another\ndirectory by adding i.e.\n<code>-Drapidminer.user-home=C:\\.RapidMiner</code> to line 158 of the <code>C:\\Program Files\\RapidMiner\\RapidMiner Studio\\RapidMiner Studio.bat</code></p>\n<p><code>&quot;%JAVA%&quot; %JVM_OPTIONS% -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%</code>\nwould change to:\n<code>&quot;%JAVA%&quot; %JVM_OPTIONS% -Drapidminer.user-home=C:\\.RapidMiner -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%</code></p>\n<p>Afterwards you would need to start RapidMiner Studio via the .bat file\nuntil this is fixed.</p>\n</blockquote>\n"}],"owner":{"account_id":20130133,"reputation":13,"user_id":21841691,"display_name":"Erevos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77485960,"answer_count":1,"score":0,"last_activity_date":1700034078,"creation_date":1699983776,"question_id":77482752,"body_markdown":"I have installed RapidMiner and when i am trying to launch the application, i get\r\n\r\n**Java could not be launched  Error 1**\r\n\r\nAfter researching, i have found that running the .bat file could give a more detailed error message which is:\r\n\r\nSEVERE: Failed to read RM preferences for user specified license settings (As shown in the picture)\r\n\r\n![Detailed Error](https://i.stack.imgur.com/DSR73.jpg)\r\n\r\nSystem Language is Greek (i am not sure if this is the problem with the path)\r\n\r\nAny suggestions?\r\n\r\nJava Version 21.XX.","title":"RapidMiner Java could not be launched - Error 1","body":"<p>I have installed RapidMiner and when i am trying to launch the application, i get</p>\n<p><strong>Java could not be launched  Error 1</strong></p>\n<p>After researching, i have found that running the .bat file could give a more detailed error message which is:</p>\n<p>SEVERE: Failed to read RM preferences for user specified license settings (As shown in the picture)</p>\n<p><img src=\"https://i.stack.imgur.com/DSR73.jpg\" alt=\"Detailed Error\" /></p>\n<p>System Language is Greek (i am not sure if this is the problem with the path)</p>\n<p>Any suggestions?</p>\n<p>Java Version 21.XX.</p>\n"},{"tags":["java","spring-boot","apache-kafka","overloading","asynccallback"],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700033496,"creation_date":1699641305,"question_id":77462191,"body_markdown":"We have two micro-services `transfer` and `approval`. The request from `transfer` will be sent to `approval` and once approved the funds are transferred. During the submission of approval, there is a `Kafka` call back from `approval` to `transfer` based on which the transfer happens.\r\n\r\nInitially, there was only one concept of **approval**, the callbacks were coming fine. Then there was another concept of **conditional approval**, so once the conditional approval was submitted we needed to send a new callback for a different approach.\r\n\r\nBoth the callbacks were written inside a single class (annotated as `@Service`) and accepted as two different methods, with of course two different `topics`. So as the second callback was configured the calls from the `approval` service stopped, but from the logs there was nothing wrong with the `approval` service so we figured that issue was with the newly written callback.\r\n\r\nDue to some **hasty copy &amp; paste** the developer had accidentally given the two callback methods the same name but with a different arguments/payloads.\r\n\r\n    @KafkaListener(topics = TransferConstants.APPROVAL_TOPIC, containerFactory = &quot;ApprovalConcurrentKafkaListenerContainerFactory&quot;)\r\n    public void listen(@Payload Payload approvalRequest) {}\r\n\r\n\r\n    @KafkaListener(topics = TransferConstants.CONDITIONAL_APPROVAL_TOPIC, containerFactory = &quot;ApprovalConcurrentKafkaListenerContainerFactory&quot;)\r\n    public void listen(@Payload ConditionalApprovalPayload conditionalApprovalRequest) {}\r\n\r\nOnce we changed the method names both the callbacks came and it was fine. So, the doubts are \r\n\r\n 1. Why the callback won&#39;t come just because the methods have the same name, even when topics and payloads are different? \r\n 2. What happens internally in Kafka that blocks the callback? \r\n 3. How does the method name come into the picture?","title":"Kafka callback issues with overloaded methods in java","body":"<p>We have two micro-services <code>transfer</code> and <code>approval</code>. The request from <code>transfer</code> will be sent to <code>approval</code> and once approved the funds are transferred. During the submission of approval, there is a <code>Kafka</code> call back from <code>approval</code> to <code>transfer</code> based on which the transfer happens.</p>\n<p>Initially, there was only one concept of <strong>approval</strong>, the callbacks were coming fine. Then there was another concept of <strong>conditional approval</strong>, so once the conditional approval was submitted we needed to send a new callback for a different approach.</p>\n<p>Both the callbacks were written inside a single class (annotated as <code>@Service</code>) and accepted as two different methods, with of course two different <code>topics</code>. So as the second callback was configured the calls from the <code>approval</code> service stopped, but from the logs there was nothing wrong with the <code>approval</code> service so we figured that issue was with the newly written callback.</p>\n<p>Due to some <strong>hasty copy &amp; paste</strong> the developer had accidentally given the two callback methods the same name but with a different arguments/payloads.</p>\n<pre><code>@KafkaListener(topics = TransferConstants.APPROVAL_TOPIC, containerFactory = &quot;ApprovalConcurrentKafkaListenerContainerFactory&quot;)\npublic void listen(@Payload Payload approvalRequest) {}\n\n\n@KafkaListener(topics = TransferConstants.CONDITIONAL_APPROVAL_TOPIC, containerFactory = &quot;ApprovalConcurrentKafkaListenerContainerFactory&quot;)\npublic void listen(@Payload ConditionalApprovalPayload conditionalApprovalRequest) {}\n</code></pre>\n<p>Once we changed the method names both the callbacks came and it was fine. So, the doubts are</p>\n<ol>\n<li>Why the callback won't come just because the methods have the same name, even when topics and payloads are different?</li>\n<li>What happens internally in Kafka that blocks the callback?</li>\n<li>How does the method name come into the picture?</li>\n</ol>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":4325009,"reputation":2727,"user_id":3861128,"accept_rate":71,"display_name":"Abdelghani Roussi"},"score":0,"creation_date":1700017986,"post_id":77483872,"comment_id":136602492,"body_markdown":"what are the issues about this way ? there is another way is to use profiles, but IMHO I prefer what you are already doing !","body":"what are the issues about this way ? there is another way is to use profiles, but IMHO I prefer what you are already doing !"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1700029689,"post_id":77483872,"comment_id":136603432,"body_markdown":"I tried rephrasing to be more specific, but the issue is that the `TestConfig` class creates a DataSource bean that is always used in the test no matter what kinds of annotations I throw at the test.","body":"I tried rephrasing to be more specific, but the issue is that the <code>TestConfig</code> class creates a DataSource bean that is always used in the test no matter what kinds of annotations I throw at the test."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700031836,"post_id":77483872,"comment_id":136603662,"body_markdown":"Which Spring Boot version are you using? Your question states Spring Boot but your tests try very hard to avoid the use of the Spring Boot testing utilities and use the plain Spring test parts only.","body":"Which Spring Boot version are you using? Your question states Spring Boot but your tests try very hard to avoid the use of the Spring Boot testing utilities and use the plain Spring test parts only."},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1700045653,"post_id":77483872,"comment_id":136605854,"body_markdown":"Spring Boot 3.1. It was created in 2015 or so, and just moved over from 2.7 without any real changes (mostly due to avoiding CVE&#39;s).","body":"Spring Boot 3.1. It was created in 2015 or so, and just moved over from 2.7 without any real changes (mostly due to avoiding CVE&#39;s)."},{"owner":{"account_id":6764946,"reputation":570,"user_id":5210225,"accept_rate":50,"display_name":"Dimitris"},"score":0,"creation_date":1700051218,"post_id":77483872,"comment_id":136606796,"body_markdown":"You can also try to use reflection to override these fields. Here is a baeldung guide for it. https://www.baeldung.com/spring-reflection-test-utils","body":"You can also try to use reflection to override these fields. Here is a baeldung guide for it. <a href=\"https://www.baeldung.com/spring-reflection-test-utils\" rel=\"nofollow noreferrer\">baeldung.com/spring-reflection-test-utils</a>"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1700051666,"post_id":77483872,"comment_id":136606860,"body_markdown":"@Dimitris I am not sure how that would help? The problem here is that two DataSource beans are created and that causes subsequent issues.","body":"@Dimitris I am not sure how that would help? The problem here is that two DataSource beans are created and that causes subsequent issues."},{"owner":{"account_id":6764946,"reputation":570,"user_id":5210225,"accept_rate":50,"display_name":"Dimitris"},"score":0,"creation_date":1700052038,"post_id":77483872,"comment_id":136606926,"body_markdown":"My idea was instead of creating a new Datasource for all tests, override it with reflection only when and where needed. I had used it only once myself to override a property in a single test.","body":"My idea was instead of creating a new Datasource for all tests, override it with reflection only when and where needed. I had used it only once myself to override a property in a single test."}],"answers":[{"comments":[{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1700055710,"post_id":77485904,"comment_id":136607645,"body_markdown":"Thanks for the elaborate answer. This is more or less exactly what I did, except the addition of `@Primary`. Unfortunately, that made no difference. All tests run after test errors in just the same fashion as before. Still get `did not find any beans (OnBeanCondition)` big error dump in later tests. I did hook into some of the bean creation methods after seeing your answer and at least I have verified that there is just a single DataSource for all tests, except for the one with the custom setup, where Spring lists two, but still manages to pick the right one. Yet, still the application crashes","body":"Thanks for the elaborate answer. This is more or less exactly what I did, except the addition of <code>@Primary</code>. Unfortunately, that made no difference. All tests run after test errors in just the same fashion as before. Still get <code>did not find any beans (OnBeanCondition)</code> big error dump in later tests. I did hook into some of the bean creation methods after seeing your answer and at least I have verified that there is just a single DataSource for all tests, except for the one with the custom setup, where Spring lists two, but still manages to pick the right one. Yet, still the application crashes"}],"tags":[],"owner":{"account_id":29878386,"reputation":112,"user_id":22897968,"display_name":"aazizzailani"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700033432,"creation_date":1700033432,"answer_id":77485904,"question_id":77483872,"body_markdown":"You can override the `dataSource` method in `TestConfig` for one test without affecting other tests by using the `@Primary` annotation in the configuration class specific to that test. Here&#39;s an example:\r\n\r\nCreate a test-specific configuration class, call `TestSpecificConfig`, which takes an instance of `TestConfig`:\r\n\r\n```java\r\n@Configuration\r\npublic class TestSpecificConfig extends TestConfig {\r\n\r\n     @Primary\r\n     @Bean\r\n     public DataSource dataSource() {\r\n         final var hikariDataSource = new HikariDataSource();\r\n         hikariDataSource.setJdbcUrl(&quot;jdbc:tc:postgresql:15:///databasename&quot;);\r\n         return hikariDataSource;\r\n     }\r\n}\r\n```\r\n\r\nWithin your test class (`RateLimiterTest`), use the `@ContextConfiguration` annotation to define a test-specific configuration class:\r\n\r\n```java\r\n@WebAppConfiguration\r\n@ContextConfiguration(classes = {TestSpecificConfig.class})\r\npublic class RateLimiterTest extends AbstractJUnit4SpringContextTests {\r\n\r\n     // ... the rest of your test code\r\n}\r\n```\r\n\r\nThis way, you create a custom configuration for your test (`TestSpecificConfig`) that replaces the `dataSource` method with the desired implementation. The `@Primary` annotation ensures that this bean has a higher priority than the one defined in the base `TestConfig` during test execution.","title":"How can I override beans created by a @Configuration in a single test?","body":"<p>You can override the <code>dataSource</code> method in <code>TestConfig</code> for one test without affecting other tests by using the <code>@Primary</code> annotation in the configuration class specific to that test. Here's an example:</p>\n<p>Create a test-specific configuration class, call <code>TestSpecificConfig</code>, which takes an instance of <code>TestConfig</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class TestSpecificConfig extends TestConfig {\n\n     @Primary\n     @Bean\n     public DataSource dataSource() {\n         final var hikariDataSource = new HikariDataSource();\n         hikariDataSource.setJdbcUrl(&quot;jdbc:tc:postgresql:15:///databasename&quot;);\n         return hikariDataSource;\n     }\n}\n</code></pre>\n<p>Within your test class (<code>RateLimiterTest</code>), use the <code>@ContextConfiguration</code> annotation to define a test-specific configuration class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WebAppConfiguration\n@ContextConfiguration(classes = {TestSpecificConfig.class})\npublic class RateLimiterTest extends AbstractJUnit4SpringContextTests {\n\n     // ... the rest of your test code\n}\n</code></pre>\n<p>This way, you create a custom configuration for your test (<code>TestSpecificConfig</code>) that replaces the <code>dataSource</code> method with the desired implementation. The <code>@Primary</code> annotation ensures that this bean has a higher priority than the one defined in the base <code>TestConfig</code> during test execution.</p>\n"}],"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700033432,"creation_date":1699996488,"question_id":77483872,"body_markdown":"**tldr** I am trying to override the application settings used by integration tests for _a single test_ in order to use [Testcontainers][1]. I have unsuccessfully tried various approaches.\r\n\r\nAll existing integration tests use the H2 database through a `@Configuration` annotated class called `TestConfig`, seen below.\r\n\r\nAt first I tried setting `@TestPropertySource` annotations on the class and some setup using `@DynamicPropertySource`, [as shown in this guide][2], modified to work with JUnit 4 (using `@ClassRule`). That did not seem to do anything. I also had a look at the [Quickstart for JUnit 4][3] to see if I was missing something, but alas ... \r\n\r\nI then started hacking, _commenting out_ the `dataSource()` method in `TestConfig`, so that no `DataSource` bean was available, and *then* I was able to make the test run using my TestContainers setup, so there is some kind of ordering or precedence I need to control. \r\n\r\nAs can be seen below, the `TestConfig` class filters out the normal database config and application config, and creates alternate beans for the context.\r\n\r\n**TestConfig.java**\r\n```\r\n@Configuration\r\n@ComponentScan(basePackages = {&quot;com.base.package&quot;, &quot;com.base.commons&quot;},\r\n    excludeFilters = {\r\n        @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = ApplicationConfig.class), \r\n        @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = DatabaseConfig.class),\r\n    })\r\npublic class TestConfig {\r\n\r\n    @Bean // this is what I want to override!\r\n    public DataSource dataSource() {\r\n        EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();\r\n        builder.setType(EmbeddedDatabaseType.H2);\r\n        return builder.build();\r\n    }\r\n```\r\n\r\n**RateLimiterTest.java**\r\n```\r\n@WebAppConfiguration\r\n@ContextConfiguration(classes = {TestConfig.class})\r\npublic class RateLimiterTest extends AbstractJUnit4SpringContextTests {\r\n\r\n    @ClassRule\r\n    public static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(&quot;postgres:11&quot;)\r\n            .withDatabaseName(&quot;prop&quot;)\r\n            .withUsername(&quot;postgres&quot;)\r\n            .withPassword(&quot;pass&quot;)\r\n            .withExposedPorts(5432);\r\n\r\n    @DynamicPropertySource\r\n    static void registerPgProperties(DynamicPropertyRegistry registry) {\r\n        registry.add(&quot;spring.datasource.url&quot;,\r\n                () -&gt; String.format(&quot;jdbc:postgresql://localhost:%d/prop&quot;, postgres.getFirstMappedPort()));\r\n        registry.add(&quot;spring.datasource.username&quot;, () -&gt; &quot;postgres&quot;);\r\n        registry.add(&quot;spring.datasource.password&quot;, () -&gt; &quot;pass&quot;);\r\n    }\r\n```\r\n\r\nHow can I override the `TestConfig#dataSource()` method in a &quot;proper&quot; way?\r\n\r\nI also tried extending `TestConfig` like this and using this subclass in the single test class:\r\n```\r\nclass PostgresTestConfig extends TestConfig {\r\n    @Override\r\n    public DataSource dataSource() {\r\n        final var hikariDataSource = new HikariDataSource();\r\n        hikariDataSource.setJdbcUrl(&quot;jdbc:tc:postgresql:15:///databasename&quot;);\r\n        return hikariDataSource;\r\n    }\r\n}\r\n```\r\n\r\nWhile that worked perfectly for this single test instance, it seems to leak out and change the &quot;global&quot; Spring setup, as `mvn test` will now fail on all subsequent tests, as it seems no beans can be created/found:\r\n\r\n```\r\n============================\r\nCONDITIONS EVALUATION REPORT\r\n============================\r\n\r\n\r\nPositive matches:\r\n-----------------\r\n\r\n   AbstractBulkheadConfigurationOnMissingBean#bulkheadRegistry matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.bulkhead.BulkheadRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractBulkheadConfigurationOnMissingBean#compositeBulkheadCustomizer matched:\r\n      - @ConditionalOnMissingBean (names: compositeBulkheadCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractBulkheadConfigurationOnMissingBean#compositeThreadPoolBulkheadCustomizer matched:\r\n      - @ConditionalOnMissingBean (names: compositeThreadPoolBulkheadCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractBulkheadConfigurationOnMissingBean#threadPoolBulkheadRegistry matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.bulkhead.ThreadPoolBulkheadRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractCircuitBreakerConfigurationOnMissingBean#compositeCircuitBreakerCustomizer matched:\r\n      - @ConditionalOnMissingBean (names: compositeCircuitBreakerCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractRateLimiterConfigurationOnMissingBean#compositeRateLimiterCustomizer matched:\r\n      - @ConditionalOnMissingBean (names: compositeRateLimiterCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractRateLimiterConfigurationOnMissingBean#rateLimiterRegistry matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.ratelimiter.RateLimiterRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractRetryConfigurationOnMissingBean#compositeRetryCustomizer matched:\r\n      - @ConditionalOnMissingBean (names: compositeRetryCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractRetryConfigurationOnMissingBean#retryRegistry matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.retry.RetryRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractTimeLimiterConfigurationOnMissingBean#compositeTimeLimiterCustomizer matched:\r\n      - @ConditionalOnMissingBean (names: compositeTimeLimiterCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AbstractTimeLimiterConfigurationOnMissingBean#timeLimiterRegistry matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.timelimiter.TimeLimiterRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   AopAutoConfiguration matched:\r\n      - @ConditionalOnProperty (spring.aop.auto=true) matched (OnPropertyCondition)\r\n\r\n   AopAutoConfiguration.ClassProxyingConfiguration matched:\r\n      - @ConditionalOnMissingClass did not find unwanted class &#39;org.aspectj.weaver.Advice&#39; (OnClassCondition)\r\n      - @ConditionalOnProperty (spring.aop.proxy-target-class=true) matched (OnPropertyCondition)\r\n\r\n   ApplicationAvailabilityAutoConfiguration#applicationAvailability matched:\r\n      - @ConditionalOnMissingBean (types: org.springframework.boot.availability.ApplicationAvailability; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   BulkheadAutoConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;io.github.resilience4j.bulkhead.Bulkhead&#39; (OnClassCondition)\r\n\r\n   BulkheadAutoConfiguration.BulkheadEndpointAutoConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;org.springframework.boot.actuate.endpoint.annotation.Endpoint&#39; (OnClassCondition)\r\n\r\n   BulkheadConfigurationOnMissingBean#bulkheadEventConsumerRegistry matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.bulkhead.event.BulkheadEvent; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   BulkheadMetricsAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;io.micrometer.core.instrument.MeterRegistry&#39;, &#39;io.github.resilience4j.bulkhead.Bulkhead&#39;, &#39;io.github.resilience4j.micrometer.tagged.TaggedBulkheadMetricsPublisher&#39; (OnClassCondition)\r\n      - @ConditionalOnProperty (resilience4j.bulkhead.metrics.enabled) matched (OnPropertyCondition)\r\n\r\n   BulkheadMetricsAutoConfiguration#taggedBulkheadMetricsPublisher matched:\r\n      - @ConditionalOnProperty (resilience4j.bulkhead.metrics.legacy.enabled=false) matched (OnPropertyCondition)\r\n      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean &#39;simpleMeterRegistry&#39;; @ConditionalOnMissingBean (types: io.github.resilience4j.micrometer.tagged.TaggedBulkheadMetricsPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   CacheMeterBinderProvidersConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;io.micrometer.core.instrument.binder.MeterBinder&#39; (OnClassCondition)\r\n\r\n   CircuitBreakerAutoConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;io.github.resilience4j.circuitbreaker.CircuitBreaker&#39; (OnClassCondition)\r\n\r\n   CircuitBreakerAutoConfiguration.CircuitBreakerEndpointAutoConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;org.springframework.boot.actuate.endpoint.annotation.Endpoint&#39; (OnClassCondition)\r\n\r\n   CircuitBreakerConfigurationOnMissingBean#eventConsumerRegistry matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.circuitbreaker.event.CircuitBreakerEvent; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   CircuitBreakerMetricsAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;io.micrometer.core.instrument.MeterRegistry&#39;, &#39;io.github.resilience4j.circuitbreaker.CircuitBreaker&#39;, &#39;io.github.resilience4j.micrometer.tagged.TaggedCircuitBreakerMetricsPublisher&#39; (OnClassCondition)\r\n      - @ConditionalOnProperty (resilience4j.circuitbreaker.metrics.enabled) matched (OnPropertyCondition)\r\n\r\n   CircuitBreakerMetricsAutoConfiguration#taggedCircuitBreakerMetricsPublisher matched:\r\n      - @ConditionalOnProperty (resilience4j.circuitbreaker.metrics.legacy.enabled=false) matched (OnPropertyCondition)\r\n      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean &#39;simpleMeterRegistry&#39;; @ConditionalOnMissingBean (types: io.github.resilience4j.micrometer.tagged.TaggedCircuitBreakerMetricsPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   CircuitBreakersHealthIndicatorAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;io.github.resilience4j.circuitbreaker.CircuitBreaker&#39;, &#39;org.springframework.boot.actuate.health.HealthIndicator&#39;, &#39;org.springframework.boot.actuate.health.StatusAggregator&#39; (OnClassCondition)\r\n\r\n   CompositeMeterRegistryAutoConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;io.micrometer.core.instrument.composite.CompositeMeterRegistry&#39; (OnClassCondition)\r\n\r\n   DataSourceAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;javax.sql.DataSource&#39;, &#39;org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType&#39; (OnClassCondition)\r\n      - @ConditionalOnMissingBean (types: io.r2dbc.spi.ConnectionFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   DataSourceConfiguration.Hikari matched:\r\n      - @ConditionalOnClass found required class &#39;com.zaxxer.hikari.HikariDataSource&#39; (OnClassCondition)\r\n      - @ConditionalOnProperty (spring.datasource.type=com.zaxxer.hikari.HikariDataSource) matched (OnPropertyCondition)\r\n\r\n   DataSourceHealthContributorAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;org.springframework.jdbc.core.JdbcTemplate&#39;, &#39;org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource&#39; (OnClassCondition)\r\n      - @ConditionalOnEnabledHealthIndicator management.health.defaults.enabled is considered true (OnEnabledHealthIndicatorCondition)\r\n      - @ConditionalOnBean (types: javax.sql.DataSource; SearchStrategy: all) found bean &#39;dataSource&#39; (OnBeanCondition)\r\n\r\n   DataSourceHealthContributorAutoConfiguration#dbHealthContributor matched:\r\n      - @ConditionalOnMissingBean (names: dbHealthIndicator,dbHealthContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   DataSourceInitializationConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;org.springframework.jdbc.datasource.init.DatabasePopulator&#39; (OnClassCondition)\r\n      - @ConditionalOnSingleCandidate (types: javax.sql.DataSource; SearchStrategy: all) found a single bean &#39;dataSource&#39;; @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.sql.init.SqlDataSourceScriptDatabaseInitializer,org.springframework.boot.autoconfigure.sql.init.SqlR2dbcScriptDatabaseInitializer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   DataSourceJmxConfiguration matched:\r\n      - @ConditionalOnProperty (spring.jmx.enabled=true) matched (OnPropertyCondition)\r\n\r\n   DataSourceJmxConfiguration.Hikari matched:\r\n      - @ConditionalOnClass found required class &#39;com.zaxxer.hikari.HikariDataSource&#39; (OnClassCondition)\r\n\r\n   DataSourcePoolMetadataProvidersConfiguration.HikariPoolDataSourceMetadataProviderConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;com.zaxxer.hikari.HikariDataSource&#39; (OnClassCondition)\r\n\r\n   DataSourcePoolMetricsAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;javax.sql.DataSource&#39;, &#39;io.micrometer.core.instrument.MeterRegistry&#39; (OnClassCondition)\r\n      - @ConditionalOnBean (types: javax.sql.DataSource,io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found beans &#39;simpleMeterRegistry&#39;, &#39;dataSource&#39; (OnBeanCondition)\r\n\r\n   DataSourcePoolMetricsAutoConfiguration.DataSourcePoolMetadataMetricsConfiguration matched:\r\n      - @ConditionalOnBean (types: org.springframework.boot.jdbc.metadata.DataSourcePoolMetadataProvider; SearchStrategy: all) found bean &#39;hikariPoolDataSourceMetadataProvider&#39; (OnBeanCondition)\r\n\r\n   DataSourcePoolMetricsAutoConfiguration.HikariDataSourceMetricsConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;com.zaxxer.hikari.HikariDataSource&#39; (OnClassCondition)\r\n\r\n   DataSourceTransactionManagerAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;org.springframework.jdbc.core.JdbcTemplate&#39;, &#39;org.springframework.transaction.TransactionManager&#39; (OnClassCondition)\r\n\r\n   DataSourceTransactionManagerAutoConfiguration.JdbcTransactionManagerConfiguration matched:\r\n      - @ConditionalOnSingleCandidate (types: javax.sql.DataSource; SearchStrategy: all) found a single bean &#39;dataSource&#39; (OnBeanCondition)\r\n\r\n   DiskSpaceHealthContributorAutoConfiguration matched:\r\n      - @ConditionalOnEnabledHealthIndicator management.health.defaults.enabled is considered true (OnEnabledHealthIndicatorCondition)\r\n\r\n   DiskSpaceHealthContributorAutoConfiguration#diskSpaceHealthIndicator matched:\r\n      - @ConditionalOnMissingBean (names: diskSpaceHealthIndicator; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   DispatcherServletAutoConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;org.springframework.web.servlet.DispatcherServlet&#39; (OnClassCondition)\r\n      - found &#39;session&#39; scope (OnWebApplicationCondition)\r\n\r\n   DispatcherServletAutoConfiguration.DispatcherServletConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;jakarta.servlet.ServletRegistration&#39; (OnClassCondition)\r\n      - Default DispatcherServlet did not find dispatcher servlet beans (DispatcherServletAutoConfiguration.DefaultDispatcherServletCondition)\r\n\r\n   DispatcherServletAutoConfiguration.DispatcherServletRegistrationConfiguration matched:\r\n      - @ConditionalOnClass found required class &#39;jakarta.servlet.ServletRegistration&#39; (OnClassCondition)\r\n      - DispatcherServlet Registration did not find servlet registration bean (DispatcherServletAutoConfiguration.DispatcherServletRegistrationCondition)\r\n\r\n   DispatcherServletAutoConfiguration.DispatcherServletRegistrationConfiguration#dispatcherServletRegistration matched:\r\n      - @ConditionalOnBean (names: dispatcherServlet types: org.springframework.web.servlet.DispatcherServlet; SearchStrategy: all) found bean &#39;dispatcherServlet&#39; (OnBeanCondition)\r\n\r\n   EndpointAutoConfiguration#endpointCachingOperationInvokerAdvisor matched:\r\n      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.endpoint.invoker.cache.CachingOperationInvokerAdvisor; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   EndpointAutoConfiguration#endpointOperationParameterMapper matched:\r\n      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.endpoint.invoke.ParameterValueMapper; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   ErrorMvcAutoConfiguration matched:\r\n      - @ConditionalOnClass found required classes &#39;jakarta.servlet.Servlet&#39;, &#39;org.springframework.web.servlet.DispatcherServlet&#39; (OnClassCondition)\r\n      - found &#39;session&#39; scope (OnWebApplicationCondition)\r\n\r\n   ErrorMvcAutoConfiguration#basicErrorController matched:\r\n      - @ConditionalOnMissingBean (types: org.springframework.boot.web.servlet.error.ErrorController; SearchStrategy: current) did not find any beans (OnBeanCondition)\r\n\r\n   ErrorMvcAutoConfiguration#errorAttributes matched:\r\n      - @ConditionalOnMissingBean (types: org.springframework.boot.web.servlet.error.ErrorAttributes; SearchStrategy: current) did not find any beans (OnBeanCondition)\r\n\r\n   ErrorMvcAutoConfiguration.DefaultErrorViewResolverConfiguration#conventionErrorViewResolver matched:\r\n      - @ConditionalOnBean (types: org.springframework.web.servlet.DispatcherServlet; SearchStrategy: all) found bean &#39;dispatcherServlet&#39;; @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.web.servlet.error.ErrorViewResolver; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   ErrorMvcAutoConfiguration.WhitelabelErrorViewConfiguration matched:\r\n      - @ConditionalOnProperty (server.error.whitelabel.enabled) matched (OnPropertyCondition)\r\n      - ErrorTemplate Missing did not find error template view (ErrorMvcAutoConfiguration.ErrorTemplateMissingCondition)\r\n\r\n   ErrorMvcAutoConfiguration.WhitelabelErrorViewConfiguration#beanNameViewResolver matched:\r\n      - @ConditionalOnMissingBean (types: org.springframework.web.servlet.view.BeanNameViewResolver; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   ErrorMvcAutoConfiguration.WhitelabelErrorViewConfiguration#defaultErrorView matched:\r\n      - @ConditionalOnMissingBean (names: error; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n   FallbackConfigurationOnMissingBean#completionStageFallbackDecorator matched:\r\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.spring6.fallback.CompletionStageFallbackDecorator; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n...\r\n```\r\n\r\n  [1]: https://testcontainers.com/guides/replace-h2-with-real-database-for-testing/\r\n  [2]: https://testcontainers.com/guides/replace-h2-with-real-database-for-testing/?_gl=1*1o7ywgx*_up*MQ..*_ga*MTUyNzEzNTc4OC4xNzAwMDI0NTQy*_ga_22TYV8FBPD*MTcwMDAyNDU0MC4xLjEuMTcwMDAyNDU1My4wLjAuMA..#_testing_jdbctemplate_based_repositories\r\n  [3]: https://java.testcontainers.org/quickstart/junit_4_quickstart/","title":"How can I override beans created by a @Configuration in a single test?","body":"<p><strong>tldr</strong> I am trying to override the application settings used by integration tests for <em>a single test</em> in order to use <a href=\"https://testcontainers.com/guides/replace-h2-with-real-database-for-testing/\" rel=\"nofollow noreferrer\">Testcontainers</a>. I have unsuccessfully tried various approaches.</p>\n<p>All existing integration tests use the H2 database through a <code>@Configuration</code> annotated class called <code>TestConfig</code>, seen below.</p>\n<p>At first I tried setting <code>@TestPropertySource</code> annotations on the class and some setup using <code>@DynamicPropertySource</code>, <a href=\"https://testcontainers.com/guides/replace-h2-with-real-database-for-testing/?_gl=1*1o7ywgx*_up*MQ..*_ga*MTUyNzEzNTc4OC4xNzAwMDI0NTQy*_ga_22TYV8FBPD*MTcwMDAyNDU0MC4xLjEuMTcwMDAyNDU1My4wLjAuMA..#_testing_jdbctemplate_based_repositories\" rel=\"nofollow noreferrer\">as shown in this guide</a>, modified to work with JUnit 4 (using <code>@ClassRule</code>). That did not seem to do anything. I also had a look at the <a href=\"https://java.testcontainers.org/quickstart/junit_4_quickstart/\" rel=\"nofollow noreferrer\">Quickstart for JUnit 4</a> to see if I was missing something, but alas ...</p>\n<p>I then started hacking, <em>commenting out</em> the <code>dataSource()</code> method in <code>TestConfig</code>, so that no <code>DataSource</code> bean was available, and <em>then</em> I was able to make the test run using my TestContainers setup, so there is some kind of ordering or precedence I need to control.</p>\n<p>As can be seen below, the <code>TestConfig</code> class filters out the normal database config and application config, and creates alternate beans for the context.</p>\n<p><strong>TestConfig.java</strong></p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = {&quot;com.base.package&quot;, &quot;com.base.commons&quot;},\n    excludeFilters = {\n        @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = ApplicationConfig.class), \n        @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = DatabaseConfig.class),\n    })\npublic class TestConfig {\n\n    @Bean // this is what I want to override!\n    public DataSource dataSource() {\n        EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();\n        builder.setType(EmbeddedDatabaseType.H2);\n        return builder.build();\n    }\n</code></pre>\n<p><strong>RateLimiterTest.java</strong></p>\n<pre><code>@WebAppConfiguration\n@ContextConfiguration(classes = {TestConfig.class})\npublic class RateLimiterTest extends AbstractJUnit4SpringContextTests {\n\n    @ClassRule\n    public static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(&quot;postgres:11&quot;)\n            .withDatabaseName(&quot;prop&quot;)\n            .withUsername(&quot;postgres&quot;)\n            .withPassword(&quot;pass&quot;)\n            .withExposedPorts(5432);\n\n    @DynamicPropertySource\n    static void registerPgProperties(DynamicPropertyRegistry registry) {\n        registry.add(&quot;spring.datasource.url&quot;,\n                () -&gt; String.format(&quot;jdbc:postgresql://localhost:%d/prop&quot;, postgres.getFirstMappedPort()));\n        registry.add(&quot;spring.datasource.username&quot;, () -&gt; &quot;postgres&quot;);\n        registry.add(&quot;spring.datasource.password&quot;, () -&gt; &quot;pass&quot;);\n    }\n</code></pre>\n<p>How can I override the <code>TestConfig#dataSource()</code> method in a &quot;proper&quot; way?</p>\n<p>I also tried extending <code>TestConfig</code> like this and using this subclass in the single test class:</p>\n<pre><code>class PostgresTestConfig extends TestConfig {\n    @Override\n    public DataSource dataSource() {\n        final var hikariDataSource = new HikariDataSource();\n        hikariDataSource.setJdbcUrl(&quot;jdbc:tc:postgresql:15:///databasename&quot;);\n        return hikariDataSource;\n    }\n}\n</code></pre>\n<p>While that worked perfectly for this single test instance, it seems to leak out and change the &quot;global&quot; Spring setup, as <code>mvn test</code> will now fail on all subsequent tests, as it seems no beans can be created/found:</p>\n<pre><code>============================\nCONDITIONS EVALUATION REPORT\n============================\n\n\nPositive matches:\n-----------------\n\n   AbstractBulkheadConfigurationOnMissingBean#bulkheadRegistry matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.bulkhead.BulkheadRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractBulkheadConfigurationOnMissingBean#compositeBulkheadCustomizer matched:\n      - @ConditionalOnMissingBean (names: compositeBulkheadCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractBulkheadConfigurationOnMissingBean#compositeThreadPoolBulkheadCustomizer matched:\n      - @ConditionalOnMissingBean (names: compositeThreadPoolBulkheadCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractBulkheadConfigurationOnMissingBean#threadPoolBulkheadRegistry matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.bulkhead.ThreadPoolBulkheadRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractCircuitBreakerConfigurationOnMissingBean#compositeCircuitBreakerCustomizer matched:\n      - @ConditionalOnMissingBean (names: compositeCircuitBreakerCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractRateLimiterConfigurationOnMissingBean#compositeRateLimiterCustomizer matched:\n      - @ConditionalOnMissingBean (names: compositeRateLimiterCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractRateLimiterConfigurationOnMissingBean#rateLimiterRegistry matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.ratelimiter.RateLimiterRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractRetryConfigurationOnMissingBean#compositeRetryCustomizer matched:\n      - @ConditionalOnMissingBean (names: compositeRetryCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractRetryConfigurationOnMissingBean#retryRegistry matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.retry.RetryRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractTimeLimiterConfigurationOnMissingBean#compositeTimeLimiterCustomizer matched:\n      - @ConditionalOnMissingBean (names: compositeTimeLimiterCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AbstractTimeLimiterConfigurationOnMissingBean#timeLimiterRegistry matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.timelimiter.TimeLimiterRegistry; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   AopAutoConfiguration matched:\n      - @ConditionalOnProperty (spring.aop.auto=true) matched (OnPropertyCondition)\n\n   AopAutoConfiguration.ClassProxyingConfiguration matched:\n      - @ConditionalOnMissingClass did not find unwanted class 'org.aspectj.weaver.Advice' (OnClassCondition)\n      - @ConditionalOnProperty (spring.aop.proxy-target-class=true) matched (OnPropertyCondition)\n\n   ApplicationAvailabilityAutoConfiguration#applicationAvailability matched:\n      - @ConditionalOnMissingBean (types: org.springframework.boot.availability.ApplicationAvailability; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   BulkheadAutoConfiguration matched:\n      - @ConditionalOnClass found required class 'io.github.resilience4j.bulkhead.Bulkhead' (OnClassCondition)\n\n   BulkheadAutoConfiguration.BulkheadEndpointAutoConfiguration matched:\n      - @ConditionalOnClass found required class 'org.springframework.boot.actuate.endpoint.annotation.Endpoint' (OnClassCondition)\n\n   BulkheadConfigurationOnMissingBean#bulkheadEventConsumerRegistry matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.bulkhead.event.BulkheadEvent; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   BulkheadMetricsAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'io.micrometer.core.instrument.MeterRegistry', 'io.github.resilience4j.bulkhead.Bulkhead', 'io.github.resilience4j.micrometer.tagged.TaggedBulkheadMetricsPublisher' (OnClassCondition)\n      - @ConditionalOnProperty (resilience4j.bulkhead.metrics.enabled) matched (OnPropertyCondition)\n\n   BulkheadMetricsAutoConfiguration#taggedBulkheadMetricsPublisher matched:\n      - @ConditionalOnProperty (resilience4j.bulkhead.metrics.legacy.enabled=false) matched (OnPropertyCondition)\n      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'simpleMeterRegistry'; @ConditionalOnMissingBean (types: io.github.resilience4j.micrometer.tagged.TaggedBulkheadMetricsPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   CacheMeterBinderProvidersConfiguration matched:\n      - @ConditionalOnClass found required class 'io.micrometer.core.instrument.binder.MeterBinder' (OnClassCondition)\n\n   CircuitBreakerAutoConfiguration matched:\n      - @ConditionalOnClass found required class 'io.github.resilience4j.circuitbreaker.CircuitBreaker' (OnClassCondition)\n\n   CircuitBreakerAutoConfiguration.CircuitBreakerEndpointAutoConfiguration matched:\n      - @ConditionalOnClass found required class 'org.springframework.boot.actuate.endpoint.annotation.Endpoint' (OnClassCondition)\n\n   CircuitBreakerConfigurationOnMissingBean#eventConsumerRegistry matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.circuitbreaker.event.CircuitBreakerEvent; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   CircuitBreakerMetricsAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'io.micrometer.core.instrument.MeterRegistry', 'io.github.resilience4j.circuitbreaker.CircuitBreaker', 'io.github.resilience4j.micrometer.tagged.TaggedCircuitBreakerMetricsPublisher' (OnClassCondition)\n      - @ConditionalOnProperty (resilience4j.circuitbreaker.metrics.enabled) matched (OnPropertyCondition)\n\n   CircuitBreakerMetricsAutoConfiguration#taggedCircuitBreakerMetricsPublisher matched:\n      - @ConditionalOnProperty (resilience4j.circuitbreaker.metrics.legacy.enabled=false) matched (OnPropertyCondition)\n      - @ConditionalOnBean (types: io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found bean 'simpleMeterRegistry'; @ConditionalOnMissingBean (types: io.github.resilience4j.micrometer.tagged.TaggedCircuitBreakerMetricsPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   CircuitBreakersHealthIndicatorAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'io.github.resilience4j.circuitbreaker.CircuitBreaker', 'org.springframework.boot.actuate.health.HealthIndicator', 'org.springframework.boot.actuate.health.StatusAggregator' (OnClassCondition)\n\n   CompositeMeterRegistryAutoConfiguration matched:\n      - @ConditionalOnClass found required class 'io.micrometer.core.instrument.composite.CompositeMeterRegistry' (OnClassCondition)\n\n   DataSourceAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'javax.sql.DataSource', 'org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType' (OnClassCondition)\n      - @ConditionalOnMissingBean (types: io.r2dbc.spi.ConnectionFactory; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   DataSourceConfiguration.Hikari matched:\n      - @ConditionalOnClass found required class 'com.zaxxer.hikari.HikariDataSource' (OnClassCondition)\n      - @ConditionalOnProperty (spring.datasource.type=com.zaxxer.hikari.HikariDataSource) matched (OnPropertyCondition)\n\n   DataSourceHealthContributorAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'org.springframework.jdbc.core.JdbcTemplate', 'org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource' (OnClassCondition)\n      - @ConditionalOnEnabledHealthIndicator management.health.defaults.enabled is considered true (OnEnabledHealthIndicatorCondition)\n      - @ConditionalOnBean (types: javax.sql.DataSource; SearchStrategy: all) found bean 'dataSource' (OnBeanCondition)\n\n   DataSourceHealthContributorAutoConfiguration#dbHealthContributor matched:\n      - @ConditionalOnMissingBean (names: dbHealthIndicator,dbHealthContributor; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   DataSourceInitializationConfiguration matched:\n      - @ConditionalOnClass found required class 'org.springframework.jdbc.datasource.init.DatabasePopulator' (OnClassCondition)\n      - @ConditionalOnSingleCandidate (types: javax.sql.DataSource; SearchStrategy: all) found a single bean 'dataSource'; @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.sql.init.SqlDataSourceScriptDatabaseInitializer,org.springframework.boot.autoconfigure.sql.init.SqlR2dbcScriptDatabaseInitializer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   DataSourceJmxConfiguration matched:\n      - @ConditionalOnProperty (spring.jmx.enabled=true) matched (OnPropertyCondition)\n\n   DataSourceJmxConfiguration.Hikari matched:\n      - @ConditionalOnClass found required class 'com.zaxxer.hikari.HikariDataSource' (OnClassCondition)\n\n   DataSourcePoolMetadataProvidersConfiguration.HikariPoolDataSourceMetadataProviderConfiguration matched:\n      - @ConditionalOnClass found required class 'com.zaxxer.hikari.HikariDataSource' (OnClassCondition)\n\n   DataSourcePoolMetricsAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'javax.sql.DataSource', 'io.micrometer.core.instrument.MeterRegistry' (OnClassCondition)\n      - @ConditionalOnBean (types: javax.sql.DataSource,io.micrometer.core.instrument.MeterRegistry; SearchStrategy: all) found beans 'simpleMeterRegistry', 'dataSource' (OnBeanCondition)\n\n   DataSourcePoolMetricsAutoConfiguration.DataSourcePoolMetadataMetricsConfiguration matched:\n      - @ConditionalOnBean (types: org.springframework.boot.jdbc.metadata.DataSourcePoolMetadataProvider; SearchStrategy: all) found bean 'hikariPoolDataSourceMetadataProvider' (OnBeanCondition)\n\n   DataSourcePoolMetricsAutoConfiguration.HikariDataSourceMetricsConfiguration matched:\n      - @ConditionalOnClass found required class 'com.zaxxer.hikari.HikariDataSource' (OnClassCondition)\n\n   DataSourceTransactionManagerAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'org.springframework.jdbc.core.JdbcTemplate', 'org.springframework.transaction.TransactionManager' (OnClassCondition)\n\n   DataSourceTransactionManagerAutoConfiguration.JdbcTransactionManagerConfiguration matched:\n      - @ConditionalOnSingleCandidate (types: javax.sql.DataSource; SearchStrategy: all) found a single bean 'dataSource' (OnBeanCondition)\n\n   DiskSpaceHealthContributorAutoConfiguration matched:\n      - @ConditionalOnEnabledHealthIndicator management.health.defaults.enabled is considered true (OnEnabledHealthIndicatorCondition)\n\n   DiskSpaceHealthContributorAutoConfiguration#diskSpaceHealthIndicator matched:\n      - @ConditionalOnMissingBean (names: diskSpaceHealthIndicator; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   DispatcherServletAutoConfiguration matched:\n      - @ConditionalOnClass found required class 'org.springframework.web.servlet.DispatcherServlet' (OnClassCondition)\n      - found 'session' scope (OnWebApplicationCondition)\n\n   DispatcherServletAutoConfiguration.DispatcherServletConfiguration matched:\n      - @ConditionalOnClass found required class 'jakarta.servlet.ServletRegistration' (OnClassCondition)\n      - Default DispatcherServlet did not find dispatcher servlet beans (DispatcherServletAutoConfiguration.DefaultDispatcherServletCondition)\n\n   DispatcherServletAutoConfiguration.DispatcherServletRegistrationConfiguration matched:\n      - @ConditionalOnClass found required class 'jakarta.servlet.ServletRegistration' (OnClassCondition)\n      - DispatcherServlet Registration did not find servlet registration bean (DispatcherServletAutoConfiguration.DispatcherServletRegistrationCondition)\n\n   DispatcherServletAutoConfiguration.DispatcherServletRegistrationConfiguration#dispatcherServletRegistration matched:\n      - @ConditionalOnBean (names: dispatcherServlet types: org.springframework.web.servlet.DispatcherServlet; SearchStrategy: all) found bean 'dispatcherServlet' (OnBeanCondition)\n\n   EndpointAutoConfiguration#endpointCachingOperationInvokerAdvisor matched:\n      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.endpoint.invoker.cache.CachingOperationInvokerAdvisor; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   EndpointAutoConfiguration#endpointOperationParameterMapper matched:\n      - @ConditionalOnMissingBean (types: org.springframework.boot.actuate.endpoint.invoke.ParameterValueMapper; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   ErrorMvcAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'jakarta.servlet.Servlet', 'org.springframework.web.servlet.DispatcherServlet' (OnClassCondition)\n      - found 'session' scope (OnWebApplicationCondition)\n\n   ErrorMvcAutoConfiguration#basicErrorController matched:\n      - @ConditionalOnMissingBean (types: org.springframework.boot.web.servlet.error.ErrorController; SearchStrategy: current) did not find any beans (OnBeanCondition)\n\n   ErrorMvcAutoConfiguration#errorAttributes matched:\n      - @ConditionalOnMissingBean (types: org.springframework.boot.web.servlet.error.ErrorAttributes; SearchStrategy: current) did not find any beans (OnBeanCondition)\n\n   ErrorMvcAutoConfiguration.DefaultErrorViewResolverConfiguration#conventionErrorViewResolver matched:\n      - @ConditionalOnBean (types: org.springframework.web.servlet.DispatcherServlet; SearchStrategy: all) found bean 'dispatcherServlet'; @ConditionalOnMissingBean (types: org.springframework.boot.autoconfigure.web.servlet.error.ErrorViewResolver; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   ErrorMvcAutoConfiguration.WhitelabelErrorViewConfiguration matched:\n      - @ConditionalOnProperty (server.error.whitelabel.enabled) matched (OnPropertyCondition)\n      - ErrorTemplate Missing did not find error template view (ErrorMvcAutoConfiguration.ErrorTemplateMissingCondition)\n\n   ErrorMvcAutoConfiguration.WhitelabelErrorViewConfiguration#beanNameViewResolver matched:\n      - @ConditionalOnMissingBean (types: org.springframework.web.servlet.view.BeanNameViewResolver; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   ErrorMvcAutoConfiguration.WhitelabelErrorViewConfiguration#defaultErrorView matched:\n      - @ConditionalOnMissingBean (names: error; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   FallbackConfigurationOnMissingBean#completionStageFallbackDecorator matched:\n      - @ConditionalOnMissingBean (types: io.github.resilience4j.spring6.fallback.CompletionStageFallbackDecorator; SearchStrategy: all) did not find any beans (OnBeanCondition)\n...\n</code></pre>\n"},{"tags":["java","point"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1379904884,"post_id":18951124,"comment_id":27986752,"body_markdown":"Huh? What *exactly* has you stumped? What *can* you do, and what trips you up? Please clarify this for us, including showing us more good and even bad code.","body":"Huh? What <i>exactly</i> has you stumped? What <i>can</i> you do, and what trips you up? Please clarify this for us, including showing us more good and even bad code."},{"owner":{"account_id":3338913,"reputation":57,"user_id":2805609,"display_name":"Jake Burch"},"score":0,"creation_date":1379905022,"post_id":18951124,"comment_id":27986775,"body_markdown":"I&#39;m to create a class that holds the x and y coordinate of a point on the cartesian plane and return it in the form &quot;(X,Y)&quot;.","body":"I&#39;m to create a class that holds the x and y coordinate of a point on the cartesian plane and return it in the form &quot;(X,Y)&quot;."},{"owner":{"account_id":3338913,"reputation":57,"user_id":2805609,"display_name":"Jake Burch"},"score":0,"creation_date":1379905139,"post_id":18951124,"comment_id":27986801,"body_markdown":"public class Point {\n \n    private final double x;\n    private final double y;\n\n    public Point(double x, double y) {\n    \tthis.x = 1;\n    \tthis.y = 1;\n    }\n    \n \n    public double getX() {\n        return x;\n    }\n \n    public double getY() {\n        return y;\n    }\n \n \n    @Override\n    public String toString() {\n        return (&quot;(&quot; + x + &quot;,&quot; + y + &quot;)&quot;); \n    }\n}","body":"public class Point {       private final double x;     private final double y;      public Point(double x, double y) {     \tthis.x = 1;     \tthis.y = 1;     }            public double getX() {         return x;     }       public double getY() {         return y;     }         @Override     public String toString() {         return (&quot;(&quot; + x + &quot;,&quot; + y + &quot;)&quot;);      } }"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1379905164,"post_id":18951124,"comment_id":27986807,"body_markdown":"Please edit your original question and supply this information there where we can read it. There&#39;s an edit button just below the question tags. Then show us how you try to use your Point class, and what problems your code attempts are havng.","body":"Please edit your original question and supply this information there where we can read it. There&#39;s an edit button just below the question tags. Then show us how you try to use your Point class, and what problems your code attempts are havng."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1379905545,"post_id":18951124,"comment_id":27986892,"body_markdown":"Why are you setting `x` and `y` to 1 in your constructor?  That seems like an odd thing to do.","body":"Why are you setting <code>x</code> and <code>y</code> to 1 in your constructor?  That seems like an odd thing to do."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":4,"creation_date":1379905669,"post_id":18951124,"comment_id":27986925,"body_markdown":"OK, so what is your question exactly?  What doesn&#39;t work for you?","body":"OK, so what is your question exactly?  What doesn&#39;t work for you?"}],"answers":[{"tags":[],"owner":{"account_id":3264696,"reputation":3191,"user_id":2749401,"accept_rate":100,"display_name":"William Gaul"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1379905570,"creation_date":1379905570,"answer_id":18951219,"question_id":18951124,"body_markdown":"You might want to do this instead:\r\n\r\n    public Point(double x, double y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\nThen...\r\n\r\n    System.out.println(new Point(5.0, 5.0).toString());\r\nI don&#39;t know why you&#39;re setting the this.x and this.y values to 1 in your constructor. You should be setting them to the provided values of x and y.\r\n\r\nYou also don&#39;t need the outer set of parentheses in the `toString()` method. `return &quot;(&quot; + x + &quot;,&quot; + y + &quot;)&quot;;` will work fine.","title":"An example of the use of the Point class?","body":"<p>You might want to do this instead:</p>\n\n<pre><code>public Point(double x, double y) {\n    this.x = x;\n    this.y = y;\n}\n</code></pre>\n\n<p>Then...</p>\n\n<pre><code>System.out.println(new Point(5.0, 5.0).toString());\n</code></pre>\n\n<p>I don't know why you're setting the this.x and this.y values to 1 in your constructor. You should be setting them to the provided values of x and y.</p>\n\n<p>You also don't need the outer set of parentheses in the <code>toString()</code> method. <code>return \"(\" + x + \",\" + y + \")\";</code> will work fine.</p>\n"},{"tags":[],"owner":{"account_id":2626486,"reputation":93,"user_id":2273373,"display_name":"Nico"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1379906395,"creation_date":1379905892,"answer_id":18951253,"question_id":18951124,"body_markdown":"I think you look for that:\r\n\r\n  \r\n    public class Point {\r\n\tprivate double x;\r\n\tprivate double y;\r\n\t\r\n\tpublic Point(double x, double y){\r\n\t\tthis.x=x;\r\n\t\tthis.y=y;\r\n\t}public String toString(){\r\n\t\treturn &quot;(&quot;+ this.x+&quot;,&quot;+this.y+&quot;)&quot;;\r\n\t}\r\n    public static void main(String[] args){\r\n\t\tPoint point= new Point(3,2);\r\n                System.out.println(point.tostring());\r\n        }\r\n    }\r\n\r\nto had getX() getY() just have to create them.","title":"An example of the use of the Point class?","body":"<p>I think you look for that:</p>\n\n<pre><code>public class Point {\nprivate double x;\nprivate double y;\n\npublic Point(double x, double y){\n    this.x=x;\n    this.y=y;\n}public String toString(){\n    return \"(\"+ this.x+\",\"+this.y+\")\";\n}\npublic static void main(String[] args){\n    Point point= new Point(3,2);\n            System.out.println(point.tostring());\n    }\n}\n</code></pre>\n\n<p>to had getX() getY() just have to create them.</p>\n"},{"tags":[],"owner":{"account_id":16831898,"reputation":46,"user_id":12169662,"display_name":"Special_octo20"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700033363,"creation_date":1700033363,"answer_id":77485898,"question_id":18951124,"body_markdown":"Same could be done with just the data class in Kotlin, with like this:\r\n\r\n&lt;!-- language: lang-kotlin--&gt;\r\n\r\n    data class Point(val x: Double, val y: Double)\r\n\r\n&lt;!-- end snippet --&gt;\r\nYou can access all the methods above without creating it. Something like this:\r\n```kotlin\r\nval point = Point(3.0,4.0)\r\nval result = point.toString()\r\n```\r\n\r\n","title":"An example of the use of the Point class?","body":"<p>Same could be done with just the data class in Kotlin, with like this:</p>\n\n<pre><code>data class Point(val x: Double, val y: Double)\n</code></pre>\n\n<p>You can access all the methods above without creating it. Something like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val point = Point(3.0,4.0)\nval result = point.toString()\n</code></pre>\n"}],"owner":{"account_id":3338913,"reputation":57,"user_id":2805609,"display_name":"Jake Burch"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75261,"favorite_count":0,"down_vote_count":3,"up_vote_count":6,"accepted_answer_id":18951219,"answer_count":3,"score":3,"last_activity_date":1700033363,"creation_date":1379904831,"question_id":18951124,"body_markdown":"I&#39;m trying to use `Point(double x, double y), getX(), getY()` to create a point and return it with `toString()`. I can&#39;t find an example of how to do this anywhere.\r\n\r\n    public class Point {\r\n     \r\n        private final double x;\r\n        private final double y;\r\n    \r\n        public Point(double x, double y) {\r\n        \tthis.x = x;\r\n        \tthis.y = y;\r\n        }\r\n        \r\n     \r\n        public double getX() {\r\n            return x;\r\n        }\r\n     \r\n        public double getY() {\r\n            return y;\r\n        }\r\n     \r\n     \r\n        @Override\r\n        public String toString() {\r\n            return (&quot;(&quot; + x + &quot;,&quot; + y + &quot;)&quot;); \r\n        }\r\n    }\r\n\r\n","title":"An example of the use of the Point class?","body":"<p>I'm trying to use <code>Point(double x, double y), getX(), getY()</code> to create a point and return it with <code>toString()</code>. I can't find an example of how to do this anywhere.</p>\n\n<pre><code>public class Point {\n\n    private final double x;\n    private final double y;\n\n    public Point(double x, double y) {\n        this.x = x;\n        this.y = y;\n    }\n\n\n    public double getX() {\n        return x;\n    }\n\n    public double getY() {\n        return y;\n    }\n\n\n    @Override\n    public String toString() {\n        return (\"(\" + x + \",\" + y + \")\"); \n    }\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":16599380,"reputation":506,"user_id":11995503,"display_name":"Adesoji Alu"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1699995241,"creation_date":1699991723,"answer_id":77483463,"question_id":77483442,"body_markdown":"## `BigInteger`\r\n\r\nTo Resolve your error, you should use [`BigInteger`][1], designed for calculations with very large integers. The `BigInteger` class in Java provides methods for modular exponentiation and modulus operations that can handle large numbers without losing precision. \r\n\r\nYou could modify it like this, your output should be 99:\r\n\r\n```java\r\nimport java.math.BigInteger;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n        BigInteger eData = new BigInteger(&quot;176&quot;);\r\n        BigInteger PK = new BigInteger(&quot;23&quot;);\r\n        BigInteger N = new BigInteger(&quot;187&quot;);\r\n\r\n        // Modular exponentiation\r\n        BigInteger x = eData.modPow(PK, N);\r\n\r\n        System.out.println(&quot;Decrypted data :&quot;);\r\n        System.out.println(x);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/math/BigInteger.html","title":"Why does this Java program calculate incorrectly","body":"<h2><code>BigInteger</code></h2>\n<p>To Resolve your error, you should use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\"><code>BigInteger</code></a>, designed for calculations with very large integers. The <code>BigInteger</code> class in Java provides methods for modular exponentiation and modulus operations that can handle large numbers without losing precision.</p>\n<p>You could modify it like this, your output should be 99:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.math.BigInteger;\n\npublic class Test {\n    public static void main(String[] args) {\n        BigInteger eData = new BigInteger(&quot;176&quot;);\n        BigInteger PK = new BigInteger(&quot;23&quot;);\n        BigInteger N = new BigInteger(&quot;187&quot;);\n\n        // Modular exponentiation\n        BigInteger x = eData.modPow(PK, N);\n\n        System.out.println(&quot;Decrypted data :&quot;);\n        System.out.println(x);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10473517,"reputation":13,"user_id":7720749,"display_name":"Alan Jarvis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77483463,"answer_count":1,"score":0,"last_activity_date":1700032787,"creation_date":1699991397,"question_id":77483442,"body_markdown":"The following program is part of a larger program demonstrating how public and private keys work but it gives the wrong answer. It gives a result of 123.0 but if you do the calculation in Windows Calculator or in a Python version it gives a result of 99 \r\n```java\r\npublic class test {\r\n\tpublic static void main(String[] args) {\r\n\t    int eData = 176;\r\n\t    int PK = 23;\r\n\t    int N = 187;\r\n\t    double x = Math.pow(eData, PK);\r\n\t    double unenData = x % N;\r\n\t    System.out.println (&quot;Decrypted data :&quot;);\r\n\t    System.out.println (unenData);\r\n\t}\r\n}\r\n```\r\n\r\nThe program gives a result of 12.0, I was expecting the result of 99.\r\nThanks in advance for your help.","title":"Why does this Java program calculate incorrectly","body":"<p>The following program is part of a larger program demonstrating how public and private keys work but it gives the wrong answer. It gives a result of 123.0 but if you do the calculation in Windows Calculator or in a Python version it gives a result of 99</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class test {\n    public static void main(String[] args) {\n        int eData = 176;\n        int PK = 23;\n        int N = 187;\n        double x = Math.pow(eData, PK);\n        double unenData = x % N;\n        System.out.println (&quot;Decrypted data :&quot;);\n        System.out.println (unenData);\n    }\n}\n</code></pre>\n<p>The program gives a result of 12.0, I was expecting the result of 99.\nThanks in advance for your help.</p>\n"},{"tags":["java","spring-boot","logback","rollingfileappender"],"answers":[{"comments":[{"owner":{"account_id":15936694,"reputation":37,"user_id":11499689,"display_name":"Paul Kim"},"score":0,"creation_date":1700558766,"post_id":77485852,"comment_id":136666460,"body_markdown":"Hi. I faced another problem. My logging files started to roll when it reaches the &quot;maxFileSize&quot; option. But one of my .gz file cannot be seend with &quot;unexpected end of file&quot; error and keeps leaving .tmp file.","body":"Hi. I faced another problem. My logging files started to roll when it reaches the &quot;maxFileSize&quot; option. But one of my .gz file cannot be seend with &quot;unexpected end of file&quot; error and keeps leaving .tmp file."},{"owner":{"account_id":29726894,"reputation":313,"user_id":22782586,"display_name":"Sahab"},"score":0,"creation_date":1700559424,"post_id":77485852,"comment_id":136666597,"body_markdown":"could you pls try reload your pom dependency and try a clean run","body":"could you pls try reload your pom dependency and try a clean run"}],"tags":[],"owner":{"account_id":29726894,"reputation":313,"user_id":22782586,"display_name":"Sahab"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700032650,"creation_date":1700032650,"answer_id":77485852,"question_id":77485582,"body_markdown":"**Let see why the problem is :** \r\n\r\n- You did not specify any `timeBasedFileNamingAndTriggeringPolicy` inside `rollingPolicy`\r\n\r\n\r\n**How we can fix it :** \r\n\r\n- We can set a triggering police for every 5 mb size file can be archive to another folder\r\n\r\n- consider below sample `rollingPolicy` to avoid large log file \r\n\r\n```\r\n&lt;property name=&quot;LOGS&quot; value=&quot;${logging.file.path}&quot; /&gt;\r\n\r\n```\r\n- sample `rollingPolicy` \r\n\r\n```\r\n\r\n&lt;appender name=&quot;RollingFile&quot;  class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n        &lt;file&gt;${LOGS}/info/app_info.log&lt;/file&gt;\r\n        &lt;encoder\r\n                class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\r\n            &lt;Pattern&gt;%d %p %C{1.} [%t] %m%n&lt;/Pattern&gt;\r\n        &lt;/encoder&gt;\r\n\r\n        &lt;rollingPolicy\r\n                class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n            &lt;!-- rollover daily and when the file reaches 5 MegaBytes --&gt;\r\n            &lt;fileNamePattern&gt;${LOGS}/info/archived/app_info-%d{yyyy-MM-dd}.%i.log\r\n            &lt;/fileNamePattern&gt;\r\n            &lt;timeBasedFileNamingAndTriggeringPolicy\r\n                    class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\r\n                &lt;maxFileSize&gt;5MB&lt;/maxFileSize&gt;\r\n            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\r\n        &lt;/rollingPolicy&gt;\r\n    &lt;/appender&gt;","title":"Spring Boot logback is creating tmp file but not deleting them","body":"<p><strong>Let see why the problem is :</strong></p>\n<ul>\n<li>You did not specify any <code>timeBasedFileNamingAndTriggeringPolicy</code> inside <code>rollingPolicy</code></li>\n</ul>\n<p><strong>How we can fix it :</strong></p>\n<ul>\n<li><p>We can set a triggering police for every 5 mb size file can be archive to another folder</p>\n</li>\n<li><p>consider below sample <code>rollingPolicy</code> to avoid large log file</p>\n</li>\n</ul>\n<pre><code>&lt;property name=&quot;LOGS&quot; value=&quot;${logging.file.path}&quot; /&gt;\n\n</code></pre>\n<ul>\n<li>sample <code>rollingPolicy</code></li>\n</ul>\n<pre><code>\n&lt;appender name=&quot;RollingFile&quot;  class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n        &lt;file&gt;${LOGS}/info/app_info.log&lt;/file&gt;\n        &lt;encoder\n                class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\n            &lt;Pattern&gt;%d %p %C{1.} [%t] %m%n&lt;/Pattern&gt;\n        &lt;/encoder&gt;\n\n        &lt;rollingPolicy\n                class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\n            &lt;!-- rollover daily and when the file reaches 5 MegaBytes --&gt;\n            &lt;fileNamePattern&gt;${LOGS}/info/archived/app_info-%d{yyyy-MM-dd}.%i.log\n            &lt;/fileNamePattern&gt;\n            &lt;timeBasedFileNamingAndTriggeringPolicy\n                    class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\n                &lt;maxFileSize&gt;5MB&lt;/maxFileSize&gt;\n            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\n        &lt;/rollingPolicy&gt;\n    &lt;/appender&gt;\n</code></pre>\n"}],"owner":{"account_id":15936694,"reputation":37,"user_id":11499689,"display_name":"Paul Kim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77485852,"answer_count":1,"score":1,"last_activity_date":1700032650,"creation_date":1700028543,"question_id":77485582,"body_markdown":"I&#39;m having problem with my Logback in Java/Spring Boot application.\r\n\r\nMy Logback is keep creating large tmp files and it&#39;s taking over lots of disk usage.\r\n\r\nThis is how my **RollingFileAppender** in logback-config.xml looks like \r\n\r\n```\r\n&lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n   &lt;file&gt;${appName}.log&lt;/file&gt;\r\n\r\n   &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n      &lt;fileNamePattern&gt;${appName}.%d{yyyy-MM-dd}.log.gz&lt;/fileNamePattern&gt;\r\n      &lt;maxHistory&gt;5&lt;/maxHistory&gt;\r\n      &lt;totalSizeCap&gt;3GB&lt;/totalSizeCap&gt;\r\n   &lt;/rollingPolicy&gt;\r\n&lt;/appender&gt;\r\n```\r\n\r\nI&#39;m aware that **TimeBasedRollingPolicy** rolls file every 00:00 in my option.\r\n\r\nI&#39;ve seend that **%i** option is needed for rolling index, and I tried it but **%i** option is not available in **TimeBasedRollingPolicy** and it&#39;s only used is **SizeAndTimeBasedRollingPolicy**.\r\n\r\nWhy is my logback keep creating large tmp files?\r\n\r\nLet me know if you need anymore information.\r\n\r\nThank you.\r\n\r\nps. I know I can solve this issue by using **SizeAndTimeBasedRollingPolicy** and **%i** option, but I&#39;m curious why this options is keep creating big tmp files.","title":"Spring Boot logback is creating tmp file but not deleting them","body":"<p>I'm having problem with my Logback in Java/Spring Boot application.</p>\n<p>My Logback is keep creating large tmp files and it's taking over lots of disk usage.</p>\n<p>This is how my <strong>RollingFileAppender</strong> in logback-config.xml looks like</p>\n<pre><code>&lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n   &lt;file&gt;${appName}.log&lt;/file&gt;\n\n   &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\n      &lt;fileNamePattern&gt;${appName}.%d{yyyy-MM-dd}.log.gz&lt;/fileNamePattern&gt;\n      &lt;maxHistory&gt;5&lt;/maxHistory&gt;\n      &lt;totalSizeCap&gt;3GB&lt;/totalSizeCap&gt;\n   &lt;/rollingPolicy&gt;\n&lt;/appender&gt;\n</code></pre>\n<p>I'm aware that <strong>TimeBasedRollingPolicy</strong> rolls file every 00:00 in my option.</p>\n<p>I've seend that <strong>%i</strong> option is needed for rolling index, and I tried it but <strong>%i</strong> option is not available in <strong>TimeBasedRollingPolicy</strong> and it's only used is <strong>SizeAndTimeBasedRollingPolicy</strong>.</p>\n<p>Why is my logback keep creating large tmp files?</p>\n<p>Let me know if you need anymore information.</p>\n<p>Thank you.</p>\n<p>ps. I know I can solve this issue by using <strong>SizeAndTimeBasedRollingPolicy</strong> and <strong>%i</strong> option, but I'm curious why this options is keep creating big tmp files.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1699985441,"post_id":77482864,"comment_id":136598487,"body_markdown":"Are you sure about those version numbers? Spring Boot 3.0.0 comes with Hibernate 6.1.5.Final. See https://docs.spring.io/spring-boot/docs/3.0.0/reference/html/dependency-versions.html","body":"Are you sure about those version numbers? Spring Boot 3.0.0 comes with Hibernate 6.1.5.Final. See <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0/reference/html/dependency-versions.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/3.0.0/reference/html/&hellip;</a>"},{"owner":{"account_id":14169714,"reputation":11,"user_id":10236679,"display_name":"MarcinS"},"score":0,"creation_date":1699997640,"post_id":77482864,"comment_id":136600351,"body_markdown":"Yes, you&#39;re right. I was trying to play with the versions, but it doesnt solves the problem.","body":"Yes, you&#39;re right. I was trying to play with the versions, but it doesnt solves the problem."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700032200,"post_id":77482864,"comment_id":136603705,"body_markdown":"An `@EntityGrapgh` on a `save` method doesn&#39;t look right to me. Finally make sure you are setting both sides of the relation so adding to the set and setting the `parent` field. Also `Repository` is only a tagging interface, to reuse the `save` method you would need the `CrudRepository` or `JpaRepository`. Next to that it lacks an `@Transactional` and `@Modifying` annotation as well.","body":"An <code>@EntityGrapgh</code> on a <code>save</code> method doesn&#39;t look right to me. Finally make sure you are setting both sides of the relation so adding to the set and setting the <code>parent</code> field. Also <code>Repository</code> is only a tagging interface, to reuse the <code>save</code> method you would need the <code>CrudRepository</code> or <code>JpaRepository</code>. Next to that it lacks an <code>@Transactional</code> and <code>@Modifying</code> annotation as well."},{"owner":{"account_id":14169714,"reputation":11,"user_id":10236679,"display_name":"MarcinS"},"score":0,"creation_date":1700033897,"post_id":77482864,"comment_id":136603912,"body_markdown":"My main question is: why solution mentioned above was working fine before the migration?","body":"My main question is: why solution mentioned above was working fine before the migration?"},{"owner":{"account_id":14169714,"reputation":11,"user_id":10236679,"display_name":"MarcinS"},"score":0,"creation_date":1700035403,"post_id":77482864,"comment_id":136604138,"body_markdown":"Moreover, CrudRepository still uses em.merge() method under the hood which seems cause the issue. Transaction is started in another part of the code (on the service). Here I&#39;ve listed only most crucial part.","body":"Moreover, CrudRepository still uses em.merge() method under the hood which seems cause the issue. Transaction is started in another part of the code (on the service). Here I&#39;ve listed only most crucial part."},{"owner":{"account_id":14169714,"reputation":11,"user_id":10236679,"display_name":"MarcinS"},"score":0,"creation_date":1700484341,"post_id":77482864,"comment_id":136656381,"body_markdown":"Does anyone could help me?","body":"Does anyone could help me?"}],"owner":{"account_id":14169714,"reputation":11,"user_id":10236679,"display_name":"MarcinS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700032140,"creation_date":1699984813,"question_id":77482864,"body_markdown":"I&#39;m trying to migrate Spring Boot from version 2.7.17 to 3.0.5, together with Hibernate (5-&gt;6.2.0 Final).&lt;br&gt;\r\nI have a parent-child relationship in my project (look at the code below). To save or update the `Order`, I&#39;m using the `save()` method from `org.springframework.data.repository.Repository` interface (my `OrderRepository` extends it).\r\nAfter the migration the `save()` method stopped to work. In this statement, I mean that &#39;parent&#39; reference in `OrderDetails` became `null` after calling `save()` method. Before calling `save()`, the reference is properly set (again, it was working before the migration).\r\nI have no idea in which direction to look and what has changed in version 3. Could you please point me what could be wrong?\r\nThank you in advance.\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;ORDER&quot;)\r\n@NoArgsConstructor(access = AccessLevel.PRIVATE)\r\n@ToString\r\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n@NamedEntityGraph(\r\n        name = &quot;Order.orderDetails&quot;,\r\n        attributeNodes = {\r\n                @NamedAttributeNode(&quot;orderDetails&quot;)\r\n        }\r\n)\r\npublic class Order {\r\n\r\n    @Id\r\n    @Column(nullable = false)\r\n    @EqualsAndHashCode.Include\r\n    private String orderId;\r\n\r\n    @ElementCollection\r\n    @CollectionTable(\r\n            name = &quot;SITE_SPECIFIC_DETAILS_COMMAND&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;orderId&quot;)\r\n    )\r\n    private Set&lt;OrderDetails&gt; orderDetails;\r\n\r\n    // rest of the code omitted for brevity\r\n}\r\n```\r\n\r\n\r\nand\r\n\r\n```java\r\n@Embeddable\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder(setterPrefix = &quot;with&quot;)\r\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n@Data\r\npublic class OrderDetails {\r\n\r\n    @ToString.Exclude\r\n    @Parent\r\n    @EqualsAndHashCode.Include\r\n    private Order parent;\r\n\r\n    @Type(JsonType.class)\r\n    @Column(columnDefinition = &quot;jsonb&quot;)\r\n    private OrderData data;\r\n\r\n    // rest of the code omitted for brevity\r\n\r\n\r\n```\r\n\r\nThe repository:\r\n```\r\npublic interface OrderRepository extends Repository&lt;Order, String&gt; {\r\n\r\n   @EntityGraph(attributePaths = {âorderDetailsâ})\r\n   Order save(Order order);\r\n}\r\n```\r\n\r\n\r\n","title":"Spring Data save method stopped to work after migration from spring boot 2.7 to 3.0","body":"<p>I'm trying to migrate Spring Boot from version 2.7.17 to 3.0.5, together with Hibernate (5-&gt;6.2.0 Final).<br>\nI have a parent-child relationship in my project (look at the code below). To save or update the <code>Order</code>, I'm using the <code>save()</code> method from <code>org.springframework.data.repository.Repository</code> interface (my <code>OrderRepository</code> extends it).\nAfter the migration the <code>save()</code> method stopped to work. In this statement, I mean that 'parent' reference in <code>OrderDetails</code> became <code>null</code> after calling <code>save()</code> method. Before calling <code>save()</code>, the reference is properly set (again, it was working before the migration).\nI have no idea in which direction to look and what has changed in version 3. Could you please point me what could be wrong?\nThank you in advance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;ORDER&quot;)\n@NoArgsConstructor(access = AccessLevel.PRIVATE)\n@ToString\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@NamedEntityGraph(\n        name = &quot;Order.orderDetails&quot;,\n        attributeNodes = {\n                @NamedAttributeNode(&quot;orderDetails&quot;)\n        }\n)\npublic class Order {\n\n    @Id\n    @Column(nullable = false)\n    @EqualsAndHashCode.Include\n    private String orderId;\n\n    @ElementCollection\n    @CollectionTable(\n            name = &quot;SITE_SPECIFIC_DETAILS_COMMAND&quot;,\n            joinColumns = @JoinColumn(name = &quot;orderId&quot;)\n    )\n    private Set&lt;OrderDetails&gt; orderDetails;\n\n    // rest of the code omitted for brevity\n}\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Embeddable\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder(setterPrefix = &quot;with&quot;)\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@Data\npublic class OrderDetails {\n\n    @ToString.Exclude\n    @Parent\n    @EqualsAndHashCode.Include\n    private Order parent;\n\n    @Type(JsonType.class)\n    @Column(columnDefinition = &quot;jsonb&quot;)\n    private OrderData data;\n\n    // rest of the code omitted for brevity\n\n\n</code></pre>\n<p>The repository:</p>\n<pre><code>public interface OrderRepository extends Repository&lt;Order, String&gt; {\n\n   @EntityGraph(attributePaths = {âorderDetailsâ})\n   Order save(Order order);\n}\n</code></pre>\n"},{"tags":["java","kubernetes","jprofiler"],"comments":[{"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"score":0,"creation_date":1700038855,"post_id":77485790,"comment_id":136604683,"body_markdown":"Please check if the file $TMPDIR/jprofiler_error.log exists and add the exception there to the question, otherwise please contact support@ej-technologies.com and we&#39;ll figure out how to debug this.","body":"Please check if the file $TMPDIR/jprofiler_error.log exists and add the exception there to the question, otherwise please contact support@ej-technologies.com and we&#39;ll figure out how to debug this."},{"owner":{"account_id":371823,"reputation":2742,"user_id":720569,"accept_rate":71,"display_name":"Rahul Borkar"},"score":0,"creation_date":1700472027,"post_id":77485790,"comment_id":136654257,"body_markdown":"I am not able to find the mentioned file. I&#39;ve sent email to support@ej-technologies.com","body":"I am not able to find the mentioned file. I&#39;ve sent email to support@ej-technologies.com"}],"owner":{"account_id":371823,"reputation":2742,"user_id":720569,"accept_rate":71,"display_name":"Rahul Borkar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700031722,"creation_date":1700031722,"question_id":77485790,"body_markdown":"I am trying to connect locally running JProfiler(Evaluation version) to application running on google cloud Kubernetes cluster. Whenever I select application(pod) from the list. I get following error. \r\n\r\n[![Connection error][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JZ3iu.png\r\n\r\nTried searching through various articles, but unable to find any specific resolution for this. \r\n\r\nI am able to connect the same JProfiler to all other Java applications(Pods) on same Kubernetes cluster.\r\n\r\nIs there something which needs to be changed at application level or I am missing anything? ","title":"Unable to find reason behind JProfiler connection error java.lang.IllegalStateException: Duplicate key","body":"<p>I am trying to connect locally running JProfiler(Evaluation version) to application running on google cloud Kubernetes cluster. Whenever I select application(pod) from the list. I get following error.</p>\n<p><a href=\"https://i.stack.imgur.com/JZ3iu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JZ3iu.png\" alt=\"Connection error\" /></a></p>\n<p>Tried searching through various articles, but unable to find any specific resolution for this.</p>\n<p>I am able to connect the same JProfiler to all other Java applications(Pods) on same Kubernetes cluster.</p>\n<p>Is there something which needs to be changed at application level or I am missing anything?</p>\n"},{"tags":["java","reactive","flux"],"comments":[{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1700031312,"post_id":77485669,"comment_id":136603603,"body_markdown":"if you are doing something get or  set like a consumer ,  not supplier , you can try with  doonnext instead of map , map is used to  trans the model from upstream to downstream","body":"if you are doing something get or  set like a consumer ,  not supplier , you can try with  doonnext instead of map , map is used to  trans the model from upstream to downstream"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1700039356,"post_id":77485669,"comment_id":136604777,"body_markdown":"`map` takes a `Function` that needs to return a value. `setTotalRefundAmount` most likely has a `void` return type. Besides using `doOnNext` you can try using a block: `{ pm.setTotalRefundAmount(...); return pm; }`","body":"<code>map</code> takes a <code>Function</code> that needs to return a value. <code>setTotalRefundAmount</code> most likely has a <code>void</code> return type. Besides using <code>doOnNext</code> you can try using a block: <code>{ pm.setTotalRefundAmount(...); return pm; }</code>"}],"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700031636,"creation_date":1700029977,"question_id":77485669,"body_markdown":"I want to update an attribute value for each item in list with the value present in another list.I am trying to do it via Map but it is giving me compile error. Can somebody please suggest what is the correct way to do this ? I am new to reactive. \r\n\r\n\tprivate void updatePaymentDocument(Payment paymentDoc, PaymentTransaction txn) {\r\n\t\tFlux.fromIterable(paymentDoc.getPaymentMethods())\r\n\t\t.filter( pm-&gt; pm.getSequenceNo().equalsIgnoreCase(txn.getSequenceNo()))\r\n\t\t.map(pm -&gt; pm.setTotalRefundAmount(txn.getPaymentAuthorization().getAuthorizedAmount()));\r\n\t}","title":"How to update attribute value while iterating Flux","body":"<p>I want to update an attribute value for each item in list with the value present in another list.I am trying to do it via Map but it is giving me compile error. Can somebody please suggest what is the correct way to do this ? I am new to reactive.</p>\n<pre><code>private void updatePaymentDocument(Payment paymentDoc, PaymentTransaction txn) {\n    Flux.fromIterable(paymentDoc.getPaymentMethods())\n    .filter( pm-&gt; pm.getSequenceNo().equalsIgnoreCase(txn.getSequenceNo()))\n    .map(pm -&gt; pm.setTotalRefundAmount(txn.getPaymentAuthorization().getAuthorizedAmount()));\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1700032051,"post_id":77485657,"comment_id":136603690,"body_markdown":"1) No one uses ddl-auto. You should use a proper DB migration tool like Flyway. 2) Instead of creating users using SQL, create them using your own Repository. This way you won&#39;t have to spend time maintaining the script if the table changes. And also it allows you to create users dynamically for each test separately - a user that&#39;s needed for that particular test, with specifics needed for that test. 3) And sure, the order of columns most likely isn&#39;t guaranteed to match the order of fields. I&#39;d be surprised if it did. I doubt Java maintains the order - they&#39;re probably stored in a Hash Table.","body":"1) No one uses ddl-auto. You should use a proper DB migration tool like Flyway. 2) Instead of creating users using SQL, create them using your own Repository. This way you won&#39;t have to spend time maintaining the script if the table changes. And also it allows you to create users dynamically for each test separately - a user that&#39;s needed for that particular test, with specifics needed for that test. 3) And sure, the order of columns most likely isn&#39;t guaranteed to match the order of fields. I&#39;d be surprised if it did. I doubt Java maintains the order - they&#39;re probably stored in a Hash Table."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1700033435,"post_id":77485657,"comment_id":136603857,"body_markdown":"@StanislavBashkyrtsev `@Sql` is common practice for tests (though disabling ddl-auto is probably a common practice too)","body":"@StanislavBashkyrtsev <code>@Sql</code> is common practice for tests (though disabling ddl-auto is probably a common practice too)"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1700034118,"post_id":77485657,"comment_id":136603935,"body_markdown":"Yes, it is a common practice. But not a good one. In software development there are a lot of commonly used poor practices. Try this out: http://qala.io/blog/test-data-management.html","body":"Yes, it is a common practice. But not a good one. In software development there are a lot of commonly used poor practices. Try this out: <a href=\"http://qala.io/blog/test-data-management.html\" rel=\"nofollow noreferrer\">qala.io/blog/test-data-management.html</a>"},{"owner":{"account_id":11725107,"reputation":754,"user_id":8582685,"display_name":"Lee Greiner"},"score":0,"creation_date":1700060149,"post_id":77485657,"comment_id":136608613,"body_markdown":"An easy solution is to add the column names in your SQL statement: INSERT INTO users (id, name, last_name) VALUES (1, &#39;John&#39;, &#39;Doe&#39;); Doing so will remove your need to know how Hibernate creates it&#39;s DDL which could change in the future. I agree with @StanislavBashkyrtsev, best practice is to create your data programmatically (or by annotation) with your test case.","body":"An easy solution is to add the column names in your SQL statement: INSERT INTO users (id, name, last_name) VALUES (1, &#39;John&#39;, &#39;Doe&#39;); Doing so will remove your need to know how Hibernate creates it&#39;s DDL which could change in the future. I agree with @StanislavBashkyrtsev, best practice is to create your data programmatically (or by annotation) with your test case."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1700108810,"post_id":77485657,"comment_id":136615063,"body_markdown":"@StanislavBashkyrtsev btw, how exactly do you imagine that? Now, I inject only the repository I want to test. But if I need to perform some `@BeforeEach` inserts, I also need to inject `AccountRepository`, `CreditRepository`, `CreditOrderRepository`, `ProductRepository` (you get the idea)... So my `CardRepositoryTest` turns into an `EveryRepositoryTest` since it can fail if either of those fails","body":"@StanislavBashkyrtsev btw, how exactly do you imagine that? Now, I inject only the repository I want to test. But if I need to perform some <code>@BeforeEach</code> inserts, I also need to inject <code>AccountRepository</code>, <code>CreditRepository</code>, <code>CreditOrderRepository</code>, <code>ProductRepository</code> (you get the idea)... So my <code>CardRepositoryTest</code> turns into an <code>EveryRepositoryTest</code> since it can fail if either of those fails"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1700118387,"post_id":77485657,"comment_id":136615869,"body_markdown":"@Kodigas, first it shouldn&#39;t be in `@BeforeEach` because it never happens that you need the same kind of object for every test in a class. The data set up should happen as the first 1-3 lines of the test. Then if the set up is complicated, what I do is I created separate classes (e.g. TestObjectFactory, TestRepository) that do the job. So that the test are clean and don&#39;t duplicate a lot of code. But yes - the they will fail if your test code uses other repositories and those are broken. But that&#39;s a minor problem. A small price to pay for the reduced cost of maintenance.","body":"@Kodigas, first it shouldn&#39;t be in <code>@BeforeEach</code> because it never happens that you need the same kind of object for every test in a class. The data set up should happen as the first 1-3 lines of the test. Then if the set up is complicated, what I do is I created separate classes (e.g. TestObjectFactory, TestRepository) that do the job. So that the test are clean and don&#39;t duplicate a lot of code. But yes - the they will fail if your test code uses other repositories and those are broken. But that&#39;s a minor problem. A small price to pay for the reduced cost of maintenance."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1700247131,"post_id":77485657,"comment_id":136635233,"body_markdown":"@StanislavBashkyrtsev though, it&#39;s a pitty I can&#39;t `save()` an entity at the bottom of an object graph and see Hibernate figure out the right order of object persistence on its own","body":"@StanislavBashkyrtsev though, it&#39;s a pitty I can&#39;t <code>save()</code> an entity at the bottom of an object graph and see Hibernate figure out the right order of object persistence on its own"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1700252681,"post_id":77485657,"comment_id":136636052,"body_markdown":"@Kodigas, yeah, I&#39;ve experienced that when the object graph is too large. I simply created a TestRepository that would do this in the right order. Simply because I needed to create that kind of objects in hundreds (if not thousands) of tests.","body":"@Kodigas, yeah, I&#39;ve experienced that when the object graph is too large. I simply created a TestRepository that would do this in the right order. Simply because I needed to create that kind of objects in hundreds (if not thousands) of tests."},{"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"score":0,"creation_date":1700575347,"post_id":77485657,"comment_id":136669631,"body_markdown":"@StanislavBashkyrtsev do you think some generic API is possible for [persisting a whole object graph by its node](https://stackoverflow.com/questions/77523406/are-there-out-of-the-box-solutions-for-persisting-a-whole-object-graph-by-its-no)?","body":"@StanislavBashkyrtsev do you think some generic API is possible for <a href=\"https://stackoverflow.com/questions/77523406/are-there-out-of-the-box-solutions-for-persisting-a-whole-object-graph-by-its-no\">persisting a whole object graph by its node</a>?"}],"answers":[{"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1700056027,"post_id":77485768,"comment_id":136607713,"body_markdown":"Unless it or the JPA specification states there is an order to columns in DDL generation - there isn&#39;t any guarantee. Order shouldn&#39;t matter or be assumed to be under control by property positioning and is why JPA providers explicitly list columns they are selecting, inserting and updating.","body":"Unless it or the JPA specification states there is an order to columns in DDL generation - there isn&#39;t any guarantee. Order shouldn&#39;t matter or be assumed to be under control by property positioning and is why JPA providers explicitly list columns they are selecting, inserting and updating."}],"tags":[],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700031357,"creation_date":1700031357,"answer_id":77485768,"question_id":77485657,"body_markdown":"It&#39;s not strikingly obvious from the [official user guide][1], but no, Hibernate doesn&#39;t guarantee that\r\n\r\n&gt; If the hibernate.hbm2ddl.auto configuration is set to create, Hibernate is going to generate the following database schema:\r\n&gt;\r\n&gt; Example 323. Auto-generated database schema\r\n&gt;```\r\n&gt; create table Customer (\r\n&gt;    id integer not null,\r\n&gt;    accountsPayableXrefId binary,\r\n&gt;    image blob,\r\n&gt;    name varchar(255),\r\n&gt;    primary key (id)\r\n&gt;)\r\n&gt;```\r\nLater in the guide...\r\n&gt; Example 335. @LazyGroup example\r\n&gt;```\r\n&gt; @Entity public class Customer {\r\n&gt; \r\n&gt; \t@Id \tprivate Integer id;\r\n&gt; \r\n&gt; \tprivate String name;\r\n&gt; \r\n&gt; \t@Basic(fetch = FetchType.LAZY) \tprivate UUID accountsPayableXrefId;\r\n&gt; \r\n&gt; \t@Lob \t@Basic(fetch = FetchType.LAZY) \t@LazyGroup(&quot;lobs&quot;) \tprivate\r\n&gt; Blob image;\r\n&gt; \r\n&gt; \t//Getters and setters are omitted for brevity\r\n&gt; \r\n&gt; }\r\n&gt; ```\r\nNotice the order. The mismatch kind of implies that Hibernate creates table columns as it sees fit\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html","title":"Hibernate swaps columns around when creating a table. Why on earth does it do it?","body":"<p>It's not strikingly obvious from the <a href=\"https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html\" rel=\"nofollow noreferrer\">official user guide</a>, but no, Hibernate doesn't guarantee that</p>\n<blockquote>\n<p>If the hibernate.hbm2ddl.auto configuration is set to create, Hibernate is going to generate the following database schema:</p>\n<p>Example 323. Auto-generated database schema</p>\n<pre><code>create table Customer (\n   id integer not null,\n   accountsPayableXrefId binary,\n   image blob,\n   name varchar(255),\n   primary key (id)\n)\n</code></pre>\n</blockquote>\n<p>Later in the guide...</p>\n<blockquote>\n<p>Example 335. @LazyGroup example</p>\n<pre><code>@Entity public class Customer {\n\n  @Id     private Integer id;\n\n  private String name;\n\n  @Basic(fetch = FetchType.LAZY)  private UUID accountsPayableXrefId;\n\n  @Lob    @Basic(fetch = FetchType.LAZY)  @LazyGroup(&quot;lobs&quot;)  private\nBlob image;\n\n  //Getters and setters are omitted for brevity\n\n}\n</code></pre>\n</blockquote>\n<p>Notice the order. The mismatch kind of implies that Hibernate creates table columns as it sees fit</p>\n"}],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700031357,"creation_date":1700029857,"question_id":77485657,"body_markdown":"Here&#39;s an MRE:\r\n```java\r\npackage com.example.h2_demo;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport org.springframework.test.context.jdbc.Sql;\r\n\r\nimport java.util.List;\r\n\r\nimport static org.assertj.core.api.AssertionsForClassTypes.assertThat;\r\n\r\n@DataJpaTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n@Sql(\r\n        executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\r\n        scripts = {&quot;/create_user_table.sql&quot;, &quot;/insert_user.sql&quot;}\r\n)\r\npublic class H2DemoApplicationTest {\r\n    private final UserRepository userRepository;\r\n\r\n    @Autowired\r\n    public H2DemoApplicationTest(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Test\r\n    void testNothing() {\r\n    }\r\n\r\n    @Test\r\n    void getUsers() {\r\n        List&lt;User&gt; users = userRepository.findAll();\r\n        assertThat(users).asList().hasSize(1);\r\n        User actualUser = users.get(0);\r\n        User expectedUser = expectedUser();\r\n        assertThat(actualUser.getId()).isEqualTo(expectedUser.getId());\r\n        assertThat(actualUser.getName()).isEqualTo(expectedUser.getName());\r\n        assertThat(actualUser.getLastName()).isEqualTo(expectedUser.getLastName());\r\n    }\r\n\r\n    private User expectedUser() {\r\n        User expectedUser = new User();\r\n        expectedUser.setId(1L);\r\n        expectedUser.setName(&quot;John&quot;);\r\n        expectedUser.setLastName(&quot;Doe&quot;);\r\n        return expectedUser;\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.h2_demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class H2DemoApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(H2DemoApplication.class, args);\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.h2_demo;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n}\r\n```\r\n```java\r\npackage com.example.h2_demo;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\n\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\n@Setter\r\n@Getter\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n}\r\n```\r\n```sql\r\nCREATE TABLE IF NOT EXISTS users(\r\n  id INTEGER PRIMARY KEY,\r\n  name VARCHAR(50) NOT NULL,\r\n  last_name VARCHAR(50)\r\n);\r\n```\r\n```sql\r\nINSERT INTO users\r\nVALUES (1, &#39;John&#39;, &#39;Doe&#39;);\r\n```\r\n```properties\r\n# application-test.properties\r\n\r\n# show SQL executed by Hibernate\r\nspring.jpa.properties.hibernate.show_sql=true\r\n\r\n# show meta comments in Hibernate statements (as specified by org.springframework.data.jpa.repository.Meta annotations)\r\nspring.jpa.properties.hibernate.use_sql_comments=true\r\n\r\n# to enable line breaks and indentation in logged queries executed by Hibernate\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nlogging.level.org.hibernate.type=trace\r\n\r\nlogging.level.org.springframework.jdbc.core=TRACE\r\n\r\n# to see what @Sql scripts are executed\r\nlogging.level.org.springframework.test.context.jdbc=DEBUG\r\n\r\n# to see what @Sql statements are executed\r\nlogging.level.org.springframework.jdbc.datasource.init=DEBUG\r\n```\r\nResult:\r\n```\r\norg.opentest4j.AssertionFailedError: \r\nexpected: &quot;John&quot;\r\n but was: &quot;Doe&quot;\r\nExpected :&quot;John&quot;\r\nActual   :&quot;Doe&quot;\r\n```\r\nFrom the logs:\r\n```\r\nHibernate: \r\n    drop table if exists users cascade \r\nHibernate: \r\n    create table users (\r\n        id bigint generated by default as identity,\r\n        last_name varchar(255),\r\n        name varchar(255),\r\n        primary key (id)\r\n    )\r\n```\r\nSee? Hibernate messed up the order of the columns. I can, of course, disable that `ddl-auto` (or specify columns in the DML script), but I&#39;m curious why Hibernate dropped the ball with such a simple task. Never seen anything like that. Does Hibernate guarantee that table columns would be created in exactly the same order as the fields in a corresponding entity? If not, why not? It&#39;s beyond my comprehension completely","title":"Hibernate swaps columns around when creating a table. Why on earth does it do it?","body":"<p>Here's an MRE:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.h2_demo;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.jdbc.Sql;\n\nimport java.util.List;\n\nimport static org.assertj.core.api.AssertionsForClassTypes.assertThat;\n\n@DataJpaTest\n@ActiveProfiles(&quot;test&quot;)\n@Sql(\n        executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\n        scripts = {&quot;/create_user_table.sql&quot;, &quot;/insert_user.sql&quot;}\n)\npublic class H2DemoApplicationTest {\n    private final UserRepository userRepository;\n\n    @Autowired\n    public H2DemoApplicationTest(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Test\n    void testNothing() {\n    }\n\n    @Test\n    void getUsers() {\n        List&lt;User&gt; users = userRepository.findAll();\n        assertThat(users).asList().hasSize(1);\n        User actualUser = users.get(0);\n        User expectedUser = expectedUser();\n        assertThat(actualUser.getId()).isEqualTo(expectedUser.getId());\n        assertThat(actualUser.getName()).isEqualTo(expectedUser.getName());\n        assertThat(actualUser.getLastName()).isEqualTo(expectedUser.getLastName());\n    }\n\n    private User expectedUser() {\n        User expectedUser = new User();\n        expectedUser.setId(1L);\n        expectedUser.setName(&quot;John&quot;);\n        expectedUser.setLastName(&quot;Doe&quot;);\n        return expectedUser;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.h2_demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H2DemoApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(H2DemoApplication.class, args);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.h2_demo;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.h2_demo;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Entity\n@Table(name = &quot;users&quot;)\n@Setter\n@Getter\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n}\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE IF NOT EXISTS users(\n  id INTEGER PRIMARY KEY,\n  name VARCHAR(50) NOT NULL,\n  last_name VARCHAR(50)\n);\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO users\nVALUES (1, 'John', 'Doe');\n</code></pre>\n<pre><code># application-test.properties\n\n# show SQL executed by Hibernate\nspring.jpa.properties.hibernate.show_sql=true\n\n# show meta comments in Hibernate statements (as specified by org.springframework.data.jpa.repository.Meta annotations)\nspring.jpa.properties.hibernate.use_sql_comments=true\n\n# to enable line breaks and indentation in logged queries executed by Hibernate\nspring.jpa.properties.hibernate.format_sql=true\n\nlogging.level.org.hibernate.type=trace\n\nlogging.level.org.springframework.jdbc.core=TRACE\n\n# to see what @Sql scripts are executed\nlogging.level.org.springframework.test.context.jdbc=DEBUG\n\n# to see what @Sql statements are executed\nlogging.level.org.springframework.jdbc.datasource.init=DEBUG\n</code></pre>\n<p>Result:</p>\n<pre><code>org.opentest4j.AssertionFailedError: \nexpected: &quot;John&quot;\n but was: &quot;Doe&quot;\nExpected :&quot;John&quot;\nActual   :&quot;Doe&quot;\n</code></pre>\n<p>From the logs:</p>\n<pre><code>Hibernate: \n    drop table if exists users cascade \nHibernate: \n    create table users (\n        id bigint generated by default as identity,\n        last_name varchar(255),\n        name varchar(255),\n        primary key (id)\n    )\n</code></pre>\n<p>See? Hibernate messed up the order of the columns. I can, of course, disable that <code>ddl-auto</code> (or specify columns in the DML script), but I'm curious why Hibernate dropped the ball with such a simple task. Never seen anything like that. Does Hibernate guarantee that table columns would be created in exactly the same order as the fields in a corresponding entity? If not, why not? It's beyond my comprehension completely</p>\n"},{"tags":["java","json","jsonschema","jackson-databind","json-schema-validator"],"comments":[{"owner":{"account_id":17881,"reputation":53306,"user_id":40468,"accept_rate":60,"display_name":"Ether"},"score":0,"creation_date":1649270402,"post_id":71770490,"comment_id":126836133,"body_markdown":"Check the documentation for how to load additional schemas so they are known to the evaluator.","body":"Check the documentation for how to load additional schemas so they are known to the evaluator."},{"owner":{"account_id":14124639,"reputation":53,"user_id":10204328,"display_name":"Amit"},"score":0,"creation_date":1649297320,"post_id":71770490,"comment_id":126842161,"body_markdown":"i have looked a lot but could not find relevant details,can you please provide me the link?","body":"i have looked a lot but could not find relevant details,can you please provide me the link?"},{"owner":{"account_id":32232,"reputation":11789,"user_id":89211,"accept_rate":90,"display_name":"Relequestual"},"score":0,"creation_date":1649329655,"post_id":71770490,"comment_id":126850761,"body_markdown":"I think you&#39;re confusing different things. `$schema` is used as the meta-schema and dialect. I don&#39;t think you want that. It sounds like you want to download a schema from a specific URL and then use that as your JSON Schema to do validaiton. Just make a requst and process the response as a string to create your schema as per the quickstart guide in the libraries docs (on github)","body":"I think you&#39;re confusing different things. <code>$schema</code> is used as the meta-schema and dialect. I don&#39;t think you want that. It sounds like you want to download a schema from a specific URL and then use that as your JSON Schema to do validaiton. Just make a requst and process the response as a string to create your schema as per the quickstart guide in the libraries docs (on github)"}],"answers":[{"tags":[],"owner":{"account_id":27714767,"reputation":29,"user_id":21156730,"display_name":"Velmurugan K"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700031289,"creation_date":1700031289,"answer_id":77485759,"question_id":71770490,"body_markdown":"&quot;$schema&quot; is meta-version of the IETF standard, you need to refer your as &quot;$ref&quot;.\r\n\r\n    {\r\n      &quot;$schema&quot;: &quot;http://json-schema.org/draft-{version}/schema#&quot;,\r\n      &quot;$ref&quot;: &quot;http://oag.company.com/ver1/schema#&quot;\r\n    }","title":"How to get custom schema draft in json-schema-validator-1.0.68.jar?","body":"<p>&quot;$schema&quot; is meta-version of the IETF standard, you need to refer your as &quot;$ref&quot;.</p>\n<pre><code>{\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-{version}/schema#&quot;,\n  &quot;$ref&quot;: &quot;http://oag.company.com/ver1/schema#&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":14124639,"reputation":53,"user_id":10204328,"display_name":"Amit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700031289,"creation_date":1649262807,"question_id":71770490,"body_markdown":"i am defining my custom schema draft in my json-schema.\r\n\r\n \r\n\r\n    {   &quot;$schema&quot;: &quot;http://oag.company.com/ver1/schema#&quot;,   \r\n        &quot;title&quot;: &quot;JSON Identity Attribute Schema&quot; \r\n    }\r\n\r\nand want to fetch it in code validation.\r\n i am using  ***json-schema-validator-1.0.68.jar*** which comes with com.networknt.\r\nmy code \r\n\r\n   \r\n\r\n    public static void main(String[] args) throws Exception {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            JsonSchemaFactory schemaFactory = JsonSchemaFactory.getInstance();\r\n            String exppath=&quot;exp.json&quot;;\r\n            String schpath =&quot;schm.json&quot;;\r\n            try ( \r\n                    InputStream jsonStream = new FileInputStream(exppath);\r\n                    InputStream schemaStream = new FileInputStream(schpath);\r\n            ) {\r\n                JsonNode json = objectMapper.readTree(jsonStream);\r\n                com.networknt.schema.JsonSchema schema = schemaFactory.getSchema(schemaStream);\r\n                Set&lt;ValidationMessage&gt; validationResult = schema.validate(json);\r\n              \r\n                if (validationResult.isEmpty()) {\r\n                    \r\n                    System.out.println(&quot;no validation errors :-)&quot;);\r\n                    System.out.println(json.path(&quot;FirstName&quot;));\r\n                } else {\r\n                    validationResult.forEach(vm -&gt; System.out.println(vm));\r\n                }\r\n            }\r\n        }\r\n\r\n\r\nthe error message i got is \r\n\r\n&gt; Exception in thread &quot;main&quot; com.networknt.schema.JsonSchemaException: Unknown MetaSchema: https://oag.oracle.com/ver1/schema\r\n\r\nis thier any way so i can use my custom schema or can i use any other library which allow custom schema ?","title":"How to get custom schema draft in json-schema-validator-1.0.68.jar?","body":"<p>i am defining my custom schema draft in my json-schema.</p>\n<pre><code>{   &quot;$schema&quot;: &quot;http://oag.company.com/ver1/schema#&quot;,   \n    &quot;title&quot;: &quot;JSON Identity Attribute Schema&quot; \n}\n</code></pre>\n<p>and want to fetch it in code validation.\ni am using  <em><strong>json-schema-validator-1.0.68.jar</strong></em> which comes with com.networknt.\nmy code</p>\n<pre><code>public static void main(String[] args) throws Exception {\n        ObjectMapper objectMapper = new ObjectMapper();\n        JsonSchemaFactory schemaFactory = JsonSchemaFactory.getInstance();\n        String exppath=&quot;exp.json&quot;;\n        String schpath =&quot;schm.json&quot;;\n        try ( \n                InputStream jsonStream = new FileInputStream(exppath);\n                InputStream schemaStream = new FileInputStream(schpath);\n        ) {\n            JsonNode json = objectMapper.readTree(jsonStream);\n            com.networknt.schema.JsonSchema schema = schemaFactory.getSchema(schemaStream);\n            Set&lt;ValidationMessage&gt; validationResult = schema.validate(json);\n          \n            if (validationResult.isEmpty()) {\n                \n                System.out.println(&quot;no validation errors :-)&quot;);\n                System.out.println(json.path(&quot;FirstName&quot;));\n            } else {\n                validationResult.forEach(vm -&gt; System.out.println(vm));\n            }\n        }\n    }\n</code></pre>\n<p>the error message i got is</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; com.networknt.schema.JsonSchemaException: Unknown MetaSchema: <a href=\"https://oag.oracle.com/ver1/schema\" rel=\"nofollow noreferrer\">https://oag.oracle.com/ver1/schema</a></p>\n</blockquote>\n<p>is thier any way so i can use my custom schema or can i use any other library which allow custom schema ?</p>\n"},{"tags":["java","android","printing","ipp-protocol","cups4j"],"comments":[{"owner":{"account_id":162227,"reputation":1070,"user_id":1615070,"display_name":"404pio"},"score":0,"creation_date":1563778480,"post_id":57093423,"comment_id":100796450,"body_markdown":"I didn&#39;t have such a problem. But I think it may be problem between cups4j and apache http client. Try to different version, of google for compatibility between these packages.","body":"I didn&#39;t have such a problem. But I think it may be problem between cups4j and apache http client. Try to different version, of google for compatibility between these packages."}],"answers":[{"comments":[{"owner":{"account_id":20616386,"reputation":1060,"user_id":15134376,"display_name":"Jungwon"},"score":0,"creation_date":1699935128,"post_id":68376291,"comment_id":136590214,"body_markdown":"Is there a place where I can see an example of importing and using `ipp-client-kotlin` into an Android (Java) project?","body":"Is there a place where I can see an example of importing and using <code>ipp-client-kotlin</code> into an Android (Java) project?"}],"tags":[],"owner":{"account_id":5699126,"reputation":1030,"user_id":4504727,"display_name":"IPP Nerd"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700030754,"creation_date":1626258175,"answer_id":68376291,"question_id":57093423,"body_markdown":"Cups4j does not support Android. You might find [forks][1] that add support for Android.\r\n\r\nThe library [ipp-client-kotlin][2] supports Android since version 1.6 and should work out of the box.\r\n\r\nExamples written in Java or Kotlin are available in [ipp-samples][3]\r\n\r\n\r\n  [1]: https://github.com/BenoitDuffez/AndroidCupsPrint\r\n  [2]: https://github.com/gmuth/ipp-client-kotlin\r\n[3]: https://github.com/gmuth/ipp-samples","title":"Error thrown while printing to IPP printer in android using Cups4j","body":"<p>Cups4j does not support Android. You might find <a href=\"https://github.com/BenoitDuffez/AndroidCupsPrint\" rel=\"nofollow noreferrer\">forks</a> that add support for Android.</p>\n<p>The library <a href=\"https://github.com/gmuth/ipp-client-kotlin\" rel=\"nofollow noreferrer\">ipp-client-kotlin</a> supports Android since version 1.6 and should work out of the box.</p>\n<p>Examples written in Java or Kotlin are available in <a href=\"https://github.com/gmuth/ipp-samples\" rel=\"nofollow noreferrer\">ipp-samples</a></p>\n"}],"owner":{"account_id":14971809,"reputation":11,"user_id":11205137,"display_name":"Defranz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":845,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700030754,"creation_date":1563449383,"question_id":57093423,"body_markdown":"I&#39;m trying to print to an IPP printer installed on a linux machine using Cups4j from android. Here&#39;s the code, I more or less just copied what they have written on their github page.\r\n\r\n    ByteArrayOutputStream os = stvoriRacun(narudzba, djelatnik, brStola);\r\n    try {\r\n        CupsClient cupsClient = new CupsClient(&quot;192.168.68.180&quot;, 631);\r\n        URL printerURL = new URL(&quot;http://192.168.68.180:631/printers/bixolonIPP&quot;);\r\n        CupsPrinter cupsPrinter = cupsClient.getPrinter(printerURL);\r\n        Map&lt;String, String&gt; attributes = new HashMap&lt;&gt;();\r\n        attributes.put(&quot;compression&quot;, &quot;none&quot;);\r\n        attributes.put(&quot;job-attributes&quot;, &quot;print-quality:enum:3#fit-to-page:boolean:true#sheet-collate:keyword:collated&quot;);\r\n\r\n        PrintJob printJob = new PrintJob.Builder(os.toByteArray())\r\n                .jobName(&quot;job-name&quot;)\r\n                .userName(&quot;user-name&quot;)\r\n                .copies(2)\r\n                .pageRanges(&quot;1-3&quot;)\r\n                .duplex(false)\r\n                .portrait(false)\r\n                .color(true)\r\n                .pageFormat(&quot;iso-a4&quot;)\r\n                .resolution(&quot;300dpi&quot;)\r\n                .attributes(attributes)\r\n                .build();\r\n    }catch (Exception e){\r\n        e.printStackTrace();\r\n    }\r\n\r\n\r\nWhen I try to print i get the following error\r\n\r\n    07-18 12:26:29.294 30378-30529/com.appid.apps E/AndroidRuntime: FATAL EXCEPTION: Thread-8\r\n                                                                  Process: com.appid.apps, PID: 30378\r\n                                                                  java.lang.NoSuchFieldError: No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; in class Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; or its superclasses (declaration of &#39;org.apache.http.conn.ssl.AllowAllHostnameVerifier&#39; appears in /system/framework/framework.jar!classes3.dex)\r\n                                                                      at org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:144)\r\n                                                                      at org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:966)\r\n                                                                      at org.cups4j.operations.IppOperation.sendRequest(IppOperation.java:176)\r\n                                                                      at org.cups4j.operations.IppOperation.sendRequest(IppOperation.java:131)\r\n                                                                      at org.cups4j.operations.IppOperation.request(IppOperation.java:67)\r\n                                                                      at org.cups4j.operations.cups.CupsGetPrintersOperation.getPrinters(CupsGetPrintersOperation.java:56)\r\n                                                                      at org.cups4j.CupsClient.getPrinters(CupsClient.java:106)\r\n                                                                      at org.cups4j.CupsClient.getPrinter(CupsClient.java:166)\r\n                                                                      at com.appid.apps.IPPPrinter.connect(IPPPrinter.java:107)\r\n                                                                      at com.appid.apps.Printing$1.run(Printing.java:604)\r\n                                                                      at java.lang.Thread.run(Thread.java:764)\r\n\r\nAlternatively is there any other library that deals with IPP printing from android?","title":"Error thrown while printing to IPP printer in android using Cups4j","body":"<p>I'm trying to print to an IPP printer installed on a linux machine using Cups4j from android. Here's the code, I more or less just copied what they have written on their github page.</p>\n\n<pre><code>ByteArrayOutputStream os = stvoriRacun(narudzba, djelatnik, brStola);\ntry {\n    CupsClient cupsClient = new CupsClient(\"192.168.68.180\", 631);\n    URL printerURL = new URL(\"http://192.168.68.180:631/printers/bixolonIPP\");\n    CupsPrinter cupsPrinter = cupsClient.getPrinter(printerURL);\n    Map&lt;String, String&gt; attributes = new HashMap&lt;&gt;();\n    attributes.put(\"compression\", \"none\");\n    attributes.put(\"job-attributes\", \"print-quality:enum:3#fit-to-page:boolean:true#sheet-collate:keyword:collated\");\n\n    PrintJob printJob = new PrintJob.Builder(os.toByteArray())\n            .jobName(\"job-name\")\n            .userName(\"user-name\")\n            .copies(2)\n            .pageRanges(\"1-3\")\n            .duplex(false)\n            .portrait(false)\n            .color(true)\n            .pageFormat(\"iso-a4\")\n            .resolution(\"300dpi\")\n            .attributes(attributes)\n            .build();\n}catch (Exception e){\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>When I try to print i get the following error</p>\n\n<pre><code>07-18 12:26:29.294 30378-30529/com.appid.apps E/AndroidRuntime: FATAL EXCEPTION: Thread-8\n                                                              Process: com.appid.apps, PID: 30378\n                                                              java.lang.NoSuchFieldError: No static field INSTANCE of type Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; in class Lorg/apache/http/conn/ssl/AllowAllHostnameVerifier; or its superclasses (declaration of 'org.apache.http.conn.ssl.AllowAllHostnameVerifier' appears in /system/framework/framework.jar!classes3.dex)\n                                                                  at org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:144)\n                                                                  at org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:966)\n                                                                  at org.cups4j.operations.IppOperation.sendRequest(IppOperation.java:176)\n                                                                  at org.cups4j.operations.IppOperation.sendRequest(IppOperation.java:131)\n                                                                  at org.cups4j.operations.IppOperation.request(IppOperation.java:67)\n                                                                  at org.cups4j.operations.cups.CupsGetPrintersOperation.getPrinters(CupsGetPrintersOperation.java:56)\n                                                                  at org.cups4j.CupsClient.getPrinters(CupsClient.java:106)\n                                                                  at org.cups4j.CupsClient.getPrinter(CupsClient.java:166)\n                                                                  at com.appid.apps.IPPPrinter.connect(IPPPrinter.java:107)\n                                                                  at com.appid.apps.Printing$1.run(Printing.java:604)\n                                                                  at java.lang.Thread.run(Thread.java:764)\n</code></pre>\n\n<p>Alternatively is there any other library that deals with IPP printing from android?</p>\n"},{"tags":["java","android","arraylist"],"owner":{"account_id":24830565,"reputation":79,"user_id":18709793,"display_name":"Newbie_programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700030749,"creation_date":1700030749,"question_id":77485711,"body_markdown":"I was trying to add **Firebase Database** value to an ArrayList for later use. I created a model class for this. And then I was trying to add this model class to an **ArrayList**. But for some reason the ArrayList size is 0, that means no data is going to the ArrayList. Why is that? I did that to other activities and it worked, but it&#39;s not working here. I added the code snippet here-\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityViewProfileBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        ArrayList&lt;Users&gt; user_list = new ArrayList&lt;&gt;(); //Users is the model class\r\n\r\n        FirebaseDatabase.getInstance().getReference().child(&quot;users&quot;).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                user_list.clear();\r\n                for(DataSnapshot ss: snapshot.getChildren()){\r\n                    Users us = ss.getValue(Users.class);\r\n                    user_list.add(us); //adding the model class to the ArrayList\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(ViewProfileActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        Toast.makeText(this, String.valueOf(user_list.size()), Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n \r\nWhat could be the problem here? The toast shows &quot;0&quot; that means no data whatsoever inside the **ArrayList**. What am I missing here? ","title":"How to add Firebase Database Value stored in a model class to an ArrayList","body":"<p>I was trying to add <strong>Firebase Database</strong> value to an ArrayList for later use. I created a model class for this. And then I was trying to add this model class to an <strong>ArrayList</strong>. But for some reason the ArrayList size is 0, that means no data is going to the ArrayList. Why is that? I did that to other activities and it worked, but it's not working here. I added the code snippet here-</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    binding = ActivityViewProfileBinding.inflate(getLayoutInflater());\n    setContentView(binding.getRoot());\n\n    ArrayList&lt;Users&gt; user_list = new ArrayList&lt;&gt;(); //Users is the model class\n\n    FirebaseDatabase.getInstance().getReference().child(&quot;users&quot;).addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            user_list.clear();\n            for(DataSnapshot ss: snapshot.getChildren()){\n                Users us = ss.getValue(Users.class);\n                user_list.add(us); //adding the model class to the ArrayList\n            }\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n            Toast.makeText(ViewProfileActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();\n        }\n    });\n\n    Toast.makeText(this, String.valueOf(user_list.size()), Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n<p>What could be the problem here? The toast shows &quot;0&quot; that means no data whatsoever inside the <strong>ArrayList</strong>. What am I missing here?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":1,"creation_date":1699973222,"post_id":77481479,"comment_id":136595945,"body_markdown":"Can you share your AndroidManifest.xml file? Also, can you share the entire error log? And is your ChatBot class an activity?","body":"Can you share your AndroidManifest.xml file? Also, can you share the entire error log? And is your ChatBot class an activity?"}],"owner":{"account_id":29188973,"reputation":1,"user_id":22361460,"display_name":"MOON WON"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700030542,"creation_date":1699972673,"question_id":77481479,"body_markdown":"I&#39;m currently having a problem with an Error running &#39;app&#39;.\r\nIt said that it&#39;s unable to determine activity name.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        public boolean onCreateOptionsMenu(Menu menu){\r\n            getMenuInflater().inflate(R.menu.menu_bottomnavigationview, menu);\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean onOptionsItemSelected(MenuItem item){\r\n            int id = item.getItemId();\r\n    \r\n            if(id == android.R.id.home){ // MainActivityë¡ íë©´ì í\r\n                Intent homeIntent = new Intent(this, MainActivity.class);\r\n    \r\n                startActivity(homeIntent);\r\n            }\r\n    \r\n            if(id==R.id.backward){ //ì¶í ë¤ë¡ê°ê¸° ì¡í°ë¹í°ë¡ ì¶ê°\r\n                Intent intent = new Intent(this, MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n    \r\n            if(id ==R.id.chat_bot){\r\n                Intent settingIntent = new Intent(this, ChatBot.class);\r\n    \r\n                startActivity(settingIntent);\r\n                \r\n            }\r\n    \r\n            return super.onOptionsItemSelected(item);\r\n    \r\n        }\r\n    \r\n\r\nThis is my MainActivity.Java, and I made menu xml to change activity by clicking the menu.\r\nThere is two Activity, MainActivity and ChatBot. \r\n\r\nHope I can handle this problem in here. Thanks.\r\n\r\nI heard that it has some dependency problem, so I tried to fix the gradle(app) file to add some modules. But there is only Kotline code for it. Since I am using java, I wanna know how to add modules in java language.\r\n\r\n\r\n++\r\nhere is my Manifest.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Team2App_ToolBar&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.ChatBot&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n\r\n\r\n\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\n\r\n","title":"Unable to determine activity name","body":"<p>I'm currently having a problem with an Error running 'app'.\nIt said that it's unable to determine activity name.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu){\n        getMenuInflater().inflate(R.menu.menu_bottomnavigationview, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item){\n        int id = item.getItemId();\n\n        if(id == android.R.id.home){ // MainActivityë¡ íë©´ì í\n            Intent homeIntent = new Intent(this, MainActivity.class);\n\n            startActivity(homeIntent);\n        }\n\n        if(id==R.id.backward){ //ì¶í ë¤ë¡ê°ê¸° ì¡í°ë¹í°ë¡ ì¶ê°\n            Intent intent = new Intent(this, MainActivity.class);\n            startActivity(intent);\n        }\n\n        if(id ==R.id.chat_bot){\n            Intent settingIntent = new Intent(this, ChatBot.class);\n\n            startActivity(settingIntent);\n            \n        }\n\n        return super.onOptionsItemSelected(item);\n\n    }\n</code></pre>\n<p>This is my MainActivity.Java, and I made menu xml to change activity by clicking the menu.\nThere is two Activity, MainActivity and ChatBot.</p>\n<p>Hope I can handle this problem in here. Thanks.</p>\n<p>I heard that it has some dependency problem, so I tried to fix the gradle(app) file to add some modules. But there is only Kotline code for it. Since I am using java, I wanna know how to add modules in java language.</p>\n<p>++\nhere is my Manifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n</code></pre>\n<p></p>\n<pre><code>&lt;application\n    android:allowBackup=&quot;true&quot;\n    android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n    android:fullBackupContent=&quot;@xml/backup_rules&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:theme=&quot;@style/Theme.Team2App_ToolBar&quot;\n    tools:targetApi=&quot;31&quot;&gt;\n    &lt;activity\n        android:name=&quot;.ChatBot&quot;\n        android:exported=&quot;false&quot; /&gt;\n    &lt;activity\n        android:name=&quot;.MainActivity&quot;\n        android:exported=&quot;false&quot; /&gt;\n\n\n\n&lt;/application&gt;\n</code></pre>\n\n"},{"tags":["java","spring-boot","rest","http","undertow"],"comments":[{"owner":{"account_id":20164129,"reputation":1,"user_id":14788502,"display_name":"Vishal Gupta"},"score":0,"creation_date":1700029908,"post_id":77485654,"comment_id":136603458,"body_markdown":"@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        // Configure security for servlet endpoints\n        http\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().\n            .authorizeRequests()\n             .antMatchers(&quot;/api/**&quot;).authenticated()\n             .antMatchers(&quot;/servlet-endpoint/**&quot;).authenticated()\n             .anyRequest().permitAll().and()\n             .addFilterBefore(customFilter,SecurityContextHolderAwareRequestFilter);\n            .csrf().disabled();","body":"@Override     protected void configure(HttpSecurity http) throws Exception {         // Configure security for servlet endpoints         http             .sessionManagement().sessionCreationPolicy(SessionCreationPo&zwnj;&#8203;licy.STATELESS).and(&zwnj;&#8203;).             .authorizeRequests()              .antMatchers(&quot;/api/**&quot;).authenticated()              .antMatchers(&quot;/servlet-endpoint/**&quot;).authenticated()              .anyRequest().permitAll().and()              .addFilterBefore(customFilter,SecurityContextHolderAwareRequ&zwnj;&#8203;estFilter);             .csrf().disabled();"},{"owner":{"account_id":20164129,"reputation":1,"user_id":14788502,"display_name":"Vishal Gupta"},"score":0,"creation_date":1700029915,"post_id":77485654,"comment_id":136603459,"body_markdown":"java.lang.IllegalStateException : Session is invalid -YDJDFSBSDNFSJVSHGSGNS\nInMemorySessionManager. ..undertow-core 2.2.17.FINAl.jar\nSavedRequest.java ........undertow-servlet\nCacheAuthenticatedSessionHandler.java","body":"java.lang.IllegalStateException : Session is invalid -YDJDFSBSDNFSJVSHGSGNS InMemorySessionManager. ..undertow-core 2.2.17.FINAl.jar SavedRequest.java ........undertow-servlet CacheAuthenticatedSessionHandler.java"}],"owner":{"account_id":20164129,"reputation":1,"user_id":14788502,"display_name":"Vishal Gupta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700029820,"creation_date":1700029820,"question_id":77485654,"body_markdown":"I am using undertow server , undertow servlet 2.2.9.FINAL\r\n\r\nThe code is to authenticate Rest Api Endpoints and Servlet Endpoint\r\n\r\nCan you please suggest how to fix this Issue?\r\n\r\nI am not getting any error in Dev and UAT Environment, but getting error in Production Environment intermitently.\r\n            \r\nI was expecting servlet and rest api to work fine.\r\nBut I am getting intermittent issue of Session is invalid.\r\nAnother service is hitting end point with token, token is valid still getting issue.\r\nThere is no issue in Servlet. which is accessd from browser\r\n","title":"Session is Invalid Error in Spring Boot Using WebSecurityConfigurerAdapter","body":"<p>I am using undertow server , undertow servlet 2.2.9.FINAL</p>\n<p>The code is to authenticate Rest Api Endpoints and Servlet Endpoint</p>\n<p>Can you please suggest how to fix this Issue?</p>\n<p>I am not getting any error in Dev and UAT Environment, but getting error in Production Environment intermitently.</p>\n<p>I was expecting servlet and rest api to work fine.\nBut I am getting intermittent issue of Session is invalid.\nAnother service is hitting end point with token, token is valid still getting issue.\nThere is no issue in Servlet. which is accessd from browser</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","criteria-api"],"answers":[{"comments":[{"owner":{"account_id":29198739,"reputation":25,"user_id":22369313,"display_name":"Joe"},"score":0,"creation_date":1700030016,"post_id":77485588,"comment_id":136603472,"body_markdown":"Hi Sebastian, I do have multiple associations like these in my project. The above example is a breakdown of one such case. I have used your suggestion to show the kind of SQL that is being generated. I&#39;m seeing that the number of &quot;select&quot; statements are essentially the same with or without using the &quot;fetch&quot; function. I just wanna be thorough though since my database is small right now and will keep on growing in the future. Which is why I wanted to explore the &quot;fetch&quot; function but the docs are not that clear though.","body":"Hi Sebastian, I do have multiple associations like these in my project. The above example is a breakdown of one such case. I have used your suggestion to show the kind of SQL that is being generated. I&#39;m seeing that the number of &quot;select&quot; statements are essentially the same with or without using the &quot;fetch&quot; function. I just wanna be thorough though since my database is small right now and will keep on growing in the future. Which is why I wanted to explore the &quot;fetch&quot; function but the docs are not that clear though."},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1700030750,"post_id":77485588,"comment_id":136603555,"body_markdown":"`fetch` would translate into a `JOIN FETCH` query in JPQL, which means it would be an SQL join but the resulting columns from the joined entity are already loaded into memory too. So that once you have your `campus` object and you call `getEmployeeList()`, it doesn&#39;t actually do another query right then, but just gets the data from memory.","body":"<code>fetch</code> would translate into a <code>JOIN FETCH</code> query in JPQL, which means it would be an SQL join but the resulting columns from the joined entity are already loaded into memory too. So that once you have your <code>campus</code> object and you call <code>getEmployeeList()</code>, it doesn&#39;t actually do another query right then, but just gets the data from memory."},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1700030880,"post_id":77485588,"comment_id":136603570,"body_markdown":"So without knowing how the CriteriaBuilder really works internally, but seeing option 2 doesn&#39;t do the fetch for the second join, I would imagine option 1 does fewer queries in total (once you actually do something like `getEmployeeList().get(0).getDepartment()`","body":"So without knowing how the CriteriaBuilder really works internally, but seeing option 2 doesn&#39;t do the fetch for the second join, I would imagine option 1 does fewer queries in total (once you actually do something like <code>getEmployeeList().get(0).getDepartment()</code>"},{"owner":{"account_id":29198739,"reputation":25,"user_id":22369313,"display_name":"Joe"},"score":0,"creation_date":1700034720,"post_id":77485588,"comment_id":136604019,"body_markdown":"@Sebastian, So, in effect, the only demerit of using &quot;fetch&quot; would be the increased memory consumption on my application server, since the data has been &quot;pre-fetched&quot; and is stored in-memory. So, it&#39;s essentially a trade-off between the number of SQL queries fired to my database and the memory consumption in my application server. Which means if my database is huge, my application server should have enough memory to support the same.","body":"@Sebastian, So, in effect, the only demerit of using &quot;fetch&quot; would be the increased memory consumption on my application server, since the data has been &quot;pre-fetched&quot; and is stored in-memory. So, it&#39;s essentially a trade-off between the number of SQL queries fired to my database and the memory consumption in my application server. Which means if my database is huge, my application server should have enough memory to support the same."},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1700035052,"post_id":77485588,"comment_id":136604073,"body_markdown":"@Joe correct, but if you&#39;re going to retrieve the associated data later anyway before the main data goes out of scope/can be garbage collected, you wouldn&#39;t save anything by delaying putting it in memory.","body":"@Joe correct, but if you&#39;re going to retrieve the associated data later anyway before the main data goes out of scope/can be garbage collected, you wouldn&#39;t save anything by delaying putting it in memory."},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1700035486,"post_id":77485588,"comment_id":136604152,"body_markdown":"@Joe actually that&#39;s not the ONLY downside, but the other downside only comes into play of you have more ManyToOne associations like this. By preemptively joining them already, you multiply the amount of rows returned from the database at once. So if the campus has 100 employees and 100 classrooms, 1 campus with both those associations joined would already return 10.000 rows. In this scenario I&#39;d start doing separate queries for the associated data, like I mentioned in my answer.","body":"@Joe actually that&#39;s not the ONLY downside, but the other downside only comes into play of you have more ManyToOne associations like this. By preemptively joining them already, you multiply the amount of rows returned from the database at once. So if the campus has 100 employees and 100 classrooms, 1 campus with both those associations joined would already return 10.000 rows. In this scenario I&#39;d start doing separate queries for the associated data, like I mentioned in my answer."},{"owner":{"account_id":29198739,"reputation":25,"user_id":22369313,"display_name":"Joe"},"score":0,"creation_date":1700036394,"post_id":77485588,"comment_id":136604283,"body_markdown":"@Sebastian, so I&#39;m better off not doing the &quot;pre-fetching&quot; then. Please correct me if I&#39;m wrong but If I use only the `root.get()` statement, it means I&#39;m avoiding fetching the corresponding Join entities? So, a separate SQL query would be fired if I do something like `getEmployeeList().get(0).getDepartment()`?","body":"@Sebastian, so I&#39;m better off not doing the &quot;pre-fetching&quot; then. Please correct me if I&#39;m wrong but If I use only the <code>root.get()</code> statement, it means I&#39;m avoiding fetching the corresponding Join entities? So, a separate SQL query would be fired if I do something like <code>getEmployeeList().get(0).getDepartment()</code>?"},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1700036957,"post_id":77485588,"comment_id":136604367,"body_markdown":"Yeah if you don&#39;t pre-fetch then getting the associated objects will do another query. In fact that query probably happens regardless UNLESS you configure it with `@ManyToOne(fetch = FetchType.LAZY)`","body":"Yeah if you don&#39;t pre-fetch then getting the associated objects will do another query. In fact that query probably happens regardless UNLESS you configure it with <code>@ManyToOne(fetch = FetchType.LAZY)</code>"},{"owner":{"account_id":29198739,"reputation":25,"user_id":22369313,"display_name":"Joe"},"score":1,"creation_date":1700037833,"post_id":77485588,"comment_id":136604502,"body_markdown":"@Sebastian, Okay. Thank You so much for your clarifications!","body":"@Sebastian, Okay. Thank You so much for your clarifications!"}],"tags":[],"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700028671,"creation_date":1700028671,"answer_id":77485588,"question_id":77480274,"body_markdown":"As a general note, I wouldn&#39;t worry about performance prematurely unless you notice that requests are taking quite long. I personally don&#39;t use the CriteriaBuilder when using Spring Boot/Hibernate as the statements become incredibly verbose compared to just using JPQL or SQL, but in the end what really matters for performance is the queries that are the result of this. Those might very well be the same for your 2 options.\r\n\r\nIf you want to check this, you could either monitor the queries on your database, or put this in your `application.properties`:\r\n\r\n`spring.jpa.show-sql=true`\r\n\r\nSo you can see what kind of SQL is generated.\r\n\r\nMind you, a general tip of Hibernate themselves is to not use the entities when all you want to do is export them as a view.\r\n\r\n\r\nFor a fairly simple query like this with one ManyToOne join and one OneToMany join, I don&#39;t think overall performance is going to be that bad. Once you start joining multiple associations, that&#39;s when you probably should start splitting up queries in main table query and associated data table queries.","title":"Spring Boot Specifications root&#39;s fetch function for join columns effects on performance","body":"<p>As a general note, I wouldn't worry about performance prematurely unless you notice that requests are taking quite long. I personally don't use the CriteriaBuilder when using Spring Boot/Hibernate as the statements become incredibly verbose compared to just using JPQL or SQL, but in the end what really matters for performance is the queries that are the result of this. Those might very well be the same for your 2 options.</p>\n<p>If you want to check this, you could either monitor the queries on your database, or put this in your <code>application.properties</code>:</p>\n<p><code>spring.jpa.show-sql=true</code></p>\n<p>So you can see what kind of SQL is generated.</p>\n<p>Mind you, a general tip of Hibernate themselves is to not use the entities when all you want to do is export them as a view.</p>\n<p>For a fairly simple query like this with one ManyToOne join and one OneToMany join, I don't think overall performance is going to be that bad. Once you start joining multiple associations, that's when you probably should start splitting up queries in main table query and associated data table queries.</p>\n"}],"owner":{"account_id":29198739,"reputation":25,"user_id":22369313,"display_name":"Joe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77485588,"answer_count":1,"score":0,"last_activity_date":1700028671,"creation_date":1699961485,"question_id":77480274,"body_markdown":"Suppose I have a Spring Boot Project that is structured as shown below, where I am storing Campus details, which has a lot of employees. Additionally many employees are also a part of one department only i.e. Department is a Master data Entity.\r\n```\r\npublic class Campus {\r\n\t@Id\r\n\tprivate String campusNo;\r\n\r\n\t@JsonManagedReference\r\n\t@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;employee&quot;)\r\n\tprivate List&lt;Employee&gt;employeeList = new ArrayList&lt;&gt;();\r\n}\r\n\r\npublic class Employee {\r\n\t@Id\r\n\tprivate String employeeCode;\r\n\r\n\t@JsonBackReference\r\n    @ManyToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;campusNo&quot;, nullable = false)\r\n    private Campus campus;\r\n\r\n    @ManyToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(referencedColumnName = &quot;departMentNo&quot;)\r\n    private Department department;\r\n}\r\n\r\npublic class Department {\r\n\t@Id\r\n\tprivate String departMentNo;\r\n}\r\n```\r\nNow, if I want to use Specifications in my project to create configurable reports as shown below, which of the below two &quot;fetch()&quot; statements (marked as **Option 1** and **Option 2**) would be helpful for performance(reducing the number of &quot;select&quot; statements) and why? Both of them work. I&#39;m only interested in knowing the merits and demerits (if any), of each statement.\r\n```\r\npublic class CampusSpecification implements Specification&lt;Campus&gt; {\r\n\tprivate SearchCriteria searchCriteria;\r\n\r\n    @Override\r\n    public Predicate toPredicate(Root&lt;Campus&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\r\n        root.fetch(&quot;employeeList&quot;).fetch(&quot;department&quot;); // Option 1\r\n        root.fetch(&quot;employeeList&quot;); // Option 2\r\n        return criteriaBuilder.in(root.get(&quot;employeeList&quot;).get(&quot;department&quot;).get(&quot;departMentNo&quot;)).value(searchCriteria.getValue());\r\n    }\r\n}\r\n```","title":"Spring Boot Specifications root&#39;s fetch function for join columns effects on performance","body":"<p>Suppose I have a Spring Boot Project that is structured as shown below, where I am storing Campus details, which has a lot of employees. Additionally many employees are also a part of one department only i.e. Department is a Master data Entity.</p>\n<pre><code>public class Campus {\n    @Id\n    private String campusNo;\n\n    @JsonManagedReference\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;employee&quot;)\n    private List&lt;Employee&gt;employeeList = new ArrayList&lt;&gt;();\n}\n\npublic class Employee {\n    @Id\n    private String employeeCode;\n\n    @JsonBackReference\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;campusNo&quot;, nullable = false)\n    private Campus campus;\n\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(referencedColumnName = &quot;departMentNo&quot;)\n    private Department department;\n}\n\npublic class Department {\n    @Id\n    private String departMentNo;\n}\n</code></pre>\n<p>Now, if I want to use Specifications in my project to create configurable reports as shown below, which of the below two &quot;fetch()&quot; statements (marked as <strong>Option 1</strong> and <strong>Option 2</strong>) would be helpful for performance(reducing the number of &quot;select&quot; statements) and why? Both of them work. I'm only interested in knowing the merits and demerits (if any), of each statement.</p>\n<pre><code>public class CampusSpecification implements Specification&lt;Campus&gt; {\n    private SearchCriteria searchCriteria;\n\n    @Override\n    public Predicate toPredicate(Root&lt;Campus&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\n        root.fetch(&quot;employeeList&quot;).fetch(&quot;department&quot;); // Option 1\n        root.fetch(&quot;employeeList&quot;); // Option 2\n        return criteriaBuilder.in(root.get(&quot;employeeList&quot;).get(&quot;department&quot;).get(&quot;departMentNo&quot;)).value(searchCriteria.getValue());\n    }\n}\n</code></pre>\n"},{"tags":["java","https","openssl","tomcat8","ubuntu-22.04"],"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1699342773,"post_id":77435703,"comment_id":136516279,"body_markdown":"**Your tomcat (like most) is listening on 8443 and 8080, NOT 443 or 80.** This is the default in the &#39;standard&#39; config file and usually retained because on Unix using ports below 1024 requires &#39;root&#39; or a special capability and doing those for Java can be a big security risk. If you&#39;re okay with using the alternate ports (many people are), just use `openssl s_client -connect example.com:8443` and similarly use `https://example.com:8443/whatever` in a browser, curl, wget, fetch, etc. If you want the standard ports there are many different approaches but all offtopic here. ...","body":"<b>Your tomcat (like most) is listening on 8443 and 8080, NOT 443 or 80.</b> This is the default in the &#39;standard&#39; config file and usually retained because on Unix using ports below 1024 requires &#39;root&#39; or a special capability and doing those for Java can be a big security risk. If you&#39;re okay with using the alternate ports (many people are), just use <code>openssl s_client -connect example.com:8443</code> and similarly use <code>https:&#47;&#47;example.com:8443&#47;whatever</code> in a browser, curl, wget, fetch, etc. If you want the standard ports there are many different approaches but all offtopic here. ..."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1699343038,"post_id":77435703,"comment_id":136516306,"body_markdown":"... BTW Java 8u382 is not old at all; TC 8.0.3 is, and thus would be all the more unsafe to run privileged (one of the many approaches I referred to). You would probably be better off with one of the approaches that puts a reverse proxy in front of TC, _both_ to do the SSL/TLS termination _and_ to block attacks using nonstandard, malformed or crafted HTTP; httpd (&#39;apache2&#39; in ubuntu repo) is usually easiest, but nginx is possible and few others.","body":"... BTW Java 8u382 is not old at all; TC 8.0.3 is, and thus would be all the more unsafe to run privileged (one of the many approaches I referred to). You would probably be better off with one of the approaches that puts a reverse proxy in front of TC, <i>both</i> to do the SSL/TLS termination <i>and</i> to block attacks using nonstandard, malformed or crafted HTTP; httpd (&#39;apache2&#39; in ubuntu repo) is usually easiest, but nginx is possible and few others."},{"owner":{"account_id":29842711,"reputation":1,"user_id":22870489,"display_name":"OzanD"},"score":0,"creation_date":1699402771,"post_id":77435703,"comment_id":136526560,"body_markdown":"@dave_thompson_085, thanks for the information, but this also gave an error. I added the error message above.","body":"@dave_thompson_085, thanks for the information, but this also gave an error. I added the error message above."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699403293,"post_id":77435703,"comment_id":136526608,"body_markdown":"This is all about the listening port. It has nothing to do with certificates whatsoever.","body":"This is all about the listening port. It has nothing to do with certificates whatsoever."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1699433723,"post_id":77435703,"comment_id":136529470,"body_markdown":"Okay, that shows `s_client` did _connect_ at TCP level to 8443 but after the &#39;hello&#39; message tomcat abnormally closed (104 is ECONNRESET) -- or possibly if your network connection goes through any kind of gateway, firewall or monitoring facility, that could have decided to abort the connection. Check the tomcat logs to see what (it thinks) happened.","body":"Okay, that shows <code>s_client</code> did <i>connect</i> at TCP level to 8443 but after the &#39;hello&#39; message tomcat abnormally closed (104 is ECONNRESET) -- or possibly if your network connection goes through any kind of gateway, firewall or monitoring facility, that could have decided to abort the connection. Check the tomcat logs to see what (it thinks) happened."}],"owner":{"account_id":29842711,"reputation":1,"user_id":22870489,"display_name":"OzanD"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700028557,"creation_date":1699333994,"question_id":77435703,"body_markdown":"I am trying to make the SSL installation of my website and configure its HTTPS settings.\r\nI installed Tomcat 8.0.3 on Ubuntu 22.04. The java version is:\r\n\r\n\r\n```\r\nopenjdk version &quot;1.8.0_382&quot;\r\nOpenJDK Runtime Environment (build 1.8.0_382-8u382-ga-1~22.04.1-b05)\r\nOpenJDK 64-Bit Server VM (build 25.382-b05, mixed mode)\r\n```\r\n\r\nI got letsencrypt certificate using acme.sh:\r\n\r\n`acme.sh --issue --dns dns_namesilo -d example.com -d www.example.com --dnssleep 2000`\r\n\r\n\r\n```\r\nroot@server:/# acme.sh --list                                                                                \r\nMain_Domain  KeyLength  SAN_Domains      CA               Created               Renew        \r\nexample.com  &quot;ec-256&quot;   www.example.com  LetsEncrypt.org  2023-11-02T19:40:54Z  2023-12-31T19:40:54Z \r\n```\r\nacme.sh created these certificate files:\r\n\r\n\r\n```\r\nSSLCertificateFile=&quot;/root/.acme.sh/example.com_ecc/fullchain.cer&quot;\r\nSSLCACertificateFile=&quot;/root/.acme.sh/example.com_ecc/ca.cer&quot;\r\nSSLCertificateKeyFile=&quot;/root/.acme.sh/example.com_ecc/example.com.key&quot;\r\n```\r\n\r\nThen I had to import the certificate and the key as PrivateKeyEntry:\r\n\r\n```\r\nopenssl pkcs12 -export -in /root/.acme.sh/example.com_ecc/example.com.cer -inkey /root/.acme.sh/example.com_ecc/example.com.key -name example.com -out example.com.p12\r\n\r\nkeytool -importkeystore -deststorepass changeit -destkeystore /root/.keystore -srckeystore example.com.p12 -srcstoretype PKCS12\r\n```\r\n\r\nNow I have two files: example.com.jks and example.com.p12. But the first one is trustedCertEntry:\r\n\r\n```\r\nroot@server:/# keytool -list -keystore /example.com.jks\r\nKeystore type: PKCS12\r\nKeystore provider: SUN\r\n\r\nYour keystore contains 1 entry\r\n\r\nexample.com, Nov 5, 2023, trustedCertEntry,\r\nCertificate fingerprint (SHA-256)\r\n```\r\n\r\nThe .p12 one ise the PrivateKeyEntry:\r\n\r\n```\r\nroot@server:/# keytool -list -keystore /example.com.p12\r\nKeystore type: PKCS12\r\nKeystore provider: SUN\r\n\r\nYour keystore contains 1 entry\r\n\r\nexample.com, Nov 5, 2023, PrivateKeyEntry,\r\nCertificate fingerprint (SHA-256)\r\n```\r\n\r\nSo I changed the server.xml like this:\r\n\r\n\r\n```\r\n...\r\n    &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;\r\n               SSLEnabled=&quot;true&quot; maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n               keystoreAlias=&quot;example.com&quot;\r\n               keystoreFile=&quot;/example.com.p12&quot;\r\n               keystorePass=&quot;changeit&quot;\r\n               clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;\r\n...\r\n```\r\n\r\nBut it didn&#39;t work.\r\n\r\n\r\nThe error message I encounter is as follows:\r\n\r\n```\r\nroot@server:/# openssl s_client -connect example.com:443\r\n4047E1C40B7F0000:error:8000006F:system library:BIO_connect:Connectionrefused:../crypto/bio/bio_sock2.c:125:calling connect()\r\n4047E1C40B7F0000:error:10000067:BIO routines:BIO_connect:connect error:../crypto/bio/bio_sock2.c:127:connect:errno=111\r\n```\r\n\r\nThen I noticed that port 443 is closed:\r\n\r\n\r\n```\r\nroot@server:/# nmap -p 443 example.com --reason\r\nStarting Nmap 7.80 ( https://nmap.org ) at 2023-11-06 23:36 +03\r\nNmap scan report for example.com\r\nHost is up, received localhost-response (0.00012s latency).\r\n\r\nPORT    STATE  SERVICE REASON\r\n443/tcp closed https   reset ttl 64\r\n\r\nNmap done: 1 IP address (1 host up) scanned in 0.29 seconds\r\n```\r\n\r\n```\r\nroot@server:/# netstat -anltp | grep LISTEN                                                                  \r\ntcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      229/systemd-resolve          \r\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      336/sshd: /usr/sbin          \r\ntcp6       0      0 :::8080                 :::*                    LISTEN      254540/java                  \r\ntcp6       0      0 :::22                   :::*                    LISTEN      336/sshd: /usr/sbin          \r\ntcp6     101      0 :::8443                 :::*                    LISTEN      254540/java                  \r\ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      254540/java                  \r\ntcp6       0      0 :::8009                 :::*                    LISTEN      254540/java\r\n```\r\n\r\nAppears on the ufw list:\r\n\r\n```\r\nroot@server:/# ufw status numbered\r\nStatus: active\r\n\r\n     To                         Action      From\r\n     --                         ------      ----\r\n[ 1] 22/tcp                     ALLOW IN    Anywhere\r\n[ 2] 22                         ALLOW IN    Anywhere\r\n[ 3] 80                         ALLOW IN    Anywhere\r\n[ 4] 443                        ALLOW IN    Anywhere\r\n[ 5] 8080                       ALLOW IN    Anywhere\r\n[ 6] 8443                       ALLOW IN    Anywhere\r\n[ 7] OpenSSH                    ALLOW IN    Anywhere\r\n```\r\n\r\nThe detailed status of other ports is as follows:\r\n\r\n```\r\nroot@server:/# lsof -i:8080\r\nCOMMAND    PID     USER     FD   TYPE     DEVICE SIZE/OFF  NODE  NAME\r\njava       254540  tomcat   57u  IPv6     2619532819       0t0   TCP *:http-alt (LISTEN)\r\n```\r\n\r\n```\r\nroot@server:/# lsof -i:8443\r\nCOMMAND    PID     USER     FD   TYPE     DEVICE SIZE/OFF  NODE  NAME                                              \r\njava       254540  tomcat   58u  IPv6     2619532820       0t0   TCP *:8443 (LISTEN)\r\n```\r\n\r\n```\r\nroot@server:/# lsof -i:80\r\nCOMMAND  PID  USER   FD   TYPE     DEVICE SIZE/OFF   NODE  NAME                                                   \r\ndhpcd    431  root   10u  IPv4     2625048130        0t0   TCP server.example.com:36174-&gt;ns31430745.ip-141-94-96.eu:http (ESTABLISHED)\r\n```\r\n\r\nI&#39;ve read that acme.sh doesn&#39;t use IPv6, but I&#39;m not sure if that has anything to do with it.\r\n\r\nI have to re-setup my website using old versions of Tomcat and Java and this is causing too many problems. Frankly, I have no clear ideas what I should do at this stage. I will be grateful if you could help me.\r\n\r\n\r\n**EDIT:**\r\n\r\n```\r\nroot@server:/# openssl s_client -connect example.com:8443\r\nCONNECTED(00000003)\r\nwrite:errno=104\r\n---\r\nno peer certificate available\r\n---\r\nNo client certificate CA names sent\r\n---\r\nSSL handshake has read 0 bytes and written 321 bytes\r\nVerification: OK\r\n---\r\nNew, (NONE), Cipher is (NONE)\r\nSecure Renegotiation IS NOT supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nEarly data was not sent\r\nVerify return code: 0 (ok)\r\n```\r\n\r\n**SOLUTION:**\r\n\r\nThe problem was due to iptables redirection. There are two points to consider at this point. First, to delete prerouting records, you need to use a command like this: iptables -t nat -D PREROUTING... Second, the commands needed to permanently save the change. What worked for me were the following:\r\n\r\n```\r\n# /sbin/iptables-save &gt; /etc/iptables/rules.v4\r\n# /sbin/ip6tables-save &gt; /etc/iptables/rules.v6\r\n```","title":"OpenSSL: ConnectionRefusedError: [Errno 111]","body":"<p>I am trying to make the SSL installation of my website and configure its HTTPS settings.\nI installed Tomcat 8.0.3 on Ubuntu 22.04. The java version is:</p>\n<pre><code>openjdk version &quot;1.8.0_382&quot;\nOpenJDK Runtime Environment (build 1.8.0_382-8u382-ga-1~22.04.1-b05)\nOpenJDK 64-Bit Server VM (build 25.382-b05, mixed mode)\n</code></pre>\n<p>I got letsencrypt certificate using acme.sh:</p>\n<p><code>acme.sh --issue --dns dns_namesilo -d example.com -d www.example.com --dnssleep 2000</code></p>\n<pre><code>root@server:/# acme.sh --list                                                                                \nMain_Domain  KeyLength  SAN_Domains      CA               Created               Renew        \nexample.com  &quot;ec-256&quot;   www.example.com  LetsEncrypt.org  2023-11-02T19:40:54Z  2023-12-31T19:40:54Z \n</code></pre>\n<p>acme.sh created these certificate files:</p>\n<pre><code>SSLCertificateFile=&quot;/root/.acme.sh/example.com_ecc/fullchain.cer&quot;\nSSLCACertificateFile=&quot;/root/.acme.sh/example.com_ecc/ca.cer&quot;\nSSLCertificateKeyFile=&quot;/root/.acme.sh/example.com_ecc/example.com.key&quot;\n</code></pre>\n<p>Then I had to import the certificate and the key as PrivateKeyEntry:</p>\n<pre><code>openssl pkcs12 -export -in /root/.acme.sh/example.com_ecc/example.com.cer -inkey /root/.acme.sh/example.com_ecc/example.com.key -name example.com -out example.com.p12\n\nkeytool -importkeystore -deststorepass changeit -destkeystore /root/.keystore -srckeystore example.com.p12 -srcstoretype PKCS12\n</code></pre>\n<p>Now I have two files: example.com.jks and example.com.p12. But the first one is trustedCertEntry:</p>\n<pre><code>root@server:/# keytool -list -keystore /example.com.jks\nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 1 entry\n\nexample.com, Nov 5, 2023, trustedCertEntry,\nCertificate fingerprint (SHA-256)\n</code></pre>\n<p>The .p12 one ise the PrivateKeyEntry:</p>\n<pre><code>root@server:/# keytool -list -keystore /example.com.p12\nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 1 entry\n\nexample.com, Nov 5, 2023, PrivateKeyEntry,\nCertificate fingerprint (SHA-256)\n</code></pre>\n<p>So I changed the server.xml like this:</p>\n<pre><code>...\n    &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;\n               SSLEnabled=&quot;true&quot; maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\n               keystoreAlias=&quot;example.com&quot;\n               keystoreFile=&quot;/example.com.p12&quot;\n               keystorePass=&quot;changeit&quot;\n               clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;\n...\n</code></pre>\n<p>But it didn't work.</p>\n<p>The error message I encounter is as follows:</p>\n<pre><code>root@server:/# openssl s_client -connect example.com:443\n4047E1C40B7F0000:error:8000006F:system library:BIO_connect:Connectionrefused:../crypto/bio/bio_sock2.c:125:calling connect()\n4047E1C40B7F0000:error:10000067:BIO routines:BIO_connect:connect error:../crypto/bio/bio_sock2.c:127:connect:errno=111\n</code></pre>\n<p>Then I noticed that port 443 is closed:</p>\n<pre><code>root@server:/# nmap -p 443 example.com --reason\nStarting Nmap 7.80 ( https://nmap.org ) at 2023-11-06 23:36 +03\nNmap scan report for example.com\nHost is up, received localhost-response (0.00012s latency).\n\nPORT    STATE  SERVICE REASON\n443/tcp closed https   reset ttl 64\n\nNmap done: 1 IP address (1 host up) scanned in 0.29 seconds\n</code></pre>\n<pre><code>root@server:/# netstat -anltp | grep LISTEN                                                                  \ntcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      229/systemd-resolve          \ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      336/sshd: /usr/sbin          \ntcp6       0      0 :::8080                 :::*                    LISTEN      254540/java                  \ntcp6       0      0 :::22                   :::*                    LISTEN      336/sshd: /usr/sbin          \ntcp6     101      0 :::8443                 :::*                    LISTEN      254540/java                  \ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      254540/java                  \ntcp6       0      0 :::8009                 :::*                    LISTEN      254540/java\n</code></pre>\n<p>Appears on the ufw list:</p>\n<pre><code>root@server:/# ufw status numbered\nStatus: active\n\n     To                         Action      From\n     --                         ------      ----\n[ 1] 22/tcp                     ALLOW IN    Anywhere\n[ 2] 22                         ALLOW IN    Anywhere\n[ 3] 80                         ALLOW IN    Anywhere\n[ 4] 443                        ALLOW IN    Anywhere\n[ 5] 8080                       ALLOW IN    Anywhere\n[ 6] 8443                       ALLOW IN    Anywhere\n[ 7] OpenSSH                    ALLOW IN    Anywhere\n</code></pre>\n<p>The detailed status of other ports is as follows:</p>\n<pre><code>root@server:/# lsof -i:8080\nCOMMAND    PID     USER     FD   TYPE     DEVICE SIZE/OFF  NODE  NAME\njava       254540  tomcat   57u  IPv6     2619532819       0t0   TCP *:http-alt (LISTEN)\n</code></pre>\n<pre><code>root@server:/# lsof -i:8443\nCOMMAND    PID     USER     FD   TYPE     DEVICE SIZE/OFF  NODE  NAME                                              \njava       254540  tomcat   58u  IPv6     2619532820       0t0   TCP *:8443 (LISTEN)\n</code></pre>\n<pre><code>root@server:/# lsof -i:80\nCOMMAND  PID  USER   FD   TYPE     DEVICE SIZE/OFF   NODE  NAME                                                   \ndhpcd    431  root   10u  IPv4     2625048130        0t0   TCP server.example.com:36174-&gt;ns31430745.ip-141-94-96.eu:http (ESTABLISHED)\n</code></pre>\n<p>I've read that acme.sh doesn't use IPv6, but I'm not sure if that has anything to do with it.</p>\n<p>I have to re-setup my website using old versions of Tomcat and Java and this is causing too many problems. Frankly, I have no clear ideas what I should do at this stage. I will be grateful if you could help me.</p>\n<p><strong>EDIT:</strong></p>\n<pre><code>root@server:/# openssl s_client -connect example.com:8443\nCONNECTED(00000003)\nwrite:errno=104\n---\nno peer certificate available\n---\nNo client certificate CA names sent\n---\nSSL handshake has read 0 bytes and written 321 bytes\nVerification: OK\n---\nNew, (NONE), Cipher is (NONE)\nSecure Renegotiation IS NOT supported\nCompression: NONE\nExpansion: NONE\nNo ALPN negotiated\nEarly data was not sent\nVerify return code: 0 (ok)\n</code></pre>\n<p><strong>SOLUTION:</strong></p>\n<p>The problem was due to iptables redirection. There are two points to consider at this point. First, to delete prerouting records, you need to use a command like this: iptables -t nat -D PREROUTING... Second, the commands needed to permanently save the change. What worked for me were the following:</p>\n<pre><code># /sbin/iptables-save &gt; /etc/iptables/rules.v4\n# /sbin/ip6tables-save &gt; /etc/iptables/rules.v6\n</code></pre>\n"},{"tags":["java","spring","gradle","module","gradle-kotlin-dsl"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1645525233,"post_id":71219439,"comment_id":125888432,"body_markdown":"try adding the JVM argument `--add-reads com.my.package=ALL-UNNAMED`. See [this](https://stackoverflow.com/a/57867970/10871900). Or try https://stackoverflow.com/questions/66660963/java-cannot-read-package-from-the-unnamed-module","body":"try adding the JVM argument <code>--add-reads com.my.package=ALL-UNNAMED</code>. See <a href=\"https://stackoverflow.com/a/57867970/10871900\">this</a>. Or try <a href=\"https://stackoverflow.com/questions/66660963/java-cannot-read-package-from-the-unnamed-module\" title=\"java cannot read package from the unnamed module\">stackoverflow.com/questions/66660963/&hellip;</a>"},{"owner":{"account_id":8309521,"reputation":89,"user_id":6245216,"display_name":"Daniel"},"score":0,"creation_date":1645529420,"post_id":71219439,"comment_id":125890094,"body_markdown":"thanks @dan1st that did the trick!","body":"thanks @dan1st that did the trick!"}],"answers":[{"comments":[{"owner":{"account_id":8719765,"reputation":1168,"user_id":6523288,"display_name":"Dragas"},"score":0,"creation_date":1696415561,"post_id":71220531,"comment_id":136149116,"body_markdown":"It&#39;s not IDE related. Nor should this option be used.","body":"It&#39;s not IDE related. Nor should this option be used."}],"tags":[],"owner":{"account_id":8309521,"reputation":89,"user_id":6245216,"display_name":"Daniel"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1645529401,"creation_date":1645529401,"answer_id":71220531,"question_id":71219439,"body_markdown":"As [dan1st][1] was pointing out  `--add-reads com.my.package=ALL-UNNAMED` did the trick. A more verbose explanation can be found in the question dan1st was [sharing][2] \r\nI didn&#39;t even think of the option that it could be IDE related. (I am using IntelliJ)\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/10871900/dan1st\r\n  [2]: https://stackoverflow.com/a/57867970/10871900","title":"Spring Boot 2.6.3 and Java Modules","body":"<p>As <a href=\"https://stackoverflow.com/users/10871900/dan1st\">dan1st</a> was pointing out  <code>--add-reads com.my.package=ALL-UNNAMED</code> did the trick. A more verbose explanation can be found in the question dan1st was <a href=\"https://stackoverflow.com/a/57867970/10871900\">sharing</a>\nI didn't even think of the option that it could be IDE related. (I am using IntelliJ)</p>\n"},{"tags":[],"owner":{"account_id":4620550,"reputation":1723,"user_id":3748178,"accept_rate":22,"display_name":"Salathiel Genese"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700027927,"creation_date":1700027927,"answer_id":77485550,"question_id":71219439,"body_markdown":"The module to require for CGLib-related issues `spring.aop` (that did the trick for me this morning).\r\n\r\nI follow on the Original Post (OP) self-answered question because adding `--add-reads` defeats the whole purpose of using Java Platform Module System (JPMS) in the first place.","title":"Spring Boot 2.6.3 and Java Modules","body":"<p>The module to require for CGLib-related issues <code>spring.aop</code> (that did the trick for me this morning).</p>\n<p>I follow on the Original Post (OP) self-answered question because adding <code>--add-reads</code> defeats the whole purpose of using Java Platform Module System (JPMS) in the first place.</p>\n"}],"owner":{"account_id":8309521,"reputation":89,"user_id":6245216,"display_name":"Daniel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1486,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77485550,"answer_count":2,"score":3,"last_activity_date":1700027927,"creation_date":1645524989,"question_id":71219439,"body_markdown":"I&#39;m trying to build a spring boot (2.6.3) application with java modules (java 17) and gradle(7.4).\r\n\r\nright now my folder structure looks like this:\r\n```\r\n    |- build.gradle.kts\r\n    |- settings.gradle.kts\r\n    |- src\r\n       |- main\r\n           |- java\r\n               |- com.my.package\r\n                   |- Application.java\r\n               |- module-info.java\r\n```\r\nmy module:\r\n```java\r\n    module com.my.package {\r\n        requires spring.boot;\r\n        requires spring.boot.autoconfigure;\r\n        requires spring.boot.actuator.autoconfigure;\r\n        \r\n        opens com.my.package;\r\n    }\r\n```\r\nThe application class:\r\n```java\r\n    @SpringBootApplication\r\n    public class Application {\r\n\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\n```\r\nI already found out that I had to use `opens` with my package instead of just using `exports`. If I where to use `exports` I would get this error:\r\n\r\n&gt; java.lang.IllegalAccessException--&gt;module com.my.package does not open com.my.package to unnamed module @1a482e36\r\n\r\nNow when I run this with the `opens` I&#39;ll get this error here:\r\n\r\n&gt; java.lang.IllegalAccessError--&gt;superinterface check failed: class com.my.package.Application$$EnhancerBySpringCGLIB$$917dba7a (in module com.my.package) cannot access class org.springframework.context.annotation.ConfigurationClassEnhancer$EnhancedConfiguration (in unnamed module @0x1623b78d) because module com.my.package does not read unnamed module @0x1623b78d\r\n\r\nI&#39;ve read things about using the -classpath JVM argument. But I am not quite certain which path to put there. And to be frank I am trying to find a solution that works without any arguments that need to be passed. So that the experience is similar to spring without (java)modules.\r\n\r\nIt&#39;d be great if someone could help me to understand what I am doing wrong here. I&#39;m obviously new to java modules and trying to wrap my head around things.\r\n\r\nThanks in advance!\r\n\r\nCheers,\r\nDaniel","title":"Spring Boot 2.6.3 and Java Modules","body":"<p>I'm trying to build a spring boot (2.6.3) application with java modules (java 17) and gradle(7.4).</p>\n<p>right now my folder structure looks like this:</p>\n<pre><code>    |- build.gradle.kts\n    |- settings.gradle.kts\n    |- src\n       |- main\n           |- java\n               |- com.my.package\n                   |- Application.java\n               |- module-info.java\n</code></pre>\n<p>my module:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    module com.my.package {\n        requires spring.boot;\n        requires spring.boot.autoconfigure;\n        requires spring.boot.actuator.autoconfigure;\n        \n        opens com.my.package;\n    }\n</code></pre>\n<p>The application class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @SpringBootApplication\n    public class Application {\n\n        public static void main(String[] args) {\n            SpringApplication.run(Application.class, args);\n        }\n    }\n</code></pre>\n<p>I already found out that I had to use <code>opens</code> with my package instead of just using <code>exports</code>. If I where to use <code>exports</code> I would get this error:</p>\n<blockquote>\n<p>java.lang.IllegalAccessException--&gt;module com.my.package does not open com.my.package to unnamed module @1a482e36</p>\n</blockquote>\n<p>Now when I run this with the <code>opens</code> I'll get this error here:</p>\n<blockquote>\n<p>java.lang.IllegalAccessError--&gt;superinterface check failed: class com.my.package.Application$$EnhancerBySpringCGLIB$$917dba7a (in module com.my.package) cannot access class org.springframework.context.annotation.ConfigurationClassEnhancer$EnhancedConfiguration (in unnamed module @0x1623b78d) because module com.my.package does not read unnamed module @0x1623b78d</p>\n</blockquote>\n<p>I've read things about using the -classpath JVM argument. But I am not quite certain which path to put there. And to be frank I am trying to find a solution that works without any arguments that need to be passed. So that the experience is similar to spring without (java)modules.</p>\n<p>It'd be great if someone could help me to understand what I am doing wrong here. I'm obviously new to java modules and trying to wrap my head around things.</p>\n<p>Thanks in advance!</p>\n<p>Cheers,\nDaniel</p>\n"},{"tags":["java","android","firebase-cloud-messaging"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1689860772,"post_id":76729671,"comment_id":135275456,"body_markdown":"It seems like `googleCredentials.getAccessToken()` returns `null`, so you might want to check the API documentation for that call to see when/why it does that. Or https://www.google.com/search?q=googleCredentials.getAccessToken%28%29+returns+null","body":"It seems like <code>googleCredentials.getAccessToken()</code> returns <code>null</code>, so you might want to check the API documentation for that call to see when/why it does that. Or <a href=\"https://www.google.com/search?q=googleCredentials.getAccessToken%28%29+returns+null\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":21156657,"reputation":1,"user_id":15555775,"display_name":"Kevin Jay Ga Cenadero"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697881496,"creation_date":1697881496,"answer_id":77335462,"question_id":76729671,"body_markdown":"    private static final String MESSAGING_SCOPE = &quot;https://www.googleapis.com/auth/firebase.messaging&quot;;\r\n    private static final String[] SCOPES = {MESSAGING_SCOPE};\r\n\r\n    private void copyToFileDir() {\r\n        try {\r\n            File file = new File(getFilesDir(), &quot;service-account.json&quot;);\r\n            if (!file.exists()) {\r\n                String readFile = readFromAssets(&quot;service-account.json&quot;);\r\n                OutputStream out = new FileOutputStream(file);\r\n                assert readFile != null;\r\n                out.write(readFile.getBytes());\r\n                out.flush();\r\n                out.close();\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private String getAccessToken() {\r\n        try {\r\n            File file = new File(getFilesDir(), &quot;service-account.json&quot;);\r\n            FileInputStream stream = new FileInputStream(file);\r\n            GoogleCredentials googleCredentials = GoogleCredentials.fromStream(stream)\r\n                    .createScoped(Arrays.asList(SCOPES));\r\n            googleCredentials.refresh();\r\n            return googleCredentials.getAccessToken().getTokenValue();\r\n        } catch (Exception e) {\r\n            return e.getMessage();\r\n        }\r\n    }\r\n    \r\n    @Nullable\r\n    private String readFromAssets(String filename) {\r\n        try {\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(getAssets().open(filename)));\r\n            StringBuilder sb = new StringBuilder();\r\n            String mLine = reader.readLine();\r\n            while (mLine != null) {\r\n                sb.append(mLine).append(&#39;\\n&#39;); // process line\r\n                mLine = reader.readLine();\r\n            }\r\n            reader.close();\r\n            return sb.toString();\r\n        } catch (IOException e) {\r\n            return e.getMessage();\r\n        }\r\n    }","title":"How can I get access token for Firebase Cloud Messaging API (V1) on Android?","body":"<pre><code>private static final String MESSAGING_SCOPE = &quot;https://www.googleapis.com/auth/firebase.messaging&quot;;\nprivate static final String[] SCOPES = {MESSAGING_SCOPE};\n\nprivate void copyToFileDir() {\n    try {\n        File file = new File(getFilesDir(), &quot;service-account.json&quot;);\n        if (!file.exists()) {\n            String readFile = readFromAssets(&quot;service-account.json&quot;);\n            OutputStream out = new FileOutputStream(file);\n            assert readFile != null;\n            out.write(readFile.getBytes());\n            out.flush();\n            out.close();\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\nprivate String getAccessToken() {\n    try {\n        File file = new File(getFilesDir(), &quot;service-account.json&quot;);\n        FileInputStream stream = new FileInputStream(file);\n        GoogleCredentials googleCredentials = GoogleCredentials.fromStream(stream)\n                .createScoped(Arrays.asList(SCOPES));\n        googleCredentials.refresh();\n        return googleCredentials.getAccessToken().getTokenValue();\n    } catch (Exception e) {\n        return e.getMessage();\n    }\n}\n\n@Nullable\nprivate String readFromAssets(String filename) {\n    try {\n        BufferedReader reader = new BufferedReader(new InputStreamReader(getAssets().open(filename)));\n        StringBuilder sb = new StringBuilder();\n        String mLine = reader.readLine();\n        while (mLine != null) {\n            sb.append(mLine).append('\\n'); // process line\n            mLine = reader.readLine();\n        }\n        reader.close();\n        return sb.toString();\n    } catch (IOException e) {\n        return e.getMessage();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7160986,"reputation":67,"user_id":5471767,"display_name":"James Hong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700026633,"creation_date":1700026633,"answer_id":77485481,"question_id":76729671,"body_markdown":"    private String getAccessToken() {\r\n        try {\r\n            File file = new File(getFilesDir(), &quot;service-account.json&quot;);\r\n            FileInputStream stream = new FileInputStream(file);\r\n            GoogleCredentials googleCredentials = GoogleCredentials.fromStream(stream)\r\n                .createScoped(Arrays.asList(SCOPES));\r\n            //googleCredentials.refresh();\r\n            return googleCredentials.refreshAccessToken().getTokenValue();\r\n        } catch (Exception e) {\r\n            return e.getMessage();\r\n        }\r\n    }\r\n\r\nPlease perform this immediately when you refresh getTokenValue.","title":"How can I get access token for Firebase Cloud Messaging API (V1) on Android?","body":"<pre><code>private String getAccessToken() {\n    try {\n        File file = new File(getFilesDir(), &quot;service-account.json&quot;);\n        FileInputStream stream = new FileInputStream(file);\n        GoogleCredentials googleCredentials = GoogleCredentials.fromStream(stream)\n            .createScoped(Arrays.asList(SCOPES));\n        //googleCredentials.refresh();\n        return googleCredentials.refreshAccessToken().getTokenValue();\n    } catch (Exception e) {\n        return e.getMessage();\n    }\n}\n</code></pre>\n<p>Please perform this immediately when you refresh getTokenValue.</p>\n"}],"owner":{"account_id":29056798,"reputation":1,"user_id":22258412,"display_name":"DSPL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700026633,"creation_date":1689854726,"question_id":76729671,"body_markdown":"How I want to get Access Token for Firebase Cloud Messaging API (V1). Although I have done all the necessary steps, I could not get an Access Token.\r\n\r\nI am using the following code structure but I am getting the following error;\r\n\r\n&gt; java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.String com.google.auth.oauth2.AccessToken.getTokenValue()&#39; on a null object reference \r\n\r\nservice_account file location: app\\src\\main\\assets\r\n\r\n```\r\n  private String getAccessToken() throws IOException {\r\n        String MESSAGING_SCOPE = &quot;https://www.googleapis.com/auth/firebase.messaging&quot;;\r\n        String[] SCOPES = { MESSAGING_SCOPE };\r\n        InputStream serviceAccountStream = getAssets().open(&quot;service_account.json&quot;);\r\n        GoogleCredentials googleCredentials = GoogleCredentials\r\n                .fromStream(serviceAccountStream)\r\n                .createScoped(Arrays.asList(SCOPES));\r\n        googleCredentials.refreshAccessToken();\r\n        return googleCredentials.getAccessToken().getTokenValue();\r\n    }\r\n\r\n\r\n    private void sendFCMNotificationToPostOwner(String user_is_pro, String user_fcm_token, String notificationTitle, String notificationBody) {\r\n        ExecutorService executor = Executors.newFixedThreadPool(1);\r\n        Future&lt;String&gt; futureToken = executor.submit(() -&gt; {\r\n            try {\r\n                return getAccessToken();\r\n            } catch (IOException e) {\r\n                Log.d(&quot;TAGFCM&quot;, &quot;eun_exdsds: &quot; + e.getMessage());\r\n                e.printStackTrace();\r\n                return &quot;null&quot;;\r\n            }\r\n        });\r\n\r\n        try {\r\n            Log.d(&quot;TAGFCM&quot;, &quot;eun_exdsds: &quot; + futureToken.get());\r\n            String bearerToken = futureToken.get();\r\n            final String FCM_API = &quot;https://fcm.googleapis.com/v1/projects/project-pro/messages:send&quot;;\r\n            AsyncTask.execute(() -&gt; {\r\n                try {\r\n                    OkHttpClient client = new OkHttpClient();\r\n                    String jsonBody = &quot;{\\&quot;message\\&quot;:{\\&quot;token\\&quot;:\\&quot;&quot; + user_fcm_token + &quot;\\&quot;, \\&quot;notification\\&quot;:{\\&quot;title\\&quot;:\\&quot;&quot; + notificationTitle + &quot;\\&quot;, \\&quot;body\\&quot;:\\&quot;&quot; + notificationBody + &quot;\\&quot;}}}&quot;;\r\n                    RequestBody body = RequestBody.create(MediaType.parse(&quot;application/json&quot;), jsonBody);\r\n                    okhttp3.Request request = new okhttp3.Request.Builder()\r\n                            .url(FCM_API)\r\n                            .post(body)\r\n                            .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken)\r\n                            .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                            .build();\r\n\r\n                    okhttp3.Response response = client.newCall(request).execute();\r\n                    Log.d(&quot;TAGFCM&quot;, &quot;response: &quot; + response.message());\r\n                } catch (IOException e) {\r\n                    Log.d(&quot;TAGFCM&quot;, &quot;exception&quot; +e.getMessage());\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n\r\n        } catch (InterruptedException | ExecutionException e) {\r\n            Log.d(&quot;TAGFCM&quot;, &quot;&quot; + e.getMessage()+&quot; &quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n        executor.shutdown();\r\n    }\r\n\r\n\r\n```","title":"How can I get access token for Firebase Cloud Messaging API (V1) on Android?","body":"<p>How I want to get Access Token for Firebase Cloud Messaging API (V1). Although I have done all the necessary steps, I could not get an Access Token.</p>\n<p>I am using the following code structure but I am getting the following error;</p>\n<blockquote>\n<p>java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String com.google.auth.oauth2.AccessToken.getTokenValue()' on a null object reference</p>\n</blockquote>\n<p>service_account file location: app\\src\\main\\assets</p>\n<pre><code>  private String getAccessToken() throws IOException {\n        String MESSAGING_SCOPE = &quot;https://www.googleapis.com/auth/firebase.messaging&quot;;\n        String[] SCOPES = { MESSAGING_SCOPE };\n        InputStream serviceAccountStream = getAssets().open(&quot;service_account.json&quot;);\n        GoogleCredentials googleCredentials = GoogleCredentials\n                .fromStream(serviceAccountStream)\n                .createScoped(Arrays.asList(SCOPES));\n        googleCredentials.refreshAccessToken();\n        return googleCredentials.getAccessToken().getTokenValue();\n    }\n\n\n    private void sendFCMNotificationToPostOwner(String user_is_pro, String user_fcm_token, String notificationTitle, String notificationBody) {\n        ExecutorService executor = Executors.newFixedThreadPool(1);\n        Future&lt;String&gt; futureToken = executor.submit(() -&gt; {\n            try {\n                return getAccessToken();\n            } catch (IOException e) {\n                Log.d(&quot;TAGFCM&quot;, &quot;eun_exdsds: &quot; + e.getMessage());\n                e.printStackTrace();\n                return &quot;null&quot;;\n            }\n        });\n\n        try {\n            Log.d(&quot;TAGFCM&quot;, &quot;eun_exdsds: &quot; + futureToken.get());\n            String bearerToken = futureToken.get();\n            final String FCM_API = &quot;https://fcm.googleapis.com/v1/projects/project-pro/messages:send&quot;;\n            AsyncTask.execute(() -&gt; {\n                try {\n                    OkHttpClient client = new OkHttpClient();\n                    String jsonBody = &quot;{\\&quot;message\\&quot;:{\\&quot;token\\&quot;:\\&quot;&quot; + user_fcm_token + &quot;\\&quot;, \\&quot;notification\\&quot;:{\\&quot;title\\&quot;:\\&quot;&quot; + notificationTitle + &quot;\\&quot;, \\&quot;body\\&quot;:\\&quot;&quot; + notificationBody + &quot;\\&quot;}}}&quot;;\n                    RequestBody body = RequestBody.create(MediaType.parse(&quot;application/json&quot;), jsonBody);\n                    okhttp3.Request request = new okhttp3.Request.Builder()\n                            .url(FCM_API)\n                            .post(body)\n                            .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken)\n                            .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                            .build();\n\n                    okhttp3.Response response = client.newCall(request).execute();\n                    Log.d(&quot;TAGFCM&quot;, &quot;response: &quot; + response.message());\n                } catch (IOException e) {\n                    Log.d(&quot;TAGFCM&quot;, &quot;exception&quot; +e.getMessage());\n                    e.printStackTrace();\n                }\n            });\n\n        } catch (InterruptedException | ExecutionException e) {\n            Log.d(&quot;TAGFCM&quot;, &quot;&quot; + e.getMessage()+&quot; &quot;);\n            e.printStackTrace();\n        }\n\n        executor.shutdown();\n    }\n\n\n</code></pre>\n"},{"tags":["java","android","xml","layout","zxing"],"answers":[{"comments":[{"owner":{"account_id":17097136,"reputation":97,"user_id":12371901,"display_name":"aagrios"},"score":0,"creation_date":1580457466,"post_id":59991880,"comment_id":106111071,"body_markdown":"Thanks for your response ! \nI checked the first link and I don&#39;t really understand what are they doing, and what&#39;s the goal of this tutorial. \nI&#39;ll take a look again","body":"Thanks for your response !  I checked the first link and I don&#39;t really understand what are they doing, and what&#39;s the goal of this tutorial.  I&#39;ll take a look again"},{"owner":{"account_id":14125331,"reputation":455,"user_id":10204803,"display_name":"Green Y."},"score":0,"creation_date":1580544314,"post_id":59991880,"comment_id":106139259,"body_markdown":"https://github.com/journeyapps/zxing-android-embedded/blob/master/sample/src/main/java/example/zxing/CustomScannerActivity.java\n\nThis is custom QR scanner sample activity.\n\nhttps://github.com/journeyapps/zxing-android-embedded/blob/master/sample/src/main/res/layout/custom_barcode_scanner.xml\n\nAnd this is layout file. You can add button here and define onClickListenner in the activity.\n\nIf you have any question, please comment here.","body":"<a href=\"https://github.com/journeyapps/zxing-android-embedded/blob/master/sample/src/main/java/example/zxing/CustomScannerActivity.java\" rel=\"nofollow noreferrer\">github.com/journeyapps/zxing-android-embedded/blob/master/&hellip;</a>  This is custom QR scanner sample activity.  <a href=\"https://github.com/journeyapps/zxing-android-embedded/blob/master/sample/src/main/res/layout/custom_barcode_scanner.xml\" rel=\"nofollow noreferrer\">github.com/journeyapps/zxing-android-embedded/blob/master/&hellip;</a>  And this is layout file. You can add button here and define onClickListenner in the activity.  If you have any question, please comment here."},{"owner":{"account_id":17097136,"reputation":97,"user_id":12371901,"display_name":"aagrios"},"score":0,"creation_date":1580637755,"post_id":59991880,"comment_id":106156568,"body_markdown":"Thanks for your help !\nSo I just need these two files ?","body":"Thanks for your help ! So I just need these two files ?"},{"owner":{"account_id":14125331,"reputation":455,"user_id":10204803,"display_name":"Green Y."},"score":0,"creation_date":1580701546,"post_id":59991880,"comment_id":106170300,"body_markdown":"Sorry about the poor description. Let me answer again.","body":"Sorry about the poor description. Let me answer again."},{"owner":{"account_id":17097136,"reputation":97,"user_id":12371901,"display_name":"aagrios"},"score":0,"creation_date":1580722840,"post_id":59991880,"comment_id":106177021,"body_markdown":"And how to update the layout etc. ? I mean, how can i get an access to those files after I imported library ? \nReally sorry :/\n\nEDIT : And I&#39;ve noticed that in CustomScanner there is no &quot;BarcodeCallback&quot; function\nI&#39;m really lost ahah\nThanks for your patience","body":"And how to update the layout etc. ? I mean, how can i get an access to those files after I imported library ?  Really sorry :/  EDIT : And I&#39;ve noticed that in CustomScanner there is no &quot;BarcodeCallback&quot; function I&#39;m really lost ahah Thanks for your patience"},{"owner":{"account_id":14125331,"reputation":455,"user_id":10204803,"display_name":"Green Y."},"score":0,"creation_date":1580730755,"post_id":59991880,"comment_id":106181102,"body_markdown":"@elgrusko, yes, I updated the answer, added sample layout.xml and BarcodeScanActivity code. If it&#39;s not clear, please let me know.","body":"@elgrusko, yes, I updated the answer, added sample layout.xml and BarcodeScanActivity code. If it&#39;s not clear, please let me know."},{"owner":{"account_id":17097136,"reputation":97,"user_id":12371901,"display_name":"aagrios"},"score":0,"creation_date":1580738002,"post_id":59991880,"comment_id":106184893,"body_markdown":"Okay, so flash is working, Qr code is scanned but I don&#39;t have the result who appears... It goes back to my main activity after scan, playing a little &#39;bip&#39;, but nothing appears","body":"Okay, so flash is working, Qr code is scanned but I don&#39;t have the result who appears... It goes back to my main activity after scan, playing a little &#39;bip&#39;, but nothing appears"},{"owner":{"account_id":17097136,"reputation":97,"user_id":12371901,"display_name":"aagrios"},"score":0,"creation_date":1580741832,"post_id":59991880,"comment_id":106187095,"body_markdown":"That&#39;s okay, everything is working ! Thank you so much :)","body":"That&#39;s okay, everything is working ! Thank you so much :)"},{"owner":{"account_id":12573273,"reputation":109,"user_id":9146636,"display_name":"arwTheDev"},"score":0,"creation_date":1652243821,"post_id":59991880,"comment_id":127556382,"body_markdown":"i get an error &#39;DefaultDecoderFactory() is not applicable&#39; error when running this code.  &quot;barcodeView.getBarcodeView().setDecoderFactory(new DefaultDecoderFactory(formats));\n                                                       ^\n    constructor DefaultDecoderFactory.DefaultDecoderFactory() is not applicable\n      (actual and formal argument lists differ in length)\n    constructor DefaultDecoderFactory.DefaultDecoderFactory(Collection&lt;BarcodeFormat&gt;,Map&lt;DecodeHintType,?&gt;,String) is not applicable\n      (actual and formal argument lists differ in length)&quot;","body":"i get an error &#39;DefaultDecoderFactory() is not applicable&#39; error when running this code.  &quot;barcodeView.getBarcodeView().setDecoderFactory(new DefaultDecoderFactory(formats));                                                        ^     constructor DefaultDecoderFactory.DefaultDecoderFactory() is not applicable       (actual and formal argument lists differ in length)     constructor DefaultDecoderFactory.DefaultDecoderFactory(Collection&lt;Barco&zwnj;&#8203;deFormat&gt;,Map&lt;Decode&zwnj;&#8203;HintType,?&gt;,String) is not applicable       (actual and formal argument lists differ in length)&quot;"},{"owner":{"account_id":14125331,"reputation":455,"user_id":10204803,"display_name":"Green Y."},"score":0,"creation_date":1652260747,"post_id":59991880,"comment_id":127561155,"body_markdown":"@arwTheDev, what version did you use? And your project is written with Java or Kotlin?","body":"@arwTheDev, what version did you use? And your project is written with Java or Kotlin?"},{"owner":{"account_id":12573273,"reputation":109,"user_id":9146636,"display_name":"arwTheDev"},"score":0,"creation_date":1652282670,"post_id":59991880,"comment_id":127570298,"body_markdown":"sorry just had to update the version sorry","body":"sorry just had to update the version sorry"}],"tags":[],"owner":{"account_id":14125331,"reputation":455,"user_id":10204803,"display_name":"Green Y."},"comment_count":11,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1700026323,"creation_date":1580407145,"answer_id":59991880,"question_id":59987064,"body_markdown":"This is good to customize QR/Barcode scanner with ZXing library\r\n\r\nhttps://github.com/journeyapps/zxing-android-embedded\r\n\r\nYou can see sample app project there and customize (add button, set flash on/off) in yourself.\r\n\r\nAlso there is another library, but it&#39;s not using ZXing.\r\n\r\nhttps://github.com/googlesamples/android-vision\r\n\r\nIt&#39;s deprecated, is now a part of ML Kit, but still is available to use.\r\n\r\n\r\n[Update]\r\n\r\nPlease import this library into your project. (You can see how can import it from below link.)\r\n\r\nhttps://github.com/journeyapps/zxing-android-embedded#adding-aar-dependency-with-gradle\r\n\r\nAfter imported, you can update the layout.xml of your barcode scanner&#39;s activity.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/topLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:keepScreenOn=&quot;true&quot;&gt;\r\n    \r\n        &lt;com.journeyapps.barcodescanner.DecoratedBarcodeView\r\n            android:id=&quot;@+id/barcode_scanner&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_gravity=&quot;center&quot; /&gt;\r\n        \r\n        &lt;Button\r\n            android:id=&quot;@+id/btn_flash&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;bottom|center&quot;\r\n            android:text=&quot;Flash&quot;/&gt;\r\n        \r\n    &lt;/FrameLayout&gt;\r\n\r\ncom.journeyapps.barcodescanner.DecoratedBarcodeView is BarcodeScanner view. And Button is just to turn on/off flash.\r\n\r\nThis is BarcodeScanner&#39;s Activity.\r\n\r\n    public class ScanQRActivity extends BaseActivity {\r\n    \r\n        private static final String TAG = &quot;ScanQRActivity&quot;;\r\n    \r\n        private DecoratedBarcodeView barcodeView;\r\n    \r\n        private boolean isFlashOn;\r\n    \r\n        /**\r\n         * Initializes the UI and creates the detector pipeline.\r\n         */\r\n        @Override\r\n        public void onCreate(Bundle bundle) {\r\n            super.onCreate(bundle);\r\n            setContentView(R.layout.activity_scan_qr);\r\n    \r\n            isFlashOn = false;\r\n    \r\n            barcodeView = findViewById(R.id.barcode_scanner);\r\n            Collection&lt;BarcodeFormat&gt; formats = Arrays.asList(BarcodeFormat.CODE_39); // Set barcode type\r\n            barcodeView.getBarcodeView().setDecoderFactory(new DefaultDecoderFactory(formats));\r\n            barcodeView.initializeFromIntent(getIntent());\r\n            barcodeView.decodeContinuous(callback);\r\n    \r\n            Button btnFlash = findViewById(R.id.btn_flash);\r\n            if (!hasFlash()) {\r\n                btnFlash.setVisibility(View.GONE);\r\n            }\r\n            btnFlash.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    switchFlashlight();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private BarcodeCallback callback = new BarcodeCallback() {\r\n            @Override\r\n            public void barcodeResult(BarcodeResult result) {\r\n                Log.e(TAG, result.getText()); // QR/Barcode result\r\n            }\r\n    \r\n            @Override\r\n            public void possibleResultPoints(List&lt;ResultPoint&gt; resultPoints) {\r\n            }\r\n        };\r\n    \r\n        /**\r\n         * Check if the device&#39;s camera has a Flashlight.\r\n         *\r\n         * @return true if there is Flashlight, otherwise false.\r\n         */\r\n        private boolean hasFlash() {\r\n            return getApplicationContext().getPackageManager()\r\n                    .hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH);\r\n        }\r\n    \r\n        public void switchFlashlight() {\r\n            if (isFlashOn) {\r\n                isFlashOn = false;\r\n                barcodeView.setTorchOff();\r\n            } else {\r\n                isFlashOn = true;\r\n                barcodeView.setTorchOn();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n            barcodeView.resume();\r\n        }\r\n    \r\n        @Override\r\n        protected void onPause() {\r\n            super.onPause();\r\n            barcodeView.pause();\r\n        }\r\n    }\r\n\r\nWhen QR/Barcode is scanned, you can get result from BarcodeCallback.barcodeResult function.","title":"Android XzingScanner : How to customise ZxingScanner layout ? (add button)","body":"<p>This is good to customize QR/Barcode scanner with ZXing library</p>\n<p><a href=\"https://github.com/journeyapps/zxing-android-embedded\" rel=\"nofollow noreferrer\">https://github.com/journeyapps/zxing-android-embedded</a></p>\n<p>You can see sample app project there and customize (add button, set flash on/off) in yourself.</p>\n<p>Also there is another library, but it's not using ZXing.</p>\n<p><a href=\"https://github.com/googlesamples/android-vision\" rel=\"nofollow noreferrer\">https://github.com/googlesamples/android-vision</a></p>\n<p>It's deprecated, is now a part of ML Kit, but still is available to use.</p>\n<p>[Update]</p>\n<p>Please import this library into your project. (You can see how can import it from below link.)</p>\n<p><a href=\"https://github.com/journeyapps/zxing-android-embedded#adding-aar-dependency-with-gradle\" rel=\"nofollow noreferrer\">https://github.com/journeyapps/zxing-android-embedded#adding-aar-dependency-with-gradle</a></p>\n<p>After imported, you can update the layout.xml of your barcode scanner's activity.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/topLayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:keepScreenOn=&quot;true&quot;&gt;\n\n    &lt;com.journeyapps.barcodescanner.DecoratedBarcodeView\n        android:id=&quot;@+id/barcode_scanner&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_gravity=&quot;center&quot; /&gt;\n    \n    &lt;Button\n        android:id=&quot;@+id/btn_flash&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;bottom|center&quot;\n        android:text=&quot;Flash&quot;/&gt;\n    \n&lt;/FrameLayout&gt;\n</code></pre>\n<p>com.journeyapps.barcodescanner.DecoratedBarcodeView is BarcodeScanner view. And Button is just to turn on/off flash.</p>\n<p>This is BarcodeScanner's Activity.</p>\n<pre><code>public class ScanQRActivity extends BaseActivity {\n\n    private static final String TAG = &quot;ScanQRActivity&quot;;\n\n    private DecoratedBarcodeView barcodeView;\n\n    private boolean isFlashOn;\n\n    /**\n     * Initializes the UI and creates the detector pipeline.\n     */\n    @Override\n    public void onCreate(Bundle bundle) {\n        super.onCreate(bundle);\n        setContentView(R.layout.activity_scan_qr);\n\n        isFlashOn = false;\n\n        barcodeView = findViewById(R.id.barcode_scanner);\n        Collection&lt;BarcodeFormat&gt; formats = Arrays.asList(BarcodeFormat.CODE_39); // Set barcode type\n        barcodeView.getBarcodeView().setDecoderFactory(new DefaultDecoderFactory(formats));\n        barcodeView.initializeFromIntent(getIntent());\n        barcodeView.decodeContinuous(callback);\n\n        Button btnFlash = findViewById(R.id.btn_flash);\n        if (!hasFlash()) {\n            btnFlash.setVisibility(View.GONE);\n        }\n        btnFlash.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                switchFlashlight();\n            }\n        });\n    }\n\n    private BarcodeCallback callback = new BarcodeCallback() {\n        @Override\n        public void barcodeResult(BarcodeResult result) {\n            Log.e(TAG, result.getText()); // QR/Barcode result\n        }\n\n        @Override\n        public void possibleResultPoints(List&lt;ResultPoint&gt; resultPoints) {\n        }\n    };\n\n    /**\n     * Check if the device's camera has a Flashlight.\n     *\n     * @return true if there is Flashlight, otherwise false.\n     */\n    private boolean hasFlash() {\n        return getApplicationContext().getPackageManager()\n                .hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH);\n    }\n\n    public void switchFlashlight() {\n        if (isFlashOn) {\n            isFlashOn = false;\n            barcodeView.setTorchOff();\n        } else {\n            isFlashOn = true;\n            barcodeView.setTorchOn();\n        }\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        barcodeView.resume();\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        barcodeView.pause();\n    }\n}\n</code></pre>\n<p>When QR/Barcode is scanned, you can get result from BarcodeCallback.barcodeResult function.</p>\n"}],"owner":{"account_id":17097136,"reputation":97,"user_id":12371901,"display_name":"aagrios"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6488,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":59991880,"answer_count":1,"score":3,"last_activity_date":1700026323,"creation_date":1580390586,"question_id":59987064,"body_markdown":"I&#39;m realising a barcode scanner using Zxing Scanner, everything is working for this part but now I would like to add one button on the layout (to toggle on/off flashlight). I checked everywhere on the internet but found nothing. \r\n\r\nSo, here is my questions : \r\n\r\n- Is it possible de ton find ou modify the .xml to add a button ? If yes, how to find this file ?\r\n\r\n- Is there a feature already implemented somewhere to add some elements in the layout?\r\n\r\nThis is how I&#39;m calling ZXingScannerView : \r\n\r\n    scannerView = new ZXingScannerView(this);\r\n    setContentView(scannerView);\r\n\r\n\r\n\r\n ","title":"Android XzingScanner : How to customise ZxingScanner layout ? (add button)","body":"<p>I'm realising a barcode scanner using Zxing Scanner, everything is working for this part but now I would like to add one button on the layout (to toggle on/off flashlight). I checked everywhere on the internet but found nothing. </p>\n\n<p>So, here is my questions : </p>\n\n<ul>\n<li><p>Is it possible de ton find ou modify the .xml to add a button ? If yes, how to find this file ?</p></li>\n<li><p>Is there a feature already implemented somewhere to add some elements in the layout?</p></li>\n</ul>\n\n<p>This is how I'm calling ZXingScannerView : </p>\n\n<pre><code>scannerView = new ZXingScannerView(this);\nsetContentView(scannerView);\n</code></pre>\n"},{"tags":["java","amazon-web-services","httpclient","amazon-sqs","spring-jms"],"owner":{"account_id":16325909,"reputation":34,"user_id":11790474,"display_name":"Piyush Maheshwari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700025498,"creation_date":1699604299,"question_id":77458533,"body_markdown":"We are using SQS in our Java Spring Boot Project. While publishing messages to SQS, most of the messages are processed in &lt;=300ms. However, some requests took more than 50 seconds. Upon initial investigation, we found that the SDK retries failed requests, taking 50 seconds to mark them as failures before initiating retries. In most cases, the message is reprocessed within &lt;=300ms after the initial retry (resulting in a total time of around 50,300ms).\r\n\r\nWe aim to minimize the request time to 10 seconds, ensuring that retries happen after a maximum of 10 seconds in case of failure. We&#39;ve already attempted some configurations.\r\n\r\nIf you need further help or specific details, feel free to ask!\r\n\r\n\r\n```\r\n    @Bean\r\n    public ClientConfiguration getClientConfig() {\r\n    \tClientConfiguration clientConfig = new ClientConfiguration();\r\n    \tclientConfig = clientConfig.withSocketTimeout(7000);\r\n    \tclientConfig = clientConfig.withRequestTimeout(9000);\r\n    \tclientConfig = clientConfig.withConnectionTimeout(11000);\r\n    \tclientConfig = clientConfig.withClientExecutionTimeout(13000);\r\n        return clientConfig;\r\n    }\r\n\r\n    @Bean\r\n    public AmazonSQS amazonSqs() {\r\n        String region = !StringUtils.isEmpty(sqsRegion) ? sqsRegion : AWSConfigConstants.AWS_SQS_REGION;\r\n        return AmazonSQSClientBuilder.standard()\r\n                .withRegion(region)\r\n                .withClientConfiguration(getClientConfig())\r\n                .withCredentials(InstanceProfileCredentialsProvider.createAsyncRefreshingProvider(true)).build();\r\n    }\r\n\r\n    \r\n\r\n   @Autowired\r\n   private AmazonSQS amazonSQS;\r\n   private String queueName=DEFAULT_QUEUE_NAME;\r\n\r\n   public void send(String message){\r\n      long startMillis1 = System.currentTimeMillis();\r\n      SendMessageResult result = amazonSQS.sendMessage(queueName,message);\r\n      long startMillis2 = System.currentTimeMillis();\r\n      long totalTimeTaken=(startMillis2-startMillis1);\r\n   }\r\n\r\n\r\n```\r\n\r\nSQS java sdk dependencies which I used\r\n\r\n```\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aws-java-sdk-sqs&lt;/artifactId&gt;\r\n            &lt;version&gt;1.12.262&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\n\r\n&gt; Java version = 17\r\n\r\n\r\nRef Link which I follow \r\n- https://aws.amazon.com/blogs/developer/tuning-the-aws-sdk-for-java-to-improve-resiliency/\r\n\r\nasked same on github also\r\n- https://github.com/aws/aws-sdk-java/issues/3054","title":"Customize Request Timeout while publish message to SQS using java sdk - Reducing SQS Message Processing Time: Minimizing Retries after 10 Seconds","body":"<p>We are using SQS in our Java Spring Boot Project. While publishing messages to SQS, most of the messages are processed in &lt;=300ms. However, some requests took more than 50 seconds. Upon initial investigation, we found that the SDK retries failed requests, taking 50 seconds to mark them as failures before initiating retries. In most cases, the message is reprocessed within &lt;=300ms after the initial retry (resulting in a total time of around 50,300ms).</p>\n<p>We aim to minimize the request time to 10 seconds, ensuring that retries happen after a maximum of 10 seconds in case of failure. We've already attempted some configurations.</p>\n<p>If you need further help or specific details, feel free to ask!</p>\n<pre><code>    @Bean\n    public ClientConfiguration getClientConfig() {\n        ClientConfiguration clientConfig = new ClientConfiguration();\n        clientConfig = clientConfig.withSocketTimeout(7000);\n        clientConfig = clientConfig.withRequestTimeout(9000);\n        clientConfig = clientConfig.withConnectionTimeout(11000);\n        clientConfig = clientConfig.withClientExecutionTimeout(13000);\n        return clientConfig;\n    }\n\n    @Bean\n    public AmazonSQS amazonSqs() {\n        String region = !StringUtils.isEmpty(sqsRegion) ? sqsRegion : AWSConfigConstants.AWS_SQS_REGION;\n        return AmazonSQSClientBuilder.standard()\n                .withRegion(region)\n                .withClientConfiguration(getClientConfig())\n                .withCredentials(InstanceProfileCredentialsProvider.createAsyncRefreshingProvider(true)).build();\n    }\n\n    \n\n   @Autowired\n   private AmazonSQS amazonSQS;\n   private String queueName=DEFAULT_QUEUE_NAME;\n\n   public void send(String message){\n      long startMillis1 = System.currentTimeMillis();\n      SendMessageResult result = amazonSQS.sendMessage(queueName,message);\n      long startMillis2 = System.currentTimeMillis();\n      long totalTimeTaken=(startMillis2-startMillis1);\n   }\n\n\n</code></pre>\n<p>SQS java sdk dependencies which I used</p>\n<pre><code>       &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-java-sdk-sqs&lt;/artifactId&gt;\n            &lt;version&gt;1.12.262&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<blockquote>\n<p>Java version = 17</p>\n</blockquote>\n<p>Ref Link which I follow</p>\n<ul>\n<li><a href=\"https://aws.amazon.com/blogs/developer/tuning-the-aws-sdk-for-java-to-improve-resiliency/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/developer/tuning-the-aws-sdk-for-java-to-improve-resiliency/</a></li>\n</ul>\n<p>asked same on github also</p>\n<ul>\n<li><a href=\"https://github.com/aws/aws-sdk-java/issues/3054\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-java/issues/3054</a></li>\n</ul>\n"},{"tags":["java","debugging","jpda"],"answers":[{"tags":[],"owner":{"account_id":1347458,"reputation":26,"user_id":1287920,"display_name":"viswath"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700025436,"creation_date":1700025436,"answer_id":77485418,"question_id":40652025,"body_markdown":"dt stands for debugging transport. It is a prefix used for various debugging transport libraries in JPDA.","title":"What does dt in dt_socket stand for?","body":"<p>dt stands for debugging transport. It is a prefix used for various debugging transport libraries in JPDA.</p>\n"}],"owner":{"account_id":406441,"reputation":32619,"user_id":775954,"accept_rate":85,"display_name":"Matthias Braun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77485418,"answer_count":1,"score":3,"last_activity_date":1700025436,"creation_date":1479377412,"question_id":40652025,"body_markdown":"In the context of the [Java Platform Debugger Architecture][1], what does the `dt_` prefix in, for example, `dt_socket` or `dt_shmem` stand for?\r\n\r\nDebugger transport?\r\nData transfer?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/technotes/guides/jpda/conninv.html","title":"What does dt in dt_socket stand for?","body":"<p>In the context of the <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jpda/conninv.html\" rel=\"nofollow noreferrer\">Java Platform Debugger Architecture</a>, what does the <code>dt_</code> prefix in, for example, <code>dt_socket</code> or <code>dt_shmem</code> stand for?</p>\n\n<p>Debugger transport?\nData transfer?</p>\n"},{"tags":["java","service","ballerina"],"answers":[{"tags":[],"owner":{"account_id":13704827,"reputation":59,"user_id":9888793,"display_name":"Arshika Mohottige"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700023510,"creation_date":1700023510,"answer_id":77485318,"question_id":77484564,"body_markdown":"You can modify the code to pass the `ConnectionConfiguration` record to the listener initialisation with the values `maxReconnect` and `reconnectWait` as given below. \r\n\r\n    import ballerina/log;\r\n    import ballerinax/nats;\r\n    \r\n    public type Order record {\r\n        int orderId;\r\n        string productName;\r\n        decimal price;\r\n        boolean isValid;\r\n    };\r\n    \r\n    final nats:ConnectionConfiguration &amp; readonly config = {\r\n        retryConfig: {maxReconnect: -1, reconnectWait: 5}\r\n    };\r\n    \r\n    service &quot;orders.valid&quot; on new nats:Listener(nats:DEFAULT_URL, config) {\r\n    \r\n        remote function onMessage(Order &#39;order) returns error? {\r\n            if &#39;order.isValid {\r\n                log:printInfo(string `Received valid order for ${&#39;order.productName}`);\r\n            }\r\n        }\r\n    }\r\n\r\nOR\r\n\r\n    import ballerina/log;\r\n    import ballerinax/nats;\r\n    \r\n    public type Order record {\r\n        int orderId;\r\n        string productName;\r\n        decimal price;\r\n        boolean isValid;\r\n    };\r\n    \r\n    service &quot;orders.valid&quot; on new nats:Listener(nats:DEFAULT_URL, {retryConfig: {maxReconnect: -1, reconnectWait: 5}}) {\r\n    \r\n        remote function onMessage(Order &#39;order) returns error? {\r\n            if &#39;order.isValid {\r\n                log:printInfo(string `Received valid order for ${&#39;order.productName}`);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"How can I make nats:Listener use a custom ConnectionConfiguration object in Ballerina?","body":"<p>You can modify the code to pass the <code>ConnectionConfiguration</code> record to the listener initialisation with the values <code>maxReconnect</code> and <code>reconnectWait</code> as given below.</p>\n<pre><code>import ballerina/log;\nimport ballerinax/nats;\n\npublic type Order record {\n    int orderId;\n    string productName;\n    decimal price;\n    boolean isValid;\n};\n\nfinal nats:ConnectionConfiguration &amp; readonly config = {\n    retryConfig: {maxReconnect: -1, reconnectWait: 5}\n};\n\nservice &quot;orders.valid&quot; on new nats:Listener(nats:DEFAULT_URL, config) {\n\n    remote function onMessage(Order 'order) returns error? {\n        if 'order.isValid {\n            log:printInfo(string `Received valid order for ${'order.productName}`);\n        }\n    }\n}\n</code></pre>\n<p>OR</p>\n<pre><code>import ballerina/log;\nimport ballerinax/nats;\n\npublic type Order record {\n    int orderId;\n    string productName;\n    decimal price;\n    boolean isValid;\n};\n\nservice &quot;orders.valid&quot; on new nats:Listener(nats:DEFAULT_URL, {retryConfig: {maxReconnect: -1, reconnectWait: 5}}) {\n\n    remote function onMessage(Order 'order) returns error? {\n        if 'order.isValid {\n            log:printInfo(string `Received valid order for ${'order.productName}`);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29904632,"reputation":3,"user_id":22917469,"display_name":"Javier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77485318,"answer_count":1,"score":0,"last_activity_date":1700023510,"creation_date":1700007901,"question_id":77484564,"body_markdown":"I am using the code provided on the official project page at https://ballerina.io/learn/by-example/nats-basic-sub/.\r\n\r\nThe code looks like this:\r\n\r\n\r\n```\r\n    import ballerina/log;\r\n    import ballerinax/nats;\r\n\r\n    public type Order record {\r\n        int orderId;\r\n        string productName;\r\n        decimal price;\r\n        boolean isValid;\r\n    };\r\n\r\n    // Binds the consumer to listen to the messages published to the &#39;orders.valid&#39; subject.\r\n    service &quot;orders.valid&quot; on new nats:Listener(nats:DEFAULT_URL) {\r\n\r\n        remote function onMessage(Order &#39;order) returns error? {\r\n            if &#39;order.isValid {\r\n                log:printInfo(string `Received valid order for ${&#39;order.productName}`);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nI need to annotate or pass a ConnectionConfiguration object to the service&#39;s listener so that I can modify the nats:RetryConfig object. My goal is to make the service keep trying to connect to the NATS server every 5 seconds without interruption if the NATS server becomes unavailable until the NATS server becomes available again. I think this can be achieved by setting maxReconnect to -1 and reconnectWait to 5.\r\n\r\nI looked for some helpers and/or callbacks in the service code but I think it is not the right approach.\r\n\r\nHow can I do this? Can it be done with any annotations on the service?\r\n\r\nThanks!","title":"How can I make nats:Listener use a custom ConnectionConfiguration object in Ballerina?","body":"<p>I am using the code provided on the official project page at <a href=\"https://ballerina.io/learn/by-example/nats-basic-sub/\" rel=\"nofollow noreferrer\">https://ballerina.io/learn/by-example/nats-basic-sub/</a>.</p>\n<p>The code looks like this:</p>\n<pre><code>    import ballerina/log;\n    import ballerinax/nats;\n\n    public type Order record {\n        int orderId;\n        string productName;\n        decimal price;\n        boolean isValid;\n    };\n\n    // Binds the consumer to listen to the messages published to the 'orders.valid' subject.\n    service &quot;orders.valid&quot; on new nats:Listener(nats:DEFAULT_URL) {\n\n        remote function onMessage(Order 'order) returns error? {\n            if 'order.isValid {\n                log:printInfo(string `Received valid order for ${'order.productName}`);\n            }\n        }\n    }\n</code></pre>\n<p>I need to annotate or pass a ConnectionConfiguration object to the service's listener so that I can modify the nats:RetryConfig object. My goal is to make the service keep trying to connect to the NATS server every 5 seconds without interruption if the NATS server becomes unavailable until the NATS server becomes available again. I think this can be achieved by setting maxReconnect to -1 and reconnectWait to 5.</p>\n<p>I looked for some helpers and/or callbacks in the service code but I think it is not the right approach.</p>\n<p>How can I do this? Can it be done with any annotations on the service?</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-boot","spring-test"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700031374,"post_id":77485276,"comment_id":136603613,"body_markdown":"Why should it? First the transactional unit is your test method, it will not commit in between method calls. Second an transactional test method is rolledback after the test method.","body":"Why should it? First the transactional unit is your test method, it will not commit in between method calls. Second an transactional test method is rolledback after the test method."},{"owner":{"account_id":17206530,"reputation":106,"user_id":12456968,"display_name":"Steven Kristian"},"score":0,"creation_date":1700032047,"post_id":77485276,"comment_id":136603689,"body_markdown":"As what I understand, the @Transactional method is supposed to BEGIN TRANSACTION in the start of a given method and then decides to either ROLLBACK / COMMIT TRANSACTION based on the exception. So I don&#39;t see how it won&#39;t commit between method calls, is there something I&#39;m missing?","body":"As what I understand, the @Transactional method is supposed to BEGIN TRANSACTION in the start of a given method and then decides to either ROLLBACK / COMMIT TRANSACTION based on the exception. So I don&#39;t see how it won&#39;t commit between method calls, is there something I&#39;m missing?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1700032304,"post_id":77485276,"comment_id":136603716,"body_markdown":"Transaction starts before the `test` method and ends (commits) after the test method. But tests always (by default) rollback. There is no commit in between, as that would mean multiple transactions, you cannot rollback a commit.","body":"Transaction starts before the <code>test</code> method and ends (commits) after the test method. But tests always (by default) rollback. There is no commit in between, as that would mean multiple transactions, you cannot rollback a commit."},{"owner":{"account_id":17206530,"reputation":106,"user_id":12456968,"display_name":"Steven Kristian"},"score":0,"creation_date":1700032740,"post_id":77485276,"comment_id":136603782,"body_markdown":"Does my test classify as multiple transactions? If I call a method with 1 save() and 1 findAll() method, does it count as 2 transactions or 1?","body":"Does my test classify as multiple transactions? If I call a method with 1 save() and 1 findAll() method, does it count as 2 transactions or 1?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700034144,"post_id":77485276,"comment_id":136603938,"body_markdown":"1 as the test method is the transactional unit, which will be rolledback by default at the end (as you see in your logs as well).","body":"1 as the test method is the transactional unit, which will be rolledback by default at the end (as you see in your logs as well)."}],"owner":{"account_id":17206530,"reputation":106,"user_id":12456968,"display_name":"Steven Kristian"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700022953,"creation_date":1700022577,"question_id":77485276,"body_markdown":"I&#39;m trying to create a simple integration test where I&#39;d like to find a specific data using @RestController\r\n\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\r\n@AutoConfigureWebTestClient\r\n@Transactional\r\npublic class TestControllerITCase {\r\n\r\n  @Autowired\r\n  private TestRepository repository;\r\n  \r\n  @Test\r\n  public void getConstants_Valid_Success()  {\r\n    this.repository.save(test);\r\n\r\n     this.webTestClient.get()\r\n        .uri(b -&gt; b.path(&quot;/api/test&quot;)\r\n            .build())\r\n        .header(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\r\n        .exchange()\r\n        .expectStatus()\r\n        .isOk()\r\n        .expectBody();\r\n  }\r\n}\r\n```\r\n\r\nThe log shows that the Transaction began. It also shows the query that I&#39;m trying to use SELECT (as is done by my endpoint), however it does not show any sign of any insert when I try to run .save(). \r\nHere is the log:\r\n\r\n```\r\n2023-11-15 11:26:03 [main] INFO  o.s.t.c.transaction.TransactionContext   : Began transaction (1) for test context [DefaultTestContext@3a1e803 testClass = ConfigurationControllerITCase, testInstance = com.gdn.rebate.management.system.controller.ConfigurationControllerITCase@7279d0f8, testMethod = getConstants_Valid_Success@ConfigurationControllerITCase, testException = [null], mergedContextConfiguration = [ReactiveWebMergedContextConfiguration@bb6bf68 testClass = ConfigurationControllerITCase, locations = &#39;{}&#39;, classes = &#39;{class com.gdn.rebate.management.system.Application}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}&#39;, contextCustomizers = set[[ImportsContextCustomizer@58a5b377 key = [org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@119020fb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@25e2ab5a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@35390ee3, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@13e547a9, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@aafcffa, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2e9fda69, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@13c9d689], contextLoader = &#39;org.springframework.boot.test.context.SpringBootContextLoader&#39;, parent = [null]], attributes = map[&#39;org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents&#39; -&gt; false]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44a3b4d9]; rollback [true]\r\n2023-11-15 11:27:27 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m38s779ms994&#181;s100ns).\r\nHibernate: select configurat0_.id as id1_4_, configurat0_.created_by as created_2_4_, configurat0_.created_date as created_3_4_, configurat0_.mark_for_delete as mark_for4_4_, configurat0_.store_id as store_id5_4_, configurat0_.updated_by as updated_6_4_, configurat0_.updated_date as updated_7_4_, configurat0_.optlock as optlock8_4_, configurat0_.category as category9_4_, configurat0_.description as descrip10_4_, configurat0_.key as key11_4_, configurat0_.type as type12_4_, configurat0_.value as value13_4_ from rms_configuration configurat0_ where configurat0_.category=? and configurat0_.mark_for_delete=false\r\n2023-11-15 11:35:19 [main] INFO  o.s.t.c.transaction.TransactionContext   : Rolled back transaction for test: [DefaultTestContext@67c907b0 testClass = ConfigurationControllerITCase, testInstance = com.gdn.rebate.management.system.controller.ConfigurationControllerITCase@cd19d0a, testMethod = getConstants_Valid_Success@ConfigurationControllerITCase, testException = java.lang.AssertionError: value\r\n```","title":"Unable to Save in @SpringBootTest when using Transactional","body":"<p>I'm trying to create a simple integration test where I'd like to find a specific data using @RestController</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\n@AutoConfigureWebTestClient\n@Transactional\npublic class TestControllerITCase {\n\n  @Autowired\n  private TestRepository repository;\n  \n  @Test\n  public void getConstants_Valid_Success()  {\n    this.repository.save(test);\n\n     this.webTestClient.get()\n        .uri(b -&gt; b.path(&quot;/api/test&quot;)\n            .build())\n        .header(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n        .exchange()\n        .expectStatus()\n        .isOk()\n        .expectBody();\n  }\n}\n</code></pre>\n<p>The log shows that the Transaction began. It also shows the query that I'm trying to use SELECT (as is done by my endpoint), however it does not show any sign of any insert when I try to run .save().\nHere is the log:</p>\n<pre><code>2023-11-15 11:26:03 [main] INFO  o.s.t.c.transaction.TransactionContext   : Began transaction (1) for test context [DefaultTestContext@3a1e803 testClass = ConfigurationControllerITCase, testInstance = com.gdn.rebate.management.system.controller.ConfigurationControllerITCase@7279d0f8, testMethod = getConstants_Valid_Success@ConfigurationControllerITCase, testException = [null], mergedContextConfiguration = [ReactiveWebMergedContextConfiguration@bb6bf68 testClass = ConfigurationControllerITCase, locations = '{}', classes = '{class com.gdn.rebate.management.system.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[[ImportsContextCustomizer@58a5b377 key = [org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@119020fb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@25e2ab5a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@35390ee3, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@13e547a9, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@aafcffa, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@ec54a5c9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2e9fda69, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@13c9d689], contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -&gt; false]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@44a3b4d9]; rollback [true]\n2023-11-15 11:27:27 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m38s779ms994Âµs100ns).\nHibernate: select configurat0_.id as id1_4_, configurat0_.created_by as created_2_4_, configurat0_.created_date as created_3_4_, configurat0_.mark_for_delete as mark_for4_4_, configurat0_.store_id as store_id5_4_, configurat0_.updated_by as updated_6_4_, configurat0_.updated_date as updated_7_4_, configurat0_.optlock as optlock8_4_, configurat0_.category as category9_4_, configurat0_.description as descrip10_4_, configurat0_.key as key11_4_, configurat0_.type as type12_4_, configurat0_.value as value13_4_ from rms_configuration configurat0_ where configurat0_.category=? and configurat0_.mark_for_delete=false\n2023-11-15 11:35:19 [main] INFO  o.s.t.c.transaction.TransactionContext   : Rolled back transaction for test: [DefaultTestContext@67c907b0 testClass = ConfigurationControllerITCase, testInstance = com.gdn.rebate.management.system.controller.ConfigurationControllerITCase@cd19d0a, testMethod = getConstants_Valid_Success@ConfigurationControllerITCase, testException = java.lang.AssertionError: value\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":1,"creation_date":1423088439,"post_id":28332484,"comment_id":45012243,"body_markdown":"I am not sure what you are asking, but you can use `b = new Date(a.getTime())` or `b = (Date) a.clone();` to clone a date object. BTW: your sample code does not actually contain the word &quot;Date&quot;.","body":"I am not sure what you are asking, but you can use <code>b = new Date(a.getTime())</code> or <code>b = (Date) a.clone();</code> to clone a date object. BTW: your sample code does not actually contain the word &quot;Date&quot;."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1700024636,"post_id":28332484,"comment_id":136603006,"body_markdown":"Why? What the problem with references? Why do you think you need new objects?","body":"Why? What the problem with references? Why do you think you need new objects?"}],"answers":[{"comments":[{"owner":{"account_id":273201,"reputation":6889,"user_id":564653,"accept_rate":77,"display_name":"Ted pottel"},"score":0,"creation_date":1423421184,"post_id":28332590,"comment_id":45131551,"body_markdown":"Hi,Thank you for the answwer could you explain what immutable means?","body":"Hi,Thank you for the answwer could you explain what immutable means?"},{"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"score":0,"creation_date":1423421760,"post_id":28332590,"comment_id":45131764,"body_markdown":"Immutable means &quot;cannot be changed&quot; ie the date is fixed, this means you can safely pass objects around without worrying about client code changing the value, and also removes the need to clone objects.","body":"Immutable means &quot;cannot be changed&quot; ie the date is fixed, this means you can safely pass objects around without worrying about client code changing the value, and also removes the need to clone objects."}],"tags":[],"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"comment_count":2,"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1518123625,"creation_date":1423088317,"answer_id":28332590,"question_id":28332484,"body_markdown":"You could use getTime() and passing it into the Date(time) constructor. This is only required because Date is mutable. \r\n\r\n\tDate original = new Date();\r\n\tDate copy = new Date(original.getTime());\r\n\r\nIf you&#39;re using Java 8 try using the new [java.time API][1] which uses [*immutable objects*][2]. So no need to copy/clone.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/datetime/overview/\r\n  [2]: https://en.wikipedia.org/wiki/Immutable_object","title":"Is there a way to copy Date object into another date Object without using a reference?","body":"<p>You could use getTime() and passing it into the Date(time) constructor. This is only required because Date is mutable. </p>\n\n<pre><code>Date original = new Date();\nDate copy = new Date(original.getTime());\n</code></pre>\n\n<p>If you're using Java 8 try using the new <a href=\"http://docs.oracle.com/javase/tutorial/datetime/overview/\" rel=\"noreferrer\">java.time API</a> which uses <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" rel=\"noreferrer\"><em>immutable objects</em></a>. So no need to copy/clone.</p>\n"},{"comments":[{"owner":{"account_id":24269,"reputation":63231,"user_id":61624,"accept_rate":60,"display_name":"Daniel Kaplan"},"score":1,"creation_date":1423089433,"post_id":28332603,"comment_id":45012669,"body_markdown":"Doesn&#39;t Java 8 come with its own version of this JodaTime class so you no longer need to use joda?","body":"Doesn&#39;t Java 8 come with its own version of this JodaTime class so you no longer need to use joda?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1423122676,"post_id":28332603,"comment_id":45022767,"body_markdown":"@DanielKaplan No, Joda-Time is alive and well. While Joda-Time did indeed inspire the new java.time package built into Java 8, **java.time was re-architected**. So java.time is not a drop-in replacement for Joda-Time. Both Joda-Time and java.time have strengths and features the other lacks. Both are ongoing active projects. They are not mutually exclusive; you can use both in a project (just be careful with imports as a few class names are coincidentally the same). The [threaten-extra project](http://www.threeten.org/threeten-extra/) extends java.time to add more features.","body":"@DanielKaplan No, Joda-Time is alive and well. While Joda-Time did indeed inspire the new java.time package built into Java 8, <b>java.time was re-architected</b>. So java.time is not a drop-in replacement for Joda-Time. Both Joda-Time and java.time have strengths and features the other lacks. Both are ongoing active projects. They are not mutually exclusive; you can use both in a project (just be careful with imports as a few class names are coincidentally the same). The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\">threaten-extra project</a> extends java.time to add more features."}],"tags":[],"owner":{"account_id":3064465,"reputation":678,"user_id":2596497,"display_name":"Alexis Murray"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1423088353,"creation_date":1423088353,"answer_id":28332603,"question_id":28332484,"body_markdown":"If possible, try switching to using Joda Time instead of the built in Date type.\r\n\r\nhttp://www.joda.org/joda-time/\r\n\r\nDateTime from Joda has a copy constructor, and is generally nicer to work with since DateTime is not mutable.\r\n\r\nOtherwise you could try:\r\n\r\n    Date newDate = new Date(oldDate.getTime());","title":"Is there a way to copy Date object into another date Object without using a reference?","body":"<p>If possible, try switching to using Joda Time instead of the built in Date type.</p>\n\n<p><a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow\">http://www.joda.org/joda-time/</a></p>\n\n<p>DateTime from Joda has a copy constructor, and is generally nicer to work with since DateTime is not mutable.</p>\n\n<p>Otherwise you could try:</p>\n\n<pre><code>Date newDate = new Date(oldDate.getTime());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1789955,"reputation":11725,"user_id":1630604,"accept_rate":76,"display_name":"Nicolas Henneaux"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1505403593,"creation_date":1504620376,"answer_id":46057025,"question_id":28332484,"body_markdown":"With **Java 8** you can use the following nullsafe code.\r\n\r\n    Optional.ofNullable(oldDate)\n                   .map(Date::getTime)\n                   .map(Date::new)\n                   .orElse(null)\r\n\r\n ","title":"Is there a way to copy Date object into another date Object without using a reference?","body":"<p>With <strong>Java 8</strong> you can use the following nullsafe code.</p>\n\n<pre><code>Optional.ofNullable(oldDate)\n               .map(Date::getTime)\n               .map(Date::new)\n               .orElse(null)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4055892,"reputation":3982,"user_id":3333933,"accept_rate":71,"display_name":"Pasindu Jay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700022812,"creation_date":1677876016,"answer_id":75631685,"question_id":28332484,"body_markdown":"`Date d = (Date) oldDate.clone()` \r\n\r\nget the reference of the object and cast it to date works too. ","title":"Is there a way to copy Date object into another date Object without using a reference?","body":"<p><code>Date d = (Date) oldDate.clone()</code></p>\n<p>get the reference of the object and cast it to date works too.</p>\n"}],"owner":{"account_id":273201,"reputation":6889,"user_id":564653,"accept_rate":77,"display_name":"Ted pottel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35590,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":28332590,"answer_count":4,"score":20,"last_activity_date":1700022812,"creation_date":1423087923,"question_id":28332484,"body_markdown":"I got a program that loads in raw data for charting and stores it in a class called `cRawGraph`..  It then formats this data and stores it in another class called `cFormatGraph`.  Is there a way to copy some of the date objects stored in `cRwGraph` to date objects stored in `cFormattedGraph` without using a reference? I looked at Oracle&#39;s documentation and did not see a constructor that would take in a date object or any methods data would accomplish this.\r\n\r\ncode snippet:\r\n\r\n\tdo{\r\n\t\t\td=rawData.mDate[i].getDay();\r\n\t\t\tda=rawData.mDate[i];\r\n\t\t\tdatept=i;\r\n\t\t\tdo{\r\n\t\t\t  vol+=rawData.mVol[i];\r\n\t\t\t  pt+=rawData.mPt[i];\r\n\t\t\t  c++;\r\n\t\t\t  i++;\r\n\t\t\t  if (i&gt;=rawData.getSize())\r\n\t\t\t\t  break;\r\n\t\t\t  } while(d==rawData.mDate[i].getDay());\r\n\t\t\r\n\t\t\t// this IS NOT WORKING BECOUSE IT IS A REFRENCE AND RawData gets loaded with new dates,\r\n\t\t\t// Thus chnaging the value in mDate\r\n\t\t\tmDate[ii]=da;\r\n\r\n\t\t  mVol[ii]=vol;\r\n\t\t  mPt[ii]=pt/c;\r\n\t\t  if (first)\r\n\t\t  {\r\n\t\t\t  smallest=biggest=pt/c;\r\n\t\t\t  first=false;\r\n\t\t  }\r\n\t\t  else\r\n\t\t  {\r\n\t\t\t  double temp=pt/c;\r\n\t\t\t  if (temp&lt;smallest)\r\n\t\t\t\t  smallest=temp;\r\n\t\t\t  if (temp&gt;biggest)\r\n\t\t\t\t  biggest=temp;\r\n\t\t\t  \r\n\t\t  }\r\n\t\t  ii++;\r\n\t\t} while(i&lt;rawData.getSize());  ","title":"Is there a way to copy Date object into another date Object without using a reference?","body":"<p>I got a program that loads in raw data for charting and stores it in a class called <code>cRawGraph</code>..  It then formats this data and stores it in another class called <code>cFormatGraph</code>.  Is there a way to copy some of the date objects stored in <code>cRwGraph</code> to date objects stored in <code>cFormattedGraph</code> without using a reference? I looked at Oracle's documentation and did not see a constructor that would take in a date object or any methods data would accomplish this.</p>\n\n<p>code snippet:</p>\n\n<pre><code>do{\n        d=rawData.mDate[i].getDay();\n        da=rawData.mDate[i];\n        datept=i;\n        do{\n          vol+=rawData.mVol[i];\n          pt+=rawData.mPt[i];\n          c++;\n          i++;\n          if (i&gt;=rawData.getSize())\n              break;\n          } while(d==rawData.mDate[i].getDay());\n\n        // this IS NOT WORKING BECOUSE IT IS A REFRENCE AND RawData gets loaded with new dates,\n        // Thus chnaging the value in mDate\n        mDate[ii]=da;\n\n      mVol[ii]=vol;\n      mPt[ii]=pt/c;\n      if (first)\n      {\n          smallest=biggest=pt/c;\n          first=false;\n      }\n      else\n      {\n          double temp=pt/c;\n          if (temp&lt;smallest)\n              smallest=temp;\n          if (temp&gt;biggest)\n              biggest=temp;\n\n      }\n      ii++;\n    } while(i&lt;rawData.getSize());  \n</code></pre>\n"},{"tags":["java","spring-boot","ssl-certificate","trust"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1700023982,"post_id":77475658,"comment_id":136602951,"body_markdown":"You receive what error?","body":"You receive what error?"}],"answers":[{"comments":[{"owner":{"account_id":15422250,"reputation":9,"user_id":11125988,"display_name":"guido pastore"},"score":0,"creation_date":1699952953,"post_id":77478179,"comment_id":136592159,"body_markdown":"I want to trust all certificates when I use a feignClient. How can i do?","body":"I want to trust all certificates when I use a feignClient. How can i do?"},{"owner":{"account_id":25667539,"reputation":1,"user_id":19432251,"display_name":"Aloysius Tri Sulistyo Putranto"},"score":0,"creation_date":1700023752,"post_id":77478179,"comment_id":136602932,"body_markdown":"let me try first, if i got it, i&#39;ll share\nbut i assume if using okHttp it not difference at all","body":"let me try first, if i got it, i&#39;ll share but i assume if using okHttp it not difference at all"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1700024061,"post_id":77478179,"comment_id":136602957,"body_markdown":"`getAcceptedIssuers()` may not return null.","body":"<code>getAcceptedIssuers()</code> may not return null."}],"tags":[],"owner":{"account_id":25667539,"reputation":1,"user_id":19432251,"display_name":"Aloysius Tri Sulistyo Putranto"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700022535,"creation_date":1699935617,"answer_id":77478179,"question_id":77475658,"body_markdown":"This Code Running Well in my Project\r\n\r\n        \r\n        public void getAllCertificatePermit() throws NoSuchAlgorithmException, KeyManagementException {\r\n            TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\r\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() { return null; }\r\n                public void checkClientTrusted(X509Certificate[] certs, String authType) { }\r\n                public void checkServerTrusted(X509Certificate[] certs, String authType) { }\r\n            } };\r\n    \r\n            SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n            HostnameVerifier allHostsValid = new HostnameVerifier() {\r\n                public boolean verify(String hostname, SSLSession session) { return true; }\r\n            };\r\n            HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\r\n        }\r\n    \r\n\r\nAnd Call it\r\n\r\n    public ResponseEntity&lt;String&gt; hitApi(String url, String bodyJson) {\r\n    try {\r\n        // for HTTPS\r\n        getAllCertificatePermit();\r\n        var restTemplate = new RestTemplate();\r\n\r\n        var header = new HttpHeaders();\r\n        header.setContentType(MediaType.APPLICATION_JSON);\r\n        header.setBasicAuth(&quot;Set Token&quot;);\r\n        header.set(&quot;apiKey&quot;, &quot;Set Api Key&quot;);\r\n        HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;(bodyJson, header);\r\n\r\n        return restTemplate.exchange(url, HttpMethod.POST, request, String.class);\r\n    }catch (Exception e){\r\n        log.error(Arrays.toString(e.getStackTrace())));\r\n        return null;\r\n        }\r\n      }\r\n\r\n","title":"How to to trust all certificates in a spring boot project","body":"<p>This Code Running Well in my Project</p>\n<pre><code>    public void getAllCertificatePermit() throws NoSuchAlgorithmException, KeyManagementException {\n        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {\n            public java.security.cert.X509Certificate[] getAcceptedIssuers() { return null; }\n            public void checkClientTrusted(X509Certificate[] certs, String authType) { }\n            public void checkServerTrusted(X509Certificate[] certs, String authType) { }\n        } };\n\n        SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\n        sc.init(null, trustAllCerts, new java.security.SecureRandom());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n        HostnameVerifier allHostsValid = new HostnameVerifier() {\n            public boolean verify(String hostname, SSLSession session) { return true; }\n        };\n        HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\n    }\n</code></pre>\n<p>And Call it</p>\n<pre><code>public ResponseEntity&lt;String&gt; hitApi(String url, String bodyJson) {\ntry {\n    // for HTTPS\n    getAllCertificatePermit();\n    var restTemplate = new RestTemplate();\n\n    var header = new HttpHeaders();\n    header.setContentType(MediaType.APPLICATION_JSON);\n    header.setBasicAuth(&quot;Set Token&quot;);\n    header.set(&quot;apiKey&quot;, &quot;Set Api Key&quot;);\n    HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;(bodyJson, header);\n\n    return restTemplate.exchange(url, HttpMethod.POST, request, String.class);\n}catch (Exception e){\n    log.error(Arrays.toString(e.getStackTrace())));\n    return null;\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":15422250,"reputation":9,"user_id":11125988,"display_name":"guido pastore"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1700022535,"creation_date":1699895718,"question_id":77475658,"body_markdown":"I have created the following configuration class in order to trust all certificates in my spring boot project:\r\n\r\n    package com.nttdata.iplanet.hubject.utils;\r\n    \r\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.springframework.boot.web.client.RestTemplateBuilder;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.http.client.ClientHttpRequestFactory;\r\n    import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\r\n    import org.springframework.web.client.RestTemplate;\r\n    \r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    import java.security.KeyManagementException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    @Configuration\r\n    public class TrustAllCertificatesConfig {\r\n    \r\n        @Bean\r\n        public RestTemplate restTemplate() {\r\n            return new RestTemplateBuilder()\r\n                    .requestFactory(this::trustAllCertificatesRequestFactory)\r\n                    .build();\r\n        }\r\n    \r\n        private ClientHttpRequestFactory trustAllCertificatesRequestFactory() {\r\n            TrustManager[] trustManagers = new TrustManager[]{new X509TrustManager() {\r\n                public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {}\r\n    \r\n                public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {}\r\n    \r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return new X509Certificate[0];\r\n                }\r\n            }};\r\n    \r\n            SSLContext sslContext;\r\n            try {\r\n                sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n                sslContext.init(null, trustManagers, new SecureRandom());\r\n            } catch (NoSuchAlgorithmException | KeyManagementException e) {\r\n                throw new RuntimeException(&quot;Failed to initialize SSLContext&quot;, e);\r\n            }\r\n    \r\n            CloseableHttpClient httpClient = HttpClients.custom()\r\n                    .setSSLContext(sslContext)\r\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                    .build();\r\n    \r\n            // Utilizzare una versione di HttpComponentsClientHttpRequestFactory compatibile\r\n            // con la versione delle librerie Apache HTTP Client che stai utilizzando.\r\n    \r\n            // Versione per Apache HTTP Client 4.5.x:\r\n            // return new HttpComponentsClientHttpRequestFactory(httpClient);\r\n    \r\n            // Versione per Apache HTTP Client 4.3.x:\r\n            return new HttpComponentsClientHttpRequestFactory(httpClient);\r\n    \r\n        }\r\n    }\r\n\r\nBut I receive error in the last raw of my code, that is:\r\n\r\nreturn new HttpComponentsClientHttpRequestFactory(httpClient);\r\n\r\nand I can&#39;t understand why.\r\n\r\nThe dependency that I used on my pom.xml is:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.13&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nHow Can I solve it??\r\n\r\n","title":"How to to trust all certificates in a spring boot project","body":"<p>I have created the following configuration class in order to trust all certificates in my spring boot project:</p>\n<pre><code>package com.nttdata.iplanet.hubject.utils;\n\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.springframework.boot.web.client.RestTemplateBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.client.ClientHttpRequestFactory;\nimport org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\nimport org.springframework.web.client.RestTemplate;\n\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\nimport java.security.KeyManagementException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.cert.X509Certificate;\n\n@Configuration\npublic class TrustAllCertificatesConfig {\n\n    @Bean\n    public RestTemplate restTemplate() {\n        return new RestTemplateBuilder()\n                .requestFactory(this::trustAllCertificatesRequestFactory)\n                .build();\n    }\n\n    private ClientHttpRequestFactory trustAllCertificatesRequestFactory() {\n        TrustManager[] trustManagers = new TrustManager[]{new X509TrustManager() {\n            public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {}\n\n            public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {}\n\n            public X509Certificate[] getAcceptedIssuers() {\n                return new X509Certificate[0];\n            }\n        }};\n\n        SSLContext sslContext;\n        try {\n            sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            sslContext.init(null, trustManagers, new SecureRandom());\n        } catch (NoSuchAlgorithmException | KeyManagementException e) {\n            throw new RuntimeException(&quot;Failed to initialize SSLContext&quot;, e);\n        }\n\n        CloseableHttpClient httpClient = HttpClients.custom()\n                .setSSLContext(sslContext)\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                .build();\n\n        // Utilizzare una versione di HttpComponentsClientHttpRequestFactory compatibile\n        // con la versione delle librerie Apache HTTP Client che stai utilizzando.\n\n        // Versione per Apache HTTP Client 4.5.x:\n        // return new HttpComponentsClientHttpRequestFactory(httpClient);\n\n        // Versione per Apache HTTP Client 4.3.x:\n        return new HttpComponentsClientHttpRequestFactory(httpClient);\n\n    }\n}\n</code></pre>\n<p>But I receive error in the last raw of my code, that is:</p>\n<p>return new HttpComponentsClientHttpRequestFactory(httpClient);</p>\n<p>and I can't understand why.</p>\n<p>The dependency that I used on my pom.xml is:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.13&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>How Can I solve it??</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1700022432,"post_id":77485246,"comment_id":136602849,"body_markdown":"`&quot;{\\&quot;address\\&quot;:\\&quot;{\\\\&quot;area\\\\&quot;}\\&quot;}&quot;` is not a valid string literal.","body":"<code>&quot;{\\&quot;address\\&quot;:\\&quot;{\\\\&quot;area\\\\&quot;}\\&quot;}&quot;</code> is not a valid string literal."},{"owner":{"account_id":18929848,"reputation":35,"user_id":19344103,"display_name":"JavaMe"},"score":0,"creation_date":1700022491,"post_id":77485246,"comment_id":136602851,"body_markdown":"it doesn&#39;t helpful i wanna  \\ * 3","body":"it doesn&#39;t helpful i wanna  \\ * 3"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1700022795,"post_id":77485246,"comment_id":136602867,"body_markdown":"Basically, what you&#39;re appending is backslash-equivalent to `///` (blame formatting `\\\\\\``), which means you&#39;re going to have `//` (which is fine) followed by `/` (which this exception is raised for). You need to having a trailing character that is escaped (since `//` is an unescaped `/` and `////` is a literal `/`). In your case, `//` happens to be followed by `&quot;`, so while it&#39;s _really ugly_, you could technically do `file.replaceAll(&quot;\\\\\\\\\\\\\\\\\\&quot;&quot;, &quot;\\\\\\\\\\\\\\\\\\\\\\\\\\&quot;&quot;)`. Or you can follow the linked duplicate and find a better solution.","body":"Basically, what you&#39;re appending is backslash-equivalent to <code>&#47;&#47;&#47;</code> (blame formatting <code>\\\\`</code>), which means you&#39;re going to have <code>&#47;&#47;</code> (which is fine) followed by <code>&#47;</code> (which this exception is raised for). You need to having a trailing character that is escaped (since <code>&#47;&#47;</code> is an unescaped <code>&#47;</code> and <code>&#47;&#47;&#47;&#47;</code> is a literal <code>&#47;</code>). In your case, <code>&#47;&#47;</code> happens to be followed by <code>&quot;</code>, so while it&#39;s <i>really ugly</i>, you could technically do <code>file.replaceAll(&quot;\\\\\\\\\\\\\\\\\\&quot;&quot;, &quot;\\\\\\\\\\\\\\\\\\\\\\\\\\&quot;&quot;)</code>. Or you can follow the linked duplicate and find a better solution."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1700022897,"post_id":77485246,"comment_id":136602878,"body_markdown":"uhhh, in regards to &quot;its doesnt helpful&quot;, have you heard of: &quot;learn and apply&quot;? what, you want someone to give everything to you in baby steps, you little baby?","body":"uhhh, in regards to &quot;its doesnt helpful&quot;, have you heard of: &quot;learn and apply&quot;? what, you want someone to give everything to you in baby steps, you little baby?"},{"owner":{"account_id":18929848,"reputation":35,"user_id":19344103,"display_name":"JavaMe"},"score":0,"creation_date":1700023146,"post_id":77485246,"comment_id":136602900,"body_markdown":"i just wanna \\\\  to \\\\\\ but there is no solution...","body":"i just wanna \\\\  to \\\\\\ but there is no solution..."},{"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"score":0,"creation_date":1700023315,"post_id":77485246,"comment_id":136602908,"body_markdown":"Use replace in loop or use what i have mentioned in the answer !","body":"Use replace in loop or use what i have mentioned in the answer !"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1700061227,"post_id":77485246,"comment_id":136608806,"body_markdown":"Donât use replaceAll.  There is no reason to use regular expressions here.  Just use [replace](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)), as in `replace(&quot;\\\\\\\\&quot;, &quot;\\\\\\\\\\\\&quot;)`.","body":"Donât use replaceAll.  There is no reason to use regular expressions here.  Just use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">replace</a>, as in <code>replace(&quot;\\\\\\\\&quot;, &quot;\\\\\\\\\\\\&quot;)</code>."}],"answers":[{"tags":[],"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700022433,"creation_date":1700022433,"answer_id":77485271,"question_id":77485246,"body_markdown":"The javadoc of [replaceAll][1] says:\r\n\r\n&gt; Note that backslashes ( \\ ) and dollar signs ($) in the replacement\r\n&gt; string may cause the results to be different than if it were being\r\n&gt; treated as a literal replacement string; see Matcher.replaceAll. **Use\r\n&gt; Matcher.quoteReplacement(java.lang.String)** to suppress the special\r\n&gt; meaning of these characters, if desired.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29","title":"java escape character replaceAll not working","body":"<p>The javadoc of <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"nofollow noreferrer\">replaceAll</a> says:</p>\n<blockquote>\n<p>Note that backslashes ( \\ ) and dollar signs ($) in the replacement\nstring may cause the results to be different than if it were being\ntreated as a literal replacement string; see Matcher.replaceAll. <strong>Use\nMatcher.quoteReplacement(java.lang.String)</strong> to suppress the special\nmeaning of these characters, if desired.</p>\n</blockquote>\n"}],"owner":{"account_id":18929848,"reputation":35,"user_id":19344103,"display_name":"JavaMe"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1700022540,"answer_count":1,"score":-1,"last_activity_date":1700022433,"creation_date":1700021984,"question_id":77485246,"body_markdown":"i wanna change escape charater `\\\\` to `\\\\\\` so here is my code\r\n\r\nas is  `&quot;{\\&quot;address\\&quot;:\\&quot;{\\\\&quot;area\\\\&quot;}\\&quot;}&quot;`\r\n\r\nexpected `&quot;{\\&quot;address\\&quot;:\\&quot;{\\\\\\&quot;area\\\\\\&quot;}\\&quot;}&quot;`\r\n```\r\nfinal String s = file.replaceAll(&quot;\\\\\\\\&quot;, &quot;\\\\\\\\\\\\&quot;);\r\n```\r\nbut error java.lang.IllegalArgumentException: character to be escaped is missing\r\n\r\nhow can i replace `\\\\` to `\\\\\\` ??","title":"java escape character replaceAll not working","body":"<p>i wanna change escape charater <code>\\\\</code> to <code>\\\\\\</code> so here is my code</p>\n<p>as is  <code>&quot;{\\&quot;address\\&quot;:\\&quot;{\\\\&quot;area\\\\&quot;}\\&quot;}&quot;</code></p>\n<p>expected <code>&quot;{\\&quot;address\\&quot;:\\&quot;{\\\\\\&quot;area\\\\\\&quot;}\\&quot;}&quot;</code></p>\n<pre><code>final String s = file.replaceAll(&quot;\\\\\\\\&quot;, &quot;\\\\\\\\\\\\&quot;);\n</code></pre>\n<p>but error java.lang.IllegalArgumentException: character to be escaped is missing</p>\n<p>how can i replace <code>\\\\</code> to <code>\\\\\\</code> ??</p>\n"},{"tags":["java","quartz-scheduler","scheduler"],"answers":[{"tags":[],"owner":{"account_id":5031377,"reputation":800,"user_id":4041435,"display_name":"Grant Lay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700021371,"creation_date":1700021371,"answer_id":77485218,"question_id":75781804,"body_markdown":"I faced the same issue and truncated all the quartz tables and restarted the app and that sorted the issue for me.\r\n\r\nHere is the script I run on postgres\r\n\r\n    TRUNCATE TABLE quartz.qrtz_job_details CASCADE;\r\n    TRUNCATE TABLE quartz.qrtz_triggers CASCADE;\r\n    TRUNCATE TABLE quartz.qrtz_fired_triggers;\r\n    TRUNCATE TABLE quartz.qrtz_locks;\r\n    TRUNCATE TABLE quartz.qrtz_paused_trigger_grps;\r\n    TRUNCATE TABLE quartz.qrtz_scheduler_state;\r\n    TRUNCATE TABLE quartz.qrtz_simple_triggers;\r\n    TRUNCATE TABLE quartz.qrtz_simprop_triggers;\r\n    TRUNCATE TABLE quartz.qrtz_blob_triggers;\r\n    TRUNCATE TABLE quartz.qrtz_calendars;\r\n    TRUNCATE TABLE quartz.qrtz_cron_triggers;\r\n\r\n","title":"No record found for selection of Trigger with key&lt;&gt; when quartz tried to fetch job details after restart of application","body":"<p>I faced the same issue and truncated all the quartz tables and restarted the app and that sorted the issue for me.</p>\n<p>Here is the script I run on postgres</p>\n<pre><code>TRUNCATE TABLE quartz.qrtz_job_details CASCADE;\nTRUNCATE TABLE quartz.qrtz_triggers CASCADE;\nTRUNCATE TABLE quartz.qrtz_fired_triggers;\nTRUNCATE TABLE quartz.qrtz_locks;\nTRUNCATE TABLE quartz.qrtz_paused_trigger_grps;\nTRUNCATE TABLE quartz.qrtz_scheduler_state;\nTRUNCATE TABLE quartz.qrtz_simple_triggers;\nTRUNCATE TABLE quartz.qrtz_simprop_triggers;\nTRUNCATE TABLE quartz.qrtz_blob_triggers;\nTRUNCATE TABLE quartz.qrtz_calendars;\nTRUNCATE TABLE quartz.qrtz_cron_triggers;\n</code></pre>\n"}],"owner":{"account_id":21687948,"reputation":11,"user_id":16003067,"display_name":"Rochit Aggarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700021371,"creation_date":1679227060,"question_id":75781804,"body_markdown":"Getting exception when quartz tried to fetch data regarding stored job details.\r\n\r\n&gt; Exception - nested exception is org.quartz.JobPersistenceException: Couldn&#39;t retrieve trigger: No record found for selection of Trigger with key:? and statement: SELECT * FROM QRTZ_CRON_TRIGGERS WHERE SCHED_NAME = ? AND TRIGGER_NAME = ? AND TRIGGER_GROUP = ?","title":"No record found for selection of Trigger with key&lt;&gt; when quartz tried to fetch job details after restart of application","body":"<p>Getting exception when quartz tried to fetch data regarding stored job details.</p>\n<blockquote>\n<p>Exception - nested exception is org.quartz.JobPersistenceException: Couldn't retrieve trigger: No record found for selection of Trigger with key:? and statement: SELECT * FROM QRTZ_CRON_TRIGGERS WHERE SCHED_NAME = ? AND TRIGGER_NAME = ? AND TRIGGER_GROUP = ?</p>\n</blockquote>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":278995,"reputation":2459,"user_id":2553194,"display_name":"RubioRic"},"score":0,"creation_date":1490599499,"post_id":43040031,"comment_id":73165042,"body_markdown":"It seems that it&#39;s an encoding problem http://stackoverflow.com/questions/30609062/java-nio-charset-malformedinputexception-input-length-1","body":"It seems that it&#39;s an encoding problem <a href=\"http://stackoverflow.com/questions/30609062/java-nio-charset-malformedinputexception-input-length-1\" title=\"java nio charset malformedinputexception input length 1\">stackoverflow.com/questions/30609062/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2486628,"reputation":869,"user_id":2164942,"accept_rate":88,"display_name":"Subramaniam Ramasubramanian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490599631,"creation_date":1490599631,"answer_id":43040291,"question_id":43040031,"body_markdown":"This looks like an encoding issue because of the cyrillic alphabet you are using.\r\n\r\nThink the ISO-8859-1 encoding works for European characters apparently. Not sure if UTF-8 will work.\r\n\r\nHave you looked at [this][1] page?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/26268132/all-inclusive-charset-to-avoid-java-nio-charset-malformedinputexception-input","title":"Why error? (java.nio.charset.MalformedInputException: Input length = 1)","body":"<p>This looks like an encoding issue because of the cyrillic alphabet you are using.</p>\n\n<p>Think the ISO-8859-1 encoding works for European characters apparently. Not sure if UTF-8 will work.</p>\n\n<p>Have you looked at <a href=\"https://stackoverflow.com/questions/26268132/all-inclusive-charset-to-avoid-java-nio-charset-malformedinputexception-input\">this</a> page?</p>\n"},{"comments":[{"owner":{"account_id":443973,"reputation":4509,"user_id":835523,"accept_rate":85,"display_name":"Steve"},"score":0,"creation_date":1513278822,"post_id":43040570,"comment_id":82603367,"body_markdown":"I think this answer needs an explanation as to &quot;why&quot; that charset wouldwork","body":"I think this answer needs an explanation as to &quot;why&quot; that charset wouldwork"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1638069003,"post_id":43040570,"comment_id":123988114,"body_markdown":"Explain that the overloaded `lines(Path)` uses UTF-8, which fails on Cyrillic.","body":"Explain that the overloaded <code>lines(Path)</code> uses UTF-8, which fails on Cyrillic."}],"tags":[],"owner":{"account_id":9116271,"reputation":121,"user_id":7623029,"display_name":"aaa"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490600598,"creation_date":1490600598,"answer_id":43040570,"question_id":43040031,"body_markdown":"    Files.\r\n    lines(Paths.get(fileName), Charset.forName(&quot;windows-1251&quot;))","title":"Why error? (java.nio.charset.MalformedInputException: Input length = 1)","body":"<pre><code>Files.\nlines(Paths.get(fileName), Charset.forName(\"windows-1251\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6288043,"reputation":770,"user_id":4886572,"display_name":"brijesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552660391,"creation_date":1552660391,"answer_id":55184932,"question_id":43040031,"body_markdown":"This is not an answer but may be useful to others facing this issue while coding to read mainframe files. \r\n\r\nUse this like below:\r\n\r\n    List&lt;String&gt; allLines = Files.readAllLines(path,StandardCharsets.ISO_8859_1);\r\n\r\n\r\nIBM calls it code page 819 or CP819. This is a life saver if you are processing Extended Binary format files sourced from Mainframe systems.","title":"Why error? (java.nio.charset.MalformedInputException: Input length = 1)","body":"<p>This is not an answer but may be useful to others facing this issue while coding to read mainframe files. </p>\n\n<p>Use this like below:</p>\n\n<pre><code>List&lt;String&gt; allLines = Files.readAllLines(path,StandardCharsets.ISO_8859_1);\n</code></pre>\n\n<p>IBM calls it code page 819 or CP819. This is a life saver if you are processing Extended Binary format files sourced from Mainframe systems.</p>\n"}],"owner":{"account_id":10515900,"reputation":21,"user_id":7750012,"display_name":"Qwerty"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1700020995,"creation_date":1490598815,"question_id":43040031,"body_markdown":"Java code:\r\n\r\n     String fileName = &quot;settings.txt&quot;;\r\n\r\n     String text = &quot;AdresProgramm =&quot;;\r\n     String delimiter = &quot;;&quot;;\r\n\r\n     Optional&lt;String&gt; result =\r\n     Files\r\n         .lines(Paths.get(fileName))\r\n         .filter(e -&gt; e.contains(text))\r\n         .map(e -&gt; {\r\n             int start = e.indexOf(text);\r\n             int end = e.indexOf(delimiter, start + text.length());\r\n\r\n                 return e.substring(start, end);\r\n         })\r\n         .findFirst();\r\n\r\n     result.ifPresent(System.out::println);\r\n\r\nFile contents: `AdresProgramm =D:\\\\Ð­Ð¡Ð§Ð¤\\;`\r\n\r\n&gt;  java.nio.charset.MalformedInputException: Input length = 1","title":"Why error? (java.nio.charset.MalformedInputException: Input length = 1)","body":"<p>Java code:</p>\n\n<pre><code> String fileName = \"settings.txt\";\n\n String text = \"AdresProgramm =\";\n String delimiter = \";\";\n\n Optional&lt;String&gt; result =\n Files\n     .lines(Paths.get(fileName))\n     .filter(e -&gt; e.contains(text))\n     .map(e -&gt; {\n         int start = e.indexOf(text);\n         int end = e.indexOf(delimiter, start + text.length());\n\n             return e.substring(start, end);\n     })\n     .findFirst();\n\n result.ifPresent(System.out::println);\n</code></pre>\n\n<p>File contents: <code>AdresProgramm =D:\\\\Ð­Ð¡Ð§Ð¤\\;</code></p>\n\n<blockquote>\n  <p>java.nio.charset.MalformedInputException: Input length = 1</p>\n</blockquote>\n"},{"tags":["java","html","spring-boot","gmail","jakarta-mail"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1699973671,"post_id":77481545,"comment_id":136596032,"body_markdown":"Most email clients do not load external stylesheets. In fact, a lot of email client will generally require quite some styling on the HTML elements itself, and even ignore inline stylesheets. Creating usable HTML emails is a craft in itself, and you can&#39;t use all tricks used for &quot;normal&quot; HTML pages.","body":"Most email clients do not load external stylesheets. In fact, a lot of email client will generally require quite some styling on the HTML elements itself, and even ignore inline stylesheets. Creating usable HTML emails is a craft in itself, and you can&#39;t use all tricks used for &quot;normal&quot; HTML pages."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699974794,"post_id":77481545,"comment_id":136596276,"body_markdown":"When sending HTML emails everything has to be inlined, so if you want to use a custom stylesheet it has to be part of the HTML that is being send, not some remote resource that is going to be loaded (images are a general exception to the rule_. So I doubt your fonts are getting loaded which probably is why it is (partially) misformed.","body":"When sending HTML emails everything has to be inlined, so if you want to use a custom stylesheet it has to be part of the HTML that is being send, not some remote resource that is going to be loaded (images are a general exception to the rule_. So I doubt your fonts are getting loaded which probably is why it is (partially) misformed."}],"answers":[{"tags":[],"owner":{"account_id":29504808,"reputation":1,"user_id":22611016,"display_name":"octtag"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700020000,"creation_date":1700020000,"answer_id":77485144,"question_id":77481545,"body_markdown":"I was using display: flex; which is not supported by gmail. I solved it by implementing table structure.","title":"I send an email with html from my method with java mail and only in gmail it arrives broken and without some styles, what is it?","body":"<p>I was using display: flex; which is not supported by gmail. I solved it by implementing table structure.</p>\n"}],"owner":{"account_id":29504808,"reputation":1,"user_id":22611016,"display_name":"octtag"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700020000,"creation_date":1699973264,"question_id":77481545,"body_markdown":"this is my main method and the second one is where I call it. The way that my html format seems to be right, styles are inline and this works when I send it to an outlook user or when I put the html manually in gmail inside of the following div: \r\n\r\n```html\r\n&lt;div id=&quot;:vn&quot; class=&quot;Am Al editable LW-avf tS-tW&quot; hidefocus=&quot;true&quot; aria-label=&quot;Message Body&quot; g_editable=&quot;true&quot; role=&quot;textbox&quot; aria-multiline=&quot;true&quot; contenteditable=&quot;true&quot; tabindex=&quot;1&quot; style=&quot;direction: ltr; min-height: 266px;&quot; spellcheck=&quot;false&quot; aria-owns=&quot;:y1&quot; aria-controls=&quot;:y1&quot; aria-expanded=&quot;false&quot;&gt;&lt;/div&gt;    \r\n```\r\n\r\nmain method:\r\n\r\n    public void enviarEmail(String destinatario, String asunto, String contenidoHtml, String contentType) throws MessagingException {\r\n        // Configuraci&#243;n de las propiedades\r\n        Properties props = new Properties();\r\n        props.put(&quot;mail.smtp.host&quot;, &quot;smtp.hostinger.com&quot;);\r\n        props.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\r\n        props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.smtp.starttls.required&quot;, &quot;true&quot;);\r\n\r\n        // Crear una nueva sesi&#243;n con autenticaci&#243;n\r\n        Session session = Session.getInstance(props, new Authenticator() {\r\n            protected PasswordAuthentication getPasswordAuthentication() {\r\n                return new PasswordAuthentication(username, password);\r\n            }\r\n        });\r\n\r\n        // Crear el mensaje\r\n        Message message = new MimeMessage(session);\r\n        message.setFrom(new InternetAddress(username));\r\n        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(destinatario));\r\n        message.setSubject(asunto);\r\n        // Especificar UTF-8 en el contenido\r\n        message.setContent(contenidoHtml, contentType);\r\n\r\n        // Enviar el mensaje\r\n        Transport.send(message);\r\n    }\r\n\r\nand then I call it in this method:\r\n\r\n    public void enviarTicketsPorEmail(String correoDestinatario, Carrito carrito) throws MessagingException {\r\n        StringBuilder cuerpoEmail = new StringBuilder();\r\n\r\n        // .newsletter-recibo-de-tickets\r\n        cuerpoEmail.append(&quot;&lt;!DOCTYPE html&gt;&quot;)\r\n                .append(&quot;&lt;html&gt;&quot;)\r\n                .append(&quot;&lt;head&gt;&quot;)\r\n                .append(&quot;&lt;meta charset=\\&quot;UTF-8\\&quot;&gt;&quot;)\r\n                .append(&quot;&lt;meta http-equiv=\\&quot;X-UA-Compatible\\&quot; content=\\&quot;text/html; IE=edge\\&quot;&gt;&quot;)\r\n                .append(&quot;&lt;meta name=\\&quot;viewport\\&quot; content=\\&quot;width=device-width, initial-scale=1.0\\&quot;&gt;&quot;)\r\n                .append(&quot;&lt;link rel=\\&quot;stylesheet\\&quot; href=\\&quot;https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;900&amp;display=swap\\&quot; /&gt;&quot;)\r\n                .append(&quot;&lt;/head&gt;&quot;)\r\n\r\n                //body\r\n                .append(&quot;&lt;div style=\\&quot;margin:0;line-height:normal; display:flex; flex-direction: column; width:100%;justify-content: center;align-items: center;align-content: center;flex-wrap: nowrap;\\&quot;&gt;&quot;)\r\n\r\n                .append(&quot;&lt;div style=\\&quot;width: 100%;\\&quot;&gt;&quot;)\r\n                .append(&quot;&lt;img src=\\&quot;https://simplepassbucket.s3.sa-east-1.amazonaws.com/img/newsletters/parteInicialCompraExitosa.png\\&quot; style=\\&quot;width: 100%;\\&quot;&gt;&quot;)\r\n                .append(&quot;&lt;/div&gt;&quot;)\r\n                .append(&quot;&lt;div style=\\&quot;line-height:130%;display:inline-block;font-size:14px;margin:10px 0\\&quot;&gt;&quot;)\r\n                        .append(&quot;&lt;span style:&#39;font-size: 14px&#39;&gt;C&#243;digo de compra: &lt;span style=\\&quot;font-weight:600; font-size: 14px\\&quot; id=\\&quot;m_-4881203300558445123codigoCompra\\&quot;&gt;&quot;)\r\n                .append(carrito.getPago().getPagoId())\r\n                .append(&quot;&lt;/span&gt;&quot;)\r\n                .append(&quot;&lt;/span&gt;&quot;)\r\n                .append(&quot;&lt;/div&gt;&quot;)\r\n\r\n           \r\n    //THE REST OF THE CODE WAS REMOVED SO IT IS NOT SO LONG\r\n\r\n\r\n                .append(&quot;&lt;/div&gt;&quot;)\r\n                .append(&quot;&lt;/html&gt;&quot;);\r\n        // Usar la funci&#243;n de env&#237;o de correo para enviar el correo con el cuerpo construido y el tipo de contenido correcto\r\n        mailSender.enviarEmail(correoDestinatario, &quot;Tus tickets :)&quot;, cuerpoEmail.toString(), &quot;text/html; charset=UTF-8&quot;);\r\n    }\r\n\r\nI have already explained it up there but yeaph basically I need an example of a method in java mail that has been able to send an html automatically to a gmail user without it breaking or arriving deformed.","title":"I send an email with html from my method with java mail and only in gmail it arrives broken and without some styles, what is it?","body":"<p>this is my main method and the second one is where I call it. The way that my html format seems to be right, styles are inline and this works when I send it to an outlook user or when I put the html manually in gmail inside of the following div:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div id=&quot;:vn&quot; class=&quot;Am Al editable LW-avf tS-tW&quot; hidefocus=&quot;true&quot; aria-label=&quot;Message Body&quot; g_editable=&quot;true&quot; role=&quot;textbox&quot; aria-multiline=&quot;true&quot; contenteditable=&quot;true&quot; tabindex=&quot;1&quot; style=&quot;direction: ltr; min-height: 266px;&quot; spellcheck=&quot;false&quot; aria-owns=&quot;:y1&quot; aria-controls=&quot;:y1&quot; aria-expanded=&quot;false&quot;&gt;&lt;/div&gt;    \n</code></pre>\n<p>main method:</p>\n<pre><code>public void enviarEmail(String destinatario, String asunto, String contenidoHtml, String contentType) throws MessagingException {\n    // ConfiguraciÃ³n de las propiedades\n    Properties props = new Properties();\n    props.put(&quot;mail.smtp.host&quot;, &quot;smtp.hostinger.com&quot;);\n    props.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\n    props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n    props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.smtp.starttls.required&quot;, &quot;true&quot;);\n\n    // Crear una nueva sesiÃ³n con autenticaciÃ³n\n    Session session = Session.getInstance(props, new Authenticator() {\n        protected PasswordAuthentication getPasswordAuthentication() {\n            return new PasswordAuthentication(username, password);\n        }\n    });\n\n    // Crear el mensaje\n    Message message = new MimeMessage(session);\n    message.setFrom(new InternetAddress(username));\n    message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(destinatario));\n    message.setSubject(asunto);\n    // Especificar UTF-8 en el contenido\n    message.setContent(contenidoHtml, contentType);\n\n    // Enviar el mensaje\n    Transport.send(message);\n}\n</code></pre>\n<p>and then I call it in this method:</p>\n<pre><code>public void enviarTicketsPorEmail(String correoDestinatario, Carrito carrito) throws MessagingException {\n    StringBuilder cuerpoEmail = new StringBuilder();\n\n    // .newsletter-recibo-de-tickets\n    cuerpoEmail.append(&quot;&lt;!DOCTYPE html&gt;&quot;)\n            .append(&quot;&lt;html&gt;&quot;)\n            .append(&quot;&lt;head&gt;&quot;)\n            .append(&quot;&lt;meta charset=\\&quot;UTF-8\\&quot;&gt;&quot;)\n            .append(&quot;&lt;meta http-equiv=\\&quot;X-UA-Compatible\\&quot; content=\\&quot;text/html; IE=edge\\&quot;&gt;&quot;)\n            .append(&quot;&lt;meta name=\\&quot;viewport\\&quot; content=\\&quot;width=device-width, initial-scale=1.0\\&quot;&gt;&quot;)\n            .append(&quot;&lt;link rel=\\&quot;stylesheet\\&quot; href=\\&quot;https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;900&amp;display=swap\\&quot; /&gt;&quot;)\n            .append(&quot;&lt;/head&gt;&quot;)\n\n            //body\n            .append(&quot;&lt;div style=\\&quot;margin:0;line-height:normal; display:flex; flex-direction: column; width:100%;justify-content: center;align-items: center;align-content: center;flex-wrap: nowrap;\\&quot;&gt;&quot;)\n\n            .append(&quot;&lt;div style=\\&quot;width: 100%;\\&quot;&gt;&quot;)\n            .append(&quot;&lt;img src=\\&quot;https://simplepassbucket.s3.sa-east-1.amazonaws.com/img/newsletters/parteInicialCompraExitosa.png\\&quot; style=\\&quot;width: 100%;\\&quot;&gt;&quot;)\n            .append(&quot;&lt;/div&gt;&quot;)\n            .append(&quot;&lt;div style=\\&quot;line-height:130%;display:inline-block;font-size:14px;margin:10px 0\\&quot;&gt;&quot;)\n                    .append(&quot;&lt;span style:'font-size: 14px'&gt;CÃ³digo de compra: &lt;span style=\\&quot;font-weight:600; font-size: 14px\\&quot; id=\\&quot;m_-4881203300558445123codigoCompra\\&quot;&gt;&quot;)\n            .append(carrito.getPago().getPagoId())\n            .append(&quot;&lt;/span&gt;&quot;)\n            .append(&quot;&lt;/span&gt;&quot;)\n            .append(&quot;&lt;/div&gt;&quot;)\n\n       \n//THE REST OF THE CODE WAS REMOVED SO IT IS NOT SO LONG\n\n\n            .append(&quot;&lt;/div&gt;&quot;)\n            .append(&quot;&lt;/html&gt;&quot;);\n    // Usar la funciÃ³n de envÃ­o de correo para enviar el correo con el cuerpo construido y el tipo de contenido correcto\n    mailSender.enviarEmail(correoDestinatario, &quot;Tus tickets :)&quot;, cuerpoEmail.toString(), &quot;text/html; charset=UTF-8&quot;);\n}\n</code></pre>\n<p>I have already explained it up there but yeaph basically I need an example of a method in java mail that has been able to send an html automatically to a gmail user without it breaking or arriving deformed.</p>\n"},{"tags":["java","spring","rest"],"answers":[{"tags":[],"owner":{"account_id":2161237,"reputation":824,"user_id":1934111,"accept_rate":76,"display_name":"VijayD"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1487668727,"creation_date":1487668727,"answer_id":42363209,"question_id":42362490,"body_markdown":"Try out the below code:\r\n   \r\n    @InitBinder\r\n    public void setAllowedFields(WebDataBinder dataBinder) {\r\n\r\n\tdataBinder.registerCustomEditor(String.class, new PropertyEditorSupport() {\r\n\t\t@Override\r\n\t\tpublic void setAsText(String text) {\r\n\t\t\tif (text == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetValue(text);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String getAsText() {\r\n\t\t\tObject value = getValue();\r\n\t\t\treturn (value != null ? value.trim().toString() : &quot;&quot;);\r\n\t\t}\r\n\t});\r\n    }\r\n ","title":"how to Auto Trim Strings of bean object in spring with Restful api?","body":"<p>Try out the below code:</p>\n\n<pre><code>@InitBinder\npublic void setAllowedFields(WebDataBinder dataBinder) {\n\ndataBinder.registerCustomEditor(String.class, new PropertyEditorSupport() {\n    @Override\n    public void setAsText(String text) {\n        if (text == null) {\n            return;\n        }\n        setValue(text);\n    }\n\n    @Override\n    public String getAsText() {\n        Object value = getValue();\n        return (value != null ? value.trim().toString() : \"\");\n    }\n});\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6284293,"reputation":328,"user_id":5379010,"accept_rate":100,"display_name":"bhanwar rathore"},"score":0,"creation_date":1487669277,"post_id":42363268,"comment_id":71876625,"body_markdown":"I want form data in JSON format only so i can not use @ModelAttribute annotation . I am making restful api call using spring.","body":"I want form data in JSON format only so i can not use @ModelAttribute annotation . I am making restful api call using spring."},{"owner":{"account_id":3534671,"reputation":5376,"user_id":2953282,"display_name":"mlg"},"score":0,"creation_date":1487670496,"post_id":42363268,"comment_id":71877508,"body_markdown":"So you can&#39;t do it with the @InitBinder. Check out this link, I think it&#39;s the same problem of yours:  http://stackoverflow.com/questions/25403676/initbinder-with-requestbody-escaping-xss-in-spring-3-2-4","body":"So you can&#39;t do it with the @InitBinder. Check out this link, I think it&#39;s the same problem of yours:  <a href=\"http://stackoverflow.com/questions/25403676/initbinder-with-requestbody-escaping-xss-in-spring-3-2-4\" title=\"initbinder with requestbody escaping xss in spring 3 2 4\">stackoverflow.com/questions/25403676/&hellip;</a>"}],"tags":[],"owner":{"account_id":3534671,"reputation":5376,"user_id":2953282,"display_name":"mlg"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1487668885,"creation_date":1487668885,"answer_id":42363268,"question_id":42362490,"body_markdown":"The annotation `@InitBinder` doesn&#39;t work with `@RequestBody`, you have to use it with the `@ModelAttribute` annotation\r\n\r\nYou can find more information in the Spring documentation:\r\n\r\nhttps://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html","title":"how to Auto Trim Strings of bean object in spring with Restful api?","body":"<p>The annotation <code>@InitBinder</code> doesn't work with <code>@RequestBody</code>, you have to use it with the <code>@ModelAttribute</code> annotation</p>\n\n<p>You can find more information in the Spring documentation:</p>\n\n<p><a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html</a></p>\n"},{"comments":[{"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"score":0,"creation_date":1585932951,"post_id":49886745,"comment_id":107948337,"body_markdown":"I think it is better to extend from StringDeserializer class or use its content as there are special cases that default StringDeserializer handles. See here more details on this: https://stackoverflow.com/questions/6852213/can-jackson-be-configured-to-trim-leading-trailing-whitespace-from-all-string-pr#answer-60876643","body":"I think it is better to extend from StringDeserializer class or use its content as there are special cases that default StringDeserializer handles. See here more details on this: <a href=\"https://stackoverflow.com/questions/6852213/can-jackson-be-configured-to-trim-leading-trailing-whitespace-from-all-string-pr#answer-60876643\" title=\"can jackson be configured to trim leading trailing whitespace from all string pr%23answer 60876643\">stackoverflow.com/questions/6852213/&hellip;</a>"}],"tags":[],"owner":{"account_id":1806434,"reputation":659,"user_id":1643464,"display_name":"Ashu"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1523996113,"creation_date":1523996113,"answer_id":49886745,"question_id":42362490,"body_markdown":"To add this feature to all JSON submitted in post and received in RequestBody you can have following WebMvcConfigurer in place.\r\n\r\n        import java.util.List;\r\n        import org.springframework.context.annotation.Bean;\r\n        import org.springframework.context.annotation.Configuration;\r\n        import org.springframework.http.converter.HttpMessageConverter;\r\n        import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;\r\n        import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n        import com.fasterxml.jackson.databind.DeserializationFeature;\r\n        import com.fasterxml.jackson.databind.ObjectMapper;\r\n        import com.fasterxml.jackson.databind.module.SimpleModule;\r\n        \r\n        @Configuration\r\n        public class HttpMessageConvertor implements WebMvcConfigurer {\r\n        \r\n        @Override\r\n        public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n            converters.add(mappingJackson2HttpMessageConverter());\r\n        }\r\n        \r\n        @Bean\r\n        public MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() {\r\n            MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        \r\n            SimpleModule module = new SimpleModule();\r\n            module.addDeserializer(String.class, new StringWithoutSpaceDeserializer(String.class));\r\n            mapper.registerModule(module);\r\n        \r\n            converter.setObjectMapper(mapper);\r\n        \r\n            return converter;\r\n        }\r\n    }\r\n\r\nStringWithoutSpaceDeserializer class as :\r\n\r\n    import java.io.IOException;\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\r\n    \r\n    public class StringWithoutSpaceDeserializer extends StdDeserializer&lt;String&gt; {\r\n        /**\r\n         * \r\n         */\r\n        private static final long serialVersionUID = -6972065572263950443L;\r\n    \r\n        protected StringWithoutSpaceDeserializer(Class&lt;String&gt; vc) {\r\n            super(vc);\r\n        }\r\n    \r\n        @Override\r\n        public String deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\r\n            return p.getText() != null ? p.getText().trim() : null;\r\n        }\r\n    }","title":"how to Auto Trim Strings of bean object in spring with Restful api?","body":"<p>To add this feature to all JSON submitted in post and received in RequestBody you can have following WebMvcConfigurer in place.</p>\n\n<pre><code>    import java.util.List;\n    import org.springframework.context.annotation.Bean;\n    import org.springframework.context.annotation.Configuration;\n    import org.springframework.http.converter.HttpMessageConverter;\n    import org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n    import com.fasterxml.jackson.databind.DeserializationFeature;\n    import com.fasterxml.jackson.databind.ObjectMapper;\n    import com.fasterxml.jackson.databind.module.SimpleModule;\n\n    @Configuration\n    public class HttpMessageConvertor implements WebMvcConfigurer {\n\n    @Override\n    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.add(mappingJackson2HttpMessageConverter());\n    }\n\n    @Bean\n    public MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() {\n        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n\n        SimpleModule module = new SimpleModule();\n        module.addDeserializer(String.class, new StringWithoutSpaceDeserializer(String.class));\n        mapper.registerModule(module);\n\n        converter.setObjectMapper(mapper);\n\n        return converter;\n    }\n}\n</code></pre>\n\n<p>StringWithoutSpaceDeserializer class as :</p>\n\n<pre><code>import java.io.IOException;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n\npublic class StringWithoutSpaceDeserializer extends StdDeserializer&lt;String&gt; {\n    /**\n     * \n     */\n    private static final long serialVersionUID = -6972065572263950443L;\n\n    protected StringWithoutSpaceDeserializer(Class&lt;String&gt; vc) {\n        super(vc);\n    }\n\n    @Override\n    public String deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\n        return p.getText() != null ? p.getText().trim() : null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14333706,"reputation":675,"user_id":11019230,"display_name":"zouabi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700019507,"creation_date":1700019507,"answer_id":77485120,"question_id":42362490,"body_markdown":"Adding to @Ashu&#39;s answer, you can just create a `Module` bean:\r\n\r\n\r\n```java\r\n@Configuration\r\npublic class JacksonConfig {\r\n\r\n  /**\r\n   * Configures module with a {@link StringDeserializer} that will trim all {@link String} fields in the request body and set them to null\r\n   * if they are empty.\r\n   * &lt;p/&gt;\r\n   * This enables validations like {@code @}{@link Email} to work properly if the user sends an empty/blank string,\r\n   * and helps avoid complex SQL queries to check for empty strings whenever checking for nulls.\r\n   *\r\n   * @return a {@link SimpleModule} bean that will be registered to the global {@link ObjectMapper}\r\n   */\r\n  @Bean\r\n  public SimpleModule stringDeserializerModule() {\r\n    final var module = new SimpleModule();\r\n\r\n    module.addDeserializer(String.class, new StringDeserializer() {\r\n      @Override\r\n      public String deserialize(JsonParser p, DeserializationContext ctx) throws java.io.IOException {\r\n        final var value = super.deserialize(p, ctx);\r\n        if (value == null) {\r\n          return null;\r\n        }\r\n\r\n        final var trimmed = value.trim();\r\n        if (trimmed.isEmpty()) {\r\n          return null;\r\n        }\r\n\r\n        return trimmed;\r\n      }\r\n    });\r\n\r\n    return module;\r\n  }\r\n}\r\n```\r\n\r\n### References:\r\n\r\n- [Spring Boot: Customize the Jackson ObjectMapper](https://www.baeldung.com/spring-boot-customize-jackson-objectmapper#1-application-properties-and-custom-jackson-module)","title":"how to Auto Trim Strings of bean object in spring with Restful api?","body":"<p>Adding to @Ashu's answer, you can just create a <code>Module</code> bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JacksonConfig {\n\n  /**\n   * Configures module with a {@link StringDeserializer} that will trim all {@link String} fields in the request body and set them to null\n   * if they are empty.\n   * &lt;p/&gt;\n   * This enables validations like {@code @}{@link Email} to work properly if the user sends an empty/blank string,\n   * and helps avoid complex SQL queries to check for empty strings whenever checking for nulls.\n   *\n   * @return a {@link SimpleModule} bean that will be registered to the global {@link ObjectMapper}\n   */\n  @Bean\n  public SimpleModule stringDeserializerModule() {\n    final var module = new SimpleModule();\n\n    module.addDeserializer(String.class, new StringDeserializer() {\n      @Override\n      public String deserialize(JsonParser p, DeserializationContext ctx) throws java.io.IOException {\n        final var value = super.deserialize(p, ctx);\n        if (value == null) {\n          return null;\n        }\n\n        final var trimmed = value.trim();\n        if (trimmed.isEmpty()) {\n          return null;\n        }\n\n        return trimmed;\n      }\n    });\n\n    return module;\n  }\n}\n</code></pre>\n<h3>References:</h3>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-boot-customize-jackson-objectmapper#1-application-properties-and-custom-jackson-module\" rel=\"nofollow noreferrer\">Spring Boot: Customize the Jackson ObjectMapper</a></li>\n</ul>\n"}],"owner":{"account_id":6284293,"reputation":328,"user_id":5379010,"accept_rate":100,"display_name":"bhanwar rathore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21141,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":42363268,"answer_count":4,"score":11,"last_activity_date":1700019507,"creation_date":1487666739,"question_id":42362490,"body_markdown":"I want to trim all the form string fields trim automatically (trailing &amp; leading spaces only)\r\n\r\nSuppose if I pass FirstName = &quot;  robert  &quot;\r\nExpected: &quot;robert&quot;\r\n\r\n\r\nController class having following code : \r\n\r\n    @InitBinder\r\n\tpublic void initBinder ( WebDataBinder binder )\r\n\t{\r\n\t\tStringTrimmerEditor stringtrimmer = new StringTrimmerEditor(true);\t\r\n\t\tbinder.registerCustomEditor(String.class, stringtrimmer);\r\n\t}\r\n\r\n\t@RequestMapping(value = &quot;/createuser&quot;, method = RequestMethod.POST)\r\n\tpublic Boolean createUser(@RequestBody  UserAddUpdateParam userAddUpdateParam) throws Exception {\r\n\r\n\t\treturn userFacade.createUser(userAddUpdateParam);\r\n\t}  \r\n\r\n\r\nwhen I debug the code, It&#39;s coming into @InitBinder but not trimming bean class string fields.\t","title":"how to Auto Trim Strings of bean object in spring with Restful api?","body":"<p>I want to trim all the form string fields trim automatically (trailing &amp; leading spaces only)</p>\n\n<p>Suppose if I pass FirstName = \"  robert  \"\nExpected: \"robert\"</p>\n\n<p>Controller class having following code : </p>\n\n<pre><code>@InitBinder\npublic void initBinder ( WebDataBinder binder )\n{\n    StringTrimmerEditor stringtrimmer = new StringTrimmerEditor(true);  \n    binder.registerCustomEditor(String.class, stringtrimmer);\n}\n\n@RequestMapping(value = \"/createuser\", method = RequestMethod.POST)\npublic Boolean createUser(@RequestBody  UserAddUpdateParam userAddUpdateParam) throws Exception {\n\n    return userFacade.createUser(userAddUpdateParam);\n}  \n</code></pre>\n\n<p>when I debug the code, It's coming into @InitBinder but not trimming bean class string fields.  </p>\n"},{"tags":["java","arrays","class","object","arraylist"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1700016597,"post_id":77484960,"comment_id":136602349,"body_markdown":"Your User class must override equals and hashCode correctly for deletion to work well. If they are well constructed, then simply call ``remove(...)` on the List object to remove the desired object.","body":"Your User class must override equals and hashCode correctly for deletion to work well. If they are well constructed, then simply call ``remove(...)` on the List object to remove the desired object."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1700016651,"post_id":77484960,"comment_id":136602353,"body_markdown":"Also, this: `public void deleteUser(User currentUser){ if(admin){  currentUser = null;` is worthless and does nothing but changes the *parameter*&#39;s reference to null. It does not remove anything from a collection, and does not affect the User object itself.","body":"Also, this: <code>public void deleteUser(User currentUser){ if(admin){  currentUser = null;</code> is worthless and does nothing but changes the <i>parameter</i>&#39;s reference to null. It does not remove anything from a collection, and does not affect the User object itself."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1700016740,"post_id":77484960,"comment_id":136602362,"body_markdown":"variable that points to a currentUser now points to nothing. User still exists somewhere","body":"variable that points to a currentUser now points to nothing. User still exists somewhere"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1700017281,"post_id":77484960,"comment_id":136602410,"body_markdown":"Did you notice there is an &quot;empty statement&quot; , a.k.a. &quot;null statement&quot; following `if(CheckIfUsernameExists(users,username));` ?   See https://stackoverflow.com/questions/14112515/semicolon-at-end-of-if-statement","body":"Did you notice there is an &quot;empty statement&quot; , a.k.a. &quot;null statement&quot; following <code>if(CheckIfUsernameExists(users,username));</code> ?   See <a href=\"https://stackoverflow.com/questions/14112515/semicolon-at-end-of-if-statement\" title=\"semicolon at end of if statement\">stackoverflow.com/questions/14112515/&hellip;</a>"}],"owner":{"account_id":27448033,"reputation":5,"user_id":20941091,"display_name":"Reina297"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1700016694,"answer_count":0,"score":-3,"last_activity_date":1700018830,"creation_date":1700016513,"question_id":77484960,"body_markdown":"I&#39;m currently coding for a delete user feature and I&#39;m confused as to why my object isn&#39;t getting deleted.\r\n\r\nin my main class I have the code:\r\n```\r\nArrayList&lt;User&gt; users = new ArrayList&lt;User&gt;();\r\nScanner inUserName = new Scanner(System.in);\r\n\r\nSystem.out.println(&quot;Enter a username&quot;);\r\nusername = inUserName.nextLine();\r\nif(CheckIfUsernameExists(users,username));{\r\n\tfor (User in : users){\r\n\t\tString value3 = in.showName();\r\n\t\tif(username.equals(value3)){\r\n\t\t\tSystem.out.println(in);\r\n\t\t\tloggedInUser.deleteUser(in);\r\n\t\t\tSystem.out.println(users);\r\n```\r\nand this is the code in my User class:\r\n```\r\npublic String showName(){\r\n\treturn userName;\r\n}\r\n\r\npublic void deleteUser(User currentUser){\r\nif(admin){\r\n\tcurrentUser = null;\r\n\tSystem.out.println(&quot;User succesfully deleted&quot;);\r\n}\r\n```\r\n\r\nWhen I print my current list of users once i&#39;ve ran the code it still prints the user that i&#39;ve deleted. \r\nAny help would be much appreciated!\r\nThank You.","title":"How do I remove my objects from an arraylist successfully?","body":"<p>I'm currently coding for a delete user feature and I'm confused as to why my object isn't getting deleted.</p>\n<p>in my main class I have the code:</p>\n<pre><code>ArrayList&lt;User&gt; users = new ArrayList&lt;User&gt;();\nScanner inUserName = new Scanner(System.in);\n\nSystem.out.println(&quot;Enter a username&quot;);\nusername = inUserName.nextLine();\nif(CheckIfUsernameExists(users,username));{\n    for (User in : users){\n        String value3 = in.showName();\n        if(username.equals(value3)){\n            System.out.println(in);\n            loggedInUser.deleteUser(in);\n            System.out.println(users);\n</code></pre>\n<p>and this is the code in my User class:</p>\n<pre><code>public String showName(){\n    return userName;\n}\n\npublic void deleteUser(User currentUser){\nif(admin){\n    currentUser = null;\n    System.out.println(&quot;User succesfully deleted&quot;);\n}\n</code></pre>\n<p>When I print my current list of users once i've ran the code it still prints the user that i've deleted.\nAny help would be much appreciated!\nThank You.</p>\n"},{"tags":["java","android","kotlin","data-binding"],"comments":[{"owner":{"account_id":15811107,"reputation":193,"user_id":11408158,"display_name":"devnunu"},"score":0,"creation_date":1591609445,"post_id":62257722,"comment_id":110110542,"body_markdown":"Similar to this question - https://stackoverflow.com/questions/58340113/handling-databinding-errors-when-switching-git-branch","body":"Similar to this question - <a href=\"https://stackoverflow.com/questions/58340113/handling-databinding-errors-when-switching-git-branch\" title=\"handling databinding errors when switching git branch\">stackoverflow.com/questions/58340113/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15811107,"reputation":193,"user_id":11408158,"display_name":"devnunu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1591953780,"creation_date":1591953780,"answer_id":62341314,"question_id":62257722,"body_markdown":"self answer.\r\n\r\nIn my case, after fixing the following code, the problem was solved.\r\n\r\n\r\nTo speed up the build I used the following code in gradle.properties:\r\n\r\n    org.gradle.daemon = true\r\n    org.gradle.parallel = true\r\n    org.gradle.configureondemond = true\r\n    org.gradle.caching = true\r\n\r\n\r\nBecause of this, clean did not work properly. After commenting the code, it worked.","title":"how to clean up generated data binding files?","body":"<p>self answer.</p>\n\n<p>In my case, after fixing the following code, the problem was solved.</p>\n\n<p>To speed up the build I used the following code in gradle.properties:</p>\n\n<pre><code>org.gradle.daemon = true\norg.gradle.parallel = true\norg.gradle.configureondemond = true\norg.gradle.caching = true\n</code></pre>\n\n<p>Because of this, clean did not work properly. After commenting the code, it worked.</p>\n"},{"tags":[],"owner":{"account_id":20899217,"reputation":1,"user_id":15352693,"display_name":"user15352693"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615955877,"creation_date":1615880665,"answer_id":66650885,"question_id":62257722,"body_markdown":"The same error as you.\r\nNeed change `org.gradle.caching = true` to`org.gradle.caching = false`, and then everythis is ok.  \r\n\r\nBut why?  We can&#39;t use incremental builds? What&#39;s the actual problem?  \r\n\r\n`org.gradle.caching = true` can dramatically speed up clean and incremental builds.[help provide quick build performance wins][1]\r\n\r\n  [1]: https://goobar.io/understanding-profiling-and-optimizing-gradle-in-android-builds/","title":"how to clean up generated data binding files?","body":"<p>The same error as you.\nNeed change <code>org.gradle.caching = true</code> to<code>org.gradle.caching = false</code>, and then everythis is ok.</p>\n<p>But why?  We can't use incremental builds? What's the actual problem?</p>\n<p><code>org.gradle.caching = true</code> can dramatically speed up clean and incremental builds.<a href=\"https://goobar.io/understanding-profiling-and-optimizing-gradle-in-android-builds/\" rel=\"nofollow noreferrer\">help provide quick build performance wins</a></p>\n"},{"tags":[],"owner":{"account_id":17197818,"reputation":1,"user_id":12450163,"display_name":"Rookie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700018684,"creation_date":1700018684,"answer_id":77485080,"question_id":62257722,"body_markdown":"change gradle.properties\r\n\r\n```\r\norg.gradle.daemon=false\r\norg.gradle.parallel=false\r\norg.gradle.caching=false\r\n```\r\n\r\n\r\nsync \r\n\r\nclean &amp; build ,worked for me\r\n\r\n","title":"how to clean up generated data binding files?","body":"<p>change gradle.properties</p>\n<pre><code>org.gradle.daemon=false\norg.gradle.parallel=false\norg.gradle.caching=false\n</code></pre>\n<p>sync</p>\n<p>clean &amp; build ,worked for me</p>\n"}],"owner":{"account_id":15811107,"reputation":193,"user_id":11408158,"display_name":"devnunu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62341314,"answer_count":3,"score":1,"last_activity_date":1700018684,"creation_date":1591603951,"question_id":62257722,"body_markdown":"I&#39;ve got a problem\r\n\r\nI created the activity and xml files in a git branch.\r\n\r\nCommit these tasks, and change the branch to do something else.\r\n\r\nHowever, when build app, the following error occurred.\r\n\r\n    /Users/xxxx/Desktop/product/product-app-android/app/build/generated/source/kapt/stgDebug/kr/co/product/product/databinding/ActivityDebugUserInfoBindingImpl.java:8: error: cannot find symbol\r\n\r\nActivityDebugUserInfo is the file I created in the previous branch.\r\n\r\n**There is no such file in the current branch. Nevertheless, it was created automatically**\r\n\r\nI repeated clean project and rebuild, invalid cache and restart. However, the problem was not solved.\r\n\r\nThe automatically generated file has been revived like a zombie.\r\n\r\nObviously, I think the file will be automatically generated based on some cache data.\r\n\r\nBut i don&#39;t know what it is.\r\n\r\nHow can i refresh generated databinding file?","title":"how to clean up generated data binding files?","body":"<p>I've got a problem</p>\n\n<p>I created the activity and xml files in a git branch.</p>\n\n<p>Commit these tasks, and change the branch to do something else.</p>\n\n<p>However, when build app, the following error occurred.</p>\n\n<pre><code>/Users/xxxx/Desktop/product/product-app-android/app/build/generated/source/kapt/stgDebug/kr/co/product/product/databinding/ActivityDebugUserInfoBindingImpl.java:8: error: cannot find symbol\n</code></pre>\n\n<p>ActivityDebugUserInfo is the file I created in the previous branch.</p>\n\n<p><strong>There is no such file in the current branch. Nevertheless, it was created automatically</strong></p>\n\n<p>I repeated clean project and rebuild, invalid cache and restart. However, the problem was not solved.</p>\n\n<p>The automatically generated file has been revived like a zombie.</p>\n\n<p>Obviously, I think the file will be automatically generated based on some cache data.</p>\n\n<p>But i don't know what it is.</p>\n\n<p>How can i refresh generated databinding file?</p>\n"},{"tags":["java","guava","assertion"],"comments":[{"owner":{"account_id":136796,"reputation":14752,"user_id":340556,"accept_rate":88,"display_name":"Cephalopod"},"score":1,"creation_date":1350764110,"post_id":12992244,"comment_id":17624604,"body_markdown":"use unit testing or Java&#39;s `assert` statement","body":"use unit testing or Java&#39;s <code>assert</code> statement"}],"answers":[{"comments":[{"owner":{"account_id":456649,"reputation":1367,"user_id":1333954,"accept_rate":33,"display_name":"Flo"},"score":1,"creation_date":1350764905,"post_id":12992264,"comment_id":17624735,"body_markdown":"Unit testing serves mainly public interface testing. So testing private methods for example wouldn&#39;t be so &quot;convenient&quot;. In that case I guess some form of postcondition would come handy. As it seems I have to use native java &quot;assert&quot;.","body":"Unit testing serves mainly public interface testing. So testing private methods for example wouldn&#39;t be so &quot;convenient&quot;. In that case I guess some form of postcondition would come handy. As it seems I have to use native java &quot;assert&quot;."},{"owner":{"account_id":182101,"reputation":48239,"user_id":416564,"accept_rate":100,"display_name":"Johan Sj&#246;berg"},"score":1,"creation_date":1350765021,"post_id":12992264,"comment_id":17624750,"body_markdown":"One question is *if* you [should](http://stackoverflow.com/questions/3299405/how-should-i-test-private-methods-in-java#answer-3299443) test `private` methods in the first place. One option is to change the visibility, e.g., using `protected`.","body":"One question is <i>if</i> you <a href=\"http://stackoverflow.com/questions/3299405/how-should-i-test-private-methods-in-java#answer-3299443\">should</a> test <code>private</code> methods in the first place. One option is to change the visibility, e.g., using <code>protected</code>."},{"owner":{"account_id":456649,"reputation":1367,"user_id":1333954,"accept_rate":33,"display_name":"Flo"},"score":0,"creation_date":1350765120,"post_id":12992264,"comment_id":17624768,"body_markdown":"I&#39;ve had this discussion before http://programmers.stackexchange.com/questions/153350/are-too-many-assertions-code-smell","body":"I&#39;ve had this discussion before <a href=\"http://programmers.stackexchange.com/questions/153350/are-too-many-assertions-code-smell\" title=\"are too many assertions code smell\">programmers.stackexchange.com/questions/153350/&hellip;</a>"}],"tags":[],"owner":{"account_id":182101,"reputation":48239,"user_id":416564,"accept_rate":100,"display_name":"Johan Sj&#246;berg"},"comment_count":3,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1700018486,"creation_date":1350763942,"answer_id":12992264,"question_id":12992244,"body_markdown":"Testing post-conditions would be superfluous.\r\nThe way we test post-conditions in Java is by [unit testing][1]. \r\n\r\nWith unit testing, we make sure that, for a given input, we get predictable output. With `Preconditions`, we can verify that we have valid input, and hence the output is already guaranteed by the tests. \r\n\r\n[1]: https://en.wikipedia.org/wiki/Unit_testing","title":"Why doesn&#39;t Guava have postconditions? What can I use instead?","body":"<p>Testing post-conditions would be superfluous.\nThe way we test post-conditions in Java is by <a href=\"https://en.wikipedia.org/wiki/Unit_testing\" rel=\"nofollow noreferrer\">unit testing</a>.</p>\n<p>With unit testing, we make sure that, for a given input, we get predictable output. With <code>Preconditions</code>, we can verify that we have valid input, and hence the output is already guaranteed by the tests.</p>\n"},{"comments":[{"owner":{"account_id":55217,"reputation":8498,"user_id":165292,"display_name":"avandeursen"},"score":0,"creation_date":1361392245,"post_id":12992280,"comment_id":21051380,"body_markdown":"Guava Preconditions report failures in terms of exceptions telling the client (method user) what that client did wrong (Illegal argument, null pointer, index out of bounds, illegal state). As you say, a failing postcondition, by contrast, is an indication that something went wrong within the method/server. Most likely, that will require different exceptions to be thrown, rendering the use of Guava.Preconditions less useful for checking postconditions.","body":"Guava Preconditions report failures in terms of exceptions telling the client (method user) what that client did wrong (Illegal argument, null pointer, index out of bounds, illegal state). As you say, a failing postcondition, by contrast, is an indication that something went wrong within the method/server. Most likely, that will require different exceptions to be thrown, rendering the use of Guava.Preconditions less useful for checking postconditions."}],"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":1,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1350764018,"creation_date":1350764018,"answer_id":12992280,"question_id":12992244,"body_markdown":"Preconditions and postconditions serve very different purposes.\r\n\r\nPreconditions test the input, which is not under the method&#39;s control; postconditions test the output, which is. Therefore they make no sense inside the method itself, but only as outside code that tests the method.\r\n\r\nHowever, if you really wanted to put such assertions in your code, the Guava Preconditions would serve pretty well for that, too, even if that is not their intended purpose.","title":"Why doesn&#39;t Guava have postconditions? What can I use instead?","body":"<p>Preconditions and postconditions serve very different purposes.</p>\n\n<p>Preconditions test the input, which is not under the method's control; postconditions test the output, which is. Therefore they make no sense inside the method itself, but only as outside code that tests the method.</p>\n\n<p>However, if you really wanted to put such assertions in your code, the Guava Preconditions would serve pretty well for that, too, even if that is not their intended purpose.</p>\n"},{"tags":[],"owner":{"account_id":55217,"reputation":8498,"user_id":165292,"display_name":"avandeursen"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1361402257,"creation_date":1361392071,"answer_id":14989282,"question_id":12992244,"body_markdown":"I would use the Java `assert` keyword within the method itself to encode the postcondition.\r\n\r\n**Unit Test or Postcondition?**\r\n\r\nUnit tests and postconditions serve different purposes.\r\n\r\nAn assertion in a *unit test* provides a check on the result of a method _for one input vector_. It is an oracle specifying the expected outcome for one specific case.\r\n\r\nAn `assert` *in the method* itself verifies that _for any input_ the postcondition holds. It is an oracle specifying (properties of) the expected outcome _for all possible cases_.\r\nSuch a postcondition-as-oracle combines well with automated testing techniques in which it is easy to generate inputs, but hard to generate the expected value for each input.\r\n\r\n**Guava Postconditions?**\r\n\r\nAs to why Guava has a Precondition class, but no Postcondition class, here&#39;s my understanding.\r\n\r\nGuava Preconditions effectively provides a number of shorthands for common situations in which you&#39;d want to throw a particular kind of exception (Illegal argument, null pointer, index out of bounds, illegal state) based on the method&#39;s inputs or the object&#39;s state.\r\n\r\nFor postconditions there are fewer such common cases. Hence there is less need to provide a shorthand throwing specific kinds of exceptions. A failing postcondition is like a HTTP 500 &quot;Internal Server Error&quot; -- all we know something went wrong executing our method.\r\n\r\n(Note that Guava&#39;s notion of precondition is quite different from that of pure [design-by-contract](http://se.ethz.ch/~meyer/publications/computer/contract.pdf), in which there are no guarantees at all if a precondition is not met -- not even that a reasonable exception is thrown. Guava&#39;s Preconditions class provides useful capabilities to make a public API more defensive).","title":"Why doesn&#39;t Guava have postconditions? What can I use instead?","body":"<p>I would use the Java <code>assert</code> keyword within the method itself to encode the postcondition.</p>\n\n<p><strong>Unit Test or Postcondition?</strong></p>\n\n<p>Unit tests and postconditions serve different purposes.</p>\n\n<p>An assertion in a <em>unit test</em> provides a check on the result of a method <em>for one input vector</em>. It is an oracle specifying the expected outcome for one specific case.</p>\n\n<p>An <code>assert</code> <em>in the method</em> itself verifies that <em>for any input</em> the postcondition holds. It is an oracle specifying (properties of) the expected outcome <em>for all possible cases</em>.\nSuch a postcondition-as-oracle combines well with automated testing techniques in which it is easy to generate inputs, but hard to generate the expected value for each input.</p>\n\n<p><strong>Guava Postconditions?</strong></p>\n\n<p>As to why Guava has a Precondition class, but no Postcondition class, here's my understanding.</p>\n\n<p>Guava Preconditions effectively provides a number of shorthands for common situations in which you'd want to throw a particular kind of exception (Illegal argument, null pointer, index out of bounds, illegal state) based on the method's inputs or the object's state.</p>\n\n<p>For postconditions there are fewer such common cases. Hence there is less need to provide a shorthand throwing specific kinds of exceptions. A failing postcondition is like a HTTP 500 \"Internal Server Error\" -- all we know something went wrong executing our method.</p>\n\n<p>(Note that Guava's notion of precondition is quite different from that of pure <a href=\"http://se.ethz.ch/~meyer/publications/computer/contract.pdf\">design-by-contract</a>, in which there are no guarantees at all if a precondition is not met -- not even that a reasonable exception is thrown. Guava's Preconditions class provides useful capabilities to make a public API more defensive).</p>\n"}],"owner":{"account_id":456649,"reputation":1367,"user_id":1333954,"accept_rate":33,"display_name":"Flo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2848,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":14989282,"answer_count":3,"score":20,"last_activity_date":1700018486,"creation_date":1350763789,"question_id":12992244,"body_markdown":"So, Guava has simple yet useful [Preconditions][1] to check method arguments. But I guess it would be reasonable to have a &quot;Postconditions&quot; class too. Or is it just because java provides assertions?\r\n\r\nSince a class like this doesn&#39;t exist, what is the &quot;best&quot; (practice) alternative way to check postonditions before a mathod returns?\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/23.0/api/docs/com/google/common/base/Preconditions.html","title":"Why doesn&#39;t Guava have postconditions? What can I use instead?","body":"<p>So, Guava has simple yet useful <a href=\"https://google.github.io/guava/releases/23.0/api/docs/com/google/common/base/Preconditions.html\" rel=\"nofollow noreferrer\">Preconditions</a> to check method arguments. But I guess it would be reasonable to have a \"Postconditions\" class too. Or is it just because java provides assertions?</p>\n\n<p>Since a class like this doesn't exist, what is the \"best\" (practice) alternative way to check postonditions before a mathod returns?</p>\n"},{"tags":["java","output","tostring","jooq","pojo"],"answers":[{"tags":[],"owner":{"account_id":8061597,"reputation":823,"user_id":6076979,"display_name":"MojoJojo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679248196,"creation_date":1679248196,"answer_id":75783887,"question_id":75783812,"body_markdown":"You need to `override` `toString()` method in your `POJO` class like below:\r\n```\r\n    @Data\r\n    public class Person {\r\n        public int id;\r\n        public String name;\r\n        public Integer age;\r\n        public Boolean isEmployed;\r\n        public String address;\r\n\r\n        @NonNull\r\n        @Override\r\n        public String toString() {\r\n            return &quot;id=&quot; + id + &quot;,name=&quot; + name +&quot;,age=&quot; + age + &quot;,isEmployed=&quot; + isEmployed + &quot;,address=&quot; + address;\r\n        }\r\n    }\r\n```","title":"How to remove POJO class name from the output string?","body":"<p>You need to <code>override</code> <code>toString()</code> method in your <code>POJO</code> class like below:</p>\n<pre><code>    @Data\n    public class Person {\n        public int id;\n        public String name;\n        public Integer age;\n        public Boolean isEmployed;\n        public String address;\n\n        @NonNull\n        @Override\n        public String toString() {\n            return &quot;id=&quot; + id + &quot;,name=&quot; + name +&quot;,age=&quot; + age + &quot;,isEmployed=&quot; + isEmployed + &quot;,address=&quot; + address;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3806234,"reputation":3567,"user_id":3158594,"display_name":"Joma"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679252255,"creation_date":1679252255,"answer_id":75784298,"question_id":75783812,"body_markdown":"**My solution**\r\n```\r\npackage com.company;\r\n\r\nimport lombok.Data;\r\n\r\npublic class Main {\r\n\r\n    @Data\r\n    public static class Person {\r\n\r\n        private int id;\r\n\r\n        private String name;\r\n\r\n        private Integer age;\r\n\r\n        private Boolean isEmployed;\r\n\r\n        private String address;\r\n\r\n    }\r\n\r\n    public static String getClassName(Class clazz){\r\n        if(clazz.getDeclaringClass() == null)\r\n        {\r\n            return clazz.getSimpleName();\r\n        }\r\n        return getClassName(clazz.getDeclaringClass()) + &quot;.&quot; + clazz.getSimpleName(); //Recursive - complete class name.\r\n    }\r\n\r\n    public static String toStringRemovingClassName(Object obj)\r\n    {\r\n        String pattern = String.format(&quot;^%s\\\\(|\\\\)$&quot;, getClassName(obj.getClass())); //Matches &quot;&lt;ClassName&gt;(&quot; at begin or &quot;)&quot; at end.\r\n        return obj.toString().replaceAll(pattern, &quot;&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        var person = new Person();\r\n        System.out.println(&quot;personInfo = &quot; + toStringRemovingClassName(person));\r\n        person.id = 1;\r\n        person.address = &quot;\\&quot;952 NW 80th St, Miami, FL 33150\\&quot;&quot;;\r\n        person.name = &quot;Jeff&quot;;\r\n        person.age = 30;\r\n        person.isEmployed = true;\r\n\r\n        System.out.println(&quot;personInfo = &quot; + toStringRemovingClassName(person));\r\n    }\r\n}\r\n\r\n```\r\n\r\n**Output**\r\n\r\n```\r\npersonInfo = id=0, name=null, age=null, isEmployed=null, address=null\r\npersonInfo = id=1, name=Jeff, age=30, isEmployed=true, address=&quot;952 NW 80th St, Miami, FL 33150&quot;\r\n```\r\n\r\n[![output][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gDsLy.png","title":"How to remove POJO class name from the output string?","body":"<p><strong>My solution</strong></p>\n<pre><code>package com.company;\n\nimport lombok.Data;\n\npublic class Main {\n\n    @Data\n    public static class Person {\n\n        private int id;\n\n        private String name;\n\n        private Integer age;\n\n        private Boolean isEmployed;\n\n        private String address;\n\n    }\n\n    public static String getClassName(Class clazz){\n        if(clazz.getDeclaringClass() == null)\n        {\n            return clazz.getSimpleName();\n        }\n        return getClassName(clazz.getDeclaringClass()) + &quot;.&quot; + clazz.getSimpleName(); //Recursive - complete class name.\n    }\n\n    public static String toStringRemovingClassName(Object obj)\n    {\n        String pattern = String.format(&quot;^%s\\\\(|\\\\)$&quot;, getClassName(obj.getClass())); //Matches &quot;&lt;ClassName&gt;(&quot; at begin or &quot;)&quot; at end.\n        return obj.toString().replaceAll(pattern, &quot;&quot;);\n    }\n\n    public static void main(String[] args) {\n        var person = new Person();\n        System.out.println(&quot;personInfo = &quot; + toStringRemovingClassName(person));\n        person.id = 1;\n        person.address = &quot;\\&quot;952 NW 80th St, Miami, FL 33150\\&quot;&quot;;\n        person.name = &quot;Jeff&quot;;\n        person.age = 30;\n        person.isEmployed = true;\n\n        System.out.println(&quot;personInfo = &quot; + toStringRemovingClassName(person));\n    }\n}\n\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>personInfo = id=0, name=null, age=null, isEmployed=null, address=null\npersonInfo = id=1, name=Jeff, age=30, isEmployed=true, address=&quot;952 NW 80th St, Miami, FL 33150&quot;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gDsLy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gDsLy.png\" alt=\"output\" /></a></p>\n"},{"tags":[],"owner":{"account_id":11029636,"reputation":992,"user_id":8101340,"display_name":"Radoslav Ivanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700017199,"creation_date":1698274753,"answer_id":77363293,"question_id":75783812,"body_markdown":"One could use Apache `commons-lang3` lib&#39;s `org.apache.commons.lang3.builder.ToStringBuilder` capability and specify a style without the class name, e.g.\r\n\r\n```\r\n@Override\r\npublic String toString() {\r\n  return new ToStringBuilder(this, ToStringStyle.NO_CLASS_NAME_STYLE)\r\n           .append(&quot;id&quot;, id)\r\n           .append(&quot;name&quot;, name)\r\n           .append(&quot;age&quot;, age)\r\n           .toString()\r\n}\r\n```\r\n\r\nOutput: `[id=1,name=John,age=20]`","title":"How to remove POJO class name from the output string?","body":"<p>One could use Apache <code>commons-lang3</code> lib's <code>org.apache.commons.lang3.builder.ToStringBuilder</code> capability and specify a style without the class name, e.g.</p>\n<pre><code>@Override\npublic String toString() {\n  return new ToStringBuilder(this, ToStringStyle.NO_CLASS_NAME_STYLE)\n           .append(&quot;id&quot;, id)\n           .append(&quot;name&quot;, name)\n           .append(&quot;age&quot;, age)\n           .toString()\n}\n</code></pre>\n<p>Output: <code>[id=1,name=John,age=20]</code></p>\n"}],"owner":{"account_id":27859072,"reputation":25,"user_id":21271985,"display_name":"Vipul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75784298,"answer_count":3,"score":0,"last_activity_date":1700017199,"creation_date":1679247291,"question_id":75783812,"body_markdown":"I have below POJO \r\n\r\n```\r\npackage com.beans.test;\r\n\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class Person {\r\n\r\n    private int id;\r\n\r\n    private String name;\r\n\r\n    private Integer age;\r\n\r\n    private Boolean isEmployed;\r\n\r\n    private String address;\r\n\r\n}\r\n```\r\n\r\nQuery to fetch Person info\r\n\r\n\r\n```\r\npublic class testTable {\r\n\r\npublic Person getPersonInfo(final int id) {\r\n\r\nreturn dsl.select(PERSON_INFO.NAME,\r\n                  PERSON_INFO.AGE,\r\n                  PERSON_INFO.IS_EMPLOYED,\r\n                  PERSON_INFO.ADDRESS)\r\n          .from(PERSON_INFO)\r\n          .where(PERSON_INFO.ID.equals(id))\r\n          .fetchOneInto(Person.class)\r\n}\r\n}\r\n```\r\n\r\nI need to print the output of the query as string.\r\n\r\n```\r\nPerson person = testTable.getPersonInfo(id);\r\nString personInfo = person.toString();\r\nSystem.out.println(&quot;personInfo = &quot;, personInfo);\r\n```\r\n\r\nOutput :- \r\n`\r\npersonInfo = Person(name=TestName,age=TestAge,isEmployed=true,address=TestAddress)\r\n`\r\n\r\nDesired Ouput :-\r\n`\r\npersonInfo = name=TestName,age=TestAge,isEmployed=true,address=TestAddress\r\n`\r\n\r\nHow can I remove the POJO class name from the desired output string ?(As shown in the Desired Output)","title":"How to remove POJO class name from the output string?","body":"<p>I have below POJO</p>\n<pre><code>package com.beans.test;\n\nimport lombok.Data;\n\n@Data\npublic class Person {\n\n    private int id;\n\n    private String name;\n\n    private Integer age;\n\n    private Boolean isEmployed;\n\n    private String address;\n\n}\n</code></pre>\n<p>Query to fetch Person info</p>\n<pre><code>public class testTable {\n\npublic Person getPersonInfo(final int id) {\n\nreturn dsl.select(PERSON_INFO.NAME,\n                  PERSON_INFO.AGE,\n                  PERSON_INFO.IS_EMPLOYED,\n                  PERSON_INFO.ADDRESS)\n          .from(PERSON_INFO)\n          .where(PERSON_INFO.ID.equals(id))\n          .fetchOneInto(Person.class)\n}\n}\n</code></pre>\n<p>I need to print the output of the query as string.</p>\n<pre><code>Person person = testTable.getPersonInfo(id);\nString personInfo = person.toString();\nSystem.out.println(&quot;personInfo = &quot;, personInfo);\n</code></pre>\n<p>Output :-\n<code>personInfo = Person(name=TestName,age=TestAge,isEmployed=true,address=TestAddress)</code></p>\n<p>Desired Ouput :-\n<code>personInfo = name=TestName,age=TestAge,isEmployed=true,address=TestAddress</code></p>\n<p>How can I remove the POJO class name from the desired output string ?(As shown in the Desired Output)</p>\n"},{"tags":["java","http","httpserver"],"comments":[{"owner":{"account_id":62820,"reputation":11339,"user_id":186359,"accept_rate":98,"display_name":"Matt Phillips"},"score":4,"creation_date":1284687177,"post_id":3732109,"comment_id":3941895,"body_markdown":"Umm...the short answer is no. If you want something that handles post and get requests without manually writing the http headers then you could use servlets. But thats java ee. If you don&#39;t want to use something like that then sockets and manual parsing is the only other option I know of.","body":"Umm...the short answer is no. If you want something that handles post and get requests without manually writing the http headers then you could use servlets. But thats java ee. If you don&#39;t want to use something like that then sockets and manual parsing is the only other option I know of."},{"owner":{"account_id":50535,"reputation":35297,"user_id":150771,"accept_rate":83,"display_name":"Chris Thompson"},"score":5,"creation_date":1284692731,"post_id":3732109,"comment_id":3942197,"body_markdown":"I know this isn&#39;t in the spirit of SO, but I would urge you to reconsider you distaste for Java EE API&#39;s.  As some of the answers have mentioned, there are some very straight-forward implementations such as Jetty that allow you to embed a web server in your stand-alone application while still taking advantage of the servlet api.  If you absolutely can&#39;t use the Java EE API for some reason than please disregard my comment :-)","body":"I know this isn&#39;t in the spirit of SO, but I would urge you to reconsider you distaste for Java EE API&#39;s.  As some of the answers have mentioned, there are some very straight-forward implementations such as Jetty that allow you to embed a web server in your stand-alone application while still taking advantage of the servlet api.  If you absolutely can&#39;t use the Java EE API for some reason than please disregard my comment :-)"},{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":1,"creation_date":1384883325,"post_id":3732109,"comment_id":29911444,"body_markdown":"&quot;Servlets&quot; are not really &quot;Java EE&quot;. They are just a way of writing plugins that can be called by the surrounding application in response to message activity (these days, generally HTTP requests). Providing a servlet hosting environment &quot;using just the Java SE API&quot; is exactly what Jetty and Tomcat do. Of course you may want to *throw out unwanted complexity* but then you may need to decide on a subset of the allowed attributes and configurations of the GET/POST. It&#39;s often not worth it though, except for special security/embedded problems.","body":"&quot;Servlets&quot; are not really &quot;Java EE&quot;. They are just a way of writing plugins that can be called by the surrounding application in response to message activity (these days, generally HTTP requests). Providing a servlet hosting environment &quot;using just the Java SE API&quot; is exactly what Jetty and Tomcat do. Of course you may want to <i>throw out unwanted complexity</i> but then you may need to decide on a subset of the allowed attributes and configurations of the GET/POST. It&#39;s often not worth it though, except for special security/embedded problems."},{"owner":{"display_name":"user1191027"},"score":1,"creation_date":1395226338,"post_id":3732109,"comment_id":34237096,"body_markdown":"It might be worth going through this list of http servers before making a decision. http://java-source.net/open-source/web-servers","body":"It might be worth going through this list of http servers before making a decision. <a href=\"http://java-source.net/open-source/web-servers\" rel=\"nofollow noreferrer\">java-source.net/open-source/web-servers</a>"}],"answers":[{"comments":[{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":0,"creation_date":1284692448,"post_id":3732130,"comment_id":3942181,"body_markdown":"I think jetty api depends on servlet.","body":"I think jetty api depends on servlet."},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":4,"creation_date":1284698614,"post_id":3732130,"comment_id":3942574,"body_markdown":"@Irreputable: No, Jetty is a highly modular web server, which has a servlet container as one of it&#39;s optional modules.","body":"@Irreputable: No, Jetty is a highly modular web server, which has a servlet container as one of it&#39;s optional modules."},{"owner":{"account_id":17180,"reputation":27171,"user_id":38207,"accept_rate":83,"display_name":"James Anderson"},"score":0,"creation_date":1284710804,"post_id":3732130,"comment_id":3943707,"body_markdown":"&quot;is ther an analog for server functionality&quot; -- yes its the &quot;servlet&quot; API. The servlet container calls your class after it has parsed the headers, cookies etc.","body":"&quot;is ther an analog for server functionality&quot; -- yes its the &quot;servlet&quot; API. The servlet container calls your class after it has parsed the headers, cookies etc."},{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":0,"creation_date":1284735083,"post_id":3732130,"comment_id":3947411,"body_markdown":"Software Monkey: you can&#39;t use it without servlet api. as long as we are using the silly notions of java se/ee, jetty is not se.","body":"Software Monkey: you can&#39;t use it without servlet api. as long as we are using the silly notions of java se/ee, jetty is not se."},{"owner":{"account_id":17180,"reputation":27171,"user_id":38207,"accept_rate":83,"display_name":"James Anderson"},"score":2,"creation_date":1378945261,"post_id":3732130,"comment_id":27643422,"body_markdown":"Just for the record -- Jetty comes with its own implementation of the Servlet API and works just fine with Java SE","body":"Just for the record -- Jetty comes with its own implementation of the Servlet API and works just fine with Java SE"},{"owner":{"display_name":"user1191027"},"score":4,"creation_date":1395226484,"post_id":3732130,"comment_id":34237225,"body_markdown":"Jetty is too big and has too much of a learning curve before actual production usage becomes a possibility.","body":"Jetty is too big and has too much of a learning curve before actual production usage becomes a possibility."}],"tags":[],"owner":{"account_id":17180,"reputation":27171,"user_id":38207,"accept_rate":83,"display_name":"James Anderson"},"comment_count":6,"down_vote_count":4,"up_vote_count":28,"is_accepted":false,"score":24,"last_activity_date":1437657098,"creation_date":1284687375,"answer_id":3732130,"question_id":3732109,"body_markdown":"Have a look at the &quot;Jetty&quot; web server [Jetty][1]. Superb piece of Open Source software that would seem to meet all your requirments.\r\n\r\nIf you insist on rolling your own then have a look at the &quot;httpMessage&quot; class.\r\n\r\n\r\n  [1]: https://eclipse.org/jetty/","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Have a look at the \"Jetty\" web server <a href=\"https://eclipse.org/jetty/\" rel=\"noreferrer\">Jetty</a>. Superb piece of Open Source software that would seem to meet all your requirments.</p>\n\n<p>If you insist on rolling your own then have a look at the \"httpMessage\" class.</p>\n"},{"comments":[{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":10,"creation_date":1284699117,"post_id":3732306,"comment_id":3942611,"body_markdown":"One caution: It&#39;s likely that NanoHTTPD does not have protection against tree-walking attacks - you should check this if it will be serving on a public address.  By this I mean attacks where a request like `GET /../../blahblah http/1.1` is issued and the server walks above the website root and into system file land, serving files that can be used to compromise or remotely attack the system, like a password file.","body":"One caution: It&#39;s likely that NanoHTTPD does not have protection against tree-walking attacks - you should check this if it will be serving on a public address.  By this I mean attacks where a request like <code>GET &#47;..&#47;..&#47;blahblah http&#47;1.1</code> is issued and the server walks above the website root and into system file land, serving files that can be used to compromise or remotely attack the system, like a password file."},{"owner":{"account_id":17713,"reputation":7223,"user_id":39946,"accept_rate":53,"display_name":"Lena Schimmel"},"score":9,"creation_date":1336123438,"post_id":3732306,"comment_id":13486395,"body_markdown":"That seems to be fixed. The current version generates a 403 if ( uri.startsWith( &quot;..&quot; ) || uri.endsWith( &quot;..&quot; ) || uri.indexOf( &quot;../&quot; ) &gt;= 0 ).","body":"That seems to be fixed. The current version generates a 403 if ( uri.startsWith( &quot;..&quot; ) || uri.endsWith( &quot;..&quot; ) || uri.indexOf( &quot;../&quot; ) &gt;= 0 )."},{"owner":{"account_id":1476302,"reputation":404,"user_id":1386613,"accept_rate":90,"display_name":"kimathie"},"score":13,"creation_date":1505896268,"post_id":3732306,"comment_id":79595368,"body_markdown":"I don&#39;t understand how this is an answer to this question.","body":"I don&#39;t understand how this is an answer to this question."}],"tags":[],"owner":{"account_id":41179,"reputation":9052,"user_id":119622,"accept_rate":51,"display_name":"letronje"},"comment_count":3,"down_vote_count":4,"up_vote_count":56,"is_accepted":false,"score":52,"last_activity_date":1606947137,"creation_date":1284690565,"answer_id":3732306,"question_id":3732109,"body_markdown":"Check out [NanoHttpd][1]\r\n\r\n\r\n  [1]: https://github.com/NanoHttpd/nanohttpd\r\n\r\n&gt; NanoHTTPD is a light-weight HTTP server designed for embedding in other applications, released under a Modified BSD licence.\r\n\r\nIt is being developed at Github and uses Apache Maven for builds &amp; unit testing&quot;","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Check out <a href=\"https://github.com/NanoHttpd/nanohttpd\" rel=\"noreferrer\">NanoHttpd</a></p>\n<blockquote>\n<p>NanoHTTPD is a light-weight HTTP server designed for embedding in other applications, released under a Modified BSD licence.</p>\n</blockquote>\n<p>It is being developed at Github and uses Apache Maven for builds &amp; unit testing&quot;</p>\n"},{"comments":[{"owner":{"account_id":203255,"reputation":10399,"user_id":450811,"accept_rate":77,"display_name":"Waldheinz"},"score":1,"creation_date":1294649172,"post_id":3732328,"comment_id":5113554,"body_markdown":"It&#39;s from com.sun, so it&#39;s *not* part of Java but part of the Sun JVM. You can&#39;t count on them being available. Maybe they&#39;re renamed to com.oracle next week?","body":"It&#39;s from com.sun, so it&#39;s <i>not</i> part of Java but part of the Sun JVM. You can&#39;t count on them being available. Maybe they&#39;re renamed to com.oracle next week?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":22,"creation_date":1294655828,"post_id":3732328,"comment_id":5114635,"body_markdown":"@Waldheinz: like as @Software you&#39;re confusing `sun.*` with `com.sun.*`. For instance, do you see any documentation of `sun.*` API? Look here: http://java.sun.com/products/jdk/faq/faq-sun-packages.html Does it tell anything about `com.sun.*`? The `com.sun.*` is just used for their own public software which is not part of Java API. They also develop software on top of Java API, like as every other company.","body":"@Waldheinz: like as @Software you&#39;re confusing <code>sun.*</code> with <code>com.sun.*</code>. For instance, do you see any documentation of <code>sun.*</code> API? Look here: <a href=\"http://java.sun.com/products/jdk/faq/faq-sun-packages.html\" rel=\"nofollow noreferrer\">java.sun.com/products/jdk/faq/faq-sun-packages.html</a> Does it tell anything about <code>com.sun.*</code>? The <code>com.sun.*</code> is just used for their own public software which is not part of Java API. They also develop software on top of Java API, like as every other company."},{"owner":{"account_id":203255,"reputation":10399,"user_id":450811,"accept_rate":77,"display_name":"Waldheinz"},"score":1,"creation_date":1294655941,"post_id":3732328,"comment_id":5114662,"body_markdown":"@BalusC: I would not take the presence of documentation as an guarantee that these packages are part of the Java API. I *guess* that http://java.sun.com/products/jdk/faq/faq-sun-packages.html applies to &quot;sun.*&quot; and &quot;com.sun.*&quot; equally, see also question #1331762 here on SO. Did I miss something here?","body":"@BalusC: I would not take the presence of documentation as an guarantee that these packages are part of the Java API. I <i>guess</i> that <a href=\"http://java.sun.com/products/jdk/faq/faq-sun-packages.html\" rel=\"nofollow noreferrer\">java.sun.com/products/jdk/faq/faq-sun-packages.html</a> applies to &quot;sun.*&quot; and &quot;com.sun.*&quot; equally, see also question #1331762 here on SO. Did I miss something here?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1294656048,"post_id":3732328,"comment_id":5114688,"body_markdown":"@Waldheinz: you&#39;re not the only who generalizes the both packages. Think about it for a sec :)","body":"@Waldheinz: you&#39;re not the only who generalizes the both packages. Think about it for a sec :)"},{"owner":{"account_id":9049,"reputation":16318,"user_id":16542,"accept_rate":73,"display_name":"Andreas Petersson"},"score":9,"creation_date":1343397360,"post_id":3732328,"comment_id":15498746,"body_markdown":"i think this is a very nice http server to use in integration test cases. thanks for the hint!","body":"i think this is a very nice http server to use in integration test cases. thanks for the hint!"},{"owner":{"account_id":277685,"reputation":813,"user_id":571816,"accept_rate":92,"display_name":"JIV"},"score":0,"creation_date":1348224864,"post_id":3732328,"comment_id":16867890,"body_markdown":"he asked for JAVA SE solution, for me JAVA SE means always SUN/Oracle JAVA, so +1","body":"he asked for JAVA SE solution, for me JAVA SE means always SUN/Oracle JAVA, so +1"},{"owner":{"display_name":"user484261"},"score":0,"creation_date":1355912098,"post_id":3732328,"comment_id":19238412,"body_markdown":"Its a bit extreme, but previously I extracted this into its own module since its a very nice bit of code and then its available wherever I need it (for tests only mind) - someone else has already pointed out a download: http://stackoverflow.com/a/7806273/484261","body":"Its a bit extreme, but previously I extracted this into its own module since its a very nice bit of code and then its available wherever I need it (for tests only mind) - someone else has already pointed out a download: <a href=\"http://stackoverflow.com/a/7806273/484261\">stackoverflow.com/a/7806273/484261</a>"},{"owner":{"account_id":317484,"reputation":2690,"user_id":634204,"display_name":"Samuli Pahaoja"},"score":16,"creation_date":1378806954,"post_id":3732328,"comment_id":27577233,"body_markdown":"If you&#39;re using Eclipse and get an error like &quot;Access restriction: The type HttpExchange is not accessible due to restriction on required library ...&quot;, http://stackoverflow.com/a/10642163 tells how to disable that access check.","body":"If you&#39;re using Eclipse and get an error like &quot;Access restriction: The type HttpExchange is not accessible due to restriction on required library ...&quot;, <a href=\"http://stackoverflow.com/a/10642163\">stackoverflow.com/a/10642163</a> tells how to disable that access check."},{"owner":{"account_id":1845302,"reputation":591,"user_id":1673757,"accept_rate":86,"display_name":"Niranjan Subramanian"},"score":0,"creation_date":1412743003,"post_id":3732328,"comment_id":41176363,"body_markdown":"@BalusC Is this package portable across different JREs? If not why? I created HTTP/HTTPs server using this package but I was asked to switch to Jetty since Jetty can be distributed across.","body":"@BalusC Is this package portable across different JREs? If not why? I created HTTP/HTTPs server using this package but I was asked to switch to Jetty since Jetty can be distributed across."},{"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"score":15,"creation_date":1423204651,"post_id":3732328,"comment_id":45062523,"body_markdown":"FWIW this is also present in OpenJDK.","body":"FWIW this is also present in OpenJDK."},{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":8,"creation_date":1438779741,"post_id":3732328,"comment_id":51588515,"body_markdown":"The classes referred to here are tagged `@jdk.Exported` in the OpenJDK source code which means that the API is considered public and will be available on Java 9 (some other `com.sun.*` packages will become unavailable due to Project Jigsaw).","body":"The classes referred to here are tagged <code>@jdk.Exported</code> in the OpenJDK source code which means that the API is considered public and will be available on Java 9 (some other <code>com.sun.*</code> packages will become unavailable due to Project Jigsaw)."},{"owner":{"account_id":2142017,"reputation":2275,"user_id":1900445,"accept_rate":100,"display_name":"Sajad"},"score":0,"creation_date":1438891221,"post_id":3732328,"comment_id":51648599,"body_markdown":"@BalusC Should i create a new `HttpHandler` class for each content? for example, it may i have 200 pages, should i create 200 classes?!","body":"@BalusC Should i create a new <code>HttpHandler</code> class for each content? for example, it may i have 200 pages, should i create 200 classes?!"},{"owner":{"account_id":4836704,"reputation":241,"user_id":3903117,"accept_rate":75,"display_name":"Upsilon42"},"score":0,"creation_date":1446584380,"post_id":3732328,"comment_id":54801434,"body_markdown":"Hey @BalusC, is it possible the get the full url inside the handler method? for example if I do http://localhost:8000/test?param1=value1&amp;param2=value2  ?","body":"Hey @BalusC, is it possible the get the full url inside the handler method? for example if I do <a href=\"http://localhost:8000/test?param1=value1&amp;param2=value2\" rel=\"nofollow noreferrer\">localhost:8000/test?param1=value1&amp;param2=value2</a>  ?"},{"owner":{"account_id":3888187,"reputation":5989,"user_id":3219049,"display_name":"Nikita Kurtin"},"score":1,"creation_date":1460283462,"post_id":3732328,"comment_id":60661045,"body_markdown":"@Upsilon42 Yes you can, just use: [t.getRequestURI()](https://docs.oracle.com/javase/7/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpExchange.html#getRequestURI())\n@BalusC When [HttpServer#setExecutor](https://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html#setExecutor-java.util.concurrent.Executor-) isn&#39;t called - then default is used also. So no need to call `server.setExecutor(null)`","body":"@Upsilon42 Yes you can, just use: <a href=\"https://docs.oracle.com/javase/7/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpExchange.html#getRequestURI()\" rel=\"nofollow noreferrer\">t.getRequestURI()</a> @BalusC When <a href=\"https://docs.oracle.com/javase/8/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/HttpServer.html#setExecutor-java.util.concurrent.Executor-\" rel=\"nofollow noreferrer\">HttpServer#setExecutor</a> isn&#39;t called - then default is used also. So no need to call <code>server.setExecutor(null)</code>"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1460283668,"post_id":3732328,"comment_id":60661095,"body_markdown":"@Nikita: it was a copypaste from its documentation (which is indeed poor, as pointed out below code snippet in answer).","body":"@Nikita: it was a copypaste from its documentation (which is indeed poor, as pointed out below code snippet in answer)."},{"owner":{"account_id":137257,"reputation":4974,"user_id":341320,"accept_rate":76,"display_name":"juanmirocks"},"score":0,"creation_date":1469614389,"post_id":3732328,"comment_id":64606431,"body_markdown":"To get simple GET request parameters, see this answer on SO: http://stackoverflow.com/a/17472462/341320","body":"To get simple GET request parameters, see this answer on SO: <a href=\"http://stackoverflow.com/a/17472462/341320\">stackoverflow.com/a/17472462/341320</a>"},{"owner":{"account_id":9634912,"reputation":1489,"user_id":7151380,"accept_rate":75,"display_name":"Alerra"},"score":0,"creation_date":1535166713,"post_id":3732328,"comment_id":90978034,"body_markdown":"I tried running this code and it worked fine the first time, but due to the lack of `server.stop(0)` the port was locked up and so I had to use a different port. Has anyone found a way to avoid this in case it does happen?","body":"I tried running this code and it worked fine the first time, but due to the lack of <code>server.stop(0)</code> the port was locked up and so I had to use a different port. Has anyone found a way to avoid this in case it does happen?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1535182655,"post_id":3732328,"comment_id":90980381,"body_markdown":"@Alerra: just stop the Java program.","body":"@Alerra: just stop the Java program."},{"owner":{"account_id":9634912,"reputation":1489,"user_id":7151380,"accept_rate":75,"display_name":"Alerra"},"score":0,"creation_date":1535207741,"post_id":3732328,"comment_id":90986756,"body_markdown":"@BalusC See https://stackoverflow.com/questions/928211/how-to-shutdown-com-sun-net-httpserver-httpserver At least when I run it on my computer it persists long after my Java program is ended. I made sure to include a call to `stop()` now but I think its not as simple as closing the program.","body":"@BalusC See <a href=\"https://stackoverflow.com/questions/928211/how-to-shutdown-com-sun-net-httpserver-httpserver\" title=\"how to shutdown com sun net httpserver httpserver\">stackoverflow.com/questions/928211/&hellip;</a> At least when I run it on my computer it persists long after my Java program is ended. I made sure to include a call to <code>stop()</code> now but I think its not as simple as closing the program."},{"owner":{"account_id":469868,"reputation":5329,"user_id":876739,"accept_rate":57,"display_name":"xrcwrn"},"score":0,"creation_date":1541143131,"post_id":3732328,"comment_id":93122878,"body_markdown":"@BalusC Does it handle multiple requests simultaneously It provides multithreaded feature ?","body":"@BalusC Does it handle multiple requests simultaneously It provides multithreaded feature ?"},{"owner":{"account_id":75428,"reputation":9496,"user_id":216374,"accept_rate":100,"display_name":"Alex Pakka"},"score":2,"creation_date":1555098560,"post_id":3732328,"comment_id":98005665,"body_markdown":"I will steal your way to name packages after question IDs. So far the best way to organize my answers I&#39;ve seen.","body":"I will steal your way to name packages after question IDs. So far the best way to organize my answers I&#39;ve seen."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1628112586,"post_id":3732328,"comment_id":121337505,"body_markdown":"@BalusC [JEP 403](https://openjdk.java.net/jeps/403) says the following, which seems to contradict your statement that it is okay to use the `com.sum.*` packages in general:  &quot;*Most com.sun.\\* packages in the JDK are for internal use*&quot;. But the document explicitly makes a few exceptions, including the HTTP Server API.","body":"@BalusC <a href=\"https://openjdk.java.net/jeps/403\" rel=\"nofollow noreferrer\">JEP 403</a> says the following, which seems to contradict your statement that it is okay to use the <code>com.sum.*</code> packages in general:  &quot;<i>Most com.sun.* packages in the JDK are for internal use</i>&quot;. But the document explicitly makes a few exceptions, including the HTTP Server API."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1628153959,"post_id":3732328,"comment_id":121346668,"body_markdown":"@Lii: *.. in the JDK ..*.","body":"@Lii: <i>.. in the JDK ..</i>."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1651732525,"post_id":3732328,"comment_id":127433791,"body_markdown":"@Lii All the JNDI drivers are in sub-packages of that package, and you are definitely meant to use those.","body":"@Lii All the JNDI drivers are in sub-packages of that package, and you are definitely meant to use those."},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1672598680,"post_id":3732328,"comment_id":132311302,"body_markdown":"Not sure what the restriction was, but since these were exposed via the modules since JDK-18, they could have chosen the `java.net.http` route for telling these and not unnecessarily gotten into the complication of `com.sun.*` discussion being pulled again.","body":"Not sure what the restriction was, but since these were exposed via the modules since JDK-18, they could have chosen the <code>java.net.http</code> route for telling these and not unnecessarily gotten into the complication of <code>com.sun.*</code> discussion being pulled again."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1672759318,"post_id":3732328,"comment_id":132344079,"body_markdown":"@Naman which packages (exposed since JDK-18) are you referring to?","body":"@Naman which packages (exposed since JDK-18) are you referring to?"},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1672799045,"post_id":3732328,"comment_id":132353493,"body_markdown":"@Holger I was referring to the package `com.sun.net.httpserver` of `jdk.httpserver` module in the context of a [Simple Web Server](https://openjdk.org/jeps/408).","body":"@Holger I was referring to the package <code>com.sun.net.httpserver</code> of <code>jdk.httpserver</code> module in the context of a <a href=\"https://openjdk.org/jeps/408\" rel=\"nofollow noreferrer\">Simple Web Server</a>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1672819923,"post_id":3732328,"comment_id":132356843,"body_markdown":"@Naman but, at this answer said, this package exists since Java&#160;6 and has been exposed as official API since JDK&#160;9. Nothing has changed in JDK&#160;18 in this regard. Just some new classes were added to the already existing module/package.","body":"@Naman but, at this answer said, this package exists since Java 6 and has been exposed as official API since JDK 9. Nothing has changed in JDK 18 in this regard. Just some new classes were added to the already existing module/package."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":28,"down_vote_count":5,"up_vote_count":583,"is_accepted":false,"score":578,"last_activity_date":1643188597,"creation_date":1284690854,"answer_id":3732328,"question_id":3732109,"body_markdown":"Since Java SE 6, there&#39;s a builtin HTTP server in &lt;strike&gt;Sun&lt;/strike&gt; Oracle JRE. The Java 9 module name is [`jdk.httpserver`][1]. The [`com.sun.net.httpserver` package summary][2] outlines the involved classes and contains examples.\r\n\r\nHere&#39;s a kickoff example **copypasted** from their docs. You can just copy&#39;n&#39;paste&#39;n&#39;run it on Java 6+.  \r\n&lt;sub&gt;*(to all people trying to edit it nonetheless, because it&#39;s an ugly piece of code, please don&#39;t, this is a copy paste, not mine, moreover you should never edit quotations unless they have changed in the original source)*&lt;/sub&gt;\r\n\r\n&gt;     package com.stackoverflow.q3732109;\r\n&gt;     \r\n&gt;     import java.io.IOException;\r\n&gt;     import java.io.OutputStream;\r\n&gt;     import java.net.InetSocketAddress;\r\n&gt;     \r\n&gt;     import com.sun.net.httpserver.HttpExchange;\r\n&gt;     import com.sun.net.httpserver.HttpHandler;\r\n&gt;     import com.sun.net.httpserver.HttpServer;\r\n&gt;     \r\n&gt;     public class Test {\r\n&gt;     \r\n&gt;         public static void main(String[] args) throws Exception {\r\n&gt;             HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);\r\n&gt;             server.createContext(&quot;/test&quot;, new MyHandler());\r\n&gt;             server.setExecutor(null); // creates a default executor\r\n&gt;             server.start();\r\n&gt;         }\r\n&gt;     \r\n&gt;         static class MyHandler implements HttpHandler {\r\n&gt;             @Override\r\n&gt;             public void handle(HttpExchange t) throws IOException {\r\n&gt;                 String response = &quot;This is the response&quot;;\r\n&gt;                 t.sendResponseHeaders(200, response.length());\r\n&gt;                 OutputStream os = t.getResponseBody();\r\n&gt;                 os.write(response.getBytes());\r\n&gt;                 os.close();\r\n&gt;             }\r\n&gt;         }\r\n&gt; \r\n&gt;     }\r\n\r\nNoted should be that the `response.length()` part in their example is bad, it should have been `response.getBytes().length`. Even then, the `getBytes()` method must explicitly specify the charset which you then specify in the response header. Alas, albeit misguiding to starters, it&#39;s after all just a basic kickoff example.\r\n\r\nExecute it and go to http://localhost:8000/test and you&#39;ll see the following response:\r\n\r\n&gt; This is the response\r\n\r\n---\r\n\r\nAs to using `com.sun.*` classes, do note that this is, in contrary to what some developers think, absolutely not forbidden by the well known FAQ [Why Developers Should Not Write Programs That Call &#39;sun&#39; Packages][3]. That FAQ concerns the `sun.*` package (such as `sun.misc.BASE64Encoder`) for internal usage by the Oracle JRE (which would thus kill your application when you run it on a different JRE), not the `com.sun.*` package. Sun/Oracle also just develop software on top of the Java SE API themselves like as every other company such as Apache and so on. Moreover, this specific `HttpServer` must be present in every JDK so there is absolutely no means of &quot;portability&quot; issue like as would happen with `sun.*` package. Using `com.sun.*` classes is only *discouraged* (but not *forbidden*) when it concerns an **implementation** of a certain Java API, such as GlassFish (Java EE impl), Mojarra (JSF impl), Jersey (JAX-RS impl), etc.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/module-summary.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/package-summary.html\r\n  [3]: https://www.oracle.com/java/technologies/faq-sun-packages.html","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Since Java SE 6, there's a builtin HTTP server in <strike>Sun</strike> Oracle JRE. The Java 9 module name is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/module-summary.html\" rel=\"noreferrer\"><code>jdk.httpserver</code></a>. The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/package-summary.html\" rel=\"noreferrer\"><code>com.sun.net.httpserver</code> package summary</a> outlines the involved classes and contains examples.</p>\n<p>Here's a kickoff example <strong>copypasted</strong> from their docs. You can just copy'n'paste'n'run it on Java 6+.<br />\n<sub><em>(to all people trying to edit it nonetheless, because it's an ugly piece of code, please don't, this is a copy paste, not mine, moreover you should never edit quotations unless they have changed in the original source)</em></sub></p>\n<blockquote>\n<pre><code>package com.stackoverflow.q3732109;\n\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.net.InetSocketAddress;\n\nimport com.sun.net.httpserver.HttpExchange;\nimport com.sun.net.httpserver.HttpHandler;\nimport com.sun.net.httpserver.HttpServer;\n\npublic class Test {\n\n    public static void main(String[] args) throws Exception {\n        HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);\n        server.createContext(&quot;/test&quot;, new MyHandler());\n        server.setExecutor(null); // creates a default executor\n        server.start();\n    }\n\n    static class MyHandler implements HttpHandler {\n        @Override\n        public void handle(HttpExchange t) throws IOException {\n            String response = &quot;This is the response&quot;;\n            t.sendResponseHeaders(200, response.length());\n            OutputStream os = t.getResponseBody();\n            os.write(response.getBytes());\n            os.close();\n        }\n    }\n\n}\n</code></pre>\n</blockquote>\n<p>Noted should be that the <code>response.length()</code> part in their example is bad, it should have been <code>response.getBytes().length</code>. Even then, the <code>getBytes()</code> method must explicitly specify the charset which you then specify in the response header. Alas, albeit misguiding to starters, it's after all just a basic kickoff example.</p>\n<p>Execute it and go to http://localhost:8000/test and you'll see the following response:</p>\n<blockquote>\n<p>This is the response</p>\n</blockquote>\n<hr />\n<p>As to using <code>com.sun.*</code> classes, do note that this is, in contrary to what some developers think, absolutely not forbidden by the well known FAQ <a href=\"https://www.oracle.com/java/technologies/faq-sun-packages.html\" rel=\"noreferrer\">Why Developers Should Not Write Programs That Call 'sun' Packages</a>. That FAQ concerns the <code>sun.*</code> package (such as <code>sun.misc.BASE64Encoder</code>) for internal usage by the Oracle JRE (which would thus kill your application when you run it on a different JRE), not the <code>com.sun.*</code> package. Sun/Oracle also just develop software on top of the Java SE API themselves like as every other company such as Apache and so on. Moreover, this specific <code>HttpServer</code> must be present in every JDK so there is absolutely no means of &quot;portability&quot; issue like as would happen with <code>sun.*</code> package. Using <code>com.sun.*</code> classes is only <em>discouraged</em> (but not <em>forbidden</em>) when it concerns an <strong>implementation</strong> of a certain Java API, such as GlassFish (Java EE impl), Mojarra (JSF impl), Jersey (JAX-RS impl), etc.</p>\n"},{"comments":[{"owner":{"display_name":"user1191027"},"score":0,"creation_date":1395229221,"post_id":3737952,"comment_id":34238965,"body_markdown":"+1. I like the ideas behind Simple. However, problems come in when attempting to use HTTPS because Mamba takes away the &quot;embeddable&quot; feature from Simple.","body":"+1. I like the ideas behind Simple. However, problems come in when attempting to use HTTPS because Mamba takes away the &quot;embeddable&quot; feature from Simple."}],"tags":[],"owner":{"account_id":203255,"reputation":10399,"user_id":450811,"accept_rate":77,"display_name":"Waldheinz"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1606939962,"creation_date":1284748180,"answer_id":3737952,"question_id":3732109,"body_markdown":"I can strongly recommend looking into [Simple][1], especially if you don&#39;t need Servlet capabilities but simply access to the request/reponse objects. If you need REST you can put Jersey on top of it, if you need to output HTML or similar there&#39;s Freemarker. I really love what you can do with this combination, and there is relatively little API to learn.\r\n\r\n\r\n  [1]: https://github.com/ngallagher/simpleframework","title":"Simple HTTP server in Java using only Java SE API","body":"<p>I can strongly recommend looking into <a href=\"https://github.com/ngallagher/simpleframework\" rel=\"nofollow noreferrer\">Simple</a>, especially if you don't need Servlet capabilities but simply access to the request/reponse objects. If you need REST you can put Jersey on top of it, if you need to output HTML or similar there's Freemarker. I really love what you can do with this combination, and there is relatively little API to learn.</p>\n"},{"tags":[],"owner":{"account_id":32452,"reputation":385,"user_id":90101,"display_name":"ThiamTeck"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1284811497,"creation_date":1284811497,"answer_id":3741635,"question_id":3732109,"body_markdown":"You may also have a look at some NIO application framework such as: \r\n\r\n1. Netty: http://jboss.org/netty\r\n2. Apache Mina: http://mina.apache.org/ or its subproject AsyncWeb: http://mina.apache.org/asyncweb/","title":"Simple HTTP server in Java using only Java SE API","body":"<p>You may also have a look at some NIO application framework such as: </p>\n\n<ol>\n<li>Netty: <a href=\"http://jboss.org/netty\" rel=\"noreferrer\">http://jboss.org/netty</a></li>\n<li>Apache Mina: <a href=\"http://mina.apache.org/\" rel=\"noreferrer\">http://mina.apache.org/</a> or its subproject AsyncWeb: <a href=\"http://mina.apache.org/asyncweb/\" rel=\"noreferrer\">http://mina.apache.org/asyncweb/</a></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1101381,"reputation":2436,"user_id":1093710,"accept_rate":95,"display_name":"Sridhar"},"score":4,"creation_date":1347897506,"post_id":12446525,"comment_id":16762489,"body_markdown":"The question asks for a purely Java SE solution. You&#39;ll find that jetty implements the Java EE API.","body":"The question asks for a purely Java SE solution. You&#39;ll find that jetty implements the Java EE API."},{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":0,"creation_date":1384881855,"post_id":12446525,"comment_id":29910606,"body_markdown":"Jetty runs perfectly well using standard Java SE and therefore fits the requirements. It *implements* parts of the Java EE API, it does not *need* it. There is a difference.","body":"Jetty runs perfectly well using standard Java SE and therefore fits the requirements. It <i>implements</i> parts of the Java EE API, it does not <i>need</i> it. There is a difference."},{"owner":{"account_id":1886487,"reputation":396597,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"score":2,"creation_date":1409921666,"post_id":12446525,"comment_id":40145036,"body_markdown":"This does not qualify. _&quot;using just the Java SE API&quot;_. `*.Servlet.jar` and `*.jetty.jar` are obviously not part of Java SE.","body":"This does not qualify. <i>&quot;using just the Java SE API&quot;</i>. <code>*.Servlet.jar</code> and <code>*.jetty.jar</code> are obviously not part of Java SE."},{"owner":{"account_id":472492,"reputation":4152,"user_id":1127753,"accept_rate":30,"display_name":"Paul Preibisch"},"score":0,"creation_date":1427132508,"post_id":12446525,"comment_id":46642769,"body_markdown":"do i need to set jetty up? or can I just unclude those two jars and run this file?","body":"do i need to set jetty up? or can I just unclude those two jars and run this file?"}],"tags":[],"owner":{"account_id":1848411,"reputation":61,"user_id":1675561,"display_name":"leandro"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1348223700,"creation_date":1347795405,"answer_id":12446525,"question_id":3732109,"body_markdown":"This code is better than ours, you only need to add 2 libs: **javax.servelet.jar** and **org.mortbay.jetty.jar**. \r\n    \r\nClass Jetty:\r\n     \r\n    package jetty;\r\n    \r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import org.mortbay.http.SocketListener;\r\n    import org.mortbay.jetty.Server;\r\n    import org.mortbay.jetty.servlet.ServletHttpContext;\r\n    \r\n    public class Jetty {\r\n    \r\n        public static void main(String[] args) {\r\n            try {\r\n                Server server = new Server();\r\n                SocketListener listener = new SocketListener();      \r\n                \r\n                System.out.println(&quot;Max Thread :&quot; + listener.getMaxThreads() + &quot; Min Thread :&quot; + listener.getMinThreads());\r\n                \r\n                listener.setHost(&quot;localhost&quot;);\r\n                listener.setPort(8070);\r\n                listener.setMinThreads(5);\r\n                listener.setMaxThreads(250);\r\n                server.addListener(listener);            \r\n    \r\n                ServletHttpContext context = (ServletHttpContext) server.getContext(&quot;/&quot;);\r\n                context.addServlet(&quot;/MO&quot;, &quot;jetty.HelloWorldServlet&quot;);\r\n                \r\n                server.start();\r\n                server.join();\r\n               \r\n            /*//We will create our server running at http://localhost:8070\r\n            Server server = new Server();\r\n            server.addListener(&quot;:8070&quot;);\r\n    \r\n            //We will deploy our servlet to the server at the path &#39;/&#39;\r\n            //it will be available at http://localhost:8070\r\n            ServletHttpContext context = (ServletHttpContext) server.getContext(&quot;/&quot;);\r\n            context.addServlet(&quot;/MO&quot;, &quot;jetty.HelloWorldServlet&quot;);\r\n    \r\n            server.start();\r\n            */\r\n                \r\n            } catch (Exception ex) {\r\n                Logger.getLogger(Jetty.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n            \r\n        }\r\n    } \r\n    \r\nServlet class:    \r\n    \r\n    package jetty;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    public class HelloWorldServlet extends HttpServlet\r\n    {\r\n        @Override\r\n        protected void doGet(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException\r\n        {\r\n            String appid = httpServletRequest.getParameter(&quot;appid&quot;);\r\n            String conta = httpServletRequest.getParameter(&quot;conta&quot;);\r\n            \r\n            System.out.println(&quot;Appid : &quot;+appid);\r\n            System.out.println(&quot;Conta : &quot;+conta);\r\n            \r\n            httpServletResponse.setContentType(&quot;text/plain&quot;);\r\n            PrintWriter out = httpServletResponse.getWriter();\r\n            out.println(&quot;Hello World!&quot;);\r\n            out.close();\r\n        }\r\n    }\r\n\r\n","title":"Simple HTTP server in Java using only Java SE API","body":"<p>This code is better than ours, you only need to add 2 libs: <strong>javax.servelet.jar</strong> and <strong>org.mortbay.jetty.jar</strong>. </p>\n\n<p>Class Jetty:</p>\n\n<pre><code>package jetty;\n\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport org.mortbay.http.SocketListener;\nimport org.mortbay.jetty.Server;\nimport org.mortbay.jetty.servlet.ServletHttpContext;\n\npublic class Jetty {\n\n    public static void main(String[] args) {\n        try {\n            Server server = new Server();\n            SocketListener listener = new SocketListener();      \n\n            System.out.println(\"Max Thread :\" + listener.getMaxThreads() + \" Min Thread :\" + listener.getMinThreads());\n\n            listener.setHost(\"localhost\");\n            listener.setPort(8070);\n            listener.setMinThreads(5);\n            listener.setMaxThreads(250);\n            server.addListener(listener);            \n\n            ServletHttpContext context = (ServletHttpContext) server.getContext(\"/\");\n            context.addServlet(\"/MO\", \"jetty.HelloWorldServlet\");\n\n            server.start();\n            server.join();\n\n        /*//We will create our server running at http://localhost:8070\n        Server server = new Server();\n        server.addListener(\":8070\");\n\n        //We will deploy our servlet to the server at the path '/'\n        //it will be available at http://localhost:8070\n        ServletHttpContext context = (ServletHttpContext) server.getContext(\"/\");\n        context.addServlet(\"/MO\", \"jetty.HelloWorldServlet\");\n\n        server.start();\n        */\n\n        } catch (Exception ex) {\n            Logger.getLogger(Jetty.class.getName()).log(Level.SEVERE, null, ex);\n        }\n\n    }\n} \n</code></pre>\n\n<p>Servlet class:    </p>\n\n<pre><code>package jetty;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class HelloWorldServlet extends HttpServlet\n{\n    @Override\n    protected void doGet(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException\n    {\n        String appid = httpServletRequest.getParameter(\"appid\");\n        String conta = httpServletRequest.getParameter(\"conta\");\n\n        System.out.println(\"Appid : \"+appid);\n        System.out.println(\"Conta : \"+conta);\n\n        httpServletResponse.setContentType(\"text/plain\");\n        PrintWriter out = httpServletResponse.getWriter();\n        out.println(\"Hello World!\");\n        out.close();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":474651,"reputation":14676,"user_id":884463,"accept_rate":89,"display_name":"David Tonhofer"},"score":0,"creation_date":1384882531,"post_id":14821546,"comment_id":29911003,"body_markdown":"That is probably too low-level. One should at least aim for a solution that calls your code at the servlet API level, unless one wants to deal with all the concepts like chunking, encoding etc. onself. It can be fun though.","body":"That is probably too low-level. One should at least aim for a solution that calls your code at the servlet API level, unless one wants to deal with all the concepts like chunking, encoding etc. onself. It can be fun though."}],"tags":[],"owner":{"account_id":105959,"reputation":590,"user_id":1263169,"accept_rate":29,"display_name":"Iqbal"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1360619562,"creation_date":1360619562,"answer_id":14821546,"question_id":3732109,"body_markdown":"How about Apache Commons [HttpCore][1] project? \r\n\r\nFrom the web site:...\r\nHttpCore Goals\r\n\r\n - Implementation of the most fundamental HTTP transport aspects\r\n - Balance between good performance and the clarity &amp; expressiveness of\r\n   API\r\n - Small (predictable) memory footprint\r\n - Self contained library (no external dependencies beyond JRE)\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-core-ga/index.html","title":"Simple HTTP server in Java using only Java SE API","body":"<p>How about Apache Commons <a href=\"http://hc.apache.org/httpcomponents-core-ga/index.html\" rel=\"nofollow\">HttpCore</a> project? </p>\n\n<p>From the web site:...\nHttpCore Goals</p>\n\n<ul>\n<li>Implementation of the most fundamental HTTP transport aspects</li>\n<li>Balance between good performance and the clarity &amp; expressiveness of\nAPI</li>\n<li>Small (predictable) memory footprint</li>\n<li>Self contained library (no external dependencies beyond JRE)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1389524,"reputation":1323,"user_id":1320704,"accept_rate":95,"display_name":"HomeIsWhereThePcIs"},"score":1,"creation_date":1574248478,"post_id":20261540,"comment_id":104161926,"body_markdown":"This is missing some methods on ServletOutputStream and ServletInputStream","body":"This is missing some methods on ServletOutputStream and ServletInputStream"},{"owner":{"account_id":2721990,"reputation":455,"user_id":2348095,"display_name":"f.carlsen"},"score":0,"creation_date":1584597302,"post_id":20261540,"comment_id":107486259,"body_markdown":"newer version of servlet api, above fits 3.0 and below.  Just add missing methdos as needed into the example","body":"newer version of servlet api, above fits 3.0 and below.  Just add missing methdos as needed into the example"}],"tags":[],"owner":{"account_id":2721990,"reputation":455,"user_id":2348095,"display_name":"f.carlsen"},"comment_count":2,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1385628950,"creation_date":1385628950,"answer_id":20261540,"question_id":3732109,"body_markdown":"It&#39;s possible to create an httpserver that provides basic support for J2EE servlets with just the JDK and the servlet api in a just a few lines of code.  \r\n\r\nI&#39;ve found this very useful for unit testing servlets, as it starts much faster than other lightweight containers (we use jetty for production). \r\n\r\nMost very lightweight httpservers do not provide support for servlets, but we need them, so I thought I&#39;d share.\r\n\r\nThe below example provides basic servlet support, or throws and UnsupportedOperationException for stuff not yet implemented.  It uses the com.sun.net.httpserver.HttpServer for basic http support.\r\n\r\n    \r\n    \r\n    import java.io.*;\r\n    import java.lang.reflect.*;\r\n    import java.net.InetSocketAddress;\r\n    import java.util.*;\r\n    \r\n    import javax.servlet.*;\r\n    import javax.servlet.http.*;\r\n    \r\n    import com.sun.net.httpserver.HttpExchange;\r\n    import com.sun.net.httpserver.HttpHandler;\r\n    import com.sun.net.httpserver.HttpServer;\r\n    \r\n    @SuppressWarnings(&quot;deprecation&quot;)\r\n    public class VerySimpleServletHttpServer {\r\n        HttpServer server;\r\n        private String contextPath;\r\n        private HttpHandler httpHandler;\r\n    \r\n        public VerySimpleServletHttpServer(String contextPath, HttpServlet servlet) {\r\n            this.contextPath = contextPath;\r\n            httpHandler = new HttpHandlerWithServletSupport(servlet);\r\n        }\r\n    \r\n        public void start(int port) throws IOException {\r\n            InetSocketAddress inetSocketAddress = new InetSocketAddress(port);\r\n            server = HttpServer.create(inetSocketAddress, 0);\r\n            server.createContext(contextPath, httpHandler);\r\n            server.setExecutor(null);\r\n            server.start();\r\n        }\r\n    \r\n        public void stop(int secondsDelay) {\r\n            server.stop(secondsDelay);\r\n        }\r\n    \r\n        public int getServerPort() {\r\n            return server.getAddress().getPort();\r\n        }\r\n    \r\n    }\r\n    \r\n    final class HttpHandlerWithServletSupport implements HttpHandler {\r\n    \r\n        private HttpServlet servlet;\r\n    \r\n        private final class RequestWrapper extends HttpServletRequestWrapper {\r\n            private final HttpExchange ex;\r\n            private final Map&lt;String, String[]&gt; postData;\r\n            private final ServletInputStream is;\r\n            private final Map&lt;String, Object&gt; attributes = new HashMap&lt;&gt;();\r\n    \r\n            private RequestWrapper(HttpServletRequest request, HttpExchange ex, Map&lt;String, String[]&gt; postData, ServletInputStream is) {\r\n                super(request);\r\n                this.ex = ex;\r\n                this.postData = postData;\r\n                this.is = is;\r\n            }\r\n    \r\n            @Override\r\n            public String getHeader(String name) {\r\n                return ex.getRequestHeaders().getFirst(name);\r\n            }\r\n    \r\n            @Override\r\n            public Enumeration&lt;String&gt; getHeaders(String name) {\r\n                return new Vector&lt;String&gt;(ex.getRequestHeaders().get(name)).elements();\r\n            }\r\n    \r\n            @Override\r\n            public Enumeration&lt;String&gt; getHeaderNames() {\r\n                return new Vector&lt;String&gt;(ex.getRequestHeaders().keySet()).elements();\r\n            }\r\n    \r\n            @Override\r\n            public Object getAttribute(String name) {\r\n                return attributes.get(name);\r\n            }\r\n    \r\n            @Override\r\n            public void setAttribute(String name, Object o) {\r\n                this.attributes.put(name, o);\r\n            }\r\n    \r\n            @Override\r\n            public Enumeration&lt;String&gt; getAttributeNames() {\r\n                return new Vector&lt;String&gt;(attributes.keySet()).elements();\r\n            }\r\n    \r\n            @Override\r\n            public String getMethod() {\r\n                return ex.getRequestMethod();\r\n            }\r\n    \r\n            @Override\r\n            public ServletInputStream getInputStream() throws IOException {\r\n                return is;\r\n            }\r\n    \r\n            @Override\r\n            public BufferedReader getReader() throws IOException {\r\n                return new BufferedReader(new InputStreamReader(getInputStream()));\r\n            }\r\n    \r\n            @Override\r\n            public String getPathInfo() {\r\n                return ex.getRequestURI().getPath();\r\n            }\r\n    \r\n            @Override\r\n            public String getParameter(String name) {\r\n                String[] arr = postData.get(name);\r\n                return arr != null ? (arr.length &gt; 1 ? Arrays.toString(arr) : arr[0]) : null;\r\n            }\r\n    \r\n            @Override\r\n            public Map&lt;String, String[]&gt; getParameterMap() {\r\n                return postData;\r\n            }\r\n    \r\n            @Override\r\n            public Enumeration&lt;String&gt; getParameterNames() {\r\n                return new Vector&lt;String&gt;(postData.keySet()).elements();\r\n            }\r\n        }\r\n    \r\n        private final class ResponseWrapper extends HttpServletResponseWrapper {\r\n            final ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n            final ServletOutputStream servletOutputStream = new ServletOutputStream() {\r\n    \r\n                @Override\r\n                public void write(int b) throws IOException {\r\n                    outputStream.write(b);\r\n                }\r\n            };\r\n    \r\n            private final HttpExchange ex;\r\n            private final PrintWriter printWriter;\r\n            private int status = HttpServletResponse.SC_OK;\r\n    \r\n            private ResponseWrapper(HttpServletResponse response, HttpExchange ex) {\r\n                super(response);\r\n                this.ex = ex;\r\n                printWriter = new PrintWriter(servletOutputStream);\r\n            }\r\n    \r\n            @Override\r\n            public void setContentType(String type) {\r\n                ex.getResponseHeaders().add(&quot;Content-Type&quot;, type);\r\n            }\r\n    \r\n            @Override\r\n            public void setHeader(String name, String value) {\r\n                ex.getResponseHeaders().add(name, value);\r\n            }\r\n    \r\n            @Override\r\n            public javax.servlet.ServletOutputStream getOutputStream() throws IOException {\r\n                return servletOutputStream;\r\n            }\r\n    \r\n            @Override\r\n            public void setContentLength(int len) {\r\n                ex.getResponseHeaders().add(&quot;Content-Length&quot;, len + &quot;&quot;);\r\n            }\r\n    \r\n            @Override\r\n            public void setStatus(int status) {\r\n                this.status = status;\r\n            }\r\n    \r\n            @Override\r\n            public void sendError(int sc, String msg) throws IOException {\r\n                this.status = sc;\r\n                if (msg != null) {\r\n                    printWriter.write(msg);\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public void sendError(int sc) throws IOException {\r\n                sendError(sc, null);\r\n            }\r\n    \r\n            @Override\r\n            public PrintWriter getWriter() throws IOException {\r\n                return printWriter;\r\n            }\r\n    \r\n            public void complete() throws IOException {\r\n                try {\r\n                    printWriter.flush();\r\n                    ex.sendResponseHeaders(status, outputStream.size());\r\n                    if (outputStream.size() &gt; 0) {\r\n                        ex.getResponseBody().write(outputStream.toByteArray());\r\n                    }\r\n                    ex.getResponseBody().flush();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    ex.close();\r\n                }\r\n            }\r\n        }\r\n    \r\n        public HttpHandlerWithServletSupport(HttpServlet servlet) {\r\n            this.servlet = servlet;\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;deprecation&quot;)\r\n        @Override\r\n        public void handle(final HttpExchange ex) throws IOException {\r\n            byte[] inBytes = getBytes(ex.getRequestBody());\r\n            ex.getRequestBody().close();\r\n            final ByteArrayInputStream newInput = new ByteArrayInputStream(inBytes);\r\n            final ServletInputStream is = new ServletInputStream() {\r\n    \r\n                @Override\r\n                public int read() throws IOException {\r\n                    return newInput.read();\r\n                }\r\n            };\r\n    \r\n            Map&lt;String, String[]&gt; parsePostData = new HashMap&lt;&gt;();\r\n    \r\n            try {\r\n                parsePostData.putAll(HttpUtils.parseQueryString(ex.getRequestURI().getQuery()));\r\n    \r\n                // check if any postdata to parse\r\n                parsePostData.putAll(HttpUtils.parsePostData(inBytes.length, is));\r\n            } catch (IllegalArgumentException e) {\r\n                // no postData - just reset inputstream\r\n                newInput.reset();\r\n            }\r\n            final Map&lt;String, String[]&gt; postData = parsePostData;\r\n    \r\n            RequestWrapper req = new RequestWrapper(createUnimplementAdapter(HttpServletRequest.class), ex, postData, is);\r\n    \r\n            ResponseWrapper resp = new ResponseWrapper(createUnimplementAdapter(HttpServletResponse.class), ex);\r\n    \r\n            try {\r\n                servlet.service(req, resp);\r\n                resp.complete();\r\n            } catch (ServletException e) {\r\n                throw new IOException(e);\r\n            }\r\n        }\r\n    \r\n        private static byte[] getBytes(InputStream in) throws IOException {\r\n            ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n            byte[] buffer = new byte[1024];\r\n            while (true) {\r\n                int r = in.read(buffer);\r\n                if (r == -1)\r\n                    break;\r\n                out.write(buffer, 0, r);\r\n            }\r\n            return out.toByteArray();\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        private static &lt;T&gt; T createUnimplementAdapter(Class&lt;T&gt; httpServletApi) {\r\n            class UnimplementedHandler implements InvocationHandler {\r\n                @Override\r\n                public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n                    throw new UnsupportedOperationException(&quot;Not implemented: &quot; + method + &quot;, args=&quot; + Arrays.toString(args));\r\n                }\r\n            }\r\n    \r\n            return (T) Proxy.newProxyInstance(UnimplementedHandler.class.getClassLoader(),\r\n                    new Class&lt;?&gt;[] { httpServletApi },\r\n                    new UnimplementedHandler());\r\n        }\r\n    }","title":"Simple HTTP server in Java using only Java SE API","body":"<p>It's possible to create an httpserver that provides basic support for J2EE servlets with just the JDK and the servlet api in a just a few lines of code.  </p>\n\n<p>I've found this very useful for unit testing servlets, as it starts much faster than other lightweight containers (we use jetty for production). </p>\n\n<p>Most very lightweight httpservers do not provide support for servlets, but we need them, so I thought I'd share.</p>\n\n<p>The below example provides basic servlet support, or throws and UnsupportedOperationException for stuff not yet implemented.  It uses the com.sun.net.httpserver.HttpServer for basic http support.</p>\n\n<pre><code>import java.io.*;\nimport java.lang.reflect.*;\nimport java.net.InetSocketAddress;\nimport java.util.*;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\n\nimport com.sun.net.httpserver.HttpExchange;\nimport com.sun.net.httpserver.HttpHandler;\nimport com.sun.net.httpserver.HttpServer;\n\n@SuppressWarnings(\"deprecation\")\npublic class VerySimpleServletHttpServer {\n    HttpServer server;\n    private String contextPath;\n    private HttpHandler httpHandler;\n\n    public VerySimpleServletHttpServer(String contextPath, HttpServlet servlet) {\n        this.contextPath = contextPath;\n        httpHandler = new HttpHandlerWithServletSupport(servlet);\n    }\n\n    public void start(int port) throws IOException {\n        InetSocketAddress inetSocketAddress = new InetSocketAddress(port);\n        server = HttpServer.create(inetSocketAddress, 0);\n        server.createContext(contextPath, httpHandler);\n        server.setExecutor(null);\n        server.start();\n    }\n\n    public void stop(int secondsDelay) {\n        server.stop(secondsDelay);\n    }\n\n    public int getServerPort() {\n        return server.getAddress().getPort();\n    }\n\n}\n\nfinal class HttpHandlerWithServletSupport implements HttpHandler {\n\n    private HttpServlet servlet;\n\n    private final class RequestWrapper extends HttpServletRequestWrapper {\n        private final HttpExchange ex;\n        private final Map&lt;String, String[]&gt; postData;\n        private final ServletInputStream is;\n        private final Map&lt;String, Object&gt; attributes = new HashMap&lt;&gt;();\n\n        private RequestWrapper(HttpServletRequest request, HttpExchange ex, Map&lt;String, String[]&gt; postData, ServletInputStream is) {\n            super(request);\n            this.ex = ex;\n            this.postData = postData;\n            this.is = is;\n        }\n\n        @Override\n        public String getHeader(String name) {\n            return ex.getRequestHeaders().getFirst(name);\n        }\n\n        @Override\n        public Enumeration&lt;String&gt; getHeaders(String name) {\n            return new Vector&lt;String&gt;(ex.getRequestHeaders().get(name)).elements();\n        }\n\n        @Override\n        public Enumeration&lt;String&gt; getHeaderNames() {\n            return new Vector&lt;String&gt;(ex.getRequestHeaders().keySet()).elements();\n        }\n\n        @Override\n        public Object getAttribute(String name) {\n            return attributes.get(name);\n        }\n\n        @Override\n        public void setAttribute(String name, Object o) {\n            this.attributes.put(name, o);\n        }\n\n        @Override\n        public Enumeration&lt;String&gt; getAttributeNames() {\n            return new Vector&lt;String&gt;(attributes.keySet()).elements();\n        }\n\n        @Override\n        public String getMethod() {\n            return ex.getRequestMethod();\n        }\n\n        @Override\n        public ServletInputStream getInputStream() throws IOException {\n            return is;\n        }\n\n        @Override\n        public BufferedReader getReader() throws IOException {\n            return new BufferedReader(new InputStreamReader(getInputStream()));\n        }\n\n        @Override\n        public String getPathInfo() {\n            return ex.getRequestURI().getPath();\n        }\n\n        @Override\n        public String getParameter(String name) {\n            String[] arr = postData.get(name);\n            return arr != null ? (arr.length &gt; 1 ? Arrays.toString(arr) : arr[0]) : null;\n        }\n\n        @Override\n        public Map&lt;String, String[]&gt; getParameterMap() {\n            return postData;\n        }\n\n        @Override\n        public Enumeration&lt;String&gt; getParameterNames() {\n            return new Vector&lt;String&gt;(postData.keySet()).elements();\n        }\n    }\n\n    private final class ResponseWrapper extends HttpServletResponseWrapper {\n        final ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        final ServletOutputStream servletOutputStream = new ServletOutputStream() {\n\n            @Override\n            public void write(int b) throws IOException {\n                outputStream.write(b);\n            }\n        };\n\n        private final HttpExchange ex;\n        private final PrintWriter printWriter;\n        private int status = HttpServletResponse.SC_OK;\n\n        private ResponseWrapper(HttpServletResponse response, HttpExchange ex) {\n            super(response);\n            this.ex = ex;\n            printWriter = new PrintWriter(servletOutputStream);\n        }\n\n        @Override\n        public void setContentType(String type) {\n            ex.getResponseHeaders().add(\"Content-Type\", type);\n        }\n\n        @Override\n        public void setHeader(String name, String value) {\n            ex.getResponseHeaders().add(name, value);\n        }\n\n        @Override\n        public javax.servlet.ServletOutputStream getOutputStream() throws IOException {\n            return servletOutputStream;\n        }\n\n        @Override\n        public void setContentLength(int len) {\n            ex.getResponseHeaders().add(\"Content-Length\", len + \"\");\n        }\n\n        @Override\n        public void setStatus(int status) {\n            this.status = status;\n        }\n\n        @Override\n        public void sendError(int sc, String msg) throws IOException {\n            this.status = sc;\n            if (msg != null) {\n                printWriter.write(msg);\n            }\n        }\n\n        @Override\n        public void sendError(int sc) throws IOException {\n            sendError(sc, null);\n        }\n\n        @Override\n        public PrintWriter getWriter() throws IOException {\n            return printWriter;\n        }\n\n        public void complete() throws IOException {\n            try {\n                printWriter.flush();\n                ex.sendResponseHeaders(status, outputStream.size());\n                if (outputStream.size() &gt; 0) {\n                    ex.getResponseBody().write(outputStream.toByteArray());\n                }\n                ex.getResponseBody().flush();\n            } catch (Exception e) {\n                e.printStackTrace();\n            } finally {\n                ex.close();\n            }\n        }\n    }\n\n    public HttpHandlerWithServletSupport(HttpServlet servlet) {\n        this.servlet = servlet;\n    }\n\n    @SuppressWarnings(\"deprecation\")\n    @Override\n    public void handle(final HttpExchange ex) throws IOException {\n        byte[] inBytes = getBytes(ex.getRequestBody());\n        ex.getRequestBody().close();\n        final ByteArrayInputStream newInput = new ByteArrayInputStream(inBytes);\n        final ServletInputStream is = new ServletInputStream() {\n\n            @Override\n            public int read() throws IOException {\n                return newInput.read();\n            }\n        };\n\n        Map&lt;String, String[]&gt; parsePostData = new HashMap&lt;&gt;();\n\n        try {\n            parsePostData.putAll(HttpUtils.parseQueryString(ex.getRequestURI().getQuery()));\n\n            // check if any postdata to parse\n            parsePostData.putAll(HttpUtils.parsePostData(inBytes.length, is));\n        } catch (IllegalArgumentException e) {\n            // no postData - just reset inputstream\n            newInput.reset();\n        }\n        final Map&lt;String, String[]&gt; postData = parsePostData;\n\n        RequestWrapper req = new RequestWrapper(createUnimplementAdapter(HttpServletRequest.class), ex, postData, is);\n\n        ResponseWrapper resp = new ResponseWrapper(createUnimplementAdapter(HttpServletResponse.class), ex);\n\n        try {\n            servlet.service(req, resp);\n            resp.complete();\n        } catch (ServletException e) {\n            throw new IOException(e);\n        }\n    }\n\n    private static byte[] getBytes(InputStream in) throws IOException {\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        byte[] buffer = new byte[1024];\n        while (true) {\n            int r = in.read(buffer);\n            if (r == -1)\n                break;\n            out.write(buffer, 0, r);\n        }\n        return out.toByteArray();\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private static &lt;T&gt; T createUnimplementAdapter(Class&lt;T&gt; httpServletApi) {\n        class UnimplementedHandler implements InvocationHandler {\n            @Override\n            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n                throw new UnsupportedOperationException(\"Not implemented: \" + method + \", args=\" + Arrays.toString(args));\n            }\n        }\n\n        return (T) Proxy.newProxyInstance(UnimplementedHandler.class.getClassLoader(),\n                new Class&lt;?&gt;[] { httpServletApi },\n                new UnimplementedHandler());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1886487,"reputation":396597,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"score":2,"creation_date":1409919807,"post_id":24103800,"comment_id":40143940,"body_markdown":"+1 for being portable. Too bad you can&#39;t set the response content type as it is `text/xml`.","body":"+1 for being portable. Too bad you can&#39;t set the response content type as it is <code>text&#47;xml</code>."},{"owner":{"account_id":81678,"reputation":1686,"user_id":230191,"accept_rate":100,"display_name":"gruenewa"},"score":1,"creation_date":1410552571,"post_id":24103800,"comment_id":40384745,"body_markdown":"I think you could do &lt;code&gt;class Server implements Provider&lt;DataSource&gt; { &lt;/code&gt; ... and then specify the Content-Type within the DataSource&#39;s &lt;code&gt;getContentType()&lt;/code&gt; method. Furthermore you can also inject the WebServiceContext: &lt;code&gt; @Resource WebServiceContext ctx;&lt;/code&gt; to set other headers and to read request parameters. Unfortunately setting the content-type via WebServiceContext does not work.","body":"I think you could do &lt;code&gt;class Server implements Provider&lt;DataSource&gt; { &lt;/code&gt; ... and then specify the Content-Type within the DataSource&#39;s &lt;code&gt;getContentType()&lt;/code&gt; method. Furthermore you can also inject the WebServiceContext: &lt;code&gt; @Resource WebServiceContext ctx;&lt;/code&gt; to set other headers and to read request parameters. Unfortunately setting the content-type via WebServiceContext does not work."},{"owner":{"account_id":1988279,"reputation":7009,"user_id":1782954,"accept_rate":71,"display_name":"javabeangrinder"},"score":8,"creation_date":1416412570,"post_id":24103800,"comment_id":42566794,"body_markdown":"Could you explain why com.sun.net.HttpServer isn&#39;t portable across JREs please?","body":"Could you explain why com.sun.net.HttpServer isn&#39;t portable across JREs please?"},{"owner":{"account_id":81678,"reputation":1686,"user_id":230191,"accept_rate":100,"display_name":"gruenewa"},"score":0,"creation_date":1416596695,"post_id":24103800,"comment_id":42650096,"body_markdown":"@javabeangrinder As far as I know com.sun.* is not part of the offical Java APIs. Whereas javax.xml.ws.* is part of the official Java API.","body":"@javabeangrinder As far as I know com.sun.* is not part of the offical Java APIs. Whereas javax.xml.ws.* is part of the official Java API."},{"owner":{"account_id":1988279,"reputation":7009,"user_id":1782954,"accept_rate":71,"display_name":"javabeangrinder"},"score":0,"creation_date":1416814147,"post_id":24103800,"comment_id":42703997,"body_markdown":"Sorry for being a pain but when it works in OpenJDK, which it does, it should work everywhere, right?","body":"Sorry for being a pain but when it works in OpenJDK, which it does, it should work everywhere, right?"},{"owner":{"account_id":81678,"reputation":1686,"user_id":230191,"accept_rate":100,"display_name":"gruenewa"},"score":4,"creation_date":1416981521,"post_id":24103800,"comment_id":42781496,"body_markdown":"No, l do not think so. It will not work on IBMs Java implementation and maybe also others. And even if it works now, internal APIs are allowed to change. Why not just use the the official API?","body":"No, l do not think so. It will not work on IBMs Java implementation and maybe also others. And even if it works now, internal APIs are allowed to change. Why not just use the the official API?"},{"owner":{"account_id":4859,"reputation":40443,"user_id":7512,"accept_rate":75,"display_name":"slim"},"score":3,"creation_date":1490356152,"post_id":24103800,"comment_id":73087146,"body_markdown":"Quoting a comment on another post: &quot;The classes referred to here are tagged @jdk.Exported in the OpenJDK source code which means that the API is considered public and will be available on Java 9&quot;","body":"Quoting a comment on another post: &quot;The classes referred to here are tagged @jdk.Exported in the OpenJDK source code which means that the API is considered public and will be available on Java 9&quot;"},{"owner":{"account_id":439169,"reputation":34683,"user_id":827927,"accept_rate":74,"display_name":"Erel Segal-Halevi"},"score":5,"creation_date":1507848569,"post_id":24103800,"comment_id":80386703,"body_markdown":"This link: http://docs.oracle.com/javase/9/docs/api/java.xml.ws-summary.html says that the java.xml.ws module is deprecated since Java 9.","body":"This link: <a href=\"http://docs.oracle.com/javase/9/docs/api/java.xml.ws-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/9/docs/api/java.xml.ws-summary.html</a> says that the java.xml.ws module is deprecated since Java 9."},{"owner":{"account_id":6683527,"reputation":1411,"user_id":5155759,"accept_rate":85,"display_name":"navy1978"},"score":1,"creation_date":1517325368,"post_id":24103800,"comment_id":84044223,"body_markdown":"Did somebody find a way to set the content type using this?","body":"Did somebody find a way to set the content type using this?"},{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":1,"creation_date":1609164590,"post_id":24103800,"comment_id":115763893,"body_markdown":"As stated in other answer, @com.sun@ package *is* part of the JDK.","body":"As stated in other answer, @com.sun@ package <i>is</i> part of the JDK."},{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":1,"creation_date":1617081389,"post_id":24103800,"comment_id":118195613,"body_markdown":"The most interesting is that `com.sun.net.httpserver` is much more portable than `javax.xml.ws`","body":"The most interesting is that <code>com.sun.net.httpserver</code> is much more portable than <code>javax.xml.ws</code>"}],"tags":[],"owner":{"account_id":81678,"reputation":1686,"user_id":230191,"accept_rate":100,"display_name":"gruenewa"},"comment_count":11,"down_vote_count":6,"up_vote_count":39,"is_accepted":false,"score":33,"last_activity_date":1404739853,"creation_date":1402211009,"answer_id":24103800,"question_id":3732109,"body_markdown":"The _com.sun.net.httpserver_ solution is not portable across JREs. Its better to use the official webservices API in _javax.xml.ws_ to bootstrap a minimal HTTP server...\r\n\r\n    import java.io._\r\n    import javax.xml.ws._\r\n    import javax.xml.ws.http._\r\n    import javax.xml.transform._\r\n    import javax.xml.transform.stream._\r\n\r\n    @WebServiceProvider\r\n    @ServiceMode(value=Service.Mode.PAYLOAD) \r\n    class P extends Provider[Source] {\r\n      def invoke(source: Source) = new StreamSource( new StringReader(&quot;&lt;p&gt;Hello There!&lt;/p&gt;&quot;));\r\n    }\r\n\r\n    val address = &quot;http://127.0.0.1:8080/&quot;\r\n    Endpoint.create(HTTPBinding.HTTP_BINDING, new P()).publish(address)\r\n\r\n    println(&quot;Service running at &quot;+address)\r\n    println(&quot;Type [CTRL]+[C] to quit!&quot;)\r\n\r\n    Thread.sleep(Long.MaxValue)\r\n\r\nEDIT: this actually works! The above code looks like Groovy or something. Here is a translation to Java which I tested:\r\n\r\n\timport java.io.*;\r\n\timport javax.xml.ws.*;\r\n\timport javax.xml.ws.http.*;\r\n\timport javax.xml.transform.*;\r\n\timport javax.xml.transform.stream.*;\r\n\t\r\n\t@WebServiceProvider\r\n\t@ServiceMode(value = Service.Mode.PAYLOAD)\r\n\tpublic class Server implements Provider&lt;Source&gt; {\r\n\t\r\n\t\tpublic Source invoke(Source request) {\r\n\t\t\treturn  new StreamSource(new StringReader(&quot;&lt;p&gt;Hello There!&lt;/p&gt;&quot;));\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\r\n\t\t\tString address = &quot;http://127.0.0.1:8080/&quot;;\r\n\t\t\tEndpoint.create(HTTPBinding.HTTP_BINDING, new Server()).publish(address);\r\n\t\r\n\t\t\tSystem.out.println(&quot;Service running at &quot; + address);\r\n\t\t\tSystem.out.println(&quot;Type [CTRL]+[C] to quit!&quot;);\r\n\t\r\n\t\t\tThread.sleep(Long.MAX_VALUE);\r\n\t\t}\r\n\t}\r\n\r\n","title":"Simple HTTP server in Java using only Java SE API","body":"<p>The <em>com.sun.net.httpserver</em> solution is not portable across JREs. Its better to use the official webservices API in <em>javax.xml.ws</em> to bootstrap a minimal HTTP server...</p>\n\n<pre><code>import java.io._\nimport javax.xml.ws._\nimport javax.xml.ws.http._\nimport javax.xml.transform._\nimport javax.xml.transform.stream._\n\n@WebServiceProvider\n@ServiceMode(value=Service.Mode.PAYLOAD) \nclass P extends Provider[Source] {\n  def invoke(source: Source) = new StreamSource( new StringReader(\"&lt;p&gt;Hello There!&lt;/p&gt;\"));\n}\n\nval address = \"http://127.0.0.1:8080/\"\nEndpoint.create(HTTPBinding.HTTP_BINDING, new P()).publish(address)\n\nprintln(\"Service running at \"+address)\nprintln(\"Type [CTRL]+[C] to quit!\")\n\nThread.sleep(Long.MaxValue)\n</code></pre>\n\n<p>EDIT: this actually works! The above code looks like Groovy or something. Here is a translation to Java which I tested:</p>\n\n<pre><code>import java.io.*;\nimport javax.xml.ws.*;\nimport javax.xml.ws.http.*;\nimport javax.xml.transform.*;\nimport javax.xml.transform.stream.*;\n\n@WebServiceProvider\n@ServiceMode(value = Service.Mode.PAYLOAD)\npublic class Server implements Provider&lt;Source&gt; {\n\n    public Source invoke(Source request) {\n        return  new StreamSource(new StringReader(\"&lt;p&gt;Hello There!&lt;/p&gt;\"));\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n\n        String address = \"http://127.0.0.1:8080/\";\n        Endpoint.create(HTTPBinding.HTTP_BINDING, new Server()).publish(address);\n\n        System.out.println(\"Service running at \" + address);\n        System.out.println(\"Type [CTRL]+[C] to quit!\");\n\n        Thread.sleep(Long.MAX_VALUE);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":37853,"reputation":4899,"user_id":108350,"accept_rate":32,"display_name":"will"},"comment_count":0,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1409843118,"creation_date":1409843118,"answer_id":25668918,"question_id":3732109,"body_markdown":"I like this question because this is an area where there&#39;s continuous innovation and there&#39;s always a need to have a light server especially when talking about embedded servers in small(er) devices.  I think answers fall into two broad groups.\r\n\r\n 1. **Thin-server**: server-up static content with minimal processing, context or session processing.\r\n 2. **Small-server**: ostensibly a has many httpD-like server qualities with as small a footprint as you can get away with.\r\n\r\nWhile I might consider HTTP libraries like: [Jetty][1], [Apache Http Components][2], [Netty][3] and others to be more like  a raw HTTP processing facilities. The labelling is very subjective, and depends on the kinds of thing you&#39;ve been call-on to deliver for small-sites.  I make this distinction in the spirit of the question, particularly the remark about...\r\n\r\n - &quot;...without writing code to manually parse HTTP requests and manually format HTTP responses...&quot;\r\n\r\nThese raw tools let you do that (as described in other answers).  They don&#39;t really lend themselves to a ready-set-go style of making a light, embedded or mini-server.  A mini-server is something that can give you similar functionality to a full-function web server (like say, [Tomcat][4]) without bells and whistles, low volume, good performance 99% of the time.  A thin-server seems closer to the original phrasing just a bit more than raw perhaps with a limited subset functionality, enough to make you look good 90% of the time.  My idea of raw would be makes me look good 75% - 89% of the time without extra design and coding.  I think if/when you reach the level of WAR files, we&#39;ve left the &quot;small&quot; for bonsi servers that looks like everything a big server does smaller.\r\n\r\nThin-server options\r\n\r\n - [Grizzly][5] \r\n - [UniRest][6] (multiple-languages)\r\n - [NanoHTTPD][7] (just one file)\r\n\r\n\r\nMini-server options:\r\n\r\n - [Spark Java][8] ... Good things are possible with lots of helper constructs like Filters, Templates, etc.\r\n - [MadVoc][9] ... aims to be bonsai and could well be such  ;-)\r\n\r\nAmong the other things to consider, I&#39;d include authentication, validation, internationalisation, using something like [FreeMaker][10] or other template tool to render page output.  Otherwise managing HTML editing and parameterisation is likely to make working with HTTP look like noughts-n-crosses.   Naturally it all depends on how flexible you need to be.  If it&#39;s a menu-driven FAX machine it can be very simple.  The more interactions, the &#39;*thicker*&#39; your framework needs to be. Good question, good luck!\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Jetty_%28web_server%29\r\n  [2]: https://hc.apache.org/index.html\r\n  [3]: http://en.wikipedia.org/wiki/Netty_(software)\r\n  [4]: http://en.wikipedia.org/wiki/Apache_Tomcat\r\n  [5]: https://grizzly.java.net/httpserverframework.html#/Http_Server_Framework_Overview\r\n  [6]: http://unirest.io/java.html\r\n  [7]: http://en.wikipedia.org/wiki/NanoHTTPD\r\n  [8]: http://www.sparkjava.com/readme.html\r\n  [9]: http://jodd.org/doc/madvoc/\r\n  [10]: http://en.wikipedia.org/wiki/FreeMarker","title":"Simple HTTP server in Java using only Java SE API","body":"<p>I like this question because this is an area where there's continuous innovation and there's always a need to have a light server especially when talking about embedded servers in small(er) devices.  I think answers fall into two broad groups.</p>\n\n<ol>\n<li><strong>Thin-server</strong>: server-up static content with minimal processing, context or session processing.</li>\n<li><strong>Small-server</strong>: ostensibly a has many httpD-like server qualities with as small a footprint as you can get away with.</li>\n</ol>\n\n<p>While I might consider HTTP libraries like: <a href=\"http://en.wikipedia.org/wiki/Jetty_%28web_server%29\" rel=\"noreferrer\">Jetty</a>, <a href=\"https://hc.apache.org/index.html\" rel=\"noreferrer\">Apache Http Components</a>, <a href=\"http://en.wikipedia.org/wiki/Netty_(software)\" rel=\"noreferrer\">Netty</a> and others to be more like  a raw HTTP processing facilities. The labelling is very subjective, and depends on the kinds of thing you've been call-on to deliver for small-sites.  I make this distinction in the spirit of the question, particularly the remark about...</p>\n\n<ul>\n<li>\"...without writing code to manually parse HTTP requests and manually format HTTP responses...\"</li>\n</ul>\n\n<p>These raw tools let you do that (as described in other answers).  They don't really lend themselves to a ready-set-go style of making a light, embedded or mini-server.  A mini-server is something that can give you similar functionality to a full-function web server (like say, <a href=\"http://en.wikipedia.org/wiki/Apache_Tomcat\" rel=\"noreferrer\">Tomcat</a>) without bells and whistles, low volume, good performance 99% of the time.  A thin-server seems closer to the original phrasing just a bit more than raw perhaps with a limited subset functionality, enough to make you look good 90% of the time.  My idea of raw would be makes me look good 75% - 89% of the time without extra design and coding.  I think if/when you reach the level of WAR files, we've left the \"small\" for bonsi servers that looks like everything a big server does smaller.</p>\n\n<p>Thin-server options</p>\n\n<ul>\n<li><a href=\"https://grizzly.java.net/httpserverframework.html#/Http_Server_Framework_Overview\" rel=\"noreferrer\">Grizzly</a> </li>\n<li><a href=\"http://unirest.io/java.html\" rel=\"noreferrer\">UniRest</a> (multiple-languages)</li>\n<li><a href=\"http://en.wikipedia.org/wiki/NanoHTTPD\" rel=\"noreferrer\">NanoHTTPD</a> (just one file)</li>\n</ul>\n\n<p>Mini-server options:</p>\n\n<ul>\n<li><a href=\"http://www.sparkjava.com/readme.html\" rel=\"noreferrer\">Spark Java</a> ... Good things are possible with lots of helper constructs like Filters, Templates, etc.</li>\n<li><a href=\"http://jodd.org/doc/madvoc/\" rel=\"noreferrer\">MadVoc</a> ... aims to be bonsai and could well be such  ;-)</li>\n</ul>\n\n<p>Among the other things to consider, I'd include authentication, validation, internationalisation, using something like <a href=\"http://en.wikipedia.org/wiki/FreeMarker\" rel=\"noreferrer\">FreeMaker</a> or other template tool to render page output.  Otherwise managing HTML editing and parameterisation is likely to make working with HTTP look like noughts-n-crosses.   Naturally it all depends on how flexible you need to be.  If it's a menu-driven FAX machine it can be very simple.  The more interactions, the '<em>thicker</em>' your framework needs to be. Good question, good luck!</p>\n"},{"comments":[{"owner":{"account_id":2567397,"reputation":2254,"user_id":2227070,"display_name":"Shamshirsaz.Navid"},"score":0,"creation_date":1606771682,"post_id":29413466,"comment_id":115058120,"body_markdown":"Wow small and clean :)","body":"Wow small and clean :)"}],"tags":[],"owner":{"account_id":3544299,"reputation":1351,"user_id":2960660,"accept_rate":100,"display_name":"Laercio Metzner"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1434976366,"creation_date":1427979126,"answer_id":29413466,"question_id":3732109,"body_markdown":"Spark is the simplest, here is a quick start guide: http://sparkjava.com/","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Spark is the simplest, here is a quick start guide: <a href=\"http://sparkjava.com/\" rel=\"noreferrer\">http://sparkjava.com/</a></p>\n"},{"tags":[],"owner":{"account_id":2421752,"reputation":2804,"user_id":2114557,"accept_rate":50,"display_name":"Zuko"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1436957037,"creation_date":1436957037,"answer_id":31428226,"question_id":3732109,"body_markdown":"checkout [Simple][1]. its a pretty simple embeddable server with built in support for quite a variety of operations. I particularly love its threading model..\r\n\r\nAmazing!\r\n\r\n\r\n  [1]: http://simpleweb.sourceforge.net/index.php","title":"Simple HTTP server in Java using only Java SE API","body":"<p>checkout <a href=\"http://simpleweb.sourceforge.net/index.php\" rel=\"nofollow\">Simple</a>. its a pretty simple embeddable server with built in support for quite a variety of operations. I particularly love its threading model..</p>\n\n<p>Amazing!</p>\n"},{"tags":[],"owner":{"account_id":5320261,"reputation":7235,"user_id":4243908,"accept_rate":77,"display_name":"George"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1444918838,"creation_date":1444918838,"answer_id":33151010,"question_id":3732109,"body_markdown":"Check out `takes`. Look at [https://github.com/yegor256/takes][1] for quick info\r\n\r\n\r\n  [1]: https://github.com/yegor256/takes","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Check out <code>takes</code>. Look at <a href=\"https://github.com/yegor256/takes\" rel=\"nofollow\">https://github.com/yegor256/takes</a> for quick info</p>\n"},{"comments":[{"owner":{"account_id":758158,"reputation":4083,"user_id":1985033,"display_name":"amichair"},"score":0,"creation_date":1554963300,"post_id":35639090,"comment_id":97943716,"body_markdown":"The main method is a good example of basic usage, and the [FAQ](http://www.freeutils.net/source/jlhttp/faq) goes into many of the details. If you have suggestions for improving the existing docs, feel free to contact me directly!","body":"The main method is a good example of basic usage, and the <a href=\"http://www.freeutils.net/source/jlhttp/faq\" rel=\"nofollow noreferrer\">FAQ</a> goes into many of the details. If you have suggestions for improving the existing docs, feel free to contact me directly!"},{"owner":{"account_id":3694260,"reputation":356,"user_id":3076105,"display_name":"user3076105"},"score":0,"creation_date":1609884214,"post_id":35639090,"comment_id":115960612,"body_markdown":"Finally a practical, working server capable of serving an ISO image as virtual media for booting server over iLO as a normal user.  Python&#39;s http.server or derivatives failed to serve such a large file whole or in chunks; this one did the job without using sudo. Thanks for sharing!","body":"Finally a practical, working server capable of serving an ISO image as virtual media for booting server over iLO as a normal user.  Python&#39;s http.server or derivatives failed to serve such a large file whole or in chunks; this one did the job without using sudo. Thanks for sharing!"}],"tags":[],"owner":{"account_id":758158,"reputation":4083,"user_id":1985033,"display_name":"amichair"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1527842625,"creation_date":1456437085,"answer_id":35639090,"question_id":3732109,"body_markdown":"Once upon a time I was looking for something similar - a lightweight yet fully functional HTTP server that I could easily embed and customize. I found two types of potential solutions:\r\n\r\n- Full servers that are not all that lightweight or simple (for an extreme definition of lightweight.)\r\n- Truly lightweight servers that aren&#39;t quite HTTP servers, but glorified ServerSocket examples that are not even remotely RFC-compliant and don&#39;t support commonly needed basic functionality.\r\n\r\nSo... I set out to write [JLHTTP - The Java Lightweight HTTP Server][1].\r\n\r\nYou can embed it in any project as a single (if rather long) source file, or as a ~50K jar (~35K stripped) with no dependencies. It strives to be RFC-compliant and includes extensive documentation and many useful features while keeping bloat to a minimum.\r\n\r\nFeatures include: virtual hosts, file serving from disk, mime type mappings via standard mime.types file, directory index generation, welcome files, support for all HTTP methods, conditional ETags and If-* header support, chunked transfer encoding, gzip/deflate compression, basic HTTPS (as provided by the JVM), partial content (download continuation), multipart/form-data handling for file uploads, multiple context handlers via API or annotations, parameter parsing (query string or x-www-form-urlencoded body), etc.\r\n\r\nI hope others find it useful :-)\r\n\r\n  [1]: http://www.freeutils.net/source/jlhttp/\r\n","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Once upon a time I was looking for something similar - a lightweight yet fully functional HTTP server that I could easily embed and customize. I found two types of potential solutions:</p>\n\n<ul>\n<li>Full servers that are not all that lightweight or simple (for an extreme definition of lightweight.)</li>\n<li>Truly lightweight servers that aren't quite HTTP servers, but glorified ServerSocket examples that are not even remotely RFC-compliant and don't support commonly needed basic functionality.</li>\n</ul>\n\n<p>So... I set out to write <a href=\"http://www.freeutils.net/source/jlhttp/\" rel=\"noreferrer\">JLHTTP - The Java Lightweight HTTP Server</a>.</p>\n\n<p>You can embed it in any project as a single (if rather long) source file, or as a ~50K jar (~35K stripped) with no dependencies. It strives to be RFC-compliant and includes extensive documentation and many useful features while keeping bloat to a minimum.</p>\n\n<p>Features include: virtual hosts, file serving from disk, mime type mappings via standard mime.types file, directory index generation, welcome files, support for all HTTP methods, conditional ETags and If-* header support, chunked transfer encoding, gzip/deflate compression, basic HTTPS (as provided by the JVM), partial content (download continuation), multipart/form-data handling for file uploads, multiple context handlers via API or annotations, parameter parsing (query string or x-www-form-urlencoded body), etc.</p>\n\n<p>I hope others find it useful :-)</p>\n"},{"tags":[],"owner":{"account_id":3346139,"reputation":14655,"user_id":2811258,"accept_rate":88,"display_name":"Johnny"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1498734884,"creation_date":1498734884,"answer_id":44823593,"question_id":3732109,"body_markdown":"You can write a pretty simple [embedded Jetty][1] Java server.\r\n\r\nEmbedded Jetty means that the server (Jetty) shipped together with the application as opposed of deploying the application on external Jetty server.\r\n\r\nSo if in non-embedded approach your webapp built into WAR file which deployed to some external server ([Tomcat][2] / Jetty / etc), in embedded Jetty, you write the webapp and instantiate the jetty server in the same code base.\r\n\r\nAn example for embedded Jetty Java server you can [git clone][3] and use: https://github.com/stas-slu/embedded-jetty-java-server-example\r\n\r\n\r\n  [1]: http://www.eclipse.org/jetty/documentation/9.4.x/embedding-jetty.html\r\n  [2]: http://tomcat.apache.org/\r\n  [3]: https://help.github.com/desktop/guides/contributing/cloning-a-repository-from-github-to-github-desktop/","title":"Simple HTTP server in Java using only Java SE API","body":"<p>You can write a pretty simple <a href=\"http://www.eclipse.org/jetty/documentation/9.4.x/embedding-jetty.html\" rel=\"nofollow noreferrer\">embedded Jetty</a> Java server.</p>\n\n<p>Embedded Jetty means that the server (Jetty) shipped together with the application as opposed of deploying the application on external Jetty server.</p>\n\n<p>So if in non-embedded approach your webapp built into WAR file which deployed to some external server (<a href=\"http://tomcat.apache.org/\" rel=\"nofollow noreferrer\">Tomcat</a> / Jetty / etc), in embedded Jetty, you write the webapp and instantiate the jetty server in the same code base.</p>\n\n<p>An example for embedded Jetty Java server you can <a href=\"https://help.github.com/desktop/guides/contributing/cloning-a-repository-from-github-to-github-desktop/\" rel=\"nofollow noreferrer\">git clone</a> and use: <a href=\"https://github.com/stas-slu/embedded-jetty-java-server-example\" rel=\"nofollow noreferrer\">https://github.com/stas-slu/embedded-jetty-java-server-example</a></p>\n"},{"tags":[],"owner":{"account_id":7439229,"reputation":105,"user_id":5657520,"display_name":"Devashish Priyadarshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1554746916,"creation_date":1526022077,"answer_id":50286769,"question_id":3732109,"body_markdown":"Try this https://github.com/devashish234073/Java-Socket-Http-Server/blob/master/README.md\r\n\r\nThis API has creates an HTTP server using sockets. \r\n\r\n 1. It gets a request from the browser as text\r\n 2. Parses it to retrieve URL info, method, attributes, etc.\r\n 3. Creates dynamic response using the URL mapping defined\r\n 4. Sends the response to the browser.\r\n\r\nFor example the here&#39;s how the constructor in the `Response.java` class  converts a raw response into an http response:\r\n\r\n    public Response(String resp){\r\n        Date date = new Date();\r\n        String start = &quot;HTTP/1.1 200 OK\\r\\n&quot;;\r\n        String header = &quot;Date: &quot;+date.toString()+&quot;\\r\\n&quot;;\r\n        header+= &quot;Content-Type: text/html\\r\\n&quot;;\r\n        header+= &quot;Content-length: &quot;+resp.length()+&quot;\\r\\n&quot;;\r\n        header+=&quot;\\r\\n&quot;;\r\n        this.resp=start+header+resp;\r\n    }","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Try this <a href=\"https://github.com/devashish234073/Java-Socket-Http-Server/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/devashish234073/Java-Socket-Http-Server/blob/master/README.md</a></p>\n\n<p>This API has creates an HTTP server using sockets. </p>\n\n<ol>\n<li>It gets a request from the browser as text</li>\n<li>Parses it to retrieve URL info, method, attributes, etc.</li>\n<li>Creates dynamic response using the URL mapping defined</li>\n<li>Sends the response to the browser.</li>\n</ol>\n\n<p>For example the here's how the constructor in the <code>Response.java</code> class  converts a raw response into an http response:</p>\n\n<pre><code>public Response(String resp){\n    Date date = new Date();\n    String start = \"HTTP/1.1 200 OK\\r\\n\";\n    String header = \"Date: \"+date.toString()+\"\\r\\n\";\n    header+= \"Content-Type: text/html\\r\\n\";\n    header+= \"Content-length: \"+resp.length()+\"\\r\\n\";\n    header+=\"\\r\\n\";\n    this.resp=start+header+resp;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4709355,"reputation":603,"user_id":4491572,"accept_rate":100,"display_name":"Balu mallisetty"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1539753808,"creation_date":1539753808,"answer_id":52847756,"question_id":3732109,"body_markdown":"All the above answers details about Single main threaded Request Handler.\r\n\r\nsetting:\r\n\r\n     server.setExecutor(java.util.concurrent.Executors.newCachedThreadPool());\r\n\r\nAllows multiple request serving via multiple threads using executor service.\r\n\r\nSo the end code will be something like below:\r\n\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.io.OutputStream;\r\n    import java.net.InetSocketAddress;\r\n    import com.sun.net.httpserver.HttpExchange;\r\n    import com.sun.net.httpserver.HttpHandler;\r\n    import com.sun.net.httpserver.HttpServer;\r\n    public class App {\r\n        public static void main(String[] args) throws Exception {\r\n            HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);\r\n            server.createContext(&quot;/test&quot;, new MyHandler());\r\n            //Thread control is given to executor service.\r\n            server.setExecutor(java.util.concurrent.Executors.newCachedThreadPool());\r\n            server.start();\r\n        }\r\n        static class MyHandler implements HttpHandler {\r\n            @Override\r\n            public void handle(HttpExchange t) throws IOException {\r\n                String response = &quot;This is the response&quot;;\r\n                long threadId = Thread.currentThread().getId();\r\n                System.out.println(&quot;I am thread &quot; + threadId );\r\n                response = response + &quot;Thread Id = &quot;+threadId;\r\n                t.sendResponseHeaders(200, response.length());\r\n                OutputStream os = t.getResponseBody();\r\n                os.write(response.getBytes());\r\n                os.close();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Simple HTTP server in Java using only Java SE API","body":"<p>All the above answers details about Single main threaded Request Handler.</p>\n\n<p>setting:</p>\n\n<pre><code> server.setExecutor(java.util.concurrent.Executors.newCachedThreadPool());\n</code></pre>\n\n<p>Allows multiple request serving via multiple threads using executor service.</p>\n\n<p>So the end code will be something like below:</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.OutputStream;\nimport java.net.InetSocketAddress;\nimport com.sun.net.httpserver.HttpExchange;\nimport com.sun.net.httpserver.HttpHandler;\nimport com.sun.net.httpserver.HttpServer;\npublic class App {\n    public static void main(String[] args) throws Exception {\n        HttpServer server = HttpServer.create(new InetSocketAddress(8000), 0);\n        server.createContext(\"/test\", new MyHandler());\n        //Thread control is given to executor service.\n        server.setExecutor(java.util.concurrent.Executors.newCachedThreadPool());\n        server.start();\n    }\n    static class MyHandler implements HttpHandler {\n        @Override\n        public void handle(HttpExchange t) throws IOException {\n            String response = \"This is the response\";\n            long threadId = Thread.currentThread().getId();\n            System.out.println(\"I am thread \" + threadId );\n            response = response + \"Thread Id = \"+threadId;\n            t.sendResponseHeaders(200, response.length());\n            OutputStream os = t.getResponseBody();\n            os.write(response.getBytes());\n            os.close();\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1612833,"reputation":322,"user_id":1491319,"display_name":"albertgumi"},"score":1,"creation_date":1629621408,"post_id":68868760,"comment_id":121730614,"body_markdown":"This solution has been already proposed by other users and `com.sun.net.httpserver.HttpServer` is more since Java 1.1 than since Java 11.","body":"This solution has been already proposed by other users and <code>com.sun.net.httpserver.HttpServer</code> is more since Java 1.1 than since Java 11."},{"owner":{"account_id":11632711,"reputation":1021,"user_id":8520235,"display_name":"coterobarros"},"score":0,"creation_date":1629623681,"post_id":68868760,"comment_id":121731081,"body_markdown":"Sorry. You are partially right. It is there since 1.6. https://docs.oracle.com/en/java/javase/11/docs/api/jdk.httpserver/com/sun/net/httpserver/package-summary.html","body":"Sorry. You are partially right. It is there since 1.6. <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/jdk.httpserver/com/sun/net/httpserver/package-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/jdk.httpserver/co&zwnj;&#8203;m/&hellip;</a>"},{"owner":{"account_id":11632711,"reputation":1021,"user_id":8520235,"display_name":"coterobarros"},"score":0,"creation_date":1629624321,"post_id":68868760,"comment_id":121731214,"body_markdown":"Thank you. I&#39;ve edited my answer to be clear about the important thing: the `HttpServer` class is accepted again as a proper class by Oracle.","body":"Thank you. I&#39;ve edited my answer to be clear about the important thing: the <code>HttpServer</code> class is accepted again as a proper class by Oracle."}],"tags":[],"owner":{"account_id":11632711,"reputation":1021,"user_id":8520235,"display_name":"coterobarros"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1629624261,"creation_date":1629499877,"answer_id":68868760,"question_id":3732109,"body_markdown":"The old `com.sun.net.httpserver` is again a public and accepted API, since Java 11. You can get it as `HttpServer` class, available as part of `jdk.httpserver` module. See https://docs.oracle.com/en/java/javase/11/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html\r\n\r\n&gt; This class implements a simple HTTP server. A HttpServer is bound to an IP address and port number and listens for incoming TCP connections from clients on this address. The sub-class HttpsServer implements a server which handles HTTPS requests.\r\n\r\nSo, apart from its limitations, there is no reason to avoid its use anymore.\r\n\r\nI use it to publish a control interface in server applications. Reading the `User-agent` header from a client request I even respond in `text/plain` to CLI tools like `curl` or in more elegant HTML way to any other browser.\r\n\r\nCool and easy.","title":"Simple HTTP server in Java using only Java SE API","body":"<p>The old <code>com.sun.net.httpserver</code> is again a public and accepted API, since Java 11. You can get it as <code>HttpServer</code> class, available as part of <code>jdk.httpserver</code> module. See <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html</a></p>\n<blockquote>\n<p>This class implements a simple HTTP server. A HttpServer is bound to an IP address and port number and listens for incoming TCP connections from clients on this address. The sub-class HttpsServer implements a server which handles HTTPS requests.</p>\n</blockquote>\n<p>So, apart from its limitations, there is no reason to avoid its use anymore.</p>\n<p>I use it to publish a control interface in server applications. Reading the <code>User-agent</code> header from a client request I even respond in <code>text/plain</code> to CLI tools like <code>curl</code> or in more elegant HTML way to any other browser.</p>\n<p>Cool and easy.</p>\n"},{"tags":[],"owner":{"account_id":4306041,"reputation":3559,"user_id":3518383,"display_name":"Juraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1636037523,"creation_date":1636037523,"answer_id":69841178,"question_id":3732109,"body_markdown":"An example of a very basic HTTP server on TCP sockets level:\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.PrintWriter;\r\nimport java.net.InetAddress;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\npublic class NaiveHttpServer {\r\n\r\n  public static void main(String[] args) throws IOException {\r\n    String hostname = InetAddress.getLocalHost().getHostName();\r\n    ServerSocket serverSocket = new ServerSocket(8089);\r\n    while (true) {\r\n      Socket clientSocket = serverSocket.accept();\r\n      PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\r\n      BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n      String s = in.readLine();\r\n      System.out.println(s);\r\n      while (&quot;\\r\\n&quot;.equals(in.readLine())); \r\n      if (&quot;GET /hostname HTTP/1.1&quot;.equals(s)) {\r\n        out.println(&quot;HTTP/1.1 200 OK&quot;);\r\n        out.println(&quot;Connection: close&quot;);\r\n        out.println(&quot;Content-Type: text/plain&quot;);\r\n        out.println(&quot;Content-Length:&quot; + hostname.length());\r\n        out.println();\r\n        out.println(hostname);\r\n      } else {\r\n        out.println(&quot;HTTP/1.1 404 Not Found&quot;);\r\n        out.println(&quot;Connection: close&quot;);\r\n        out.println();    \r\n      }\r\n      out.flush();\r\n    }\r\n  }\r\n}\r\n```\r\nThe example serves the hostname of the computer.","title":"Simple HTTP server in Java using only Java SE API","body":"<p>An example of a very basic HTTP server on TCP sockets level:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.InetAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class NaiveHttpServer {\n\n  public static void main(String[] args) throws IOException {\n    String hostname = InetAddress.getLocalHost().getHostName();\n    ServerSocket serverSocket = new ServerSocket(8089);\n    while (true) {\n      Socket clientSocket = serverSocket.accept();\n      PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\n      BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n      String s = in.readLine();\n      System.out.println(s);\n      while (&quot;\\r\\n&quot;.equals(in.readLine())); \n      if (&quot;GET /hostname HTTP/1.1&quot;.equals(s)) {\n        out.println(&quot;HTTP/1.1 200 OK&quot;);\n        out.println(&quot;Connection: close&quot;);\n        out.println(&quot;Content-Type: text/plain&quot;);\n        out.println(&quot;Content-Length:&quot; + hostname.length());\n        out.println();\n        out.println(hostname);\n      } else {\n        out.println(&quot;HTTP/1.1 404 Not Found&quot;);\n        out.println(&quot;Connection: close&quot;);\n        out.println();    \n      }\n      out.flush();\n    }\n  }\n}\n</code></pre>\n<p>The example serves the hostname of the computer.</p>\n"},{"comments":[{"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"score":2,"creation_date":1672747172,"post_id":71635295,"comment_id":132340072,"body_markdown":"@Naman This answer is the new approach in JDK 18.","body":"@Naman This answer is the new approach in JDK 18."}],"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":1,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1700016916,"creation_date":1648374823,"answer_id":71635295,"question_id":3732109,"body_markdown":"## *JEP 408: Simple Web Server*\r\n\r\nStarting in [Java 18][1], you can create simple web servers with Java standard library:\r\n\r\n```java\r\nclass Main {\r\n    public static void main(String[] args) {\r\n        var port = 8000;\r\n        var rootDirectory = Path.of(&quot;C:/Users/Mahozad/Desktop/&quot;);\r\n        var outputLevel = OutputLevel.VERBOSE;\r\n        var server = SimpleFileServer.createFileServer(\r\n                new InetSocketAddress(port),\r\n                rootDirectory,\r\n                outputLevel\r\n        );\r\n        server.start();\r\n    }\r\n}\r\n```\r\n\r\nThis will, by default, show a directory listing of the root directory you specified. You can place an **index.html** file (and other assets like CSS and JS files) in that directory to show them instead.\r\n\r\n## Sidenote\r\nFor Java standard library HTTP **client**, see the post [Java 11 new HTTP Client API](https://stackoverflow.com/a/70545055/8583692). See [*JEP 321: HTTP Client*][2].\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/408\r\n  [2]: https://openjdk.org/jeps/321","title":"Simple HTTP server in Java using only Java SE API","body":"<h2><em>JEP 408: Simple Web Server</em></h2>\n<p>Starting in <a href=\"https://openjdk.java.net/jeps/408\" rel=\"nofollow noreferrer\">Java 18</a>, you can create simple web servers with Java standard library:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Main {\n    public static void main(String[] args) {\n        var port = 8000;\n        var rootDirectory = Path.of(&quot;C:/Users/Mahozad/Desktop/&quot;);\n        var outputLevel = OutputLevel.VERBOSE;\n        var server = SimpleFileServer.createFileServer(\n                new InetSocketAddress(port),\n                rootDirectory,\n                outputLevel\n        );\n        server.start();\n    }\n}\n</code></pre>\n<p>This will, by default, show a directory listing of the root directory you specified. You can place an <strong>index.html</strong> file (and other assets like CSS and JS files) in that directory to show them instead.</p>\n<h2>Sidenote</h2>\n<p>For Java standard library HTTP <strong>client</strong>, see the post <a href=\"https://stackoverflow.com/a/70545055/8583692\">Java 11 new HTTP Client API</a>. See <a href=\"https://openjdk.org/jeps/321\" rel=\"nofollow noreferrer\"><em>JEP 321: HTTP Client</em></a>.</p>\n"},{"tags":[],"owner":{"account_id":1772943,"reputation":1723,"user_id":1617366,"display_name":"Mitja Gustin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663178629,"creation_date":1663178629,"answer_id":73721360,"question_id":3732109,"body_markdown":"Here is my simple webserver, used in JMeter for testing webhooks (that&#39;s why it will close and end itself after request is received). \r\n\r\n\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    \r\n    public class HttpServer {\r\n    \r\n    \tprivate static int extractContentLength(StringBuilder sb) {\r\n    \t\tint length = 0;\r\n    \t\tString[] lines = sb.toString().split(&quot;\\\\n&quot;);\r\n    \t\tfor (int i = 0; i &lt; lines.length; i++) {\r\n    \t\t\tString s = lines[i];\r\n    \t\t\tif (s.toLowerCase().startsWith(&quot;Content-Length:&quot;.toLowerCase()) &amp;&amp; i &lt;= lines.length - 2) {\r\n    \t\t\t\tString slength = s.substring(s.indexOf(&quot;:&quot;) + 1, s.length()).trim();\r\n    \t\t\t\tlength = Integer.parseInt(slength);\r\n    \t\t\t\tSystem.out.println(&quot;Length = &quot; + length);\r\n    \t\t\t\treturn length;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn 0;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\t\r\n    \t\t\r\n    \t\tint port = Integer.parseInt(args[0]);\r\n    \t\tSystem.out.println(&quot;starting HTTP Server on port &quot; + port);\r\n    \r\n    \t\tStringBuilder outputString = new StringBuilder(1000);\r\n    \r\n    \t\tServerSocket serverSocket = new ServerSocket(port);\r\n    \t\tserverSocket.setSoTimeout(3 * 60 * 1000); // 3 minutes timeout\r\n    \t\twhile (true) {\r\n    \r\n    \t\t\toutputString.setLength(0); // reset buff\r\n    \r\n    \t\t\tSocket clientSocket = serverSocket.accept(); // blocking\r\n    \t\t\tPrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\r\n    \r\n    \t\t\ttry {\r\n    \r\n    \t\t\t\tboolean isBodyRead = false;\r\n    \t\t\t\tint dataBuffer;\r\n    \t\t\t\twhile ((dataBuffer = clientSocket.getInputStream().read()) != -1) {\r\n    \r\n    \t\t\t\t\tif (dataBuffer == 13) { // CR\r\n    \t\t\t\t\t\tif (clientSocket.getInputStream().read() == 10) { // LF\r\n    \t\t\t\t\t\t\toutputString.append(&quot;\\n&quot;);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\toutputString.append((char) dataBuffer);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t\r\n    \t\t\t\t\t// do we have Content length\r\n    \t\t\t\t\tint len = extractContentLength(outputString);\r\n    \t\t\t\t\tif (len &gt; 0) {\r\n    \t\t\t\t\t\tint actualLength = len - 1; // we need to substract \\r\\n\r\n    \t\t\t\t\t\tfor (int i = 0; i &lt; actualLength; i++) {\r\n    \t\t\t\t\t\t\tint body = clientSocket.getInputStream().read();\r\n    \t\t\t\t\t\t\toutputString.append((char) body);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\tisBodyRead = true;\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t} // end of reading while\r\n    \r\n    \t\t\t\tif (isBodyRead) {\r\n    \t\t\t\t\t// response headers\r\n    \t\t\t\t\tout.println(&quot;HTTP/1.1 200 OK&quot;);\r\n    \t\t\t\t\tout.println(&quot;Connection: close&quot;);\r\n    \t\t\t\t\tout.println(); // must have empty line for HTTP\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tout.flush(); \r\n    \t\t\t\t\tout.close(); // close clients connection\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t} catch (IOException ioEx) {\r\n    \t\t\t\tSystem.out.println(ioEx.getMessage());\r\n    \t\t\t}\r\n    \r\n    \t\t\tSystem.out.println(outputString.toString());\r\n    \t\t\tbreak; // stop server - break while true\r\n    \t\t\t\r\n    \t\t} // end of outer while true\r\n    \t\t\r\n    \t\tserverSocket.close();\r\n    \r\n    \t} // end of method\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\nYou can test it like this:\r\n\r\n    curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Connection: close&quot; -d &#39;{&quot;name&quot;: &quot;gustinmi&quot;, &quot;email&quot;: &quot;gustinmi at google dot com &quot;}&#39; -v http://localhost:8081/\r\n\r\n","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Here is my simple webserver, used in JMeter for testing webhooks (that's why it will close and end itself after request is received).</p>\n<pre><code>import java.io.IOException;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class HttpServer {\n\n    private static int extractContentLength(StringBuilder sb) {\n        int length = 0;\n        String[] lines = sb.toString().split(&quot;\\\\n&quot;);\n        for (int i = 0; i &lt; lines.length; i++) {\n            String s = lines[i];\n            if (s.toLowerCase().startsWith(&quot;Content-Length:&quot;.toLowerCase()) &amp;&amp; i &lt;= lines.length - 2) {\n                String slength = s.substring(s.indexOf(&quot;:&quot;) + 1, s.length()).trim();\n                length = Integer.parseInt(slength);\n                System.out.println(&quot;Length = &quot; + length);\n                return length;\n            }\n        }\n        return 0;\n    }\n\n    public static void main(String[] args) throws IOException {\n        \n        \n        int port = Integer.parseInt(args[0]);\n        System.out.println(&quot;starting HTTP Server on port &quot; + port);\n\n        StringBuilder outputString = new StringBuilder(1000);\n\n        ServerSocket serverSocket = new ServerSocket(port);\n        serverSocket.setSoTimeout(3 * 60 * 1000); // 3 minutes timeout\n        while (true) {\n\n            outputString.setLength(0); // reset buff\n\n            Socket clientSocket = serverSocket.accept(); // blocking\n            PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\n\n            try {\n\n                boolean isBodyRead = false;\n                int dataBuffer;\n                while ((dataBuffer = clientSocket.getInputStream().read()) != -1) {\n\n                    if (dataBuffer == 13) { // CR\n                        if (clientSocket.getInputStream().read() == 10) { // LF\n                            outputString.append(&quot;\\n&quot;);\n                        }\n                    } else {\n                        outputString.append((char) dataBuffer);\n                    }\n                    \n                    // do we have Content length\n                    int len = extractContentLength(outputString);\n                    if (len &gt; 0) {\n                        int actualLength = len - 1; // we need to substract \\r\\n\n                        for (int i = 0; i &lt; actualLength; i++) {\n                            int body = clientSocket.getInputStream().read();\n                            outputString.append((char) body);\n                        }\n                        isBodyRead = true;\n                        break;\n                    }\n\n                } // end of reading while\n\n                if (isBodyRead) {\n                    // response headers\n                    out.println(&quot;HTTP/1.1 200 OK&quot;);\n                    out.println(&quot;Connection: close&quot;);\n                    out.println(); // must have empty line for HTTP\n                    \n                    out.flush(); \n                    out.close(); // close clients connection\n                }\n\n            } catch (IOException ioEx) {\n                System.out.println(ioEx.getMessage());\n            }\n\n            System.out.println(outputString.toString());\n            break; // stop server - break while true\n            \n        } // end of outer while true\n        \n        serverSocket.close();\n\n    } // end of method\n\n}\n</code></pre>\n<p>You can test it like this:</p>\n<pre><code>curl -X POST -H &quot;Content-Type: application/json&quot; -H &quot;Connection: close&quot; -d '{&quot;name&quot;: &quot;gustinmi&quot;, &quot;email&quot;: &quot;gustinmi at google dot com &quot;}' -v http://localhost:8081/\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2667931,"reputation":776,"user_id":2305886,"accept_rate":29,"display_name":"user2305886"},"score":1,"creation_date":1695599866,"post_id":75356809,"comment_id":136041795,"body_markdown":"You solution is a very neat and teaches to HTTP basics. I do not know why people do not like it. I would work with you to make the solution more generic.","body":"You solution is a very neat and teaches to HTTP basics. I do not know why people do not like it. I would work with you to make the solution more generic."}],"tags":[],"owner":{"account_id":139049,"reputation":1072,"user_id":344372,"accept_rate":50,"display_name":"Mike Croteau"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1675653790,"creation_date":1675649738,"answer_id":75356809,"question_id":3732109,"body_markdown":"I had some fun, I toyed around and pieced together this. I hope it helps you. \r\nYou are going to need Gradle installed or use Maven with a plugin.\r\n\r\n**build.gradle**\r\n    \r\n    plugins {\r\n        id &#39;application&#39;\r\n    }\r\n    \r\n    group &#39;foo.bar&#39;\r\n    version &#39;1.0&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    application{\r\n        mainClass.set(&quot;foo.FooServer&quot;)\r\n    }\r\n    \r\n    dependencies {}\r\n\r\n\r\n**FooServer**\r\nThe main entry point, your main class.\r\n\r\n    package foo;\r\n    \r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.nio.ByteBuffer;\r\n    import java.util.concurrent.ConcurrentHashMap;\r\n    import java.util.concurrent.ConcurrentMap;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class FooServer {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            ServerSocket serverSocket = new ServerSocket(7654);\r\n            serverSocket.setPerformancePreferences(0, 1, 2);\r\n    \r\n            /* the higher the numbers, the better the concurrent performance, ha!\r\n               we found that a 3:7 ratio to be optimal\r\n               3 partitioned executors to 7 network executors */\r\n    \r\n            ExecutorService executors = Executors.newFixedThreadPool(3);\r\n            executors.execute(new PartitionedExecutor(serverSocket));\r\n        }\r\n    \r\n    \r\n        public static class PartitionedExecutor implements Runnable {\r\n            ServerSocket serverSocket;\r\n    \r\n            public PartitionedExecutor(ServerSocket serverSocket) {\r\n                this.serverSocket = serverSocket;\r\n            }\r\n    \r\n            @Override\r\n            public void run() {\r\n                ExecutorService executors = Executors.newFixedThreadPool(30);\r\n                executors.execute(new NetworkRequestExecutor(serverSocket, executors));\r\n            }\r\n        }\r\n    \r\n    \r\n        public static class NetworkRequestExecutor implements Runnable{\r\n    \r\n            String IGNORE_CHROME = &quot;/favicon.ico&quot;;\r\n            String BREAK = &quot;\\r\\n&quot;;\r\n            String DOUBLEBREAK = &quot;\\r\\n\\r\\n&quot;;\r\n    \r\n            Integer REQUEST_METHOD = 0;\r\n            Integer REQUEST_PATH = 1;\r\n            Integer REQUEST_VERSION = 2;\r\n    \r\n            String RENDERER;\r\n    \r\n            Socket socketClient;\r\n            ExecutorService executors;\r\n            ServerSocket serverSocket;\r\n    \r\n            public NetworkRequestExecutor(ServerSocket serverSocket, ExecutorService executors){\r\n                this.serverSocket = serverSocket;\r\n                this.executors = executors;\r\n            }\r\n    \r\n            @Override\r\n            public void run() {\r\n                try {\r\n    \r\n                    socketClient = serverSocket.accept();\r\n                    Thread.sleep(19);//do this for safari, its a hack but safari requires something like this.\r\n                    InputStream requestInputStream = socketClient.getInputStream();\r\n    \r\n                    OutputStream clientOutput = socketClient.getOutputStream();\r\n    \r\n                    if (requestInputStream.available() == 0) {\r\n                        requestInputStream.close();\r\n                        clientOutput.flush();\r\n                        clientOutput.close();\r\n                        executors.execute(new NetworkRequestExecutor(serverSocket, executors));\r\n                        return;\r\n                    }\r\n    \r\n                    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n                    ByteBuffer byteBuffer = ByteBuffer.allocate(1024);\r\n                    int bytesRead;\r\n                    while ((bytesRead = requestInputStream.read(byteBuffer.array())) != -1) {\r\n                        byteArrayOutputStream.write(byteBuffer.array(), 0, bytesRead);\r\n                        if (requestInputStream.available() == 0) break;\r\n                    }\r\n    \r\n                    String completeRequestContent = byteArrayOutputStream.toString();\r\n                    String[] requestBlocks = completeRequestContent.split(DOUBLEBREAK, 2);\r\n    \r\n                    String headerComponent = requestBlocks[0];\r\n                    String[] methodPathComponentsLookup = headerComponent.split(BREAK);\r\n                    String methodPathComponent = methodPathComponentsLookup[0];\r\n    \r\n                    String[] methodPathVersionComponents = methodPathComponent.split(&quot;\\\\s&quot;);\r\n    \r\n                    String requestVerb = methodPathVersionComponents[REQUEST_METHOD];\r\n                    String requestPath = methodPathVersionComponents[REQUEST_PATH];\r\n                    String requestVersion = methodPathVersionComponents[REQUEST_VERSION];\r\n    \r\n    \r\n                    if (requestPath.equals(IGNORE_CHROME)) {\r\n                        requestInputStream.close();\r\n                        clientOutput.flush();\r\n                        clientOutput.close();\r\n                        executors.execute(new NetworkRequestExecutor(serverSocket, executors));\r\n                        return;\r\n                    }\r\n    \r\n                    ConcurrentMap&lt;String, String&gt; headers = new ConcurrentHashMap&lt;&gt;();\r\n                    String[] headerComponents = headerComponent.split(BREAK);\r\n                    for (String headerLine : headerComponents) {\r\n                        String[] headerLineComponents = headerLine.split(&quot;:&quot;);\r\n                        if (headerLineComponents.length == 2) {\r\n                            String fieldKey = headerLineComponents[0].trim();\r\n                            String content = headerLineComponents[1].trim();\r\n                            headers.put(fieldKey.toLowerCase(), content);\r\n                        }\r\n                    }\r\n    \r\n                    clientOutput.write(&quot;HTTP/1.1 200 OK&quot;.getBytes());\r\n                    clientOutput.write(BREAK.getBytes());\r\n    \r\n                    Integer bytesLength = &quot;hi&quot;.length();\r\n                    String contentLengthBytes = &quot;Content-Length:&quot; + bytesLength;\r\n                    clientOutput.write(contentLengthBytes.getBytes());\r\n                    clientOutput.write(BREAK.getBytes());\r\n    \r\n                    clientOutput.write(&quot;Server: foo server&quot;.getBytes());\r\n                    clientOutput.write(BREAK.getBytes());\r\n    \r\n                    clientOutput.write(&quot;Content-Type: text/html&quot;.getBytes());\r\n   \r\n                    clientOutput.write(DOUBLEBREAK.getBytes());\r\n                    clientOutput.write(&quot;hi&quot;.getBytes());\r\n    \r\n                    clientOutput.close();\r\n                    socketClient.close();\r\n    \r\n                    executors.execute(new NetworkRequestExecutor(serverSocket, executors));\r\n    \r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace();\r\n                } catch (InterruptedException ioException) {\r\n                    ioException.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nRun it:\r\n\r\n    gradle run\r\n\r\nBrowse to:\r\n\r\n    http://localhost:7654/\r\n\r\n","title":"Simple HTTP server in Java using only Java SE API","body":"<p>I had some fun, I toyed around and pieced together this. I hope it helps you.\nYou are going to need Gradle installed or use Maven with a plugin.</p>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'application'\n}\n\ngroup 'foo.bar'\nversion '1.0'\n\nrepositories {\n    mavenCentral()\n}\n\napplication{\n    mainClass.set(&quot;foo.FooServer&quot;)\n}\n\ndependencies {}\n</code></pre>\n<p><strong>FooServer</strong>\nThe main entry point, your main class.</p>\n<pre><code>package foo;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.nio.ByteBuffer;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.ConcurrentMap;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class FooServer {\n\n    public static void main(String[] args) throws IOException {\n        ServerSocket serverSocket = new ServerSocket(7654);\n        serverSocket.setPerformancePreferences(0, 1, 2);\n\n        /* the higher the numbers, the better the concurrent performance, ha!\n           we found that a 3:7 ratio to be optimal\n           3 partitioned executors to 7 network executors */\n\n        ExecutorService executors = Executors.newFixedThreadPool(3);\n        executors.execute(new PartitionedExecutor(serverSocket));\n    }\n\n\n    public static class PartitionedExecutor implements Runnable {\n        ServerSocket serverSocket;\n\n        public PartitionedExecutor(ServerSocket serverSocket) {\n            this.serverSocket = serverSocket;\n        }\n\n        @Override\n        public void run() {\n            ExecutorService executors = Executors.newFixedThreadPool(30);\n            executors.execute(new NetworkRequestExecutor(serverSocket, executors));\n        }\n    }\n\n\n    public static class NetworkRequestExecutor implements Runnable{\n\n        String IGNORE_CHROME = &quot;/favicon.ico&quot;;\n        String BREAK = &quot;\\r\\n&quot;;\n        String DOUBLEBREAK = &quot;\\r\\n\\r\\n&quot;;\n\n        Integer REQUEST_METHOD = 0;\n        Integer REQUEST_PATH = 1;\n        Integer REQUEST_VERSION = 2;\n\n        String RENDERER;\n\n        Socket socketClient;\n        ExecutorService executors;\n        ServerSocket serverSocket;\n\n        public NetworkRequestExecutor(ServerSocket serverSocket, ExecutorService executors){\n            this.serverSocket = serverSocket;\n            this.executors = executors;\n        }\n\n        @Override\n        public void run() {\n            try {\n\n                socketClient = serverSocket.accept();\n                Thread.sleep(19);//do this for safari, its a hack but safari requires something like this.\n                InputStream requestInputStream = socketClient.getInputStream();\n\n                OutputStream clientOutput = socketClient.getOutputStream();\n\n                if (requestInputStream.available() == 0) {\n                    requestInputStream.close();\n                    clientOutput.flush();\n                    clientOutput.close();\n                    executors.execute(new NetworkRequestExecutor(serverSocket, executors));\n                    return;\n                }\n\n                ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                ByteBuffer byteBuffer = ByteBuffer.allocate(1024);\n                int bytesRead;\n                while ((bytesRead = requestInputStream.read(byteBuffer.array())) != -1) {\n                    byteArrayOutputStream.write(byteBuffer.array(), 0, bytesRead);\n                    if (requestInputStream.available() == 0) break;\n                }\n\n                String completeRequestContent = byteArrayOutputStream.toString();\n                String[] requestBlocks = completeRequestContent.split(DOUBLEBREAK, 2);\n\n                String headerComponent = requestBlocks[0];\n                String[] methodPathComponentsLookup = headerComponent.split(BREAK);\n                String methodPathComponent = methodPathComponentsLookup[0];\n\n                String[] methodPathVersionComponents = methodPathComponent.split(&quot;\\\\s&quot;);\n\n                String requestVerb = methodPathVersionComponents[REQUEST_METHOD];\n                String requestPath = methodPathVersionComponents[REQUEST_PATH];\n                String requestVersion = methodPathVersionComponents[REQUEST_VERSION];\n\n\n                if (requestPath.equals(IGNORE_CHROME)) {\n                    requestInputStream.close();\n                    clientOutput.flush();\n                    clientOutput.close();\n                    executors.execute(new NetworkRequestExecutor(serverSocket, executors));\n                    return;\n                }\n\n                ConcurrentMap&lt;String, String&gt; headers = new ConcurrentHashMap&lt;&gt;();\n                String[] headerComponents = headerComponent.split(BREAK);\n                for (String headerLine : headerComponents) {\n                    String[] headerLineComponents = headerLine.split(&quot;:&quot;);\n                    if (headerLineComponents.length == 2) {\n                        String fieldKey = headerLineComponents[0].trim();\n                        String content = headerLineComponents[1].trim();\n                        headers.put(fieldKey.toLowerCase(), content);\n                    }\n                }\n\n                clientOutput.write(&quot;HTTP/1.1 200 OK&quot;.getBytes());\n                clientOutput.write(BREAK.getBytes());\n\n                Integer bytesLength = &quot;hi&quot;.length();\n                String contentLengthBytes = &quot;Content-Length:&quot; + bytesLength;\n                clientOutput.write(contentLengthBytes.getBytes());\n                clientOutput.write(BREAK.getBytes());\n\n                clientOutput.write(&quot;Server: foo server&quot;.getBytes());\n                clientOutput.write(BREAK.getBytes());\n\n                clientOutput.write(&quot;Content-Type: text/html&quot;.getBytes());\n\n                clientOutput.write(DOUBLEBREAK.getBytes());\n                clientOutput.write(&quot;hi&quot;.getBytes());\n\n                clientOutput.close();\n                socketClient.close();\n\n                executors.execute(new NetworkRequestExecutor(serverSocket, executors));\n\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            } catch (InterruptedException ioException) {\n                ioException.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n<p>Run it:</p>\n<pre><code>gradle run\n</code></pre>\n<p>Browse to:</p>\n<pre><code>http://localhost:7654/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2667931,"reputation":776,"user_id":2305886,"accept_rate":29,"display_name":"user2305886"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695599623,"creation_date":1695599623,"answer_id":77169327,"question_id":3732109,"body_markdown":"Your question has a very good pool of answers covering a creation web server just using Java SE. However, some people can be interesting in a similar solution running on the Android platform. It&#39;s very naturally limited to Java SE and even a max JVM version can be limited to Java 8. I use Atjeews for creation web server on Android. It&#39;s open source and you can check sources at [GitHub][1].\r\nThe server can be also easily embedded in your Android application, for example:\r\n\r\n    void uploadWork(boolean start) {\r\n        if (start) {\r\n            if (serv == null) {\r\n                serv = new Serve1();\r\n                serv.addServlet(&quot;/*&quot;, new Uploader(this));\r\n            } else if (serv.isRunning())\r\n                return;\r\n\r\n            Properties properties = new Properties();\r\n            properties.put(Serve.ARG_PORT, options.getPort());\r\n            properties.setProperty(Serve.ARG_NOHUP, &quot;nohup&quot;);\r\n            serv.arguments = properties;\r\n            new Thread(new Runnable() {\r\n\r\n                @Override\r\n                public void run() {\r\n                    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);\r\n                    PowerManager.WakeLock fullLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK,\r\n                            getClass().getName());\r\n                    fullLock.acquire();\r\n                    try {\r\n                        serv.serve();\r\n                    } finally {\r\n                        if (fullLock.isHeld())\r\n                            fullLock.release();\r\n                    }\r\n                }\r\n            }).start();\r\n        } else {\r\n            if (serv != null)\r\n                serv.notifyStop();\r\n        }\r\n    }\r\n\r\nUsing servlet concept simplifies creation of a web server, because you can be focused on a business logic required to your app and delegate all HTTP work to a servlet engine.\r\n\r\n  [1]: https://github.com/drogatkin/Atjeews","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Your question has a very good pool of answers covering a creation web server just using Java SE. However, some people can be interesting in a similar solution running on the Android platform. It's very naturally limited to Java SE and even a max JVM version can be limited to Java 8. I use Atjeews for creation web server on Android. It's open source and you can check sources at <a href=\"https://github.com/drogatkin/Atjeews\" rel=\"nofollow noreferrer\">GitHub</a>.\nThe server can be also easily embedded in your Android application, for example:</p>\n<pre><code>void uploadWork(boolean start) {\n    if (start) {\n        if (serv == null) {\n            serv = new Serve1();\n            serv.addServlet(&quot;/*&quot;, new Uploader(this));\n        } else if (serv.isRunning())\n            return;\n\n        Properties properties = new Properties();\n        properties.put(Serve.ARG_PORT, options.getPort());\n        properties.setProperty(Serve.ARG_NOHUP, &quot;nohup&quot;);\n        serv.arguments = properties;\n        new Thread(new Runnable() {\n\n            @Override\n            public void run() {\n                PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);\n                PowerManager.WakeLock fullLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK,\n                        getClass().getName());\n                fullLock.acquire();\n                try {\n                    serv.serve();\n                } finally {\n                    if (fullLock.isHeld())\n                        fullLock.release();\n                }\n            }\n        }).start();\n    } else {\n        if (serv != null)\n            serv.notifyStop();\n    }\n}\n</code></pre>\n<p>Using servlet concept simplifies creation of a web server, because you can be focused on a business logic required to your app and delegate all HTTP work to a servlet engine.</p>\n"}],"owner":{"account_id":650408,"reputation":4125,"user_id":450155,"display_name":"asker"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":518063,"favorite_count":0,"down_vote_count":3,"up_vote_count":413,"answer_count":23,"score":410,"last_activity_date":1700016916,"creation_date":1284686944,"question_id":3732109,"body_markdown":"Is there a way to create a very basic HTTP server (supporting only GET/POST) in Java using just the Java SE API, without writing code to manually parse HTTP requests and manually format HTTP responses? The Java SE API nicely encapsulates the HTTP client functionality in `HttpURLConnection`, but is there an analog for HTTP server functionality?\r\n\r\nJust to be clear, the problem I have with a lot of `ServerSocket` examples I&#39;ve seen online is that they do their own request parsing/response formatting and error handling, which is tedious, error-prone, and not likely to be comprehensive, and I&#39;m trying to avoid it for those reasons.\r\n","title":"Simple HTTP server in Java using only Java SE API","body":"<p>Is there a way to create a very basic HTTP server (supporting only GET/POST) in Java using just the Java SE API, without writing code to manually parse HTTP requests and manually format HTTP responses? The Java SE API nicely encapsulates the HTTP client functionality in <code>HttpURLConnection</code>, but is there an analog for HTTP server functionality?</p>\n<p>Just to be clear, the problem I have with a lot of <code>ServerSocket</code> examples I've seen online is that they do their own request parsing/response formatting and error handling, which is tedious, error-prone, and not likely to be comprehensive, and I'm trying to avoid it for those reasons.</p>\n"},{"tags":["java","string","io","stream","inputstream"],"comments":[{"owner":{"account_id":8397558,"reputation":4568,"user_id":6304094,"display_name":"Kevin Anderson"},"score":0,"creation_date":1602165739,"post_id":309424,"comment_id":113639095,"body_markdown":"Does this answer your question? [Scanner is skipping nextLine() after using next() or nextFoo()?](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1604051543,"post_id":309424,"comment_id":114235005,"body_markdown":"Remember that you need to take the encoding of the input stream in consideration.  The system default is not necessarily always the one you wan.t","body":"Remember that you need to take the encoding of the input stream in consideration.  The system default is not necessarily always the one you wan.t"},{"owner":{"account_id":8063048,"reputation":113,"user_id":11069710,"display_name":"Shmuel Newmark"},"score":21,"creation_date":1622236770,"post_id":309424,"comment_id":119744380,"body_markdown":"Most of these answers were written pre-Java 9, but now you can get a byte array from the InputStream using .readAllBytes. So, simply &quot;new String(inputStream.readAllBytes())&quot; works using String&#39;s byte[] constructor.","body":"Most of these answers were written pre-Java 9, but now you can get a byte array from the InputStream using .readAllBytes. So, simply &quot;new String(inputStream.readAllBytes())&quot; works using String&#39;s byte[] constructor."}],"answers":[{"comments":[{"owner":{"account_id":2373566,"reputation":560,"user_id":2077582,"display_name":"RCB"},"score":0,"creation_date":1593703580,"post_id":309448,"comment_id":110878970,"body_markdown":"Did the toString get deprecated? I see `IOUtils.convertStreamToString()`","body":"Did the toString get deprecated? I see <code>IOUtils.convertStreamToString()</code>"},{"owner":{"account_id":33185,"reputation":447,"user_id":92678,"display_name":"satchel"},"score":0,"creation_date":1625529794,"post_id":309448,"comment_id":120645040,"body_markdown":"I added an edit to include a searchable link to the actual source code itself as a reference. I believe this augments the answer for those who want to see how the command works.","body":"I added an edit to include a searchable link to the actual source code itself as a reference. I believe this augments the answer for those who want to see how the command works."}],"tags":[],"owner":{"account_id":11244,"reputation":29526,"user_id":21590,"accept_rate":62,"display_name":"Harry Lime"},"comment_count":2,"down_vote_count":70,"up_vote_count":2825,"is_accepted":true,"score":2755,"last_activity_date":1674177696,"creation_date":1227286460,"answer_id":309448,"question_id":309424,"body_markdown":"A nice way to do this is using [Apache Commons][1] &lt;code&gt;[IOUtils][2]&lt;/code&gt; to copy the &lt;code&gt;InputStream&lt;/code&gt; into a &lt;code&gt;StringWriter&lt;/code&gt;... Something like\r\n\r\n    StringWriter writer = new StringWriter();\r\n    IOUtils.copy(inputStream, writer, encoding);\r\n    String theString = writer.toString();\r\n\r\nor even\r\n\r\n    // NB: does not close inputStream, you&#39;ll have to use try-with-resources for that\r\n    String theString = IOUtils.toString(inputStream, encoding);\r\n\r\nAlternatively, you could use &lt;code&gt;ByteArrayOutputStream&lt;/code&gt; if you don&#39;t want to mix your Streams and Writers.\r\n\r\n  [1]: http://commons.apache.org/\r\n  [2]: https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html\r\n\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>A nice way to do this is using <a href=\"http://commons.apache.org/\" rel=\"noreferrer\">Apache Commons</a> <code><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\">IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>... Something like</p>\n<pre><code>StringWriter writer = new StringWriter();\nIOUtils.copy(inputStream, writer, encoding);\nString theString = writer.toString();\n</code></pre>\n<p>or even</p>\n<pre><code>// NB: does not close inputStream, you'll have to use try-with-resources for that\nString theString = IOUtils.toString(inputStream, encoding);\n</code></pre>\n<p>Alternatively, you could use <code>ByteArrayOutputStream</code> if you don't want to mix your Streams and Writers.</p>\n"},{"tags":[],"owner":{"account_id":2892,"reputation":4918,"user_id":4100,"display_name":"Paul de Vrieze"},"comment_count":0,"down_vote_count":3,"up_vote_count":324,"is_accepted":false,"score":321,"last_activity_date":1436955825,"creation_date":1227292451,"answer_id":309718,"question_id":309424,"body_markdown":"Taking into account file one should first get a `java.io.Reader` instance. This can then be read and added to a `StringBuilder` (we don&#39;t need `StringBuffer` if we are not accessing it in multiple threads, and `StringBuilder` is faster). The trick here is that we work in blocks, and as such don&#39;t need other buffering streams. The block size is parameterized for run-time performance optimization.\r\n\r\n    public static String slurp(final InputStream is, final int bufferSize) {\r\n        final char[] buffer = new char[bufferSize];\r\n        final StringBuilder out = new StringBuilder();\r\n        try (Reader in = new InputStreamReader(is, &quot;UTF-8&quot;)) {\r\n            for (;;) {\r\n                int rsz = in.read(buffer, 0, buffer.length);\r\n                if (rsz &lt; 0)\r\n                    break;\r\n                out.append(buffer, 0, rsz);\r\n            }\r\n        }\r\n        catch (UnsupportedEncodingException ex) {\r\n            /* ... */\r\n        }\r\n        catch (IOException ex) {\r\n            /* ... */\r\n        }\r\n        return out.toString();\r\n    }","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Taking into account file one should first get a <code>java.io.Reader</code> instance. This can then be read and added to a <code>StringBuilder</code> (we don't need <code>StringBuffer</code> if we are not accessing it in multiple threads, and <code>StringBuilder</code> is faster). The trick here is that we work in blocks, and as such don't need other buffering streams. The block size is parameterized for run-time performance optimization.</p>\n\n<pre><code>public static String slurp(final InputStream is, final int bufferSize) {\n    final char[] buffer = new char[bufferSize];\n    final StringBuilder out = new StringBuilder();\n    try (Reader in = new InputStreamReader(is, \"UTF-8\")) {\n        for (;;) {\n            int rsz = in.read(buffer, 0, buffer.length);\n            if (rsz &lt; 0)\n                break;\n            out.append(buffer, 0, rsz);\n        }\n    }\n    catch (UnsupportedEncodingException ex) {\n        /* ... */\n    }\n    catch (IOException ex) {\n        /* ... */\n    }\n    return out.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4180238,"reputation":1666,"user_id":3425489,"accept_rate":58,"display_name":"Shantaram Tupe"},"score":1,"creation_date":1614168393,"post_id":350723,"comment_id":117301957,"body_markdown":"Trying to get back InputStream, not working https://stackoverflow.com/q/66349701/3425489","body":"Trying to get back InputStream, not working <a href=\"https://stackoverflow.com/q/66349701/3425489\">stackoverflow.com/q/66349701/3425489</a>"}],"tags":[],"owner":{"account_id":15204,"reputation":10189,"user_id":31892,"accept_rate":78,"display_name":"Chinnery"},"comment_count":1,"down_vote_count":10,"up_vote_count":900,"is_accepted":false,"score":890,"last_activity_date":1546684172,"creation_date":1228767222,"answer_id":350723,"question_id":309424,"body_markdown":"Apache Commons allows:\r\n\r\n    String myString = IOUtils.toString(myInputStream, &quot;UTF-8&quot;);\r\n\r\nOf course, you could choose other character encodings besides UTF-8.\r\n\r\nAlso see: ([documentation][1])\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Apache Commons allows:</p>\n\n<pre><code>String myString = IOUtils.toString(myInputStream, \"UTF-8\");\n</code></pre>\n\n<p>Of course, you could choose other character encodings besides UTF-8.</p>\n\n<p>Also see: (<a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String\" rel=\"noreferrer\">documentation</a>)</p>\n"},{"tags":[],"owner":{"account_id":23071,"reputation":1390,"user_id":57541,"display_name":"Jon Moore"},"comment_count":0,"down_vote_count":4,"up_vote_count":84,"is_accepted":false,"score":80,"last_activity_date":1700016564,"creation_date":1244668031,"answer_id":978162,"question_id":309424,"body_markdown":"Use:\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.InputStream;\r\n    import java.io.IOException;\r\n\r\n    public static String readInputStreamAsString(InputStream in)\r\n        throws IOException {\r\n\r\n        BufferedInputStream bis = new BufferedInputStream(in);\r\n        ByteArrayOutputStream buf = new ByteArrayOutputStream();\r\n        int result = bis.read();\r\n        while(result != -1) {\r\n            byte b = (byte)result;\r\n            buf.write(b);\r\n            result = bis.read();\r\n        }\r\n        return buf.toString();\r\n    }\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Use:</p>\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\nimport java.io.IOException;\n\npublic static String readInputStreamAsString(InputStream in)\n    throws IOException {\n\n    BufferedInputStream bis = new BufferedInputStream(in);\n    ByteArrayOutputStream buf = new ByteArrayOutputStream();\n    int result = bis.read();\n    while(result != -1) {\n        byte b = (byte)result;\n        buf.write(b);\n        result = bis.read();\n    }\n    return buf.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":138832,"reputation":2729,"user_id":344029,"display_name":"DJDaveMark"},"comment_count":0,"down_vote_count":2,"up_vote_count":32,"is_accepted":false,"score":30,"last_activity_date":1681917090,"creation_date":1274187473,"answer_id":2857414,"question_id":309424,"body_markdown":"If you can&#39;t use [Commons IO][1] (FileUtils, IOUtils, and CopyUtils), here&#39;s an example using a BufferedReader to read the file line by line:\r\n\r\n    public class StringFromFile {\r\n        public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\r\n            InputStream is = StringFromFile.class.getResourceAsStream(&quot;file.txt&quot;);\r\n            BufferedReader br = new BufferedReader(new InputStreamReader(is/*, &quot;UTF-8&quot;*/));\r\n            final int CHARS_PER_PAGE = 5000; //counting spaces\r\n            StringBuilder builder = new StringBuilder(CHARS_PER_PAGE);\r\n            try {\r\n                for(String line=br.readLine(); line!=null; line=br.readLine()) {\r\n                    builder.append(line);\r\n                    builder.append(&#39;\\n&#39;);\r\n                }\r\n            }\r\n            catch (IOException ignore) { }\r\n\r\n            String text = builder.toString();\r\n            System.out.println(text);\r\n        }\r\n    }\r\n\r\nOr if you want raw speed, I&#39;d propose a variation on what [Paul de Vrieze suggested][2] (which avoids using a StringWriter (which uses a StringBuffer internally):\r\n\r\n    public class StringFromFileFast {\r\n        public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\r\n            InputStream is = StringFromFileFast.class.getResourceAsStream(&quot;file.txt&quot;);\r\n            InputStreamReader input = new InputStreamReader(is/*, &quot;UTF-8&quot;*/);\r\n            final int CHARS_PER_PAGE = 5000; //counting spaces\r\n            final char[] buffer = new char[CHARS_PER_PAGE];\r\n            StringBuilder output = new StringBuilder(CHARS_PER_PAGE);\r\n            try {\r\n                for(int read = input.read(buffer, 0, buffer.length);\r\n                        read != -1;\r\n                        read = input.read(buffer, 0, buffer.length)) {\r\n                    output.append(buffer, 0, read);\r\n                }\r\n            } catch (IOException ignore) { }\r\n\r\n            String text = output.toString();\r\n            System.out.println(text);\r\n        }\r\n    }\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/\r\n  [2]: https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java/309718#309718\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>If you can't use <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"nofollow noreferrer\">Commons IO</a> (FileUtils, IOUtils, and CopyUtils), here's an example using a BufferedReader to read the file line by line:</p>\n<pre><code>public class StringFromFile {\n    public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\n        InputStream is = StringFromFile.class.getResourceAsStream(&quot;file.txt&quot;);\n        BufferedReader br = new BufferedReader(new InputStreamReader(is/*, &quot;UTF-8&quot;*/));\n        final int CHARS_PER_PAGE = 5000; //counting spaces\n        StringBuilder builder = new StringBuilder(CHARS_PER_PAGE);\n        try {\n            for(String line=br.readLine(); line!=null; line=br.readLine()) {\n                builder.append(line);\n                builder.append('\\n');\n            }\n        }\n        catch (IOException ignore) { }\n\n        String text = builder.toString();\n        System.out.println(text);\n    }\n}\n</code></pre>\n<p>Or if you want raw speed, I'd propose a variation on what <a href=\"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java/309718#309718\">Paul de Vrieze suggested</a> (which avoids using a StringWriter (which uses a StringBuffer internally):</p>\n<pre><code>public class StringFromFileFast {\n    public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\n        InputStream is = StringFromFileFast.class.getResourceAsStream(&quot;file.txt&quot;);\n        InputStreamReader input = new InputStreamReader(is/*, &quot;UTF-8&quot;*/);\n        final int CHARS_PER_PAGE = 5000; //counting spaces\n        final char[] buffer = new char[CHARS_PER_PAGE];\n        StringBuilder output = new StringBuilder(CHARS_PER_PAGE);\n        try {\n            for(int read = input.read(buffer, 0, buffer.length);\n                    read != -1;\n                    read = input.read(buffer, 0, buffer.length)) {\n                output.append(buffer, 0, read);\n            }\n        } catch (IOException ignore) { }\n\n        String text = output.toString();\n        System.out.println(text);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50802,"reputation":2641,"user_id":151614,"display_name":"Sakuraba"},"comment_count":0,"down_vote_count":4,"up_vote_count":190,"is_accepted":false,"score":186,"last_activity_date":1359563754,"creation_date":1279036584,"answer_id":3238954,"question_id":309424,"body_markdown":"If you are using Google-Collections/Guava you could do the following:\r\n\r\n    InputStream stream = ...\r\n    String content = CharStreams.toString(new InputStreamReader(stream, Charsets.UTF_8));\r\n    Closeables.closeQuietly(stream);\r\n\r\nNote that the second parameter (i.e. Charsets.UTF_8) for the `InputStreamReader` isn&#39;t necessary, but it is generally a good idea to specify the encoding if you know it (which you should!)","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>If you are using Google-Collections/Guava you could do the following:</p>\n\n<pre><code>InputStream stream = ...\nString content = CharStreams.toString(new InputStreamReader(stream, Charsets.UTF_8));\nCloseables.closeQuietly(stream);\n</code></pre>\n\n<p>Note that the second parameter (i.e. Charsets.UTF_8) for the <code>InputStreamReader</code> isn't necessary, but it is generally a good idea to specify the encoding if you know it (which you should!)</p>\n"},{"comments":[{"owner":{"account_id":5584181,"reputation":228,"user_id":4425158,"display_name":"Oleg Markelov"},"score":0,"creation_date":1603087998,"post_id":5445161,"comment_id":113914255,"body_markdown":"Shouldn&#39;t we close the scanner before returning the value?","body":"Shouldn&#39;t we close the scanner before returning the value?"},{"owner":{"account_id":5131675,"reputation":368,"user_id":4111643,"accept_rate":100,"display_name":"CodeMonkey"},"score":0,"creation_date":1661984224,"post_id":5445161,"comment_id":129904288,"body_markdown":"would do the same and close the resource with try with resource\ntry( java.util.Scanner s = new java.util.Scanner(is).useDelimiter(&quot;\\\\A&quot;)){\nreturn s.hasNext() ? s.next() : &quot;&quot;;\n}","body":"would do the same and close the resource with try with resource try( java.util.Scanner s = new java.util.Scanner(is).useDelimiter(&quot;\\\\A&quot;)){ return s.hasNext() ? s.next() : &quot;&quot;; }"}],"tags":[],"owner":{"account_id":18713,"reputation":30743,"user_id":43151,"accept_rate":100,"display_name":"Pavel Repin"},"comment_count":2,"down_vote_count":14,"up_vote_count":2376,"is_accepted":false,"score":2362,"last_activity_date":1546684434,"creation_date":1301172025,"answer_id":5445161,"question_id":309424,"body_markdown":"Here&#39;s a way using only the standard Java library (note that the stream is not closed, your mileage may vary).\r\n\r\n    static String convertStreamToString(java.io.InputStream is) {\r\n        java.util.Scanner s = new java.util.Scanner(is).useDelimiter(&quot;\\\\A&quot;);\r\n        return s.hasNext() ? s.next() : &quot;&quot;;\r\n    }\r\n\r\nI learned this trick from [&quot;Stupid Scanner tricks&quot;][1] article. The reason it works is because [Scanner][2] iterates over tokens in the stream, and in this case we separate tokens using &quot;beginning of the input boundary&quot; (\\A), thus giving us only one token for the entire contents of the stream.\r\n\r\n**Note, if you need to be specific about the input stream&#39;s encoding, you can provide the second argument to `Scanner` constructor that indicates what character set to use (e.g. &quot;UTF-8&quot;).**\r\n\r\nHat tip goes also to [Jacob][3], who once pointed me to the said article.\r\n\r\n  [1]: https://community.oracle.com/blogs/pat/2004/10/23/stupid-scanner-tricks\r\n  [2]: http://download.oracle.com/javase/8/docs/api/java/util/Scanner.html\r\n  [3]: https://stackoverflow.com/users/68127/jacob-gabrielson\r\n  [4]: https://stackoverflow.com/users/101272/patrick\r\n\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Here's a way using only the standard Java library (note that the stream is not closed, your mileage may vary).</p>\n\n<pre><code>static String convertStreamToString(java.io.InputStream is) {\n    java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n    return s.hasNext() ? s.next() : \"\";\n}\n</code></pre>\n\n<p>I learned this trick from <a href=\"https://community.oracle.com/blogs/pat/2004/10/23/stupid-scanner-tricks\" rel=\"noreferrer\">\"Stupid Scanner tricks\"</a> article. The reason it works is because <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/Scanner.html\" rel=\"noreferrer\">Scanner</a> iterates over tokens in the stream, and in this case we separate tokens using \"beginning of the input boundary\" (\\A), thus giving us only one token for the entire contents of the stream.</p>\n\n<p><strong>Note, if you need to be specific about the input stream's encoding, you can provide the second argument to <code>Scanner</code> constructor that indicates what character set to use (e.g. \"UTF-8\").</strong></p>\n\n<p>Hat tip goes also to <a href=\"https://stackoverflow.com/users/68127/jacob-gabrielson\">Jacob</a>, who once pointed me to the said article.</p>\n"},{"comments":[{"owner":{"account_id":2924378,"reputation":935,"user_id":2506021,"accept_rate":80,"display_name":"Rangi Keen"},"score":2,"creation_date":1615846262,"post_id":6938341,"comment_id":117814076,"body_markdown":"`readLine()` removes the line feed character so the resulting string will contain no line breaks unless you add a line separator between each line you add to the builder.","body":"<code>readLine()</code> removes the line feed character so the resulting string will contain no line breaks unless you add a line separator between each line you add to the builder."}],"tags":[],"owner":{"account_id":269689,"reputation":4064,"user_id":559185,"accept_rate":68,"display_name":"sampathpremarathna"},"comment_count":1,"down_vote_count":17,"up_vote_count":289,"is_accepted":false,"score":272,"last_activity_date":1546684500,"creation_date":1312446584,"answer_id":6938341,"question_id":309424,"body_markdown":"Use:\r\n\r\n    InputStream in = /* Your InputStream */;\r\n    StringBuilder sb = new StringBuilder();\r\n    BufferedReader br = new BufferedReader(new InputStreamReader(in));\r\n    String read;\r\n\r\n    while ((read=br.readLine()) != null) {\r\n        //System.out.println(read);\r\n        sb.append(read);\r\n    }\r\n\r\n    br.close();\r\n    return sb.toString();\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Use:</p>\n\n<pre><code>InputStream in = /* Your InputStream */;\nStringBuilder sb = new StringBuilder();\nBufferedReader br = new BufferedReader(new InputStreamReader(in));\nString read;\n\nwhile ((read=br.readLine()) != null) {\n    //System.out.println(read);\n    sb.append(read);\n}\n\nbr.close();\nreturn sb.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":154539,"reputation":1169,"user_id":370547,"display_name":"Brett H"},"comment_count":0,"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1508230523,"creation_date":1318440181,"answer_id":7743991,"question_id":309424,"body_markdown":"I ran some timing tests because time matters, always.&lt;br/&gt;\r\n\r\nI attempted to get the response into a String 3 different ways. (shown below)&lt;br/&gt;\r\nI left out try/catch blocks for the sake readability.&lt;br/&gt;\r\n\r\nTo give context, this is the preceding code for all 3 approaches:&lt;br/&gt;\r\n\r\n       String response;\r\n       String url = &quot;www.blah.com/path?key=value&quot;;\r\n       GetMethod method = new GetMethod(url);\r\n       int status = client.executeMethod(method);\r\n\r\n1)&lt;br/&gt;\r\n   \r\n\r\n     response = method.getResponseBodyAsString();\r\n\r\n2)&lt;br/&gt;\r\n\r\n    InputStream resp = method.getResponseBodyAsStream();\r\n    InputStreamReader is=new InputStreamReader(resp);\r\n    BufferedReader br=new BufferedReader(is);\r\n    String read = null;\r\n    StringBuffer sb = new StringBuffer();\r\n    while((read = br.readLine()) != null) {\r\n        sb.append(read);\r\n    }\r\n    response = sb.toString();\r\n\r\n3)&lt;br/&gt;\r\n\r\n    InputStream iStream  = method.getResponseBodyAsStream();\r\n    StringWriter writer = new StringWriter();\r\n    IOUtils.copy(iStream, writer, &quot;UTF-8&quot;);\r\n    response = writer.toString();\r\n\r\nSo, after running 500 tests on each approach with the same request/response data, here are the numbers. Once again, these are my findings and your findings may not be exactly the same, but I wrote this to give some indication to others of the efficiency differences of these approaches.\r\n\r\nRanks:&lt;br/&gt;\r\nApproach #1&lt;br/&gt;\r\nApproach #3 - 2.6% slower than #1&lt;br/&gt;\r\nApproach #2 - 4.3% slower than #1&lt;br/&gt;\r\n\r\nAny of these approaches is an appropriate solution for grabbing a response and creating a String from it.","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I ran some timing tests because time matters, always.<br/></p>\n\n<p>I attempted to get the response into a String 3 different ways. (shown below)<br/>\nI left out try/catch blocks for the sake readability.<br/></p>\n\n<p>To give context, this is the preceding code for all 3 approaches:<br/></p>\n\n<pre><code>   String response;\n   String url = \"www.blah.com/path?key=value\";\n   GetMethod method = new GetMethod(url);\n   int status = client.executeMethod(method);\n</code></pre>\n\n<p>1)<br/></p>\n\n<pre><code> response = method.getResponseBodyAsString();\n</code></pre>\n\n<p>2)<br/></p>\n\n<pre><code>InputStream resp = method.getResponseBodyAsStream();\nInputStreamReader is=new InputStreamReader(resp);\nBufferedReader br=new BufferedReader(is);\nString read = null;\nStringBuffer sb = new StringBuffer();\nwhile((read = br.readLine()) != null) {\n    sb.append(read);\n}\nresponse = sb.toString();\n</code></pre>\n\n<p>3)<br/></p>\n\n<pre><code>InputStream iStream  = method.getResponseBodyAsStream();\nStringWriter writer = new StringWriter();\nIOUtils.copy(iStream, writer, \"UTF-8\");\nresponse = writer.toString();\n</code></pre>\n\n<p>So, after running 500 tests on each approach with the same request/response data, here are the numbers. Once again, these are my findings and your findings may not be exactly the same, but I wrote this to give some indication to others of the efficiency differences of these approaches.</p>\n\n<p>Ranks:<br/>\nApproach #1<br/>\nApproach #3 - 2.6% slower than #1<br/>\nApproach #2 - 4.3% slower than #1<br/></p>\n\n<p>Any of these approaches is an appropriate solution for grabbing a response and creating a String from it.</p>\n"},{"tags":[],"owner":{"account_id":439667,"reputation":16586,"user_id":828757,"accept_rate":94,"display_name":"Jack"},"comment_count":0,"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1331105530,"creation_date":1331105530,"answer_id":9597413,"question_id":309424,"body_markdown":"If you were feeling adventurous, you could mix Scala and Java and end up with this:\r\n\r\n    scala.io.Source.fromInputStream(is).mkString(&quot;&quot;)\r\n\r\nMixing Java and Scala code and libraries has it&#39;s benefits.\r\n\r\nSee full description here: https://stackoverflow.com/q/5221524/828757","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>If you were feeling adventurous, you could mix Scala and Java and end up with this:</p>\n\n<pre><code>scala.io.Source.fromInputStream(is).mkString(\"\")\n</code></pre>\n\n<p>Mixing Java and Scala code and libraries has it's benefits.</p>\n\n<p>See full description here: <a href=\"https://stackoverflow.com/q/5221524/828757\">Idiomatic way to convert an InputStream to a String in Scala</a></p>\n"},{"comments":[{"owner":{"account_id":11653603,"reputation":2210,"user_id":8534088,"display_name":"Dmitriy Popov"},"score":0,"creation_date":1688552800,"post_id":9949592,"comment_id":135087571,"body_markdown":"`br.close()` has to be done within a `finally` or ` try-with-resources` block.","body":"<code>br.close()</code> has to be done within a <code>finally</code> or ` try-with-resources` block."}],"tags":[],"owner":{"account_id":208024,"reputation":828,"user_id":458244,"display_name":"TKH"},"comment_count":1,"down_vote_count":3,"up_vote_count":34,"is_accepted":false,"score":31,"last_activity_date":1688552767,"creation_date":1333137151,"answer_id":9949592,"question_id":309424,"body_markdown":"Here&#39;s more-or-less [sampath&#39;s answer][1], cleaned up a bit and represented as a function:\r\n\r\n    String streamToString(InputStream in) throws IOException {\r\n      StringBuilder out = new StringBuilder();\r\n      BufferedReader br = new BufferedReader(new InputStreamReader(in));\r\n      for (String line = br.readLine(); line != null; line = br.readLine())\r\n        out.append(line);\r\n      br.close();\r\n      return out.toString();\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java/6938341#6938341\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Here's more-or-less <a href=\"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java/6938341#6938341\">sampath's answer</a>, cleaned up a bit and represented as a function:</p>\n<pre><code>String streamToString(InputStream in) throws IOException {\n  StringBuilder out = new StringBuilder();\n  BufferedReader br = new BufferedReader(new InputStreamReader(in));\n  for (String line = br.readLine(); line != null; line = br.readLine())\n    out.append(line);\n  br.close();\n  return out.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"comment_count":0,"down_vote_count":3,"up_vote_count":140,"is_accepted":false,"score":137,"last_activity_date":1563914325,"creation_date":1336508651,"answer_id":10505933,"question_id":309424,"body_markdown":"This is the best pure Java solution that fits perfectly for Android and any other JVM.\r\n\r\nThis solution works amazingly well... it is simple, fast, and works on small and large streams just the same!! (see benchmark above.. **No. 8**)\r\n\r\n    public String readFullyAsString(InputStream inputStream, String encoding)\r\n            throws IOException {\r\n        return readFully(inputStream).toString(encoding);\r\n    }\r\n\r\n    public byte[] readFullyAsBytes(InputStream inputStream)\r\n            throws IOException {\r\n        return readFully(inputStream).toByteArray();\r\n    }\r\n\r\n    private ByteArrayOutputStream readFully(InputStream inputStream)\r\n            throws IOException {\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        byte[] buffer = new byte[1024];\r\n        int length = 0;\r\n        while ((length = inputStream.read(buffer)) != -1) {\r\n            baos.write(buffer, 0, length);\r\n        }\r\n        return baos;\r\n    }\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>This is the best pure Java solution that fits perfectly for Android and any other JVM.</p>\n\n<p>This solution works amazingly well... it is simple, fast, and works on small and large streams just the same!! (see benchmark above.. <strong>No. 8</strong>)</p>\n\n<pre><code>public String readFullyAsString(InputStream inputStream, String encoding)\n        throws IOException {\n    return readFully(inputStream).toString(encoding);\n}\n\npublic byte[] readFullyAsBytes(InputStream inputStream)\n        throws IOException {\n    return readFully(inputStream).toByteArray();\n}\n\nprivate ByteArrayOutputStream readFully(InputStream inputStream)\n        throws IOException {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    byte[] buffer = new byte[1024];\n    int length = 0;\n    while ((length = inputStream.read(buffer)) != -1) {\n        baos.write(buffer, 0, length);\n    }\n    return baos;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":343253,"reputation":1224,"user_id":674856,"accept_rate":85,"display_name":"XXL"},"score":1,"creation_date":1342782813,"post_id":11566262,"comment_id":15318282,"body_markdown":"I get `java.io.StreamCorruptedException: invalid stream header`","body":"I get <code>java.io.StreamCorruptedException: invalid stream header</code>"},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":3,"creation_date":1364998633,"post_id":11566262,"comment_id":22450251,"body_markdown":"`ObjectInputStream` is about deserialization, and the stream have to respect the serialization protocol to work, which may not always true in the context of this question.","body":"<code>ObjectInputStream</code> is about deserialization, and the stream have to respect the serialization protocol to work, which may not always true in the context of this question."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1546684644,"post_id":11566262,"comment_id":94936700,"body_markdown":"An explanation would be in order.","body":"An explanation would be in order."}],"tags":[],"owner":{"account_id":404295,"reputation":429,"user_id":772549,"accept_rate":71,"display_name":"soBinary"},"comment_count":3,"down_vote_count":12,"up_vote_count":2,"is_accepted":false,"score":-10,"last_activity_date":1342719219,"creation_date":1342719219,"answer_id":11566262,"question_id":309424,"body_markdown":"Quick and easy:\r\n\r\n    String result = (String)new ObjectInputStream( inputStream ).readObject();","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Quick and easy:</p>\n\n<pre><code>String result = (String)new ObjectInputStream( inputStream ).readObject();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1684822,"reputation":380,"user_id":1548325,"display_name":"Anand N"},"comment_count":0,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1450257814,"creation_date":1343125159,"answer_id":11628754,"question_id":309424,"body_markdown":"The below code worked for me. \r\n\r\n    URL url = MyClass.class.getResource(&quot;/&quot; + configFileName);\r\n    BufferedInputStream bi = (BufferedInputStream) url.getContent();\r\n\tbyte[] buffer = new byte[bi.available() ];\r\n\tint bytesRead = bi.read(buffer);\r\n\tString out = new String(buffer);\r\n\r\nPlease note, according to Java docs, the `available()` method might not work with `InputStream` but always works with `BufferedInputStream`.\r\nIn case you don&#39;t want to use `available()` method we can always use the below code\r\n\r\n    URL url = MyClass.class.getResource(&quot;/&quot; + configFileName);\r\n\tBufferedInputStream bi = (BufferedInputStream) url.getContent();\r\n\tFile f = new File(url.getPath());\r\n\tbyte[] buffer = new byte[ (int) f.length()];\r\n\tint bytesRead = bi.read(buffer);\r\n\tString out = new String(buffer);\r\n\r\nI am not sure if there will be any encoding issues. Please comment, if there will be any issues with the code.","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>The below code worked for me. </p>\n\n<pre><code>URL url = MyClass.class.getResource(\"/\" + configFileName);\nBufferedInputStream bi = (BufferedInputStream) url.getContent();\nbyte[] buffer = new byte[bi.available() ];\nint bytesRead = bi.read(buffer);\nString out = new String(buffer);\n</code></pre>\n\n<p>Please note, according to Java docs, the <code>available()</code> method might not work with <code>InputStream</code> but always works with <code>BufferedInputStream</code>.\nIn case you don't want to use <code>available()</code> method we can always use the below code</p>\n\n<pre><code>URL url = MyClass.class.getResource(\"/\" + configFileName);\nBufferedInputStream bi = (BufferedInputStream) url.getContent();\nFile f = new File(url.getPath());\nbyte[] buffer = new byte[ (int) f.length()];\nint bytesRead = bi.read(buffer);\nString out = new String(buffer);\n</code></pre>\n\n<p>I am not sure if there will be any encoding issues. Please comment, if there will be any issues with the code.</p>\n"},{"tags":[],"owner":{"account_id":2003844,"reputation":159,"user_id":1794244,"display_name":"Matt Shannon"},"comment_count":0,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1407904209,"creation_date":1351859873,"answer_id":13195413,"question_id":309424,"body_markdown":"Here&#39;s how to do it using just the JDK using byte array buffers. This is actually how the commons-io `IOUtils.copy()` methods all work. You can replace `byte[]` with `char[]` if you&#39;re copying from a `Reader` instead of an `InputStream`.\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.InputStream;\r\n\r\n    ...\r\n\r\n    InputStream is = ....\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream(8192);\r\n    byte[] buffer = new byte[8192];\r\n    int count = 0;\r\n    try {\r\n      while ((count = is.read(buffer)) != -1) {\r\n        baos.write(buffer, 0, count);\r\n      }\r\n    }\r\n    finally {\r\n      try {\r\n        is.close();\r\n      }\r\n      catch (Exception ignore) {\r\n      }\r\n    }\r\n\r\n    String charset = &quot;UTF-8&quot;;\r\n    String inputStreamAsString = baos.toString(charset);\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Here's how to do it using just the JDK using byte array buffers. This is actually how the commons-io <code>IOUtils.copy()</code> methods all work. You can replace <code>byte[]</code> with <code>char[]</code> if you're copying from a <code>Reader</code> instead of an <code>InputStream</code>.</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\n\n...\n\nInputStream is = ....\nByteArrayOutputStream baos = new ByteArrayOutputStream(8192);\nbyte[] buffer = new byte[8192];\nint count = 0;\ntry {\n  while ((count = is.read(buffer)) != -1) {\n    baos.write(buffer, 0, count);\n  }\n}\nfinally {\n  try {\n    is.close();\n  }\n  catch (Exception ignore) {\n  }\n}\n\nString charset = \"UTF-8\";\nString inputStreamAsString = baos.toString(charset);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1632148,"reputation":11369,"user_id":1506477,"accept_rate":100,"display_name":"Thamme Gowda"},"comment_count":0,"down_vote_count":2,"up_vote_count":24,"is_accepted":false,"score":22,"last_activity_date":1700014378,"creation_date":1353155945,"answer_id":13430647,"question_id":309424,"body_markdown":"Make sure to close the streams at the end if you use Stream Readers\r\n\r\n    private String readStream(InputStream iStream) throws IOException {\r\n\r\n        // Build a Stream Reader, it can read character by character\r\n        InputStreamReader iStreamReader = new InputStreamReader(iStream);\r\n\r\n        // Build a buffered Reader, so that I can read whole line at once\r\n        BufferedReader bReader = new BufferedReader(iStreamReader);\r\n        String line = null;\r\n        StringBuilder builder = new StringBuilder();\r\n        while((line = bReader.readLine()) != null) {  // Read till end\r\n            builder.append(line);\r\n            builder.append(&quot;\\n&quot;); // Append new line to preserve lines\r\n        }\r\n        bReader.close();         // Close all opened stuff\r\n        iStreamReader.close();\r\n        //iStream.close(); // Let the creator of the stream close it!\r\n                           // some readers may auto close the inner stream\r\n        return builder.toString();\r\n    }\r\n\r\n----\r\n\r\nOn JDK 7+, you can use try-with-resources construct.\r\n\r\n    /**\r\n     * Reads the stream into a string\r\n     * @param iStream the input stream\r\n     * @return the string read from the stream\r\n     * @throws IOException when an IO error occurs\r\n     */\r\n    private String readStream(InputStream iStream) throws IOException {\r\n\r\n        // Buffered reader allows us to read line by line\r\n        try (BufferedReader bReader =\r\n                     new BufferedReader(new InputStreamReader(iStream))) {\r\n            StringBuilder builder = new StringBuilder();\r\n            String line;\r\n            while((line = bReader.readLine()) != null) {  // Read till end\r\n                builder.append(line);\r\n                builder.append(&quot;\\n&quot;); // Append new line to preserve lines\r\n            }\r\n            return builder.toString();\r\n        }\r\n    }\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Make sure to close the streams at the end if you use Stream Readers</p>\n<pre><code>private String readStream(InputStream iStream) throws IOException {\n\n    // Build a Stream Reader, it can read character by character\n    InputStreamReader iStreamReader = new InputStreamReader(iStream);\n\n    // Build a buffered Reader, so that I can read whole line at once\n    BufferedReader bReader = new BufferedReader(iStreamReader);\n    String line = null;\n    StringBuilder builder = new StringBuilder();\n    while((line = bReader.readLine()) != null) {  // Read till end\n        builder.append(line);\n        builder.append(&quot;\\n&quot;); // Append new line to preserve lines\n    }\n    bReader.close();         // Close all opened stuff\n    iStreamReader.close();\n    //iStream.close(); // Let the creator of the stream close it!\n                       // some readers may auto close the inner stream\n    return builder.toString();\n}\n</code></pre>\n<hr />\n<p>On JDK 7+, you can use try-with-resources construct.</p>\n<pre><code>/**\n * Reads the stream into a string\n * @param iStream the input stream\n * @return the string read from the stream\n * @throws IOException when an IO error occurs\n */\nprivate String readStream(InputStream iStream) throws IOException {\n\n    // Buffered reader allows us to read line by line\n    try (BufferedReader bReader =\n                 new BufferedReader(new InputStreamReader(iStream))) {\n        StringBuilder builder = new StringBuilder();\n        String line;\n        while((line = bReader.readLine()) != null) {  // Read till end\n            builder.append(line);\n            builder.append(&quot;\\n&quot;); // Append new line to preserve lines\n        }\n        return builder.toString();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12585,"reputation":303280,"user_id":24874,"accept_rate":78,"display_name":"Drew Noakes"},"comment_count":0,"down_vote_count":5,"up_vote_count":73,"is_accepted":false,"score":68,"last_activity_date":1386434370,"creation_date":1357011827,"answer_id":14107694,"question_id":309424,"body_markdown":"Here&#39;s the most elegant, pure-Java (no library) solution I came up with after some experimentation:\r\n\r\n    public static String fromStream(InputStream in) throws IOException\r\n    {\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(in));\r\n        StringBuilder out = new StringBuilder();\r\n        String newLine = System.getProperty(&quot;line.separator&quot;);\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            out.append(line);\r\n            out.append(newLine);\r\n        }\r\n        return out.toString();\r\n    }","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Here's the most elegant, pure-Java (no library) solution I came up with after some experimentation:</p>\n\n<pre><code>public static String fromStream(InputStream in) throws IOException\n{\n    BufferedReader reader = new BufferedReader(new InputStreamReader(in));\n    StringBuilder out = new StringBuilder();\n    String newLine = System.getProperty(\"line.separator\");\n    String line;\n    while ((line = reader.readLine()) != null) {\n        out.append(line);\n        out.append(newLine);\n    }\n    return out.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user246645"},"score":1,"creation_date":1383906449,"post_id":15315403,"comment_id":29532479,"body_markdown":"Since you&#39;re using `buffer` variable locally with no chance of being shared across multiple threads you should consider changing its type to `StringBuilder`, to avoid the overhead of (useless) synchronization.","body":"Since you&#39;re using <code>buffer</code> variable locally with no chance of being shared across multiple threads you should consider changing its type to <code>StringBuilder</code>, to avoid the overhead of (useless) synchronization."},{"owner":{"account_id":533594,"reputation":3851,"user_id":903998,"accept_rate":75,"display_name":"Victor"},"score":0,"creation_date":1383927584,"post_id":15315403,"comment_id":29544475,"body_markdown":"That&#39;s a good point alex!. I thing that we both agree that this method isn&#39;t thread-safe in many ways. Even the input stream operations aren&#39;t thread-safe.","body":"That&#39;s a good point alex!. I thing that we both agree that this method isn&#39;t thread-safe in many ways. Even the input stream operations aren&#39;t thread-safe."},{"owner":{"account_id":105507,"reputation":470,"user_id":281508,"display_name":"Vlad Lifliand"},"score":1,"creation_date":1407538065,"post_id":15315403,"comment_id":39269492,"body_markdown":"If the stream contains UTF-8 character that spans across several lines, this algorithm can cut the character in two breaking the string.","body":"If the stream contains UTF-8 character that spans across several lines, this algorithm can cut the character in two breaking the string."},{"owner":{"account_id":4355473,"reputation":17255,"user_id":3554264,"accept_rate":62,"display_name":"Christian Hujer"},"score":1,"creation_date":1454277901,"post_id":15315403,"comment_id":57960741,"body_markdown":"@VladLifliand How exactly would a UTF-8 character manage to span across several lines? That&#39;s impossible by definition. You probably meant something else.","body":"@VladLifliand How exactly would a UTF-8 character manage to span across several lines? That&#39;s impossible by definition. You probably meant something else."},{"owner":{"account_id":1685307,"reputation":1623,"user_id":1548776,"display_name":"á´ ÉªÉ´á´á´É´á´"},"score":0,"creation_date":1552853251,"post_id":15315403,"comment_id":97158695,"body_markdown":"@ChristianHujer He probably means `buffers` instead of `lines`. UTF-8 codepoints/characters can be multi-byte.","body":"@ChristianHujer He probably means <code>buffers</code> instead of <code>lines</code>. UTF-8 codepoints/characters can be multi-byte."},{"owner":{"account_id":4355473,"reputation":17255,"user_id":3554264,"accept_rate":62,"display_name":"Christian Hujer"},"score":0,"creation_date":1552982863,"post_id":15315403,"comment_id":97205473,"body_markdown":"Oh yes, they can, and most of them are, multi-byte in UTF-8. Only US-ASCII-7 is not multi-byte in UTF-8. If it&#39;s buffers, as in the code, it makes sense. Just not with lines.","body":"Oh yes, they can, and most of them are, multi-byte in UTF-8. Only US-ASCII-7 is not multi-byte in UTF-8. If it&#39;s buffers, as in the code, it makes sense. Just not with lines."}],"tags":[],"owner":{"account_id":533594,"reputation":3851,"user_id":903998,"accept_rate":75,"display_name":"Victor"},"comment_count":6,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1546684688,"creation_date":1362860029,"answer_id":15315403,"question_id":309424,"body_markdown":"Well, you can program it for yourself... It&#39;s not complicated...\r\n\r\n    String Inputstream2String (InputStream is) throws IOException\r\n        {\r\n            final int PKG_SIZE = 1024;\r\n            byte[] data = new byte [PKG_SIZE];\r\n            StringBuilder buffer = new StringBuilder(PKG_SIZE * 10);\r\n            int size;\r\n\r\n            size = is.read(data, 0, data.length);\r\n            while (size &gt; 0)\r\n            {\r\n                String str = new String(data, 0, size);\r\n                buffer.append(str);\r\n                size = is.read(data, 0, data.length);\r\n            }\r\n            return buffer.toString();\r\n        }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Well, you can program it for yourself... It's not complicated...</p>\n\n<pre><code>String Inputstream2String (InputStream is) throws IOException\n    {\n        final int PKG_SIZE = 1024;\n        byte[] data = new byte [PKG_SIZE];\n        StringBuilder buffer = new StringBuilder(PKG_SIZE * 10);\n        int size;\n\n        size = is.read(data, 0, data.length);\n        while (size &gt; 0)\n        {\n            String str = new String(data, 0, size);\n            buffer.append(str);\n            size = is.read(data, 0, data.length);\n        }\n        return buffer.toString();\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":435063,"reputation":4304,"user_id":821436,"accept_rate":79,"display_name":"Martin Schr&#246;der"},"score":0,"creation_date":1368631412,"post_id":16487716,"comment_id":23806798,"body_markdown":"See the commet by ChristofferHammarstr&#246;m in the answer by HarryLime.","body":"See the commet by ChristofferHammarstr&#246;m in the answer by HarryLime."},{"owner":{"account_id":2751669,"reputation":1,"user_id":2370932,"display_name":"FK386"},"score":0,"creation_date":1485533166,"post_id":16487716,"comment_id":70978697,"body_markdown":"There is nothing in the question that would remotely suggest to which charset to convert to or that the solution should be immune to any charset.","body":"There is nothing in the question that would remotely suggest to which charset to convert to or that the solution should be immune to any charset."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1546684719,"post_id":16487716,"comment_id":94936722,"body_markdown":"An explanation would be in order.","body":"An explanation would be in order."}],"tags":[],"owner":{"account_id":2751669,"reputation":1,"user_id":2370932,"display_name":"FK386"},"comment_count":3,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1368206715,"creation_date":1368206715,"answer_id":16487716,"question_id":309424,"body_markdown":"      InputStream IS=new URL(&quot;http://www.petrol.si/api/gas_prices.json&quot;).openStream();   \r\n         \r\n      ByteArrayOutputStream BAOS=new ByteArrayOutputStream();\r\n      IOUtils.copy(IS, BAOS);\r\n      String d= new String(BAOS.toByteArray(),&quot;UTF-8&quot;);           \r\n        \r\n    System.out.println(d);","title":"How do I read / convert an InputStream into a String in Java?","body":"<pre><code>  InputStream IS=new URL(\"http://www.petrol.si/api/gas_prices.json\").openStream();   \n\n  ByteArrayOutputStream BAOS=new ByteArrayOutputStream();\n  IOUtils.copy(IS, BAOS);\n  String d= new String(BAOS.toByteArray(),\"UTF-8\");           \n\nSystem.out.println(d);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2078676,"reputation":2468,"user_id":1851302,"accept_rate":62,"display_name":"KNU"},"score":0,"creation_date":1396870466,"post_id":16839350,"comment_id":34967643,"body_markdown":"will it work if last 2 lines are inserted in `do-while` loop?","body":"will it work if last 2 lines are inserted in <code>do-while</code> loop?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1487895005,"post_id":16839350,"comment_id":72002582,"body_markdown":"There is nothing in the question about lines.","body":"There is nothing in the question about lines."}],"tags":[],"owner":{"account_id":2834149,"reputation":69,"user_id":2435085,"display_name":"Omkar Khot"},"comment_count":2,"down_vote_count":6,"up_vote_count":8,"is_accepted":false,"score":2,"last_activity_date":1450257870,"creation_date":1369925544,"answer_id":16839350,"question_id":309424,"body_markdown":"    InputStreamReader i = new InputStreamReader(s);\r\n    BufferedReader str = new BufferedReader(i);\r\n    String msg = str.readLine();\r\n    System.out.println(msg);\r\n\r\n\r\nHere s is your `InputStream` object which will get convert into `String` ","title":"How do I read / convert an InputStream into a String in Java?","body":"<pre><code>InputStreamReader i = new InputStreamReader(s);\nBufferedReader str = new BufferedReader(i);\nString msg = str.readLine();\nSystem.out.println(msg);\n</code></pre>\n\n<p>Here s is your <code>InputStream</code> object which will get convert into <code>String</code> </p>\n"},{"tags":[],"owner":{"account_id":189319,"reputation":1635,"user_id":428594,"display_name":"voidmain"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1386265987,"creation_date":1386265987,"answer_id":20407168,"question_id":309424,"body_markdown":"JDK 7/8 answer that closes the stream and still throws an IOException:\r\n\r\n    StringBuilder build = new StringBuilder();\r\n    byte[] buf = new byte[1024];\r\n    int length;\r\n    try (InputStream is = getInputStream()) {\r\n      while ((length = is.read(buf)) != -1) {\r\n        build.append(new String(buf, 0, length));\r\n      }\r\n    }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>JDK 7/8 answer that closes the stream and still throws an IOException:</p>\n\n<pre><code>StringBuilder build = new StringBuilder();\nbyte[] buf = new byte[1024];\nint length;\ntry (InputStream is = getInputStream()) {\n  while ((length = is.read(buf)) != -1) {\n    build.append(new String(buf, 0, length));\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":3,"creation_date":1538594037,"post_id":21163930,"comment_id":92201575,"body_markdown":"What is difference between first 2 methods?","body":"What is difference between first 2 methods?"}],"tags":[],"owner":{"account_id":2554764,"reputation":5004,"user_id":2217011,"accept_rate":91,"display_name":"Rys"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1700014593,"creation_date":1389881025,"answer_id":21163930,"question_id":309424,"body_markdown":"You can use [Apache Commons][1].\r\n\r\nIn the *IOUtils* you can find the *toString* method with three helpful implementations.\r\n\r\n    public static String toString(InputStream input) throws IOException {\r\n            return toString(input, Charset.defaultCharset());\r\n    }\r\n\r\n    public static String toString(InputStream input) throws IOException {\r\n            return toString(input, Charset.defaultCharset());\r\n    }\r\n\r\n    public static String toString(InputStream input, String encoding)\r\n                throws IOException {\r\n            return toString(input, Charsets.toCharset(encoding));\r\n    }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Commons\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>You can use <a href=\"https://en.wikipedia.org/wiki/Apache_Commons\" rel=\"nofollow noreferrer\">Apache Commons</a>.</p>\n<p>In the <em>IOUtils</em> you can find the <em>toString</em> method with three helpful implementations.</p>\n<pre><code>public static String toString(InputStream input) throws IOException {\n        return toString(input, Charset.defaultCharset());\n}\n\npublic static String toString(InputStream input) throws IOException {\n        return toString(input, Charset.defaultCharset());\n}\n\npublic static String toString(InputStream input, String encoding)\n            throws IOException {\n        return toString(input, Charsets.toCharset(encoding));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2879284,"reputation":12218,"user_id":2470524,"accept_rate":34,"display_name":"Fred"},"score":3,"creation_date":1392909874,"post_id":21619906,"comment_id":33186444,"body_markdown":"String concatenation in a loop with the `+=` operator is not a good idea. It is better to use a `StringBuilder` or a `StringBuffer`.","body":"String concatenation in a loop with the <code>+=</code> operator is not a good idea. It is better to use a <code>StringBuilder</code> or a <code>StringBuffer</code>."}],"tags":[],"owner":{"account_id":2985035,"reputation":8984,"user_id":2534090,"accept_rate":34,"display_name":"JavaTechnical"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1450257972,"creation_date":1391750231,"answer_id":21619906,"question_id":309424,"body_markdown":"Try these 4 statements..\r\n\r\nAs per the point recalled by Fred, it is not recommended to append a `String` with `+=` operator since every time a new `char` is appended to the existing `String` creating a new `String` object again and assigning its address to `st` while the old `st` object becomes garbage.\r\n\r\n    public String convertStreamToString(InputStream is)\r\n    {\r\n        int k;\r\n        StringBuffer sb=new StringBuffer();\r\n        while((k=fin.read()) != -1)\r\n        {\r\n            sb.append((char)k);\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n----------\r\n**Not recommended, but this is also a way**\r\n\r\n    public String convertStreamToString(InputStream is) { \r\n        int k;\r\n        String st=&quot;&quot;;\r\n        while((k=is.read()) != -1)\r\n        {\r\n            st+=(char)k;\r\n        }\r\n        return st;\r\n    }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Try these 4 statements..</p>\n\n<p>As per the point recalled by Fred, it is not recommended to append a <code>String</code> with <code>+=</code> operator since every time a new <code>char</code> is appended to the existing <code>String</code> creating a new <code>String</code> object again and assigning its address to <code>st</code> while the old <code>st</code> object becomes garbage.</p>\n\n<pre><code>public String convertStreamToString(InputStream is)\n{\n    int k;\n    StringBuffer sb=new StringBuffer();\n    while((k=fin.read()) != -1)\n    {\n        sb.append((char)k);\n    }\n    return sb.toString();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Not recommended, but this is also a way</strong></p>\n\n<pre><code>public String convertStreamToString(InputStream is) { \n    int k;\n    String st=\"\";\n    while((k=is.read()) != -1)\n    {\n        st+=(char)k;\n    }\n    return st;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2879284,"reputation":12218,"user_id":2470524,"accept_rate":34,"display_name":"Fred"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1392910139,"creation_date":1392910139,"answer_id":21912248,"question_id":309424,"body_markdown":"This snippet was found in \\sdk\\samples\\android-19\\connectivity\\NetworkConnect\\NetworkConnectSample\\src\\main\\java\\com\\example\\android\\networkconnect\\MainActivity.java which is licensed under Apache License, Version 2.0 and written by Google.\r\n\r\n    /** Reads an InputStream and converts it to a String.\r\n     * @param stream InputStream containing HTML from targeted site.\r\n     * @param len Length of string that this method returns.\r\n     * @return String concatenated according to len parameter.\r\n     * @throws java.io.IOException\r\n     * @throws java.io.UnsupportedEncodingException\r\n     */\r\n    private String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {\r\n        Reader reader = null;\r\n        reader = new InputStreamReader(stream, &quot;UTF-8&quot;);\r\n        char[] buffer = new char[len];\r\n        reader.read(buffer);\r\n        return new String(buffer);\r\n    }","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>This snippet was found in \\sdk\\samples\\android-19\\connectivity\\NetworkConnect\\NetworkConnectSample\\src\\main\\java\\com\\example\\android\\networkconnect\\MainActivity.java which is licensed under Apache License, Version 2.0 and written by Google.</p>\n\n<pre><code>/** Reads an InputStream and converts it to a String.\n * @param stream InputStream containing HTML from targeted site.\n * @param len Length of string that this method returns.\n * @return String concatenated according to len parameter.\n * @throws java.io.IOException\n * @throws java.io.UnsupportedEncodingException\n */\nprivate String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {\n    Reader reader = null;\n    reader = new InputStreamReader(stream, \"UTF-8\");\n    char[] buffer = new char[len];\n    reader.read(buffer);\n    return new String(buffer);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1051445,"reputation":5523,"user_id":1055284,"accept_rate":100,"display_name":"Ben Barkay"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1700014736,"creation_date":1392917078,"answer_id":21915153,"question_id":309424,"body_markdown":"I have written a class that does just that. Sometimes you don&#39;t want to add [Apache Commons][1] just for one thing, and want something dumber than Scanner that doesn&#39;t examine the content.\r\n\r\nUsage is as follows\r\n\r\n    // Read from InputStream\r\n    String data = new ReaderSink(inputStream, Charset.forName(&quot;UTF-8&quot;)).drain();\r\n\r\n    // Read from File\r\n    data = new ReaderSink(file, Charset.forName(&quot;UTF-8&quot;)).drain();\r\n\r\n    // Drain input stream to console\r\n    new ReaderSink(inputStream, Charset.forName(&quot;UTF-8&quot;)).drainTo(System.out);\r\n\r\nHere is the code for ReaderSink:\r\n\r\n    import java.io.*;\r\n    import java.nio.charset.Charset;\r\n\r\n    /**\r\n     * A simple sink class that drains a {@link Reader} to a {@link String} or\r\n     * to a {@link Writer}.\r\n     *\r\n     * @author Ben Barkay\r\n     * @version 2/20/2014\r\n     */\r\n    public class ReaderSink {\r\n        /**\r\n         * The default buffer size to use if no buffer size was specified.\r\n         */\r\n        public static final int DEFAULT_BUFFER_SIZE = 1024;\r\n\r\n        /**\r\n         * The {@link Reader} that will be drained.\r\n         */\r\n        private final Reader in;\r\n\r\n        /**\r\n         * Constructs a new {@code ReaderSink} for the specified file and charset.\r\n         * @param file      The file to read from.\r\n         * @param charset   The charset to use.\r\n         * @throws FileNotFoundException    If the file was not found on the filesystem.\r\n         */\r\n        public ReaderSink(File file, Charset charset) throws FileNotFoundException {\r\n            this(new FileInputStream(file), charset);\r\n        }\r\n\r\n        /**\r\n         * Constructs a new {@code ReaderSink} for the specified {@link InputStream}.\r\n         * @param in        The {@link InputStream} to drain.\r\n         * @param charset   The charset to use.\r\n         */\r\n        public ReaderSink(InputStream in, Charset charset) {\r\n            this(new InputStreamReader(in, charset));\r\n        }\r\n\r\n        /**\r\n         * Constructs a new {@code ReaderSink} for the specified {@link Reader}.\r\n         * @param in    The reader to drain.\r\n         */\r\n        public ReaderSink(Reader in) {\r\n            this.in = in;\r\n        }\r\n\r\n        /**\r\n         * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\r\n         * all of the read information. This method will use {@link #DEFAULT_BUFFER_SIZE} for\r\n         * its buffer size.\r\n         * @return  A {@link String} containing all of the information that was read.\r\n         */\r\n        public String drain() throws IOException {\r\n            return drain(DEFAULT_BUFFER_SIZE);\r\n        }\r\n\r\n        /**\r\n         * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\r\n         * all of the read information.\r\n         * @param bufferSize    The size of the buffer to use when reading.\r\n         * @return  A {@link String} containing all of the information that was read.\r\n         */\r\n        public String drain(int bufferSize) throws IOException {\r\n            StringWriter stringWriter = new StringWriter();\r\n            drainTo(stringWriter, bufferSize);\r\n            return stringWriter.toString();\r\n        }\r\n\r\n        /**\r\n         * Drains the data from the underlying {@link Reader}, writing it to the\r\n         * specified {@link Writer}. This method will use {@link #DEFAULT_BUFFER_SIZE} for\r\n         * its buffer size.\r\n         * @param out   The {@link Writer} to write to.\r\n         */\r\n        public void drainTo(Writer out) throws IOException {\r\n            drainTo(out, DEFAULT_BUFFER_SIZE);\r\n        }\r\n\r\n        /**\r\n         * Drains the data from the underlying {@link Reader}, writing it to the\r\n         * specified {@link Writer}.\r\n         * @param out           The {@link Writer} to write to.\r\n         * @param bufferSize    The size of the buffer to use when reader.\r\n         */\r\n        public void drainTo(Writer out, int bufferSize) throws IOException {\r\n            char[] buffer = new char[bufferSize];\r\n            int read;\r\n            while ((read = in.read(buffer)) &gt; -1) {\r\n                out.write(buffer, 0, read);\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Commons\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I have written a class that does just that. Sometimes you don't want to add <a href=\"https://en.wikipedia.org/wiki/Apache_Commons\" rel=\"nofollow noreferrer\">Apache Commons</a> just for one thing, and want something dumber than Scanner that doesn't examine the content.</p>\n<p>Usage is as follows</p>\n<pre><code>// Read from InputStream\nString data = new ReaderSink(inputStream, Charset.forName(&quot;UTF-8&quot;)).drain();\n\n// Read from File\ndata = new ReaderSink(file, Charset.forName(&quot;UTF-8&quot;)).drain();\n\n// Drain input stream to console\nnew ReaderSink(inputStream, Charset.forName(&quot;UTF-8&quot;)).drainTo(System.out);\n</code></pre>\n<p>Here is the code for ReaderSink:</p>\n<pre><code>import java.io.*;\nimport java.nio.charset.Charset;\n\n/**\n * A simple sink class that drains a {@link Reader} to a {@link String} or\n * to a {@link Writer}.\n *\n * @author Ben Barkay\n * @version 2/20/2014\n */\npublic class ReaderSink {\n    /**\n     * The default buffer size to use if no buffer size was specified.\n     */\n    public static final int DEFAULT_BUFFER_SIZE = 1024;\n\n    /**\n     * The {@link Reader} that will be drained.\n     */\n    private final Reader in;\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified file and charset.\n     * @param file      The file to read from.\n     * @param charset   The charset to use.\n     * @throws FileNotFoundException    If the file was not found on the filesystem.\n     */\n    public ReaderSink(File file, Charset charset) throws FileNotFoundException {\n        this(new FileInputStream(file), charset);\n    }\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified {@link InputStream}.\n     * @param in        The {@link InputStream} to drain.\n     * @param charset   The charset to use.\n     */\n    public ReaderSink(InputStream in, Charset charset) {\n        this(new InputStreamReader(in, charset));\n    }\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified {@link Reader}.\n     * @param in    The reader to drain.\n     */\n    public ReaderSink(Reader in) {\n        this.in = in;\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\n     * all of the read information. This method will use {@link #DEFAULT_BUFFER_SIZE} for\n     * its buffer size.\n     * @return  A {@link String} containing all of the information that was read.\n     */\n    public String drain() throws IOException {\n        return drain(DEFAULT_BUFFER_SIZE);\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\n     * all of the read information.\n     * @param bufferSize    The size of the buffer to use when reading.\n     * @return  A {@link String} containing all of the information that was read.\n     */\n    public String drain(int bufferSize) throws IOException {\n        StringWriter stringWriter = new StringWriter();\n        drainTo(stringWriter, bufferSize);\n        return stringWriter.toString();\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, writing it to the\n     * specified {@link Writer}. This method will use {@link #DEFAULT_BUFFER_SIZE} for\n     * its buffer size.\n     * @param out   The {@link Writer} to write to.\n     */\n    public void drainTo(Writer out) throws IOException {\n        drainTo(out, DEFAULT_BUFFER_SIZE);\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, writing it to the\n     * specified {@link Writer}.\n     * @param out           The {@link Writer} to write to.\n     * @param bufferSize    The size of the buffer to use when reader.\n     */\n    public void drainTo(Writer out, int bufferSize) throws IOException {\n        char[] buffer = new char[bufferSize];\n        int read;\n        while ((read = in.read(buffer)) &gt; -1) {\n            out.write(buffer, 0, read);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":952236,"reputation":3228,"user_id":978136,"accept_rate":56,"display_name":"laksys"},"comment_count":0,"down_vote_count":2,"up_vote_count":19,"is_accepted":false,"score":17,"last_activity_date":1450257636,"creation_date":1397039872,"answer_id":22960005,"question_id":309424,"body_markdown":"Here is the complete method for converting `InputStream` into `String` without using any third party library. Use `StringBuilder` for single threaded environment otherwise use `StringBuffer`.  \r\n\r\n    public static String getString( InputStream is) throws IOException {\r\n        int ch;\r\n        StringBuilder sb = new StringBuilder();\r\n        while((ch = is.read()) != -1)\r\n            sb.append((char)ch);\r\n        return sb.toString();\r\n    }","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Here is the complete method for converting <code>InputStream</code> into <code>String</code> without using any third party library. Use <code>StringBuilder</code> for single threaded environment otherwise use <code>StringBuffer</code>.  </p>\n\n<pre><code>public static String getString( InputStream is) throws IOException {\n    int ch;\n    StringBuilder sb = new StringBuilder();\n    while((ch = is.read()) != -1)\n        sb.append((char)ch);\n    return sb.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":116723,"reputation":30387,"user_id":305973,"accept_rate":67,"display_name":"robinst"},"score":4,"creation_date":1407995511,"post_id":23615823,"comment_id":39433231,"body_markdown":"-1. Just because something is available doesn&#39;t mean it should be used. When you switch the logging provider, you&#39;re going to have to replace this. Also, it looks like it is internal and shouldn&#39;t really be used outside of log4j.","body":"-1. Just because something is available doesn&#39;t mean it should be used. When you switch the logging provider, you&#39;re going to have to replace this. Also, it looks like it is internal and shouldn&#39;t really be used outside of log4j."}],"tags":[],"owner":{"account_id":96552,"reputation":4211,"user_id":262379,"accept_rate":54,"display_name":"Dinis Cruz"},"comment_count":1,"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1700014914,"creation_date":1399917879,"answer_id":23615823,"question_id":309424,"body_markdown":"I had [Log4j][1] available, so I was able to use the *org.apache.log4j.lf5.util.StreamUtils.getBytes* method to get the bytes, which I was able to convert into a string using the String constructor:\r\n\r\n    String result = new String(StreamUtils.getBytes(inputStream));\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Log4j\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I had <a href=\"https://en.wikipedia.org/wiki/Log4j\" rel=\"nofollow noreferrer\">Log4j</a> available, so I was able to use the <em>org.apache.log4j.lf5.util.StreamUtils.getBytes</em> method to get the bytes, which I was able to convert into a string using the String constructor:</p>\n<pre><code>String result = new String(StreamUtils.getBytes(inputStream));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1700015095,"creation_date":1402213590,"answer_id":24104048,"question_id":309424,"body_markdown":"This one is nice because:\r\n\r\n - It safely handles the Charset.\r\n - You control the read buffer size.\r\n - You can provision the length of the builder and it doesn&#39;t have to be an exact value.\r\n - Is free from library dependencies.\r\n - Is for Java 7 or higher.\r\n\r\n*How to do it*\r\n\r\n    public static String convertStreamToString(InputStream is) throws IOException {\r\n       StringBuilder sb = new StringBuilder(2048); // Define a size if you have an idea of it.\r\n       char[] read = new char[128]; // Your buffer size.\r\n       try (InputStreamReader ir = new InputStreamReader(is, StandardCharsets.UTF_8)) {\r\n         for (int i; -1 != (i = ir.read(read)); sb.append(read, 0, i));\r\n       }\r\n       return sb.toString();\r\n    }\r\n\r\nFor JDK 9\r\n\r\n    public static String inputStreamString(InputStream inputStream) throws IOException {\r\n        try (inputStream) {\r\n            return new String(inputStream.readAllBytes(), StandardCharsets.UTF_8);\r\n        }\r\n    }\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>This one is nice because:</p>\n<ul>\n<li>It safely handles the Charset.</li>\n<li>You control the read buffer size.</li>\n<li>You can provision the length of the builder and it doesn't have to be an exact value.</li>\n<li>Is free from library dependencies.</li>\n<li>Is for Java 7 or higher.</li>\n</ul>\n<p><em>How to do it</em></p>\n<pre><code>public static String convertStreamToString(InputStream is) throws IOException {\n   StringBuilder sb = new StringBuilder(2048); // Define a size if you have an idea of it.\n   char[] read = new char[128]; // Your buffer size.\n   try (InputStreamReader ir = new InputStreamReader(is, StandardCharsets.UTF_8)) {\n     for (int i; -1 != (i = ir.read(read)); sb.append(read, 0, i));\n   }\n   return sb.toString();\n}\n</code></pre>\n<p>For JDK 9</p>\n<pre><code>public static String inputStreamString(InputStream inputStream) throws IOException {\n    try (inputStream) {\n        return new String(inputStream.readAllBytes(), StandardCharsets.UTF_8);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700015136,"post_id":24810414,"comment_id":136602226,"body_markdown":"What *are* the tricks? Can you [add](https://stackoverflow.com/posts/24810414/edit) a description? (But *** *** *** *** *** *** *** *** *** *** *** *** *** ***[without](https://meta.stackexchange.com/a/131011)*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today.)","body":"What <i>are</i> the tricks? Can you <a href=\"https://stackoverflow.com/posts/24810414/edit\">add</a> a description? (But *** *** *** *** *** *** *** *** *** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today.)"}],"tags":[],"owner":{"account_id":2993944,"reputation":3900,"user_id":3040627,"accept_rate":100,"display_name":"Simon Kuang"},"comment_count":1,"down_vote_count":3,"up_vote_count":47,"is_accepted":false,"score":44,"last_activity_date":1436958234,"creation_date":1405619882,"answer_id":24810414,"question_id":309424,"body_markdown":"I&#39;d use some Java 8 tricks.\r\n\r\n    public static String streamToString(final InputStream inputStream) throws Exception {\r\n        // buffering optional\r\n        try\r\n        (\r\n            final BufferedReader br\r\n               = new BufferedReader(new InputStreamReader(inputStream))\r\n        ) {\r\n            // parallel optional\r\n            return br.lines().parallel().collect(Collectors.joining(&quot;\\n&quot;));\r\n        } catch (final IOException e) {\r\n            throw new RuntimeException(e);\r\n            // whatever.\r\n        }\r\n    }\r\n\r\nEssentially the same as some other answers except more succinct.","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I'd use some Java 8 tricks.</p>\n\n<pre><code>public static String streamToString(final InputStream inputStream) throws Exception {\n    // buffering optional\n    try\n    (\n        final BufferedReader br\n           = new BufferedReader(new InputStreamReader(inputStream))\n    ) {\n        // parallel optional\n        return br.lines().parallel().collect(Collectors.joining(\"\\n\"));\n    } catch (final IOException e) {\n        throw new RuntimeException(e);\n        // whatever.\n    }\n}\n</code></pre>\n\n<p>Essentially the same as some other answers except more succinct.</p>\n"},{"tags":[],"owner":{"account_id":2815255,"reputation":5623,"user_id":2420519,"accept_rate":50,"display_name":"Hai Zhang"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1700016086,"creation_date":1407059276,"answer_id":25103484,"question_id":309424,"body_markdown":"This is an answer adapted from `org.apache.commons.io.IOUtils` [source code](http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/2.4/org/apache/commons/io/IOUtils.java), for those who want to have the Apache implementation, but do not want the whole library.\r\n\r\n    private static final int BUFFER_SIZE = 4 * 1024;\r\n\r\n    public static String inputStreamToString(InputStream inputStream, String charsetName)\r\n            throws IOException {\r\n        StringBuilder builder = new StringBuilder();\r\n        InputStreamReader reader = new InputStreamReader(inputStream, charsetName);\r\n        char[] buffer = new char[BUFFER_SIZE];\r\n        int length;\r\n        while ((length = reader.read(buffer)) != -1) {\r\n            builder.append(buffer, 0, length);\r\n        }\r\n        return builder.toString();\r\n    }\r\n\r\n\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>This is an answer adapted from <code>org.apache.commons.io.IOUtils</code> <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/2.4/org/apache/commons/io/IOUtils.java\" rel=\"nofollow noreferrer\">source code</a>, for those who want to have the Apache implementation, but do not want the whole library.</p>\n<pre><code>private static final int BUFFER_SIZE = 4 * 1024;\n\npublic static String inputStreamToString(InputStream inputStream, String charsetName)\n        throws IOException {\n    StringBuilder builder = new StringBuilder();\n    InputStreamReader reader = new InputStreamReader(inputStream, charsetName);\n    char[] buffer = new char[BUFFER_SIZE];\n    int length;\n    while ((length = reader.read(buffer)) != -1) {\n        builder.append(buffer, 0, length);\n    }\n    return builder.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3766062,"reputation":5113,"user_id":3129572,"display_name":"Vaishali Sutariya"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1453994702,"creation_date":1408969846,"answer_id":25486003,"question_id":309424,"body_markdown":"    InputStream is = Context.openFileInput(someFileName); // whatever format you have\r\n    \r\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n\r\n    byte[] b = new byte[8192];\r\n    for (int bytesRead; (bytesRead = is.read(b)) != -1;) {\r\n        bos.write(b, 0, bytesRead);\r\n    }\r\n\r\n    String output = bos.toString(someEncoding);","title":"How do I read / convert an InputStream into a String in Java?","body":"<pre><code>InputStream is = Context.openFileInput(someFileName); // whatever format you have\n\nByteArrayOutputStream bos = new ByteArrayOutputStream();\n\nbyte[] b = new byte[8192];\nfor (int bytesRead; (bytesRead = is.read(b)) != -1;) {\n    bos.write(b, 0, bytesRead);\n}\n\nString output = bos.toString(someEncoding);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1410423745,"creation_date":1410423745,"answer_id":25782577,"question_id":309424,"body_markdown":"The following doesn&#39;t address the original question, but rather some of the responses.\r\n\r\nSeveral responses suggest loops of the form\r\n\r\n    String line = null;\r\n    while((line = reader.readLine()) != null) {\r\n      // ...\r\n    }\r\n\r\nor\r\n\r\n    for(String line = reader.readLine(); line != null; line = reader.readLine()) {\r\n        // ...\r\n    }\r\n\r\nThe first form pollutes the namespace of the enclosing scope by declaring a variable &quot;read&quot; in the enclosing scope that will not be used for anything outside the for loop. The second form duplicates the readline() call.\r\n\r\nHere is a much cleaner way of writing this sort of loop in Java. It turns out that the first clause in a for-loop doesn&#39;t require an actual initializer value. This keeps the scope of the variable &quot;line&quot; to within the body of the for loop. Much more elegant! I haven&#39;t seen anybody using this form anywhere (I randomly discovered it one day years ago), but I use it all the time.\r\n\r\n    for (String line; (line = reader.readLine()) != null; ) {\r\n        //...\r\n    }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>The following doesn't address the original question, but rather some of the responses.</p>\n\n<p>Several responses suggest loops of the form</p>\n\n<pre><code>String line = null;\nwhile((line = reader.readLine()) != null) {\n  // ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for(String line = reader.readLine(); line != null; line = reader.readLine()) {\n    // ...\n}\n</code></pre>\n\n<p>The first form pollutes the namespace of the enclosing scope by declaring a variable \"read\" in the enclosing scope that will not be used for anything outside the for loop. The second form duplicates the readline() call.</p>\n\n<p>Here is a much cleaner way of writing this sort of loop in Java. It turns out that the first clause in a for-loop doesn't require an actual initializer value. This keeps the scope of the variable \"line\" to within the body of the for loop. Much more elegant! I haven't seen anybody using this form anywhere (I randomly discovered it one day years ago), but I use it all the time.</p>\n\n<pre><code>for (String line; (line = reader.readLine()) != null; ) {\n    //...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":53428,"reputation":8315,"user_id":159679,"accept_rate":64,"display_name":"Alex"},"comment_count":0,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1700015372,"creation_date":1423012344,"answer_id":28311797,"question_id":309424,"body_markdown":"Kotlin users simply do:\r\n\r\n    println(InputStreamReader(is).readText())\r\n\r\nwhereas\r\n\r\n    readText()\r\n\r\nis the Kotlin standard libraryâs built-in extension method.\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Kotlin users simply do:</p>\n<pre><code>println(InputStreamReader(is).readText())\n</code></pre>\n<p>whereas</p>\n<pre><code>readText()\n</code></pre>\n<p>is the Kotlin standard libraryâs built-in extension method.</p>\n"},{"tags":[],"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"comment_count":0,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1424976625,"creation_date":1424975992,"answer_id":28750240,"question_id":309424,"body_markdown":"Pure Java solution using [Stream][1]s, works since Java 8.\r\n\r\n&lt;!-- lang:java --&gt;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.util.stream.Collectors;\r\n\r\n    // ...\r\n    public static String inputStreamToString(InputStream is) throws IOException {\r\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(is))) {\r\n            return br.lines().collect(Collectors.joining(System.lineSeparator()));\r\n        }\r\n    }\r\n\r\nAs mentioned by Christoffer Hammarstr&#246;m below [other answer][2] it is safer to explicitly specify the [Charset][3]. I.e. The InputStreamReader constructor can be changes as follows:\r\n\r\n&lt;!-- lang:java --&gt;\r\n\r\n    new InputStreamReader(is, Charset.forName(&quot;UTF-8&quot;))\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\r\n  [2]: https://stackoverflow.com/a/309448/639687\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Pure Java solution using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"noreferrer\">Stream</a>s, works since Java 8.</p>\n\n\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.stream.Collectors;\n\n// ...\npublic static String inputStreamToString(InputStream is) throws IOException {\n    try (BufferedReader br = new BufferedReader(new InputStreamReader(is))) {\n        return br.lines().collect(Collectors.joining(System.lineSeparator()));\n    }\n}\n</code></pre>\n\n<p>As mentioned by Christoffer HammarstrÃ¶m below <a href=\"https://stackoverflow.com/a/309448/639687\">other answer</a> it is safer to explicitly specify the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html\" rel=\"noreferrer\">Charset</a>. I.e. The InputStreamReader constructor can be changes as follows:</p>\n\n\n\n<pre><code>new InputStreamReader(is, Charset.forName(\"UTF-8\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1436957452,"creation_date":1436448056,"answer_id":31318764,"question_id":309424,"body_markdown":"[Guava provides][1] much shorter efficient autoclosing solution in case when input stream comes from classpath resource (which seems to be popular task):\r\n\r\n    byte[] bytes = Resources.toByteArray(classLoader.getResource(path));\r\n\r\nor \r\n\r\n    String text = Resources.toString(classLoader.getResource(path), StandardCharsets.UTF_8);\r\n\r\nThere is also general concept of [ByteSource][2] and [CharSource][3] that gently take care of both opening and closing the stream.\r\n\r\nSo, for example, instead of explicitly opening a small file to read its contents:\r\n\r\n    String content = Files.asCharSource(new File(&quot;robots.txt&quot;), StandardCharsets.UTF_8).read();\r\n    byte[] data = Files.asByteSource(new File(&quot;favicon.ico&quot;)).read();\r\n\r\nor just\r\n\r\n    String content = Files.toString(new File(&quot;robots.txt&quot;), StandardCharsets.UTF_8);\r\n    byte[] data = Files.toByteArray(new File(&quot;favicon.ico&quot;));\r\n\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/wiki/IOExplained\r\n  [2]: http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/ByteSource.html\r\n  [3]: http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/CharSource.html","title":"How do I read / convert an InputStream into a String in Java?","body":"<p><a href=\"https://code.google.com/p/guava-libraries/wiki/IOExplained\" rel=\"nofollow\">Guava provides</a> much shorter efficient autoclosing solution in case when input stream comes from classpath resource (which seems to be popular task):</p>\n\n<pre><code>byte[] bytes = Resources.toByteArray(classLoader.getResource(path));\n</code></pre>\n\n<p>or </p>\n\n<pre><code>String text = Resources.toString(classLoader.getResource(path), StandardCharsets.UTF_8);\n</code></pre>\n\n<p>There is also general concept of <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/ByteSource.html\" rel=\"nofollow\">ByteSource</a> and <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/CharSource.html\" rel=\"nofollow\">CharSource</a> that gently take care of both opening and closing the stream.</p>\n\n<p>So, for example, instead of explicitly opening a small file to read its contents:</p>\n\n<pre><code>String content = Files.asCharSource(new File(\"robots.txt\"), StandardCharsets.UTF_8).read();\nbyte[] data = Files.asByteSource(new File(\"favicon.ico\")).read();\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>String content = Files.toString(new File(\"robots.txt\"), StandardCharsets.UTF_8);\nbyte[] data = Files.toByteArray(new File(\"favicon.ico\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1859709,"reputation":581,"user_id":1684528,"accept_rate":45,"display_name":"Christian R&#228;del"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1441192767,"creation_date":1441192767,"answer_id":32351730,"question_id":309424,"body_markdown":"Here&#39;s my **Java 8** based solution, which uses the *new Stream API* to collect all lines from an ```InputStream```:\r\n\r\n    public static String toString(InputStream inputStream) {\r\n        BufferedReader reader = new BufferedReader(\r\n            new InputStreamReader(inputStream));\r\n        return reader.lines().collect(Collectors.joining(\r\n            System.getProperty(&quot;line.separator&quot;)));\r\n    }","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Here's my <strong>Java 8</strong> based solution, which uses the <em>new Stream API</em> to collect all lines from an <code>InputStream</code>:</p>\n\n<pre><code>public static String toString(InputStream inputStream) {\n    BufferedReader reader = new BufferedReader(\n        new InputStreamReader(inputStream));\n    return reader.lines().collect(Collectors.joining(\n        System.getProperty(\"line.separator\")));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":3,"creation_date":1605773156,"post_id":32352386,"comment_id":114755958,"body_markdown":"I benchmarked this [here](https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java?page=2&amp;tab=oldest#comment114755893_35446009), and found this to be the fastest solution on my machine, running in about 60% the time of the next-fastest solution benchmarked.","body":"I benchmarked this <a href=\"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java?page=2&amp;tab=oldest#comment114755893_35446009\">here</a>, and found this to be the fastest solution on my machine, running in about 60% the time of the next-fastest solution benchmarked."},{"owner":{"account_id":945916,"reputation":2856,"user_id":973184,"accept_rate":67,"display_name":"Martin Meeser"},"score":0,"creation_date":1639424136,"post_id":32352386,"comment_id":124340383,"body_markdown":"&gt;This method blocks until all remaining bytes have been read and end of stream is detected, or an exception is thrown.","body":"&gt;This method blocks until all remaining bytes have been read and end of stream is detected, or an exception is thrown."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1663339972,"post_id":32352386,"comment_id":130223603,"body_markdown":"@MartinMeeser all solutions on this page do, as it is part of the task.","body":"@MartinMeeser all solutions on this page do, as it is part of the task."},{"owner":{"account_id":945916,"reputation":2856,"user_id":973184,"accept_rate":67,"display_name":"Martin Meeser"},"score":0,"creation_date":1663654360,"post_id":32352386,"comment_id":130284271,"body_markdown":"@Holger read=br.readLine() WILL NOT block until all bytes are read or end of line is detected, InputStream.read will read one byte or given buffer size, difference to readAllBytes is quite impactfull","body":"@Holger read=br.readLine() WILL NOT block until all bytes are read or end of line is detected, InputStream.read will read one byte or given buffer size, difference to readAllBytes is quite impactfull"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1663655868,"post_id":32352386,"comment_id":130284665,"body_markdown":"@MartinMeeser the **task** is to *read the entire `InputStream` into one string*. Of course, you can split it into multiple steps which are not reading the entire stream, but that is pointless when all you are doing with those steps, is to reassemble the partial results into a single result after the entire stream has been read. So, none of the solutions to this specific task will return before the entire stream has been read.","body":"@MartinMeeser the <b>task</b> is to <i>read the entire <code>InputStream</code> into one string</i>. Of course, you can split it into multiple steps which are not reading the entire stream, but that is pointless when all you are doing with those steps, is to reassemble the partial results into a single result after the entire stream has been read. So, none of the solutions to this specific task will return before the entire stream has been read."}],"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"comment_count":5,"down_vote_count":0,"up_vote_count":184,"is_accepted":false,"score":184,"last_activity_date":1605739835,"creation_date":1441194645,"answer_id":32352386,"question_id":309424,"body_markdown":"For completeness here is **Java 9** solution:\r\n\r\n    public static String toString(InputStream input) throws IOException {\r\n        return new String(input.readAllBytes(), StandardCharsets.UTF_8);\r\n    }\r\n\r\nThis uses the [`readAllBytes`](https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#readAllBytes--) method which was added to Java 9.","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>For completeness here is <strong>Java 9</strong> solution:</p>\n<pre><code>public static String toString(InputStream input) throws IOException {\n    return new String(input.readAllBytes(), StandardCharsets.UTF_8);\n}\n</code></pre>\n<p>This uses the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#readAllBytes--\" rel=\"noreferrer\"><code>readAllBytes</code></a> method which was added to Java 9.</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1547645619,"post_id":33748600,"comment_id":95261948,"body_markdown":"It is not just a bad choice.  It will fail with a `StackOverflowError` if the input stream contains more than a few hundred characters.","body":"It is not just a bad choice.  It will fail with a <code>StackOverflowError</code> if the input stream contains more than a few hundred characters."},{"owner":{"account_id":10839766,"reputation":5282,"user_id":8200485,"accept_rate":82,"display_name":"hyper-neutrino"},"score":0,"creation_date":1547656232,"post_id":33748600,"comment_id":95268568,"body_markdown":"@StephenC That constitutes a bad choice in my opinion","body":"@StephenC That constitutes a bad choice in my opinion"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1547677242,"post_id":33748600,"comment_id":95278499,"body_markdown":"I agree.  It is a &quot;bad choice&quot; to use a method that doesn&#39;t work (except in trivial cases).   But not **just** a &quot;bad choice&quot;.   Anyhow, I am down voting because this is wrong ... not because it is a &quot;bad choice&quot;.   And also because you don&#39;t explain *why* this approach should not be used.","body":"I agree.  It is a &quot;bad choice&quot; to use a method that doesn&#39;t work (except in trivial cases).   But not <b>just</b> a &quot;bad choice&quot;.   Anyhow, I am down voting because this is wrong ... not because it is a &quot;bad choice&quot;.   And also because you don&#39;t explain <i>why</i> this approach should not be used."},{"owner":{"account_id":10839766,"reputation":5282,"user_id":8200485,"accept_rate":82,"display_name":"hyper-neutrino"},"score":0,"creation_date":1547740020,"post_id":33748600,"comment_id":95303638,"body_markdown":"@StephenC I don&#39;t fundamentally agree with you, but thank you for at least leaving a comment instead of just fly-by downvoting. Recursion overflow issues are system limitations, and this method is not wrong, it just causes memory issues faster (albeit MUCH faster) than other methods.","body":"@StephenC I don&#39;t fundamentally agree with you, but thank you for at least leaving a comment instead of just fly-by downvoting. Recursion overflow issues are system limitations, and this method is not wrong, it just causes memory issues faster (albeit MUCH faster) than other methods."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1547764252,"post_id":33748600,"comment_id":95314920,"body_markdown":"For the Java language and implementations, the absence of tail-call optimization is a deliberate design choice; see https://softwareengineering.stackexchange.com/questions/272061/why-doesnt-java-have-optimization-for-tail-recursion-at-all.  It should be viewed as inherent to Java.  Certainly it is common to all extant mainstream Java implementations ... including Android.","body":"For the Java language and implementations, the absence of tail-call optimization is a deliberate design choice; see <a href=\"https://softwareengineering.stackexchange.com/questions/272061/why-doesnt-java-have-optimization-for-tail-recursion-at-all\" title=\"why doesnt java have optimization for tail recursion at all\">softwareengineering.stackexchange.com/questions/272061/&hellip;</a>.  It should be viewed as inherent to Java.  Certainly it is common to all extant mainstream Java implementations ... including Android."},{"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"score":0,"creation_date":1557790109,"post_id":33748600,"comment_id":98874872,"body_markdown":"I liked your method, it&#39;s highly unusual. However, I don&#39;t get why it would &quot;cause memory issues much faster&quot;?","body":"I liked your method, it&#39;s highly unusual. However, I don&#39;t get why it would &quot;cause memory issues much faster&quot;?"},{"owner":{"account_id":10839766,"reputation":5282,"user_id":8200485,"accept_rate":82,"display_name":"hyper-neutrino"},"score":1,"creation_date":1557858027,"post_id":33748600,"comment_id":98903831,"body_markdown":"@parsecer because instead of running out when the RAM can&#39;t handle the memory being used, it dies when the stack can&#39;t handle more stack calls, which is a lot smaller of a number on any reasonable system.","body":"@parsecer because instead of running out when the RAM can&#39;t handle the memory being used, it dies when the stack can&#39;t handle more stack calls, which is a lot smaller of a number on any reasonable system."},{"owner":{"account_id":16447745,"reputation":7487,"user_id":11882002,"display_name":"username"},"score":0,"creation_date":1672251741,"post_id":33748600,"comment_id":132252717,"body_markdown":"Why not use a loop and a StringBuilder?","body":"Why not use a loop and a StringBuilder?"}],"tags":[],"owner":{"account_id":10839766,"reputation":5282,"user_id":8200485,"accept_rate":82,"display_name":"hyper-neutrino"},"comment_count":8,"down_vote_count":11,"up_vote_count":6,"is_accepted":false,"score":-5,"last_activity_date":1631806783,"creation_date":1447730582,"answer_id":33748600,"question_id":309424,"body_markdown":"Note: This probably isn&#39;t a good idea. This method uses recursion and thus will hit a `StackOverflowError` very quickly:\r\n\r\n    public String read (InputStream is) {\r\n        byte next = is.read();\r\n        return next == -1 ? &quot;&quot; : next + read(is); // Recursive part: reads next byte recursively\r\n    }","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Note: This probably isn't a good idea. This method uses recursion and thus will hit a <code>StackOverflowError</code> very quickly:</p>\n<pre><code>public String read (InputStream is) {\n    byte next = is.read();\n    return next == -1 ? &quot;&quot; : next + read(is); // Recursive part: reads next byte recursively\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":0,"creation_date":1522940222,"post_id":34451847,"comment_id":86361934,"body_markdown":"Note that this solution is the most inefficient based on my [benchmark results](https://stackoverflow.com/a/48775964/1129332)","body":"Note that this solution is the most inefficient based on my <a href=\"https://stackoverflow.com/a/48775964/1129332\">benchmark results</a>"}],"tags":[],"owner":{"account_id":1062360,"reputation":37721,"user_id":1063716,"accept_rate":94,"display_name":"Steve Chambers"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1519592021,"creation_date":1450955333,"answer_id":34451847,"question_id":309424,"body_markdown":"Based on the second part of [the accepted Apache Commons answer](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string?page=1&amp;tab=votes#309448) but with the small gap filled in for always closing the stream:\r\n\r\n        String theString;\r\n        try {\r\n            theString = IOUtils.toString(inputStream, encoding);\r\n        } finally {\r\n            IOUtils.closeQuietly(inputStream);\r\n        }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Based on the second part of <a href=\"https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string?page=1&amp;tab=votes#309448\">the accepted Apache Commons answer</a> but with the small gap filled in for always closing the stream:</p>\n\n<pre><code>    String theString;\n    try {\n        theString = IOUtils.toString(inputStream, encoding);\n    } finally {\n        IOUtils.closeQuietly(inputStream);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5714733,"reputation":881,"user_id":4515400,"accept_rate":92,"display_name":"libnull-dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1529480249,"creation_date":1453386518,"answer_id":34926427,"question_id":309424,"body_markdown":"In terms of ```reduce```, and ```concat``` it can be expressed in Java 8 as:\r\n\r\n    String fromFile = new BufferedReader(new   \r\n    InputStreamReader(inputStream)).lines().reduce(String::concat).get();\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>In terms of <code>reduce</code>, and <code>concat</code> it can be expressed in Java 8 as:</p>\n\n<pre><code>String fromFile = new BufferedReader(new   \nInputStreamReader(inputStream)).lines().reduce(String::concat).get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"comment_count":0,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1511880448,"creation_date":1453996521,"answer_id":35066091,"question_id":309424,"body_markdown":"Use the [java.io.InputStream.transferTo(OutputStream)][1] supported in Java 9 and the [ByteArrayOutputStream.toString(String)][2] which takes the charset name:\r\n\r\n    public static String gobble(InputStream in, String charsetName) throws IOException {\r\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        in.transferTo(bos);\r\n        return bos.toString(charsetName);\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#transferTo-java.io.OutputStream-\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/io/ByteArrayOutputStream.html#toString-java.lang.String-","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Use the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#transferTo-java.io.OutputStream-\" rel=\"noreferrer\">java.io.InputStream.transferTo(OutputStream)</a> supported in Java 9 and the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/ByteArrayOutputStream.html#toString-java.lang.String-\" rel=\"noreferrer\">ByteArrayOutputStream.toString(String)</a> which takes the charset name:</p>\n\n<pre><code>public static String gobble(InputStream in, String charsetName) throws IOException {\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\n    in.transferTo(bos);\n    return bos.toString(charsetName);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1062360,"reputation":37721,"user_id":1063716,"accept_rate":94,"display_name":"Steve Chambers"},"score":0,"creation_date":1596280583,"post_id":35446009,"comment_id":111765491,"body_markdown":"Nice work. Could be useful to provide a tl;dr summary at the bottom, i.e. throwing out the solutions that have problems with line breaks / unicode and then (out of those that remain) saying which is fastest with or without external libraries.","body":"Nice work. Could be useful to provide a tl;dr summary at the bottom, i.e. throwing out the solutions that have problems with line breaks / unicode and then (out of those that remain) saying which is fastest with or without external libraries."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":3,"creation_date":1605773006,"post_id":35446009,"comment_id":114755893,"body_markdown":"I was curious about the Java 9 `InputStream.transferTo` and Java 10 `Reader.transferTo` solutions that were added since this answer was posted, so I checked out the linked code and added benchmarks for them.  I only tested the &quot;big string&quot; benchmarks.  `InputStream.transferTo` was the fastest of all the solutions tested, running in 60% of the time as `test8` did on my machine.  `Reader.transferTo` was slower than `test8`, but faster than all the other tests.  That said, it ran in 95% of the time as `test1`, so it&#39;s not a significant improvement.","body":"I was curious about the Java 9 <code>InputStream.transferTo</code> and Java 10 <code>Reader.transferTo</code> solutions that were added since this answer was posted, so I checked out the linked code and added benchmarks for them.  I only tested the &quot;big string&quot; benchmarks.  <code>InputStream.transferTo</code> was the fastest of all the solutions tested, running in 60% of the time as <code>test8</code> did on my machine.  <code>Reader.transferTo</code> was slower than <code>test8</code>, but faster than all the other tests.  That said, it ran in 95% of the time as <code>test1</code>, so it&#39;s not a significant improvement."},{"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"score":2,"creation_date":1614478208,"post_id":35446009,"comment_id":117397309,"body_markdown":"I converted all the `while` loops to `for` loops in an edit to this post, to avoid polluting the namespace with a variable that isn&#39;t used outside the loop. It&#39;s a neat trick that works in most Java reader/writer loops.","body":"I converted all the <code>while</code> loops to <code>for</code> loops in an edit to this post, to avoid polluting the namespace with a variable that isn&#39;t used outside the loop. It&#39;s a neat trick that works in most Java reader/writer loops."},{"owner":{"account_id":8063048,"reputation":113,"user_id":11069710,"display_name":"Shmuel Newmark"},"score":24,"creation_date":1622236690,"post_id":35446009,"comment_id":119744360,"body_markdown":"With Java 9 you can get a byte array from the InputStream using .readAllBytes. So &quot;new String(inputStream.readAllBytes())&quot; works using String&#39;s byte[] constructor.","body":"With Java 9 you can get a byte array from the InputStream using .readAllBytes. So &quot;new String(inputStream.readAllBytes())&quot; works using String&#39;s byte[] constructor."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1665360680,"post_id":35446009,"comment_id":130675489,"body_markdown":"Is 11 buffered? If not, the chunks may be small and what is seen is simply the additional overhead from the extra calls.","body":"Is 11 buffered? If not, the chunks may be small and what is seen is simply the additional overhead from the extra calls."},{"owner":{"account_id":4426660,"reputation":960,"user_id":3604955,"accept_rate":67,"display_name":"kaiser"},"score":0,"creation_date":1698213593,"post_id":35446009,"comment_id":136375000,"body_markdown":"One of the best answers to a question on complete stack overflow!","body":"One of the best answers to a question on complete stack overflow!"}],"tags":[],"owner":{"account_id":5426896,"reputation":58756,"user_id":4318868,"display_name":"Slava Vedenin"},"comment_count":6,"down_vote_count":3,"up_vote_count":3488,"is_accepted":false,"score":3485,"last_activity_date":1684452646,"creation_date":1455670728,"answer_id":35446009,"question_id":309424,"body_markdown":"To summarize the other answers, I found 11 main ways to do this (see below). And I wrote some performance tests (see results below):\r\n\r\n**Ways to convert an InputStream to a String:**\r\n\r\n1. Using `IOUtils.toString` (Apache Utils) \r\n\r\n        String result = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\r\n\r\n2. Using `CharStreams` (Guava) \r\n\r\n        String result = CharStreams.toString(new InputStreamReader(\r\n              inputStream, Charsets.UTF_8));\r\n\r\n\r\n3. Using `Scanner` (JDK) \r\n\r\n        Scanner s = new Scanner(inputStream).useDelimiter(&quot;\\\\A&quot;);\r\n        String result = s.hasNext() ? s.next() : &quot;&quot;;\r\n\r\n4. Using **Stream API** (Java 8). **Warning**: This solution converts different line breaks (like `\\r\\n`) to `\\n`.\r\n   \r\n\r\n        String result = new BufferedReader(new InputStreamReader(inputStream))\r\n          .lines().collect(Collectors.joining(&quot;\\n&quot;));\r\n       \r\n5. Using **parallel Stream API** (Java 8). **Warning**: This solution converts different line breaks (like `\\r\\n`) to `\\n`.    \r\n\r\n        String result = new BufferedReader(new InputStreamReader(inputStream))\r\n           .lines().parallel().collect(Collectors.joining(&quot;\\n&quot;));\r\n\r\n6. Using `InputStreamReader` and `StringBuilder` (JDK) \r\n\r\n        int bufferSize = 1024;\r\n        char[] buffer = new char[bufferSize];\r\n        StringBuilder out = new StringBuilder();\r\n        Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\r\n        for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\r\n            out.append(buffer, 0, numRead);\r\n        }\r\n        return out.toString();\r\n\r\n7. Using `StringWriter` and `IOUtils.copy` (Apache Commons)\r\n\r\n        StringWriter writer = new StringWriter();\r\n        IOUtils.copy(inputStream, writer, &quot;UTF-8&quot;);\r\n        return writer.toString();\r\n\r\n8. Using `ByteArrayOutputStream` and `inputStream.read` (JDK)  \r\n\r\n        ByteArrayOutputStream result = new ByteArrayOutputStream();\r\n        byte[] buffer = new byte[1024];\r\n        for (int length; (length = inputStream.read(buffer)) != -1; ) {\r\n            result.write(buffer, 0, length);\r\n        }\r\n        // StandardCharsets.UTF_8.name() &gt; JDK 7\r\n        return result.toString(&quot;UTF-8&quot;);\r\n\r\n9. Using `BufferedReader` (JDK). **Warning:** This solution converts different line breaks (like `\\n\\r`) to `line.separator` system property (for example, in Windows to &quot;\\r\\n&quot;).\r\n\r\n        String newLine = System.getProperty(&quot;line.separator&quot;);\r\n        BufferedReader reader = new BufferedReader(\r\n                new InputStreamReader(inputStream));\r\n        StringBuilder result = new StringBuilder();\r\n        for (String line; (line = reader.readLine()) != null; ) {\r\n            if (result.length() &gt; 0) {\r\n                result.append(newLine);\r\n            }\r\n            result.append(line);\r\n        }\r\n        return result.toString();\r\n\r\n10. Using `BufferedInputStream` and `ByteArrayOutputStream` (JDK) \r\n\r\n        BufferedInputStream bis = new BufferedInputStream(inputStream);\r\n        ByteArrayOutputStream buf = new ByteArrayOutputStream();\r\n        for (int result = bis.read(); result != -1; result = bis.read()) {\r\n            buf.write((byte) result);\r\n        }\r\n        // StandardCharsets.UTF_8.name() &gt; JDK 7\r\n        return buf.toString(&quot;UTF-8&quot;);\r\n\r\n11. Using `inputStream.read()` and `StringBuilder` (JDK). **Warning**: This solution has problems with Unicode, for example with Russian text (works correctly only with non-Unicode text)\r\n\r\n        StringBuilder sb = new StringBuilder();\r\n        for (int ch; (ch = inputStream.read()) != -1; ) {\r\n            sb.append((char) ch);\r\n        }\r\n        return sb.toString();\r\n\r\n**Warning**:\r\n\r\n 1. Solutions 4, 5 and 9 convert different line breaks to one.\r\n\r\n 2. Solution 11 can&#39;t work correctly with Unicode text\r\n\r\n**Performance tests**\r\n\r\nPerformance tests for small `String` (length = 175), url in [github][1] (mode = Average Time, system = Linux, score 1,343 is the best):\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n                  Benchmark                         Mode  Cnt   Score   Error  Units\r\n     8. ByteArrayOutputStream and read (JDK)        avgt   10   1,343 &#177; 0,028  us/op\r\n     6. InputStreamReader and StringBuilder (JDK)   avgt   10   6,980 &#177; 0,404  us/op\r\n    10. BufferedInputStream, ByteArrayOutputStream  avgt   10   7,437 &#177; 0,735  us/op\r\n    11. InputStream.read() and StringBuilder (JDK)  avgt   10   8,977 &#177; 0,328  us/op\r\n     7. StringWriter and IOUtils.copy (Apache)      avgt   10  10,613 &#177; 0,599  us/op\r\n     1. IOUtils.toString (Apache Utils)             avgt   10  10,605 &#177; 0,527  us/op\r\n     3. Scanner (JDK)                               avgt   10  12,083 &#177; 0,293  us/op\r\n     2. CharStreams (guava)                         avgt   10  12,999 &#177; 0,514  us/op\r\n     4. Stream Api (Java 8)                         avgt   10  15,811 &#177; 0,605  us/op\r\n     9. BufferedReader (JDK)                        avgt   10  16,038 &#177; 0,711  us/op\r\n     5. parallel Stream Api (Java 8)                avgt   10  21,544 &#177; 0,583  us/op\r\n\r\nPerformance tests for big `String` (length = 50100), url in [github][2] (mode = Average Time, system = Linux, score 200,715 is the best):\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n                   Benchmark                        Mode  Cnt   Score        Error  Units\r\n     8. ByteArrayOutputStream and read (JDK)        avgt   10   200,715 &#177;   18,103  us/op\r\n     1. IOUtils.toString (Apache Utils)             avgt   10   300,019 &#177;    8,751  us/op\r\n     6. InputStreamReader and StringBuilder (JDK)   avgt   10   347,616 &#177;  130,348  us/op\r\n     7. StringWriter and IOUtils.copy (Apache)      avgt   10   352,791 &#177;  105,337  us/op\r\n     2. CharStreams (guava)                         avgt   10   420,137 &#177;   59,877  us/op\r\n     9. BufferedReader (JDK)                        avgt   10   632,028 &#177;   17,002  us/op\r\n     5. parallel Stream Api (Java 8)                avgt   10   662,999 &#177;   46,199  us/op\r\n     4. Stream Api (Java 8)                         avgt   10   701,269 &#177;   82,296  us/op\r\n    10. BufferedInputStream, ByteArrayOutputStream  avgt   10   740,837 &#177;    5,613  us/op\r\n     3. Scanner (JDK)                               avgt   10   751,417 &#177;   62,026  us/op\r\n    11. InputStream.read() and StringBuilder (JDK)  avgt   10  2919,350 &#177; 1101,942  us/op\r\n\r\nGraphs (performance tests depending on Input Stream length in Windows 7 system)    \r\n[![enter image description here][3]][3]\r\n\r\nPerformance test (Average Time) depending on Input Stream length in Windows 7 system:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n     length  182\t546\t    1092\t3276\t9828\t29484\t58968\r\n    \r\n     test8 \t0.38\t0.938\t1.868\t4.448\t13.412\t36.459\t72.708\r\n     test4 \t2.362\t3.609\t5.573\t12.769\t40.74\t81.415\t159.864\r\n     test5 \t3.881\t5.075\t6.904\t14.123\t50.258\t129.937\t166.162\r\n     test9 \t2.237\t3.493\t5.422\t11.977\t45.98\t89.336\t177.39\r\n     test6 \t1.261\t2.12\t4.38\t10.698\t31.821\t86.106\t186.636\r\n     test7 \t1.601\t2.391\t3.646\t8.367\t38.196\t110.221\t211.016\r\n     test1 \t1.529\t2.381\t3.527\t8.411\t40.551\t105.16\t212.573\r\n     test3 \t3.035\t3.934\t8.606\t20.858\t61.571\t118.744\t235.428\r\n     test2 \t3.136\t6.238\t10.508\t33.48\t43.532\t118.044\t239.481\r\n     test10 1.593\t4.736\t7.527\t20.557\t59.856\t162.907\t323.147\r\n     test11 3.913\t11.506\t23.26\t68.644\t207.591\t600.444\t1211.545\r\n\r\n  [1]: https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertInputStreamToStringBenchmark.java\r\n  [2]: https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertBigStringToInputStreamBenchmark.java\r\n  [3]: https://i.stack.imgur.com/AYYhz.png","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>To summarize the other answers, I found 11 main ways to do this (see below). And I wrote some performance tests (see results below):</p>\n<p><strong>Ways to convert an InputStream to a String:</strong></p>\n<ol>\n<li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p>\n<pre><code> String result = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\n</code></pre>\n</li>\n<li><p>Using <code>CharStreams</code> (Guava)</p>\n<pre><code> String result = CharStreams.toString(new InputStreamReader(\n       inputStream, Charsets.UTF_8));\n</code></pre>\n</li>\n<li><p>Using <code>Scanner</code> (JDK)</p>\n<pre><code> Scanner s = new Scanner(inputStream).useDelimiter(&quot;\\\\A&quot;);\n String result = s.hasNext() ? s.next() : &quot;&quot;;\n</code></pre>\n</li>\n<li><p>Using <strong>Stream API</strong> (Java 8). <strong>Warning</strong>: This solution converts different line breaks (like <code>\\r\\n</code>) to <code>\\n</code>.</p>\n<pre><code> String result = new BufferedReader(new InputStreamReader(inputStream))\n   .lines().collect(Collectors.joining(&quot;\\n&quot;));\n</code></pre>\n</li>\n<li><p>Using <strong>parallel Stream API</strong> (Java 8). <strong>Warning</strong>: This solution converts different line breaks (like <code>\\r\\n</code>) to <code>\\n</code>.</p>\n<pre><code> String result = new BufferedReader(new InputStreamReader(inputStream))\n    .lines().parallel().collect(Collectors.joining(&quot;\\n&quot;));\n</code></pre>\n</li>\n<li><p>Using <code>InputStreamReader</code> and <code>StringBuilder</code> (JDK)</p>\n<pre><code> int bufferSize = 1024;\n char[] buffer = new char[bufferSize];\n StringBuilder out = new StringBuilder();\n Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\n for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\n     out.append(buffer, 0, numRead);\n }\n return out.toString();\n</code></pre>\n</li>\n<li><p>Using <code>StringWriter</code> and <code>IOUtils.copy</code> (Apache Commons)</p>\n<pre><code> StringWriter writer = new StringWriter();\n IOUtils.copy(inputStream, writer, &quot;UTF-8&quot;);\n return writer.toString();\n</code></pre>\n</li>\n<li><p>Using <code>ByteArrayOutputStream</code> and <code>inputStream.read</code> (JDK)</p>\n<pre><code> ByteArrayOutputStream result = new ByteArrayOutputStream();\n byte[] buffer = new byte[1024];\n for (int length; (length = inputStream.read(buffer)) != -1; ) {\n     result.write(buffer, 0, length);\n }\n // StandardCharsets.UTF_8.name() &gt; JDK 7\n return result.toString(&quot;UTF-8&quot;);\n</code></pre>\n</li>\n<li><p>Using <code>BufferedReader</code> (JDK). <strong>Warning:</strong> This solution converts different line breaks (like <code>\\n\\r</code>) to <code>line.separator</code> system property (for example, in Windows to &quot;\\r\\n&quot;).</p>\n<pre><code> String newLine = System.getProperty(&quot;line.separator&quot;);\n BufferedReader reader = new BufferedReader(\n         new InputStreamReader(inputStream));\n StringBuilder result = new StringBuilder();\n for (String line; (line = reader.readLine()) != null; ) {\n     if (result.length() &gt; 0) {\n         result.append(newLine);\n     }\n     result.append(line);\n }\n return result.toString();\n</code></pre>\n</li>\n<li><p>Using <code>BufferedInputStream</code> and <code>ByteArrayOutputStream</code> (JDK)</p>\n<pre><code>BufferedInputStream bis = new BufferedInputStream(inputStream);\nByteArrayOutputStream buf = new ByteArrayOutputStream();\nfor (int result = bis.read(); result != -1; result = bis.read()) {\n    buf.write((byte) result);\n}\n// StandardCharsets.UTF_8.name() &gt; JDK 7\nreturn buf.toString(&quot;UTF-8&quot;);\n</code></pre>\n</li>\n<li><p>Using <code>inputStream.read()</code> and <code>StringBuilder</code> (JDK). <strong>Warning</strong>: This solution has problems with Unicode, for example with Russian text (works correctly only with non-Unicode text)</p>\n<pre><code>StringBuilder sb = new StringBuilder();\nfor (int ch; (ch = inputStream.read()) != -1; ) {\n    sb.append((char) ch);\n}\nreturn sb.toString();\n</code></pre>\n</li>\n</ol>\n<p><strong>Warning</strong>:</p>\n<ol>\n<li><p>Solutions 4, 5 and 9 convert different line breaks to one.</p>\n</li>\n<li><p>Solution 11 can't work correctly with Unicode text</p>\n</li>\n</ol>\n<p><strong>Performance tests</strong></p>\n<p>Performance tests for small <code>String</code> (length = 175), url in <a href=\"https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertInputStreamToStringBenchmark.java\" rel=\"noreferrer\">github</a> (mode = Average Time, system = Linux, score 1,343 is the best):</p>\n<pre class=\"lang-none prettyprint-override\"><code>              Benchmark                         Mode  Cnt   Score   Error  Units\n 8. ByteArrayOutputStream and read (JDK)        avgt   10   1,343 Â± 0,028  us/op\n 6. InputStreamReader and StringBuilder (JDK)   avgt   10   6,980 Â± 0,404  us/op\n10. BufferedInputStream, ByteArrayOutputStream  avgt   10   7,437 Â± 0,735  us/op\n11. InputStream.read() and StringBuilder (JDK)  avgt   10   8,977 Â± 0,328  us/op\n 7. StringWriter and IOUtils.copy (Apache)      avgt   10  10,613 Â± 0,599  us/op\n 1. IOUtils.toString (Apache Utils)             avgt   10  10,605 Â± 0,527  us/op\n 3. Scanner (JDK)                               avgt   10  12,083 Â± 0,293  us/op\n 2. CharStreams (guava)                         avgt   10  12,999 Â± 0,514  us/op\n 4. Stream Api (Java 8)                         avgt   10  15,811 Â± 0,605  us/op\n 9. BufferedReader (JDK)                        avgt   10  16,038 Â± 0,711  us/op\n 5. parallel Stream Api (Java 8)                avgt   10  21,544 Â± 0,583  us/op\n</code></pre>\n<p>Performance tests for big <code>String</code> (length = 50100), url in <a href=\"https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertBigStringToInputStreamBenchmark.java\" rel=\"noreferrer\">github</a> (mode = Average Time, system = Linux, score 200,715 is the best):</p>\n<pre class=\"lang-none prettyprint-override\"><code>               Benchmark                        Mode  Cnt   Score        Error  Units\n 8. ByteArrayOutputStream and read (JDK)        avgt   10   200,715 Â±   18,103  us/op\n 1. IOUtils.toString (Apache Utils)             avgt   10   300,019 Â±    8,751  us/op\n 6. InputStreamReader and StringBuilder (JDK)   avgt   10   347,616 Â±  130,348  us/op\n 7. StringWriter and IOUtils.copy (Apache)      avgt   10   352,791 Â±  105,337  us/op\n 2. CharStreams (guava)                         avgt   10   420,137 Â±   59,877  us/op\n 9. BufferedReader (JDK)                        avgt   10   632,028 Â±   17,002  us/op\n 5. parallel Stream Api (Java 8)                avgt   10   662,999 Â±   46,199  us/op\n 4. Stream Api (Java 8)                         avgt   10   701,269 Â±   82,296  us/op\n10. BufferedInputStream, ByteArrayOutputStream  avgt   10   740,837 Â±    5,613  us/op\n 3. Scanner (JDK)                               avgt   10   751,417 Â±   62,026  us/op\n11. InputStream.read() and StringBuilder (JDK)  avgt   10  2919,350 Â± 1101,942  us/op\n</code></pre>\n<p>Graphs (performance tests depending on Input Stream length in Windows 7 system)<br />\n<a href=\"https://i.stack.imgur.com/AYYhz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AYYhz.png\" alt=\"enter image description here\" /></a></p>\n<p>Performance test (Average Time) depending on Input Stream length in Windows 7 system:</p>\n<pre class=\"lang-none prettyprint-override\"><code> length  182    546     1092    3276    9828    29484   58968\n\n test8  0.38    0.938   1.868   4.448   13.412  36.459  72.708\n test4  2.362   3.609   5.573   12.769  40.74   81.415  159.864\n test5  3.881   5.075   6.904   14.123  50.258  129.937 166.162\n test9  2.237   3.493   5.422   11.977  45.98   89.336  177.39\n test6  1.261   2.12    4.38    10.698  31.821  86.106  186.636\n test7  1.601   2.391   3.646   8.367   38.196  110.221 211.016\n test1  1.529   2.381   3.527   8.411   40.551  105.16  212.573\n test3  3.035   3.934   8.606   20.858  61.571  118.744 235.428\n test2  3.136   6.238   10.508  33.48   43.532  118.044 239.481\n test10 1.593   4.736   7.527   20.557  59.856  162.907 323.147\n test11 3.913   11.506  23.26   68.644  207.591 600.444 1211.545\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7556341,"reputation":204,"user_id":5735806,"display_name":"Jitender Chahar"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1456766314,"creation_date":1456766314,"answer_id":35705517,"question_id":309424,"body_markdown":"Method to convert inputStream to String\r\n\t\r\n\tpublic static String getStringFromInputStream(InputStream inputStream) {\r\n\r\n\t\tBufferedReader bufferedReader = null;\r\n\t\tStringBuilder stringBuilder = new StringBuilder();\r\n\t\tString line;\r\n\r\n\t\ttry {\r\n\t\t\tbufferedReader = new BufferedReader(new InputStreamReader(\r\n\t\t\t\t\tinputStream));\r\n\t\t\twhile ((line = bufferedReader.readLine()) != null) {\r\n\t\t\t\tstringBuilder.append(line);\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(e.getMessage());\r\n\t\t} finally {\r\n\t\t\tif (bufferedReader != null) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tbufferedReader.close();\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\tlogger.error(e.getMessage());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn stringBuilder.toString();\r\n\t}","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Method to convert inputStream to String</p>\n\n<pre><code>public static String getStringFromInputStream(InputStream inputStream) {\n\n    BufferedReader bufferedReader = null;\n    StringBuilder stringBuilder = new StringBuilder();\n    String line;\n\n    try {\n        bufferedReader = new BufferedReader(new InputStreamReader(\n                inputStream));\n        while ((line = bufferedReader.readLine()) != null) {\n            stringBuilder.append(line);\n        }\n    } catch (IOException e) {\n        logger.error(e.getMessage());\n    } finally {\n        if (bufferedReader != null) {\n            try {\n                bufferedReader.close();\n            } catch (IOException e) {\n                logger.error(e.getMessage());\n            }\n        }\n    }\n    return stringBuilder.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700015467,"post_id":35908771,"comment_id":136602251,"body_markdown":"An explanation would be in order. E.g., what is the idea/gist? From [the Help Center](https://stackoverflow.com/help/promotion): *&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;*. Please respond by [editing (changing) your answer](https://stackoverflow.com/posts/35908771/edit), not here in comments (*** *** *** *** *** ***[without](https://meta.stackexchange.com/a/131011)*** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today).","body":"An explanation would be in order. E.g., what is the idea/gist? From <a href=\"https://stackoverflow.com/help/promotion\">the Help Center</a>: <i>&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;</i>. Please respond by <a href=\"https://stackoverflow.com/posts/35908771/edit\">editing (changing) your answer</a>, not here in comments (*** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today)."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700015621,"post_id":35908771,"comment_id":136602266,"body_markdown":"Something seems to be missing at the end.","body":"Something seems to be missing at the end."}],"tags":[],"owner":{"account_id":1733872,"reputation":2893,"user_id":1586864,"display_name":"Harsh"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1700015601,"creation_date":1457589710,"answer_id":35908771,"question_id":309424,"body_markdown":"    InputStream  inputStream = null;\r\n    BufferedReader bufferedReader = null;\r\n    try {\r\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\r\n        String stringBuilder = new StringBuilder();\r\n        String content;\r\n        while((content = bufferedReader.readLine()) != null) {\r\n            stringBuilder.append(content);\r\n        }\r\n        System.out.println(&quot;content of file::&quot; + stringBuilder.toString());\r\n    }\r\n    catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n    finally {\r\n        if(bufferedReader != null) {\r\n            try {\r\n                bufferedReader.close();\r\n            }\r\n            catch(IoException ex) {\r\n               ex.printStackTrace();\r\n            }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<pre><code>InputStream  inputStream = null;\nBufferedReader bufferedReader = null;\ntry {\n    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n    String stringBuilder = new StringBuilder();\n    String content;\n    while((content = bufferedReader.readLine()) != null) {\n        stringBuilder.append(content);\n    }\n    System.out.println(&quot;content of file::&quot; + stringBuilder.toString());\n}\ncatch (IOException e) {\n    e.printStackTrace();\n}\nfinally {\n    if(bufferedReader != null) {\n        try {\n            bufferedReader.close();\n        }\n        catch(IoException ex) {\n           ex.printStackTrace();\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1547645235,"post_id":37452030,"comment_id":95261706,"body_markdown":"This does not answer the Question.","body":"This does not answer the Question."}],"tags":[],"owner":{"account_id":311496,"reputation":673,"user_id":625114,"display_name":"Ravi"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1546735270,"creation_date":1464239269,"answer_id":37452030,"question_id":309424,"body_markdown":"Also you can get InputStream from a specified resource path:\r\n\r\n    public static InputStream getResourceAsStream(String path)\r\n    {\r\n        InputStream myiInputStream = ClassName.class.getResourceAsStream(path);\r\n        if (null == myiInputStream)\r\n        {\r\n            mylogger.info(&quot;Can&#39;t find path = &quot;, path);\r\n        }\r\n\r\n        return myiInputStream;\r\n    }\r\n\r\nTo get InputStream from a specific path:\r\n\r\n    public static URL getResource(String path)\r\n    {\r\n        URL myURL = ClassName.class.getResource(path);\r\n        if (null == myURL)\r\n        {\r\n            mylogger.info(&quot;Can&#39;t find resource path = &quot;, path);\r\n        }\r\n        return myURL;\r\n    }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Also you can get InputStream from a specified resource path:</p>\n\n<pre><code>public static InputStream getResourceAsStream(String path)\n{\n    InputStream myiInputStream = ClassName.class.getResourceAsStream(path);\n    if (null == myiInputStream)\n    {\n        mylogger.info(\"Can't find path = \", path);\n    }\n\n    return myiInputStream;\n}\n</code></pre>\n\n<p>To get InputStream from a specific path:</p>\n\n<pre><code>public static URL getResource(String path)\n{\n    URL myURL = ClassName.class.getResource(path);\n    if (null == myURL)\n    {\n        mylogger.info(\"Can't find resource path = \", path);\n    }\n    return myURL;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":107251,"reputation":11864,"user_id":285288,"accept_rate":64,"display_name":"James"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1500632654,"creation_date":1469825905,"answer_id":38667387,"question_id":309424,"body_markdown":"Another one, for all the Spring users:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.nio.charset.StandardCharsets;\r\n    import org.springframework.util.FileCopyUtils;\r\n\r\n    public String convertStreamToString(InputStream is) throws IOException { \r\n        return new String(FileCopyUtils.copyToByteArray(is), StandardCharsets.UTF_8);\r\n    }\r\n\r\nThe utility methods in `org.springframework.util.StreamUtils` are similar to the ones in `FileCopyUtils`, but they leave the stream open when done.","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>Another one, for all the Spring users:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.charset.StandardCharsets;\nimport org.springframework.util.FileCopyUtils;\n\npublic String convertStreamToString(InputStream is) throws IOException { \n    return new String(FileCopyUtils.copyToByteArray(is), StandardCharsets.UTF_8);\n}\n</code></pre>\n\n<p>The utility methods in <code>org.springframework.util.StreamUtils</code> are similar to the ones in <code>FileCopyUtils</code>, but they leave the stream open when done.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700015715,"post_id":38859690,"comment_id":136602274,"body_markdown":"Why is it &quot;\\\\Z&quot;?","body":"Why is it &quot;\\\\Z&quot;?"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700015734,"post_id":38859690,"comment_id":136602279,"body_markdown":"An explanation would be in order. E.g., what is the idea/gist? From [the Help Center](https://stackoverflow.com/help/promotion): *&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;*. Please respond by [editing (changing) your answer](https://stackoverflow.com/posts/38859690/edit), not here in comments (*** *** *** *** *** *** *** *** *** *** *** ***[without](https://meta.stackexchange.com/a/131011)*** *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today).","body":"An explanation would be in order. E.g., what is the idea/gist? From <a href=\"https://stackoverflow.com/help/promotion\">the Help Center</a>: <i>&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;</i>. Please respond by <a href=\"https://stackoverflow.com/posts/38859690/edit\">editing (changing) your answer</a>, not here in comments (*** *** *** *** *** *** *** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** *** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today)."}],"tags":[],"owner":{"account_id":2524791,"reputation":3884,"user_id":2194364,"accept_rate":77,"display_name":"Raghu K Nair"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1688552872,"creation_date":1470773906,"answer_id":38859690,"question_id":309424,"body_markdown":"The easiest way in JDK is with the following code snippets. \r\n\r\n    String convertToString(InputStream in) {\r\n        String resource = new Scanner(in).useDelimiter(&quot;\\\\Z&quot;).next();\r\n        return resource;\r\n    }","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>The easiest way in JDK is with the following code snippets.</p>\n<pre><code>String convertToString(InputStream in) {\n    String resource = new Scanner(in).useDelimiter(&quot;\\\\Z&quot;).next();\n    return resource;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700015782,"post_id":41541671,"comment_id":136602282,"body_markdown":"An explanation would be in order. E.g., what is the idea/gist? From [the Help Center](https://stackoverflow.com/help/promotion): *&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;*. Please respond by [editing (changing) your answer](https://stackoverflow.com/posts/41541671/edit), not here in comments (*** *** *** *** *** ***[without](https://meta.stackexchange.com/a/131011)*** *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today).","body":"An explanation would be in order. E.g., what is the idea/gist? From <a href=\"https://stackoverflow.com/help/promotion\">the Help Center</a>: <i>&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;</i>. Please respond by <a href=\"https://stackoverflow.com/posts/41541671/edit\">editing (changing) your answer</a>, not here in comments (*** *** *** *** *** <b><i><a href=\"https://meta.stackexchange.com/a/131011\">without</a></i></b> *** *** *** *** *** &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today)."}],"tags":[],"owner":{"account_id":264444,"reputation":119,"user_id":550742,"display_name":"Hao Zheng"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1483940573,"creation_date":1483940573,"answer_id":41541671,"question_id":309424,"body_markdown":"    public String read(InputStream in) throws IOException {\r\n        try (BufferedReader buffer = new BufferedReader(new InputStreamReader(in))) {\r\n            return buffer.lines().collect(Collectors.joining(&quot;\\n&quot;));\r\n        }\r\n    }\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<pre><code>public String read(InputStream in) throws IOException {\n    try (BufferedReader buffer = new BufferedReader(new InputStreamReader(in))) {\n        return buffer.lines().collect(Collectors.joining(\"\\n\"));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":159083,"reputation":15549,"user_id":378151,"accept_rate":74,"display_name":"Snekse"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1529480221,"creation_date":1485459623,"answer_id":41881604,"question_id":309424,"body_markdown":"[In Groovy][1]\r\n\r\n    inputStream.getText()\r\n\r\n\r\n  [1]: http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/InputStream.html#getText()","title":"How do I read / convert an InputStream into a String in Java?","body":"<p><a href=\"http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/InputStream.html#getText()\" rel=\"nofollow noreferrer\">In Groovy</a></p>\n\n<pre><code>inputStream.getText()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9330342,"reputation":954,"user_id":6926281,"accept_rate":67,"display_name":"Halfacht"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1494416287,"creation_date":1494416287,"answer_id":43891396,"question_id":309424,"body_markdown":"*Raghu K Nair* Was the only one using a scanner.\r\nThe code I use is a little different:\r\n\r\n    String convertToString(InputStream in){\r\n        Scanner scanner = new Scanner(in)\r\n        scanner.useDelimiter(&quot;\\\\A&quot;);\r\n\r\n        boolean hasInput = scanner.hasNext();\r\n        if (hasInput) {\r\n            return scanner.next();\r\n        } else {\r\n            return null;\r\n        }\r\n \r\n    }\r\n\r\n\r\n\t\r\nAbout Delimiters: https://stackoverflow.com/questions/28766377/how-do-i-use-a-delimiter-in-java-scanner\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p><em>Raghu K Nair</em> Was the only one using a scanner.\nThe code I use is a little different:</p>\n\n<pre><code>String convertToString(InputStream in){\n    Scanner scanner = new Scanner(in)\n    scanner.useDelimiter(\"\\\\A\");\n\n    boolean hasInput = scanner.hasNext();\n    if (hasInput) {\n        return scanner.next();\n    } else {\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>About Delimiters: <a href=\"https://stackoverflow.com/questions/28766377/how-do-i-use-a-delimiter-in-java-scanner\">How do I use a delimiter in Java Scanner?</a></p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502046874,"creation_date":1502042910,"answer_id":45535091,"question_id":309424,"body_markdown":"You can use [Cactoos](http://www.cactoos.org):\r\n\r\n    String text = new TextOf(inputStream).asString();\r\n\r\nUTF-8 encoding is the default one. If you need another one:\r\n\r\n    String text = new TextOf(inputStream, &quot;UTF-16&quot;).asString();\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>You can use <a href=\"http://www.cactoos.org\" rel=\"nofollow noreferrer\">Cactoos</a>:</p>\n\n<pre><code>String text = new TextOf(inputStream).asString();\n</code></pre>\n\n<p>UTF-8 encoding is the default one. If you need another one:</p>\n\n<pre><code>String text = new TextOf(inputStream, \"UTF-16\").asString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3242704,"reputation":13438,"user_id":2735286,"accept_rate":89,"display_name":"gil.fernandes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700015870,"creation_date":1508579173,"answer_id":46861979,"question_id":309424,"body_markdown":"This solution to this question is not the simplest, but since [NIO][1] streams and channels have not been mentioned, here goes a version which uses NIO channels and a ByteBuffer to convert a stream into a string.\r\n\r\n    public static String streamToStringChannel(InputStream in, String encoding, int bufSize) throws IOException {\r\n        ReadableByteChannel channel = Channels.newChannel(in);\r\n        ByteBuffer byteBuffer = ByteBuffer.allocate(bufSize);\r\n        ByteArrayOutputStream bout = new ByteArrayOutputStream();\r\n        WritableByteChannel outChannel = Channels.newChannel(bout);\r\n        while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\r\n            byteBuffer.flip();  //make buffer ready for write\r\n            outChannel.write(byteBuffer);\r\n            byteBuffer.compact(); //make buffer ready for reading\r\n        }\r\n        channel.close();\r\n        outChannel.close();\r\n        return bout.toString(encoding);\r\n    }\r\n\r\nHere is an example how to use it:\r\n\r\n    try (InputStream in = new FileInputStream(&quot;/tmp/large_file.xml&quot;)) {\r\n        String x = streamToStringChannel(in, &quot;UTF-8&quot;, 1);\r\n        System.out.println(x);\r\n    }\r\n\r\nThe performance of this method should be good for large files.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Non-blocking_I/O_(Java)\r\n\r\n\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>This solution to this question is not the simplest, but since <a href=\"https://en.wikipedia.org/wiki/Non-blocking_I/O_(Java)\" rel=\"nofollow noreferrer\">NIO</a> streams and channels have not been mentioned, here goes a version which uses NIO channels and a ByteBuffer to convert a stream into a string.</p>\n<pre><code>public static String streamToStringChannel(InputStream in, String encoding, int bufSize) throws IOException {\n    ReadableByteChannel channel = Channels.newChannel(in);\n    ByteBuffer byteBuffer = ByteBuffer.allocate(bufSize);\n    ByteArrayOutputStream bout = new ByteArrayOutputStream();\n    WritableByteChannel outChannel = Channels.newChannel(bout);\n    while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\n        byteBuffer.flip();  //make buffer ready for write\n        outChannel.write(byteBuffer);\n        byteBuffer.compact(); //make buffer ready for reading\n    }\n    channel.close();\n    outChannel.close();\n    return bout.toString(encoding);\n}\n</code></pre>\n<p>Here is an example how to use it:</p>\n<pre><code>try (InputStream in = new FileInputStream(&quot;/tmp/large_file.xml&quot;)) {\n    String x = streamToStringChannel(in, &quot;UTF-8&quot;, 1);\n    System.out.println(x);\n}\n</code></pre>\n<p>The performance of this method should be good for large files.</p>\n"},{"comments":[{"owner":{"account_id":1995196,"reputation":99,"user_id":1788304,"display_name":"Dalibor"},"score":0,"creation_date":1558044484,"post_id":48775964,"comment_id":98980827,"body_markdown":"[Making benchmarks in Java is not easy](http://tutorials.jenkov.com/java-performance/jmh.html#why-are-java-microbenchmarks-hard) (especially because of JIT).\nAfter reading Benchmark source code, I&#39;m convinced that those values above are not precise and everyone should be careful by believing them.","body":"<a href=\"http://tutorials.jenkov.com/java-performance/jmh.html#why-are-java-microbenchmarks-hard\" rel=\"nofollow noreferrer\">Making benchmarks in Java is not easy</a> (especially because of JIT). After reading Benchmark source code, I&#39;m convinced that those values above are not precise and everyone should be careful by believing them."},{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":0,"creation_date":1559052388,"post_id":48775964,"comment_id":99293075,"body_markdown":"@Dalibor you probably should provide more reasoning for your claim rather than just a link.","body":"@Dalibor you probably should provide more reasoning for your claim rather than just a link."},{"owner":{"account_id":1995196,"reputation":99,"user_id":1788304,"display_name":"Dalibor"},"score":0,"creation_date":1559167486,"post_id":48775964,"comment_id":99340835,"body_markdown":"I think that it is really known fact that it is not easy to make your own benchmark. For those who do not know that, there is link ;)","body":"I think that it is really known fact that it is not easy to make your own benchmark. For those who do not know that, there is link ;)"},{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":0,"creation_date":1559174207,"post_id":48775964,"comment_id":99342376,"body_markdown":"@Dalibor I am perhaps not the best, but I have a good understanding of Java benchmarks, so unless you can point out a specific problem, you are just misleading, and I will not continue the conversation with you under those conditions.","body":"@Dalibor I am perhaps not the best, but I have a good understanding of Java benchmarks, so unless you can point out a specific problem, you are just misleading, and I will not continue the conversation with you under those conditions."},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":0,"creation_date":1573843681,"post_id":48775964,"comment_id":104033266,"body_markdown":"Mostly I agree with Dalibor. You say you have a &quot;good understanding of Java benchmarks&quot;, but you seem to have implemented the most naive approach while being apparently ignorant of the well known issues of this approach. For starters, read every post on this question: https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java","body":"Mostly I agree with Dalibor. You say you have a &quot;good understanding of Java benchmarks&quot;, but you seem to have implemented the most naive approach while being apparently ignorant of the well known issues of this approach. For starters, read every post on this question: <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"},{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":0,"creation_date":1573851578,"post_id":48775964,"comment_id":104036362,"body_markdown":"@DavidS my test complies with the rules in the excepted answer that you linked. Are you able to point out for any problem in my implementation?","body":"@DavidS my test complies with the rules in the excepted answer that you linked. Are you able to point out for any problem in my implementation?"},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":3,"creation_date":1573854956,"post_id":48775964,"comment_id":104037566,"body_markdown":"From the accepted answer: Rule 0: Read the paper, which essentially warns against attempting a micro-benchmark. Rule 1: You have no warm up phase. Rule 2-3: You&#39;ve given no indication you used these flags. Rule 8: Use a library like JMH. With 135 votes in the comments: Don&#39;t use `System.currentTimeMillis()`. Moving on to other highly voted answers. Jon Skeet: use `System.gc()` between iterations, and run your test long enough to measure the results in seconds, not milliseconds. Mixing tests in a single JVM run is bad, as the compiler optimizations done for one test will impact another.","body":"From the accepted answer: Rule 0: Read the paper, which essentially warns against attempting a micro-benchmark. Rule 1: You have no warm up phase. Rule 2-3: You&#39;ve given no indication you used these flags. Rule 8: Use a library like JMH. With 135 votes in the comments: Don&#39;t use <code>System.currentTimeMillis()</code>. Moving on to other highly voted answers. Jon Skeet: use <code>System.gc()</code> between iterations, and run your test long enough to measure the results in seconds, not milliseconds. Mixing tests in a single JVM run is bad, as the compiler optimizations done for one test will impact another."},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":0,"creation_date":1574198796,"post_id":48775964,"comment_id":104144510,"body_markdown":"I have some free time, so here are a few more. Rule 5: You include the first iteration in your timing phase. Rule 6: You have used no special tools to &quot;read the compilers mind&quot;. Rule 7: You have given no indication that you used these flags. There, I think that about covers it. I think that&#39;s every rule except for rule 4.","body":"I have some free time, so here are a few more. Rule 5: You include the first iteration in your timing phase. Rule 6: You have used no special tools to &quot;read the compilers mind&quot;. Rule 7: You have given no indication that you used these flags. There, I think that about covers it. I think that&#39;s every rule except for rule 4."},{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":0,"creation_date":1574220994,"post_id":48775964,"comment_id":104150439,"body_markdown":"@DavidS Rule 0,8: As I already mentioned, I know what I am doing, so this one does not applies here, there is more than one way to do things. Rule 1: of course I do, read my code more carefully, the test is called before the timer starts to worm up! As for System.gc(), it&#39;s just hint for for the system, you cannot trust it to do anything.","body":"@DavidS Rule 0,8: As I already mentioned, I know what I am doing, so this one does not applies here, there is more than one way to do things. Rule 1: of course I do, read my code more carefully, the test is called before the timer starts to worm up! As for System.gc(), it&#39;s just hint for for the system, you cannot trust it to do anything."},{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":0,"creation_date":1574221108,"post_id":48775964,"comment_id":104150461,"body_markdown":"@DavidS if you disagree with my implementation, run your own banchmark using what ever library you want and bring your results here. I be happy to compare","body":"@DavidS if you disagree with my implementation, run your own banchmark using what ever library you want and bring your results here. I be happy to compare"},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":0,"creation_date":1574272946,"post_id":48775964,"comment_id":104176596,"body_markdown":"You asked me to point out the problems. I have done so. I&#39;m almost done trying to convince you, but here we go one more time. Rule 1: A single iteration is not a &quot;warm up&quot;: the JIT compiler optimizes after thousands of iterations, not one. `System.gc` is a just a hint, but it&#39;s a very reliable one, and it would improve your tests. Finally, you are ignoring all of the other points: compiler flags, currentTimeMillis, splitting tests across multiple JVM runs. These are the serious problems with your attempt at benchmarking. I did not make them up myself: they are well known practices and tools.","body":"You asked me to point out the problems. I have done so. I&#39;m almost done trying to convince you, but here we go one more time. Rule 1: A single iteration is not a &quot;warm up&quot;: the JIT compiler optimizes after thousands of iterations, not one. <code>System.gc</code> is a just a hint, but it&#39;s a very reliable one, and it would improve your tests. Finally, you are ignoring all of the other points: compiler flags, currentTimeMillis, splitting tests across multiple JVM runs. These are the serious problems with your attempt at benchmarking. I did not make them up myself: they are well known practices and tools."},{"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"score":0,"creation_date":1574284613,"post_id":48775964,"comment_id":104182091,"body_markdown":"@DavidS I think you are miss reading this. Check out the input size. It&#39;s 1M byte array. Iterating on it once means the underline stream implementation is going todo a lot of loops.","body":"@DavidS I think you are miss reading this. Check out the input size. It&#39;s 1M byte array. Iterating on it once means the underline stream implementation is going todo a lot of loops."},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":0,"creation_date":1574285560,"post_id":48775964,"comment_id":104182456,"body_markdown":"How many loops for warm-up? Will the loop count vary by algorithm used? Will it be enough to ensure the JIT compiler has achieved optimization? How would you know when it is enough? Wouldn&#39;t it be better to explicitly declare a warm-up phase with a known-number of iterations instead of relying on the underlying stream implementation?  Wouldn&#39;t it be better to use a tool like JMH instead of trying to account for all of this?","body":"How many loops for warm-up? Will the loop count vary by algorithm used? Will it be enough to ensure the JIT compiler has achieved optimization? How would you know when it is enough? Wouldn&#39;t it be better to explicitly declare a warm-up phase with a known-number of iterations instead of relying on the underlying stream implementation?  Wouldn&#39;t it be better to use a tool like JMH instead of trying to account for all of this?"}],"tags":[],"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"comment_count":13,"down_vote_count":1,"up_vote_count":68,"is_accepted":false,"score":67,"last_activity_date":1546735559,"creation_date":1518557408,"answer_id":48775964,"question_id":309424,"body_markdown":"I did a benchmark upon 14 distinct answers here (sorry for not providing credits but there are too many duplicates).\r\n\r\nThe result is very surprising. It turns out that Apache **IOUtils** is the slowest and `ByteArrayOutputStream` is the fastest solutions:\r\n\r\nSo first here is the best method:\r\n\r\n    public String inputStreamToString(InputStream inputStream) throws IOException {\r\n        try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\r\n            byte[] buffer = new byte[1024];\r\n            int length;\r\n            while ((length = inputStream.read(buffer)) != -1) {\r\n                result.write(buffer, 0, length);\r\n            }\r\n\r\n            return result.toString(UTF_8);\r\n        }\r\n    }\r\n\r\nBenchmark results, of 20 MB random bytes in 20 cycles\r\n----------------------------------------------------\r\nTime in milliseconds\r\n\r\n - ByteArrayOutputStreamTest: 194\r\n - NioStream: 198\r\n - Java9ISTransferTo: 201\r\n - Java9ISReadAllBytes: 205\r\n - BufferedInputStreamVsByteArrayOutputStream: 314\r\n - ApacheStringWriter2: 574\r\n - GuavaCharStreams: 589\r\n - ScannerReaderNoNextTest: 614\r\n - ScannerReader: 633\r\n - ApacheStringWriter: 1544\r\n - StreamApi: Error\r\n - ParallelStreamApi: Error\r\n - BufferReaderTest: Error\r\n - InputStreamAndStringBuilder: Error\r\n\r\nBenchmark source code\r\n---------------------\r\n\r\n    import com.google.common.io.CharStreams;\r\n    import org.apache.commons.io.IOUtils;\r\n\r\n    import java.io.*;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.Channels;\r\n    import java.nio.channels.ReadableByteChannel;\r\n    import java.nio.channels.WritableByteChannel;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.Random;\r\n    import java.util.stream.Collectors;\r\n\r\n    /**\r\n     * Created by Ilya Gazman on 2/13/18.\r\n     */\r\n    public class InputStreamToString {\r\n\r\n\r\n        private static final String UTF_8 = &quot;UTF-8&quot;;\r\n\r\n        public static void main(String... args) {\r\n            log(&quot;App started&quot;);\r\n            byte[] bytes = new byte[1024 * 1024];\r\n            new Random().nextBytes(bytes);\r\n            log(&quot;Stream is ready\\n&quot;);\r\n\r\n            try {\r\n                test(bytes);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        private static void test(byte[] bytes) throws IOException {\r\n            List&lt;Stringify&gt; tests = Arrays.asList(\r\n                    new ApacheStringWriter(),\r\n                    new ApacheStringWriter2(),\r\n                    new NioStream(),\r\n                    new ScannerReader(),\r\n                    new ScannerReaderNoNextTest(),\r\n                    new GuavaCharStreams(),\r\n                    new StreamApi(),\r\n                    new ParallelStreamApi(),\r\n                    new ByteArrayOutputStreamTest(),\r\n                    new BufferReaderTest(),\r\n                    new BufferedInputStreamVsByteArrayOutputStream(),\r\n                    new InputStreamAndStringBuilder(),\r\n                    new Java9ISTransferTo(),\r\n                    new Java9ISReadAllBytes()\r\n            );\r\n\r\n            String solution = new String(bytes, &quot;UTF-8&quot;);\r\n\r\n            for (Stringify test : tests) {\r\n                try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\r\n                    String s = test.inputStreamToString(inputStream);\r\n                    if (!s.equals(solution)) {\r\n                        log(test.name() + &quot;: Error&quot;);\r\n                        continue;\r\n                    }\r\n                }\r\n                long startTime = System.currentTimeMillis();\r\n                for (int i = 0; i &lt; 20; i++) {\r\n                    try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\r\n                        test.inputStreamToString(inputStream);\r\n                    }\r\n                }\r\n                log(test.name() + &quot;: &quot; + (System.currentTimeMillis() - startTime));\r\n            }\r\n        }\r\n\r\n        private static void log(String message) {\r\n            System.out.println(message);\r\n        }\r\n\r\n        interface Stringify {\r\n            String inputStreamToString(InputStream inputStream) throws IOException;\r\n\r\n            default String name() {\r\n                return this.getClass().getSimpleName();\r\n            }\r\n        }\r\n\r\n        static class ApacheStringWriter implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                StringWriter writer = new StringWriter();\r\n                IOUtils.copy(inputStream, writer, UTF_8);\r\n                return writer.toString();\r\n            }\r\n        }\r\n\r\n        static class ApacheStringWriter2 implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                return IOUtils.toString(inputStream, UTF_8);\r\n            }\r\n        }\r\n\r\n        static class NioStream implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream in) throws IOException {\r\n                ReadableByteChannel channel = Channels.newChannel(in);\r\n                ByteBuffer byteBuffer = ByteBuffer.allocate(1024 * 16);\r\n                ByteArrayOutputStream bout = new ByteArrayOutputStream();\r\n                WritableByteChannel outChannel = Channels.newChannel(bout);\r\n                while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\r\n                    byteBuffer.flip();  //make buffer ready for write\r\n                    outChannel.write(byteBuffer);\r\n                    byteBuffer.compact(); //make buffer ready for reading\r\n                }\r\n                channel.close();\r\n                outChannel.close();\r\n                return bout.toString(UTF_8);\r\n            }\r\n        }\r\n\r\n        static class ScannerReader implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream is) throws IOException {\r\n                java.util.Scanner s = new java.util.Scanner(is).useDelimiter(&quot;\\\\A&quot;);\r\n                return s.hasNext() ? s.next() : &quot;&quot;;\r\n            }\r\n        }\r\n\r\n        static class ScannerReaderNoNextTest implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream is) throws IOException {\r\n                java.util.Scanner s = new java.util.Scanner(is).useDelimiter(&quot;\\\\A&quot;);\r\n                return s.next();\r\n            }\r\n        }\r\n\r\n        static class GuavaCharStreams implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream is) throws IOException {\r\n                return CharStreams.toString(new InputStreamReader(\r\n                        is, UTF_8));\r\n            }\r\n        }\r\n\r\n        static class StreamApi implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                return new BufferedReader(new InputStreamReader(inputStream))\r\n                        .lines().collect(Collectors.joining(&quot;\\n&quot;));\r\n            }\r\n        }\r\n\r\n        static class ParallelStreamApi implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                return new BufferedReader(new InputStreamReader(inputStream)).lines()\r\n                        .parallel().collect(Collectors.joining(&quot;\\n&quot;));\r\n            }\r\n        }\r\n\r\n        static class ByteArrayOutputStreamTest implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\r\n                    byte[] buffer = new byte[1024];\r\n                    int length;\r\n                    while ((length = inputStream.read(buffer)) != -1) {\r\n                        result.write(buffer, 0, length);\r\n                    }\r\n\r\n                    return result.toString(UTF_8);\r\n                }\r\n            }\r\n        }\r\n\r\n        static class BufferReaderTest implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                String newLine = System.getProperty(&quot;line.separator&quot;);\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n                StringBuilder result = new StringBuilder(UTF_8);\r\n                String line;\r\n                boolean flag = false;\r\n                while ((line = reader.readLine()) != null) {\r\n                    result.append(flag ? newLine : &quot;&quot;).append(line);\r\n                    flag = true;\r\n                }\r\n                return result.toString();\r\n            }\r\n        }\r\n\r\n        static class BufferedInputStreamVsByteArrayOutputStream implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                BufferedInputStream bis = new BufferedInputStream(inputStream);\r\n                ByteArrayOutputStream buf = new ByteArrayOutputStream();\r\n                int result = bis.read();\r\n                while (result != -1) {\r\n                    buf.write((byte) result);\r\n                    result = bis.read();\r\n                }\r\n\r\n                return buf.toString(UTF_8);\r\n            }\r\n        }\r\n\r\n        static class InputStreamAndStringBuilder implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                int ch;\r\n                StringBuilder sb = new StringBuilder(UTF_8);\r\n                while ((ch = inputStream.read()) != -1)\r\n                    sb.append((char) ch);\r\n                return sb.toString();\r\n            }\r\n        }\r\n\r\n        static class Java9ISTransferTo implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n                inputStream.transferTo(bos);\r\n                return bos.toString(UTF_8);\r\n            }\r\n        }\r\n\r\n        static class Java9ISReadAllBytes implements Stringify {\r\n\r\n            @Override\r\n            public String inputStreamToString(InputStream inputStream) throws IOException {\r\n                return new String(inputStream.readAllBytes(), UTF_8);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I did a benchmark upon 14 distinct answers here (sorry for not providing credits but there are too many duplicates).</p>\n\n<p>The result is very surprising. It turns out that Apache <strong>IOUtils</strong> is the slowest and <code>ByteArrayOutputStream</code> is the fastest solutions:</p>\n\n<p>So first here is the best method:</p>\n\n<pre><code>public String inputStreamToString(InputStream inputStream) throws IOException {\n    try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\n        byte[] buffer = new byte[1024];\n        int length;\n        while ((length = inputStream.read(buffer)) != -1) {\n            result.write(buffer, 0, length);\n        }\n\n        return result.toString(UTF_8);\n    }\n}\n</code></pre>\n\n<h2>Benchmark results, of 20 MB random bytes in 20 cycles</h2>\n\n<p>Time in milliseconds</p>\n\n<ul>\n<li>ByteArrayOutputStreamTest: 194</li>\n<li>NioStream: 198</li>\n<li>Java9ISTransferTo: 201</li>\n<li>Java9ISReadAllBytes: 205</li>\n<li>BufferedInputStreamVsByteArrayOutputStream: 314</li>\n<li>ApacheStringWriter2: 574</li>\n<li>GuavaCharStreams: 589</li>\n<li>ScannerReaderNoNextTest: 614</li>\n<li>ScannerReader: 633</li>\n<li>ApacheStringWriter: 1544</li>\n<li>StreamApi: Error</li>\n<li>ParallelStreamApi: Error</li>\n<li>BufferReaderTest: Error</li>\n<li>InputStreamAndStringBuilder: Error</li>\n</ul>\n\n<h2>Benchmark source code</h2>\n\n<pre><code>import com.google.common.io.CharStreams;\nimport org.apache.commons.io.IOUtils;\n\nimport java.io.*;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.Channels;\nimport java.nio.channels.ReadableByteChannel;\nimport java.nio.channels.WritableByteChannel;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.stream.Collectors;\n\n/**\n * Created by Ilya Gazman on 2/13/18.\n */\npublic class InputStreamToString {\n\n\n    private static final String UTF_8 = \"UTF-8\";\n\n    public static void main(String... args) {\n        log(\"App started\");\n        byte[] bytes = new byte[1024 * 1024];\n        new Random().nextBytes(bytes);\n        log(\"Stream is ready\\n\");\n\n        try {\n            test(bytes);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void test(byte[] bytes) throws IOException {\n        List&lt;Stringify&gt; tests = Arrays.asList(\n                new ApacheStringWriter(),\n                new ApacheStringWriter2(),\n                new NioStream(),\n                new ScannerReader(),\n                new ScannerReaderNoNextTest(),\n                new GuavaCharStreams(),\n                new StreamApi(),\n                new ParallelStreamApi(),\n                new ByteArrayOutputStreamTest(),\n                new BufferReaderTest(),\n                new BufferedInputStreamVsByteArrayOutputStream(),\n                new InputStreamAndStringBuilder(),\n                new Java9ISTransferTo(),\n                new Java9ISReadAllBytes()\n        );\n\n        String solution = new String(bytes, \"UTF-8\");\n\n        for (Stringify test : tests) {\n            try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\n                String s = test.inputStreamToString(inputStream);\n                if (!s.equals(solution)) {\n                    log(test.name() + \": Error\");\n                    continue;\n                }\n            }\n            long startTime = System.currentTimeMillis();\n            for (int i = 0; i &lt; 20; i++) {\n                try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\n                    test.inputStreamToString(inputStream);\n                }\n            }\n            log(test.name() + \": \" + (System.currentTimeMillis() - startTime));\n        }\n    }\n\n    private static void log(String message) {\n        System.out.println(message);\n    }\n\n    interface Stringify {\n        String inputStreamToString(InputStream inputStream) throws IOException;\n\n        default String name() {\n            return this.getClass().getSimpleName();\n        }\n    }\n\n    static class ApacheStringWriter implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            StringWriter writer = new StringWriter();\n            IOUtils.copy(inputStream, writer, UTF_8);\n            return writer.toString();\n        }\n    }\n\n    static class ApacheStringWriter2 implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return IOUtils.toString(inputStream, UTF_8);\n        }\n    }\n\n    static class NioStream implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream in) throws IOException {\n            ReadableByteChannel channel = Channels.newChannel(in);\n            ByteBuffer byteBuffer = ByteBuffer.allocate(1024 * 16);\n            ByteArrayOutputStream bout = new ByteArrayOutputStream();\n            WritableByteChannel outChannel = Channels.newChannel(bout);\n            while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\n                byteBuffer.flip();  //make buffer ready for write\n                outChannel.write(byteBuffer);\n                byteBuffer.compact(); //make buffer ready for reading\n            }\n            channel.close();\n            outChannel.close();\n            return bout.toString(UTF_8);\n        }\n    }\n\n    static class ScannerReader implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n            return s.hasNext() ? s.next() : \"\";\n        }\n    }\n\n    static class ScannerReaderNoNextTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n            return s.next();\n        }\n    }\n\n    static class GuavaCharStreams implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            return CharStreams.toString(new InputStreamReader(\n                    is, UTF_8));\n        }\n    }\n\n    static class StreamApi implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new BufferedReader(new InputStreamReader(inputStream))\n                    .lines().collect(Collectors.joining(\"\\n\"));\n        }\n    }\n\n    static class ParallelStreamApi implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new BufferedReader(new InputStreamReader(inputStream)).lines()\n                    .parallel().collect(Collectors.joining(\"\\n\"));\n        }\n    }\n\n    static class ByteArrayOutputStreamTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\n                byte[] buffer = new byte[1024];\n                int length;\n                while ((length = inputStream.read(buffer)) != -1) {\n                    result.write(buffer, 0, length);\n                }\n\n                return result.toString(UTF_8);\n            }\n        }\n    }\n\n    static class BufferReaderTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            String newLine = System.getProperty(\"line.separator\");\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            StringBuilder result = new StringBuilder(UTF_8);\n            String line;\n            boolean flag = false;\n            while ((line = reader.readLine()) != null) {\n                result.append(flag ? newLine : \"\").append(line);\n                flag = true;\n            }\n            return result.toString();\n        }\n    }\n\n    static class BufferedInputStreamVsByteArrayOutputStream implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            BufferedInputStream bis = new BufferedInputStream(inputStream);\n            ByteArrayOutputStream buf = new ByteArrayOutputStream();\n            int result = bis.read();\n            while (result != -1) {\n                buf.write((byte) result);\n                result = bis.read();\n            }\n\n            return buf.toString(UTF_8);\n        }\n    }\n\n    static class InputStreamAndStringBuilder implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            int ch;\n            StringBuilder sb = new StringBuilder(UTF_8);\n            while ((ch = inputStream.read()) != -1)\n                sb.append((char) ch);\n            return sb.toString();\n        }\n    }\n\n    static class Java9ISTransferTo implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\n            inputStream.transferTo(bos);\n            return bos.toString(UTF_8);\n        }\n    }\n\n    static class Java9ISReadAllBytes implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new String(inputStream.readAllBytes(), UTF_8);\n        }\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1674237883,"post_id":49707572,"comment_id":132679435,"body_markdown":"Though the [tag wiki for Okio](https://stackoverflow.com/tags/okio/info) has been plagiarised from that page.","body":"Though the <a href=\"https://stackoverflow.com/tags/okio/info\">tag wiki for Okio</a> has been plagiarised from that page."}],"tags":[],"owner":{"account_id":3284132,"reputation":2685,"user_id":2764007,"display_name":"drakeet"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1674237800,"creation_date":1523105603,"answer_id":49707572,"question_id":309424,"body_markdown":"With [Okio][1]:\r\n\r\n    String result = Okio.buffer(Okio.source(inputStream)).readUtf8();\r\n\r\n  [1]: https://square.github.io/okio/\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>With <a href=\"https://square.github.io/okio/\" rel=\"nofollow noreferrer\">Okio</a>:</p>\n<pre><code>String result = Okio.buffer(Okio.source(inputStream)).readUtf8();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10959307,"reputation":170,"user_id":8558398,"display_name":"13hola"},"comment_count":0,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1567931212,"creation_date":1530189951,"answer_id":51083322,"question_id":309424,"body_markdown":"I have created this code, and it works. There are no required external plug-ins.\r\n\r\nThere is a converter `String` to `Stream` and `Stream` to `String`:\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.InputStream;\r\n\r\n    public class STRINGTOSTREAM {\r\n\r\n        public static void main(String[] args)\r\n        {\r\n            String text = &quot;Hello Bhola..!\\nMy Name Is Kishan &quot;;\r\n\r\n            InputStream strm = new ByteArrayInputStream(text.getBytes());    // Convert String to Stream\r\n\r\n            String data = streamTostring(strm);\r\n\r\n            System.out.println(data);\r\n        }\r\n\r\n        static String streamTostring(InputStream stream)\r\n        {\r\n            String data = &quot;&quot;;\r\n\r\n            try\r\n            {\r\n                StringBuilder stringbuld = new StringBuilder();\r\n                int i;\r\n                while ((i=stream.read())!=-1)\r\n                {\r\n                    stringbuld.append((char)i);\r\n                }\r\n                data = stringbuld.toString();\r\n            }\r\n            catch(Exception e)\r\n            {\r\n                data = &quot;No data Streamed.&quot;;\r\n            }\r\n            return data;\r\n        }\r\n\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I have created this code, and it works. There are no required external plug-ins.</p>\n\n<p>There is a converter <code>String</code> to <code>Stream</code> and <code>Stream</code> to <code>String</code>:</p>\n\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.InputStream;\n\npublic class STRINGTOSTREAM {\n\n    public static void main(String[] args)\n    {\n        String text = \"Hello Bhola..!\\nMy Name Is Kishan \";\n\n        InputStream strm = new ByteArrayInputStream(text.getBytes());    // Convert String to Stream\n\n        String data = streamTostring(strm);\n\n        System.out.println(data);\n    }\n\n    static String streamTostring(InputStream stream)\n    {\n        String data = \"\";\n\n        try\n        {\n            StringBuilder stringbuld = new StringBuilder();\n            int i;\n            while ((i=stream.read())!=-1)\n            {\n                stringbuld.append((char)i);\n            }\n            data = stringbuld.toString();\n        }\n        catch(Exception e)\n        {\n            data = \"No data Streamed.\";\n        }\n        return data;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2994613,"reputation":7964,"user_id":2599133,"accept_rate":83,"display_name":"Hans Brende"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1542049907,"creation_date":1541632897,"answer_id":53199396,"question_id":309424,"body_markdown":"# ISO-8859-1\r\nHere is a **very** performant way to do this if you know your input stream&#39;s encoding is ISO-8859-1 or ASCII. It (1) avoids the unnecessary synchronization present in `StringWriter`&#39;s internal `StringBuffer`, (2) avoids the overhead of `InputStreamReader`, and (3) minimizes the number of times `StringBuilder`&#39;s internal `char` array must be copied.\r\n\r\n    public static String iso_8859_1(InputStream is) throws IOException {\r\n        StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\r\n        byte[] buffer = new byte[4096];\r\n        int n;\r\n        while ((n = is.read(buffer)) != -1) {\r\n            for (int i = 0; i &lt; n; i++) {\r\n                chars.append((char)(buffer[i] &amp; 0xFF));\r\n            }\r\n        }\r\n        return chars.toString();\r\n    }\r\n\r\n# UTF-8\r\nThe same general strategy may be used for a stream encoded with UTF-8: \r\n\r\n    public static String utf8(InputStream is) throws IOException {\r\n        StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\r\n        byte[] buffer = new byte[4096];\r\n        int n;\r\n        int state = 0;\r\n        while ((n = is.read(buffer)) != -1) {\r\n            for (int i = 0; i &lt; n; i++) {\r\n                if ((state = nextStateUtf8(state, buffer[i])) &gt;= 0) {\r\n                    chars.appendCodePoint(state);\r\n                } else if (state == -1) { //error\r\n                    state = 0;\r\n                    chars.append(&#39;\\uFFFD&#39;); //replacement char\r\n                }\r\n            }\r\n        }\r\n        return chars.toString();\r\n    }\r\n\r\nwhere the `nextStateUtf8()` function is defined as follows:\r\n\r\n    /**\r\n     * Returns the next UTF-8 state given the next byte of input and the current state.\r\n     * If the input byte is the last byte in a valid UTF-8 byte sequence,\r\n     * the returned state will be the corresponding unicode character (in the range of 0 through 0x10FFFF).\r\n     * Otherwise, a negative integer is returned. A state of -1 is returned whenever an\r\n     * invalid UTF-8 byte sequence is detected.\r\n     */\r\n    static int nextStateUtf8(int currentState, byte nextByte) {\r\n        switch (currentState &amp; 0xF0000000) {\r\n            case 0:\r\n                if ((nextByte &amp; 0x80) == 0) { //0 trailing bytes (ASCII)\r\n                    return nextByte;\r\n                } else if ((nextByte &amp; 0xE0) == 0xC0) { //1 trailing byte\r\n                    if (nextByte == (byte) 0xC0 || nextByte == (byte) 0xC1) { //0xCO &amp; 0xC1 are overlong\r\n                        return -1;\r\n                    } else {\r\n                        return nextByte &amp; 0xC000001F;\r\n                    }\r\n                } else if ((nextByte &amp; 0xF0) == 0xE0) { //2 trailing bytes\r\n                    if (nextByte == (byte) 0xE0) { //possibly overlong\r\n                        return nextByte &amp; 0xA000000F;\r\n                    } else if (nextByte == (byte) 0xED) { //possibly surrogate\r\n                        return nextByte &amp; 0xB000000F;\r\n                    } else {\r\n                        return nextByte &amp; 0x9000000F;\r\n                    }\r\n                } else if ((nextByte &amp; 0xFC) == 0xF0) { //3 trailing bytes\r\n                    if (nextByte == (byte) 0xF0) { //possibly overlong\r\n                        return nextByte &amp; 0x80000007;\r\n                    } else {\r\n                        return nextByte &amp; 0xE0000007;\r\n                    }\r\n                } else if (nextByte == (byte) 0xF4) { //3 trailing bytes, possibly undefined\r\n                    return nextByte &amp; 0xD0000007;\r\n                } else {\r\n                    return -1;\r\n                }\r\n            case 0xE0000000: //3rd-to-last continuation byte\r\n                return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\r\n            case 0x80000000: //3rd-to-last continuation byte, check overlong\r\n                return (nextByte &amp; 0xE0) == 0xA0 || (nextByte &amp; 0xF0) == 0x90 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\r\n            case 0xD0000000: //3rd-to-last continuation byte, check undefined\r\n                return (nextByte &amp; 0xF0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\r\n            case 0x90000000: //2nd-to-last continuation byte\r\n                return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\r\n            case 0xA0000000: //2nd-to-last continuation byte, check overlong\r\n                return (nextByte &amp; 0xE0) == 0xA0 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\r\n            case 0xB0000000: //2nd-to-last continuation byte, check surrogate\r\n                return (nextByte &amp; 0xE0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\r\n            case 0xC0000000: //last continuation byte\r\n                return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x3F : -1;\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n\r\n# Auto-Detect Encoding\r\nIf your input stream was encoded using either ASCII or ISO-8859-1 or UTF-8, but you&#39;re not sure which, we can use a similar method to the last, but with an additional encoding-detection component to *auto-detect* the encoding before returning the string.\r\n\r\n\r\n    public static String autoDetect(InputStream is) throws IOException {\r\n        StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\r\n        byte[] buffer = new byte[4096];\r\n        int n;\r\n        int state = 0;\r\n        boolean ascii = true;\r\n        while ((n = is.read(buffer)) != -1) {\r\n            for (int i = 0; i &lt; n; i++) {\r\n                if ((state = nextStateUtf8(state, buffer[i])) &gt; 0x7F)\r\n                    ascii = false;\r\n                chars.append((char)(buffer[i] &amp; 0xFF));\r\n            }\r\n        }\r\n\r\n        if (ascii || state &lt; 0) { //probably not UTF-8\r\n            return chars.toString();\r\n        }\r\n        //probably UTF-8\r\n        int pos = 0;\r\n        char[] charBuf = new char[2];\r\n        for (int i = 0, len = chars.length(); i &lt; len; i++) {\r\n            if ((state = nextStateUtf8(state, (byte)chars.charAt(i))) &gt;= 0) {\r\n                boolean hi = Character.toChars(state, charBuf, 0) == 2;\r\n                chars.setCharAt(pos++, charBuf[0]);\r\n                if (hi) {\r\n                    chars.setCharAt(pos++, charBuf[1]);\r\n                }\r\n            }\r\n        }\r\n        return chars.substring(0, pos);\r\n    }\r\n\r\n\r\n\r\nIf your input stream has an encoding that is neither ISO-8859-1 nor ASCII nor UTF-8, then I defer to the other answers already present.","title":"How do I read / convert an InputStream into a String in Java?","body":"<h1>ISO-8859-1</h1>\n\n<p>Here is a <strong>very</strong> performant way to do this if you know your input stream's encoding is ISO-8859-1 or ASCII. It (1) avoids the unnecessary synchronization present in <code>StringWriter</code>'s internal <code>StringBuffer</code>, (2) avoids the overhead of <code>InputStreamReader</code>, and (3) minimizes the number of times <code>StringBuilder</code>'s internal <code>char</code> array must be copied.</p>\n\n<pre><code>public static String iso_8859_1(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            chars.append((char)(buffer[i] &amp; 0xFF));\n        }\n    }\n    return chars.toString();\n}\n</code></pre>\n\n<h1>UTF-8</h1>\n\n<p>The same general strategy may be used for a stream encoded with UTF-8: </p>\n\n<pre><code>public static String utf8(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    int state = 0;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            if ((state = nextStateUtf8(state, buffer[i])) &gt;= 0) {\n                chars.appendCodePoint(state);\n            } else if (state == -1) { //error\n                state = 0;\n                chars.append('\\uFFFD'); //replacement char\n            }\n        }\n    }\n    return chars.toString();\n}\n</code></pre>\n\n<p>where the <code>nextStateUtf8()</code> function is defined as follows:</p>\n\n<pre><code>/**\n * Returns the next UTF-8 state given the next byte of input and the current state.\n * If the input byte is the last byte in a valid UTF-8 byte sequence,\n * the returned state will be the corresponding unicode character (in the range of 0 through 0x10FFFF).\n * Otherwise, a negative integer is returned. A state of -1 is returned whenever an\n * invalid UTF-8 byte sequence is detected.\n */\nstatic int nextStateUtf8(int currentState, byte nextByte) {\n    switch (currentState &amp; 0xF0000000) {\n        case 0:\n            if ((nextByte &amp; 0x80) == 0) { //0 trailing bytes (ASCII)\n                return nextByte;\n            } else if ((nextByte &amp; 0xE0) == 0xC0) { //1 trailing byte\n                if (nextByte == (byte) 0xC0 || nextByte == (byte) 0xC1) { //0xCO &amp; 0xC1 are overlong\n                    return -1;\n                } else {\n                    return nextByte &amp; 0xC000001F;\n                }\n            } else if ((nextByte &amp; 0xF0) == 0xE0) { //2 trailing bytes\n                if (nextByte == (byte) 0xE0) { //possibly overlong\n                    return nextByte &amp; 0xA000000F;\n                } else if (nextByte == (byte) 0xED) { //possibly surrogate\n                    return nextByte &amp; 0xB000000F;\n                } else {\n                    return nextByte &amp; 0x9000000F;\n                }\n            } else if ((nextByte &amp; 0xFC) == 0xF0) { //3 trailing bytes\n                if (nextByte == (byte) 0xF0) { //possibly overlong\n                    return nextByte &amp; 0x80000007;\n                } else {\n                    return nextByte &amp; 0xE0000007;\n                }\n            } else if (nextByte == (byte) 0xF4) { //3 trailing bytes, possibly undefined\n                return nextByte &amp; 0xD0000007;\n            } else {\n                return -1;\n            }\n        case 0xE0000000: //3rd-to-last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0x80000000: //3rd-to-last continuation byte, check overlong\n            return (nextByte &amp; 0xE0) == 0xA0 || (nextByte &amp; 0xF0) == 0x90 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0xD0000000: //3rd-to-last continuation byte, check undefined\n            return (nextByte &amp; 0xF0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0x90000000: //2nd-to-last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xA0000000: //2nd-to-last continuation byte, check overlong\n            return (nextByte &amp; 0xE0) == 0xA0 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xB0000000: //2nd-to-last continuation byte, check surrogate\n            return (nextByte &amp; 0xE0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xC0000000: //last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x3F : -1;\n        default:\n            return -1;\n    }\n}\n</code></pre>\n\n<h1>Auto-Detect Encoding</h1>\n\n<p>If your input stream was encoded using either ASCII or ISO-8859-1 or UTF-8, but you're not sure which, we can use a similar method to the last, but with an additional encoding-detection component to <em>auto-detect</em> the encoding before returning the string.</p>\n\n<pre><code>public static String autoDetect(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    int state = 0;\n    boolean ascii = true;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            if ((state = nextStateUtf8(state, buffer[i])) &gt; 0x7F)\n                ascii = false;\n            chars.append((char)(buffer[i] &amp; 0xFF));\n        }\n    }\n\n    if (ascii || state &lt; 0) { //probably not UTF-8\n        return chars.toString();\n    }\n    //probably UTF-8\n    int pos = 0;\n    char[] charBuf = new char[2];\n    for (int i = 0, len = chars.length(); i &lt; len; i++) {\n        if ((state = nextStateUtf8(state, (byte)chars.charAt(i))) &gt;= 0) {\n            boolean hi = Character.toChars(state, charBuf, 0) == 2;\n            chars.setCharAt(pos++, charBuf[0]);\n            if (hi) {\n                chars.setCharAt(pos++, charBuf[1]);\n            }\n        }\n    }\n    return chars.substring(0, pos);\n}\n</code></pre>\n\n<p>If your input stream has an encoding that is neither ISO-8859-1 nor ASCII nor UTF-8, then I defer to the other answers already present.</p>\n"},{"comments":[{"owner":{"account_id":9348686,"reputation":764,"user_id":6944068,"accept_rate":100,"display_name":"toolforger"},"score":1,"creation_date":1579681786,"post_id":55393395,"comment_id":105843150,"body_markdown":"IOUtils has a simpler function for that.","body":"IOUtils has a simpler function for that."}],"tags":[],"owner":{"account_id":10131694,"reputation":1907,"user_id":7484853,"display_name":"Hasee Amarathunga"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553762976,"creation_date":1553762976,"answer_id":55393395,"question_id":309424,"body_markdown":"I suggest the **StringWriter** class for that problem.\r\n\r\n    StringWriter wt= new StringWriter();\r\n    IOUtils.copy(inputStream, wt, encoding);\r\n    String st= wt.toString();","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I suggest the <strong>StringWriter</strong> class for that problem.</p>\n\n<pre><code>StringWriter wt= new StringWriter();\nIOUtils.copy(inputStream, wt, encoding);\nString st= wt.toString();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":1,"creation_date":1640886206,"post_id":58954758,"comment_id":124684417,"body_markdown":"You are converting line separators and in the case where the input doesn&#39;t end with a newline, you are adding one.  This is useful for some cases, but the it is interpreting the input stream rather than doing a direct conversion to a String.","body":"You are converting line separators and in the case where the input doesn&#39;t end with a newline, you are adding one.  This is useful for some cases, but the it is interpreting the input stream rather than doing a direct conversion to a String."}],"tags":[],"owner":{"display_name":"user12402945"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1674237611,"creation_date":1574254164,"answer_id":58954758,"question_id":309424,"body_markdown":"This code is for new Java learners:\r\n\r\n```\r\nprivate String textDataFromFile;\r\n\r\npublic String getFromFile(InputStream myInputStream) throws FileNotFoundException, IOException {\r\n\r\n    BufferedReader bufferReader = new BufferedReader(new InputStreamReader(myInputStream));\r\n\r\n    StringBuilder stringBuilder = new StringBuilder();\r\n\r\n    String eachStringLine;\r\n\r\n    while ((eachStringLine = bufferReader.readLine()) != null) {\r\n        stringBuilder.append(eachStringLine).append(&quot;\\n&quot;);\r\n    }\r\n    textDataFromFile = stringBuilder.toString();\r\n\r\n    return textDataFromFile;\r\n}\r\n```\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>This code is for new Java learners:</p>\n<pre><code>private String textDataFromFile;\n\npublic String getFromFile(InputStream myInputStream) throws FileNotFoundException, IOException {\n\n    BufferedReader bufferReader = new BufferedReader(new InputStreamReader(myInputStream));\n\n    StringBuilder stringBuilder = new StringBuilder();\n\n    String eachStringLine;\n\n    while ((eachStringLine = bufferReader.readLine()) != null) {\n        stringBuilder.append(eachStringLine).append(&quot;\\n&quot;);\n    }\n    textDataFromFile = stringBuilder.toString();\n\n    return textDataFromFile;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"comment_count":0,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1586045027,"creation_date":1586045027,"answer_id":61036395,"question_id":309424,"body_markdown":"```\r\nString inputStreamToString(InputStream inputStream, Charset charset) throws IOException {\r\n    try (\r\n            final StringWriter writer = new StringWriter();\r\n            final InputStreamReader reader = new InputStreamReader(inputStream, charset)\r\n        ) {\r\n        reader.transferTo(writer);\r\n        return writer.toString();\r\n    }\r\n}\r\n```\r\n\r\n* pure Java standard library solution - no libs\r\n* since Java 10 - [Reader#transferTo(java.io.Writer)][1]\r\n* loopless solution\r\n* no new line character handling\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/io/Reader.html#transferTo(java.io.Writer)","title":"How do I read / convert an InputStream into a String in Java?","body":"<pre><code>String inputStreamToString(InputStream inputStream, Charset charset) throws IOException {\n    try (\n            final StringWriter writer = new StringWriter();\n            final InputStreamReader reader = new InputStreamReader(inputStream, charset)\n        ) {\n        reader.transferTo(writer);\n        return writer.toString();\n    }\n}\n</code></pre>\n\n<ul>\n<li>pure Java standard library solution - no libs</li>\n<li>since Java 10 - <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/io/Reader.html#transferTo(java.io.Writer)\" rel=\"noreferrer\">Reader#transferTo(java.io.Writer)</a></li>\n<li>loopless solution</li>\n<li>no new line character handling</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1674237521,"creation_date":1607781039,"answer_id":65265664,"question_id":309424,"body_markdown":"If you need to convert the string to a specific character set *without* external libraries then:\r\n\r\n    public String convertStreamToString(InputStream is) throws IOException {\r\n      try (ByteArrayOutputStream baos = new ByteArrayOutputStream();) {\r\n        is.transferTo(baos);\r\n        return baos.toString(StandardCharsets.UTF_8);\r\n      }\r\n    }\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>If you need to convert the string to a specific character set <em>without</em> external libraries then:</p>\n<pre><code>public String convertStreamToString(InputStream is) throws IOException {\n  try (ByteArrayOutputStream baos = new ByteArrayOutputStream();) {\n    is.transferTo(baos);\n    return baos.toString(StandardCharsets.UTF_8);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23191479,"reputation":56,"user_id":17287795,"display_name":"somayaj"},"comment_count":0,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1674234728,"creation_date":1636216498,"answer_id":69865898,"question_id":309424,"body_markdown":"The easiest way, a one-liner:\r\n\r\n```\r\npublic static void main(String... args) throws IOException {\r\n    System.out.println(new String(Files.readAllBytes(Paths.get(&quot;csv.txt&quot;))));\r\n}\r\n```\r\n","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>The easiest way, a one-liner:</p>\n<pre><code>public static void main(String... args) throws IOException {\n    System.out.println(new String(Files.readAllBytes(Paths.get(&quot;csv.txt&quot;))));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50566,"reputation":9545,"user_id":150884,"accept_rate":83,"display_name":"hertzsprung"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1650902175,"creation_date":1650902175,"answer_id":72002358,"question_id":309424,"body_markdown":"If you&#39;re using AWS SDK v2, call [IoUtils.toUtf8String()](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/utils/IoUtils.html#toUtf8String-java.io.InputStream-):\r\n\r\n```\r\npublic String convertStreamToString(InputStream is) {\r\n    return IoUtils.toUtf8String(is);\r\n}","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>If you're using AWS SDK v2, call <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/utils/IoUtils.html#toUtf8String-java.io.InputStream-\" rel=\"nofollow noreferrer\">IoUtils.toUtf8String()</a>:</p>\n<pre><code>public String convertStreamToString(InputStream is) {\n    return IoUtils.toUtf8String(is);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1681916055,"post_id":75631044,"comment_id":134134702,"body_markdown":"Re *&quot;I see a lot of just snippets but zero explanations as to WHY this the snippet is a good way.&quot;*: The reason is probably that the posters don&#39;t understand it (blind [plagiarism](https://meta.stackoverflow.com/questions/424261/where-do-the-duplication-start-when-an-answer-seems-similar-but-not-fully)). But it is very hard to prove (or disprove).","body":"Re <i>&quot;I see a lot of just snippets but zero explanations as to WHY this the snippet is a good way.&quot;</i>: The reason is probably that the posters don&#39;t understand it (blind <a href=\"https://meta.stackoverflow.com/questions/424261/where-do-the-duplication-start-when-an-answer-seems-similar-but-not-fully\">plagiarism</a>). But it is very hard to prove (or disprove)."},{"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"score":0,"creation_date":1681954938,"post_id":75631044,"comment_id":134141350,"body_markdown":"Well I wasn&#39;t going to go that far, but I appreciate the sentiment.  I just thought everyone was being too succinct. :-)","body":"Well I wasn&#39;t going to go that far, but I appreciate the sentiment.  I just thought everyone was being too succinct. :-)"}],"tags":[],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678481719,"creation_date":1677870944,"answer_id":75631044,"question_id":309424,"body_markdown":"I see a lot of just snippets but zero explanations as to WHY this the snippet is a good way.  I&#39;m going to limit myself to just plain Java.  What&#39;s key to understand about Java:\r\n\r\n - `java.io.InputStream` is for reading bytes.  \r\n - `java.io.Reader` is for reading character data.  \r\n\r\nYou should NOT be reading InputStream and converting that to Strings yourself because the world we are in isn&#39;t single byte focused anymore.  And this is where `java.nio.charset.Charset` objects come into play.  `Charset` classes convert bytes -&gt; char.  They bridge `java.io.InputStream` and `java.io.Reader`.  You have to have `java.nio.charset.Charset` to convert InputStream into a Reader.\r\n\r\nI&#39;m going to do this the low memory usage way (Well until you read the thing into a single string which will eat up the full memory, but dems the requirements ;-)\r\n\r\nHere&#39;s the code:\r\n```\r\npublic String readString(InputStream inStream) {\r\n   char[] buffer = new char[2**16];\r\n   try( Reader reader = new InputStreamReader( inStream, &quot;UTF-8&quot;) ) {\r\n      int length = -1;\r\n      StringBuilder builder = new StringBuilder();\r\n      while( (length = reader.read( buffer, 0, buffer.length )) &gt;= 0 ) {\r\n          builder.append( buffer, 0, length );\r\n      }\r\n   }\r\n   return builder.toString();\r\n}\r\n```\r\n\r\nThe key here is to use `InputStreamReader` to bridge between `InputStream` -&gt; `Reader` where you can read character data.  From there it&#39;s simple to build the string using a `StringBuilder`.  Another important part of `InputStreamReader` is specifying the character encoding.  In this case I used &quot;UTF-8&quot;, but it could be &quot;ISO-8859-1&quot; or &quot;UTF-16&quot;, etc.\r\n\r\nWord to the wise.  I didn&#39;t use BufferedInputStream or BufferedReader to wrap these.  Those classes are overused.  If you are calling `Reader.read( char[], int start, int len)` or other array read methods then you are providing a buffer.  Your usage is *mostly* optimized (the size of the buffer is what is in question)  There is no need to have BufferedInputStream create yet another buffer for you.  You&#39;ve allocated your buffer so there is zero advantage added by wrapping your InputStream in a BufferedInputStream.  Now if you are calling `InputStream.read()` or `Reader.read()` then yes those classes are providing a speed boost by converting single byte/char reads into buffered reads.  But most of the time people don&#39;t read byte by byte.\r\n\r\nThe only exception to that advice is if you want to use readLine in which case BufferedReader is your friend, and go right ahead and use it.  A word of caution is in order.  If you are reading a 1GB one line file it&#39;s going to take over 1GB of memory to read your file which is probably NOT what you want.\r\n\r\nThat&#39;s the tightest loop with minimal memory usage for reading the actual data. And that&#39;s why reading the full data into a String might not always be the best approach, but this code can be adapted to other situations.  If you were write it out to a `java.io.Writer` that streamed it out to an external storage it&#39;d be very tight.","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>I see a lot of just snippets but zero explanations as to WHY this the snippet is a good way.  I'm going to limit myself to just plain Java.  What's key to understand about Java:</p>\n<ul>\n<li><code>java.io.InputStream</code> is for reading bytes.</li>\n<li><code>java.io.Reader</code> is for reading character data.</li>\n</ul>\n<p>You should NOT be reading InputStream and converting that to Strings yourself because the world we are in isn't single byte focused anymore.  And this is where <code>java.nio.charset.Charset</code> objects come into play.  <code>Charset</code> classes convert bytes -&gt; char.  They bridge <code>java.io.InputStream</code> and <code>java.io.Reader</code>.  You have to have <code>java.nio.charset.Charset</code> to convert InputStream into a Reader.</p>\n<p>I'm going to do this the low memory usage way (Well until you read the thing into a single string which will eat up the full memory, but dems the requirements ;-)</p>\n<p>Here's the code:</p>\n<pre><code>public String readString(InputStream inStream) {\n   char[] buffer = new char[2**16];\n   try( Reader reader = new InputStreamReader( inStream, &quot;UTF-8&quot;) ) {\n      int length = -1;\n      StringBuilder builder = new StringBuilder();\n      while( (length = reader.read( buffer, 0, buffer.length )) &gt;= 0 ) {\n          builder.append( buffer, 0, length );\n      }\n   }\n   return builder.toString();\n}\n</code></pre>\n<p>The key here is to use <code>InputStreamReader</code> to bridge between <code>InputStream</code> -&gt; <code>Reader</code> where you can read character data.  From there it's simple to build the string using a <code>StringBuilder</code>.  Another important part of <code>InputStreamReader</code> is specifying the character encoding.  In this case I used &quot;UTF-8&quot;, but it could be &quot;ISO-8859-1&quot; or &quot;UTF-16&quot;, etc.</p>\n<p>Word to the wise.  I didn't use BufferedInputStream or BufferedReader to wrap these.  Those classes are overused.  If you are calling <code>Reader.read( char[], int start, int len)</code> or other array read methods then you are providing a buffer.  Your usage is <em>mostly</em> optimized (the size of the buffer is what is in question)  There is no need to have BufferedInputStream create yet another buffer for you.  You've allocated your buffer so there is zero advantage added by wrapping your InputStream in a BufferedInputStream.  Now if you are calling <code>InputStream.read()</code> or <code>Reader.read()</code> then yes those classes are providing a speed boost by converting single byte/char reads into buffered reads.  But most of the time people don't read byte by byte.</p>\n<p>The only exception to that advice is if you want to use readLine in which case BufferedReader is your friend, and go right ahead and use it.  A word of caution is in order.  If you are reading a 1GB one line file it's going to take over 1GB of memory to read your file which is probably NOT what you want.</p>\n<p>That's the tightest loop with minimal memory usage for reading the actual data. And that's why reading the full data into a String might not always be the best approach, but this code can be adapted to other situations.  If you were write it out to a <code>java.io.Writer</code> that streamed it out to an external storage it'd be very tight.</p>\n"},{"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682453566,"creation_date":1682453566,"answer_id":76105082,"question_id":309424,"body_markdown":"&gt; How do I read / convert an InputStream into a String in Java?\r\n\r\nYou would provide one more possible solution where performance is the main concern, you can improve speed by using a BufferedReader to read the InputStream line by line, instead of reading the InputStream byte by byte. \r\nHere it is a code:\r\n\r\n```\r\npublic String convertStreamToString(InputStream inputStream) throws IOException {\r\n    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n    StringBuilder stringBuilder = new StringBuilder();\r\n    String line;\r\n    while ((line = reader.readLine()) != null) {\r\n        stringBuilder.append(line).append(&quot;\\n&quot;);\r\n    }\r\n    return stringBuilder.toString();\r\n}\r\n\r\n```\r\n\r\nWhen compared to reading the input byte by byte, this method buffers the information and reads it in chunks, which can greatly improve performance.","title":"How do I read / convert an InputStream into a String in Java?","body":"<blockquote>\n<p>How do I read / convert an InputStream into a String in Java?</p>\n</blockquote>\n<p>You would provide one more possible solution where performance is the main concern, you can improve speed by using a BufferedReader to read the InputStream line by line, instead of reading the InputStream byte by byte.\nHere it is a code:</p>\n<pre><code>public String convertStreamToString(InputStream inputStream) throws IOException {\n    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n    StringBuilder stringBuilder = new StringBuilder();\n    String line;\n    while ((line = reader.readLine()) != null) {\n        stringBuilder.append(line).append(&quot;\\n&quot;);\n    }\n    return stringBuilder.toString();\n}\n\n</code></pre>\n<p>When compared to reading the input byte by byte, this method buffers the information and reads it in chunks, which can greatly improve performance.</p>\n"}],"owner":{"account_id":9076,"reputation":47861,"user_id":16616,"accept_rate":100,"display_name":"Johnny Maelstrom"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2642854,"favorite_count":0,"down_vote_count":8,"up_vote_count":4708,"accepted_answer_id":309448,"answer_count":64,"score":4700,"last_activity_date":1700016564,"creation_date":1227286060,"question_id":309424,"body_markdown":"If you have a `java.io.InputStream` object, how should you process that object and produce a `String`?\r\n\r\n---\r\nSuppose I have an `InputStream` that contains text data, and I want to convert it to a `String`, so for example I can write that to a log file.\r\n\r\nWhat is the easiest way to take the `InputStream` and convert it to a `String`?\r\n```\r\npublic String convertStreamToString(InputStream is) {\r\n// ???\r\n}\r\n```","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>If you have a <code>java.io.InputStream</code> object, how should you process that object and produce a <code>String</code>?</p>\n<hr />\n<p>Suppose I have an <code>InputStream</code> that contains text data, and I want to convert it to a <code>String</code>, so for example I can write that to a log file.</p>\n<p>What is the easiest way to take the <code>InputStream</code> and convert it to a <code>String</code>?</p>\n<pre><code>public String convertStreamToString(InputStream is) {\n// ???\n}\n</code></pre>\n"},{"tags":["java","blockchain","smartcontracts","tron","trx"],"owner":{"account_id":7187241,"reputation":343,"user_id":5488819,"accept_rate":100,"display_name":"Mosi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700016140,"creation_date":1700016140,"question_id":77484946,"body_markdown":"I&#39;m newby to Tron network\r\n\r\nrecently I tried to transfer USDT TRC20 using Shielded contract on Nile testnet\r\n\r\nI did every step mentioned on the document : [shielded-TRC20-contract.md](https://github.com/tronprotocol/documentation-en/blob/master/docs/mechanism-algorithm/shielded-TRC20-contract.md)\r\n\r\nI did steps until: 8. Call api: wallet/getnewshieldedaddress to generate all the related keys\r\n\r\nand after that, I have to mint my Token to the Shielded Address \r\n\r\nnow I pass these params to `wallet/createshieldedcontractparameters` endpoint :\r\n\r\n```{\r\n    &quot;ovk&quot;: &quot;72493d42a87227481b90c7174006d388b263b64a8b94ea55dbb78d59f5e45fa3&quot;,\r\n    // the ovk I get from `wallet/getexpandedspendingkey`\r\n    \r\n    &quot;from_amount&quot;: &quot;50000&quot;,\r\n    // I don&#39;t know what should I pass here\r\n    \r\n    &quot;shielded_receives&quot;: {\r\n        &quot;note&quot;: {\r\n            &quot;value&quot;: 500,\r\n            // I wanna to transfer 500 USDT\r\n            \r\n            \r\n            &quot;payment_address&quot;: &quot;ztron17lk8dsfjjmpr96j3dwlz0jkwe99ejmpulrldz498aeguma477r3u48w4prnthjs04utxk3a3a40&quot;,\r\n            //Here I pass the payment address that I get from `wallet/getnewshieldedaddress`\r\n            \r\n            &quot;rcm&quot;: &quot;68ef5a158f06734984d8e1500da86988caa6798953281adc1984808a67192c02&quot;\r\n            // I pass rcm that I get from &#39;wallet/getrcm`\r\n        }\r\n    },\r\n    &quot;shielded_TRC20_contract_address&quot;: &quot;TXLAQ63Xg1NAzckPwKHvzw7CSEmLMEqcdj&quot;,\r\n    // I pass the smart Contract address of USDT nil test net that I already have in my wallet\r\n    &quot;visible&quot; : &quot;True&quot;\r\n}\r\n\r\n```\r\n\r\n\r\nnow when I send my request I got this error :\r\n\r\n\r\n`\r\n{\r\n    &quot;Error&quot;: &quot;class java.lang.ArithmeticException : BigInteger: modulus not positive&quot;\r\n}\r\n`\r\n\r\nI don&#39;t know what I done wrong and What exactly should I do :/","title":"Transfer Tron Shielded Tokens","body":"<p>I'm newby to Tron network</p>\n<p>recently I tried to transfer USDT TRC20 using Shielded contract on Nile testnet</p>\n<p>I did every step mentioned on the document : <a href=\"https://github.com/tronprotocol/documentation-en/blob/master/docs/mechanism-algorithm/shielded-TRC20-contract.md\" rel=\"nofollow noreferrer\">shielded-TRC20-contract.md</a></p>\n<p>I did steps until: 8. Call api: wallet/getnewshieldedaddress to generate all the related keys</p>\n<p>and after that, I have to mint my Token to the Shielded Address</p>\n<p>now I pass these params to <code>wallet/createshieldedcontractparameters</code> endpoint :</p>\n<pre><code>    &quot;ovk&quot;: &quot;72493d42a87227481b90c7174006d388b263b64a8b94ea55dbb78d59f5e45fa3&quot;,\n    // the ovk I get from `wallet/getexpandedspendingkey`\n    \n    &quot;from_amount&quot;: &quot;50000&quot;,\n    // I don't know what should I pass here\n    \n    &quot;shielded_receives&quot;: {\n        &quot;note&quot;: {\n            &quot;value&quot;: 500,\n            // I wanna to transfer 500 USDT\n            \n            \n            &quot;payment_address&quot;: &quot;ztron17lk8dsfjjmpr96j3dwlz0jkwe99ejmpulrldz498aeguma477r3u48w4prnthjs04utxk3a3a40&quot;,\n            //Here I pass the payment address that I get from `wallet/getnewshieldedaddress`\n            \n            &quot;rcm&quot;: &quot;68ef5a158f06734984d8e1500da86988caa6798953281adc1984808a67192c02&quot;\n            // I pass rcm that I get from 'wallet/getrcm`\n        }\n    },\n    &quot;shielded_TRC20_contract_address&quot;: &quot;TXLAQ63Xg1NAzckPwKHvzw7CSEmLMEqcdj&quot;,\n    // I pass the smart Contract address of USDT nil test net that I already have in my wallet\n    &quot;visible&quot; : &quot;True&quot;\n}\n\n</code></pre>\n<p>now when I send my request I got this error :</p>\n<p><code>{ &quot;Error&quot;: &quot;class java.lang.ArithmeticException : BigInteger: modulus not positive&quot; }</code></p>\n<p>I don't know what I done wrong and What exactly should I do :/</p>\n"},{"tags":["java","string","character-encoding"],"comments":[{"owner":{"account_id":76721,"reputation":551,"user_id":219433,"accept_rate":83,"display_name":"Adilya Taimussova"},"score":0,"creation_date":1342411689,"post_id":11497902,"comment_id":15189586,"body_markdown":"Oh no, I have never noticed it, but I&#39;ve been voting up for answers though. Now I will know, thank you for pointing it out for me.","body":"Oh no, I have never noticed it, but I&#39;ve been voting up for answers though. Now I will know, thank you for pointing it out for me."}],"answers":[{"comments":[{"owner":{"account_id":76721,"reputation":551,"user_id":219433,"accept_rate":83,"display_name":"Adilya Taimussova"},"score":0,"creation_date":1342586267,"post_id":11498300,"comment_id":15249394,"body_markdown":"Thanks a lot for help! I&#39;m not sure if I can get the input stream cas the user data is taken from context using UserService. Other way is probably to fix values in LDAP.","body":"Thanks a lot for help! I&#39;m not sure if I can get the input stream cas the user data is taken from context using UserService. Other way is probably to fix values in LDAP."},{"owner":{"account_id":5853285,"reputation":341,"user_id":4611344,"accept_rate":86,"display_name":"A_P"},"score":0,"creation_date":1658252277,"post_id":11498300,"comment_id":129003938,"body_markdown":"the link is dead","body":"the link is dead"}],"tags":[],"owner":{"account_id":96393,"reputation":23995,"user_id":262022,"accept_rate":87,"display_name":"radai"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1432755499,"creation_date":1342414487,"answer_id":11498300,"question_id":11497902,"body_markdown":"Strings in java, AFAIK, do not retain their original encoding - they are always stored internally in some Unicode form.\r\nYou want to detect the charset of the original stream/bytes - this is why I think your String.toBytes() call is too late.\r\n\r\nIdeally if you could get the input stream you are reading from, you can run it through something like this: http://code.google.com/p/juniversalchardet/\r\n\r\nThere are plenty of other charset detectors out there as well","title":"How to check the charset of string in Java?","body":"<p>Strings in java, AFAIK, do not retain their original encoding - they are always stored internally in some Unicode form.\nYou want to detect the charset of the original stream/bytes - this is why I think your String.toBytes() call is too late.</p>\n\n<p>Ideally if you could get the input stream you are reading from, you can run it through something like this: <a href=\"http://code.google.com/p/juniversalchardet/\" rel=\"noreferrer\">http://code.google.com/p/juniversalchardet/</a></p>\n\n<p>There are plenty of other charset detectors out there as well</p>\n"},{"comments":[{"owner":{"account_id":1393552,"reputation":414,"user_id":1580636,"accept_rate":100,"display_name":"Rafael Sisto"},"score":2,"creation_date":1429017376,"post_id":11498909,"comment_id":47399579,"body_markdown":"This only applies to a spring application. Also, forcing the encoding may not work if basic authentication is being used.","body":"This only applies to a spring application. Also, forcing the encoding may not work if basic authentication is being used."}],"tags":[],"owner":{"account_id":28232,"reputation":2406,"user_id":75239,"accept_rate":52,"display_name":"sangupta"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1612258336,"creation_date":1342419009,"answer_id":11498909,"question_id":11497902,"body_markdown":"In your web-application, you may declare an encoding-filter that makes sure you receive data in the right encoding.\r\n\r\n```xml\r\n&lt;filter&gt;\r\n    &lt;description&gt;Explicitly set the encoding of the page to UTF-8&lt;/description&gt;\r\n    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\r\n    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\r\n    &lt;init-param&gt;\r\n        &lt;param-name&gt;encoding&lt;/param-name&gt;\r\n        &lt;param-value&gt;UTF-8&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n    &lt;init-param&gt;\r\n        &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\r\n        &lt;param-value&gt;true&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n&lt;/filter&gt;\r\n```\r\n\r\nA spring provided filter makes sure that the controllers/servlets receive parameters in UTF-8.","title":"How to check the charset of string in Java?","body":"<p>In your web-application, you may declare an encoding-filter that makes sure you receive data in the right encoding.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n    &lt;description&gt;Explicitly set the encoding of the page to UTF-8&lt;/description&gt;\n    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;encoding&lt;/param-name&gt;\n        &lt;param-value&gt;UTF-8&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;forceEncoding&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n</code></pre>\n<p>A spring provided filter makes sure that the controllers/servlets receive parameters in UTF-8.</p>\n"},{"tags":[],"owner":{"account_id":4577882,"reputation":4098,"user_id":3847182,"accept_rate":25,"display_name":"Evan Langlois"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1430324870,"creation_date":1430324870,"answer_id":29949464,"question_id":11497902,"body_markdown":"Your LDAP database is set up incorrectly.  The application putting data into it should convert to a known character set encoding, in your case, likely UTF_16.  Pick a standard.  All methods of detecting encoding are guesses.  \r\n\r\nThe application writing the value is the only one that knows definitively which encoding it is using and can properly convert to another encoding such as UTF_16.","title":"How to check the charset of string in Java?","body":"<p>Your LDAP database is set up incorrectly.  The application putting data into it should convert to a known character set encoding, in your case, likely UTF_16.  Pick a standard.  All methods of detecting encoding are guesses.  </p>\n\n<p>The application writing the value is the only one that knows definitively which encoding it is using and can properly convert to another encoding such as UTF_16.</p>\n"},{"comments":[{"owner":{"account_id":1116824,"reputation":506,"user_id":1105984,"accept_rate":50,"display_name":"Yuriy Chernyshov"},"score":9,"creation_date":1602685324,"post_id":47048962,"comment_id":113799265,"body_markdown":"This library adds 45 Mb to the final binary!","body":"This library adds 45 Mb to the final binary!"},{"owner":{"account_id":17485446,"reputation":71,"user_id":12678589,"display_name":"saquib-khan"},"score":0,"creation_date":1631728949,"post_id":47048962,"comment_id":122303603,"body_markdown":"Based on the javadoc for String.getBytes() here:https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#getBytes(), it seems that performing yourStr.getBytes() would return the byte equivalent of string encoded in Default Charset. Therefore, detector.detect() will always return the Default Charset as the Charset of yourStr. I don&#39;t see how this can ever work correctly.","body":"Based on the javadoc for String.getBytes() here:<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#getBytes()\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/ja&zwnj;&#8203;va/lang/&hellip;</a>, it seems that performing yourStr.getBytes() would return the byte equivalent of string encoded in Default Charset. Therefore, detector.detect() will always return the Default Charset as the Charset of yourStr. I don&#39;t see how this can ever work correctly."}],"tags":[],"owner":{"account_id":6171859,"reputation":1454,"user_id":4809938,"accept_rate":61,"display_name":"Zanecola"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1700015113,"creation_date":1509515327,"answer_id":47048962,"question_id":11497902,"body_markdown":"I recommend [Apache.tika CharsetDetector][1]\r\n\r\n\r\n    CharsetDetector detector = new CharsetDetector();\r\n    detector.setText(yourStr.getBytes());\r\n    detector.detect();  // &lt;- return the result, you can check by .getName() method\r\n\r\nFurther, you can convert any encoded string to your desired one, take utf-8 as example:\r\n   \r\n    \r\n    detector.getString(yourStr.getBytes(), &quot;utf-8&quot;);\r\n\r\n\r\n  [1]: https://tika.apache.org/0.8/api/org/apache/tika/parser/txt/CharsetDetector.html","title":"How to check the charset of string in Java?","body":"<p>I recommend <a href=\"https://tika.apache.org/0.8/api/org/apache/tika/parser/txt/CharsetDetector.html\" rel=\"nofollow noreferrer\">Apache.tika CharsetDetector</a></p>\n<pre><code>CharsetDetector detector = new CharsetDetector();\ndetector.setText(yourStr.getBytes());\ndetector.detect();  // &lt;- return the result, you can check by .getName() method\n</code></pre>\n<p>Further, you can convert any encoded string to your desired one, take utf-8 as example:</p>\n<pre><code>detector.getString(yourStr.getBytes(), &quot;utf-8&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":19767781,"reputation":421,"user_id":14475367,"display_name":"Thomas"},"score":0,"creation_date":1623751859,"post_id":47790292,"comment_id":120161777,"body_markdown":"Have you tried this with a large `String` and a large number of charsets in the `for` loop? Is it fast enough?","body":"Have you tried this with a large <code>String</code> and a large number of charsets in the <code>for</code> loop? Is it fast enough?"},{"owner":{"account_id":6384493,"reputation":127,"user_id":9093167,"display_name":"Llu&#237;s Turr&#243; Cutiller"},"score":0,"creation_date":1623842583,"post_id":47790292,"comment_id":120191818,"body_markdown":"Hi @Thomas, I haven&#39;t tried. My case was detecting UFT-8 from ISO-8859-1, mainly because of third part JavaScript libraries. Just thought of adding some more code, hoping it will be more useful.","body":"Hi @Thomas, I haven&#39;t tried. My case was detecting UFT-8 from ISO-8859-1, mainly because of third part JavaScript libraries. Just thought of adding some more code, hoping it will be more useful."}],"tags":[],"owner":{"account_id":6384493,"reputation":127,"user_id":9093167,"display_name":"Llu&#237;s Turr&#243; Cutiller"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1513162633,"creation_date":1513159649,"answer_id":47790292,"question_id":11497902,"body_markdown":"I had the same problem. Tika is too large and juniversalchardet do not detect ISO-8859-1. So, I did myself and now is working well in production:\r\n\r\n    public String convert(String value, String fromEncoding, String toEncoding) {\r\n      return new String(value.getBytes(fromEncoding), toEncoding);\r\n    }\r\n    \r\n    public String charset(String value, String charsets[]) {\r\n      String probe = StandardCharsets.UTF_8.name();\r\n      for(String c : charsets) {\r\n        Charset charset = Charset.forName(c);\r\n        if(charset != null) {\r\n          if(value.equals(convert(convert(value, charset.name(), probe), probe, charset.name()))) {\r\n            return c;\r\n          }\r\n        }\r\n      }\r\n      return StandardCharsets.UTF_8.name();\r\n    }\r\n\r\nFull description here: [Detect the charset in Java strings][1].\r\n\r\n  [1]: http://www.turro.org/publications?item=114&amp;page=0\r\n","title":"How to check the charset of string in Java?","body":"<p>I had the same problem. Tika is too large and juniversalchardet do not detect ISO-8859-1. So, I did myself and now is working well in production:</p>\n\n<pre><code>public String convert(String value, String fromEncoding, String toEncoding) {\n  return new String(value.getBytes(fromEncoding), toEncoding);\n}\n\npublic String charset(String value, String charsets[]) {\n  String probe = StandardCharsets.UTF_8.name();\n  for(String c : charsets) {\n    Charset charset = Charset.forName(c);\n    if(charset != null) {\n      if(value.equals(convert(convert(value, charset.name(), probe), probe, charset.name()))) {\n        return c;\n      }\n    }\n  }\n  return StandardCharsets.UTF_8.name();\n}\n</code></pre>\n\n<p>Full description here: <a href=\"http://www.turro.org/publications?item=114&amp;page=0\" rel=\"noreferrer\">Detect the charset in Java strings</a>.</p>\n"},{"tags":[],"owner":{"account_id":2378682,"reputation":832,"user_id":2081279,"display_name":"Thomas Sch&#252;tt"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1608379583,"creation_date":1608379583,"answer_id":65369645,"question_id":11497902,"body_markdown":"I highly appreciate Llu&#237;s Turr&#243; Cutiller&#39;s answer (+1), but want to add a variant based on that.\r\n\r\n    private String convert(String value, Charset fromEncoding, Charset toEncoding) throws UnsupportedEncodingException {\r\n\t\treturn new String(value.getBytes(fromEncoding), toEncoding);\r\n\t}\r\n\t\r\n\tprivate boolean probe(String value, Charset charset) throws UnsupportedEncodingException {\r\n\t\tCharset probe = StandardCharsets.UTF_8;\r\n\t\treturn value.equals(convert(convert(value, charset, probe), probe, charset));\r\n\t}\r\n\r\n\tpublic String convert(String value, Charset charsetWanted, List&lt;Charset&gt; charsetsOther) throws UnsupportedEncodingException {\r\n\t\tif (probe(value, charsetWanted)) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\tfor (Charset other: charsetsOther) {\r\n\t\t\tif (probe(value, other)) {\r\n\t\t\t\treturn convert(value, other, charsetWanted);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.err.println(&quot;WARNING: Could not convert string: &quot; + value);\r\n\t\treturn value;\r\n\t}\r\n","title":"How to check the charset of string in Java?","body":"<p>I highly appreciate LluÃ­s TurrÃ³ Cutiller's answer (+1), but want to add a variant based on that.</p>\n<pre><code>private String convert(String value, Charset fromEncoding, Charset toEncoding) throws UnsupportedEncodingException {\n    return new String(value.getBytes(fromEncoding), toEncoding);\n}\n\nprivate boolean probe(String value, Charset charset) throws UnsupportedEncodingException {\n    Charset probe = StandardCharsets.UTF_8;\n    return value.equals(convert(convert(value, charset, probe), probe, charset));\n}\n\npublic String convert(String value, Charset charsetWanted, List&lt;Charset&gt; charsetsOther) throws UnsupportedEncodingException {\n    if (probe(value, charsetWanted)) {\n        return value;\n    }\n    for (Charset other: charsetsOther) {\n        if (probe(value, other)) {\n            return convert(value, other, charsetWanted);\n        }\n    }\n    System.err.println(&quot;WARNING: Could not convert string: &quot; + value);\n    return value;\n}\n</code></pre>\n"}],"owner":{"account_id":76721,"reputation":551,"user_id":219433,"accept_rate":83,"display_name":"Adilya Taimussova"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130137,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":11498300,"answer_count":6,"score":38,"last_activity_date":1700015113,"creation_date":1342410834,"question_id":11497902,"body_markdown":"In my application I&#39;m getting the user info from LDAP and sometimes the full username comes in a wrong charset. For example: \r\n\r\n    &#208;&#162;&#208;&#181;&#209;&#209;61 &#208;&#162;&#208;&#181;&#209;&#209;&#208;&#190;&#208;&#178;&#208;&#184;&#209;61\r\n\r\nIt can also be in English or in Russian and displayed correctly. If the username changes it&#39;s updated in database. Even if I change the value in the db it wont solve the problem. \r\n\r\nI can fix it before saving by doing this \r\n    \r\n    new String(incorrect.getBytes(&quot;ISO-8859-1&quot;), &quot;UTF-8&quot;);\r\n\r\nHowever, if I will use it for the string including characters in Russian (for ex., &quot;Ð¢ÐµÑÑ61 Ð¢ÐµÑÑÐ¾Ð²Ð¸Ñ61&quot;) I get something like this &quot;????61 ????????61&quot;.\r\n\r\nCan you please suggest something that can determine the charset of string?\r\n","title":"How to check the charset of string in Java?","body":"<p>In my application I'm getting the user info from LDAP and sometimes the full username comes in a wrong charset. For example: </p>\n\n<pre><code>ÃÂ¢ÃÂµÃÃ61 ÃÂ¢ÃÂµÃÃÃÂ¾ÃÂ²ÃÂ¸Ã61\n</code></pre>\n\n<p>It can also be in English or in Russian and displayed correctly. If the username changes it's updated in database. Even if I change the value in the db it wont solve the problem. </p>\n\n<p>I can fix it before saving by doing this </p>\n\n<pre><code>new String(incorrect.getBytes(\"ISO-8859-1\"), \"UTF-8\");\n</code></pre>\n\n<p>However, if I will use it for the string including characters in Russian (for ex., \"Ð¢ÐµÑÑ61 Ð¢ÐµÑÑÐ¾Ð²Ð¸Ñ61\") I get something like this \"????61 ????????61\".</p>\n\n<p>Can you please suggest something that can determine the charset of string?</p>\n"},{"tags":["java","nullpointerexception","applet"],"comments":[{"owner":{"account_id":160823,"reputation":3550,"user_id":381161,"display_name":"Malcolm Smith"},"score":2,"creation_date":1378831311,"post_id":18723587,"comment_id":27592330,"body_markdown":"This is the thread dump, which is different from the stack trace you get when the exception occurs. You should post the stack trace.","body":"This is the thread dump, which is different from the stack trace you get when the exception occurs. You should post the stack trace."},{"owner":{"account_id":1532001,"reputation":82,"user_id":1428989,"accept_rate":60,"display_name":"Spidermaninja"},"score":0,"creation_date":1379431012,"post_id":18723587,"comment_id":27818055,"body_markdown":"I just uploaded the stack trace, you should be able to figure stuff out now.","body":"I just uploaded the stack trace, you should be able to figure stuff out now."},{"owner":{"account_id":1489010,"reputation":7802,"user_id":1396594,"accept_rate":67,"display_name":"exexzian"},"score":0,"creation_date":1379431240,"post_id":18723587,"comment_id":27818194,"body_markdown":"where is the stack trace ? and if your code is too long then just post the part that causes the NPE","body":"where is the stack trace ? and if your code is too long then just post the part that causes the NPE"},{"owner":{"account_id":1532001,"reputation":82,"user_id":1428989,"accept_rate":60,"display_name":"Spidermaninja"},"score":0,"creation_date":1379432730,"post_id":18723587,"comment_id":27819132,"body_markdown":"OKAY, I think I (finally) figured it out. The real problem here is that I&#39;m not a professional programmer, I&#39;m just a high-schooler and have no idea about the specific ins and outs of Java. So if someone could tell me what is wrong **specifically** and **in a way I can understand**, that would be nice.","body":"OKAY, I think I (finally) figured it out. The real problem here is that I&#39;m not a professional programmer, I&#39;m just a high-schooler and have no idea about the specific ins and outs of Java. So if someone could tell me what is wrong <b>specifically</b> and <b>in a way I can understand</b>, that would be nice."},{"owner":{"account_id":1178561,"reputation":5401,"user_id":1153988,"display_name":"C.Champagne"},"score":0,"creation_date":1379436896,"post_id":18723587,"comment_id":27821556,"body_markdown":"@MalcolmSmith isn&#39;t the stacktrace present in the dump (the NullPointerException at the bottom)?","body":"@MalcolmSmith isn&#39;t the stacktrace present in the dump (the NullPointerException at the bottom)?"},{"owner":{"account_id":160823,"reputation":3550,"user_id":381161,"display_name":"Malcolm Smith"},"score":0,"creation_date":1379437313,"post_id":18723587,"comment_id":27821804,"body_markdown":"@C.Champagne yep, it is now. When I added that comment a thread dump had been posted, we now have the console output including the stacktrack.","body":"@C.Champagne yep, it is now. When I added that comment a thread dump had been posted, we now have the console output including the stacktrack."},{"owner":{"account_id":1178561,"reputation":5401,"user_id":1153988,"display_name":"C.Champagne"},"score":0,"creation_date":1379437478,"post_id":18723587,"comment_id":27821888,"body_markdown":"@Spidermaninja you can use http://pastebin.com/ if you want to avoid emailing and have a look there to have an explaination about the stacktrace http://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors","body":"@Spidermaninja you can use <a href=\"http://pastebin.com/\" rel=\"nofollow noreferrer\">pastebin.com</a> if you want to avoid emailing and have a look there to have an explaination about the stacktrace <a href=\"http://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\" title=\"what is a stack trace and how can i use it to debug my application errors\">stackoverflow.com/questions/3988788/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1532001,"reputation":82,"user_id":1428989,"accept_rate":60,"display_name":"Spidermaninja"},"score":0,"creation_date":1379951104,"post_id":18855547,"comment_id":28007531,"body_markdown":"Is there any way to circumvent this? I know that getDocumentBase() is also returning null as well, but there should be _some_ way to access my files.","body":"Is there any way to circumvent this? I know that getDocumentBase() is also returning null as well, but there should be <i>some</i> way to access my files."},{"owner":{"account_id":1178561,"reputation":5401,"user_id":1153988,"display_name":"C.Champagne"},"score":0,"creation_date":1379952120,"post_id":18855547,"comment_id":28008147,"body_markdown":"@Spidermaninja This could be the object of an another question! The problem is that I don&#39;t know exactly what you need. Anyway, it seems that the URL you enter to access your webpage is something like file:////my_resource_path....which is a file path and can be considered as local. You should certainly use a real web server and access it with an HTTP address.","body":"@Spidermaninja This could be the object of an another question! The problem is that I don&#39;t know exactly what you need. Anyway, it seems that the URL you enter to access your webpage is something like file:////my_resource_path....which is a file path and can be considered as local. You should certainly use a real web server and access it with an HTTP address."}],"tags":[],"owner":{"account_id":1178561,"reputation":5401,"user_id":1153988,"display_name":"C.Champagne"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1379436765,"creation_date":1379436765,"answer_id":18855547,"question_id":18723587,"body_markdown":"I suppose that `GUI` is the the name of the class of your applet. (BTW, it should be nice if you had defined its [package][1] but it has not impact on this issue)\r\n\r\nFrom the stacktrace in the traces you transmitted, I can also suppose that the two lines of code you put in your question are line 69 and 70.\r\n\r\nI can thus suppose that `getCodeBase()` returns `null` so that the following line automatically leads to a `NullPointerException` (NPE). [Starting from Java 7 update 25, `getCodeBase()` returns null when the applet is running from the local file system.][2]\r\n\r\nYou should thus check if the value returned by getCodeBase() is null so your code could look like the following:\r\n\r\n    String u = &quot;Some default value&quot;;\r\n    URL url=getCodeBase();\r\n    if(url != null) {\r\n        u=url.toString();\r\n    }\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_package\r\n  [2]: http://www.oracle.com/technetwork/java/javase/7u25-relnotes-1955741.html","title":"Java applet works in IDE, but not in browser","body":"<p>I suppose that <code>GUI</code> is the the name of the class of your applet. (BTW, it should be nice if you had defined its <a href=\"http://en.wikipedia.org/wiki/Java_package\" rel=\"nofollow\">package</a> but it has not impact on this issue)</p>\n\n<p>From the stacktrace in the traces you transmitted, I can also suppose that the two lines of code you put in your question are line 69 and 70.</p>\n\n<p>I can thus suppose that <code>getCodeBase()</code> returns <code>null</code> so that the following line automatically leads to a <code>NullPointerException</code> (NPE). <a href=\"http://www.oracle.com/technetwork/java/javase/7u25-relnotes-1955741.html\" rel=\"nofollow\">Starting from Java 7 update 25, <code>getCodeBase()</code> returns null when the applet is running from the local file system.</a></p>\n\n<p>You should thus check if the value returned by getCodeBase() is null so your code could look like the following:</p>\n\n<pre><code>String u = \"Some default value\";\nURL url=getCodeBase();\nif(url != null) {\n    u=url.toString();\n}\n</code></pre>\n"}],"owner":{"account_id":1532001,"reputation":82,"user_id":1428989,"accept_rate":60,"display_name":"Spidermaninja"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":18855547,"answer_count":1,"score":0,"last_activity_date":1700014600,"creation_date":1378828400,"question_id":18723587,"body_markdown":"So I created a simple game that was working not too long ago. Recently, though, when I try to run it in any browser it just gives me a NullPointerException. The thread stack is as follows:\r\n\r\n    cache: Initialize resource manager: com.sun.deploy.cache.ResourceProviderImpl@18a270a\r\n    security: property package.access value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.\r\n    security: property package.access new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\r\n    security: property package.definition value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.\r\n    security: property package.definition new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\r\n    security: property package.access value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\r\n    security: property package.access new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\r\n    security: property package.definition value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\r\n    security: property package.definition new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\r\n    security: property package.access value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\r\n    security: property package.access new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss,com.sun.browser,com.sun.glass,com.sun.javafx,com.sun.media.jfxmedia,com.sun.media.jfxmediaimpl,com.sun.openpisces,com.sun.prism,com.sun.scenario,com.sun.t2k,com.sun.webpane,com.sun.pisces,com.sun.webkit\r\n    security: property package.definition value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\r\n    security: property package.definition new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss,com.sun.browser,com.sun.glass,com.sun.javafx,com.sun.media.jfxmedia,com.sun.media.jfxmediaimpl,com.sun.openpisces,com.sun.prism,com.sun.scenario,com.sun.t2k,com.sun.webpane,com.sun.pisces,com.sun.webkit\r\n    basic: Added progress listener: sun.plugin.util.ProgressMonitorAdapter@13b7c28\r\n    network: Cache entry not found [url: file:////files5.ad.lake.stark.k12.oh.us/shd/2015/15TROYERJONATHAN/Documents/Computer%20Science/Game/GUI.class, version: null]\r\n    network: Cache entry not found [url: file:////files5.ad.lake.stark.k12.oh.us/shd/2015/15TROYERJONATHAN/Documents/Computer%20Science/Game/, version: null]\r\n    security: Accessing keys and certificate in Mozilla user profile: null\r\n    network: Created version ID: 1.7.0.25\r\n    network: Created version ID: 1.7.0.25\r\n    security: SSV validation: running: 1.7.0_25, requested: null, range: null\r\n    network: Created version ID: 1.7.0.25\r\n    network: Created version ID: 1.7.0.25\r\n    security: continue with running version\r\n    network: Cache entry not found [url: file:////files5.ad.lake.stark.k12.oh.us/shd/2015/15TROYERJONATHAN/Documents/Computer%20Science/Game/ColorPanel.class, version: null]\r\n    basic: Applet loaded.\r\n    basic: Applet resized and added to parent container\r\n    basic: PERF: AppletExecutionRunnable - applet.init() BEGIN ; jvmLaunch dt 216867 us, pluginInit dt 217500 us, TotalTime: 434367 us\r\n    java.lang.NullPointerException\r\n    \tat GUI.init(GUI.java:70)\r\n    \tat com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)\r\n    \tat sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    basic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@13b7c28\r\n    security: Reset deny session certificate store\r\n\r\nHere&#39;s where the error is (at least as far as I can tell):\r\n\r\n    URL url=getCodeBase();\r\n    String u=url.toString();\r\n\r\nThe applet works fine when it is run in JCreator, but not in any browser or Adobe Dreamweaver. What does the thread stack mean? \r\n\r\n\r\n","title":"Java applet works in IDE, but not in browser","body":"<p>So I created a simple game that was working not too long ago. Recently, though, when I try to run it in any browser it just gives me a NullPointerException. The thread stack is as follows:</p>\n<pre><code>cache: Initialize resource manager: com.sun.deploy.cache.ResourceProviderImpl@18a270a\nsecurity: property package.access value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.\nsecurity: property package.access new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\nsecurity: property package.definition value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.\nsecurity: property package.definition new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\nsecurity: property package.access value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\nsecurity: property package.access new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\nsecurity: property package.definition value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp\nsecurity: property package.definition new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\nsecurity: property package.access value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\nsecurity: property package.access new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss,com.sun.browser,com.sun.glass,com.sun.javafx,com.sun.media.jfxmedia,com.sun.media.jfxmediaimpl,com.sun.openpisces,com.sun.prism,com.sun.scenario,com.sun.t2k,com.sun.webpane,com.sun.pisces,com.sun.webkit\nsecurity: property package.definition value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss\nsecurity: property package.definition new value sun.,com.sun.xml.internal.,com.sun.imageio.,com.sun.istack.internal.,com.sun.jmx.,com.sun.proxy.,com.sun.org.apache.bcel.internal.,com.sun.org.apache.regexp.internal.,com.sun.org.apache.xerces.internal.,com.sun.org.apache.xpath.internal.,com.sun.org.apache.xalan.internal.extensions.,com.sun.org.apache.xalan.internal.lib.,com.sun.org.apache.xalan.internal.res.,com.sun.org.apache.xalan.internal.templates.,com.sun.org.apache.xalan.internal.utils.,com.sun.org.apache.xalan.internal.xslt.,com.sun.org.apache.xalan.internal.xsltc.cmdline.,com.sun.org.apache.xalan.internal.xsltc.compiler.,com.sun.org.apache.xalan.internal.xsltc.trax.,com.sun.org.apache.xalan.internal.xsltc.util.,com.sun.org.apache.xml.internal.res.,com.sun.org.apache.xml.internal.serializer.utils.,com.sun.org.apache.xml.internal.utils.,com.sun.org.apache.xml.internal.security.,com.sun.org.glassfish.,org.jcp.xml.dsig.internal.,com.sun.java.accessibility.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss,com.sun.browser,com.sun.glass,com.sun.javafx,com.sun.media.jfxmedia,com.sun.media.jfxmediaimpl,com.sun.openpisces,com.sun.prism,com.sun.scenario,com.sun.t2k,com.sun.webpane,com.sun.pisces,com.sun.webkit\nbasic: Added progress listener: sun.plugin.util.ProgressMonitorAdapter@13b7c28\nnetwork: Cache entry not found [url: file:////files5.ad.lake.stark.k12.oh.us/shd/2015/15TROYERJONATHAN/Documents/Computer%20Science/Game/GUI.class, version: null]\nnetwork: Cache entry not found [url: file:////files5.ad.lake.stark.k12.oh.us/shd/2015/15TROYERJONATHAN/Documents/Computer%20Science/Game/, version: null]\nsecurity: Accessing keys and certificate in Mozilla user profile: null\nnetwork: Created version ID: 1.7.0.25\nnetwork: Created version ID: 1.7.0.25\nsecurity: SSV validation: running: 1.7.0_25, requested: null, range: null\nnetwork: Created version ID: 1.7.0.25\nnetwork: Created version ID: 1.7.0.25\nsecurity: continue with running version\nnetwork: Cache entry not found [url: file:////files5.ad.lake.stark.k12.oh.us/shd/2015/15TROYERJONATHAN/Documents/Computer%20Science/Game/ColorPanel.class, version: null]\nbasic: Applet loaded.\nbasic: Applet resized and added to parent container\nbasic: PERF: AppletExecutionRunnable - applet.init() BEGIN ; jvmLaunch dt 216867 us, pluginInit dt 217500 us, TotalTime: 434367 us\njava.lang.NullPointerException\n    at GUI.init(GUI.java:70)\n    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)\n    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nbasic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@13b7c28\nsecurity: Reset deny session certificate store\n</code></pre>\n<p>Here's where the error is (at least as far as I can tell):</p>\n<pre><code>URL url=getCodeBase();\nString u=url.toString();\n</code></pre>\n<p>The applet works fine when it is run in JCreator, but not in any browser or Adobe Dreamweaver. What does the thread stack mean?</p>\n"},{"tags":["java"],"owner":{"account_id":29904901,"reputation":1,"user_id":22917662,"display_name":"ChandraSekaranTMY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700014434,"creation_date":1700014160,"question_id":77484851,"body_markdown":"[Using Binary Format - to attach pdf file ](https://i.stack.imgur.com/ullM7.png)\r\n\r\n\r\nI am trying to attach a pdf file using BINARY format (Not the Multi-part format) using Put Request in Rest Assured with Java. Has anyone tried it? Pls share the ideas.\r\n\r\nPlease refer the image for better understanding\r\n\r\nI have tried this code and got error as  Resource not found\r\n\r\nI found a lot example for using form-data type but no one for binary type when upload file.\r\n\r\nCould someone help me?\r\n\r\n```\r\nFile pdfFile = new File(&quot;C://Users//Documents//OnlineEdCard.pdf&quot;);\r\n\r\ntry {\r\n    byte[] fileContent = FileUtils.readFileToByteArray(pdfFile);\r\n\r\n    RestAssured.given()\r\n            .header(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;) \r\n            .body(fileContent)\r\n            .when()\r\n            .put(&quot;&lt;&lt; put url pasted here&gt;&gt;&quot;)\r\n            .then()\r\n            .assertThat()\r\n            .statusCode(200); \r\n\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n\r\n\r\nPlease have a look on the code and correct me Where I am wrong\r\n\r\nNote : I have tried the same request in Postman and it is working Fine.\r\n\r\n","title":"Is there a way to attach a pdf file using BINARY format using put request in Rest Assured?","body":"<p><a href=\"https://i.stack.imgur.com/ullM7.png\" rel=\"nofollow noreferrer\">Using Binary Format - to attach pdf file </a></p>\n<p>I am trying to attach a pdf file using BINARY format (Not the Multi-part format) using Put Request in Rest Assured with Java. Has anyone tried it? Pls share the ideas.</p>\n<p>Please refer the image for better understanding</p>\n<p>I have tried this code and got error as  Resource not found</p>\n<p>I found a lot example for using form-data type but no one for binary type when upload file.</p>\n<p>Could someone help me?</p>\n<pre><code>File pdfFile = new File(&quot;C://Users//Documents//OnlineEdCard.pdf&quot;);\n\ntry {\n    byte[] fileContent = FileUtils.readFileToByteArray(pdfFile);\n\n    RestAssured.given()\n            .header(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;) \n            .body(fileContent)\n            .when()\n            .put(&quot;&lt;&lt; put url pasted here&gt;&gt;&quot;)\n            .then()\n            .assertThat()\n            .statusCode(200); \n\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>Please have a look on the code and correct me Where I am wrong</p>\n<p>Note : I have tried the same request in Postman and it is working Fine.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":13,"creation_date":1511445189,"post_id":47457105,"comment_id":81868672,"body_markdown":"class file version 53 = Java 9. Your Java 8 JVM cannot execute Java 9 code.","body":"class file version 53 = Java 9. Your Java 8 JVM cannot execute Java 9 code."}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1700005107,"creation_date":1511445233,"answer_id":47457162,"question_id":47457105,"body_markdown":"`53` stands for [Java 9][1], so it means that whatever class you have has been compiled with [javac][2]&amp;nbsp;9 and you try to run it with JRE&amp;nbsp;8. Either recompile that class with `javac-8` or use the JRE&amp;nbsp;9.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\r\n  [2]: https://en.wikipedia.org/wiki/Javac\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p><code>53</code> stands for <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\">Java 9</a>, so it means that whatever class you have has been compiled with <a href=\"https://en.wikipedia.org/wiki/Javac\" rel=\"nofollow noreferrer\">javac</a>Â 9 and you try to run it with JREÂ 8. Either recompile that class with <code>javac-8</code> or use the JREÂ 9.</p>\n"},{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":57,"creation_date":1511446265,"post_id":47457251,"comment_id":81869354,"body_markdown":"giving advice on the *logical* choice might not be a good solution at all... what if the project is run with jre-8 in the first place and someone accidentally compiled some module against 9?","body":"giving advice on the <i>logical</i> choice might not be a good solution at all... what if the project is run with jre-8 in the first place and someone accidentally compiled some module against 9?"},{"owner":{"account_id":7112771,"reputation":6092,"user_id":5440084,"display_name":"Haagenti"},"score":0,"creation_date":1511446559,"post_id":47457251,"comment_id":81869544,"body_markdown":"I believe the upgrade still won&#39;t cause any troubles since there won&#39;t be any backward compatibility issues. And it was logical since i believe the compiler has got upgraded to the latest version.","body":"I believe the upgrade still won&#39;t cause any troubles since there won&#39;t be any backward compatibility issues. And it was logical since i believe the compiler has got upgraded to the latest version."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":31,"creation_date":1511446708,"post_id":47457251,"comment_id":81869615,"body_markdown":"you&#39;re thinking in terms of a small, sandbox project; for enterprise projects - this is never a easy shift. For example some bugs were fixed in 8 for generics that you were relying on side-effects of them in 7; or `HashMap` order has changed from 7 to 8... etc. I have faced this. *Simply* saying - move to 9 is a good option, but never a simple and fast one","body":"you&#39;re thinking in terms of a small, sandbox project; for enterprise projects - this is never a easy shift. For example some bugs were fixed in 8 for generics that you were relying on side-effects of them in 7; or <code>HashMap</code> order has changed from 7 to 8... etc. I have faced this. <i>Simply</i> saying - move to 9 is a good option, but never a simple and fast one"},{"owner":{"account_id":7112771,"reputation":6092,"user_id":5440084,"display_name":"Haagenti"},"score":2,"creation_date":1511447251,"post_id":47457251,"comment_id":81869952,"body_markdown":"if you&#39;re stating in terms of enterprise project levels, yes you are correct and I strongly agree with that point. Upgrading/downgrading is never a most viable option in such scenarios.","body":"if you&#39;re stating in terms of enterprise project levels, yes you are correct and I strongly agree with that point. Upgrading/downgrading is never a most viable option in such scenarios."},{"owner":{"account_id":1545258,"reputation":1177,"user_id":1438934,"accept_rate":18,"display_name":"Anish Mittal"},"score":3,"creation_date":1667441094,"post_id":47457251,"comment_id":131169993,"body_markdown":"When I run java -version, I see JDK and JRE both as 1.8.0 .    Also in project -&gt; properties-&gt; Java compiler1.8 is there for compliance, Source compatibility, Generated .class files. Also, in Java build Path-&gt; Libraries: JRE System Library [Java SE-1.8] is there. Still I get error: &quot;Caused by: java.lang.UnsupportedClassVersionError: org/springframework/nativex/NativeListener has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0&quot; .    May I know, what is the issue here?","body":"When I run java -version, I see JDK and JRE both as 1.8.0 .    Also in project -&gt; properties-&gt; Java compiler1.8 is there for compliance, Source compatibility, Generated .class files. Also, in Java build Path-&gt; Libraries: JRE System Library [Java SE-1.8] is there. Still I get error: &quot;Caused by: java.lang.UnsupportedClassVersionError: org/springframework/nativex/NativeListener has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0&quot; .    May I know, what is the issue here?"},{"owner":{"account_id":429636,"reputation":1436,"user_id":812637,"accept_rate":48,"display_name":"Boris Gafurov"},"score":0,"creation_date":1670462946,"post_id":47457251,"comment_id":131883914,"body_markdown":"how?????????????","body":"how?????????????"},{"owner":{"account_id":1345799,"reputation":863,"user_id":1286583,"display_name":"Andrew Norman"},"score":0,"creation_date":1683589071,"post_id":47457251,"comment_id":134386826,"body_markdown":"@AnishMittal your JDK is 1.8 but there are jars in your classpath that were compiled with a newer JDK and your 1.8 JDK can&#39;t use those Jars","body":"@AnishMittal your JDK is 1.8 but there are jars in your classpath that were compiled with a newer JDK and your 1.8 JDK can&#39;t use those Jars"},{"owner":{"account_id":3785733,"reputation":155,"user_id":3143750,"accept_rate":75,"display_name":"bask0xff"},"score":0,"creation_date":1683743027,"post_id":47457251,"comment_id":134415115,"body_markdown":"and how to do it?","body":"and how to do it?"}],"tags":[],"owner":{"account_id":7112771,"reputation":6092,"user_id":5440084,"display_name":"Haagenti"},"comment_count":8,"down_vote_count":6,"up_vote_count":579,"is_accepted":true,"score":573,"last_activity_date":1699141211,"creation_date":1511445558,"answer_id":47457251,"question_id":47457105,"body_markdown":"This is just a version mismatch. You have compiled your code using Java version 9 and your current JRE is version 8. Try upgrading your JRE to 9.\r\n\r\n```lang-none\r\n49 = Java 5\r\n50 = Java 6\r\n51 = Java 7\r\n52 = Java 8\r\n53 = Java 9\r\n54 = Java 10\r\n55 = Java 11\r\n56 = Java 12\r\n57 = Java 13\r\n58 = Java 14\r\n59 = Java 15\r\n60 = Java 16\r\n61 = Java 17\r\n62 = Java 18\r\n63 = Java 19\r\n64 = Java 20\r\n65 = Java 21\r\n```\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>This is just a version mismatch. You have compiled your code using Java version 9 and your current JRE is version 8. Try upgrading your JRE to 9.</p>\n<pre class=\"lang-none prettyprint-override\"><code>49 = Java 5\n50 = Java 6\n51 = Java 7\n52 = Java 8\n53 = Java 9\n54 = Java 10\n55 = Java 11\n56 = Java 12\n57 = Java 13\n58 = Java 14\n59 = Java 15\n60 = Java 16\n61 = Java 17\n62 = Java 18\n63 = Java 19\n64 = Java 20\n65 = Java 21\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2301062,"reputation":1393,"user_id":2021355,"display_name":"Eric D"},"comment_count":0,"down_vote_count":0,"up_vote_count":74,"is_accepted":false,"score":74,"last_activity_date":1522663640,"creation_date":1522663640,"answer_id":49609255,"question_id":47457105,"body_markdown":"IDE: Eclipse Oxygen.3\r\n--------------------\r\n\r\nTo temporarily correct the problem do the following:\r\n\r\n`Project menu` &gt; `Properties` &gt; `Java Compiler` &gt; `Compiler compliance level` &gt; `1.8`\r\n\r\nA permanent fix likely involves installing JDK 9.\r\n\r\nFYI 1.8 is what Java 8 is called.\r\n\r\nSide bar\r\n--------\r\nI recently returned to Java after a foray into C# (a breath of fresh air) and installed Eclipse Oxygen onto a clean system that had never had Java installed on it before. This **default everything** with a brand new install of Eclipse Oxygen yet somehow or other Eclipse can&#39;t get its own parameters to match the jdk that&#39;s installed. This is the second project I created and the second time I ran into this headache. Time to go back to C#?\r\n\r\nRelated Question\r\n----------------\r\nhttps://stackoverflow.com/questions/47876051/has-been-compiled-by-a-more-recent-version-of-the-java-runtime-class-file-versi/","title":"Class has been compiled by a more recent version of the Java Environment","body":"<h2>IDE: Eclipse Oxygen.3</h2>\n\n<p>To temporarily correct the problem do the following:</p>\n\n<p><code>Project menu</code> > <code>Properties</code> > <code>Java Compiler</code> > <code>Compiler compliance level</code> > <code>1.8</code></p>\n\n<p>A permanent fix likely involves installing JDK 9.</p>\n\n<p>FYI 1.8 is what Java 8 is called.</p>\n\n<h2>Side bar</h2>\n\n<p>I recently returned to Java after a foray into C# (a breath of fresh air) and installed Eclipse Oxygen onto a clean system that had never had Java installed on it before. This <strong>default everything</strong> with a brand new install of Eclipse Oxygen yet somehow or other Eclipse can't get its own parameters to match the jdk that's installed. This is the second project I created and the second time I ran into this headache. Time to go back to C#?</p>\n\n<h2>Related Question</h2>\n\n<p><a href=\"https://stackoverflow.com/questions/47876051/has-been-compiled-by-a-more-recent-version-of-the-java-runtime-class-file-versi/\">has been compiled by a more recent version of the Java Runtime (class file version 53.0)</a></p>\n"},{"tags":[],"owner":{"account_id":13485444,"reputation":11,"user_id":9729389,"display_name":"ARVIND1994"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548391645,"creation_date":1548334522,"answer_id":54347178,"question_id":47457105,"body_markdown":"Go to Project section, click on properties &gt; then to Java compiler &gt; check compiler compliance level is 1.8 , or there should be no yellow warning at bottom ","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>Go to Project section, click on properties > then to Java compiler > check compiler compliance level is 1.8 , or there should be no yellow warning at bottom </p>\n"},{"tags":[],"owner":{"account_id":5627690,"reputation":314,"user_id":4455583,"display_name":"Carlos Casallas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699141705,"creation_date":1567702081,"answer_id":57809887,"question_id":47457105,"body_markdown":"Refreshing Gradle dependencies works for me: Right click over the project &amp;rarr; *Gradle* &amp;rarr; *Refresh Gradle Project*.\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>Refreshing Gradle dependencies works for me: Right click over the project â <em>Gradle</em> â <em>Refresh Gradle Project</em>.</p>\n"},{"comments":[{"owner":{"account_id":7407971,"reputation":2389,"user_id":5636313,"accept_rate":76,"display_name":"Farid"},"score":0,"creation_date":1663661180,"post_id":58201633,"comment_id":130286351,"body_markdown":"This is just a temporary solution. I honestly think this is could have been a comment not an answer","body":"This is just a temporary solution. I honestly think this is could have been a comment not an answer"},{"owner":{"account_id":170035,"reputation":6390,"user_id":396483,"accept_rate":68,"display_name":"john k"},"score":0,"creation_date":1677615565,"post_id":58201633,"comment_id":133372345,"body_markdown":"explanation, please","body":"explanation, please"},{"owner":{"account_id":65080,"reputation":5716,"user_id":191761,"accept_rate":71,"display_name":"Adam Burley"},"score":0,"creation_date":1680169869,"post_id":58201633,"comment_id":133853780,"body_markdown":"@johnk Basically, when compiling the code, he&#39;s compiling it for Java 8 not Java 9, meaning the code can execute on Java 8 JVM","body":"@johnk Basically, when compiling the code, he&#39;s compiling it for Java 8 not Java 9, meaning the code can execute on Java 8 JVM"}],"tags":[],"owner":{"account_id":3955837,"reputation":390,"user_id":3264344,"display_name":"Krishna Santosh Nidri"},"comment_count":3,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1699141746,"creation_date":1570019659,"answer_id":58201633,"question_id":47457105,"body_markdown":"You can try this way:\r\n\r\n```lang-none\r\njavac --release 8 yourClass.java\r\n```\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>You can try this way:</p>\n<pre class=\"lang-none prettyprint-override\"><code>javac --release 8 yourClass.java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12430938,"reputation":307,"user_id":9053474,"display_name":"Jacob Waters"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1592597826,"creation_date":1592597826,"answer_id":62477981,"question_id":47457105,"body_markdown":"I&#39;m writing this because I found the other answers hard to understand. \r\n\r\n\r\nEssentially your JRE is not updated and/or Eclipse is not configured to use the most recent JRE. \r\n\r\nOn Windows, go to Control Panel -&gt; Programs -&gt; Java -&gt; update and proceed to update java\r\n\r\nor if you don&#39;t have Java, go to Oracle&#39;s website and download the most recent JRE.\r\n\r\n\r\nOnce this is done, go into eclipse, and under the project view, right click on your project, select Java Build Path, double click on JRE System Library, then Select Workspace Default JRE 14.1.\r\n\r\nIf a recent version of Java doesn&#39;t show up here, it probably isn&#39;t installed. Check you JRE(NOT JDK) version and make sure it&#39;s recent. If it is, try restarting the computer then trying this again.","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>I'm writing this because I found the other answers hard to understand. </p>\n\n<p>Essentially your JRE is not updated and/or Eclipse is not configured to use the most recent JRE. </p>\n\n<p>On Windows, go to Control Panel -> Programs -> Java -> update and proceed to update java</p>\n\n<p>or if you don't have Java, go to Oracle's website and download the most recent JRE.</p>\n\n<p>Once this is done, go into eclipse, and under the project view, right click on your project, select Java Build Path, double click on JRE System Library, then Select Workspace Default JRE 14.1.</p>\n\n<p>If a recent version of Java doesn't show up here, it probably isn't installed. Check you JRE(NOT JDK) version and make sure it's recent. If it is, try restarting the computer then trying this again.</p>\n"},{"tags":[],"owner":{"account_id":19271214,"reputation":101,"user_id":14085084,"display_name":"akshay kenjale"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1611650213,"creation_date":1597128118,"answer_id":63352817,"question_id":47457105,"body_markdown":"For temporary solution just right click on **Project =&gt; Properties =&gt; Java compiler =&gt; over there please select compiler compliance level 1.8 =&gt; .class compatibility 1.8 =&gt; source compatibility 1.8**.\r\n\r\nThen your code will start to execute on version **1.8**.","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>For temporary solution just right click on <strong>Project =&gt; Properties =&gt; Java compiler =&gt; over there please select compiler compliance level 1.8 =&gt; .class compatibility 1.8 =&gt; source compatibility 1.8</strong>.</p>\n<p>Then your code will start to execute on version <strong>1.8</strong>.</p>\n"},{"tags":[],"owner":{"account_id":19612211,"reputation":319,"user_id":14354515,"display_name":"ILally"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1699142456,"creation_date":1605354441,"answer_id":64833548,"question_id":47457105,"body_markdown":"I had a similar issue from the console after building a JAR file in IntelliJ. Using the Java configuration to update to a newer version (menu *Windows* &amp;rarr; *Configure Java* &amp;rarr; *Update* &amp;rarr; *Update Now*) didn&#39;t work and was stuck at version 1.8 (Java 8).\r\n\r\nTo switch to a more recent version locally, I had to install the Java 15 JDK from *https://www.oracle.com/uk/java/technologies/javase-jdk15-downloads.html* and add that to my Java runtime environment settings.\r\n\r\n[![Java Runtime Environment Settings][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/r5Cb8.png\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>I had a similar issue from the console after building a JAR file in IntelliJ. Using the Java configuration to update to a newer version (menu <em>Windows</em> â <em>Configure Java</em> â <em>Update</em> â <em>Update Now</em>) didn't work and was stuck at version 1.8 (Java 8).</p>\n<p>To switch to a more recent version locally, I had to install the Java 15 JDK from <em><a href=\"https://www.oracle.com/uk/java/technologies/javase-jdk15-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/uk/java/technologies/javase-jdk15-downloads.html</a></em> and add that to my Java runtime environment settings.</p>\n<p><a href=\"https://i.stack.imgur.com/r5Cb8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r5Cb8.png\" alt=\"Java Runtime Environment Settings\" /></a></p>\n"},{"comments":[{"owner":{"account_id":1545258,"reputation":1177,"user_id":1438934,"accept_rate":18,"display_name":"Anish Mittal"},"score":1,"creation_date":1667441528,"post_id":65898065,"comment_id":131170055,"body_markdown":"Hi, this command is not working from any folder in the project. It says, &quot;javac file not found: *.java&quot;","body":"Hi, this command is not working from any folder in the project. It says, &quot;javac file not found: *.java&quot;"}],"tags":[],"owner":{"account_id":11078123,"reputation":3977,"user_id":8134164,"display_name":"INDRAJITH EKANAYAKE"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1699142308,"creation_date":1611650000,"answer_id":65898065,"question_id":47457105,"body_markdown":"Your JDK version: Java 8 \\\r\nYour JRE version: Java 9\r\n\r\nHere your JRE version is different than the JDK version that&#39;s the case. Here you can compile all the Java classes using JDK version 1.8. If you want to compile only one Java class, just change the `*.java` into `&lt;yourclassname&gt;.java`\r\n\r\n```lang-none\r\njavac -source 1.8 -target 1.8  *.java\r\n```\r\n\r\nOptions:\r\n\r\n`source`: The version that your source code requires to compile. \\\r\n`target`: The oldest JRE version you want to support.\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>Your JDK version: Java 8 <br />\nYour JRE version: Java 9</p>\n<p>Here your JRE version is different than the JDK version that's the case. Here you can compile all the Java classes using JDK version 1.8. If you want to compile only one Java class, just change the <code>*.java</code> into <code>&lt;yourclassname&gt;.java</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>javac -source 1.8 -target 1.8  *.java\n</code></pre>\n<p>Options:</p>\n<p><code>source</code>: The version that your source code requires to compile. <br />\n<code>target</code>: The oldest JRE version you want to support.</p>\n"},{"tags":[],"owner":{"account_id":17843718,"reputation":89,"user_id":12961065,"display_name":"Agustin Rodriguez"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1699142542,"creation_date":1621382195,"answer_id":67595309,"question_id":47457105,"body_markdown":"You should check your Project Facets.\r\n\r\n*Project Properties* &amp;rarr; *Project Facets*\r\n\r\nChange the Java version to the same version you are using. That works for me!\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>You should check your Project Facets.</p>\n<p><em>Project Properties</em> â <em>Project Facets</em></p>\n<p>Change the Java version to the same version you are using. That works for me!</p>\n"},{"tags":[],"owner":{"account_id":22847761,"reputation":21,"user_id":16993871,"display_name":"Teja Sai"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632488062,"creation_date":1632488062,"answer_id":69315388,"question_id":47457105,"body_markdown":"IDE : **Eclipse 2021-09**\r\n\r\nThis is caused because you have compiled the code with java version 9 and have java8 installed. You don&#39;t have to update to solve this issue.\r\n\r\n&gt; Right click on project &gt; properties &gt; Java Compiler &gt; *untick*-Enable\r\n&gt; project specific settings &gt; configure workspace settings &gt; *tick*-Use\r\n&gt; default compliance settings &gt; Apply and Close.\r\n\r\n----------\r\n\r\n\r\nNow your code should be executed properly.\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>IDE : <strong>Eclipse 2021-09</strong></p>\n<p>This is caused because you have compiled the code with java version 9 and have java8 installed. You don't have to update to solve this issue.</p>\n<blockquote>\n<p>Right click on project &gt; properties &gt; Java Compiler &gt; <em>untick</em>-Enable\nproject specific settings &gt; configure workspace settings &gt; <em>tick</em>-Use\ndefault compliance settings &gt; Apply and Close.</p>\n</blockquote>\n<hr />\n<p>Now your code should be executed properly.</p>\n"},{"tags":[],"owner":{"account_id":3169753,"reputation":764,"user_id":2679033,"display_name":"Rajitha Bhanuka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700009339,"creation_date":1638928244,"answer_id":70268997,"question_id":47457105,"body_markdown":"This is getting as an example:\r\n\r\nIf your computer is running on an older version of Java and the [Neo4j][1] is compiled on the latest version, please try to install the same version or upper to your computer.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Neo4j\r\n\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>This is getting as an example:</p>\n<p>If your computer is running on an older version of Java and the <a href=\"https://en.wikipedia.org/wiki/Neo4j\" rel=\"nofollow noreferrer\">Neo4j</a> is compiled on the latest version, please try to install the same version or upper to your computer.</p>\n"},{"comments":[{"owner":{"account_id":12510863,"reputation":111,"user_id":9106041,"display_name":"Krittam Kothari"},"score":0,"creation_date":1692007616,"post_id":71580720,"comment_id":135562846,"body_markdown":"is there a maven specific solution for this ?","body":"is there a maven specific solution for this ?"}],"tags":[],"owner":{"account_id":213874,"reputation":22213,"user_id":467509,"accept_rate":33,"display_name":"georgiecasey"},"comment_count":1,"down_vote_count":0,"up_vote_count":94,"is_accepted":false,"score":94,"last_activity_date":1647997889,"creation_date":1647997889,"answer_id":71580720,"question_id":47457105,"body_markdown":"You might see this error in IntelliJ as well and this comes up in Google.\r\n\r\nI think it&#39;s a Gradle error more than an IDE error.\r\n\r\nThe fix (stolen from [here][1]) is configure Java 11 as a Gradle JVM in IntelliJ:\r\n\r\n**File -&gt; Settings -&gt; Build, Execution &amp; Development -&gt; Build Tools -&gt; Gradle** and change Gradle JVM to 11\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThat screenshot stolen from the [Jetbrains issue][1] as well\r\n\r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEA-251407\r\n  [2]: https://i.stack.imgur.com/4DohU.png","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>You might see this error in IntelliJ as well and this comes up in Google.</p>\n<p>I think it's a Gradle error more than an IDE error.</p>\n<p>The fix (stolen from <a href=\"https://youtrack.jetbrains.com/issue/IDEA-251407\" rel=\"noreferrer\">here</a>) is configure Java 11 as a Gradle JVM in IntelliJ:</p>\n<p><strong>File -&gt; Settings -&gt; Build, Execution &amp; Development -&gt; Build Tools -&gt; Gradle</strong> and change Gradle JVM to 11</p>\n<p><a href=\"https://i.stack.imgur.com/4DohU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4DohU.png\" alt=\"enter image description here\" /></a></p>\n<p>That screenshot stolen from the <a href=\"https://youtrack.jetbrains.com/issue/IDEA-251407\" rel=\"noreferrer\">Jetbrains issue</a> as well</p>\n"},{"comments":[{"owner":{"account_id":9365119,"reputation":455,"user_id":6950291,"accept_rate":100,"display_name":"Ajay Khetan"},"score":0,"creation_date":1650653042,"post_id":71797008,"comment_id":127178668,"body_markdown":"It should be change to 9","body":"It should be change to 9"}],"tags":[],"owner":{"account_id":11460744,"reputation":31,"user_id":11470799,"display_name":"odnes"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700009473,"creation_date":1649420900,"answer_id":71797008,"question_id":47457105,"body_markdown":"I faced this error in IntelliJ. Apparently, choosing Java 1.8 as the project SDK doesn&#39;t affect the [javac][1] compiler that&#39;s used to build the project.\r\n\r\nTo change that, go to *Settings* &amp;rarr; *Build, Execution, Deployment* &amp;rarr; *Compiler* &amp;rarr; *Java Compiler*, and change Project bytecode version to 8.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Javac\r\n\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>I faced this error in IntelliJ. Apparently, choosing Java 1.8 as the project SDK doesn't affect the <a href=\"https://en.wikipedia.org/wiki/Javac\" rel=\"nofollow noreferrer\">javac</a> compiler that's used to build the project.</p>\n<p>To change that, go to <em>Settings</em> â <em>Build, Execution, Deployment</em> â <em>Compiler</em> â <em>Java Compiler</em>, and change Project bytecode version to 8.</p>\n"},{"tags":[],"owner":{"account_id":231305,"reputation":62840,"user_id":495455,"accept_rate":72,"display_name":"Jeremy Thompson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700010573,"creation_date":1654051727,"answer_id":72455961,"question_id":47457105,"body_markdown":"I&#39;m getting the same problem with [SonarQube][1]:\r\n\r\n&gt; has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n\r\nSonarQube with AzureDevOps error output:\r\n\r\n```lang-none\r\nINFO: SonarScanner 4.6.2.2472\r\nINFO: **Java 1.8.0_231** Oracle Corporation (32-bit)\r\nINFO: Windows Server 2016 10.0 x86\r\nINFO: User cache: C:\\Windows\\system32\\config\\systemprofile\\.sonar\\cache\r\nINFO: Scanner configuration file: C:\\agent_a\\_work\\_tasks\\SonarQubePrepare_15b84ca1-b62f-4a2a-a403-89b77a063157\\5.4.0\\classic-sonar-scanner-msbuild\\sonar-scanner-4.6.2.2472\\bin\\..\\conf\\sonar-scanner.properties\r\nINFO: Project root configuration file: C:\\agent_a\\_work\\189\\.sonarqube\\out\\sonar-project.properties\r\nINFO: Analyzing on SonarQube server 9.4.0\r\nINFO: Default locale: &quot;en_AU&quot;, source code encoding: &quot;windows-1252&quot; (analysis is platform dependent)\r\nINFO: ------------------------------------------------------------------------\r\nINFO: EXECUTION FAILURE\r\nINFO: ------------------------------------------------------------------------\r\nINFO: Total time: 0.405s\r\nINFO: Final Memory: 3M/15M\r\n##[error]ERROR: Error during SonarScanner execution\r\njava.lang.UnsupportedClassVersionError: org/sonar/batch/bootstrapper/EnvironmentInformation has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\nI had Java v11 installed on the SonarQube server, but the error is saying its the Build Agent that doesn&#39;t have Java v11.\r\n\r\nI decided to add the Java v12 bin path to the Environment Variable Path for it to be detected.\r\n\r\nImportant: this needs to be done on the build agent\r\n\r\n[![Enter image description here][2]][2]\r\n\r\n[For a Hosted Build Agent you can install JDK v11](https://www.codewrecks.com/post/azdo/pipeline/java-requirement-sonarcloud/) or use this PowerShell script step:\r\n\r\n```lang-none\r\n- task: PowerShell@2\r\n  displayName: &#39;Download and Install Java v11&#39;\r\n  inputs:\r\n    targetType: &#39;inline&#39;\r\n    script: |\r\n      [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\r\n      $Command = &quot;c:\\jdk-11.0.15_windows-x64_bin.exe&quot;\r\n      $Parms = &quot;/s&quot;\r\n      Write-Host [System.IO.File]::Exists($Command)\r\n      if ([System.IO.File]::Exists($Command)) {\r\n        Write-Host &#39;Downloading Java11.exe&#39;\r\n        Invoke-WebRequest https://yourOwnUrl.com/jdk-11.0.15_windows-x64_bin.exe -OutFile $Command\r\n      }\r\n      Write-Host [System.IO.File]::Exists($Command)\r\n      &amp; &quot;$Command&quot; $Prms\r\n      [System.Environment]::SetEnvironmentVariable(&quot;JAVA_HOME&quot;, &quot;C:\\Program Files\\Java\\jdk-11.0.15&quot;)\r\n      [System.Environment]::SetEnvironmentVariable(&quot;Path&quot;, [System.Environment]::GetEnvironmentVariable(&#39;Path&#39;, [System.EnvironmentVariableTarget]::Machine) + &quot;;$($env:JAVA_HOME)\\bin&quot;)\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/SonarQube\r\n  [2]: https://i.stack.imgur.com/Zuo1D.png\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>I'm getting the same problem with <a href=\"https://en.wikipedia.org/wiki/SonarQube\" rel=\"nofollow noreferrer\">SonarQube</a>:</p>\n<blockquote>\n<p>has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0</p>\n</blockquote>\n<p>SonarQube with AzureDevOps error output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO: SonarScanner 4.6.2.2472\nINFO: **Java 1.8.0_231** Oracle Corporation (32-bit)\nINFO: Windows Server 2016 10.0 x86\nINFO: User cache: C:\\Windows\\system32\\config\\systemprofile\\.sonar\\cache\nINFO: Scanner configuration file: C:\\agent_a\\_work\\_tasks\\SonarQubePrepare_15b84ca1-b62f-4a2a-a403-89b77a063157\\5.4.0\\classic-sonar-scanner-msbuild\\sonar-scanner-4.6.2.2472\\bin\\..\\conf\\sonar-scanner.properties\nINFO: Project root configuration file: C:\\agent_a\\_work\\189\\.sonarqube\\out\\sonar-project.properties\nINFO: Analyzing on SonarQube server 9.4.0\nINFO: Default locale: &quot;en_AU&quot;, source code encoding: &quot;windows-1252&quot; (analysis is platform dependent)\nINFO: ------------------------------------------------------------------------\nINFO: EXECUTION FAILURE\nINFO: ------------------------------------------------------------------------\nINFO: Total time: 0.405s\nINFO: Final Memory: 3M/15M\n##[error]ERROR: Error during SonarScanner execution\njava.lang.UnsupportedClassVersionError: org/sonar/batch/bootstrapper/EnvironmentInformation has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n</code></pre>\n<hr>\n<p>I had Java v11 installed on the SonarQube server, but the error is saying its the Build Agent that doesn't have Java v11.</p>\n<p>I decided to add the Java v12 bin path to the Environment Variable Path for it to be detected.</p>\n<p>Important: this needs to be done on the build agent</p>\n<p><a href=\"https://i.stack.imgur.com/Zuo1D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zuo1D.png\" alt=\"Enter image description here\" /></a></p>\n<p><a href=\"https://www.codewrecks.com/post/azdo/pipeline/java-requirement-sonarcloud/\" rel=\"nofollow noreferrer\">For a Hosted Build Agent you can install JDK v11</a> or use this PowerShell script step:</p>\n<pre class=\"lang-none prettyprint-override\"><code>- task: PowerShell@2\n  displayName: 'Download and Install Java v11'\n  inputs:\n    targetType: 'inline'\n    script: |\n      [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n      $Command = &quot;c:\\jdk-11.0.15_windows-x64_bin.exe&quot;\n      $Parms = &quot;/s&quot;\n      Write-Host [System.IO.File]::Exists($Command)\n      if ([System.IO.File]::Exists($Command)) {\n        Write-Host 'Downloading Java11.exe'\n        Invoke-WebRequest https://yourOwnUrl.com/jdk-11.0.15_windows-x64_bin.exe -OutFile $Command\n      }\n      Write-Host [System.IO.File]::Exists($Command)\n      &amp; &quot;$Command&quot; $Prms\n      [System.Environment]::SetEnvironmentVariable(&quot;JAVA_HOME&quot;, &quot;C:\\Program Files\\Java\\jdk-11.0.15&quot;)\n      [System.Environment]::SetEnvironmentVariable(&quot;Path&quot;, [System.Environment]::GetEnvironmentVariable('Path', [System.EnvironmentVariableTarget]::Machine) + &quot;;$($env:JAVA_HOME)\\bin&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1700011995,"creation_date":1654772412,"answer_id":72559136,"question_id":47457105,"body_markdown":"I&#39;ve reproduced the similar issue on Windows 10 in a format like:\r\n\r\n```lang-none\r\nError: LinkageError occurred while loading main class ...\r\njava.lang.UnsupportedClassVersionError: com/.../ServiceApplication\r\nhas been compiled by a more recent version of the Java Runtime (class file version 62.0),\r\nthis version of the Java Runtime only recognizes class file versions up to 61.0\r\n```\r\n\r\nAfter upgrading the project from Java 17 to Java 18.\r\n\r\nI had project settings regarding to Java 18:\r\n\r\n1) Command line:\r\n\r\n     &gt; ```lang-none\r\n     &gt; java version &quot;18.0.1.1&quot; 2022-04-22\r\n     &gt; Java(TM) SE Runtime Environment (build 18.0.1.1+2-6)\r\n     &gt; Java HotSpot(TM) 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\r\n     &gt; ```\r\n\r\n    [![Enter image description here][1]][1]\r\n\r\n2) *Project Structure* &amp;rarr; *Project Settings* &amp;rarr; *Project*:\r\n\r\n    [![Enter image description here][2]][2]\r\n\r\n3) *Project Structure* &amp;rarr; *Project Settings* &amp;rarr; *Modules*:\r\n\r\n    [![Enter image description here][3]][3]\r\n\r\n4) *Project Structure* &amp;rarr; *Platform Settings* &amp;rarr; *SDKs*:\r\n\r\n    [![Enter image description here][4]][4]\r\n\r\nAnd the reason of this issue was:\r\n\r\nI forgot to specify the correct version for *Run*/*Debug Configurations* -&gt; *Build and run* to *Java 18* instead of *Java 17*:\r\n\r\n[![Enter image description here][5]][5]\r\n\r\nAs it was compiled with a [newer Java version][6], but running on the older one.\r\n\r\n----------\r\n\r\nIf it&#39;s a Maven-related issue, you can [modify POM][7] by specifying the `-source` and `-target` of the *Java Compiler*.\r\n\r\n----------\r\n\r\nAdditional helpful links:\r\n\r\n1. [Setting the Java Version in Maven][8]\r\n2. [Consuming JAR Artifact of a specific Java version][9]\r\n\r\n  [1]: https://i.stack.imgur.com/M4F0H.jpg\r\n  [2]: https://i.stack.imgur.com/UHboa.jpg\r\n  [3]: https://i.stack.imgur.com/Rw8le.jpg\r\n  [4]: https://i.stack.imgur.com/wKKxr.jpg\r\n  [5]: https://i.stack.imgur.com/Ai3NR.jpg\r\n  [6]: https://javaalmanac.io/bytecode/versions/\r\n  [7]: https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\r\n  [8]: https://www.baeldung.com/maven-java-version\r\n  [9]: https://www.baeldung.com/maven-artifact-classifiers#3-consuming-jar-artifact-of-a-specific-java-version\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>I've reproduced the similar issue on Windows 10 in a format like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error: LinkageError occurred while loading main class ...\njava.lang.UnsupportedClassVersionError: com/.../ServiceApplication\nhas been compiled by a more recent version of the Java Runtime (class file version 62.0),\nthis version of the Java Runtime only recognizes class file versions up to 61.0\n</code></pre>\n<p>After upgrading the project from Java 17 to Java 18.</p>\n<p>I had project settings regarding to Java 18:</p>\n<ol>\n<li><p>Command line:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>java version &quot;18.0.1.1&quot; 2022-04-22\nJava(TM) SE Runtime Environment (build 18.0.1.1+2-6)\nJava HotSpot(TM) 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\n</code></pre>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/M4F0H.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M4F0H.jpg\" alt=\"Enter image description here\" /></a></p>\n</li>\n<li><p><em>Project Structure</em> â <em>Project Settings</em> â <em>Project</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/UHboa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UHboa.jpg\" alt=\"Enter image description here\" /></a></p>\n</li>\n<li><p><em>Project Structure</em> â <em>Project Settings</em> â <em>Modules</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/Rw8le.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rw8le.jpg\" alt=\"Enter image description here\" /></a></p>\n</li>\n<li><p><em>Project Structure</em> â <em>Platform Settings</em> â <em>SDKs</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/wKKxr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wKKxr.jpg\" alt=\"Enter image description here\" /></a></p>\n</li>\n</ol>\n<p>And the reason of this issue was:</p>\n<p>I forgot to specify the correct version for <em>Run</em>/<em>Debug Configurations</em> -&gt; <em>Build and run</em> to <em>Java 18</em> instead of <em>Java 17</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/Ai3NR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ai3NR.jpg\" alt=\"Enter image description here\" /></a></p>\n<p>As it was compiled with a <a href=\"https://javaalmanac.io/bytecode/versions/\" rel=\"nofollow noreferrer\">newer Java version</a>, but running on the older one.</p>\n<hr />\n<p>If it's a Maven-related issue, you can <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow noreferrer\">modify POM</a> by specifying the <code>-source</code> and <code>-target</code> of the <em>Java Compiler</em>.</p>\n<hr />\n<p>Additional helpful links:</p>\n<ol>\n<li><a href=\"https://www.baeldung.com/maven-java-version\" rel=\"nofollow noreferrer\">Setting the Java Version in Maven</a></li>\n<li><a href=\"https://www.baeldung.com/maven-artifact-classifiers#3-consuming-jar-artifact-of-a-specific-java-version\" rel=\"nofollow noreferrer\">Consuming JAR Artifact of a specific Java version</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4813001,"reputation":521,"user_id":3885930,"accept_rate":30,"display_name":"Ross Youngblood"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700012249,"creation_date":1655227386,"answer_id":72621076,"question_id":47457105,"body_markdown":"In my case, I&#39;m building with Visual&amp;nbsp;Studio&amp;nbsp;2019 some C++ code that is using [ANTLR4][1].\r\nANTLR4 is Java-based, and to use it I run Java commands as a custom build step.\r\n\r\nEarlier that day I had updated my JRE (Java Runtime Environment) on my new laptop to 1.8.   Not thinking, since it&#39;s been a year since I ran ANTLR4 stuff... I need the full JDK to *compile* with java.  So I had a 1.8 *runtime*, but the Visual&amp;nbsp;Studio&amp;nbsp;2019 build shell was finding the JDK&amp;nbsp;1.7 compiler.   Once I *installed* the 1.8 JDK, all was good.\r\n\r\nSo 80% of the time, JRE is fine for me... it&#39;s just when I need the full JDK, **doh** I need the full JDK.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ANTLR\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>In my case, I'm building with VisualÂ StudioÂ 2019 some C++ code that is using <a href=\"https://en.wikipedia.org/wiki/ANTLR\" rel=\"nofollow noreferrer\">ANTLR4</a>.\nANTLR4 is Java-based, and to use it I run Java commands as a custom build step.</p>\n<p>Earlier that day I had updated my JRE (Java Runtime Environment) on my new laptop to 1.8.   Not thinking, since it's been a year since I ran ANTLR4 stuff... I need the full JDK to <em>compile</em> with java.  So I had a 1.8 <em>runtime</em>, but the VisualÂ StudioÂ 2019 build shell was finding the JDKÂ 1.7 compiler.   Once I <em>installed</em> the 1.8 JDK, all was good.</p>\n<p>So 80% of the time, JRE is fine for me... it's just when I need the full JDK, <strong>doh</strong> I need the full JDK.</p>\n"},{"tags":[],"owner":{"account_id":14195182,"reputation":129,"user_id":10254686,"display_name":"Tousif Akram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655289752,"creation_date":1655289752,"answer_id":72629970,"question_id":47457105,"body_markdown":"&gt; In build.gradle(app) update as below: (Worked for me)\r\n\r\n \r\n     kotlinOptions {\r\n            jvmTarget = &#39;1.8&#39;\r\n        }","title":"Class has been compiled by a more recent version of the Java Environment","body":"<blockquote>\n<p>In build.gradle(app) update as below: (Worked for me)</p>\n</blockquote>\n<pre><code> kotlinOptions {\n        jvmTarget = '1.8'\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25654820,"reputation":1,"user_id":19421441,"display_name":"Kristina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700012423,"creation_date":1656268968,"answer_id":72764274,"question_id":47457105,"body_markdown":"For me, this problem was resolved by just installing an older version of [TestNG][1]. It looks like it compiles with my Java 8.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/TestNG\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>For me, this problem was resolved by just installing an older version of <a href=\"https://en.wikipedia.org/wiki/TestNG\" rel=\"nofollow noreferrer\">TestNG</a>. It looks like it compiles with my Java 8.</p>\n"},{"tags":[],"owner":{"account_id":2052982,"reputation":32,"user_id":11442980,"display_name":"SKO"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700012505,"creation_date":1657278376,"answer_id":72910491,"question_id":47457105,"body_markdown":"If you&#39;re using IntelliJ IDEA and having this error, try this.\r\n\r\n1. &lt;kbd&gt;Command&lt;/kbd&gt; + &lt;kbd&gt;,&lt;/kbd&gt; (Open Preferences)\r\n2. *Build, Execution, Deployment* &amp;rarr; *Build Tools* &amp;rarr; *Gradle*\r\n3. *Gradle JVM* &amp;rarr; Change it to a proper version\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>If you're using IntelliJ IDEA and having this error, try this.</p>\n<ol>\n<li><kbd>Command</kbd> + <kbd>,</kbd> (Open Preferences)</li>\n<li><em>Build, Execution, Deployment</em> â <em>Build Tools</em> â <em>Gradle</em></li>\n<li><em>Gradle JVM</em> â Change it to a proper version</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7412226,"reputation":11,"user_id":5639251,"display_name":"Jaikish Pai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700012573,"creation_date":1660140090,"answer_id":73307678,"question_id":47457105,"body_markdown":"Check the version of Java configured in IDE by navigating to *Settings* &amp;rarr; *Build, Execution, Deployment* &amp;rarr; *Build Tools* &amp;rarr; *Gradle*","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>Check the version of Java configured in IDE by navigating to <em>Settings</em> â <em>Build, Execution, Deployment</em> â <em>Build Tools</em> â <em>Gradle</em></p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700012787,"post_id":73418257,"comment_id":136602060,"body_markdown":"On Mac, presumably?","body":"On Mac, presumably?"}],"tags":[],"owner":{"account_id":1393034,"reputation":2479,"user_id":1323374,"accept_rate":50,"display_name":"Ninja"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700012754,"creation_date":1660918997,"answer_id":73418257,"question_id":47457105,"body_markdown":"[![Enter image description here][1]][1]\r\n\r\nIn my case, I use the IntelliJ IDEA and set JDK11 as my SDK and JDK17 in the Gradle setting.\r\n\r\nJust update my SDK as JDK17, it was solved.\r\n\r\nCheck the JDK in *Project Setting* (&lt;kbd&gt;CMD&lt;/kbd&gt; + &lt;kbd&gt;;&lt;/kbd&gt;) &amp;rarr; *SDK *\r\n\r\nwith\r\n\r\nthe Gradle JVM in *Preference* (&lt;kbd&gt;CMD&lt;/kbd&gt; + &lt;kbd&gt;,&lt;/kbd&gt;) &amp;rarr; *Build Tools* &amp;rarr; *Gradle JVM*\r\n\r\n![Gradle JVM[2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/mFCbf.jpg\r\n  [2]: https://i.stack.imgur.com/1SSqZ.png\r\n\r\n\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p><a href=\"https://i.stack.imgur.com/mFCbf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mFCbf.jpg\" alt=\"Enter image description here\" /></a></p>\n<p>In my case, I use the IntelliJ IDEA and set JDK11 as my SDK and JDK17 in the Gradle setting.</p>\n<p>Just update my SDK as JDK17, it was solved.</p>\n<p>Check the JDK in <em>Project Setting</em> (<kbd>CMD</kbd> + <kbd>;</kbd>) â *SDK *</p>\n<p>with</p>\n<p>the Gradle JVM in <em>Preference</em> (<kbd>CMD</kbd> + <kbd>,</kbd>) â <em>Build Tools</em> â <em>Gradle JVM</em></p>\n<p><img src=\"https://i.stack.imgur.com/1SSqZ.png\" alt=\"Gradle JVM2\" /></p>\n"},{"tags":[],"owner":{"account_id":20354189,"reputation":13,"user_id":14930106,"display_name":"Jatin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700012903,"creation_date":1661758021,"answer_id":73525416,"question_id":47457105,"body_markdown":"I faced the same issue when initialisomg my project from [Spring Initializr][1].\r\nWe need to match the version of **java.sourceCompatibility and jvmTarget** used for run and compile in the &quot;build.gradle.kt&quot; file.\r\n\r\n  [1]: https://start.spring.io/\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>I faced the same issue when initialisomg my project from <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">Spring Initializr</a>.\nWe need to match the version of <strong>java.sourceCompatibility and jvmTarget</strong> used for run and compile in the &quot;build.gradle.kt&quot; file.</p>\n"},{"comments":[{"owner":{"account_id":11187514,"reputation":1634,"user_id":8209253,"display_name":"Just The Highlights"},"score":1,"creation_date":1700407755,"post_id":73851763,"comment_id":136647980,"body_markdown":"Can you explain the screenshot?","body":"Can you explain the screenshot?"}],"tags":[],"owner":{"account_id":4779799,"reputation":2144,"user_id":3861913,"display_name":"Karthik Kompelli"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1700013001,"creation_date":1664182659,"answer_id":73851763,"question_id":47457105,"body_markdown":"For Android Studio, menu *File* &amp;rarr; *Project Structure* (&lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;Shift&lt;/kbd&gt; + &lt;kbd&gt;S&lt;/kbd&gt;).\r\n\r\n[![Reference Image][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/uG4Yb.png\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>For Android Studio, menu <em>File</em> â <em>Project Structure</em> (<kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd>).</p>\n<p><a href=\"https://i.stack.imgur.com/uG4Yb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uG4Yb.png\" alt=\"Reference Image\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5317826,"reputation":7135,"user_id":4242086,"accept_rate":100,"display_name":"Jaime Montoya"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1700013114,"creation_date":1664475755,"answer_id":73900075,"question_id":47457105,"body_markdown":"The solution for me was doing what Andrei Kuznetsov said on *[Failed to run Android project in the Idea 2020.3 EAP (OutputBuildAction has been compiled by a more recent version of the Java Runtime (class file version 55.0))][1]*, summarized in the following image:\r\n\r\n[![Enter image description here][2]][2]\r\n\r\n&gt; Root cause: IDEA sources are now compiled against Java 11. Known workaround is to configure Java 11 as a Gradle JVM. -- Andrei Kuznetsov\r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEA-251407/Failed-to-run-Android-project-in-the-Idea-20203-EAP-OutputBuildAction-has-been-compiled-by-a-more-recent-version-of-the-Java\r\n  [2]: https://i.stack.imgur.com/zBkuL.png\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>The solution for me was doing what Andrei Kuznetsov said on <em><a href=\"https://youtrack.jetbrains.com/issue/IDEA-251407/Failed-to-run-Android-project-in-the-Idea-20203-EAP-OutputBuildAction-has-been-compiled-by-a-more-recent-version-of-the-Java\" rel=\"nofollow noreferrer\">Failed to run Android project in the Idea 2020.3 EAP (OutputBuildAction has been compiled by a more recent version of the Java Runtime (class file version 55.0))</a></em>, summarized in the following image:</p>\n<p><a href=\"https://i.stack.imgur.com/zBkuL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zBkuL.png\" alt=\"Enter image description here\" /></a></p>\n<blockquote>\n<p>Root cause: IDEA sources are now compiled against Java 11. Known workaround is to configure Java 11 as a Gradle JVM. -- Andrei Kuznetsov</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":22256785,"reputation":101,"user_id":16488841,"display_name":"Happy Lee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666596024,"creation_date":1666595826,"answer_id":74177706,"question_id":47457105,"body_markdown":"Last week, I updated my Mac&#39;s Android Studio from 2021.2.1 to 2021.3.1. Then our project was built failed for the similar reason: \r\n\r\n&gt; Cause: com/android/tools/idea/gradle/run/OutputBuildAction has been\r\n&gt; compiled by a more recent version of the Java Runtime (class file\r\n&gt; version 55.0), this version of the Java Runtime only recognizes class\r\n&gt; file versions up to 53.0\r\n\r\nI found several discussion on the Jetbrains YouTrack Forum: [Failed to run Android project in the Idea 2020.3 EAP (OutputBuildAction has been compiled by a more recent version of the Java Runtime (class file version 55.0))][1]. The suggested workaround is to update the defined Gradle JDK version to JDK11, but many Android projects don&#39;t support Gradle JDK11, so does mine.\r\n\r\nAnother solution is to downgrade Android Studio from 2021.3.1 to 2021.2.1, and it worked for me. Hope it helps.\r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEA-251407/Failed-to-run-Android-project-in-the-Idea-20203-EAP-OutputBuildAction-has-been-compiled-by-a-more-recent-version-of-the-Java","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>Last week, I updated my Mac's Android Studio from 2021.2.1 to 2021.3.1. Then our project was built failed for the similar reason:</p>\n<blockquote>\n<p>Cause: com/android/tools/idea/gradle/run/OutputBuildAction has been\ncompiled by a more recent version of the Java Runtime (class file\nversion 55.0), this version of the Java Runtime only recognizes class\nfile versions up to 53.0</p>\n</blockquote>\n<p>I found several discussion on the Jetbrains YouTrack Forum: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-251407/Failed-to-run-Android-project-in-the-Idea-20203-EAP-OutputBuildAction-has-been-compiled-by-a-more-recent-version-of-the-Java\" rel=\"nofollow noreferrer\">Failed to run Android project in the Idea 2020.3 EAP (OutputBuildAction has been compiled by a more recent version of the Java Runtime (class file version 55.0))</a>. The suggested workaround is to update the defined Gradle JDK version to JDK11, but many Android projects don't support Gradle JDK11, so does mine.</p>\n<p>Another solution is to downgrade Android Studio from 2021.3.1 to 2021.2.1, and it worked for me. Hope it helps.</p>\n"},{"comments":[{"owner":{"account_id":2349225,"reputation":26836,"user_id":2058547,"accept_rate":60,"display_name":"Ojonugwa Jude Ochalifu"},"score":0,"creation_date":1679917506,"post_id":74269958,"comment_id":133801122,"body_markdown":"&quot;Change it to a proper version&quot; has to be one of the most useful information on the internet","body":"&quot;Change it to a proper version&quot; has to be one of the most useful information on the internet"}],"tags":[],"owner":{"account_id":11866576,"reputation":31,"user_id":8683973,"display_name":"Chandana"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667257835,"creation_date":1667257835,"answer_id":74269958,"question_id":47457105,"body_markdown":"If you&#39;re using IntelliJ IDEA and having this error, try this.\r\n\r\n1. Command + , (Open Preferences)\r\n2. Build, Execution, Deployment &gt; Build Tools &gt; Gradle\r\n3. Gradle JVM &gt; Change it to a proper version","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>If you're using IntelliJ IDEA and having this error, try this.</p>\n<ol>\n<li>Command + , (Open Preferences)</li>\n<li>Build, Execution, Deployment &gt; Build Tools &gt; Gradle</li>\n<li>Gradle JVM &gt; Change it to a proper version</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1700013365,"post_id":74420876,"comment_id":136602104,"body_markdown":"There isn&#39;t anyone by the name &quot;Nithin&quot;. What does it refer to?","body":"There isn&#39;t anyone by the name &quot;Nithin&quot;. What does it refer to?"},{"owner":{"account_id":20367323,"reputation":58,"user_id":15316123,"display_name":"The beginner guy"},"score":0,"creation_date":1700305774,"post_id":74420876,"comment_id":136639929,"body_markdown":"I wasn&#39;t drunk when I made this comment, which I did 1 year ago, and I think that guy changed his name, if you have too much problem with that go ahead and change it yourself, weirdo, have a life don&#39;t waste it editing mistakes of others.","body":"I wasn&#39;t drunk when I made this comment, which I did 1 year ago, and I think that guy changed his name, if you have too much problem with that go ahead and change it yourself, weirdo, have a life don&#39;t waste it editing mistakes of others."}],"tags":[],"owner":{"account_id":20367323,"reputation":58,"user_id":15316123,"display_name":"The beginner guy"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700013171,"creation_date":1668342103,"answer_id":74420876,"question_id":47457105,"body_markdown":"It looks like everyone is using Windows for development, but if you use Linux, lower your Java version. \r\n\r\nMaybe install JDK 8. The version table provided by @Nithin should give you an idea of which version you want to install.\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>It looks like everyone is using Windows for development, but if you use Linux, lower your Java version.</p>\n<p>Maybe install JDK 8. The version table provided by @Nithin should give you an idea of which version you want to install.</p>\n"},{"tags":[],"owner":{"account_id":27052676,"reputation":21,"user_id":20605815,"display_name":"Pranab Kumar Nath"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700013472,"creation_date":1669458031,"answer_id":74581322,"question_id":47457105,"body_markdown":"After configuring the version of the compiler to 1.8 (your required version), try the older version of Spring Boot. Currently, it is 3.0.0 by default, but you can try 2.7.6 instead.\r\n\r\n[![Enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/lWySz.png\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>After configuring the version of the compiler to 1.8 (your required version), try the older version of Spring Boot. Currently, it is 3.0.0 by default, but you can try 2.7.6 instead.</p>\n<p><a href=\"https://i.stack.imgur.com/lWySz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lWySz.png\" alt=\"Enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8673142,"reputation":745,"user_id":6494149,"display_name":"Deadpool"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1700013550,"creation_date":1670876452,"answer_id":74776871,"question_id":47457105,"body_markdown":"For [PhpStorm][1] 2022.3, try:\r\n\r\n```lang-none\r\nsudo apt-get purge openjdk-\\*\r\nsudo apt install openjdk-19-jdk\r\nexport JAVA_HOME=/usr/lib/jvm/java-19-openjdk-amd64\r\nexport PATH=$PATH:$JAVA_HOME/bin\r\n/opt/PhpStorm-223.7571.212/bin/phpstorm.sh\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/PhpStorm\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>For <a href=\"https://en.wikipedia.org/wiki/PhpStorm\" rel=\"nofollow noreferrer\">PhpStorm</a> 2022.3, try:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sudo apt-get purge openjdk-\\*\nsudo apt install openjdk-19-jdk\nexport JAVA_HOME=/usr/lib/jvm/java-19-openjdk-amd64\nexport PATH=$PATH:$JAVA_HOME/bin\n/opt/PhpStorm-223.7571.212/bin/phpstorm.sh\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24917086,"reputation":9,"user_id":18785872,"display_name":"aditi kaushik"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1675609482,"creation_date":1675609482,"answer_id":75353226,"question_id":47457105,"body_markdown":"My error was similar: &quot; UnsupportedClassVersionError: Class has been compiled by a more recent version of the Java Runtime&quot; \r\n\r\nSolution: I tried to update my JAVA version from 15 to 17 and it worked in my case rather than updating all JRE in the compiler or doing other things.\r\n\r\nSimply download the updated version of JAVA and change the path in SYSTEM Variable to 17 \r\n\r\nGo back to the project and apply the below steps :\r\n1. Select your project ---&gt; click on properties (at last ) ----&gt; Select JAVA Build PAth ---&gt; change JRE from 15 to 17 ----&gt; Apply ---&gt; apply and close \r\n\r\n\r\n \r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>My error was similar: &quot; UnsupportedClassVersionError: Class has been compiled by a more recent version of the Java Runtime&quot;</p>\n<p>Solution: I tried to update my JAVA version from 15 to 17 and it worked in my case rather than updating all JRE in the compiler or doing other things.</p>\n<p>Simply download the updated version of JAVA and change the path in SYSTEM Variable to 17</p>\n<p>Go back to the project and apply the below steps :</p>\n<ol>\n<li>Select your project ---&gt; click on properties (at last ) ----&gt; Select JAVA Build PAth ---&gt; change JRE from 15 to 17 ----&gt; Apply ---&gt; apply and close</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":27747093,"reputation":1,"user_id":21182348,"display_name":"SDET"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700013660,"creation_date":1675966525,"answer_id":75402810,"question_id":47457105,"body_markdown":"If you are using [TestNG][1], by downgrading version to 6.14.3, it will work.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/TestNG\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>If you are using <a href=\"https://en.wikipedia.org/wiki/TestNG\" rel=\"nofollow noreferrer\">TestNG</a>, by downgrading version to 6.14.3, it will work.</p>\n"},{"tags":[],"owner":{"account_id":28787611,"reputation":1,"user_id":22047749,"display_name":"Shivam Tyagi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700013733,"creation_date":1687248596,"answer_id":76512620,"question_id":47457105,"body_markdown":"I changed my Spring Boot version to 2.5.2. It resolved the issue for me. Instead of trying to change your Java version, try changing your Spring Boot version.\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>I changed my Spring Boot version to 2.5.2. It resolved the issue for me. Instead of trying to change your Java version, try changing your Spring Boot version.</p>\n"},{"tags":[],"owner":{"account_id":914407,"reputation":1398,"user_id":947539,"accept_rate":75,"display_name":"Luc Laverdure"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700013921,"creation_date":1695592549,"answer_id":77169085,"question_id":47457105,"body_markdown":"In [Arch Linux][1] / [Manjaro][2], to see installed Java environments:\r\n\r\n```lang-none\r\narchlinux-java status\r\n```\r\n\r\nTo use a different environment:\r\n\r\n```lang-none\r\nsudo archlinux-java set (an environment listed in a previous answer)\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Arch_Linux\r\n  [2]: https://en.wikipedia.org/wiki/Manjaro\r\n\r\n\r\n\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>In <a href=\"https://en.wikipedia.org/wiki/Arch_Linux\" rel=\"nofollow noreferrer\">Arch Linux</a> / <a href=\"https://en.wikipedia.org/wiki/Manjaro\" rel=\"nofollow noreferrer\">Manjaro</a>, to see installed Java environments:</p>\n<pre class=\"lang-none prettyprint-override\"><code>archlinux-java status\n</code></pre>\n<p>To use a different environment:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sudo archlinux-java set (an environment listed in a previous answer)\n</code></pre>\n"}],"owner":{"account_id":6138937,"reputation":3641,"user_id":5218071,"display_name":"user5218071"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1011573,"favorite_count":0,"down_vote_count":1,"up_vote_count":364,"accepted_answer_id":47457251,"answer_count":35,"score":363,"last_activity_date":1700013921,"creation_date":1511445027,"question_id":47457105,"body_markdown":"While running a script, I am getting the following error message in the Eclipse console:\r\n\r\n&gt; Class has been compiled by a more recent version of the Java Environment (class file version 53.0), this version of the Java Runtime only recognizes class file versions up to 52.0.\r\n\r\n----\r\n\r\n* Java Version: 8\r\n* IDE: [Eclipse v4.7][1] (Oxygen)\r\n* Firefox version: 46\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases\r\n\r\n\r\n","title":"Class has been compiled by a more recent version of the Java Environment","body":"<p>While running a script, I am getting the following error message in the Eclipse console:</p>\n<blockquote>\n<p>Class has been compiled by a more recent version of the Java Environment (class file version 53.0), this version of the Java Runtime only recognizes class file versions up to 52.0.</p>\n</blockquote>\n<hr />\n<ul>\n<li>Java Version: 8</li>\n<li>IDE: <a href=\"https://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases\" rel=\"noreferrer\">Eclipse v4.7</a> (Oxygen)</li>\n<li>Firefox version: 46</li>\n</ul>\n"},{"tags":["java","email","tomcat","jakarta-mail"],"comments":[{"owner":{"account_id":1482116,"reputation":27381,"user_id":1391249,"accept_rate":84,"display_name":"Tiny"},"score":0,"creation_date":1457590812,"post_id":35905163,"comment_id":59477446,"body_markdown":"The standard `javax.mail` API has nothing like `HtmlEmail`. It belongs to Apache Commons.","body":"The standard <code>javax.mail</code> API has nothing like <code>HtmlEmail</code>. It belongs to Apache Commons."}],"answers":[{"comments":[{"owner":{"account_id":8010205,"reputation":13,"user_id":6042205,"display_name":"snears"},"score":0,"creation_date":1457640571,"post_id":35905285,"comment_id":59510898,"body_markdown":"Thanks, I changed the code but now i get the excpetion _org.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.gmail.com:25_","body":"Thanks, I changed the code but now i get the excpetion <i>org.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.gmail.com:25</i>"},{"owner":{"account_id":19734523,"reputation":55,"user_id":14449315,"display_name":"codesenpai_"},"score":0,"creation_date":1687373787,"post_id":35905285,"comment_id":134929344,"body_markdown":"i have the same","body":"i have the same"}],"tags":[],"owner":{"account_id":526476,"reputation":27861,"user_id":1790644,"accept_rate":80,"display_name":"Matt Clark"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457569106,"creation_date":1457569106,"answer_id":35905285,"question_id":35905163,"body_markdown":"This is going to be because the SMTP relay requires authentication, you must login with a gmail user / pass before you can use the relay.\r\n\r\nI have never used commons email before, but after some googling, [i found this][1] for sending an email through gmail.\r\n\r\n    HtmlEmail email = new HtmlEmail();\r\n\r\n    String authuser = &quot;user&quot;;\r\n    String authpwd = &quot;pass&quot;;\r\n\r\n    email.setAuthenticator(new DefaultAuthenticator(authuser, authpwd));\r\n\r\n    email.setHostName(&quot;smtp.gmail.com&quot;);\r\n\r\n    // properties to configure encryption\r\n    email.getMailSession().getProperties().put(&quot;mail.smtps.auth&quot;, &quot;true&quot;);\r\n    email.getMailSession().getProperties().put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n    email.getMailSession().getProperties().put(&quot;mail.smtps.port&quot;, &quot;587&quot;);\r\n    email.getMailSession().getProperties().put(&quot;mail.smtps.socketFactory.port&quot;, &quot;587&quot;);\r\n    email.getMailSession().getProperties().put(&quot;mail.smtps.socketFactory.class&quot;,   &quot;javax.net.ssl.SSLSocketFactory&quot;);\r\n    email.getMailSession().getProperties().put(&quot;mail.smtps.socketFactory.fallback&quot;, &quot;false&quot;);\r\n    email.getMailSession().getProperties().put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n\r\n\r\n  [1]: https://gist.github.com/ipingu/7681247#file-apache-commons-email-java","title":"org.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.gmail.com:465","body":"<p>This is going to be because the SMTP relay requires authentication, you must login with a gmail user / pass before you can use the relay.</p>\n\n<p>I have never used commons email before, but after some googling, <a href=\"https://gist.github.com/ipingu/7681247#file-apache-commons-email-java\" rel=\"nofollow\">i found this</a> for sending an email through gmail.</p>\n\n<pre><code>HtmlEmail email = new HtmlEmail();\n\nString authuser = \"user\";\nString authpwd = \"pass\";\n\nemail.setAuthenticator(new DefaultAuthenticator(authuser, authpwd));\n\nemail.setHostName(\"smtp.gmail.com\");\n\n// properties to configure encryption\nemail.getMailSession().getProperties().put(\"mail.smtps.auth\", \"true\");\nemail.getMailSession().getProperties().put(\"mail.debug\", \"true\");\nemail.getMailSession().getProperties().put(\"mail.smtps.port\", \"587\");\nemail.getMailSession().getProperties().put(\"mail.smtps.socketFactory.port\", \"587\");\nemail.getMailSession().getProperties().put(\"mail.smtps.socketFactory.class\",   \"javax.net.ssl.SSLSocketFactory\");\nemail.getMailSession().getProperties().put(\"mail.smtps.socketFactory.fallback\", \"false\");\nemail.getMailSession().getProperties().put(\"mail.smtp.starttls.enable\", \"true\");\n</code></pre>\n"}],"owner":{"account_id":8010205,"reputation":13,"user_id":6042205,"display_name":"snears"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8818,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700013625,"creation_date":1457568443,"question_id":35905163,"body_markdown":"I have a Maven project, use JSF 2.2, Tomcat 7 and use `Apache Commons` for sending e-mail.\r\n\r\nHere is my code\r\n\r\n    try {\r\n        // Create the email message\r\n        HtmlEmail email = new HtmlEmail();\r\n        email.setSmtpPort(465); //email.setSslSmtpPort(&quot;465&quot;);\r\n        email.setSSLOnConnect(true);\r\n        email.setHostName(&quot;smtp.gmail.com&quot;);\r\n        email.addTo(&quot;test@gmail.com&quot;, &quot;test&quot;);\r\n        email.setFrom(getEmail(), getName());\r\n        email.setSubject(getSubject());\r\n        email.setHtmlMsg(&quot;&lt;html&gt;Test&lt;/html&gt;&quot;); // set the html message\r\n        email.setTextMsg(getText());// set the alternative message\r\n        email.send();// send the email\r\n    } catch (EmailException e) {\r\n        logger.error(&quot;Exception sending email: &quot;, e);\r\n    } catch (Exception ex) {\r\n        logger.error(&quot;Exception sending email: &quot;, ex);\r\n    }\r\n\r\nWhen I tried to run the code in Tomcat 7, I got the following exception:\r\n\r\n&gt; org.apache.commons.mail.EmailException: Sending the email to the\r\n&gt; following server failed : smtp.gmail.com:465","title":"org.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.gmail.com:465","body":"<p>I have a Maven project, use JSF 2.2, Tomcat 7 and use <code>Apache Commons</code> for sending e-mail.</p>\n\n<p>Here is my code</p>\n\n<pre><code>try {\n    // Create the email message\n    HtmlEmail email = new HtmlEmail();\n    email.setSmtpPort(465); //email.setSslSmtpPort(\"465\");\n    email.setSSLOnConnect(true);\n    email.setHostName(\"smtp.gmail.com\");\n    email.addTo(\"test@gmail.com\", \"test\");\n    email.setFrom(getEmail(), getName());\n    email.setSubject(getSubject());\n    email.setHtmlMsg(\"&lt;html&gt;Test&lt;/html&gt;\"); // set the html message\n    email.setTextMsg(getText());// set the alternative message\n    email.send();// send the email\n} catch (EmailException e) {\n    logger.error(\"Exception sending email: \", e);\n} catch (Exception ex) {\n    logger.error(\"Exception sending email: \", ex);\n}\n</code></pre>\n\n<p>When I tried to run the code in Tomcat 7, I got the following exception:</p>\n\n<blockquote>\n  <p>org.apache.commons.mail.EmailException: Sending the email to the\n  following server failed : smtp.gmail.com:465</p>\n</blockquote>\n"},{"tags":["java","sql-server","maven","netbeans","jdbc"],"comments":[{"owner":{"account_id":1344426,"reputation":1432,"user_id":1285431,"accept_rate":41,"display_name":"mzzzzb"},"score":0,"creation_date":1353556237,"post_id":13495203,"comment_id":18485377,"body_markdown":"how do you intend to use your application, is it a webapp or a standalone deployment ?","body":"how do you intend to use your application, is it a webapp or a standalone deployment ?"},{"owner":{"account_id":1344426,"reputation":1432,"user_id":1285431,"accept_rate":41,"display_name":"mzzzzb"},"score":0,"creation_date":1353556322,"post_id":13495203,"comment_id":18485399,"body_markdown":"obviously you cannot add the dll in your jar, if it were possible, it would come in the jdbc jar itself in the first place, saving you all the trouble. \nwe may have a solution which depends on how you intend to use your app","body":"obviously you cannot add the dll in your jar, if it were possible, it would come in the jdbc jar itself in the first place, saving you all the trouble.  we may have a solution which depends on how you intend to use your app"},{"owner":{"account_id":2066793,"reputation":203,"user_id":1842168,"accept_rate":25,"display_name":"Kadymov Mukhammed"},"score":0,"creation_date":1353574743,"post_id":13495203,"comment_id":18490481,"body_markdown":"not web. but a i can&#39;t say that it will be standalone, becouse i don&#39;t understand what it mean )","body":"not web. but a i can&#39;t say that it will be standalone, becouse i don&#39;t understand what it mean )"},{"owner":{"account_id":1344426,"reputation":1432,"user_id":1285431,"accept_rate":41,"display_name":"mzzzzb"},"score":0,"creation_date":1353576459,"post_id":13495203,"comment_id":18491253,"body_markdown":"i mean to say how you do you start your program. like `java MyClass` or `mvn exec:java ... ` or in some webcontainer. and how do you distribute your project, distribute as a jar ?","body":"i mean to say how you do you start your program. like <code>java MyClass</code> or <code>mvn exec:java ... </code> or in some webcontainer. and how do you distribute your project, distribute as a jar ?"},{"owner":{"account_id":2066793,"reputation":203,"user_id":1842168,"accept_rate":25,"display_name":"Kadymov Mukhammed"},"score":0,"creation_date":1353579383,"post_id":13495203,"comment_id":18492715,"body_markdown":"now i start java myclass in netbeans ide. but in future i will have a lot of modules","body":"now i start java myclass in netbeans ide. but in future i will have a lot of modules"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1692236703,"post_id":13495203,"comment_id":135597369,"body_markdown":"The error message these others point refers to java.library.path , If it is a DLL it probably should be updated to the system OS environment&quot;path&quot;! Or run with local system command &quot;path&quot; append of the DLL along with the java command in the start .bat.   in a server such as e.g. Tomcat you would assign that to path in something like it&#39;s setenv.sh or setenv.bat if there is not a special element for it in the server.xml.     https://www.chilkatsoft.com/java-loadlibrary-windows.asp","body":"The error message these others point refers to java.library.path , If it is a DLL it probably should be updated to the system OS environment&quot;path&quot;! Or run with local system command &quot;path&quot; append of the DLL along with the java command in the start .bat.   in a server such as e.g. Tomcat you would assign that to path in something like it&#39;s setenv.sh or setenv.bat if there is not a special element for it in the server.xml.     <a href=\"https://www.chilkatsoft.com/java-loadlibrary-windows.asp\" rel=\"nofollow noreferrer\">chilkatsoft.com/java-loadlibrary-windows.asp</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1692237039,"post_id":13495203,"comment_id":135597395,"body_markdown":"org.codehaus.mojo.buildhelper.Artifact.  &lt;file&gt;target&lt;/file&gt;.   target should be a filename","body":"org.codehaus.mojo.buildhelper.Artifact.  &lt;file&gt;target&lt;/file&gt;.   target should be a filename"}],"answers":[{"comments":[{"owner":{"account_id":2066793,"reputation":203,"user_id":1842168,"accept_rate":25,"display_name":"Kadymov Mukhammed"},"score":0,"creation_date":1353526194,"post_id":13497102,"comment_id":18476858,"body_markdown":"no no no. i know it. but it will be local. but i need to add it to project","body":"no no no. i know it. but it will be local. but i need to add it to project"}],"tags":[],"owner":{"account_id":1344426,"reputation":1432,"user_id":1285431,"accept_rate":41,"display_name":"mzzzzb"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1353749675,"creation_date":1353513535,"answer_id":13497102,"question_id":13495203,"body_markdown":"i dont think you need to use the `maven-helper-plugin` here.\r\nThe doc here says you either need to _install_ the dll or specify its path in the system variable `java.library.path`. \r\n\r\nLook at \r\nhttp://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated\r\n\r\nUPDATE:\r\nmake sure the dll is distributed along with your jar. If you are using a maven,\r\nPut the dll file in your src/main/resources folder. Then make sure the dll ends up outside the jar by excluding it from the package. Follow steps similar to ones outlined [here]. After this you should have your dll along with your built jar file in `target` directory\r\n\r\nThen when you run the app pass system properties as commandline parameter `java -Djava.library.path=.`. \r\n\r\nIf you prefer not to bother passing parameters via commandline -- you can extract current working directory using `System.getProperty(&quot;user.dir&quot;))` and follow steps as stated [here][this] to set your `java.library.path` to current dir programatically in your `main` method\r\n\r\n[here]:http://chandanpandey.wordpress.com/2012/06/06/77/\r\n[this]:http://blog.cedarsoft.com/2010/11/setting-java-library-path-programmatically/","title":"How to add sqljdbc_auth.dll to my maven project","body":"<p>i dont think you need to use the <code>maven-helper-plugin</code> here.\nThe doc here says you either need to <em>install</em> the dll or specify its path in the system variable <code>java.library.path</code>. </p>\n\n<p>Look at \n<a href=\"http://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated</a></p>\n\n<p>UPDATE:\nmake sure the dll is distributed along with your jar. If you are using a maven,\nPut the dll file in your src/main/resources folder. Then make sure the dll ends up outside the jar by excluding it from the package. Follow steps similar to ones outlined <a href=\"http://chandanpandey.wordpress.com/2012/06/06/77/\" rel=\"nofollow\">here</a>. After this you should have your dll along with your built jar file in <code>target</code> directory</p>\n\n<p>Then when you run the app pass system properties as commandline parameter <code>java -Djava.library.path=.</code>. </p>\n\n<p>If you prefer not to bother passing parameters via commandline -- you can extract current working directory using <code>System.getProperty(\"user.dir\"))</code> and follow steps as stated <a href=\"http://blog.cedarsoft.com/2010/11/setting-java-library-path-programmatically/\" rel=\"nofollow\">here</a> to set your <code>java.library.path</code> to current dir programatically in your <code>main</code> method</p>\n"},{"tags":[],"owner":{"account_id":4160832,"reputation":2487,"user_id":3410989,"display_name":"julien.giband"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620211305,"creation_date":1619699687,"answer_id":67317494,"question_id":13495203,"body_markdown":"Based on information found in [this answer][1], you could do it by injecting the dll into `java.library.path` at runtime.\r\n\r\n*I&#39;ve had this running in production for a few years now with no problem on Java &lt;= 8. Never really used with newer versions though. Quick tests worked with Java 11, not Java 15*\r\n\r\nHere&#39;s how I&#39;m doing it:\r\n\r\n 1. Have the dlls stored in your application path. For instance:\r\n```\r\nproject_root\r\nââsrc (or any other source path structure)\r\nâ ââ...packages...\r\nââextlib\r\n  ââSqlJdbc\r\n    ââauth\r\n      ââx64\r\n      â ââsqljdbc_auth.dll\r\n      ââx86\r\n        ââsqljdbc_auth.dll\r\n```\r\n 2. Use the following static initialization code in the class that makes JDBC connection *(java &lt;= 11 version)*:\r\n```java\r\nstatic {\r\n    File file;\r\n    if (&quot;64&quot;.equals(System.getProperty(&quot;sun.arch.data.model&quot;)))\r\n        file = new File(&quot;./extlib/SqlJdbc/auth/x64&quot;);\r\n    else\r\n        file = new File(&quot;./extlib/SqlJdbc/auth/x86&quot;);\r\n    String dllPath;\r\n\ttry {\r\n\t\tdllPath = file.getCanonicalPath();\r\n\t    synchronized(Runtime.getRuntime()) {\r\n\t    \tfinal Field usrPathsField = ClassLoader.class.getDeclaredField(&quot;usr_paths&quot;);\r\n\t        usrPathsField.setAccessible(true);\r\n\t        Object o = usrPathsField.get(null);\r\n            String[] paths = o == null ? new String[0] : (String[]) o;\r\n            if (!Arrays.stream(paths).anyMatch(s -&gt; dllPath.equals(s))) {\r\n\t            String[] usr_paths = Arrays.copyOf(paths, paths.length + 1);\r\n\t            usr_paths[paths.length] = file.getCanonicalPath();\r\n\t            usrPathsField.set(null, usr_paths);\r\n            }\r\n\t    }\r\n        DriverManager.registerDriver(new SQLServerDriver());\r\n\t} catch (Exception e) {\r\n\t\te.printStackTrace();\r\n\t\tthrow new ExceptionInInitializerError(e);\r\n\t}\r\n}\r\n```\r\nAccording to [this answer][2], you should be able to push it to at least Java &lt;= 13 using `MethodHandles.privateLookupIn` instead of `ClassLoader.class.getDeclaredField`. For instance:\r\n```java\r\nLookup cl = MethodHandles.privateLookupIn(ClassLoader.class, MethodHandles.lookup());\r\nVarHandle usrPathsField= cl.findStaticVarHandle(ClassLoader.class, &quot;usr_paths&quot;, String[].class);\r\nObject o = usrPathsField.get();\r\n...\r\nusrPathsField.set(usr_paths);\r\n```\r\n*It&#39;s definitely broken with Java 15, as field `usr_paths` doesn&#39;t exist anymore in `ClassLoader`*\r\n\r\n***At this point, you should be able to run your code from IDE***\r\n\r\n3. Deploy the directory containing dlls (i.e. `extlib`) alongside your jar. For Maven, you can use the following in pom.xml:\r\n```xml\r\n&lt;plugin&gt;\r\n\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;copy-resources&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;prepare-package&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;copy-resources&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/extlib&lt;/outputDirectory&gt;\r\n\t\t\t\t&lt;resources&gt;\r\n\t\t\t\t\t&lt;resource&gt;\r\n\t\t\t\t\t\t&lt;directory&gt;extlib&lt;/directory&gt;\r\n\t\t\t\t\t\t&lt;filtering&gt;false&lt;/filtering&gt;\r\n\t\t\t\t\t&lt;/resource&gt;\r\n\t\t\t\t&lt;/resources&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nFrom there, if you need your dlls packed inside your jar, you can do so using `maven-resources-plugin`, and unpack the required dll at runtime, and then force it onto the library path using a variation of above code.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/15409446/3410989\r\n  [2]: https://stackoverflow.com/a/59468135/3410989","title":"How to add sqljdbc_auth.dll to my maven project","body":"<p>Based on information found in <a href=\"https://stackoverflow.com/a/15409446/3410989\">this answer</a>, you could do it by injecting the dll into <code>java.library.path</code> at runtime.</p>\n<p><em>I've had this running in production for a few years now with no problem on Java &lt;= 8. Never really used with newer versions though. Quick tests worked with Java 11, not Java 15</em></p>\n<p>Here's how I'm doing it:</p>\n<ol>\n<li>Have the dlls stored in your application path. For instance:</li>\n</ol>\n<pre><code>project_root\nââsrc (or any other source path structure)\nâ ââ...packages...\nââextlib\n  ââSqlJdbc\n    ââauth\n      ââx64\n      â ââsqljdbc_auth.dll\n      ââx86\n        ââsqljdbc_auth.dll\n</code></pre>\n<ol start=\"2\">\n<li>Use the following static initialization code in the class that makes JDBC connection <em>(java &lt;= 11 version)</em>:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>static {\n    File file;\n    if (&quot;64&quot;.equals(System.getProperty(&quot;sun.arch.data.model&quot;)))\n        file = new File(&quot;./extlib/SqlJdbc/auth/x64&quot;);\n    else\n        file = new File(&quot;./extlib/SqlJdbc/auth/x86&quot;);\n    String dllPath;\n    try {\n        dllPath = file.getCanonicalPath();\n        synchronized(Runtime.getRuntime()) {\n            final Field usrPathsField = ClassLoader.class.getDeclaredField(&quot;usr_paths&quot;);\n            usrPathsField.setAccessible(true);\n            Object o = usrPathsField.get(null);\n            String[] paths = o == null ? new String[0] : (String[]) o;\n            if (!Arrays.stream(paths).anyMatch(s -&gt; dllPath.equals(s))) {\n                String[] usr_paths = Arrays.copyOf(paths, paths.length + 1);\n                usr_paths[paths.length] = file.getCanonicalPath();\n                usrPathsField.set(null, usr_paths);\n            }\n        }\n        DriverManager.registerDriver(new SQLServerDriver());\n    } catch (Exception e) {\n        e.printStackTrace();\n        throw new ExceptionInInitializerError(e);\n    }\n}\n</code></pre>\n<p>According to <a href=\"https://stackoverflow.com/a/59468135/3410989\">this answer</a>, you should be able to push it to at least Java &lt;= 13 using <code>MethodHandles.privateLookupIn</code> instead of <code>ClassLoader.class.getDeclaredField</code>. For instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Lookup cl = MethodHandles.privateLookupIn(ClassLoader.class, MethodHandles.lookup());\nVarHandle usrPathsField= cl.findStaticVarHandle(ClassLoader.class, &quot;usr_paths&quot;, String[].class);\nObject o = usrPathsField.get();\n...\nusrPathsField.set(usr_paths);\n</code></pre>\n<p><em>It's definitely broken with Java 15, as field <code>usr_paths</code> doesn't exist anymore in <code>ClassLoader</code></em></p>\n<p><em><strong>At this point, you should be able to run your code from IDE</strong></em></p>\n<ol start=\"3\">\n<li>Deploy the directory containing dlls (i.e. <code>extlib</code>) alongside your jar. For Maven, you can use the following in pom.xml:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;copy-resources&lt;/id&gt;\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;copy-resources&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;outputDirectory&gt;${project.build.directory}/extlib&lt;/outputDirectory&gt;\n                &lt;resources&gt;\n                    &lt;resource&gt;\n                        &lt;directory&gt;extlib&lt;/directory&gt;\n                        &lt;filtering&gt;false&lt;/filtering&gt;\n                    &lt;/resource&gt;\n                &lt;/resources&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>From there, if you need your dlls packed inside your jar, you can do so using <code>maven-resources-plugin</code>, and unpack the required dll at runtime, and then force it onto the library path using a variation of above code.</p>\n"},{"tags":[],"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623440418,"creation_date":1623440418,"answer_id":67942715,"question_id":13495203,"body_markdown":"It should be enough to put the dll directly on same level as your main jar.\r\nI suspect your problem has to do with x64 vs x86 versions of dll.\r\nAre you sure your versions align?\r\n\r\nI&#39;m using this dep:\r\n```lang-xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n    &lt;version&gt;9.1.1.jre8-preview&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nAnd the dll:\r\n\r\nmssql-jdbc_auth-9.1.1.x64-preview.dll\r\n\r\nfor my 64 bits project and it works fine","title":"How to add sqljdbc_auth.dll to my maven project","body":"<p>It should be enough to put the dll directly on same level as your main jar.\nI suspect your problem has to do with x64 vs x86 versions of dll.\nAre you sure your versions align?</p>\n<p>I'm using this dep:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;9.1.1.jre8-preview&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And the dll:</p>\n<p>mssql-jdbc_auth-9.1.1.x64-preview.dll</p>\n<p>for my 64 bits project and it works fine</p>\n"}],"owner":{"account_id":2066793,"reputation":203,"user_id":1842168,"accept_rate":25,"display_name":"Kadymov Mukhammed"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12543,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":3,"score":19,"last_activity_date":1700013625,"creation_date":1353507419,"question_id":13495203,"body_markdown":"I am trying to establish connection to a database. It&#39;s a simple project with using maven.\r\n\r\nI have problems with `sqljdbc_auth.dll`\r\n\r\nI have added mssql jdbc driver and added a dependency in `pom.xml`\r\n\r\n```lang-maven\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.microsoft&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThis is my try block\r\n\r\n```lang-java\r\ntry {\r\n    // Establish the connection. \r\n    SQLServerDataSource ds = new SQLServerDataSource();\r\n    ds.setIntegratedSecurity(true);\r\n    ds.setServerName(&quot;BUILDSRV&quot;);\r\n    ds.setDatabaseName(&quot;master&quot;);\r\n    ds.setIntegratedSecurity(true);\r\n    con = ds.getConnection();       \r\n}\r\n```\r\n\r\nand I get this error\r\n\r\n        21.11.2012 18:07:04 com.microsoft.sqlserver.jdbc.AuthenticationJNI &lt;clinit&gt;\r\n        WARNING: Failed to load the sqljdbc_auth.dll cause :- no sqljdbc_auth in       java.library.path\r\n        com.microsoft.sqlserver.jdbc.SQLServerException:\r\n\r\nI have my `sqljdbc_auth.dll` but I don&#39;t need to put it to my `C:\\windows\\...`\r\nI need to add it in my project from maven. How can I do this?\r\n\r\nI tried to add it to the `pom.xml` but it doesn&#39;t work\r\n        \r\n```lang-maven\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.1&lt;/version&gt;\r\n    &lt;executions&gt;\r\n    &lt;execution&gt;\r\n        &lt;id&gt;attach-artifacts&lt;/id&gt;\r\n        &lt;goals&gt;\r\n            &lt;goal&gt;attach-artifact&lt;/goal&gt;\r\n        &lt;/goals&gt;\r\n        &lt;configuration&gt;\r\n            &lt;artifacts&gt;\r\n                &lt;file&gt;target&lt;/file&gt;\r\n                &lt;type&gt;dll&lt;/type&gt;\r\n            &lt;/artifacts&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nI got another error while building\r\n\r\n    Failed to execute goal org.codehaus.mojo:build-helper-maven-plugin:1.1:attach-artifact (attach-artifacts) on project mavenproject1dbconnect: Unable to parse configuration of mojo org.codehaus.mojo:build-helper-maven-plugin:1.1:attach-artifact for parameter file: Cannot configure instance of org.codehaus.mojo.buildhelper.Artifact from target -&gt; [Help 1]\r\n","title":"How to add sqljdbc_auth.dll to my maven project","body":"<p>I am trying to establish connection to a database. It's a simple project with using maven.</p>\n<p>I have problems with <code>sqljdbc_auth.dll</code></p>\n<p>I have added mssql jdbc driver and added a dependency in <code>pom.xml</code></p>\n<pre class=\"lang-maven prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft&lt;/groupId&gt;\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;4.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This is my try block</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    // Establish the connection. \n    SQLServerDataSource ds = new SQLServerDataSource();\n    ds.setIntegratedSecurity(true);\n    ds.setServerName(&quot;BUILDSRV&quot;);\n    ds.setDatabaseName(&quot;master&quot;);\n    ds.setIntegratedSecurity(true);\n    con = ds.getConnection();       \n}\n</code></pre>\n<p>and I get this error</p>\n<pre><code>    21.11.2012 18:07:04 com.microsoft.sqlserver.jdbc.AuthenticationJNI &lt;clinit&gt;\n    WARNING: Failed to load the sqljdbc_auth.dll cause :- no sqljdbc_auth in       java.library.path\n    com.microsoft.sqlserver.jdbc.SQLServerException:\n</code></pre>\n<p>I have my <code>sqljdbc_auth.dll</code> but I don't need to put it to my <code>C:\\windows\\...</code>\nI need to add it in my project from maven. How can I do this?</p>\n<p>I tried to add it to the <code>pom.xml</code> but it doesn't work</p>\n<pre class=\"lang-maven prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;executions&gt;\n    &lt;execution&gt;\n        &lt;id&gt;attach-artifacts&lt;/id&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;attach-artifact&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n            &lt;artifacts&gt;\n                &lt;file&gt;target&lt;/file&gt;\n                &lt;type&gt;dll&lt;/type&gt;\n            &lt;/artifacts&gt;\n        &lt;/configuration&gt;\n    &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I got another error while building</p>\n<pre><code>Failed to execute goal org.codehaus.mojo:build-helper-maven-plugin:1.1:attach-artifact (attach-artifacts) on project mavenproject1dbconnect: Unable to parse configuration of mojo org.codehaus.mojo:build-helper-maven-plugin:1.1:attach-artifact for parameter file: Cannot configure instance of org.codehaus.mojo.buildhelper.Artifact from target -&gt; [Help 1]\n</code></pre>\n"},{"tags":["java","azure-active-directory","azure-ad-msal"],"comments":[{"owner":{"account_id":8048203,"reputation":69971,"user_id":6067741,"accept_rate":94,"display_name":"4c74356b41"},"score":0,"creation_date":1569321651,"post_id":58078379,"comment_id":102551375,"body_markdown":"mkay, why dont you add the `http` url?","body":"mkay, why dont you add the <code>http</code> url?"},{"owner":{"account_id":5361903,"reputation":61,"user_id":4272886,"display_name":"anand mohan reddy"},"score":0,"creation_date":1569323726,"post_id":58078379,"comment_id":102552544,"body_markdown":"azure app registration by default only allowing https url as redirect url , so i cannot make it http","body":"azure app registration by default only allowing https url as redirect url , so i cannot make it http"}],"answers":[{"tags":[],"owner":{"account_id":14544430,"reputation":22020,"user_id":10505040,"display_name":"Jim Xu"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1569374302,"creation_date":1569374302,"answer_id":58089914,"question_id":58078379,"body_markdown":"According to my research,  the redirect URL for web apps and services must begin with the scheme ```https```. If you want to use the scheme ```http```, you just can use ```http:\\\\localhost```. For more details, please refer to https://learn.microsoft.com/en-us/azure/active-directory/develop/azure-ad-endpoint-comparison#restrictions-on-redirect-urls","title":"AADSTS500112: The reply address &#39;http://testurl&#39; does not match the reply address &#39;https://testurl&#39; when requesting Authorization code","body":"<p>According to my research,  the redirect URL for web apps and services must begin with the scheme <code>https</code>. If you want to use the scheme <code>http</code>, you just can use <code>http:\\\\localhost</code>. For more details, please refer to <a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/azure-ad-endpoint-comparison#restrictions-on-redirect-urls\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/azure-ad-endpoint-comparison#restrictions-on-redirect-urls</a></p>\n"},{"tags":[],"owner":{"account_id":14386257,"reputation":71,"user_id":10392191,"display_name":"wty1127"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1571856269,"creation_date":1571851343,"answer_id":58528037,"question_id":58078379,"body_markdown":"We had the same issue after it was deployed in production environment. The reason the https became http is since I was in a load-balanced environment, the outside URL differed from the inside URL (The load balancers off-loaded the SSL processing). When the http request from azure reached our web filter, the httpRequest.getRequestURL().toString() get the http instead of https. What we did is, ask devops team to add a header in httprequest with the original url sent to load balancer, and in our code, we extract the http header instead of the http request itself. \r\n\r\nSpecifically, change\r\n```java\r\nString currentUri = httpRequest.getRequestURL().toString();\r\n```\r\nto \r\n```java\r\nString currentUri = httpRequest.req.getHeader(HEADER_PROXY_URL);\r\n```\r\nThe `HEADER_PROXY_URL` is the header name that devops inject the original url. ","title":"AADSTS500112: The reply address &#39;http://testurl&#39; does not match the reply address &#39;https://testurl&#39; when requesting Authorization code","body":"<p>We had the same issue after it was deployed in production environment. The reason the https became http is since I was in a load-balanced environment, the outside URL differed from the inside URL (The load balancers off-loaded the SSL processing). When the http request from azure reached our web filter, the httpRequest.getRequestURL().toString() get the http instead of https. What we did is, ask devops team to add a header in httprequest with the original url sent to load balancer, and in our code, we extract the http header instead of the http request itself. </p>\n\n<p>Specifically, change</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String currentUri = httpRequest.getRequestURL().toString();\n</code></pre>\n\n<p>to </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String currentUri = httpRequest.req.getHeader(HEADER_PROXY_URL);\n</code></pre>\n\n<p>The <code>HEADER_PROXY_URL</code> is the header name that devops inject the original url. </p>\n"},{"tags":[],"owner":{"account_id":6571443,"reputation":845,"user_id":13339698,"display_name":"Cadence"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700013374,"creation_date":1700013374,"answer_id":77484815,"question_id":58078379,"body_markdown":"wty1127&#39;s mention of the load-balancer was the same problem I was experiencing, but wty1127 is using Java while I&#39;m using .NET Core. Here are the changes I made in Program.cs:\r\n\r\nBefore:\r\n\r\n    .EnableTokenAcquisitionToCallDownstreamApi()\r\n        .AddMicrosoftGraph(builder.Configuration.GetSection(&quot;MicrosoftGraph&quot;))\r\n        .AddInMemoryTokenCaches();\r\n\r\nAfter:\r\n\r\n    .EnableTokenAcquisitionToCallDownstreamApi(options =&gt;\r\n    {\r\n        var section = builder.Configuration.GetSection(&quot;AzureAd&quot;);\r\n        options.RedirectUri = section.GetValue&lt;string&gt;(&quot;RedirectUri&quot;) + section.GetValue&lt;string&gt;(&quot;CallbackPath&quot;);\r\n    })\r\n        .AddMicrosoftGraph(builder.Configuration.GetSection(&quot;MicrosoftGraph&quot;))\r\n        .AddInMemoryTokenCaches();\r\n\r\nThis sets Microsoft Graph&#39;s redirect URI to the location it is actually deployed rather than the incorrect location that it auto-detected. The redirect URI is obtained from my appsettings.json, which has these contents:\r\n\r\n```\r\n{\r\n  &quot;MicrosoftGraph&quot;: {\r\n    &quot;BaseUrl&quot;: &quot;https://graph.microsoft.com/v1.0&quot;,\r\n    &quot;Scopes&quot;: &quot;user.read&quot;\r\n  },\r\n  &quot;AzureAd&quot;: {\r\n    &quot;Instance&quot;: &quot;https://login.microsoftonline.com/&quot;,\r\n    &quot;Domain&quot;: &quot;my.domain.example.com&quot;,\r\n    &quot;Scopes&quot;: &quot;access_as_user&quot;,\r\n    &quot;ClientCertificates&quot;: [],\r\n    &quot;TenantId&quot;: &quot;example-guid-here&quot;,\r\n    &quot;ClientId&quot;: &quot;example-guid-here&quot;,\r\n    &quot;ClientSecret&quot;: &quot;example-secret-here&quot;,\r\n    &quot;RedirectUri&quot;: &quot;https://url-of-my-deployed-website.example.com&quot;,\r\n    &quot;CallbackPath&quot;: &quot;/signin-oidc&quot;,\r\n    &quot;SignedOutCallbackPath&quot;: &quot;/signout-callback-oidc&quot;\r\n  }\r\n}\r\n```\r\n\r\nSo the code is just setting `options.RedirectUri = &quot;https://url-of-my-deployed-website.example.com/signin-oidc&quot;`. This solved the problem for me.","title":"AADSTS500112: The reply address &#39;http://testurl&#39; does not match the reply address &#39;https://testurl&#39; when requesting Authorization code","body":"<p>wty1127's mention of the load-balancer was the same problem I was experiencing, but wty1127 is using Java while I'm using .NET Core. Here are the changes I made in Program.cs:</p>\n<p>Before:</p>\n<pre><code>.EnableTokenAcquisitionToCallDownstreamApi()\n    .AddMicrosoftGraph(builder.Configuration.GetSection(&quot;MicrosoftGraph&quot;))\n    .AddInMemoryTokenCaches();\n</code></pre>\n<p>After:</p>\n<pre><code>.EnableTokenAcquisitionToCallDownstreamApi(options =&gt;\n{\n    var section = builder.Configuration.GetSection(&quot;AzureAd&quot;);\n    options.RedirectUri = section.GetValue&lt;string&gt;(&quot;RedirectUri&quot;) + section.GetValue&lt;string&gt;(&quot;CallbackPath&quot;);\n})\n    .AddMicrosoftGraph(builder.Configuration.GetSection(&quot;MicrosoftGraph&quot;))\n    .AddInMemoryTokenCaches();\n</code></pre>\n<p>This sets Microsoft Graph's redirect URI to the location it is actually deployed rather than the incorrect location that it auto-detected. The redirect URI is obtained from my appsettings.json, which has these contents:</p>\n<pre><code>{\n  &quot;MicrosoftGraph&quot;: {\n    &quot;BaseUrl&quot;: &quot;https://graph.microsoft.com/v1.0&quot;,\n    &quot;Scopes&quot;: &quot;user.read&quot;\n  },\n  &quot;AzureAd&quot;: {\n    &quot;Instance&quot;: &quot;https://login.microsoftonline.com/&quot;,\n    &quot;Domain&quot;: &quot;my.domain.example.com&quot;,\n    &quot;Scopes&quot;: &quot;access_as_user&quot;,\n    &quot;ClientCertificates&quot;: [],\n    &quot;TenantId&quot;: &quot;example-guid-here&quot;,\n    &quot;ClientId&quot;: &quot;example-guid-here&quot;,\n    &quot;ClientSecret&quot;: &quot;example-secret-here&quot;,\n    &quot;RedirectUri&quot;: &quot;https://url-of-my-deployed-website.example.com&quot;,\n    &quot;CallbackPath&quot;: &quot;/signin-oidc&quot;,\n    &quot;SignedOutCallbackPath&quot;: &quot;/signout-callback-oidc&quot;\n  }\n}\n</code></pre>\n<p>So the code is just setting <code>options.RedirectUri = &quot;https://url-of-my-deployed-website.example.com/signin-oidc&quot;</code>. This solved the problem for me.</p>\n"}],"owner":{"account_id":5361903,"reputation":61,"user_id":4272886,"display_name":"anand mohan reddy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58089914,"answer_count":3,"score":0,"last_activity_date":1700013374,"creation_date":1569321397,"question_id":58078379,"body_markdown":"i&#39;m trying to integrate java application with azure ad .\r\n\r\ni have registered an app in azure and added redirect url&#39;s , after successful login , it was redirected to my java application where i am fetching authorization code using msal library.\r\n\r\nGetting the below exception\r\n\r\ncom.microsoft.aad.msal4j.MsalServiceException: AADSTS500112: The reply address\r\n\r\n&#39;http://testUrl&#39; does not match the reply address &#39;https://testUrl\r\n\r\nthe only difference i see in the above url&#39;s is http and https, even though i mentioned https in both redirect url in the app registrations as well as redirect_uri in the microsoft login url.\r\n\r\nbtw, it was working with my local environment, not working when i hosted it on the server .","title":"AADSTS500112: The reply address &#39;http://testurl&#39; does not match the reply address &#39;https://testurl&#39; when requesting Authorization code","body":"<p>i'm trying to integrate java application with azure ad .</p>\n\n<p>i have registered an app in azure and added redirect url's , after successful login , it was redirected to my java application where i am fetching authorization code using msal library.</p>\n\n<p>Getting the below exception</p>\n\n<p>com.microsoft.aad.msal4j.MsalServiceException: AADSTS500112: The reply address</p>\n\n<p>'<a href=\"http://testUrl\" rel=\"nofollow noreferrer\">http://testUrl</a>' does not match the reply address '<a href=\"https://testUrl\" rel=\"nofollow noreferrer\">https://testUrl</a></p>\n\n<p>the only difference i see in the above url's is http and https, even though i mentioned https in both redirect url in the app registrations as well as redirect_uri in the microsoft login url.</p>\n\n<p>btw, it was working with my local environment, not working when i hosted it on the server .</p>\n"},{"tags":["java","arrays","string","list","initialization"],"answers":[{"comments":[{"owner":{"account_id":428606,"reputation":3806,"user_id":811047,"accept_rate":80,"display_name":"BegemoT"},"score":0,"creation_date":1309349509,"post_id":6520409,"comment_id":7674581,"body_markdown":"why not just Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;)?","body":"why not just Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;)?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1309349600,"post_id":6520409,"comment_id":7674618,"body_markdown":"@BegemoT: I was adding that - personally I prefer the explicit nature of the Guava version.","body":"@BegemoT: I was adding that - personally I prefer the explicit nature of the Guava version."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1309350920,"post_id":6520409,"comment_id":7675037,"body_markdown":"*which is unmodifiable* -- It&#39;s actually modifiable (but fixed-sized).","body":"<i>which is unmodifiable</i> -- It&#39;s actually modifiable (but fixed-sized)."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1309364514,"post_id":6520409,"comment_id":7679993,"body_markdown":"@Matt: No problem. I&#39;ll delete the one replying to you, and then delete *this* one soon, if you want to delete your second one too :)","body":"@Matt: No problem. I&#39;ll delete the one replying to you, and then delete <i>this</i> one soon, if you want to delete your second one too :)"},{"owner":{"account_id":4265759,"reputation":279,"user_id":3488928,"display_name":"Ashish Lohia"},"score":0,"creation_date":1504171560,"post_id":6520409,"comment_id":78914495,"body_markdown":"With all respect to Jon Skeet. Isn&#39;t it better to use Arrays.asList() instead of ImmutableList.of(), as the later, will maintain the copied array. Can you please share some light on this?","body":"With all respect to Jon Skeet. Isn&#39;t it better to use Arrays.asList() instead of ImmutableList.of(), as the later, will maintain the copied array. Can you please share some light on this?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1504176853,"post_id":6520409,"comment_id":78918204,"body_markdown":"@AshishLohia: Not if you want the list to be immutable. That&#39;s why I give multiple options - the best approach depends on what you want the result to be.","body":"@AshishLohia: Not if you want the list to be immutable. That&#39;s why I give multiple options - the best approach depends on what you want the result to be."},{"owner":{"account_id":4265759,"reputation":279,"user_id":3488928,"display_name":"Ashish Lohia"},"score":0,"creation_date":1504236965,"post_id":6520409,"comment_id":78945722,"body_markdown":"I completely agree with you @JonSkeet . Thanks for clarifying.","body":"I completely agree with you @JonSkeet . Thanks for clarifying."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":7,"down_vote_count":0,"up_vote_count":120,"is_accepted":true,"score":120,"last_activity_date":1309351051,"creation_date":1309349416,"answer_id":6520409,"question_id":6520382,"body_markdown":"There are various options. Personally I like using [Guava][1]:\r\n\r\n    List&lt;String&gt; strings = Lists.newArrayList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\n(Guava&#39;s a library worth having anyway, of course :)\r\n\r\nUsing just the JDK, you could use:\r\n\r\n    List&lt;String&gt; strings = Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\nNote that this will return an `ArrayList`, but that&#39;s *not* the normal `java.util.ArrayList` - it&#39;s an internal one which is mutable but fixed-size.\r\n\r\nPersonally I prefer the Guava version as it makes it clear what&#39;s going on (the list implementation which will be returned). It&#39;s also *still* clear what&#39;s going on if you statically import the method:\r\n\r\n    // import static com.google.common.collect.Lists.newArrayList;\r\n    List&lt;String&gt; strings = newArrayList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\n... whereas if you statically import `asList` it looks a little odder.\r\n\r\nAnother Guava option, if you don&#39;t want a modifiable-in-any-way list:\r\n\r\n    ImmutableList&lt;String&gt; strings = ImmutableList.of(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\nI typically want to *either* have a completely mutable list (in which case `Lists.newArrayList` is best) *or* a completely immutable list (in which case `ImmutableList.of` is best). It&#39;s rare that I really *want* a mutable-but-fixed-size list.\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"What is the shortest way to initialize List of strings in java?","body":"<p>There are various options. Personally I like using <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a>:</p>\n\n<pre><code>List&lt;String&gt; strings = Lists.newArrayList(\"s1\", \"s2\", \"s3\");\n</code></pre>\n\n<p>(Guava's a library worth having anyway, of course :)</p>\n\n<p>Using just the JDK, you could use:</p>\n\n<pre><code>List&lt;String&gt; strings = Arrays.asList(\"s1\", \"s2\", \"s3\");\n</code></pre>\n\n<p>Note that this will return an <code>ArrayList</code>, but that's <em>not</em> the normal <code>java.util.ArrayList</code> - it's an internal one which is mutable but fixed-size.</p>\n\n<p>Personally I prefer the Guava version as it makes it clear what's going on (the list implementation which will be returned). It's also <em>still</em> clear what's going on if you statically import the method:</p>\n\n<pre><code>// import static com.google.common.collect.Lists.newArrayList;\nList&lt;String&gt; strings = newArrayList(\"s1\", \"s2\", \"s3\");\n</code></pre>\n\n<p>... whereas if you statically import <code>asList</code> it looks a little odder.</p>\n\n<p>Another Guava option, if you don't want a modifiable-in-any-way list:</p>\n\n<pre><code>ImmutableList&lt;String&gt; strings = ImmutableList.of(\"s1\", \"s2\", \"s3\");\n</code></pre>\n\n<p>I typically want to <em>either</em> have a completely mutable list (in which case <code>Lists.newArrayList</code> is best) <em>or</em> a completely immutable list (in which case <code>ImmutableList.of</code> is best). It's rare that I really <em>want</em> a mutable-but-fixed-size list.</p>\n"},{"comments":[{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1309349704,"post_id":6520420,"comment_id":7674658,"body_markdown":"The resulting list is fix-sized though.","body":"The resulting list is fix-sized though."}],"tags":[],"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1309349811,"creation_date":1309349448,"answer_id":6520420,"question_id":6520382,"body_markdown":"    List&lt;String&gt; stringList = Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\nAll these objects exists in the JDK.\r\n\r\n**PS:** As [aioobe][1] stated, this makes the list fixed-sized.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/276052/aioobe","title":"What is the shortest way to initialize List of strings in java?","body":"<pre><code>List&lt;String&gt; stringList = Arrays.asList(\"s1\", \"s2\", \"s3\");\n</code></pre>\n\n<p>All these objects exists in the JDK.</p>\n\n<p><strong>PS:</strong> As <a href=\"https://stackoverflow.com/users/276052/aioobe\">aioobe</a> stated, this makes the list fixed-sized.</p>\n"},{"tags":[],"owner":{"account_id":429168,"reputation":7139,"user_id":811918,"display_name":"Mathias Schwarz"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1309349971,"creation_date":1309349527,"answer_id":6520432,"question_id":6520382,"body_markdown":"You can use the `Arrays` class in the standard Java API: http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList(T...)\r\n\r\n    List&lt;String&gt; strings = Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\nBe aware that the resultning list is fixed-size (you cannot add to it).","title":"What is the shortest way to initialize List of strings in java?","body":"<p>You can use the <code>Arrays</code> class in the standard Java API: <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList(T\" rel=\"nofollow\">http://download.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList(T</a>...)</p>\n\n<pre><code>List&lt;String&gt; strings = Arrays.asList(\"s1\", \"s2\", \"s3\");\n</code></pre>\n\n<p>Be aware that the resultning list is fixed-size (you cannot add to it).</p>\n"},{"comments":[{"owner":{"account_id":429168,"reputation":7139,"user_id":811918,"display_name":"Mathias Schwarz"},"score":1,"creation_date":1309349741,"post_id":6520437,"comment_id":7674674,"body_markdown":"@The Elite Gentleman: The result of Arrays.asList is immutable. If a new ArrayList is constructed as in `str2` then it is possible to add to the list afterwards.","body":"@The Elite Gentleman: The result of Arrays.asList is immutable. If a new ArrayList is constructed as in <code>str2</code> then it is possible to add to the list afterwards."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":2,"creation_date":1309349840,"post_id":6520437,"comment_id":7674718,"body_markdown":"@Mathias Schwarz, not immutable, fixed sized.","body":"@Mathias Schwarz, not immutable, fixed sized."},{"owner":{"account_id":429168,"reputation":7139,"user_id":811918,"display_name":"Mathias Schwarz"},"score":0,"creation_date":1309349941,"post_id":6520437,"comment_id":7674753,"body_markdown":"@aioobe: You are right! It is possible to overwrite existing entries.","body":"@aioobe: You are right! It is possible to overwrite existing entries."},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"PaÅ­lo Ebermann"},"score":2,"creation_date":1309351607,"post_id":6520437,"comment_id":7675273,"body_markdown":"You should note that the **initialization block** variant creates an anonymous subclass of the ArrayList class.","body":"You should note that the <b>initialization block</b> variant creates an anonymous subclass of the ArrayList class."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":1,"creation_date":1688117649,"post_id":6520437,"comment_id":135033870,"body_markdown":"pls mention List.of() is also immutable!","body":"pls mention List.of() is also immutable!"}],"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":5,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1594048236,"creation_date":1309349552,"answer_id":6520437,"question_id":6520382,"body_markdown":"Java 9+\r\n--\r\n\r\nJava 9 introduces a convenience method [`List.of`](http://download.java.net/java/jdk9/docs/api/java/util/List.html#of-E-E-E-) used as follows:\r\n\r\n    List&lt;String&gt; l = List.of(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\nJava 8 and older\r\n----\r\n\r\nHere are a few alternatives:\r\n\r\n    // Short, but the resulting list is fixed size.\r\n    List&lt;String&gt; list1 = Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    \r\n    // Similar to above, but the resulting list can grow.\r\n    List&lt;String&gt; list2 = new ArrayList&lt;&gt;(Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;));\r\n    \r\n    // Using initialization block. Useful if you need to &quot;compute&quot; the strings.\r\n    List&lt;String&gt; list3 = new ArrayList&lt;String&gt;() {{\r\n        add(&quot;s1&quot;);\r\n        add(&quot;s2&quot;);\r\n        add(&quot;s3&quot;);\r\n    }};\r\n&lt;br/&gt;\r\n\r\nWhen it comes to arrays, you could initialize it at the point of declaration like this:\r\n\r\n    String[] arr = { &quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot; };\r\n\r\nIf you need to reinitialize it or create it without storing it in a variable, you do\r\n\r\n    new String[] { &quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot; }\r\n\r\nIf the string constants are may though, it would look like\r\n\r\n    String[] arr = { &quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s4&quot;, &quot;s5&quot;, &quot;s6&quot;, &quot;s7&quot;, &quot;s8&quot;, &quot;s9&quot;, &quot;s10&quot;,\r\n                     &quot;s11&quot;, &quot;s12&quot;, &quot;s13&quot; };\r\n\r\nIn these cases I usually prefer writing\r\n\r\n    String[] arr = &quot;s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13&quot;.split(&quot;,&quot;);","title":"What is the shortest way to initialize List of strings in java?","body":"<h2>Java 9+</h2>\n<p>Java 9 introduces a convenience method <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/List.html#of-E-E-E-\" rel=\"noreferrer\"><code>List.of</code></a> used as follows:</p>\n<pre><code>List&lt;String&gt; l = List.of(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n</code></pre>\n<h2>Java 8 and older</h2>\n<p>Here are a few alternatives:</p>\n<pre><code>// Short, but the resulting list is fixed size.\nList&lt;String&gt; list1 = Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n\n// Similar to above, but the resulting list can grow.\nList&lt;String&gt; list2 = new ArrayList&lt;&gt;(Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;));\n\n// Using initialization block. Useful if you need to &quot;compute&quot; the strings.\nList&lt;String&gt; list3 = new ArrayList&lt;String&gt;() {{\n    add(&quot;s1&quot;);\n    add(&quot;s2&quot;);\n    add(&quot;s3&quot;);\n}};\n</code></pre>\n<br/>\n<p>When it comes to arrays, you could initialize it at the point of declaration like this:</p>\n<pre><code>String[] arr = { &quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot; };\n</code></pre>\n<p>If you need to reinitialize it or create it without storing it in a variable, you do</p>\n<pre><code>new String[] { &quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot; }\n</code></pre>\n<p>If the string constants are may though, it would look like</p>\n<pre><code>String[] arr = { &quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s4&quot;, &quot;s5&quot;, &quot;s6&quot;, &quot;s7&quot;, &quot;s8&quot;, &quot;s9&quot;, &quot;s10&quot;,\n                 &quot;s11&quot;, &quot;s12&quot;, &quot;s13&quot; };\n</code></pre>\n<p>In these cases I usually prefer writing</p>\n<pre><code>String[] arr = &quot;s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13&quot;.split(&quot;,&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9553438,"reputation":3539,"user_id":7096763,"display_name":"MikaelF"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485653078,"creation_date":1485653078,"answer_id":41916713,"question_id":6520382,"body_markdown":"I am not familiar with Guava, but almost all solutions mentioned in other answers and using the JDK suffer have some flaws:\r\n\r\n1. The `Arrays.asList` method returns a fixed-size list.\r\n\r\n2. {{Double-brace initialization}} is known to create classpath clutter and [slow down execution](https://stackoverflow.com/questions/924285/efficiency-of-java-double-brace-initialization). It also requires one line of code per element.\r\n\r\n3. **Java 9**: the static factory method [`List.of`](http://download.java.net/java/jdk9/docs/api/java/util/List.html#of--)returns a structurally immutable list. Moreover, `List.of` is [value-based](http://download.java.net/java/jdk9/docs/api/java/lang/doc-files/ValueBased.html), and therefore its contract does not guarantee that it will return a new object each time.\r\n\r\n---\r\n\r\nHere is a Java 8 one-liner for gathering multiple individual objects into  an `ArrayList`, or any collection for that matter.\r\n\r\n    List&lt;String&gt; list = Stream.of(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;).collect(Collectors.toCollection(ArrayList::new));\r\n\r\n**Note**: aioobe&#39;s solution of copying a transitory collection (`new ArrayList&lt;&gt;(Arrays.asList(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;))`) is also excellent.\r\n\r\n\r\n\r\n","title":"What is the shortest way to initialize List of strings in java?","body":"<p>I am not familiar with Guava, but almost all solutions mentioned in other answers and using the JDK suffer have some flaws:</p>\n\n<ol>\n<li><p>The <code>Arrays.asList</code> method returns a fixed-size list.</p></li>\n<li><p>{{Double-brace initialization}} is known to create classpath clutter and <a href=\"https://stackoverflow.com/questions/924285/efficiency-of-java-double-brace-initialization\">slow down execution</a>. It also requires one line of code per element.</p></li>\n<li><p><strong>Java 9</strong>: the static factory method <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/List.html#of--\" rel=\"nofollow noreferrer\"><code>List.of</code></a>returns a structurally immutable list. Moreover, <code>List.of</code> is <a href=\"http://download.java.net/java/jdk9/docs/api/java/lang/doc-files/ValueBased.html\" rel=\"nofollow noreferrer\">value-based</a>, and therefore its contract does not guarantee that it will return a new object each time.</p></li>\n</ol>\n\n<hr>\n\n<p>Here is a Java 8 one-liner for gathering multiple individual objects into  an <code>ArrayList</code>, or any collection for that matter.</p>\n\n<pre><code>List&lt;String&gt; list = Stream.of(\"s1\", \"s2\", \"s3\").collect(Collectors.toCollection(ArrayList::new));\n</code></pre>\n\n<p><strong>Note</strong>: aioobe's solution of copying a transitory collection (<code>new ArrayList&lt;&gt;(Arrays.asList(\"s1\", \"s2\", \"s3\"))</code>) is also excellent.</p>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1700012541,"creation_date":1485660758,"answer_id":41917350,"question_id":6520382,"body_markdown":"With [Eclipse Collections][1], you can write the following:\r\n\r\n    List&lt;String&gt; list = Lists.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\nYou can also be more specific about the types and whether they are Mutable or Immutable.\r\n\r\n    MutableList&lt;String&gt; mList = Lists.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    ImmutableList&lt;String&gt; iList = Lists.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\nYou can also do the same with `Sets`, `Bags` and `Maps`:\r\n\r\n    Set&lt;String&gt; set = Sets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    MutableSet&lt;String&gt; mSet = Sets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    ImmutableSet&lt;String&gt; iSet = Sets.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\n    Bag&lt;String&gt; bag = Bags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    MutableBag&lt;String&gt; mBag = Bags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    ImmutableBag&lt;String&gt; iBag = Bags.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n\r\n    Map&lt;String, String&gt; map = \r\n        Maps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s3&quot;);\r\n    MutableMap&lt;String, String&gt; mMap = \r\n        Maps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s3&quot;);\r\n    ImmutableMap&lt;String, String&gt; iMap = \r\n        Maps.immutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s3&quot;);\r\n\r\nThere are factories for `SortedSets`, `SortedBags` and `SortedMaps` as well.\r\n\r\n    SortedSet&lt;String&gt; sortedSet = SortedSets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    MutableSortedSet&lt;String&gt; mSortedSet = SortedSets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    ImmutableSortedSet&lt;String&gt; iSortedSet = SortedSets.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    \r\n    SortedBag&lt;String&gt; sortedBag = SortedBags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    MutableSortedBag&lt;String&gt; mSortedBag = SortedBags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    ImmutableSortedBag&lt;String&gt; iSortedBag = SortedBags.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\r\n    \r\n    SortedMap&lt;String, String&gt; sortedMap =\r\n            SortedMaps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;,&quot;s3&quot;);\r\n    MutableSortedMap&lt;String, String&gt; mSortedMap =\r\n            SortedMaps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;,&quot;s3&quot;);\r\n    ImmutableSortedMap&lt;String, String&gt; iSortedMap =\r\n            SortedMaps.immutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;,&quot;s3&quot;);\r\n\r\n**Note:** I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/\r\n\r\n\r\n","title":"What is the shortest way to initialize List of strings in java?","body":"<p>With <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a>, you can write the following:</p>\n<pre><code>List&lt;String&gt; list = Lists.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n</code></pre>\n<p>You can also be more specific about the types and whether they are Mutable or Immutable.</p>\n<pre><code>MutableList&lt;String&gt; mList = Lists.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nImmutableList&lt;String&gt; iList = Lists.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n</code></pre>\n<p>You can also do the same with <code>Sets</code>, <code>Bags</code> and <code>Maps</code>:</p>\n<pre><code>Set&lt;String&gt; set = Sets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nMutableSet&lt;String&gt; mSet = Sets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nImmutableSet&lt;String&gt; iSet = Sets.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n\nBag&lt;String&gt; bag = Bags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nMutableBag&lt;String&gt; mBag = Bags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nImmutableBag&lt;String&gt; iBag = Bags.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n\nMap&lt;String, String&gt; map = \n    Maps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s3&quot;);\nMutableMap&lt;String, String&gt; mMap = \n    Maps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s3&quot;);\nImmutableMap&lt;String, String&gt; iMap = \n    Maps.immutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s3&quot;);\n</code></pre>\n<p>There are factories for <code>SortedSets</code>, <code>SortedBags</code> and <code>SortedMaps</code> as well.</p>\n<pre><code>SortedSet&lt;String&gt; sortedSet = SortedSets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nMutableSortedSet&lt;String&gt; mSortedSet = SortedSets.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nImmutableSortedSet&lt;String&gt; iSortedSet = SortedSets.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n\nSortedBag&lt;String&gt; sortedBag = SortedBags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nMutableSortedBag&lt;String&gt; mSortedBag = SortedBags.mutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\nImmutableSortedBag&lt;String&gt; iSortedBag = SortedBags.immutable.with(&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;);\n\nSortedMap&lt;String, String&gt; sortedMap =\n        SortedMaps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;,&quot;s3&quot;);\nMutableSortedMap&lt;String, String&gt; mSortedMap =\n        SortedMaps.mutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;,&quot;s3&quot;);\nImmutableSortedMap&lt;String, String&gt; iSortedMap =\n        SortedMaps.immutable.with(&quot;s1&quot;, &quot;s1&quot;, &quot;s2&quot;, &quot;s2&quot;, &quot;s3&quot;,&quot;s3&quot;);\n</code></pre>\n<p><strong>Note:</strong> I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":5929686,"reputation":6955,"user_id":4664558,"accept_rate":86,"display_name":"LazerBanana"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1567070026,"creation_date":1525770120,"answer_id":50229846,"question_id":6520382,"body_markdown":"**JDK2**\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n**JDK7**\r\n\r\n    //diamond operator\r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    list.add(&quot;one&quot;);\r\n    list.add(&quot;two&quot;);\r\n    list.add(&quot;three&quot;);\r\n\r\n**JDK8**\r\n\r\n    List&lt;String&gt; list = Stream.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;).collect(Collectors.toList());\r\n\r\n**JDK9**\r\n\r\n    List&lt;String&gt; list = List.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n\r\nPlus there are lots of other ways supplied by other libraries like Guava.","title":"What is the shortest way to initialize List of strings in java?","body":"<p><strong>JDK2</strong></p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"one\", \"two\", \"three\");\n</code></pre>\n\n<p><strong>JDK7</strong></p>\n\n<pre><code>//diamond operator\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\nlist.add(\"one\");\nlist.add(\"two\");\nlist.add(\"three\");\n</code></pre>\n\n<p><strong>JDK8</strong></p>\n\n<pre><code>List&lt;String&gt; list = Stream.of(\"one\", \"two\", \"three\").collect(Collectors.toList());\n</code></pre>\n\n<p><strong>JDK9</strong></p>\n\n<pre><code>List&lt;String&gt; list = List.of(\"one\", \"two\", \"three\");\n</code></pre>\n\n<p>Plus there are lots of other ways supplied by other libraries like Guava.</p>\n"}],"owner":{"account_id":65929,"reputation":12843,"user_id":193702,"accept_rate":59,"display_name":"Vladimir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95938,"favorite_count":0,"down_vote_count":2,"up_vote_count":71,"accepted_answer_id":6520409,"answer_count":7,"score":69,"last_activity_date":1700012541,"creation_date":1309349290,"question_id":6520382,"body_markdown":"I am searching for the shortest way (in code) to initialize list of strings and array of strings, i.e. list/array containing \r\n&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot; string elements.\r\n\r\n","title":"What is the shortest way to initialize List of strings in java?","body":"<p>I am searching for the shortest way (in code) to initialize list of strings and array of strings, i.e. list/array containing \n\"s1\", \"s2\", \"s3\" string elements.</p>\n"},{"tags":["java","ubuntu","base64"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1699998466,"post_id":77483791,"comment_id":136600449,"body_markdown":"No buffering? I would try to add buffered input at least to see if it impacts the result.","body":"No buffering? I would try to add buffered input at least to see if it impacts the result."},{"owner":{"account_id":10805595,"reputation":3025,"user_id":7947994,"display_name":"JANO"},"score":0,"creation_date":1700000994,"post_id":77483791,"comment_id":136600824,"body_markdown":"Thanks a lot! With buffering the decoding is only 4-7 times slower than the encoding with my example. There are a lot of streams (also buffering) wrapped together in the original code, probably a reordering of these streams would already greatly improve the performance. A factor of 4-7 still seems pretty high or not?","body":"Thanks a lot! With buffering the decoding is only 4-7 times slower than the encoding with my example. There are a lot of streams (also buffering) wrapped together in the original code, probably a reordering of these streams would already greatly improve the performance. A factor of 4-7 still seems pretty high or not?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1700003052,"post_id":77483791,"comment_id":136601066,"body_markdown":"Youâre just running single tests, which are affected by classloading time and by JIT optimization time.  See https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java.","body":"Youâre just running single tests, which are affected by classloading time and by JIT optimization time.  See <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1700012387,"post_id":77483791,"comment_id":136602032,"body_markdown":"Your testing can&#39;t distinguish encode/decode from file I/O times. To compare the actual encode/decode times, use in-memory data.  Read the entire test file into an array or similar structure; then encode/decode from there.","body":"Your testing can&#39;t distinguish encode/decode from file I/O times. To compare the actual encode/decode times, use in-memory data.  Read the entire test file into an array or similar structure; then encode/decode from there."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700012056,"creation_date":1700012056,"answer_id":77484754,"question_id":77483791,"body_markdown":"Multiple issues here.\r\n\r\n## Buffers\r\n\r\nThe `.read()` call (as in, read a single byte) can be either somewhat or incredibly inefficient, depending on the underlying resource. It might require asking the OS for one byte which involves some infrastructure that takes a tiny bit of time, but it really adds up if you do it for every byte. It takes a __ton__ of time if the underlying resource is block-based, and thus `.read()` reads in an entire block and then ditches everything except the one byte you want. If you do this:\r\n\r\n```\r\nfor (int i = 0; i &lt; 1024; i++) in.read();\r\n```\r\n\r\nAnd `in` represents a resource that works in 1024-size blocks, that will read the 1024 bytes, toss away all but the first, and return that. Rinse and repeat: It reads 1024*1024 bytes. It is, literally, 1024 slower than `byte[] b = new byte[1024]; in.read(b);`.\r\n\r\nIf you want to write code that is just simpler to write using `in.read()` instead of `in.read(buffer)`, no problem! Wrap the resource in `new BufferedInputStream()`, and BIS will take care of making a little buffer. `.read()` on BIS causes a `read(sizableBuffer)` on the underlying resource, then further `.read()` calls on BIS just are an all memory, all-java affair, with BIS just returning you bytes from its buffer until you&#39;ve gotten them all, only then will then next `.read()` call reach into the underlying resource again.\r\n\r\n`transferTo` does not require buffers; it, itself, is &#39;smart&#39; and transfers in patches.\r\n\r\nHowever, digging into the source of `Base64.getDecoder().wrap(someInputStream)`, even its `.read(sizableByteArray)` implementation calls `in.read()` on the underlying resource. Weirdly, the _encoder_ __does__ buffer a lot more (about 8192 bytes, that&#39;ll really take the edge off at least, and is more than enough for most block-based systems).\r\n\r\nSimply wrap em in `new BufferedInputStream` and `new BufferedOutputStream` and this problem disappears, and that gives you 100 to 1000x speedup.\r\n\r\n## Microbenchmarking\r\n\r\nThose simple explanations of how computers work are utter and total lies. They don&#39;t work like that __at all__. CPUs do pipelining and predictive ahead-of-pointer work, the JVM runs everything slow (even slower than you think: It, for example, does some bookkeeping and for example _adds_ code that counts how often a certain `if` is triggered vs. skipped). That&#39;s because the vast majority of apps _literally_ spend 99% of the time in 1% of the code, so running code slowly makes absolutely no difference whatsoever. Except that 1%, where it makes a ton of difference. That bookkeeping lets the JVM know what the 1% is, and the branch stuff means the JVM can make incredibly inefficient bytecode for it, which it will, and then just run that. This is called JIT (Just-in-time) / hotspot.\r\n\r\nThe thing is, on boot, the JVM doesn&#39;t know _yet_. So, the performance (oversimplified) of the &#39;hot path&#39; looks like:\r\n\r\n* iterations 1-1000: Take 50ms per iteration.\r\n* iteration 1001: Takes 800ms as the JVM compiles up a machine code version informed by all that bookkeeping.\r\n* iteration 1002+: Take 4ms per iteration.\r\n\r\nYou want to iterate enough to make the impact of iterations 1-1001 get lost in the noise. But how do you know you&#39;ve gotten past the &#39;JIT warmup phase&#39;? This is tricky. And that&#39;s just one of a ton of reasons why performance measuring is vastly more complicated than just &#39;start timer, run code, stop timer&#39;.\r\n\r\nUnless you spend 5 years studying JVMs and CPU design, you&#39;re going to be hopeless at this and can&#39;t do the job. Fortunately, you don&#39;t have to: You use existing tools to do the performance testing for you. The most commonly used microbenchmarking tool is [JMH](https://www.baeldung.com/java-microbenchmark-harness). __Follow this tutorial__.\r\n\r\n## The nature of Base64 and disks\r\n\r\nEncoding Base64 turns every block of 3 bytes into 4 bytes. That means you write 33% more than you read. (read 3MB, write 4MB).\r\n\r\nDecoding turns every block of 4 bytes into 3 bytes. That means you read 33% more than you write. (Read 4MB, write 3MB).\r\n\r\nIf the underlying sources have different performance characteristics for read vs. write, one of them will naturally be slower than the other one.\r\n\r\n## But.. that&#39;s a big gap!\r\n\r\nI&#39;d fix all the above (add buffering, hang all this code into a JMH harnes), but a 10x+ factor vs. command line `base64` is still quite large. Here are the next steps I would take:\r\n\r\n* Run this on a freshly downloaded OpenJDK21 installation.\r\n* Use guava&#39;s Decoder instead of the built in one.\r\n\r\nIf the difference disappears, you can now safely &#39;blame&#39; a shoddy implementation.","title":"Java Base64 Decoding much slower than Encoding for large files","body":"<p>Multiple issues here.</p>\n<h2>Buffers</h2>\n<p>The <code>.read()</code> call (as in, read a single byte) can be either somewhat or incredibly inefficient, depending on the underlying resource. It might require asking the OS for one byte which involves some infrastructure that takes a tiny bit of time, but it really adds up if you do it for every byte. It takes a <strong>ton</strong> of time if the underlying resource is block-based, and thus <code>.read()</code> reads in an entire block and then ditches everything except the one byte you want. If you do this:</p>\n<pre><code>for (int i = 0; i &lt; 1024; i++) in.read();\n</code></pre>\n<p>And <code>in</code> represents a resource that works in 1024-size blocks, that will read the 1024 bytes, toss away all but the first, and return that. Rinse and repeat: It reads 1024*1024 bytes. It is, literally, 1024 slower than <code>byte[] b = new byte[1024]; in.read(b);</code>.</p>\n<p>If you want to write code that is just simpler to write using <code>in.read()</code> instead of <code>in.read(buffer)</code>, no problem! Wrap the resource in <code>new BufferedInputStream()</code>, and BIS will take care of making a little buffer. <code>.read()</code> on BIS causes a <code>read(sizableBuffer)</code> on the underlying resource, then further <code>.read()</code> calls on BIS just are an all memory, all-java affair, with BIS just returning you bytes from its buffer until you've gotten them all, only then will then next <code>.read()</code> call reach into the underlying resource again.</p>\n<p><code>transferTo</code> does not require buffers; it, itself, is 'smart' and transfers in patches.</p>\n<p>However, digging into the source of <code>Base64.getDecoder().wrap(someInputStream)</code>, even its <code>.read(sizableByteArray)</code> implementation calls <code>in.read()</code> on the underlying resource. Weirdly, the <em>encoder</em> <strong>does</strong> buffer a lot more (about 8192 bytes, that'll really take the edge off at least, and is more than enough for most block-based systems).</p>\n<p>Simply wrap em in <code>new BufferedInputStream</code> and <code>new BufferedOutputStream</code> and this problem disappears, and that gives you 100 to 1000x speedup.</p>\n<h2>Microbenchmarking</h2>\n<p>Those simple explanations of how computers work are utter and total lies. They don't work like that <strong>at all</strong>. CPUs do pipelining and predictive ahead-of-pointer work, the JVM runs everything slow (even slower than you think: It, for example, does some bookkeeping and for example <em>adds</em> code that counts how often a certain <code>if</code> is triggered vs. skipped). That's because the vast majority of apps <em>literally</em> spend 99% of the time in 1% of the code, so running code slowly makes absolutely no difference whatsoever. Except that 1%, where it makes a ton of difference. That bookkeeping lets the JVM know what the 1% is, and the branch stuff means the JVM can make incredibly inefficient bytecode for it, which it will, and then just run that. This is called JIT (Just-in-time) / hotspot.</p>\n<p>The thing is, on boot, the JVM doesn't know <em>yet</em>. So, the performance (oversimplified) of the 'hot path' looks like:</p>\n<ul>\n<li>iterations 1-1000: Take 50ms per iteration.</li>\n<li>iteration 1001: Takes 800ms as the JVM compiles up a machine code version informed by all that bookkeeping.</li>\n<li>iteration 1002+: Take 4ms per iteration.</li>\n</ul>\n<p>You want to iterate enough to make the impact of iterations 1-1001 get lost in the noise. But how do you know you've gotten past the 'JIT warmup phase'? This is tricky. And that's just one of a ton of reasons why performance measuring is vastly more complicated than just 'start timer, run code, stop timer'.</p>\n<p>Unless you spend 5 years studying JVMs and CPU design, you're going to be hopeless at this and can't do the job. Fortunately, you don't have to: You use existing tools to do the performance testing for you. The most commonly used microbenchmarking tool is <a href=\"https://www.baeldung.com/java-microbenchmark-harness\" rel=\"nofollow noreferrer\">JMH</a>. <strong>Follow this tutorial</strong>.</p>\n<h2>The nature of Base64 and disks</h2>\n<p>Encoding Base64 turns every block of 3 bytes into 4 bytes. That means you write 33% more than you read. (read 3MB, write 4MB).</p>\n<p>Decoding turns every block of 4 bytes into 3 bytes. That means you read 33% more than you write. (Read 4MB, write 3MB).</p>\n<p>If the underlying sources have different performance characteristics for read vs. write, one of them will naturally be slower than the other one.</p>\n<h2>But.. that's a big gap!</h2>\n<p>I'd fix all the above (add buffering, hang all this code into a JMH harnes), but a 10x+ factor vs. command line <code>base64</code> is still quite large. Here are the next steps I would take:</p>\n<ul>\n<li>Run this on a freshly downloaded OpenJDK21 installation.</li>\n<li>Use guava's Decoder instead of the built in one.</li>\n</ul>\n<p>If the difference disappears, you can now safely 'blame' a shoddy implementation.</p>\n"}],"owner":{"account_id":10805595,"reputation":3025,"user_id":7947994,"display_name":"JANO"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700012056,"creation_date":1699995493,"question_id":77483791,"body_markdown":"Currently, I am investigating an existing application encoding and decoding files up to 100MB into and from Base64. I noticed that there is a huge difference in performance between encoding and decoding with Java&#39;s [Base64](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Base64.html) class. The decoding can be **over 100 times slower** than the encoding. From my understanding, there is no added complexity (besides the slightly (~33%) larger input file) when decoding the same content from Base64.\r\n\r\nI timed the encoding/decoding for three file sizes and compared it to encoding/decoding with the pre-installed bash64 command on my Ubuntu Terminal. This showed that there is not really a difference between encoding and decoding when using my Terminal. However, the Java Base64 Decoding seems to be clearly out of line.\r\n\r\nMy measurements:\r\n\r\n| File Size  | 100 KB | 1 MB | 61 MB|\r\n|-------|-------|-------|-|-|\r\n|Java Base64 Encode     | 5 ms   | 36 ms    | 325 ms   |     \r\n|Java Base64 Decode     | 151 ms | 1 522 ms |83 134 ms |\r\n|Terminal Base64 Encode | 8 ms   | 21 ms    | 257 ms   |\r\n|Terminal Base64 Decode | 10 ms  | 46ms     | 385ms    |\r\n\r\n\r\n\r\nIs there a specific reason for Java&#39;s decode method to be this slow? I am not sure what could make Java&#39;s decode method more complex than the Terminal command&#39;s base64 decode. I think that encoding and decoding of &quot;large&quot; files is not the typical use case, but still, I would expect a reasonable performance.\r\n\r\nI would appreciate any insight or suggestions to fix my problem!\r\n\r\n\r\n\r\nJava Reproducer:\r\n```\r\nimport java.io.FileInputStream;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.util.Base64;\r\n\r\npublic class Base64Test {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String inputFileName = &quot;input.txt&quot;;\r\n        String outputFileName = &quot;encoded.txt&quot;;\r\n        String outputFileName2 = &quot;decoded.txt&quot;;\r\n\r\n        long time1 = System.nanoTime();\r\n\r\n        try (FileInputStream in = new FileInputStream(inputFileName);\r\n             FileOutputStream out = new FileOutputStream(outputFileName)) {\r\n            in.transferTo(Base64.getEncoder().wrap(out));\r\n        }\r\n\r\n        System.out.println(&quot;Base64 encoding  : &quot; + outputFileName + &quot; Time: &quot; + (System.nanoTime() - time1) / 1000 / 1000);\r\n\r\n        long time2 = System.nanoTime();\r\n        try (FileInputStream fis = new FileInputStream(outputFileName);\r\n             FileOutputStream out = new FileOutputStream(outputFileName2)) {\r\n            InputStream in = Base64.getDecoder().wrap(fis);\r\n            in.transferTo(out);\r\n        }\r\n\r\n        System.out.println(&quot;Base64 decoding: &quot; + outputFileName + &quot; Time: &quot; + (System.nanoTime() - time2) / 1000 / 1000);\r\n    }\r\n}\r\n```\r\nTerminal commands:\r\n```\r\n$ time base64 input.txt &gt; encoded.txt\r\n$ time base64 --decode encoded.txt &gt; decoded.txt\r\n```\r\n\r\nSystem: \r\n - Ubuntu 22.04\r\n - 16GB memory\r\n - OpenJDK 17.0.9\r\n - Intellij 2023.2.5\r\n \r\nInput files consisted of random characters I typed with my keyboard and copied until the specific file size was reached. I also tried out a different Ubuntu notebook with JDK 17 and got the same results.\r\n\r\n**EDIT:** Results with buffering:\r\n\r\n| File Size  | 100 KB | 1 MB | 61 MB| 100 MB\r\n|-------|-------|-------|-|-|\r\n|Java Base64 Encode     | 5 ms   | 30 ms    | 311 ms   | 423 ms |    \r\n|Java Base64 Decode     | 12 ms | 46 ms | 1684 ms | 2875 ms |","title":"Java Base64 Decoding much slower than Encoding for large files","body":"<p>Currently, I am investigating an existing application encoding and decoding files up to 100MB into and from Base64. I noticed that there is a huge difference in performance between encoding and decoding with Java's <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Base64.html\" rel=\"nofollow noreferrer\">Base64</a> class. The decoding can be <strong>over 100 times slower</strong> than the encoding. From my understanding, there is no added complexity (besides the slightly (~33%) larger input file) when decoding the same content from Base64.</p>\n<p>I timed the encoding/decoding for three file sizes and compared it to encoding/decoding with the pre-installed bash64 command on my Ubuntu Terminal. This showed that there is not really a difference between encoding and decoding when using my Terminal. However, the Java Base64 Decoding seems to be clearly out of line.</p>\n<p>My measurements:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>File Size</th>\n<th>100 KB</th>\n<th>1 MB</th>\n<th>61 MB</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Java Base64 Encode</td>\n<td>5 ms</td>\n<td>36 ms</td>\n<td>325 ms</td>\n</tr>\n<tr>\n<td>Java Base64 Decode</td>\n<td>151 ms</td>\n<td>1 522 ms</td>\n<td>83 134 ms</td>\n</tr>\n<tr>\n<td>Terminal Base64 Encode</td>\n<td>8 ms</td>\n<td>21 ms</td>\n<td>257 ms</td>\n</tr>\n<tr>\n<td>Terminal Base64 Decode</td>\n<td>10 ms</td>\n<td>46ms</td>\n<td>385ms</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Is there a specific reason for Java's decode method to be this slow? I am not sure what could make Java's decode method more complex than the Terminal command's base64 decode. I think that encoding and decoding of &quot;large&quot; files is not the typical use case, but still, I would expect a reasonable performance.</p>\n<p>I would appreciate any insight or suggestions to fix my problem!</p>\n<p>Java Reproducer:</p>\n<pre><code>import java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.Base64;\n\npublic class Base64Test {\n\n    public static void main(String[] args) throws IOException {\n        String inputFileName = &quot;input.txt&quot;;\n        String outputFileName = &quot;encoded.txt&quot;;\n        String outputFileName2 = &quot;decoded.txt&quot;;\n\n        long time1 = System.nanoTime();\n\n        try (FileInputStream in = new FileInputStream(inputFileName);\n             FileOutputStream out = new FileOutputStream(outputFileName)) {\n            in.transferTo(Base64.getEncoder().wrap(out));\n        }\n\n        System.out.println(&quot;Base64 encoding  : &quot; + outputFileName + &quot; Time: &quot; + (System.nanoTime() - time1) / 1000 / 1000);\n\n        long time2 = System.nanoTime();\n        try (FileInputStream fis = new FileInputStream(outputFileName);\n             FileOutputStream out = new FileOutputStream(outputFileName2)) {\n            InputStream in = Base64.getDecoder().wrap(fis);\n            in.transferTo(out);\n        }\n\n        System.out.println(&quot;Base64 decoding: &quot; + outputFileName + &quot; Time: &quot; + (System.nanoTime() - time2) / 1000 / 1000);\n    }\n}\n</code></pre>\n<p>Terminal commands:</p>\n<pre><code>$ time base64 input.txt &gt; encoded.txt\n$ time base64 --decode encoded.txt &gt; decoded.txt\n</code></pre>\n<p>System:</p>\n<ul>\n<li>Ubuntu 22.04</li>\n<li>16GB memory</li>\n<li>OpenJDK 17.0.9</li>\n<li>Intellij 2023.2.5</li>\n</ul>\n<p>Input files consisted of random characters I typed with my keyboard and copied until the specific file size was reached. I also tried out a different Ubuntu notebook with JDK 17 and got the same results.</p>\n<p><strong>EDIT:</strong> Results with buffering:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>File Size</th>\n<th>100 KB</th>\n<th>1 MB</th>\n<th>61 MB</th>\n<th>100 MB</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Java Base64 Encode</td>\n<td>5 ms</td>\n<td>30 ms</td>\n<td>311 ms</td>\n<td>423 ms</td>\n</tr>\n<tr>\n<td>Java Base64 Decode</td>\n<td>12 ms</td>\n<td>46 ms</td>\n<td>1684 ms</td>\n<td>2875 ms</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","database","date","datetime"],"answers":[{"tags":[],"owner":{"account_id":99346,"reputation":11646,"user_id":268396,"display_name":"user268396"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476657695,"creation_date":1476656136,"answer_id":40076060,"question_id":40075780,"body_markdown":"&gt;what can I do with Joda that can&#39;t be done with traditional Java\r\n\r\nIt&#39;s not really about what you can or cannot do with traditional Java in the general case. It&#39;s more about how the library API works to make you write better (more robust and correct) code easier than traditional Java does.\r\n\r\nSo much so that as of Java 8 the Joda API was more or less copied/adopted verbatim with just package names changed and incorporated into the Java 8 SE standard library.\r\n\r\nTherefore if you are using Java 8 you should pick the new API, and if not you should consider that using Joda will at least buy you a smooth path towards upgrading/porting to Java 8 when you are able to.\r\n\r\nA few examples:\r\n\r\n - Consistent API for date and time types.\r\n - Date/time objects are immutable, manipulations return new instances of the type representing the altered value. (Like Java Strings). This makes it easier to reason about reuse of date/time objects.\r\n - By design avoids mixing DST &amp; timezone dependent values/operations with DST &amp; timezone agnostic ones. This makes it a lot easier to write code that works consistently and correctly and doesn&#39;t have corner cases dependent on timezone/locale/date/time-of-day.\r\n - Sane defaults for things like `toString()` so serialising/deserialising can be expected to work correctly with minimal effort.\r\n - Culture/locale dependent corner cases and things you weren&#39;t aware of yet (for example, did you know about the traditional Korean calendar?) which saves you a whole lot of hassle when converting your date times between locales/calendaring systems. Also: a wealth of formatting options.\r\n - The concept of `Instant`s to represent &#39;absolute&#39; time stamps which is useful when working with geographically distributed systems (when the system default clocks/timezones &amp; DST rules may differ) or for interop because it uses UTC.\r\n\r\nEDIT to add:\r\n\r\n&gt;According to some opinions I have read, some people say emphatically that storing `System.currentTimeMillis()` is definitely not the best practice, nevertheless, for some reason they all miss to say WHY it is not recommendable. Am I missing something?\r\n\r\n`System.currentTimeMillis()` has a few downsides. The big drawback is that the type of clock is ill defined. It could be a monotonic clock, it could be clock subject to DST and timezone or it could be a UTC time. It is also not necessarily an accurate clock, it is not actually guaranteed to be accurate down to the millisecond. Just whatever happens to be to hand for something that will work as a semblance of the current time *at* the current time, basically.\r\n\r\nThis means that if you want to use multiple servers to handle incoming requests, for instance, it gets tricky when you have to consider working with the output of `System.currentTimeMillis()` from server `A` in the context of your program running on a different server `B` the next day, say.","title":"Java Best Practice for Date Manipulation/Storage for Geographically Diverse Users","body":"<blockquote>\n  <p>what can I do with Joda that can't be done with traditional Java</p>\n</blockquote>\n\n<p>It's not really about what you can or cannot do with traditional Java in the general case. It's more about how the library API works to make you write better (more robust and correct) code easier than traditional Java does.</p>\n\n<p>So much so that as of Java 8 the Joda API was more or less copied/adopted verbatim with just package names changed and incorporated into the Java 8 SE standard library.</p>\n\n<p>Therefore if you are using Java 8 you should pick the new API, and if not you should consider that using Joda will at least buy you a smooth path towards upgrading/porting to Java 8 when you are able to.</p>\n\n<p>A few examples:</p>\n\n<ul>\n<li>Consistent API for date and time types.</li>\n<li>Date/time objects are immutable, manipulations return new instances of the type representing the altered value. (Like Java Strings). This makes it easier to reason about reuse of date/time objects.</li>\n<li>By design avoids mixing DST &amp; timezone dependent values/operations with DST &amp; timezone agnostic ones. This makes it a lot easier to write code that works consistently and correctly and doesn't have corner cases dependent on timezone/locale/date/time-of-day.</li>\n<li>Sane defaults for things like <code>toString()</code> so serialising/deserialising can be expected to work correctly with minimal effort.</li>\n<li>Culture/locale dependent corner cases and things you weren't aware of yet (for example, did you know about the traditional Korean calendar?) which saves you a whole lot of hassle when converting your date times between locales/calendaring systems. Also: a wealth of formatting options.</li>\n<li>The concept of <code>Instant</code>s to represent 'absolute' time stamps which is useful when working with geographically distributed systems (when the system default clocks/timezones &amp; DST rules may differ) or for interop because it uses UTC.</li>\n</ul>\n\n<p>EDIT to add:</p>\n\n<blockquote>\n  <p>According to some opinions I have read, some people say emphatically that storing <code>System.currentTimeMillis()</code> is definitely not the best practice, nevertheless, for some reason they all miss to say WHY it is not recommendable. Am I missing something?</p>\n</blockquote>\n\n<p><code>System.currentTimeMillis()</code> has a few downsides. The big drawback is that the type of clock is ill defined. It could be a monotonic clock, it could be clock subject to DST and timezone or it could be a UTC time. It is also not necessarily an accurate clock, it is not actually guaranteed to be accurate down to the millisecond. Just whatever happens to be to hand for something that will work as a semblance of the current time <em>at</em> the current time, basically.</p>\n\n<p>This means that if you want to use multiple servers to handle incoming requests, for instance, it gets tricky when you have to consider working with the output of <code>System.currentTimeMillis()</code> from server <code>A</code> in the context of your program running on a different server <code>B</code> the next day, say.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1700011109,"creation_date":1476666664,"answer_id":40077210,"question_id":40075780,"body_markdown":"&gt;I have read all of the other Q/A about Date Manipulation\r\n\r\nNo, you certainly did *not* read them all. \r\n\r\n - You would have learned that both the legacy date-time classes (such as `java.util.Date` &amp; `java.util.Calendar`) and the Joda-Time project are supplanted by the java.time classes (1,890 results for search on &#39;java.time&#39;). \r\n - You would have learned not to track date-time values as a count-from-epoch. Debugging and logging becomes very difficult with bugs going undiscovered as humans cannot decipher the meaning of a long integer as a date-time. And because many granularities of counting (whole seconds, milliseconds, microseconds, nanoseconds, whole days, and more) and at least a [couple dozen of epochs][1] are employed in various software projects create ambiguity about your data with assumptions leading to errors, misinterpretation, and confusion. \r\n - You would have learned to use date-time types in your database to track date-time values. \r\n - You would have learned to work and store date-time values in UTC. Adjust into a time zone only where required by logic or as expected by the user for presentation. âThink global, present local.â\r\n - You would have learned that while a valiant industry-first effort, the legacy date-time classes are poorly designed, confusing, and troublesome. See [What&#39;s wrong with Java Date &amp; Time API?](https://stackoverflow.com/q/1969442/642706) for some discussion. Joda-Time was the first good date-time library in the industry, and inspired its replacement, the java.time classes built into Java 8 and later.\r\n\r\nI&#39;ll be somewhat brief as all of this has been covered *many* times already on Stack Overflow.\r\n\r\nWork in UTC. In Java that means the `Instant` class is commonly used. The [`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) class represents a moment on the timeline in [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) with a resolution of [nanoseconds](https://en.wikipedia.org/wiki/Nanosecond) (up to nine (9) digits of a decimal fraction). \r\n\r\n    Instant instant = Instant.now();\r\n\r\nAny serious database such as Postgres tracks date-time values in UTC. Your JDBC driver handles the detail of converting from database internally-stored data to a Java type. JDBC drivers that comply with [JDBC 4.2][2] and later can directly handle java.time types via `PreparedStatement::setObject ` &amp; `ResultSet::getObject ` methods. \r\n\r\n    myPreparedStatement.setObject( â¦ , instant );\r\n\r\nFor non-compliant drivers, fall back to using java.sql types such as `java.sql.Timestamp` to communicate with database, and convert to/from java.time types via new methods added to the old classes. The internal details of how the database handles date-time values may be quite different than how java.time does. For the most part the JDBC driver hides all the nitty-gritty details from you. But one critical issue is resolution, which you should study in your database. The java.time classes handle date-times with a resolution up to [nanoseconds][3] but your database may not. For example, Postgres uses a resolution of [microseconds][4]. So going back-and-forth means data-loss. You want to use the truncation methods on the java.time classes to match your database.\r\n\r\n    myPreparedStatement.setTimestamp( â¦ , java.sql.Timestamp.from( instant ) );\r\n\r\nSo, no time zone involved. So no âworrying about time-zones while handling database Dateâ.\r\n\r\nWhen you want to see the same moment through the lens of a regionâs [wall-clock time][5], apply a `ZoneId` to get a [`ZonedDateTime`][6].\r\n\r\n    ZoneId z = ZoneId.of( &quot;Asia/Kolkata&quot; );\r\n    ZonedDateTime zdt = instant.atZone( z );\r\n\r\nWhen taking a zoned date-time back to the database, extract an `Instant`.\r\n\r\n    Instant instant = zdt.toInstant();\r\n\r\nBe aware that for any given moment, the date as well as the time-of-day varies around the globe by time zone. So if an exact moment matters, such as when a contract expires, beware of using a date-only value. Either use a date-time value for the exact moment, or store the intended time zone alongside the date-only so the exact moment can be calculated later.\r\n\r\n    LocalDate ld = LocalDate.of( 2016, 1 , 1 );\r\n    // Determine the first moment of 2016-01-01 as it happens in Kolkata.\r\n    ZonedDateTime zdt = ld.atStartOfDay( ZoneId.of( &quot;Asia/Kolkata&quot; ) ); \r\n    Instant instant = zdt.toInstant();  // Adjust to UTC and store. \r\n\r\n\r\n----------\r\n\r\n\r\n# About java.time\r\n\r\nThe [java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html), [`.Calendar`](https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html), &amp; [`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nThe [Joda-Time](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to java.time.\r\n\r\nTo learn more, see the [Oracle Tutorial](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8) and [**SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9) and later\r\n  - Built-in. \r\n  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - The [*ThreeTenABP*](https://github.com/JakeWharton/ThreeTenABP) project adapts ***ThreeTen-Backport*** (mentioned above) for Android specifically.\r\n  - See [*How to useâ¦*](https://stackoverflow.com/q/38922754/642706).\r\n\r\nThe [ThreeTen-Extra](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Epoch_(computing)#Notable_epoch_dates_in_computing\r\n  [2]: https://stackoverflow.com/q/1081234/642706\r\n  [3]: https://en.wikipedia.org/wiki/Nanosecond\r\n  [4]: https://en.wikipedia.org/wiki/Microsecond\r\n  [5]: https://en.wikipedia.org/wiki/Wall-clock_time\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html","title":"Java Best Practice for Date Manipulation/Storage for Geographically Diverse Users","body":"<blockquote>\n<p>I have read all of the other Q/A about Date Manipulation</p>\n</blockquote>\n<p>No, you certainly did <em>not</em> read them all.</p>\n<ul>\n<li>You would have learned that both the legacy date-time classes (such as <code>java.util.Date</code> &amp; <code>java.util.Calendar</code>) and the Joda-Time project are supplanted by the java.time classes (1,890 results for search on 'java.time').</li>\n<li>You would have learned not to track date-time values as a count-from-epoch. Debugging and logging becomes very difficult with bugs going undiscovered as humans cannot decipher the meaning of a long integer as a date-time. And because many granularities of counting (whole seconds, milliseconds, microseconds, nanoseconds, whole days, and more) and at least a <a href=\"https://en.wikipedia.org/wiki/Epoch_(computing)#Notable_epoch_dates_in_computing\" rel=\"nofollow noreferrer\">couple dozen of epochs</a> are employed in various software projects create ambiguity about your data with assumptions leading to errors, misinterpretation, and confusion.</li>\n<li>You would have learned to use date-time types in your database to track date-time values.</li>\n<li>You would have learned to work and store date-time values in UTC. Adjust into a time zone only where required by logic or as expected by the user for presentation. âThink global, present local.â</li>\n<li>You would have learned that while a valiant industry-first effort, the legacy date-time classes are poorly designed, confusing, and troublesome. See <a href=\"https://stackoverflow.com/q/1969442/642706\">What's wrong with Java Date &amp; Time API?</a> for some discussion. Joda-Time was the first good date-time library in the industry, and inspired its replacement, the java.time classes built into Java 8 and later.</li>\n</ul>\n<p>I'll be somewhat brief as all of this has been covered <em>many</em> times already on Stack Overflow.</p>\n<p>Work in UTC. In Java that means the <code>Instant</code> class is commonly used. The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> class represents a moment on the timeline in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> with a resolution of <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"nofollow noreferrer\">nanoseconds</a> (up to nine (9) digits of a decimal fraction).</p>\n<pre><code>Instant instant = Instant.now();\n</code></pre>\n<p>Any serious database such as Postgres tracks date-time values in UTC. Your JDBC driver handles the detail of converting from database internally-stored data to a Java type. JDBC drivers that comply with <a href=\"https://stackoverflow.com/q/1081234/642706\">JDBC 4.2</a> and later can directly handle java.time types via <code>PreparedStatement::setObject </code> &amp; <code>ResultSet::getObject </code> methods.</p>\n<pre><code>myPreparedStatement.setObject( â¦ , instant );\n</code></pre>\n<p>For non-compliant drivers, fall back to using java.sql types such as <code>java.sql.Timestamp</code> to communicate with database, and convert to/from java.time types via new methods added to the old classes. The internal details of how the database handles date-time values may be quite different than how java.time does. For the most part the JDBC driver hides all the nitty-gritty details from you. But one critical issue is resolution, which you should study in your database. The java.time classes handle date-times with a resolution up to <a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"nofollow noreferrer\">nanoseconds</a> but your database may not. For example, Postgres uses a resolution of <a href=\"https://en.wikipedia.org/wiki/Microsecond\" rel=\"nofollow noreferrer\">microseconds</a>. So going back-and-forth means data-loss. You want to use the truncation methods on the java.time classes to match your database.</p>\n<pre><code>myPreparedStatement.setTimestamp( â¦ , java.sql.Timestamp.from( instant ) );\n</code></pre>\n<p>So, no time zone involved. So no âworrying about time-zones while handling database Dateâ.</p>\n<p>When you want to see the same moment through the lens of a regionâs <a href=\"https://en.wikipedia.org/wiki/Wall-clock_time\" rel=\"nofollow noreferrer\">wall-clock time</a>, apply a <code>ZoneId</code> to get a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Asia/Kolkata&quot; );\nZonedDateTime zdt = instant.atZone( z );\n</code></pre>\n<p>When taking a zoned date-time back to the database, extract an <code>Instant</code>.</p>\n<pre><code>Instant instant = zdt.toInstant();\n</code></pre>\n<p>Be aware that for any given moment, the date as well as the time-of-day varies around the globe by time zone. So if an exact moment matters, such as when a contract expires, beware of using a date-only value. Either use a date-time value for the exact moment, or store the intended time zone alongside the date-only so the exact moment can be calculated later.</p>\n<pre><code>LocalDate ld = LocalDate.of( 2016, 1 , 1 );\n// Determine the first moment of 2016-01-01 as it happens in Kolkata.\nZonedDateTime zdt = ld.atStartOfDay( ZoneId.of( &quot;Asia/Kolkata&quot; ) ); \nInstant instant = zdt.toInstant();  // Adjust to UTC and store. \n</code></pre>\n<hr />\n<h1>About java.time</h1>\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>.Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>java.text.SimpleDateFormat</code></a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance mode</a>, advises migration to java.time.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\">Oracle Tutorial</a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\"><strong>Java SE 8</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\"><strong>SE 9</strong></a> and later</li>\n<li>Built-in.</li>\n<li>Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"nofollow noreferrer\"><strong>SE 7</strong></a></li>\n<li>Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"nofollow noreferrer\"><strong>Android</strong></a></li>\n<li>The <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><em>ThreeTenABP</em></a> project adapts <em><strong>ThreeTen-Backport</strong></em> (mentioned above) for Android specifically.</li>\n<li>See <a href=\"https://stackoverflow.com/q/38922754/642706\"><em>How to useâ¦</em></a>.</li>\n</ul>\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\">ThreeTen-Extra</a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"nofollow noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"nofollow noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"nofollow noreferrer\">more</a>.</p>\n"}],"owner":{"account_id":463465,"reputation":4099,"user_id":866390,"accept_rate":51,"display_name":"Joe Almore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12489,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1700011109,"creation_date":1476653947,"question_id":40075780,"body_markdown":"I have read all of the other Q/A about Date Manipulation, but none of them seems to deliver a satisfactory answer to my concern.\r\n\r\nI have a project with geographically diverse users which uses `Date` in some of its classes and data. The thing is that I am looking for an efficient way to manipulate the Dates for the different users in their respective timezone, most of the answers suggest using [Joda][1] library for `Date` manipulation, which quite don&#39;t understand yet because I still have not found any operation you cannot do with traditional Java, so if someone can explain what can I do with [Joda][1] that can&#39;t be done with traditional Java, then I may consider using it.\r\n\r\nI finally came to the approach of using `System.currentTimeMillis()` to save my dates into the database (any database). This would avoid me to worry about what timezone is using the database to store the dates. If I want to query the database for an specific date or range of dates, I would perform the queries using the `long` value of the `Date` I want to query:\r\n\r\n    SELECT * FROM table1 WHERE date1&gt;=1476653369000\r\n\r\nAnd when retrieving a `ResultSet` I would then format the `long` value retrieved from database to a readable `Date` using the timezone of the user requesting the data.\r\n\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.setTimeInMillis(resultSet.getLong(1));\r\n    cal.setTimeZone(TimeZone.getTimeZone(&quot;Asia/Calcutta&quot;));\r\n    Date myDate = cal.getTime();\r\n\r\nAccording to some opinions I have read, some people say emphatically that storing `System.currentTimeMillis()` is definitely not the best practice, nevertheless, for some reason they all miss to say **WHY** it is not recommendable. Am I missing something? Does this cause a performance issue for the conversions `Long-&gt;Date`/`Date-&gt;Long`? Is there any use case that cannot be accomplished when using `Long` instead `Date` in database? Can someone post a rationale explanation about this?\r\n\r\nIn the other hand, assuming that I keep using `Date` values to store dates in database, is there a way to avoid worrying about time-zones while handling database `Date`?\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: http://www.joda.org/joda-time/","title":"Java Best Practice for Date Manipulation/Storage for Geographically Diverse Users","body":"<p>I have read all of the other Q/A about Date Manipulation, but none of them seems to deliver a satisfactory answer to my concern.</p>\n\n<p>I have a project with geographically diverse users which uses <code>Date</code> in some of its classes and data. The thing is that I am looking for an efficient way to manipulate the Dates for the different users in their respective timezone, most of the answers suggest using <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda</a> library for <code>Date</code> manipulation, which quite don't understand yet because I still have not found any operation you cannot do with traditional Java, so if someone can explain what can I do with <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda</a> that can't be done with traditional Java, then I may consider using it.</p>\n\n<p>I finally came to the approach of using <code>System.currentTimeMillis()</code> to save my dates into the database (any database). This would avoid me to worry about what timezone is using the database to store the dates. If I want to query the database for an specific date or range of dates, I would perform the queries using the <code>long</code> value of the <code>Date</code> I want to query:</p>\n\n<pre><code>SELECT * FROM table1 WHERE date1&gt;=1476653369000\n</code></pre>\n\n<p>And when retrieving a <code>ResultSet</code> I would then format the <code>long</code> value retrieved from database to a readable <code>Date</code> using the timezone of the user requesting the data.</p>\n\n<pre><code>Calendar cal = Calendar.getInstance();\ncal.setTimeInMillis(resultSet.getLong(1));\ncal.setTimeZone(TimeZone.getTimeZone(\"Asia/Calcutta\"));\nDate myDate = cal.getTime();\n</code></pre>\n\n<p>According to some opinions I have read, some people say emphatically that storing <code>System.currentTimeMillis()</code> is definitely not the best practice, nevertheless, for some reason they all miss to say <strong>WHY</strong> it is not recommendable. Am I missing something? Does this cause a performance issue for the conversions <code>Long-&gt;Date</code>/<code>Date-&gt;Long</code>? Is there any use case that cannot be accomplished when using <code>Long</code> instead <code>Date</code> in database? Can someone post a rationale explanation about this?</p>\n\n<p>In the other hand, assuming that I keep using <code>Date</code> values to store dates in database, is there a way to avoid worrying about time-zones while handling database <code>Date</code>?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","string","date","formatting","date-format"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":182,"creation_date":1295761724,"post_id":4772425,"comment_id":5282532,"body_markdown":"yyyyy is not the same as yyyy.  :)","body":"yyyyy is not the same as yyyy.  :)"},{"owner":{"account_id":89657,"reputation":18436,"user_id":247221,"accept_rate":75,"display_name":"PaweÅ Dyda"},"score":2,"creation_date":1295781409,"post_id":4772425,"comment_id":5283944,"body_markdown":"A boomerang question. What is your use case? Because it is possible that you should use built-in patterns (DateFormat.getDateTimeInstance()).","body":"A boomerang question. What is your use case? Because it is possible that you should use built-in patterns (DateFormat.getDateTimeInstance())."},{"owner":{"account_id":3766912,"reputation":3114,"user_id":3130202,"display_name":"Mike"},"score":13,"creation_date":1434400197,"post_id":4772425,"comment_id":49752281,"body_markdown":"The month is represented with MM in the format string, not with mm like in the examples above. mm means minutes.","body":"The month is represented with MM in the format string, not with mm like in the examples above. mm means minutes."},{"owner":{"account_id":3130595,"reputation":615,"user_id":2648478,"accept_rate":67,"display_name":"Pavlo Zvarych"},"score":3,"creation_date":1474974807,"post_id":4772425,"comment_id":66743649,"body_markdown":"I changed yyyy-mm-dd to yyyy-MM-dd, cause initial version didn&#39;t work","body":"I changed yyyy-mm-dd to yyyy-MM-dd, cause initial version didn&#39;t work"},{"owner":{"account_id":2016836,"reputation":155,"user_id":3521337,"display_name":"Fuad Efendi"},"score":2,"creation_date":1616453319,"post_id":4772425,"comment_id":118002983,"body_markdown":"&quot;mm&quot; is number of minutes :)","body":"&quot;mm&quot; is number of minutes :)"},{"owner":{"account_id":4409809,"reputation":143,"user_id":3593090,"display_name":"Guilherme"},"score":0,"creation_date":1648130387,"post_id":4772425,"comment_id":126550376,"body_markdown":"&quot;yyyyy-MM-dd hh:mm:ss&quot;","body":"&quot;yyyyy-MM-dd hh:mm:ss&quot;"}],"answers":[{"comments":[{"owner":{"account_id":698878,"reputation":5219,"user_id":586154,"display_name":"amit4444"},"score":0,"creation_date":1295759667,"post_id":4772431,"comment_id":5282412,"body_markdown":"import java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\n\npublic class formateDate {\n\n\t/**\n\t * @param args\n\t * @throws ParseException \n\t */\n\tpublic static void main(String[] args) throws ParseException {\n\t\t// TODO Auto-generated method stub\n\n\t\tString date_s=&quot; 2011-01-18 00:00:00.0&quot;;\n\t\tSimpleDateFormat dt= new SimpleDateFormat(&quot;yyyyy-mm-dd hh:mm:ss&quot;);\n\t\tDate date=dt.parse(date_s);\n\t\tSimpleDateFormat dt1= new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);\n\t\t    \n\t\tSystem.out.println(  dt1.format(date));\n\t}\n\n}   i want out put should be &quot;2011-01-18&quot; but out put is 02011-00-1","body":"import java.text.ParseException; import java.text.SimpleDateFormat; import java.util.Date;   public class formateDate {  \t/** \t * @param args \t * @throws ParseException  \t */ \tpublic static void main(String[] args) throws ParseException { \t\t// TODO Auto-generated method stub  \t\tString date_s=&quot; 2011-01-18 00:00:00.0&quot;; \t\tSimpleDateFormat dt= new SimpleDateFormat(&quot;yyyyy-mm-dd hh:mm:ss&quot;); \t\tDate date=dt.parse(date_s); \t\tSimpleDateFormat dt1= new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;); \t\t     \t\tSystem.out.println(  dt1.format(date)); \t}  }   i want out put should be &quot;2011-01-18&quot; but out put is 02011-00-1"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1295759747,"post_id":4772431,"comment_id":5282419,"body_markdown":"Post any code you have as an addition to the original question (indented four spaces).  This way it will retain its formatting and we can then read it.","body":"Post any code you have as an addition to the original question (indented four spaces).  This way it will retain its formatting and we can then read it."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1295759974,"post_id":4772431,"comment_id":5282430,"body_markdown":"See edit to my answer above.  You&#39;re using &quot;mm&quot; in your format String where you should be using &quot;MM&quot;","body":"See edit to my answer above.  You&#39;re using &quot;mm&quot; in your format String where you should be using &quot;MM&quot;"},{"owner":{"account_id":108913,"reputation":18431,"user_id":288875,"accept_rate":50,"display_name":"Andre Holzner"},"score":0,"creation_date":1460028984,"post_id":4772431,"comment_id":60560125,"body_markdown":"`hh` will give you the hour in the range 1-12, you&#39;ll need to use `a` in addition to print/parse `AM` or `PM`. To print/parse the hour in the range 0-23, use `HH`.","body":"<code>hh</code> will give you the hour in the range 1-12, you&#39;ll need to use <code>a</code> in addition to print/parse <code>AM</code> or <code>PM</code>. To print/parse the hour in the range 0-23, use <code>HH</code>."}],"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":4,"down_vote_count":1,"up_vote_count":118,"is_accepted":false,"score":117,"last_activity_date":1295761762,"creation_date":1295759538,"answer_id":4772431,"question_id":4772425,"body_markdown":"The answer is of course to create a SimpleDateFormat object and use it to parse Strings to Date and to format Dates to Strings.  If you&#39;ve tried SimpleDateFormat and it didn&#39;t work, then please show your code and any errors you may receive.\r\n\r\nAddendum:  &quot;mm&quot; in the format String is not the same as &quot;MM&quot;.  Use MM for months and mm for minutes. Also, yyyyy is not the same as yyyy.  e.g.,:\r\n\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    \r\n    public class FormateDate {\r\n    \r\n        public static void main(String[] args) throws ParseException {\r\n            String date_s = &quot;2011-01-18 00:00:00.0&quot;;\r\n            \r\n            // *** note that it&#39;s &quot;yyyy-MM-dd hh:mm:ss&quot; not &quot;yyyy-mm-dd hh:mm:ss&quot;  \r\n            SimpleDateFormat dt = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);\r\n            Date date = dt.parse(date_s);\r\n            \r\n            // *** same for the format String below\r\n            SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n            System.out.println(dt1.format(date));\r\n        }\r\n    \r\n    }","title":"Change date format in a Java string","body":"<p>The answer is of course to create a SimpleDateFormat object and use it to parse Strings to Date and to format Dates to Strings.  If you've tried SimpleDateFormat and it didn't work, then please show your code and any errors you may receive.</p>\n\n<p>Addendum:  \"mm\" in the format String is not the same as \"MM\".  Use MM for months and mm for minutes. Also, yyyyy is not the same as yyyy.  e.g.,:</p>\n\n<pre><code>import java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\npublic class FormateDate {\n\n    public static void main(String[] args) throws ParseException {\n        String date_s = \"2011-01-18 00:00:00.0\";\n\n        // *** note that it's \"yyyy-MM-dd hh:mm:ss\" not \"yyyy-mm-dd hh:mm:ss\"  \n        SimpleDateFormat dt = new SimpleDateFormat(\"yyyy-MM-dd hh:mm:ss\");\n        Date date = dt.parse(date_s);\n\n        // *** same for the format String below\n        SimpleDateFormat dt1 = new SimpleDateFormat(\"yyyy-MM-dd\");\n        System.out.println(dt1.format(date));\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1295760443,"post_id":4772449,"comment_id":5282459,"body_markdown":"`DD` stands for &quot;day in year&quot;, not &quot;day in month&quot;. `hh` stands for &quot;hour in am/pm (1-12)&quot;, not &quot;hour in day (0-23)&quot;.","body":"<code>DD</code> stands for &quot;day in year&quot;, not &quot;day in month&quot;. <code>hh</code> stands for &quot;hour in am/pm (1-12)&quot;, not &quot;hour in day (0-23)&quot;."}],"tags":[],"owner":{"account_id":286728,"reputation":963,"user_id":586148,"display_name":"Bryan"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1295760549,"creation_date":1295759866,"answer_id":4772449,"question_id":4772425,"body_markdown":"[edited to include BalusC&#39;s corrections]\r\nThe [SimpleDateFormat][1] class should do the trick:\r\n\r\n    String pattern = &quot;yyyy-MM-dd HH:mm:ss.S&quot;;\r\n    SimpleDateFormat format = new SimpleDateFormat(pattern);\r\n    try {\r\n      Date date = format.parse(&quot;2011-01-18 00:00:00.0&quot;);\r\n      System.out.println(date);\r\n    } catch (ParseException e) {\r\n      e.printStackTrace();\r\n    }\r\n\r\n\r\n  [1]: http://www.java2s.com/Tutorial/Java/0040__Data-Type/SimpleDateFormat.htm","title":"Change date format in a Java string","body":"<p>[edited to include BalusC's corrections]\nThe <a href=\"http://www.java2s.com/Tutorial/Java/0040__Data-Type/SimpleDateFormat.htm\" rel=\"noreferrer\">SimpleDateFormat</a> class should do the trick:</p>\n\n<pre><code>String pattern = \"yyyy-MM-dd HH:mm:ss.S\";\nSimpleDateFormat format = new SimpleDateFormat(pattern);\ntry {\n  Date date = format.parse(\"2011-01-18 00:00:00.0\");\n  System.out.println(date);\n} catch (ParseException e) {\n  e.printStackTrace();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":477471,"reputation":4682,"user_id":888990,"accept_rate":68,"display_name":"crmepham"},"score":0,"creation_date":1401963638,"post_id":4772461,"comment_id":37094061,"body_markdown":"What if you want the date to look like &quot;Monday 1st September 2012&quot;?","body":"What if you want the date to look like &quot;Monday 1st September 2012&quot;?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":11,"creation_date":1401967197,"post_id":4772461,"comment_id":37096216,"body_markdown":"@crm: Just click the javadoc link, figure the necessary pattern characters there and alter the pattern accordingly.","body":"@crm: Just click the javadoc link, figure the necessary pattern characters there and alter the pattern accordingly."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1570684037,"post_id":4772461,"comment_id":102991814,"body_markdown":"When you&#39;re not on Java 8 yet, consider using the backport, [ThreeTen Backport](https://www.threeten.org/threetenbp/), and then the first examples from the answer. Or for Android below API level 26, [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP).","body":"When you&#39;re not on Java 8 yet, consider using the backport, <a href=\"https://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport</a>, and then the first examples from the answer. Or for Android below API level 26, <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":3,"down_vote_count":0,"up_vote_count":547,"is_accepted":false,"score":547,"last_activity_date":1671179077,"creation_date":1295760056,"answer_id":4772461,"question_id":4772425,"body_markdown":"Use [`LocalDateTime#parse()`][1] (or [`ZonedDateTime#parse()`][2] if the string happens to contain a time zone part) to parse a `String` in a certain pattern into a `LocalDateTime`.\r\n\r\n\tString oldstring = &quot;2011-01-18 00:00:00.0&quot;;\r\n\tLocalDateTime datetime = LocalDateTime.parse(oldstring, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;));\r\n\r\nThen use [`LocalDateTime#format()`][3] (or [`ZonedDateTime#format()`][4]) to format a `LocalDateTime` into a `String` in a certain pattern.\r\n\r\n\tString newstring = datetime.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;));\r\n\tSystem.out.println(newstring); // 2011-01-18\r\n\r\n\r\n\r\n**Or**, when you&#39;re not on Java 8 yet, use [`SimpleDateFormat#parse()`][5] to parse a `String` in a certain pattern into a `Date`.\r\n\r\n    String oldstring = &quot;2011-01-18 00:00:00.0&quot;;\r\n    Date date = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;).parse(oldstring);\r\n\r\nThen use [`SimpleDateFormat#format()`][6] to format a `Date` into a `String` in a certain pattern.\r\n\r\n    String newstring = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(date);\r\n    System.out.println(newstring); // 2011-01-18\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/4216745/java-string-to-date-conversion/\r\n\r\n\r\n---\r\n\r\n**Update**: as per your failed attempt which you added to the question after this answer was posted; the patterns are **case sensitive**. Carefully read the [`java.text.SimpleDateFormat` javadoc][7] what the individual parts stands for. So stands for example `M` for months and `m` for minutes. Also, years exist of four digits `yyyy`, not five `yyyyy`. Look closer at the code snippets I posted here above.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html#parse(java.lang.CharSequence,java.time.format.DateTimeFormatter)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html#parse(java.lang.CharSequence,java.time.format.DateTimeFormatter)\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html#format(java.time.format.DateTimeFormatter)\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html#format(java.time.format.DateTimeFormatter)\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html#parse(java.lang.String)\r\n  [6]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html#format(java.util.Date)\r\n  [7]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/SimpleDateFormat.html","title":"Change date format in a Java string","body":"<p>Use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html#parse(java.lang.CharSequence,java.time.format.DateTimeFormatter)\" rel=\"noreferrer\"><code>LocalDateTime#parse()</code></a> (or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html#parse(java.lang.CharSequence,java.time.format.DateTimeFormatter)\" rel=\"noreferrer\"><code>ZonedDateTime#parse()</code></a> if the string happens to contain a time zone part) to parse a <code>String</code> in a certain pattern into a <code>LocalDateTime</code>.</p>\n<pre><code>String oldstring = &quot;2011-01-18 00:00:00.0&quot;;\nLocalDateTime datetime = LocalDateTime.parse(oldstring, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;));\n</code></pre>\n<p>Then use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html#format(java.time.format.DateTimeFormatter)\" rel=\"noreferrer\"><code>LocalDateTime#format()</code></a> (or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html#format(java.time.format.DateTimeFormatter)\" rel=\"noreferrer\"><code>ZonedDateTime#format()</code></a>) to format a <code>LocalDateTime</code> into a <code>String</code> in a certain pattern.</p>\n<pre><code>String newstring = datetime.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;));\nSystem.out.println(newstring); // 2011-01-18\n</code></pre>\n<p><strong>Or</strong>, when you're not on Java 8 yet, use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html#parse(java.lang.String)\" rel=\"noreferrer\"><code>SimpleDateFormat#parse()</code></a> to parse a <code>String</code> in a certain pattern into a <code>Date</code>.</p>\n<pre><code>String oldstring = &quot;2011-01-18 00:00:00.0&quot;;\nDate date = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;).parse(oldstring);\n</code></pre>\n<p>Then use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html#format(java.util.Date)\" rel=\"noreferrer\"><code>SimpleDateFormat#format()</code></a> to format a <code>Date</code> into a <code>String</code> in a certain pattern.</p>\n<pre><code>String newstring = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(date);\nSystem.out.println(newstring); // 2011-01-18\n</code></pre>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/4216745/java-string-to-date-conversion/\">Java string to date conversion</a></li>\n</ul>\n<hr />\n<p><strong>Update</strong>: as per your failed attempt which you added to the question after this answer was posted; the patterns are <strong>case sensitive</strong>. Carefully read the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>java.text.SimpleDateFormat</code> javadoc</a> what the individual parts stands for. So stands for example <code>M</code> for months and <code>m</code> for minutes. Also, years exist of four digits <code>yyyy</code>, not five <code>yyyyy</code>. Look closer at the code snippets I posted here above.</p>\n"},{"tags":[],"owner":{"account_id":1518848,"reputation":226,"user_id":1419141,"display_name":"Eren"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1338044145,"creation_date":1338044145,"answer_id":10767247,"question_id":4772425,"body_markdown":"       String str = &quot;2000-12-12&quot;;\r\n       Date dt = null;\r\n       SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n      \r\n        try \r\n        {\r\n             dt = formatter.parse(str);\r\n        }\r\n        catch (Exception e)\r\n        {\r\n        }\r\n        \r\n        JOptionPane.showMessageDialog(null, formatter.format(dt));","title":"Change date format in a Java string","body":"<pre><code>   String str = \"2000-12-12\";\n   Date dt = null;\n   SimpleDateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd\");\n\n    try \n    {\n         dt = formatter.parse(str);\n    }\n    catch (Exception e)\n    {\n    }\n\n    JOptionPane.showMessageDialog(null, formatter.format(dt));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3110815,"reputation":41,"user_id":2632575,"display_name":"user2632575"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1375158587,"creation_date":1375157494,"answer_id":17938162,"question_id":4772425,"body_markdown":"    private SimpleDateFormat dataFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n\r\n    @Override\r\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n        if(value instanceof Date) {\r\n            value = dataFormat.format(value);\r\n        }\r\n        return super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n    };","title":"Change date format in a Java string","body":"<pre><code>private SimpleDateFormat dataFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\n\n@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n    if(value instanceof Date) {\n        value = dataFormat.format(value);\n    }\n    return super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n};\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1535373331,"post_id":18953213,"comment_id":91029381,"body_markdown":"Not exactly. You need the correct case too (no matter if you use the modern `DateTimeFormatter` or cling with the outdated `SimpleDateFormat`).","body":"Not exactly. You need the correct case too (no matter if you use the modern <code>DateTimeFormatter</code> or cling with the outdated <code>SimpleDateFormat</code>)."}],"tags":[],"owner":{"account_id":2471831,"reputation":1843,"user_id":2153495,"display_name":"Pankaj Sharma"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1592841675,"creation_date":1379918752,"answer_id":18953213,"question_id":4772425,"body_markdown":"remove one y form the format provide to:\r\n\r\n```\r\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);\r\n``` \r\n\r\nIt should be:\r\n\r\n```\r\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);\r\n```","title":"Change date format in a Java string","body":"<p>remove one y form the format provide to:</p>\n<pre><code>SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);\n</code></pre>\n<p>It should be:</p>\n<pre><code>SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3265680,"reputation":506,"user_id":2750226,"accept_rate":0,"display_name":"Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1381568898,"creation_date":1381568898,"answer_id":19332502,"question_id":4772425,"body_markdown":"You can also use substring()\r\n\r\n    String date_s = &quot;2011-01-18 00:00:00.0&quot;;\r\n    date_s.substring(0,10);\r\n\r\nIf you want a space in front of the date, use\r\n\r\n    String date_s = &quot; 2011-01-18 00:00:00.0&quot;;\r\n    date_s.substring(1,11);\r\n","title":"Change date format in a Java string","body":"<p>You can also use substring()</p>\n\n<pre><code>String date_s = \"2011-01-18 00:00:00.0\";\ndate_s.substring(0,10);\n</code></pre>\n\n<p>If you want a space in front of the date, use</p>\n\n<pre><code>String date_s = \" 2011-01-18 00:00:00.0\";\ndate_s.substring(1,11);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1385789252,"creation_date":1385788047,"answer_id":20296770,"question_id":4772425,"body_markdown":"Other answers are correct, basically you had the wrong number of &quot;y&quot; characters in your pattern.\r\n\r\nTime Zone\r\n--\r\n\r\nOne more problem thoughâ¦ You did not address time zones. If you intended [UTC][1], then you should have said so. If not, the answers are not complete. If all you want is the date portion without the time, then no issue. But if you do further work that may involve time, then you should be specifying a time zone.\r\n\r\nJoda-Time\r\n--\r\n\r\nHere is the same kind of code but using the third-party open-source [Joda-Time][2] 2.3 library\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    // &#169; 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.\r\n\r\n    String date_s = &quot;2011-01-18 00:00:00.0&quot;;\r\n\r\n    org.joda.time.format.DateTimeFormatter formatter = org.joda.time.format.DateTimeFormat.forPattern( &quot;yyyy-MM-dd&#39; &#39;HH:mm:ss.SSS&quot; );\r\n    // By the way, if your date-time string conformed strictly to ISO 8601 including a &#39;T&#39; rather than a SPACE &#39; &#39;, you could\r\n    // use a formatter built into Joda-Time rather than specify your own: ISODateTimeFormat.dateHourMinuteSecondFraction().\r\n    // Like this:\r\n    //org.joda.time.DateTime dateTimeInUTC = org.joda.time.format.ISODateTimeFormat.dateHourMinuteSecondFraction().withZoneUTC().parseDateTime( date_s );\r\n\r\n    // Assuming the date-time string was meant to be in UTC (no time zone offset).\r\n    org.joda.time.DateTime dateTimeInUTC = formatter.withZoneUTC().parseDateTime( date_s );\r\n    System.out.println( &quot;dateTimeInUTC: &quot; + dateTimeInUTC );\r\n    System.out.println( &quot;dateTimeInUTC (date only): &quot; + org.joda.time.format.ISODateTimeFormat.date().print( dateTimeInUTC ) );\r\n    System.out.println( &quot;&quot; ); // blank line.\r\n\r\n    // Assuming the date-time string was meant to be in Kolkata time zone (formerly known as Calcutta). Offset is +5:30 from UTC (note the half-hour).\r\n    org.joda.time.DateTimeZone kolkataTimeZone = org.joda.time.DateTimeZone.forID( &quot;Asia/Kolkata&quot; );\r\n    org.joda.time.DateTime dateTimeInKolkata = formatter.withZone( kolkataTimeZone ).parseDateTime( date_s );\r\n    System.out.println( &quot;dateTimeInKolkata: &quot; + dateTimeInKolkata );\r\n    System.out.println( &quot;dateTimeInKolkata (date only): &quot; + org.joda.time.format.ISODateTimeFormat.date().print( dateTimeInKolkata ) );\r\n    // This date-time in Kolkata is a different point in the time line of the Universe than the dateTimeInUTC instance created above. The date is even different.\r\n    System.out.println( &quot;dateTimeInKolkata adjusted to UTC: &quot; + dateTimeInKolkata.toDateTime( org.joda.time.DateTimeZone.UTC ) );\r\n\r\nWhen runâ¦\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    dateTimeInUTC: 2011-01-18T00:00:00.000Z\r\n    dateTimeInUTC (date only): 2011-01-18\r\n\r\n    dateTimeInKolkata: 2011-01-18T00:00:00.000+05:30\r\n    dateTimeInKolkata (date only): 2011-01-18\r\n    dateTimeInKolkata adjusted to UTC: 2011-01-17T18:30:00.000Z\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [2]: http://www.joda.org/joda-time/","title":"Change date format in a Java string","body":"<p>Other answers are correct, basically you had the wrong number of \"y\" characters in your pattern.</p>\n\n<h2>Time Zone</h2>\n\n<p>One more problem thoughâ¦ You did not address time zones. If you intended <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a>, then you should have said so. If not, the answers are not complete. If all you want is the date portion without the time, then no issue. But if you do further work that may involve time, then you should be specifying a time zone.</p>\n\n<h2>Joda-Time</h2>\n\n<p>Here is the same kind of code but using the third-party open-source <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> 2.3 library</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Â© 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.\n\nString date_s = \"2011-01-18 00:00:00.0\";\n\norg.joda.time.format.DateTimeFormatter formatter = org.joda.time.format.DateTimeFormat.forPattern( \"yyyy-MM-dd' 'HH:mm:ss.SSS\" );\n// By the way, if your date-time string conformed strictly to ISO 8601 including a 'T' rather than a SPACE ' ', you could\n// use a formatter built into Joda-Time rather than specify your own: ISODateTimeFormat.dateHourMinuteSecondFraction().\n// Like this:\n//org.joda.time.DateTime dateTimeInUTC = org.joda.time.format.ISODateTimeFormat.dateHourMinuteSecondFraction().withZoneUTC().parseDateTime( date_s );\n\n// Assuming the date-time string was meant to be in UTC (no time zone offset).\norg.joda.time.DateTime dateTimeInUTC = formatter.withZoneUTC().parseDateTime( date_s );\nSystem.out.println( \"dateTimeInUTC: \" + dateTimeInUTC );\nSystem.out.println( \"dateTimeInUTC (date only): \" + org.joda.time.format.ISODateTimeFormat.date().print( dateTimeInUTC ) );\nSystem.out.println( \"\" ); // blank line.\n\n// Assuming the date-time string was meant to be in Kolkata time zone (formerly known as Calcutta). Offset is +5:30 from UTC (note the half-hour).\norg.joda.time.DateTimeZone kolkataTimeZone = org.joda.time.DateTimeZone.forID( \"Asia/Kolkata\" );\norg.joda.time.DateTime dateTimeInKolkata = formatter.withZone( kolkataTimeZone ).parseDateTime( date_s );\nSystem.out.println( \"dateTimeInKolkata: \" + dateTimeInKolkata );\nSystem.out.println( \"dateTimeInKolkata (date only): \" + org.joda.time.format.ISODateTimeFormat.date().print( dateTimeInKolkata ) );\n// This date-time in Kolkata is a different point in the time line of the Universe than the dateTimeInUTC instance created above. The date is even different.\nSystem.out.println( \"dateTimeInKolkata adjusted to UTC: \" + dateTimeInKolkata.toDateTime( org.joda.time.DateTimeZone.UTC ) );\n</code></pre>\n\n<p>When runâ¦</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>dateTimeInUTC: 2011-01-18T00:00:00.000Z\ndateTimeInUTC (date only): 2011-01-18\n\ndateTimeInKolkata: 2011-01-18T00:00:00.000+05:30\ndateTimeInKolkata (date only): 2011-01-18\ndateTimeInKolkata adjusted to UTC: 2011-01-17T18:30:00.000Z\n</code></pre>\n"},{"tags":[],"owner":{"account_id":967990,"reputation":8481,"user_id":991065,"display_name":"Fathah Rehman P"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1700011087,"creation_date":1389062474,"answer_id":20963021,"question_id":4772425,"body_markdown":"```java\r\ntry\r\n{\r\n\tString date_s = &quot;2011-01-18 00:00:00.0&quot;;\r\n\tSimpleDateFormat simpledateformat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;);\r\n\tDate tempDate=simpledateformat.parse(date_s);\r\n\tSimpleDateFormat outputDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);           \r\n\tSystem.out.println(&quot;Output date is = &quot;+outputDateFormat.format(tempDate));\r\n} catch (ParseException ex) \r\n{\r\n\tSystem.out.println(&quot;Parse Exception&quot;);\r\n}\r\n```","title":"Change date format in a Java string","body":"<pre class=\"lang-java prettyprint-override\"><code>try\n{\n    String date_s = &quot;2011-01-18 00:00:00.0&quot;;\n    SimpleDateFormat simpledateformat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;);\n    Date tempDate=simpledateformat.parse(date_s);\n    SimpleDateFormat outputDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);           \n    System.out.println(&quot;Output date is = &quot;+outputDateFormat.format(tempDate));\n} catch (ParseException ex) \n{\n    System.out.println(&quot;Parse Exception&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111656,"user_id":288671,"display_name":"Vitalii Fedorenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1410541797,"creation_date":1398008577,"answer_id":23184340,"question_id":4772425,"body_markdown":"Using the `java.time` package in Java 8 and later:\r\n\r\n    String date = &quot;2011-01-18 00:00:00.0&quot;;\r\n    TemporalAccessor temporal = DateTimeFormatter\r\n        .ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;)\r\n        .parse(date); // use parse(date, LocalDateTime::from) to get LocalDateTime\r\n    String output = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;).format(temporal);","title":"Change date format in a Java string","body":"<p>Using the <code>java.time</code> package in Java 8 and later:</p>\n\n<pre><code>String date = \"2011-01-18 00:00:00.0\";\nTemporalAccessor temporal = DateTimeFormatter\n    .ofPattern(\"yyyy-MM-dd HH:mm:ss.S\")\n    .parse(date); // use parse(date, LocalDateTime::from) to get LocalDateTime\nString output = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\").format(temporal);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1403764626,"post_id":23580430,"comment_id":37786659,"body_markdown":"Why not use this? Because (a) it ignores the issue of time zone. Determining the date depends on the time zone. This code depends on the JVM&#39;s default time zone. So, results may vary inadvertently. And (b) because the java.util.Date and SimpleDateFormat classes are notoriously troublesome and should be avoided.","body":"Why not use this? Because (a) it ignores the issue of time zone. Determining the date depends on the time zone. This code depends on the JVM&#39;s default time zone. So, results may vary inadvertently. And (b) because the java.util.Date and SimpleDateFormat classes are notoriously troublesome and should be avoided."},{"owner":{"display_name":"user3402040"},"score":2,"creation_date":1517314658,"post_id":23580430,"comment_id":84037028,"body_markdown":"always return strin,  Date requiredDate = df.format(new Date());","body":"always return strin,  Date requiredDate = df.format(new Date());"}],"tags":[],"owner":{"account_id":972820,"reputation":930,"user_id":994984,"accept_rate":69,"display_name":"89n3ur0n"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1592841694,"creation_date":1399721060,"answer_id":23580430,"question_id":4772425,"body_markdown":"Why not simply use this\r\n\r\n    Date convertToDate(String receivedDate) throws ParseException{\r\n    \t\tSimpleDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\r\n    \t\tDate date = formatter.parse(receivedDate);\r\n    \t\treturn date;\r\n    \t}\r\n\r\nAlso, this is the other way :\r\n\r\n    DateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    String requiredDate = df.format(new Date()).toString();\r\nor \r\n\r\n    Date requiredDate = df.format(new Date());","title":"Change date format in a Java string","body":"<p>Why not simply use this</p>\n<pre><code>Date convertToDate(String receivedDate) throws ParseException{\n        SimpleDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\n        Date date = formatter.parse(receivedDate);\n        return date;\n    }\n</code></pre>\n<p>Also, this is the other way :</p>\n<pre><code>DateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\nString requiredDate = df.format(new Date()).toString();\n</code></pre>\n<p>or</p>\n<pre><code>Date requiredDate = df.format(new Date());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10257138,"reputation":416,"user_id":7569674,"display_name":"Ivan Frolov"},"score":0,"creation_date":1607093911,"post_id":23874519,"comment_id":115172031,"body_markdown":"this code returns error &quot;Uncaught SyntaxError: Unexpected identifier&quot;","body":"this code returns error &quot;Uncaught SyntaxError: Unexpected identifier&quot;"},{"owner":{"account_id":4514344,"reputation":31626,"user_id":3669624,"accept_rate":100,"display_name":"cÐ½Ådk"},"score":0,"creation_date":1607261036,"post_id":23874519,"comment_id":115211104,"body_markdown":"@IvanFrolov may be you have a missing import, in which line you get the error?","body":"@IvanFrolov may be you have a missing import, in which line you get the error?"},{"owner":{"account_id":10257138,"reputation":416,"user_id":7569674,"display_name":"Ivan Frolov"},"score":1,"creation_date":1607419888,"post_id":23874519,"comment_id":115260033,"body_markdown":"oh, sorry - did not noticed that it&#39;s solution for Java, I&#39;ve searched solution for javascript))) (btw - already found).\nThanks!","body":"oh, sorry - did not noticed that it&#39;s solution for Java, I&#39;ve searched solution for javascript))) (btw - already found). Thanks!"},{"owner":{"account_id":4514344,"reputation":31626,"user_id":3669624,"accept_rate":100,"display_name":"cÐ½Ådk"},"score":1,"creation_date":1607423412,"post_id":23874519,"comment_id":115261491,"body_markdown":"Ah okay, it&#39;s obvious now.","body":"Ah okay, it&#39;s obvious now."}],"tags":[],"owner":{"account_id":4514344,"reputation":31626,"user_id":3669624,"accept_rate":100,"display_name":"cÐ½Ådk"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1401122458,"creation_date":1401122458,"answer_id":23874519,"question_id":4772425,"body_markdown":"You can just use:\r\n\r\n    Date yourDate = new Date();\r\n   \r\n    SimpleDateFormat DATE_FORMAT = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n    String date = DATE_FORMAT.format(yourDate);\r\n\r\nIt works perfectly!","title":"Change date format in a Java string","body":"<p>You can just use:</p>\n\n<pre><code>Date yourDate = new Date();\n\nSimpleDateFormat DATE_FORMAT = new SimpleDateFormat(\"yyyy-MM-dd\");\nString date = DATE_FORMAT.format(yourDate);\n</code></pre>\n\n<p>It works perfectly!</p>\n"},{"comments":[{"owner":{"account_id":1147621,"reputation":11590,"user_id":1130044,"accept_rate":74,"display_name":"a fair player"},"score":2,"creation_date":1407340497,"post_id":24423756,"comment_id":39178981,"body_markdown":"&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot; should be &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;","body":"&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot; should be &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;"},{"owner":{"account_id":2057638,"reputation":6658,"user_id":1834941,"display_name":"Dev"},"score":2,"creation_date":1407997603,"post_id":24423756,"comment_id":39434148,"body_markdown":"no if u put Z in single quote it will give Z as output but without it it will give Timezone. eg. 2014-08-14T01:24:57.236Z and from without it\n2014-08-14T01:24:57.236-0530 --&gt; I tried on jdk1.7","body":"no if u put Z in single quote it will give Z as output but without it it will give Timezone. eg. 2014-08-14T01:24:57.236Z and from without it 2014-08-14T01:24:57.236-0530 --&gt; I tried on jdk1.7"},{"owner":{"account_id":365002,"reputation":6057,"user_id":709683,"accept_rate":87,"display_name":"Stefano Mtangoo"},"score":1,"creation_date":1418374414,"post_id":24423756,"comment_id":43319591,"body_markdown":"&quot;yyyyy.MMMMM.dd GGG hh:mm aaa&quot;  02001.July.04 AD 12:08 PM\nNote extra M in month. Four not five!","body":"&quot;yyyyy.MMMMM.dd GGG hh:mm aaa&quot;  02001.July.04 AD 12:08 PM Note extra M in month. Four not five!"},{"owner":{"account_id":2057638,"reputation":6658,"user_id":1834941,"display_name":"Dev"},"score":0,"creation_date":1418374986,"post_id":24423756,"comment_id":43319873,"body_markdown":"if it&#39;s 4 letters or more, then the full form is used. so you can use 4 times m or even 5 times m its same","body":"if it&#39;s 4 letters or more, then the full form is used. so you can use 4 times m or even 5 times m its same"},{"owner":{"account_id":1303723,"reputation":6315,"user_id":1253136,"accept_rate":75,"display_name":"CosmicGiant"},"score":0,"creation_date":1449145146,"post_id":24423756,"comment_id":55884669,"body_markdown":"This is pretty much a Copy-Paste of the docs. No extra explanations are being provided, and there is no link to the docs where more info could be acquired if needed. -1. ([Here&#39;s the link btw](https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html))","body":"This is pretty much a Copy-Paste of the docs. No extra explanations are being provided, and there is no link to the docs where more info could be acquired if needed. -1. (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">Here&#39;s the link btw</a>)"},{"owner":{"account_id":7465996,"reputation":1866,"user_id":5675550,"accept_rate":77,"display_name":"viper"},"score":0,"creation_date":1486962860,"post_id":24423756,"comment_id":71556071,"body_markdown":"This is the most satisfying answer that I have found on using date formatter on java. Thank you very much","body":"This is the most satisfying answer that I have found on using date formatter on java. Thank you very much"},{"owner":{"account_id":1773418,"reputation":18513,"user_id":1617737,"accept_rate":53,"display_name":"ban-geoengineering"},"score":0,"creation_date":1489588568,"post_id":24423756,"comment_id":72737763,"body_markdown":"In Android, `MMMMM` didn&#39;t work for me, but `MMMM` did.","body":"In Android, <code>MMMMM</code> didn&#39;t work for me, but <code>MMMM</code> did."},{"owner":{"account_id":6460531,"reputation":1339,"user_id":5004526,"display_name":"Alberto Cerqueira"},"score":0,"creation_date":1511532883,"post_id":24423756,"comment_id":81904701,"body_markdown":"Thanks, very nice! I needed use `yyyy-MM-dd&#39;T&#39;HH:mm:ssXXX`","body":"Thanks, very nice! I needed use <code>yyyy-MM-dd&#39;T&#39;HH:mm:ssXXX</code>"}],"tags":[],"owner":{"account_id":2057638,"reputation":6658,"user_id":1834941,"display_name":"Dev"},"comment_count":8,"down_vote_count":1,"up_vote_count":179,"is_accepted":false,"score":178,"last_activity_date":1449206488,"creation_date":1403764069,"answer_id":24423756,"question_id":4772425,"body_markdown":"Formatting are CASE-SENSITIVE so USE MM for month not mm (this is for minute) and yyyy \r\nFor [Reference][1] you can use following cheatsheet.\r\n\r\n    G\tEra designator\tText\tAD\r\n    y\tYear\tYear\t1996; 96\r\n    Y\tWeek year\tYear\t2009; 09\r\n    M\tMonth in year\tMonth\tJuly; Jul; 07\r\n    w\tWeek in year\tNumber\t27\r\n    W\tWeek in month\tNumber\t2\r\n    D\tDay in year\tNumber\t189\r\n    d\tDay in month\tNumber\t10\r\n    F\tDay of week in month\tNumber\t2\r\n    E\tDay name in week\tText\tTuesday; Tue\r\n    u\tDay number of week (1 = Monday, ..., 7 = Sunday)\tNumber\t1\r\n    a\tAm/pm marker\tText\tPM\r\n    H\tHour in day (0-23)\tNumber\t0\r\n    k\tHour in day (1-24)\tNumber\t24\r\n    K\tHour in am/pm (0-11)\tNumber\t0\r\n    h\tHour in am/pm (1-12)\tNumber\t12\r\n    m\tMinute in hour\tNumber\t30\r\n    s\tSecond in minute\tNumber\t55\r\n    S\tMillisecond\tNumber\t978\r\n    z\tTime zone\tGeneral time zone\tPacific Standard Time; PST; GMT-08:00\r\n    Z\tTime zone\tRFC 822 time zone\t-0800\r\n    X\tTime zone\tISO 8601 time zone\t-08; -0800; -08:00\r\n\r\nExamples:\r\n\r\n    &quot;yyyy.MM.dd G &#39;at&#39; HH:mm:ss z&quot;\t2001.07.04 AD at 12:08:56 PDT\r\n    &quot;EEE, MMM d, &#39;&#39;yy&quot;\tWed, Jul 4, &#39;01\r\n    &quot;h:mm a&quot;\t12:08 PM\r\n    &quot;hh &#39;o&#39;&#39;clock&#39; a, zzzz&quot;\t12 o&#39;clock PM, Pacific Daylight Time\r\n    &quot;K:mm a, z&quot;\t0:08 PM, PDT\r\n    &quot;yyyyy.MMMMM.dd GGG hh:mm aaa&quot;\t02001.July.04 AD 12:08 PM\r\n    &quot;EEE, d MMM yyyy HH:mm:ss Z&quot;\tWed, 4 Jul 2001 12:08:56 -0700\r\n    &quot;yyMMddHHmmssZ&quot;\t010704120856-0700\r\n    &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;\t 2001-07-04T12:08:56.235-0700\r\n    &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX&quot;\t 2001-07-04T12:08:56.235-07:00\r\n    &quot;YYYY-&#39;W&#39;ww-u&quot;\t2001-W27-3\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html","title":"Change date format in a Java string","body":"<p>Formatting are CASE-SENSITIVE so USE MM for month not mm (this is for minute) and yyyy \nFor <a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\">Reference</a> you can use following cheatsheet.</p>\n\n<pre><code>G   Era designator  Text    AD\ny   Year    Year    1996; 96\nY   Week year   Year    2009; 09\nM   Month in year   Month   July; Jul; 07\nw   Week in year    Number  27\nW   Week in month   Number  2\nD   Day in year Number  189\nd   Day in month    Number  10\nF   Day of week in month    Number  2\nE   Day name in week    Text    Tuesday; Tue\nu   Day number of week (1 = Monday, ..., 7 = Sunday)    Number  1\na   Am/pm marker    Text    PM\nH   Hour in day (0-23)  Number  0\nk   Hour in day (1-24)  Number  24\nK   Hour in am/pm (0-11)    Number  0\nh   Hour in am/pm (1-12)    Number  12\nm   Minute in hour  Number  30\ns   Second in minute    Number  55\nS   Millisecond Number  978\nz   Time zone   General time zone   Pacific Standard Time; PST; GMT-08:00\nZ   Time zone   RFC 822 time zone   -0800\nX   Time zone   ISO 8601 time zone  -08; -0800; -08:00\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>\"yyyy.MM.dd G 'at' HH:mm:ss z\"  2001.07.04 AD at 12:08:56 PDT\n\"EEE, MMM d, ''yy\"  Wed, Jul 4, '01\n\"h:mm a\"    12:08 PM\n\"hh 'o''clock' a, zzzz\" 12 o'clock PM, Pacific Daylight Time\n\"K:mm a, z\" 0:08 PM, PDT\n\"yyyyy.MMMMM.dd GGG hh:mm aaa\"  02001.July.04 AD 12:08 PM\n\"EEE, d MMM yyyy HH:mm:ss Z\"    Wed, 4 Jul 2001 12:08:56 -0700\n\"yyMMddHHmmssZ\" 010704120856-0700\n\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\"   2001-07-04T12:08:56.235-0700\n\"yyyy-MM-dd'T'HH:mm:ss.SSSXXX\"   2001-07-04T12:08:56.235-07:00\n\"YYYY-'W'ww-u\"  2001-W27-3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2850233,"reputation":3615,"user_id":2447599,"display_name":"Ran Adler"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1568779913,"creation_date":1409119788,"answer_id":25520059,"question_id":4772425,"body_markdown":"You could try **Java 8** new `date`, more information can be found on the [Oracle documentation][1].    \r\n\r\nOr you can try the old one \r\n\r\n```java  \r\npublic static Date getDateFromString(String format, String dateStr) {\r\n\r\n\tDateFormat formatter = new SimpleDateFormat(format);\r\n\tDate date = null;\r\n\ttry {\r\n\t\tdate = (Date) formatter.parse(dateStr);\r\n\t} catch (ParseException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\n\treturn date;\r\n}\r\n\r\npublic static String getDate(Date date, String dateFormat) {\r\n\tDateFormat formatter = new SimpleDateFormat(dateFormat);\r\n\treturn formatter.format(date);\r\n}\r\n```    \r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html","title":"Change date format in a Java string","body":"<p>You could try <strong>Java 8</strong> new <code>date</code>, more information can be found on the <a href=\"http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html\" rel=\"nofollow noreferrer\">Oracle documentation</a>.    </p>\n\n<p>Or you can try the old one </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static Date getDateFromString(String format, String dateStr) {\n\n    DateFormat formatter = new SimpleDateFormat(format);\n    Date date = null;\n    try {\n        date = (Date) formatter.parse(dateStr);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n\n    return date;\n}\n\npublic static String getDate(Date date, String dateFormat) {\n    DateFormat formatter = new SimpleDateFormat(dateFormat);\n    return formatter.format(date);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1327847,"reputation":5665,"user_id":1272318,"accept_rate":48,"display_name":"Touchstone"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1426243150,"creation_date":1426243150,"answer_id":29030112,"question_id":4772425,"body_markdown":"Please refer &quot;Date and Time Patterns&quot; here. http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html    \r\n\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import java.text.ParseException;\r\n\r\n    public class DateConversionExample{\r\n\r\n\t  public static void main(String arg[]){\r\n\r\n\t\ttry{\r\n\t\t\r\n\t\tSimpleDateFormat sourceDateFormat = new SimpleDateFormat(&quot;yyyy-MM-DD HH:mm:ss&quot;);\r\n\t\t\t\t \r\n\t\tDate date = sourceDateFormat.parse(&quot;2011-01-18 00:00:00.0&quot;);\r\n\t\r\n\t\t\r\n\t\tSimpleDateFormat targetDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n        System.out.println(targetDateFormat.format(date));\r\n        \r\n\t\t}catch(ParseException e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t  }\t\r\n\r\n    }","title":"Change date format in a Java string","body":"<p>Please refer \"Date and Time Patterns\" here. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html</a>    </p>\n\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.text.ParseException;\n\npublic class DateConversionExample{\n\n  public static void main(String arg[]){\n\n    try{\n\n    SimpleDateFormat sourceDateFormat = new SimpleDateFormat(\"yyyy-MM-DD HH:mm:ss\");\n\n    Date date = sourceDateFormat.parse(\"2011-01-18 00:00:00.0\");\n\n\n    SimpleDateFormat targetDateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n    System.out.println(targetDateFormat.format(date));\n\n    }catch(ParseException e){\n        e.printStackTrace();\n    }\n  } \n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5235454,"reputation":1988,"user_id":4184183,"display_name":"Kursad Gulseven"},"score":3,"creation_date":1487225348,"post_id":42265942,"comment_id":71688970,"body_markdown":"Please add some information to your answer(s) to explain your code.","body":"Please add some information to your answer(s) to explain your code."},{"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"score":0,"creation_date":1487843226,"post_id":42265942,"comment_id":71970189,"body_markdown":"there is a method name getDate() by which u can get date obj after that apply SimpleDateFormat so that you can convert date according to your format which is defined in SimpleDateFormat constructor and set in StringDate method you can make it cached","body":"there is a method name getDate() by which u can get date obj after that apply SimpleDateFormat so that you can convert date according to your format which is defined in SimpleDateFormat constructor and set in StringDate method you can make it cached"}],"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"comment_count":2,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1563366979,"creation_date":1487224107,"answer_id":42265942,"question_id":4772425,"body_markdown":"    public class SystemDateTest {\r\n    \r\n    \tString stringDate;\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystemDateTest systemDateTest = new SystemDateTest();\r\n    \t\t// format date into String\r\n    \t\tSimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy hh:mm:ss&quot;);\r\n    \t\tsystemDateTest.setStringDate(simpleDateFormat.format(systemDateTest.getDate()));\r\n    \t\tSystem.out.println(systemDateTest.getStringDate());\r\n    \t}\r\n    \t\r\n    \tpublic Date getDate() {\r\n    \t\treturn new Date();\r\n    \t}\r\n    \r\n    \tpublic String getStringDate() {\r\n    \t\treturn stringDate;\r\n    \t}\r\n    \r\n    \tpublic void setStringDate(String stringDate) {\r\n    \t\tthis.stringDate = stringDate;\r\n    \t}\r\n    }\r\n\r\n","title":"Change date format in a Java string","body":"<pre><code>public class SystemDateTest {\n\n    String stringDate;\n\n    public static void main(String[] args) {\n        SystemDateTest systemDateTest = new SystemDateTest();\n        // format date into String\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"dd-MM-yyyy hh:mm:ss\");\n        systemDateTest.setStringDate(simpleDateFormat.format(systemDateTest.getDate()));\n        System.out.println(systemDateTest.getStringDate());\n    }\n\n    public Date getDate() {\n        return new Date();\n    }\n\n    public String getStringDate() {\n        return stringDate;\n    }\n\n    public void setStringDate(String stringDate) {\n        this.stringDate = stringDate;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1562173438,"post_id":56867425,"comment_id":100298404,"body_markdown":"This date-time class was supplanted years ago by the modern *java.time* classes. Specifically `DateTimeFormatter` and `DateTimeFormatterBuilder`. Suggesting `SimpleDateFormat` in 2019 is poor advice.","body":"This date-time class was supplanted years ago by the modern <i>java.time</i> classes. Specifically <code>DateTimeFormatter</code> and <code>DateTimeFormatterBuilder</code>. Suggesting <code>SimpleDateFormat</code> in 2019 is poor advice."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1562173549,"post_id":56867425,"comment_id":100298456,"body_markdown":"**Incorrect** Your formatting codes here are wrong. `hh` is for hour.","body":"<b>Incorrect</b> Your formatting codes here are wrong. <code>hh</code> is for hour."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1562173596,"post_id":56867425,"comment_id":100298478,"body_markdown":"Usually we expect some discussion or explanation. Stack Overflow is meant to be more than a snippet library.","body":"Usually we expect some discussion or explanation. Stack Overflow is meant to be more than a snippet library."}],"tags":[],"owner":{"account_id":14044025,"reputation":27,"user_id":10144761,"display_name":"Soumya Mahapatra"},"comment_count":3,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1592841625,"creation_date":1562147599,"answer_id":56867425,"question_id":4772425,"body_markdown":"    SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);\r\n\r\n","title":"Change date format in a Java string","body":"<pre><code>SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3730291,"reputation":1633,"user_id":3102913,"accept_rate":33,"display_name":"pavel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563793240,"creation_date":1563793240,"answer_id":57144603,"question_id":4772425,"body_markdown":"Say you want to change 2019-12-20 10:50 AM GMT+6:00 to 2019-12-20 10:50 AM \r\nfirst of all you have to understand the date format first one date format is \r\nyyyy-MM-dd hh:mm a zzz and second one date format will be yyyy-MM-dd hh:mm a \r\n\r\njust return a string from this function like. \r\n\r\n    public String convertToOnlyDate(String currentDate) {\r\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm a &quot;);\r\n        Date date;\r\n        String dateString = &quot;&quot;;\r\n        try {\r\n            date = dateFormat.parse(currentDate);\r\n            System.out.println(date.toString()); \r\n\r\n            dateString = dateFormat.format(date);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return dateString;\r\n    }\r\n\r\nThis function will return your desire answer. If you want to customize more just add or remove component from the date format. ","title":"Change date format in a Java string","body":"<p>Say you want to change 2019-12-20 10:50 AM GMT+6:00 to 2019-12-20 10:50 AM \nfirst of all you have to understand the date format first one date format is \nyyyy-MM-dd hh:mm a zzz and second one date format will be yyyy-MM-dd hh:mm a </p>\n\n<p>just return a string from this function like. </p>\n\n<pre><code>public String convertToOnlyDate(String currentDate) {\n    SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd hh:mm a \");\n    Date date;\n    String dateString = \"\";\n    try {\n        date = dateFormat.parse(currentDate);\n        System.out.println(date.toString()); \n\n        dateString = dateFormat.format(date);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    return dateString;\n}\n</code></pre>\n\n<p>This function will return your desire answer. If you want to customize more just add or remove component from the date format. </p>\n"},{"tags":[],"owner":{"account_id":6670997,"reputation":73,"user_id":5147138,"display_name":"Kamta Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592841560,"creation_date":1592841426,"answer_id":62518551,"question_id":4772425,"body_markdown":"We can convert Today&#39;s date in the format of *&#39;JUN 12, 2020&#39;*.\r\n\r\n\r\n    String.valueOf(DateFormat.getDateInstance().format(new Date())));","title":"Change date format in a Java string","body":"<p>We can convert Today's date in the format of <em>'JUN 12, 2020'</em>.</p>\n<pre><code>String.valueOf(DateFormat.getDateInstance().format(new Date())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16153154,"reputation":1,"user_id":11661052,"display_name":"Emad Aljumaily"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619824701,"creation_date":1619824701,"answer_id":67341464,"question_id":4772425,"body_markdown":"you have some wrong:\r\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);\r\n\r\nfirst :\r\nshould be\r\n`\r\n new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);`\r\n//yyyy 4 not 5\r\nthis display 02011, but yyyy it disply 2011\r\n\r\nsecond:\r\nchange your code like this\r\n`new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);`\r\n\r\ni hope help you","title":"Change date format in a Java string","body":"<p>you have some wrong:\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);</p>\n<p>first :\nshould be\n<code> new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);</code>\n//yyyy 4 not 5\nthis display 02011, but yyyy it disply 2011</p>\n<p>second:\nchange your code like this\n<code>new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</code></p>\n<p>i hope help you</p>\n"},{"tags":[],"owner":{"account_id":8652819,"reputation":1174,"user_id":6477946,"display_name":"Rajneesh Shukla"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620909202,"creation_date":1620909202,"answer_id":67519315,"question_id":4772425,"body_markdown":"\r\n\r\n    /**\r\n     * Method will take Date in &quot;MMMM, dd yyyy HH:mm:s&quot; format and return time difference like added: 3 min ago\r\n     *\r\n     * @param date : date in &quot;MMMM, dd yyyy HH:mm:s&quot; format\r\n     * @return : time difference\r\n     */\r\n    private String getDurationTimeStamp(String date) {\r\n        String timeDifference = &quot;&quot;;\r\n    \r\n        //date formatter as per the coder need\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;MMMM, dd yyyy HH:mm:s&quot;);\r\n        TimeZone timeZone = TimeZone.getTimeZone(&quot;EST&quot;);\r\n        sdf.setTimeZone(timeZone);\r\n        Date startDate = null;\r\n        try {\r\n            startDate = sdf.parse(date);\r\n        } catch (ParseException e) {\r\n            MyLog.printStack(e);\r\n        }\r\n    \r\n        //end date will be the current system time to calculate the lapse time difference\r\n        Date endDate = new Date();\r\n    \r\n        //get the time difference in milliseconds\r\n        long duration = endDate.getTime() - startDate.getTime();\r\n    \r\n        long diffInSeconds = TimeUnit.MILLISECONDS.toSeconds(duration);\r\n        long diffInMinutes = TimeUnit.MILLISECONDS.toMinutes(duration);\r\n        long diffInHours = TimeUnit.MILLISECONDS.toHours(duration);\r\n        long diffInDays = TimeUnit.MILLISECONDS.toDays(duration);\r\n    \r\n        if (diffInDays &gt;= 365) {\r\n            int year = (int) (diffInDays / 365);\r\n            timeDifference = year + mContext.getString(R.string.year_ago);\r\n        } else if (diffInDays &gt;= 30) {\r\n            int month = (int) (diffInDays / 30);\r\n            timeDifference = month + mContext.getString(R.string.month_ago);\r\n        }\r\n        //if days are not enough to create year then get the days\r\n        else if (diffInDays &gt;= 1) {\r\n            timeDifference = diffInDays + mContext.getString(R.string.day_ago);\r\n        }\r\n        //if days value&lt;1 then get the hours\r\n        else if (diffInHours &gt;= 1) {\r\n            timeDifference = diffInHours + mContext.getString(R.string.hour_ago);\r\n        }\r\n        //if hours value&lt;1 then get the minutes\r\n        else if (diffInMinutes &gt;= 1) {\r\n            timeDifference = diffInMinutes + mContext.getString(R.string.min_ago);\r\n        }\r\n        //if minutes value&lt;1 then get the seconds\r\n        else if (diffInSeconds &gt;= 1) {\r\n            timeDifference = diffInSeconds + mContext.getString(R.string.sec_ago);\r\n        } else if (timeDifference.isEmpty()) {\r\n            timeDifference = mContext.getString(R.string.now);\r\n        }\r\n    \r\n        return mContext.getString(R.string.added) + &quot; &quot; + timeDifference;\r\n    }\r\n\r\n","title":"Change date format in a Java string","body":"<pre><code>/**\n * Method will take Date in &quot;MMMM, dd yyyy HH:mm:s&quot; format and return time difference like added: 3 min ago\n *\n * @param date : date in &quot;MMMM, dd yyyy HH:mm:s&quot; format\n * @return : time difference\n */\nprivate String getDurationTimeStamp(String date) {\n    String timeDifference = &quot;&quot;;\n\n    //date formatter as per the coder need\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;MMMM, dd yyyy HH:mm:s&quot;);\n    TimeZone timeZone = TimeZone.getTimeZone(&quot;EST&quot;);\n    sdf.setTimeZone(timeZone);\n    Date startDate = null;\n    try {\n        startDate = sdf.parse(date);\n    } catch (ParseException e) {\n        MyLog.printStack(e);\n    }\n\n    //end date will be the current system time to calculate the lapse time difference\n    Date endDate = new Date();\n\n    //get the time difference in milliseconds\n    long duration = endDate.getTime() - startDate.getTime();\n\n    long diffInSeconds = TimeUnit.MILLISECONDS.toSeconds(duration);\n    long diffInMinutes = TimeUnit.MILLISECONDS.toMinutes(duration);\n    long diffInHours = TimeUnit.MILLISECONDS.toHours(duration);\n    long diffInDays = TimeUnit.MILLISECONDS.toDays(duration);\n\n    if (diffInDays &gt;= 365) {\n        int year = (int) (diffInDays / 365);\n        timeDifference = year + mContext.getString(R.string.year_ago);\n    } else if (diffInDays &gt;= 30) {\n        int month = (int) (diffInDays / 30);\n        timeDifference = month + mContext.getString(R.string.month_ago);\n    }\n    //if days are not enough to create year then get the days\n    else if (diffInDays &gt;= 1) {\n        timeDifference = diffInDays + mContext.getString(R.string.day_ago);\n    }\n    //if days value&lt;1 then get the hours\n    else if (diffInHours &gt;= 1) {\n        timeDifference = diffInHours + mContext.getString(R.string.hour_ago);\n    }\n    //if hours value&lt;1 then get the minutes\n    else if (diffInMinutes &gt;= 1) {\n        timeDifference = diffInMinutes + mContext.getString(R.string.min_ago);\n    }\n    //if minutes value&lt;1 then get the seconds\n    else if (diffInSeconds &gt;= 1) {\n        timeDifference = diffInSeconds + mContext.getString(R.string.sec_ago);\n    } else if (timeDifference.isEmpty()) {\n        timeDifference = mContext.getString(R.string.now);\n    }\n\n    return mContext.getString(R.string.added) + &quot; &quot; + timeDifference;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73067,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1671452223,"creation_date":1630075003,"answer_id":68955239,"question_id":4772425,"body_markdown":"# *java.time* \r\n\r\nIn March 2014, [modern date-time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt; API supplanted the error-prone `java.util` date-time API and their formatting API, `SimpleDateFormat`. Since then it has been highly recommended to stop using the legacy API.\r\n\r\nAlso, quoted below is a notice from the [home page of **Joda-Time**](https://www.joda.org/joda-time/):\r\n\r\n&gt; Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.\r\n\r\nYou do not need `DateTimeFormatter` for formatting\r\n--\r\n\r\nYou need `DateTimeFormatter` only for parsing your string but you do not need a `DateTimeFormatter` to get the date in the desired format. The modern Date-Time API is based on [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) and thus the `toString` implementation of `java.time` types return a string in ISO 8601 format. Your desired format is the default format of [`LocalDate#toString`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#toString--).\r\n\r\n**Solution using `java.time`, the modern Date-Time API:**\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.LocalDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString strDate = &quot;2011-01-18 00:00:00.0&quot;;\r\n    \t\tDateTimeFormatter dtfInput = DateTimeFormatter.ofPattern(&quot;u-M-d H:m:s.S&quot;, Locale.ENGLISH);\r\n    \t\tLocalDateTime ldt = LocalDateTime.parse(strDate, dtfInput);\r\n    \t\t// Alternatively,\r\n    \t\t// LocalDateTime ldt = dtfInput.parse(strDate, LocalDateTime::from);\r\n    \r\n    \t\tLocalDate date = ldt.toLocalDate();\r\n    \t\tSystem.out.println(date);\r\n    \t}\r\n    }\r\n    \r\n**Output:**\r\n\r\n    2011-01-18\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\n**Some important notes about the solution:**\r\n\r\n 1. `java.time` made it possible to call `parse` and `format` functions on the [Date-Time type](https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html) itself, **in addition to** the traditional way (i.e. calling `parse` and `format` functions on the formatter type, which is `DateTimeFormatter` in case of `java.time` API).\r\n 2. Here, you can use `y` instead of `u` but [I prefer `u` to `y`](https://stackoverflow.com/a/65928023/10819573).\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n***\r\n&lt;sup&gt;* For any reason, if you have to stick to Java 6 or Java 7, you can use [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) which backports most of the *java.time* functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table) and [How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project).\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://ideone.com/MxXM2D\r\n\r\n","title":"Change date format in a Java string","body":"<h1><em>java.time</em></h1>\n<p>In March 2014, <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern date-time API</a><sup>*</sup> API supplanted the error-prone <code>java.util</code> date-time API and their formatting API, <code>SimpleDateFormat</code>. Since then it has been highly recommended to stop using the legacy API.</p>\n<p>Also, quoted below is a notice from the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">home page of <strong>Joda-Time</strong></a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<h2>You do not need <code>DateTimeFormatter</code> for formatting</h2>\n<p>You need <code>DateTimeFormatter</code> only for parsing your string but you do not need a <code>DateTimeFormatter</code> to get the date in the desired format. The modern Date-Time API is based on <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> and thus the <code>toString</code> implementation of <code>java.time</code> types return a string in ISO 8601 format. Your desired format is the default format of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#toString--\" rel=\"nofollow noreferrer\"><code>LocalDate#toString</code></a>.</p>\n<p><strong>Solution using <code>java.time</code>, the modern Date-Time API:</strong></p>\n<pre><code>import java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        String strDate = &quot;2011-01-18 00:00:00.0&quot;;\n        DateTimeFormatter dtfInput = DateTimeFormatter.ofPattern(&quot;u-M-d H:m:s.S&quot;, Locale.ENGLISH);\n        LocalDateTime ldt = LocalDateTime.parse(strDate, dtfInput);\n        // Alternatively,\n        // LocalDateTime ldt = dtfInput.parse(strDate, LocalDateTime::from);\n\n        LocalDate date = ldt.toLocalDate();\n        System.out.println(date);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2011-01-18\n</code></pre>\n<p><a href=\"https://ideone.com/MxXM2D\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p><strong>Some important notes about the solution:</strong></p>\n<ol>\n<li><code>java.time</code> made it possible to call <code>parse</code> and <code>format</code> functions on the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html\" rel=\"nofollow noreferrer\">Date-Time type</a> itself, <strong>in addition to</strong> the traditional way (i.e. calling <code>parse</code> and <code>format</code> functions on the formatter type, which is <code>DateTimeFormatter</code> in case of <code>java.time</code> API).</li>\n<li>Here, you can use <code>y</code> instead of <code>u</code> but <a href=\"https://stackoverflow.com/a/65928023/10819573\">I prefer <code>u</code> to <code>y</code></a>.</li>\n</ol>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* For any reason, if you have to stick to Java 6 or Java 7, you can use <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> which backports most of the <em>java.time</em> functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a> and <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>.\n</sup></p>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1684736915,"post_id":76303000,"comment_id":134554716,"body_markdown":"Thanks for wanting to contribute. (1) No one should use the notoriously troublesome and long outdated `SimpleDateFormat` any more. IMHO helping people how to do htat is doing them an il favour. (2) `SimpleDateFormat` didnât care whether there were 4 or 5 `y` when parsing. Even if you wanted to use that bad class, you were on the wrong track. (3) You are not covering all the issues with the original code. Older answers do that better.","body":"Thanks for wanting to contribute. (1) No one should use the notoriously troublesome and long outdated <code>SimpleDateFormat</code> any more. IMHO helping people how to do htat is doing them an il favour. (2) <code>SimpleDateFormat</code> didnât care whether there were 4 or 5 <code>y</code> when parsing. Even if you wanted to use that bad class, you were on the wrong track. (3) You are not covering all the issues with the original code. Older answers do that better."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684729059,"creation_date":1684728670,"answer_id":76303000,"question_id":4772425,"body_markdown":"First, your year is being 0 padded because you have used 5 `y` characters, instead of 4.\r\n\r\nSecondly, you&#39;re using a lower case `m`, whereas you want a capital `M`.\r\n\r\n```java\r\nString date_s = &quot; 2011-01-18 00:00:00.0&quot;;\r\nSimpleDateFormat dt = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);\r\nDate date = dt.parse(date_s);\r\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\nSystem.out.println(dt1.format(date));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n2011-01-18\r\n```\r\n\r\nYou can also use a `String.format`, with a `%tF` modifier.  \r\nThis maps to the ISO 8601 date format, which is yyyy-MM-dd.  \r\nSee [Formatter (Java SE 20 &amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html)\r\n\r\n```java\r\nSystem.out.printf(&quot;%tF&quot;, date.getTime());\r\n```","title":"Change date format in a Java string","body":"<p>First, your year is being 0 padded because you have used 5 <code>y</code> characters, instead of 4.</p>\n<p>Secondly, you're using a lower case <code>m</code>, whereas you want a capital <code>M</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String date_s = &quot; 2011-01-18 00:00:00.0&quot;;\nSimpleDateFormat dt = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);\nDate date = dt.parse(date_s);\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\nSystem.out.println(dt1.format(date));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>2011-01-18\n</code></pre>\n<p>You can also use a <code>String.format</code>, with a <code>%tF</code> modifier.<br />\nThis maps to the ISO 8601 date format, which is yyyy-MM-dd.<br />\nSee <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">Formatter (Java SE 20 &amp; JDK 20)</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(&quot;%tF&quot;, date.getTime());\n</code></pre>\n"}],"owner":{"account_id":698878,"reputation":5219,"user_id":586154,"display_name":"amit4444"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1660916,"favorite_count":0,"down_vote_count":6,"up_vote_count":521,"answer_count":23,"score":515,"last_activity_date":1700011087,"creation_date":1295759388,"question_id":4772425,"body_markdown":"I&#39;ve a `String` representing a date.\r\n\r\n    String date_s = &quot;2011-01-18 00:00:00.0&quot;;\r\n\r\nI&#39;d like to convert it to a `Date` and output it in `YYYY-MM-DD` format.\r\n\r\n&gt; 2011-01-18\r\n\r\nHow can I achieve this?\r\n\r\n---\r\n\r\nOkay, based on the answers I retrieved below, here&#39;s something I&#39;ve tried:\r\n\r\n    String date_s = &quot; 2011-01-18 00:00:00.0&quot;; \r\n    SimpleDateFormat dt = new SimpleDateFormat(&quot;yyyyy-mm-dd hh:mm:ss&quot;); \r\n    Date date = dt.parse(date_s); \r\n    SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);\r\n    System.out.println(dt1.format(date));\r\n\r\nBut it outputs `02011-00-1` instead of the desired `2011-01-18`. What am I doing wrong?","title":"Change date format in a Java string","body":"<p>I've a <code>String</code> representing a date.</p>\n\n<pre><code>String date_s = \"2011-01-18 00:00:00.0\";\n</code></pre>\n\n<p>I'd like to convert it to a <code>Date</code> and output it in <code>YYYY-MM-DD</code> format.</p>\n\n<blockquote>\n  <p>2011-01-18</p>\n</blockquote>\n\n<p>How can I achieve this?</p>\n\n<hr>\n\n<p>Okay, based on the answers I retrieved below, here's something I've tried:</p>\n\n<pre><code>String date_s = \" 2011-01-18 00:00:00.0\"; \nSimpleDateFormat dt = new SimpleDateFormat(\"yyyyy-mm-dd hh:mm:ss\"); \nDate date = dt.parse(date_s); \nSimpleDateFormat dt1 = new SimpleDateFormat(\"yyyyy-mm-dd\");\nSystem.out.println(dt1.format(date));\n</code></pre>\n\n<p>But it outputs <code>02011-00-1</code> instead of the desired <code>2011-01-18</code>. What am I doing wrong?</p>\n"},{"tags":["java","android","calendar"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1397903072,"post_id":23168805,"comment_id":35431780,"body_markdown":"It&#39;s 0 to 23, as you could have discovered with simple experimentation. I wouldn&#39;t use `Math.random() * 24` though - I&#39;d use `Random.nextInt(24)`.","body":"It&#39;s 0 to 23, as you could have discovered with simple experimentation. I wouldn&#39;t use <code>Math.random() * 24</code> though - I&#39;d use <code>Random.nextInt(24)</code>."},{"owner":{"account_id":1386583,"reputation":608,"user_id":1318498,"accept_rate":67,"display_name":"q335r49"},"score":0,"creation_date":1483493367,"post_id":23168805,"comment_id":70116186,"body_markdown":"I found this out the hard way. Java&#39;s simpledateformat uses the 1-24 range (so that quarter past midnight is 24:15). Spent a long time debugging.","body":"I found this out the hard way. Java&#39;s simpledateformat uses the 1-24 range (so that quarter past midnight is 24:15). Spent a long time debugging."}],"answers":[{"tags":[],"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":0,"down_vote_count":0,"up_vote_count":46,"is_accepted":true,"score":46,"last_activity_date":1397903075,"creation_date":1397903075,"answer_id":23168822,"question_id":23168805,"body_markdown":"From [the documentation](http://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#HOUR_OF_DAY):\r\n\r\n&gt; Field number for get and set indicating the hour of the day. `HOUR_OF_DAY` is used for the 24-hour clock. E.g., at 10:04:15.250 PM the `HOUR_OF_DAY` is 22.\r\n\r\nIf 10:04:15.250 PM is `HOUR_OF_DAY` 22, That would make the range `0` - `23`. If it were `1` to `24`, 10 p.m. would be 23. And that would be wrong on so many levels. :-)","title":"What is the range of HOUR_OF_DAY?","body":"<p>From <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#HOUR_OF_DAY\">the documentation</a>:</p>\n\n<blockquote>\n  <p>Field number for get and set indicating the hour of the day. <code>HOUR_OF_DAY</code> is used for the 24-hour clock. E.g., at 10:04:15.250 PM the <code>HOUR_OF_DAY</code> is 22.</p>\n</blockquote>\n\n<p>If 10:04:15.250 PM is <code>HOUR_OF_DAY</code> 22, That would make the range <code>0</code> - <code>23</code>. If it were <code>1</code> to <code>24</code>, 10 p.m. would be 23. And that would be wrong on so many levels. :-)</p>\n"},{"tags":[],"owner":{"account_id":9520346,"reputation":169,"user_id":7075426,"display_name":"Saurabh Gupta"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1477490411,"creation_date":1477490411,"answer_id":40264329,"question_id":23168805,"body_markdown":"It is 0-23.\r\n\r\nI have tested it by running below code\r\n\r\n        Calendar calendar = Calendar.getInstance();\r\n\t\tcalendar.set(Calendar.HOUR_OF_DAY, 24);\r\n\t\tSystem.out.println(calendar.get(Calendar.HOUR_OF_DAY));\r\n\r\nOutput is 0.\r\n\r\nIf you run\r\n\r\n        calendar.set(Calendar.HOUR_OF_DAY, 23);\r\n\r\nOutput will be 23.\r\n\r\nIf you run\r\n\r\n        calendar.set(Calendar.HOUR_OF_DAY, 25);\r\n\r\nOutput will be 1.","title":"What is the range of HOUR_OF_DAY?","body":"<p>It is 0-23.</p>\n\n<p>I have tested it by running below code</p>\n\n<pre><code>    Calendar calendar = Calendar.getInstance();\n    calendar.set(Calendar.HOUR_OF_DAY, 24);\n    System.out.println(calendar.get(Calendar.HOUR_OF_DAY));\n</code></pre>\n\n<p>Output is 0.</p>\n\n<p>If you run</p>\n\n<pre><code>    calendar.set(Calendar.HOUR_OF_DAY, 23);\n</code></pre>\n\n<p>Output will be 23.</p>\n\n<p>If you run</p>\n\n<pre><code>    calendar.set(Calendar.HOUR_OF_DAY, 25);\n</code></pre>\n\n<p>Output will be 1.</p>\n"},{"tags":[],"owner":{"account_id":4437371,"reputation":49,"user_id":3612861,"display_name":"Mujahid"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1508745250,"creation_date":1508745157,"answer_id":46884366,"question_id":23168805,"body_markdown":"The Range is between 0 to 23 \r\n\r\nRun this\r\n\r\n    Calendar calendar = Calendar.getInstance();\r\n    calendar.set(Calendar.HOUR_OF_DAY);\r\n    System.out.println(calendar.get(Calendar.HOUR_OF_DAY));\r\n\r\nIf the time is 12 AM the output will be 0\r\n\r\nand if the time is 11 PM the output will be 23 ","title":"What is the range of HOUR_OF_DAY?","body":"<p>The Range is between 0 to 23 </p>\n\n<p>Run this</p>\n\n<pre><code>Calendar calendar = Calendar.getInstance();\ncalendar.set(Calendar.HOUR_OF_DAY);\nSystem.out.println(calendar.get(Calendar.HOUR_OF_DAY));\n</code></pre>\n\n<p>If the time is 12 AM the output will be 0</p>\n\n<p>and if the time is 11 PM the output will be 23 </p>\n"}],"owner":{"account_id":4136356,"reputation":694,"user_id":3392953,"accept_rate":100,"display_name":"Sander"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39655,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":23168822,"answer_count":3,"score":22,"last_activity_date":1700010018,"creation_date":1397902964,"question_id":23168805,"body_markdown":"A simple question, but I couldn&#39;t find an answer to it:\r\n\r\n&gt; Is the range of `HOUR_OF_DAY` between 0 and 23, or 1 and 24?\r\n\r\nIf I want a random `HOUR_OF_DAY`, do I need:\r\n\r\n    int randomHour = (int) (Math.random() * 24);\r\nor\r\n\r\n    int randomHour = (int) (Math.random() * 24 + 1);\r\n","title":"What is the range of HOUR_OF_DAY?","body":"<p>A simple question, but I couldn't find an answer to it:</p>\n<blockquote>\n<p>Is the range of <code>HOUR_OF_DAY</code> between 0 and 23, or 1 and 24?</p>\n</blockquote>\n<p>If I want a random <code>HOUR_OF_DAY</code>, do I need:</p>\n<pre><code>int randomHour = (int) (Math.random() * 24);\n</code></pre>\n<p>or</p>\n<pre><code>int randomHour = (int) (Math.random() * 24 + 1);\n</code></pre>\n"},{"tags":["java","ssl","certificate","truststore"],"answers":[{"comments":[{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":0,"creation_date":1699922886,"post_id":77476517,"comment_id":136589231,"body_markdown":"Why with &#39;openssl pkcs12` I see 3 certificates in the output, but with `openssl x509` for the same pfx file, I see only one certificate?","body":"Why with &#39;openssl pkcs12` I see 3 certificates in the output, but with <code>openssl x509</code> for the same pfx file, I see only one certificate?"},{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":0,"creation_date":1699923955,"post_id":77476517,"comment_id":136589322,"body_markdown":"Yes, it worked, but I  don&#39;t understand what I am doing. Can you please clarify? Why the first command was `openssl pkcs12` instead of `openssl x509`? Where did the other 2 certificates go? And, why the `keytool` didn&#39;t work initially in my case? I am a bit lost here.","body":"Yes, it worked, but I  don&#39;t understand what I am doing. Can you please clarify? Why the first command was <code>openssl pkcs12</code> instead of <code>openssl x509</code>? Where did the other 2 certificates go? And, why the <code>keytool</code> didn&#39;t work initially in my case? I am a bit lost here."},{"owner":{"account_id":471659,"reputation":3578,"user_id":879592,"accept_rate":84,"display_name":"Yan"},"score":0,"creation_date":1699974498,"post_id":77476517,"comment_id":136596218,"body_markdown":"@tarekahf Updated the answer.","body":"@tarekahf Updated the answer."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1699984022,"post_id":77476517,"comment_id":136598226,"body_markdown":"Java crypto including `keytool` has supported PKCS12 _for keystore_ (privatekey _plus_ own cert/chain) since it began, but _for truststore_ (CA or other party bare cert) only since Java 8 in 2013 **using a special bag-attribute** that other software doesn&#39;t. It also supports JKS and other formats depending on the providers in the JVM, which OP didn&#39;t identity. @tarekhf: see my bold for why Java doesn&#39;t find trusted-certs in your PFX/PKCS12, so yes you must use `openssl pkcs12` to get cert(s) (as PEM) and `keytool -importcert` to a keystore format supported by your JVM.","body":"Java crypto including <code>keytool</code> has supported PKCS12 <i>for keystore</i> (privatekey <i>plus</i> own cert/chain) since it began, but <i>for truststore</i> (CA or other party bare cert) only since Java 8 in 2013 <b>using a special bag-attribute</b> that other software doesn&#39;t. It also supports JKS and other formats depending on the providers in the JVM, which OP didn&#39;t identity. @tarekhf: see my bold for why Java doesn&#39;t find trusted-certs in your PFX/PKCS12, so yes you must use <code>openssl pkcs12</code> to get cert(s) (as PEM) and <code>keytool -importcert</code> to a keystore format supported by your JVM."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1699984248,"post_id":77476517,"comment_id":136598261,"body_markdown":"... (Yan+) also note that if you have multiple certs in the PKCS12, `openssl pkcs12` outputs all of them, but `keytool -importcert` _for trustedcert_ only works on one at a time. You must either select the correct _one_ from PKCS12 output, or split it apart and do each desired/needed cert separately. (OTOH when importing a CA reply _to and for a privatekey entry_ it can read a whole chain.)","body":"... (Yan+) also note that if you have multiple certs in the PKCS12, <code>openssl pkcs12</code> outputs all of them, but <code>keytool -importcert</code> <i>for trustedcert</i> only works on one at a time. You must either select the correct <i>one</i> from PKCS12 output, or split it apart and do each desired/needed cert separately. (OTOH when importing a CA reply <i>to and for a privatekey entry</i> it can read a whole chain.)"},{"owner":{"account_id":471659,"reputation":3578,"user_id":879592,"accept_rate":84,"display_name":"Yan"},"score":0,"creation_date":1699985450,"post_id":77476517,"comment_id":136598493,"body_markdown":"@dave_thompson_085 Thanks for further clarification.  Going between formats especially dealing with keytool usually a bit of a pain :)","body":"@dave_thompson_085 Thanks for further clarification.  Going between formats especially dealing with keytool usually a bit of a pain :)"},{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":1,"creation_date":1700003738,"post_id":77476517,"comment_id":136601139,"body_markdown":"Thank you all... What really amazes me is that one could figure out how to move in such a maze and find the exit. I will add an answer soon to update you on what happened.","body":"Thank you all... What really amazes me is that one could figure out how to move in such a maze and find the exit. I will add an answer soon to update you on what happened."},{"owner":{"account_id":471659,"reputation":3578,"user_id":879592,"accept_rate":84,"display_name":"Yan"},"score":0,"creation_date":1700054453,"post_id":77476517,"comment_id":136607391,"body_markdown":"I get into this maze at least once a year when certificates about to expire :)","body":"I get into this maze at least once a year when certificates about to expire :)"}],"tags":[],"owner":{"account_id":471659,"reputation":3578,"user_id":879592,"accept_rate":84,"display_name":"Yan"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699974488,"creation_date":1699905249,"answer_id":77476517,"question_id":77476217,"body_markdown":"First, you have to extract the CA certificate from the .pfx file using openssl:  \r\n`openssl pkcs12 -in filename.pfx -passin pass:&lt;password&gt; -info -nokeys &gt; filename.pem`.  \r\nDouble check that extraction worked:  \r\n`openssl x509 -in test.pem -noout -text`\r\n\r\nThen either create new JKS using the key tool:  \r\n`keytool -import -trustcacerts -keystore test.jks -storepass choose-password -file test.pem -alias CANAME`\r\n\r\nOr you can import the certificate into the existing trust store:  \r\n`keytool -import -keystore cacerts -storepass changeit -file test.pem -alias CANAME -storetype JKS`\r\n\r\nUsually you would use openssl to interact with most certificate file formats and `keytool` with java key stores only (JKS)\r\n\r\n==============.  \r\n**Update**   \r\nPKCS12 is an archive file format for storing private keys and X.509 certificates with filename extensions `.p12` or `.pfx` \r\nTo be able to work with `.pfx` files you would use `openssl pkcs12` command.  I am guessing `x509` command returns first certificate it finds.\r\n[PKCS12 wiki][1]\r\n\r\n`keytool` Manages a keystore (database) of cryptographic keys, X.509 certificate chains, and trusted certificates.\r\nI think it only works with java keystores `.jks` or `.bcfks` (Bouncy Castle FIPS keyStore) etc.. \r\nI think you might actually be able to import certificates directly from `.pfx` file to a java keystore using `keytool`.\r\n\r\n`keytool -importkeystore -srckeystore mypfxfile.pfx -srcstoretype pkcs12 -destkeystore clientcert.jks -deststoretype JKS` \r\n\r\nThat could also import the private key if it&#39;s in the `.pfx` file but I am not sure.\r\n\r\nHope that helps.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/PKCS_12","title":"How to extract CA Certificate from .pfx file and add it to a trust store file","body":"<p>First, you have to extract the CA certificate from the .pfx file using openssl:<br />\n<code>openssl pkcs12 -in filename.pfx -passin pass:&lt;password&gt; -info -nokeys &gt; filename.pem</code>.<br />\nDouble check that extraction worked:<br />\n<code>openssl x509 -in test.pem -noout -text</code></p>\n<p>Then either create new JKS using the key tool:<br />\n<code>keytool -import -trustcacerts -keystore test.jks -storepass choose-password -file test.pem -alias CANAME</code></p>\n<p>Or you can import the certificate into the existing trust store:<br />\n<code>keytool -import -keystore cacerts -storepass changeit -file test.pem -alias CANAME -storetype JKS</code></p>\n<p>Usually you would use openssl to interact with most certificate file formats and <code>keytool</code> with java key stores only (JKS)</p>\n<p>==============.<br />\n<strong>Update</strong><br />\nPKCS12 is an archive file format for storing private keys and X.509 certificates with filename extensions <code>.p12</code> or <code>.pfx</code>\nTo be able to work with <code>.pfx</code> files you would use <code>openssl pkcs12</code> command.  I am guessing <code>x509</code> command returns first certificate it finds.\n<a href=\"https://en.wikipedia.org/wiki/PKCS_12\" rel=\"nofollow noreferrer\">PKCS12 wiki</a></p>\n<p><code>keytool</code> Manages a keystore (database) of cryptographic keys, X.509 certificate chains, and trusted certificates.\nI think it only works with java keystores <code>.jks</code> or <code>.bcfks</code> (Bouncy Castle FIPS keyStore) etc..\nI think you might actually be able to import certificates directly from <code>.pfx</code> file to a java keystore using <code>keytool</code>.</p>\n<p><code>keytool -importkeystore -srckeystore mypfxfile.pfx -srcstoretype pkcs12 -destkeystore clientcert.jks -deststoretype JKS</code></p>\n<p>That could also import the private key if it's in the <code>.pfx</code> file but I am not sure.</p>\n<p>Hope that helps.</p>\n"},{"tags":[],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700007333,"creation_date":1700007333,"answer_id":77484544,"question_id":77476217,"body_markdown":"Thanks to @Yan and @dave_thompson_085 for the answer and info provided.\r\n\r\nFinally, we found out that the provided PFX file wasn&#39;t necessary. There was a `.cer` file that had the certificate chain to be trusted. I used this new `.cer` file and picked one `cacerts` from the JRE security library, copied it, changed its name, and added the `.cer` file to the copy of the `cacerts` file. The justification is that we may need to trust some of the certificates that are shipped with JRE and this will save some time.\r\n\r\nI used a desktop tool from &quot;IBM i Client Access Solutions&quot; called &quot;Key Management&quot; to import the `cer` file to the copy of the `cacerts` file. Now, I have a new `jks` file to be used for the Java program that will use the class `SecureAS400` to open a secured RPC Connection to IBM i.\r\n\r\n---\r\n\r\n**Some extra stuff for verification and clarification:**\r\n\r\nI used the extracted `pem` file from the provided `pfx` file as mentioned by @Yan... I imported the `pem` file using `keytool import` to a copy of the cacerts file so now I have, say,  `cacerts_a.jks`.\r\n\r\nI understood that this `pfx` file has the root CA as well as the private key of the server certificate, and looks like there is a certificate in the middle so it has a total of 3 certificates.\r\n\r\nThen, I understood that ... no... I have to use a new `cer` file with the trust chain. I used this new `pem` file and imported it to a copy of the `cacerts` file and now I have, say, `cacerts_b.jks`.\r\n\r\nI tried to compare the output of the following two commands:\r\n\r\n```\r\n&gt;keytool -list -v -keystore cacerts_a.jks -storepass changeit | clip\r\n&gt;keytool -list -v -keystore cacerts_b.jks -storepass changeit | clip\r\n```\r\n\r\nI compared the output of the above two commands and found that there are significant differences between the `pem/cer` extracted from the `pfx` file and the given `cer` file with the trust chain. It seems to me that we shouldn&#39;t get the trust chain for the `pfx` file that is meant to have the server certificate.","title":"How to extract CA Certificate from .pfx file and add it to a trust store file","body":"<p>Thanks to @Yan and @dave_thompson_085 for the answer and info provided.</p>\n<p>Finally, we found out that the provided PFX file wasn't necessary. There was a <code>.cer</code> file that had the certificate chain to be trusted. I used this new <code>.cer</code> file and picked one <code>cacerts</code> from the JRE security library, copied it, changed its name, and added the <code>.cer</code> file to the copy of the <code>cacerts</code> file. The justification is that we may need to trust some of the certificates that are shipped with JRE and this will save some time.</p>\n<p>I used a desktop tool from &quot;IBM i Client Access Solutions&quot; called &quot;Key Management&quot; to import the <code>cer</code> file to the copy of the <code>cacerts</code> file. Now, I have a new <code>jks</code> file to be used for the Java program that will use the class <code>SecureAS400</code> to open a secured RPC Connection to IBM i.</p>\n<hr />\n<p><strong>Some extra stuff for verification and clarification:</strong></p>\n<p>I used the extracted <code>pem</code> file from the provided <code>pfx</code> file as mentioned by @Yan... I imported the <code>pem</code> file using <code>keytool import</code> to a copy of the cacerts file so now I have, say,  <code>cacerts_a.jks</code>.</p>\n<p>I understood that this <code>pfx</code> file has the root CA as well as the private key of the server certificate, and looks like there is a certificate in the middle so it has a total of 3 certificates.</p>\n<p>Then, I understood that ... no... I have to use a new <code>cer</code> file with the trust chain. I used this new <code>pem</code> file and imported it to a copy of the <code>cacerts</code> file and now I have, say, <code>cacerts_b.jks</code>.</p>\n<p>I tried to compare the output of the following two commands:</p>\n<pre><code>&gt;keytool -list -v -keystore cacerts_a.jks -storepass changeit | clip\n&gt;keytool -list -v -keystore cacerts_b.jks -storepass changeit | clip\n</code></pre>\n<p>I compared the output of the above two commands and found that there are significant differences between the <code>pem/cer</code> extracted from the <code>pfx</code> file and the given <code>cer</code> file with the trust chain. It seems to me that we shouldn't get the trust chain for the <code>pfx</code> file that is meant to have the server certificate.</p>\n"}],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77476517,"answer_count":2,"score":0,"last_activity_date":1700007333,"creation_date":1699901893,"question_id":77476217,"body_markdown":"I have a `.pfx` file that has multiple certificates, one of them is the signing CA certificate of a server certificate assigned to the IBM i Remote Command Server in DCM.\r\n\r\nI managed to use `openssl` and `certutil` to display the content of such a certificate, as follows:\r\n\r\n```\r\nopenssl x509 -passin pass:&lt;password&gt; -text -noout -in filename.pfx\r\nopenssl pkcs12 -in filename.pfx -passin pass:&lt;password&gt; -info -nokeys\r\ncertutil -v -dump DEVP20.pfx\r\n```\r\n\r\nAll the above are working fine and displaying content, but the problem is that I don&#39;t know how to analyze such output.\r\n\r\nAlso, the `keytool` is reporting that there are no entries in the keystone:\r\n\r\n```\r\nkeytool -list -v -keystore filename.pfx\r\nEnter keystore password: &lt;entery-password&gt;\r\nKeystore type: PKCS12\r\nKeystore provider: SunJSSE\r\n\r\nYour keystore contains 0 entries\r\n```\r\n\r\nAll I want is to create a new trust store or use an existing trust store such as `jssecacerts` to add the signing CA Certificate to the trust store.\r\n\r\nNote that in the output of the different commands above I see multiple certificates. I am not sure if they are part of the chain or related, and by checking the alias or friendly name, I can tell which one I want.\r\n\r\nThe objective is to be able to use the class `SecureAS400` from IBM Toolbox for Java to open a secure connection to the IBM i and invoke a command. So we have to load the trust store with the JVM.\r\n\r\nI appreciate your help.","title":"How to extract CA Certificate from .pfx file and add it to a trust store file","body":"<p>I have a <code>.pfx</code> file that has multiple certificates, one of them is the signing CA certificate of a server certificate assigned to the IBM i Remote Command Server in DCM.</p>\n<p>I managed to use <code>openssl</code> and <code>certutil</code> to display the content of such a certificate, as follows:</p>\n<pre><code>openssl x509 -passin pass:&lt;password&gt; -text -noout -in filename.pfx\nopenssl pkcs12 -in filename.pfx -passin pass:&lt;password&gt; -info -nokeys\ncertutil -v -dump DEVP20.pfx\n</code></pre>\n<p>All the above are working fine and displaying content, but the problem is that I don't know how to analyze such output.</p>\n<p>Also, the <code>keytool</code> is reporting that there are no entries in the keystone:</p>\n<pre><code>keytool -list -v -keystore filename.pfx\nEnter keystore password: &lt;entery-password&gt;\nKeystore type: PKCS12\nKeystore provider: SunJSSE\n\nYour keystore contains 0 entries\n</code></pre>\n<p>All I want is to create a new trust store or use an existing trust store such as <code>jssecacerts</code> to add the signing CA Certificate to the trust store.</p>\n<p>Note that in the output of the different commands above I see multiple certificates. I am not sure if they are part of the chain or related, and by checking the alias or friendly name, I can tell which one I want.</p>\n<p>The objective is to be able to use the class <code>SecureAS400</code> from IBM Toolbox for Java to open a secure connection to the IBM i and invoke a command. So we have to load the trust store with the JVM.</p>\n<p>I appreciate your help.</p>\n"},{"tags":["java","spring-boot","rabbitmq"],"comments":[{"owner":{"account_id":9925027,"reputation":1286,"user_id":7346947,"display_name":"Florian Cramer"},"score":0,"creation_date":1699976191,"post_id":77481584,"comment_id":136596595,"body_markdown":"Firstly, you should use the most recent bugfix version of Spring Boot (currently 2.7.19) instead of a version that is nearly one year old. Secondly, do not override dependency versions that are managed in the Spring Boot Parent pom unless you know what you are doing. I guess amqp-client 5.6.0 (released in January 2019) is just not compatible with Spring Boot 2.7.x. Spring Boot 2.7.17 uses amqp-client 5.14.3 instead","body":"Firstly, you should use the most recent bugfix version of Spring Boot (currently 2.7.19) instead of a version that is nearly one year old. Secondly, do not override dependency versions that are managed in the Spring Boot Parent pom unless you know what you are doing. I guess amqp-client 5.6.0 (released in January 2019) is just not compatible with Spring Boot 2.7.x. Spring Boot 2.7.17 uses amqp-client 5.14.3 instead"}],"owner":{"account_id":25362420,"reputation":21,"user_id":19177444,"display_name":"Hao Tan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700006899,"creation_date":1699973568,"question_id":77481584,"body_markdown":"I used springboot to integrate rabbitmq and encountered Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\r\nI&#39;m using \r\n\r\nRabbitMQ 3.12.4\r\n\r\nErlang 26.0.2\r\n\r\nIs there any way to quickly locate it?\r\n\r\nenvironment:\r\n\r\n```\r\n&lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.8&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;mybatis-plus.version&gt;3.4.2&lt;/mybatis-plus.version&gt;\r\n        &lt;hutool.version&gt;5.0.6&lt;/hutool.version&gt;\r\n        &lt;redisson.version&gt;3.15.6&lt;/redisson.version&gt;\r\n        &lt;snakeyaml.version&gt;1.27&lt;/snakeyaml.version&gt;\r\n        &lt;protostuff-api&gt;1.0.10&lt;/protostuff-api&gt;\r\n        &lt;zkClient.version&gt;0.1&lt;/zkClient.version&gt;\r\n        &lt;apache.httpclient.version&gt;4.5.9&lt;/apache.httpclient.version&gt;\r\n        &lt;rabbit.client.version&gt;5.6.0&lt;/rabbit.client.version&gt;\r\n        &lt;apache.commons.version&gt;3.12.0&lt;/apache.commons.version&gt;\r\n        &lt;fastjson.version&gt;1.2.51&lt;/fastjson.version&gt;\r\n        &lt;springboot.version&gt;2.7.8&lt;/springboot.version&gt;\r\n    &lt;/properties&gt;\r\n&lt;dependency&gt;\r\n&lt;dependencyManagement&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\r\n                &lt;version&gt;${springboot.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\r\n                &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\r\n                &lt;version&gt;${rabbit.client.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n &lt;/dependencyManagement&gt;\r\n```\r\n\r\n\r\nError message:\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;webConfig&#39;: Unsatisfied dependency expressed through field &#39;gateWayInterceptor&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;gateWayInterceptor&#39;: Unsatisfied dependency expressed through field &#39;identityCheck&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;identityCheck&#39;: Unsatisfied dependency expressed through field &#39;imUserService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;imUserServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;messageProducer&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;messageProducer&#39;: Unsatisfied dependency expressed through field &#39;rabbitTemplate&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitTemplate&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method &#39;rabbitTemplate&#39; parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitConnectionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method &#39;rabbitConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\r\n\tat cc.topsystem.im.service.ServiceApplication.main(ServiceApplication.java:13)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;gateWayInterceptor&#39;: Unsatisfied dependency expressed through field &#39;identityCheck&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;identityCheck&#39;: Unsatisfied dependency expressed through field &#39;imUserService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;imUserServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;messageProducer&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;messageProducer&#39;: Unsatisfied dependency expressed through field &#39;rabbitTemplate&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitTemplate&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method &#39;rabbitTemplate&#39; parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitConnectionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method &#39;rabbitConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\r\n\t... 21 common frames omitted\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;identityCheck&#39;: Unsatisfied dependency expressed through field &#39;imUserService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;imUserServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;messageProducer&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;messageProducer&#39;: Unsatisfied dependency expressed through field &#39;rabbitTemplate&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitTemplate&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method &#39;rabbitTemplate&#39; parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitConnectionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method &#39;rabbitConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\r\n\t... 36 common frames omitted\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;imUserServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;messageProducer&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;messageProducer&#39;: Unsatisfied dependency expressed through field &#39;rabbitTemplate&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitTemplate&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method &#39;rabbitTemplate&#39; parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitConnectionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method &#39;rabbitConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\r\n\t... 51 common frames omitted\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;messageProducer&#39;: Unsatisfied dependency expressed through field &#39;rabbitTemplate&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitTemplate&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method &#39;rabbitTemplate&#39; parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitConnectionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method &#39;rabbitConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\r\n\t... 66 common frames omitted\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitTemplate&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method &#39;rabbitTemplate&#39; parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitConnectionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method &#39;rabbitConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\r\n\t... 81 common frames omitted\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;rabbitConnectionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method &#39;rabbitConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n\t... 95 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;rabbitConnectionFactoryBeanConfigurer&#39; defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:555)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n\t... 110 common frames omitted\r\nCaused by: java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\r\n\tat sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)\r\n\tat sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)\r\n\tat sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\r\n\tat sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)\r\n\tat sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)\r\n\tat sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\r\n\tat sun.reflect.generics.repository.ConstructorRepository.getParameterTypes(ConstructorRepository.java:94)\r\n\tat java.lang.reflect.Executable.getGenericParameterTypes(Executable.java:284)\r\n\tat java.lang.reflect.Method.getGenericParameterTypes(Method.java:282)\r\n\tat org.springframework.core.MethodParameter.getGenericParameterType(MethodParameter.java:513)\r\n\tat org.springframework.core.SerializableTypeWrapper$MethodParameterTypeProvider.getType(SerializableTypeWrapper.java:291)\r\n\tat org.springframework.core.SerializableTypeWrapper.forTypeProvider(SerializableTypeWrapper.java:107)\r\n\tat org.springframework.core.ResolvableType.forType(ResolvableType.java:1420)\r\n\tat org.springframework.core.ResolvableType.forMethodParameter(ResolvableType.java:1341)\r\n\tat org.springframework.core.ResolvableType.forMethodParameter(ResolvableType.java:1323)\r\n\tat org.springframework.core.ResolvableType.forMethodParameter(ResolvableType.java:1290)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.getResolvableType(DependencyDescriptor.java:314)\r\n\tat org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.checkGenericTypeMatch(GenericTypeAwareAutowireCandidateResolver.java:77)\r\n\tat org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.isAutowireCandidate(GenericTypeAwareAutowireCandidateResolver.java:69)\r\n\tat org.springframework.beans.factory.annotation.QualifierAnnotationAutowireCandidateResolver.isAutowireCandidate(QualifierAnnotationAutowireCandidateResolver.java:146)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:864)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:823)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\t... 120 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: com.rabbitmq.client.impl.CredentialsRefreshService\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n\tat java.lang.Class.forName(Class.java:348)\r\n\tat sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)\r\n\t... 152 common frames omitted\r\n\r\n\r\n```\r\n\r\n\r\nI tried to upgrade the springboot version, but it didnât work after the upgrade.","title":"I used springboot to integrate rabbitmq and encountered Type com.rabbitmq.client.impl.CredentialsRefreshService not present","body":"<p>I used springboot to integrate rabbitmq and encountered Type com.rabbitmq.client.impl.CredentialsRefreshService not present</p>\n<p>I'm using</p>\n<p>RabbitMQ 3.12.4</p>\n<p>Erlang 26.0.2</p>\n<p>Is there any way to quickly locate it?</p>\n<p>environment:</p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;mybatis-plus.version&gt;3.4.2&lt;/mybatis-plus.version&gt;\n        &lt;hutool.version&gt;5.0.6&lt;/hutool.version&gt;\n        &lt;redisson.version&gt;3.15.6&lt;/redisson.version&gt;\n        &lt;snakeyaml.version&gt;1.27&lt;/snakeyaml.version&gt;\n        &lt;protostuff-api&gt;1.0.10&lt;/protostuff-api&gt;\n        &lt;zkClient.version&gt;0.1&lt;/zkClient.version&gt;\n        &lt;apache.httpclient.version&gt;4.5.9&lt;/apache.httpclient.version&gt;\n        &lt;rabbit.client.version&gt;5.6.0&lt;/rabbit.client.version&gt;\n        &lt;apache.commons.version&gt;3.12.0&lt;/apache.commons.version&gt;\n        &lt;fastjson.version&gt;1.2.51&lt;/fastjson.version&gt;\n        &lt;springboot.version&gt;2.7.8&lt;/springboot.version&gt;\n    &lt;/properties&gt;\n&lt;dependency&gt;\n&lt;dependencyManagement&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\n                &lt;version&gt;${springboot.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\n                &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\n                &lt;version&gt;${rabbit.client.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n &lt;/dependencyManagement&gt;\n</code></pre>\n<p>Error message:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webConfig': Unsatisfied dependency expressed through field 'gateWayInterceptor'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gateWayInterceptor': Unsatisfied dependency expressed through field 'identityCheck'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'identityCheck': Unsatisfied dependency expressed through field 'imUserService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'imUserServiceImpl': Unsatisfied dependency expressed through field 'messageProducer'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'messageProducer': Unsatisfied dependency expressed through field 'rabbitTemplate'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitTemplate' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method 'rabbitTemplate' parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitConnectionFactory' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method 'rabbitConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\n    at cc.topsystem.im.service.ServiceApplication.main(ServiceApplication.java:13)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gateWayInterceptor': Unsatisfied dependency expressed through field 'identityCheck'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'identityCheck': Unsatisfied dependency expressed through field 'imUserService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'imUserServiceImpl': Unsatisfied dependency expressed through field 'messageProducer'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'messageProducer': Unsatisfied dependency expressed through field 'rabbitTemplate'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitTemplate' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method 'rabbitTemplate' parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitConnectionFactory' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method 'rabbitConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\n    ... 21 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'identityCheck': Unsatisfied dependency expressed through field 'imUserService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'imUserServiceImpl': Unsatisfied dependency expressed through field 'messageProducer'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'messageProducer': Unsatisfied dependency expressed through field 'rabbitTemplate'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitTemplate' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method 'rabbitTemplate' parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitConnectionFactory' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method 'rabbitConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\n    ... 36 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'imUserServiceImpl': Unsatisfied dependency expressed through field 'messageProducer'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'messageProducer': Unsatisfied dependency expressed through field 'rabbitTemplate'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitTemplate' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method 'rabbitTemplate' parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitConnectionFactory' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method 'rabbitConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\n    ... 51 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'messageProducer': Unsatisfied dependency expressed through field 'rabbitTemplate'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitTemplate' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method 'rabbitTemplate' parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitConnectionFactory' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method 'rabbitConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\n    ... 66 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitTemplate' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitTemplateConfiguration.class]: Unsatisfied dependency expressed through method 'rabbitTemplate' parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitConnectionFactory' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method 'rabbitConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\n    ... 81 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'rabbitConnectionFactory' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unsatisfied dependency expressed through method 'rabbitConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 95 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'rabbitConnectionFactoryBeanConfigurer' defined in class path resource [org/springframework/boot/autoconfigure/amqp/RabbitAutoConfiguration$RabbitConnectionFactoryCreator.class]: Unexpected exception during bean creation; nested exception is java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:555)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$201/20514539.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 110 common frames omitted\nCaused by: java.lang.TypeNotPresentException: Type com.rabbitmq.client.impl.CredentialsRefreshService not present\n    at sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)\n    at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)\n    at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\n    at sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)\n    at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)\n    at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)\n    at sun.reflect.generics.repository.ConstructorRepository.getParameterTypes(ConstructorRepository.java:94)\n    at java.lang.reflect.Executable.getGenericParameterTypes(Executable.java:284)\n    at java.lang.reflect.Method.getGenericParameterTypes(Method.java:282)\n    at org.springframework.core.MethodParameter.getGenericParameterType(MethodParameter.java:513)\n    at org.springframework.core.SerializableTypeWrapper$MethodParameterTypeProvider.getType(SerializableTypeWrapper.java:291)\n    at org.springframework.core.SerializableTypeWrapper.forTypeProvider(SerializableTypeWrapper.java:107)\n    at org.springframework.core.ResolvableType.forType(ResolvableType.java:1420)\n    at org.springframework.core.ResolvableType.forMethodParameter(ResolvableType.java:1341)\n    at org.springframework.core.ResolvableType.forMethodParameter(ResolvableType.java:1323)\n    at org.springframework.core.ResolvableType.forMethodParameter(ResolvableType.java:1290)\n    at org.springframework.beans.factory.config.DependencyDescriptor.getResolvableType(DependencyDescriptor.java:314)\n    at org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.checkGenericTypeMatch(GenericTypeAwareAutowireCandidateResolver.java:77)\n    at org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.isAutowireCandidate(GenericTypeAwareAutowireCandidateResolver.java:69)\n    at org.springframework.beans.factory.annotation.QualifierAnnotationAutowireCandidateResolver.isAutowireCandidate(QualifierAnnotationAutowireCandidateResolver.java:146)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:864)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:823)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    ... 120 common frames omitted\nCaused by: java.lang.ClassNotFoundException: com.rabbitmq.client.impl.CredentialsRefreshService\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.Class.forName(Class.java:348)\n    at sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)\n    ... 152 common frames omitted\n\n\n</code></pre>\n<p>I tried to upgrade the springboot version, but it didnât work after the upgrade.</p>\n"},{"tags":["java","jackson","jodatime"],"comments":[{"owner":{"account_id":40168,"reputation":7421,"user_id":116301,"accept_rate":89,"display_name":"GuiSim"},"score":0,"creation_date":1470312849,"post_id":38754147,"comment_id":64905153,"body_markdown":"The JodaModule will serialize DateTime instances into a Unix Timestamp. If I run your example, I get the following String `&quot;1403098016000&quot;`.","body":"The JodaModule will serialize DateTime instances into a Unix Timestamp. If I run your example, I get the following String <code>&quot;1403098016000&quot;</code>."}],"answers":[{"tags":[],"owner":{"account_id":1528364,"reputation":125614,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1700006498,"creation_date":1470312821,"answer_id":38767028,"question_id":38754147,"body_markdown":"[`DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE`][1] is a **deserialization** feature and it&#39;s not taken into consideration when performing **serialization**.\r\n\r\nOne possible solution is to create an `ObjectMapper` instance with a `TimeZone`:\r\n\r\n    ObjectMapper mapper =  new ObjectMapper()\r\n                .enable(SerializationFeature.INDENT_OUTPUT)\r\n                .disable(DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE)\r\n                .registerModule(new JodaModule())\r\n                .setTimeZone(TimeZone.getTimeZone(&quot;GMT-7&quot;));\r\n\r\nFor more details, check the [`DateTimeSerializer`][2] code.\r\n\r\n  [1]: http://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/DeserializationFeature.html#ADJUST_DATES_TO_CONTEXT_TIME_ZONE\r\n  [2]: https://github.com/FasterXML/jackson-datatype-joda/blob/master/src/main/java/com/fasterxml/jackson/datatype/joda/ser/DateTimeSerializer.java","title":"Jackson ObjectMapper adjusts dates to context timezone when deserializing even if explicitly disabled","body":"<p><a href=\"http://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/DeserializationFeature.html#ADJUST_DATES_TO_CONTEXT_TIME_ZONE\" rel=\"nofollow noreferrer\"><code>DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE</code></a> is a <strong>deserialization</strong> feature and it's not taken into consideration when performing <strong>serialization</strong>.</p>\n<p>One possible solution is to create an <code>ObjectMapper</code> instance with a <code>TimeZone</code>:</p>\n<pre><code>ObjectMapper mapper =  new ObjectMapper()\n            .enable(SerializationFeature.INDENT_OUTPUT)\n            .disable(DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE)\n            .registerModule(new JodaModule())\n            .setTimeZone(TimeZone.getTimeZone(&quot;GMT-7&quot;));\n</code></pre>\n<p>For more details, check the <a href=\"https://github.com/FasterXML/jackson-datatype-joda/blob/master/src/main/java/com/fasterxml/jackson/datatype/joda/ser/DateTimeSerializer.java\" rel=\"nofollow noreferrer\"><code>DateTimeSerializer</code></a> code.</p>\n"}],"owner":{"account_id":2449525,"reputation":331,"user_id":2136140,"accept_rate":79,"display_name":"Aydin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9100,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":38767028,"answer_count":1,"score":9,"last_activity_date":1700006498,"creation_date":1470260702,"question_id":38754147,"body_markdown":"This is the format of the date in JSON that I want to serialize/deserialize: \r\n\r\n&gt; &quot;2014-06-18T06:26:56-07:00&quot;\r\n\r\nThe Joda DateTime field is declared as follows:\r\n\r\n  \r\n      @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;)\r\n        private DateTime dueTime;\r\n\r\n\r\nThe mapper:\r\n\r\n    ObjectMapper mapper = new ObjectMapper().enable(SerializationFeature.INDENT_OUTPUT)\r\n                .registerModule(new JodaModule())\r\n                .disable(DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE);\r\n\r\n    mapper.writeValueAsString(objectWithDT)).as(&quot;application/json&quot;)\r\n\r\nIn the resulting JSON the date with timezone above changes to:\r\n\r\n    2014-06-18T13:26:56+0000\r\n\r\n\r\n\r\n","title":"Jackson ObjectMapper adjusts dates to context timezone when deserializing even if explicitly disabled","body":"<p>This is the format of the date in JSON that I want to serialize/deserialize: </p>\n\n<blockquote>\n  <p>\"2014-06-18T06:26:56-07:00\"</p>\n</blockquote>\n\n<p>The Joda DateTime field is declared as follows:</p>\n\n<pre><code>  @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = \"yyyy-MM-dd'T'HH:mm:ssZ\")\n    private DateTime dueTime;\n</code></pre>\n\n<p>The mapper:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper().enable(SerializationFeature.INDENT_OUTPUT)\n            .registerModule(new JodaModule())\n            .disable(DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE);\n\nmapper.writeValueAsString(objectWithDT)).as(\"application/json\")\n</code></pre>\n\n<p>In the resulting JSON the date with timezone above changes to:</p>\n\n<pre><code>2014-06-18T13:26:56+0000\n</code></pre>\n"},{"tags":["java","animation","javafx","timeline"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1699986490,"post_id":77478251,"comment_id":136598669,"body_markdown":"You could also add in additional `KeyFrame`s. For example, `new KeyFrame(Duration.seconds(2), new KeyValue(selectedPane.rotateProperty(), selectedPane.getRotate()))` will make the rotation start at 2 seconds.","body":"You could also add in additional <code>KeyFrame</code>s. For example, <code>new KeyFrame(Duration.seconds(2), new KeyValue(selectedPane.rotateProperty(), selectedPane.getRotate()))</code> will make the rotation start at 2 seconds."}],"answers":[{"tags":[],"owner":{"account_id":26261437,"reputation":60,"user_id":19932696,"display_name":"Thomas Lin&#233;"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699953242,"creation_date":1699952816,"answer_id":77479342,"question_id":77478251,"body_markdown":"To play a keyframe only after one is finished you can create different Timeline and in the timeline.setOnFinished() function you can play the next one.  \r\nFor your example it would look like this :\r\n\r\n    Pane selectedPane = select_pane.getValue();\r\n                    \r\n    double rootWidth = root_pane.getWidth();\r\n    double rootHeight = root_pane.getHeight();\r\n    double sixthWidth = rootWidth / 6;\r\n\r\n    KeyValue moveTopLeftX = new KeyValue(selectedPane.layoutXProperty(), 0);\r\n    KeyValue moveDownY = new KeyValue(selectedPane.layoutYProperty(), root_pane.getHeight()                   -    selectedPane.getHeight());\r\n\r\n    KeyValue moveRightX = new KeyValue(selectedPane.layoutXProperty(), sixthWidth);\r\n    KeyValue rotate180 = new KeyValue(selectedPane.rotateProperty(), 180);\r\n    KeyValue moveToTopY = new KeyValue(selectedPane.layoutYProperty(), 0);\r\n\r\n    KeyFrame startFrame = new KeyFrame(Duration.seconds(3), moveTopLeftX, moveToTopY);\r\n    KeyFrame moveToRight = new KeyFrame(Duration.seconds(2), moveRightX);\r\n    KeyFrame rotateBack = new KeyFrame(Duration.seconds(3), rotate180);\r\n    KeyFrame moveToBottom = new KeyFrame(Duration.seconds(6), moveDownY);\r\n    KeyFrame moveToTop = new KeyFrame(Duration.seconds(6), moveToTopY);\r\n\r\n    Timeline timelineStart = new Timeline(startFrame, moveToBottom, moveToRight);\r\n\r\n    Timeline timelineRotateBack = new Timeline(rotateBack);\r\n\r\n    Timeline timelineMoveToTop = new Timeline(moveToTop);\r\n\r\n    timelineStart.setOnFinished(new EventHandler&lt;ActionEvent&gt;() {\r\n                @Override\r\n                public void handle(ActionEvent event) {\r\n                    timelineRotateBack.play();\r\n                }\r\n            });\r\n\r\n    timelineRotateBack.setOnFinished(new EventHandler&lt;ActionEvent&gt;() {\r\n                @Override\r\n                public void handle(ActionEvent event) {\r\n                    timelineMoveToTop.play();\r\n                }\r\n            });\r\n\r\n    timelineStart.play();\r\n\r\nHere it will play all these KeyFrames (startFrame, moveToBottom, moveToRight) first and when all animations are finished it will play rotateBack KeyFrame and when this one is finished it will play moveToTop","title":"JavaFX animations playing simultaneously in timeline","body":"<p>To play a keyframe only after one is finished you can create different Timeline and in the timeline.setOnFinished() function you can play the next one.<br />\nFor your example it would look like this :</p>\n<pre><code>Pane selectedPane = select_pane.getValue();\n                \ndouble rootWidth = root_pane.getWidth();\ndouble rootHeight = root_pane.getHeight();\ndouble sixthWidth = rootWidth / 6;\n\nKeyValue moveTopLeftX = new KeyValue(selectedPane.layoutXProperty(), 0);\nKeyValue moveDownY = new KeyValue(selectedPane.layoutYProperty(), root_pane.getHeight()                   -    selectedPane.getHeight());\n\nKeyValue moveRightX = new KeyValue(selectedPane.layoutXProperty(), sixthWidth);\nKeyValue rotate180 = new KeyValue(selectedPane.rotateProperty(), 180);\nKeyValue moveToTopY = new KeyValue(selectedPane.layoutYProperty(), 0);\n\nKeyFrame startFrame = new KeyFrame(Duration.seconds(3), moveTopLeftX, moveToTopY);\nKeyFrame moveToRight = new KeyFrame(Duration.seconds(2), moveRightX);\nKeyFrame rotateBack = new KeyFrame(Duration.seconds(3), rotate180);\nKeyFrame moveToBottom = new KeyFrame(Duration.seconds(6), moveDownY);\nKeyFrame moveToTop = new KeyFrame(Duration.seconds(6), moveToTopY);\n\nTimeline timelineStart = new Timeline(startFrame, moveToBottom, moveToRight);\n\nTimeline timelineRotateBack = new Timeline(rotateBack);\n\nTimeline timelineMoveToTop = new Timeline(moveToTop);\n\ntimelineStart.setOnFinished(new EventHandler&lt;ActionEvent&gt;() {\n            @Override\n            public void handle(ActionEvent event) {\n                timelineRotateBack.play();\n            }\n        });\n\ntimelineRotateBack.setOnFinished(new EventHandler&lt;ActionEvent&gt;() {\n            @Override\n            public void handle(ActionEvent event) {\n                timelineMoveToTop.play();\n            }\n        });\n\ntimelineStart.play();\n</code></pre>\n<p>Here it will play all these KeyFrames (startFrame, moveToBottom, moveToRight) first and when all animations are finished it will play rotateBack KeyFrame and when this one is finished it will play moveToTop</p>\n"},{"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700005521,"creation_date":1700004623,"answer_id":77484423,"question_id":77478251,"body_markdown":"**A Transition is a good fit for this problem**\r\n\r\nAn example is provided which is based on a [`SequentialTransition`](https://docs.oracle.com/javase/8/javafx/visual-effects-tutorial/basics.htm#BEIIJJJB), rather than a `Timeline`.  You could use a `Timeline` instead, as noted in other comments or answers.  However, for the functionality you describe, using transitions seems to be a better fit.  \r\n\r\nThe example sequences various transactions of types `TranslateTransition` and `RotateTransition` to perform the required animation.\r\n\r\nIf you wanted parts of the sequence to be performed in parallel, then you can use a `ParallelTransition` for those portions (parallel and sequential transitions can be combined if desired).\r\n\r\n**Use translate properties for animation**\r\n\r\nThe translateX/Y/Z properties should be used when performing animation rather than the layoutX/Y properties.  While you can [animate layout changes][1], that is an advanced topic and not recommended for somebody pretty new to JavaFX.  The example provided here is based on translate properties and not layout properties.\r\n\r\n**Choose an appropriate Interpolator**\r\n\r\nThe default interpolater for key frames is [`LINEAR`][2], and for transitions is [`EASE_BOTH`][3]. Choose an interpolator appropriate for your application by setting the interpolator on your key frames or transitions.  For this example, I felt that the default `EASE_BOTH` interpolation for transitions was the best fit, resulting in a smoother animation feel.\r\n\r\n**Example Code**\r\n\r\n    import javafx.animation.*;\r\n    import javafx.application.Application;\r\n    import javafx.scene.*;\r\n    import javafx.scene.layout.*;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.Duration;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class TransitionApp extends Application {\r\n        private static final Color INDIA_INK = Color.web(&quot;#3d3f4a&quot;);\r\n        private static final double W = 400, H = 400;\r\n        private static final double BOX_W = 20, BOX_H = 20;\r\n        private static final double BOX_TOP_SIDE_INDICATOR_H = 3;\r\n        private static final double MOVE_STEP = 50;\r\n        private static final Duration TIME_STEP = Duration.seconds(3);\r\n    \r\n        public void start(Stage stage) throws IOException {\r\n            Group box = createBox(BOX_W, BOX_H, BOX_TOP_SIDE_INDICATOR_H);\r\n            box.setTranslateX(W / 2 - BOX_W / 2);\r\n            box.setTranslateY(H / 2 - BOX_H / 2);\r\n    \r\n            Pane root = new Pane(box);\r\n            root.setBackground(Background.fill(INDIA_INK));\r\n            root.setPrefSize(W, H);\r\n    \r\n            stage.setResizable(false);\r\n            stage.setScene(new Scene(root));\r\n            stage.show();\r\n    \r\n            SequentialTransition transition = createTransition(box);\r\n            transition.play();\r\n        }\r\n    \r\n        private SequentialTransition createTransition(Group box) {\r\n            TranslateTransition moveToTopLeft = new TranslateTransition(TIME_STEP);\r\n            moveToTopLeft.setToX(0);\r\n            moveToTopLeft.setToY(0);\r\n    \r\n            TranslateTransition moveToBottom = new TranslateTransition(TIME_STEP.multiply(2));\r\n            moveToBottom.setToY(H - BOX_H);\r\n    \r\n            TranslateTransition moveRight = new TranslateTransition(TIME_STEP);\r\n            moveRight.setToX(MOVE_STEP);\r\n    \r\n            RotateTransition rotate180 = new RotateTransition(TIME_STEP);\r\n            rotate180.setByAngle(180);\r\n    \r\n            TranslateTransition moveToTop = new TranslateTransition(TIME_STEP.multiply(2));\r\n            moveToTop.setToY(0);\r\n    \r\n            SequentialTransition sequentialTransition = new SequentialTransition(\r\n                    box,\r\n                    moveToTopLeft, moveToBottom, moveRight, rotate180, moveToTop\r\n            );\r\n            sequentialTransition.setAutoReverse(true);\r\n            sequentialTransition.setCycleCount(Transition.INDEFINITE);\r\n            \r\n            return sequentialTransition;\r\n        }\r\n    \r\n        private static Group createBox(double w, double h, double topSideIndicatorH) {\r\n            Rectangle rectangle = new Rectangle(\r\n                    w, h, Color.GREEN\r\n            );\r\n    \r\n            Rectangle topLine = new Rectangle(\r\n                    w, topSideIndicatorH, Color.RED\r\n            );\r\n    \r\n            return new Group(\r\n                    rectangle, topLine\r\n            );\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/16828234/animation-upon-layout-changes/16831241#16831241\r\n  [2]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/animation/Interpolator.html#LINEAR\r\n  [3]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/animation/Interpolator.html","title":"JavaFX animations playing simultaneously in timeline","body":"<p><strong>A Transition is a good fit for this problem</strong></p>\n<p>An example is provided which is based on a <a href=\"https://docs.oracle.com/javase/8/javafx/visual-effects-tutorial/basics.htm#BEIIJJJB\" rel=\"nofollow noreferrer\"><code>SequentialTransition</code></a>, rather than a <code>Timeline</code>.  You could use a <code>Timeline</code> instead, as noted in other comments or answers.  However, for the functionality you describe, using transitions seems to be a better fit.</p>\n<p>The example sequences various transactions of types <code>TranslateTransition</code> and <code>RotateTransition</code> to perform the required animation.</p>\n<p>If you wanted parts of the sequence to be performed in parallel, then you can use a <code>ParallelTransition</code> for those portions (parallel and sequential transitions can be combined if desired).</p>\n<p><strong>Use translate properties for animation</strong></p>\n<p>The translateX/Y/Z properties should be used when performing animation rather than the layoutX/Y properties.  While you can <a href=\"https://stackoverflow.com/questions/16828234/animation-upon-layout-changes/16831241#16831241\">animate layout changes</a>, that is an advanced topic and not recommended for somebody pretty new to JavaFX.  The example provided here is based on translate properties and not layout properties.</p>\n<p><strong>Choose an appropriate Interpolator</strong></p>\n<p>The default interpolater for key frames is <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/animation/Interpolator.html#LINEAR\" rel=\"nofollow noreferrer\"><code>LINEAR</code></a>, and for transitions is <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/animation/Interpolator.html\" rel=\"nofollow noreferrer\"><code>EASE_BOTH</code></a>. Choose an interpolator appropriate for your application by setting the interpolator on your key frames or transitions.  For this example, I felt that the default <code>EASE_BOTH</code> interpolation for transitions was the best fit, resulting in a smoother animation feel.</p>\n<p><strong>Example Code</strong></p>\n<pre><code>import javafx.animation.*;\nimport javafx.application.Application;\nimport javafx.scene.*;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\nimport javafx.util.Duration;\n\nimport java.io.IOException;\n\npublic class TransitionApp extends Application {\n    private static final Color INDIA_INK = Color.web(&quot;#3d3f4a&quot;);\n    private static final double W = 400, H = 400;\n    private static final double BOX_W = 20, BOX_H = 20;\n    private static final double BOX_TOP_SIDE_INDICATOR_H = 3;\n    private static final double MOVE_STEP = 50;\n    private static final Duration TIME_STEP = Duration.seconds(3);\n\n    public void start(Stage stage) throws IOException {\n        Group box = createBox(BOX_W, BOX_H, BOX_TOP_SIDE_INDICATOR_H);\n        box.setTranslateX(W / 2 - BOX_W / 2);\n        box.setTranslateY(H / 2 - BOX_H / 2);\n\n        Pane root = new Pane(box);\n        root.setBackground(Background.fill(INDIA_INK));\n        root.setPrefSize(W, H);\n\n        stage.setResizable(false);\n        stage.setScene(new Scene(root));\n        stage.show();\n\n        SequentialTransition transition = createTransition(box);\n        transition.play();\n    }\n\n    private SequentialTransition createTransition(Group box) {\n        TranslateTransition moveToTopLeft = new TranslateTransition(TIME_STEP);\n        moveToTopLeft.setToX(0);\n        moveToTopLeft.setToY(0);\n\n        TranslateTransition moveToBottom = new TranslateTransition(TIME_STEP.multiply(2));\n        moveToBottom.setToY(H - BOX_H);\n\n        TranslateTransition moveRight = new TranslateTransition(TIME_STEP);\n        moveRight.setToX(MOVE_STEP);\n\n        RotateTransition rotate180 = new RotateTransition(TIME_STEP);\n        rotate180.setByAngle(180);\n\n        TranslateTransition moveToTop = new TranslateTransition(TIME_STEP.multiply(2));\n        moveToTop.setToY(0);\n\n        SequentialTransition sequentialTransition = new SequentialTransition(\n                box,\n                moveToTopLeft, moveToBottom, moveRight, rotate180, moveToTop\n        );\n        sequentialTransition.setAutoReverse(true);\n        sequentialTransition.setCycleCount(Transition.INDEFINITE);\n        \n        return sequentialTransition;\n    }\n\n    private static Group createBox(double w, double h, double topSideIndicatorH) {\n        Rectangle rectangle = new Rectangle(\n                w, h, Color.GREEN\n        );\n\n        Rectangle topLine = new Rectangle(\n                w, topSideIndicatorH, Color.RED\n        );\n\n        return new Group(\n                rectangle, topLine\n        );\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29897147,"reputation":23,"user_id":22911741,"display_name":"Bursh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77479342,"answer_count":2,"score":2,"last_activity_date":1700005521,"creation_date":1699937695,"question_id":77478251,"body_markdown":"I&#39;m pretty new to JavaFX. I am trying to make this timeline where each keyframe happens after the previous one has finished. So far, each of the steps happen one after the other like I want it to. However, the rotateBack keyframe starts rotating my object as soon as I play the animation. Any tips on how to make rotateBack only play right after moveToRight? Also, I would like for rotateBack to finish its rotation before moveToTop plays. Thanks.\r\n\r\n    \r\n```\r\nPane selectedPane = select_pane.getValue();\r\n                    \r\n    double rootWidth = root_pane.getWidth();\r\n    double rootHeight = root_pane.getHeight();\r\n    double sixthWidth = rootWidth / 6;\r\n\r\n    KeyValue moveTopLeftX = new KeyValue(selectedPane.layoutXProperty(), 0);\r\n    KeyValue moveDownY = new KeyValue(selectedPane.layoutYProperty(), root_pane.getHeight()                   -    selectedPane.getHeight());\r\n\r\n    KeyValue moveRightX = new KeyValue(selectedPane.layoutXProperty(), sixthWidth);\r\n    KeyValue rotate180 = new KeyValue(selectedPane.rotateProperty(), 180);\r\n    KeyValue moveToTopY = new KeyValue(selectedPane.layoutYProperty(), 0);\r\n\r\n    KeyFrame startFrame = new KeyFrame(Duration.seconds(3), moveTopLeftX, moveToTopY);\r\n    KeyFrame moveToRight = new KeyFrame(Duration.seconds(2), moveRightX);\r\n    KeyFrame rotateBack = new KeyFrame(Duration.seconds(3), rotate180);\r\n    KeyFrame moveToBottom = new KeyFrame(Duration.seconds(6), moveDownY);\r\n    KeyFrame moveToTop = new KeyFrame(Duration.seconds(6), moveToTopY);\r\n\r\n    Timeline timeline = new Timeline(startFrame, moveToBottom, moveToRight, rotateBack, moveToTop);\r\n\r\n    timeline.play();\r\n```\r\n\r\nWhat I&#39;ve tried so far is shown in the code above. Any tips very much appreciated.","title":"JavaFX animations playing simultaneously in timeline","body":"<p>I'm pretty new to JavaFX. I am trying to make this timeline where each keyframe happens after the previous one has finished. So far, each of the steps happen one after the other like I want it to. However, the rotateBack keyframe starts rotating my object as soon as I play the animation. Any tips on how to make rotateBack only play right after moveToRight? Also, I would like for rotateBack to finish its rotation before moveToTop plays. Thanks.</p>\n<pre><code>Pane selectedPane = select_pane.getValue();\n                    \n    double rootWidth = root_pane.getWidth();\n    double rootHeight = root_pane.getHeight();\n    double sixthWidth = rootWidth / 6;\n\n    KeyValue moveTopLeftX = new KeyValue(selectedPane.layoutXProperty(), 0);\n    KeyValue moveDownY = new KeyValue(selectedPane.layoutYProperty(), root_pane.getHeight()                   -    selectedPane.getHeight());\n\n    KeyValue moveRightX = new KeyValue(selectedPane.layoutXProperty(), sixthWidth);\n    KeyValue rotate180 = new KeyValue(selectedPane.rotateProperty(), 180);\n    KeyValue moveToTopY = new KeyValue(selectedPane.layoutYProperty(), 0);\n\n    KeyFrame startFrame = new KeyFrame(Duration.seconds(3), moveTopLeftX, moveToTopY);\n    KeyFrame moveToRight = new KeyFrame(Duration.seconds(2), moveRightX);\n    KeyFrame rotateBack = new KeyFrame(Duration.seconds(3), rotate180);\n    KeyFrame moveToBottom = new KeyFrame(Duration.seconds(6), moveDownY);\n    KeyFrame moveToTop = new KeyFrame(Duration.seconds(6), moveToTopY);\n\n    Timeline timeline = new Timeline(startFrame, moveToBottom, moveToRight, rotateBack, moveToTop);\n\n    timeline.play();\n</code></pre>\n<p>What I've tried so far is shown in the code above. Any tips very much appreciated.</p>\n"},{"tags":["java","jakarta-ee","proxy","jax-rs","server-sent-events"],"owner":{"account_id":29904438,"reputation":1,"user_id":22917327,"display_name":"LooneyTuunz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700004817,"creation_date":1700004817,"question_id":77484431,"body_markdown":"How can I build a JAX RS Resource that proxies requests and responses? -- that is I can forward request and response bodies, possibly changing minor details like headers\r\n\r\nHave tried forwarding requests to/from a client within a resource definition, but this does not let me mix server-sent events and regular responses and makes it hard to know if the response changed when it is reencoded with JAX RS.","title":"JAX RS Resource that proxies requests?","body":"<p>How can I build a JAX RS Resource that proxies requests and responses? -- that is I can forward request and response bodies, possibly changing minor details like headers</p>\n<p>Have tried forwarding requests to/from a client within a resource definition, but this does not let me mix server-sent events and regular responses and makes it hard to know if the response changed when it is reencoded with JAX RS.</p>\n"},{"tags":["java","maven","maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1539358574,"post_id":52776674,"comment_id":92487034,"body_markdown":"I would suggest to create a packaging `websphereejb` and make it that way..otherwise it&#39;s not really possible...","body":"I would suggest to create a packaging <code>websphereejb</code> and make it that way..otherwise it&#39;s not really possible..."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1549397498,"post_id":52776674,"comment_id":95885749,"body_markdown":"@khmarbaise I would need to write a component.xml for that. Do you have any reference for writing such a file?","body":"@khmarbaise I would need to write a component.xml for that. Do you have any reference for writing such a file?"}],"answers":[{"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1700038093,"post_id":77484409,"comment_id":136604557,"body_markdown":"Thanks, but this is what I described as &quot;workaround&quot; in the question. Furthermore, newer Maven versions now allow to activate a profile based on packaging.","body":"Thanks, but this is what I described as &quot;workaround&quot; in the question. Furthermore, newer Maven versions now allow to activate a profile based on packaging."},{"owner":{"account_id":449410,"reputation":3835,"user_id":844177,"accept_rate":71,"display_name":"Oliver"},"score":0,"creation_date":1700038731,"post_id":77484409,"comment_id":136604662,"body_markdown":"Could you provide some code demonstrating this?","body":"Could you provide some code demonstrating this?"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1700072087,"post_id":77484409,"comment_id":136610933,"body_markdown":"https://maven.apache.org/guides/introduction/introduction-to-profiles.html#Implicit_profile_activation contains &quot;Since Maven 3.9.0 one can also evaluate the POM&#39;s packaging value by referencing property packaging&quot;","body":"<a href=\"https://maven.apache.org/guides/introduction/introduction-to-profiles.html#Implicit_profile_activation\" rel=\"nofollow noreferrer\">maven.apache.org/guides/introduction/&hellip;</a> contains &quot;Since Maven 3.9.0 one can also evaluate the POM&#39;s packaging value by referencing property packaging&quot;"}],"tags":[],"owner":{"account_id":449410,"reputation":3835,"user_id":844177,"accept_rate":71,"display_name":"Oliver"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700004365,"creation_date":1700004365,"answer_id":77484409,"question_id":52776674,"body_markdown":"Define a field like this in your Maven plugin:\r\n\r\n```lang-java\r\n@Parameter(defaultValue = &quot;${project.packaging}&quot;, required = true)\r\nprotected String packaging;\r\n```","title":"Activate plugin depending on packaging","body":"<p>Define a field like this in your Maven plugin:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Parameter(defaultValue = &quot;${project.packaging}&quot;, required = true)\nprotected String packaging;\n</code></pre>\n"}],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700004365,"creation_date":1539337157,"question_id":52776674,"body_markdown":"I would like to write a plugin and add the execution in the parent pom. But the plugin should only be active if the packaging (of the child project) is &quot;ejb&quot;.\r\n\r\nIs there a way to do that?\r\n\r\nI know that activating/deactivating profiles depending on the packaging is not possible. I furthermore read that you can define your own lifecycles and attach them to packaging, but this seems to be too complicated.\r\n\r\nThe workaround I am thinking about is to add a check at the beginning of the plugin, but then you would always have an entry in in the log like &quot;Starting xy-plugin, xy-plugin skipped because packaging is not ejb&quot;.\r\n\r\nThe actual use-case: We have a plugin that generates default bindings for WebSphere and should only be generated for ejbs.","title":"Activate plugin depending on packaging","body":"<p>I would like to write a plugin and add the execution in the parent pom. But the plugin should only be active if the packaging (of the child project) is \"ejb\".</p>\n\n<p>Is there a way to do that?</p>\n\n<p>I know that activating/deactivating profiles depending on the packaging is not possible. I furthermore read that you can define your own lifecycles and attach them to packaging, but this seems to be too complicated.</p>\n\n<p>The workaround I am thinking about is to add a check at the beginning of the plugin, but then you would always have an entry in in the log like \"Starting xy-plugin, xy-plugin skipped because packaging is not ejb\".</p>\n\n<p>The actual use-case: We have a plugin that generates default bindings for WebSphere and should only be generated for ejbs.</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"score":1,"creation_date":1700007171,"post_id":77484407,"comment_id":136601480,"body_markdown":"The scope itself is a 4-bit field, so Java appears to be strictly correct. The ifconfig report may be showing the byte that includes scope as the top 4 bits and the 4 flag bits as the low four. Such a byte is present in the bits of the address.","body":"The scope itself is a 4-bit field, so Java appears to be strictly correct. The ifconfig report may be showing the byte that includes scope as the top 4 bits and the 4 flag bits as the low four. Such a byte is present in the bits of the address."}],"owner":{"account_id":2783924,"reputation":109,"user_id":3610441,"display_name":"andy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700004276,"creation_date":1700004276,"question_id":77484407,"body_markdown":"\r\n\r\nI wrote a little utility that prints adapter information, similar to ifconfig on Linux. It uses Inet6Address.getScopeId(). This is the output it produces:\r\n\r\n    wlp0s20f3:\tflags=&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500\r\n    \t\tgetafix.fritz.box\r\n    \t\tinet4  192.168.188.43  netmask 255.255.255.0  broadcast 192.168.188.255\r\n    \t\tfe80:0:0:0:22e6:bd9d:f6cf:625e%wlp0s20f3\r\n    \t\tinet6  FE80::22E6:BD9D:F6CF:625E  prefixlen 64  scopeid 2  &lt;wlp0s20f3&gt;\r\n    \t\tEthernet DC:41:A9:A0:B7:A7\r\n    \r\n    lo:\tflags=&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536\r\n    \t\tlocalhost\r\n    \t\tinet4  127.0.0.1  netmask 255.0.0.0\r\n    \t\tlocalhost\r\n    \t\tinet6  ::1  prefixlen 128  scopeid 1  &lt;lo&gt;\r\n    \t\tLocal Loopback \r\n\r\nThe scope id is 2 for the adapter and 1 for the loopback adapter. But when I run ifconfig (Ubuntu 22.04), I get:\r\n\r\n    wlp0s20f3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\r\n            inet 192.168.188.43  netmask 255.255.255.0  broadcast 192.168.188.255\r\n            inet6 fe80::22e6:bd9d:f6cf:625e  prefixlen 64  scopeid 0x20&lt;link&gt;\r\n            ether dc:41:a9:a0:b7:a7  txqueuelen 1000  (Ethernet)\r\n            RX packets 183433  bytes 194827855 (194.8 MB)\r\n            RX errors 0  dropped 0  overruns 0  frame 0\r\n            TX packets 66336  bytes 19686929 (19.6 MB)\r\n            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\r\n    \r\n    lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\r\n            inet 127.0.0.1  netmask 255.0.0.0\r\n            inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\r\n            loop  txqueuelen 1000  (Local Loopback)\r\n            RX packets 229950  bytes 572171194 (572.1 MB)\r\n            RX errors 0  dropped 0  overruns 0  frame 0\r\n            TX packets 229950  bytes 572171194 (572.1 MB)\r\n            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\r\n\t\t\r\n\r\nifconfig prints a different scope id and als a different scope name. It looks like the numbers I get using ip6.getScopeId() are matching the adapter index (derived via ip6.getScopedInterface().getIndex()). The name I get using ip6.getScopedInterface().getName() matches the actual adapter name.\r\nWhere does &quot;link&quot; and &quot;host&quot; come from?\r\n\r\nAny ideas?\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Java Inet6Address.getScopeId returns different value than the OS","body":"<p>I wrote a little utility that prints adapter information, similar to ifconfig on Linux. It uses Inet6Address.getScopeId(). This is the output it produces:</p>\n<pre><code>wlp0s20f3:  flags=&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500\n        getafix.fritz.box\n        inet4  192.168.188.43  netmask 255.255.255.0  broadcast 192.168.188.255\n        fe80:0:0:0:22e6:bd9d:f6cf:625e%wlp0s20f3\n        inet6  FE80::22E6:BD9D:F6CF:625E  prefixlen 64  scopeid 2  &lt;wlp0s20f3&gt;\n        Ethernet DC:41:A9:A0:B7:A7\n\nlo: flags=&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536\n        localhost\n        inet4  127.0.0.1  netmask 255.0.0.0\n        localhost\n        inet6  ::1  prefixlen 128  scopeid 1  &lt;lo&gt;\n        Local Loopback \n</code></pre>\n<p>The scope id is 2 for the adapter and 1 for the loopback adapter. But when I run ifconfig (Ubuntu 22.04), I get:</p>\n<pre><code>wlp0s20f3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.188.43  netmask 255.255.255.0  broadcast 192.168.188.255\n        inet6 fe80::22e6:bd9d:f6cf:625e  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether dc:41:a9:a0:b7:a7  txqueuelen 1000  (Ethernet)\n        RX packets 183433  bytes 194827855 (194.8 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 66336  bytes 19686929 (19.6 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 229950  bytes 572171194 (572.1 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 229950  bytes 572171194 (572.1 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n    \n</code></pre>\n<p>ifconfig prints a different scope id and als a different scope name. It looks like the numbers I get using ip6.getScopeId() are matching the adapter index (derived via ip6.getScopedInterface().getIndex()). The name I get using ip6.getScopedInterface().getName() matches the actual adapter name.\nWhere does &quot;link&quot; and &quot;host&quot; come from?</p>\n<p>Any ideas?</p>\n"},{"tags":["java","compiler-construction","db2","blob","in-memory"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1490310648,"post_id":42988346,"comment_id":73068807,"body_markdown":"Why? This is a very fragile thing to do.","body":"Why? This is a very fragile thing to do."},{"owner":{"account_id":429767,"reputation":12856,"user_id":812837,"accept_rate":100,"display_name":"Clockwork-Muse"},"score":0,"creation_date":1490318183,"post_id":42988346,"comment_id":73071026,"body_markdown":"And you&#39;d almost certainly use up more memory with this scheme, too.  That linked answer pretty much _is_ what you&#39;d have to do, ignoring some minor details.  What&#39;s the actual problem you&#39;re trying to solve, that you see this as the solution?","body":"And you&#39;d almost certainly use up more memory with this scheme, too.  That linked answer pretty much <i>is</i> what you&#39;d have to do, ignoring some minor details.  What&#39;s the actual problem you&#39;re trying to solve, that you see this as the solution?"},{"owner":{"account_id":10390725,"reputation":21,"user_id":7662143,"display_name":"C.Ompiler"},"score":0,"creation_date":1490335449,"post_id":42988346,"comment_id":73075795,"body_markdown":"I need to compile a new class, which has reference to other classes which are already stored as.class in a database or the Filesystem. But in the database/filesystem are stored 1000 of classes, so I dont want to load the whole package, I only want to load the .class files I really need. So how can I compile the new Class during runtime, that it knows the external references?","body":"I need to compile a new class, which has reference to other classes which are already stored as.class in a database or the Filesystem. But in the database/filesystem are stored 1000 of classes, so I dont want to load the whole package, I only want to load the .class files I really need. So how can I compile the new Class during runtime, that it knows the external references?"}],"answers":[{"tags":[],"owner":{"account_id":44652,"reputation":3473,"user_id":131160,"display_name":"jcsahnwaldt Reinstate Monica"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700004261,"creation_date":1700004261,"answer_id":77484405,"question_id":42988346,"body_markdown":"This can be done using `javax.tools.JavaCompiler` and related classes.\r\n\r\nIt&#39;s a bit tricky though, since `javax.tools` is not well documented. By trial and error, I found out that we need a special `javax.tools.JavaFileManager` that overrides both `list()` and `inferBinaryName()`.\r\n\r\nI simply stored the byte code for the compiled classes in a hash map, but changing that part to a database shouldn&#39;t be too difficult.\r\n\r\n```\r\npackage simple.tools;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\nimport java.net.URI;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.HashMap;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\nimport javax.tools.Diagnostic;\r\nimport javax.tools.DiagnosticCollector;\r\nimport javax.tools.JavaCompiler;\r\nimport javax.tools.JavaCompiler.CompilationTask;\r\nimport javax.tools.JavaFileObject;\r\nimport javax.tools.JavaFileObject.Kind;\r\nimport javax.tools.SimpleJavaFileObject;\r\nimport javax.tools.ToolProvider;\r\nimport javax.tools.FileObject;\r\nimport javax.tools.ForwardingJavaFileManager;\r\nimport javax.tools.JavaFileManager;\r\n\r\nclass NamedJavaFileObject extends SimpleJavaFileObject {\r\n    final String name;\r\n    protected NamedJavaFileObject(String name, Kind kind) {\r\n        super(URI.create(name.replace(&#39;.&#39;, &#39;/&#39;) + kind.extension), kind);\r\n        this.name = name;\r\n    }\r\n}\r\n\r\npublic class SimpleCompiler {\r\n\r\n    public static JavaFileObject sourceFile(String name, String source) {\r\n        return inputFile(name, Kind.SOURCE, source);\r\n    }\r\n\r\n    private static JavaFileObject inputFile(String name, Kind kind, String content) {\r\n        return new NamedJavaFileObject(name, kind) {\r\n            @Override\r\n            public CharSequence getCharContent(boolean b) {\r\n                return content;\r\n            }\r\n        };\r\n    }\r\n\r\n    private static JavaFileObject inputFile(String name, Kind kind, byte[] content) {\r\n        return new NamedJavaFileObject(name, kind) {\r\n            @Override\r\n            public InputStream openInputStream() {\r\n                return new ByteArrayInputStream(content);\r\n            }\r\n        };\r\n    }\r\n\r\n    private JavaFileObject outputFile(String name, Kind kind) {\r\n        return new NamedJavaFileObject(name, kind) {\r\n            @Override\r\n            public OutputStream openOutputStream() {\r\n                return outputStream(name);\r\n            }\r\n        };\r\n    }\r\n\r\n    private OutputStream outputStream(String name) {\r\n        return new ByteArrayOutputStream() {\r\n            @Override\r\n            public void close() {\r\n                storeClass(name, toByteArray());\r\n            }\r\n        };\r\n    }\r\n\r\n    private void storeClass(String name, byte[] bytes) {\r\n        classes.put(name, bytes);\r\n        JavaFileObject file = inputFile(name, Kind.CLASS, bytes);\r\n        int dot = name.lastIndexOf(&#39;.&#39;);\r\n        String pkg = dot == -1 ? &quot;&quot; : name.substring(0, dot);\r\n        packages.computeIfAbsent(pkg, k -&gt; new ArrayList&lt;&gt;()).add(file);\r\n    }\r\n\r\n    private final Map&lt;String, byte[]&gt; classes = new HashMap&lt;&gt;();\r\n    private final Map&lt;String, List&lt;JavaFileObject&gt;&gt; packages = new HashMap&lt;&gt;();\r\n\r\n    private final ClassLoader loader = new ClassLoader() {\r\n        @Override\r\n        protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {\r\n            byte[] bytes = classes.get(name);\r\n            if (bytes == null) throw new ClassNotFoundException(name);\r\n            return super.defineClass(name, bytes, 0, bytes.length);\r\n        }\r\n    };\r\n\r\n    private final JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\r\n\r\n    private final JavaFileManager manager =\r\n    new ForwardingJavaFileManager&lt;JavaFileManager&gt;(compiler.getStandardFileManager(null, null, null)) {\r\n        @Override\r\n        public JavaFileObject getJavaFileForOutput(Location loc, String name, Kind kind, FileObject obj) {\r\n            return outputFile(name, kind);\r\n        }\r\n\r\n        @Override\r\n        public Iterable&lt;JavaFileObject&gt; list(Location loc, String pkg, Set&lt;Kind&gt; kinds, boolean rec) throws IOException {\r\n            List&lt;JavaFileObject&gt; files = packages.get(pkg);\r\n            if (files != null) return files;\r\n            else return super.list(loc, pkg, kinds, rec);\r\n        }\r\n\r\n        @Override\r\n        public String inferBinaryName(Location loc, JavaFileObject file) {\r\n            if (file instanceof NamedJavaFileObject) return ((NamedJavaFileObject)file).name;\r\n            else return super.inferBinaryName(loc, file);\r\n        }\r\n    };\r\n\r\n    public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {\r\n        return loader.loadClass(name);\r\n    }\r\n\r\n    public Class&lt;?&gt; compile(String name, String source) throws ClassNotFoundException {\r\n        compile(sourceFile(name, source));\r\n        return loadClass(name);\r\n    }\r\n\r\n    public void compile(JavaFileObject... files) {\r\n        compile(Arrays.asList(files));\r\n    }\r\n\r\n    public void compile(List&lt;JavaFileObject&gt; files) {\r\n        if (files.isEmpty()) throw new RuntimeException(&quot;No input files&quot;);\r\n        DiagnosticCollector&lt;JavaFileObject&gt; collector = new DiagnosticCollector&lt;&gt;();\r\n        CompilationTask task = compiler.getTask(null, manager, collector, null, null, files);\r\n        boolean success = task.call();\r\n        check(success, collector);\r\n    }\r\n\r\n    private void check(boolean success, DiagnosticCollector&lt;?&gt; collector) {\r\n        for (Diagnostic&lt;?&gt; diagnostic : collector.getDiagnostics()) {\r\n            if (diagnostic.getKind() == Diagnostic.Kind.ERROR) {\r\n                throw new RuntimeException(diagnostic.getMessage(Locale.US));\r\n            }\r\n        }\r\n        if (! success) throw new RuntimeException(&quot;Unknown error&quot;);\r\n    }\r\n}\r\n```\r\n\r\nExample:\r\n\r\n```\r\nSimpleCompiler compiler = new SimpleCompiler();\r\nClass&lt;?&gt; fooCls = compiler.compile(&quot;Foo&quot;, &quot;class Foo {}&quot;);\r\n// later...\r\nClass&lt;?&gt; barCls = compiler.compile(&quot;Bar&quot;, &quot;class Bar { /* use Foo...*/ }&quot;);\r\n```\r\n\r\nSee https://gitlab.com/jcsahnwaldt/simple-java-tools.\r\n","title":"Compiling class in Memory and storing them in Database in Java","body":"<p>This can be done using <code>javax.tools.JavaCompiler</code> and related classes.</p>\n<p>It's a bit tricky though, since <code>javax.tools</code> is not well documented. By trial and error, I found out that we need a special <code>javax.tools.JavaFileManager</code> that overrides both <code>list()</code> and <code>inferBinaryName()</code>.</p>\n<p>I simply stored the byte code for the compiled classes in a hash map, but changing that part to a database shouldn't be too difficult.</p>\n<pre><code>package simple.tools;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.URI;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.HashMap;\nimport java.util.Locale;\nimport java.util.Map;\nimport java.util.Set;\n\nimport javax.tools.Diagnostic;\nimport javax.tools.DiagnosticCollector;\nimport javax.tools.JavaCompiler;\nimport javax.tools.JavaCompiler.CompilationTask;\nimport javax.tools.JavaFileObject;\nimport javax.tools.JavaFileObject.Kind;\nimport javax.tools.SimpleJavaFileObject;\nimport javax.tools.ToolProvider;\nimport javax.tools.FileObject;\nimport javax.tools.ForwardingJavaFileManager;\nimport javax.tools.JavaFileManager;\n\nclass NamedJavaFileObject extends SimpleJavaFileObject {\n    final String name;\n    protected NamedJavaFileObject(String name, Kind kind) {\n        super(URI.create(name.replace('.', '/') + kind.extension), kind);\n        this.name = name;\n    }\n}\n\npublic class SimpleCompiler {\n\n    public static JavaFileObject sourceFile(String name, String source) {\n        return inputFile(name, Kind.SOURCE, source);\n    }\n\n    private static JavaFileObject inputFile(String name, Kind kind, String content) {\n        return new NamedJavaFileObject(name, kind) {\n            @Override\n            public CharSequence getCharContent(boolean b) {\n                return content;\n            }\n        };\n    }\n\n    private static JavaFileObject inputFile(String name, Kind kind, byte[] content) {\n        return new NamedJavaFileObject(name, kind) {\n            @Override\n            public InputStream openInputStream() {\n                return new ByteArrayInputStream(content);\n            }\n        };\n    }\n\n    private JavaFileObject outputFile(String name, Kind kind) {\n        return new NamedJavaFileObject(name, kind) {\n            @Override\n            public OutputStream openOutputStream() {\n                return outputStream(name);\n            }\n        };\n    }\n\n    private OutputStream outputStream(String name) {\n        return new ByteArrayOutputStream() {\n            @Override\n            public void close() {\n                storeClass(name, toByteArray());\n            }\n        };\n    }\n\n    private void storeClass(String name, byte[] bytes) {\n        classes.put(name, bytes);\n        JavaFileObject file = inputFile(name, Kind.CLASS, bytes);\n        int dot = name.lastIndexOf('.');\n        String pkg = dot == -1 ? &quot;&quot; : name.substring(0, dot);\n        packages.computeIfAbsent(pkg, k -&gt; new ArrayList&lt;&gt;()).add(file);\n    }\n\n    private final Map&lt;String, byte[]&gt; classes = new HashMap&lt;&gt;();\n    private final Map&lt;String, List&lt;JavaFileObject&gt;&gt; packages = new HashMap&lt;&gt;();\n\n    private final ClassLoader loader = new ClassLoader() {\n        @Override\n        protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {\n            byte[] bytes = classes.get(name);\n            if (bytes == null) throw new ClassNotFoundException(name);\n            return super.defineClass(name, bytes, 0, bytes.length);\n        }\n    };\n\n    private final JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\n\n    private final JavaFileManager manager =\n    new ForwardingJavaFileManager&lt;JavaFileManager&gt;(compiler.getStandardFileManager(null, null, null)) {\n        @Override\n        public JavaFileObject getJavaFileForOutput(Location loc, String name, Kind kind, FileObject obj) {\n            return outputFile(name, kind);\n        }\n\n        @Override\n        public Iterable&lt;JavaFileObject&gt; list(Location loc, String pkg, Set&lt;Kind&gt; kinds, boolean rec) throws IOException {\n            List&lt;JavaFileObject&gt; files = packages.get(pkg);\n            if (files != null) return files;\n            else return super.list(loc, pkg, kinds, rec);\n        }\n\n        @Override\n        public String inferBinaryName(Location loc, JavaFileObject file) {\n            if (file instanceof NamedJavaFileObject) return ((NamedJavaFileObject)file).name;\n            else return super.inferBinaryName(loc, file);\n        }\n    };\n\n    public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {\n        return loader.loadClass(name);\n    }\n\n    public Class&lt;?&gt; compile(String name, String source) throws ClassNotFoundException {\n        compile(sourceFile(name, source));\n        return loadClass(name);\n    }\n\n    public void compile(JavaFileObject... files) {\n        compile(Arrays.asList(files));\n    }\n\n    public void compile(List&lt;JavaFileObject&gt; files) {\n        if (files.isEmpty()) throw new RuntimeException(&quot;No input files&quot;);\n        DiagnosticCollector&lt;JavaFileObject&gt; collector = new DiagnosticCollector&lt;&gt;();\n        CompilationTask task = compiler.getTask(null, manager, collector, null, null, files);\n        boolean success = task.call();\n        check(success, collector);\n    }\n\n    private void check(boolean success, DiagnosticCollector&lt;?&gt; collector) {\n        for (Diagnostic&lt;?&gt; diagnostic : collector.getDiagnostics()) {\n            if (diagnostic.getKind() == Diagnostic.Kind.ERROR) {\n                throw new RuntimeException(diagnostic.getMessage(Locale.US));\n            }\n        }\n        if (! success) throw new RuntimeException(&quot;Unknown error&quot;);\n    }\n}\n</code></pre>\n<p>Example:</p>\n<pre><code>SimpleCompiler compiler = new SimpleCompiler();\nClass&lt;?&gt; fooCls = compiler.compile(&quot;Foo&quot;, &quot;class Foo {}&quot;);\n// later...\nClass&lt;?&gt; barCls = compiler.compile(&quot;Bar&quot;, &quot;class Bar { /* use Foo...*/ }&quot;);\n</code></pre>\n<p>See <a href=\"https://gitlab.com/jcsahnwaldt/simple-java-tools\" rel=\"nofollow noreferrer\">https://gitlab.com/jcsahnwaldt/simple-java-tools</a>.</p>\n"}],"owner":{"account_id":10390725,"reputation":21,"user_id":7662143,"display_name":"C.Ompiler"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700004261,"creation_date":1490309070,"question_id":42988346,"body_markdown":"I want to compile a class (for example Test1) in memory and directly store the byte code  in a database as a BLOB. \r\n\r\nAdditionally I also want to compile a new class (Test2) which calls Test1 which is stored in the database. So I need to load this class from the database to compile Test2. Is that even possible, and if yes how could I do that?\r\n\r\nI have read about the InMemoryCompiler and the DatabaseClassLoader, but I&#39;m not sure if thats the right thing to work with.\r\n\r\nhttps://github.com/trung/InMemoryJavaCompiler\r\n\r\nhttps://stackoverflow.com/questions/5329685/how-can-i-load-java-class-from-database \r\n\r\nIf someone just know how to solve the first problem, that would also be great. \r\n\r\nThank you for your answers.","title":"Compiling class in Memory and storing them in Database in Java","body":"<p>I want to compile a class (for example Test1) in memory and directly store the byte code  in a database as a BLOB. </p>\n\n<p>Additionally I also want to compile a new class (Test2) which calls Test1 which is stored in the database. So I need to load this class from the database to compile Test2. Is that even possible, and if yes how could I do that?</p>\n\n<p>I have read about the InMemoryCompiler and the DatabaseClassLoader, but I'm not sure if thats the right thing to work with.</p>\n\n<p><a href=\"https://github.com/trung/InMemoryJavaCompiler\" rel=\"nofollow noreferrer\">https://github.com/trung/InMemoryJavaCompiler</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5329685/how-can-i-load-java-class-from-database\">How can I load java class from database?</a> </p>\n\n<p>If someone just know how to solve the first problem, that would also be great. </p>\n\n<p>Thank you for your answers.</p>\n"},{"tags":["java","compilation","javac",".class-file"],"comments":[{"owner":{"account_id":447475,"reputation":1,"user_id":841108,"accept_rate":61,"display_name":"Basile Starynkevitch"},"score":0,"creation_date":1366262708,"post_id":16075046,"comment_id":22946188,"body_markdown":"Probably not, but you could (at least on Linux) create that file on a disk-less filesystem (e.g. `tmpfs`) and that would be nearly as fast as working on memory. Maybe you could write your own `ClassLoader`","body":"Probably not, but you could (at least on Linux) create that file on a disk-less filesystem (e.g. <code>tmpfs</code>) and that would be nearly as fast as working on memory. Maybe you could write your own <code>ClassLoader</code>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1366262976,"post_id":16075046,"comment_id":22946252,"body_markdown":"*&quot;my application might not have the write permission.&quot;*  Is that because it is sand-boxed by Java, or DYM OS security settings?","body":"<i>&quot;my application might not have the write permission.&quot;</i>  Is that because it is sand-boxed by Java, or DYM OS security settings?"},{"owner":{"account_id":1021597,"reputation":21003,"user_id":1031797,"accept_rate":45,"display_name":"0x56794E"},"score":0,"creation_date":1366263264,"post_id":16075046,"comment_id":22946335,"body_markdown":"@AndrewThompson Both. It might be sand-boxed by Java because my app will be downloaded from the internet. By the OS because the user might decide to put the jar file (my app) in some directory like C:\\ in Windows.","body":"@AndrewThompson Both. It might be sand-boxed by Java because my app will be downloaded from the internet. By the OS because the user might decide to put the jar file (my app) in some directory like C:\\ in Windows."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1366266581,"post_id":16075046,"comment_id":22947536,"body_markdown":"*&quot;downloaded from the internet.&quot;*  So by that you mean an applet or JWS app.?  AFAIU, they are the only ones where Java supplies a `SecurityManager`.","body":"<i>&quot;downloaded from the internet.&quot;</i>  So by that you mean an applet or JWS app.?  AFAIU, they are the only ones where Java supplies a <code>SecurityManager</code>."},{"owner":{"account_id":1021597,"reputation":21003,"user_id":1031797,"accept_rate":45,"display_name":"0x56794E"},"score":0,"creation_date":1366270483,"post_id":16075046,"comment_id":22949307,"body_markdown":"Sorry I misread you question. No, it&#39;s a desktop app, so the write permission is caused only by OS settings.","body":"Sorry I misread you question. No, it&#39;s a desktop app, so the write permission is caused only by OS settings."}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366262830,"creation_date":1366262830,"answer_id":16075111,"question_id":16075046,"body_markdown":"Use the [`JavaCompiler`](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html) for this.  I think the trick will be to define a custom [`JavaFileManager`](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileManager.html).","title":"Compile and execute java source file in memory","body":"<p>Use the <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html\" rel=\"nofollow\"><code>JavaCompiler</code></a> for this.  I think the trick will be to define a custom <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileManager.html\" rel=\"nofollow\"><code>JavaFileManager</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366262855,"creation_date":1366262855,"answer_id":16075117,"question_id":16075046,"body_markdown":"Java does have a [compilation API][1] to compile files dynamically, but I&#39;m not aware of an option that would not persist the class files to disk. You can always use a `ClassLoader` and load those classes dynamically and then use them. You might be able to load the classes in memory by overriding the [getFileForOutput][2] method.\r\n\r\n&gt; Optionally, this file manager might consider the sibling as a hint for\r\n&gt; where to place the output. The exact semantics of this hint is\r\n&gt; unspecified. The JDK compiler, javac, for example, will place class\r\n&gt; files in the same directories as originating source files unless a\r\n&gt; class file output directory is provided. To facilitate this behavior,\r\n&gt; javac might provide the originating source file as sibling when\r\n&gt; calling this method.\r\n\r\nAnother option is to use an Interpreter like [BeanShell][3] that will run the java code for you. It executes script like code and can work in repl mode.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileManager.html#getFileForOutput%28javax.tools.JavaFileManager.Location,%20java.lang.String,%20java.lang.String,%20javax.tools.FileObject%29\r\n  [3]: http://www.beanshell.org/","title":"Compile and execute java source file in memory","body":"<p>Java does have a <a href=\"http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html\" rel=\"nofollow\">compilation API</a> to compile files dynamically, but I'm not aware of an option that would not persist the class files to disk. You can always use a <code>ClassLoader</code> and load those classes dynamically and then use them. You might be able to load the classes in memory by overriding the <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaFileManager.html#getFileForOutput%28javax.tools.JavaFileManager.Location,%20java.lang.String,%20java.lang.String,%20javax.tools.FileObject%29\" rel=\"nofollow\">getFileForOutput</a> method.</p>\n\n<blockquote>\n  <p>Optionally, this file manager might consider the sibling as a hint for\n  where to place the output. The exact semantics of this hint is\n  unspecified. The JDK compiler, javac, for example, will place class\n  files in the same directories as originating source files unless a\n  class file output directory is provided. To facilitate this behavior,\n  javac might provide the originating source file as sibling when\n  calling this method.</p>\n</blockquote>\n\n<p>Another option is to use an Interpreter like <a href=\"http://www.beanshell.org/\" rel=\"nofollow\">BeanShell</a> that will run the java code for you. It executes script like code and can work in repl mode.</p>\n"},{"tags":[],"owner":{"account_id":44652,"reputation":3473,"user_id":131160,"display_name":"jcsahnwaldt Reinstate Monica"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700003901,"creation_date":1699975996,"answer_id":77481908,"question_id":16075046,"body_markdown":"`javax.tools` has everything you need, but needs a bit of coaxing to stop storing class files on the file system. Fortunately, it can be done with a single class of about 100 lines of code:\r\n\r\n```\r\npackage simple.tools;\r\n\r\nimport java.io.*;\r\nimport java.net.URI;\r\nimport java.util.*;\r\n\r\nimport javax.tools.*;\r\nimport javax.tools.JavaCompiler.CompilationTask;\r\n\r\npublic class SimpleCompiler {\r\n\r\n    public static JavaFileObject sourceFile(String name, String source) {\r\n        return inputFile(name, JavaFileObject.Kind.SOURCE, source);\r\n    }\r\n\r\n    private static URI uri(String name, JavaFileObject.Kind kind) {\r\n        return URI.create(name.replace(&#39;.&#39;, &#39;/&#39;) + kind.extension);\r\n    }\r\n\r\n    private final JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\r\n\r\n    private final JavaFileManager manager =\r\n    new ForwardingJavaFileManager&lt;JavaFileManager&gt;(compiler.getStandardFileManager(null, null, null)) {\r\n        @Override\r\n        public JavaFileObject getJavaFileForOutput(Location l, String name, JavaFileObject.Kind kind, FileObject f) {\r\n            return outputFile(name, kind);\r\n        }\r\n    };\r\n\r\n    private static JavaFileObject inputFile(String name, JavaFileObject.Kind kind, String content) {\r\n        return new SimpleJavaFileObject(uri(name, kind), kind) {\r\n            @Override\r\n            public CharSequence getCharContent(boolean b) {\r\n                return content;\r\n            }\r\n        };\r\n    }\r\n\r\n    private JavaFileObject outputFile(String name, JavaFileObject.Kind kind) {\r\n        return new SimpleJavaFileObject(uri(name, kind), kind) {\r\n            @Override\r\n            public OutputStream openOutputStream() {\r\n                return outputStream(name);\r\n            }\r\n        };\r\n    }\r\n\r\n    private final Map&lt;String, byte[]&gt; classes = new HashMap&lt;&gt;();\r\n\r\n    private OutputStream outputStream(String name) {\r\n        return new ByteArrayOutputStream() {\r\n            @Override\r\n            public void close() {\r\n                classes.put(name, toByteArray());\r\n            }\r\n        };\r\n    }\r\n\r\n    private final ClassLoader loader = new ClassLoader() {\r\n        @Override\r\n        protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {\r\n            byte[] bytes = classes.get(name);\r\n            if (bytes == null) throw new ClassNotFoundException(name);\r\n            return super.defineClass(name, bytes, 0, bytes.length);\r\n        }\r\n    };\r\n\r\n    public Class&lt;?&gt; compile(String name, String source) {\r\n        compile(sourceFile(name, source));\r\n        try { return loadClass(name); }\r\n        catch (ClassNotFoundException e) { throw new IllegalStateException(e.toString(), e); }\r\n    }\r\n\r\n    public void compile(JavaFileObject... files) {\r\n        compile(Arrays.asList(files));\r\n    }\r\n\r\n    public void compile(List&lt;JavaFileObject&gt; files) {\r\n        if (files.isEmpty()) throw new RuntimeException(&quot;No input files&quot;);\r\n        DiagnosticCollector&lt;JavaFileObject&gt; collector = new DiagnosticCollector&lt;&gt;();\r\n        CompilationTask task = compiler.getTask(null, manager, collector, null, null, files);\r\n        boolean success = task.call();\r\n        check(success, collector);\r\n    }\r\n\r\n    private void check(boolean success, DiagnosticCollector&lt;?&gt; collector) {\r\n        for (Diagnostic&lt;?&gt; diagnostic : collector.getDiagnostics()) {\r\n            if (diagnostic.getKind() == Diagnostic.Kind.ERROR) {\r\n                String message = diagnostic.getMessage(Locale.US);\r\n                throw new RuntimeException(message.split(&quot;[\\r\\n]&quot;)[0]);\r\n            }\r\n        }\r\n        if (! success) throw new RuntimeException(&quot;Unknown error&quot;);\r\n    }\r\n\r\n    public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {\r\n        return loader.loadClass(name);\r\n    }\r\n}\r\n```\r\n\r\nSee https://gitlab.com/jcsahnwaldt/simple-java-tools.","title":"Compile and execute java source file in memory","body":"<p><code>javax.tools</code> has everything you need, but needs a bit of coaxing to stop storing class files on the file system. Fortunately, it can be done with a single class of about 100 lines of code:</p>\n<pre><code>package simple.tools;\n\nimport java.io.*;\nimport java.net.URI;\nimport java.util.*;\n\nimport javax.tools.*;\nimport javax.tools.JavaCompiler.CompilationTask;\n\npublic class SimpleCompiler {\n\n    public static JavaFileObject sourceFile(String name, String source) {\n        return inputFile(name, JavaFileObject.Kind.SOURCE, source);\n    }\n\n    private static URI uri(String name, JavaFileObject.Kind kind) {\n        return URI.create(name.replace('.', '/') + kind.extension);\n    }\n\n    private final JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\n\n    private final JavaFileManager manager =\n    new ForwardingJavaFileManager&lt;JavaFileManager&gt;(compiler.getStandardFileManager(null, null, null)) {\n        @Override\n        public JavaFileObject getJavaFileForOutput(Location l, String name, JavaFileObject.Kind kind, FileObject f) {\n            return outputFile(name, kind);\n        }\n    };\n\n    private static JavaFileObject inputFile(String name, JavaFileObject.Kind kind, String content) {\n        return new SimpleJavaFileObject(uri(name, kind), kind) {\n            @Override\n            public CharSequence getCharContent(boolean b) {\n                return content;\n            }\n        };\n    }\n\n    private JavaFileObject outputFile(String name, JavaFileObject.Kind kind) {\n        return new SimpleJavaFileObject(uri(name, kind), kind) {\n            @Override\n            public OutputStream openOutputStream() {\n                return outputStream(name);\n            }\n        };\n    }\n\n    private final Map&lt;String, byte[]&gt; classes = new HashMap&lt;&gt;();\n\n    private OutputStream outputStream(String name) {\n        return new ByteArrayOutputStream() {\n            @Override\n            public void close() {\n                classes.put(name, toByteArray());\n            }\n        };\n    }\n\n    private final ClassLoader loader = new ClassLoader() {\n        @Override\n        protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {\n            byte[] bytes = classes.get(name);\n            if (bytes == null) throw new ClassNotFoundException(name);\n            return super.defineClass(name, bytes, 0, bytes.length);\n        }\n    };\n\n    public Class&lt;?&gt; compile(String name, String source) {\n        compile(sourceFile(name, source));\n        try { return loadClass(name); }\n        catch (ClassNotFoundException e) { throw new IllegalStateException(e.toString(), e); }\n    }\n\n    public void compile(JavaFileObject... files) {\n        compile(Arrays.asList(files));\n    }\n\n    public void compile(List&lt;JavaFileObject&gt; files) {\n        if (files.isEmpty()) throw new RuntimeException(&quot;No input files&quot;);\n        DiagnosticCollector&lt;JavaFileObject&gt; collector = new DiagnosticCollector&lt;&gt;();\n        CompilationTask task = compiler.getTask(null, manager, collector, null, null, files);\n        boolean success = task.call();\n        check(success, collector);\n    }\n\n    private void check(boolean success, DiagnosticCollector&lt;?&gt; collector) {\n        for (Diagnostic&lt;?&gt; diagnostic : collector.getDiagnostics()) {\n            if (diagnostic.getKind() == Diagnostic.Kind.ERROR) {\n                String message = diagnostic.getMessage(Locale.US);\n                throw new RuntimeException(message.split(&quot;[\\r\\n]&quot;)[0]);\n            }\n        }\n        if (! success) throw new RuntimeException(&quot;Unknown error&quot;);\n    }\n\n    public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {\n        return loader.loadClass(name);\n    }\n}\n</code></pre>\n<p>See <a href=\"https://gitlab.com/jcsahnwaldt/simple-java-tools\" rel=\"nofollow noreferrer\">https://gitlab.com/jcsahnwaldt/simple-java-tools</a>.</p>\n"}],"owner":{"account_id":1021597,"reputation":21003,"user_id":1031797,"accept_rate":45,"display_name":"0x56794E"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1302,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1700003901,"creation_date":1366262520,"question_id":16075046,"body_markdown":"Say I have a `String` containing the content of a `.java` file. Are any APIs out there that would allow me to compile this source file into a virtual `.class` file (i.e. generate and store the content in memory, NOT creating an actual physical `.class` file on disk)? And this &quot;virtual&quot; `.class` would then be loaded and executed in the JVM?\r\n\r\nEdit 1: The only reason I want to do this is because sometimes, my application might not have the write permission.","title":"Compile and execute java source file in memory","body":"<p>Say I have a <code>String</code> containing the content of a <code>.java</code> file. Are any APIs out there that would allow me to compile this source file into a virtual <code>.class</code> file (i.e. generate and store the content in memory, NOT creating an actual physical <code>.class</code> file on disk)? And this \"virtual\" <code>.class</code> would then be loaded and executed in the JVM?</p>\n\n<p>Edit 1: The only reason I want to do this is because sometimes, my application might not have the write permission.</p>\n"},{"tags":["java","jvm","bytecode","classloading"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1540041998,"post_id":52883819,"comment_id":92722924,"body_markdown":"This is called the first time a class is loaded.","body":"This is called the first time a class is loaded."}],"answers":[{"comments":[{"owner":{"account_id":3391036,"reputation":323,"user_id":2845850,"accept_rate":62,"display_name":"Saddy"},"score":0,"creation_date":1539911047,"post_id":52884161,"comment_id":92682185,"body_markdown":"Thanks for your answer. Could you explain why there is no corresponding method dispatch in bytecode? Is it some method calling mechanisms that I am not aware of?","body":"Thanks for your answer. Could you explain why there is no corresponding method dispatch in bytecode? Is it some method calling mechanisms that I am not aware of?"},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1539911646,"post_id":52884161,"comment_id":92682327,"body_markdown":"Yes, it&#39;s the JVM itself that discovers that you&#39;re trying to refer to a class that hasn&#39;t been loaded yet. It will use the same classloader that loaded the class that refers to the unknown class.","body":"Yes, it&#39;s the JVM itself that discovers that you&#39;re trying to refer to a class that hasn&#39;t been loaded yet. It will use the same classloader that loaded the class that refers to the unknown class."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1539933414,"post_id":52884161,"comment_id":92687906,"body_markdown":"In this case it&#39;ll be the `invokestatic` to `Foo.foo` that causes the `Foo` class to be loaded. But only the first time. After that `Main.main` could be compiled to call the method directly (or inline) without the lookup. In fact I think the interpreter switches the bytecode to an internal one (but don&#39;t quote me on that).","body":"In this case it&#39;ll be the <code>invokestatic</code> to <code>Foo.foo</code> that causes the <code>Foo</code> class to be loaded. But only the first time. After that <code>Main.main</code> could be compiled to call the method directly (or inline) without the lookup. In fact I think the interpreter switches the bytecode to an internal one (but don&#39;t quote me on that)."},{"owner":{"account_id":3391036,"reputation":323,"user_id":2845850,"accept_rate":62,"display_name":"Saddy"},"score":0,"creation_date":1540356269,"post_id":52884161,"comment_id":92829138,"body_markdown":"Strangely enough, I can not find any official documents that describe this loading process....","body":"Strangely enough, I can not find any official documents that describe this loading process...."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1540365051,"post_id":52884161,"comment_id":92832483,"body_markdown":"@Saddy Chapter 5 of the JVM spec is a bit loose. It does say the loadClass is called by the JVM and what happens to exceptions. (Deviations from the Reference Implementation within the spec are likely to cause problems due to real world programmer&#39;s use of cyclic dependency and static variables. Though it&#39;s mostly the early boot classes that fail. I guess those failing prevent us from finding about any other problems.","body":"@Saddy Chapter 5 of the JVM spec is a bit loose. It does say the loadClass is called by the JVM and what happens to exceptions. (Deviations from the Reference Implementation within the spec are likely to cause problems due to real world programmer&#39;s use of cyclic dependency and static variables. Though it&#39;s mostly the early boot classes that fail. I guess those failing prevent us from finding about any other problems."}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1539907501,"creation_date":1539907501,"answer_id":52884161,"question_id":52883819,"body_markdown":"Classes are loaded lazily.\r\n\r\nYou can see this by writing code to print to the console within static initialisers.\r\n\r\nThe first time a class reference is used by any code loaded by a specific class loader, the JVM request the `Class` from the loader in the current thread. If the parent class loader hasn&#39;t loaded a class of the fully qualified name, then the current class loader will define it (or throw an exception).\r\n\r\nIn the early days applets would make a network connection for each class file.","title":"Why does sun.misc.Launcher$AppClassLoader.loadClass appear in the stack","body":"<p>Classes are loaded lazily.</p>\n\n<p>You can see this by writing code to print to the console within static initialisers.</p>\n\n<p>The first time a class reference is used by any code loaded by a specific class loader, the JVM request the <code>Class</code> from the loader in the current thread. If the parent class loader hasn't loaded a class of the fully qualified name, then the current class loader will define it (or throw an exception).</p>\n\n<p>In the early days applets would make a network connection for each class file.</p>\n"},{"tags":[],"owner":{"account_id":6600139,"reputation":41,"user_id":5098706,"display_name":"Dave"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700003496,"creation_date":1700003496,"answer_id":77484370,"question_id":52883819,"body_markdown":"Have a peek at:\r\nhttps://www.infoworld.com/article/3700054/all-about-java-class-loaders.html\r\nThere are at least 3 different classloaders in a JVM - more if you want to use your own.\r\nin a nut shell, the classloader that loaded the class thats wanting a new class, calls its classloader, that in turn calls its classloader etc, if the top level classloader cant find it, it works its way back down the hierarchy.\r\nThe above mentioned link gives a nice picture.\r\n ","title":"Why does sun.misc.Launcher$AppClassLoader.loadClass appear in the stack","body":"<p>Have a peek at:\n<a href=\"https://www.infoworld.com/article/3700054/all-about-java-class-loaders.html\" rel=\"nofollow noreferrer\">https://www.infoworld.com/article/3700054/all-about-java-class-loaders.html</a>\nThere are at least 3 different classloaders in a JVM - more if you want to use your own.\nin a nut shell, the classloader that loaded the class thats wanting a new class, calls its classloader, that in turn calls its classloader etc, if the top level classloader cant find it, it works its way back down the hierarchy.\nThe above mentioned link gives a nice picture.</p>\n"}],"owner":{"account_id":3391036,"reputation":323,"user_id":2845850,"accept_rate":62,"display_name":"Saddy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5895,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52884161,"answer_count":2,"score":1,"last_activity_date":1700003496,"creation_date":1539904464,"question_id":52883819,"body_markdown":"I have instrumented JDK and application. Entry and exit points are recorded for call graph construction.\r\n\r\nThe call graph looks like \r\n\r\n&gt; sun.misc.Launcher$AppClassLoader.loadClass-&gt;com.example.Main.main  \r\n-&gt;sun.misc.Launcher$AppClassLoader.loadClass-&gt;com.example.Foo.foo\r\n\r\nSource code \r\n\r\n    public class Main{\r\n    public static void main(String[] args){\r\n      Foo.foo()\r\n    }\r\n    }\r\n    \r\n    public class Foo{\r\n      public static void foo(){};\r\n    }\r\n\r\nThis must be how classloader works but I don&#39;t see anything shows in bytecode that indicate the call site &quot;sun.misc.Launcher$AppClassLoader.loadClass&quot;. So, how does classloader work internally?\r\n","title":"Why does sun.misc.Launcher$AppClassLoader.loadClass appear in the stack","body":"<p>I have instrumented JDK and application. Entry and exit points are recorded for call graph construction.</p>\n\n<p>The call graph looks like </p>\n\n<blockquote>\n  <p>sun.misc.Launcher$AppClassLoader.loadClass->com.example.Main.main<br>\n  ->sun.misc.Launcher$AppClassLoader.loadClass->com.example.Foo.foo</p>\n</blockquote>\n\n<p>Source code </p>\n\n<pre><code>public class Main{\npublic static void main(String[] args){\n  Foo.foo()\n}\n}\n\npublic class Foo{\n  public static void foo(){};\n}\n</code></pre>\n\n<p>This must be how classloader works but I don't see anything shows in bytecode that indicate the call site \"sun.misc.Launcher$AppClassLoader.loadClass\". So, how does classloader work internally?</p>\n"},{"tags":["java","jackson","jackson-dataformat-xml"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1699920803,"post_id":77477525,"comment_id":136589051,"body_markdown":"What exaclty do you mean? What does jackson do differently than whatever happened before?","body":"What exaclty do you mean? What does jackson do differently than whatever happened before?"},{"owner":{"account_id":63056,"reputation":1645,"user_id":186896,"accept_rate":85,"display_name":"SyAu"},"score":0,"creation_date":1699921094,"post_id":77477525,"comment_id":136589070,"body_markdown":"Hi @f1sh, Updated the original post, pls see that.","body":"Hi @f1sh, Updated the original post, pls see that."},{"owner":{"account_id":1440515,"reputation":7658,"user_id":1360803,"accept_rate":100,"display_name":"Polygnome"},"score":1,"creation_date":1699921154,"post_id":77477525,"comment_id":136589077,"body_markdown":"What problem are you facing? Because Jackson will only &quot;interfere&quot; with your POJO if you actually use Jackson to marshal/unmarshal an object. What are you doing, what do you expect to see, what do you see, and crucially, why did you add jackson in the first place if not to serialize data with it?","body":"What problem are you facing? Because Jackson will only &quot;interfere&quot; with your POJO if you actually use Jackson to marshal/unmarshal an object. What are you doing, what do you expect to see, what do you see, and crucially, why did you add jackson in the first place if not to serialize data with it?"},{"owner":{"account_id":63056,"reputation":1645,"user_id":186896,"accept_rate":85,"display_name":"SyAu"},"score":0,"creation_date":1699921299,"post_id":77477525,"comment_id":136589088,"body_markdown":"@Polygnome That library added by a different team, for testing purposes I removed that lib and xml is ok. At this stage, I can&#39;t remove that lib and looking for a workaround.","body":"@Polygnome That library added by a different team, for testing purposes I removed that lib and xml is ok. At this stage, I can&#39;t remove that lib and looking for a workaround."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1699926398,"post_id":77477525,"comment_id":136589528,"body_markdown":"Is âIssues faced: Root element comes as `&lt;Data&gt;` instead of `&lt;data&gt;`â your only question here?  You have a lot of other words and I canât tell whether you are asking anything else, or just describing some observations which you donât need help with.","body":"Is âIssues faced: Root element comes as <code>&lt;Data&gt;</code> instead of <code>&lt;data&gt;</code>â your only question here?  You have a lot of other words and I canât tell whether you are asking anything else, or just describing some observations which you donât need help with."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1699927309,"post_id":77477525,"comment_id":136589600,"body_markdown":"well, you could try installing this [dependency](https://github.com/FasterXML/jackson-module-jaxb-annotations/blob/2.8/README.md) for jackson to support jaxb annotations","body":"well, you could try installing this <a href=\"https://github.com/FasterXML/jackson-module-jaxb-annotations/blob/2.8/README.md\" rel=\"nofollow noreferrer\">dependency</a> for jackson to support jaxb annotations"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1699927610,"post_id":77477525,"comment_id":136589623,"body_markdown":"https://stackoverflow.com/a/60754477/16034206 though you could try this to map the class name as something else in Jackson","body":"<a href=\"https://stackoverflow.com/a/60754477/16034206\">stackoverflow.com/a/60754477/16034206</a> though you could try this to map the class name as something else in Jackson"},{"owner":{"account_id":63056,"reputation":1645,"user_id":186896,"accept_rate":85,"display_name":"SyAu"},"score":0,"creation_date":1699927842,"post_id":77477525,"comment_id":136589643,"body_markdown":"@VGR Updated the original post. Pls check. Facing couple of issues, so leaning towards finding a way to instruct Jackson not to consider the POJO for marshalling.","body":"@VGR Updated the original post. Pls check. Facing couple of issues, so leaning towards finding a way to instruct Jackson not to consider the POJO for marshalling."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1699928659,"post_id":77477525,"comment_id":136589705,"body_markdown":"Thank you, that helps.  How are you marshalling your objects?  Do you have code explicitly marshalling them?  Are they called implicitly by a web service in your code?","body":"Thank you, that helps.  How are you marshalling your objects?  Do you have code explicitly marshalling them?  Are they called implicitly by a web service in your code?"},{"owner":{"account_id":63056,"reputation":1645,"user_id":186896,"accept_rate":85,"display_name":"SyAu"},"score":0,"creation_date":1699931033,"post_id":77477525,"comment_id":136589888,"body_markdown":"@VGR Existing code is not explicitly marshalling, from Controller POJO gets returned.","body":"@VGR Existing code is not explicitly marshalling, from Controller POJO gets returned."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1699971501,"post_id":77477525,"comment_id":136595548,"body_markdown":"Is your application a Spring application?","body":"Is your application a Spring application?"}],"owner":{"account_id":63056,"reputation":1645,"user_id":186896,"accept_rate":85,"display_name":"SyAu"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":0,"score":-3,"last_activity_date":1700003409,"creation_date":1699920706,"question_id":77477525,"body_markdown":"Recently in my project, based on Spring framework, jackson library gets added, \r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.13.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThis impacts existing POJO to xml in many ways. Being a POJO with lot of attributes, looking for a way to instruct Jackson not to \r\ndo marshalling/interfere with my POJO at Class level. Any annotations available to do that at class level?\r\n\r\n        @XmlAccessorType(XmlAccessType.FIELD)\r\n        @XmlType(name = &quot;&quot;, propOrder = {\r\n            &quot;items&quot;\r\n        })\r\n        @XmlRootElement(name = &quot;data&quot;)\r\n        public class Data\r\n        {\r\n        ...\r\n\r\n**Issues faced after adding the jackson library:**\r\n1) Root element comes as `&lt;Data&gt;` instead of `&lt;data&gt;`  \r\n2) List attributes are wrapped - fixed this by adding @JacksonXmlElementWrapper(useWrapping = false) , but I have lot of List attributes in the POJO, adding individually is not possible.\r\n","title":"Java 17, jackson library - Avoid jackson for POJO to xml marshalling","body":"<p>Recently in my project, based on Spring framework, jackson library gets added,</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n        &lt;version&gt;2.13.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>This impacts existing POJO to xml in many ways. Being a POJO with lot of attributes, looking for a way to instruct Jackson not to\ndo marshalling/interfere with my POJO at Class level. Any annotations available to do that at class level?</p>\n<pre><code>    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;, propOrder = {\n        &quot;items&quot;\n    })\n    @XmlRootElement(name = &quot;data&quot;)\n    public class Data\n    {\n    ...\n</code></pre>\n<p><strong>Issues faced after adding the jackson library:</strong></p>\n<ol>\n<li>Root element comes as <code>&lt;Data&gt;</code> instead of <code>&lt;data&gt;</code></li>\n<li>List attributes are wrapped - fixed this by adding @JacksonXmlElementWrapper(useWrapping = false) , but I have lot of List attributes in the POJO, adding individually is not possible.</li>\n</ol>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":1804581,"reputation":511,"user_id":1642005,"accept_rate":67,"display_name":"baju"},"score":1,"creation_date":1422396609,"post_id":28180915,"comment_id":44731083,"body_markdown":"You should check sdk configuration in your project(inside intelliJ) - maybe there you still are using old version - it depends on you configuration","body":"You should check sdk configuration in your project(inside intelliJ) - maybe there you still are using old version - it depends on you configuration"},{"owner":{"account_id":1259089,"reputation":730,"user_id":1217913,"display_name":"Willa"},"score":1,"creation_date":1461832999,"post_id":28180915,"comment_id":61381707,"body_markdown":"Did you get the solution? In my case I switched to using java 7 and everything works.","body":"Did you get the solution? In my case I switched to using java 7 and everything works."},{"owner":{"account_id":2443056,"reputation":936,"user_id":2131040,"accept_rate":57,"display_name":"prash"},"score":0,"creation_date":1506672886,"post_id":28180915,"comment_id":79923510,"body_markdown":"&quot;You are trying to run/reference a class compiled with JDK 8 using a runtime/compiler JRE/JDK 6.&quot;\n\nCheck the accepted answer -  https://stackoverflow.com/questions/29906659/java-compiling-error-in-command-prompt-class-file-has-wrong-version-52-0-shoul","body":"&quot;You are trying to run/reference a class compiled with JDK 8 using a runtime/compiler JRE/JDK 6.&quot;  Check the accepted answer -  <a href=\"https://stackoverflow.com/questions/29906659/java-compiling-error-in-command-prompt-class-file-has-wrong-version-52-0-shoul\" title=\"java compiling error in command prompt class file has wrong version 52 0 shoul\">stackoverflow.com/questions/29906659/&hellip;</a>"},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":1,"creation_date":1599599926,"post_id":28180915,"comment_id":112822017,"body_markdown":"This is still an issue with intellij 2020.2 trying to switch from java 8 to java 14","body":"This is still an issue with intellij 2020.2 trying to switch from java 8 to java 14"},{"owner":{"account_id":15309583,"reputation":1580,"user_id":11045279,"display_name":"Aditya Patnaik"},"score":3,"creation_date":1675854140,"post_id":28180915,"comment_id":133016139,"body_markdown":"I got this error when I was trying to run Spring boot 3.X on java 8. Spring Boot 3.X is compatible only with java 17 and above. Hope this finds someone in need.","body":"I got this error when I was trying to run Spring boot 3.X on java 8. Spring Boot 3.X is compatible only with java 17 and above. Hope this finds someone in need."}],"answers":[{"comments":[{"owner":{"account_id":2368049,"reputation":1819,"user_id":2073349,"accept_rate":50,"display_name":"Ritesh"},"score":26,"creation_date":1614160072,"post_id":28180983,"comment_id":117298197,"body_markdown":"If using Gradle, along with above settings, please also select appropriate Gradle JVM settings. For IntelliJ IDE, its under tab: &quot;IntelliJ IDEA&quot; -&gt; &quot;Build, Execution, Deployment&quot; -&gt; Gradle, and update the Gradle JVM under &quot;Gradle Projects&quot;","body":"If using Gradle, along with above settings, please also select appropriate Gradle JVM settings. For IntelliJ IDE, its under tab: &quot;IntelliJ IDEA&quot; -&gt; &quot;Build, Execution, Deployment&quot; -&gt; Gradle, and update the Gradle JVM under &quot;Gradle Projects&quot;"},{"owner":{"account_id":7376336,"reputation":1678,"user_id":5614800,"accept_rate":44,"display_name":"Carmine Tambascia"},"score":2,"creation_date":1629468780,"post_id":28180983,"comment_id":121702428,"body_markdown":"wondering how this steps order answer the question as is just a matter of use another SDK and not really what the question asked","body":"wondering how this steps order answer the question as is just a matter of use another SDK and not really what the question asked"},{"owner":{"account_id":1688556,"reputation":896,"user_id":1551368,"display_name":"dobrivoje"},"score":1,"creation_date":1677869048,"post_id":28180983,"comment_id":133428921,"body_markdown":"Or, if you can&#39;t change SDK like in my case, then lower maven dependency of the library causing this error.\nI&#39;ve had SDK 1.8_191, and I had to use TestNG 6.14.3, as versions 7.x caused this error","body":"Or, if you can&#39;t change SDK like in my case, then lower maven dependency of the library causing this error. I&#39;ve had SDK 1.8_191, and I had to use TestNG 6.14.3, as versions 7.x caused this error"}],"tags":[],"owner":{"account_id":1844242,"reputation":5367,"user_id":1672972,"accept_rate":70,"display_name":"Allan Spreys"},"comment_count":3,"down_vote_count":2,"up_vote_count":116,"is_accepted":true,"score":114,"last_activity_date":1422396629,"creation_date":1422396629,"answer_id":28180983,"question_id":28180915,"body_markdown":"Select &quot;File&quot; -&gt; &quot;Project Structure&quot;.\r\n\r\nUnder &quot;Project Settings&quot; select &quot;Project&quot;\r\n\r\nFrom there you can select the &quot;Project SDK&quot;.","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>Select \"File\" -> \"Project Structure\".</p>\n\n<p>Under \"Project Settings\" select \"Project\"</p>\n\n<p>From there you can select the \"Project SDK\".</p>\n"},{"comments":[{"owner":{"account_id":72569,"reputation":10656,"user_id":209502,"accept_rate":67,"display_name":"Krzysztof Wolny"},"score":7,"creation_date":1442481808,"post_id":28557800,"comment_id":53103295,"body_markdown":"&quot;it means your java runtime version is 1.8, but your compiler version (javac) is 1.6. To simply solve it, just retreat the java version from 1.8 to 1.6.&quot; - rather opposite","body":"&quot;it means your java runtime version is 1.8, but your compiler version (javac) is 1.6. To simply solve it, just retreat the java version from 1.8 to 1.6.&quot; - rather opposite"},{"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"score":2,"creation_date":1643633428,"post_id":28557800,"comment_id":125384050,"body_markdown":"I corrected the answer according to the @KrzystofWolny&#39;s comment. See also https://stackoverflow.com/a/4692743/7769052","body":"I corrected the answer according to the @KrzystofWolny&#39;s comment. See also <a href=\"https://stackoverflow.com/a/4692743/7769052\">stackoverflow.com/a/4692743/7769052</a>"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1699999047,"post_id":28557800,"comment_id":136600539,"body_markdown":"Re *&quot;It didn&#39;t solve my problem.&quot;*: What is that supposed to mean? Why is it in an answer? Doesn&#39;t the last part of the answer work? Why is it included, then?","body":"Re <i>&quot;It didn&#39;t solve my problem.&quot;</i>: What is that supposed to mean? Why is it in an answer? Doesn&#39;t the last part of the answer work? Why is it included, then?"}],"tags":[],"owner":{"account_id":2985330,"reputation":647,"user_id":2534318,"display_name":"CodeLikeNoonesBusiness"},"comment_count":3,"down_vote_count":2,"up_vote_count":35,"is_accepted":false,"score":33,"last_activity_date":1699998951,"creation_date":1424162454,"answer_id":28557800,"question_id":28180915,"body_markdown":"It means your Java runtime version is 1.6, but your compiler version ([javac][1]) is 1.8. To simply solve it, just advance your JVM version to 1.8.\r\n\r\nBut if you don&#39;t want to change the Java runtime version, then do the following steps:\r\n\r\n1. `JAVA_HOME= &quot;your JDK v1.8 folder path&quot;`, to make sure JDK is also v1.8 and use `java -version` and `javac -version` again to ensure it\r\n2. Make sure IntelliJ&#39;s compiler mode is set to compliant with v1.6. But I have tried that. It didn&#39;t solve my problem.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Javac\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>It means your Java runtime version is 1.6, but your compiler version (<a href=\"https://en.wikipedia.org/wiki/Javac\" rel=\"nofollow noreferrer\">javac</a>) is 1.8. To simply solve it, just advance your JVM version to 1.8.</p>\n<p>But if you don't want to change the Java runtime version, then do the following steps:</p>\n<ol>\n<li><code>JAVA_HOME= &quot;your JDK v1.8 folder path&quot;</code>, to make sure JDK is also v1.8 and use <code>java -version</code> and <code>javac -version</code> again to ensure it</li>\n<li>Make sure IntelliJ's compiler mode is set to compliant with v1.6. But I have tried that. It didn't solve my problem.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1084641,"reputation":520,"user_id":1080643,"accept_rate":47,"display_name":"Manglesh"},"score":1,"creation_date":1563960211,"post_id":30326807,"comment_id":100870292,"body_markdown":"adding fork = true in configuration didn&#39;t work for me.","body":"adding fork = true in configuration didn&#39;t work for me."}],"tags":[],"owner":{"account_id":6331618,"reputation":5,"user_id":4916385,"display_name":"praneeth"},"comment_count":1,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1699999349,"creation_date":1432041473,"answer_id":30326807,"question_id":28180915,"body_markdown":"I faced the same problem, &quot;Class file has wrong version 52.0, should be 50.0&quot; when running Java through [Ant][1]...\r\n\r\nAll I did was adding **fork=&quot;true&quot;** wherever I used the **javac** task, and it worked...\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Ant\r\n\r\n\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I faced the same problem, &quot;Class file has wrong version 52.0, should be 50.0&quot; when running Java through <a href=\"https://en.wikipedia.org/wiki/Apache_Ant\" rel=\"nofollow noreferrer\">Ant</a>...</p>\n<p>All I did was adding <strong>fork=&quot;true&quot;</strong> wherever I used the <strong>javac</strong> task, and it worked...</p>\n"},{"comments":[{"owner":{"account_id":4627952,"reputation":247,"user_id":3751189,"accept_rate":95,"display_name":"santoshM"},"score":2,"creation_date":1559217561,"post_id":32559772,"comment_id":99356135,"body_markdown":"Cleaning project did not do the job for me. I just removed the classes, which were throwing the error and did a clean build to get them compiled by 1.6. This resolved my issue.","body":"Cleaning project did not do the job for me. I just removed the classes, which were throwing the error and did a clean build to get them compiled by 1.6. This resolved my issue."}],"tags":[],"owner":{"account_id":3769642,"reputation":2409,"user_id":3132194,"display_name":"user3132194"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1699999522,"creation_date":1442217341,"answer_id":32559772,"question_id":28180915,"body_markdown":"I have got the same error as in the header because of a failed attempt to compile my project with [Java&amp;nbsp;8][1] and then reattempting to compile with [Java&amp;nbsp;6][2].\r\n\r\nSome classes where compiled at the first attempt with Java&amp;nbsp;8 and did not recompile with Java&amp;nbsp;6. Mixed classes did not compile then. Cleaning the project solved the problem.\r\n\r\nThis answer is not strictly relevant to the question, but it could be useful for someone.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\r\n\r\n\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I have got the same error as in the header because of a failed attempt to compile my project with <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">JavaÂ 8</a> and then reattempting to compile with <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\">JavaÂ 6</a>.</p>\n<p>Some classes where compiled at the first attempt with JavaÂ 8 and did not recompile with JavaÂ 6. Mixed classes did not compile then. Cleaning the project solved the problem.</p>\n<p>This answer is not strictly relevant to the question, but it could be useful for someone.</p>\n"},{"comments":[{"owner":{"account_id":255381,"reputation":1760,"user_id":535401,"accept_rate":40,"display_name":"JakeRobb"},"score":8,"creation_date":1483478679,"post_id":32932507,"comment_id":70111541,"body_markdown":"Don&#39;t do this. The accepted answer is correct, and all kinds of weirdness could result from this alternative.","body":"Don&#39;t do this. The accepted answer is correct, and all kinds of weirdness could result from this alternative."}],"tags":[],"owner":{"account_id":7061361,"reputation":1,"user_id":5406463,"display_name":"ADAM"},"comment_count":1,"down_vote_count":10,"up_vote_count":0,"is_accepted":false,"score":-10,"last_activity_date":1699999635,"creation_date":1443954734,"answer_id":32932507,"question_id":28180915,"body_markdown":"In your IntelliJ IDEA, find file *tools.jar*. Replace it with *tools.jar* from your [JDK&amp;nbsp;8][1].\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>In your IntelliJ IDEA, find file <em>tools.jar</em>. Replace it with <em>tools.jar</em> from your <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">JDKÂ 8</a>.</p>\n"},{"tags":[],"owner":{"account_id":9831764,"reputation":390,"user_id":7283201,"display_name":"Sadman Sakib"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1605147749,"creation_date":1605147749,"answer_id":64796992,"question_id":28180915,"body_markdown":"If you are using `javac` to compile, and you get this error, then \r\nremove all the `.class` files \r\n```\r\nrm *.class     # On Unix-based systems\r\n```\r\nand recompile. \r\n```\r\njavac fileName.java\r\n```","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>If you are using <code>javac</code> to compile, and you get this error, then\nremove all the <code>.class</code> files</p>\n<pre><code>rm *.class     # On Unix-based systems\n</code></pre>\n<p>and recompile.</p>\n<pre><code>javac fileName.java\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9781391,"reputation":358,"user_id":7249306,"display_name":"Denis Abakumov"},"score":0,"creation_date":1653411884,"post_id":68032816,"comment_id":127844610,"body_markdown":"Thanks! This explains why TestNG 7.6.0+ can&#39;t be used with Java 8. I downgraded the TestNG dependency to 7.5 and it worked.","body":"Thanks! This explains why TestNG 7.6.0+ can&#39;t be used with Java 8. I downgraded the TestNG dependency to 7.5 and it worked."},{"owner":{"account_id":7091393,"reputation":123,"user_id":5426450,"accept_rate":43,"display_name":"Geralt"},"score":0,"creation_date":1670315944,"post_id":68032816,"comment_id":131842071,"body_markdown":"I had a similar problem &quot;class file has wrong version 61.0, should be 52.0&quot; for using the fundamental org.springframework.context.annotation.ComponentScan class! For me changing the JDK/JRE version didn&#39;t solve the problem. Then I downgraded spring-webmvc dependency version from 6.0.2 to 5.2.6.RELEASE and it eventually worked.","body":"I had a similar problem &quot;class file has wrong version 61.0, should be 52.0&quot; for using the fundamental org.springframework.context.annotation.ComponentScan class! For me changing the JDK/JRE version didn&#39;t solve the problem. Then I downgraded spring-webmvc dependency version from 6.0.2 to 5.2.6.RELEASE and it eventually worked."}],"tags":[],"owner":{"account_id":1360311,"reputation":16577,"user_id":1297812,"display_name":"laffuste"},"comment_count":2,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1700000133,"creation_date":1624009028,"answer_id":68032816,"question_id":28180915,"body_markdown":"If the error comes from an **external dependency** ([Maven][1]/[Gradle][2]), the version you imported requires a newer JDK. (*e.g., you imported [Caffeine][3] 3.0.x which requires [Java&amp;nbsp;11][4], but you are using [Java&amp;nbsp;8][5].*)\r\n\r\nSolution: downgrade the dependency to the latest version compatible with your JDK.\r\n\r\nJava version numbers can be found in [Java class file wiki page](https://en.wikipedia.org/wiki/Java_class_file#General_layout) (byte offset 6-7).\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [2]: https://en.wikipedia.org/wiki/Gradle\r\n  [3]: https://github.com/ben-manes/caffeine\r\n  [4]: https://en.wikipedia.org/wiki/Java_version_history#Java_11\r\n  [5]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>If the error comes from an <strong>external dependency</strong> (<a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a>/<a href=\"https://en.wikipedia.org/wiki/Gradle\" rel=\"nofollow noreferrer\">Gradle</a>), the version you imported requires a newer JDK. (<em>e.g., you imported <a href=\"https://github.com/ben-manes/caffeine\" rel=\"nofollow noreferrer\">Caffeine</a> 3.0.x which requires <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_11\" rel=\"nofollow noreferrer\">JavaÂ 11</a>, but you are using <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">JavaÂ 8</a>.</em>)</p>\n<p>Solution: downgrade the dependency to the latest version compatible with your JDK.</p>\n<p>Java version numbers can be found in <a href=\"https://en.wikipedia.org/wiki/Java_class_file#General_layout\" rel=\"nofollow noreferrer\">Java class file wiki page</a> (byte offset 6-7).</p>\n"},{"comments":[{"owner":{"account_id":13016975,"reputation":197,"user_id":9407809,"display_name":"Kevin Crum"},"score":0,"creation_date":1629151854,"post_id":68479720,"comment_id":121606740,"body_markdown":"can you be more specific about &lt;jarfile&gt; argument? If my error is ```bad class file: /usr/share/openjfx/lib/javafx.graphics.jar!/javafx/application/Platform.class\n    class file has wrong version 54.0, should be 52.0\n    Please remove or make sure it appears in the correct subdirectory of the classpath.``` then is the jarfile `graphics.jar`?","body":"can you be more specific about &lt;jarfile&gt; argument? If my error is <code>bad class file: &#47;usr&#47;share&#47;openjfx&#47;lib&#47;javafx.graphics.jar!&#47;javafx&#47;applicati&zwnj;&#8203;on&#47;Platform.class     class file has wrong version 54.0, should be 52.0     Please remove or make sure it appears in the correct subdirectory of the classpath.</code> then is the jarfile <code>graphics.jar</code>?"}],"tags":[],"owner":{"account_id":13615054,"reputation":789,"user_id":9821205,"display_name":"BUGATTI  AJAY"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700000879,"creation_date":1626932533,"answer_id":68479720,"question_id":28180915,"body_markdown":"If the issue is in IntelliJ, then do this in the terminal (not in the IntelliJ terminal):\r\n\r\n1. change the Java version to an appropriate one (in my case, using JDK 1.4 as the issue was `class file has wrong version 55.0, should be 52.0`)\r\n2. `java -Dspring.profiles.active=test -jar build/libs/&lt;jarname&gt;.jar` \\\r\nRun this\r\n\r\n\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>If the issue is in IntelliJ, then do this in the terminal (not in the IntelliJ terminal):</p>\n<ol>\n<li>change the Java version to an appropriate one (in my case, using JDK 1.4 as the issue was <code>class file has wrong version 55.0, should be 52.0</code>)</li>\n<li><code>java -Dspring.profiles.active=test -jar build/libs/&lt;jarname&gt;.jar</code> <br />\nRun this</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10794010,"reputation":1606,"user_id":7940437,"display_name":"Majid Roustaei"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1700002136,"creation_date":1641373812,"answer_id":70590286,"question_id":28180915,"body_markdown":"Generally this kind of error happens when you try run a `.class` file which is compiled with another version of Java.\r\n\r\nIn your case, it is compiled with [Java&amp;nbsp;8][1] (major version -&gt; 52) and you want to run it with [Java&amp;nbsp;6][2] (major version -&gt; 50).\r\n\r\nHere is a list of major versions of Java and SE version:\r\n[Class file format major versions][3]\r\n\r\nTo solve the problem, use the same version of the compiled class file, based on your project structure.\r\nIn IntelliJ IDEA: Menu *File* &amp;rarr; *Project Structure* &amp;rarr; *Project* &amp;rarr; *Project SDK*\r\n\r\nIn case of using builder tools like [Maven][4], this configuration also should be changed in the corresponding settings. Here is an example of how it is done in a [POM][5] file:\r\n\r\n```lang-xml\r\n&lt;properties&gt;\r\n    &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\r\n  [3]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.1-200-B.2\r\n  [4]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [5]: https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>Generally this kind of error happens when you try run a <code>.class</code> file which is compiled with another version of Java.</p>\n<p>In your case, it is compiled with <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">JavaÂ 8</a> (major version -&gt; 52) and you want to run it with <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\">JavaÂ 6</a> (major version -&gt; 50).</p>\n<p>Here is a list of major versions of Java and SE version:\n<a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.1-200-B.2\" rel=\"nofollow noreferrer\">Class file format major versions</a></p>\n<p>To solve the problem, use the same version of the compiled class file, based on your project structure.\nIn IntelliJ IDEA: Menu <em>File</em> â <em>Project Structure</em> â <em>Project</em> â <em>Project SDK</em></p>\n<p>In case of using builder tools like <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a>, this configuration also should be changed in the corresponding settings. Here is an example of how it is done in a <a href=\"https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\" rel=\"nofollow noreferrer\">POM</a> file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"score":0,"creation_date":1643632516,"post_id":70872597,"comment_id":125383694,"body_markdown":"the versions you mentioned are wrong. It should be 8 (52.0) and 6 (50.0) instead of 11 (55.0) and 8.","body":"the versions you mentioned are wrong. It should be 8 (52.0) and 6 (50.0) instead of 11 (55.0) and 8."}],"tags":[],"owner":{"account_id":14248629,"reputation":281,"user_id":10292838,"display_name":"N.Neupane"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700002236,"creation_date":1643250445,"answer_id":70872597,"question_id":28180915,"body_markdown":"The error signifies that you may have the dependencies that are compiled in Java 11, but you are using Java 8, so there are two options left. You can either migrate to Java 11 or ask the library developer to provide you with a Java 8 build.","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>The error signifies that you may have the dependencies that are compiled in Java 11, but you are using Java 8, so there are two options left. You can either migrate to Java 11 or ask the library developer to provide you with a Java 8 build.</p>\n"},{"tags":[],"owner":{"account_id":16863493,"reputation":57,"user_id":16555594,"display_name":"Ritik Raj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700002305,"creation_date":1665984103,"answer_id":74092858,"question_id":28180915,"body_markdown":"Class version 52 is [Java&amp;nbsp;8][1]. You need Java 11.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>Class version 52 is <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">JavaÂ 8</a>. You need Java 11.</p>\n"},{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700002327,"creation_date":1667812934,"answer_id":74344300,"question_id":28180915,"body_markdown":"I installed a new JDK version, but I forgot to set the `JAVA_HOME` environment variable to the new JDK. Setting it to the correct version helped!\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I installed a new JDK version, but I forgot to set the <code>JAVA_HOME</code> environment variable to the new JDK. Setting it to the correct version helped!</p>\n"},{"tags":[],"owner":{"account_id":12858978,"reputation":231,"user_id":9301392,"display_name":"AnushaSP07"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1700002856,"creation_date":1674493226,"answer_id":75212710,"question_id":28180915,"body_markdown":"Check the version of Java it is showing in the error:\r\n\r\n- 45 = Java 1.1\r\n- 46 = Java 1.2\r\n- 47 = Java 1.3\r\n- 48 = Java 1.4\r\n- 49 = Java 5\r\n- 50 = Java 6\r\n- 51 = Java 7\r\n- 52 = Java 8\r\n- 53 = Java 9\r\n- 54 = Java 10\r\n- 55 = Java 11\r\n- 56 = Java 12\r\n- 57 = Java 13\r\n\r\nInstall/download that JDK in program files/Java folder.\r\n\r\nIn Eclipse or STS, right click on project &amp;rarr; *Build Path* &amp;rarr; *Libraries* &amp;rarr; add JRE system libraries &amp;rarr; add the version of JDK showing in the error as an alternate JRE.\r\n\r\n[![Enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/oS5jQ.jpg\r\n\r\n\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>Check the version of Java it is showing in the error:</p>\n<ul>\n<li>45 = Java 1.1</li>\n<li>46 = Java 1.2</li>\n<li>47 = Java 1.3</li>\n<li>48 = Java 1.4</li>\n<li>49 = Java 5</li>\n<li>50 = Java 6</li>\n<li>51 = Java 7</li>\n<li>52 = Java 8</li>\n<li>53 = Java 9</li>\n<li>54 = Java 10</li>\n<li>55 = Java 11</li>\n<li>56 = Java 12</li>\n<li>57 = Java 13</li>\n</ul>\n<p>Install/download that JDK in program files/Java folder.</p>\n<p>In Eclipse or STS, right click on project â <em>Build Path</em> â <em>Libraries</em> â add JRE system libraries â add the version of JDK showing in the error as an alternate JRE.</p>\n<p><a href=\"https://i.stack.imgur.com/oS5jQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oS5jQ.jpg\" alt=\"Enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6017591,"reputation":41,"user_id":4725838,"display_name":"Ajay Kumar Sinha"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700002638,"creation_date":1676457436,"answer_id":75458521,"question_id":28180915,"body_markdown":"I have solved this by changing my [pom.xml][1] file:\r\n\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.6.4&lt;/version&gt;\r\n\r\nChange 3.0.2 to 2.6.4.\r\n\r\n  [1]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I have solved this by changing my <a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a> file:</p>\n<pre><code>&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n&lt;version&gt;2.6.4&lt;/version&gt;\n</code></pre>\n<p>Change 3.0.2 to 2.6.4.</p>\n"},{"tags":[],"owner":{"account_id":8617529,"reputation":111,"user_id":6453791,"accept_rate":40,"display_name":"N. I. Md. Ashafuddula"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1700002915,"creation_date":1677559497,"answer_id":75587959,"question_id":28180915,"body_markdown":"I am using **JDK 1.8.0_131** and For my case, the version code ``&lt;version&gt;2.7.5&lt;/version&gt;`` in **pom.xml** and ``module -&gt; language level 8`` solved my issue.\r\n\r\n```lang-xml\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.5&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n```\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I am using <strong>JDK 1.8.0_131</strong> and For my case, the version code <code>&lt;version&gt;2.7.5&lt;/version&gt;</code> in <strong>pom.xml</strong> and <code>module -&gt; language level 8</code> solved my issue.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.5&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1688556,"reputation":896,"user_id":1551368,"display_name":"dobrivoje"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677869182,"creation_date":1677869182,"answer_id":75630803,"question_id":28180915,"body_markdown":"\r\nI couldn&#39;t change an SDK version, so I had to lower maven dependency of the library causing this error. \r\nI&#39;ve had SDK 1.8_191, and I had to use TestNG 6.14.3, as versions 7.x wouldn&#39;t work.","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I couldn't change an SDK version, so I had to lower maven dependency of the library causing this error.\nI've had SDK 1.8_191, and I had to use TestNG 6.14.3, as versions 7.x wouldn't work.</p>\n"},{"tags":[],"owner":{"account_id":3638345,"reputation":959,"user_id":3033184,"display_name":"GFPF"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700003006,"creation_date":1682405610,"answer_id":76098339,"question_id":28180915,"body_markdown":"Project&#39;s [build.gradle][1] file:\r\n\r\n    allprojects {    tasks.withType(org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile).configureEach {\r\n            kotlinOptions {\r\n                jvmTarget = &quot;1.8&quot;\r\n                apiVersion = &quot;1.8&quot;\r\n                languageVersion = &quot;1.8&quot;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/tutorial_using_tasks.html\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>Project's <a href=\"https://docs.gradle.org/current/userguide/tutorial_using_tasks.html\" rel=\"nofollow noreferrer\">build.gradle</a> file:</p>\n<pre><code>allprojects {    tasks.withType(org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile).configureEach {\n        kotlinOptions {\n            jvmTarget = &quot;1.8&quot;\n            apiVersion = &quot;1.8&quot;\n            languageVersion = &quot;1.8&quot;\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13065194,"reputation":73,"user_id":9440826,"display_name":"Gaur 97"},"score":0,"creation_date":1698139938,"post_id":76358757,"comment_id":136364328,"body_markdown":"But for Spring boot 3, I have installed java 8 and its working fine in Eclipse without any problem but not in IntelliJ why?","body":"But for Spring boot 3, I have installed java 8 and its working fine in Eclipse without any problem but not in IntelliJ why?"}],"tags":[],"owner":{"account_id":18210079,"reputation":39,"user_id":13252769,"display_name":"PRASHANT JHA"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700003236,"creation_date":1685375996,"answer_id":76358757,"question_id":28180915,"body_markdown":"I also faced the same issue. The issue may be because [Spring Boot][1] and Java version are not compatible. For example, Spring Boot 3 need minimum JDK 17, so if you are using [Java&amp;nbsp;8][2] then you have to downgrade your Spring Boot version to 2.*\r\n\r\n*[Does Spring 3.0.x support Java 8? In Spring Starter I found sourceCompatibility = &#39;17&#39; default for 3.0.x and above][3]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Spring_Framework#Spring_Boot\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n  [3]: https://stackoverflow.com/questions/75983170/does-spring-3-0-x-support-java-8-in-spring-starter-i-found-sourcecompatibility\r\n\r\n\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I also faced the same issue. The issue may be because <a href=\"https://en.wikipedia.org/wiki/Spring_Framework#Spring_Boot\" rel=\"nofollow noreferrer\">Spring Boot</a> and Java version are not compatible. For example, Spring Boot 3 need minimum JDK 17, so if you are using <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">JavaÂ 8</a> then you have to downgrade your Spring Boot version to 2.*</p>\n<p><em><a href=\"https://stackoverflow.com/questions/75983170/does-spring-3-0-x-support-java-8-in-spring-starter-i-found-sourcecompatibility\">Does Spring 3.0.x support Java 8? In Spring Starter I found sourceCompatibility = '17' default for 3.0.x and above</a></em></p>\n"},{"tags":[],"owner":{"account_id":15590196,"reputation":181,"user_id":11247504,"display_name":"Akash Srivastava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700003368,"creation_date":1699951764,"answer_id":77479248,"question_id":28180915,"body_markdown":"If you are creating your own JAR file, make sure that the application in which you are importing the JAR file has &#39;id&#39; in the plugins section as &#39;application&#39;.\r\n\r\n    plugins {\r\n        id &#39;application&#39;\r\n    }\r\n\r\nIf both JAR and application has &#39;id&#39; as &#39;java&#39;, we might see a similar error.\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>If you are creating your own JAR file, make sure that the application in which you are importing the JAR file has 'id' in the plugins section as 'application'.</p>\n<pre><code>plugins {\n    id 'application'\n}\n</code></pre>\n<p>If both JAR and application has 'id' as 'java', we might see a similar error.</p>\n"}],"owner":{"account_id":377165,"reputation":5956,"user_id":729082,"accept_rate":91,"display_name":"jaywayco"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":427960,"favorite_count":0,"down_vote_count":0,"up_vote_count":150,"accepted_answer_id":28180983,"answer_count":19,"score":150,"last_activity_date":1700003368,"creation_date":1422396305,"question_id":28180915,"body_markdown":"I&#39;m trying to compile my project in [IntelliJ IDEA][1]. I&#39;m using a class in an external JAR file and on compilation receiving the following error.\r\n\r\n```lang-none\r\nClass file has wrong version 52.0, should be 50.0\r\n```\r\n\r\nI understand that it&#39;s saying the JAR file was compiled with a newer Java version than that which IntelliJ is using. How do I make them compatible?\r\n\r\nI have updated the Java on my Mac to 1.8 and when I run `java -version` or `javac -version` it confirms this.\r\n\r\nWhat am I missing? (Apart from Java development experience)\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n\r\n","title":"Compile error &quot;Class file has wrong version 52.0, should be 50.0&quot;","body":"<p>I'm trying to compile my project in <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ IDEA</a>. I'm using a class in an external JAR file and on compilation receiving the following error.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Class file has wrong version 52.0, should be 50.0\n</code></pre>\n<p>I understand that it's saying the JAR file was compiled with a newer Java version than that which IntelliJ is using. How do I make them compatible?</p>\n<p>I have updated the Java on my Mac to 1.8 and when I run <code>java -version</code> or <code>javac -version</code> it confirms this.</p>\n<p>What am I missing? (Apart from Java development experience)</p>\n"},{"tags":["java","cplex"],"answers":[{"tags":[],"owner":{"account_id":193612,"reputation":32530,"user_id":2320035,"accept_rate":79,"display_name":"sascha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699365398,"creation_date":1699365398,"answer_id":77438806,"question_id":77391259,"body_markdown":"This &quot;feels&quot; like a version incompatibility.\r\n\r\n**Your CPLEX 12.10.0 is heavily outdated: it&#39;s from 2019.**\r\n\r\nThis version you are trying to install officially only supports Ubuntu &lt;= 18 LTS which means you are not only using an future LTS version (20 LTS; slow iteration) but even one more future LTS version (22 LTS).\r\n\r\nYour error is related to the installer-tool (Java-based) and while one would expect some backwards-compatibility, especially with Java 11 (LTS), there might be some issue with your Java 11 Version you provide and what&#39;s expected. But this is only a guess.\r\n\r\n### Workarounds\r\n\r\n#### A:\r\nI highly highly recommend to get a newer CPLEX version. Depending on your usage, you might see other issues too (e.g. no python &gt; 3.7 support) too.\r\n\r\n#### B:\r\nIf thats not possible, which would be not good, consider downgrading your linux distribution (again: not the greatest of all ideas).\r\n\r\n#### C:\r\nThe last recommendation: Contact their support although i expect them to tell you too, that your OS distribution is not supported.","title":"java.lang.ClassNotFoundException: com.zerog.lax.LAX","body":"<p>This &quot;feels&quot; like a version incompatibility.</p>\n<p><strong>Your CPLEX 12.10.0 is heavily outdated: it's from 2019.</strong></p>\n<p>This version you are trying to install officially only supports Ubuntu &lt;= 18 LTS which means you are not only using an future LTS version (20 LTS; slow iteration) but even one more future LTS version (22 LTS).</p>\n<p>Your error is related to the installer-tool (Java-based) and while one would expect some backwards-compatibility, especially with Java 11 (LTS), there might be some issue with your Java 11 Version you provide and what's expected. But this is only a guess.</p>\n<h3>Workarounds</h3>\n<h4>A:</h4>\n<p>I highly highly recommend to get a newer CPLEX version. Depending on your usage, you might see other issues too (e.g. no python &gt; 3.7 support) too.</p>\n<h4>B:</h4>\n<p>If thats not possible, which would be not good, consider downgrading your linux distribution (again: not the greatest of all ideas).</p>\n<h4>C:</h4>\n<p>The last recommendation: Contact their support although i expect them to tell you too, that your OS distribution is not supported.</p>\n"},{"tags":[],"owner":{"account_id":9875245,"reputation":11,"user_id":7313267,"display_name":"Benoit Dvl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700003215,"creation_date":1700003215,"answer_id":77484354,"question_id":77391259,"body_markdown":"I had the same issue with Ubuntu2204 and CPLEX 12.10. I solved it by updating the CPLEX version to the current one (22.1)","title":"java.lang.ClassNotFoundException: com.zerog.lax.LAX","body":"<p>I had the same issue with Ubuntu2204 and CPLEX 12.10. I solved it by updating the CPLEX version to the current one (22.1)</p>\n"}],"owner":{"account_id":19666743,"reputation":41,"user_id":14396995,"display_name":"Lucas Kuratani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700003215,"creation_date":1698692921,"question_id":77391259,"body_markdown":"I&#39;m trying to install a software called CPLEX, from IBM. They provided me with an .bin installer. When I try to run it, I get an error when a class is not found. Since I&#39;m not familiar with this language, I&#39;m not sure what to do and how to fix it. I&#39;m using Ubuntu 22.04 and when I run java --version, I get this:\r\n``` \r\nopenjdk 11.0.20.1 2023-08-24\r\nOpenJDK Runtime Environment (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04, mixed mode, sharing)\r\n```\r\n\r\nError I&#39;m getting:\r\n```\r\nubuntu@ip-172-30-0-248:~$ ./cos_installer-12.10.0.0.R0-CC439ML-linux-x86-64.bin\r\nPreparing to install\r\nExtracting the JRE from the installer archive...\r\nUnpacking the JRE...\r\nExtracting the installation resources from the installer archive...\r\nConfiguring the installer for this system&#39;s environment...\r\n\r\nLaunching installer...\r\n\r\nError: Could not find or load main class com.zerog.lax.LAX\r\nCaused by: java.lang.ClassNotFoundException: com.zerog.lax.LAX\r\n```","title":"java.lang.ClassNotFoundException: com.zerog.lax.LAX","body":"<p>I'm trying to install a software called CPLEX, from IBM. They provided me with an .bin installer. When I try to run it, I get an error when a class is not found. Since I'm not familiar with this language, I'm not sure what to do and how to fix it. I'm using Ubuntu 22.04 and when I run java --version, I get this:</p>\n<pre><code>openjdk 11.0.20.1 2023-08-24\nOpenJDK Runtime Environment (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04)\nOpenJDK 64-Bit Server VM (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04, mixed mode, sharing)\n</code></pre>\n<p>Error I'm getting:</p>\n<pre><code>ubuntu@ip-172-30-0-248:~$ ./cos_installer-12.10.0.0.R0-CC439ML-linux-x86-64.bin\nPreparing to install\nExtracting the JRE from the installer archive...\nUnpacking the JRE...\nExtracting the installation resources from the installer archive...\nConfiguring the installer for this system's environment...\n\nLaunching installer...\n\nError: Could not find or load main class com.zerog.lax.LAX\nCaused by: java.lang.ClassNotFoundException: com.zerog.lax.LAX\n</code></pre>\n"},{"tags":["java","scala","maven","log4j","scalatest"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1700000668,"post_id":77484164,"comment_id":136600768,"body_markdown":"Are the Maven logs or do they come from the application?","body":"Are the Maven logs or do they come from the application?"},{"owner":{"account_id":15300680,"reputation":117,"user_id":11039211,"display_name":"Ivan Webber"},"score":0,"creation_date":1700000977,"post_id":77484164,"comment_id":136600817,"body_markdown":"They come from the Apache Flink framework which is used as a dependency","body":"They come from the Apache Flink framework which is used as a dependency"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1700001097,"post_id":77484164,"comment_id":136600842,"body_markdown":"Do you have any logging configuration?","body":"Do you have any logging configuration?"},{"owner":{"account_id":15300680,"reputation":117,"user_id":11039211,"display_name":"Ivan Webber"},"score":0,"creation_date":1700003699,"post_id":77484164,"comment_id":136601134,"body_markdown":"No. I tried adding a basic `log4j.properties` file as an argument to the scala-test-maven plugin and under `src/main/resources` and `src/test/resources` to no effect. I also tried using `-Dorg.slf4j.simpleLogger.defaultLogLevel=warn` which I saw in another StackOverflow post; also to no effect.","body":"No. I tried adding a basic <code>log4j.properties</code> file as an argument to the scala-test-maven plugin and under <code>src&#47;main&#47;resources</code> and <code>src&#47;test&#47;resources</code> to no effect. I also tried using <code>-Dorg.slf4j.simpleLogger.defaultLogLevel=warn</code> which I saw in another StackOverflow post; also to no effect."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1700013641,"post_id":77484164,"comment_id":136602120,"body_markdown":"Could you provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)?","body":"Could you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}],"owner":{"account_id":15300680,"reputation":117,"user_id":11039211,"display_name":"Ivan Webber"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700000949,"creation_date":1700000394,"question_id":77484164,"body_markdown":"I don&#39;t know what changed, but starting today when I run unit tests, `mvn test`, the output is terribly cluttered with INFO and DEBUG log4j logging from a certain dependency. How can I configure Maven to silence logging from dependencies for unit tests?\r\n\r\nI am using Vs Code with the Metals extension for Scala. I&#39;m not sure what caused it to start today.","title":"Maven Logging for Unit Test Dependencies","body":"<p>I don't know what changed, but starting today when I run unit tests, <code>mvn test</code>, the output is terribly cluttered with INFO and DEBUG log4j logging from a certain dependency. How can I configure Maven to silence logging from dependencies for unit tests?</p>\n<p>I am using Vs Code with the Metals extension for Scala. I'm not sure what caused it to start today.</p>\n"},{"tags":["java","spring","spring-boot","docker","github-package-registry"],"comments":[{"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"score":0,"creation_date":1700073328,"post_id":77484158,"comment_id":136611137,"body_markdown":"Using the `jammy` builder is definitely the right thing to do. It should not be necessary to specify the buildpack explicitly. If you are saying that everything works when you don&#39;t specify the buildpack then I think you have solved the problem. Note that with the configuration you have here you should be able to run `mvn spring-boot:build-image` to generate the image instead of using `pack`.","body":"Using the <code>jammy</code> builder is definitely the right thing to do. It should not be necessary to specify the buildpack explicitly. If you are saying that everything works when you don&#39;t specify the buildpack then I think you have solved the problem. Note that with the configuration you have here you should be able to run <code>mvn spring-boot:build-image</code> to generate the image instead of using <code>pack</code>."}],"owner":{"account_id":23240231,"reputation":119,"user_id":17329663,"display_name":"Dragos Polifronie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700000219,"creation_date":1700000219,"question_id":77484158,"body_markdown":"I was following this [tutorial][1] to upload a spring boot app as a package to github registry. In this tutorial, on the bottom of the page you can see a packaging of the app in the java-native form like this:\r\n```\r\npack build ghcr.io/jonashackt/spring-boot-flyio:latest \\\r\n    --builder paketobuildpacks/builder:tiny \\\r\n    --buildpack paketo-buildpacks/java-native-image@5.12.0 \\\r\n    --path . \\\r\n    --env &quot;BP_JVM_VERSION=17&quot; \\\r\n    --env &quot;BP_NATIVE_IMAGE=true&quot; \\\r\n    --cache-image ghcr.io/jonashackt/spring-boot-flyio-paketo-cache-image:latest \\\r\n    --publish\r\n```\r\n\r\nAfter some trial &amp; error, I found out that `paketobuildpacks/builder:tiny` is deprecated and I used `paketobuildpacks/builder-jammy`. Now, my problem is that even though the package is uploaded, when I run it with `docker run link/to/registry`, the spring boot app stops immediately, like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nthis is the script i ran:\r\n```\r\npack build ghcr.io/dragosp33/hello-world-native:latest --builder paketobuildpacks/builder-jammy-tiny --buildpack paketo-buildpacks/java-native-image --path . --env &quot;BP_JVM_VERSION=17&quot; --env &quot;BP_NATIVE_IMAGE=true&quot; --publish\r\n```\r\n\r\nHowever, if I don&#39;t use the `paketo-buildpacks/java-native-image` and resort to simple:\r\n```\r\npack build ghcr.io/dragosp33/second-hello-world-non-native:latest --builder paketobuildpacks/builder-jammy-tiny --publish\r\n```\r\n\r\nI can go with `docker run -p 8080:8080 ghcr.io/dragosp33/second-hello-world-non-native:latest` and the app starts and runs on port 8080. \r\n\r\nHere is my spring boot application pom.xml ( is the only file that seems important, the entire app is just a hello world app )\r\n\r\n**pom.xml:**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.5&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo44&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;demo44&lt;/name&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            \r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;image&gt;\r\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-tiny:latest&lt;/builder&gt;\r\n                    &lt;/image&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nWhat could be the problem here?\r\n\r\n  [1]: https://www.codecentric.de/wissens-hub/blog/spring-boot-flyio\r\n  [2]: https://i.stack.imgur.com/01Bws.png","title":"How to build a native java spring from spring boot app to git registry?","body":"<p>I was following this <a href=\"https://www.codecentric.de/wissens-hub/blog/spring-boot-flyio\" rel=\"nofollow noreferrer\">tutorial</a> to upload a spring boot app as a package to github registry. In this tutorial, on the bottom of the page you can see a packaging of the app in the java-native form like this:</p>\n<pre><code>pack build ghcr.io/jonashackt/spring-boot-flyio:latest \\\n    --builder paketobuildpacks/builder:tiny \\\n    --buildpack paketo-buildpacks/java-native-image@5.12.0 \\\n    --path . \\\n    --env &quot;BP_JVM_VERSION=17&quot; \\\n    --env &quot;BP_NATIVE_IMAGE=true&quot; \\\n    --cache-image ghcr.io/jonashackt/spring-boot-flyio-paketo-cache-image:latest \\\n    --publish\n</code></pre>\n<p>After some trial &amp; error, I found out that <code>paketobuildpacks/builder:tiny</code> is deprecated and I used <code>paketobuildpacks/builder-jammy</code>. Now, my problem is that even though the package is uploaded, when I run it with <code>docker run link/to/registry</code>, the spring boot app stops immediately, like this:</p>\n<p><a href=\"https://i.stack.imgur.com/01Bws.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/01Bws.png\" alt=\"enter image description here\" /></a></p>\n<p>this is the script i ran:</p>\n<pre><code>pack build ghcr.io/dragosp33/hello-world-native:latest --builder paketobuildpacks/builder-jammy-tiny --buildpack paketo-buildpacks/java-native-image --path . --env &quot;BP_JVM_VERSION=17&quot; --env &quot;BP_NATIVE_IMAGE=true&quot; --publish\n</code></pre>\n<p>However, if I don't use the <code>paketo-buildpacks/java-native-image</code> and resort to simple:</p>\n<pre><code>pack build ghcr.io/dragosp33/second-hello-world-non-native:latest --builder paketobuildpacks/builder-jammy-tiny --publish\n</code></pre>\n<p>I can go with <code>docker run -p 8080:8080 ghcr.io/dragosp33/second-hello-world-non-native:latest</code> and the app starts and runs on port 8080.</p>\n<p>Here is my spring boot application pom.xml ( is the only file that seems important, the entire app is just a hello world app )</p>\n<p><strong>pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo44&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo44&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-tiny:latest&lt;/builder&gt;\n                    &lt;/image&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>What could be the problem here?</p>\n"},{"tags":["java","arrays","algorithm"],"comments":[{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":2,"creation_date":1699996108,"post_id":77483809,"comment_id":136600101,"body_markdown":"No this cannot be done in o(log(n)) time, as all n items need to move, so it will be O(n). But taking a step back, why would you grow a heap like that? For one, it becomes an *invalid* heap, as the heap invariant is violated.","body":"No this cannot be done in o(log(n)) time, as all n items need to move, so it will be O(n). But taking a step back, why would you grow a heap like that? For one, it becomes an <i>invalid</i> heap, as the heap invariant is violated."},{"owner":{"account_id":2882210,"reputation":1777,"user_id":2472827,"display_name":"Neil"},"score":0,"creation_date":1699996289,"post_id":77483809,"comment_id":136600130,"body_markdown":"That is not standard for implicit binary heaps. Is there some reason you&#39;re not allocating contiguous blocks?","body":"That is not standard for implicit binary heaps. Is there some reason you&#39;re not allocating contiguous blocks?"},{"owner":{"account_id":27328554,"reputation":23,"user_id":20841100,"display_name":"WastedxBusted"},"score":0,"creation_date":1699997060,"post_id":77483809,"comment_id":136600257,"body_markdown":"@trincot it&#39;s not really a heap heap per say, but rather I am trying to create a binary tree which compares two children and promotes the max value between the two to the parent and so on until the root has the greatest value found among all of the leaves.","body":"@trincot it&#39;s not really a heap heap per say, but rather I am trying to create a binary tree which compares two children and promotes the max value between the two to the parent and so on until the root has the greatest value found among all of the leaves."},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":2,"creation_date":1699997171,"post_id":77483809,"comment_id":136600264,"body_markdown":"That&#39;s the principle of sifting in a binary heap. The root will have the max value. But by adding the zeroes, you break this property. I cannot see how that is useful.","body":"That&#39;s the principle of sifting in a binary heap. The root will have the max value. But by adding the zeroes, you break this property. I cannot see how that is useful."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1699997383,"post_id":77483809,"comment_id":136600305,"body_markdown":"something like `for (int i=0,j=1,k=1; i&lt;len; i+=k,j+=2*k,k*=2) arraycopy(src, i, dst, j, min(k, len-i));` ? (no idea what its `O()` is, too late to think about it)","body":"something like <code>for (int i=0,j=1,k=1; i&lt;len; i+=k,j+=2*k,k*=2) arraycopy(src, i, dst, j, min(k, len-i));</code> ? (no idea what its <code>O()</code> is, too late to think about it)"},{"owner":{"account_id":27328554,"reputation":23,"user_id":20841100,"display_name":"WastedxBusted"},"score":0,"creation_date":1699997391,"post_id":77483809,"comment_id":136600307,"body_markdown":"@Neil when I am growing the array, I am basically merging the binary tree to another binary tree similar to it but with uninitialized values so I have to take into account the uninitialized new root and the new nodes adjacent to the old tree.","body":"@Neil when I am growing the array, I am basically merging the binary tree to another binary tree similar to it but with uninitialized values so I have to take into account the uninitialized new root and the new nodes adjacent to the old tree."},{"owner":{"account_id":2882210,"reputation":1777,"user_id":2472827,"display_name":"Neil"},"score":1,"creation_date":1699998170,"post_id":77483809,"comment_id":136600420,"body_markdown":"I would need more background on the motivation for doing this to understand your algorithm. As it stands, I&#39;m unsure what this would be useful for.","body":"I would need more background on the motivation for doing this to understand your algorithm. As it stands, I&#39;m unsure what this would be useful for."},{"owner":{"account_id":27328554,"reputation":23,"user_id":20841100,"display_name":"WastedxBusted"},"score":0,"creation_date":1699998657,"post_id":77483809,"comment_id":136600477,"body_markdown":"@Neil it would be useful to find the max value in o(1) in a given stack.","body":"@Neil it would be useful to find the max value in o(1) in a given stack."},{"owner":{"account_id":1609379,"reputation":8624,"user_id":1488799,"display_name":"Gassa"},"score":0,"creation_date":1700006944,"post_id":77483809,"comment_id":136601441,"body_markdown":"_Maybe_, as it is a max-heap, the author meant to fill the gaps with plus-infinities instead of zeroes.","body":"<i>Maybe</i>, as it is a max-heap, the author meant to fill the gaps with plus-infinities instead of zeroes."},{"owner":{"account_id":2882210,"reputation":1777,"user_id":2472827,"display_name":"Neil"},"score":0,"creation_date":1700078202,"post_id":77483809,"comment_id":136611901,"body_markdown":"The binary heap data structure is usually [done this way](https://en.wikipedia.org/wiki/Heap_(data_structure)#Implementation), so that the nodes occupy contiguous memory locations. If you are using one of several variants, specifying which variant would be helpful.","body":"The binary heap data structure is usually <a href=\"https://en.wikipedia.org/wiki/Heap_(data_structure)#Implementation\" rel=\"nofollow noreferrer\">done this way</a>, so that the nodes occupy contiguous memory locations. If you are using one of several variants, specifying which variant would be helpful."}],"answers":[{"comments":[{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1699998202,"post_id":77484000,"comment_id":136600423,"body_markdown":"But that&#39;s not O(log(n))","body":"But that&#39;s not O(log(n))"},{"owner":{"account_id":27328554,"reputation":23,"user_id":20841100,"display_name":"WastedxBusted"},"score":1,"creation_date":1699998830,"post_id":77484000,"comment_id":136600497,"body_markdown":"the desired Shifting pattern is not that, i wanted the the array na to be [0, 3, 0, 2, 3, 0, 0]","body":"the desired Shifting pattern is not that, i wanted the the array na to be [0, 3, 0, 2, 3, 0, 0]"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1700007041,"post_id":77484000,"comment_id":136601460,"body_markdown":"@WastedxBusted, adjust it.","body":"@WastedxBusted, adjust it."},{"owner":{"account_id":27328554,"reputation":23,"user_id":20841100,"display_name":"WastedxBusted"},"score":0,"creation_date":1700009579,"post_id":77484000,"comment_id":136601763,"body_markdown":"@Reilas it&#39;s not about adjusting it, the logic is just way off, but I will try to tweak the logic a bit.","body":"@Reilas it&#39;s not about adjusting it, the logic is just way off, but I will try to tweak the logic a bit."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699997976,"creation_date":1699997976,"answer_id":77484000,"question_id":77483809,"body_markdown":"&gt; _&quot;... We will need to grow it, by copying it to a new grown array of size 2n + 1 where n is the length of the old array, but this time we copy some blocks of elements into certian positions in the grown array ...&quot;_\r\n\r\nHere is an example, without _arraycopy_.\r\n\r\n```java\r\nint[] increase(int[] a) {\r\n    int[] na = new int[(a.length * 2) + 1];\r\n    for (int i = 1, j = 0, n = na.length; i &lt; n; i += 2, j++)\r\n        na[i] = a[j];\r\n    return na;\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\na = [3, 2, 3]\r\nna = [0, 3, 0, 2, 0, 3, 0]\r\n```","title":"is there a way to copy and shift small blocks of elements in an array to the left in a new grown array in java in o(log(n)) in a systematic way?","body":"<blockquote>\n<p><em>&quot;... We will need to grow it, by copying it to a new grown array of size 2n + 1 where n is the length of the old array, but this time we copy some blocks of elements into certian positions in the grown array ...&quot;</em></p>\n</blockquote>\n<p>Here is an example, without <em>arraycopy</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] increase(int[] a) {\n    int[] na = new int[(a.length * 2) + 1];\n    for (int i = 1, j = 0, n = na.length; i &lt; n; i += 2, j++)\n        na[i] = a[j];\n    return na;\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>a = [3, 2, 3]\nna = [0, 3, 0, 2, 0, 3, 0]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1609379,"reputation":8624,"user_id":1488799,"display_name":"Gassa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699999767,"creation_date":1699999767,"answer_id":77484127,"question_id":77483809,"body_markdown":"There are several things to note here.\r\n\r\n-----\r\n\r\n**Firstly,** observe the usual strategy of having an array which can be efficiently expanded to the right.\r\nAn example is `std::vector` in C++.\r\nSomewhat simplifying, the array has an explicit size and an implicit capacity.\r\nThe allocated memory matches the capacity.\r\nThe used memory matches the size.\r\nWhen we expand the array and size is less than capacity, we just start to use the next allocated element, O(1) cost.\r\nWhen size is equal to capacity, we create a copy which is two times larger, move the contents there, and start using the new copy.\r\n\r\nNote that this operation is O(size).\r\nBut since it happens at capacities 1, 2, 4, 8, 16, 32..., the _total running time_ is also O(size).\r\nThis is called _amortized complexity O(1)_.\r\nFormally, for every k, the first k operations are done in O(k) time.\r\nSome operations are expensive, but they are rare enough.\r\n\r\nThere are ways to have an expandable array where each operation costs real O(1), not amortized, at the cost of larger constant factor.\r\nOne such way is to create the next array ahead of time, maintain both copies of the array simultaneously, and with each one addition, copy two more elements into the next array as well.\r\nIf that would be the focus though, it deserves a separate question.\r\n\r\n-----\r\n\r\n**Secondly,** after expanding the underlying container, inserting an element into a binary heap can be efficiently done in O(log n) anyway.\r\nJust add the element as the last one, and then sift it up until it stops.\r\nSo, if we are satisfied with _amortized O(log n)_ per operation, we can just use the above strategy for expanding and the natural heap insertion operation. The only problem is if we want real O(log n), not amortized, but then it deserves an explicit mention in the question.\r\n\r\n-----\r\n\r\n**Thirdly,** if you insist on reordering the elements on container expansion, its cost is just the same as the container expansion cost.\r\nRemember how, on each expansion, we had to copy the old contents into the new array, and that took O(size) time.\r\nWell, at this moment, we can just copy into the places we choose instead of the same places.\r\nIn your example, we choose [0]-&gt;[1], [1,2]-&gt;[3,4], [3,4,5,6]-&gt;[7,8,9,10], and so on.\r\n\r\nIf really desired, just the same as amortized O(1) is transformed into real O(1) per element addition, we can create the next array in advance, and copy two more elements on each addition.\r\nWe would have to maintain both copies though, so, heap operations will have their O(log n) with larger constant factor, too.","title":"is there a way to copy and shift small blocks of elements in an array to the left in a new grown array in java in o(log(n)) in a systematic way?","body":"<p>There are several things to note here.</p>\n<hr />\n<p><strong>Firstly,</strong> observe the usual strategy of having an array which can be efficiently expanded to the right.\nAn example is <code>std::vector</code> in C++.\nSomewhat simplifying, the array has an explicit size and an implicit capacity.\nThe allocated memory matches the capacity.\nThe used memory matches the size.\nWhen we expand the array and size is less than capacity, we just start to use the next allocated element, O(1) cost.\nWhen size is equal to capacity, we create a copy which is two times larger, move the contents there, and start using the new copy.</p>\n<p>Note that this operation is O(size).\nBut since it happens at capacities 1, 2, 4, 8, 16, 32..., the <em>total running time</em> is also O(size).\nThis is called <em>amortized complexity O(1)</em>.\nFormally, for every k, the first k operations are done in O(k) time.\nSome operations are expensive, but they are rare enough.</p>\n<p>There are ways to have an expandable array where each operation costs real O(1), not amortized, at the cost of larger constant factor.\nOne such way is to create the next array ahead of time, maintain both copies of the array simultaneously, and with each one addition, copy two more elements into the next array as well.\nIf that would be the focus though, it deserves a separate question.</p>\n<hr />\n<p><strong>Secondly,</strong> after expanding the underlying container, inserting an element into a binary heap can be efficiently done in O(log n) anyway.\nJust add the element as the last one, and then sift it up until it stops.\nSo, if we are satisfied with <em>amortized O(log n)</em> per operation, we can just use the above strategy for expanding and the natural heap insertion operation. The only problem is if we want real O(log n), not amortized, but then it deserves an explicit mention in the question.</p>\n<hr />\n<p><strong>Thirdly,</strong> if you insist on reordering the elements on container expansion, its cost is just the same as the container expansion cost.\nRemember how, on each expansion, we had to copy the old contents into the new array, and that took O(size) time.\nWell, at this moment, we can just copy into the places we choose instead of the same places.\nIn your example, we choose [0]-&gt;[1], [1,2]-&gt;[3,4], [3,4,5,6]-&gt;[7,8,9,10], and so on.</p>\n<p>If really desired, just the same as amortized O(1) is transformed into real O(1) per element addition, we can create the next array in advance, and copy two more elements on each addition.\nWe would have to maintain both copies though, so, heap operations will have their O(log n) with larger constant factor, too.</p>\n"}],"owner":{"account_id":27328554,"reputation":23,"user_id":20841100,"display_name":"WastedxBusted"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77484127,"answer_count":2,"score":1,"last_activity_date":1699999767,"creation_date":1699995715,"question_id":77483809,"body_markdown":"lets say we have an array which acts as an implicit binary heap, and we start with:\r\n\r\n[0, 0, 0]\r\n\r\nIt slowly gets filled up to:\r\n\r\n[3, 2, 3]\r\n\r\nWe will need to grow it, by copying it to a new grown array of size 2n + 1 where n is the length of the old array, but this time we copy some blocks of elements into certian positions in the grown array, such as:\r\n\r\n[0, 3, 0, 2, 3, 0, 0]\r\n\r\nlets say the above array gets filled up and we need to grow agian, it would look like this:\r\n\r\n[5, 3, 5, 2, 3, 4, 5]\r\n\r\n        |\r\n        |\r\n       \\|/\r\n\r\n[0, 5, 0, 3, 5, 0, 0, 2, 3, 4, 5, 0, 0, 0, 0]\r\n\r\ni hope you get the pattern of shifting by now.\r\n\r\n\r\nso is there a way to use System.arraycopy() to implement this way of shifting pattern in o(log(n))? if not can you suggest any other alternatives.","title":"is there a way to copy and shift small blocks of elements in an array to the left in a new grown array in java in o(log(n)) in a systematic way?","body":"<p>lets say we have an array which acts as an implicit binary heap, and we start with:</p>\n<p>[0, 0, 0]</p>\n<p>It slowly gets filled up to:</p>\n<p>[3, 2, 3]</p>\n<p>We will need to grow it, by copying it to a new grown array of size 2n + 1 where n is the length of the old array, but this time we copy some blocks of elements into certian positions in the grown array, such as:</p>\n<p>[0, 3, 0, 2, 3, 0, 0]</p>\n<p>lets say the above array gets filled up and we need to grow agian, it would look like this:</p>\n<p>[5, 3, 5, 2, 3, 4, 5]</p>\n<pre><code>    |\n    |\n   \\|/\n</code></pre>\n<p>[0, 5, 0, 3, 5, 0, 0, 2, 3, 4, 5, 0, 0, 0, 0]</p>\n<p>i hope you get the pattern of shifting by now.</p>\n<p>so is there a way to use System.arraycopy() to implement this way of shifting pattern in o(log(n))? if not can you suggest any other alternatives.</p>\n"},{"tags":["java","jetty"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699999636,"creation_date":1699999636,"answer_id":77484117,"question_id":77472039,"body_markdown":"Do not mix versions of Jetty.\r\n\r\nAll of your Jetty artifacts should be on the same version of Jetty.\r\n\r\nAlso, you should read the documentation on Jetty 12 (pay attention to &quot;environments&quot;)\r\n\r\n* [Jetty 12 Documentation Hub](https://eclipse.dev/jetty/documentation/jetty-12/)\r\n\r\n* [Jetty 11 to Jetty 12 Migration Guide](https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-migration-11-to-12)\r\n\r\n* [Maven Coordinates have Changed](https://webtide.com/new-jetty-12-maven-coordinates/)\r\n\r\n* https://stackoverflow.com/questions/77007560/missing-jetty-servlet-12-0-0-dependency/77010707#77010707\r\n\r\nThe artifact `jetty-servlet` does not exist in Jetty 12, as Jetty 12 is based on environments (with support for multiple environments at the same time in different webapps).   \r\n\r\nYou have to decide which environment you want to use and then use the appropriate maven coordinates.\r\n\r\nExample: you seem to want to use Servlet 6.0, that would belong to the environment labeled `ee10`, so use those artifacts.","title":"org.eclipse.jetty.server.handler.ScopedHandler is missing","body":"<p>Do not mix versions of Jetty.</p>\n<p>All of your Jetty artifacts should be on the same version of Jetty.</p>\n<p>Also, you should read the documentation on Jetty 12 (pay attention to &quot;environments&quot;)</p>\n<ul>\n<li><p><a href=\"https://eclipse.dev/jetty/documentation/jetty-12/\" rel=\"nofollow noreferrer\">Jetty 12 Documentation Hub</a></p>\n</li>\n<li><p><a href=\"https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-migration-11-to-12\" rel=\"nofollow noreferrer\">Jetty 11 to Jetty 12 Migration Guide</a></p>\n</li>\n<li><p><a href=\"https://webtide.com/new-jetty-12-maven-coordinates/\" rel=\"nofollow noreferrer\">Maven Coordinates have Changed</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/77007560/missing-jetty-servlet-12-0-0-dependency/77010707#77010707\">Missing jetty-servlet 12.0.0 dependency</a></p>\n</li>\n</ul>\n<p>The artifact <code>jetty-servlet</code> does not exist in Jetty 12, as Jetty 12 is based on environments (with support for multiple environments at the same time in different webapps).</p>\n<p>You have to decide which environment you want to use and then use the appropriate maven coordinates.</p>\n<p>Example: you seem to want to use Servlet 6.0, that would belong to the environment labeled <code>ee10</code>, so use those artifacts.</p>\n"}],"owner":{"account_id":29055881,"reputation":35,"user_id":22257686,"display_name":"Denis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77484117,"answer_count":1,"score":0,"last_activity_date":1699999636,"creation_date":1699856788,"question_id":77472039,"body_markdown":"I`m using oracle openJDK 20 with maven.\r\n```xml\r\n&lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;dependencies&gt;\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jetty-server&lt;/artifactId&gt;\r\n            &lt;version&gt;12.0.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;\r\n            &lt;version&gt;11.0.18&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\nAnd i cant use `org.eclipse.jetty.servlet.ServletHandler`, becouse this class exetends `org.eclipse.jetty.server.handler.ScopedHandler`, but it is missing\r\n\r\nI tried to search this problem and found nothing.","title":"org.eclipse.jetty.server.handler.ScopedHandler is missing","body":"<p>I`m using oracle openJDK 20 with maven.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;dependencies&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n            &lt;artifactId&gt;jetty-server&lt;/artifactId&gt;\n            &lt;version&gt;12.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n            &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;\n            &lt;version&gt;11.0.18&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And i cant use <code>org.eclipse.jetty.servlet.ServletHandler</code>, becouse this class exetends <code>org.eclipse.jetty.server.handler.ScopedHandler</code>, but it is missing</p>\n<p>I tried to search this problem and found nothing.</p>\n"},{"tags":["java","spring","spring-boot","kubernetes","kubernetes-helm"],"answers":[{"comments":[{"owner":{"account_id":1099811,"reputation":470,"user_id":1092497,"display_name":"Rahul Wagh"},"score":0,"creation_date":1593163739,"post_id":62586996,"comment_id":110689642,"body_markdown":"Thanks @mdaniel for the suggestion. After reading your comment i realized that i didn&#39;t enabled the health endpoints for my spring boot application, so when kubernetes trying to check the readiness and livelyness of the application it might be getting the 404. But i will first enable the health endpoint and then try out the helm install again.","body":"Thanks @mdaniel for the suggestion. After reading your comment i realized that i didn&#39;t enabled the health endpoints for my spring boot application, so when kubernetes trying to check the readiness and livelyness of the application it might be getting the 404. But i will first enable the health endpoint and then try out the helm install again."}],"tags":[],"owner":{"account_id":79319,"reputation":31744,"user_id":225016,"display_name":"mdaniel"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593137799,"creation_date":1593137799,"answer_id":62586996,"question_id":62584555,"body_markdown":"&gt; 2020-06-25 20:57:24.469  INFO 1 --- [extShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@548a102f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\r\n```yaml\r\n         ports:\r\n           - name: http\r\n             containerPort: 80\r\n```\r\n\r\nIt appears the liveness probe (configured to contact the port named `http`) is killing your Pod since your container appears to be listening on :8080 but you&#39;ve told kubernetes that it&#39;s listening on :80\r\n\r\nSince a `kubectl` created deployment will not have any such specificity, kubernetes won&#39;t use a liveness probe and there you are\r\n\r\nYou can usually configure the spring application via an environment variable if you want to test that theory:\r\n\r\n```yaml\r\n      containers:\r\n        - name: springboot\r\n          env:\r\n          - name: SERVER_PORT\r\n            value: &#39;80&#39;\r\n          # and its friend, which is the one that \r\n          # you should be using for liveness and readiness\r\n          - name: MANAGEMENT_SERVER_PORT\r\n            value: &#39;8080&#39;\r\n          securityContext:\r\n            {}\r\n          image: &quot;rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty&quot;\r\n          imagePullPolicy: IfNotPresent\r\n          ports:\r\n            - name: http\r\n              containerPort: 80\r\n              protocol: TCP\r\n```","title":"Helm chart spring boot application shut down immediately after starting","body":"<blockquote>\n<p>2020-06-25 20:57:24.469  INFO 1 --- [extShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@548a102f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}</p>\n</blockquote>\n<pre class=\"lang-yaml prettyprint-override\"><code>         ports:\n           - name: http\n             containerPort: 80\n</code></pre>\n<p>It appears the liveness probe (configured to contact the port named <code>http</code>) is killing your Pod since your container appears to be listening on :8080 but you've told kubernetes that it's listening on :80</p>\n<p>Since a <code>kubectl</code> created deployment will not have any such specificity, kubernetes won't use a liveness probe and there you are</p>\n<p>You can usually configure the spring application via an environment variable if you want to test that theory:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>      containers:\n        - name: springboot\n          env:\n          - name: SERVER_PORT\n            value: '80'\n          # and its friend, which is the one that \n          # you should be using for liveness and readiness\n          - name: MANAGEMENT_SERVER_PORT\n            value: '8080'\n          securityContext:\n            {}\n          image: &quot;rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty&quot;\n          imagePullPolicy: IfNotPresent\n          ports:\n            - name: http\n              containerPort: 80\n              protocol: TCP\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6531501,"reputation":806,"user_id":5052512,"accept_rate":80,"display_name":"Manish Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699999047,"creation_date":1699999047,"answer_id":77484079,"question_id":62584555,"body_markdown":"It might be too late to answer but with the latest Springboot Version 3.5.1 and actuator, I faced the same problems Response 404. \r\nThe reason for this is that the probe if enabled in the Kubernetes manifest would hit the default HTTP endpoint. However, I suggest to point the readiness and liveness endpoints to the actual actuator health endpoint: \r\n\r\n              ports:\r\n            - name: http\r\n              containerPort: 8080\r\n              protocol: TCP\r\n          livenessProbe:\r\n            httpGet:\r\n              path: /actuator/health/liveness #This specific endpoint \r\n              port: http\r\n            initialDelaySeconds: 20\r\n          readinessProbe:\r\n            httpGet:\r\n              path: /actuator/health/readiness #This is specific endpoint\r\n              port: http\r\n            initialDelaySeconds: 20\r\n\r\n\r\nIt would return 200 Ok. \r\n\r\n","title":"Helm chart spring boot application shut down immediately after starting","body":"<p>It might be too late to answer but with the latest Springboot Version 3.5.1 and actuator, I faced the same problems Response 404.\nThe reason for this is that the probe if enabled in the Kubernetes manifest would hit the default HTTP endpoint. However, I suggest to point the readiness and liveness endpoints to the actual actuator health endpoint:</p>\n<pre><code>          ports:\n        - name: http\n          containerPort: 8080\n          protocol: TCP\n      livenessProbe:\n        httpGet:\n          path: /actuator/health/liveness #This specific endpoint \n          port: http\n        initialDelaySeconds: 20\n      readinessProbe:\n        httpGet:\n          path: /actuator/health/readiness #This is specific endpoint\n          port: http\n        initialDelaySeconds: 20\n</code></pre>\n<p>It would return 200 Ok.</p>\n"}],"owner":{"account_id":1099811,"reputation":470,"user_id":1092497,"display_name":"Rahul Wagh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1394,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1699999047,"creation_date":1593120215,"question_id":62584555,"body_markdown":"I was trying out spring boot microservice deployment on kubernetes cluster using Helm Chart. But I noticed a strange issue that **my spring boot application start but it shutdown immediately after**\r\n\r\nHere are the logs\r\n\r\n```\r\nStarted JhooqK8sApplication in 3.431 seconds (JVM running for 4.149)\r\n2020-06-25 20:57:24.460  INFO 1 --- [extShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService &#39;applicationTaskExecutor&#39;\r\n2020-06-25 20:57:24.469  INFO 1 --- [extShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@548a102f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\r\n2020-06-25 20:57:24.470  INFO 1 --- [extShutdownHook] org.eclipse.jetty.server.session         : node0 Stopped scavenging\r\n2020-06-25 20:57:24.474  INFO 1 --- [extShutdownHook] o.e.j.s.h.ContextHandler.application     : Destroying Spring FrameworkServlet &#39;dispatcherServlet&#39;\r\n2020-06-25 20:57:24.493  INFO 1 --- [extShutdownHook] o.e.jetty.server.handler.ContextHandler  : Stopped o.s.b.w.e.j.JettyEmbeddedWebAppContext@56528192{application,/,[file:///tmp/jetty-docbase.4637295322181051129.8080/],UNAVAILABLE}\r\n\r\n```\r\n\r\nSpring Boot Version : **2.2.7.RELEASE**\r\nDocker Hub Public image for spring boot : **rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty**\r\n\r\nOne strange thing which i noticed when i use kubectl command manually to create deployment and service spring boot deployments goes perfectly fine. \r\n\r\n```\r\nvagrant@kmaster:~$ kubectl create deployment demo --image=rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty\r\n\r\nvagrant@kmaster:~$ kubectl expose deployment demo --type=LoadBalancer --name=demo-service --external-ip=1.1.1.1 --port=8080\r\n```\r\n\r\n(I followed this guide for deploying spring boot on kubernete - [Deploy spring boot on kubernetes cluster][1])\r\n\r\nI am just wodering is there something wrong with spring boot or my helm setup?\r\n\r\nHere is my helm templates - \r\n\r\n```\r\n---\r\n# Source: springboot/templates/serviceaccount.yaml\r\napiVersion: v1\r\nkind: ServiceAccount\r\nmetadata:\r\n  name: RELEASE-NAME-springboot\r\n  labels:\r\n    helm.sh/chart: springboot-0.1.0\r\n    app.kubernetes.io/name: springboot\r\n    app.kubernetes.io/instance: RELEASE-NAME\r\n    app.kubernetes.io/version: &quot;1.16.0&quot;\r\n    app.kubernetes.io/managed-by: Helm\r\n---\r\n# Source: springboot/templates/service.yaml\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: RELEASE-NAME-springboot\r\n  labels:\r\n    helm.sh/chart: springboot-0.1.0\r\n    app.kubernetes.io/name: springboot\r\n    app.kubernetes.io/instance: RELEASE-NAME\r\n    app.kubernetes.io/version: &quot;1.16.0&quot;\r\n    app.kubernetes.io/managed-by: Helm\r\nspec:\r\n  type: ClusterIP\r\n  ports:\r\n    - port: 80\r\n      targetPort: http\r\n      protocol: TCP\r\n      name: http\r\n  selector:\r\n    app.kubernetes.io/name: springboot\r\n    app.kubernetes.io/instance: RELEASE-NAME\r\n---\r\n# Source: springboot/templates/deployment.yaml\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: RELEASE-NAME-springboot\r\n  labels:\r\n    helm.sh/chart: springboot-0.1.0\r\n    app.kubernetes.io/name: springboot\r\n    app.kubernetes.io/instance: RELEASE-NAME\r\n    app.kubernetes.io/version: &quot;1.16.0&quot;\r\n    app.kubernetes.io/managed-by: Helm\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: springboot\r\n      app.kubernetes.io/instance: RELEASE-NAME\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: springboot\r\n        app.kubernetes.io/instance: RELEASE-NAME\r\n    spec:\r\n      serviceAccountName: RELEASE-NAME-springboot\r\n      securityContext:\r\n        {}\r\n      containers:\r\n        - name: springboot\r\n          securityContext:\r\n            {}\r\n          image: &quot;rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty&quot;\r\n          imagePullPolicy: IfNotPresent\r\n          ports:\r\n            - name: http\r\n              containerPort: 80\r\n              protocol: TCP\r\n          livenessProbe:\r\n            httpGet:\r\n              path: /\r\n              port: http\r\n          readinessProbe:\r\n            httpGet:\r\n              path: /\r\n              port: http\r\n          resources:\r\n            {}\r\n---\r\n# Source: springboot/templates/tests/test-connection.yaml\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  name: &quot;RELEASE-NAME-springboot-test-connection&quot;\r\n  labels:\r\n    helm.sh/chart: springboot-0.1.0\r\n    app.kubernetes.io/name: springboot\r\n    app.kubernetes.io/instance: RELEASE-NAME\r\n    app.kubernetes.io/version: &quot;1.16.0&quot;\r\n    app.kubernetes.io/managed-by: Helm\r\n  annotations:\r\n    &quot;helm.sh/hook&quot;: test-success\r\nspec:\r\n  containers:\r\n    - name: wget\r\n      image: busybox\r\n      command: [&#39;wget&#39;]\r\n      args: [&#39;RELEASE-NAME-springboot:80&#39;]\r\n  restartPolicy: Never\r\n\r\n```\r\n\r\n\r\n  [1]: https://jhooq.com/deploy-spring-boot-microservices-on-kubernetes/","title":"Helm chart spring boot application shut down immediately after starting","body":"<p>I was trying out spring boot microservice deployment on kubernetes cluster using Helm Chart. But I noticed a strange issue that <strong>my spring boot application start but it shutdown immediately after</strong></p>\n<p>Here are the logs</p>\n<pre><code>Started JhooqK8sApplication in 3.431 seconds (JVM running for 4.149)\n2020-06-25 20:57:24.460  INFO 1 --- [extShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'\n2020-06-25 20:57:24.469  INFO 1 --- [extShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@548a102f{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\n2020-06-25 20:57:24.470  INFO 1 --- [extShutdownHook] org.eclipse.jetty.server.session         : node0 Stopped scavenging\n2020-06-25 20:57:24.474  INFO 1 --- [extShutdownHook] o.e.j.s.h.ContextHandler.application     : Destroying Spring FrameworkServlet 'dispatcherServlet'\n2020-06-25 20:57:24.493  INFO 1 --- [extShutdownHook] o.e.jetty.server.handler.ContextHandler  : Stopped o.s.b.w.e.j.JettyEmbeddedWebAppContext@56528192{application,/,[file:///tmp/jetty-docbase.4637295322181051129.8080/],UNAVAILABLE}\n\n</code></pre>\n<p>Spring Boot Version : <strong>2.2.7.RELEASE</strong>\nDocker Hub Public image for spring boot : <strong>rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty</strong></p>\n<p>One strange thing which i noticed when i use kubectl command manually to create deployment and service spring boot deployments goes perfectly fine.</p>\n<pre><code>vagrant@kmaster:~$ kubectl create deployment demo --image=rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty\n\nvagrant@kmaster:~$ kubectl expose deployment demo --type=LoadBalancer --name=demo-service --external-ip=1.1.1.1 --port=8080\n</code></pre>\n<p>(I followed this guide for deploying spring boot on kubernete - <a href=\"https://jhooq.com/deploy-spring-boot-microservices-on-kubernetes/\" rel=\"nofollow noreferrer\">Deploy spring boot on kubernetes cluster</a>)</p>\n<p>I am just wodering is there something wrong with spring boot or my helm setup?</p>\n<p>Here is my helm templates -</p>\n<pre><code>---\n# Source: springboot/templates/serviceaccount.yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: RELEASE-NAME-springboot\n  labels:\n    helm.sh/chart: springboot-0.1.0\n    app.kubernetes.io/name: springboot\n    app.kubernetes.io/instance: RELEASE-NAME\n    app.kubernetes.io/version: &quot;1.16.0&quot;\n    app.kubernetes.io/managed-by: Helm\n---\n# Source: springboot/templates/service.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: RELEASE-NAME-springboot\n  labels:\n    helm.sh/chart: springboot-0.1.0\n    app.kubernetes.io/name: springboot\n    app.kubernetes.io/instance: RELEASE-NAME\n    app.kubernetes.io/version: &quot;1.16.0&quot;\n    app.kubernetes.io/managed-by: Helm\nspec:\n  type: ClusterIP\n  ports:\n    - port: 80\n      targetPort: http\n      protocol: TCP\n      name: http\n  selector:\n    app.kubernetes.io/name: springboot\n    app.kubernetes.io/instance: RELEASE-NAME\n---\n# Source: springboot/templates/deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: RELEASE-NAME-springboot\n  labels:\n    helm.sh/chart: springboot-0.1.0\n    app.kubernetes.io/name: springboot\n    app.kubernetes.io/instance: RELEASE-NAME\n    app.kubernetes.io/version: &quot;1.16.0&quot;\n    app.kubernetes.io/managed-by: Helm\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: springboot\n      app.kubernetes.io/instance: RELEASE-NAME\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: springboot\n        app.kubernetes.io/instance: RELEASE-NAME\n    spec:\n      serviceAccountName: RELEASE-NAME-springboot\n      securityContext:\n        {}\n      containers:\n        - name: springboot\n          securityContext:\n            {}\n          image: &quot;rahulwagh17/kubernetes:jhooq-k8s-springboot-jetty&quot;\n          imagePullPolicy: IfNotPresent\n          ports:\n            - name: http\n              containerPort: 80\n              protocol: TCP\n          livenessProbe:\n            httpGet:\n              path: /\n              port: http\n          readinessProbe:\n            httpGet:\n              path: /\n              port: http\n          resources:\n            {}\n---\n# Source: springboot/templates/tests/test-connection.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: &quot;RELEASE-NAME-springboot-test-connection&quot;\n  labels:\n    helm.sh/chart: springboot-0.1.0\n    app.kubernetes.io/name: springboot\n    app.kubernetes.io/instance: RELEASE-NAME\n    app.kubernetes.io/version: &quot;1.16.0&quot;\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    &quot;helm.sh/hook&quot;: test-success\nspec:\n  containers:\n    - name: wget\n      image: busybox\n      command: ['wget']\n      args: ['RELEASE-NAME-springboot:80']\n  restartPolicy: Never\n\n</code></pre>\n"},{"tags":["java","android","kotlin","wallpaper","live-wallpaper"],"owner":{"account_id":29834983,"reputation":11,"user_id":22864536,"display_name":"nhidn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699998921,"creation_date":1699998921,"question_id":77484068,"body_markdown":"I&#39;m working on setting a video wallpaper for Android, but I can&#39;t determine when it&#39;s successfully installed.\r\n\r\n\r\n\r\n\r\n\r\n\r\nI tried to set broadcast receiver to listen service, but I cant know how to set Broadcast.\r\nThis is a funtion of my service (extend from WallpaperService) to set video wallpaper\r\n```\r\nfun setToWallPaper(context: Context) {\r\n            val intent = Intent(WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER)\r\n            val component = ComponentName(context, VideoLiveWallpaperService::class.java)\r\n            intent.putExtra(WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT, component)\r\n            intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK\r\n            context.startActivity(intent)\r\n\r\n            try {\r\n                WallpaperManager.getInstance(context).clear()\r\n            } catch (e: IOException) {\r\n                e.printStackTrace()\r\n            }\r\n        }\r\n```","title":"How to listen for the successful setting of a video wallpaper in Android Kotlin?","body":"<p>I'm working on setting a video wallpaper for Android, but I can't determine when it's successfully installed.</p>\n<p>I tried to set broadcast receiver to listen service, but I cant know how to set Broadcast.\nThis is a funtion of my service (extend from WallpaperService) to set video wallpaper</p>\n<pre><code>fun setToWallPaper(context: Context) {\n            val intent = Intent(WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER)\n            val component = ComponentName(context, VideoLiveWallpaperService::class.java)\n            intent.putExtra(WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT, component)\n            intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK\n            context.startActivity(intent)\n\n            try {\n                WallpaperManager.getInstance(context).clear()\n            } catch (e: IOException) {\n                e.printStackTrace()\n            }\n        }\n</code></pre>\n"},{"tags":["java","maven","jenkins","semantic-release"],"comments":[{"owner":{"account_id":1262633,"reputation":22925,"user_id":1220550,"display_name":"Peter B"},"score":0,"creation_date":1699974292,"post_id":77481556,"comment_id":136596177,"body_markdown":"You forgot to tell us two of the most important things: **(1)** What language/framework is used for the project? **(2)** What system is used for the build and deploy steps? Without such details there can only be answers that are either totally vague, or totally bad because they assume technology stacks that don&#39;t apply.","body":"You forgot to tell us two of the most important things: <b>(1)</b> What language/framework is used for the project? <b>(2)</b> What system is used for the build and deploy steps? Without such details there can only be answers that are either totally vague, or totally bad because they assume technology stacks that don&#39;t apply."},{"owner":{"account_id":29901083,"reputation":1,"user_id":22914819,"display_name":"Elad Press"},"score":0,"creation_date":1699983119,"post_id":77481556,"comment_id":136598057,"body_markdown":"Sorry, The project is Java/Maven, and we&#39;re deploying using Jenkins CI.","body":"Sorry, The project is Java/Maven, and we&#39;re deploying using Jenkins CI."}],"owner":{"account_id":29901083,"reputation":1,"user_id":22914819,"display_name":"Elad Press"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699998318,"creation_date":1699973358,"question_id":77481556,"body_markdown":"I&#39;m a DevOps engineer for multiple teams with different projects.\r\nOne of the projects is one that deploys a single project to some of our teams. But every team needs a different configurations and some unique features which other teams don&#39;t need, or even worse, needs them to not exist.\r\n\r\nI&#39;m trying to implement Semantic Release for that project and it&#39;s proving difficult.\r\nI need this one repo to publish different kind of versions for every team.\r\nFor example, teamA-v1.1.0, teamB-2.0.0.\r\nIv&#39;e thought of some solutions like have major versions represent each team.\r\nIs there a plugin that helps me with that? Would appreciate any kind of help.\r\n","title":"A project that has to be release in multiple configurations","body":"<p>I'm a DevOps engineer for multiple teams with different projects.\nOne of the projects is one that deploys a single project to some of our teams. But every team needs a different configurations and some unique features which other teams don't need, or even worse, needs them to not exist.</p>\n<p>I'm trying to implement Semantic Release for that project and it's proving difficult.\nI need this one repo to publish different kind of versions for every team.\nFor example, teamA-v1.1.0, teamB-2.0.0.\nIv'e thought of some solutions like have major versions represent each team.\nIs there a plugin that helps me with that? Would appreciate any kind of help.</p>\n"},{"tags":["java","swagger-codegen"],"answers":[{"tags":[],"owner":{"account_id":10606358,"reputation":1,"user_id":7811604,"display_name":"Iceman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694470644,"creation_date":1694470644,"answer_id":77085057,"question_id":75832980,"body_markdown":"When you make the &#39;generate&#39; call, you can set the library flag to &#39;okhttp4-gson&#39; and it will use okhttp3.\r\n\r\nProblem is, when it builds, it tries to use jcenter instead of something like mavenCentral.\r\n\r\nI got around this by building a custom version of the swagger-codegen-cli-3.0.46.jar and editing the build.gradle.mustache file in the handlebars\\Java\\libraries\\okhttp4-gson folder to use mavenCentral. \r\nI also changed it, build.sbt.mustache, and pom.mustache to tweak the version to 4.11.0 and update the swagger annotations to v3.","title":"how can i force swagger cogen jar 3.0.41 to use okhttp3 instead okhttp?","body":"<p>When you make the 'generate' call, you can set the library flag to 'okhttp4-gson' and it will use okhttp3.</p>\n<p>Problem is, when it builds, it tries to use jcenter instead of something like mavenCentral.</p>\n<p>I got around this by building a custom version of the swagger-codegen-cli-3.0.46.jar and editing the build.gradle.mustache file in the handlebars\\Java\\libraries\\okhttp4-gson folder to use mavenCentral.\nI also changed it, build.sbt.mustache, and pom.mustache to tweak the version to 4.11.0 and update the swagger annotations to v3.</p>\n"}],"owner":{"account_id":3618713,"reputation":129,"user_id":3018014,"accept_rate":25,"display_name":"bbx402"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699997885,"creation_date":1679656629,"question_id":75832980,"body_markdown":"I downloaded swagger-codegen-cli-3.0.41.jar and run it to generate java api client and it uses okhttp, which is outdated.\r\n\r\nI want to force swagger-codegen-cli-3.0.41.jar, to use okhttp3 4.10.0 and not okhttp-2.7.5\r\n\r\nis it possible?\r\n\r\nThank you in advance","title":"how can i force swagger cogen jar 3.0.41 to use okhttp3 instead okhttp?","body":"<p>I downloaded swagger-codegen-cli-3.0.41.jar and run it to generate java api client and it uses okhttp, which is outdated.</p>\n<p>I want to force swagger-codegen-cli-3.0.41.jar, to use okhttp3 4.10.0 and not okhttp-2.7.5</p>\n<p>is it possible?</p>\n<p>Thank you in advance</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1699999982,"post_id":77483957,"comment_id":136600670,"body_markdown":"Can you try running `mvn exec:java -Dexec.mainClass=&quot;com.mycompany.app.App&quot;` in the project root?","body":"Can you try running <code>mvn exec:java -Dexec.mainClass=&quot;com.mycompany.app.App&quot;</code> in the project root?"},{"owner":{"account_id":18348479,"reputation":1986,"user_id":13363175,"display_name":"notaorb"},"score":0,"creation_date":1700002529,"post_id":77483957,"comment_id":136601013,"body_markdown":"@dan1st this ran main.  How do I invoke the application with java itself?  Is it in the target directory?","body":"@dan1st this ran main.  How do I invoke the application with java itself?  Is it in the target directory?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1700002743,"post_id":77483957,"comment_id":136601035,"body_markdown":"The point of Maven is that you don&#39;t do this. You run Maven, Maven finds/downloads all dependencies, runs javac, java and all the other stuff. But you could try running `java.com.mycompany.app.App` from the classpath root if you have no dependencies.","body":"The point of Maven is that you don&#39;t do this. You run Maven, Maven finds/downloads all dependencies, runs javac, java and all the other stuff. But you could try running <code>java.com.mycompany.app.App</code> from the classpath root if you have no dependencies."},{"owner":{"account_id":18348479,"reputation":1986,"user_id":13363175,"display_name":"notaorb"},"score":0,"creation_date":1700005464,"post_id":77483957,"comment_id":136601319,"body_markdown":"Thanks.  What option should I provide &#39;mvn&#39; so java is invoked to run the program from there?  Also, to your suggestion, I try &#39;java target.classes.com.mycompany.app.App&#39; and get &#39;Error: Could not find or load main class target.classes.com.mycompany.app.App; Caused by: java.lang.NoClassDefFoundError: target/classes/com/mycompany/app/App (wrong name: com/mycompany/app/App&#39;  maybe because it&#39;s a package?","body":"Thanks.  What option should I provide &#39;mvn&#39; so java is invoked to run the program from there?  Also, to your suggestion, I try &#39;java target.classes.com.mycompany.app.App&#39; and get &#39;Error: Could not find or load main class target.classes.com.mycompany.app.App; Caused by: java.lang.NoClassDefFoundError: target/classes/com/mycompany/app/App (wrong name: com/mycompany/app/App&#39;  maybe because it&#39;s a package?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1700034879,"post_id":77483957,"comment_id":136604043,"body_markdown":"`target/classes` is the classpath root. You need to run it from there. Also, Maven does everything if you use `mvn exec:java` for you.","body":"<code>target&#47;classes</code> is the classpath root. You need to run it from there. Also, Maven does everything if you use <code>mvn exec:java</code> for you."},{"owner":{"account_id":18348479,"reputation":1986,"user_id":13363175,"display_name":"notaorb"},"score":0,"creation_date":1700074102,"post_id":77483957,"comment_id":136611238,"body_markdown":"cd `target/classes` then `java com.mycompany.app.App` worked thanks!","body":"cd <code>target&#47;classes</code> then <code>java com.mycompany.app.App</code> worked thanks!"}],"owner":{"account_id":18348479,"reputation":1986,"user_id":13363175,"display_name":"notaorb"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699997567,"creation_date":1699997567,"question_id":77483957,"body_markdown":"Does anyone know how to run the demo app included with Maven installation?\r\n\r\nI&#39;m assuming it&#39;s a package?\r\n\r\nIf I remove `package com.mycompany.app` from the following, invoke `javac` then `java App`, then things work.  So I assume I&#39;m trying to understand how to invoke main from the package.\r\n\r\n`[~/src/java/demoapp/src/main/java/com/mycompany/app]$ vi App.java`\r\n\r\n\r\n      1 package com.mycompany.app;\r\n      2 \r\n      3 /**\r\n      4  * Hello world!\r\n      5  *\r\n      6  */\r\n      7 public class App \r\n      8 {\r\n      9     public static void main( String[] args )\r\n     10     {\r\n     11         System.out.println( &quot;Hello World!&quot; );\r\n     12     }\r\n     13 }\r\n\r\n","title":"Maven, running the demo app with java after demo script runs?","body":"<p>Does anyone know how to run the demo app included with Maven installation?</p>\n<p>I'm assuming it's a package?</p>\n<p>If I remove <code>package com.mycompany.app</code> from the following, invoke <code>javac</code> then <code>java App</code>, then things work.  So I assume I'm trying to understand how to invoke main from the package.</p>\n<p><code>[~/src/java/demoapp/src/main/java/com/mycompany/app]$ vi App.java</code></p>\n<pre><code>  1 package com.mycompany.app;\n  2 \n  3 /**\n  4  * Hello world!\n  5  *\n  6  */\n  7 public class App \n  8 {\n  9     public static void main( String[] args )\n 10     {\n 11         System.out.println( &quot;Hello World!&quot; );\n 12     }\n 13 }\n</code></pre>\n"},{"tags":["java","file-io","java-io"],"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":1,"creation_date":1240818462,"post_id":792493,"comment_id":602880,"body_markdown":"What do you mean &quot;sometimes the files are not moved to the correct folder&quot;? is this a bug in your code or do you get an error? Also where is this slow? It&#39;s impossible to tell where the time is spent by looking at the code.","body":"What do you mean &quot;sometimes the files are not moved to the correct folder&quot;? is this a bug in your code or do you get an error? Also where is this slow? It&#39;s impossible to tell where the time is spent by looking at the code."},{"owner":{"account_id":17319,"reputation":433,"user_id":38674,"accept_rate":40,"display_name":"ngarthl"},"score":0,"creation_date":1240820179,"post_id":792493,"comment_id":602944,"body_markdown":"On windows, it seems like sometimes the target file is locked, as that is the only operating system that actually fails. If this is a bug in my code, I have not seen it.\n\nThe time is spent in the File.listFiles() method. As a number of objects are created in that method.","body":"On windows, it seems like sometimes the target file is locked, as that is the only operating system that actually fails. If this is a bug in my code, I have not seen it.  The time is spent in the File.listFiles() method. As a number of objects are created in that method."}],"answers":[{"tags":[],"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1240870854,"creation_date":1240870854,"answer_id":795515,"question_id":792493,"body_markdown":"Your performance problem (and probably bugs) are probably caused by using the file system excessively in marking generations, rather than storing this info in memory.  File system access is much more expensive than memory access -- in particular, **File.listFiles() or File.list() can be VERY slow.**  If you&#39;ve got several thousand files, expect it to take **seconds** rather than milliseconds to execute on a Windows system using NTFS.\r\n\r\nIf possible, all of the generational info should be stored and updated as objects in a synchronized Collection.  If you just use the file system for actually storing, retrieving, and deleting the cached data files, you can stick all the cachefiles in one directory and call them whatever you want (just give the file a number or random name).  \r\n\r\nIf the generational cache info needs to be persistent and safe against abrupt application shutdown, you can use serialized collections and periodically write this to disk (say, every 30 seconds, and again on application shutdown).  Since it is just a cache, you can do a check on app startup and delete cache entries with out a real file and delete files without a cache entry.\r\n\r\nAlternately, you might look into using an embedded database the store the whole cache. H2 or HSQLDB are pure Java, very fast and lightweight, and support in-memory databases and embedded modes that are even faster.  This would let you store a lot more cache objects, and might be a lot faster, since the DBMS may cache frequently-used items in RAM.","title":"Organizing files in &quot;buckets&quot;","body":"<p>Your performance problem (and probably bugs) are probably caused by using the file system excessively in marking generations, rather than storing this info in memory.  File system access is much more expensive than memory access -- in particular, <strong>File.listFiles() or File.list() can be VERY slow.</strong>  If you've got several thousand files, expect it to take <strong>seconds</strong> rather than milliseconds to execute on a Windows system using NTFS.</p>\n\n<p>If possible, all of the generational info should be stored and updated as objects in a synchronized Collection.  If you just use the file system for actually storing, retrieving, and deleting the cached data files, you can stick all the cachefiles in one directory and call them whatever you want (just give the file a number or random name).  </p>\n\n<p>If the generational cache info needs to be persistent and safe against abrupt application shutdown, you can use serialized collections and periodically write this to disk (say, every 30 seconds, and again on application shutdown).  Since it is just a cache, you can do a check on app startup and delete cache entries with out a real file and delete files without a cache entry.</p>\n\n<p>Alternately, you might look into using an embedded database the store the whole cache. H2 or HSQLDB are pure Java, very fast and lightweight, and support in-memory databases and embedded modes that are even faster.  This would let you store a lot more cache objects, and might be a lot faster, since the DBMS may cache frequently-used items in RAM.</p>\n"}],"owner":{"account_id":17319,"reputation":433,"user_id":38674,"accept_rate":40,"display_name":"ngarthl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":795515,"answer_count":1,"score":1,"last_activity_date":1699997539,"creation_date":1240816667,"question_id":792493,"body_markdown":"I have a written a client side HTTP cache and I need to store the HTTP payload in the file system somehow. I do not want to clutter the filesystem with unnecessary files.\r\n\r\nI have written this class:\r\n\r\n```lang-java\r\n/*\r\n * Copyright (c) 2008, The Codehaus. All Rights Reserved.\r\n *\r\n *   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n *   you may not use this file except in compliance with the License.\r\n *   You may obtain a copy of the License at\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *   Unless required by applicable law or agreed to in writing, software\r\n *   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *   See the License for the specific language governing permissions and\r\n *   limitations under the License.\r\n *\r\n */\r\n\r\npackage org.codehaus.httpcache4j.cache;\r\n\r\nimport org.apache.commons.lang.Validate;\r\nimport org.apache.commons.io.filefilter.AndFileFilter;\r\nimport org.apache.commons.io.filefilter.DirectoryFileFilter;\r\nimport org.apache.commons.io.filefilter.RegexFileFilter;\r\n\r\nimport org.codehaus.httpcache4j.util.DeletingFileFilter;\r\n\r\nimport java.io.File;\r\nimport java.io.FileFilter;\r\nimport java.io.Serializable;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\n/**\r\n * This class is internal and should never be used by clients. &lt;p/&gt;\r\n *\r\n * Responsible for creating and maintaining a &quot;Pool&quot; of file generations. &lt;br/&gt;\r\n * The files are promoted when they are accessed, so we can figure out which files that are OK to delete. &lt;br/&gt;\r\n * Known Gotchas: This needs to be in sync with the size of the storage engine. &lt;br/&gt;\r\n * If you have too few generations when you have many items in the cache, you might\r\n * be missing some files when you try to access them. &lt;p/&gt;\r\n *\r\n * Note from Despot: I am looking into another way of storing files, so this class might go away at some point,\r\n * or change to a different form. \r\n *\r\n */\r\nclass FileGenerationManager implements Serializable{\r\n    private static final long serialVersionUID = -1558644426181861334L;\r\n    \r\n    private final File baseDirectory;\r\n    private final int generationSize;\r\n    private final int numberOfGenerations;\r\n    private final FileFilter generationFilter;\r\n\r\n    public FileGenerationManager(final File baseDirectory, final int numberOfGenerations) {\r\n        this(baseDirectory, numberOfGenerations, 100);\r\n    }\r\n\r\n    public FileGenerationManager(final File baseDirectory, final int numberOfGenerations, final int generationSize) {\r\n        Validate.isTrue(numberOfGenerations &gt; 0, &quot;You may not create 0 generations&quot;);\r\n        Validate.notNull(baseDirectory, &quot;You may not have a null base directory&quot;);\r\n        if (!baseDirectory.exists()) {\r\n            Validate.isTrue(baseDirectory.mkdirs(), &quot;Could not create base directory: &quot; + baseDirectory);\r\n        }\r\n        this.baseDirectory = baseDirectory;\r\n        this.generationSize = generationSize;\r\n        this.numberOfGenerations = numberOfGenerations;\r\n        generationFilter = new AndFileFilter(DirectoryFileFilter.DIRECTORY, new RegexFileFilter(&quot;[0-9]*&quot;));\r\n        getGenerations();\r\n    }\r\n\r\n    /**\r\n     * Creates generations of the directories in the base directory.\r\n     *\r\n     * @return the created generations.\r\n     */\r\n    //TODO: Is this heavy?\r\n    //TODO: Maybe we should do this when we miss in getFile() ?\r\n    public synchronized List&lt;Generation&gt; getGenerations() {\r\n        final List&lt;Generation&gt; generations = new ArrayList&lt;Generation&gt;();\r\n        //handle existing generations...\r\n        File[] directories = baseDirectory.listFiles(generationFilter);\r\n        if (directories.length &gt; 0) {\r\n            for (File directory : directories) {\r\n                generations.add(new Generation(baseDirectory, Integer.parseInt(directory.getName())));\r\n            }\r\n        }\r\n        else {\r\n            generations.add(new Generation(baseDirectory, 1));\r\n        }\r\n        Collections.sort(generations);\r\n        Generation currentGeneration = generations.get(0);\r\n        if (currentGeneration.getGenerationDirectory().list().length &gt; generationSize) {\r\n            generations.add(0, new Generation(baseDirectory, currentGeneration.getSequence() + 1));\r\n            removeLastGeneration(generations);\r\n        }\r\n        while (generations.size() &gt; numberOfGenerations) {\r\n            removeLastGeneration(generations);\r\n        }\r\n        return Collections.unmodifiableList(generations);\r\n    }\r\n\r\n    private void removeLastGeneration(List&lt;Generation&gt; generations) {\r\n        if (generations.size() &gt; numberOfGenerations) {\r\n            Generation generation = generations.remove(generations.size() - 1);\r\n            generation.delete();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the most recent created generation\r\n     *\r\n     * @return the generation with the highest sequence number\r\n     */\r\n    synchronized Generation getCurrentGeneration() {\r\n        return getGenerations().get(0);\r\n    }\r\n\r\n    public synchronized File getFile(String fileName) {\r\n        File target = new File(getCurrentGeneration().getGenerationDirectory(), fileName);\r\n        for (Generation generation : getGenerations()) {\r\n            File candidate = new File(generation.getGenerationDirectory(), fileName);\r\n            if (candidate.exists()) {\r\n                if (!target.equals(candidate)) {\r\n                    //because of: https://bugs.java.com/bugdatabase/view_bug?bug_id=4017593\r\n                    target.delete();\r\n                    if (!candidate.renameTo(target)) {\r\n                        return candidate;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    \r\n    static class Generation implements Comparable&lt;Generation&gt; {\r\n        private File generationDirectory;\r\n        private int sequence;\r\n\r\n        public Generation(final File baseDir, final int generationNumber) {\r\n            Validate.notNull(baseDir, &quot;Generation directory may not be null&quot;);\r\n            File genFile = new File(baseDir, String.valueOf(generationNumber));\r\n            genFile.mkdirs();\r\n            this.generationDirectory = genFile;\r\n            this.sequence = generationNumber;\r\n        }\r\n\r\n        public synchronized void delete() {\r\n            File[] undeleteableFiles = generationDirectory.listFiles(new DeletingFileFilter());\r\n            if (undeleteableFiles == null || undeleteableFiles.length == 0) {\r\n                generationDirectory.delete();\r\n            }\r\n            else {\r\n                System.err.println(&quot;Unable to delete these files: &quot; + Arrays.toString(undeleteableFiles));\r\n            }\r\n        }\r\n\r\n        public File getGenerationDirectory() {\r\n            return generationDirectory;\r\n        }\r\n\r\n        public int getSequence() {\r\n            return sequence;\r\n        }\r\n\r\n        public int compareTo(Generation generation) {\r\n            return 1 - (sequence - generation.sequence);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nThe problem is that sometimes the files are not moved to the correct folder, and I might leak file descriptors.\r\n\r\nDo you have any suggestions for how to improve this?\r\n\r\nIs there a standard solution for this maybe? regardless of language?\r\n\r\nThis is also pretty slow, speed enhancements are welcome.","title":"Organizing files in &quot;buckets&quot;","body":"<p>I have a written a client side HTTP cache and I need to store the HTTP payload in the file system somehow. I do not want to clutter the filesystem with unnecessary files.</p>\n<p>I have written this class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n * Copyright (c) 2008, The Codehaus. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n *   you may not use this file except in compliance with the License.\n *   You may obtain a copy of the License at\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n *   Unless required by applicable law or agreed to in writing, software\n *   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *   See the License for the specific language governing permissions and\n *   limitations under the License.\n *\n */\n\npackage org.codehaus.httpcache4j.cache;\n\nimport org.apache.commons.lang.Validate;\nimport org.apache.commons.io.filefilter.AndFileFilter;\nimport org.apache.commons.io.filefilter.DirectoryFileFilter;\nimport org.apache.commons.io.filefilter.RegexFileFilter;\n\nimport org.codehaus.httpcache4j.util.DeletingFileFilter;\n\nimport java.io.File;\nimport java.io.FileFilter;\nimport java.io.Serializable;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\n/**\n * This class is internal and should never be used by clients. &lt;p/&gt;\n *\n * Responsible for creating and maintaining a &quot;Pool&quot; of file generations. &lt;br/&gt;\n * The files are promoted when they are accessed, so we can figure out which files that are OK to delete. &lt;br/&gt;\n * Known Gotchas: This needs to be in sync with the size of the storage engine. &lt;br/&gt;\n * If you have too few generations when you have many items in the cache, you might\n * be missing some files when you try to access them. &lt;p/&gt;\n *\n * Note from Despot: I am looking into another way of storing files, so this class might go away at some point,\n * or change to a different form. \n *\n */\nclass FileGenerationManager implements Serializable{\n    private static final long serialVersionUID = -1558644426181861334L;\n    \n    private final File baseDirectory;\n    private final int generationSize;\n    private final int numberOfGenerations;\n    private final FileFilter generationFilter;\n\n    public FileGenerationManager(final File baseDirectory, final int numberOfGenerations) {\n        this(baseDirectory, numberOfGenerations, 100);\n    }\n\n    public FileGenerationManager(final File baseDirectory, final int numberOfGenerations, final int generationSize) {\n        Validate.isTrue(numberOfGenerations &gt; 0, &quot;You may not create 0 generations&quot;);\n        Validate.notNull(baseDirectory, &quot;You may not have a null base directory&quot;);\n        if (!baseDirectory.exists()) {\n            Validate.isTrue(baseDirectory.mkdirs(), &quot;Could not create base directory: &quot; + baseDirectory);\n        }\n        this.baseDirectory = baseDirectory;\n        this.generationSize = generationSize;\n        this.numberOfGenerations = numberOfGenerations;\n        generationFilter = new AndFileFilter(DirectoryFileFilter.DIRECTORY, new RegexFileFilter(&quot;[0-9]*&quot;));\n        getGenerations();\n    }\n\n    /**\n     * Creates generations of the directories in the base directory.\n     *\n     * @return the created generations.\n     */\n    //TODO: Is this heavy?\n    //TODO: Maybe we should do this when we miss in getFile() ?\n    public synchronized List&lt;Generation&gt; getGenerations() {\n        final List&lt;Generation&gt; generations = new ArrayList&lt;Generation&gt;();\n        //handle existing generations...\n        File[] directories = baseDirectory.listFiles(generationFilter);\n        if (directories.length &gt; 0) {\n            for (File directory : directories) {\n                generations.add(new Generation(baseDirectory, Integer.parseInt(directory.getName())));\n            }\n        }\n        else {\n            generations.add(new Generation(baseDirectory, 1));\n        }\n        Collections.sort(generations);\n        Generation currentGeneration = generations.get(0);\n        if (currentGeneration.getGenerationDirectory().list().length &gt; generationSize) {\n            generations.add(0, new Generation(baseDirectory, currentGeneration.getSequence() + 1));\n            removeLastGeneration(generations);\n        }\n        while (generations.size() &gt; numberOfGenerations) {\n            removeLastGeneration(generations);\n        }\n        return Collections.unmodifiableList(generations);\n    }\n\n    private void removeLastGeneration(List&lt;Generation&gt; generations) {\n        if (generations.size() &gt; numberOfGenerations) {\n            Generation generation = generations.remove(generations.size() - 1);\n            generation.delete();\n        }\n    }\n\n    /**\n     * Returns the most recent created generation\n     *\n     * @return the generation with the highest sequence number\n     */\n    synchronized Generation getCurrentGeneration() {\n        return getGenerations().get(0);\n    }\n\n    public synchronized File getFile(String fileName) {\n        File target = new File(getCurrentGeneration().getGenerationDirectory(), fileName);\n        for (Generation generation : getGenerations()) {\n            File candidate = new File(generation.getGenerationDirectory(), fileName);\n            if (candidate.exists()) {\n                if (!target.equals(candidate)) {\n                    //because of: https://bugs.java.com/bugdatabase/view_bug?bug_id=4017593\n                    target.delete();\n                    if (!candidate.renameTo(target)) {\n                        return candidate;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        return target;\n    }\n    \n    static class Generation implements Comparable&lt;Generation&gt; {\n        private File generationDirectory;\n        private int sequence;\n\n        public Generation(final File baseDir, final int generationNumber) {\n            Validate.notNull(baseDir, &quot;Generation directory may not be null&quot;);\n            File genFile = new File(baseDir, String.valueOf(generationNumber));\n            genFile.mkdirs();\n            this.generationDirectory = genFile;\n            this.sequence = generationNumber;\n        }\n\n        public synchronized void delete() {\n            File[] undeleteableFiles = generationDirectory.listFiles(new DeletingFileFilter());\n            if (undeleteableFiles == null || undeleteableFiles.length == 0) {\n                generationDirectory.delete();\n            }\n            else {\n                System.err.println(&quot;Unable to delete these files: &quot; + Arrays.toString(undeleteableFiles));\n            }\n        }\n\n        public File getGenerationDirectory() {\n            return generationDirectory;\n        }\n\n        public int getSequence() {\n            return sequence;\n        }\n\n        public int compareTo(Generation generation) {\n            return 1 - (sequence - generation.sequence);\n        }\n    }\n\n}\n</code></pre>\n<p>The problem is that sometimes the files are not moved to the correct folder, and I might leak file descriptors.</p>\n<p>Do you have any suggestions for how to improve this?</p>\n<p>Is there a standard solution for this maybe? regardless of language?</p>\n<p>This is also pretty slow, speed enhancements are welcome.</p>\n"},{"tags":["java","swing","paint"],"comments":[{"owner":{"account_id":4353601,"reputation":6084,"user_id":3553031,"accept_rate":33,"display_name":"user3553031"},"score":0,"creation_date":1405971582,"post_id":848481,"comment_id":38631881,"body_markdown":"This issue frequently occurs when running Java inside VMWare.","body":"This issue frequently occurs when running Java inside VMWare."}],"answers":[{"comments":[{"owner":{"account_id":5483,"reputation":4987,"user_id":8840,"accept_rate":79,"display_name":"Avrom"},"score":0,"creation_date":1242069520,"post_id":848769,"comment_id":657836,"body_markdown":"The user who first had the issue had an ATI Radeon XPress 200 but I did not check whether they had the latest driver.\nThe application is a pretty &quot;standard&quot; Swing app, i.e. no 3D operations or &quot;out of the ordinary&quot; paint operations.","body":"The user who first had the issue had an ATI Radeon XPress 200 but I did not check whether they had the latest driver. The application is a pretty &quot;standard&quot; Swing app, i.e. no 3D operations or &quot;out of the ordinary&quot; paint operations."},{"owner":{"account_id":5483,"reputation":4987,"user_id":8840,"accept_rate":79,"display_name":"Avrom"},"score":0,"creation_date":1242069662,"post_id":848769,"comment_id":657845,"body_markdown":"One would think that it would auto turn off for unsupported video cards, assuming that were possible.","body":"One would think that it would auto turn off for unsupported video cards, assuming that were possible."}],"tags":[],"owner":{"account_id":10258,"reputation":26470,"user_id":19276,"accept_rate":81,"display_name":"DJClayworth"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1242057329,"creation_date":1242057329,"answer_id":848769,"question_id":848481,"body_markdown":"Java introduced in R6 update 10 a pipeline that renders graphics based on Direct3D. According to the release description [here][1] it supports only NVidia and ATI cards, which means anyone not using those cards may have a problem. Since it is a recent innovation I would suggest that anyone using old drivers for those cards may also have problems. Upgrading a video driver will probably fix the first case but not the last.\r\n\r\nIf you set sun.java2d.d3d to false the worst that can happen is that some users will not achieve the performance that they theoretically could. You will have to balance whether this is preferable to the issues that you are seeing at the moment. \r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/webnotes/6u10.html","title":"Paint refresh problem in Java 1.6 Swing app","body":"<p>Java introduced in R6 update 10 a pipeline that renders graphics based on Direct3D. According to the release description <a href=\"http://java.sun.com/javase/6/webnotes/6u10.html\" rel=\"nofollow noreferrer\">here</a> it supports only NVidia and ATI cards, which means anyone not using those cards may have a problem. Since it is a recent innovation I would suggest that anyone using old drivers for those cards may also have problems. Upgrading a video driver will probably fix the first case but not the last.</p>\n\n<p>If you set sun.java2d.d3d to false the worst that can happen is that some users will not achieve the performance that they theoretically could. You will have to balance whether this is preferable to the issues that you are seeing at the moment. </p>\n"},{"tags":[],"owner":{"account_id":26513,"reputation":5382,"user_id":69051,"accept_rate":89,"display_name":"01es"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1242067961,"creation_date":1242067961,"answer_id":849506,"question_id":848481,"body_markdown":"Are all painting and model changing operations execute on EDT (e.g. changing TableModel etc.)?","title":"Paint refresh problem in Java 1.6 Swing app","body":"<p>Are all painting and model changing operations execute on EDT (e.g. changing TableModel etc.)?</p>\n"}],"owner":{"account_id":5483,"reputation":4987,"user_id":8840,"accept_rate":79,"display_name":"Avrom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2390,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":848769,"answer_count":2,"score":5,"last_activity_date":1699997344,"creation_date":1242053481,"question_id":848481,"body_markdown":"I&#39;m working on a Swing application (currently running on Java 1.6 update 11) which has some intermittent paint refresh problems (e.g. there are artifacts etc.). This only happens to some users of our application but not others.\r\n\r\nAfter doing some research, I found that setting the property `sun.java2d.d3d` to `false` may help and in fact, it helped for one of our users.\r\n\r\nNow that some other users are complaining about the issue, I&#39;m thinking of setting the property to `false` for all users.\r\n\r\nMy basic questions are the following:\r\n\r\nWhat exactly is the cause of this? Is it the video card? Is it the driver? Is it a bug from Sun (such as [JDK-6635462 : D3D: REGRESSION: XOR rendering is extremly slow][1])? Combination of all three?\r\n\r\nIn other words, is is best to simply turn this property off or is it affecting only certain video cards in which an update to the latest driver would fix?\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6635462","title":"Paint refresh problem in Java 1.6 Swing app","body":"<p>I'm working on a Swing application (currently running on Java 1.6 update 11) which has some intermittent paint refresh problems (e.g. there are artifacts etc.). This only happens to some users of our application but not others.</p>\n<p>After doing some research, I found that setting the property <code>sun.java2d.d3d</code> to <code>false</code> may help and in fact, it helped for one of our users.</p>\n<p>Now that some other users are complaining about the issue, I'm thinking of setting the property to <code>false</code> for all users.</p>\n<p>My basic questions are the following:</p>\n<p>What exactly is the cause of this? Is it the video card? Is it the driver? Is it a bug from Sun (such as <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6635462\" rel=\"nofollow noreferrer\">JDK-6635462 : D3D: REGRESSION: XOR rendering is extremly slow</a>)? Combination of all three?</p>\n<p>In other words, is is best to simply turn this property off or is it affecting only certain video cards in which an update to the latest driver would fix?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9856,"page":61,"page_size":100}
