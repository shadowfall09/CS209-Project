{"items":[{"tags":["java","validation"],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677591220,"creation_date":1677591220,"answer_id":75592799,"question_id":75585960,"body_markdown":"You can use a `javax.validation.Validator` to validate the whole object or a specific field, like this:\r\n\r\n    @Test\r\n    void test() throws Exception {\r\n    \tvar obj = new MyObject(&quot;invalidEmail&quot;);\r\n    \tvar validator = Validation.buildDefaultValidatorFactory().getValidator();\r\n    \r\n    \t// 2 violations: email &amp; name\r\n    \tSystem.out.println(validator.validate(obj));\r\n    \t// 1 violation: email\r\n    \tSystem.out.println(validator.validateProperty(obj, &quot;email&quot;));\r\n    }\r\n    \r\n    class MyObject {\r\n    \t@Email\r\n    \tprivate String email;\r\n    \t@NotNull\r\n    \tprivate String name;\r\n    \r\n    \tpublic MyObject(String email) {\r\n    \t\tthis.email = email;\r\n    \t}\r\n    }","title":"Manually validate using javax.validation","body":"<p>You can use a <code>javax.validation.Validator</code> to validate the whole object or a specific field, like this:</p>\n<pre><code>@Test\nvoid test() throws Exception {\n    var obj = new MyObject(&quot;invalidEmail&quot;);\n    var validator = Validation.buildDefaultValidatorFactory().getValidator();\n\n    // 2 violations: email &amp; name\n    System.out.println(validator.validate(obj));\n    // 1 violation: email\n    System.out.println(validator.validateProperty(obj, &quot;email&quot;));\n}\n\nclass MyObject {\n    @Email\n    private String email;\n    @NotNull\n    private String name;\n\n    public MyObject(String email) {\n        this.email = email;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19772972,"reputation":324,"user_id":14479601,"display_name":"Bend"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75592799,"answer_count":1,"score":0,"last_activity_date":1677591220,"creation_date":1677535232,"question_id":75585960,"body_markdown":"I have a stupidly complex object that may (or may not) contain an email address (or phone number, or any number of other Json encoded stuff). My issue is that i want to use javax.validation to validate it.\r\n\r\nMy understanding is that i need to do Bean validation and create my own annotation for the validation, no issue there. However, i want to use the @Email validation (just like i do everywhere else in my app) how do i go about manually invoking the validate?\r\n\r\nIs it best practice to just write a method like such and call it from the isValid method?\r\n\r\nprivate void validateEmail(@Email String email) {}\r\n\r\nOr is there a better way of doing this?","title":"Manually validate using javax.validation","body":"<p>I have a stupidly complex object that may (or may not) contain an email address (or phone number, or any number of other Json encoded stuff). My issue is that i want to use javax.validation to validate it.</p>\n<p>My understanding is that i need to do Bean validation and create my own annotation for the validation, no issue there. However, i want to use the @Email validation (just like i do everywhere else in my app) how do i go about manually invoking the validate?</p>\n<p>Is it best practice to just write a method like such and call it from the isValid method?</p>\n<p>private void validateEmail(@Email String email) {}</p>\n<p>Or is there a better way of doing this?</p>\n"},{"tags":["java","casting","google-play-integrity-api"],"owner":{"account_id":24946410,"reputation":1,"user_id":18811692,"display_name":"Talha Al&#231;orba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677591179,"creation_date":1677590798,"question_id":75592721,"body_markdown":"\r\n```\r\nimport org.jose4j.jwe.JsonWebEncryption;\r\nimport org.jose4j.jws.JsonWebSignature;\r\nimport org.jose4j.jwx.JsonWebStructure;\r\n\r\nJsonWebEncryption jwe = null;\r\n\r\n        try {\r\n            jwe = (JsonWebEncryption) JsonWebStructure.fromCompactSerialization(integrityToken);\r\n        }catch (JoseException e){\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nHello folks,\r\n\r\nI&#39;m trying to migrate play integrity at the backend side and I took this code part from https://developer.android.com/google/play/integrity/verdict#decrypt-verify-locally. . \r\nIn this code I get this exception :\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.ClassCastException: class\r\n&gt; org.jose4j.jws.JsonWebSignature cannot be cast to class\r\n&gt; org.jose4j.jwe.JsonWebEncryption (org.jose4j.jws.JsonWebSignature and\r\n&gt; org.jose4j.jwe.JsonWebEncryption are in unnamed module of loader\r\n&gt; &#39;app&#39;)\r\n\r\n As you can see below fromCompactSerialization method returns JsonWebStructure type and it causes casting error.\r\n\r\n\r\n```\r\npublic static JsonWebStructure fromCompactSerialization(String cs) throws JoseException {\r\n        String[] parts = CompactSerializer.deserialize(cs);\r\n        Object jsonWebObject;\r\n        if (parts.length == 5) {\r\n            jsonWebObject = new JsonWebEncryption();\r\n        } else {\r\n            if (parts.length != 3) {\r\n                throw new JoseException(&quot;Invalid JOSE Compact Serialization. Expecting either 3 or 5 parts for JWS or JWE respectively but was &quot; + parts.length + &quot;.&quot;);\r\n            }\r\n\r\n            jsonWebObject = new JsonWebSignature();\r\n        }\r\n\r\n        ((JsonWebStructure)jsonWebObject).setCompactSerializationParts(parts);\r\n        ((JsonWebStructure)jsonWebObject).rawCompactSerialization = cs;\r\n        return (JsonWebStructure)jsonWebObject;\r\n    }\r\n```\r\n\r\n\r\nDo you have any idea how can I cast JsonWebStructure object to JsonWebEncryption object in java?\r\n\r\n\r\n\r\n","title":"How to cast JsonWebStructure object to JsonWebEncryption object in java?","body":"<pre><code>import org.jose4j.jwe.JsonWebEncryption;\nimport org.jose4j.jws.JsonWebSignature;\nimport org.jose4j.jwx.JsonWebStructure;\n\nJsonWebEncryption jwe = null;\n\n        try {\n            jwe = (JsonWebEncryption) JsonWebStructure.fromCompactSerialization(integrityToken);\n        }catch (JoseException e){\n            e.printStackTrace();\n        }\n</code></pre>\n<p>Hello folks,</p>\n<p>I'm trying to migrate play integrity at the backend side and I took this code part from <a href=\"https://developer.android.com/google/play/integrity/verdict#decrypt-verify-locally\" rel=\"nofollow noreferrer\">https://developer.android.com/google/play/integrity/verdict#decrypt-verify-locally</a>. .\nIn this code I get this exception :</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.ClassCastException: class\norg.jose4j.jws.JsonWebSignature cannot be cast to class\norg.jose4j.jwe.JsonWebEncryption (org.jose4j.jws.JsonWebSignature and\norg.jose4j.jwe.JsonWebEncryption are in unnamed module of loader\n'app')</p>\n</blockquote>\n<p>As you can see below fromCompactSerialization method returns JsonWebStructure type and it causes casting error.</p>\n<pre><code>public static JsonWebStructure fromCompactSerialization(String cs) throws JoseException {\n        String[] parts = CompactSerializer.deserialize(cs);\n        Object jsonWebObject;\n        if (parts.length == 5) {\n            jsonWebObject = new JsonWebEncryption();\n        } else {\n            if (parts.length != 3) {\n                throw new JoseException(&quot;Invalid JOSE Compact Serialization. Expecting either 3 or 5 parts for JWS or JWE respectively but was &quot; + parts.length + &quot;.&quot;);\n            }\n\n            jsonWebObject = new JsonWebSignature();\n        }\n\n        ((JsonWebStructure)jsonWebObject).setCompactSerializationParts(parts);\n        ((JsonWebStructure)jsonWebObject).rawCompactSerialization = cs;\n        return (JsonWebStructure)jsonWebObject;\n    }\n</code></pre>\n<p>Do you have any idea how can I cast JsonWebStructure object to JsonWebEncryption object in java?</p>\n"},{"tags":["java","spring-boot","apache-spark","snakeyaml"],"answers":[{"tags":[],"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653897909,"creation_date":1653897909,"answer_id":72431014,"question_id":72417913,"body_markdown":"So, you had been using Snakeyaml with an earlier Spring Boot version, but with a newer Spring Boot version, Snakeyaml stopped working. This very much seems to be a version incompatibility issue.\r\n\r\nHere: https://search.maven.org/artifact/org.springframework.boot/spring-boot-starter/2.1.15.RELEASE/jar\r\n\r\nwe can see this structure:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starters&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\r\n  &lt;/parent&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n  &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\r\n  &lt;name&gt;Spring Boot Starter&lt;/name&gt;\r\n  &lt;description&gt;Core starter, including auto-configuration support, logging and YAML&lt;/description&gt;\r\n  &lt;url&gt;https://projects.spring.io/spring-boot/#/spring-boot-parent/spring-boot-starters/spring-boot-starter&lt;/url&gt;\r\n  &lt;organization&gt;\r\n    &lt;name&gt;Pivotal Software, Inc.&lt;/name&gt;\r\n    &lt;url&gt;https://spring.io&lt;/url&gt;\r\n  &lt;/organization&gt;\r\n  &lt;licenses&gt;\r\n    &lt;license&gt;\r\n      &lt;name&gt;Apache License, Version 2.0&lt;/name&gt;\r\n      &lt;url&gt;https://www.apache.org/licenses/LICENSE-2.0&lt;/url&gt;\r\n    &lt;/license&gt;\r\n  &lt;/licenses&gt;\r\n  &lt;developers&gt;\r\n    &lt;developer&gt;\r\n      &lt;name&gt;Pivotal&lt;/name&gt;\r\n      &lt;email&gt;info@pivotal.io&lt;/email&gt;\r\n      &lt;organization&gt;Pivotal Software, Inc.&lt;/organization&gt;\r\n      &lt;organizationUrl&gt;https://www.spring.io&lt;/organizationUrl&gt;\r\n    &lt;/developer&gt;\r\n  &lt;/developers&gt;\r\n  &lt;scm&gt;\r\n    &lt;connection&gt;scm:git:git://github.com/spring-projects/spring-boot.git&lt;/connection&gt;\r\n    &lt;developerConnection&gt;scm:git:ssh://git@github.com/spring-projects/spring-boot.git&lt;/developerConnection&gt;\r\n    &lt;url&gt;https://github.com/spring-projects/spring-boot&lt;/url&gt;\r\n  &lt;/scm&gt;\r\n  &lt;issueManagement&gt;\r\n    &lt;system&gt;Github&lt;/system&gt;\r\n    &lt;url&gt;https://github.com/spring-projects/spring-boot/issues&lt;/url&gt;\r\n  &lt;/issueManagement&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n      &lt;version&gt;1.3.2&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n      &lt;version&gt;5.1.16.RELEASE&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n      &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n      &lt;version&gt;1.23&lt;/version&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nwhere the interesting part from our perspective is:\r\n\r\n```\r\n      &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n      &lt;version&gt;1.23&lt;/version&gt;\r\n```\r\n\r\nso, you will likely need to ensure that your Snakeyaml version is **1.23**.","title":"How to fix java.lang.NoSuchMethodError: org.yaml.snakeyaml.Yaml.&lt;init&gt;(Lorg/yaml/snakeyaml/constructor/BaseConstructor?","body":"<p>So, you had been using Snakeyaml with an earlier Spring Boot version, but with a newer Spring Boot version, Snakeyaml stopped working. This very much seems to be a version incompatibility issue.</p>\n<p>Here: <a href=\"https://search.maven.org/artifact/org.springframework.boot/spring-boot-starter/2.1.15.RELEASE/jar\" rel=\"nofollow noreferrer\">https://search.maven.org/artifact/org.springframework.boot/spring-boot-starter/2.1.15.RELEASE/jar</a></p>\n<p>we can see this structure:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starters&lt;/artifactId&gt;\n    &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\n  &lt;/parent&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n  &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\n  &lt;name&gt;Spring Boot Starter&lt;/name&gt;\n  &lt;description&gt;Core starter, including auto-configuration support, logging and YAML&lt;/description&gt;\n  &lt;url&gt;https://projects.spring.io/spring-boot/#/spring-boot-parent/spring-boot-starters/spring-boot-starter&lt;/url&gt;\n  &lt;organization&gt;\n    &lt;name&gt;Pivotal Software, Inc.&lt;/name&gt;\n    &lt;url&gt;https://spring.io&lt;/url&gt;\n  &lt;/organization&gt;\n  &lt;licenses&gt;\n    &lt;license&gt;\n      &lt;name&gt;Apache License, Version 2.0&lt;/name&gt;\n      &lt;url&gt;https://www.apache.org/licenses/LICENSE-2.0&lt;/url&gt;\n    &lt;/license&gt;\n  &lt;/licenses&gt;\n  &lt;developers&gt;\n    &lt;developer&gt;\n      &lt;name&gt;Pivotal&lt;/name&gt;\n      &lt;email&gt;info@pivotal.io&lt;/email&gt;\n      &lt;organization&gt;Pivotal Software, Inc.&lt;/organization&gt;\n      &lt;organizationUrl&gt;https://www.spring.io&lt;/organizationUrl&gt;\n    &lt;/developer&gt;\n  &lt;/developers&gt;\n  &lt;scm&gt;\n    &lt;connection&gt;scm:git:git://github.com/spring-projects/spring-boot.git&lt;/connection&gt;\n    &lt;developerConnection&gt;scm:git:ssh://git@github.com/spring-projects/spring-boot.git&lt;/developerConnection&gt;\n    &lt;url&gt;https://github.com/spring-projects/spring-boot&lt;/url&gt;\n  &lt;/scm&gt;\n  &lt;issueManagement&gt;\n    &lt;system&gt;Github&lt;/system&gt;\n    &lt;url&gt;https://github.com/spring-projects/spring-boot/issues&lt;/url&gt;\n  &lt;/issueManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n      &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n      &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n      &lt;version&gt;2.1.15.RELEASE&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n      &lt;version&gt;1.3.2&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;5.1.16.RELEASE&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n      &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n      &lt;version&gt;1.23&lt;/version&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>where the interesting part from our perspective is:</p>\n<pre><code>      &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n      &lt;version&gt;1.23&lt;/version&gt;\n</code></pre>\n<p>so, you will likely need to ensure that your Snakeyaml version is <strong>1.23</strong>.</p>\n"},{"tags":[],"owner":{"account_id":6144471,"reputation":106,"user_id":4790817,"display_name":"Mahesh Revaskar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677590840,"creation_date":1677590840,"answer_id":75592730,"question_id":72417913,"body_markdown":"Excluding snakeyaml as a transitive depdendency from spring-boot-starter-web and spring-boot-starter-test \r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\nand added with scope = runtime.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n            &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"How to fix java.lang.NoSuchMethodError: org.yaml.snakeyaml.Yaml.&lt;init&gt;(Lorg/yaml/snakeyaml/constructor/BaseConstructor?","body":"<p>Excluding snakeyaml as a transitive depdendency from spring-boot-starter-web and spring-boot-starter-test</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n                &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and added with scope = runtime.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n        &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":17136139,"reputation":137,"user_id":12401126,"display_name":"Programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4060,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1677590840,"creation_date":1653759534,"question_id":72417913,"body_markdown":"I have a spark spring-boot application and upgrading spring boot from 1.X to 2.1.5.Now with spring-boot 2.1.15 upgrade , I am getting snakeyaml error in application startup as: \r\n\r\n    ERROR SpringApplication - Application run failed\r\n    java.lang.NoSuchMethodError: org.yaml.snakeyaml.Yaml.&lt;init&gt;(Lorg/yaml/snakeyaml/constructor/BaseConstructor;Lorg/yaml/snakeyaml/representer/Representer;Lorg/yaml/snakeyaml/DumperOptions;Lorg/yaml/snakeyaml/LoaderOptions;Lorg/yaml/snakeyaml/resolver/Resolver;)V\r\n            at org.springframework.boot.env.OriginTrackedYamlLoader.createYaml(OriginTrackedYamlLoader.java:71)\r\n            at org.springframework.beans.factory.config.YamlProcessor.process(YamlProcessor.java:162)\r\n            at org.springframework.boot.env.OriginTrackedYamlLoader.load(OriginTrackedYamlLoader.java:76)\r\n            at org.springframework.boot.env.YamlPropertySourceLoader.load(YamlPropertySourceLoader.java:50)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.loadDocuments(ConfigFileApplicationListener.java:544)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:499)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.loadForFileExtension(ConfigFileApplicationListener.java:475)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:445)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.lambda$null$6(ConfigFileApplicationListener.java:427)\r\n            at java.lang.Iterable.forEach(Iterable.java:75)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.lambda$load$7(ConfigFileApplicationListener.java:427)\r\n            at java.lang.Iterable.forEach(Iterable.java:75)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:424)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:323)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener.addPropertySources(ConfigFileApplicationListener.java:204)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener.postProcessEnvironment(ConfigFileApplicationListener.java:188)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEnvironmentPreparedEvent(ConfigFileApplicationListener.java:178)\r\n            at org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEvent(ConfigFileApplicationListener.java:166)\r\n            at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n            at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n            at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n            at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n            at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:76)\r\n            at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\r\n            at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:342)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:305)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1204)\r\n            at com.capitalone.customercore.autolink.AutolinkApp.main(AutolinkApp.java:17)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n            at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:845)\r\n            at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:161)\r\n            at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:184)\r\n            at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:86)\r\n            at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:920)\r\n            at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:929)\r\n            at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n\r\n\r\n\r\n\r\nI did check the snakeyaml in dependency:tree and see org.yaml:snakeyaml:jar:1.23:compile\r\nMy dependency:tree is :\r\n\r\n\r\n    com.test.customercore:autolink-utility:jar:0.30-SNAPSHOT\r\n    [INFO] +- org.springframework.boot:spring-boot-starter:jar:2.1.15.RELEASE:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot:jar:2.1.15.RELEASE:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.1.15.RELEASE:compile\r\n    [INFO] |  +- javax.annotation:javax.annotation-api:jar:1.3.2:compile\r\n    [INFO] |  +- org.springframework:spring-core:jar:5.1.16.RELEASE:compile\r\n    [INFO] |  |  \\- org.springframework:spring-jcl:jar:5.1.16.RELEASE:compile\r\n    [INFO] |  \\- org.yaml:snakeyaml:jar:1.23:compile\r\n    [INFO] +- org.springframework:spring-expression:jar:5.3.17:compile\r\n    [INFO] [INFO] |  +- com.amazonaws:aws-java-sdk-kinesisvideo:jar:1.11.511:compile\r\n    [INFO] |  |  \\- io.netty:netty-handler:jar:4.1.50.Final:compile\r\n    [INFO] |  |     +- io.netty:netty-common:jar:4.1.50.Final:compile\r\n    [INFO] |  |     +- io.netty:netty-resolver:jar:4.1.50.Final:compile\r\n    [INFO] |  |     +- io.netty:netty-buffer:jar:4.1.50.Final:compile\r\n    [INFO] |  |     +- io.netty:netty-transport:jar:4.1.50.Final:compile\r\n    [INFO] |  |     \\- io.netty:netty-codec:jar:4.1.50.Final:compile\r\n    [INFO] |  [INFO] +- org.springframework.boot:spring-boot-starter-data-cassandra:jar:2.1.15.RELEASE:compile\r\n    [INFO] |  \\- org.springframework:spring-tx:jar:5.1.16.RELEASE:compile\r\n    [INFO] +- org.springframework.data:spring-data-cassandra:jar:2.1.18.RELEASE:compile\r\n    [INFO] |  +- org.springframework:spring-context:jar:5.1.16.RELEASE:compile\r\n    [INFO] |  |  \\- org.springframework:spring-aop:jar:5.1.16.RELEASE:compile\r\n    [INFO] |  +- org.springframework:spring-beans:jar:5.1.16.RELEASE:compile\r\n    [INFO] |  +- org.springframework.data:spring-data-commons:jar:2.1.18.RELEASE:compile\r\n    [INFO] |  +- com.datastax.cassandra:cassandra-driver-core:jar:3.6.0:compile\r\n    [INFO] |  |  +- com.github.jnr:jnr-ffi:jar:2.1.7:compile\r\n    [INFO] |  |  |  +- com.github.jnr:jffi:jar:1.2.16:compile\r\n    [INFO] |  |  |  +- com.github.jnr:jffi:jar:native:1.2.16:runtime\r\n    [INFO] |  |  |  +- org.ow2.asm:asm:jar:5.0.3:compile\r\n    [INFO] |  |  |  +- org.ow2.asm:asm-commons:jar:5.0.3:compile\r\n    [INFO] |  |  |  +- org.ow2.asm:asm-analysis:jar:5.0.3:compile\r\n    [INFO] |  |  |  +- org.ow2.asm:asm-tree:jar:5.0.3:compile\r\n    [INFO] |  |  |  +- org.ow2.asm:asm-util:jar:5.0.3:compile\r\n    [INFO] |  |  |  \\- com.github.jnr:jnr-x86asm:jar:1.0.2:compile\r\n    [INFO] |  |  \\- com.github.jnr:jnr-posix:jar:3.0.44:compile\r\n    [INFO] |  |     \\- com.github.jnr:jnr-constants:jar:0.9.9:compile\r\n    [INFO] |  \\- org.slf4j:slf4j-api:jar:1.7.30:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.1.15.RELEASE:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.1.15.RELEASE:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.1.15.RELEASE:test\r\n    [INFO] |  +- com.jayway.jsonpath:json-path:jar:2.4.0:test\r\n    [INFO] |  |  \\- net.minidev:json-smart:jar:2.3:compile\r\n    [INFO] |  |     \\- net.minidev:accessors-smart:jar:1.2:compile\r\n    [INFO] |  +- junit:junit:jar:4.12:test\r\n    [INFO] |  +- org.assertj:assertj-core:jar:3.11.1:test\r\n    [INFO] |  +- org.mockito:mockito-core:jar:2.23.4:test\r\n    [INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.9.16:compile\r\n    [INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.9.16:test\r\n    [INFO] |  |  \\- org.objenesis:objenesis:jar:2.6:compile\r\n    [INFO] |  +- org.hamcrest:hamcrest-core:jar:1.3:test\r\n    [INFO] |  +- org.hamcrest:hamcrest-library:jar:1.3:test\r\n    [INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.0:test\r\n    [INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\r\n    [INFO] |  +- org.springframework:spring-test:jar:5.1.16.RELEASE:test\r\n    [INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.6.4:test\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-log4j:jar:1.3.8.RELEASE:compile\r\n    [INFO] |  +- org.slf4j:jcl-over-slf4j:jar:1.7.30:compile\r\n    [INFO] |  +- org.slf4j:jul-to-slf4j:jar:1.7.30:compile\r\n    [INFO] |  \\- org.slf4j:slf4j-log4j12:jar:1.7.30:compile\r\n    [INFO] +- org.apache.logging.log4j:log4j-api:jar:2.17.1:compile\r\n    [INFO] +- com.test.api.customers:customers-relations-common:jar:1.1.28-RELEASE:compile\r\n    [INFO] |  +- javax.inject:javax.inject:jar:1:compile\r\n    [INFO] |  +- org.apache.commons:commons-lang3:jar:3.8.1:compile\r\n    [INFO] |  +- org.apache.commons:commons-collections4:jar:4.1:compile\r\n    [INFO] |  +- com.test.chassis.model:chassis-business-model:jar:3.1.1.RELEASE:compile\r\n    [INFO] |  |  +- com.test.chassis:chassis-annotations:jar:3.1.1.RELEASE:compile\r\n    [INFO] |  |  +- io.swagger:swagger-annotations:jar:1.5.21:compile\r\n    [INFO] |  |  +- javax.xml.bind:jaxb-api:jar:2.3.1:compile\r\n    [INFO] |  |  |  \\- javax.activation:javax.activation-api:jar:1.2.0:compile\r\n    [INFO] |  |  +- org.jooq:jool-java-8:jar:0.9.13:compile\r\n    [INFO] |  |  +- com.sun.xml.bind:jaxb-core:jar:2.3.0:compile\r\n    [INFO] |  |  \\- com.sun.xml.bind:jaxb-impl:jar:2.3.0:compile\r\n    [INFO] |  +- com.test.chassis.engine:chassis-model:jar:3.1.1.RELEASE:compile\r\n    [INFO] |  |  +- javax.ws.rs:javax.ws.rs-api:jar:2.1:compile\r\n    [INFO] |  |  +- javax.validation:validation-api:jar:2.0.1.Final:compile\r\n    [INFO] |  |  +- javax.el:javax.el-api:jar:3.0.0:compile\r\n    [INFO] |  |  \\- org.glassfish.web:el-impl:jar:2.2:compile\r\n    [INFO] |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.9.10:compile\r\n    [INFO] |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.9.10:compile\r\n    [INFO] |  +- org.hamcrest:java-hamcrest:jar:2.0.0.0:compile\r\n    [INFO] |  +- redis.clients:jedis:jar:2.9.3:compile\r\n    [INFO] |  |  \\- org.apache.commons:commons-pool2:jar:2.6.2:compile\r\n    [INFO] |  \\- org.springframework.data:spring-data-redis:jar:2.1.18.RELEASE:compile\r\n    [INFO] |     +- org.springframework.data:spring-data-keyvalue:jar:2.1.18.RELEASE:compile\r\n    [INFO] |     +- org.springframework:spring-oxm:jar:5.1.16.RELEASE:compile\r\n    [INFO] |     \\- org.springframework:spring-context-support:jar:5.1.16.RELEASE:compile\r\n    [INFO] +- org.hibernate.validator:hibernate-validator:jar:6.1.5.Final:compile\r\n    [INFO] |  +- jakarta.validation:jakarta.validation-api:jar:2.0.2:compile\r\n    [INFO] |  +- org.jboss.logging:jboss-logging:jar:3.3.3.Final:compile\r\n    [INFO] |  \\- com.fasterxml:classmate:jar:1.4.0:compile\r\n    [INFO] +- org.apache.spark:spark-sql_2.11:jar:2.4.0:compile\r\n    [INFO] |  +- com.univocity:univocity-parsers:jar:2.7.3:compile\r\n    [INFO] |  +- org.apache.spark:spark-sketch_2.11:jar:2.4.0:compile\r\n    [INFO] |  +- org.apache.spark:spark-catalyst_2.11:jar:2.4.0:compile\r\n    [INFO] |  |  +- org.scala-lang.modules:scala-parser-combinators_2.11:jar:1.1.0:compile\r\n    [INFO] |  |  +- org.codehaus.janino:janino:jar:3.0.16:compile\r\n    [INFO] |  |  +- org.codehaus.janino:commons-compiler:jar:3.0.16:compile\r\n    [INFO] |  |  \\- org.antlr:antlr4-runtime:jar:4.7:compile\r\n    [INFO] |  +- org.apache.spark:spark-tags_2.11:jar:2.4.0:compile\r\n    [INFO] |  +- org.apache.orc:orc-core:jar:nohive:1.5.2:compile\r\n    [INFO] |  |  +- org.apache.orc:orc-shims:jar:1.5.2:compile\r\n    [INFO] |  |  \\- io.airlift:aircompressor:jar:0.10:compile\r\n    [INFO] |  +- org.apache.orc:orc-mapreduce:jar:nohive:1.5.2:compile\r\n    [INFO] |  +- org.apache.parquet:parquet-column:jar:1.10.0:compile\r\n    [INFO] |  |  +- org.apache.parquet:parquet-common:jar:1.10.0:compile\r\n    [INFO] |  |  \\- org.apache.parquet:parquet-encoding:jar:1.10.0:compile\r\n    [INFO] |  +- org.apache.parquet:parquet-hadoop:jar:1.10.0:compile\r\n    [INFO] |  |  +- org.apache.parquet:parquet-format:jar:2.4.0:compile\r\n    [INFO] |  |  +- org.apache.parquet:parquet-jackson:jar:1.10.0:compile\r\n    [INFO] |  |  \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile\r\n    [INFO] |  +- org.apache.arrow:arrow-vector:jar:0.10.0:compile\r\n    [INFO] |  |  +- org.apache.arrow:arrow-format:jar:0.10.0:compile\r\n    [INFO] |  |  +- org.apache.arrow:arrow-memory:jar:0.10.0:compile\r\n    [INFO] |  |  +- com.carrotsearch:hppc:jar:0.7.2:compile\r\n    [INFO] |  |  \\- com.vlkan:flatbuffers:jar:1.2.0-3f79e055:compile\r\n    [INFO] |  +- org.apache.xbean:xbean-asm6-shaded:jar:4.8:compile\r\n    [INFO] |  \\- org.spark-project.spark:unused:jar:1.0.0:compile\r\n    [INFO] +- org.apache.spark:spark-core_2.11:jar:2.4.1:compile\r\n    [INFO] |  +- com.thoughtworks.paranamer:paranamer:jar:2.8:compile\r\n    [INFO] |  +- org.apache.avro:avro:jar:1.8.2:compile\r\n    [INFO] |  |  \\- org.tukaani:xz:jar:1.5:compile\r\n    [INFO] |  +- org.apache.avro:avro-mapred:jar:hadoop2:1.8.2:compile\r\n    [INFO] |  |  \\- org.apache.avro:avro-ipc:jar:1.8.2:compile\r\n    [INFO] |  +- com.twitter:chill_2.11:jar:0.9.3:compile\r\n    [INFO] |  |  \\- com.esotericsoftware:kryo-shaded:jar:4.0.2:compile\r\n    [INFO] |  |     \\- com.esotericsoftware:minlog:jar:1.3.0:compile\r\n    [INFO] |  +- com.twitter:chill-java:jar:0.9.3:compile\r\n    [INFO] |  +- org.apache.spark:spark-launcher_2.11:jar:2.4.1:compile\r\n    [INFO] |  +- org.apache.spark:spark-kvstore_2.11:jar:2.4.1:compile\r\n    [INFO] |  +- org.apache.spark:spark-network-shuffle_2.11:jar:2.4.1:compile\r\n    [INFO] |  +- org.apache.spark:spark-unsafe_2.11:jar:2.4.1:compile\r\n    [INFO] |  +- javax.activation:activation:jar:1.1.1:compile\r\n    [INFO] |  +- org.apache.curator:curator-recipes:jar:2.6.0:compile\r\n    [INFO] |  |  \\- org.apache.curator:curator-framework:jar:2.6.0:compile\r\n    [INFO] |  +- org.apache.zookeeper:zookeeper:jar:3.4.6:compile\r\n    [INFO] |  +- javax.servlet:javax.servlet-api:jar:4.0.1:compile\r\n    [INFO] |  +- org.apache.commons:commons-math3:jar:3.4.1:compile\r\n    [INFO] |  +- com.google.code.findbugs:jsr305:jar:1.3.9:compile\r\n    [INFO] |  +- com.ning:compress-lzf:jar:1.0.3:compile\r\n    [INFO] |  +- org.xerial.snappy:snappy-java:jar:1.1.7.1:compile\r\n    [INFO] |  +- org.lz4:lz4-java:jar:1.4.0:compile\r\n    [INFO] |  +- com.github.luben:zstd-jni:jar:1.3.2-2:compile\r\n    [INFO] |  +- org.roaringbitmap:RoaringBitmap:jar:0.5.11:compile\r\n    [INFO] |  +- commons-net:commons-net:jar:3.1:compile\r\n    [INFO] |  +- org.scala-lang:scala-library:jar:2.11.12:compile\r\n    [INFO] |  +- org.json4s:json4s-jackson_2.11:jar:3.5.3:compile\r\n    [INFO] |  |  \\- org.json4s:json4s-core_2.11:jar:3.5.3:compile\r\n    [INFO] |  |     +- org.json4s:json4s-ast_2.11:jar:3.5.3:compile\r\n    [INFO] |  |     +- org.json4s:json4s-scalap_2.11:jar:3.5.3:compile\r\n    [INFO] |  |     \\- org.scala-lang.modules:scala-xml_2.11:jar:1.0.6:compile\r\n    [INFO] |  +- org.glassfish.jersey.core:jersey-client:jar:2.27:compile\r\n    [INFO] |  |  \\- org.glassfish.hk2.external:javax.inject:jar:2.5.0-b42:compile\r\n    [INFO] |  +- org.glassfish.jersey.core:jersey-common:jar:2.27:compile\r\n    [INFO] |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.1:compile\r\n    [INFO] |  +- org.glassfish.jersey.core:jersey-server:jar:2.27:compile\r\n    [INFO] |  |  \\- org.glassfish.jersey.media:jersey-media-jaxb:jar:2.27:compile\r\n    [INFO] |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:2.27:compile\r\n    [INFO] |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:2.27:compile\r\n    [INFO] |  +- com.clearspring.analytics:stream:jar:2.7.0:compile\r\n    [INFO] |  +- io.dropwizard.metrics:metrics-core:jar:3.2.2:compile\r\n    [INFO] |  +- io.dropwizard.metrics:metrics-jvm:jar:4.0.7:compile\r\n    [INFO] |  +- io.dropwizard.metrics:metrics-json:jar:4.0.7:compile\r\n    [INFO] |  +- io.dropwizard.metrics:metrics-graphite:jar:4.0.7:compile\r\n    [INFO] |  |  \\- com.rabbitmq:amqp-client:jar:5.4.3:compile\r\n    [INFO] |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.10.4:compile\r\n    [INFO] |  +- com.fasterxml.jackson.module:jackson-module-scala_2.11:jar:2.9.10:compile\r\n    [INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-paranamer:jar:2.9.10:compile\r\n    [INFO] |  +- org.apache.ivy:ivy:jar:2.4.0:compile\r\n    [INFO] |  +- oro:oro:jar:2.0.8:compile\r\n    [INFO] |  +- net.razorvine:pyrolite:jar:4.13:compile\r\n    [INFO] |  +- net.sf.py4j:py4j:jar:0.10.7:compile\r\n    [INFO] |  \\- org.apache.commons:commons-crypto:jar:1.0.0:compile\r\n    [INFO] +- org.apache.spark:spark-network-common_2.11:jar:2.4.6:compile\r\n    [INFO] |  +- org.fusesource.leveldbjni:leveldbjni-all:jar:1.8:compile\r\n    [INFO] |  \\- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.10:compile\r\n    [INFO] +- commons-codec:commons-codec:jar:1.13:compile\r\n    [INFO] +- org.apache.logging.log4j:log4j-1.2-api:jar:2.17.1:compile\r\n    [INFO] +- commons-lang:commons-lang:jar:2.6:compile\r\n    [INFO] +- com.datastax.spark:spark-cassandra-connector-unshaded_2.11:jar:2.4.0:compile\r\n    [INFO] |  +- org.joda:joda-convert:jar:1.2:compile\r\n    [INFO] |  +- joda-time:joda-time:jar:2.10.6:compile\r\n    [INFO] |  +- io.netty:netty-all:jar:4.1.50.Final:compile\r\n    [INFO] |  +- com.twitter:jsr166e:jar:1.1.0:compile\r\n    [INFO] |  \\- org.scala-lang:scala-reflect:jar:2.11.12:compile\r\n    [INFO] +- org.cassandraunit:cassandra-unit:jar:3.1.1.0:test\r\n    [INFO] |  +- org.apache.cassandra:cassandra-all:jar:3.9:test\r\n    [INFO] |  |  +- net.jpountz.lz4:lz4:jar:1.3.0:test\r\n    [INFO] |  |  +- commons-cli:commons-cli:jar:1.1:compile\r\n    [INFO] |  |  +- com.googlecode.concurrentlinkedhashmap:concurrentlinkedhashmap-lru:jar:1.4:test\r\n    [INFO] |  |  +- org.antlr:antlr:jar:3.5.2:test\r\n    [INFO] |  |  |  \\- org.antlr:ST4:jar:4.0.8:test\r\n    [INFO] |  |  +- org.antlr:antlr-runtime:jar:3.5.2:test\r\n    [INFO] |  |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.2:test\r\n    [INFO] |  |  +- com.googlecode.json-simple:json-simple:jar:1.1:test\r\n    [INFO] |  |  +- com.boundary:high-scale-lib:jar:1.0.6:test\r\n    [INFO] |  |  +- org.mindrot:jbcrypt:jar:0.3m:test\r\n    [INFO] |  |  +- com.addthis.metrics:reporter-config3:jar:3.0.0:test\r\n    [INFO] |  |  |  \\- com.addthis.metrics:reporter-config-base:jar:3.0.0:test\r\n    [INFO] |  |  +- com.thinkaurelius.thrift:thrift-server:jar:0.3.7:test\r\n    [INFO] |  |  |  \\- com.lmax:disruptor:jar:3.0.1:test\r\n    [INFO] |  |  +- org.apache.thrift:libthrift:jar:0.9.2:test\r\n    [INFO] |  |  +- org.apache.cassandra:cassandra-thrift:jar:3.9:test\r\n    [INFO] |  |  |  +- de.jflex:jflex:jar:1.6.0:test\r\n    [INFO] |  |  |  |  \\- org.apache.ant:ant:jar:1.7.0:test\r\n    [INFO] |  |  |  |     \\- org.apache.ant:ant-launcher:jar:1.7.0:test\r\n    [INFO] |  |  |  +- net.mintern:primitive:jar:1.0:test\r\n    [INFO] |  |  |  +- com.github.rholder:snowball-stemmer:jar:1.3.0.581.1:test\r\n    [INFO] |  |  |  \\- com.googlecode.concurrent-trees:concurrent-trees:jar:2.4.0:test\r\n    [INFO] |  |  +- net.java.dev.jna:jna:jar:4.5.2:test\r\n    [INFO] |  |  +- com.github.jbellis:jamm:jar:0.3.0:test\r\n    [INFO] |  |  +- org.fusesource:sigar:jar:1.6.4:test\r\n    [INFO] |  |  +- org.eclipse.jdt.core.compiler:ecj:jar:4.4.2:test\r\n    [INFO] |  |  +- org.caffinitas.ohc:ohc-core:jar:0.4.3:test\r\n    [INFO] |  |  \\- com.github.ben-manes.caffeine:caffeine:jar:2.6.2:test\r\n    [INFO] |  \\- com.google.guava:guava:jar:18.0:compile\r\n    [INFO] +- io.netty:netty:jar:3.10.6.Final:compile\r\n    [INFO] +- org.apache.hadoop:hadoop-client:jar:3.3.2:compile\r\n    [INFO] |  +- org.apache.hadoop:hadoop-common:jar:3.3.2:compile\r\n    [INFO] |  |  +- org.apache.hadoop.thirdparty:hadoop-shaded-protobuf_3_7:jar:1.1.1:compile\r\n    [INFO] |  |  +- org.apache.hadoop.thirdparty:hadoop-shaded-guava:jar:1.1.1:compile\r\n    [INFO] |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.12:compile\r\n    [INFO] |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.13:compile\r\n    [INFO] |  |  +- commons-io:commons-io:jar:2.8.0:compile\r\n    [INFO] |  |  +- commons-collections:commons-collections:jar:3.2.2:compile\r\n    [INFO] |  |  +- jakarta.activation:jakarta.activation-api:jar:1.2.1:runtime\r\n    [INFO] |  |  +- javax.servlet.jsp:jsp-api:jar:2.1:runtime\r\n    [INFO] |  |  +- com.sun.jersey:jersey-servlet:jar:1.19:compile\r\n    [INFO] |  |  +- commons-beanutils:commons-beanutils:jar:1.9.4:compile\r\n    [INFO] |  |  +- org.apache.commons:commons-configuration2:jar:2.1.1:compile\r\n    [INFO] |  |  +- org.apache.commons:commons-text:jar:1.4:compile\r\n    [INFO] |  |  +- com.google.re2j:re2j:jar:1.1:compile\r\n    [INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.5.0:compile\r\n    [INFO] |  |  +- com.google.code.gson:gson:jar:2.8.6:compile\r\n    [INFO] |  |  +- org.apache.hadoop:hadoop-auth:jar:3.3.2:compile\r\n    [INFO] |  |  |  +- com.nimbusds:nimbus-jose-jwt:jar:9.8.1:compile\r\n    [INFO] |  |  |  |  \\- com.github.stephenc.jcip:jcip-annotations:jar:1.0-1:compile\r\n    [INFO] |  |  |  \\- org.apache.kerby:kerb-simplekdc:jar:1.0.1:compile\r\n    [INFO] |  |  |     +- org.apache.kerby:kerb-client:jar:1.0.1:compile\r\n    [INFO] |  |  |     |  +- org.apache.kerby:kerby-config:jar:1.0.1:compile\r\n    [INFO] |  |  |     |  +- org.apache.kerby:kerb-common:jar:1.0.1:compile\r\n    [INFO] |  |  |     |  |  \\- org.apache.kerby:kerb-crypto:jar:1.0.1:compile\r\n    [INFO] |  |  |     |  +- org.apache.kerby:kerb-util:jar:1.0.1:compile\r\n    [INFO] |  |  |     |  \\- org.apache.kerby:token-provider:jar:1.0.1:compile\r\n    [INFO] |  |  |     \\- org.apache.kerby:kerb-admin:jar:1.0.1:compile\r\n    [INFO] |  |  |        +- org.apache.kerby:kerb-server:jar:1.0.1:compile\r\n    [INFO] |  |  |        |  \\- org.apache.kerby:kerb-identity:jar:1.0.1:compile\r\n    [INFO] |  |  |        \\- org.apache.kerby:kerby-xdr:jar:1.0.1:compile\r\n    [INFO] |  |  +- org.apache.curator:curator-client:jar:4.2.0:compile\r\n    [INFO] |  |  +- org.apache.commons:commons-compress:jar:1.21:compile\r\n    [INFO] |  |  +- org.apache.kerby:kerb-core:jar:1.0.1:compile\r\n    [INFO] |  |  |  \\- org.apache.kerby:kerby-pkix:jar:1.0.1:compile\r\n    [INFO] |  |  |     +- org.apache.kerby:kerby-asn1:jar:1.0.1:compile\r\n    [INFO] |  |  |     \\- org.apache.kerby:kerby-util:jar:1.0.1:compile\r\n    [INFO] |  |  +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\r\n    [INFO] |  |  +- com.fasterxml.woodstox:woodstox-core:jar:5.0.3:compile\r\n    [INFO] |  |  \\- dnsjava:dnsjava:jar:2.1.7:compile\r\n    [INFO] |  +- org.apache.hadoop:hadoop-hdfs-client:jar:3.3.2:compile\r\n    [INFO] |  |  \\- com.squareup.okhttp:okhttp:jar:2.7.5:compile\r\n    [INFO] |  |     \\- com.squareup.okio:okio:jar:1.6.0:compile\r\n    [INFO] |  +- org.apache.hadoop:hadoop-yarn-api:jar:3.3.2:compile\r\n    [INFO] |  +- org.apache.hadoop:hadoop-yarn-client:jar:3.3.2:compile\r\n    [INFO] |  |  \\- org.jline:jline:jar:3.9.0:compile\r\n    [INFO] |  \\- org.apache.hadoop:hadoop-annotations:jar:3.3.2:compile\r\n    [INFO] \\- commons-configuration:commons-configuration:jar:1.10:compile\r\n    [INFO]    \\- commons-logging:commons-logging:jar:1.1.1:compile\r\n    [INFO] --------------------------------------------------------------------\r\n\r\nhow do I resolve snakeyaml error?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to fix java.lang.NoSuchMethodError: org.yaml.snakeyaml.Yaml.&lt;init&gt;(Lorg/yaml/snakeyaml/constructor/BaseConstructor?","body":"<p>I have a spark spring-boot application and upgrading spring boot from 1.X to 2.1.5.Now with spring-boot 2.1.15 upgrade , I am getting snakeyaml error in application startup as:</p>\n<pre><code>ERROR SpringApplication - Application run failed\njava.lang.NoSuchMethodError: org.yaml.snakeyaml.Yaml.&lt;init&gt;(Lorg/yaml/snakeyaml/constructor/BaseConstructor;Lorg/yaml/snakeyaml/representer/Representer;Lorg/yaml/snakeyaml/DumperOptions;Lorg/yaml/snakeyaml/LoaderOptions;Lorg/yaml/snakeyaml/resolver/Resolver;)V\n        at org.springframework.boot.env.OriginTrackedYamlLoader.createYaml(OriginTrackedYamlLoader.java:71)\n        at org.springframework.beans.factory.config.YamlProcessor.process(YamlProcessor.java:162)\n        at org.springframework.boot.env.OriginTrackedYamlLoader.load(OriginTrackedYamlLoader.java:76)\n        at org.springframework.boot.env.YamlPropertySourceLoader.load(YamlPropertySourceLoader.java:50)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.loadDocuments(ConfigFileApplicationListener.java:544)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:499)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.loadForFileExtension(ConfigFileApplicationListener.java:475)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:445)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.lambda$null$6(ConfigFileApplicationListener.java:427)\n        at java.lang.Iterable.forEach(Iterable.java:75)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.lambda$load$7(ConfigFileApplicationListener.java:427)\n        at java.lang.Iterable.forEach(Iterable.java:75)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:424)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener$Loader.load(ConfigFileApplicationListener.java:323)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener.addPropertySources(ConfigFileApplicationListener.java:204)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener.postProcessEnvironment(ConfigFileApplicationListener.java:188)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEnvironmentPreparedEvent(ConfigFileApplicationListener.java:178)\n        at org.springframework.boot.context.config.ConfigFileApplicationListener.onApplicationEvent(ConfigFileApplicationListener.java:166)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\n        at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:76)\n        at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\n        at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:342)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:305)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1204)\n        at com.capitalone.customercore.autolink.AutolinkApp.main(AutolinkApp.java:17)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\n        at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:845)\n        at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:161)\n        at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:184)\n        at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:86)\n        at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:920)\n        at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:929)\n        at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\n</code></pre>\n<p>I did check the snakeyaml in dependency:tree and see org.yaml:snakeyaml:jar:1.23:compile\nMy dependency:tree is :</p>\n<pre><code>com.test.customercore:autolink-utility:jar:0.30-SNAPSHOT\n[INFO] +- org.springframework.boot:spring-boot-starter:jar:2.1.15.RELEASE:compile\n[INFO] |  +- org.springframework.boot:spring-boot:jar:2.1.15.RELEASE:compile\n[INFO] |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.1.15.RELEASE:compile\n[INFO] |  +- javax.annotation:javax.annotation-api:jar:1.3.2:compile\n[INFO] |  +- org.springframework:spring-core:jar:5.1.16.RELEASE:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:5.1.16.RELEASE:compile\n[INFO] |  \\- org.yaml:snakeyaml:jar:1.23:compile\n[INFO] +- org.springframework:spring-expression:jar:5.3.17:compile\n[INFO] [INFO] |  +- com.amazonaws:aws-java-sdk-kinesisvideo:jar:1.11.511:compile\n[INFO] |  |  \\- io.netty:netty-handler:jar:4.1.50.Final:compile\n[INFO] |  |     +- io.netty:netty-common:jar:4.1.50.Final:compile\n[INFO] |  |     +- io.netty:netty-resolver:jar:4.1.50.Final:compile\n[INFO] |  |     +- io.netty:netty-buffer:jar:4.1.50.Final:compile\n[INFO] |  |     +- io.netty:netty-transport:jar:4.1.50.Final:compile\n[INFO] |  |     \\- io.netty:netty-codec:jar:4.1.50.Final:compile\n[INFO] |  [INFO] +- org.springframework.boot:spring-boot-starter-data-cassandra:jar:2.1.15.RELEASE:compile\n[INFO] |  \\- org.springframework:spring-tx:jar:5.1.16.RELEASE:compile\n[INFO] +- org.springframework.data:spring-data-cassandra:jar:2.1.18.RELEASE:compile\n[INFO] |  +- org.springframework:spring-context:jar:5.1.16.RELEASE:compile\n[INFO] |  |  \\- org.springframework:spring-aop:jar:5.1.16.RELEASE:compile\n[INFO] |  +- org.springframework:spring-beans:jar:5.1.16.RELEASE:compile\n[INFO] |  +- org.springframework.data:spring-data-commons:jar:2.1.18.RELEASE:compile\n[INFO] |  +- com.datastax.cassandra:cassandra-driver-core:jar:3.6.0:compile\n[INFO] |  |  +- com.github.jnr:jnr-ffi:jar:2.1.7:compile\n[INFO] |  |  |  +- com.github.jnr:jffi:jar:1.2.16:compile\n[INFO] |  |  |  +- com.github.jnr:jffi:jar:native:1.2.16:runtime\n[INFO] |  |  |  +- org.ow2.asm:asm:jar:5.0.3:compile\n[INFO] |  |  |  +- org.ow2.asm:asm-commons:jar:5.0.3:compile\n[INFO] |  |  |  +- org.ow2.asm:asm-analysis:jar:5.0.3:compile\n[INFO] |  |  |  +- org.ow2.asm:asm-tree:jar:5.0.3:compile\n[INFO] |  |  |  +- org.ow2.asm:asm-util:jar:5.0.3:compile\n[INFO] |  |  |  \\- com.github.jnr:jnr-x86asm:jar:1.0.2:compile\n[INFO] |  |  \\- com.github.jnr:jnr-posix:jar:3.0.44:compile\n[INFO] |  |     \\- com.github.jnr:jnr-constants:jar:0.9.9:compile\n[INFO] |  \\- org.slf4j:slf4j-api:jar:1.7.30:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.1.15.RELEASE:test\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.1.15.RELEASE:test\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.1.15.RELEASE:test\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.4.0:test\n[INFO] |  |  \\- net.minidev:json-smart:jar:2.3:compile\n[INFO] |  |     \\- net.minidev:accessors-smart:jar:1.2:compile\n[INFO] |  +- junit:junit:jar:4.12:test\n[INFO] |  +- org.assertj:assertj-core:jar:3.11.1:test\n[INFO] |  +- org.mockito:mockito-core:jar:2.23.4:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.9.16:compile\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.9.16:test\n[INFO] |  |  \\- org.objenesis:objenesis:jar:2.6:compile\n[INFO] |  +- org.hamcrest:hamcrest-core:jar:1.3:test\n[INFO] |  +- org.hamcrest:hamcrest-library:jar:1.3:test\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.0:test\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\n[INFO] |  +- org.springframework:spring-test:jar:5.1.16.RELEASE:test\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.6.4:test\n[INFO] +- org.springframework.boot:spring-boot-starter-log4j:jar:1.3.8.RELEASE:compile\n[INFO] |  +- org.slf4j:jcl-over-slf4j:jar:1.7.30:compile\n[INFO] |  +- org.slf4j:jul-to-slf4j:jar:1.7.30:compile\n[INFO] |  \\- org.slf4j:slf4j-log4j12:jar:1.7.30:compile\n[INFO] +- org.apache.logging.log4j:log4j-api:jar:2.17.1:compile\n[INFO] +- com.test.api.customers:customers-relations-common:jar:1.1.28-RELEASE:compile\n[INFO] |  +- javax.inject:javax.inject:jar:1:compile\n[INFO] |  +- org.apache.commons:commons-lang3:jar:3.8.1:compile\n[INFO] |  +- org.apache.commons:commons-collections4:jar:4.1:compile\n[INFO] |  +- com.test.chassis.model:chassis-business-model:jar:3.1.1.RELEASE:compile\n[INFO] |  |  +- com.test.chassis:chassis-annotations:jar:3.1.1.RELEASE:compile\n[INFO] |  |  +- io.swagger:swagger-annotations:jar:1.5.21:compile\n[INFO] |  |  +- javax.xml.bind:jaxb-api:jar:2.3.1:compile\n[INFO] |  |  |  \\- javax.activation:javax.activation-api:jar:1.2.0:compile\n[INFO] |  |  +- org.jooq:jool-java-8:jar:0.9.13:compile\n[INFO] |  |  +- com.sun.xml.bind:jaxb-core:jar:2.3.0:compile\n[INFO] |  |  \\- com.sun.xml.bind:jaxb-impl:jar:2.3.0:compile\n[INFO] |  +- com.test.chassis.engine:chassis-model:jar:3.1.1.RELEASE:compile\n[INFO] |  |  +- javax.ws.rs:javax.ws.rs-api:jar:2.1:compile\n[INFO] |  |  +- javax.validation:validation-api:jar:2.0.1.Final:compile\n[INFO] |  |  +- javax.el:javax.el-api:jar:3.0.0:compile\n[INFO] |  |  \\- org.glassfish.web:el-impl:jar:2.2:compile\n[INFO] |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.9.10:compile\n[INFO] |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.9.10:compile\n[INFO] |  +- org.hamcrest:java-hamcrest:jar:2.0.0.0:compile\n[INFO] |  +- redis.clients:jedis:jar:2.9.3:compile\n[INFO] |  |  \\- org.apache.commons:commons-pool2:jar:2.6.2:compile\n[INFO] |  \\- org.springframework.data:spring-data-redis:jar:2.1.18.RELEASE:compile\n[INFO] |     +- org.springframework.data:spring-data-keyvalue:jar:2.1.18.RELEASE:compile\n[INFO] |     +- org.springframework:spring-oxm:jar:5.1.16.RELEASE:compile\n[INFO] |     \\- org.springframework:spring-context-support:jar:5.1.16.RELEASE:compile\n[INFO] +- org.hibernate.validator:hibernate-validator:jar:6.1.5.Final:compile\n[INFO] |  +- jakarta.validation:jakarta.validation-api:jar:2.0.2:compile\n[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.3.3.Final:compile\n[INFO] |  \\- com.fasterxml:classmate:jar:1.4.0:compile\n[INFO] +- org.apache.spark:spark-sql_2.11:jar:2.4.0:compile\n[INFO] |  +- com.univocity:univocity-parsers:jar:2.7.3:compile\n[INFO] |  +- org.apache.spark:spark-sketch_2.11:jar:2.4.0:compile\n[INFO] |  +- org.apache.spark:spark-catalyst_2.11:jar:2.4.0:compile\n[INFO] |  |  +- org.scala-lang.modules:scala-parser-combinators_2.11:jar:1.1.0:compile\n[INFO] |  |  +- org.codehaus.janino:janino:jar:3.0.16:compile\n[INFO] |  |  +- org.codehaus.janino:commons-compiler:jar:3.0.16:compile\n[INFO] |  |  \\- org.antlr:antlr4-runtime:jar:4.7:compile\n[INFO] |  +- org.apache.spark:spark-tags_2.11:jar:2.4.0:compile\n[INFO] |  +- org.apache.orc:orc-core:jar:nohive:1.5.2:compile\n[INFO] |  |  +- org.apache.orc:orc-shims:jar:1.5.2:compile\n[INFO] |  |  \\- io.airlift:aircompressor:jar:0.10:compile\n[INFO] |  +- org.apache.orc:orc-mapreduce:jar:nohive:1.5.2:compile\n[INFO] |  +- org.apache.parquet:parquet-column:jar:1.10.0:compile\n[INFO] |  |  +- org.apache.parquet:parquet-common:jar:1.10.0:compile\n[INFO] |  |  \\- org.apache.parquet:parquet-encoding:jar:1.10.0:compile\n[INFO] |  +- org.apache.parquet:parquet-hadoop:jar:1.10.0:compile\n[INFO] |  |  +- org.apache.parquet:parquet-format:jar:2.4.0:compile\n[INFO] |  |  +- org.apache.parquet:parquet-jackson:jar:1.10.0:compile\n[INFO] |  |  \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile\n[INFO] |  +- org.apache.arrow:arrow-vector:jar:0.10.0:compile\n[INFO] |  |  +- org.apache.arrow:arrow-format:jar:0.10.0:compile\n[INFO] |  |  +- org.apache.arrow:arrow-memory:jar:0.10.0:compile\n[INFO] |  |  +- com.carrotsearch:hppc:jar:0.7.2:compile\n[INFO] |  |  \\- com.vlkan:flatbuffers:jar:1.2.0-3f79e055:compile\n[INFO] |  +- org.apache.xbean:xbean-asm6-shaded:jar:4.8:compile\n[INFO] |  \\- org.spark-project.spark:unused:jar:1.0.0:compile\n[INFO] +- org.apache.spark:spark-core_2.11:jar:2.4.1:compile\n[INFO] |  +- com.thoughtworks.paranamer:paranamer:jar:2.8:compile\n[INFO] |  +- org.apache.avro:avro:jar:1.8.2:compile\n[INFO] |  |  \\- org.tukaani:xz:jar:1.5:compile\n[INFO] |  +- org.apache.avro:avro-mapred:jar:hadoop2:1.8.2:compile\n[INFO] |  |  \\- org.apache.avro:avro-ipc:jar:1.8.2:compile\n[INFO] |  +- com.twitter:chill_2.11:jar:0.9.3:compile\n[INFO] |  |  \\- com.esotericsoftware:kryo-shaded:jar:4.0.2:compile\n[INFO] |  |     \\- com.esotericsoftware:minlog:jar:1.3.0:compile\n[INFO] |  +- com.twitter:chill-java:jar:0.9.3:compile\n[INFO] |  +- org.apache.spark:spark-launcher_2.11:jar:2.4.1:compile\n[INFO] |  +- org.apache.spark:spark-kvstore_2.11:jar:2.4.1:compile\n[INFO] |  +- org.apache.spark:spark-network-shuffle_2.11:jar:2.4.1:compile\n[INFO] |  +- org.apache.spark:spark-unsafe_2.11:jar:2.4.1:compile\n[INFO] |  +- javax.activation:activation:jar:1.1.1:compile\n[INFO] |  +- org.apache.curator:curator-recipes:jar:2.6.0:compile\n[INFO] |  |  \\- org.apache.curator:curator-framework:jar:2.6.0:compile\n[INFO] |  +- org.apache.zookeeper:zookeeper:jar:3.4.6:compile\n[INFO] |  +- javax.servlet:javax.servlet-api:jar:4.0.1:compile\n[INFO] |  +- org.apache.commons:commons-math3:jar:3.4.1:compile\n[INFO] |  +- com.google.code.findbugs:jsr305:jar:1.3.9:compile\n[INFO] |  +- com.ning:compress-lzf:jar:1.0.3:compile\n[INFO] |  +- org.xerial.snappy:snappy-java:jar:1.1.7.1:compile\n[INFO] |  +- org.lz4:lz4-java:jar:1.4.0:compile\n[INFO] |  +- com.github.luben:zstd-jni:jar:1.3.2-2:compile\n[INFO] |  +- org.roaringbitmap:RoaringBitmap:jar:0.5.11:compile\n[INFO] |  +- commons-net:commons-net:jar:3.1:compile\n[INFO] |  +- org.scala-lang:scala-library:jar:2.11.12:compile\n[INFO] |  +- org.json4s:json4s-jackson_2.11:jar:3.5.3:compile\n[INFO] |  |  \\- org.json4s:json4s-core_2.11:jar:3.5.3:compile\n[INFO] |  |     +- org.json4s:json4s-ast_2.11:jar:3.5.3:compile\n[INFO] |  |     +- org.json4s:json4s-scalap_2.11:jar:3.5.3:compile\n[INFO] |  |     \\- org.scala-lang.modules:scala-xml_2.11:jar:1.0.6:compile\n[INFO] |  +- org.glassfish.jersey.core:jersey-client:jar:2.27:compile\n[INFO] |  |  \\- org.glassfish.hk2.external:javax.inject:jar:2.5.0-b42:compile\n[INFO] |  +- org.glassfish.jersey.core:jersey-common:jar:2.27:compile\n[INFO] |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.1:compile\n[INFO] |  +- org.glassfish.jersey.core:jersey-server:jar:2.27:compile\n[INFO] |  |  \\- org.glassfish.jersey.media:jersey-media-jaxb:jar:2.27:compile\n[INFO] |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:2.27:compile\n[INFO] |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:2.27:compile\n[INFO] |  +- com.clearspring.analytics:stream:jar:2.7.0:compile\n[INFO] |  +- io.dropwizard.metrics:metrics-core:jar:3.2.2:compile\n[INFO] |  +- io.dropwizard.metrics:metrics-jvm:jar:4.0.7:compile\n[INFO] |  +- io.dropwizard.metrics:metrics-json:jar:4.0.7:compile\n[INFO] |  +- io.dropwizard.metrics:metrics-graphite:jar:4.0.7:compile\n[INFO] |  |  \\- com.rabbitmq:amqp-client:jar:5.4.3:compile\n[INFO] |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.10.4:compile\n[INFO] |  +- com.fasterxml.jackson.module:jackson-module-scala_2.11:jar:2.9.10:compile\n[INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-paranamer:jar:2.9.10:compile\n[INFO] |  +- org.apache.ivy:ivy:jar:2.4.0:compile\n[INFO] |  +- oro:oro:jar:2.0.8:compile\n[INFO] |  +- net.razorvine:pyrolite:jar:4.13:compile\n[INFO] |  +- net.sf.py4j:py4j:jar:0.10.7:compile\n[INFO] |  \\- org.apache.commons:commons-crypto:jar:1.0.0:compile\n[INFO] +- org.apache.spark:spark-network-common_2.11:jar:2.4.6:compile\n[INFO] |  +- org.fusesource.leveldbjni:leveldbjni-all:jar:1.8:compile\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.10:compile\n[INFO] +- commons-codec:commons-codec:jar:1.13:compile\n[INFO] +- org.apache.logging.log4j:log4j-1.2-api:jar:2.17.1:compile\n[INFO] +- commons-lang:commons-lang:jar:2.6:compile\n[INFO] +- com.datastax.spark:spark-cassandra-connector-unshaded_2.11:jar:2.4.0:compile\n[INFO] |  +- org.joda:joda-convert:jar:1.2:compile\n[INFO] |  +- joda-time:joda-time:jar:2.10.6:compile\n[INFO] |  +- io.netty:netty-all:jar:4.1.50.Final:compile\n[INFO] |  +- com.twitter:jsr166e:jar:1.1.0:compile\n[INFO] |  \\- org.scala-lang:scala-reflect:jar:2.11.12:compile\n[INFO] +- org.cassandraunit:cassandra-unit:jar:3.1.1.0:test\n[INFO] |  +- org.apache.cassandra:cassandra-all:jar:3.9:test\n[INFO] |  |  +- net.jpountz.lz4:lz4:jar:1.3.0:test\n[INFO] |  |  +- commons-cli:commons-cli:jar:1.1:compile\n[INFO] |  |  +- com.googlecode.concurrentlinkedhashmap:concurrentlinkedhashmap-lru:jar:1.4:test\n[INFO] |  |  +- org.antlr:antlr:jar:3.5.2:test\n[INFO] |  |  |  \\- org.antlr:ST4:jar:4.0.8:test\n[INFO] |  |  +- org.antlr:antlr-runtime:jar:3.5.2:test\n[INFO] |  |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.2:test\n[INFO] |  |  +- com.googlecode.json-simple:json-simple:jar:1.1:test\n[INFO] |  |  +- com.boundary:high-scale-lib:jar:1.0.6:test\n[INFO] |  |  +- org.mindrot:jbcrypt:jar:0.3m:test\n[INFO] |  |  +- com.addthis.metrics:reporter-config3:jar:3.0.0:test\n[INFO] |  |  |  \\- com.addthis.metrics:reporter-config-base:jar:3.0.0:test\n[INFO] |  |  +- com.thinkaurelius.thrift:thrift-server:jar:0.3.7:test\n[INFO] |  |  |  \\- com.lmax:disruptor:jar:3.0.1:test\n[INFO] |  |  +- org.apache.thrift:libthrift:jar:0.9.2:test\n[INFO] |  |  +- org.apache.cassandra:cassandra-thrift:jar:3.9:test\n[INFO] |  |  |  +- de.jflex:jflex:jar:1.6.0:test\n[INFO] |  |  |  |  \\- org.apache.ant:ant:jar:1.7.0:test\n[INFO] |  |  |  |     \\- org.apache.ant:ant-launcher:jar:1.7.0:test\n[INFO] |  |  |  +- net.mintern:primitive:jar:1.0:test\n[INFO] |  |  |  +- com.github.rholder:snowball-stemmer:jar:1.3.0.581.1:test\n[INFO] |  |  |  \\- com.googlecode.concurrent-trees:concurrent-trees:jar:2.4.0:test\n[INFO] |  |  +- net.java.dev.jna:jna:jar:4.5.2:test\n[INFO] |  |  +- com.github.jbellis:jamm:jar:0.3.0:test\n[INFO] |  |  +- org.fusesource:sigar:jar:1.6.4:test\n[INFO] |  |  +- org.eclipse.jdt.core.compiler:ecj:jar:4.4.2:test\n[INFO] |  |  +- org.caffinitas.ohc:ohc-core:jar:0.4.3:test\n[INFO] |  |  \\- com.github.ben-manes.caffeine:caffeine:jar:2.6.2:test\n[INFO] |  \\- com.google.guava:guava:jar:18.0:compile\n[INFO] +- io.netty:netty:jar:3.10.6.Final:compile\n[INFO] +- org.apache.hadoop:hadoop-client:jar:3.3.2:compile\n[INFO] |  +- org.apache.hadoop:hadoop-common:jar:3.3.2:compile\n[INFO] |  |  +- org.apache.hadoop.thirdparty:hadoop-shaded-protobuf_3_7:jar:1.1.1:compile\n[INFO] |  |  +- org.apache.hadoop.thirdparty:hadoop-shaded-guava:jar:1.1.1:compile\n[INFO] |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.12:compile\n[INFO] |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.13:compile\n[INFO] |  |  +- commons-io:commons-io:jar:2.8.0:compile\n[INFO] |  |  +- commons-collections:commons-collections:jar:3.2.2:compile\n[INFO] |  |  +- jakarta.activation:jakarta.activation-api:jar:1.2.1:runtime\n[INFO] |  |  +- javax.servlet.jsp:jsp-api:jar:2.1:runtime\n[INFO] |  |  +- com.sun.jersey:jersey-servlet:jar:1.19:compile\n[INFO] |  |  +- commons-beanutils:commons-beanutils:jar:1.9.4:compile\n[INFO] |  |  +- org.apache.commons:commons-configuration2:jar:2.1.1:compile\n[INFO] |  |  +- org.apache.commons:commons-text:jar:1.4:compile\n[INFO] |  |  +- com.google.re2j:re2j:jar:1.1:compile\n[INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.5.0:compile\n[INFO] |  |  +- com.google.code.gson:gson:jar:2.8.6:compile\n[INFO] |  |  +- org.apache.hadoop:hadoop-auth:jar:3.3.2:compile\n[INFO] |  |  |  +- com.nimbusds:nimbus-jose-jwt:jar:9.8.1:compile\n[INFO] |  |  |  |  \\- com.github.stephenc.jcip:jcip-annotations:jar:1.0-1:compile\n[INFO] |  |  |  \\- org.apache.kerby:kerb-simplekdc:jar:1.0.1:compile\n[INFO] |  |  |     +- org.apache.kerby:kerb-client:jar:1.0.1:compile\n[INFO] |  |  |     |  +- org.apache.kerby:kerby-config:jar:1.0.1:compile\n[INFO] |  |  |     |  +- org.apache.kerby:kerb-common:jar:1.0.1:compile\n[INFO] |  |  |     |  |  \\- org.apache.kerby:kerb-crypto:jar:1.0.1:compile\n[INFO] |  |  |     |  +- org.apache.kerby:kerb-util:jar:1.0.1:compile\n[INFO] |  |  |     |  \\- org.apache.kerby:token-provider:jar:1.0.1:compile\n[INFO] |  |  |     \\- org.apache.kerby:kerb-admin:jar:1.0.1:compile\n[INFO] |  |  |        +- org.apache.kerby:kerb-server:jar:1.0.1:compile\n[INFO] |  |  |        |  \\- org.apache.kerby:kerb-identity:jar:1.0.1:compile\n[INFO] |  |  |        \\- org.apache.kerby:kerby-xdr:jar:1.0.1:compile\n[INFO] |  |  +- org.apache.curator:curator-client:jar:4.2.0:compile\n[INFO] |  |  +- org.apache.commons:commons-compress:jar:1.21:compile\n[INFO] |  |  +- org.apache.kerby:kerb-core:jar:1.0.1:compile\n[INFO] |  |  |  \\- org.apache.kerby:kerby-pkix:jar:1.0.1:compile\n[INFO] |  |  |     +- org.apache.kerby:kerby-asn1:jar:1.0.1:compile\n[INFO] |  |  |     \\- org.apache.kerby:kerby-util:jar:1.0.1:compile\n[INFO] |  |  +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\n[INFO] |  |  +- com.fasterxml.woodstox:woodstox-core:jar:5.0.3:compile\n[INFO] |  |  \\- dnsjava:dnsjava:jar:2.1.7:compile\n[INFO] |  +- org.apache.hadoop:hadoop-hdfs-client:jar:3.3.2:compile\n[INFO] |  |  \\- com.squareup.okhttp:okhttp:jar:2.7.5:compile\n[INFO] |  |     \\- com.squareup.okio:okio:jar:1.6.0:compile\n[INFO] |  +- org.apache.hadoop:hadoop-yarn-api:jar:3.3.2:compile\n[INFO] |  +- org.apache.hadoop:hadoop-yarn-client:jar:3.3.2:compile\n[INFO] |  |  \\- org.jline:jline:jar:3.9.0:compile\n[INFO] |  \\- org.apache.hadoop:hadoop-annotations:jar:3.3.2:compile\n[INFO] \\- commons-configuration:commons-configuration:jar:1.10:compile\n[INFO]    \\- commons-logging:commons-logging:jar:1.1.1:compile\n[INFO] --------------------------------------------------------------------\n</code></pre>\n<p>how do I resolve snakeyaml error?</p>\n"},{"tags":["java","amazon-web-services","soap","amazon-product-api"],"answers":[{"tags":[],"owner":{"account_id":5648625,"reputation":338,"user_id":4469947,"display_name":"Earlee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475848009,"creation_date":1475835164,"answer_id":39914789,"question_id":35152480,"body_markdown":"I also encounter 503 errors, but when I repeat the request, it may be successful. Try this:\r\n\r\n    int retries = 0;\r\n    while (retries &lt; 3){\r\n\r\n        Thread.sleep(1500 * retries);\r\n\t\t\r\n\t\ttry{\r\n\t\t\tresponse = port.itemLookup(itemLookup);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcatch(Exception ex){ }\r\n        retries++;\r\n    }\r\n\r\nHope this helps.","title":"Amazon Product Advertising API - 503 error on batched itemLookup using Java/SOAP","body":"<p>I also encounter 503 errors, but when I repeat the request, it may be successful. Try this:</p>\n\n<pre><code>int retries = 0;\nwhile (retries &lt; 3){\n\n    Thread.sleep(1500 * retries);\n\n    try{\n        response = port.itemLookup(itemLookup);\n        break;\n    }\n    catch(Exception ex){ }\n    retries++;\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":4939819,"reputation":11,"user_id":3976883,"display_name":"specialdrunkard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":999,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677590742,"creation_date":1454413302,"question_id":35152480,"body_markdown":"I have a problem with a bulk itemlookup\r\n\r\n**com.sun.xml.internal.ws.client.ClientTransportException:**\r\n\r\n&gt;        com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 503: Service Unavailable\r\ncom.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 503: Service Unavailable\r\n        at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.checkStatusCode(HttpTransportPipe.java:296)\r\n        at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:245)\r\n        at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:203)\r\n        at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)\r\n        at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:95)\r\n        at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)\r\n        at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)\r\n        at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)\r\n        at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)\r\n        at com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)\r\n        at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)\r\n        at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)\r\n        at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)\r\n        at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)\r\n        at $Proxy29.itemLookup(Unknown Source)\r\n\r\n\r\n**This itemLookup is made with the following request:**\r\n\r\n        List&lt;String&gt; resGroup = new ArrayList&lt;String&gt;();\r\n        resGroup.add(&quot;Offers&quot;);\r\n        resGroup.add(&quot;Images&quot;);\r\n        resGroup.add(&quot;ItemAttributes&quot;);\r\n        resGroup.add(&quot;ItemIds&quot;);\r\n\r\n        ItemLookupRequest request = new ItemLookupRequest();\r\n        request.getItemId().addAll(asins);  //asins is an ArrayList&lt;String&gt; of 10 asins\r\n        request.setMerchantId(merchant);\r\n        request.setCondition(condition);\r\n        request.getResponseGroup().addAll(resGroup);\r\n\r\n        ItemLookup itemLookup = new ItemLookup();\r\n\r\n        itemLookup.setAWSAccessKeyId(AWS_ACCESS_KEY);\r\n        itemLookup.setAssociateTag(ASSOC_TAGS.get(&quot;en-GB&quot;));\r\n        itemLookup.getRequest().add(request);\r\n\r\n        response = port.itemLookup(itemLookup);   **&lt;-- This line throws the Exception**\r\n\r\nThis code has worked for 3 years, looking up around 26,000 items in batches of 10 once every 24 hours with no problems, but on the following dates has returned the 503 for every single lookup made that day.\r\n\r\n05.04.2015,\r\n06.04.2015\r\n\r\n26.04.2015\r\n\r\n05.08.2015\r\n\r\n25.12.2015,\r\n26.12.2015\r\n\r\n25.01.2016 to 02.02.2016 inclusive\r\n\r\nThe only suggestion in Amazon Product Advertising API documentation is that the 503 is caused by throttling, with the advice to reduce the number of requests sent per second. Throttling should not be an issue on every single lookup. If it was due to throttling the lookups would at first be successful and only return the 503 after the hourly quota has been reached. This is not the case, on the given dates there have been zero successful lookups with the service resuming as normal at all other times.","title":"Amazon Product Advertising API - 503 error on batched itemLookup using Java/SOAP","body":"<p>I have a problem with a bulk itemlookup</p>\n\n<p><strong>com.sun.xml.internal.ws.client.ClientTransportException:</strong></p>\n\n<blockquote>\n<pre><code>   com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 503: Service Unavailable\n</code></pre>\n  \n  <p>com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 503: Service Unavailable\n          at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.checkStatusCode(HttpTransportPipe.java:296)\n          at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:245)\n          at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:203)\n          at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)\n          at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:95)\n          at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)\n          at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)\n          at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)\n          at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)\n          at com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)\n          at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)\n          at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)\n          at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)\n          at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)\n          at $Proxy29.itemLookup(Unknown Source)</p>\n</blockquote>\n\n<p><strong>This itemLookup is made with the following request:</strong></p>\n\n<pre><code>    List&lt;String&gt; resGroup = new ArrayList&lt;String&gt;();\n    resGroup.add(\"Offers\");\n    resGroup.add(\"Images\");\n    resGroup.add(\"ItemAttributes\");\n    resGroup.add(\"ItemIds\");\n\n    ItemLookupRequest request = new ItemLookupRequest();\n    request.getItemId().addAll(asins);  //asins is an ArrayList&lt;String&gt; of 10 asins\n    request.setMerchantId(merchant);\n    request.setCondition(condition);\n    request.getResponseGroup().addAll(resGroup);\n\n    ItemLookup itemLookup = new ItemLookup();\n\n    itemLookup.setAWSAccessKeyId(AWS_ACCESS_KEY);\n    itemLookup.setAssociateTag(ASSOC_TAGS.get(\"en-GB\"));\n    itemLookup.getRequest().add(request);\n\n    response = port.itemLookup(itemLookup);   **&lt;-- This line throws the Exception**\n</code></pre>\n\n<p>This code has worked for 3 years, looking up around 26,000 items in batches of 10 once every 24 hours with no problems, but on the following dates has returned the 503 for every single lookup made that day.</p>\n\n<p>05.04.2015,\n06.04.2015</p>\n\n<p>26.04.2015</p>\n\n<p>05.08.2015</p>\n\n<p>25.12.2015,\n26.12.2015</p>\n\n<p>25.01.2016 to 02.02.2016 inclusive</p>\n\n<p>The only suggestion in Amazon Product Advertising API documentation is that the 503 is caused by throttling, with the advice to reduce the number of requests sent per second. Throttling should not be an issue on every single lookup. If it was due to throttling the lookups would at first be successful and only return the 503 after the hourly quota has been reached. This is not the case, on the given dates there have been zero successful lookups with the service resuming as normal at all other times.</p>\n"},{"tags":["java","shell","unit-testing","jenkins","jenkins-pipeline"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1677600064,"post_id":75588030,"comment_id":133368024,"body_markdown":"I&#39;d recommend you move your shell script to its own file, even if it&#39;s &quot;only&quot; one line. The extra quoting in the pipeline description is messy, and you cannot use your usual tools like an IDE and shellcheck on it when it&#39;s embedded here. That said, I&#39;d also first look for a tool that allows me to fail the build if coverage is under a certain threshold or has declined too much. You can&#39;t be the first one to want that feature.","body":"I&#39;d recommend you move your shell script to its own file, even if it&#39;s &quot;only&quot; one line. The extra quoting in the pipeline description is messy, and you cannot use your usual tools like an IDE and shellcheck on it when it&#39;s embedded here. That said, I&#39;d also first look for a tool that allows me to fail the build if coverage is under a certain threshold or has declined too much. You can&#39;t be the first one to want that feature."}],"answers":[{"tags":[],"owner":{"account_id":3047349,"reputation":43,"user_id":2582624,"display_name":"chiri4"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677590676,"creation_date":1677590676,"answer_id":75592699,"question_id":75588030,"body_markdown":"Seems to be a problem while parsing the Regex. Maybe you can try setting regex syntax isolated inside a variable and using it inside your script:\r\n\r\n```regexVal = /^.*&lt;td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/```\r\n\r\n*The leading and trailing slashed are needed if it contains variables to interpolate.*\r\n\r\n\r\nSo your script will be changed to something like this:\r\n\r\n```&#39;sed -nE &#39;s/${regexVal}/Missed instructions: \\2/p&#39; target/site/jacoco/index.html | tr -dc &#39;0-9.0-9&#39;&#39;```\r\n","title":"Unable to run Shell Script in Jenkins Pipeline","body":"<p>Seems to be a problem while parsing the Regex. Maybe you can try setting regex syntax isolated inside a variable and using it inside your script:</p>\n<p><code>regexVal = /^.*&lt;td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/</code></p>\n<p><em>The leading and trailing slashed are needed if it contains variables to interpolate.</em></p>\n<p>So your script will be changed to something like this:</p>\n<p><code>'sed -nE 's/${regexVal}/Missed instructions: \\2/p' target/site/jacoco/index.html | tr -dc '0-9.0-9''</code></p>\n"}],"owner":{"account_id":14386238,"reputation":1,"user_id":10392190,"display_name":"Prarabdh Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677590676,"creation_date":1677560453,"question_id":75588030,"body_markdown":"I am trying to add below step in my pipeline but getting this error `illegal string body character after dollar sign;\r\n   solution: either escape a literal dollar sign &quot;\\$5&quot; or bracket the value expression &quot;${5}&quot; @ line 33, column 75.\r\n   td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/Missed in`\r\n\r\nMy Script is:\r\n```\r\nstage(&#39;Test Coverage&#39;){\r\n            steps {\r\n                echo &quot;Running test&quot;\r\n                sh &quot;mvn test&quot;\r\n                script{\r\n                    TOTAL_COVERAGE_STR = sh (\r\n                    script: &quot;sed -nE &#39;s/^.*&lt;td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/Missed instructions: \\2/p&#39; target/site/jacoco/index.html | tr -dc &#39;0-9.0-9&#39;&quot;,\r\n                    returnStdout: true\r\n                    ).trim()\r\n                    THRESHOLD = 12.00\r\n                    Float TOTAL_COVERAGE = TOTAL_COVERAGE_STR as Float\r\n                    echo &quot;Total Coverage : ${TOTAL_COVERAGE}, Threshold: ${THRESHOLD}&quot;\r\n                    if (THRESHOLD &gt; TOTAL_COVERAGE) {\r\n                        error(&#39;Aborting the build, as The Test Coverage Is Not As Expected&#39;)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n```\r\n\r\n\r\nI tried capturing the script inside single quotes also like this \r\n```\r\n&#39;sed -nE &#39;s/^.*&lt;td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/Missed instructions: \\2/p&#39; target/site/jacoco/index.html | tr -dc &#39;0-9.0-9&#39;&#39;\r\n```\r\nin above case getting error: `unexpected token: s`","title":"Unable to run Shell Script in Jenkins Pipeline","body":"<p>I am trying to add below step in my pipeline but getting this error <code>illegal string body character after dollar sign; solution: either escape a literal dollar sign &quot;\\$5&quot; or bracket the value expression &quot;${5}&quot; @ line 33, column 75. td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/Missed in</code></p>\n<p>My Script is:</p>\n<pre><code>stage('Test Coverage'){\n            steps {\n                echo &quot;Running test&quot;\n                sh &quot;mvn test&quot;\n                script{\n                    TOTAL_COVERAGE_STR = sh (\n                    script: &quot;sed -nE 's/^.*&lt;td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/Missed instructions: \\2/p' target/site/jacoco/index.html | tr -dc '0-9.0-9'&quot;,\n                    returnStdout: true\n                    ).trim()\n                    THRESHOLD = 12.00\n                    Float TOTAL_COVERAGE = TOTAL_COVERAGE_STR as Float\n                    echo &quot;Total Coverage : ${TOTAL_COVERAGE}, Threshold: ${THRESHOLD}&quot;\n                    if (THRESHOLD &gt; TOTAL_COVERAGE) {\n                        error('Aborting the build, as The Test Coverage Is Not As Expected')\n                    }\n                }\n            }\n        }\n</code></pre>\n<p>I tried capturing the script inside single quotes also like this</p>\n<pre><code>'sed -nE 's/^.*&lt;td&gt;Total&lt;([^&gt;]+&gt;){4}([^&lt;]*).*$/Missed instructions: \\2/p' target/site/jacoco/index.html | tr -dc '0-9.0-9''\n</code></pre>\n<p>in above case getting error: <code>unexpected token: s</code></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2530619,"reputation":4812,"user_id":2199001,"accept_rate":100,"display_name":"Chris"},"score":0,"creation_date":1677576988,"post_id":75590162,"comment_id":133360791,"body_markdown":"This should give you an answer. https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java. and if so should this be considered a duplicate?","body":"This should give you an answer. <a href=\"https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java\" title=\"how to parse json in java\">stackoverflow.com/questions/2591098/how-to-parse-json-in-jav&zwnj;&#8203;a</a>. and if so should this be considered a duplicate?"},{"owner":{"account_id":25314064,"reputation":542,"user_id":19136437,"display_name":"Bani"},"score":0,"creation_date":1677577197,"post_id":75590162,"comment_id":133360844,"body_markdown":"@Chris The `response` is an `okhttp3.Response` so `new JSONObject(response)` does not work.","body":"@Chris The <code>response</code> is an <code>okhttp3.Response</code> so <code>new JSONObject(response)</code> does not work."},{"owner":{"account_id":25956799,"reputation":138,"user_id":19674027,"display_name":"user2357113"},"score":0,"creation_date":1677579207,"post_id":75590162,"comment_id":133361413,"body_markdown":"Does this answer your question? [How to parse JSON in Java](https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java\">How to parse JSON in Java</a>"},{"owner":{"account_id":25314064,"reputation":542,"user_id":19136437,"display_name":"Bani"},"score":0,"creation_date":1677579940,"post_id":75590162,"comment_id":133361613,"body_markdown":"@mujammil someone already suggested that and it doesn&#39;t solve my issue","body":"@mujammil someone already suggested that and it doesn&#39;t solve my issue"}],"answers":[{"tags":[],"owner":{"account_id":25314064,"reputation":542,"user_id":19136437,"display_name":"Bani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677581816,"creation_date":1677581816,"answer_id":75591071,"question_id":75590162,"body_markdown":"To get the response from body I had to use this:\r\n\r\n    String jsonData = response.body().string();\r\n    JSONObject Jobject = new JSONObject(jsonData);\r\n\r\nand then I have the Json object returned from the API call.","title":"How do I parse the response from an API call in android (API 28)","body":"<p>To get the response from body I had to use this:</p>\n<pre><code>String jsonData = response.body().string();\nJSONObject Jobject = new JSONObject(jsonData);\n</code></pre>\n<p>and then I have the Json object returned from the API call.</p>\n"}],"owner":{"account_id":25314064,"reputation":542,"user_id":19136437,"display_name":"Bani"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75591071,"answer_count":1,"score":1,"last_activity_date":1677590468,"creation_date":1677576740,"question_id":75590162,"body_markdown":"I got this code:\r\n\r\nAnd it gets executed as follows : `new SendFdToApi().execute();`\r\n \r\n\r\n    private class SendFdToApi extends AsyncTask&lt;URL, Integer, Long&gt; {\r\n            @Override\r\n            protected Long doInBackground(URL... urls) {\r\n    \r\n                Gson gson = new GsonBuilder().create();\r\n                String jsonObj = gson.toJson(fdReq);\r\n    \r\n                OkHttpClient client = getUnsafeOkHttpClient();\r\n                RequestBody body;\r\n                Request request;\r\n    \r\n                MediaType mediaType = MediaType.parse(&quot;application/json; charset=UTF-8&quot;);\r\n                body = RequestBody.create(mediaType, jsonObj);\r\n                request = new Request.Builder()\r\n                        .url(&quot;url&quot;)\r\n                        .method(&quot;POST&quot;, body)\r\n                        .addHeader(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;)\r\n                        .build();\r\n    \r\n                try {\r\n                    Response response = client.newCall(request).execute();\r\n\r\n                    //------Get response message here--------\r\n\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                } catch (Exception e){\r\n                    e.printStackTrace();\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\nAfter the request is sent I am expecting a JSON message as a result but I don&#39;t know how to get the response from the `response` variable which is an `okhttp3.Response` type.\r\n\r\nThis is what my API returns: \r\n```return new JsonResult(new { mesagge = &quot;message&quot;, status = &quot;S&quot; });```","title":"How do I parse the response from an API call in android (API 28)","body":"<p>I got this code:</p>\n<p>And it gets executed as follows : <code>new SendFdToApi().execute();</code></p>\n<pre><code>private class SendFdToApi extends AsyncTask&lt;URL, Integer, Long&gt; {\n        @Override\n        protected Long doInBackground(URL... urls) {\n\n            Gson gson = new GsonBuilder().create();\n            String jsonObj = gson.toJson(fdReq);\n\n            OkHttpClient client = getUnsafeOkHttpClient();\n            RequestBody body;\n            Request request;\n\n            MediaType mediaType = MediaType.parse(&quot;application/json; charset=UTF-8&quot;);\n            body = RequestBody.create(mediaType, jsonObj);\n            request = new Request.Builder()\n                    .url(&quot;url&quot;)\n                    .method(&quot;POST&quot;, body)\n                    .addHeader(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;)\n                    .build();\n\n            try {\n                Response response = client.newCall(request).execute();\n\n                //------Get response message here--------\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            } catch (Exception e){\n                e.printStackTrace();\n            }\n            return null;\n        }\n    }\n}\n</code></pre>\n<p>After the request is sent I am expecting a JSON message as a result but I don't know how to get the response from the <code>response</code> variable which is an <code>okhttp3.Response</code> type.</p>\n<p>This is what my API returns:\n<code>return new JsonResult(new { mesagge = &quot;message&quot;, status = &quot;S&quot; });</code></p>\n"},{"tags":["java","android","multithreading","rx-java2"],"answers":[{"tags":[],"owner":{"account_id":5641500,"reputation":86662,"user_id":4465208,"accept_rate":86,"display_name":"zsmb13"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1489833613,"creation_date":1489833613,"answer_id":42873269,"question_id":42873048,"body_markdown":"It is precisely in the source of the `dispose` method. You can probably jump into the source of methods in your libraries within your IDE as well, in IntelliJ it&#39;s &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;B&lt;/kbd&gt; on Windows or &lt;kbd&gt;⌘B&lt;/kbd&gt; on Mac, and in Eclipse it&#39;s &lt;kbd&gt;F3&lt;/kbd&gt;.\r\n\r\nAnyhow, here&#39;s the source of the `dispose` method (comments mine):\r\n\r\n    @Override\r\n    public void dispose() {\r\n        if (disposed) { // nothing to do\r\n            return;\r\n        }\r\n        OpenHashSet&lt;Disposable&gt; set; // this is the same type as our field that holds the Disposables\r\n        synchronized (this) {\r\n            if (disposed) { \r\n                return; // another thread did it while we got our lock, so nothing to do\r\n            }\r\n            disposed = true; // setting this flag is safe now, we&#39;re the only ones disposing\r\n            set = resources; // the references are now in this local variable\r\n            resources = null; // our field no longer has the references\r\n        }\r\n\r\n        dispose(set); // from here on out, only this method has the references to the Disposables\r\n    }\r\n\r\nAnd then the complete code of the `dispose(OpenHashSet&lt;Disposable&gt;)` method that we called above on the last line (mostly just error handling which I believe is self-explainatory):\r\n\r\n    /**\r\n     * Dispose the contents of the OpenHashSet by suppressing non-fatal\r\n     * Throwables till the end.\r\n     * @param set the OpenHashSet to dispose elements of\r\n     */\r\n    void dispose(OpenHashSet&lt;Disposable&gt; set) {\r\n        if (set == null) {\r\n            return;\r\n        }\r\n        List&lt;Throwable&gt; errors = null;\r\n        Object[] array = set.keys();\r\n        for (Object o : array) {\r\n            if (o instanceof Disposable) {\r\n                try {\r\n                    ((Disposable) o).dispose();\r\n                } catch (Throwable ex) {\r\n                    Exceptions.throwIfFatal(ex);\r\n                    if (errors == null) {\r\n                        errors = new ArrayList&lt;Throwable&gt;();\r\n                    }\r\n                    errors.add(ex);\r\n                }\r\n            }\r\n        }\r\n        if (errors != null) {\r\n            if (errors.size() == 1) {\r\n                throw ExceptionHelper.wrapOrThrow(errors.get(0));\r\n            }\r\n            throw new CompositeException(errors);\r\n        }\r\n    }\r\n\r\nAs you can see, at the end of that method, `set` can now be garbage collected, as nobody is holding a reference to it.","title":"How does the clear (CompositeDisposable) method of RxJava work internally?","body":"<p>It is precisely in the source of the <code>dispose</code> method. You can probably jump into the source of methods in your libraries within your IDE as well, in IntelliJ it's <kbd>Ctrl</kbd>+<kbd>B</kbd> on Windows or <kbd>⌘B</kbd> on Mac, and in Eclipse it's <kbd>F3</kbd>.</p>\n\n<p>Anyhow, here's the source of the <code>dispose</code> method (comments mine):</p>\n\n<pre><code>@Override\npublic void dispose() {\n    if (disposed) { // nothing to do\n        return;\n    }\n    OpenHashSet&lt;Disposable&gt; set; // this is the same type as our field that holds the Disposables\n    synchronized (this) {\n        if (disposed) { \n            return; // another thread did it while we got our lock, so nothing to do\n        }\n        disposed = true; // setting this flag is safe now, we're the only ones disposing\n        set = resources; // the references are now in this local variable\n        resources = null; // our field no longer has the references\n    }\n\n    dispose(set); // from here on out, only this method has the references to the Disposables\n}\n</code></pre>\n\n<p>And then the complete code of the <code>dispose(OpenHashSet&lt;Disposable&gt;)</code> method that we called above on the last line (mostly just error handling which I believe is self-explainatory):</p>\n\n<pre><code>/**\n * Dispose the contents of the OpenHashSet by suppressing non-fatal\n * Throwables till the end.\n * @param set the OpenHashSet to dispose elements of\n */\nvoid dispose(OpenHashSet&lt;Disposable&gt; set) {\n    if (set == null) {\n        return;\n    }\n    List&lt;Throwable&gt; errors = null;\n    Object[] array = set.keys();\n    for (Object o : array) {\n        if (o instanceof Disposable) {\n            try {\n                ((Disposable) o).dispose();\n            } catch (Throwable ex) {\n                Exceptions.throwIfFatal(ex);\n                if (errors == null) {\n                    errors = new ArrayList&lt;Throwable&gt;();\n                }\n                errors.add(ex);\n            }\n        }\n    }\n    if (errors != null) {\n        if (errors.size() == 1) {\n            throw ExceptionHelper.wrapOrThrow(errors.get(0));\n        }\n        throw new CompositeException(errors);\n    }\n}\n</code></pre>\n\n<p>As you can see, at the end of that method, <code>set</code> can now be garbage collected, as nobody is holding a reference to it.</p>\n"}],"owner":{"account_id":4879891,"reputation":3,"user_id":7731017,"display_name":"Charlie Chatin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2745,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42873269,"answer_count":1,"score":0,"last_activity_date":1677590367,"creation_date":1489832199,"question_id":42873048,"body_markdown":"Anonymous class holds a reference to the enclosing class. \r\n\r\nIn the following example, I created a small Activity. In the onCreate method, I just add a timer on another Thread, add a CompositeDisposable and clear it in the onDestroy.\r\n\r\nObviously without the CompositeDisposable, it will create a memory leak. With the CompositeDisposable it doesn&#39;t create any memory leak, but how is it even working? \r\n\r\nDoes RxJava just interrupt the Thread and put null on every callback? Can you provide some line that does this work in RxJava source code? I suppose it’s somewhere near the dispose method.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private String TAG = &quot;MainActivity&quot;;\r\n\r\n    private CompositeDisposable composite = new CompositeDisposable();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        composite.add(Flowable\r\n                .just(1)\r\n                .timer(90, TimeUnit.SECONDS)\r\n                .subscribeOn(Schedulers.io())\r\n                .subscribeWith(new DisposableSubscriber&lt;Long&gt;() {\r\n\r\n                    @Override\r\n                    public void onNext(Long aLong) { sayHello(); }\r\n\r\n                    @Override\r\n                    public void onError(Throwable t) { sayHello(); }\r\n\r\n                    @Override\r\n                    public void onComplete() { sayHello(); }\r\n                }));\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n\r\n        composite.clear();\r\n    }\r\n\r\n    public void sayHello () { Log.w(TAG, &quot;Hello everyone&quot;); }","title":"How does the clear (CompositeDisposable) method of RxJava work internally?","body":"<p>Anonymous class holds a reference to the enclosing class.</p>\n<p>In the following example, I created a small Activity. In the onCreate method, I just add a timer on another Thread, add a CompositeDisposable and clear it in the onDestroy.</p>\n<p>Obviously without the CompositeDisposable, it will create a memory leak. With the CompositeDisposable it doesn't create any memory leak, but how is it even working?</p>\n<p>Does RxJava just interrupt the Thread and put null on every callback? Can you provide some line that does this work in RxJava source code? I suppose it’s somewhere near the dispose method.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate String TAG = &quot;MainActivity&quot;;\n\nprivate CompositeDisposable composite = new CompositeDisposable();\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    composite.add(Flowable\n            .just(1)\n            .timer(90, TimeUnit.SECONDS)\n            .subscribeOn(Schedulers.io())\n            .subscribeWith(new DisposableSubscriber&lt;Long&gt;() {\n\n                @Override\n                public void onNext(Long aLong) { sayHello(); }\n\n                @Override\n                public void onError(Throwable t) { sayHello(); }\n\n                @Override\n                public void onComplete() { sayHello(); }\n            }));\n}\n\n@Override\nprotected void onDestroy() {\n    super.onDestroy();\n\n    composite.clear();\n}\n\npublic void sayHello () { Log.w(TAG, &quot;Hello everyone&quot;); }\n</code></pre>\n"},{"tags":["python","java","jython","pythoninterpreter"],"comments":[{"owner":{"account_id":176760,"reputation":49306,"user_id":407651,"display_name":"mzjn"},"score":0,"creation_date":1677663538,"post_id":75592580,"comment_id":133380544,"body_markdown":"You cannot use Pandas with Jython: https://stackoverflow.com/q/36213908/407651","body":"You cannot use Pandas with Jython: <a href=\"https://stackoverflow.com/q/36213908/407651\">stackoverflow.com/q/36213908/407651</a>"},{"owner":{"account_id":10413228,"reputation":198,"user_id":7678060,"display_name":"vineeth"},"score":0,"creation_date":1677669951,"post_id":75592580,"comment_id":133382310,"body_markdown":"@mzjn The link tells about jython version 2.7.0. Im using 2.7.2. Pandas is not available in 2.7.0 as well?","body":"@mzjn The link tells about jython version 2.7.0. Im using 2.7.2. Pandas is not available in 2.7.0 as well?"},{"owner":{"account_id":176760,"reputation":49306,"user_id":407651,"display_name":"mzjn"},"score":1,"creation_date":1677670037,"post_id":75592580,"comment_id":133382330,"body_markdown":"It does not matter what the Jython version is. You cannot use Pandas.","body":"It does not matter what the Jython version is. You cannot use Pandas."}],"owner":{"account_id":10413228,"reputation":198,"user_id":7678060,"display_name":"vineeth"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1678348505,"answer_count":0,"score":0,"last_activity_date":1677590001,"creation_date":1677590001,"question_id":75592580,"body_markdown":"I am trying to create a maven java project which calls python script that have imports from 3rd party modules like pandas. I have installed Python3 and installed pandas using pip command. I am using vsCode as IDE and has windows 10 OS.\r\n\r\nIm attaching the sample code i used.\r\n\r\nApp.java\r\n\r\n    public static void main(String[] args){\r\n      PythonInterpreter interpreter = new PythonInterpreter();\r\n      interpreter.execfile(&quot;./src/main/resources/hello.py&quot;);\r\n      PyFunction function = interpreter.get(&quot;get_data&quot;, PyFunction.class);\r\n      PyObject obj = function.__call__();\r\n      System.out.println(obj);\r\n\r\nhello.py\r\n\r\n    import pandas as pd\r\n\r\n    def get_data():\r\n        data = {&#39;name&#39;: [&#39;John&#39;, &#39;Emily&#39;],\r\n                &#39;age&#39;: [30, 40]}\r\n        df = pd.DataFrame(data)\r\n        return df\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.python&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jython-standalone&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThe error I am getting is **ImportError: No module named pandas**.\r\nWhat I am expecting is that the program is not able to find the modules from python lib.","title":"Calling python having imports from 3rd party modules from Java using jython gives ImportModuleError","body":"<p>I am trying to create a maven java project which calls python script that have imports from 3rd party modules like pandas. I have installed Python3 and installed pandas using pip command. I am using vsCode as IDE and has windows 10 OS.</p>\n<p>Im attaching the sample code i used.</p>\n<p>App.java</p>\n<pre><code>public static void main(String[] args){\n  PythonInterpreter interpreter = new PythonInterpreter();\n  interpreter.execfile(&quot;./src/main/resources/hello.py&quot;);\n  PyFunction function = interpreter.get(&quot;get_data&quot;, PyFunction.class);\n  PyObject obj = function.__call__();\n  System.out.println(obj);\n</code></pre>\n<p>hello.py</p>\n<pre><code>import pandas as pd\n\ndef get_data():\n    data = {'name': ['John', 'Emily'],\n            'age': [30, 40]}\n    df = pd.DataFrame(data)\n    return df\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.python&lt;/groupId&gt;\n        &lt;artifactId&gt;jython-standalone&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The error I am getting is <strong>ImportError: No module named pandas</strong>.\nWhat I am expecting is that the program is not able to find the modules from python lib.</p>\n"},{"tags":["java","spring-mvc","spring-security","azure-active-directory","ldap"],"comments":[{"owner":{"account_id":26410247,"reputation":563,"user_id":20059423,"display_name":"Naveen Sharma"},"score":0,"creation_date":1678437395,"post_id":75592562,"comment_id":133535704,"body_markdown":"Check these doc if helps: [Doc1](https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/active-directory/saas-apps/spring-cm-tutorial.md) [Doc2](https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/active-directory/saas-apps/jdacloud-tutorial.md) [Doc3](https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/active-directory/fundamentals/auth-ldap.md)","body":"Check these doc if helps: <a href=\"https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/active-directory/saas-apps/spring-cm-tutorial.md\" rel=\"nofollow noreferrer\">Doc1</a> <a href=\"https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/active-directory/saas-apps/jdacloud-tutorial.md\" rel=\"nofollow noreferrer\">Doc2</a> <a href=\"https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/active-directory/fundamentals/auth-ldap.md\" rel=\"nofollow noreferrer\">Doc3</a>"}],"owner":{"account_id":24445048,"reputation":1,"user_id":18368133,"display_name":"tom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677589918,"creation_date":1677589918,"question_id":75592562,"body_markdown":"We have a requirement for integration with Azure Active Directory Integration for MFA and SSO features. Our application is based on the Java spring framework. How we can implement this? \r\n\r\nI have read that I can make use of Azure Domain Service (AD DS) to perform a one-way synchronization from Azure AD to provide access to a central set of users, groups, and credentials - then connect LDAP. But it does not allow for full utilization of LDAP or Azure features.\r\n\r\n**What is the best approach for an application based on Java Spring framework (not spring boot), having existing integration with `ActiveDirectoryLdapAuthenticationProvider` to have additional integration with Azure AD to utilize its MFA and SSO features?**\r\n\r\n\r\n\r\nWe currently use `org.springframework.security.ldap.authentication.ad`.`ActiveDirectoryLdapAuthenticationProvider` in Spring Security (not spring boot) for the LDAP integration, for authentication, but not authorization. Authentication using Windows Active Directory is working as expected - tried created a user in AD and logged to the application - did the testing. It&#39;s all good. This is working using `ActiveDirectoryLdapAuthenticationProvider`. **Now I want integrate with Azure AD. Does this require a whole code change for Azure AD integration? **","title":"Azure AD integration with Java Spring Security for existing LDAP integration","body":"<p>We have a requirement for integration with Azure Active Directory Integration for MFA and SSO features. Our application is based on the Java spring framework. How we can implement this?</p>\n<p>I have read that I can make use of Azure Domain Service (AD DS) to perform a one-way synchronization from Azure AD to provide access to a central set of users, groups, and credentials - then connect LDAP. But it does not allow for full utilization of LDAP or Azure features.</p>\n<p><strong>What is the best approach for an application based on Java Spring framework (not spring boot), having existing integration with <code>ActiveDirectoryLdapAuthenticationProvider</code> to have additional integration with Azure AD to utilize its MFA and SSO features?</strong></p>\n<p>We currently use <code>org.springframework.security.ldap.authentication.ad</code>.<code>ActiveDirectoryLdapAuthenticationProvider</code> in Spring Security (not spring boot) for the LDAP integration, for authentication, but not authorization. Authentication using Windows Active Directory is working as expected - tried created a user in AD and logged to the application - did the testing. It's all good. This is working using <code>ActiveDirectoryLdapAuthenticationProvider</code>. **Now I want integrate with Azure AD. Does this require a whole code change for Azure AD integration? **</p>\n"},{"tags":["java","mongodb","mongodb-query","aggregation-framework"],"answers":[{"tags":[],"owner":{"account_id":27372221,"reputation":71,"user_id":20878091,"display_name":"Chhavi Batra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677589915,"creation_date":1677589915,"answer_id":75592561,"question_id":75579839,"body_markdown":"Try \r\n\r\n    @Aggregation(&quot; { $match:  { &#39;object&#39;:  $object, $and: [{&#39;end&#39;: {$ne: null}}] } }, { &#39;$group&#39; : { &#39;object&#39; : $object, &#39;object__price&#39;: { $sum: &quot;$price&quot; }, count: {$sum: 1}}}&quot;)\r\n\r\n&quot; $sum: &quot;$price&quot; &quot; would give the sum of key price of each document that falls in that object type, and count would give the total count of such documents","title":"MongoDB aggregation with $match and $group, $sum","body":"<p>Try</p>\n<pre><code>@Aggregation(&quot; { $match:  { 'object':  $object, $and: [{'end': {$ne: null}}] } }, { '$group' : { 'object' : $object, 'object__price': { $sum: &quot;$price&quot; }, count: {$sum: 1}}}&quot;)\n</code></pre>\n<p>&quot; $sum: &quot;$price&quot; &quot; would give the sum of key price of each document that falls in that object type, and count would give the total count of such documents</p>\n"}],"owner":{"account_id":20140004,"reputation":13,"user_id":19074656,"display_name":"epiphany"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75592561,"answer_count":1,"score":0,"last_activity_date":1677589915,"creation_date":1677497051,"question_id":75579839,"body_markdown":"I&#39;m trying to query the sum of an inner class. I put it together with what I&#39;ve found on the internet but I am getting an empty response at the moment. Not quite sure what is wrong with it, since it&#39;s different parts that I&#39;ve tried to put together.\r\n\r\nI cannot create any custom classes and I can only use the @Aggregation method.\r\n\r\n```\r\n@Aggregation(&quot; { $match:  { &#39;object&#39;:  $object, $and: [{&#39;end&#39;: {$ne: null}}] } }, { &#39;$group&#39; : { &#39;object&#39; : $object, &#39;object__price&#39;: { $sum: $object.price }}}&quot;)\r\n    Integer sumPrices(@Param(&quot;$object&quot;) Object object);\r\n```\r\n\r\n(The names for the parameters are random in the code.)\r\n\r\nI am trying to query for all items that match the object name and whose production value (&#39;end&#39;) is not null. I then want to get the sum of all the objects of that types and return the sum value. Price value is an inner class.","title":"MongoDB aggregation with $match and $group, $sum","body":"<p>I'm trying to query the sum of an inner class. I put it together with what I've found on the internet but I am getting an empty response at the moment. Not quite sure what is wrong with it, since it's different parts that I've tried to put together.</p>\n<p>I cannot create any custom classes and I can only use the @Aggregation method.</p>\n<pre><code>@Aggregation(&quot; { $match:  { 'object':  $object, $and: [{'end': {$ne: null}}] } }, { '$group' : { 'object' : $object, 'object__price': { $sum: $object.price }}}&quot;)\n    Integer sumPrices(@Param(&quot;$object&quot;) Object object);\n</code></pre>\n<p>(The names for the parameters are random in the code.)</p>\n<p>I am trying to query for all items that match the object name and whose production value ('end') is not null. I then want to get the sum of all the objects of that types and return the sum value. Price value is an inner class.</p>\n"},{"tags":["java","linux","spring","wildfly"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1532494958,"post_id":51511017,"comment_id":89990702,"body_markdown":"The code that you have posted is **not** the code that is failing - Please post the code for `XeryaUtils.convert` and `RestImportDataStudentController.uploadFile`","body":"The code that you have posted is <b>not</b> the code that is failing - Please post the code for <code>XeryaUtils.convert</code> and <code>RestImportDataStudentController.uploadFile</code>"},{"owner":{"account_id":206952,"reputation":576,"user_id":456561,"display_name":"Rick"},"score":0,"creation_date":1532497357,"post_id":51511017,"comment_id":89991494,"body_markdown":"Did you try making it rwx on everything (rwxrwxrwx), not just rwxr_xr_x?","body":"Did you try making it rwx on everything (rwxrwxrwx), not just rwxr_xr_x?"},{"owner":{"account_id":9190575,"reputation":8919,"user_id":6831257,"display_name":"GolamMazid Sajib"},"score":0,"creation_date":1532497672,"post_id":51511017,"comment_id":89991618,"body_markdown":"you can try with give all permison. chmod 777 -R /opt/xerya_home/","body":"you can try with give all permison. chmod 777 -R /opt/xerya_home/"},{"owner":{"account_id":3168724,"reputation":20909,"user_id":2678170,"accept_rate":0,"display_name":"Salim Hamidi"},"score":0,"creation_date":1532551102,"post_id":51511017,"comment_id":90023144,"body_markdown":"@Scary, I complete question with code generating the error. I upload the file from my windows pc and the application is deployed on linux one. When I test with the application deployed on xindows every thing is ok","body":"@Scary, I complete question with code generating the error. I upload the file from my windows pc and the application is deployed on linux one. When I test with the application deployed on xindows every thing is ok"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1532564887,"post_id":51511017,"comment_id":90027027,"body_markdown":"do some simple debugging and let us know what the value of `file.getOriginalFilename()` is.","body":"do some simple debugging and let us know what the value of <code>file.getOriginalFilename()</code> is."}],"answers":[{"tags":[],"owner":{"account_id":3168724,"reputation":20909,"user_id":2678170,"accept_rate":0,"display_name":"Salim Hamidi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532887082,"creation_date":1532887082,"answer_id":51583080,"question_id":51511017,"body_markdown":"I thanks every body for thiers responses.\r\nFinally, I located the bug. It comes from this line:\r\n\r\n    File convFile = new File(file.getOriginalFilename());\r\n\r\nTo resolve it, I change it by:\r\n\r\n    String fileName = System.getenv(XeryaConstants.HOME_ENV_VARIABLE_NAME)\r\n                .concat(File.separator)\r\n                .concat(TEMP_FOLDER_NAME).concat(File.separator)\r\n                .concat(file.getOriginalFilename());\r\n        File convFile = new File(fileName);\r\n\r\nWhen I look to getOriginalFilename documentation, it says: &quot;Return the original filename in the client&#39;s filesystem. This may contain path information depending on the browser used, but it typically will not with any other than Opera.\r\n\r\nI think that this explains the behavior that I get:\r\nWhen the application were deployed on windows, and I upload the file since chrome, no error was found. But when the application were deployed on linux and I upload the file from chrome the bug was found. I was fixed as I said later by concat file.getOriginalFilename() with the absolute path of the container folder.","title":"Permission denied when upload file in java web application deployed on linux server","body":"<p>I thanks every body for thiers responses.\nFinally, I located the bug. It comes from this line:</p>\n\n<pre><code>File convFile = new File(file.getOriginalFilename());\n</code></pre>\n\n<p>To resolve it, I change it by:</p>\n\n<pre><code>String fileName = System.getenv(XeryaConstants.HOME_ENV_VARIABLE_NAME)\n            .concat(File.separator)\n            .concat(TEMP_FOLDER_NAME).concat(File.separator)\n            .concat(file.getOriginalFilename());\n    File convFile = new File(fileName);\n</code></pre>\n\n<p>When I look to getOriginalFilename documentation, it says: \"Return the original filename in the client's filesystem. This may contain path information depending on the browser used, but it typically will not with any other than Opera.</p>\n\n<p>I think that this explains the behavior that I get:\nWhen the application were deployed on windows, and I upload the file since chrome, no error was found. But when the application were deployed on linux and I upload the file from chrome the bug was found. I was fixed as I said later by concat file.getOriginalFilename() with the absolute path of the container folder.</p>\n"}],"owner":{"account_id":3168724,"reputation":20909,"user_id":2678170,"accept_rate":0,"display_name":"Salim Hamidi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1678,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1677589561,"creation_date":1532494262,"question_id":51511017,"body_markdown":"I have a java web application with spring 4 and jstl deployed on wildfly installed on linux server. In this app, I have to upload Excel files to extrat data and inject the hole in some table. To do this I defined this configuration for multipart : \r\n\r\n    public class myAppServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    ... \r\n\r\n    private static final String TEMP_FOLDER_NAME = &quot;tmp&quot;; // Temporary location where files will be stored\r\n\r\n    private static final long MAX_FILE_SIZE = 5242880; // 5MB : Max file size.\r\n    // Beyond that size spring will throw exception.\r\n    private static final long MAX_REQUEST_SIZE = 20971520; // 20MB : Total request size containing Multi part.\r\n\r\n    private static final int FILE_SIZE_THRESHOLD = 0; // Size threshold after which files will be written to disk\r\n\r\n    private MultipartConfigElement getMultipartConfigElement() {\r\n            StringBuilder uploadTempDirectoryUrl = new StringBuilder();\r\n            uploadTempDirectoryUrl.append(System.getenv(XeryaConstants.HOME_ENV_VARIABLE_NAME)).append(File.separator)\r\n                    .append(TEMP_FOLDER_NAME);\r\n            File tempDirectory = new File(uploadTempDirectoryUrl.toString());\r\n            if (!tempDirectory.exists()) {\r\n                log.info(&quot;XeryaServletInitializer - Create temp directory &quot; + uploadTempDirectoryUrl);\r\n                tempDirectory.mkdir();\r\n            }\r\n    \r\n            log.info(&quot;XeryaServletInitializer - Multiplart temporal directory: &quot; + uploadTempDirectoryUrl);\r\n            MultipartConfigElement multipartConfigElement = new MultipartConfigElement(System.getenv(AppConstants.HOME_ENV_VARIABLE_NAME),\r\n                    MAX_FILE_SIZE, MAX_REQUEST_SIZE, FILE_SIZE_THRESHOLD);\r\n            return multipartConfigElement;\r\n        }\r\n    \r\n        @Override\r\n        protected void customizeRegistration(ServletRegistration.Dynamic registration) {\r\n            registration.setMultipartConfig(getMultipartConfigElement());\r\n        }\r\n    }\r\n\r\nThis is the code of the method generale the error (line beetween **)\r\n\r\n        public static File convert(MultipartFile file) throws IOException\r\n    {\r\n        File convFile = new File(file.getOriginalFilename());\r\n        **convFile.createNewFile();**\r\n        FileOutputStream fos = new FileOutputStream(convFile);\r\n        fos.write(file.getBytes());\r\n        fos.close();\r\n        return convFile;\r\n    }\r\n\r\nIn the linux sever, the tmp folder which is created in configuration floder out off wildfly has this credentials:\r\n    \r\n    root@VM-XITS01-DEV:/opt/xerya_home# ls -ld\r\n    drwxr-xr-x 9 wildfly wildfly 4096 juil. 25 02:21\r\n\r\nThe problem is when I upload the excel file from windows OS, I have this error:\r\n\r\n        2018-07-25 03:06:25,192 ERROR [stderr] (default task-47) java.io.IOException: Permission denied\r\n    2018-07-25 03:06:25,192 ERROR [stderr] (default task-47)        at java.io.UnixFileSystem.createFileExclusively(Native Method)\r\n    2018-07-25 03:06:25,193 ERROR [stderr] (default task-47)        at java.io.File.createNewFile(File.java:1012)\r\n    2018-07-25 03:06:25,193 ERROR [stderr] (default task-47)        at com.xerya.school.util.XeryaUtils.convert(XeryaUtils.java:103)\r\n    2018-07-25 03:06:25,193 ERROR [stderr] (default task-47)        at com.xerya.school.web.validator.rest.importdata.RestImportDataStudentController.uploadFile(RestImportDataStudentController.java:75)\r\n\r\nCan some one help me plz to resolve this problem. In Windows all work right.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Permission denied when upload file in java web application deployed on linux server","body":"<p>I have a java web application with spring 4 and jstl deployed on wildfly installed on linux server. In this app, I have to upload Excel files to extrat data and inject the hole in some table. To do this I defined this configuration for multipart : </p>\n\n<pre><code>public class myAppServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n... \n\nprivate static final String TEMP_FOLDER_NAME = \"tmp\"; // Temporary location where files will be stored\n\nprivate static final long MAX_FILE_SIZE = 5242880; // 5MB : Max file size.\n// Beyond that size spring will throw exception.\nprivate static final long MAX_REQUEST_SIZE = 20971520; // 20MB : Total request size containing Multi part.\n\nprivate static final int FILE_SIZE_THRESHOLD = 0; // Size threshold after which files will be written to disk\n\nprivate MultipartConfigElement getMultipartConfigElement() {\n        StringBuilder uploadTempDirectoryUrl = new StringBuilder();\n        uploadTempDirectoryUrl.append(System.getenv(XeryaConstants.HOME_ENV_VARIABLE_NAME)).append(File.separator)\n                .append(TEMP_FOLDER_NAME);\n        File tempDirectory = new File(uploadTempDirectoryUrl.toString());\n        if (!tempDirectory.exists()) {\n            log.info(\"XeryaServletInitializer - Create temp directory \" + uploadTempDirectoryUrl);\n            tempDirectory.mkdir();\n        }\n\n        log.info(\"XeryaServletInitializer - Multiplart temporal directory: \" + uploadTempDirectoryUrl);\n        MultipartConfigElement multipartConfigElement = new MultipartConfigElement(System.getenv(AppConstants.HOME_ENV_VARIABLE_NAME),\n                MAX_FILE_SIZE, MAX_REQUEST_SIZE, FILE_SIZE_THRESHOLD);\n        return multipartConfigElement;\n    }\n\n    @Override\n    protected void customizeRegistration(ServletRegistration.Dynamic registration) {\n        registration.setMultipartConfig(getMultipartConfigElement());\n    }\n}\n</code></pre>\n\n<p>This is the code of the method generale the error (line beetween **)</p>\n\n<pre><code>    public static File convert(MultipartFile file) throws IOException\n{\n    File convFile = new File(file.getOriginalFilename());\n    **convFile.createNewFile();**\n    FileOutputStream fos = new FileOutputStream(convFile);\n    fos.write(file.getBytes());\n    fos.close();\n    return convFile;\n}\n</code></pre>\n\n<p>In the linux sever, the tmp folder which is created in configuration floder out off wildfly has this credentials:</p>\n\n<pre><code>root@VM-XITS01-DEV:/opt/xerya_home# ls -ld\ndrwxr-xr-x 9 wildfly wildfly 4096 juil. 25 02:21\n</code></pre>\n\n<p>The problem is when I upload the excel file from windows OS, I have this error:</p>\n\n<pre><code>    2018-07-25 03:06:25,192 ERROR [stderr] (default task-47) java.io.IOException: Permission denied\n2018-07-25 03:06:25,192 ERROR [stderr] (default task-47)        at java.io.UnixFileSystem.createFileExclusively(Native Method)\n2018-07-25 03:06:25,193 ERROR [stderr] (default task-47)        at java.io.File.createNewFile(File.java:1012)\n2018-07-25 03:06:25,193 ERROR [stderr] (default task-47)        at com.xerya.school.util.XeryaUtils.convert(XeryaUtils.java:103)\n2018-07-25 03:06:25,193 ERROR [stderr] (default task-47)        at com.xerya.school.web.validator.rest.importdata.RestImportDataStudentController.uploadFile(RestImportDataStudentController.java:75)\n</code></pre>\n\n<p>Can some one help me plz to resolve this problem. In Windows all work right.</p>\n"},{"tags":["java","json","spring","spring-boot","dto"],"comments":[{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1677585876,"post_id":75591785,"comment_id":133363274,"body_markdown":"You are still calling `/mock` in Postman. Seems like your controller listens to `/mock1`.","body":"You are still calling <code>&#47;mock</code> in Postman. Seems like your controller listens to <code>&#47;mock1</code>."},{"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677586041,"post_id":75591785,"comment_id":133363317,"body_markdown":"changed. Was a typo, sorry. I have updated the image (I still have the error)","body":"changed. Was a typo, sorry. I have updated the image (I still have the error)"},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1677586463,"post_id":75591785,"comment_id":133363435,"body_markdown":"How does `Water4AgriFoodMockerApplication` look after you made the separate controller?","body":"How does <code>Water4AgriFoodMockerApplication</code> look after you made the separate controller?"},{"owner":{"account_id":22866153,"reputation":158,"user_id":17009760,"display_name":"Pioter88"},"score":1,"creation_date":1677586774,"post_id":75591785,"comment_id":133363525,"body_markdown":"I think your mapping should start with `/`.\n\nTry ``@RequestMapping(path=&quot;/api/v1/&quot;)``\n\nalso ``@GetMapping(&quot;/mock1&quot;)``","body":"I think your mapping should start with <code>&#47;</code>.  Try <code>@RequestMapping(path=&quot;&#47;api&#47;v1&#47;&quot;)</code>  also <code>@GetMapping(&quot;&#47;mock1&quot;)</code>"},{"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677586788,"post_id":75591785,"comment_id":133363533,"body_markdown":"Hi, Water4AgriFoodMockerApplication is just a simple &quot;SpringBootApplication&quot;. I added &quot;RestController&quot; just to do some testing since the appropriate &quot;RestController&quot; class was not working","body":"Hi, Water4AgriFoodMockerApplication is just a simple &quot;SpringBootApplication&quot;. I added &quot;RestController&quot; just to do some testing since the appropriate &quot;RestController&quot; class was not working"},{"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677586922,"post_id":75591785,"comment_id":133363569,"body_markdown":"@Pioter88 I added your suggestion &quot;/api/v1/&quot;, but still the 404 error on: http://localhost:8080/api/v1/mock1?pars=%7B%0A%22id%22%3A%221%22%2C%0A%22name%22%3A%22test%22%2C%0A%22timeFramesEnum%22%3A%22BASELINE%22%0A%7D","body":"@Pioter88 I added your suggestion &quot;/api/v1/&quot;, but still the 404 error on: <a href=\"http://localhost:8080/api/v1/mock1?pars=%7B%0A%22id%22%3A%221%22%2C%0A%22name%22%3A%22test%22%2C%0A%22timeFramesEnum%22%3A%22BASELINE%22%0A%7D\" rel=\"nofollow noreferrer\">localhost:8080/api/v1/&hellip;</a>"},{"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677587036,"post_id":75591785,"comment_id":133363606,"body_markdown":"@Pioter88 I added your suggetion (2), i.e., @GetMapping(&quot;/mock1&quot;) but I still have the 404 error","body":"@Pioter88 I added your suggetion (2), i.e., @GetMapping(&quot;/mock1&quot;) but I still have the 404 error"},{"owner":{"account_id":22866153,"reputation":158,"user_id":17009760,"display_name":"Pioter88"},"score":1,"creation_date":1677587401,"post_id":75591785,"comment_id":133363729,"body_markdown":"That is strange.... Please make sure your mappings look like this:  \n  \n``@RequestMapping(&quot;/api/v1&quot;)``  \n``@GetMapping(&quot;/mock1&quot;)``  \n  \nAll mappings should start with `/` but not ending with `/`. In previous comment it was my fault because you had ``v1/`` and ``/mock1`` resulting ``v1//mock1``","body":"That is strange.... Please make sure your mappings look like this:      <code>@RequestMapping(&quot;&#47;api&#47;v1&quot;)</code>   <code>@GetMapping(&quot;&#47;mock1&quot;)</code>      All mappings should start with <code>&#47;</code> but not ending with <code>&#47;</code>. In previous comment it was my fault because you had <code>v1&#47;</code> and <code>&#47;mock1</code> resulting <code>v1&#47;&#47;mock1</code>"},{"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677587944,"post_id":75591785,"comment_id":133363884,"body_markdown":"@Pioter88 fixed in `@RequestMapping(path=&quot;/api/v1&quot;)` and &quot;`GetMapping(&quot;/mock1&quot;)` in Controller class, but I still have 404 error (double check)","body":"@Pioter88 fixed in <code>@RequestMapping(path=&quot;&#47;api&#47;v1&quot;)</code> and &quot;<code>GetMapping(&quot;&#47;mock1&quot;)</code> in Controller class, but I still have 404 error (double check)"},{"owner":{"account_id":24083109,"reputation":194,"user_id":18057525,"display_name":"Octavia"},"score":0,"creation_date":1677588422,"post_id":75591785,"comment_id":133364055,"body_markdown":"I use this type of things and my Controllers are annotated like this: &#180;&#180;@RestController\n@RequestMapping(&quot;/mainPath&quot;)\npublic class MyController&#180;&#180; and the restpoint: &#180;&#180;@GetMapping(value = &quot;mypath&quot;, produces = WSConstants.JSON_MEDIATYPE)\n    @ResponseBody\n    public ResponseEntity myGetMethod(@RequestParam(&quot;persid&quot;) String persid)&#180;&#180;","body":"I use this type of things and my Controllers are annotated like this: &#180;&#180;@RestController @RequestMapping(&quot;/mainPath&quot;) public class MyController&#180;&#180; and the restpoint: &#180;&#180;@GetMapping(value = &quot;mypath&quot;, produces = WSConstants.JSON_MEDIATYPE)     @ResponseBody     public ResponseEntity myGetMethod(@RequestParam(&quot;persid&quot;) String persid)&#180;&#180;"},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1677589343,"post_id":75591785,"comment_id":133364326,"body_markdown":"The error can also be caused by the component scan not finding your rest-controller class. The component scan is triggered by the `@SpringBootApplication`-annotation on your application class, and (by default) your controller-class has to be in the same package or a sub-package of the application class for it to be found.","body":"The error can also be caused by the component scan not finding your rest-controller class. The component scan is triggered by the <code>@SpringBootApplication</code>-annotation on your application class, and (by default) your controller-class has to be in the same package or a sub-package of the application class for it to be found."},{"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677589461,"post_id":75591785,"comment_id":133364361,"body_markdown":"@marstran I added a new figure in the question about  package or a sub-package","body":"@marstran I added a new figure in the question about  package or a sub-package"},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1677589753,"post_id":75591785,"comment_id":133364457,"body_markdown":"And you are sure that your application-class still has the `@SpringBootApplication` annotation?","body":"And you are sure that your application-class still has the <code>@SpringBootApplication</code> annotation?"},{"owner":{"account_id":22866153,"reputation":158,"user_id":17009760,"display_name":"Pioter88"},"score":0,"creation_date":1677590032,"post_id":75591785,"comment_id":133364553,"body_markdown":"At this point it looks like its related to Spring not finding controller. Your packages are ok, one last tip comming to my mind is Maven. I had numerous issues caused by it. Please try  Maven -&gt; lifecycle -&gt; clean or validate. You can find Maven tab on the right in InteliJ.","body":"At this point it looks like its related to Spring not finding controller. Your packages are ok, one last tip comming to my mind is Maven. I had numerous issues caused by it. Please try  Maven -&gt; lifecycle -&gt; clean or validate. You can find Maven tab on the right in InteliJ."},{"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1677591708,"post_id":75591785,"comment_id":133365149,"body_markdown":"@marstran yes. My class has SpringBootApplication as you can see from the code example","body":"@marstran yes. My class has SpringBootApplication as you can see from the code example"}],"owner":{"account_id":1615315,"reputation":7232,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677589430,"creation_date":1677585626,"question_id":75591785,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n\r\nI am doing some testing in order to get a design idea. Through a request with JSON I want to create a DTO class within a GET\r\n\r\n    package org.crea.w4ag_mock.mocker;\r\n    \r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    import lombok.experimental.Accessors;\r\n    import org.crea.w4ag_mock.enums.TimeFramesEnum;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @Accessors(chain = true)\r\n    public class ParamsDTO {\r\n    \r\n        private String id;\r\n        private String name;\r\n        private TimeFramesEnum timeFramesEnum;\r\n        private double randNum;\r\n    }\r\n\r\nwhere (I&#39;m also trying to figure out how to have Enun lowercase):\r\n\r\n    package org.crea.w4ag_mock.enums;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    \r\n    public enum TimeFramesEnum {\r\n    \r\n        /*\r\n        baseline = BASELINE\r\n        period2_2040 = PERIOD2_2040\r\n        period3_2070 = PERIOD2_2070\r\n        */\r\n    \r\n        BASELINE,\r\n        PERIOD2_2040,\r\n        PERIOD2_2070\r\n    }\r\n\r\nI have my class Application (@SpringBootApplication) + Controller (@RestController):\r\n\r\n    package org.crea.w4ag_mock;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.crea.w4ag_mock.mocker.*;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    @SpringBootApplication\r\n    @RestController\r\n    public class Water4AgriFoodMockerApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Water4AgriFoodMockerApplication.class, args);\r\n    \r\n    \t}\r\n    \r\n    \t@GetMapping(&quot;mock&quot;)\r\n    \t@ResponseBody\r\n    \tpublic ResponseEntity&lt;ParamsDTO&gt; getMock(@RequestParam(value = &quot;pars&quot;) String parametersDTO) throws IOException {\r\n    \t\tfinal ParamsDTO paramsDTO =\r\n    \t\t\t\tnew ObjectMapper()\r\n    \t\t\t\t\t\t.readValue(parametersDTO, ParamsDTO.class);\r\n    \r\n    \t\tparamsDTO.setRandNum(12345);\r\n    \t\treturn ResponseEntity.ok(paramsDTO);\r\n    \t}\r\n    \r\n    }\r\n\r\nI convert my JSON to a URL-encoded JSON ([https://onlinejsontools.com/url-encode-json][2]). **Note, this is because TOMCAT reports me an error with a plain JSON**:\r\n\r\n    {\r\n    &quot;id&quot;:&quot;1&quot;,\r\n    &quot;name&quot;:&quot;test&quot;,\r\n    &quot;timeFramesEnum&quot;:&quot;BASELINE&quot;\r\n    }\r\n\r\nAnd I use POSTMAN to test the whole thing:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n\r\nSo far so good, but if I create a proper Controller class I get the following error message in Postman:\r\n\r\n\r\n    package org.crea.w4ag_mock.controller;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.crea.w4ag_mock.mocker.*;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    @RestController\r\n    @RequestMapping(path=&quot;api/v1/&quot;)\r\n    public class Water4AgriFoodMockController {\r\n    \r\n        @GetMapping(&quot;mock1&quot;)\r\n        @ResponseBody\r\n        public ResponseEntity&lt;ParamsDTO&gt; getMock1(@RequestParam(value = &quot;pars&quot;) String parametersDTO) throws IOException {\r\n            final ParamsDTO paramsDTO =\r\n                    new ObjectMapper()\r\n                            .readValue(parametersDTO, ParamsDTO.class);\r\n    \r\n            paramsDTO.setRandNum(12345);\r\n            return ResponseEntity.ok(paramsDTO);\r\n        }\r\n    }\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AMmJ2.png\r\n  [2]: https://onlinejsontools.com/url-encode-json\r\n  [3]: https://i.stack.imgur.com/lL222.png\r\n  [4]: https://i.stack.imgur.com/IZ6qw.png","title":"Spring Boot 3.0.0+ with JAVA class DTO","body":"<p><a href=\"https://i.stack.imgur.com/AMmJ2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AMmJ2.png\" alt=\"enter image description here\" /></a></p>\n<p>I am doing some testing in order to get a design idea. Through a request with JSON I want to create a DTO class within a GET</p>\n<pre><code>package org.crea.w4ag_mock.mocker;\n\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.experimental.Accessors;\nimport org.crea.w4ag_mock.enums.TimeFramesEnum;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@Accessors(chain = true)\npublic class ParamsDTO {\n\n    private String id;\n    private String name;\n    private TimeFramesEnum timeFramesEnum;\n    private double randNum;\n}\n</code></pre>\n<p>where (I'm also trying to figure out how to have Enun lowercase):</p>\n<pre><code>package org.crea.w4ag_mock.enums;\n\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic enum TimeFramesEnum {\n\n    /*\n    baseline = BASELINE\n    period2_2040 = PERIOD2_2040\n    period3_2070 = PERIOD2_2070\n    */\n\n    BASELINE,\n    PERIOD2_2040,\n    PERIOD2_2070\n}\n</code></pre>\n<p>I have my class Application (@SpringBootApplication) + Controller (@RestController):</p>\n<pre><code>package org.crea.w4ag_mock;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.crea.w4ag_mock.mocker.*;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.io.IOException;\n\n@SpringBootApplication\n@RestController\npublic class Water4AgriFoodMockerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Water4AgriFoodMockerApplication.class, args);\n\n    }\n\n    @GetMapping(&quot;mock&quot;)\n    @ResponseBody\n    public ResponseEntity&lt;ParamsDTO&gt; getMock(@RequestParam(value = &quot;pars&quot;) String parametersDTO) throws IOException {\n        final ParamsDTO paramsDTO =\n                new ObjectMapper()\n                        .readValue(parametersDTO, ParamsDTO.class);\n\n        paramsDTO.setRandNum(12345);\n        return ResponseEntity.ok(paramsDTO);\n    }\n\n}\n</code></pre>\n<p>I convert my JSON to a URL-encoded JSON (<a href=\"https://onlinejsontools.com/url-encode-json\" rel=\"nofollow noreferrer\">https://onlinejsontools.com/url-encode-json</a>). <strong>Note, this is because TOMCAT reports me an error with a plain JSON</strong>:</p>\n<pre><code>{\n&quot;id&quot;:&quot;1&quot;,\n&quot;name&quot;:&quot;test&quot;,\n&quot;timeFramesEnum&quot;:&quot;BASELINE&quot;\n}\n</code></pre>\n<p>And I use POSTMAN to test the whole thing:</p>\n<p><a href=\"https://i.stack.imgur.com/lL222.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lL222.png\" alt=\"enter image description here\" /></a></p>\n<p>So far so good, but if I create a proper Controller class I get the following error message in Postman:</p>\n<pre><code>package org.crea.w4ag_mock.controller;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.crea.w4ag_mock.mocker.*;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.io.IOException;\n\n@RestController\n@RequestMapping(path=&quot;api/v1/&quot;)\npublic class Water4AgriFoodMockController {\n\n    @GetMapping(&quot;mock1&quot;)\n    @ResponseBody\n    public ResponseEntity&lt;ParamsDTO&gt; getMock1(@RequestParam(value = &quot;pars&quot;) String parametersDTO) throws IOException {\n        final ParamsDTO paramsDTO =\n                new ObjectMapper()\n                        .readValue(parametersDTO, ParamsDTO.class);\n\n        paramsDTO.setRandNum(12345);\n        return ResponseEntity.ok(paramsDTO);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/IZ6qw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IZ6qw.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","javafx","jfoenix"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1677590916,"post_id":75592460,"comment_id":133364844,"body_markdown":"Use [MaterialFX instead](https://github.com/palexdev/MaterialFX), see [how to use it](https://stackoverflow.com/questions/71931192/using-materialfx-in-intellij/71931282#71931282).","body":"Use <a href=\"https://github.com/palexdev/MaterialFX\" rel=\"nofollow noreferrer\">MaterialFX instead</a>, see <a href=\"https://stackoverflow.com/questions/71931192/using-materialfx-in-intellij/71931282#71931282\">how to use it</a>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1677591081,"post_id":75592460,"comment_id":133364908,"body_markdown":"Probably you can require the correct module to use jfoenix (I don&#39;t know what that is), or delete your module-info and add the JavaFX modules manually, but I recommend changing to MaterialFX regardless, because of [things like this](https://stackoverflow.com/questions/70082473/working-with-javafx-in-maven-jfoenix-9-0-10-dependency-issue/70086754#70086754).","body":"Probably you can require the correct module to use jfoenix (I don&#39;t know what that is), or delete your module-info and add the JavaFX modules manually, but I recommend changing to MaterialFX regardless, because of <a href=\"https://stackoverflow.com/questions/70082473/working-with-javafx-in-maven-jfoenix-9-0-10-dependency-issue/70086754#70086754\">things like this</a>."},{"owner":{"account_id":27900049,"reputation":1,"user_id":21304525,"display_name":"markusnether"},"score":0,"creation_date":1677597427,"post_id":75592460,"comment_id":133367152,"body_markdown":"I am not allowed to use MaterialFx","body":"I am not allowed to use MaterialFx"}],"owner":{"account_id":27900049,"reputation":1,"user_id":21304525,"display_name":"markusnether"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677589418,"creation_date":1677589418,"question_id":75592460,"body_markdown":"I have used a jfoenix.jar file to add the Jfoenix elements to my Scenebuilder, then I went into Intelij and added this to the pom.xml:\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/com.jfoenix/jfoenix --&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.jfoenix&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jfoenix&lt;/artifactId&gt;\r\n  &lt;version&gt;9.0.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nmy entire pom.xml looks like this:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;Start&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;Start&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;junit.version&gt;5.9.1&lt;/junit.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n      &lt;version&gt;18.0.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n      &lt;version&gt;18.0.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n      &lt;version&gt;${junit.version}&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n      &lt;version&gt;${junit.version}&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.jfoenix/jfoenix --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.jfoenix&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jfoenix&lt;/artifactId&gt;\r\n      &lt;version&gt;9.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.10.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;18&lt;/source&gt;\r\n          &lt;target&gt;18&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.8&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n            &lt;id&gt;default-cli&lt;/id&gt;\r\n            &lt;configuration&gt;\r\n              &lt;mainClass&gt;com.example.start/com.example.start.HelloApplication&lt;/mainClass&gt;\r\n              &lt;launcher&gt;app&lt;/launcher&gt;\r\n              &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n              &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n              &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n              &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n              &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nMy problem, now when I insert something from jfoenix in the FXML file with scneebuilder, you don&#39;t see that when I run the FXMl file in the java project, only see the javafx elements?\r\n\r\nI don&#180;t now what i have to do?\r\n\r\nMy modulinfo looks so:\r\n\r\n```\r\nmodule com.example.start {\r\n  requires javafx.controls;\r\n  requires javafx.fxml;\r\n\r\n  opens com.example.start to javafx.fxml;\r\n  exports com.example.start;\r\n}\r\n```\r\n\r\nI don&#180;t know really what I have to do?\\`Hab","title":"I can&#180;t see the jfoenix elements, when i am running my application (Intelij and Maven)","body":"<p>I have used a jfoenix.jar file to add the Jfoenix elements to my Scenebuilder, then I went into Intelij and added this to the pom.xml:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.jfoenix/jfoenix --&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.jfoenix&lt;/groupId&gt;\n  &lt;artifactId&gt;jfoenix&lt;/artifactId&gt;\n  &lt;version&gt;9.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>my entire pom.xml looks like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\n  &lt;artifactId&gt;Start&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;Start&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;junit.version&gt;5.9.1&lt;/junit.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n      &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n      &lt;version&gt;18.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n      &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n      &lt;version&gt;18.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n      &lt;version&gt;${junit.version}&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n      &lt;version&gt;${junit.version}&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.jfoenix/jfoenix --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.jfoenix&lt;/groupId&gt;\n      &lt;artifactId&gt;jfoenix&lt;/artifactId&gt;\n      &lt;version&gt;9.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.10.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;18&lt;/source&gt;\n          &lt;target&gt;18&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n        &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.0.8&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n            &lt;id&gt;default-cli&lt;/id&gt;\n            &lt;configuration&gt;\n              &lt;mainClass&gt;com.example.start/com.example.start.HelloApplication&lt;/mainClass&gt;\n              &lt;launcher&gt;app&lt;/launcher&gt;\n              &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n              &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n              &lt;noManPages&gt;true&lt;/noManPages&gt;\n              &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n              &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>My problem, now when I insert something from jfoenix in the FXML file with scneebuilder, you don't see that when I run the FXMl file in the java project, only see the javafx elements?</p>\n<p>I don´t now what i have to do?</p>\n<p>My modulinfo looks so:</p>\n<pre><code>module com.example.start {\n  requires javafx.controls;\n  requires javafx.fxml;\n\n  opens com.example.start to javafx.fxml;\n  exports com.example.start;\n}\n</code></pre>\n<p>I don´t know really what I have to do?`Hab</p>\n"},{"tags":["java","key","store"],"answers":[{"tags":[],"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677589328,"creation_date":1677589328,"answer_id":75592441,"question_id":75592341,"body_markdown":"What you &#39;allow&#39; is up to you, but entries in a Java keystore are distinguished by the &#39;alias&#39; name you assign to them.  If you want to have different entries with the same subject, you can.\r\n\r\n[Documentation link](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/KeyStore.html)\r\n\r\n&gt; Each entry in a keystore is identified by an &quot;alias&quot; string. In the\r\n&gt; case of private keys and their associated certificate chains, these\r\n&gt; strings distinguish among the different ways in which the entity may\r\n&gt; authenticate itself. For example, the entity may authenticate itself\r\n&gt; using different certificate authorities, or using different public key\r\n&gt; algorithms.\r\n\r\n","title":"Do we allow upload the two certificates with same SubjectDN to the same trust-store in Java keystore","body":"<p>What you 'allow' is up to you, but entries in a Java keystore are distinguished by the 'alias' name you assign to them.  If you want to have different entries with the same subject, you can.</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/KeyStore.html\" rel=\"nofollow noreferrer\">Documentation link</a></p>\n<blockquote>\n<p>Each entry in a keystore is identified by an &quot;alias&quot; string. In the\ncase of private keys and their associated certificate chains, these\nstrings distinguish among the different ways in which the entity may\nauthenticate itself. For example, the entity may authenticate itself\nusing different certificate authorities, or using different public key\nalgorithms.</p>\n</blockquote>\n"}],"owner":{"account_id":27899980,"reputation":1,"user_id":21304464,"display_name":"Vinay Vinay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677589328,"creation_date":1677588778,"question_id":75592341,"body_markdown":"Do we allow upload the two certificates with same SubjectDN to the same trust-store in java keystore?. Any RFC reference we have which says this is not allowed?. \r\nWe have Certificate authority which can issue certificates with same SubjectDN and overlapping validity. Do we allow the upload of these certificates to same  trust store and how does the application choose the valid certificate from the 2 same certificates(as both certificates will have same subject DN)\r\n\r\nWe tried looking at the RFC and implementation for this","title":"Do we allow upload the two certificates with same SubjectDN to the same trust-store in Java keystore","body":"<p>Do we allow upload the two certificates with same SubjectDN to the same trust-store in java keystore?. Any RFC reference we have which says this is not allowed?.\nWe have Certificate authority which can issue certificates with same SubjectDN and overlapping validity. Do we allow the upload of these certificates to same  trust store and how does the application choose the valid certificate from the 2 same certificates(as both certificates will have same subject DN)</p>\n<p>We tried looking at the RFC and implementation for this</p>\n"},{"tags":["java","dynamic","predicate","functional-interface","lambda-metafactory"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1676421796,"post_id":75454466,"comment_id":133132859,"body_markdown":"The fourth parameter of `metafactory` should be `signature.erase()`. That said, do you realise that a `Predicate&lt;Cat&gt;` is not a `Predicate&lt;Animal&gt;`? The latter can test a dog, but the former cannot. It&#39;s the other way around - a `Predicate&lt;Animal&gt;` is a `Predicate&lt;? super Cat&gt;`.","body":"The fourth parameter of <code>metafactory</code> should be <code>signature.erase()</code>. That said, do you realise that a <code>Predicate&lt;Cat&gt;</code> is not a <code>Predicate&lt;Animal&gt;</code>? The latter can test a dog, but the former cannot. It&#39;s the other way around - a <code>Predicate&lt;Animal&gt;</code> is a <code>Predicate&lt;? super Cat&gt;</code>."},{"owner":{"account_id":19943495,"reputation":45,"user_id":14614743,"display_name":"zuzuri"},"score":0,"creation_date":1676422301,"post_id":75454466,"comment_id":133132908,"body_markdown":"I had tried it before with &#39;Object.class&#39; and not &#39;erase()&#39; to perform type erasure. So does that make a difference? Anyway, it finally works now, thank you very much! And yes, I mean to understand the difference between &#39;Predicate&lt;Cat&gt;&#39; and &#39;Predicate&lt;Animal&gt;&#39; - that&#39;s simple inheritance after all. Or do you still see a mistake somewhere in my approach?","body":"I had tried it before with &#39;Object.class&#39; and not &#39;erase()&#39; to perform type erasure. So does that make a difference? Anyway, it finally works now, thank you very much! And yes, I mean to understand the difference between &#39;Predicate&lt;Cat&gt;&#39; and &#39;Predicate&lt;Animal&gt;&#39; - that&#39;s simple inheritance after all. Or do you still see a mistake somewhere in my approach?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1676422447,"post_id":75454466,"comment_id":133132933,"body_markdown":"My point is that &quot;This method returns a boolean and always has an object as parameter, which always inherits from another fixed object.&quot; is not a `Predicate&lt;Parent&gt;`. It is not type safe to cast it to that.","body":"My point is that &quot;This method returns a boolean and always has an object as parameter, which always inherits from another fixed object.&quot; is not a <code>Predicate&lt;Parent&gt;</code>. It is not type safe to cast it to that."},{"owner":{"account_id":19943495,"reputation":45,"user_id":14614743,"display_name":"zuzuri"},"score":0,"creation_date":1676423243,"post_id":75454466,"comment_id":133133044,"body_markdown":"I think I understand. But how would you get around that and what other problems might arise otherwise?","body":"I think I understand. But how would you get around that and what other problems might arise otherwise?"}],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1677589291,"creation_date":1676422260,"answer_id":75454577,"question_id":75454466,"body_markdown":"Since you know the target interface type is `Predicate` you could use a lambda expression as well:\r\n\r\n    private Predicate&lt;Parent&gt; toPredicate(final ExampleInterface instance, final Method method) {\r\n        final MethodHandle handle = LOOKUP.unreflect(method)\r\n            .bindTo(instance)\r\n            .asType(MethodType.methodType(boolean.class, Parent.class);\r\n        \r\n        return parent -&gt; {\r\n            try {\r\n                return (boolean) handle.invokeExact(parent);\r\n            } catch (Throwable t) {\r\n                throw new RuntimeException(&quot;Should not happen&quot;, t);\r\n            }\r\n        };\r\n    }\r\n\r\nUsing LambdaMetafactory is only really beneficial in specific cases where a particular call site only sees 1 or 2 implementations of the interface. Also note that every time you create a metafactory, a new class is generated (unless it can be loaded from the CDS archive), which has its own costs associated with it. \r\n\r\nAlso, depending on the Java version you are using, these classes are strongly tied to the defining class loader. This started when the implementation was switched to [hidden classes](https://bugs.openjdk.org/browse/JDK-8238358) in Java 15. So, e.g. if the defining class loader is the application class loader, the classes are in practice never unloaded, and this can lead to metaspace exhaustion if `metafactory` is called a lot. (for regular use through `invokedynamic` the resolved instruction keeps the class alive any way, and strongly tying the class to the class loader saves memory elsewhere).\r\n\r\nThe thing you&#39;re getting wrong is the interface method type. It should be the erasure of the `test` method in `Predicate`:\r\n\r\n    final MethodHandle handle = LOOKUP.unreflect(method);\r\n\r\n    final CallSite callSite = LambdaMetafactory.metafactory(\r\n        LOOKUP,\r\n        &quot;test&quot;,\r\n        MethodType.methodType(Predicate.class, instance.getClass()),\r\n        MethodType.methodType(boolean.class, Object.class),\r\n        handle,\r\n        MethodType.methodType(boolean.class, Parent.class)\r\n    );","title":"How is it possible to dynamically convert a method object into a functional interface in Java?","body":"<p>Since you know the target interface type is <code>Predicate</code> you could use a lambda expression as well:</p>\n<pre><code>private Predicate&lt;Parent&gt; toPredicate(final ExampleInterface instance, final Method method) {\n    final MethodHandle handle = LOOKUP.unreflect(method)\n        .bindTo(instance)\n        .asType(MethodType.methodType(boolean.class, Parent.class);\n    \n    return parent -&gt; {\n        try {\n            return (boolean) handle.invokeExact(parent);\n        } catch (Throwable t) {\n            throw new RuntimeException(&quot;Should not happen&quot;, t);\n        }\n    };\n}\n</code></pre>\n<p>Using LambdaMetafactory is only really beneficial in specific cases where a particular call site only sees 1 or 2 implementations of the interface. Also note that every time you create a metafactory, a new class is generated (unless it can be loaded from the CDS archive), which has its own costs associated with it.</p>\n<p>Also, depending on the Java version you are using, these classes are strongly tied to the defining class loader. This started when the implementation was switched to <a href=\"https://bugs.openjdk.org/browse/JDK-8238358\" rel=\"nofollow noreferrer\">hidden classes</a> in Java 15. So, e.g. if the defining class loader is the application class loader, the classes are in practice never unloaded, and this can lead to metaspace exhaustion if <code>metafactory</code> is called a lot. (for regular use through <code>invokedynamic</code> the resolved instruction keeps the class alive any way, and strongly tying the class to the class loader saves memory elsewhere).</p>\n<p>The thing you're getting wrong is the interface method type. It should be the erasure of the <code>test</code> method in <code>Predicate</code>:</p>\n<pre><code>final MethodHandle handle = LOOKUP.unreflect(method);\n\nfinal CallSite callSite = LambdaMetafactory.metafactory(\n    LOOKUP,\n    &quot;test&quot;,\n    MethodType.methodType(Predicate.class, instance.getClass()),\n    MethodType.methodType(boolean.class, Object.class),\n    handle,\n    MethodType.methodType(boolean.class, Parent.class)\n);\n</code></pre>\n"}],"owner":{"account_id":19943495,"reputation":45,"user_id":14614743,"display_name":"zuzuri"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75454577,"answer_count":1,"score":3,"last_activity_date":1677589291,"creation_date":1676420489,"question_id":75454466,"body_markdown":"I have a few classes that each implement an interface. From these classes I search out a method using an annotation. This method returns a boolean and always has an object as parameter, which always inherits from another fixed object. Now I want to create a functional interface from this method. Optimally of course a Predicate, which takes over the mentioned parameter. This I have now tried for some time to implement with LambdaMetafactory:\r\n\r\n\r\n```\r\nprivate Predicate&lt;Parent&gt; toPredicate(final ExampleInterface instance, final Method method) {\r\n\ttry {\r\n\t\tfinal MethodHandle handle = LOOKUP.unreflect(method);\r\n\t\tfinal MethodType signature = MethodType.methodType(boolean.class, method.getParameters()[0].getType());\r\n\r\n\t\tfinal CallSite callSite = LambdaMetafactory.metafactory(\r\n\t\t\tLOOKUP,\r\n\t\t\t&quot;test&quot;,\r\n\t\t\tMethodType.methodType(Predicate.class, instance.getClass()),\r\n\t\t\tsignature,\r\n\t\t\thandle,\r\n\t\t\tsignature\r\n\t\t);\r\n\r\n\t\treturn (Predicate&lt;Parent&gt;) callSite.getTarget().invoke(instance);\r\n\t} catch (Throwable e) {\r\n\t\te.printStackTrace();\r\n\t\treturn null;\r\n\t}\r\n}\r\n```\r\n\r\n\r\nMy problem now is that when I call the Predicate&#39;s test method, an AbstractMethodError is thrown. When I use signature with (boolean.class, Parent.class) I get a LambdaConversionException. Is it even possible to implement it that dynamically? If yes, how?","title":"How is it possible to dynamically convert a method object into a functional interface in Java?","body":"<p>I have a few classes that each implement an interface. From these classes I search out a method using an annotation. This method returns a boolean and always has an object as parameter, which always inherits from another fixed object. Now I want to create a functional interface from this method. Optimally of course a Predicate, which takes over the mentioned parameter. This I have now tried for some time to implement with LambdaMetafactory:</p>\n<pre><code>private Predicate&lt;Parent&gt; toPredicate(final ExampleInterface instance, final Method method) {\n    try {\n        final MethodHandle handle = LOOKUP.unreflect(method);\n        final MethodType signature = MethodType.methodType(boolean.class, method.getParameters()[0].getType());\n\n        final CallSite callSite = LambdaMetafactory.metafactory(\n            LOOKUP,\n            &quot;test&quot;,\n            MethodType.methodType(Predicate.class, instance.getClass()),\n            signature,\n            handle,\n            signature\n        );\n\n        return (Predicate&lt;Parent&gt;) callSite.getTarget().invoke(instance);\n    } catch (Throwable e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n<p>My problem now is that when I call the Predicate's test method, an AbstractMethodError is thrown. When I use signature with (boolean.class, Parent.class) I get a LambdaConversionException. Is it even possible to implement it that dynamically? If yes, how?</p>\n"},{"tags":["java","android-room"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1677583233,"post_id":75591245,"comment_id":133362556,"body_markdown":"What&#39;s `AppDatabase.getDbIntance(this)`?","body":"What&#39;s <code>AppDatabase.getDbIntance(this)</code>?"},{"owner":{"account_id":25311834,"reputation":73,"user_id":19134480,"display_name":"Patrick Renaud"},"score":0,"creation_date":1677588774,"post_id":75591245,"comment_id":133364164,"body_markdown":"this is how i instantiate my appDataBase variable","body":"this is how i instantiate my appDataBase variable"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1677603861,"post_id":75591245,"comment_id":133369263,"body_markdown":"Post that class as well, specifically that method.","body":"Post that class as well, specifically that method."}],"owner":{"account_id":25311834,"reputation":73,"user_id":19134480,"display_name":"Patrick Renaud"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677588642,"creation_date":1677582758,"question_id":75591245,"body_markdown":"I am implementing an android app which retrieves my device location and store it in a table . I first instantiate AppDataBase Class and then initialize it in the onCreate() method . But when it comes to call a Dao method , i always get the error : \r\n Attempt to invoke virtual method &#39;com.example.locator.Interfaces.LocationDao com.example.locator.AppDatabase.locationDao()&#39; on a null object reference\r\n\r\nHere is the code i&#39;ve implemented : \r\n\r\n\r\n        public class MainActivity extends AppCompatActivity implements LocationListener {\r\n        \r\n        ActivityMainBinding binding;\r\n            AppDatabase appDatabase;\r\n            private Handler handler;\r\n            List&lt;String&gt; newPermissions;\r\n        \r\n            private LocationManager locationManager;\r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                binding=ActivityMainBinding.inflate(getLayoutInflater());\r\n                setContentView(binding.getRoot());\r\n                appDatabase=AppDatabase.getDbIntance(this);\r\n                newPermissions = new ArrayList&lt;&gt;(Arrays.asList(android.Manifest.permission.READ_EXTERNAL_STORAGE, android.Manifest.permission.RECEIVE_SMS,\r\n                        android.Manifest.permission.READ_SMS, android.Manifest.permission.SEND_SMS,\r\n                        android.Manifest.permission.ACCESS_FINE_LOCATION, android.Manifest.permission.ACCESS_COARSE_LOCATION,\r\n                        android.Manifest.permission.READ_PHONE_STATE, Manifest.permission.CAMERA));\r\n                if(Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.P) newPermissions.add(Manifest.permission.FOREGROUND_SERVICE);\r\n        \r\n                if(!checkPermission(this, newPermissions)){\r\n                    ActivityCompat.requestPermissions(this, newPermissions.toArray(new String[]{}), 200);\r\n                }\r\n        \r\n                locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n                // Request location updates\r\n                if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                    // TODO: Consider calling\r\n                    //    ActivityCompat#requestPermissions\r\n                    // here to request the missing permissions, and then overriding\r\n                    //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                    //                                          int[] grantResults)\r\n                    // to handle the case where the user grants the permission. See the documentation\r\n                    // for ActivityCompat#requestPermissions for more details.\r\n                    return;\r\n                }\r\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, new MainActivity());\r\n        \r\n                handler = new Handler();\r\n        \r\n                // Define the code block to be executed\r\n                Runnable runnable = new Runnable() {\r\n                    @SuppressLint(&quot;SetTextI18n&quot;)\r\n                    @Override\r\n                    public void run() {\r\n                        // Insert custom code here\r\n        \r\n                        Log.d(&quot;TAG&quot;, &quot;run: &quot; + &quot;run every 30s&quot;);\r\n        \r\n                        if(appDatabase!=null){\r\n                            if(appDatabase.locationDao().getAll()!=null){\r\n                                //  List&lt;GpsLocation&gt; list = new ArrayList&lt;&gt;();\r\n                                MainActivity.this.runOnUiThread(() -&gt; appDatabase.locationDao().getAll().observe(MainActivity.this, locations -&gt; {\r\n        \r\n                                    Collections.reverse(locations);\r\n                                    if(locations.size()&gt;0){\r\n                                        binding.Longitude.setText(&quot;Longitude : &quot;+locations.get(0).getLongitude());\r\n                                        binding.Latitude.setText(&quot;Latitude : &quot;+locations.get(0).getLatitude());\r\n                                        binding.Altitude.setText(&quot;Altitude : &quot;+locations.get(0).getAltitude());\r\n                                        binding.Accuracy.setText(&quot;Accuracy : &quot;+locations.get(0).getAccuracy());\r\n                                        binding.send.setVisibility(View.VISIBLE);\r\n                                    }\r\n        \r\n        \r\n                                }));\r\n                                binding.send.setOnClickListener(v-&gt;{\r\n        \r\n                                });\r\n                            }\r\n        \r\n                        }\r\n        \r\n                        // Repeat every 30 seconds\r\n                        handler.postDelayed(this, 30000L);\r\n                    }\r\n                };\r\n                handler.post(runnable);\r\n        \r\n            }\r\n        \r\n            @Override\r\n            public void onLocationChanged(@NonNull Location location) {\r\n                Log.d(&quot;TAG&quot;, &quot;onLocationChanged: checking .... &quot;);\r\n                if(location.getAccuracy()&lt;=5f){\r\n                    GpsLocation position=new GpsLocation();\r\n                    if(position!=null){\r\n                        Log.d(&quot;TAG&quot;, &quot;onLocationChanged: accuracy &lt;=5&quot;);\r\n                        double latitude = location.getLatitude();\r\n                        position.setLatitude(latitude);\r\n                        double longitude = location.getLongitude();\r\n                        position.setLongitude(longitude);\r\n                        double altitude=location.getAltitude();\r\n                        position.setAltitude(altitude);\r\n                        float accuracy=location.getAccuracy();\r\n                        position.setAccuracy(accuracy);\r\n                        //TODO: send message with positions\r\n                    }else{\r\n                        Log.d(&quot;TAG&quot;, &quot;onLocationChanged: position is null&quot;);\r\n                    }\r\n        \r\n                }else{\r\n                    GpsLocation position=new GpsLocation();\r\n                    if(position!=null){\r\n                        Log.d(&quot;TAG&quot;, &quot;onLocationChanged: accuracy &gt;=5&quot;);\r\n                        double latitude = location.getLatitude();\r\n                        position.setLatitude(latitude);\r\n                        double longitude = location.getLongitude();\r\n                        position.setLongitude(longitude);\r\n                        double altitude=location.getAltitude();\r\n                        position.setAltitude(altitude);\r\n                        float accuracy=location.getAccuracy();\r\n                        position.setAccuracy(accuracy);\r\n                        appDatabase.locationDao().insert(position);//Here is the part highlighted when    i get the error\r\n                    }else{\r\n                        Log.d(&quot;TAG&quot;, &quot;onLocationChanged: position is null&quot;);\r\n        \r\n                    }\r\n        \r\n        \r\n                }\r\n        \r\n            }\r\n        \r\n            @Override\r\n            public void onProviderEnabled(@NonNull String provider) {\r\n                LocationListener.super.onProviderEnabled(provider);\r\n            }\r\n        \r\n            @Override\r\n            public void onProviderDisabled(@NonNull String provider) {\r\n                LocationListener.super.onProviderDisabled(provider);\r\n            }\r\n        \r\n        \r\n            @Override\r\n            public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n                super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        \r\n                if(requestCode == 200){\r\n                    for(int g : grantResults){\r\n                        if(g != PackageManager.PERMISSION_GRANTED){\r\n                            Toast.makeText(this, &quot;Permission non accorde&quot;, Toast.LENGTH_SHORT).show();\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        \r\n        \r\n            private boolean checkPermission(Context context, List&lt;String&gt; permissions){\r\n                for(String p : permissions){\r\n                    if (ContextCompat.checkSelfPermission(context, p) != PackageManager.PERMISSION_GRANTED) return false;\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n    \r\n    //Here is my AppDataBase class : \r\n    \r\n    @Database(entities = {GpsLocation.class} , version =2)\r\n    \r\n    public abstract  class AppDatabase extends RoomDatabase {\r\n    \r\n        public abstract LocationDao locationDao();\r\n        public static AppDatabase instance;\r\n    \r\n        public static AppDatabase  getDbIntance(Context c){\r\n            if (instance ==null){\r\n                instance = Room.databaseBuilder(c.getApplicationContext() , AppDatabase.class , &quot;LocationDb&quot; )\r\n                        .fallbackToDestructiveMigration()\r\n                        .allowMainThreadQueries()\r\n                        .build();\r\n            }\r\n            return instance;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"AppDatabase instantiation always null even after initialization","body":"<p>I am implementing an android app which retrieves my device location and store it in a table . I first instantiate AppDataBase Class and then initialize it in the onCreate() method . But when it comes to call a Dao method , i always get the error :\nAttempt to invoke virtual method 'com.example.locator.Interfaces.LocationDao com.example.locator.AppDatabase.locationDao()' on a null object reference</p>\n<p>Here is the code i've implemented :</p>\n<pre><code>    public class MainActivity extends AppCompatActivity implements LocationListener {\n    \n    ActivityMainBinding binding;\n        AppDatabase appDatabase;\n        private Handler handler;\n        List&lt;String&gt; newPermissions;\n    \n        private LocationManager locationManager;\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            binding=ActivityMainBinding.inflate(getLayoutInflater());\n            setContentView(binding.getRoot());\n            appDatabase=AppDatabase.getDbIntance(this);\n            newPermissions = new ArrayList&lt;&gt;(Arrays.asList(android.Manifest.permission.READ_EXTERNAL_STORAGE, android.Manifest.permission.RECEIVE_SMS,\n                    android.Manifest.permission.READ_SMS, android.Manifest.permission.SEND_SMS,\n                    android.Manifest.permission.ACCESS_FINE_LOCATION, android.Manifest.permission.ACCESS_COARSE_LOCATION,\n                    android.Manifest.permission.READ_PHONE_STATE, Manifest.permission.CAMERA));\n            if(Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.P) newPermissions.add(Manifest.permission.FOREGROUND_SERVICE);\n    \n            if(!checkPermission(this, newPermissions)){\n                ActivityCompat.requestPermissions(this, newPermissions.toArray(new String[]{}), 200);\n            }\n    \n            locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n            // Request location updates\n            if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                // TODO: Consider calling\n                //    ActivityCompat#requestPermissions\n                // here to request the missing permissions, and then overriding\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                //                                          int[] grantResults)\n                // to handle the case where the user grants the permission. See the documentation\n                // for ActivityCompat#requestPermissions for more details.\n                return;\n            }\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, new MainActivity());\n    \n            handler = new Handler();\n    \n            // Define the code block to be executed\n            Runnable runnable = new Runnable() {\n                @SuppressLint(&quot;SetTextI18n&quot;)\n                @Override\n                public void run() {\n                    // Insert custom code here\n    \n                    Log.d(&quot;TAG&quot;, &quot;run: &quot; + &quot;run every 30s&quot;);\n    \n                    if(appDatabase!=null){\n                        if(appDatabase.locationDao().getAll()!=null){\n                            //  List&lt;GpsLocation&gt; list = new ArrayList&lt;&gt;();\n                            MainActivity.this.runOnUiThread(() -&gt; appDatabase.locationDao().getAll().observe(MainActivity.this, locations -&gt; {\n    \n                                Collections.reverse(locations);\n                                if(locations.size()&gt;0){\n                                    binding.Longitude.setText(&quot;Longitude : &quot;+locations.get(0).getLongitude());\n                                    binding.Latitude.setText(&quot;Latitude : &quot;+locations.get(0).getLatitude());\n                                    binding.Altitude.setText(&quot;Altitude : &quot;+locations.get(0).getAltitude());\n                                    binding.Accuracy.setText(&quot;Accuracy : &quot;+locations.get(0).getAccuracy());\n                                    binding.send.setVisibility(View.VISIBLE);\n                                }\n    \n    \n                            }));\n                            binding.send.setOnClickListener(v-&gt;{\n    \n                            });\n                        }\n    \n                    }\n    \n                    // Repeat every 30 seconds\n                    handler.postDelayed(this, 30000L);\n                }\n            };\n            handler.post(runnable);\n    \n        }\n    \n        @Override\n        public void onLocationChanged(@NonNull Location location) {\n            Log.d(&quot;TAG&quot;, &quot;onLocationChanged: checking .... &quot;);\n            if(location.getAccuracy()&lt;=5f){\n                GpsLocation position=new GpsLocation();\n                if(position!=null){\n                    Log.d(&quot;TAG&quot;, &quot;onLocationChanged: accuracy &lt;=5&quot;);\n                    double latitude = location.getLatitude();\n                    position.setLatitude(latitude);\n                    double longitude = location.getLongitude();\n                    position.setLongitude(longitude);\n                    double altitude=location.getAltitude();\n                    position.setAltitude(altitude);\n                    float accuracy=location.getAccuracy();\n                    position.setAccuracy(accuracy);\n                    //TODO: send message with positions\n                }else{\n                    Log.d(&quot;TAG&quot;, &quot;onLocationChanged: position is null&quot;);\n                }\n    \n            }else{\n                GpsLocation position=new GpsLocation();\n                if(position!=null){\n                    Log.d(&quot;TAG&quot;, &quot;onLocationChanged: accuracy &gt;=5&quot;);\n                    double latitude = location.getLatitude();\n                    position.setLatitude(latitude);\n                    double longitude = location.getLongitude();\n                    position.setLongitude(longitude);\n                    double altitude=location.getAltitude();\n                    position.setAltitude(altitude);\n                    float accuracy=location.getAccuracy();\n                    position.setAccuracy(accuracy);\n                    appDatabase.locationDao().insert(position);//Here is the part highlighted when    i get the error\n                }else{\n                    Log.d(&quot;TAG&quot;, &quot;onLocationChanged: position is null&quot;);\n    \n                }\n    \n    \n            }\n    \n        }\n    \n        @Override\n        public void onProviderEnabled(@NonNull String provider) {\n            LocationListener.super.onProviderEnabled(provider);\n        }\n    \n        @Override\n        public void onProviderDisabled(@NonNull String provider) {\n            LocationListener.super.onProviderDisabled(provider);\n        }\n    \n    \n        @Override\n        public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n            super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    \n            if(requestCode == 200){\n                for(int g : grantResults){\n                    if(g != PackageManager.PERMISSION_GRANTED){\n                        Toast.makeText(this, &quot;Permission non accorde&quot;, Toast.LENGTH_SHORT).show();\n                        return;\n                    }\n                }\n            }\n        }\n    \n    \n        private boolean checkPermission(Context context, List&lt;String&gt; permissions){\n            for(String p : permissions){\n                if (ContextCompat.checkSelfPermission(context, p) != PackageManager.PERMISSION_GRANTED) return false;\n            }\n            return true;\n        }\n    }\n\n//Here is my AppDataBase class : \n\n@Database(entities = {GpsLocation.class} , version =2)\n\npublic abstract  class AppDatabase extends RoomDatabase {\n\n    public abstract LocationDao locationDao();\n    public static AppDatabase instance;\n\n    public static AppDatabase  getDbIntance(Context c){\n        if (instance ==null){\n            instance = Room.databaseBuilder(c.getApplicationContext() , AppDatabase.class , &quot;LocationDb&quot; )\n                    .fallbackToDestructiveMigration()\n                    .allowMainThreadQueries()\n                    .build();\n        }\n        return instance;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","nullpointerexception","anylogic"],"answers":[{"tags":[],"owner":{"account_id":26395148,"reputation":11,"user_id":20046397,"display_name":"Alexey Talanin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677588537,"creation_date":1677588537,"answer_id":75592301,"question_id":75436844,"body_markdown":"If you create agents dynamically with the code you&#39;ve to call &quot;createAndStart(...)&quot; function before change this agent size. For your case it may be:\r\n\r\n    mycar newCar = new mycar();\r\n    newCar.createAndStart(this);\r\n    newCar.car.setSize(0.5);","title":"Anylogic Null pointer Exception While updating/changing the scale of 3D Object during model Run","body":"<p>If you create agents dynamically with the code you've to call &quot;createAndStart(...)&quot; function before change this agent size. For your case it may be:</p>\n<pre><code>mycar newCar = new mycar();\nnewCar.createAndStart(this);\nnewCar.car.setSize(0.5);\n</code></pre>\n"}],"owner":{"account_id":27714565,"reputation":9,"user_id":21156565,"display_name":"Ali Zee Shan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677588537,"creation_date":1676296798,"question_id":75436844,"body_markdown":"I am using Anylogic Personal Learning Edition (PLE) for a school project\r\nAnylogic allows to get the current scale value of a 3Dbject for example called &quot;car&quot; derived from agent let say called &quot;mycar, during the model Run by using two methods;\r\n```\r\n    //staticAgent.getScale();\r\n    mycar.getScale();         \r\n                      Or\r\n    //staticAgent.3DObj.getScale();\r\n    mycar.car.getScale();\r\n```\r\n\r\nWhen i update/change the scale of my 3Dobject using\r\n        \r\n```\r\n     //nonStaticAgent.setScale();\r\n     mycar newCar = new mycar();\r\n     newCar.setScale(0.5);\r\n\r\n     //it gives following error during code compilation\r\n\r\n     The method setScale(double) is undefined for the type mycar.\r\n```\r\n\r\nBut, When i try with \r\n```\r\n    mycar newCar = new mycar();\r\n    //NonStaticAgent.3Dobject.setScale();\r\n    newCar.car.setSize(0.5);\r\n```\r\n\r\nit does not gives any error at compilation, but when i click buttton to change size by calling above mentioned method during simulaiton run it gives following \r\n\r\n```\r\nError while executing user action\r\njava.lang.NullPointerException\r\nFor more details see Console\r\n```\r\n\r\n\r\n\r\n```\r\nAt console\r\njava.lang.NullPointerException\r\n\tat gettingsize.Main.executeShapeControlAction(Main.java:435)\r\n\tat gettingsize.Main$4.action(Main.java:496)\r\n\tat com.anylogic.engine.presentation.ShapeControl.executeAction(Unknown Source)\r\n\tat com.anylogic.engine.presentation.ShapeButton.executeUserAction(Unknown Source)\r\n\tat com.anylogic.engine.gui.ExperimentHost.executeUserAction(Unknown Source)\r\n\tat com.anylogic.engine.internal.webserver.a.onAction(Unknown Source)\r\n\tat com.anylogic.executor.basic.rest.BasicAnimationSessionController.lambda$null$3(BasicAnimationSessionController.java:71)\r\n\tat com.anylogic.engin.internal.webserver.d.acceptToAnimationSvgSession(Unknown Source)\r\n\tat com.anylogic.executor.basic.rest.BasicAnimationSessionController.lambda$startController$4(BasicAnimationSessionController.java:71)\r\n\tat spark.ResponseTransformerRouteImpl$1.handle(ResponseTransformerRouteImpl.java:47)\r\n\tat spark.http.matching.Routes.execute(Routes.java:61)\r\n\tat spark.http.matching.MatcherFilter.doFilter(MatcherFilter.java:134)\r\n\tat com.anylogic.engine.internal.webserver.config.ALServerFactory$1.lambda$0(Unknown Source)\r\n\tat org.eclipse.jetty.servlets.QoSFilter.doFilter(QoSFilter.java:202)\r\n\tat com.anylogic.engine.internal.webserver.config.ALServerFactory$1.doHandle(Unknown Source)\r\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1584)\r\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\r\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\r\n\tat org.eclipse.jetty.server.Server.handle(Server.java:501)\r\n\tat org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:383)\r\n\tat org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:556)\r\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:375)\r\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:273)\r\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\r\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\r\n\tat org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171)\r\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129)\r\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:375)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)\r\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```","title":"Anylogic Null pointer Exception While updating/changing the scale of 3D Object during model Run","body":"<p>I am using Anylogic Personal Learning Edition (PLE) for a school project\nAnylogic allows to get the current scale value of a 3Dbject for example called &quot;car&quot; derived from agent let say called &quot;mycar, during the model Run by using two methods;</p>\n<pre><code>    //staticAgent.getScale();\n    mycar.getScale();         \n                      Or\n    //staticAgent.3DObj.getScale();\n    mycar.car.getScale();\n</code></pre>\n<p>When i update/change the scale of my 3Dobject using</p>\n<pre><code>     //nonStaticAgent.setScale();\n     mycar newCar = new mycar();\n     newCar.setScale(0.5);\n\n     //it gives following error during code compilation\n\n     The method setScale(double) is undefined for the type mycar.\n</code></pre>\n<p>But, When i try with</p>\n<pre><code>    mycar newCar = new mycar();\n    //NonStaticAgent.3Dobject.setScale();\n    newCar.car.setSize(0.5);\n</code></pre>\n<p>it does not gives any error at compilation, but when i click buttton to change size by calling above mentioned method during simulaiton run it gives following</p>\n<pre><code>Error while executing user action\njava.lang.NullPointerException\nFor more details see Console\n</code></pre>\n<pre><code>At console\njava.lang.NullPointerException\n    at gettingsize.Main.executeShapeControlAction(Main.java:435)\n    at gettingsize.Main$4.action(Main.java:496)\n    at com.anylogic.engine.presentation.ShapeControl.executeAction(Unknown Source)\n    at com.anylogic.engine.presentation.ShapeButton.executeUserAction(Unknown Source)\n    at com.anylogic.engine.gui.ExperimentHost.executeUserAction(Unknown Source)\n    at com.anylogic.engine.internal.webserver.a.onAction(Unknown Source)\n    at com.anylogic.executor.basic.rest.BasicAnimationSessionController.lambda$null$3(BasicAnimationSessionController.java:71)\n    at com.anylogic.engin.internal.webserver.d.acceptToAnimationSvgSession(Unknown Source)\n    at com.anylogic.executor.basic.rest.BasicAnimationSessionController.lambda$startController$4(BasicAnimationSessionController.java:71)\n    at spark.ResponseTransformerRouteImpl$1.handle(ResponseTransformerRouteImpl.java:47)\n    at spark.http.matching.Routes.execute(Routes.java:61)\n    at spark.http.matching.MatcherFilter.doFilter(MatcherFilter.java:134)\n    at com.anylogic.engine.internal.webserver.config.ALServerFactory$1.lambda$0(Unknown Source)\n    at org.eclipse.jetty.servlets.QoSFilter.doFilter(QoSFilter.java:202)\n    at com.anylogic.engine.internal.webserver.config.ALServerFactory$1.doHandle(Unknown Source)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1584)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)\n    at org.eclipse.jetty.server.Server.handle(Server.java:501)\n    at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:383)\n    at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:556)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:375)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:273)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)\n    at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171)\n    at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129)\n    at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:375)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n"},{"tags":["java","compilation"],"comments":[{"owner":{"account_id":1241354,"reputation":1178,"user_id":1203882,"accept_rate":100,"display_name":"Clark Kent"},"score":0,"creation_date":1400087087,"post_id":23660817,"comment_id":36343750,"body_markdown":"Do you mean build a .class file from a .txt file? I would look into a Java Compiler API.","body":"Do you mean build a .class file from a .txt file? I would look into a Java Compiler API."},{"owner":{"account_id":1241354,"reputation":1178,"user_id":1203882,"accept_rate":100,"display_name":"Clark Kent"},"score":0,"creation_date":1400087588,"post_id":23660817,"comment_id":36344056,"body_markdown":"I&#39;d look into something like this: http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html For catching runtime errors like infinite loops, when you run the user&#39;s code, thread it with a timer. If the thread exceeds `x` seconds, kill it, then throw a timeout exception.","body":"I&#39;d look into something like this: <a href=\"http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.h&zwnj;&#8203;tml</a> For catching runtime errors like infinite loops, when you run the user&#39;s code, thread it with a timer. If the thread exceeds <code>x</code> seconds, kill it, then throw a timeout exception."},{"owner":{"account_id":4138529,"reputation":15,"user_id":3394563,"display_name":"SDsilver"},"score":0,"creation_date":1400251394,"post_id":23660817,"comment_id":36414180,"body_markdown":"@SaviourSelf Thank you, the timer works wonderfully, my only question is what would be a good count to use as a limit of throwing an error?","body":"@SaviourSelf Thank you, the timer works wonderfully, my only question is what would be a good count to use as a limit of throwing an error?"},{"owner":{"account_id":1241354,"reputation":1178,"user_id":1203882,"accept_rate":100,"display_name":"Clark Kent"},"score":0,"creation_date":1400258227,"post_id":23660817,"comment_id":36418648,"body_markdown":"@SDsilver There are online programming challenges like UVa Online Judge that use timeouts to set restrictions on how long your code can run before it&#39;s ruled wrong. I&#39;ve seen restrictions from 1 second to 5 seconds, but this would require hundreds of thousands of iterations through loops, activation frames, etc... If the thread still exists after `x` seconds, throw it. The problem with this is who is running the code. If it&#39;s running locally, you may want a user-set variable so they can change it if they&#39;re running a really slow system.The answer depends on what kind of source they&#39;re running.","body":"@SDsilver There are online programming challenges like UVa Online Judge that use timeouts to set restrictions on how long your code can run before it&#39;s ruled wrong. I&#39;ve seen restrictions from 1 second to 5 seconds, but this would require hundreds of thousands of iterations through loops, activation frames, etc... If the thread still exists after <code>x</code> seconds, throw it. The problem with this is who is running the code. If it&#39;s running locally, you may want a user-set variable so they can change it if they&#39;re running a really slow system.The answer depends on what kind of source they&#39;re running."}],"answers":[{"tags":[],"owner":{"account_id":38931,"reputation":32526,"user_id":112079,"display_name":"fvu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1400087592,"creation_date":1400087143,"answer_id":23660914,"question_id":23660817,"body_markdown":"Sounds like a great idea, but dynamically compiling classes and getting them to execute requires quite a lot of work.  There is a library called [Janino][1] that (in their own words):\r\n\r\n&gt; Janino is a super-small, super-fast Java™ compiler. Not only can it compile a set of source files to a set of class files like JAVAC, but also can it compile a Java™ expression, block, class body or source file in memory, load the bytecode and execute it directly in the same JVM.\r\n\r\nBy delegating the work related to actually compiling and running the dynamic code to Janino you can focus on the actual game logic.  \r\n\r\n  [1]: http://docs.codehaus.org/display/JANINO/Home","title":"Compile a .class file from a .txt file","body":"<p>Sounds like a great idea, but dynamically compiling classes and getting them to execute requires quite a lot of work.  There is a library called <a href=\"http://docs.codehaus.org/display/JANINO/Home\" rel=\"nofollow\">Janino</a> that (in their own words):</p>\n\n<blockquote>\n  <p>Janino is a super-small, super-fast Java™ compiler. Not only can it compile a set of source files to a set of class files like JAVAC, but also can it compile a Java™ expression, block, class body or source file in memory, load the bytecode and execute it directly in the same JVM.</p>\n</blockquote>\n\n<p>By delegating the work related to actually compiling and running the dynamic code to Janino you can focus on the actual game logic.  </p>\n"},{"tags":[],"owner":{"account_id":367775,"reputation":1173,"user_id":714158,"accept_rate":73,"display_name":"Kicsi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400088459,"creation_date":1400088459,"answer_id":23661274,"question_id":23660817,"body_markdown":"If you dont want to use an external library, you need to write your own ClassLoader. The most simple implementation i found is [here](https://kenai.com/projects/btrace/sources/hg/content/src/share/classes/com/sun/btrace/MemoryClassLoader.java?rev=452).\r\n\r\n    /*\r\n     * Copyright 2008-2010 Sun Microsystems, Inc.  All Rights Reserved.\r\n     * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\r\n     *\r\n     * This code is free software; you can redistribute it and/or modify it\r\n     * under the terms of the GNU General Public License version 2 only, as\r\n     * published by the Free Software Foundation.  Sun designates this\r\n     * particular file as subject to the &quot;Classpath&quot; exception as provided\r\n     * by Sun in the LICENSE file that accompanied this code.\r\n     *\r\n     * This code is distributed in the hope that it will be useful, but WITHOUT\r\n     * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\r\n     * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\r\n     * version 2 for more details (a copy is included in the LICENSE file that\r\n     * accompanied this code).\r\n     *\r\n     * You should have received a copy of the GNU General Public License version\r\n     * 2 along with this work; if not, write to the Free Software Foundation,\r\n     * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\r\n     *\r\n     * Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa Clara,\r\n     * CA 95054 USA or visit www.sun.com if you need additional information or\r\n     * have any questions.\r\n     */\r\n    \r\n    package com.sun.btrace;\r\n    \r\n    /**\r\n     * A simple class loader that loads from byte buffer.\r\n     *\r\n     * @author A. Sundararajan\r\n     */\r\n    final class MemoryClassLoader extends ClassLoader {\r\n        MemoryClassLoader() {\r\n            this(null);\r\n        }\r\n    \r\n        MemoryClassLoader(ClassLoader parent) {\r\n            super(parent);\r\n        }\r\n    \r\n        Class loadClass(String className, byte[] buf) \r\n            throws ClassNotFoundException {\r\n            return defineClass(className, buf, 0, buf.length);\r\n        }\r\n    }\r\n\r\n","title":"Compile a .class file from a .txt file","body":"<p>If you dont want to use an external library, you need to write your own ClassLoader. The most simple implementation i found is <a href=\"https://kenai.com/projects/btrace/sources/hg/content/src/share/classes/com/sun/btrace/MemoryClassLoader.java?rev=452\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>/*\n * Copyright 2008-2010 Sun Microsystems, Inc.  All Rights Reserved.\n * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.\n *\n * This code is free software; you can redistribute it and/or modify it\n * under the terms of the GNU General Public License version 2 only, as\n * published by the Free Software Foundation.  Sun designates this\n * particular file as subject to the \"Classpath\" exception as provided\n * by Sun in the LICENSE file that accompanied this code.\n *\n * This code is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n * version 2 for more details (a copy is included in the LICENSE file that\n * accompanied this code).\n *\n * You should have received a copy of the GNU General Public License version\n * 2 along with this work; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.\n *\n * Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa Clara,\n * CA 95054 USA or visit www.sun.com if you need additional information or\n * have any questions.\n */\n\npackage com.sun.btrace;\n\n/**\n * A simple class loader that loads from byte buffer.\n *\n * @author A. Sundararajan\n */\nfinal class MemoryClassLoader extends ClassLoader {\n    MemoryClassLoader() {\n        this(null);\n    }\n\n    MemoryClassLoader(ClassLoader parent) {\n        super(parent);\n    }\n\n    Class loadClass(String className, byte[] buf) \n        throws ClassNotFoundException {\n        return defineClass(className, buf, 0, buf.length);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400088508,"creation_date":1400088508,"answer_id":23661287,"question_id":23660817,"body_markdown":"You could consider to use a scripting language supported by the JVM such as Groovy for the dynamic part.","title":"Compile a .class file from a .txt file","body":"<p>You could consider to use a scripting language supported by the JVM such as Groovy for the dynamic part.</p>\n"},{"tags":[],"owner":{"account_id":26161043,"reputation":1,"user_id":19847580,"display_name":"Ihsan OZGE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677588358,"creation_date":1677588294,"answer_id":75592252,"question_id":23660817,"body_markdown":"You can easily do it by changing the &quot;fileName.txt&quot; file extension to &quot;fileName.java&quot; by clicking on name of the file assuming the file contains pure java source code as you said.  \r\n\r\nThen;\r\n\r\n-Open terminal (assuming java jdk is already installed on your computer if not install jdk from Oracle Website)\r\n-Come to directory where your file is located. (using cd &quot;directoryLocation&quot;)\r\n-write &quot;javac fileName.java&quot;\r\n-fileName.class file will be created on the same directory\r\n-on terminal write &quot;java filename&quot;\r\n-then your java file will be executed on the terminal console. \r\n","title":"Compile a .class file from a .txt file","body":"<p>You can easily do it by changing the &quot;fileName.txt&quot; file extension to &quot;fileName.java&quot; by clicking on name of the file assuming the file contains pure java source code as you said.</p>\n<p>Then;</p>\n<p>-Open terminal (assuming java jdk is already installed on your computer if not install jdk from Oracle Website)\n-Come to directory where your file is located. (using cd &quot;directoryLocation&quot;)\n-write &quot;javac fileName.java&quot;\n-fileName.class file will be created on the same directory\n-on terminal write &quot;java filename&quot;\n-then your java file will be executed on the terminal console.</p>\n"}],"owner":{"account_id":4138529,"reputation":15,"user_id":3394563,"display_name":"SDsilver"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1603,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":23660914,"answer_count":4,"score":-1,"last_activity_date":1677588358,"creation_date":1400086818,"question_id":23660817,"body_markdown":"I am progamming a game in which the player navigates puzzles by changing the source code of objects within the levels themselves. In order to do this I have a class extending JPanel which is to be written over with the edited source code from the player.  My question is how can I compile a class file from a text file, either using java utilities or using beanshell? The text file contains pure java but the player of the game may cause compilation or runtime errors (such as infinite loops) and I want to be able to catch said errors and alert the player. ","title":"Compile a .class file from a .txt file","body":"<p>I am progamming a game in which the player navigates puzzles by changing the source code of objects within the levels themselves. In order to do this I have a class extending JPanel which is to be written over with the edited source code from the player.  My question is how can I compile a class file from a text file, either using java utilities or using beanshell? The text file contains pure java but the player of the game may cause compilation or runtime errors (such as infinite loops) and I want to be able to catch said errors and alert the player. </p>\n"},{"tags":["java","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":5860066,"reputation":13475,"user_id":4616087,"display_name":"Marvin"},"score":4,"creation_date":1677587437,"post_id":75592067,"comment_id":133363742,"body_markdown":"So if you already suspect that your mapping might be incorrect, wouldn&#39;t it make sense to show us your mapping?","body":"So if you already suspect that your mapping might be incorrect, wouldn&#39;t it make sense to show us your mapping?"}],"answers":[{"tags":[],"owner":{"account_id":27899705,"reputation":1,"user_id":21304250,"display_name":"Burak G&#252;leş"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677587702,"creation_date":1677587702,"answer_id":75592141,"question_id":75592067,"body_markdown":"Okay I solved by mapping the Laboratorian and Patient entities to their IDs using the map() method of the ModelMapper object. \r\n\r\n    public ReportResponse findReportById(Long id) {\r\n    Optional&lt;Report&gt; report = reportRepository.findById(id);\r\n    if(report.isPresent()){\r\n        ReportResponse reportResponse = modelMapper.map(report.get(), ReportResponse.class);\r\n        reportResponse.setLaboratorianId(report.get().getLaboratorian().getId());\r\n        reportResponse.setPatientId(report.get().getPatient().getId());\r\n        return reportResponse;\r\n    }\r\n    return null;}\r\n\r\n","title":"Id null in Controller","body":"<p>Okay I solved by mapping the Laboratorian and Patient entities to their IDs using the map() method of the ModelMapper object.</p>\n<pre><code>public ReportResponse findReportById(Long id) {\nOptional&lt;Report&gt; report = reportRepository.findById(id);\nif(report.isPresent()){\n    ReportResponse reportResponse = modelMapper.map(report.get(), ReportResponse.class);\n    reportResponse.setLaboratorianId(report.get().getLaboratorian().getId());\n    reportResponse.setPatientId(report.get().getPatient().getId());\n    return reportResponse;\n}\nreturn null;}\n</code></pre>\n"}],"owner":{"account_id":27899705,"reputation":1,"user_id":21304250,"display_name":"Burak G&#252;leş"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1677587702,"creation_date":1677587268,"question_id":75592067,"body_markdown":"I develop with java. In the service layer I got the values from db such as &quot;diagnosisTitle&quot;, &quot;givenDate&quot; etc. also in the Report entity I mapped OneToMany to Laboratorian and Patient. When findById function calls Report values it works perfectly. But at the Controller side Laboratorian id and Patient id comes null.\r\n\r\nhere is my Service :     \r\n\r\n```\r\npublic ReportResponse findReportById(Long id) {\r\n        Optional&lt;Report&gt; report = reportRepository.findById(id);\r\n        if(report.isPresent()){\r\n            return modelMapper.map(report.get(), ReportResponse.class);\r\n        }\r\n        return null;\r\n    } \r\n```\r\n\r\n\r\nhere is my Controller :     \r\n```\r\n\r\n@GetMapping(&quot;/findById/{id}&quot;)\r\n    public ResponseEntity&lt;ReportResponse&gt; findReportById(@PathVariable(&quot;id&quot;) Long id){\r\n\r\n        ReportResponse resultReport = reportService.findReportById(id);\r\n            return ResponseEntity.ok(resultReport);\r\n    }\r\n```\r\n\r\nhere is the postman output when I send a GET localhost:8080/report/findById/102: \r\n\r\n```\r\n{\r\n    &quot;fileNo&quot;: 102,\r\n    &quot;diagnosisTitle&quot;: &quot;Kriz&quot;,\r\n    &quot;diagnosis&quot;: &quot;A&#231;ıklama&quot;,\r\n    &quot;givenDate&quot;: &quot;2023-02-27T08:07:41.382+00:00&quot;,\r\n    &quot;imageName&quot;: null,\r\n    &quot;labIdNo&quot;: null,\r\n    &quot;patientId&quot;: null\r\n}\r\n```\r\n\r\nI think I made a mistake about the Model Mapping.","title":"Id null in Controller","body":"<p>I develop with java. In the service layer I got the values from db such as &quot;diagnosisTitle&quot;, &quot;givenDate&quot; etc. also in the Report entity I mapped OneToMany to Laboratorian and Patient. When findById function calls Report values it works perfectly. But at the Controller side Laboratorian id and Patient id comes null.</p>\n<p>here is my Service :</p>\n<pre><code>public ReportResponse findReportById(Long id) {\n        Optional&lt;Report&gt; report = reportRepository.findById(id);\n        if(report.isPresent()){\n            return modelMapper.map(report.get(), ReportResponse.class);\n        }\n        return null;\n    } \n</code></pre>\n<p>here is my Controller :</p>\n<pre><code>\n@GetMapping(&quot;/findById/{id}&quot;)\n    public ResponseEntity&lt;ReportResponse&gt; findReportById(@PathVariable(&quot;id&quot;) Long id){\n\n        ReportResponse resultReport = reportService.findReportById(id);\n            return ResponseEntity.ok(resultReport);\n    }\n</code></pre>\n<p>here is the postman output when I send a GET localhost:8080/report/findById/102:</p>\n<pre><code>{\n    &quot;fileNo&quot;: 102,\n    &quot;diagnosisTitle&quot;: &quot;Kriz&quot;,\n    &quot;diagnosis&quot;: &quot;Açıklama&quot;,\n    &quot;givenDate&quot;: &quot;2023-02-27T08:07:41.382+00:00&quot;,\n    &quot;imageName&quot;: null,\n    &quot;labIdNo&quot;: null,\n    &quot;patientId&quot;: null\n}\n</code></pre>\n<p>I think I made a mistake about the Model Mapping.</p>\n"},{"tags":["java","spring-boot","noclassdeffounderror"],"owner":{"account_id":27899663,"reputation":1,"user_id":21304214,"display_name":"AzA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677587331,"creation_date":1677587016,"question_id":75592023,"body_markdown":"I&#39;m trying to run the project from the internet, here is an error I got:\r\n\r\n\r\n\r\n    2023-02-28 20:14:28.225 ERROR 13204 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n    \r\n    java.lang.NoClassDefFoundError: org/springframework/core/NativeDetector\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.&lt;init&gt;(AbstractAutowireCapableBeanFactory.java:180) ~[spring-beans-5.3.14.jar:5.3.14]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.&lt;init&gt;(DefaultListableBeanFactory.java:193) ~[spring-beans-5.3.14.jar:5.3.14]\r\n    \tat org.springframework.context.support.GenericApplicationContext.&lt;init&gt;(GenericApplicationContext.java:113) ~[spring-context-5.3.2.jar:5.3.2]\r\n    \tat org.springframework.web.context.support.GenericWebApplicationContext.&lt;init&gt;(GenericWebApplicationContext.java:81) ~[spring-web-5.3.2.jar:5.3.2]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.&lt;init&gt;(ServletWebServerApplicationContext.java:118) ~[spring-boot-2.4.1.jar:2.4.1]\r\n    \tat org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext.&lt;init&gt;(AnnotationConfigServletWebServerApplicationContext.java:72) ~[spring-boot-2.4.1.jar:2.4.1]\r\n    \tat org.springframework.boot.ApplicationContextFactory.lambda$static$0(ApplicationContextFactory.java:48) ~[spring-boot-2.4.1.jar:2.4.1]\r\n    \tat org.springframework.boot.SpringApplication.createApplicationContext(SpringApplication.java:597) ~[spring-boot-2.4.1.jar:2.4.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-2.4.1.jar:2.4.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1309) ~[spring-boot-2.4.1.jar:2.4.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1298) ~[spring-boot-2.4.1.jar:2.4.1]\r\n    \tat com.isolutions4u.onlineshopping.OnlineShoppingApplication.main(OnlineShoppingApplication.java:11) ~[classes/:na]\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.core.NativeDetector\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n    \t... 12 common frames omitted\r\n    \r\n    \r\n    Process finished with exit code 1\r\n\r\nAnd here my pom.xml file:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.4.1&lt;/version&gt;\r\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.isolutions4u&lt;/groupId&gt;\r\n    &lt;artifactId&gt;online-shopping&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;online-shopping&lt;/name&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.6.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.3.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.17&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.webflow&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-webflow&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.14&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;goals&gt;install&lt;/goals&gt;\r\n                    &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nI have tried to change something in dependencies, but it doesn&#39;t help\r\n\r\nI just want to understand why it&#39;s even not starting\r\n\r\n\r\n","title":"NoClassDefFoundError in SpringBoot","body":"<p>I'm trying to run the project from the internet, here is an error I got:</p>\n<pre><code>2023-02-28 20:14:28.225 ERROR 13204 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.NoClassDefFoundError: org/springframework/core/NativeDetector\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.&lt;init&gt;(AbstractAutowireCapableBeanFactory.java:180) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.&lt;init&gt;(DefaultListableBeanFactory.java:193) ~[spring-beans-5.3.14.jar:5.3.14]\n    at org.springframework.context.support.GenericApplicationContext.&lt;init&gt;(GenericApplicationContext.java:113) ~[spring-context-5.3.2.jar:5.3.2]\n    at org.springframework.web.context.support.GenericWebApplicationContext.&lt;init&gt;(GenericWebApplicationContext.java:81) ~[spring-web-5.3.2.jar:5.3.2]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.&lt;init&gt;(ServletWebServerApplicationContext.java:118) ~[spring-boot-2.4.1.jar:2.4.1]\n    at org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext.&lt;init&gt;(AnnotationConfigServletWebServerApplicationContext.java:72) ~[spring-boot-2.4.1.jar:2.4.1]\n    at org.springframework.boot.ApplicationContextFactory.lambda$static$0(ApplicationContextFactory.java:48) ~[spring-boot-2.4.1.jar:2.4.1]\n    at org.springframework.boot.SpringApplication.createApplicationContext(SpringApplication.java:597) ~[spring-boot-2.4.1.jar:2.4.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-2.4.1.jar:2.4.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1309) ~[spring-boot-2.4.1.jar:2.4.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1298) ~[spring-boot-2.4.1.jar:2.4.1]\n    at com.isolutions4u.onlineshopping.OnlineShoppingApplication.main(OnlineShoppingApplication.java:11) ~[classes/:na]\nCaused by: java.lang.ClassNotFoundException: org.springframework.core.NativeDetector\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    ... 12 common frames omitted\n\n\nProcess finished with exit code 1\n</code></pre>\n<p>And here my pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.1&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.isolutions4u&lt;/groupId&gt;\n    &lt;artifactId&gt;online-shopping&lt;/artifactId&gt;\n    &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;online-shopping&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;5.3.6.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;5.0.3.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.webflow&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webflow&lt;/artifactId&gt;\n            &lt;version&gt;2.5.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;5.3.14&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;goals&gt;install&lt;/goals&gt;\n                    &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I have tried to change something in dependencies, but it doesn't help</p>\n<p>I just want to understand why it's even not starting</p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1677513197,"post_id":75582593,"comment_id":133347803,"body_markdown":"You&#39;re going to *either* have to change your build script or change your test.  I personally would want to isolate where I&#39;m using those environment variables and inject them instead, since `System.getenv` introduces state that&#39;s outside of your control normally.","body":"You&#39;re going to <i>either</i> have to change your build script or change your test.  I personally would want to isolate where I&#39;m using those environment variables and inject them instead, since <code>System.getenv</code> introduces state that&#39;s outside of your control normally."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1677528750,"post_id":75582593,"comment_id":133352237,"body_markdown":"Even with plain `java`, `-Dthis=that` sets a **system property** NOT an env var. AND it does so only if before (to the left of) the &#39;what-to-run&#39; parameter (main class or module name or jar name, depending).","body":"Even with plain <code>java</code>, <code>-Dthis=that</code> sets a <b>system property</b> NOT an env var. AND it does so only if before (to the left of) the &#39;what-to-run&#39; parameter (main class or module name or jar name, depending)."}],"answers":[{"tags":[],"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677587041,"creation_date":1677587041,"answer_id":75592028,"question_id":75582593,"body_markdown":"found it. as simple as:\r\n\r\n```\r\nmy_var=xyz ./gradlew test \r\n```","title":"How to pass env variable to Gradle test via command line?","body":"<p>found it. as simple as:</p>\n<pre><code>my_var=xyz ./gradlew test \n</code></pre>\n"}],"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75592028,"answer_count":1,"score":3,"last_activity_date":1677587041,"creation_date":1677512729,"question_id":75582593,"body_markdown":"I have a standard java project layout and in some of my tests i have `System.getenv(&quot;my_var&quot;)`. I&#39;d like to do run my tests using command line (from CI server) and pass the value of env var. Something like\r\n```\r\n./gradlew test -Dmy_var=xyz\r\n```\r\n\r\nbut of course, this one doesn&#39;t work as tests are run by different jvm. so what&#39;s the exact command to pass the env var? i would prefer not to change my build scripts, create new tasks etc. i just want to pass env var via commandline. how can i do it?","title":"How to pass env variable to Gradle test via command line?","body":"<p>I have a standard java project layout and in some of my tests i have <code>System.getenv(&quot;my_var&quot;)</code>. I'd like to do run my tests using command line (from CI server) and pass the value of env var. Something like</p>\n<pre><code>./gradlew test -Dmy_var=xyz\n</code></pre>\n<p>but of course, this one doesn't work as tests are run by different jvm. so what's the exact command to pass the env var? i would prefer not to change my build scripts, create new tasks etc. i just want to pass env var via commandline. how can i do it?</p>\n"},{"tags":["java","c#",".net","ssl","ssl-certificate"],"answers":[{"tags":[],"owner":{"account_id":3436240,"reputation":30817,"user_id":12342238,"display_name":"JonasH"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676024762,"creation_date":1676024762,"answer_id":75409798,"question_id":75407392,"body_markdown":"I can&#39;t answer your specific questions but here is some thoughts:\r\n\r\nYou have not mentioned anything about how the server authenticates clients. So you might consider implementing something like client certificates. If you control both you probably want some way to ensure random attackers cannot connect.\r\n\r\nYou might consider creating a threat model. In many cases it is the things that you haven&#39;t thought about that cause problems. \r\n* If you are handling national security data or financial data you might want an external audit. Such might even be required in some cases. \r\n* If there is no way an attacker could sell, use, or ransom the data, then you will probably not be directly targeted. So you might worry more about mass attacks against known vulnerabilities, i.e. keep all your software up to date. \r\n* Consider other ways to mitigate risks. Are your server/client running in least privilege possible? Are you using a DMZ? Are firewalls correctly configured? Are credentials for support etc well managed?\r\n\r\n","title":"Securing TCP traffic and certificate pinning?","body":"<p>I can't answer your specific questions but here is some thoughts:</p>\n<p>You have not mentioned anything about how the server authenticates clients. So you might consider implementing something like client certificates. If you control both you probably want some way to ensure random attackers cannot connect.</p>\n<p>You might consider creating a threat model. In many cases it is the things that you haven't thought about that cause problems.</p>\n<ul>\n<li>If you are handling national security data or financial data you might want an external audit. Such might even be required in some cases.</li>\n<li>If there is no way an attacker could sell, use, or ransom the data, then you will probably not be directly targeted. So you might worry more about mass attacks against known vulnerabilities, i.e. keep all your software up to date.</li>\n<li>Consider other ways to mitigate risks. Are your server/client running in least privilege possible? Are you using a DMZ? Are firewalls correctly configured? Are credentials for support etc well managed?</li>\n</ul>\n"}],"owner":{"account_id":1000943,"reputation":1133,"user_id":1015802,"display_name":"groverboy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1677587005,"creation_date":1676008148,"question_id":75407392,"body_markdown":"We develop a Java application that serves requests over TCP. We also develop client libraries for the application, where each library supports a different language/platform (Java, .NET, etc.).\r\n\r\nUntil recently, TCP traffic was confined to a secure network. To support usage on an insecure network we implemented TLS using the recipes in [java-plain-and-tls-socket-examples](https://github.com/atomiteam/java-plain-and-tls-socket-examples). There are recipes here for both server and client, and a script to generate an X.509 certificate. Below is a summary of the recipe that we are using for TLS with _server-only_ authentication:\r\n\r\n- Create an X.509 root certificate that is self-signed.\r\n- Configure the server with a _keystore_ file that contains the certificate&#39;s identifying data plus the public and private keys.\r\n- Configure the client with a _trust store_ file that contains the same identifying data plus only the public key.\r\n\r\nThis looks like a setup for certificate pinning, as the client has a copy of the server certificate _before_ connecting. Apparently, when connecting, the client will use this data somehow to validate the certificate that the server sends.\r\n\r\nWe assume for now that this approach is valid for securing TCP traffic. Signing by a certificate authority seems unnecessary because we control both server and client.\r\n\r\nInitial testing shows that the implementation is working in our Java server and Java client (both running locally):\r\n\r\n- Client accepts a server certificate that matches data in the client&#39;s trust store.\r\n- Client rejects a server certificate that does not matches data in the client&#39;s trust store.\r\n- [tcpdump](https://www.tcpdump.org/) shows that TCP packets contain encrypted data.\r\n\r\n## .NET Client\r\n\r\nWe use [SslStream](https://learn.microsoft.com/en-us/dotnet/api/system.net.security.sslstream?view=net-5.0) to encrypt TCP traffic. As the documentation suggests, we do not specify a TLS version; instead we throw an exception if the version is below 1.2.\r\n\r\nWe&#39;re not confident about how to use [X509Chain.ChainPolicy.CustomTrustStore](https://learn.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509chainpolicy.customtruststore?view=net-5.0#system-security-cryptography-x509certificates-x509chainpolicy-customtruststore) correctly, because the documentation omits information like use cases for this type, and for option types like `X509KeyStorageFlags` and `X509VerificationFlags`.\r\n\r\nThe code below aims to mimic the recipe outlined above, i.e. configure a trust store data structure for the client to use when validating a server certificate. This approach seems equivalent to importing the certificate into the operating system&#39;s trust store.\r\n\r\n\r\n```csharp\r\n// Import the trust store.\r\nprivate X509Certificate2Collection GetCertificates(string storePath, string storePassword)\r\n{\r\n    byte[] bytes = File.ReadAllBytes(storePath);\r\n\r\n    var result = new X509Certificate2Collection();\r\n    result.Import(bytes, storePassword, X509KeyStorageFlags.EphemeralKeySet);\r\n    return result;\r\n}\r\n\r\n// Callback function to validate a certificate received from the server.\r\n// fCertificates stores the result of function GetCertificates.\r\nprivate bool ValidateServerCertificate(\r\n    object sender,\r\n    X509Certificate certificate,\r\n    X509Chain chain,\r\n    SslPolicyErrors sslPolicyErrors)\r\n{\r\n    // Do not allow this client to communicate with unauthenticated servers.\r\n    //\r\n    // With a self-signed certficate, sslPolicyErrors should be always equal to\r\n    // SslPolicyErrors.RemoteCertificateChainErrors.\r\n    var result = (SslPolicyErrors.RemoteCertificateChainErrors == sslPolicyErrors);\r\n    if (result)\r\n    {\r\n        // The values below are default values: set them to be explicit.\r\n        chain.ChainPolicy.VerificationFlags = X509VerificationFlags.NoFlag;\r\n        chain.ChainPolicy.RevocationMode = X509RevocationMode.NoCheck;\r\n    \r\n        chain.ChainPolicy.TrustMode = X509ChainTrustMode.CustomRootTrust;\r\n        chain.ChainPolicy.CustomTrustStore.AddRange(fCertificates);\r\n        result = chain.Build((X509Certificate2)certificate);\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n// Initialize SslStream.\r\nprivate SslStream GetStream(TcpClient tcpClient, string targetHost)\r\n{\r\n    SslStream sslStream = new SslStream(\r\n        tcpClient.GetStream(),\r\n        false,\r\n        new RemoteCertificateValidationCallback(ValidateServerCertificate),\r\n        null\r\n    );\r\n\r\n    try\r\n    {\r\n        sslStream.AuthenticateAsClient(targetHost);\r\n\r\n        // require TLS 1.2 or higher\r\n        if (sslStream.SslProtocol &lt; SslProtocols.Tls12)\r\n        {\r\n            throw new AuthenticationException($&quot;The SSL protocol ({sslStream.SslProtocol}) must be {SslProtocols.Tls12} or higher.&quot;);\r\n        }\r\n    }\r\n    catch (AuthenticationException caught)\r\n    {\r\n        sslStream.Dispose();\r\n        throw caught;\r\n    }\r\n\r\n    return sslStream;\r\n}\r\n```\r\n\r\nInitial testing has yielded results that vary depending on the operating system:\r\n\r\n- .NET 6 ASP.NET web client on Ubuntu on WSL2:\r\n    - Accepts a valid server certificate:\r\n        - The callback function argument `sslPolicyErrors` is equal to `SslPolicyErrors.RemoteCertificateChainErrors` (expected).\r\n        - Encrypts TCP packets (verified using [tcpdump](https://www.tcpdump.org/)).\r\n        - Automatically uses TLS 1.3.\r\n    - Rejects an invalid server certificate: `X509Chain.Build` returns `false` and the only chain status item is &quot;UntrustedRoot, self signed certificate&quot;.\r\n- .NET 6 MAUI client on MacOS:\r\n    1. Rejects a valid server certificate: the callback function argument `sslPolicyErrors` includes these values:\r\n        - `SslPolicyErrors.RemoteCertificateNameMismatch` (unexpected).\r\n        - `SslPolicyErrors.RemoteCertificateChainErrors` (expected).\r\n    1. If we change the code to ignore `sslPolicyErrors` then it:\r\n        - Accepts a valid server certificate and automatically uses TLS 1.2.\r\n        - Rejects an invalid server certificate (as above).\r\n\r\n## Questions\r\n\r\n1. In what ways, if any, could security be compromised with this .NET code?\r\n1. Upon reviewing discussions about &quot;certificate name mismatch&quot; (see `SslPolicyErrors.RemoteCertificateNameMismatch` above), it seems that our server certificate should include a `subjectAltName` field to specify allowed DNS names. Is this necessary, or would it be reasonable, as we are using certificate pinning, to ignore `sslPolicyErrors` when validating the server certificate?","title":"Securing TCP traffic and certificate pinning?","body":"<p>We develop a Java application that serves requests over TCP. We also develop client libraries for the application, where each library supports a different language/platform (Java, .NET, etc.).</p>\n<p>Until recently, TCP traffic was confined to a secure network. To support usage on an insecure network we implemented TLS using the recipes in <a href=\"https://github.com/atomiteam/java-plain-and-tls-socket-examples\" rel=\"nofollow noreferrer\">java-plain-and-tls-socket-examples</a>. There are recipes here for both server and client, and a script to generate an X.509 certificate. Below is a summary of the recipe that we are using for TLS with <em>server-only</em> authentication:</p>\n<ul>\n<li>Create an X.509 root certificate that is self-signed.</li>\n<li>Configure the server with a <em>keystore</em> file that contains the certificate's identifying data plus the public and private keys.</li>\n<li>Configure the client with a <em>trust store</em> file that contains the same identifying data plus only the public key.</li>\n</ul>\n<p>This looks like a setup for certificate pinning, as the client has a copy of the server certificate <em>before</em> connecting. Apparently, when connecting, the client will use this data somehow to validate the certificate that the server sends.</p>\n<p>We assume for now that this approach is valid for securing TCP traffic. Signing by a certificate authority seems unnecessary because we control both server and client.</p>\n<p>Initial testing shows that the implementation is working in our Java server and Java client (both running locally):</p>\n<ul>\n<li>Client accepts a server certificate that matches data in the client's trust store.</li>\n<li>Client rejects a server certificate that does not matches data in the client's trust store.</li>\n<li><a href=\"https://www.tcpdump.org/\" rel=\"nofollow noreferrer\">tcpdump</a> shows that TCP packets contain encrypted data.</li>\n</ul>\n<h2>.NET Client</h2>\n<p>We use <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.net.security.sslstream?view=net-5.0\" rel=\"nofollow noreferrer\">SslStream</a> to encrypt TCP traffic. As the documentation suggests, we do not specify a TLS version; instead we throw an exception if the version is below 1.2.</p>\n<p>We're not confident about how to use <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509chainpolicy.customtruststore?view=net-5.0#system-security-cryptography-x509certificates-x509chainpolicy-customtruststore\" rel=\"nofollow noreferrer\">X509Chain.ChainPolicy.CustomTrustStore</a> correctly, because the documentation omits information like use cases for this type, and for option types like <code>X509KeyStorageFlags</code> and <code>X509VerificationFlags</code>.</p>\n<p>The code below aims to mimic the recipe outlined above, i.e. configure a trust store data structure for the client to use when validating a server certificate. This approach seems equivalent to importing the certificate into the operating system's trust store.</p>\n<pre class=\"lang-cs prettyprint-override\"><code>// Import the trust store.\nprivate X509Certificate2Collection GetCertificates(string storePath, string storePassword)\n{\n    byte[] bytes = File.ReadAllBytes(storePath);\n\n    var result = new X509Certificate2Collection();\n    result.Import(bytes, storePassword, X509KeyStorageFlags.EphemeralKeySet);\n    return result;\n}\n\n// Callback function to validate a certificate received from the server.\n// fCertificates stores the result of function GetCertificates.\nprivate bool ValidateServerCertificate(\n    object sender,\n    X509Certificate certificate,\n    X509Chain chain,\n    SslPolicyErrors sslPolicyErrors)\n{\n    // Do not allow this client to communicate with unauthenticated servers.\n    //\n    // With a self-signed certficate, sslPolicyErrors should be always equal to\n    // SslPolicyErrors.RemoteCertificateChainErrors.\n    var result = (SslPolicyErrors.RemoteCertificateChainErrors == sslPolicyErrors);\n    if (result)\n    {\n        // The values below are default values: set them to be explicit.\n        chain.ChainPolicy.VerificationFlags = X509VerificationFlags.NoFlag;\n        chain.ChainPolicy.RevocationMode = X509RevocationMode.NoCheck;\n    \n        chain.ChainPolicy.TrustMode = X509ChainTrustMode.CustomRootTrust;\n        chain.ChainPolicy.CustomTrustStore.AddRange(fCertificates);\n        result = chain.Build((X509Certificate2)certificate);\n    }\n\n    return result;\n}\n\n// Initialize SslStream.\nprivate SslStream GetStream(TcpClient tcpClient, string targetHost)\n{\n    SslStream sslStream = new SslStream(\n        tcpClient.GetStream(),\n        false,\n        new RemoteCertificateValidationCallback(ValidateServerCertificate),\n        null\n    );\n\n    try\n    {\n        sslStream.AuthenticateAsClient(targetHost);\n\n        // require TLS 1.2 or higher\n        if (sslStream.SslProtocol &lt; SslProtocols.Tls12)\n        {\n            throw new AuthenticationException($&quot;The SSL protocol ({sslStream.SslProtocol}) must be {SslProtocols.Tls12} or higher.&quot;);\n        }\n    }\n    catch (AuthenticationException caught)\n    {\n        sslStream.Dispose();\n        throw caught;\n    }\n\n    return sslStream;\n}\n</code></pre>\n<p>Initial testing has yielded results that vary depending on the operating system:</p>\n<ul>\n<li>.NET 6 ASP.NET web client on Ubuntu on WSL2:\n<ul>\n<li>Accepts a valid server certificate:\n<ul>\n<li>The callback function argument <code>sslPolicyErrors</code> is equal to <code>SslPolicyErrors.RemoteCertificateChainErrors</code> (expected).</li>\n<li>Encrypts TCP packets (verified using <a href=\"https://www.tcpdump.org/\" rel=\"nofollow noreferrer\">tcpdump</a>).</li>\n<li>Automatically uses TLS 1.3.</li>\n</ul>\n</li>\n<li>Rejects an invalid server certificate: <code>X509Chain.Build</code> returns <code>false</code> and the only chain status item is &quot;UntrustedRoot, self signed certificate&quot;.</li>\n</ul>\n</li>\n<li>.NET 6 MAUI client on MacOS:\n<ol>\n<li>Rejects a valid server certificate: the callback function argument <code>sslPolicyErrors</code> includes these values:\n<ul>\n<li><code>SslPolicyErrors.RemoteCertificateNameMismatch</code> (unexpected).</li>\n<li><code>SslPolicyErrors.RemoteCertificateChainErrors</code> (expected).</li>\n</ul>\n</li>\n<li>If we change the code to ignore <code>sslPolicyErrors</code> then it:\n<ul>\n<li>Accepts a valid server certificate and automatically uses TLS 1.2.</li>\n<li>Rejects an invalid server certificate (as above).</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<h2>Questions</h2>\n<ol>\n<li>In what ways, if any, could security be compromised with this .NET code?</li>\n<li>Upon reviewing discussions about &quot;certificate name mismatch&quot; (see <code>SslPolicyErrors.RemoteCertificateNameMismatch</code> above), it seems that our server certificate should include a <code>subjectAltName</code> field to specify allowed DNS names. Is this necessary, or would it be reasonable, as we are using certificate pinning, to ignore <code>sslPolicyErrors</code> when validating the server certificate?</li>\n</ol>\n"},{"tags":["java","mysql","sql","jdbc"],"comments":[{"owner":{"account_id":1146969,"reputation":2471,"user_id":1129497,"accept_rate":86,"display_name":"Chris"},"score":1,"creation_date":1338289363,"post_id":10797794,"comment_id":14047173,"body_markdown":"put into a stored procedure, call the stored procedure. means you also dont have to redeploy your code when you want to make a change.","body":"put into a stored procedure, call the stored procedure. means you also dont have to redeploy your code when you want to make a change."},{"owner":{"account_id":274911,"reputation":76709,"user_id":567435,"accept_rate":91,"display_name":"Rahul"},"score":7,"creation_date":1338289405,"post_id":10797794,"comment_id":14047188,"body_markdown":"There is a property you have to set in connection string `allowMultiQueries=true`.","body":"There is a property you have to set in connection string <code>allowMultiQueries=true</code>."},{"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"score":0,"creation_date":1338289592,"post_id":10797794,"comment_id":14047277,"body_markdown":"probable duplicate : How to execute composite sql queries in java?[1]\n\n\n  [1]: http://stackoverflow.com/questions/6773393/how-to-execute-composite-sql-queries-in-java","body":"probable duplicate : How to execute composite sql queries in java?[1]     [1]: <a href=\"http://stackoverflow.com/questions/6773393/how-to-execute-composite-sql-queries-in-java\" title=\"how to execute composite sql queries in java\">stackoverflow.com/questions/6773393/&hellip;</a>"},{"owner":{"account_id":182385,"reputation":7573,"user_id":417045,"accept_rate":67,"display_name":"MilindaD"},"score":1,"creation_date":1338292117,"post_id":10797794,"comment_id":14048218,"body_markdown":"Hi Rahul, for this project I am using a plain old connection object and do you know where I should set &quot;allowMultiQueries=true&quot;. Have added the connection object code in the question","body":"Hi Rahul, for this project I am using a plain old connection object and do you know where I should set &quot;allowMultiQueries=true&quot;. Have added the connection object code in the question"},{"owner":{"account_id":9616958,"reputation":104,"user_id":12843029,"display_name":"Jagruuti"},"score":0,"creation_date":1678958757,"post_id":10797794,"comment_id":133634760,"body_markdown":"When I used &quot;allowMultiQueries=true&quot;, it gave me DisconnectNonTransientException. Why?","body":"When I used &quot;allowMultiQueries=true&quot;, it gave me DisconnectNonTransientException. Why?"}],"answers":[{"tags":[],"owner":{"account_id":1458820,"reputation":7821,"user_id":1373711,"accept_rate":83,"display_name":"JHS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338289489,"creation_date":1338289489,"answer_id":10797885,"question_id":10797794,"body_markdown":"Why dont you try and write a `Stored Procedure` for this?\r\n\r\nYou can get the `Result Set` out and in the same `Stored Procedure` you can `Insert` what you want.\r\n\r\nThe only thing is you might not get the newly inserted rows in the `Result Set` if you `Insert` after the `Select`.","title":"Multiple queries executed in java in single statement","body":"<p>Why dont you try and write a <code>Stored Procedure</code> for this?</p>\n\n<p>You can get the <code>Result Set</code> out and in the same <code>Stored Procedure</code> you can <code>Insert</code> what you want.</p>\n\n<p>The only thing is you might not get the newly inserted rows in the <code>Result Set</code> if you <code>Insert</code> after the <code>Select</code>.</p>\n"},{"tags":[],"owner":{"account_id":1490856,"reputation":1033,"user_id":1397969,"accept_rate":20,"display_name":"Himanshu Mohta"},"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1404295841,"creation_date":1338291975,"answer_id":10798490,"question_id":10797794,"body_markdown":"You can use Batch update but queries must be action(i.e. insert,update and delete) queries \r\n    \r\n       \r\n    Statement s = c.createStatement();\r\n    String s1 = &quot;update emp set name=&#39;abc&#39; where salary=984&quot;;\r\n    String s2 = &quot;insert into emp values (&#39;Osama&#39;,1420)&quot;;  \r\n    s.addBatch(s1);\r\n    s.addBatch(s2);\t\t\r\n    s.executeBatch();","title":"Multiple queries executed in java in single statement","body":"<p>You can use Batch update but queries must be action(i.e. insert,update and delete) queries </p>\n\n<pre><code>Statement s = c.createStatement();\nString s1 = \"update emp set name='abc' where salary=984\";\nString s2 = \"insert into emp values ('Osama',1420)\";  \ns.addBatch(s1);\ns.addBatch(s2);     \ns.executeBatch();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401367,"reputation":23742,"user_id":767881,"accept_rate":14,"display_name":"Ravinder Reddy"},"down_vote_count":1,"up_vote_count":166,"is_accepted":true,"score":165,"last_activity_date":1677586797,"creation_date":1338316429,"answer_id":10804730,"question_id":10797794,"body_markdown":"*I was wondering if it is possible to execute something like this using JDBC.*\r\n\r\n    &quot;SELECT * FROM TABLE;INSERT INTO TABLE;&quot;\r\n\r\nYes it is possible. There are two ways, as far as I know. They are\r\n\r\n 1. By setting database connection property to allow multiple queries,\r\n    separated by a semi-colon by default.\r\n 2. By calling a stored procedure that returns cursors implicit.\r\n\r\nFollowing examples demonstrate the above two possibilities.  \r\n\r\n**Example 1**: ( To allow multiple queries ):  \r\n\r\nWhile sending a connection request, you need to append a connection property `allowMultiQueries=true` to the database url. This is additional connection property to those if already exists some, like `autoReConnect=true`, etc.. Acceptable values for `allowMultiQueries` property are `true`, `false`, `yes`, and `no`. Any other value is rejected at runtime with an `SQLException`.  \r\n\r\n    String dbUrl = &quot;jdbc:mysql:///test?allowMultiQueries=true&quot;;  \r\n\r\nUnless such instruction is passed, an `SQLException` is thrown.\r\n\r\nYou have to use [`execute( String sql )`][1] or its other variants to fetch results of the query execution.  \r\n\r\n    boolean hasMoreResultSets = stmt.execute( multiQuerySqlString );\r\n\r\nTo iterate through and process results you require following steps:  \r\n\r\n    READING_QUERY_RESULTS: // label  \r\n        while ( hasMoreResultSets || stmt.getUpdateCount() != -1 ) {  \r\n            if ( hasMoreResultSets ) {  \r\n                Resultset rs = stmt.getResultSet();\r\n                // handle your rs here\r\n            } // if has rs\r\n            else { // if ddl/dml/...\r\n                int queryResult = stmt.getUpdateCount();  \r\n                if ( queryResult == -1 ) { // no more queries processed  \r\n                    break READING_QUERY_RESULTS;  \r\n                } // no more queries processed  \r\n                // handle success, failure, generated keys, etc here\r\n            } // if ddl/dml/...\r\n    \r\n            // check to continue in the loop  \r\n            hasMoreResultSets = stmt.getMoreResults();  \r\n        } // while results\r\n\r\n**Example 2**: Steps to follow:  \r\n\r\n 1. Create a procedure with one or more `select`, and `DML` queries.\r\n 2. Call it from java using `CallableStatement`.\r\n 3. You can capture multiple `ResultSet`s executed in procedure.  \r\n    DML results can&#39;t be captured but can issue another `select`  \r\n    to find how the rows are affected in the table.   \r\n\r\n*Sample table and procedure*:  \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    mysql&gt; create table tbl_mq( i int not null auto_increment, name varchar(10), primary key (i) );\r\n    Query OK, 0 rows affected (0.16 sec)\r\n    \r\n    mysql&gt; delimiter //\r\n    mysql&gt; create procedure multi_query()\r\n        -&gt; begin\r\n        -&gt;  select count(*) as name_count from tbl_mq;\r\n        -&gt;  insert into tbl_mq( names ) values ( &#39;ravi&#39; );\r\n        -&gt;  select last_insert_id();\r\n        -&gt;  select * from tbl_mq;\r\n        -&gt; end;\r\n        -&gt; //\r\n    Query OK, 0 rows affected (0.02 sec)\r\n    mysql&gt; delimiter ;\r\n    mysql&gt; call multi_query();\r\n    +------------+\r\n    | name_count |\r\n    +------------+\r\n    |          0 |\r\n    +------------+\r\n    1 row in set (0.00 sec)\r\n    \r\n    +------------------+\r\n    | last_insert_id() |\r\n    +------------------+\r\n    |                3 |\r\n    +------------------+\r\n    1 row in set (0.00 sec)\r\n    \r\n    +---+------+\r\n    | i | name |\r\n    +---+------+\r\n    | 1 | ravi |\r\n    +---+------+\r\n    1 row in set (0.00 sec)\r\n\r\n    Query OK, 0 rows affected (0.00 sec)\r\n\r\n*Call Procedure from Java*:  \r\n\r\n    CallableStatement cstmt = con.prepareCall( &quot;call multi_query()&quot; );  \r\n    boolean hasMoreResultSets = cstmt.execute();  \r\n    READING_QUERY_RESULTS:  \r\n        while ( hasMoreResultSets ) {  \r\n            Resultset rs = stmt.getResultSet();\r\n            // handle your rs here\r\n        } // while has more rs\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29\r\n\r\n\r\n\r\n","title":"Multiple queries executed in java in single statement","body":"<p><em>I was wondering if it is possible to execute something like this using JDBC.</em></p>\n<pre><code>&quot;SELECT * FROM TABLE;INSERT INTO TABLE;&quot;\n</code></pre>\n<p>Yes it is possible. There are two ways, as far as I know. They are</p>\n<ol>\n<li>By setting database connection property to allow multiple queries,\nseparated by a semi-colon by default.</li>\n<li>By calling a stored procedure that returns cursors implicit.</li>\n</ol>\n<p>Following examples demonstrate the above two possibilities.</p>\n<p><strong>Example 1</strong>: ( To allow multiple queries ):</p>\n<p>While sending a connection request, you need to append a connection property <code>allowMultiQueries=true</code> to the database url. This is additional connection property to those if already exists some, like <code>autoReConnect=true</code>, etc.. Acceptable values for <code>allowMultiQueries</code> property are <code>true</code>, <code>false</code>, <code>yes</code>, and <code>no</code>. Any other value is rejected at runtime with an <code>SQLException</code>.</p>\n<pre><code>String dbUrl = &quot;jdbc:mysql:///test?allowMultiQueries=true&quot;;  \n</code></pre>\n<p>Unless such instruction is passed, an <code>SQLException</code> is thrown.</p>\n<p>You have to use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29\" rel=\"noreferrer\"><code>execute( String sql )</code></a> or its other variants to fetch results of the query execution.</p>\n<pre><code>boolean hasMoreResultSets = stmt.execute( multiQuerySqlString );\n</code></pre>\n<p>To iterate through and process results you require following steps:</p>\n<pre><code>READING_QUERY_RESULTS: // label  \n    while ( hasMoreResultSets || stmt.getUpdateCount() != -1 ) {  \n        if ( hasMoreResultSets ) {  \n            Resultset rs = stmt.getResultSet();\n            // handle your rs here\n        } // if has rs\n        else { // if ddl/dml/...\n            int queryResult = stmt.getUpdateCount();  \n            if ( queryResult == -1 ) { // no more queries processed  \n                break READING_QUERY_RESULTS;  \n            } // no more queries processed  \n            // handle success, failure, generated keys, etc here\n        } // if ddl/dml/...\n\n        // check to continue in the loop  \n        hasMoreResultSets = stmt.getMoreResults();  \n    } // while results\n</code></pre>\n<p><strong>Example 2</strong>: Steps to follow:</p>\n<ol>\n<li>Create a procedure with one or more <code>select</code>, and <code>DML</code> queries.</li>\n<li>Call it from java using <code>CallableStatement</code>.</li>\n<li>You can capture multiple <code>ResultSet</code>s executed in procedure.<br />\nDML results can't be captured but can issue another <code>select</code><br />\nto find how the rows are affected in the table.</li>\n</ol>\n<p><em>Sample table and procedure</em>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>mysql&gt; create table tbl_mq( i int not null auto_increment, name varchar(10), primary key (i) );\nQuery OK, 0 rows affected (0.16 sec)\n\nmysql&gt; delimiter //\nmysql&gt; create procedure multi_query()\n    -&gt; begin\n    -&gt;  select count(*) as name_count from tbl_mq;\n    -&gt;  insert into tbl_mq( names ) values ( 'ravi' );\n    -&gt;  select last_insert_id();\n    -&gt;  select * from tbl_mq;\n    -&gt; end;\n    -&gt; //\nQuery OK, 0 rows affected (0.02 sec)\nmysql&gt; delimiter ;\nmysql&gt; call multi_query();\n+------------+\n| name_count |\n+------------+\n|          0 |\n+------------+\n1 row in set (0.00 sec)\n\n+------------------+\n| last_insert_id() |\n+------------------+\n|                3 |\n+------------------+\n1 row in set (0.00 sec)\n\n+---+------+\n| i | name |\n+---+------+\n| 1 | ravi |\n+---+------+\n1 row in set (0.00 sec)\n\nQuery OK, 0 rows affected (0.00 sec)\n</code></pre>\n<p><em>Call Procedure from Java</em>:</p>\n<pre><code>CallableStatement cstmt = con.prepareCall( &quot;call multi_query()&quot; );  \nboolean hasMoreResultSets = cstmt.execute();  \nREADING_QUERY_RESULTS:  \n    while ( hasMoreResultSets ) {  \n        Resultset rs = stmt.getResultSet();\n        // handle your rs here\n    } // while has more rs\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1239028,"reputation":171,"user_id":1202068,"display_name":"muye"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1352359095,"creation_date":1352359095,"answer_id":13284302,"question_id":10797794,"body_markdown":"Based on my testing, the correct flag is &quot;allowMultiQueries=true&quot;","title":"Multiple queries executed in java in single statement","body":"<p>Based on my testing, the correct flag is \"allowMultiQueries=true\"</p>\n"},{"tags":[],"owner":{"account_id":2227135,"reputation":1943,"user_id":1965599,"accept_rate":63,"display_name":"Glyn"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1422228645,"creation_date":1422228645,"answer_id":28142845,"question_id":10797794,"body_markdown":"Hint: If you have more than one connection property then separate them with:\r\n\r\n    &amp;amp;\r\n\r\nTo give you somthing like:\r\n\r\n    url=&quot;jdbc:mysql://localhost/glyndwr?autoReconnect=true&amp;amp;allowMultiQueries=true&quot;\r\n\r\nI hope this helps some one.\r\n\r\nRegards,\r\n\r\nGlyn\r\n","title":"Multiple queries executed in java in single statement","body":"<p>Hint: If you have more than one connection property then separate them with:</p>\n\n<pre><code>&amp;amp;\n</code></pre>\n\n<p>To give you somthing like:</p>\n\n<pre><code>url=\"jdbc:mysql://localhost/glyndwr?autoReconnect=true&amp;amp;allowMultiQueries=true\"\n</code></pre>\n\n<p>I hope this helps some one.</p>\n\n<p>Regards,</p>\n\n<p>Glyn</p>\n"},{"tags":[],"owner":{"account_id":7276694,"reputation":45,"user_id":5547901,"display_name":"Alexandros Topalidis"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1498645735,"creation_date":1498645735,"answer_id":44799962,"question_id":10797794,"body_markdown":"I think this is the easiest way for multy selection/update/insert/delete. You can run as many update/insert/delete as u want after select (you have to make a select first(a dummy if needed)) with executeUpdate(str) (just use new int(count1,count2,...)) and if u need a new selection close &#39;statement&#39; and &#39;connection&#39; and make new for next select. Like example:\r\n \r\n    String str1 = &quot;select * from users&quot;;\r\n\tString str9 = &quot;INSERT INTO `port`(device_id, potition, port_type, di_p_pt) VALUE (&#39;&quot;+value1+&quot;&#39;, &#39;&quot;+value2+&quot;&#39;, &#39;&quot;+value3+&quot;&#39;, &#39;&quot;+value4+&quot;&#39;)&quot;;\r\n\tString str2 = &quot;Select port_id from port where device_id = &#39;&quot;+value1+&quot;&#39; and potition = &#39;&quot;+value2+&quot;&#39; and port_type = &#39;&quot;+value3+&quot;&#39; &quot;;\r\n\ttry{  \r\n    \tClass.forName(&quot;com.mysql.jdbc.Driver&quot;).newInstance();\r\n        theConnection=(Connection) DriverManager.getConnection(dbURL,dbuser,dbpassword);  \r\n        theStatement = theConnection.prepareStatement(str1);\r\n        ResultSet theResult = theStatement.executeQuery();\r\n        int count8 = theStatement.executeUpdate(str9);\r\n        theStatement.close();\r\n    \ttheConnection.close();\r\n    \ttheConnection=DriverManager.getConnection(dbURL,dbuser,dbpassword);\r\n    \ttheStatement = theConnection.prepareStatement(str2);\r\n    \ttheResult = theStatement.executeQuery();\r\n        \r\n        ArrayList&lt;Port&gt; portList = new ArrayList&lt;Port&gt;();\r\n \t    while (theResult.next()) {\r\n \t    \tPort port = new Port();\r\n \t    \tport.setPort_id(theResult.getInt(&quot;port_id&quot;));\r\n \t    \t\r\n \t    \tportList.add(port);\r\n \t    }\r\nI hope it helps","title":"Multiple queries executed in java in single statement","body":"<p>I think this is the easiest way for multy selection/update/insert/delete. You can run as many update/insert/delete as u want after select (you have to make a select first(a dummy if needed)) with executeUpdate(str) (just use new int(count1,count2,...)) and if u need a new selection close 'statement' and 'connection' and make new for next select. Like example:</p>\n\n<pre><code>String str1 = \"select * from users\";\nString str9 = \"INSERT INTO `port`(device_id, potition, port_type, di_p_pt) VALUE ('\"+value1+\"', '\"+value2+\"', '\"+value3+\"', '\"+value4+\"')\";\nString str2 = \"Select port_id from port where device_id = '\"+value1+\"' and potition = '\"+value2+\"' and port_type = '\"+value3+\"' \";\ntry{  \n    Class.forName(\"com.mysql.jdbc.Driver\").newInstance();\n    theConnection=(Connection) DriverManager.getConnection(dbURL,dbuser,dbpassword);  \n    theStatement = theConnection.prepareStatement(str1);\n    ResultSet theResult = theStatement.executeQuery();\n    int count8 = theStatement.executeUpdate(str9);\n    theStatement.close();\n    theConnection.close();\n    theConnection=DriverManager.getConnection(dbURL,dbuser,dbpassword);\n    theStatement = theConnection.prepareStatement(str2);\n    theResult = theStatement.executeQuery();\n\n    ArrayList&lt;Port&gt; portList = new ArrayList&lt;Port&gt;();\n    while (theResult.next()) {\n        Port port = new Port();\n        port.setPort_id(theResult.getInt(\"port_id\"));\n\n        portList.add(port);\n    }\n</code></pre>\n\n<p>I hope it helps</p>\n"}],"owner":{"account_id":182385,"reputation":7573,"user_id":417045,"accept_rate":67,"display_name":"MilindaD"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237924,"favorite_count":0,"down_vote_count":0,"up_vote_count":122,"accepted_answer_id":10804730,"answer_count":6,"score":122,"last_activity_date":1677586797,"creation_date":1338289125,"question_id":10797794,"body_markdown":"Hi I was wondering if it is possible to execute something like this using JDBC as it currently provides an exception even though it is possible in the MySQL query browser.\r\n\r\n    &quot;SELECT FROM * TABLE;INSERT INTO TABLE;&quot;\r\n\r\nWhile I do realize that it is possible with having the SQL query string being split and the statement executed twice but I was wondering if there is a one time approach for this.\r\n\r\n\t\tString url = &quot;jdbc:mysql://localhost:3306/&quot;;\r\n\t\tString dbName = &quot;databaseinjection&quot;;\r\n\t\tString driver = &quot;com.mysql.jdbc.Driver&quot;;\r\n\t\tString sqlUsername = &quot;root&quot;; \r\n\t\tString sqlPassword = &quot;abc&quot;;\r\n\t\t\r\n\t\tClass.forName(driver).newInstance();\r\n\t\t\r\n\t\tconnection = DriverManager.getConnection(url+dbName, sqlUsername, sqlPassword);\r\n","title":"Multiple queries executed in java in single statement","body":"<p>Hi I was wondering if it is possible to execute something like this using JDBC as it currently provides an exception even though it is possible in the MySQL query browser.</p>\n\n<pre><code>\"SELECT FROM * TABLE;INSERT INTO TABLE;\"\n</code></pre>\n\n<p>While I do realize that it is possible with having the SQL query string being split and the statement executed twice but I was wondering if there is a one time approach for this.</p>\n\n<pre><code>    String url = \"jdbc:mysql://localhost:3306/\";\n    String dbName = \"databaseinjection\";\n    String driver = \"com.mysql.jdbc.Driver\";\n    String sqlUsername = \"root\"; \n    String sqlPassword = \"abc\";\n\n    Class.forName(driver).newInstance();\n\n    connection = DriverManager.getConnection(url+dbName, sqlUsername, sqlPassword);\n</code></pre>\n"},{"tags":["java","maven","testing","sonarqube","mutation-testing"],"answers":[{"tags":[],"owner":{"account_id":2730762,"reputation":26,"user_id":2354609,"display_name":"miguelgc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677586586,"creation_date":1638519807,"answer_id":70211359,"question_id":69975275,"body_markdown":"Apparently it was an issue of importing some mutators that were changed names in latest pitest versions:\r\n\r\nhttps://github.com/devcon5io/mutation-analysis-plugin/pull/52\r\n\r\nhttps://github.com/devcon5io/mutation-analysis-plugin/issues/55","title":"Warnings importing PITEST reports into Sonarqube","body":"<p>Apparently it was an issue of importing some mutators that were changed names in latest pitest versions:</p>\n<p><a href=\"https://github.com/devcon5io/mutation-analysis-plugin/pull/52\" rel=\"nofollow noreferrer\">https://github.com/devcon5io/mutation-analysis-plugin/pull/52</a></p>\n<p><a href=\"https://github.com/devcon5io/mutation-analysis-plugin/issues/55\" rel=\"nofollow noreferrer\">https://github.com/devcon5io/mutation-analysis-plugin/issues/55</a></p>\n"}],"owner":{"account_id":2730762,"reputation":26,"user_id":2354609,"display_name":"miguelgc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70211359,"answer_count":1,"score":0,"last_activity_date":1677586586,"creation_date":1636983463,"question_id":69975275,"body_markdown":"Sorry for the cross posting:\r\n\r\nhttps://community.sonarsource.com/t/importing-mutation-tests-with-pitest/52285/3\r\n\r\nI am very new to Sonarqube and QA and I am making sure the code (and unit tests) a contractor is providing is of a good quality.\r\n\r\nI am running maven to run pitests:\r\n\r\n`mvn clean install org.pitest:pitest-maven:mutationCoverage -DtimeoutConstant=10000 -DoutputFormats=XML`\r\n\r\nand I import the reports into Sonarqube community edition but I get a bunch of warnings that I don&#180;t know if they mean that there are mutation tests that are not imported\r\n\r\n`WARN: Found unknown mutation operator: org.pitest.mutationtest.engine.gregor.mutators.returns.NullReturnValsMutator`\r\n\r\nor\r\n\r\n`WARN: Found unknown mutation operator: WARN: Found unknown mutation operator: org.pitest.mutationtest.engine.gregor.mutators.returns.EmptyObjectReturnValsMutator`\r\n\r\nI run sonar scanner this way (I have anonimiced info):\r\n\r\n`&quot;C:\\route_to_sonar\\sonar-scanner-4.6.0.2311-windows\\bin\\sonar-scanner.bat&quot; -D&quot;sonar.projectKey=Gestor2CNegro&quot; -D&quot;sonar.sources=.&quot; -D&quot;sonar.host.url=http://localhost:9000&quot; -D&quot;sonar.login=ffffffffffffffffffffffffffffffffff&quot; -D&quot;sonar.dependencyCheck.htmlReportPath=.\\myproject\\dependency-check-report.html&quot; -D&quot;sonar.dependencyCheck.xmlReportPath=.\\myproject\\dependency-check-report.xml&quot; -D&quot;sonar.coverage.jacoco.xmlReportPaths=.\\myproject\\jacoco.xml&quot; -D&quot;dc5.mutationAnalysis.pitest.sensor.reports.directory=.\\myproject\\target\\pit-reports\\202111151408&quot; &quot;-Dhttp.proxyHost=myproxy&quot; &quot;-Dhttp.proxyPort=8080&quot;`\r\n\r\nI have enabled debug mode but I don&#180;t see any log reporting those warnings and giving me any clue.\r\n","title":"Warnings importing PITEST reports into Sonarqube","body":"<p>Sorry for the cross posting:</p>\n<p><a href=\"https://community.sonarsource.com/t/importing-mutation-tests-with-pitest/52285/3\" rel=\"nofollow noreferrer\">https://community.sonarsource.com/t/importing-mutation-tests-with-pitest/52285/3</a></p>\n<p>I am very new to Sonarqube and QA and I am making sure the code (and unit tests) a contractor is providing is of a good quality.</p>\n<p>I am running maven to run pitests:</p>\n<p><code>mvn clean install org.pitest:pitest-maven:mutationCoverage -DtimeoutConstant=10000 -DoutputFormats=XML</code></p>\n<p>and I import the reports into Sonarqube community edition but I get a bunch of warnings that I don´t know if they mean that there are mutation tests that are not imported</p>\n<p><code>WARN: Found unknown mutation operator: org.pitest.mutationtest.engine.gregor.mutators.returns.NullReturnValsMutator</code></p>\n<p>or</p>\n<p><code>WARN: Found unknown mutation operator: WARN: Found unknown mutation operator: org.pitest.mutationtest.engine.gregor.mutators.returns.EmptyObjectReturnValsMutator</code></p>\n<p>I run sonar scanner this way (I have anonimiced info):</p>\n<p><code>&quot;C:\\route_to_sonar\\sonar-scanner-4.6.0.2311-windows\\bin\\sonar-scanner.bat&quot; -D&quot;sonar.projectKey=Gestor2CNegro&quot; -D&quot;sonar.sources=.&quot; -D&quot;sonar.host.url=http://localhost:9000&quot; -D&quot;sonar.login=ffffffffffffffffffffffffffffffffff&quot; -D&quot;sonar.dependencyCheck.htmlReportPath=.\\myproject\\dependency-check-report.html&quot; -D&quot;sonar.dependencyCheck.xmlReportPath=.\\myproject\\dependency-check-report.xml&quot; -D&quot;sonar.coverage.jacoco.xmlReportPaths=.\\myproject\\jacoco.xml&quot; -D&quot;dc5.mutationAnalysis.pitest.sensor.reports.directory=.\\myproject\\target\\pit-reports\\202111151408&quot; &quot;-Dhttp.proxyHost=myproxy&quot; &quot;-Dhttp.proxyPort=8080&quot;</code></p>\n<p>I have enabled debug mode but I don´t see any log reporting those warnings and giving me any clue.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1677613272,"post_id":75591856,"comment_id":133371747,"body_markdown":"I just happened to be updating an old answer of mine that I&#39;m testing by sending messages to the same device. I also just happened to have an S22 with Android 13, and it all still works as expected for me. Are you sure the version is the only difference in your test setups?","body":"I just happened to be updating an old answer of mine that I&#39;m testing by sending messages to the same device. I also just happened to have an S22 with Android 13, and it all still works as expected for me. Are you sure the version is the only difference in your test setups?"}],"owner":{"account_id":6580126,"reputation":151,"user_id":5084646,"display_name":"Hashim Ali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677585944,"creation_date":1677585944,"question_id":75591856,"body_markdown":"I have an android app that requires verification of the phone number of a device for registration. Since we can&#39;t extract phone number of the device programmatically the app sends SMS to phone number which is provided by the user from UI and for my use case it is mostly the phone number of the device itself.  \r\n\r\n - App Sends SMS to the same device it is running on\r\n - App listens for Incoming registration SMS\r\n - Replies to the SMS \r\n - Listens for Reply and confirms Phone number\r\n\r\nThe problem is that It works fine on API version &lt; 33, but on API version 33 (tested on Samsung S21, S22) app sends SMS (and I can see it appears on the phone&#39;s messaging app) but it&#39;s SMS Received broadcast isn&#39;t received inside the App.\r\n\r\nHow can I send SMS to the same device and then listen for it on Android API 33. \r\nAny help will be appreciated.","title":"Can&#39;t Send SMS to Same Android device API level 33","body":"<p>I have an android app that requires verification of the phone number of a device for registration. Since we can't extract phone number of the device programmatically the app sends SMS to phone number which is provided by the user from UI and for my use case it is mostly the phone number of the device itself.</p>\n<ul>\n<li>App Sends SMS to the same device it is running on</li>\n<li>App listens for Incoming registration SMS</li>\n<li>Replies to the SMS</li>\n<li>Listens for Reply and confirms Phone number</li>\n</ul>\n<p>The problem is that It works fine on API version &lt; 33, but on API version 33 (tested on Samsung S21, S22) app sends SMS (and I can see it appears on the phone's messaging app) but it's SMS Received broadcast isn't received inside the App.</p>\n<p>How can I send SMS to the same device and then listen for it on Android API 33.\nAny help will be appreciated.</p>\n"},{"tags":["java","string","split"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":1,"creation_date":1615174803,"post_id":66524013,"comment_id":117601186,"body_markdown":"Can you add some sample data which helps to explain what you are trying to achieve here.","body":"Can you add some sample data which helps to explain what you are trying to achieve here."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1615175340,"post_id":66524013,"comment_id":117601259,"body_markdown":"You can do this with regex, though the actual regex is a little complicated, it would take me a bit to work it out.","body":"You can do this with regex, though the actual regex is a little complicated, it would take me a bit to work it out."},{"owner":{"account_id":20689108,"reputation":17580,"user_id":15273968,"display_name":"the Hutt"},"score":0,"creation_date":1615177229,"post_id":66524013,"comment_id":117601557,"body_markdown":"Use BreakIterator classes to handle this for multiple languages.","body":"Use BreakIterator classes to handle this for multiple languages."}],"answers":[{"tags":[],"owner":{"account_id":19480873,"reputation":30974,"user_id":14251221,"display_name":"Spectric"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615176609,"creation_date":1615176304,"answer_id":66524158,"question_id":66524013,"body_markdown":"Regex version (simplest):\r\n\r\n    String text = &quot;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&quot;;\r\n    int lineMaxLength = 10;\r\n    System.out.println(java.util.Arrays.toString(\r\n        text.split(&quot;(?&lt;=\\\\G.{&quot;+lineMaxLength+&quot;})&quot;)\r\n    ));\r\n\r\nWhich prints:\r\n\r\n    [Lorem Ipsu, m is simpl, y dummy te, xt of the , printing a, nd typeset, ting indus, try. Lorem,  Ipsum has,  been the , industry&#39;s,  standard , dummy text,  ever sinc, e the 1500, s, when an,  unknown p, rinter too, k a galley,  of type a, nd scrambl, ed it to m, ake a type,  specimen , book.]\r\n\r\nWithout regex:\r\n\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    \r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n          String text = &quot;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&quot;;\r\n          int lineMaxLength = 10;\r\n          List&lt;String&gt; lines = new ArrayList&lt;&gt;();\r\n          int length = text.length();\r\n          StringBuilder s = new StringBuilder();\r\n          for(int i = 0; i &lt; length; i++){\r\n              if (i % lineMaxLength == 0){\r\n                  if(i != 0){\r\n                      lines.add(s.toString());\r\n                  }\r\n                  s = new StringBuilder();\r\n              }\r\n              s.append(text.charAt(i));\r\n          }\r\n      int linesLength = lines.size();\r\n      for(int i= 0; i &lt; linesLength; i++){\r\n          System.out.println(lines.get(i));\r\n      }\r\n        }\r\n    }\r\n\r\n\r\nWhich prints:\r\n\r\n    Lorem Ipsu\r\n    m is simpl\r\n    y dummy te\r\n    xt of the \r\n    printing a\r\n    nd typeset\r\n    ting indus\r\n    try. Lorem\r\n     Ipsum has\r\n     been the \r\n    industry&#39;s\r\n     standard \r\n    dummy text\r\n     ever sinc\r\n    e the 1500\r\n    s, when an\r\n     unknown p\r\n    rinter too\r\n    k a galley\r\n     of type a\r\n    nd scrambl\r\n    ed it to m\r\n    ake a type\r\n     specimen ","title":"Java - How would I split a string into multiple lines depending on an input?","body":"<p>Regex version (simplest):</p>\n<pre><code>String text = &quot;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&quot;;\nint lineMaxLength = 10;\nSystem.out.println(java.util.Arrays.toString(\n    text.split(&quot;(?&lt;=\\\\G.{&quot;+lineMaxLength+&quot;})&quot;)\n));\n</code></pre>\n<p>Which prints:</p>\n<pre><code>[Lorem Ipsu, m is simpl, y dummy te, xt of the , printing a, nd typeset, ting indus, try. Lorem,  Ipsum has,  been the , industry's,  standard , dummy text,  ever sinc, e the 1500, s, when an,  unknown p, rinter too, k a galley,  of type a, nd scrambl, ed it to m, ake a type,  specimen , book.]\n</code></pre>\n<p>Without regex:</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\n\npublic class MyClass {\n    public static void main(String args[]) {\n      String text = &quot;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&quot;;\n      int lineMaxLength = 10;\n      List&lt;String&gt; lines = new ArrayList&lt;&gt;();\n      int length = text.length();\n      StringBuilder s = new StringBuilder();\n      for(int i = 0; i &lt; length; i++){\n          if (i % lineMaxLength == 0){\n              if(i != 0){\n                  lines.add(s.toString());\n              }\n              s = new StringBuilder();\n          }\n          s.append(text.charAt(i));\n      }\n  int linesLength = lines.size();\n  for(int i= 0; i &lt; linesLength; i++){\n      System.out.println(lines.get(i));\n  }\n    }\n}\n</code></pre>\n<p>Which prints:</p>\n<pre><code>Lorem Ipsu\nm is simpl\ny dummy te\nxt of the \nprinting a\nnd typeset\nting indus\ntry. Lorem\n Ipsum has\n been the \nindustry's\n standard \ndummy text\n ever sinc\ne the 1500\ns, when an\n unknown p\nrinter too\nk a galley\n of type a\nnd scrambl\ned it to m\nake a type\n specimen \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615176965,"creation_date":1615176455,"answer_id":66524171,"question_id":66524013,"body_markdown":"This sort of works.  I picked a very short &quot;line&quot; length of 10 characters, you should probably increase this.  But it shows how you might do this without too much code.  Cheange the &quot;10&quot; in the regex to a different number to increase the line length.\r\n\r\n(I changed the code a bit to make it more obvious that this method does not split words in the middle but always splits at a white space.)\r\n\r\n\r\n\r\n       public static void main( String[] args ) {\r\n          String s = &quot;This is a test. This is a test. This is a test. This is a test. This is a test. This is a test.  &quot;;\r\n          String regex = &quot;.{1,10}\\\\s&quot;;\r\n          Matcher m = Pattern.compile( regex ).matcher( s );\r\n          ArrayList&lt;String&gt; lines = new ArrayList&lt;&gt;();\r\n          while( m.find()  ) {\r\n             lines.add(  m.group() );\r\n          }\r\n          System.out.println( String.join( &quot;\\n&quot;, lines ) );\r\n       }\r\n\r\n   \r\nrun:\r\n\r\n    This is a \r\n    test. This \r\n    is a test. \r\n    This is a \r\n    test. This \r\n    is a test. \r\n    This is a \r\n    test. This \r\n    is a test. \r\n    BUILD SUCCESSFUL (total time: 0 seconds)\r\n    \r\n           ","title":"Java - How would I split a string into multiple lines depending on an input?","body":"<p>This sort of works.  I picked a very short &quot;line&quot; length of 10 characters, you should probably increase this.  But it shows how you might do this without too much code.  Cheange the &quot;10&quot; in the regex to a different number to increase the line length.</p>\n<p>(I changed the code a bit to make it more obvious that this method does not split words in the middle but always splits at a white space.)</p>\n<pre><code>   public static void main( String[] args ) {\n      String s = &quot;This is a test. This is a test. This is a test. This is a test. This is a test. This is a test.  &quot;;\n      String regex = &quot;.{1,10}\\\\s&quot;;\n      Matcher m = Pattern.compile( regex ).matcher( s );\n      ArrayList&lt;String&gt; lines = new ArrayList&lt;&gt;();\n      while( m.find()  ) {\n         lines.add(  m.group() );\n      }\n      System.out.println( String.join( &quot;\\n&quot;, lines ) );\n   }\n</code></pre>\n<p>run:</p>\n<pre><code>This is a \ntest. This \nis a test. \nThis is a \ntest. This \nis a test. \nThis is a \ntest. This \nis a test. \nBUILD SUCCESSFUL (total time: 0 seconds)\n\n       \n</code></pre>\n"},{"tags":[],"owner":{"account_id":20689108,"reputation":17580,"user_id":15273968,"display_name":"the Hutt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615177410,"creation_date":1615176707,"answer_id":66524197,"question_id":66524013,"body_markdown":"Use WordIterator like this. BreakIterator classes are locale sensitive. You can use with different languages.\r\n\r\n    public static void main(String[] args) {\r\n    \tString msg = &quot;This is a long message. Message is too long. Long is the message&quot;;\r\n    \tint widthLimit = 15;\r\n    \tprintWithLimitedWidth(msg, widthLimit);\r\n    }\r\n    \r\n    static void printWithLimitedWidth(String s, int limit) {\r\n    \tBreakIterator br = BreakIterator.getWordInstance(); //you can get locale specific instance to handle different languages.\r\n    \tbr.setText(s);\r\n    \tint currLenght = 0;\r\n    \tint start = br.first();\r\n        int end = br.next();\r\n    \r\n        while (end != BreakIterator.DONE) {\r\n           String word = s.substring(start,end);\r\n           currLenght += word.length(); \r\n           if (currLenght &lt;= limit) {\r\n              System.out.print(word);\r\n           } else {\r\n        \t   currLenght = 0;\r\n        \t   System.out.print(&quot;\\n&quot;+word);\r\n           }\r\n           start = end;\r\n           end = br.next();\r\n        }\r\n    }\r\nOutput:\r\n\r\n    This is a long \r\n    message. Message is \r\n    too long. Long is \r\n    the message\r\nThis is a sample code. Handle white space and other special characters according to your needs.\r\nFor more info refer https://docs.oracle.com/javase/tutorial/i18n/text/about.html\r\n","title":"Java - How would I split a string into multiple lines depending on an input?","body":"<p>Use WordIterator like this. BreakIterator classes are locale sensitive. You can use with different languages.</p>\n<pre><code>public static void main(String[] args) {\n    String msg = &quot;This is a long message. Message is too long. Long is the message&quot;;\n    int widthLimit = 15;\n    printWithLimitedWidth(msg, widthLimit);\n}\n\nstatic void printWithLimitedWidth(String s, int limit) {\n    BreakIterator br = BreakIterator.getWordInstance(); //you can get locale specific instance to handle different languages.\n    br.setText(s);\n    int currLenght = 0;\n    int start = br.first();\n    int end = br.next();\n\n    while (end != BreakIterator.DONE) {\n       String word = s.substring(start,end);\n       currLenght += word.length(); \n       if (currLenght &lt;= limit) {\n          System.out.print(word);\n       } else {\n           currLenght = 0;\n           System.out.print(&quot;\\n&quot;+word);\n       }\n       start = end;\n       end = br.next();\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>This is a long \nmessage. Message is \ntoo long. Long is \nthe message\n</code></pre>\n<p>This is a sample code. Handle white space and other special characters according to your needs.\nFor more info refer <a href=\"https://docs.oracle.com/javase/tutorial/i18n/text/about.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/i18n/text/about.html</a></p>\n"},{"tags":[],"owner":{"account_id":9885251,"reputation":33,"user_id":7319945,"display_name":"Vaibhav Deshmukh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615179418,"creation_date":1615179418,"answer_id":66524494,"question_id":66524013,"body_markdown":"    int maxlength = 10;\r\n    String message = &quot;1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\r\n    String transformedMessage = message.replaceAll(&quot;(?&lt;=\\\\G.{&quot; + maxlength + &quot;})&quot;, &quot;\\n&quot;);\r\n    System.out.println(transformedMessage);\r\n    /*Output\r\n    1234567890\r\n    ABCDEFGHIJ\r\n    KLMNOPQRST\r\n    UVWXYZ\r\n    */","title":"Java - How would I split a string into multiple lines depending on an input?","body":"<pre><code>int maxlength = 10;\nString message = &quot;1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\nString transformedMessage = message.replaceAll(&quot;(?&lt;=\\\\G.{&quot; + maxlength + &quot;})&quot;, &quot;\\n&quot;);\nSystem.out.println(transformedMessage);\n/*Output\n1234567890\nABCDEFGHIJ\nKLMNOPQRST\nUVWXYZ\n*/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23554557,"reputation":71,"user_id":17596747,"display_name":"RasulOs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677585902,"creation_date":1677585902,"answer_id":75591848,"question_id":66524013,"body_markdown":"A little bit of improved @markspace code to get the last words too (matcher does not get the last words because of the end of the line):\r\n\r\n\r\n    public static void main( String[] args ) {\r\n        String s = &quot;I am new to Java and want to split a message that a user inputs into multiple lines depending on what has been inputted as the maximum length. How would I go about repeating it? Here is what I have so far:&quot;;\r\n    \r\n        String regex = &quot;.{1,24}(\\\\s|$)&quot;;\r\n    \r\n        Matcher m = Pattern.compile(regex).matcher(s);\r\n    \r\n        while (m.find()) {\r\n            System.out.println(m.group());\r\n        }","title":"Java - How would I split a string into multiple lines depending on an input?","body":"<p>A little bit of improved @markspace code to get the last words too (matcher does not get the last words because of the end of the line):</p>\n<pre><code>public static void main( String[] args ) {\n    String s = &quot;I am new to Java and want to split a message that a user inputs into multiple lines depending on what has been inputted as the maximum length. How would I go about repeating it? Here is what I have so far:&quot;;\n\n    String regex = &quot;.{1,24}(\\\\s|$)&quot;;\n\n    Matcher m = Pattern.compile(regex).matcher(s);\n\n    while (m.find()) {\n        System.out.println(m.group());\n    }\n</code></pre>\n"}],"owner":{"account_id":20897056,"reputation":31,"user_id":15351000,"display_name":"Kezza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1178,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":5,"score":2,"last_activity_date":1677585902,"creation_date":1615174722,"question_id":66524013,"body_markdown":"I am new to Java and want to split a message that a user inputs into multiple lines depending on what has been inputted as the maximum length. How would I go about repeating it? Here is what I have so far:\r\n```           \r\nint rem = m - maxlength;\r\nSystem.out.println(message.substring(0, message.length() - rem));\r\nSystem.out.println(message.substring(message.length() - rem)); \r\n```","title":"Java - How would I split a string into multiple lines depending on an input?","body":"<p>I am new to Java and want to split a message that a user inputs into multiple lines depending on what has been inputted as the maximum length. How would I go about repeating it? Here is what I have so far:</p>\n<pre><code>int rem = m - maxlength;\nSystem.out.println(message.substring(0, message.length() - rem));\nSystem.out.println(message.substring(message.length() - rem)); \n</code></pre>\n"},{"tags":["java","time","wine"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1677586407,"post_id":75591843,"comment_id":133363418,"body_markdown":"Don&#39;t use `Instant` for measurements. Use `System.nanoTime()` instead which is guaranteed to be chronologically strictly increasing (`Instant.now()` can go &quot;backwards&quot;, i.e. the latter of two measurements can give you a time before the former). You will not necessarily get a better precision, but it&#39;s worth a try. https://stackoverflow.com/questions/351565/system-currenttimemillis-vs-system-nanotime compares the two","body":"Don&#39;t use <code>Instant</code> for measurements. Use <code>System.nanoTime()</code> instead which is guaranteed to be chronologically strictly increasing (<code>Instant.now()</code> can go &quot;backwards&quot;, i.e. the latter of two measurements can give you a time before the former). You will not necessarily get a better precision, but it&#39;s worth a try. <a href=\"https://stackoverflow.com/questions/351565/system-currenttimemillis-vs-system-nanotime\" title=\"system currenttimemillis vs system nanotime\">stackoverflow.com/questions/351565/&hellip;</a> compares the two"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":1,"creation_date":1677586434,"post_id":75591843,"comment_id":133363428,"body_markdown":"If you don&#39;t care about the actual time, but rather *time differences*, then you could use `System.nanoTime()`.","body":"If you don&#39;t care about the actual time, but rather <i>time differences</i>, then you could use <code>System.nanoTime()</code>."},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1677589810,"post_id":75591843,"comment_id":133364475,"body_markdown":"You are confusing &#39;accuracy&#39; with the number of digits in a value.","body":"You are confusing &#39;accuracy&#39; with the number of digits in a value."},{"owner":{"account_id":2194239,"reputation":1833,"user_id":1940385,"display_name":"Tomer Arazy"},"score":0,"creation_date":1677590900,"post_id":75591843,"comment_id":133364837,"body_markdown":"I need the number of microseconds since epoch, at the moment we&#39;re using `ChronoUnit.MICROS.between(Instant.EPOCH, Instant.now())`","body":"I need the number of microseconds since epoch, at the moment we&#39;re using <code>ChronoUnit.MICROS.between(Instant.EPOCH, Instant.now())</code>"}],"owner":{"account_id":2194239,"reputation":1833,"user_id":1940385,"display_name":"Tomer Arazy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677585891,"creation_date":1677585891,"question_id":75591843,"body_markdown":"We&#39;re running a Java 11 windows application on a Centos 8 using Wine 6.\r\n\r\nWhen we made the switch from Wine 4 to 6 we saw that `Instant.now` started to return values in Millisecond accuracy instead of nanos/micros.\r\n\r\nOne of our developers at the time was able to trace it to a specific function in wine code and apply a patch to reverse it.\r\n\r\nUnfortunately that developer is long gone, and so is the patch :( And unfortunately I&#39;ve no idea how to trace that change my self.\r\n\r\nNow we want to migrate to Wine 8 but when we do that we still suffer from that accuracy issue, our application is very latency sensitive and we rely on microseconds accuracy for measurement.\r\n\r\nIs anyone else familiar with that problem and has any idea how to fix it? We&#39;re building Wine from source so I&#39;m down with anything.\r\n\r\nOr maybe we should use something other than `Instant.now()` that is more portable?","title":"Java Instant.now returns millisecond accuracy when running on under Wine","body":"<p>We're running a Java 11 windows application on a Centos 8 using Wine 6.</p>\n<p>When we made the switch from Wine 4 to 6 we saw that <code>Instant.now</code> started to return values in Millisecond accuracy instead of nanos/micros.</p>\n<p>One of our developers at the time was able to trace it to a specific function in wine code and apply a patch to reverse it.</p>\n<p>Unfortunately that developer is long gone, and so is the patch :( And unfortunately I've no idea how to trace that change my self.</p>\n<p>Now we want to migrate to Wine 8 but when we do that we still suffer from that accuracy issue, our application is very latency sensitive and we rely on microseconds accuracy for measurement.</p>\n<p>Is anyone else familiar with that problem and has any idea how to fix it? We're building Wine from source so I'm down with anything.</p>\n<p>Or maybe we should use something other than <code>Instant.now()</code> that is more portable?</p>\n"},{"tags":["java","hashcode"],"answers":[{"tags":[],"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677585771,"creation_date":1677585405,"answer_id":75591750,"question_id":75591581,"body_markdown":"It is just the way `HashCodeBuilder` builds the hash code. It just happens that you get the same result for these numbers\r\n\r\n    new HashCodeBuilder(17, 37).append(8079).append(7540).append(15774).toHashCode()\r\n    int iTotal = 17;\r\n    int iConstant = 37;\r\n    iTotal = iTotal * iConstant + 8079;\r\n    iTotal = iTotal * iConstant + 7540;\r\n    iTotal = iTotal * iConstant + 15774;\r\n\r\niTotal = 12216006\r\n\r\n    new HashCodeBuilder(17, 37).append(8099).append(6801).append(15737).toHashCode()\r\n    iTotal = 17;\r\n    iConstant = 37;\r\n    iTotal = iTotal * iConstant + 8099;\r\n    iTotal = iTotal * iConstant + 6801;\r\n    iTotal = iTotal * iConstant + 15737;\r\n\r\niTotal = 12216006\r\n\r\n\r\nYou can get different values by using a different initial number for one of them, `19` instead of `17` for example. But there will be cases where 2 objects have the same hashcode. Hashcodes are not guaranteed to be unique.\r\n\r\nThis is the `HashCodeBuilder` code:\r\n\r\n    public HashCodeBuilder(int initialOddNumber, int multiplierOddNumber) {\r\n        Validate.isTrue(initialOddNumber % 2 != 0, &quot;HashCodeBuilder requires an odd initial value&quot;, new Object[0]);\r\n        Validate.isTrue(multiplierOddNumber % 2 != 0, &quot;HashCodeBuilder requires an odd multiplier&quot;, new Object[0]);\r\n        this.iConstant = multiplierOddNumber;\r\n        this.iTotal = initialOddNumber;\r\n    }\r\n\r\n    public HashCodeBuilder append(int value) {\r\n        this.iTotal = this.iTotal * this.iConstant + value;\r\n        return this;\r\n    }\r\n","title":"Hash Code Builder generate duplicate hash code","body":"<p>It is just the way <code>HashCodeBuilder</code> builds the hash code. It just happens that you get the same result for these numbers</p>\n<pre><code>new HashCodeBuilder(17, 37).append(8079).append(7540).append(15774).toHashCode()\nint iTotal = 17;\nint iConstant = 37;\niTotal = iTotal * iConstant + 8079;\niTotal = iTotal * iConstant + 7540;\niTotal = iTotal * iConstant + 15774;\n</code></pre>\n<p>iTotal = 12216006</p>\n<pre><code>new HashCodeBuilder(17, 37).append(8099).append(6801).append(15737).toHashCode()\niTotal = 17;\niConstant = 37;\niTotal = iTotal * iConstant + 8099;\niTotal = iTotal * iConstant + 6801;\niTotal = iTotal * iConstant + 15737;\n</code></pre>\n<p>iTotal = 12216006</p>\n<p>You can get different values by using a different initial number for one of them, <code>19</code> instead of <code>17</code> for example. But there will be cases where 2 objects have the same hashcode. Hashcodes are not guaranteed to be unique.</p>\n<p>This is the <code>HashCodeBuilder</code> code:</p>\n<pre><code>public HashCodeBuilder(int initialOddNumber, int multiplierOddNumber) {\n    Validate.isTrue(initialOddNumber % 2 != 0, &quot;HashCodeBuilder requires an odd initial value&quot;, new Object[0]);\n    Validate.isTrue(multiplierOddNumber % 2 != 0, &quot;HashCodeBuilder requires an odd multiplier&quot;, new Object[0]);\n    this.iConstant = multiplierOddNumber;\n    this.iTotal = initialOddNumber;\n}\n\npublic HashCodeBuilder append(int value) {\n    this.iTotal = this.iTotal * this.iConstant + value;\n    return this;\n}\n</code></pre>\n"}],"owner":{"account_id":13785334,"reputation":47,"user_id":9949400,"display_name":"HieuBui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"accepted_answer_id":75591750,"answer_count":1,"score":0,"last_activity_date":1677585822,"creation_date":1677584482,"question_id":75591581,"body_markdown":"I want to get 2 hash code of 2 difference group number as below but they have the same result. I can not understand why this happen. Please help to resolve this issue.\r\n\r\n```\r\nnew HashCodeBuilder(17, 37).append(8079).append(7540).append(15774).toHashCode();\r\nnew HashCodeBuilder(17, 37).append(8099).append(6801).append(15737).toHashCode();\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/xfi3h.png)](https://i.stack.imgur.com/xfi3h.png)\r\n\r\nI expect the result must have difference hash code.","title":"Hash Code Builder generate duplicate hash code","body":"<p>I want to get 2 hash code of 2 difference group number as below but they have the same result. I can not understand why this happen. Please help to resolve this issue.</p>\n<pre><code>new HashCodeBuilder(17, 37).append(8079).append(7540).append(15774).toHashCode();\nnew HashCodeBuilder(17, 37).append(8099).append(6801).append(15737).toHashCode();\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xfi3h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xfi3h.png\" alt=\"enter image description here\" /></a></p>\n<p>I expect the result must have difference hash code.</p>\n"},{"tags":["java","javafx"],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677262892,"creation_date":1677249905,"answer_id":75557913,"question_id":75557550,"body_markdown":"This is basically a maths question.\r\n\r\nYou need to find the point of intersection of the line between `(x1,y1)` and `(x2,y2)` with the lines defined by `x=0`, `y=0`, `x=w`, `y=h` (where `w` and `h` are the width and height of the window.\r\n\r\nThe easiest way to do this is by using homogeneous coordinates, representing the points and lines as 3-vectors. You can conveniently model these using the [`Point3D`](https://docs.oracle.com/javase/8/javafx/api/javafx/geometry/Point3D.html) class.\r\n\r\nThe main advantage of homogeneous coordinates is it handles all &quot;slants&quot; identically: for example, you could use 2D coordinates, i.e. work out the equation of the slanted line in the form `y = mx + c`, rearrange to find the intersection points etc; but this doesn&#39;t work for a vertical line (where m is infinite). You can work around it, but it gets a bit messy, and is numerically less-well conditioned.\r\n\r\n----\r\n\r\nIn homogeneous coordinates, you represent a line `ax + by + c = 0` as the vector `[a b c]&#39;`.\r\n\r\nYou can calculate the intersection point of two lines via the cross product of two vectors representing lines:\r\n\r\n```\r\n[ a1 ]   [ a2 ]    [   b1 * c2 - c1 * b2 ]\r\n[ b1 ] x [ b2 ]  = [ - a1 * c2 + c1 * a2 ]\r\n[ c1 ]   [ c2 ]    [   a1 * b2 - b1 * a2 ]\r\n```\r\n\r\nConsider that a point `(X, Y)` is at the intersection of lines `x = X` and `y = Y`; so, by the above formula, the homogeneous coordinate of `(X, Y)` is:\r\n\r\n```\r\n[ 1  ]   [ 0  ]   [ X ]\r\n[ 0  ] x [ 1  ] = [ Y ]\r\n[ -X ]   [ -Y ]   [ 1 ]\r\n```\r\n\r\nAlso, the line between two points in homogeneous notation is given by the cross-product of the two points\r\n\r\n```\r\n[ x1 ]   [ x2 ]   [ y1 - y2       ]\r\n[ y1 ] x [ y2 ] = [ -x1 + x2      ]\r\n[  1 ]   [  1 ]   [ x1*y2 - x2*y1 ]\r\n```\r\n\r\n(Don&#39;t worry about all these fiddly expressions: they are very easy to make a typo in, and I&#39;m sure I have; but you don&#39;t have to implement them manually because methods exist in the `Point3D` class).\r\n\r\nThe other important thing to note is that you can scale homogeneous coordinates without changing the point or line.\r\n\r\nFor example, `[ka  kb  kc]` is exactly the same as `[a b c]`: all the coordinates have been multiplied by the same factor, `k`. This leaves the point/line completely unchanged.\r\n\r\n---\r\n\r\nSo, we can represent the slanted line as a `Point3D`:\r\n\r\n```\r\nPoint3D p1 = new Point3D(x1, y1, 1);\r\nPoint3D p2 = new Point3D(x2, y2, 1);\r\nPoint3D slantedLine = p1.crossProduct(p2);\r\n```\r\n\r\nWe can represent the four edges of the viewport with equations `x=0`, `x=w`, `y=0`, `y=h`:\r\n\r\n```\r\nPoint3D lineX_equals_0 = new Point3D(1, 0, 0);\r\nPoint3D lineX_equals_w = new Point3D(1, 0, -w);\r\nPoint3D lineY_equals_0 = new Point3D(0, 1, 0);\r\nPoint3D lineY_equals_h = new Point3D(0, 1, -h);\r\n```\r\n\r\nand we can find the intersections of these lines with the slanted line:\r\n\r\n```\r\nPoint3D intersectionX_equals_0 = slantedLine.crossProduct(lineX_equals_0);\r\nPoint3D intersectionX_equals_w = slantedLine.crossProduct(lineX_equals_w);\r\nPoint3D intersectionY_equals_0 = slantedLine.crossProduct(lineY_equals_0);\r\nPoint3D intersectionY_equals_h = slantedLine.crossProduct(lineY_equals_h);\r\n```\r\n\r\nSo, now you have 4 homogeneous points where the slanted line intersects the respective edges. In order to extend your slanted line to meet these, you need to convert them back to things you can interpret as 2D coordinates.\r\n\r\nRemember that a 2d point `(x, y)` is represented as the 3d point `(x, y, 1)`: we can convert the insection points by dividing them by their z component:\r\n\r\n```\r\nintersectionX_equals_0 = intersectionX_equals_0.multiply(1 / intersectionX_equals_0.getZ());\r\nintersectionX_equals_w = intersectionX_equals_w.multiply(1 / intersectionX_equals_w.getZ());\r\n\r\nintersectionY_equals_0 = intersectionY_equals_0.multiply(1 / intersectionY_equals_0.getZ());\r\nintersectionY_equals_h = intersectionY_equals_h.multiply(1 / intersectionY_equals_h.getZ());\r\n```\r\n\r\nNow, work out which of those points sit within the drawable portion of the window: a point is drawable if `0 &lt;= x &lt;= w`, and `0 &lt;= y &lt;= h`.\r\n\r\nYou can pick 2 drawable points, and draw your line between them.\r\n\r\nLet&#39;s put all of this together:\r\n\r\n```\r\nPoint3D p1 = new Point3D(x1, y1, 1);\r\nPoint3D p2 = new Point3D(x2, y2, 1);\r\nPoint3D slantedLine = p1.crossProduct(p2);\r\n\r\nSet&lt;Point2D&gt; intersectionPoints =\r\n    Stream.of(\r\n        new Point3D(1, 0, 0),\r\n        new Point3D(1, 0, -w),\r\n        new Point3D(0, 1, 0),\r\n        new Point3D(0, 1, -h))\r\n      .map(slantedLine::crossProduct)\r\n      .filter(p -&gt; p.getZ() != 0)  // Remove edges parallel to slanted line\r\n      .map(p -&gt; p.multiply(1 / p.getZ()))\r\n      .filter(p -&gt; p.getX() &gt;= 0 &amp;&amp; p.getX() &lt;= w)\r\n      .filter(p -&gt; p.getY() &gt;= 0 &amp;&amp; p.getY() &lt;= h)\r\n      .map(p -&gt; new Point2D(p.getX(), p.getY()))\r\n      .collect(toSet());\r\n```\r\n\r\nThat gives you the points:\r\n\r\n- if there are two points, just draw the line between those two points\r\n- if there are three points, the line intersects the viewport at one corner\r\n- if there are four points, the line intersects the viewport at two corners\r\n- if there are fewer than two points, the problem is degenerate (e.g. w or h is 0, or x1=x2 and y1=y2)\r\n\r\nYou will need to consider how to handle the not-two-point cases.","title":"Stretch the slanted line to an extreme","body":"<p>This is basically a maths question.</p>\n<p>You need to find the point of intersection of the line between <code>(x1,y1)</code> and <code>(x2,y2)</code> with the lines defined by <code>x=0</code>, <code>y=0</code>, <code>x=w</code>, <code>y=h</code> (where <code>w</code> and <code>h</code> are the width and height of the window.</p>\n<p>The easiest way to do this is by using homogeneous coordinates, representing the points and lines as 3-vectors. You can conveniently model these using the <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/geometry/Point3D.html\" rel=\"nofollow noreferrer\"><code>Point3D</code></a> class.</p>\n<p>The main advantage of homogeneous coordinates is it handles all &quot;slants&quot; identically: for example, you could use 2D coordinates, i.e. work out the equation of the slanted line in the form <code>y = mx + c</code>, rearrange to find the intersection points etc; but this doesn't work for a vertical line (where m is infinite). You can work around it, but it gets a bit messy, and is numerically less-well conditioned.</p>\n<hr />\n<p>In homogeneous coordinates, you represent a line <code>ax + by + c = 0</code> as the vector <code>[a b c]'</code>.</p>\n<p>You can calculate the intersection point of two lines via the cross product of two vectors representing lines:</p>\n<pre><code>[ a1 ]   [ a2 ]    [   b1 * c2 - c1 * b2 ]\n[ b1 ] x [ b2 ]  = [ - a1 * c2 + c1 * a2 ]\n[ c1 ]   [ c2 ]    [   a1 * b2 - b1 * a2 ]\n</code></pre>\n<p>Consider that a point <code>(X, Y)</code> is at the intersection of lines <code>x = X</code> and <code>y = Y</code>; so, by the above formula, the homogeneous coordinate of <code>(X, Y)</code> is:</p>\n<pre><code>[ 1  ]   [ 0  ]   [ X ]\n[ 0  ] x [ 1  ] = [ Y ]\n[ -X ]   [ -Y ]   [ 1 ]\n</code></pre>\n<p>Also, the line between two points in homogeneous notation is given by the cross-product of the two points</p>\n<pre><code>[ x1 ]   [ x2 ]   [ y1 - y2       ]\n[ y1 ] x [ y2 ] = [ -x1 + x2      ]\n[  1 ]   [  1 ]   [ x1*y2 - x2*y1 ]\n</code></pre>\n<p>(Don't worry about all these fiddly expressions: they are very easy to make a typo in, and I'm sure I have; but you don't have to implement them manually because methods exist in the <code>Point3D</code> class).</p>\n<p>The other important thing to note is that you can scale homogeneous coordinates without changing the point or line.</p>\n<p>For example, <code>[ka  kb  kc]</code> is exactly the same as <code>[a b c]</code>: all the coordinates have been multiplied by the same factor, <code>k</code>. This leaves the point/line completely unchanged.</p>\n<hr />\n<p>So, we can represent the slanted line as a <code>Point3D</code>:</p>\n<pre><code>Point3D p1 = new Point3D(x1, y1, 1);\nPoint3D p2 = new Point3D(x2, y2, 1);\nPoint3D slantedLine = p1.crossProduct(p2);\n</code></pre>\n<p>We can represent the four edges of the viewport with equations <code>x=0</code>, <code>x=w</code>, <code>y=0</code>, <code>y=h</code>:</p>\n<pre><code>Point3D lineX_equals_0 = new Point3D(1, 0, 0);\nPoint3D lineX_equals_w = new Point3D(1, 0, -w);\nPoint3D lineY_equals_0 = new Point3D(0, 1, 0);\nPoint3D lineY_equals_h = new Point3D(0, 1, -h);\n</code></pre>\n<p>and we can find the intersections of these lines with the slanted line:</p>\n<pre><code>Point3D intersectionX_equals_0 = slantedLine.crossProduct(lineX_equals_0);\nPoint3D intersectionX_equals_w = slantedLine.crossProduct(lineX_equals_w);\nPoint3D intersectionY_equals_0 = slantedLine.crossProduct(lineY_equals_0);\nPoint3D intersectionY_equals_h = slantedLine.crossProduct(lineY_equals_h);\n</code></pre>\n<p>So, now you have 4 homogeneous points where the slanted line intersects the respective edges. In order to extend your slanted line to meet these, you need to convert them back to things you can interpret as 2D coordinates.</p>\n<p>Remember that a 2d point <code>(x, y)</code> is represented as the 3d point <code>(x, y, 1)</code>: we can convert the insection points by dividing them by their z component:</p>\n<pre><code>intersectionX_equals_0 = intersectionX_equals_0.multiply(1 / intersectionX_equals_0.getZ());\nintersectionX_equals_w = intersectionX_equals_w.multiply(1 / intersectionX_equals_w.getZ());\n\nintersectionY_equals_0 = intersectionY_equals_0.multiply(1 / intersectionY_equals_0.getZ());\nintersectionY_equals_h = intersectionY_equals_h.multiply(1 / intersectionY_equals_h.getZ());\n</code></pre>\n<p>Now, work out which of those points sit within the drawable portion of the window: a point is drawable if <code>0 &lt;= x &lt;= w</code>, and <code>0 &lt;= y &lt;= h</code>.</p>\n<p>You can pick 2 drawable points, and draw your line between them.</p>\n<p>Let's put all of this together:</p>\n<pre><code>Point3D p1 = new Point3D(x1, y1, 1);\nPoint3D p2 = new Point3D(x2, y2, 1);\nPoint3D slantedLine = p1.crossProduct(p2);\n\nSet&lt;Point2D&gt; intersectionPoints =\n    Stream.of(\n        new Point3D(1, 0, 0),\n        new Point3D(1, 0, -w),\n        new Point3D(0, 1, 0),\n        new Point3D(0, 1, -h))\n      .map(slantedLine::crossProduct)\n      .filter(p -&gt; p.getZ() != 0)  // Remove edges parallel to slanted line\n      .map(p -&gt; p.multiply(1 / p.getZ()))\n      .filter(p -&gt; p.getX() &gt;= 0 &amp;&amp; p.getX() &lt;= w)\n      .filter(p -&gt; p.getY() &gt;= 0 &amp;&amp; p.getY() &lt;= h)\n      .map(p -&gt; new Point2D(p.getX(), p.getY()))\n      .collect(toSet());\n</code></pre>\n<p>That gives you the points:</p>\n<ul>\n<li>if there are two points, just draw the line between those two points</li>\n<li>if there are three points, the line intersects the viewport at one corner</li>\n<li>if there are four points, the line intersects the viewport at two corners</li>\n<li>if there are fewer than two points, the problem is degenerate (e.g. w or h is 0, or x1=x2 and y1=y2)</li>\n</ul>\n<p>You will need to consider how to handle the not-two-point cases.</p>\n"}],"owner":{"account_id":8370514,"reputation":27,"user_id":6285781,"display_name":"Tretonis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1677585751,"creation_date":1677247808,"question_id":75557550,"body_markdown":"\r\n\r\nAssuming that there is a line formed (A)=x1,y1 and (B)=x2,y2\r\nThis line is drawn on the screen, now I need this line to reach the ends of the screen.\r\n\r\nIs there any formula that makes it possible to continue the line while maintaining the angle of inclination?\r\n\r\nI know that JavaFX has a lot of resources, I accept suggestions\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Line;\r\n    import javafx.stage.Stage;\r\n    \r\n    \r\n      \r\n    \r\n    public class LineContinue extends Application {\r\n    \r\n        \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            \r\n            BorderPane bp = new BorderPane();\r\n    \r\n            Line line = new Line();\r\n            line.setStartX(0);\r\n            line.setStartY(150);\r\n            \r\n            line.setEndX(170);\r\n            line.setEndY(50);\r\n            \r\n            line.setLayoutX(10);\r\n            line.setLayoutY(10);\r\n            \r\n                \r\n            Pane pane = new Pane();\r\n            pane.getChildren().add(line);\r\n            \r\n            line.setLayoutX(100);\r\n            line.setLayoutY(200);\r\n            \r\n            \r\n            Button b = new Button(&quot;Extreme Line&quot;);\r\n            b.setOnAction( (e) -&gt; {\r\n                 \r\n                 // formula continue line until extreme\r\n                 \r\n            \r\n            });\r\n            \r\n            \r\n            bp.setCenter(pane);\r\n            bp.setBottom(b);\r\n      \r\n            primaryStage.setWidth(600);\r\n            primaryStage.setHeight(500);\r\n            primaryStage.setScene(new Scene(bp));\r\n            primaryStage.setTitle(&quot;Extreme Line&quot;);\r\n            primaryStage.show();\r\n            \r\n        }    \r\n        \r\n    }\r\n\r\n","title":"Stretch the slanted line to an extreme","body":"<p>Assuming that there is a line formed (A)=x1,y1 and (B)=x2,y2\nThis line is drawn on the screen, now I need this line to reach the ends of the screen.</p>\n<p>Is there any formula that makes it possible to continue the line while maintaining the angle of inclination?</p>\n<p>I know that JavaFX has a lot of resources, I accept suggestions</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Line;\nimport javafx.stage.Stage;\n\n\n  \n\npublic class LineContinue extends Application {\n\n    \n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        \n        BorderPane bp = new BorderPane();\n\n        Line line = new Line();\n        line.setStartX(0);\n        line.setStartY(150);\n        \n        line.setEndX(170);\n        line.setEndY(50);\n        \n        line.setLayoutX(10);\n        line.setLayoutY(10);\n        \n            \n        Pane pane = new Pane();\n        pane.getChildren().add(line);\n        \n        line.setLayoutX(100);\n        line.setLayoutY(200);\n        \n        \n        Button b = new Button(&quot;Extreme Line&quot;);\n        b.setOnAction( (e) -&gt; {\n             \n             // formula continue line until extreme\n             \n        \n        });\n        \n        \n        bp.setCenter(pane);\n        bp.setBottom(b);\n  \n        primaryStage.setWidth(600);\n        primaryStage.setHeight(500);\n        primaryStage.setScene(new Scene(bp));\n        primaryStage.setTitle(&quot;Extreme Line&quot;);\n        primaryStage.show();\n        \n    }    \n    \n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-annotations","java-17"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677521127,"creation_date":1677520619,"answer_id":75583972,"question_id":75583755,"body_markdown":"It is because it cannot find the Jakarta annotation as Spring framework 6 requires [Jakarta EE 9+][1] as baseline.You have to at least upgrade the following legacy JavaEE dependencies to Jakarta EE 9+ :\r\n\r\nUpgrade \r\n\r\n``` xml\r\n &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nto \r\n```xml\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.1&lt;/version&gt;\r\n &lt;/dependency&gt;\r\n```\r\n\r\nAnd \r\n``` xml\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;javax&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n        &lt;version&gt;8.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n``` \r\nto \r\n``` xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n    &lt;version&gt;10.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n``` \r\n\r\nAnd if your application codes are using stuff from JavaEE , you also need to change it to use the related stuff from `jakarta` namespace.\r\n\r\n\r\n  [1]: https://spring.io/blog/2021/09/02/a-java-17-and-jakarta-ee-9-baseline-for-spring-framework-6","title":"Error creating bean with name &#39;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0&#39;","body":"<p>It is because it cannot find the Jakarta annotation as Spring framework 6 requires <a href=\"https://spring.io/blog/2021/09/02/a-java-17-and-jakarta-ee-9-baseline-for-spring-framework-6\" rel=\"nofollow noreferrer\">Jakarta EE 9+</a> as baseline.You have to at least upgrade the following legacy JavaEE dependencies to Jakarta EE 9+ :</p>\n<p>Upgrade</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;dependency&gt;\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;dependency&gt;\n    &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>And</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n        &lt;groupId&gt;javax&lt;/groupId&gt;\n        &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n        &lt;version&gt;8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n    &lt;version&gt;10.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And if your application codes are using stuff from JavaEE , you also need to change it to use the related stuff from <code>jakarta</code> namespace.</p>\n"}],"owner":{"account_id":16555258,"reputation":220,"user_id":11962586,"display_name":"S14321K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1313,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75583972,"answer_count":1,"score":1,"last_activity_date":1677585090,"creation_date":1677519263,"question_id":75583755,"body_markdown":"I&#39;m trying to enable support for @PostConstruct and @PreDestroy by defining a bean element in a config.xml file. But I&#39;m getting error in console log stating `WARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0&#39;` Should I need any dependency for this? And I&#39;m working on java-17. Due to this am I facing any issue? Thanks in advance.\r\n\r\nBelow I have shared the error log and dependent files for view.\r\n\r\n***ConsoleLog***\r\n```\r\nFeb 27, 2023 10:36:59 PM org.springframework.context.support.AbstractApplicationContext refresh\r\nWARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0&#39; defined in class path resource [com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml]: jakarta/annotation/Resource\r\nException in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0&#39; defined in class path resource [com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml]: jakarta/annotation/Resource\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1307)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1199)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.registerBeanPostProcessors(PostProcessorRegistrationDelegate.java:240)\r\n\tat org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:763)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:568)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\r\n\tat com.sarath.spring.springcore.lc.annotations.LifeCycleTest.main(LifeCycleTest.java:10)\r\nCaused by: java.lang.NoClassDefFoundError: jakarta/annotation/Resource\r\n\tat org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.&lt;clinit&gt;(CommonAnnotationBeanPostProcessor.java:142)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1301)\r\n\t... 13 more\r\nCaused by: java.lang.ClassNotFoundException: jakarta.annotation.Resource\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n\t... 22 more\r\n```\r\n\r\n\r\n\r\n***lifeCycleBeanConfig.xml***\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    \r\n    &lt;bean name=&quot;lcXML&quot; class=&quot;com.sarath.spring.springcore.lc.annotations.PatientPojoBean&quot; p:id=&quot;20&quot;/&gt;\r\n    \r\n    &lt;bean class=&quot;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor&quot;/&gt;\r\n    \r\n&lt;/beans&gt;\r\n```\r\n\r\n***PatientPojoBean.java***\r\n```\r\npackage com.sarath.spring.springcore.lc.annotations;\r\n\r\nimport javax.annotation.PostConstruct;\r\nimport javax.annotation.PreDestroy;\r\n\r\npublic class PatientPojoBean {\r\n\tprivate int id;\r\n\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(int id) {\r\n\t\tSystem.out.println(&quot;Getting into setter&quot;);\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\t@PostConstruct\r\n\tpublic void hi() {\r\n\t\tSystem.out.println(&quot;Hello Hi&quot;);\r\n\t}\r\n\r\n\t@PreDestroy\r\n\tpublic void bye() {\r\n\t\tSystem.out.println(&quot;Okay Bye&quot;);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;PatientPojoBean [id=&quot; + id + &quot;]&quot;;\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n***LifeCycleTest.java***\r\n\r\n```\r\npackage com.sarath.spring.springcore.lc.annotations;\r\n\r\nimport org.springframework.context.support.AbstractApplicationContext;\r\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\r\n\r\npublic class LifeCycleTest {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t@SuppressWarnings(&quot;resource&quot;)\r\n\t\tAbstractApplicationContext ctxt = new ClassPathXmlApplicationContext(&quot;com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml&quot;);\r\n\t\tPatientPojoBean ptnt = (PatientPojoBean) ctxt.getBean(&quot;lcXML&quot;);\r\n\t\tSystem.out.println(&quot;Patient Name   : &quot; + ptnt);\r\n\t\tctxt.registerShutdownHook();\t//To invoke the destroy method before closing\r\n\t}\r\n\r\n}\r\n```\r\n\r\n***pom.xml***\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.sarath.spring&lt;/groupId&gt;\r\n  &lt;artifactId&gt;springcore&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;name&gt;springcore&lt;/name&gt;\r\n  &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n     &lt;springframework.version&gt;6.0.5&lt;/springframework.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;version&gt;${springframework.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api --&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n\t    &lt;version&gt;1.3.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n        &lt;groupId&gt;javax&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n        &lt;version&gt;8.0&lt;/version&gt;\r\n \t&lt;/dependency&gt;\r\n \t&lt;!-- https://mvnrepository.com/artifact/org.javassist/javassist --&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n\t    &lt;version&gt;3.29.2-GA&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n      &lt;plugins&gt;\r\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.22.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.8.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.7.1&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"Error creating bean with name &#39;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0&#39;","body":"<p>I'm trying to enable support for @PostConstruct and @PreDestroy by defining a bean element in a config.xml file. But I'm getting error in console log stating <code>WARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0'</code> Should I need any dependency for this? And I'm working on java-17. Due to this am I facing any issue? Thanks in advance.</p>\n<p>Below I have shared the error log and dependent files for view.</p>\n<p><em><strong>ConsoleLog</strong></em></p>\n<pre><code>Feb 27, 2023 10:36:59 PM org.springframework.context.support.AbstractApplicationContext refresh\nWARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0' defined in class path resource [com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml]: jakarta/annotation/Resource\nException in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0' defined in class path resource [com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml]: jakarta/annotation/Resource\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1307)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1199)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.registerBeanPostProcessors(PostProcessorRegistrationDelegate.java:240)\n    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:763)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:568)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\n    at com.sarath.spring.springcore.lc.annotations.LifeCycleTest.main(LifeCycleTest.java:10)\nCaused by: java.lang.NoClassDefFoundError: jakarta/annotation/Resource\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.&lt;clinit&gt;(CommonAnnotationBeanPostProcessor.java:142)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1301)\n    ... 13 more\nCaused by: java.lang.ClassNotFoundException: jakarta.annotation.Resource\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 22 more\n</code></pre>\n<p><em><strong>lifeCycleBeanConfig.xml</strong></em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n    \n    &lt;bean name=&quot;lcXML&quot; class=&quot;com.sarath.spring.springcore.lc.annotations.PatientPojoBean&quot; p:id=&quot;20&quot;/&gt;\n    \n    &lt;bean class=&quot;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor&quot;/&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<p><em><strong>PatientPojoBean.java</strong></em></p>\n<pre><code>package com.sarath.spring.springcore.lc.annotations;\n\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\n\npublic class PatientPojoBean {\n    private int id;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        System.out.println(&quot;Getting into setter&quot;);\n        this.id = id;\n    }\n\n    @PostConstruct\n    public void hi() {\n        System.out.println(&quot;Hello Hi&quot;);\n    }\n\n    @PreDestroy\n    public void bye() {\n        System.out.println(&quot;Okay Bye&quot;);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;PatientPojoBean [id=&quot; + id + &quot;]&quot;;\n    }\n\n}\n\n</code></pre>\n<p><em><strong>LifeCycleTest.java</strong></em></p>\n<pre><code>package com.sarath.spring.springcore.lc.annotations;\n\nimport org.springframework.context.support.AbstractApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class LifeCycleTest {\n\n    public static void main(String[] args) {\n        @SuppressWarnings(&quot;resource&quot;)\n        AbstractApplicationContext ctxt = new ClassPathXmlApplicationContext(&quot;com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml&quot;);\n        PatientPojoBean ptnt = (PatientPojoBean) ctxt.getBean(&quot;lcXML&quot;);\n        System.out.println(&quot;Patient Name   : &quot; + ptnt);\n        ctxt.registerShutdownHook();    //To invoke the destroy method before closing\n    }\n\n}\n</code></pre>\n<p><em><strong>pom.xml</strong></em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.sarath.spring&lt;/groupId&gt;\n  &lt;artifactId&gt;springcore&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;springcore&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n     &lt;springframework.version&gt;6.0.5&lt;/springframework.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;${springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax&lt;/groupId&gt;\n        &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n        &lt;version&gt;8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.javassist/javassist --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n        &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;version&gt;3.29.2-GA&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","web-services","content-type","endpoint","micronaut"],"answers":[{"tags":[],"owner":{"account_id":2524916,"reputation":40766,"user_id":2194470,"accept_rate":100,"display_name":"Szymon Stepniak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677584810,"creation_date":1677584810,"answer_id":75591653,"question_id":75567470,"body_markdown":"You can use `@Get(produces=&quot;*/*&quot;)` to provide a fallback-like endpoint that will be executed when the `Accept` header is missing for the endpoints that use the same URI and are controlled by the specific content type. Take a look at the example below:\r\n\r\n```java\r\nimport io.micronaut.http.annotation.Controller;\r\nimport io.micronaut.http.annotation.Get;\r\nimport io.micronaut.http.annotation.QueryValue;\r\n\r\nimport java.util.Map;\r\n\r\n@Controller(&quot;/hello&quot;)\r\npublic class HelloController {\r\n\r\n    @Get(produces = &quot;application/json&quot;)\r\n    Map&lt;?,?&gt; helloJson(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\r\n        return Map.of(&quot;message&quot;, &quot;Hello, &quot; + name + &quot;!&quot;);\r\n    }\r\n\r\n    @Get(produces = &quot;text/plain&quot;)\r\n    String helloText(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\r\n        return &quot;Hello, &quot; + name;\r\n    }\r\n\r\n    @Get(produces = &quot;*/*&quot;)\r\n    String helloDefault(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\r\n        return helloText(name) + &quot; (from default endpoint)&quot;;\r\n    }\r\n}\r\n```\r\n\r\nAnd here is what happens when we call this controller with and without the `Accept` header:\r\n\r\n```bash\r\n$ curl -H &quot;Accept:application/json&quot; &quot;localhost:8080/hello?name=test&quot;\r\n{&quot;message&quot;:&quot;Hello, test!&quot;}%\r\n\r\n$ curl -H &quot;Accept:text/plain&quot; &quot;localhost:8080/hello?name=test&quot;\r\nHello, test%\r\n\r\n$ curl &quot;localhost:8080/hello?name=test&quot;                             \r\nHello, test (from default endpoint)% \r\n```","title":"How to create endpoint with different response content types depending on accept header in Java with Micronaut","body":"<p>You can use <code>@Get(produces=&quot;*/*&quot;)</code> to provide a fallback-like endpoint that will be executed when the <code>Accept</code> header is missing for the endpoints that use the same URI and are controlled by the specific content type. Take a look at the example below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.micronaut.http.annotation.Controller;\nimport io.micronaut.http.annotation.Get;\nimport io.micronaut.http.annotation.QueryValue;\n\nimport java.util.Map;\n\n@Controller(&quot;/hello&quot;)\npublic class HelloController {\n\n    @Get(produces = &quot;application/json&quot;)\n    Map&lt;?,?&gt; helloJson(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\n        return Map.of(&quot;message&quot;, &quot;Hello, &quot; + name + &quot;!&quot;);\n    }\n\n    @Get(produces = &quot;text/plain&quot;)\n    String helloText(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\n        return &quot;Hello, &quot; + name;\n    }\n\n    @Get(produces = &quot;*/*&quot;)\n    String helloDefault(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\n        return helloText(name) + &quot; (from default endpoint)&quot;;\n    }\n}\n</code></pre>\n<p>And here is what happens when we call this controller with and without the <code>Accept</code> header:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ curl -H &quot;Accept:application/json&quot; &quot;localhost:8080/hello?name=test&quot;\n{&quot;message&quot;:&quot;Hello, test!&quot;}%\n\n$ curl -H &quot;Accept:text/plain&quot; &quot;localhost:8080/hello?name=test&quot;\nHello, test%\n\n$ curl &quot;localhost:8080/hello?name=test&quot;                             \nHello, test (from default endpoint)% \n</code></pre>\n"}],"owner":{"account_id":21784678,"reputation":41,"user_id":16085919,"display_name":"manuel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1677584810,"creation_date":1677349014,"question_id":75567470,"body_markdown":"I am having a play with Micronaut, and want to create an endpoint that returns either `text/plain` or `text/html`, depending on the Accept header in the request.\r\n\r\nI found two ways to do this: \r\n1. create two methods for the same endpoint with different *produces* attributes,\r\n1. handle it all in a single method and that evaluates the accept header and use logic in my own code to return the right content type.\r\n\r\n\r\n\r\nI like the first way best, because it&#39;s very clean, and requires no logic from me:\r\n\r\n```\r\n    @Get(uri=&quot;/&quot;, produces=&quot;text/html&quot;)\r\n    public String indexHtml() {\r\n        return &quot;&quot;&quot;\r\n            &lt;html&gt;&lt;head&gt;&lt;meta charset=\\&quot;utf-8\\&quot;&gt;&lt;/head&gt;\r\n            &lt;body&gt;\r\n            &lt;h1&gt;Demo service&lt;/h1&gt;\r\n            &lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;;\r\n    }\r\n    @Get(uri=&quot;/&quot;, produces=&quot;text/plain&quot;)\r\n    public String indexText() {\r\n        return &quot;Demo service\\r\\n&quot;;\r\n    }\r\n\r\n```\r\nThis works well when an accept header is in the request. However, when there is no accept header, I get an error response `400 Bad Request` with a message `&quot;More than 1 route matched the incoming request. The following routes matched /demo: GET - /demo, GET - /demo&quot;`\r\n\r\n**Question 1**\r\nIs there a way to provide a 3rd endpoint as a fallback, or to designate one of these methods as the default?\r\n\r\nThe second way to do it, resulted in a method that I don&#39;t find very elegant:\r\n```\r\n    @Get(uri=&quot;/&quot;, produces={MediaType.TEXT_PLAIN, MediaType.TEXT_HTML})\r\n    public String index(HttpRequest&lt;?&gt; request) {\r\n        Collection&lt;MediaType&gt; mediaTypes = request.accept();\r\n        Iterator&lt;MediaType&gt; it = mediaTypes.iterator();\r\n        if (it.hasNext()) {\r\n            MediaType mediaType = it.next();\r\n            if (MediaType.TEXT_PLAIN_TYPE.equals(mediaType))\r\n                    return &quot;Demo service\\r\\n&quot;;\r\n            if (MediaType.TEXT_HTML_TYPE.equals(mediaType))\r\n                    return &quot;&quot;&quot;\r\n                        &lt;!DOCTYPE html&gt;\r\n                        &lt;html&gt;&lt;head&gt;&lt;meta charset=\\&quot;utf-8\\&quot;&gt;&lt;/head&gt;\r\n                        &lt;body&gt;\r\n                        &lt;h1&gt;Demo service&lt;/h1&gt;\r\n                        &lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;;\r\n        }\r\n        return &quot;&quot;&quot;\r\n            {\r\n                &quot;title&quot;: &quot;Demo service&quot;,\r\n            }&quot;&quot;&quot;;\r\n    }\r\n```\r\n**Question 2**\r\n- If it&#39;s really necessary to handle this in a single method, is it indeed done by fetching the accept header and evaluating that, or should it be done differently?\r\n\r\n","title":"How to create endpoint with different response content types depending on accept header in Java with Micronaut","body":"<p>I am having a play with Micronaut, and want to create an endpoint that returns either <code>text/plain</code> or <code>text/html</code>, depending on the Accept header in the request.</p>\n<p>I found two ways to do this:</p>\n<ol>\n<li>create two methods for the same endpoint with different <em>produces</em> attributes,</li>\n<li>handle it all in a single method and that evaluates the accept header and use logic in my own code to return the right content type.</li>\n</ol>\n<p>I like the first way best, because it's very clean, and requires no logic from me:</p>\n<pre><code>    @Get(uri=&quot;/&quot;, produces=&quot;text/html&quot;)\n    public String indexHtml() {\n        return &quot;&quot;&quot;\n            &lt;html&gt;&lt;head&gt;&lt;meta charset=\\&quot;utf-8\\&quot;&gt;&lt;/head&gt;\n            &lt;body&gt;\n            &lt;h1&gt;Demo service&lt;/h1&gt;\n            &lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;;\n    }\n    @Get(uri=&quot;/&quot;, produces=&quot;text/plain&quot;)\n    public String indexText() {\n        return &quot;Demo service\\r\\n&quot;;\n    }\n\n</code></pre>\n<p>This works well when an accept header is in the request. However, when there is no accept header, I get an error response <code>400 Bad Request</code> with a message <code>&quot;More than 1 route matched the incoming request. The following routes matched /demo: GET - /demo, GET - /demo&quot;</code></p>\n<p><strong>Question 1</strong>\nIs there a way to provide a 3rd endpoint as a fallback, or to designate one of these methods as the default?</p>\n<p>The second way to do it, resulted in a method that I don't find very elegant:</p>\n<pre><code>    @Get(uri=&quot;/&quot;, produces={MediaType.TEXT_PLAIN, MediaType.TEXT_HTML})\n    public String index(HttpRequest&lt;?&gt; request) {\n        Collection&lt;MediaType&gt; mediaTypes = request.accept();\n        Iterator&lt;MediaType&gt; it = mediaTypes.iterator();\n        if (it.hasNext()) {\n            MediaType mediaType = it.next();\n            if (MediaType.TEXT_PLAIN_TYPE.equals(mediaType))\n                    return &quot;Demo service\\r\\n&quot;;\n            if (MediaType.TEXT_HTML_TYPE.equals(mediaType))\n                    return &quot;&quot;&quot;\n                        &lt;!DOCTYPE html&gt;\n                        &lt;html&gt;&lt;head&gt;&lt;meta charset=\\&quot;utf-8\\&quot;&gt;&lt;/head&gt;\n                        &lt;body&gt;\n                        &lt;h1&gt;Demo service&lt;/h1&gt;\n                        &lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;;\n        }\n        return &quot;&quot;&quot;\n            {\n                &quot;title&quot;: &quot;Demo service&quot;,\n            }&quot;&quot;&quot;;\n    }\n</code></pre>\n<p><strong>Question 2</strong></p>\n<ul>\n<li>If it's really necessary to handle this in a single method, is it indeed done by fetching the accept header and evaluating that, or should it be done differently?</li>\n</ul>\n"},{"tags":["java","cmd"],"comments":[{"owner":{"account_id":8144340,"reputation":1596,"user_id":6133426,"accept_rate":85,"display_name":"FiddlingAway"},"score":0,"creation_date":1677523292,"post_id":75580408,"comment_id":133350899,"body_markdown":"If you can get the session ID of the currently logged in user by using cmd (for example, with `query user %USERNAME% | findstr /R &quot;^%USERNAME% .*&gt;&quot;\n`, why not continue along that path and use `logoff &lt;session_id&gt;` ?","body":"If you can get the session ID of the currently logged in user by using cmd (for example, with <code>query user %USERNAME% | findstr &#47;R &quot;^%USERNAME% .*&gt;&quot; </code>, why not continue along that path and use <code>logoff &lt;session_id&gt;</code> ?"},{"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"score":0,"creation_date":1677577629,"post_id":75580408,"comment_id":133360954,"body_markdown":"@FiddlingAway unfortunately I don&#39;t know enough about cmd to do that, which is why I asked for help.\nAlthough, I amusingly go what I needed from ChatGPT. It kept giving me nonsense, but it lead me closer and closer and I eventually got to my solution. I&#39;ll post what I am using now.","body":"@FiddlingAway unfortunately I don&#39;t know enough about cmd to do that, which is why I asked for help. Although, I amusingly go what I needed from ChatGPT. It kept giving me nonsense, but it lead me closer and closer and I eventually got to my solution. I&#39;ll post what I am using now."}],"answers":[{"tags":[],"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1677584636,"creation_date":1677577972,"answer_id":75590372,"question_id":75580408,"body_markdown":"I asked ChatGPT for help.. And of course it kept giving me nonsense, but after harassing it for a while I managed to piece together something that does the job. For those who wish to know, here&#39;s my solution:\r\n\r\nIt changed from one to two methods, one to populate a list with all the host names / IP addresses, then that method tells the second method to sign the active user of the PCs off one at a time...\r\n\r\n    public void signoutprep (JPanel panel){\r\n        List&lt;String&gt; toSignout = new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; toSignoutm = new ArrayList&lt;&gt;();\r\n        if (panel == CustomDevice_Panel)\r\n        {\r\n            toSignout.add(HorIP.getText());\r\n        } \r\n        else \r\n        {\r\n            for (Component c : panel.getComponents())\r\n            {\r\n                if (c instanceof JCheckBox checkBox)\r\n                {\r\n                    if (checkBox.getToolTipText() != null)\r\n                    {\r\n                        if (checkBox.isSelected()) \r\n                        {\r\n                            toSignout.add(checkBox.getToolTipText());\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (int i = 0; i &lt; toSignout.size(); i++) \r\n        {\r\n            logOffActiveUser(toSignout.get(i));\r\n        }\r\n    }\r\n    public void logOffActiveUser(String remoteMachineName) {\r\n        sprogress.setText(&quot;Signing active user on &quot;+remoteMachineName+&quot; out...&quot;);\r\n        String activeUser = null;\r\n        String command = &quot;quser /server:&quot;;\r\n        try {\r\n            String line;\r\n            Process process = Runtime.getRuntime().exec(command + remoteMachineName);\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n            int lineNumber = 1;\r\n            while ((line = reader.readLine()) != null) \r\n            {\r\n                if (lineNumber == 2) \r\n                {\r\n                    String[] words = line.split(&quot;\\\\s+&quot;);\r\n                    if (words.length &gt;= 3) \r\n                    {\r\n                        activeUser = words[2];\r\n                    } else \r\n                    {\r\n                        activeUser = null;\r\n                    }\r\n                    break;\r\n                }\r\n                lineNumber++;\r\n            }\r\n            reader.close();\r\n            process.waitFor();\r\n        } catch (IOException | InterruptedException e) \r\n        {\r\n            infoBox(&quot;Exception occurred while logging off the active user: &quot; + e.getMessage());\r\n        }\r\n        \r\n        if (activeUser == null) {\r\n            //infoBox(&quot;No active user found on &quot; + remoteMachineName); \r\n            sprogress.setText(&quot;No active user found on &quot; + remoteMachineName);\r\n        }\r\n        else\r\n        {\r\n            command = &quot;logoff &quot; + activeUser + &quot; /server:&quot; + remoteMachineName;\r\n            try \r\n            {\r\n                Process process = Runtime.getRuntime().exec(command);\r\n                sprogress.setText(&quot;No queued tasks&quot;);\r\n                process.waitFor();\r\n            } \r\n            catch (IOException | InterruptedException e) \r\n            {\r\n                infoBox(&quot;Exception occurred while logging off the active user: &quot; + e.getMessage());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nNote: The label &quot;sprogress&quot; refuses to update before the second method is finished.","title":"I need to sign the active user on a windows 10 pc off through java, I already have the basic CMD queries I need, I just don&#39;t know how to use them?","body":"<p>I asked ChatGPT for help.. And of course it kept giving me nonsense, but after harassing it for a while I managed to piece together something that does the job. For those who wish to know, here's my solution:</p>\n<p>It changed from one to two methods, one to populate a list with all the host names / IP addresses, then that method tells the second method to sign the active user of the PCs off one at a time...</p>\n<pre><code>public void signoutprep (JPanel panel){\n    List&lt;String&gt; toSignout = new ArrayList&lt;&gt;();\n    List&lt;String&gt; toSignoutm = new ArrayList&lt;&gt;();\n    if (panel == CustomDevice_Panel)\n    {\n        toSignout.add(HorIP.getText());\n    } \n    else \n    {\n        for (Component c : panel.getComponents())\n        {\n            if (c instanceof JCheckBox checkBox)\n            {\n                if (checkBox.getToolTipText() != null)\n                {\n                    if (checkBox.isSelected()) \n                    {\n                        toSignout.add(checkBox.getToolTipText());\n                    }\n                }\n            }\n        }\n    }\n    for (int i = 0; i &lt; toSignout.size(); i++) \n    {\n        logOffActiveUser(toSignout.get(i));\n    }\n}\npublic void logOffActiveUser(String remoteMachineName) {\n    sprogress.setText(&quot;Signing active user on &quot;+remoteMachineName+&quot; out...&quot;);\n    String activeUser = null;\n    String command = &quot;quser /server:&quot;;\n    try {\n        String line;\n        Process process = Runtime.getRuntime().exec(command + remoteMachineName);\n        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n        int lineNumber = 1;\n        while ((line = reader.readLine()) != null) \n        {\n            if (lineNumber == 2) \n            {\n                String[] words = line.split(&quot;\\\\s+&quot;);\n                if (words.length &gt;= 3) \n                {\n                    activeUser = words[2];\n                } else \n                {\n                    activeUser = null;\n                }\n                break;\n            }\n            lineNumber++;\n        }\n        reader.close();\n        process.waitFor();\n    } catch (IOException | InterruptedException e) \n    {\n        infoBox(&quot;Exception occurred while logging off the active user: &quot; + e.getMessage());\n    }\n    \n    if (activeUser == null) {\n        //infoBox(&quot;No active user found on &quot; + remoteMachineName); \n        sprogress.setText(&quot;No active user found on &quot; + remoteMachineName);\n    }\n    else\n    {\n        command = &quot;logoff &quot; + activeUser + &quot; /server:&quot; + remoteMachineName;\n        try \n        {\n            Process process = Runtime.getRuntime().exec(command);\n            sprogress.setText(&quot;No queued tasks&quot;);\n            process.waitFor();\n        } \n        catch (IOException | InterruptedException e) \n        {\n            infoBox(&quot;Exception occurred while logging off the active user: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Note: The label &quot;sprogress&quot; refuses to update before the second method is finished.</p>\n"}],"owner":{"account_id":12101161,"reputation":11,"user_id":8842174,"display_name":"LOL - Coding ain&#39;t for me"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75590372,"answer_count":1,"score":0,"last_activity_date":1677584636,"creation_date":1677500339,"question_id":75580408,"body_markdown":"The block of text at the bottom of this post is a template of a method based on other commands I have built into my app, those other commands work fine and so does this one if I first use query user in CMD to find out what the user name is and then replace &lt;USER&gt; with the username or ID.\r\nBut I&#39;d like this method to ask for the ID of the active user and then sign them out, without me needing to hold its hand.\r\n\r\nFor further context, this command in CMD `quser /server:helpdesk` returns the following:\r\n\r\n```\r\nUSERNAME              SESSIONNAME        ID  STATE   IDLE TIME  LOGON TIME\r\n &lt;5 char username&gt;    rdp-tcp#5           5  Active          .  2023/02/27 12:32\r\n```\r\nThe users I will be forcing off will always have a 5 digit username and I am a domain admin so user rights will not be an issue.\r\n\r\n\r\nExplanation of my variables:\r\n- HorIP is a text field for host name or IP of the PC\r\n- panel is the active panel, either having text field or check boxes in them\r\n- cmdsend list of all commands that I will run\r\n\r\n\r\nHere is the method so far:\r\n\r\n```\r\npublic void signout (JPanel panel){\r\n\tList&lt;String&gt; cmdsend = new ArrayList&lt;&gt;();\r\n\tif (panel == CustomDevice_Panel) {\r\n\t\tcmdsend.add(&quot;logoff &lt;USER&gt;  /SERVER:&quot; + HorIP.getText());\r\n\t} else  {\r\n\t\tfor (Component c : panel.getComponents()) {\r\n\t\t\tif (c instanceof JCheckBox checkBox) {\r\n\t\t\t\tif (checkBox.getToolTipText() != null) {\r\n\t\t\t\t\tif (checkBox.isSelected())  {\r\n\t\t\t\t\t\tcmdsend.add(&quot;logoff &lt;USER&gt;  /SERVER:&quot; + checkBox.getToolTipText());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\ttry  {\r\n\t\tfor (int i = 0; i &lt; cmdsend.size(); i++)  {\r\n\t\t\tRuntime.getRuntime().exec(cmdsend.get(i));\r\n\t\t}\r\n\t} catch (IOException ex)  {\r\n\t\tSystem.out.println(&quot;failed&quot;);\r\n\t}\r\n}\r\n```\r\n\r\n\r\nHaven&#39;t tried much yet, but I imagine that there would be a way to use the results of a quser command to put a user into the logoff command, just not sure how though.","title":"I need to sign the active user on a windows 10 pc off through java, I already have the basic CMD queries I need, I just don&#39;t know how to use them?","body":"<p>The block of text at the bottom of this post is a template of a method based on other commands I have built into my app, those other commands work fine and so does this one if I first use query user in CMD to find out what the user name is and then replace  with the username or ID.\nBut I'd like this method to ask for the ID of the active user and then sign them out, without me needing to hold its hand.</p>\n<p>For further context, this command in CMD <code>quser /server:helpdesk</code> returns the following:</p>\n<pre><code>USERNAME              SESSIONNAME        ID  STATE   IDLE TIME  LOGON TIME\n &lt;5 char username&gt;    rdp-tcp#5           5  Active          .  2023/02/27 12:32\n</code></pre>\n<p>The users I will be forcing off will always have a 5 digit username and I am a domain admin so user rights will not be an issue.</p>\n<p>Explanation of my variables:</p>\n<ul>\n<li>HorIP is a text field for host name or IP of the PC</li>\n<li>panel is the active panel, either having text field or check boxes in them</li>\n<li>cmdsend list of all commands that I will run</li>\n</ul>\n<p>Here is the method so far:</p>\n<pre><code>public void signout (JPanel panel){\n    List&lt;String&gt; cmdsend = new ArrayList&lt;&gt;();\n    if (panel == CustomDevice_Panel) {\n        cmdsend.add(&quot;logoff &lt;USER&gt;  /SERVER:&quot; + HorIP.getText());\n    } else  {\n        for (Component c : panel.getComponents()) {\n            if (c instanceof JCheckBox checkBox) {\n                if (checkBox.getToolTipText() != null) {\n                    if (checkBox.isSelected())  {\n                        cmdsend.add(&quot;logoff &lt;USER&gt;  /SERVER:&quot; + checkBox.getToolTipText());\n                    }\n                }\n            }\n        }\n    }\n    try  {\n        for (int i = 0; i &lt; cmdsend.size(); i++)  {\n            Runtime.getRuntime().exec(cmdsend.get(i));\n        }\n    } catch (IOException ex)  {\n        System.out.println(&quot;failed&quot;);\n    }\n}\n</code></pre>\n<p>Haven't tried much yet, but I imagine that there would be a way to use the results of a quser command to put a user into the logoff command, just not sure how though.</p>\n"},{"tags":["java","postgresql","jdbc","database-replication"],"comments":[{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":1,"creation_date":1677579117,"post_id":75590302,"comment_id":133361395,"body_markdown":"It looks like you got the bytes. Can you be specific about what is lacking?","body":"It looks like you got the bytes. Can you be specific about what is lacking?"},{"owner":{"account_id":3352721,"reputation":1057,"user_id":2816429,"display_name":"HariHaravelan"},"score":1,"creation_date":1677581715,"post_id":75590302,"comment_id":133362119,"body_markdown":"Yes, I am not sure what to do with it I am looking for a way to decode that byte array\nIf I read from a logical replication slot I get the readable string","body":"Yes, I am not sure what to do with it I am looking for a way to decode that byte array If I read from a logical replication slot I get the readable string"}],"answers":[{"tags":[],"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677584477,"creation_date":1677584477,"answer_id":75591579,"question_id":75590302,"body_markdown":"With (physical) streaming replication, the transaction log (WAL) is transferred as it is, which is very low-level binary information. Think of it as &amp;ldquo;in file X, replace the 42 bytes starting at offset 123 with the following: ...&amp;rdquo;. That is information that does not make any sense outside the database itself (or outside a streaming replication standby server, which is a physical copy).\r\n\r\nThere is no way you can reliably extract useful information from WAL. If you need that, you have to use *logical decoding*, where a *logical decoding plugin* on the primary server reverse engineers the WAL information into useful logical information.\r\n\r\nThe use cases for streaming physical information are very limited. One use case I can imagine is if you want to write a WAL archival program in Java, similar to the built-in `pg_receivewal`.","title":"How to process the PGReplicationStream from physical replication JDBC API?","body":"<p>With (physical) streaming replication, the transaction log (WAL) is transferred as it is, which is very low-level binary information. Think of it as “in file X, replace the 42 bytes starting at offset 123 with the following: ...”. That is information that does not make any sense outside the database itself (or outside a streaming replication standby server, which is a physical copy).</p>\n<p>There is no way you can reliably extract useful information from WAL. If you need that, you have to use <em>logical decoding</em>, where a <em>logical decoding plugin</em> on the primary server reverse engineers the WAL information into useful logical information.</p>\n<p>The use cases for streaming physical information are very limited. One use case I can imagine is if you want to write a WAL archival program in Java, similar to the built-in <code>pg_receivewal</code>.</p>\n"}],"owner":{"account_id":3352721,"reputation":1057,"user_id":2816429,"display_name":"HariHaravelan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75591579,"answer_count":1,"score":3,"last_activity_date":1677584477,"creation_date":1677577596,"question_id":75590302,"body_markdown":"I am trying to read the data from `physical` replication slot using JDBC&#39;s `ReplicationAPI`\r\n\r\nI am using Postgres 13\r\n\r\nHere is the sample code\r\n\r\n            LogSequenceNumber lsn = getCurrentLSN(sqlConnection);\r\n\r\n            PGReplicationStream stream =\r\n                    pgConnection\r\n                            .getReplicationAPI()\r\n                            .replicationStream()\r\n                            .physical()\r\n                            .withStartPosition(lsn)\r\n                            .start();\r\n\r\n            ByteBuffer buffer = stream.read();\r\n\r\n            int offset = buffer.arrayOffset();\r\n            byte[] source = buffer.array();\r\n            int length = source.length - offset;\r\n            System.out.println(new String(source, offset, length));\r\n\r\nMy code outputs the garbled string, Is there right a way to read the `bytes` returned from the PGReplicationStream\r\nI have not found a single document as to  how to process the bytes being returned from PGReplicationStream \r\n\r\nThe DML inserted to DB: `insert into t2(id,name) values(1,&#39;Jane Doe&#39;);`\r\n\r\nGarbled string Ouput: `D\u000E\u0002�3h\u0001\r\n�L� \u0013\u0006�4\u001F@�\u0003\u0002\u0018\u0001\u0013Jane Doe\u0003.\u000E\u0002�3h\u0001�\u0001A$���\u00149��&#39;��\u0002\u0001�4`\u0006\r\n\r\nHexString of Byte Array: `7700000000016833c00000000001683438000298be27a1a28f440000000e0200008833680100000000000a0000f24ce4b1002013007f060000843400001f40000000000000ff0302000208180001000000134a616e6520446f65030008000000002e0000000e020000c03368010000000080010000412497e4ff14399ea127be98020001000000843400007f0600000000`","title":"How to process the PGReplicationStream from physical replication JDBC API?","body":"<p>I am trying to read the data from <code>physical</code> replication slot using JDBC's <code>ReplicationAPI</code></p>\n<p>I am using Postgres 13</p>\n<p>Here is the sample code</p>\n<pre><code>        LogSequenceNumber lsn = getCurrentLSN(sqlConnection);\n\n        PGReplicationStream stream =\n                pgConnection\n                        .getReplicationAPI()\n                        .replicationStream()\n                        .physical()\n                        .withStartPosition(lsn)\n                        .start();\n\n        ByteBuffer buffer = stream.read();\n\n        int offset = buffer.arrayOffset();\n        byte[] source = buffer.array();\n        int length = source.length - offset;\n        System.out.println(new String(source, offset, length));\n</code></pre>\n<p>My code outputs the garbled string, Is there right a way to read the <code>bytes</code> returned from the PGReplicationStream\nI have not found a single document as to  how to process the bytes being returned from PGReplicationStream</p>\n<p>The DML inserted to DB: <code>insert into t2(id,name) values(1,'Jane Doe');</code></p>\n<p>Garbled string Ouput: <code>D\u000E�3h �L� \u0013�4@�\u0013Jane Doe.\u000E�3h�A$���9��'���4</code></p>\n<p>HexString of Byte Array: <code>7700000000016833c00000000001683438000298be27a1a28f440000000e0200008833680100000000000a0000f24ce4b1002013007f060000843400001f40000000000000ff0302000208180001000000134a616e6520446f65030008000000002e0000000e020000c03368010000000080010000412497e4ff14399ea127be98020001000000843400007f0600000000</code></p>\n"},{"tags":["java","multithreading","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":35823,"reputation":551,"user_id":101766,"display_name":"Aaron"},"score":0,"creation_date":1682238246,"post_id":39568947,"comment_id":134181267,"body_markdown":"Even if my Consumer is subscribed to multiple topics, is there any ordering guarantee for the data I&#39;m receiving? If another identical consumer was subscribed to the same set of topics, would they get records in the exact same order?","body":"Even if my Consumer is subscribed to multiple topics, is there any ordering guarantee for the data I&#39;m receiving? If another identical consumer was subscribed to the same set of topics, would they get records in the exact same order?"}],"answers":[{"tags":[],"owner":{"account_id":1063364,"reputation":454,"user_id":1064517,"display_name":"Subrata Saha"},"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1677584458,"creation_date":1474277426,"answer_id":39569746,"question_id":39568947,"body_markdown":"We can subscribe for multiple topic using following API :\r\n```java\r\nconsumer.subscribe(Arrays.asList(topic1,topic2), ConsumerRebalanceListener obj)\r\n```\r\n\r\nConsumer has the topic info and we can commit using `consumer.commitAsync` or `consumer.commitSync()` by creating `OffsetAndMetadata` object as follows.\r\n\r\n```java\r\nConsumerRecords&lt;String, String&gt; records = consumer.poll(long value);\r\n\r\nfor (TopicPartition partition : records.partitions()) {\r\n\tList&lt;ConsumerRecord&lt;String, String&gt;&gt; partitionRecords = records.records(partition);\r\n\t\r\n    for (ConsumerRecord&lt;String, String&gt; record : partitionRecords) {\r\n\t\tSystem.out.println(record.offset() + &quot;: &quot; + record.value());\r\n\t}\r\n\t\r\n    long lastOffset = partitionRecords.get(partitionRecords.size() - 1).offset();\r\n\r\n\tconsumer.commitSync(Collections.singletonMap(partition, new OffsetAndMetadata(lastOffset + 1)));\r\n}\r\n```","title":"Kafka consumer for multiple topic","body":"<p>We can subscribe for multiple topic using following API :</p>\n<pre class=\"lang-java prettyprint-override\"><code>consumer.subscribe(Arrays.asList(topic1,topic2), ConsumerRebalanceListener obj)\n</code></pre>\n<p>Consumer has the topic info and we can commit using <code>consumer.commitAsync</code> or <code>consumer.commitSync()</code> by creating <code>OffsetAndMetadata</code> object as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ConsumerRecords&lt;String, String&gt; records = consumer.poll(long value);\n\nfor (TopicPartition partition : records.partitions()) {\n    List&lt;ConsumerRecord&lt;String, String&gt;&gt; partitionRecords = records.records(partition);\n    \n    for (ConsumerRecord&lt;String, String&gt; record : partitionRecords) {\n        System.out.println(record.offset() + &quot;: &quot; + record.value());\n    }\n    \n    long lastOffset = partitionRecords.get(partitionRecords.size() - 1).offset();\n\n    consumer.commitSync(Collections.singletonMap(partition, new OffsetAndMetadata(lastOffset + 1)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10314310,"reputation":61,"user_id":7609068,"display_name":"Bhawna Arora"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1501094136,"creation_date":1501094136,"answer_id":45334956,"question_id":39568947,"body_markdown":"There is no need for multiple threads, you can have one consumer, consuming from multiple topics.\r\nOffsets are maintained by zookeeper, as kafka-server itself is stateless.\r\nWhenever a consumer consumes a message,its offset is commited with zookeeper to keep a future track to process each message only once. So even in case of kafka failure, consumer will start consuming from the next of last commited offset.","title":"Kafka consumer for multiple topic","body":"<p>There is no need for multiple threads, you can have one consumer, consuming from multiple topics.\nOffsets are maintained by zookeeper, as kafka-server itself is stateless.\nWhenever a consumer consumes a message,its offset is commited with zookeeper to keep a future track to process each message only once. So even in case of kafka failure, consumer will start consuming from the next of last commited offset.</p>\n"}],"owner":{"account_id":558953,"reputation":1204,"user_id":921335,"accept_rate":46,"display_name":"Akhil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70232,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":39569746,"answer_count":2,"score":42,"last_activity_date":1677584458,"creation_date":1474274916,"question_id":39568947,"body_markdown":"I have a list of topics (for now it&#39;s 10) whose size can increase in future. I know we can spawn multiple threads (per topic) to consume from each topic, but in my case if the number of topics increases, then the number of threads consuming from the topics increases, which I do not want, since the topics are not going to get data too frequently, so the threads will sit ideal.\r\n\r\nIs there any way to have a single consumer to consume from all topics? If yes, then how can we achieve it? Also how will the offset be maintained by Kafka? Please suggest answers.","title":"Kafka consumer for multiple topic","body":"<p>I have a list of topics (for now it's 10) whose size can increase in future. I know we can spawn multiple threads (per topic) to consume from each topic, but in my case if the number of topics increases, then the number of threads consuming from the topics increases, which I do not want, since the topics are not going to get data too frequently, so the threads will sit ideal.</p>\n\n<p>Is there any way to have a single consumer to consume from all topics? If yes, then how can we achieve it? Also how will the offset be maintained by Kafka? Please suggest answers.</p>\n"},{"tags":["java","inputstream"],"comments":[{"owner":{"account_id":5004307,"reputation":3369,"user_id":4022390,"accept_rate":55,"display_name":"Viet"},"score":0,"creation_date":1533182754,"post_id":51645295,"comment_id":90254581,"body_markdown":"check your `target` folder, does your txt exist on it?","body":"check your <code>target</code> folder, does your txt exist on it?"},{"owner":{"account_id":95134,"reputation":691,"user_id":259281,"accept_rate":27,"display_name":"pavithraCS"},"score":0,"creation_date":1533182958,"post_id":51645295,"comment_id":90254626,"body_markdown":"Can you try Config.class.getResourceAsStream(&quot;property_table.config.txt&quot;)","body":"Can you try Config.class.getResourceAsStream(&quot;property_table.config.txt&quot;&zwnj;&#8203;)"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1533183527,"post_id":51645295,"comment_id":90254756,"body_markdown":"`getResourceAsStream` loads from your classpath.  The src directory has nothing to do with your classpath","body":"<code>getResourceAsStream</code> loads from your classpath.  The src directory has nothing to do with your classpath"},{"owner":{"account_id":11114866,"reputation":585,"user_id":8159477,"display_name":"Patrick"},"score":0,"creation_date":1533183818,"post_id":51645295,"comment_id":90254822,"body_markdown":"@Jerry06 It&#39;s not directly under target. The path is target/classes/config/property_table_config.txt","body":"@Jerry06 It&#39;s not directly under target. The path is target/classes/config/property_table_config.txt"}],"answers":[{"tags":[],"owner":{"account_id":95134,"reputation":691,"user_id":259281,"accept_rate":27,"display_name":"pavithraCS"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1533185164,"creation_date":1533183146,"answer_id":51645375,"question_id":51645295,"body_markdown":"Can you try following code.\r\n\r\n&gt; Config.class.getResourceAsStream(&quot;property_table.config.txt&quot;)\r\n\r\nUpdate:\r\nThis is the code I tried.\r\n\r\n    package test;\r\n    \r\n    import java.util.Properties;\r\n    \r\n    public class Config\r\n    {\r\n      Properties configFile;\r\n    \r\n      public Config()\r\n      {\r\n        configFile = new Properties();\r\n        try\r\n        {\r\n          configFile.load(Config.class.getResourceAsStream(&quot;property_table.config.txt&quot;));\r\n        }\r\n        catch (Exception e)\r\n        {\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    \r\n      public String getProperty(String key)\r\n      {\r\n        String value = this.configFile.getProperty(key);\r\n        return value;\r\n      }\r\n    \r\n      public static void main(String[] args)\r\n      {\r\n        Config config = new Config();\r\n        System.out.println(&quot;URL: &quot; + config.getProperty(&quot;URL&quot;));\r\n        System.out.println(&quot;PASSWORD: &quot; + config.getProperty(&quot;PASSWORD&quot;));\r\n      }\r\n    }\r\n\r\n\r\nAnd I placed property_table.config.txt file withn test package and it worked.\r\n\r\n\r\n","title":"How to specify the path for getResourceAsStream() method in java","body":"<p>Can you try following code.</p>\n\n<blockquote>\n  <p>Config.class.getResourceAsStream(\"property_table.config.txt\")</p>\n</blockquote>\n\n<p>Update:\nThis is the code I tried.</p>\n\n<pre><code>package test;\n\nimport java.util.Properties;\n\npublic class Config\n{\n  Properties configFile;\n\n  public Config()\n  {\n    configFile = new Properties();\n    try\n    {\n      configFile.load(Config.class.getResourceAsStream(\"property_table.config.txt\"));\n    }\n    catch (Exception e)\n    {\n      e.printStackTrace();\n    }\n  }\n\n  public String getProperty(String key)\n  {\n    String value = this.configFile.getProperty(key);\n    return value;\n  }\n\n  public static void main(String[] args)\n  {\n    Config config = new Config();\n    System.out.println(\"URL: \" + config.getProperty(\"URL\"));\n    System.out.println(\"PASSWORD: \" + config.getProperty(\"PASSWORD\"));\n  }\n}\n</code></pre>\n\n<p>And I placed property_table.config.txt file withn test package and it worked.</p>\n"},{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1637040666,"creation_date":1533183844,"answer_id":51645482,"question_id":51645295,"body_markdown":"According to `Class.getResourceAsStream`:\r\n\r\n&gt; This method delegates to this object&#39;s class loader. If this object was loaded by the bootstrap class loader, the method delegates to ClassLoader.getSystemResourceAsStream.\r\n\r\n&gt; Before delegation, an absolute resource name is constructed from the given resource name using this algorithm:\r\n\r\n&gt; * If the name begins with a &#39;/&#39; (&#39;\\u002f&#39;), then the absolute name of the resource is the portion of the name following the &#39;/&#39;.\r\n&gt; * Otherwise, the absolute name is of the following form:\r\n&gt; &lt;br/&gt;`modified_package_name/name`\r\n&gt;&lt;br/&gt;Where the modified_package_name is the package name of this object with &#39;/&#39; substituted for &#39;.&#39; (&#39;\\u002e&#39;).\r\n\r\nThis is how I understand the comments:\r\n\r\n - If you use `ClassLoader.getResourceAsStream`, send the absolute path from package root, but omitting the first `/`.\r\n - If you use `Class.getResourceAsStream`, send either a path relative the the current `Class` object (and the method will take the package into account), or send the absolute path from package root, starting with a `/`.\r\n\r\nBut in addition to this, you need to be cognizant of your build system. With maven, resource files are stored under `src/main/resources`.\r\n\r\nSo, in your case, I believe making the following changes should resolve the issue:\r\n\r\n - Put the file in `src/main/resources`.\r\n - Change the code to\r\n\r\n        this.getClass()\r\n             .getResourceAsStream(&quot;/property_table.config.txt&quot;)\r\n             //or `Config.class.getResource...\r\n - Alternatively, use\r\n\r\n         this.getClass().getClassLoader()\r\n                         .getResourceAsStream(&quot;property_table.config.txt&quot;)`\r\n\r\nI&#39;ve tried this with a similar setup, and it works as expected.","title":"How to specify the path for getResourceAsStream() method in java","body":"<p>According to <code>Class.getResourceAsStream</code>:</p>\n<blockquote>\n<p>This method delegates to this object's class loader. If this object was loaded by the bootstrap class loader, the method delegates to ClassLoader.getSystemResourceAsStream.</p>\n</blockquote>\n<blockquote>\n<p>Before delegation, an absolute resource name is constructed from the given resource name using this algorithm:</p>\n</blockquote>\n<blockquote>\n<ul>\n<li>If the name begins with a '/' ('\\u002f'), then the absolute name of the resource is the portion of the name following the '/'.</li>\n<li>Otherwise, the absolute name is of the following form:\n<br/><code>modified_package_name/name</code>\n<br/>Where the modified_package_name is the package name of this object with '/' substituted for '.' ('\\u002e').</li>\n</ul>\n</blockquote>\n<p>This is how I understand the comments:</p>\n<ul>\n<li>If you use <code>ClassLoader.getResourceAsStream</code>, send the absolute path from package root, but omitting the first <code>/</code>.</li>\n<li>If you use <code>Class.getResourceAsStream</code>, send either a path relative the the current <code>Class</code> object (and the method will take the package into account), or send the absolute path from package root, starting with a <code>/</code>.</li>\n</ul>\n<p>But in addition to this, you need to be cognizant of your build system. With maven, resource files are stored under <code>src/main/resources</code>.</p>\n<p>So, in your case, I believe making the following changes should resolve the issue:</p>\n<ul>\n<li><p>Put the file in <code>src/main/resources</code>.</p>\n</li>\n<li><p>Change the code to</p>\n<pre><code> this.getClass()\n      .getResourceAsStream(&quot;/property_table.config.txt&quot;)\n      //or `Config.class.getResource...\n</code></pre>\n</li>\n<li><p>Alternatively, use</p>\n<pre><code>  this.getClass().getClassLoader()\n                  .getResourceAsStream(&quot;property_table.config.txt&quot;)`\n</code></pre>\n</li>\n</ul>\n<p>I've tried this with a similar setup, and it works as expected.</p>\n"},{"tags":[],"owner":{"account_id":9609012,"reputation":4037,"user_id":7134058,"display_name":"Vadim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533184348,"creation_date":1533184348,"answer_id":51645546,"question_id":51645295,"body_markdown":"`ClassLoader().getResourceAsStream()` is looking files only in classpath.\r\nWhat you need is to have your config file in directory which is in classpath.\r\n \r\nSo, you have options:\r\n\r\n- when you run your java application from command line you can set path to directory in -cp parameter or CLASSPATH system variable. point there is: directory from where you need to get config file must be in class path - not a file. (e.g. if file location is `c:\\my_projects\\test-project\\config\\my_config.properties` and `c:\\my_projects\\test-project\\` is in classpath then `getResourceAsStream` call will be `ClassLoader().getResourceAsStream(&quot;config/my_config.properties&quot;)`\r\n\r\n- you can package your file into jar file and root of jar file is starting point for `getResourceAsStream(&quot;config/my_config.properties&quot;)`\r\n\r\n- If your Maven project is a jar project you need to use Maven resource plugin to put additional resource(s) into jar.\r\n\r\nBTW: Maven does not put anything into jar file from src/main/java/ directory (if you do not explicitly specify it for resource plugin)\r\n\r\nIf you use IDE like Eclipse with your Maven project src/main/resources is a part of build classpath. Double check is it there and if it is not - do &quot;Update Maven Project&quot; or add it manually.\r\n\r\nStill ClassLoader will see your properties file from src/main/resources folder only when you run project in IDE not from standalone Jar file - if you did not package your file or provide location in classpath. \r\n","title":"How to specify the path for getResourceAsStream() method in java","body":"<p><code>ClassLoader().getResourceAsStream()</code> is looking files only in classpath.\nWhat you need is to have your config file in directory which is in classpath.</p>\n\n<p>So, you have options:</p>\n\n<ul>\n<li><p>when you run your java application from command line you can set path to directory in -cp parameter or CLASSPATH system variable. point there is: directory from where you need to get config file must be in class path - not a file. (e.g. if file location is <code>c:\\my_projects\\test-project\\config\\my_config.properties</code> and <code>c:\\my_projects\\test-project\\</code> is in classpath then <code>getResourceAsStream</code> call will be <code>ClassLoader().getResourceAsStream(\"config/my_config.properties\")</code></p></li>\n<li><p>you can package your file into jar file and root of jar file is starting point for <code>getResourceAsStream(\"config/my_config.properties\")</code></p></li>\n<li><p>If your Maven project is a jar project you need to use Maven resource plugin to put additional resource(s) into jar.</p></li>\n</ul>\n\n<p>BTW: Maven does not put anything into jar file from src/main/java/ directory (if you do not explicitly specify it for resource plugin)</p>\n\n<p>If you use IDE like Eclipse with your Maven project src/main/resources is a part of build classpath. Double check is it there and if it is not - do \"Update Maven Project\" or add it manually.</p>\n\n<p>Still ClassLoader will see your properties file from src/main/resources folder only when you run project in IDE not from standalone Jar file - if you did not package your file or provide location in classpath. </p>\n"},{"tags":[],"owner":{"account_id":27843923,"reputation":1,"user_id":21259829,"display_name":"diego"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1677584309,"creation_date":1676998968,"answer_id":75523662,"question_id":51645295,"body_markdown":"Try this:\r\n\r\n    String dirBase = new ClassPathResource(&quot;property_table.config.txt&quot;).getURI().getPath().replace(&quot;property_table.config.txt&quot;, &quot;&quot;);\r\n\r\n","title":"How to specify the path for getResourceAsStream() method in java","body":"<p>Try this:</p>\n<pre><code>String dirBase = new ClassPathResource(&quot;property_table.config.txt&quot;).getURI().getPath().replace(&quot;property_table.config.txt&quot;, &quot;&quot;);\n</code></pre>\n"}],"owner":{"account_id":11114866,"reputation":585,"user_id":8159477,"display_name":"Patrick"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24739,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":51645482,"answer_count":4,"score":8,"last_activity_date":1677584309,"creation_date":1533182517,"question_id":51645295,"body_markdown":"I know this question has been asked several times but I still can&#39;t get it work by those solutions. \r\n\r\nI have a maven project. And one Config.java file located in `consumer/src/main/java`. Here&#39;s the content:\r\n\r\n    import java.util.Properties;\r\n    \r\n    public class Config {\r\n        Properties configFile;\r\n        public Config() {\r\n            configFile = new Properties();\r\n            try {\r\n                configFile.load(this.getClass().getClassLoader().\r\n                        getResourceAsStream(&quot;property_table.config.txt&quot;));\r\n            } catch(Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public String getProperty(String key) {\r\n            String value = this.configFile.getProperty(key);\r\n            return value;\r\n        }\r\n        public static void main(String[] args) {\r\n            Config config = new Config();\r\n            System.out.println(&quot;URL: &quot; + config.getProperty(&quot;URL&quot;));\r\n            System.out.println(&quot;PASSWORD: &quot; + config.getProperty(&quot;PASSWORD&quot;));\r\n        }\r\n    }\r\n\r\nI kept getting `nullpointer exception`. I know that&#39;s because it can&#39;t find the file `property_table.config.txt`. \r\n\r\nAt first I put the `property_table_config.txt` file in the same folder(`consumer/src/main/java/`) as Config.java file. And tried use `/property_table_config.txt` and &#39;property_table_config.txt`. Neither of them work. \r\n\r\nAnd then I tried using absolute path, not working. And tried using `/main/java/property_table_config`, not working either.\r\n\r\nThen I saw this solution: https://stackoverflow.com/a/2103625/8159477.\r\nSo I make a directory called resources and put it under main folder (i.e. the path of the folder is `consumer/src/main/resources`, and create a sub-folder `config` under `resources`.  After putting the `property_table_config.txt` file there, I changed the code into this:\r\n\r\n    configFile.load(this.getClass().getClassLoader().getResourceAsStream(&quot;/config/property_table.config.txt&quot;));\r\n\r\nBut this still didn&#39;t work. Can anyone give some hint on this? Any suggestions will be appreciated!!\r\n\r\n\r\n\r\n","title":"How to specify the path for getResourceAsStream() method in java","body":"<p>I know this question has been asked several times but I still can't get it work by those solutions. </p>\n\n<p>I have a maven project. And one Config.java file located in <code>consumer/src/main/java</code>. Here's the content:</p>\n\n<pre><code>import java.util.Properties;\n\npublic class Config {\n    Properties configFile;\n    public Config() {\n        configFile = new Properties();\n        try {\n            configFile.load(this.getClass().getClassLoader().\n                    getResourceAsStream(\"property_table.config.txt\"));\n        } catch(Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public String getProperty(String key) {\n        String value = this.configFile.getProperty(key);\n        return value;\n    }\n    public static void main(String[] args) {\n        Config config = new Config();\n        System.out.println(\"URL: \" + config.getProperty(\"URL\"));\n        System.out.println(\"PASSWORD: \" + config.getProperty(\"PASSWORD\"));\n    }\n}\n</code></pre>\n\n<p>I kept getting <code>nullpointer exception</code>. I know that's because it can't find the file <code>property_table.config.txt</code>. </p>\n\n<p>At first I put the <code>property_table_config.txt</code> file in the same folder(<code>consumer/src/main/java/</code>) as Config.java file. And tried use <code>/property_table_config.txt</code> and 'property_table_config.txt`. Neither of them work. </p>\n\n<p>And then I tried using absolute path, not working. And tried using <code>/main/java/property_table_config</code>, not working either.</p>\n\n<p>Then I saw this solution: <a href=\"https://stackoverflow.com/a/2103625/8159477\">https://stackoverflow.com/a/2103625/8159477</a>.\nSo I make a directory called resources and put it under main folder (i.e. the path of the folder is <code>consumer/src/main/resources</code>, and create a sub-folder <code>config</code> under <code>resources</code>.  After putting the <code>property_table_config.txt</code> file there, I changed the code into this:</p>\n\n<pre><code>configFile.load(this.getClass().getClassLoader().getResourceAsStream(\"/config/property_table.config.txt\"));\n</code></pre>\n\n<p>But this still didn't work. Can anyone give some hint on this? Any suggestions will be appreciated!!</p>\n"},{"tags":["java","hazelcast","payara-micro","cve","prisma-cloud"],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677583765,"creation_date":1677583765,"answer_id":75591448,"question_id":75591207,"body_markdown":"Payara micro is using Hazelcast for clustering or some &quot;core&quot; features  . E.g. remote CDI events passed through Hazelcast. As far as I know this vulnerability fixed in 5.1.3 but Payara Micro using 5.1.1. Probably it works if you override Hazelcast dependency in your project descriptor (e.g. pom.xml)","title":"PrismaCloud CVE-2022-36437","body":"<p>Payara micro is using Hazelcast for clustering or some &quot;core&quot; features  . E.g. remote CDI events passed through Hazelcast. As far as I know this vulnerability fixed in 5.1.3 but Payara Micro using 5.1.1. Probably it works if you override Hazelcast dependency in your project descriptor (e.g. pom.xml)</p>\n"}],"owner":{"account_id":16540071,"reputation":356,"user_id":11951046,"display_name":"Farrukh Nabiyev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75591448,"answer_count":1,"score":0,"last_activity_date":1677584199,"creation_date":1677582571,"question_id":75591207,"body_markdown":"Prisma Cloud reports Vulnerability in hazelcast CVE-2022-36437\r\nThe thing is that the project **does not** use hazelcast. It uses payara-micro 6.2023.1\r\n\r\nWhat is the connection between hazlecast and payara-micro?\r\n\r\nHow to solve this vulnerability?","title":"PrismaCloud CVE-2022-36437","body":"<p>Prisma Cloud reports Vulnerability in hazelcast CVE-2022-36437\nThe thing is that the project <strong>does not</strong> use hazelcast. It uses payara-micro 6.2023.1</p>\n<p>What is the connection between hazlecast and payara-micro?</p>\n<p>How to solve this vulnerability?</p>\n"},{"tags":["java","maven","junit","mockito","powermockito"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1677603399,"post_id":75591378,"comment_id":133369136,"body_markdown":"Is there a good reason why you are using such an old version of mockito? Also using such old dependency like `com.mockrunner:*:0.4.2-j2ee5-jdk1.6` (ca. 15 years old)  Powermock? Why?","body":"Is there a good reason why you are using such an old version of mockito? Also using such old dependency like <code>com.mockrunner:*:0.4.2-j2ee5-jdk1.6</code> (ca. 15 years old)  Powermock? Why?"},{"owner":{"account_id":24564222,"reputation":1,"user_id":18471583,"display_name":"Coder001"},"score":0,"creation_date":1677647525,"post_id":75591378,"comment_id":133377402,"body_markdown":"that dependency has been used in my project. Can you suggest better version for mockito and powermockito?","body":"that dependency has been used in my project. Can you suggest better version for mockito and powermockito?"},{"owner":{"account_id":24564222,"reputation":1,"user_id":18471583,"display_name":"Coder001"},"score":0,"creation_date":1677671467,"post_id":75591378,"comment_id":133382695,"body_markdown":"its a legacy project","body":"its a legacy project"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1677672361,"post_id":75591378,"comment_id":133382965,"body_markdown":"First which JDK do you use and which Maven version do you use?  I expected that it&#39;s an legacy project... but using 15 years old stuff... Phew... unfortunately I can not suggest better versions for that... you have to check the release notes etc. and find matching versions...","body":"First which JDK do you use and which Maven version do you use?  I expected that it&#39;s an legacy project... but using 15 years old stuff... Phew... unfortunately I can not suggest better versions for that... you have to check the release notes etc. and find matching versions..."}],"owner":{"account_id":24564222,"reputation":1,"user_id":18471583,"display_name":"Coder001"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677583534,"creation_date":1677583395,"question_id":75591378,"body_markdown":"I am using below Mockito maven dependency:\r\n\r\n```\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n     &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n     &lt;version&gt;1.10.19&lt;/version&gt;\r\n     &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;mockrunner&lt;/groupId&gt;\r\n     &lt;artifactId&gt;mockrunner-jca&lt;/artifactId&gt;\r\n     &lt;version&gt;0.4.2-j2ee5-jdk1.6&lt;/version&gt;\r\n     &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;com.mockrunner&lt;/groupId&gt;\r\n     &lt;artifactId&gt;mockrunner-jdbc&lt;/artifactId&gt;\r\n     &lt;version&gt;0.4.2-j2ee5-jdk1.6&lt;/version&gt;\r\n     &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.mockejb&lt;/groupId&gt;\r\n     &lt;artifactId&gt;mockejb&lt;/artifactId&gt;\r\n     &lt;version&gt;0.6-beta2&lt;/version&gt;\r\n     &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nCan anyone suggest which Power Mockito maven dependency I need to use which is compatible with above dependency?\r\n\r\ni am getting below error when i use below Powe Mockito dependency:\r\n\r\n```\r\n    &lt;!-- https://mvnrepository.com/artifact/org.powermock/powermock-module-junit4 --&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n     &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt; \r\n     &lt;version&gt;1.6.6&lt;/version&gt;\r\n     &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; \r\n    &lt;!-- https://mvnrepository.com/artifact/org.powermock/powermock-api-mockito2 --&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n     &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt; \r\n     &lt;version&gt;1.6.6&lt;/version&gt;\r\n     &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; \r\n    &lt;!-- https://mvnrepository.com/artifact/org.powermock/powermock-module-testng --&gt;\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n     &lt;artifactId&gt;powermock-module-testng&lt;/artifactId&gt; \r\n     &lt;version&gt;1.6.6&lt;/version&gt;\r\n&lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\njava.lang.NoClassDefFoundError: org/mockito/plugins/MockMaker$TypeMockability\r\n&#160;&#160;&#160; at org.powermock.api.mockito.internal.mockmaker.PowerMockMaker.\\&lt;init\\&gt;(PowerMockMaker.java:44)\r\n&#160;&#160;&#160; at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n&#160;","title":"Need Power mockito compatible maven dependency version with existing Mockito maven dependency","body":"<p>I am using below Mockito maven dependency:</p>\n<pre><code>    &lt;dependency&gt;\n     &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n     &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n     &lt;version&gt;1.10.19&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;mockrunner&lt;/groupId&gt;\n     &lt;artifactId&gt;mockrunner-jca&lt;/artifactId&gt;\n     &lt;version&gt;0.4.2-j2ee5-jdk1.6&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;com.mockrunner&lt;/groupId&gt;\n     &lt;artifactId&gt;mockrunner-jdbc&lt;/artifactId&gt;\n     &lt;version&gt;0.4.2-j2ee5-jdk1.6&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;org.mockejb&lt;/groupId&gt;\n     &lt;artifactId&gt;mockejb&lt;/artifactId&gt;\n     &lt;version&gt;0.6-beta2&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Can anyone suggest which Power Mockito maven dependency I need to use which is compatible with above dependency?</p>\n<p>i am getting below error when i use below Powe Mockito dependency:</p>\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/org.powermock/powermock-module-junit4 --&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n     &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt; \n     &lt;version&gt;1.6.6&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;         \n    &lt;!-- https://mvnrepository.com/artifact/org.powermock/powermock-api-mockito2 --&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n     &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt; \n     &lt;version&gt;1.6.6&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;         \n    &lt;!-- https://mvnrepository.com/artifact/org.powermock/powermock-module-testng --&gt;\n    &lt;dependency&gt;\n     &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n     &lt;artifactId&gt;powermock-module-testng&lt;/artifactId&gt; \n     &lt;version&gt;1.6.6&lt;/version&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>java.lang.NoClassDefFoundError: org/mockito/plugins/MockMaker$TypeMockability\n    at org.powermock.api.mockito.internal.mockmaker.PowerMockMaker.&lt;init&gt;(PowerMockMaker.java:44)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n </p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","sequence"],"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677271691,"post_id":75560202,"comment_id":133311770,"body_markdown":"Does anybody else ever used sequence in Hibernate?","body":"Does anybody else ever used sequence in Hibernate?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677622456,"post_id":75560202,"comment_id":133374028,"body_markdown":"@NathanHughes Good point that you mentioned, thanks. At this step, I am confused. I think I should use both of them for dev and prod.","body":"@NathanHughes Good point that you mentioned, thanks. At this step, I am confused. I think I should use both of them for dev and prod."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677622467,"post_id":75560202,"comment_id":133374030,"body_markdown":"@NathanHughes As a result, would it be good --&gt; **1.** to define all of the database objects e.g. sequence, index, etc. and then generate SQL script from these definitions and use this script as an initial or migration script?","body":"@NathanHughes As a result, would it be good --&gt; <b>1.</b> to define all of the database objects e.g. sequence, index, etc. and then generate SQL script from these definitions and use this script as an initial or migration script?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677651957,"post_id":75560202,"comment_id":133377990,"body_markdown":"**2.** How do you switch between dev and prod for this schema creation? I mean, what is your `ddl-auto` setting and when do you change it (for example when switching to prod)? Could you give an example scenario or steps?","body":"<b>2.</b> How do you switch between dev and prod for this schema creation? I mean, what is your <code>ddl-auto</code> setting and when do you change it (for example when switching to prod)? Could you give an example scenario or steps?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677765881,"post_id":75560202,"comment_id":133405261,"body_markdown":"I will use multiple application.properties but even so, could you give a little bit detail? For example you may use Hibernate map creation for dev and flyway for prod, etc?","body":"I will use multiple application.properties but even so, could you give a little bit detail? For example you may use Hibernate map creation for dev and flyway for prod, etc?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1677766542,"post_id":75560202,"comment_id":133405489,"body_markdown":"Then, whic annotations do you use in your Entities? Id, Entity, OneToMany, ManyToOne, ManyToMany..., Index, Sequence, etc?","body":"Then, whic annotations do you use in your Entities? Id, Entity, OneToMany, ManyToOne, ManyToMany..., Index, Sequence, etc?"}],"answers":[{"tags":[],"owner":{"account_id":11481421,"reputation":11,"user_id":16807793,"display_name":"jhonatapers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677583430,"creation_date":1677436858,"answer_id":75574231,"question_id":75560202,"body_markdown":"yes this will create a sequence for you.\r\n\r\nYou just need to inform some things in jpa properties.\r\n\r\nBelow are the properties of my app:\r\n\r\nspring:\r\n\r\n  jpa: \r\n\r\n    show-sql: true\r\n\r\n    properties:\r\n\r\n      hibernate:\r\n\r\n       default_schema: controle_financeiro #if you have a default schema, if not you need to put it in the schema annotation = &quot;your sequence schema&quot; \r\n\r\n       auto_quote_keyword: true\r\n\r\n        ddl-auto: create #!!MORE IMPORTANT!! here you inform to create the mapped entities\r\n\r\n        format_sql: false #if you need formatted sql code\r\n\r\n    database: postgresql\r\n\r\n    database-platform: org.hibernate.dialect.PostgreSQLDialect #plataform\r\n\r\n    open-in-view: false\r\n\r\n    generate-ddl: true #if you need the generated DDL code, it will appear in the console\r\n\r\n\r\nMy sequences created with JPA\r\n\r\n[Sequences on DB][1]\r\n\r\n[My code][2]\r\n\r\n[Another way to create sequences\r\n][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2vFWV.png\r\n  [2]: https://i.stack.imgur.com/BHcMr.png\r\n  [3]: https://i.stack.imgur.com/TSHzn.png","title":"Hibernate sequence creation with SQL script?","body":"<p>yes this will create a sequence for you.</p>\n<p>You just need to inform some things in jpa properties.</p>\n<p>Below are the properties of my app:</p>\n<p>spring:</p>\n<p>jpa:</p>\n<pre><code>show-sql: true\n\nproperties:\n\n  hibernate:\n\n   default_schema: controle_financeiro #if you have a default schema, if not you need to put it in the schema annotation = &quot;your sequence schema&quot; \n\n   auto_quote_keyword: true\n\n    ddl-auto: create #!!MORE IMPORTANT!! here you inform to create the mapped entities\n\n    format_sql: false #if you need formatted sql code\n\ndatabase: postgresql\n\ndatabase-platform: org.hibernate.dialect.PostgreSQLDialect #plataform\n\nopen-in-view: false\n\ngenerate-ddl: true #if you need the generated DDL code, it will appear in the console\n</code></pre>\n<p>My sequences created with JPA</p>\n<p><a href=\"https://i.stack.imgur.com/2vFWV.png\" rel=\"nofollow noreferrer\">Sequences on DB</a></p>\n<p><a href=\"https://i.stack.imgur.com/BHcMr.png\" rel=\"nofollow noreferrer\">My code</a></p>\n<p><a href=\"https://i.stack.imgur.com/TSHzn.png\" rel=\"nofollow noreferrer\">Another way to create sequences\n</a></p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677583430,"creation_date":1677263702,"question_id":75560202,"body_markdown":"In my Spring Boot app, I want to use sequence for each entity as shown below:\r\n\r\n```\r\n@Entity\r\npublic class Author {\r\n \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;author_gen&quot;)\r\n    @SequenceGenerator(name=&quot;author_gen&quot;, sequenceName = &quot;author_seq&quot;)\r\n    private Long id;\r\n     \r\n    ...\r\n     \r\n}\r\n```\r\n\r\nThere are different kind of usages regarding to sequence generation on database side. So;\r\n\r\n**1)** Is this implementation above enough to create a sequence on database when using Hibernate only? \r\n\r\n**2)** In addition to the annotation above, do I also need a manual sequence creation on database side when I use Flyway or `schema.sql` in the Spring Boot app? ","title":"Hibernate sequence creation with SQL script?","body":"<p>In my Spring Boot app, I want to use sequence for each entity as shown below:</p>\n<pre><code>@Entity\npublic class Author {\n \n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;author_gen&quot;)\n    @SequenceGenerator(name=&quot;author_gen&quot;, sequenceName = &quot;author_seq&quot;)\n    private Long id;\n     \n    ...\n     \n}\n</code></pre>\n<p>There are different kind of usages regarding to sequence generation on database side. So;</p>\n<p><strong>1)</strong> Is this implementation above enough to create a sequence on database when using Hibernate only?</p>\n<p><strong>2)</strong> In addition to the annotation above, do I also need a manual sequence creation on database side when I use Flyway or <code>schema.sql</code> in the Spring Boot app?</p>\n"},{"tags":["java","jsp","servlets"],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677573620,"creation_date":1677573620,"answer_id":75589639,"question_id":75589483,"body_markdown":"In general I don&#39;t think you should write your code that depends on environment it runs in. This is because your code becomes too coupled to the environment, if tomorrow you&#39;ll want to run the code somewhere else (another environment might eventually come up) - you&#39;ll have to change the code.\r\n\r\nInstead of doing that, try to understand what are the implications of environment and map it to business features that code should react to.\r\nFor example, lets say, you want to run H2 database in dev env. and Postgres in prod (just an example).\r\nSo you could write the code like that:\r\n```java\r\nif( env == dev) {\r\n   run something in H2\r\n} else if (env == prod) {\r\n   run something in Postgres\r\n}\r\n```\r\nHowever consider a different approach: \r\n \r\nDev env implies that you&#39;ll work with H2 so define a configuration per environment (externally in some file or something).\r\n\r\n```yml\r\ndev.yml\r\ndbType : H2\r\n```\r\n```yml\r\nprod.yml\r\ndbType: Postgres\r\n```\r\n\r\nNow your product should support H2 and Postres so the previous code snippet becomes:\r\n```java\r\nif( dbType == H2) {\r\n   run something in H2\r\n} else if (dbType == Postgres) {\r\n   run something in Postgres\r\n}\r\n```\r\nSo you&#39;re not depenedent on the environment anymore.\r\n\r\nNow as for the technical part of how to supply such a configuration - it depends on your deployment. One approach would be adding an environment variable that points to a file. Another approach would be using some configuration server (its more advanced) - this is all depends on your actual requirements, so without more details its kind of hard to provide the solution that will work for you in the best possible way...","title":"How to add environment value in servlet","body":"<p>In general I don't think you should write your code that depends on environment it runs in. This is because your code becomes too coupled to the environment, if tomorrow you'll want to run the code somewhere else (another environment might eventually come up) - you'll have to change the code.</p>\n<p>Instead of doing that, try to understand what are the implications of environment and map it to business features that code should react to.\nFor example, lets say, you want to run H2 database in dev env. and Postgres in prod (just an example).\nSo you could write the code like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if( env == dev) {\n   run something in H2\n} else if (env == prod) {\n   run something in Postgres\n}\n</code></pre>\n<p>However consider a different approach:</p>\n<p>Dev env implies that you'll work with H2 so define a configuration per environment (externally in some file or something).</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>dev.yml\ndbType : H2\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>prod.yml\ndbType: Postgres\n</code></pre>\n<p>Now your product should support H2 and Postres so the previous code snippet becomes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if( dbType == H2) {\n   run something in H2\n} else if (dbType == Postgres) {\n   run something in Postgres\n}\n</code></pre>\n<p>So you're not depenedent on the environment anymore.</p>\n<p>Now as for the technical part of how to supply such a configuration - it depends on your deployment. One approach would be adding an environment variable that points to a file. Another approach would be using some configuration server (its more advanced) - this is all depends on your actual requirements, so without more details its kind of hard to provide the solution that will work for you in the best possible way...</p>\n"}],"owner":{"account_id":27897759,"reputation":1,"user_id":21302691,"display_name":"sharma vh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1677578040,"answer_count":1,"score":-2,"last_activity_date":1677583187,"creation_date":1677572602,"question_id":75589483,"body_markdown":"We have dev, predev, uat and prod environments, I need to write code for implementing different environments, our application is developed in servlets. jsp\r\n\r\nI need to access below code in .jsp or .servlet\r\n\r\napplication.yaml\r\n====================\r\nenv:\r\n- name: ENV_DEV\r\n   valueFrom:\r\n   configMapKeyRef:\r\n   name: config\r\n   key: dev\r\n\r\n\r\nIf possible please share me the code\r\n\r\nThanks","title":"How to add environment value in servlet","body":"<p>We have dev, predev, uat and prod environments, I need to write code for implementing different environments, our application is developed in servlets. jsp</p>\n<p>I need to access below code in .jsp or .servlet</p>\n<h1>application.yaml</h1>\n<p>env:</p>\n<ul>\n<li>name: ENV_DEV\nvalueFrom:\nconfigMapKeyRef:\nname: config\nkey: dev</li>\n</ul>\n<p>If possible please share me the code</p>\n<p>Thanks</p>\n"},{"tags":["java","arrays","json"],"answers":[{"tags":[],"owner":{"account_id":10500127,"reputation":1609,"user_id":7739083,"display_name":"Stempler"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677582721,"creation_date":1677580046,"answer_id":75590738,"question_id":75590678,"body_markdown":"1. Create java model classes that corresponds to your json. This should include a list of Students.\r\n2. Serialize both jsons into the java models.\r\n3. Combine the 2 lists of students in one of the objects.\r\n4. Deserialize the java object back to json string\r\n\r\nStudent:\r\n\r\n    public class Student {\r\n\r\n    private String name;\r\n    private String div;\r\n    private int maths;\r\n    private int science;\r\n    //getters setters constructors\r\n    }\r\n\r\nData:\r\n    public class Data {\r\n\r\n    private List&lt;Student&gt; students;\r\n    ...\r\n    }\r\n\r\nYou also need some parent class to hold data, lets call it Parent:\r\n\r\n    public class Parent {\r\n\r\n    private Data data;\r\n    ...\r\n    }\r\n\r\n\r\nNow to run:\r\n\r\n\r\n    public class Test {\r\n    public static void main(String[] args) throws JsonProcessingException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n\r\n        String json1 = &quot;{\\n&quot; +\r\n                &quot;    \\&quot;data\\&quot;: {\\n&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;            \\&quot;students\\&quot;: [\\n&quot; +\r\n                &quot;                {\\n&quot; +\r\n                &quot;                    \\&quot;name\\&quot; : \\&quot;Alice\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;div\\&quot; : \\&quot;A\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;maths\\&quot; : 56,\\n&quot; +\r\n                &quot;                    \\&quot;science\\&quot; : 89\\n&quot; +\r\n                &quot;                },\\n&quot; +\r\n                &quot;                {\\n&quot; +\r\n                &quot;                    \\&quot;name\\&quot; : \\&quot;Bob\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;div\\&quot; : \\&quot;B\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;maths\\&quot; : 87,\\n&quot; +\r\n                &quot;                    \\&quot;science\\&quot; : 34\\n&quot; +\r\n                &quot;                }\\n&quot; +\r\n                &quot;]}}&quot;;\r\n\r\n        String json2 = &quot;{\\n&quot; +\r\n                &quot;    \\&quot;data\\&quot;: {\\n&quot; +\r\n                &quot;        \\n&quot; +\r\n                &quot;            \\&quot;students\\&quot;: [\\n&quot; +\r\n                &quot;                {\\n&quot; +\r\n                &quot;                    \\&quot;name\\&quot; : \\&quot;Charlie\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;div\\&quot; : \\&quot;C\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;maths\\&quot; : 45,\\n&quot; +\r\n                &quot;                    \\&quot;science\\&quot; :67\\n&quot; +\r\n                &quot;                },\\n&quot; +\r\n                &quot;                {\\n&quot; +\r\n                &quot;                    \\&quot;name\\&quot; : \\&quot;Doe\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;div\\&quot; : \\&quot;D\\&quot;,\\n&quot; +\r\n                &quot;                    \\&quot;maths\\&quot; : 56,\\n&quot; +\r\n                &quot;                    \\&quot;science\\&quot; : 78\\n&quot; +\r\n                &quot;                }\\n&quot; +\r\n                &quot;]}}&quot;;\r\n\r\n\r\n        Parent parent1 = mapper.readValue(json1, Parent.class);\r\n        Parent parent2 = mapper.readValue(json2, Parent.class);\r\n\r\n        parent1.getData().getStudents().addAll(parent2.getData().getStudents());\r\n\r\n        System.out.println(mapper.writeValueAsString(parent1));\r\n\r\n    }\r\n\r\nyou will get:\r\n    \r\n    {\r\n      &quot;data&quot;: {\r\n        &quot;students&quot;: [\r\n      {\r\n        &quot;name&quot;: &quot;Alice&quot;,\r\n        &quot;div&quot;: &quot;A&quot;,\r\n        &quot;maths&quot;: 56,\r\n        &quot;science&quot;: 89\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;Bob&quot;,\r\n        &quot;div&quot;: &quot;B&quot;,\r\n        &quot;maths&quot;: 87,\r\n        &quot;science&quot;: 34\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;Charlie&quot;,\r\n        &quot;div&quot;: &quot;C&quot;,\r\n        &quot;maths&quot;: 45,\r\n        &quot;science&quot;: 67\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;Doe&quot;,\r\n        &quot;div&quot;: &quot;D&quot;,\r\n        &quot;maths&quot;: 56,\r\n        &quot;science&quot;: 78\r\n      }\r\n    ]\r\n      }\r\n    }\r\n\r\n   \r\n","title":"Merging 2 JSONArrays having same keys in java","body":"<ol>\n<li>Create java model classes that corresponds to your json. This should include a list of Students.</li>\n<li>Serialize both jsons into the java models.</li>\n<li>Combine the 2 lists of students in one of the objects.</li>\n<li>Deserialize the java object back to json string</li>\n</ol>\n<p>Student:</p>\n<pre><code>public class Student {\n\nprivate String name;\nprivate String div;\nprivate int maths;\nprivate int science;\n//getters setters constructors\n}\n</code></pre>\n<p>Data:\npublic class Data {</p>\n<pre><code>private List&lt;Student&gt; students;\n...\n}\n</code></pre>\n<p>You also need some parent class to hold data, lets call it Parent:</p>\n<pre><code>public class Parent {\n\nprivate Data data;\n...\n}\n</code></pre>\n<p>Now to run:</p>\n<pre><code>public class Test {\npublic static void main(String[] args) throws JsonProcessingException {\n    ObjectMapper mapper = new ObjectMapper();\n\n    String json1 = &quot;{\\n&quot; +\n            &quot;    \\&quot;data\\&quot;: {\\n&quot; +\n            &quot;        \\n&quot; +\n            &quot;            \\&quot;students\\&quot;: [\\n&quot; +\n            &quot;                {\\n&quot; +\n            &quot;                    \\&quot;name\\&quot; : \\&quot;Alice\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;div\\&quot; : \\&quot;A\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;maths\\&quot; : 56,\\n&quot; +\n            &quot;                    \\&quot;science\\&quot; : 89\\n&quot; +\n            &quot;                },\\n&quot; +\n            &quot;                {\\n&quot; +\n            &quot;                    \\&quot;name\\&quot; : \\&quot;Bob\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;div\\&quot; : \\&quot;B\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;maths\\&quot; : 87,\\n&quot; +\n            &quot;                    \\&quot;science\\&quot; : 34\\n&quot; +\n            &quot;                }\\n&quot; +\n            &quot;]}}&quot;;\n\n    String json2 = &quot;{\\n&quot; +\n            &quot;    \\&quot;data\\&quot;: {\\n&quot; +\n            &quot;        \\n&quot; +\n            &quot;            \\&quot;students\\&quot;: [\\n&quot; +\n            &quot;                {\\n&quot; +\n            &quot;                    \\&quot;name\\&quot; : \\&quot;Charlie\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;div\\&quot; : \\&quot;C\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;maths\\&quot; : 45,\\n&quot; +\n            &quot;                    \\&quot;science\\&quot; :67\\n&quot; +\n            &quot;                },\\n&quot; +\n            &quot;                {\\n&quot; +\n            &quot;                    \\&quot;name\\&quot; : \\&quot;Doe\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;div\\&quot; : \\&quot;D\\&quot;,\\n&quot; +\n            &quot;                    \\&quot;maths\\&quot; : 56,\\n&quot; +\n            &quot;                    \\&quot;science\\&quot; : 78\\n&quot; +\n            &quot;                }\\n&quot; +\n            &quot;]}}&quot;;\n\n\n    Parent parent1 = mapper.readValue(json1, Parent.class);\n    Parent parent2 = mapper.readValue(json2, Parent.class);\n\n    parent1.getData().getStudents().addAll(parent2.getData().getStudents());\n\n    System.out.println(mapper.writeValueAsString(parent1));\n\n}\n</code></pre>\n<p>you will get:</p>\n<pre><code>{\n  &quot;data&quot;: {\n    &quot;students&quot;: [\n  {\n    &quot;name&quot;: &quot;Alice&quot;,\n    &quot;div&quot;: &quot;A&quot;,\n    &quot;maths&quot;: 56,\n    &quot;science&quot;: 89\n  },\n  {\n    &quot;name&quot;: &quot;Bob&quot;,\n    &quot;div&quot;: &quot;B&quot;,\n    &quot;maths&quot;: 87,\n    &quot;science&quot;: 34\n  },\n  {\n    &quot;name&quot;: &quot;Charlie&quot;,\n    &quot;div&quot;: &quot;C&quot;,\n    &quot;maths&quot;: 45,\n    &quot;science&quot;: 67\n  },\n  {\n    &quot;name&quot;: &quot;Doe&quot;,\n    &quot;div&quot;: &quot;D&quot;,\n    &quot;maths&quot;: 56,\n    &quot;science&quot;: 78\n  }\n]\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":23099829,"reputation":368,"user_id":17209391,"display_name":"Ruby"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75590738,"answer_count":1,"score":0,"last_activity_date":1677582721,"creation_date":1677579702,"question_id":75590678,"body_markdown":"I have 2 JSONArrays that have same key as follows:\r\n\r\n```json\r\n{\r\n\t&quot;data&quot;: {\r\n\t\t\r\n\t\t\t&quot;Students&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Alice&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;A&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 56,\r\n\t\t\t\t\t&quot;science&quot; : 89\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Bob&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;B&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 87,\r\n\t\t\t\t\t&quot;science&quot; : 34\r\n\t\t\t\t}\r\n]}}\r\n```\r\n```json\r\n{\r\n\t&quot;data&quot;: {\r\n\t\t\r\n\t\t\t&quot;Students&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Charlie&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;C&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 45,\r\n\t\t\t\t\t&quot;science&quot; :67\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Doe&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;D&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 56,\r\n\t\t\t\t\t&quot;science&quot; : 78\r\n\t\t\t\t}\r\n]}}\r\n```\r\nAs in both JSON payloads I have the same JSONArray &quot;Students&quot;, I want to combine both the JSONArrays into a single JSON Array as follows:\r\n\r\n```json\r\n{\r\n\t&quot;data&quot;: {\r\n\t\t\r\n\t\t\t&quot;Students&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Alice&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;A&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 56,\r\n\t\t\t\t\t&quot;science&quot; : 89\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Bob&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;B&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 87,\r\n\t\t\t\t\t&quot;science&quot; : 34\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Charlie&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;C&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 45,\r\n\t\t\t\t\t&quot;science&quot; :67\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;name&quot; : &quot;Doe&quot;,\r\n\t\t\t\t\t&quot;div&quot; : &quot;D&quot;,\r\n\t\t\t\t\t&quot;maths&quot; : 56,\r\n\t\t\t\t\t&quot;science&quot; : 78\r\n\t\t\t\t}\r\n]}}\r\n```\r\nI want to achieve this using Java. Is there any way I can do it? Is there any Collection class that can serve this purpose?","title":"Merging 2 JSONArrays having same keys in java","body":"<p>I have 2 JSONArrays that have same key as follows:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;data&quot;: {\n        \n            &quot;Students&quot;: [\n                {\n                    &quot;name&quot; : &quot;Alice&quot;,\n                    &quot;div&quot; : &quot;A&quot;,\n                    &quot;maths&quot; : 56,\n                    &quot;science&quot; : 89\n                },\n                {\n                    &quot;name&quot; : &quot;Bob&quot;,\n                    &quot;div&quot; : &quot;B&quot;,\n                    &quot;maths&quot; : 87,\n                    &quot;science&quot; : 34\n                }\n]}}\n</code></pre>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;data&quot;: {\n        \n            &quot;Students&quot;: [\n                {\n                    &quot;name&quot; : &quot;Charlie&quot;,\n                    &quot;div&quot; : &quot;C&quot;,\n                    &quot;maths&quot; : 45,\n                    &quot;science&quot; :67\n                },\n                {\n                    &quot;name&quot; : &quot;Doe&quot;,\n                    &quot;div&quot; : &quot;D&quot;,\n                    &quot;maths&quot; : 56,\n                    &quot;science&quot; : 78\n                }\n]}}\n</code></pre>\n<p>As in both JSON payloads I have the same JSONArray &quot;Students&quot;, I want to combine both the JSONArrays into a single JSON Array as follows:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;data&quot;: {\n        \n            &quot;Students&quot;: [\n                {\n                    &quot;name&quot; : &quot;Alice&quot;,\n                    &quot;div&quot; : &quot;A&quot;,\n                    &quot;maths&quot; : 56,\n                    &quot;science&quot; : 89\n                },\n                {\n                    &quot;name&quot; : &quot;Bob&quot;,\n                    &quot;div&quot; : &quot;B&quot;,\n                    &quot;maths&quot; : 87,\n                    &quot;science&quot; : 34\n                },\n                {\n                    &quot;name&quot; : &quot;Charlie&quot;,\n                    &quot;div&quot; : &quot;C&quot;,\n                    &quot;maths&quot; : 45,\n                    &quot;science&quot; :67\n                },\n                {\n                    &quot;name&quot; : &quot;Doe&quot;,\n                    &quot;div&quot; : &quot;D&quot;,\n                    &quot;maths&quot; : 56,\n                    &quot;science&quot; : 78\n                }\n]}}\n</code></pre>\n<p>I want to achieve this using Java. Is there any way I can do it? Is there any Collection class that can serve this purpose?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":12213088,"reputation":7885,"user_id":8914336,"display_name":"coroutineDispatcher"},"score":0,"creation_date":1677581973,"post_id":75591012,"comment_id":133362204,"body_markdown":"Does build fail? or just runtime Android Studio issue? If that&#39;s the case just do an invaldate + restart.","body":"Does build fail? or just runtime Android Studio issue? If that&#39;s the case just do an invaldate + restart."},{"owner":{"account_id":8219300,"reputation":37,"user_id":6184445,"display_name":"Juan Torres"},"score":0,"creation_date":1677582417,"post_id":75591012,"comment_id":133362333,"body_markdown":"yes ,Build succeed but when referencing test modules it seems android doesn&#39;t see the packages from main source code","body":"yes ,Build succeed but when referencing test modules it seems android doesn&#39;t see the packages from main source code"},{"owner":{"account_id":12213088,"reputation":7885,"user_id":8914336,"display_name":"coroutineDispatcher"},"score":0,"creation_date":1677584083,"post_id":75591012,"comment_id":133362792,"body_markdown":"Doesn&#39;t the invalidate + restart solve the issue?","body":"Doesn&#39;t the invalidate + restart solve the issue?"},{"owner":{"account_id":8219300,"reputation":37,"user_id":6184445,"display_name":"Juan Torres"},"score":0,"creation_date":1677587581,"post_id":75591012,"comment_id":133363784,"body_markdown":"unfortunately no","body":"unfortunately no"}],"owner":{"account_id":8219300,"reputation":37,"user_id":6184445,"display_name":"Juan Torres"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677582465,"creation_date":1677581496,"question_id":75591012,"body_markdown":"I got a really strange behavior after upgrading Android studio version to Android Studio Electric Eel | 2022.1.1 Patch 1 \r\n\r\nBasically, s**ome modules of my project are no longer able to recognize the main source code classes that are referenced on AndroidTest** (instrumentation) nor **Test**(unitTest) submodules.\r\n\r\nHowever, **nothing has been modified from my project**, moreover,when building and running the apk from the IDE ,it builds ok, so it seems it’s only impacting test modules.\r\nSome forums suggested try invalidating the IDE system cache but the problem is still present\r\n\r\n**Does someone get an insight or similar situation and how to solve it?**\r\n\r\nthe build.gradle file hasn&#39;t change neither\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nbuild seems ok \r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8Glkv.png\r\n  [2]: https://i.stack.imgur.com/NVkgc.png","title":"Cannot resolve classes of src project from within submodules","body":"<p>I got a really strange behavior after upgrading Android studio version to Android Studio Electric Eel | 2022.1.1 Patch 1</p>\n<p>Basically, s<strong>ome modules of my project are no longer able to recognize the main source code classes that are referenced on AndroidTest</strong> (instrumentation) nor <strong>Test</strong>(unitTest) submodules.</p>\n<p>However, <strong>nothing has been modified from my project</strong>, moreover,when building and running the apk from the IDE ,it builds ok, so it seems it’s only impacting test modules.\nSome forums suggested try invalidating the IDE system cache but the problem is still present</p>\n<p><strong>Does someone get an insight or similar situation and how to solve it?</strong></p>\n<p>the build.gradle file hasn't change neither</p>\n<p><a href=\"https://i.stack.imgur.com/8Glkv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Glkv.png\" alt=\"enter image description here\" /></a></p>\n<p>build seems ok\n<a href=\"https://i.stack.imgur.com/NVkgc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NVkgc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","google-cloud-storage","cloud","acl"],"comments":[{"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1677527400,"post_id":75581303,"comment_id":133351883,"body_markdown":"ACLs are not the recommend way to handle permission on Cloud Storage, Did you explore other solutions?","body":"ACLs are not the recommend way to handle permission on Cloud Storage, Did you explore other solutions?"}],"owner":{"account_id":22503654,"reputation":1,"user_id":16699604,"display_name":"SamCro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677582391,"creation_date":1677505598,"question_id":75581303,"body_markdown":"![enter image description here][1]\r\nI am trying to create a cloud storage using google cloud functions in java. I have created a link via Blob but I have problem when I try to give access to users. I did not understand how **setAcsl() **function works.  \r\n\r\nI have tried \r\n````\r\nList&lt;Acl&gt; acls = new ArrayList&lt;&gt;();\r\nacls.add(Acl.of(Acl.User.ofAllUsers(), Acl.Role.READER));\r\n````\r\n\r\n  [1]: https://i.stack.imgur.com/tNcHC.png","title":"How to access everyone who has link in Google Cloud Storage Blob in Java?","body":"<p><img src=\"https://i.stack.imgur.com/tNcHC.png\" alt=\"enter image description here\" />\nI am trying to create a cloud storage using google cloud functions in java. I have created a link via Blob but I have problem when I try to give access to users. I did not understand how **setAcsl() **function works.</p>\n<p>I have tried</p>\n<pre><code>List&lt;Acl&gt; acls = new ArrayList&lt;&gt;();\nacls.add(Acl.of(Acl.User.ofAllUsers(), Acl.Role.READER));\n</code></pre>\n"},{"tags":["java","list","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":1,"creation_date":1677584806,"post_id":75591112,"comment_id":133362986,"body_markdown":"In this case (and whenever the &#39;orders&#39; are coming all at once) they should be the same. Though, if `getOrders()` would be implemented differently and it would return a `Flux&lt;Orders&gt;` you can use the 2nd approach to process/filter elements as they come, one by one.","body":"In this case (and whenever the &#39;orders&#39; are coming all at once) they should be the same. Though, if <code>getOrders()</code> would be implemented differently and it would return a <code>Flux&lt;Orders&gt;</code> you can use the 2nd approach to process/filter elements as they come, one by one."},{"owner":{"account_id":17525087,"reputation":39,"user_id":12710322,"display_name":"94621"},"score":0,"creation_date":1677592508,"post_id":75591112,"comment_id":133365456,"body_markdown":"Thanks @TrandafirEmanuel! I thought there may be more nuance to the problem.","body":"Thanks @TrandafirEmanuel! I thought there may be more nuance to the problem."},{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1677690559,"post_id":75591112,"comment_id":133389134,"body_markdown":"Combination of `Flux.fromIterable` &amp; `collectList` looks like NOP here because there are no async calls involved. We are transforming list into `Flux` and then back to list. Most probably it will consume more resources.","body":"Combination of <code>Flux.fromIterable</code> &amp; <code>collectList</code> looks like NOP here because there are no async calls involved. We are transforming list into <code>Flux</code> and then back to list. Most probably it will consume more resources."}],"owner":{"account_id":17525087,"reputation":39,"user_id":12710322,"display_name":"94621"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677582021,"creation_date":1677582021,"question_id":75591112,"body_markdown":"When working with `List`s in Webflux, there are multiple ways how to iterate over nested lists.\r\nLet&#39;s say we have a class `Customer`:\r\n```java\r\npublic class Customer {\r\n    public String name;\r\n    public List&lt;Order&gt; orders;\r\n}\r\n```\r\nand now want to do some filtering on the `orders`.\r\n#### Mapping/Filtering inside a `map()` using java streams:\r\n```java\r\nMono&lt;List&lt;Order&gt;&gt; customer = Mono.just(myCustomer)\r\n    .map(customer -&gt; customer.getOrders())\r\n    .map(orders -&gt; orders.stream()\r\n        .filter(order -&gt; order.getStatus().equals(&quot;Open&quot;))\r\n        .toList());\r\n```\r\n#### Doing mapping/filtering on the stream level\r\n```java\r\nMono&lt;List&lt;Order&gt;&gt; customer = Mono.just(myCustomer)\r\n    .flatMapMany(customer -&gt; Flux.fromIterable(customer.getOrders())\r\n    .filter(order -&gt; order.getStatus().equals(&quot;Open&quot;))\r\n    .collectList()\r\n\r\n```\r\nNote that usually `Mono.just(myCustomer)` will be some `customerService.getCustomer()` network call that returns `Mono&lt;Customer&gt;`.\r\n\r\nNow the question: Is one approach better than the other (stylistically, performance-wise,...), or is it a matter of preference?","title":"List mapping in Webflux: map() + stream() vs. flatMapMany() + map() + collectList()","body":"<p>When working with <code>List</code>s in Webflux, there are multiple ways how to iterate over nested lists.\nLet's say we have a class <code>Customer</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Customer {\n    public String name;\n    public List&lt;Order&gt; orders;\n}\n</code></pre>\n<p>and now want to do some filtering on the <code>orders</code>.</p>\n<h4>Mapping/Filtering inside a <code>map()</code> using java streams:</h4>\n<pre class=\"lang-java prettyprint-override\"><code>Mono&lt;List&lt;Order&gt;&gt; customer = Mono.just(myCustomer)\n    .map(customer -&gt; customer.getOrders())\n    .map(orders -&gt; orders.stream()\n        .filter(order -&gt; order.getStatus().equals(&quot;Open&quot;))\n        .toList());\n</code></pre>\n<h4>Doing mapping/filtering on the stream level</h4>\n<pre class=\"lang-java prettyprint-override\"><code>Mono&lt;List&lt;Order&gt;&gt; customer = Mono.just(myCustomer)\n    .flatMapMany(customer -&gt; Flux.fromIterable(customer.getOrders())\n    .filter(order -&gt; order.getStatus().equals(&quot;Open&quot;))\n    .collectList()\n\n</code></pre>\n<p>Note that usually <code>Mono.just(myCustomer)</code> will be some <code>customerService.getCustomer()</code> network call that returns <code>Mono&lt;Customer&gt;</code>.</p>\n<p>Now the question: Is one approach better than the other (stylistically, performance-wise,...), or is it a matter of preference?</p>\n"},{"tags":["java","api","selenium-webdriver","testng","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":10621254,"reputation":2629,"user_id":7822301,"accept_rate":56,"display_name":"Zakaria Shahed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677573621,"creation_date":1677573621,"answer_id":75589640,"question_id":75589474,"body_markdown":"         try\r\n         {\r\n             Assert.assertEquals(statuscode, 200);\r\n         }\r\n         catch(AssertionError e)\r\n         {\r\n             org.testng.Assert.fail(&quot;Actual value is not equal to Expected value for&quot;);\r\n         }\r\n\r\nThe way you handled by using the try and catch block possibly caused the issue of the test being skipped instead of failed.\r\n\r\nIt&#39;s not good practice to use try catch on assertion. But if you really need this then you can use it like this\r\n\r\n    catch(AssertionError e)\r\n    {\r\n        throw new AssertionError(&quot;Actual value is not equal to Expected value for&quot;, e);\r\n    }\r\n\r\n**If you are using TestNg then you can use assertion in this way. So you do not need to use any try catch to print the message** \r\n\r\n  \r\n\r\n      Assert.assertEquals(&quot;Actual&quot;,&quot;expected&quot;,&quot; Actual result is not same as expected&quot;);\r\n\r\n","title":"How to continue the test Execution after failing by assertion","body":"<pre><code>     try\n     {\n         Assert.assertEquals(statuscode, 200);\n     }\n     catch(AssertionError e)\n     {\n         org.testng.Assert.fail(&quot;Actual value is not equal to Expected value for&quot;);\n     }\n</code></pre>\n<p>The way you handled by using the try and catch block possibly caused the issue of the test being skipped instead of failed.</p>\n<p>It's not good practice to use try catch on assertion. But if you really need this then you can use it like this</p>\n<pre><code>catch(AssertionError e)\n{\n    throw new AssertionError(&quot;Actual value is not equal to Expected value for&quot;, e);\n}\n</code></pre>\n<p><strong>If you are using TestNg then you can use assertion in this way. So you do not need to use any try catch to print the message</strong></p>\n<pre><code>  Assert.assertEquals(&quot;Actual&quot;,&quot;expected&quot;,&quot; Actual result is not same as expected&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677581965,"creation_date":1677581965,"answer_id":75591097,"question_id":75589474,"body_markdown":"What you need is actually `soft asserts`. TestNG supports such type of asserts so here is an example:\r\n\r\n```java\r\n@Test\r\npublic void softAssertDemo{\r\n  SoftAssert assertions = new SoftAssert(); // Here you&#39;ll be collecting your failures\r\n  assertions.assertTrue(false, &quot;Failure 1&quot;);  // Do your regular asserts in this way\r\n  assertions.assertTrue(true, &quot;Pass&quot;);\r\n  assertions.assertTrue(false, &quot;Failure 2&quot;);\r\n  assertions.assertAll(); // in the end call this to fail your test if there were the faliures\r\n}\r\n```","title":"How to continue the test Execution after failing by assertion","body":"<p>What you need is actually <code>soft asserts</code>. TestNG supports such type of asserts so here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void softAssertDemo{\n  SoftAssert assertions = new SoftAssert(); // Here you'll be collecting your failures\n  assertions.assertTrue(false, &quot;Failure 1&quot;);  // Do your regular asserts in this way\n  assertions.assertTrue(true, &quot;Pass&quot;);\n  assertions.assertTrue(false, &quot;Failure 2&quot;);\n  assertions.assertAll(); // in the end call this to fail your test if there were the faliures\n}\n</code></pre>\n"}],"owner":{"account_id":26855749,"reputation":9,"user_id":20440088,"display_name":"Random Boy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1252,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1677581965,"creation_date":1677572563,"question_id":75589474,"body_markdown":"```java\r\nresponse = res.when().post(a.getGetBankAPI()).then().extract()\r\n    .response();\r\n\r\n//Thread.sleep(1000);\r\nint statuscode = response.getStatusCode();\r\nSystem.out.println(statuscode);\r\n\r\ntry {\r\n    Assert.assertEquals(statuscode, 200);\r\n} catch (AssertionError e) {\r\n    org.testng.Assert.fail(&quot;Actual value is not equal to Expected value for&quot;);\r\n}\r\n\r\nSystem.out.println(getJsonPath(response, &quot;error.message[0].msg&quot;));\r\nassertEqual(getJsonPath(response, &quot;error.message[0].msg&quot;), &quot;branch should be 3 to 50 character long&quot;, &quot;Error for passing Empty Branch&quot;);\r\n```\r\n\r\n\r\n\r\nHere I the test case is failing after the step print ln status code, but it was not mentioning as failed but it was simply skipping and total test execution is aborted here, if u usr printstacktrace(), it was not skipping but it was also not noted as failure ","title":"How to continue the test Execution after failing by assertion","body":"<pre class=\"lang-java prettyprint-override\"><code>response = res.when().post(a.getGetBankAPI()).then().extract()\n    .response();\n\n//Thread.sleep(1000);\nint statuscode = response.getStatusCode();\nSystem.out.println(statuscode);\n\ntry {\n    Assert.assertEquals(statuscode, 200);\n} catch (AssertionError e) {\n    org.testng.Assert.fail(&quot;Actual value is not equal to Expected value for&quot;);\n}\n\nSystem.out.println(getJsonPath(response, &quot;error.message[0].msg&quot;));\nassertEqual(getJsonPath(response, &quot;error.message[0].msg&quot;), &quot;branch should be 3 to 50 character long&quot;, &quot;Error for passing Empty Branch&quot;);\n</code></pre>\n<p>Here I the test case is failing after the step print ln status code, but it was not mentioning as failed but it was simply skipping and total test execution is aborted here, if u usr printstacktrace(), it was not skipping but it was also not noted as failure</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":2,"creation_date":1620574311,"post_id":67459232,"comment_id":119235554,"body_markdown":"What is your persistence.xml?","body":"What is your persistence.xml?"}],"answers":[{"tags":[],"owner":{"account_id":16576278,"reputation":61,"user_id":11977986,"display_name":"RainMan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620575560,"creation_date":1620575560,"answer_id":67459649,"question_id":67459232,"body_markdown":"Okay the problem was a missmatch between the ansattPersistenceUnit in createEntityManagerFactory and in persistence.xml\r\n\r\nIt needed to be \r\n\r\n    &lt;persistence-unit name=&quot;ansattPersistenceUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n\r\nin the xml file","title":"Persistence.createEntityManagerFactory error","body":"<p>Okay the problem was a missmatch between the ansattPersistenceUnit in createEntityManagerFactory and in persistence.xml</p>\n<p>It needed to be</p>\n<pre><code>&lt;persistence-unit name=&quot;ansattPersistenceUnit&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n</code></pre>\n<p>in the xml file</p>\n"},{"tags":[],"owner":{"account_id":27169,"reputation":4357,"user_id":71410,"accept_rate":78,"display_name":"Andrea Girardi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677581913,"creation_date":1677581913,"answer_id":75591089,"question_id":67459232,"body_markdown":"I get a similar error using Tomcat + JNDI and the JNDI name in web.xml, server.xml, context.xml and persistence.xml must all match.","title":"Persistence.createEntityManagerFactory error","body":"<p>I get a similar error using Tomcat + JNDI and the JNDI name in web.xml, server.xml, context.xml and persistence.xml must all match.</p>\n"}],"owner":{"account_id":16576278,"reputation":61,"user_id":11977986,"display_name":"RainMan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677581913,"creation_date":1620573034,"question_id":67459232,"body_markdown":"I&#39;m trying to follow my teacher from a video and this is my code so far:\r\n\r\n    public static void main(String[] args) {\r\n\t\t\r\n\t\tString jpql = &quot;SELECT p FROM ansatt p&quot;;\r\n\t\t\r\n\t\tEntityManagerFactory emf = Persistence\r\n\t\t\t\t.createEntityManagerFactory(&quot;ansattPersistenceUnit&quot;);\r\n\t\t\r\n\t\tEntityManager em = emf.createEntityManager();\r\n\t\t\r\n\t\tSystem.out.println(&quot;Kobler til database...&quot;);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tTypedQuery&lt;Ansatt&gt; query = em.createQuery(jpql, Ansatt.class);\r\n\t\t\tList&lt;Ansatt&gt; ansatte = query.getResultList();\r\n\t\t\t\r\n\t\t\tfor(Ansatt p : ansatte) {\r\n\t\t\t\tSystem.out.println(&quot;ID: &quot; + p.getAnsNr());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} finally {\r\n\t\t\tem.close();\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(&quot;Ferdig!&quot;);\r\n\t\r\n\t}\r\n\r\nAnd the error I&#39;m getting is:\r\n\r\n    Exception in thread &quot;main&quot; javax.persistence.PersistenceException: No Persistence provider for EntityManager named ansattPersistenceUnit\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:85)\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\r\n\tat StartHere.main(StartHere.java:15)\r\n\r\n\r\nIs there something I&#39;m missing?","title":"Persistence.createEntityManagerFactory error","body":"<p>I'm trying to follow my teacher from a video and this is my code so far:</p>\n<pre><code>public static void main(String[] args) {\n    \n    String jpql = &quot;SELECT p FROM ansatt p&quot;;\n    \n    EntityManagerFactory emf = Persistence\n            .createEntityManagerFactory(&quot;ansattPersistenceUnit&quot;);\n    \n    EntityManager em = emf.createEntityManager();\n    \n    System.out.println(&quot;Kobler til database...&quot;);\n    \n    try {\n        TypedQuery&lt;Ansatt&gt; query = em.createQuery(jpql, Ansatt.class);\n        List&lt;Ansatt&gt; ansatte = query.getResultList();\n        \n        for(Ansatt p : ansatte) {\n            System.out.println(&quot;ID: &quot; + p.getAnsNr());\n        }\n        \n    } finally {\n        em.close();\n    }\n    \n    System.out.println(&quot;Ferdig!&quot;);\n\n}\n</code></pre>\n<p>And the error I'm getting is:</p>\n<pre><code>Exception in thread &quot;main&quot; javax.persistence.PersistenceException: No Persistence provider for EntityManager named ansattPersistenceUnit\nat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:85)\nat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\nat StartHere.main(StartHere.java:15)\n</code></pre>\n<p>Is there something I'm missing?</p>\n"},{"tags":["java","windows","maven","intellij-idea"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1492606233,"post_id":43496192,"comment_id":74046725,"body_markdown":"First you need to install a JDK.  Have you done that?","body":"First you need to install a JDK.  Have you done that?"},{"owner":{"display_name":"user180100"},"score":0,"creation_date":1492606234,"post_id":43496192,"comment_id":74046727,"body_markdown":"https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/, see also http://stackoverflow.com/questions/2619584/how-to-set-java-home-on-windows-7","body":"<a href=\"https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_&zwnj;&#8203;t</a>, see also <a href=\"http://stackoverflow.com/questions/2619584/how-to-set-java-home-on-windows-7\" title=\"how to set java home on windows 7\">stackoverflow.com/questions/2619584/&hellip;</a>"},{"owner":{"account_id":319988,"reputation":10970,"user_id":638028,"accept_rate":91,"display_name":"Klitos Kyriacou"},"score":0,"creation_date":1492606310,"post_id":43496192,"comment_id":74046782,"body_markdown":"You rarely have to define JAVA_HOME at all.","body":"You rarely have to define JAVA_HOME at all."},{"owner":{"account_id":9482783,"reputation":43049,"user_id":7050130,"display_name":"Mark Adelsberger"},"score":5,"creation_date":1492606495,"post_id":43496192,"comment_id":74046910,"body_markdown":"*&quot;I know there are already similar question but it did not work.&quot;* == &quot;Please downvote me&quot;.  (But don&#39;t bother shooting the messenger; I&#39;m not voting on this question.)  If you tried something and it didn&#39;t work, you need to specify exactly what you tried, exactly what behavior you expected, and exactly what behavior you got instead.","body":"<i>&quot;I know there are already similar question but it did not work.&quot;</i> == &quot;Please downvote me&quot;.  (But don&#39;t bother shooting the messenger; I&#39;m not voting on this question.)  If you tried something and it didn&#39;t work, you need to specify exactly what you tried, exactly what behavior you expected, and exactly what behavior you got instead."},{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":2,"creation_date":1492607141,"post_id":43496192,"comment_id":74047372,"body_markdown":"@KlitosKyriacou - Maven requires the JAVA_HOME environment variable to be set","body":"@KlitosKyriacou - Maven requires the JAVA_HOME environment variable to be set"},{"owner":{"account_id":2815794,"reputation":645,"user_id":2420909,"accept_rate":80,"display_name":"SGuru"},"score":0,"creation_date":1644794950,"post_id":43496192,"comment_id":125694361,"body_markdown":"I had similar issues on container and the solution was to find all the locations of java and try other locations for Java_HOME","body":"I had similar issues on container and the solution was to find all the locations of java and try other locations for Java_HOME"}],"answers":[{"tags":[],"owner":{"account_id":7207915,"reputation":1518,"user_id":5502970,"accept_rate":43,"display_name":"sovas"},"down_vote_count":0,"up_vote_count":93,"is_accepted":true,"score":93,"last_activity_date":1531222957,"creation_date":1492606221,"answer_id":43496275,"question_id":43496192,"body_markdown":"Control Panel -&gt; System and Security -&gt; System -&gt; Advanced system settings -&gt; Advanced -&gt; Environment Variables -&gt; New System Variable\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/73Adl.png","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>Control Panel -> System and Security -> System -> Advanced system settings -> Advanced -> Environment Variables -> New System Variable</p>\n\n<p><a href=\"https://i.stack.imgur.com/73Adl.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/73Adl.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":4797533,"reputation":569,"user_id":6501546,"display_name":"Dan Mergens"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1495595011,"creation_date":1495593160,"answer_id":44147983,"question_id":43496192,"body_markdown":"I am going through the same process on Mac OSX. I installed the latest JDK, then installed Maven. Someone suggested I set the JAVA_HOME variable so I pointed it to the JDK installation folder. When running Maven `mvn compile exec:java` I received the same error `NB: JAVA_HOME should point to a JDK not a JRE`. \r\n\r\nAll I did was unset the JAVA_HOME variable and it worked. \r\n","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>I am going through the same process on Mac OSX. I installed the latest JDK, then installed Maven. Someone suggested I set the JAVA_HOME variable so I pointed it to the JDK installation folder. When running Maven <code>mvn compile exec:java</code> I received the same error <code>NB: JAVA_HOME should point to a JDK not a JRE</code>. </p>\n\n<p>All I did was unset the JAVA_HOME variable and it worked. </p>\n"},{"tags":[],"owner":{"account_id":10822879,"reputation":191,"user_id":7959777,"display_name":"Begineer"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1504818056,"creation_date":1504818056,"answer_id":46105022,"question_id":43496192,"body_markdown":"do it thru cmd - \r\n&gt; echo %JAVA_HOME%\r\n&gt; set set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0\r\n&gt; echo %JAVA_HOME%","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>do it thru cmd - </p>\n\n<blockquote>\n  <p>echo %JAVA_HOME%\n  set set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0\n  echo %JAVA_HOME%</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11447229,"reputation":11,"user_id":8390703,"display_name":"Ganesh Wakde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1507454755,"creation_date":1507454755,"answer_id":46629534,"question_id":43496192,"body_markdown":"if  You have \r\nThe JAVA_HOME environment variable is not defined correctly\r\nThis environment variable is needed to run this program\r\nNB: JAVA_HOME should point to a JDK not a JRE \r\nError\r\n so do one thing ...type\r\nC:\\&gt;dir/x\r\nand you will see the PROGRA~1 or May ~2 \r\nand After int Environment Variable Chang The JAVA_HOME Dir Like This\r\nJAVA_HOME:- C:\\PROGRA~1\\Java\\jdk1.8.0_144\\\r\nalso Set In Path :-%JAVA_HOME%\\bin;\r\nAnd it Works","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>if  You have \nThe JAVA_HOME environment variable is not defined correctly\nThis environment variable is needed to run this program\nNB: JAVA_HOME should point to a JDK not a JRE \nError\n so do one thing ...type\nC:>dir/x\nand you will see the PROGRA~1 or May ~2 \nand After int Environment Variable Chang The JAVA_HOME Dir Like This\nJAVA_HOME:- C:\\PROGRA~1\\Java\\jdk1.8.0_144\\\nalso Set In Path :-%JAVA_HOME%\\bin;\nAnd it Works</p>\n"},{"tags":[],"owner":{"account_id":8263280,"reputation":1,"user_id":9452546,"display_name":"Olly Dally"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520596139,"creation_date":1520356422,"answer_id":49136452,"question_id":43496192,"body_markdown":"In IntelliJ IDEA go to `File&gt;Project Structure&gt;SDK&gt;JDK home path`.\r\nCopy it and then go to \r\n`My Computer&gt;Advanced Settings&gt;Environment Variables`\r\nChange the JAVA_HOME path to what you have copied.\r\nThen open new cmd, and try `mvn -v`\r\n\r\nIt worked for me !!!  ","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>In IntelliJ IDEA go to <code>File&gt;Project Structure&gt;SDK&gt;JDK home path</code>.\nCopy it and then go to \n<code>My Computer&gt;Advanced Settings&gt;Environment Variables</code>\nChange the JAVA_HOME path to what you have copied.\nThen open new cmd, and try <code>mvn -v</code></p>\n\n<p>It worked for me !!!  </p>\n"},{"tags":[],"owner":{"account_id":11430533,"reputation":111,"user_id":8379362,"display_name":"Rui Sun"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1524060983,"creation_date":1524060983,"answer_id":49902062,"question_id":43496192,"body_markdown":"I met the same problem. (Window 10 environment)\r\nI solved it by deleting the JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk1.8.0_161\\bin&quot; in the User Variables instead of adding to the System Variables directly.\r\n\r\nThen I test that editing JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk1.8.0_161\\&quot; worked too. \r\nWhen I run &quot;mvn -version&quot; in command prompt window, it shows &quot;Java home: C:\\Program Files\\Java\\jdk1.8.0_161\\jre&quot;. \r\n\r\nIn conclusion, I guess the JAVA_HOME shouldn&#39;t include bin directory.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>I met the same problem. (Window 10 environment)\nI solved it by deleting the JAVA_HOME=\"C:\\Program Files\\Java\\jdk1.8.0_161\\bin\" in the User Variables instead of adding to the System Variables directly.</p>\n\n<p>Then I test that editing JAVA_HOME=\"C:\\Program Files\\Java\\jdk1.8.0_161\\\" worked too. \nWhen I run \"mvn -version\" in command prompt window, it shows \"Java home: C:\\Program Files\\Java\\jdk1.8.0_161\\jre\". </p>\n\n<p>In conclusion, I guess the JAVA_HOME shouldn't include bin directory.</p>\n"},{"tags":[],"owner":{"account_id":11840588,"reputation":455,"user_id":8664571,"display_name":"Gautam Shahi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524153388,"creation_date":1524149143,"answer_id":49923957,"question_id":43496192,"body_markdown":"Add `JAVA_HOME = C:\\Program Files\\Java\\jdk(version)` in User variable, it works for me. For me, it doesn&#39;t work with bin and even if I create `JAVA_HOME` in system variable","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>Add <code>JAVA_HOME = C:\\Program Files\\Java\\jdk(version)</code> in User variable, it works for me. For me, it doesn't work with bin and even if I create <code>JAVA_HOME</code> in system variable</p>\n"},{"tags":[],"owner":{"account_id":12561819,"reputation":1,"user_id":9139297,"display_name":"Nimesh Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525686737,"creation_date":1525684503,"answer_id":50210737,"question_id":43496192,"body_markdown":"just remove the semicolon at the end of `JAVA_HOME` variable&#39;s value.\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    set JAVA_HOME as C:\\Program Files\\Java\\jdk1.8.0_171\r\n\r\nIt worked for me.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>just remove the semicolon at the end of <code>JAVA_HOME</code> variable's value.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>set JAVA_HOME as C:\\Program Files\\Java\\jdk1.8.0_171\n</code></pre>\n\n<p>It worked for me.</p>\n"},{"tags":[],"owner":{"account_id":4502397,"reputation":770,"user_id":3660648,"display_name":"Tejashree"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1537963290,"creation_date":1537961399,"answer_id":52516705,"question_id":43496192,"body_markdown":"I have spent 3 hours for solving the error The `JAVA_HOME` environment variable is not defined correctly. This environment variable is needed to run this program NB: `JAVA_HOME` should point to a JDK not a JRE\r\n\r\nFinally I got the solution. Please set the `JAVA_HOME` value by `Browse Directory` button/option. Try to find the jdk path. Ex: `C:\\Program Files\\Java\\jdk1.8.0_181`\r\n\r\nIt will remove the semicolon issue. :D \r\n[![Browse Directory option][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2odfa.png","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>I have spent 3 hours for solving the error The <code>JAVA_HOME</code> environment variable is not defined correctly. This environment variable is needed to run this program NB: <code>JAVA_HOME</code> should point to a JDK not a JRE</p>\n\n<p>Finally I got the solution. Please set the <code>JAVA_HOME</code> value by <code>Browse Directory</code> button/option. Try to find the jdk path. Ex: <code>C:\\Program Files\\Java\\jdk1.8.0_181</code></p>\n\n<p>It will remove the semicolon issue. :D \n<a href=\"https://i.stack.imgur.com/2odfa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2odfa.png\" alt=\"Browse Directory option\"></a></p>\n"},{"tags":[],"owner":{"account_id":14496589,"reputation":11,"user_id":10470951,"display_name":"AlTur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538970880,"creation_date":1538969444,"answer_id":52695038,"question_id":43496192,"body_markdown":"Make sure that you do NOT have a JRE path, if you have delete it. \r\n\r\n1. Add `JAVA_HOME` in the System variable. Variable value: `C:\\Program Files\\Java\\jdk-10.0.2` (location of JDK without bin)\r\n2. Add `M2` in the System variable. Variable value: `C:\\dev\\maven\\apache-maven-3.5.4\\bin` (location of maven with bin)\r\n3. Add `M2_HOME` in the System variable. Variable value: `C:\\dev\\maven\\apache-maven-3.5.4` (location of maven without bin)\r\n4. Add `%JAVA_HOME%` and `%M2%` in Path System Variable or `C:\\Program Files\\Java\\jdk-10.0.2` and `C:\\dev\\maven\\apache-maven-3.5.4\\bin` --&gt; For windows 10, just add the location. For other version,  at the end of the Variable Value field add semicolon then the location Ex: `;%JAVA_HOME%;%M2%`\r\n\r\nI did not check if the addition or removal of bin changes the result but nonetheless this works for me.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>Make sure that you do NOT have a JRE path, if you have delete it. </p>\n\n<ol>\n<li>Add <code>JAVA_HOME</code> in the System variable. Variable value: <code>C:\\Program Files\\Java\\jdk-10.0.2</code> (location of JDK without bin)</li>\n<li>Add <code>M2</code> in the System variable. Variable value: <code>C:\\dev\\maven\\apache-maven-3.5.4\\bin</code> (location of maven with bin)</li>\n<li>Add <code>M2_HOME</code> in the System variable. Variable value: <code>C:\\dev\\maven\\apache-maven-3.5.4</code> (location of maven without bin)</li>\n<li>Add <code>%JAVA_HOME%</code> and <code>%M2%</code> in Path System Variable or <code>C:\\Program Files\\Java\\jdk-10.0.2</code> and <code>C:\\dev\\maven\\apache-maven-3.5.4\\bin</code> --> For windows 10, just add the location. For other version,  at the end of the Variable Value field add semicolon then the location Ex: <code>;%JAVA_HOME%;%M2%</code></li>\n</ol>\n\n<p>I did not check if the addition or removal of bin changes the result but nonetheless this works for me.</p>\n"},{"tags":[],"owner":{"account_id":7350428,"reputation":1298,"user_id":5960850,"display_name":"Matthew Woo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541089021,"creation_date":1541089021,"answer_id":53105208,"question_id":43496192,"body_markdown":"In addition to [sovas&#39; response](https://stackoverflow.com/a/43496275/5960850) on _how_ to add the `JAVA_HOME` variable, if it was working before and stopped working, ensure that the path _still exists_. I updated Java recently which deleted the old version, invalidating my `JAVA_HOME` environment variable.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>In addition to <a href=\"https://stackoverflow.com/a/43496275/5960850\">sovas' response</a> on <em>how</em> to add the <code>JAVA_HOME</code> variable, if it was working before and stopped working, ensure that the path <em>still exists</em>. I updated Java recently which deleted the old version, invalidating my <code>JAVA_HOME</code> environment variable.</p>\n"},{"tags":[],"owner":{"account_id":11044190,"reputation":1140,"user_id":8111013,"display_name":"Salma Elshahawy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543092860,"creation_date":1543092860,"answer_id":53462274,"question_id":43496192,"body_markdown":"I had this issue but for Mac Os, I set the JAVA_HOME variable in the .bash_profile to be `export JAVA_HOME=$(/usr/libexec/java_home)` then save. After that ran `source ~/.bash_profile` finally `mvn -version` and it fixed the issue. Hope that helps\r\n\r\n","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>I had this issue but for Mac Os, I set the JAVA_HOME variable in the .bash_profile to be <code>export JAVA_HOME=$(/usr/libexec/java_home)</code> then save. After that ran <code>source ~/.bash_profile</code> finally <code>mvn -version</code> and it fixed the issue. Hope that helps</p>\n"},{"tags":[],"owner":{"account_id":15124841,"reputation":11,"user_id":10914526,"display_name":"manoj kalisetty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586051242,"creation_date":1548446098,"answer_id":54371991,"question_id":43496192,"body_markdown":"Under System Variables add below\r\n\r\n    JAVA_HOME = C:\\Program Files\\Java\\jdk1.8.0_201\r\n\r\n    JDK_HOME = %JAVA_HOME%\\bin\r\n\r\n    M2_HOME = C:\\apache-maven-3.6.0\r\n\r\n    MAVEN_BIN = %M2_HOME%\\bin\r\n\r\n    MAVEN_HOME = %M2_HOME%\r\n\r\nUnder path Add these\r\n\r\n    %M2_HOME%\r\n\r\n    %JDK_HOME%","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>Under System Variables add below</p>\n\n<pre><code>JAVA_HOME = C:\\Program Files\\Java\\jdk1.8.0_201\n\nJDK_HOME = %JAVA_HOME%\\bin\n\nM2_HOME = C:\\apache-maven-3.6.0\n\nMAVEN_BIN = %M2_HOME%\\bin\n\nMAVEN_HOME = %M2_HOME%\n</code></pre>\n\n<p>Under path Add these</p>\n\n<pre><code>%M2_HOME%\n\n%JDK_HOME%\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14676065,"reputation":71,"user_id":10599085,"display_name":"Zoe Zoe"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1548847281,"creation_date":1548847281,"answer_id":54439424,"question_id":43496192,"body_markdown":"I added JAVA_HOME path in user variable and omit the &quot;/bin&quot;.\r\n I tried every method given here but only this worked for me.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>I added JAVA_HOME path in user variable and omit the \"/bin\".\n I tried every method given here but only this worked for me.</p>\n"},{"tags":[],"owner":{"account_id":7639314,"reputation":408,"user_id":5791928,"display_name":"RahulDeep Attri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561356587,"creation_date":1561356587,"answer_id":56730692,"question_id":43496192,"body_markdown":"[This worked for me][1] for Windows 10, Java 8_144.\r\n\r\n\r\n  [1]: https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html\r\n\r\nIf the path contains spaces, use the shortened path name. For example, C:\\Progra~1\\Java\\jdk1.8.0_65","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p><a href=\"https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html\" rel=\"nofollow noreferrer\">This worked for me</a> for Windows 10, Java 8_144.</p>\n\n<p>If the path contains spaces, use the shortened path name. For example, C:\\Progra~1\\Java\\jdk1.8.0_65</p>\n"},{"tags":[],"owner":{"account_id":4091641,"reputation":1488,"user_id":3359469,"accept_rate":50,"display_name":"Falco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586106086,"creation_date":1568459373,"answer_id":57934904,"question_id":43496192,"body_markdown":"Windows 10 Home for me:\r\n\r\nI&#39;m studying maven through a udemy course. First time environment variables were ok. I had on JAVA_HOME on SYSTEM VARIABLE like this:\r\n\r\n    D:\\Install\\Java\\jdk-12.0.1;D:\\Install\\apache-maven-3.5.4-bin\\apache-maven-3.5.4\r\n\r\n\r\n----------\r\n\r\n\r\nAfter some days, don&#39;t know what&#39;s happened, I began to receive:\r\n\r\n    C:\\Users\\Franco&gt;mvn -version\r\n\r\n    The JAVA_HOME environment variable is not defined correctly\r\n\r\n    This environment variable is needed to run this program\r\n\r\n    NB: JAVA_HOME should point to a JDK not a JRE\r\n\r\n\r\n----------\r\n\r\n\r\nAfter trying all above, I tried to delete jdk the entry on SYSTEM VARIABLES, and putting it on USER VARIABLES, so now I have:\r\n\r\n    JAVA_HOME on USER VARIABLES: D:\\Install\\Java\\jdk-12.0.1\r\n\r\n    JAVA_HOME on SYSTEM VARIABLES: D:\\Install\\apache-maven-3.5.4-bin\\apache-maven-3.5.4\r\n\r\nnow restarting CMD I have:\r\n\r\n    C:\\Users\\Franco&gt;mvn -version\r\n\r\n    Apache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17T20:33:14+02:00)\r\n\r\n    Maven home: D:\\Install\\apache-maven-3.5.4-bin\\apache-maven-3.5.4\\bin\\..\r\n\r\n    Java version: 12.0.1, vendor: Oracle Corporation, runtime: D:\\Install\\Java\\jdk-12.0.1\r\n\r\n    Default locale: en_US, platform encoding: Cp1252\r\n\r\n    OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n\r\n\r\n","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>Windows 10 Home for me:</p>\n\n<p>I'm studying maven through a udemy course. First time environment variables were ok. I had on JAVA_HOME on SYSTEM VARIABLE like this:</p>\n\n<pre><code>D:\\Install\\Java\\jdk-12.0.1;D:\\Install\\apache-maven-3.5.4-bin\\apache-maven-3.5.4\n</code></pre>\n\n<hr>\n\n<p>After some days, don't know what's happened, I began to receive:</p>\n\n<pre><code>C:\\Users\\Franco&gt;mvn -version\n\nThe JAVA_HOME environment variable is not defined correctly\n\nThis environment variable is needed to run this program\n\nNB: JAVA_HOME should point to a JDK not a JRE\n</code></pre>\n\n<hr>\n\n<p>After trying all above, I tried to delete jdk the entry on SYSTEM VARIABLES, and putting it on USER VARIABLES, so now I have:</p>\n\n<pre><code>JAVA_HOME on USER VARIABLES: D:\\Install\\Java\\jdk-12.0.1\n\nJAVA_HOME on SYSTEM VARIABLES: D:\\Install\\apache-maven-3.5.4-bin\\apache-maven-3.5.4\n</code></pre>\n\n<p>now restarting CMD I have:</p>\n\n<pre><code>C:\\Users\\Franco&gt;mvn -version\n\nApache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17T20:33:14+02:00)\n\nMaven home: D:\\Install\\apache-maven-3.5.4-bin\\apache-maven-3.5.4\\bin\\..\n\nJava version: 12.0.1, vendor: Oracle Corporation, runtime: D:\\Install\\Java\\jdk-12.0.1\n\nDefault locale: en_US, platform encoding: Cp1252\n\nOS name: \"windows 10\", version: \"10.0\", arch: \"amd64\", family: \"windows\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15272699,"reputation":557,"user_id":11019416,"display_name":"jon.bray.eth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570470413,"creation_date":1570470413,"answer_id":58274679,"question_id":43496192,"body_markdown":"First, ensure that the Maven bin is in your Environmental Variable PATH entry. \r\n\r\nIf it is, make sure your entries aren&#39;t somehow out of order, and that JAVA_HOME is before Path in the list, or any entry that references %JAVA_HOME%. I was getting the same error when I was trying to check my maven version.\r\n\r\nI have a few extra path variables that reference %JAVA_HOME%, or a different version of a JDK and Maven was mixed in between. I moved my Maven path entry below my %JAVA_HOME% one and now everything is working when I use Maven from cmd.\r\n\r\nBut it is Windows, so perhaps my just opening and closing the Environment Variables setting somehow made everything better.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>First, ensure that the Maven bin is in your Environmental Variable PATH entry. </p>\n\n<p>If it is, make sure your entries aren't somehow out of order, and that JAVA_HOME is before Path in the list, or any entry that references %JAVA_HOME%. I was getting the same error when I was trying to check my maven version.</p>\n\n<p>I have a few extra path variables that reference %JAVA_HOME%, or a different version of a JDK and Maven was mixed in between. I moved my Maven path entry below my %JAVA_HOME% one and now everything is working when I use Maven from cmd.</p>\n\n<p>But it is Windows, so perhaps my just opening and closing the Environment Variables setting somehow made everything better.</p>\n"},{"tags":[],"owner":{"account_id":13303030,"reputation":41,"user_id":9603888,"display_name":"VIKAS KESHARWANI"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1570613821,"creation_date":1570612218,"answer_id":58300708,"question_id":43496192,"body_markdown":"In Mac OS the hierarchy library &gt; java &gt; JavaVirtualMachines - (inside this folder there are different versions of jdk) select your desired version and inside jdk-version folder there is a contents folder inside contents you&#39;ll find &quot;Home&quot; folder\r\nwhile declaring $JAVA_HOME you haVE TO GIVE THAT HOME PATH for example-\r\n\r\n\r\n(normal shell commands)\r\nopen terminal type vi .bash_profile\r\n(to open file name bash_profile)\r\npress &quot;i&quot; to enable insert mode\r\ngive java home path as-\r\n\r\n`export JAVA_HOME=/Library/java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home `\r\n\r\nAfter editing press esc to exit editing mode\r\nthen :wq to quit and save \r\n\r\nThis will remove JAVA_HOME should point to a JDK not a JRE error \r\nand also saves you from future errors \r\n","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>In Mac OS the hierarchy library > java > JavaVirtualMachines - (inside this folder there are different versions of jdk) select your desired version and inside jdk-version folder there is a contents folder inside contents you'll find \"Home\" folder\nwhile declaring $JAVA_HOME you haVE TO GIVE THAT HOME PATH for example-</p>\n\n<p>(normal shell commands)\nopen terminal type vi .bash_profile\n(to open file name bash_profile)\npress \"i\" to enable insert mode\ngive java home path as-</p>\n\n<p><code>export JAVA_HOME=/Library/java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home</code></p>\n\n<p>After editing press esc to exit editing mode\nthen :wq to quit and save </p>\n\n<p>This will remove JAVA_HOME should point to a JDK not a JRE error \nand also saves you from future errors </p>\n"},{"tags":[],"owner":{"account_id":8104679,"reputation":1650,"user_id":6106641,"accept_rate":80,"display_name":"Archmede"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1618424831,"creation_date":1586046001,"answer_id":61036508,"question_id":43496192,"body_markdown":"My `JAVA_HOME` was set correctly but I solved this issue by running `Command Prompt` `as Administrator`","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>My <code>JAVA_HOME</code> was set correctly but I solved this issue by running <code>Command Prompt</code> <code>as Administrator</code></p>\n"},{"tags":[],"owner":{"account_id":7743548,"reputation":21,"user_id":5862297,"display_name":"Melika"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1587436490,"creation_date":1587400091,"answer_id":61327365,"question_id":43496192,"body_markdown":"Be sure to use the correct path! \r\n\r\nI mistakenly had written `C:\\Program Files\\Java\\`. Changing it to `C:\\Program Files\\Java\\jdk\\11.0.6\\` fixed the issue. \r\n\r\nIn `cmd` I then checked for the version of `maven` with `mvn -version`.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>Be sure to use the correct path! </p>\n\n<p>I mistakenly had written <code>C:\\Program Files\\Java\\</code>. Changing it to <code>C:\\Program Files\\Java\\jdk\\11.0.6\\</code> fixed the issue. </p>\n\n<p>In <code>cmd</code> I then checked for the version of <code>maven</code> with <code>mvn -version</code>.</p>\n"},{"tags":[],"owner":{"account_id":6628983,"reputation":129,"user_id":5118206,"display_name":"niti"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1599032014,"creation_date":1599032014,"answer_id":63700749,"question_id":43496192,"body_markdown":"For mac OS, this worked for me... none of the above solutions\r\n\r\n```\r\n$ vim .bash_profile\r\n\r\nexport JAVA_HOME=$(/usr/libexec/java_home)\r\n\r\n$ source .bash_profile\r\n```","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>For mac OS, this worked for me... none of the above solutions</p>\n<pre><code>$ vim .bash_profile\n\nexport JAVA_HOME=$(/usr/libexec/java_home)\n\n$ source .bash_profile\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6707907,"reputation":311,"user_id":5172180,"display_name":"黄锐铭"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1608546520,"creation_date":1608546520,"answer_id":65391109,"question_id":43496192,"body_markdown":"*Just as an addition to other answers*\r\n\r\nFor macOS users, you may have a `~/.mavenrc` file, and that is where mvn command looks for definition of JAVA_HOME first. So check there first and make sure the directory JAVA_HOME points to is correct in that file.","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p><em>Just as an addition to other answers</em></p>\n<p>For macOS users, you may have a <code>~/.mavenrc</code> file, and that is where mvn command looks for definition of JAVA_HOME first. So check there first and make sure the directory JAVA_HOME points to is correct in that file.</p>\n"},{"tags":[],"owner":{"account_id":4941447,"reputation":41,"user_id":3978030,"display_name":"Deeksha Singh Thakur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618806636,"creation_date":1618756440,"answer_id":67149745,"question_id":43496192,"body_markdown":"In my case the error started showing up as Java version got updated. So JAVA_HOME path became invalid.\r\n\r\nPlease check \r\n1. Location referred to in JAVA_HOME exists.\r\n2. If it&#39;s like my case, update the value from the old path to the new path.\r\n\r\n(A better fix would be to set java update such that it auto upgrades the JAVA_HOME reference.)","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>In my case the error started showing up as Java version got updated. So JAVA_HOME path became invalid.</p>\n<p>Please check</p>\n<ol>\n<li>Location referred to in JAVA_HOME exists.</li>\n<li>If it's like my case, update the value from the old path to the new path.</li>\n</ol>\n<p>(A better fix would be to set java update such that it auto upgrades the JAVA_HOME reference.)</p>\n"},{"tags":[],"owner":{"account_id":3577370,"reputation":3514,"user_id":2986279,"accept_rate":50,"display_name":"Gaurav Khurana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644903708,"creation_date":1644903708,"answer_id":71121583,"question_id":43496192,"body_markdown":" Even after trying [this solution from sovas][1] which is accepted if it does not work \r\n\r\n**RESTART intellij / CMD prompt instead of trying on the existing opened** \r\n\r\ni was trying the command from terminal under intellij but still getting same problem.\r\n\r\nDo reopen cmd / INTELLIJ and the variable will get reloaded. It fixed the problem for me (ofcourse after correcting the Path to **JDK not jre** and removing the **bin**\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/43496275/2986279","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>Even after trying <a href=\"https://stackoverflow.com/a/43496275/2986279\">this solution from sovas</a> which is accepted if it does not work</p>\n<p><strong>RESTART intellij / CMD prompt instead of trying on the existing opened</strong></p>\n<p>i was trying the command from terminal under intellij but still getting same problem.</p>\n<p>Do reopen cmd / INTELLIJ and the variable will get reloaded. It fixed the problem for me (ofcourse after correcting the Path to <strong>JDK not jre</strong> and removing the <strong>bin</strong></p>\n"},{"tags":[],"owner":{"account_id":10206114,"reputation":1761,"user_id":7534790,"display_name":"Kumar Pankaj Dubey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668189105,"creation_date":1668189105,"answer_id":74406387,"question_id":43496192,"body_markdown":"you should only add this path to Manage Jenkins -&gt; Global Tool Configuration -&gt; JDK\r\n\r\nfor java 11\r\n&gt; /usr/lib/jvm/java-11-openjdk-amd64\r\n\r\nfor java 8\r\n&gt; /usr/lib/jvm/java-8-openjdk-amd64\r\n\r\nAnd then use same in your jenkins jobs accordingly","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>you should only add this path to Manage Jenkins -&gt; Global Tool Configuration -&gt; JDK</p>\n<p>for java 11</p>\n<blockquote>\n<p>/usr/lib/jvm/java-11-openjdk-amd64</p>\n</blockquote>\n<p>for java 8</p>\n<blockquote>\n<p>/usr/lib/jvm/java-8-openjdk-amd64</p>\n</blockquote>\n<p>And then use same in your jenkins jobs accordingly</p>\n"},{"tags":[],"owner":{"account_id":3693193,"reputation":1057,"user_id":3075297,"display_name":"technik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677581761,"creation_date":1677581761,"answer_id":75591053,"question_id":43496192,"body_markdown":"In case you have the same error on Win10 and OpenJDK. The cause of my issue is that the OpenJDK installation set the JAVA_HOME variable for me, but set it pointing to a wrong path:\r\n\r\n[![cause during the openjdk installation][1]][1]\r\n\r\nWhen I manually edited this environment variable, the path was pointing to:\r\n• C:\\Program Files\\Eclipse Foundation\\jdk-16.0.2.7-hotspot (Wrong)\r\n[![Wrong path][2]][2]\r\n\r\nInstead I changed it to:\r\nC:\\Program Files\\Eclipse Adoptium\\jdk-17.0.2.8-hotspot (Correct)\r\n[![Correct path][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s2XWK.png\r\n  [2]: https://i.stack.imgur.com/2kLJk.png\r\n  [3]: https://i.stack.imgur.com/wHcGi.png","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>In case you have the same error on Win10 and OpenJDK. The cause of my issue is that the OpenJDK installation set the JAVA_HOME variable for me, but set it pointing to a wrong path:</p>\n<p><a href=\"https://i.stack.imgur.com/s2XWK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s2XWK.png\" alt=\"cause during the openjdk installation\" /></a></p>\n<p>When I manually edited this environment variable, the path was pointing to:\n• C:\\Program Files\\Eclipse Foundation\\jdk-16.0.2.7-hotspot (Wrong)\n<a href=\"https://i.stack.imgur.com/2kLJk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2kLJk.png\" alt=\"Wrong path\" /></a></p>\n<p>Instead I changed it to:\nC:\\Program Files\\Eclipse Adoptium\\jdk-17.0.2.8-hotspot (Correct)\n<a href=\"https://i.stack.imgur.com/wHcGi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wHcGi.png\" alt=\"Correct path\" /></a></p>\n"}],"owner":{"account_id":9265692,"reputation":2883,"user_id":6881205,"accept_rate":100,"display_name":"Abdurakhmon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255352,"favorite_count":0,"down_vote_count":8,"up_vote_count":117,"accepted_answer_id":43496275,"answer_count":26,"score":109,"last_activity_date":1677581761,"creation_date":1492606054,"question_id":43496192,"body_markdown":"I am  trying to set up maven for my project and I am getting this error \r\n\r\n&quot;JAVA_HOME should point to a JDK not a JRE&quot; \r\n\r\nI know there are already similar question but it did not work. How can I point JAVA_HOME to JDK in windows. I am using IntelliJ IDEA","title":"JAVA_HOME should point to a JDK not a JRE","body":"<p>I am  trying to set up maven for my project and I am getting this error </p>\n\n<p>\"JAVA_HOME should point to a JDK not a JRE\" </p>\n\n<p>I know there are already similar question but it did not work. How can I point JAVA_HOME to JDK in windows. I am using IntelliJ IDEA</p>\n"},{"tags":["java","algorithm","math","charts"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1323876936,"post_id":8506881,"comment_id":10530257,"body_markdown":"Would the min and max values always be ticks or should the lowest/highest tick be the next smaller/higher nice number?","body":"Would the min and max values always be ticks or should the lowest/highest tick be the next smaller/higher nice number?"},{"owner":{"account_id":197404,"reputation":5690,"user_id":441467,"accept_rate":93,"display_name":"Dominik Obermaier"},"score":0,"creation_date":1323877649,"post_id":8506881,"comment_id":10530525,"body_markdown":"@Thomas In my case, the min tick is always 0, the highest tick should be the the next higher nice number","body":"@Thomas In my case, the min tick is always 0, the highest tick should be the the next higher nice number"},{"owner":{"account_id":115666,"reputation":21098,"user_id":303612,"accept_rate":60,"display_name":"Dr. Andrew Burnett-Thompson"},"score":0,"creation_date":1324573909,"post_id":8506881,"comment_id":10681589,"body_markdown":"+1 as helped me solve a similar problem. Although have you ever seen an implemntation for date ticks? It can be tricky. Consider a Major delta of Months with Minor delta of weeks - its not possible to divide Month by Week as month is variable.","body":"+1 as helped me solve a similar problem. Although have you ever seen an implemntation for date ticks? It can be tricky. Consider a Major delta of Months with Minor delta of weeks - its not possible to divide Month by Week as month is variable."},{"owner":{"account_id":5167,"reputation":12899,"user_id":8173,"accept_rate":82,"display_name":"Clinton Pierce"},"score":1,"creation_date":1460662569,"post_id":8506881,"comment_id":60860074,"body_markdown":"Possible duplicate of [Choosing an attractive linear scale for a graph&#39;s Y Axis](http://stackoverflow.com/questions/326679/choosing-an-attractive-linear-scale-for-a-graphs-y-axis)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/326679/choosing-an-attractive-linear-scale-for-a-graphs-y-axis\">Choosing an attractive linear scale for a graph&#39;s Y Axis</a>"}],"answers":[{"tags":[],"owner":{"account_id":325607,"reputation":33143,"user_id":646887,"accept_rate":100,"display_name":"Klas Lindb&#228;ck"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1323877311,"creation_date":1323877311,"answer_id":8507299,"question_id":8506881,"body_markdown":"You should be able to use the Java implementation with minor corrections. \r\n\r\nChange maxticks to 5.\r\n\r\nChange the calculate mehod to this:\r\n\r\n    private void calculate() {\r\n            this.range = niceNum(maxPoint - minPoint, false);\r\n            this.tickSpacing = niceNum(range / (maxTicks - 1), true);\r\n            this.niceMin =\r\n                Math.floor(minPoint / tickSpacing) * tickSpacing;\r\n            this.niceMax = this.niceMin + tickSpacing * (maxticks - 1); // Always display maxticks\r\n        }\r\n\r\nDisclaimer: Note that I haven&#39;t tested this, so you may have to tweak it to make it look good. My suggested solution adds extra space at the top of the chart to always make room for 5 ticks. This may look ugly in some cases.","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>You should be able to use the Java implementation with minor corrections. </p>\n\n<p>Change maxticks to 5.</p>\n\n<p>Change the calculate mehod to this:</p>\n\n<pre><code>private void calculate() {\n        this.range = niceNum(maxPoint - minPoint, false);\n        this.tickSpacing = niceNum(range / (maxTicks - 1), true);\n        this.niceMin =\n            Math.floor(minPoint / tickSpacing) * tickSpacing;\n        this.niceMax = this.niceMin + tickSpacing * (maxticks - 1); // Always display maxticks\n    }\n</code></pre>\n\n<p>Disclaimer: Note that I haven't tested this, so you may have to tweak it to make it look good. My suggested solution adds extra space at the top of the chart to always make room for 5 ticks. This may look ugly in some cases.</p>\n"},{"tags":[],"owner":{"account_id":2704221,"reputation":1051,"user_id":2347594,"display_name":"Incongruous"},"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1436790629,"creation_date":1367597975,"answer_id":16363437,"question_id":8506881,"body_markdown":"I am the author of &quot;[Algorithm for Optimal Scaling on a Chart Axis][1]&quot;. It used to be hosted on trollop.org, but I have recently moved domains/blogging engines. Anyhow, I&#39;ll post the contents here for easier access.\r\n\r\nI&#39;ve been working on an Android charting application for an assignment and ran into a bit of an issue when it came to presenting the chart in a nicely scaled format. I spent a some time trying to create this algorithm on my own and came awfully close, but in the end I found a pseudo-code example in a book called &quot;Graphics Gems, Volume 1&quot; by Andrew S. Glassner. An excellent description of the problem is given in the chapter on &quot;[Nice Numbers for Graph Labels][2]&quot;:\r\n\r\n&gt; When creating a graph by computer, it is desirable to label the x and\r\n&gt; y axes with &quot;nice&quot; numbers: simple decimal numbers. For example, if\r\n&gt; the data range is 105 to 543, we&#39;d probably want to plot the range\r\n&gt; from 100 to 600 and put tick marks every 100 units. Or if the data\r\n&gt; range is 2.04 to 2.16, we&#39;d probably plot a range from 2.00 to 2.20\r\n&gt; with a tick spacing of 0.05. Humans are good at choosing such &quot;nice&quot;\r\n&gt; numbers, but simplistic algorithms are not. The na&#239;ve label-selection\r\n&gt; algorithm takes the data range and divides it into n equal intervals,\r\n&gt; but this usually results in ugly tick labels. We here describe a\r\n&gt; simple method for generating nice graph labels.\r\n&gt; \r\n&gt; The primary observation is that the &quot;nicest&quot; numbers in decimal are 1,\r\n&gt; 2, and 5, and all power-of-ten multiples of these numbers. We will use\r\n&gt; only such numbers for the tick spacing, and place tick marks at\r\n&gt; multiples of the tick spacing...\r\n\r\nI used the pseudo-code example in this book to create the following class in Java:\r\n\r\n    public class NiceScale {\r\n     \r\n      private double minPoint;\r\n      private double maxPoint;\r\n      private double maxTicks = 10;\r\n      private double tickSpacing;\r\n      private double range;\r\n      private double niceMin;\r\n      private double niceMax;\r\n     \r\n      /**\r\n       * Instantiates a new instance of the NiceScale class.\r\n       *\r\n       * @param min the minimum data point on the axis\r\n       * @param max the maximum data point on the axis\r\n       */\r\n      public NiceScale(double min, double max) {\r\n        this.minPoint = min;\r\n        this.maxPoint = max;\r\n        calculate();\r\n      }\r\n     \r\n      /**\r\n       * Calculate and update values for tick spacing and nice\r\n       * minimum and maximum data points on the axis.\r\n       */\r\n      private void calculate() {\r\n        this.range = niceNum(maxPoint - minPoint, false);\r\n        this.tickSpacing = niceNum(range / (maxTicks - 1), true);\r\n        this.niceMin =\r\n          Math.floor(minPoint / tickSpacing) * tickSpacing;\r\n        this.niceMax =\r\n          Math.ceil(maxPoint / tickSpacing) * tickSpacing;\r\n      }\r\n     \r\n      /**\r\n       * Returns a &quot;nice&quot; number approximately equal to range Rounds\r\n       * the number if round = true Takes the ceiling if round = false.\r\n       *\r\n       * @param range the data range\r\n       * @param round whether to round the result\r\n       * @return a &quot;nice&quot; number to be used for the data range\r\n       */\r\n      private double niceNum(double range, boolean round) {\r\n        double exponent; /** exponent of range */\r\n        double fraction; /** fractional part of range */\r\n        double niceFraction; /** nice, rounded fraction */\r\n     \r\n        exponent = Math.floor(Math.log10(range));\r\n        fraction = range / Math.pow(10, exponent);\r\n     \r\n        if (round) {\r\n          if (fraction &lt; 1.5)\r\n            niceFraction = 1;\r\n          else if (fraction &lt; 3)\r\n            niceFraction = 2;\r\n          else if (fraction &lt; 7)\r\n            niceFraction = 5;\r\n          else\r\n            niceFraction = 10;\r\n        } else {\r\n          if (fraction &lt;= 1)\r\n            niceFraction = 1;\r\n          else if (fraction &lt;= 2)\r\n            niceFraction = 2;\r\n          else if (fraction &lt;= 5)\r\n            niceFraction = 5;\r\n          else\r\n            niceFraction = 10;\r\n        }\r\n     \r\n        return niceFraction * Math.pow(10, exponent);\r\n      }\r\n     \r\n      /**\r\n       * Sets the minimum and maximum data points for the axis.\r\n       *\r\n       * @param minPoint the minimum data point on the axis\r\n       * @param maxPoint the maximum data point on the axis\r\n       */\r\n      public void setMinMaxPoints(double minPoint, double maxPoint) {\r\n        this.minPoint = minPoint;\r\n        this.maxPoint = maxPoint;\r\n        calculate();\r\n      }\r\n     \r\n      /**\r\n       * Sets maximum number of tick marks we&#39;re comfortable with\r\n       *\r\n       * @param maxTicks the maximum number of tick marks for the axis\r\n       */\r\n      public void setMaxTicks(double maxTicks) {\r\n        this.maxTicks = maxTicks;\r\n        calculate();\r\n      }\r\n    }\r\n\r\nWe can then make use of the above code like this:\r\n\r\n    NiceScale numScale = new NiceScale(-0.085, 0.173);\r\n \r\n    System.out.println(&quot;Tick Spacing:\\t&quot; + numScale.getTickSpacing());\r\n    System.out.println(&quot;Nice Minimum:\\t&quot; + numScale.getNiceMin());\r\n    System.out.println(&quot;Nice Maximum:\\t&quot; + numScale.getNiceMax());\r\n\r\nWhich will then output nicely formatted numbers for use in whatever application for which you need to create pretty scales. =D\r\n\r\n    Tick Spacing: 0.05\r\n    Nice Minimum: -0.1\r\n    Nice Maximum: 0.2\r\n\r\n  [1]: http://www.esurient-systems.ca/2011/03/algorithm-for-optimal-scaling-on-chart_8199.html\r\n  [2]: http://books.google.com/books?id=fvA7zLEFWZgC&amp;pg=PA61&amp;lpg=PA61#v=onepage&amp;q&amp;f=false","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>I am the author of \"<a href=\"http://www.esurient-systems.ca/2011/03/algorithm-for-optimal-scaling-on-chart_8199.html\" rel=\"noreferrer\">Algorithm for Optimal Scaling on a Chart Axis</a>\". It used to be hosted on trollop.org, but I have recently moved domains/blogging engines. Anyhow, I'll post the contents here for easier access.</p>\n\n<p>I've been working on an Android charting application for an assignment and ran into a bit of an issue when it came to presenting the chart in a nicely scaled format. I spent a some time trying to create this algorithm on my own and came awfully close, but in the end I found a pseudo-code example in a book called \"Graphics Gems, Volume 1\" by Andrew S. Glassner. An excellent description of the problem is given in the chapter on \"<a href=\"http://books.google.com/books?id=fvA7zLEFWZgC&amp;pg=PA61&amp;lpg=PA61#v=onepage&amp;q&amp;f=false\" rel=\"noreferrer\">Nice Numbers for Graph Labels</a>\":</p>\n\n<blockquote>\n  <p>When creating a graph by computer, it is desirable to label the x and\n  y axes with \"nice\" numbers: simple decimal numbers. For example, if\n  the data range is 105 to 543, we'd probably want to plot the range\n  from 100 to 600 and put tick marks every 100 units. Or if the data\n  range is 2.04 to 2.16, we'd probably plot a range from 2.00 to 2.20\n  with a tick spacing of 0.05. Humans are good at choosing such \"nice\"\n  numbers, but simplistic algorithms are not. The naïve label-selection\n  algorithm takes the data range and divides it into n equal intervals,\n  but this usually results in ugly tick labels. We here describe a\n  simple method for generating nice graph labels.</p>\n  \n  <p>The primary observation is that the \"nicest\" numbers in decimal are 1,\n  2, and 5, and all power-of-ten multiples of these numbers. We will use\n  only such numbers for the tick spacing, and place tick marks at\n  multiples of the tick spacing...</p>\n</blockquote>\n\n<p>I used the pseudo-code example in this book to create the following class in Java:</p>\n\n<pre><code>public class NiceScale {\n\n  private double minPoint;\n  private double maxPoint;\n  private double maxTicks = 10;\n  private double tickSpacing;\n  private double range;\n  private double niceMin;\n  private double niceMax;\n\n  /**\n   * Instantiates a new instance of the NiceScale class.\n   *\n   * @param min the minimum data point on the axis\n   * @param max the maximum data point on the axis\n   */\n  public NiceScale(double min, double max) {\n    this.minPoint = min;\n    this.maxPoint = max;\n    calculate();\n  }\n\n  /**\n   * Calculate and update values for tick spacing and nice\n   * minimum and maximum data points on the axis.\n   */\n  private void calculate() {\n    this.range = niceNum(maxPoint - minPoint, false);\n    this.tickSpacing = niceNum(range / (maxTicks - 1), true);\n    this.niceMin =\n      Math.floor(minPoint / tickSpacing) * tickSpacing;\n    this.niceMax =\n      Math.ceil(maxPoint / tickSpacing) * tickSpacing;\n  }\n\n  /**\n   * Returns a \"nice\" number approximately equal to range Rounds\n   * the number if round = true Takes the ceiling if round = false.\n   *\n   * @param range the data range\n   * @param round whether to round the result\n   * @return a \"nice\" number to be used for the data range\n   */\n  private double niceNum(double range, boolean round) {\n    double exponent; /** exponent of range */\n    double fraction; /** fractional part of range */\n    double niceFraction; /** nice, rounded fraction */\n\n    exponent = Math.floor(Math.log10(range));\n    fraction = range / Math.pow(10, exponent);\n\n    if (round) {\n      if (fraction &lt; 1.5)\n        niceFraction = 1;\n      else if (fraction &lt; 3)\n        niceFraction = 2;\n      else if (fraction &lt; 7)\n        niceFraction = 5;\n      else\n        niceFraction = 10;\n    } else {\n      if (fraction &lt;= 1)\n        niceFraction = 1;\n      else if (fraction &lt;= 2)\n        niceFraction = 2;\n      else if (fraction &lt;= 5)\n        niceFraction = 5;\n      else\n        niceFraction = 10;\n    }\n\n    return niceFraction * Math.pow(10, exponent);\n  }\n\n  /**\n   * Sets the minimum and maximum data points for the axis.\n   *\n   * @param minPoint the minimum data point on the axis\n   * @param maxPoint the maximum data point on the axis\n   */\n  public void setMinMaxPoints(double minPoint, double maxPoint) {\n    this.minPoint = minPoint;\n    this.maxPoint = maxPoint;\n    calculate();\n  }\n\n  /**\n   * Sets maximum number of tick marks we're comfortable with\n   *\n   * @param maxTicks the maximum number of tick marks for the axis\n   */\n  public void setMaxTicks(double maxTicks) {\n    this.maxTicks = maxTicks;\n    calculate();\n  }\n}\n</code></pre>\n\n<p>We can then make use of the above code like this:</p>\n\n<pre><code>NiceScale numScale = new NiceScale(-0.085, 0.173);\n\nSystem.out.println(\"Tick Spacing:\\t\" + numScale.getTickSpacing());\nSystem.out.println(\"Nice Minimum:\\t\" + numScale.getNiceMin());\nSystem.out.println(\"Nice Maximum:\\t\" + numScale.getNiceMax());\n</code></pre>\n\n<p>Which will then output nicely formatted numbers for use in whatever application for which you need to create pretty scales. =D</p>\n\n<pre><code>Tick Spacing: 0.05\nNice Minimum: -0.1\nNice Maximum: 0.2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":169460,"reputation":103,"user_id":395565,"display_name":"vicky"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1370512802,"creation_date":1370512802,"answer_id":16959142,"question_id":8506881,"body_markdown":"I have converted above java code to Python as per my requirement.\r\n\r\n \r\n\r\n     import math\r\n    \r\n      class NiceScale:\r\n        def __init__(self, minv,maxv):\r\n            self.maxTicks = 6\r\n            self.tickSpacing = 0\r\n            self.lst = 10\r\n            self.niceMin = 0\r\n            self.niceMax = 0\r\n            self.minPoint = minv\r\n            self.maxPoint = maxv\r\n            self.calculate()\r\n    \r\n        def calculate(self):\r\n            self.lst = self.niceNum(self.maxPoint - self.minPoint, False)\r\n            self.tickSpacing = self.niceNum(self.lst / (self.maxTicks - 1), True)\r\n            self.niceMin = math.floor(self.minPoint / self.tickSpacing) * self.tickSpacing\r\n            self.niceMax = math.ceil(self.maxPoint / self.tickSpacing) * self.tickSpacing\r\n    \r\n        def niceNum(self, lst, rround):\r\n            self.lst = lst\r\n            exponent = 0 # exponent of range */\r\n            fraction = 0 # fractional part of range */\r\n            niceFraction = 0 # nice, rounded fraction */\r\n    \r\n            exponent = math.floor(math.log10(self.lst));\r\n            fraction = self.lst / math.pow(10, exponent);\r\n    \r\n            if (self.lst):\r\n                if (fraction &lt; 1.5):\r\n                    niceFraction = 1\r\n                elif (fraction &lt; 3):\r\n                    niceFraction = 2\r\n                elif (fraction &lt; 7):\r\n                    niceFraction = 5;\r\n                else:\r\n                    niceFraction = 10;\r\n            else :\r\n                if (fraction &lt;= 1):\r\n                    niceFraction = 1\r\n                elif (fraction &lt;= 2):\r\n                    niceFraction = 2\r\n                elif (fraction &lt;= 5):\r\n                    niceFraction = 5\r\n                else:\r\n                    niceFraction = 10\r\n    \r\n            return niceFraction * math.pow(10, exponent)\r\n    \r\n        def setMinMaxPoints(self, minPoint, maxPoint):\r\n              self.minPoint = minPoint\r\n              self.maxPoint = maxPoint\r\n              self.calculate()\r\n          \r\n        def setMaxTicks(self, maxTicks):\r\n            self.maxTicks = maxTicks;\r\n            self.calculate()\r\n    \r\n    a=NiceScale(14024, 17756)\r\n    print &quot;a.lst &quot;, a.lst\r\n    print &quot;a.maxPoint &quot;, a.maxPoint\r\n    print &quot;a.maxTicks &quot;, a.maxTicks\r\n    print &quot;a.minPoint &quot;, a.minPoint\r\n    print &quot;a.niceMax &quot;, a.niceMax\r\n    print &quot;a.niceMin &quot;, a.niceMin\r\n    print &quot;a.tickSpacing &quot;, a.tickSpacing","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>I have converted above java code to Python as per my requirement.</p>\n\n<pre><code> import math\n\n  class NiceScale:\n    def __init__(self, minv,maxv):\n        self.maxTicks = 6\n        self.tickSpacing = 0\n        self.lst = 10\n        self.niceMin = 0\n        self.niceMax = 0\n        self.minPoint = minv\n        self.maxPoint = maxv\n        self.calculate()\n\n    def calculate(self):\n        self.lst = self.niceNum(self.maxPoint - self.minPoint, False)\n        self.tickSpacing = self.niceNum(self.lst / (self.maxTicks - 1), True)\n        self.niceMin = math.floor(self.minPoint / self.tickSpacing) * self.tickSpacing\n        self.niceMax = math.ceil(self.maxPoint / self.tickSpacing) * self.tickSpacing\n\n    def niceNum(self, lst, rround):\n        self.lst = lst\n        exponent = 0 # exponent of range */\n        fraction = 0 # fractional part of range */\n        niceFraction = 0 # nice, rounded fraction */\n\n        exponent = math.floor(math.log10(self.lst));\n        fraction = self.lst / math.pow(10, exponent);\n\n        if (self.lst):\n            if (fraction &lt; 1.5):\n                niceFraction = 1\n            elif (fraction &lt; 3):\n                niceFraction = 2\n            elif (fraction &lt; 7):\n                niceFraction = 5;\n            else:\n                niceFraction = 10;\n        else :\n            if (fraction &lt;= 1):\n                niceFraction = 1\n            elif (fraction &lt;= 2):\n                niceFraction = 2\n            elif (fraction &lt;= 5):\n                niceFraction = 5\n            else:\n                niceFraction = 10\n\n        return niceFraction * math.pow(10, exponent)\n\n    def setMinMaxPoints(self, minPoint, maxPoint):\n          self.minPoint = minPoint\n          self.maxPoint = maxPoint\n          self.calculate()\n\n    def setMaxTicks(self, maxTicks):\n        self.maxTicks = maxTicks;\n        self.calculate()\n\na=NiceScale(14024, 17756)\nprint \"a.lst \", a.lst\nprint \"a.maxPoint \", a.maxPoint\nprint \"a.maxTicks \", a.maxTicks\nprint \"a.minPoint \", a.minPoint\nprint \"a.niceMax \", a.niceMax\nprint \"a.niceMin \", a.niceMin\nprint \"a.tickSpacing \", a.tickSpacing\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1921661,"reputation":1485,"user_id":1733038,"accept_rate":78,"display_name":"Yepher"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1377732048,"creation_date":1377732048,"answer_id":18499863,"question_id":8506881,"body_markdown":"Here is the same thing in Objective C\r\n\r\nYFRNiceScale.h\r\n    \r\n    #import &lt;Foundation/Foundation.h&gt;\r\n    \r\n    @interface YFRNiceScale : NSObject\r\n    \r\n    @property (nonatomic, readonly) CGFloat minPoint;\r\n    @property (nonatomic, readonly) CGFloat maxPoint;\r\n    @property (nonatomic, readonly) CGFloat maxTicks;\r\n    @property (nonatomic, readonly) CGFloat tickSpacing;\r\n    @property (nonatomic, readonly) CGFloat range;\r\n    @property (nonatomic, readonly) CGFloat niceRange;\r\n    @property (nonatomic, readonly) CGFloat niceMin;\r\n    @property (nonatomic, readonly) CGFloat niceMax;\r\n    \r\n    \r\n    - (id) initWithMin: (CGFloat) min andMax: (CGFloat) max;\r\n    - (id) initWithNSMin: (NSDecimalNumber*) min andNSMax: (NSDecimalNumber*) max;\r\n    \r\n    @end\r\n\r\n\r\n\r\nYFRNiceScale.m\r\n\r\n\r\n    #import &quot;YFRNiceScale.h&quot;\r\n    \r\n    @implementation YFRNiceScale\r\n    \r\n    @synthesize minPoint = _minPoint;\r\n    @synthesize maxPoint = _maxPoint;\r\n    @synthesize maxTicks = _maxTicks;\r\n    @synthesize tickSpacing = _tickSpacing;\r\n    @synthesize range = _range;\r\n    @synthesize niceRange = _niceRange;\r\n    @synthesize niceMin = _niceMin;\r\n    @synthesize niceMax = _niceMax;\r\n    \r\n    - (id)init {\r\n        self = [super init];\r\n        if (self) {\r\n                    \r\n        }\r\n        return self;\r\n    }\r\n    \r\n    - (id) initWithMin: (CGFloat) min andMax: (CGFloat) max {\r\n    \r\n        if (self) {\r\n            _maxTicks = 10;\r\n            _minPoint = min;\r\n            _maxPoint = max;\r\n            [self calculate];\r\n        }\r\n        return [self init];\r\n    }\r\n    \r\n    - (id) initWithNSMin: (NSDecimalNumber*) min andNSMax: (NSDecimalNumber*) max {\r\n        \r\n        if (self) {\r\n            _maxTicks = 10;\r\n            _minPoint = [min doubleValue];\r\n            _maxPoint = [max doubleValue];\r\n            [self calculate];\r\n        }\r\n        return [self init];\r\n    }\r\n    \r\n    \r\n    /**\r\n     * Calculate and update values for tick spacing and nice minimum and maximum\r\n     * data points on the axis.\r\n     */\r\n    \r\n    - (void) calculate {\r\n        _range = [self niceNumRange: (_maxPoint-_minPoint) roundResult:NO];\r\n        _tickSpacing = [self niceNumRange: (_range / (_maxTicks - 1)) roundResult:YES];\r\n        _niceMin = floor(_minPoint / _tickSpacing) * _tickSpacing;\r\n        _niceMax = ceil(_maxPoint / _tickSpacing) * _tickSpacing;\r\n        \r\n        _niceRange = _niceMax - _niceMin;\r\n    }\r\n    \r\n    \r\n    /**\r\n     * Returns a &quot;nice&quot; number approximately equal to range Rounds the number if\r\n     * round = true Takes the ceiling if round = false.\r\n     *\r\n     * @param range\r\n     *            the data range\r\n     * @param round\r\n     *            whether to round the result\r\n     * @return a &quot;nice&quot; number to be used for the data range\r\n     */\r\n    - (CGFloat) niceNumRange:(CGFloat) aRange roundResult:(BOOL) round {\r\n        CGFloat exponent;\r\n        CGFloat fraction;\r\n        CGFloat niceFraction;\r\n        \r\n        exponent = floor(log10(aRange));\r\n        fraction = aRange / pow(10, exponent);\r\n        \r\n        if (round) {\r\n            if (fraction &lt; 1.5) {\r\n                niceFraction = 1;\r\n            } else if (fraction &lt; 3) {\r\n                niceFraction = 2;\r\n            } else if (fraction &lt; 7) {\r\n                niceFraction = 5;\r\n            } else {\r\n                niceFraction = 10;\r\n            }\r\n            \r\n        } else {\r\n            if (fraction &lt;= 1) {\r\n                niceFraction = 1;\r\n            } else if (fraction &lt;= 2) {\r\n                niceFraction = 2;\r\n            } else if (fraction &lt;= 5) {\r\n                niceFraction = 2;\r\n            } else {\r\n                niceFraction = 10;\r\n            }\r\n        }\r\n        \r\n        return niceFraction * pow(10, exponent);\r\n    }\r\n    \r\n    - (NSString*) description {\r\n        return [NSString stringWithFormat:@&quot;NiceScale [minPoint=%.2f, maxPoint=%.2f, maxTicks=%.2f, tickSpacing=%.2f, range=%.2f, niceMin=%.2f, niceMax=%.2f]&quot;, _minPoint, _maxPoint, _maxTicks, _tickSpacing, _range, _niceMin, _niceMax ];\r\n    }\r\n    \r\n    @end\r\n\r\n\r\n\r\nUsage:\r\n\r\n    YFRNiceScale* niceScale = [[YFRNiceScale alloc] initWithMin:0 andMax:500];\r\n    NSLog(@&quot;Nice: %@&quot;, niceScale);\r\n\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here is the same thing in Objective C</p>\n\n<p>YFRNiceScale.h</p>\n\n<pre><code>#import &lt;Foundation/Foundation.h&gt;\n\n@interface YFRNiceScale : NSObject\n\n@property (nonatomic, readonly) CGFloat minPoint;\n@property (nonatomic, readonly) CGFloat maxPoint;\n@property (nonatomic, readonly) CGFloat maxTicks;\n@property (nonatomic, readonly) CGFloat tickSpacing;\n@property (nonatomic, readonly) CGFloat range;\n@property (nonatomic, readonly) CGFloat niceRange;\n@property (nonatomic, readonly) CGFloat niceMin;\n@property (nonatomic, readonly) CGFloat niceMax;\n\n\n- (id) initWithMin: (CGFloat) min andMax: (CGFloat) max;\n- (id) initWithNSMin: (NSDecimalNumber*) min andNSMax: (NSDecimalNumber*) max;\n\n@end\n</code></pre>\n\n<p>YFRNiceScale.m</p>\n\n<pre><code>#import \"YFRNiceScale.h\"\n\n@implementation YFRNiceScale\n\n@synthesize minPoint = _minPoint;\n@synthesize maxPoint = _maxPoint;\n@synthesize maxTicks = _maxTicks;\n@synthesize tickSpacing = _tickSpacing;\n@synthesize range = _range;\n@synthesize niceRange = _niceRange;\n@synthesize niceMin = _niceMin;\n@synthesize niceMax = _niceMax;\n\n- (id)init {\n    self = [super init];\n    if (self) {\n\n    }\n    return self;\n}\n\n- (id) initWithMin: (CGFloat) min andMax: (CGFloat) max {\n\n    if (self) {\n        _maxTicks = 10;\n        _minPoint = min;\n        _maxPoint = max;\n        [self calculate];\n    }\n    return [self init];\n}\n\n- (id) initWithNSMin: (NSDecimalNumber*) min andNSMax: (NSDecimalNumber*) max {\n\n    if (self) {\n        _maxTicks = 10;\n        _minPoint = [min doubleValue];\n        _maxPoint = [max doubleValue];\n        [self calculate];\n    }\n    return [self init];\n}\n\n\n/**\n * Calculate and update values for tick spacing and nice minimum and maximum\n * data points on the axis.\n */\n\n- (void) calculate {\n    _range = [self niceNumRange: (_maxPoint-_minPoint) roundResult:NO];\n    _tickSpacing = [self niceNumRange: (_range / (_maxTicks - 1)) roundResult:YES];\n    _niceMin = floor(_minPoint / _tickSpacing) * _tickSpacing;\n    _niceMax = ceil(_maxPoint / _tickSpacing) * _tickSpacing;\n\n    _niceRange = _niceMax - _niceMin;\n}\n\n\n/**\n * Returns a \"nice\" number approximately equal to range Rounds the number if\n * round = true Takes the ceiling if round = false.\n *\n * @param range\n *            the data range\n * @param round\n *            whether to round the result\n * @return a \"nice\" number to be used for the data range\n */\n- (CGFloat) niceNumRange:(CGFloat) aRange roundResult:(BOOL) round {\n    CGFloat exponent;\n    CGFloat fraction;\n    CGFloat niceFraction;\n\n    exponent = floor(log10(aRange));\n    fraction = aRange / pow(10, exponent);\n\n    if (round) {\n        if (fraction &lt; 1.5) {\n            niceFraction = 1;\n        } else if (fraction &lt; 3) {\n            niceFraction = 2;\n        } else if (fraction &lt; 7) {\n            niceFraction = 5;\n        } else {\n            niceFraction = 10;\n        }\n\n    } else {\n        if (fraction &lt;= 1) {\n            niceFraction = 1;\n        } else if (fraction &lt;= 2) {\n            niceFraction = 2;\n        } else if (fraction &lt;= 5) {\n            niceFraction = 2;\n        } else {\n            niceFraction = 10;\n        }\n    }\n\n    return niceFraction * pow(10, exponent);\n}\n\n- (NSString*) description {\n    return [NSString stringWithFormat:@\"NiceScale [minPoint=%.2f, maxPoint=%.2f, maxTicks=%.2f, tickSpacing=%.2f, range=%.2f, niceMin=%.2f, niceMax=%.2f]\", _minPoint, _maxPoint, _maxTicks, _tickSpacing, _range, _niceMin, _niceMax ];\n}\n\n@end\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>YFRNiceScale* niceScale = [[YFRNiceScale alloc] initWithMin:0 andMax:500];\nNSLog(@\"Nice: %@\", niceScale);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1869828,"reputation":307,"user_id":1692338,"display_name":"Graeme"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1380140015,"creation_date":1380140015,"answer_id":19014366,"question_id":8506881,"body_markdown":"I found this thread while writing some php, so now the same code is available in php too!\r\n\r\n&lt;code&gt;\r\n\t\r\n\tclass CNiceScale {\r\n\r\n\t  private $minPoint;\r\n\t  private $maxPoint;\r\n\t  private $maxTicks = 10;\r\n\t  private $tickSpacing;\r\n\t  private $range;\r\n\t  private $niceMin;\r\n\t  private $niceMax;\r\n\r\n\t  public function setScale($min, $max) {\r\n\t\t$this-&gt;minPoint = $min;\r\n\t\t$this-&gt;maxPoint = $max;\r\n\t\t$this-&gt;calculate();\r\n\t  }\r\n\r\n\t  private function calculate() {\r\n\t\t$this-&gt;range = $this-&gt;niceNum($this-&gt;maxPoint - $this-&gt;minPoint, false);\r\n\t\t$this-&gt;tickSpacing = $this-&gt;niceNum($this-&gt;range / ($this-&gt;maxTicks - 1), true);\r\n\t\t$this-&gt;niceMin = floor($this-&gt;minPoint / $this-&gt;tickSpacing) * $this-&gt;tickSpacing;\r\n\t\t$this-&gt;niceMax = ceil($this-&gt;maxPoint / $this-&gt;tickSpacing) * $this-&gt;tickSpacing;\r\n\t  }\r\n\r\n\t  private function niceNum($range, $round) {\r\n\t\t$exponent; /** exponent of range */\r\n\t\t$fraction; /** fractional part of range */\r\n\t\t$niceFraction; /** nice, rounded fraction */\r\n\r\n\t\t$exponent = floor(log10($range));\r\n\t\t$fraction = $range / pow(10, $exponent);\r\n\r\n\t\tif ($round) {\r\n\t\t  if ($fraction &lt; 1.5)\r\n\t\t\t$niceFraction = 1;\r\n\t\t  else if ($fraction &lt; 3)\r\n\t\t\t$niceFraction = 2;\r\n\t\t  else if ($fraction &lt; 7)\r\n\t\t\t$niceFraction = 5;\r\n\t\t  else\r\n\t\t\t$niceFraction = 10;\r\n\t\t} else {\r\n\t\t  if ($fraction &lt;= 1)\r\n\t\t\t$niceFraction = 1;\r\n\t\t  else if ($fraction &lt;= 2)\r\n\t\t\t$niceFraction = 2;\r\n\t\t  else if ($fraction &lt;= 5)\r\n\t\t\t$niceFraction = 5;\r\n\t\t  else\r\n\t\t\t$niceFraction = 10;\r\n\t\t}\r\n\r\n\t\treturn $niceFraction * pow(10, $exponent);\r\n\t  }\r\n\r\n\t  public function setMinMaxPoints($minPoint, $maxPoint) {\r\n\t\t$this-&gt;minPoint = $minPoint;\r\n\t\t$this-&gt;maxPoint = $maxPoint;\r\n\t\t$this-&gt;calculate();\r\n\t  }\r\n\r\n\t  public function setMaxTicks($maxTicks) {\r\n\t\t$this-&gt;maxTicks = $maxTicks;\r\n\t\t$this-&gt;calculate();\r\n\t  }\r\n\r\n\t  public function getTickSpacing() {\r\n\t\treturn $this-&gt;tickSpacing;\r\n\t  }\r\n\r\n\t  public function getNiceMin() {\r\n\t\treturn $this-&gt;niceMin;\r\n\t  }\r\n\r\n\t  public function getNiceMax() {\r\n\t\treturn $this-&gt;niceMax;\r\n\t  }\r\n\r\n\t}\r\n\r\n&lt;/code&gt;","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>I found this thread while writing some php, so now the same code is available in php too!</p>\n\n<p><code></p>\n\n<pre><code>class CNiceScale {\n\n  private $minPoint;\n  private $maxPoint;\n  private $maxTicks = 10;\n  private $tickSpacing;\n  private $range;\n  private $niceMin;\n  private $niceMax;\n\n  public function setScale($min, $max) {\n    $this-&gt;minPoint = $min;\n    $this-&gt;maxPoint = $max;\n    $this-&gt;calculate();\n  }\n\n  private function calculate() {\n    $this-&gt;range = $this-&gt;niceNum($this-&gt;maxPoint - $this-&gt;minPoint, false);\n    $this-&gt;tickSpacing = $this-&gt;niceNum($this-&gt;range / ($this-&gt;maxTicks - 1), true);\n    $this-&gt;niceMin = floor($this-&gt;minPoint / $this-&gt;tickSpacing) * $this-&gt;tickSpacing;\n    $this-&gt;niceMax = ceil($this-&gt;maxPoint / $this-&gt;tickSpacing) * $this-&gt;tickSpacing;\n  }\n\n  private function niceNum($range, $round) {\n    $exponent; /** exponent of range */\n    $fraction; /** fractional part of range */\n    $niceFraction; /** nice, rounded fraction */\n\n    $exponent = floor(log10($range));\n    $fraction = $range / pow(10, $exponent);\n\n    if ($round) {\n      if ($fraction &lt; 1.5)\n        $niceFraction = 1;\n      else if ($fraction &lt; 3)\n        $niceFraction = 2;\n      else if ($fraction &lt; 7)\n        $niceFraction = 5;\n      else\n        $niceFraction = 10;\n    } else {\n      if ($fraction &lt;= 1)\n        $niceFraction = 1;\n      else if ($fraction &lt;= 2)\n        $niceFraction = 2;\n      else if ($fraction &lt;= 5)\n        $niceFraction = 5;\n      else\n        $niceFraction = 10;\n    }\n\n    return $niceFraction * pow(10, $exponent);\n  }\n\n  public function setMinMaxPoints($minPoint, $maxPoint) {\n    $this-&gt;minPoint = $minPoint;\n    $this-&gt;maxPoint = $maxPoint;\n    $this-&gt;calculate();\n  }\n\n  public function setMaxTicks($maxTicks) {\n    $this-&gt;maxTicks = $maxTicks;\n    $this-&gt;calculate();\n  }\n\n  public function getTickSpacing() {\n    return $this-&gt;tickSpacing;\n  }\n\n  public function getNiceMin() {\n    return $this-&gt;niceMin;\n  }\n\n  public function getNiceMax() {\n    return $this-&gt;niceMax;\n  }\n\n}\n</code></pre>\n\n<p></code></p>\n"},{"tags":[],"owner":{"account_id":57639,"reputation":7371,"user_id":172690,"accept_rate":87,"display_name":"Grzegorz Adam Hankiewicz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610140180,"creation_date":1400092261,"answer_id":23662411,"question_id":8506881,"body_markdown":"Since everybody and his dog is posting a translation to other popular languages, here is my version for the [Nim programming language](https://nim-lang.org/). I also added handling of cases where the amount of ticks is less than two:\r\n\r\n    import math, strutils\r\n    \r\n    const\r\n      defaultMaxTicks = 10\r\n    \r\n    type NiceScale = object\r\n      minPoint: float\r\n      maxPoint: float\r\n      maxTicks: int\r\n      tickSpacing: float\r\n      niceMin: float\r\n      niceMax: float\r\n    \r\n    proc ff(x: float): string =\r\n      result = x.formatFloat(ffDecimal, 3)\r\n    \r\n    proc `$`*(x: NiceScale): string =\r\n      result = &quot;Input minPoint: &quot; &amp; x.minPoint.ff &amp;\r\n        &quot;\\nInput maxPoint: &quot; &amp; x.maxPoint.ff &amp;\r\n        &quot;\\nInput maxTicks: &quot; &amp; $x.maxTicks &amp;\r\n        &quot;\\nOutput niceMin: &quot; &amp; x.niceMin.ff &amp;\r\n        &quot;\\nOutput niceMax: &quot; &amp; x.niceMax.ff &amp;\r\n        &quot;\\nOutput tickSpacing: &quot; &amp; x.tickSpacing.ff &amp;\r\n        &quot;\\n&quot;\r\n    \r\n    proc calculate*(x: var NiceScale)\r\n    \r\n    proc init*(x: var NiceScale; minPoint, maxPoint: float;\r\n        maxTicks = defaultMaxTicks) =\r\n      x.minPoint = minPoint\r\n      x.maxPoint = maxPoint\r\n      x.maxTicks = maxTicks\r\n      x.calculate\r\n    \r\n    proc initScale*(minPoint, maxPoint: float;\r\n        maxTicks = defaultMaxTicks): NiceScale =\r\n      result.init(minPoint, maxPoint, maxTicks)\r\n    \r\n    proc niceNum(scaleRange: float; doRound: bool): float =\r\n      var\r\n        exponent: float ## Exponent of scaleRange.\r\n        fraction: float ## Fractional part of scaleRange.\r\n        niceFraction: float ## Nice, rounded fraction.\r\n    \r\n      exponent = floor(log10(scaleRange));\r\n      fraction = scaleRange / pow(10, exponent);\r\n    \r\n      if doRound:\r\n        if fraction &lt; 1.5:\r\n          niceFraction = 1\r\n        elif fraction &lt; 3:\r\n          niceFraction = 2\r\n        elif fraction &lt; 7:\r\n          niceFraction = 5\r\n        else:\r\n          niceFraction = 10\r\n      else:\r\n        if fraction &lt;= 1:\r\n          niceFraction = 1\r\n        elif fraction &lt;= 2:\r\n          niceFraction = 2\r\n        elif fraction &lt;= 5:\r\n          niceFraction = 5\r\n        else:\r\n          niceFraction = 10\r\n    \r\n      return niceFraction * pow(10, exponent)\r\n    \r\n    proc calculate*(x: var NiceScale) =\r\n      assert x.maxPoint &gt; x.minPoint, &quot;Wrong input range!&quot;\r\n      assert x.maxTicks &gt;= 0, &quot;Sorry, can&#39;t have imaginary ticks!&quot;\r\n      let scaleRange = niceNum(x.maxPoint - x.minPoint, false)\r\n      if x.maxTicks &lt; 2:\r\n        x.niceMin = floor(x.minPoint)\r\n        x.niceMax = ceil(x.maxPoint)\r\n        x.tickSpacing = (x.niceMax - x.niceMin) /\r\n          (if x.maxTicks == 1: 2.0 else: 1.0)\r\n      else:\r\n        x.tickSpacing = niceNum(scaleRange / (float(x.maxTicks - 1)), true)\r\n        x.niceMin = floor(x.minPoint / x.tickSpacing) * x.tickSpacing\r\n        x.niceMax = ceil(x.maxPoint / x.tickSpacing) * x.tickSpacing\r\n    \r\n    when isMainModule:\r\n      var s = initScale(57.2, 103.3)\r\n      echo s\r\n\r\nThis is the comment stripped version. Full one can be read at [GitHub](https://github.com/gradha/seohtracker-logic/blob/92cc27737607a30db917fbac78c8de6093526f12/logic/l_graph.nim) integrated into my project.","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Since everybody and his dog is posting a translation to other popular languages, here is my version for the <a href=\"https://nim-lang.org/\" rel=\"nofollow noreferrer\">Nim programming language</a>. I also added handling of cases where the amount of ticks is less than two:</p>\n<pre><code>import math, strutils\n\nconst\n  defaultMaxTicks = 10\n\ntype NiceScale = object\n  minPoint: float\n  maxPoint: float\n  maxTicks: int\n  tickSpacing: float\n  niceMin: float\n  niceMax: float\n\nproc ff(x: float): string =\n  result = x.formatFloat(ffDecimal, 3)\n\nproc `$`*(x: NiceScale): string =\n  result = &quot;Input minPoint: &quot; &amp; x.minPoint.ff &amp;\n    &quot;\\nInput maxPoint: &quot; &amp; x.maxPoint.ff &amp;\n    &quot;\\nInput maxTicks: &quot; &amp; $x.maxTicks &amp;\n    &quot;\\nOutput niceMin: &quot; &amp; x.niceMin.ff &amp;\n    &quot;\\nOutput niceMax: &quot; &amp; x.niceMax.ff &amp;\n    &quot;\\nOutput tickSpacing: &quot; &amp; x.tickSpacing.ff &amp;\n    &quot;\\n&quot;\n\nproc calculate*(x: var NiceScale)\n\nproc init*(x: var NiceScale; minPoint, maxPoint: float;\n    maxTicks = defaultMaxTicks) =\n  x.minPoint = minPoint\n  x.maxPoint = maxPoint\n  x.maxTicks = maxTicks\n  x.calculate\n\nproc initScale*(minPoint, maxPoint: float;\n    maxTicks = defaultMaxTicks): NiceScale =\n  result.init(minPoint, maxPoint, maxTicks)\n\nproc niceNum(scaleRange: float; doRound: bool): float =\n  var\n    exponent: float ## Exponent of scaleRange.\n    fraction: float ## Fractional part of scaleRange.\n    niceFraction: float ## Nice, rounded fraction.\n\n  exponent = floor(log10(scaleRange));\n  fraction = scaleRange / pow(10, exponent);\n\n  if doRound:\n    if fraction &lt; 1.5:\n      niceFraction = 1\n    elif fraction &lt; 3:\n      niceFraction = 2\n    elif fraction &lt; 7:\n      niceFraction = 5\n    else:\n      niceFraction = 10\n  else:\n    if fraction &lt;= 1:\n      niceFraction = 1\n    elif fraction &lt;= 2:\n      niceFraction = 2\n    elif fraction &lt;= 5:\n      niceFraction = 5\n    else:\n      niceFraction = 10\n\n  return niceFraction * pow(10, exponent)\n\nproc calculate*(x: var NiceScale) =\n  assert x.maxPoint &gt; x.minPoint, &quot;Wrong input range!&quot;\n  assert x.maxTicks &gt;= 0, &quot;Sorry, can't have imaginary ticks!&quot;\n  let scaleRange = niceNum(x.maxPoint - x.minPoint, false)\n  if x.maxTicks &lt; 2:\n    x.niceMin = floor(x.minPoint)\n    x.niceMax = ceil(x.maxPoint)\n    x.tickSpacing = (x.niceMax - x.niceMin) /\n      (if x.maxTicks == 1: 2.0 else: 1.0)\n  else:\n    x.tickSpacing = niceNum(scaleRange / (float(x.maxTicks - 1)), true)\n    x.niceMin = floor(x.minPoint / x.tickSpacing) * x.tickSpacing\n    x.niceMax = ceil(x.maxPoint / x.tickSpacing) * x.tickSpacing\n\nwhen isMainModule:\n  var s = initScale(57.2, 103.3)\n  echo s\n</code></pre>\n<p>This is the comment stripped version. Full one can be read at <a href=\"https://github.com/gradha/seohtracker-logic/blob/92cc27737607a30db917fbac78c8de6093526f12/logic/l_graph.nim\" rel=\"nofollow noreferrer\">GitHub</a> integrated into my project.</p>\n"},{"tags":[],"owner":{"account_id":1262757,"reputation":1258,"user_id":1220653,"accept_rate":50,"display_name":"Bradley Odell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1422904140,"creation_date":1422904140,"answer_id":28284941,"question_id":8506881,"body_markdown":"I needed this algorithm converted to C#, so here it is...\r\n\r\n    public static class NiceScale {\r\n\r\n\t\tpublic static void Calculate(double min, double max, int maxTicks, out double range, out double tickSpacing, out double niceMin, out double niceMax) {\r\n\t\t\trange = niceNum(max - min, false);\r\n\t\t\ttickSpacing = niceNum(range / (maxTicks - 1), true);\r\n\t\t\tniceMin = Math.Floor(min / tickSpacing) * tickSpacing;\r\n\t\t\tniceMax = Math.Ceiling(max / tickSpacing) * tickSpacing;\r\n\t\t}\r\n\r\n\t\tprivate static double niceNum(double range, bool round) {\r\n\t\t\tdouble pow = Math.Pow(10, Math.Floor(Math.Log10(range)));\r\n\t\t\tdouble fraction = range / pow;\r\n\r\n\t\t\tdouble niceFraction;\r\n\t\t\tif (round) {\r\n\t\t\t\tif (fraction &lt; 1.5) {\r\n\t\t\t\t\tniceFraction = 1;\r\n\t\t\t\t} else if (fraction &lt; 3) {\r\n\t\t\t\t\tniceFraction = 2;\r\n\t\t\t\t} else if (fraction &lt; 7) {\r\n\t\t\t\t\tniceFraction = 5;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tniceFraction = 10;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (fraction &lt;= 1) {\r\n\t\t\t\t\tniceFraction = 1;\r\n\t\t\t\t} else if (fraction &lt;= 2) {\r\n\t\t\t\t\tniceFraction = 2;\r\n\t\t\t\t} else if (fraction &lt;= 5) {\r\n\t\t\t\t\tniceFraction = 5;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tniceFraction = 10;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn niceFraction * pow;\r\n\t\t}\r\n\r\n\t}","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>I needed this algorithm converted to C#, so here it is...</p>\n\n<pre><code>public static class NiceScale {\n\n    public static void Calculate(double min, double max, int maxTicks, out double range, out double tickSpacing, out double niceMin, out double niceMax) {\n        range = niceNum(max - min, false);\n        tickSpacing = niceNum(range / (maxTicks - 1), true);\n        niceMin = Math.Floor(min / tickSpacing) * tickSpacing;\n        niceMax = Math.Ceiling(max / tickSpacing) * tickSpacing;\n    }\n\n    private static double niceNum(double range, bool round) {\n        double pow = Math.Pow(10, Math.Floor(Math.Log10(range)));\n        double fraction = range / pow;\n\n        double niceFraction;\n        if (round) {\n            if (fraction &lt; 1.5) {\n                niceFraction = 1;\n            } else if (fraction &lt; 3) {\n                niceFraction = 2;\n            } else if (fraction &lt; 7) {\n                niceFraction = 5;\n            } else {\n                niceFraction = 10;\n            }\n        } else {\n            if (fraction &lt;= 1) {\n                niceFraction = 1;\n            } else if (fraction &lt;= 2) {\n                niceFraction = 2;\n            } else if (fraction &lt;= 5) {\n                niceFraction = 5;\n            } else {\n                niceFraction = 10;\n            }\n        }\n\n        return niceFraction * pow;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1149105,"reputation":81,"user_id":1131197,"display_name":"Kai Stra&#223;mann"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1440591016,"creation_date":1440591016,"answer_id":32226285,"question_id":8506881,"body_markdown":"This is the Swift version:\r\n\r\n    class NiceScale {\r\n        private var minPoint: Double\r\n        private var maxPoint: Double\r\n        private var maxTicks = 10\r\n        private(set) var tickSpacing: Double = 0\r\n        private(set) var range: Double = 0\r\n        private(set) var niceMin: Double = 0\r\n        private(set) var niceMax: Double = 0\r\n    \r\n        init(min: Double, max: Double) {\r\n            minPoint = min\r\n            maxPoint = max\r\n            calculate()\r\n        }\r\n    \r\n        func setMinMaxPoints(min: Double, max: Double) {\r\n            minPoint = min\r\n            maxPoint = max\r\n            calculate()\r\n        }\r\n    \r\n        private func calculate() {\r\n            range = niceNum(maxPoint - minPoint, round: false)\r\n            tickSpacing = niceNum(range / Double((maxTicks - 1)), round: true)\r\n            niceMin = floor(minPoint / tickSpacing) * tickSpacing\r\n            niceMax = floor(maxPoint / tickSpacing) * tickSpacing\r\n        }\r\n    \r\n        private func niceNum(range: Double, round: Bool) -&gt; Double {\r\n            let exponent = floor(log10(range))\r\n            let fraction = range / pow(10, exponent)\r\n            let niceFraction: Double\r\n        \r\n            if round {\r\n                if fraction &lt;= 1.5 {\r\n                    niceFraction = 1\r\n                } else if fraction &lt;= 3 {\r\n                    niceFraction = 2\r\n                } else if fraction &lt;= 7 {\r\n                    niceFraction = 5\r\n                } else {\r\n                    niceFraction = 10\r\n                }\r\n            } else {\r\n                if fraction &lt;= 1 {\r\n                    niceFraction = 1\r\n                } else if fraction &lt;= 2 {\r\n                    niceFraction = 2\r\n                } else if fraction &lt;= 5 {\r\n                    niceFraction = 5\r\n                } else {\r\n                    niceFraction = 10\r\n                }\r\n            }\r\n        \r\n            return niceFraction * pow(10, exponent)\r\n        }\r\n    }\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>This is the Swift version:</p>\n\n<pre><code>class NiceScale {\n    private var minPoint: Double\n    private var maxPoint: Double\n    private var maxTicks = 10\n    private(set) var tickSpacing: Double = 0\n    private(set) var range: Double = 0\n    private(set) var niceMin: Double = 0\n    private(set) var niceMax: Double = 0\n\n    init(min: Double, max: Double) {\n        minPoint = min\n        maxPoint = max\n        calculate()\n    }\n\n    func setMinMaxPoints(min: Double, max: Double) {\n        minPoint = min\n        maxPoint = max\n        calculate()\n    }\n\n    private func calculate() {\n        range = niceNum(maxPoint - minPoint, round: false)\n        tickSpacing = niceNum(range / Double((maxTicks - 1)), round: true)\n        niceMin = floor(minPoint / tickSpacing) * tickSpacing\n        niceMax = floor(maxPoint / tickSpacing) * tickSpacing\n    }\n\n    private func niceNum(range: Double, round: Bool) -&gt; Double {\n        let exponent = floor(log10(range))\n        let fraction = range / pow(10, exponent)\n        let niceFraction: Double\n\n        if round {\n            if fraction &lt;= 1.5 {\n                niceFraction = 1\n            } else if fraction &lt;= 3 {\n                niceFraction = 2\n            } else if fraction &lt;= 7 {\n                niceFraction = 5\n            } else {\n                niceFraction = 10\n            }\n        } else {\n            if fraction &lt;= 1 {\n                niceFraction = 1\n            } else if fraction &lt;= 2 {\n                niceFraction = 2\n            } else if fraction &lt;= 5 {\n                niceFraction = 5\n            } else {\n                niceFraction = 10\n            }\n        }\n\n        return niceFraction * pow(10, exponent)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5105149,"reputation":195,"user_id":4093439,"accept_rate":86,"display_name":"uqji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468554390,"creation_date":1468554390,"answer_id":38387557,"question_id":8506881,"body_markdown":"This is the VB.NET version.\r\n\r\n    Public Class NiceScale\r\n\r\n    Private minPoint As Double\r\n    Private maxPoint As Double\r\n    Private maxTicks As Double = 10\r\n    Private tickSpacing\r\n    Private range As Double\r\n    Private niceMin As Double\r\n    Private niceMax As Double\r\n\r\n    Public Sub New(min As Double, max As Double)\r\n        minPoint = min\r\n        maxPoint = max\r\n        calculate()\r\n    End Sub\r\n\r\n    Private Sub calculate()\r\n        range = niceNum(maxPoint - minPoint, False)\r\n        tickSpacing = niceNum(range / (maxTicks - 1), True)\r\n        niceMin = Math.Floor(minPoint / tickSpacing) * tickSpacing\r\n        niceMax = Math.Ceiling(maxPoint / tickSpacing) * tickSpacing\r\n    End Sub\r\n\r\n    Private Function niceNum(range As Double, round As Boolean) As Double\r\n        Dim exponent As Double &#39;/** exponent of range */\r\n        Dim fraction As Double &#39;/** fractional part of range */\r\n        Dim niceFraction As Double &#39;/** nice, rounded fraction */\r\n\r\n        exponent = Math.Floor(Math.Log10(range))\r\n        fraction = range / Math.Pow(10, exponent)\r\n\r\n        If round Then\r\n            If (fraction &lt; 1.5) Then\r\n                niceFraction = 1\r\n            ElseIf (fraction &lt; 3) Then\r\n                niceFraction = 2\r\n            ElseIf (fraction &lt; 7) Then\r\n                niceFraction = 5\r\n            Else\r\n                niceFraction = 10\r\n            End If\r\n        Else\r\n            If (fraction &lt;= 1) Then\r\n                niceFraction = 1\r\n            ElseIf (fraction &lt;= 2) Then\r\n                niceFraction = 2\r\n            ElseIf (fraction &lt;= 5) Then\r\n                niceFraction = 5\r\n            Else\r\n                niceFraction = 10\r\n            End If\r\n        End If\r\n\r\n        Return niceFraction * Math.Pow(10, exponent)\r\n    End Function\r\n\r\n    Public Sub setMinMaxPoints(minPoint As Double, maxPoint As Double)\r\n        minPoint = minPoint\r\n        maxPoint = maxPoint\r\n        calculate()\r\n    End Sub\r\n\r\n    Public Sub setMaxTicks(maxTicks As Double)\r\n        maxTicks = maxTicks\r\n        calculate()\r\n    End Sub\r\n\r\n    Public Function getTickSpacing() As Double\r\n        Return tickSpacing\r\n    End Function\r\n\r\n    Public Function getNiceMin() As Double\r\n        Return niceMin\r\n    End Function\r\n\r\n    Public Function getNiceMax() As Double\r\n        Return niceMax\r\n    End Function\r\n\r\n    End Class\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>This is the VB.NET version.</p>\n\n<pre><code>Public Class NiceScale\n\nPrivate minPoint As Double\nPrivate maxPoint As Double\nPrivate maxTicks As Double = 10\nPrivate tickSpacing\nPrivate range As Double\nPrivate niceMin As Double\nPrivate niceMax As Double\n\nPublic Sub New(min As Double, max As Double)\n    minPoint = min\n    maxPoint = max\n    calculate()\nEnd Sub\n\nPrivate Sub calculate()\n    range = niceNum(maxPoint - minPoint, False)\n    tickSpacing = niceNum(range / (maxTicks - 1), True)\n    niceMin = Math.Floor(minPoint / tickSpacing) * tickSpacing\n    niceMax = Math.Ceiling(maxPoint / tickSpacing) * tickSpacing\nEnd Sub\n\nPrivate Function niceNum(range As Double, round As Boolean) As Double\n    Dim exponent As Double '/** exponent of range */\n    Dim fraction As Double '/** fractional part of range */\n    Dim niceFraction As Double '/** nice, rounded fraction */\n\n    exponent = Math.Floor(Math.Log10(range))\n    fraction = range / Math.Pow(10, exponent)\n\n    If round Then\n        If (fraction &lt; 1.5) Then\n            niceFraction = 1\n        ElseIf (fraction &lt; 3) Then\n            niceFraction = 2\n        ElseIf (fraction &lt; 7) Then\n            niceFraction = 5\n        Else\n            niceFraction = 10\n        End If\n    Else\n        If (fraction &lt;= 1) Then\n            niceFraction = 1\n        ElseIf (fraction &lt;= 2) Then\n            niceFraction = 2\n        ElseIf (fraction &lt;= 5) Then\n            niceFraction = 5\n        Else\n            niceFraction = 10\n        End If\n    End If\n\n    Return niceFraction * Math.Pow(10, exponent)\nEnd Function\n\nPublic Sub setMinMaxPoints(minPoint As Double, maxPoint As Double)\n    minPoint = minPoint\n    maxPoint = maxPoint\n    calculate()\nEnd Sub\n\nPublic Sub setMaxTicks(maxTicks As Double)\n    maxTicks = maxTicks\n    calculate()\nEnd Sub\n\nPublic Function getTickSpacing() As Double\n    Return tickSpacing\nEnd Function\n\nPublic Function getNiceMin() As Double\n    Return niceMin\nEnd Function\n\nPublic Function getNiceMax() As Double\n    Return niceMax\nEnd Function\n\nEnd Class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1541624,"reputation":1296,"user_id":1436136,"accept_rate":78,"display_name":"Glenn Gordon"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1479306612,"creation_date":1470065875,"answer_id":38702859,"question_id":8506881,"body_markdown":"Here is a javascript version:\r\n\r\n    var minPoint;\r\n    var maxPoint;\r\n    var maxTicks = 10;\r\n    var tickSpacing;\r\n    var range;\r\n    var niceMin;\r\n    var niceMax;\r\n\r\n    /**\r\n     * Instantiates a new instance of the NiceScale class.\r\n     *\r\n     *  min the minimum data point on the axis\r\n     *  max the maximum data point on the axis\r\n     */\r\n    function niceScale( min, max) {\r\n        minPoint = min;\r\n        maxPoint = max;\r\n        calculate();\r\n        return {\r\n            tickSpacing: tickSpacing,\r\n            niceMinimum: niceMin,\r\n            niceMaximum: niceMax\r\n        };\r\n    }\r\n\r\n    \r\n\r\n    /**\r\n     * Calculate and update values for tick spacing and nice\r\n     * minimum and maximum data points on the axis.\r\n     */\r\n    function calculate() {\r\n        range = niceNum(maxPoint - minPoint, false);\r\n        tickSpacing = niceNum(range / (maxTicks - 1), true);\r\n        niceMin =\r\n          Math.floor(minPoint / tickSpacing) * tickSpacing;\r\n        niceMax =\r\n          Math.ceil(maxPoint / tickSpacing) * tickSpacing;\r\n    }\r\n\r\n    /**\r\n     * Returns a &quot;nice&quot; number approximately equal to range Rounds\r\n     * the number if round = true Takes the ceiling if round = false.\r\n     *\r\n     *  localRange the data range\r\n     *  round whether to round the result\r\n     *  a &quot;nice&quot; number to be used for the data range\r\n     */\r\n    function niceNum( localRange,  round) {\r\n        var exponent; /** exponent of localRange */\r\n        var fraction; /** fractional part of localRange */\r\n        var niceFraction; /** nice, rounded fraction */\r\n\r\n        exponent = Math.floor(Math.log10(localRange));\r\n        fraction = localRange / Math.pow(10, exponent);\r\n\r\n        if (round) {\r\n            if (fraction &lt; 1.5)\r\n                niceFraction = 1;\r\n            else if (fraction &lt; 3)\r\n                niceFraction = 2;\r\n            else if (fraction &lt; 7)\r\n                niceFraction = 5;\r\n            else\r\n                niceFraction = 10;\r\n        } else {\r\n            if (fraction &lt;= 1)\r\n                niceFraction = 1;\r\n            else if (fraction &lt;= 2)\r\n                niceFraction = 2;\r\n            else if (fraction &lt;= 5)\r\n                niceFraction = 5;\r\n            else\r\n                niceFraction = 10;\r\n        }\r\n\r\n        return niceFraction * Math.pow(10, exponent);\r\n    }\r\n\r\n    /**\r\n     * Sets the minimum and maximum data points for the axis.\r\n     *\r\n     *  minPoint the minimum data point on the axis\r\n     *  maxPoint the maximum data point on the axis\r\n     */\r\n    function setMinMaxPoints( localMinPoint,  localMaxPoint) {\r\n        minPoint = localMinPoint;\r\n        maxPoint = localMaxoint;\r\n        calculate();\r\n    }\r\n\r\n    /**\r\n     * Sets maximum number of tick marks we&#39;re comfortable with\r\n     *\r\n     *  maxTicks the maximum number of tick marks for the axis\r\n     */\r\n    function setMaxTicks(localMaxTicks) {\r\n        maxTicks = localMaxTicks;\r\n        calculate();\r\n    }\r\n    \r\nEnjoy!","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here is a javascript version:</p>\n\n<pre><code>var minPoint;\nvar maxPoint;\nvar maxTicks = 10;\nvar tickSpacing;\nvar range;\nvar niceMin;\nvar niceMax;\n\n/**\n * Instantiates a new instance of the NiceScale class.\n *\n *  min the minimum data point on the axis\n *  max the maximum data point on the axis\n */\nfunction niceScale( min, max) {\n    minPoint = min;\n    maxPoint = max;\n    calculate();\n    return {\n        tickSpacing: tickSpacing,\n        niceMinimum: niceMin,\n        niceMaximum: niceMax\n    };\n}\n\n\n\n/**\n * Calculate and update values for tick spacing and nice\n * minimum and maximum data points on the axis.\n */\nfunction calculate() {\n    range = niceNum(maxPoint - minPoint, false);\n    tickSpacing = niceNum(range / (maxTicks - 1), true);\n    niceMin =\n      Math.floor(minPoint / tickSpacing) * tickSpacing;\n    niceMax =\n      Math.ceil(maxPoint / tickSpacing) * tickSpacing;\n}\n\n/**\n * Returns a \"nice\" number approximately equal to range Rounds\n * the number if round = true Takes the ceiling if round = false.\n *\n *  localRange the data range\n *  round whether to round the result\n *  a \"nice\" number to be used for the data range\n */\nfunction niceNum( localRange,  round) {\n    var exponent; /** exponent of localRange */\n    var fraction; /** fractional part of localRange */\n    var niceFraction; /** nice, rounded fraction */\n\n    exponent = Math.floor(Math.log10(localRange));\n    fraction = localRange / Math.pow(10, exponent);\n\n    if (round) {\n        if (fraction &lt; 1.5)\n            niceFraction = 1;\n        else if (fraction &lt; 3)\n            niceFraction = 2;\n        else if (fraction &lt; 7)\n            niceFraction = 5;\n        else\n            niceFraction = 10;\n    } else {\n        if (fraction &lt;= 1)\n            niceFraction = 1;\n        else if (fraction &lt;= 2)\n            niceFraction = 2;\n        else if (fraction &lt;= 5)\n            niceFraction = 5;\n        else\n            niceFraction = 10;\n    }\n\n    return niceFraction * Math.pow(10, exponent);\n}\n\n/**\n * Sets the minimum and maximum data points for the axis.\n *\n *  minPoint the minimum data point on the axis\n *  maxPoint the maximum data point on the axis\n */\nfunction setMinMaxPoints( localMinPoint,  localMaxPoint) {\n    minPoint = localMinPoint;\n    maxPoint = localMaxoint;\n    calculate();\n}\n\n/**\n * Sets maximum number of tick marks we're comfortable with\n *\n *  maxTicks the maximum number of tick marks for the axis\n */\nfunction setMaxTicks(localMaxTicks) {\n    maxTicks = localMaxTicks;\n    calculate();\n}\n</code></pre>\n\n<p>Enjoy!</p>\n"},{"tags":[],"owner":{"account_id":114987,"reputation":4174,"user_id":282901,"accept_rate":40,"display_name":"Pierre"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1480738225,"creation_date":1480738225,"answer_id":40944141,"question_id":8506881,"body_markdown":"Here&#39;s the C++ version. As a bonus you get a function that returns the minimum number of decimal points to display the tick labels on the axis.\r\n\r\nThe header file:\r\n\r\n\tclass NiceScale \r\n\t{\tpublic:\r\n\t\r\n\t\tfloat minPoint;\r\n\t\tfloat maxPoint;\r\n\t\tfloat maxTicks;\r\n\t\tfloat tickSpacing;\r\n\t\tfloat range;\r\n\t\tfloat niceMin;\r\n\t\tfloat niceMax;\r\n\t\r\n\t\tpublic:\r\n\t\tNiceScale()\r\n\t\t{\tmaxTicks = 10;\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t* Instantiates a new instance of the NiceScale class.\r\n\t\t*\r\n\t\t* @param min the minimum data point on the axis\r\n\t\t* @param max the maximum data point on the axis\r\n\t\t*/\r\n\t\tNiceScale(float min, float max) \r\n\t\t{\tminPoint = min;\r\n\t\t\tmaxPoint = max;\r\n\t\t\tcalculate();\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t* Calculate and update values for tick spacing and nice\r\n\t\t* minimum and maximum data points on the axis.\r\n\t\t*/\r\n\t\tvoid calculate() ;\r\n\t\r\n\t\t/**\r\n\t\t* Returns a &quot;nice&quot; number approximately equal to range Rounds\r\n\t\t* the number if round = true Takes the ceiling if round = false.\r\n\t\t*\r\n\t\t* @param range the data range\r\n\t\t* @param round whether to round the result\r\n\t\t* @return a &quot;nice&quot; number to be used for the data range\r\n\t\t*/\r\n\t\tfloat niceNum(float range, boolean round) ;\r\n\t\r\n\t\t/**\r\n\t\t* Sets the minimum and maximum data points for the axis.\r\n\t\t*\r\n\t\t* @param minPoint the minimum data point on the axis\r\n\t\t* @param maxPoint the maximum data point on the axis\r\n\t\t*/\r\n\t\tvoid setMinMaxPoints(float minPoint, float maxPoint) ;\r\n\t\r\n\t\t/**\r\n\t\t* Sets maximum number of tick marks we&#39;re comfortable with\r\n\t\t*\r\n\t\t* @param maxTicks the maximum number of tick marks for the axis\r\n\t\t*/\r\n\t\tvoid setMaxTicks(float maxTicks) ;\r\n\t\tint decimals(void);\r\n\t};\r\n\r\nAnd the CPP file:\r\n\r\n\t/**\r\n\t* Calculate and update values for tick spacing and nice\r\n\t* minimum and maximum data points on the axis.\r\n\t*/\r\n\tvoid NiceScale::calculate() \r\n\t{\r\n\t\trange = niceNum(maxPoint - minPoint, false);\r\n\t\ttickSpacing = niceNum(range / (maxTicks - 1), true);\r\n\t\tniceMin = floor(minPoint / tickSpacing) * tickSpacing;\r\n\t\tniceMax = ceil(maxPoint / tickSpacing) * tickSpacing;\r\n\t}\r\n\t\r\n\t/**\r\n\t* Returns a &quot;nice&quot; number approximately equal to range \r\n\t  Rounds the number if round = true Takes the ceiling if round = false.\r\n\t*\r\n\t* @param range the data range\r\n\t* @param round whether to round the result\r\n\t* @return a &quot;nice&quot; number to be used for the data range\r\n\t*/\r\n\tfloat NiceScale::niceNum(float range, boolean round) \r\n\t{\tfloat exponent; /** exponent of range */\r\n\t\tfloat fraction; /** fractional part of range */\r\n\t\tfloat niceFraction; /** nice, rounded fraction */\r\n\t\r\n\t\texponent = floor(log10(range));\r\n\t\tfraction = range / pow(10.f, exponent);\r\n\t\r\n\t\tif (round) \r\n\t\t{\tif (fraction &lt; 1.5)\r\n\t\t\t\tniceFraction = 1;\r\n\t\t\telse if (fraction &lt; 3)\r\n\t\t\t\tniceFraction = 2;\r\n\t\t\telse if (fraction &lt; 7)\r\n\t\t\t\tniceFraction = 5;\r\n\t\t\telse\r\n\t\t\t\tniceFraction = 10;\r\n\t\t} \r\n\t\telse \r\n\t\t{\tif (fraction &lt;= 1)\r\n\t\t\t\tniceFraction = 1;\r\n\t\t\telse if (fraction &lt;= 2)\r\n\t\t\t\tniceFraction = 2;\r\n\t\t\telse if (fraction &lt;= 5)\r\n\t\t\t\tniceFraction = 5;\r\n\t\t\telse\r\n\t\t\t\tniceFraction = 10;\r\n\t\t}\r\n\t\r\n\t\treturn niceFraction * pow(10, exponent);\r\n\t}\r\n\t\r\n\t/**\r\n\t* Sets the minimum and maximum data points for the axis.\r\n\t*\r\n\t* @param minPoint the minimum data point on the axis\r\n\t* @param maxPoint the maximum data point on the axis\r\n\t*/\r\n\tvoid NiceScale::setMinMaxPoints(float minPoint, float maxPoint) \r\n\t{\r\n\t\tthis-&gt;minPoint = minPoint;\r\n\t\tthis-&gt;maxPoint = maxPoint;\r\n\t\tcalculate();\r\n\t}\r\n\t\r\n\t/**\r\n\t* Sets maximum number of tick marks we&#39;re comfortable with\r\n\t*\r\n\t* @param maxTicks the maximum number of tick marks for the axis\r\n\t*/\r\n\tvoid NiceScale::setMaxTicks(float maxTicks) \r\n\t{\r\n\t\tthis-&gt;maxTicks = maxTicks;\r\n\t\tcalculate();\r\n\t}\r\n\t\r\n    // minimum number of decimals in tick labels\r\n    // use in sprintf statement:\r\n    // sprintf(buf, &quot;%.*f&quot;, decimals(), tickValue);\r\n\tint NiceScale::decimals(void)\r\n\t{\r\n\t\tfloat logTickX = log10(tickSpacing);\r\n\t\tif(logTickX &gt;= 0)\r\n\t\t\treturn 0;\r\n\t\treturn (int)(abs(floor(logTickX)));\r\n\t}\r\n\t\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here's the C++ version. As a bonus you get a function that returns the minimum number of decimal points to display the tick labels on the axis.</p>\n\n<p>The header file:</p>\n\n<pre><code>class NiceScale \n{   public:\n\n    float minPoint;\n    float maxPoint;\n    float maxTicks;\n    float tickSpacing;\n    float range;\n    float niceMin;\n    float niceMax;\n\n    public:\n    NiceScale()\n    {   maxTicks = 10;\n    }\n\n    /**\n    * Instantiates a new instance of the NiceScale class.\n    *\n    * @param min the minimum data point on the axis\n    * @param max the maximum data point on the axis\n    */\n    NiceScale(float min, float max) \n    {   minPoint = min;\n        maxPoint = max;\n        calculate();\n    }\n\n    /**\n    * Calculate and update values for tick spacing and nice\n    * minimum and maximum data points on the axis.\n    */\n    void calculate() ;\n\n    /**\n    * Returns a \"nice\" number approximately equal to range Rounds\n    * the number if round = true Takes the ceiling if round = false.\n    *\n    * @param range the data range\n    * @param round whether to round the result\n    * @return a \"nice\" number to be used for the data range\n    */\n    float niceNum(float range, boolean round) ;\n\n    /**\n    * Sets the minimum and maximum data points for the axis.\n    *\n    * @param minPoint the minimum data point on the axis\n    * @param maxPoint the maximum data point on the axis\n    */\n    void setMinMaxPoints(float minPoint, float maxPoint) ;\n\n    /**\n    * Sets maximum number of tick marks we're comfortable with\n    *\n    * @param maxTicks the maximum number of tick marks for the axis\n    */\n    void setMaxTicks(float maxTicks) ;\n    int decimals(void);\n};\n</code></pre>\n\n<p>And the CPP file:</p>\n\n<pre><code>/**\n* Calculate and update values for tick spacing and nice\n* minimum and maximum data points on the axis.\n*/\nvoid NiceScale::calculate() \n{\n    range = niceNum(maxPoint - minPoint, false);\n    tickSpacing = niceNum(range / (maxTicks - 1), true);\n    niceMin = floor(minPoint / tickSpacing) * tickSpacing;\n    niceMax = ceil(maxPoint / tickSpacing) * tickSpacing;\n}\n\n/**\n* Returns a \"nice\" number approximately equal to range \n  Rounds the number if round = true Takes the ceiling if round = false.\n*\n* @param range the data range\n* @param round whether to round the result\n* @return a \"nice\" number to be used for the data range\n*/\nfloat NiceScale::niceNum(float range, boolean round) \n{   float exponent; /** exponent of range */\n    float fraction; /** fractional part of range */\n    float niceFraction; /** nice, rounded fraction */\n\n    exponent = floor(log10(range));\n    fraction = range / pow(10.f, exponent);\n\n    if (round) \n    {   if (fraction &lt; 1.5)\n            niceFraction = 1;\n        else if (fraction &lt; 3)\n            niceFraction = 2;\n        else if (fraction &lt; 7)\n            niceFraction = 5;\n        else\n            niceFraction = 10;\n    } \n    else \n    {   if (fraction &lt;= 1)\n            niceFraction = 1;\n        else if (fraction &lt;= 2)\n            niceFraction = 2;\n        else if (fraction &lt;= 5)\n            niceFraction = 5;\n        else\n            niceFraction = 10;\n    }\n\n    return niceFraction * pow(10, exponent);\n}\n\n/**\n* Sets the minimum and maximum data points for the axis.\n*\n* @param minPoint the minimum data point on the axis\n* @param maxPoint the maximum data point on the axis\n*/\nvoid NiceScale::setMinMaxPoints(float minPoint, float maxPoint) \n{\n    this-&gt;minPoint = minPoint;\n    this-&gt;maxPoint = maxPoint;\n    calculate();\n}\n\n/**\n* Sets maximum number of tick marks we're comfortable with\n*\n* @param maxTicks the maximum number of tick marks for the axis\n*/\nvoid NiceScale::setMaxTicks(float maxTicks) \n{\n    this-&gt;maxTicks = maxTicks;\n    calculate();\n}\n\n// minimum number of decimals in tick labels\n// use in sprintf statement:\n// sprintf(buf, \"%.*f\", decimals(), tickValue);\nint NiceScale::decimals(void)\n{\n    float logTickX = log10(tickSpacing);\n    if(logTickX &gt;= 0)\n        return 0;\n    return (int)(abs(floor(logTickX)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3823725,"reputation":2958,"user_id":3171100,"accept_rate":67,"display_name":"Chris Smith"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1505001079,"creation_date":1505001079,"answer_id":46136095,"question_id":8506881,"body_markdown":"Here it is in TypeScript!\r\n\r\n    /**\r\n     * Calculate and update values for tick spacing and nice\r\n     * minimum and maximum data points on the axis.\r\n     */\r\n    function calculateTicks(maxTicks: number, minPoint: number, maxPoint: number): [number, number, number] {\r\n    \tlet range = niceNum(maxPoint - minPoint, false);\r\n    \tlet tickSpacing = niceNum(range / (maxTicks - 1), true);\r\n    \tlet niceMin = Math.floor(minPoint / tickSpacing) * tickSpacing;\r\n    \tlet niceMax = Math.ceil(maxPoint / tickSpacing) * tickSpacing;\r\n    \tlet tickCount = range / tickSpacing;\r\n    \treturn [tickCount, niceMin, niceMax];\r\n    }\r\n    \r\n    /**\r\n     * Returns a &quot;nice&quot; number approximately equal to range Rounds\r\n     * the number if round = true Takes the ceiling if round = false.\r\n     *\r\n     * @param range the data range\r\n     * @param round whether to round the result\r\n     * @return a &quot;nice&quot; number to be used for the data range\r\n     */\r\n    function niceNum(range: number, round: boolean): number {\r\n    \tlet exponent: number;\r\n    \t/** exponent of range */\r\n    \tlet fraction: number;\r\n    \t/** fractional part of range */\r\n    \tlet niceFraction: number;\r\n    \t/** nice, rounded fraction */\r\n    \t\r\n    \texponent = Math.floor(Math.log10(range));\r\n    \tfraction = range / Math.pow(10, exponent);\r\n    \t\r\n    \tif (round) {\r\n    \t\tif (fraction &lt; 1.5)\r\n    \t\t\tniceFraction = 1;\r\n    \t\telse if (fraction &lt; 3)\r\n    \t\t\tniceFraction = 2;\r\n    \t\telse if (fraction &lt; 7)\r\n    \t\t\tniceFraction = 5;\r\n    \t\telse\r\n    \t\t\tniceFraction = 10;\r\n    \t} else {\r\n    \t\tif (fraction &lt;= 1)\r\n    \t\t\tniceFraction = 1;\r\n    \t\telse if (fraction &lt;= 2)\r\n    \t\t\tniceFraction = 2;\r\n    \t\telse if (fraction &lt;= 5)\r\n    \t\t\tniceFraction = 5;\r\n    \t\telse\r\n    \t\t\tniceFraction = 10;\r\n    \t}\r\n    \t\r\n    \treturn niceFraction * Math.pow(10, exponent);\r\n    }","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here it is in TypeScript!</p>\n\n<pre><code>/**\n * Calculate and update values for tick spacing and nice\n * minimum and maximum data points on the axis.\n */\nfunction calculateTicks(maxTicks: number, minPoint: number, maxPoint: number): [number, number, number] {\n    let range = niceNum(maxPoint - minPoint, false);\n    let tickSpacing = niceNum(range / (maxTicks - 1), true);\n    let niceMin = Math.floor(minPoint / tickSpacing) * tickSpacing;\n    let niceMax = Math.ceil(maxPoint / tickSpacing) * tickSpacing;\n    let tickCount = range / tickSpacing;\n    return [tickCount, niceMin, niceMax];\n}\n\n/**\n * Returns a \"nice\" number approximately equal to range Rounds\n * the number if round = true Takes the ceiling if round = false.\n *\n * @param range the data range\n * @param round whether to round the result\n * @return a \"nice\" number to be used for the data range\n */\nfunction niceNum(range: number, round: boolean): number {\n    let exponent: number;\n    /** exponent of range */\n    let fraction: number;\n    /** fractional part of range */\n    let niceFraction: number;\n    /** nice, rounded fraction */\n\n    exponent = Math.floor(Math.log10(range));\n    fraction = range / Math.pow(10, exponent);\n\n    if (round) {\n        if (fraction &lt; 1.5)\n            niceFraction = 1;\n        else if (fraction &lt; 3)\n            niceFraction = 2;\n        else if (fraction &lt; 7)\n            niceFraction = 5;\n        else\n            niceFraction = 10;\n    } else {\n        if (fraction &lt;= 1)\n            niceFraction = 1;\n        else if (fraction &lt;= 2)\n            niceFraction = 2;\n        else if (fraction &lt;= 5)\n            niceFraction = 5;\n        else\n            niceFraction = 10;\n    }\n\n    return niceFraction * Math.pow(10, exponent);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4279248,"reputation":5764,"user_id":3499145,"accept_rate":80,"display_name":"Algar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510084965,"creation_date":1510084965,"answer_id":47166511,"question_id":8506881,"body_markdown":"Here&#39;s the Kotlin version!\r\n\r\n    import java.lang.Math.*\r\n\r\n    /**\r\n     * Instantiates a new instance of the NiceScale class.\r\n     *\r\n     * @param min Double The minimum data point.\r\n     * @param max Double The maximum data point.\r\n     */\r\n    class NiceScale(private var minPoint: Double, private var maxPoint: Double) {\r\n    \r\n        private var maxTicks = 15.0\r\n        private var range: Double = 0.0\r\n        var niceMin: Double = 0.0\r\n        var niceMax: Double = 0.0\r\n        var tickSpacing: Double = 0.0\r\n    \r\n        init {\r\n            calculate()\r\n        }\r\n    \r\n        /**\r\n         * Calculate and update values for tick spacing and nice\r\n         * minimum and maximum data points on the axis.\r\n         */\r\n        private fun calculate() {\r\n            range = niceNum(maxPoint - minPoint, false)\r\n            tickSpacing = niceNum(range / (maxTicks - 1), true)\r\n            niceMin = floor(minPoint / tickSpacing) * tickSpacing\r\n            niceMax = ceil(maxPoint / tickSpacing) * tickSpacing\r\n        }\r\n    \r\n        /**\r\n         * Returns a &quot;nice&quot; number approximately equal to range. Rounds\r\n         * the number if round = true. Takes the ceiling if round = false.\r\n         *\r\n         * @param range Double The data range.\r\n         * @param round Boolean Whether to round the result.\r\n         * @return Double A &quot;nice&quot; number to be used for the data range.\r\n         */\r\n        private fun niceNum(range: Double, round: Boolean): Double {\r\n            /** Exponent of range  */\r\n            val exponent: Double = floor(log10(range))\r\n            /** Fractional part of range  */\r\n            val fraction: Double\r\n            /** Nice, rounded fraction  */\r\n            val niceFraction: Double\r\n    \r\n            fraction = range / pow(10.0, exponent)\r\n    \r\n            niceFraction = if (round) {\r\n                when {\r\n                    fraction &lt; 1.5 -&gt; 1.0\r\n                    fraction &lt; 3 -&gt; 2.0\r\n                    fraction &lt; 7 -&gt; 5.0\r\n                    else -&gt; 10.0\r\n                }\r\n            } else {\r\n                when {\r\n                    fraction &lt;= 1 -&gt; 1.0\r\n                    fraction &lt;= 2 -&gt; 2.0\r\n                    fraction &lt;= 5 -&gt; 5.0\r\n                    else -&gt; 10.0\r\n                }\r\n            }\r\n    \r\n            return niceFraction * pow(10.0, exponent)\r\n        }\r\n    \r\n        /**\r\n         * Sets the minimum and maximum data points.\r\n         *\r\n         * @param minPoint Double The minimum data point.\r\n         * @param maxPoint Double The maximum data point.\r\n         */\r\n        fun setMinMaxPoints(minPoint: Double, maxPoint: Double) {\r\n            this.minPoint = minPoint\r\n            this.maxPoint = maxPoint\r\n            calculate()\r\n        }\r\n    \r\n        /**\r\n         * Sets maximum number of tick marks we&#39;re comfortable with.\r\n         *\r\n         * @param maxTicks Double The maximum number of tick marks.\r\n         */\r\n        fun setMaxTicks(maxTicks: Double) {\r\n            this.maxTicks = maxTicks\r\n            calculate()\r\n        }\r\n    }","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here's the Kotlin version!</p>\n\n<pre><code>import java.lang.Math.*\n\n/**\n * Instantiates a new instance of the NiceScale class.\n *\n * @param min Double The minimum data point.\n * @param max Double The maximum data point.\n */\nclass NiceScale(private var minPoint: Double, private var maxPoint: Double) {\n\n    private var maxTicks = 15.0\n    private var range: Double = 0.0\n    var niceMin: Double = 0.0\n    var niceMax: Double = 0.0\n    var tickSpacing: Double = 0.0\n\n    init {\n        calculate()\n    }\n\n    /**\n     * Calculate and update values for tick spacing and nice\n     * minimum and maximum data points on the axis.\n     */\n    private fun calculate() {\n        range = niceNum(maxPoint - minPoint, false)\n        tickSpacing = niceNum(range / (maxTicks - 1), true)\n        niceMin = floor(minPoint / tickSpacing) * tickSpacing\n        niceMax = ceil(maxPoint / tickSpacing) * tickSpacing\n    }\n\n    /**\n     * Returns a \"nice\" number approximately equal to range. Rounds\n     * the number if round = true. Takes the ceiling if round = false.\n     *\n     * @param range Double The data range.\n     * @param round Boolean Whether to round the result.\n     * @return Double A \"nice\" number to be used for the data range.\n     */\n    private fun niceNum(range: Double, round: Boolean): Double {\n        /** Exponent of range  */\n        val exponent: Double = floor(log10(range))\n        /** Fractional part of range  */\n        val fraction: Double\n        /** Nice, rounded fraction  */\n        val niceFraction: Double\n\n        fraction = range / pow(10.0, exponent)\n\n        niceFraction = if (round) {\n            when {\n                fraction &lt; 1.5 -&gt; 1.0\n                fraction &lt; 3 -&gt; 2.0\n                fraction &lt; 7 -&gt; 5.0\n                else -&gt; 10.0\n            }\n        } else {\n            when {\n                fraction &lt;= 1 -&gt; 1.0\n                fraction &lt;= 2 -&gt; 2.0\n                fraction &lt;= 5 -&gt; 5.0\n                else -&gt; 10.0\n            }\n        }\n\n        return niceFraction * pow(10.0, exponent)\n    }\n\n    /**\n     * Sets the minimum and maximum data points.\n     *\n     * @param minPoint Double The minimum data point.\n     * @param maxPoint Double The maximum data point.\n     */\n    fun setMinMaxPoints(minPoint: Double, maxPoint: Double) {\n        this.minPoint = minPoint\n        this.maxPoint = maxPoint\n        calculate()\n    }\n\n    /**\n     * Sets maximum number of tick marks we're comfortable with.\n     *\n     * @param maxTicks Double The maximum number of tick marks.\n     */\n    fun setMaxTicks(maxTicks: Double) {\n        this.maxTicks = maxTicks\n        calculate()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2360496,"reputation":7506,"user_id":2067264,"accept_rate":67,"display_name":"Drunken Daddy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1545027895,"creation_date":1545027895,"answer_id":53809910,"question_id":8506881,"body_markdown":"Here&#39;a better organized C# code.\r\n\r\n    public class NiceScale\r\n    {\r\n\r\n        public double NiceMin { get; set; }\r\n        public double NiceMax { get; set; }\r\n        public double TickSpacing { get; private set; }\r\n\r\n        private double _minPoint;\r\n        private double _maxPoint;\r\n        private double _maxTicks = 5;\r\n        private double _range;\r\n\r\n        /**\r\n         * Instantiates a new instance of the NiceScale class.\r\n         *\r\n         * @param min the minimum data point on the axis\r\n         * @param max the maximum data point on the axis\r\n         */\r\n        public NiceScale(double min, double max)\r\n        {\r\n            _minPoint = min;\r\n            _maxPoint = max;\r\n            Calculate();\r\n        }\r\n\r\n        /**\r\n         * Calculate and update values for tick spacing and nice\r\n         * minimum and maximum data points on the axis.\r\n         */\r\n        private void Calculate()\r\n        {\r\n            _range = NiceNum(_maxPoint - _minPoint, false);\r\n            TickSpacing = NiceNum(_range / (_maxTicks - 1), true);\r\n            NiceMin = Math.Floor(_minPoint / TickSpacing) * TickSpacing;\r\n            NiceMax = Math.Ceiling(_maxPoint / TickSpacing) * TickSpacing;\r\n        }\r\n\r\n        /**\r\n         * Returns a &quot;nice&quot; number approximately equal to range Rounds\r\n         * the number if round = true Takes the ceiling if round = false.\r\n         *\r\n         * @param range the data range\r\n         * @param round whether to round the result\r\n         * @return a &quot;nice&quot; number to be used for the data range\r\n         */\r\n        private double NiceNum(double range, bool round)\r\n        {\r\n            double exponent; /** exponent of range */\r\n            double fraction; /** fractional part of range */\r\n            double niceFraction; /** nice, rounded fraction */\r\n\r\n            exponent = Math.Floor(Math.Log10(range));\r\n            fraction = range / Math.Pow(10, exponent);\r\n\r\n            if (round) {\r\n                if (fraction &lt; 1.5)\r\n                    niceFraction = 1;\r\n                else if (fraction &lt; 3)\r\n                    niceFraction = 2;\r\n                else if (fraction &lt; 7)\r\n                    niceFraction = 5;\r\n                else\r\n                    niceFraction = 10;\r\n            } else {\r\n                if (fraction &lt;= 1)\r\n                    niceFraction = 1;\r\n                else if (fraction &lt;= 2)\r\n                    niceFraction = 2;\r\n                else if (fraction &lt;= 5)\r\n                    niceFraction = 5;\r\n                else\r\n                    niceFraction = 10;\r\n            }\r\n\r\n            return niceFraction * Math.Pow(10, exponent);\r\n        }\r\n\r\n        /**\r\n         * Sets the minimum and maximum data points for the axis.\r\n         *\r\n         * @param minPoint the minimum data point on the axis\r\n         * @param maxPoint the maximum data point on the axis\r\n         */\r\n        public void SetMinMaxPoints(double minPoint, double maxPoint)\r\n        {\r\n            _minPoint = minPoint;\r\n            _maxPoint = maxPoint;\r\n            Calculate();\r\n        }\r\n\r\n        /**\r\n         * Sets maximum number of tick marks we&#39;re comfortable with\r\n         *\r\n         * @param maxTicks the maximum number of tick marks for the axis\r\n         */\r\n        public void SetMaxTicks(double maxTicks)\r\n        {\r\n            _maxTicks = maxTicks;\r\n            Calculate();\r\n        }\r\n    }","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here'a better organized C# code.</p>\n\n<pre><code>public class NiceScale\n{\n\n    public double NiceMin { get; set; }\n    public double NiceMax { get; set; }\n    public double TickSpacing { get; private set; }\n\n    private double _minPoint;\n    private double _maxPoint;\n    private double _maxTicks = 5;\n    private double _range;\n\n    /**\n     * Instantiates a new instance of the NiceScale class.\n     *\n     * @param min the minimum data point on the axis\n     * @param max the maximum data point on the axis\n     */\n    public NiceScale(double min, double max)\n    {\n        _minPoint = min;\n        _maxPoint = max;\n        Calculate();\n    }\n\n    /**\n     * Calculate and update values for tick spacing and nice\n     * minimum and maximum data points on the axis.\n     */\n    private void Calculate()\n    {\n        _range = NiceNum(_maxPoint - _minPoint, false);\n        TickSpacing = NiceNum(_range / (_maxTicks - 1), true);\n        NiceMin = Math.Floor(_minPoint / TickSpacing) * TickSpacing;\n        NiceMax = Math.Ceiling(_maxPoint / TickSpacing) * TickSpacing;\n    }\n\n    /**\n     * Returns a \"nice\" number approximately equal to range Rounds\n     * the number if round = true Takes the ceiling if round = false.\n     *\n     * @param range the data range\n     * @param round whether to round the result\n     * @return a \"nice\" number to be used for the data range\n     */\n    private double NiceNum(double range, bool round)\n    {\n        double exponent; /** exponent of range */\n        double fraction; /** fractional part of range */\n        double niceFraction; /** nice, rounded fraction */\n\n        exponent = Math.Floor(Math.Log10(range));\n        fraction = range / Math.Pow(10, exponent);\n\n        if (round) {\n            if (fraction &lt; 1.5)\n                niceFraction = 1;\n            else if (fraction &lt; 3)\n                niceFraction = 2;\n            else if (fraction &lt; 7)\n                niceFraction = 5;\n            else\n                niceFraction = 10;\n        } else {\n            if (fraction &lt;= 1)\n                niceFraction = 1;\n            else if (fraction &lt;= 2)\n                niceFraction = 2;\n            else if (fraction &lt;= 5)\n                niceFraction = 5;\n            else\n                niceFraction = 10;\n        }\n\n        return niceFraction * Math.Pow(10, exponent);\n    }\n\n    /**\n     * Sets the minimum and maximum data points for the axis.\n     *\n     * @param minPoint the minimum data point on the axis\n     * @param maxPoint the maximum data point on the axis\n     */\n    public void SetMinMaxPoints(double minPoint, double maxPoint)\n    {\n        _minPoint = minPoint;\n        _maxPoint = maxPoint;\n        Calculate();\n    }\n\n    /**\n     * Sets maximum number of tick marks we're comfortable with\n     *\n     * @param maxTicks the maximum number of tick marks for the axis\n     */\n    public void SetMaxTicks(double maxTicks)\n    {\n        _maxTicks = maxTicks;\n        Calculate();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1968575,"reputation":3499,"user_id":1768179,"accept_rate":50,"display_name":"Alexander  Danilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558824208,"creation_date":1552859081,"answer_id":55212228,"question_id":8506881,"body_markdown":"Much **BETTER** and **SIMPLER** algorythm on swift. Size is fixed, values are not &quot;hardcoded&quot;:\r\n\r\n    class NiceNumbers {\r\n        /// Returns nice range of specified size. Result min &lt;= min argument, result max &gt;= max argument.\r\n        static func getRange(forMin minInt: Int, max maxInt: Int, ofSize size: Int) -&gt; [Int] {\r\n            let niceMinInt = getMinCloseToZero(min: minInt, max: maxInt)\r\n            let step = Double(maxInt - niceMinInt) / Double(size - 1)\r\n            let niceStepInt = Int(get(for: step, min: false))\r\n    \r\n            var result = [Int]()\r\n            result.append(niceMinInt)\r\n            for i in 1...size - 1 {\r\n                result.append(niceMinInt + i * Int(niceStepInt))\r\n            }\r\n            return result\r\n        }\r\n    \r\n        /// Returns nice min or zero if it is much smaller than max.\r\n        static func getMinCloseToZero(min: Int, max: Int) -&gt; Int {\r\n            let nice = get(for: Double(min), min: true)\r\n            return nice &lt;= (Double(max) / 10) ? 0 : Int(nice)\r\n        }\r\n    \r\n        /// Get nice number. If min is true returns smaller number, if false - bigger one.\r\n        static func get(for number: Double, min: Bool) -&gt; Double {\r\n            if number == 0 { return 0 }\r\n            let exponent = floor(log10(number)) - (min ? 0 : 1)\r\n            let fraction = number / pow(10, exponent)\r\n            let niceFraction = min ? floor(fraction) : ceil(fraction)\r\n            return niceFraction * pow(10, exponent)\r\n        }\r\n    }\r\n\r\nTested only on positive numbers.","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Much <strong>BETTER</strong> and <strong>SIMPLER</strong> algorythm on swift. Size is fixed, values are not \"hardcoded\":</p>\n\n<pre><code>class NiceNumbers {\n    /// Returns nice range of specified size. Result min &lt;= min argument, result max &gt;= max argument.\n    static func getRange(forMin minInt: Int, max maxInt: Int, ofSize size: Int) -&gt; [Int] {\n        let niceMinInt = getMinCloseToZero(min: minInt, max: maxInt)\n        let step = Double(maxInt - niceMinInt) / Double(size - 1)\n        let niceStepInt = Int(get(for: step, min: false))\n\n        var result = [Int]()\n        result.append(niceMinInt)\n        for i in 1...size - 1 {\n            result.append(niceMinInt + i * Int(niceStepInt))\n        }\n        return result\n    }\n\n    /// Returns nice min or zero if it is much smaller than max.\n    static func getMinCloseToZero(min: Int, max: Int) -&gt; Int {\n        let nice = get(for: Double(min), min: true)\n        return nice &lt;= (Double(max) / 10) ? 0 : Int(nice)\n    }\n\n    /// Get nice number. If min is true returns smaller number, if false - bigger one.\n    static func get(for number: Double, min: Bool) -&gt; Double {\n        if number == 0 { return 0 }\n        let exponent = floor(log10(number)) - (min ? 0 : 1)\n        let fraction = number / pow(10, exponent)\n        let niceFraction = min ? floor(fraction) : ceil(fraction)\n        return niceFraction * pow(10, exponent)\n    }\n}\n</code></pre>\n\n<p>Tested only on positive numbers.</p>\n"},{"tags":[],"owner":{"account_id":19428972,"reputation":11,"user_id":14209874,"display_name":"Jonas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599062909,"creation_date":1599062909,"answer_id":63709379,"question_id":8506881,"body_markdown":"Dart / Flutter Version:\r\n\r\n    import &#39;dart:math&#39;;\r\n\r\n    void main() {\r\n      double min = 3, max = 28;\r\n    \r\n      var scale = NiceScale(min, max, 5);\r\n    \r\n      print(&quot;Range: $min-$max; Max Point: ${scale.niceMax}; Min Point: ${scale.niceMin}; Steps: ${scale.tickSpacing};&quot;);\r\n    }\r\n    \r\n    class NiceScale {\r\n      double _niceMin, _niceMax;\r\n      double _tickSpacing;\r\n    \r\n      double get tickSpacing { return _tickSpacing; }\r\n      double get niceMin{ return _niceMin; }\r\n      double get niceMax{ return _niceMax; }\r\n    \r\n      double _minPoint, _maxPoint;\r\n      double _maxTicks;\r\n      double _range;\r\n    \r\n      NiceScale(double minP, double maxP, double maxTicks){\r\n        this._minPoint = minP;\r\n        this._maxPoint = maxP;\r\n        this._maxTicks = maxTicks;\r\n        _calculate();\r\n      }\r\n    \r\n      void _calculate(){\r\n        _range = _niceNum(_maxPoint - _minPoint, false);\r\n        _tickSpacing = _niceNum(_range / (_maxTicks - 1), true);\r\n        _niceMin = _calcMin();\r\n        _niceMax = _calcMax();\r\n      }\r\n    \r\n      double _calcMin() {\r\n        int floored = (_minPoint / _tickSpacing).floor();\r\n        return floored * _tickSpacing;\r\n      }\r\n    \r\n      double _calcMax() {\r\n        int ceiled = (_maxPoint / _tickSpacing).ceil();\r\n        return ceiled * _tickSpacing;\r\n      }\r\n    \r\n      double _niceNum(double range, bool round){\r\n        double exponent; /** exponent of range */\r\n        double fraction; /** fractional part of range */\r\n        double niceFraction; /** nice, rounded fraction */\r\n    \r\n        exponent = (log(range)/ln10).floor().toDouble();\r\n        fraction = range / pow(10, exponent);\r\n    \r\n        if (round)\r\n        {\r\n          if (fraction &lt; 1.5)\r\n            niceFraction = 1;\r\n          else if (fraction &lt; 3)\r\n            niceFraction = 2;\r\n          else if (fraction &lt; 7)\r\n            niceFraction = 5;\r\n          else\r\n            niceFraction = 10;\r\n        }\r\n        else\r\n        {\r\n          if (fraction &lt;= 1)\r\n            niceFraction = 1;\r\n          else if (fraction &lt;= 2)\r\n            niceFraction = 2;\r\n          else if (fraction &lt;= 5)\r\n            niceFraction = 5;\r\n          else\r\n            niceFraction = 10;\r\n        }\r\n    \r\n        return niceFraction * pow(10, exponent);\r\n      }\r\n    }\r\n\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Dart / Flutter Version:</p>\n<pre><code>import 'dart:math';\n\nvoid main() {\n  double min = 3, max = 28;\n\n  var scale = NiceScale(min, max, 5);\n\n  print(&quot;Range: $min-$max; Max Point: ${scale.niceMax}; Min Point: ${scale.niceMin}; Steps: ${scale.tickSpacing};&quot;);\n}\n\nclass NiceScale {\n  double _niceMin, _niceMax;\n  double _tickSpacing;\n\n  double get tickSpacing { return _tickSpacing; }\n  double get niceMin{ return _niceMin; }\n  double get niceMax{ return _niceMax; }\n\n  double _minPoint, _maxPoint;\n  double _maxTicks;\n  double _range;\n\n  NiceScale(double minP, double maxP, double maxTicks){\n    this._minPoint = minP;\n    this._maxPoint = maxP;\n    this._maxTicks = maxTicks;\n    _calculate();\n  }\n\n  void _calculate(){\n    _range = _niceNum(_maxPoint - _minPoint, false);\n    _tickSpacing = _niceNum(_range / (_maxTicks - 1), true);\n    _niceMin = _calcMin();\n    _niceMax = _calcMax();\n  }\n\n  double _calcMin() {\n    int floored = (_minPoint / _tickSpacing).floor();\n    return floored * _tickSpacing;\n  }\n\n  double _calcMax() {\n    int ceiled = (_maxPoint / _tickSpacing).ceil();\n    return ceiled * _tickSpacing;\n  }\n\n  double _niceNum(double range, bool round){\n    double exponent; /** exponent of range */\n    double fraction; /** fractional part of range */\n    double niceFraction; /** nice, rounded fraction */\n\n    exponent = (log(range)/ln10).floor().toDouble();\n    fraction = range / pow(10, exponent);\n\n    if (round)\n    {\n      if (fraction &lt; 1.5)\n        niceFraction = 1;\n      else if (fraction &lt; 3)\n        niceFraction = 2;\n      else if (fraction &lt; 7)\n        niceFraction = 5;\n      else\n        niceFraction = 10;\n    }\n    else\n    {\n      if (fraction &lt;= 1)\n        niceFraction = 1;\n      else if (fraction &lt;= 2)\n        niceFraction = 2;\n      else if (fraction &lt;= 5)\n        niceFraction = 5;\n      else\n        niceFraction = 10;\n    }\n\n    return niceFraction * pow(10, exponent);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4399781,"reputation":27,"user_id":3585825,"display_name":"user3585825"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612193011,"creation_date":1612108103,"answer_id":65981072,"question_id":8506881,"body_markdown":"\r\n//Swift, more compact\r\n    &lt;pre&gt; &lt;code&gt;\r\npublic struct NiceScale\r\n{\r\n    var minPoint: Double\r\n    var maxPoint: Double\r\n    var maxTicks = 10\r\n    var tickSpacing: Double { niceNum(range: range / Double(maxTicks - 1), round: true) }\r\n    var range: Double { niceNum(range: maxPoint - minPoint, round: false) }\r\n    var niceMin: Double { floor(minPoint / tickSpacing) * tickSpacing }\r\n    var niceMax: Double { ceil(maxPoint / tickSpacing) * tickSpacing }\r\n    \r\n    //  min the minimum data point on the axis\r\n    //  max the maximum data point on the axis\r\n    init( min: Double,  max: Double, maxTicks: Int = 10)\r\n    {\r\n        minPoint = min\r\n        maxPoint = max\r\n        self.maxTicks = maxTicks\r\n    }\r\n    \r\n    /**\r\n     * Returns a &quot;nice&quot; number approximately equal to range Rounds\r\n     * the number if round = true Takes the ceiling\r\n     * if round = false range the data range\r\n     * round whether to round the result\r\n     * return a &quot;nice&quot; number to be used for the data range\r\n     */\r\n    func niceNum( range: Double,  round: Bool) -&gt; Double\r\n    {\r\n        let exponent: Double = floor(log10(range)) // exponent of range\r\n        let fraction: Double = range / pow(10, exponent) // fractional part of range\r\n        var niceFraction: Double =  10.0  // nice, rounded fraction\r\n        \r\n        if round {\r\n            if fraction &lt; 1.5    { niceFraction = 1 }\r\n            else if fraction &lt; 3 { niceFraction = 2 }\r\n            else if fraction &lt; 7 { niceFraction = 5 }\r\n         } else {\r\n            if fraction &lt;= 1      { niceFraction = 1 }\r\n            else if fraction &lt;= 2 { niceFraction = 2 }\r\n            else if fraction &lt;= 5 { niceFraction = 5 }\r\n         }\r\n        return niceFraction * pow(10, exponent)\r\n    }\r\n\r\n     static func testNiceScale()\r\n     {\r\n        var numScale =  NiceScale(min: -0.085, max: 0.173)\r\n        \r\n        print(&quot;Tick Spacing:\\t \\( numScale.tickSpacing)&quot;)\r\n        print(&quot;Nice Minimum:\\t\\( numScale.niceMin)&quot;)\r\n        print(&quot;Nice Maximum:\\t\\( numScale.niceMax)&quot;)\r\n        \r\n        numScale =  NiceScale(min: 4.44, max: 7.962)\r\n        \r\n        print(&quot;nice num:\\t\\( numScale.niceNum(range: 7.962 - 4.44, round: false))&quot;)\r\n        print(&quot;Tick Spacing:\\t\\( numScale.tickSpacing)&quot;)\r\n        print(&quot;Nice Minimum:\\t\\( numScale.niceMin)&quot;)\r\n        print(&quot;Nice Maximum:\\t\\( numScale.niceMax)&quot;)\r\n     }\r\n}\r\n&lt;\\pre&gt; &lt;\\code&gt;","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>//Swift, more compact\n<pre> <code>\npublic struct NiceScale\n{\nvar minPoint: Double\nvar maxPoint: Double\nvar maxTicks = 10\nvar tickSpacing: Double { niceNum(range: range / Double(maxTicks - 1), round: true) }\nvar range: Double { niceNum(range: maxPoint - minPoint, round: false) }\nvar niceMin: Double { floor(minPoint / tickSpacing) * tickSpacing }\nvar niceMax: Double { ceil(maxPoint / tickSpacing) * tickSpacing }</p>\n//  min the minimum data point on the axis\n//  max the maximum data point on the axis\ninit( min: Double,  max: Double, maxTicks: Int = 10)\n{\n    minPoint = min\n    maxPoint = max\n    self.maxTicks = maxTicks\n}\n\n/**\n * Returns a &quot;nice&quot; number approximately equal to range Rounds\n * the number if round = true Takes the ceiling\n * if round = false range the data range\n * round whether to round the result\n * return a &quot;nice&quot; number to be used for the data range\n */\nfunc niceNum( range: Double,  round: Bool) -&gt; Double\n{\n    let exponent: Double = floor(log10(range)) // exponent of range\n    let fraction: Double = range / pow(10, exponent) // fractional part of range\n    var niceFraction: Double =  10.0  // nice, rounded fraction\n    \n    if round {\n        if fraction &lt; 1.5    { niceFraction = 1 }\n        else if fraction &lt; 3 { niceFraction = 2 }\n        else if fraction &lt; 7 { niceFraction = 5 }\n     } else {\n        if fraction &lt;= 1      { niceFraction = 1 }\n        else if fraction &lt;= 2 { niceFraction = 2 }\n        else if fraction &lt;= 5 { niceFraction = 5 }\n     }\n    return niceFraction * pow(10, exponent)\n}\n\n static func testNiceScale()\n {\n    var numScale =  NiceScale(min: -0.085, max: 0.173)\n    \n    print(&quot;Tick Spacing:\\t \\( numScale.tickSpacing)&quot;)\n    print(&quot;Nice Minimum:\\t\\( numScale.niceMin)&quot;)\n    print(&quot;Nice Maximum:\\t\\( numScale.niceMax)&quot;)\n    \n    numScale =  NiceScale(min: 4.44, max: 7.962)\n    \n    print(&quot;nice num:\\t\\( numScale.niceNum(range: 7.962 - 4.44, round: false))&quot;)\n    print(&quot;Tick Spacing:\\t\\( numScale.tickSpacing)&quot;)\n    print(&quot;Nice Minimum:\\t\\( numScale.niceMin)&quot;)\n    print(&quot;Nice Maximum:\\t\\( numScale.niceMax)&quot;)\n }\n</code></pre>\n<p>}\n&lt;\\pre&gt; &lt;\\code&gt;</p>\n"},{"tags":[],"owner":{"account_id":960882,"reputation":195,"user_id":7821399,"display_name":"Ruur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625734297,"creation_date":1625734297,"answer_id":68298437,"question_id":8506881,"body_markdown":"Here is a Ruby version\r\n\r\n```ruby\r\nclass NiceScale\r\n  \r\n  attr_accessor :min_point, :max_point\r\n  attr_reader :tick_spacing, :nice_min, :nice_max\r\n  \r\n  def initialize(options = {})\r\n    @min_point = options[:min_point]\r\n    @max_point = options[:max_point]\r\n    @max_ticks = [(options[:max_ticks] || 5), 2].max\r\n    \r\n    self.calculate\r\n  end\r\n  \r\n  def calculate\r\n    range = nice_num(@max_point - @min_point, false)\r\n    @tick_spacing = nice_num(range / (@max_ticks - 1))\r\n    @nice_min = (@min_point / tick_spacing).floor * tick_spacing\r\n    @nice_max = (@max_point / tick_spacing).floor * tick_spacing\r\n  end\r\n  \r\n  private\r\n  \r\n  def nice_num(num, round = true)\r\n    num = num.to_f\r\n    exponent = num &gt; 0 ? Math.log10(num).floor : 0\r\n    fraction = num / (10 ** exponent)\r\n    \r\n    if round\r\n      if fraction &lt; 1.5\r\n        nice_fraction = 1\r\n      elsif fraction &lt; 3\r\n        nice_fraction = 2\r\n      elsif fraction &lt; 7\r\n        nice_fraction = 5\r\n      else\r\n        nice_fraction = 10\r\n      end\r\n    else\r\n      if fraction &lt;= 1\r\n        nice_fraction = 1\r\n      elsif fraction &lt;= 2\r\n        nice_fraction = 2\r\n      elsif fraction &lt;= 5\r\n        nice_fraction = 5\r\n      else\r\n        nice_fraction = 10\r\n      end\r\n    end\r\n    \r\n    nice_fraction.to_f * (10 ** exponent)\r\n  end\r\nend\r\n```","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here is a Ruby version</p>\n<pre class=\"lang-rb prettyprint-override\"><code>class NiceScale\n  \n  attr_accessor :min_point, :max_point\n  attr_reader :tick_spacing, :nice_min, :nice_max\n  \n  def initialize(options = {})\n    @min_point = options[:min_point]\n    @max_point = options[:max_point]\n    @max_ticks = [(options[:max_ticks] || 5), 2].max\n    \n    self.calculate\n  end\n  \n  def calculate\n    range = nice_num(@max_point - @min_point, false)\n    @tick_spacing = nice_num(range / (@max_ticks - 1))\n    @nice_min = (@min_point / tick_spacing).floor * tick_spacing\n    @nice_max = (@max_point / tick_spacing).floor * tick_spacing\n  end\n  \n  private\n  \n  def nice_num(num, round = true)\n    num = num.to_f\n    exponent = num &gt; 0 ? Math.log10(num).floor : 0\n    fraction = num / (10 ** exponent)\n    \n    if round\n      if fraction &lt; 1.5\n        nice_fraction = 1\n      elsif fraction &lt; 3\n        nice_fraction = 2\n      elsif fraction &lt; 7\n        nice_fraction = 5\n      else\n        nice_fraction = 10\n      end\n    else\n      if fraction &lt;= 1\n        nice_fraction = 1\n      elsif fraction &lt;= 2\n        nice_fraction = 2\n      elsif fraction &lt;= 5\n        nice_fraction = 5\n      else\n        nice_fraction = 10\n      end\n    end\n    \n    nice_fraction.to_f * (10 ** exponent)\n  end\nend\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21985370,"reputation":211,"user_id":16259726,"display_name":"Enrique Gonz&#225;lez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634546789,"creation_date":1634546789,"answer_id":69613132,"question_id":8506881,"body_markdown":"Another JS version:\r\n\r\n       const getTicks = {\r\n                    minPoint: 0,\r\n                    maxPoint: 10,\r\n                    maxTicks: 10,\r\n                    tickSpacing: 1,\r\n                    range: 1,\r\n                    niceMin: 1,\r\n                    niceMax: 1,\r\n                    niceScale(min, max) {\r\n                        this.minPoint = min;\r\n                        this.maxPoint = max;\r\n                        this.calculate();\r\n                        return {\r\n                            tickSpacing: this.tickSpacing,\r\n                            niceMinimum: this.niceMin,\r\n                            niceMaximum: this.niceMax\r\n                        };\r\n                    },\r\n                    calculate() {\r\n                        this.range = this.niceNum(this.maxPoint - this.minPoint, false);\r\n                        this.tickSpacing = this.niceNum(this.range / (this.maxTicks - 1), true);\r\n                        this.niceMin = Math.floor(this.minPoint / this.tickSpacing) * this.tickSpacing;\r\n                        this.niceMax = Math.ceil(this.maxPoint / this.tickSpacing) * this.tickSpacing;\r\n                    },\r\n                    niceNum(localRange, round) {\r\n                        var exponent; /** exponent of localRange */\r\n                        var fraction; /** fractional part of localRange */\r\n                        var niceFraction; /** nice, rounded fraction */\r\n                        exponent = Math.floor(Math.log10(localRange));\r\n                        fraction = localRange / Math.pow(10, exponent);\r\n                        if (round) {\r\n                            if (fraction &lt; 1.5) niceFraction = 1;\r\n                            else if (fraction &lt; 3) niceFraction = 2;\r\n                            else if (fraction &lt; 7) niceFraction = 5;\r\n                            else niceFraction = 10;\r\n                        } else {\r\n                            if (fraction &lt;= 1) niceFraction = 1;\r\n                            else if (fraction &lt;= 2) niceFraction = 2;\r\n                            else if (fraction &lt;= 5) niceFraction = 5;\r\n                            else niceFraction = 10;\r\n                        }\r\n                        return niceFraction * Math.pow(10, exponent);\r\n                    },\r\n                    setMinMaxPoints(localMinPoint, localMaxPoint) {\r\n                        this.minPoint = localMinPoint;\r\n                        this.maxPoint = localMaxPoint;\r\n                        this.calculate();\r\n                    },\r\n                    setMaxTicks(localMaxTicks) {\r\n                        this.maxTicks = localMaxTicks;\r\n                        this.calculate();\r\n                    }\r\n                }\r\n\r\nJust the code entered before, embedding it inside a JS object (I don&#39;t like the global vars). It can be used like this:\r\n\r\n    const tickScale = getTicks.niceScale(minValue, maxValue);\r\n        \r\n    for (let i = tickScale.niceMinimum; i &lt; tickScale.niceMaximum; i+=tickScale.tickSpacing) {\r\n          // Whatever you want to do\r\n        }\r\n\r\n\r\nI find it quite useful this way, and easer to isolate from the rest of the code.","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Another JS version:</p>\n<pre><code>   const getTicks = {\n                minPoint: 0,\n                maxPoint: 10,\n                maxTicks: 10,\n                tickSpacing: 1,\n                range: 1,\n                niceMin: 1,\n                niceMax: 1,\n                niceScale(min, max) {\n                    this.minPoint = min;\n                    this.maxPoint = max;\n                    this.calculate();\n                    return {\n                        tickSpacing: this.tickSpacing,\n                        niceMinimum: this.niceMin,\n                        niceMaximum: this.niceMax\n                    };\n                },\n                calculate() {\n                    this.range = this.niceNum(this.maxPoint - this.minPoint, false);\n                    this.tickSpacing = this.niceNum(this.range / (this.maxTicks - 1), true);\n                    this.niceMin = Math.floor(this.minPoint / this.tickSpacing) * this.tickSpacing;\n                    this.niceMax = Math.ceil(this.maxPoint / this.tickSpacing) * this.tickSpacing;\n                },\n                niceNum(localRange, round) {\n                    var exponent; /** exponent of localRange */\n                    var fraction; /** fractional part of localRange */\n                    var niceFraction; /** nice, rounded fraction */\n                    exponent = Math.floor(Math.log10(localRange));\n                    fraction = localRange / Math.pow(10, exponent);\n                    if (round) {\n                        if (fraction &lt; 1.5) niceFraction = 1;\n                        else if (fraction &lt; 3) niceFraction = 2;\n                        else if (fraction &lt; 7) niceFraction = 5;\n                        else niceFraction = 10;\n                    } else {\n                        if (fraction &lt;= 1) niceFraction = 1;\n                        else if (fraction &lt;= 2) niceFraction = 2;\n                        else if (fraction &lt;= 5) niceFraction = 5;\n                        else niceFraction = 10;\n                    }\n                    return niceFraction * Math.pow(10, exponent);\n                },\n                setMinMaxPoints(localMinPoint, localMaxPoint) {\n                    this.minPoint = localMinPoint;\n                    this.maxPoint = localMaxPoint;\n                    this.calculate();\n                },\n                setMaxTicks(localMaxTicks) {\n                    this.maxTicks = localMaxTicks;\n                    this.calculate();\n                }\n            }\n</code></pre>\n<p>Just the code entered before, embedding it inside a JS object (I don't like the global vars). It can be used like this:</p>\n<pre><code>const tickScale = getTicks.niceScale(minValue, maxValue);\n    \nfor (let i = tickScale.niceMinimum; i &lt; tickScale.niceMaximum; i+=tickScale.tickSpacing) {\n      // Whatever you want to do\n    }\n</code></pre>\n<p>I find it quite useful this way, and easer to isolate from the rest of the code.</p>\n"},{"tags":[],"owner":{"account_id":2379220,"reputation":1181,"user_id":2081656,"display_name":"Greg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656029772,"creation_date":1656029772,"answer_id":72737811,"question_id":8506881,"body_markdown":"The solution produces nice results, but often too few tick marks depending on the min and max point values and the snapping effect.\r\n\r\nHere&#39;s a quick hack fix to improve the tick mark spacing.\r\n\r\nOriginal:\r\n\r\n      private void calculate() {\r\n        this.range = niceNum(maxPoint - minPoint, false);\r\n        this.tickSpacing = niceNum(range / (maxTicks - 1), true);\r\n        this.niceMin = Math.floor(minPoint / tickSpacing) * tickSpacing;\r\n        this.niceMax = Math.ceil(maxPoint / tickSpacing) * tickSpacing;\r\n      }\r\n\r\nNew:\r\n\r\n      private void calculate() {\r\n        this.range = niceNum(maxPoint - minPoint, false);\r\n        this.tickSpacing = niceNum(range / (maxTicks - 1), true);\r\n    \r\n        // Attempt to correct tick spacing due to snapping behavior and nice method.\r\n        double tickCountF = (maxPoint - minPoint) / tickSpacing;\r\n        if( (tickCountF / maxTicks) &lt;= 0.5)\r\n            { tickSpacing /= 2.0; }\r\n    \r\n        this.niceMin = Math.floor(minPoint / tickSpacing) * tickSpacing;\r\n        this.niceMax = Math.ceil(maxPoint / tickSpacing) * tickSpacing;\r\n      }\r\n\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>The solution produces nice results, but often too few tick marks depending on the min and max point values and the snapping effect.</p>\n<p>Here's a quick hack fix to improve the tick mark spacing.</p>\n<p>Original:</p>\n<pre><code>  private void calculate() {\n    this.range = niceNum(maxPoint - minPoint, false);\n    this.tickSpacing = niceNum(range / (maxTicks - 1), true);\n    this.niceMin = Math.floor(minPoint / tickSpacing) * tickSpacing;\n    this.niceMax = Math.ceil(maxPoint / tickSpacing) * tickSpacing;\n  }\n</code></pre>\n<p>New:</p>\n<pre><code>  private void calculate() {\n    this.range = niceNum(maxPoint - minPoint, false);\n    this.tickSpacing = niceNum(range / (maxTicks - 1), true);\n\n    // Attempt to correct tick spacing due to snapping behavior and nice method.\n    double tickCountF = (maxPoint - minPoint) / tickSpacing;\n    if( (tickCountF / maxTicks) &lt;= 0.5)\n        { tickSpacing /= 2.0; }\n\n    this.niceMin = Math.floor(minPoint / tickSpacing) * tickSpacing;\n    this.niceMax = Math.ceil(maxPoint / tickSpacing) * tickSpacing;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16373419,"reputation":151,"user_id":11826174,"display_name":"David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670702235,"creation_date":1670702235,"answer_id":74756122,"question_id":8506881,"body_markdown":"Here are some Swift Unit Test to verify the definition of &quot;Nice&quot; meets your understanding.\r\n\r\n    \r\n\r\nimport XCTest\r\n@testable import AssetsFolio\r\n\r\nfinal class NiceGridLineValues_Tests: XCTestCase {\r\n\r\n    override func setUpWithError() throws {\r\n        // Put setup code here. This method is called before the invocation of each test method in the class.\r\n    }\r\n\r\n    override func tearDownWithError() throws {\r\n        // Put teardown code here. This method is called after the invocation of each test method in the class.\r\n    }\r\n\r\n    func test_NiceGridLinesValues_originalExample() throws {\r\n        let numScale = NiceGridLineValues(min: -0.085, max: 0.173)\r\n        \r\n        /*\r\n        // Which will then output nicely formatted numbers for use in whatever\r\n        // application for which you need to create pretty scales. =D\r\n                                                                \r\n                Tick Spacing: 0.05\r\n                Nice Minimum: -0.1\r\n                Nice Maximum: 0.2\r\n         */\r\n        \r\n        XCTAssertEqual(0.05, numScale.tickSpacing)\r\n        XCTAssertEqual(-0.1, numScale.niceMin)\r\n        XCTAssertEqual(0.2,  numScale.niceMax)\r\n    }\r\n    \r\n    \r\n    func test_NiceGridLinesValues_173_183_example() throws {\r\n        let numScale = NiceGridLineValues(min: 173.82, max: 182.93)\r\n        \r\n        XCTAssertEqual(1.0, numScale.tickSpacing)\r\n        XCTAssertEqual(173.0, numScale.niceMin)\r\n        XCTAssertEqual(183.0,  numScale.niceMax)\r\n    }\r\n    \r\n    func test_NiceGridLinesValues_176_180_example() throws {\r\n        let numScale = NiceGridLineValues(min: 176.82, max: 179.99)\r\n        \r\n        XCTAssertEqual(0.5, numScale.tickSpacing)\r\n        XCTAssertEqual(176.5, numScale.niceMin)\r\n        XCTAssertEqual(180.0,  numScale.niceMax)\r\n    }\r\n    \r\n    func test_NiceGridLinesValues_179_180_example() throws {\r\n        let numScale = NiceGridLineValues(min: 179.62, max: 179.99)\r\n        \r\n        XCTAssertEqual(0.05, numScale.tickSpacing)\r\n        XCTAssertEqual(179.6, numScale.niceMin, accuracy: 0.01)\r\n        XCTAssertEqual(180.0,  numScale.niceMax)\r\n    }\r\n}\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>Here are some Swift Unit Test to verify the definition of &quot;Nice&quot; meets your understanding.</p>\n<p>import XCTest\n@testable import AssetsFolio</p>\n<p>final class NiceGridLineValues_Tests: XCTestCase {</p>\n<pre><code>override func setUpWithError() throws {\n    // Put setup code here. This method is called before the invocation of each test method in the class.\n}\n\noverride func tearDownWithError() throws {\n    // Put teardown code here. This method is called after the invocation of each test method in the class.\n}\n\nfunc test_NiceGridLinesValues_originalExample() throws {\n    let numScale = NiceGridLineValues(min: -0.085, max: 0.173)\n    \n    /*\n    // Which will then output nicely formatted numbers for use in whatever\n    // application for which you need to create pretty scales. =D\n                                                            \n            Tick Spacing: 0.05\n            Nice Minimum: -0.1\n            Nice Maximum: 0.2\n     */\n    \n    XCTAssertEqual(0.05, numScale.tickSpacing)\n    XCTAssertEqual(-0.1, numScale.niceMin)\n    XCTAssertEqual(0.2,  numScale.niceMax)\n}\n\n\nfunc test_NiceGridLinesValues_173_183_example() throws {\n    let numScale = NiceGridLineValues(min: 173.82, max: 182.93)\n    \n    XCTAssertEqual(1.0, numScale.tickSpacing)\n    XCTAssertEqual(173.0, numScale.niceMin)\n    XCTAssertEqual(183.0,  numScale.niceMax)\n}\n\nfunc test_NiceGridLinesValues_176_180_example() throws {\n    let numScale = NiceGridLineValues(min: 176.82, max: 179.99)\n    \n    XCTAssertEqual(0.5, numScale.tickSpacing)\n    XCTAssertEqual(176.5, numScale.niceMin)\n    XCTAssertEqual(180.0,  numScale.niceMax)\n}\n\nfunc test_NiceGridLinesValues_179_180_example() throws {\n    let numScale = NiceGridLineValues(min: 179.62, max: 179.99)\n    \n    XCTAssertEqual(0.05, numScale.tickSpacing)\n    XCTAssertEqual(179.6, numScale.niceMin, accuracy: 0.01)\n    XCTAssertEqual(180.0,  numScale.niceMax)\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":4756663,"reputation":1,"user_id":3845262,"display_name":"StephenDriffill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677581242,"creation_date":1677581242,"answer_id":75590980,"question_id":8506881,"body_markdown":"First of all thanks very much for this algorithm and everyone who has conveniently converted to their language of choice! &#128077;\r\n\r\nI&#39;m implementing in a JS application with Typescript and have wound up with some variations to the original.\r\n\r\n1. Due to floating point number issues causing the loop condition to fail to match `niceMax` sometimes, having to round the ticks to the number of dps present in the tick spacing.\r\n1. Have used `&lt;=` in the for loop as we wanted the max point to be bounded by an upper tick - this I think is just preference.\r\n1. I found the the original algorithm did not strictly adhere to the `maxTicks` constraint and would sometimes return more ticks than specified. Whilst I haven&#39;t studied the algorithm, I think the reason was due to converting the range to a &quot;nice number&quot; which can inflate the number of required ticks, although the &quot;rounded nice number&quot; for the spacing seemed to counteract this in many but not all cases.  \r\n\r\n    In my variation I&#39;ve kept the original range and ditched the &quot;rounded nice num&quot; for the spacing. This works well - the min and max points are always bound. However, the maxTicks param can be exceeded by 1 in certain cases. For example with `maxTicks=8, min=299, max=601` we get 9 ticks with spacing of 50. To counteract this, we run the algorithm a second time with `maxTicks` reduced by 1. Not the cleanest solution, but I&#39;m pretty sure ensures the `maxTicks` is strictly guaranteed. \r\n\r\nThoughts greatly welcome on the merits/pitfalls of this version, and whether it can be improved.\r\n\r\n**Disclaimer: code not thoroughly tested, and only with +ve numbers**\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    function round(num: number, dp: number = 0) {\r\n      return Math.round((num + Number.EPSILON) * 10 ** dp) / 10 ** dp;\r\n    }\r\n\r\n    function countDecimals(value: number) {\r\n      if (Math.floor(value) === value) return 0;\r\n      return value.toString().split(&#39;.&#39;)[1].length || 0;\r\n    }\r\n\r\n    function niceNumUpper(range: number) {\r\n      const exponent = Math.floor(Math.log10(range));\r\n      const fraction = range / Math.pow(10, exponent);\r\n      let niceFraction: number;\r\n\r\n      if (fraction &lt;= 1) {\r\n        niceFraction = 1;\r\n      } else if (fraction &lt;= 2) {\r\n        niceFraction = 2;\r\n      } else if (fraction &lt;= 5) {\r\n        niceFraction = 5;\r\n      } else {\r\n        niceFraction = 10;\r\n      }\r\n\r\n      return niceFraction * Math.pow(10, exponent);\r\n    }\r\n\r\n    /**\r\n     * Calculate optimum number of ticks for an axis.\r\n     * @param min\r\n     * @param max\r\n     * @param maxTicks\r\n     * @returns number[]\r\n     */\r\n    function calculateTicks(min: number, max: number, maxTicks: number) {\r\n      function getTickDetails(sections: number) {\r\n        const range = max - min;\r\n        const tickSpacing = niceNumUpper(range / sections);\r\n        const decimals = countDecimals(tickSpacing);\r\n\r\n        const niceMin = round(\r\n          Math.floor(min / tickSpacing) * tickSpacing,\r\n          decimals,\r\n        );\r\n        const niceMax = round(Math.ceil(max / tickSpacing) * tickSpacing, decimals);\r\n\r\n        return { tickSpacing, niceMin, niceMax, decimals };\r\n      }\r\n\r\n      const ticks = [];\r\n      let tickSpacing: number, niceMin: number, niceMax: number, decimals: number;\r\n\r\n      // # sections = ticks - 1\r\n      ({ tickSpacing, niceMin, niceMax, decimals } = getTickDetails(maxTicks - 1));\r\n\r\n      // -2 if we have overshot max ticks\r\n      const tickCount = (niceMax - niceMin) / tickSpacing + 1;\r\n      if (tickCount &gt; maxTicks) {\r\n        ({ tickSpacing, niceMin, niceMax, decimals } = getTickDetails(\r\n          maxTicks - 2,\r\n        ));\r\n      }\r\n\r\n      for (let i = niceMin; i &lt;= niceMax; i = round(i + tickSpacing, decimals)) {\r\n        ticks.push(i);\r\n      }\r\n\r\n      return ticks;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>First of all thanks very much for this algorithm and everyone who has conveniently converted to their language of choice! 👍</p>\n<p>I'm implementing in a JS application with Typescript and have wound up with some variations to the original.</p>\n<ol>\n<li><p>Due to floating point number issues causing the loop condition to fail to match <code>niceMax</code> sometimes, having to round the ticks to the number of dps present in the tick spacing.</p>\n</li>\n<li><p>Have used <code>&lt;=</code> in the for loop as we wanted the max point to be bounded by an upper tick - this I think is just preference.</p>\n</li>\n<li><p>I found the the original algorithm did not strictly adhere to the <code>maxTicks</code> constraint and would sometimes return more ticks than specified. Whilst I haven't studied the algorithm, I think the reason was due to converting the range to a &quot;nice number&quot; which can inflate the number of required ticks, although the &quot;rounded nice number&quot; for the spacing seemed to counteract this in many but not all cases.</p>\n<p>In my variation I've kept the original range and ditched the &quot;rounded nice num&quot; for the spacing. This works well - the min and max points are always bound. However, the maxTicks param can be exceeded by 1 in certain cases. For example with <code>maxTicks=8, min=299, max=601</code> we get 9 ticks with spacing of 50. To counteract this, we run the algorithm a second time with <code>maxTicks</code> reduced by 1. Not the cleanest solution, but I'm pretty sure ensures the <code>maxTicks</code> is strictly guaranteed.</p>\n</li>\n</ol>\n<p>Thoughts greatly welcome on the merits/pitfalls of this version, and whether it can be improved.</p>\n<p><strong>Disclaimer: code not thoroughly tested, and only with +ve numbers</strong></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function round(num: number, dp: number = 0) {\n  return Math.round((num + Number.EPSILON) * 10 ** dp) / 10 ** dp;\n}\n\nfunction countDecimals(value: number) {\n  if (Math.floor(value) === value) return 0;\n  return value.toString().split('.')[1].length || 0;\n}\n\nfunction niceNumUpper(range: number) {\n  const exponent = Math.floor(Math.log10(range));\n  const fraction = range / Math.pow(10, exponent);\n  let niceFraction: number;\n\n  if (fraction &lt;= 1) {\n    niceFraction = 1;\n  } else if (fraction &lt;= 2) {\n    niceFraction = 2;\n  } else if (fraction &lt;= 5) {\n    niceFraction = 5;\n  } else {\n    niceFraction = 10;\n  }\n\n  return niceFraction * Math.pow(10, exponent);\n}\n\n/**\n * Calculate optimum number of ticks for an axis.\n * @param min\n * @param max\n * @param maxTicks\n * @returns number[]\n */\nfunction calculateTicks(min: number, max: number, maxTicks: number) {\n  function getTickDetails(sections: number) {\n    const range = max - min;\n    const tickSpacing = niceNumUpper(range / sections);\n    const decimals = countDecimals(tickSpacing);\n\n    const niceMin = round(\n      Math.floor(min / tickSpacing) * tickSpacing,\n      decimals,\n    );\n    const niceMax = round(Math.ceil(max / tickSpacing) * tickSpacing, decimals);\n\n    return { tickSpacing, niceMin, niceMax, decimals };\n  }\n\n  const ticks = [];\n  let tickSpacing: number, niceMin: number, niceMax: number, decimals: number;\n\n  // # sections = ticks - 1\n  ({ tickSpacing, niceMin, niceMax, decimals } = getTickDetails(maxTicks - 1));\n\n  // -2 if we have overshot max ticks\n  const tickCount = (niceMax - niceMin) / tickSpacing + 1;\n  if (tickCount &gt; maxTicks) {\n    ({ tickSpacing, niceMin, niceMax, decimals } = getTickDetails(\n      maxTicks - 2,\n    ));\n  }\n\n  for (let i = niceMin; i &lt;= niceMax; i = round(i + tickSpacing, decimals)) {\n    ticks.push(i);\n  }\n\n  return ticks;\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":197404,"reputation":5690,"user_id":441467,"accept_rate":93,"display_name":"Dominik Obermaier"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23503,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":8507299,"answer_count":22,"score":40,"last_activity_date":1677581242,"creation_date":1323875721,"question_id":8506881,"body_markdown":"I need to calculate the Ticklabels and the Tickrange for charts manually. \r\n\r\nI know the &quot;standard&quot; algorithm for nice ticks (see http://books.google.de/books?id=fvA7zLEFWZgC&amp;pg=PA61&amp;lpg=PA61&amp;redir_esc=y#v=onepage&amp;q&amp;f=false) and I also know [this Java implementation][1]. \r\n\r\nThe problem is, that with this algorithm, the ticks are &quot;too smart&quot;. That means, The algorithm decides how much ticks should be displayed. My requirement is, that there  are always 5 Ticks, but these should of course be &quot;pretty&quot;. The naive approach would be to get the maximum value, divide with 5 and multiply with the ticknumber. The values here are - of course - not optimal and the ticks are pretty ugly. \r\n\r\nDoes anyone know a solution for the problem or have a hint for a formal algorithm description?\r\n\r\n  [1]: http://erison.blogspot.nl/2011/07/algorithm-for-optimal-scaling-on-chart.html","title":"Nice Label Algorithm for Charts with minimum ticks","body":"<p>I need to calculate the Ticklabels and the Tickrange for charts manually. </p>\n\n<p>I know the \"standard\" algorithm for nice ticks (see <a href=\"http://books.google.de/books?id=fvA7zLEFWZgC&amp;pg=PA61&amp;lpg=PA61&amp;redir_esc=y#v=onepage&amp;q&amp;f=false\" rel=\"noreferrer\">http://books.google.de/books?id=fvA7zLEFWZgC&amp;pg=PA61&amp;lpg=PA61&amp;redir_esc=y#v=onepage&amp;q&amp;f=false</a>) and I also know <a href=\"http://erison.blogspot.nl/2011/07/algorithm-for-optimal-scaling-on-chart.html\" rel=\"noreferrer\">this Java implementation</a>. </p>\n\n<p>The problem is, that with this algorithm, the ticks are \"too smart\". That means, The algorithm decides how much ticks should be displayed. My requirement is, that there  are always 5 Ticks, but these should of course be \"pretty\". The naive approach would be to get the maximum value, divide with 5 and multiply with the ticknumber. The values here are - of course - not optimal and the ticks are pretty ugly. </p>\n\n<p>Does anyone know a solution for the problem or have a hint for a formal algorithm description?</p>\n"},{"tags":["java","postgresql","spring-data-jpa","criteria-api"],"comments":[{"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"score":0,"creation_date":1677521149,"post_id":75581593,"comment_id":133350325,"body_markdown":"How are you defining your entity class? I&#39;m trying to replicate to see what I can try.","body":"How are you defining your entity class? I&#39;m trying to replicate to see what I can try."},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1677538476,"post_id":75581593,"comment_id":133354322,"body_markdown":"@CalvinP. thanks. I&#39;ve updated my question with the entity class.","body":"@CalvinP. thanks. I&#39;ve updated my question with the entity class."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1677543547,"post_id":75581593,"comment_id":133355203,"body_markdown":"Sorry, not sure what happened here... I wanted to edit and endup deleting it... here is it back: https://pastebin.com/EHdSRMTu","body":"Sorry, not sure what happened here... I wanted to edit and endup deleting it... here is it back: <a href=\"https://pastebin.com/EHdSRMTu\" rel=\"nofollow noreferrer\">pastebin.com/EHdSRMTu</a>"},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1677580431,"post_id":75581593,"comment_id":133361765,"body_markdown":"@JorgeCampos That looks useful. Can you post it as an answer please so that we can interact with your solution? :)","body":"@JorgeCampos That looks useful. Can you post it as an answer please so that we can interact with your solution? :)"},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1677588808,"post_id":75581593,"comment_id":133364177,"body_markdown":"I tried your solution @JorgeCampos but since the `details` column is not a joined column (it&#39;s in the same table), I get `Cannot join to attribute of basic type`.","body":"I tried your solution @JorgeCampos but since the <code>details</code> column is not a joined column (it&#39;s in the same table), I get <code>Cannot join to attribute of basic type</code>."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1677604384,"post_id":75581593,"comment_id":133369391,"body_markdown":"That&#39;s the reason I didn&#39;t post as a solution, I was afraid it wouldn&#39;t work... I don&#39;t have postgresql here to test it... I will see if I can modify it","body":"That&#39;s the reason I didn&#39;t post as a solution, I was afraid it wouldn&#39;t work... I don&#39;t have postgresql here to test it... I will see if I can modify it"},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1677605504,"post_id":75581593,"comment_id":133369677,"body_markdown":"My other option is to write a database function and invoke it using criteria API but that&#39;s my last resort.","body":"My other option is to write a database function and invoke it using criteria API but that&#39;s my last resort."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1677605885,"post_id":75581593,"comment_id":133369778,"body_markdown":"Ok, the error you provided is actually useful, now I know the code I built tried to join to a details table, which shouldn&#39;t be the case. I created another two variants of it, check it out... if they still don&#39;t work it must be some slight variant of it: https://pastebin.com/dX79z2zp","body":"Ok, the error you provided is actually useful, now I know the code I built tried to join to a details table, which shouldn&#39;t be the case. I created another two variants of it, check it out... if they still don&#39;t work it must be some slight variant of it: <a href=\"https://pastebin.com/dX79z2zp\" rel=\"nofollow noreferrer\">pastebin.com/dX79z2zp</a>"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1677606060,"post_id":75581593,"comment_id":133369839,"body_markdown":"The catch about these is that the SQL should be slightly different from the original, because in your original sql you are using the database features but for JPA you need to convert it to a variant and which the JPA provider can use to the code, essentially the subquery needs a direct explicit join, from above they are cross left join with the function and a left join with the function in the subquery and it is not `exists` it is an `in`","body":"The catch about these is that the SQL should be slightly different from the original, because in your original sql you are using the database features but for JPA you need to convert it to a variant and which the JPA provider can use to the code, essentially the subquery needs a direct explicit join, from above they are cross left join with the function and a left join with the function in the subquery and it is not <code>exists</code> it is an <code>in</code>"},{"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"score":1,"creation_date":1677621262,"post_id":75581593,"comment_id":133373739,"body_markdown":"I want to add for you helpful information based on your provided question:\n&quot;JPA doesn&#39;t natively support converting JSON or JSONB fields.&quot; as stated [here](https://stackoverflow.com/a/60512855/8370915).","body":"I want to add for you helpful information based on your provided question: &quot;JPA doesn&#39;t natively support converting JSON or JSONB fields.&quot; as stated <a href=\"https://stackoverflow.com/a/60512855/8370915\">here</a>."},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":1,"creation_date":1677686581,"post_id":75581593,"comment_id":133387773,"body_markdown":"Thanks a lot for your time and help @JorgeCampos. Unfortunately the 2nd option doesn&#39;t work as it gives me a `Requested attribute was not a map` error and I cannot use the first option because it uses internal Hibernate API (even if I move to JPA API, it doesn&#39;t compile). I think for now I&#39;ll write a custom DB function and revisit this later when we migrate to Spring Boot 3 and JPA 3 (Hibernate 6).","body":"Thanks a lot for your time and help @JorgeCampos. Unfortunately the 2nd option doesn&#39;t work as it gives me a <code>Requested attribute was not a map</code> error and I cannot use the first option because it uses internal Hibernate API (even if I move to JPA API, it doesn&#39;t compile). I think for now I&#39;ll write a custom DB function and revisit this later when we migrate to Spring Boot 3 and JPA 3 (Hibernate 6)."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1677691629,"post_id":75581593,"comment_id":133389443,"body_markdown":"Sounds good! Hope you can find a good solution for it!","body":"Sounds good! Hope you can find a good solution for it!"},{"owner":{"account_id":2771907,"reputation":642,"user_id":2386338,"accept_rate":71,"display_name":"Grancein"},"score":0,"creation_date":1687940598,"post_id":75581593,"comment_id":135005697,"body_markdown":"Hi! Did you find a solution? because i have to do the same thing. I had a a select from function, but I don&#39;t know how do it","body":"Hi! Did you find a solution? because i have to do the same thing. I had a a select from function, but I don&#39;t know how do it"},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1687968396,"post_id":75581593,"comment_id":135011930,"body_markdown":"I ended up writing a simple Postgres function and invoking it from JPA. Looks so much neater.","body":"I ended up writing a simple Postgres function and invoking it from JPA. Looks so much neater."},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1687975618,"post_id":75581593,"comment_id":135013265,"body_markdown":"```create or replace function abcd_jsonb_key_exists(jsonb_field jsonb, key_search text, value_search text) returns bool as $$\n    select exists (select from jsonb_each_text(jsonb_field) as kv where kv.key ilike key_search and kv.value ilike value_search) $$\nlanguage sql;\n\ncomment on function abcd_jsonb_key_exists is &#39;checks if the jsonb field with the given key and value search patterns exists&#39;;```","body":"<code>create or replace function abcd_jsonb_key_exists(jsonb_field jsonb, key_search text, value_search text) returns bool as $$     select exists (select from jsonb_each_text(jsonb_field) as kv where kv.key ilike key_search and kv.value ilike value_search) $$ language sql;  comment on function abcd_jsonb_key_exists is &#39;checks if the jsonb field with the given key and value search patterns exists&#39;;</code>"}],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677580526,"creation_date":1677507312,"question_id":75581593,"body_markdown":"I have a table with a JSONB column in Postgres. Let&#39;s call it `pet`. \r\n\r\n| id | name   | details                                           |\r\n|----|--------|---------------------------------------------------|\r\n| 1  | Cat    | `{&quot;furColour&quot;: &quot;brown&quot;}`                          |\r\n| 2  | Dog    | `{&quot;coatColour&quot;: &quot;black&quot;, &quot;bark&quot;: &quot;loud&quot;}`         |\r\n| 3  | Parrot | `{&quot;beakColour&quot;: &quot;red&quot;, &quot;featherColour&quot;: &quot;green&quot;}` |\r\n\r\nI&#39;m trying to come up with a Spring Data JPA specification that can filter the records of this table based on the attributes of the `details` column. However, I need to be able to filter by attributes ending with `Colour`, not the exact attribute name. I was able to achieve this by using a Postgres query such as this one:\r\n\r\n```sql\r\nselect * from pet \r\nwhere exists (\r\n    select from jsonb_each_text(details) as kv \r\n    where kv.key like &#39;%Colour&#39; \r\n    and kv.value = &#39;red&#39;);\r\n```\r\n\r\nI&#39;m finding it extremely challenging to come up with a JPA specification for the above where clause. I have tried this:\r\n\r\n```java\r\n(root, criteria, builder) -&gt; {\r\n    Expression&lt;Tuple&gt; function = \r\n        builder.function(&quot;jsonb_each_text&quot;, Tuple.class, root.get(&quot;details&quot;));\r\n            \r\n    // Not sure how to set alias or if it&#39;s even \r\n    // necessary as in my SQL\r\n    var kv = function.alias(&quot;kv&quot;);\r\n\r\n    var subQuery = builder.createQuery().subquery(Tuple.class).select(function);\r\n\r\n    // I&#39;m unable to work out how to determine this root. \r\n    // I cannot use Tuple as a root as it&#39;s obviously not \r\n    // an entity and thus I get an appropriate error.\r\n    var functionRoot = criteria.from(Tuple.class); \r\n\r\n    return builder.exists(subQuery.where(builder.like(functionRoot.get(&quot;key&quot;), &quot;%Colour&quot;), builder.equal(functionRoot.get(&quot;value&quot;), &quot;red&quot;)));\r\n};\r\n\r\n```\r\n\r\nMy `Pet` entity class looks like this:\r\n\r\n```java\r\nimport com.vladmihalcea.hibernate.type.json.JsonType;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport org.hibernate.annotations.Type;\r\nimport org.hibernate.annotations.TypeDef;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\n\r\n// Other imports skipped for brevity\r\n\r\n@Getter\r\n@Setter\r\n@Entity\r\n@TypeDef(name = &quot;json&quot;, typeClass = JsonType.class)\r\npublic class Pet {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private UUID id;\r\n\r\n    private String name;\r\n\r\n    @Type(type = &quot;json&quot;)\r\n    @Column(columnDefinition = &quot;jsonb&quot;)\r\n    private Map&lt;String, Object&gt; details = Collections.emptyMap();\r\n\r\n}\r\n```\r\n\r\nWhat am I doing wrong here?\r\n\r\nAny tips, pointers, guidance here would be greatly appreciated.","title":"How to write a Spring Data JPA specification for a Postgres select from function?","body":"<p>I have a table with a JSONB column in Postgres. Let's call it <code>pet</code>.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>id</th>\n<th>name</th>\n<th>details</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>Cat</td>\n<td><code>{&quot;furColour&quot;: &quot;brown&quot;}</code></td>\n</tr>\n<tr>\n<td>2</td>\n<td>Dog</td>\n<td><code>{&quot;coatColour&quot;: &quot;black&quot;, &quot;bark&quot;: &quot;loud&quot;}</code></td>\n</tr>\n<tr>\n<td>3</td>\n<td>Parrot</td>\n<td><code>{&quot;beakColour&quot;: &quot;red&quot;, &quot;featherColour&quot;: &quot;green&quot;}</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I'm trying to come up with a Spring Data JPA specification that can filter the records of this table based on the attributes of the <code>details</code> column. However, I need to be able to filter by attributes ending with <code>Colour</code>, not the exact attribute name. I was able to achieve this by using a Postgres query such as this one:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select * from pet \nwhere exists (\n    select from jsonb_each_text(details) as kv \n    where kv.key like '%Colour' \n    and kv.value = 'red');\n</code></pre>\n<p>I'm finding it extremely challenging to come up with a JPA specification for the above where clause. I have tried this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>(root, criteria, builder) -&gt; {\n    Expression&lt;Tuple&gt; function = \n        builder.function(&quot;jsonb_each_text&quot;, Tuple.class, root.get(&quot;details&quot;));\n            \n    // Not sure how to set alias or if it's even \n    // necessary as in my SQL\n    var kv = function.alias(&quot;kv&quot;);\n\n    var subQuery = builder.createQuery().subquery(Tuple.class).select(function);\n\n    // I'm unable to work out how to determine this root. \n    // I cannot use Tuple as a root as it's obviously not \n    // an entity and thus I get an appropriate error.\n    var functionRoot = criteria.from(Tuple.class); \n\n    return builder.exists(subQuery.where(builder.like(functionRoot.get(&quot;key&quot;), &quot;%Colour&quot;), builder.equal(functionRoot.get(&quot;value&quot;), &quot;red&quot;)));\n};\n\n</code></pre>\n<p>My <code>Pet</code> entity class looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.vladmihalcea.hibernate.type.json.JsonType;\nimport lombok.Getter;\nimport lombok.Setter;\nimport org.hibernate.annotations.Type;\nimport org.hibernate.annotations.TypeDef;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\n\n// Other imports skipped for brevity\n\n@Getter\n@Setter\n@Entity\n@TypeDef(name = &quot;json&quot;, typeClass = JsonType.class)\npublic class Pet {\n\n    @Id\n    @GeneratedValue\n    private UUID id;\n\n    private String name;\n\n    @Type(type = &quot;json&quot;)\n    @Column(columnDefinition = &quot;jsonb&quot;)\n    private Map&lt;String, Object&gt; details = Collections.emptyMap();\n\n}\n</code></pre>\n<p>What am I doing wrong here?</p>\n<p>Any tips, pointers, guidance here would be greatly appreciated.</p>\n"},{"tags":["java","enums","casting","enumeration"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":7,"creation_date":1314971842,"post_id":7284472,"comment_id":8772177,"body_markdown":"What would you expect `en2` to hold when you &quot;cast&quot; `Enum1.ONE` to it?","body":"What would you expect <code>en2</code> to hold when you &quot;cast&quot; <code>Enum1.ONE</code> to it?"}],"answers":[{"tags":[],"owner":{"account_id":287824,"reputation":38852,"user_id":587884,"accept_rate":86,"display_name":"Heisenbug"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1314971766,"creation_date":1314971766,"answer_id":7284501,"question_id":7284472,"body_markdown":"It&#39;s not possible. Enum1 and Enum2 are different types with nothing in common.","title":"How to cast a value from one enum to another in Java?","body":"<p>It's not possible. Enum1 and Enum2 are different types with nothing in common.</p>\n"},{"tags":[],"owner":{"account_id":781143,"reputation":1507,"user_id":839428,"display_name":"parsifal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1314971812,"creation_date":1314971812,"answer_id":7284514,"question_id":7284472,"body_markdown":"You can&#39;t do that, because they&#39;re objects of different classes.\r\n\r\nYou could *convert* from one to the other based on ordinal value or name, but I&#39;d question the design of any program that needed to do that.","title":"How to cast a value from one enum to another in Java?","body":"<p>You can't do that, because they're objects of different classes.</p>\n\n<p>You could <em>convert</em> from one to the other based on ordinal value or name, but I'd question the design of any program that needed to do that.</p>\n"},{"tags":[],"owner":{"account_id":169662,"reputation":2670,"user_id":395863,"accept_rate":89,"display_name":"Raveline"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1314971853,"creation_date":1314971853,"answer_id":7284521,"question_id":7284472,"body_markdown":"You can&#39;t ; but you can create a static method in your enums, with a translation code. But you must have a clear idea of the rules you want to implement.","title":"How to cast a value from one enum to another in Java?","body":"<p>You can't ; but you can create a static method in your enums, with a translation code. But you must have a clear idea of the rules you want to implement.</p>\n"},{"tags":[],"owner":{"account_id":551019,"reputation":3058,"user_id":915743,"accept_rate":100,"display_name":"alfa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1314972352,"creation_date":1314971926,"answer_id":7284544,"question_id":7284472,"body_markdown":"A cast operation is not possible, but you can write a static member function for enum1 that casts enum2 to enum1:\r\n\r\n    public static Enum1 fromEnum2(Enum2 enum2) {\r\n        ...\r\n    }\r\n\r\nBy the way, you can assign an ID to every constant of both enums which simplifies the implementation.\r\n\r\n[Here][1] is a tutorial on enums.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/javaOO/enum.html","title":"How to cast a value from one enum to another in Java?","body":"<p>A cast operation is not possible, but you can write a static member function for enum1 that casts enum2 to enum1:</p>\n\n<pre><code>public static Enum1 fromEnum2(Enum2 enum2) {\n    ...\n}\n</code></pre>\n\n<p>By the way, you can assign an ID to every constant of both enums which simplifies the implementation.</p>\n\n<p><a href=\"http://download.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"nofollow\">Here</a> is a tutorial on enums.</p>\n"},{"tags":[],"owner":{"account_id":399566,"reputation":5316,"user_id":765009,"accept_rate":60,"display_name":"toto2"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1314972633,"creation_date":1314972633,"answer_id":7284705,"question_id":7284472,"body_markdown":"It probably won&#39;t help you, but you can have\r\n\r\n    public enum Enum1 implements MyInterface {...}\r\n    public enum Enum2 implements MyInterface {...}\r\n\r\nWe don&#39;t have enough information about what you are trying to do to help you.\r\nIt makes no sense as it is to cast an enum to another enum.","title":"How to cast a value from one enum to another in Java?","body":"<p>It probably won't help you, but you can have</p>\n\n<pre><code>public enum Enum1 implements MyInterface {...}\npublic enum Enum2 implements MyInterface {...}\n</code></pre>\n\n<p>We don't have enough information about what you are trying to do to help you.\nIt makes no sense as it is to cast an enum to another enum.</p>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1314981087,"creation_date":1314973795,"answer_id":7284961,"question_id":7284472,"body_markdown":"You can define a method in Enum1 to return the corresponding Enum2:  \r\n\r\n    enum Enum1 {\r\n        ONE {\r\n            @Override\r\n            public Enum2 toEnum2() {\r\n                return Enum2.ALFA;\r\n            }\r\n        },\r\n        TWO {\r\n            @Override\r\n            public Enum2 toEnum2() {\r\n                return Enum2.BETA;\r\n            }\r\n        }\r\n        ,\r\n        THREE {\r\n            @Override\r\n            public Enum2 toEnum2() {\r\n                return Enum2.GAMMA;\r\n            }\r\n        }\r\n        ;\r\n        \r\n        public abstract Enum2 toEnum2();\r\n    }\r\n    \r\n    enum Enum2 {\r\n        ALFA, BETA, GAMMA;\r\n    }\r\n\r\nor, a bit more readable (IMO):  \r\n\r\n    enum Enum1 {\r\n        ONE(Enum2.ALFA), \r\n        TWO(Enum2.BETA), \r\n        THREE(Enum2.GAMMA);\r\n        \r\n        private final Enum2 enum2;\r\n        \r\n        private Enum1(Enum2 enum2) {\r\n            this.enum2 = enum2;\r\n        }\r\n        \r\n        public Enum2 toEnum2() {\r\n            return enum2;\r\n        }\r\n    }\r\n    \r\n    enum Enum2 {\r\n        ALFA, BETA, GAMMA;\r\n    }\r\n\r\n-----\r\nEDIT:  \r\nif you need to maintain the 2 enums decoupled, create a map containing the mapping from Enum1 to Enum2 (in a 3rd utility class).","title":"How to cast a value from one enum to another in Java?","body":"<p>You can define a method in Enum1 to return the corresponding Enum2:  </p>\n\n<pre><code>enum Enum1 {\n    ONE {\n        @Override\n        public Enum2 toEnum2() {\n            return Enum2.ALFA;\n        }\n    },\n    TWO {\n        @Override\n        public Enum2 toEnum2() {\n            return Enum2.BETA;\n        }\n    }\n    ,\n    THREE {\n        @Override\n        public Enum2 toEnum2() {\n            return Enum2.GAMMA;\n        }\n    }\n    ;\n\n    public abstract Enum2 toEnum2();\n}\n\nenum Enum2 {\n    ALFA, BETA, GAMMA;\n}\n</code></pre>\n\n<p>or, a bit more readable (IMO):  </p>\n\n<pre><code>enum Enum1 {\n    ONE(Enum2.ALFA), \n    TWO(Enum2.BETA), \n    THREE(Enum2.GAMMA);\n\n    private final Enum2 enum2;\n\n    private Enum1(Enum2 enum2) {\n        this.enum2 = enum2;\n    }\n\n    public Enum2 toEnum2() {\n        return enum2;\n    }\n}\n\nenum Enum2 {\n    ALFA, BETA, GAMMA;\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT:<br>\nif you need to maintain the 2 enums decoupled, create a map containing the mapping from Enum1 to Enum2 (in a 3rd utility class).</p>\n"},{"tags":[],"owner":{"account_id":362471,"reputation":30540,"user_id":705676,"accept_rate":64,"display_name":"Michał Šrajer"},"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1314974965,"creation_date":1314974965,"answer_id":7285219,"question_id":7284472,"body_markdown":"You cannot cast from one enum to another, however each enum has guaranteed order, and you can easily translate one enum to another (preserving order). For example:\r\n\r\n    enum E1 {\r\n    \tONE, TWO, THREE,\r\n    }\r\n    \r\n    enum E2 {\r\n    \tALPHA, BETA, GAMMA,\r\n    }\r\n\r\nwe can translate `E1.TWO` to/from `E2.BETA` by:\r\n\r\n    static E2 E1toE2(E1 value) {\r\n        return E2.values()[value.ordinal()];\r\n    }\r\n\r\n    static E1 E2toE1(E2 value) {\r\n        return E1.values()[value.ordinal()];\r\n    }","title":"How to cast a value from one enum to another in Java?","body":"<p>You cannot cast from one enum to another, however each enum has guaranteed order, and you can easily translate one enum to another (preserving order). For example:</p>\n\n<pre><code>enum E1 {\n    ONE, TWO, THREE,\n}\n\nenum E2 {\n    ALPHA, BETA, GAMMA,\n}\n</code></pre>\n\n<p>we can translate <code>E1.TWO</code> to/from <code>E2.BETA</code> by:</p>\n\n<pre><code>static E2 E1toE2(E1 value) {\n    return E2.values()[value.ordinal()];\n}\n\nstatic E1 E2toE1(E2 value) {\n    return E1.values()[value.ordinal()];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3451908,"reputation":674,"user_id":2891409,"accept_rate":100,"display_name":"codewing"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1412087821,"creation_date":1412087821,"answer_id":26123510,"question_id":7284472,"body_markdown":"Even though this ticket was active quite a while ago I&#39;m adding another possibility:\r\n\r\n\r\nYou could also create a Map e.g. like this:\r\n\r\n    HashMap&lt;Enum1, Enum2&gt; e1ToE2 = new HashMap&lt;Enum1, Enum2&gt;();\r\n    e1ToE2.put(Enum1.ONE, Enum2.FOUR);\r\n    e1ToE2.put(Enum1.TWO, Enum2.FIVE);\r\n\r\nusage\r\n\r\n    Enum2 e2 = e1ToE2.get(Enum1.ONE);\r\n\r\n(+) you dont have to double check the order of your elements\r\n\r\n(+) easy to read\r\n\r\n(+) fast\r\n\r\n(-) requires space\r\n\r\nCorrect me if I&#39;m wrong :)\r\n","title":"How to cast a value from one enum to another in Java?","body":"<p>Even though this ticket was active quite a while ago I'm adding another possibility:</p>\n\n<p>You could also create a Map e.g. like this:</p>\n\n<pre><code>HashMap&lt;Enum1, Enum2&gt; e1ToE2 = new HashMap&lt;Enum1, Enum2&gt;();\ne1ToE2.put(Enum1.ONE, Enum2.FOUR);\ne1ToE2.put(Enum1.TWO, Enum2.FIVE);\n</code></pre>\n\n<p>usage</p>\n\n<pre><code>Enum2 e2 = e1ToE2.get(Enum1.ONE);\n</code></pre>\n\n<p>(+) you dont have to double check the order of your elements</p>\n\n<p>(+) easy to read</p>\n\n<p>(+) fast</p>\n\n<p>(-) requires space</p>\n\n<p>Correct me if I'm wrong :)</p>\n"},{"tags":[],"owner":{"account_id":1062360,"reputation":37721,"user_id":1063716,"accept_rate":94,"display_name":"Steve Chambers"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1663252996,"creation_date":1478795768,"answer_id":40532667,"question_id":7284472,"body_markdown":"The answer depends on what the &quot;casting&quot; should do...\r\n\r\n## Casting by ordinal position\r\n\r\nIn the provided example, there is no commonality between the two sets of enum values so I&#39;m assuming the intention was to translate by ordinal position so `Enum1.ONE` =&gt; `Enum2.FOUR`, `Enum1.TWO` =&gt; `Enum2.FIVE` and `Enum1.THREE` =&gt; `Enum2.SIX`. This can be done as follows:\r\n\r\n    Enum2 en2 = Enum2.values()[Enum1.ONE.ordinal()];\r\n\r\nA natural follow-on question is how this can be extended to a generic function that does the same for any two `enum` types. Not for the faint hearted but this does the job - it requires the Google Guava library:\r\n\r\n    public &lt;F extends Enum&lt;F&gt;&gt; F castByOrdinal(Enum&lt;?&gt; e, Class&lt;F&gt; fClass) {\r\n        return Iterators.get(EnumSet.allOf(fClass).iterator(), e.ordinal());\r\n    }\r\n\r\nIf Guava isn&#39;t being used, it can be done manually in a few more lines of code:\r\n\r\n    public &lt;F extends Enum&lt;F&gt;&gt; F castByOrdinal(final Enum&lt;?&gt; e, final Class&lt;F&gt; fClass){\r\n        final Iterator&lt;F&gt; iter = EnumSet.allOf(fClass).iterator();\r\n        int count = 0;\r\n        F fValue = null;\r\n        while (count &lt;= e.ordinal()) {\r\n            if (!iter.hasNext()) {\r\n                return null; // ...Or throw an exception e.g. IndexOutOfBoundsException\r\n            }\r\n            fValue = iter.next();\r\n            count++;\r\n        }\r\n\r\n        return fValue;\r\n    }\r\n\r\n**Example usage:**\r\n\r\n    Enum2 en2 = castByOrdinal(Enum1.ONE, Enum2.class);\r\n\r\n## Casting by shared enum value names\r\n\r\nThere is another possible way of casting between enums that share some of the same value names.\r\n\r\nE.g:\r\n\r\n    enum Shape {\r\n        TRIANGLE, SQUARE, PENTAGON, HEXAGON, UNKNOWN, NOT_APPLICABLE\r\n    }\r\n\r\n    enum Size {\r\n        SMALL, MEDIUM, LARGE, UNKNOWN, NOT_APPLICABLE\r\n    }\r\n\r\nThe casting will only work for common values (i.e. `UNKNOWN` and `NOT_APPLICABLE` above) and can be done as follows:\r\n\r\n    Size size = Size.valueOf(Shape.UNKNOWN.name());\r\n\r\nThis will throw an `IllegalArgumentException` if the value name does not exist in the target enum. The generic method for this casting is a bit simpler:\r\n\r\n    public &lt;F extends Enum&lt;F&gt;&gt; F castByName(final Enum&lt;?&gt; e, final Class&lt;F&gt; fClass) {\r\n        return F.valueOf(fClass, e.name());\r\n    }\r\n\r\n**Example usage:**\r\n\r\n    Size size = castByName(Shape.UNKNOWN, Size.class);\r\n","title":"How to cast a value from one enum to another in Java?","body":"<p>The answer depends on what the &quot;casting&quot; should do...</p>\n<h2>Casting by ordinal position</h2>\n<p>In the provided example, there is no commonality between the two sets of enum values so I'm assuming the intention was to translate by ordinal position so <code>Enum1.ONE</code> =&gt; <code>Enum2.FOUR</code>, <code>Enum1.TWO</code> =&gt; <code>Enum2.FIVE</code> and <code>Enum1.THREE</code> =&gt; <code>Enum2.SIX</code>. This can be done as follows:</p>\n<pre><code>Enum2 en2 = Enum2.values()[Enum1.ONE.ordinal()];\n</code></pre>\n<p>A natural follow-on question is how this can be extended to a generic function that does the same for any two <code>enum</code> types. Not for the faint hearted but this does the job - it requires the Google Guava library:</p>\n<pre><code>public &lt;F extends Enum&lt;F&gt;&gt; F castByOrdinal(Enum&lt;?&gt; e, Class&lt;F&gt; fClass) {\n    return Iterators.get(EnumSet.allOf(fClass).iterator(), e.ordinal());\n}\n</code></pre>\n<p>If Guava isn't being used, it can be done manually in a few more lines of code:</p>\n<pre><code>public &lt;F extends Enum&lt;F&gt;&gt; F castByOrdinal(final Enum&lt;?&gt; e, final Class&lt;F&gt; fClass){\n    final Iterator&lt;F&gt; iter = EnumSet.allOf(fClass).iterator();\n    int count = 0;\n    F fValue = null;\n    while (count &lt;= e.ordinal()) {\n        if (!iter.hasNext()) {\n            return null; // ...Or throw an exception e.g. IndexOutOfBoundsException\n        }\n        fValue = iter.next();\n        count++;\n    }\n\n    return fValue;\n}\n</code></pre>\n<p><strong>Example usage:</strong></p>\n<pre><code>Enum2 en2 = castByOrdinal(Enum1.ONE, Enum2.class);\n</code></pre>\n<h2>Casting by shared enum value names</h2>\n<p>There is another possible way of casting between enums that share some of the same value names.</p>\n<p>E.g:</p>\n<pre><code>enum Shape {\n    TRIANGLE, SQUARE, PENTAGON, HEXAGON, UNKNOWN, NOT_APPLICABLE\n}\n\nenum Size {\n    SMALL, MEDIUM, LARGE, UNKNOWN, NOT_APPLICABLE\n}\n</code></pre>\n<p>The casting will only work for common values (i.e. <code>UNKNOWN</code> and <code>NOT_APPLICABLE</code> above) and can be done as follows:</p>\n<pre><code>Size size = Size.valueOf(Shape.UNKNOWN.name());\n</code></pre>\n<p>This will throw an <code>IllegalArgumentException</code> if the value name does not exist in the target enum. The generic method for this casting is a bit simpler:</p>\n<pre><code>public &lt;F extends Enum&lt;F&gt;&gt; F castByName(final Enum&lt;?&gt; e, final Class&lt;F&gt; fClass) {\n    return F.valueOf(fClass, e.name());\n}\n</code></pre>\n<p><strong>Example usage:</strong></p>\n<pre><code>Size size = castByName(Shape.UNKNOWN, Size.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9336050,"reputation":1,"user_id":6930203,"display_name":"T.Harini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483338201,"creation_date":1483338201,"answer_id":41422226,"question_id":7284472,"body_markdown":"You cannot cast from one enum to another, however each enum has guaranteed order, and you can easily translate one enum to another ","title":"How to cast a value from one enum to another in Java?","body":"<p>You cannot cast from one enum to another, however each enum has guaranteed order, and you can easily translate one enum to another </p>\n"},{"tags":[],"owner":{"account_id":6073837,"reputation":330,"user_id":4741784,"display_name":"fab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677580342,"creation_date":1677580342,"answer_id":75590809,"question_id":7284472,"body_markdown":"If you need a default value:\r\n\r\n    Arrays.stream(Enum2.values())\r\n          .filter(value -&gt; value.name().equals(Enum1.ONE.name()))\r\n          .findFirst()\r\n          .orElse(Enum2.FOUR)","title":"How to cast a value from one enum to another in Java?","body":"<p>If you need a default value:</p>\n<pre><code>Arrays.stream(Enum2.values())\n      .filter(value -&gt; value.name().equals(Enum1.ONE.name()))\n      .findFirst()\n      .orElse(Enum2.FOUR)\n</code></pre>\n"}],"owner":{"account_id":465356,"reputation":14405,"user_id":917586,"accept_rate":75,"display_name":"Android-Droid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36472,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":7285219,"answer_count":11,"score":23,"last_activity_date":1677580342,"creation_date":1314971664,"question_id":7284472,"body_markdown":"How can I cast a value from Enum1 to Enum 2 in Java?\r\nHere is an example of what I&#39;m trying to do :\r\n\r\n    public enum Enum1 {\r\n      ONE,\r\n      TWO,\r\n      THREE;\r\n    }\r\n    \r\n    public enum Enum2 {\r\n      FOUR,\r\n      FIVE,\r\n      SIX;\r\n    }\r\n\r\nSo I want to do something like this:\r\n\r\n    Enum2 en2 = (Enum2)ONE;\r\n\r\nIs it possible and how can I do that?\r\n\r\nThanks in advance!","title":"How to cast a value from one enum to another in Java?","body":"<p>How can I cast a value from Enum1 to Enum 2 in Java?\nHere is an example of what I'm trying to do :</p>\n\n<pre><code>public enum Enum1 {\n  ONE,\n  TWO,\n  THREE;\n}\n\npublic enum Enum2 {\n  FOUR,\n  FIVE,\n  SIX;\n}\n</code></pre>\n\n<p>So I want to do something like this:</p>\n\n<pre><code>Enum2 en2 = (Enum2)ONE;\n</code></pre>\n\n<p>Is it possible and how can I do that?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","anylogic","or-tools","access-denied","public-cloud"],"comments":[{"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"score":0,"creation_date":1677587097,"post_id":75590801,"comment_id":133363618,"body_markdown":"Afaik the public AL cloud blocks any Internet access queries for &quot;Guest&quot; users and those without an active cloud subscription. Does it work when you use a cloud-subscribed account?","body":"Afaik the public AL cloud blocks any Internet access queries for &quot;Guest&quot; users and those without an active cloud subscription. Does it work when you use a cloud-subscribed account?"},{"owner":{"account_id":27475771,"reputation":11,"user_id":20963792,"display_name":"Sharif Khaleghparast"},"score":0,"creation_date":1677692036,"post_id":75590801,"comment_id":133389572,"body_markdown":"No, it does not. Access can only be provided in the private cloud, where one can install it onsite and host manually, so there&#39;s a way to provide the permissions there.\nHowever, my question is mainly that &quot;is there a way that I hinder external packages from asking for such access so they can still do their job on the public cloud?&quot;","body":"No, it does not. Access can only be provided in the private cloud, where one can install it onsite and host manually, so there&#39;s a way to provide the permissions there. However, my question is mainly that &quot;is there a way that I hinder external packages from asking for such access so they can still do their job on the public cloud?&quot;"}],"owner":{"account_id":27475771,"reputation":11,"user_id":20963792,"display_name":"Sharif Khaleghparast"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677580324,"creation_date":1677580324,"question_id":75590801,"body_markdown":"I am using Google OR-Tools as an external dependency in an Anylogic model. The model runs on the Anylogic desktop version. However, after I upload my code on the (Anylogic) public cloud, I get this error:\r\n\r\n&quot;Error during model startup:\r\naccess denied (&quot;java.io.FilePermission&quot; &quot;/run/executor/disk0/u7d2c1f9f/jars/lib/ortools-linux-x86-64-9.5.2237.jar&quot; &quot;write&quot;)&quot;\r\n\r\nI encountered this problem also when using other external packages such as PowSyBl with Anylogic:\r\n\r\n&quot;access denied(&quot;java.io.FilePermission&quot; &quot;/var/run/executor/disk1/u5d6d89cc/home/.itools&quot; &quot;write&quot;)&quot;\r\n\r\nIt seems that it is required to have &quot;write&quot; permission for all directories hardcoded in an external package, but as far as I know, it is not possible to give those permissions in the public version of AnyLogic Cloud. What should I do to resolve the error and run it on the public cloud?","title":"Do Anylogic models with external dependencies that need &quot;write&quot; permission runnable on the (Anylogic) public cloud?","body":"<p>I am using Google OR-Tools as an external dependency in an Anylogic model. The model runs on the Anylogic desktop version. However, after I upload my code on the (Anylogic) public cloud, I get this error:</p>\n<p>&quot;Error during model startup:\naccess denied (&quot;java.io.FilePermission&quot; &quot;/run/executor/disk0/u7d2c1f9f/jars/lib/ortools-linux-x86-64-9.5.2237.jar&quot; &quot;write&quot;)&quot;</p>\n<p>I encountered this problem also when using other external packages such as PowSyBl with Anylogic:</p>\n<p>&quot;access denied(&quot;java.io.FilePermission&quot; &quot;/var/run/executor/disk1/u5d6d89cc/home/.itools&quot; &quot;write&quot;)&quot;</p>\n<p>It seems that it is required to have &quot;write&quot; permission for all directories hardcoded in an external package, but as far as I know, it is not possible to give those permissions in the public version of AnyLogic Cloud. What should I do to resolve the error and run it on the public cloud?</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":4,"creation_date":1677541449,"post_id":75586546,"comment_id":133354846,"body_markdown":"You say your dates are stored in the database as string.However your create table statement uses the date type. And your POJO class matches the date type.  Something is weird here.","body":"You say your dates are stored in the database as string.However your create table statement uses the date type. And your POJO class matches the date type.  Something is weird here."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1677564455,"post_id":75586546,"comment_id":133357867,"body_markdown":"Don’t use `SimpleDateFormat` and `Date`.  Never ever.","body":"Don’t use <code>SimpleDateFormat</code> and <code>Date</code>.  Never ever."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1677564967,"post_id":75586546,"comment_id":133357927,"body_markdown":"If your table is created with that `create table` statement declaring `\\`date\\` DATE DEFAULT NULL`, then the dates are not actually strings. How they are stored internally I don’t know, and you have no need to care. And obviously when you query them, strings are printed -- this is the same for numeric data types, etc. Your MySQL considers them dates, and you should handle them as dates and trust that they are dates.","body":"If your table is created with that <code>create table</code> statement declaring <code>`date` DATE DEFAULT NULL</code>, then the dates are not actually strings. How they are stored internally I don’t know, and you have no need to care. And obviously when you query them, strings are printed -- this is the same for numeric data types, etc. Your MySQL considers them dates, and you should handle them as dates and trust that they are dates."},{"owner":{"account_id":13044220,"reputation":65,"user_id":9426575,"display_name":"Raftery"},"score":0,"creation_date":1677578796,"post_id":75586546,"comment_id":133361300,"body_markdown":"The create table statement originally had a varchar for the date, I have changed it to Date as I thought that might help. If I can get a solution with keeping everything as String/Varchar, I would prefer to go with that, but I don’t think that would work as it’s not possible to query “date-in-range” if the values are strings? Happy to be corrected","body":"The create table statement originally had a varchar for the date, I have changed it to Date as I thought that might help. If I can get a solution with keeping everything as String/Varchar, I would prefer to go with that, but I don’t think that would work as it’s not possible to query “date-in-range” if the values are strings? Happy to be corrected"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677579587,"post_id":75586546,"comment_id":133361518,"body_markdown":"(1) It may not be easy to change the existing table with many rows to use `date` instead of `varchar`, but I still think that this should be the way to go. Keeping dates in `varchar` will give you all kinds of issues during the lifetime of your system. (2) You are correct that querying dates before, after or between other dates would be *very complicated* at best when dates are stored in `varchar` in `dd.MM.yyyy` format.","body":"(1) It may not be easy to change the existing table with many rows to use <code>date</code> instead of <code>varchar</code>, but I still think that this should be the way to go. Keeping dates in <code>varchar</code> will give you all kinds of issues during the lifetime of your system. (2) You are correct that querying dates before, after or between other dates would be <i>very complicated</i> at best when dates are stored in <code>varchar</code> in <code>dd.MM.yyyy</code> format."},{"owner":{"account_id":341169,"reputation":30706,"user_id":671619,"accept_rate":86,"display_name":"Firo"},"score":0,"creation_date":1677579639,"post_id":75586546,"comment_id":133361526,"body_markdown":"something like this? https://www.baeldung.com/hibernate-custom-types","body":"something like this? <a href=\"https://www.baeldung.com/hibernate-custom-types\" rel=\"nofollow noreferrer\">baeldung.com/hibernate-custom-types</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677579647,"post_id":75586546,"comment_id":133361529,"body_markdown":"Write a SQL query that uses the `to_date` function of the database to convert the string to a date. Then use that as the value to do the comparison. You will need to use something like that or convert the table to use a proper timestamp/date whatever the type is you need. Unrelated but a performance killer, you are calling your `findByDateBetween` method twice...","body":"Write a SQL query that uses the <code>to_date</code> function of the database to convert the string to a date. Then use that as the value to do the comparison. You will need to use something like that or convert the table to use a proper timestamp/date whatever the type is you need. Unrelated but a performance killer, you are calling your <code>findByDateBetween</code> method twice..."},{"owner":{"account_id":13044220,"reputation":65,"user_id":9426575,"display_name":"Raftery"},"score":0,"creation_date":1677753684,"post_id":75586546,"comment_id":133401686,"body_markdown":"Hi all, thanks for the comments. A variation of all the input from everyone, and the answer from M. Deinum solved my issue.","body":"Hi all, thanks for the comments. A variation of all the input from everyone, and the answer from M. Deinum solved my issue."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677580215,"creation_date":1677580215,"answer_id":75590777,"question_id":75586546,"body_markdown":"Your best option is to modify the table in your database and use the proper data types for the columns. If it is a date, make it a date. \r\n\r\nThe next best thing is to use your database and convert the string to a date before comparison. This will mean you need to write a custom SQL query to get the results, instead of using the automatic features of Spring Data JPA. \r\n\r\n```java\r\n@Query(value=&quot;SELECT * FROM base_data WHERE STR_TO_DATE(`date`, &#39;%m/%d/%Y %H:%i&#39;), nativeQuery=true) BETWEEN :startDate AND :endDate&quot;)\r\nList&lt;BaseData&gt; findBydateBetween(Date startDate, Date endDate);\r\n```\r\n\r\nThis should give you the result you need, however it might be slow as for each row it needs to convert the string to a date. ","title":"MySQL &#39;Date&#39; objects are actually Strings","body":"<p>Your best option is to modify the table in your database and use the proper data types for the columns. If it is a date, make it a date.</p>\n<p>The next best thing is to use your database and convert the string to a date before comparison. This will mean you need to write a custom SQL query to get the results, instead of using the automatic features of Spring Data JPA.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value=&quot;SELECT * FROM base_data WHERE STR_TO_DATE(`date`, '%m/%d/%Y %H:%i'), nativeQuery=true) BETWEEN :startDate AND :endDate&quot;)\nList&lt;BaseData&gt; findBydateBetween(Date startDate, Date endDate);\n</code></pre>\n<p>This should give you the result you need, however it might be slow as for each row it needs to convert the string to a date.</p>\n"}],"owner":{"account_id":13044220,"reputation":65,"user_id":9426575,"display_name":"Raftery"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75590777,"answer_count":1,"score":0,"last_activity_date":1677580215,"creation_date":1677540755,"question_id":75586546,"body_markdown":"Have a bit of an issue that I&#39;m stuck on;\r\n\r\nCurrently working on a Springboot project, where I am looking to take in two dates (Start Date &amp; End Date) from the UI, process the data within the controller, and return a list of data between the given dates.\r\n\r\nThe problem I&#39;m having is that my &#39;Date&#39; objects in the database are actually Strings. Unfortunately, simply changing the values to &#39;Dates&#39; isn&#39;t an option (over 10,000) entries.\r\n\r\nI have tried the following, but having no luck:\r\n\r\nJava Controller:\r\n\r\n    //Input params format: 2023-02-27 // YYYY-MM-DD\r\n    @RequestMapping(&quot;/neteng/topten&quot;)\r\n\tpublic Iterable&lt;BaseData&gt; getTopTen(\r\n\t\t\t@RequestBody Map&lt;String, String&gt; dates) {\r\n\t\t\r\n\t\tString startDate= dates.get(&quot;startDate&quot;);\r\n\t\tString endDate= dates.get(&quot;endDate&quot;);\r\n\r\n        DateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\r\n        \r\n\t\ttry {\r\n\t\t    java.util.Date date = sdf.parse(startDate);\r\n            java.util.Date date2 = sdf.parse(endDate);\r\n\t\t\r\n            java.sql.Date sqlStartDate = new java.sql.Date(date.getTime()); \r\n            java.sql.Date sqlEndDate = new java.sql.Date(date2.getTime()); \r\n        \r\n\t\t\tbaseDataRepository.findBydateBetween(sqlStartDate, sqlEndDate);\r\n\r\n\t\t\treturn baseDataRepository.findBydateBetween(sqlStartDate, sqlEndDate);\r\n\r\n\t\t} catch (ParseException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n        \r\n\t\t\r\n\t\treturn &quot;SomeErrorPage&quot;;\r\n\r\n\r\n\t}\r\n\r\n\r\nPOJO:\r\n\r\n    @Entity\r\n    @Table(name=&quot;base_data&quot;)\r\n    public class BaseData {\r\n\t\r\n\t@Id //Set primary key\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name=&quot;id&quot;)//Specify the column name\r\n\tprivate Long baseDatatableId;\r\n\tprivate Date date; // Have tried keeping this a String\r\n    ...\r\n\t\r\n\tpublic BaseData() {\r\n\t\r\n\t}\r\n\t\r\n\tpublic BaseData(Date date_time, ...) {\r\n\t\tthis.date = date_time;\r\n        ...\r\n\t}\r\n    //Getters &amp; setters\r\n\r\nJPA Repo:\r\n\r\n    public interface BaseDataRepository extends JpaRepository&lt;BaseData,Long&gt;{\r\n\t\r\n        List&lt;BaseData&gt; findBydateBetween(Date startDate, Date endDate);\r\n\r\n    }\r\n\r\n\r\nSQL Script &amp; Sample data snippet:\r\n\r\n    CREATE TABLE `base_data` (\r\n    `id` INT NOT NULL AUTO_INCREMENT,\r\n    `date` DATE DEFAULT NULL,\r\n    ....\r\n    PRIMARY KEY (`id`),\r\n    KEY `Operator_idx` (`operator`)\r\n    )  ENGINE=INNODB AUTO_INCREMENT=1001 DEFAULT CHARSET=UTF8MB4 COLLATE = UTF8MB4_0900_AI_CI;\r\n\r\n    INSERT INTO `base_data`\r\n    VALUES      (1,\r\n             &#39;1/11/2020 17:18&#39;,\r\n             ....)\r\n\r\nThe `create table` statement originally had a `varchar` for the date, I have changed it to `Date` as I thought that might help. If I can get a solution with keeping everything as `String/Varchar`, I would prefer to go with that, but I don’t think that would work as it’s not possible to query “date-in-range” if the values are strings?","title":"MySQL &#39;Date&#39; objects are actually Strings","body":"<p>Have a bit of an issue that I'm stuck on;</p>\n<p>Currently working on a Springboot project, where I am looking to take in two dates (Start Date &amp; End Date) from the UI, process the data within the controller, and return a list of data between the given dates.</p>\n<p>The problem I'm having is that my 'Date' objects in the database are actually Strings. Unfortunately, simply changing the values to 'Dates' isn't an option (over 10,000) entries.</p>\n<p>I have tried the following, but having no luck:</p>\n<p>Java Controller:</p>\n<pre><code>//Input params format: 2023-02-27 // YYYY-MM-DD\n@RequestMapping(&quot;/neteng/topten&quot;)\npublic Iterable&lt;BaseData&gt; getTopTen(\n        @RequestBody Map&lt;String, String&gt; dates) {\n    \n    String startDate= dates.get(&quot;startDate&quot;);\n    String endDate= dates.get(&quot;endDate&quot;);\n\n    DateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\n    \n    try {\n        java.util.Date date = sdf.parse(startDate);\n        java.util.Date date2 = sdf.parse(endDate);\n    \n        java.sql.Date sqlStartDate = new java.sql.Date(date.getTime()); \n        java.sql.Date sqlEndDate = new java.sql.Date(date2.getTime()); \n    \n        baseDataRepository.findBydateBetween(sqlStartDate, sqlEndDate);\n\n        return baseDataRepository.findBydateBetween(sqlStartDate, sqlEndDate);\n\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    \n    \n    return &quot;SomeErrorPage&quot;;\n\n\n}\n</code></pre>\n<p>POJO:</p>\n<pre><code>@Entity\n@Table(name=&quot;base_data&quot;)\npublic class BaseData {\n\n@Id //Set primary key\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name=&quot;id&quot;)//Specify the column name\nprivate Long baseDatatableId;\nprivate Date date; // Have tried keeping this a String\n...\n\npublic BaseData() {\n\n}\n\npublic BaseData(Date date_time, ...) {\n    this.date = date_time;\n    ...\n}\n//Getters &amp; setters\n</code></pre>\n<p>JPA Repo:</p>\n<pre><code>public interface BaseDataRepository extends JpaRepository&lt;BaseData,Long&gt;{\n\n    List&lt;BaseData&gt; findBydateBetween(Date startDate, Date endDate);\n\n}\n</code></pre>\n<p>SQL Script &amp; Sample data snippet:</p>\n<pre><code>CREATE TABLE `base_data` (\n`id` INT NOT NULL AUTO_INCREMENT,\n`date` DATE DEFAULT NULL,\n....\nPRIMARY KEY (`id`),\nKEY `Operator_idx` (`operator`)\n)  ENGINE=INNODB AUTO_INCREMENT=1001 DEFAULT CHARSET=UTF8MB4 COLLATE = UTF8MB4_0900_AI_CI;\n\nINSERT INTO `base_data`\nVALUES      (1,\n         '1/11/2020 17:18',\n         ....)\n</code></pre>\n<p>The <code>create table</code> statement originally had a <code>varchar</code> for the date, I have changed it to <code>Date</code> as I thought that might help. If I can get a solution with keeping everything as <code>String/Varchar</code>, I would prefer to go with that, but I don’t think that would work as it’s not possible to query “date-in-range” if the values are strings?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677441013,"creation_date":1677440973,"answer_id":75574623,"question_id":75574572,"body_markdown":"It looks like you’re just missing the `collect()` to collect the stream into the resulting list. As well as a return statement in the `convertIntoDTO` method, which I’m assuming you just missed when listing the code here?\r\n\r\n    private List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets){\r\n       return buckets.stream()\r\n        .map(\r\n            bucket -&gt; {\r\n               // ..\r\n            }\r\n        ).collect(Collectors.toList());\r\n    }","title":"Stream&lt;Bucket&gt; is not applicable for the arguments","body":"<p>It looks like you’re just missing the <code>collect()</code> to collect the stream into the resulting list. As well as a return statement in the <code>convertIntoDTO</code> method, which I’m assuming you just missed when listing the code here?</p>\n<pre><code>private List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets){\n   return buckets.stream()\n    .map(\n        bucket -&gt; {\n           // ..\n        }\n    ).collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677503743,"creation_date":1677503743,"answer_id":75580964,"question_id":75574572,"body_markdown":"You haven&#39;t shown what your lambda is returning, so no one can help you with that. It could be your lambda is OK and you&#39;re just missing the `return` keyword before `buckets.stream()`.\r\n\r\nHowever, if you implement the following method:\r\n\r\n    private BucketDTO convert(Bucket bucket) {\r\n        return // your code here\r\n    }\r\n\r\nThis will work:\r\n\r\n    private List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets){\r\n        return buckets.stream()\r\n          .map(this::convert)\r\n          .collect(Collectors.toList());\r\n    }\r\n\r\nAnd will be easier to read and test.\r\n\r\n","title":"Stream&lt;Bucket&gt; is not applicable for the arguments","body":"<p>You haven't shown what your lambda is returning, so no one can help you with that. It could be your lambda is OK and you're just missing the <code>return</code> keyword before <code>buckets.stream()</code>.</p>\n<p>However, if you implement the following method:</p>\n<pre><code>private BucketDTO convert(Bucket bucket) {\n    return // your code here\n}\n</code></pre>\n<p>This will work:</p>\n<pre><code>private List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets){\n    return buckets.stream()\n      .map(this::convert)\n      .collect(Collectors.toList());\n}\n</code></pre>\n<p>And will be easier to read and test.</p>\n"},{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677580177,"creation_date":1677580177,"answer_id":75590769,"question_id":75574572,"body_markdown":"Your going to kick yourself.\r\n\r\nThe signature of map is:\r\n\r\n    &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper)\r\n\r\nThe important part is that the argument is of type `Function&lt;? super T,? extends R&gt; mapper` where `? super T` is the element of the mapped stream (in your case `Bucket`) and `? extends R` is the **return type** (in your case `BucketDTO`).\r\n\r\nIn order for the compiler to work out the return type the anonymous function has to actually return a typed Object. In your case this is the fix:\r\n\r\n    buckets.stream()\r\n        .map(\r\n             bucket -&gt; {\r\n            \t return new BucketDTO(); // NB: so the compiler can work out the return class of the anonymous method\r\n             }\r\n        )\r\n        .collect(Collectors.toList());\r\n\r\n        \r\n\r\n\r\n","title":"Stream&lt;Bucket&gt; is not applicable for the arguments","body":"<p>Your going to kick yourself.</p>\n<p>The signature of map is:</p>\n<pre><code>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper)\n</code></pre>\n<p>The important part is that the argument is of type <code>Function&lt;? super T,? extends R&gt; mapper</code> where <code>? super T</code> is the element of the mapped stream (in your case <code>Bucket</code>) and <code>? extends R</code> is the <strong>return type</strong> (in your case <code>BucketDTO</code>).</p>\n<p>In order for the compiler to work out the return type the anonymous function has to actually return a typed Object. In your case this is the fix:</p>\n<pre><code>buckets.stream()\n    .map(\n         bucket -&gt; {\n             return new BucketDTO(); // NB: so the compiler can work out the return class of the anonymous method\n         }\n    )\n    .collect(Collectors.toList());\n\n    \n</code></pre>\n"}],"owner":{"account_id":281380,"reputation":2648,"user_id":577647,"accept_rate":69,"display_name":"tolga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1677580177,"creation_date":1677440349,"question_id":75574572,"body_markdown":"In my application, I get AWS Bucket list with my method **s3client.listBuckets()**. My aim is to convert AWS Bucket List into DTO list.\r\n\r\nHere&#39;s the problem:\r\n\r\n    The method map(Function&lt;? super Bucket,? extends R&gt;) in the type Stream&lt;Bucket&gt; is not applicable for the arguments ((&lt;no type&gt; bucket) -&gt; {})Java(67108979)\r\n\r\n\r\nNormally this kind of a functionality would have no problem with Entity -&gt; DTO conversion, what is the difference?\r\n\r\n    private List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets){\r\n        buckets.stream()\r\n            .map(\r\n                bucket -&gt; {\r\n                   // ..\r\n                }\r\n            )\r\n            .collect(Collectors.toList());\r\n    }\r\n\r\n    protected List&lt;BucketDTO&gt; getList() {\r\n        List&lt;Bucket&gt; buckets = s3client.listBuckets();\r\n        return convertIntoDTO(buckets);\r\n    }   \r\n\r\n---\r\n\r\nAs a quick solution, I decided to go with a loop. But still not sure why stream().map()... didn&#39;t work. \r\n\r\n    protected List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets) {\r\n        List&lt;BucketDTO&gt; bucketDTOList = new ArrayList&lt;BucketDTO&gt;()\r\n\r\n        for(Bucket bucket : buckets) {\r\n            BucketDTO bucketDTO = new BucketDTO();\r\n            bucketDTO.setName(bucket.getName());\r\n            bucketDTO.setDate(bucket.getCreationDate());\r\n            bucketDTOList.add(bucketDTO);\r\n        }\r\n\r\n        return bucketDTOList;\r\n    }","title":"Stream&lt;Bucket&gt; is not applicable for the arguments","body":"<p>In my application, I get AWS Bucket list with my method <strong>s3client.listBuckets()</strong>. My aim is to convert AWS Bucket List into DTO list.</p>\n<p>Here's the problem:</p>\n<pre><code>The method map(Function&lt;? super Bucket,? extends R&gt;) in the type Stream&lt;Bucket&gt; is not applicable for the arguments ((&lt;no type&gt; bucket) -&gt; {})Java(67108979)\n</code></pre>\n<p>Normally this kind of a functionality would have no problem with Entity -&gt; DTO conversion, what is the difference?</p>\n<pre><code>private List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets){\n    buckets.stream()\n        .map(\n            bucket -&gt; {\n               // ..\n            }\n        )\n        .collect(Collectors.toList());\n}\n\nprotected List&lt;BucketDTO&gt; getList() {\n    List&lt;Bucket&gt; buckets = s3client.listBuckets();\n    return convertIntoDTO(buckets);\n}   \n</code></pre>\n<hr />\n<p>As a quick solution, I decided to go with a loop. But still not sure why stream().map()... didn't work.</p>\n<pre><code>protected List&lt;BucketDTO&gt; convertIntoDTO(List&lt;Bucket&gt; buckets) {\n    List&lt;BucketDTO&gt; bucketDTOList = new ArrayList&lt;BucketDTO&gt;()\n\n    for(Bucket bucket : buckets) {\n        BucketDTO bucketDTO = new BucketDTO();\n        bucketDTO.setName(bucket.getName());\n        bucketDTO.setDate(bucket.getCreationDate());\n        bucketDTOList.add(bucketDTO);\n    }\n\n    return bucketDTOList;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1677227755,"post_id":75554113,"comment_id":133299963,"body_markdown":"&quot;But for negetive num of binary string, the binary string must be the complement prefixed with `-`&quot; How else would you like a negative number to be represented? 32-bit two&#39;s complement?","body":"&quot;But for negetive num of binary string, the binary string must be the complement prefixed with <code>-</code>&quot; How else would you like a negative number to be represented? 32-bit two&#39;s complement?"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1677233110,"post_id":75554113,"comment_id":133301447,"body_markdown":"It is currently not clear what you are asking. Can you add an example of what (values) you tried and what result you expected?","body":"It is currently not clear what you are asking. Can you add an example of what (values) you tried and what result you expected?"},{"owner":{"account_id":9698772,"reputation":181,"user_id":7194392,"display_name":"Jack Ma"},"score":0,"creation_date":1677560880,"post_id":75554113,"comment_id":133357473,"body_markdown":"question updated, thank you all","body":"question updated, thank you all"}],"answers":[{"tags":[],"owner":{"account_id":9596641,"reputation":873,"user_id":7125557,"display_name":"dimirsen Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677579937,"creation_date":1677579937,"answer_id":75590721,"question_id":75554113,"body_markdown":"I assume, the input is array byte[4]. So I propose this method:\r\n    \r\n    public static String getHumanComplementAsString(byte[] bs) {\r\n        int v = 0;//bs converted to a int value\r\n        for (byte b : bs) {\r\n            v = (v &lt;&lt; 8) | Byte.toUnsignedInt(b);\r\n        }\r\n        return ((bs[0] &lt; 0) ? &quot;-&quot; : &quot;&quot;) + Integer.toBinaryString(Math.abs(v));\r\n    }\r\n\r\nDon&#39;t have time to test it completely with positive values and zero. Leaving it to you :)\r\nHint. Your definition of complementary for negative integer corresponds to &quot;Human&quot; Binary representation option in [online tool][1] You can use this page for comparison with the program&#39;s result.\r\n\r\n\r\n  [1]: https://onlinebinarytools.com/encode-negative-binary","title":"Java Convert Negtive Binary String to Decimal","body":"<p>I assume, the input is array byte[4]. So I propose this method:</p>\n<pre><code>public static String getHumanComplementAsString(byte[] bs) {\n    int v = 0;//bs converted to a int value\n    for (byte b : bs) {\n        v = (v &lt;&lt; 8) | Byte.toUnsignedInt(b);\n    }\n    return ((bs[0] &lt; 0) ? &quot;-&quot; : &quot;&quot;) + Integer.toBinaryString(Math.abs(v));\n}\n</code></pre>\n<p>Don't have time to test it completely with positive values and zero. Leaving it to you :)\nHint. Your definition of complementary for negative integer corresponds to &quot;Human&quot; Binary representation option in <a href=\"https://onlinebinarytools.com/encode-negative-binary\" rel=\"nofollow noreferrer\">online tool</a> You can use this page for comparison with the program's result.</p>\n"}],"owner":{"account_id":9698772,"reputation":181,"user_id":7194392,"display_name":"Jack Ma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677579937,"creation_date":1677226797,"question_id":75554113,"body_markdown":"`Integer.parseInt(str, 2)` used to convert binary string to a decimal num.\r\nBut for negative num of binary string, the binary string must be the complement prefixed with `-`.\r\nIs there any present method to do the convert?\r\nThanks.\r\n\r\n```java\r\npublic static void main(String[] args) throws InterruptedException {\r\n    byte[] bs = {-128,1,2,0};\r\n    String bsBits = &quot;10000000000000010000001000000000&quot;;//bit representation of bs\r\n    String bsBitsComplement = &quot;-1111111111111101111111000000000&quot;;//complement of bsBits\r\n    int v = 0;//bs converted to a int value\r\n    for (int i = 0; i &lt; bs.length; i++) {\r\n        v = (v &lt;&lt; 8) | Byte.toUnsignedInt(bs[i]);\r\n    }\r\n    System.out.println(v);\r\n    String sv = Integer.toBinaryString(v);\r\n    System.out.println(sv);\r\n    System.out.println(Integer.parseInt(bsBitsComplement, 2));//success\r\n    System.out.println(Integer.parseInt(bsBits, 2));//error\r\n}\r\n```\r\nThis is the output when I run the above code:\r\n```none\r\n-2147417600\r\n10000000000000010000001000000000\r\n-2147417600\r\nException in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;10000000000000010000001000000000&quot; under radix 2\r\n\tat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\r\n\tat java.base/java.lang.Integer.parseInt(Integer.java:668)\r\n\tat baseproj/basetest.Main.main(Main.java:39)\r\n```\r\n","title":"Java Convert Negtive Binary String to Decimal","body":"<p><code>Integer.parseInt(str, 2)</code> used to convert binary string to a decimal num.\nBut for negative num of binary string, the binary string must be the complement prefixed with <code>-</code>.\nIs there any present method to do the convert?\nThanks.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    byte[] bs = {-128,1,2,0};\n    String bsBits = &quot;10000000000000010000001000000000&quot;;//bit representation of bs\n    String bsBitsComplement = &quot;-1111111111111101111111000000000&quot;;//complement of bsBits\n    int v = 0;//bs converted to a int value\n    for (int i = 0; i &lt; bs.length; i++) {\n        v = (v &lt;&lt; 8) | Byte.toUnsignedInt(bs[i]);\n    }\n    System.out.println(v);\n    String sv = Integer.toBinaryString(v);\n    System.out.println(sv);\n    System.out.println(Integer.parseInt(bsBitsComplement, 2));//success\n    System.out.println(Integer.parseInt(bsBits, 2));//error\n}\n</code></pre>\n<p>This is the output when I run the above code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-2147417600\n10000000000000010000001000000000\n-2147417600\nException in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;10000000000000010000001000000000&quot; under radix 2\n    at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\n    at java.base/java.lang.Integer.parseInt(Integer.java:668)\n    at baseproj/basetest.Main.main(Main.java:39)\n</code></pre>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":2391415,"reputation":968,"user_id":2091199,"display_name":"efan"},"score":0,"creation_date":1377438621,"post_id":18429468,"comment_id":27076608,"body_markdown":"Do you have issues with package names? As far as i see com.fasterxml.jackson.databind.ObjectMapper is part of jackson-databind-2.2.2.jar","body":"Do you have issues with package names? As far as i see com.fasterxml.jackson.databind.ObjectMapper is part of jackson-databind-2.2.2.jar"},{"owner":{"account_id":120672,"reputation":40569,"user_id":313245,"accept_rate":81,"display_name":"Hossein"},"score":0,"creation_date":1377438915,"post_id":18429468,"comment_id":27076676,"body_markdown":"The problem is that as soon as I remove the last two dependencies. I cannot compile my code because of ObjectMapper. what do u mean by &quot;package names&quot; ? thx","body":"The problem is that as soon as I remove the last two dependencies. I cannot compile my code because of ObjectMapper. what do u mean by &quot;package names&quot; ? thx"},{"owner":{"account_id":2391415,"reputation":968,"user_id":2091199,"display_name":"efan"},"score":8,"creation_date":1377439128,"post_id":18429468,"comment_id":27076748,"body_markdown":"For me this looks like you code is using org.codehaus.jackson.map.ObjectMapper instead of com.fasterxml.jackson.databind.ObjectMapper and because of this could not find class and could not compile.","body":"For me this looks like you code is using org.codehaus.jackson.map.ObjectMapper instead of com.fasterxml.jackson.databind.ObjectMapper and because of this could not find class and could not compile."},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1377556777,"post_id":18429468,"comment_id":27119811,"body_markdown":"Could you show to us problematic code?","body":"Could you show to us problematic code?"}],"answers":[{"tags":[],"owner":{"account_id":416303,"reputation":9226,"user_id":791609,"display_name":"chenrui"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1406901773,"creation_date":1406901773,"answer_id":25082040,"question_id":18429468,"body_markdown":"The package names in Jackson 2.x got changed to `com.fasterxml`[1] from `org.codehaus`[2]. So if you just need ObjectMapper, I think Jackson 1.X can satisfy with your needs.\r\n\r\n[1]: http://wiki.fasterxml.com/JacksonHome\r\n[2]: http://jackson.codehaus.org/ ","title":"Correct set of dependencies for using Jackson mapper","body":"<p>The package names in Jackson 2.x got changed to <code>com.fasterxml</code><a href=\"http://wiki.fasterxml.com/JacksonHome\" rel=\"nofollow\">1</a> from <code>org.codehaus</code><a href=\"http://jackson.codehaus.org/\" rel=\"nofollow\">2</a>. So if you just need ObjectMapper, I think Jackson 1.X can satisfy with your needs.</p>\n"},{"tags":[],"owner":{"account_id":143496,"reputation":1912,"user_id":351861,"display_name":"specializt"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1412692869,"creation_date":1412692869,"answer_id":26238676,"question_id":18429468,"body_markdown":"No, you can simply use `com.fasterxml.jackson.databind.ObjectMapper`.\r\nMost likely you forgot to fix your `import`-statements, delete all references to codehaus and you&#39;re golden.","title":"Correct set of dependencies for using Jackson mapper","body":"<p>No, you can simply use <code>com.fasterxml.jackson.databind.ObjectMapper</code>.\nMost likely you forgot to fix your <code>import</code>-statements, delete all references to codehaus and you're golden.</p>\n"},{"tags":[],"owner":{"account_id":5776587,"reputation":629,"user_id":4558497,"display_name":"ASD"},"down_vote_count":1,"up_vote_count":62,"is_accepted":false,"score":61,"last_activity_date":1427903149,"creation_date":1424784315,"answer_id":28697012,"question_id":18429468,"body_markdown":"&lt;!-- language: xml --&gt;\r\n\r\n    &lt;properties&gt;\r\n      &lt;!-- Use the latest version whenever possible. --&gt;\r\n      &lt;jackson.version&gt;2.4.4&lt;/jackson.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;${jackson.version}&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nyou have a ObjectMapper (from Jackson Databind package) handy.\r\nif so, you can do:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    JsonFactory factory = objectMapper.getFactory();\r\n\r\nSource: https://github.com/FasterXML/jackson-core\r\n\r\nSo, the 3 &quot;fasterxml&quot; dependencies which you already have in u&#39;r pom are enough for ObjectMapper as it includes &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;.\r\n","title":"Correct set of dependencies for using Jackson mapper","body":"<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n  &lt;!-- Use the latest version whenever possible. --&gt;\n  &lt;jackson.version&gt;2.4.4&lt;/jackson.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n   &lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;${jackson.version}&lt;/version&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>you have a ObjectMapper (from Jackson Databind package) handy.\nif so, you can do:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>JsonFactory factory = objectMapper.getFactory();\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/FasterXML/jackson-core\">https://github.com/FasterXML/jackson-core</a></p>\n\n<p>So, the 3 \"fasterxml\" dependencies which you already have in u'r pom are enough for ObjectMapper as it includes jackson-databind.</p>\n"},{"tags":[],"owner":{"account_id":2928799,"reputation":3144,"user_id":2511306,"accept_rate":80,"display_name":"QGA"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478347493,"creation_date":1478347493,"answer_id":40438035,"question_id":18429468,"body_markdown":"I spent few hours on this.\r\n\r\nEven if I had the right dependency the problem was fixed only after I deleted the com.fasterxml.jackson folder in the .m2 repository under C:\\Users\\username\\.m2 and updated the project","title":"Correct set of dependencies for using Jackson mapper","body":"<p>I spent few hours on this.</p>\n\n<p>Even if I had the right dependency the problem was fixed only after I deleted the com.fasterxml.jackson folder in the .m2 repository under C:\\Users\\username.m2 and updated the project</p>\n"},{"tags":[],"owner":{"account_id":236361,"reputation":14191,"user_id":503804,"accept_rate":70,"display_name":"nilesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500069682,"creation_date":1500069682,"answer_id":45112183,"question_id":18429468,"body_markdown":"Apart from fixing the imports, do a fresh `maven clean compile -U`. Note the `-U` option, that brings in new dependencies which sometimes the editor has hard time with. Let the compilation fail due to un-imported classes, but at least you have an option to import them after the maven command.\r\n\r\nJust doing Maven-&gt;Reimport from Intellij did not work for me. \r\n\r\n","title":"Correct set of dependencies for using Jackson mapper","body":"<p>Apart from fixing the imports, do a fresh <code>maven clean compile -U</code>. Note the <code>-U</code> option, that brings in new dependencies which sometimes the editor has hard time with. Let the compilation fail due to un-imported classes, but at least you have an option to import them after the maven command.</p>\n\n<p>Just doing Maven->Reimport from Intellij did not work for me. </p>\n"}],"owner":{"account_id":120672,"reputation":40569,"user_id":313245,"accept_rate":81,"display_name":"Hossein"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161111,"favorite_count":0,"down_vote_count":0,"up_vote_count":70,"answer_count":5,"score":70,"last_activity_date":1677579608,"creation_date":1377437131,"question_id":18429468,"body_markdown":"I am new to Jackson and I was writing some code for practice. I found out that the new version of Jackson library can be found on Fasterxml: [Jackson][1], so I added the below dependencies to my Maven POM-file:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n     \r\nI was expecting that I can use the `ObjectMapper` directly, however after spending a lot of time I found out that to use the `ObjectMapper` I have to add the old libraries below:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;\r\n        &lt;version&gt;1.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-core-asl&lt;/artifactId&gt;\r\n        &lt;version&gt;1.9.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI am a bit confused. Could someone please tell me why is that?\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonHome","title":"Correct set of dependencies for using Jackson mapper","body":"<p>I am new to Jackson and I was writing some code for practice. I found out that the new version of Jackson library can be found on Fasterxml: <a href=\"http://wiki.fasterxml.com/JacksonHome\" rel=\"nofollow noreferrer\">Jackson</a>, so I added the below dependencies to my Maven POM-file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;version&gt;2.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n \n</code></pre>\n<p>I was expecting that I can use the <code>ObjectMapper</code> directly, however after spending a lot of time I found out that to use the <code>ObjectMapper</code> I have to add the old libraries below:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;\n    &lt;version&gt;1.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core-asl&lt;/artifactId&gt;\n    &lt;version&gt;1.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I am a bit confused. Could someone please tell me why is that?</p>\n"},{"tags":["java","groovy","maven-3"],"comments":[{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":1,"creation_date":1524215108,"post_id":49937870,"comment_id":86891499,"body_markdown":"Did you try the versions maven plugin? It has a `set` goal which can modify the project version. ([more info](https://www.mojohaus.org/versions-maven-plugin/set-mojo.html)) However, afaik, maven parses the pom and changes which are made to the pom during the build are only taken into account in subsequent builds. In that case, you would need to invoke versions:set and then call maven a 2nd time to perform the actual build.","body":"Did you try the versions maven plugin? It has a <code>set</code> goal which can modify the project version. (<a href=\"https://www.mojohaus.org/versions-maven-plugin/set-mojo.html\" rel=\"nofollow noreferrer\">more info</a>) However, afaik, maven parses the pom and changes which are made to the pom during the build are only taken into account in subsequent builds. In that case, you would need to invoke versions:set and then call maven a 2nd time to perform the actual build."},{"owner":{"account_id":965193,"reputation":2134,"user_id":988738,"accept_rate":74,"display_name":"xbmono"},"score":0,"creation_date":1524216041,"post_id":49937870,"comment_id":86892069,"body_markdown":"@vatbub thanks for prompt reply. The groovy code determines the version so I need to execute the groovy-maven-plugin and then get the output and then run versions:set and then later mvn install. Not sure how I can do this!","body":"@vatbub thanks for prompt reply. The groovy code determines the version so I need to execute the groovy-maven-plugin and then get the output and then run versions:set and then later mvn install. Not sure how I can do this!"},{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":2,"creation_date":1524216472,"post_id":49937870,"comment_id":86892404,"body_markdown":"As I said, Maven is terribly bad at handling changes to the pom that occur during the build. I guess the best solution is to create a lightweight command line tool that just outputs the desired version to the console and pipe that output to `versions:set`","body":"As I said, Maven is terribly bad at handling changes to the pom that occur during the build. I guess the best solution is to create a lightweight command line tool that just outputs the desired version to the console and pipe that output to <code>versions:set</code>"},{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":0,"creation_date":1524216486,"post_id":49937870,"comment_id":86892409,"body_markdown":"But you probably won&#39;t get around calling maven twice","body":"But you probably won&#39;t get around calling maven twice"},{"owner":{"account_id":965193,"reputation":2134,"user_id":988738,"accept_rate":74,"display_name":"xbmono"},"score":1,"creation_date":1524818862,"post_id":49937870,"comment_id":87133668,"body_markdown":"I ended up using versions:set as you said. Actually I created a new plugin off versions:set and customised it in order to get latest tags and other information and then set version automatically","body":"I ended up using versions:set as you said. Actually I created a new plugin off versions:set and customised it in order to get latest tags and other information and then set version automatically"},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":1,"creation_date":1553805757,"post_id":49937870,"comment_id":97533625,"body_markdown":"Not something OP wants, but this is [possible with Gradle](https://stackoverflow.com/questions/32717251/how-to-set-project-version-by-passing-version-property-on-gradle-command-line).","body":"Not something OP wants, but this is <a href=\"https://stackoverflow.com/questions/32717251/how-to-set-project-version-by-passing-version-property-on-gradle-command-line\">possible with Gradle</a>."}],"answers":[{"tags":[],"owner":{"account_id":5589692,"reputation":1455,"user_id":4429292,"display_name":"StefanHeimberg"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1577332376,"creation_date":1524232588,"answer_id":49943310,"question_id":49937870,"body_markdown":"With Maven you can set the version at build time with\r\n\r\n    mvn versions:set -DnewVersion=${bamboo.inject.version}\r\n\r\nas @vatbub already commented in your question.\r\n\r\nIn addition to this i wrote a Shell script that can be used in build pipeline to generate the version according to the maven project version and add the build number from the build server.\r\n\r\nhttps://gist.github.com/StefanHeimberg/c19d7665e8df087845c036fe8b88c4f2\r\n\r\nThe Script reads the maven project version, add a the build number and writes a text file with all the new numbers that can be used.\r\n\r\nThe next step is to inject this text file in the Build Pipeline and call the versions plugin as stated above\r\n\r\n__pom.xml__:\r\n\r\nsomething like\r\n\r\n\t&lt;project&gt;\r\n\t\t\r\n\t\t&lt;groupId&gt;ch.stefanheimberg.example&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;your-awesome-app&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.1.2-SNAPSHOT&lt;/version&gt;\r\n\r\n\t&lt;/project&gt;\r\n\t\r\nor\r\n\t\r\n\t&lt;project&gt;\r\n\t\t\r\n\t\t&lt;groupId&gt;ch.stefanheimberg.example&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;your-awesome-app&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.1-SNAPSHOT&lt;/version&gt;\r\n\r\n\t&lt;/project&gt;\r\n\r\n\r\n__Step 1:__\r\n\r\n    ./generate_version_txt.sh ${bamboo.buildNumber}\r\n\r\n__Step 2:__\r\n\r\nInject generated version.txt in the build system that all the properties can be used in all tasks / plugins, etc...\r\n\r\nIn my case Bamboo CI ready the version.txt file and declares the content of the file as environment variables under the ```bamboo.inject.``` prefix.\r\n\r\nFor example ```${bamboo.inject.long_version}```\r\n\r\n__Step 3:__\r\n\r\nUpdate Maven Project version\r\n\r\n    mvn versions:set -DnewVersion=${bamboo.inject.version}\r\n\r\n__Step 4:__\r\n\r\nRun Maven Build\r\n\r\n    mvn clean verify\r\n\r\n\r\n__Step 5:__\r\n\r\nRun Docker build\r\n\r\nfor example use it also as docker tag version. etc...\r\n\r\n    docker build --build-arg version=${bamboo.inject.version} --tag your-awesome-app:${bamboo.inject.version} .\r\n\r\nExample Dockerfile:\r\n\r\n    FROM jboss/wildlfy\r\n    ARG version\r\n    ADD target/your-awesome-app-${version}.war /opt/jboss/wildfly/standalone/deployments/\r\n\r\nI know that can be a problem / not possible in your case with the groovy script. but perhaps it is an other view at your problem. and possibly also another solution for it.\r\n\r\n(sorry for my english. but i hope it is understandable what i mean)","title":"How to set project version in maven at build time?","body":"<p>With Maven you can set the version at build time with</p>\n\n<pre><code>mvn versions:set -DnewVersion=${bamboo.inject.version}\n</code></pre>\n\n<p>as @vatbub already commented in your question.</p>\n\n<p>In addition to this i wrote a Shell script that can be used in build pipeline to generate the version according to the maven project version and add the build number from the build server.</p>\n\n<p><a href=\"https://gist.github.com/StefanHeimberg/c19d7665e8df087845c036fe8b88c4f2\" rel=\"noreferrer\">https://gist.github.com/StefanHeimberg/c19d7665e8df087845c036fe8b88c4f2</a></p>\n\n<p>The Script reads the maven project version, add a the build number and writes a text file with all the new numbers that can be used.</p>\n\n<p>The next step is to inject this text file in the Build Pipeline and call the versions plugin as stated above</p>\n\n<p><strong>pom.xml</strong>:</p>\n\n<p>something like</p>\n\n<pre><code>&lt;project&gt;\n\n    &lt;groupId&gt;ch.stefanheimberg.example&lt;/groupId&gt;\n    &lt;artifactId&gt;your-awesome-app&lt;/artifactId&gt;\n    &lt;version&gt;5.1.2-SNAPSHOT&lt;/version&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;project&gt;\n\n    &lt;groupId&gt;ch.stefanheimberg.example&lt;/groupId&gt;\n    &lt;artifactId&gt;your-awesome-app&lt;/artifactId&gt;\n    &lt;version&gt;5.1-SNAPSHOT&lt;/version&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>Step 1:</strong></p>\n\n<pre><code>./generate_version_txt.sh ${bamboo.buildNumber}\n</code></pre>\n\n<p><strong>Step 2:</strong></p>\n\n<p>Inject generated version.txt in the build system that all the properties can be used in all tasks / plugins, etc...</p>\n\n<p>In my case Bamboo CI ready the version.txt file and declares the content of the file as environment variables under the <code>bamboo.inject.</code> prefix.</p>\n\n<p>For example <code>${bamboo.inject.long_version}</code></p>\n\n<p><strong>Step 3:</strong></p>\n\n<p>Update Maven Project version</p>\n\n<pre><code>mvn versions:set -DnewVersion=${bamboo.inject.version}\n</code></pre>\n\n<p><strong>Step 4:</strong></p>\n\n<p>Run Maven Build</p>\n\n<pre><code>mvn clean verify\n</code></pre>\n\n<p><strong>Step 5:</strong></p>\n\n<p>Run Docker build</p>\n\n<p>for example use it also as docker tag version. etc...</p>\n\n<pre><code>docker build --build-arg version=${bamboo.inject.version} --tag your-awesome-app:${bamboo.inject.version} .\n</code></pre>\n\n<p>Example Dockerfile:</p>\n\n<pre><code>FROM jboss/wildlfy\nARG version\nADD target/your-awesome-app-${version}.war /opt/jboss/wildfly/standalone/deployments/\n</code></pre>\n\n<p>I know that can be a problem / not possible in your case with the groovy script. but perhaps it is an other view at your problem. and possibly also another solution for it.</p>\n\n<p>(sorry for my english. but i hope it is understandable what i mean)</p>\n"},{"tags":[],"owner":{"account_id":231967,"reputation":411,"user_id":496489,"display_name":"eschnou"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539895680,"creation_date":1539895680,"answer_id":52882324,"question_id":49937870,"body_markdown":"I ran into a similar problem and ended up using the [maven flatten plugin][1] to ensure that all variables are removed from the POMs before being deployed. This remove all references to the string ${revision} and replace by the actual value at build time, without interfering with the original POMs.\r\n\r\n\r\n  [1]: https://www.mojohaus.org/flatten-maven-plugin/","title":"How to set project version in maven at build time?","body":"<p>I ran into a similar problem and ended up using the <a href=\"https://www.mojohaus.org/flatten-maven-plugin/\" rel=\"nofollow noreferrer\">maven flatten plugin</a> to ensure that all variables are removed from the POMs before being deployed. This remove all references to the string ${revision} and replace by the actual value at build time, without interfering with the original POMs.</p>\n"},{"tags":[],"owner":{"account_id":5325338,"reputation":387,"user_id":4247530,"display_name":"Thomas LIMIN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677579598,"creation_date":1677579598,"answer_id":75590660,"question_id":49937870,"body_markdown":"You can use https://maven.apache.org/maven-ci-friendly.html\r\n\r\nand simply set:\r\n\r\n    &lt;project&gt;\r\n       &lt;version&gt;${revision}&lt;/version&gt;\r\n\r\n(revision is a maven reserved property)\r\n\r\nThe idea is that the version is no longer in the pom.xml. You have to set it as a maven arg :\r\n\r\n`mvn -Drevision=what.you.want …`\r\n\r\nThe value for revision can be pickup up from anywhere : for example, if your build environment is gitlab-ci, you can use the CI_COMMIT_TAG environment variable to get the version from the git tag.\r\n\r\n`mvn -Drevision=$CI_COMMIT_TAG …`","title":"How to set project version in maven at build time?","body":"<p>You can use <a href=\"https://maven.apache.org/maven-ci-friendly.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/maven-ci-friendly.html</a></p>\n<p>and simply set:</p>\n<pre><code>&lt;project&gt;\n   &lt;version&gt;${revision}&lt;/version&gt;\n</code></pre>\n<p>(revision is a maven reserved property)</p>\n<p>The idea is that the version is no longer in the pom.xml. You have to set it as a maven arg :</p>\n<p><code>mvn -Drevision=what.you.want …</code></p>\n<p>The value for revision can be pickup up from anywhere : for example, if your build environment is gitlab-ci, you can use the CI_COMMIT_TAG environment variable to get the version from the git tag.</p>\n<p><code>mvn -Drevision=$CI_COMMIT_TAG …</code></p>\n"}],"owner":{"account_id":965193,"reputation":2134,"user_id":988738,"accept_rate":74,"display_name":"xbmono"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20019,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1677579598,"creation_date":1524214765,"question_id":49937870,"body_markdown":"I am trying to implement semantic versioning in our project. I tested maven semver plugin but that didn&#39;t help me so please don&#39;t ask me why. I finally ended up using maven groovy. It works like a charm, however, when I install or deploy the maven project the version in repository is the variable name. \r\n\r\nThis is despite the fact that all the artefacts and jar files are packaged with correct version.\r\n\r\nSo please look at my pom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n                          http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.mytest.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;test-tag&lt;/artifactId&gt;\r\n        &lt;version&gt;${revision}&lt;/version&gt; \r\n    \r\n    \r\n        &lt;description&gt;Test&lt;/description&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;ChangeType&gt;TO_BE_SET&lt;/ChangeType&gt;\r\n        &lt;/properties&gt;\r\n        \r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;gmaven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.5&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;validate&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;execute&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;providerSelection&gt;2.0&lt;/providerSelection&gt;\r\n                                &lt;properties&gt;\r\n                                    &lt;script&gt;git describe --abbrev=0 --tags&lt;/script&gt;\r\n                                &lt;/properties&gt;\r\n                                &lt;source&gt;\r\n                                    def tagIt = &#39;git tag -a vXXXX -m &quot;Auto tagged&quot;&#39;\r\n                                    def changeType = project.properties.ChangeType\r\n                                    def command = project.properties.script\r\n                                    def process = command.execute()\r\n                                    process.waitFor()\r\n                                    def describe = process.in.text.trim()\r\n                                    println &quot;Setting revision to: &quot; + describe\r\n    \r\n                                    if(!describe.startsWith(&quot;v&quot;)) {\r\n                                        describe = &quot;1.0.1&quot;\r\n                                    } else {\r\n                                        describe = describe.substring(1)\r\n                                    }\r\n    \r\n                                        project.properties.setProperty(&#39;revision&#39;, describe)\r\n\r\n    \r\n                                &lt;/source&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                \r\n              \r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-compile&lt;/id&gt;\r\n                            &lt;phase&gt;none&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-testCompile&lt;/id&gt;\r\n                            &lt;phase&gt;none&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-testResources&lt;/id&gt;\r\n                            &lt;phase&gt;none&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-jar&lt;/id&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-test&lt;/id&gt;\r\n                            &lt;phase&gt;none&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nthe version is ${revision} a variable name that is being set in groovy script. What groovy code does is getting the last tag from GIT and and then set it to the property &#39;revision&#39;.\r\n\r\nThe final jar file has the correct version extracted but when installed into repository, the folder name and jar name are like:\r\n\r\n&gt; m2\\repository\\com\\mytest\\test\\test-tag\\${revision}\\test-tag-${revision}.jar\r\n\r\nI tried to default &#39;revision&#39; to a value using:\r\n\r\n    &lt;properties&gt;\r\n      &lt;revision&gt;1.0.1&lt;/revision&gt;\r\n    &lt;/properties&gt;\r\n\r\nbut then groovy code setting the value has no effect.\r\n\r\nI also tried different phase for the maven groovy plugin, no luck. Have I missed anything? Can anyone please help me on this?\r\n\r\nI&#39;d like to mention that as vatbub and StefanHeimberg mentioned I can use versions:set to set the version but this requires me to do an extra commit to GIT which I am trying to avoid, wondering if I can achieve this by writing a maven plugin instead? \r\n","title":"How to set project version in maven at build time?","body":"<p>I am trying to implement semantic versioning in our project. I tested maven semver plugin but that didn't help me so please don't ask me why. I finally ended up using maven groovy. It works like a charm, however, when I install or deploy the maven project the version in repository is the variable name. </p>\n\n<p>This is despite the fact that all the artefacts and jar files are packaged with correct version.</p>\n\n<p>So please look at my pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n                      http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.mytest.test&lt;/groupId&gt;\n    &lt;artifactId&gt;test-tag&lt;/artifactId&gt;\n    &lt;version&gt;${revision}&lt;/version&gt; \n\n\n    &lt;description&gt;Test&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;ChangeType&gt;TO_BE_SET&lt;/ChangeType&gt;\n    &lt;/properties&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\n                &lt;artifactId&gt;gmaven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.5&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;execute&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;providerSelection&gt;2.0&lt;/providerSelection&gt;\n                            &lt;properties&gt;\n                                &lt;script&gt;git describe --abbrev=0 --tags&lt;/script&gt;\n                            &lt;/properties&gt;\n                            &lt;source&gt;\n                                def tagIt = 'git tag -a vXXXX -m \"Auto tagged\"'\n                                def changeType = project.properties.ChangeType\n                                def command = project.properties.script\n                                def process = command.execute()\n                                process.waitFor()\n                                def describe = process.in.text.trim()\n                                println \"Setting revision to: \" + describe\n\n                                if(!describe.startsWith(\"v\")) {\n                                    describe = \"1.0.1\"\n                                } else {\n                                    describe = describe.substring(1)\n                                }\n\n                                    project.properties.setProperty('revision', describe)\n\n\n                            &lt;/source&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-compile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-testCompile&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-testResources&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-jar&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-test&lt;/id&gt;\n                        &lt;phase&gt;none&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>the version is ${revision} a variable name that is being set in groovy script. What groovy code does is getting the last tag from GIT and and then set it to the property 'revision'.</p>\n\n<p>The final jar file has the correct version extracted but when installed into repository, the folder name and jar name are like:</p>\n\n<blockquote>\n  <p>m2\\repository\\com\\mytest\\test\\test-tag\\${revision}\\test-tag-${revision}.jar</p>\n</blockquote>\n\n<p>I tried to default 'revision' to a value using:</p>\n\n<pre><code>&lt;properties&gt;\n  &lt;revision&gt;1.0.1&lt;/revision&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>but then groovy code setting the value has no effect.</p>\n\n<p>I also tried different phase for the maven groovy plugin, no luck. Have I missed anything? Can anyone please help me on this?</p>\n\n<p>I'd like to mention that as vatbub and StefanHeimberg mentioned I can use versions:set to set the version but this requires me to do an extra commit to GIT which I am trying to avoid, wondering if I can achieve this by writing a maven plugin instead? </p>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":1529025,"reputation":1197,"user_id":1426728,"accept_rate":100,"display_name":"dmi_"},"score":2,"creation_date":1342576933,"post_id":11533261,"comment_id":15247604,"body_markdown":"Yes, I could, but this is useful to others as well, I hope. Also, davidbuzatto&#39;s addition has revealed a feature I didn&#39;t know about, so I&#39;ve gained more from asking this question than I would through a simple test.","body":"Yes, I could, but this is useful to others as well, I hope. Also, davidbuzatto&#39;s addition has revealed a feature I didn&#39;t know about, so I&#39;ve gained more from asking this question than I would through a simple test."}],"answers":[{"tags":[],"owner":{"account_id":996105,"reputation":182284,"user_id":1011995,"display_name":"Daniel Fischer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1342576533,"creation_date":1342576533,"answer_id":11533279,"question_id":11533261,"body_markdown":"If a `NumberFormatException` is thrown, it will be caught by the first `catch` and the second `catch` won&#39;t be executed. All other exceptions go to the second.","title":"Try-catch short-circuit/fall-through java","body":"<p>If a <code>NumberFormatException</code> is thrown, it will be caught by the first <code>catch</code> and the second <code>catch</code> won't be executed. All other exceptions go to the second.</p>\n"},{"tags":[],"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1677579517,"creation_date":1342576539,"answer_id":11533281,"question_id":11533261,"body_markdown":"No, because the more specific exception (NumberFormatException) will be handled in the first catch. It is important to note that if you swap the catches you will get a compilation error, since you MUST specify the more specific exceptions before the more general ones.\r\n\r\nIt is not your case, but since Java 7 you can group exceptions in catch like:\r\n\r\n    try {\r\n        // code that can throw exceptions...\r\n    } catch ( Exception1 | Exception2 | ExceptionN exc ) {\r\n        // you can handle Exception1, 2 and N in the same way here\r\n    } catch ( Exception exc ) {\r\n        // here you handle the rest\r\n    }","title":"Try-catch short-circuit/fall-through java","body":"<p>No, because the more specific exception (NumberFormatException) will be handled in the first catch. It is important to note that if you swap the catches you will get a compilation error, since you MUST specify the more specific exceptions before the more general ones.</p>\n<p>It is not your case, but since Java 7 you can group exceptions in catch like:</p>\n<pre><code>try {\n    // code that can throw exceptions...\n} catch ( Exception1 | Exception2 | ExceptionN exc ) {\n    // you can handle Exception1, 2 and N in the same way here\n} catch ( Exception exc ) {\n    // here you handle the rest\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1484409,"reputation":12963,"user_id":1392956,"accept_rate":62,"display_name":"Priyank Doshi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1342590215,"creation_date":1342590215,"answer_id":11534933,"question_id":11533261,"body_markdown":"try this: Added &lt;code&gt;throw new Exception() &lt;/code&gt; in **NFE** catch.\r\n\r\n    try{\r\n        Integer.parseInt(args[1])\r\n    }\r\n    \r\n    catch (NumberFormatException e){\r\n        // Catch a number format exception and handle the argument as a string\r\n        throw new Exception();      \r\n    }\r\n    \r\n    catch (Exception e){\r\n        // Catch all other exceptions and do something else. In this case\r\n        // we may get an IndexOutOfBoundsException.\r\n        // We specifically don&#39;t want to handle NumberFormatException here      \r\n    }\r\n\r\n\r\nIn this way, You can handle **NFE** in its catch block. And all other in another block. You don&#39;t need to handle **NFE** again in second block.\r\n","title":"Try-catch short-circuit/fall-through java","body":"<p>try this: Added <code>throw new Exception() </code> in <strong>NFE</strong> catch.</p>\n\n<pre><code>try{\n    Integer.parseInt(args[1])\n}\n\ncatch (NumberFormatException e){\n    // Catch a number format exception and handle the argument as a string\n    throw new Exception();      \n}\n\ncatch (Exception e){\n    // Catch all other exceptions and do something else. In this case\n    // we may get an IndexOutOfBoundsException.\n    // We specifically don't want to handle NumberFormatException here      \n}\n</code></pre>\n\n<p>In this way, You can handle <strong>NFE</strong> in its catch block. And all other in another block. You don't need to handle <strong>NFE</strong> again in second block.</p>\n"}],"owner":{"account_id":1529025,"reputation":1197,"user_id":1426728,"accept_rate":100,"display_name":"dmi_"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5033,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":11533281,"answer_count":3,"score":6,"last_activity_date":1677579517,"creation_date":1342576425,"question_id":11533261,"body_markdown":"I want to use a try-catch block to handle two cases: a specific exception, and any other exception. Can I do this? (An example)\r\n\r\n    try{\r\n        Integer.parseInt(args[1])\r\n    }\r\n    \r\n    catch (NumberFormatException e){\r\n    \t// Catch a number format exception and handle the argument as a string\t\t\r\n    }\r\n    \t\t\r\n    catch (Exception e){\r\n    \t// Catch all other exceptions and do something else. In this case\r\n        // we may get an IndexOutOfBoundsException.\r\n        // We specifically don&#39;t want to handle NumberFormatException here\t\t\r\n    }\r\n\r\nWill the NumberFormatException be handled by the bottom block as well?","title":"Try-catch short-circuit/fall-through java","body":"<p>I want to use a try-catch block to handle two cases: a specific exception, and any other exception. Can I do this? (An example)</p>\n\n<pre><code>try{\n    Integer.parseInt(args[1])\n}\n\ncatch (NumberFormatException e){\n    // Catch a number format exception and handle the argument as a string      \n}\n\ncatch (Exception e){\n    // Catch all other exceptions and do something else. In this case\n    // we may get an IndexOutOfBoundsException.\n    // We specifically don't want to handle NumberFormatException here      \n}\n</code></pre>\n\n<p>Will the NumberFormatException be handled by the bottom block as well?</p>\n"},{"tags":["java","spring","audio","webclient"],"owner":{"account_id":23652417,"reputation":25,"user_id":17681127,"display_name":"tlfdksro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677579469,"creation_date":1677096725,"question_id":75537709,"body_markdown":"I&#39;m trying to send audio file from spring server to flask server. \r\nI used MultipartBodyBuilder and Webclient to send audio MultipartFile. \r\nThe audio file is sent in an byte array.\r\nI managed to generate .wav file but the file is not playable. \r\nHow do I convert byte array back to .wav file in flask server?\r\nSorry about poor english. I&#39;ll thank for any advice. \r\n\r\n\r\nThis is spring boot part.\r\n```Java\r\n@Service\r\n@Log4j2\r\n@RequiredArgsConstructor\r\npublic class AudioInputServiceImpl implements AudioInputService{\r\n    @Override\r\n    public AudioInputResponseDto audioInput(MultipartFile audio, AudioInputRequestDto audioInputRequestDto) throws IOException{\r\n        WebClient client = WebClient.builder()\r\n                .baseUrl(&quot;http://myurl&quot;)\r\n                .defaultCookie(&quot;cookieKey&quot;, &quot;cookieValue&quot;)\r\n                .build();\r\n\r\n        MultipartBodyBuilder multipartBodyBuilder = new MultipartBodyBuilder();\r\n        multipartBodyBuilder\r\n                .part(&quot;data&quot;, audioInputRequestDto)\r\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        multipartBodyBuilder\r\n                .part(&quot;audio&quot;, new ByteArrayResource(audio.getBytes()))\r\n                .header(&quot;Content-Disposition&quot;,\r\n                        &quot;form-data; name=audio;&quot;);\r\n\r\n        AudioInputResponseDto audioInputResponseDto = client.post()\r\n                .uri(&quot;/put_data&quot;)\r\n                .contentType(MediaType.MULTIPART_FORM_DATA)\r\n                .body(BodyInserters.fromMultipartData(multipartBodyBuilder.build()))\r\n                .retrieve()\r\n                .bodyToMono(AudioInputResponseDto.class)\r\n                .block();\r\n\r\n        return audioInputResponseDto;\r\n    }\r\n}\r\n```\r\n   \r\n\r\n\r\nThis is flask part\r\n```python\r\n@app.route(&quot;/put_data&quot;, methods=[&quot;POST&quot;])\r\ndef put_data():\r\n    req = dict(request.form)\r\n    audio = request.form.get(&quot;audio&quot;)  #get audio part from request\r\n    data = json.loads(req[&#39;data&#39;])\r\n\r\n    user_id = data[&#39;userId&#39;]\r\n    text_id = data[&#39;textId&#39;]\r\n    save_path = &#39;./vc/Data/p&#39; + str(user_id)\r\n\r\n    if not os.path.isdir(save_path):\r\n        os.makedirs(save_path, exist_ok=True)\r\n        shutil.copy(&#39;./vc/Data/train_list.txt&#39;, save_path)\r\n        shutil.copy(&#39;./vc/Data/val_list.txt&#39;, save_path)\r\n\r\n    with open(save_path + &#39;/&#39; + str(text_id) + &#39;.wav&#39;, mode=&#39;wb&#39;) as f:\r\n        f.write(bytearray(audio.encode()))   #convert byte array to audio but not working well\r\n\r\n    response = {&quot;textId&quot;: text_id}\r\n    return jsonify(response), 200\r\n\r\n```  \r\n\r\n\r\n\r\npostman api request returns 200, but the audio is not playable.  \r\n\r\n[![enter image description here](https://i.stack.imgur.com/66h2X.png)](https://i.stack.imgur.com/66h2X.png)\r\n\r\nI also want to know if there are better ways to send audio file from spring server to flask server.  \r\n\r\n\r\n\r\n\r\n\r\nTried converting byte array resouce to audio file in flask server, but generated audio file is not playable. ","title":"Encode audio file sent from java to python using Webclient","body":"<p>I'm trying to send audio file from spring server to flask server.\nI used MultipartBodyBuilder and Webclient to send audio MultipartFile.\nThe audio file is sent in an byte array.\nI managed to generate .wav file but the file is not playable.\nHow do I convert byte array back to .wav file in flask server?\nSorry about poor english. I'll thank for any advice.</p>\n<p>This is spring boot part.</p>\n<pre><code>@Service\n@Log4j2\n@RequiredArgsConstructor\npublic class AudioInputServiceImpl implements AudioInputService{\n    @Override\n    public AudioInputResponseDto audioInput(MultipartFile audio, AudioInputRequestDto audioInputRequestDto) throws IOException{\n        WebClient client = WebClient.builder()\n                .baseUrl(&quot;http://myurl&quot;)\n                .defaultCookie(&quot;cookieKey&quot;, &quot;cookieValue&quot;)\n                .build();\n\n        MultipartBodyBuilder multipartBodyBuilder = new MultipartBodyBuilder();\n        multipartBodyBuilder\n                .part(&quot;data&quot;, audioInputRequestDto)\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        multipartBodyBuilder\n                .part(&quot;audio&quot;, new ByteArrayResource(audio.getBytes()))\n                .header(&quot;Content-Disposition&quot;,\n                        &quot;form-data; name=audio;&quot;);\n\n        AudioInputResponseDto audioInputResponseDto = client.post()\n                .uri(&quot;/put_data&quot;)\n                .contentType(MediaType.MULTIPART_FORM_DATA)\n                .body(BodyInserters.fromMultipartData(multipartBodyBuilder.build()))\n                .retrieve()\n                .bodyToMono(AudioInputResponseDto.class)\n                .block();\n\n        return audioInputResponseDto;\n    }\n}\n</code></pre>\n<p>This is flask part</p>\n<pre class=\"lang-py prettyprint-override\"><code>@app.route(&quot;/put_data&quot;, methods=[&quot;POST&quot;])\ndef put_data():\n    req = dict(request.form)\n    audio = request.form.get(&quot;audio&quot;)  #get audio part from request\n    data = json.loads(req['data'])\n\n    user_id = data['userId']\n    text_id = data['textId']\n    save_path = './vc/Data/p' + str(user_id)\n\n    if not os.path.isdir(save_path):\n        os.makedirs(save_path, exist_ok=True)\n        shutil.copy('./vc/Data/train_list.txt', save_path)\n        shutil.copy('./vc/Data/val_list.txt', save_path)\n\n    with open(save_path + '/' + str(text_id) + '.wav', mode='wb') as f:\n        f.write(bytearray(audio.encode()))   #convert byte array to audio but not working well\n\n    response = {&quot;textId&quot;: text_id}\n    return jsonify(response), 200\n\n</code></pre>\n<p>postman api request returns 200, but the audio is not playable.</p>\n<p><a href=\"https://i.stack.imgur.com/66h2X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/66h2X.png\" alt=\"enter image description here\" /></a></p>\n<p>I also want to know if there are better ways to send audio file from spring server to flask server.</p>\n<p>Tried converting byte array resouce to audio file in flask server, but generated audio file is not playable.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":13867576,"reputation":120,"user_id":10011738,"display_name":"amir rad"},"score":1,"creation_date":1677486564,"post_id":75578012,"comment_id":133339982,"body_markdown":"what happen if remove &quot;produce = &quot;text/plain&quot;? I think define produce and consume sometimes caused this issue.","body":"what happen if remove &quot;produce = &quot;text/plain&quot;? I think define produce and consume sometimes caused this issue."},{"owner":{"account_id":1069203,"reputation":627,"user_id":1068889,"accept_rate":75,"display_name":"Martin"},"score":0,"creation_date":1677494817,"post_id":75578012,"comment_id":133342080,"body_markdown":"Hey Amir, thank you for this 1st hint. It did not change behaviour of the service, though.","body":"Hey Amir, thank you for this 1st hint. It did not change behaviour of the service, though."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1677500454,"post_id":75578012,"comment_id":133343527,"body_markdown":"@Martin, it should be 0 for a GET request (because it doesn&#39;t have a body). For requests such as POST, the content-length represents the size of the http body payload.","body":"@Martin, it should be 0 for a GET request (because it doesn&#39;t have a body). For requests such as POST, the content-length represents the size of the http body payload."},{"owner":{"account_id":1069203,"reputation":627,"user_id":1068889,"accept_rate":75,"display_name":"Martin"},"score":0,"creation_date":1677501583,"post_id":75578012,"comment_id":133343830,"body_markdown":"My problem is that JMeter and Curl do not include content-length with GET requests. This is encouraged by HTTP 1.1. So my REST service receives a valid request, but responds with &quot;bad request&quot;.","body":"My problem is that JMeter and Curl do not include content-length with GET requests. This is encouraged by HTTP 1.1. So my REST service receives a valid request, but responds with &quot;bad request&quot;."},{"owner":{"account_id":1069203,"reputation":627,"user_id":1068889,"accept_rate":75,"display_name":"Martin"},"score":0,"creation_date":1677511305,"post_id":75578012,"comment_id":133347090,"body_markdown":"I just checked the official &quot;gs-spring-boot&quot; tutorial at Github to not have this problem. Now I have to inspect my additional dependencies on possible interferences, like Lombok  and spring-boot-starter-validation","body":"I just checked the official &quot;gs-spring-boot&quot; tutorial at Github to not have this problem. Now I have to inspect my additional dependencies on possible interferences, like Lombok  and spring-boot-starter-validation"},{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1677511797,"post_id":75578012,"comment_id":133347280,"body_markdown":"Default behaviour of spring doesn&#39;t needs `Content-Length: 0`. So, you have a config or additional dependencies causing that behaviour.","body":"Default behaviour of spring doesn&#39;t needs <code>Content-Length: 0</code>. So, you have a config or additional dependencies causing that behaviour."}],"answers":[{"tags":[],"owner":{"account_id":1069203,"reputation":627,"user_id":1068889,"accept_rate":75,"display_name":"Martin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1677579398,"creation_date":1677579398,"answer_id":75590620,"question_id":75578012,"body_markdown":"I found out, we had a Filter implementation in our project that checked on content-length and threw &quot;bad request&quot; on it missing. So basically Spring Boot just did what we told it to. The filter was intented to improve a @PostMapping, but of course, it was enabled globally.","title":"Why does my Spring Boot 3 RestController with @GetMapping require header &quot;content-length: 0&quot; to be set?","body":"<p>I found out, we had a Filter implementation in our project that checked on content-length and threw &quot;bad request&quot; on it missing. So basically Spring Boot just did what we told it to. The filter was intented to improve a @PostMapping, but of course, it was enabled globally.</p>\n"}],"owner":{"account_id":1069203,"reputation":627,"user_id":1068889,"accept_rate":75,"display_name":"Martin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75590620,"answer_count":1,"score":-2,"last_activity_date":1677579398,"creation_date":1677485012,"question_id":75578012,"body_markdown":"My Spring Boot 3 `@RestController` and `@GetMapping` responds with HTTP status code 400 &quot;bad request&quot;, unless the HTTP request contains header &quot;content-length: 0&quot;. I am using `spring-boot-starter-parent:3.0.2` and required libraries.\r\n\r\nI wrote an integration test using Spring `RestTemplate` to call my service. The `RestTemplate` requests always contain &quot;content-length: 0&quot;. This behaviour just occured to me, when I set up a JMeter test and received &quot;bad request&quot; responses. This is because JMeter does not include content-length in GET requests. HTTP 1.1 encourages this behaviour as the info is redundant. [RFC 9110][1] \r\n\r\n&gt; A user agent SHOULD NOT send a Content-Length header field when the request message does not contain content and the method semantics do not anticipate such data.\r\n\r\nTo me it seems like an error with Spring Boot 3. But maybe I have misconfigured something? Can you think of something that triggers this problem?\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/v1/myService&quot;)\r\n@Component\r\n@Slf4j\r\nclass GetServlet {\r\n  @GetMapping(value = &quot;/greeting&quot;, produces = &quot;text/plain&quot;)\r\n  public ResponseEntity getGreeting() {\r\n    log.debug(&quot;Sending greeting&quot;);\r\n    return ResponseEntity.ok(&quot;Hello world!&quot;);\r\n  }\r\n}\r\n```\r\n\r\nRemoving parameter &quot;produces&quot; did not change the service.\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/v1/myService&quot;)\r\n@Component\r\n@Slf4j\r\nclass GetServlet {\r\n  @GetMapping(value = &quot;/greeting&quot;)\r\n  public ResponseEntity getGreeting() {\r\n    log.debug(&quot;Sending greeting&quot;);\r\n    return ResponseEntity.ok()\r\n            .contentType(MediaType.valueOf(&quot;text/plain&quot;))\r\n            .body(&quot;Hello world!&quot;);\r\n  }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc9110.html#name-content-length","title":"Why does my Spring Boot 3 RestController with @GetMapping require header &quot;content-length: 0&quot; to be set?","body":"<p>My Spring Boot 3 <code>@RestController</code> and <code>@GetMapping</code> responds with HTTP status code 400 &quot;bad request&quot;, unless the HTTP request contains header &quot;content-length: 0&quot;. I am using <code>spring-boot-starter-parent:3.0.2</code> and required libraries.</p>\n<p>I wrote an integration test using Spring <code>RestTemplate</code> to call my service. The <code>RestTemplate</code> requests always contain &quot;content-length: 0&quot;. This behaviour just occured to me, when I set up a JMeter test and received &quot;bad request&quot; responses. This is because JMeter does not include content-length in GET requests. HTTP 1.1 encourages this behaviour as the info is redundant. <a href=\"https://www.rfc-editor.org/rfc/rfc9110.html#name-content-length\" rel=\"nofollow noreferrer\">RFC 9110</a></p>\n<blockquote>\n<p>A user agent SHOULD NOT send a Content-Length header field when the request message does not contain content and the method semantics do not anticipate such data.</p>\n</blockquote>\n<p>To me it seems like an error with Spring Boot 3. But maybe I have misconfigured something? Can you think of something that triggers this problem?</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/v1/myService&quot;)\n@Component\n@Slf4j\nclass GetServlet {\n  @GetMapping(value = &quot;/greeting&quot;, produces = &quot;text/plain&quot;)\n  public ResponseEntity getGreeting() {\n    log.debug(&quot;Sending greeting&quot;);\n    return ResponseEntity.ok(&quot;Hello world!&quot;);\n  }\n}\n</code></pre>\n<p>Removing parameter &quot;produces&quot; did not change the service.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/v1/myService&quot;)\n@Component\n@Slf4j\nclass GetServlet {\n  @GetMapping(value = &quot;/greeting&quot;)\n  public ResponseEntity getGreeting() {\n    log.debug(&quot;Sending greeting&quot;);\n    return ResponseEntity.ok()\n            .contentType(MediaType.valueOf(&quot;text/plain&quot;))\n            .body(&quot;Hello world!&quot;);\n  }\n}\n</code></pre>\n"},{"tags":["java","android","openstreetmap","openweathermap"],"owner":{"account_id":20787700,"reputation":1,"user_id":15266573,"display_name":"Prachi Pathak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677579284,"creation_date":1677579284,"question_id":75590598,"body_markdown":"I am trying to set openweather map diffrent tiles on a open street map in android studio . if anyone could share a demo code for this of a android application using java.\r\n\r\nI tried to use tile provide to set tiles , but nothing works perfectly .","title":"openweather map tiles implementation on osm in android","body":"<p>I am trying to set openweather map diffrent tiles on a open street map in android studio . if anyone could share a demo code for this of a android application using java.</p>\n<p>I tried to use tile provide to set tiles , but nothing works perfectly .</p>\n"},{"tags":["java","byte","extract","extaudiofile"],"comments":[{"owner":{"account_id":4561654,"reputation":3050,"user_id":3703819,"display_name":"dey"},"score":0,"creation_date":1677578315,"post_id":75590332,"comment_id":133361152,"body_markdown":"Does this answer your question? [Java FileInputStream](https://stackoverflow.com/questions/15489903/java-fileinputstream)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/15489903/java-fileinputstream\">Java FileInputStream</a>"},{"owner":{"account_id":4561654,"reputation":3050,"user_id":3703819,"display_name":"dey"},"score":0,"creation_date":1677578323,"post_id":75590332,"comment_id":133361156,"body_markdown":"possible duplicate: https://stackoverflow.com/questions/15489903/java-fileinputstream","body":"possible duplicate: <a href=\"https://stackoverflow.com/questions/15489903/java-fileinputstream\" title=\"java fileinputstream\">stackoverflow.com/questions/15489903/java-fileinputstream</a>"},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1677578639,"post_id":75590332,"comment_id":133361247,"body_markdown":"Does this answer your question? [Read a binary file in Java](https://stackoverflow.com/questions/5470812/read-a-binary-file-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5470812/read-a-binary-file-in-java\">Read a binary file in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":3352721,"reputation":1057,"user_id":2816429,"display_name":"HariHaravelan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677578480,"creation_date":1677578480,"answer_id":75590446,"question_id":75590332,"body_markdown":"To read a `.wav` file as bytes in Java, you can use the java.io package to create an input stream from the .wav file and then read the bytes from the input stream.\r\n\r\n\r\n        public static void main(String[] args) throws IOException {\r\n           byte[] bytes = fileToBytes(&quot;/yourPath/audio.wav&quot;);\r\n        }\r\n    \r\n        private static byte[] fileToBytes(String filePath) throws IOException {\r\n            File file = new File(filePath);\r\n            byte[] bytes = new byte[(int) file.length()];\r\n            try(InputStream inputStream = Files.newInputStream(file.toPath())) {\r\n                inputStream.read(bytes);\r\n            }\r\n            return bytes;\r\n        }","title":"Byte extraction in java","body":"<p>To read a <code>.wav</code> file as bytes in Java, you can use the java.io package to create an input stream from the .wav file and then read the bytes from the input stream.</p>\n<pre><code>    public static void main(String[] args) throws IOException {\n       byte[] bytes = fileToBytes(&quot;/yourPath/audio.wav&quot;);\n    }\n\n    private static byte[] fileToBytes(String filePath) throws IOException {\n        File file = new File(filePath);\n        byte[] bytes = new byte[(int) file.length()];\n        try(InputStream inputStream = Files.newInputStream(file.toPath())) {\n            inputStream.read(bytes);\n        }\n        return bytes;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677578946,"creation_date":1677578946,"answer_id":75590513,"question_id":75590332,"body_markdown":"Please use javax.sound.sampled.AudioInputStream to read in bytes\r\n\r\n&gt;This is an InputStream which is specialized for reading audio files. In particular, it only allows operations to act on a multiple of the audio stream&#39;s frame size.\r\n\r\n                File file = new File(&quot;audio.wav&quot;);\r\n                AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(file);\r\n                byte[] audioData = new byte[(int) file.length()];\r\n                audioInputStream.read(audioData);\r\n\r\nOR `FileInputStream`:\r\n\r\n&gt;A FileInputStream obtains input bytes from a file in a file system. What files are available depends on the host environment.\r\nFileInputStream is meant for reading streams of raw bytes such as image data. For reading streams of characters, consider using FileReader.\r\n\r\n    \r\n            File file = new File(&quot;audio.wav&quot;);\r\n            FileInputStream inputStream = new FileInputStream(file);\r\n            byte[] bytes = inputStream.readAllBytes();//Read\r\n            \r\n","title":"Byte extraction in java","body":"<p>Please use javax.sound.sampled.AudioInputStream to read in bytes</p>\n<blockquote>\n<p>This is an InputStream which is specialized for reading audio files. In particular, it only allows operations to act on a multiple of the audio stream's frame size.</p>\n</blockquote>\n<pre><code>            File file = new File(&quot;audio.wav&quot;);\n            AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(file);\n            byte[] audioData = new byte[(int) file.length()];\n            audioInputStream.read(audioData);\n</code></pre>\n<p>OR <code>FileInputStream</code>:</p>\n<blockquote>\n<p>A FileInputStream obtains input bytes from a file in a file system. What files are available depends on the host environment.\nFileInputStream is meant for reading streams of raw bytes such as image data. For reading streams of characters, consider using FileReader.</p>\n</blockquote>\n<pre><code>        File file = new File(&quot;audio.wav&quot;);\n        FileInputStream inputStream = new FileInputStream(file);\n        byte[] bytes = inputStream.readAllBytes();//Read\n        \n</code></pre>\n"}],"owner":{"account_id":27890801,"reputation":1,"user_id":21297209,"display_name":"P4L"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1677578946,"creation_date":1677577743,"question_id":75590332,"body_markdown":"I want to extract the bytes from a wav file in Java and I don&#39;t know how. I tried this but it doesn&#39;t work:\r\n\r\n```\r\npublic class AudioFiles {\r\n    public static void main(String[] args) throws FileNotFoundException {\r\n    \tFile file= new File(&quot;audio.wav&quot;);\r\n    \tScanner s= new Scanner(file);\r\n    \tSystem.out.println(s.nextLine());\r\n```","title":"Byte extraction in java","body":"<p>I want to extract the bytes from a wav file in Java and I don't know how. I tried this but it doesn't work:</p>\n<pre><code>public class AudioFiles {\n    public static void main(String[] args) throws FileNotFoundException {\n        File file= new File(&quot;audio.wav&quot;);\n        Scanner s= new Scanner(file);\n        System.out.println(s.nextLine());\n</code></pre>\n"},{"tags":["java","spring-boot","rest","http","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":3436150,"reputation":622,"user_id":2879245,"accept_rate":71,"display_name":"Michał Marcinkowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677574771,"creation_date":1677574771,"answer_id":75589822,"question_id":75589642,"body_markdown":"`ResponseEntity.created()` returns a builder object which lets you modify response accordingly to your needs (take a look at a sample below). By default this URI parameter should point to api method which lets you read that method (including id). Those methods will set the response code automatically created(201), ok(200), but if you do need to modify it you may annotate the method with @ResponseStatus(HttpStatus.XXX).\r\n\r\ni.e.\r\n```\r\nResponseEntity.created(uriToTheCreatedObject)\r\n  .body(id)\r\n```\r\n\r\nIf you removing you may return just `ResponseEntity.ok()`, ","title":"Spring Boot REST API : Returning status code of ResponseEntity?","body":"<p><code>ResponseEntity.created()</code> returns a builder object which lets you modify response accordingly to your needs (take a look at a sample below). By default this URI parameter should point to api method which lets you read that method (including id). Those methods will set the response code automatically created(201), ok(200), but if you do need to modify it you may annotate the method with @ResponseStatus(HttpStatus.XXX).</p>\n<p>i.e.</p>\n<pre><code>ResponseEntity.created(uriToTheCreatedObject)\n  .body(id)\n</code></pre>\n<p>If you removing you may return just <code>ResponseEntity.ok()</code>,</p>\n"},{"tags":[],"owner":{"account_id":890938,"reputation":958,"user_id":929227,"accept_rate":78,"display_name":"Kowlown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677576781,"creation_date":1677576207,"answer_id":75590065,"question_id":75589642,"body_markdown":"You can use the static method **status** to personalize your http status.\r\nEx: \r\n\r\n    ResponseEntity.status(HttpStatus.ACCEPTED).build();\r\n\r\nwith a body : \r\n\r\n    ResponseEntity.status(HttpStatus.OK).body(&quot;a message&quot;);\r\n    ResponseEntity.status(HttpStatus.CREATED).body(&quot;a message&quot;);\r\n\r\nAs a rule of thumb the http code I use the standard REST operations (POST,PUT,GET,DELETE)\r\n- POST=&gt; HttpCode 201 (CREATED)\r\n- PUT, GET =&gt; HttpCode 200 (OK)\r\n- DELETE =&gt; HttpCode 204 (NO_CONTENT)","title":"Spring Boot REST API : Returning status code of ResponseEntity?","body":"<p>You can use the static method <strong>status</strong> to personalize your http status.\nEx:</p>\n<pre><code>ResponseEntity.status(HttpStatus.ACCEPTED).build();\n</code></pre>\n<p>with a body :</p>\n<pre><code>ResponseEntity.status(HttpStatus.OK).body(&quot;a message&quot;);\nResponseEntity.status(HttpStatus.CREATED).body(&quot;a message&quot;);\n</code></pre>\n<p>As a rule of thumb the http code I use the standard REST operations (POST,PUT,GET,DELETE)</p>\n<ul>\n<li>POST=&gt; HttpCode 201 (CREATED)</li>\n<li>PUT, GET =&gt; HttpCode 200 (OK)</li>\n<li>DELETE =&gt; HttpCode 204 (NO_CONTENT)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3819165,"reputation":1091,"user_id":3167672,"display_name":"VinhNT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677578835,"creation_date":1677578835,"answer_id":75590504,"question_id":75589642,"body_markdown":"Each API Endpoint should return one HttpStatus in success response. Normally, it will be 2xx status code\r\nFor your case, you can return HttpStatus.ok like this\r\n\r\n      @PostMapping(&quot;/categories&quot;)\r\n      @ResponseStatus(HttpStatus.OK)\r\n      public ApiResponse&lt;CommandResponse&gt; create(@Valid @RequestBody CategoryRequest request) {\r\n        CommandResponse response = categoryService.create(request);\r\n        return new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response);\r\n      }\r\n\r\nIn the case of failure response, you had @RestControllerAdvice already, each of exception will be handled and return with corresponding HttpStatus code, and better have one generic exception handler to avoid breaking the request context thread like this\r\n\r\n      @ResponseBody\r\n      @ExceptionHandler(Throwable.class)\r\n      @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)\r\n      public void handleException(Throwable ex) {\r\n        log.error(&quot;Internal Server Error&quot;, ex);\r\n      }\r\n","title":"Spring Boot REST API : Returning status code of ResponseEntity?","body":"<p>Each API Endpoint should return one HttpStatus in success response. Normally, it will be 2xx status code\nFor your case, you can return HttpStatus.ok like this</p>\n<pre><code>  @PostMapping(&quot;/categories&quot;)\n  @ResponseStatus(HttpStatus.OK)\n  public ApiResponse&lt;CommandResponse&gt; create(@Valid @RequestBody CategoryRequest request) {\n    CommandResponse response = categoryService.create(request);\n    return new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response);\n  }\n</code></pre>\n<p>In the case of failure response, you had @RestControllerAdvice already, each of exception will be handled and return with corresponding HttpStatus code, and better have one generic exception handler to avoid breaking the request context thread like this</p>\n<pre><code>  @ResponseBody\n  @ExceptionHandler(Throwable.class)\n  @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)\n  public void handleException(Throwable ex) {\n    log.error(&quot;Internal Server Error&quot;, ex);\n  }\n</code></pre>\n"}],"owner":{"display_name":"user21263160"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75590065,"answer_count":3,"score":0,"last_activity_date":1677578835,"creation_date":1677573623,"question_id":75589642,"body_markdown":"I use the following approach in my Spring Boot REST API controller and in here, I generally return `ResponseEntity.ok()` as I also want to pass returned data to the client. \r\n\r\nHowever, I want to return proper statuses based on the operations. For example, after creating a record, I should use `ResponseEntity.created()`, and so on. I tried to use it, but it just takes `URI location` as a parameter and I am not sure about the folowing points:\r\n\r\n**1)** How should I return create, edit and delete requests using `ResponseEntity` in Spring Boot apps properly? \r\n\r\n**2)** I am not sure how to return the id of the created record or some data of the created record to the client by using `ResponseEntity.created()`.\r\n\r\n```\r\n@PostMapping(&quot;/categories&quot;)\r\npublic ResponseEntity&lt;ApiResponse&lt;CommandResponse&gt;&gt; create(\r\n            @Valid @RequestBody CategoryRequest request) {\r\n        CommandResponse response = categoryService.create(request);\r\n    return ResponseEntity.ok(\r\n        new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response));\r\n}\r\n```\r\n\r\nI also use a custom `ApiResponse` class to wrap the response with necessary info. \r\n\r\nNote: I also implemented a Global Exception Handler using `@RestControllerAdvice`. I just want to use and return correct request type for POST, PUT and DELETE besides GET. \r\n\r\n","title":"Spring Boot REST API : Returning status code of ResponseEntity?","body":"<p>I use the following approach in my Spring Boot REST API controller and in here, I generally return <code>ResponseEntity.ok()</code> as I also want to pass returned data to the client.</p>\n<p>However, I want to return proper statuses based on the operations. For example, after creating a record, I should use <code>ResponseEntity.created()</code>, and so on. I tried to use it, but it just takes <code>URI location</code> as a parameter and I am not sure about the folowing points:</p>\n<p><strong>1)</strong> How should I return create, edit and delete requests using <code>ResponseEntity</code> in Spring Boot apps properly?</p>\n<p><strong>2)</strong> I am not sure how to return the id of the created record or some data of the created record to the client by using <code>ResponseEntity.created()</code>.</p>\n<pre><code>@PostMapping(&quot;/categories&quot;)\npublic ResponseEntity&lt;ApiResponse&lt;CommandResponse&gt;&gt; create(\n            @Valid @RequestBody CategoryRequest request) {\n        CommandResponse response = categoryService.create(request);\n    return ResponseEntity.ok(\n        new ApiResponse&lt;&gt;(Instant.now(clock).toEpochMilli(), SUCCESS, response));\n}\n</code></pre>\n<p>I also use a custom <code>ApiResponse</code> class to wrap the response with necessary info.</p>\n<p>Note: I also implemented a Global Exception Handler using <code>@RestControllerAdvice</code>. I just want to use and return correct request type for POST, PUT and DELETE besides GET.</p>\n"},{"tags":["java","tomcat","startup","pid","tomcat9"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1625587859,"post_id":68273611,"comment_id":120664365,"body_markdown":"Did you install Tomcat with apt?","body":"Did you install Tomcat with apt?"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1625598597,"post_id":68273611,"comment_id":120668184,"body_markdown":"You have the same problem as in [this question](https://stackoverflow.com/q/67253906/11748454): you didn&#39;t specify the PIDFile property so SystemD does not know where to find it.","body":"You have the same problem as in <a href=\"https://stackoverflow.com/q/67253906/11748454\">this question</a>: you didn&#39;t specify the PIDFile property so SystemD does not know where to find it."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1625602234,"post_id":68273611,"comment_id":120669315,"body_markdown":"Find the process with `pgrep -af &#39;java .*catalina.startup.Bootstrap&#39;` or `ps -lf -C &#39;java&#39; | grep &#39;.*catalina.startup.Bootstrap&#39;`","body":"Find the process with <code>pgrep -af &#39;java .*catalina.startup.Bootstrap&#39;</code> or <code>ps -lf -C &#39;java&#39; | grep &#39;.*catalina.startup.Bootstrap&#39;</code>"},{"owner":{"account_id":3123686,"reputation":770,"user_id":2642983,"accept_rate":50,"display_name":"Roberto Milani"},"score":0,"creation_date":1625607427,"post_id":68273611,"comment_id":120670704,"body_markdown":"@g00se No, I&#39;ve just downloaded the tar.gz version of Tomcat, then extracted to /opt folder and created the tomcat.service file.","body":"@g00se No, I&#39;ve just downloaded the tar.gz version of Tomcat, then extracted to /opt folder and created the tomcat.service file."},{"owner":{"account_id":3123686,"reputation":770,"user_id":2642983,"accept_rate":50,"display_name":"Roberto Milani"},"score":0,"creation_date":1625607430,"post_id":68273611,"comment_id":120670705,"body_markdown":"@PiotrP.Karwasz Thanks for your answer, I&#39;ll give a try and I&#39;ll let you know :)","body":"@PiotrP.Karwasz Thanks for your answer, I&#39;ll give a try and I&#39;ll let you know :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1625612295,"post_id":68273611,"comment_id":120671660,"body_markdown":"I&#39;d strongly recommend using the package manager","body":"I&#39;d strongly recommend using the package manager"}],"answers":[{"tags":[],"owner":{"account_id":5849976,"reputation":3063,"user_id":8047262,"accept_rate":75,"display_name":"7guyo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641972403,"creation_date":1641972403,"answer_id":70677727,"question_id":68273611,"body_markdown":"\r\nEnsure that the Environment points to existing path. In my case JAVA_HOME was set to non existent java.","title":"PID file found but either no matching process was found or the current user does not have permission to stop the process","body":"<p>Ensure that the Environment points to existing path. In my case JAVA_HOME was set to non existent java.</p>\n"},{"tags":[],"owner":{"account_id":9615400,"reputation":11,"user_id":14690799,"display_name":"Ferhat Kacar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646641433,"creation_date":1646641433,"answer_id":71378186,"question_id":68273611,"body_markdown":"I had a same issue short time ago.My problem was systemd unit file was addressing wrong arch java.Changed JAVA_HOME and fixed.","title":"PID file found but either no matching process was found or the current user does not have permission to stop the process","body":"<p>I had a same issue short time ago.My problem was systemd unit file was addressing wrong arch java.Changed JAVA_HOME and fixed.</p>\n"},{"tags":[],"owner":{"account_id":27007825,"reputation":1,"user_id":20567987,"display_name":"Ong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669657577,"creation_date":1669657549,"answer_id":74604550,"question_id":68273611,"body_markdown":"I have the same issue with permission granted, java installed, JAVA_HOME correctly configured.\r\n\r\nSolved it by adding a &quot;&quot; at the ExecStart and ExecStop path\r\n\r\n \r\n\r\n    ExecStart=&quot;/opt/tomcat-latest/bin/startup.sh&quot;\r\n    ExecStop=&quot;/opt/tomcat-latest/bin/shutdown.sh&quot;\r\n\r\n","title":"PID file found but either no matching process was found or the current user does not have permission to stop the process","body":"<p>I have the same issue with permission granted, java installed, JAVA_HOME correctly configured.</p>\n<p>Solved it by adding a &quot;&quot; at the ExecStart and ExecStop path</p>\n<pre><code>ExecStart=&quot;/opt/tomcat-latest/bin/startup.sh&quot;\nExecStop=&quot;/opt/tomcat-latest/bin/shutdown.sh&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5577204,"reputation":310,"user_id":4420271,"accept_rate":78,"display_name":"philburns"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677578714,"creation_date":1677578714,"answer_id":75590484,"question_id":68273611,"body_markdown":"I encountered this error message, while addressing a Java installation that was installed using sdkman and was installed under `/root`, hence being not accessible for the `tomcat` user.\r\n\r\nI solved it by installing sdkman as user `tomcat` and then installing the same Java version in a directory that was accessible by `tomcat`. Last, I changed the path in my service file, of course.","title":"PID file found but either no matching process was found or the current user does not have permission to stop the process","body":"<p>I encountered this error message, while addressing a Java installation that was installed using sdkman and was installed under <code>/root</code>, hence being not accessible for the <code>tomcat</code> user.</p>\n<p>I solved it by installing sdkman as user <code>tomcat</code> and then installing the same Java version in a directory that was accessible by <code>tomcat</code>. Last, I changed the path in my service file, of course.</p>\n"}],"owner":{"account_id":3123686,"reputation":770,"user_id":2642983,"accept_rate":50,"display_name":"Roberto Milani"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13004,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1677578714,"creation_date":1625586300,"question_id":68273611,"body_markdown":"I&#39;m facing a problem with Apache Tomcat 9.0.50, Ubuntu Server 18.04 LTS and Java JDK 8.\r\n\r\nI am not able to start Tomcat9 as a service, because if I check its status after started, it shows the error: **PID file found but either no matching process was found or the current user does not have permission to stop the process. Stop aborted.**\r\n\r\nI&#39;ve created a dedicated group and user for Tomcat (group tomcat9, user tomcat9).\r\n\r\nIf I check the ps (process-show) Linux tool, for example with:\r\n    \r\n    ps -faux | grep tomcat\r\n\r\nTomcat is not present, so the process is not active.\r\n\r\nI&#39;m running **sudo systemctl start tomcat.service**\r\n\r\nwith the &quot;sadmin&quot; account that belongs to sudoers and also belongs to tomcat9 group.\r\n\r\n\r\n    Jul 06 17:14:55 i-s-023 systemd[1]: Starting Tomcat9...\r\n    Jul 06 17:14:55 i-s-023 startup.sh[5257]: Existing PID file found during start.\r\n    Jul 06 17:14:55 i-s-023 startup.sh[5257]: Removing/clearing stale PID file.\r\n    Jul 06 17:14:55 i-s-023 startup.sh[5257]: Tomcat started.\r\n    Jul 06 17:14:55 i-s-023 shutdown.sh[5279]: PID file found but either no matching process was found or the current user does not have permission to stop the process. Stop aborted.\r\n    Jul 06 17:14:55 i-s-023 systemd[1]: tomcat.service: Control process exited, code=exited status=1\r\n    Jul 06 17:14:55 i-s-023 systemd[1]: tomcat.service: Failed with result &#39;exit-code&#39;.\r\n    Jul 06 17:14:55 i-s-023 systemd[1]: Failed to start Tomcat9.\r\n\r\nHere it is my **/opt** folder:\r\n\r\n    drwxr-xr-x  4 root    root        4096 Jul  6 14:44 .\r\n    drwxr-xr-x 24 root    root        4096 Jun 24 01:26 ..\r\n    drwxr-xr-x  9 tomcat9 tomcat9     4096 Jul  6 16:43 apache-tomcat-9.0.50\r\n    -rw-r--r--  1 root    root    11507318 Jun 28 10:52 apache-tomcat-9.0.50.tar.gz\r\n    drwxr-xr-x  7 root    root        4096 Jul  6 16:34 jdk1.8.0_221\r\n    lrwxrwxrwx  1 root    root          20 Jul  6 14:44 tomcat-latest -&gt; apache-tomcat-9.0.50\r\n\r\nThose are permissions inside **/opt/tomcat-latest** folder\r\n\r\n    drwxr-xr-x 9 tomcat9 tomcat9  4096 Jul  6 16:43 .\r\n    drwxr-xr-x 4 root    root     4096 Jul  6 14:44 ..\r\n    drwxrwx--- 2 root    tomcat9  4096 Jul  6 14:44 bin\r\n    -rw-r----- 1 root    tomcat9 18949 Jun 28 10:46 BUILDING.txt\r\n    drwxr-x--- 2 root    tomcat9  4096 Jun 28 10:46 conf\r\n    -rw-r----- 1 root    tomcat9  6210 Jun 28 10:46 CONTRIBUTING.md\r\n    drwxr-x--- 2 root    tomcat9  4096 Jul  6 14:44 lib\r\n    -rw-r----- 1 root    tomcat9 57092 Jun 28 10:46 LICENSE\r\n    drwxr-x--- 2 tomcat9 tomcat9  4096 Jul  6 14:46 logs\r\n    -rw-r----- 1 root    tomcat9  2333 Jun 28 10:46 NOTICE\r\n    -rw-r----- 1 root    tomcat9  3372 Jun 28 10:46 README.md\r\n    -rw-r----- 1 root    tomcat9  6898 Jun 28 10:46 RELEASE-NOTES\r\n    -rw-r----- 1 root    tomcat9 16507 Jun 28 10:46 RUNNING.txt\r\n    drwxr-x--- 2 tomcat9 tomcat9  4096 Jul  6 17:14 temp\r\n    drwxr-x--- 7 tomcat9 tomcat9  4096 Jun 28 10:46 webapps\r\n    drwxr-x--- 2 tomcat9 tomcat9  4096 Jun 28 10:46 work\r\n\r\nThe service is defined as shown below:\r\n\r\n    [Unit]\r\n    Description=Tomcat9\r\n    After=network.target\r\n\r\n    [Service]\r\n    Type=forking\r\n    User=tomcat9\r\n    Group=tomcat9\r\n    WorkingDirectory=/opt/tomcat-latest/bin\r\n    Environment=CATALINA_PID=/opt/tomcat-latest/temp/tomcat9.pid\r\n    Environment=JAVA_HOME=/opt/jdk1.8.0_221\r\n    Environment=CATALINA_HOME=/opt/tomcat-latest\r\n    Environment=CATALINA_BASE=/opt/tomcat-latest\r\n    Environment=&quot;CATALINA_OPTS=-Xms1280m -Xmx3840m&quot;\r\n    Environment=&quot;JAVA_OPTS=-Dfile.encoding=UTF-8 -Dnet.sf.ehcache.skipUpdateCheck=true -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+UseParNewGC  -Dorg.apache.tomcat.util.buf.UDec$\r\n\r\n    ExecStart=/opt/tomcat-latest/bin/startup.sh\r\n    ExecStop=/opt/tomcat-latest/bin/shutdown.sh\r\n\r\n    [Install]\r\n    WantedBy=multi-user.target\r\n\r\nDo you have any advice? \r\nThanks in advance","title":"PID file found but either no matching process was found or the current user does not have permission to stop the process","body":"<p>I'm facing a problem with Apache Tomcat 9.0.50, Ubuntu Server 18.04 LTS and Java JDK 8.</p>\n<p>I am not able to start Tomcat9 as a service, because if I check its status after started, it shows the error: <strong>PID file found but either no matching process was found or the current user does not have permission to stop the process. Stop aborted.</strong></p>\n<p>I've created a dedicated group and user for Tomcat (group tomcat9, user tomcat9).</p>\n<p>If I check the ps (process-show) Linux tool, for example with:</p>\n<pre><code>ps -faux | grep tomcat\n</code></pre>\n<p>Tomcat is not present, so the process is not active.</p>\n<p>I'm running <strong>sudo systemctl start tomcat.service</strong></p>\n<p>with the &quot;sadmin&quot; account that belongs to sudoers and also belongs to tomcat9 group.</p>\n<pre><code>Jul 06 17:14:55 i-s-023 systemd[1]: Starting Tomcat9...\nJul 06 17:14:55 i-s-023 startup.sh[5257]: Existing PID file found during start.\nJul 06 17:14:55 i-s-023 startup.sh[5257]: Removing/clearing stale PID file.\nJul 06 17:14:55 i-s-023 startup.sh[5257]: Tomcat started.\nJul 06 17:14:55 i-s-023 shutdown.sh[5279]: PID file found but either no matching process was found or the current user does not have permission to stop the process. Stop aborted.\nJul 06 17:14:55 i-s-023 systemd[1]: tomcat.service: Control process exited, code=exited status=1\nJul 06 17:14:55 i-s-023 systemd[1]: tomcat.service: Failed with result 'exit-code'.\nJul 06 17:14:55 i-s-023 systemd[1]: Failed to start Tomcat9.\n</code></pre>\n<p>Here it is my <strong>/opt</strong> folder:</p>\n<pre><code>drwxr-xr-x  4 root    root        4096 Jul  6 14:44 .\ndrwxr-xr-x 24 root    root        4096 Jun 24 01:26 ..\ndrwxr-xr-x  9 tomcat9 tomcat9     4096 Jul  6 16:43 apache-tomcat-9.0.50\n-rw-r--r--  1 root    root    11507318 Jun 28 10:52 apache-tomcat-9.0.50.tar.gz\ndrwxr-xr-x  7 root    root        4096 Jul  6 16:34 jdk1.8.0_221\nlrwxrwxrwx  1 root    root          20 Jul  6 14:44 tomcat-latest -&gt; apache-tomcat-9.0.50\n</code></pre>\n<p>Those are permissions inside <strong>/opt/tomcat-latest</strong> folder</p>\n<pre><code>drwxr-xr-x 9 tomcat9 tomcat9  4096 Jul  6 16:43 .\ndrwxr-xr-x 4 root    root     4096 Jul  6 14:44 ..\ndrwxrwx--- 2 root    tomcat9  4096 Jul  6 14:44 bin\n-rw-r----- 1 root    tomcat9 18949 Jun 28 10:46 BUILDING.txt\ndrwxr-x--- 2 root    tomcat9  4096 Jun 28 10:46 conf\n-rw-r----- 1 root    tomcat9  6210 Jun 28 10:46 CONTRIBUTING.md\ndrwxr-x--- 2 root    tomcat9  4096 Jul  6 14:44 lib\n-rw-r----- 1 root    tomcat9 57092 Jun 28 10:46 LICENSE\ndrwxr-x--- 2 tomcat9 tomcat9  4096 Jul  6 14:46 logs\n-rw-r----- 1 root    tomcat9  2333 Jun 28 10:46 NOTICE\n-rw-r----- 1 root    tomcat9  3372 Jun 28 10:46 README.md\n-rw-r----- 1 root    tomcat9  6898 Jun 28 10:46 RELEASE-NOTES\n-rw-r----- 1 root    tomcat9 16507 Jun 28 10:46 RUNNING.txt\ndrwxr-x--- 2 tomcat9 tomcat9  4096 Jul  6 17:14 temp\ndrwxr-x--- 7 tomcat9 tomcat9  4096 Jun 28 10:46 webapps\ndrwxr-x--- 2 tomcat9 tomcat9  4096 Jun 28 10:46 work\n</code></pre>\n<p>The service is defined as shown below:</p>\n<pre><code>[Unit]\nDescription=Tomcat9\nAfter=network.target\n\n[Service]\nType=forking\nUser=tomcat9\nGroup=tomcat9\nWorkingDirectory=/opt/tomcat-latest/bin\nEnvironment=CATALINA_PID=/opt/tomcat-latest/temp/tomcat9.pid\nEnvironment=JAVA_HOME=/opt/jdk1.8.0_221\nEnvironment=CATALINA_HOME=/opt/tomcat-latest\nEnvironment=CATALINA_BASE=/opt/tomcat-latest\nEnvironment=&quot;CATALINA_OPTS=-Xms1280m -Xmx3840m&quot;\nEnvironment=&quot;JAVA_OPTS=-Dfile.encoding=UTF-8 -Dnet.sf.ehcache.skipUpdateCheck=true -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+UseParNewGC  -Dorg.apache.tomcat.util.buf.UDec$\n\nExecStart=/opt/tomcat-latest/bin/startup.sh\nExecStop=/opt/tomcat-latest/bin/shutdown.sh\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n<p>Do you have any advice?\nThanks in advance</p>\n"},{"tags":["java","stream","processbuilder"],"comments":[{"owner":{"account_id":1354733,"reputation":1146,"user_id":1293377,"display_name":"fGo"},"score":0,"creation_date":1369312885,"post_id":16714127,"comment_id":24061803,"body_markdown":"how you used the `ByteArrayOutputStream`?","body":"how you used the <code>ByteArrayOutputStream</code>?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1493115658,"post_id":16714127,"comment_id":74264695,"body_markdown":"&#39;It didn&#39;t seem to work&#39; is not a problem description. `ProcessBuilder` doesn&#39;t have streams, but `Process` does. You aren&#39;t starting a `ProcessBuilder`, you are using it to *create* a `Process`, and then starting *that.* Be precise.","body":"&#39;It didn&#39;t seem to work&#39; is not a problem description. <code>ProcessBuilder</code> doesn&#39;t have streams, but <code>Process</code> does. You aren&#39;t starting a <code>ProcessBuilder</code>, you are using it to <i>create</i> a <code>Process</code>, and then starting <i>that.</i> Be precise."}],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":4,"up_vote_count":102,"is_accepted":true,"score":98,"last_activity_date":1419862488,"creation_date":1369312758,"answer_id":16714180,"question_id":16714127,"body_markdown":"Read from the `InputStream`. You can append the output to a `StringBuilder`:\r\n\r\n    BufferedReader reader = \r\n                    new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n    StringBuilder builder = new StringBuilder();\r\n    String line = null;\r\n    while ( (line = reader.readLine()) != null) {\r\n       builder.append(line);\r\n       builder.append(System.getProperty(&quot;line.separator&quot;));\r\n    }\r\n    String result = builder.toString();","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>Read from the <code>InputStream</code>. You can append the output to a <code>StringBuilder</code>:</p>\n\n<pre><code>BufferedReader reader = \n                new BufferedReader(new InputStreamReader(process.getInputStream()));\nStringBuilder builder = new StringBuilder();\nString line = null;\nwhile ( (line = reader.readLine()) != null) {\n   builder.append(line);\n   builder.append(System.getProperty(\"line.separator\"));\n}\nString result = builder.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1354733,"reputation":1146,"user_id":1293377,"display_name":"fGo"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1369312850,"creation_date":1369312850,"answer_id":16714217,"question_id":16714127,"body_markdown":"You might do something like this:\r\n\r\n    private static BufferedReader getOutput(Process p) {\r\n        return new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n    }\r\n\r\n    private static BufferedReader getError(Process p) {\r\n        return new BufferedReader(new InputStreamReader(p.getErrorStream()));\r\n    }\r\n    ...\r\n    Process p = Runtime.getRuntime().exec(commande);\r\n    BufferedReader output = getOutput(p);\r\n    BufferedReader error = getError(p);\r\n    String ligne = &quot;&quot;;\r\n\r\n    while ((ligne = output.readLine()) != null) {\r\n        System.out.println(ligne);\r\n    }\r\n            \r\n    while ((ligne = error.readLine()) != null) {\r\n     System.out.println(ligne);\r\n    }","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>You might do something like this:</p>\n\n<pre><code>private static BufferedReader getOutput(Process p) {\n    return new BufferedReader(new InputStreamReader(p.getInputStream()));\n}\n\nprivate static BufferedReader getError(Process p) {\n    return new BufferedReader(new InputStreamReader(p.getErrorStream()));\n}\n...\nProcess p = Runtime.getRuntime().exec(commande);\nBufferedReader output = getOutput(p);\nBufferedReader error = getError(p);\nString ligne = \"\";\n\nwhile ((ligne = output.readLine()) != null) {\n    System.out.println(ligne);\n}\n\nwhile ((ligne = error.readLine()) != null) {\n System.out.println(ligne);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1821511,"reputation":6530,"user_id":1655478,"accept_rate":33,"display_name":"dessalines"},"down_vote_count":5,"up_vote_count":14,"is_accepted":false,"score":9,"last_activity_date":1425321081,"creation_date":1425321081,"answer_id":28816915,"question_id":16714127,"body_markdown":"Just add `.inheritIO();` to the process builder line.\r\n\r\nIE:\r\n\r\n`ProcessBuilder pb = new ProcessBuilder(script.sh).inheritIO();`","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>Just add <code>.inheritIO();</code> to the process builder line.</p>\n\n<p>IE:</p>\n\n<p><code>ProcessBuilder pb = new ProcessBuilder(script.sh).inheritIO();</code></p>\n"},{"tags":[],"owner":{"account_id":65193,"reputation":9761,"user_id":192044,"accept_rate":48,"display_name":"Be Kind To New Users"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453162338,"creation_date":1453162338,"answer_id":34866425,"question_id":16714127,"body_markdown":"For Java 7 and 8 this should work:\r\n\r\n\tprivate String getInputAsString(InputStream is)\r\n\t{\r\n\t   try(java.util.Scanner s = new java.util.Scanner(is)) \r\n\t   { \r\n\t\t   return s.useDelimiter(&quot;\\\\A&quot;).hasNext() ? s.next() : &quot;&quot;; \r\n\t   }\r\n\t}\r\n\r\nThen in your code, do this:\r\n\r\n    String stdOut = getInputAsString(p.getInputStream());\r\n    String stdErr = getInputAsString(p.getErrorStream());\r\n\r\nI shamelessly stole that from: https://stackoverflow.com/questions/16714127/how-to-redirect-process-builders-output-to-a-string","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>For Java 7 and 8 this should work:</p>\n\n<pre><code>private String getInputAsString(InputStream is)\n{\n   try(java.util.Scanner s = new java.util.Scanner(is)) \n   { \n       return s.useDelimiter(\"\\\\A\").hasNext() ? s.next() : \"\"; \n   }\n}\n</code></pre>\n\n<p>Then in your code, do this:</p>\n\n<pre><code>String stdOut = getInputAsString(p.getInputStream());\nString stdErr = getInputAsString(p.getErrorStream());\n</code></pre>\n\n<p>I shamelessly stole that from: <a href=\"https://stackoverflow.com/questions/16714127/how-to-redirect-process-builders-output-to-a-string\">How to redirect Process Builder&#39;s output to a string?</a></p>\n"},{"tags":[],"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1463493168,"creation_date":1463493168,"answer_id":37278157,"question_id":16714127,"body_markdown":"In java 8 there is a nice lines() stream you can combine with String.join and System.lineSeparator():\r\n\r\n        try (BufferedReader outReader = new BufferedReader(new InputStreamReader(p.getInputStream()))\r\n        {\r\n            return String.join(System.lineSeparator(), outReader.lines().collect(toList()));\r\n            \\\\ OR using jOOλ if you like reduced verbosity\r\n            return Seq.seq(outReader.lines()).toString(System.lineSeparator())\r\n        }\r\n","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>In java 8 there is a nice lines() stream you can combine with String.join and System.lineSeparator():</p>\n\n<pre><code>    try (BufferedReader outReader = new BufferedReader(new InputStreamReader(p.getInputStream()))\n    {\n        return String.join(System.lineSeparator(), outReader.lines().collect(toList()));\n        \\\\ OR using jOOλ if you like reduced verbosity\n        return Seq.seq(outReader.lines()).toString(System.lineSeparator())\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3565218,"reputation":2960,"user_id":2976939,"accept_rate":62,"display_name":"Daniel"},"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1574278376,"creation_date":1464182217,"answer_id":37438418,"question_id":16714127,"body_markdown":"Using Apache Commons [IOUtils][1] you can do it in one line:\r\n\r\n    ProcessBuilder pb = new ProcessBuilder(&quot;pwd&quot;);\r\n    String output = IOUtils.toString(pb.start().getInputStream(), StandardCharsets.UTF_8);\r\n\r\n[1]: https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>Using Apache Commons <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\">IOUtils</a> you can do it in one line:</p>\n\n<pre><code>ProcessBuilder pb = new ProcessBuilder(\"pwd\");\nString output = IOUtils.toString(pb.start().getInputStream(), StandardCharsets.UTF_8);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":41355,"reputation":1012,"user_id":120136,"display_name":"L.R."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1470169824,"creation_date":1470169824,"answer_id":38729918,"question_id":16714127,"body_markdown":"After trying to handle different cases (handling both stderr and stdout and not blocking any of these, terminate process after timeout, properly escaping slashes, quotation marks, special characters, spaces, .... ) I gave up and found **Apache Commons Exec** https://commons.apache.org/proper/commons-exec/tutorial.html that seems to be doing all these things pretty well. \r\n\r\nI do recommend everyone who needs to invoke external process in java to use Apache Commons Exec library instead of reinventing it again.","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>After trying to handle different cases (handling both stderr and stdout and not blocking any of these, terminate process after timeout, properly escaping slashes, quotation marks, special characters, spaces, .... ) I gave up and found <strong>Apache Commons Exec</strong> <a href=\"https://commons.apache.org/proper/commons-exec/tutorial.html\" rel=\"nofollow\">https://commons.apache.org/proper/commons-exec/tutorial.html</a> that seems to be doing all these things pretty well. </p>\n\n<p>I do recommend everyone who needs to invoke external process in java to use Apache Commons Exec library instead of reinventing it again.</p>\n"},{"tags":[],"owner":{"account_id":3966934,"reputation":3298,"user_id":3272593,"accept_rate":17,"display_name":"Greg T"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1482447027,"creation_date":1482447027,"answer_id":41292766,"question_id":16714127,"body_markdown":"Java 8 example:\r\n\r\n    public static String runCommandForOutput(List&lt;String&gt; params) {\r\n        ProcessBuilder pb = new ProcessBuilder(params);\r\n        Process p;\r\n        String result = &quot;&quot;;\r\n        try {\r\n            p = pb.start();\r\n            final BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n\r\n            StringJoiner sj = new StringJoiner(System.getProperty(&quot;line.separator&quot;));\r\n            reader.lines().iterator().forEachRemaining(sj::add);\r\n            result = sj.toString();\r\n\r\n            p.waitFor();\r\n            p.destroy();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return result;\r\n    }\r\n\r\nUsage:\r\n\r\n    List&lt;String&gt; params = Arrays.asList(&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;cat /proc/cpuinfo&quot;);\r\n    String result = runCommandForOutput(params);\r\n\r\nI use this exact code and it works well for single or multiple line results. You could add an error stream handler as well.","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>Java 8 example:</p>\n\n<pre><code>public static String runCommandForOutput(List&lt;String&gt; params) {\n    ProcessBuilder pb = new ProcessBuilder(params);\n    Process p;\n    String result = \"\";\n    try {\n        p = pb.start();\n        final BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));\n\n        StringJoiner sj = new StringJoiner(System.getProperty(\"line.separator\"));\n        reader.lines().iterator().forEachRemaining(sj::add);\n        result = sj.toString();\n\n        p.waitFor();\n        p.destroy();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return result;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>List&lt;String&gt; params = Arrays.asList(\"/bin/sh\", \"-c\", \"cat /proc/cpuinfo\");\nString result = runCommandForOutput(params);\n</code></pre>\n\n<p>I use this exact code and it works well for single or multiple line results. You could add an error stream handler as well.</p>\n"},{"tags":[],"owner":{"account_id":10060184,"reputation":2295,"user_id":7437143,"accept_rate":100,"display_name":"a.t."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555540325,"creation_date":1555522195,"answer_id":55733084,"question_id":16714127,"body_markdown":"**Solutions**\r\n\r\n - This code is a running example for the general solution to your question:\r\n\r\n&gt; How to redirect Process Builder&#39;s output to a string?\r\n\r\n - Credits go to Greg T, after trying multiple solutions to run various commands and capture their outputs Greg T&#39;s answer contained the essence of the particular solution. I hope the general example is of use for someone combining multiple requirements whilst capturing the output.\r\n - To obtain your particular solution you can uncomment `ProcessBuilder pb = new ProcessBuilder(System.getProperty(&quot;user.dir&quot;)+&quot;/src/generate_list.sh&quot;, filename);`, uncomment the line, and comment out:  `ProcessBuilder processBuilder = new ProcessBuilder(commands);`.\r\n\r\n**Functionality**\r\n\r\n - It is a working example that executes command `echo 1` and returns the output as a String. \r\n - I also added setting a working path and an environment variable, which is not required for your particular example so you can delete it. \r\n\r\n**Usage &amp; verification** \r\n\r\n - You can copy paste this code as a class, compile it to jar and run it. \r\n - It is verified in WSL Ubuntu 16.04. \r\n - Setting the workdirectory is verified by setting `binaryCommand[0]=&quot;touch&quot;;`and `binaryCommand[1]=&quot;1&quot;;`, re-compiling and running the `.jar` file.\r\n\r\n**Limitations**\r\n\r\n - If the pipe is full (due to a &quot;too large&quot; output), the code hangs.\r\n\r\n**Code** \r\n\r\n\r\n\timport java.io.BufferedReader;\r\n\timport java.io.File;\r\n\timport java.io.IOException;\r\n\timport java.io.InputStreamReader;\r\n\timport java.io.PrintWriter;\r\n\timport java.util.Arrays;\r\n\timport java.util.Map;\r\n\timport java.util.StringJoiner;\r\n\r\n\tpublic class GenerateOutput {\r\n\r\n\t\t/**\r\n\t\t * This code can execute a command and print the output accompanying that command.\r\n\t\t * compile this project into a .jar and run it with for example:\r\n\t\t * java -jar readOutputOfCommand.jar\r\n\t\t * \r\n\t\t * @param args\r\n\t\t * @throws Exception \r\n\t\t */\r\n\t\tpublic static void main(String[] args) throws Exception {\r\n\t\t\tboolean answerYes = false; // no yes answer to any command prompts is needed.\r\n\t\t\t\r\n\t\t\t// to execute a command with spaces in it in terminal, put them in an array of Strings.\r\n\t\t\tString[] binaryCommand = new String[2];\r\n\t\t\t\r\n\t\t\t// write a command that gives a binary output:\r\n\t\t\tbinaryCommand[0] = &quot;echo&quot;;\r\n\t\t\tbinaryCommand[1] = &quot;1&quot;;\r\n\t\t\t\r\n\t\t\t// pass the commands to a method that executes them\r\n\t\t\tSystem.out.println(&quot;The output of the echo command = &quot;+executeCommands(binaryCommand,answerYes));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * This executes the commands in terminal. \r\n\t\t * Additionally it sets an environment variable (not necessary for your particular solution)\r\n\t\t * Additionally it sets a working path (not necessary for your particular solution)\r\n\t\t * @param commandData\r\n\t\t * @param ansYes\r\n\t\t * @throws Exception \r\n\t\t */\r\n\t\tpublic static String executeCommands(String[] commands,Boolean ansYes) throws Exception {\r\n\t\t\tString capturedCommandOutput = null;\r\n\t\t\tSystem.out.println(&quot;Incoming commandData = &quot;+Arrays.deepToString(commands));\r\n\t\t\tFile workingDirectory = new File(&quot;/mnt/c/testfolder b/&quot;);\r\n\r\n\t\t\t// create a ProcessBuilder to execute the commands in\r\n\t\t\tProcessBuilder processBuilder = new ProcessBuilder(commands);\r\n\t\t\t//ProcessBuilder processBuilder = new ProcessBuilder(System.getProperty(&quot;user.dir&quot;)+&quot;/src/generate_list.sh&quot;, &quot;a&quot;);\r\n\t\t\t\r\n\t\t\t// this is not necessary but can be used to set an environment variable for the command\r\n\t\t\tprocessBuilder = setEnvironmentVariable(processBuilder); \r\n\t\t\t\r\n\t\t\t// this is not necessary but can be used to set the working directory for the command\r\n\t\t\tprocessBuilder.directory(workingDirectory);\r\n\t\t\t\r\n\t\t\t// execute the actual commands\r\n\t\t\ttry {\r\n\t\t\t \r\n\t\t\t\t Process process = processBuilder.start();\r\n\t\t\t\t\r\n\t\t\t\t // capture the output stream of the command\r\n\t\t\t\t BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n\t\t\t    StringJoiner sj = new StringJoiner(System.getProperty(&quot;line.separator&quot;));\r\n\t\t\t\treader.lines().iterator().forEachRemaining(sj::add);\r\n\t\t\t\tcapturedCommandOutput = sj.toString();\r\n\t\t\t\tSystem.out.println(&quot;The output of this command =&quot;+ capturedCommandOutput);\r\n\t\t\t\t \r\n\t\t\t\t // here you connect the output of your command to any new input, e.g. if you get prompted for `yes`\r\n\t\t\t\t new Thread(new SyncPipe(process.getErrorStream(), System.err)).start();\r\n\t\t\t\t new Thread(new SyncPipe(process.getInputStream(), System.out)).start();\r\n\t\t\t\tPrintWriter stdin = new PrintWriter(process.getOutputStream());\r\n\t\t\t\t\r\n\t\t\t\t//This is not necessary but can be used to answer yes to being prompted\r\n\t\t\t\tif (ansYes) {\r\n\t\t\t\t\tSystem.out.println(&quot;WITH YES!&quot;);\r\n\t\t\t\tstdin.println(&quot;yes&quot;);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// write any other commands you want here\r\n\t\t\t\t\r\n\t\t\t\tstdin.close();\r\n\t\t\t\t\r\n\t\t\t\t// this lets you know whether the command execution led to an error(!=0), or not (=0).\r\n\t\t\t\tint returnCode = process.waitFor();\r\n\t\t\t\tSystem.out.println(&quot;Return code = &quot; + returnCode);\r\n\t\t\t} catch (IOException e1) {\r\n\t\t\t\te1.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn capturedCommandOutput;\r\n\t    }\r\n\t\t\r\n\t\t\r\n\t\t/**\r\n\t\t * source: https://stackoverflow.com/questions/7369664/using-export-in-java\r\n\t\t * @param processBuilder\r\n\t\t * @param varName\r\n\t\t * @param varContent\r\n\t\t * @return\r\n\t\t */\r\n\t\tprivate static ProcessBuilder setEnvironmentVariable(ProcessBuilder processBuilder){\r\n\t\t\tString varName = &quot;variableName&quot;;\r\n\t\t\tString varContent = &quot;/mnt/c/testfolder a/&quot;;\r\n\t\t\t\r\n\t\t\tMap&lt;String, String&gt; env = processBuilder.environment();\r\n\t\t\t System.out.println(&quot;Setting environment variable &quot;+varName+&quot;=&quot;+varContent);\r\n\t\t\t env.put(varName, varContent);\r\n\t\t\t \r\n\t\t\t processBuilder.environment().put(varName, varContent);\r\n\t\t\t \r\n\t\t\t return processBuilder;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tclass SyncPipe implements Runnable\r\n\t{\t\r\n\t\t/**\r\n\t\t * This class pipes the output of your command to any new input you generated\r\n\t\t * with stdin. For example, suppose you run cp /mnt/c/a.txt /mnt/b/\r\n\t\t * but for some reason you are prompted: &quot;do you really want to copy there yes/no?\r\n\t\t * then you can answer yes since your input is piped to the output of your\r\n\t\t * original command. (At least that is my practical interpretation might be wrong.)\r\n\t\t * @param istrm\r\n\t\t * @param ostrm\r\n\t\t */\r\n\t\tpublic SyncPipe(InputStream istrm, OutputStream ostrm) {\r\n\t\t\tistrm_ = istrm;\r\n\t\t\tostrm_ = ostrm;\r\n\t\t}\r\n\t\tpublic void run() {\r\n\t\t\t  \r\n\t\t  try\r\n\t\t  {\r\n\t\t      final byte[] buffer = new byte[1024];\r\n\t\t      for (int length = 0; (length = istrm_.read(buffer)) != -1; )\r\n\t\t      {\r\n\t\t          ostrm_.write(buffer, 0, length);\t              \r\n\t\t          }\r\n\t\t      }\r\n\t\t      catch (Exception e)\r\n\t\t      {\r\n\t\t          e.printStackTrace();\r\n\t\t      }\r\n\t\t  }\r\n\t\t  private final OutputStream ostrm_;\r\n\t\t  private final InputStream istrm_;\r\n\t}","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p><strong>Solutions</strong></p>\n\n<ul>\n<li>This code is a running example for the general solution to your question:</li>\n</ul>\n\n<blockquote>\n  <p>How to redirect Process Builder's output to a string?</p>\n</blockquote>\n\n<ul>\n<li>Credits go to Greg T, after trying multiple solutions to run various commands and capture their outputs Greg T's answer contained the essence of the particular solution. I hope the general example is of use for someone combining multiple requirements whilst capturing the output.</li>\n<li>To obtain your particular solution you can uncomment <code>ProcessBuilder pb = new ProcessBuilder(System.getProperty(\"user.dir\")+\"/src/generate_list.sh\", filename);</code>, uncomment the line, and comment out:  <code>ProcessBuilder processBuilder = new ProcessBuilder(commands);</code>.</li>\n</ul>\n\n<p><strong>Functionality</strong></p>\n\n<ul>\n<li>It is a working example that executes command <code>echo 1</code> and returns the output as a String. </li>\n<li>I also added setting a working path and an environment variable, which is not required for your particular example so you can delete it. </li>\n</ul>\n\n<p><strong>Usage &amp; verification</strong> </p>\n\n<ul>\n<li>You can copy paste this code as a class, compile it to jar and run it. </li>\n<li>It is verified in WSL Ubuntu 16.04. </li>\n<li>Setting the workdirectory is verified by setting <code>binaryCommand[0]=\"touch\";</code>and <code>binaryCommand[1]=\"1\";</code>, re-compiling and running the <code>.jar</code> file.</li>\n</ul>\n\n<p><strong>Limitations</strong></p>\n\n<ul>\n<li>If the pipe is full (due to a \"too large\" output), the code hangs.</li>\n</ul>\n\n<p><strong>Code</strong> </p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.util.Arrays;\nimport java.util.Map;\nimport java.util.StringJoiner;\n\npublic class GenerateOutput {\n\n    /**\n     * This code can execute a command and print the output accompanying that command.\n     * compile this project into a .jar and run it with for example:\n     * java -jar readOutputOfCommand.jar\n     * \n     * @param args\n     * @throws Exception \n     */\n    public static void main(String[] args) throws Exception {\n        boolean answerYes = false; // no yes answer to any command prompts is needed.\n\n        // to execute a command with spaces in it in terminal, put them in an array of Strings.\n        String[] binaryCommand = new String[2];\n\n        // write a command that gives a binary output:\n        binaryCommand[0] = \"echo\";\n        binaryCommand[1] = \"1\";\n\n        // pass the commands to a method that executes them\n        System.out.println(\"The output of the echo command = \"+executeCommands(binaryCommand,answerYes));\n    }\n\n    /**\n     * This executes the commands in terminal. \n     * Additionally it sets an environment variable (not necessary for your particular solution)\n     * Additionally it sets a working path (not necessary for your particular solution)\n     * @param commandData\n     * @param ansYes\n     * @throws Exception \n     */\n    public static String executeCommands(String[] commands,Boolean ansYes) throws Exception {\n        String capturedCommandOutput = null;\n        System.out.println(\"Incoming commandData = \"+Arrays.deepToString(commands));\n        File workingDirectory = new File(\"/mnt/c/testfolder b/\");\n\n        // create a ProcessBuilder to execute the commands in\n        ProcessBuilder processBuilder = new ProcessBuilder(commands);\n        //ProcessBuilder processBuilder = new ProcessBuilder(System.getProperty(\"user.dir\")+\"/src/generate_list.sh\", \"a\");\n\n        // this is not necessary but can be used to set an environment variable for the command\n        processBuilder = setEnvironmentVariable(processBuilder); \n\n        // this is not necessary but can be used to set the working directory for the command\n        processBuilder.directory(workingDirectory);\n\n        // execute the actual commands\n        try {\n\n             Process process = processBuilder.start();\n\n             // capture the output stream of the command\n             BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n            StringJoiner sj = new StringJoiner(System.getProperty(\"line.separator\"));\n            reader.lines().iterator().forEachRemaining(sj::add);\n            capturedCommandOutput = sj.toString();\n            System.out.println(\"The output of this command =\"+ capturedCommandOutput);\n\n             // here you connect the output of your command to any new input, e.g. if you get prompted for `yes`\n             new Thread(new SyncPipe(process.getErrorStream(), System.err)).start();\n             new Thread(new SyncPipe(process.getInputStream(), System.out)).start();\n            PrintWriter stdin = new PrintWriter(process.getOutputStream());\n\n            //This is not necessary but can be used to answer yes to being prompted\n            if (ansYes) {\n                System.out.println(\"WITH YES!\");\n            stdin.println(\"yes\");\n            }\n\n            // write any other commands you want here\n\n            stdin.close();\n\n            // this lets you know whether the command execution led to an error(!=0), or not (=0).\n            int returnCode = process.waitFor();\n            System.out.println(\"Return code = \" + returnCode);\n        } catch (IOException e1) {\n            e1.printStackTrace();\n        }\n        return capturedCommandOutput;\n    }\n\n\n    /**\n     * source: https://stackoverflow.com/questions/7369664/using-export-in-java\n     * @param processBuilder\n     * @param varName\n     * @param varContent\n     * @return\n     */\n    private static ProcessBuilder setEnvironmentVariable(ProcessBuilder processBuilder){\n        String varName = \"variableName\";\n        String varContent = \"/mnt/c/testfolder a/\";\n\n        Map&lt;String, String&gt; env = processBuilder.environment();\n         System.out.println(\"Setting environment variable \"+varName+\"=\"+varContent);\n         env.put(varName, varContent);\n\n         processBuilder.environment().put(varName, varContent);\n\n         return processBuilder;\n    }\n}\n\n\nclass SyncPipe implements Runnable\n{   \n    /**\n     * This class pipes the output of your command to any new input you generated\n     * with stdin. For example, suppose you run cp /mnt/c/a.txt /mnt/b/\n     * but for some reason you are prompted: \"do you really want to copy there yes/no?\n     * then you can answer yes since your input is piped to the output of your\n     * original command. (At least that is my practical interpretation might be wrong.)\n     * @param istrm\n     * @param ostrm\n     */\n    public SyncPipe(InputStream istrm, OutputStream ostrm) {\n        istrm_ = istrm;\n        ostrm_ = ostrm;\n    }\n    public void run() {\n\n      try\n      {\n          final byte[] buffer = new byte[1024];\n          for (int length = 0; (length = istrm_.read(buffer)) != -1; )\n          {\n              ostrm_.write(buffer, 0, length);                \n              }\n          }\n          catch (Exception e)\n          {\n              e.printStackTrace();\n          }\n      }\n      private final OutputStream ostrm_;\n      private final InputStream istrm_;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4248264,"reputation":2399,"user_id":3476226,"accept_rate":92,"display_name":"kmecpp"},"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1599503680,"creation_date":1570382164,"answer_id":58259581,"question_id":16714127,"body_markdown":"As of **Java 9**, we finally have a one liner:\r\n\r\n    ProcessBuilder pb = new ProcessBuilder(&quot;pwd&quot;);\r\n    Process process = pb.start();\r\n\r\n    String result = new String(process.getInputStream().readAllBytes());","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>As of <strong>Java 9</strong>, we finally have a one liner:</p>\n<pre><code>ProcessBuilder pb = new ProcessBuilder(&quot;pwd&quot;);\nProcess process = pb.start();\n\nString result = new String(process.getInputStream().readAllBytes());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1275452,"reputation":31,"user_id":1230830,"display_name":"bwrega"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636108375,"creation_date":1636108375,"answer_id":69851879,"question_id":16714127,"body_markdown":"Another solution for Java 8:\r\n```lang-java\r\nBufferedReader stdOut = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\nString stdOutStr = stdOut.lines()\r\n                   .collect(Collectors.joining(System.lineSeparator()));\r\n```","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>Another solution for Java 8:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedReader stdOut = new BufferedReader(new InputStreamReader(process.getInputStream()));\nString stdOutStr = stdOut.lines()\n                   .collect(Collectors.joining(System.lineSeparator()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19533,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1669829680,"creation_date":1651583811,"answer_id":72099995,"question_id":16714127,"body_markdown":"This is for [Kotlin][1] users ending up here:\r\n\r\n```kotlin\r\nval myCommand = &quot;java -version&quot;\r\nval process = ProcessBuilder()\r\n    .command(myCommand.split(&quot; &quot;))\r\n    // .directory(File(&quot;./&quot;)) // Working directory\r\n    .redirectOutput(ProcessBuilder.Redirect.INHERIT)\r\n    .redirectError(ProcessBuilder.Redirect.INHERIT)\r\n    .start()\r\nprocess.waitFor(60, TimeUnit.SECONDS)\r\nval result = process.inputStream.reader().readText()\r\nprintln(result)\r\n```\r\n\r\n\r\n  [1]: https://kotlinlang.org/","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>This is for <a href=\"https://kotlinlang.org/\" rel=\"nofollow noreferrer\">Kotlin</a> users ending up here:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val myCommand = &quot;java -version&quot;\nval process = ProcessBuilder()\n    .command(myCommand.split(&quot; &quot;))\n    // .directory(File(&quot;./&quot;)) // Working directory\n    .redirectOutput(ProcessBuilder.Redirect.INHERIT)\n    .redirectError(ProcessBuilder.Redirect.INHERIT)\n    .start()\nprocess.waitFor(60, TimeUnit.SECONDS)\nval result = process.inputStream.reader().readText()\nprintln(result)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10609809,"reputation":85,"user_id":7814070,"display_name":"Rubens Amaral"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677578631,"creation_date":1677578631,"answer_id":75590472,"question_id":16714127,"body_markdown":"A complementary information to others answers, that was important in my case.  \r\nI was getting no output **randomly** because my process takes some time to finish.  \r\nUsing `process.waitFor` method was no solution.\r\nWhat fixes my issue is using  \r\n\r\n`while (process.isAlive());`  \r\n\r\nbefore reading the inputStream.","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>A complementary information to others answers, that was important in my case.<br />\nI was getting no output <strong>randomly</strong> because my process takes some time to finish.<br />\nUsing <code>process.waitFor</code> method was no solution.\nWhat fixes my issue is using</p>\n<p><code>while (process.isAlive());</code></p>\n<p>before reading the inputStream.</p>\n"}],"owner":{"account_id":2806410,"reputation":1705,"user_id":2413566,"accept_rate":45,"display_name":"Ankesh Anand"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126044,"favorite_count":0,"down_vote_count":2,"up_vote_count":89,"accepted_answer_id":16714180,"answer_count":13,"score":87,"last_activity_date":1677578631,"creation_date":1369312556,"question_id":16714127,"body_markdown":"I am using the following code to start a process builder.I want to know how can I redirect its output to a `String`.\r\n\r\n   \tProcessBuilder pb = new ProcessBuilder(\r\n        System.getProperty(&quot;user.dir&quot;) + &quot;/src/generate_list.sh&quot;, filename);\r\n\tProcess p = pb.start();\r\n\r\nI tried using `ByteArrayOutputStream` but it didn&#39;t seem to work.","title":"How to redirect ProcessBuilder&#39;s output to a string?","body":"<p>I am using the following code to start a process builder.I want to know how can I redirect its output to a <code>String</code>.</p>\n<pre><code>ProcessBuilder pb = new ProcessBuilder(\n    System.getProperty(&quot;user.dir&quot;) + &quot;/src/generate_list.sh&quot;, filename);\nProcess p = pb.start();\n</code></pre>\n<p>I tried using <code>ByteArrayOutputStream</code> but it didn't seem to work.</p>\n"},{"tags":["java","jar","weka"],"comments":[{"owner":{"account_id":2260450,"reputation":919,"user_id":1990698,"accept_rate":24,"display_name":"Felix Aballi"},"score":0,"creation_date":1584124312,"post_id":19177882,"comment_id":107350335,"body_markdown":"Check this project, solves resources folder scanning: https://github.com/fraballi/resources-folder-scanner","body":"Check this project, solves resources folder scanning: <a href=\"https://github.com/fraballi/resources-folder-scanner\" rel=\"nofollow noreferrer\">github.com/fraballi/resources-folder-scanner</a>"}],"answers":[{"tags":[],"owner":{"account_id":947184,"reputation":48994,"user_id":974186,"accept_rate":79,"display_name":"Ren&#233; Link"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1613029717,"creation_date":1380879373,"answer_id":19177955,"question_id":19177882,"body_markdown":"I see 2 solutions:\r\n\r\n**Solution 1**\r\n\r\nRead the classpath ressource to a temp file and delete it after you called `load(File)`\r\n\r\n    InputStream cpResource = this.getClass().getClassLoader().getResourceAsStream(&quot;file.name&quot;);\r\n    File tmpFile = File.createTempFile(&quot;file&quot;, &quot;temp&quot;);\r\n    FileUtils.copyInputStreamToFile(cpResource, tmpFile); // FileUtils from apache-io\r\n    try {\r\n        decider.load(tmpFile);\r\n    } finally {\r\n        tmpFile.delete();\r\n    }\r\n\r\n**Solution 2**\r\n\r\nIf the ClassLoader that loads the resource is a URLClassLoader you can try to find the absolute file name. But this **only works if the resource you want exists as a file on the filesystem**. It doesn&#39;t work if the file is contained in a jar.\r\n\r\n    ClassLoader classLoader = this.getClass().getClassLoader();\r\n    if(classLoader instanceof URLClassLoader){\r\n        URLClassLoader urlClassLoader = URLClassLoader.class.cast(classLoader);\r\n        URL resourceUrl = urlClassLoader.findResource(&quot;file.name&quot;);\r\n\t\r\n        if(&quot;file&quot;.equals(resourceUrl.getProtocol())){\r\n            URI uri = resourceUrl.toURI();\r\n            File file = new File(uri);\r\n            decider.load(file);\r\n        }\r\n    }\r\n\r\nI would suggest to write a utility class that tries to find the absolute file through the class loader or if it can&#39;t get it this way uses the temp file approach as fallback.\r\n\r\nOr in a more object-oriented way:\r\n\r\n\t\tpublic class FileResourceTest {\r\n\r\n\t\tpublic static void main(String[] args) throws IOException {\r\n\t\t\tFile resourceAsFile = getResourceAsFile(&quot;file.name&quot;);\r\n\t\t\tSystem.out.println(resourceAsFile);\r\n\t\t}\r\n\r\n\t\tprivate static File getResourceAsFile(String resource) throws IOException {\r\n\t\t\tClassLoader cl = FileResourceTest.class.getClassLoader();\r\n\t\t\tFile file = null;\r\n\t\t\tFileResource fileResource = new URLClassLoaderFileResource(cl, resource);\r\n\t\t\ttry {\r\n\t\t\t\tfile = fileResource.getFile();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\tfileResource = new ClasspathResourceFileResource(cl, resource);\r\n\t\t\t\tfile = fileResource.getFile();\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t}\r\n\r\n\t\tpublic static interface FileResource {\r\n\r\n\t\t\tpublic File getFile() throws IOException;\r\n\r\n\t\t}\r\n\r\n\t\tpublic static class ClasspathResourceFileResource implements FileResource {\r\n\r\n\t\t\tprivate ClassLoader cl;\r\n\t\t\tprivate String resource;\r\n\r\n\t\t\tpublic ClasspathResourceFileResource(ClassLoader cl, String resource) {\r\n\t\t\t\tthis.cl = cl;\r\n\t\t\t\tthis.resource = resource;\r\n\t\t\t}\r\n\r\n\t\t\tpublic File getFile() throws IOException {\r\n\t\t\t\tInputStream cpResource = cl.getResourceAsStream(resource);\r\n\t\t\t\tFile tmpFile = File.createTempFile(&quot;file&quot;, &quot;temp&quot;);\r\n\t\t\t\tFileUtils.copyInputStreamToFile(cpResource, tmpFile);\r\n\t\t\t\ttmpFile.deleteOnExit();\r\n\t\t\t\treturn tmpFile;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tpublic static class URLClassLoaderFileResource implements FileResource {\r\n\r\n\t\t\tprivate ClassLoader cl;\r\n\t\t\tprivate String resource;\r\n\r\n\t\t\tpublic URLClassLoaderFileResource(ClassLoader cl, String resourcePath) {\r\n\t\t\t\tthis.cl = cl;\r\n\t\t\t\tthis.resource = resourcePath;\r\n\t\t\t}\r\n\r\n\t\t\tpublic File getFile() throws IOException {\r\n\t\t\t\tFile resourceFile = null;\r\n\t\t\t\tif (cl instanceof URLClassLoader) {\r\n\t\t\t\t\tURLClassLoader urlClassLoader = URLClassLoader.class.cast(cl);\r\n\t\t\t\t\tURL resourceUrl = urlClassLoader.findResource(resource);\r\n\t\t\t\t\tif (&quot;file&quot;.equals(resourceUrl.getProtocol())) {\r\n\t\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\t\tURI uri = resourceUrl.toURI();\r\n\t\t\t\t\t\t\tresourceFile = new File(uri);\r\n\t\t\t\t\t\t} catch (URISyntaxException e) {\r\n\t\t\t\t\t\t\tIOException ioException = new IOException(\r\n\t\t\t\t\t\t\t\t\t&quot;Unable to get file through class loader: &quot;\r\n\t\t\t\t\t\t\t\t\t\t\t+ cl);\r\n\t\t\t\t\t\t\tioException.initCause(e);\r\n\t\t\t\t\t\t\tthrow ioException;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (resourceFile == null) {\r\n\t\t\t\t\tthrow new IOException(\r\n\t\t\t\t\t\t\t&quot;Unable to get file through class loader: &quot; + cl);\r\n\t\t\t\t}\r\n\t\t\t\treturn resourceFile;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\nYou can also use a **thrid party library like [commons-vfs][1]** that allows you to reference a file within a jar. E.g. `jar:// arch-file-uri[! absolute-path]`. Since commons-vfs specifies an own [`FileObject`][2] that represents a file you must still copy the content to a local `java.io.File` to adapt to the `Decider.load(File)` API.\r\n\r\n**EDIT**\r\n\r\n&gt;This is very helpful! Is there anything in newer versions of java that already supports this requirement?\r\n\r\nEven if I haven&#39;t take a look at every class of every newer version I would say no. Because a classpath resource is not always a file. E.g. it can be a file within a jar or even a remote resource. Think about the applets that java programmers used a long time ago. Thus the concept of a classpath and it&#39;s resources is not bound to a local filsystem. This is obviously a good thing, because you can load classes from almost every URL and this makes it more flexible. But this flexibility also means that you must read the resource and create a copy if you need a `File`.\r\n\r\nBut maybe some kind of utility code like the one I showed above will make it into the JRE. Maybe it is already there. If so please comment and let us all know.\r\n\r\n  [1]: https://commons.apache.org/proper/commons-vfs/filesystems.html\r\n  [2]: https://commons.apache.org/proper/commons-vfs/apidocs/index.html","title":"Load a file in Resources with FileInputStream","body":"<p>I see 2 solutions:</p>\n<p><strong>Solution 1</strong></p>\n<p>Read the classpath ressource to a temp file and delete it after you called <code>load(File)</code></p>\n<pre><code>InputStream cpResource = this.getClass().getClassLoader().getResourceAsStream(&quot;file.name&quot;);\nFile tmpFile = File.createTempFile(&quot;file&quot;, &quot;temp&quot;);\nFileUtils.copyInputStreamToFile(cpResource, tmpFile); // FileUtils from apache-io\ntry {\n    decider.load(tmpFile);\n} finally {\n    tmpFile.delete();\n}\n</code></pre>\n<p><strong>Solution 2</strong></p>\n<p>If the ClassLoader that loads the resource is a URLClassLoader you can try to find the absolute file name. But this <strong>only works if the resource you want exists as a file on the filesystem</strong>. It doesn't work if the file is contained in a jar.</p>\n<pre><code>ClassLoader classLoader = this.getClass().getClassLoader();\nif(classLoader instanceof URLClassLoader){\n    URLClassLoader urlClassLoader = URLClassLoader.class.cast(classLoader);\n    URL resourceUrl = urlClassLoader.findResource(&quot;file.name&quot;);\n\n    if(&quot;file&quot;.equals(resourceUrl.getProtocol())){\n        URI uri = resourceUrl.toURI();\n        File file = new File(uri);\n        decider.load(file);\n    }\n}\n</code></pre>\n<p>I would suggest to write a utility class that tries to find the absolute file through the class loader or if it can't get it this way uses the temp file approach as fallback.</p>\n<p>Or in a more object-oriented way:</p>\n<pre><code>    public class FileResourceTest {\n\n    public static void main(String[] args) throws IOException {\n        File resourceAsFile = getResourceAsFile(&quot;file.name&quot;);\n        System.out.println(resourceAsFile);\n    }\n\n    private static File getResourceAsFile(String resource) throws IOException {\n        ClassLoader cl = FileResourceTest.class.getClassLoader();\n        File file = null;\n        FileResource fileResource = new URLClassLoaderFileResource(cl, resource);\n        try {\n            file = fileResource.getFile();\n        } catch (IOException e) {\n            fileResource = new ClasspathResourceFileResource(cl, resource);\n            file = fileResource.getFile();\n        }\n        return file;\n    }\n\n    public static interface FileResource {\n\n        public File getFile() throws IOException;\n\n    }\n\n    public static class ClasspathResourceFileResource implements FileResource {\n\n        private ClassLoader cl;\n        private String resource;\n\n        public ClasspathResourceFileResource(ClassLoader cl, String resource) {\n            this.cl = cl;\n            this.resource = resource;\n        }\n\n        public File getFile() throws IOException {\n            InputStream cpResource = cl.getResourceAsStream(resource);\n            File tmpFile = File.createTempFile(&quot;file&quot;, &quot;temp&quot;);\n            FileUtils.copyInputStreamToFile(cpResource, tmpFile);\n            tmpFile.deleteOnExit();\n            return tmpFile;\n        }\n\n    }\n\n    public static class URLClassLoaderFileResource implements FileResource {\n\n        private ClassLoader cl;\n        private String resource;\n\n        public URLClassLoaderFileResource(ClassLoader cl, String resourcePath) {\n            this.cl = cl;\n            this.resource = resourcePath;\n        }\n\n        public File getFile() throws IOException {\n            File resourceFile = null;\n            if (cl instanceof URLClassLoader) {\n                URLClassLoader urlClassLoader = URLClassLoader.class.cast(cl);\n                URL resourceUrl = urlClassLoader.findResource(resource);\n                if (&quot;file&quot;.equals(resourceUrl.getProtocol())) {\n                    try {\n\n                        URI uri = resourceUrl.toURI();\n                        resourceFile = new File(uri);\n                    } catch (URISyntaxException e) {\n                        IOException ioException = new IOException(\n                                &quot;Unable to get file through class loader: &quot;\n                                        + cl);\n                        ioException.initCause(e);\n                        throw ioException;\n                    }\n\n                }\n            }\n            if (resourceFile == null) {\n                throw new IOException(\n                        &quot;Unable to get file through class loader: &quot; + cl);\n            }\n            return resourceFile;\n        }\n\n    }\n}\n</code></pre>\n<p>You can also use a <strong>thrid party library like <a href=\"https://commons.apache.org/proper/commons-vfs/filesystems.html\" rel=\"noreferrer\">commons-vfs</a></strong> that allows you to reference a file within a jar. E.g. <code>jar:// arch-file-uri[! absolute-path]</code>. Since commons-vfs specifies an own <a href=\"https://commons.apache.org/proper/commons-vfs/apidocs/index.html\" rel=\"noreferrer\"><code>FileObject</code></a> that represents a file you must still copy the content to a local <code>java.io.File</code> to adapt to the <code>Decider.load(File)</code> API.</p>\n<p><strong>EDIT</strong></p>\n<blockquote>\n<p>This is very helpful! Is there anything in newer versions of java that already supports this requirement?</p>\n</blockquote>\n<p>Even if I haven't take a look at every class of every newer version I would say no. Because a classpath resource is not always a file. E.g. it can be a file within a jar or even a remote resource. Think about the applets that java programmers used a long time ago. Thus the concept of a classpath and it's resources is not bound to a local filsystem. This is obviously a good thing, because you can load classes from almost every URL and this makes it more flexible. But this flexibility also means that you must read the resource and create a copy if you need a <code>File</code>.</p>\n<p>But maybe some kind of utility code like the one I showed above will make it into the JRE. Maybe it is already there. If so please comment and let us all know.</p>\n"},{"tags":[],"owner":{"account_id":271270,"reputation":1321,"user_id":561709,"accept_rate":94,"display_name":"Croo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677578519,"creation_date":1677578519,"answer_id":75590456,"question_id":19177882,"body_markdown":"I had the same problem as I needed the resource as a file path and InputStream did not provide it. \r\n\r\nFor me the following worked:\r\n\r\n    URL resource = Thread.currentThread().getContextClassLoader().getResource(mockDataFileName+&quot;.zip&quot;);\r\n    File resource = new File(resource.toURI());","title":"Load a file in Resources with FileInputStream","body":"<p>I had the same problem as I needed the resource as a file path and InputStream did not provide it.</p>\n<p>For me the following worked:</p>\n<pre><code>URL resource = Thread.currentThread().getContextClassLoader().getResource(mockDataFileName+&quot;.zip&quot;);\nFile resource = new File(resource.toURI());\n</code></pre>\n"}],"owner":{"account_id":509681,"reputation":289,"user_id":1049995,"accept_rate":100,"display_name":"Diegolo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52115,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":19177955,"answer_count":2,"score":17,"last_activity_date":1677578519,"creation_date":1380879194,"question_id":19177882,"body_markdown":"I know the safe way to open a file in the resources is:\r\n\r\n      InputStream is = this.getClass().getResourceAsStream(&quot;/path/in/jar/file.name&quot;);  \r\n\r\nnow the problem is that my file is a model for a decider in the Weka Wrapper package and \r\nthe [Decider class](http://code.google.com/p/weka-wrapper/source/browse/trunk/src/weka/wrapper/Decider.java?r=2) has only a method:\r\n\r\n      public void load(File file) throws Exception \r\n\r\nload takes the file and opens it as a FileInputStream. Do you see a workaround? I really would \r\nlike to ship the model putting it in the resources. I was thinking to create a temporary file, write the content of the model in the temp file and then pass the temporary file to Weka, but it is so dirty.. \r\nother options? \r\n","title":"Load a file in Resources with FileInputStream","body":"<p>I know the safe way to open a file in the resources is:</p>\n\n<pre><code>  InputStream is = this.getClass().getResourceAsStream(\"/path/in/jar/file.name\");  \n</code></pre>\n\n<p>now the problem is that my file is a model for a decider in the Weka Wrapper package and \nthe <a href=\"http://code.google.com/p/weka-wrapper/source/browse/trunk/src/weka/wrapper/Decider.java?r=2\" rel=\"noreferrer\">Decider class</a> has only a method:</p>\n\n<pre><code>  public void load(File file) throws Exception \n</code></pre>\n\n<p>load takes the file and opens it as a FileInputStream. Do you see a workaround? I really would \nlike to ship the model putting it in the resources. I was thinking to create a temporary file, write the content of the model in the temp file and then pass the temporary file to Weka, but it is so dirty.. \nother options? </p>\n"},{"tags":["java","maven","jar","external","anylogic"],"comments":[{"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"score":1,"creation_date":1675185493,"post_id":75298714,"comment_id":132872681,"body_markdown":"Hi Sharif, welcome to SOF. &quot;Can you guide me&quot; is, unfortunately, not a great SOF question, see https://www.benjamin-schumann.com/blog/2021/4/1/how-to-win-at-anylogic-on-stackoverflow . However, it sounds like you need to compile the code they provide into a jar file yourself. You can do this yourself with any Java IDE, google that to get started.","body":"Hi Sharif, welcome to SOF. &quot;Can you guide me&quot; is, unfortunately, not a great SOF question, see <a href=\"https://www.benjamin-schumann.com/blog/2021/4/1/how-to-win-at-anylogic-on-stackoverflow\" rel=\"nofollow noreferrer\">benjamin-schumann.com/blog/2021/4/1/&hellip;</a> . However, it sounds like you need to compile the code they provide into a jar file yourself. You can do this yourself with any Java IDE, google that to get started."},{"owner":{"account_id":27475771,"reputation":11,"user_id":20963792,"display_name":"Sharif Khaleghparast"},"score":0,"creation_date":1677576727,"post_id":75298714,"comment_id":133360717,"body_markdown":"Thank you Ben. Indeed a good starting point.","body":"Thank you Ben. Indeed a good starting point."}],"answers":[{"tags":[],"owner":{"account_id":27475771,"reputation":11,"user_id":20963792,"display_name":"Sharif Khaleghparast"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677577352,"creation_date":1677577352,"answer_id":75590265,"question_id":75298714,"body_markdown":"I come up with a solution myself and I&#39;d like to share that with the community.\r\nYou have to build the JAR packages yourself using Maven, Gradle, etc. [This][1] is where you can find the dependency to include in a Maven project. Use [this][2] guide to build it. However, the default built packages include 141 JAR files, which is not handy to be used in Anylogic, in my case. Thus, I customized the default build a little bit to assemble the JAR files into one JAR file. [This][3] is where you can find the Maven plug-in to do that.\r\n\r\n\r\n  [1]: https://github.com/powsybl/powsybl-starter/\r\n  [2]: https://www.theanylogicmodeler.com/post/template-how-to-write-a-tips-blog-post\r\n  [3]: https://stackoverflow.com/questions/25591991/combine-multiple-jar-into-one-using-maven","title":"How should I import PowSyBl into Anylogic and using its libraries to do powerflow calculations?","body":"<p>I come up with a solution myself and I'd like to share that with the community.\nYou have to build the JAR packages yourself using Maven, Gradle, etc. <a href=\"https://github.com/powsybl/powsybl-starter/\" rel=\"nofollow noreferrer\">This</a> is where you can find the dependency to include in a Maven project. Use <a href=\"https://www.theanylogicmodeler.com/post/template-how-to-write-a-tips-blog-post\" rel=\"nofollow noreferrer\">this</a> guide to build it. However, the default built packages include 141 JAR files, which is not handy to be used in Anylogic, in my case. Thus, I customized the default build a little bit to assemble the JAR files into one JAR file. <a href=\"https://stackoverflow.com/questions/25591991/combine-multiple-jar-into-one-using-maven\">This</a> is where you can find the Maven plug-in to do that.</p>\n"}],"owner":{"account_id":27475771,"reputation":11,"user_id":20963792,"display_name":"Sharif Khaleghparast"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75590265,"answer_count":1,"score":0,"last_activity_date":1677578328,"creation_date":1675175622,"question_id":75298714,"body_markdown":"I want to model and simulate the electricity grid, however, there is not any Anylogic library that help me with this purpose and the powerflow calculations. I have searched for java packages that may help, and I could find PowSyBl at:\r\n\r\n&quot;https://www.powsybl.org/index.html&quot;.\r\n\r\nHowever, I have no clue how to import and use this package:\r\n\r\nhttps://www.powsybl.org/pages/download/\r\n\r\nor any of its Java libraries:\r\n\r\nhttps://www.powsybl.org/pages/documentation/developer/repositories/\r\n\r\nto Anylogic after downloading from GitHub. There is no &quot;Jar&quot; file there, and there is no Java classes inside the zip file to call within Anylogic. There is a tutorial page that guide how to write Java code to do powerflow calculations, but I cannot run or configure the package to be able to follow its instructions:\r\n\r\nhttps://www.powsybl.org/pages/documentation/developer/tutorials/loadflow.html\r\n\r\nHow should I prepare this Java package to be used with Anylogic? Is there any way to do that at all?","title":"How should I import PowSyBl into Anylogic and using its libraries to do powerflow calculations?","body":"<p>I want to model and simulate the electricity grid, however, there is not any Anylogic library that help me with this purpose and the powerflow calculations. I have searched for java packages that may help, and I could find PowSyBl at:</p>\n<p>&quot;https://www.powsybl.org/index.html&quot;.</p>\n<p>However, I have no clue how to import and use this package:</p>\n<p><a href=\"https://www.powsybl.org/pages/download/\" rel=\"nofollow noreferrer\">https://www.powsybl.org/pages/download/</a></p>\n<p>or any of its Java libraries:</p>\n<p><a href=\"https://www.powsybl.org/pages/documentation/developer/repositories/\" rel=\"nofollow noreferrer\">https://www.powsybl.org/pages/documentation/developer/repositories/</a></p>\n<p>to Anylogic after downloading from GitHub. There is no &quot;Jar&quot; file there, and there is no Java classes inside the zip file to call within Anylogic. There is a tutorial page that guide how to write Java code to do powerflow calculations, but I cannot run or configure the package to be able to follow its instructions:</p>\n<p><a href=\"https://www.powsybl.org/pages/documentation/developer/tutorials/loadflow.html\" rel=\"nofollow noreferrer\">https://www.powsybl.org/pages/documentation/developer/tutorials/loadflow.html</a></p>\n<p>How should I prepare this Java package to be used with Anylogic? Is there any way to do that at all?</p>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"owner":{"account_id":22599784,"reputation":119,"user_id":20744083,"display_name":"had0uken"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1677577933,"creation_date":1677512390,"question_id":75582527,"body_markdown":"I have Spring MVC app. I am trying to upload file there. My controllers` methods are:\r\n\r\n\r\n    @RequestMapping(&quot;/addNewListening&quot;)\r\n        public ModelAndView addNewListening() {\r\n            ModelAndView modelAndView = new ModelAndView();\r\n            modelAndView.setViewName(&quot;admin-views/add-listening-task&quot;);\r\n            return modelAndView;\r\n        }\r\n    \r\n        @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)\r\n        public ModelAndView upload(\r\n                @RequestParam MultipartFile file) {\r\n            ModelAndView modelAndView = new ModelAndView();\r\n            modelAndView.setViewName(&quot;successUpload&quot;);\r\n            return modelAndView;\r\n        }\r\n\r\nJSP form:\r\n\r\n\r\n    &lt;%@taglib uri=&quot;http://www.springframework.org/tags/form&quot; prefix=&quot;form&quot;%&gt;\r\n    \r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Image File Upload&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;br&gt;\r\n    &lt;h3&gt;File Upload:&lt;/h3&gt;\r\n    Select file to upload: &lt;br /&gt;\r\n    &lt;form action=&quot;/admin/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n        &lt;input   name=&quot;file&quot; type=&quot;file&quot;/&gt;\r\n        &lt;br /&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;Upload file&quot;/&gt;\r\n    &lt;/form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nBeans from configuration class:\r\n\r\n\r\n    @Bean\r\n        public CommonsMultipartResolver multipartResolver() {\r\n            CommonsMultipartResolver multipart = new CommonsMultipartResolver();\r\n            multipart.setMaxUploadSize(3 * 1024 * 1024);\r\n            return multipart;\r\n        }\r\n    \r\n        @Bean\r\n        @Order(0)\r\n        public MultipartFilter multipartFilter() {\r\n            MultipartFilter multipartFilter = new MultipartFilter();\r\n            multipartFilter.setMultipartResolverBeanName(&quot;multipartResolver&quot;);\r\n            return multipartFilter;\r\n        }\r\n\r\n\r\nI am trying to upload file after the application run:\r\n[![введите сюда описание изображения][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AYQ1c.png\r\n\r\nI and I get next one after pushing &quot;Upload file&quot; button:\r\n\r\n    HTTP Status 500 – Internal Server Error\r\n    Type Exception Report\r\n    \r\n    Message Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\r\n    \r\n    Description The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n    \r\n    Exception\r\n    \r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\r\n\r\n\r\nPlease help! Where I had done a mistake? I am not sure what exactly part of code I also have to post there. So I have posted that parts of code which can have impact to this error. Any other part should I post here?\r\n\r\n\r\n\r\nupd. Server log:\r\n\r\n    11:48:23.800 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /admin/upload\r\n    11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin@ukr.net, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN, ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=5CFAEA37E4FFADEB41C85FBB59010D53], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]\r\n    11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter - Set SecurityContextHolder to SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin@ukr.net, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN, ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=5CFAEA37E4FFADEB41C85FBB59010D53], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]\r\n    11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Authorized filter invocation [POST /admin/upload] with attributes [authenticated]\r\n    11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /admin/upload\r\n    11:48:23.802 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST &quot;/admin/upload&quot;, parameters={}\r\n    11:48:23.896 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Failed to complete request: java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\r\n    11:48:23.897 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request\r\n\r\nThe information in browser:\r\n\r\n    HTTP Status 500 – Internal Server Error\r\n    Type Exception Report\r\n    \r\n    Message Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\r\n    \r\n    Description The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n    \r\n    Exception\r\n    \r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\r\n    \torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n    \torg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:696)\r\n    \torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:779)\r\n    \torg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n    \torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n    \torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\r\n    \torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n    \torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)\r\n    \torg.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n    \torg.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n    \torg.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n    \torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n    \torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n    \torg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n    \torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n    Root Cause\r\n    \r\n    java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\r\n    \torg.apache.commons.fileupload.FileUploadBase.parseEndOfLine(FileUploadBase.java:660)\r\n    \torg.apache.commons.fileupload.FileUploadBase.getParsedHeaders(FileUploadBase.java:582)\r\n    \torg.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.findNextItem(FileUploadBase.java:1052)\r\n    \torg.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.&lt;init&gt;(FileUploadBase.java:1017)\r\n    \torg.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:309)\r\n    \torg.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:333)\r\n    \torg.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:113)\r\n    \torg.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:159)\r\n    \torg.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:143)\r\n    \torg.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1178)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1012)\r\n    \torg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n    \torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \torg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:696)\r\n    \torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:779)\r\n    \torg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n    \torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n    \torg.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\r\n    \torg.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n    \torg.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)\r\n    \torg.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n    \torg.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n    \torg.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n    \torg.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n    \torg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \torg.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    \torg.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n    \torg.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n    \torg.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n    \torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n    Note The full stack trace of the root cause is available in the server logs.\r\n    \r\n    Apache Tomcat/9.0.67\r\n\r\n\r\nHTTP Request (after pushing &quot;upload file&quot; button):\r\n\r\n    Request URL: http://localhost:8080/admin/upload\r\n    Request Method: POST\r\n    Status Code: 500 \r\n    Remote Address: [::1]:8080\r\n    Referrer Policy: strict-origin-when-cross-origin\r\n    Cache-Control: no-cache, no-store, max-age=0, must-revalidate\r\n    Connection: close\r\n    Content-Language: ru\r\n    Content-Type: text/html;charset=utf-8\r\n    Date: Mon, 27 Feb 2023 14:07:48 GMT\r\n    Expires: 0\r\n    Pragma: no-cache\r\n    Transfer-Encoding: chunked\r\n    X-Content-Type-Options: nosniff\r\n    X-Frame-Options: DENY\r\n    X-XSS-Protection: 1; mode=block\r\n    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\r\n    Accept-Encoding: gzip, deflate, br\r\n    Accept-Language: ru,ru-RU;q=0.9,en-US;q=0.8,en;q=0.7\r\n    Cache-Control: max-age=0\r\n    Connection: keep-alive\r\n    Content-Length: 15009\r\n    Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryADgDv5A0ZKq6wkNK\r\n    Cookie: JSESSIONID=B4E4437FA7A9A4E4A82EE78119DAA924\r\n    Host: localhost:8080\r\n    Origin: http://localhost:8080\r\n    Referer: http://localhost:8080/admin/addNewListening\r\n    sec-ch-ua: &quot;Chromium&quot;;v=&quot;110&quot;, &quot;Not A(Brand&quot;;v=&quot;24&quot;, &quot;Google Chrome&quot;;v=&quot;110&quot;\r\n    sec-ch-ua-mobile: ?0\r\n    sec-ch-ua-platform: &quot;Windows&quot;\r\n    Sec-Fetch-Dest: document\r\n    Sec-Fetch-Mode: navigate\r\n    Sec-Fetch-Site: same-origin\r\n    Upgrade-Insecure-Requests: 1\r\n    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36\r\n\r\n\r\n\r\nI tried not to brake the most simple code from tutorial regarding uploading files and literally copy-past that. But the app still doesn`t work. \r\n\r\nupd.\r\nI was trying to resolve that and found out that Spring security blocks uploading file probably, so I add spring configuration also:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class MySecurityConfig extends WebSecurityConfigurerAdapter {\r\n        @Autowired\r\n        private BCryptPasswordEncoder bCryptPasswordEncoder;\r\n    \r\n        @Autowired\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(userDetailsService).\r\n                    passwordEncoder(bCryptPasswordEncoder);\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n    \r\n            http\r\n                    .csrf().disable()\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/registration**&quot;).permitAll()\r\n                    .antMatchers(&quot;/login&quot;).permitAll()\r\n                    .antMatchers(&quot;/resources/**&quot;).permitAll()\r\n                    .antMatchers(&quot;/admin**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .formLogin()\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .permitAll()\r\n                    .usernameParameter(&quot;email&quot;)\r\n                    .passwordParameter(&quot;password&quot;)\r\n                    .and()\r\n                    .logout()\r\n                    .permitAll()\r\n                    .and();\r\n        }\r\n    }","title":"Spring MVC upload file java.lang.IllegalStateException","body":"<p>I have Spring MVC app. I am trying to upload file there. My controllers` methods are:</p>\n<pre><code>@RequestMapping(&quot;/addNewListening&quot;)\n    public ModelAndView addNewListening() {\n        ModelAndView modelAndView = new ModelAndView();\n        modelAndView.setViewName(&quot;admin-views/add-listening-task&quot;);\n        return modelAndView;\n    }\n\n    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)\n    public ModelAndView upload(\n            @RequestParam MultipartFile file) {\n        ModelAndView modelAndView = new ModelAndView();\n        modelAndView.setViewName(&quot;successUpload&quot;);\n        return modelAndView;\n    }\n</code></pre>\n<p>JSP form:</p>\n<pre><code>&lt;%@taglib uri=&quot;http://www.springframework.org/tags/form&quot; prefix=&quot;form&quot;%&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Image File Upload&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;br&gt;\n&lt;h3&gt;File Upload:&lt;/h3&gt;\nSelect file to upload: &lt;br /&gt;\n&lt;form action=&quot;/admin/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n    &lt;input   name=&quot;file&quot; type=&quot;file&quot;/&gt;\n    &lt;br /&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Upload file&quot;/&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Beans from configuration class:</p>\n<pre><code>@Bean\n    public CommonsMultipartResolver multipartResolver() {\n        CommonsMultipartResolver multipart = new CommonsMultipartResolver();\n        multipart.setMaxUploadSize(3 * 1024 * 1024);\n        return multipart;\n    }\n\n    @Bean\n    @Order(0)\n    public MultipartFilter multipartFilter() {\n        MultipartFilter multipartFilter = new MultipartFilter();\n        multipartFilter.setMultipartResolverBeanName(&quot;multipartResolver&quot;);\n        return multipartFilter;\n    }\n</code></pre>\n<p>I am trying to upload file after the application run:\n<a href=\"https://i.stack.imgur.com/AYQ1c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AYQ1c.png\" alt=\"введите сюда описание изображения\" /></a></p>\n<p>I and I get next one after pushing &quot;Upload file&quot; button:</p>\n<pre><code>HTTP Status 500 – Internal Server Error\nType Exception Report\n\nMessage Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\n\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\n\nException\n\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\n</code></pre>\n<p>Please help! Where I had done a mistake? I am not sure what exactly part of code I also have to post there. So I have posted that parts of code which can have impact to this error. Any other part should I post here?</p>\n<p>upd. Server log:</p>\n<pre><code>11:48:23.800 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Securing POST /admin/upload\n11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin@ukr.net, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN, ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=5CFAEA37E4FFADEB41C85FBB59010D53], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]\n11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter - Set SecurityContextHolder to SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin@ukr.net, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN, ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=5CFAEA37E4FFADEB41C85FBB59010D53], Granted Authorities=[ROLE_ADMIN, ROLE_USER]]]\n11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Authorized filter invocation [POST /admin/upload] with attributes [authenticated]\n11:48:23.801 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.FilterChainProxy - Secured POST /admin/upload\n11:48:23.802 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - POST &quot;/admin/upload&quot;, parameters={}\n11:48:23.896 [http-nio-8080-exec-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Failed to complete request: java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\n11:48:23.897 [http-nio-8080-exec-2] DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter - Cleared SecurityContextHolder to complete request\n</code></pre>\n<p>The information in browser:</p>\n<pre><code>HTTP Status 500 – Internal Server Error\nType Exception Report\n\nMessage Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\n\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\n\nException\n\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: Expected headers to be terminated by an empty line.\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:696)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)\n    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\nRoot Cause\n\njava.lang.IllegalStateException: Expected headers to be terminated by an empty line.\n    org.apache.commons.fileupload.FileUploadBase.parseEndOfLine(FileUploadBase.java:660)\n    org.apache.commons.fileupload.FileUploadBase.getParsedHeaders(FileUploadBase.java:582)\n    org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.findNextItem(FileUploadBase.java:1052)\n    org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.&lt;init&gt;(FileUploadBase.java:1017)\n    org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:309)\n    org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:333)\n    org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(ServletFileUpload.java:113)\n    org.springframework.web.multipart.commons.CommonsMultipartResolver.parseRequest(CommonsMultipartResolver.java:159)\n    org.springframework.web.multipart.commons.CommonsMultipartResolver.resolveMultipart(CommonsMultipartResolver.java:143)\n    org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1178)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1012)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:696)\n    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:94)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)\n    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\nNote The full stack trace of the root cause is available in the server logs.\n\nApache Tomcat/9.0.67\n</code></pre>\n<p>HTTP Request (after pushing &quot;upload file&quot; button):</p>\n<pre><code>Request URL: http://localhost:8080/admin/upload\nRequest Method: POST\nStatus Code: 500 \nRemote Address: [::1]:8080\nReferrer Policy: strict-origin-when-cross-origin\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\nConnection: close\nContent-Language: ru\nContent-Type: text/html;charset=utf-8\nDate: Mon, 27 Feb 2023 14:07:48 GMT\nExpires: 0\nPragma: no-cache\nTransfer-Encoding: chunked\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-XSS-Protection: 1; mode=block\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nAccept-Encoding: gzip, deflate, br\nAccept-Language: ru,ru-RU;q=0.9,en-US;q=0.8,en;q=0.7\nCache-Control: max-age=0\nConnection: keep-alive\nContent-Length: 15009\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundaryADgDv5A0ZKq6wkNK\nCookie: JSESSIONID=B4E4437FA7A9A4E4A82EE78119DAA924\nHost: localhost:8080\nOrigin: http://localhost:8080\nReferer: http://localhost:8080/admin/addNewListening\nsec-ch-ua: &quot;Chromium&quot;;v=&quot;110&quot;, &quot;Not A(Brand&quot;;v=&quot;24&quot;, &quot;Google Chrome&quot;;v=&quot;110&quot;\nsec-ch-ua-mobile: ?0\nsec-ch-ua-platform: &quot;Windows&quot;\nSec-Fetch-Dest: document\nSec-Fetch-Mode: navigate\nSec-Fetch-Site: same-origin\nUpgrade-Insecure-Requests: 1\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36\n</code></pre>\n<p>I tried not to brake the most simple code from tutorial regarding uploading files and literally copy-past that. But the app still doesn`t work.</p>\n<p>upd.\nI was trying to resolve that and found out that Spring security blocks uploading file probably, so I add spring configuration also:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class MySecurityConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private BCryptPasswordEncoder bCryptPasswordEncoder;\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).\n                passwordEncoder(bCryptPasswordEncoder);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http\n                .csrf().disable()\n                .authorizeRequests()\n                .antMatchers(&quot;/registration**&quot;).permitAll()\n                .antMatchers(&quot;/login&quot;).permitAll()\n                .antMatchers(&quot;/resources/**&quot;).permitAll()\n                .antMatchers(&quot;/admin**&quot;).hasRole(&quot;ADMIN&quot;)\n                .anyRequest().authenticated()\n                .and()\n                .formLogin()\n                .loginPage(&quot;/login&quot;)\n                .permitAll()\n                .usernameParameter(&quot;email&quot;)\n                .passwordParameter(&quot;password&quot;)\n                .and()\n                .logout()\n                .permitAll()\n                .and();\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","maven","junit"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1677603444,"post_id":75589847,"comment_id":133369148,"body_markdown":"Why not trying to execute the test from your IDE with debugging instead of callign via command line?","body":"Why not trying to execute the test from your IDE with debugging instead of callign via command line?"}],"owner":{"account_id":246941,"reputation":1572,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677577868,"creation_date":1677574892,"question_id":75589847,"body_markdown":"I am using maven surefire debug plugin to debug the unit tests. Till yesterday, it used to take almost 1 min for the debug control to reach eclipse after I trigger it from the terminal. However, only for one of the repositories, it has taken starting almost 10-12 mins from today. Other repos are still taking less than a min. Any idea what the underlying issue can be? Any suggestions on how I can troubleshoot it further?\r\nSample command I am using :-\r\n\r\n    mvn clean test -Dquality.check.skip=true -Djasper.reports=none -Dcloud.provider.value=AWS  -Dtest=GridXTimeOfUseProcessorTest#processRequest -Dmaven.surefire.debug","title":"Maven surefire debug taking too long to start debugging in eclipse","body":"<p>I am using maven surefire debug plugin to debug the unit tests. Till yesterday, it used to take almost 1 min for the debug control to reach eclipse after I trigger it from the terminal. However, only for one of the repositories, it has taken starting almost 10-12 mins from today. Other repos are still taking less than a min. Any idea what the underlying issue can be? Any suggestions on how I can troubleshoot it further?\nSample command I am using :-</p>\n<pre><code>mvn clean test -Dquality.check.skip=true -Djasper.reports=none -Dcloud.provider.value=AWS  -Dtest=GridXTimeOfUseProcessorTest#processRequest -Dmaven.surefire.debug\n</code></pre>\n"},{"tags":["java","hibernate","quarkus","quarkus-panache","quarkus-reactive"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1677561382,"post_id":75580511,"comment_id":133357541,"body_markdown":"Any chance you can share your application on GitHub?","body":"Any chance you can share your application on GitHub?"}],"answers":[{"tags":[],"owner":{"account_id":26282730,"reputation":33,"user_id":19950967,"display_name":"ismail ouzzine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677577830,"creation_date":1677577830,"answer_id":75590350,"question_id":75580511,"body_markdown":"I know where I made the mistake. It was a class having a constructor with only one field, without having another with no args. \r\n\r\nI added a no args constructor and it works well now! ","title":"Quarkus : Config root [HibernateOrmRuntimeConfig] with config phase [RUN_TIME] not initialized yet","body":"<p>I know where I made the mistake. It was a class having a constructor with only one field, without having another with no args.</p>\n<p>I added a no args constructor and it works well now!</p>\n"}],"owner":{"account_id":26282730,"reputation":33,"user_id":19950967,"display_name":"ismail ouzzine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1238,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677577830,"creation_date":1677500987,"question_id":75580511,"body_markdown":"I cannot run my quarkus due to HibernateOrmRuntimeConfig initialisation.\r\n\r\nI am new to Quarkus. I try to build an application with Hibernate reactive with Panache. I have some entities (some inherit from PanacheEntity, and some inherit from PanacheEntityBase because the id is not Long).\r\nI put that entities in the package entities (inside the main package).\r\n\r\nMy dependencies are : \r\n```\r\nquarkus-hibernate-reactive-panache\r\nquarkus-reactive-mysql-client\r\nquarkus-resteasy-reactive\r\nquarkus-arc\r\nquarkus-resteasy-reactive-jackson\r\nquarkus-junit5\r\nrest-assured\r\n```\r\n\r\nI don&#39;t know why when I run the project with `quarkus dev` I got this error : \r\n```\r\n[io.qua.arc.impl] (Quarkus Main Thread) An error occurred during delivery of the @BeforeDestroyed(ApplicationScoped.class) event: javax.enterprise.inject.: Config root [io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig] with config phase [RUN_TIME] not initialized yet.\r\n```\r\nMy application.properties : \r\n```\r\nquarkus.datasource.db-kind=mysql\r\nquarkus.hibernate-orm.database.generation=drop-and-create\r\nquarkus.datasource.reactive.url=vertx-reactive:mysql://localhost:3306/my_db\r\nquarkus.datasource.username=root\r\nquarkus.datasource.password=\r\nquarkus.datasource.reactive.name=my_db\r\n```\r\nAny solution to resolve this issue and to understand its causes ?\r\nthanks in advance.","title":"Quarkus : Config root [HibernateOrmRuntimeConfig] with config phase [RUN_TIME] not initialized yet","body":"<p>I cannot run my quarkus due to HibernateOrmRuntimeConfig initialisation.</p>\n<p>I am new to Quarkus. I try to build an application with Hibernate reactive with Panache. I have some entities (some inherit from PanacheEntity, and some inherit from PanacheEntityBase because the id is not Long).\nI put that entities in the package entities (inside the main package).</p>\n<p>My dependencies are :</p>\n<pre><code>quarkus-hibernate-reactive-panache\nquarkus-reactive-mysql-client\nquarkus-resteasy-reactive\nquarkus-arc\nquarkus-resteasy-reactive-jackson\nquarkus-junit5\nrest-assured\n</code></pre>\n<p>I don't know why when I run the project with <code>quarkus dev</code> I got this error :</p>\n<pre><code>[io.qua.arc.impl] (Quarkus Main Thread) An error occurred during delivery of the @BeforeDestroyed(ApplicationScoped.class) event: javax.enterprise.inject.: Config root [io.quarkus.hibernate.orm.runtime.HibernateOrmRuntimeConfig] with config phase [RUN_TIME] not initialized yet.\n</code></pre>\n<p>My application.properties :</p>\n<pre><code>quarkus.datasource.db-kind=mysql\nquarkus.hibernate-orm.database.generation=drop-and-create\nquarkus.datasource.reactive.url=vertx-reactive:mysql://localhost:3306/my_db\nquarkus.datasource.username=root\nquarkus.datasource.password=\nquarkus.datasource.reactive.name=my_db\n</code></pre>\n<p>Any solution to resolve this issue and to understand its causes ?\nthanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","api","postman"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1677529714,"post_id":75585208,"comment_id":133352475,"body_markdown":"I can’t see anything obvious. Can you please add the class with the SpringBootApplication annotation? This might be a package structure issue.","body":"I can’t see anything obvious. Can you please add the class with the SpringBootApplication annotation? This might be a package structure issue."},{"owner":{"account_id":25573904,"reputation":33,"user_id":19353780,"display_name":"Sapir"},"score":0,"creation_date":1677530429,"post_id":75585208,"comment_id":133352637,"body_markdown":"I edited the main post with the SpringBootApplication annotation. Any thoughts?","body":"I edited the main post with the SpringBootApplication annotation. Any thoughts?"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1677530903,"post_id":75585208,"comment_id":133352746,"body_markdown":"status code is 404 or 415 ?","body":"status code is 404 or 415 ?"},{"owner":{"account_id":25573904,"reputation":33,"user_id":19353780,"display_name":"Sapir"},"score":0,"creation_date":1677531221,"post_id":75585208,"comment_id":133352812,"body_markdown":"I am getting status 404","body":"I am getting status 404"},{"owner":{"account_id":4327304,"reputation":211,"user_id":3533762,"display_name":"Stefanos S"},"score":0,"creation_date":1677534145,"post_id":75585208,"comment_id":133353477,"body_markdown":"Check to see if there is an empty space at the end of the URL that you use for the POST request. Everything should work with the code that you posted, just make sure postman creates the request properly","body":"Check to see if there is an empty space at the end of the URL that you use for the POST request. Everything should work with the code that you posted, just make sure postman creates the request properly"},{"owner":{"account_id":25573904,"reputation":33,"user_id":19353780,"display_name":"Sapir"},"score":0,"creation_date":1677566322,"post_id":75585208,"comment_id":133358125,"body_markdown":"I did check, but the problem persists. I don&#39;t understand what I am doing wrong. Could it be something with the Tomcat or Maven?","body":"I did check, but the problem persists. I don&#39;t understand what I am doing wrong. Could it be something with the Tomcat or Maven?"}],"answers":[{"tags":[],"owner":{"account_id":20397560,"reputation":13,"user_id":19334734,"display_name":"lingting"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677549961,"creation_date":1677549676,"answer_id":75587233,"question_id":75585208,"body_markdown":"check your *.yml config key: server.servlet.context-path\r\n\r\nedit: tomcat additional check items\r\n\r\nTomcat also needs to check deployment -&gt; application context","title":"Spring boot API getting error 404 on Postman","body":"<p>check your *.yml config key: server.servlet.context-path</p>\n<p>edit: tomcat additional check items</p>\n<p>Tomcat also needs to check deployment -&gt; application context</p>\n"}],"owner":{"account_id":25573904,"reputation":33,"user_id":19353780,"display_name":"Sapir"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677577814,"creation_date":1677529418,"question_id":75585208,"body_markdown":"I&#39;m learning how to use Spring boot now, and I&#39;m having a hard time figuring out why my POST requests are not getting through.\r\n\r\nI&#39;m using Java 17 , VS code, and POSTMAN for the requests.\r\n\r\nThis is a straight forward demo for me only to learn the basics of spring boot.\r\nI dont have an actual DB in place, nor do I have a frontend up and running.\r\n\r\nI am only trying to recieve a status 200 for the request.\r\n\r\nAny help would be great.\r\n\r\n\r\nmy request is POST &quot;localhost:8080/api/v1/person&quot;\r\n\r\nBody: ``` {&quot;name&quot;: &quot;John&quot;}```\r\n\r\nconsole\r\n```\r\n2023-02-27T21:55:37.208+02:00  INFO 10664 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication using Java 17.0.6 with PID 10664 (C:\\Users\\ASUS\\Desktop\\&#176;≥Θσ≡σ&#183; ∞⌠&#176;σΘΘ≈ΦΘφ\\Backend\\demo\\target\\classes started by ASUS in C:\\Users\\ASUS\\Desktop\\&#176;≥Θσ≡σ&#183; ∞⌠&#176;σΘΘ≈ΦΘφ\\Backend\\demo)\r\n2023-02-27T21:55:37.214+02:00  INFO 10664 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-02-27T21:55:37.944+02:00  INFO 10664 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-02-27T21:55:37.955+02:00  INFO 10664 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-02-27T21:55:37.956+02:00  INFO 10664 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\r\n2023-02-27T21:55:38.057+02:00  INFO 10664 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-02-27T21:55:38.058+02:00  INFO 10664 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 802 ms\r\n2023-02-27T21:55:38.344+02:00  INFO 10664 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-02-27T21:55:38.352+02:00  INFO 10664 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 1.44 seconds (process running for 1.756)\r\n2023-02-27T21:55:44.377+02:00  INFO 10664 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-02-27T21:55:44.377+02:00  INFO 10664 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-02-27T21:55:44.378+02:00  INFO 10664 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n```\r\n\r\npom.xml\r\n``` \r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nPerson\r\n```\r\npackage com.example.demo.model;\r\n\r\nimport java.util.*;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\n\r\npublic class Person {\r\n          \r\n      private final UUID id;\r\n      private final String name;\r\n\r\n      public Person(@JsonProperty(&quot;id&quot;) UUID id,\r\n      @JsonProperty(&quot;name&quot;) String name) {\r\n                  this.id = id;\r\n                  this.name = name;\r\n      }\r\n\r\n      public UUID getId() {\r\n                  return id;\r\n      }\r\n\r\n      public String getName() {\r\n                  return name;\r\n      }\r\n\r\n          \r\n}\r\n```\r\nPersonService\r\n```\r\npackage com.example.demo.service;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.example.demo.dao.PersonDao;\r\nimport com.example.demo.model.Person;\r\n\r\n@Service\r\npublic class PersonService {\r\n\r\n      private final PersonDao personDao;\r\n\r\n      @Autowired\r\n      public PersonService(@Qualifier(&quot;fakeDao&quot;) PersonDao personDao) {\r\n                  this.personDao = personDao;\r\n      }\r\n      \r\n      public int addPerson(Person person) {\r\n                  return personDao.insertPerson(person);\r\n      }\r\n\r\n\r\n}\r\n```\r\nPersonController\r\n```\r\npackage com.example.demo.api;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.example.demo.model.Person;\r\nimport com.example.demo.service.PersonService;\r\n\r\n@RequestMapping(&quot;/api/v1/person&quot;)\r\n@RestController\r\npublic class PersonController {\r\n      \r\n      private final PersonService personService;\r\n\r\n      @Autowired\r\n      public PersonController(PersonService personService) {\r\n                  this.personService = personService;\r\n      }\r\n\r\n      @PostMapping\r\n      public void addPerson(@RequestBody Person person) {\r\n                  personService.addPerson(person);\r\n      } \r\n}\r\n\r\n```\r\n\r\nEdit: adding the spring boot application\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n} \r\n```\r\n\r\n","title":"Spring boot API getting error 404 on Postman","body":"<p>I'm learning how to use Spring boot now, and I'm having a hard time figuring out why my POST requests are not getting through.</p>\n<p>I'm using Java 17 , VS code, and POSTMAN for the requests.</p>\n<p>This is a straight forward demo for me only to learn the basics of spring boot.\nI dont have an actual DB in place, nor do I have a frontend up and running.</p>\n<p>I am only trying to recieve a status 200 for the request.</p>\n<p>Any help would be great.</p>\n<p>my request is POST &quot;localhost:8080/api/v1/person&quot;</p>\n<p>Body: <code> {&quot;name&quot;: &quot;John&quot;}</code></p>\n<p>console</p>\n<pre><code>2023-02-27T21:55:37.208+02:00  INFO 10664 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication using Java 17.0.6 with PID 10664 (C:\\Users\\ASUS\\Desktop\\°≥Θσ≡σ· ∞⌠°σΘΘ≈ΦΘφ\\Backend\\demo\\target\\classes started by ASUS in C:\\Users\\ASUS\\Desktop\\°≥Θσ≡σ· ∞⌠°σΘΘ≈ΦΘφ\\Backend\\demo)\n2023-02-27T21:55:37.214+02:00  INFO 10664 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-02-27T21:55:37.944+02:00  INFO 10664 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-02-27T21:55:37.955+02:00  INFO 10664 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-02-27T21:55:37.956+02:00  INFO 10664 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\n2023-02-27T21:55:38.057+02:00  INFO 10664 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-02-27T21:55:38.058+02:00  INFO 10664 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 802 ms\n2023-02-27T21:55:38.344+02:00  INFO 10664 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-02-27T21:55:38.352+02:00  INFO 10664 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 1.44 seconds (process running for 1.756)\n2023-02-27T21:55:44.377+02:00  INFO 10664 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-02-27T21:55:44.377+02:00  INFO 10664 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-02-27T21:55:44.378+02:00  INFO 10664 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Person</p>\n<pre><code>package com.example.demo.model;\n\nimport java.util.*;\n\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic class Person {\n          \n      private final UUID id;\n      private final String name;\n\n      public Person(@JsonProperty(&quot;id&quot;) UUID id,\n      @JsonProperty(&quot;name&quot;) String name) {\n                  this.id = id;\n                  this.name = name;\n      }\n\n      public UUID getId() {\n                  return id;\n      }\n\n      public String getName() {\n                  return name;\n      }\n\n          \n}\n</code></pre>\n<p>PersonService</p>\n<pre><code>package com.example.demo.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.stereotype.Service;\n\nimport com.example.demo.dao.PersonDao;\nimport com.example.demo.model.Person;\n\n@Service\npublic class PersonService {\n\n      private final PersonDao personDao;\n\n      @Autowired\n      public PersonService(@Qualifier(&quot;fakeDao&quot;) PersonDao personDao) {\n                  this.personDao = personDao;\n      }\n      \n      public int addPerson(Person person) {\n                  return personDao.insertPerson(person);\n      }\n\n\n}\n</code></pre>\n<p>PersonController</p>\n<pre><code>package com.example.demo.api;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.example.demo.model.Person;\nimport com.example.demo.service.PersonService;\n\n@RequestMapping(&quot;/api/v1/person&quot;)\n@RestController\npublic class PersonController {\n      \n      private final PersonService personService;\n\n      @Autowired\n      public PersonController(PersonService personService) {\n                  this.personService = personService;\n      }\n\n      @PostMapping\n      public void addPerson(@RequestBody Person person) {\n                  personService.addPerson(person);\n      } \n}\n\n</code></pre>\n<p>Edit: adding the spring boot application</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n} \n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":1,"creation_date":1677573036,"post_id":75589480,"comment_id":133359633,"body_markdown":"You could write `|$` at the end of the lookahead, see https://regex101.com/r/5A4yDO/1","body":"You could write <code>|$</code> at the end of the lookahead, see <a href=\"https://regex101.com/r/5A4yDO/1\" rel=\"nofollow noreferrer\">regex101.com/r/5A4yDO/1</a>"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677577632,"creation_date":1677577632,"answer_id":75590310,"question_id":75589480,"body_markdown":"As commented by [TheFourthBird][1] adding an alternation with `$` or `\\z` will surely get you the desired matches but this regex with `[\\s\\S]+?` or a DOT with `DOTALL` mode will be very inefficient and if your log files are are huge as that case usually is then application will slow down considerably.\r\n\r\nYou may consider this far more efficient regex for your parsing:\r\n\r\n```sh\r\n^(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}GMT)(\\+\\d{2}:\\d{2}) (-&gt; )(.+(?:\\R(?!\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}GMT).+)*)\r\n```\r\n\r\nAlso note use of anchor `^` at the start to make this regex more correct so capture date-time stamp only at the start of long entry.\r\n\r\n[RegEx Demo][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/75589480/take-the-last-match-with-regex-using-lookaround#75589480:~:text=write%20%7C%24%20at-,the,-end%20of%20the\r\n  [2]: https://regex101.com/r/hK8VRy/1\r\n\r\n**RegEx Changes:**\r\n\r\n- `(`: Start capture group #4\r\n  - `.+`: Match 1+ of any character before line break\r\n  - `(?:`: Non-capture group start\r\n    - `\\R`: Match any kind of line break\r\n    - `(?!\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}GMT)`: Negative lookahead to make sure we stop this match before start of next log entry\r\n    - `.+`: Match 1+ of any character before line break\r\n  - `)*`: Non-capture group end. Repeat this group 0 or more times\r\n- `)`: End capture group #4","title":"Take the last match with regex using lookaround","body":"<p>As commented by <a href=\"https://stackoverflow.com/questions/75589480/take-the-last-match-with-regex-using-lookaround#75589480:%7E:text=write%20%7C%24%20at-,the,-end%20of%20the\">TheFourthBird</a> adding an alternation with <code>$</code> or <code>\\z</code> will surely get you the desired matches but this regex with <code>[\\s\\S]+?</code> or a DOT with <code>DOTALL</code> mode will be very inefficient and if your log files are are huge as that case usually is then application will slow down considerably.</p>\n<p>You may consider this far more efficient regex for your parsing:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>^(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}GMT)(\\+\\d{2}:\\d{2}) (-&gt; )(.+(?:\\R(?!\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}GMT).+)*)\n</code></pre>\n<p>Also note use of anchor <code>^</code> at the start to make this regex more correct so capture date-time stamp only at the start of long entry.</p>\n<p><a href=\"https://regex101.com/r/hK8VRy/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n<p><strong>RegEx Changes:</strong></p>\n<ul>\n<li><code>(</code>: Start capture group #4\n<ul>\n<li><code>.+</code>: Match 1+ of any character before line break</li>\n<li><code>(?:</code>: Non-capture group start\n<ul>\n<li><code>\\R</code>: Match any kind of line break</li>\n<li><code>(?!\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}GMT)</code>: Negative lookahead to make sure we stop this match before start of next log entry</li>\n<li><code>.+</code>: Match 1+ of any character before line break</li>\n</ul>\n</li>\n<li><code>)*</code>: Non-capture group end. Repeat this group 0 or more times</li>\n</ul>\n</li>\n<li><code>)</code>: End capture group #4</li>\n</ul>\n"}],"owner":{"account_id":14553836,"reputation":131,"user_id":10511933,"display_name":"dimmxx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75590310,"answer_count":1,"score":1,"last_activity_date":1677577632,"creation_date":1677572583,"question_id":75589480,"body_markdown":"I can not write a proper regex expression for parsing logs. I have such a log file:\r\n\r\n```\r\n2023-02-20T16:59:24GMT+02:00 -&gt; isCharging: true\r\n2023-02-21T16:59:24GMT+02:00 -&gt; Alarm scheduled for time: 18.02.2023 00:01:41\r\n2023-02-22T16:59:24GMT+02:00 -&gt; com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\r\n\tat com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\r\n\tat okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\r\n\tat java.lang.Thread.run(Thread.java:760)\r\n\r\n2023-02-23T16:59:24GMT+02:00 -&gt; no internet connection\r\n2023-02-24T16:59:24GMT+02:00 -&gt; isCharging: true\r\n2023-02-25T16:59:24GMT+02:00 -&gt; com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\r\n\tat com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\r\n\tat okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\r\n\tat java.lang.Thread.run(Thread.java:760)\r\n```\r\n\r\nI want to parse all the lines of this text in several parts to get the following output:\r\n\r\n```\r\nTimestamp: 2023-02-21T16:59:24GMT \r\nOffset: +02:00\r\nFlag: -&gt;\r\nBody: Alarm scheduled for time: 18.02.2023 00:01:41\r\n```\r\n\r\nSo I have written such an expression:\r\n\r\n```\r\nString regex = &quot;(\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}GMT)&quot;\r\n            + &quot;(\\\\+\\\\d{2}:\\\\d{2}) &quot;\r\n            + &quot;(-&gt; )&quot;\r\n            + &quot;([\\\\s\\\\S]+?(?=\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}GMT))&quot;;\r\n\r\nPattern p = Pattern.compile(regex);\r\n        Matcher matcher = p.matcher(fileContent);\r\n        while (matcher.find()) {\r\n            System.out.println(&quot;Timestamp: &quot; + matcher.group(1));\r\n            System.out.println(&quot;Offset: &quot; + matcher.group(2));\r\n            System.out.println(&quot;Flag: &quot; + matcher.group(3));\r\n            System.out.println(&quot;Body: &quot; + matcher.group(4));\r\n        }\r\n```\r\n\r\nAnd receive the following result:\r\n\r\n\r\n```\r\nTimestamp: 2023-02-20T16:59:24GMT\r\nOffset: +02:00\r\nFlag: -&gt; \r\nBody: isCharging: true\r\n\r\nTimestamp: 2023-02-21T16:59:24GMT\r\nOffset: +02:00\r\nFlag: -&gt; \r\nBody: Alarm scheduled for time: 18.02.2023 00:01:41\r\n\r\nTimestamp: 2023-02-22T16:59:24GMT\r\nOffset: +02:00\r\nFlag: -&gt; \r\nBody: com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\r\n\tat com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\r\n\tat okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\r\n\tat java.lang.Thread.run(Thread.java:760)\r\n\r\nTimestamp: 2023-02-23T16:59:24GMT\r\nOffset: +02:00\r\nFlag: -&gt; \r\nBody: no internet connection\r\n\r\nTimestamp: 2023-02-24T16:59:24GMT\r\nOffset: +02:00\r\nFlag: -&gt; \r\nBody: isCharging: true\r\n```\r\nSo the problem is that my expression does not take the last element:\r\n\r\n```\r\n2023-02-25T16:59:24GMT+02:00 -&gt; com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\r\n    at com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\r\n    at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\r\n    at java.lang.Thread.run(Thread.java:760)\r\n```\r\nWhat am I doing wrong? Should I use here lookaround? What is the best way to obtain the desired result?","title":"Take the last match with regex using lookaround","body":"<p>I can not write a proper regex expression for parsing logs. I have such a log file:</p>\n<pre><code>2023-02-20T16:59:24GMT+02:00 -&gt; isCharging: true\n2023-02-21T16:59:24GMT+02:00 -&gt; Alarm scheduled for time: 18.02.2023 00:01:41\n2023-02-22T16:59:24GMT+02:00 -&gt; com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\n    at com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n    at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n    at java.lang.Thread.run(Thread.java:760)\n\n2023-02-23T16:59:24GMT+02:00 -&gt; no internet connection\n2023-02-24T16:59:24GMT+02:00 -&gt; isCharging: true\n2023-02-25T16:59:24GMT+02:00 -&gt; com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\n    at com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n    at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n    at java.lang.Thread.run(Thread.java:760)\n</code></pre>\n<p>I want to parse all the lines of this text in several parts to get the following output:</p>\n<pre><code>Timestamp: 2023-02-21T16:59:24GMT \nOffset: +02:00\nFlag: -&gt;\nBody: Alarm scheduled for time: 18.02.2023 00:01:41\n</code></pre>\n<p>So I have written such an expression:</p>\n<pre><code>String regex = &quot;(\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}GMT)&quot;\n            + &quot;(\\\\+\\\\d{2}:\\\\d{2}) &quot;\n            + &quot;(-&gt; )&quot;\n            + &quot;([\\\\s\\\\S]+?(?=\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}GMT))&quot;;\n\nPattern p = Pattern.compile(regex);\n        Matcher matcher = p.matcher(fileContent);\n        while (matcher.find()) {\n            System.out.println(&quot;Timestamp: &quot; + matcher.group(1));\n            System.out.println(&quot;Offset: &quot; + matcher.group(2));\n            System.out.println(&quot;Flag: &quot; + matcher.group(3));\n            System.out.println(&quot;Body: &quot; + matcher.group(4));\n        }\n</code></pre>\n<p>And receive the following result:</p>\n<pre><code>Timestamp: 2023-02-20T16:59:24GMT\nOffset: +02:00\nFlag: -&gt; \nBody: isCharging: true\n\nTimestamp: 2023-02-21T16:59:24GMT\nOffset: +02:00\nFlag: -&gt; \nBody: Alarm scheduled for time: 18.02.2023 00:01:41\n\nTimestamp: 2023-02-22T16:59:24GMT\nOffset: +02:00\nFlag: -&gt; \nBody: com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\n    at com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n    at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n    at java.lang.Thread.run(Thread.java:760)\n\nTimestamp: 2023-02-23T16:59:24GMT\nOffset: +02:00\nFlag: -&gt; \nBody: no internet connection\n\nTimestamp: 2023-02-24T16:59:24GMT\nOffset: +02:00\nFlag: -&gt; \nBody: isCharging: true\n</code></pre>\n<p>So the problem is that my expression does not take the last element:</p>\n<pre><code>2023-02-25T16:59:24GMT+02:00 -&gt; com.example.data.network.interceptor.NoConnectionInterceptor$NoConnectivityException: No network available, please check your WiFi or Data connection\n    at com.example.data.network.interceptor.NoConnectionInterceptor.intercept(NoConnectionInterceptor.kt:24)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n    at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:517)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n    at java.lang.Thread.run(Thread.java:760)\n</code></pre>\n<p>What am I doing wrong? Should I use here lookaround? What is the best way to obtain the desired result?</p>\n"},{"tags":["javascript","java","socket.io","socket.io-java-client"],"answers":[{"tags":[],"owner":{"account_id":2110134,"reputation":303,"user_id":1875581,"accept_rate":50,"display_name":"edoreld"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677577606,"creation_date":1677577606,"answer_id":75590305,"question_id":75582426,"body_markdown":"I fixed the problem by adding `socket.open()` after `Socket socket = IO.socket(uri, options);` in my Java client.\r\n\r\nI didn&#39;t see this posted in the documentation so I opened a PR to add it https://github.com/socketio/socket.io-client-java/pull/732","title":"Why am I not seeing any input on this server-client setup?","body":"<p>I fixed the problem by adding <code>socket.open()</code> after <code>Socket socket = IO.socket(uri, options);</code> in my Java client.</p>\n<p>I didn't see this posted in the documentation so I opened a PR to add it <a href=\"https://github.com/socketio/socket.io-client-java/pull/732\" rel=\"nofollow noreferrer\">https://github.com/socketio/socket.io-client-java/pull/732</a></p>\n"}],"owner":{"account_id":2110134,"reputation":303,"user_id":1875581,"accept_rate":50,"display_name":"edoreld"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75590305,"answer_count":1,"score":0,"last_activity_date":1677577606,"creation_date":1677511783,"question_id":75582426,"body_markdown":"I&#39;m trying to use socket.io for a work project. In order to learn how this library works, I want to setup a test server and client in which I can run some code.\r\n\r\nFor now, I have set up a working JavaScript server as per the example listed here: https://socket.io/docs/v4/. \r\n\r\n```javascript\r\nimport { Server } from &quot;socket.io&quot;;\r\n\r\nconst io = new Server(3000);\r\n\r\nio.on(&quot;connection&quot;, (socket) =&gt; {\r\n\r\n  console.log(&quot;connection&quot;);\r\n\r\n  // send a message to the client\r\n  socket.emit(&quot;hello from server&quot;, 1, &quot;2&quot;, { 3: Buffer.from([4]) });\r\n\r\n  // receive a message from the client\r\n  socket.on(&quot;hello from client&quot;, (...args) =&gt; {\r\n    console.log(&quot;client says hi&quot;);\r\n  });\r\n});\r\n```\r\n\r\nWhen I setup the client which is also shown on the website above, I see the output of my `console.log` function. Here&#39;s the working JavaScript client that I&#39;m using:\r\n\r\n```javascript\r\nimport { io } from &quot;socket.io-client&quot;;\r\n\r\nconst socket = io(&quot;ws://localhost:3000&quot;);\r\n\r\n// send a message to the server\r\nsocket.emit(&quot;hello from client&quot;, 5, &quot;6&quot;, { 7: Uint8Array.from([8]) });\r\n\r\n// receive a message from the server\r\nsocket.on(&quot;hello from server&quot;, (...args) =&gt; {\r\n  // ...\r\n});\r\n```\r\n\r\nHowever, I need to run the client using Java. Here&#39;s my problem, and probably where I&#39;m missing some fundamental insight, when I try to run a Java client with the above JavaScript server, I see no output whatsoever. I&#39;m using https://github.com/socketio/socket.io-client-java and this is how I defined my client:\r\n\r\n```java\r\n// package + imports\r\n\r\npublic class Main\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        URI uri = URI.create(&quot;http://localhost:3000&quot;);\r\n        IO.Options options = IO.Options.builder().build();\r\n        Socket socket = IO.socket(uri, options);\r\n\r\n        socket.emit(&quot;hello from client&quot;, &quot;world&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve also tried `URI uri = URI.create(&quot;ws://localhost:3000&quot;);` because the documentation says ws and http are interchangeable, but to no avail.\r\n\r\n**Why is my server not outputting anything when I run my Java class, and how do fix it**\r\n","title":"Why am I not seeing any input on this server-client setup?","body":"<p>I'm trying to use socket.io for a work project. In order to learn how this library works, I want to setup a test server and client in which I can run some code.</p>\n<p>For now, I have set up a working JavaScript server as per the example listed here: <a href=\"https://socket.io/docs/v4/\" rel=\"nofollow noreferrer\">https://socket.io/docs/v4/</a>.</p>\n<pre class=\"lang-js prettyprint-override\"><code>import { Server } from &quot;socket.io&quot;;\n\nconst io = new Server(3000);\n\nio.on(&quot;connection&quot;, (socket) =&gt; {\n\n  console.log(&quot;connection&quot;);\n\n  // send a message to the client\n  socket.emit(&quot;hello from server&quot;, 1, &quot;2&quot;, { 3: Buffer.from([4]) });\n\n  // receive a message from the client\n  socket.on(&quot;hello from client&quot;, (...args) =&gt; {\n    console.log(&quot;client says hi&quot;);\n  });\n});\n</code></pre>\n<p>When I setup the client which is also shown on the website above, I see the output of my <code>console.log</code> function. Here's the working JavaScript client that I'm using:</p>\n<pre class=\"lang-js prettyprint-override\"><code>import { io } from &quot;socket.io-client&quot;;\n\nconst socket = io(&quot;ws://localhost:3000&quot;);\n\n// send a message to the server\nsocket.emit(&quot;hello from client&quot;, 5, &quot;6&quot;, { 7: Uint8Array.from([8]) });\n\n// receive a message from the server\nsocket.on(&quot;hello from server&quot;, (...args) =&gt; {\n  // ...\n});\n</code></pre>\n<p>However, I need to run the client using Java. Here's my problem, and probably where I'm missing some fundamental insight, when I try to run a Java client with the above JavaScript server, I see no output whatsoever. I'm using <a href=\"https://github.com/socketio/socket.io-client-java\" rel=\"nofollow noreferrer\">https://github.com/socketio/socket.io-client-java</a> and this is how I defined my client:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// package + imports\n\npublic class Main\n{\n    public static void main(String[] args)\n    {\n        URI uri = URI.create(&quot;http://localhost:3000&quot;);\n        IO.Options options = IO.Options.builder().build();\n        Socket socket = IO.socket(uri, options);\n\n        socket.emit(&quot;hello from client&quot;, &quot;world&quot;);\n    }\n}\n</code></pre>\n<p>I've also tried <code>URI uri = URI.create(&quot;ws://localhost:3000&quot;);</code> because the documentation says ws and http are interchangeable, but to no avail.</p>\n<p><strong>Why is my server not outputting anything when I run my Java class, and how do fix it</strong></p>\n"},{"tags":["java","javadoc"],"owner":{"account_id":14931697,"reputation":1,"user_id":10780939,"display_name":"yasee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677577467,"answer_count":0,"score":0,"last_activity_date":1677577289,"creation_date":1677577289,"question_id":75590253,"body_markdown":"When I was reading the Integer class of Java Docs, I found this clause that `This is a value-based class; programmers should treat instances that are equal as interchangeable and should not use instances for synchronization, or unpredictable behavior may occur.`. What does this mean?\r\n\r\nI didn&#39;t try anything.","title":"What does use instances for synchronization mean?","body":"<p>When I was reading the Integer class of Java Docs, I found this clause that <code>This is a value-based class; programmers should treat instances that are equal as interchangeable and should not use instances for synchronization, or unpredictable behavior may occur.</code>. What does this mean?</p>\n<p>I didn't try anything.</p>\n"},{"tags":["java","android","widget","switch-statement","android-appwidget"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1677577519,"post_id":75590239,"comment_id":133360924,"body_markdown":"I&#39;ve not used that yet, but looking at the docs, the checked state should be in an `Intent` extra keyed with `RemoteViews.EXTRA_CHECKED`: https://developer.android.com/reference/android/widget/RemoteViews#setOnCheckedChangeResponse(int,%20android.widget.RemoteViews.RemoteResponse). For example, `boolean checked = intent.getBooleanExtra(RemoteViews.EXTRA_CHECKED, false);`.","body":"I&#39;ve not used that yet, but looking at the docs, the checked state should be in an <code>Intent</code> extra keyed with <code>RemoteViews.EXTRA_CHECKED</code>: <a href=\"https://developer.android.com/reference/android/widget/RemoteViews#setOnCheckedChangeResponse(int,%20android.widget.RemoteViews.RemoteResponse)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/widget/&hellip;</a>. For example, <code>boolean checked = intent.getBooleanExtra(RemoteViews.EXTRA_CHECKED, false);</code>."}],"owner":{"account_id":27898196,"reputation":1,"user_id":21303021,"display_name":"Muthana Rababah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677577211,"creation_date":1677577211,"question_id":75590239,"body_markdown":"I am developing a **widget** for turning on/off by a switch\r\n\r\nThe **widget** contains **TextView** and **Switch** :\r\n\r\n\r\nYou can look at the code below that i have done so far\r\n\r\n\r\nThe widget class extends from AppWidgetProvider\r\n\r\n```TimeWidget``` class\r\n\r\n```\r\npackage com.example.time;\r\n\r\nimport android.app.PendingIntent;\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\n\r\nimport android.content.Intent;\r\nimport android.widget.RemoteViews;\r\n\r\npublic class TimeWidget extends AppWidgetProvider {\r\nprivate static final String mySwitch = &quot;MySwitch&quot;;\r\n\r\n@Override\r\npublic void onUpdate(Context context, AppWidgetManager \r\nappWidgetManager, int[] appWidgetIds) {\r\n\r\n    for (int appWidgetId : appWidgetIds) {\r\n\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), \r\n        R.layout.time_widget);\r\n\r\n        PendingIntent pending = getPendingSelfIntent(context);\r\n         \r\n        RemoteViews.RemoteResponseresponse=\r\n        RemoteViews.RemoteResponse.fromPendingIntent(pending);\r\n\r\n        views.setOnCheckedChangeResponse(R.id.appwidget_switch, \r\n        response);\r\n\r\n        views.addView(R.id.appwidget_switch ,views);\r\n\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n    }\r\n}\r\n\r\n@Override\r\npublic void onReceive(Context context, Intent intent) {\r\n    super.onReceive(context, intent);\r\n    if (mySwitch.equals(intent.getAction())) {\r\n\r\n    }\r\n}\r\n```\r\n\r\n```getPendingSelfIntent``` method\r\n```\r\nprotected PendingIntent getPendingSelfIntent(Context context) {\r\n    Intent intent = new Intent(context, getClass());\r\n    intent.setAction(mySwitch);\r\n    return PendingIntent.getBroadcast(context, 0, intent, \r\n    PendingIntent.FLAG_UPDATE_CURRENT |PendingIntent.FLAG_IMMUTABLE);\r\n    }\r\n}\r\n```\r\n\r\n\r\n**My Problem** : I want to know ---&gt; how can i get a value switch from the widget,\r\n\r\nand I searched for a solution to this problem, but I didn&#39;t find it .\r\n\r\nCan anyone please explain me how can i solve my problem ?","title":"How to get the value switch (On/Off) from a Widget , Android ,Java","body":"<p>I am developing a <strong>widget</strong> for turning on/off by a switch</p>\n<p>The <strong>widget</strong> contains <strong>TextView</strong> and <strong>Switch</strong> :</p>\n<p>You can look at the code below that i have done so far</p>\n<p>The widget class extends from AppWidgetProvider</p>\n<p><code>TimeWidget</code> class</p>\n<pre><code>package com.example.time;\n\nimport android.app.PendingIntent;\nimport android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\n\nimport android.content.Intent;\nimport android.widget.RemoteViews;\n\npublic class TimeWidget extends AppWidgetProvider {\nprivate static final String mySwitch = &quot;MySwitch&quot;;\n\n@Override\npublic void onUpdate(Context context, AppWidgetManager \nappWidgetManager, int[] appWidgetIds) {\n\n    for (int appWidgetId : appWidgetIds) {\n\n        RemoteViews views = new RemoteViews(context.getPackageName(), \n        R.layout.time_widget);\n\n        PendingIntent pending = getPendingSelfIntent(context);\n         \n        RemoteViews.RemoteResponseresponse=\n        RemoteViews.RemoteResponse.fromPendingIntent(pending);\n\n        views.setOnCheckedChangeResponse(R.id.appwidget_switch, \n        response);\n\n        views.addView(R.id.appwidget_switch ,views);\n\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n    }\n}\n\n@Override\npublic void onReceive(Context context, Intent intent) {\n    super.onReceive(context, intent);\n    if (mySwitch.equals(intent.getAction())) {\n\n    }\n}\n</code></pre>\n<p><code>getPendingSelfIntent</code> method</p>\n<pre><code>protected PendingIntent getPendingSelfIntent(Context context) {\n    Intent intent = new Intent(context, getClass());\n    intent.setAction(mySwitch);\n    return PendingIntent.getBroadcast(context, 0, intent, \n    PendingIntent.FLAG_UPDATE_CURRENT |PendingIntent.FLAG_IMMUTABLE);\n    }\n}\n</code></pre>\n<p><strong>My Problem</strong> : I want to know ---&gt; how can i get a value switch from the widget,</p>\n<p>and I searched for a solution to this problem, but I didn't find it .</p>\n<p>Can anyone please explain me how can i solve my problem ?</p>\n"},{"tags":["javascript","java","jmeter","performance-testing","beanshell"],"comments":[{"owner":{"account_id":209652,"reputation":34028,"user_id":460802,"display_name":"UBIK LOAD PACK"},"score":0,"creation_date":1476773118,"post_id":40015014,"comment_id":67474504,"body_markdown":"Any feedback on answer ? if ok it should be accepted and upvoted so that users know it is usable. Thx","body":"Any feedback on answer ? if ok it should be accepted and upvoted so that users know it is usable. Thx"}],"answers":[{"tags":[],"owner":{"account_id":209652,"reputation":34028,"user_id":460802,"display_name":"UBIK LOAD PACK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476371857,"creation_date":1476371857,"answer_id":40024914,"question_id":40015014,"body_markdown":"JMeter is not a browser.\r\n\r\nJavascript is run through Rhino or Nashorn.\r\n\r\nSo your best option is to look at CryptoJS code and either:\r\n\r\n- use it in a JSR223-Preprocessor using Javascript language\r\n\r\n- Translate code to Groovy/Java using JSR223-Preprocessor + groovy\r\n\r\nSee:\r\n\r\n- https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption","title":"How to import Cryptojs in Jmeter","body":"<p>JMeter is not a browser.</p>\n\n<p>Javascript is run through Rhino or Nashorn.</p>\n\n<p>So your best option is to look at CryptoJS code and either:</p>\n\n<ul>\n<li><p>use it in a JSR223-Preprocessor using Javascript language</p></li>\n<li><p>Translate code to Groovy/Java using JSR223-Preprocessor + groovy</p></li>\n</ul>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption\">Java 256-bit AES Password-Based Encryption</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1476389924,"creation_date":1476389924,"answer_id":40030216,"question_id":40015014,"body_markdown":"I recall answering something similar already, see [How to load external js library in Jmeter?][1]\n\nQuoting myself:\n\n&gt; Use Rhino load() method like:\n&gt;\n&gt;        load(&quot;crypto.js&quot;)\n\nGiven the guy wasn&#39;t able to use the instruction here is a little bit extended version:\n\n 1. Download the required version of CryptoJS from the [releases page][2] and unpack it somewhere\n 2. Using `load` method provide full path to `crypto-js.js` file like:\n\n        /tmp/crypto-js-3.1.7/crypto-js.js\n 3. Access methods like \n\n     - CryptoJS.SHA256(...)\n     - CryptoJS.AES(...)\n     - etc. \n\nDemo:\n\n[![JSR223 JavaScript][3]][3]\n\nIf the values are static and you don&#39;t have a lot of them a better idea could be storing them into a file and accessing via i.e. [CSV Data Set Config][4]\n\n\n  [1]: https://stackoverflow.com/questions/36293800/how-to-load-external-js-library-in-jmeter\n  [2]: https://github.com/brix/crypto-js/releases\n  [3]: https://i.stack.imgur.com/NHAGW.png\n  [4]: https://guide.blazemeter.com/hc/en-us/articles/206733689-Using-CSV-DATA-SET-CONFIG","title":"How to import Cryptojs in Jmeter","body":"<p>I recall answering something similar already, see <a href=\"https://stackoverflow.com/questions/36293800/how-to-load-external-js-library-in-jmeter\">How to load external js library in Jmeter?</a></p>\n<p>Quoting myself:</p>\n<blockquote>\n<p>Use Rhino load() method like:</p>\n<pre><code>   load(&quot;crypto.js&quot;)\n</code></pre>\n</blockquote>\n<p>Given the guy wasn't able to use the instruction here is a little bit extended version:</p>\n<ol>\n<li><p>Download the required version of CryptoJS from the <a href=\"https://github.com/brix/crypto-js/releases\" rel=\"nofollow noreferrer\">releases page</a> and unpack it somewhere</p>\n</li>\n<li><p>Using <code>load</code> method provide full path to <code>crypto-js.js</code> file like:</p>\n<pre><code>/tmp/crypto-js-3.1.7/crypto-js.js\n</code></pre>\n</li>\n<li><p>Access methods like</p>\n<ul>\n<li>CryptoJS.SHA256(...)</li>\n<li>CryptoJS.AES(...)</li>\n<li>etc.</li>\n</ul>\n</li>\n</ol>\n<p>Demo:</p>\n<p><a href=\"https://i.stack.imgur.com/NHAGW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NHAGW.png\" alt=\"JSR223 JavaScript\" /></a></p>\n<p>If the values are static and you don't have a lot of them a better idea could be storing them into a file and accessing via i.e. <a href=\"https://guide.blazemeter.com/hc/en-us/articles/206733689-Using-CSV-DATA-SET-CONFIG\" rel=\"nofollow noreferrer\">CSV Data Set Config</a></p>\n"}],"owner":{"account_id":4983537,"reputation":175,"user_id":4007805,"display_name":"Shrikant Borse"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6742,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40030216,"answer_count":2,"score":2,"last_activity_date":1677576815,"creation_date":1476344341,"question_id":40015014,"body_markdown":"In one of the http request we have to send encrypted value.\r\n\r\nThe encryption is done by the CryptoJs javascript libraries and Algorithm used is AES256.\r\n\r\nI am new to Jmeter can anyone let me know how to import the CryptoJs libraries and how to use the function of same to encrypt and decrypt the same.","title":"How to import Cryptojs in Jmeter","body":"<p>In one of the http request we have to send encrypted value.</p>\n\n<p>The encryption is done by the CryptoJs javascript libraries and Algorithm used is AES256.</p>\n\n<p>I am new to Jmeter can anyone let me know how to import the CryptoJs libraries and how to use the function of same to encrypt and decrypt the same.</p>\n"},{"tags":["java","react-native","kotlin"],"answers":[{"tags":[],"owner":{"account_id":13254053,"reputation":4146,"user_id":9570734,"display_name":"Engr.Aftab Ufaq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673514461,"creation_date":1673513668,"answer_id":75093687,"question_id":75093618,"body_markdown":"there is issue with your java installation. Please Install JDK 11 on your machine. you can install mac with  HomeBrew and on windows use can use [chocolatey][1]\r\n\r\n\r\n\r\ncheck this message so you can identify this issue\r\n    Make sure Kotlin compilation is running on a JDK, not JRE.\r\n\r\n\r\n  [1]: https://chocolatey.org","title":"npx react-native run-android error &gt; Task :react-native-gradle-plugin:compileKotlin FAILED","body":"<p>there is issue with your java installation. Please Install JDK 11 on your machine. you can install mac with  HomeBrew and on windows use can use <a href=\"https://chocolatey.org\" rel=\"nofollow noreferrer\">chocolatey</a></p>\n<p>check this message so you can identify this issue\nMake sure Kotlin compilation is running on a JDK, not JRE.</p>\n"},{"tags":[],"owner":{"account_id":20140592,"reputation":183,"user_id":14770491,"display_name":"Akshay PandherPatte"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673517725,"creation_date":1673515585,"answer_id":75094067,"question_id":75093618,"body_markdown":"Try to run this command:- \r\n\r\nANDROID_HOME=~/Library/Android/sdk\r\n\r\nand after that \r\n\r\nnpx react-native run-android\r\n\r\nOr else try to update the gradle version by putting this line into the wrapper properties\r\n\r\ndistributionUrl=https://services.gradle.org/distributions/gradle-7.5.1-all.zip\r\n\r\n","title":"npx react-native run-android error &gt; Task :react-native-gradle-plugin:compileKotlin FAILED","body":"<p>Try to run this command:-</p>\n<p>ANDROID_HOME=~/Library/Android/sdk</p>\n<p>and after that</p>\n<p>npx react-native run-android</p>\n<p>Or else try to update the gradle version by putting this line into the wrapper properties</p>\n<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.5.1-all.zip</p>\n"},{"tags":[],"owner":{"account_id":27506663,"reputation":78,"user_id":20989291,"display_name":"Vishvas Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673518106,"creation_date":1673518106,"answer_id":75094603,"question_id":75093618,"body_markdown":"Run the following command\r\n\r\nchmod 755 android/gradlew\r\n\r\ninside your app root folder then run\r\n\r\nreact-native run-android","title":"npx react-native run-android error &gt; Task :react-native-gradle-plugin:compileKotlin FAILED","body":"<p>Run the following command</p>\n<p>chmod 755 android/gradlew</p>\n<p>inside your app root folder then run</p>\n<p>react-native run-android</p>\n"},{"tags":[],"owner":{"account_id":27848080,"reputation":1,"user_id":21263111,"display_name":"聂云恩"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677576646,"creation_date":1677046656,"answer_id":75528887,"question_id":75093618,"body_markdown":"I have the same problem.\r\n\r\nThe reason is my `JAVA_HOME` environment variable is set to `xxxx/java/jre1.8xx`;\r\n\r\nChange to your `path/jdk-11`; Just running\r\n\r\nI hope it will help you\r\n\r\n    ------Note this error message:\r\n    \r\n    &quot;Kotlin could not find the required JDK tools in the Java installation.&quot;","title":"npx react-native run-android error &gt; Task :react-native-gradle-plugin:compileKotlin FAILED","body":"<p>I have the same problem.</p>\n<p>The reason is my <code>JAVA_HOME</code> environment variable is set to <code>xxxx/java/jre1.8xx</code>;</p>\n<p>Change to your <code>path/jdk-11</code>; Just running</p>\n<p>I hope it will help you</p>\n<pre><code>------Note this error message:\n\n&quot;Kotlin could not find the required JDK tools in the Java installation.&quot;\n</code></pre>\n"}],"owner":{"account_id":24572205,"reputation":185,"user_id":18478456,"display_name":"ayanonize"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4282,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75093687,"answer_count":4,"score":1,"last_activity_date":1677576646,"creation_date":1673513269,"question_id":75093618,"body_markdown":"by running command npx react-native run-android or npm run android it gives the following error if you know why is this happening please let me know\r\n\r\n```\r\n&gt; myApp@0.0.1 android\r\n&gt; react-native run-android\r\n\r\ninfo Starting JS server...\r\ninfo Installing the app...\r\n&gt; Task :react-native-gradle-plugin:compileKotlin FAILED\r\n1 actionable task: 1 executed\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:react-native-gradle-plugin:compileKotlin&#39;.\r\n&gt; Failed to query the value of task &#39;:react-native-gradle-plugin:compileKotlin&#39; property &#39;compilerRunner$kotlin_gradle_plugin&#39;.\r\n   &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 10s\r\n\r\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\r\nError: Command failed: ./gradlew app:installDebug -PreactNativeDevServerPort=8081\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:react-native-gradle-plugin:compileKotlin&#39;.\r\n&gt; Failed to query the value of task &#39;:react-native-gradle-plugin:compileKotlin&#39; property &#39;compilerRunner$kotlin_gradle_plugin&#39;.\r\n   &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 10s\r\n\r\n    at makeError (/Users/ayan/Documents/myApp/node_modules/execa/index.js:174:9)\r\n    at /Users/ayan/Documents/myApp/node_modules/execa/index.js:278:16\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async runOnAllDevices (/Users/ayan/Documents/myApp/node_modules/@react-native-community/cli-platform-android/build/commands/runAndroid/runOnAllDevices.js:109:5)\r\n    at async Command.handleAction (/Users/ayan/Documents/myApp/node_modules/@react-native-community/cli/build/index.js:142:9)\r\ninfo Run CLI with --verbose flag for more details.\r\n```\r\n\r\nif you know the answer please let me know\r\nthank you in advance","title":"npx react-native run-android error &gt; Task :react-native-gradle-plugin:compileKotlin FAILED","body":"<p>by running command npx react-native run-android or npm run android it gives the following error if you know why is this happening please let me know</p>\n<pre><code>&gt; myApp@0.0.1 android\n&gt; react-native run-android\n\ninfo Starting JS server...\ninfo Installing the app...\n&gt; Task :react-native-gradle-plugin:compileKotlin FAILED\n1 actionable task: 1 executed\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':react-native-gradle-plugin:compileKotlin'.\n&gt; Failed to query the value of task ':react-native-gradle-plugin:compileKotlin' property 'compilerRunner$kotlin_gradle_plugin'.\n   &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 10s\n\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\nError: Command failed: ./gradlew app:installDebug -PreactNativeDevServerPort=8081\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':react-native-gradle-plugin:compileKotlin'.\n&gt; Failed to query the value of task ':react-native-gradle-plugin:compileKotlin' property 'compilerRunner$kotlin_gradle_plugin'.\n   &gt; Kotlin could not find the required JDK tools in the Java installation. Make sure Kotlin compilation is running on a JDK, not JRE.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 10s\n\n    at makeError (/Users/ayan/Documents/myApp/node_modules/execa/index.js:174:9)\n    at /Users/ayan/Documents/myApp/node_modules/execa/index.js:278:16\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runOnAllDevices (/Users/ayan/Documents/myApp/node_modules/@react-native-community/cli-platform-android/build/commands/runAndroid/runOnAllDevices.js:109:5)\n    at async Command.handleAction (/Users/ayan/Documents/myApp/node_modules/@react-native-community/cli/build/index.js:142:9)\ninfo Run CLI with --verbose flag for more details.\n</code></pre>\n<p>if you know the answer please let me know\nthank you in advance</p>\n"},{"tags":["java","web-services","rest","jersey"],"answers":[{"tags":[],"owner":{"account_id":1211926,"reputation":2415,"user_id":1180313,"accept_rate":35,"display_name":"Seeker"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1677576405,"creation_date":1477560550,"answer_id":40280963,"question_id":40279755,"body_markdown":"After searching all over the internet, here is what worked for me\r\n\r\n    Client client = ClientBuilder.newClient();\r\n    WebTarget target = client.target(url);\r\n    Builder basicRequest = target.request();  \r\n          \r\n    Form form = new Form();\r\n    form.param(&quot;filename&quot;, &quot;file.csv&quot;);\r\n    form.param(&quot;version&quot;, &quot;1.0&quot;);\r\n    Response response=basicRequest.post(Entity.form(form), Response.class);","title":"set &#39;form-data&#39; to jersey client post request","body":"<p>After searching all over the internet, here is what worked for me</p>\n<pre><code>Client client = ClientBuilder.newClient();\nWebTarget target = client.target(url);\nBuilder basicRequest = target.request();  \n      \nForm form = new Form();\nform.param(&quot;filename&quot;, &quot;file.csv&quot;);\nform.param(&quot;version&quot;, &quot;1.0&quot;);\nResponse response=basicRequest.post(Entity.form(form), Response.class);\n</code></pre>\n"}],"owner":{"account_id":1211926,"reputation":2415,"user_id":1180313,"accept_rate":35,"display_name":"Seeker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8612,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1677576405,"creation_date":1477556983,"question_id":40279755,"body_markdown":"I am writing a rest client which consumes a POST restful sevice of server. \r\nNow the service expects 2 parameters as part of request in &#39;form-data&#39;.\r\n\r\nIf you have across postman rest client, there we have an option to set the form-data, and give key-value pair parameters.\r\n\r\nHow can we send similar data in Javax rs rest client. Here is the code which I have.\r\n\r\n    import javax.ws.rs.client.Invocation.Builder;\r\n    import javax.ws.rs.client.Client;\r\n    import javax.ws.rs.client.WebTarget;\r\n    ...\r\n\r\n    Client client = ClientBuilder.newClient();\r\n    WebTarget target = client.target(url);\r\n    Builder basicRequest = target.request();\t\t\r\n    Response response=basicRequest.post();\r\n\r\nNow how to send 2 parameters namely &#39;fileName&#39;, &#39;fileVersion&#39; with their values as part of form-data?","title":"set &#39;form-data&#39; to jersey client post request","body":"<p>I am writing a rest client which consumes a POST restful sevice of server. \nNow the service expects 2 parameters as part of request in 'form-data'.</p>\n\n<p>If you have across postman rest client, there we have an option to set the form-data, and give key-value pair parameters.</p>\n\n<p>How can we send similar data in Javax rs rest client. Here is the code which I have.</p>\n\n<pre><code>import javax.ws.rs.client.Invocation.Builder;\nimport javax.ws.rs.client.Client;\nimport javax.ws.rs.client.WebTarget;\n...\n\nClient client = ClientBuilder.newClient();\nWebTarget target = client.target(url);\nBuilder basicRequest = target.request();        \nResponse response=basicRequest.post();\n</code></pre>\n\n<p>Now how to send 2 parameters namely 'fileName', 'fileVersion' with their values as part of form-data?</p>\n"},{"tags":["java","android","android-studio","android-studio-3.0"],"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":1,"creation_date":1631133961,"post_id":69087412,"comment_id":122144914,"body_markdown":"For whomever is voting to close this as general computing, please [read the help center](https://stackoverflow.com/help/on-topic) carefully: &quot;software tools commonly used by programmers&quot; are on-topic.  Questions about using software are only off-topic if they do not &quot;directly involve tools used primarily for programming.&quot;","body":"For whomever is voting to close this as general computing, please <a href=\"https://stackoverflow.com/help/on-topic\">read the help center</a> carefully: &quot;software tools commonly used by programmers&quot; are on-topic.  Questions about using software are only off-topic if they do not &quot;directly involve tools used primarily for programming.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":16296504,"reputation":303,"user_id":12983770,"display_name":"Harsh Mendapara"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1631015185,"creation_date":1631015185,"answer_id":69087691,"question_id":69087412,"body_markdown":"1) Use the search engine in the file explorer. Enter the name of the program to remove and delete the directories that will appear. \r\n\r\n2) Another way:- \r\n- Press Windows key + R\r\n-  Then copy this string \r\nC:\\Program Files\\Android\\Android Studio\\uninstall.exe\r\n\r\n3) Third option is:- \r\n- Search in startup menu\r\n%userprofile%\r\n- Then delete the a) .android, b) .androidstudio\r\n\r\n- Then reinstall the android studio again. \r\n\r\nI hope it works.","title":"could not find uninstall.exe android studio","body":"<ol>\n<li><p>Use the search engine in the file explorer. Enter the name of the program to remove and delete the directories that will appear.</p>\n</li>\n<li><p>Another way:-</p>\n</li>\n</ol>\n<ul>\n<li>Press Windows key + R</li>\n<li>Then copy this string\nC:\\Program Files\\Android\\Android Studio\\uninstall.exe</li>\n</ul>\n<ol start=\"3\">\n<li>Third option is:-</li>\n</ol>\n<ul>\n<li><p>Search in startup menu\n%userprofile%</p>\n</li>\n<li><p>Then delete the a) .android, b) .androidstudio</p>\n</li>\n<li><p>Then reinstall the android studio again.</p>\n</li>\n</ul>\n<p>I hope it works.</p>\n"},{"tags":[],"owner":{"account_id":9834923,"reputation":804,"user_id":12404524,"display_name":"Aniruddha"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1642781893,"creation_date":1642781893,"answer_id":70804357,"question_id":69087412,"body_markdown":"I was facing the same problem. The main problem seems to be that the recent versions of Android Studio don&#39;t come with the `uninstall.exe` in the `C:\\Program Files\\Android\\AndroidStudio` folder. \r\n\r\nHere is what worked for me: \r\n1. Download an older version of Android Studio. You can do that from the [Android Studio downloads archive](https://developer.android.com/studio/archive). \r\n2. Install it (preferably only the bare minimum as we are going to uninstall it anyway). \r\n3. Go to the folder where you installed this version of Android Studio - you will find an `uninstall.exe` here. \r\n4. Copy the `uninstall.exe` from that directory to `C:\\ProgramFiles\\Android\\AndroidStudio`(the original one). \r\n5. Run the uninstaller and this should solve the problem. ","title":"could not find uninstall.exe android studio","body":"<p>I was facing the same problem. The main problem seems to be that the recent versions of Android Studio don't come with the <code>uninstall.exe</code> in the <code>C:\\Program Files\\Android\\AndroidStudio</code> folder.</p>\n<p>Here is what worked for me:</p>\n<ol>\n<li>Download an older version of Android Studio. You can do that from the <a href=\"https://developer.android.com/studio/archive\" rel=\"noreferrer\">Android Studio downloads archive</a>.</li>\n<li>Install it (preferably only the bare minimum as we are going to uninstall it anyway).</li>\n<li>Go to the folder where you installed this version of Android Studio - you will find an <code>uninstall.exe</code> here.</li>\n<li>Copy the <code>uninstall.exe</code> from that directory to <code>C:\\ProgramFiles\\Android\\AndroidStudio</code>(the original one).</li>\n<li>Run the uninstaller and this should solve the problem.</li>\n</ol>\n"}],"owner":{"account_id":21724735,"reputation":135,"user_id":16034318,"display_name":"Jacques"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12653,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":69087691,"answer_count":2,"score":9,"last_activity_date":1677575937,"creation_date":1631014079,"question_id":69087412,"body_markdown":"I am new to Android Studio, however I am unable to change the background color of buttons. My guess is tat I&#39;m dealing with a faulty installation.. I tried to uninstall Android Studio, but the uninsall.exe file seams to be missing:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ARpDF.png\r\n\r\nHow can I uninstall Android Studio without an uninstaller?","title":"could not find uninstall.exe android studio","body":"<p>I am new to Android Studio, however I am unable to change the background color of buttons. My guess is tat I'm dealing with a faulty installation.. I tried to uninstall Android Studio, but the uninsall.exe file seams to be missing:</p>\n<p><a href=\"https://i.stack.imgur.com/ARpDF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ARpDF.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I uninstall Android Studio without an uninstaller?</p>\n"},{"tags":["java","tomcat7","connector","server.xml"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1482902075,"post_id":41355721,"comment_id":69913168,"body_markdown":"what do you want this value for?","body":"what do you want this value for?"},{"owner":{"account_id":8951964,"reputation":1,"user_id":6677667,"display_name":"Navya R"},"score":0,"creation_date":1482902129,"post_id":41355721,"comment_id":69913191,"body_markdown":"i would like to know how to read these values.","body":"i would like to know how to read these values."},{"owner":{"account_id":8951964,"reputation":1,"user_id":6677667,"display_name":"Navya R"},"score":0,"creation_date":1482902291,"post_id":41355721,"comment_id":69913246,"body_markdown":"If can explain me If you know how Connector behaves when bindOnInit=&quot;false&quot;.","body":"If can explain me If you know how Connector behaves when bindOnInit=&quot;false&quot;."}],"answers":[{"tags":[],"owner":{"account_id":5244759,"reputation":6314,"user_id":4190848,"display_name":"jlumietu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1482929681,"creation_date":1482929681,"answer_id":41362582,"question_id":41355721,"body_markdown":"You must recover the `org.apache.catalina.server.StandardServer` using MBeanServer. This is the root entry for all Tomcat system elements:\r\n\r\n    import java.lang.management.ManagementFactory;\r\n    import java.util.Collection;\r\n    import java.util.HashSet;\r\n    \r\n    import javax.management.MBeanServer;\r\n    import javax.management.ObjectName;\r\n    import org.apache.catalina.Service;\r\n    import org.apache.catalina.connector.Connector;\r\n    import org.apache.catalina.core.StandardServer;\r\n    import org.apache.log4j.Logger;\r\n    \r\n    public class TomcatConnectors {\r\n    \t\r\n    \tpublic static final String CATALINA_SERVICE_NAME = &quot;Catalina&quot;;\r\n    \t\r\n    \tpublic static final String CONNECTOR_HTTP_PROTOCOL_NAME = &quot;HTTP/1.1&quot;; \r\n    \r\n    \tprivate Logger logger = Logger.getLogger(this.getClass());\r\n    \t\r\n    \tprivate Collection&lt;Connector&gt; connectors;\r\n    \r\n    \t/**\r\n    \t * \r\n    \t */\r\n    \tpublic TomcatConnectors() {\r\n    \t\tsuper();\r\n    \t\tthis.connectors = new HashSet&lt;Connector&gt;();\r\n    \t\tthis.loadConnectors();\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * \r\n    \t * @return\r\n    \t */\r\n    \tprotected StandardServer getServerInstance(){\r\n    \t\torg.apache.catalina.core.StandardServer server = null; \r\n    \t\ttry{\r\n    \t\t\tMBeanServer mbeanServer = ManagementFactory.getPlatformMBeanServer();\r\n    \t\t\tserver = (StandardServer)mbeanServer.getAttribute(\r\n    \t\t\t\t\t\tnew ObjectName(&quot;Catalina:type=Server&quot;),\r\n    \t\t\t\t\t\t&quot;managedResource&quot;\r\n    \t\t\t\t\t);\r\n    \t\t\tif(logger.isDebugEnabled()){\r\n    \t\t\t\tlogger.debug(&quot;Server found. Info: &quot;);\r\n    \t\t\t\tlogger.debug(&quot; - address          : &quot; + server.getAddress());\r\n    \t\t\t\tlogger.debug(&quot; - domain           : &quot; + server.getDomain());\r\n    \t\t\t\tlogger.debug(&quot; - info             : &quot; + server.getInfo());\r\n    \t\t\t\tlogger.debug(&quot; - shutdown port    : &quot; + server.getPort());\r\n    \t\t\t\tlogger.debug(&quot; - shutdown command : &quot; + server.getShutdown());\r\n    \t\t\t\tlogger.debug(&quot; - serverInfo       : &quot; + server.getServerInfo());\r\n    \t\t\t\tlogger.debug(&quot; - status           : &quot; + server.getStateName());\r\n    \t\t\t\t\r\n    \t\t\t}\t\t\t\t\r\n    \t\t\t\r\n    \t\t}catch(Throwable t){\r\n    \t\t\tlogger.fatal(&quot;Fatal Error Recovering StandardServer from MBeanServer : &quot; + t.getClass().getName() + &quot;: &quot; + t.getMessage(), t);\r\n    \t\t}\r\n    \t\treturn server;\r\n    \t}\r\n    \t\r\n    \t/*\r\n    \t * \r\n    \t */\r\n    \tprotected Service getCatalinaService(){\r\n    \t\torg.apache.catalina.core.StandardServer server = this.getServerInstance();\r\n    \t\tService[] services = server.findServices();\r\n    \t\tfor(Service aService : services){\r\n    \t\t\tif(logger.isDebugEnabled()){\r\n    \t\t\t\tlogger.debug(&quot;Service: &quot; + aService.getName() + \r\n    \t\t\t\t\t\t&quot;, info: &quot; + aService.getInfo() + \r\n    \t\t\t\t\t\t&quot;, state: &quot; + aService.getStateName());\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif(aService.getName().equalsIgnoreCase(CATALINA_SERVICE_NAME)){\r\n    \t\t\t\treturn aService;\t\t\t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    \tprotected void loadConnectors() {\r\n    \t\tService catalinaService = this.getCatalinaService();\r\n    \t\tif(catalinaService == null){\r\n    \t\t\tthrow new IllegalStateException(&quot;Service Catalina cannot be null&quot;);\r\n    \t\t}\r\n    \t\tif(catalinaService.findConnectors() != null &amp;&amp; catalinaService.findConnectors().length &gt; 0){\r\n    \t\t\tlogger.debug(&quot;List of connectors: &quot;);\r\n    \t\t\tfor(Connector aConnector : catalinaService.findConnectors()){\r\n    \t\t\t\tif(logger.isDebugEnabled()){\r\n    \t\t\t\t\tlogger.debug(&quot;Connector.getProtocol: &quot; + aConnector.getProtocol());\r\n    \t\t\t\t\tlogger.debug(&quot;Connector.getPort: &quot; + aConnector.getPort());\r\n    \t\t\t\t\tlogger.debug(&quot;Connector.getInfo: &quot; + aConnector.getInfo());\r\n    \t\t\t\t\tlogger.debug(&quot;Connector.getStateName: &quot; + aConnector.getStateName());\r\n    \t\t\t\t\tlogger.debug(&quot;Connector.property.bindOnInit: &quot; + aConnector.getProperty(&quot;bindOnInit&quot;));\r\n    \t\t\t\t\tlogger.debug(&quot;Connector.attribute.bindOnInit: &quot; + aConnector.getAttribute(&quot;bindOnInit&quot;));\r\n    \t\t\t\t\tlogger.debug(&quot;Connector.getState: &quot; + aConnector.getState());\r\n    \t\t\t\t}\r\n    \t\t\t\tthis.connectors.add(aConnector);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the connectors\r\n    \t */\r\n    \tpublic Collection&lt;Connector&gt; getConnectors() {\r\n    \t\tif(this.connectors.isEmpty()){\r\n    \t\t\tthis.loadConnectors();\r\n    \t\t}\r\n    \t\treturn connectors;\r\n    \t}\r\n    }\r\n\r\nI&#39;ve tested with this connector configuration:\r\n\r\n      &lt;Service name=&quot;Catalina&quot;&gt;\r\n    \r\n        &lt;Connector connectionTimeout=&quot;20000&quot; port=&quot;8787&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt;\r\n        \r\n        &lt;Connector bindOnInit=&quot;false&quot; port=&quot;8009&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot;/&gt;\r\n    \r\n        ...\r\n\r\nAnd this is the log output:\r\n\r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:46 - Server found. Info: \r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:47 -  - address          : localhost\r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:48 -  - domain           : Catalina\r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:49 -  - info             : org.apache.catalina.core.StandardServer/1.0\r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:50 -  - shutdown port    : 8005\r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:51 -  - shutdown command : SHUTDOWN\r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:52 -  - serverInfo       : Apache Tomcat/7.0.29\r\n    HH:mm:ss,046 DEBUG  TomcatConnectors:53 -  - status           : STARTING\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:71 - Service: Catalina, info: org.apache.catalina.core.StandardService/1.0, state: STARTING\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:89 - List of connectors: \r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:92 - Connector.getProtocol: HTTP/1.1\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:93 - Connector.getPort: 8787\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:94 - Connector.getInfo: org.apache.catalina.connector.Connector/2.1\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:95 - Connector.getStateName: INITIALIZED\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:96 - Connector.property.bindOnInit: null\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:97 - Connector.attribute.bindOnInit: null\r\n    HH:mm:ss,047 DEBUG  TomcatConnectors:98 - Connector.getState: INITIALIZED\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:92 - Connector.getProtocol: AJP/1.3\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:93 - Connector.getPort: 8009\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:94 - Connector.getInfo: org.apache.catalina.connector.Connector/2.1\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:95 - Connector.getStateName: INITIALIZED\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:96 - Connector.property.bindOnInit: false\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:97 - Connector.attribute.bindOnInit: false\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:98 - Connector.getState: INITIALIZED\r\n\r\nYou can see that the `binOnInit` property can be accessed through the `getProperty()` or `getAttribute()` methods of the Connector, and that it actually returns the `false` value for AJP connector:\r\n\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:92 - Connector.getProtocol: AJP/1.3\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:96 - Connector.property.bindOnInit: false\r\n    HH:mm:ss,048 DEBUG  TomcatConnectors:97 - Connector.attribute.bindOnInit: false","title":"Accessing configured Connector tag of server.xml in Java code","body":"<p>You must recover the <code>org.apache.catalina.server.StandardServer</code> using MBeanServer. This is the root entry for all Tomcat system elements:</p>\n\n<pre><code>import java.lang.management.ManagementFactory;\nimport java.util.Collection;\nimport java.util.HashSet;\n\nimport javax.management.MBeanServer;\nimport javax.management.ObjectName;\nimport org.apache.catalina.Service;\nimport org.apache.catalina.connector.Connector;\nimport org.apache.catalina.core.StandardServer;\nimport org.apache.log4j.Logger;\n\npublic class TomcatConnectors {\n\n    public static final String CATALINA_SERVICE_NAME = \"Catalina\";\n\n    public static final String CONNECTOR_HTTP_PROTOCOL_NAME = \"HTTP/1.1\"; \n\n    private Logger logger = Logger.getLogger(this.getClass());\n\n    private Collection&lt;Connector&gt; connectors;\n\n    /**\n     * \n     */\n    public TomcatConnectors() {\n        super();\n        this.connectors = new HashSet&lt;Connector&gt;();\n        this.loadConnectors();\n    }\n\n    /**\n     * \n     * @return\n     */\n    protected StandardServer getServerInstance(){\n        org.apache.catalina.core.StandardServer server = null; \n        try{\n            MBeanServer mbeanServer = ManagementFactory.getPlatformMBeanServer();\n            server = (StandardServer)mbeanServer.getAttribute(\n                        new ObjectName(\"Catalina:type=Server\"),\n                        \"managedResource\"\n                    );\n            if(logger.isDebugEnabled()){\n                logger.debug(\"Server found. Info: \");\n                logger.debug(\" - address          : \" + server.getAddress());\n                logger.debug(\" - domain           : \" + server.getDomain());\n                logger.debug(\" - info             : \" + server.getInfo());\n                logger.debug(\" - shutdown port    : \" + server.getPort());\n                logger.debug(\" - shutdown command : \" + server.getShutdown());\n                logger.debug(\" - serverInfo       : \" + server.getServerInfo());\n                logger.debug(\" - status           : \" + server.getStateName());\n\n            }               \n\n        }catch(Throwable t){\n            logger.fatal(\"Fatal Error Recovering StandardServer from MBeanServer : \" + t.getClass().getName() + \": \" + t.getMessage(), t);\n        }\n        return server;\n    }\n\n    /*\n     * \n     */\n    protected Service getCatalinaService(){\n        org.apache.catalina.core.StandardServer server = this.getServerInstance();\n        Service[] services = server.findServices();\n        for(Service aService : services){\n            if(logger.isDebugEnabled()){\n                logger.debug(\"Service: \" + aService.getName() + \n                        \", info: \" + aService.getInfo() + \n                        \", state: \" + aService.getStateName());\n            }\n\n            if(aService.getName().equalsIgnoreCase(CATALINA_SERVICE_NAME)){\n                return aService;                \n            }\n        }\n        return null;\n    }\n\n    protected void loadConnectors() {\n        Service catalinaService = this.getCatalinaService();\n        if(catalinaService == null){\n            throw new IllegalStateException(\"Service Catalina cannot be null\");\n        }\n        if(catalinaService.findConnectors() != null &amp;&amp; catalinaService.findConnectors().length &gt; 0){\n            logger.debug(\"List of connectors: \");\n            for(Connector aConnector : catalinaService.findConnectors()){\n                if(logger.isDebugEnabled()){\n                    logger.debug(\"Connector.getProtocol: \" + aConnector.getProtocol());\n                    logger.debug(\"Connector.getPort: \" + aConnector.getPort());\n                    logger.debug(\"Connector.getInfo: \" + aConnector.getInfo());\n                    logger.debug(\"Connector.getStateName: \" + aConnector.getStateName());\n                    logger.debug(\"Connector.property.bindOnInit: \" + aConnector.getProperty(\"bindOnInit\"));\n                    logger.debug(\"Connector.attribute.bindOnInit: \" + aConnector.getAttribute(\"bindOnInit\"));\n                    logger.debug(\"Connector.getState: \" + aConnector.getState());\n                }\n                this.connectors.add(aConnector);\n            }\n        }\n    }\n\n    /**\n     * @return the connectors\n     */\n    public Collection&lt;Connector&gt; getConnectors() {\n        if(this.connectors.isEmpty()){\n            this.loadConnectors();\n        }\n        return connectors;\n    }\n}\n</code></pre>\n\n<p>I've tested with this connector configuration:</p>\n\n<pre><code>  &lt;Service name=\"Catalina\"&gt;\n\n    &lt;Connector connectionTimeout=\"20000\" port=\"8787\" protocol=\"HTTP/1.1\" redirectPort=\"8443\"/&gt;\n\n    &lt;Connector bindOnInit=\"false\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\"/&gt;\n\n    ...\n</code></pre>\n\n<p>And this is the log output:</p>\n\n<pre><code>HH:mm:ss,046 DEBUG  TomcatConnectors:46 - Server found. Info: \nHH:mm:ss,046 DEBUG  TomcatConnectors:47 -  - address          : localhost\nHH:mm:ss,046 DEBUG  TomcatConnectors:48 -  - domain           : Catalina\nHH:mm:ss,046 DEBUG  TomcatConnectors:49 -  - info             : org.apache.catalina.core.StandardServer/1.0\nHH:mm:ss,046 DEBUG  TomcatConnectors:50 -  - shutdown port    : 8005\nHH:mm:ss,046 DEBUG  TomcatConnectors:51 -  - shutdown command : SHUTDOWN\nHH:mm:ss,046 DEBUG  TomcatConnectors:52 -  - serverInfo       : Apache Tomcat/7.0.29\nHH:mm:ss,046 DEBUG  TomcatConnectors:53 -  - status           : STARTING\nHH:mm:ss,047 DEBUG  TomcatConnectors:71 - Service: Catalina, info: org.apache.catalina.core.StandardService/1.0, state: STARTING\nHH:mm:ss,047 DEBUG  TomcatConnectors:89 - List of connectors: \nHH:mm:ss,047 DEBUG  TomcatConnectors:92 - Connector.getProtocol: HTTP/1.1\nHH:mm:ss,047 DEBUG  TomcatConnectors:93 - Connector.getPort: 8787\nHH:mm:ss,047 DEBUG  TomcatConnectors:94 - Connector.getInfo: org.apache.catalina.connector.Connector/2.1\nHH:mm:ss,047 DEBUG  TomcatConnectors:95 - Connector.getStateName: INITIALIZED\nHH:mm:ss,047 DEBUG  TomcatConnectors:96 - Connector.property.bindOnInit: null\nHH:mm:ss,047 DEBUG  TomcatConnectors:97 - Connector.attribute.bindOnInit: null\nHH:mm:ss,047 DEBUG  TomcatConnectors:98 - Connector.getState: INITIALIZED\nHH:mm:ss,048 DEBUG  TomcatConnectors:92 - Connector.getProtocol: AJP/1.3\nHH:mm:ss,048 DEBUG  TomcatConnectors:93 - Connector.getPort: 8009\nHH:mm:ss,048 DEBUG  TomcatConnectors:94 - Connector.getInfo: org.apache.catalina.connector.Connector/2.1\nHH:mm:ss,048 DEBUG  TomcatConnectors:95 - Connector.getStateName: INITIALIZED\nHH:mm:ss,048 DEBUG  TomcatConnectors:96 - Connector.property.bindOnInit: false\nHH:mm:ss,048 DEBUG  TomcatConnectors:97 - Connector.attribute.bindOnInit: false\nHH:mm:ss,048 DEBUG  TomcatConnectors:98 - Connector.getState: INITIALIZED\n</code></pre>\n\n<p>You can see that the <code>binOnInit</code> property can be accessed through the <code>getProperty()</code> or <code>getAttribute()</code> methods of the Connector, and that it actually returns the <code>false</code> value for AJP connector:</p>\n\n<pre><code>HH:mm:ss,048 DEBUG  TomcatConnectors:92 - Connector.getProtocol: AJP/1.3\nHH:mm:ss,048 DEBUG  TomcatConnectors:96 - Connector.property.bindOnInit: false\nHH:mm:ss,048 DEBUG  TomcatConnectors:97 - Connector.attribute.bindOnInit: false\n</code></pre>\n"}],"owner":{"account_id":8951964,"reputation":1,"user_id":6677667,"display_name":"Navya R"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1906,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677575628,"creation_date":1482902000,"question_id":41355721,"body_markdown":"I have connector tag configured in server.xml as below.\r\n\r\n    &lt;Connector port=&quot;8080&quot; bindOnInit=&quot;false&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; /&gt;\r\n\r\nI want to read value of **bindOnInit** parameter at runtime using java code. \r\nI do not want to parse the xml.\r\nAs i searched i found that i can get data from  **Tomcat tomcat = new Tomcat();** tomcat object. How can i get existing tomcat object instead of creating new one because creating new tomcat object will not give me configured value.\r\n\r\nPlease help in reading **bindOnInit** parameter at Runtime using java code.\r\n\r\nThank you in advance.","title":"Accessing configured Connector tag of server.xml in Java code","body":"<p>I have connector tag configured in server.xml as below.</p>\n\n<pre><code>&lt;Connector port=\"8080\" bindOnInit=\"false\" protocol=\"HTTP/1.1\" connectionTimeout=\"20000\" redirectPort=\"8443\" /&gt;\n</code></pre>\n\n<p>I want to read value of <strong>bindOnInit</strong> parameter at runtime using java code. \nI do not want to parse the xml.\nAs i searched i found that i can get data from  <strong>Tomcat tomcat = new Tomcat();</strong> tomcat object. How can i get existing tomcat object instead of creating new one because creating new tomcat object will not give me configured value.</p>\n\n<p>Please help in reading <strong>bindOnInit</strong> parameter at Runtime using java code.</p>\n\n<p>Thank you in advance.</p>\n"},{"tags":["java","jackson","json-deserialization"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":1,"creation_date":1677572544,"post_id":75589269,"comment_id":133359512,"body_markdown":"Consider declaring your internal classes as `static`.","body":"Consider declaring your internal classes as <code>static</code>."}],"answers":[{"tags":[],"owner":{"account_id":17531877,"reputation":1654,"user_id":12715723,"display_name":"Jordy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677575329,"creation_date":1677573310,"answer_id":75589597,"question_id":75589269,"body_markdown":"Yes, you can create that directly. Take a look at below code :\r\n\r\n1. `Response` Class\r\n```java\r\nclass Response {\r\n\r\n    String name;\r\n    List&lt;Phone&gt; phoneList = new ArrayList&lt;&gt;();\r\n\r\n    public Response() {\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public List&lt;Phone&gt; getPhoneList() {\r\n        return phoneList;\r\n    }\r\n\r\n    public void setPhoneList(List&lt;Phone&gt; phoneList) {\r\n        this.phoneList = phoneList;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Response{&quot; + &quot;name=&quot; + name + &quot;, phoneList=&quot; + phoneList + &#39;}&#39;;\r\n    }\r\n\r\n    class Phone {\r\n\r\n        String number;\r\n        Integer code;\r\n\r\n        public String getNumber() {\r\n            return number;\r\n        }\r\n\r\n        public void setNumber(String number) {\r\n            this.number = number;\r\n        }\r\n\r\n        public Phone() {\r\n        }\r\n\r\n        public Integer getCode() {\r\n            return code;\r\n        }\r\n\r\n        public void setCode(Integer code) {\r\n            this.code = code;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Phone{&quot; + &quot;number=&quot; + number + &quot;, code=&quot; + code + &#39;}&#39;;\r\n        }\r\n    }\r\n}\r\n```\r\n2. `Main` Class\r\n```java\r\npublic static void main(String[] args) throws JsonProcessingException {\r\n    Response response = new Response();\r\n\r\n    response.setName(&quot;test&quot;);\r\n\r\n    Response.Phone phone = response.new Phone();\r\n    phone.setNumber(&quot;32323232&quot;);\r\n    phone.setCode(555);\r\n    response.phoneList.add(phone);\r\n\r\n    phone = response.new Phone();\r\n    phone.setNumber(&quot;4343423432&quot;);\r\n    phone.setCode(555);\r\n    response.phoneList.add(phone);\r\n\r\n    System.out.println(response.toString());\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n    System.out.println(mapper.writeValueAsString(response));\r\n}\r\n```","title":"Jackson deserialization list class","body":"<p>Yes, you can create that directly. Take a look at below code :</p>\n<ol>\n<li><code>Response</code> Class</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>class Response {\n\n    String name;\n    List&lt;Phone&gt; phoneList = new ArrayList&lt;&gt;();\n\n    public Response() {\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public List&lt;Phone&gt; getPhoneList() {\n        return phoneList;\n    }\n\n    public void setPhoneList(List&lt;Phone&gt; phoneList) {\n        this.phoneList = phoneList;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Response{&quot; + &quot;name=&quot; + name + &quot;, phoneList=&quot; + phoneList + '}';\n    }\n\n    class Phone {\n\n        String number;\n        Integer code;\n\n        public String getNumber() {\n            return number;\n        }\n\n        public void setNumber(String number) {\n            this.number = number;\n        }\n\n        public Phone() {\n        }\n\n        public Integer getCode() {\n            return code;\n        }\n\n        public void setCode(Integer code) {\n            this.code = code;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;Phone{&quot; + &quot;number=&quot; + number + &quot;, code=&quot; + code + '}';\n        }\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li><code>Main</code> Class</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws JsonProcessingException {\n    Response response = new Response();\n\n    response.setName(&quot;test&quot;);\n\n    Response.Phone phone = response.new Phone();\n    phone.setNumber(&quot;32323232&quot;);\n    phone.setCode(555);\n    response.phoneList.add(phone);\n\n    phone = response.new Phone();\n    phone.setNumber(&quot;4343423432&quot;);\n    phone.setCode(555);\n    response.phoneList.add(phone);\n\n    System.out.println(response.toString());\n\n    ObjectMapper mapper = new ObjectMapper();\n    mapper.enable(SerializationFeature.INDENT_OUTPUT);\n    System.out.println(mapper.writeValueAsString(response));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3436150,"reputation":622,"user_id":2879245,"accept_rate":71,"display_name":"Michał Marcinkowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677573550,"creation_date":1677573550,"answer_id":75589628,"question_id":75589269,"body_markdown":"You may add below method and it is gonna work like a charm (of course if you make those DTOs proper Jacson pojos (i.e. default constructor + setters/getter)\r\n\r\n```\r\n@JsonProperty(&quot;phoneList&quot;)\r\nprivate void mapPhones(Map&lt;String, List&lt;Phone&gt;&gt; phoneList) {\r\n  this.phoneList = phoneList.get(&quot;phone&quot;);\r\n}\r\n```","title":"Jackson deserialization list class","body":"<p>You may add below method and it is gonna work like a charm (of course if you make those DTOs proper Jacson pojos (i.e. default constructor + setters/getter)</p>\n<pre><code>@JsonProperty(&quot;phoneList&quot;)\nprivate void mapPhones(Map&lt;String, List&lt;Phone&gt;&gt; phoneList) {\n  this.phoneList = phoneList.get(&quot;phone&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":23977999,"reputation":73,"user_id":17965846,"display_name":"wuttke"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75589628,"answer_count":2,"score":1,"last_activity_date":1677575329,"creation_date":1677571174,"question_id":75589269,"body_markdown":"There is a json with a sheet as a nested class:\r\n```\r\n{\r\n\t&quot;name&quot;: &quot;test&quot;,\r\n\t&quot;phoneList&quot;: {\r\n\t\t&quot;phone&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;number&quot;: 32323232,\r\n\t\t\t\t&quot;code&quot;: 555\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;number&quot;: 4343423432,\r\n\t\t\t\t&quot;code&quot;: 555\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n```\r\nThe following DTO class is suitable for this json:\r\n\r\n    class Response {\r\n    \r\n      String name;\r\n      PhoneList phoneList;\r\n    \r\n      static class PhoneList {\r\n    \r\n        List&lt;Phone&gt; phone = new ArrayList&lt;&gt;();\r\n    \r\n        static class Phone {\r\n    \r\n          String number;\r\n          Integer code;\r\n        }\r\n      }\r\n    }\r\n\r\nIs it possible somehow not to create a PhoneList class, but to create a sheet directly?\r\n\r\n    class Response {\r\n    \r\n      String name;\r\n      List&lt;Phone&gt; phoneList = new ArrayList&lt;&gt;();\r\n    \r\n      static class Phone {\r\n        String number;\r\n        Integer code;\r\n      }\r\n    }","title":"Jackson deserialization list class","body":"<p>There is a json with a sheet as a nested class:</p>\n<pre><code>{\n    &quot;name&quot;: &quot;test&quot;,\n    &quot;phoneList&quot;: {\n        &quot;phone&quot;: [\n            {\n                &quot;number&quot;: 32323232,\n                &quot;code&quot;: 555\n            },\n            {\n                &quot;number&quot;: 4343423432,\n                &quot;code&quot;: 555\n            }\n        ]\n    }\n}\n</code></pre>\n<p>The following DTO class is suitable for this json:</p>\n<pre><code>class Response {\n\n  String name;\n  PhoneList phoneList;\n\n  static class PhoneList {\n\n    List&lt;Phone&gt; phone = new ArrayList&lt;&gt;();\n\n    static class Phone {\n\n      String number;\n      Integer code;\n    }\n  }\n}\n</code></pre>\n<p>Is it possible somehow not to create a PhoneList class, but to create a sheet directly?</p>\n<pre><code>class Response {\n\n  String name;\n  List&lt;Phone&gt; phoneList = new ArrayList&lt;&gt;();\n\n  static class Phone {\n    String number;\n    Integer code;\n  }\n}\n</code></pre>\n"},{"tags":["java","react-native","android-studio","android-espresso","android-espresso-recorder"],"owner":{"account_id":1122618,"reputation":4130,"user_id":1110621,"accept_rate":77,"display_name":"jezzipin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1677522750,"answer_count":0,"score":0,"last_activity_date":1677575313,"creation_date":1677522384,"question_id":75584208,"body_markdown":"I will just start by saying I&#39;m a .Net developer by trade and have little to no experience with Java so apologies if any of this is super obvious but I&#39;m trying to make the lives of our testers a little easier by trying to assess android-espresso-recorder as an option for them to produce automated tests for our Android app written in React Native.\r\n\r\nBasically, the issue I am currently facing is we have our React Native app written and we want to add some tests. I&#39;ve fired up the application on the emulator by running:\r\n\r\n    yarn start\r\n\r\nto trigger Metro followed by\r\n\r\n    yarn android\r\n\r\nin order to launch the application in the Android Emulator.\r\n\r\nIf I don&#39;t perform these preliminary steps, when I try to run the app directly from Android Studio it will present the following error:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nOnce the application is visible within the emulator, I then open up the Android folder of my project in Android studio.\r\n\r\nI select Run &gt; Record Espresso Test and then wait for the App to load in the emulator and attach all of the debuggers necessary for the recorder to function.\r\n\r\nOnce this process has completed, I record a simple UI test, add an assertion and then finalise the test.\r\n\r\nA message pops up stating that missing dependencies will be added to the project automatically to allow support for the Espresso tests so I click &#39;Yes&#39; and allow it to do its thing. The gradle sync process runs in the bottom of the Android Studio window and it looks like it&#39;s doing something then finally I am presented with my test file in java. There are no errors generated during the supposed installation of the dependencies.\r\n\r\nHowever, once the .java file for my test opens up, it is riddled with red errors throughout the code. If I look in the &#39;Problems&#39; tab I can see multiple cannot resolve symbol messages as shown below:\r\n[![enter image description here][2]][2]\r\n\r\nWhat&#39;s more, the generated file for some reason has been placed in a java(generated) folder alongside what I believe is the normal java folder within the solution (again I&#39;m not sure of this because most of our work is done in React Native and I work on the back-end but have been asked to investigate this as the most senior developer).\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nI&#39;ve tried multiple things within the code file itself including trying to right click and use the context options to add the missing dependencies but these don&#39;t seem to do anything:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nI&#39;ve also tried doing a:\r\n\r\n    ./gradlew clean \r\n\r\nTo see if the missing dependencies are added in once Android Studio is closed down but this doesn&#39;t seem to make and difference either and I&#39;m unable to even run the generated test because of the errors within the file.\r\n\r\nA few other things I have tried based upon a number of Google searches is:\r\n\r\n    File &gt; Sync Project With Gradle Files\r\n    \r\n    File &gt; Invalidate Caches\r\n    \r\n    File &gt; Restart IDE\r\n\r\nI&#39;ve followed several tutorials online including the main one from Android Studio with regards to how to get this up and running but in all the ones I have seen, nobody seems to encounter this issue.\r\n\r\nI&#39;ve also tried on 3 different machines (mac and windows) to ensure it wasn&#39;t some form of rogue cache somewhere but it fails on every single machine.\r\n\r\nAny help with this would be greatly appreciated. I understand the information provided is a bit sparse and I&#39;m happy to provide any further information that is required but as this is not my area and is mainly a favour to my front end team to try and find a solution I&#39;m sure you can all appreciate I&#39;m trying to provide as much information as possible in what is effectively a language I don&#39;t develop in and generally actively avoid.\r\n\r\n\r\nThanks in advance,\r\n\r\nJ\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/08n94.png\r\n  [2]: https://i.stack.imgur.com/IRgs2.png\r\n  [3]: https://i.stack.imgur.com/bwvrt.png\r\n  [4]: https://i.stack.imgur.com/GyOrw.png","title":"&#39;Record Espresso Test&#39; generated test in Android Studio dependency resolution failure","body":"<p>I will just start by saying I'm a .Net developer by trade and have little to no experience with Java so apologies if any of this is super obvious but I'm trying to make the lives of our testers a little easier by trying to assess android-espresso-recorder as an option for them to produce automated tests for our Android app written in React Native.</p>\n<p>Basically, the issue I am currently facing is we have our React Native app written and we want to add some tests. I've fired up the application on the emulator by running:</p>\n<pre><code>yarn start\n</code></pre>\n<p>to trigger Metro followed by</p>\n<pre><code>yarn android\n</code></pre>\n<p>in order to launch the application in the Android Emulator.</p>\n<p>If I don't perform these preliminary steps, when I try to run the app directly from Android Studio it will present the following error:</p>\n<p><a href=\"https://i.stack.imgur.com/08n94.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/08n94.png\" alt=\"enter image description here\" /></a></p>\n<p>Once the application is visible within the emulator, I then open up the Android folder of my project in Android studio.</p>\n<p>I select Run &gt; Record Espresso Test and then wait for the App to load in the emulator and attach all of the debuggers necessary for the recorder to function.</p>\n<p>Once this process has completed, I record a simple UI test, add an assertion and then finalise the test.</p>\n<p>A message pops up stating that missing dependencies will be added to the project automatically to allow support for the Espresso tests so I click 'Yes' and allow it to do its thing. The gradle sync process runs in the bottom of the Android Studio window and it looks like it's doing something then finally I am presented with my test file in java. There are no errors generated during the supposed installation of the dependencies.</p>\n<p>However, once the .java file for my test opens up, it is riddled with red errors throughout the code. If I look in the 'Problems' tab I can see multiple cannot resolve symbol messages as shown below:\n<a href=\"https://i.stack.imgur.com/IRgs2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IRgs2.png\" alt=\"enter image description here\" /></a></p>\n<p>What's more, the generated file for some reason has been placed in a java(generated) folder alongside what I believe is the normal java folder within the solution (again I'm not sure of this because most of our work is done in React Native and I work on the back-end but have been asked to investigate this as the most senior developer).</p>\n<p><a href=\"https://i.stack.imgur.com/bwvrt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bwvrt.png\" alt=\"enter image description here\" /></a></p>\n<p>I've tried multiple things within the code file itself including trying to right click and use the context options to add the missing dependencies but these don't seem to do anything:</p>\n<p><a href=\"https://i.stack.imgur.com/GyOrw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GyOrw.png\" alt=\"enter image description here\" /></a></p>\n<p>I've also tried doing a:</p>\n<pre><code>./gradlew clean \n</code></pre>\n<p>To see if the missing dependencies are added in once Android Studio is closed down but this doesn't seem to make and difference either and I'm unable to even run the generated test because of the errors within the file.</p>\n<p>A few other things I have tried based upon a number of Google searches is:</p>\n<pre><code>File &gt; Sync Project With Gradle Files\n\nFile &gt; Invalidate Caches\n\nFile &gt; Restart IDE\n</code></pre>\n<p>I've followed several tutorials online including the main one from Android Studio with regards to how to get this up and running but in all the ones I have seen, nobody seems to encounter this issue.</p>\n<p>I've also tried on 3 different machines (mac and windows) to ensure it wasn't some form of rogue cache somewhere but it fails on every single machine.</p>\n<p>Any help with this would be greatly appreciated. I understand the information provided is a bit sparse and I'm happy to provide any further information that is required but as this is not my area and is mainly a favour to my front end team to try and find a solution I'm sure you can all appreciate I'm trying to provide as much information as possible in what is effectively a language I don't develop in and generally actively avoid.</p>\n<p>Thanks in advance,</p>\n<p>J</p>\n"},{"tags":["java","sql-server","hibernate","row-level-security"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1677534190,"post_id":75583066,"comment_id":133353489,"body_markdown":"If your code _expects a tenant_id in the session context_ then why do you use `sessionFactory.getCurrentSession().setProperty(&quot;TenantId&quot;, selectedTenantId);`? Why `TenantId` instead of `tenant_id`?","body":"If your code <i>expects a tenant_id in the session context</i> then why do you use <code>sessionFactory.getCurrentSession().setProperty(&quot;TenantId&quot;, selectedTenantId);</code>? Why <code>TenantId</code> instead of <code>tenant_id</code>?"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1677535339,"post_id":75583066,"comment_id":133353723,"body_markdown":"Also, SQL Server&#39;s session context has nothing to do with Hibernate&#39;s Session. In SQL Server the [session context](https://learn.microsoft.com/en-us/sql/t-sql/functions/session-context-transact-sql) is connection-specific, so have you considered registering a global `Session.doWork()` handler to execute `sys.sp_set_session_context` on the connection before issuing your CRUD operations?","body":"Also, SQL Server&#39;s session context has nothing to do with Hibernate&#39;s Session. In SQL Server the <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/functions/session-context-transact-sql\" rel=\"nofollow noreferrer\">session context</a> is connection-specific, so have you considered registering a global <code>Session.doWork()</code> handler to execute <code>sys.sp_set_session_context</code> on the connection before issuing your CRUD operations?"},{"owner":{"account_id":4020026,"reputation":1102,"user_id":3310724,"display_name":"i89"},"score":0,"creation_date":1677575085,"post_id":75583066,"comment_id":133360225,"body_markdown":"Thanks for your answers, I updated the description a little bit to make it more clear, that I use tenantId everywhere.","body":"Thanks for your answers, I updated the description a little bit to make it more clear, that I use tenantId everywhere."},{"owner":{"account_id":4020026,"reputation":1102,"user_id":3310724,"display_name":"i89"},"score":0,"creation_date":1677575210,"post_id":75583066,"comment_id":133360269,"body_markdown":"@Larnu I might get wrong but the documentation doesn&#39;t mention RLS being based on a USER. You as an admionistrator decide to which properties it is relevant: https://learn.microsoft.com/en-us/sql/relational-databases/security/row-level-security?view=sql-server-ver16#MidTier","body":"@Larnu I might get wrong but the documentation doesn&#39;t mention RLS being based on a USER. You as an admionistrator decide to which properties it is relevant: <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/security/row-level-security?view=sql-server-ver16#MidTier\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/sql/relational-databases/security/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":4020026,"reputation":1102,"user_id":3310724,"display_name":"i89"},"score":0,"creation_date":1677575265,"post_id":75583066,"comment_id":133360281,"body_markdown":"@AlwaysLearning I updated the description to make it clear, that the problem is not based on wrong property names. Any other ideas?","body":"@AlwaysLearning I updated the description to make it clear, that the problem is not based on wrong property names. Any other ideas?"},{"owner":{"account_id":4020026,"reputation":1102,"user_id":3310724,"display_name":"i89"},"score":0,"creation_date":1677575729,"post_id":75583066,"comment_id":133360426,"body_markdown":"@Larnu thanks for you feedback. I&#39;m not sure if I catch your point. I&#39;m just having one database user for the application. For users in my application I&#39;m using a dedicated table. So all database queries are performed by the database (application) user. When the user is authenticated and authorized in my application, I can identify the user and know its tenantId. So when a query is performec I want to pass the tenantId of the user in the session.","body":"@Larnu thanks for you feedback. I&#39;m not sure if I catch your point. I&#39;m just having one database user for the application. For users in my application I&#39;m using a dedicated table. So all database queries are performed by the database (application) user. When the user is authenticated and authorized in my application, I can identify the user and know its tenantId. So when a query is performec I want to pass the tenantId of the user in the session."},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1677576045,"post_id":75583066,"comment_id":133360513,"body_markdown":"OK, so you&#39;re going down the [&quot;middle-tier&quot; application](https://learn.microsoft.com/en-us/sql/relational-databases/security/row-level-security?view=sql-server-ver16#MidTier)? I&#39;ll fully admit, without the context, I was under the assumption you were going down the &quot;traditional&quot; path, of multiple `USER`s.","body":"OK, so you&#39;re going down the <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/security/row-level-security?view=sql-server-ver16#MidTier\" rel=\"nofollow noreferrer\">&quot;middle-tier&quot; application</a>? I&#39;ll fully admit, without the context, I was under the assumption you were going down the &quot;traditional&quot; path, of multiple <code>USER</code>s."}],"owner":{"account_id":4020026,"reputation":1102,"user_id":3310724,"display_name":"i89"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677575018,"creation_date":1677515227,"question_id":75583066,"body_markdown":"In my java based application I want to make use of RLS in MS SQL. For this, I created a security policy with a function, which expects a tenantId in the session context and filters data for this property.\r\n\r\nUsing SQL this seems to work and now I am stuck with passing the tenantId to the db, so RLS in MS SQL can filter the data, instead I am getting zero results (which seems for me that the DB doesn&#39;t recieve the tenantId from the session context).\r\n\r\nThe tenantId might change dynamically, depends on the authenticated user, so I always set the tenant_id like this:\r\n\r\n```java\r\nsessionFactory.getCurrentSession().setProperty(&quot;TenantId&quot;, tenantId);\r\n```\r\n\r\nWhen debugging, I see that tenantId is correctly set in my java application.\r\n\r\nMy questions is:\r\nIs `setProperty` on the session the right way to pass context/session properties to the database?\r\n\r\n\r\nI call `setProperty` on the session, but it doesn&#39;t seem to work","title":"hibernate: Row level security - set session context properties and pass to MS SQL","body":"<p>In my java based application I want to make use of RLS in MS SQL. For this, I created a security policy with a function, which expects a tenantId in the session context and filters data for this property.</p>\n<p>Using SQL this seems to work and now I am stuck with passing the tenantId to the db, so RLS in MS SQL can filter the data, instead I am getting zero results (which seems for me that the DB doesn't recieve the tenantId from the session context).</p>\n<p>The tenantId might change dynamically, depends on the authenticated user, so I always set the tenant_id like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>sessionFactory.getCurrentSession().setProperty(&quot;TenantId&quot;, tenantId);\n</code></pre>\n<p>When debugging, I see that tenantId is correctly set in my java application.</p>\n<p>My questions is:\nIs <code>setProperty</code> on the session the right way to pass context/session properties to the database?</p>\n<p>I call <code>setProperty</code> on the session, but it doesn't seem to work</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"comments":[{"owner":{"account_id":82425,"reputation":8270,"user_id":231762,"display_name":"kkrugler"},"score":1,"creation_date":1677717831,"post_id":75589817,"comment_id":133395425,"body_markdown":"I&#39;m curious why you didn&#39;t just do a `.keyBy(new KeySelectorForAllTypes()).window(blah).apply(new AllTypesJoinFunction)`?","body":"I&#39;m curious why you didn&#39;t just do a <code>.keyBy(new KeySelectorForAllTypes()).window(blah).apply(new AllTypesJoinFunction)</code>?"},{"owner":{"account_id":2554005,"reputation":4023,"user_id":2216414,"accept_rate":67,"display_name":"Cristian Meneses"},"score":0,"creation_date":1677808997,"post_id":75589817,"comment_id":133415313,"body_markdown":"@kkrugler To be honest, this is my first time ever working with Flink, and most of the progress I&#39;ve been able to make is based on the Flink docs and other resources. Your suggestion is definitely worth trying!","body":"@kkrugler To be honest, this is my first time ever working with Flink, and most of the progress I&#39;ve been able to make is based on the Flink docs and other resources. Your suggestion is definitely worth trying!"}],"owner":{"account_id":2554005,"reputation":4023,"user_id":2216414,"accept_rate":67,"display_name":"Cristian Meneses"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677574750,"creation_date":1677574750,"question_id":75589817,"body_markdown":"I have a single source stream that contains 3 different types of events. For each event type, I need some of their fields.\r\n\r\nThen, I need to emit an enriched result of a new event type, made of the parts of the other 3 events\r\n\r\n```\r\nsource (A, B, C) -&gt;  sink (D)\r\n```\r\n\r\nThere is a field that can be used to join A and B, and another field that can be used to join (A + B) and C\r\n\r\n\r\n\r\n**What I have so far**\r\n\r\n\r\n\r\nThe main code I am using for the processing pipeline looks like this\r\n\r\n```java\r\n       /*\r\n        * Use event time processing\r\n        */\r\n\r\n        env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);\r\n        env.getConfig().setAutoWatermarkInterval(5000);\r\n\r\n\r\n        final DataStream&lt;BaseEvent&gt; inputStream = env\r\n                .addSource(eventSource)\r\n\r\n       /*\r\n        * Assign watermarks\r\n        */\r\n       final DataStream&lt;BaseEvent&gt; sortedInputStream = inputStream\r\n               .assignTimestampsAndWatermarks(WatermarkStrategy\r\n                       .&lt;BaseEvent&gt;forBoundedOutOfOrderness(Duration.ofSeconds(30))\r\n                       .withTimestampAssigner((event, timestamp) -&gt; event.getEventTimestamp())\r\n                       .withIdleness(Duration.ofSeconds(30)));\r\n        \r\n        /*\r\n         * Filter events by type and fork into separate streams\r\n         */\r\n        final DataStream&lt;TypeOneEven&gt; typeOneStream = sortedInputStream\r\n                .filter(e -&gt; TYPE_ONE.toString().equals(e.getEventType()))\r\n                .keyBy(new BaseEventKeySelector&lt;&gt;())\r\n                .map(baseEventToTypeOneEventMapFunction)\r\n                .keyBy(new TypeOneEventKeySelector());\r\n\r\n        final DataStream&lt;TypeTwoEvent&gt; typeTwoStream = sortedInputStream\r\n                .filter(e -&gt; TYPE_TWO.toString().equals(e.getEventType()))\r\n                .keyBy(new BaseEventKeySelector&lt;&gt;())\r\n                .map(baseEventToTypeTwoEventMapFunction)\r\n                .keyBy(new TypeTwoEventKeySelector());\r\n\r\n        final DataStream&lt;TypeThreeEvent&gt; typeThreeStream = sortedInputStream\r\n                .filter(e -&gt; TYPE_THREE.toString().equals(e.getEventType()))\r\n                .keyBy(new BaseEventKeySelector&lt;&gt;())\r\n                .map(baseEventToTypeThreeEventMapFunction)\r\n                .keyBy(new TypeThreeEventKeySelector());\r\n\r\n        /*\r\n         * Join TypeOne and TypeTwo on interaction\r\n         */\r\n        final DataStream&lt;Tuple2&lt;TypeOneEven, TypeTwoEvent&gt;&gt; firstJoin = typeOneStream\r\n                .join(typeTwoStream)\r\n                .where(new TypeOneEventKeySelector())\r\n                .equalTo(new TypeTwoEventKeySelector())\r\n                .window(TumblingEventTimeWindows.of(Time.minutes(1)))\r\n                .apply(new TypeOneTypeTwoJoinFunction());\r\n\r\n        /*\r\n         * Join previous stream with TypeThree\r\n         */\r\n        final DataStream&lt;Tuple3&lt;TypeOneEven, TypeTwoEvent, TypeThreeEvent&gt;&gt; secondJoin = firstJoin\r\n                .join(typeThreeStream)\r\n                .where(new TypeOneTypeTwoKeySelector())\r\n                .equalTo(new TypeThreeKeySelector())\r\n                .window(TumblingEventTimeWindows.of(Time.minutes(1)))\r\n                .apply(new AllTypesJoinFunction());\r\n\r\n        /*\r\n         * Convert join results into EnrichedType events, send to sink\r\n         */\r\n        secondJoin\r\n                .map(enrichedEventMapFunction)\r\n                .addSink(enrichedEventSink);\r\n```\r\n             \r\nAll Map functions are `RichMapFunction&lt;IN, OUT&gt;` that convert BaseEvent to a concrete type.\r\n\r\nAll Join functions are `JoinFunction&lt;IN1, IN2, OUT&gt;` that generate tuples based on the input.\r\n\r\nThe last `enrichedEventMapFunction` is a `RichMapFunction&lt;IN, OUT&gt;` that takes care of grabbing the fields from the tuple elements to build a `EnrichedTypeEvent`. \r\n\r\n**The problem**\r\n\r\nOverall, the logic works as expected as long as data flows through the pipeline. But if I send a single batch of data, no output is produced unless a new batch of events ***pushes*** the data out, probably by advancing the watermarks.\r\n\r\nMy goal is to make sure that any data that enters the stream comes out as fast as possible, even if no events are sent afterwards. I have been trying different combinations of `WatermarkStrategy` without luck (which is where I believe my problem is located).\r\n\r\nIs there any way to achieve this ?","title":"Three-way join with Tumbling window on Apache Flink","body":"<p>I have a single source stream that contains 3 different types of events. For each event type, I need some of their fields.</p>\n<p>Then, I need to emit an enriched result of a new event type, made of the parts of the other 3 events</p>\n<pre><code>source (A, B, C) -&gt;  sink (D)\n</code></pre>\n<p>There is a field that can be used to join A and B, and another field that can be used to join (A + B) and C</p>\n<p><strong>What I have so far</strong></p>\n<p>The main code I am using for the processing pipeline looks like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>       /*\n        * Use event time processing\n        */\n\n        env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);\n        env.getConfig().setAutoWatermarkInterval(5000);\n\n\n        final DataStream&lt;BaseEvent&gt; inputStream = env\n                .addSource(eventSource)\n\n       /*\n        * Assign watermarks\n        */\n       final DataStream&lt;BaseEvent&gt; sortedInputStream = inputStream\n               .assignTimestampsAndWatermarks(WatermarkStrategy\n                       .&lt;BaseEvent&gt;forBoundedOutOfOrderness(Duration.ofSeconds(30))\n                       .withTimestampAssigner((event, timestamp) -&gt; event.getEventTimestamp())\n                       .withIdleness(Duration.ofSeconds(30)));\n        \n        /*\n         * Filter events by type and fork into separate streams\n         */\n        final DataStream&lt;TypeOneEven&gt; typeOneStream = sortedInputStream\n                .filter(e -&gt; TYPE_ONE.toString().equals(e.getEventType()))\n                .keyBy(new BaseEventKeySelector&lt;&gt;())\n                .map(baseEventToTypeOneEventMapFunction)\n                .keyBy(new TypeOneEventKeySelector());\n\n        final DataStream&lt;TypeTwoEvent&gt; typeTwoStream = sortedInputStream\n                .filter(e -&gt; TYPE_TWO.toString().equals(e.getEventType()))\n                .keyBy(new BaseEventKeySelector&lt;&gt;())\n                .map(baseEventToTypeTwoEventMapFunction)\n                .keyBy(new TypeTwoEventKeySelector());\n\n        final DataStream&lt;TypeThreeEvent&gt; typeThreeStream = sortedInputStream\n                .filter(e -&gt; TYPE_THREE.toString().equals(e.getEventType()))\n                .keyBy(new BaseEventKeySelector&lt;&gt;())\n                .map(baseEventToTypeThreeEventMapFunction)\n                .keyBy(new TypeThreeEventKeySelector());\n\n        /*\n         * Join TypeOne and TypeTwo on interaction\n         */\n        final DataStream&lt;Tuple2&lt;TypeOneEven, TypeTwoEvent&gt;&gt; firstJoin = typeOneStream\n                .join(typeTwoStream)\n                .where(new TypeOneEventKeySelector())\n                .equalTo(new TypeTwoEventKeySelector())\n                .window(TumblingEventTimeWindows.of(Time.minutes(1)))\n                .apply(new TypeOneTypeTwoJoinFunction());\n\n        /*\n         * Join previous stream with TypeThree\n         */\n        final DataStream&lt;Tuple3&lt;TypeOneEven, TypeTwoEvent, TypeThreeEvent&gt;&gt; secondJoin = firstJoin\n                .join(typeThreeStream)\n                .where(new TypeOneTypeTwoKeySelector())\n                .equalTo(new TypeThreeKeySelector())\n                .window(TumblingEventTimeWindows.of(Time.minutes(1)))\n                .apply(new AllTypesJoinFunction());\n\n        /*\n         * Convert join results into EnrichedType events, send to sink\n         */\n        secondJoin\n                .map(enrichedEventMapFunction)\n                .addSink(enrichedEventSink);\n</code></pre>\n<p>All Map functions are <code>RichMapFunction&lt;IN, OUT&gt;</code> that convert BaseEvent to a concrete type.</p>\n<p>All Join functions are <code>JoinFunction&lt;IN1, IN2, OUT&gt;</code> that generate tuples based on the input.</p>\n<p>The last <code>enrichedEventMapFunction</code> is a <code>RichMapFunction&lt;IN, OUT&gt;</code> that takes care of grabbing the fields from the tuple elements to build a <code>EnrichedTypeEvent</code>.</p>\n<p><strong>The problem</strong></p>\n<p>Overall, the logic works as expected as long as data flows through the pipeline. But if I send a single batch of data, no output is produced unless a new batch of events <em><strong>pushes</strong></em> the data out, probably by advancing the watermarks.</p>\n<p>My goal is to make sure that any data that enters the stream comes out as fast as possible, even if no events are sent afterwards. I have been trying different combinations of <code>WatermarkStrategy</code> without luck (which is where I believe my problem is located).</p>\n<p>Is there any way to achieve this ?</p>\n"},{"tags":["java","xml","serialization"],"comments":[{"owner":{"account_id":238570,"reputation":8889,"user_id":507546,"accept_rate":88,"display_name":"gigadot"},"score":0,"creation_date":1348871081,"post_id":12648125,"comment_id":17060293,"body_markdown":"have a look at Gson, https://code.google.com/p/google-gson/","body":"have a look at Gson, <a href=\"https://code.google.com/p/google-gson/\" rel=\"nofollow noreferrer\">code.google.com/p/google-gson</a>"},{"owner":{"account_id":334987,"reputation":9182,"user_id":661797,"accept_rate":88,"display_name":"nullpotent"},"score":0,"creation_date":1348871283,"post_id":12648125,"comment_id":17060336,"body_markdown":"Or http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/package-summary.html","body":"Or <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/package-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/&hellip;</a>"},{"owner":{"account_id":467918,"reputation":2755,"user_id":873580,"accept_rate":75,"display_name":"questborn"},"score":0,"creation_date":1348871622,"post_id":12648125,"comment_id":17060425,"body_markdown":"@Gopal Did you have a look at this post? http://stackoverflow.com/questions/11001458/json-java-object-to-json","body":"@Gopal Did you have a look at this post? <a href=\"http://stackoverflow.com/questions/11001458/json-java-object-to-json\" title=\"json java object to json\">stackoverflow.com/questions/11001458/json-java-object-to-jso&zwnj;&#8203;n</a>"},{"owner":{"account_id":162425,"reputation":148009,"user_id":383861,"display_name":"bdoughan"},"score":0,"creation_date":1348872289,"post_id":12648125,"comment_id":17060570,"body_markdown":"I would recommend having multiple `person` elements instead of elements called `person1`, `person2`, etc.","body":"I would recommend having multiple <code>person</code> elements instead of elements called <code>person1</code>, <code>person2</code>, etc."}],"answers":[{"tags":[],"owner":{"account_id":35612,"reputation":61,"user_id":100917,"display_name":"Fredrik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1348871475,"creation_date":1348871475,"answer_id":12648199,"question_id":12648125,"body_markdown":"I have used [XStream][1] for this many times. \r\n\r\n\r\n  [1]: http://xstream.codehaus.org/","title":"Writing data from objects in Java into an XML-file","body":"<p>I have used <a href=\"http://xstream.codehaus.org/\" rel=\"nofollow\">XStream</a> for this many times. </p>\n"},{"tags":[],"owner":{"account_id":427450,"reputation":966,"user_id":809230,"accept_rate":97,"display_name":"pidabrow"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1348871631,"creation_date":1348871631,"answer_id":12648215,"question_id":12648125,"body_markdown":"You could also use Serialization and XML-Parser (DOM for example). If you create an XML document then you can use XPath for querying.\r\n\r\nI&#39;d also consider on using [http://simple.sourceforge.net/][1]\r\n\r\n\r\n  [1]: http://simple.sourceforge.net/ &quot;Simple&quot;","title":"Writing data from objects in Java into an XML-file","body":"<p>You could also use Serialization and XML-Parser (DOM for example). If you create an XML document then you can use XPath for querying.</p>\n\n<p>I'd also consider on using <a href=\"http://simple.sourceforge.net/\" rel=\"nofollow\" title=\"Simple\">http://simple.sourceforge.net/</a></p>\n"},{"tags":[],"owner":{"account_id":1795554,"reputation":3616,"user_id":1635014,"accept_rate":53,"display_name":"srk"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1348871763,"creation_date":1348871763,"answer_id":12648232,"question_id":12648125,"body_markdown":"I guess you are looking for java-xml binding. You can JAXB binding and marshall.\r\nPlease check the link  http://www.mkyong.com/java/jaxb-hello-world-example/ for sample.","title":"Writing data from objects in Java into an XML-file","body":"<p>I guess you are looking for java-xml binding. You can JAXB binding and marshall.\nPlease check the link  <a href=\"http://www.mkyong.com/java/jaxb-hello-world-example/\" rel=\"nofollow\">http://www.mkyong.com/java/jaxb-hello-world-example/</a> for sample.</p>\n"},{"tags":[],"owner":{"account_id":1873245,"reputation":2149,"user_id":1695029,"accept_rate":50,"display_name":"Gopal Samant"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471583637,"creation_date":1348876151,"answer_id":12648692,"question_id":12648125,"body_markdown":"checking out at the code in your link i implemented it for my code. The code is as follows. I can write xml data only for one object and if I loop it just writes the last object. So when I tried to used the file in append mode it stopped functioning :\r\n\r\n    try {\r\n        FileOutputStream file = new FileOutputStream(&quot;file.xml&quot;, true);\r\n        JAXBContext jaxbContext = JAXBContext.newInstance(NeuronNode.class);\r\n        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();\r\n\t \r\n        // output pretty printed\r\n        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n\t \r\n\t\t\t\r\n        for(int i=0; i&lt;neuronNodes.length; i++)\r\n        {\r\n            jaxbMarshaller.marshal(neuronNodes[i], file);\r\n            jaxbMarshaller.marshal(neuronNodes[i], System.out);\r\n        }\r\n\t \r\n    } catch (JAXBException e | IOException e) {\r\n        e.printStackTrace();\r\n    }","title":"Writing data from objects in Java into an XML-file","body":"<p>checking out at the code in your link i implemented it for my code. The code is as follows. I can write xml data only for one object and if I loop it just writes the last object. So when I tried to used the file in append mode it stopped functioning :</p>\n\n<pre><code>try {\n    FileOutputStream file = new FileOutputStream(\"file.xml\", true);\n    JAXBContext jaxbContext = JAXBContext.newInstance(NeuronNode.class);\n    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();\n\n    // output pretty printed\n    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n\n\n    for(int i=0; i&lt;neuronNodes.length; i++)\n    {\n        jaxbMarshaller.marshal(neuronNodes[i], file);\n        jaxbMarshaller.marshal(neuronNodes[i], System.out);\n    }\n\n} catch (JAXBException e | IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15012948,"reputation":926,"user_id":10837620,"display_name":"Atul KS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546398442,"creation_date":1546398442,"answer_id":54000787,"question_id":12648125,"body_markdown":"Have sorted out this problem using **Jackson Library and XMLMapper method**. Here is the code for the same.\r\n\r\n      **MainClass.java:-**\r\n\r\n      import java.io.IOException;\r\n\r\n      import com.fasterxml.jackson.databind.ObjectMapper;\r\n      import com.fasterxml.jackson.databind.SerializationFeature;\r\n      import com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n\r\n       public class MainClass {\r\n\r\n\t   public static void main(String[] args) throws IOException {\r\n\r\n\t\tString xmlString = &quot;   &lt;Person&gt;\\r\\n&quot; + &quot;       &lt;person1&gt;\\r\\n&quot; + &quot;           \r\n            &lt;name&gt;abc&lt;/name&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;           &lt;age&gt;23&lt;/age&gt;\\r\\n&quot; + &quot;       &lt;/person1&gt;\\r\\n&quot; + &quot;       \r\n            &lt;person2&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;           &lt;name&gt;abc&lt;/name&gt;\\r\\n&quot; + &quot;           &lt;age&gt;23&lt;/age&gt;\\r\\n&quot; + &quot;       \r\n           &lt;/person2&gt;\\r\\n&quot;\r\n\t\t\t\t+ &quot;   &lt;/Person&gt;&quot;;\r\n\r\n\t\tObjectMapper xmlMapper = new XmlMapper();\r\n\t\txmlMapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n\r\n\t\tPerson1 person1 = new Person1();\r\n\t\tperson1.setName(&quot;abc&quot;);\r\n\t\tperson1.setAge(&quot;23&quot;);\r\n\r\n\t\tPerson2 person2 = new Person2();\r\n\t\tperson2.setName(&quot;xyz&quot;);\r\n\t\tperson2.setAge(&quot;32&quot;);\r\n\r\n\t\tPerson person = new Person();\r\n\t\tperson.setPerson1(person1);\r\n\t\tperson.setPerson2(person2);\r\n\r\n\t\tString XMLStr = xmlMapper.writeValueAsString(person);\r\n\r\n\t\tSystem.out.println(XMLStr);\r\n\r\n\t} }\r\n\r\n        **Person.java:-**\r\n\r\n       public class Person {\r\n    \tPerson1 Person1Object;\r\n\t    Person2 Person2Object;\r\n\r\n\t// Getter Methods\r\n\r\n\tpublic Person1 getPerson1() {\r\n\t\treturn Person1Object;\r\n\t}\r\n\r\n\tpublic Person2 getPerson2() {\r\n\t\treturn Person2Object;\r\n\t}\r\n\r\n\t// Setter Methods\r\n\r\n\tpublic void setPerson1(Person1 person1Object) {\r\n\t\tthis.Person1Object = person1Object;\r\n\t}\r\n\r\n\tpublic void setPerson2(Person2 person2Object) {\r\n\t\tthis.Person2Object = person2Object;\r\n\t   } }\r\n\r\n     **Person1.java:-**\r\n    public class Person1 {\r\n\tprivate String name;\r\n\tprivate String age;\r\n\r\n\t// Getter Methods\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic String getAge() {\r\n\t\treturn age;\r\n\t}\r\n\r\n\t// Setter Methods\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic void setAge(String age) {\r\n\t\tthis.age = age;\r\n\t} }\r\n\r\n      **Person2.java:-**\r\n\r\n      public class Person2 {\r\n\tprivate String name;\r\n\tprivate String age;\r\n\r\n\t// Getter Methods\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic String getAge() {\r\n\t\treturn age;\r\n\t}\r\n\r\n\t// Setter Methods\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic void setAge(String age) {\r\n\t\tthis.age = age;\r\n\t} }\r\n\r\n      **OUTPUT:-**\r\n\r\n           &lt;Person&gt;\r\n             &lt;person1&gt;\r\n                  &lt;name&gt;abc&lt;/name&gt;\r\n                  &lt;age&gt;23&lt;/age&gt;\r\n            &lt;/person1&gt;\r\n             &lt;person2&gt;\r\n                  &lt;name&gt;xyz&lt;/name&gt;\r\n                  &lt;age&gt;32&lt;/age&gt;\r\n            &lt;/person2&gt;\r\n          &lt;/Person&gt;\r\n     ","title":"Writing data from objects in Java into an XML-file","body":"<p>Have sorted out this problem using <strong>Jackson Library and XMLMapper method</strong>. Here is the code for the same.</p>\n\n<pre><code>  **MainClass.java:-**\n\n  import java.io.IOException;\n\n  import com.fasterxml.jackson.databind.ObjectMapper;\n  import com.fasterxml.jackson.databind.SerializationFeature;\n  import com.fasterxml.jackson.dataformat.xml.XmlMapper;\n\n   public class MainClass {\n\n   public static void main(String[] args) throws IOException {\n\n    String xmlString = \"   &lt;Person&gt;\\r\\n\" + \"       &lt;person1&gt;\\r\\n\" + \"           \n        &lt;name&gt;abc&lt;/name&gt;\\r\\n\"\n            + \"           &lt;age&gt;23&lt;/age&gt;\\r\\n\" + \"       &lt;/person1&gt;\\r\\n\" + \"       \n        &lt;person2&gt;\\r\\n\"\n            + \"           &lt;name&gt;abc&lt;/name&gt;\\r\\n\" + \"           &lt;age&gt;23&lt;/age&gt;\\r\\n\" + \"       \n       &lt;/person2&gt;\\r\\n\"\n            + \"   &lt;/Person&gt;\";\n\n    ObjectMapper xmlMapper = new XmlMapper();\n    xmlMapper.enable(SerializationFeature.INDENT_OUTPUT);\n\n    Person1 person1 = new Person1();\n    person1.setName(\"abc\");\n    person1.setAge(\"23\");\n\n    Person2 person2 = new Person2();\n    person2.setName(\"xyz\");\n    person2.setAge(\"32\");\n\n    Person person = new Person();\n    person.setPerson1(person1);\n    person.setPerson2(person2);\n\n    String XMLStr = xmlMapper.writeValueAsString(person);\n\n    System.out.println(XMLStr);\n\n} }\n\n    **Person.java:-**\n\n   public class Person {\n    Person1 Person1Object;\n    Person2 Person2Object;\n\n// Getter Methods\n\npublic Person1 getPerson1() {\n    return Person1Object;\n}\n\npublic Person2 getPerson2() {\n    return Person2Object;\n}\n\n// Setter Methods\n\npublic void setPerson1(Person1 person1Object) {\n    this.Person1Object = person1Object;\n}\n\npublic void setPerson2(Person2 person2Object) {\n    this.Person2Object = person2Object;\n   } }\n\n **Person1.java:-**\npublic class Person1 {\nprivate String name;\nprivate String age;\n\n// Getter Methods\n\npublic String getName() {\n    return name;\n}\n\npublic String getAge() {\n    return age;\n}\n\n// Setter Methods\n\npublic void setName(String name) {\n    this.name = name;\n}\n\npublic void setAge(String age) {\n    this.age = age;\n} }\n\n  **Person2.java:-**\n\n  public class Person2 {\nprivate String name;\nprivate String age;\n\n// Getter Methods\n\npublic String getName() {\n    return name;\n}\n\npublic String getAge() {\n    return age;\n}\n\n// Setter Methods\n\npublic void setName(String name) {\n    this.name = name;\n}\n\npublic void setAge(String age) {\n    this.age = age;\n} }\n\n  **OUTPUT:-**\n\n       &lt;Person&gt;\n         &lt;person1&gt;\n              &lt;name&gt;abc&lt;/name&gt;\n              &lt;age&gt;23&lt;/age&gt;\n        &lt;/person1&gt;\n         &lt;person2&gt;\n              &lt;name&gt;xyz&lt;/name&gt;\n              &lt;age&gt;32&lt;/age&gt;\n        &lt;/person2&gt;\n      &lt;/Person&gt;\n</code></pre>\n"}],"owner":{"account_id":1873245,"reputation":2149,"user_id":1695029,"accept_rate":50,"display_name":"Gopal Samant"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16071,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":12648232,"answer_count":5,"score":1,"last_activity_date":1677574455,"creation_date":1348870961,"question_id":12648125,"body_markdown":"I have a piece of code as follows : \r\n\r\n    Person person1 = new Person();\r\n    person1.setName(&quot;abc&quot;);\r\n    person1.setAge(23);\r\n \r\n    Person person2 = new Person();\r\n    person2.setName(&quot;xyz&quot;);\r\n    person2.setAge(32);\r\n\r\nAnd it needs to be represented in an XML-file as:\r\n       \r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;Person&gt;\r\n        &lt;person1&gt;\r\n            &lt;name&gt;abc&lt;/name&gt;\r\n            &lt;age&gt;23&lt;/age&gt;\r\n        &lt;/person1&gt;\r\n        &lt;person2&gt;\r\n            &lt;name&gt;abc&lt;/name&gt;\r\n            &lt;age&gt;23&lt;/age&gt;\r\n        &lt;/person2&gt;\r\n    &lt;/Person&gt;\r\n\r\nHow do I do it?","title":"Writing data from objects in Java into an XML-file","body":"<p>I have a piece of code as follows :</p>\n<pre><code>Person person1 = new Person();\nperson1.setName(&quot;abc&quot;);\nperson1.setAge(23);\n\nPerson person2 = new Person();\nperson2.setName(&quot;xyz&quot;);\nperson2.setAge(32);\n</code></pre>\n<p>And it needs to be represented in an XML-file as:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Person&gt;\n    &lt;person1&gt;\n        &lt;name&gt;abc&lt;/name&gt;\n        &lt;age&gt;23&lt;/age&gt;\n    &lt;/person1&gt;\n    &lt;person2&gt;\n        &lt;name&gt;abc&lt;/name&gt;\n        &lt;age&gt;23&lt;/age&gt;\n    &lt;/person2&gt;\n&lt;/Person&gt;\n</code></pre>\n<p>How do I do it?</p>\n"},{"tags":["java","dependencies","uml","jdeps"],"owner":{"account_id":26130435,"reputation":53,"user_id":19822109,"display_name":"Ashwin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1677574063,"creation_date":1677574063,"question_id":75589697,"body_markdown":"I am trying to get a UML-style graph of my module. I tried the verbose class option but it still does not show the relationship between one class and another class within the same module.\r\n\r\n    jdeps -verbose:class classes.jar\r\n\r\n    com.package.module.MyClassOne -&gt; java.lang.Boolean\r\n    com.package.module.MyClassOne -&gt; java.lang.String\r\n    com.package.module.MyClassTwo -&gt; java.lang.Object\r\n\r\nWhat I want to view is:\r\n\r\n    com.package.module.MyClassOne -&gt; com.package.module.MyClassTwo\r\n    com.package.module.MyClassOne -&gt; com.package.module.MyClassThree\r\n\r\nIs this output possible with JDeps?","title":"Can JDeps show dependency of one class on another class within the same module/package?","body":"<p>I am trying to get a UML-style graph of my module. I tried the verbose class option but it still does not show the relationship between one class and another class within the same module.</p>\n<pre><code>jdeps -verbose:class classes.jar\n\ncom.package.module.MyClassOne -&gt; java.lang.Boolean\ncom.package.module.MyClassOne -&gt; java.lang.String\ncom.package.module.MyClassTwo -&gt; java.lang.Object\n</code></pre>\n<p>What I want to view is:</p>\n<pre><code>com.package.module.MyClassOne -&gt; com.package.module.MyClassTwo\ncom.package.module.MyClassOne -&gt; com.package.module.MyClassThree\n</code></pre>\n<p>Is this output possible with JDeps?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677577120,"post_id":75588897,"comment_id":133360815,"body_markdown":"No. In a generic method the type argument (what `T` translates to) must be a reference type, it cannot be a primitive such as `int`. There have been talks about introducing type parameters that can also be primitive, but I don’t know whether anything will come out of it or when.","body":"No. In a generic method the type argument (what <code>T</code> translates to) must be a reference type, it cannot be a primitive such as <code>int</code>. There have been talks about introducing type parameters that can also be primitive, but I don’t know whether anything will come out of it or when."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677579912,"post_id":75588897,"comment_id":133361606,"body_markdown":"Related and maybe helpful: [How to sort an array of ints using a custom comparator?](https://stackoverflow.com/questions/3699141/how-to-sort-an-array-of-ints-using-a-custom-comparator)","body":"Related and maybe helpful: <a href=\"https://stackoverflow.com/questions/3699141/how-to-sort-an-array-of-ints-using-a-custom-comparator\">How to sort an array of ints using a custom comparator?</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677579995,"post_id":75588897,"comment_id":133361627,"body_markdown":"A possible workaround would be if you can declare your array `Integer[]` rather than `int[]`.","body":"A possible workaround would be if you can declare your array <code>Integer[]</code> rather than <code>int[]</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1677650459,"post_id":75588897,"comment_id":133377778,"body_markdown":"One reason why this is impossible or at least unsuitable: the `Comparator&lt;T&gt;` interface is generic and takes a type argument representing the type of items to be compared, and in Java that needs to a reference type. There is no such thing as a comparator comparing `int` values. You would at the least need to use a `Comparator&lt;Integer&gt;` and box each `int` for each comparison.","body":"One reason why this is impossible or at least unsuitable: the <code>Comparator&lt;T&gt;</code> interface is generic and takes a type argument representing the type of items to be compared, and in Java that needs to a reference type. There is no such thing as a comparator comparing <code>int</code> values. You would at the least need to use a <code>Comparator&lt;Integer&gt;</code> and box each <code>int</code> for each comparison."}],"answers":[{"tags":[],"owner":{"account_id":27495201,"reputation":762,"user_id":20979816,"display_name":"Lemonina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677568888,"creation_date":1677568888,"answer_id":75588942,"question_id":75588897,"body_markdown":"`Arrays.sort` expects an array of objects, not an array of primitive types like int[]. Maybe use an `Integer[]` array instead of an int[] array to sort based on the string value.\r\n```\r\nInteger[] nums = new Integer[]{9, 12, 67};\r\nArrays.sort(nums, (i, j) -&gt; String.valueOf(j).compareTo(String.valueOf(i)));\r\nSystem.out.println(Arrays.toString(nums)); // prints [67, 12, 9]\r\n```\r\nyou can also use a `List&lt;Integer&gt;` and `Collections.sort` to sort the list:\r\n```\r\nList&lt;Integer&gt; nums = Arrays.asList(9, 12, 67);\r\nCollections.sort(nums, Comparator.comparingInt(i -&gt; Integer.parseInt(String.valueOf(i)), Comparator.reverseOrder()));\r\nSystem.out.println(nums); // prints [67, 12, 9]\r\n```","title":"Is it possible to sort an int[] array base on element string order with `Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)`?","body":"<p><code>Arrays.sort</code> expects an array of objects, not an array of primitive types like int[]. Maybe use an <code>Integer[]</code> array instead of an int[] array to sort based on the string value.</p>\n<pre><code>Integer[] nums = new Integer[]{9, 12, 67};\nArrays.sort(nums, (i, j) -&gt; String.valueOf(j).compareTo(String.valueOf(i)));\nSystem.out.println(Arrays.toString(nums)); // prints [67, 12, 9]\n</code></pre>\n<p>you can also use a <code>List&lt;Integer&gt;</code> and <code>Collections.sort</code> to sort the list:</p>\n<pre><code>List&lt;Integer&gt; nums = Arrays.asList(9, 12, 67);\nCollections.sort(nums, Comparator.comparingInt(i -&gt; Integer.parseInt(String.valueOf(i)), Comparator.reverseOrder()));\nSystem.out.println(nums); // prints [67, 12, 9]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677573352,"creation_date":1677569192,"answer_id":75588978,"question_id":75588897,"body_markdown":"cannot use primitive types！like int、float、long....!\r\n\r\nin `Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)`, `T[] &lt;=&gt; int[]`,`int[]` is not primitive type, but if you use `int[]` ,  in `Comparator&lt;? super T&gt;`, that `T` will be inferred to be of type `int`.\r\n\r\nYou can try to declare a variable of type `Comparator&lt;? super int&gt;` to see the effect.\r\n\r\n    Comparator&lt;? super int&gt; aaa;\r\n\r\nThis is not allowed.","title":"Is it possible to sort an int[] array base on element string order with `Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)`?","body":"<p>cannot use primitive types！like int、float、long....!</p>\n<p>in <code>Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)</code>, <code>T[] &lt;=&gt; int[]</code>,<code>int[]</code> is not primitive type, but if you use <code>int[]</code> ,  in <code>Comparator&lt;? super T&gt;</code>, that <code>T</code> will be inferred to be of type <code>int</code>.</p>\n<p>You can try to declare a variable of type <code>Comparator&lt;? super int&gt;</code> to see the effect.</p>\n<pre><code>Comparator&lt;? super int&gt; aaa;\n</code></pre>\n<p>This is not allowed.</p>\n"}],"owner":{"account_id":10894378,"reputation":737,"user_id":8008906,"display_name":"djy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75588978,"answer_count":2,"score":0,"last_activity_date":1677573352,"creation_date":1677568492,"question_id":75588897,"body_markdown":"I want to sort an int array base on element&#39;s String value&#39;s reverser order.\r\n\r\nI can do it like:\r\n```\r\nint[] nums = new int[]{9, 12, 67};\r\nvar list = Arrays.stream(nums).mapToObj(String::valueOf).sorted(Comparator.reverseOrder()).toList();\r\n```\r\nThinking of simple `Arrays.sort(nums)`&#39;s performance far better than streaming api for large int[], I tried:\r\n```\r\nArrays.sort(nums, (i, j) -&gt; String.valueOf(j).compareTo(String.valueOf(i)));\r\n```\r\nit&#39;s an error:\r\n&gt; reason: no instance(s) of type variable(s) T exist so that int[] conforms to T[]\r\n\r\nCan I resolve this error ?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PSLE2.png\r\n\r\n","title":"Is it possible to sort an int[] array base on element string order with `Arrays.sort(T[] a, Comparator&lt;? super T&gt; c)`?","body":"<p>I want to sort an int array base on element's String value's reverser order.</p>\n<p>I can do it like:</p>\n<pre><code>int[] nums = new int[]{9, 12, 67};\nvar list = Arrays.stream(nums).mapToObj(String::valueOf).sorted(Comparator.reverseOrder()).toList();\n</code></pre>\n<p>Thinking of simple <code>Arrays.sort(nums)</code>'s performance far better than streaming api for large int[], I tried:</p>\n<pre><code>Arrays.sort(nums, (i, j) -&gt; String.valueOf(j).compareTo(String.valueOf(i)));\n</code></pre>\n<p>it's an error:</p>\n<blockquote>\n<p>reason: no instance(s) of type variable(s) T exist so that int[] conforms to T[]</p>\n</blockquote>\n<p>Can I resolve this error ?</p>\n<p><a href=\"https://i.stack.imgur.com/PSLE2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PSLE2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":15948581,"reputation":1,"user_id":11508464,"display_name":"Daemonsoadfan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677573331,"creation_date":1677573227,"answer_id":75589586,"question_id":75571415,"body_markdown":"I&#39;ve found out, the issue was that locally we were using a property:\r\n\r\nspring.jpa.database-platform=org.hibernate.dialect.Oracle10gDialect\r\n\r\nOn the 19 oracle DB.\r\n\r\nThe property was not used on other environments.","title":"SecondaryTable annotation is working locally but not on test environment","body":"<p>I've found out, the issue was that locally we were using a property:</p>\n<p>spring.jpa.database-platform=org.hibernate.dialect.Oracle10gDialect</p>\n<p>On the 19 oracle DB.</p>\n<p>The property was not used on other environments.</p>\n"}],"owner":{"account_id":15948581,"reputation":1,"user_id":11508464,"display_name":"Daemonsoadfan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75589586,"answer_count":1,"score":0,"last_activity_date":1677573331,"creation_date":1677408039,"question_id":75571415,"body_markdown":"So we are in Java 8 (v202 on test env, 230 to 301 locally) and we use spring boot 1.5.4.RELEASE / hibernate (5.0.12) / jpa 2.1.\r\n\r\nWe have a class like this:\r\n\r\n```\r\n@Entity\r\n@SecondaryTable(name = &quot;FOO_BAR&quot;)\r\n@org.hibernate.annotations.Table(appliesTo = &quot;foo_bar&quot;, optional = false)\r\n@DiscriminatorValue(MyEnum.Values.MY_DISCRIMINATOR)\r\npublic class FooBar extends FooBarParent{\r\n\r\n@Column(name = &quot;COLUMN_NAME_OF_PRIMARY_TABLE_FOR_FIELD_A&quot;)\r\nprivate Long FIELD_A;\r\n\r\n@Column(table= &quot;FOO_BAR&quot;, name = &quot;COLUMN_NAME_OF_SECONDARY_TABLE_FOR_FIELD_B&quot;)\r\nprivate String FIELD_B;\r\n```\r\nThe script for secondary table is:\r\n\r\n```\r\nCREATE TABLE FOO_BAR\r\n(\r\n    ID                            NUMBER PRIMARY KEY,\r\n    TOTO                          VARCHAR2(10)\r\n);\r\n\r\nALTER TABLE FOO_BAR\r\n    ADD CONSTRAINT FK_FOO_BAR_PARENT FOREIGN KEY (ID) REFERENCES FOO_BAR_PARENT(ID);\r\n```\r\n\r\nThis whole inheritance system is working well, but we recently added the secondary table annotation. It is working locally: on adding a FooBar in the database, it adds a row in the secondary table. \r\nOn reading another child of FooBarParent (let&#39;s call it FooBar2), it&#39;s also working locally, it doesn&#39;t care about the secondary table which concerns FooBar and not FooBar2.\r\n\r\nIt&#39;s also working locally for my coworker.\r\nIt&#39;s also working locally with the database of the Test Environment, so even the data is the same, it&#39;s working.\r\n\r\nBut as soon as we test in our Test environments (actually, on all test environments), the code is not working anymore. It&#39;s like a heisenbug as we cannot debug it ...\r\n\r\nThe unexpected result in Test environments is that when you try to read a list of FooBar2, it will produce duplicates. So you will read as many FooBar2 as there is rows in the SecondaryTable. Which is stupid since it&#39;s not even supposed to look in there in the first place since it&#39;s a secondary table for FooBar not FooBar2. \r\n\r\nWe assume it&#39;s doing a left join or something like that.\r\n\r\nadding the \r\n```\r\n@org.hibernate.annotations.Table(appliesTo = &quot;foo_bar&quot;, optional = false) \r\n```\r\ndidn&#39;t help.\r\nWe also tried with an other column name and \r\n```\r\n@SecondaryTable(name = &quot;FOO_BAR&quot;, pkJoinColumns = {@PrimaryKeyJoinColumn(name = &quot;OTHER_COLUMN_NAME_IN_FOO_BAR_ID&quot;, referencedColumnName = &quot;ID&quot;)})\r\n```\r\nWe also tried by not having a primary key that is also a foreign key, same.\r\n\r\nResult is always the same, working locally, not after.\r\n\r\nSo we are starting to think maybe it&#39;s an issue with hibernate version or properties linked to hibernate which might change from local, or the version of the jvm... \r\n\r\nAnyone has an idea?\r\n\r\nThanks in advance","title":"SecondaryTable annotation is working locally but not on test environment","body":"<p>So we are in Java 8 (v202 on test env, 230 to 301 locally) and we use spring boot 1.5.4.RELEASE / hibernate (5.0.12) / jpa 2.1.</p>\n<p>We have a class like this:</p>\n<pre><code>@Entity\n@SecondaryTable(name = &quot;FOO_BAR&quot;)\n@org.hibernate.annotations.Table(appliesTo = &quot;foo_bar&quot;, optional = false)\n@DiscriminatorValue(MyEnum.Values.MY_DISCRIMINATOR)\npublic class FooBar extends FooBarParent{\n\n@Column(name = &quot;COLUMN_NAME_OF_PRIMARY_TABLE_FOR_FIELD_A&quot;)\nprivate Long FIELD_A;\n\n@Column(table= &quot;FOO_BAR&quot;, name = &quot;COLUMN_NAME_OF_SECONDARY_TABLE_FOR_FIELD_B&quot;)\nprivate String FIELD_B;\n</code></pre>\n<p>The script for secondary table is:</p>\n<pre><code>CREATE TABLE FOO_BAR\n(\n    ID                            NUMBER PRIMARY KEY,\n    TOTO                          VARCHAR2(10)\n);\n\nALTER TABLE FOO_BAR\n    ADD CONSTRAINT FK_FOO_BAR_PARENT FOREIGN KEY (ID) REFERENCES FOO_BAR_PARENT(ID);\n</code></pre>\n<p>This whole inheritance system is working well, but we recently added the secondary table annotation. It is working locally: on adding a FooBar in the database, it adds a row in the secondary table.\nOn reading another child of FooBarParent (let's call it FooBar2), it's also working locally, it doesn't care about the secondary table which concerns FooBar and not FooBar2.</p>\n<p>It's also working locally for my coworker.\nIt's also working locally with the database of the Test Environment, so even the data is the same, it's working.</p>\n<p>But as soon as we test in our Test environments (actually, on all test environments), the code is not working anymore. It's like a heisenbug as we cannot debug it ...</p>\n<p>The unexpected result in Test environments is that when you try to read a list of FooBar2, it will produce duplicates. So you will read as many FooBar2 as there is rows in the SecondaryTable. Which is stupid since it's not even supposed to look in there in the first place since it's a secondary table for FooBar not FooBar2.</p>\n<p>We assume it's doing a left join or something like that.</p>\n<p>adding the</p>\n<pre><code>@org.hibernate.annotations.Table(appliesTo = &quot;foo_bar&quot;, optional = false) \n</code></pre>\n<p>didn't help.\nWe also tried with an other column name and</p>\n<pre><code>@SecondaryTable(name = &quot;FOO_BAR&quot;, pkJoinColumns = {@PrimaryKeyJoinColumn(name = &quot;OTHER_COLUMN_NAME_IN_FOO_BAR_ID&quot;, referencedColumnName = &quot;ID&quot;)})\n</code></pre>\n<p>We also tried by not having a primary key that is also a foreign key, same.</p>\n<p>Result is always the same, working locally, not after.</p>\n<p>So we are starting to think maybe it's an issue with hibernate version or properties linked to hibernate which might change from local, or the version of the jvm...</p>\n<p>Anyone has an idea?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","jackson","objectmapper"],"owner":{"account_id":23387643,"reputation":51,"user_id":17452719,"display_name":"musan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677573295,"creation_date":1677570660,"question_id":75589197,"body_markdown":"I want to use code to replace annotation conifg, this is my code\r\n\r\n```\r\n ObjectMapper mapper = new ObjectMapper();\r\n        mapper.setDefaultTyping(type);\r\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(Node.class, &quot;Node&quot;));\r\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(SubNode.class, &quot;SubNode&quot;));\r\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(Attr.class, &quot;Attr&quot;));\r\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(SubAttr.class, &quot;SubAttr&quot;));\r\n```\r\n\r\nI know ```@JsonSubTypes({\r\n    @JsonSubTypes.Type(value = SubNode.class, name = &quot;SubNode&quot;)})``` , this is work, but I do not use it, I want to use code to config it\r\n\r\n","title":"ObjectMapper how to register SubtypeResolver","body":"<p>I want to use code to replace annotation conifg, this is my code</p>\n<pre><code> ObjectMapper mapper = new ObjectMapper();\n        mapper.setDefaultTyping(type);\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(Node.class, &quot;Node&quot;));\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(SubNode.class, &quot;SubNode&quot;));\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(Attr.class, &quot;Attr&quot;));\n        mapper.getSubtypeResolver().registerSubtypes(new NamedType(SubAttr.class, &quot;SubAttr&quot;));\n</code></pre>\n<p>I know <code>@JsonSubTypes({ @JsonSubTypes.Type(value = SubNode.class, name = &quot;SubNode&quot;)})</code> , this is work, but I do not use it, I want to use code to config it</p>\n"},{"tags":["java","unit-testing","junit","mockito","junit5"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1673943856,"post_id":75143593,"comment_id":132603746,"body_markdown":"this has nothing to do with Mockito. You test private methods by testing the methods that use them.","body":"this has nothing to do with Mockito. You test private methods by testing the methods that use them."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":2,"creation_date":1673944193,"post_id":75143593,"comment_id":132603834,"body_markdown":"If you mock the method that you’re testing, then it only tests the mock and won’t provide any coverage of the class.","body":"If you mock the method that you’re testing, then it only tests the mock and won’t provide any coverage of the class."},{"owner":{"account_id":25608031,"reputation":21,"user_id":21025550,"display_name":"isagirl"},"score":0,"creation_date":1673948520,"post_id":75143593,"comment_id":132605222,"body_markdown":"what is the alternative then ? @TimMoore","body":"what is the alternative then ? @TimMoore"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1673949965,"post_id":75143593,"comment_id":132605685,"body_markdown":"@isagirl -&gt; test the methods that use that private method, for each scenario of that private method","body":"@isagirl -&gt; test the methods that use that private method, for each scenario of that private method"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1673951021,"post_id":75143593,"comment_id":132606040,"body_markdown":"@isagirl you should remove this line: `Mockito.when(fileViewerService.fetchNodes(ArgumentMatchers.any(),ArgumentMatchers.anyString(),ArgumentMatchers.anyString())).thenReturn(parentNodes);`. As a general guideline, rather than designing tests around mocking, or even around coverage reports, it’s best to start by asking: “how do I specify the behaviour of this method?” Mocking can be useful to do this, but it is only a tool for assisting in the specification of the tested class’s interactions with _other_ classes. And it’s not always the best tool for this. What does this method actually do?","body":"@isagirl you should remove this line: <code>Mockito.when(fileViewerService.fetchNodes(ArgumentMatchers.a&zwnj;&#8203;ny(),ArgumentMatcher&zwnj;&#8203;s.anyString(),Argume&zwnj;&#8203;ntMatchers.anyString&zwnj;&#8203;())).thenReturn(pare&zwnj;&#8203;ntNodes);</code>. As a general guideline, rather than designing tests around mocking, or even around coverage reports, it’s best to start by asking: “how do I specify the behaviour of this method?” Mocking can be useful to do this, but it is only a tool for assisting in the specification of the tested class’s interactions with <i>other</i> classes. And it’s not always the best tool for this. What does this method actually do?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1673951233,"post_id":75143593,"comment_id":132606094,"body_markdown":"More specifically, I agree with Stultuske. You want your test to be calling the private method (indirectly). The `fetchNodes` method doesn’t really do much other than call `transformDataMap`. You can’t usefully test the former without indirectly testing the latter.","body":"More specifically, I agree with Stultuske. You want your test to be calling the private method (indirectly). The <code>fetchNodes</code> method doesn’t really do much other than call <code>transformDataMap</code>. You can’t usefully test the former without indirectly testing the latter."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1673952742,"post_id":75143593,"comment_id":132606439,"body_markdown":"This is often a reason to make methods package-private instead of private. Test classes are usually in the same package, so they have access to these methods. But in this case I agree with what others have said - `fetchNodes` isn&#39;t actually doing anything so you can test `transformDataMap` by testing `fetchNodes`.","body":"This is often a reason to make methods package-private instead of private. Test classes are usually in the same package, so they have access to these methods. But in this case I agree with what others have said - <code>fetchNodes</code> isn&#39;t actually doing anything so you can test <code>transformDataMap</code> by testing <code>fetchNodes</code>."},{"owner":{"account_id":14608568,"reputation":625,"user_id":10550655,"display_name":"Michael Katt"},"score":0,"creation_date":1674641517,"post_id":75143593,"comment_id":132756088,"body_markdown":"Please show your `transformDataMap() method` because of more potential mock candidates.","body":"Please show your <code>transformDataMap() method</code> because of more potential mock candidates."}],"answers":[{"tags":[],"owner":{"account_id":4905548,"reputation":81,"user_id":3952407,"display_name":"Bodo Teichmann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677573023,"creation_date":1677573023,"answer_id":75589551,"question_id":75143593,"body_markdown":"Your test code should test the `fetchNodes()` method according to the name of the test. Therefore it does not make any sense to mock this same method, otherwise you would only test, if the Mockito library works as expeced, and if you test setup code works  which is probably not what you are trying to achieve. The only thing here, which could make sense to test, would be transformDataMap(), because this seems to be the only non-trivial part in your  `fetchNodes()` method. So apearently you just need to delete the line `Mockito.when(fileViewerService...` and you are good.","title":"Junit : How to mock a private method using Mockito or how to get coverage without mocking the private method","body":"<p>Your test code should test the <code>fetchNodes()</code> method according to the name of the test. Therefore it does not make any sense to mock this same method, otherwise you would only test, if the Mockito library works as expeced, and if you test setup code works  which is probably not what you are trying to achieve. The only thing here, which could make sense to test, would be transformDataMap(), because this seems to be the only non-trivial part in your  <code>fetchNodes()</code> method. So apearently you just need to delete the line <code>Mockito.when(fileViewerService...</code> and you are good.</p>\n"}],"owner":{"account_id":25608031,"reputation":21,"user_id":21025550,"display_name":"isagirl"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677573023,"creation_date":1673943826,"question_id":75143593,"body_markdown":"    public List&lt;String&gt; fetchNodes(MultipartFile file, String content, String fileType) throws Exception {\r\n\t\tMap&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\r\n\t\tList&lt;String&gt; parentNodes = new ArrayList&lt;String&gt;();\r\n\t\ttransformDataMap(file, content, fileType, map, null, parentNodes);\r\n\t\treturn parentNodes;\r\n\t}\r\n\r\nwhete MultipartFile is an Interface and transformDataMap is a private method.\r\n\r\n       \r\n\t\r\n\r\n       @InjectMocks\r\n\tprivate FileViewerService fileViewerService;\r\n\t\r\n\t@Mock\r\n\tprivate MultipartFile multipartfile;\r\n\t\r\n\t@Test\r\n\tpublic void test_fetchNodes() throws Exception {\r\n\t\t\r\n\t\tString content = &quot;content&quot;;\r\n\t\tString fileType = &quot;TXT&quot;;\r\n\t\tMap&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\r\n\t\tJsonNode jsonNode = new ObjectMapper().readTree(&quot;{ \\&quot;json\\&quot;:\\&quot;xyz\\&quot;}&quot;);\r\n\t\tmap.put(&quot;nodemap&quot;,(Object)jsonNode.asText());\r\n\t\tMockito.when(multipartfile.getOriginalFilename()).thenReturn(&quot;test.txt&quot;);\r\n\t\t\r\n\t\tList&lt;String&gt; parentNodes = new ArrayList&lt;String&gt;();\r\n\t\tparentNodes.add(&quot;parentnode1&quot;);\r\n\t\tparentNodes.add(&quot;parentnode2&quot;);\r\n\t\t\r\n\t\t Mockito.when(fileViewerService.fetchNodes(ArgumentMatchers.any(),ArgumentMatchers.anyString(),ArgumentMatchers.anyString())).thenReturn(parentNodes);\r\n\t\r\n\t\tList&lt;String&gt; resultPNodes = fileViewerService.fetchNodes(multipartfile, content,fileType);\r\n\t\tassertEquals(parentNodes, resultPNodes);\r\n\t\r\n\t}\r\n\r\nthis is my code. I am getting error in junit when Mocking the service class using Mockito saying I cannot use ArgukmentMatchers outside stubbing.","title":"Junit : How to mock a private method using Mockito or how to get coverage without mocking the private method","body":"<pre><code>public List&lt;String&gt; fetchNodes(MultipartFile file, String content, String fileType) throws Exception {\n    Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\n    List&lt;String&gt; parentNodes = new ArrayList&lt;String&gt;();\n    transformDataMap(file, content, fileType, map, null, parentNodes);\n    return parentNodes;\n}\n</code></pre>\n<p>whete MultipartFile is an Interface and transformDataMap is a private method.</p>\n<pre><code>   @InjectMocks\nprivate FileViewerService fileViewerService;\n\n@Mock\nprivate MultipartFile multipartfile;\n\n@Test\npublic void test_fetchNodes() throws Exception {\n    \n    String content = &quot;content&quot;;\n    String fileType = &quot;TXT&quot;;\n    Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\n    JsonNode jsonNode = new ObjectMapper().readTree(&quot;{ \\&quot;json\\&quot;:\\&quot;xyz\\&quot;}&quot;);\n    map.put(&quot;nodemap&quot;,(Object)jsonNode.asText());\n    Mockito.when(multipartfile.getOriginalFilename()).thenReturn(&quot;test.txt&quot;);\n    \n    List&lt;String&gt; parentNodes = new ArrayList&lt;String&gt;();\n    parentNodes.add(&quot;parentnode1&quot;);\n    parentNodes.add(&quot;parentnode2&quot;);\n    \n     Mockito.when(fileViewerService.fetchNodes(ArgumentMatchers.any(),ArgumentMatchers.anyString(),ArgumentMatchers.anyString())).thenReturn(parentNodes);\n\n    List&lt;String&gt; resultPNodes = fileViewerService.fetchNodes(multipartfile, content,fileType);\n    assertEquals(parentNodes, resultPNodes);\n\n}\n</code></pre>\n<p>this is my code. I am getting error in junit when Mocking the service class using Mockito saying I cannot use ArgukmentMatchers outside stubbing.</p>\n"},{"tags":["java","lambda","garbage-collection"],"comments":[{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":0,"creation_date":1453389568,"post_id":34927171,"comment_id":57588412,"body_markdown":"What `java` version do you use? For me it prints just `sys=sun.misc.Launcher$AppClassLoader@73d16e93, lambda=sun.misc.Launcher$AppClassLoader@73d16e93\nsys=interface java.lang.Runnable, lambda=class q34927171.Play$$Lambda$1/918221580`","body":"What <code>java</code> version do you use? For me it prints just <code>sys=sun.misc.Launcher$AppClassLoader@73d16e93, lambda=sun.misc.Launcher$AppClassLoader@73d16e93 sys=interface java.lang.Runnable, lambda=class q34927171.Play$$Lambda$1&#47;918221580</code>"},{"owner":{"account_id":234026,"reputation":7237,"user_id":499922,"accept_rate":90,"display_name":"billc.cn"},"score":0,"creation_date":1453391104,"post_id":34927171,"comment_id":57589485,"body_markdown":"@Andremoniy Sorry, I actually changed the first line of the print code but forgot to update the qustion.","body":"@Andremoniy Sorry, I actually changed the first line of the print code but forgot to update the qustion."}],"answers":[{"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1453392041,"creation_date":1453392041,"answer_id":34928463,"question_id":34927171,"body_markdown":"I think you are confused about lambda class unloading here, and here is why. You have to test not `wr.get()`, because dereferencing of this `String` instance doesn&#39;t talk anything about lambda based on it. You have to make `WeakReference` for class:\r\n\r\n    ...\r\n    Runnable run = test::toString;\r\n    WeakReference&lt;Class&gt; wcr = new WeakReference&lt;Class&gt;(run.getClass());\r\n    ...\r\n\r\nand try to &quot;wait&quot; while it would be dereferenced:\r\n\r\n    while (wcr.get() != null) {\r\n       System.gc();\r\n    }\r\n\r\nSo, this loop will never be finished.\r\n","title":"Magical class unloading for synthesised lambda classes?","body":"<p>I think you are confused about lambda class unloading here, and here is why. You have to test not <code>wr.get()</code>, because dereferencing of this <code>String</code> instance doesn't talk anything about lambda based on it. You have to make <code>WeakReference</code> for class:</p>\n\n<pre><code>...\nRunnable run = test::toString;\nWeakReference&lt;Class&gt; wcr = new WeakReference&lt;Class&gt;(run.getClass());\n...\n</code></pre>\n\n<p>and try to \"wait\" while it would be dereferenced:</p>\n\n<pre><code>while (wcr.get() != null) {\n   System.gc();\n}\n</code></pre>\n\n<p>So, this loop will never be finished.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677572676,"creation_date":1453402229,"answer_id":34931968,"question_id":34927171,"body_markdown":"The funny thing is, that despite your test is insufficient to determine that, it’s actually true, the classes generated for lambda expressions *can* get garbage collected as the following code can demonstrate:\r\n\r\n    import java.lang.invoke.*;\r\n    import java.lang.ref.WeakReference;\r\n\r\n    public class LambdaClassUnloading {\r\n        public static void main(String[] args) throws Throwable {\r\n            MethodHandles.Lookup l = MethodHandles.lookup();\r\n            MethodType t=MethodType.methodType(void.class);\r\n            Runnable r=(Runnable)LambdaMetafactory.metafactory(l, &quot;run&quot;,\r\n                MethodType.methodType(Runnable.class), t,\r\n                l.findStatic(LambdaClassUnloading.class, &quot;testMethod&quot;, t), t)\r\n                .getTarget().invokeExact();\r\n            System.out.println(&quot;generated &quot;+r);\r\n            r.run();\r\n            WeakReference&lt;Class&lt;?&gt;&gt; ref=new WeakReference&lt;&gt;(r.getClass());\r\n            r=null;\r\n            while(ref.get()!=null) System.gc();\r\n            System.out.println(&quot;class collected&quot;);\r\n        }\r\n        private static void testMethod() {\r\n            System.out.println(&quot;testMethod() called&quot;);\r\n        }\r\n    }\r\n\r\nThis prints something alike:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    generated java8test.LambdaClassUnloading$$Lambda$1/723074861@77459877\r\n    testMethod() called\r\n    class collected\r\n\r\nThough the numbers may vary.\r\n\r\nBut for practical purposes, it’s important to understand that the generator facility, which the code above invokes reflectively, is normally triggered via an `invokedynamic` byte code instruction which will get permanently linked to the result of the first completed bootstrapping process.\r\n\r\nIn other words, given how the current JRE handles it, as long as the code containing the `invokedynamic` instruction is reachable, the permanently linked lambda class will persist as well. This matches the behavior demonstrated in [Andremoniy’s answer](https://stackoverflow.com/a/34928463/2711488); the code of the line `Runnable run = test::toString;` could get executed again and will produce an instance of the same class as the first execution, as it’s constructor got permanently linked to it.\r\n\r\nBut in theory, an alternative JRE implementation could let the bootstrap method return a `MutableCallSite` and retarget it at a later time, e.g. to produce instances of a more optimized class or to enforce sharing of classes between semantically equivalent lambda expressions. In that cases, existing lambda classes could get garbage collected earlier than their defining class when there are no more lambda instances.\r\n\r\nSo the answer is, there is indeed a “magical class unloading”, but currently, it’s irrelevant for most practical purposes and, of course, if it happens in a future JVM, it will still retain the semantics as specified by the Java Language Specification. Regardless of how the instance captured by your method reference `test::toString` gets stored, it will not hinder its collection if the *instance* of the functional interface is unreachable.\r\n\r\n---\r\nIf you are interested in more details, the article [“anonymous classes in the VM” by John Rose](https://web.archive.org/web/20160506224222/https://blogs.oracle.com/jrose/entry/anonymous_classes_in_the_vm) provides an introduction. You may also search for `sun.misc.Unsafe.defineAnonymousClass`…\r\n","title":"Magical class unloading for synthesised lambda classes?","body":"<p>The funny thing is, that despite your test is insufficient to determine that, it’s actually true, the classes generated for lambda expressions <em>can</em> get garbage collected as the following code can demonstrate:</p>\n<pre><code>import java.lang.invoke.*;\nimport java.lang.ref.WeakReference;\n\npublic class LambdaClassUnloading {\n    public static void main(String[] args) throws Throwable {\n        MethodHandles.Lookup l = MethodHandles.lookup();\n        MethodType t=MethodType.methodType(void.class);\n        Runnable r=(Runnable)LambdaMetafactory.metafactory(l, &quot;run&quot;,\n            MethodType.methodType(Runnable.class), t,\n            l.findStatic(LambdaClassUnloading.class, &quot;testMethod&quot;, t), t)\n            .getTarget().invokeExact();\n        System.out.println(&quot;generated &quot;+r);\n        r.run();\n        WeakReference&lt;Class&lt;?&gt;&gt; ref=new WeakReference&lt;&gt;(r.getClass());\n        r=null;\n        while(ref.get()!=null) System.gc();\n        System.out.println(&quot;class collected&quot;);\n    }\n    private static void testMethod() {\n        System.out.println(&quot;testMethod() called&quot;);\n    }\n}\n</code></pre>\n<p>This prints something alike:</p>\n<pre class=\"lang-none prettyprint-override\"><code>generated java8test.LambdaClassUnloading$$Lambda$1/723074861@77459877\ntestMethod() called\nclass collected\n</code></pre>\n<p>Though the numbers may vary.</p>\n<p>But for practical purposes, it’s important to understand that the generator facility, which the code above invokes reflectively, is normally triggered via an <code>invokedynamic</code> byte code instruction which will get permanently linked to the result of the first completed bootstrapping process.</p>\n<p>In other words, given how the current JRE handles it, as long as the code containing the <code>invokedynamic</code> instruction is reachable, the permanently linked lambda class will persist as well. This matches the behavior demonstrated in <a href=\"https://stackoverflow.com/a/34928463/2711488\">Andremoniy’s answer</a>; the code of the line <code>Runnable run = test::toString;</code> could get executed again and will produce an instance of the same class as the first execution, as it’s constructor got permanently linked to it.</p>\n<p>But in theory, an alternative JRE implementation could let the bootstrap method return a <code>MutableCallSite</code> and retarget it at a later time, e.g. to produce instances of a more optimized class or to enforce sharing of classes between semantically equivalent lambda expressions. In that cases, existing lambda classes could get garbage collected earlier than their defining class when there are no more lambda instances.</p>\n<p>So the answer is, there is indeed a “magical class unloading”, but currently, it’s irrelevant for most practical purposes and, of course, if it happens in a future JVM, it will still retain the semantics as specified by the Java Language Specification. Regardless of how the instance captured by your method reference <code>test::toString</code> gets stored, it will not hinder its collection if the <em>instance</em> of the functional interface is unreachable.</p>\n<hr />\n<p>If you are interested in more details, the article <a href=\"https://web.archive.org/web/20160506224222/https://blogs.oracle.com/jrose/entry/anonymous_classes_in_the_vm\" rel=\"nofollow noreferrer\">“anonymous classes in the VM” by John Rose</a> provides an introduction. You may also search for <code>sun.misc.Unsafe.defineAnonymousClass</code>…</p>\n"}],"owner":{"account_id":234026,"reputation":7237,"user_id":499922,"accept_rate":90,"display_name":"billc.cn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":402,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":34931968,"answer_count":2,"score":1,"last_activity_date":1677572676,"creation_date":1453388550,"question_id":34927171,"body_markdown":"We know normally a class [cannot be unloaded](https://stackoverflow.com/a/148707/499922) from a ClassLoader, but it seems the synthesised class for lambdas can.\r\n\r\nProof:\r\n\r\n    public class Play {\r\n        static String test = new String(&quot;test&quot;);\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            WeakReference&lt;String&gt; wr = new WeakReference&lt;&gt;(test);\r\n            Runnable run = test::toString;\r\n            System.out.println(Play.class.getClassLoader() == run.getClass().getClassLoader());\r\n            System.out.printf(&quot;sys=%s, lambda=%s&quot;, Runnable.class, run.getClass());\r\n            run.run();\r\n            test = null;\r\n            run = null;\r\n            while (wr.get() != null) {\r\n                System.gc();\r\n            }\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    true\r\n    sys=interface java.lang.Runnable, lambda=class Play$$Lambda$1/918221580\r\n    &lt;then terminates&gt;\r\n\r\nThis shows that the String referenced by the lambda&#39;s clousure (would be referenced by the synthesised class) was dereferenced, which means the synthesised class must have been GC&#39;ed as well. This makes sense as otherwise there would be all kinds of classloader-based memory leaks.\r\n\r\nMy question is did they break the class cannot be unloaded design to do this? If so, can we do this with our own classes?","title":"Magical class unloading for synthesised lambda classes?","body":"<p>We know normally a class <a href=\"https://stackoverflow.com/a/148707/499922\">cannot be unloaded</a> from a ClassLoader, but it seems the synthesised class for lambdas can.</p>\n\n<p>Proof:</p>\n\n<pre><code>public class Play {\n    static String test = new String(\"test\");\n\n    public static void main(String[] args) throws Exception {\n        WeakReference&lt;String&gt; wr = new WeakReference&lt;&gt;(test);\n        Runnable run = test::toString;\n        System.out.println(Play.class.getClassLoader() == run.getClass().getClassLoader());\n        System.out.printf(\"sys=%s, lambda=%s\", Runnable.class, run.getClass());\n        run.run();\n        test = null;\n        run = null;\n        while (wr.get() != null) {\n            System.gc();\n        }\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>true\nsys=interface java.lang.Runnable, lambda=class Play$$Lambda$1/918221580\n&lt;then terminates&gt;\n</code></pre>\n\n<p>This shows that the String referenced by the lambda's clousure (would be referenced by the synthesised class) was dereferenced, which means the synthesised class must have been GC'ed as well. This makes sense as otherwise there would be all kinds of classloader-based memory leaks.</p>\n\n<p>My question is did they break the class cannot be unloaded design to do this? If so, can we do this with our own classes?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1614367790,"post_id":66391629,"comment_id":117373859,"body_markdown":"You might have compile errors because you added parenthesis after `expiration`, but expiration in your example is a variable, not a method. So if you remove those, you should at least be able to get rid of the compile errors.","body":"You might have compile errors because you added parenthesis after <code>expiration</code>, but expiration in your example is a variable, not a method. So if you remove those, you should at least be able to get rid of the compile errors."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1614367746,"creation_date":1614367409,"answer_id":66391665,"question_id":66391629,"body_markdown":"Don&#39;t convert them to Strings.  Instant, like every other `Comparable` type, has the `compareTo` method.  Use it like this:\r\n\r\n\r\n    if (expiration.compareTo(Instant.now()) &gt;= 0) {\r\n      ...\r\n    }","title":"How to compare two instants in Java?","body":"<p>Don't convert them to Strings.  Instant, like every other <code>Comparable</code> type, has the <code>compareTo</code> method.  Use it like this:</p>\n<pre><code>if (expiration.compareTo(Instant.now()) &gt;= 0) {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4008871,"reputation":163,"user_id":3302843,"display_name":"cloooze"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651842042,"creation_date":1651842042,"answer_id":72141888,"question_id":66391629,"body_markdown":"Following the implementation of compareTo method of Instant class:\r\n\r\n    @Override\r\n    public int compareTo(Instant otherInstant) {\r\n        int cmp = Long.compare(seconds, otherInstant.seconds);\r\n        if (cmp != 0) {\r\n            return cmp;\r\n        }\r\n        return nanos - otherInstant.nanos;\r\n    }","title":"How to compare two instants in Java?","body":"<p>Following the implementation of compareTo method of Instant class:</p>\n<pre><code>@Override\npublic int compareTo(Instant otherInstant) {\n    int cmp = Long.compare(seconds, otherInstant.seconds);\n    if (cmp != 0) {\n        return cmp;\n    }\n    return nanos - otherInstant.nanos;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4528798,"reputation":10533,"user_id":3679900,"accept_rate":48,"display_name":"y2k-shubham"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1661764309,"creation_date":1661764309,"answer_id":73526539,"question_id":66391629,"body_markdown":"*Posting [comments](https://stackoverflow.com/questions/66391629/how-to-compare-two-instants-in-java#comment117374100_66391665) by [**chrylis-cautiouslyoptimistic**](https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic) as an answer to highlight*\r\n\r\n-------\r\n\r\n`Instant` also has more semantically meaningful methods `isAfter` and `isBefore`\r\n```\r\nif (now().isAfter(expiration)) {\r\n  .. do something ..\r\n}\r\n```\r\n\r\n-------\r\n\r\nAs [pointed out][1] by [**@Louis Wasserman**][2]\r\n**\r\n\r\n - Note that `isAfter` doesn&#39;t represent `&gt;=`, it represents `&gt;`\r\n - You could work around that, e.g. with `!isBefore` or `|| equals`\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/66391629/how-to-compare-two-instants-in-java#comment117375310_66391665\r\n  [2]: https://stackoverflow.com/users/869736/louis-wasserman","title":"How to compare two instants in Java?","body":"<p><em>Posting <a href=\"https://stackoverflow.com/questions/66391629/how-to-compare-two-instants-in-java#comment117374100_66391665\">comments</a> by <a href=\"https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic\"><strong>chrylis-cautiouslyoptimistic</strong></a> as an answer to highlight</em></p>\n<hr />\n<p><code>Instant</code> also has more semantically meaningful methods <code>isAfter</code> and <code>isBefore</code></p>\n<pre><code>if (now().isAfter(expiration)) {\n  .. do something ..\n}\n</code></pre>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/questions/66391629/how-to-compare-two-instants-in-java#comment117375310_66391665\">pointed out</a> by <a href=\"https://stackoverflow.com/users/869736/louis-wasserman\"><strong>@Louis Wasserman</strong></a>\n**</p>\n<ul>\n<li>Note that <code>isAfter</code> doesn't represent <code>&gt;=</code>, it represents <code>&gt;</code></li>\n<li>You could work around that, e.g. with <code>!isBefore</code> or <code>|| equals</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19345318,"reputation":1,"user_id":14144006,"display_name":"M N G RAGHUNADH GOPU"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677572636,"creation_date":1677572636,"answer_id":75589490,"question_id":66391629,"body_markdown":"Since the title reads &quot;How to compare two instants in Java?&quot; if someone is looking to check the equality of two instants then you can use &quot;equals&quot; method provided by Instant class.\r\n\r\n```\r\nvoid solve() {\r\n      Instant i1 = Instant.parse(&quot;2022-08-12T16:10:35.00Z&quot;);\r\n      Instant i2 = Instant.parse(&quot;2022-08-12T16:10:35.00Z&quot;);\r\n      System.out.println(&quot;Instant object i1 is: &quot; + i1);\r\n      System.out.println(&quot;Instant object i2 is: &quot; + i2);\r\n      if(i1.equals(i2))\r\n         System.out.println(&quot;The Instant objects are equal&quot;);\r\n      else\r\n         System.out.println(&quot;The Instant objects are not equal&quot;);\r\n   }\r\n\r\n\r\n```\r\n\r\n\r\nAs discussed in other answers we could also use isAfter, isBefore, compareTo methods as well.","title":"How to compare two instants in Java?","body":"<p>Since the title reads &quot;How to compare two instants in Java?&quot; if someone is looking to check the equality of two instants then you can use &quot;equals&quot; method provided by Instant class.</p>\n<pre><code>void solve() {\n      Instant i1 = Instant.parse(&quot;2022-08-12T16:10:35.00Z&quot;);\n      Instant i2 = Instant.parse(&quot;2022-08-12T16:10:35.00Z&quot;);\n      System.out.println(&quot;Instant object i1 is: &quot; + i1);\n      System.out.println(&quot;Instant object i2 is: &quot; + i2);\n      if(i1.equals(i2))\n         System.out.println(&quot;The Instant objects are equal&quot;);\n      else\n         System.out.println(&quot;The Instant objects are not equal&quot;);\n   }\n\n\n</code></pre>\n<p>As discussed in other answers we could also use isAfter, isBefore, compareTo methods as well.</p>\n"}],"owner":{"account_id":19020553,"reputation":675,"user_id":13884720,"display_name":"Abdalrhman Alkraien"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28120,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"accepted_answer_id":66391665,"answer_count":4,"score":12,"last_activity_date":1677572636,"creation_date":1614367218,"question_id":66391629,"body_markdown":"**I want comparison two `Instant`s to see if equals both or greater than**, but i can’t. \r\ni dont know. how i can compare instants?\r\n\r\n      private Instant expiration;\r\n    \r\n     if(expiration()==Instant.now()||expiration()&gt;Instant.now())\r\n      {\r\n         valid+=&quot;the Expire date is invalid check it . &quot;;\r\n      }\r\n\r\ni  try this way but i have compile error.\r\nbut i think cant comparison in this way\r\nit  must change instant to String and compare after it \r\nbut i dont know how to format to string\r\n\r\n","title":"How to compare two instants in Java?","body":"<p><strong>I want comparison two <code>Instant</code>s to see if equals both or greater than</strong>, but i can’t.\ni dont know. how i can compare instants?</p>\n<pre><code>  private Instant expiration;\n\n if(expiration()==Instant.now()||expiration()&gt;Instant.now())\n  {\n     valid+=&quot;the Expire date is invalid check it . &quot;;\n  }\n</code></pre>\n<p>i  try this way but i have compile error.\nbut i think cant comparison in this way\nit  must change instant to String and compare after it\nbut i dont know how to format to string</p>\n"},{"tags":["java","rest","wildfly","resteasy"],"comments":[{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":1,"creation_date":1563442534,"post_id":57091373,"comment_id":100704635,"body_markdown":"You say that there&#39;s no log entry, but do you have a response from the server ?","body":"You say that there&#39;s no log entry, but do you have a response from the server ?"},{"owner":{"account_id":1346927,"reputation":2441,"user_id":1287477,"accept_rate":52,"display_name":"Continuity8"},"score":0,"creation_date":1563486323,"post_id":57091373,"comment_id":100727025,"body_markdown":"@ArnaudClaudel No response, just a 404. There is a logger in the RESTEasy Activator constructor, so without a log entry I&#39;m guessing it hasn&#39;t been initialized at all.","body":"@ArnaudClaudel No response, just a 404. There is a logger in the RESTEasy Activator constructor, so without a log entry I&#39;m guessing it hasn&#39;t been initialized at all."}],"answers":[{"tags":[],"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563527032,"creation_date":1563527032,"answer_id":57109041,"question_id":57091373,"body_markdown":"As answered [here][1], JAX-RS should normally be packaged in a `.war` file.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/24217275/7736617","title":"RESTEasy won&#39;t bootstrap/initialize","body":"<p>As answered <a href=\"https://stackoverflow.com/a/24217275/7736617\">here</a>, JAX-RS should normally be packaged in a <code>.war</code> file.</p>\n"},{"tags":[],"owner":{"account_id":11011731,"reputation":1,"user_id":8088856,"display_name":"glaksos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677572343,"creation_date":1677572343,"answer_id":75589443,"question_id":57091373,"body_markdown":"I had a similar issue and the solution was to set the scope of resteasy dependencies to provided rather than compile.","title":"RESTEasy won&#39;t bootstrap/initialize","body":"<p>I had a similar issue and the solution was to set the scope of resteasy dependencies to provided rather than compile.</p>\n"}],"owner":{"account_id":1346927,"reputation":2441,"user_id":1287477,"accept_rate":52,"display_name":"Continuity8"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":805,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1677572343,"creation_date":1563442320,"question_id":57091373,"body_markdown":"I&#39;m attempting to use WildFly&#39;s implementation of JAX-RS - RESTEasy to create some Java based Restful webservices, and having a little trouble simply getting it to initiate once deployed.\n\nNote that I&#39;m adding the RESTEasy annotations to a set of classes in an already working project that is deployed as an .ear file, that should be OK right? To be clear the package structure looks something like:\n\n    com.something.app\n    com.something.app.resteasyannotatedclasses\n\nNow I am using no web.xml or any xml conf for that matter and only annotations as documented [here][1]\n\n\nI simply have two classes, the RESTEasy Activator:\n\n    @ApplicationPath(&quot;/coordinates&quot;)\n    public class RestEasyActivator extends Application {\n        RestEasyActivator () {\n            Logger.getAnonymousLogger().warning(&quot;RestEasyActivator Initialised Rest Easy.&quot;);\n        }\n    }\n\nAnd the actual service:\n\n    @Path(&quot;get&quot;)\n    public class CoordinatesServiceWrapper {\n        private static final Logger LOG = Logger.getLogger(CoordinatesServiceWrapper.class.getName());\n    \n        @GET\n        @Path(&quot;getByName&quot;)\n        public String findCoordinates(){\n            LOG.info(&quot;Called coordinates service!&quot;);\n            return &quot;Hi&quot;;\n        }\n    }\n\nWhen the ear is deployed to WildFly I see the log:\n\n&gt; WARN  [org.jboss.weld.Bootstrap] (Weld Thread Pool -- 4) WELD-000167: Class org.jboss.resteasy.core.AsynchronousDispatcher is annotated with @RequestScoped but it does not declare an appropriate constructor therefore is not registered as a bean!\n&gt;\n&gt; WARN  [org.jboss.weld.Bootstrap] (Weld Thread Pool -- 1) WELD-000167: Class org.jboss.resteasy.plugins.providers.DocumentProvider is annotated with @ApplicationScoped but it does not declare an appropriate constructor therefore is not registered as a bean!\n&gt;\n&gt; INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 391) WFLYUT0021: Registered web context: &#39;/CoordinateSearch&#39; for server &#39;default-server&#39;\n&gt;\n&gt; INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) WFLYSRV0010: Deployed &quot;CoordinateSearch.ear&quot; (runtime-name : &quot;CoordinateSearch.ear&quot;)\n\nIm guessing the warnings relating to RESTEasy are fine to ignore, and the info messages show that the .ear has successfully deployed.\n\nTo invoke the webservice I&#39;ve tried the URLS:\n\n&gt; Server:port/CoordinateSearch/coordinates/get/getByName/ and\n&gt; Server:port/coordinates/get/getByName/\n\nNeither of which generate any log entries.\n\nWhat am I missing...\nHave I missed some conf? - it seems very minimal. Based on the RESTEasy documentation [here][2] WildFly comes with RESTEasy imported and it will bootstrap based on any classes containing annotations ...So I can&#39;t see the issue.\n\n\n  [1]: http://www.mastertheboss.com/jboss-frameworks/resteasy/resteasy-tutorial\n  [2]: https://docs.jboss.org/resteasy/docs/4.1.1.Final/userguide/html_single/index.html#resteasy_modules_in_wildfly","title":"RESTEasy won&#39;t bootstrap/initialize","body":"<p>I'm attempting to use WildFly's implementation of JAX-RS - RESTEasy to create some Java based Restful webservices, and having a little trouble simply getting it to initiate once deployed.</p>\n<p>Note that I'm adding the RESTEasy annotations to a set of classes in an already working project that is deployed as an .ear file, that should be OK right? To be clear the package structure looks something like:</p>\n<pre><code>com.something.app\ncom.something.app.resteasyannotatedclasses\n</code></pre>\n<p>Now I am using no web.xml or any xml conf for that matter and only annotations as documented <a href=\"http://www.mastertheboss.com/jboss-frameworks/resteasy/resteasy-tutorial\" rel=\"nofollow noreferrer\">here</a></p>\n<p>I simply have two classes, the RESTEasy Activator:</p>\n<pre><code>@ApplicationPath(&quot;/coordinates&quot;)\npublic class RestEasyActivator extends Application {\n    RestEasyActivator () {\n        Logger.getAnonymousLogger().warning(&quot;RestEasyActivator Initialised Rest Easy.&quot;);\n    }\n}\n</code></pre>\n<p>And the actual service:</p>\n<pre><code>@Path(&quot;get&quot;)\npublic class CoordinatesServiceWrapper {\n    private static final Logger LOG = Logger.getLogger(CoordinatesServiceWrapper.class.getName());\n\n    @GET\n    @Path(&quot;getByName&quot;)\n    public String findCoordinates(){\n        LOG.info(&quot;Called coordinates service!&quot;);\n        return &quot;Hi&quot;;\n    }\n}\n</code></pre>\n<p>When the ear is deployed to WildFly I see the log:</p>\n<blockquote>\n<p>WARN  [org.jboss.weld.Bootstrap] (Weld Thread Pool -- 4) WELD-000167: Class org.jboss.resteasy.core.AsynchronousDispatcher is annotated with @RequestScoped but it does not declare an appropriate constructor therefore is not registered as a bean!</p>\n<p>WARN  [org.jboss.weld.Bootstrap] (Weld Thread Pool -- 1) WELD-000167: Class org.jboss.resteasy.plugins.providers.DocumentProvider is annotated with @ApplicationScoped but it does not declare an appropriate constructor therefore is not registered as a bean!</p>\n<p>INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 391) WFLYUT0021: Registered web context: '/CoordinateSearch' for server 'default-server'</p>\n<p>INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) WFLYSRV0010: Deployed &quot;CoordinateSearch.ear&quot; (runtime-name : &quot;CoordinateSearch.ear&quot;)</p>\n</blockquote>\n<p>Im guessing the warnings relating to RESTEasy are fine to ignore, and the info messages show that the .ear has successfully deployed.</p>\n<p>To invoke the webservice I've tried the URLS:</p>\n<blockquote>\n<p>Server:port/CoordinateSearch/coordinates/get/getByName/ and\nServer:port/coordinates/get/getByName/</p>\n</blockquote>\n<p>Neither of which generate any log entries.</p>\n<p>What am I missing...\nHave I missed some conf? - it seems very minimal. Based on the RESTEasy documentation <a href=\"https://docs.jboss.org/resteasy/docs/4.1.1.Final/userguide/html_single/index.html#resteasy_modules_in_wildfly\" rel=\"nofollow noreferrer\">here</a> WildFly comes with RESTEasy imported and it will bootstrap based on any classes containing annotations ...So I can't see the issue.</p>\n"},{"tags":["java","rest"],"answers":[{"tags":[],"owner":{"account_id":3436150,"reputation":622,"user_id":2879245,"accept_rate":71,"display_name":"Michał Marcinkowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677572085,"creation_date":1677572085,"answer_id":75589406,"question_id":75589041,"body_markdown":"\r\nI do not see any problems with idempotency in the last situation you&#39;ve described, even if the PUT from point 2. got called several times it is gonna create a new entity for the first time, and then just update the existing record. It seems rather then PUT misusage to create a new record, but to be fair, I wouldn&#39;t consider it as a problem.\r\n\r\nIn general it depends on your business case, needs etc. Normally if you try to use PUT to update non existing object, then API should return you an error about it and it is the client responsibility to determine what&#39;s next. Then depending on the business scenario you have to recreate the object with POST (and this is not same object anymore, because it will have another ID), or restore it from soft-delete state. Personally it is not a problem in any imaginable for me scenario. \r\n\r\nConcluding - all the approaches are still perfectly idempotent if you ask me.","title":"Does idempotence in Rest API PUT Method require the result to be the same up to ID?","body":"<p>I do not see any problems with idempotency in the last situation you've described, even if the PUT from point 2. got called several times it is gonna create a new entity for the first time, and then just update the existing record. It seems rather then PUT misusage to create a new record, but to be fair, I wouldn't consider it as a problem.</p>\n<p>In general it depends on your business case, needs etc. Normally if you try to use PUT to update non existing object, then API should return you an error about it and it is the client responsibility to determine what's next. Then depending on the business scenario you have to recreate the object with POST (and this is not same object anymore, because it will have another ID), or restore it from soft-delete state. Personally it is not a problem in any imaginable for me scenario.</p>\n<p>Concluding - all the approaches are still perfectly idempotent if you ask me.</p>\n"}],"owner":{"account_id":25905272,"reputation":113,"user_id":19630441,"display_name":"남혁준"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75589406,"answer_count":1,"score":2,"last_activity_date":1677572085,"creation_date":1677569650,"question_id":75589041,"body_markdown":"I studied the difference between PUT and PATCH.\r\n\r\nOf which I understood that if I use PUT, it creates the target if it doesn&#39;t exist and updates if it exists.\r\n\r\nOK, so far no problems.\r\n\r\nNow it&#39;s time to consider the idempotency problem.\r\n\r\nThe ID of each data is auto-generated or auto-incremented.\r\n\r\n\r\n1. Insert data using POST.\r\n\r\n2. Use PUT to change the data of the IDs just created.\r\n\r\n3. No matter how many times you try 2, the result is the same.\r\n\r\nNo problem!\r\n\r\nNow, let&#39;s assume that data is deleted in the middle.\r\n\r\n1. Insert data using POST.\r\n\r\n2. Use PUT to change the data of the IDs just created.\r\n\r\n3. I just used DELETE to delete the data of changed IDs.\r\n\r\n4. The moment you try number 2, data with a new ID is created.\r\n\r\n\r\nNow, it can no longer be seen as the same data.\r\n\r\nIs there any problem with idempotency in this situation?\r\n\r\nDo I need to recreate the same resource all the way to the ID to be idempotent ok?\r\n\r\nOr does it matter if only the valid data is the same except for the ID etc?","title":"Does idempotence in Rest API PUT Method require the result to be the same up to ID?","body":"<p>I studied the difference between PUT and PATCH.</p>\n<p>Of which I understood that if I use PUT, it creates the target if it doesn't exist and updates if it exists.</p>\n<p>OK, so far no problems.</p>\n<p>Now it's time to consider the idempotency problem.</p>\n<p>The ID of each data is auto-generated or auto-incremented.</p>\n<ol>\n<li><p>Insert data using POST.</p>\n</li>\n<li><p>Use PUT to change the data of the IDs just created.</p>\n</li>\n<li><p>No matter how many times you try 2, the result is the same.</p>\n</li>\n</ol>\n<p>No problem!</p>\n<p>Now, let's assume that data is deleted in the middle.</p>\n<ol>\n<li><p>Insert data using POST.</p>\n</li>\n<li><p>Use PUT to change the data of the IDs just created.</p>\n</li>\n<li><p>I just used DELETE to delete the data of changed IDs.</p>\n</li>\n<li><p>The moment you try number 2, data with a new ID is created.</p>\n</li>\n</ol>\n<p>Now, it can no longer be seen as the same data.</p>\n<p>Is there any problem with idempotency in this situation?</p>\n<p>Do I need to recreate the same resource all the way to the ID to be idempotent ok?</p>\n<p>Or does it matter if only the valid data is the same except for the ID etc?</p>\n"},{"tags":["java","mysql","spring-mvc","hibernate-mapping"],"owner":{"account_id":27897510,"reputation":1,"user_id":21302493,"display_name":"Amit Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677571978,"creation_date":1677571978,"question_id":75589382,"body_markdown":"  org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 3 in XML document from ServletContext resource [/WEB-INF/spring-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 3; columnNumber: 86; cvc-elt.1: Cannot find the declaration of element &#39;bean&#39;.\r\n\r\nwhy my beans file is not working  and I have mentioned my problem on the top.\r\n \r\n\r\nI have added my beans file and I am expecting resolution my query  hurry\r\n","title":"cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element &#39;global-method-security","body":"<p>org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 3 in XML document from ServletContext resource [/WEB-INF/spring-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 3; columnNumber: 86; cvc-elt.1: Cannot find the declaration of element 'bean'.</p>\n<p>why my beans file is not working  and I have mentioned my problem on the top.</p>\n<p>I have added my beans file and I am expecting resolution my query  hurry</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677572659,"post_id":75589357,"comment_id":133359551,"body_markdown":"imho the first one should work, although you might need an `SELECT c FROM` instead of just `from` as you are using an alias.","body":"imho the first one should work, although you might need an <code>SELECT c FROM</code> instead of just <code>from</code> as you are using an alias."}],"owner":{"account_id":19326316,"reputation":201,"user_id":14128881,"display_name":"Christopher Chua"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677571824,"creation_date":1677571824,"question_id":75589357,"body_markdown":"I am getting issues with `Could not locate ordinal parameter [0] expecting one of [1]` with below codes:\r\n\r\n    @Override\r\n        \tpublic T getModel(String propertyName, Object value) throws DAOException {\r\n        \t\tStringBuilder strQuery = new StringBuilder();\r\n        \t\tstrQuery.append(&quot;from &quot;);\r\n        \t\tstrQuery.append(getPersistentClass().getSimpleName());\r\n        \t\tstrQuery.append(&quot; as c where c.&quot;);\r\n        \t\tstrQuery.append(propertyName);\r\n        \t\tstrQuery.append(&quot;=:&quot;+propertyName);\r\n        \t\tQuery query = getHibernateSession().createQuery(strQuery.toString());\r\n        \t\tquery.setMaxResults(1);\r\n        \t\tquery.setParameter(propertyName, value);\r\n        \t\treturn (T) query.uniqueResult();\r\n        \t}\r\n\r\nI have also tried something like below codes but still getting the Could not locate ordinal parameter [0] expecting one of [1]: \r\n\r\n    @Override\r\n        public T getModel(String propertyName, Object value) throws DAOException {\r\n    \tStringBuilder strQuery = new StringBuilder();\r\n    \tstrQuery.append(&quot;from &quot;);\r\n    \tstrQuery.append(getPersistentClass().getSimpleName());\r\n    \tstrQuery.append(&quot; as c where c.&quot;);\r\n    \tstrQuery.append(propertyName);\r\n    \tstrQuery.append(&quot;=?1 &quot;);\r\n    \tQuery query = getHibernateSession().createQuery(strQuery.toString());\r\n    \tquery.setMaxResults(1);\r\n    \tquery.setParameter(1, value);\r\n    \treturn (T) query.uniqueResult();\r\n        }\r\n\r\nI tried to change the propertyName to &quot;propertyName&quot; such as:\r\n\r\n    @Override\r\n            public T getModel(String propertyName, Object value) throws DAOException {\r\n                StringBuilder strQuery = new StringBuilder();\r\n                strQuery.append(&quot;from &quot;);\r\n                strQuery.append(getPersistentClass().getSimpleName());\r\n                strQuery.append(&quot; as c where c.&quot;);\r\n                strQuery.append(propertyName);\r\n                strQuery.append(&quot;=:&quot;+propertyName);\r\n                Query query = getHibernateSession().createQuery(strQuery.toString());\r\n                query.setMaxResults(1);\r\n                query.setParameter(&quot;propertyName&quot;, value);\r\n                return (T) query.uniqueResult();\r\n            }\r\n\r\n   But I am facing a new error `Could not locate named parameter [propertyName], expecting one of [config_for]\\&quot;}}&quot;`\r\n\r\nMay I know how I can fix this ?","title":"Could not locate ordinal parameter [0] expecting one of [1]","body":"<p>I am getting issues with <code>Could not locate ordinal parameter [0] expecting one of [1]</code> with below codes:</p>\n<pre><code>@Override\n        public T getModel(String propertyName, Object value) throws DAOException {\n            StringBuilder strQuery = new StringBuilder();\n            strQuery.append(&quot;from &quot;);\n            strQuery.append(getPersistentClass().getSimpleName());\n            strQuery.append(&quot; as c where c.&quot;);\n            strQuery.append(propertyName);\n            strQuery.append(&quot;=:&quot;+propertyName);\n            Query query = getHibernateSession().createQuery(strQuery.toString());\n            query.setMaxResults(1);\n            query.setParameter(propertyName, value);\n            return (T) query.uniqueResult();\n        }\n</code></pre>\n<p>I have also tried something like below codes but still getting the Could not locate ordinal parameter [0] expecting one of [1]:</p>\n<pre><code>@Override\n    public T getModel(String propertyName, Object value) throws DAOException {\n    StringBuilder strQuery = new StringBuilder();\n    strQuery.append(&quot;from &quot;);\n    strQuery.append(getPersistentClass().getSimpleName());\n    strQuery.append(&quot; as c where c.&quot;);\n    strQuery.append(propertyName);\n    strQuery.append(&quot;=?1 &quot;);\n    Query query = getHibernateSession().createQuery(strQuery.toString());\n    query.setMaxResults(1);\n    query.setParameter(1, value);\n    return (T) query.uniqueResult();\n    }\n</code></pre>\n<p>I tried to change the propertyName to &quot;propertyName&quot; such as:</p>\n<pre><code>@Override\n        public T getModel(String propertyName, Object value) throws DAOException {\n            StringBuilder strQuery = new StringBuilder();\n            strQuery.append(&quot;from &quot;);\n            strQuery.append(getPersistentClass().getSimpleName());\n            strQuery.append(&quot; as c where c.&quot;);\n            strQuery.append(propertyName);\n            strQuery.append(&quot;=:&quot;+propertyName);\n            Query query = getHibernateSession().createQuery(strQuery.toString());\n            query.setMaxResults(1);\n            query.setParameter(&quot;propertyName&quot;, value);\n            return (T) query.uniqueResult();\n        }\n</code></pre>\n<p>But I am facing a new error <code>Could not locate named parameter [propertyName], expecting one of [config_for]\\&quot;}}&quot;</code></p>\n<p>May I know how I can fix this ?</p>\n"},{"tags":["java","spring-boot","hibernate","gradle","openapi-generator-cli"],"comments":[{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1676877332,"post_id":75455784,"comment_id":133218643,"body_markdown":"Did you try running with `--debug` or `--stacktrace` already to see possible errors?","body":"Did you try running with <code>--debug</code> or <code>--stacktrace</code> already to see possible errors?"},{"owner":{"account_id":2471260,"reputation":536,"user_id":4411598,"display_name":"jeet427"},"score":0,"creation_date":1677470374,"post_id":75455784,"comment_id":133337587,"body_markdown":"I did but could not see any related error logs. Looks like this annotationProcessor is not even invoked when openapi code generator on class path.","body":"I did but could not see any related error logs. Looks like this annotationProcessor is not even invoked when openapi code generator on class path."},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1677497476,"post_id":75455784,"comment_id":133342780,"body_markdown":"Maybe the openapi AP resolves a symbol that runs into compilation errors because the Hibernate AP hasn&#39;t run yet. Not sure how to tell Gradle the order of APs, but for `javac` the order of AP names on the command line does that job.","body":"Maybe the openapi AP resolves a symbol that runs into compilation errors because the Hibernate AP hasn&#39;t run yet. Not sure how to tell Gradle the order of APs, but for <code>javac</code> the order of AP names on the command line does that job."},{"owner":{"account_id":2471260,"reputation":536,"user_id":4411598,"display_name":"jeet427"},"score":0,"creation_date":1677570886,"post_id":75455784,"comment_id":133359102,"body_markdown":"That&#39;s possible. Thanks Christian Beikov, let me try to find something.","body":"That&#39;s possible. Thanks Christian Beikov, let me try to find something."},{"owner":{"account_id":5795637,"reputation":7297,"user_id":4571544,"display_name":"dekkard"},"score":0,"creation_date":1677615294,"post_id":75455784,"comment_id":133372261,"body_markdown":"Sharing a minimal reproducible example might get you the answer faster.","body":"Sharing a minimal reproducible example might get you the answer faster."},{"owner":{"account_id":2471260,"reputation":536,"user_id":4411598,"display_name":"jeet427"},"score":0,"creation_date":1681128357,"post_id":75455784,"comment_id":134002520,"body_markdown":"Just to conclude this, this has been automatically fixed without any change after upgrade to annotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.2.0.Final&quot;","body":"Just to conclude this, this has been automatically fixed without any change after upgrade to annotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.2.0.Final&quot;"}],"owner":{"account_id":2471260,"reputation":536,"user_id":4411598,"display_name":"jeet427"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1258,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1677571662,"creation_date":1676438792,"question_id":75455784,"body_markdown":"While upgrading the application to Spring boot 3 from Spring boot 2.7.7, I am facing a problem. I am not able to generate JPA static models using `hibernate-jpamodelgen:6.1.7.Final&quot;\r\n` when also using `openapi-generator-cli-6.3.0` to generate code for default controllers using api.yaml.\r\n\r\nThis does not generate hibernate static JPA models:\r\n\r\n\r\n```\r\n\r\nplugins {\r\n    id &quot;org.springframework.boot&quot; version &quot;3.0.2&quot;\r\n    id &quot;org.hibernate.orm&quot; version &quot;6.1.7.Final&quot;\r\n}\r\n.\r\n.\r\n.\r\n\r\ndependencies {\r\n    annotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\r\n\r\n    antlr group: &#39;org.antlr&#39;, name: &#39;antlr4&#39;, version: &#39;4.11.1&#39;\r\n.\r\n.\r\n.\r\n.\r\n.\r\n\r\n\r\n    testAnnotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\r\n\r\n  \r\n.\r\n.\r\n.\r\n.\r\n\r\n    swaggerCodegen group: &#39;org.openapitools&#39;, name: &#39;openapi-generator-cli&#39;, version: &#39;6.3.0&#39;\r\n\r\n}\r\n\r\ncompileJava {\r\n    dependsOn = [&#39;generateSwaggerCode&#39;, &#39;generateGrammarSource&#39;]\r\n    excludes = [&#39;**/TestController.java&#39;]\r\n}\r\n```\r\n\r\nThis works fine when I use swagger-codegen-cli-3.0.40.jar to generate code but JPA static model stops working without any error when used with openapi-generator-cli-6.3.0\r\n\r\nBelow code works fine:\r\n\r\n\r\n```\r\n\r\nplugins {\r\n    id &quot;org.springframework.boot&quot; version &quot;3.0.2&quot;\r\n    id &quot;org.hibernate.orm&quot; version &quot;6.1.7.Final&quot;\r\n}\r\n.\r\n.\r\n.\r\n\r\ndependencies {\r\n        annotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\r\n\r\n\r\n    antlr group: &#39;org.antlr&#39;, name: &#39;antlr4&#39;, version: &#39;4.11.1&#39;\r\n.\r\n.\r\n.\r\n.\r\n.\r\n\r\n    testAnnotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\r\n\r\n  \r\n.\r\n.\r\n.\r\n.\r\n\r\n    swaggerCodegen group: &#39;io.swagger.codegen.v3&#39;, name: &#39;swagger-codegen-cli&#39;, version: &#39;3.0.40&#39;\r\n    swaggerCodegen group: &#39;io.swagger.codegen.v3&#39;, name: &#39;swagger-codegen-generators&#39;, version: &#39;1.0.37&#39;\r\n}\r\n\r\ncompileJava {\r\n    dependsOn = [&#39;generateSwaggerCode&#39;, &#39;generateGrammarSource&#39;]\r\n    excludes = [&#39;**/TestController.java&#39;]\r\n}\r\n```","title":"Spring Boot 3 Upgrade - Jakarta EE - hibernate-jpamodelgen-jakarta and openapi-generator-cli-6.3.0 are not working as expected together","body":"<p>While upgrading the application to Spring boot 3 from Spring boot 2.7.7, I am facing a problem. I am not able to generate JPA static models using <code>hibernate-jpamodelgen:6.1.7.Final&quot; </code> when also using <code>openapi-generator-cli-6.3.0</code> to generate code for default controllers using api.yaml.</p>\n<p>This does not generate hibernate static JPA models:</p>\n<pre><code>\nplugins {\n    id &quot;org.springframework.boot&quot; version &quot;3.0.2&quot;\n    id &quot;org.hibernate.orm&quot; version &quot;6.1.7.Final&quot;\n}\n.\n.\n.\n\ndependencies {\n    annotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\n\n    antlr group: 'org.antlr', name: 'antlr4', version: '4.11.1'\n.\n.\n.\n.\n.\n\n\n    testAnnotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\n\n  \n.\n.\n.\n.\n\n    swaggerCodegen group: 'org.openapitools', name: 'openapi-generator-cli', version: '6.3.0'\n\n}\n\ncompileJava {\n    dependsOn = ['generateSwaggerCode', 'generateGrammarSource']\n    excludes = ['**/TestController.java']\n}\n</code></pre>\n<p>This works fine when I use swagger-codegen-cli-3.0.40.jar to generate code but JPA static model stops working without any error when used with openapi-generator-cli-6.3.0</p>\n<p>Below code works fine:</p>\n<pre><code>\nplugins {\n    id &quot;org.springframework.boot&quot; version &quot;3.0.2&quot;\n    id &quot;org.hibernate.orm&quot; version &quot;6.1.7.Final&quot;\n}\n.\n.\n.\n\ndependencies {\n        annotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\n\n\n    antlr group: 'org.antlr', name: 'antlr4', version: '4.11.1'\n.\n.\n.\n.\n.\n\n    testAnnotationProcessor &quot;org.hibernate.orm:hibernate-jpamodelgen:6.1.7.Final&quot;\n\n  \n.\n.\n.\n.\n\n    swaggerCodegen group: 'io.swagger.codegen.v3', name: 'swagger-codegen-cli', version: '3.0.40'\n    swaggerCodegen group: 'io.swagger.codegen.v3', name: 'swagger-codegen-generators', version: '1.0.37'\n}\n\ncompileJava {\n    dependsOn = ['generateSwaggerCode', 'generateGrammarSource']\n    excludes = ['**/TestController.java']\n}\n</code></pre>\n"},{"tags":["java","arrays","set"],"comments":[{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":1,"creation_date":1677506268,"post_id":75581332,"comment_id":133345351,"body_markdown":"and what if your source is { 2, 4, 345532342234 } ? this is beyond max integer value and will waste a lot of memory with null values in an array. a much better solution would be a Map&lt;Integer, Integer&gt; where you map each value to its position.","body":"and what if your source is { 2, 4, 345532342234 } ? this is beyond max integer value and will waste a lot of memory with null values in an array. a much better solution would be a Map&lt;Integer, Integer&gt; where you map each value to its position."},{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":1,"creation_date":1677506404,"post_id":75581332,"comment_id":133345391,"body_markdown":"make &quot;index&quot; final in your code. the compiler is afraid you will try to move it ;)","body":"make &quot;index&quot; final in your code. the compiler is afraid you will try to move it ;)"}],"answers":[{"tags":[],"owner":{"account_id":26037703,"reputation":305,"user_id":19742955,"display_name":"Jai Prakash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677506038,"creation_date":1677506038,"answer_id":75581369,"question_id":75581332,"body_markdown":"Logic: \r\n\r\nIn main class:\r\n\r\n    public static void main(String[] args) {\r\n    \t\tSet&lt;Integer&gt; source = new HashSet&lt;&gt;(Arrays.asList(2, 4, 5));\r\n    \t\tint max = Collections.max(source);\r\n    \t\tInteger[] result = new Integer[max + 1];\r\n    \r\n    \t\tint index = 0;\r\n    \t\tfor (Integer element : source) {\r\n    \t\t    result[element] = index++;\r\n    \t\t}\r\n    \t\tSystem.out.println(Arrays.toString(result));\r\n    }\r\n\r\nOutput:\r\n\r\n    [null, null, 0, null, 1, 2]","title":"Build array of indexes of set in java","body":"<p>Logic:</p>\n<p>In main class:</p>\n<pre><code>public static void main(String[] args) {\n        Set&lt;Integer&gt; source = new HashSet&lt;&gt;(Arrays.asList(2, 4, 5));\n        int max = Collections.max(source);\n        Integer[] result = new Integer[max + 1];\n\n        int index = 0;\n        for (Integer element : source) {\n            result[element] = index++;\n        }\n        System.out.println(Arrays.toString(result));\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>[null, null, 0, null, 1, 2]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22795094,"reputation":25,"user_id":16948779,"display_name":"Leah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677571272,"creation_date":1677571272,"answer_id":75589287,"question_id":75581332,"body_markdown":"Better and nicer solution:\r\n\r\n    static int[] getIndexArray(Set&lt;Integer&gt; sourceSet) {\r\n            final int[] resultArray = new int[sourceSet.max().get() + 1];\r\n            sourceSet.zipWithIndex().forEach(t -&gt; resultArray[t._1] = t._2);\r\n            return resultArray;\r\n        }\r\n\r\n","title":"Build array of indexes of set in java","body":"<p>Better and nicer solution:</p>\n<pre><code>static int[] getIndexArray(Set&lt;Integer&gt; sourceSet) {\n        final int[] resultArray = new int[sourceSet.max().get() + 1];\n        sourceSet.zipWithIndex().forEach(t -&gt; resultArray[t._1] = t._2);\n        return resultArray;\n    }\n</code></pre>\n"}],"owner":{"account_id":22795094,"reputation":25,"user_id":16948779,"display_name":"Leah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75589287,"answer_count":2,"score":0,"last_activity_date":1677571272,"creation_date":1677505772,"question_id":75581332,"body_markdown":"I have a Set of integers and I want to create an array which contains the index of each element in the source place, like this:\r\n\r\n    Set&lt;Integer&gt; source = {2,4,5};\r\n    \r\n**required result:**\r\n\r\n    Integer[] result = [null, null, 0, null, 1, 2]\r\n\r\nI tried this code but got an error: &quot;Variable used in lambda expression should be final or effectively final&quot;:\r\n\r\n    private Integer[] getIndexArray(Set&lt;Integer&gt; sourceSet) {\r\n            final Integer[] resultArray = new Integer[Constants.MAX_IDS];\r\n            Integer index = 0;\r\n            sourceSet.forEach(id -&gt; resultArray[id] = index++);\r\n            return resultArray;\r\n        }","title":"Build array of indexes of set in java","body":"<p>I have a Set of integers and I want to create an array which contains the index of each element in the source place, like this:</p>\n<pre><code>Set&lt;Integer&gt; source = {2,4,5};\n</code></pre>\n<p><strong>required result:</strong></p>\n<pre><code>Integer[] result = [null, null, 0, null, 1, 2]\n</code></pre>\n<p>I tried this code but got an error: &quot;Variable used in lambda expression should be final or effectively final&quot;:</p>\n<pre><code>private Integer[] getIndexArray(Set&lt;Integer&gt; sourceSet) {\n        final Integer[] resultArray = new Integer[Constants.MAX_IDS];\n        Integer index = 0;\n        sourceSet.forEach(id -&gt; resultArray[id] = index++);\n        return resultArray;\n    }\n</code></pre>\n"},{"tags":["java","jdbc","vert.x","jooq","r2dbc"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677571242,"creation_date":1677571242,"answer_id":75589282,"question_id":75579198,"body_markdown":"This isn&#39;t really jOOQ specific, although jOOQ helps you easily switch between JDBC and R2DBC drivers, without changing your client code. Logically, the switch should indeed not have too many effects, apart from the fact that there are always edge cases and bugs, especially in the R2DBC ecosystem, which isn&#39;t as mature as JDBC yet, and also jOOQ itself, given how hard it is to write correct reactive (or any concurrent) code.\r\n\r\nThe main value of R2DBC over JDBC, however, is that it allows for possibly reactive-capable wire protocols to push data to clients directly from within the database, whereas with JDBC, the client will always block *somewhere*.\r\n\r\nWhether this actually has any tangible effects on your application is best measured by yourself in a real world scenario, after getting a feel of the reactive APIs themselves (which impose their own cognitive hurdles). Another benefit of jOOQ&#39;s design is that you can simply do this on a production (or integration test, benchmark, etc) workload, switching drivers, once you use jOOQ&#39;s `Publisher` API. I don&#39;t think there&#39;s anything proven or even fool proof in this area.\r\n\r\nIn the long run, scalability problems should be addressed by Loom in a more transparent way, for all implementations, including JDBC. My expectation here is that with the advent of Loom, the reactive programming model will go back to being mainly about the programming model (push instead of pull), rather than about scaling.","title":"Difference between using JDBC and R2DBC connection for Jooq","body":"<p>This isn't really jOOQ specific, although jOOQ helps you easily switch between JDBC and R2DBC drivers, without changing your client code. Logically, the switch should indeed not have too many effects, apart from the fact that there are always edge cases and bugs, especially in the R2DBC ecosystem, which isn't as mature as JDBC yet, and also jOOQ itself, given how hard it is to write correct reactive (or any concurrent) code.</p>\n<p>The main value of R2DBC over JDBC, however, is that it allows for possibly reactive-capable wire protocols to push data to clients directly from within the database, whereas with JDBC, the client will always block <em>somewhere</em>.</p>\n<p>Whether this actually has any tangible effects on your application is best measured by yourself in a real world scenario, after getting a feel of the reactive APIs themselves (which impose their own cognitive hurdles). Another benefit of jOOQ's design is that you can simply do this on a production (or integration test, benchmark, etc) workload, switching drivers, once you use jOOQ's <code>Publisher</code> API. I don't think there's anything proven or even fool proof in this area.</p>\n<p>In the long run, scalability problems should be addressed by Loom in a more transparent way, for all implementations, including JDBC. My expectation here is that with the advent of Loom, the reactive programming model will go back to being mainly about the programming model (push instead of pull), rather than about scaling.</p>\n"}],"owner":{"account_id":8489798,"reputation":86,"user_id":6366526,"display_name":"SantaClara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677571242,"creation_date":1677493202,"question_id":75579198,"body_markdown":"The documentation for Reactive Fetching in Jooq mentions:\r\n\r\n&gt; Out of the box, all jOOQ provided publishers will block on the underlying JDBC connection, but if you provide jOOQ with a io.r2dbc.spi.Connection or io.r2dbc.spi.ConnectionFactory, then the publishers will execute queries in a non-blocking fashion on an R2DBC driver.\r\n\r\nI am trying to understand what is the difference between using the `io.r2dbc.spi.Connection` and `java.sql.Connection` when we are already wrapping the publisher in `fromPublisher` methods available in the rx-java.\r\n\r\nFor example (the code is identical for both R2DBC and JDBC, only the context `ctx` is constructed differently):\r\n```java\r\nFlowable.fromPublisher(ctx.select(...).where(...)).subscribe(...);\r\n```\r\n\r\nIf this code is being run on Thread 1, it shouldn&#39;t immediately block that thread in either case (because it&#39;s a Flowable created from the publisher provided by jooq).\r\n\r\nBut then, in the JDBC case, will it later block the same Thread 1, or some other thread?\r\n\r\nMy current understanding, based on https://github.com/r2dbc/r2dbc-spi/issues/162#issuecomment-598908146 is that R2DBC reduces the number of threads required as compared to JDBC for an equivalent number of simultaneous DB connections.\r\n\r\nIs this understanding correct and complete?\r\n\r\nFor more context, we&#39;re using Vertx + jooq + R2DBC and are trying to evaluate whether it&#39;s possible to write a scalable system using JDBC instead of R2DBC.","title":"Difference between using JDBC and R2DBC connection for Jooq","body":"<p>The documentation for Reactive Fetching in Jooq mentions:</p>\n<blockquote>\n<p>Out of the box, all jOOQ provided publishers will block on the underlying JDBC connection, but if you provide jOOQ with a io.r2dbc.spi.Connection or io.r2dbc.spi.ConnectionFactory, then the publishers will execute queries in a non-blocking fashion on an R2DBC driver.</p>\n</blockquote>\n<p>I am trying to understand what is the difference between using the <code>io.r2dbc.spi.Connection</code> and <code>java.sql.Connection</code> when we are already wrapping the publisher in <code>fromPublisher</code> methods available in the rx-java.</p>\n<p>For example (the code is identical for both R2DBC and JDBC, only the context <code>ctx</code> is constructed differently):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flowable.fromPublisher(ctx.select(...).where(...)).subscribe(...);\n</code></pre>\n<p>If this code is being run on Thread 1, it shouldn't immediately block that thread in either case (because it's a Flowable created from the publisher provided by jooq).</p>\n<p>But then, in the JDBC case, will it later block the same Thread 1, or some other thread?</p>\n<p>My current understanding, based on <a href=\"https://github.com/r2dbc/r2dbc-spi/issues/162#issuecomment-598908146\" rel=\"nofollow noreferrer\">https://github.com/r2dbc/r2dbc-spi/issues/162#issuecomment-598908146</a> is that R2DBC reduces the number of threads required as compared to JDBC for an equivalent number of simultaneous DB connections.</p>\n<p>Is this understanding correct and complete?</p>\n<p>For more context, we're using Vertx + jooq + R2DBC and are trying to evaluate whether it's possible to write a scalable system using JDBC instead of R2DBC.</p>\n"},{"tags":["java","spring","mongodb","spring-data-jpa","database-indexes"],"comments":[{"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"score":0,"creation_date":1615551166,"post_id":66599673,"comment_id":117732019,"body_markdown":"What does &quot;skip&quot; mean? Provide some context. Why don&#39;t you use `try catch` and ignore the `Exception`?","body":"What does &quot;skip&quot; mean? Provide some context. Why don&#39;t you use <code>try catch</code> and ignore the <code>Exception</code>?"},{"owner":{"account_id":9992410,"reputation":460,"user_id":8710383,"display_name":"Oleksandr"},"score":0,"creation_date":1615551642,"post_id":66599673,"comment_id":117732234,"body_markdown":"@BenjaminM updated descriptions, thanks.\nI can do this with your approach, but all documents will be processed one by one, thus there will be &quot;n&quot; requests for documents with size &quot;n&quot;, but I would like to do this at the configuration level and with a single request for all documents","body":"@BenjaminM updated descriptions, thanks. I can do this with your approach, but all documents will be processed one by one, thus there will be &quot;n&quot; requests for documents with size &quot;n&quot;, but I would like to do this at the configuration level and with a single request for all documents"}],"answers":[{"tags":[],"owner":{"account_id":355556,"reputation":539,"user_id":694560,"display_name":"Jozef Vaclavik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677570813,"creation_date":1677570057,"answer_id":75589102,"question_id":66599673,"body_markdown":"In my case I have an unique index and I&#39;m trying to upsert documents as: Insert new ones, and skip existing ones.\r\n\r\nDocumentation is missing this or doesn&#39;t say it explicitely, but you need to set up `ordered: false`. In this case it will continue with operations and return list of exceptions at the end.\r\n\r\n```ruby\r\nMyModel.collection.bulk_write(\r\n  [\r\n    { update_one: { filter: {...}, update: { &#39;$set&#39; =&gt; {...}, upsert: true } },\r\n    { update_one: { filter: {...}, update: { &#39;$set&#39; =&gt; {...}, upsert: true } },\r\n    { update_one: { filter: {...}, update: { &#39;$set&#39; =&gt; {...}, upsert: true } },\r\n    ...\r\n  ],\r\n  ordered: false\r\n)\r\n```\r\nAnd at the end you will get back error like this:\r\n```\r\nMultiple errors:\r\n[11000]: E11000 duplicate key error collection: my_database.my_collection index: my_unique_index dup key: { ... };\r\n[11000]: E11000 duplicate key error collection: my_database.my_collection index: my_unique_index dup key: { ... };\r\n(Mongo::Error::BulkWriteError)\r\n\r\n```\r\n&gt; I had to format that output a bit coz otherwise it comes as a single long line. Also my sample is in Ruby, but it should be same everywhere.\r\n\r\nI&#39;m not sure if this is desired behavior or a side-effect, but it works.","title":"MongoDB override or skip existing document with Unique Index","body":"<p>In my case I have an unique index and I'm trying to upsert documents as: Insert new ones, and skip existing ones.</p>\n<p>Documentation is missing this or doesn't say it explicitely, but you need to set up <code>ordered: false</code>. In this case it will continue with operations and return list of exceptions at the end.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>MyModel.collection.bulk_write(\n  [\n    { update_one: { filter: {...}, update: { '$set' =&gt; {...}, upsert: true } },\n    { update_one: { filter: {...}, update: { '$set' =&gt; {...}, upsert: true } },\n    { update_one: { filter: {...}, update: { '$set' =&gt; {...}, upsert: true } },\n    ...\n  ],\n  ordered: false\n)\n</code></pre>\n<p>And at the end you will get back error like this:</p>\n<pre><code>Multiple errors:\n[11000]: E11000 duplicate key error collection: my_database.my_collection index: my_unique_index dup key: { ... };\n[11000]: E11000 duplicate key error collection: my_database.my_collection index: my_unique_index dup key: { ... };\n(Mongo::Error::BulkWriteError)\n\n</code></pre>\n<blockquote>\n<p>I had to format that output a bit coz otherwise it comes as a single long line. Also my sample is in Ruby, but it should be same everywhere.</p>\n</blockquote>\n<p>I'm not sure if this is desired behavior or a side-effect, but it works.</p>\n"}],"owner":{"account_id":9992410,"reputation":460,"user_id":8710383,"display_name":"Oleksandr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677570813,"creation_date":1615550987,"question_id":66599673,"body_markdown":"I have a Spring Boot application with Spring Data. Also, I have a collection in MongoDB. The collection contains a few fields and I created an index with the UNIQUE flag by 3 fields, for example: name + surname + age.\r\n\r\nWhen I insert documents with the following Java format `repository.saveAll(list)`, and my collection already contains part of these documents - Mongo throws an Exception in my face like: \r\n\r\n&gt; Bulk write operation error on server localhost. Write errors: [BulkWriteError{index=0, code=11000, message=&#39;E11000 duplicate key error collection: myCollection.name index: name_1_surname_1_age_1 dup key\r\n\r\n\r\nIt&#39;s expected behavior, but I need to configure Mongo with the following logic:\r\n - When inserting multiple documents, and the index says &quot;some documents already exist in the collection&quot; - ignore such documents, or skip them, or just override without any exceptions.\r\n\r\nIs it possible? It&#39;s important for me to do it with multiple documents at the same time.\r\n\r\nDo you have some idea how to do this? As a better result, I would like to use some properties or additional flag without custom queries.\r\nThanks.\r\n","title":"MongoDB override or skip existing document with Unique Index","body":"<p>I have a Spring Boot application with Spring Data. Also, I have a collection in MongoDB. The collection contains a few fields and I created an index with the UNIQUE flag by 3 fields, for example: name + surname + age.</p>\n<p>When I insert documents with the following Java format <code>repository.saveAll(list)</code>, and my collection already contains part of these documents - Mongo throws an Exception in my face like:</p>\n<blockquote>\n<p>Bulk write operation error on server localhost. Write errors: [BulkWriteError{index=0, code=11000, message='E11000 duplicate key error collection: myCollection.name index: name_1_surname_1_age_1 dup key</p>\n</blockquote>\n<p>It's expected behavior, but I need to configure Mongo with the following logic:</p>\n<ul>\n<li>When inserting multiple documents, and the index says &quot;some documents already exist in the collection&quot; - ignore such documents, or skip them, or just override without any exceptions.</li>\n</ul>\n<p>Is it possible? It's important for me to do it with multiple documents at the same time.</p>\n<p>Do you have some idea how to do this? As a better result, I would like to use some properties or additional flag without custom queries.\nThanks.</p>\n"},{"tags":["javascript","java","graaljs"],"answers":[{"tags":[],"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677570752,"creation_date":1677570752,"answer_id":75589210,"question_id":75548543,"body_markdown":"Well, talking to the Graal.js people on their slack channel led to this insight from Jan Štola :\r\n\r\n&gt; We handle Java objects in the same way as JavaScript objects in JavaScript code. This means that we perform ToPrimitive() conversion when + operator is used. ToPrimitive(o) attempts to invoke o.valueOf() to convert o to a primitive value. If this call does not return a primitive value then it invokes o.toString(). So, one possibility is to add valueOf() methods into your classes (and return something like doubleValue() there).\r\n\r\nSo adding a `valueOf`-method solved that problem. \r\n\r\nJan also added a solution if you cannot modify the existing class:\r\n\r\n&gt; If you don&#39;t want to modify your classes then you can define valueOf() method on foreign object prototype (FOP). Every non-JavaScript object (like Java object) has FOP object as its prototype. So, when valueOf() method is not defined on the Java object itself then FOP object is searched for this method.\r\nHence, you can use something like\r\nvar FOP = Object.getPrototypeOf(new java.lang.Object());\r\nFOP.valueOf = function() {\r\n  return (this instanceof java.lang.Number) ? this.doubleValue() : Object.prototype.valueOf.call(this);\r\n}\r\nto ensure that subclasses of java.lang.Number will be converted to the desired value in ToPrimitive() conversion.\r\n\r\nChristian Humer added an implementation as well. ","title":"How can I get Graal.js to handle a custom numeric Java type?","body":"<p>Well, talking to the Graal.js people on their slack channel led to this insight from Jan Štola :</p>\n<blockquote>\n<p>We handle Java objects in the same way as JavaScript objects in JavaScript code. This means that we perform ToPrimitive() conversion when + operator is used. ToPrimitive(o) attempts to invoke o.valueOf() to convert o to a primitive value. If this call does not return a primitive value then it invokes o.toString(). So, one possibility is to add valueOf() methods into your classes (and return something like doubleValue() there).</p>\n</blockquote>\n<p>So adding a <code>valueOf</code>-method solved that problem.</p>\n<p>Jan also added a solution if you cannot modify the existing class:</p>\n<blockquote>\n<p>If you don't want to modify your classes then you can define valueOf() method on foreign object prototype (FOP). Every non-JavaScript object (like Java object) has FOP object as its prototype. So, when valueOf() method is not defined on the Java object itself then FOP object is searched for this method.\nHence, you can use something like\nvar FOP = Object.getPrototypeOf(new java.lang.Object());\nFOP.valueOf = function() {\nreturn (this instanceof java.lang.Number) ? this.doubleValue() : Object.prototype.valueOf.call(this);\n}\nto ensure that subclasses of java.lang.Number will be converted to the desired value in ToPrimitive() conversion.</p>\n</blockquote>\n<p>Christian Humer added an implementation as well.</p>\n"}],"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677570752,"creation_date":1677174695,"question_id":75548543,"body_markdown":"To dive in, we have an app where we have had Nashorn embedded. \r\nWith 17 I&#39;m replacing it with GraalJS and there are some issues.&lt;br&gt;\r\nThe current one is where I want GraalJS treat a custom class as an int (or double)for the purpose of basic arithmetic (+,- and so on). Right now, Graal.js can&#39;t make head or tails of it so it just calls the `toString` method which isn&#39;t optimal. &lt;br&gt;With Nashorn it sufficed to extend `java.lang.Number` but that doesn&#39;t seem to work here.&lt;br&gt; I&#39;ve looked in the interpreter code (I can&#39;t find any relevant docs) and that shows that Graal.js can handle the various `java.lang` classes but I can&#39;t figure out how to make it use custom classes. \r\n\r\nThe custom class has a lot of other func as well so I can&#39;t throw it away and we have a large installed base of JS code that uses the custom class(es).\r\n\r\nThe JS code : `function(e){print(e.id + 1)}` where `e` is an object and `id` is a custom type (`JSNumber` that extends `Number`). \r\n\r\nWith Nashorn this worked (ie if id = 1, the result would be 2).&lt;br&gt;\r\nBut, with Graal.js `id` is treated like a String and we get string concatenation instead, the result is `12`.\r\n\r\nAny links, hints or tips welcome!\r\n\r\nAddendum: this seems to be what I&#39;m looking for : https://www.graalvm.org/latest/reference-manual/js/OperatorOverloading/ or what I want to achieve.","title":"How can I get Graal.js to handle a custom numeric Java type?","body":"<p>To dive in, we have an app where we have had Nashorn embedded.\nWith 17 I'm replacing it with GraalJS and there are some issues.<br>\nThe current one is where I want GraalJS treat a custom class as an int (or double)for the purpose of basic arithmetic (+,- and so on). Right now, Graal.js can't make head or tails of it so it just calls the <code>toString</code> method which isn't optimal. <br>With Nashorn it sufficed to extend <code>java.lang.Number</code> but that doesn't seem to work here.<br> I've looked in the interpreter code (I can't find any relevant docs) and that shows that Graal.js can handle the various <code>java.lang</code> classes but I can't figure out how to make it use custom classes.</p>\n<p>The custom class has a lot of other func as well so I can't throw it away and we have a large installed base of JS code that uses the custom class(es).</p>\n<p>The JS code : <code>function(e){print(e.id + 1)}</code> where <code>e</code> is an object and <code>id</code> is a custom type (<code>JSNumber</code> that extends <code>Number</code>).</p>\n<p>With Nashorn this worked (ie if id = 1, the result would be 2).<br>\nBut, with Graal.js <code>id</code> is treated like a String and we get string concatenation instead, the result is <code>12</code>.</p>\n<p>Any links, hints or tips welcome!</p>\n<p>Addendum: this seems to be what I'm looking for : <a href=\"https://www.graalvm.org/latest/reference-manual/js/OperatorOverloading/\" rel=\"nofollow noreferrer\">https://www.graalvm.org/latest/reference-manual/js/OperatorOverloading/</a> or what I want to achieve.</p>\n"},{"tags":["java","spring","hibernate"],"owner":{"account_id":21441190,"reputation":95,"user_id":15795728,"display_name":"sunny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677570554,"creation_date":1677570554,"question_id":75589182,"body_markdown":"I&#39;m using Grails, but it&#39;s probably a hibernate/spring problem - I have my `Product` domain, and wanted to make `ManyToOne` association between `Product` and `ProductGroup`, but wanted to keep the column name as `productFamily`.\r\n\r\n```\r\nclass Product implements Comparable, Serializable {\r\n\r\n    // Base product information\r\n    String id\r\n\r\n    ...\r\n\r\n    ProductGroup productFamily\r\n\r\n\r\n    static mapping = {\r\n        id generator: &#39;uuid&#39;\r\n        cache true\r\n        productFamily joinTable: [name: &#39;product_group&#39;, column: &#39;product_group_id&#39;, key: &#39;product_id&#39;]\r\n    }\r\n```\r\n\r\nThe problem is when I&#39;m doing some HQL/SQL queries, e.g.:\r\n```\r\n&quot;&quot;&quot;\r\n\tselect pxyz.product\r\n\tfrom ProductXYZ pxyz\r\n\twhere pxyz.something = :something\r\n\tgroup by pxyz.product\r\n&quot;&quot;&quot;\r\n```\r\n\r\nit generates a query that corresponds to `product_family`, not the `product_group`.\r\n\r\nWhat should I add/change?","title":"Naming column differently than the class name and getting &quot;Unknown column in field list&quot;","body":"<p>I'm using Grails, but it's probably a hibernate/spring problem - I have my <code>Product</code> domain, and wanted to make <code>ManyToOne</code> association between <code>Product</code> and <code>ProductGroup</code>, but wanted to keep the column name as <code>productFamily</code>.</p>\n<pre><code>class Product implements Comparable, Serializable {\n\n    // Base product information\n    String id\n\n    ...\n\n    ProductGroup productFamily\n\n\n    static mapping = {\n        id generator: 'uuid'\n        cache true\n        productFamily joinTable: [name: 'product_group', column: 'product_group_id', key: 'product_id']\n    }\n</code></pre>\n<p>The problem is when I'm doing some HQL/SQL queries, e.g.:</p>\n<pre><code>&quot;&quot;&quot;\n    select pxyz.product\n    from ProductXYZ pxyz\n    where pxyz.something = :something\n    group by pxyz.product\n&quot;&quot;&quot;\n</code></pre>\n<p>it generates a query that corresponds to <code>product_family</code>, not the <code>product_group</code>.</p>\n<p>What should I add/change?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9379,"page":613,"page_size":100}
