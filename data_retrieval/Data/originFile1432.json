{"items":[{"tags":["java","servlets","concurrency","synchronization"],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649885608,"creation_date":1649879710,"answer_id":71863210,"question_id":71862701,"body_markdown":"\r\nUsing synchronized should be unnecessary. For instance, Tomcat stores attributes in a threadsafe data structure (a ConcurrentHashMap). Obviously not every servlet container is open source allowing us to check on what it&#39;s doing, but we do know that  servlets are necessarily getting traversed concurrently by many threads and any kind of attribute updating you do needs to be done in a threadsafe way, so it makes sense that the servlet container should handle it. \r\n\r\n\r\nIf you did need to do this, just using synchronized on the setter would not be adequate, because that wouldn&#39;t in itself make the change visible to other threads reading that attribute. You would also need synchronize on the code reading that attribute. Again, as an application developer this isn&#39;t something in your control, as the implementation of how that attribute is stored and accessed is up to the app server. \r\n\r\nFor how you figure out what is safe and what isn&#39;t, there is a relevant passage in Java Concurrency in Practice, section 4.5.1: Interpreting  Vague Documentation:\r\n\r\n&gt; Since it is impossible to imagine a single-threaded context in which these objects would be useful, one has to assume that they have been made thread-safe, even though the specification does not explicitly require this. Besides, if they required client-side locking, on what lock should the client code synchronize? The documentation doesn&#39;t say, and it seems absurd to guess. This &quot;reasonable assumption&quot; is further bolstered by the examples in the specification and official tutorials that show how to access `ServletContext` or `HttpSession` and do not use any client-side synchronization.\r\n\r\nThis is assuming the question is about synchronizing on the ServletContext. The issue of the thread safety of the objects you put in the ServletContext is the application developer&#39;s responsibility, not the servlet container&#39;s. Putting synchronized on the setAttribute method doesn&#39;t help for that, either. \r\n","title":"If we synchronise a block of code say setAttribute(&quot;var1&quot;,obj1) in Servlet then will other user be able to access that resource","body":"<p>Using synchronized should be unnecessary. For instance, Tomcat stores attributes in a threadsafe data structure (a ConcurrentHashMap). Obviously not every servlet container is open source allowing us to check on what it's doing, but we do know that  servlets are necessarily getting traversed concurrently by many threads and any kind of attribute updating you do needs to be done in a threadsafe way, so it makes sense that the servlet container should handle it.</p>\n<p>If you did need to do this, just using synchronized on the setter would not be adequate, because that wouldn't in itself make the change visible to other threads reading that attribute. You would also need synchronize on the code reading that attribute. Again, as an application developer this isn't something in your control, as the implementation of how that attribute is stored and accessed is up to the app server.</p>\n<p>For how you figure out what is safe and what isn't, there is a relevant passage in Java Concurrency in Practice, section 4.5.1: Interpreting  Vague Documentation:</p>\n<blockquote>\n<p>Since it is impossible to imagine a single-threaded context in which these objects would be useful, one has to assume that they have been made thread-safe, even though the specification does not explicitly require this. Besides, if they required client-side locking, on what lock should the client code synchronize? The documentation doesn't say, and it seems absurd to guess. This &quot;reasonable assumption&quot; is further bolstered by the examples in the specification and official tutorials that show how to access <code>ServletContext</code> or <code>HttpSession</code> and do not use any client-side synchronization.</p>\n</blockquote>\n<p>This is assuming the question is about synchronizing on the ServletContext. The issue of the thread safety of the objects you put in the ServletContext is the application developer's responsibility, not the servlet container's. Putting synchronized on the setAttribute method doesn't help for that, either.</p>\n"}],"owner":{"account_id":15689183,"reputation":55,"user_id":11320852,"display_name":"krr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1649885608,"creation_date":1649876832,"question_id":71862701,"body_markdown":"If we synchronise a block of code say setAttribute(&quot;var1&quot;,obj1) in Servlet then will other user be able to access that resource. If they won&#39;t be able to access it then does it mean the other user needs to wait a considerable amount of time?","title":"If we synchronise a block of code say setAttribute(&quot;var1&quot;,obj1) in Servlet then will other user be able to access that resource","body":"<p>If we synchronise a block of code say setAttribute(&quot;var1&quot;,obj1) in Servlet then will other user be able to access that resource. If they won't be able to access it then does it mean the other user needs to wait a considerable amount of time?</p>\n"},{"tags":["java","linux","bioinformatics"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1649883394,"post_id":71863739,"comment_id":126991555,"body_markdown":"What does `free` in Ubuntu give you as free space? Especially the &quot;available&quot; column is of interest","body":"What does <code>free</code> in Ubuntu give you as free space? Especially the &quot;available&quot; column is of interest"},{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":2,"creation_date":1649883525,"post_id":71863739,"comment_id":126991596,"body_markdown":"WSL defaults to 50% of the available Windows memory.  You can&#39;t allocate 10GB on a 12GB machine.","body":"WSL defaults to 50% of the available Windows memory.  You can&#39;t allocate 10GB on a 12GB machine."},{"owner":{"account_id":24930231,"reputation":1,"user_id":18797445,"display_name":"syrenawhitner"},"score":0,"creation_date":1649978109,"post_id":71863739,"comment_id":127016621,"body_markdown":"total        used            free        shared     buff/cache   available\nMem:        5978616      258160     2313824         124     3406632     5427552\nSwap:       2097152       20616     2076536","body":"total        used            free        shared     buff/cache   available Mem:        5978616      258160     2313824         124     3406632     5427552 Swap:       2097152       20616     2076536"},{"owner":{"account_id":24930231,"reputation":1,"user_id":18797445,"display_name":"syrenawhitner"},"score":0,"creation_date":1649978148,"post_id":71863739,"comment_id":127016628,"body_markdown":"It pasted strange, but the &quot;available&quot; column gives me 5427552","body":"It pasted strange, but the &quot;available&quot; column gives me 5427552"}],"owner":{"account_id":24930231,"reputation":1,"user_id":18797445,"display_name":"syrenawhitner"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1649938611,"answer_count":0,"score":0,"last_activity_date":1649885498,"creation_date":1649883168,"question_id":71863739,"body_markdown":"I am trying to run PhyloFlash on a a linux system (ubuntu) and I am receiving the following error:\r\n```none\r\n# There is insufficient memory for the Java Runtime Environment to continue.\r\n# Native memory allocation (mmap) failed to map 10737418240 bytes for committing reserved memory.\r\n# An error report file with more information is saved as:\r\n# /home/syrenawhitner/phyloFlash-pf3.4/hs_err_pid10007.log\r\n```\r\nI am running Ubuntu on a WSL subsystem on windows 11, with an i7 processor, 12GB RAM, and 377GB free on my SSD. I have a feeling I need to make sure Ubuntu can access this memory, but I am not sure how to go about this, or troubleshoot this issue in general. \r\n\r\nIf anybody can assist me with this process moving forward that would be greatly appreciated. \r\n\r\nThanks,\r\nSyrena","title":"&quot;insufficient memory for the Java Runtime Environment to continue&quot; Ubuntu running phyloflash","body":"<p>I am trying to run PhyloFlash on a a linux system (ubuntu) and I am receiving the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code># There is insufficient memory for the Java Runtime Environment to continue.\n# Native memory allocation (mmap) failed to map 10737418240 bytes for committing reserved memory.\n# An error report file with more information is saved as:\n# /home/syrenawhitner/phyloFlash-pf3.4/hs_err_pid10007.log\n</code></pre>\n<p>I am running Ubuntu on a WSL subsystem on windows 11, with an i7 processor, 12GB RAM, and 377GB free on my SSD. I have a feeling I need to make sure Ubuntu can access this memory, but I am not sure how to go about this, or troubleshoot this issue in general.</p>\n<p>If anybody can assist me with this process moving forward that would be greatly appreciated.</p>\n<p>Thanks,\nSyrena</p>\n"},{"tags":["java","spring","multithreading"],"comments":[{"owner":{"account_id":11533121,"reputation":136,"user_id":8451481,"display_name":"Ishraaq Parvez"},"score":0,"creation_date":1649770447,"post_id":71843639,"comment_id":126956367,"body_markdown":"See this - https://www.geeksforgeeks.org/killing-threads-in-java/","body":"See this - <a href=\"https://www.geeksforgeeks.org/killing-threads-in-java/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/killing-threads-in-java</a>"},{"owner":{"account_id":15293172,"reputation":1557,"user_id":11034109,"display_name":"Dhanuesh"},"score":0,"creation_date":1649770957,"post_id":71843639,"comment_id":126956579,"body_markdown":"thanks for the reference, but im well aware of how to pause it but not sure how to resume the execution from a different thread and also not sure of how to save any execution results","body":"thanks for the reference, but im well aware of how to pause it but not sure how to resume the execution from a different thread and also not sure of how to save any execution results"}],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649885289,"creation_date":1649825369,"answer_id":71852026,"question_id":71843639,"body_markdown":"It sounds like you shouldn&#39;t be pausing anything. Instead have one set of threads creating the intermediate results and saving them somewhere. Then have another set of threads that find these intermediate results and do whatever with them. \r\n\r\nThere isn&#39;t one right answer about how to save them in general, it depends on the context. But it would make sense to use some kind of queue for this. \r\n\r\nThis producer-consumer setup can be seen as a way for a thread to resume a task begun by another thread. The intermediate result can include information to indicate what step the task needs to be begun from. The queue&#39;s contents can be saved so that they can be restored after bringing the system down and back up so that pending items can get completed. \r\n\r\nI have seen what happens when using a scheduler to progress tasks. The system alternates between idly wasting cycles to overloading on work. When the timer fires it throws new work at the system regardless of whether there is capacity. Using Queues instead allows back pressure to prevent overload, and lets the threads work at a steady pace. ","title":"Pause and Resume Thread","body":"<p>It sounds like you shouldn't be pausing anything. Instead have one set of threads creating the intermediate results and saving them somewhere. Then have another set of threads that find these intermediate results and do whatever with them.</p>\n<p>There isn't one right answer about how to save them in general, it depends on the context. But it would make sense to use some kind of queue for this.</p>\n<p>This producer-consumer setup can be seen as a way for a thread to resume a task begun by another thread. The intermediate result can include information to indicate what step the task needs to be begun from. The queue's contents can be saved so that they can be restored after bringing the system down and back up so that pending items can get completed.</p>\n<p>I have seen what happens when using a scheduler to progress tasks. The system alternates between idly wasting cycles to overloading on work. When the timer fires it throws new work at the system regardless of whether there is capacity. Using Queues instead allows back pressure to prevent overload, and lets the threads work at a steady pace.</p>\n"}],"owner":{"account_id":15293172,"reputation":1557,"user_id":11034109,"display_name":"Dhanuesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1649885289,"creation_date":1649770312,"question_id":71843639,"body_markdown":"Say we have a thread processing certain instructions and hence creating intermediary result objects, is there any way to pause this thread and later create a new thread to resume from where the previous thread has stopped?\r\n\r\nArbitrary Example:\r\n```\r\nResult result1 = foo();\r\nResult result2 = fooAgain();\r\n\r\nif(someCondition){\r\n   // save everything thats been computed so far and release this thread\r\n}\r\n\r\nResult result3 = notFoo();\r\n\r\n// end of the method\r\n```\r\n\r\n```\r\n// in a quartz scheduler or something\r\n\r\nif(someCondition2){\r\n   // signal to resume the execution, but not from scratch instead from where its paused \r\n}\r\n```\r\n\r\nso my question is how do i achieve this and also whats the best way to save the intermediary results ","title":"Pause and Resume Thread","body":"<p>Say we have a thread processing certain instructions and hence creating intermediary result objects, is there any way to pause this thread and later create a new thread to resume from where the previous thread has stopped?</p>\n<p>Arbitrary Example:</p>\n<pre><code>Result result1 = foo();\nResult result2 = fooAgain();\n\nif(someCondition){\n   // save everything thats been computed so far and release this thread\n}\n\nResult result3 = notFoo();\n\n// end of the method\n</code></pre>\n<pre><code>// in a quartz scheduler or something\n\nif(someCondition2){\n   // signal to resume the execution, but not from scratch instead from where its paused \n}\n</code></pre>\n<p>so my question is how do i achieve this and also whats the best way to save the intermediary results</p>\n"},{"tags":["java","android","gradle","gradlew"],"comments":[{"owner":{"account_id":2530619,"reputation":4812,"user_id":2199001,"accept_rate":100,"display_name":"Chris"},"score":0,"creation_date":1647590926,"post_id":71374913,"comment_id":126413839,"body_markdown":"Those dependencies look commercial and don&#39;t have public documentation. In my experience contacting the developers of the sdk/libraries is your best bet.","body":"Those dependencies look commercial and don&#39;t have public documentation. In my experience contacting the developers of the sdk/libraries is your best bet."},{"owner":{"account_id":2530619,"reputation":4812,"user_id":2199001,"accept_rate":100,"display_name":"Chris"},"score":0,"creation_date":1647591057,"post_id":71374913,"comment_id":126413878,"body_markdown":"Also if your project has minimum sdk above 21, you shouldn&#39;t need to enable multidex explicitly, it should be enabled by default.","body":"Also if your project has minimum sdk above 21, you shouldn&#39;t need to enable multidex explicitly, it should be enabled by default."},{"owner":{"account_id":2891443,"reputation":209,"user_id":2480150,"display_name":"Hammoud"},"score":0,"creation_date":1648065088,"post_id":71374913,"comment_id":126532899,"body_markdown":"This is now solved. I contacted the maintainers of the libraries, they added flattenpackagehierarchy to proguard which solved it.","body":"This is now solved. I contacted the maintainers of the libraries, they added flattenpackagehierarchy to proguard which solved it."},{"owner":{"account_id":2530619,"reputation":4812,"user_id":2199001,"accept_rate":100,"display_name":"Chris"},"score":0,"creation_date":1648107232,"post_id":71374913,"comment_id":126541434,"body_markdown":"Glad to hear it. You should add your comment as an answer, and mark it correct.","body":"Glad to hear it. You should add your comment as an answer, and mark it correct."}],"answers":[{"tags":[],"owner":{"account_id":2891443,"reputation":209,"user_id":2480150,"display_name":"Hammoud"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1649884564,"creation_date":1649884564,"answer_id":71863924,"question_id":71374913,"body_markdown":"This is now solved. I contacted the maintainers of the libraries, they added flattenpackagehierarchy to proguard which solved it.","title":"Any ideas on how to solve Duplicate class with android jetified?","body":"<p>This is now solved. I contacted the maintainers of the libraries, they added flattenpackagehierarchy to proguard which solved it.</p>\n"}],"owner":{"account_id":2891443,"reputation":209,"user_id":2480150,"display_name":"Hammoud"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1690,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71863924,"answer_count":1,"score":0,"last_activity_date":1649884564,"creation_date":1646608118,"question_id":71374913,"body_markdown":"I&#39;m getting the following error when trying to build an android application with two third-party dependencies.\r\n\r\n```\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:checkDebugDuplicateClasses&#39;.\r\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\r\n   &gt; Duplicate class a.a.a.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.a$a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.b found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.c found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.d found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.e found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.f found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.k.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.l.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.l.b found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.m.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.m.a$a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.m.b found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.m.c found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n     Duplicate class a.a.a.m.d found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\r\n\r\n     Go to the documentation to learn how to &lt;a href=&quot;d.android.com/r/tools/classpath-sync-errors&quot;&gt;Fix dependency resolution errors&lt;/a&gt;.\r\n```\r\n\r\nDoes anyone know how solve this issue?\r\n\r\nI have a minimal android project if anyone can help me solve this: https://github.com/mohammedhammoud/geidea-stario10-duplicate-class-deps-error","title":"Any ideas on how to solve Duplicate class with android jetified?","body":"<p>I'm getting the following error when trying to build an android application with two third-party dependencies.</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':checkDebugDuplicateClasses'.\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\n   &gt; Duplicate class a.a.a.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.a$a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.b found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.c found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.d found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.e found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.f found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.k.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.l.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.l.b found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.m.a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.m.a$a found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.m.b found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.m.c found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n     Duplicate class a.a.a.m.d found in modules jetified-pos-comm-sdk-1.2.2-runtime (net.geidea.sdk:pos-comm-sdk:1.2.2) and jetified-stario10-1.0.0-runtime (com.starmicronics:stario10:1.0.0)\n\n     Go to the documentation to learn how to &lt;a href=&quot;d.android.com/r/tools/classpath-sync-errors&quot;&gt;Fix dependency resolution errors&lt;/a&gt;.\n</code></pre>\n<p>Does anyone know how solve this issue?</p>\n<p>I have a minimal android project if anyone can help me solve this: <a href=\"https://github.com/mohammedhammoud/geidea-stario10-duplicate-class-deps-error\" rel=\"nofollow noreferrer\">https://github.com/mohammedhammoud/geidea-stario10-duplicate-class-deps-error</a></p>\n"},{"tags":["java","list","sorting","lambda","comparator"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1649879423,"post_id":71862838,"comment_id":126990404,"body_markdown":"Using  https://docs.oracle.com/javase/8/docs/api/java/util/List.html#sort-java.util.Comparator- with a custom Comparator.","body":"Using  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#sort-java.util.Comparator-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/&hellip;</a> with a custom Comparator."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1649883049,"post_id":71862838,"comment_id":126991458,"body_markdown":"`persons.sort(Comparator.comparing(Person::getName).thenComparingInt(Person::getAge().reversed());` as a small example showcasing everything you mentioned.","body":"<code>persons.sort(Comparator.comparing(Person::getName).thenCompa&zwnj;&#8203;ringInt(Person::getA&zwnj;&#8203;ge().reversed());</code> as a small example showcasing everything you mentioned."}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1649882821,"creation_date":1649882821,"answer_id":71863690,"question_id":71862838,"body_markdown":"Comparator is an interface and as such it has to have unified method definitions.  There are a couple of ways to handle what you want, but not by parameter in the predefined method signatures:\r\n\r\n1) Create several custom `Comparator`, one for each field(s) to use.\r\n2) Create a single `Comparator` with predefined settings and you add a setter method to have it use those configurations.\r\n\r\nI would add that you should NOT write a `Comparator` to handle reverse ordering.  Use the methods available to you through the `Collections` utility, namley `Collections.reverse()` ","title":"How to create a sorting function that takes as parameter the method in which it should be sorted","body":"<p>Comparator is an interface and as such it has to have unified method definitions.  There are a couple of ways to handle what you want, but not by parameter in the predefined method signatures:</p>\n<ol>\n<li>Create several custom <code>Comparator</code>, one for each field(s) to use.</li>\n<li>Create a single <code>Comparator</code> with predefined settings and you add a setter method to have it use those configurations.</li>\n</ol>\n<p>I would add that you should NOT write a <code>Comparator</code> to handle reverse ordering.  Use the methods available to you through the <code>Collections</code> utility, namley <code>Collections.reverse()</code></p>\n"}],"owner":{"account_id":23936799,"reputation":13,"user_id":17930436,"display_name":"Demetrius"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1649885340,"answer_count":1,"score":0,"last_activity_date":1649884507,"creation_date":1649877629,"question_id":71862838,"body_markdown":"I have a List of entities, and I want to be able to sort the List using a custom .sort() function which takes as parameter the way the list should be sorted.\r\ne.g. \r\n\r\n```\r\nrepo.sort(sort by field) \r\nrepo.sort(sort by field but ascending) \r\nrepo.sort(sort by field descending and by another field ascending)\r\n```\r\n\r\nMy train of thought was that i should make a sort function that gets overloaded and depending on the number of parameters it should behave a certain way, but i feel that i am overcomplicating it \r\nand was wondering if there is a simpler way. \r\nThank you in advance.","title":"How to create a sorting function that takes as parameter the method in which it should be sorted","body":"<p>I have a List of entities, and I want to be able to sort the List using a custom .sort() function which takes as parameter the way the list should be sorted.\ne.g.</p>\n<pre><code>repo.sort(sort by field) \nrepo.sort(sort by field but ascending) \nrepo.sort(sort by field descending and by another field ascending)\n</code></pre>\n<p>My train of thought was that i should make a sort function that gets overloaded and depending on the number of parameters it should behave a certain way, but i feel that i am overcomplicating it\nand was wondering if there is a simpler way.\nThank you in advance.</p>\n"},{"tags":["java","java-native-interface","jvm-hotspot"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1649884447,"creation_date":1616946390,"answer_id":66843251,"question_id":66842504,"body_markdown":"The javadoc comments for the `@HotSpotIntrinsicCandidate` annotation say the following:\r\n\r\n&gt; *&quot;The `@HotSpotIntrinsicCandidate` annotation is specific to the HotSpot Virtual Machine. It indicates that an annotated method may be (but is not guaranteed to be) intrinsified by the HotSpot VM. A method is intrinsified if the HotSpot VM replaces the annotated method with hand-written assembly and/or hand-written compiler IR -- a compiler intrinsic -- to improve performance. The `@HotSpotIntrinsicCandidate` annotation is internal to the Java libraries and is therefore not supposed to have any relevance for application code.&quot;*\r\n\r\nIn short, a method with this annotation&lt;sup&gt;1&lt;/sup&gt; *may* be specially optimized, but it depends on whether the HotSpot JVM *knows* how to optimize it.  The implication is that:\r\n\r\n  1.  If the HotSpot JVM knows how to intrisify it, the Java method body is ignored.\r\n  2.  If the HotSpot JVM *doesn&#39;t* knows how to intrisify, the Java method body will be used in the normal way.\r\n  3.  Implementing the JVM code to do the intrinsification is non-trivial.\r\n  4.  You cannot make use of this in your own code.  (It involves modify the core HotSpot JVM codebase.)\r\n\r\nBy contrast, declaring a method as `native` tells the JVM it *must* use a native code implementation.  (The `native` method doesn&#39;t have a body.)  The method&#39;s native code implementation *may* be provided by the JVM, or it *may* be provided by a dynamically loaded native library or DLL.)  The call will typically&lt;sup&gt;1&lt;/sup&gt; be made via JNI / JNA and its calling sequence will be *less* performant than a conventional Java method call, and certainly an intrisified method call.\r\n\r\n&lt;sup&gt;1 - In fact, the annotation is called `@IntrinsicCandidate` in Java 17.&lt;br&gt;\r\n2 - Some `native` methods in core Java SE classes (e.g. `Object` methods) are also marked as intrinsic.  These may get optimized calling sequences.&lt;/sup&gt;\r\n\r\n-----------------\r\n\r\nSo to answer your questions:\r\n\r\n&gt; Which is more performative?\r\n\r\nIntrisified method calls will be more performant.\r\n\r\n&gt; Why use one over another and vice-versa?\r\n\r\n1.  You (a regular Java programmer) can&#39;t usefully label methods in your apps as intrinsic. Regular and `native` methods your only options.\r\n\r\n2.  The JVM implementors have a choice, but given the extra work involved, they tend to only make a method intrinsic when it will give a significant performance benefit.  For example, it makes little sense to intrinsify the `native` method calls in `java.io.*` classes because the JNI method call overheads will be tiny compared with the other things that go on in a typical I/O operation.","title":"Difference between &quot;native&quot; keyword and @HotSpotIntrinsicCandidate annotation","body":"<p>The javadoc comments for the <code>@HotSpotIntrinsicCandidate</code> annotation say the following:</p>\n<blockquote>\n<p><em>&quot;The <code>@HotSpotIntrinsicCandidate</code> annotation is specific to the HotSpot Virtual Machine. It indicates that an annotated method may be (but is not guaranteed to be) intrinsified by the HotSpot VM. A method is intrinsified if the HotSpot VM replaces the annotated method with hand-written assembly and/or hand-written compiler IR -- a compiler intrinsic -- to improve performance. The <code>@HotSpotIntrinsicCandidate</code> annotation is internal to the Java libraries and is therefore not supposed to have any relevance for application code.&quot;</em></p>\n</blockquote>\n<p>In short, a method with this annotation<sup>1</sup> <em>may</em> be specially optimized, but it depends on whether the HotSpot JVM <em>knows</em> how to optimize it.  The implication is that:</p>\n<ol>\n<li>If the HotSpot JVM knows how to intrisify it, the Java method body is ignored.</li>\n<li>If the HotSpot JVM <em>doesn't</em> knows how to intrisify, the Java method body will be used in the normal way.</li>\n<li>Implementing the JVM code to do the intrinsification is non-trivial.</li>\n<li>You cannot make use of this in your own code.  (It involves modify the core HotSpot JVM codebase.)</li>\n</ol>\n<p>By contrast, declaring a method as <code>native</code> tells the JVM it <em>must</em> use a native code implementation.  (The <code>native</code> method doesn't have a body.)  The method's native code implementation <em>may</em> be provided by the JVM, or it <em>may</em> be provided by a dynamically loaded native library or DLL.)  The call will typically<sup>1</sup> be made via JNI / JNA and its calling sequence will be <em>less</em> performant than a conventional Java method call, and certainly an intrisified method call.</p>\n<p><sup>1 - In fact, the annotation is called <code>@IntrinsicCandidate</code> in Java 17.<br>\n2 - Some <code>native</code> methods in core Java SE classes (e.g. <code>Object</code> methods) are also marked as intrinsic.  These may get optimized calling sequences.</sup></p>\n<hr />\n<p>So to answer your questions:</p>\n<blockquote>\n<p>Which is more performative?</p>\n</blockquote>\n<p>Intrisified method calls will be more performant.</p>\n<blockquote>\n<p>Why use one over another and vice-versa?</p>\n</blockquote>\n<ol>\n<li><p>You (a regular Java programmer) can't usefully label methods in your apps as intrinsic. Regular and <code>native</code> methods your only options.</p>\n</li>\n<li><p>The JVM implementors have a choice, but given the extra work involved, they tend to only make a method intrinsic when it will give a significant performance benefit.  For example, it makes little sense to intrinsify the <code>native</code> method calls in <code>java.io.*</code> classes because the JNI method call overheads will be tiny compared with the other things that go on in a typical I/O operation.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":14313363,"reputation":358,"user_id":10338918,"display_name":"Darthcow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2317,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":66843251,"answer_count":1,"score":4,"last_activity_date":1649884447,"creation_date":1616941802,"question_id":66842504,"body_markdown":"Why use one over another and vice-versa?\r\nWhich is more performant?","title":"Difference between &quot;native&quot; keyword and @HotSpotIntrinsicCandidate annotation","body":"<p>Why use one over another and vice-versa?\nWhich is more performant?</p>\n"},{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":3352721,"reputation":1057,"user_id":2816429,"display_name":"HariHaravelan"},"score":0,"creation_date":1649842335,"post_id":71855081,"comment_id":126975981,"body_markdown":"Please post code, not images \nhttps://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors-when-asking-a-question","body":"Please post code, not images  <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors-when-asking-a-question\" title=\"why should i not upload images of code data errors when asking a question\">meta.stackoverflow.com/questions/285551/&hellip;</a>"},{"owner":{"account_id":24529372,"reputation":320,"user_id":18441431,"display_name":"Rob"},"score":0,"creation_date":1649842388,"post_id":71855081,"comment_id":126975998,"body_markdown":"You could implement the `depth first search` algorithm","body":"You could implement the <code>depth first search</code> algorithm"},{"owner":{"account_id":3821993,"reputation":182,"user_id":3169867,"display_name":"Nik"},"score":0,"creation_date":1649848217,"post_id":71855081,"comment_id":126978313,"body_markdown":"Is it possible to add a &quot;private Person parent;&quot; member? If so, you could search for the deepest leaves and then go up from there.","body":"Is it possible to add a &quot;private Person parent;&quot; member? If so, you could search for the deepest leaves and then go up from there."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1649848585,"post_id":71855081,"comment_id":126978446,"body_markdown":"Using your [image](https://i.stack.imgur.com/wePID.png), if I call method `extractNames` with person `A`, what will be in the `List` that the method returns? Similarly, if I call method `extractNames` with person `B`, what names will be in the returned `List`?","body":"Using your <a href=\"https://i.stack.imgur.com/wePID.png\" rel=\"nofollow noreferrer\">image</a>, if I call method <code>extractNames</code> with person <code>A</code>, what will be in the <code>List</code> that the method returns? Similarly, if I call method <code>extractNames</code> with person <code>B</code>, what names will be in the returned <code>List</code>?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1649853191,"post_id":71855081,"comment_id":126980268,"body_markdown":"`List&lt;List&gt;` is nonsensical, do you mean `List&lt;String&gt;` ... and then: as shown here, your fields are all private. Which makes it impossible for any method (outside of the Person class) to get to the `name` field of a Person object. So: when you put up code here, follow [mcve] and make sure your input is meaningful and consistent.","body":"<code>List&lt;List&gt;</code> is nonsensical, do you mean <code>List&lt;String&gt;</code> ... and then: as shown here, your fields are all private. Which makes it impossible for any method (outside of the Person class) to get to the <code>name</code> field of a Person object. So: when you put up code here, follow <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and make sure your input is meaningful and consistent."}],"answers":[{"tags":[],"owner":{"account_id":14655545,"reputation":223,"user_id":10584220,"display_name":"Swapstar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649850264,"creation_date":1649845951,"answer_id":71856010,"question_id":71855081,"body_markdown":"I am not very good with Java but here&#39;s the code for what you want to do in Python. Just convert the extractNames method to Java.\r\n```\r\nclass Person:\r\n    def __init__(self, name, children=[]):\r\n        self.name = name\r\n        self.children = children\r\n        \r\npersonD = Person(&quot;D&quot;, [])\r\npersonE = Person(&quot;E&quot;, [])\r\npersonF = Person(&quot;F&quot;, [])\r\n\r\npersonB = Person(&quot;B&quot;, [personD,personE,personF])\r\n\r\npersonG = Person(&quot;G&quot;, [])\r\npersonH = Person(&quot;H&quot;, [])\r\n\r\npersonC = Person(&quot;C&quot;, [personG, personH])\r\n\r\npersonA = Person(&quot;A&quot;, [personB,personC])\r\n\r\ndef extractNames(personHead, branchStack):\r\n    # Keep adding children to branch stack\r\n    branchStack.append(personHead.name)\r\n    if len(personHead.children) == 0:\r\n        print(branchStack)\r\n    for child in personHead.children:\r\n        extractNames(child,branchStack)\r\n        # After going till all children we will remove everything till the parent\r\n        while (branchStack[-1] != personHead.name):\r\n            branchStack.pop(-1)\r\n    return\r\n    \r\nextractNames(personA,branchStack=[])\r\n\r\n&#39;&#39;&#39;\r\nOutput: \r\n[&#39;A&#39;, &#39;B&#39;, &#39;D&#39;]\r\n[&#39;A&#39;, &#39;B&#39;, &#39;E&#39;]\r\n[&#39;A&#39;, &#39;B&#39;, &#39;F&#39;]\r\n[&#39;A&#39;, &#39;C&#39;, &#39;G&#39;]\r\n[&#39;A&#39;, &#39;C&#39;, &#39;H&#39;]\r\n&#39;&#39;&#39;\r\n```","title":"Method to get all the branches of a tree","body":"<p>I am not very good with Java but here's the code for what you want to do in Python. Just convert the extractNames method to Java.</p>\n<pre><code>class Person:\n    def __init__(self, name, children=[]):\n        self.name = name\n        self.children = children\n        \npersonD = Person(&quot;D&quot;, [])\npersonE = Person(&quot;E&quot;, [])\npersonF = Person(&quot;F&quot;, [])\n\npersonB = Person(&quot;B&quot;, [personD,personE,personF])\n\npersonG = Person(&quot;G&quot;, [])\npersonH = Person(&quot;H&quot;, [])\n\npersonC = Person(&quot;C&quot;, [personG, personH])\n\npersonA = Person(&quot;A&quot;, [personB,personC])\n\ndef extractNames(personHead, branchStack):\n    # Keep adding children to branch stack\n    branchStack.append(personHead.name)\n    if len(personHead.children) == 0:\n        print(branchStack)\n    for child in personHead.children:\n        extractNames(child,branchStack)\n        # After going till all children we will remove everything till the parent\n        while (branchStack[-1] != personHead.name):\n            branchStack.pop(-1)\n    return\n    \nextractNames(personA,branchStack=[])\n\n'''\nOutput: \n['A', 'B', 'D']\n['A', 'B', 'E']\n['A', 'B', 'F']\n['A', 'C', 'G']\n['A', 'C', 'H']\n'''\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3821993,"reputation":182,"user_id":3169867,"display_name":"Nik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649855849,"creation_date":1649852894,"answer_id":71857498,"question_id":71855081,"body_markdown":"Update: Removed the dependency to lombok\r\n\r\nThe relevant algorithm part is in the method extractNamesAlternative in the class PersonGetNamesTest. The rest of the code is just some sugar so it can be run with junit. If you don&#39;t know how to use junit, copy the method extractNamesAlternative to your own class.\r\n\r\n\r\nPerson.java\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Person {\r\n\r\n    private String name;\r\n    private List&lt;Person&gt; children = new ArrayList&lt;&gt;();\r\n\r\n    Person(String name, List&lt;Person&gt; children){\r\n        this.name = name;\r\n        this.children = children;\r\n    }\r\n    \r\n    Person(String name){\r\n        this.name = name;\r\n    }\r\n\r\n    public String getName(){\r\n        return name;\r\n    }\r\n\r\n    public List&lt;Person&gt; getChildren(){\r\n        return children;\r\n    }\r\n}\r\n```\r\n\r\nExtractNamesTest.java\r\n```java\r\nimport org.assertj.core.util.Lists;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\npublic class ExtractNamesTest {\r\n\r\n    @Test\r\n    void testPersonGetNamesTest() {\r\n        Person personD = new Person(&quot;D&quot;);\r\n        Person personE = new Person(&quot;E&quot;);\r\n        Person personF = new Person(&quot;F&quot;);\r\n\r\n        Person personB = new Person(&quot;B&quot;, Arrays.asList(personD, personE, personF));\r\n        Person personG = new Person(&quot;G&quot;);\r\n        Person personH = new Person(&quot;H&quot;);\r\n\r\n        Person personC = new Person(&quot;C&quot;, Arrays.asList(personG, personH));\r\n        \r\n        Person personA = new Person(&quot;A&quot;, Arrays.asList(personB, personC));\r\n\r\n\r\n        List&lt;String&gt; namesAlternative = extractNamesAlternative(personA, new ArrayList&lt;&gt;(), new ArrayList&lt;&gt;());\r\n        assertEquals(Lists.list(\r\n                &quot;ABD&quot;, &quot;ABE&quot;, &quot;ABF&quot;, &quot;ACG&quot;, &quot;ACH&quot;),\r\n                namesAlternative);\r\n    }\r\n\r\n    private List&lt;String&gt; extractNamesAlternative(Person ancestor, List&lt;String&gt; names, List&lt;Person&gt; allAncestors) {\r\n        allAncestors.add(ancestor);\r\n        if (ancestor.getChildren().isEmpty()) {\r\n            names.add(allAncestors.stream().map(Person::getName).collect(Collectors.joining()));\r\n            return names;\r\n        } else {\r\n            for (Person p : ancestor.getChildren()) {\r\n                extractNamesAlternative(p, names, new ArrayList&lt;Person&gt;(allAncestors));\r\n            }\r\n        }\r\n        return names;\r\n    }\r\n}\r\n```","title":"Method to get all the branches of a tree","body":"<p>Update: Removed the dependency to lombok</p>\n<p>The relevant algorithm part is in the method extractNamesAlternative in the class PersonGetNamesTest. The rest of the code is just some sugar so it can be run with junit. If you don't know how to use junit, copy the method extractNamesAlternative to your own class.</p>\n<p>Person.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Person {\n\n    private String name;\n    private List&lt;Person&gt; children = new ArrayList&lt;&gt;();\n\n    Person(String name, List&lt;Person&gt; children){\n        this.name = name;\n        this.children = children;\n    }\n    \n    Person(String name){\n        this.name = name;\n    }\n\n    public String getName(){\n        return name;\n    }\n\n    public List&lt;Person&gt; getChildren(){\n        return children;\n    }\n}\n</code></pre>\n<p>ExtractNamesTest.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.assertj.core.util.Lists;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\npublic class ExtractNamesTest {\n\n    @Test\n    void testPersonGetNamesTest() {\n        Person personD = new Person(&quot;D&quot;);\n        Person personE = new Person(&quot;E&quot;);\n        Person personF = new Person(&quot;F&quot;);\n\n        Person personB = new Person(&quot;B&quot;, Arrays.asList(personD, personE, personF));\n        Person personG = new Person(&quot;G&quot;);\n        Person personH = new Person(&quot;H&quot;);\n\n        Person personC = new Person(&quot;C&quot;, Arrays.asList(personG, personH));\n        \n        Person personA = new Person(&quot;A&quot;, Arrays.asList(personB, personC));\n\n\n        List&lt;String&gt; namesAlternative = extractNamesAlternative(personA, new ArrayList&lt;&gt;(), new ArrayList&lt;&gt;());\n        assertEquals(Lists.list(\n                &quot;ABD&quot;, &quot;ABE&quot;, &quot;ABF&quot;, &quot;ACG&quot;, &quot;ACH&quot;),\n                namesAlternative);\n    }\n\n    private List&lt;String&gt; extractNamesAlternative(Person ancestor, List&lt;String&gt; names, List&lt;Person&gt; allAncestors) {\n        allAncestors.add(ancestor);\n        if (ancestor.getChildren().isEmpty()) {\n            names.add(allAncestors.stream().map(Person::getName).collect(Collectors.joining()));\n            return names;\n        } else {\n            for (Person p : ancestor.getChildren()) {\n                extractNamesAlternative(p, names, new ArrayList&lt;Person&gt;(allAncestors));\n            }\n        }\n        return names;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6269879,"reputation":168,"user_id":4874430,"display_name":"Isma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649883626,"creation_date":1649864789,"answer_id":71860312,"question_id":71855081,"body_markdown":"Here I show how I&#39;ve implemented the function:\r\n\r\n\tprivate static void extractNames(Person ancestor, String branchName, List&lt;String&gt; listBranch){\r\n\t\tif(ancestor.getChildren().size()&gt;0) {\r\n\t\t\tbranchName = branchName + ancestor.getName() + &quot;,&quot;;\r\n\t\t\tfor(int i=0; i&lt;ancestor.getChildren().size(); i++) {\t\t\t\t\r\n\t\t\t\textractNames(ancestor.getChildren().get(i), branchName, listBranch);\t\t\t\t\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\tbranchName = branchName + ancestor.getName();\r\n\t\t\tlistBranch.add(branchName);\r\n\t\t}\r\n\t}\r\n\r\nAnd how it can be called from main:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t//Create persons\r\n\t    Person pA = new Person(&quot;A&quot;);\r\n\t    Person pB = new Person(&quot;B&quot;);\r\n\t    Person pC = new Person(&quot;C&quot;);\r\n\t    Person pD = new Person(&quot;D&quot;);\r\n\t    Person pE = new Person(&quot;E&quot;);\r\n\t    Person pF = new Person(&quot;F&quot;);\r\n\t    Person pG = new Person(&quot;G&quot;);\r\n\t    Person pH = new Person(&quot;H&quot;);\r\n\t    \r\n\t    //Assign children\r\n\t    pA.addChildren(pB);\r\n\t    pA.addChildren(pC);\r\n\t    pB.addChildren(pD);\r\n\t    pB.addChildren(pE);\r\n\t    pB.addChildren(pF);\r\n\t    pC.addChildren(pG);\r\n\t    pC.addChildren(pH);\r\n\t    \r\n\t    List&lt;String&gt; branchList = new ArrayList&lt;String&gt;();\r\n        //call\t    \r\n\t    extractNames(pA, &quot;&quot;, branchList);\r\n\t    //print list\r\n\t    for(int i=0;i&lt;branchList.size();i++) {\r\n\t    \tSystem.out.println(branchList.get(i));\r\n\t    }\r\n\t}\r\n\r\n\r\nI hope this help you.","title":"Method to get all the branches of a tree","body":"<p>Here I show how I've implemented the function:</p>\n<pre><code>private static void extractNames(Person ancestor, String branchName, List&lt;String&gt; listBranch){\n    if(ancestor.getChildren().size()&gt;0) {\n        branchName = branchName + ancestor.getName() + &quot;,&quot;;\n        for(int i=0; i&lt;ancestor.getChildren().size(); i++) {                \n            extractNames(ancestor.getChildren().get(i), branchName, listBranch);                \n        }\n    }else {\n        branchName = branchName + ancestor.getName();\n        listBranch.add(branchName);\n    }\n}\n</code></pre>\n<p>And how it can be called from main:</p>\n<pre><code>public static void main(String[] args) {\n    //Create persons\n    Person pA = new Person(&quot;A&quot;);\n    Person pB = new Person(&quot;B&quot;);\n    Person pC = new Person(&quot;C&quot;);\n    Person pD = new Person(&quot;D&quot;);\n    Person pE = new Person(&quot;E&quot;);\n    Person pF = new Person(&quot;F&quot;);\n    Person pG = new Person(&quot;G&quot;);\n    Person pH = new Person(&quot;H&quot;);\n    \n    //Assign children\n    pA.addChildren(pB);\n    pA.addChildren(pC);\n    pB.addChildren(pD);\n    pB.addChildren(pE);\n    pB.addChildren(pF);\n    pC.addChildren(pG);\n    pC.addChildren(pH);\n    \n    List&lt;String&gt; branchList = new ArrayList&lt;String&gt;();\n    //call      \n    extractNames(pA, &quot;&quot;, branchList);\n    //print list\n    for(int i=0;i&lt;branchList.size();i++) {\n        System.out.println(branchList.get(i));\n    }\n}\n</code></pre>\n<p>I hope this help you.</p>\n"}],"owner":{"account_id":24923443,"reputation":3,"user_id":18791495,"display_name":"Thomas Gourouza"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71857498,"answer_count":3,"score":0,"last_activity_date":1649883626,"creation_date":1649842104,"question_id":71855081,"body_markdown":"I have an object from this Class:\r\n\r\n```java\r\npublic class Person{\r\n    private String name;\r\n    private List&lt;Person&gt; children;\r\n}\r\n```\r\n\r\nAnd I would like to write the JAVA method: private List&lt;List&lt;String&gt;&gt; extractNames(Person ancestor) which gives back all the names of each branch of the tree:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nDo you have an idea, how I could do it ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wePID.png","title":"Method to get all the branches of a tree","body":"<p>I have an object from this Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person{\n    private String name;\n    private List&lt;Person&gt; children;\n}\n</code></pre>\n<p>And I would like to write the JAVA method: private List&lt;List&gt; extractNames(Person ancestor) which gives back all the names of each branch of the tree:</p>\n<p><a href=\"https://i.stack.imgur.com/wePID.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wePID.png\" alt=\"enter image description here\" /></a></p>\n<p>Do you have an idea, how I could do it ?</p>\n"},{"tags":["java","json-patch"],"answers":[{"tags":[],"owner":{"account_id":12789844,"reputation":273,"user_id":9254726,"display_name":"5E4ME"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649883453,"creation_date":1649883453,"answer_id":71863769,"question_id":71861970,"body_markdown":"After a lot of trial and error I got it to work by modifying the inputstream itself instead of the jsonpatch object. \r\n\r\nI added some targets to the json template and did stream replacement on a copy of the inputstream to force in my desired values before converting it all into the final jsonpatch. \r\n\r\n**new template:**\r\n\r\n    &quot;jsonPatch&quot;: [\r\n      {\r\n        &quot;op&quot;: &quot;replace&quot;,\r\n        &quot;path&quot;: &quot;/username&quot;,\r\n        &quot;value&quot;: &quot;$username$&quot;\r\n      },\r\n      {\r\n        &quot;op&quot;: &quot;replace&quot;,\r\n        &quot;path&quot;: &quot;/number&quot;,\r\n        &quot;value&quot;: &quot;$number$&quot;\r\n      }\r\n    ]\r\n\r\n**new code:**\r\n  \r\n    // Import Template\r\n    JsonPatch request;\r\n    InputStream is = TestRestTemplate.class.getResourceAsStream(&quot;/PatchRequest.json&quot;);\r\n    byte[] bytes = FileCopyUtils.copyToByteArray(is);\r\n    String requestStr= new String(bytes);\r\n        \r\n    // Modify Operations\r\n    Random r = new Random();\r\n    int newNumber = r.nextInt(100);\r\n    requestStr= requestStr.replaceAll(&quot;\\&quot;\\\\$number\\\\$\\&quot;&quot;, String.valueOf(newNumber));\r\n    requestStr= requestStr.replaceAll(&quot;\\\\$username\\\\$&quot;, &quot;NewName&quot;);\r\n\r\n    // Finalize Request\r\n    request = objectMapper.readValue(requestStr, JsonPatch.class)\r\n    \r\n\r\nGetting the number value to work was a bit tricky since everything is strings, but I was able to crack it by having the replace operation get rid of its quotes which causes it to get picked up as a number by the jsonpatch.","title":"Add new operations to existing jsonpatch file","body":"<p>After a lot of trial and error I got it to work by modifying the inputstream itself instead of the jsonpatch object.</p>\n<p>I added some targets to the json template and did stream replacement on a copy of the inputstream to force in my desired values before converting it all into the final jsonpatch.</p>\n<p><strong>new template:</strong></p>\n<pre><code>&quot;jsonPatch&quot;: [\n  {\n    &quot;op&quot;: &quot;replace&quot;,\n    &quot;path&quot;: &quot;/username&quot;,\n    &quot;value&quot;: &quot;$username$&quot;\n  },\n  {\n    &quot;op&quot;: &quot;replace&quot;,\n    &quot;path&quot;: &quot;/number&quot;,\n    &quot;value&quot;: &quot;$number$&quot;\n  }\n]\n</code></pre>\n<p><strong>new code:</strong></p>\n<pre><code>// Import Template\nJsonPatch request;\nInputStream is = TestRestTemplate.class.getResourceAsStream(&quot;/PatchRequest.json&quot;);\nbyte[] bytes = FileCopyUtils.copyToByteArray(is);\nString requestStr= new String(bytes);\n    \n// Modify Operations\nRandom r = new Random();\nint newNumber = r.nextInt(100);\nrequestStr= requestStr.replaceAll(&quot;\\&quot;\\\\$number\\\\$\\&quot;&quot;, String.valueOf(newNumber));\nrequestStr= requestStr.replaceAll(&quot;\\\\$username\\\\$&quot;, &quot;NewName&quot;);\n\n// Finalize Request\nrequest = objectMapper.readValue(requestStr, JsonPatch.class)\n</code></pre>\n<p>Getting the number value to work was a bit tricky since everything is strings, but I was able to crack it by having the replace operation get rid of its quotes which causes it to get picked up as a number by the jsonpatch.</p>\n"}],"owner":{"account_id":12789844,"reputation":273,"user_id":9254726,"display_name":"5E4ME"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":483,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71863769,"answer_count":1,"score":0,"last_activity_date":1649883453,"creation_date":1649872781,"question_id":71861970,"body_markdown":"I&#39;m working on a test suite for some Java code that uses jsonpatch to modify db entries. What I am trying to do is have a template jsonpatch request saved down as a file that individual unit tests could read from, modify some operations, and then call the patch directly.\r\n\r\nThe rough structure is as follows:\r\n\r\n**jsonpatch template:**\r\n\r\n    &quot;jsonPatch&quot;: [\r\n      {\r\n        &quot;op&quot;: &quot;replace&quot;,\r\n        &quot;path&quot;: &quot;/username&quot;,\r\n        &quot;value&quot;: &quot;johnDoe&quot;\r\n      },\r\n      {\r\n        &quot;op&quot;: &quot;replace&quot;,\r\n        &quot;path&quot;: &quot;/number&quot;,\r\n        &quot;value&quot;: 123\r\n      }\r\n    ]\r\n\r\n**java code:**\r\n\r\n    // Import Template\r\n    JsonPatch request;\r\n    InputStream is = TestRestTemplate.class.getResourceAsStream(&quot;/PatchRequest.json&quot;);\r\n    request = objectMapper.readValue(is, JsonPatch.class)\r\n    \r\n    // Modify Operations (not working)\r\n    Random r = new Random();\r\n    int newNumber = r.nextInt(100);\r\n    ((ObjectNode) request).put(&quot;/number&quot;, newNumber);  // this doesn&#39;t even compile due to conversion issues\r\n\r\n    // Send patch\r\n    thingThatTouchesDB.patchDocument(request)\r\n\r\n    // Validate Results\r\n    int finalNumber = [get field from DB]\r\n    assertEquals(newNumber, finalNumber);\r\n\r\nWhen I comment out the modify operation section everything works so I&#39;m not having issues with importing or sending the patch. My struggle is with updating the template&#39;s operations to fit. The paths are the same across tests but I need to try with different values each time since we&#39;re using a persistent database for testing. \r\n\r\nIs there a way to modify the value of an existing jsonpatch operation like I&#39;m trying above? Failing that, can I add new operations to the existing jsonpatch?","title":"Add new operations to existing jsonpatch file","body":"<p>I'm working on a test suite for some Java code that uses jsonpatch to modify db entries. What I am trying to do is have a template jsonpatch request saved down as a file that individual unit tests could read from, modify some operations, and then call the patch directly.</p>\n<p>The rough structure is as follows:</p>\n<p><strong>jsonpatch template:</strong></p>\n<pre><code>&quot;jsonPatch&quot;: [\n  {\n    &quot;op&quot;: &quot;replace&quot;,\n    &quot;path&quot;: &quot;/username&quot;,\n    &quot;value&quot;: &quot;johnDoe&quot;\n  },\n  {\n    &quot;op&quot;: &quot;replace&quot;,\n    &quot;path&quot;: &quot;/number&quot;,\n    &quot;value&quot;: 123\n  }\n]\n</code></pre>\n<p><strong>java code:</strong></p>\n<pre><code>// Import Template\nJsonPatch request;\nInputStream is = TestRestTemplate.class.getResourceAsStream(&quot;/PatchRequest.json&quot;);\nrequest = objectMapper.readValue(is, JsonPatch.class)\n\n// Modify Operations (not working)\nRandom r = new Random();\nint newNumber = r.nextInt(100);\n((ObjectNode) request).put(&quot;/number&quot;, newNumber);  // this doesn't even compile due to conversion issues\n\n// Send patch\nthingThatTouchesDB.patchDocument(request)\n\n// Validate Results\nint finalNumber = [get field from DB]\nassertEquals(newNumber, finalNumber);\n</code></pre>\n<p>When I comment out the modify operation section everything works so I'm not having issues with importing or sending the patch. My struggle is with updating the template's operations to fit. The paths are the same across tests but I need to try with different values each time since we're using a persistent database for testing.</p>\n<p>Is there a way to modify the value of an existing jsonpatch operation like I'm trying above? Failing that, can I add new operations to the existing jsonpatch?</p>\n"},{"tags":["java","arrays","processing"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1649878744,"post_id":71863009,"comment_id":126990176,"body_markdown":"&quot;I&#39;m not sure why &quot;Circle&quot; isn&#39;t being recognized in my code.&quot; Why *should* it be recognized? What do you expect `Circle` to refer to? &quot;From what I saw, I thought adding &quot;import java.util.*&quot; would fix the problem&quot; Why? What did you &quot;see&quot;, and how did you come to that conclusion?","body":"&quot;I&#39;m not sure why &quot;Circle&quot; isn&#39;t being recognized in my code.&quot; Why <i>should</i> it be recognized? What do you expect <code>Circle</code> to refer to? &quot;From what I saw, I thought adding &quot;import java.util.*&quot; would fix the problem&quot; Why? What did you &quot;see&quot;, and how did you come to that conclusion?"},{"owner":{"account_id":7322082,"reputation":205321,"user_id":5577765,"display_name":"Rabbid76"},"score":1,"creation_date":1649878748,"post_id":71863009,"comment_id":126990183,"body_markdown":"`Circle` is declared in scope of `draw`. You have to declare it in global scope.","body":"<code>Circle</code> is declared in scope of <code>draw</code>. You have to declare it in global scope."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1649880348,"post_id":71863009,"comment_id":126990695,"body_markdown":"Before posting here, study the basics of Java. Oracle provides at no cost the [Java Tutorials](https://docs.oracle.com/javase/tutorial/).","body":"Before posting here, study the basics of Java. Oracle provides at no cost the <a href=\"https://docs.oracle.com/javase/tutorial/\" rel=\"nofollow noreferrer\">Java Tutorials</a>."}],"answers":[{"tags":[],"owner":{"account_id":7322082,"reputation":205321,"user_id":5577765,"display_name":"Rabbid76"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649878879,"creation_date":1649878879,"answer_id":71863063,"question_id":71863009,"body_markdown":"`Circle` is declared in scope of `draw`. You have to declare it in global scope:\r\n\r\n```java\r\nvoid draw() {\r\n    //if your port is available, get the val\r\n    if ( myPort.available() &gt; 2) {\r\n        val = myPort.read();\r\n    }\r\n\r\n    background(0);\r\n    for (int i = 0; i&lt;10; i++) {\r\n        circles[i].display();\r\n    }\r\n\r\n    /* DELETE\r\n    class Circle\r\n    {\r\n      float xPos;\r\n      float yPos;\r\n\r\n      Circle() {\r\n        xPos = random(width);\r\n        yPos = random(height);\r\n      }\r\n    }*/\r\n}\r\n\r\n// INSERT\r\nclass Circle {\r\n    float xPos;\r\n    float yPos;\r\n\r\n    Circle() {\r\n        xPos = random(width);\r\n        yPos = random(height);\r\n    }\r\n}\r\n```","title":"Cannot find a class or type named Circle","body":"<p><code>Circle</code> is declared in scope of <code>draw</code>. You have to declare it in global scope:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void draw() {\n    //if your port is available, get the val\n    if ( myPort.available() &gt; 2) {\n        val = myPort.read();\n    }\n\n    background(0);\n    for (int i = 0; i&lt;10; i++) {\n        circles[i].display();\n    }\n\n    /* DELETE\n    class Circle\n    {\n      float xPos;\n      float yPos;\n\n      Circle() {\n        xPos = random(width);\n        yPos = random(height);\n      }\n    }*/\n}\n\n// INSERT\nclass Circle {\n    float xPos;\n    float yPos;\n\n    Circle() {\n        xPos = random(width);\n        yPos = random(height);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14706153,"reputation":46,"user_id":10620823,"display_name":"ESR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649883409,"creation_date":1649883409,"answer_id":71863764,"question_id":71863009,"body_markdown":"A few things:\r\n1) I would recommend putting the class declaration of Circle in its own file.  One class to a file, generally.  File named the same as the class, and import it into your processing class.\r\n2) Similar to #1, your processing code should probably be in a class.\r\n3) Good security practice is to avoid accessing xPos and yPos directly from outside the Circle class - it&#39;s better to use getter methods and make the class attributes private.","title":"Cannot find a class or type named Circle","body":"<p>A few things:</p>\n<ol>\n<li>I would recommend putting the class declaration of Circle in its own file.  One class to a file, generally.  File named the same as the class, and import it into your processing class.</li>\n<li>Similar to #1, your processing code should probably be in a class.</li>\n<li>Good security practice is to avoid accessing xPos and yPos directly from outside the Circle class - it's better to use getter methods and make the class attributes private.</li>\n</ol>\n"}],"owner":{"account_id":24928403,"reputation":25,"user_id":18795851,"display_name":"yoggocup"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1649883409,"creation_date":1649878549,"question_id":71863009,"body_markdown":"I&#39;m not sure why &quot;Circle&quot; isn&#39;t being recognized in my code. The error that shows up in Processing says &quot;Cannot find a class or type named Circle&quot;\r\nI am trying to take values that are taken from a sensor (through Arduino) &amp; visualize them in Processing. From what I saw, I thought adding &quot;import java.util.*&quot; would fix the problem, but it didn&#39;t. \r\nI&#39;m not sure if the term &quot;Circle&quot; is just too broad, &amp; if I have to make it &quot;MCircle&quot; or &quot;PCircle&quot; or something like that. \r\n\r\nHere is the Processing code: \r\n\r\n    \r\n    import processing.serial.*;\r\n    import java.util.*;\r\n    \r\n    Serial myPort; \r\n    int val;    \r\n    int amt = 10;\r\n    Circle [] circles;\r\n    \r\n    void setup() {\r\n      size(500, 500);\r\n      rectMode(CENTER);\r\n      circles = new Circle[amt];\r\n      for (int i=0; i&lt;10; i++) {\r\n        circles[i] = new Circle();\r\n      }\r\n   \r\n    \r\n      String portName = Serial.list()[2];\r\n      myPort = new Serial(this, portName, 9600);\r\n      // println(Serial.list());\r\n      //println(val);\r\n    }\r\n    \r\n    void draw() {\r\n      //if your port is available, get the val\r\n      if ( myPort.available() &gt; 2) {\r\n        val = myPort.read();\r\n      }\r\n    \r\n      background(0);\r\n      for (int i = 0; i&lt;10; i++) {\r\n        circles[i].display();\r\n      }\r\n      class Circle\r\n      {\r\n        float xPos;\r\n        float yPos;\r\n    \r\n        Circle() {\r\n          xPos = random(width);\r\n          yPos = random(height);\r\n        }\r\n      }\r\n    }\r\n    \r\n    void display() {\r\n      // ellipse(random(width), random(height), val, val);\r\n      ellipse(xPos, yPos, val, val);\r\n    }","title":"Cannot find a class or type named Circle","body":"<p>I'm not sure why &quot;Circle&quot; isn't being recognized in my code. The error that shows up in Processing says &quot;Cannot find a class or type named Circle&quot;\nI am trying to take values that are taken from a sensor (through Arduino) &amp; visualize them in Processing. From what I saw, I thought adding &quot;import java.util.*&quot; would fix the problem, but it didn't.\nI'm not sure if the term &quot;Circle&quot; is just too broad, &amp; if I have to make it &quot;MCircle&quot; or &quot;PCircle&quot; or something like that.</p>\n<p>Here is the Processing code:</p>\n<pre><code>import processing.serial.*;\nimport java.util.*;\n\nSerial myPort; \nint val;    \nint amt = 10;\nCircle [] circles;\n\nvoid setup() {\n  size(500, 500);\n  rectMode(CENTER);\n  circles = new Circle[amt];\n  for (int i=0; i&lt;10; i++) {\n    circles[i] = new Circle();\n  }\n\n\n  String portName = Serial.list()[2];\n  myPort = new Serial(this, portName, 9600);\n  // println(Serial.list());\n  //println(val);\n}\n\nvoid draw() {\n  //if your port is available, get the val\n  if ( myPort.available() &gt; 2) {\n    val = myPort.read();\n  }\n\n  background(0);\n  for (int i = 0; i&lt;10; i++) {\n    circles[i].display();\n  }\n  class Circle\n  {\n    float xPos;\n    float yPos;\n\n    Circle() {\n      xPos = random(width);\n      yPos = random(height);\n    }\n  }\n}\n\nvoid display() {\n  // ellipse(random(width), random(height), val, val);\n  ellipse(xPos, yPos, val, val);\n}\n</code></pre>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649876644,"creation_date":1649876644,"answer_id":71862667,"question_id":71862085,"body_markdown":"It is not possible with regex in general! \r\n\r\nRegex can only validate words for regular languages (Type-3 grammars). Even simple expressions like validation a^{n}b^{n} is not possible with regex in general. a^{n}b^{n} meaning a regex validating all words that have the same number if &quot;a&quot; following the same number of &quot;b&quot; (aabb, aaabbb).\r\n\r\n If you need to &quot;store&quot; Information about the string for upcoming parts of the string you will always run into problems with regex. In your case you need to store the information that there was an &quot;&lt;&quot; before and was is closed again with &quot;&gt;&quot; . You can extend you knowledge about this here https://en.wikipedia.org/wiki/Chomsky_hierarchy .\r\n\r\nAn exception could be made by limiting &quot;n&quot; to be finite for a^{n}b^{n}. For such a simple example a large regex, depending on n, could then validate it. It would however be pretty ugly. If you are really into it you can see this problem at work at validating ipv4 vs ipv6 adresses with regex. For ipv4 adresses it is easily possible. For ipv6 you need to &quot;store something&quot;. It is however limited to 8 which makes it possible. The regex however looks ugly as hell https://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses \r\n\r\nI hope my explanation was somehow understandable. Never liked the theoretical part about computer science. \r\n\r\ntl;dr: I guess you don&#180;t have any other choice than to write for loops with variables that store the current state of your iteration. The state beeing Is it possible to delete the matching string right now or not.","title":"Ignore words in some parts of the string while replacing using java regex","body":"<p>It is not possible with regex in general!</p>\n<p>Regex can only validate words for regular languages (Type-3 grammars). Even simple expressions like validation a^{n}b^{n} is not possible with regex in general. a^{n}b^{n} meaning a regex validating all words that have the same number if &quot;a&quot; following the same number of &quot;b&quot; (aabb, aaabbb).</p>\n<p>If you need to &quot;store&quot; Information about the string for upcoming parts of the string you will always run into problems with regex. In your case you need to store the information that there was an &quot;&lt;&quot; before and was is closed again with &quot;&gt;&quot; . You can extend you knowledge about this here <a href=\"https://en.wikipedia.org/wiki/Chomsky_hierarchy\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Chomsky_hierarchy</a> .</p>\n<p>An exception could be made by limiting &quot;n&quot; to be finite for a^{n}b^{n}. For such a simple example a large regex, depending on n, could then validate it. It would however be pretty ugly. If you are really into it you can see this problem at work at validating ipv4 vs ipv6 adresses with regex. For ipv4 adresses it is easily possible. For ipv6 you need to &quot;store something&quot;. It is however limited to 8 which makes it possible. The regex however looks ugly as hell <a href=\"https://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\">Regular expression that matches valid IPv6 addresses</a></p>\n<p>I hope my explanation was somehow understandable. Never liked the theoretical part about computer science.</p>\n<p>tl;dr: I guess you dont have any other choice than to write for loops with variables that store the current state of your iteration. The state beeing Is it possible to delete the matching string right now or not.</p>\n"},{"tags":[],"owner":{"account_id":12221317,"reputation":569,"user_id":8920328,"display_name":"Melron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649878403,"creation_date":1649878403,"answer_id":71862982,"question_id":71862085,"body_markdown":"You can try this one\r\n\r\n    .replaceAll(&quot;(?&lt;!&lt;)span(?!&gt;)&quot;, &quot;xyz&quot;)\r\n\r\nhttps://regex101.com/r/SzN5hV/1","title":"Ignore words in some parts of the string while replacing using java regex","body":"<p>You can try this one</p>\n<pre><code>.replaceAll(&quot;(?&lt;!&lt;)span(?!&gt;)&quot;, &quot;xyz&quot;)\n</code></pre>\n<p><a href=\"https://regex101.com/r/SzN5hV/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/SzN5hV/1</a></p>\n"}],"owner":{"account_id":4001764,"reputation":191,"user_id":3297623,"display_name":"Karani.pranay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1649882960,"creation_date":1649873403,"question_id":71862085,"body_markdown":"I am trying to detect and replace certain words in an html string. For e.g. I have a string like this:\r\n```\r\n&quot;cool span&lt;span class=&#39;Span&#39;&gt; span spanspan the span&lt;/span&gt; what a span&quot;\r\n```\r\nI want to replace just the word &#39;span&#39; (with &#39;xyz&#39; for example) in this string outside of the tags (or basically ignore all string between angular brackets). Expected result:\r\n```\r\n&quot;cool xyz&lt;span class=&#39;Span&#39;&gt; xyz spanspan the xyz&lt;/span&gt; what a xyz&quot;\r\n```\r\n\r\nI tried various regex patterns without any luck. I doubt if its even possible at this point with java regex. \r\n\r\nThanks in advance for any help :)\r\n\r\n\r\nEdit: I found the regex that solves the problem - ```(?&lt;!\\&lt;)\\bspan\\b(?!\\&gt;)```. Weirdly the post that submitted it got/was deleted. Thanks all for the responses.\r\n","title":"Ignore words in some parts of the string while replacing using java regex","body":"<p>I am trying to detect and replace certain words in an html string. For e.g. I have a string like this:</p>\n<pre><code>&quot;cool span&lt;span class='Span'&gt; span spanspan the span&lt;/span&gt; what a span&quot;\n</code></pre>\n<p>I want to replace just the word 'span' (with 'xyz' for example) in this string outside of the tags (or basically ignore all string between angular brackets). Expected result:</p>\n<pre><code>&quot;cool xyz&lt;span class='Span'&gt; xyz spanspan the xyz&lt;/span&gt; what a xyz&quot;\n</code></pre>\n<p>I tried various regex patterns without any luck. I doubt if its even possible at this point with java regex.</p>\n<p>Thanks in advance for any help :)</p>\n<p>Edit: I found the regex that solves the problem - <code>(?&lt;!\\&lt;)\\bspan\\b(?!\\&gt;)</code>. Weirdly the post that submitted it got/was deleted. Thanks all for the responses.</p>\n"},{"tags":["java","adoptopenjdk"],"answers":[{"tags":[],"owner":{"account_id":5590149,"reputation":171,"user_id":4429618,"accept_rate":80,"display_name":"mccoyLBI"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1649882077,"creation_date":1649882077,"answer_id":71863569,"question_id":71833934,"body_markdown":"There could be a few reasons why this is happening.\r\n\r\nYou can check installed Java versions and view their locations by using Registry Editor. There are a few possible keys to check, depending on what JDKs you have installed.\r\n\r\n1. Standard Java -&gt; `HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft`\r\n2. Eclipse Foundation -&gt; `HKEY_LOCAL_MACHINE\\SOFTWARE\\Eclipse Foundation`\r\n3. Eclipse Adoptium -&gt; `HKEY_LOCAL_MACHINE\\SOFTWARE\\Eclipse Adoptium`\r\n\r\nIf you want to check using Windows Explorer, some common locations include `C:\\Program Files\\Java`, `C:\\Program Files\\Eclipse Foundation`, and `C:\\Program Files\\Eclipse Adoptium`\r\n\r\nIf you installed using VS Code&#39;s Java helper, then it most likely installed Eclipse Adoptium.\r\n\r\nLastly, you need to make sure that Java is added to your system&#39;s PATH environment variable, along with JAVA_HOME ([here is how you can do that][1]). \r\n\r\n*Note that you will need to know the locations of your installed JDK and JRE. That is why I listed how to find said items first.*\r\n\r\nHope this helps!\r\n\r\n\r\n  [1]: https://explainjava.com/set-java-path-and-java-home-windows/","title":"How do I configure the &quot;Eclipse Temurin JDK with Hotspot&quot; in VS Code after installation by the &quot;coding pack for java&quot;?","body":"<p>There could be a few reasons why this is happening.</p>\n<p>You can check installed Java versions and view their locations by using Registry Editor. There are a few possible keys to check, depending on what JDKs you have installed.</p>\n<ol>\n<li>Standard Java -&gt; <code>HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft</code></li>\n<li>Eclipse Foundation -&gt; <code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Eclipse Foundation</code></li>\n<li>Eclipse Adoptium -&gt; <code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Eclipse Adoptium</code></li>\n</ol>\n<p>If you want to check using Windows Explorer, some common locations include <code>C:\\Program Files\\Java</code>, <code>C:\\Program Files\\Eclipse Foundation</code>, and <code>C:\\Program Files\\Eclipse Adoptium</code></p>\n<p>If you installed using VS Code's Java helper, then it most likely installed Eclipse Adoptium.</p>\n<p>Lastly, you need to make sure that Java is added to your system's PATH environment variable, along with JAVA_HOME (<a href=\"https://explainjava.com/set-java-path-and-java-home-windows/\" rel=\"nofollow noreferrer\">here is how you can do that</a>).</p>\n<p><em>Note that you will need to know the locations of your installed JDK and JRE. That is why I listed how to find said items first.</em></p>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":18931277,"reputation":61,"user_id":18692220,"display_name":"Ankit Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12872,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71863569,"answer_count":1,"score":4,"last_activity_date":1649882077,"creation_date":1649708962,"question_id":71833934,"body_markdown":"I tried installing the JAVA JDK on my laptop, provided by the installer on VS Code website as a &quot;Coding pack for Java&quot;. It installed the JDK and the required extensions in VS Code. But then inside the editor, it didn&#39;t configure the JDK by itself. So I tried doing it manually and then I found that there is no &quot;JDK&quot; folder in the &quot;Program Files&quot; folder in C-drive. I tried to find everywhere inside that folder about the JDK, searched online at many places, and reinstalled it several times but still, nothing worked. I can&#39;t address the error. Please reach out to me if anyone knows the fix for it.\r\n\r\nThe following java version I tried to install:\r\n\r\nOpenJDK version &quot;17.0.2&quot; 2022-01-18\r\nOpenJDK Runtime Environment Temurin-17.0.2+8 (build 17.0.2+8)\r\nOpenJDK 64-Bit Server VM Temurin-17.0.2+8 (build 17.0.2+8, mixed mode, sharing)\r\n\r\nOperating system and platform:\r\nOS - Windows 10 pro 21H2 on x64\r\nPlatform - V.S.Code\r\n\r\n[VS Code can&#39;t configure the JDK][1]\r\n[1]: https://i.stack.imgur.com/VU0HH.png","title":"How do I configure the &quot;Eclipse Temurin JDK with Hotspot&quot; in VS Code after installation by the &quot;coding pack for java&quot;?","body":"<p>I tried installing the JAVA JDK on my laptop, provided by the installer on VS Code website as a &quot;Coding pack for Java&quot;. It installed the JDK and the required extensions in VS Code. But then inside the editor, it didn't configure the JDK by itself. So I tried doing it manually and then I found that there is no &quot;JDK&quot; folder in the &quot;Program Files&quot; folder in C-drive. I tried to find everywhere inside that folder about the JDK, searched online at many places, and reinstalled it several times but still, nothing worked. I can't address the error. Please reach out to me if anyone knows the fix for it.</p>\n<p>The following java version I tried to install:</p>\n<p>OpenJDK version &quot;17.0.2&quot; 2022-01-18\nOpenJDK Runtime Environment Temurin-17.0.2+8 (build 17.0.2+8)\nOpenJDK 64-Bit Server VM Temurin-17.0.2+8 (build 17.0.2+8, mixed mode, sharing)</p>\n<p>Operating system and platform:\nOS - Windows 10 pro 21H2 on x64\nPlatform - V.S.Code</p>\n<p>[VS Code can't configure the JDK][1]\n[1]: https://i.stack.imgur.com/VU0HH.png</p>\n"},{"tags":["java","list","linked-list","collectors","collect"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1649881903,"post_id":71863443,"comment_id":126991154,"body_markdown":"It seems, that you have multiple questions. Try to be more focused in your questions.","body":"It seems, that you have multiple questions. Try to be more focused in your questions."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1649882019,"post_id":71863443,"comment_id":126991197,"body_markdown":"[groupingBy][https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-] creates a map whose key is in this case the identity of the value, so if your s is &quot;3&quot; then the key is &quot;3&quot; as well. And the Value of each entry will be the amount of occurrences of for example &quot;3&quot;.","body":"[groupingBy][<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-]\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/str&zwnj;&#8203;eam/&hellip;</a> creates a map whose key is in this case the identity of the value, so if your s is &quot;3&quot; then the key is &quot;3&quot; as well. And the Value of each entry will be the amount of occurrences of for example &quot;3&quot;."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1649882128,"post_id":71863443,"comment_id":126991223,"body_markdown":"The `== 2` relates to the predicate given to the `removeIf` method. So, the entry &quot;s&quot; is getting removed if, its amount of occurrences in the map resulting from the groupingBy is equal to 2 it will be removed.","body":"The <code>== 2</code> relates to the predicate given to the <code>removeIf</code> method. So, the entry &quot;s&quot; is getting removed if, its amount of occurrences in the map resulting from the groupingBy is equal to 2 it will be removed."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":1,"creation_date":1649882170,"post_id":71863443,"comment_id":126991238,"body_markdown":"The evaluation of `linkedList.stream().collect(Collectors.groupingBy(Function.identity(), Collectors.counting())` should be extracted to its own variable before constructing it for every value when iterating it inside the removeIf.","body":"The evaluation of <code>linkedList.stream().collect(Collectors.groupingBy(Function.i&zwnj;&#8203;dentity(), Collectors.counting())</code> should be extracted to its own variable before constructing it for every value when iterating it inside the removeIf."},{"owner":{"account_id":21583873,"reputation":13,"user_id":15914665,"display_name":"weismann"},"score":1,"creation_date":1649883886,"post_id":71863443,"comment_id":126991673,"body_markdown":"@ValerijDobler like that? Map&lt;String, Long&gt; collector = linkedList.stream().collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));","body":"@ValerijDobler like that? Map&lt;String, Long&gt; collector = linkedList.stream().collect(Collectors.groupingBy(Function.i&zwnj;&#8203;dentity(), Collectors.counting()));"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1649923240,"post_id":71863443,"comment_id":126998953,"body_markdown":"Yes, maybe call it something more meaningful like `amountOfOccurences`","body":"Yes, maybe call it something more meaningful like <code>amountOfOccurences</code>"},{"owner":{"account_id":21583873,"reputation":13,"user_id":15914665,"display_name":"weismann"},"score":0,"creation_date":1649942826,"post_id":71863443,"comment_id":127005746,"body_markdown":"@ValerijDobler I did, but the output is empty.","body":"@ValerijDobler I did, but the output is empty."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1655477346,"post_id":71863443,"comment_id":128348782,"body_markdown":"Comparing the count with `2` will match when there are *exactly* two occurrences. It will not match when a value occurs three times, for example. Further, `removeIf` will remove *all* occurrences of matching elements, rather than keeping the first. And the approach is very inefficient. Change `LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();` to `LinkedHashSet&lt;String&gt; linkedList = new LinkedHashSet&lt;&gt;();` and it will prevent duplicates from being added in the first place, without the need for fixing afterwards. Then, rename `linkedList` to, e.g. `lines`, reflecting the purpose, not the type.","body":"Comparing the count with <code>2</code> will match when there are <i>exactly</i> two occurrences. It will not match when a value occurs three times, for example. Further, <code>removeIf</code> will remove <i>all</i> occurrences of matching elements, rather than keeping the first. And the approach is very inefficient. Change <code>LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();</code> to <code>LinkedHashSet&lt;String&gt; linkedList = new LinkedHashSet&lt;&gt;();</code> and it will prevent duplicates from being added in the first place, without the need for fixing afterwards. Then, rename <code>linkedList</code> to, e.g. <code>lines</code>, reflecting the purpose, not the type."}],"owner":{"account_id":21583873,"reputation":13,"user_id":15914665,"display_name":"weismann"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649881244,"creation_date":1649881244,"question_id":71863443,"body_markdown":"First I create a simple list of 6 items.\r\n\r\n    public static void main(String[] args) throws Exception{\r\n        Reader r = new InputStreamReader(System.in);\r\n        BufferedReader reader = new BufferedReader(r);\r\n\r\n        LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\r\n        System.out.println(&quot;  : &quot;);\r\n        for (int i=0; i&lt;6; i++)\r\n        {\r\n            String s = reader.readLine();\r\n            linkedList.add(s);\r\n        }\r\n\r\nAccording to the task, I need to remove from the list the elements whose values have already been encountered in previous elements.\r\n\r\n    linkedList.removeIf(\r\n                s -&gt;linkedList.stream().collect(Collectors.groupingBy(Function.identity(), Collectors.counting())).get(s) == 2);\r\n\r\nI understand what collect does. But how is the grouping going? And it is unclear what ==2 has to do with it after get(s).\r\nAs far as I understand, we are grouping by the value of the input argument (element) and by the amount of this value in the list. We get it using get(s). But how does ==2 work?","title":"How linkedlist.removeIf works in this case","body":"<p>First I create a simple list of 6 items.</p>\n<pre><code>public static void main(String[] args) throws Exception{\n    Reader r = new InputStreamReader(System.in);\n    BufferedReader reader = new BufferedReader(r);\n\n    LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\n    System.out.println(&quot;  : &quot;);\n    for (int i=0; i&lt;6; i++)\n    {\n        String s = reader.readLine();\n        linkedList.add(s);\n    }\n</code></pre>\n<p>According to the task, I need to remove from the list the elements whose values have already been encountered in previous elements.</p>\n<pre><code>linkedList.removeIf(\n            s -&gt;linkedList.stream().collect(Collectors.groupingBy(Function.identity(), Collectors.counting())).get(s) == 2);\n</code></pre>\n<p>I understand what collect does. But how is the grouping going? And it is unclear what ==2 has to do with it after get(s).\nAs far as I understand, we are grouping by the value of the input argument (element) and by the amount of this value in the list. We get it using get(s). But how does ==2 work?</p>\n"},{"tags":["java","rest","session","saml","saml-2.0"],"comments":[{"owner":{"account_id":2509000,"reputation":2724,"user_id":2181915,"accept_rate":50,"display_name":"tom"},"score":0,"creation_date":1382091481,"post_id":19446131,"comment_id":28834679,"body_markdown":"Use the second approach.  Many service providers will reject replayed tokens anyway.  Is this to authenticate users or your client software?","body":"Use the second approach.  Many service providers will reject replayed tokens anyway.  Is this to authenticate users or your client software?"},{"owner":{"account_id":1638358,"reputation":506,"user_id":1511277,"accept_rate":100,"display_name":"Nereis"},"score":0,"creation_date":1382097410,"post_id":19446131,"comment_id":28837788,"body_markdown":"It is to authenticate users","body":"It is to authenticate users"},{"owner":{"account_id":1407163,"reputation":443,"user_id":1334551,"display_name":"Yusuf Khan"},"score":0,"creation_date":1382106077,"post_id":19446131,"comment_id":28842862,"body_markdown":"You may also have a look using OAuth2 for the same if you&#39;re open to have SAML alternate.","body":"You may also have a look using OAuth2 for the same if you&#39;re open to have SAML alternate."},{"owner":{"account_id":4168761,"reputation":4800,"user_id":3417109,"display_name":"gx0r"},"score":0,"creation_date":1481135125,"post_id":19446131,"comment_id":69256490,"body_markdown":"There is no such thing as a SAML token. Did you mean putting the SAML Assertion in an Authorization header? Because a SAML assertion can only be consumed once, since it has a unique ID (to prevent replay attacks). Also, each SAML assertion typically only has a small window of time in which it is valid (usually just a few minutes).","body":"There is no such thing as a SAML token. Did you mean putting the SAML Assertion in an Authorization header? Because a SAML assertion can only be consumed once, since it has a unique ID (to prevent replay attacks). Also, each SAML assertion typically only has a small window of time in which it is valid (usually just a few minutes)."}],"answers":[{"tags":[],"owner":{"account_id":451267,"reputation":329,"user_id":847076,"display_name":"Zelgada"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1382386956,"creation_date":1382386956,"answer_id":19503966,"question_id":19446131,"body_markdown":"It is still draft, but: the OAuth2 SAML bearer profile may a possible solution.\r\nhttps://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-17\r\n\r\nUse a SAML2 to authenticate to an OAuth2 provider, then call your service with the OAuth2 token.","title":"REST API authentication with SAML","body":"<p>It is still draft, but: the OAuth2 SAML bearer profile may a possible solution.\n<a href=\"https://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-17\" rel=\"nofollow noreferrer\">https://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-17</a></p>\n<p>Use a SAML2 to authenticate to an OAuth2 provider, then call your service with the OAuth2 token.</p>\n"},{"tags":[],"owner":{"account_id":1820811,"reputation":6166,"user_id":1654930,"accept_rate":71,"display_name":"Phate"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649881215,"creation_date":1649881215,"answer_id":71863435,"question_id":19446131,"body_markdown":"Also, you could generate a jwt token and put it inside of a SAML attribute: from this moment on you could pass the jwt inside of an http header.\r\n\r\nIt is sort of mixing oauth with saml but if you still need the latter for authentication it could be the way to go.","title":"REST API authentication with SAML","body":"<p>Also, you could generate a jwt token and put it inside of a SAML attribute: from this moment on you could pass the jwt inside of an http header.</p>\n<p>It is sort of mixing oauth with saml but if you still need the latter for authentication it could be the way to go.</p>\n"}],"owner":{"account_id":1638358,"reputation":506,"user_id":1511277,"accept_rate":100,"display_name":"Nereis"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42934,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":19503966,"answer_count":2,"score":22,"last_activity_date":1649881215,"creation_date":1382088445,"question_id":19446131,"body_markdown":"I&#39;m struggling to design a SAML2.0 authentication for a REST API using a gateway. REST is used between my backend and my application. I&#39;m using Java Servlet filter and Spring. \r\n\r\nI see two possibilities:\r\n\r\n 1. Adding the SAML tokens into the header each time.\r\n\r\n 2. Authenticate once with SAML, then using a session or similar (secure conversation) between the client and the gateway.\r\n\r\n**Case 1:** It&#39;s a good solution because we are still RESTful but:\r\n\r\n - SAML tokens are quite big. It&#39;s may generated problem due to big header size.\r\n - Replaying tokens is not the best way for security concern.\r\n\r\n**Case 2:** It&#39;s no more stateless and I have to managed a link with the client. Since I use a gateway, the underlying services can still be RESTful.  \r\n\r\n\r\n\r\n\r\n\r\nCase 2 looks for the better choice despite the fact that it does not follow the rest constraints.\r\n\r\nIs someone had already to do it and give me some pointers (for design or implementation)?\r\n\r\nIs there a better way to do it with SAML?\r\n\r\nAny help or advice are welcome.\r\n\r\n\r\n","title":"REST API authentication with SAML","body":"<p>I'm struggling to design a SAML2.0 authentication for a REST API using a gateway. REST is used between my backend and my application. I'm using Java Servlet filter and Spring. </p>\n\n<p>I see two possibilities:</p>\n\n<ol>\n<li><p>Adding the SAML tokens into the header each time.</p></li>\n<li><p>Authenticate once with SAML, then using a session or similar (secure conversation) between the client and the gateway.</p></li>\n</ol>\n\n<p><strong>Case 1:</strong> It's a good solution because we are still RESTful but:</p>\n\n<ul>\n<li>SAML tokens are quite big. It's may generated problem due to big header size.</li>\n<li>Replaying tokens is not the best way for security concern.</li>\n</ul>\n\n<p><strong>Case 2:</strong> It's no more stateless and I have to managed a link with the client. Since I use a gateway, the underlying services can still be RESTful.  </p>\n\n<p>Case 2 looks for the better choice despite the fact that it does not follow the rest constraints.</p>\n\n<p>Is someone had already to do it and give me some pointers (for design or implementation)?</p>\n\n<p>Is there a better way to do it with SAML?</p>\n\n<p>Any help or advice are welcome.</p>\n"},{"tags":["java","arraylist","brackets","bufferedwriter"],"comments":[{"owner":{"account_id":1889592,"reputation":1805,"user_id":1708042,"display_name":"user1708042"},"score":0,"creation_date":1649878674,"post_id":71862953,"comment_id":126990154,"body_markdown":"hard to say anything if you don&#39;t tell what does getTitleRow() produce","body":"hard to say anything if you don&#39;t tell what does getTitleRow() produce"},{"owner":{"account_id":1998232,"reputation":79,"user_id":1789903,"accept_rate":47,"display_name":"horribly_n00bie"},"score":0,"creation_date":1649878955,"post_id":71862953,"comment_id":126990254,"body_markdown":"getTitleRow() just gets the headerRow list through a setTitleRow(), but all that does is get and set without changing anything.","body":"getTitleRow() just gets the headerRow list through a setTitleRow(), but all that does is get and set without changing anything."}],"answers":[{"tags":[],"owner":{"account_id":1889592,"reputation":1805,"user_id":1708042,"display_name":"user1708042"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649881181,"creation_date":1649879380,"answer_id":71863160,"question_id":71862953,"body_markdown":"The problem is that you use String.valueOf(list) as a way to get a comma separated list of values.\r\n\r\nThat is not good, cause the string representation of a list adds the brakets around its values: [value1, value2, value3, ...].\r\nA better solution is to replace String.valueOf() with\r\n\r\n    String.join(&quot;,&quot;, getTitleRow()));\r\n\r\nwhich yields:\r\n\r\n    2022-04-13,6 x 10,1,6,11\r\n\r\nthis is not perfect, since sometimes values require to be quoted (surrounded by &quot; &quot;), but it might be enough for your needs.\r\nAlternatively use a csv library like https://commons.apache.org/proper/commons-csv/.","title":"How do you get BufferedWriter to remove brackets from an ArrayList when writing to a file?","body":"<p>The problem is that you use String.valueOf(list) as a way to get a comma separated list of values.</p>\n<p>That is not good, cause the string representation of a list adds the brakets around its values: [value1, value2, value3, ...].\nA better solution is to replace String.valueOf() with</p>\n<pre><code>String.join(&quot;,&quot;, getTitleRow()));\n</code></pre>\n<p>which yields:</p>\n<pre><code>2022-04-13,6 x 10,1,6,11\n</code></pre>\n<p>this is not perfect, since sometimes values require to be quoted (surrounded by &quot; &quot;), but it might be enough for your needs.\nAlternatively use a csv library like <a href=\"https://commons.apache.org/proper/commons-csv/\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-csv/</a>.</p>\n"}],"owner":{"account_id":1998232,"reputation":79,"user_id":1789903,"accept_rate":47,"display_name":"horribly_n00bie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71863160,"answer_count":1,"score":0,"last_activity_date":1649881181,"creation_date":1649878263,"question_id":71862953,"body_markdown":"I have made a bufferedWriter to take an arraylist of things and comma separate them. It works well, but when I retrieve the data it starts adding extra brackets: [banana, potato, tomato, carrot] goes in and [[banana, potato, tomato, carrot]] comes out. This is the code that writes the file:\r\n\r\n    public static void writeToCSV() throws IOException {//Finds the file name.\r\n        BufferedWriter bufferedWriter = null;\r\n        try {\r\n            String gameHeader = String.valueOf(getTitleRow());\r\n            //Finds the file\r\n            File file = new File(&quot;_GAMES/&quot; + getSaveName() + &quot;_&quot; + stepped + &quot;.csv&quot;);\r\n\r\n            FileWriter fileWriter = new FileWriter(file);\r\n            bufferedWriter = new BufferedWriter(fileWriter);\r\n            bufferedWriter.write(gameHeader);\r\n\r\n            System.out.println(&quot;File: &quot; + getSaveName() + &quot; written&quot;);\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            try {\r\n                if (bufferedWriter!=null) {\r\n                    bufferedWriter.close();\r\n                }\r\n            } catch (Exception ex) {\r\n                System.out.println(&quot;Error in closing&quot; + ex);\r\n            }\r\n        }\r\n    }\r\n\r\nThis is the array list:\r\n\r\n    ArrayList&lt;String&gt; headerRow = new ArrayList&lt;&gt;();\r\n            headerRow.add(strDate);\r\n            headerRow.add(&quot;6 x 10&quot;);\r\n            headerRow.add(&quot;1&quot;);\r\n            headerRow.add(&quot;6&quot;);\r\n            headerRow.add(&quot;11&quot;);\r\n\r\nI also use a getter/setter to move the array list between scopes:\r\n\r\n    private static ArrayList&lt;String&gt; titleRow =  new ArrayList&lt;&gt;();\r\n\r\n    public static ArrayList&lt;String&gt; getTitleRow() {\r\n        return titleRow;\r\n    }\r\n\r\n    public void setTitleRow(ArrayList&lt;String&gt; titleRow) {\r\n        this.titleRow = new ArrayList&lt;&gt;(titleRow);\r\n    }\r\n\r\nI&#39;m sure there is a way to use regex to replace &quot;[&quot; and &quot;]&quot; with &quot;&quot; but I&#39;m not sure where to call it.","title":"How do you get BufferedWriter to remove brackets from an ArrayList when writing to a file?","body":"<p>I have made a bufferedWriter to take an arraylist of things and comma separate them. It works well, but when I retrieve the data it starts adding extra brackets: [banana, potato, tomato, carrot] goes in and [[banana, potato, tomato, carrot]] comes out. This is the code that writes the file:</p>\n<pre><code>public static void writeToCSV() throws IOException {//Finds the file name.\n    BufferedWriter bufferedWriter = null;\n    try {\n        String gameHeader = String.valueOf(getTitleRow());\n        //Finds the file\n        File file = new File(&quot;_GAMES/&quot; + getSaveName() + &quot;_&quot; + stepped + &quot;.csv&quot;);\n\n        FileWriter fileWriter = new FileWriter(file);\n        bufferedWriter = new BufferedWriter(fileWriter);\n        bufferedWriter.write(gameHeader);\n\n        System.out.println(&quot;File: &quot; + getSaveName() + &quot; written&quot;);\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            if (bufferedWriter!=null) {\n                bufferedWriter.close();\n            }\n        } catch (Exception ex) {\n            System.out.println(&quot;Error in closing&quot; + ex);\n        }\n    }\n}\n</code></pre>\n<p>This is the array list:</p>\n<pre><code>ArrayList&lt;String&gt; headerRow = new ArrayList&lt;&gt;();\n        headerRow.add(strDate);\n        headerRow.add(&quot;6 x 10&quot;);\n        headerRow.add(&quot;1&quot;);\n        headerRow.add(&quot;6&quot;);\n        headerRow.add(&quot;11&quot;);\n</code></pre>\n<p>I also use a getter/setter to move the array list between scopes:</p>\n<pre><code>private static ArrayList&lt;String&gt; titleRow =  new ArrayList&lt;&gt;();\n\npublic static ArrayList&lt;String&gt; getTitleRow() {\n    return titleRow;\n}\n\npublic void setTitleRow(ArrayList&lt;String&gt; titleRow) {\n    this.titleRow = new ArrayList&lt;&gt;(titleRow);\n}\n</code></pre>\n<p>I'm sure there is a way to use regex to replace &quot;[&quot; and &quot;]&quot; with &quot;&quot; but I'm not sure where to call it.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1649878843,"post_id":71862980,"comment_id":126990214,"body_markdown":"I can&#39;t actually understand your question, even though I think it&#39;s at least the third time you&#39;ve asked it.  It seems odd to me that you&#39;d use `Math.pow` when calculating an arithmetic sequence.   Maybe that&#39;s something you could reconsider.","body":"I can&#39;t actually understand your question, even though I think it&#39;s at least the third time you&#39;ve asked it.  It seems odd to me that you&#39;d use <code>Math.pow</code> when calculating an arithmetic sequence.   Maybe that&#39;s something you could reconsider."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1649878849,"post_id":71862980,"comment_id":126990216,"body_markdown":"Its not clear what is the output, and what it should be. I would strongly suggest using a debugger and stepping through your code.","body":"Its not clear what is the output, and what it should be. I would strongly suggest using a debugger and stepping through your code."},{"owner":{"account_id":24867017,"reputation":1,"user_id":18741956,"display_name":"Fernando"},"score":0,"creation_date":1649878988,"post_id":71862980,"comment_id":126990265,"body_markdown":"@Dawood ibn Kareem  So instead of Math.pow, what should I use?","body":"@Dawood ibn Kareem  So instead of Math.pow, what should I use?"},{"owner":{"account_id":24867017,"reputation":1,"user_id":18741956,"display_name":"Fernando"},"score":0,"creation_date":1649879102,"post_id":71862980,"comment_id":126990303,"body_markdown":"@matt  It&#39;s supposed to calculate starting from 4.8 and adding 7.2 each time. So 4.8 + 7.2 = 12 + 7.2 = 19.20 + 7.2 = 26.40 etc","body":"@matt  It&#39;s supposed to calculate starting from 4.8 and adding 7.2 each time. So 4.8 + 7.2 = 12 + 7.2 = 19.20 + 7.2 = 26.40 etc"},{"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"score":0,"creation_date":1649879110,"post_id":71862980,"comment_id":126990305,"body_markdown":"You are including the input prompt as part of what you describe as the output. be also aware that when you use  `System.out.println()`it appends a new line at the end so if you don&#39;t want that in your rewsponse, your `System.out.println( String.format(&quot;%5.2f&quot;,term) );` should be `System.out.print( String.format(&quot;%5.2f&quot;,term) );` and then the separator and a newline later","body":"You are including the input prompt as part of what you describe as the output. be also aware that when you use  <code>System.out.println()</code>it appends a new line at the end so if you don&#39;t want that in your rewsponse, your <code>System.out.println( String.format(&quot;%5.2f&quot;,term) );</code> should be <code>System.out.print( String.format(&quot;%5.2f&quot;,term) );</code> and then the separator and a newline later"}],"answers":[{"tags":[],"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649880234,"creation_date":1649879071,"answer_id":71863106,"question_id":71862980,"body_markdown":"As far as I can see you mixed up some operators. `*` is multiplication, not addition and `Math.pow` calculates `x^y`. I think what you want is `a0 + i * difference`.\r\n\r\nThe recursion can&#39;t be called in the for-loop. Recursion is an alternative for the loop. You should pass numTerms to the recursive function so it knows when to stop. Also in the recursive call you mixed up the parameters.\r\nI haven&#39;t tested it, but it could work like this.\r\n```\r\nprivate static double termRecursive (int i, double a0, double difference, int numTerms) {\r\n    if (i == numTerms - 1) {\r\n        System.out.println(String.format(&quot;%5.2f&quot;, a0));\r\n        return 0.0;\r\n    }\r\n    double totalDifference = difference + termRecursive(i+1, a0, difference, numTerms);\r\n    System.out.println(String.format(&quot;%5.2f&quot;, a0 + totalDifference ));\r\n    return totalDifference ;\r\n}\r\n```","title":"Arithmetic sequence in java. How to solve my coding? My code comes up with an output but its not the correct output","body":"<p>As far as I can see you mixed up some operators. <code>*</code> is multiplication, not addition and <code>Math.pow</code> calculates <code>x^y</code>. I think what you want is <code>a0 + i * difference</code>.</p>\n<p>The recursion can't be called in the for-loop. Recursion is an alternative for the loop. You should pass numTerms to the recursive function so it knows when to stop. Also in the recursive call you mixed up the parameters.\nI haven't tested it, but it could work like this.</p>\n<pre><code>private static double termRecursive (int i, double a0, double difference, int numTerms) {\n    if (i == numTerms - 1) {\n        System.out.println(String.format(&quot;%5.2f&quot;, a0));\n        return 0.0;\n    }\n    double totalDifference = difference + termRecursive(i+1, a0, difference, numTerms);\n    System.out.println(String.format(&quot;%5.2f&quot;, a0 + totalDifference ));\n    return totalDifference ;\n}\n</code></pre>\n"}],"owner":{"account_id":24867017,"reputation":1,"user_id":18741956,"display_name":"Fernando"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649880234,"creation_date":1649878384,"question_id":71862980,"body_markdown":"```java\r\n    public class ArithSeries {\r\n          \r\n          public static void main ( String [] arg ) {\r\n            \r\n            int option, numTerms;\r\n              double a0, difference, term;\r\n            double [] terms;\r\n            ConsoleInput ci;\r\n\r\n            ci=new ConsoleInput();\r\n            System.out.println();\r\n            System.out.println(&quot;      Enter option:&quot;);\r\n            System.out.println(&quot;       Explicit = 1&quot;);\r\n            System.out.println(&quot;      Recursive = 2&quot;);\r\n            while ( true ) {\r\n              option=ci.readInt(&quot;         option = ? &quot;);\r\n              if ( ( option == 1 ) || ( option == 2 ) ) break;\r\n            }\r\n            while ( true ) {\r\n              numTerms=ci.readInt(&quot;number of terms = ? &quot;);\r\n              if ( numTerms &gt; 0 ) break;\r\n            }\r\n            a0=ci.readDouble(&quot;             a0 = ? &quot;);\r\n            difference=ci.readDouble(&quot;     difference = ? &quot;);\r\n            System.out.println();\r\n            ci.close();\r\n\r\n            for ( int i=0; i&lt;numTerms; ++i ) {\r\n              if ( option == 1 ) term=termExplicit (i,a0,difference);\r\n              else               term=termRecursive(i,a0,difference);\r\n              System.out.println( String.format(&quot;%5.2f&quot;,term) );\r\n            }\r\n\r\n            return;\r\n          }\r\n\r\n          private static double termExplicit ( int i, double a0, double difference ) {\r\n\r\n          }\r\n\r\n          private static double termRecursive ( int i, double a0, double difference ) {\r\n\r\n          }\r\n        }\r\n\r\n```\r\nThis program is supposed to calculate and print out the terms of an arithmetic sequence.\r\n\r\nThe first method that is needed code `termExplicit` is supposed to calculate the `ith` term `ai` of the arithemtic sequence explicitly via `ai = a0 + i (difference)`\r\n\r\nThe second method `termRecursive` is supposed to calculate the `ith` term `ai` if the arithmetic sequence recursively via `ai = ai-1 + difference`. So in other words, this method should call itself.\r\n\r\nThis is what I came up with \r\n```java \r\n    private static double termExplicit ( int i, double a0, double difference ) {\r\n         return a0*Math.pow(difference,i);\r\n\r\n      private static double termRecursive ( int i, double a0, double difference ) {\r\n         if ( i == 0 ) return difference;\r\n         return a0+termRecursive(i-1, difference, a0);\r\n```\r\n\r\nFor example running the program with an explicit calculation of 10 terms using `a0 = 4.8` and `difference = 7.2` gives the following output \r\n\r\n`Enter option:   Explicit = 1  Recursive = 2  Option = 1  number of terms = 10    a0 = 4.8     difference 7.2`\r\nThe output is supposed to be this  \r\n`4.80--12.00--19.20--26.40--33.60....`\r\n","title":"Arithmetic sequence in java. How to solve my coding? My code comes up with an output but its not the correct output","body":"<pre class=\"lang-java prettyprint-override\"><code>    public class ArithSeries {\n          \n          public static void main ( String [] arg ) {\n            \n            int option, numTerms;\n              double a0, difference, term;\n            double [] terms;\n            ConsoleInput ci;\n\n            ci=new ConsoleInput();\n            System.out.println();\n            System.out.println(&quot;      Enter option:&quot;);\n            System.out.println(&quot;       Explicit = 1&quot;);\n            System.out.println(&quot;      Recursive = 2&quot;);\n            while ( true ) {\n              option=ci.readInt(&quot;         option = ? &quot;);\n              if ( ( option == 1 ) || ( option == 2 ) ) break;\n            }\n            while ( true ) {\n              numTerms=ci.readInt(&quot;number of terms = ? &quot;);\n              if ( numTerms &gt; 0 ) break;\n            }\n            a0=ci.readDouble(&quot;             a0 = ? &quot;);\n            difference=ci.readDouble(&quot;     difference = ? &quot;);\n            System.out.println();\n            ci.close();\n\n            for ( int i=0; i&lt;numTerms; ++i ) {\n              if ( option == 1 ) term=termExplicit (i,a0,difference);\n              else               term=termRecursive(i,a0,difference);\n              System.out.println( String.format(&quot;%5.2f&quot;,term) );\n            }\n\n            return;\n          }\n\n          private static double termExplicit ( int i, double a0, double difference ) {\n\n          }\n\n          private static double termRecursive ( int i, double a0, double difference ) {\n\n          }\n        }\n\n</code></pre>\n<p>This program is supposed to calculate and print out the terms of an arithmetic sequence.</p>\n<p>The first method that is needed code <code>termExplicit</code> is supposed to calculate the <code>ith</code> term <code>ai</code> of the arithemtic sequence explicitly via <code>ai = a0 + i (difference)</code></p>\n<p>The second method <code>termRecursive</code> is supposed to calculate the <code>ith</code> term <code>ai</code> if the arithmetic sequence recursively via <code>ai = ai-1 + difference</code>. So in other words, this method should call itself.</p>\n<p>This is what I came up with</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static double termExplicit ( int i, double a0, double difference ) {\n         return a0*Math.pow(difference,i);\n\n      private static double termRecursive ( int i, double a0, double difference ) {\n         if ( i == 0 ) return difference;\n         return a0+termRecursive(i-1, difference, a0);\n</code></pre>\n<p>For example running the program with an explicit calculation of 10 terms using <code>a0 = 4.8</code> and <code>difference = 7.2</code> gives the following output</p>\n<p><code>Enter option:   Explicit = 1  Recursive = 2  Option = 1  number of terms = 10    a0 = 4.8     difference 7.2</code>\nThe output is supposed to be this<br />\n<code>4.80--12.00--19.20--26.40--33.60....</code></p>\n"},{"tags":["java","console","keypress","instant"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1649880649,"post_id":71863272,"comment_id":126990781,"body_markdown":"This question looks similar to https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it","body":"This question looks similar to <a href=\"https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it\" title=\"how to read a single char from the console in java as the user types it\">stackoverflow.com/questions/1066318/&hellip;</a>"},{"owner":{"account_id":5752194,"reputation":1093,"user_id":4541480,"accept_rate":33,"display_name":"Nicofisi"},"score":2,"creation_date":1649880886,"post_id":71863272,"comment_id":126990852,"body_markdown":"Does this answer your question? [How to read a single char from the console in Java (as the user types it)?](https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it\">How to read a single char from the console in Java (as the user types it)?</a>"}],"owner":{"account_id":24929594,"reputation":7,"user_id":18796880,"display_name":"GWWillison"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649880183,"creation_date":1649880183,"question_id":71863272,"body_markdown":"I&#39;m trying to set the value of a variable to that of a keypress. It doesn&#39;t matter if the variable is set to the actual letter or the value of the letter. Just a way for the console to know which letter was pressed. AKA, I want to use WASD for Up, Down, Left, and Right. In order to do this, I need the console to accept my &quot;WASD&quot; inputs without being forced to hit enter each time I press a key. I&#39;m using Replit as my IDE if that makes anything easier. (JAVA)","title":"How Do I Instantly Read a Key Press In The Java Console? (No &quot;Enter&quot; Key Pressed)","body":"<p>I'm trying to set the value of a variable to that of a keypress. It doesn't matter if the variable is set to the actual letter or the value of the letter. Just a way for the console to know which letter was pressed. AKA, I want to use WASD for Up, Down, Left, and Right. In order to do this, I need the console to accept my &quot;WASD&quot; inputs without being forced to hit enter each time I press a key. I'm using Replit as my IDE if that makes anything easier. (JAVA)</p>\n"},{"tags":["java","class","data-binding","jackson"],"comments":[{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1649882918,"post_id":71863194,"comment_id":126991424,"body_markdown":"Hi and welcome to stack overflow.  This is just a guess, but perhaps the registrationDate field is actually null or not present in the returned json?  The error message states &quot;not marked as ignorable&quot; meaning, if the value is not there, throw an exception.  I&#39;m betting that if you changed your Service&#39;s registrationDate attribute to ignorable, things might start working better.  Just a guess though.","body":"Hi and welcome to stack overflow.  This is just a guess, but perhaps the registrationDate field is actually null or not present in the returned json?  The error message states &quot;not marked as ignorable&quot; meaning, if the value is not there, throw an exception.  I&#39;m betting that if you changed your Service&#39;s registrationDate attribute to ignorable, things might start working better.  Just a guess though."}],"owner":{"account_id":17230865,"reputation":1,"user_id":12475479,"display_name":"Jose Flores"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649879622,"creation_date":1649879622,"question_id":71863194,"body_markdown":"I need to correctly invoke a rest api but I am getting an error when executing my service below I show the LOG:\r\n\r\n    com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;registrationDate&quot; (class pe.com.claro.api.consultadeuda.bean.consultarclientes.response.BodyCC), not marked as ignorable (36 known properties: &quot;currencyRef&quot;, &quot;actualDue&quot;, &quot;name&quot;, &quot;accountTypeRef&quot;, &quot;secondaryRefCode&quot;, &quot;activeSegment&quot;, &quot;writeOff&quot;, &quot;oldestPastDueDate&quot;, &quot;actualPastDue&quot;, &quot;collectibleDue&quot;, &quot;id&quot;, &quot;services&quot;, &quot;lastModificationDate&quot; [truncated]])\r\n     at [Source: weblogic.net.http.KeepAliveStream@1f2182b9; line: 1, column: 120] \r\n\r\nTHE RESPONSE OF THE REST API IS AS FOLLOWS, I HAVE OMITTED PLACING SOME OBJECTS SO AS NOT TO MAKE THE COMMENT SO LONG, I HAVE PLACED THE SERVICE OBJECT BECAUSE THERE IS THE registrationDate FIELD THAT IS CAUSING ME PROBLEMS:\r\n\r\n    [\r\n        {\r\n            &quot;id&quot;: &quot;2511&quot;,\r\n            &quot;href&quot;: null,\r\n            &quot;baseType&quot;: null,\r\n            &quot;type&quot;: null,\r\n            &quot;name&quot;: &quot;BSCS-84253625&quot;,\r\n            &quot;debtorReference&quot;: {\r\n                &quot;id&quot;: &quot;1987&quot;,\r\n                &quot;href&quot;: null,\r\n                &quot;baseType&quot;: null,\r\n                &quot;type&quot;: null,\r\n                &quot;name&quot;: &quot;ALONSO REYNA DIAZ ALONSO REYNA DIAZ&quot;\r\n            }\r\n            &quot;services&quot;: [\r\n                {\r\n                    &quot;id&quot;: &quot;2427&quot;,\r\n                    &quot;href&quot;: null,\r\n                    &quot;baseType&quot;: null,\r\n                    &quot;type&quot;: null,\r\n                    &quot;name&quot;: &quot;Mobile Subscription&quot;,\r\n                    &quot;referenceNumber&quot;: &quot;CO_ID_00012022040855-1-SP2022040855&quot;,\r\n                    &quot;productLine&quot;: &quot;S&quot;,\r\n                    &quot;serialNumber&quot;: &quot;985212361&quot;,\r\n                    &quot;registrationDate&quot;: &quot;2022-04-08T17:29:43+02:00&quot;,\r\n                    &quot;activationDate&quot;: &quot;2021-11-30T23:00:00+01:00&quot;,\r\n                    &quot;deactivationDate&quot;: null,\r\n                    &quot;contractNumber&quot;: &quot;12022040855&quot;,\r\n                    &quot;serviceExternalCode&quot;: &quot;SP2022040855&quot;,\r\n                    &quot;subType&quot;: &quot;001&quot;\r\n                }\r\n            ],\r\n            &quot;activeSegment&quot;: null,\r\n            &quot;activeScoring&quot;: null\r\n        }\r\n    ]\r\n\r\nTHIS IS MY CLASS ConsultClientesResponseCCli , HERE I CREATED A LIST TO SHOW THE RESPONSE OF THE API REST.\r\n\r\n   \r\n\r\n     import lombok.Getter;\r\n        import lombok.Setter;\r\n        import java.util.List;\r\n        @Getter\r\n        @Setter\r\n        public class ConsultarClientesResponseCCli{\r\n          private List&lt;BodyCC&gt; body;\r\n        }\r\n\r\nThe BodyCC class: HERE ARE ALL FIELDS OF THE RESPONSE OF THE API REST TO WHICH I CONSUME.\r\n\r\n    public class BodyCC {\r\n        @JsonProperty(&quot;id&quot;)\r\n        private String id;\r\n        @JsonProperty(&quot;href&quot;)\r\n        private Object href;\r\n        @JsonProperty(&quot;baseType&quot;)\r\n        private Object baseType;\r\n        @JsonProperty(&quot;type&quot;)\r\n        private Object type;\r\n        @JsonProperty(&quot;name&quot;)\r\n        private String name;\r\n        @JsonProperty(&quot;debtorReference&quot;)\r\n        private DebtorReference debtorReference;\r\n        @JsonProperty(&quot;accountSrvRef&quot;)\r\n        private Object accountSrvRef;\r\n        @JsonProperty(&quot;accountLedgerRef&quot;)\r\n        private AccountLedgerRef accountLedgerRef;\r\n        @JsonProperty(&quot;accountTypeRef&quot;)\r\n        private AccountTypeRef accountTypeRef;\r\n        @JsonProperty(&quot;creationDate&quot;)\r\n        private String creationDate;\r\n        @JsonProperty(&quot;lastModificationDate&quot;)\r\n        private Object lastModificationDate;\r\n        @JsonProperty(&quot;oldestPastDueDate&quot;)\r\n        private Object oldestPastDueDate;\r\n        @JsonProperty(&quot;accountnumber&quot;)\r\n        private String accountnumber;\r\n        @JsonProperty(&quot;referenceNumber&quot;)\r\n        private String referenceNumber;\r\n        @JsonProperty(&quot;aging&quot;)\r\n        private Integer aging;\r\n        @JsonProperty(&quot;status&quot;)\r\n        private Status status;\r\n        @JsonProperty(&quot;actualDue&quot;)\r\n        private ActualDue actualDue;\r\n        @JsonProperty(&quot;actualPastDue&quot;)\r\n        private ActualPastDue actualPastDue;\r\n        @JsonProperty(&quot;collectibleDue&quot;)\r\n        private Object collectibleDue;\r\n        @JsonProperty(&quot;collectiblePastDue&quot;)\r\n        private Object collectiblePastDue;\r\n        @JsonProperty(&quot;securitized&quot;)\r\n        private Securitized securitized;\r\n        @JsonProperty(&quot;unbilled&quot;)\r\n        private Unbilled unbilled;\r\n        @JsonProperty(&quot;writeOff&quot;)\r\n        private WriteOff writeOff;\r\n        @JsonProperty(&quot;arranged&quot;)\r\n        private Arranged arranged;\r\n        @JsonProperty(&quot;unexpired&quot;)\r\n        private Unexpired unexpired;\r\n        @JsonProperty(&quot;provider&quot;)\r\n        private Provider provider;\r\n        @JsonProperty(&quot;parentAccount&quot;)\r\n        private Object parentAccount;\r\n        @JsonProperty(&quot;additionalData1&quot;)\r\n        private Object additionalData1;\r\n        @JsonProperty(&quot;additionalData2&quot;)\r\n        private Object additionalData2;\r\n        @JsonProperty(&quot;additionalData3&quot;)\r\n        private Object additionalData3;\r\n        @JsonProperty(&quot;secondaryRefCode&quot;)\r\n        private Object secondaryRefCode;\r\n        @JsonProperty(&quot;paymentResponsibles&quot;)\r\n        private List&lt;PaymentResponsible&gt; paymentResponsibles = null;\r\n        @JsonProperty(&quot;currencyRef&quot;)\r\n        private CurrencyRef currencyRef;\r\n        @JsonProperty(&quot;services&quot;)\r\n        private List&lt;Service&gt; services = null;\r\n        @JsonProperty(&quot;activeSegment&quot;)\r\n        private Object activeSegment;\r\n        @JsonProperty(&quot;activeScoring&quot;)\r\n        private Object activeScoring;\r\n    }\r\n\r\n\r\nmy rest api invocation class, which contains the implementation to call rest.\r\n\r\n    @Component\r\n    public class ConsultarClientesImpl implements ConsultarClientes {\r\n      private static final Logger logger = LoggerFactory.getLogger(ConsultarClientesImpl.class);\r\n      @Autowired\r\n      private PropiedadesExternas prop;\r\n      @Override\r\n      public ConsultarClientesResponseCCli consultarClientes(String msgx, String token, String identificationType,\r\n          String identificationValue) throws WSException {\r\n    \r\n        long tiempoInicio = System.currentTimeMillis();\r\n        String url = prop.wsConsultarClientesURL;\r\n        String contentType = prop.wsConsultarClientesContentType;\r\n        String metodo = prop.wsConsultarClientesMetodo;\r\n        WebResource webResource = null;\r\n        ConsultarClientesResponseCCli response = new ConsultarClientesResponseCCli();\r\n        try {\r\n          Client client = Client.create();\r\n          client.setConnectTimeout(prop.wsConsultarClientesTiempoConexion);\r\n          client.setReadTimeout(prop.wsConsultarClientesTiempoEjecucion);\r\n          webResource = client.resource(url).queryParam(&quot;identificationType&quot;, identificationType)\r\n              .queryParam(&quot;identificationValue&quot;, identificationValue);\r\n          logger.info(Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO + Constantes.URL+ webResource.getURI());\r\n    \r\n           List&lt;BodyCC&gt; body = webResource.accept(&quot;application/json&quot;).header(&quot;content-type&quot;, contentType).header(&quot;Authorization&quot;, &quot;Bearer &quot; + token).get(new GenericType&lt;List&lt;BodyCC&gt;&gt;(){});\r\n         response.setBody(body);\r\n         logger.info(Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO + Constantes.PARAM_SALIDA\r\n            + ClaroUtil.printPrettyJSONString(response));\r\n    \r\n        } catch (Exception e) {\r\n          logger.error(Constantes.ERROR + e.getMessage(), e);\r\n          capturarError(e, webResource);\r\n    \r\n        } finally {\r\n          logger.info(Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO\r\n              + &quot; Tiempo total de proceso(ms): &quot; + (System.currentTimeMillis() - tiempoInicio));\r\n          logger.info(\r\n              Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO + &quot; [FIN de metodo: &quot; + metodo);\r\n        }\r\n        return response;\r\n      }","title":"com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;registrationDate&quot;","body":"<p>I need to correctly invoke a rest api but I am getting an error when executing my service below I show the LOG:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;registrationDate&quot; (class pe.com.claro.api.consultadeuda.bean.consultarclientes.response.BodyCC), not marked as ignorable (36 known properties: &quot;currencyRef&quot;, &quot;actualDue&quot;, &quot;name&quot;, &quot;accountTypeRef&quot;, &quot;secondaryRefCode&quot;, &quot;activeSegment&quot;, &quot;writeOff&quot;, &quot;oldestPastDueDate&quot;, &quot;actualPastDue&quot;, &quot;collectibleDue&quot;, &quot;id&quot;, &quot;services&quot;, &quot;lastModificationDate&quot; [truncated]])\n at [Source: weblogic.net.http.KeepAliveStream@1f2182b9; line: 1, column: 120] \n</code></pre>\n<p>THE RESPONSE OF THE REST API IS AS FOLLOWS, I HAVE OMITTED PLACING SOME OBJECTS SO AS NOT TO MAKE THE COMMENT SO LONG, I HAVE PLACED THE SERVICE OBJECT BECAUSE THERE IS THE registrationDate FIELD THAT IS CAUSING ME PROBLEMS:</p>\n<pre><code>[\n    {\n        &quot;id&quot;: &quot;2511&quot;,\n        &quot;href&quot;: null,\n        &quot;baseType&quot;: null,\n        &quot;type&quot;: null,\n        &quot;name&quot;: &quot;BSCS-84253625&quot;,\n        &quot;debtorReference&quot;: {\n            &quot;id&quot;: &quot;1987&quot;,\n            &quot;href&quot;: null,\n            &quot;baseType&quot;: null,\n            &quot;type&quot;: null,\n            &quot;name&quot;: &quot;ALONSO REYNA DIAZ ALONSO REYNA DIAZ&quot;\n        }\n        &quot;services&quot;: [\n            {\n                &quot;id&quot;: &quot;2427&quot;,\n                &quot;href&quot;: null,\n                &quot;baseType&quot;: null,\n                &quot;type&quot;: null,\n                &quot;name&quot;: &quot;Mobile Subscription&quot;,\n                &quot;referenceNumber&quot;: &quot;CO_ID_00012022040855-1-SP2022040855&quot;,\n                &quot;productLine&quot;: &quot;S&quot;,\n                &quot;serialNumber&quot;: &quot;985212361&quot;,\n                &quot;registrationDate&quot;: &quot;2022-04-08T17:29:43+02:00&quot;,\n                &quot;activationDate&quot;: &quot;2021-11-30T23:00:00+01:00&quot;,\n                &quot;deactivationDate&quot;: null,\n                &quot;contractNumber&quot;: &quot;12022040855&quot;,\n                &quot;serviceExternalCode&quot;: &quot;SP2022040855&quot;,\n                &quot;subType&quot;: &quot;001&quot;\n            }\n        ],\n        &quot;activeSegment&quot;: null,\n        &quot;activeScoring&quot;: null\n    }\n]\n</code></pre>\n<p>THIS IS MY CLASS ConsultClientesResponseCCli , HERE I CREATED A LIST TO SHOW THE RESPONSE OF THE API REST.</p>\n<pre><code> import lombok.Getter;\n    import lombok.Setter;\n    import java.util.List;\n    @Getter\n    @Setter\n    public class ConsultarClientesResponseCCli{\n      private List&lt;BodyCC&gt; body;\n    }\n</code></pre>\n<p>The BodyCC class: HERE ARE ALL FIELDS OF THE RESPONSE OF THE API REST TO WHICH I CONSUME.</p>\n<pre><code>public class BodyCC {\n    @JsonProperty(&quot;id&quot;)\n    private String id;\n    @JsonProperty(&quot;href&quot;)\n    private Object href;\n    @JsonProperty(&quot;baseType&quot;)\n    private Object baseType;\n    @JsonProperty(&quot;type&quot;)\n    private Object type;\n    @JsonProperty(&quot;name&quot;)\n    private String name;\n    @JsonProperty(&quot;debtorReference&quot;)\n    private DebtorReference debtorReference;\n    @JsonProperty(&quot;accountSrvRef&quot;)\n    private Object accountSrvRef;\n    @JsonProperty(&quot;accountLedgerRef&quot;)\n    private AccountLedgerRef accountLedgerRef;\n    @JsonProperty(&quot;accountTypeRef&quot;)\n    private AccountTypeRef accountTypeRef;\n    @JsonProperty(&quot;creationDate&quot;)\n    private String creationDate;\n    @JsonProperty(&quot;lastModificationDate&quot;)\n    private Object lastModificationDate;\n    @JsonProperty(&quot;oldestPastDueDate&quot;)\n    private Object oldestPastDueDate;\n    @JsonProperty(&quot;accountnumber&quot;)\n    private String accountnumber;\n    @JsonProperty(&quot;referenceNumber&quot;)\n    private String referenceNumber;\n    @JsonProperty(&quot;aging&quot;)\n    private Integer aging;\n    @JsonProperty(&quot;status&quot;)\n    private Status status;\n    @JsonProperty(&quot;actualDue&quot;)\n    private ActualDue actualDue;\n    @JsonProperty(&quot;actualPastDue&quot;)\n    private ActualPastDue actualPastDue;\n    @JsonProperty(&quot;collectibleDue&quot;)\n    private Object collectibleDue;\n    @JsonProperty(&quot;collectiblePastDue&quot;)\n    private Object collectiblePastDue;\n    @JsonProperty(&quot;securitized&quot;)\n    private Securitized securitized;\n    @JsonProperty(&quot;unbilled&quot;)\n    private Unbilled unbilled;\n    @JsonProperty(&quot;writeOff&quot;)\n    private WriteOff writeOff;\n    @JsonProperty(&quot;arranged&quot;)\n    private Arranged arranged;\n    @JsonProperty(&quot;unexpired&quot;)\n    private Unexpired unexpired;\n    @JsonProperty(&quot;provider&quot;)\n    private Provider provider;\n    @JsonProperty(&quot;parentAccount&quot;)\n    private Object parentAccount;\n    @JsonProperty(&quot;additionalData1&quot;)\n    private Object additionalData1;\n    @JsonProperty(&quot;additionalData2&quot;)\n    private Object additionalData2;\n    @JsonProperty(&quot;additionalData3&quot;)\n    private Object additionalData3;\n    @JsonProperty(&quot;secondaryRefCode&quot;)\n    private Object secondaryRefCode;\n    @JsonProperty(&quot;paymentResponsibles&quot;)\n    private List&lt;PaymentResponsible&gt; paymentResponsibles = null;\n    @JsonProperty(&quot;currencyRef&quot;)\n    private CurrencyRef currencyRef;\n    @JsonProperty(&quot;services&quot;)\n    private List&lt;Service&gt; services = null;\n    @JsonProperty(&quot;activeSegment&quot;)\n    private Object activeSegment;\n    @JsonProperty(&quot;activeScoring&quot;)\n    private Object activeScoring;\n}\n</code></pre>\n<p>my rest api invocation class, which contains the implementation to call rest.</p>\n<pre><code>@Component\npublic class ConsultarClientesImpl implements ConsultarClientes {\n  private static final Logger logger = LoggerFactory.getLogger(ConsultarClientesImpl.class);\n  @Autowired\n  private PropiedadesExternas prop;\n  @Override\n  public ConsultarClientesResponseCCli consultarClientes(String msgx, String token, String identificationType,\n      String identificationValue) throws WSException {\n\n    long tiempoInicio = System.currentTimeMillis();\n    String url = prop.wsConsultarClientesURL;\n    String contentType = prop.wsConsultarClientesContentType;\n    String metodo = prop.wsConsultarClientesMetodo;\n    WebResource webResource = null;\n    ConsultarClientesResponseCCli response = new ConsultarClientesResponseCCli();\n    try {\n      Client client = Client.create();\n      client.setConnectTimeout(prop.wsConsultarClientesTiempoConexion);\n      client.setReadTimeout(prop.wsConsultarClientesTiempoEjecucion);\n      webResource = client.resource(url).queryParam(&quot;identificationType&quot;, identificationType)\n          .queryParam(&quot;identificationValue&quot;, identificationValue);\n      logger.info(Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO + Constantes.URL+ webResource.getURI());\n\n       List&lt;BodyCC&gt; body = webResource.accept(&quot;application/json&quot;).header(&quot;content-type&quot;, contentType).header(&quot;Authorization&quot;, &quot;Bearer &quot; + token).get(new GenericType&lt;List&lt;BodyCC&gt;&gt;(){});\n     response.setBody(body);\n     logger.info(Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO + Constantes.PARAM_SALIDA\n        + ClaroUtil.printPrettyJSONString(response));\n\n    } catch (Exception e) {\n      logger.error(Constantes.ERROR + e.getMessage(), e);\n      capturarError(e, webResource);\n\n    } finally {\n      logger.info(Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO\n          + &quot; Tiempo total de proceso(ms): &quot; + (System.currentTimeMillis() - tiempoInicio));\n      logger.info(\n          Constantes.CHAR_CORCHETE_IZQUIERDO + msgx + Constantes.CHAR_CORCHETE_DERECHO + &quot; [FIN de metodo: &quot; + metodo);\n    }\n    return response;\n  }\n</code></pre>\n"},{"tags":["java","thymeleaf"],"comments":[{"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1649774915,"post_id":71841478,"comment_id":126958393,"body_markdown":"As far as I know, this isn&#39;t possible.","body":"As far as I know, this isn&#39;t possible."}],"answers":[{"tags":[],"owner":{"account_id":16426356,"reputation":1936,"user_id":11866308,"display_name":"Allen D. Ball"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649879598,"creation_date":1649767732,"answer_id":71843040,"question_id":71841478,"body_markdown":"You need to create a Resolver:\r\n\r\n```java\r\nimport org.thymeleaf.templatemode.TemplateMode;\r\nimport org.thymeleaf.templateresolver.StringTemplateResolver;\r\n    ...\r\n    StringTemplateResolver resolver = new StringTemplateResolver();\r\n\r\n    resolver.setTemplateMode(TemplateMode.TEXT);\r\n    ...\r\n            en.setTemplateResolver(resolver);\r\n```\r\n","title":"I want to use Thymeleaf same as handlebars or freemarker","body":"<p>You need to create a Resolver:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.thymeleaf.templatemode.TemplateMode;\nimport org.thymeleaf.templateresolver.StringTemplateResolver;\n    ...\n    StringTemplateResolver resolver = new StringTemplateResolver();\n\n    resolver.setTemplateMode(TemplateMode.TEXT);\n    ...\n            en.setTemplateResolver(resolver);\n</code></pre>\n"}],"owner":{"account_id":5676036,"reputation":3884,"user_id":4489164,"accept_rate":38,"display_name":"Dickens A S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1649879598,"creation_date":1649761257,"question_id":71841478,"body_markdown":"I wanted to use Thymeleaf as simple string resolver like handlebars and did some code presuming it will work\r\n\r\npom.xml\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n  &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.15.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\ncode\r\n```\r\nMap&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\r\ndata.put(&quot;name&quot;, &quot;dickens&quot;);\r\ndata.put(&quot;age&quot;, &quot;100&quot;);\r\nTemplateEngine en = new TemplateEngine();\r\nContext c = new Context(Locale.ENGLISH, data);\r\nString p = en.process(&quot;Hello ${name} your age is ${age}&quot;, c);\r\nSystem.out.println(p);\r\n```\r\nThe output I am getting is\r\n```\r\nHello ${name} your age is ${age}\r\n```\r\nI am expecting it will print `Hello dickens your age is 100`&lt;br/&gt;\r\nI cannot to put `Hello [[${name}]] your age is [[${age}]]`&lt;br/&gt; that will be a major change everywhere, Is there any flag that I can enable string inline all places?\r\n\r\n","title":"I want to use Thymeleaf same as handlebars or freemarker","body":"<p>I wanted to use Thymeleaf as simple string resolver like handlebars and did some code presuming it will work</p>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n  &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n  &lt;version&gt;3.0.15.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>code</p>\n<pre><code>Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\ndata.put(&quot;name&quot;, &quot;dickens&quot;);\ndata.put(&quot;age&quot;, &quot;100&quot;);\nTemplateEngine en = new TemplateEngine();\nContext c = new Context(Locale.ENGLISH, data);\nString p = en.process(&quot;Hello ${name} your age is ${age}&quot;, c);\nSystem.out.println(p);\n</code></pre>\n<p>The output I am getting is</p>\n<pre><code>Hello ${name} your age is ${age}\n</code></pre>\n<p>I am expecting it will print <code>Hello dickens your age is 100</code><br/>\nI cannot to put <code>Hello [[${name}]] your age is [[${age}]]</code><br/> that will be a major change everywhere, Is there any flag that I can enable string inline all places?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":1,"creation_date":1649872343,"post_id":71861797,"comment_id":126988157,"body_markdown":"You are using an array, not a list.  You can&#39;t change the number of elements in an array, you would need to create a new array without the elements specified.","body":"You are using an array, not a list.  You can&#39;t change the number of elements in an array, you would need to create a new array without the elements specified."}],"answers":[{"tags":[],"owner":{"account_id":24520317,"reputation":103,"user_id":18433459,"display_name":"ilanfriedman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649875956,"creation_date":1649875956,"answer_id":71862547,"question_id":71861797,"body_markdown":"As Nexevis said, you can&#39;t really do what you want to do with arrays. You have 2 options:\r\n1. Go through the process of working with arrays and copying and transferring.\r\n\r\n   1.5) You can also use java.util.Arrays.sort() if you just want an array that&#39;s in the right order, but it seems like you want to remove them outright:\r\n```java\r\nArrays.sort(arr);\r\n```\r\n\r\n2. Use a `List&lt;Integer&gt;` because all you have to do is find the incorrect terms and then `remove()` them from the list. The length will automatically adjust. (I&#39;d be happy to demonstrate how you&#39;d do this if you want)","title":"Remove two items from the list so that it appears ordered","body":"<p>As Nexevis said, you can't really do what you want to do with arrays. You have 2 options:</p>\n<ol>\n<li><p>Go through the process of working with arrays and copying and transferring.</p>\n<p>1.5) You can also use java.util.Arrays.sort() if you just want an array that's in the right order, but it seems like you want to remove them outright:</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Arrays.sort(arr);\n</code></pre>\n<ol start=\"2\">\n<li>Use a <code>List&lt;Integer&gt;</code> because all you have to do is find the incorrect terms and then <code>remove()</code> them from the list. The length will automatically adjust. (I'd be happy to demonstrate how you'd do this if you want)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15388036,"reputation":106,"user_id":11101615,"display_name":""},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649878828,"creation_date":1649878828,"answer_id":71863055,"question_id":71861797,"body_markdown":"This is definitely not the best way to sort arrays. The most optimized way to sort would be to convert your array to a Collection and use *Collections.sort*.\r\n\r\n\r\nHowever - tried the below, using ArrayList to store the values to keep. (Also note, comparing as *arr[i] &gt; arr[i + 1]* will exclude the last element  added a dummy value.)\r\n\r\n&gt; `import java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;`\r\n\r\n\r\n\r\n    public class Trial {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        int arr[] = {1,2,3,7,4,5,9,6};\r\n        int n = arr.length;\r\n\r\n        int newarr[] = new int[n + 1];\r\n        for (int i = 0; i &lt; n; i++)\r\n            newarr[i] = arr[i];\r\n\r\n        newarr[n] = 1948; //Dummy Value Appended\r\n\r\n        printElements(newarr, n + 1);\r\n    }\r\n\r\n    static void printElements(int arr[], int n) {\r\n        //Define an ArrayList to store the values that would not be removed\r\n        List &lt; Integer &gt; valuesToKeep = new ArrayList &lt; Integer &gt; (Arrays.asList());\r\n        for (int i = 0; i &lt; n - 1; i++) {\r\n            if (arr[i] &gt; arr[i + 1]) {\r\n                System.out.print(&quot;Removing item: &quot; + arr[i] + &quot;\\n&quot;);\r\n\r\n            } else {\r\n                System.out.print(&quot;Keeping item: &quot; + arr[i] + &quot;\\n&quot;);\r\n                valuesToKeep.add(arr[i]); //Add\r\n            }\r\n        }\r\n        Object[] valuesToKeep_array = valuesToKeep.toArray();\r\n\r\n        //Print\r\n        System.out.print(&quot;\\nFinal Sorted Array: &quot;);\r\n        for (int i = 0; i &lt; valuesToKeep_array.length; i++) {\r\n            System.out.print(valuesToKeep_array[i]);\r\n        }\r\n    }}","title":"Remove two items from the list so that it appears ordered","body":"<p>This is definitely not the best way to sort arrays. The most optimized way to sort would be to convert your array to a Collection and use <em>Collections.sort</em>.</p>\n<p>However - tried the below, using ArrayList to store the values to keep. (Also note, comparing as <em>arr[i] &gt; arr[i + 1]</em> will exclude the last element  added a dummy value.)</p>\n<blockquote>\n<p><code>import java.util.ArrayList; import java.util.Arrays; import java.util.List;</code></p>\n</blockquote>\n<pre><code>public class Trial {\n\npublic static void main(String[] args) {\n\n    int arr[] = {1,2,3,7,4,5,9,6};\n    int n = arr.length;\n\n    int newarr[] = new int[n + 1];\n    for (int i = 0; i &lt; n; i++)\n        newarr[i] = arr[i];\n\n    newarr[n] = 1948; //Dummy Value Appended\n\n    printElements(newarr, n + 1);\n}\n\nstatic void printElements(int arr[], int n) {\n    //Define an ArrayList to store the values that would not be removed\n    List &lt; Integer &gt; valuesToKeep = new ArrayList &lt; Integer &gt; (Arrays.asList());\n    for (int i = 0; i &lt; n - 1; i++) {\n        if (arr[i] &gt; arr[i + 1]) {\n            System.out.print(&quot;Removing item: &quot; + arr[i] + &quot;\\n&quot;);\n\n        } else {\n            System.out.print(&quot;Keeping item: &quot; + arr[i] + &quot;\\n&quot;);\n            valuesToKeep.add(arr[i]); //Add\n        }\n    }\n    Object[] valuesToKeep_array = valuesToKeep.toArray();\n\n    //Print\n    System.out.print(&quot;\\nFinal Sorted Array: &quot;);\n    for (int i = 0; i &lt; valuesToKeep_array.length; i++) {\n        System.out.print(valuesToKeep_array[i]);\n    }\n}}\n</code></pre>\n"}],"owner":{"account_id":21583873,"reputation":13,"user_id":15914665,"display_name":"weismann"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71863055,"answer_count":2,"score":0,"last_activity_date":1649878828,"creation_date":1649871990,"question_id":71861797,"body_markdown":"I have made it so that I get the elements that cause the list to be unordered. But how to delete them, and then display the list without them?\r\n\r\n    public class Main16 {\r\n    public static void main(String[] args){\r\n\r\n        int arr[] = { 1, 2, 3, 7, 4, 5, 9, 6};\r\n        int n = arr.length;\r\n\r\n        printElements(arr, n);\r\n    }\r\n    static void printElements(int arr[], int n)\r\n    {\r\n\r\n        for (int i = 1; i &lt; n - 1; i++)\r\n        {\r\n            if (arr[i] &gt; arr[i + 1])\r\n                System.out.print(arr[i] + &quot; &quot;);\r\n        }\r\n    }\r\n}","title":"Remove two items from the list so that it appears ordered","body":"<p>I have made it so that I get the elements that cause the list to be unordered. But how to delete them, and then display the list without them?</p>\n<pre><code>public class Main16 {\npublic static void main(String[] args){\n\n    int arr[] = { 1, 2, 3, 7, 4, 5, 9, 6};\n    int n = arr.length;\n\n    printElements(arr, n);\n}\nstatic void printElements(int arr[], int n)\n{\n\n    for (int i = 1; i &lt; n - 1; i++)\n    {\n        if (arr[i] &gt; arr[i + 1])\n            System.out.print(arr[i] + &quot; &quot;);\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1522136875,"creation_date":1522136875,"answer_id":49507151,"question_id":49507090,"body_markdown":"You should not update entities in that way, this only fits for creating new entities.\r\n\r\n    productRepo.save(prod)\r\n\r\nCorrect way is to first load entity by id (this would attach object to session), update it and then save\r\n\r\n    Product existing = productRepo.findById(prod.getId());\r\n    existing.getStock().setCount(+prod.getStock().getCount());\r\n    productRepo.save(existing);\r\n\r\nBut in your code you receive &quot;unmanaged&quot; (that is not attached to hibernate session) object with existing ID (!), update it and save. Of course it would give an error","title":"Hibernate Spring JPA Session: A different object with the same identifier value was already associated with the session","body":"<p>You should not update entities in that way, this only fits for creating new entities.</p>\n\n<pre><code>productRepo.save(prod)\n</code></pre>\n\n<p>Correct way is to first load entity by id (this would attach object to session), update it and then save</p>\n\n<pre><code>Product existing = productRepo.findById(prod.getId());\nexisting.getStock().setCount(+prod.getStock().getCount());\nproductRepo.save(existing);\n</code></pre>\n\n<p>But in your code you receive \"unmanaged\" (that is not attached to hibernate session) object with existing ID (!), update it and save. Of course it would give an error</p>\n"},{"tags":[],"owner":{"account_id":2798671,"reputation":1041,"user_id":2407369,"accept_rate":83,"display_name":"Victor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649878685,"creation_date":1649878685,"answer_id":71863036,"question_id":49507090,"body_markdown":"Just for the ones that did not find the solution in the accepted answer - I have encountered the same Exception when introducing the VERSION column (via @Version annotation). \r\nI am posting this because in our case the Exception was misleading and it is possible that others to come across the same situation.\r\n\r\nIn more details, we introduced the VERSION column in order to address concurrent update issue. \r\nThe problem came around because we already had some records that automatically got null when table was altered with the new column (which is an expected behavior, nothing wrong here).\r\nThe thing we noticed was that **the exception was triggered only when trying to update the rows for which the VERSION column was null**.\r\n\r\nWe solved the issue by running a script which set VERSION column to 0 (zero) for the rows that had null.","title":"Hibernate Spring JPA Session: A different object with the same identifier value was already associated with the session","body":"<p>Just for the ones that did not find the solution in the accepted answer - I have encountered the same Exception when introducing the VERSION column (via @Version annotation).\nI am posting this because in our case the Exception was misleading and it is possible that others to come across the same situation.</p>\n<p>In more details, we introduced the VERSION column in order to address concurrent update issue.\nThe problem came around because we already had some records that automatically got null when table was altered with the new column (which is an expected behavior, nothing wrong here).\nThe thing we noticed was that <strong>the exception was triggered only when trying to update the rows for which the VERSION column was null</strong>.</p>\n<p>We solved the issue by running a script which set VERSION column to 0 (zero) for the rows that had null.</p>\n"}],"owner":{"account_id":12379405,"reputation":33,"user_id":9025727,"display_name":"Danny Lifino"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7096,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49507151,"answer_count":2,"score":1,"last_activity_date":1649878685,"creation_date":1522136636,"question_id":49507090,"body_markdown":"I am making a webshop in Java and I am currently working on the stock of the product. Everything is working fine, however I seem to get this confusing error which I don&#39;t know how to solve. \r\n\r\n\r\n    javax.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session : [nl.scalda.platenbaas.model.Stock#0191400002005]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:118) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:157) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:164) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:916) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.internal.SessionImpl.merge(SessionImpl.java:875) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.engine.spi.CascadingActions$6.cascade(CascadingActions.java:261) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:467) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:392) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:193) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.engine.internal.Cascade.cascade(Cascade.java:126) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:461) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:327) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:170) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:69) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\tat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:883) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\r\n\r\nMy method which saves the product and updates the stock:\r\n\r\n    @PostMapping(&quot;/products&quot;)\r\n    public ResponseEntity&lt;Product&gt; save(@RequestBody Product prod) {\r\n        if (!productRepo.existsById(prod.getEancode())) {\r\n            return ResponseEntity.ok().body(productRepo.save(prod));\r\n        }\r\n        prod.getStock().setCount(+prod.getStock().getCount());\r\n\r\n        return ResponseEntity.ok().body(productRepo.save(prod));\r\n    }\r\n\r\n\r\n\r\nMy Stock class: \r\n\r\n\r\n    @Id\r\n    private String stockId:\r\n\r\n    @JsonBackReference\r\n    @OneToOne(cascade = {PERSIST, MERGE}, fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;eancode&quot;)\r\n    @MapsId\r\n    private Product product;\r\n\r\n\r\n\r\nMy Product class: \r\n\r\n\r\n    @JsonManagedReference\r\n    @OneToOne(cascade = {PERSIST, MERGE}, fetch = FetchType.LAZY, mappedBy = &quot;product&quot;)\r\n    private Stock stock;\r\n\r\n\r\n\r\n\r\n","title":"Hibernate Spring JPA Session: A different object with the same identifier value was already associated with the session","body":"<p>I am making a webshop in Java and I am currently working on the stock of the product. Everything is working fine, however I seem to get this confusing error which I don't know how to solve. </p>\n\n<pre><code>javax.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session : [nl.scalda.platenbaas.model.Stock#0191400002005]\nat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:118) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:157) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:164) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:916) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.internal.SessionImpl.merge(SessionImpl.java:875) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.engine.spi.CascadingActions$6.cascade(CascadingActions.java:261) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:467) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:392) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:193) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.engine.internal.Cascade.cascade(Cascade.java:126) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.event.internal.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:461) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:327) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:170) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:69) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\nat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:883) ~[hibernate-core-5.2.12.Final.jar:5.2.12.Final]\n</code></pre>\n\n<p>My method which saves the product and updates the stock:</p>\n\n<pre><code>@PostMapping(\"/products\")\npublic ResponseEntity&lt;Product&gt; save(@RequestBody Product prod) {\n    if (!productRepo.existsById(prod.getEancode())) {\n        return ResponseEntity.ok().body(productRepo.save(prod));\n    }\n    prod.getStock().setCount(+prod.getStock().getCount());\n\n    return ResponseEntity.ok().body(productRepo.save(prod));\n}\n</code></pre>\n\n<p>My Stock class: </p>\n\n<pre><code>@Id\nprivate String stockId:\n\n@JsonBackReference\n@OneToOne(cascade = {PERSIST, MERGE}, fetch = FetchType.LAZY)\n@JoinColumn(name = \"eancode\")\n@MapsId\nprivate Product product;\n</code></pre>\n\n<p>My Product class: </p>\n\n<pre><code>@JsonManagedReference\n@OneToOne(cascade = {PERSIST, MERGE}, fetch = FetchType.LAZY, mappedBy = \"product\")\nprivate Stock stock;\n</code></pre>\n"},{"tags":["java","spring","spring-aop"],"comments":[{"owner":{"account_id":4099584,"reputation":2238,"user_id":3365479,"accept_rate":80,"display_name":"madteapot"},"score":0,"creation_date":1612948518,"post_id":66133760,"comment_id":116922675,"body_markdown":"Both stacktraces are starting from `MyProxy.someMethod(MyProxy.java:91)` however what is calling `someMethod`. Could there be multiple instances of `MyProxy`? Is there any springs profiles that could cause this? Does the behaviour change during startups or at runtime?","body":"Both stacktraces are starting from <code>MyProxy.someMethod(MyProxy.java:91)</code> however what is calling <code>someMethod</code>. Could there be multiple instances of <code>MyProxy</code>? Is there any springs profiles that could cause this? Does the behaviour change during startups or at runtime?"},{"owner":{"account_id":8652809,"reputation":155,"user_id":6477939,"display_name":"mp5er"},"score":0,"creation_date":1612951025,"post_id":66133760,"comment_id":116923883,"body_markdown":"In both stacktraces it&#39;s the same place where `someMethod` gets called. `MyProxy` is a singleton, so there should be only one instance and there are no spring profiles. After the beans are created at startup, the behaviour does not change at runtime.","body":"In both stacktraces it&#39;s the same place where <code>someMethod</code> gets called. <code>MyProxy</code> is a singleton, so there should be only one instance and there are no spring profiles. After the beans are created at startup, the behaviour does not change at runtime."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1612951308,"post_id":66133760,"comment_id":116924010,"body_markdown":"Your code doesn&#39;t really make sense, please add code that makes sense? Why a proxy, that you inject into it self using a dynamic proxy?","body":"Your code doesn&#39;t really make sense, please add code that makes sense? Why a proxy, that you inject into it self using a dynamic proxy?"},{"owner":{"account_id":8652809,"reputation":155,"user_id":6477939,"display_name":"mp5er"},"score":0,"creation_date":1612952223,"post_id":66133760,"comment_id":116924394,"body_markdown":"I don&#39;t inject the proxy into itself, there are two proxies which are chained. myProxy calls myDynamicProxy and myDynamicProxy calls myService.","body":"I don&#39;t inject the proxy into itself, there are two proxies which are chained. myProxy calls myDynamicProxy and myDynamicProxy calls myService."},{"owner":{"account_id":8652809,"reputation":155,"user_id":6477939,"display_name":"mp5er"},"score":0,"creation_date":1612960727,"post_id":66133760,"comment_id":116928101,"body_markdown":"I figured out, that it is the same problem as described here https://github.com/spring-projects/spring-framework/issues/12238. `getObject()` from `ProxyFactoryBean` is called before the properties (`interceptorNames`) are set. After that `advisorChainInitialized` in `ProxyFactoryBean` is set to `true` and the advices won&#39;t be updated.","body":"I figured out, that it is the same problem as described here <a href=\"https://github.com/spring-projects/spring-framework/issues/12238\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues/12238</a>. <code>getObject()</code> from <code>ProxyFactoryBean</code> is called before the properties (<code>interceptorNames</code>) are set. After that <code>advisorChainInitialized</code> in <code>ProxyFactoryBean</code> is set to <code>true</code> and the advices won&#39;t be updated."}],"answers":[{"tags":[],"owner":{"account_id":8652809,"reputation":155,"user_id":6477939,"display_name":"mp5er"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649878606,"creation_date":1649878606,"answer_id":71863023,"question_id":66133760,"body_markdown":"It was a bug in Spring Framework and has been fixed in Spring 5.3.14\r\n\r\nhttps://github.com/spring-projects/spring-framework/issues/12238","title":"Spring ProxyFactoryBean - Interceptor/Advice sometimes not called/missing","body":"<p>It was a bug in Spring Framework and has been fixed in Spring 5.3.14</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/issues/12238\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/issues/12238</a></p>\n"}],"owner":{"account_id":8652809,"reputation":155,"user_id":6477939,"display_name":"mp5er"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1649878606,"creation_date":1612947718,"question_id":66133760,"body_markdown":"My Spring beans should be called like this:\r\n\r\n    myProxy -&gt; myDynamicProxy -&gt; myInterceptor -&gt; myService\r\n\r\nThis works most of the time, but sometimes `myInterceptor` is skipped. \r\n\r\n## Code/Spring Configuration: ##\r\n\r\n### myProxy ###\r\n    \r\nClass (pseudo code)\r\n```\r\npublic class MyProxy implements MyService {\r\n\r\n    private final MyService target;\r\n\r\n    public MyProxy(final MyService target) {\r\n        this.target = target;\r\n    }\r\n\r\n    @Override\r\n    public void someMethod() {\r\n        target.someMethod();\r\n    }\r\n}\r\n```\r\nXML\r\n```\r\n&lt;bean id=&quot;myProxy&quot; class=&quot;com.mp5er.MyProxy&quot;&gt;\r\n    &lt;constructor-arg ref=&quot;myDynamicProxy&quot;/&gt;\r\n&lt;/bean&gt;\r\n```\r\n### myDynamicProxy ###\r\n\r\nXML\r\n```\r\n&lt;bean id=&quot;myDynamicProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\r\n    &lt;property name=&quot;proxyInterfaces&quot;&gt;\r\n        &lt;value&gt;com.mp5er.MyService&lt;/value&gt;\r\n    &lt;/property&gt;\r\n    &lt;property name=&quot;target&quot;&gt;\r\n        &lt;ref bean=&quot;myServiceImpl&quot; /&gt;\r\n    &lt;/property&gt;\r\n    &lt;property name=&quot;interceptorNames&quot;&gt;\r\n        &lt;list&gt;\r\n            &lt;idref bean=&quot;myInterceptor&quot; /&gt;\r\n        &lt;/list&gt;\r\n    &lt;/property&gt;\r\n&lt;/bean&gt;\r\n```\r\n### myInterceptor ###\r\n\r\nXML\r\n```\r\n&lt;bean id=&quot;myInterceptor&quot;\r\n      class=&quot;org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor&quot;&gt;\r\n    &lt;property name=&quot;authenticationManager&quot; ref=&quot;authenticationManager&quot; /&gt;\r\n    &lt;property name=&quot;accessDecisionManager&quot; ref=&quot;myAccessDecisionManager&quot; /&gt;\r\n    &lt;property name=&quot;objectDefinitionSource&quot;&gt;\r\n        &lt;value&gt;\r\n            myValue\r\n        &lt;/value&gt;\r\n    &lt;/property&gt;\r\n&lt;/bean&gt;\r\n```\r\n## Stacktrace (MethodSecurityInterceptor is called) ##\r\n```\r\nat com.mp5er.MyServiceImpl.someMethod(MyServiceImpl.java:256)\r\nat jdk.internal.reflect.GeneratedMethodAccessor1905.invoke(Unknown Source)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\nat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\nat net.sf.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:80)\r\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\nat com.sun.proxy.$Proxy240.someMethod(Unknown Source)\r\nat com.mp5er.MyProxy.someMethod(MyProxy.java:91)\r\n```\r\n## Stacktrace (MethodSecurityInterceptor is NOT called) ##\r\n```\r\nat com.mp5er.MyServiceImpl.someMethod(MyServiceImpl.java:256)\r\nat jdk.internal.reflect.GeneratedMethodAccessor1956.invoke(Unknown Source)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)\r\nat com.sun.proxy.$Proxy240.someMethod(Unknown Source)\r\nat com.mp5er.MyProxy.someMethod(MyProxy.java:91)\r\n```\r\n\r\nI&#39;m not able to debug the problem because it happens only on the build server. Somehow `myDynamicProxy` gets initialized without `myInterceptor`. The spring debug log shows, that ProxyFactoryBean#adviceChanged is not called after myInterceptor is initialized:\r\n\r\n```\r\n16:09:04,518 INFO  [net.sf.acegisecurity.intercept.AbstractSecurityInterceptor] Validated configuration attributes\r\n16:09:04,518 DEBUG [org.springframework.aop.framework.ProxyFactoryBean] Advice has changed; re-caching singleton instance\r\n```\r\n\r\nSpring version is 5.1.15.RELEASE and the application is running on Tomcat 8 with OpenJDK 11.0.9.\r\n","title":"Spring ProxyFactoryBean - Interceptor/Advice sometimes not called/missing","body":"<p>My Spring beans should be called like this:</p>\n<pre><code>myProxy -&gt; myDynamicProxy -&gt; myInterceptor -&gt; myService\n</code></pre>\n<p>This works most of the time, but sometimes <code>myInterceptor</code> is skipped.</p>\n<h2>Code/Spring Configuration:</h2>\n<h3>myProxy</h3>\n<p>Class (pseudo code)</p>\n<pre><code>public class MyProxy implements MyService {\n\n    private final MyService target;\n\n    public MyProxy(final MyService target) {\n        this.target = target;\n    }\n\n    @Override\n    public void someMethod() {\n        target.someMethod();\n    }\n}\n</code></pre>\n<p>XML</p>\n<pre><code>&lt;bean id=&quot;myProxy&quot; class=&quot;com.mp5er.MyProxy&quot;&gt;\n    &lt;constructor-arg ref=&quot;myDynamicProxy&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<h3>myDynamicProxy</h3>\n<p>XML</p>\n<pre><code>&lt;bean id=&quot;myDynamicProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\n    &lt;property name=&quot;proxyInterfaces&quot;&gt;\n        &lt;value&gt;com.mp5er.MyService&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;target&quot;&gt;\n        &lt;ref bean=&quot;myServiceImpl&quot; /&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;interceptorNames&quot;&gt;\n        &lt;list&gt;\n            &lt;idref bean=&quot;myInterceptor&quot; /&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<h3>myInterceptor</h3>\n<p>XML</p>\n<pre><code>&lt;bean id=&quot;myInterceptor&quot;\n      class=&quot;org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor&quot;&gt;\n    &lt;property name=&quot;authenticationManager&quot; ref=&quot;authenticationManager&quot; /&gt;\n    &lt;property name=&quot;accessDecisionManager&quot; ref=&quot;myAccessDecisionManager&quot; /&gt;\n    &lt;property name=&quot;objectDefinitionSource&quot;&gt;\n        &lt;value&gt;\n            myValue\n        &lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<h2>Stacktrace (MethodSecurityInterceptor is called)</h2>\n<pre><code>at com.mp5er.MyServiceImpl.someMethod(MyServiceImpl.java:256)\nat jdk.internal.reflect.GeneratedMethodAccessor1905.invoke(Unknown Source)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\nat net.sf.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:80)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\nat com.sun.proxy.$Proxy240.someMethod(Unknown Source)\nat com.mp5er.MyProxy.someMethod(MyProxy.java:91)\n</code></pre>\n<h2>Stacktrace (MethodSecurityInterceptor is NOT called)</h2>\n<pre><code>at com.mp5er.MyServiceImpl.someMethod(MyServiceImpl.java:256)\nat jdk.internal.reflect.GeneratedMethodAccessor1956.invoke(Unknown Source)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)\nat com.sun.proxy.$Proxy240.someMethod(Unknown Source)\nat com.mp5er.MyProxy.someMethod(MyProxy.java:91)\n</code></pre>\n<p>I'm not able to debug the problem because it happens only on the build server. Somehow <code>myDynamicProxy</code> gets initialized without <code>myInterceptor</code>. The spring debug log shows, that ProxyFactoryBean#adviceChanged is not called after myInterceptor is initialized:</p>\n<pre><code>16:09:04,518 INFO  [net.sf.acegisecurity.intercept.AbstractSecurityInterceptor] Validated configuration attributes\n16:09:04,518 DEBUG [org.springframework.aop.framework.ProxyFactoryBean] Advice has changed; re-caching singleton instance\n</code></pre>\n<p>Spring version is 5.1.15.RELEASE and the application is running on Tomcat 8 with OpenJDK 11.0.9.</p>\n"},{"tags":["java","discord-jda"],"comments":[{"owner":{"account_id":4999927,"reputation":952,"user_id":4019273,"display_name":"Cheshiremoe"},"score":0,"creation_date":1649884239,"post_id":71862894,"comment_id":126991783,"body_markdown":"Java naming convention says you should start class names with upper-case letters .... change testcommand to TestCommand so that it&#39;s easier to read.   Usually variables (instance objects) &amp; functions start with lower-case letters.","body":"Java naming convention says you should start class names with upper-case letters .... change testcommand to TestCommand so that it&#39;s easier to read.   Usually variables (instance objects) &amp; functions start with lower-case letters."}],"answers":[{"tags":[],"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649878477,"creation_date":1649878477,"answer_id":71862996,"question_id":71862894,"body_markdown":"Your issue is that you added `new Commands()` as your event listener. Your class is called `testcommand` so you have to do `addEventListeners(new testcommand())`. `Commands` is a class provided by JDA and used for the creation of [application commands](https://jda.wiki/using-jda/interactions/#command-interactions).","title":"Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Listener must implement EventListener","body":"<p>Your issue is that you added <code>new Commands()</code> as your event listener. Your class is called <code>testcommand</code> so you have to do <code>addEventListeners(new testcommand())</code>. <code>Commands</code> is a class provided by JDA and used for the creation of <a href=\"https://jda.wiki/using-jda/interactions/#command-interactions\" rel=\"nofollow noreferrer\">application commands</a>.</p>\n"}],"owner":{"account_id":23625153,"reputation":7,"user_id":17657806,"display_name":"Yohu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":527,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71862996,"answer_count":1,"score":0,"last_activity_date":1649878477,"creation_date":1649877919,"question_id":71862894,"body_markdown":"I tried to make a simple bot command which checks if the bot is working, and I encountered with the following error\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Listener must implement EventListener\r\n\r\nHere is my bot main code:\r\n\r\n```import net.dv8tion.jda.api.JDA;\r\nimport net.dv8tion.jda.api.JDABuilder;\r\nimport net.dv8tion.jda.api.entities.Activity;\r\nimport net.dv8tion.jda.api.events.message.GenericMessageEvent;\r\nimport net.dv8tion.jda.api.interactions.commands.build.Commands;\r\nimport org.jetbrains.annotations.NotNull;\r\n\r\nimport javax.security.auth.login.LoginException;\r\n\r\npublic class YoxMain {\r\n    public static void main(String[] args) throws LoginException {\r\n        JDA jda = JDABuilder.createDefault(&quot;token here&quot;)\r\n                .setActivity(Activity.watching(&quot;the server&quot;))\r\n                .addEventListeners(new Commands())\r\n                .build();\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nTest command code:\r\n\r\n```package events;\r\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\r\n\r\npublic class testcommand extends ListenerAdapter {\r\n    public void onMessageReceived(net.dv8tion.jda.api.events.message.MessageReceivedEvent event) {\r\n        if (event.getMessage().getContentRaw().equalsIgnoreCase(&quot;!test&quot;)) {\r\n            event.getChannel().sendMessage(&quot;Test&quot;).queue();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nI searched for answers in the internet, and none really helped me.","title":"Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Listener must implement EventListener","body":"<p>I tried to make a simple bot command which checks if the bot is working, and I encountered with the following error</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Listener must implement EventListener\n</code></pre>\n<p>Here is my bot main code:</p>\n<pre><code>import net.dv8tion.jda.api.JDABuilder;\nimport net.dv8tion.jda.api.entities.Activity;\nimport net.dv8tion.jda.api.events.message.GenericMessageEvent;\nimport net.dv8tion.jda.api.interactions.commands.build.Commands;\nimport org.jetbrains.annotations.NotNull;\n\nimport javax.security.auth.login.LoginException;\n\npublic class YoxMain {\n    public static void main(String[] args) throws LoginException {\n        JDA jda = JDABuilder.createDefault(&quot;token here&quot;)\n                .setActivity(Activity.watching(&quot;the server&quot;))\n                .addEventListeners(new Commands())\n                .build();\n\n    }\n\n}\n</code></pre>\n<p>Test command code:</p>\n<pre><code>import net.dv8tion.jda.api.hooks.ListenerAdapter;\n\npublic class testcommand extends ListenerAdapter {\n    public void onMessageReceived(net.dv8tion.jda.api.events.message.MessageReceivedEvent event) {\n        if (event.getMessage().getContentRaw().equalsIgnoreCase(&quot;!test&quot;)) {\n            event.getChannel().sendMessage(&quot;Test&quot;).queue();\n        }\n    }\n\n}\n</code></pre>\n<p>I searched for answers in the internet, and none really helped me.</p>\n"},{"tags":["java","localdate","dateformatter","localdatetime"],"comments":[{"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"score":0,"creation_date":1649698218,"post_id":71831879,"comment_id":126937027,"body_markdown":"How about the pattern `yyyy-MM-dd HH:mm:ss`?","body":"How about the pattern <code>yyyy-MM-dd HH:mm:ss</code>?"},{"owner":{"account_id":14168717,"reputation":23,"user_id":10235953,"display_name":"Krishna Lakshmi"},"score":0,"creation_date":1649698682,"post_id":71831879,"comment_id":126937195,"body_markdown":"i need only the time to be retrieved in the format &quot;hh:mm:ss&quot; cause thats the format which is accepted by the DB .","body":"i need only the time to be retrieved in the format &quot;hh:mm:ss&quot; cause thats the format which is accepted by the DB ."},{"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"score":0,"creation_date":1649749159,"post_id":71831879,"comment_id":126948479,"body_markdown":"Change the pattern in the `DateTimeFormatter` you are using and must do the work.","body":"Change the pattern in the <code>DateTimeFormatter</code> you are using and must do the work."},{"owner":{"account_id":14168717,"reputation":23,"user_id":10235953,"display_name":"Krishna Lakshmi"},"score":0,"creation_date":1649752029,"post_id":71831879,"comment_id":126949403,"body_markdown":"@EvgeniEnchev, I already tried and it dint work .","body":"@EvgeniEnchev, I already tried and it dint work ."},{"owner":{"account_id":14168717,"reputation":23,"user_id":10235953,"display_name":"Krishna Lakshmi"},"score":0,"creation_date":1649752200,"post_id":71831879,"comment_id":126949471,"body_markdown":"@Shark, I tried SimpleDateFormat and it returned a string , I again converted it to java.sql.Time and tried inserting and I get DataType Mismatch error which is weird , I tried inserting directly with the values formed in the query in java code and they are inserted fine . Not sure why I am unable to insert with Java code.","body":"@Shark, I tried SimpleDateFormat and it returned a string , I again converted it to java.sql.Time and tried inserting and I get DataType Mismatch error which is weird , I tried inserting directly with the values formed in the query in java code and they are inserted fine . Not sure why I am unable to insert with Java code."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649764221,"post_id":71831879,"comment_id":126953851,"body_markdown":"Are you saying that you are receiving a `Timestamp` (an old-fashioned `java.sql.Timestamp`) and you need to get the time of day from it? And you cant just set it to `00:00:00` every time?","body":"Are you saying that you are receiving a <code>Timestamp</code> (an old-fashioned <code>java.sql.Timestamp</code>) and you need to get the time of day from it? And you cant just set it to <code>00:00:00</code> every time?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649764399,"post_id":71831879,"comment_id":126953935,"body_markdown":"Isnt it as simple as `timestampFromGui.toLocalDateTime().toLocalTime()`? It may entail a time zone issue, but if you cant avoid using `Timestamp`, then theres no safe way to handle time zone.","body":"Isnt it as simple as <code>timestampFromGui.toLocalDateTime().toLocalTime()</code>? It may entail a time zone issue, but if you cant avoid using <code>Timestamp</code>, then theres no safe way to handle time zone."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649773464,"post_id":71831879,"comment_id":126957723,"body_markdown":"@Shark The question explicitly and wisely said *wihthout using SimpleDateFormat*. The `SimpleDateFormat` class is notoriously troublesome and long outdated, so I believe you can do everyone a favour by ***not*** suggesting it.","body":"@Shark The question explicitly and wisely said <i>wihthout using SimpleDateFormat</i>. The <code>SimpleDateFormat</code> class is notoriously troublesome and long outdated, so I believe you can do everyone a favour by <b><i>not</i></b> suggesting it."}],"answers":[{"tags":[],"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649754852,"creation_date":1649754436,"answer_id":71839917,"question_id":71831879,"body_markdown":"Well, this will give you the time:\r\n\r\n    LocalDateTime localDateTime = LocalDateTime.parse(&quot;2000-10-10 10:15:33.123456&quot;, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;));\r\n    String timeHHmmss = localDateTime.format(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;));\r\n    LocalTime localTime = LocalTime.parse(timeHHmmss);\r\n\r\nBut you cannot create Timestamp from LocalTime.\r\n","title":"How to retrieve time in hh:mm:ss format from Time stamp in Java","body":"<p>Well, this will give you the time:</p>\n<pre><code>LocalDateTime localDateTime = LocalDateTime.parse(&quot;2000-10-10 10:15:33.123456&quot;, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;));\nString timeHHmmss = localDateTime.format(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;));\nLocalTime localTime = LocalTime.parse(timeHHmmss);\n</code></pre>\n<p>But you cannot create Timestamp from LocalTime.</p>\n"}],"owner":{"account_id":14168717,"reputation":23,"user_id":10235953,"display_name":"Krishna Lakshmi"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1409,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1649878404,"creation_date":1649697678,"question_id":71831879,"body_markdown":"I have an issue related to retrieving time from time stamp. Below is the code, I get the timestamp from gui, which I need to convert into hh:mm:ss and insert into database. \r\n\r\n    LocalDate timestamp = LocalDate.parse(getOfferingLetter().getCreatedTimeStamp(),DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;));\r\n    Timestamp.valueOf(timestamp.atStartOfDay(); \r\n\r\nThe above code retrieves date like this `2022-04-08 00:00:00.0`. I need the time to be retrieved like this `00:00:00`, how do I do this without using `SimpleDateFormat`? \r\n","title":"How to retrieve time in hh:mm:ss format from Time stamp in Java","body":"<p>I have an issue related to retrieving time from time stamp. Below is the code, I get the timestamp from gui, which I need to convert into hh:mm:ss and insert into database.</p>\n<pre><code>LocalDate timestamp = LocalDate.parse(getOfferingLetter().getCreatedTimeStamp(),DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;));\nTimestamp.valueOf(timestamp.atStartOfDay(); \n</code></pre>\n<p>The above code retrieves date like this <code>2022-04-08 00:00:00.0</code>. I need the time to be retrieved like this <code>00:00:00</code>, how do I do this without using <code>SimpleDateFormat</code>?</p>\n"},{"tags":["java","android","notifications","operating-system"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1649857254,"post_id":71858303,"comment_id":126981982,"body_markdown":"I do not recall seeing an API for this, though I may be forgetting one. If this is your own custom firmware, you are in control of system update timing, so you could create your own API for this.","body":"I do not recall seeing an API for this, though I may be forgetting one. If this is your own custom firmware, you are in control of system update timing, so you could create your own API for this."}],"owner":{"account_id":5263378,"reputation":21,"user_id":4204222,"display_name":"Dave Brisko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1649878288,"creation_date":1649856439,"question_id":71858303,"body_markdown":"How do I query the android system in order to check the current status of download/installation of a system update?\r\n\r\nBackground: Our users are occassionally removing the battery/powering off device while in the middle of a download/os update. They cannot tell because of us running a limited view within our custom launcher/apps. We need a way to check the status and warn user if update happening ","title":"How to check if android system update is currently downloading in background?","body":"<p>How do I query the android system in order to check the current status of download/installation of a system update?</p>\n<p>Background: Our users are occassionally removing the battery/powering off device while in the middle of a download/os update. They cannot tell because of us running a limited view within our custom launcher/apps. We need a way to check the status and warn user if update happening</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":18361187,"reputation":686,"user_id":13373270,"display_name":"codebod"},"score":0,"creation_date":1649879948,"post_id":71862920,"comment_id":126990570,"body_markdown":"You&#39;re not actually associating the second layout with the activity. How would the Activity understand that you are trying to display the layout, and aren&#39;t just generating a bunch of java objects?","body":"You&#39;re not actually associating the second layout with the activity. How would the Activity understand that you are trying to display the layout, and aren&#39;t just generating a bunch of java objects?"},{"owner":{"display_name":"user16971245"},"score":0,"creation_date":1649880894,"post_id":71862920,"comment_id":126990854,"body_markdown":"I don&#39;t want to display the layout, I just need to get the id and change the text in the second xml.","body":"I don&#39;t want to display the layout, I just need to get the id and change the text in the second xml."},{"owner":{"account_id":18361187,"reputation":686,"user_id":13373270,"display_name":"codebod"},"score":0,"creation_date":1649881748,"post_id":71862920,"comment_id":126991110,"body_markdown":"With the `setText` method you have changed the value from &quot;Default Name&quot; to &quot;Mike&quot;. This is what you appear to be trying to achieve and you have demonstrated this has worked via the `Toast`. What isn&#39;t working?","body":"With the <code>setText</code> method you have changed the value from &quot;Default Name&quot; to &quot;Mike&quot;. This is what you appear to be trying to achieve and you have demonstrated this has worked via the <code>Toast</code>. What isn&#39;t working?"},{"owner":{"display_name":"user16971245"},"score":0,"creation_date":1649883127,"post_id":71862920,"comment_id":126991490,"body_markdown":"It will only show in toast message but in the actual text it will remain the same as &quot;Default Name&quot;","body":"It will only show in toast message but in the actual text it will remain the same as &quot;Default Name&quot;"},{"owner":{"account_id":18361187,"reputation":686,"user_id":13373270,"display_name":"codebod"},"score":0,"creation_date":1649883437,"post_id":71862920,"comment_id":126991565,"body_markdown":"By the &quot;actual text&quot; do you mean within the xml file? Are you trying to mutate the xml file at runtime? This is not a typical feature of Android.","body":"By the &quot;actual text&quot; do you mean within the xml file? Are you trying to mutate the xml file at runtime? This is not a typical feature of Android."},{"owner":{"display_name":"user16971245"},"score":0,"creation_date":1649883600,"post_id":71862920,"comment_id":126991608,"body_markdown":"What I&#39;m trying to do is to change the default text by the user name when they are login because the second xml file is a header in the app bar and this is the place where I want to change the default text by the user name. Is there a way on how I can achieve that?","body":"What I&#39;m trying to do is to change the default text by the user name when they are login because the second xml file is a header in the app bar and this is the place where I want to change the default text by the user name. Is there a way on how I can achieve that?"},{"owner":{"account_id":18361187,"reputation":686,"user_id":13373270,"display_name":"codebod"},"score":0,"creation_date":1649883953,"post_id":71862920,"comment_id":126991698,"body_markdown":"I think you need to post the main layout code, so that we can see how these things are connected.","body":"I think you need to post the main layout code, so that we can see how these things are connected."}],"owner":{"display_name":"user16971245"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":488,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649878085,"creation_date":1649878085,"question_id":71862920,"body_markdown":"**In my second.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:padding=&quot;20dp&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/myName&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_below=&quot;@id/userProfile&quot;\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:layout_marginBottom=&quot;10dp&quot;\r\n            android:fontFamily=&quot;@font/lato_regular&quot;\r\n            android:text=&quot;Default Name&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\n**In my onCreate method in MainActivity.java**\r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            LayoutInflater inflater = getLayoutInflater();\r\n            View view = inflater.inflate(R.layout.second, null, false);\r\n            TextView myNameSample = view.findViewById(R.id.myName);\r\n            myNameSample .setText(&quot;Mike&quot;);\r\n            Toast.makeText(this, myNameSample .getText(), Toast.LENGTH_SHORT).show();\r\n    }\r\nThe problem is it will not change current text &quot;Default Name&quot;, but when you look at the toast message it will show the new name &quot;Mike&quot;","title":"How can I access another xml layout in MainActivity Android?","body":"<p><strong>In my second.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:padding=&quot;20dp&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/myName&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@id/userProfile&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:layout_marginBottom=&quot;10dp&quot;\n        android:fontFamily=&quot;@font/lato_regular&quot;\n        android:text=&quot;Default Name&quot;\n        android:textSize=&quot;18sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p><strong>In my onCreate method in MainActivity.java</strong></p>\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        LayoutInflater inflater = getLayoutInflater();\n        View view = inflater.inflate(R.layout.second, null, false);\n        TextView myNameSample = view.findViewById(R.id.myName);\n        myNameSample .setText(&quot;Mike&quot;);\n        Toast.makeText(this, myNameSample .getText(), Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n<p>The problem is it will not change current text &quot;Default Name&quot;, but when you look at the toast message it will show the new name &quot;Mike&quot;</p>\n"},{"tags":["java","spring","docker","docker-compose"],"comments":[{"owner":{"account_id":4866881,"reputation":20471,"user_id":3924803,"display_name":"Hans Kilian"},"score":0,"creation_date":1649881624,"post_id":71862816,"comment_id":126991069,"body_markdown":"Your database is empty, so your program can&#39;t find the tables it expects","body":"Your database is empty, so your program can&#39;t find the tables it expects"},{"owner":{"account_id":22844906,"reputation":39,"user_id":16991369,"display_name":"Mykoliux"},"score":0,"creation_date":1649925373,"post_id":71862816,"comment_id":126999676,"body_markdown":"How come my database is empty. If I run it like regular Spring application it connects and picks the results from database and all is fine. But in Docker there is this problem.","body":"How come my database is empty. If I run it like regular Spring application it connects and picks the results from database and all is fine. But in Docker there is this problem."}],"owner":{"account_id":22844906,"reputation":39,"user_id":16991369,"display_name":"Mykoliux"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649877498,"creation_date":1649877498,"question_id":71862816,"body_markdown":"While launching my Docker container using &#39;docker-compose up&#39; command I get this type of error:\r\n\r\n    org.postgresql.util.PSQLException: ERROR: relation &quot;meetings&quot; does not exist\r\n\r\nMy application.properties file is this:\r\n\r\n    spring.datasource.url=jdbc:postgresql://postgresqldb:5432/meetingsdb?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&amp;stringtype=unspecified\r\n    spring.datasource.username=postgres\r\n    spring.datasource.password=db\r\n    spring.jpa.hibernate.ddl-auto=none\r\n\r\nMy Dockerfile is this:\r\n\r\n    FROM openjdk:11\r\n    ADD target/visma-meeting-app-withdb-0.0.1-SNAPSHOT.jar app.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n\r\nAnd my docker-compose.yaml file is this:\r\n\r\n    version: &#39;3.8&#39;\r\n    services:\r\n    app:\r\n    container_name: docker-meetings\r\n    image: docker_meetings\r\n    build: ./\r\n    ports:\r\n    - &quot;8080:8080&quot;\r\n    expose:\r\n    - &quot;8080&quot;\r\n    depends_on:\r\n    - postgresqldb\r\n    environment:\r\n    - SPRING_DATASOURCE_URL=jdbc:postgresql://postgresqldb:5432/meetingsdb?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&amp;stringtype=unspecified\r\n    - SPRING_DATASOURCE_USERNAME=postgres\r\n    - SPRING_DATASOURCE_PASSWORD=db\r\n    - SPRING_JPA_HIBERNATE_DDL_AUTO=none\r\n    postgresqldb:\r\n    image: postgres\r\n    ports:\r\n    - &quot;5432:5432&quot;\r\n    expose:\r\n    - &quot;5432&quot;\r\n    environment:\r\n    - POSTGRES_USER=postgres\r\n    - POSTGRES_PASSWORD=db\r\n    - POSTGRES_DB=meetingsdb\r\n\r\nWhen I try to run my application not in Docker everything seems to work fine, but when I do this using Docker I get an error. Can someone help? Has anyone encountered this problem before?","title":"Docker container with Spring and Postgres error. org.postgresql.util.PSQLException: ERROR: relation &quot;meetings&quot; does not exist","body":"<p>While launching my Docker container using 'docker-compose up' command I get this type of error:</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: relation &quot;meetings&quot; does not exist\n</code></pre>\n<p>My application.properties file is this:</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://postgresqldb:5432/meetingsdb?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&amp;stringtype=unspecified\nspring.datasource.username=postgres\nspring.datasource.password=db\nspring.jpa.hibernate.ddl-auto=none\n</code></pre>\n<p>My Dockerfile is this:</p>\n<pre><code>FROM openjdk:11\nADD target/visma-meeting-app-withdb-0.0.1-SNAPSHOT.jar app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n<p>And my docker-compose.yaml file is this:</p>\n<pre><code>version: '3.8'\nservices:\napp:\ncontainer_name: docker-meetings\nimage: docker_meetings\nbuild: ./\nports:\n- &quot;8080:8080&quot;\nexpose:\n- &quot;8080&quot;\ndepends_on:\n- postgresqldb\nenvironment:\n- SPRING_DATASOURCE_URL=jdbc:postgresql://postgresqldb:5432/meetingsdb?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&amp;stringtype=unspecified\n- SPRING_DATASOURCE_USERNAME=postgres\n- SPRING_DATASOURCE_PASSWORD=db\n- SPRING_JPA_HIBERNATE_DDL_AUTO=none\npostgresqldb:\nimage: postgres\nports:\n- &quot;5432:5432&quot;\nexpose:\n- &quot;5432&quot;\nenvironment:\n- POSTGRES_USER=postgres\n- POSTGRES_PASSWORD=db\n- POSTGRES_DB=meetingsdb\n</code></pre>\n<p>When I try to run my application not in Docker everything seems to work fine, but when I do this using Docker I get an error. Can someone help? Has anyone encountered this problem before?</p>\n"},{"tags":["java","maven","launch4j"],"comments":[{"owner":{"account_id":6671432,"reputation":304,"user_id":5147466,"accept_rate":38,"display_name":"Venkata Rahul S"},"score":0,"creation_date":1649678235,"post_id":71821106,"comment_id":126929173,"body_markdown":"A few questions:\n\n1. Are you building the maven application yourself or is it built by someone and you are merely consuming it? If you are just consuming what already exists, the entity (person/orgn) that created the application may have better ways of invoking the application as it is meant to be.. and if it is just about invoking, a curious question is why maven for sharing??\n2. For what purposes do you want the /bin added to the ENV variables? Only at build time? This is what I meant when I said &quot;as it is meant to be&quot;.","body":"A few questions:  1. Are you building the maven application yourself or is it built by someone and you are merely consuming it? If you are just consuming what already exists, the entity (person/orgn) that created the application may have better ways of invoking the application as it is meant to be.. and if it is just about invoking, a curious question is why maven for sharing?? 2. For what purposes do you want the /bin added to the ENV variables? Only at build time? This is what I meant when I said &quot;as it is meant to be&quot;."},{"owner":{"account_id":20863086,"reputation":3,"user_id":15419509,"display_name":"GamerCoder"},"score":0,"creation_date":1649685539,"post_id":71821106,"comment_id":126932236,"body_markdown":"@VenkataRahulS 1. This is my maven project that I&#39;m making myself.\n2. I want /bin (wrote from ProgramFiles, if good practice) added to the PATH system variable, preferably permanent, but it can be temporary during runtime, so that the batch files in there can be run from a Windows Terminal.","body":"@VenkataRahulS 1. This is my maven project that I&#39;m making myself. 2. I want /bin (wrote from ProgramFiles, if good practice) added to the PATH system variable, preferably permanent, but it can be temporary during runtime, so that the batch files in there can be run from a Windows Terminal."}],"answers":[{"tags":[],"owner":{"account_id":6671432,"reputation":304,"user_id":5147466,"accept_rate":38,"display_name":"Venkata Rahul S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649775487,"creation_date":1649775487,"answer_id":71844923,"question_id":71821106,"body_markdown":"Did you try the maven exec plugin?\r\n\r\nYou can potentially execute any command using the exec plugin but specifically if you want to invoke your own Java program which is the output of your build, you can use the exec:java target. Instead of executing your jar, you can directly mention the main class of your application and also furnish it with vm arguments.\r\n\r\nDetailed documentation is [here][1] \r\n\r\nPlease note that you can include the environment variables while invokign the exec target with the help of maven&#39;s own environment property access methods.\r\n\r\nThere is a lot more you can do with this plugin (create different run-modes using the configurations, run servers from within your project dependencies, redirect output to an error file (redirect the mvn output itself) and so on... Read the plugin documentation and try them all out..\r\n\r\n  [1]: https://www.mojohaus.org/exec-maven-plugin/java-mojo.html","title":"Add resources to System PATH","body":"<p>Did you try the maven exec plugin?</p>\n<p>You can potentially execute any command using the exec plugin but specifically if you want to invoke your own Java program which is the output of your build, you can use the exec:java target. Instead of executing your jar, you can directly mention the main class of your application and also furnish it with vm arguments.</p>\n<p>Detailed documentation is <a href=\"https://www.mojohaus.org/exec-maven-plugin/java-mojo.html\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Please note that you can include the environment variables while invokign the exec target with the help of maven's own environment property access methods.</p>\n<p>There is a lot more you can do with this plugin (create different run-modes using the configurations, run servers from within your project dependencies, redirect output to an error file (redirect the mvn output itself) and so on... Read the plugin documentation and try them all out..</p>\n"}],"owner":{"account_id":20863086,"reputation":3,"user_id":15419509,"display_name":"GamerCoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649877460,"creation_date":1649630727,"question_id":71821106,"body_markdown":"I have a Maven application that includes .bat files, for usage in Window&#39;s CLI.\r\n\r\nI&#39;m considering having my .exe export (using launch4j) to request admin permissions and copy the resources to a subfolder in Program Files, is this good practice or should I move them somewhere else? If it is, how could I add the folder&#39;s `/bin` path to the PATH environmental variable?\r\n\r\nFor more clarification, I want to do [this](https://learn.microsoft.com/en-us/previous-versions/office/developer/sharepoint-2010/ee537574(v=office.14)) with java.","title":"Add resources to System PATH","body":"<p>I have a Maven application that includes .bat files, for usage in Window's CLI.</p>\n<p>I'm considering having my .exe export (using launch4j) to request admin permissions and copy the resources to a subfolder in Program Files, is this good practice or should I move them somewhere else? If it is, how could I add the folder's <code>/bin</code> path to the PATH environmental variable?</p>\n<p>For more clarification, I want to do <a href=\"https://learn.microsoft.com/en-us/previous-versions/office/developer/sharepoint-2010/ee537574(v=office.14)\" rel=\"nofollow noreferrer\">this</a> with java.</p>\n"},{"tags":["java","csv","jackson","fasterxml"],"comments":[{"owner":{"account_id":9779820,"reputation":9709,"user_id":7248342,"display_name":"Thomas Fritsch"},"score":1,"creation_date":1649539886,"post_id":71778738,"comment_id":126902726,"body_markdown":"What is `columns` in `columns.column(field.toLowerCase())` in your code above?\nOr do you mean `schema` or `schemaWithHeaders` instead?","body":"What is <code>columns</code> in <code>columns.column(field.toLowerCase())</code> in your code above? Or do you mean <code>schema</code> or <code>schemaWithHeaders</code> instead?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1649682696,"post_id":71778738,"comment_id":126931073,"body_markdown":"@Thomas Fritsch good catch. it is schemaWithHeaders","body":"@Thomas Fritsch good catch. it is schemaWithHeaders"},{"owner":{"account_id":227992,"reputation":17441,"user_id":490018,"accept_rate":67,"display_name":"Sergey Vyacheslavovich Brunov"},"score":0,"creation_date":1649877243,"post_id":71778738,"comment_id":126989730,"body_markdown":"@gstackoverflow, could not reproduce it. Is it still reproducible? If it is, could you please provide the Jackson Maven dependency definitions that you are currently using?","body":"@gstackoverflow, could not reproduce it. Is it still reproducible? If it is, could you please provide the Jackson Maven dependency definitions that you are currently using?"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":404,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649877138,"creation_date":1649320056,"question_id":71778738,"body_markdown":"I have the following CSV file:\r\n\r\n    field_1,field_2\r\n      123, ewfwe\r\n     .....\r\n\r\n\r\n\r\nLets take a look at the following code:\r\n\r\n   \r\n    CsvSchema schema = CsvSchema.emptySchema()\r\n                .withUseHeader(true)\r\n                .withComments()\r\n                .withColumnSeparator(&#39;,&#39;);\r\n    ....\r\n    MappingIterator&lt;Map&lt;String, String&gt;&gt; iter = csvMapper.readerFor(Map.class)\r\n                .with(schema)\r\n                .readValues(new InputStreamReader(inputStream, replacingDecoder))\r\n    ...\r\n    List&lt;String&gt; requiredFieldsForAdd = Arrays.asList(\r\n    \t\t\t&quot;Field_1&quot;,\r\n    \t\t\t&quot;Field_2&quot;\r\n     );           \r\n     CsvSchema schemaWithHeaders = ((CsvSchema) iter.getParserSchema()).withColumnSeparator(columnSeparator);\r\n    \t\tfor (String field : requiredFieldsForAdd) {\r\n    \t\t\tif (Objects.isNull(schemaWithHeaders.column(field.toLowerCase()))) {\r\n    \t\t\t\tlog.warn(&quot;Missing required header for add {}&quot;, field);\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn true;\r\n    }\r\n\r\n\r\nThis code returns `false` (because of case difference in columns names), but I expect to see `true`. How can I achieve it?","title":"How to create case insensitive CsvSchema ising jackson?","body":"<p>I have the following CSV file:</p>\n<pre><code>field_1,field_2\n  123, ewfwe\n .....\n</code></pre>\n<p>Lets take a look at the following code:</p>\n<pre><code>CsvSchema schema = CsvSchema.emptySchema()\n            .withUseHeader(true)\n            .withComments()\n            .withColumnSeparator(',');\n....\nMappingIterator&lt;Map&lt;String, String&gt;&gt; iter = csvMapper.readerFor(Map.class)\n            .with(schema)\n            .readValues(new InputStreamReader(inputStream, replacingDecoder))\n...\nList&lt;String&gt; requiredFieldsForAdd = Arrays.asList(\n            &quot;Field_1&quot;,\n            &quot;Field_2&quot;\n );           \n CsvSchema schemaWithHeaders = ((CsvSchema) iter.getParserSchema()).withColumnSeparator(columnSeparator);\n        for (String field : requiredFieldsForAdd) {\n            if (Objects.isNull(schemaWithHeaders.column(field.toLowerCase()))) {\n                log.warn(&quot;Missing required header for add {}&quot;, field);\n                return false;\n            }\n        }\n        return true;\n}\n</code></pre>\n<p>This code returns <code>false</code> (because of case difference in columns names), but I expect to see <code>true</code>. How can I achieve it?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1649867727,"post_id":71860321,"comment_id":126986507,"body_markdown":"Thats exactly what you requested. You are rejecting the first occurrence and accepting all subsequent occurrences. When an element occurs *n* times, youll add it *n-1* times. In case of `7`, n=3.","body":"Thats exactly what you requested. You are rejecting the first occurrence and accepting all subsequent occurrences. When an element occurs <i>n</i> times, youll add it <i>n-1</i> times. In case of <code>7</code>, n=3."},{"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"score":0,"creation_date":1649868552,"post_id":71860321,"comment_id":126986826,"body_markdown":"@Holger yes i got it... when the third 7 comes around the add returns false again, which causes the adding of it into the end list.","body":"@Holger yes i got it... when the third 7 comes around the add returns false again, which causes the adding of it into the end list."}],"answers":[{"tags":[],"owner":{"account_id":20173270,"reputation":850,"user_id":14795595,"display_name":"0xRyN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649864967,"creation_date":1649864967,"answer_id":71860360,"question_id":71860321,"body_markdown":"You can use .distinct() function in your stream [check this out.][1]\r\n\r\n\r\n  [1]: https://howtodoinjava.com/java8/java-stream-distinct-examples/","title":"obtaining unique number from a list of duplicate integers using java 8 streams","body":"<p>You can use .distinct() function in your stream <a href=\"https://howtodoinjava.com/java8/java-stream-distinct-examples/\" rel=\"nofollow noreferrer\">check this out.</a></p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1649869603,"creation_date":1649868419,"answer_id":71861097,"question_id":71860321,"body_markdown":"Your filter rejects the first occurrence of each element and accepts all subsequent occurrences. Therefore, when an element occurs *n* times, youll add it *n-1* times.\r\n\r\nSince you want to accept all elements which occur more than once, but only accept them a single time, you could use `.filter(n -&gt; !setOfNmums.add(n)) .distinct()` or you enhance the set to a map, to be able to accept an element only on its second occurrence.\r\n\r\n```java\r\nMap&lt;Integer, Integer&gt; occurrences = new HashMap&lt;&gt;();\r\nList&lt;String&gt; result = Stream.of(5,6,7,7,7,6,2,4,2,4)\r\n    .filter(n -&gt; occurrences.merge(n, 1, Integer::sum) == 2)\r\n    .map(String::valueOf)\r\n    .sorted()\r\n    .collect(Collectors.toList());\r\n```\r\n\r\nBut generally, using stateful filters with streams is discouraged.\r\n\r\nA cleaner solution would be\r\n\r\n```java\r\nList&lt;String&gt; result = Stream.of(5,6,7,7,7,6,2,4,2,4)\r\n   .collect(Collectors.collectingAndThen(\r\n      Collectors.toMap(String::valueOf, x -&gt; true, (a,b) -&gt; false, TreeMap::new),\r\n      map -&gt; { map.values().removeIf(b -&gt; b); return new ArrayList&lt;&gt;(map.keySet()); }));\r\n```\r\n\r\nNote that this approach doesnt count the occurrences but only remembers whether an element is unique or has seen at least a second time. This works by mapping each element to true with the second argument to the `toMap` collector, `x -&gt; true`, and resolving multiple occurrences with a merge function of `(a,b) -&gt; false`. The subsequent `map.values().removeIf(b -&gt; b)` will remove all unique elements, i.e. those mapped to `true`.","title":"obtaining unique number from a list of duplicate integers using java 8 streams","body":"<p>Your filter rejects the first occurrence of each element and accepts all subsequent occurrences. Therefore, when an element occurs <em>n</em> times, youll add it <em>n-1</em> times.</p>\n<p>Since you want to accept all elements which occur more than once, but only accept them a single time, you could use <code>.filter(n -&gt; !setOfNmums.add(n)) .distinct()</code> or you enhance the set to a map, to be able to accept an element only on its second occurrence.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, Integer&gt; occurrences = new HashMap&lt;&gt;();\nList&lt;String&gt; result = Stream.of(5,6,7,7,7,6,2,4,2,4)\n    .filter(n -&gt; occurrences.merge(n, 1, Integer::sum) == 2)\n    .map(String::valueOf)\n    .sorted()\n    .collect(Collectors.toList());\n</code></pre>\n<p>But generally, using stateful filters with streams is discouraged.</p>\n<p>A cleaner solution would be</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; result = Stream.of(5,6,7,7,7,6,2,4,2,4)\n   .collect(Collectors.collectingAndThen(\n      Collectors.toMap(String::valueOf, x -&gt; true, (a,b) -&gt; false, TreeMap::new),\n      map -&gt; { map.values().removeIf(b -&gt; b); return new ArrayList&lt;&gt;(map.keySet()); }));\n</code></pre>\n<p>Note that this approach doesnt count the occurrences but only remembers whether an element is unique or has seen at least a second time. This works by mapping each element to true with the second argument to the <code>toMap</code> collector, <code>x -&gt; true</code>, and resolving multiple occurrences with a merge function of <code>(a,b) -&gt; false</code>. The subsequent <code>map.values().removeIf(b -&gt; b)</code> will remove all unique elements, i.e. those mapped to <code>true</code>.</p>\n"},{"tags":[],"owner":{"account_id":11854454,"reputation":433,"user_id":14999427,"display_name":"Suic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649876828,"creation_date":1649876828,"answer_id":71862700,"question_id":71860321,"body_markdown":"Since Holger already explained why your solution didn&#39;t work, I&#39;ll just provide an alternative.\r\n\r\nWhy not use `Collections.frequency(collection, element)` together with `distinct()`?\r\n\r\nThe solution would be quite simple(i apologize for the formatting, i just copied it from my ide and there doesn&#39;t seem to be an autoformat feature in SOF):\r\n```java\r\n        List&lt;Integer&gt; numbers = List.of(5, 6, 7, 7, 7, 6, 2, 4, 2, 4);\r\n        List&lt;String&gt; onlyDuplicates = numbers.stream()\r\n                .filter(n -&gt; Collections.frequency(numbers, n) &gt; 1)\r\n                .distinct()\r\n                .sorted()\r\n                .map(String::valueOf)\r\n                .toList();\r\n```\r\nThis simply keeps all elements that occur more than once and then filters out the duplicates before sorting, converting each element to a string and collecting to a list since that seems to be what you want.\r\n\r\nif you need a mutable list you can use `collect(toCollection(ArrayList::new))` instead of `toList()`","title":"obtaining unique number from a list of duplicate integers using java 8 streams","body":"<p>Since Holger already explained why your solution didn't work, I'll just provide an alternative.</p>\n<p>Why not use <code>Collections.frequency(collection, element)</code> together with <code>distinct()</code>?</p>\n<p>The solution would be quite simple(i apologize for the formatting, i just copied it from my ide and there doesn't seem to be an autoformat feature in SOF):</p>\n<pre class=\"lang-java prettyprint-override\"><code>        List&lt;Integer&gt; numbers = List.of(5, 6, 7, 7, 7, 6, 2, 4, 2, 4);\n        List&lt;String&gt; onlyDuplicates = numbers.stream()\n                .filter(n -&gt; Collections.frequency(numbers, n) &gt; 1)\n                .distinct()\n                .sorted()\n                .map(String::valueOf)\n                .toList();\n</code></pre>\n<p>This simply keeps all elements that occur more than once and then filters out the duplicates before sorting, converting each element to a string and collecting to a list since that seems to be what you want.</p>\n<p>if you need a mutable list you can use <code>collect(toCollection(ArrayList::new))</code> instead of <code>toList()</code></p>\n"}],"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":517,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":71861097,"answer_count":3,"score":0,"last_activity_date":1649876991,"creation_date":1649864814,"question_id":71860321,"body_markdown":"Im trying to obtain a only duplicated numbers list from a list of integers:\r\n\r\n\r\n    final Set&lt;Integer&gt; setOfNmums = new HashSet&lt;&gt;();\r\n    Arrays.asList(5,6,7,7,7,6,2,4,2,4).stream()\r\n            .peek(integer -&gt; System.out.println(&quot;XX -&gt; &quot; + integer))\r\n            .filter(n -&gt; !setOfNmums.add(n))\r\n            .peek(System.out::println)\r\n            .map(String::valueOf)\r\n            .sorted()\r\n            .collect(Collectors.toList());\r\n\r\n```none\r\nThe output is 2,4,6,7,7 \r\nExpected : 2,4,6,7\r\n```\r\n\r\nI dont understand how thats happening.. is this running in parallel? how am I getting two &#39;7&#39;?\r\n\r\nThe hashset should return false if it exists and that used by the filter?\r\n\r\nYes I can use distinct, but Im curious to know why would the filter fail.. is it being done in parallel?","title":"obtaining unique number from a list of duplicate integers using java 8 streams","body":"<p>Im trying to obtain a only duplicated numbers list from a list of integers:</p>\n<pre><code>final Set&lt;Integer&gt; setOfNmums = new HashSet&lt;&gt;();\nArrays.asList(5,6,7,7,7,6,2,4,2,4).stream()\n        .peek(integer -&gt; System.out.println(&quot;XX -&gt; &quot; + integer))\n        .filter(n -&gt; !setOfNmums.add(n))\n        .peek(System.out::println)\n        .map(String::valueOf)\n        .sorted()\n        .collect(Collectors.toList());\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>The output is 2,4,6,7,7 \nExpected : 2,4,6,7\n</code></pre>\n<p>I dont understand how thats happening.. is this running in parallel? how am I getting two '7'?</p>\n<p>The hashset should return false if it exists and that used by the filter?</p>\n<p>Yes I can use distinct, but Im curious to know why would the filter fail.. is it being done in parallel?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1408815,"reputation":2002,"user_id":1811348,"accept_rate":88,"display_name":"swapyonubuntu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649736566,"creation_date":1649736566,"answer_id":71836997,"question_id":71830762,"body_markdown":"You can try doing same using Servlet Filters.Here since you are using spring, `OncePerRequestFilter` can be great choice.\r\n\r\nhttps://www.baeldung.com/spring-onceperrequestfilter\r\n\r\nIn filter you can bind size per endpoint. There are various ways to do that \r\neg: you can make it configurable via configuration yaml.\r\n\r\n```\r\nendpoints:\r\n    /some/endpt: \r\n        supported-types: yaml,image\r\n        max-size:300\r\n    /some/other/endpt: \r\n        supported-types:image\r\n        max-size:300\r\n```\r\nWire this to a class using configurationproperties\r\nhttps://www.baeldung.com/configuration-properties-in-spring-boot#nested-properties\r\n\r\n```\r\nInitialize at start of filter \r\n\r\nMap&lt;String,String&gt; endpointMap = new HashMap&lt;&gt;();\r\nendpointMap.putAll(fromSpringconfigurationpropertiesmap)\r\n\r\n```\r\n\r\n```\r\n//use request.getUrl() or request.getServletPath() based on your requirement to get url\r\n\r\nendpointMap.get(&quot;urlFromRequest&quot;); // can return url+ supported types.\r\n//reject if size and supported type does not match logic here...\r\n```\r\n\r\nHope it helps.","title":"How to limit MultipartFile size per endpoint or controller (NOT globally)?","body":"<p>You can try doing same using Servlet Filters.Here since you are using spring, <code>OncePerRequestFilter</code> can be great choice.</p>\n<p><a href=\"https://www.baeldung.com/spring-onceperrequestfilter\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-onceperrequestfilter</a></p>\n<p>In filter you can bind size per endpoint. There are various ways to do that\neg: you can make it configurable via configuration yaml.</p>\n<pre><code>endpoints:\n    /some/endpt: \n        supported-types: yaml,image\n        max-size:300\n    /some/other/endpt: \n        supported-types:image\n        max-size:300\n</code></pre>\n<p>Wire this to a class using configurationproperties\n<a href=\"https://www.baeldung.com/configuration-properties-in-spring-boot#nested-properties\" rel=\"nofollow noreferrer\">https://www.baeldung.com/configuration-properties-in-spring-boot#nested-properties</a></p>\n<pre><code>Initialize at start of filter \n\nMap&lt;String,String&gt; endpointMap = new HashMap&lt;&gt;();\nendpointMap.putAll(fromSpringconfigurationpropertiesmap)\n\n</code></pre>\n<pre><code>//use request.getUrl() or request.getServletPath() based on your requirement to get url\n\nendpointMap.get(&quot;urlFromRequest&quot;); // can return url+ supported types.\n//reject if size and supported type does not match logic here...\n</code></pre>\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649876847,"creation_date":1649876847,"answer_id":71862706,"question_id":71830762,"body_markdown":"Based on the tips provided by [swapyonubuntu][1], create a bean to register a new filter. Then register your filter, may as well implement inline if this specific filter is only used for a very specific endpoint or two.\r\n\r\n```java\r\n@Configuration\r\npublic class LogoFilterConfig {\r\n\r\n    private static final List&lt;String&gt; VALID_LOGO_TYPES = Arrays.asList(\r\n            &quot;image/jpeg&quot;, &quot;image/jpg&quot;, &quot;image/svg&quot;, &quot;image/png&quot;\r\n    );\r\n    private static final long MAX_IMG_SIZE = 2000000;\r\n\r\n    @Bean\r\n    public FilterRegistrationBean&lt;Filter&gt; logoFilter(){\r\n        FilterRegistrationBean&lt;Filter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\r\n\r\n        registrationBean.setFilter(new OncePerRequestFilter() {\r\n\r\n            @Override\r\n            protected void doFilterInternal(\r\n                    HttpServletRequest request, HttpServletResponse response, FilterChain filterChain\r\n            ) throws ServletException, IOException {\r\n\r\n                if (!VALID_LOGO_TYPES.contains(request.getPart(&quot;logo&quot;).getContentType())) {\r\n                    response.sendError(HttpStatus.BAD_REQUEST.value(), &quot;Unsupported media type.&quot;);\r\n                    return;\r\n                    /*\r\n                        Returning here means the req/resp is never added to filterChain.\r\n                        \r\n                        The &#39;response&#39; is returned to the consumer in its current state, \r\n                        therefore it&#39;s best to modify it for better ux.\r\n                     */\r\n                }\r\n\r\n                if (request.getPart(&quot;logo&quot;).getSize() &gt; MAX_IMG_SIZE) {\r\n                    response.sendError(HttpStatus.BAD_REQUEST.value(), &quot;Logo too large, max allowed 2MB.&quot;);\r\n                    return;\r\n                }\r\n\r\n                /*\r\n                    Counterintuitively adding to the filter chain is how you allow the request to go through.\r\n                */\r\n                filterChain.doFilter(request, response);\r\n            }\r\n\r\n        });\r\n        registrationBean.addUrlPatterns(&quot;/my/logo&quot;);\r\n        registrationBean.setOrder(2);\r\n\r\n        return registrationBean;\r\n    }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/71836997/12302982","title":"How to limit MultipartFile size per endpoint or controller (NOT globally)?","body":"<p>Based on the tips provided by <a href=\"https://stackoverflow.com/a/71836997/12302982\">swapyonubuntu</a>, create a bean to register a new filter. Then register your filter, may as well implement inline if this specific filter is only used for a very specific endpoint or two.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class LogoFilterConfig {\n\n    private static final List&lt;String&gt; VALID_LOGO_TYPES = Arrays.asList(\n            &quot;image/jpeg&quot;, &quot;image/jpg&quot;, &quot;image/svg&quot;, &quot;image/png&quot;\n    );\n    private static final long MAX_IMG_SIZE = 2000000;\n\n    @Bean\n    public FilterRegistrationBean&lt;Filter&gt; logoFilter(){\n        FilterRegistrationBean&lt;Filter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\n\n        registrationBean.setFilter(new OncePerRequestFilter() {\n\n            @Override\n            protected void doFilterInternal(\n                    HttpServletRequest request, HttpServletResponse response, FilterChain filterChain\n            ) throws ServletException, IOException {\n\n                if (!VALID_LOGO_TYPES.contains(request.getPart(&quot;logo&quot;).getContentType())) {\n                    response.sendError(HttpStatus.BAD_REQUEST.value(), &quot;Unsupported media type.&quot;);\n                    return;\n                    /*\n                        Returning here means the req/resp is never added to filterChain.\n                        \n                        The 'response' is returned to the consumer in its current state, \n                        therefore it's best to modify it for better ux.\n                     */\n                }\n\n                if (request.getPart(&quot;logo&quot;).getSize() &gt; MAX_IMG_SIZE) {\n                    response.sendError(HttpStatus.BAD_REQUEST.value(), &quot;Logo too large, max allowed 2MB.&quot;);\n                    return;\n                }\n\n                /*\n                    Counterintuitively adding to the filter chain is how you allow the request to go through.\n                */\n                filterChain.doFilter(request, response);\n            }\n\n        });\n        registrationBean.addUrlPatterns(&quot;/my/logo&quot;);\n        registrationBean.setOrder(2);\n\n        return registrationBean;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71862706,"answer_count":2,"score":0,"last_activity_date":1649876847,"creation_date":1649692250,"question_id":71830762,"body_markdown":"I want to set a unique file size limit per endpoint or per controller. \r\n\r\nI am aware I can set a global file size limit with the following properties, but this is NOT what I want to do, I want UNIQUE LIMIT PER ENDPOINT or CONTROLLER:\r\n```yaml\r\nspring:\r\n  servlet:\r\n    multipart:\r\n      max-file-size: 1MB\r\n      max-request-size: 1MB\r\n```\r\n\r\nI have created a custom validator, but that is not good enough, I want to prevent the user from calling the endpoint rather than throw away files that are too large, I want to prevent the upload.\r\n\r\n```java\r\npublic class LogoValidator implements ConstraintValidator&lt;ValidLogo, MultipartFile&gt; {\r\n\r\n    private static final String[] validLogoTypes = new String[]{&quot;image/jpg&quot;, &quot;image/jpeg&quot;, &quot;image/png&quot;, &quot;image/svg&quot;};\r\n    private static final long MAX_LOGO_SIZE = 1024L * 1024L;\r\n\r\n    @Override\r\n    public boolean isValid(MultipartFile file, ConstraintValidatorContext context) {\r\n\r\n        if (file.getSize() &gt; MAX_LOGO_SIZE) {\r\n            return false;\r\n        }\r\n\r\n        for(String type : validLogoTypes) {\r\n            if (type.equals(file.getContentType())) return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\n@Documented\r\n@Constraint(validatedBy = LogoValidator.class)\r\n@Target( {ElementType.METHOD, ElementType.FIELD })\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface ValidLogo {\r\n    String message() default &quot;Invalid logo.&quot;;\r\n}\r\n```","title":"How to limit MultipartFile size per endpoint or controller (NOT globally)?","body":"<p>I want to set a unique file size limit per endpoint or per controller.</p>\n<p>I am aware I can set a global file size limit with the following properties, but this is NOT what I want to do, I want UNIQUE LIMIT PER ENDPOINT or CONTROLLER:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  servlet:\n    multipart:\n      max-file-size: 1MB\n      max-request-size: 1MB\n</code></pre>\n<p>I have created a custom validator, but that is not good enough, I want to prevent the user from calling the endpoint rather than throw away files that are too large, I want to prevent the upload.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class LogoValidator implements ConstraintValidator&lt;ValidLogo, MultipartFile&gt; {\n\n    private static final String[] validLogoTypes = new String[]{&quot;image/jpg&quot;, &quot;image/jpeg&quot;, &quot;image/png&quot;, &quot;image/svg&quot;};\n    private static final long MAX_LOGO_SIZE = 1024L * 1024L;\n\n    @Override\n    public boolean isValid(MultipartFile file, ConstraintValidatorContext context) {\n\n        if (file.getSize() &gt; MAX_LOGO_SIZE) {\n            return false;\n        }\n\n        for(String type : validLogoTypes) {\n            if (type.equals(file.getContentType())) return true;\n        }\n\n        return false;\n    }\n\n}\n\n@Documented\n@Constraint(validatedBy = LogoValidator.class)\n@Target( {ElementType.METHOD, ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface ValidLogo {\n    String message() default &quot;Invalid logo.&quot;;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-data-jpa"],"comments":[{"owner":{"display_name":"user14687465"},"score":0,"creation_date":1649875572,"post_id":71861930,"comment_id":126989201,"body_markdown":"Show all constructors of USR class. Empty, not empty, semi empty. All you got.","body":"Show all constructors of USR class. Empty, not empty, semi empty. All you got."}],"answers":[{"tags":[],"owner":{"display_name":"user14687465"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649876302,"creation_date":1649873455,"answer_id":71862094,"question_id":71861930,"body_markdown":"Change this:\r\n\r\n    @Query(&quot;SELECT o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt FROM USR o WHERE o.usrNo=?1&quot;) \r\n    USR findUsrRecordByUsrNo(Integer usrNo);\r\n    }\r\n\r\nwith this:\r\n\r\n    @Query(&quot;SELECT new com.newprof.userApp.domain.USR(o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt) FROM USR o WHERE o.usrNo=?1&quot;) \r\n    USR findUsrRecordByUsrNo(Integer usrNo);\r\n    }\r\n\r\n\r\nIn exception it says: Failed to convert from type [java.lang.Object[]] to type [com.newprof.userApp.domain.USR].\r\n\r\nWhich basically means that your query statement returns an **object array**: java.lang.Object[].\r\n\r\nSo my plan is, you call your **USR constructor** straightaway in your query.\r\n\r\n**EDIT**\r\n\r\n\r\nFOUND THE ANSWER. \r\n\r\nSo you added this into your query: \r\n\r\n    new com.newprof.userApp.domain.USR(o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt)\r\n\r\n\r\nAnd it now says to you: Cannot resolve constructor com.newprof.userApp.domain.USR(). IT IS RUGHT. Because **there is no such constructor**. You need to add it to your entity.\r\n\r\nYou need to add something like this:\r\n\r\n    public USR (Integer usrNo, Integer usrAddress, String usrCountry, String usrState, String usrSt) {\r\n    this.usrNo = usrNo;\r\n    this.usrAddress = usrAddress;\r\n    this.usrCountry = usrCountry;\r\n    this.usrState = usrState;\r\n    this.usrSt = isrSt;\r\n    }\r\n\r\nThis brand new Constructor will be called in statement `new com.newprof.userApp.domain.USR(o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt)` :D","title":"Spring data jpa exception","body":"<p>Change this:</p>\n<pre><code>@Query(&quot;SELECT o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt FROM USR o WHERE o.usrNo=?1&quot;) \nUSR findUsrRecordByUsrNo(Integer usrNo);\n}\n</code></pre>\n<p>with this:</p>\n<pre><code>@Query(&quot;SELECT new com.newprof.userApp.domain.USR(o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt) FROM USR o WHERE o.usrNo=?1&quot;) \nUSR findUsrRecordByUsrNo(Integer usrNo);\n}\n</code></pre>\n<p>In exception it says: Failed to convert from type [java.lang.Object[]] to type [com.newprof.userApp.domain.USR].</p>\n<p>Which basically means that your query statement returns an <strong>object array</strong>: java.lang.Object[].</p>\n<p>So my plan is, you call your <strong>USR constructor</strong> straightaway in your query.</p>\n<p><strong>EDIT</strong></p>\n<p>FOUND THE ANSWER.</p>\n<p>So you added this into your query:</p>\n<pre><code>new com.newprof.userApp.domain.USR(o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt)\n</code></pre>\n<p>And it now says to you: Cannot resolve constructor com.newprof.userApp.domain.USR(). IT IS RUGHT. Because <strong>there is no such constructor</strong>. You need to add it to your entity.</p>\n<p>You need to add something like this:</p>\n<pre><code>public USR (Integer usrNo, Integer usrAddress, String usrCountry, String usrState, String usrSt) {\nthis.usrNo = usrNo;\nthis.usrAddress = usrAddress;\nthis.usrCountry = usrCountry;\nthis.usrState = usrState;\nthis.usrSt = isrSt;\n}\n</code></pre>\n<p>This brand new Constructor will be called in statement <code>new com.newprof.userApp.domain.USR(o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt)</code> :D</p>\n"},{"tags":[],"owner":{"account_id":22608828,"reputation":16,"user_id":16789354,"display_name":"Katoh David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649876445,"creation_date":1649876445,"answer_id":71862636,"question_id":71861930,"body_markdown":"Try this code. I think the problem is the return object witch is not the same with select values. \r\n   \r\n    @Repository\r\n    public interface USRRepository extends JpaRepository&lt;USR, Integer&gt; {\r\n\r\n       @Query(&quot;SELECT o FROM USR o WHERE o.usrNo=?1&quot;) \r\n       USR findUsrRecordByUsrNo(Integer usrNo);\r\n\r\n    }","title":"Spring data jpa exception","body":"<p>Try this code. I think the problem is the return object witch is not the same with select values.</p>\n<pre><code>@Repository\npublic interface USRRepository extends JpaRepository&lt;USR, Integer&gt; {\n\n   @Query(&quot;SELECT o FROM USR o WHERE o.usrNo=?1&quot;) \n   USR findUsrRecordByUsrNo(Integer usrNo);\n\n}\n</code></pre>\n"}],"owner":{"account_id":23723269,"reputation":121,"user_id":17743546,"display_name":"Learners"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71862636,"answer_count":2,"score":1,"last_activity_date":1649876445,"creation_date":1649872572,"question_id":71861930,"body_markdown":"\r\nWhile retrieving records from the DB table we are getting exceptions. I tried the same for another table it worked but for this table, it&#39;s not working. I am using ```spring-data-jpa```\r\n\r\n\r\n```\r\n@Entity\r\n@Table(name=USR.TABLE_NAME)\r\n\r\npublic class USR implements Serializable {\r\n\r\nprivate static final long serialVersionUID = 1L;\r\npublic final static String TABLE_NAME = &quot;usr_profile&quot;;\r\n\r\n\r\n@Id\r\n@Column (name=&quot;USR_NO&quot;)\r\nprivate Integer usrNo;\r\n\r\n@Column (name=&quot;USR_Address&quot;, length=20, nullable=true, unique=false)\r\nprivate Integer usrAddress;\r\n\r\n@Column (name=&quot;USR_COUNTRY&quot;, nullable=true, unique=false)\r\nprivate String usrCountry;\r\n\r\nother fields constructor, no-arg constructor, getter and setter removed for brevity\r\n```\r\n\r\n```\r\n@Repository\r\npublic interface USRRepository extends JpaRepository&lt;USR, Integer&gt; {\r\n\r\n@Query(&quot;SELECT o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt FROM USR o WHERE o.usrNo=?1&quot;) \r\nUSR findUsrRecordByUsrNo(Integer usrNo);\r\n}\r\n```\r\nHere I have created a Controller class that has a get mapping\r\n```\r\n@GetMapping (&quot;/CmpUsr&quot;)\r\npublic ResponseEntity&lt;String&gt; cmpLookup() {\r\nUSR us = usrRepository.findUsrRecordByUsrNo(12557);\r\nreturn new ResponseEntity&lt;&gt;(us.toString(), HttpStatus.OK);\r\n}\r\n```\r\n\r\nI am getting this exception\r\n\r\nSEVERE: Servlet.service() for servlet [dispatcherServiet] in context with path[] threw exception (Request processing failed; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.Object[]] to type [com.newprof.userApp.domain.USR] for value (12557, 115 Minesota Yellow Rd, US, PH, 000991); nested exception is\r\norg.springframework.core.comvert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.Integer to type [com.newprof.userApp.domain.USR]] with root cause","title":"Spring data jpa exception","body":"<p>While retrieving records from the DB table we are getting exceptions. I tried the same for another table it worked but for this table, it's not working. I am using <code>spring-data-jpa</code></p>\n<pre><code>@Entity\n@Table(name=USR.TABLE_NAME)\n\npublic class USR implements Serializable {\n\nprivate static final long serialVersionUID = 1L;\npublic final static String TABLE_NAME = &quot;usr_profile&quot;;\n\n\n@Id\n@Column (name=&quot;USR_NO&quot;)\nprivate Integer usrNo;\n\n@Column (name=&quot;USR_Address&quot;, length=20, nullable=true, unique=false)\nprivate Integer usrAddress;\n\n@Column (name=&quot;USR_COUNTRY&quot;, nullable=true, unique=false)\nprivate String usrCountry;\n\nother fields constructor, no-arg constructor, getter and setter removed for brevity\n</code></pre>\n<pre><code>@Repository\npublic interface USRRepository extends JpaRepository&lt;USR, Integer&gt; {\n\n@Query(&quot;SELECT o.usrNo, o.usrAddress, o.usrCountry, o.usrState, o.usrSt FROM USR o WHERE o.usrNo=?1&quot;) \nUSR findUsrRecordByUsrNo(Integer usrNo);\n}\n</code></pre>\n<p>Here I have created a Controller class that has a get mapping</p>\n<pre><code>@GetMapping (&quot;/CmpUsr&quot;)\npublic ResponseEntity&lt;String&gt; cmpLookup() {\nUSR us = usrRepository.findUsrRecordByUsrNo(12557);\nreturn new ResponseEntity&lt;&gt;(us.toString(), HttpStatus.OK);\n}\n</code></pre>\n<p>I am getting this exception</p>\n<p>SEVERE: Servlet.service() for servlet [dispatcherServiet] in context with path[] threw exception (Request processing failed; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.Object[]] to type [com.newprof.userApp.domain.USR] for value (12557, 115 Minesota Yellow Rd, US, PH, 000991); nested exception is\norg.springframework.core.comvert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.Integer to type [com.newprof.userApp.domain.USR]] with root cause</p>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1648595912,"post_id":71665510,"comment_id":126663375,"body_markdown":"I cannot replicate your funky corners. Perhaps you should post a [MCVE](https://stackoverflow.com/help/minimal-reproducible-example).","body":"I cannot replicate your funky corners. Perhaps you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>."},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":0,"creation_date":1648632160,"post_id":71665510,"comment_id":126671361,"body_markdown":"@BasilBourque Please, see edit 2.","body":"@BasilBourque Please, see edit 2."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1648644113,"post_id":71665510,"comment_id":126676112,"body_markdown":"thanks for the example - worksforme win10, fx18+: each tab with rounded corner and the focus rect fully inside always (that is, looks the same just after adding and later)","body":"thanks for the example - worksforme win10, fx18+: each tab with rounded corner and the focus rect fully inside always (that is, looks the same just after adding and later)"},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":0,"creation_date":1649876098,"post_id":71665510,"comment_id":126989371,"body_markdown":"@kleopatra Please, see my answer for details.","body":"@kleopatra Please, see my answer for details."}],"answers":[{"tags":[],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649876010,"creation_date":1648576063,"answer_id":71666635,"question_id":71665510,"body_markdown":"This is a bug that was replicated by JavaFX team. Issue is [here][1]\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8284329","title":"Weird corners in Tab headers in JavaFX","body":"<p>This is a bug that was replicated by JavaFX team. Issue is <a href=\"https://bugs.openjdk.java.net/browse/JDK-8284329\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":18769604,"reputation":1,"user_id":13686725,"display_name":"Praveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649143645,"creation_date":1649143645,"answer_id":71747757,"question_id":71665510,"body_markdown":"Windows 7 is not a supported configuration for JDK 18 - https://www.oracle.com/java/technologies/javase/products-doc-jdk18certconfig.html","title":"Weird corners in Tab headers in JavaFX","body":"<p>Windows 7 is not a supported configuration for JDK 18 - <a href=\"https://www.oracle.com/java/technologies/javase/products-doc-jdk18certconfig.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/products-doc-jdk18certconfig.html</a></p>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71666635,"answer_count":2,"score":1,"last_activity_date":1649876328,"creation_date":1648570507,"question_id":71665510,"body_markdown":"I have weird corners in Tab headers. This is my Java code:\r\n\r\n    public class JavaFxTest1 extends Application {\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            var tabPane = new TabPane();\r\n            VBox.setVgrow(tabPane, Priority.ALWAYS);\r\n            primaryStage.setTitle(&quot;Hello World!&quot;);\r\n            Button button = new Button();\r\n            button.setText(&quot;NewTab&quot;);\r\n            button.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n    \r\n                @Override\r\n                public void handle(ActionEvent event) {\r\n                    Tab tab = new Tab(&quot;New tab&quot;);\r\n                    var content = new VBox();\r\n                    tab.setContent(content);\r\n                    var splitPane = new SplitPane();\r\n                    VBox.setVgrow(splitPane, Priority.ALWAYS);\r\n                    content.getChildren().add(splitPane);\r\n                    splitPane.getItems().addAll(new TextArea(&quot;One two three&quot;), new TextArea(&quot;One two three&quot;));\r\n                    tabPane.getTabs().add(tab);\r\n                }\r\n            });\r\n    \r\n            VBox root = new VBox();\r\n            root.getChildren().addAll(tabPane, button);\r\n            var css= this.getClass().getResource(&quot;test1.css&quot;).toExternalForm();\r\n            var scene = new Scene(root, 800, 600);\r\n            scene.getStylesheets().add(css);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\nThis is CSS code:\r\n\r\n\r\n    .tab-pane &gt; .tab-header-area &gt; .headers-region &gt; .tab &gt; .tab-container &gt; .tab-label {\r\n        -fx-alignment: center;\r\n        -fx-text-fill: -fx-text-base-color;\r\n        -fx-padding:0 10 0 0;\r\n        -fx-font-size: 15px;\r\n    }\r\n    \r\n    .tab-header-area .tab {\r\n        -fx-padding:4 10 5 10;\r\n        -fx-border-radius: 10 10 0 0;\r\n        -fx-background-radius: 10 10 0 0;\r\n    }\r\n\r\nThis is result in Linux (19-ea+3 for linux, JDK: openjdk version &quot;14.0.2&quot; 2020-07-1, OS: Ubuntu 20.04.3 LTS):\r\n\r\n[![enter image description here][4]][4]\r\n\r\nIt also doesn&#39;t work in Windows (Win7, java 18, JavaFX: 19-ea+3):\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6aT8A.png\r\n  [2]: https://i.stack.imgur.com/t6GtL.png\r\n  [3]: https://github.com/PashaTurok/javafx-test1\r\n  [4]: https://i.stack.imgur.com/iNYd9.png\r\n  [5]: https://i.stack.imgur.com/ZJtE0.png","title":"Weird corners in Tab headers in JavaFX","body":"<p>I have weird corners in Tab headers. This is my Java code:</p>\n<pre><code>public class JavaFxTest1 extends Application {\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        var tabPane = new TabPane();\n        VBox.setVgrow(tabPane, Priority.ALWAYS);\n        primaryStage.setTitle(&quot;Hello World!&quot;);\n        Button button = new Button();\n        button.setText(&quot;NewTab&quot;);\n        button.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n\n            @Override\n            public void handle(ActionEvent event) {\n                Tab tab = new Tab(&quot;New tab&quot;);\n                var content = new VBox();\n                tab.setContent(content);\n                var splitPane = new SplitPane();\n                VBox.setVgrow(splitPane, Priority.ALWAYS);\n                content.getChildren().add(splitPane);\n                splitPane.getItems().addAll(new TextArea(&quot;One two three&quot;), new TextArea(&quot;One two three&quot;));\n                tabPane.getTabs().add(tab);\n            }\n        });\n\n        VBox root = new VBox();\n        root.getChildren().addAll(tabPane, button);\n        var css= this.getClass().getResource(&quot;test1.css&quot;).toExternalForm();\n        var scene = new Scene(root, 800, 600);\n        scene.getStylesheets().add(css);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>This is CSS code:</p>\n<pre><code>.tab-pane &gt; .tab-header-area &gt; .headers-region &gt; .tab &gt; .tab-container &gt; .tab-label {\n    -fx-alignment: center;\n    -fx-text-fill: -fx-text-base-color;\n    -fx-padding:0 10 0 0;\n    -fx-font-size: 15px;\n}\n\n.tab-header-area .tab {\n    -fx-padding:4 10 5 10;\n    -fx-border-radius: 10 10 0 0;\n    -fx-background-radius: 10 10 0 0;\n}\n</code></pre>\n<p>This is result in Linux (19-ea+3 for linux, JDK: openjdk version &quot;14.0.2&quot; 2020-07-1, OS: Ubuntu 20.04.3 LTS):</p>\n<p><a href=\"https://i.stack.imgur.com/iNYd9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iNYd9.png\" alt=\"enter image description here\" /></a></p>\n<p>It also doesn't work in Windows (Win7, java 18, JavaFX: 19-ea+3):\n<a href=\"https://i.stack.imgur.com/ZJtE0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZJtE0.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649876167,"creation_date":1649876167,"answer_id":71862583,"question_id":71862209,"body_markdown":"You simply need to move fortune.properties into `/src/main/resources`, but let me suggest a cleaner way...\r\n\r\n\r\nFirst, drop the xml configuration, it&#39;s outdated by several years and everything you can do there can be done via java annotations.\r\n\r\nSecond, add your property files to `src/main/resources`.\r\n\r\nThird, tell Spring where to resolve your properties from, you can do this by adding `@PropertySources({@PropertySource(&quot;fortune.properties&quot;)})` to a configuration class like this (also note that I&#39;ve added the `@ComponentScan` and @Configuration annotations here):\r\n\r\n\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.PropertySource;\r\n\r\n    @Configuration\r\n    @ComponentScan\r\n    @PropertySource(&quot;fortune.properties&quot;)\r\n    public class Config {\r\n\r\n    }\r\n\r\nFourth, in your main method, use the `AnnotationConfigApplicationContext` as opposed to the `ClassPathXmlApplicationContext`.  I think you&#39;ll find it&#39;s much cleaner.\r\n\r\n      public static void main(String[] args) {\r\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(Config.class);\r\n        Coach theCoach = context.getBean(&quot;swimCoach&quot;, Coach.class);\r\n\r\n        System.out.println(theCoach.getDailyFortune());\r\n      }","title":"Properties file injection not working in spring","body":"<p>You simply need to move fortune.properties into <code>/src/main/resources</code>, but let me suggest a cleaner way...</p>\n<p>First, drop the xml configuration, it's outdated by several years and everything you can do there can be done via java annotations.</p>\n<p>Second, add your property files to <code>src/main/resources</code>.</p>\n<p>Third, tell Spring where to resolve your properties from, you can do this by adding <code>@PropertySources({@PropertySource(&quot;fortune.properties&quot;)})</code> to a configuration class like this (also note that I've added the <code>@ComponentScan</code> and @Configuration annotations here):</p>\n<pre><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.PropertySource;\n\n@Configuration\n@ComponentScan\n@PropertySource(&quot;fortune.properties&quot;)\npublic class Config {\n\n}\n</code></pre>\n<p>Fourth, in your main method, use the <code>AnnotationConfigApplicationContext</code> as opposed to the <code>ClassPathXmlApplicationContext</code>.  I think you'll find it's much cleaner.</p>\n<pre><code>  public static void main(String[] args) {\n    AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(Config.class);\n    Coach theCoach = context.getBean(&quot;swimCoach&quot;, Coach.class);\n\n    System.out.println(theCoach.getDailyFortune());\n  }\n</code></pre>\n"}],"owner":{"account_id":22680246,"reputation":255,"user_id":16850682,"display_name":"Aditya Dixit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649876167,"creation_date":1649873969,"question_id":71862209,"body_markdown":"I am trying to use the properties file and inject it to my fields of a class, but I am getting null .\r\n\r\n\r\n\r\nI have created a properties file called **fortune.properties**:\r\n\r\n    fortune1=Have a good day\r\n    fortune2=Have a bad day\r\n    fortune3=Have a medioccure day\r\n\r\nThen I am loading it in the **applicationContext.xml** file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\r\n        http://www.springframework.org/schema/context\r\n        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n     \r\n    \t&lt;!-- Enable Component Scanning --&gt;\r\n    \t&lt;context:component-scan base-package=&quot;com.luv2code.springdemo&quot;&gt;&lt;/context:component-scan&gt;\r\n    \t&lt;context:property-placeholder location=&quot;classpath:fortune.properties&quot; /&gt;\r\n    &lt;/beans&gt;\r\n\r\nIn the RandomFortuneClass, I am using value injection using **@Value()** annotation:\r\n\r\n    package com.luv2code.springdemo;\r\n    import java.util.Random;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.stereotype.Component;\r\n    @Component()\r\n    public class RandomFortuneService implements FortuneService {\r\n    \t@Value(&quot;${fortune1}&quot;)\r\n    \tprivate String fortune1;\r\n    \t@Value(&quot;${fortune2}&quot;)\r\n    \tprivate String fortune2;\r\n    \t@Value(&quot;${fortune3}&quot;)\r\n    \tprivate String fortune3;\r\n    \t\r\n    \tString[] fortunes = new String[] {fortune1, fortune2, fortune3};\r\n    \tprivate Random random = new Random();\r\n    \t\r\n    \t@Override\r\n    \tpublic String getFortune() {\r\n    \t\tint index = random.nextInt(fortunes.length);\r\n    \t\treturn fortunes[index];\r\n    \t}\r\n    }\r\n\r\nThen I am declaring **fortuneService** in **SwimCoach** class using constructor injection:\r\n\r\n    package com.luv2code.springdemo;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.beans.factory.annotation.Qualifier;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.stereotype.Component;\r\n    @Component()\r\n    public class SwimCoach implements Coach {\r\n    \tprivate FortuneService fortuneService;\r\n    \t@Autowired\r\n    \tSwimCoach(@Qualifier(&quot;randomFortuneService&quot;) FortuneService fs) {\r\n    \t\tfortuneService = fs;\r\n    \t}\r\n    \t@Override\r\n    \tpublic String getDailyWorkout() {\r\n    \t\tSystem.out.println();\r\n    \t\treturn &quot;Swim 5m everyday&quot;;\r\n    \t}\r\n    \t@Override\r\n    \tpublic String getDailyFortune() {\r\n    \t\treturn fortuneService.getFortune();\r\n    \t}\r\n    }\r\n\r\nNow when I try to call the method **getDailyFortune** in the **AnnotationDemoApp** class, I always get null as output.\r\n\r\n    package com.luv2code.springdemo;\r\n     \r\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\r\n     \r\n    public class AnnotationDemoApp {\r\n     \r\n    \tpublic static void main(String[] args) {\r\n    \t\tClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);\r\n    \t\tCoach theCoach = context.getBean(&quot;swimCoach&quot;, Coach.class);\r\n    \t\tSystem.out.println(theCoach.getDailyFortune());\r\n    \t\tcontext.close();\r\n    \t}\r\n     \r\n    }\r\n\r\nWhat is the error here?\r\n\r\nKindly comment if more information is needed.\r\n\r\nHere is my file hierarchy:\r\n\r\n[![spring_error][1]][1]\r\n\r\n\r\nPS: I am following the spring &amp; hibernate course for beginners by Chad Darby.\r\n\r\n  [1]: https://i.stack.imgur.com/vAz5I.png","title":"Properties file injection not working in spring","body":"<p>I am trying to use the properties file and inject it to my fields of a class, but I am getting null .</p>\n<p>I have created a properties file called <strong>fortune.properties</strong>:</p>\n<pre><code>fortune1=Have a good day\nfortune2=Have a bad day\nfortune3=Have a medioccure day\n</code></pre>\n<p>Then I am loading it in the <strong>applicationContext.xml</strong> file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n \n    &lt;!-- Enable Component Scanning --&gt;\n    &lt;context:component-scan base-package=&quot;com.luv2code.springdemo&quot;&gt;&lt;/context:component-scan&gt;\n    &lt;context:property-placeholder location=&quot;classpath:fortune.properties&quot; /&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>In the RandomFortuneClass, I am using value injection using <strong>@Value()</strong> annotation:</p>\n<pre><code>package com.luv2code.springdemo;\nimport java.util.Random;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n@Component()\npublic class RandomFortuneService implements FortuneService {\n    @Value(&quot;${fortune1}&quot;)\n    private String fortune1;\n    @Value(&quot;${fortune2}&quot;)\n    private String fortune2;\n    @Value(&quot;${fortune3}&quot;)\n    private String fortune3;\n    \n    String[] fortunes = new String[] {fortune1, fortune2, fortune3};\n    private Random random = new Random();\n    \n    @Override\n    public String getFortune() {\n        int index = random.nextInt(fortunes.length);\n        return fortunes[index];\n    }\n}\n</code></pre>\n<p>Then I am declaring <strong>fortuneService</strong> in <strong>SwimCoach</strong> class using constructor injection:</p>\n<pre><code>package com.luv2code.springdemo;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n@Component()\npublic class SwimCoach implements Coach {\n    private FortuneService fortuneService;\n    @Autowired\n    SwimCoach(@Qualifier(&quot;randomFortuneService&quot;) FortuneService fs) {\n        fortuneService = fs;\n    }\n    @Override\n    public String getDailyWorkout() {\n        System.out.println();\n        return &quot;Swim 5m everyday&quot;;\n    }\n    @Override\n    public String getDailyFortune() {\n        return fortuneService.getFortune();\n    }\n}\n</code></pre>\n<p>Now when I try to call the method <strong>getDailyFortune</strong> in the <strong>AnnotationDemoApp</strong> class, I always get null as output.</p>\n<pre><code>package com.luv2code.springdemo;\n \nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n \npublic class AnnotationDemoApp {\n \n    public static void main(String[] args) {\n        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);\n        Coach theCoach = context.getBean(&quot;swimCoach&quot;, Coach.class);\n        System.out.println(theCoach.getDailyFortune());\n        context.close();\n    }\n \n}\n</code></pre>\n<p>What is the error here?</p>\n<p>Kindly comment if more information is needed.</p>\n<p>Here is my file hierarchy:</p>\n<p><a href=\"https://i.stack.imgur.com/vAz5I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vAz5I.png\" alt=\"spring_error\" /></a></p>\n<p>PS: I am following the spring &amp; hibernate course for beginners by Chad Darby.</p>\n"},{"tags":["java","serialization","jackson"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1390421297,"post_id":21292867,"comment_id":32087952,"body_markdown":"At first glance, this kind of seems like bad design. Can you give us an example?","body":"At first glance, this kind of seems like bad design. Can you give us an example?"},{"owner":{"account_id":180186,"reputation":2289,"user_id":413345,"accept_rate":85,"display_name":"Ryan Gabbard"},"score":0,"creation_date":1390425593,"post_id":21292867,"comment_id":32090324,"body_markdown":"@SotiriosDelimanolis: I&#39;ve updated the question with more details.","body":"@SotiriosDelimanolis: I&#39;ve updated the question with more details."},{"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"score":0,"creation_date":1390863893,"post_id":21292867,"comment_id":32268573,"body_markdown":"I don&#39;t think this is doable out of the box, then (with updates). ObjectMapper does not even (by default) keep track of modules that have registered (no back-refs to avoid unintentional memory retention). So you would probably need to build your own configuration that keeps track of necessary information, to produce mapper instances, serialize/deserialize configuration.","body":"I don&#39;t think this is doable out of the box, then (with updates). ObjectMapper does not even (by default) keep track of modules that have registered (no back-refs to avoid unintentional memory retention). So you would probably need to build your own configuration that keeps track of necessary information, to produce mapper instances, serialize/deserialize configuration."},{"owner":{"account_id":180186,"reputation":2289,"user_id":413345,"accept_rate":85,"display_name":"Ryan Gabbard"},"score":0,"creation_date":1390921303,"post_id":21292867,"comment_id":32295091,"body_markdown":"@StaxMan: Thanks for your response. Since for my purposes I only need to track modules, I basically did eactly what you suggest, which wasn&#39;t very difficult for my limited needs.  If you&#39;d like to make your comment an answers, I&#39;ll accept it.","body":"@StaxMan: Thanks for your response. Since for my purposes I only need to track modules, I basically did eactly what you suggest, which wasn&#39;t very difficult for my limited needs.  If you&#39;d like to make your comment an answers, I&#39;ll accept it."}],"answers":[{"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390423563,"creation_date":1390423563,"answer_id":21293609,"question_id":21292867,"body_markdown":"`ObjectMapper` is actually `java.io.Serializable`, if you REALLY want to do this. I wouldn&#39;t necessarily recommend it, but it is possible. It is used by some on Android, to reduce cost of re-creating mapper instances (due to the way Dalvik swaps out apps).\r\n","title":"Save the Configuration of a Jackson ObjectMapper","body":"<p><code>ObjectMapper</code> is actually <code>java.io.Serializable</code>, if you REALLY want to do this. I wouldn't necessarily recommend it, but it is possible. It is used by some on Android, to reduce cost of re-creating mapper instances (due to the way Dalvik swaps out apps).</p>\n"}],"owner":{"account_id":180186,"reputation":2289,"user_id":413345,"accept_rate":85,"display_name":"Ryan Gabbard"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649875791,"creation_date":1390421185,"question_id":21292867,"body_markdown":"Does Jackson provide a means of saving the configuration of an `ObjectMapper` and then recreating it from this saved information?\r\n\r\nIn my particular case, I need to be able to record along with some data what modules were in use by the mapper when the data was written so that the same modules can be loaded for deserialization. \r\n\r\n# Update\r\nThe reason for this is the need to store some data with the sequence of transformations that was applied to create that data.  All of these transformations implement a known interface, but otherwise nothing is known about them and many different ones will be implemented by users. When serializing, it may be necessary to load modules in order to serialize some of the transformations.  We&#39;d like to be able to deserialize these transformations later in order to transform new data in the same way as the existing data, but without knowing what modules were loaded into the ObjectMapper, deserialization may fail.","title":"Save the Configuration of a Jackson ObjectMapper","body":"<p>Does Jackson provide a means of saving the configuration of an <code>ObjectMapper</code> and then recreating it from this saved information?</p>\n<p>In my particular case, I need to be able to record along with some data what modules were in use by the mapper when the data was written so that the same modules can be loaded for deserialization.</p>\n<h1>Update</h1>\n<p>The reason for this is the need to store some data with the sequence of transformations that was applied to create that data.  All of these transformations implement a known interface, but otherwise nothing is known about them and many different ones will be implemented by users. When serializing, it may be necessary to load modules in order to serialize some of the transformations.  We'd like to be able to deserialize these transformations later in order to transform new data in the same way as the existing data, but without knowing what modules were loaded into the ObjectMapper, deserialization may fail.</p>\n"},{"tags":["java","proxy","microsoft-graph-api","azure-ad-b2c","azure-ad-graph-api"],"answers":[{"tags":[],"owner":{"account_id":17998773,"reputation":1068,"user_id":13081151,"display_name":"SharadxDutta"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1649875407,"creation_date":1622211699,"answer_id":67740664,"question_id":67738863,"body_markdown":"Updating the answer...\r\n\r\n                    \r\n            ProxyOptions proxyOptions = new ProxyOptions(\r\n                   ProxyOptions.Type.HTTP, new InetSocketAddress(hostAddress, hostPort));\r\n            \r\n            HttpClientOptions clientOptions = new HttpClientOptions();\r\n            clientOptions.setProxyOptions(proxyOptions); \r\n            \r\n            HttpClient azHttpClient = HttpClient.createDefault(clientOptions);\r\n            \r\n            ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\r\n                    .clientId(clientId)\r\n                    .clientSecret(clientSecret)\r\n                    .tenantId(tenantId)\r\n                    .httpClient(azHttpClient)\r\n                    .build();\r\n\r\n            TokenCredentialAuthProvider tokenCredentialAuthProvider = \r\n                new TokenCredentialAuthProvider(scopes, clientSecretCredential);\r\n            \r\n            Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(hostAddress, hostPort));\r\n            \r\n            OkHttpClient httpClient = HttpClients.createDefault(tokenCredentialAuthProvider)\r\n                    .newBuilder()\r\n                    .proxy(proxy)\r\n                    .build();\r\n\r\n            graphClient = GraphServiceClient.builder()\r\n                    .authenticationProvider(tokenCredentialAuthProvider)\r\n                    .httpClient(httpClient)\r\n                    .buildClient();","title":"Adding a proxy settings to Microsoft Graph Client in Java","body":"<p>Updating the answer...</p>\n<pre><code>        ProxyOptions proxyOptions = new ProxyOptions(\n               ProxyOptions.Type.HTTP, new InetSocketAddress(hostAddress, hostPort));\n        \n        HttpClientOptions clientOptions = new HttpClientOptions();\n        clientOptions.setProxyOptions(proxyOptions); \n        \n        HttpClient azHttpClient = HttpClient.createDefault(clientOptions);\n        \n        ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\n                .clientId(clientId)\n                .clientSecret(clientSecret)\n                .tenantId(tenantId)\n                .httpClient(azHttpClient)\n                .build();\n\n        TokenCredentialAuthProvider tokenCredentialAuthProvider = \n            new TokenCredentialAuthProvider(scopes, clientSecretCredential);\n        \n        Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(hostAddress, hostPort));\n        \n        OkHttpClient httpClient = HttpClients.createDefault(tokenCredentialAuthProvider)\n                .newBuilder()\n                .proxy(proxy)\n                .build();\n\n        graphClient = GraphServiceClient.builder()\n                .authenticationProvider(tokenCredentialAuthProvider)\n                .httpClient(httpClient)\n                .buildClient();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6148547,"reputation":91,"user_id":4793722,"display_name":"Frk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649859969,"creation_date":1649859969,"answer_id":71859183,"question_id":67738863,"body_markdown":"If you can use system properties then try to configure via\r\n\r\nhttps.proxyHost and https.proxyPort\r\n","title":"Adding a proxy settings to Microsoft Graph Client in Java","body":"<p>If you can use system properties then try to configure via</p>\n<p>https.proxyHost and https.proxyPort</p>\n"}],"owner":{"account_id":19517067,"reputation":453,"user_id":14279707,"display_name":"horizon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2151,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":67740664,"answer_count":2,"score":2,"last_activity_date":1649875407,"creation_date":1622204928,"question_id":67738863,"body_markdown":"I am trying to implement GraphClient, below is a sample code which is working fine...\r\n\r\n       ClientCredentialProvider authProvider = \r\n                  new ClientCredentialProvider(clientId,\r\n                          scopes,\r\n                          clientSecret,\r\n                          b2cTenant,\r\n                          endpoint);\r\n        \r\n        IGraphServiceClient graphClient = graphClient = GraphServiceClient.builder()\r\n                    .authenticationProvider(authProvider)\r\n                    .buildClient();\r\n\r\nThis is working fine...but in some case from where the code is being run, there is a proxy, so I need to setup proxy to connect to internet. I need to setup proxy and pass it to graphClient somehow to tell make a call via proxy.\r\n\r\nI was trying to find a document but could not get any through I got this...\r\n\r\n    ProxyOptions proxyOptions = new ProxyOptions(ProxyOptions.Type.HTTP, new InetSocketAddress(proxyUrl, proxyPort));\r\n    proxyOptions.setCredentials(proxyUser, proxyPassword);\r\n    \r\n    final UsernamePasswordCredential usernamePasswordCredential = new UsernamePasswordCredentialBuilder()\r\n                        .clientId(clientId)\r\n                        .username(username)\r\n                        .password(password)\r\n                        .httpClient(HttpClient.createDefault(new HttpClientOptions().setProxyOptions(proxyOptions)))\r\n                        .build();\r\n\r\nBut the problem is the &quot;ProxyOptions&quot; isnt in Maven and I am not sure what library it is part of. \r\n\r\nCan anyone suggest an idea.\r\n        \r\n        ","title":"Adding a proxy settings to Microsoft Graph Client in Java","body":"<p>I am trying to implement GraphClient, below is a sample code which is working fine...</p>\n<pre><code>   ClientCredentialProvider authProvider = \n              new ClientCredentialProvider(clientId,\n                      scopes,\n                      clientSecret,\n                      b2cTenant,\n                      endpoint);\n    \n    IGraphServiceClient graphClient = graphClient = GraphServiceClient.builder()\n                .authenticationProvider(authProvider)\n                .buildClient();\n</code></pre>\n<p>This is working fine...but in some case from where the code is being run, there is a proxy, so I need to setup proxy to connect to internet. I need to setup proxy and pass it to graphClient somehow to tell make a call via proxy.</p>\n<p>I was trying to find a document but could not get any through I got this...</p>\n<pre><code>ProxyOptions proxyOptions = new ProxyOptions(ProxyOptions.Type.HTTP, new InetSocketAddress(proxyUrl, proxyPort));\nproxyOptions.setCredentials(proxyUser, proxyPassword);\n\nfinal UsernamePasswordCredential usernamePasswordCredential = new UsernamePasswordCredentialBuilder()\n                    .clientId(clientId)\n                    .username(username)\n                    .password(password)\n                    .httpClient(HttpClient.createDefault(new HttpClientOptions().setProxyOptions(proxyOptions)))\n                    .build();\n</code></pre>\n<p>But the problem is the &quot;ProxyOptions&quot; isnt in Maven and I am not sure what library it is part of.</p>\n<p>Can anyone suggest an idea.</p>\n"},{"tags":["java","json","jackson","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":227992,"reputation":17441,"user_id":490018,"accept_rate":67,"display_name":"Sergey Vyacheslavovich Brunov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649810943,"creation_date":1649810186,"answer_id":71850555,"question_id":71849610,"body_markdown":"# Introduction\r\nLet&#39;s consider the following subset of the Maven dependencies as the current version of the Jackson library:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    &lt;version&gt;2.13.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    &lt;version&gt;2.13.2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n# Answer\r\nIt looks like currently such usage of `@JsonProperty`, `@JsonIdentityInfo`, and collection (the `List&lt;E&gt;` interface) is not supported by the Jackson library.\r\n\r\nPlease, see the open GitHub issue: [Correctly deserialize forward `@JsonIdentityInfo` references when using `@JsonCreator` &#183; Issue #3030 &#183; FasterXML/jackson-databind](https://github.com/FasterXML/jackson-databind/issues/3030).\r\n\r\nPlease, note [the comment](https://github.com/FasterXML/jackson-databind/issues/3030#issuecomment-770099072) on the GitHub issue:\r\n\r\n&gt; ### **[cowtowncoder](https://github.com/cowtowncoder)** commented [on Jan 30, 2021](https://github.com/FasterXML/jackson-databind/issues/3030#issuecomment-770099072)\r\n&gt;\r\n&gt; Correct: there may be cases with combination of `@JsonCreator`, identity info, and ordered collections (`List`s and arrays) that may not be possible support ever, at all. Calling constructor is not possible without having actual object, and conversely values of collections must be deserialized in order.\r\nYou may need to change the usage so that `List` properties in question are passed by setters or fields; or possibly use Builder-style if immutability is required (builders work as long as built type itself does not use object id; its properties can use them).\r\n\r\n## Workarounds\r\nSome workarounds are described in the already mentioned comment on the GitHub issue.\r\n\r\n### Example workaround: Use field instead of constructor for deserialization\r\nThe example works fine, after updating the `AReferenceToB` class to use the field instead of the constructor for deserialization:\r\n\r\n```\r\n@Getter\r\n@Setter\r\npublic class AReferenceToB extends A {\r\n    @JsonProperty(value = &quot;b&quot;, required = true)\r\n    @NonNull\r\n    B b;\r\n}\r\n```\r\n\r\nThe disadvantages of the workaround:\r\n\r\n* It introduces mutability. The `AReferenceToB` class has become mutable.","title":"@JsonIdentityInfo fails to deserialize object cross sections within the same file","body":"<h1>Introduction</h1>\n<p>Let's consider the following subset of the Maven dependencies as the current version of the Jackson library:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.13.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.13.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h1>Answer</h1>\n<p>It looks like currently such usage of <code>@JsonProperty</code>, <code>@JsonIdentityInfo</code>, and collection (the <code>List&lt;E&gt;</code> interface) is not supported by the Jackson library.</p>\n<p>Please, see the open GitHub issue: <a href=\"https://github.com/FasterXML/jackson-databind/issues/3030\" rel=\"nofollow noreferrer\">Correctly deserialize forward <code>@JsonIdentityInfo</code> references when using <code>@JsonCreator</code>  Issue #3030  FasterXML/jackson-databind</a>.</p>\n<p>Please, note <a href=\"https://github.com/FasterXML/jackson-databind/issues/3030#issuecomment-770099072\" rel=\"nofollow noreferrer\">the comment</a> on the GitHub issue:</p>\n<blockquote>\n<h3><strong><a href=\"https://github.com/cowtowncoder\" rel=\"nofollow noreferrer\">cowtowncoder</a></strong> commented <a href=\"https://github.com/FasterXML/jackson-databind/issues/3030#issuecomment-770099072\" rel=\"nofollow noreferrer\">on Jan 30, 2021</a></h3>\n<p>Correct: there may be cases with combination of <code>@JsonCreator</code>, identity info, and ordered collections (<code>List</code>s and arrays) that may not be possible support ever, at all. Calling constructor is not possible without having actual object, and conversely values of collections must be deserialized in order.\nYou may need to change the usage so that <code>List</code> properties in question are passed by setters or fields; or possibly use Builder-style if immutability is required (builders work as long as built type itself does not use object id; its properties can use them).</p>\n</blockquote>\n<h2>Workarounds</h2>\n<p>Some workarounds are described in the already mentioned comment on the GitHub issue.</p>\n<h3>Example workaround: Use field instead of constructor for deserialization</h3>\n<p>The example works fine, after updating the <code>AReferenceToB</code> class to use the field instead of the constructor for deserialization:</p>\n<pre><code>@Getter\n@Setter\npublic class AReferenceToB extends A {\n    @JsonProperty(value = &quot;b&quot;, required = true)\n    @NonNull\n    B b;\n}\n</code></pre>\n<p>The disadvantages of the workaround:</p>\n<ul>\n<li>It introduces mutability. The <code>AReferenceToB</code> class has become mutable.</li>\n</ul>\n"}],"owner":{"account_id":2710858,"reputation":981,"user_id":2339344,"accept_rate":38,"display_name":"user2339344"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71850555,"answer_count":1,"score":1,"last_activity_date":1649875390,"creation_date":1649800842,"question_id":71849610,"body_markdown":"I parse JSON object using Java `ObjectMapper`. Some of the objects should be reusable, therefore I&#39;m using `@JsonIdentityInfo` to resolve references to them (I am able to define them inline or as reference). At first that worked.\r\n\r\nHowever, I do have 2 types of objects, and they may refer to each other (there is inheritance there, and some objects are compound object).\r\n\r\nMy input file is separated into sections. Now, my problem is cross referencing between section. If the referenced object is read in the 1st section, it&#39;s fine. However, if the referenced object is in the 2nd section, it will not resolve that. I do not want to enforce order, as there may be cross references.\r\n\r\n**Is there a way to force ObjecMapper to look at the entire input before failing?**\r\n\r\nFor example, these are my classes (very simplified of my use case):\r\n```\r\n@Getter\r\n@Setter\r\n@JsonTypeInfo(\r\n    use = JsonTypeInfo.Id.NAME,\r\n    property = &quot;@type&quot;,\r\n    visible = true)\r\n@JsonSubTypes({\r\n    @JsonSubTypes.Type(value = AValue.class, name = &quot;AValue&quot;),\r\n    @JsonSubTypes.Type(value = AReferenceToB.class, name = &quot;AReferenceToB&quot;),\r\n})\r\n@JsonIdentityInfo(scope = A.class, generator = ObjectIdGenerators.PropertyGenerator.class)\r\npublic abstract class A {\r\n    @JsonProperty(&quot;@id&quot;)\r\n    private String id;\r\n    @JsonProperty(&quot;@type&quot;)\r\n    private String type;\r\n}\r\n\r\n@Getter\r\n@Setter\r\npublic class AValue extends A {\r\n    @NonNull\r\n    String value;\r\n\r\n    @JsonCreator\r\n    public AValue(@JsonProperty(value = &quot;value&quot;, required = true) @NonNull String value) {\r\n        this.value = value;\r\n    }\r\n}\r\n\r\n@Getter\r\n@Setter\r\npublic class AReferenceToB extends A{\r\n    @NonNull\r\n    B b;\r\n\r\n    @JsonCreator\r\n    public AReferenceToB(@JsonProperty(value = &quot;b&quot;, required = true) @NonNull B b) {\r\n        this.b = b;\r\n    }\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@JsonTypeInfo(\r\n    use = JsonTypeInfo.Id.NAME,\r\n    property = &quot;@type&quot;,\r\n    visible = true)\r\n@JsonSubTypes({\r\n    @JsonSubTypes.Type(value = BValue.class, name = &quot;BValue&quot;),\r\n    @JsonSubTypes.Type(value = BReferenceToA.class, name = &quot;BReferenceToA&quot;),\r\n})\r\n@JsonIdentityInfo(scope = B.class, generator = ObjectIdGenerators.PropertyGenerator.class)\r\npublic class B {\r\n    @JsonProperty(&quot;@id&quot;)\r\n    private String id;\r\n    @JsonProperty(&quot;@type&quot;)\r\n    private String type;\r\n}\r\n\r\n@Getter\r\n@Setter\r\npublic class BValue extends B {\r\n    int value;\r\n\r\n    @JsonCreator\r\n    public BValue(@JsonProperty(value = &quot;value&quot;, required = true) int value) {\r\n        this.value = value;\r\n    }\r\n}\r\n\r\n@Getter\r\n@Setter\r\npublic class BReferenceToA extends B {\r\n    @NonNull\r\n    A a;\r\n\r\n    @JsonCreator\r\n    public BReferenceToA(@JsonProperty(value = &quot;a&quot;, required = true) @NonNull A a) {\r\n        this.a = a;\r\n    }\r\n}\r\n```\r\n\r\nAnd this is the class that I read the JSON into:\r\n```\r\n@Getter\r\n@Setter\r\npublic class File {\r\n    @NonNull\r\n    private List&lt;A&gt; as;\r\n\r\n    @NonNull\r\n    private List&lt;B&gt; bs;\r\n\r\n    @JsonCreator\r\n    public File(@JsonProperty(value = &quot;as&quot;, required = true) @NonNull List&lt;A&gt; as,\r\n                @JsonProperty(value = &quot;bs&quot;, required = true) @NonNull List&lt;B&gt; bs) {\r\n        this.as = as;\r\n        this.bs = bs;\r\n    }\r\n}\r\n```\r\n\r\nReading this file succeeds with out the `a2`, but will fail with `a2`. It will not work if I swap `as` and `bs` as well.\r\n\r\n```\r\n{\r\n    &quot;as&quot;: [\r\n        {\r\n            &quot;@id&quot;: &quot;a1&quot;,\r\n            &quot;@type&quot;: &quot;AValue&quot;,\r\n            &quot;value&quot;: &quot;test&quot;\r\n        },\r\n        {\r\n            &quot;@id&quot;: &quot;a2&quot;,\r\n            &quot;@type&quot;: &quot;AReferenceToB&quot;,\r\n            &quot;b&quot;: &quot;b1&quot;\r\n        }\r\n\r\n    ],\r\n    &quot;bs&quot;: [\r\n        {\r\n            &quot;@id&quot;: &quot;b1&quot;,\r\n            &quot;@type&quot;: &quot;BValue&quot;,\r\n            &quot;value&quot;: 1\r\n        },\r\n        {\r\n            &quot;@id&quot;: &quot;b2&quot;,\r\n            &quot;@type&quot;: &quot;BReferenceToA&quot;,\r\n            &quot;a&quot;: &quot;a1&quot;\r\n        }\r\n\r\n    ]\r\n}\r\n```\r\n\r\nFailure:\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class A]: missing type id property &#39;@type&#39; (for POJO property &#39;as&#39;)\r\n at [Source: (File); line: 12, column: 9] (through reference chain: File[&quot;as&quot;]-&gt;java.util.ArrayList[1])\r\n```\r\n\r\nCode:\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\nfinal File file = mapper.readValue(Paths.get(&quot;test.json&quot;).toFile(), File.class);\r\n```\r\n\r\n","title":"@JsonIdentityInfo fails to deserialize object cross sections within the same file","body":"<p>I parse JSON object using Java <code>ObjectMapper</code>. Some of the objects should be reusable, therefore I'm using <code>@JsonIdentityInfo</code> to resolve references to them (I am able to define them inline or as reference). At first that worked.</p>\n<p>However, I do have 2 types of objects, and they may refer to each other (there is inheritance there, and some objects are compound object).</p>\n<p>My input file is separated into sections. Now, my problem is cross referencing between section. If the referenced object is read in the 1st section, it's fine. However, if the referenced object is in the 2nd section, it will not resolve that. I do not want to enforce order, as there may be cross references.</p>\n<p><strong>Is there a way to force ObjecMapper to look at the entire input before failing?</strong></p>\n<p>For example, these are my classes (very simplified of my use case):</p>\n<pre><code>@Getter\n@Setter\n@JsonTypeInfo(\n    use = JsonTypeInfo.Id.NAME,\n    property = &quot;@type&quot;,\n    visible = true)\n@JsonSubTypes({\n    @JsonSubTypes.Type(value = AValue.class, name = &quot;AValue&quot;),\n    @JsonSubTypes.Type(value = AReferenceToB.class, name = &quot;AReferenceToB&quot;),\n})\n@JsonIdentityInfo(scope = A.class, generator = ObjectIdGenerators.PropertyGenerator.class)\npublic abstract class A {\n    @JsonProperty(&quot;@id&quot;)\n    private String id;\n    @JsonProperty(&quot;@type&quot;)\n    private String type;\n}\n\n@Getter\n@Setter\npublic class AValue extends A {\n    @NonNull\n    String value;\n\n    @JsonCreator\n    public AValue(@JsonProperty(value = &quot;value&quot;, required = true) @NonNull String value) {\n        this.value = value;\n    }\n}\n\n@Getter\n@Setter\npublic class AReferenceToB extends A{\n    @NonNull\n    B b;\n\n    @JsonCreator\n    public AReferenceToB(@JsonProperty(value = &quot;b&quot;, required = true) @NonNull B b) {\n        this.b = b;\n    }\n}\n\n@Getter\n@Setter\n@JsonTypeInfo(\n    use = JsonTypeInfo.Id.NAME,\n    property = &quot;@type&quot;,\n    visible = true)\n@JsonSubTypes({\n    @JsonSubTypes.Type(value = BValue.class, name = &quot;BValue&quot;),\n    @JsonSubTypes.Type(value = BReferenceToA.class, name = &quot;BReferenceToA&quot;),\n})\n@JsonIdentityInfo(scope = B.class, generator = ObjectIdGenerators.PropertyGenerator.class)\npublic class B {\n    @JsonProperty(&quot;@id&quot;)\n    private String id;\n    @JsonProperty(&quot;@type&quot;)\n    private String type;\n}\n\n@Getter\n@Setter\npublic class BValue extends B {\n    int value;\n\n    @JsonCreator\n    public BValue(@JsonProperty(value = &quot;value&quot;, required = true) int value) {\n        this.value = value;\n    }\n}\n\n@Getter\n@Setter\npublic class BReferenceToA extends B {\n    @NonNull\n    A a;\n\n    @JsonCreator\n    public BReferenceToA(@JsonProperty(value = &quot;a&quot;, required = true) @NonNull A a) {\n        this.a = a;\n    }\n}\n</code></pre>\n<p>And this is the class that I read the JSON into:</p>\n<pre><code>@Getter\n@Setter\npublic class File {\n    @NonNull\n    private List&lt;A&gt; as;\n\n    @NonNull\n    private List&lt;B&gt; bs;\n\n    @JsonCreator\n    public File(@JsonProperty(value = &quot;as&quot;, required = true) @NonNull List&lt;A&gt; as,\n                @JsonProperty(value = &quot;bs&quot;, required = true) @NonNull List&lt;B&gt; bs) {\n        this.as = as;\n        this.bs = bs;\n    }\n}\n</code></pre>\n<p>Reading this file succeeds with out the <code>a2</code>, but will fail with <code>a2</code>. It will not work if I swap <code>as</code> and <code>bs</code> as well.</p>\n<pre><code>{\n    &quot;as&quot;: [\n        {\n            &quot;@id&quot;: &quot;a1&quot;,\n            &quot;@type&quot;: &quot;AValue&quot;,\n            &quot;value&quot;: &quot;test&quot;\n        },\n        {\n            &quot;@id&quot;: &quot;a2&quot;,\n            &quot;@type&quot;: &quot;AReferenceToB&quot;,\n            &quot;b&quot;: &quot;b1&quot;\n        }\n\n    ],\n    &quot;bs&quot;: [\n        {\n            &quot;@id&quot;: &quot;b1&quot;,\n            &quot;@type&quot;: &quot;BValue&quot;,\n            &quot;value&quot;: 1\n        },\n        {\n            &quot;@id&quot;: &quot;b2&quot;,\n            &quot;@type&quot;: &quot;BReferenceToA&quot;,\n            &quot;a&quot;: &quot;a1&quot;\n        }\n\n    ]\n}\n</code></pre>\n<p>Failure:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class A]: missing type id property '@type' (for POJO property 'as')\n at [Source: (File); line: 12, column: 9] (through reference chain: File[&quot;as&quot;]-&gt;java.util.ArrayList[1])\n</code></pre>\n<p>Code:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nfinal File file = mapper.readValue(Paths.get(&quot;test.json&quot;).toFile(), File.class);\n</code></pre>\n"},{"tags":["java","junit","mocking","mockito","junit5"],"answers":[{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649875074,"creation_date":1649875074,"answer_id":71862400,"question_id":71861691,"body_markdown":"When copying your code and running it myself it worked fine when using correctly ;). \r\n\r\n    ResponseEntity&lt;HashMap&gt; omsResponse = new ResponseEntity&lt;&gt;(new HashMap(), \r\n    HttpStatus.OK);\r\n    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n    HttpHeaders headers = new HttpHeaders();\r\n    HttpEntity httpEntity = new HttpEntity&lt;&gt;(params, headers);\r\n    String loginUrl = &quot;https://dev.example.com/smcfs/restapi/invoke/login&quot;;\r\n    Mockito.when(restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class)).thenReturn(omsResponse);\r\n\r\n    ResponseEntity&lt;HashMap&gt; exchange = restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class);\r\n    System.out.println(exchange);\r\n\r\n\r\nFrom the error Message \r\n\r\n    his invocation of &#39;exchange&#39; method: restTemplate.exchange( null, POST, \r\n    &lt;{LoginID=null, Password=null},[Content-Type:&quot;application/json&quot;]&gt;, class \r\n    java.util.HashMap );\r\n\r\nyou can see that in your Code the parameter &quot;loginUrl&quot; is different then what you are mocking. In your Mock it mocks &quot;https://dev.example.com/smcfs/restapi/invoke/login&quot; as loginUrl. In your actual execution the code has null for the URL. The Mock only works if the Mock and the call of that method has the exact same parameters. Why your loginUrl is null is something i can not say with the Code you provided. The relevant parts for that are missing ^^. \r\n\r\nAnother approach would be to generalize the mock.\r\n\r\n    Mockito.when(restTemplate.exchange(any(), ...\r\n\r\nthis is however a bit tricky with restTemplate since the method Overloading of &quot;exchange&quot; make it difficult. Matching the arguments is better anyways. ","title":"Mock RestTemplate.exchange using Mockito","body":"<p>When copying your code and running it myself it worked fine when using correctly ;).</p>\n<pre><code>ResponseEntity&lt;HashMap&gt; omsResponse = new ResponseEntity&lt;&gt;(new HashMap(), \nHttpStatus.OK);\nMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\nHttpHeaders headers = new HttpHeaders();\nHttpEntity httpEntity = new HttpEntity&lt;&gt;(params, headers);\nString loginUrl = &quot;https://dev.example.com/smcfs/restapi/invoke/login&quot;;\nMockito.when(restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class)).thenReturn(omsResponse);\n\nResponseEntity&lt;HashMap&gt; exchange = restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class);\nSystem.out.println(exchange);\n</code></pre>\n<p>From the error Message</p>\n<pre><code>his invocation of 'exchange' method: restTemplate.exchange( null, POST, \n&lt;{LoginID=null, Password=null},[Content-Type:&quot;application/json&quot;]&gt;, class \njava.util.HashMap );\n</code></pre>\n<p>you can see that in your Code the parameter &quot;loginUrl&quot; is different then what you are mocking. In your Mock it mocks &quot;https://dev.example.com/smcfs/restapi/invoke/login&quot; as loginUrl. In your actual execution the code has null for the URL. The Mock only works if the Mock and the call of that method has the exact same parameters. Why your loginUrl is null is something i can not say with the Code you provided. The relevant parts for that are missing ^^.</p>\n<p>Another approach would be to generalize the mock.</p>\n<pre><code>Mockito.when(restTemplate.exchange(any(), ...\n</code></pre>\n<p>this is however a bit tricky with restTemplate since the method Overloading of &quot;exchange&quot; make it difficult. Matching the arguments is better anyways.</p>\n"}],"owner":{"account_id":5177315,"reputation":80,"user_id":4143977,"display_name":"Onkar Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1987,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649875074,"creation_date":1649871402,"question_id":71861691,"body_markdown":"Here is my code that I want to mock.\r\n\r\n        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n        params.put(LOGIN_ID, loginId);\r\n        params.put(LOGIN_PWD, loginPwd);\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.APPLICATION_JSON);\r\n        HttpEntity httpEntity = new HttpEntity&lt;&gt;(params, headers);\r\n        ResponseEntity&lt;HashMap&gt; omsResponse = restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class);\r\n\r\nHere is the test I am running.\r\n\r\n        PromotionDto promotionDto = getPromotionDto();\r\n        ResponseEntity&lt;HashMap&gt; omsResponse = new ResponseEntity&lt;&gt;(new HashMap(), HttpStatus.OK);\r\n        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n        HttpHeaders headers = new HttpHeaders();\r\n        HttpEntity httpEntity = new HttpEntity&lt;&gt;(params, headers);\r\n        String loginUrl = &quot;https://dev.example.com/smcfs/restapi/invoke/login&quot;;\r\n        Mockito.when(restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class)).thenReturn(omsResponse);\r\n        OrderCaptureOMSResponse response = omsService.orderCapture(promotionDto, IS_EMPLOYEE);\r\n        \r\nThe error I am getting\r\n\r\n    org.mockito.exceptions.misusing.PotentialStubbingProblem: \r\nStrict stubbing argument mismatch. Please check:\r\n - this invocation of &#39;exchange&#39; method:\r\n    restTemplate.exchange(\r\n    null,\r\n    POST,\r\n    &lt;{LoginID=null, Password=null},[Content-Type:&quot;application/json&quot;]&gt;,\r\n    class java.util.HashMap\r\n);\r\n    -&gt; at com.qurateretail.order.promotion.service.OmsServiceImpl.omsInterfaceLogin(OmsServiceImpl.java:87)\r\n - has following stubbing(s) with different arguments:\r\n    1. restTemplate.exchange(\r\n    &quot;https://dev.example.com/smcfs/restapi/invoke/login&quot;,\r\n    POST,\r\n    &lt;{},[]&gt;,\r\n    class java.util.HashMap\r\n);\r\n      -&gt; at com.qurateretail.order.promotion.service.OmsServiceTest.orderCaptureTest(OmsServiceTest.java:40)\r\nTypically, stubbing argument mismatch indicates user mistake when writi","title":"Mock RestTemplate.exchange using Mockito","body":"<p>Here is my code that I want to mock.</p>\n<pre><code>    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n    params.put(LOGIN_ID, loginId);\n    params.put(LOGIN_PWD, loginPwd);\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    HttpEntity httpEntity = new HttpEntity&lt;&gt;(params, headers);\n    ResponseEntity&lt;HashMap&gt; omsResponse = restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class);\n</code></pre>\n<p>Here is the test I am running.</p>\n<pre><code>    PromotionDto promotionDto = getPromotionDto();\n    ResponseEntity&lt;HashMap&gt; omsResponse = new ResponseEntity&lt;&gt;(new HashMap(), HttpStatus.OK);\n    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n    HttpHeaders headers = new HttpHeaders();\n    HttpEntity httpEntity = new HttpEntity&lt;&gt;(params, headers);\n    String loginUrl = &quot;https://dev.example.com/smcfs/restapi/invoke/login&quot;;\n    Mockito.when(restTemplate.exchange(loginUrl, HttpMethod.POST, httpEntity, HashMap.class)).thenReturn(omsResponse);\n    OrderCaptureOMSResponse response = omsService.orderCapture(promotionDto, IS_EMPLOYEE);\n    \n</code></pre>\n<p>The error I am getting</p>\n<pre><code>org.mockito.exceptions.misusing.PotentialStubbingProblem: \n</code></pre>\n<p>Strict stubbing argument mismatch. Please check:</p>\n<ul>\n<li>this invocation of 'exchange' method:\nrestTemplate.exchange(\nnull,\nPOST,\n&lt;{LoginID=null, Password=null},[Content-Type:&quot;application/json&quot;]&gt;,\nclass java.util.HashMap\n);\n-&gt; at com.qurateretail.order.promotion.service.OmsServiceImpl.omsInterfaceLogin(OmsServiceImpl.java:87)</li>\n<li>has following stubbing(s) with different arguments:\n<ol>\n<li>restTemplate.exchange(\n&quot;https://dev.example.com/smcfs/restapi/invoke/login&quot;,\nPOST,\n&lt;{},[]&gt;,\nclass java.util.HashMap\n);\n-&gt; at com.qurateretail.order.promotion.service.OmsServiceTest.orderCaptureTest(OmsServiceTest.java:40)\nTypically, stubbing argument mismatch indicates user mistake when writi</li>\n</ol>\n</li>\n</ul>\n"},{"tags":["java","apache","jackrabbit","jcr","jsr170"],"answers":[{"tags":[],"owner":{"account_id":54418,"reputation":20355,"user_id":162792,"accept_rate":100,"display_name":"Andrey Adamovich"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1314111605,"creation_date":1314111605,"answer_id":7163127,"question_id":7162572,"body_markdown":"You can try [JCR Explorer][1]. The project had no releases since 2007, but I had used it to access Jackrabbit 1.x repositories without problems.\r\n\r\n\r\n  [1]: http://www.jcr-explorer.org/screenshots.html","title":"browsing JACKRABBIT content visually?","body":"<p>You can try <a href=\"http://www.jcr-explorer.org/screenshots.html\" rel=\"nofollow\">JCR Explorer</a>. The project had no releases since 2007, but I had used it to access Jackrabbit 1.x repositories without problems.</p>\n"},{"tags":[],"owner":{"account_id":54489,"reputation":196,"user_id":163001,"accept_rate":86,"display_name":"Markus Joschko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1314192694,"creation_date":1314192694,"answer_id":7176270,"question_id":7162572,"body_markdown":"I don&#39;t know of any good graphical tools that work well with recent jackrabbit versions. However I find the standalone CLI client quite powerful as it allows you to perform all the simple commands easily and is scriptable as well.\r\nIf you use the standalone server of jackrabbit you can connect either via davex (recommended)\r\n\r\n    java -jar jackrabbit-standalone-2.2.7.jar  --cli http://localhost:8080/server\r\nor via RMI\r\n\r\n    java -jar jackrabbit-standalone-2.2.7.jar  --cli rmi://localhost:1099/rmi\r\n\r\nE.g. creating a new node is as simple as issuing a\r\n\r\n    addnode &quot;test&quot;\r\n\r\nBrowsing the repository is done with the unix commands: cd, ls and in addition lsprop to list the property values.\r\n\r\nFor all commands that are available in the client run\r\n\r\n    help\r\n\r\n","title":"browsing JACKRABBIT content visually?","body":"<p>I don't know of any good graphical tools that work well with recent jackrabbit versions. However I find the standalone CLI client quite powerful as it allows you to perform all the simple commands easily and is scriptable as well.\nIf you use the standalone server of jackrabbit you can connect either via davex (recommended)</p>\n\n<pre><code>java -jar jackrabbit-standalone-2.2.7.jar  --cli http://localhost:8080/server\n</code></pre>\n\n<p>or via RMI</p>\n\n<pre><code>java -jar jackrabbit-standalone-2.2.7.jar  --cli rmi://localhost:1099/rmi\n</code></pre>\n\n<p>E.g. creating a new node is as simple as issuing a</p>\n\n<pre><code>addnode \"test\"\n</code></pre>\n\n<p>Browsing the repository is done with the unix commands: cd, ls and in addition lsprop to list the property values.</p>\n\n<p>For all commands that are available in the client run</p>\n\n<pre><code>help\n</code></pre>\n"},{"tags":[],"owner":{"account_id":161416,"reputation":1250,"user_id":382154,"accept_rate":69,"display_name":"Ammar Bozorgvar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1606390933,"creation_date":1315026949,"answer_id":7291304,"question_id":7162572,"body_markdown":"i found Toromiro, but i don&#39;t know where is the node i created it with command.\r\n\r\n\r\n[Toromiro][1]\r\n\r\n\r\n  [1]: https://www.subshell.com/en/sophora/modules/toromiro/index.html","title":"browsing JACKRABBIT content visually?","body":"<p>i found Toromiro, but i don't know where is the node i created it with command.</p>\n<p><a href=\"https://www.subshell.com/en/sophora/modules/toromiro/index.html\" rel=\"nofollow noreferrer\">Toromiro</a></p>\n"},{"tags":[],"owner":{"account_id":26752,"reputation":761,"user_id":69888,"accept_rate":50,"display_name":"manuna"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1327414129,"creation_date":1327414129,"answer_id":8988206,"question_id":7162572,"body_markdown":"For a standalone Jackrabbit, repository content can be browsed using any http-browser.\r\nFor example, if I have standalone JR running at port 8087:\r\n\r\n    http://localhost:8087/repository/default/\r\n\r\nHere &quot;default&quot; is workspace name, to access any other workspace just replace it with workspace name.\r\nOf course, it is read-only and without any cool features, but it is bundled and lets browsing repository content without installing any additional tools.","title":"browsing JACKRABBIT content visually?","body":"<p>For a standalone Jackrabbit, repository content can be browsed using any http-browser.\nFor example, if I have standalone JR running at port 8087:</p>\n\n<pre><code>http://localhost:8087/repository/default/\n</code></pre>\n\n<p>Here \"default\" is workspace name, to access any other workspace just replace it with workspace name.\nOf course, it is read-only and without any cool features, but it is bundled and lets browsing repository content without installing any additional tools.</p>\n"},{"tags":[],"owner":{"account_id":71421,"reputation":684,"user_id":206622,"display_name":"Carl Pritchett"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336024926,"creation_date":1336024926,"answer_id":10425936,"question_id":7162572,"body_markdown":"I like [Jackrabbit Explorer][1] as it has a GWT interface that allows &quot;tree&quot; style browsing and it can also search using XPath. The only down side is it appears not to support versioned nodes (it can&#39;t open them)\r\n\r\n  [1]: http://code.google.com/p/jackrabbitexplorer/","title":"browsing JACKRABBIT content visually?","body":"<p>I like <a href=\"http://code.google.com/p/jackrabbitexplorer/\" rel=\"nofollow\">Jackrabbit Explorer</a> as it has a GWT interface that allows \"tree\" style browsing and it can also search using XPath. The only down side is it appears not to support versioned nodes (it can't open them)</p>\n"},{"tags":[],"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649874883,"creation_date":1649874883,"answer_id":71862369,"question_id":7162572,"body_markdown":"Jackrabbit repositories can be browsed with WEBDAV clients, I have used WINSCP and it works perfectly. \r\n\r\nFileZilla also should work as it supports WEBDAV (I have not tested it).\r\n\r\nFor WINSCP, the protocol needs to be selected to &#39;WEBDAV&#39; from the session dialog and the full URL to the repository can be given in the &#39;host&#39; fields of the dialog and the credential, for me it connected fine and I could browse file, download, deleta nd upload.","title":"browsing JACKRABBIT content visually?","body":"<p>Jackrabbit repositories can be browsed with WEBDAV clients, I have used WINSCP and it works perfectly.</p>\n<p>FileZilla also should work as it supports WEBDAV (I have not tested it).</p>\n<p>For WINSCP, the protocol needs to be selected to 'WEBDAV' from the session dialog and the full URL to the repository can be given in the 'host' fields of the dialog and the credential, for me it connected fine and I could browse file, download, deleta nd upload.</p>\n"}],"owner":{"account_id":161416,"reputation":1250,"user_id":382154,"accept_rate":69,"display_name":"Ammar Bozorgvar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9734,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":7291304,"answer_count":6,"score":3,"last_activity_date":1649874883,"creation_date":1314109368,"question_id":7162572,"body_markdown":"i want to remove my current content from my DataBase tables.\r\n\r\nand take them to a Content Repository (JCR)\r\n\r\nis there any wizard that lets browsing [Jackrabbit][1] content visually.\r\n\r\nbecause working with jackrabbit and loosing time becouse of running simple commands is really boring.\r\n\r\n\r\n  [1]: http://jackrabbit.apache.org/","title":"browsing JACKRABBIT content visually?","body":"<p>i want to remove my current content from my DataBase tables.</p>\n\n<p>and take them to a Content Repository (JCR)</p>\n\n<p>is there any wizard that lets browsing <a href=\"http://jackrabbit.apache.org/\" rel=\"nofollow\">Jackrabbit</a> content visually.</p>\n\n<p>because working with jackrabbit and loosing time becouse of running simple commands is really boring.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1544003375,"post_id":53629339,"comment_id":94118299,"body_markdown":"Remember that lambdas are essentially syntactic sugar for an anonymous class implementing a functional interface.","body":"Remember that lambdas are essentially syntactic sugar for an anonymous class implementing a functional interface."}],"answers":[{"tags":[],"owner":{"account_id":10957844,"reputation":2124,"user_id":8052043,"display_name":"CodeMatrix"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1544004036,"creation_date":1544003681,"answer_id":53629491,"question_id":53629339,"body_markdown":"For the first thing you&#39;re using lambda which is syntactic sugar. At the second thing the purple underline appears if a variable isn&#39;t from inside the lambda to show the user you&#39;re not using a local variable.\r\n\r\nFor example:\r\n\r\n    public static void main(String[] args) {\r\n        int a = 0;\r\n        Consumer&lt;String&gt; stringConsumer = foo -&gt; {\r\n          foo += a;\r\n        };\r\n\r\n        for (int i = 0; i &lt; 1; i++) {\r\n            String s = &quot; &quot; + a;\r\n        }\r\n    }\r\n\r\nIf you paste that you&#39;ll see that only the `a` in `foo += a` gets purple underlined because it&#39;s from outside the lambda.","title":"IntelliJ - pink underlined variable... what does it mean?","body":"<p>For the first thing you're using lambda which is syntactic sugar. At the second thing the purple underline appears if a variable isn't from inside the lambda to show the user you're not using a local variable.</p>\n\n<p>For example:</p>\n\n<pre><code>public static void main(String[] args) {\n    int a = 0;\n    Consumer&lt;String&gt; stringConsumer = foo -&gt; {\n      foo += a;\n    };\n\n    for (int i = 0; i &lt; 1; i++) {\n        String s = \" \" + a;\n    }\n}\n</code></pre>\n\n<p>If you paste that you'll see that only the <code>a</code> in <code>foo += a</code> gets purple underlined because it's from outside the lambda.</p>\n"},{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649874535,"creation_date":1544003704,"answer_id":53629495,"question_id":53629339,"body_markdown":"It&#39;s just [semantic highlighting][1] to mark the `entryDTS` isn&#39;t a local variable\r\n\r\n[![][2]][2]  \n&lt;sub&gt;(source: [cloudfront.net](https://d3nmt5vlzunoa1.cloudfront.net/pycharm/files/2017/01/prefs.png))&lt;/sub&gt;  \n\r\n\r\n&gt;Semantic Highlighting, previously introduced in KDevelop and some other IDEs, is now available in IntelliJ IDEA. It extends the standard syntax highlighting with unique colors for each parameter and local variable\r\n\r\n[1]:https://blog.jetbrains.com/pycharm/2017/01/make-sense-of-your-variables-at-a-glance-with-semantic-highlighting/\n [2]: https://i.stack.imgur.com/oIEdT.png","title":"IntelliJ - pink underlined variable... what does it mean?","body":"<p>It's just <a href=\"https://blog.jetbrains.com/pycharm/2017/01/make-sense-of-your-variables-at-a-glance-with-semantic-highlighting/\" rel=\"nofollow noreferrer\">semantic highlighting</a> to mark the <code>entryDTS</code> isn't a local variable</p>\n<p><a href=\"https://i.stack.imgur.com/oIEdT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oIEdT.png\" alt=\"\" /></a><br />\n<sub>(source: <a href=\"https://d3nmt5vlzunoa1.cloudfront.net/pycharm/files/2017/01/prefs.png\" rel=\"nofollow noreferrer\">cloudfront.net</a>)</sub></p>\n<blockquote>\n<p>Semantic Highlighting, previously introduced in KDevelop and some other IDEs, is now available in IntelliJ IDEA. It extends the standard syntax highlighting with unique colors for each parameter and local variable</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":12363547,"reputation":1,"user_id":9016715,"display_name":"Oleksandr Kushchak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570817629,"creation_date":1570817629,"answer_id":58346530,"question_id":53629339,"body_markdown":"The underlined parameter indicates that a local variable is declared outside and used inside a lambda expression.\r\nTo disable it go to: Editor -&gt; Color Scheme -&gt; Java -&gt; Parameters -&gt; disable &quot;Implicit anonymous class parameter&quot; \r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uhGgF.png","title":"IntelliJ - pink underlined variable... what does it mean?","body":"<p>The underlined parameter indicates that a local variable is declared outside and used inside a lambda expression.\nTo disable it go to: Editor -> Color Scheme -> Java -> Parameters -> disable \"Implicit anonymous class parameter\" </p>\n\n<p><a href=\"https://i.stack.imgur.com/uhGgF.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":13883284,"reputation":747,"user_id":10023107,"display_name":"Chris"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6840,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":53629491,"answer_count":3,"score":11,"last_activity_date":1649874535,"creation_date":1544003154,"question_id":53629339,"body_markdown":"could you please explain me, why the list-variable in line 108 has this specific color and is underlined?\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf i put the same code in a for-each instead of a foreach(), then it looks &quot;normal&quot;.\r\n\r\nThank you in advance!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4v3rJ.jpg","title":"IntelliJ - pink underlined variable... what does it mean?","body":"<p>could you please explain me, why the list-variable in line 108 has this specific color and is underlined?</p>\n\n<p><a href=\"https://i.stack.imgur.com/4v3rJ.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4v3rJ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>If i put the same code in a for-each instead of a foreach(), then it looks \"normal\".</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["java","mongodb","aggregation-framework"],"answers":[{"tags":[],"owner":{"account_id":14916818,"reputation":21534,"user_id":10770370,"display_name":"Tom Slabbaert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649874232,"creation_date":1649874232,"answer_id":71862249,"question_id":71861699,"body_markdown":"You are using the [first array element][1], which as you can tell is a new operator added for version 4.4\r\n\r\nLuckily for you this is quite easy to overcome, by just using [$arrayElemAt][2], like so:\r\n\r\n```\r\n{\r\n    $set: {\r\n        first_bucket_id: {$arrayElemAt: [&quot;$first_bucket_id.N&quot;, 0]},\r\n        second_bucket_id: {$arrayElemAt: [&quot;$second_bucket_id.N&quot;, 0]},\r\n        third_bucket_id: {$arrayElemAt: [&quot;$third_bucket_id.N&quot;, 0]}\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n[1]:https://www.mongodb.com/docs/v4.4/reference/operator/aggregation/first-array-element/#mongodb-expression-exp.-first\r\n[2]:https://www.mongodb.com/docs/manual/reference/operator/aggregation/arrayElemAt/","title":"Looking for alternative result projection that works on mongodb 4.2.x","body":"<p>You are using the <a href=\"https://www.mongodb.com/docs/v4.4/reference/operator/aggregation/first-array-element/#mongodb-expression-exp.-first\" rel=\"nofollow noreferrer\">first array element</a>, which as you can tell is a new operator added for version 4.4</p>\n<p>Luckily for you this is quite easy to overcome, by just using <a href=\"https://www.mongodb.com/docs/manual/reference/operator/aggregation/arrayElemAt/\" rel=\"nofollow noreferrer\">$arrayElemAt</a>, like so:</p>\n<pre><code>{\n    $set: {\n        first_bucket_id: {$arrayElemAt: [&quot;$first_bucket_id.N&quot;, 0]},\n        second_bucket_id: {$arrayElemAt: [&quot;$second_bucket_id.N&quot;, 0]},\n        third_bucket_id: {$arrayElemAt: [&quot;$third_bucket_id.N&quot;, 0]}\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5541572,"reputation":513,"user_id":4397899,"accept_rate":71,"display_name":"dfsg76"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71862249,"answer_count":1,"score":1,"last_activity_date":1649874232,"creation_date":1649871428,"question_id":71861699,"body_markdown":"As per my last question (https://stackoverflow.com/questions/71832016/query-document-count-by-multiple-ranges-returning-range-start-end-with-matching), I built a query to check for count of documents in multiple, potentially overlapping date ranges.\r\n\r\nThe query works on MongoDB 4.4 but I need to run it on 4.2 as well.\r\nOn MongoDB 4.2, I get the following error:\r\n\r\n    Mongo Server error (MongoCommandException): Command failed with error 168 (InvalidPipelineOperator): &#39;Unrecognized expression &#39;$first&#39;&#39; on server localhost:27017. \r\n    \r\n    The full response is:\r\n    { \r\n        &quot;ok&quot; : 0.0, \r\n        &quot;errmsg&quot; : &quot;Unrecognized expression &#39;$first&#39;&quot;, \r\n        &quot;code&quot; : 168.0, \r\n        &quot;codeName&quot; : &quot;InvalidPipelineOperator&quot;\r\n    }\r\n\r\nHow would you write the aggregation projection to achieve the same result structure.\r\nHere is the complete code with data setup\r\n\r\n    db.createCollection(&quot;object_location_tracking&quot;);\r\n    db.getCollection(&quot;object_location_tracking&quot;).insertMany([\r\n        {\r\n            _id: &quot;1&quot;,\r\n            locationId: &quot;locationA&quot;,\r\n            objectId: &quot;objectA&quot;,\r\n            timestamp: ISODate(&quot;2020-01-01T00:00:00Z&quot;)\r\n        },\r\n        {\r\n            _id: &quot;2&quot;,\r\n            locationId: &quot;locationB&quot;,\r\n            objectId: &quot;objectA&quot;,\r\n            timestamp: ISODate(&quot;2020-01-01T00:00:00Z&quot;)\r\n        },\r\n        {\r\n            _id: &quot;3&quot;,\r\n            locationId: &quot;locationA&quot;,\r\n            objectId: &quot;objectB&quot;,\r\n            timestamp: ISODate(&quot;2019-01-01T00:00:00Z&quot;)\r\n        },\r\n        {\r\n            _id: &quot;4&quot;,\r\n            locationId: &quot;locationB&quot;,\r\n            objectId: &quot;objectB&quot;,\r\n            timestamp: ISODate(&quot;2020-01-01T00:00:00Z&quot;)\r\n        }\r\n    ]);\r\n    \r\n    \r\n    \r\n    db.getCollection(&quot;object_location_tracking&quot;).aggregate([\r\n        {$facet: {\r\n            &quot;first_bucket_id&quot;: [\r\n                {$match: {&quot;objectId&quot;:&quot;objectA&quot;,\r\n                          &quot;locationId&quot;:&quot;locationA&quot;,\r\n                          &quot;timestamp&quot;: {$gte: new ISODate(&#39;2020-01-01&#39;),\r\n                                        $lt: new ISODate(&#39;2020-12-31&#39;)}\r\n                         }},\r\n                {$count: &quot;N&quot;}\r\n            ],\r\n    \r\n            &quot;second_bucket_id&quot;: [\r\n                {$match: {&quot;objectId&quot;:&quot;objectA&quot;,\r\n                          &quot;locationId&quot;:&quot;locationA&quot;,\r\n                          &quot;timestamp&quot;: {$gte: new ISODate(&#39;2020-01-01&#39;),\r\n                                        $lt: new ISODate(&#39;2022-12-31&#39;)}\r\n                         }},\r\n                {$count: &quot;N&quot;}\r\n            ],\r\n    \r\n            &quot;third_bucket_id&quot;: [\r\n                {$match: {&quot;objectId&quot;:&quot;objectA&quot;,\r\n                          &quot;locationId&quot;:&quot;locationB&quot;,\r\n                          &quot;timestamp&quot;: {$gte: new ISODate(&#39;2022-01-01&#39;),\r\n                                        $lt: new ISODate(&#39;2022-12-31&#39;)}\r\n                         }},\r\n                {$count: &quot;N&quot;}\r\n            ]\r\n        }},\r\n        {\r\n            $set: {\r\n                first_bucket_id: { $first: &quot;$first_bucket_id.N&quot;},\r\n                second_bucket_id: { $first: &quot;$second_bucket_id.N&quot;},\r\n                third_bucket_id: { $first: &quot;$third_bucket_id.N&quot;}\r\n            }\r\n        }\r\n        , {\r\n            $project: {\r\n                first_bucket_id: 1,\r\n                second_bucket_id: 1,\r\n                third_bucket_id: 1\r\n                \r\n            }\r\n        }\r\n    ]);\r\n\r\n","title":"Looking for alternative result projection that works on mongodb 4.2.x","body":"<p>As per my last question (<a href=\"https://stackoverflow.com/questions/71832016/query-document-count-by-multiple-ranges-returning-range-start-end-with-matching\">Query document count by multiple ranges returning range start/end with matching element count</a>), I built a query to check for count of documents in multiple, potentially overlapping date ranges.</p>\n<p>The query works on MongoDB 4.4 but I need to run it on 4.2 as well.\nOn MongoDB 4.2, I get the following error:</p>\n<pre><code>Mongo Server error (MongoCommandException): Command failed with error 168 (InvalidPipelineOperator): 'Unrecognized expression '$first'' on server localhost:27017. \n\nThe full response is:\n{ \n    &quot;ok&quot; : 0.0, \n    &quot;errmsg&quot; : &quot;Unrecognized expression '$first'&quot;, \n    &quot;code&quot; : 168.0, \n    &quot;codeName&quot; : &quot;InvalidPipelineOperator&quot;\n}\n</code></pre>\n<p>How would you write the aggregation projection to achieve the same result structure.\nHere is the complete code with data setup</p>\n<pre><code>db.createCollection(&quot;object_location_tracking&quot;);\ndb.getCollection(&quot;object_location_tracking&quot;).insertMany([\n    {\n        _id: &quot;1&quot;,\n        locationId: &quot;locationA&quot;,\n        objectId: &quot;objectA&quot;,\n        timestamp: ISODate(&quot;2020-01-01T00:00:00Z&quot;)\n    },\n    {\n        _id: &quot;2&quot;,\n        locationId: &quot;locationB&quot;,\n        objectId: &quot;objectA&quot;,\n        timestamp: ISODate(&quot;2020-01-01T00:00:00Z&quot;)\n    },\n    {\n        _id: &quot;3&quot;,\n        locationId: &quot;locationA&quot;,\n        objectId: &quot;objectB&quot;,\n        timestamp: ISODate(&quot;2019-01-01T00:00:00Z&quot;)\n    },\n    {\n        _id: &quot;4&quot;,\n        locationId: &quot;locationB&quot;,\n        objectId: &quot;objectB&quot;,\n        timestamp: ISODate(&quot;2020-01-01T00:00:00Z&quot;)\n    }\n]);\n\n\n\ndb.getCollection(&quot;object_location_tracking&quot;).aggregate([\n    {$facet: {\n        &quot;first_bucket_id&quot;: [\n            {$match: {&quot;objectId&quot;:&quot;objectA&quot;,\n                      &quot;locationId&quot;:&quot;locationA&quot;,\n                      &quot;timestamp&quot;: {$gte: new ISODate('2020-01-01'),\n                                    $lt: new ISODate('2020-12-31')}\n                     }},\n            {$count: &quot;N&quot;}\n        ],\n\n        &quot;second_bucket_id&quot;: [\n            {$match: {&quot;objectId&quot;:&quot;objectA&quot;,\n                      &quot;locationId&quot;:&quot;locationA&quot;,\n                      &quot;timestamp&quot;: {$gte: new ISODate('2020-01-01'),\n                                    $lt: new ISODate('2022-12-31')}\n                     }},\n            {$count: &quot;N&quot;}\n        ],\n\n        &quot;third_bucket_id&quot;: [\n            {$match: {&quot;objectId&quot;:&quot;objectA&quot;,\n                      &quot;locationId&quot;:&quot;locationB&quot;,\n                      &quot;timestamp&quot;: {$gte: new ISODate('2022-01-01'),\n                                    $lt: new ISODate('2022-12-31')}\n                     }},\n            {$count: &quot;N&quot;}\n        ]\n    }},\n    {\n        $set: {\n            first_bucket_id: { $first: &quot;$first_bucket_id.N&quot;},\n            second_bucket_id: { $first: &quot;$second_bucket_id.N&quot;},\n            third_bucket_id: { $first: &quot;$third_bucket_id.N&quot;}\n        }\n    }\n    , {\n        $project: {\n            first_bucket_id: 1,\n            second_bucket_id: 1,\n            third_bucket_id: 1\n            \n        }\n    }\n]);\n</code></pre>\n"},{"tags":["java","random","probability"],"comments":[{"owner":{"account_id":3534449,"reputation":3772,"user_id":2953117,"accept_rate":55,"display_name":"Blub"},"score":9,"creation_date":1385986224,"post_id":20327958,"comment_id":30337505,"body_markdown":"I think it&#39;s a clever way to do it like that, but I don&#39;t know if there is anything &quot;better&quot;. Just make sure you go from 0 to 99, as otherwise you will end up with 101 numbers and not exactly the percentage you want.","body":"I think it&#39;s a clever way to do it like that, but I don&#39;t know if there is anything &quot;better&quot;. Just make sure you go from 0 to 99, as otherwise you will end up with 101 numbers and not exactly the percentage you want."},{"owner":{"account_id":2736147,"reputation":9300,"user_id":2358786,"accept_rate":69,"display_name":"kiruwka"},"score":3,"creation_date":1385987529,"post_id":20327958,"comment_id":30338297,"body_markdown":"yes, this seems reasonable, otherwise you could use [EnumeratedIntegerDistribution](https://commons.apache.org/proper/commons-math/javadocs/api-3.2/org/apache/commons/math3/distribution/EnumeratedIntegerDistribution.html), example shown [here](http://stackoverflow.com/a/16436249/2358786)","body":"yes, this seems reasonable, otherwise you could use <a href=\"https://commons.apache.org/proper/commons-math/javadocs/api-3.2/org/apache/commons/math3/distribution/EnumeratedIntegerDistribution.html\" rel=\"nofollow noreferrer\">EnumeratedIntegerDistribution</a>, example shown <a href=\"http://stackoverflow.com/a/16436249/2358786\">here</a>"},{"owner":{"account_id":35803,"reputation":4761,"user_id":101715,"accept_rate":79,"display_name":"Yaneeve"},"score":1,"creation_date":1385988033,"post_id":20327958,"comment_id":30338617,"body_markdown":"Granted, I could not find a relevant implementation for your problem in [SSJ](http://www.iro.umontreal.ca/~simardr/ssj-2/indexe.html), but you should give it a more thorough look than I...","body":"Granted, I could not find a relevant implementation for your problem in <a href=\"http://www.iro.umontreal.ca/~simardr/ssj-2/indexe.html\" rel=\"nofollow noreferrer\">SSJ</a>, but you should give it a more thorough look than I..."}],"answers":[{"tags":[],"owner":{"account_id":3328940,"reputation":13909,"user_id":2798291,"accept_rate":53,"display_name":"TwoThe"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1385987405,"creation_date":1385987405,"answer_id":20328412,"question_id":20327958,"body_markdown":"You already wrote the implementation in your question. ;)\r\n\r\n    final int ran = myRandom.nextInt(100);\r\n    if (ran &gt; 50) { return 3; }\r\n    else if (ran &gt; 20) { return 2; } \r\n    else { return 1; }\r\n\r\nYou can speed this up for more complex implementations by per-calculating the result on a switch table like this:\r\n\r\n    t[0] = 1; t[1] = 1; // ... one for each possible result\r\n    return t[ran];\r\n\r\nBut this should only be used if this is a performance bottleneck and called several hundred times per second.","title":"Random number with Probabilities","body":"<p>You already wrote the implementation in your question. ;)</p>\n\n<pre><code>final int ran = myRandom.nextInt(100);\nif (ran &gt; 50) { return 3; }\nelse if (ran &gt; 20) { return 2; } \nelse { return 1; }\n</code></pre>\n\n<p>You can speed this up for more complex implementations by per-calculating the result on a switch table like this:</p>\n\n<pre><code>t[0] = 1; t[1] = 1; // ... one for each possible result\nreturn t[ran];\n</code></pre>\n\n<p>But this should only be used if this is a performance bottleneck and called several hundred times per second.</p>\n"},{"tags":[],"owner":{"account_id":3023868,"reputation":22275,"user_id":2564301,"accept_rate":75,"display_name":"Jongware"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1455880276,"creation_date":1385987644,"answer_id":20328491,"question_id":20327958,"body_markdown":"Yours is a pretty good way already and works well with any range.\r\n\r\nJust thinking: another possibility is to get rid of the fractions by multiplying with a constant multiplier, and then build an array with the *size* of this multiplier. Multiplying by 10 you get\r\n\r\n    P(1) = 2\r\n    P(2) = 3\r\n    P(3) = 5\r\n\r\nThen you create an array with the inverse values -- &#39;1&#39; goes into elements 1 and 2, &#39;2&#39; into 3 to 6, and so on:\r\n\r\n   P = (1,1, 2,2,2, 3,3,3,3,3);\r\n\r\nand then you can pick a random element from this array instead.\r\n\r\n---\r\n(Add.) Using the probabilities from the example in kiruwka&#39;s comment:\r\n\r\n    int[] numsToGenerate           = new int[]    { 1,   2,    3,   4,    5   };\r\n    double[] discreteProbabilities = new double[] { 0.1, 0.25, 0.3, 0.25, 0.1 };\r\n\r\nthe smallest multiplier that leads to all-integers is 20, which gives you\r\n\r\n    2, 5, 6, 5, 2\r\n\r\nand so the length of `numsToGenerate` would be 20, with the following values:\r\n\r\n    1 1\r\n    2 2 2 2 2\r\n    3 3 3 3 3 3\r\n    4 4 4 4 4\r\n    5 5\r\n\r\nThe distribution is *exactly* the same: the chance of &#39;1&#39;, for example, is now 2 out of 20 -- still 0.1.\r\n\r\nThis is based on your original probabilities all adding up to 1. If they do not, multiply the total by this same factor (which is then going to be your array length as well).","title":"Random number with Probabilities","body":"<p>Yours is a pretty good way already and works well with any range.</p>\n\n<p>Just thinking: another possibility is to get rid of the fractions by multiplying with a constant multiplier, and then build an array with the <em>size</em> of this multiplier. Multiplying by 10 you get</p>\n\n<pre><code>P(1) = 2\nP(2) = 3\nP(3) = 5\n</code></pre>\n\n<p>Then you create an array with the inverse values -- '1' goes into elements 1 and 2, '2' into 3 to 6, and so on:</p>\n\n<p>P = (1,1, 2,2,2, 3,3,3,3,3);</p>\n\n<p>and then you can pick a random element from this array instead.</p>\n\n<hr>\n\n<p>(Add.) Using the probabilities from the example in kiruwka's comment:</p>\n\n<pre><code>int[] numsToGenerate           = new int[]    { 1,   2,    3,   4,    5   };\ndouble[] discreteProbabilities = new double[] { 0.1, 0.25, 0.3, 0.25, 0.1 };\n</code></pre>\n\n<p>the smallest multiplier that leads to all-integers is 20, which gives you</p>\n\n<pre><code>2, 5, 6, 5, 2\n</code></pre>\n\n<p>and so the length of <code>numsToGenerate</code> would be 20, with the following values:</p>\n\n<pre><code>1 1\n2 2 2 2 2\n3 3 3 3 3 3\n4 4 4 4 4\n5 5\n</code></pre>\n\n<p>The distribution is <em>exactly</em> the same: the chance of '1', for example, is now 2 out of 20 -- still 0.1.</p>\n\n<p>This is based on your original probabilities all adding up to 1. If they do not, multiply the total by this same factor (which is then going to be your array length as well).</p>\n"},{"tags":[],"owner":{"account_id":95112,"reputation":2041,"user_id":259248,"accept_rate":75,"display_name":"Sergei Chicherin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1385988868,"creation_date":1385988868,"answer_id":20328878,"question_id":20327958,"body_markdown":"If you have performance issue instead of searching all the n values  O(n) \r\n\r\nyou could perform binary search which costs O(log n)\r\n\r\n    Random r=new Random();\t\t\r\n    double[] weights=new double[]{0.1,0.1+0.2,0.1+0.2+0.5};\r\n    // end of init\r\n    double random=r.nextDouble();\r\n    // next perform the binary search in weights array\r\n    \r\nyou only need to access log2(weights.length) in average if you have a lot of weights elements.\r\n","title":"Random number with Probabilities","body":"<p>If you have performance issue instead of searching all the n values  O(n) </p>\n\n<p>you could perform binary search which costs O(log n)</p>\n\n<pre><code>Random r=new Random();      \ndouble[] weights=new double[]{0.1,0.1+0.2,0.1+0.2+0.5};\n// end of init\ndouble random=r.nextDouble();\n// next perform the binary search in weights array\n</code></pre>\n\n<p>you only need to access log2(weights.length) in average if you have a lot of weights elements.</p>\n"},{"tags":[],"owner":{"account_id":2439943,"reputation":2585,"user_id":2128755,"display_name":"trylimits"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1515345805,"creation_date":1385992219,"answer_id":20329901,"question_id":20327958,"body_markdown":"Some time ago I wrote a helper class to solve this issue. The source code should show the concept clear enough:\r\n\r\n\t\r\n\tpublic class DistributedRandomNumberGenerator {\r\n\t\r\n\t\tprivate Map&lt;Integer, Double&gt; distribution;\r\n\t\tprivate double distSum;\r\n\t\t\r\n\t\tpublic DistributedRandomNumberGenerator() {\r\n\t\t\tdistribution = new HashMap&lt;&gt;();\r\n\t\t}\r\n\t\t\r\n\t\tpublic void addNumber(int value, double distribution) {\r\n\t\t\tif (this.distribution.get(value) != null) {\r\n\t\t\t\tdistSum -= this.distribution.get(value);\r\n\t\t\t}\r\n\t\t\tthis.distribution.put(value, distribution);\r\n\t\t\tdistSum += distribution;\r\n\t\t}\r\n\t\t\r\n\t\tpublic int getDistributedRandomNumber() {\r\n\t\t\tdouble rand = Math.random();\r\n\t\t\tdouble ratio = 1.0f / distSum;\r\n\t\t\tdouble tempDist = 0;\r\n\t\t\tfor (Integer i : distribution.keySet()) {\r\n\t\t\t\ttempDist += distribution.get(i);\r\n\t\t\t\tif (rand / ratio &lt;= tempDist) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n    }\r\n\t\t\r\n\r\n\r\nThe usage of the class is as follows:\r\n\r\n    DistributedRandomNumberGenerator drng = new DistributedRandomNumberGenerator();\r\n    drng.addNumber(1, 0.3d); // Adds the numerical value 1 with a probability of 0.3 (30%)\r\n    // [...] Add more values\r\n\r\n    int random = drng.getDistributedRandomNumber(); // Generate a random number\r\n\r\nTest driver to verify functionality:\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tDistributedRandomNumberGenerator drng = new DistributedRandomNumberGenerator();\r\n\t\t\tdrng.addNumber(1, 0.2d);\r\n\t\t\tdrng.addNumber(2, 0.3d);\r\n\t\t\tdrng.addNumber(3, 0.5d);\r\n\t\t\t\r\n\t\t\tint testCount = 1000000;\r\n\t\t\t\r\n\t\t\tHashMap&lt;Integer, Double&gt; test = new HashMap&lt;&gt;();\r\n\t\r\n\t\t\tfor (int i = 0; i &lt; testCount; i++) {\r\n\t\t\t\tint random = drng.getDistributedRandomNumber();\r\n\t\t\t\ttest.put(random, (test.get(random) == null) ? (1d / testCount) : test.get(random) + 1d / testCount);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tSystem.out.println(test.toString());\r\n\t\t}\r\n\r\nSample output for this test driver:\r\n\r\n    {1=0.20019100000017953, 2=0.2999349999988933, 3=0.4998739999935438}","title":"Random number with Probabilities","body":"<p>Some time ago I wrote a helper class to solve this issue. The source code should show the concept clear enough:</p>\n\n<pre><code>public class DistributedRandomNumberGenerator {\n\n    private Map&lt;Integer, Double&gt; distribution;\n    private double distSum;\n\n    public DistributedRandomNumberGenerator() {\n        distribution = new HashMap&lt;&gt;();\n    }\n\n    public void addNumber(int value, double distribution) {\n        if (this.distribution.get(value) != null) {\n            distSum -= this.distribution.get(value);\n        }\n        this.distribution.put(value, distribution);\n        distSum += distribution;\n    }\n\n    public int getDistributedRandomNumber() {\n        double rand = Math.random();\n        double ratio = 1.0f / distSum;\n        double tempDist = 0;\n        for (Integer i : distribution.keySet()) {\n            tempDist += distribution.get(i);\n            if (rand / ratio &lt;= tempDist) {\n                return i;\n            }\n        }\n        return 0;\n    }\n\n}\n</code></pre>\n\n<p>The usage of the class is as follows:</p>\n\n<pre><code>DistributedRandomNumberGenerator drng = new DistributedRandomNumberGenerator();\ndrng.addNumber(1, 0.3d); // Adds the numerical value 1 with a probability of 0.3 (30%)\n// [...] Add more values\n\nint random = drng.getDistributedRandomNumber(); // Generate a random number\n</code></pre>\n\n<p>Test driver to verify functionality:</p>\n\n<pre><code>    public static void main(String[] args) {\n        DistributedRandomNumberGenerator drng = new DistributedRandomNumberGenerator();\n        drng.addNumber(1, 0.2d);\n        drng.addNumber(2, 0.3d);\n        drng.addNumber(3, 0.5d);\n\n        int testCount = 1000000;\n\n        HashMap&lt;Integer, Double&gt; test = new HashMap&lt;&gt;();\n\n        for (int i = 0; i &lt; testCount; i++) {\n            int random = drng.getDistributedRandomNumber();\n            test.put(random, (test.get(random) == null) ? (1d / testCount) : test.get(random) + 1d / testCount);\n        }\n\n        System.out.println(test.toString());\n    }\n</code></pre>\n\n<p>Sample output for this test driver:</p>\n\n<pre><code>{1=0.20019100000017953, 2=0.2999349999988933, 3=0.4998739999935438}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2488885,"reputation":18917,"user_id":2166798,"accept_rate":50,"display_name":"pjs"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1448619847,"creation_date":1386013309,"answer_id":20336482,"question_id":20327958,"body_markdown":"Your approach is fine for the specific numbers you picked, although you could reduce storage by using an array of 10 instead of an array of 100.  However, this approach doesn&#39;t generalize well to large numbers of outcomes or outcomes with probabilities such as `1/e` or `1/PI`.\r\n\r\nA potentially better solution is to use an [alias table](https://stackoverflow.com/questions/17250568/randomly-choosing-from-a-list-with-weighted-probabilities/17253335#17253335).  The alias method takes `O(n)` work to set up the table for `n` outcomes, but then is constant time to generate regardless of how many outcomes there are.","title":"Random number with Probabilities","body":"<p>Your approach is fine for the specific numbers you picked, although you could reduce storage by using an array of 10 instead of an array of 100.  However, this approach doesn't generalize well to large numbers of outcomes or outcomes with probabilities such as <code>1/e</code> or <code>1/PI</code>.</p>\n\n<p>A potentially better solution is to use an <a href=\"https://stackoverflow.com/questions/17250568/randomly-choosing-from-a-list-with-weighted-probabilities/17253335#17253335\">alias table</a>.  The alias method takes <code>O(n)</code> work to set up the table for <code>n</code> outcomes, but then is constant time to generate regardless of how many outcomes there are.</p>\n"},{"tags":[],"owner":{"account_id":13248416,"reputation":11,"user_id":9566751,"display_name":"E.R.Tan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649873983,"creation_date":1522278350,"answer_id":49545564,"question_id":20327958,"body_markdown":"referencing the paper pointed by pjs in another [post](http://www.jstatsoft.org/v11/i03/paper) , the population of base64 table can be further optimized. The result is amazingly fast, initialization is slightly expensive, but if the probabilities are not changing often, this is a good approach.\r\n\r\n*For duplicate key, the last probability is taken instead of being combined (slightly different from EnumeratedIntegerDistribution behaviour)\r\n\r\n    public class RandomGen5 extends BaseRandomGen {\r\n\r\n        private int[] t_array = new int[4];\r\n        private int sumOfNumerator;\r\n        private final static int DENOM = (int) Math.pow(2, 24);\r\n        private static final int[] bitCount = new int[] {18, 12, 6, 0};\r\n        private static final int[] cumPow64 = new int[] {\r\n                (int) ( Math.pow( 64, 3 ) + Math.pow( 64, 2 ) + Math.pow( 64, 1 ) + Math.pow( 64, 0 ) ),\r\n                (int) ( Math.pow( 64, 2 ) + Math.pow( 64, 1 ) + Math.pow( 64, 0 ) ),\r\n                (int) ( Math.pow( 64, 1 ) + Math.pow( 64, 0 ) ),\r\n                (int) ( Math.pow( 64, 0 ) )\r\n        };\r\n\r\n\r\n        ArrayList[] base64Table = {new ArrayList&lt;Integer&gt;()\r\n                , new ArrayList&lt;Integer&gt;()\r\n                , new ArrayList&lt;Integer&gt;()\r\n                , new ArrayList&lt;Integer&gt;()};\r\n\r\n        public int nextNum() {\r\n            int rand = (int) (randGen.nextFloat() * sumOfNumerator);\r\n\r\n            for ( int x = 0 ; x &lt; 4 ; x ++ ) {\r\n                    if (rand &lt; t_array[x])\r\n                        return x == 0 ? (int) base64Table[x].get(rand &gt;&gt; bitCount[x])\r\n                                : (int) base64Table[x].get( ( rand - t_array[x-1] ) &gt;&gt; bitCount[x]) ;\r\n            }\r\n            return 0;\r\n        }\r\n\r\n        public void setIntProbList( int[] intList, float[] probList ) {\r\n            Map&lt;Integer, Float&gt; map = normalizeMap( intList, probList );\r\n            populateBase64Table( map );\r\n        }\r\n\r\n        private void clearBase64Table() {\r\n            for ( int x = 0 ; x &lt; 4 ; x++ ) {\r\n                base64Table[x].clear();\r\n            }\r\n        }\r\n\r\n        private void populateBase64Table( Map&lt;Integer, Float&gt; intProbMap ) {\r\n            int startPow, decodedFreq, table_index;\r\n            float rem;\r\n\r\n            clearBase64Table();\r\n\r\n            for ( Map.Entry&lt;Integer, Float&gt; numObj : intProbMap.entrySet() ) {\r\n                rem = numObj.getValue();\r\n                table_index = 3;\r\n                for ( int x = 0 ; x &lt; 4 ; x++ ) {\r\n                    decodedFreq = (int) (rem % 64);\r\n                    rem /= 64;\r\n                    for ( int y = 0 ; y &lt; decodedFreq ; y ++ ) {\r\n                        base64Table[table_index].add( numObj.getKey() );\r\n                    }\r\n                    table_index--;\r\n                }\r\n            }\r\n\r\n            startPow = 3;\r\n            for ( int x = 0 ; x &lt; 4 ; x++ ) {\r\n                t_array[x] = x == 0 ? (int) ( Math.pow( 64, startPow-- ) * base64Table[x].size() )\r\n                        : ( (int) ( ( Math.pow( 64, startPow-- ) * base64Table[x].size() ) + t_array[x-1] ) );\r\n            }\r\n\r\n        }\r\n\r\n        private Map&lt;Integer, Float&gt; normalizeMap( int[] intList, float[] probList ) {\r\n            Map&lt;Integer, Float&gt; tmpMap = new HashMap&lt;&gt;();\r\n            Float mappedFloat;\r\n            int numerator;\r\n            float normalizedProb, distSum = 0;\r\n\r\n            //Remove duplicates, and calculate the sum of non-repeated keys\r\n            for ( int x = 0 ; x &lt; probList.length ; x++ ) {\r\n                mappedFloat = tmpMap.get( intList[x] );\r\n                if ( mappedFloat != null ) {\r\n                    distSum -= mappedFloat;\r\n                } else {\r\n                    distSum += probList[x];\r\n                }\r\n                tmpMap.put( intList[x], probList[x] );\r\n            }\r\n\r\n            //Normalise the map to key -&gt; corresponding numerator by multiplying with 2^24\r\n            sumOfNumerator = 0;\r\n            for ( Map.Entry&lt;Integer, Float&gt; intProb : tmpMap.entrySet() ) {\r\n                normalizedProb = intProb.getValue() / distSum;\r\n                numerator = (int) ( normalizedProb * DENOM );\r\n                intProb.setValue( (float) numerator );\r\n                sumOfNumerator += numerator;\r\n            }\r\n\r\n            return tmpMap;\r\n        }\r\n    }","title":"Random number with Probabilities","body":"<p>referencing the paper pointed by pjs in another <a href=\"http://www.jstatsoft.org/v11/i03/paper\" rel=\"nofollow noreferrer\">post</a> , the population of base64 table can be further optimized. The result is amazingly fast, initialization is slightly expensive, but if the probabilities are not changing often, this is a good approach.</p>\n<p>*For duplicate key, the last probability is taken instead of being combined (slightly different from EnumeratedIntegerDistribution behaviour)</p>\n<pre><code>public class RandomGen5 extends BaseRandomGen {\n\n    private int[] t_array = new int[4];\n    private int sumOfNumerator;\n    private final static int DENOM = (int) Math.pow(2, 24);\n    private static final int[] bitCount = new int[] {18, 12, 6, 0};\n    private static final int[] cumPow64 = new int[] {\n            (int) ( Math.pow( 64, 3 ) + Math.pow( 64, 2 ) + Math.pow( 64, 1 ) + Math.pow( 64, 0 ) ),\n            (int) ( Math.pow( 64, 2 ) + Math.pow( 64, 1 ) + Math.pow( 64, 0 ) ),\n            (int) ( Math.pow( 64, 1 ) + Math.pow( 64, 0 ) ),\n            (int) ( Math.pow( 64, 0 ) )\n    };\n\n\n    ArrayList[] base64Table = {new ArrayList&lt;Integer&gt;()\n            , new ArrayList&lt;Integer&gt;()\n            , new ArrayList&lt;Integer&gt;()\n            , new ArrayList&lt;Integer&gt;()};\n\n    public int nextNum() {\n        int rand = (int) (randGen.nextFloat() * sumOfNumerator);\n\n        for ( int x = 0 ; x &lt; 4 ; x ++ ) {\n                if (rand &lt; t_array[x])\n                    return x == 0 ? (int) base64Table[x].get(rand &gt;&gt; bitCount[x])\n                            : (int) base64Table[x].get( ( rand - t_array[x-1] ) &gt;&gt; bitCount[x]) ;\n        }\n        return 0;\n    }\n\n    public void setIntProbList( int[] intList, float[] probList ) {\n        Map&lt;Integer, Float&gt; map = normalizeMap( intList, probList );\n        populateBase64Table( map );\n    }\n\n    private void clearBase64Table() {\n        for ( int x = 0 ; x &lt; 4 ; x++ ) {\n            base64Table[x].clear();\n        }\n    }\n\n    private void populateBase64Table( Map&lt;Integer, Float&gt; intProbMap ) {\n        int startPow, decodedFreq, table_index;\n        float rem;\n\n        clearBase64Table();\n\n        for ( Map.Entry&lt;Integer, Float&gt; numObj : intProbMap.entrySet() ) {\n            rem = numObj.getValue();\n            table_index = 3;\n            for ( int x = 0 ; x &lt; 4 ; x++ ) {\n                decodedFreq = (int) (rem % 64);\n                rem /= 64;\n                for ( int y = 0 ; y &lt; decodedFreq ; y ++ ) {\n                    base64Table[table_index].add( numObj.getKey() );\n                }\n                table_index--;\n            }\n        }\n\n        startPow = 3;\n        for ( int x = 0 ; x &lt; 4 ; x++ ) {\n            t_array[x] = x == 0 ? (int) ( Math.pow( 64, startPow-- ) * base64Table[x].size() )\n                    : ( (int) ( ( Math.pow( 64, startPow-- ) * base64Table[x].size() ) + t_array[x-1] ) );\n        }\n\n    }\n\n    private Map&lt;Integer, Float&gt; normalizeMap( int[] intList, float[] probList ) {\n        Map&lt;Integer, Float&gt; tmpMap = new HashMap&lt;&gt;();\n        Float mappedFloat;\n        int numerator;\n        float normalizedProb, distSum = 0;\n\n        //Remove duplicates, and calculate the sum of non-repeated keys\n        for ( int x = 0 ; x &lt; probList.length ; x++ ) {\n            mappedFloat = tmpMap.get( intList[x] );\n            if ( mappedFloat != null ) {\n                distSum -= mappedFloat;\n            } else {\n                distSum += probList[x];\n            }\n            tmpMap.put( intList[x], probList[x] );\n        }\n\n        //Normalise the map to key -&gt; corresponding numerator by multiplying with 2^24\n        sumOfNumerator = 0;\n        for ( Map.Entry&lt;Integer, Float&gt; intProb : tmpMap.entrySet() ) {\n            normalizedProb = intProb.getValue() / distSum;\n            numerator = (int) ( normalizedProb * DENOM );\n            intProb.setValue( (float) numerator );\n            sumOfNumerator += numerator;\n        }\n\n        return tmpMap;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7814271,"reputation":11,"user_id":5909518,"display_name":"Giulio Pilotto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524758483,"creation_date":1524758483,"answer_id":50047461,"question_id":20327958,"body_markdown":"Try this:\r\nIn this example i use an array of chars, but you can substitute it with your integer array.\r\n\r\nWeight list contains for each char the associated probability.\r\nIt represent the probability distribution of my charset.\r\n\r\nIn weightsum list for each char i stored his actual probability plus the sum of any antecedent probability.\r\n\r\nFor example in weightsum the third element corresponding to &#39;C&#39;, is 65:&lt;br&gt;\r\nP(&#39;A&#39;) + P(&#39;B) + P(&#39;C&#39;) = P(X=&gt;c)&lt;br&gt;\r\n10   +    20   +   25     = 65\r\n\r\nSo weightsum represent the cumulative distribution of my charset.\r\nweightsum contains the following values:\r\n\r\n\r\nIt&#39;s easy to see that the 8th element correspondig to H, have a larger gap (80 of course like his probability) then is more like to happen!\r\n\r\n\r\n   \r\n\r\n            List&lt;Character&gt; charset =   Arrays.asList(&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;,&#39;E&#39;,&#39;F&#39;,&#39;G&#39;,&#39;H&#39;,&#39;I&#39;,&#39;J&#39;);\r\n            List&lt;Integer&gt; weight = Arrays.asList(10,30,25,60,20,70,10,80,20,30);\r\n            List&lt;Integer&gt;  weightsum = new ArrayList&lt;&gt;();\r\n        \r\n            int i=0,j=0,k=0;\r\n            Random Rnd = new Random();\r\n        \r\n            weightsum.add(weight.get(0));\r\n        \r\n            for (i = 1; i &lt; 10; i++)\r\n                weightsum.add(weightsum.get(i-1) + weight.get(i));\r\n\r\nThen i use a cycle to get 30 random char extractions from charset,each one drawned accordingly to the cumulative probability.\r\n\r\nIn k i stored a random number from 0 to the max value allocated in weightsum.\r\nThen i look up in weightsum for a number grather than k, the position of the number in weightsum correspond to the same position of the char in charset.\r\n\r\n       for (j = 0; j &lt; 30; j++)\r\n       {\r\n       Random r = new Random();\r\n       k =   r.nextInt(weightsum.get(weightsum.size()-1));\r\n    \r\n       for (i = 0; k &gt; weightsum.get(i); i++) ;\r\n       System.out.print(charset.get(i));\r\n       }\r\n\r\nThe code give out that sequence of char:&lt;br&gt;\r\n\r\nHHFAIIDFBDDDHFICJHACCDFJBGBHHB &lt;br&gt;\r\n\r\nLet&#39;s do the math!&lt;br&gt;\r\n\r\nA = 2 &lt;br&gt;\r\nB = 4 &lt;br&gt;\r\nC = 3 &lt;br&gt;\r\nD = 5 &lt;br&gt;\r\nE = 0 &lt;br&gt;\r\nF = 4 &lt;br&gt;\r\nG = 1 &lt;br&gt;\r\nH = 6 &lt;br&gt;\r\nI = 3 &lt;br&gt;\r\nJ = 2 &lt;br&gt;\r\n\r\nTotal.:30&lt;br&gt;\r\nAs we wish D and H are have more occurances (70% and 80% prob.)&lt;br&gt;\r\nOtherwinse E didn&#39;t come out at all. (10% prob.)&lt;br&gt;\r\n\r\n\r\n","title":"Random number with Probabilities","body":"<p>Try this:\nIn this example i use an array of chars, but you can substitute it with your integer array.</p>\n\n<p>Weight list contains for each char the associated probability.\nIt represent the probability distribution of my charset.</p>\n\n<p>In weightsum list for each char i stored his actual probability plus the sum of any antecedent probability.</p>\n\n<p>For example in weightsum the third element corresponding to 'C', is 65:<br>\nP('A') + P('B) + P('C') = P(X=>c)<br>\n10   +    20   +   25     = 65</p>\n\n<p>So weightsum represent the cumulative distribution of my charset.\nweightsum contains the following values:</p>\n\n<p>It's easy to see that the 8th element correspondig to H, have a larger gap (80 of course like his probability) then is more like to happen!</p>\n\n<pre><code>        List&lt;Character&gt; charset =   Arrays.asList('A','B','C','D','E','F','G','H','I','J');\n        List&lt;Integer&gt; weight = Arrays.asList(10,30,25,60,20,70,10,80,20,30);\n        List&lt;Integer&gt;  weightsum = new ArrayList&lt;&gt;();\n\n        int i=0,j=0,k=0;\n        Random Rnd = new Random();\n\n        weightsum.add(weight.get(0));\n\n        for (i = 1; i &lt; 10; i++)\n            weightsum.add(weightsum.get(i-1) + weight.get(i));\n</code></pre>\n\n<p>Then i use a cycle to get 30 random char extractions from charset,each one drawned accordingly to the cumulative probability.</p>\n\n<p>In k i stored a random number from 0 to the max value allocated in weightsum.\nThen i look up in weightsum for a number grather than k, the position of the number in weightsum correspond to the same position of the char in charset.</p>\n\n<pre><code>   for (j = 0; j &lt; 30; j++)\n   {\n   Random r = new Random();\n   k =   r.nextInt(weightsum.get(weightsum.size()-1));\n\n   for (i = 0; k &gt; weightsum.get(i); i++) ;\n   System.out.print(charset.get(i));\n   }\n</code></pre>\n\n<p>The code give out that sequence of char:<br></p>\n\n<p>HHFAIIDFBDDDHFICJHACCDFJBGBHHB <br></p>\n\n<p>Let's do the math!<br></p>\n\n<p>A = 2 <br>\nB = 4 <br>\nC = 3 <br>\nD = 5 <br>\nE = 0 <br>\nF = 4 <br>\nG = 1 <br>\nH = 6 <br>\nI = 3 <br>\nJ = 2 <br></p>\n\n<p>Total.:30<br>\nAs we wish D and H are have more occurances (70% and 80% prob.)<br>\nOtherwinse E didn't come out at all. (10% prob.)<br></p>\n"},{"tags":[],"owner":{"account_id":73540,"reputation":12590,"user_id":211701,"accept_rate":94,"display_name":"Andrei Ciobanu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536755753,"creation_date":1536754799,"answer_id":52295014,"question_id":20327958,"body_markdown":"If you are not against adding a new library in your code, this feature is already implemented in [MockNeat][1], check the [probabilities()][2] method.\r\n\r\nSome examples directly from the wiki:\r\n\r\n    String s = mockNeat.probabilites(String.class)\r\n                    .add(0.1, &quot;A&quot;) // 10% chance\r\n                    .add(0.2, &quot;B&quot;) // 20% chance\r\n                    .add(0.5, &quot;C&quot;) // 50% chance\r\n                    .add(0.2, &quot;D&quot;) // 20% chance\r\n                    .val();\r\n\r\nOr if you want to generate numbers within given ranges with a given probability you can do something like:\r\n\r\n    Integer x = m.probabilites(Integer.class)\r\n                 .add(0.2, m.ints().range(0, 100))\r\n                 .add(0.5, m.ints().range(100, 200))\r\n                 .add(0.3, m.ints().range(200, 300))\r\n                 .val();\r\n\r\n\r\n*Disclaimer: I am the author of the library, so I might be biased when I am recommending it.*\r\n\r\n  [1]: https://github.com/nomemory/mockneat\r\n  [2]: https://github.com/nomemory/mockneat/wiki/MockNeat#probabilities","title":"Random number with Probabilities","body":"<p>If you are not against adding a new library in your code, this feature is already implemented in <a href=\"https://github.com/nomemory/mockneat\" rel=\"nofollow noreferrer\">MockNeat</a>, check the <a href=\"https://github.com/nomemory/mockneat/wiki/MockNeat#probabilities\" rel=\"nofollow noreferrer\">probabilities()</a> method.</p>\n\n<p>Some examples directly from the wiki:</p>\n\n<pre><code>String s = mockNeat.probabilites(String.class)\n                .add(0.1, \"A\") // 10% chance\n                .add(0.2, \"B\") // 20% chance\n                .add(0.5, \"C\") // 50% chance\n                .add(0.2, \"D\") // 20% chance\n                .val();\n</code></pre>\n\n<p>Or if you want to generate numbers within given ranges with a given probability you can do something like:</p>\n\n<pre><code>Integer x = m.probabilites(Integer.class)\n             .add(0.2, m.ints().range(0, 100))\n             .add(0.5, m.ints().range(100, 200))\n             .add(0.3, m.ints().range(200, 300))\n             .val();\n</code></pre>\n\n<p><em>Disclaimer: I am the author of the library, so I might be biased when I am recommending it.</em></p>\n"},{"tags":[],"owner":{"account_id":3787929,"reputation":1341,"user_id":3145243,"display_name":"Albert Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541348605,"creation_date":1541348605,"answer_id":53142842,"question_id":20327958,"body_markdown":"Here is the python code even though you ask for java, but it&#39;s very similar.\r\n\r\n    # weighted probability\r\n    \r\n    theta = np.array([0.1,0.25,0.6,0.05])\r\n    print(theta)\r\n    \r\n    sample_axis = np.hstack((np.zeros(1), np.cumsum(theta))) \r\n    print(sample_axis)\r\n\r\n[0.   0.1  0.35 0.95 1.  ]. This represent the cumulative distribution. \r\n\r\nyou can use a uniform distribution to draw an index in this unit range. \r\n\r\n\r\n    \r\n    def binary_search(axis, q, s, e):\r\n        if e-s &lt;= 1:\r\n            print(s)\r\n            return s\r\n        else: \r\n            m = int( np.around( (s+e)/2 ) )\r\n            if q &lt; axis[m]:\r\n                binary_search(axis, q, s, m)\r\n            else:\r\n                binary_search(axis, q, m, e)\r\n    \r\n    \r\n    \r\n    range_index = np.random.rand(1)\r\n    print(range_index)\r\n    q = range_index\r\n    s = 0\r\n    e = sample_axis.shape[0]-1\r\n    binary_search(sample_axis, q, 0, e)","title":"Random number with Probabilities","body":"<p>Here is the python code even though you ask for java, but it's very similar.</p>\n\n<pre><code># weighted probability\n\ntheta = np.array([0.1,0.25,0.6,0.05])\nprint(theta)\n\nsample_axis = np.hstack((np.zeros(1), np.cumsum(theta))) \nprint(sample_axis)\n</code></pre>\n\n<p>[0.   0.1  0.35 0.95 1.  ]. This represent the cumulative distribution. </p>\n\n<p>you can use a uniform distribution to draw an index in this unit range. </p>\n\n<pre><code>def binary_search(axis, q, s, e):\n    if e-s &lt;= 1:\n        print(s)\n        return s\n    else: \n        m = int( np.around( (s+e)/2 ) )\n        if q &lt; axis[m]:\n            binary_search(axis, q, s, m)\n        else:\n            binary_search(axis, q, m, e)\n\n\n\nrange_index = np.random.rand(1)\nprint(range_index)\nq = range_index\ns = 0\ne = sample_axis.shape[0]-1\nbinary_search(sample_axis, q, 0, e)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2854980,"reputation":1326,"user_id":2451425,"accept_rate":86,"display_name":"RoberMP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542702648,"creation_date":1542702648,"answer_id":53388951,"question_id":20327958,"body_markdown":"Also responded here: https://stackoverflow.com/questions/53388124/find-random-country-but-probability-of-picking-higher-population-country-should/53388766#53388766. Using TreeMap:\r\n\r\n    TreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\r\n    map.put(percent1, 1);\r\n    map.put(percent1 + percent2, 2);\r\n    // ...\r\n    \r\n    int random = (new Random()).nextInt(100);\r\n    int result = map.ceilingEntry(random).getValue();","title":"Random number with Probabilities","body":"<p>Also responded here: <a href=\"https://stackoverflow.com/questions/53388124/find-random-country-but-probability-of-picking-higher-population-country-should/53388766#53388766\">find random country but probability of picking higher population country should be higher</a>. Using TreeMap:</p>\n\n<pre><code>TreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();\nmap.put(percent1, 1);\nmap.put(percent1 + percent2, 2);\n// ...\n\nint random = (new Random()).nextInt(100);\nint result = map.ceilingEntry(random).getValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2195089,"reputation":482,"user_id":1941002,"accept_rate":33,"display_name":"besabestin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581668350,"creation_date":1581591179,"answer_id":60206111,"question_id":20327958,"body_markdown":"This may be useful to someone, a simple one I did in python. you just have to change the way p and r are written. This one, for instance, projects random values between 0 and 0.1 to 1e-20 to 1e-12.\r\n\r\n    import random\r\n\r\n    def generate_distributed_random():\r\n        p = [1e-20, 1e-12, 1e-10, 1e-08, 1e-04, 1e-02, 1]\r\n        r = [0, 0.1, 0.3, 0.5, 0.7, 0.9, 1]\r\n        val = random.random()\r\n        for i in range(1, len(r)):\r\n            if val &lt;= r[i] and val &gt;= r[i - 1]:\r\n                slope = (p[i] - p[i - 1])/(r[i] - r[i - 1])\r\n                return p[i - 1] + (val - r[i - 1])*slope\r\n\r\n\r\n    print(generate_distributed_random())","title":"Random number with Probabilities","body":"<p>This may be useful to someone, a simple one I did in python. you just have to change the way p and r are written. This one, for instance, projects random values between 0 and 0.1 to 1e-20 to 1e-12.</p>\n\n<pre><code>import random\n\ndef generate_distributed_random():\n    p = [1e-20, 1e-12, 1e-10, 1e-08, 1e-04, 1e-02, 1]\n    r = [0, 0.1, 0.3, 0.5, 0.7, 0.9, 1]\n    val = random.random()\n    for i in range(1, len(r)):\n        if val &lt;= r[i] and val &gt;= r[i - 1]:\n            slope = (p[i] - p[i - 1])/(r[i] - r[i - 1])\n            return p[i - 1] + (val - r[i - 1])*slope\n\n\nprint(generate_distributed_random())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5202794,"reputation":188,"user_id":4161665,"display_name":"Parth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591420731,"creation_date":1591420731,"answer_id":62227658,"question_id":20327958,"body_markdown":"there is one more effective way rather than getting into fractions or creating big arrays or hard coding range to 100\r\n\r\nin your case array becomes int[]{2,3,5} sum = 10\r\njust take sum of all the probablity run random number generator on it \r\nresult = New Random().nextInt(10)\r\n\r\niterate over array elements from index 0 and calculate sum and return when sum is greater than return element of that index as a output\r\n\r\ni.e if result is 6 then it will return index 2 which is no 5\r\n\r\nthis solution will scale irrespective of having big numbers or size of the range\r\n\r\n","title":"Random number with Probabilities","body":"<p>there is one more effective way rather than getting into fractions or creating big arrays or hard coding range to 100</p>\n\n<p>in your case array becomes int[]{2,3,5} sum = 10\njust take sum of all the probablity run random number generator on it \nresult = New Random().nextInt(10)</p>\n\n<p>iterate over array elements from index 0 and calculate sum and return when sum is greater than return element of that index as a output</p>\n\n<p>i.e if result is 6 then it will return index 2 which is no 5</p>\n\n<p>this solution will scale irrespective of having big numbers or size of the range</p>\n"}],"owner":{"account_id":913595,"reputation":5828,"user_id":946904,"accept_rate":69,"display_name":"marc wellman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85350,"favorite_count":0,"down_vote_count":0,"up_vote_count":68,"accepted_answer_id":20328491,"answer_count":12,"score":68,"last_activity_date":1649873983,"creation_date":1385986110,"question_id":20327958,"body_markdown":"I am wondering what would be the best way (e.g. in Java) to generate random numbers within a particular range where each number has a certain probability to occur or not?\r\n\r\ne.g.\r\n\r\nGenerate random integers from within [1;3] with the following probabilities:\r\n\r\nP(1) = 0.2&lt;br&gt;\r\nP(2) = 0.3&lt;br&gt;\r\nP(3) = 0.5&lt;br&gt;\r\n\r\n----------\r\n\r\nRight now I am considering the approach to generate a random integer within [0;100] and do the following:\r\n\r\nIf it is within [0;20] --&gt; I got my random number 1.&lt;br&gt;\r\nIf it is within [21;50] --&gt; I got my random number 2.&lt;br&gt;\r\nIf it is within [51;100] --&gt; I got my random number 3.&lt;br&gt;\r\n&lt;br&gt;\r\nWhat would you say?","title":"Random number with Probabilities","body":"<p>I am wondering what would be the best way (e.g. in Java) to generate random numbers within a particular range where each number has a certain probability to occur or not?</p>\n\n<p>e.g.</p>\n\n<p>Generate random integers from within [1;3] with the following probabilities:</p>\n\n<p>P(1) = 0.2<br>\nP(2) = 0.3<br>\nP(3) = 0.5<br></p>\n\n<hr>\n\n<p>Right now I am considering the approach to generate a random integer within [0;100] and do the following:</p>\n\n<p>If it is within [0;20] --> I got my random number 1.<br>\nIf it is within [21;50] --> I got my random number 2.<br>\nIf it is within [51;100] --> I got my random number 3.<br>\n<br>\nWhat would you say?</p>\n"},{"tags":["java","azure-digital-twins"],"answers":[{"tags":[],"owner":{"account_id":14874241,"reputation":26,"user_id":10740869,"display_name":"Myth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649873862,"creation_date":1649873862,"answer_id":71862188,"question_id":71826927,"body_markdown":"This works  with the newer version of API/SDKs as mentioned in the docs Please use - [1.3.0-beta.1][1].\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.azure/azure-digitaltwins-core/1.3.0-beta.1","title":"Setting sourceTime metadata in Azure Digital Twins","body":"<p>This works  with the newer version of API/SDKs as mentioned in the docs Please use - <a href=\"https://mvnrepository.com/artifact/com.azure/azure-digitaltwins-core/1.3.0-beta.1\" rel=\"nofollow noreferrer\">1.3.0-beta.1</a>.</p>\n"}],"owner":{"account_id":21733044,"reputation":25,"user_id":16041480,"display_name":"Izmo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71862188,"answer_count":1,"score":0,"last_activity_date":1649873862,"creation_date":1649676142,"question_id":71826927,"body_markdown":"I try to use Java SDK to set `sourceTime` in Digital Twin as described here: https://learn.microsoft.com/en-us/azure/digital-twins/how-to-manage-twin#update-a-propertys-sourcetime. But after upload values I get 400 with comment\r\n```\r\n&quot;Cannot patch property metadata &#39;sourceTime&#39;. Please provide a valid patch document.\r\n```\r\n\r\nI have permissions to ADT, there isn&#39;t problem.\r\n\r\nFor setting `sourceTime` I use following code:\r\n```\r\nJsonPatchDocument jsonPatchDocument = new JsonPatchDocument();\r\njsonPatchDocument = jsonPatchDocument.appendReplace(&quot;/$metadata/pitch/sourceTime&quot;, &quot;2022-04-11T13:17:53.7648958Z&quot;);\r\njsonPatchDocument = jsonPatchDocument.appendReplace(&quot;/pitch&quot;, 10.5);\r\n\r\ndigitalTwinsClient.updateDigitalTwin(&quot;123&quot;, jsonPatchDocument);\r\n```\r\n\r\nLib version: azure-digitaltwins-core:1.2.1\r\n\r\nWhat am I doing wrong?\r\n  ","title":"Setting sourceTime metadata in Azure Digital Twins","body":"<p>I try to use Java SDK to set <code>sourceTime</code> in Digital Twin as described here: <a href=\"https://learn.microsoft.com/en-us/azure/digital-twins/how-to-manage-twin#update-a-propertys-sourcetime\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/digital-twins/how-to-manage-twin#update-a-propertys-sourcetime</a>. But after upload values I get 400 with comment</p>\n<pre><code>&quot;Cannot patch property metadata 'sourceTime'. Please provide a valid patch document.\n</code></pre>\n<p>I have permissions to ADT, there isn't problem.</p>\n<p>For setting <code>sourceTime</code> I use following code:</p>\n<pre><code>JsonPatchDocument jsonPatchDocument = new JsonPatchDocument();\njsonPatchDocument = jsonPatchDocument.appendReplace(&quot;/$metadata/pitch/sourceTime&quot;, &quot;2022-04-11T13:17:53.7648958Z&quot;);\njsonPatchDocument = jsonPatchDocument.appendReplace(&quot;/pitch&quot;, 10.5);\n\ndigitalTwinsClient.updateDigitalTwin(&quot;123&quot;, jsonPatchDocument);\n</code></pre>\n<p>Lib version: azure-digitaltwins-core:1.2.1</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","servlet-filters","embedded-jetty"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1649873805,"creation_date":1532436947,"answer_id":51499190,"question_id":51479365,"body_markdown":"Don&#39;t mix `Handlers` and `ServletContextHandler&#39;s` like that.\r\n\r\nThat&#39;s not what the `ServletContextHandler.setHandler(Handler)` is for.\r\n\r\nChange your `MainHandler` to extend from `HttpServlet` and add it to the `ServletContextHandler.addServlet()`.\r\n\r\nYour `MainHandler` is preventing correct dispatch of the request into the `ServletContextHandler`.\r\n\r\nThis is because `ServletContextHandler.setHandler()` is for the management of things outside of the `ServletContext` and the specific request chain (such as session management, security management, gzip encoding management, request logging management, etc), not for actually processing a request and producing a response within that `ServletContext`.   The `ServletContextHandler.setHandler()` is meant for managing state and scope within an exchange (request, response, inputs, outputs, sessions, security, etc), with all valid implementations being a `ScopedHandler` that is `ServletContext`, `Context`, and `ServletContextHandler` aware.","title":"Jetty, doFilter method not getting called","body":"<p>Don't mix <code>Handlers</code> and <code>ServletContextHandler's</code> like that.</p>\n<p>That's not what the <code>ServletContextHandler.setHandler(Handler)</code> is for.</p>\n<p>Change your <code>MainHandler</code> to extend from <code>HttpServlet</code> and add it to the <code>ServletContextHandler.addServlet()</code>.</p>\n<p>Your <code>MainHandler</code> is preventing correct dispatch of the request into the <code>ServletContextHandler</code>.</p>\n<p>This is because <code>ServletContextHandler.setHandler()</code> is for the management of things outside of the <code>ServletContext</code> and the specific request chain (such as session management, security management, gzip encoding management, request logging management, etc), not for actually processing a request and producing a response within that <code>ServletContext</code>.   The <code>ServletContextHandler.setHandler()</code> is meant for managing state and scope within an exchange (request, response, inputs, outputs, sessions, security, etc), with all valid implementations being a <code>ScopedHandler</code> that is <code>ServletContext</code>, <code>Context</code>, and <code>ServletContextHandler</code> aware.</p>\n"},{"tags":[],"owner":{"account_id":2616549,"reputation":1922,"user_id":2265497,"accept_rate":41,"display_name":"slesh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1532437863,"creation_date":1532437863,"answer_id":51499507,"question_id":51479365,"body_markdown":"Look at [this](https://www.eclipse.org/jetty/documentation/current/embedding-jetty.html#_embedding_servlets) example of the official documentation:\r\n\r\n    package org.eclipse.jetty.embedded;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.eclipse.jetty.server.Server;\r\n    import org.eclipse.jetty.servlet.ServletHandler;\r\n    \r\n    public class MinimalServlets\r\n    {\r\n        public static void main( String[] args ) throws Exception\r\n        {\r\n            // Create a basic jetty server object that will listen on port 8080.\r\n            // Note that if you set this to port 0 then a randomly available port\r\n            // will be assigned that you can either look in the logs for the port,\r\n            // or programmatically obtain it for use in test cases.\r\n            Server server = new Server(8080);\r\n    \r\n            // The ServletHandler is a dead simple way to create a context handler\r\n            // that is backed by an instance of a Servlet.\r\n            // This handler then needs to be registered with the Server object.\r\n            ServletHandler handler = new ServletHandler();\r\n            server.setHandler(handler);\r\n    \r\n            // Passing in the class for the Servlet allows jetty to instantiate an\r\n            // instance of that Servlet and mount it on a given context path.\r\n    \r\n            // IMPORTANT:\r\n            // This is a raw Servlet, not a Servlet that has been configured\r\n            // through a web.xml @WebServlet annotation, or anything similar.\r\n            handler.addServletWithMapping(HelloServlet.class, &quot;/*&quot;);\r\n    \r\n            // Start things up!\r\n            server.start();\r\n    \r\n            // The use of server.join() the will make the current thread join and\r\n            // wait until the server is done executing.\r\n            // See\r\n            // http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join()\r\n            server.join();\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;serial&quot;)\r\n        public static class HelloServlet extends HttpServlet\r\n        {\r\n            @Override\r\n            protected void doGet( HttpServletRequest request,\r\n                                  HttpServletResponse response ) throws ServletException,\r\n                                                                IOException\r\n            {\r\n                response.setContentType(&quot;text/html&quot;);\r\n                response.setStatus(HttpServletResponse.SC_OK);\r\n                response.getWriter().println(&quot;&lt;h1&gt;Hello from HelloServlet&lt;/h1&gt;&quot;);\r\n            }\r\n        }\r\n    }","title":"Jetty, doFilter method not getting called","body":"<p>Look at <a href=\"https://www.eclipse.org/jetty/documentation/current/embedding-jetty.html#_embedding_servlets\" rel=\"nofollow noreferrer\">this</a> example of the official documentation:</p>\n\n<pre><code>package org.eclipse.jetty.embedded;\n\nimport java.io.IOException;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.eclipse.jetty.server.Server;\nimport org.eclipse.jetty.servlet.ServletHandler;\n\npublic class MinimalServlets\n{\n    public static void main( String[] args ) throws Exception\n    {\n        // Create a basic jetty server object that will listen on port 8080.\n        // Note that if you set this to port 0 then a randomly available port\n        // will be assigned that you can either look in the logs for the port,\n        // or programmatically obtain it for use in test cases.\n        Server server = new Server(8080);\n\n        // The ServletHandler is a dead simple way to create a context handler\n        // that is backed by an instance of a Servlet.\n        // This handler then needs to be registered with the Server object.\n        ServletHandler handler = new ServletHandler();\n        server.setHandler(handler);\n\n        // Passing in the class for the Servlet allows jetty to instantiate an\n        // instance of that Servlet and mount it on a given context path.\n\n        // IMPORTANT:\n        // This is a raw Servlet, not a Servlet that has been configured\n        // through a web.xml @WebServlet annotation, or anything similar.\n        handler.addServletWithMapping(HelloServlet.class, \"/*\");\n\n        // Start things up!\n        server.start();\n\n        // The use of server.join() the will make the current thread join and\n        // wait until the server is done executing.\n        // See\n        // http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join()\n        server.join();\n    }\n\n    @SuppressWarnings(\"serial\")\n    public static class HelloServlet extends HttpServlet\n    {\n        @Override\n        protected void doGet( HttpServletRequest request,\n                              HttpServletResponse response ) throws ServletException,\n                                                            IOException\n        {\n            response.setContentType(\"text/html\");\n            response.setStatus(HttpServletResponse.SC_OK);\n            response.getWriter().println(\"&lt;h1&gt;Hello from HelloServlet&lt;/h1&gt;\");\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11143385,"reputation":23,"user_id":8179051,"display_name":"Thomas Kr&#246;pfl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":874,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51499190,"answer_count":2,"score":0,"last_activity_date":1649873805,"creation_date":1532350555,"question_id":51479365,"body_markdown":"I have set up an embedded Jetty server with a filter to add some headers to every request.\r\n\r\n    MainHandler mainHandler = new MainHandler();\r\n    \t\tServletContextHandler servletContextHandler = new ServletContextHandler(ServletContextHandler.NO_SESSIONS);\r\n    \t\tservletContextHandler.setContextPath(&quot;/application&quot;);\r\n    \t\tservletContextHandler.setHandler(mainHandler);\r\n    \t\tservletContextHandler.setAllowNullPathInfo(true);\r\n    \t\tservletContextHandler.addFilter(MyFilter.class, &quot;/*&quot;, EnumSet.of(DispatcherType.REQUEST, DispatcherType.INCLUDE, DispatcherType.FORWARD));\r\n\r\nMainhandler is the class which processes the requests.\r\nThe init() method of the filter is called, but not the  doFilter() Method thus my filter is not applied. I tried it with &quot;/application/something&quot;.\r\n\r\nCan anybody help me please?","title":"Jetty, doFilter method not getting called","body":"<p>I have set up an embedded Jetty server with a filter to add some headers to every request.</p>\n\n<pre><code>MainHandler mainHandler = new MainHandler();\n        ServletContextHandler servletContextHandler = new ServletContextHandler(ServletContextHandler.NO_SESSIONS);\n        servletContextHandler.setContextPath(\"/application\");\n        servletContextHandler.setHandler(mainHandler);\n        servletContextHandler.setAllowNullPathInfo(true);\n        servletContextHandler.addFilter(MyFilter.class, \"/*\", EnumSet.of(DispatcherType.REQUEST, DispatcherType.INCLUDE, DispatcherType.FORWARD));\n</code></pre>\n\n<p>Mainhandler is the class which processes the requests.\nThe init() method of the filter is called, but not the  doFilter() Method thus my filter is not applied. I tried it with \"/application/something\".</p>\n\n<p>Can anybody help me please?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1649867241,"post_id":71860220,"comment_id":126986340,"body_markdown":"Use the `Arrays.sort()` method. Unless you have a really good reason not to, such as a homework assignment that requires you to implement your own sort. If this is a homework assignment, then you need to thoroughly understand standard sorting algorithms such as bubble sort and quick sort in order to implement one of them.","body":"Use the <code>Arrays.sort()</code> method. Unless you have a really good reason not to, such as a homework assignment that requires you to implement your own sort. If this is a homework assignment, then you need to thoroughly understand standard sorting algorithms such as bubble sort and quick sort in order to implement one of them."},{"owner":{"account_id":23975780,"reputation":3,"user_id":17963899,"display_name":"Marko"},"score":0,"creation_date":1649876450,"post_id":71860220,"comment_id":126989477,"body_markdown":"@Code-Apprentice , yes, 1) this is college assighments, 2) even if i could use it i wouldn&#39;t since i don&#39;t know how, and i find this way much more easier, although when i searched through the web for answers i realized that bubble is the least efficient way of them all, so i&#39;ll be working to learn new things. Thank you for being helpfull, you really did a lot to make my knowledge grow. :)","body":"@Code-Apprentice , yes, 1) this is college assighments, 2) even if i could use it i wouldn&#39;t since i don&#39;t know how, and i find this way much more easier, although when i searched through the web for answers i realized that bubble is the least efficient way of them all, so i&#39;ll be working to learn new things. Thank you for being helpfull, you really did a lot to make my knowledge grow. :)"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1649942797,"post_id":71860220,"comment_id":127005738,"body_markdown":"Comments are not for extended discussion; this conversation has been [moved to chat](https://chat.stackoverflow.com/rooms/243898/discussion-on-question-by-marko-why-is-my-sort-function-doing-the-job-incorectly).","body":"Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/243898/discussion-on-question-by-marko-why-is-my-sort-function-doing-the-job-incorectly\">moved to chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649873558,"creation_date":1649873558,"answer_id":71862115,"question_id":71860220,"body_markdown":"Your loop logic is incorrect. To do a proper sort, the inside loop (`j`) has to start from the current `i+1` upward. Instead, it starts from 1 every time. When you only have 3 elements, you may not see the problem.\r\n\r\nBasically, it compares elements from the area that was already sorted with elements in the unsorted area.","title":"Why is my sort function doing the job incorectly?","body":"<p>Your loop logic is incorrect. To do a proper sort, the inside loop (<code>j</code>) has to start from the current <code>i+1</code> upward. Instead, it starts from 1 every time. When you only have 3 elements, you may not see the problem.</p>\n<p>Basically, it compares elements from the area that was already sorted with elements in the unsorted area.</p>\n"}],"owner":{"account_id":23975780,"reputation":3,"user_id":17963899,"display_name":"Marko"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71862115,"answer_count":1,"score":0,"last_activity_date":1649873558,"creation_date":1649864311,"question_id":71860220,"body_markdown":"Aparently, when i do the sort with only parametrized objects it preforms flawlessly, yet when i add the ones that don&#39;t have data, it just goes nuts. Help.\r\n\r\nBtw, i want the data in falling order sorted by the &quot;Stanje na racunu&quot;, or in english &quot;your account balance&quot;, which takes the &quot;stanje&quot; variable in the object class and compares it. I&#39;ll repeat once more. This works flawlessly when tr1, tr2 and tr3 are not included. Help\r\n``````````````````````````````````````````````````````````````````````````\r\n    public class Glavna {\r\n\t\r\n\tpublic static void sort(TekuciRacun[] racuni) {\r\n\t\tTekuciRacun heljp = new TekuciRacun();\r\n\t\t\r\n\t\tfor ( int i = 0; i &lt; racuni.length - 1; i++)\r\n\t\t\tfor ( int j = 1; j &lt; racuni.length; j++)\r\n\t\t\t\tif ( racuni[i].getStanje() &gt; racuni[j].getStanje() ) {\r\n\t\t\t\t\theljp = racuni[i];\r\n\t\t\t\t\tracuni[i] = racuni[j];\r\n\t\t\t\t\tracuni[j] = heljp;\r\n\t\t\t\t}\r\n\t\t\r\n\t\tfor ( int i = 0; i &lt; racuni.length; i++)\r\n\t\t\tSystem.out.println(&quot;\\n&quot; + racuni[i].toString());\r\n\t} \r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tTekuciRacun ptr1 = new TekuciRacun(&quot;Marko Sisovic&quot;, 29381024, 20000, 15000, 0, -10000);\r\n\t\tTekuciRacun ptr2 = new TekuciRacun(&quot;Petar Gojkovic&quot;, 12341234, 25000, 10000, 5000, -15000);\r\n\t\tTekuciRacun ptr3 = new TekuciRacun(&quot;Milojko Marivic&quot;, 23455423, 30000, 20000, 15000, -30000);\r\n\t\t\r\n\t\tTekuciRacun tr1 = new TekuciRacun();\r\n\t\tTekuciRacun tr2 = new TekuciRacun();\r\n\t\tTekuciRacun tr3 = new TekuciRacun();\r\n\t\t\r\n\t\tTekuciRacun[] racuni = { ptr1, ptr2, ptr3, tr1, tr2, tr3};\r\n\t\t\r\n\t\tsort(racuni);\r\n\t}\r\n}\r\n````````````````````````````````````````````````````````````````````````````\r\nHere&#39;s the result.\r\n\r\n```none\r\nIme i prezime vlasnika: Milojko Marivic\r\nBroj racuna: 23455423\r\nStanje na racunu: -5000 dinara &lt;====this is the data that&#39;s used for sorting\r\nDozvoljen minus: -30000 dinara\r\n\r\nIme i prezime vlasnika: Petar Gojkovic\r\nBroj racuna: 12341234\r\nStanje na racunu: 10000 dinara &lt;====\r\nDozvoljen minus: -15000 dinara\r\n\r\nIme i prezime vlasnika: Marko Sisovic\r\nBroj racuna: 29381024\r\nStanje na racunu: 5000 dinara &lt;====\r\nDozvoljen minus: -10000 dinara\r\n\r\nIme i prezime vlasnika: null\r\nBroj racuna: 0\r\nStanje na racunu: 0 dinara \r\nDozvoljen minus: 0 dinara\r\n\r\nIme i prezime vlasnika: null\r\nBroj racuna: 0\r\nStanje na racunu: 0 dinara \r\nDozvoljen minus: 0 dinara\r\n\r\nIme i prezime vlasnika: null\r\nBroj racuna: 0\r\nStanje na racunu: 0 dinara \r\nDozvoljen minus: 0 dinara\r\n\r\n``````````````````````````````````````````````````````````````````\r\n\r\n```\r\n    public class TekuciRacun implements IRacun{\r\n\tprivate String vlasnik;\r\n\tprivate int brojRacuna;\r\n\tprivate int uplate;\r\n\tprivate int isplate;\r\n\tprivate int kredit;\r\n\tprivate int dozvoljenMinus;\r\n\tprivate int stanje = 0;\r\n\t\r\n\tTekuciRacun(){\r\n\t\t\r\n\t}\r\n\t\r\n\tTekuciRacun (String vlasnik, int brojRacuna, int uplate, int isplate, int kredit, int dozvoljenMinus){\r\n\t\tsuper();\r\n\t\tthis.vlasnik = vlasnik;\r\n\t\tthis.brojRacuna = brojRacuna;\r\n\t\tthis.uplate = uplate;\r\n\t\tthis.isplate = isplate;\r\n\t\tthis.kredit = kredit;\r\n\t\tthis.dozvoljenMinus = dozvoljenMinus;\r\n\t\t\r\n\t\tthis.stanje = stanje(uplate, isplate, kredit);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic int stanje(int uplate, int isplate, int kredit) {\r\n\t\treturn stanje = uplate - isplate - kredit;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Ime i prezime vlasnika: &quot; + vlasnik \r\n\t\t\t\t+ &quot;\\nBroj racuna: &quot; + brojRacuna\r\n\t\t\t\t+ &quot;\\nStanje na racunu: &quot; + stanje(uplate, isplate, kredit)\r\n\t\t\t\t+ &quot; dinara \\nDozvoljen minus: &quot; + dozvoljenMinus\r\n\t\t\t\t+ &quot; dinara\\nKredit: &quot; + kredit;\r\n\t}\r\n\r\n\tpublic String getVlasnik() {\r\n\t\treturn vlasnik;\r\n\t}\r\n\r\n\tpublic int getBrojRacuna() {\r\n\t\treturn brojRacuna;\r\n\t}\r\n\r\n\tpublic int getUplate() {\r\n\t\treturn uplate;\r\n\t}\r\n\r\n\tpublic int getIsplate() {\r\n\t\treturn isplate;\r\n\t}\r\n\r\n\tpublic int getKredit() {\r\n\t\treturn kredit;\r\n\t}\r\n\r\n\tpublic int getDozvoljenMinus() {\r\n\t\treturn dozvoljenMinus;\r\n\t}\r\n\r\n\tpublic int getStanje() {\r\n\t\treturn stanje;\r\n\t}\r\n\r\n\tpublic void setVlasnik(String vlasnik) {\r\n\t\tthis.vlasnik = vlasnik;\r\n\t}\r\n\r\n\tpublic void setBrojRacuna(int brojRacuna) {\r\n\t\tthis.brojRacuna = brojRacuna;\r\n\t}\r\n\r\n\tpublic void setUplate(int uplate) {\r\n\t\tthis.uplate = uplate;\r\n\t}\r\n\r\n\tpublic void setIsplate(int isplate) {\r\n\t\tthis.isplate = isplate;\r\n\t}\r\n\r\n\tpublic void setKredit(int kredit) {\r\n\t\tthis.kredit = kredit;\r\n\t}\r\n\r\n\tpublic void setDozvoljenMinus(int dozvoljenMinus) {\r\n\t\tthis.dozvoljenMinus = dozvoljenMinus;\r\n\t}\r\n\r\n\tpublic void setStanje(int stanje) {\r\n\t\tthis.stanje = stanje;\r\n\t}\r\n\t\r\n\t\r\n\t\r\n}\r\n``````````````````````````````````````````````````````````````````````````````\r\nThe desired output is (not the full, only the names(vlasnik))\r\n1. Petar Gojkovic\r\n2. Marko Sisovic\r\n3. Milojko Marivic\r\n4. null\r\n5. null\r\n6. null\r\n\r\nEdit.\r\nAfter debugging(adding a println between the two for loops) i can see that after the first &quot;i&quot; iteration the result is perfect, but, the loop keeps going, as it should, but starts doing something it shouldn&#39;t do. I guess this is out of bounds of my knowledge since i guess this is some compiler &quot;problem&quot;.\r\n","title":"Why is my sort function doing the job incorectly?","body":"<p>Aparently, when i do the sort with only parametrized objects it preforms flawlessly, yet when i add the ones that don't have data, it just goes nuts. Help.</p>\n<p>Btw, i want the data in falling order sorted by the &quot;Stanje na racunu&quot;, or in english &quot;your account balance&quot;, which takes the &quot;stanje&quot; variable in the object class and compares it. I'll repeat once more. This works flawlessly when tr1, tr2 and tr3 are not included. Help</p>\n<pre><code>    public class Glavna {\n    \n    public static void sort(TekuciRacun[] racuni) {\n        TekuciRacun heljp = new TekuciRacun();\n        \n        for ( int i = 0; i &lt; racuni.length - 1; i++)\n            for ( int j = 1; j &lt; racuni.length; j++)\n                if ( racuni[i].getStanje() &gt; racuni[j].getStanje() ) {\n                    heljp = racuni[i];\n                    racuni[i] = racuni[j];\n                    racuni[j] = heljp;\n                }\n        \n        for ( int i = 0; i &lt; racuni.length; i++)\n            System.out.println(&quot;\\n&quot; + racuni[i].toString());\n    } \n\n    public static void main(String[] args) {\n\n        TekuciRacun ptr1 = new TekuciRacun(&quot;Marko Sisovic&quot;, 29381024, 20000, 15000, 0, -10000);\n        TekuciRacun ptr2 = new TekuciRacun(&quot;Petar Gojkovic&quot;, 12341234, 25000, 10000, 5000, -15000);\n        TekuciRacun ptr3 = new TekuciRacun(&quot;Milojko Marivic&quot;, 23455423, 30000, 20000, 15000, -30000);\n        \n        TekuciRacun tr1 = new TekuciRacun();\n        TekuciRacun tr2 = new TekuciRacun();\n        TekuciRacun tr3 = new TekuciRacun();\n        \n        TekuciRacun[] racuni = { ptr1, ptr2, ptr3, tr1, tr2, tr3};\n        \n        sort(racuni);\n    }\n}\n</code></pre>\n<p>Here's the result.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Ime i prezime vlasnika: Milojko Marivic\nBroj racuna: 23455423\nStanje na racunu: -5000 dinara &lt;====this is the data that's used for sorting\nDozvoljen minus: -30000 dinara\n\nIme i prezime vlasnika: Petar Gojkovic\nBroj racuna: 12341234\nStanje na racunu: 10000 dinara &lt;====\nDozvoljen minus: -15000 dinara\n\nIme i prezime vlasnika: Marko Sisovic\nBroj racuna: 29381024\nStanje na racunu: 5000 dinara &lt;====\nDozvoljen minus: -10000 dinara\n\nIme i prezime vlasnika: null\nBroj racuna: 0\nStanje na racunu: 0 dinara \nDozvoljen minus: 0 dinara\n\nIme i prezime vlasnika: null\nBroj racuna: 0\nStanje na racunu: 0 dinara \nDozvoljen minus: 0 dinara\n\nIme i prezime vlasnika: null\nBroj racuna: 0\nStanje na racunu: 0 dinara \nDozvoljen minus: 0 dinara\n\n</code></pre>\n<pre><code>    public class TekuciRacun implements IRacun{\n    private String vlasnik;\n    private int brojRacuna;\n    private int uplate;\n    private int isplate;\n    private int kredit;\n    private int dozvoljenMinus;\n    private int stanje = 0;\n    \n    TekuciRacun(){\n        \n    }\n    \n    TekuciRacun (String vlasnik, int brojRacuna, int uplate, int isplate, int kredit, int dozvoljenMinus){\n        super();\n        this.vlasnik = vlasnik;\n        this.brojRacuna = brojRacuna;\n        this.uplate = uplate;\n        this.isplate = isplate;\n        this.kredit = kredit;\n        this.dozvoljenMinus = dozvoljenMinus;\n        \n        this.stanje = stanje(uplate, isplate, kredit);\n    }\n    \n    @Override\n    public int stanje(int uplate, int isplate, int kredit) {\n        return stanje = uplate - isplate - kredit;\n    }\n    \n    @Override\n    public String toString() {\n        return &quot;Ime i prezime vlasnika: &quot; + vlasnik \n                + &quot;\\nBroj racuna: &quot; + brojRacuna\n                + &quot;\\nStanje na racunu: &quot; + stanje(uplate, isplate, kredit)\n                + &quot; dinara \\nDozvoljen minus: &quot; + dozvoljenMinus\n                + &quot; dinara\\nKredit: &quot; + kredit;\n    }\n\n    public String getVlasnik() {\n        return vlasnik;\n    }\n\n    public int getBrojRacuna() {\n        return brojRacuna;\n    }\n\n    public int getUplate() {\n        return uplate;\n    }\n\n    public int getIsplate() {\n        return isplate;\n    }\n\n    public int getKredit() {\n        return kredit;\n    }\n\n    public int getDozvoljenMinus() {\n        return dozvoljenMinus;\n    }\n\n    public int getStanje() {\n        return stanje;\n    }\n\n    public void setVlasnik(String vlasnik) {\n        this.vlasnik = vlasnik;\n    }\n\n    public void setBrojRacuna(int brojRacuna) {\n        this.brojRacuna = brojRacuna;\n    }\n\n    public void setUplate(int uplate) {\n        this.uplate = uplate;\n    }\n\n    public void setIsplate(int isplate) {\n        this.isplate = isplate;\n    }\n\n    public void setKredit(int kredit) {\n        this.kredit = kredit;\n    }\n\n    public void setDozvoljenMinus(int dozvoljenMinus) {\n        this.dozvoljenMinus = dozvoljenMinus;\n    }\n\n    public void setStanje(int stanje) {\n        this.stanje = stanje;\n    }\n    \n    \n    \n}\n</code></pre>\n<p>The desired output is (not the full, only the names(vlasnik))</p>\n<ol>\n<li>Petar Gojkovic</li>\n<li>Marko Sisovic</li>\n<li>Milojko Marivic</li>\n<li>null</li>\n<li>null</li>\n<li>null</li>\n</ol>\n<p>Edit.\nAfter debugging(adding a println between the two for loops) i can see that after the first &quot;i&quot; iteration the result is perfect, but, the loop keeps going, as it should, but starts doing something it shouldn't do. I guess this is out of bounds of my knowledge since i guess this is some compiler &quot;problem&quot;.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":1,"creation_date":1649872875,"post_id":71861916,"comment_id":126988309,"body_markdown":"Why are you recursively calling `displayLoginScreen();` AND using a `do-while` loop at the same time, seems like a recipe for disaster.  You effectively could have a nested loop in the code.","body":"Why are you recursively calling <code>displayLoginScreen();</code> AND using a <code>do-while</code> loop at the same time, seems like a recipe for disaster.  You effectively could have a nested loop in the code."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1649873445,"post_id":71861916,"comment_id":126988470,"body_markdown":"`return isStaff = false;` should proably be `return !isStaff;`. Now it assigns false to `isStaff` and returns false.","body":"<code>return isStaff = false;</code> should proably be <code>return !isStaff;</code>. Now it assigns false to <code>isStaff</code> and returns false."}],"answers":[{"tags":[],"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649873210,"creation_date":1649873210,"answer_id":71862041,"question_id":71861916,"body_markdown":"Because when you recursively call `displayLoginScreen()` (which you probably shouldn&#39;t be doing in the first place, recursion is not a replacement for just repeating logic in a loop), the code never does anything with the result.  To put it simply, the `if` block here returns a value, the `else` block does not:\r\n\r\n    if (isStaff)\r\n        return isStaff;\r\n    else\r\n        displayLoginScreen();\r\n\r\nIf the intent is to return the result of `displayLoginScreen()`, return it:\r\n\r\n    if (isStaff)\r\n        return isStaff;\r\n    else\r\n        return displayLoginScreen();","title":"Do while loop misfunction","body":"<p>Because when you recursively call <code>displayLoginScreen()</code> (which you probably shouldn't be doing in the first place, recursion is not a replacement for just repeating logic in a loop), the code never does anything with the result.  To put it simply, the <code>if</code> block here returns a value, the <code>else</code> block does not:</p>\n<pre><code>if (isStaff)\n    return isStaff;\nelse\n    displayLoginScreen();\n</code></pre>\n<p>If the intent is to return the result of <code>displayLoginScreen()</code>, return it:</p>\n<pre><code>if (isStaff)\n    return isStaff;\nelse\n    return displayLoginScreen();\n</code></pre>\n"}],"owner":{"account_id":22453340,"reputation":11,"user_id":16656345,"display_name":"Nino"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71862041,"answer_count":1,"score":0,"last_activity_date":1649873210,"creation_date":1649872511,"question_id":71861916,"body_markdown":"This is my code:\r\n```\r\npublic boolean displayLoginScreen()\r\n\t{\r\n\t\tint choice;\r\n\t\tboolean isStaff = true;\r\n        Scanner input  = new Scanner(System.in);\r\n        System.out.print(&quot;****************************************************\\n&quot;);\r\n        System.out.print(&quot;                                                    \\n&quot;);\r\n        System.out.print(&quot;         Grocery Store Management System            \\n&quot;);\r\n        System.out.print(&quot;                                                    \\n&quot;);\r\n        System.out.print(&quot;****************************************************\\n&quot;);\r\n        System.out.println();\r\n        System.out.print(&quot;             Do you want to log in as : \\n&quot;);\r\n        System.out.print(&quot;                   1 = Staff \\n&quot;);\r\n        System.out.print(&quot;                   2 = Customer\\n&quot;);\r\n        System.out.print(&quot;                   3 = Exit\\n&quot;);\r\n        System.out.println();\r\n        \r\n        try\r\n        {\r\n        \tdo \r\n    \t\t{\r\n        \t\tSystem.out.print(&quot;Enter your choice : &quot;); \r\n            \tchoice = input.nextInt();\r\n                System.out.println(); \r\n                 \r\n                switch(choice)\r\n    \t\t\t{\r\n    \t\t\t\tcase 1:\r\n    \t\t\t\t{\r\n    \t\t\t\t\tisStaff = staffLogin();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tif(isStaff)\r\n    \t\t\t\t\t\treturn isStaff;\r\n    \t\t\t\t\telse\r\n    \t\t\t\t\t\tdisplayLoginScreen();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tcase 2:\r\n    \t\t\t\t{\r\n    \t\t\t\t\tcustomerLogin();\r\n    \t\t\t\t\treturn isStaff = false;\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tcase 3:\r\n    \t\t\t\t\tSystem.exit(0);\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t\t\r\n    \t\t\t\tdefault:\r\n    \t\t\t\t\tSystem.out.println(&quot;Invalid input. Enter again.&quot;);\r\n    \t\t\t\t\tSystem.out.println();\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t} while(choice != 3);\r\n        }\r\n            \r\n        catch(InputMismatchException e)\r\n        {\r\n        \tSystem.out.println(&quot;Invalid input. Enter again.&quot;);\r\n\t\t\tSystem.out.println();\r\n\t\t\tdisplayLoginScreen();\r\n        }\r\n        \r\n        return isStaff;\r\n\t}\r\n```\r\nWhen i run for the first time and enter 1 for choice and the isStaff is false. And then the displayLoginScreen() will run. But for this second time, my choice == 1 and isStaff is true, however, the return isStaff in case 1 did not function and the program run again the do while loop where it ask me to enter my choice again.","title":"Do while loop misfunction","body":"<p>This is my code:</p>\n<pre><code>public boolean displayLoginScreen()\n    {\n        int choice;\n        boolean isStaff = true;\n        Scanner input  = new Scanner(System.in);\n        System.out.print(&quot;****************************************************\\n&quot;);\n        System.out.print(&quot;                                                    \\n&quot;);\n        System.out.print(&quot;         Grocery Store Management System            \\n&quot;);\n        System.out.print(&quot;                                                    \\n&quot;);\n        System.out.print(&quot;****************************************************\\n&quot;);\n        System.out.println();\n        System.out.print(&quot;             Do you want to log in as : \\n&quot;);\n        System.out.print(&quot;                   1 = Staff \\n&quot;);\n        System.out.print(&quot;                   2 = Customer\\n&quot;);\n        System.out.print(&quot;                   3 = Exit\\n&quot;);\n        System.out.println();\n        \n        try\n        {\n            do \n            {\n                System.out.print(&quot;Enter your choice : &quot;); \n                choice = input.nextInt();\n                System.out.println(); \n                 \n                switch(choice)\n                {\n                    case 1:\n                    {\n                        isStaff = staffLogin();\n                        \n                        if(isStaff)\n                            return isStaff;\n                        else\n                            displayLoginScreen();\n                        \n                        break;\n                    }\n                    \n                    case 2:\n                    {\n                        customerLogin();\n                        return isStaff = false;\n                    }\n                    \n                    case 3:\n                        System.exit(0);\n                        break;\n                        \n                    default:\n                        System.out.println(&quot;Invalid input. Enter again.&quot;);\n                        System.out.println();\n                }\n                \n            } while(choice != 3);\n        }\n            \n        catch(InputMismatchException e)\n        {\n            System.out.println(&quot;Invalid input. Enter again.&quot;);\n            System.out.println();\n            displayLoginScreen();\n        }\n        \n        return isStaff;\n    }\n</code></pre>\n<p>When i run for the first time and enter 1 for choice and the isStaff is false. And then the displayLoginScreen() will run. But for this second time, my choice == 1 and isStaff is true, however, the return isStaff in case 1 did not function and the program run again the do while loop where it ask me to enter my choice again.</p>\n"},{"tags":["java","hashcode"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1649872421,"post_id":71861791,"comment_id":126988174,"body_markdown":"The String class already provides a good hash algorithm.  Please provide more information in your question.","body":"The String class already provides a good hash algorithm.  Please provide more information in your question."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1649872498,"post_id":71861791,"comment_id":126988197,"body_markdown":"Can you clarify why are you not satisfied with the current version? What does `sizetable` variable denotes? Is this method a part of a custom collection?","body":"Can you clarify why are you not satisfied with the current version? What does <code>sizetable</code> variable denotes? Is this method a part of a custom collection?"},{"owner":{"account_id":24926574,"reputation":3,"user_id":18794247,"display_name":"chadsqlcoder"},"score":0,"creation_date":1649872616,"post_id":71861791,"comment_id":126988231,"body_markdown":"Teacher just told try it yourself.","body":"Teacher just told try it yourself."},{"owner":{"account_id":24926574,"reputation":3,"user_id":18794247,"display_name":"chadsqlcoder"},"score":0,"creation_date":1649872697,"post_id":71861791,"comment_id":126988249,"body_markdown":"@AlexanderIvanchenko I am not sure if I did the correct thing. I am not working on a big data, therefore there might not contain any exceptions such as &quot;tsih&quot; and &quot;this&quot; has the same integer hashcode. So that even if I wrote the wrong code, it still can be feasible but not logical. So I am asking you people that is it acceptable hashcode?","body":"@AlexanderIvanchenko I am not sure if I did the correct thing. I am not working on a big data, therefore there might not contain any exceptions such as &quot;tsih&quot; and &quot;this&quot; has the same integer hashcode. So that even if I wrote the wrong code, it still can be feasible but not logical. So I am asking you people that is it acceptable hashcode?"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1649872743,"post_id":71861791,"comment_id":126988259,"body_markdown":"There is nothing wrong with two different strings having the same hashcode.  It is expected and would be impossible to avoid given a 32 bit integer and an infinite number of strings.","body":"There is nothing wrong with two different strings having the same hashcode.  It is expected and would be impossible to avoid given a 32 bit integer and an infinite number of strings."},{"owner":{"account_id":24926574,"reputation":3,"user_id":18794247,"display_name":"chadsqlcoder"},"score":0,"creation_date":1649872817,"post_id":71861791,"comment_id":126988291,"body_markdown":"It was just a simple question that I asked here since I do not have any friends to talk about. I just wanted to be sure about what I know and what I did.","body":"It was just a simple question that I asked here since I do not have any friends to talk about. I just wanted to be sure about what I know and what I did."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1649873140,"post_id":71861791,"comment_id":126988394,"body_markdown":"Imo, your hash method is fine.","body":"Imo, your hash method is fine."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1649873784,"post_id":71861791,"comment_id":126988567,"body_markdown":"@chadsqlcoder There&#39;s no hash-function that will not produce any collisions (same hash for different input). For me, your current implementation looks ok. If you want to make sure that it doesn&#39;t create a lot of collisions - write a test: generate a collection (*or array if you are not comfortable with collections*) of unique random string (*or find some kind of vocabulary on the internet for that*), then create a collection of hashes with your function and determine how many of them are identical?","body":"@chadsqlcoder There&#39;s no hash-function that will not produce any collisions (same hash for different input). For me, your current implementation looks ok. If you want to make sure that it doesn&#39;t create a lot of collisions - write a test: generate a collection (<i>or array if you are not comfortable with collections</i>) of unique random string (<i>or find some kind of vocabulary on the internet for that</i>), then create a collection of hashes with your function and determine how many of them are identical?"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649873143,"creation_date":1649873143,"answer_id":71862035,"question_id":71861791,"body_markdown":"Your implementation looks quite similar to what is [documented][1] as standard `String.hashCode()` implementation, this even uses also 31 as prime factor, so it should be good enough. \r\n\r\nI just would not assign `31` to a variable, but declare a `private static final` field or use it directly as magic number - not OK in general, but might be OK in this case.\r\n\r\nAdditionally you should add some tests - if you already know about the concept of unit tests - to prove that your method gives different hashes for different strings. And pick the samples clever, so they are different (for the case of the homework ;)\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#hashCode()","title":"How can we write a polynomial hash function with given prime","body":"<p>Your implementation looks quite similar to what is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#hashCode()\" rel=\"nofollow noreferrer\">documented</a> as standard <code>String.hashCode()</code> implementation, this even uses also 31 as prime factor, so it should be good enough.</p>\n<p>I just would not assign <code>31</code> to a variable, but declare a <code>private static final</code> field or use it directly as magic number - not OK in general, but might be OK in this case.</p>\n<p>Additionally you should add some tests - if you already know about the concept of unit tests - to prove that your method gives different hashes for different strings. And pick the samples clever, so they are different (for the case of the homework ;)</p>\n"}],"owner":{"account_id":24926574,"reputation":3,"user_id":18794247,"display_name":"chadsqlcoder"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":481,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71862035,"answer_count":1,"score":0,"last_activity_date":1649873143,"creation_date":1649871958,"question_id":71861791,"body_markdown":"So for a given prime number 31, how can I write a hash function for a string parameter? \r\n\r\nHere is my attempt.\r\n      \r\n    \tprivate int hash(String key){\r\n            int c = 31;\r\n\t\t    int hash = 0;\r\n\t\t\r\n\t    \tfor (int i = 0; i &lt; key.length(); i++ ) {\r\n\t\t    \tint ascii = key.charAt(i);\r\n\t\t\t    hash += c * hash + ascii; \r\n\t\t}\r\n\t\t    return (hash % sizetable);} // sizetable is an integer which is declared outside. You can see it as a table.length().\r\n\r\n\r\nSo, since I can not run any other function in my work and I need to be sure about the process here, I need your answers and help! Thank you so much.\r\n\r\n","title":"How can we write a polynomial hash function with given prime","body":"<p>So for a given prime number 31, how can I write a hash function for a string parameter?</p>\n<p>Here is my attempt.</p>\n<pre><code>    private int hash(String key){\n        int c = 31;\n        int hash = 0;\n    \n        for (int i = 0; i &lt; key.length(); i++ ) {\n            int ascii = key.charAt(i);\n            hash += c * hash + ascii; \n    }\n        return (hash % sizetable);} // sizetable is an integer which is declared outside. You can see it as a table.length().\n</code></pre>\n<p>So, since I can not run any other function in my work and I need to be sure about the process here, I need your answers and help! Thank you so much.</p>\n"},{"tags":["java","timestamp"],"comments":[{"owner":{"account_id":7132908,"reputation":189,"user_id":5453550,"display_name":"NLxDoDge"},"score":0,"creation_date":1649851732,"post_id":71857167,"comment_id":126979701,"body_markdown":"I see that the  &quot;30-APR-96 05:30:00.00000000 AM&quot; has 8 ending zero&#39;s while the error says [.ffffff] which is 6. Maybe it cannot interpret that?","body":"I see that the  &quot;30-APR-96 05:30:00.00000000 AM&quot; has 8 ending zero&#39;s while the error says [.ffffff] which is 6. Maybe it cannot interpret that?"},{"owner":{"account_id":24925114,"reputation":1,"user_id":18792978,"display_name":"Beginn"},"score":0,"creation_date":1649851989,"post_id":71857167,"comment_id":126979800,"body_markdown":"May be in writing i missed zero but there are 9 zeros","body":"May be in writing i missed zero but there are 9 zeros"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1649852933,"post_id":71857167,"comment_id":126980168,"body_markdown":"`Timestamp.valueOf()` requires a string in the format of `yyyy-[m]m-[d]d hh:mm:ss[.f...]` and nothing else.","body":"<code>Timestamp.valueOf()</code> requires a string in the format of <code>yyyy-[m]m-[d]d hh:mm:ss[.f...]</code> and nothing else."},{"owner":{"account_id":24925114,"reputation":1,"user_id":18792978,"display_name":"Beginn"},"score":0,"creation_date":1649857960,"post_id":71857167,"comment_id":126982293,"body_markdown":"So what could be possible solution for it?","body":"So what could be possible solution for it?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1649862814,"post_id":71857167,"comment_id":126984511,"body_markdown":"I recommend you dont use `SimpleDateFormat`, `Date` and `Timestamp`. Those classes are poorly designed and long outdated, the first in particular notoriously troublesome. Instead use `ZonedDateTime`, `DateTimeFormatter` and other classes from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"I recommend you dont use <code>SimpleDateFormat</code>, <code>Date</code> and <code>Timestamp</code>. Those classes are poorly designed and long outdated, the first in particular notoriously troublesome. Instead use <code>ZonedDateTime</code>, <code>DateTimeFormatter</code> and other classes from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649863096,"post_id":71857167,"comment_id":126984618,"body_markdown":"A `Timestamp` hasnt got, as in cannot have a format. Also timestamps are not stored in the database in the format you mention. They are only displayed that way when you retrieve them. Does this answer your question? [Timestamp comes with .0 at the end](https://stackoverflow.com/questions/17545196/timestamp-comes-with-0-at-the-end). Does [this](https://stackoverflow.com/questions/19544067/how-to-format-a-java-sql-timestampyyyy-mm-dd-hhmmss-s-to-a-dateyyyy-mm-dd-h)?","body":"A <code>Timestamp</code> hasnt got, as in cannot have a format. Also timestamps are not stored in the database in the format you mention. They are only displayed that way when you retrieve them. Does this answer your question? <a href=\"https://stackoverflow.com/questions/17545196/timestamp-comes-with-0-at-the-end\">Timestamp comes with .0 at the end</a>. Does <a href=\"https://stackoverflow.com/questions/19544067/how-to-format-a-java-sql-timestampyyyy-mm-dd-hhmmss-s-to-a-dateyyyy-mm-dd-h\">this</a>?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649863324,"post_id":71857167,"comment_id":126984714,"body_markdown":"For a timestamp the data type `timestamp with time zone` is recommended in SQL Your format seems to indicate that in your case `timestamp` without time zone is used? In the latter case pass a modern `LocalDateTime` to your JDBC driver or JPA implementation, and everyone will be happy (except when one day the timestamp is interpreted in the wrong time zone, but preventing that will require changing the table design). See [Dates with no time or timezone component in Java/MySQL](https://stackoverflow.com/questions/285553/dates-with-no-time-or-timezone-component-in-java-mysql).","body":"For a timestamp the data type <code>timestamp with time zone</code> is recommended in SQL Your format seems to indicate that in your case <code>timestamp</code> without time zone is used? In the latter case pass a modern <code>LocalDateTime</code> to your JDBC driver or JPA implementation, and everyone will be happy (except when one day the timestamp is interpreted in the wrong time zone, but preventing that will require changing the table design). See <a href=\"https://stackoverflow.com/questions/285553/dates-with-no-time-or-timezone-component-in-java-mysql\">Dates with no time or timezone component in Java/MySQL</a>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649863415,"post_id":71857167,"comment_id":126984755,"body_markdown":"(Despite the question title the most upvoted answer under the question I just linked to does treat timestamps with and without time zones.)","body":"(Despite the question title the most upvoted answer under the question I just linked to does treat timestamps with and without time zones.)"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1649863873,"post_id":71857167,"comment_id":126984934,"body_markdown":"If you indispensably need an old-fashioned `Timestamp` object for a legacy API that you cannot change, get it as `Timestamp.from(ZonedDateTime.parse(str, DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;, Locale.ROOT)).toInstant())`. On my Java the resulting `Timestamp` printed as `1996-04-30 02:00:00.0` because my time zone was at UTC offset +02:00 in April 1996.","body":"If you indispensably need an old-fashioned <code>Timestamp</code> object for a legacy API that you cannot change, get it as <code>Timestamp.from(ZonedDateTime.parse(str, DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;, Locale.ROOT)).toInstant())</code>. On my Java the resulting <code>Timestamp</code> printed as <code>1996-04-30 02:00:00.0</code> because my time zone was at UTC offset +02:00 in April 1996."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649865922,"creation_date":1649864702,"answer_id":71860296,"question_id":71857167,"body_markdown":"# tl;dr\r\n\r\n    myPreparedStatement.setObject( \r\n         , \r\n        ZonedDateTime\r\n        .parse( \r\n            &quot;Tue Apr 30 00:00:00 UTC 1996&quot; , \r\n            DateTimeFormatter\r\n            .ofPattern( &quot;E MMM dd HH:mm:ss zzz uuuu&quot; )\r\n            .withLocale( Locale.US ) \r\n        ) \r\n        .toOffsetDateTime()\r\n    );\r\n\r\n\r\n# Avoid legacy date-time classes.\r\n\r\nYou are using terribly flawed date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310. Never use `Date`, `Calendar`, `SimpleDateFormat`, etc.\r\n\r\nIn particular, your input data uses a resolution of nanoseconds, while th&#233; `java.util.Date` class is limited to milliseconds.\r\n\r\n# ISO 8601\r\n\r\nLet me mention that data exchange should be using standard ISO 8601 formats for date-time values transmitted as text. The standard formats are concise, unambiguous, and easily read by both humans and machines.\r\n\r\nUse custom or localized formats only for presentation to user, not for storage and data exchange.\r\n\r\nSo, &quot;Tue Apr 30 00:00:00 UTC 1996&quot; would be `1996-04-30T00:00:00Z` where `Z` is short for `+00:00`, an offset from UTC of zero hours-minutes-seconds.\r\n\r\n# *java.time*\r\n\r\nThe *java.time* classes do support the nanoseconds resolution needed for your data inputs.\r\n\r\nDefine a formatting pattern to match the input. Specify a `Locale` to determine the human language and cultural norms used in translation.\r\n\r\n    Locale locale = new Locale( &quot;en&quot; , &quot;IN&quot; ) ;\r\n    DateTimeFormatter f = DateTimeFormatter.ofPattern( &quot;E MMM dd HH:mm:ss zzz uuuu&quot; ) ;\r\n\r\nParse your input.\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.parse( &quot;Tue Apr 30 00:00:00 UTC 1996&quot; , f ) ;\r\n\r\nSee this [code run live at IdeOne.com][1].\r\n\r\n&gt;zdt.toString(): 1996-04-30T00:00Z[UTC]\r\n\r\nApparently you want to see this moment as it appears in the India &#127470;&#127475; time zone. Specify the desired time zone as a `ZoneId` object.\r\n\r\n    ZoneId z = ZoneId.of( &quot;Asia/Kolkata&quot; ) ; \r\n\r\nApply the zone to get another `ZonedDateTime` object.\r\n\r\n    ZonedDateTime zdtKolkata = zdt.withZoneSameInstant( z ) ;\r\n\r\nSee this [code run live at IdeOne.com][1].\r\n\r\n&gt; zdtKolkata.toString(): 1996-04-30T05:30+05:30[Asia/Kolkata]\r\n\r\nYou asked for a `java.sql.Timestamp` object. That class is one of the terrible legacy classes to avoid. And it is unnecessary. JDBC 4.2 and later requires that a JDBC driver support *java.time*. \r\n\r\nTo write a moment to a database, we need to use `OffsetDateTime` rather than `ZonedDateTime`. The SQL standard does not specify time zones, only offsets. \r\n\r\nAnd, there is no need for the India-specific value. Most databases saving into a column of a type akin to the SQL standard type `TIMESTAMP WITH TIME ZONE` will automatically adjust inputs into UTC (an offset of zero). \r\n\r\n    OffsetDateTime odt = zdt.toOffsetDateTime() ;\r\n    myPreparedStatement.setObject(  , odt ) ;\r\n\r\nRetrieval. \r\n\r\n    OffsetDateTime odt = myResultSet.getObject(  , OffsetDateTime.class ) ;\r\n\r\n**Beware:** Verify the data type of your database column. If you are using a column of a type akin to the SQL standard type `TIMESTAMP WITHOUT TIME ZONE`, you are using the wrong type. That type **cannot represent a moment**, a specific point on the timeline. Such a type has only a date with time of day, but lacks the context of an offset. \r\n\r\n\r\n  [1]: https://ideone.com/NN382a","title":"Saving a timestamp value from a given string value","body":"<h1>tl;dr</h1>\n<pre><code>myPreparedStatement.setObject( \n     , \n    ZonedDateTime\n    .parse( \n        &quot;Tue Apr 30 00:00:00 UTC 1996&quot; , \n        DateTimeFormatter\n        .ofPattern( &quot;E MMM dd HH:mm:ss zzz uuuu&quot; )\n        .withLocale( Locale.US ) \n    ) \n    .toOffsetDateTime()\n);\n</code></pre>\n<h1>Avoid legacy date-time classes.</h1>\n<p>You are using terribly flawed date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310. Never use <code>Date</code>, <code>Calendar</code>, <code>SimpleDateFormat</code>, etc.</p>\n<p>In particular, your input data uses a resolution of nanoseconds, while th <code>java.util.Date</code> class is limited to milliseconds.</p>\n<h1>ISO 8601</h1>\n<p>Let me mention that data exchange should be using standard ISO 8601 formats for date-time values transmitted as text. The standard formats are concise, unambiguous, and easily read by both humans and machines.</p>\n<p>Use custom or localized formats only for presentation to user, not for storage and data exchange.</p>\n<p>So, &quot;Tue Apr 30 00:00:00 UTC 1996&quot; would be <code>1996-04-30T00:00:00Z</code> where <code>Z</code> is short for <code>+00:00</code>, an offset from UTC of zero hours-minutes-seconds.</p>\n<h1><em>java.time</em></h1>\n<p>The <em>java.time</em> classes do support the nanoseconds resolution needed for your data inputs.</p>\n<p>Define a formatting pattern to match the input. Specify a <code>Locale</code> to determine the human language and cultural norms used in translation.</p>\n<pre><code>Locale locale = new Locale( &quot;en&quot; , &quot;IN&quot; ) ;\nDateTimeFormatter f = DateTimeFormatter.ofPattern( &quot;E MMM dd HH:mm:ss zzz uuuu&quot; ) ;\n</code></pre>\n<p>Parse your input.</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.parse( &quot;Tue Apr 30 00:00:00 UTC 1996&quot; , f ) ;\n</code></pre>\n<p>See this <a href=\"https://ideone.com/NN382a\" rel=\"nofollow noreferrer\">code run live at IdeOne.com</a>.</p>\n<blockquote>\n<p>zdt.toString(): 1996-04-30T00:00Z[UTC]</p>\n</blockquote>\n<p>Apparently you want to see this moment as it appears in the India  time zone. Specify the desired time zone as a <code>ZoneId</code> object.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Asia/Kolkata&quot; ) ; \n</code></pre>\n<p>Apply the zone to get another <code>ZonedDateTime</code> object.</p>\n<pre><code>ZonedDateTime zdtKolkata = zdt.withZoneSameInstant( z ) ;\n</code></pre>\n<p>See this <a href=\"https://ideone.com/NN382a\" rel=\"nofollow noreferrer\">code run live at IdeOne.com</a>.</p>\n<blockquote>\n<p>zdtKolkata.toString(): 1996-04-30T05:30+05:30[Asia/Kolkata]</p>\n</blockquote>\n<p>You asked for a <code>java.sql.Timestamp</code> object. That class is one of the terrible legacy classes to avoid. And it is unnecessary. JDBC 4.2 and later requires that a JDBC driver support <em>java.time</em>.</p>\n<p>To write a moment to a database, we need to use <code>OffsetDateTime</code> rather than <code>ZonedDateTime</code>. The SQL standard does not specify time zones, only offsets.</p>\n<p>And, there is no need for the India-specific value. Most databases saving into a column of a type akin to the SQL standard type <code>TIMESTAMP WITH TIME ZONE</code> will automatically adjust inputs into UTC (an offset of zero).</p>\n<pre><code>OffsetDateTime odt = zdt.toOffsetDateTime() ;\nmyPreparedStatement.setObject(  , odt ) ;\n</code></pre>\n<p>Retrieval.</p>\n<pre><code>OffsetDateTime odt = myResultSet.getObject(  , OffsetDateTime.class ) ;\n</code></pre>\n<p><strong>Beware:</strong> Verify the data type of your database column. If you are using a column of a type akin to the SQL standard type <code>TIMESTAMP WITHOUT TIME ZONE</code>, you are using the wrong type. That type <strong>cannot represent a moment</strong>, a specific point on the timeline. Such a type has only a date with time of day, but lacks the context of an offset.</p>\n"}],"owner":{"account_id":24925114,"reputation":1,"user_id":18792978,"display_name":"Beginn"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649872881,"creation_date":1649851220,"question_id":71857167,"body_markdown":"I am having a string value in format &quot;Tue Apr 30 00:00:00 UTC 1996&quot;;\r\n. I want this value to be converted into a timestamp field in &quot;30-APR-96 05:30:00.000000000 AM&quot;\r\n\r\nWhat i tried here is \r\n```\r\nDateFormat formatter = new SimpleDateFormat(&quot;E MMM dd HH:mm:ss Z yyyy&quot;);\r\nDate date = formatter.parse(str);\r\nTimestamp ts = new Timestamp(date getTime());\r\nSimpleDateFormat fo = new SimpleDateFormat(&quot;dd-MMM-yy hh:mm:ss.SSSSSSSSS a&quot;);\r\nfo.format(ts);\r\n//When i try here Timestamp.valueOf(fo.format(ts));\r\n```\r\n\r\nI am getting an exception Timestamp format must be yyyy-mm-dd hh:mm:ss[.ffffff]\r\n\r\nIn DB when i see i have the type as Timestamp and values are stored in  &quot;30-APR-96 05:30:00.000000000 AM&quot;","title":"Saving a timestamp value from a given string value","body":"<p>I am having a string value in format &quot;Tue Apr 30 00:00:00 UTC 1996&quot;;\n. I want this value to be converted into a timestamp field in &quot;30-APR-96 05:30:00.000000000 AM&quot;</p>\n<p>What i tried here is</p>\n<pre><code>DateFormat formatter = new SimpleDateFormat(&quot;E MMM dd HH:mm:ss Z yyyy&quot;);\nDate date = formatter.parse(str);\nTimestamp ts = new Timestamp(date getTime());\nSimpleDateFormat fo = new SimpleDateFormat(&quot;dd-MMM-yy hh:mm:ss.SSSSSSSSS a&quot;);\nfo.format(ts);\n//When i try here Timestamp.valueOf(fo.format(ts));\n</code></pre>\n<p>I am getting an exception Timestamp format must be yyyy-mm-dd hh:mm:ss[.ffffff]</p>\n<p>In DB when i see i have the type as Timestamp and values are stored in  &quot;30-APR-96 05:30:00.000000000 AM&quot;</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1649870015,"post_id":71861288,"comment_id":126987362,"body_markdown":"Look at the class [Files](https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#readAllLines(java.nio.file.Path,java.nio.charset.Charset)) with `readAllLines` and `write`.","body":"Look at the class <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#readAllLines(java.nio.file.Path,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\">Files</a> with <code>readAllLines</code> and <code>write</code>."},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1649872697,"post_id":71861288,"comment_id":126988248,"body_markdown":"For clarity, &#39;cheese&#39; followed by &#39;pepper&#39; means &quot;Find a line starting with &#39;cheese&#39; and replace the last word with &#39;pepper&#39;?","body":"For clarity, &#39;cheese&#39; followed by &#39;pepper&#39; means &quot;Find a line starting with &#39;cheese&#39; and replace the last word with &#39;pepper&#39;?"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649869671,"creation_date":1649869671,"answer_id":71861386,"question_id":71861288,"body_markdown":"Your algorithm could look like this:\r\n\r\n1. read in the file\r\n2. split it up by spaces (you will get an array)\r\n3. put the result into a modifiable list (you can&#39;t easily insert into an array)\r\n4. search for the index of a word\r\n5. insert another entry by index (you can calculate the correct index from the result of step 4)\r\n6. overwrite the file with the contents of the list, separated by additional spaces.","title":"Read certain words from a line of text that is chosen by the user and can be altered","body":"<p>Your algorithm could look like this:</p>\n<ol>\n<li>read in the file</li>\n<li>split it up by spaces (you will get an array)</li>\n<li>put the result into a modifiable list (you can't easily insert into an array)</li>\n<li>search for the index of a word</li>\n<li>insert another entry by index (you can calculate the correct index from the result of step 4)</li>\n<li>overwrite the file with the contents of the list, separated by additional spaces.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":23173771,"reputation":215,"user_id":17272599,"display_name":"dbakr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649872366,"creation_date":1649872366,"answer_id":71861883,"question_id":71861288,"body_markdown":"Here is a solution utilizing `File` module along with `BufferedReader`/`BufferedWriter`\r\n\r\n**packages**\r\n```java\r\nimport java.io.BufferedReader;\r\nimport java.io.BufferedWriter;\r\nimport java.io.FileReader;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\nimport java.nio.file.*;\r\n```\r\n---\r\n**Driver program**\r\n```java\r\npublic class Main{\r\n    public static void main(String[] args) throws IOException{\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the file name: &quot;);\r\n        String path = sc.nextLine();\r\n        Path p = Paths.get(path);\r\n        List &lt;String&gt; lines = Files.readAllLines(p);\r\n        System.out.println(&quot;Enter new word:&quot;);\r\n        String newWord = sc.nextLine();\r\n        System.out.println(&quot;Which word would you like &quot; + newWord + &quot; to replace?&quot;);\r\n        String oldWord = sc.nextLine();\r\n        for(int i = 0; i &lt; lines.size(); i++){\r\n            String line = lines.get(i);\r\n            line = line.replace(oldWord, word); // if current word is old word, replace with new one\r\n            lines.set(i, line); // update list\r\n        }\r\n        readFile(path); // read here will output original list\r\n        writeListToFile(lines, path); // overwrite sample.txt file\r\n        readFile(path); // read here will output updated text file from path\r\n        sc.close();\r\n    }\r\n```\r\n---\r\n**helper functions**\r\n```java\r\n    public static void readFile(String fileName){\r\n        try{\r\n            FileReader fr = new FileReader(fileName);\r\n            BufferedReader br = new BufferedReader(fr);\r\n            String line = br.readLine();\r\n            while(line != null){\r\n                System.out.println(line);\r\n                line = br.readLine();\r\n            }\r\n            br.close();\r\n        }catch(IOException e){\r\n            System.out.println(&quot;Error reading file&quot;);\r\n        }\r\n    }\r\n```\r\n```java\r\n    public static void writeListToFile(List&lt;String&gt; list, String path){\r\n        try{\r\n            FileWriter fw = new FileWriter(path);\r\n            BufferedWriter bw = new BufferedWriter(fw);\r\n            for(int i = 0; i &lt; list.size(); i++){\r\n                bw.write(list.get(i));\r\n                bw.newLine();\r\n            }\r\n            bw.close();\r\n        }catch(IOException e){\r\n            System.out.println(&quot;Error writing to file&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"Read certain words from a line of text that is chosen by the user and can be altered","body":"<p>Here is a solution utilizing <code>File</code> module along with <code>BufferedReader</code>/<code>BufferedWriter</code></p>\n<p><strong>packages</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.nio.file.*;\n</code></pre>\n<hr />\n<p><strong>Driver program</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main{\n    public static void main(String[] args) throws IOException{\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter the file name: &quot;);\n        String path = sc.nextLine();\n        Path p = Paths.get(path);\n        List &lt;String&gt; lines = Files.readAllLines(p);\n        System.out.println(&quot;Enter new word:&quot;);\n        String newWord = sc.nextLine();\n        System.out.println(&quot;Which word would you like &quot; + newWord + &quot; to replace?&quot;);\n        String oldWord = sc.nextLine();\n        for(int i = 0; i &lt; lines.size(); i++){\n            String line = lines.get(i);\n            line = line.replace(oldWord, word); // if current word is old word, replace with new one\n            lines.set(i, line); // update list\n        }\n        readFile(path); // read here will output original list\n        writeListToFile(lines, path); // overwrite sample.txt file\n        readFile(path); // read here will output updated text file from path\n        sc.close();\n    }\n</code></pre>\n<hr />\n<p><strong>helper functions</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void readFile(String fileName){\n        try{\n            FileReader fr = new FileReader(fileName);\n            BufferedReader br = new BufferedReader(fr);\n            String line = br.readLine();\n            while(line != null){\n                System.out.println(line);\n                line = br.readLine();\n            }\n            br.close();\n        }catch(IOException e){\n            System.out.println(&quot;Error reading file&quot;);\n        }\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void writeListToFile(List&lt;String&gt; list, String path){\n        try{\n            FileWriter fw = new FileWriter(path);\n            BufferedWriter bw = new BufferedWriter(fw);\n            for(int i = 0; i &lt; list.size(); i++){\n                bw.write(list.get(i));\n                bw.newLine();\n            }\n            bw.close();\n        }catch(IOException e){\n            System.out.println(&quot;Error writing to file&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10295592,"reputation":53,"user_id":7595868,"accept_rate":100,"display_name":"johnnu "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1649872366,"creation_date":1649869283,"question_id":71861288,"body_markdown":"My apologies for the title wording, it was hard to explain in words.\r\nWhat I am trying to do I this:\r\n\r\nI have a .txt file that has\r\n\r\n    cheese cracker salt \r\n    bread butter ham\r\n\r\nI want the user to be able to enter &#39;cheese&#39; then type in pepper which will in turn update the file to become\r\n\r\n    cheese cracker pepper\r\n    bread butter ham\r\n\r\nI am unsure how to go about editing the third word after I have the user input the first word.\r\n\r\n","title":"Read certain words from a line of text that is chosen by the user and can be altered","body":"<p>My apologies for the title wording, it was hard to explain in words.\nWhat I am trying to do I this:</p>\n<p>I have a .txt file that has</p>\n<pre><code>cheese cracker salt \nbread butter ham\n</code></pre>\n<p>I want the user to be able to enter 'cheese' then type in pepper which will in turn update the file to become</p>\n<pre><code>cheese cracker pepper\nbread butter ham\n</code></pre>\n<p>I am unsure how to go about editing the third word after I have the user input the first word.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":5860981,"reputation":1600,"user_id":4616696,"display_name":"Dermot Blair"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1426298857,"creation_date":1426297896,"answer_id":29044586,"question_id":29044578,"body_markdown":"Try this:\r\n\r\n    public static void whatsIt(int n){\r\n    if (n&gt;10)\r\n        whatsIt(n/10);\r\n    else\r\n        System.out.print(n%10);\r\n    }\r\n\r\nBecause you do not want to print anything if n &lt;= 10. \r\n\r\nIn your initial code, each recursive call was printing n%10. Therefore the first call, `whatsIt(347)`, was printing 7 (347 % 10), the second call was printing 4 (34 % 10) and the third call was printing 3 (3 % 10). These would have been printed in reverse order during backtracking giving you 347.","title":"Why does this method print out 347 rather than 3?","body":"<p>Try this:</p>\n\n<pre><code>public static void whatsIt(int n){\nif (n&gt;10)\n    whatsIt(n/10);\nelse\n    System.out.print(n%10);\n}\n</code></pre>\n\n<p>Because you do not want to print anything if n &lt;= 10. </p>\n\n<p>In your initial code, each recursive call was printing n%10. Therefore the first call, <code>whatsIt(347)</code>, was printing 7 (347 % 10), the second call was printing 4 (34 % 10) and the third call was printing 3 (3 % 10). These would have been printed in reverse order during backtracking giving you 347.</p>\n"},{"tags":[],"owner":{"account_id":5866004,"reputation":16374,"user_id":4619958,"accept_rate":83,"display_name":"ch271828n"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1426297939,"creation_date":1426297939,"answer_id":29044591,"question_id":29044578,"body_markdown":"If you want to print 3, use this\n\n    public static void whatsIt(int n){ \n        if (n&gt;10) whatsIt(n/10);\n        else System.out.print(n%10);\n    }\n\nYour code works as:\n\n1. whatsit(347): call whatsit(34), then print 7, then return\n2. whatsit(34): call whatsit(3), then print 4, then return.\n3. whatsit(3): print 3, then return.","title":"Why does this method print out 347 rather than 3?","body":"<p>If you want to print 3, use this</p>\n\n<pre><code>public static void whatsIt(int n){ \n    if (n&gt;10) whatsIt(n/10);\n    else System.out.print(n%10);\n}\n</code></pre>\n\n<p>Your code works as:</p>\n\n<ol>\n<li>whatsit(347): call whatsit(34), then print 7, then return</li>\n<li>whatsit(34): call whatsit(3), then print 4, then return.</li>\n<li>whatsit(3): print 3, then return.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":238697,"reputation":1454,"user_id":507761,"accept_rate":100,"display_name":"Matthew Read"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1426298200,"creation_date":1426298200,"answer_id":29044610,"question_id":29044578,"body_markdown":"Methods do not stop if they call themselves.  When the sub-calls have finished, control flow returns to the &quot;original&quot; method call and continues to the next line, which is the print, and thus prints the original number.","title":"Why does this method print out 347 rather than 3?","body":"<p>Methods do not stop if they call themselves.  When the sub-calls have finished, control flow returns to the \"original\" method call and continues to the next line, which is the print, and thus prints the original number.</p>\n"},{"tags":[],"owner":{"account_id":78551,"reputation":6546,"user_id":223486,"accept_rate":81,"display_name":"Andrew Magee"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1426299027,"creation_date":1426298659,"answer_id":29044649,"question_id":29044578,"body_markdown":"You can step through what it does:\r\n\r\n    whatsIt(347)\r\n    - is 347 &gt; 10? yes\r\n    -- whatsIt(34)\r\n    --- is 34 &gt; 10? yes\r\n    ---- whatsIt(3)\r\n    ----- is 3 &gt; 10? no\r\n    ----- print 3 % 10 (-&gt; 3)\r\n    --- print 34 % 10 (-&gt; 4)\r\n    - print (347 % 10) (-&gt; 7)","title":"Why does this method print out 347 rather than 3?","body":"<p>You can step through what it does:</p>\n\n<pre><code>whatsIt(347)\n- is 347 &gt; 10? yes\n-- whatsIt(34)\n--- is 34 &gt; 10? yes\n---- whatsIt(3)\n----- is 3 &gt; 10? no\n----- print 3 % 10 (-&gt; 3)\n--- print 34 % 10 (-&gt; 4)\n- print (347 % 10) (-&gt; 7)\n</code></pre>\n"}],"owner":{"account_id":5148795,"reputation":21,"user_id":4123942,"display_name":"joe Dfjksa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":721,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1649872106,"creation_date":1426297793,"question_id":29044578,"body_markdown":"Suppose I have the method\r\n\r\n    public static void whatsIt(int n){\r\n    if (n&gt;10)\r\n        whatsIt(n/10);\r\n    System.out.print(n%10);\r\n    }\r\nand I call whatsIt(347), why does it print 347 instead of 3?\r\n    \r\n","title":"Why does this method print out 347 rather than 3?","body":"<p>Suppose I have the method</p>\n\n<pre><code>public static void whatsIt(int n){\nif (n&gt;10)\n    whatsIt(n/10);\nSystem.out.print(n%10);\n}\n</code></pre>\n\n<p>and I call whatsIt(347), why does it print 347 instead of 3?</p>\n"},{"tags":["java","jsp","veracode"],"owner":{"account_id":24928749,"reputation":11,"user_id":18796136,"display_name":"Sanmati Munde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649871824,"creation_date":1649871824,"question_id":71861769,"body_markdown":"Following is the piece of code\r\n\r\n```&lt;jsp:useBean id=&quot;test1&quot; scope=&quot;session&quot; class=&quot;java.lang.String&quot; /&gt;```\r\n\r\n```&lt;%=test1%&gt;```\r\n\r\nIn the line &quot;&lt;%=test1%&gt;&quot; I am getting the vera code issue . How to fix the issue.\r\n\r\nTried to fix with below code, It is showing another issue &quot;Improper Handling of Invalid Use of Special Elements (CWE ID 159)&quot;\r\n```&lt;%= ESAPI.encoder().encodeForHTML(test1) %&gt;```","title":"Veracode issue in JSP - Insertion of Sensitive Information Into Sent Data (CWE ID 201)","body":"<p>Following is the piece of code</p>\n<p><code>&lt;jsp:useBean id=&quot;test1&quot; scope=&quot;session&quot; class=&quot;java.lang.String&quot; /&gt;</code></p>\n<p><code>&lt;%=test1%&gt;</code></p>\n<p>In the line &quot;&lt;%=test1%&gt;&quot; I am getting the vera code issue . How to fix the issue.</p>\n<p>Tried to fix with below code, It is showing another issue &quot;Improper Handling of Invalid Use of Special Elements (CWE ID 159)&quot;\n<code>&lt;%= ESAPI.encoder().encodeForHTML(test1) %&gt;</code></p>\n"},{"tags":["java","api","servlets","backend"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1649871334,"post_id":71861596,"comment_id":126987849,"body_markdown":"Of course.  Why not?","body":"Of course.  Why not?"},{"owner":{"account_id":15689183,"reputation":55,"user_id":11320852,"display_name":"krr"},"score":0,"creation_date":1649871618,"post_id":71861596,"comment_id":126987931,"body_markdown":"@LouisWasserman can you be more specific about &quot;Why not&quot;? I didn&#39;t understand","body":"@LouisWasserman can you be more specific about &quot;Why not&quot;? I didn&#39;t understand"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1649871662,"post_id":71861596,"comment_id":126987946,"body_markdown":"&quot;Why couldn&#39;t you&quot;? An API is a contract that may or may not include a concrete implementation.","body":"&quot;Why couldn&#39;t you&quot;? An API is a contract that may or may not include a concrete implementation."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1649871735,"post_id":71861596,"comment_id":126987976,"body_markdown":"*Just* an interface is a contract only--it wouldn&#39;t be able to actually *do* anything beyond provide default functions.","body":"<i>Just</i> an interface is a contract only--it wouldn&#39;t be able to actually <i>do</i> anything beyond provide default functions."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649871749,"creation_date":1649871749,"answer_id":71861751,"question_id":71861596,"body_markdown":"Your API is the set of `public` things exposed to users of your code, and the contracts they guarantee and document.  It includes public classes, public constructors, public methods, public interfaces (and all interface methods, since they are definitionally public), public enums, public fields, etc.\r\n\r\nSince classes can be public, they can be part of your API.\r\n\r\n(I think you&#39;re significantly overcomplicating the concept of an API for yourself.)","title":"Do API contain only interfaces? Can&#39;t it contain classes also?","body":"<p>Your API is the set of <code>public</code> things exposed to users of your code, and the contracts they guarantee and document.  It includes public classes, public constructors, public methods, public interfaces (and all interface methods, since they are definitionally public), public enums, public fields, etc.</p>\n<p>Since classes can be public, they can be part of your API.</p>\n<p>(I think you're significantly overcomplicating the concept of an API for yourself.)</p>\n"}],"owner":{"account_id":15689183,"reputation":55,"user_id":11320852,"display_name":"krr"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":289,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71861751,"answer_count":1,"score":-1,"last_activity_date":1649871749,"creation_date":1649870832,"question_id":71861596,"body_markdown":"I am new to API(Application Programming **Interfaces**). I want to ask whether API is a subset of Interfaces. Can API contain classes? Also I came to know that APIs are used to build functionalities for carrying out say a communication between two layers. This functionality building is explicitly through interfaces only or any class is also used?","title":"Do API contain only interfaces? Can&#39;t it contain classes also?","body":"<p>I am new to API(Application Programming <strong>Interfaces</strong>). I want to ask whether API is a subset of Interfaces. Can API contain classes? Also I came to know that APIs are used to build functionalities for carrying out say a communication between two layers. This functionality building is explicitly through interfaces only or any class is also used?</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1565008915,"post_id":57358701,"comment_id":101204596,"body_markdown":"First, you are using raw types. You should be using `JavaRDD&lt;Row&gt;` and `Dataset&lt;Row&gt;`) (if, indeed, they are rdd/dataset of rows). Don&#39;t leave them raw. Second, have you read the suggestion in the [Documentation](https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/DataFrameReader.html)?","body":"First, you are using raw types. You should be using <code>JavaRDD&lt;Row&gt;</code> and <code>Dataset&lt;Row&gt;</code>) (if, indeed, they are rdd/dataset of rows). Don&#39;t leave them raw. Second, have you read the suggestion in the <a href=\"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/DataFrameReader.html\" rel=\"nofollow noreferrer\">Documentation</a>?"},{"owner":{"account_id":1646046,"reputation":505,"user_id":1517586,"display_name":"raj03"},"score":0,"creation_date":1565013967,"post_id":57358701,"comment_id":101207459,"body_markdown":"Not possible as \nList&lt;String&gt; data = Arrays.asList(object);\n JavaRDD&lt;String&gt; rddData = sc1.parallelize(data);\nHence not able to convert the data of type String.","body":"Not possible as  List&lt;String&gt; data = Arrays.asList(object);  JavaRDD&lt;String&gt; rddData = sc1.parallelize(data); Hence not able to convert the data of type String."}],"answers":[{"tags":[],"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1578082246,"creation_date":1565018495,"answer_id":57361605,"question_id":57358701,"body_markdown":"Seems like all you have to do is convert your rdd to a `Dataset&lt;String&gt;` (as @RealSkeptic suggested):\r\n\r\n    Dataset&lt;Row&gt; dataDF_spark24 = spark.read().json(spark.createDataset(rddData.rdd(), Encoders.STRING()));\r\n\r\n\r\nAlternatively, if you&#39;re not tied by keeping `JavaRDD&lt;String&gt; rddData = ...`, this can be simplified further:\r\n\r\n\tDataset&lt;String&gt; dfData = spark.createDataset(data, Encoders.STRING());\r\n\tDataset&lt;Row&gt; dataDF_spark24 = spark.read().json(dfData);\r\n ","title":"Alternative to deprecated method sparksession.read.json(JavaRDD)","body":"<p>Seems like all you have to do is convert your rdd to a <code>Dataset&lt;String&gt;</code> (as @RealSkeptic suggested):</p>\n\n<pre><code>Dataset&lt;Row&gt; dataDF_spark24 = spark.read().json(spark.createDataset(rddData.rdd(), Encoders.STRING()));\n</code></pre>\n\n<p>Alternatively, if you're not tied by keeping <code>JavaRDD&lt;String&gt; rddData = ...</code>, this can be simplified further:</p>\n\n<pre><code>Dataset&lt;String&gt; dfData = spark.createDataset(data, Encoders.STRING());\nDataset&lt;Row&gt; dataDF_spark24 = spark.read().json(dfData);\n</code></pre>\n"}],"owner":{"account_id":1646046,"reputation":505,"user_id":1517586,"display_name":"raj03"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1783,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":57361605,"answer_count":1,"score":2,"last_activity_date":1649871657,"creation_date":1565008358,"question_id":57358701,"body_markdown":"I am using sparksessions read().json method to read the json file before converting it to parquet file and it is working fine but the .json(JAVARDD) method is showing as deprecated method. Can we have alternative method for this.\r\nUsing currently java : spark version 2.4.3\r\n\r\n\r\nI have gone through the documentation of spark library but did not get any alternative method\r\n```\r\nJavaSparkContext sc1 = JavaSparkContext.fromSparkContext(SparkContext.getOrCreate());\r\nJavaRDD&lt;String&gt; rddData = sc1.parallelize(data);\r\nDataset&lt;Row&gt; dataDF = spark.read().json(rddData);\r\n```\r\nHere .json method is showing as deprecated method ? Can we have alternative method for this.\r\n\r\nI&#39;ve gone through \r\nhttps://stackoverflow.com/questions/37323002/how-to-parse-json-in-spark-with-fasterxml-without-sparksql\r\n\r\nand here they suggest SqlContext method which is also deprecated.\r\n\r\n\r\nNeed to know alterntive method of .json in java spark.read().json(JAVARDD object)","title":"Alternative to deprecated method sparksession.read.json(JavaRDD)","body":"<p>I am using sparksessions read().json method to read the json file before converting it to parquet file and it is working fine but the .json(JAVARDD) method is showing as deprecated method. Can we have alternative method for this.\nUsing currently java : spark version 2.4.3</p>\n<p>I have gone through the documentation of spark library but did not get any alternative method</p>\n<pre><code>JavaSparkContext sc1 = JavaSparkContext.fromSparkContext(SparkContext.getOrCreate());\nJavaRDD&lt;String&gt; rddData = sc1.parallelize(data);\nDataset&lt;Row&gt; dataDF = spark.read().json(rddData);\n</code></pre>\n<p>Here .json method is showing as deprecated method ? Can we have alternative method for this.</p>\n<p>I've gone through\n<a href=\"https://stackoverflow.com/questions/37323002/how-to-parse-json-in-spark-with-fasterxml-without-sparksql\">How to parse JSON in Spark with fasterxml without SparkSQL?</a></p>\n<p>and here they suggest SqlContext method which is also deprecated.</p>\n<p>Need to know alterntive method of .json in java spark.read().json(JAVARDD object)</p>\n"},{"tags":["java","properties-file"],"answers":[{"tags":[],"owner":{"account_id":15416144,"reputation":534,"user_id":11121568,"display_name":"Soroush Shemshadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649871453,"creation_date":1649871453,"answer_id":71861706,"question_id":71861356,"body_markdown":"Each time you use the `store()` method, it removes the old data and writes the new data.\r\n\r\nTo prevent this from happening, you must first load your data and then restore it with new data that you want to add.\r\n\r\nThis code snippet may help you:\r\n\r\n```java\r\nProperties prop = new Properties();\r\nprop.load(new FileInputStream(YOUR_PROPERTIE_FILE));\r\nprop.setProperty(key, value);\r\nprop.store(new FileOutputStream(YOUR_PROPERTIE_FILE), COMMENT);\r\n```","title":"Properties file resets when adding or updating value (Java)","body":"<p>Each time you use the <code>store()</code> method, it removes the old data and writes the new data.</p>\n<p>To prevent this from happening, you must first load your data and then restore it with new data that you want to add.</p>\n<p>This code snippet may help you:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Properties prop = new Properties();\nprop.load(new FileInputStream(YOUR_PROPERTIE_FILE));\nprop.setProperty(key, value);\nprop.store(new FileOutputStream(YOUR_PROPERTIE_FILE), COMMENT);\n</code></pre>\n"}],"owner":{"account_id":24878699,"reputation":1,"user_id":18752177,"display_name":"Luci McAuley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649871453,"creation_date":1649869547,"question_id":71861356,"body_markdown":"I&#39;m storing user data (nothing important, just user ID and xp amount/level) in a properties file. When using `prop.store(output, comment)` it resets the file completely and then stores the added data. How can I add data without it resetting the entire file? ","title":"Properties file resets when adding or updating value (Java)","body":"<p>I'm storing user data (nothing important, just user ID and xp amount/level) in a properties file. When using <code>prop.store(output, comment)</code> it resets the file completely and then stores the added data. How can I add data without it resetting the entire file?</p>\n"},{"tags":["java","spring","spring-webflux","project","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649871338,"creation_date":1649871338,"answer_id":71861683,"question_id":71861443,"body_markdown":"You should not subscribe explicitly. Typically you need to construct reactive flow and the framework like `spring-webflux` will subscribe to it.\r\n\r\nIn the following example `flatMap` would subscribe internally and you could chain response to use it in the next operator.\r\n  \r\n```\r\nMono&lt;DispatchResponse&gt; execute() {\r\n\treturn weightService()\r\n\t\t\t.flatMap(wr -&gt; priceService(wr))\r\n\t\t\t.flatMap(pr -&gt; dispatchService(pr));\r\n}\r\n```  ","title":"How to handle nested subscriptions in Spring webflux","body":"<p>You should not subscribe explicitly. Typically you need to construct reactive flow and the framework like <code>spring-webflux</code> will subscribe to it.</p>\n<p>In the following example <code>flatMap</code> would subscribe internally and you could chain response to use it in the next operator.</p>\n<pre><code>Mono&lt;DispatchResponse&gt; execute() {\n    return weightService()\n            .flatMap(wr -&gt; priceService(wr))\n            .flatMap(pr -&gt; dispatchService(pr));\n}\n</code></pre>\n"}],"owner":{"account_id":8261165,"reputation":461,"user_id":6212514,"display_name":"Ajay Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1226,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71861683,"answer_count":1,"score":0,"last_activity_date":1649871338,"creation_date":1649869993,"question_id":71861443,"body_markdown":"I have a requirement in which I need to perform a sequence of 3 method calls each of which returns a Mono.\r\n\r\n       Mono&lt;WeightResponse&gt; weightService() \r\n       Mono&lt;PriceResponse&gt; priceService(WeightResponse wr) \r\n       Mono&lt;DispatchResponse&gt; dispatchService(PriceResponse pr)\r\n\r\nThese 3 method calls need to be done in chronological order.\r\n\r\nThis is what I have tried to come up with. I am yet to compete and test this functionality end to end. I am looking for advice on how to handle this type of scenario in Spring Reactor?\r\nThere is subscription inside subscription inside subscription. Is this the right approach to handle such a scenario?\r\nCould there be any side effects of such nested subscriptions?\r\n\r\n  \r\n\r\n    weightService().subscribe(wr -&gt; {\r\n          priceService(wr).subscribe (pr -&gt; {\r\n            dispatchService(pr).subscribe (dr -&gt; {\r\n                System.out.println(&quot;Dispatch Done!&quot;);\r\n              },\r\n              e -&gt; log.error(&quot;error in dispatch {}&quot;, e);\r\n            );\r\n           },\r\n           e -&gt; log.error(&quot;error in pricing {}&quot;, e);\r\n          );\r\n         },\r\n         e -&gt; log.error(&quot;error in weight calculation {}&quot;, e);\r\n       );\r\n          \r\n\r\n","title":"How to handle nested subscriptions in Spring webflux","body":"<p>I have a requirement in which I need to perform a sequence of 3 method calls each of which returns a Mono.</p>\n<pre><code>   Mono&lt;WeightResponse&gt; weightService() \n   Mono&lt;PriceResponse&gt; priceService(WeightResponse wr) \n   Mono&lt;DispatchResponse&gt; dispatchService(PriceResponse pr)\n</code></pre>\n<p>These 3 method calls need to be done in chronological order.</p>\n<p>This is what I have tried to come up with. I am yet to compete and test this functionality end to end. I am looking for advice on how to handle this type of scenario in Spring Reactor?\nThere is subscription inside subscription inside subscription. Is this the right approach to handle such a scenario?\nCould there be any side effects of such nested subscriptions?</p>\n<pre><code>weightService().subscribe(wr -&gt; {\n      priceService(wr).subscribe (pr -&gt; {\n        dispatchService(pr).subscribe (dr -&gt; {\n            System.out.println(&quot;Dispatch Done!&quot;);\n          },\n          e -&gt; log.error(&quot;error in dispatch {}&quot;, e);\n        );\n       },\n       e -&gt; log.error(&quot;error in pricing {}&quot;, e);\n      );\n     },\n     e -&gt; log.error(&quot;error in weight calculation {}&quot;, e);\n   );\n      \n</code></pre>\n"},{"tags":["java","android","debugging","dalvik","smali"],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649871264,"creation_date":1643637258,"answer_id":70927151,"question_id":70926990,"body_markdown":"`0x161` should be the relative offset/address in bytes from the start of the method. \r\n\r\nIn Jadx open the `Smali` tab for the class you are interested in and select `Show Dalvik Bytecode` from context menu of the smali code panel to see the offsets. The offset you are looking for should be shown in the second gray colored column (the one with the red border in the sample screenshot).\r\n\r\n[![Example Jadx smali code view][1]][1]\r\n\r\nAnd the error should be caused by placing a wrong object reference in `v0`.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ACDg8.png","title":"how to locate the register problem in Android after modifying some smali code of an APK?","body":"<p><code>0x161</code> should be the relative offset/address in bytes from the start of the method.</p>\n<p>In Jadx open the <code>Smali</code> tab for the class you are interested in and select <code>Show Dalvik Bytecode</code> from context menu of the smali code panel to see the offsets. The offset you are looking for should be shown in the second gray colored column (the one with the red border in the sample screenshot).</p>\n<p><a href=\"https://i.stack.imgur.com/ACDg8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ACDg8.png\" alt=\"Example Jadx smali code view\" /></a></p>\n<p>And the error should be caused by placing a wrong object reference in <code>v0</code>.</p>\n"}],"owner":{"account_id":8038724,"reputation":23,"user_id":18081422,"display_name":"jyxu2015"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70927151,"answer_count":1,"score":2,"last_activity_date":1649871264,"creation_date":1643636621,"question_id":70926990,"body_markdown":"I would like to add something to an app, so I added some lines to a smali file (decompiled the apk using apktools) and then repackaged and ran it on a real device.\r\nIt shows \r\n\r\n - 10121 10211 E AndroidRuntime: os.json.JSONObject\r\n   a.b.a.a.a.i.m(android.context.Context, java.lang.String) Failed to\r\n   verify: os.json.JSONObject a.b.a.a.a.i.m(android.context.Context,\r\n   java.lang.String): **[0x161]** v0 has type Conflict but expected\r\n   Reference: java.lang.AutoCloseable (declaration of &#39;a.b.a.a.a.i&#39; in\r\n   /data/app/xxxx/xxxxx/base.apk)\r\n\r\nSo what does the **[0x161]** refer to? Is it a line number?\r\n0x161 = 353 in decimal. So I checked the smali code, but the function a.b.a.a.a.i.m has less than 353 lines in smali, so there is no line 353 and I can not locate the error.\r\n\r\nNeither does this function have enough lines in java (I used jadx to decompiled the generated apk). \r\n\r\nSo in which type of file can I locate the problem in file&#39;s line 353? Should I transformed the apk into some other format to find a line 353 to troubleshoot the error? Thanks in advance.","title":"how to locate the register problem in Android after modifying some smali code of an APK?","body":"<p>I would like to add something to an app, so I added some lines to a smali file (decompiled the apk using apktools) and then repackaged and ran it on a real device.\nIt shows</p>\n<ul>\n<li>10121 10211 E AndroidRuntime: os.json.JSONObject\na.b.a.a.a.i.m(android.context.Context, java.lang.String) Failed to\nverify: os.json.JSONObject a.b.a.a.a.i.m(android.context.Context,\njava.lang.String): <strong>[0x161]</strong> v0 has type Conflict but expected\nReference: java.lang.AutoCloseable (declaration of 'a.b.a.a.a.i' in\n/data/app/xxxx/xxxxx/base.apk)</li>\n</ul>\n<p>So what does the <strong>[0x161]</strong> refer to? Is it a line number?\n0x161 = 353 in decimal. So I checked the smali code, but the function a.b.a.a.a.i.m has less than 353 lines in smali, so there is no line 353 and I can not locate the error.</p>\n<p>Neither does this function have enough lines in java (I used jadx to decompiled the generated apk).</p>\n<p>So in which type of file can I locate the problem in file's line 353? Should I transformed the apk into some other format to find a line 353 to troubleshoot the error? Thanks in advance.</p>\n"},{"tags":["java","jar"],"answers":[{"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1395911546,"creation_date":1395911546,"answer_id":22682887,"question_id":22682809,"body_markdown":"You can do :\r\n\r\n    jar cfm jar-file manifest-addition input-file(s)\r\n\r\n- The `c` option indicates that you want to create a JAR file.\r\n- The `m` option indicates that you want to merge information from an existing file into the manifest file of the JAR file you&#39;re creating.\r\n- The `f` option indicates that you want the output to go to a file (the JAR file you&#39;re creating) rather than to standard output.\r\n- `manifest-addition` is the name (or path and name) of the existing text file whose contents you want to add to the contents of JAR file&#39;s manifest.\r\n\r\nMore info:\r\n\r\n - [Modifying a Manifest file][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html","title":"How can I change manifest file in Java","body":"<p>You can do :</p>\n\n<pre><code>jar cfm jar-file manifest-addition input-file(s)\n</code></pre>\n\n<ul>\n<li>The <code>c</code> option indicates that you want to create a JAR file.</li>\n<li>The <code>m</code> option indicates that you want to merge information from an existing file into the manifest file of the JAR file you're creating.</li>\n<li>The <code>f</code> option indicates that you want the output to go to a file (the JAR file you're creating) rather than to standard output.</li>\n<li><code>manifest-addition</code> is the name (or path and name) of the existing text file whose contents you want to add to the contents of JAR file's manifest.</li>\n</ul>\n\n<p>More info:</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html\" rel=\"noreferrer\">Modifying a Manifest file</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1079210,"reputation":351,"user_id":1076662,"accept_rate":100,"display_name":"skanga"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649871256,"creation_date":1573147690,"answer_id":58754128,"question_id":22682809,"body_markdown":"1) Extract the manifest: \r\n\r\n    jar xvf MyProject.jar META-INF/MANIFEST.MF \r\n\r\n2) Edit the manifest\r\n\r\n3) Reinsert the edited manifest: \r\n\r\n    jar uvf MyProject.jar META-INF/MANIFEST.MF\r\n\r\nIf you encounter the manifest issue mentioned below by Pabasara, then try this approach\r\n\r\n    unzip -o MyProject.jar META-INF/MANIFEST.MF\r\n    sed -i &quot;s/.*LOOK_FOR.*/REPLACE_WITH/&quot; META-INF/MANIFEST.MF\r\n    zip MyProject.jar META-INF/MANIFEST.MF\r\n\r\n\r\n\r\n","title":"How can I change manifest file in Java","body":"<ol>\n<li><p>Extract the manifest:</p>\n<p>jar xvf MyProject.jar META-INF/MANIFEST.MF</p>\n</li>\n<li><p>Edit the manifest</p>\n</li>\n<li><p>Reinsert the edited manifest:</p>\n<p>jar uvf MyProject.jar META-INF/MANIFEST.MF</p>\n</li>\n</ol>\n<p>If you encounter the manifest issue mentioned below by Pabasara, then try this approach</p>\n<pre><code>unzip -o MyProject.jar META-INF/MANIFEST.MF\nsed -i &quot;s/.*LOOK_FOR.*/REPLACE_WITH/&quot; META-INF/MANIFEST.MF\nzip MyProject.jar META-INF/MANIFEST.MF\n</code></pre>\n"}],"owner":{"account_id":3439559,"reputation":167,"user_id":2881818,"accept_rate":83,"display_name":"T&#253;na indel&#225;ov&#225;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7175,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":22682887,"answer_count":2,"score":2,"last_activity_date":1649871256,"creation_date":1395911356,"question_id":22682809,"body_markdown":"How i can change class-path in mainfest file.\r\n\r\nI have external jar file in folder:\r\n\r\n    Class-Path: folder/AbsoluteLayout.jar\r\n\r\nI want to add my external jar file to my **JAR MyProject.jar** and change mainfast..\r\nWhat should I write in mainfestu to link against the library into my jar..\r\n\r\n    Class-Path: path to my externalJar in MyProject.jar\r\n\r\n![enter image description here][1]\r\n\r\nI hope you understand, thank you :-)\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/165TN.png","title":"How can I change manifest file in Java","body":"<p>How i can change class-path in mainfest file.</p>\n\n<p>I have external jar file in folder:</p>\n\n<pre><code>Class-Path: folder/AbsoluteLayout.jar\n</code></pre>\n\n<p>I want to add my external jar file to my <strong>JAR MyProject.jar</strong> and change mainfast..\nWhat should I write in mainfestu to link against the library into my jar..</p>\n\n<pre><code>Class-Path: path to my externalJar in MyProject.jar\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/165TN.png\" alt=\"enter image description here\"></p>\n\n<p>I hope you understand, thank you :-)</p>\n"},{"tags":["java","spring-boot","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":2836660,"reputation":2415,"user_id":2437141,"display_name":"Maaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1630424521,"creation_date":1630424521,"answer_id":69001665,"question_id":68953662,"body_markdown":"**Answer as a workaround**\r\n\r\nI let the question without any validated answer in case of somebody has a better answer.\r\n\r\nIn case it&#39;s a question which is relevant for somebody, I finally choose to deal the distance return by using geo distance sort.\r\n\r\n\r\n_The query is something like this:_\r\n\r\n```\r\n{\r\n  &quot;from&quot;: 0,\r\n  &quot;size&quot;: 10,\r\n  &quot;query&quot;: {\r\n    &quot;bool&quot;: {\r\n      &quot;should&quot;: [\r\n        {\r\n          &quot;constant_score&quot;: {\r\n            &quot;filter&quot;: {\r\n              &quot;term&quot;: {\r\n                &quot;my_field&quot;: &quot;my_value&quot;\r\n              }\r\n            },\r\n            &quot;boost&quot;: 10\r\n          }\r\n        },\r\n        {\r\n          &quot;constant_score&quot;: {\r\n            &quot;filter&quot;: {\r\n              &quot;term&quot;: {\r\n                &quot;my_field&quot;: &quot;my_value&quot;\r\n              }\r\n            },\r\n            &quot;boost&quot;: 8\r\n          }\r\n        }\r\n      ],\r\n      &quot;filter&quot;: [\r\n        {\r\n          &quot;terms&quot;: {\r\n            &quot;my_array_field&quot;: [\r\n              &quot;first_value&quot;,\r\n              &quot;second_value&quot;\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;geo_distance&quot;: {\r\n            &quot;distance&quot;: &quot;10km&quot;,\r\n            &quot;location&quot;: {\r\n              &quot;lat&quot;: 40,\r\n              &quot;lon&quot;: 2\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n    &quot;sort&quot; : [\r\n        { &quot;_score&quot;: &quot;desc&quot;},{\r\n      &quot;_geo_distance&quot;: {\r\n        &quot;location&quot;: {\r\n                      &quot;lat&quot;: 40,\r\n                      &quot;lon&quot;: 2\r\n        },\r\n        &quot;order&quot;: &quot;asc&quot;,\r\n        &quot;unit&quot;: &quot;km&quot;,\r\n        &quot;mode&quot;: &quot;min&quot;,\r\n        &quot;distance_type&quot;: &quot;arc&quot;,\r\n        &quot;ignore_unmapped&quot;: true\r\n      }\r\n    }\r\n   ]\r\n}\r\n```\r\n\r\nSo I can get my distance in return, but not as a field of _content_, but as a value in _sortvalues_\r\n\r\n_Using spring data elasticsearch:_\r\n\r\n```\r\nBoolQueryBuilder boolQueryBuilder = new BoolQueryBuilder();\r\nScoreSortBuilder scoreSortBuilder = new ScoreSortBuilder();\r\nGeoDistanceSortBuilder geoDistanceSortBuilder = new GeoDistanceSortBuilder(&quot;location&quot;, Double.parseDouble(location.getLatitude()), Double.parseDouble(location.getLongitude()));\r\ngeoDistanceSortBuilder.unit(DistanceUnit.KILOMETERS);\r\ngeoDistanceSortBuilder.ignoreUnmapped(true);\r\ngeoDistanceSortBuilder.sortMode(SortMode.MIN);\r\ngeoDistanceSortBuilder.order(SortOrder.ASC);\r\n\r\nNativeSearchQuery nativeSearchQuery = new NativeSearchQueryBuilder()\r\n                .withQuery(boolQueryBuilder)\r\n                .withPageable(PageRequest.of(page, size))\r\n                .withSort(scoreSortBuilder)\r\n                .withSort(geoDistanceSortBuilder)\r\n                .build();\r\n\r\nelasticsearchOperations.search(nativeSearchQuery, MyIndexedDocument.class);\r\n\r\n```\r\n","title":"How to return distance and all fields using elasticsearch and spring-boot (springframework.data.elasticsearch)","body":"<p><strong>Answer as a workaround</strong></p>\n<p>I let the question without any validated answer in case of somebody has a better answer.</p>\n<p>In case it's a question which is relevant for somebody, I finally choose to deal the distance return by using geo distance sort.</p>\n<p><em>The query is something like this:</em></p>\n<pre><code>{\n  &quot;from&quot;: 0,\n  &quot;size&quot;: 10,\n  &quot;query&quot;: {\n    &quot;bool&quot;: {\n      &quot;should&quot;: [\n        {\n          &quot;constant_score&quot;: {\n            &quot;filter&quot;: {\n              &quot;term&quot;: {\n                &quot;my_field&quot;: &quot;my_value&quot;\n              }\n            },\n            &quot;boost&quot;: 10\n          }\n        },\n        {\n          &quot;constant_score&quot;: {\n            &quot;filter&quot;: {\n              &quot;term&quot;: {\n                &quot;my_field&quot;: &quot;my_value&quot;\n              }\n            },\n            &quot;boost&quot;: 8\n          }\n        }\n      ],\n      &quot;filter&quot;: [\n        {\n          &quot;terms&quot;: {\n            &quot;my_array_field&quot;: [\n              &quot;first_value&quot;,\n              &quot;second_value&quot;\n            ]\n          }\n        },\n        {\n          &quot;geo_distance&quot;: {\n            &quot;distance&quot;: &quot;10km&quot;,\n            &quot;location&quot;: {\n              &quot;lat&quot;: 40,\n              &quot;lon&quot;: 2\n            }\n          }\n        }\n      ]\n    }\n  },\n    &quot;sort&quot; : [\n        { &quot;_score&quot;: &quot;desc&quot;},{\n      &quot;_geo_distance&quot;: {\n        &quot;location&quot;: {\n                      &quot;lat&quot;: 40,\n                      &quot;lon&quot;: 2\n        },\n        &quot;order&quot;: &quot;asc&quot;,\n        &quot;unit&quot;: &quot;km&quot;,\n        &quot;mode&quot;: &quot;min&quot;,\n        &quot;distance_type&quot;: &quot;arc&quot;,\n        &quot;ignore_unmapped&quot;: true\n      }\n    }\n   ]\n}\n</code></pre>\n<p>So I can get my distance in return, but not as a field of <em>content</em>, but as a value in <em>sortvalues</em></p>\n<p><em>Using spring data elasticsearch:</em></p>\n<pre><code>BoolQueryBuilder boolQueryBuilder = new BoolQueryBuilder();\nScoreSortBuilder scoreSortBuilder = new ScoreSortBuilder();\nGeoDistanceSortBuilder geoDistanceSortBuilder = new GeoDistanceSortBuilder(&quot;location&quot;, Double.parseDouble(location.getLatitude()), Double.parseDouble(location.getLongitude()));\ngeoDistanceSortBuilder.unit(DistanceUnit.KILOMETERS);\ngeoDistanceSortBuilder.ignoreUnmapped(true);\ngeoDistanceSortBuilder.sortMode(SortMode.MIN);\ngeoDistanceSortBuilder.order(SortOrder.ASC);\n\nNativeSearchQuery nativeSearchQuery = new NativeSearchQueryBuilder()\n                .withQuery(boolQueryBuilder)\n                .withPageable(PageRequest.of(page, size))\n                .withSort(scoreSortBuilder)\n                .withSort(geoDistanceSortBuilder)\n                .build();\n\nelasticsearchOperations.search(nativeSearchQuery, MyIndexedDocument.class);\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22977300,"reputation":1,"user_id":17104741,"display_name":"jiahao zhang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649871221,"creation_date":1649871221,"answer_id":71861664,"question_id":68953662,"body_markdown":"you can use the annotation @ScriptedField\r\n","title":"How to return distance and all fields using elasticsearch and spring-boot (springframework.data.elasticsearch)","body":"<p>you can use the annotation @ScriptedField</p>\n"}],"owner":{"account_id":2836660,"reputation":2415,"user_id":2437141,"display_name":"Maaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":676,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69001665,"answer_count":2,"score":0,"last_activity_date":1649871221,"creation_date":1630068250,"question_id":68953662,"body_markdown":"I found a way to get my data using elasticsearch query. But my current problem is to translate it in spring boot query.\r\n\r\nMy query is the following:\r\n\r\n```\r\n{\r\n  &quot;from&quot;: 0,\r\n  &quot;size&quot;: 10,\r\n  &quot;query&quot;: {\r\n    &quot;bool&quot;: {\r\n      &quot;should&quot;: [\r\n        {\r\n          &quot;constant_score&quot;: {\r\n            &quot;filter&quot;: {\r\n              &quot;term&quot;: {\r\n                &quot;my_field&quot;: &quot;my_value&quot;\r\n              }\r\n            },\r\n            &quot;boost&quot;: 10\r\n          }\r\n        },\r\n        {\r\n          &quot;constant_score&quot;: {\r\n            &quot;filter&quot;: {\r\n              &quot;term&quot;: {\r\n                &quot;my_field&quot;: &quot;my_value&quot;\r\n              }\r\n            },\r\n            &quot;boost&quot;: 8\r\n          }\r\n        }\r\n      ],\r\n      &quot;filter&quot;: [\r\n        {\r\n          &quot;terms&quot;: {\r\n            &quot;my_array_field&quot;: [\r\n              &quot;first_value&quot;,\r\n              &quot;second_value&quot;\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          &quot;geo_distance&quot;: {\r\n            &quot;distance&quot;: &quot;10km&quot;,\r\n            &quot;location&quot;: {\r\n              &quot;lat&quot;: 40,\r\n              &quot;lon&quot;: 2\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  &quot;script_fields&quot;: {\r\n    &quot;distance&quot;: {\r\n      &quot;script&quot;: &quot;doc[&#39;location&#39;].arcDistance(40, 2) / 1000&quot;\r\n    }\r\n  },\r\n  &quot;_source&quot;: true,\r\n  &quot;sort&quot;: [\r\n    {\r\n      &quot;_score&quot;: &quot;desc&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nAll documents stored in the index have a fields `location`, with a type defined as a `geo_point`\r\n\r\nMy question is:\r\n\r\nHow to translate the `script_fields`, which is returning me the distance, using spring-boot.\r\n\r\nMy current code is:\r\n\r\n```\r\nBoolQueryBuilder boolQueryBuilder = new BoolQueryBuilder();\r\n\r\nNativeSearchQuery nativeSearchQuery = new NativeSearchQueryBuilder()\r\n\t\t\t\t.withQuery(boolQueryBuilder)\r\n\t\t\t\t.withPageable(PageRequest.of(page, size))\r\n\t\t\t\t.build();\r\n\r\nelasticsearchOperations.search(nativeSearchQuery, MyIndexedDocument.class);\r\n```\r\n\r\nI tried to use ScriptField from [here][1] and saw an example [here][2] but didn&#39;t find any solution for now.\r\n\r\n 1. How should I use it?\r\n 2. If think, after finding how to return distance, I will have to precise to my query that I want all the `_source` field in return. Is it possible to precise it using `NativeSearchQuery` ?\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/elasticsearch/docs/current/api/org/springframework/data/elasticsearch/core/query/ScriptField.html\r\n  [2]: https://github.com/spring-projects/spring-data-elasticsearch/blob/ff381c63b6d7633a7a17b3d8a63db36661763afe/src/test/java/org/springframework/data/elasticsearch/core/ElasticsearchTemplateTests.java#L798","title":"How to return distance and all fields using elasticsearch and spring-boot (springframework.data.elasticsearch)","body":"<p>I found a way to get my data using elasticsearch query. But my current problem is to translate it in spring boot query.</p>\n<p>My query is the following:</p>\n<pre><code>{\n  &quot;from&quot;: 0,\n  &quot;size&quot;: 10,\n  &quot;query&quot;: {\n    &quot;bool&quot;: {\n      &quot;should&quot;: [\n        {\n          &quot;constant_score&quot;: {\n            &quot;filter&quot;: {\n              &quot;term&quot;: {\n                &quot;my_field&quot;: &quot;my_value&quot;\n              }\n            },\n            &quot;boost&quot;: 10\n          }\n        },\n        {\n          &quot;constant_score&quot;: {\n            &quot;filter&quot;: {\n              &quot;term&quot;: {\n                &quot;my_field&quot;: &quot;my_value&quot;\n              }\n            },\n            &quot;boost&quot;: 8\n          }\n        }\n      ],\n      &quot;filter&quot;: [\n        {\n          &quot;terms&quot;: {\n            &quot;my_array_field&quot;: [\n              &quot;first_value&quot;,\n              &quot;second_value&quot;\n            ]\n          }\n        },\n        {\n          &quot;geo_distance&quot;: {\n            &quot;distance&quot;: &quot;10km&quot;,\n            &quot;location&quot;: {\n              &quot;lat&quot;: 40,\n              &quot;lon&quot;: 2\n            }\n          }\n        }\n      ]\n    }\n  },\n  &quot;script_fields&quot;: {\n    &quot;distance&quot;: {\n      &quot;script&quot;: &quot;doc['location'].arcDistance(40, 2) / 1000&quot;\n    }\n  },\n  &quot;_source&quot;: true,\n  &quot;sort&quot;: [\n    {\n      &quot;_score&quot;: &quot;desc&quot;\n    }\n  ]\n}\n</code></pre>\n<p>All documents stored in the index have a fields <code>location</code>, with a type defined as a <code>geo_point</code></p>\n<p>My question is:</p>\n<p>How to translate the <code>script_fields</code>, which is returning me the distance, using spring-boot.</p>\n<p>My current code is:</p>\n<pre><code>BoolQueryBuilder boolQueryBuilder = new BoolQueryBuilder();\n\nNativeSearchQuery nativeSearchQuery = new NativeSearchQueryBuilder()\n                .withQuery(boolQueryBuilder)\n                .withPageable(PageRequest.of(page, size))\n                .build();\n\nelasticsearchOperations.search(nativeSearchQuery, MyIndexedDocument.class);\n</code></pre>\n<p>I tried to use ScriptField from <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/api/org/springframework/data/elasticsearch/core/query/ScriptField.html\" rel=\"nofollow noreferrer\">here</a> and saw an example <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/blob/ff381c63b6d7633a7a17b3d8a63db36661763afe/src/test/java/org/springframework/data/elasticsearch/core/ElasticsearchTemplateTests.java#L798\" rel=\"nofollow noreferrer\">here</a> but didn't find any solution for now.</p>\n<ol>\n<li>How should I use it?</li>\n<li>If think, after finding how to return distance, I will have to precise to my query that I want all the <code>_source</code> field in return. Is it possible to precise it using <code>NativeSearchQuery</code> ?</li>\n</ol>\n"},{"tags":["java","spring","debugging","intellij-idea"],"comments":[{"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"score":0,"creation_date":1649781976,"post_id":71846258,"comment_id":126961305,"body_markdown":"Try to &quot;Reload All Maven Projects&quot;","body":"Try to &quot;Reload All Maven Projects&quot;"},{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1649782330,"post_id":71846258,"comment_id":126961460,"body_markdown":"You need a fat jar for your app, refer to https://www.baeldung.com/deployable-fat-jar-spring-boot.","body":"You need a fat jar for your app, refer to <a href=\"https://www.baeldung.com/deployable-fat-jar-spring-boot\" rel=\"nofollow noreferrer\">baeldung.com/deployable-fat-jar-spring-boot</a>."}],"owner":{"account_id":9044958,"reputation":757,"user_id":6737670,"display_name":"Darius.V"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649871139,"creation_date":1649781237,"question_id":71846258,"body_markdown":"Trying to set up debugger for spring aplication. Based on the comment from this https://stackoverflow.com/questions/71832324/what-creates-target-directory-in-spring-boot-application\r\nI might need artifacts.\r\nI do not know hot to set up the artifacts for spring boot application, so trying to set up by cmd application article https://www.jetbrains.com/help/idea/debug-a-java-application-using-a-dockerfile.html\r\n\r\nI did not set Main class, because I have no idea what is main class in my project. I tried searching function main() but did not find it. So I had set up:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\nRunning Build &gt; Build Artifacts and choosing my jar artifact, I get \r\n\r\n/home/agmis/projects/openelis/src/main/java/org/openelisglobal/dataexchange/fhir/FhirUtil.java:4:46\r\njava: package org.itech.fhir.dataexport.core.service does not exist\r\n\r\nI think there is high chance that this part of code works, because I have been debuging related code, seen that function. So I am just probably getting this error when building artifacts. And the function is modified on April 5 this year, so this also adds the confidence that this part of code works.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI see interface is in red, and import is grey so because IDE also does not see it.\r\n\r\nSo how to fix that?\r\n\r\nAlso if you can give a link to a good tutorial on how to setup debugger with docker which would solve me this problem and maybe I would not even get this error, this could make the problem solved also.\r\n\r\n  [1]: https://i.stack.imgur.com/PdOFZ.png\r\n  [2]: https://i.stack.imgur.com/VdiAA.png\r\n\r\n**Update**\r\n\r\nBased on Renato &quot;Reload All Maven Projects&quot; - did not help, same problem still.","title":"Intellij java building artifacts for debugger java: package does not exist","body":"<p>Trying to set up debugger for spring aplication. Based on the comment from this <a href=\"https://stackoverflow.com/questions/71832324/what-creates-target-directory-in-spring-boot-application\">What creates target directory in spring boot application?</a>\nI might need artifacts.\nI do not know hot to set up the artifacts for spring boot application, so trying to set up by cmd application article <a href=\"https://www.jetbrains.com/help/idea/debug-a-java-application-using-a-dockerfile.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/debug-a-java-application-using-a-dockerfile.html</a></p>\n<p>I did not set Main class, because I have no idea what is main class in my project. I tried searching function main() but did not find it. So I had set up:\n<a href=\"https://i.stack.imgur.com/PdOFZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PdOFZ.png\" alt=\"enter image description here\" /></a></p>\n<p>Running Build &gt; Build Artifacts and choosing my jar artifact, I get</p>\n<p>/home/agmis/projects/openelis/src/main/java/org/openelisglobal/dataexchange/fhir/FhirUtil.java:4:46\njava: package org.itech.fhir.dataexport.core.service does not exist</p>\n<p>I think there is high chance that this part of code works, because I have been debuging related code, seen that function. So I am just probably getting this error when building artifacts. And the function is modified on April 5 this year, so this also adds the confidence that this part of code works.</p>\n<p><a href=\"https://i.stack.imgur.com/VdiAA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VdiAA.png\" alt=\"enter image description here\" /></a></p>\n<p>I see interface is in red, and import is grey so because IDE also does not see it.</p>\n<p>So how to fix that?</p>\n<p>Also if you can give a link to a good tutorial on how to setup debugger with docker which would solve me this problem and maybe I would not even get this error, this could make the problem solved also.</p>\n<p><strong>Update</strong></p>\n<p>Based on Renato &quot;Reload All Maven Projects&quot; - did not help, same problem still.</p>\n"},{"tags":["java","algorithm","recursion","maze"],"comments":[{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1649827936,"post_id":71851072,"comment_id":126971266,"body_markdown":"What is the question? Which version of the code is the one you might have a question about (note there should be just one question). What is the result of debugging?","body":"What is the question? Which version of the code is the one you might have a question about (note there should be just one question). What is the result of debugging?"}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649870787,"creation_date":1649831046,"answer_id":71852777,"question_id":71851072,"body_markdown":"There are several issues, including:\r\n\r\n* A dead end should not trigger a new recursive call. Dead end marking should happen while *backtracking* from recursion, and should indicate to the *caller* that there was no success.\r\n\r\n* Each of the `if` statements that check a certain direction (north, ...etc), will execute a `return` in its block, meaning that if there is such a direction none of the other directions will be tried.\r\n\r\n* As the recursive call does not return whether there was success or not, the caller has no way to know whether it should try in another direction\r\n\r\nNot the problem, but:\r\n\r\n* There is also quite some code repetition, which you should avoid.\r\n* There is no good reason to make the display function recursive. Just iterate over the cells with two `for` loops\r\n* Avoid `row` and `col` variables in your main program: these should have no business there.\r\n* As you mutate the maze, there should be no need to also *return* that maze. The caller will any how have access to the populated maze after the call.\r\n* The code will be easier when you separate the search for the *starting point* (`#`) from the rest of the algorithm.\r\n\r\nOne of the keys to a successful function is that returns a boolean, indicating whether the path was found or not. This way the algorithm can decide whether or not it should try again in another direction.\r\n\r\nHere is the modification of your code:\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        char[][] mazeArr = { \r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 0\r\n                { &#39;*&#39;, &#39;#&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 1\r\n                { &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 2\r\n                { &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 3\r\n                { &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 4\r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 5\r\n                { &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 6\r\n                { &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 7\r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 8\r\n                { &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;$&#39;, &#39;*&#39; }, // 9\r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; } };// 10\r\n\r\n        System.out.println(&quot;Input maze:&quot;);\r\n        displayMaze(mazeArr);\r\n        \r\n        System.out.println(&quot;\\nMaze solution:&quot;);\r\n        boolean isSolved = algorithm(mazeArr);\r\n        if (isSolved) {\r\n            displayMaze(mazeArr);\r\n        } else {\r\n            System.out.println(&quot;No Solution&quot;);\r\n        }\r\n    }\r\n\r\n    public static void displayMaze(char[][] mazeArr) {\r\n        for (char[] row : mazeArr) {\r\n            for (char cell : row) {\r\n                System.out.print(cell + &quot; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n    public static boolean algorithm(char[][] mazeArr) {\r\n        // Look for starting point\r\n        for (int row = 0; row &lt; mazeArr.length; row++) {\r\n            for (int col = 0; col &lt; mazeArr[0].length; col++) {\r\n                if (mazeArr[row][col] == &#39;#&#39;) {\r\n                    return algorithm(mazeArr, row, col);\r\n                }\r\n            }\r\n        }\r\n        return false; // No starting point found\r\n    }\r\n\r\n    public static boolean algorithm(char[][] mazeArr, int row, int col) {\r\n        if (mazeArr[row][col] == &#39;$&#39;) { // Found the target\r\n            return true;\r\n        }\r\n        if (mazeArr[row][col] == &#39; &#39;) {\r\n            mazeArr[row][col] = &#39;@&#39;; // Mark as visited\r\n        } else if (mazeArr[row][col] != &#39;#&#39;) { // Not allowed\r\n            return false;\r\n        }\r\n        // The core of the algorithm: try each direction until true is returned\r\n        if (algorithm(mazeArr, row, col - 1) // west\r\n                || algorithm(mazeArr, row - 1, col) // north\r\n                || algorithm(mazeArr, row, col + 1) // east\r\n                || algorithm(mazeArr, row + 1, col) // south\r\n        ) {\r\n            return true; // Path found\r\n        }\r\n        if (mazeArr[row][col] == &#39;@&#39;) { // mark backtracking\r\n            mazeArr[row][col] = &#39;~&#39;;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\n## Without loops\r\n\r\nFrom comments I understood you don&#39;t want to use loops. In that case, use recursion for finding the starting cell in a separate, recursive function, and return the found spot as a single integer (`row*width + col`).\r\n\r\nHere is the corresponding code:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        char[][] mazeArr = { \r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 0\r\n                { &#39;*&#39;, &#39;#&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 1\r\n                { &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 2\r\n                { &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 3\r\n                { &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 4\r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 5\r\n                { &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 6\r\n                { &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 7\r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 8\r\n                { &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;$&#39;, &#39;*&#39; }, // 9\r\n                { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; } };// 10\r\n\r\n        System.out.println(&quot;Input maze:&quot;);\r\n        displayMaze(mazeArr);\r\n        \r\n        System.out.println(&quot;\\nMaze solution:&quot;);\r\n        boolean isSolved = algorithm(mazeArr);\r\n        if (isSolved) {\r\n            displayMaze(mazeArr);\r\n        } else {\r\n            System.out.println(&quot;No Solution&quot;);\r\n        }\r\n    }\r\n\r\n    public static void displayMaze(char[][] mazeArr) {\r\n        displayMaze(mazeArr, 0, 0); // add the arguments\r\n    }\r\n    \r\n    public static void displayMaze(char[][] mazeArr, int row, int col) {\r\n        if (row &gt;= mazeArr.length) {\r\n            return; // all done\r\n        }\r\n        if (col &gt;= mazeArr[0].length) {\r\n            System.out.println();\r\n            displayMaze(mazeArr, row + 1, 0);\r\n        } else {\r\n            System.out.print(mazeArr[row][col] + &quot; &quot;);\r\n            displayMaze(mazeArr, row, col + 1);\r\n        }\r\n    }\r\n\r\n    public static int findStart(char[][] mazeArr, int i) {\r\n        // Look for starting point. i is combination of row/col\r\n        int row = i / mazeArr.length;\r\n        if (row &gt;= mazeArr.length) {\r\n            return -1; // all done, and not found\r\n        }\r\n        int col = i % mazeArr[0].length;\r\n        if (mazeArr[row][col] == &#39;#&#39;) {\r\n            return i; // found it\r\n        }\r\n        return findStart(mazeArr, i + 1);\r\n    }\r\n\r\n    public static boolean algorithm(char[][] mazeArr) {\r\n        int i = findStart(mazeArr, 0);\r\n        if (i == -1) {\r\n            return false; // No starting point found\r\n        }\r\n        int row = i / mazeArr.length;\r\n        int col = i % mazeArr[0].length;\r\n        return algorithm(mazeArr, row, col);\r\n    }\r\n\r\n    public static boolean algorithm(char[][] mazeArr, int row, int col) {\r\n        if (mazeArr[row][col] == &#39;$&#39;) { // Found the target\r\n            return true;\r\n        }\r\n        if (mazeArr[row][col] == &#39; &#39;) {\r\n            mazeArr[row][col] = &#39;@&#39;; // Mark as visited\r\n        } else if (mazeArr[row][col] != &#39;#&#39;) { // Not allowed\r\n            return false;\r\n        }\r\n        // The core of the algorithm: try each direction until true is returned\r\n        if (algorithm(mazeArr, row, col - 1) // west\r\n                || algorithm(mazeArr, row - 1, col) // north\r\n                || algorithm(mazeArr, row, col + 1) // east\r\n                || algorithm(mazeArr, row + 1, col) // south\r\n        ) {\r\n            return true; // Path found\r\n        }\r\n        if (mazeArr[row][col] == &#39;@&#39;) { // mark backtracking\r\n            mazeArr[row][col] = &#39;~&#39;;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n","title":"Maze 2D Recursive Algorithm Dead End Issue","body":"<p>There are several issues, including:</p>\n<ul>\n<li><p>A dead end should not trigger a new recursive call. Dead end marking should happen while <em>backtracking</em> from recursion, and should indicate to the <em>caller</em> that there was no success.</p>\n</li>\n<li><p>Each of the <code>if</code> statements that check a certain direction (north, ...etc), will execute a <code>return</code> in its block, meaning that if there is such a direction none of the other directions will be tried.</p>\n</li>\n<li><p>As the recursive call does not return whether there was success or not, the caller has no way to know whether it should try in another direction</p>\n</li>\n</ul>\n<p>Not the problem, but:</p>\n<ul>\n<li>There is also quite some code repetition, which you should avoid.</li>\n<li>There is no good reason to make the display function recursive. Just iterate over the cells with two <code>for</code> loops</li>\n<li>Avoid <code>row</code> and <code>col</code> variables in your main program: these should have no business there.</li>\n<li>As you mutate the maze, there should be no need to also <em>return</em> that maze. The caller will any how have access to the populated maze after the call.</li>\n<li>The code will be easier when you separate the search for the <em>starting point</em> (<code>#</code>) from the rest of the algorithm.</li>\n</ul>\n<p>One of the keys to a successful function is that returns a boolean, indicating whether the path was found or not. This way the algorithm can decide whether or not it should try again in another direction.</p>\n<p>Here is the modification of your code:</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        char[][] mazeArr = { \n                { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' }, // 0\n                { '*', '#', '*', '*', '*', '*', '*', '*', '*', '*' }, // 1\n                { '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', '*', '*' }, // 2\n                { '*', ' ', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 3\n                { '*', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 4\n                { '*', '*', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 5\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 6\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', ' ', '*' }, // 7\n                { '*', '*', '*', '*', '*', '*', '*', ' ', ' ', '*' }, // 8\n                { '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '$', '*' }, // 9\n                { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' } };// 10\n\n        System.out.println(&quot;Input maze:&quot;);\n        displayMaze(mazeArr);\n        \n        System.out.println(&quot;\\nMaze solution:&quot;);\n        boolean isSolved = algorithm(mazeArr);\n        if (isSolved) {\n            displayMaze(mazeArr);\n        } else {\n            System.out.println(&quot;No Solution&quot;);\n        }\n    }\n\n    public static void displayMaze(char[][] mazeArr) {\n        for (char[] row : mazeArr) {\n            for (char cell : row) {\n                System.out.print(cell + &quot; &quot;);\n            }\n            System.out.println();\n        }\n    }\n\n    public static boolean algorithm(char[][] mazeArr) {\n        // Look for starting point\n        for (int row = 0; row &lt; mazeArr.length; row++) {\n            for (int col = 0; col &lt; mazeArr[0].length; col++) {\n                if (mazeArr[row][col] == '#') {\n                    return algorithm(mazeArr, row, col);\n                }\n            }\n        }\n        return false; // No starting point found\n    }\n\n    public static boolean algorithm(char[][] mazeArr, int row, int col) {\n        if (mazeArr[row][col] == '$') { // Found the target\n            return true;\n        }\n        if (mazeArr[row][col] == ' ') {\n            mazeArr[row][col] = '@'; // Mark as visited\n        } else if (mazeArr[row][col] != '#') { // Not allowed\n            return false;\n        }\n        // The core of the algorithm: try each direction until true is returned\n        if (algorithm(mazeArr, row, col - 1) // west\n                || algorithm(mazeArr, row - 1, col) // north\n                || algorithm(mazeArr, row, col + 1) // east\n                || algorithm(mazeArr, row + 1, col) // south\n        ) {\n            return true; // Path found\n        }\n        if (mazeArr[row][col] == '@') { // mark backtracking\n            mazeArr[row][col] = '~';\n        }\n        return false;\n    }\n}\n</code></pre>\n<h2>Without loops</h2>\n<p>From comments I understood you don't want to use loops. In that case, use recursion for finding the starting cell in a separate, recursive function, and return the found spot as a single integer (<code>row*width + col</code>).</p>\n<p>Here is the corresponding code:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        char[][] mazeArr = { \n                { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' }, // 0\n                { '*', '#', '*', '*', '*', '*', '*', '*', '*', '*' }, // 1\n                { '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', '*', '*' }, // 2\n                { '*', ' ', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 3\n                { '*', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 4\n                { '*', '*', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 5\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 6\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', ' ', '*' }, // 7\n                { '*', '*', '*', '*', '*', '*', '*', ' ', ' ', '*' }, // 8\n                { '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '$', '*' }, // 9\n                { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' } };// 10\n\n        System.out.println(&quot;Input maze:&quot;);\n        displayMaze(mazeArr);\n        \n        System.out.println(&quot;\\nMaze solution:&quot;);\n        boolean isSolved = algorithm(mazeArr);\n        if (isSolved) {\n            displayMaze(mazeArr);\n        } else {\n            System.out.println(&quot;No Solution&quot;);\n        }\n    }\n\n    public static void displayMaze(char[][] mazeArr) {\n        displayMaze(mazeArr, 0, 0); // add the arguments\n    }\n    \n    public static void displayMaze(char[][] mazeArr, int row, int col) {\n        if (row &gt;= mazeArr.length) {\n            return; // all done\n        }\n        if (col &gt;= mazeArr[0].length) {\n            System.out.println();\n            displayMaze(mazeArr, row + 1, 0);\n        } else {\n            System.out.print(mazeArr[row][col] + &quot; &quot;);\n            displayMaze(mazeArr, row, col + 1);\n        }\n    }\n\n    public static int findStart(char[][] mazeArr, int i) {\n        // Look for starting point. i is combination of row/col\n        int row = i / mazeArr.length;\n        if (row &gt;= mazeArr.length) {\n            return -1; // all done, and not found\n        }\n        int col = i % mazeArr[0].length;\n        if (mazeArr[row][col] == '#') {\n            return i; // found it\n        }\n        return findStart(mazeArr, i + 1);\n    }\n\n    public static boolean algorithm(char[][] mazeArr) {\n        int i = findStart(mazeArr, 0);\n        if (i == -1) {\n            return false; // No starting point found\n        }\n        int row = i / mazeArr.length;\n        int col = i % mazeArr[0].length;\n        return algorithm(mazeArr, row, col);\n    }\n\n    public static boolean algorithm(char[][] mazeArr, int row, int col) {\n        if (mazeArr[row][col] == '$') { // Found the target\n            return true;\n        }\n        if (mazeArr[row][col] == ' ') {\n            mazeArr[row][col] = '@'; // Mark as visited\n        } else if (mazeArr[row][col] != '#') { // Not allowed\n            return false;\n        }\n        // The core of the algorithm: try each direction until true is returned\n        if (algorithm(mazeArr, row, col - 1) // west\n                || algorithm(mazeArr, row - 1, col) // north\n                || algorithm(mazeArr, row, col + 1) // east\n                || algorithm(mazeArr, row + 1, col) // south\n        ) {\n            return true; // Path found\n        }\n        if (mazeArr[row][col] == '@') { // mark backtracking\n            mazeArr[row][col] = '~';\n        }\n        return false;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24517079,"reputation":45,"user_id":18430684,"display_name":"anon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":376,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71852777,"answer_count":1,"score":2,"last_activity_date":1649870787,"creation_date":1649816210,"question_id":71851072,"body_markdown":"I&#39;ve been trying to make a program that could solve a maze recursively (should work for any maze). Majority of the recursion for the algorithm works but when the maze checks for dead ends and a way to reroute to find the solution (end point), the code doesn&#39;t work for it. I&#39;ve tried multiple ways to debug but it hasn&#39;t gotten me far; I either get StackOverflowError or the algorithm works to backtrack by one position.\r\n\r\n*Note &quot;char indicators&quot; for the 2D array:*\r\n- &#39;*&#39; = walls\r\n- &#39;#&#39; = start\r\n- &#39;$&#39; = end\r\n- &#39; &#39; = possible path/not a wall\r\n- &#39;@&#39; = path\r\n- &#39;~&#39; = dead end\r\n\r\n\r\nDesired output:\r\n```\r\nPresolved maze:\r\n* * * * * * * * * * \r\n* # * * * * * * * * \r\n*   *           * * \r\n*   *       *   * * \r\n*       *   *   * * \r\n* * *       *   * * \r\n* *     *   *   * * \r\n* *     *   *     * \r\n* * * * * * *     * \r\n*               $ * \r\n* * * * * * * * * * \r\n\r\nMaze solution:\r\n\r\n* * * * * * * * * * \r\n* # * * * * * * * * \r\n* @ * @ @ @ @ @ * * \r\n* @ * @ ~ ~ * @ * * \r\n* @ @ @ * ~ * @ * * \r\n* * * ~ ~ ~ * @ * * \r\n* * ~ ~ * ~ * @ * * \r\n* * ~ ~ * ~ * @ @ * \r\n* * * * * * * ~ @ * \r\n* ~ ~ ~ ~ ~ ~ ~ $ * \r\n* * * * * * * * * *\r\n```\r\n\r\n**Here is the code for the one that backtracks by only one position:**\r\n\r\nIn this version I tried recursively calling after finding a position that could be backtracked and returning that position to retrace and find the solution\r\n```\r\nimport java.util.*;\r\npublic class mazeOG {\r\n\tpublic static void main(String[] args) {\r\n\t\tallocateMaze();\r\n\t}\r\n\t\r\n\tpublic static void allocateMaze() {\r\n\t\tchar[][] mazeArr = {{&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;},//0\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39;#&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;},//1\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;,&#39;*&#39;},//2\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39;*&#39;},//3\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39;*&#39;},//4\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39;*&#39;},//5\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39;*&#39;},//6\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;},//7\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39;*&#39;},//8\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39; &#39;,&#39;$&#39;,&#39;*&#39;},//9\r\n\t\t\t\t\t\t\t{&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;}};//10\r\n\t\t\r\n\t\t//setting row and col to 0 for display method\r\n\t\tint row = 0;\r\n\t\tint col = 0;\r\n\t\tSystem.out.println(&quot;Presolved maze:&quot;);\r\n\t\tdisplayMaze(mazeArr, row, col); //displays presolved maze\r\n\t\trow = 1;\r\n\t\tcol = 1;\r\n\t\tboolean isSolved = false;\r\n\t\tSystem.out.println(&quot;\\nMaze solution:&quot;);\r\n\t\talgorithm(mazeArr, row, col, isSolved); //create variable for solved maze, sends maze allocation to method that solves the maze\r\n\t\tSystem.out.println();\r\n\t\trow = 0;\r\n\t\tcol = 0;\r\n\t\tdisplayMaze(mazeArr, row, col); //displays traced + solved maze\r\n\t}\r\n\r\n\tpublic static void displayMaze(char[][] mazeArr, int row, int col) {\r\n\t\tif (row &lt; mazeArr.length) { //iterate through all (11) rows\r\n\t\t\tif (col &lt; mazeArr[row].length) { //iterate through all (11) columns\r\n\t\t\t\tSystem.out.print(mazeArr[row][col] + &quot; &quot;); //displays the current index in the array\r\n\t\t\t\tdisplayMaze(mazeArr, row, col+1); //repeats this method by iterating through the columns first\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tSystem.out.println(); //enters the line after each row for display purposes\r\n\t\t\tdisplayMaze(mazeArr, row+1, col=0); //repeats this method by iterating through the rows\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static char[][] algorithm(char[][] mazeArr, int row, int col, boolean isSolved){\r\n\t\tboolean isPath = false; // assume there is no path\r\n\r\n\t\tif (mazeArr[row][col] == &#39;$&#39; &amp;&amp; isSolved == true) { // IF MAZE IS COMPLETELY SOLVED\r\n\t\t\treturn mazeArr;\r\n\r\n\t\t} else { // IF MAZE IS NOT COMPLETELY SOLVED\r\n\t\t\t\r\n\t\t\t// start searching thru the maze, assume there is no path\r\n\t\t\t\t// THERE IS NO DEAD END\r\n\t\t\t\t\r\n\t\t\t\tif (mazeArr[row - 1][col] == &#39; &#39;) { // if north has a path\r\n\t\t\t\t\tmazeArr[row - 1][col] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn algorithm(mazeArr, --row, col, isSolved); // repeat process going to next north spot\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (mazeArr[row][col + 1] == &#39; &#39;) { // if east has a path\r\n\t\t\t\t\tmazeArr[row][col + 1] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\r\n\t\t\t\t\treturn algorithm(mazeArr, row, ++col, isSolved); // repeat process going to next east spot\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (mazeArr[row + 1][col] == &#39; &#39;) { // if south has a path\r\n\t\t\t\t\tmazeArr[row + 1][col] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn algorithm(mazeArr, ++row, col, isSolved); // repeat process going to next south spot\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (mazeArr[row][col - 1] == &#39; &#39;) { // if west has a path\r\n\t\t\t\t\tmazeArr[row][col - 1] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn algorithm(mazeArr, row, --col, isSolved); // repeat process going to next west spot\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (mazeArr[row][col] == &#39;$&#39;) { // if you have reached the end of the maze\r\n\t\t\t\t\tisSolved = true; // maze has been solved\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn algorithm(mazeArr, row, col, isSolved); // algorithm will recognize\r\n\t\t\t\t}\r\n\r\n\t\t\t// finds alternate path if there&#39;s a dead end\r\n\t\t\t\tif (mazeArr[row][col] != &#39;#&#39;) {\r\n\t\t\t\tmazeArr[row][col] = &#39;~&#39;; //indicates that this index is a dead end\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (isPath == false) {\r\n\t\t\t\t\tif (mazeArr[row - 1][col] == &#39;@&#39; &amp;&amp; mazeArr[row - 1][col] != &#39;#&#39;) {// if north was a path\r\n\t\t\t\t\t\tisPath = true; \r\n\t\t\t\t\t\tisSolved = false; \r\n\t\t\t\t\t\treturn algorithm(mazeArr, --row, col, isSolved);//returns to initial position before hitting dead end\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (isPath == false) {\r\n\t\t\t\t\tif (mazeArr[row - 1][col] == &#39;@&#39; &amp;&amp; mazeArr[row][col+1] != &#39;#&#39;) {// if east was a path\r\n\t\t\t\t\t\tisPath = true; \r\n\t\t\t\t\t\tisSolved = false; \r\n\t\t\t\t\t\treturn algorithm(mazeArr, row, ++col, isSolved);//returns to initial position before hitting dead end\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (isPath == false) {\r\n\t\t\t\t\tif (mazeArr[row + 1][col] == &#39;@&#39; &amp;&amp; mazeArr[row - 1][col] != &#39;#&#39;) {// if south was a path\r\n\t\t\t\t\t\tisPath = true; \r\n\t\t\t\t\t\tisSolved = false; \r\n\t\t\t\t\t\treturn algorithm(mazeArr, ++row, col, isSolved);//returns to initial position before hitting dead end\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (isPath == false) {\r\n\t\t\t\t\tif (mazeArr[row][col-1] == &#39;@&#39; &amp;&amp; mazeArr[row - 1][col] != &#39;#&#39;) {// if west was a path\r\n\t\t\t\t\t\tisPath = true; \r\n\t\t\t\t\t\tisSolved = false; \r\n\t\t\t\t\t\treturn algorithm(mazeArr, row, --col, isSolved);//returns to initial position before hitting dead end\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (isPath == false) { // if there&#39;s no way out, that means there is no solution\r\n\t\t\t\t\tSystem.out.println(&quot;No Solution&quot;);\t\t\t\t\r\n\t\t\t\t\treturn mazeArr;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\treturn mazeArr;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n**Output for this version:**\r\n```\r\nPresolved maze:\r\n* * * * * * * * * * \r\n* # * * * * * * * * \r\n*   *           * * \r\n*   *       *   * * \r\n*       *   *   * * \r\n* * *       *   * * \r\n* *     *   *   * * \r\n* *     *   *     * \r\n* * * * * * *     * \r\n*               $ * \r\n* * * * * * * * * * \r\n\r\nMaze solution:\r\nNo Solution\r\n\r\n* * * * * * * * * * \r\n* # * * * * * * * * \r\n* @ * @ @ @ @ @ * * \r\n* @ * @     * @ * * \r\n* @ @ @ *   * @ * * \r\n* * *       * @ * * \r\n* *     *   * @ * * \r\n* *     *   * @ @ * \r\n* * * * * * * @ @ * \r\n* ~ @ @ @ @ @ @ $ * \r\n* * * * * * * * * * \r\n```\r\n**Here is the code for the version that gets StackOverflowError:**\r\n\r\nIn this version, I removed the section of the code that traces back by a position and recursively calls, instead, I just indicate that that position is a dead end and recursively  calls the algorithm to search for the next position instead. \r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class maze {\r\n\tpublic static void main(String[] args) {\r\n\t\tallocateMaze();\r\n\t}\r\n\r\n\tpublic static void allocateMaze() {\r\n\t\tchar[][] mazeArr = { { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 0\r\n\t\t\t\t{ &#39;*&#39;, &#39;#&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 1\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 2\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 3\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 4\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 5\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 6\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 7\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 8\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;$&#39;, &#39;*&#39; }, // 9\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; } };// 10\r\n\r\n\t\t// setting row and col to 0 for display method\r\n\t\tint row = 0;\r\n\t\tint col = 0;\r\n\t\tSystem.out.println(&quot;Presolved maze:&quot;);\r\n\t\tdisplayMaze(mazeArr, row, col); // displays presolved maze\r\n\t\trow = 1;\r\n\t\tcol = 1;\r\n\t\tboolean isSolved = false;\r\n\t\tSystem.out.println(&quot;\\nMaze solution:&quot;);\r\n\t\talgorithm(mazeArr, row, col, isSolved); // create variable for solved maze, sends maze allocation to method that\r\n\t\t\t\t\t\t\t\t\t\t\t\t// solves the maze\r\n\t\tSystem.out.println();\r\n\t\trow = 0;\r\n\t\tcol = 0;\r\n\t\tdisplayMaze(mazeArr, row, col); // displays traced + solved maze\r\n\t}\r\n\r\n\tpublic static void displayMaze(char[][] mazeArr, int row, int col) {\r\n\t\tif (row &lt; mazeArr.length) { // iterate through all (11) rows\r\n\t\t\tif (col &lt; mazeArr[row].length) { // iterate through all (11) columns\r\n\t\t\t\tSystem.out.print(mazeArr[row][col] + &quot; &quot;); // displays the current index in the array\r\n\t\t\t\tdisplayMaze(mazeArr, row, col + 1); // repeats this method by iterating through the columns first\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tSystem.out.println(); // enters the line after each row for display purposes\r\n\t\t\tdisplayMaze(mazeArr, row + 1, col = 0); // repeats this method by iterating through the rows\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static char[][] algorithm(char[][] mazeArr, int row, int col, boolean isSolved) {\r\n\t\tboolean isPath = false; // assume there is no path\r\n\r\n\t\tif (mazeArr[row][col] == &#39;$&#39; &amp;&amp; isSolved == true) { // IF MAZE IS COMPLETELY SOLVED\r\n\t\t\treturn mazeArr;\r\n\r\n\t\t} else { // IF MAZE IS NOT COMPLETELY SOLVED\r\n\r\n\t\t\t// start searching thru the maze,\r\n\t\t\t// assume there is no path\r\n\t\t\t// THERE IS NO DEAD END\r\n\r\n\t\t\tif (mazeArr[row - 1][col] == &#39; &#39;) { // if north has a path\r\n\t\t\t\tmazeArr[row - 1][col] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\r\n\t\t\t\treturn algorithm(mazeArr, --row, col, isSolved); // repeat process going to next north spot\r\n\t\t\t}\r\n\r\n\t\t\tif (mazeArr[row][col + 1] == &#39; &#39;) { // if east has a path\r\n\t\t\t\tmazeArr[row][col + 1] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\r\n\t\t\t\treturn algorithm(mazeArr, row, ++col, isSolved); // repeat process going to next east spot\r\n\t\t\t}\r\n\r\n\t\t\tif (mazeArr[row + 1][col] == &#39; &#39;) { // if south has a path\r\n\t\t\t\tmazeArr[row + 1][col] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\r\n\t\t\t\treturn algorithm(mazeArr, ++row, col, isSolved); // repeat process going to next south spot\r\n\t\t\t}\r\n\r\n\t\t\tif (mazeArr[row][col - 1] == &#39; &#39;) { // if west has a path\r\n\t\t\t\tmazeArr[row][col - 1] = &#39;@&#39;; // block off path to not go back here again\r\n\t\t\t\tisPath = true; // there is a path\r\n\t\t\t\tisSolved = false; // assume maze is still not solved\r\n\r\n\t\t\t\treturn algorithm(mazeArr, row, --col, isSolved); // repeat process going to next west spot\r\n\t\t\t}\r\n\r\n\t\t\tif (mazeArr[row][col] == &#39;$&#39;) { // if you have reached the end of the maze\r\n\t\t\t\tisSolved = true; // maze has been solved\r\n\r\n\t\t\t\treturn algorithm(mazeArr, row, col, isSolved); // algorithm will recognize\r\n\t\t\t}\r\n\r\n\t\t\t//code from here and below is for the case of a dead end\r\n\t\t\tif (mazeArr[row][col] != &#39;#&#39; &amp;&amp; isPath == false) {\r\n\t\t\t\tmazeArr[row][col] = &#39;~&#39;; // indicates that this index is a dead end\r\n\t\t\t\tisPath = true;\r\n\t\t\t\tisSolved = false;\r\n\t\t\t\treturn algorithm(mazeArr, row, col, isSolved);\r\n\t\t\t}\r\n\r\n\t\t\tif (isPath == false) { // if there&#39;s no way out, that means there is no solution\r\n\t\t\t\tSystem.out.println(&quot;No Solution&quot;);\r\n\t\t\t\treturn mazeArr;\r\n\t\t\t}\r\n\r\n\t\t\treturn mazeArr;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nAny help would be really great! Thank you :)\r\n\r\nEdit:\r\n**Modified Code**\r\n```\r\npublic static void main(String[] args) {\r\n\t\tint row = 0, col = 0;\r\n\t\tchar[][] mazeArr = { { &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 0\r\n\t\t\t\t{ &#39;*&#39;, &#39;#&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; }, // 1\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 2\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 3\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 4\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 5\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39;*&#39; }, // 6\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 7\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39;*&#39; }, // 8\r\n\t\t\t\t{ &#39;*&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39;$&#39;, &#39;*&#39; }, // 9\r\n\t\t\t\t{ &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39;, &#39;*&#39; } };// 10\r\n\r\n\t\tSystem.out.println(&quot;Input maze:&quot;);\r\n\t\tdisplayMaze(mazeArr, row, col);\r\n\r\n\t\tSystem.out.println(&quot;\\nMaze solution:&quot;);\r\n\t\tboolean isSolved = algorithm(mazeArr);\r\n\t\tif (isSolved) {\r\n\t\t\tdisplayMaze(mazeArr, row, col);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;No Solution&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void displayMaze(char[][] mazeArr, int row, int col) {\r\n\t\tif (row &lt; mazeArr.length) { //iterate through all (11) rows\r\n\t\t\tif (col &lt; mazeArr[row].length) { //iterate through all (11) columns\r\n\t\t\t\t//displays maze without dead end indicators\r\n\t\t\t\tif(mazeArr[row][col] == &#39;~&#39;) {\r\n\t\t\t\t\t//mazeArr[row][col] = &#39; &#39;;\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.print(mazeArr[row][col] + &quot; &quot;); //displays the current index in the array\r\n\t\t\t\tdisplayMaze(mazeArr, row, col+1); //repeats this method by iterating through the columns first\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tSystem.out.println(); //enters the line after each row for display purposes\r\n\t\t\tdisplayMaze(mazeArr, row+1, col=0); //repeats this method by iterating through the rows\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t//indicates starting point for the maze to start solving and recursively calls algorithm method that is overloaded\r\n\t//pre: char 2D array mazeArr\r\n\t//post: returns a boolean value from the overloaded algorithm method \r\n\tpublic static boolean algorithm(char[][] mazeArr) {\r\n\t\tint row = 1, col = 1; // where maze starts\r\n\t\t\treturn algorithm(mazeArr, row, col);\r\n\t}\r\n\t\r\n\t//solves the maze looking for a solution (if there is one), modifies the 2D array accordingly \r\n\t//to the algorithm to trace the solution\r\n\t//pre: char 2D array mazeArr, int row and col\r\n\t//post: returns boolean value depending on the algorithms solution\r\n\tpublic static boolean algorithm(char[][] mazeArr, int row, int col) {\r\n\t\t\r\n        if (mazeArr[row][col] == &#39;$&#39;) { // found the target/exit\r\n            return true; //maze is completely solved \r\n        }\r\n        \r\n        if (mazeArr[row][col] == &#39; &#39;) { // if there is a path\r\n            mazeArr[row][col] = &#39;@&#39;; //mark as visited, block off path to not go back here again\r\n        } \r\n        \r\n        else if (mazeArr[row][col] != &#39;#&#39;) { // not allowed\r\n            return false;\r\n        }\r\n        // the core of the algorithm: try each direction until true is returned\r\n        \r\n        if (algorithm(mazeArr, row, col - 1) // west\r\n                || algorithm(mazeArr, row - 1, col) // north\r\n                || algorithm(mazeArr, row, col + 1) // east\r\n                || algorithm(mazeArr, row + 1, col) // south\r\n        ) {\r\n            return true; // path found\r\n        }\r\n        \r\n        if (mazeArr[row][col] == &#39;@&#39;) { // mark backtracking\r\n            mazeArr[row][col] = &#39;~&#39;; // indicates that this index is a dead end\r\n        }\r\n        \r\n        return false;\r\n        \r\n    }\r\n```\r\n","title":"Maze 2D Recursive Algorithm Dead End Issue","body":"<p>I've been trying to make a program that could solve a maze recursively (should work for any maze). Majority of the recursion for the algorithm works but when the maze checks for dead ends and a way to reroute to find the solution (end point), the code doesn't work for it. I've tried multiple ways to debug but it hasn't gotten me far; I either get StackOverflowError or the algorithm works to backtrack by one position.</p>\n<p><em>Note &quot;char indicators&quot; for the 2D array:</em></p>\n<ul>\n<li>'*' = walls</li>\n<li>'#' = start</li>\n<li>'$' = end</li>\n<li>' ' = possible path/not a wall</li>\n<li>'@' = path</li>\n<li>'~' = dead end</li>\n</ul>\n<p>Desired output:</p>\n<pre><code>Presolved maze:\n* * * * * * * * * * \n* # * * * * * * * * \n*   *           * * \n*   *       *   * * \n*       *   *   * * \n* * *       *   * * \n* *     *   *   * * \n* *     *   *     * \n* * * * * * *     * \n*               $ * \n* * * * * * * * * * \n\nMaze solution:\n\n* * * * * * * * * * \n* # * * * * * * * * \n* @ * @ @ @ @ @ * * \n* @ * @ ~ ~ * @ * * \n* @ @ @ * ~ * @ * * \n* * * ~ ~ ~ * @ * * \n* * ~ ~ * ~ * @ * * \n* * ~ ~ * ~ * @ @ * \n* * * * * * * ~ @ * \n* ~ ~ ~ ~ ~ ~ ~ $ * \n* * * * * * * * * *\n</code></pre>\n<p><strong>Here is the code for the one that backtracks by only one position:</strong></p>\n<p>In this version I tried recursively calling after finding a position that could be backtracked and returning that position to retrace and find the solution</p>\n<pre><code>import java.util.*;\npublic class mazeOG {\n    public static void main(String[] args) {\n        allocateMaze();\n    }\n    \n    public static void allocateMaze() {\n        char[][] mazeArr = {{'*','*','*','*','*','*','*','*','*','*'},//0\n                            {'*','#','*','*','*','*','*','*','*','*'},//1\n                            {'*',' ','*',' ',' ',' ',' ',' ','*','*'},//2\n                            {'*',' ','*',' ',' ',' ','*',' ','*','*'},//3\n                            {'*',' ',' ',' ','*',' ','*',' ','*','*'},//4\n                            {'*','*','*',' ',' ',' ','*',' ','*','*'},//5\n                            {'*','*',' ',' ','*',' ','*',' ','*','*'},//6\n                            {'*','*',' ',' ','*',' ','*',' ',' ','*'},//7\n                            {'*','*','*','*','*','*','*',' ',' ','*'},//8\n                            {'*',' ',' ',' ',' ',' ',' ',' ','$','*'},//9\n                            {'*','*','*','*','*','*','*','*','*','*'}};//10\n        \n        //setting row and col to 0 for display method\n        int row = 0;\n        int col = 0;\n        System.out.println(&quot;Presolved maze:&quot;);\n        displayMaze(mazeArr, row, col); //displays presolved maze\n        row = 1;\n        col = 1;\n        boolean isSolved = false;\n        System.out.println(&quot;\\nMaze solution:&quot;);\n        algorithm(mazeArr, row, col, isSolved); //create variable for solved maze, sends maze allocation to method that solves the maze\n        System.out.println();\n        row = 0;\n        col = 0;\n        displayMaze(mazeArr, row, col); //displays traced + solved maze\n    }\n\n    public static void displayMaze(char[][] mazeArr, int row, int col) {\n        if (row &lt; mazeArr.length) { //iterate through all (11) rows\n            if (col &lt; mazeArr[row].length) { //iterate through all (11) columns\n                System.out.print(mazeArr[row][col] + &quot; &quot;); //displays the current index in the array\n                displayMaze(mazeArr, row, col+1); //repeats this method by iterating through the columns first\n                return;\n            }\n            System.out.println(); //enters the line after each row for display purposes\n            displayMaze(mazeArr, row+1, col=0); //repeats this method by iterating through the rows\n        }\n    }\n    \n    public static char[][] algorithm(char[][] mazeArr, int row, int col, boolean isSolved){\n        boolean isPath = false; // assume there is no path\n\n        if (mazeArr[row][col] == '$' &amp;&amp; isSolved == true) { // IF MAZE IS COMPLETELY SOLVED\n            return mazeArr;\n\n        } else { // IF MAZE IS NOT COMPLETELY SOLVED\n            \n            // start searching thru the maze, assume there is no path\n                // THERE IS NO DEAD END\n                \n                if (mazeArr[row - 1][col] == ' ') { // if north has a path\n                    mazeArr[row - 1][col] = '@'; // block off path to not go back here again\n                    isPath = true; // there is a path\n                    isSolved = false; // assume maze is still not solved\n                    \n                    return algorithm(mazeArr, --row, col, isSolved); // repeat process going to next north spot\n                }\n                \n                if (mazeArr[row][col + 1] == ' ') { // if east has a path\n                    mazeArr[row][col + 1] = '@'; // block off path to not go back here again\n                    isPath = true; // there is a path\n                    isSolved = false; // assume maze is still not solved\n\n                    return algorithm(mazeArr, row, ++col, isSolved); // repeat process going to next east spot\n                }\n                \n                if (mazeArr[row + 1][col] == ' ') { // if south has a path\n                    mazeArr[row + 1][col] = '@'; // block off path to not go back here again\n                    isPath = true; // there is a path\n                    isSolved = false; // assume maze is still not solved\n                    \n                    return algorithm(mazeArr, ++row, col, isSolved); // repeat process going to next south spot\n                }\n                \n                if (mazeArr[row][col - 1] == ' ') { // if west has a path\n                    mazeArr[row][col - 1] = '@'; // block off path to not go back here again\n                    isPath = true; // there is a path\n                    isSolved = false; // assume maze is still not solved\n                    \n                    return algorithm(mazeArr, row, --col, isSolved); // repeat process going to next west spot\n                }\n                \n                if (mazeArr[row][col] == '$') { // if you have reached the end of the maze\n                    isSolved = true; // maze has been solved\n                    \n                    \n                    return algorithm(mazeArr, row, col, isSolved); // algorithm will recognize\n                }\n\n            // finds alternate path if there's a dead end\n                if (mazeArr[row][col] != '#') {\n                mazeArr[row][col] = '~'; //indicates that this index is a dead end\n                }\n                \n                if (isPath == false) {\n                    if (mazeArr[row - 1][col] == '@' &amp;&amp; mazeArr[row - 1][col] != '#') {// if north was a path\n                        isPath = true; \n                        isSolved = false; \n                        return algorithm(mazeArr, --row, col, isSolved);//returns to initial position before hitting dead end\n                    }\n                }\n                \n                if (isPath == false) {\n                    if (mazeArr[row - 1][col] == '@' &amp;&amp; mazeArr[row][col+1] != '#') {// if east was a path\n                        isPath = true; \n                        isSolved = false; \n                        return algorithm(mazeArr, row, ++col, isSolved);//returns to initial position before hitting dead end\n                    }\n                }\n                \n                if (isPath == false) {\n                    if (mazeArr[row + 1][col] == '@' &amp;&amp; mazeArr[row - 1][col] != '#') {// if south was a path\n                        isPath = true; \n                        isSolved = false; \n                        return algorithm(mazeArr, ++row, col, isSolved);//returns to initial position before hitting dead end\n                    }\n                }\n                \n                if (isPath == false) {\n                    if (mazeArr[row][col-1] == '@' &amp;&amp; mazeArr[row - 1][col] != '#') {// if west was a path\n                        isPath = true; \n                        isSolved = false; \n                        return algorithm(mazeArr, row, --col, isSolved);//returns to initial position before hitting dead end\n                    }\n                }\n                \n                if (isPath == false) { // if there's no way out, that means there is no solution\n                    System.out.println(&quot;No Solution&quot;);              \n                    return mazeArr;\n                }\n                \n            return mazeArr;\n        }\n    }\n}\n</code></pre>\n<p><strong>Output for this version:</strong></p>\n<pre><code>Presolved maze:\n* * * * * * * * * * \n* # * * * * * * * * \n*   *           * * \n*   *       *   * * \n*       *   *   * * \n* * *       *   * * \n* *     *   *   * * \n* *     *   *     * \n* * * * * * *     * \n*               $ * \n* * * * * * * * * * \n\nMaze solution:\nNo Solution\n\n* * * * * * * * * * \n* # * * * * * * * * \n* @ * @ @ @ @ @ * * \n* @ * @     * @ * * \n* @ @ @ *   * @ * * \n* * *       * @ * * \n* *     *   * @ * * \n* *     *   * @ @ * \n* * * * * * * @ @ * \n* ~ @ @ @ @ @ @ $ * \n* * * * * * * * * * \n</code></pre>\n<p><strong>Here is the code for the version that gets StackOverflowError:</strong></p>\n<p>In this version, I removed the section of the code that traces back by a position and recursively calls, instead, I just indicate that that position is a dead end and recursively  calls the algorithm to search for the next position instead.</p>\n<pre><code>import java.util.*;\n\npublic class maze {\n    public static void main(String[] args) {\n        allocateMaze();\n    }\n\n    public static void allocateMaze() {\n        char[][] mazeArr = { { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' }, // 0\n                { '*', '#', '*', '*', '*', '*', '*', '*', '*', '*' }, // 1\n                { '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', '*', '*' }, // 2\n                { '*', ' ', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 3\n                { '*', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 4\n                { '*', '*', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 5\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 6\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', ' ', '*' }, // 7\n                { '*', '*', '*', '*', '*', '*', '*', ' ', ' ', '*' }, // 8\n                { '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '$', '*' }, // 9\n                { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' } };// 10\n\n        // setting row and col to 0 for display method\n        int row = 0;\n        int col = 0;\n        System.out.println(&quot;Presolved maze:&quot;);\n        displayMaze(mazeArr, row, col); // displays presolved maze\n        row = 1;\n        col = 1;\n        boolean isSolved = false;\n        System.out.println(&quot;\\nMaze solution:&quot;);\n        algorithm(mazeArr, row, col, isSolved); // create variable for solved maze, sends maze allocation to method that\n                                                // solves the maze\n        System.out.println();\n        row = 0;\n        col = 0;\n        displayMaze(mazeArr, row, col); // displays traced + solved maze\n    }\n\n    public static void displayMaze(char[][] mazeArr, int row, int col) {\n        if (row &lt; mazeArr.length) { // iterate through all (11) rows\n            if (col &lt; mazeArr[row].length) { // iterate through all (11) columns\n                System.out.print(mazeArr[row][col] + &quot; &quot;); // displays the current index in the array\n                displayMaze(mazeArr, row, col + 1); // repeats this method by iterating through the columns first\n                return;\n            }\n            System.out.println(); // enters the line after each row for display purposes\n            displayMaze(mazeArr, row + 1, col = 0); // repeats this method by iterating through the rows\n        }\n    }\n\n    public static char[][] algorithm(char[][] mazeArr, int row, int col, boolean isSolved) {\n        boolean isPath = false; // assume there is no path\n\n        if (mazeArr[row][col] == '$' &amp;&amp; isSolved == true) { // IF MAZE IS COMPLETELY SOLVED\n            return mazeArr;\n\n        } else { // IF MAZE IS NOT COMPLETELY SOLVED\n\n            // start searching thru the maze,\n            // assume there is no path\n            // THERE IS NO DEAD END\n\n            if (mazeArr[row - 1][col] == ' ') { // if north has a path\n                mazeArr[row - 1][col] = '@'; // block off path to not go back here again\n                isPath = true; // there is a path\n                isSolved = false; // assume maze is still not solved\n\n                return algorithm(mazeArr, --row, col, isSolved); // repeat process going to next north spot\n            }\n\n            if (mazeArr[row][col + 1] == ' ') { // if east has a path\n                mazeArr[row][col + 1] = '@'; // block off path to not go back here again\n                isPath = true; // there is a path\n                isSolved = false; // assume maze is still not solved\n\n                return algorithm(mazeArr, row, ++col, isSolved); // repeat process going to next east spot\n            }\n\n            if (mazeArr[row + 1][col] == ' ') { // if south has a path\n                mazeArr[row + 1][col] = '@'; // block off path to not go back here again\n                isPath = true; // there is a path\n                isSolved = false; // assume maze is still not solved\n\n                return algorithm(mazeArr, ++row, col, isSolved); // repeat process going to next south spot\n            }\n\n            if (mazeArr[row][col - 1] == ' ') { // if west has a path\n                mazeArr[row][col - 1] = '@'; // block off path to not go back here again\n                isPath = true; // there is a path\n                isSolved = false; // assume maze is still not solved\n\n                return algorithm(mazeArr, row, --col, isSolved); // repeat process going to next west spot\n            }\n\n            if (mazeArr[row][col] == '$') { // if you have reached the end of the maze\n                isSolved = true; // maze has been solved\n\n                return algorithm(mazeArr, row, col, isSolved); // algorithm will recognize\n            }\n\n            //code from here and below is for the case of a dead end\n            if (mazeArr[row][col] != '#' &amp;&amp; isPath == false) {\n                mazeArr[row][col] = '~'; // indicates that this index is a dead end\n                isPath = true;\n                isSolved = false;\n                return algorithm(mazeArr, row, col, isSolved);\n            }\n\n            if (isPath == false) { // if there's no way out, that means there is no solution\n                System.out.println(&quot;No Solution&quot;);\n                return mazeArr;\n            }\n\n            return mazeArr;\n        }\n    }\n}\n</code></pre>\n<p>Any help would be really great! Thank you :)</p>\n<p>Edit:\n<strong>Modified Code</strong></p>\n<pre><code>public static void main(String[] args) {\n        int row = 0, col = 0;\n        char[][] mazeArr = { { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' }, // 0\n                { '*', '#', '*', '*', '*', '*', '*', '*', '*', '*' }, // 1\n                { '*', ' ', '*', ' ', ' ', ' ', ' ', ' ', '*', '*' }, // 2\n                { '*', ' ', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 3\n                { '*', ' ', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 4\n                { '*', '*', '*', ' ', ' ', ' ', '*', ' ', '*', '*' }, // 5\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', '*', '*' }, // 6\n                { '*', '*', ' ', ' ', '*', ' ', '*', ' ', ' ', '*' }, // 7\n                { '*', '*', '*', '*', '*', '*', '*', ' ', ' ', '*' }, // 8\n                { '*', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '$', '*' }, // 9\n                { '*', '*', '*', '*', '*', '*', '*', '*', '*', '*' } };// 10\n\n        System.out.println(&quot;Input maze:&quot;);\n        displayMaze(mazeArr, row, col);\n\n        System.out.println(&quot;\\nMaze solution:&quot;);\n        boolean isSolved = algorithm(mazeArr);\n        if (isSolved) {\n            displayMaze(mazeArr, row, col);\n        } else {\n            System.out.println(&quot;No Solution&quot;);\n        }\n    }\n    \n    public static void displayMaze(char[][] mazeArr, int row, int col) {\n        if (row &lt; mazeArr.length) { //iterate through all (11) rows\n            if (col &lt; mazeArr[row].length) { //iterate through all (11) columns\n                //displays maze without dead end indicators\n                if(mazeArr[row][col] == '~') {\n                    //mazeArr[row][col] = ' ';\n                }\n                System.out.print(mazeArr[row][col] + &quot; &quot;); //displays the current index in the array\n                displayMaze(mazeArr, row, col+1); //repeats this method by iterating through the columns first\n                return;\n            }\n            System.out.println(); //enters the line after each row for display purposes\n            displayMaze(mazeArr, row+1, col=0); //repeats this method by iterating through the rows\n        }\n    }\n    \n    \n    //indicates starting point for the maze to start solving and recursively calls algorithm method that is overloaded\n    //pre: char 2D array mazeArr\n    //post: returns a boolean value from the overloaded algorithm method \n    public static boolean algorithm(char[][] mazeArr) {\n        int row = 1, col = 1; // where maze starts\n            return algorithm(mazeArr, row, col);\n    }\n    \n    //solves the maze looking for a solution (if there is one), modifies the 2D array accordingly \n    //to the algorithm to trace the solution\n    //pre: char 2D array mazeArr, int row and col\n    //post: returns boolean value depending on the algorithms solution\n    public static boolean algorithm(char[][] mazeArr, int row, int col) {\n        \n        if (mazeArr[row][col] == '$') { // found the target/exit\n            return true; //maze is completely solved \n        }\n        \n        if (mazeArr[row][col] == ' ') { // if there is a path\n            mazeArr[row][col] = '@'; //mark as visited, block off path to not go back here again\n        } \n        \n        else if (mazeArr[row][col] != '#') { // not allowed\n            return false;\n        }\n        // the core of the algorithm: try each direction until true is returned\n        \n        if (algorithm(mazeArr, row, col - 1) // west\n                || algorithm(mazeArr, row - 1, col) // north\n                || algorithm(mazeArr, row, col + 1) // east\n                || algorithm(mazeArr, row + 1, col) // south\n        ) {\n            return true; // path found\n        }\n        \n        if (mazeArr[row][col] == '@') { // mark backtracking\n            mazeArr[row][col] = '~'; // indicates that this index is a dead end\n        }\n        \n        return false;\n        \n    }\n</code></pre>\n"},{"tags":["java","kotlin","generics"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1649869674,"post_id":71861299,"comment_id":126987227,"body_markdown":"The error message is &quot;class java.lang.String cannot be cast to class java.lang.Number.&quot;  Apparently Kotlin saw that the list is supposed to be a list of `int`, allowed a string to be put into the list, but then threw an exception when it expected an `int` element but got back a string.","body":"The error message is &quot;class java.lang.String cannot be cast to class java.lang.Number.&quot;  Apparently Kotlin saw that the list is supposed to be a list of <code>int</code>, allowed a string to be put into the list, but then threw an exception when it expected an <code>int</code> element but got back a string."},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":4,"creation_date":1649869754,"post_id":71861299,"comment_id":126987264,"body_markdown":"The solution is &quot;don&#39;t do that.&quot;  Declaring an `ArrayList&lt;Int&gt;` and then putting strings into it makes no sense.","body":"The solution is &quot;don&#39;t do that.&quot;  Declaring an <code>ArrayList&lt;Int&gt;</code> and then putting strings into it makes no sense."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1649870097,"post_id":71861299,"comment_id":126987392,"body_markdown":"Because Java&#39;s type system is less secure than Kotlin&#39;s. Same reason that `null.toString()` is a compile error in Kotlin but a runtime error in Java.","body":"Because Java&#39;s type system is less secure than Kotlin&#39;s. Same reason that <code>null.toString()</code> is a compile error in Kotlin but a runtime error in Java."}],"answers":[{"tags":[],"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iya Bursov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1649869885,"creation_date":1649869885,"answer_id":71861424,"question_id":71861299,"body_markdown":"from https://www.baeldung.com/kotlin/generics\r\n\r\n&gt;6.1. Type Erasure\r\nAs with Java, Kotlins generics are erased at runtime. That is, an instance of a generic class doesnt preserve its type parameters at runtime.\r\nFor example, if we create a Set&lt;String&gt; and put a few strings into it, at runtime were only able to see it as a Set.\r\nLets create two Sets with two different type parameters:\r\n`val books: Set&lt;String&gt; = setOf(&quot;1984&quot;, &quot;Brave new world&quot;)\r\nval primes: Set&lt;Int&gt; = setOf(2, 3, 11)`\r\nAt runtime, the type information for Set&lt;String&gt; and Set&lt;Int&gt; will be erased and we see both of them as plain Sets. So, even though its perfectly possible to find out at runtime that value is a Set, we cant tell whether its a Set of strings, integers, or something else: that information has been erased.\r\n\r\n&gt;**So, how does Kotlins compiler prevent us from adding a Non-String into a Set&lt;String&gt;? Or, when we get an element from a Set&lt;String&gt;, how does it know the element is a String?\r\nThe answer is simple. The compiler is the one responsible for erasing the type information but before that, it actually knows the books variable contains String elements.\r\nSo, every time we get an element from it, the compiler would cast it to a String or when were gonna add an element into it, the compiler would type check the input.**\r\n\r\nso, it is additional security feature introduced by kotlin compiler","title":"why this java code can work but kotlin code can&#39;t","body":"<p>from <a href=\"https://www.baeldung.com/kotlin/generics\" rel=\"noreferrer\">https://www.baeldung.com/kotlin/generics</a></p>\n<blockquote>\n<p>6.1. Type Erasure\nAs with Java, Kotlins generics are erased at runtime. That is, an instance of a generic class doesnt preserve its type parameters at runtime.\nFor example, if we create a Set and put a few strings into it, at runtime were only able to see it as a Set.\nLets create two Sets with two different type parameters:\n<code>val books: Set&lt;String&gt; = setOf(&quot;1984&quot;, &quot;Brave new world&quot;) val primes: Set&lt;Int&gt; = setOf(2, 3, 11)</code>\nAt runtime, the type information for Set and Set will be erased and we see both of them as plain Sets. So, even though its perfectly possible to find out at runtime that value is a Set, we cant tell whether its a Set of strings, integers, or something else: that information has been erased.</p>\n</blockquote>\n<blockquote>\n<p><strong>So, how does Kotlins compiler prevent us from adding a Non-String into a Set? Or, when we get an element from a Set, how does it know the element is a String?\nThe answer is simple. The compiler is the one responsible for erasing the type information but before that, it actually knows the books variable contains String elements.\nSo, every time we get an element from it, the compiler would cast it to a String or when were gonna add an element into it, the compiler would type check the input.</strong></p>\n</blockquote>\n<p>so, it is additional security feature introduced by kotlin compiler</p>\n"}],"owner":{"account_id":24928392,"reputation":11,"user_id":18795841,"display_name":"obiah66"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1649869885,"creation_date":1649869325,"question_id":71861299,"body_markdown":"```\r\npublic class Generics2 {\r\n    public static void main(String[] args) throws InvocationTargetException, IllegalAccessException, NoSuchMethodException {\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n\r\n        list.add(12);\r\n//\r\n        Class&lt;? extends List&gt; clazz = list.getClass();\r\n        Method add = clazz.getDeclaredMethod(&quot;add&quot;, Object.class);\r\n//\r\n//\r\n        add.invoke(list, &quot;kl&quot;);\r\n        System.out.println(list);\r\n        System.out.println(list.get(0));\r\n        System.out.println(list.get(1));\r\n    }\r\n}\r\n\r\n```\r\nThis code can work. but when I convert this to kotlin. It can&#39;t work and throw Exception.Why? I just konw kotlin code has `CHECKCAST java/lang/Number`, but why java code doesn&#39;t have? Is this a special strategy of kotlin?\r\n\r\n```\r\nobject Generics {\r\n    @Throws(NoSuchMethodException::class, InvocationTargetException::class, IllegalAccessException::class)\r\n    @JvmStatic\r\n    fun main(args: Array&lt;String&gt;) {\r\n        val list: MutableList&lt;Int&gt; = ArrayList()\r\n        list.add(12)\r\n        //\r\n//        list.add(&quot;a&quot;);\r\n        val clazz: Class&lt;out MutableList&lt;*&gt;?&gt; = list.javaClass\r\n        val add = clazz.getDeclaredMethod(&quot;add&quot;, Any::class.java)\r\n        //\r\n//\r\n        add.invoke(list, &quot;kl&quot;)\r\n        println(list)\r\n        println(list[0])\r\n        println(list[1])\r\n        println(list.get(1))\r\n    }\r\n}\r\n```\r\n```\r\n[12, kl]\r\n12\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.String cannot be cast to class java.lang.Number (java.lang.String and java.lang.Number are in module java.base of loader &#39;bootstrap&#39;)\r\n\tat Generics.main(Generics.kt:22)\r\n\r\n```\r\n","title":"why this java code can work but kotlin code can&#39;t","body":"<pre><code>public class Generics2 {\n    public static void main(String[] args) throws InvocationTargetException, IllegalAccessException, NoSuchMethodException {\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n\n        list.add(12);\n//\n        Class&lt;? extends List&gt; clazz = list.getClass();\n        Method add = clazz.getDeclaredMethod(&quot;add&quot;, Object.class);\n//\n//\n        add.invoke(list, &quot;kl&quot;);\n        System.out.println(list);\n        System.out.println(list.get(0));\n        System.out.println(list.get(1));\n    }\n}\n\n</code></pre>\n<p>This code can work. but when I convert this to kotlin. It can't work and throw Exception.Why? I just konw kotlin code has <code>CHECKCAST java/lang/Number</code>, but why java code doesn't have? Is this a special strategy of kotlin?</p>\n<pre><code>object Generics {\n    @Throws(NoSuchMethodException::class, InvocationTargetException::class, IllegalAccessException::class)\n    @JvmStatic\n    fun main(args: Array&lt;String&gt;) {\n        val list: MutableList&lt;Int&gt; = ArrayList()\n        list.add(12)\n        //\n//        list.add(&quot;a&quot;);\n        val clazz: Class&lt;out MutableList&lt;*&gt;?&gt; = list.javaClass\n        val add = clazz.getDeclaredMethod(&quot;add&quot;, Any::class.java)\n        //\n//\n        add.invoke(list, &quot;kl&quot;)\n        println(list)\n        println(list[0])\n        println(list[1])\n        println(list.get(1))\n    }\n}\n</code></pre>\n<pre><code>[12, kl]\n12\nException in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.String cannot be cast to class java.lang.Number (java.lang.String and java.lang.Number are in module java.base of loader 'bootstrap')\n    at Generics.main(Generics.kt:22)\n\n</code></pre>\n"},{"tags":["java","exception","stoppropagation"],"comments":[{"owner":{"display_name":"user3458"},"score":1,"creation_date":1435323673,"post_id":31073770,"comment_id":50166331,"body_markdown":"if you are prepared to handle a null result from getMedia, why do you throw an exception in getMedia? If non-existent media is sometimes error and sometimes not, have 2 calls: one that returns null, such as getMedia, and one that throws, such as getExistingMedia().","body":"if you are prepared to handle a null result from getMedia, why do you throw an exception in getMedia? If non-existent media is sometimes error and sometimes not, have 2 calls: one that returns null, such as getMedia, and one that throws, such as getExistingMedia()."},{"owner":{"account_id":3554912,"reputation":3026,"user_id":2968894,"accept_rate":87,"display_name":"Pruthvi Raj"},"score":0,"creation_date":1435323890,"post_id":31073770,"comment_id":50166483,"body_markdown":"Exactly, this&#39;d actually throw an error about exception being never thrown in body of `try` block in first piece of code","body":"Exactly, this&#39;d actually throw an error about exception being never thrown in body of <code>try</code> block in first piece of code"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1435324429,"post_id":31073770,"comment_id":50166831,"body_markdown":"This question doesn&#39;t make much sense to me.","body":"This question doesn&#39;t make much sense to me."},{"owner":{"account_id":6385261,"reputation":173,"user_id":4953388,"accept_rate":0,"display_name":"Rajyalakshmi S"},"score":0,"creation_date":1435325234,"post_id":31073770,"comment_id":50167443,"body_markdown":"@Arkadiy  - So You mean to say I can have two calls one which gets all the id&#39;s with Information and the other which gets all the id&#39;s with no information which inturn can go to logs. There is no need to handle exception here. Please correct me if anything wrong.","body":"@Arkadiy  - So You mean to say I can have two calls one which gets all the id&#39;s with Information and the other which gets all the id&#39;s with no information which inturn can go to logs. There is no need to handle exception here. Please correct me if anything wrong."}],"answers":[{"tags":[],"owner":{"account_id":4965552,"reputation":223,"user_id":3995041,"display_name":"prsmax"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435325184,"creation_date":1435325184,"answer_id":31074423,"question_id":31073770,"body_markdown":"If i understand you right, mediaService.get also throw KalturaApiException.\r\nI think you don&#39;t need to worry about it. So inside getMedia you can just \r\n\r\n    return mediaService.get(entryId);\r\nnull also an object and you do null check in the other method. Exception also will be catched in your first method. (don&#39;t forget sign `getMedia(long id) throw KalturaApiException {...}`)\r\n\r\n    try {\r\n    entryInfo = getMedia(entry);\r\n    if (entryInfo != null) {\r\n    // do something\r\n    }\r\n    }catch(KalturaApiException e){\r\n     e.getMessage(); //log information, it&#39;s better to use logger (log4j for example)\r\n    }","title":"Java Positive flow and negative flow exception handling","body":"<p>If i understand you right, mediaService.get also throw KalturaApiException.\nI think you don't need to worry about it. So inside getMedia you can just </p>\n\n<pre><code>return mediaService.get(entryId);\n</code></pre>\n\n<p>null also an object and you do null check in the other method. Exception also will be catched in your first method. (don't forget sign <code>getMedia(long id) throw KalturaApiException {...}</code>)</p>\n\n<pre><code>try {\nentryInfo = getMedia(entry);\nif (entryInfo != null) {\n// do something\n}\n}catch(KalturaApiException e){\n e.getMessage(); //log information, it's better to use logger (log4j for example)\n}\n</code></pre>\n"}],"owner":{"account_id":6385261,"reputation":173,"user_id":4953388,"accept_rate":0,"display_name":"Rajyalakshmi S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":375,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1649869441,"creation_date":1435323360,"question_id":31073770,"body_markdown":"I am writing a Java code to fetch the object information by passing the object id. My case will be like this: \r\n1. Its not necessary that all Object ID&#39;s have information which means returns null.\r\n2. But  If the ID has a information, then I will return the object. So I am doing null check here. \r\n\r\nIf I write a else condition which throws the KalturaApiException, then its throwing the exception saying EntryId not found and stopping the execution there. My problem is it should continue with the positive flow and should log all the ids with no information. How to handle this scenario and how to catch this exception. Please help me resolving this. Thanks in advance.\r\n\r\n    try {\r\n    entryInfo = getMedia(entry);\r\n\t\t\t\t\t\t\t\tif (entryInfo != null) {\r\n    //Here I am retrieving all the information from the object and setting to one more object.\r\n    }\r\n    }catch(KalturaApiException e){\r\n     e.getMessage();\r\n    }\r\n\r\nInside getMedia method:\r\n\r\n    try {\r\n\t\t\tentryInfo = mediaService.get(entryId);\r\n\t\t\tif (entryInfo != null) {\r\n\t\t\t\treturn entryInfo;\r\n\t\t\t}\r\n\t\t} catch (KalturaApiException e) {\r\n\t\t\te.getMessage();\r\n\t\t}\r\n\t\treturn entryInfo;\r\n\r\n","title":"Java Positive flow and negative flow exception handling","body":"<p>I am writing a Java code to fetch the object information by passing the object id. My case will be like this: \n1. Its not necessary that all Object ID's have information which means returns null.\n2. But  If the ID has a information, then I will return the object. So I am doing null check here. </p>\n\n<p>If I write a else condition which throws the KalturaApiException, then its throwing the exception saying EntryId not found and stopping the execution there. My problem is it should continue with the positive flow and should log all the ids with no information. How to handle this scenario and how to catch this exception. Please help me resolving this. Thanks in advance.</p>\n\n<pre><code>try {\nentryInfo = getMedia(entry);\n                            if (entryInfo != null) {\n//Here I am retrieving all the information from the object and setting to one more object.\n}\n}catch(KalturaApiException e){\n e.getMessage();\n}\n</code></pre>\n\n<p>Inside getMedia method:</p>\n\n<pre><code>try {\n        entryInfo = mediaService.get(entryId);\n        if (entryInfo != null) {\n            return entryInfo;\n        }\n    } catch (KalturaApiException e) {\n        e.getMessage();\n    }\n    return entryInfo;\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","hibernate","mapping"],"comments":[{"owner":{"account_id":19635311,"reputation":1574,"user_id":14372685,"display_name":"tbjorch"},"score":0,"creation_date":1649855989,"post_id":71858176,"comment_id":126981403,"body_markdown":"Could you add PanierService code to your question?","body":"Could you add PanierService code to your question?"},{"owner":{"account_id":20678789,"reputation":572,"user_id":15182834,"display_name":"I&#39;m Weverton"},"score":0,"creation_date":1649856104,"post_id":71858176,"comment_id":126981448,"body_markdown":"Could you add your service and postman payload please?","body":"Could you add your service and postman payload please?"}],"answers":[{"tags":[],"owner":{"account_id":19635311,"reputation":1574,"user_id":14372685,"display_name":"tbjorch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649857709,"creation_date":1649857349,"answer_id":71858545,"question_id":71858176,"body_markdown":"Your problem is that you never link the objects before persisting them. Below is one way that should fix it:\r\n\r\n```java\r\n@Service\r\n@Transactional\r\npublic class PanierService {\r\n    private final PanierRepository panierRepository;\r\n    private final CategoryRepository categoryRepository;\r\n\r\n    @Autowired\r\n    public PanierService(PanierRepository panierRepository, CategoryRepository categoryRepository) {\r\n        this.panierRepository = panierRepository;\r\n        this.categoryRepository = categoryRepository;\r\n    }\r\n\r\n    public Panier addPanier(Panier panier){\r\n        Category category = categoryRepository.findById(panier.getCategory().getId()).orElseThrow();\r\n        panier.setCategory(category);\r\n        panier.setCodePanier(UUID.randomUUID().toString());\r\n        return panierRepository.save(panier);\r\n    }\r\n\r\n    // ...other methods\r\n}\r\n\r\n```","title":"When I add an Entity with hibernate the foreign key is always saved as null","body":"<p>Your problem is that you never link the objects before persisting them. Below is one way that should fix it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Transactional\npublic class PanierService {\n    private final PanierRepository panierRepository;\n    private final CategoryRepository categoryRepository;\n\n    @Autowired\n    public PanierService(PanierRepository panierRepository, CategoryRepository categoryRepository) {\n        this.panierRepository = panierRepository;\n        this.categoryRepository = categoryRepository;\n    }\n\n    public Panier addPanier(Panier panier){\n        Category category = categoryRepository.findById(panier.getCategory().getId()).orElseThrow();\n        panier.setCategory(category);\n        panier.setCodePanier(UUID.randomUUID().toString());\n        return panierRepository.save(panier);\n    }\n\n    // ...other methods\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15632332,"reputation":1,"user_id":11278295,"display_name":"Hitchdawg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649863421,"creation_date":1649863421,"answer_id":71859993,"question_id":71858176,"body_markdown":" \r\n \r\n    @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;categorie&quot;,cascade = CascadeType.ALL)\r\n    private ArrayList&lt;Panier&gt; paniers = new ArrayList&lt;&gt;();\r\n\r\n   this might fix the NPE","title":"When I add an Entity with hibernate the foreign key is always saved as null","body":"<pre><code>@JsonIgnore\n@OneToMany(mappedBy = &quot;categorie&quot;,cascade = CascadeType.ALL)\nprivate ArrayList&lt;Panier&gt; paniers = new ArrayList&lt;&gt;();\n</code></pre>\n<p>this might fix the NPE</p>\n"}],"owner":{"account_id":22489835,"reputation":1,"user_id":16687721,"display_name":"user"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1649869257,"creation_date":1649855897,"question_id":71858176,"body_markdown":"I have two classes Panier.java and Categorie.java with OneToMany relationship. When I post via postman a panier with category id, all the data are stored correctly except the category in the DB and the foreign key in the panier table is stored always as null.\r\n\r\nPanier.java\r\n```\r\npackage com.app.saveeat.entity;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport javax.persistence.*;\r\nimport java.io.Serializable;\r\nimport java.time.LocalDateTime;\r\n\r\n@Entity\r\n@AllArgsConstructor\r\npublic class Panier implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(nullable = false, updatable = false)\r\n    private Long id;\r\n    private String nom;\r\n    private String description;\r\n    private Double prixInitial;\r\n    private Double prixOffre;\r\n    private String quantity;\r\n    private LocalDateTime dateDebut;\r\n    private LocalDateTime dateFin;\r\n    private String image;\r\n    private String adresse;\r\n    @Column(nullable = false,updatable = false)\r\n    private String codePanier;\r\n\r\n\r\n\r\n    @JsonIgnore\r\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    @JoinColumn (name = &quot;categorie&quot;)\r\n    private Categorie categorie;\r\n\r\n    public Panier(){}\r\n    public Panier(String nom, String description, Double prixInitial, Double prixOffre, String quantity, LocalDateTime dateDebut,LocalDateTime dateFin, String image, String adresse, String codePanier){\r\n        this.nom = nom;\r\n        this.description = description;\r\n        this.prixInitial = prixInitial;\r\n        this.prixOffre = prixOffre;\r\n        this.quantity = quantity;\r\n        this.dateDebut = dateDebut;\r\n        this.image = image;\r\n        this.adresse = adresse;\r\n        this.codePanier = codePanier;\r\n        this.dateFin = dateFin;\r\n    }\r\n\r\n    public Long getId(){\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id){\r\n        this.id = id;\r\n    }\r\n\r\n    public String getNom(){\r\n        return nom;\r\n    }\r\n\r\n    public void setNom(String nom){\r\n        this.nom = nom;\r\n    }\r\n\r\n    public String getDescription(){\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description){\r\n        this.description = description;\r\n    }\r\n\r\n    public Double getPrixInitial(){\r\n        return prixInitial;\r\n    }\r\n\r\n    public void setPrixInitial(Double prixInitial){\r\n        this.prixInitial = prixInitial;\r\n    }\r\n\r\n    public Double getPrixOffre(){\r\n        return prixOffre;\r\n    }\r\n\r\n    public void setPrixOffre(Double prixOffre){\r\n        this.prixOffre = prixOffre;\r\n    }\r\n\r\n    public String getQuantity(){\r\n        return quantity;\r\n    }\r\n\r\n    public void setQuantity(String quantity){\r\n        this.quantity = quantity;\r\n    }\r\n\r\n    public LocalDateTime getDateDebut(){\r\n        return dateDebut;\r\n    }\r\n\r\n    public void setDateDebut(LocalDateTime dateDebut){\r\n        this.dateDebut = dateDebut;\r\n    }\r\n\r\n    public LocalDateTime getDateFin() { return dateFin; }\r\n\r\n    public void setDateFin(LocalDateTime dateFin) {\r\n        this.dateFin = dateFin;\r\n    }\r\n\r\n    public String getImage(){\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image){\r\n        this.image = image;\r\n    }\r\n\r\n    public String getAdresse(){\r\n        return adresse;\r\n    }\r\n\r\n    public void setAdresse(String adresse){\r\n        this.adresse = adresse;\r\n    }\r\n\r\n    public String getCodePanier(){\r\n        return codePanier;\r\n    }\r\n\r\n    public void setCodePanier(String codePanier){\r\n        this.codePanier = codePanier;\r\n    }\r\n\r\n    public Categorie getCategorie() {\r\n        return categorie;\r\n    }\r\n\r\n    public void setCategorie(Categorie categorie) {\r\n        this.categorie = categorie;\r\n    }\r\n\r\n    @Override\r\n    public String toString(){\r\n        return &quot;Panier{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, nom=&#39;&quot; + nom + &#39;\\&#39;&#39; +\r\n                &quot;, description=&#39;&quot; + description + &#39;\\&#39;&#39; +\r\n                &quot;, prixInitial=&#39;&quot; + prixInitial + &#39;\\&#39;&#39; +\r\n                &quot;, prixOffre=&#39;&quot; + prixOffre + &#39;\\&#39;&#39; +\r\n                &quot;, quantity=&#39;&quot; + quantity + &#39;\\&#39;&#39; +\r\n                &quot;, dateDebut=&#39;&quot; + dateDebut + &#39;\\&#39;&#39; +\r\n                &quot;, dateFin=&#39;&quot; + dateFin + &#39;\\&#39;&#39; +\r\n                &quot;, image=&#39;&quot; + image + &#39;\\&#39;&#39; +\r\n                &quot;, adresse=&#39;&quot; + adresse + &#39;\\&#39;&#39; +\r\n                &quot;, categorie=&#39;&quot; + categorie + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```\r\n\r\nCategorie.java\r\n\r\n```\r\npackage com.app.saveeat.entity;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport javax.persistence.*;\r\nimport java.io.Serializable;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n@Entity\r\n@Data\r\n@AllArgsConstructor\r\npublic class Categorie implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(nullable = false, updatable = false)\r\n    private Long id;\r\n    private String nom;\r\n\r\n    @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;categorie&quot;,cascade = CascadeType.ALL)\r\n    private List&lt;Panier&gt; paniers;\r\n\r\n    public List&lt;Panier&gt; getPaniers() {\r\n        return paniers;\r\n    }\r\n\r\n    public void setPaniers(List&lt;Panier&gt; paniers) {\r\n        this.paniers = paniers;\r\n    }\r\n\r\n    public Categorie() {}\r\n    public Categorie(Long id, String nom) {\r\n        this.id = id;\r\n        this.nom = nom;\r\n    }\r\n\r\n\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getNom() {\r\n        return nom;\r\n    }\r\n\r\n    public void setNom(String nom) {\r\n        this.nom = nom;\r\n    }\r\n}\r\n\r\n```\r\nPanierController.java\r\n```\r\npackage com.app.saveeat.controller;\r\n\r\nimport com.app.saveeat.entity.Categorie;\r\nimport com.app.saveeat.entity.Panier;\r\nimport com.app.saveeat.service.PanierService;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport java.util.List;\r\n\r\n\r\n@CrossOrigin(origins = &quot;*&quot;)\r\n@RestController\r\n@RequestMapping(value = &quot;/panier&quot;,\r\n        headers = &quot;Accept=application/json&quot;,\r\n        method = { RequestMethod.GET, RequestMethod.POST, RequestMethod.PUT, RequestMethod.DELETE })\r\npublic class PanierController {\r\n    private final PanierService panierService;\r\n\r\n    public PanierController(PanierService panierService) {\r\n        this.panierService = panierService;\r\n    }\r\n\r\n    @GetMapping(&quot;/all&quot;)\r\n    public ResponseEntity&lt;List&lt;Panier&gt;&gt; getAllPaniers(){\r\n        List&lt;Panier&gt; paniers = panierService.findAllPaniers();\r\n        return new ResponseEntity&lt;&gt;(paniers, HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(&quot;/find/{id}&quot;)\r\n    public ResponseEntity&lt;Panier&gt; getPanierById(@PathVariable(&quot;id&quot;) Long id){\r\n        Panier panier = panierService.findPanierById(id);\r\n        return new ResponseEntity&lt;&gt;(panier, HttpStatus.OK);\r\n    }\r\n\r\n    @PostMapping(&quot;/add&quot;)\r\n    public ResponseEntity&lt;Panier&gt; addPanier(@RequestBody Panier panier){\r\n        Panier newPanier = panierService.addPanier(panier);\r\n        return new ResponseEntity&lt;&gt;(newPanier, HttpStatus.CREATED);\r\n    }\r\n\r\n    @PutMapping(&quot;/update&quot;)\r\n    public ResponseEntity&lt;Panier&gt; updatePanier(@RequestBody Panier panier){\r\n        Panier updatePanier = panierService.updatePanier(panier);\r\n        return new ResponseEntity&lt;&gt;(updatePanier, HttpStatus.OK);\r\n    }\r\n\r\n    @DeleteMapping(&quot;/delete/{id}&quot;)\r\n    public ResponseEntity&lt;?&gt; deletePanier(@PathVariable(value = &quot;id&quot;) Long id){\r\n        panierService.deletePanier(id);\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\nCategorieController.java\r\n```\r\npackage com.app.saveeat.controller;\r\n\r\nimport com.app.saveeat.entity.Categorie;\r\nimport com.app.saveeat.service.CategorieService;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\n\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @RestController\r\n    @RequestMapping(value = &quot;/categorie&quot;)\r\n    public class CategorieController {\r\n    private final CategorieService categorieService;\r\n    public CategorieController(CategorieService categorieService) {\r\n        this.categorieService = categorieService;\r\n    }\r\n\r\n    @GetMapping(&quot;/all&quot;)\r\n    public ResponseEntity&lt;List&lt;Categorie&gt;&gt; getAllCategories(){\r\n        List&lt;Categorie&gt; categories = categorieService.findAllCategories();\r\n        return new ResponseEntity&lt;&gt;(categories, HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(&quot;/find/{id}&quot;)\r\n    public ResponseEntity&lt;Categorie&gt; getCategorieById(@PathVariable(&quot;id&quot;) Long id){\r\n        Categorie categorie = categorieService.findCategorieById(id);\r\n        return new ResponseEntity&lt;&gt;(categorie, HttpStatus.OK);\r\n    }\r\n}\r\n\r\n\r\n\r\n```\r\n\r\nPanierService.java\r\n```\r\npackage com.app.saveeat.service;\r\n\r\nimport com.app.saveeat.entity.Panier;\r\nimport com.app.saveeat.exception.PanierNotFoundException;\r\nimport com.app.saveeat.repository.PanierRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.transaction.Transactional;\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\n@Service\r\n@Transactional\r\npublic class PanierService {\r\n    private final PanierRepository panierRepository;\r\n\r\n    @Autowired\r\n    public PanierService(PanierRepository panierRepository) {\r\n        this.panierRepository = panierRepository;\r\n    }\r\n\r\n    public Panier addPanier(Panier panier){\r\n        panier.setCodePanier(UUID.randomUUID().toString());\r\n        return panierRepository.save(panier);\r\n    }\r\n\r\n    public List&lt;Panier&gt; findAllPaniers(){\r\n        return panierRepository.findAll();\r\n    }\r\n\r\n    public Panier updatePanier(Panier panier){\r\n        return panierRepository.save(panier);\r\n    }\r\n\r\n    public Panier findPanierById(Long id){\r\n        return  panierRepository.findPanierById(id).orElseThrow(() -&gt; new PanierNotFoundException(&quot;Panier by id&quot; + id + &quot;was not found&quot;));\r\n    }\r\n\r\n    public void deletePanier(Long id){\r\n        panierRepository.deletePanierById(id);\r\n    }\r\n}\r\n\r\n\r\n\r\n```\r\n\r\nCategorieService.java\r\n```\r\npackage com.app.saveeat.service;\r\n\r\nimport com.app.saveeat.entity.Categorie;\r\nimport com.app.saveeat.exception.CategorieNotFoundException;\r\nimport com.app.saveeat.repository.CategorieRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.transaction.Transactional;\r\nimport java.util.List;\r\n\r\n@Service\r\n@Transactional\r\npublic class CategorieService {\r\n    private final CategorieRepository categorieRepository;\r\n\r\n    @Autowired\r\n    public CategorieService(CategorieRepository categorieRepository) {\r\n        this.categorieRepository = categorieRepository;\r\n    }\r\n\r\n    public List&lt;Categorie&gt; findAllCategories(){\r\n        return categorieRepository.findAll();\r\n    }\r\n    public Categorie findCategorieById(Long id){\r\n        return  categorieRepository.findCategorieById(id).orElseThrow(() -&gt; new CategorieNotFoundException(&quot;Categorie by id&quot; + id + &quot;was not found&quot;));\r\n    }\r\n}\r\n\r\n```\r\npostman api test\r\nRequest\r\n```\r\n{\r\n    &quot;nom&quot;: &quot;panier1 &quot;,\r\n    &quot;description&quot;: &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit&quot;,\r\n    &quot;prixInitial&quot;: 11,\r\n    &quot;prixOffre&quot;:10,\r\n    &quot;quantity&quot;: &quot;12&quot;,\r\n    &quot;dateDebut&quot;: &quot;2022-03-30T19:00:00.000Z&quot;,\r\n    &quot;dateFin&quot;: &quot;2022-03-30T21:30:15.000Z&quot;,\r\n    &quot;image&quot;: &quot;https://bootdey.com/img/Content/avatar/avatar4.png&quot;,\r\n    &quot;adresse&quot;: &quot;France&quot;,\r\n    &quot;codePanier&quot;: &quot;4570090332&quot;,\r\n    &quot;categorie&quot;: {\r\n        &quot;id&quot;: 2\r\n    }\r\n}\r\n```\r\nResponse\r\n```\r\n{\r\n    &quot;nom&quot;: &quot;panier1 &quot;,\r\n    &quot;description&quot;: &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit&quot;,\r\n    &quot;prixInitial&quot;: 11,\r\n    &quot;prixOffre&quot;:10,\r\n    &quot;quantity&quot;: &quot;12&quot;,\r\n    &quot;dateDebut&quot;: &quot;2022-03-30T19:00:00.000Z&quot;,\r\n    &quot;dateFin&quot;: &quot;2022-03-30T21:30:15.000Z&quot;,\r\n    &quot;image&quot;: &quot;https://bootdey.com/img/Content/avatar/avatar4.png&quot;,\r\n    &quot;adresse&quot;: &quot;France&quot;,\r\n    &quot;codePanier&quot;: &quot;f4466839-c498-4c2a-b1de-48c184aed450&quot;\r\n}\r\nany help please ?\r\n\r\n","title":"When I add an Entity with hibernate the foreign key is always saved as null","body":"<p>I have two classes Panier.java and Categorie.java with OneToMany relationship. When I post via postman a panier with category id, all the data are stored correctly except the category in the DB and the foreign key in the panier table is stored always as null.</p>\n<p>Panier.java</p>\n<pre><code>package com.app.saveeat.entity;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.*;\nimport java.io.Serializable;\nimport java.time.LocalDateTime;\n\n@Entity\n@AllArgsConstructor\npublic class Panier implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(nullable = false, updatable = false)\n    private Long id;\n    private String nom;\n    private String description;\n    private Double prixInitial;\n    private Double prixOffre;\n    private String quantity;\n    private LocalDateTime dateDebut;\n    private LocalDateTime dateFin;\n    private String image;\n    private String adresse;\n    @Column(nullable = false,updatable = false)\n    private String codePanier;\n\n\n\n    @JsonIgnore\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    @JoinColumn (name = &quot;categorie&quot;)\n    private Categorie categorie;\n\n    public Panier(){}\n    public Panier(String nom, String description, Double prixInitial, Double prixOffre, String quantity, LocalDateTime dateDebut,LocalDateTime dateFin, String image, String adresse, String codePanier){\n        this.nom = nom;\n        this.description = description;\n        this.prixInitial = prixInitial;\n        this.prixOffre = prixOffre;\n        this.quantity = quantity;\n        this.dateDebut = dateDebut;\n        this.image = image;\n        this.adresse = adresse;\n        this.codePanier = codePanier;\n        this.dateFin = dateFin;\n    }\n\n    public Long getId(){\n        return id;\n    }\n\n    public void setId(Long id){\n        this.id = id;\n    }\n\n    public String getNom(){\n        return nom;\n    }\n\n    public void setNom(String nom){\n        this.nom = nom;\n    }\n\n    public String getDescription(){\n        return description;\n    }\n\n    public void setDescription(String description){\n        this.description = description;\n    }\n\n    public Double getPrixInitial(){\n        return prixInitial;\n    }\n\n    public void setPrixInitial(Double prixInitial){\n        this.prixInitial = prixInitial;\n    }\n\n    public Double getPrixOffre(){\n        return prixOffre;\n    }\n\n    public void setPrixOffre(Double prixOffre){\n        this.prixOffre = prixOffre;\n    }\n\n    public String getQuantity(){\n        return quantity;\n    }\n\n    public void setQuantity(String quantity){\n        this.quantity = quantity;\n    }\n\n    public LocalDateTime getDateDebut(){\n        return dateDebut;\n    }\n\n    public void setDateDebut(LocalDateTime dateDebut){\n        this.dateDebut = dateDebut;\n    }\n\n    public LocalDateTime getDateFin() { return dateFin; }\n\n    public void setDateFin(LocalDateTime dateFin) {\n        this.dateFin = dateFin;\n    }\n\n    public String getImage(){\n        return image;\n    }\n\n    public void setImage(String image){\n        this.image = image;\n    }\n\n    public String getAdresse(){\n        return adresse;\n    }\n\n    public void setAdresse(String adresse){\n        this.adresse = adresse;\n    }\n\n    public String getCodePanier(){\n        return codePanier;\n    }\n\n    public void setCodePanier(String codePanier){\n        this.codePanier = codePanier;\n    }\n\n    public Categorie getCategorie() {\n        return categorie;\n    }\n\n    public void setCategorie(Categorie categorie) {\n        this.categorie = categorie;\n    }\n\n    @Override\n    public String toString(){\n        return &quot;Panier{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, nom='&quot; + nom + '\\'' +\n                &quot;, description='&quot; + description + '\\'' +\n                &quot;, prixInitial='&quot; + prixInitial + '\\'' +\n                &quot;, prixOffre='&quot; + prixOffre + '\\'' +\n                &quot;, quantity='&quot; + quantity + '\\'' +\n                &quot;, dateDebut='&quot; + dateDebut + '\\'' +\n                &quot;, dateFin='&quot; + dateFin + '\\'' +\n                &quot;, image='&quot; + image + '\\'' +\n                &quot;, adresse='&quot; + adresse + '\\'' +\n                &quot;, categorie='&quot; + categorie + '\\'' +\n                '}';\n    }\n}\n\n</code></pre>\n<p>Categorie.java</p>\n<pre><code>package com.app.saveeat.entity;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.*;\nimport java.io.Serializable;\nimport java.util.ArrayList;\nimport java.util.List;\n\n\n@Entity\n@Data\n@AllArgsConstructor\npublic class Categorie implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(nullable = false, updatable = false)\n    private Long id;\n    private String nom;\n\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;categorie&quot;,cascade = CascadeType.ALL)\n    private List&lt;Panier&gt; paniers;\n\n    public List&lt;Panier&gt; getPaniers() {\n        return paniers;\n    }\n\n    public void setPaniers(List&lt;Panier&gt; paniers) {\n        this.paniers = paniers;\n    }\n\n    public Categorie() {}\n    public Categorie(Long id, String nom) {\n        this.id = id;\n        this.nom = nom;\n    }\n\n\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getNom() {\n        return nom;\n    }\n\n    public void setNom(String nom) {\n        this.nom = nom;\n    }\n}\n\n</code></pre>\n<p>PanierController.java</p>\n<pre><code>package com.app.saveeat.controller;\n\nimport com.app.saveeat.entity.Categorie;\nimport com.app.saveeat.entity.Panier;\nimport com.app.saveeat.service.PanierService;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport java.util.List;\n\n\n@CrossOrigin(origins = &quot;*&quot;)\n@RestController\n@RequestMapping(value = &quot;/panier&quot;,\n        headers = &quot;Accept=application/json&quot;,\n        method = { RequestMethod.GET, RequestMethod.POST, RequestMethod.PUT, RequestMethod.DELETE })\npublic class PanierController {\n    private final PanierService panierService;\n\n    public PanierController(PanierService panierService) {\n        this.panierService = panierService;\n    }\n\n    @GetMapping(&quot;/all&quot;)\n    public ResponseEntity&lt;List&lt;Panier&gt;&gt; getAllPaniers(){\n        List&lt;Panier&gt; paniers = panierService.findAllPaniers();\n        return new ResponseEntity&lt;&gt;(paniers, HttpStatus.OK);\n    }\n\n    @GetMapping(&quot;/find/{id}&quot;)\n    public ResponseEntity&lt;Panier&gt; getPanierById(@PathVariable(&quot;id&quot;) Long id){\n        Panier panier = panierService.findPanierById(id);\n        return new ResponseEntity&lt;&gt;(panier, HttpStatus.OK);\n    }\n\n    @PostMapping(&quot;/add&quot;)\n    public ResponseEntity&lt;Panier&gt; addPanier(@RequestBody Panier panier){\n        Panier newPanier = panierService.addPanier(panier);\n        return new ResponseEntity&lt;&gt;(newPanier, HttpStatus.CREATED);\n    }\n\n    @PutMapping(&quot;/update&quot;)\n    public ResponseEntity&lt;Panier&gt; updatePanier(@RequestBody Panier panier){\n        Panier updatePanier = panierService.updatePanier(panier);\n        return new ResponseEntity&lt;&gt;(updatePanier, HttpStatus.OK);\n    }\n\n    @DeleteMapping(&quot;/delete/{id}&quot;)\n    public ResponseEntity&lt;?&gt; deletePanier(@PathVariable(value = &quot;id&quot;) Long id){\n        panierService.deletePanier(id);\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n    }\n\n\n}\n\n</code></pre>\n<p>CategorieController.java</p>\n<pre><code>package com.app.saveeat.controller;\n\nimport com.app.saveeat.entity.Categorie;\nimport com.app.saveeat.service.CategorieService;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n    @CrossOrigin(origins = &quot;*&quot;)\n    @RestController\n    @RequestMapping(value = &quot;/categorie&quot;)\n    public class CategorieController {\n    private final CategorieService categorieService;\n    public CategorieController(CategorieService categorieService) {\n        this.categorieService = categorieService;\n    }\n\n    @GetMapping(&quot;/all&quot;)\n    public ResponseEntity&lt;List&lt;Categorie&gt;&gt; getAllCategories(){\n        List&lt;Categorie&gt; categories = categorieService.findAllCategories();\n        return new ResponseEntity&lt;&gt;(categories, HttpStatus.OK);\n    }\n\n    @GetMapping(&quot;/find/{id}&quot;)\n    public ResponseEntity&lt;Categorie&gt; getCategorieById(@PathVariable(&quot;id&quot;) Long id){\n        Categorie categorie = categorieService.findCategorieById(id);\n        return new ResponseEntity&lt;&gt;(categorie, HttpStatus.OK);\n    }\n}\n\n\n\n</code></pre>\n<p>PanierService.java</p>\n<pre><code>package com.app.saveeat.service;\n\nimport com.app.saveeat.entity.Panier;\nimport com.app.saveeat.exception.PanierNotFoundException;\nimport com.app.saveeat.repository.PanierRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport javax.transaction.Transactional;\nimport java.util.List;\nimport java.util.UUID;\n\n@Service\n@Transactional\npublic class PanierService {\n    private final PanierRepository panierRepository;\n\n    @Autowired\n    public PanierService(PanierRepository panierRepository) {\n        this.panierRepository = panierRepository;\n    }\n\n    public Panier addPanier(Panier panier){\n        panier.setCodePanier(UUID.randomUUID().toString());\n        return panierRepository.save(panier);\n    }\n\n    public List&lt;Panier&gt; findAllPaniers(){\n        return panierRepository.findAll();\n    }\n\n    public Panier updatePanier(Panier panier){\n        return panierRepository.save(panier);\n    }\n\n    public Panier findPanierById(Long id){\n        return  panierRepository.findPanierById(id).orElseThrow(() -&gt; new PanierNotFoundException(&quot;Panier by id&quot; + id + &quot;was not found&quot;));\n    }\n\n    public void deletePanier(Long id){\n        panierRepository.deletePanierById(id);\n    }\n}\n\n\n\n</code></pre>\n<p>CategorieService.java</p>\n<pre><code>package com.app.saveeat.service;\n\nimport com.app.saveeat.entity.Categorie;\nimport com.app.saveeat.exception.CategorieNotFoundException;\nimport com.app.saveeat.repository.CategorieRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport javax.transaction.Transactional;\nimport java.util.List;\n\n@Service\n@Transactional\npublic class CategorieService {\n    private final CategorieRepository categorieRepository;\n\n    @Autowired\n    public CategorieService(CategorieRepository categorieRepository) {\n        this.categorieRepository = categorieRepository;\n    }\n\n    public List&lt;Categorie&gt; findAllCategories(){\n        return categorieRepository.findAll();\n    }\n    public Categorie findCategorieById(Long id){\n        return  categorieRepository.findCategorieById(id).orElseThrow(() -&gt; new CategorieNotFoundException(&quot;Categorie by id&quot; + id + &quot;was not found&quot;));\n    }\n}\n\n</code></pre>\n<p>postman api test\nRequest</p>\n<pre><code>{\n    &quot;nom&quot;: &quot;panier1 &quot;,\n    &quot;description&quot;: &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit&quot;,\n    &quot;prixInitial&quot;: 11,\n    &quot;prixOffre&quot;:10,\n    &quot;quantity&quot;: &quot;12&quot;,\n    &quot;dateDebut&quot;: &quot;2022-03-30T19:00:00.000Z&quot;,\n    &quot;dateFin&quot;: &quot;2022-03-30T21:30:15.000Z&quot;,\n    &quot;image&quot;: &quot;https://bootdey.com/img/Content/avatar/avatar4.png&quot;,\n    &quot;adresse&quot;: &quot;France&quot;,\n    &quot;codePanier&quot;: &quot;4570090332&quot;,\n    &quot;categorie&quot;: {\n        &quot;id&quot;: 2\n    }\n}\n</code></pre>\n<p>Response</p>\n<pre><code>{\n    &quot;nom&quot;: &quot;panier1 &quot;,\n    &quot;description&quot;: &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit&quot;,\n    &quot;prixInitial&quot;: 11,\n    &quot;prixOffre&quot;:10,\n    &quot;quantity&quot;: &quot;12&quot;,\n    &quot;dateDebut&quot;: &quot;2022-03-30T19:00:00.000Z&quot;,\n    &quot;dateFin&quot;: &quot;2022-03-30T21:30:15.000Z&quot;,\n    &quot;image&quot;: &quot;https://bootdey.com/img/Content/avatar/avatar4.png&quot;,\n    &quot;adresse&quot;: &quot;France&quot;,\n    &quot;codePanier&quot;: &quot;f4466839-c498-4c2a-b1de-48c184aed450&quot;\n}\nany help please ?\n\n</code></pre>\n"},{"tags":["java","azure","azure-blob-storage","azure-sas"],"answers":[{"tags":[],"owner":{"account_id":24903879,"reputation":81,"user_id":18774231,"display_name":"Raj"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1649869119,"creation_date":1649869119,"answer_id":71861252,"question_id":71832839,"body_markdown":"I finally found the answer, when we login with client credentials then we need to create UserDelegationKey and then use that key to get the SaS token\r\n\r\n```\r\nString tenantId = &quot;TenantId&quot;;\r\n        String clientSecret = &quot;XXXX&quot;\r\n        String clientId = &quot;abc-123&quot;\r\n\r\n        String authorityUrl = AzureAuthorityHosts.AZURE_PUBLIC_CLOUD +  tenantId;\r\n\r\n        ClientSecretCredential credential = new ClientSecretCredentialBuilder()\r\n                .authorityHost(authorityUrl)\r\n                .tenantId(tenantId)\r\n                .clientSecret(clientSecret)\r\n                .clientId(clientId)\r\n                .build();\r\n\r\n\r\n         BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\r\n                    .credential(credential)\r\n                    .endpoint(azureStorageEndPoint)\r\n                    .buildClient(); \r\n\r\n\r\n        // Upload a file            \r\n        BlobContainerClient blobContainerClient = blobServiceClient.getBlobContainerClient(containerName);            \r\n        BlobClient blobClient = blobContainerClient.getBlobClient(&quot;Test.txt&quot;);\r\n        BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(new File(&quot;&lt;FILE_PATH&gt;&quot;)));\r\n        blobClient.upload(bufferedInputStream, bufferedInputStream.available(),true);     \r\n\r\n\r\nOffsetDateTime keyStart = OffsetDateTime.now();\r\nOffsetDateTime keyExpiry = OffsetDateTime.now().plusDays(7);\r\n\r\n\r\nUserDelegationKey userDelegationKey = blobServiceClient.getUserDelegationKey(keyStart, keyExpiry);\r\n\r\n            BlobContainerSasPermission blobContainerSas = new BlobContainerSasPermission();\r\n            blobContainerSas.setReadPermission(true);\r\n            BlobServiceSasSignatureValues blobServiceSasSignatureValues = new BlobServiceSasSignatureValues(keyExpiry,\r\n                    blobContainerSas);\r\n\r\n\r\nString sas = blobClient.generateUserDelegationSas(blobServiceSasSignatureValues, userDelegationKey);\r\n\r\n\r\n```\r\n\r\n\r\n\r\n I found the answer from this link\r\n\r\nhttps://stackoverflow.com/questions/64242397/azure-sdk-for-java-how-to-setup-user-delegation-key-and-shared-authentication-si\r\n\r\n","title":"Is there a way to programmatically generate Azure SaS token for Blob container even when the user is not authenticated with SaS token java","body":"<p>I finally found the answer, when we login with client credentials then we need to create UserDelegationKey and then use that key to get the SaS token</p>\n<pre><code>String tenantId = &quot;TenantId&quot;;\n        String clientSecret = &quot;XXXX&quot;\n        String clientId = &quot;abc-123&quot;\n\n        String authorityUrl = AzureAuthorityHosts.AZURE_PUBLIC_CLOUD +  tenantId;\n\n        ClientSecretCredential credential = new ClientSecretCredentialBuilder()\n                .authorityHost(authorityUrl)\n                .tenantId(tenantId)\n                .clientSecret(clientSecret)\n                .clientId(clientId)\n                .build();\n\n\n         BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\n                    .credential(credential)\n                    .endpoint(azureStorageEndPoint)\n                    .buildClient(); \n\n\n        // Upload a file            \n        BlobContainerClient blobContainerClient = blobServiceClient.getBlobContainerClient(containerName);            \n        BlobClient blobClient = blobContainerClient.getBlobClient(&quot;Test.txt&quot;);\n        BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(new File(&quot;&lt;FILE_PATH&gt;&quot;)));\n        blobClient.upload(bufferedInputStream, bufferedInputStream.available(),true);     \n\n\nOffsetDateTime keyStart = OffsetDateTime.now();\nOffsetDateTime keyExpiry = OffsetDateTime.now().plusDays(7);\n\n\nUserDelegationKey userDelegationKey = blobServiceClient.getUserDelegationKey(keyStart, keyExpiry);\n\n            BlobContainerSasPermission blobContainerSas = new BlobContainerSasPermission();\n            blobContainerSas.setReadPermission(true);\n            BlobServiceSasSignatureValues blobServiceSasSignatureValues = new BlobServiceSasSignatureValues(keyExpiry,\n                    blobContainerSas);\n\n\nString sas = blobClient.generateUserDelegationSas(blobServiceSasSignatureValues, userDelegationKey);\n\n\n</code></pre>\n<p>I found the answer from this link</p>\n<p><a href=\"https://stackoverflow.com/questions/64242397/azure-sdk-for-java-how-to-setup-user-delegation-key-and-shared-authentication-si\">Azure sdk for Java How to Setup User Delegation Key and Shared Authentication Signatures SAS</a></p>\n"}],"owner":{"account_id":24903879,"reputation":81,"user_id":18774231,"display_name":"Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2772,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1649869119,"creation_date":1649702873,"question_id":71832839,"body_markdown":"I am authenticating my user using ClientCredentails. My client does have the permission to generate SaS token. Now I want to generate SaS token from code for a short period of time so that the customer can directly download the file.\r\n\r\n```\r\n        String tenantId = &quot;TenantId&quot;;\r\n        String clientSecret = &quot;XXXX&quot;\r\n        String clientId = &quot;abc-123&quot;\r\n\r\n        String authorityUrl = AzureAuthorityHosts.AZURE_PUBLIC_CLOUD +  tenantId;\r\n\r\n        ClientSecretCredential credential = new ClientSecretCredentialBuilder()\r\n                .authorityHost(authorityUrl)\r\n                .tenantId(tenantId)\r\n                .clientSecret(clientSecret)\r\n                .clientId(clientId)\r\n                .build();\r\n\r\n\r\n         BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\r\n                    .credential(credential)\r\n                    .endpoint(azureStorageEndPoint)\r\n                    .buildClient(); \r\n\r\n\r\n        // Upload a file            \r\n        BlobContainerClient blobContainerClient = blobServiceClient.getBlobContainerClient(containerName);            \r\n        BlobClient blobClient = blobContainerClient.getBlobClient(&quot;Test.txt&quot;);\r\n        BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(new File(&quot;&lt;FILE_PATH&gt;&quot;)));\r\n        blobClient.upload(bufferedInputStream, bufferedInputStream.available(),true);     \r\n\r\n\r\n        BlobSasPermission blobSasPermission = new BlobSasPermission().setReadPermission(true);\r\n        OffsetDateTime expiryTime = OffsetDateTime.now().plusDays(1);\r\n        BlobServiceSasSignatureValues values = new BlobServiceSasSignatureValues(expiryTime, blobSasPermission)\r\n                    .setStartTime(OffsetDateTime.now());\r\n\r\n        String generateSas = blobClient.generateSas(values);\r\n\r\n\r\n\r\n        Getting Error \r\n\r\n        java.lang.NullPointerException: The argument must not be null or an empty string. Argument name: storageSharedKeyCredentials.\r\n\r\n```\r\n\r\nTried to find some azure docs which clearly says that\r\n&quot;Client must be authenticated via StorageSharedKeyCredential&quot;\r\n\r\nhttps://learn.microsoft.com/en-us/java/api/com.azure.storage.blob.blobserviceclient.generateaccountsas?view=azure-java-stable\r\n\r\nQuestion is how to generate StorageSharedKeyCredential programmatically if your code is authenticating with different ways.","title":"Is there a way to programmatically generate Azure SaS token for Blob container even when the user is not authenticated with SaS token java","body":"<p>I am authenticating my user using ClientCredentails. My client does have the permission to generate SaS token. Now I want to generate SaS token from code for a short period of time so that the customer can directly download the file.</p>\n<pre><code>        String tenantId = &quot;TenantId&quot;;\n        String clientSecret = &quot;XXXX&quot;\n        String clientId = &quot;abc-123&quot;\n\n        String authorityUrl = AzureAuthorityHosts.AZURE_PUBLIC_CLOUD +  tenantId;\n\n        ClientSecretCredential credential = new ClientSecretCredentialBuilder()\n                .authorityHost(authorityUrl)\n                .tenantId(tenantId)\n                .clientSecret(clientSecret)\n                .clientId(clientId)\n                .build();\n\n\n         BlobServiceClient blobServiceClient = new BlobServiceClientBuilder()\n                    .credential(credential)\n                    .endpoint(azureStorageEndPoint)\n                    .buildClient(); \n\n\n        // Upload a file            \n        BlobContainerClient blobContainerClient = blobServiceClient.getBlobContainerClient(containerName);            \n        BlobClient blobClient = blobContainerClient.getBlobClient(&quot;Test.txt&quot;);\n        BufferedInputStream bufferedInputStream = new BufferedInputStream(new FileInputStream(new File(&quot;&lt;FILE_PATH&gt;&quot;)));\n        blobClient.upload(bufferedInputStream, bufferedInputStream.available(),true);     \n\n\n        BlobSasPermission blobSasPermission = new BlobSasPermission().setReadPermission(true);\n        OffsetDateTime expiryTime = OffsetDateTime.now().plusDays(1);\n        BlobServiceSasSignatureValues values = new BlobServiceSasSignatureValues(expiryTime, blobSasPermission)\n                    .setStartTime(OffsetDateTime.now());\n\n        String generateSas = blobClient.generateSas(values);\n\n\n\n        Getting Error \n\n        java.lang.NullPointerException: The argument must not be null or an empty string. Argument name: storageSharedKeyCredentials.\n\n</code></pre>\n<p>Tried to find some azure docs which clearly says that\n&quot;Client must be authenticated via StorageSharedKeyCredential&quot;</p>\n<p><a href=\"https://learn.microsoft.com/en-us/java/api/com.azure.storage.blob.blobserviceclient.generateaccountsas?view=azure-java-stable\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/java/api/com.azure.storage.blob.blobserviceclient.generateaccountsas?view=azure-java-stable</a></p>\n<p>Question is how to generate StorageSharedKeyCredential programmatically if your code is authenticating with different ways.</p>\n"},{"tags":["java","mockito"],"answers":[{"tags":[],"owner":{"account_id":446208,"reputation":8611,"user_id":839128,"accept_rate":75,"display_name":"MikeFHay"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1649869112,"creation_date":1649869112,"answer_id":71861248,"question_id":71861211,"body_markdown":"`List.of` returns an immutable list. Try copying it into an ArrayList: `expected = new ArrayList&lt;&gt;(List.of(...))`.","title":"Mockito doReturn making list immutable","body":"<p><code>List.of</code> returns an immutable list. Try copying it into an ArrayList: <code>expected = new ArrayList&lt;&gt;(List.of(...))</code>.</p>\n"}],"owner":{"account_id":144187,"reputation":7338,"user_id":353046,"accept_rate":47,"display_name":"Mankind1023"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":570,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71861248,"answer_count":1,"score":0,"last_activity_date":1649869112,"creation_date":1649868946,"question_id":71861211,"body_markdown":"I&#39;m trying to test a method like this:\r\n\r\n    public getIndustries(int countryId) {\r\n        var industryList = industryControllerService.getIndustriesByCountryId(countryId);\r\n        ...\r\n        industryList.add(new IndustryCategory(otherIndustry));\r\n    }\r\n\r\nin my test I have:\r\n\r\n    List&lt;IndustryCategory&gt; expected = List.of(industryCategory1, industryCategory2);\r\n    doReturn(expected).when(industryControllerService).getIndustriesByCountryId(anyInt());\r\n    ...\r\n\r\nBut for some reason the industryList is returned by Mockito as an immutable collection, so the add operation throws a UnsupportedOperationException.\r\n\r\nHow can I change it so that the list is a normal one that can be edited?","title":"Mockito doReturn making list immutable","body":"<p>I'm trying to test a method like this:</p>\n<pre><code>public getIndustries(int countryId) {\n    var industryList = industryControllerService.getIndustriesByCountryId(countryId);\n    ...\n    industryList.add(new IndustryCategory(otherIndustry));\n}\n</code></pre>\n<p>in my test I have:</p>\n<pre><code>List&lt;IndustryCategory&gt; expected = List.of(industryCategory1, industryCategory2);\ndoReturn(expected).when(industryControllerService).getIndustriesByCountryId(anyInt());\n...\n</code></pre>\n<p>But for some reason the industryList is returned by Mockito as an immutable collection, so the add operation throws a UnsupportedOperationException.</p>\n<p>How can I change it so that the list is a normal one that can be edited?</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":22750553,"reputation":321,"user_id":17236065,"display_name":"Pedro Luiz"},"score":0,"creation_date":1647273467,"post_id":71470430,"comment_id":126324250,"body_markdown":"It might rely on wether you are making the right usage of the @ManyToOne relationship, could you provide the code for these entities ?","body":"It might rely on wether you are making the right usage of the @ManyToOne relationship, could you provide the code for these entities ?"},{"owner":{"account_id":447545,"reputation":2029,"user_id":841221,"accept_rate":75,"display_name":"Aakash"},"score":0,"creation_date":1647275538,"post_id":71470430,"comment_id":126325051,"body_markdown":"To me, it seems your `Bar` entity is parent while `Foo` is child. Is it so?","body":"To me, it seems your <code>Bar</code> entity is parent while <code>Foo</code> is child. Is it so?"},{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1647275866,"post_id":71470430,"comment_id":126325181,"body_markdown":"If something is just codes and descriptions, it sounds like a lookup table value, not an entity. Treating it like an entity just causes complications.","body":"If something is just codes and descriptions, it sounds like a lookup table value, not an entity. Treating it like an entity just causes complications."},{"owner":{"account_id":18156839,"reputation":26,"user_id":13208746,"display_name":"TopoDiFogna"},"score":0,"creation_date":1647276100,"post_id":71470430,"comment_id":126325261,"body_markdown":"Yes it is exactly a lookup table, is there a way to code and use it without writing multiple repository and/or queries?","body":"Yes it is exactly a lookup table, is there a way to code and use it without writing multiple repository and/or queries?"}],"owner":{"account_id":18156839,"reputation":26,"user_id":13208746,"display_name":"TopoDiFogna"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1466,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649869012,"creation_date":1647272415,"question_id":71470430,"body_markdown":"I&#39;m currently implementing a Springboot Microservice where the underlying database has a structure like the following one:\r\n * A primary Entity (let&#39;s call it `Foo`) which has it&#39;s own ID, some attributes and a attribute which is a ForeignKey to another Entity (`Bar`), let&#39;s call this attribute `foreignKeyBarId`.\r\n * A child entity `Bar` which has it&#39;s own id, the one referenced by `Foo` and another field. This entity must not have inserts or updates via the microservice since it is maintained externally and has just codes and descriptions which change once every many years.\r\n\r\nWhen I want to read `Foo` via a Spring repository, implementing my repository which extends in example `JpaRepository`, I want to retrieve also the second attribute of `Bar` and this can be easily achieved by specifying the correct relationships between the entities via, like in my case, `@ManyToOne` annotation on `foreignKeyBarId` in `Foo`.\r\n\r\nThe big problem arises when I want to insert or update a Foo Object. In this case if the value in the `foreignKeyBarId` attribute is correct everything goes well, but if a &quot;wrong&quot; value is inserted a `InvalidDataAccessApiUsageException` is thrown.\r\n\r\nI&#39;ve already tried with `@Immutable` annotation from hibernate on `Bar` entity but it just avoids updates queries on `Bar` entity.\r\n\r\nIs there an easy way to solve this issue?\r\n\r\nEDIT: cannot share the actual code but the issue can be seen using the following entities\r\n```\r\n@Data\r\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n@Entity\r\n@Immutable\r\n@Table(name = &quot;bar&quot;)\r\npublic class BarEntity {\r\n\r\n    @Id\r\n    @EqualsAndHashCode.Include\r\n    @Column(name = &quot;id&quot;)\r\n    private String id;\r\n\r\n    @Column(name = &quot;description&quot;, insertable = false, updatable = false)\r\n    private String desc;\r\n}\r\n```\r\n\r\n```\r\n@Data\r\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\r\n@Entity\r\n@Table(name = &quot;foo&quot;)\r\npublic class FooEntity {\r\n\r\n    @Id\r\n    @EqualsAndHashCode.Include\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;some_attribute&quot;)\r\n    private String someAttribute;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;bar_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false)\r\n    private BarEntity bar;\r\n}\r\n```\r\n\r\nThis means that `Bar` entity is mapped to a lookup table that the microservice will only read when reading the `Foo` entity, but it will never get written to by the microservice.\r\n\r\nAdditionally when creating a `Foo` inside the database either the Bar is null or it must actually be mapped to one entry that is already existing.","title":"Spring Data JPA and Read-Only Entities","body":"<p>I'm currently implementing a Springboot Microservice where the underlying database has a structure like the following one:</p>\n<ul>\n<li>A primary Entity (let's call it <code>Foo</code>) which has it's own ID, some attributes and a attribute which is a ForeignKey to another Entity (<code>Bar</code>), let's call this attribute <code>foreignKeyBarId</code>.</li>\n<li>A child entity <code>Bar</code> which has it's own id, the one referenced by <code>Foo</code> and another field. This entity must not have inserts or updates via the microservice since it is maintained externally and has just codes and descriptions which change once every many years.</li>\n</ul>\n<p>When I want to read <code>Foo</code> via a Spring repository, implementing my repository which extends in example <code>JpaRepository</code>, I want to retrieve also the second attribute of <code>Bar</code> and this can be easily achieved by specifying the correct relationships between the entities via, like in my case, <code>@ManyToOne</code> annotation on <code>foreignKeyBarId</code> in <code>Foo</code>.</p>\n<p>The big problem arises when I want to insert or update a Foo Object. In this case if the value in the <code>foreignKeyBarId</code> attribute is correct everything goes well, but if a &quot;wrong&quot; value is inserted a <code>InvalidDataAccessApiUsageException</code> is thrown.</p>\n<p>I've already tried with <code>@Immutable</code> annotation from hibernate on <code>Bar</code> entity but it just avoids updates queries on <code>Bar</code> entity.</p>\n<p>Is there an easy way to solve this issue?</p>\n<p>EDIT: cannot share the actual code but the issue can be seen using the following entities</p>\n<pre><code>@Data\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@Entity\n@Immutable\n@Table(name = &quot;bar&quot;)\npublic class BarEntity {\n\n    @Id\n    @EqualsAndHashCode.Include\n    @Column(name = &quot;id&quot;)\n    private String id;\n\n    @Column(name = &quot;description&quot;, insertable = false, updatable = false)\n    private String desc;\n}\n</code></pre>\n<pre><code>@Data\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@Entity\n@Table(name = &quot;foo&quot;)\npublic class FooEntity {\n\n    @Id\n    @EqualsAndHashCode.Include\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;some_attribute&quot;)\n    private String someAttribute;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;bar_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false)\n    private BarEntity bar;\n}\n</code></pre>\n<p>This means that <code>Bar</code> entity is mapped to a lookup table that the microservice will only read when reading the <code>Foo</code> entity, but it will never get written to by the microservice.</p>\n<p>Additionally when creating a <code>Foo</code> inside the database either the Bar is null or it must actually be mapped to one entry that is already existing.</p>\n"},{"tags":["java","split"],"comments":[{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":2,"creation_date":1565025773,"post_id":57363297,"comment_id":101213158,"body_markdown":"Why not just make it `1_d` or `15_m` and just make life easy? (split on the separator)","body":"Why not just make it <code>1_d</code> or <code>15_m</code> and just make life easy? (split on the separator)"},{"owner":{"account_id":13862425,"reputation":409,"user_id":10007759,"display_name":"Jacob"},"score":0,"creation_date":1565025914,"post_id":57363297,"comment_id":101213203,"body_markdown":"Because this is an extensive project and I need to parse for all possible dates, so I do it by number. E.g `20w` is 20 weeks, and `210w` is 210 weeks. I can&#39;t just parse for certain steps.","body":"Because this is an extensive project and I need to parse for all possible dates, so I do it by number. E.g <code>20w</code> is 20 weeks, and <code>210w</code> is 210 weeks. I can&#39;t just parse for certain steps."},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1565025976,"post_id":57363297,"comment_id":101213224,"body_markdown":"I meant take your input with a separator being `_` then use `.split(&#39;_&#39;)`.  You would take it as `20_w` and the array would contain `{20, w}` after the split.","body":"I meant take your input with a separator being <code>_</code> then use <code>.split(&#39;_&#39;)</code>.  You would take it as <code>20_w</code> and the array would contain <code>{20, w}</code> after the split."},{"owner":{"account_id":13862425,"reputation":409,"user_id":10007759,"display_name":"Jacob"},"score":0,"creation_date":1565026015,"post_id":57363297,"comment_id":101213244,"body_markdown":"That is a good idea, but I don&#39;t want to have a specific seperator, but rather keep the argument to the smallest possible size.","body":"That is a good idea, but I don&#39;t want to have a specific seperator, but rather keep the argument to the smallest possible size."},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1565026488,"post_id":57363297,"comment_id":101213425,"body_markdown":"Is the second argument always 1 letter or can it be larger? (the `w` or `d`)","body":"Is the second argument always 1 letter or can it be larger? (the <code>w</code> or <code>d</code>)"}],"answers":[{"tags":[],"owner":{"account_id":13426653,"reputation":643,"user_id":9687785,"display_name":"omoshiroiii"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1565026468,"creation_date":1565026017,"answer_id":57363392,"question_id":57363297,"body_markdown":"    private void myMethod() {\r\n\t\tString integers = &quot;&quot;;\r\n\t\tString characters = &quot;&quot;;\r\n\t\tString splitArgument = &quot;&quot;; //this is the 1d or 11d part\r\n\t\tfor(int x = 0; x &lt; splitArgument.length(); x++) {\r\n            Char currentChar = splitArgument.charAt(x);\r\n\t\t\tif(Character.isDigit(currentChar)) {\r\n\t\t\t\tintegers += currentChar;\r\n\t\t\t}else {\r\n\t\t\t\tcharacters += currentChar;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nWhere myMethod just represents the area of the code you are analyzing the input in. You can create a method (as isInteger()) that takes the characters from the String you are checking and determines whether they are Integers/String and re-concatenate Strings for them. For the integer part you could then do:\r\n\r\n    int myInteger = Integer.parseInt(integers);","title":"How can I split a string by it&#39;s datatype in java?","body":"<pre><code>private void myMethod() {\n    String integers = \"\";\n    String characters = \"\";\n    String splitArgument = \"\"; //this is the 1d or 11d part\n    for(int x = 0; x &lt; splitArgument.length(); x++) {\n        Char currentChar = splitArgument.charAt(x);\n        if(Character.isDigit(currentChar)) {\n            integers += currentChar;\n        }else {\n            characters += currentChar;\n        }\n    }\n}\n</code></pre>\n\n<p>Where myMethod just represents the area of the code you are analyzing the input in. You can create a method (as isInteger()) that takes the characters from the String you are checking and determines whether they are Integers/String and re-concatenate Strings for them. For the integer part you could then do:</p>\n\n<pre><code>int myInteger = Integer.parseInt(integers);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649868907,"creation_date":1565026037,"answer_id":57363395,"question_id":57363297,"body_markdown":"Use a Regex.\r\n\r\n    import java.util.regex.*;\r\n\r\n---\r\n\r\n    Pattern pattern = Pattern.compile(&quot;(\\\\d+)([a-zA-Z]+)&quot;);\r\n    Matcher matcher = pattern.matcher(text);\r\n    if(matcher.find()){\r\n        String number = matcher.group(1);\r\n        String letters = matcher.group(2);\r\n    }\r\n\r\n\r\n","title":"How can I split a string by it&#39;s datatype in java?","body":"<p>Use a Regex.</p>\n<pre><code>import java.util.regex.*;\n</code></pre>\n<hr />\n<pre><code>Pattern pattern = Pattern.compile(&quot;(\\\\d+)([a-zA-Z]+)&quot;);\nMatcher matcher = pattern.matcher(text);\nif(matcher.find()){\n    String number = matcher.group(1);\n    String letters = matcher.group(2);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565026849,"creation_date":1565026849,"answer_id":57363612,"question_id":57363297,"body_markdown":"You can simply do this on the condition that the `date` argument is always a single `character` at the end of the `String`.\r\n\r\n\tpublic static String[] splitDate(String date)\r\n\t{\r\n\t\tint length = date.length();\r\n\t\tString[] results = {date.substring(0, length - 1), date.substring(length - 1)};\r\n\t\treturn results;\r\n\t}\r\n\r\nInput of `110w` will return an array of `{110, w}`.\r\n\r\nThis method just uses `substring` based on the length of `String` and separates the number from the final character.","title":"How can I split a string by it&#39;s datatype in java?","body":"<p>You can simply do this on the condition that the <code>date</code> argument is always a single <code>character</code> at the end of the <code>String</code>.</p>\n\n<pre><code>public static String[] splitDate(String date)\n{\n    int length = date.length();\n    String[] results = {date.substring(0, length - 1), date.substring(length - 1)};\n    return results;\n}\n</code></pre>\n\n<p>Input of <code>110w</code> will return an array of <code>{110, w}</code>.</p>\n\n<p>This method just uses <code>substring</code> based on the length of <code>String</code> and separates the number from the final character.</p>\n"}],"owner":{"account_id":13862425,"reputation":409,"user_id":10007759,"display_name":"Jacob"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":496,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57363392,"answer_count":3,"score":1,"last_activity_date":1649868907,"creation_date":1565025513,"question_id":57363297,"body_markdown":"In my plugin for Spigot, a player enters a command such as `/logging chat clear 1d`. The argument number 2 (3rd arg) which is `1d` needs to be parsed for date (e.g. 1d = 1 day, 15m = 15 minutes). I&#39;ve figured out the parsing part, but when I try to parse more than one number (1 vs 11) my parsing doesn&#39;t work because I split based on characters, not based on if its an integer or string. I do `String[] part = arg3.split(&quot;&quot;);` then take the first character as the number and second as the string. \r\n**How can I do this but split so that I can have multiple numbers? (regex?)**","title":"How can I split a string by it&#39;s datatype in java?","body":"<p>In my plugin for Spigot, a player enters a command such as <code>/logging chat clear 1d</code>. The argument number 2 (3rd arg) which is <code>1d</code> needs to be parsed for date (e.g. 1d = 1 day, 15m = 15 minutes). I've figured out the parsing part, but when I try to parse more than one number (1 vs 11) my parsing doesn't work because I split based on characters, not based on if its an integer or string. I do <code>String[] part = arg3.split(\"\");</code> then take the first character as the number and second as the string. \n<strong>How can I do this but split so that I can have multiple numbers? (regex?)</strong></p>\n"},{"tags":["java","gradle","intellij-idea"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1596639036,"post_id":63267523,"comment_id":111876798,"body_markdown":"Is this only happening in debug mode? Or also when you print this to the output?","body":"Is this only happening in debug mode? Or also when you print this to the output?"},{"owner":{"account_id":18677031,"reputation":91,"user_id":13614483,"display_name":"Mr. Onion"},"score":0,"creation_date":1596639166,"post_id":63267523,"comment_id":111876872,"body_markdown":"Only when debugging + when i try to use the string somewhere (send it through through some APIs). Console output is ok","body":"Only when debugging + when i try to use the string somewhere (send it through through some APIs). Console output is ok"}],"answers":[{"tags":[],"owner":{"account_id":24922565,"reputation":11,"user_id":18790680,"display_name":"user18790680"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649868270,"creation_date":1649836467,"answer_id":71853850,"question_id":63267523,"body_markdown":"Just change all encodings into `UTF-8` (or other preferable encoding) and reload all java files into `UTF-8`. \r\n\r\nYou must know  how to do first part (if you don&#39;t: `File(top left corner of your window)&gt;Settings&gt;Editor&gt;File Encodings`). \r\n\r\nThe second part is also easy: just click on encoding in bottom right corner of the window and choose `UTF-8` (or other preferable encoding). \r\n\r\nThen you will have window like shown below. Choose &quot;Reload&quot; and enjoy. If you still have questions you are free to ask.\r\n\r\nHere better description: https://www.jetbrains.com/help/idea/encoding.html\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rWA6b.png","title":"No cyrillic symbols in a string in IntelliJ IDEA","body":"<p>Just change all encodings into <code>UTF-8</code> (or other preferable encoding) and reload all java files into <code>UTF-8</code>.</p>\n<p>You must know  how to do first part (if you don't: <code>File(top left corner of your window)&gt;Settings&gt;Editor&gt;File Encodings</code>).</p>\n<p>The second part is also easy: just click on encoding in bottom right corner of the window and choose <code>UTF-8</code> (or other preferable encoding).</p>\n<p>Then you will have window like shown below. Choose &quot;Reload&quot; and enjoy. If you still have questions you are free to ask.</p>\n<p>Here better description: <a href=\"https://www.jetbrains.com/help/idea/encoding.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/encoding.html</a></p>\n<p><a href=\"https://i.stack.imgur.com/rWA6b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rWA6b.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":18677031,"reputation":91,"user_id":13614483,"display_name":"Mr. Onion"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":779,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1649868270,"creation_date":1596638247,"question_id":63267523,"body_markdown":"i&#39;ve started developing in IntelliJ in Java, created a new gradle project, added a few libraries but encountered a problem that a string is not being filled with cyrillic symbols - instead i get incorrect symbols (screenshot attached). How can i fix it? It has something to do with encodings - I tried a lot of suggestions on the web but nothing helped. Cheers! [![here is the image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HVsWw.jpg","title":"No cyrillic symbols in a string in IntelliJ IDEA","body":"<p>i've started developing in IntelliJ in Java, created a new gradle project, added a few libraries but encountered a problem that a string is not being filled with cyrillic symbols - instead i get incorrect symbols (screenshot attached). How can i fix it? It has something to do with encodings - I tried a lot of suggestions on the web but nothing helped. Cheers! <a href=\"https://i.stack.imgur.com/HVsWw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HVsWw.jpg\" alt=\"here is the image\" /></a></p>\n"},{"tags":["java","spring-boot","jackson-dataformat-xml"],"owner":{"account_id":18528230,"reputation":11,"user_id":13499652,"display_name":"nhs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1649868265,"creation_date":1649868265,"question_id":71861063,"body_markdown":"I need to add namespace as an empty value when responding in xml in springboot.\r\n\r\nThe value of namespace should be empty (&lt;test_response xmlns=&quot;&quot;&gt;).\r\n\r\nHowever, when the code below is executed, the namespace is not displayed.\r\n\r\nIf you know how to display namespace, please reply.\r\n\r\nTestResponse.java\r\n```\r\n@JacksonXmlRootElement(localName = &quot;test_response&quot;, namespace = &quot;&quot;)\r\npublic class TestResponse {\r\n    private String code;\r\n    private String message;\r\n\r\n    public TestResponse() {\r\n    }\r\n\r\n    public TestResponse(String code, String message) {\r\n        this.code = code;\r\n        this.message = message;\r\n    }\r\n\r\n    public String getCode() {\r\n        return code;\r\n    }\r\n\r\n    public void setCode(String code) {\r\n        this.code = code;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }\r\n}\r\n```\r\n\r\nTestController.java\r\n```\r\n@RestController\r\npublic class TestController {\r\n\r\n    @PostMapping(value =&quot;/test&quot;, consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE, produces = MediaType.TEXT_XML_VALUE)\r\n    public ResponseEntity&lt;TestResponse&gt; test() {\r\n\r\n        TestResponse body = new TestResponse(&quot;0000&quot;,&quot;SUCCESS&quot;);\r\n        return ResponseEntity.ok(body);\r\n    }\r\n}\r\n```\r\n\r\nbuild.gradle\r\n```\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;2.5.11&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    id &#39;java&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;11&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation group: &#39;com.fasterxml.jackson.dataformat&#39;, name: &#39;jackson-dataformat-xml&#39;, version: &#39;2.10.3&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nThe response I want to send\r\n```\r\n&lt;test_response xmlns=&quot;&quot;&gt;\r\n    &lt;code&gt;0000&lt;/code&gt;\r\n    &lt;message&gt;SUCCESS&lt;/message&gt;\r\n&lt;/test_response&gt;\r\n```\r\n\r\nCurrent Response\r\n```\r\n&lt;test_response&gt;\r\n    &lt;code&gt;0000&lt;/code&gt;\r\n    &lt;message&gt;SUCCESS&lt;/message&gt;\r\n&lt;/test_response&gt;\r\n```","title":"Send XML with namespace to REST controller in SpringBoot","body":"<p>I need to add namespace as an empty value when responding in xml in springboot.</p>\n<p>The value of namespace should be empty (&lt;test_response xmlns=&quot;&quot;&gt;).</p>\n<p>However, when the code below is executed, the namespace is not displayed.</p>\n<p>If you know how to display namespace, please reply.</p>\n<p>TestResponse.java</p>\n<pre><code>@JacksonXmlRootElement(localName = &quot;test_response&quot;, namespace = &quot;&quot;)\npublic class TestResponse {\n    private String code;\n    private String message;\n\n    public TestResponse() {\n    }\n\n    public TestResponse(String code, String message) {\n        this.code = code;\n        this.message = message;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n}\n</code></pre>\n<p>TestController.java</p>\n<pre><code>@RestController\npublic class TestController {\n\n    @PostMapping(value =&quot;/test&quot;, consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE, produces = MediaType.TEXT_XML_VALUE)\n    public ResponseEntity&lt;TestResponse&gt; test() {\n\n        TestResponse body = new TestResponse(&quot;0000&quot;,&quot;SUCCESS&quot;);\n        return ResponseEntity.ok(body);\n    }\n}\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.5.11'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '11'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-xml', version: '2.10.3'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>The response I want to send</p>\n<pre><code>&lt;test_response xmlns=&quot;&quot;&gt;\n    &lt;code&gt;0000&lt;/code&gt;\n    &lt;message&gt;SUCCESS&lt;/message&gt;\n&lt;/test_response&gt;\n</code></pre>\n<p>Current Response</p>\n<pre><code>&lt;test_response&gt;\n    &lt;code&gt;0000&lt;/code&gt;\n    &lt;message&gt;SUCCESS&lt;/message&gt;\n&lt;/test_response&gt;\n</code></pre>\n"},{"tags":["java","spring","database","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":17193868,"reputation":88,"user_id":12447105,"display_name":"SD33N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649858666,"creation_date":1649858666,"answer_id":71858860,"question_id":71858685,"body_markdown":"`@RequestBody` annotated parameter is expected to hold the entire body of the request and bind to one object.\r\n\r\nWhat you can do is make a new model such as EnrollmentObject and have the ID of the course and the ID of the student in there. Then, you can have `@RequestBody EnrollmentObject enrollmentObject`.\r\n\r\nYou should obviously go with another model name, but you get the point! ;-)","title":"How To Pass Two @RequestBody from Postman (springboot)","body":"<p><code>@RequestBody</code> annotated parameter is expected to hold the entire body of the request and bind to one object.</p>\n<p>What you can do is make a new model such as EnrollmentObject and have the ID of the course and the ID of the student in there. Then, you can have <code>@RequestBody EnrollmentObject enrollmentObject</code>.</p>\n<p>You should obviously go with another model name, but you get the point! ;-)</p>\n"},{"tags":[],"owner":{"account_id":2848514,"reputation":10932,"user_id":2446208,"accept_rate":69,"display_name":"blacktide"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649861506,"creation_date":1649861506,"answer_id":71859568,"question_id":71858685,"body_markdown":"You can define your request body as an array like the following:\r\n\r\n```\r\npublic ResponseEntity&lt;String&gt; enroll(@RequestBody Course[] courses) {\r\n    // use courses array here\r\n}\r\n```","title":"How To Pass Two @RequestBody from Postman (springboot)","body":"<p>You can define your request body as an array like the following:</p>\n<pre><code>public ResponseEntity&lt;String&gt; enroll(@RequestBody Course[] courses) {\n    // use courses array here\n}\n</code></pre>\n"}],"owner":{"account_id":24344471,"reputation":3,"user_id":18281338,"display_name":"Abdelrahman Amr Attia Ewais"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2059,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71858860,"answer_count":2,"score":0,"last_activity_date":1649868183,"creation_date":1649857937,"question_id":71858685,"body_markdown":"My Controller: \r\n[enter image description here][1]\r\n\r\npostman request body is:\r\n```\r\n[\r\n    {\r\n        &quot;id&quot;: &quot;PG&quot;\r\n    },\r\n    {\r\n        &quot;id&quot;: &quot;123456&quot;\r\n    }\r\n]\r\n```\r\n\r\nError: [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `Course` from Array value (token `JsonToken.START_ARRAY`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `Course` from Array value (token `JsonToken.START_ARRAY`)&lt;EOL&gt; at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c1Ndr.png","title":"How To Pass Two @RequestBody from Postman (springboot)","body":"<p>My Controller:\n<a href=\"https://i.stack.imgur.com/c1Ndr.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>postman request body is:</p>\n<pre><code>[\n    {\n        &quot;id&quot;: &quot;PG&quot;\n    },\n    {\n        &quot;id&quot;: &quot;123456&quot;\n    }\n]\n</code></pre>\n<p>Error: [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type <code>Course</code> from Array value (token <code>JsonToken.START_ARRAY</code>); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type <code>Course</code> from Array value (token <code>JsonToken.START_ARRAY</code>) at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream);</p>\n"},{"tags":["java","spring","spring-boot","jpa","oracle19c"],"comments":[{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1649790120,"post_id":71847711,"comment_id":126963956,"body_markdown":"Can you provide an example for such an exception and the line where it occurs?","body":"Can you provide an example for such an exception and the line where it occurs?"},{"owner":{"account_id":18577796,"reputation":11,"user_id":13538009,"display_name":"Mistborn"},"score":0,"creation_date":1649790980,"post_id":71847711,"comment_id":126964174,"body_markdown":"@LajosArpad I updated with exception","body":"@LajosArpad I updated with exception"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1649838175,"post_id":71847711,"comment_id":126974324,"body_markdown":"Thank you! Which line is throwing the exception?","body":"Thank you! Which line is throwing the exception?"},{"owner":{"account_id":18577796,"reputation":11,"user_id":13538009,"display_name":"Mistborn"},"score":0,"creation_date":1649868036,"post_id":71847711,"comment_id":126986619,"body_markdown":"This line context = connect(user, password);","body":"This line context = connect(user, password);"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1649927218,"post_id":71847711,"comment_id":127000349,"body_markdown":"You can wrap a `try`-`catch` around it. Have you tried doing so?","body":"You can wrap a <code>try</code>-<code>catch</code> around it. Have you tried doing so?"}],"answers":[{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649802148,"creation_date":1649792893,"answer_id":71848360,"question_id":71847711,"body_markdown":"The simplest approach would be a try catch statement since the Stacktrace for the exception is missing in your question I ave to guess that your exception is thrown in line \r\n\r\n    context = connect(user, password);//where authentication did\r\n    \r\nA solution would then be \r\n    \r\n    try {\r\n\t\tcontext = connect(user, password);//where authentication did\r\n\t} catch (AuthenticationException e) {\r\n\t\tlog.error(&quot;User could not autheticate&quot;);\r\n\t\tsomeRepository.save(CustomErrorObject);\r\n\t\tsomeOtherCustomSaveMethod();\r\n\t\tthrow e;\r\n\t}\r\n\r\nthe error behavior is still the same since the exception is re thrown in the catch statement, but the save code before can be executed. ","title":"How I can save information when I get exception in jpa","body":"<p>The simplest approach would be a try catch statement since the Stacktrace for the exception is missing in your question I ave to guess that your exception is thrown in line</p>\n<pre><code>context = connect(user, password);//where authentication did\n</code></pre>\n<p>A solution would then be</p>\n<pre><code>try {\n    context = connect(user, password);//where authentication did\n} catch (AuthenticationException e) {\n    log.error(&quot;User could not autheticate&quot;);\n    someRepository.save(CustomErrorObject);\n    someOtherCustomSaveMethod();\n    throw e;\n}\n</code></pre>\n<p>the error behavior is still the same since the exception is re thrown in the catch statement, but the save code before can be executed.</p>\n"}],"owner":{"account_id":18577796,"reputation":11,"user_id":13538009,"display_name":"Mistborn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":557,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649868123,"creation_date":1649789241,"question_id":71847711,"body_markdown":"I&#39;ve project with spring, spring-boot and JPA.\r\nWhen a user tries to log in I want to register activity in a binnacle.\r\nThe authentication is with LDAP\r\nI have a new class called LoginActivity and implement an interface with only one method to save activity with annotation @Component and my method where a want to save information when user put credentials wrong I have annotation \r\n\r\n@Transactional(propagation = Propagation.REQUIRES_NEW)\r\nAnd I have another method where I try to save information in my database\r\nI debug my code and it looks good and the process finished well.\r\nBut when I saw my database I don&#39;t see anything\r\nI use DTO objects between classes\r\n\r\nMy method authentication:\r\n``` java\r\n    @Override\r\n    @Transactional\r\n    public Authentication authenticate(Authentication authentication) {\r\n        String name = authentication.getName();\r\n        String password = authentication.getCredentials().toString();\r\n        List&lt;GrantedAuthority&gt; authorities = (List&lt;GrantedAuthority&gt;) authentication.getAuthorities();\r\n        ...\r\n       context = connect(user, password);//where authentication did\r\n```\r\nMy DTO class, I use lombok\r\n``` java\r\n    @Data\r\n    @Builder\r\n    public class LoginDTO {\r\n    \r\n        private String user;\r\n        private String tracking;\r\n        private Map&lt;String, Boolean&gt; roles;\r\n        private String name;\r\n        private String lastName;\r\n        private boolean loginSuccess;\r\n        private String ipAddress;\r\n    }\r\n```\r\nI set every value in my class DTO\r\n``` java\r\n    LoginDTO loginDTO = LoginDTO.builder()\r\n                            .loginSuccess(true)\r\n                            .tracking(tracking)\r\n                            .lastName(lastName)\r\n                            .name(name)\r\n                            .roles(roles)\r\n                            .user(user)\r\n                            .ipAddress(httpServletRequest.getRemoteAddr())\r\n                            .build();\r\n                    loginActivity.saveLoginActivity(LoginDTO);\r\n```\r\nMy interface\r\n``` java\r\n    @FunctionalInterface\r\n    public interface LoginActivity {\r\n    \r\n        public void saveLoginActivity(LoginDTO loginDTO);\r\n    \r\n    }\r\n```\r\nMy class than implement interface\r\n``` java\r\n    @Component\r\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n    public class LoginActivityImpl implements LoginActivity {\r\n```\r\nMy entity\r\n``` java\r\n    @Entity(name = &quot;activity_desk_control&quot;)\r\n    @Setter\r\n    @Getter\r\n    public class ActivityDeskControlEntity {\r\n    \r\n        @Id\r\n        @GeneratedValue(generator = &quot;uuid&quot;)\r\n        @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\r\n        @Basic(optional = false)\r\n        @Size(max = 255)\r\n        @Column(name = &quot;id&quot;)\r\n        private String id;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;id_user_desk&quot;)\r\n        private DeskUserLogEntity idUserDesk;\r\n    \r\n        @Column(name = &quot;creation_date&quot;)\r\n        private Date creationDate;\r\n    \r\n        @Column(name = &quot;id_tracking&quot;)\r\n        private String idTracking;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;id_service_desk_control&quot;)\r\n        private ServiceDeskControlEntity idServiceDeskControl;\r\n    \r\n        @Column(name = &quot;params&quot;)\r\n        @Lob\r\n        private String params;\r\n    \r\n        @Column(name = &quot;url&quot;)\r\n        private String url;\r\n    \r\n        @Column(name = &quot;ip_address&quot;)\r\n        private String ipAddress;\r\n    \r\n        @Column(name = &quot;login_success&quot;)\r\n        private int loginSuccess;\r\n    \r\n        @Column(name = &quot;logout&quot;)\r\n        private int logout;\r\n    \r\n        @Column(name = &quot;logout_date&quot;)\r\n        private Date logoutDate;\r\n\r\n    }\r\n```\r\nMy method where I save activity if authentication was well\r\n``` java\r\npublic void saveMultipart(ActivityDeskControlEntity activityDeskControlEntity) {\r\n        this.activityDeskControlRepository.save(activityDeskControlEntity);\r\n    }\r\n```\r\nMy method where I save activity if authentication was wrong\r\n``` java\r\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    public SimpleResponse saveMultipartLoginFail(ActivityDeskControlEntity activityDeskControlEntity) {\r\n        this.activityDeskControlRepository.save(activityDeskControlEntity);\r\n    }\r\n```\r\nHave you some idea how I can save information if I got an exception in JPA?\r\nI look some links like [this][1] but not work.\r\nMy database is Oracle 19c\r\n\r\nUpdate 1\r\nThe exception I get when I put credentials wrong is\r\n\r\njavax.naming.AuthenticationException: [LDAP: error code 49 - Invalid Credentials]\r\n\r\nIn this scenario I want to save information the login fail.\r\n\r\nUpdate 2\r\n\r\nIn the scenario that throws an exception is \r\n\r\ncontext = connect(user, password);\r\n\r\nFor default LDAP throw an exception when user and password are wrong in consequence in this exception I want to save.\r\n\r\nUpdate 3\r\n\r\nI saw in [documentation][2] says:\r\n\r\n&gt; Any RuntimeException or Error triggers rollback, and any checked\r\n&gt; Exception does not.\r\n\r\nWhen the user put credentials wrong throw an exception that extends RuntimeException\r\n``` java\r\n    import org.springframework.security.core.AuthenticationException;\r\n    \r\n    /**\r\n     * Thrown if an authentication request is rejected because the credentials are invalid.\r\n     * For this exception to be thrown, it means the account is neither locked nor disabled.\r\n     *\r\n     * @author Ben Alex\r\n     */\r\n    public class BadCredentialsException extends AuthenticationException {\r\n    \t// ~ Constructors\r\n    \t// ===================================================================================================\r\n    \r\n    \t/**\r\n    \t * Constructs a &lt;code&gt;BadCredentialsException&lt;/code&gt; with the specified message.\r\n    \t *\r\n    \t * @param msg the detail message\r\n    \t */\r\n    \tpublic BadCredentialsException(String msg) {\r\n    \t\tsuper(msg);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Constructs a &lt;code&gt;BadCredentialsException&lt;/code&gt; with the specified message and\r\n    \t * root cause.\r\n    \t *\r\n    \t * @param msg the detail message\r\n    \t * @param t root cause\r\n    \t */\r\n    \tpublic BadCredentialsException(String msg, Throwable t) {\r\n    \t\tsuper(msg, t);\r\n    \t}\r\n    }\r\n\r\n    /**\r\n     * Abstract superclass for all exceptions related to an {@link Authentication} object\r\n     * being invalid for whatever reason.\r\n     *\r\n     * @author Ben Alex\r\n     */\r\n    public abstract class AuthenticationException extends RuntimeException {\r\n    \r\n    \t// ~ Constructors\r\n    \t// ===================================================================================================\r\n    \r\n    \t/**\r\n    \t * Constructs an {@code AuthenticationException} with the specified message and root\r\n    \t * cause.\r\n    \t *\r\n    \t * @param msg the detail message\r\n    \t * @param t the root cause\r\n    \t */\r\n    \tpublic AuthenticationException(String msg, Throwable t) {\r\n    \t\tsuper(msg, t);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Constructs an {@code AuthenticationException} with the specified message and no\r\n    \t * root cause.\r\n    \t *\r\n    \t * @param msg the detailed message\r\n    \t */\r\n    \tpublic AuthenticationException(String msg) {\r\n    \t\tsuper(msg);\r\n    \t}\r\n    \r\n    }\r\n```\r\nI tried to change type of exception, but I couldn&#39;t, why? spring security to expected BadCredentialsException and not my own BadCredentialsException.\r\n\r\nAre there any way to achieve that?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/40605834/spring-jparepositroy-save-does-not-appear-to-throw-exception-on-duplicate-save\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction-declarative-annotations","title":"How I can save information when I get exception in jpa","body":"<p>I've project with spring, spring-boot and JPA.\nWhen a user tries to log in I want to register activity in a binnacle.\nThe authentication is with LDAP\nI have a new class called LoginActivity and implement an interface with only one method to save activity with annotation @Component and my method where a want to save information when user put credentials wrong I have annotation</p>\n<p>@Transactional(propagation = Propagation.REQUIRES_NEW)\nAnd I have another method where I try to save information in my database\nI debug my code and it looks good and the process finished well.\nBut when I saw my database I don't see anything\nI use DTO objects between classes</p>\n<p>My method authentication:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @Transactional\n    public Authentication authenticate(Authentication authentication) {\n        String name = authentication.getName();\n        String password = authentication.getCredentials().toString();\n        List&lt;GrantedAuthority&gt; authorities = (List&lt;GrantedAuthority&gt;) authentication.getAuthorities();\n        ...\n       context = connect(user, password);//where authentication did\n</code></pre>\n<p>My DTO class, I use lombok</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Data\n    @Builder\n    public class LoginDTO {\n    \n        private String user;\n        private String tracking;\n        private Map&lt;String, Boolean&gt; roles;\n        private String name;\n        private String lastName;\n        private boolean loginSuccess;\n        private String ipAddress;\n    }\n</code></pre>\n<p>I set every value in my class DTO</p>\n<pre class=\"lang-java prettyprint-override\"><code>    LoginDTO loginDTO = LoginDTO.builder()\n                            .loginSuccess(true)\n                            .tracking(tracking)\n                            .lastName(lastName)\n                            .name(name)\n                            .roles(roles)\n                            .user(user)\n                            .ipAddress(httpServletRequest.getRemoteAddr())\n                            .build();\n                    loginActivity.saveLoginActivity(LoginDTO);\n</code></pre>\n<p>My interface</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @FunctionalInterface\n    public interface LoginActivity {\n    \n        public void saveLoginActivity(LoginDTO loginDTO);\n    \n    }\n</code></pre>\n<p>My class than implement interface</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Component\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    public class LoginActivityImpl implements LoginActivity {\n</code></pre>\n<p>My entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Entity(name = &quot;activity_desk_control&quot;)\n    @Setter\n    @Getter\n    public class ActivityDeskControlEntity {\n    \n        @Id\n        @GeneratedValue(generator = &quot;uuid&quot;)\n        @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\n        @Basic(optional = false)\n        @Size(max = 255)\n        @Column(name = &quot;id&quot;)\n        private String id;\n    \n        @ManyToOne\n        @JoinColumn(name = &quot;id_user_desk&quot;)\n        private DeskUserLogEntity idUserDesk;\n    \n        @Column(name = &quot;creation_date&quot;)\n        private Date creationDate;\n    \n        @Column(name = &quot;id_tracking&quot;)\n        private String idTracking;\n    \n        @ManyToOne\n        @JoinColumn(name = &quot;id_service_desk_control&quot;)\n        private ServiceDeskControlEntity idServiceDeskControl;\n    \n        @Column(name = &quot;params&quot;)\n        @Lob\n        private String params;\n    \n        @Column(name = &quot;url&quot;)\n        private String url;\n    \n        @Column(name = &quot;ip_address&quot;)\n        private String ipAddress;\n    \n        @Column(name = &quot;login_success&quot;)\n        private int loginSuccess;\n    \n        @Column(name = &quot;logout&quot;)\n        private int logout;\n    \n        @Column(name = &quot;logout_date&quot;)\n        private Date logoutDate;\n\n    }\n</code></pre>\n<p>My method where I save activity if authentication was well</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void saveMultipart(ActivityDeskControlEntity activityDeskControlEntity) {\n        this.activityDeskControlRepository.save(activityDeskControlEntity);\n    }\n</code></pre>\n<p>My method where I save activity if authentication was wrong</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public SimpleResponse saveMultipartLoginFail(ActivityDeskControlEntity activityDeskControlEntity) {\n        this.activityDeskControlRepository.save(activityDeskControlEntity);\n    }\n</code></pre>\n<p>Have you some idea how I can save information if I got an exception in JPA?\nI look some links like <a href=\"https://stackoverflow.com/questions/40605834/spring-jparepositroy-save-does-not-appear-to-throw-exception-on-duplicate-save\">this</a> but not work.\nMy database is Oracle 19c</p>\n<p>Update 1\nThe exception I get when I put credentials wrong is</p>\n<p>javax.naming.AuthenticationException: [LDAP: error code 49 - Invalid Credentials]</p>\n<p>In this scenario I want to save information the login fail.</p>\n<p>Update 2</p>\n<p>In the scenario that throws an exception is</p>\n<p>context = connect(user, password);</p>\n<p>For default LDAP throw an exception when user and password are wrong in consequence in this exception I want to save.</p>\n<p>Update 3</p>\n<p>I saw in <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction-declarative-annotations\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n<blockquote>\n<p>Any RuntimeException or Error triggers rollback, and any checked\nException does not.</p>\n</blockquote>\n<p>When the user put credentials wrong throw an exception that extends RuntimeException</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import org.springframework.security.core.AuthenticationException;\n    \n    /**\n     * Thrown if an authentication request is rejected because the credentials are invalid.\n     * For this exception to be thrown, it means the account is neither locked nor disabled.\n     *\n     * @author Ben Alex\n     */\n    public class BadCredentialsException extends AuthenticationException {\n        // ~ Constructors\n        // ===================================================================================================\n    \n        /**\n         * Constructs a &lt;code&gt;BadCredentialsException&lt;/code&gt; with the specified message.\n         *\n         * @param msg the detail message\n         */\n        public BadCredentialsException(String msg) {\n            super(msg);\n        }\n    \n        /**\n         * Constructs a &lt;code&gt;BadCredentialsException&lt;/code&gt; with the specified message and\n         * root cause.\n         *\n         * @param msg the detail message\n         * @param t root cause\n         */\n        public BadCredentialsException(String msg, Throwable t) {\n            super(msg, t);\n        }\n    }\n\n    /**\n     * Abstract superclass for all exceptions related to an {@link Authentication} object\n     * being invalid for whatever reason.\n     *\n     * @author Ben Alex\n     */\n    public abstract class AuthenticationException extends RuntimeException {\n    \n        // ~ Constructors\n        // ===================================================================================================\n    \n        /**\n         * Constructs an {@code AuthenticationException} with the specified message and root\n         * cause.\n         *\n         * @param msg the detail message\n         * @param t the root cause\n         */\n        public AuthenticationException(String msg, Throwable t) {\n            super(msg, t);\n        }\n    \n        /**\n         * Constructs an {@code AuthenticationException} with the specified message and no\n         * root cause.\n         *\n         * @param msg the detailed message\n         */\n        public AuthenticationException(String msg) {\n            super(msg);\n        }\n    \n    }\n</code></pre>\n<p>I tried to change type of exception, but I couldn't, why? spring security to expected BadCredentialsException and not my own BadCredentialsException.</p>\n<p>Are there any way to achieve that?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":7778530,"reputation":3138,"user_id":9860374,"display_name":"Matheus"},"score":1,"creation_date":1649783213,"post_id":71846549,"comment_id":126961763,"body_markdown":"ReentrantLock technique can cause serious problems due to the thread pool, as you said. Storing the state in a Map seems to be a nice way to go. Just be sure to use a thread-safe structure, like `ConcurrentHashMap`.","body":"ReentrantLock technique can cause serious problems due to the thread pool, as you said. Storing the state in a Map seems to be a nice way to go. Just be sure to use a thread-safe structure, like <code>ConcurrentHashMap</code>."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1649868286,"post_id":71846549,"comment_id":126986720,"body_markdown":"My two cents, I would go for an async call for this heavy method with something to check whether it is running or not. User trigger the process, system starts the task, if user request it again you can either queue the process (and say to user that is queued for processing) or inform user that there is already one running and user should try again later.","body":"My two cents, I would go for an async call for this heavy method with something to check whether it is running or not. User trigger the process, system starts the task, if user request it again you can either queue the process (and say to user that is queued for processing) or inform user that there is already one running and user should try again later."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1649868574,"post_id":71846549,"comment_id":126986837,"body_markdown":"How do you want to limit this, is it per each user, or for all calls in total? Do you manage some kind of state (like a session) in the backend?","body":"How do you want to limit this, is it per each user, or for all calls in total? Do you manage some kind of state (like a session) in the backend?"},{"owner":{"account_id":19553412,"reputation":185,"user_id":14308420,"display_name":"leonaugust"},"score":0,"creation_date":1649869825,"post_id":71846549,"comment_id":126987285,"body_markdown":"@cyberbrain, yes I would like to limit this per each user.\nYes, we can extract unique organization id from the JWT token by which we can identify user making request","body":"@cyberbrain, yes I would like to limit this per each user. Yes, we can extract unique organization id from the JWT token by which we can identify user making request"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1649870141,"post_id":71846549,"comment_id":126987408,"body_markdown":"So you will need to keep a state in the server by storing the timestamp when the function was called last by that user and not let him start it again before the wanted delay has passed. No concurrency magic necessary here.","body":"So you will need to keep a state in the server by storing the timestamp when the function was called last by that user and not let him start it again before the wanted delay has passed. No concurrency magic necessary here."},{"owner":{"account_id":19553412,"reputation":185,"user_id":14308420,"display_name":"leonaugust"},"score":0,"creation_date":1649870669,"post_id":71846549,"comment_id":126987626,"body_markdown":"Indeed that seems as a best approach, I thought there might be a built-in mechanism in Spring which would allow to do the same","body":"Indeed that seems as a best approach, I thought there might be a built-in mechanism in Spring which would allow to do the same"}],"owner":{"account_id":19553412,"reputation":185,"user_id":14308420,"display_name":"leonaugust"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649868051,"creation_date":1649782689,"question_id":71846549,"body_markdown":"The controller has 2 methods:\r\n\r\n \r\n    Operation updateReallyHeavyPaymentOperations() {\r\n      // heavy logic\r\n    }\r\n    Operation updateReallyHeavyRefundOperations() {\r\n      // heavy logic\r\n    }\r\n\r\n&gt; What I want to achieve is this: When user requests one of those\r\n&gt; methods, there must be a timeout before it&#39;s allowed for user to call\r\n&gt; the same method again. For example, if I call\r\n&gt; updateReallyHeavyPaymentOperations(), I have to wait 10 seconds before\r\n&gt; calling updateReallyHeavyPaymentOperations() again. And if I call\r\n&gt; updateReallyHeavyPaymentOperations(), I can call\r\n&gt; updateReallyHeavyRefundOperations() without need to wait.\r\n\r\nThe best solution seems to implement this on frontend, but we&#39;re not allowed to add there any timeouts, button blocking or etc for those methods.\r\n \r\nI see the following solutions:\r\n- Use ReentrantLock to lock and unlock when request is finished for example.\r\n- Store in a Map the last request time of the method. And return null or throw Exception, for request in timeout.\r\n\r\nThe time for request of those methods execution is long(~ 3m). Using the first approach, that seems as a problem, considering nothing interferes if user\r\nwill click on button with updateReallyHeavyPaymentOperations() for 100 times for example. There will be 100 locked requests waiting for their execution and dramatically decreasing Tomcat\r\nperformance. But at least it will prevent from executing the logic of the new user request, before the last finished. Second approach looks better, but is there a more Spring-way to address this problem and add a controller method timeout for same user?\r\n\r\nFirst approach:\r\n\r\n    @Target( value = {ElementType.METHOD})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface BlockUserRequestIfTimeout {\r\n    }\r\n    \r\n    public class BlockUserRequestIfTimeoutAspect {\r\n    \r\n        private Map&lt;String, ReentrantLock&gt; lockMap = new HashMap&lt;&gt;();\r\n    \r\n        @Around(&quot;@annotation(BlockUserRequestIfTimeout)&quot;)\r\n        public void blockRequest(ProceedingJoinPoint point) throws Throwable {\r\n    \r\n            String id = &quot;someId&quot;; // get custom id from Jwt token\r\n            log.debug(&quot;Block User Aspect called&quot;);\r\n            lockExecution(id, () -&gt; {\r\n                try {\r\n                    point.proceed();\r\n                } catch (Throwable e) {\r\n                    log.error(e.getMessage());\r\n                }\r\n            });\r\n        }\r\n    \r\n        private Lock getLock(String id) {\r\n            ReentrantLock lock = lockMap.get(id);\r\n            if (lock == null) {\r\n                synchronized (this) {\r\n                    lock = lockMap.get(id);\r\n    \r\n                    if (lock == null) {\r\n                        lock = new ReentrantLock();\r\n                        lockMap.put(id, lock);\r\n                    }\r\n                }\r\n            }\r\n            return lock;\r\n        }\r\n    \r\n        private void lockExecution(String id, Runnable runnable) {\r\n            Lock lock = getLock(id);\r\n            try {\r\n                lock.lockInterruptibly();\r\n                log.debug(&quot;id: [{}] locked, thread: [{}]&quot;, id, Thread.currentThread().getName());\r\n                runnable.run();\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e.getMessage());\r\n            } finally {\r\n                lock.unlock();\r\n                log.debug(&quot;id: [{}] unlocked, thread: [{}]&quot;, id, Thread.currentThread().getName());\r\n            }\r\n        }\r\n    \r\n    }\r\n    \r\n    \r\n    public class OperationController {\r\n    \r\n       @BlockUserRequestIfTimeout\r\n       Operation updateReallyHeavyPaymentOperations() {\r\n         // heavy logic\r\n      }\r\n    \r\n    }","title":"Spring Boot. How to implement timeouts between specific method requests for user","body":"<p>The controller has 2 methods:</p>\n<pre><code>Operation updateReallyHeavyPaymentOperations() {\n  // heavy logic\n}\nOperation updateReallyHeavyRefundOperations() {\n  // heavy logic\n}\n</code></pre>\n<blockquote>\n<p>What I want to achieve is this: When user requests one of those\nmethods, there must be a timeout before it's allowed for user to call\nthe same method again. For example, if I call\nupdateReallyHeavyPaymentOperations(), I have to wait 10 seconds before\ncalling updateReallyHeavyPaymentOperations() again. And if I call\nupdateReallyHeavyPaymentOperations(), I can call\nupdateReallyHeavyRefundOperations() without need to wait.</p>\n</blockquote>\n<p>The best solution seems to implement this on frontend, but we're not allowed to add there any timeouts, button blocking or etc for those methods.</p>\n<p>I see the following solutions:</p>\n<ul>\n<li>Use ReentrantLock to lock and unlock when request is finished for example.</li>\n<li>Store in a Map the last request time of the method. And return null or throw Exception, for request in timeout.</li>\n</ul>\n<p>The time for request of those methods execution is long(~ 3m). Using the first approach, that seems as a problem, considering nothing interferes if user\nwill click on button with updateReallyHeavyPaymentOperations() for 100 times for example. There will be 100 locked requests waiting for their execution and dramatically decreasing Tomcat\nperformance. But at least it will prevent from executing the logic of the new user request, before the last finished. Second approach looks better, but is there a more Spring-way to address this problem and add a controller method timeout for same user?</p>\n<p>First approach:</p>\n<pre><code>@Target( value = {ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface BlockUserRequestIfTimeout {\n}\n\npublic class BlockUserRequestIfTimeoutAspect {\n\n    private Map&lt;String, ReentrantLock&gt; lockMap = new HashMap&lt;&gt;();\n\n    @Around(&quot;@annotation(BlockUserRequestIfTimeout)&quot;)\n    public void blockRequest(ProceedingJoinPoint point) throws Throwable {\n\n        String id = &quot;someId&quot;; // get custom id from Jwt token\n        log.debug(&quot;Block User Aspect called&quot;);\n        lockExecution(id, () -&gt; {\n            try {\n                point.proceed();\n            } catch (Throwable e) {\n                log.error(e.getMessage());\n            }\n        });\n    }\n\n    private Lock getLock(String id) {\n        ReentrantLock lock = lockMap.get(id);\n        if (lock == null) {\n            synchronized (this) {\n                lock = lockMap.get(id);\n\n                if (lock == null) {\n                    lock = new ReentrantLock();\n                    lockMap.put(id, lock);\n                }\n            }\n        }\n        return lock;\n    }\n\n    private void lockExecution(String id, Runnable runnable) {\n        Lock lock = getLock(id);\n        try {\n            lock.lockInterruptibly();\n            log.debug(&quot;id: [{}] locked, thread: [{}]&quot;, id, Thread.currentThread().getName());\n            runnable.run();\n        } catch (Exception e) {\n            throw new RuntimeException(e.getMessage());\n        } finally {\n            lock.unlock();\n            log.debug(&quot;id: [{}] unlocked, thread: [{}]&quot;, id, Thread.currentThread().getName());\n        }\n    }\n\n}\n\n\npublic class OperationController {\n\n   @BlockUserRequestIfTimeout\n   Operation updateReallyHeavyPaymentOperations() {\n     // heavy logic\n  }\n\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649798671,"creation_date":1649798671,"answer_id":71849279,"question_id":71849155,"body_markdown":"Have you tried http://localhost:8080/client/get ? Your property of  server.servlet.context-path might not be applied. The response status of 404 indicates that the URL you are trying is not correct.\r\n\r\nAlso for starters make it as simple as possible and start adding complexity from there on. \r\n\r\n 1. Try making it work for  http://localhost:8080/test by removing @RequestMapping(&quot;/client&quot;) and removing  server.servlet.context-path=/company/api. \r\n 2. In this &quot;/test&quot; request just return a string &quot;Hello World&quot;. \r\n 3. If this works you can go step by step increasing the complexity until you \r\nreached your final goal. This makes it much easier to detect errors you made. The simpler the steps you take the easier it gets :)\r\n","title":"Spring Boot request","body":"<p>Have you tried http://localhost:8080/client/get ? Your property of  server.servlet.context-path might not be applied. The response status of 404 indicates that the URL you are trying is not correct.</p>\n<p>Also for starters make it as simple as possible and start adding complexity from there on.</p>\n<ol>\n<li>Try making it work for  http://localhost:8080/test by removing @RequestMapping(&quot;/client&quot;) and removing  server.servlet.context-path=/company/api.</li>\n<li>In this &quot;/test&quot; request just return a string &quot;Hello World&quot;.</li>\n<li>If this works you can go step by step increasing the complexity until you\nreached your final goal. This makes it much easier to detect errors you made. The simpler the steps you take the easier it gets :)</li>\n</ol>\n"}],"owner":{"account_id":24263775,"reputation":11,"user_id":18212993,"display_name":"Cristian Osorio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649867959,"creation_date":1649797824,"question_id":71849155,"body_markdown":"I have the application (API-REST) simple in java with spring, the problem is that when run the application and i do request in postman to get all clients, simply not work, but the application yes have connection with the database\r\n\r\n - Code:\r\n \r\n   - Client class\r\n\r\n         @Entity\r\n         @Table(name = &quot;clients&quot;)\r\n         public class Client {\r\n\r\n          @Id\r\n          @Column(name = &quot;id&quot;)\r\n          private Integer id;\r\n          @Column(name = &quot;name&quot;)\r\n          private String name;\r\n          @Column(name = &quot;email&quot;)\r\n          private String email;\r\n          @Column(name = &quot;phone&quot;)\r\n          private int phone;\r\n\r\n          public Client() {\r\n          }\r\n\r\n          public Client(String name, String email, int phone) {\r\n          this.name = name;\r\n          this.email = email;\r\n          this.phone = phone;\r\n          }\r\n\r\n          public Integer getId() {\r\n          return id;\r\n          }\r\n\r\n          public void setId(Integer id) {\r\n          this.id = id;\r\n          }\r\n\r\n          public String getName() {\r\n          return name;\r\n          }\r\n\r\n          public void setName(String name) {\r\n          this.name = name;\r\n          }\r\n\r\n          public String getEmail() {\r\n           return email;\r\n          }\r\n\r\n          public void setEmail(String email) {\r\n          this.email = email;\r\n         }\r\n\r\n         public int getPhone() {\r\n         return phone;\r\n         }\r\n\r\n         public void setPhone(int phone) {\r\n         this.phone = phone;\r\n         }\r\n       }\r\n\r\n\r\n\r\n   - ClientController class\r\n\r\n\r\n\r\n           @RestController\r\n           @RequestMapping(&quot;/client&quot;)\r\n           public class ClientController {\r\n\r\n           @Autowired\r\n           private ClientService clientService;\r\n\r\n           @PostMapping(&quot;/save&quot;)\r\n           public Optional&lt;Client&gt; save(@RequestBody Client client){\r\n              return clientService.save(client);\r\n           }\r\n\r\n           @GetMapping(&quot;/getById/{id}&quot;)\r\n           public Optional&lt;Client&gt; findById(@PathVariable(&quot;id&quot;) Integer id){\r\n               return clientService.findById(id);\r\n           }\r\n\r\n           @DeleteMapping(&quot;/delete/{id}&quot;)\r\n           public void delete(@PathVariable(&quot;id&quot;) Integer id){\r\n              clientService.delete(id);\r\n           }\r\n\r\n           @GetMapping(&quot;/get&quot;)\r\n           public List&lt;Client&gt; findAll(){\r\n              return clientService.findAll();\r\n         }\r\n      }\r\n\r\n\r\n  - application.properties\r\n\r\n\r\n         server.servlet.context-path=/company/api\r\n         server.port=8080\r\n\r\n         spring.datasource.url=jdbc:postgresql://localhost:5432/company\r\n         spring.datasource.username=root\r\n         spring.datasource.password=root\r\n\r\n      \r\n   - pom.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \r\n              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n          \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n           https://maven.apache.org/xsd/maven- \r\n           4.0.0.xsd&quot;&gt;\r\n        \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t    &lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t    \t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.company&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n\r\n- console\r\n\r\n[![enter image description here][1]][1]\r\n\r\n- postman \r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SsQXT.png\r\n  [2]: https://i.stack.imgur.com/CaakP.png","title":"Spring Boot request","body":"<p>I have the application (API-REST) simple in java with spring, the problem is that when run the application and i do request in postman to get all clients, simply not work, but the application yes have connection with the database</p>\n<ul>\n<li><p>Code:</p>\n<ul>\n<li><p>Client class</p>\n<pre><code>@Entity\n@Table(name = &quot;clients&quot;)\npublic class Client {\n\n @Id\n @Column(name = &quot;id&quot;)\n private Integer id;\n @Column(name = &quot;name&quot;)\n private String name;\n @Column(name = &quot;email&quot;)\n private String email;\n @Column(name = &quot;phone&quot;)\n private int phone;\n\n public Client() {\n }\n\n public Client(String name, String email, int phone) {\n this.name = name;\n this.email = email;\n this.phone = phone;\n }\n\n public Integer getId() {\n return id;\n }\n\n public void setId(Integer id) {\n this.id = id;\n }\n\n public String getName() {\n return name;\n }\n\n public void setName(String name) {\n this.name = name;\n }\n\n public String getEmail() {\n  return email;\n }\n\n public void setEmail(String email) {\n this.email = email;\n}\n\npublic int getPhone() {\nreturn phone;\n}\n\npublic void setPhone(int phone) {\nthis.phone = phone;\n}\n</code></pre>\n<p>}</p>\n</li>\n<li><p>ClientController class</p>\n<pre><code>  @RestController\n  @RequestMapping(&quot;/client&quot;)\n  public class ClientController {\n\n  @Autowired\n  private ClientService clientService;\n\n  @PostMapping(&quot;/save&quot;)\n  public Optional&lt;Client&gt; save(@RequestBody Client client){\n     return clientService.save(client);\n  }\n\n  @GetMapping(&quot;/getById/{id}&quot;)\n  public Optional&lt;Client&gt; findById(@PathVariable(&quot;id&quot;) Integer id){\n      return clientService.findById(id);\n  }\n\n  @DeleteMapping(&quot;/delete/{id}&quot;)\n  public void delete(@PathVariable(&quot;id&quot;) Integer id){\n     clientService.delete(id);\n  }\n\n  @GetMapping(&quot;/get&quot;)\n  public List&lt;Client&gt; findAll(){\n     return clientService.findAll();\n}\n</code></pre>\n<p>}</p>\n</li>\n</ul>\n</li>\n<li><p>application.properties</p>\n<pre><code> server.servlet.context-path=/company/api\n server.port=8080\n\n spring.datasource.url=jdbc:postgresql://localhost:5432/company\n spring.datasource.username=root\n spring.datasource.password=root\n</code></pre>\n</li>\n<li><p>pom.xml</p>\n</li>\n</ul>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \n          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \n       https://maven.apache.org/xsd/maven- \n       4.0.0.xsd&quot;&gt;\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n        &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.6.3&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.company&lt;/groupId&gt;\n&lt;artifactId&gt;demo&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;demo&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<ul>\n<li>console</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/SsQXT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SsQXT.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>postman</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/CaakP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CaakP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","antlr","cobol","mainframe","uss"],"comments":[{"owner":{"account_id":3890138,"reputation":2674,"user_id":3220554,"display_name":"phunsoft"},"score":0,"creation_date":1649875633,"post_id":71860996,"comment_id":126989220,"body_markdown":"I&#39;ve reas through &quot;issue 104&quot;, and have some questions. You&#39;re talking about &quot;MVS files&quot;, and &quot;OMVS files&quot;. I guess the Cobol code initially is in an MVS data set (MVS files, as you say). How exactly do you copy it to the USS file system?","body":"I&#39;ve reas through &quot;issue 104&quot;, and have some questions. You&#39;re talking about &quot;MVS files&quot;, and &quot;OMVS files&quot;. I guess the Cobol code initially is in an MVS data set (MVS files, as you say). How exactly do you copy it to the USS file system?"},{"owner":{"account_id":6869420,"reputation":3621,"user_id":6943197,"display_name":"Hogstrom"},"score":0,"creation_date":1649876620,"post_id":71860996,"comment_id":126989528,"body_markdown":"Do you have a command line for how you are running ANTLR ?","body":"Do you have a command line for how you are running ANTLR ?"},{"owner":{"account_id":6128906,"reputation":1172,"user_id":4779853,"display_name":"kaby76"},"score":0,"creation_date":1649886738,"post_id":71860996,"comment_id":126992376,"body_markdown":"I made some comments on the javac compiler errors in the mapa repo Issue #104. Check that you have the generate Visitor.java files. If so, check your classpath. I&#39;m not sure if that is the problem, or you worked past that and are looking at the encoding for the char stream.","body":"I made some comments on the javac compiler errors in the mapa repo Issue #104. Check that you have the generate Visitor.java files. If so, check your classpath. I&#39;m not sure if that is the problem, or you worked past that and are looking at the encoding for the char stream."}],"owner":{"account_id":1282875,"reputation":35,"user_id":1236568,"display_name":"user1236568"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1649867947,"creation_date":1649867947,"question_id":71860996,"body_markdown":"I&#39;ve tried to port Craig Schneiderwent&#39;s Cobol parser ([mapa][1]) under IBM z/OS USS.\r\nIt seems to function generally, but fails to parse the Cobol source.\r\nSee  [issue 104][2] . \r\nCraig assumes this could be a codepage translation issue. I&#39;ve tried all his advices with no success. \r\nThe question is, which codepage understands ANTLR - UTF-8? Or something special?   \r\n\r\n\r\n  [1]: https://github.com/cschneid-the-elder/mapa\r\n  [2]: https://github.com/cschneid-the-elder/mapa/issues/104","title":"Using ANTLR on IBM USS","body":"<p>I've tried to port Craig Schneiderwent's Cobol parser (<a href=\"https://github.com/cschneid-the-elder/mapa\" rel=\"nofollow noreferrer\">mapa</a>) under IBM z/OS USS.\nIt seems to function generally, but fails to parse the Cobol source.\nSee  <a href=\"https://github.com/cschneid-the-elder/mapa/issues/104\" rel=\"nofollow noreferrer\">issue 104</a> .\nCraig assumes this could be a codepage translation issue. I've tried all his advices with no success.\nThe question is, which codepage understands ANTLR - UTF-8? Or something special?</p>\n"},{"tags":["java","android","kotlin","whatsapp","whatsapp-stickers"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1649873720,"post_id":71860963,"comment_id":126988545,"body_markdown":"`Whatsapp sticker format` AND `webp format` ??? Why are you talking about two formats?","body":"<code>Whatsapp sticker format</code> AND <code>webp format</code> ??? Why are you talking about two formats?"},{"owner":{"account_id":11561736,"reputation":139,"user_id":8471235,"display_name":"sai android"},"score":0,"creation_date":1665986967,"post_id":71860963,"comment_id":130818939,"body_markdown":"Have find any solution?","body":"Have find any solution?"},{"owner":{"account_id":24926136,"reputation":33,"user_id":18793870,"display_name":"RunTime Error"},"score":0,"creation_date":1666091995,"post_id":71860963,"comment_id":130848459,"body_markdown":"@saiandroid Try converting to webp format or directly send webp format pictures.","body":"@saiandroid Try converting to webp format or directly send webp format pictures."}],"owner":{"account_id":24926136,"reputation":33,"user_id":18793870,"display_name":"RunTime Error"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":616,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1649867809,"creation_date":1649867809,"question_id":71860963,"body_markdown":"How can I convert PNG or any image to the Whatsapp sticker format so that I can send it as a sticker and not as image.\r\n\r\nBasically, I am making a keyboard app so I need to send stickers to WA from my keyboard but its taking as Image (PNG) and is not supporting webp format  \r\n\r\n```\r\nprivate void doCommitContent(@NonNull String description, @NonNull String mimeType,\r\n                                 @NonNull File file) {\r\n        final EditorInfo editorInfo = getCurrentInputEditorInfo();\r\n\r\n        // Validate packageName again just in case.\r\n        if (!validatePackageName(editorInfo)) {\r\n            return;\r\n        }\r\n\r\n        final Uri contentUri = FileProvider.getUriForFile(this, AUTHORITY, file);\r\n\r\n        final int flag;\r\n        if (Build.VERSION.SDK_INT &gt;= 25) {\r\n            flag = InputConnectionCompat.INPUT_CONTENT_GRANT_READ_URI_PERMISSION;\r\n        } else {\r\n\r\n            flag = 0;\r\n            try {\r\n                // TODO: Use revokeUriPermission to revoke as needed.\r\n                grantUriPermission(\r\n                        editorInfo.packageName, contentUri, Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n            } catch (Exception e){\r\n                Log.e(TAG, &quot;grantUriPermission failed packageName=&quot; + editorInfo.packageName\r\n                        + &quot; contentUri=&quot; + contentUri, e);\r\n            }\r\n        }\r\n\r\n        final InputContentInfoCompat inputContentInfoCompat = new InputContentInfoCompat(\r\n                contentUri,\r\n                new ClipDescription(description, new String[]{mimeType}),\r\n                null /* linkUrl */);\r\n        InputConnectionCompat.commitContent(\r\n                getCurrentInputConnection(), getCurrentInputEditorInfo(), inputContentInfoCompat,\r\n                flag, null);\r\n        getCurrentInputConnection().sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_ENTER));\r\n        getCurrentInputConnection().sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_ENTER));\r\n    }\r\n```","title":"I am trying to convert image (PNG) to WA Sticker in my app. How can I do this? Whatsapp supports image/webp.wasticker mime type","body":"<p>How can I convert PNG or any image to the Whatsapp sticker format so that I can send it as a sticker and not as image.</p>\n<p>Basically, I am making a keyboard app so I need to send stickers to WA from my keyboard but its taking as Image (PNG) and is not supporting webp format</p>\n<pre><code>private void doCommitContent(@NonNull String description, @NonNull String mimeType,\n                                 @NonNull File file) {\n        final EditorInfo editorInfo = getCurrentInputEditorInfo();\n\n        // Validate packageName again just in case.\n        if (!validatePackageName(editorInfo)) {\n            return;\n        }\n\n        final Uri contentUri = FileProvider.getUriForFile(this, AUTHORITY, file);\n\n        final int flag;\n        if (Build.VERSION.SDK_INT &gt;= 25) {\n            flag = InputConnectionCompat.INPUT_CONTENT_GRANT_READ_URI_PERMISSION;\n        } else {\n\n            flag = 0;\n            try {\n                // TODO: Use revokeUriPermission to revoke as needed.\n                grantUriPermission(\n                        editorInfo.packageName, contentUri, Intent.FLAG_GRANT_READ_URI_PERMISSION);\n            } catch (Exception e){\n                Log.e(TAG, &quot;grantUriPermission failed packageName=&quot; + editorInfo.packageName\n                        + &quot; contentUri=&quot; + contentUri, e);\n            }\n        }\n\n        final InputContentInfoCompat inputContentInfoCompat = new InputContentInfoCompat(\n                contentUri,\n                new ClipDescription(description, new String[]{mimeType}),\n                null /* linkUrl */);\n        InputConnectionCompat.commitContent(\n                getCurrentInputConnection(), getCurrentInputEditorInfo(), inputContentInfoCompat,\n                flag, null);\n        getCurrentInputConnection().sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_ENTER));\n        getCurrentInputConnection().sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_ENTER));\n    }\n</code></pre>\n"},{"tags":["java","oracle","time","timestamp","h2"],"answers":[{"tags":[],"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649867378,"creation_date":1649864000,"answer_id":71860157,"question_id":71859973,"body_markdown":"That math only works for DATE data types (e.g. SYSDATE), not for TIMESTAMP. For TIMESTAMP, use the INTERVAL function:\r\n\r\n    select systimestamp, systimestamp - interval &#39;30&#39; second from dual;\r\n    \r\n    SYSTIMESTAMP                        SYSTIMESTAMP-INTERVAL&#39;30&#39;SECOND    \r\n    ----------------------------------- -----------------------------------\r\n    13-APR-22 03.34.41.414075000 PM GMT 13-APR-22 03.34.11.414075000 PM GMT\r\n\r\nSee here for a thorough explanation of the differences in the two data types and their operations: https://oracle-base.com/articles/misc/oracle-dates-timestamps-and-intervals\r\n\r\nH2 doesn&#39;t support the same functions as Oracle; use something like this:\r\n\r\n    SELECT DATEADD(&#39;SECOND&#39;,-30, CURRENT_TIMESTAMP) ...","title":"Subtracting Minutes from SYSTIMESTAMP or SYSDATE in H2 not working","body":"<p>That math only works for DATE data types (e.g. SYSDATE), not for TIMESTAMP. For TIMESTAMP, use the INTERVAL function:</p>\n<pre><code>select systimestamp, systimestamp - interval '30' second from dual;\n\nSYSTIMESTAMP                        SYSTIMESTAMP-INTERVAL'30'SECOND    \n----------------------------------- -----------------------------------\n13-APR-22 03.34.41.414075000 PM GMT 13-APR-22 03.34.11.414075000 PM GMT\n</code></pre>\n<p>See here for a thorough explanation of the differences in the two data types and their operations: <a href=\"https://oracle-base.com/articles/misc/oracle-dates-timestamps-and-intervals\" rel=\"nofollow noreferrer\">https://oracle-base.com/articles/misc/oracle-dates-timestamps-and-intervals</a></p>\n<p>H2 doesn't support the same functions as Oracle; use something like this:</p>\n<pre><code>SELECT DATEADD('SECOND',-30, CURRENT_TIMESTAMP) ...\n</code></pre>\n"}],"owner":{"account_id":4999034,"reputation":1870,"user_id":6722075,"display_name":"Tohid Makari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":779,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71860157,"answer_count":1,"score":1,"last_activity_date":1649867378,"creation_date":1649863338,"question_id":71859973,"body_markdown":"Subtracting Minutes from SYSTIMESTAMP or SYSDATE in `H2` not working .The result for following two commands are same:\r\n\r\n    select SYSTIMESTAMP from dual;    \r\n\r\n    select SYSTIMESTAMP- 30 / 1440 from dual;","title":"Subtracting Minutes from SYSTIMESTAMP or SYSDATE in H2 not working","body":"<p>Subtracting Minutes from SYSTIMESTAMP or SYSDATE in <code>H2</code> not working .The result for following two commands are same:</p>\n<pre><code>select SYSTIMESTAMP from dual;    \n\nselect SYSTIMESTAMP- 30 / 1440 from dual;\n</code></pre>\n"},{"tags":["java","spring","rest","testing","mockmvc"],"answers":[{"tags":[],"owner":{"account_id":7277212,"reputation":56,"user_id":5548240,"display_name":"anjeludo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649867062,"creation_date":1649867062,"answer_id":71860804,"question_id":71834727,"body_markdown":"My mistake.\r\n\r\nI was sending body in post request badly and it produces a HttpMessageNotReadableException instead of MethodArgumentNotValidException.\r\n\r\nThe correct way is:\r\n```\r\n    mockMvc.perform(MockMvcRequestBuilders.post(&quot;/api/post&quot;)\r\n      .contentType(MediaType.APPLICATION_JSON)\r\n      .content(new ObjectMapper().writeValueAsString(body)));\r\n\r\n```\r\n\r\nNow every works as I expected.\r\n\r\nThanks!.\r\n\r\n","title":"@RestControllerAdvice with MethodArgumentNotValidException handler does not work with testing","body":"<p>My mistake.</p>\n<p>I was sending body in post request badly and it produces a HttpMessageNotReadableException instead of MethodArgumentNotValidException.</p>\n<p>The correct way is:</p>\n<pre><code>    mockMvc.perform(MockMvcRequestBuilders.post(&quot;/api/post&quot;)\n      .contentType(MediaType.APPLICATION_JSON)\n      .content(new ObjectMapper().writeValueAsString(body)));\n\n</code></pre>\n<p>Now every works as I expected.</p>\n<p>Thanks!.</p>\n"}],"owner":{"account_id":7277212,"reputation":56,"user_id":5548240,"display_name":"anjeludo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649867062,"creation_date":1649714254,"question_id":71834727,"body_markdown":"My @RestControllerAdvice is not working when a MethodArgumentNotValidException exception is thrown running a controller unit test (even using **setControllerAdvice** method).\r\n\r\n\r\nThis is my unit test:\r\n\r\n```\r\nclass MyControllerTestSlice {\r\n\tprivate MockMvc mockMvc;\r\n\t\r\n\tprivate ResultActions currentRequest;\r\n\t\r\n\t@BeforeEach\r\n\tpublic void setup() {\r\n\t    this.mockMvc = MockMvcBuilders.standaloneSetup(new MyController())\r\n\t    \t\t         .alwaysDo(MockMvcResultHandlers.print())\r\n\t                    .setControllerAdvice(new ControllerExceptionHandler())\r\n\t                    .build();\r\n\t}\r\n\r\n\t@Test\r\n\tvoid test_post_with_handler_exception() throws Exception {\r\n\t\tJSONObject expectedResponse = new JSONObject().put(&quot;msg&quot;, &quot;name required&quot;);\r\n\t\tmockMvc.perform(post(&quot;/api/post&quot;, new Payload()))\r\n\t\t\t.andExpect(status().is(422))\r\n\t\t\t.andExpect(content().json(expectedResponse.toString()));\r\n\t}\r\n}\r\n```\r\nThis is my RestControllerAdvice:\r\n\r\n```\r\n@RestControllerAdvice\r\npublic class ControllerExceptionHandler extends ResponseEntityExceptionHandler {\r\n\t@Override\r\n\t@ResponseStatus(value = HttpStatus.UNPROCESSABLE_ENTITY)\r\n\tprotected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex,\r\n\t\t\tHttpHeaders headers, HttpStatus status, WebRequest request) {\r\n\t\tString s = ex.getFieldErrors().stream().map(f -&gt; f.getDefaultMessage()).collect(Collectors.joining(&quot;,&quot;));\r\n\t\treturn ResponseEntity.unprocessableEntity().body(new ErrorMessage(s));\r\n\t}\r\n\r\n}\r\n```\r\nMy body DTO:\r\n\r\n```\r\npublic class Payload {\r\n\tpublic Payload() {}\r\n\t\r\n\tpublic Payload(String name) {\r\n\t\tsuper();\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\t@NotNull(message = &quot;name required&quot;)\r\n\tprivate String name;\r\n\t\r\n\tpublic String getName() { return name; }\r\n}\r\n```\r\nTest result (neither status nor body response are changed since RestControllerAdivce is not invoked):\r\n\r\n```\r\nMockHttpServletRequest:\r\n      HTTP Method = POST\r\n      Request URI = /api/post\r\n       Parameters = {}\r\n          Headers = []\r\n             Body = &lt;no character encoding set&gt;\r\n    Session Attrs = {}\r\n\r\nHandler:\r\n             Type = com.example.demo.controller.MyController\r\n           Method = com.example.demo.controller.MyController#post(Payload)\r\n\r\nAsync:\r\n    Async started = false\r\n     Async result = null\r\n\r\nResolved Exception:\r\n             Type = org.springframework.http.converter.HttpMessageNotReadableException\r\n\r\nModelAndView:\r\n        View name = null\r\n             View = null\r\n            Model = null\r\n\r\nFlashMap:\r\n       Attributes = null\r\n\r\nMockHttpServletResponse:\r\n           Status = 400\r\n    Error message = null\r\n          Headers = []\r\n     Content type = null\r\n             Body = \r\n    Forwarded URL = null\r\n   Redirected URL = null\r\n          Cookies = []\r\n```\r\n\r\nHowever, same code with an integration test (using @SpringBootTest and TestRestTemplate) is working well.\r\n\r\nWhat am I doing wrong?.\r\n\r\nThanks.\r\n","title":"@RestControllerAdvice with MethodArgumentNotValidException handler does not work with testing","body":"<p>My @RestControllerAdvice is not working when a MethodArgumentNotValidException exception is thrown running a controller unit test (even using <strong>setControllerAdvice</strong> method).</p>\n<p>This is my unit test:</p>\n<pre><code>class MyControllerTestSlice {\n    private MockMvc mockMvc;\n    \n    private ResultActions currentRequest;\n    \n    @BeforeEach\n    public void setup() {\n        this.mockMvc = MockMvcBuilders.standaloneSetup(new MyController())\n                         .alwaysDo(MockMvcResultHandlers.print())\n                        .setControllerAdvice(new ControllerExceptionHandler())\n                        .build();\n    }\n\n    @Test\n    void test_post_with_handler_exception() throws Exception {\n        JSONObject expectedResponse = new JSONObject().put(&quot;msg&quot;, &quot;name required&quot;);\n        mockMvc.perform(post(&quot;/api/post&quot;, new Payload()))\n            .andExpect(status().is(422))\n            .andExpect(content().json(expectedResponse.toString()));\n    }\n}\n</code></pre>\n<p>This is my RestControllerAdvice:</p>\n<pre><code>@RestControllerAdvice\npublic class ControllerExceptionHandler extends ResponseEntityExceptionHandler {\n    @Override\n    @ResponseStatus(value = HttpStatus.UNPROCESSABLE_ENTITY)\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex,\n            HttpHeaders headers, HttpStatus status, WebRequest request) {\n        String s = ex.getFieldErrors().stream().map(f -&gt; f.getDefaultMessage()).collect(Collectors.joining(&quot;,&quot;));\n        return ResponseEntity.unprocessableEntity().body(new ErrorMessage(s));\n    }\n\n}\n</code></pre>\n<p>My body DTO:</p>\n<pre><code>public class Payload {\n    public Payload() {}\n    \n    public Payload(String name) {\n        super();\n        this.name = name;\n    }\n\n    @NotNull(message = &quot;name required&quot;)\n    private String name;\n    \n    public String getName() { return name; }\n}\n</code></pre>\n<p>Test result (neither status nor body response are changed since RestControllerAdivce is not invoked):</p>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = POST\n      Request URI = /api/post\n       Parameters = {}\n          Headers = []\n             Body = &lt;no character encoding set&gt;\n    Session Attrs = {}\n\nHandler:\n             Type = com.example.demo.controller.MyController\n           Method = com.example.demo.controller.MyController#post(Payload)\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = org.springframework.http.converter.HttpMessageNotReadableException\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 400\n    Error message = null\n          Headers = []\n     Content type = null\n             Body = \n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n</code></pre>\n<p>However, same code with an integration test (using @SpringBootTest and TestRestTemplate) is working well.</p>\n<p>What am I doing wrong?.</p>\n<p>Thanks.</p>\n"},{"tags":["java","binary-search"],"comments":[{"owner":{"account_id":7181840,"reputation":1565,"user_id":5485454,"display_name":"Kai-Sheng Yang"},"score":0,"creation_date":1649866738,"post_id":71860590,"comment_id":126986160,"body_markdown":"Can you post your test data ?","body":"Can you post your test data ?"},{"owner":{"account_id":24422841,"reputation":110,"user_id":18464679,"display_name":"ubw"},"score":0,"creation_date":1649866816,"post_id":71860590,"comment_id":126986190,"body_markdown":"It works. I tested your method with the following code:         `System.out.println(binarySearch(new String[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }, &quot;a&quot;));\nSystem.out.println(binarySearch(new String[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }, &quot;b&quot;));\nSystem.out.println(binarySearch(new String[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }, &quot;c&quot;));`","body":"It works. I tested your method with the following code:         <code>System.out.println(binarySearch(new String[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }, &quot;a&quot;)); System.out.println(binarySearch(new String[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }, &quot;b&quot;)); System.out.println(binarySearch(new String[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; }, &quot;c&quot;));</code>"}],"answers":[{"tags":[],"owner":{"account_id":21208365,"reputation":260,"user_id":15597511,"display_name":"Daksh Rawal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649866911,"creation_date":1649866911,"answer_id":71860773,"question_id":71860590,"body_markdown":"add an extra variable and set it to -1;\r\n\r\n    int loc=-1;\r\n\r\nchange the code\r\n\r\n    int mid=low+(high-low)/2;\r\n\r\nto\r\n\r\n     int mid=(low+high)/2;\r\n     if(x.compareTo(array[mid]==0)\r\n     {\r\n      loc=mid;\r\n      break;\r\n     }\r\n     else if(x&lt;array[mid])\r\n     {\r\n      last=mid-1;\r\n     }\r\n     else\r\n     {\r\n       low=mid+1;\r\n     }\r\n\r\n\r\nthen \r\n\r\n    if(loc&gt;=0)\r\n    {\r\n     System.out.println(loc+1);\r\n    } \r\n    else\r\n    {\r\n      System.out.println(&quot;no element&quot;);\r\n    }\r\n","title":"Logic Error: Binary search fails with more than two elements in a string array","body":"<p>add an extra variable and set it to -1;</p>\n<pre><code>int loc=-1;\n</code></pre>\n<p>change the code</p>\n<pre><code>int mid=low+(high-low)/2;\n</code></pre>\n<p>to</p>\n<pre><code> int mid=(low+high)/2;\n if(x.compareTo(array[mid]==0)\n {\n  loc=mid;\n  break;\n }\n else if(x&lt;array[mid])\n {\n  last=mid-1;\n }\n else\n {\n   low=mid+1;\n }\n</code></pre>\n<p>then</p>\n<pre><code>if(loc&gt;=0)\n{\n System.out.println(loc+1);\n} \nelse\n{\n  System.out.println(&quot;no element&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":19792588,"reputation":7,"user_id":14519166,"display_name":"Matt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71860773,"answer_count":1,"score":0,"last_activity_date":1649866911,"creation_date":1649865953,"question_id":71860590,"body_markdown":"The objective is to return the index of an element in a string array if present. The method uses a basic binary search using compareTo statements. With more than two elements in a tested array, the method will not detect the present element and return -1. The Java code this question is referring to is below. How do I make the binary search method work as intended?\r\n```\r\n   public static int binarySearch(String[] array, String x) {\r\n        int high = array.length - 1;\r\n        int low = 0;\r\n\r\n        while (low &lt;= high) {\r\n\r\n            int mid = low + (high - low) / 2;\r\n\r\n            if (x.compareTo(array[mid]) == 0) {\r\n                return mid;\r\n            }\r\n            if (x.compareTo(array[mid]) &gt; 0) {\r\n                low = mid + 1;\r\n            }\r\n            else {\r\n                high = mid - 1;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n```","title":"Logic Error: Binary search fails with more than two elements in a string array","body":"<p>The objective is to return the index of an element in a string array if present. The method uses a basic binary search using compareTo statements. With more than two elements in a tested array, the method will not detect the present element and return -1. The Java code this question is referring to is below. How do I make the binary search method work as intended?</p>\n<pre><code>   public static int binarySearch(String[] array, String x) {\n        int high = array.length - 1;\n        int low = 0;\n\n        while (low &lt;= high) {\n\n            int mid = low + (high - low) / 2;\n\n            if (x.compareTo(array[mid]) == 0) {\n                return mid;\n            }\n            if (x.compareTo(array[mid]) &gt; 0) {\n                low = mid + 1;\n            }\n            else {\n                high = mid - 1;\n            }\n        }\n        return -1;\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","heroku","deployment"],"comments":[{"owner":{"account_id":11030508,"reputation":63,"user_id":8101980,"accept_rate":75,"display_name":"DalexHD"},"score":0,"creation_date":1649855254,"post_id":71858008,"comment_id":126981074,"body_markdown":"You mean heroku right? No hiroku","body":"You mean heroku right? No hiroku"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1649855588,"post_id":71858008,"comment_id":126981217,"body_markdown":"According to git, your pom is in a subfolder, not the root folder. Is that the issue?","body":"According to git, your pom is in a subfolder, not the root folder. Is that the issue?"}],"answers":[{"tags":[],"owner":{"account_id":12495309,"reputation":11902,"user_id":9095551,"display_name":"Beppe C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649866826,"creation_date":1649866826,"answer_id":71860752,"question_id":71858008,"body_markdown":"The POM file must be in the root of the repository, see [Heroku Java guide][1]\r\n\r\n\r\n  [1]: https://devcenter.heroku.com/articles/getting-started-with-java#declare-app-dependencies","title":"hello, I can&#39;t upload my project to heroku, it says I don&#39;t have a file pom.xml but I have","body":"<p>The POM file must be in the root of the repository, see <a href=\"https://devcenter.heroku.com/articles/getting-started-with-java#declare-app-dependencies\" rel=\"nofollow noreferrer\">Heroku Java guide</a></p>\n"}],"owner":{"account_id":24336293,"reputation":5,"user_id":18511473,"display_name":"NURBEK ABDIRASULOV"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71860752,"answer_count":1,"score":0,"last_activity_date":1649866826,"creation_date":1649855187,"question_id":71858008,"body_markdown":"&gt;I get this error\r\n\r\n    -----&gt; Building on the Heroku-20 stack\r\n    -----&gt; Using buildpack: heroku/java\r\n    -----&gt; App not compatible with buildpack: https://buildpack- \r\n    registry.s3.amazonaws.com/buildpacks/heroku/java.tgz\r\n       Could not find a pom.xml file! Please check that it exists and is committed to Git.\r\n       More info: https://devcenter.heroku.com/articles/buildpacks#detection-failure\r\n    !     Push failed\r\n\r\n&gt;But I have pom.xml in my project &lt;https://github.com/Nurba1713/e-book.git&gt;\r\n\r\n&gt;Maybe this is a very stupid question, I apologize in advance, I am a beginner and self-taught.","title":"hello, I can&#39;t upload my project to heroku, it says I don&#39;t have a file pom.xml but I have","body":"<blockquote>\n<p>I get this error</p>\n</blockquote>\n<pre><code>-----&gt; Building on the Heroku-20 stack\n-----&gt; Using buildpack: heroku/java\n-----&gt; App not compatible with buildpack: https://buildpack- \nregistry.s3.amazonaws.com/buildpacks/heroku/java.tgz\n   Could not find a pom.xml file! Please check that it exists and is committed to Git.\n   More info: https://devcenter.heroku.com/articles/buildpacks#detection-failure\n!     Push failed\n</code></pre>\n<blockquote>\n<p>But I have pom.xml in my project <a href=\"https://github.com/Nurba1713/e-book.git\" rel=\"nofollow noreferrer\">https://github.com/Nurba1713/e-book.git</a></p>\n</blockquote>\n<blockquote>\n<p>Maybe this is a very stupid question, I apologize in advance, I am a beginner and self-taught.</p>\n</blockquote>\n"},{"tags":["java","logging","log4j"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1649701502,"post_id":71820796,"comment_id":126938148,"body_markdown":"Check the status logger&#39;s output (on standard output) to correct the errors in your configuration. E.g. the absolute file path `/error.log` is almost certainly not writable by your application.","body":"Check the status logger&#39;s output (on standard output) to correct the errors in your configuration. E.g. the absolute file path <code>&#47;error.log</code> is almost certainly not writable by your application."},{"owner":{"account_id":1987167,"reputation":982,"user_id":1782056,"accept_rate":57,"display_name":"Abdul"},"score":0,"creation_date":1649776976,"post_id":71820796,"comment_id":126959288,"body_markdown":"I removed the actual path in the content. I can assure that path we are trying to write have access bec before migration logs are printing and not when moved to 2.x version. I think that log4j config file is not detected when we do by program and not sure that also","body":"I removed the actual path in the content. I can assure that path we are trying to write have access bec before migration logs are printing and not when moved to 2.x version. I think that log4j config file is not detected when we do by program and not sure that also"},{"owner":{"account_id":24548949,"reputation":977,"user_id":18458353,"display_name":"Charfeddine Mohamed Ali"},"score":0,"creation_date":1649852159,"post_id":71820796,"comment_id":126979866,"body_markdown":"this may help you https://stackoverflow.com/questions/71267326/logs-not-printing-after-migrating-from-log4j-1-2-17-to-log4j2-2-17-1 or this https://stackoverflow.com/questions/70578685/not-able-to-generate-log-when-migrate-from-log4j-1-x-to-log4j-2-x-using-bridge-j","body":"this may help you <a href=\"https://stackoverflow.com/questions/71267326/logs-not-printing-after-migrating-from-log4j-1-2-17-to-log4j2-2-17-1\" title=\"logs not printing after migrating from log4j 1 2 17 to log4j2 2 17 1\">stackoverflow.com/questions/71267326/&hellip;</a> or this <a href=\"https://stackoverflow.com/questions/70578685/not-able-to-generate-log-when-migrate-from-log4j-1-x-to-log4j-2-x-using-bridge-j\" title=\"not able to generate log when migrate from log4j 1 x to log4j 2 x using bridge j\">stackoverflow.com/questions/70578685/&hellip;</a>"},{"owner":{"account_id":1987167,"reputation":982,"user_id":1782056,"accept_rate":57,"display_name":"Abdul"},"score":0,"creation_date":1649861980,"post_id":71820796,"comment_id":126984180,"body_markdown":"Let me check and update on this","body":"Let me check and update on this"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1650117606,"post_id":71820796,"comment_id":127043209,"body_markdown":"Can you run your application with `-Dlog4j2.debug=true` and check if your configuration file is read? BTW: you don&#39;t need to use programmatic configuration, just name your configuration file `log4j2.xml`.","body":"Can you run your application with <code>-Dlog4j2.debug=true</code> and check if your configuration file is read? BTW: you don&#39;t need to use programmatic configuration, just name your configuration file <code>log4j2.xml</code>."}],"answers":[{"tags":[],"owner":{"account_id":20726359,"reputation":21,"user_id":15656611,"display_name":"Andr&#225;s Devecsery"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649866446,"creation_date":1649865029,"answer_id":71860375,"question_id":71820796,"body_markdown":"I&#39;d advise to follow the second approach, but you have to use log4j 2.17.2+ version. The bridge jar has big issues in previous versions, but the devs made an effort at the start of this year to fix it. I would have made this a comment rather than an answer, but have low reputation.\r\n\r\nIn my case it was possible to make a simple jar file and overwrite the existing log4j \r\n version 1 jars with it on 200 running apps without changing any config files in the apps or on app server. How is that for an &quot;approach with minimal code changes&quot; :)","title":"log4j 1.2 to log4j 2 migration not working","body":"<p>I'd advise to follow the second approach, but you have to use log4j 2.17.2+ version. The bridge jar has big issues in previous versions, but the devs made an effort at the start of this year to fix it. I would have made this a comment rather than an answer, but have low reputation.</p>\n<p>In my case it was possible to make a simple jar file and overwrite the existing log4j\nversion 1 jars with it on 200 running apps without changing any config files in the apps or on app server. How is that for an &quot;approach with minimal code changes&quot; :)</p>\n"}],"owner":{"account_id":1987167,"reputation":982,"user_id":1782056,"accept_rate":57,"display_name":"Abdul"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2574,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1649866446,"creation_date":1649626947,"question_id":71820796,"body_markdown":"I am trying to migrate log4j from 1 to 2 and logs are not generated.\r\nI removed actual path of writing and application able to write the logs the mentioned path since logs are not printing after upgrade only\r\nLegacy code contains\r\nParent Pom\r\n\r\n    &lt;!-- \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.2.17&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    --&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;log4j-1.2-api&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.16.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.16.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.16.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nChild POM: - Updated version only\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    \t&lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\r\n    \t&lt;version&gt;1.7.25&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-ext&lt;/artifactId&gt;\r\n    \t&lt;!--  &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\r\n    \t&lt;version&gt;1.7.25&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-jcl&lt;/artifactId&gt;\r\n    \t&lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\r\n    \t&lt;version&gt;1.7.25&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;!-- \r\n    &lt;dependency&gt; \r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt; \r\n    \t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; \r\n    \t&lt;version&gt;1.7.5&lt;/version&gt; \r\n    \t&lt;/dependency&gt; \r\n    --&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.17.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt;\r\n    \t&lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\r\n    \t&lt;version&gt;1.7.25&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n    \t&lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\r\n    \t&lt;version&gt;1.7.25&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nlog4j -&gt; xml\r\n\r\n    &lt;log4j:configuration&gt;\r\n    \t&lt;appender name=&quot;stdout&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\r\n    \t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n    \t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\r\n    \t\t&lt;/layout&gt;\r\n    \t\t&lt;filter class=&quot;org.apache.log4j.varia.LevelRangeFilter&quot;&gt;\r\n    \t\t\t&lt;param name=&quot;LevelMin&quot; value=&quot;DEBUG&quot; /&gt;\r\n    \t\t\t&lt;param name=&quot;LevelMax&quot; value=&quot;INFO&quot; /&gt;\r\n    \t\t\t&lt;param name=&quot;AcceptOnMatch&quot; value=&quot;true&quot; /&gt;\r\n    \t\t&lt;/filter&gt;\r\n    \t&lt;/appender&gt;\r\n    \r\n    \t&lt;appender name=&quot;errout&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\r\n    \t\t&lt;param name=&quot;Target&quot; value=&quot;System.Err&quot; /&gt;\r\n    \t\t&lt;param name=&quot;Threshold&quot; value=&quot;WARN&quot; /&gt;\r\n    \t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n    \t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\r\n    \t\t&lt;/layout&gt;\r\n    \t&lt;/appender&gt;\r\n    \r\n    \t&lt;appender name=&quot;userLog&quot; class=&quot;com.test.RollingFileAppender&quot;&gt;\r\n    \t\t&lt;param name=&quot;File&quot; value=&quot;userlogs.log&quot; /&gt;\r\n    \t\t&lt;param name=&quot;Threshold&quot; value=&quot;INFO&quot; /&gt;\r\n    \t\t&lt;param name=&quot;MaxFileSize&quot; value=&quot;50MB&quot; /&gt;\r\n    \t\t&lt;param name=&quot;MaxBackupIndex&quot; value=&quot;5&quot; /&gt;\r\n    \t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n    \t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;%m | [%d{ISO8601}] | [%t]%n&quot; /&gt;\r\n    \t\t&lt;/layout&gt;\r\n    \t&lt;/appender&gt;\r\n    \r\n    \t&lt;appender name=&quot;errorLog&quot; class=&quot;com.test.RollingFileAppender&quot;&gt;\r\n    \t\t&lt;param name=&quot;File&quot; value=&quot;error.log&quot; /&gt;\r\n    \t\t&lt;param name=&quot;Threshold&quot; value=&quot;ERROR&quot; /&gt;\r\n    \t\t&lt;param name=&quot;MaxFileSize&quot; value=&quot;50MB&quot; /&gt;\r\n    \t\t&lt;param name=&quot;MaxBackupIndex&quot; value=&quot;10&quot; /&gt;\r\n    \t\t&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n    \t\t\t&lt;param name=&quot;ConversionPattern&quot; value=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: - %m%n&quot; /&gt;\r\n    \t\t&lt;/layout&gt;\r\n    \t&lt;/appender&gt;\r\n    \r\n    \t&lt;category name=&quot;REQUEST_LOG&quot; additivity=&quot;false&quot;&gt;\r\n    \t\t&lt;priority value=&quot;INFO&quot; /&gt;\r\n    \t\t&lt;appender-ref ref=&quot;userLog&quot; /&gt;\r\n    \t&lt;/category&gt;\r\n    \r\n    \t&lt;root&gt;\r\n    \t\t&lt;priority value=&quot;INFO&quot; /&gt;\r\n    \t\t&lt;appender-ref ref=&quot;errorLog&quot; /&gt;\r\n    \t&lt;/root&gt;\r\n    \r\n    &lt;/log4j:configuration&gt;\r\n\r\nWe initialized log4j programatically \r\n\r\n    import java.io.File;\r\n    import java.net.URL;\r\n    \r\n    import org.apache.commons.logging.Log;\r\n    import org.apache.commons.logging.LogFactory;\r\n    import org.apache.log4j.BasicConfigurator;\r\n    import org.apache.log4j.xml.DOMConfigurator;\r\n    \r\n    import ApplicationContext;\r\n    import ResourceUtility;\r\n    import org.apache.logging.log4j.core.LoggerContext;\r\n    import org.apache.logging.log4j.LogManager;\r\n    \r\n    public class Initializer implements Startable {\r\n    \r\n    \tprivate static Log logger = null;\r\n    \tprivate static boolean logsPathSet = false;\r\n    \r\n    \tprivate static String logsPath = &quot;&quot;;\r\n    \r\n    \tstatic {\r\n    \t\tBasicConfigurator.configure();\r\n    \t\tlogger = LogFactory.getLog(Initializer.class);\r\n    \t}\r\n    \r\n    \tpublic static void initialize() {\r\n    \t\tlogsPath = System.getProperty(&quot;log4j.configuration&quot;,&quot;&quot;);\r\n    \t\tlogsPathSet = (logsPath != null &amp;&amp; !logsPath.equals(&quot;&quot;));\r\n    \t\tinitializeLogging();\r\n    \t\tApplicationContext.getInstance();\r\n    \t}\r\n    \r\n    \tpublic static void initializeLogging() {\r\n    \t\tString configFile = &quot;&quot;;\r\n    \t\tURL aURL  = null;\r\n    \t\t\r\n    \t\tif ( logsPathSet ) {\r\n    \t\t\tconfigFile  = logsPath;\r\n    \t\t\taURL = ResourceUtility.geUrlResource(configFile);\r\n    \t\t}\r\n    \t\t\r\n    \t\tif ( (!logsPathSet) || ( logsPathSet &amp;&amp; aURL == null) ) {\r\n    \t\t\tconfigFile = ApplicationContext.getInstance().getStringProperty(&quot;logging&quot;, &quot;log4j&quot;, &quot;configFile&quot;);\r\n    \t\t\taURL = ResourceUtility.geUrlResource(configFile);\r\n    \t\t}\r\n    \t\tDOMConfigurator.configure(aURL);\r\n    \t\tlogger = LogFactory.getLog(Initializer.class);\r\n    \t\tlogger.info(&quot;Configured Logging from: &quot; + aURL);\r\n    \t}\r\n    }\r\n\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.apache.commons.logging.Log;\r\n    import org.apache.commons.logging.LogFactory;\r\n    import org.apache.log4j.PropertyConfigurator;\r\n    \r\n    import ApplicationContext;\r\n    import Initializer;\r\n    import ResourceUtility;\r\n    \r\n        public class Startup extends HttpServlet {\r\n        \r\n        \tprivate static Log logger = LogFactory.getFactory().getInstance(Startup.class);\r\n        \tpublic void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {}\r\n        \tpublic void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {}\r\n        \t\r\n        \tpublic void init() throws ServletException {\r\n        \t\tsuper.init();\r\n        \t\tApplicationContext.getInstance();\r\n        \t\tInitializer.initialize();\r\n        \t\tString loggingProperty = &quot;/&quot; + ApplicationContext.getInstance().getProperty(&quot;logging&quot;, &quot;log4j&quot;, &quot;configFile&quot;);\r\n        \t\tloggingFile = ResourceUtility.getFileResource(loggingProperty);\r\n        \t\tPropertyConfigurator.configure(loggingFile.toString());\r\n        \t}\r\n        \r\n        }\r\n\r\nI tried with couple of approach.\r\nApproach 1 -&gt; Migrating log4j 1 to 2 directly and updated log4j connfig\r\n\r\nSystem.out -&gt; SYSTEM_OUT -&gt; tried with bith target\r\n\r\nUpdated log4j xml file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration&gt;\r\n    \t&lt;Appenders&gt;\r\n    \t\t&lt;Console name=&quot;console&quot; target=&quot;System.out&quot;&gt;\r\n    \t\t\t&lt;PatternLayout pattern=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\r\n    \t\t\t&lt;LevelRangeFilter minLevel=&quot;DEBUG&quot; maxLevel=&quot;INFO&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;NEUTRAL&quot; /&gt;\r\n    \t\t&lt;/Console&gt;\r\n    \t\t&lt;Console name=&quot;consoleError&quot; target=&quot;System.Err&quot; follow=&quot;true&quot;&gt;\r\n    \t\t\t&lt;PatternLayout pattern=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\r\n    \t\t\t&lt;ThresholdFilter level=&quot;WARN&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;NEUTRAL&quot; /&gt;\r\n    \t\t&lt;/Console&gt;\r\n    \r\n    \t\t&lt;RollingFile name=&quot;userLog&quot; fileName=&quot;/userlogs.log&quot;  filePattern=&quot;/userlogs.log.%d{yyyyMMdd}&quot;&gt;\r\n    \t\t\t&lt;PatternLayout pattern=&quot;%m | [%d{ISO8601}] | [%t]%n&quot; /&gt;\r\n    \t\t\t&lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot; /&gt;\r\n    \t\t&lt;/RollingFile&gt;\r\n    \t\t\t\r\n    \t\t&lt;RollingFile name=&quot;errorLog&quot; fileName=&quot;/error.log&quot;  filePattern=&quot;/error.log.%d{yyyyMMdd}&quot;&gt;\r\n    \t\t\t&lt;PatternLayout pattern=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: - %m%n&quot; /&gt;\r\n    \t\t\t&lt;ThresholdFilter level=&quot;ERROR&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot; /&gt;\r\n    \t\t&lt;/RollingFile&gt;\r\n    \t&lt;/Appenders&gt;\r\n    \r\n    \t&lt;Loggers&gt;\r\n    \t\t&lt;Logger name=&quot;REQUEST_LOG&quot; additivity=&quot;false&quot;&gt;\r\n    \t\t\t&lt;AppenderRef  ref=&quot;userRequestLog&quot; level=&quot;INFO&quot; /&gt;\r\n    \t\t&lt;/Logger&gt;\r\n    \t\t&lt;Root  level=&quot;INFO&quot;&gt;\r\n    \t\t\t&lt;AppenderRef  ref=&quot;errorLog&quot;/&gt;\r\n    \t\t&lt;/Root &gt;\r\n    \t&lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nUpdated Initalizer class\r\n\r\n    //BasicConfigurator.configure();\r\n    Configurator.initialize(new DefaultConfiguration());\r\n\r\n    // DOMConfigurator.configure(aURL);\r\n    \t\t\r\n    LoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\r\n    loggingFile = ResourceUtility.getFileResource(configFile);\r\n    context.setConfigLocation(loggingFile.toURI());\r\n    context.reconfigure();\r\n    \r\n\tConfigurationFactory.setConfigurationFactory(new XmlConfigurationFactory());\r\n    Configurator.reconfigure(loggingFile.toURI());\r\n\r\n\r\nUpdated startup into\r\n\r\n    // PropertyConfigurator.configure(loggingFile.toString());\r\n    \t\tConfigurationFactory.setConfigurationFactory(new XmlConfigurationFactory());\r\n    \t\tLoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\r\n    \t\t//Configurator.reconfigure(loggingFile.toURI());\r\n    \t\tcontext.setConfigLocation(loggingFile.toURI());\r\n    \t\tcontext.reconfigure();\r\n\r\nLogs are not generated for the above approach\r\n\r\nApproach 2 -&gt;\r\n Same changes by adding bridge jar -&gt; skipped log4j xml changes \r\n\r\n\r\nThanks in advance for any recommendation or changes or approach or can you please share steps you followed while migrate the same or share the approach with minimal code changes.","title":"log4j 1.2 to log4j 2 migration not working","body":"<p>I am trying to migrate log4j from 1 to 2 and logs are not generated.\nI removed actual path of writing and application able to write the logs the mentioned path since logs are not printing after upgrade only\nLegacy code contains\nParent Pom</p>\n<pre><code>&lt;!-- \n    &lt;dependency&gt;\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.17&lt;/version&gt;\n    &lt;/dependency&gt;\n--&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-1.2-api&lt;/artifactId&gt;\n    &lt;version&gt;2.16.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n    &lt;version&gt;2.16.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n    &lt;version&gt;2.16.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Child POM: - Updated version only</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\n    &lt;version&gt;1.7.25&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-ext&lt;/artifactId&gt;\n    &lt;!--  &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\n    &lt;version&gt;1.7.25&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-jcl&lt;/artifactId&gt;\n    &lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\n    &lt;version&gt;1.7.25&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- \n&lt;dependency&gt; \n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt; \n    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; \n    &lt;version&gt;1.7.5&lt;/version&gt; \n    &lt;/dependency&gt; \n--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n    &lt;version&gt;2.17.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt;\n    &lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\n    &lt;version&gt;1.7.25&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n    &lt;!-- &lt;version&gt;1.7.5&lt;/version&gt; --&gt;\n    &lt;version&gt;1.7.25&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>log4j -&gt; xml</p>\n<pre><code>&lt;log4j:configuration&gt;\n    &lt;appender name=&quot;stdout&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\n        &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\n            &lt;param name=&quot;ConversionPattern&quot; value=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\n        &lt;/layout&gt;\n        &lt;filter class=&quot;org.apache.log4j.varia.LevelRangeFilter&quot;&gt;\n            &lt;param name=&quot;LevelMin&quot; value=&quot;DEBUG&quot; /&gt;\n            &lt;param name=&quot;LevelMax&quot; value=&quot;INFO&quot; /&gt;\n            &lt;param name=&quot;AcceptOnMatch&quot; value=&quot;true&quot; /&gt;\n        &lt;/filter&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;errout&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;\n        &lt;param name=&quot;Target&quot; value=&quot;System.Err&quot; /&gt;\n        &lt;param name=&quot;Threshold&quot; value=&quot;WARN&quot; /&gt;\n        &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\n            &lt;param name=&quot;ConversionPattern&quot; value=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;userLog&quot; class=&quot;com.test.RollingFileAppender&quot;&gt;\n        &lt;param name=&quot;File&quot; value=&quot;userlogs.log&quot; /&gt;\n        &lt;param name=&quot;Threshold&quot; value=&quot;INFO&quot; /&gt;\n        &lt;param name=&quot;MaxFileSize&quot; value=&quot;50MB&quot; /&gt;\n        &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;5&quot; /&gt;\n        &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\n            &lt;param name=&quot;ConversionPattern&quot; value=&quot;%m | [%d{ISO8601}] | [%t]%n&quot; /&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;errorLog&quot; class=&quot;com.test.RollingFileAppender&quot;&gt;\n        &lt;param name=&quot;File&quot; value=&quot;error.log&quot; /&gt;\n        &lt;param name=&quot;Threshold&quot; value=&quot;ERROR&quot; /&gt;\n        &lt;param name=&quot;MaxFileSize&quot; value=&quot;50MB&quot; /&gt;\n        &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;10&quot; /&gt;\n        &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\n            &lt;param name=&quot;ConversionPattern&quot; value=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: - %m%n&quot; /&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;category name=&quot;REQUEST_LOG&quot; additivity=&quot;false&quot;&gt;\n        &lt;priority value=&quot;INFO&quot; /&gt;\n        &lt;appender-ref ref=&quot;userLog&quot; /&gt;\n    &lt;/category&gt;\n\n    &lt;root&gt;\n        &lt;priority value=&quot;INFO&quot; /&gt;\n        &lt;appender-ref ref=&quot;errorLog&quot; /&gt;\n    &lt;/root&gt;\n\n&lt;/log4j:configuration&gt;\n</code></pre>\n<p>We initialized log4j programatically</p>\n<pre><code>import java.io.File;\nimport java.net.URL;\n\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.apache.log4j.BasicConfigurator;\nimport org.apache.log4j.xml.DOMConfigurator;\n\nimport ApplicationContext;\nimport ResourceUtility;\nimport org.apache.logging.log4j.core.LoggerContext;\nimport org.apache.logging.log4j.LogManager;\n\npublic class Initializer implements Startable {\n\n    private static Log logger = null;\n    private static boolean logsPathSet = false;\n\n    private static String logsPath = &quot;&quot;;\n\n    static {\n        BasicConfigurator.configure();\n        logger = LogFactory.getLog(Initializer.class);\n    }\n\n    public static void initialize() {\n        logsPath = System.getProperty(&quot;log4j.configuration&quot;,&quot;&quot;);\n        logsPathSet = (logsPath != null &amp;&amp; !logsPath.equals(&quot;&quot;));\n        initializeLogging();\n        ApplicationContext.getInstance();\n    }\n\n    public static void initializeLogging() {\n        String configFile = &quot;&quot;;\n        URL aURL  = null;\n        \n        if ( logsPathSet ) {\n            configFile  = logsPath;\n            aURL = ResourceUtility.geUrlResource(configFile);\n        }\n        \n        if ( (!logsPathSet) || ( logsPathSet &amp;&amp; aURL == null) ) {\n            configFile = ApplicationContext.getInstance().getStringProperty(&quot;logging&quot;, &quot;log4j&quot;, &quot;configFile&quot;);\n            aURL = ResourceUtility.geUrlResource(configFile);\n        }\n        DOMConfigurator.configure(aURL);\n        logger = LogFactory.getLog(Initializer.class);\n        logger.info(&quot;Configured Logging from: &quot; + aURL);\n    }\n}\n\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.apache.log4j.PropertyConfigurator;\n\nimport ApplicationContext;\nimport Initializer;\nimport ResourceUtility;\n\n    public class Startup extends HttpServlet {\n    \n        private static Log logger = LogFactory.getFactory().getInstance(Startup.class);\n        public void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {}\n        public void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {}\n        \n        public void init() throws ServletException {\n            super.init();\n            ApplicationContext.getInstance();\n            Initializer.initialize();\n            String loggingProperty = &quot;/&quot; + ApplicationContext.getInstance().getProperty(&quot;logging&quot;, &quot;log4j&quot;, &quot;configFile&quot;);\n            loggingFile = ResourceUtility.getFileResource(loggingProperty);\n            PropertyConfigurator.configure(loggingFile.toString());\n        }\n    \n    }\n</code></pre>\n<p>I tried with couple of approach.\nApproach 1 -&gt; Migrating log4j 1 to 2 directly and updated log4j connfig</p>\n<p>System.out -&gt; SYSTEM_OUT -&gt; tried with bith target</p>\n<p>Updated log4j xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;console&quot; target=&quot;System.out&quot;&gt;\n            &lt;PatternLayout pattern=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\n            &lt;LevelRangeFilter minLevel=&quot;DEBUG&quot; maxLevel=&quot;INFO&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;NEUTRAL&quot; /&gt;\n        &lt;/Console&gt;\n        &lt;Console name=&quot;consoleError&quot; target=&quot;System.Err&quot; follow=&quot;true&quot;&gt;\n            &lt;PatternLayout pattern=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: %x - %m%n&quot; /&gt;\n            &lt;ThresholdFilter level=&quot;WARN&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;NEUTRAL&quot; /&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingFile name=&quot;userLog&quot; fileName=&quot;/userlogs.log&quot;  filePattern=&quot;/userlogs.log.%d{yyyyMMdd}&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%m | [%d{ISO8601}] | [%t]%n&quot; /&gt;\n            &lt;ThresholdFilter level=&quot;INFO&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot; /&gt;\n        &lt;/RollingFile&gt;\n            \n        &lt;RollingFile name=&quot;errorLog&quot; fileName=&quot;/error.log&quot;  filePattern=&quot;/error.log.%d{yyyyMMdd}&quot;&gt;\n            &lt;PatternLayout pattern=&quot;[%d{ISO8601}] [%t] %-5p %c{1}: - %m%n&quot; /&gt;\n            &lt;ThresholdFilter level=&quot;ERROR&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot; /&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;REQUEST_LOG&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef  ref=&quot;userRequestLog&quot; level=&quot;INFO&quot; /&gt;\n        &lt;/Logger&gt;\n        &lt;Root  level=&quot;INFO&quot;&gt;\n            &lt;AppenderRef  ref=&quot;errorLog&quot;/&gt;\n        &lt;/Root &gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Updated Initalizer class</p>\n<pre><code>//BasicConfigurator.configure();\nConfigurator.initialize(new DefaultConfiguration());\n\n// DOMConfigurator.configure(aURL);\n        \nLoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\nloggingFile = ResourceUtility.getFileResource(configFile);\ncontext.setConfigLocation(loggingFile.toURI());\ncontext.reconfigure();\n\nConfigurationFactory.setConfigurationFactory(new XmlConfigurationFactory());\nConfigurator.reconfigure(loggingFile.toURI());\n</code></pre>\n<p>Updated startup into</p>\n<pre><code>// PropertyConfigurator.configure(loggingFile.toString());\n        ConfigurationFactory.setConfigurationFactory(new XmlConfigurationFactory());\n        LoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\n        //Configurator.reconfigure(loggingFile.toURI());\n        context.setConfigLocation(loggingFile.toURI());\n        context.reconfigure();\n</code></pre>\n<p>Logs are not generated for the above approach</p>\n<p>Approach 2 -&gt;\nSame changes by adding bridge jar -&gt; skipped log4j xml changes</p>\n<p>Thanks in advance for any recommendation or changes or approach or can you please share steps you followed while migrate the same or share the approach with minimal code changes.</p>\n"},{"tags":["java","pdf","indexoutofboundsexception","javax.imageio"],"comments":[{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1461166316,"post_id":36746053,"comment_id":61077931,"body_markdown":"Can you attach one of the files that causes this exception, or does it happen at random?","body":"Can you attach one of the files that causes this exception, or does it happen at random?"},{"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"score":0,"creation_date":1461214042,"post_id":36746053,"comment_id":61098825,"body_markdown":"@haraldK I think it happen randomly because I&#39;ve tried it with several files from multiple sources but I will attach some example files.","body":"@haraldK I think it happen randomly because I&#39;ve tried it with several files from multiple sources but I will attach some example files."},{"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"score":0,"creation_date":1461214398,"post_id":36746053,"comment_id":61098937,"body_markdown":"@RobertoDeLaParra is there a diffrence? the value isn&#39;t used at this position","body":"@RobertoDeLaParra is there a diffrence? the value isn&#39;t used at this position"},{"owner":{"account_id":79673,"reputation":40911,"user_id":225757,"accept_rate":72,"display_name":"Roland Illig"},"score":1,"creation_date":1461218604,"post_id":36746053,"comment_id":61100503,"body_markdown":"@finder2 in Java, writing `page++` is far more common than `++page` since the compiler can always generate good enough code. Writing `++page` comes from C++, where that operator can be defined on any type and can lead to inefficient code. Search for `pre-increment` to find lots of lengthy debates about this topic.","body":"@finder2 in Java, writing <code>page++</code> is far more common than <code>++page</code> since the compiler can always generate good enough code. Writing <code>++page</code> comes from C++, where that operator can be defined on any type and can lead to inefficient code. Search for <code>pre-increment</code> to find lots of lengthy debates about this topic."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1461226294,"post_id":36746053,"comment_id":61105352,"body_markdown":"@RolandIllig, RobertoDeLaParra: While it certainly looks unfamiliar in Java, and I&#39;m sure you mean to be helpful, it really [doesn&#39;t make a difference](http://stackoverflow.com/questions/1918196/why-doesnt-changing-the-pre-to-the-post-increment-at-the-iteration-part-of-a-fo), and draws the attention away from the real problem the OP has. The exception is *not* related to pre- or postfix operators.","body":"@RolandIllig, RobertoDeLaParra: While it certainly looks unfamiliar in Java, and I&#39;m sure you mean to be helpful, it really <a href=\"http://stackoverflow.com/questions/1918196/why-doesnt-changing-the-pre-to-the-post-increment-at-the-iteration-part-of-a-fo\">doesn&#39;t make a difference</a>, and draws the attention away from the real problem the OP has. The exception is <i>not</i> related to pre- or postfix operators."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1461226481,"post_id":36746053,"comment_id":61105492,"body_markdown":"@finder2 Did you experience the exception with the exact file you attached (the PNG)? Because I see nothing wrong with it, neither do I get an exception trying to read it using `ImageIO`. If so, the problem must be with the reading code only... Can you post all of it? Otherwise, please link an image where the exception happened (even if it&#39;s broken, that is point).","body":"@finder2 Did you experience the exception with the exact file you attached (the PNG)? Because I see nothing wrong with it, neither do I get an exception trying to read it using <code>ImageIO</code>. If so, the problem must be with the reading code only... Can you post all of it? Otherwise, please link an image where the exception happened (even if it&#39;s broken, that is point)."},{"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"score":0,"creation_date":1461227543,"post_id":36746053,"comment_id":61106276,"body_markdown":"@haraldK no it&#39;s realy randomly. I&#39;ve discoverd that the problem is caused by the adding of the Title. Sometimes there are 5 exceptions and sometimes nothing occurs.","body":"@haraldK no it&#39;s realy randomly. I&#39;ve discoverd that the problem is caused by the adding of the Title. Sometimes there are 5 exceptions and sometimes nothing occurs."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1461228214,"post_id":36746053,"comment_id":61106765,"body_markdown":"When adding the title, are you overwriting an existing file? And perhaps reading this in a multithreaded environment? It&#39;s not really clear (to me at least) how all the code snippets you have posted fits together, so I&#39;m unable to reproduce the exception. Try to isolate the problem and create a standalone program that exposes the exception, and you are much more likely to get help.","body":"When adding the title, are you overwriting an existing file? And perhaps reading this in a multithreaded environment? It&#39;s not really clear (to me at least) how all the code snippets you have posted fits together, so I&#39;m unable to reproduce the exception. Try to isolate the problem and create a standalone program that exposes the exception, and you are much more likely to get help."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1461235824,"post_id":36746053,"comment_id":61112336,"body_markdown":"PS: It would also help if you could run your code through a debugger, and put a breakpoint at `MemoryCacheImageInputStream` line 100, just to see exactly which one of the conditions are met.","body":"PS: It would also help if you could run your code through a debugger, and put a breakpoint at <code>MemoryCacheImageInputStream</code> line 100, just to see exactly which one of the conditions are met."},{"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"score":0,"creation_date":1461302021,"post_id":36746053,"comment_id":61145982,"body_markdown":"@haraldK I&#39;ve debugged it. At line 100 there was everything fine when the exception was thrown.","body":"@haraldK I&#39;ve debugged it. At line 100 there was everything fine when the exception was thrown."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1461303508,"post_id":36746053,"comment_id":61146637,"body_markdown":"I don&#39;t understand... If everything is fine, you don&#39;t reach line 100 at all. But seems you solved your problem anyway.","body":"I don&#39;t understand... If everything is fine, you don&#39;t reach line 100 at all. But seems you solved your problem anyway."},{"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"score":0,"creation_date":1461324239,"post_id":36746053,"comment_id":61159283,"body_markdown":"@haraldK I had debugged and if i went up in the stacktrace the values were fine. So I didn&#39;t understoot it","body":"@haraldK I had debugged and if i went up in the stacktrace the values were fine. So I didn&#39;t understoot it"}],"answers":[{"tags":[],"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461302330,"creation_date":1461301958,"answer_id":36785347,"question_id":36746053,"body_markdown":"I have solved my Problem. I hadn&#39;t wait for the writing of the Image. Now I wait for the finish of the ExecutorService and everything works fine.\r\n\r\nI think there was a problem to free resources, since I&#39;ve seen that at MemoryCacheImageInputStream line 100 every thing was fine when the exception was thrown.","title":"ArrayOutOfBoundsException while reading Image from Disk","body":"<p>I have solved my Problem. I hadn't wait for the writing of the Image. Now I wait for the finish of the ExecutorService and everything works fine.</p>\n\n<p>I think there was a problem to free resources, since I've seen that at MemoryCacheImageInputStream line 100 every thing was fine when the exception was thrown.</p>\n"}],"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":297,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1649866383,"creation_date":1461160403,"question_id":36746053,"body_markdown":"At the moment I&#39;m trying to print some pdfs in java. The API used is Apache PDF Box in Version 2.0. After converting the images I write them to disk to save memory. In the next step I read them again and write the title in the head of the image. After that I write them again. To use them I read them again separately. When I read them for the last time I get the following exception every 200-300 images:\r\n\r\n    java.lang.IndexOutOfBoundsException: off &lt; 0 || len &lt; 0 || off+len &gt; b.length || off+len &lt; 0!\r\n\tat javax.imageio.stream.MemoryCacheImageInputStream.read(MemoryCacheImageInputStream.java:100)\r\n\t  at com.sun.imageio.plugins.common.SubImageInputStream.read(SubImageInputStream.java:61)\r\n\t  at com.sun.imageio.plugins.common.InputStreamAdapter.read(InputStreamAdapter.java:47)\r\n\t  at java.io.SequenceInputStream.read(SequenceInputStream.java:207)\r\n\t  at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:238)\r\n\t  at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)\r\n\t  at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)\r\n\t  at java.io.BufferedInputStream.read(BufferedInputStream.java:265)\r\n\t  at java.io.FilterInputStream.read(FilterInputStream.java:83)\r\n\t  at com.sun.imageio.plugins.png.PNGImageReader.decodePass(PNGImageReader.java:1104)\r\n\t  at com.sun.imageio.plugins.png.PNGImageReader.decodeImage(PNGImageReader.java:1215)\r\n\t  at com.sun.imageio.plugins.png.PNGImageReader.readImage(PNGImageReader.java:1330)\r\n\t  at com.sun.imageio.plugins.png.PNGImageReader.read(PNGImageReader.java:1606)\r\n\t  at javax.imageio.ImageIO.read(ImageIO.java:1448)\r\n\t  at javax.imageio.ImageIO.read(ImageIO.java:1400)\r\n      at my.code.Class.method()\r\n\r\nI use the following code to convert the PDFs:\r\n\r\n    final HashMap&lt;Integer, File&gt; images = new HashMap&lt;&gt;();\r\n    PDDocument document = PDDocument.load(sourceFile);\r\n\r\n\tPDFRenderer pdfRenderer = new PDFRenderer(document);\r\n\tfinal ExecutorService service = Executors.newFixedThreadPool(4);\r\n\tfor (int page = 0; page &lt; document.getNumberOfPages(); ++page)\r\n\t{\r\n\t\tfinal int finalPageNumber = page;\r\n\t\tRunnable r = () -&gt; {\r\n\t\t\ttry\r\n\t\t\t{\r\n                //Java could only print with 72 dpi so I&#39;ll use it\r\n\t\t\t\tBufferedImage image = pdfRenderer.renderImageWithDPI(finalPageNumber, 72);\r\n\t\t\t\tFile imageFile = new File(sourceFile.getAbsolutePath() + &quot;-&quot; + (finalPageNumber + 1) + &quot;.png&quot;);\r\n\t\t\t\tImageIO.write(image, &quot;png&quot;, imageFile);\r\n\t\t\t\timage.flush();\r\n\t\t\t\timages.put(finalPageNumber, imageFile);\r\n\t\t\t}\r\n\t\t\tcatch (final IOException e)\r\n\t\t\t{\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t};\r\n\t\tThread t = new Thread(r, page + &quot;&quot;);\r\n\t\tt.setName(&quot;&quot; + page);\r\n\t\tservice.submit(t);\r\n\t}\r\n\r\nAnd for reading is the following code used:\r\n\r\n    // example url: /tmp/example.pdf-17.png\r\n    Image i = ImageIO.read(url);\r\n\r\nWhat about to solve this problem\r\n\r\n----------\r\n\r\n**edit**\r\n\r\nWhat I&#39;ve forgotten to say I add a Title manually to the Image:\r\n\r\n\r\n                    BufferedImage bimage = new BufferedImage(\tsimple.getValue().getWidth(null),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsimple.getValue().getHeight(null) + 50,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBufferedImage.TYPE_INT_ARGB);\r\n\t\t\t\t\tGraphics bGr = bimage.createGraphics();\r\n\t\t\t\t\tbGr.setColor(Color.WHITE);\r\n\t\t\t\t\tbGr.fillRect(0, 0, bimage.getWidth(), bimage.getHeight());\r\n\t\t\t\t\tbGr.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 15));\r\n\t\t\t\t\tbGr.setColor(Color.BLACK);\r\n\t\t\t\t\tbGr.drawImage(simple.getValue(), 0, 50, null);\r\n\t\t\t\t\tbGr.drawString(entry.getValue(), 20, 20);\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tImageIO.write(bimage, &quot;PNG&quot;, new File(simple.getKey().toURI()));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (IOException | URISyntaxException e)\r\n\t\t\t\t\t{\t\t\t\t\t\t\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbGr.dispose();\r\n\r\nAnd here are the links to the files (It could occur with every page):\r\n\r\n[Image which throws the exception][1]\r\n\r\n[PDF file which is used (generated by Word2007)][2]\r\n\r\n\r\n  [1]: https://www.dropbox.com/s/exhnv7b6mjjujkq/exception-image.png?dl=0\r\n  [2]: https://www.dropbox.com/s/yudx1esseo0ldgi/This%20is%20an%20Example.pdf?dl=0\r\n","title":"ArrayOutOfBoundsException while reading Image from Disk","body":"<p>At the moment I'm trying to print some pdfs in java. The API used is Apache PDF Box in Version 2.0. After converting the images I write them to disk to save memory. In the next step I read them again and write the title in the head of the image. After that I write them again. To use them I read them again separately. When I read them for the last time I get the following exception every 200-300 images:</p>\n<pre><code>java.lang.IndexOutOfBoundsException: off &lt; 0 || len &lt; 0 || off+len &gt; b.length || off+len &lt; 0!\nat javax.imageio.stream.MemoryCacheImageInputStream.read(MemoryCacheImageInputStream.java:100)\n  at com.sun.imageio.plugins.common.SubImageInputStream.read(SubImageInputStream.java:61)\n  at com.sun.imageio.plugins.common.InputStreamAdapter.read(InputStreamAdapter.java:47)\n  at java.io.SequenceInputStream.read(SequenceInputStream.java:207)\n  at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:238)\n  at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)\n  at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)\n  at java.io.BufferedInputStream.read(BufferedInputStream.java:265)\n  at java.io.FilterInputStream.read(FilterInputStream.java:83)\n  at com.sun.imageio.plugins.png.PNGImageReader.decodePass(PNGImageReader.java:1104)\n  at com.sun.imageio.plugins.png.PNGImageReader.decodeImage(PNGImageReader.java:1215)\n  at com.sun.imageio.plugins.png.PNGImageReader.readImage(PNGImageReader.java:1330)\n  at com.sun.imageio.plugins.png.PNGImageReader.read(PNGImageReader.java:1606)\n  at javax.imageio.ImageIO.read(ImageIO.java:1448)\n  at javax.imageio.ImageIO.read(ImageIO.java:1400)\n  at my.code.Class.method()\n</code></pre>\n<p>I use the following code to convert the PDFs:</p>\n<pre><code>final HashMap&lt;Integer, File&gt; images = new HashMap&lt;&gt;();\nPDDocument document = PDDocument.load(sourceFile);\n\nPDFRenderer pdfRenderer = new PDFRenderer(document);\nfinal ExecutorService service = Executors.newFixedThreadPool(4);\nfor (int page = 0; page &lt; document.getNumberOfPages(); ++page)\n{\n    final int finalPageNumber = page;\n    Runnable r = () -&gt; {\n        try\n        {\n            //Java could only print with 72 dpi so I'll use it\n            BufferedImage image = pdfRenderer.renderImageWithDPI(finalPageNumber, 72);\n            File imageFile = new File(sourceFile.getAbsolutePath() + &quot;-&quot; + (finalPageNumber + 1) + &quot;.png&quot;);\n            ImageIO.write(image, &quot;png&quot;, imageFile);\n            image.flush();\n            images.put(finalPageNumber, imageFile);\n        }\n        catch (final IOException e)\n        {\n            e.printStackTrace();\n        }\n    };\n    Thread t = new Thread(r, page + &quot;&quot;);\n    t.setName(&quot;&quot; + page);\n    service.submit(t);\n}\n</code></pre>\n<p>And for reading is the following code used:</p>\n<pre><code>// example url: /tmp/example.pdf-17.png\nImage i = ImageIO.read(url);\n</code></pre>\n<p>What about to solve this problem</p>\n<hr />\n<p><strong>edit</strong></p>\n<p>What I've forgotten to say I add a Title manually to the Image:</p>\n<pre><code>                BufferedImage bimage = new BufferedImage(   simple.getValue().getWidth(null),\n                                                                        simple.getValue().getHeight(null) + 50,\n                                                                        BufferedImage.TYPE_INT_ARGB);\n                Graphics bGr = bimage.createGraphics();\n                bGr.setColor(Color.WHITE);\n                bGr.fillRect(0, 0, bimage.getWidth(), bimage.getHeight());\n                bGr.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 15));\n                bGr.setColor(Color.BLACK);\n                bGr.drawImage(simple.getValue(), 0, 50, null);\n                bGr.drawString(entry.getValue(), 20, 20);\n                try\n                {\n                    ImageIO.write(bimage, &quot;PNG&quot;, new File(simple.getKey().toURI()));\n                }\n                catch (IOException | URISyntaxException e)\n                {                       \n                    e.printStackTrace();\n                }\n                bGr.dispose();\n</code></pre>\n<p>And here are the links to the files (It could occur with every page):</p>\n<p><a href=\"https://www.dropbox.com/s/exhnv7b6mjjujkq/exception-image.png?dl=0\" rel=\"nofollow noreferrer\">Image which throws the exception</a></p>\n<p><a href=\"https://www.dropbox.com/s/yudx1esseo0ldgi/This%20is%20an%20Example.pdf?dl=0\" rel=\"nofollow noreferrer\">PDF file which is used (generated by Word2007)</a></p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"score":0,"creation_date":1649711405,"post_id":71827301,"comment_id":126941204,"body_markdown":"Can you provide more of your Code? The mapper Code you wrote and the Classes you are trying to map","body":"Can you provide more of your Code? The mapper Code you wrote and the Classes you are trying to map"},{"owner":{"account_id":16796337,"reputation":71,"user_id":12142726,"display_name":"ovod"},"score":0,"creation_date":1649749719,"post_id":71827301,"comment_id":126948630,"body_markdown":"hi @GJohannes thanks for responding, code is added","body":"hi @GJohannes thanks for responding, code is added"}],"answers":[{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649777152,"creation_date":1649756102,"answer_id":71840313,"question_id":71827301,"body_markdown":"I am not sure that i completly understand your Code. My approach would look something like this. However your types in the list seem not to match.\r\n\r\n    public interface TestMapper {\r\n\r\n        @Mapping(target = &quot;list0&quot;, ignore = true)\r\n        @Mapping(target = &quot;list&quot;, ignore = true)\r\n        A toA(A1 a1);\r\n\r\n        @AfterMapping\r\n        default void mapperCode(@MappingTarget A a, A1 a1) {\r\n            List&lt;A.B&gt; list = a.getList(); // target list requiures Type A.B \r\n            A1.B1 b1 = a1.getB1(); // source does have A1.B1 and not A.B as type\r\n            // if your Types match set the list here manually like \r\n            // a.setList(List.of(a1.getB()));\r\n        }\r\n\r\n    }\r\n\r\nYour code is har dto read using only A,B,A1,B1,... . I Would suggest you use real names. \r\n\r\n\r\nEDIT:\r\n\r\na Working but really ugly solution would be doing it manually. I am not sure if that helps you. \r\n\r\n    public interface TestMapper {\r\n\r\n    @Mapping(target = &quot;list&quot;, ignore = true)\r\n    FirstLvl map(FirstLvlDTO firstLvlDTO);\r\n\r\n    @AfterMapping\r\n    default void mapperCode(@MappingTarget FirstLvl firstLvl, FirstLvlDTO firstLvlDTO) {\r\n        String str1 = firstLvlDTO.getSecondLvlDTO().getThirdLvlDTO().getFourthLvlDTO().getStr1();\r\n        String str2 = firstLvlDTO.getSecondLvlDTO().getThirdLvlDTO().getFourthLvlDTO().getStr2();\r\n        FirstLvl.SecondLvl secondLvl = new FirstLvl.SecondLvl();\r\n        FirstLvl.SecondLvl.ThirdLvl thirdLvl = new FirstLvl.SecondLvl.ThirdLvl();\r\n        secondLvl.setThirdLvl(thirdLvl);\r\n        FourthLvl fourthLvl = new FourthLvl();\r\n        thirdLvl.setFourthLvl(fourthLvl);\r\n        FourthLvl.FithLvl fithLvl = new FourthLvl.FithLvl(str1, str2);\r\n        fourthLvl.setFithLvl(fithLvl);\r\n        firstLvl.setList(Arrays.asList(secondLvl));\r\n    }\r\n\r\n    }\r\n\r\n    @Data\r\n    public class FourthLvl {\r\n    protected FourthLvl.FithLvl fithLvl;\r\n\r\n    @Data\r\n    public static class FithLvl {\r\n\r\n        public FithLvl(String str1, String str2){\r\n            this.str1 = str1;\r\n            this.str2 = str2;\r\n        }\r\n\r\n        protected String str1;\r\n        protected String str2;\r\n\r\n    }\r\n}\r\n\r\n\r\n","title":"How to get element of List in target(for mapping) if source doesn&#39;t contain this list?","body":"<p>I am not sure that i completly understand your Code. My approach would look something like this. However your types in the list seem not to match.</p>\n<pre><code>public interface TestMapper {\n\n    @Mapping(target = &quot;list0&quot;, ignore = true)\n    @Mapping(target = &quot;list&quot;, ignore = true)\n    A toA(A1 a1);\n\n    @AfterMapping\n    default void mapperCode(@MappingTarget A a, A1 a1) {\n        List&lt;A.B&gt; list = a.getList(); // target list requiures Type A.B \n        A1.B1 b1 = a1.getB1(); // source does have A1.B1 and not A.B as type\n        // if your Types match set the list here manually like \n        // a.setList(List.of(a1.getB()));\n    }\n\n}\n</code></pre>\n<p>Your code is har dto read using only A,B,A1,B1,... . I Would suggest you use real names.</p>\n<p>EDIT:</p>\n<p>a Working but really ugly solution would be doing it manually. I am not sure if that helps you.</p>\n<pre><code>public interface TestMapper {\n\n@Mapping(target = &quot;list&quot;, ignore = true)\nFirstLvl map(FirstLvlDTO firstLvlDTO);\n\n@AfterMapping\ndefault void mapperCode(@MappingTarget FirstLvl firstLvl, FirstLvlDTO firstLvlDTO) {\n    String str1 = firstLvlDTO.getSecondLvlDTO().getThirdLvlDTO().getFourthLvlDTO().getStr1();\n    String str2 = firstLvlDTO.getSecondLvlDTO().getThirdLvlDTO().getFourthLvlDTO().getStr2();\n    FirstLvl.SecondLvl secondLvl = new FirstLvl.SecondLvl();\n    FirstLvl.SecondLvl.ThirdLvl thirdLvl = new FirstLvl.SecondLvl.ThirdLvl();\n    secondLvl.setThirdLvl(thirdLvl);\n    FourthLvl fourthLvl = new FourthLvl();\n    thirdLvl.setFourthLvl(fourthLvl);\n    FourthLvl.FithLvl fithLvl = new FourthLvl.FithLvl(str1, str2);\n    fourthLvl.setFithLvl(fithLvl);\n    firstLvl.setList(Arrays.asList(secondLvl));\n}\n\n}\n\n@Data\npublic class FourthLvl {\nprotected FourthLvl.FithLvl fithLvl;\n\n@Data\npublic static class FithLvl {\n\n    public FithLvl(String str1, String str2){\n        this.str1 = str1;\n        this.str2 = str2;\n    }\n\n    protected String str1;\n    protected String str2;\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":23191137,"reputation":1266,"user_id":17287498,"display_name":"Ben Zegveld"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649866117,"creation_date":1649795837,"answer_id":71848849,"question_id":71827301,"body_markdown":"Mapstruct does not support many-to-one or one-to-many mappings, these need to be manually implemented.\r\n\r\nhere you find a working example for your classes:\r\n```java\r\n@Mapper\r\npublic abstract class LevelMapper {\r\n\r\n    @Mapping( target = &quot;secondLvlDTO&quot;, source = &quot;list&quot; )\r\n    public abstract FirstLvlDTO map(FirstLvl lvl);\r\n\r\n    // used by the manual implementation to continue mapping.\r\n    @Mapping( target = &quot;thirdLvlDTO.fourthLvlDTO&quot;, source = &quot;thirdLvl.fourthLvl.fithLvl&quot; )\r\n    protected abstract SecondLvlDTO map(SecondLvl lvl);\r\n\r\n    // manually implementation for getting the first object from the list and converting it.\r\n    protected SecondLvlDTO getFirst(List&lt;SecondLvl&gt; list) {\r\n        return map( list.get( 0 ) );\r\n    }\r\n\r\n// the reverse\r\n    \r\n    @Mapping( target = &quot;list&quot;, source = &quot;secondLvlDTO&quot; )\r\n    public abstract FirstLvl map(FirstLvlDTO lvl);\r\n\r\n    // used by the manual implementation to continue mapping.\r\n    @Mapping( target = &quot;thirdLvl.fourthLvl.fithLvl&quot;, source = &quot;thirdLvlDTO.fourthLvlDTO&quot; )\r\n    protected abstract SecondLvl map(SecondLvlDTO lvl);\r\n\r\n    // manually implementation for creating the the list and filling it with the converted dto.\r\n    protected List&lt;SecondLvl&gt; asList(SecondLvlDTO dto) {\r\n        return Arrays.asList( map( dto ) ); // or any other way to create a list.\r\n    }\r\n}\r\n```","title":"How to get element of List in target(for mapping) if source doesn&#39;t contain this list?","body":"<p>Mapstruct does not support many-to-one or one-to-many mappings, these need to be manually implemented.</p>\n<p>here you find a working example for your classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic abstract class LevelMapper {\n\n    @Mapping( target = &quot;secondLvlDTO&quot;, source = &quot;list&quot; )\n    public abstract FirstLvlDTO map(FirstLvl lvl);\n\n    // used by the manual implementation to continue mapping.\n    @Mapping( target = &quot;thirdLvlDTO.fourthLvlDTO&quot;, source = &quot;thirdLvl.fourthLvl.fithLvl&quot; )\n    protected abstract SecondLvlDTO map(SecondLvl lvl);\n\n    // manually implementation for getting the first object from the list and converting it.\n    protected SecondLvlDTO getFirst(List&lt;SecondLvl&gt; list) {\n        return map( list.get( 0 ) );\n    }\n\n// the reverse\n    \n    @Mapping( target = &quot;list&quot;, source = &quot;secondLvlDTO&quot; )\n    public abstract FirstLvl map(FirstLvlDTO lvl);\n\n    // used by the manual implementation to continue mapping.\n    @Mapping( target = &quot;thirdLvl.fourthLvl.fithLvl&quot;, source = &quot;thirdLvlDTO.fourthLvlDTO&quot; )\n    protected abstract SecondLvl map(SecondLvlDTO lvl);\n\n    // manually implementation for creating the the list and filling it with the converted dto.\n    protected List&lt;SecondLvl&gt; asList(SecondLvlDTO dto) {\n        return Arrays.asList( map( dto ) ); // or any other way to create a list.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16796337,"reputation":71,"user_id":12142726,"display_name":"ovod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2303,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1649866117,"creation_date":1649677661,"question_id":71827301,"body_markdown":"I&#39;m trying to map next structure(succesfully map in dozer, have some problems with mapstruct)\r\nlist is absent in source, how can I get its first element in mapper?\r\nTarget class:\r\n\r\n        @Data\r\n    public class FirstLvl {\r\n            protected List&lt;SecondLvl&gt; list;\r\n    \t\t\r\n            @Data\r\n            public static class SecondLvl {\r\n                    protected FirstLvl.SecondLvl.ThirdLvl thirdLvl;\r\n    \r\n                    @Data\r\n                    public static class ThirdLvl {\r\n                            protected FourthLvl fourthLvl;\r\n                    }\r\n            }\r\n    }\r\n    \r\n    @Data\r\n    public class FourthLvl {\r\n            protected FourthLvl.FithLvl fithLvl;\r\n    \r\n            @Data\r\n            public static class FithLvl {\r\n    \r\n                    protected String str1;\r\n                    protected String str2;\r\n    \r\n            }\r\n    }\r\nSource:\r\n\r\n    @Data\r\n    public class FirstLvlDTO {\r\n          protected FirstLvlDTO.SecondLvlDTO secondLvlDTO ;\r\n    \r\n            @Data\r\n            public static class SecondLvlDTO  {\r\n                protected FirstLvlDTO.SecondLvlDTO.ThirdLvlDTO thirdLvlDTO ;\r\n    \r\n    \r\n                    @Data\r\n                    public static class ThirdLvlDTO {\r\n    \r\n                            protected FourthLvlDTO fourthLvlDTO;\r\n                    }\r\n            }\r\n    \r\n    }\r\n    \r\n    @Data\r\n    public class FourthLvlDTO  {\r\n    \r\n            protected String str1;\r\n    \r\n            protected String str2;\r\n    \r\n    }\r\nMapper and Object factory:\r\n\r\n    @Mapper(uses = { ObjectFactory.class })\r\n    public interface FirstLvlDTOtoFirstLvl  {\r\n    \r\n **@Mapping(target=&quot;list[0].thirdLvl.fourthLvl.fithLvl.str2&quot;, source=&quot;secondLvlDTO.thirdLvlDTO.fourthLvlDTO.str2&quot;)**\r\n    \r\n        FirstLvl toFirstLvl (FirstLvlDTO firstLvlDTO );\r\n    \t\t\r\n    }\r\n    \r\n    public class ObjectFactory {\r\n    \r\n        public FirstLvl createFirstLvl() {\r\n            return new FirstLvl();\r\n        }\r\n    \t\r\n    \tpublic FirstLvl.SecondLvl createFSLvl() {\r\n            return new FirstLvl.SecondLvl();\r\n        }\r\n    }\r\nThe problem is I don&#39;t know how to get first element of List([] notation is not used in mapstruct). I can add methods getlist0/setlist0 to class FirstLvl for simply returning first element of List(return list.get(0)) and use it in mapper like list0.thirdLvl.fourthLvl.fithLvl.str2, but I don&#39;t know is it good idea and is it possible to do it better\r\nList is absent in FirstLvlDTO (source), so I really can&#39;t understand how to map it and set this nested structure to first element of List\r\n","title":"How to get element of List in target(for mapping) if source doesn&#39;t contain this list?","body":"<p>I'm trying to map next structure(succesfully map in dozer, have some problems with mapstruct)\nlist is absent in source, how can I get its first element in mapper?\nTarget class:</p>\n<pre><code>    @Data\npublic class FirstLvl {\n        protected List&lt;SecondLvl&gt; list;\n        \n        @Data\n        public static class SecondLvl {\n                protected FirstLvl.SecondLvl.ThirdLvl thirdLvl;\n\n                @Data\n                public static class ThirdLvl {\n                        protected FourthLvl fourthLvl;\n                }\n        }\n}\n\n@Data\npublic class FourthLvl {\n        protected FourthLvl.FithLvl fithLvl;\n\n        @Data\n        public static class FithLvl {\n\n                protected String str1;\n                protected String str2;\n\n        }\n}\n</code></pre>\n<p>Source:</p>\n<pre><code>@Data\npublic class FirstLvlDTO {\n      protected FirstLvlDTO.SecondLvlDTO secondLvlDTO ;\n\n        @Data\n        public static class SecondLvlDTO  {\n            protected FirstLvlDTO.SecondLvlDTO.ThirdLvlDTO thirdLvlDTO ;\n\n\n                @Data\n                public static class ThirdLvlDTO {\n\n                        protected FourthLvlDTO fourthLvlDTO;\n                }\n        }\n\n}\n\n@Data\npublic class FourthLvlDTO  {\n\n        protected String str1;\n\n        protected String str2;\n\n}\n</code></pre>\n<p>Mapper and Object factory:</p>\n<pre><code>@Mapper(uses = { ObjectFactory.class })\npublic interface FirstLvlDTOtoFirstLvl  {\n</code></pre>\n<p><strong>@Mapping(target=&quot;list[0].thirdLvl.fourthLvl.fithLvl.str2&quot;, source=&quot;secondLvlDTO.thirdLvlDTO.fourthLvlDTO.str2&quot;)</strong></p>\n<pre><code>    FirstLvl toFirstLvl (FirstLvlDTO firstLvlDTO );\n        \n}\n\npublic class ObjectFactory {\n\n    public FirstLvl createFirstLvl() {\n        return new FirstLvl();\n    }\n    \n    public FirstLvl.SecondLvl createFSLvl() {\n        return new FirstLvl.SecondLvl();\n    }\n}\n</code></pre>\n<p>The problem is I don't know how to get first element of List([] notation is not used in mapstruct). I can add methods getlist0/setlist0 to class FirstLvl for simply returning first element of List(return list.get(0)) and use it in mapper like list0.thirdLvl.fourthLvl.fithLvl.str2, but I don't know is it good idea and is it possible to do it better\nList is absent in FirstLvlDTO (source), so I really can't understand how to map it and set this nested structure to first element of List</p>\n"},{"tags":["java","azure","azure-resource-manager"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1472578492,"post_id":39233129,"comment_id":65804656,"body_markdown":"See [Removing VHD&#39;s from Azure Resource Manager after removing VM](http://stackoverflow.com/a/35210518/5221149).","body":"See <a href=\"http://stackoverflow.com/a/35210518/5221149\">Removing VHD&#39;s from Azure Resource Manager after removing VM</a>."}],"answers":[{"tags":[],"owner":{"account_id":6439164,"reputation":23644,"user_id":4989676,"display_name":"Peter Pan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474438290,"creation_date":1472623664,"answer_id":39241914,"question_id":39233129,"body_markdown":"@PawanSharma, As I known, if you want to delete VM and its related all resources once, you only need to delete the resource group which includes the VM and all other resources, or else manually delete these resources one by one.\r\n\r\nAccording to your code, I judge out that you are using the version `1.0.0-beta` of Azure SDK for Java, so I suggest that you can try to use the code below to do it.\r\n\r\n     azure.resourceGroups().delete(&quot;&lt;resource-group-name&gt;&quot;);\r\n\r\nAs reference, you can refer to the [sample code][1] on GitHub.\r\n\r\nMeanwhile, the other way without Azure SDK is that using Azure REST API [`Delete a resource group`][2] which I think it&#39;s more clear way for understanding. \r\n\r\n\r\n  [1]: https://github.com/Azure/azure-sdk-for-java/blob/master/azure-samples/src/main/java/com/microsoft/azure/management/resources/samples/ManageResourceGroup.java#L107\r\n  [2]: https://msdn.microsoft.com/en-us/library/azure/dn790539.aspx","title":"How to delete disks while delete VM in Azure ARM using java sdk?","body":"<p>@PawanSharma, As I known, if you want to delete VM and its related all resources once, you only need to delete the resource group which includes the VM and all other resources, or else manually delete these resources one by one.</p>\n\n<p>According to your code, I judge out that you are using the version <code>1.0.0-beta</code> of Azure SDK for Java, so I suggest that you can try to use the code below to do it.</p>\n\n<pre><code> azure.resourceGroups().delete(\"&lt;resource-group-name&gt;\");\n</code></pre>\n\n<p>As reference, you can refer to the <a href=\"https://github.com/Azure/azure-sdk-for-java/blob/master/azure-samples/src/main/java/com/microsoft/azure/management/resources/samples/ManageResourceGroup.java#L107\" rel=\"nofollow\">sample code</a> on GitHub.</p>\n\n<p>Meanwhile, the other way without Azure SDK is that using Azure REST API <a href=\"https://msdn.microsoft.com/en-us/library/azure/dn790539.aspx\" rel=\"nofollow\"><code>Delete a resource group</code></a> which I think it's more clear way for understanding. </p>\n"},{"tags":[],"owner":{"account_id":5777814,"reputation":1541,"user_id":4559404,"accept_rate":14,"display_name":"Pawan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472835484,"creation_date":1472835484,"answer_id":39297449,"question_id":39233129,"body_markdown":"This is solved by Azure-Storage. You have to delete blob vhd files from attached storage account.\r\n\r\n    \r\n            CloudStorageAccount cloudStorageAccount = CloudStorageAccount.parse(storageConnectionString);\r\n            CloudBlobClient cloudBlobClient = cloudStorageAccount.createCloudBlobClient();\r\n            Iterable&lt;CloudBlobContainer&gt;  containersList= cloudBlobClient.listContainers();\r\n            for(CloudBlobContainer container:containersList)\r\n            {\r\n                String currentContainerName = container.getName();\r\n                logger.debug(&quot;Current Container Name : &quot;+currentContainerName);\r\n                CloudBlobContainer blobContainer = cloudBlobClient.getContainerReference(currentContainerName);\r\n                CloudPageBlob pageBlob = blobContainer.getPageBlobReference(diskName);\r\n                if(pageBlob.exists())  \r\n                    return pageBlob.deleteIfExists();\r\n            }\r\n           \r\nMore detail refer [azure storage git][1]\r\n\r\n\r\n  [1]: https://github.com/Azure/azure-content/blob/master/articles/storage/storage-java-how-to-use-blob-storage.md","title":"How to delete disks while delete VM in Azure ARM using java sdk?","body":"<p>This is solved by Azure-Storage. You have to delete blob vhd files from attached storage account.</p>\n\n<pre><code>        CloudStorageAccount cloudStorageAccount = CloudStorageAccount.parse(storageConnectionString);\n        CloudBlobClient cloudBlobClient = cloudStorageAccount.createCloudBlobClient();\n        Iterable&lt;CloudBlobContainer&gt;  containersList= cloudBlobClient.listContainers();\n        for(CloudBlobContainer container:containersList)\n        {\n            String currentContainerName = container.getName();\n            logger.debug(\"Current Container Name : \"+currentContainerName);\n            CloudBlobContainer blobContainer = cloudBlobClient.getContainerReference(currentContainerName);\n            CloudPageBlob pageBlob = blobContainer.getPageBlobReference(diskName);\n            if(pageBlob.exists())  \n                return pageBlob.deleteIfExists();\n        }\n</code></pre>\n\n<p>More detail refer <a href=\"https://github.com/Azure/azure-content/blob/master/articles/storage/storage-java-how-to-use-blob-storage.md\" rel=\"nofollow\">azure storage git</a></p>\n"},{"tags":[],"owner":{"account_id":12476582,"reputation":597,"user_id":9082736,"display_name":"Bilal Demir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649865950,"creation_date":1649865950,"answer_id":71860589,"question_id":39233129,"body_markdown":"You need to add the Delete options when creating the Virtual Machine.\r\n\r\nExample:\r\n\r\n    azureResourceManager.virtualMachines().define(linuxVMName)\r\n                    .withRegion(Region.GERMANY_WEST_CENTRAL)\r\n                    .withExistingResourceGroup(myResourceGroup)\r\n                    .withExistingPrimaryNetworkInterface(myNetworkInterface)\r\n                    .withGeneralizedLinuxCustomImage(myImageId)\r\n                    .withRootUsername(myUsername)\r\n                    .withSsh(mySshPublicKey)\r\n\r\n                    //deleteOptions for related disc\r\n                    .withOSDiskDeleteOptions(DeleteOptions.DELETE)\r\n\r\n                    //deleteOptions for related network interface\r\n                    .withPrimaryNetworkInterfaceDeleteOptions(DeleteOptions.DELETE)\r\n                    .withSize(VirtualMachineSizeTypes.STANDARD_B2MS)\r\n                    .create();","title":"How to delete disks while delete VM in Azure ARM using java sdk?","body":"<p>You need to add the Delete options when creating the Virtual Machine.</p>\n<p>Example:</p>\n<pre><code>azureResourceManager.virtualMachines().define(linuxVMName)\n                .withRegion(Region.GERMANY_WEST_CENTRAL)\n                .withExistingResourceGroup(myResourceGroup)\n                .withExistingPrimaryNetworkInterface(myNetworkInterface)\n                .withGeneralizedLinuxCustomImage(myImageId)\n                .withRootUsername(myUsername)\n                .withSsh(mySshPublicKey)\n\n                //deleteOptions for related disc\n                .withOSDiskDeleteOptions(DeleteOptions.DELETE)\n\n                //deleteOptions for related network interface\n                .withPrimaryNetworkInterfaceDeleteOptions(DeleteOptions.DELETE)\n                .withSize(VirtualMachineSizeTypes.STANDARD_B2MS)\n                .create();\n</code></pre>\n"}],"owner":{"account_id":5777814,"reputation":1541,"user_id":4559404,"accept_rate":14,"display_name":"Pawan Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":813,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1649865950,"creation_date":1472576199,"question_id":39233129,"body_markdown":"I am deleting VM from azure ARM. When I deleted VM using java-sdk, VM deleted successfully but disks and network are not deleted. It kept VHD files in storage. I tried to detach disk also but same  it will detach disk from VM but not deleting VHDs.\r\n \r\nDelete VM :-\r\n\r\n    azure.virtualMachines().delete(&quot;resourceGroupName&quot;, &quot;vmName&quot;);\r\n\r\nDetach disk:-\r\n    \r\n    azure.virtualMachines().getByGroup(&quot;resourceGroupName&quot;, &quot;vmName&quot;);\r\n    vm.update().withoutDataDisk(&quot;diskName&quot;).apply(); \r\n\r\neven after performing above operation VHD file exists in storage. \r\nHow can we delete permanently all attached disk when I delete VM?.","title":"How to delete disks while delete VM in Azure ARM using java sdk?","body":"<p>I am deleting VM from azure ARM. When I deleted VM using java-sdk, VM deleted successfully but disks and network are not deleted. It kept VHD files in storage. I tried to detach disk also but same  it will detach disk from VM but not deleting VHDs.</p>\n\n<p>Delete VM :-</p>\n\n<pre><code>azure.virtualMachines().delete(\"resourceGroupName\", \"vmName\");\n</code></pre>\n\n<p>Detach disk:-</p>\n\n<pre><code>azure.virtualMachines().getByGroup(\"resourceGroupName\", \"vmName\");\nvm.update().withoutDataDisk(\"diskName\").apply(); \n</code></pre>\n\n<p>even after performing above operation VHD file exists in storage. \nHow can we delete permanently all attached disk when I delete VM?.</p>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":24926536,"reputation":1,"user_id":18794217,"display_name":"hexastich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649865919,"creation_date":1649865919,"answer_id":71860578,"question_id":71857630,"body_markdown":"you can try this code:\r\n\r\n    ResourcePatternFilter resourcePatternFilter = new ResourcePatternFilter(ResourceType.TOPIC, topic, PatternType.LITERAL));\r\n    Collection&lt;AclBinding&gt; aclBindings = adminClient.describeAcls(new AclBindingFilter(resourcePatternFilter, AccessControlEntryFilter.ANY)).values().get()\r\n          \r\n    List&lt;AclBindingFilter&gt; aclToDelete = aclBindings.stream()\r\n            .filter(b -&gt; b.resource().resourceType() == ResourceType.TOPIC &amp;&amp; b.entry().operation() == AclOperation.READ)\r\n            .map(b -&gt; new AclBindingFilter(new ResourceFilter(ResourceType.TOPIC, b.resource().name()),AccessControlEntryFilter.ANY))\r\n            .collect(Collectors.toList());","title":"How to delete a specific ACLs principal of the topic with help of java code?","body":"<p>you can try this code:</p>\n<pre><code>ResourcePatternFilter resourcePatternFilter = new ResourcePatternFilter(ResourceType.TOPIC, topic, PatternType.LITERAL));\nCollection&lt;AclBinding&gt; aclBindings = adminClient.describeAcls(new AclBindingFilter(resourcePatternFilter, AccessControlEntryFilter.ANY)).values().get()\n      \nList&lt;AclBindingFilter&gt; aclToDelete = aclBindings.stream()\n        .filter(b -&gt; b.resource().resourceType() == ResourceType.TOPIC &amp;&amp; b.entry().operation() == AclOperation.READ)\n        .map(b -&gt; new AclBindingFilter(new ResourceFilter(ResourceType.TOPIC, b.resource().name()),AccessControlEntryFilter.ANY))\n        .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":24925680,"reputation":1,"user_id":18793468,"display_name":"Sabia Parveen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":384,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649865919,"creation_date":1649853523,"question_id":71857630,"body_markdown":"\r\n```\r\npublic void deleteReadAcl(AdminClient adminClient, TopicReadRequest readAclRequest) {\r\n        ResourcePatternFilter resourcePatternFilter = new ResourcePatternFilter(ResourceType.TOPIC, readAclRequest.getTopicName(), PatternType.ANY);\r\n        \r\n        AclBindingFilter aclBindingFilter = new AclBindingFilter(resourcePatternFilter, new AccessControlEntryFilter(readAclRequest.getPrincipal(),null,AclOperation.READ, AclPermissionType.ANY));\r\n        Set&lt;AclBindingFilter&gt; bindingFilters = new HashSet&lt;&gt;();\r\n        bindingFilters.add(aclBindingFilter);\r\n\r\n        deleteReadAcls(adminClient, bindingFilters);\r\n    }\r\n```\r\nJson after creating ACL in mongo is given below.\r\n\r\n    {\r\n    &quot;_id&quot; : NumberLong(104),\r\n    &quot;createdDate&quot; : ISODate(&quot;2022-04-13T09:39:42.907Z&quot;),\r\n    &quot;lastModifiedDate&quot; : ISODate(&quot;2022-04-13T10:07:37.561Z&quot;),\r\n    &quot;name&quot; : &quot;topic-request&quot;,\r\n    &quot;namespace&quot; : &quot;ko&quot;,\r\n    &quot;environment&quot; : &quot;DEVELOPMENT&quot;,\r\n    &quot;dc&quot; : &quot;sss&quot;,\r\n    &quot;configs&quot; : {},\r\n    &quot;partitions&quot; : 3,\r\n    &quot;replication&quot; : 3,\r\n    &quot;cleanUpPolicy&quot; : &quot;delete&quot;,\r\n    &quot;principals&quot; : [ \r\n        {\r\n            &quot;_id&quot; : NumberLong(20),\r\n            &quot;name&quot; : &quot;topic-no&quot;,\r\n            &quot;accessType&quot; : &quot;READ&quot;,\r\n            &quot;service&quot; : &quot;kafka&quot;,\r\n            &quot;nonDomainService&quot; : false,\r\n            &quot;consumerGroupName&quot; : &quot;kafka.topic-consume&quot;,\r\n            &quot;wildCardEnabled&quot; : false\r\n        }\r\n    ],\r\n    &quot;migratedTopic&quot; : false,\r\n    &quot;compactionChecked&quot; : false\r\n    \r\n}\r\n\r\nQuestion Can anyone help me out to delete ACLs of my topic named &quot;topic-request&quot;, which is given in principals list with id 20.","title":"How to delete a specific ACLs principal of the topic with help of java code?","body":"<pre><code>public void deleteReadAcl(AdminClient adminClient, TopicReadRequest readAclRequest) {\n        ResourcePatternFilter resourcePatternFilter = new ResourcePatternFilter(ResourceType.TOPIC, readAclRequest.getTopicName(), PatternType.ANY);\n        \n        AclBindingFilter aclBindingFilter = new AclBindingFilter(resourcePatternFilter, new AccessControlEntryFilter(readAclRequest.getPrincipal(),null,AclOperation.READ, AclPermissionType.ANY));\n        Set&lt;AclBindingFilter&gt; bindingFilters = new HashSet&lt;&gt;();\n        bindingFilters.add(aclBindingFilter);\n\n        deleteReadAcls(adminClient, bindingFilters);\n    }\n</code></pre>\n<p>Json after creating ACL in mongo is given below.</p>\n<pre><code>{\n&quot;_id&quot; : NumberLong(104),\n&quot;createdDate&quot; : ISODate(&quot;2022-04-13T09:39:42.907Z&quot;),\n&quot;lastModifiedDate&quot; : ISODate(&quot;2022-04-13T10:07:37.561Z&quot;),\n&quot;name&quot; : &quot;topic-request&quot;,\n&quot;namespace&quot; : &quot;ko&quot;,\n&quot;environment&quot; : &quot;DEVELOPMENT&quot;,\n&quot;dc&quot; : &quot;sss&quot;,\n&quot;configs&quot; : {},\n&quot;partitions&quot; : 3,\n&quot;replication&quot; : 3,\n&quot;cleanUpPolicy&quot; : &quot;delete&quot;,\n&quot;principals&quot; : [ \n    {\n        &quot;_id&quot; : NumberLong(20),\n        &quot;name&quot; : &quot;topic-no&quot;,\n        &quot;accessType&quot; : &quot;READ&quot;,\n        &quot;service&quot; : &quot;kafka&quot;,\n        &quot;nonDomainService&quot; : false,\n        &quot;consumerGroupName&quot; : &quot;kafka.topic-consume&quot;,\n        &quot;wildCardEnabled&quot; : false\n    }\n],\n&quot;migratedTopic&quot; : false,\n&quot;compactionChecked&quot; : false\n</code></pre>\n<p>}</p>\n<p>Question Can anyone help me out to delete ACLs of my topic named &quot;topic-request&quot;, which is given in principals list with id 20.</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"display_name":"user18676407"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649865785,"creation_date":1649865785,"answer_id":71860550,"question_id":71860451,"body_markdown":"instead of assigning the value to an object store the value first in a string objects and then store it into the object.\r\n```\r\npublic String request(@RequestParam(&quot;username&quot;) String username,@RequestParam(&quot;my-token&quot;) String myToken, \r\nModel model, RedirectAttributes redirectAttributes)\r\n```","title":"How to map form param key with hyphen into Java object field?","body":"<p>instead of assigning the value to an object store the value first in a string objects and then store it into the object.</p>\n<pre><code>public String request(@RequestParam(&quot;username&quot;) String username,@RequestParam(&quot;my-token&quot;) String myToken, \nModel model, RedirectAttributes redirectAttributes)\n</code></pre>\n"}],"owner":{"account_id":16725075,"reputation":23,"user_id":12088854,"display_name":"yakov pinhas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71860550,"answer_count":1,"score":1,"last_activity_date":1649865785,"creation_date":1649865423,"question_id":71860451,"body_markdown":"I have a POST request called to my app with Content-Type: **application/x-www-form-urlencoded**.\r\n\r\nThe Form Data Payload is:\r\n**username=myname%40gmail.com&amp;my-token=dBq26TVjg5jy8Q4kUYyZ2DQ**\r\n\r\nI need to map these 2 params into a Java Object:\r\n\r\n```\r\npublic class MyRequest{\r\n    \r\n    private String username;\r\n\r\n    private String myToken;\r\n\r\n    //getters setters\r\n}\r\n```\r\n\r\nmy controller is:\r\n```\r\n@RequestMapping(value = &quot;user/request&quot;, method = RequestMethod.POST)\r\n    public String request(@ModelAttribute(value = &quot;myRequest&quot;) MyRequest myRequest, \r\nModel model, RedirectAttributes redirectAttributes)\r\n```\r\nI see username is populating but myToken is not.\r\n\r\nI can&#39;t use @JsonProperty(&quot;my-token&quot;) because it is not a json, what else can be done to get the token?\r\n\r\n\r\n\r\n ","title":"How to map form param key with hyphen into Java object field?","body":"<p>I have a POST request called to my app with Content-Type: <strong>application/x-www-form-urlencoded</strong>.</p>\n<p>The Form Data Payload is:\n<strong>username=myname%40gmail.com&amp;my-token=dBq26TVjg5jy8Q4kUYyZ2DQ</strong></p>\n<p>I need to map these 2 params into a Java Object:</p>\n<pre><code>public class MyRequest{\n    \n    private String username;\n\n    private String myToken;\n\n    //getters setters\n}\n</code></pre>\n<p>my controller is:</p>\n<pre><code>@RequestMapping(value = &quot;user/request&quot;, method = RequestMethod.POST)\n    public String request(@ModelAttribute(value = &quot;myRequest&quot;) MyRequest myRequest, \nModel model, RedirectAttributes redirectAttributes)\n</code></pre>\n<p>I see username is populating but myToken is not.</p>\n<p>I can't use @JsonProperty(&quot;my-token&quot;) because it is not a json, what else can be done to get the token?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1649863070,"post_id":71859705,"comment_id":126984607,"body_markdown":"While an online json validator does validate that json as valid, it doesn&#39;t feel like json.  BUT, to answer your question, look into a library called [Jackson](https://www.baeldung.com/jackson).  To generate the classes that get serialized take a peek at [jsonschema2pojo.org](https://www.jsonschema2pojo.org/).  However that website did not like the inputted json.","body":"While an online json validator does validate that json as valid, it doesn&#39;t feel like json.  BUT, to answer your question, look into a library called <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">Jackson</a>.  To generate the classes that get serialized take a peek at <a href=\"https://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">jsonschema2pojo.org</a>.  However that website did not like the inputted json."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1649863144,"post_id":71859705,"comment_id":126984638,"body_markdown":"Personally, I would create a class with jackson which is a list of something. This something, has a custom serializer/deserializer that for each instance checks whether is a number or a list. If it&#39;s a list, it recursively calls itself to parse. I don&#39;t think you have any other choice here.","body":"Personally, I would create a class with jackson which is a list of something. This something, has a custom serializer/deserializer that for each instance checks whether is a number or a list. If it&#39;s a list, it recursively calls itself to parse. I don&#39;t think you have any other choice here."},{"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"score":0,"creation_date":1649863265,"post_id":71859705,"comment_id":126984700,"body_markdown":"How would _you_ describe this object in pseudocode? Because a literal desrialization would just be an array of Objects containing an Integer and an array of int[]. pretty meaningless structure","body":"How would <i>you</i> describe this object in pseudocode? Because a literal desrialization would just be an array of Objects containing an Integer and an array of int[]. pretty meaningless structure"}],"answers":[{"tags":[],"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649863024,"creation_date":1649863024,"answer_id":71859890,"question_id":71859705,"body_markdown":"How about...\r\n\r\n```\r\npublic class Outer {\r\n   private int field1;\r\n   private List&lt;Inner&gt; field2;\r\n}\r\n\r\npublic class Inner {\r\n   private int field1;\r\n   private int field2;\r\n   private double field3;\r\n}\r\n```\r\n\r\nAnd then you just parse the json and read them into these classes?","title":"How to define this JSON as a JAVA Object","body":"<p>How about...</p>\n<pre><code>public class Outer {\n   private int field1;\n   private List&lt;Inner&gt; field2;\n}\n\npublic class Inner {\n   private int field1;\n   private int field2;\n   private double field3;\n}\n</code></pre>\n<p>And then you just parse the json and read them into these classes?</p>\n"},{"tags":[],"owner":{"account_id":83425,"reputation":3118,"user_id":233907,"accept_rate":75,"display_name":"romacafe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649865763,"creation_date":1649864635,"answer_id":71860284,"question_id":71859705,"body_markdown":"The problem with this particular JSON is that it is a list of different types.  The first element is a number (int), the second is a 2-dimensional array of numbers, some ints and some doubles.\r\n\r\nSo if you tried to parse this to a custom Java object, you would get at best `List&lt;Object&gt;`, or just `Object`.\r\n\r\nI believe you want to parse it into a JSON tree.  There are several libraries, Jackson is the most popular by far.\r\n\r\n```java\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.junit.Test;\r\n\r\nimport static org.hamcrest.CoreMatchers.is;\r\nimport static org.hamcrest.MatcherAssert.assertThat;\r\n\r\npublic class JsonTest {\r\n    String JSON = &quot;[\\n&quot; +\r\n        &quot;    669124,\\n&quot; +\r\n        &quot;    [\\n&quot; +\r\n        &quot;        [\\n&quot; +\r\n        &quot;            40135,\\n&quot; +\r\n        &quot;            5,\\n&quot; +\r\n        &quot;            0.68395602\\n&quot; +\r\n        &quot;        ],\\n&quot; +\r\n        &quot;        [\\n&quot; +\r\n        &quot;            40134,\\n&quot; +\r\n        &quot;            1,\\n&quot; +\r\n        &quot;            0.03737\\n&quot; +\r\n        &quot;        ]\\n&quot; +\r\n        &quot;    ]\\n&quot; +\r\n        &quot;]&quot;;\r\n    \r\n    @Test\r\n    public void testJson() throws JsonProcessingException {\r\n        ObjectMapper om = new ObjectMapper();\r\n        JsonNode doc = om.readTree(JSON);\r\n    \r\n        assertThat(doc.isArray(), is(true));\r\n        JsonNode element1 = doc.get(0);\r\n        assertThat(element1.isInt(), is(true));\r\n        assertThat(element1.asInt(), is(669124));\r\n    \r\n        JsonNode element2 = doc.get(1);\r\n        assertThat(element2.isArray(), is(true));\r\n    \r\n        assertThat(element2.get(0).get(0).intValue(), is(40135));\r\n        assertThat(element2.get(0).get(1).intValue(), is(5));\r\n        assertThat(element2.get(0).get(2).doubleValue(), is(0.68395602));\r\n    \r\n        assertThat(element2.get(1).get(0).intValue(), is(40134));\r\n        assertThat(element2.get(1).get(1).intValue(), is(1));\r\n        assertThat(element2.get(1).get(2).doubleValue(), is(0.03737));\r\n    }\r\n}\r\n```","title":"How to define this JSON as a JAVA Object","body":"<p>The problem with this particular JSON is that it is a list of different types.  The first element is a number (int), the second is a 2-dimensional array of numbers, some ints and some doubles.</p>\n<p>So if you tried to parse this to a custom Java object, you would get at best <code>List&lt;Object&gt;</code>, or just <code>Object</code>.</p>\n<p>I believe you want to parse it into a JSON tree.  There are several libraries, Jackson is the most popular by far.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.Test;\n\nimport static org.hamcrest.CoreMatchers.is;\nimport static org.hamcrest.MatcherAssert.assertThat;\n\npublic class JsonTest {\n    String JSON = &quot;[\\n&quot; +\n        &quot;    669124,\\n&quot; +\n        &quot;    [\\n&quot; +\n        &quot;        [\\n&quot; +\n        &quot;            40135,\\n&quot; +\n        &quot;            5,\\n&quot; +\n        &quot;            0.68395602\\n&quot; +\n        &quot;        ],\\n&quot; +\n        &quot;        [\\n&quot; +\n        &quot;            40134,\\n&quot; +\n        &quot;            1,\\n&quot; +\n        &quot;            0.03737\\n&quot; +\n        &quot;        ]\\n&quot; +\n        &quot;    ]\\n&quot; +\n        &quot;]&quot;;\n    \n    @Test\n    public void testJson() throws JsonProcessingException {\n        ObjectMapper om = new ObjectMapper();\n        JsonNode doc = om.readTree(JSON);\n    \n        assertThat(doc.isArray(), is(true));\n        JsonNode element1 = doc.get(0);\n        assertThat(element1.isInt(), is(true));\n        assertThat(element1.asInt(), is(669124));\n    \n        JsonNode element2 = doc.get(1);\n        assertThat(element2.isArray(), is(true));\n    \n        assertThat(element2.get(0).get(0).intValue(), is(40135));\n        assertThat(element2.get(0).get(1).intValue(), is(5));\n        assertThat(element2.get(0).get(2).doubleValue(), is(0.68395602));\n    \n        assertThat(element2.get(1).get(0).intValue(), is(40134));\n        assertThat(element2.get(1).get(1).intValue(), is(1));\n        assertThat(element2.get(1).get(2).doubleValue(), is(0.03737));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":164287,"reputation":5058,"user_id":386946,"accept_rate":78,"display_name":"Stole"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1649865763,"creation_date":1649862088,"question_id":71859705,"body_markdown":"I&#39;m receiving the following JSON:\r\n```\r\n[\r\n\t669124,\r\n\t[\r\n\t\t[\r\n\t\t\t40135,\r\n\t\t\t5,\r\n\t\t\t0.68395602\r\n\t\t],\r\n\t\t[\r\n\t\t\t40134,\r\n\t\t\t1,\r\n\t\t\t0.03737\r\n\t\t]\r\n\t]\r\n]\r\n```\r\n\r\nHow can I turn this into a JAVA Object?","title":"How to define this JSON as a JAVA Object","body":"<p>I'm receiving the following JSON:</p>\n<pre><code>[\n    669124,\n    [\n        [\n            40135,\n            5,\n            0.68395602\n        ],\n        [\n            40134,\n            1,\n            0.03737\n        ]\n    ]\n]\n</code></pre>\n<p>How can I turn this into a JAVA Object?</p>\n"},{"tags":["java","maven","m2eclipse","transitive-dependency"],"comments":[{"owner":{"account_id":1469659,"reputation":3413,"user_id":1381529,"display_name":"azbarcea"},"score":0,"creation_date":1649864465,"post_id":71860188,"comment_id":126985204,"body_markdown":"That&#39;s interesting! I recommend you creating a ticket on: https://issues.apache.org/jira/projects/MDEP/issues and reaching out on the apache mailing list on `users-subscribe@maven.apache.org` [more](https://maven.apache.org/plugins/maven-dependency-plugin/mailing-lists.html). Btw, what version of the plugin you use? `mvn org.apache.maven.plugins:maven-dependency-plugin:&lt;latest&gt;:resolve-plugins` (e.g. `3.3.0`)","body":"That&#39;s interesting! I recommend you creating a ticket on: <a href=\"https://issues.apache.org/jira/projects/MDEP/issues\" rel=\"nofollow noreferrer\">issues.apache.org/jira/projects/MDEP/issues</a> and reaching out on the apache mailing list on <code>users-subscribe@maven.apache.org</code> <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/mailing-lists.html\" rel=\"nofollow noreferrer\">more</a>. Btw, what version of the plugin you use? <code>mvn org.apache.maven.plugins:maven-dependency-plugin:&lt;latest&gt;:re&zwnj;&#8203;solve-plugins</code> (e.g. <code>3.3.0</code>)"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1649867791,"post_id":71860188,"comment_id":126986535,"body_markdown":"Are you using the most recent version of the plugin...Which version of Eclipse you are using?","body":"Are you using the most recent version of the plugin...Which version of Eclipse you are using?"}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649865338,"creation_date":1649865338,"answer_id":71860438,"question_id":71860188,"body_markdown":"Best practise is to add all dependencies to the POM that are used directly in your source code (and at runtime).\r\n\r\nSo if X is used in your source code, but is already present as transitive dependency of Y, you should nevertheless add X as direct dependency.\r\n\r\nYou can check this with `mvn dependency:analyze`\r\n\r\nhttps://maven.apache.org/plugins/maven-dependency-plugin/analyze-mojo.html\r\n","title":"Maven dependency tree / hierarchy not showing the truth","body":"<p>Best practise is to add all dependencies to the POM that are used directly in your source code (and at runtime).</p>\n<p>So if X is used in your source code, but is already present as transitive dependency of Y, you should nevertheless add X as direct dependency.</p>\n<p>You can check this with <code>mvn dependency:analyze</code></p>\n<p><a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/analyze-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-dependency-plugin/analyze-mojo.html</a></p>\n"}],"owner":{"account_id":7122171,"reputation":142,"user_id":5446400,"display_name":"J. Doe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2448,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649865338,"creation_date":1649864149,"question_id":71860188,"body_markdown":"I was going to migrate an old Ant project existing of multiple single java projects to a multi-module maven project. All the libraries for have been stored in one local folder.\r\nFor building up the dependency management I wanted to go the way to add all dependencies to the parent pom.xml (dependency management section) and also do my best by adding the correct ones to the children (Java Maven projects) until compilation is working.\r\n\r\nI then want to streamline the pom.xmls by using &quot;mvn dependency:tree -X&quot; to see if I have added some transitive dependencies to the single Maven projects which aren&#39;t not needed to be explicitly added to the pom.xmls\r\n\r\nNow when comparing the dependency hierarchy for a Maven project shown in Eclipse with that shown by using &quot;mvn dependency:tree -X&quot;, there are some differences:\r\n[![enter image description here][1]][1]\r\n\r\nMaven will not show that &quot;jetty-http&quot; is actually a transitive dependency of jetty-server - mostly because I already added it as direct dependency in the pom.xml before.\r\nWhile Eclipse does show that relationship and this is the correct result (also checked it manually using Maven central dependency list).\r\n\r\nSo in the end when using Maven I would have left &quot;jetty-http&quot; as direct dependency in my pom.xml, although I don&#39;t have to. This is kind of useless.\r\n\r\nDoes anyone know why the Maven dependency tree is so limited? I want to understand what is going on here. Is there any alternative using Maven commands?\r\nOr is there even a better way to check for/identify transitive dependencies added to the pom.xml by mistake?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/A8nbG.jpg","title":"Maven dependency tree / hierarchy not showing the truth","body":"<p>I was going to migrate an old Ant project existing of multiple single java projects to a multi-module maven project. All the libraries for have been stored in one local folder.\nFor building up the dependency management I wanted to go the way to add all dependencies to the parent pom.xml (dependency management section) and also do my best by adding the correct ones to the children (Java Maven projects) until compilation is working.</p>\n<p>I then want to streamline the pom.xmls by using &quot;mvn dependency:tree -X&quot; to see if I have added some transitive dependencies to the single Maven projects which aren't not needed to be explicitly added to the pom.xmls</p>\n<p>Now when comparing the dependency hierarchy for a Maven project shown in Eclipse with that shown by using &quot;mvn dependency:tree -X&quot;, there are some differences:\n<a href=\"https://i.stack.imgur.com/A8nbG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A8nbG.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Maven will not show that &quot;jetty-http&quot; is actually a transitive dependency of jetty-server - mostly because I already added it as direct dependency in the pom.xml before.\nWhile Eclipse does show that relationship and this is the correct result (also checked it manually using Maven central dependency list).</p>\n<p>So in the end when using Maven I would have left &quot;jetty-http&quot; as direct dependency in my pom.xml, although I don't have to. This is kind of useless.</p>\n<p>Does anyone know why the Maven dependency tree is so limited? I want to understand what is going on here. Is there any alternative using Maven commands?\nOr is there even a better way to check for/identify transitive dependencies added to the pom.xml by mistake?</p>\n"},{"tags":["java","apache-beam","avro","distributed-computing"],"answers":[{"tags":[],"owner":{"account_id":24927714,"reputation":1,"user_id":18795241,"display_name":"dysseus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649864930,"creation_date":1649864930,"answer_id":71860352,"question_id":62110238,"body_markdown":"You can replace `Count.perElement()` with the `CountCombineFn()` fn which is a subclass of `CombineFn` class as seen [here][1]\r\n\r\n    filteredData.apply(Group.byFieldNames(&quot;user_id&quot;)                \r\n    .aggregateField(&quot;field1&quot;, CountCombineFn(), &quot;out_field1&quot;)\r\n    .aggregateField(&quot;field2&quot;, CountCombineFn(), &quot;out_field2&quot;));\r\n\r\n  [1]: https://beam.apache.org/releases/pydoc/2.31.0/_modules/apache_beam/transforms/combiners.html#Count.PerElement","title":"Apache Beam Group by Aggregate Fields","body":"<p>You can replace <code>Count.perElement()</code> with the <code>CountCombineFn()</code> fn which is a subclass of <code>CombineFn</code> class as seen <a href=\"https://beam.apache.org/releases/pydoc/2.31.0/_modules/apache_beam/transforms/combiners.html#Count.PerElement\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>filteredData.apply(Group.byFieldNames(&quot;user_id&quot;)                \n.aggregateField(&quot;field1&quot;, CountCombineFn(), &quot;out_field1&quot;)\n.aggregateField(&quot;field2&quot;, CountCombineFn(), &quot;out_field2&quot;));\n</code></pre>\n"}],"owner":{"account_id":14226583,"reputation":36,"user_id":10277098,"display_name":"Rajat Mittal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1389,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1649864930,"creation_date":1590885055,"question_id":62110238,"body_markdown":"I have a PCollection reading data from AvroIO. I want to apply aggregation such that after grouping by a specific key, I want to count unique counts of some fields within that group. \r\n\r\nWith normal Pig or SQL this is just applying groupby and doing a distinct count, but unable to properly understand how to do it in Beam.\r\n\r\nSo far I have been able to write this:\r\n```\r\nSchema schema = new Schema.Parser().parse(new File(options.getInputSchema()));\r\n\r\nPipeline pipeline = Pipeline.create(options);\r\nPCollection&lt;GenericRecord&gt; inputData= pipeline.apply(AvroIO.readGenericRecords(schema).from(options.getInput()));\r\nPCollection&lt;Row&gt; filteredData = inputData.apply(Select.fieldNames(&quot;user_id&quot;, &quot;field1&quot;, &quot;field2&quot;));\r\nPCollection&lt;Row&gt; groupedData = filteredData.apply(Group.byFieldNames(&quot;user_id&quot;)                \r\n                .aggregateField(&quot;field1&quot;,Count.perElement(),&quot;out_field1&quot;)\r\n                .aggregateField(&quot;field2&quot;,Count.perElement(),&quot;out_field2&quot;));\r\n```\r\n\r\nBut this does not accept the arguments in aggregateField method. \r\n\r\nCan someone help in providing the correct way to do this. \r\n\r\nThanks!","title":"Apache Beam Group by Aggregate Fields","body":"<p>I have a PCollection reading data from AvroIO. I want to apply aggregation such that after grouping by a specific key, I want to count unique counts of some fields within that group. </p>\n\n<p>With normal Pig or SQL this is just applying groupby and doing a distinct count, but unable to properly understand how to do it in Beam.</p>\n\n<p>So far I have been able to write this:</p>\n\n<pre><code>Schema schema = new Schema.Parser().parse(new File(options.getInputSchema()));\n\nPipeline pipeline = Pipeline.create(options);\nPCollection&lt;GenericRecord&gt; inputData= pipeline.apply(AvroIO.readGenericRecords(schema).from(options.getInput()));\nPCollection&lt;Row&gt; filteredData = inputData.apply(Select.fieldNames(\"user_id\", \"field1\", \"field2\"));\nPCollection&lt;Row&gt; groupedData = filteredData.apply(Group.byFieldNames(\"user_id\")                \n                .aggregateField(\"field1\",Count.perElement(),\"out_field1\")\n                .aggregateField(\"field2\",Count.perElement(),\"out_field2\"));\n</code></pre>\n\n<p>But this does not accept the arguments in aggregateField method. </p>\n\n<p>Can someone help in providing the correct way to do this. </p>\n\n<p>Thanks!</p>\n"},{"tags":["java","json","spring-boot","aop","aspect"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1649475369,"post_id":71694868,"comment_id":126891189,"body_markdown":"Miguel, it is not very polite to ask a question and then not react to an answer. @sansay61 answered just 20 minutes after you asked, and yet you neither commented on nor accepted his correct answer. This way you are not going to make a lot of friends here or motivate others to answer your next question.","body":"Miguel, it is not very polite to ask a question and then not react to an answer. @sansay61 answered just 20 minutes after you asked, and yet you neither commented on nor accepted his correct answer. This way you are not going to make a lot of friends here or motivate others to answer your next question."}],"answers":[{"tags":[],"owner":{"account_id":9296154,"reputation":106,"user_id":6902993,"display_name":"sansay61"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1648752747,"creation_date":1648740084,"answer_id":71695168,"question_id":71694868,"body_markdown":"you want exact impl or just the direction? if the direction, then annotate your method with custom annotation to get rid of patterns and do something like this:\r\n\r\n```\r\n@Around(&quot;@annotation(FQAnnotationName)&quot;)\r\npublic Map&lt;String, Object&gt; aroundSomething(ProceedingJointPoint jointPoint){\r\n   Map&lt;String, Object&gt; resultOfMethodExecution = (Map&lt;String, Object&gt;) jointPoint.proceed();  \r\n   //do something with the result returned\r\n   return resultOfMethodExecution;\r\n}\r\n```\r\nHere `@Around` is used to wrap invocation within your aspect. Typecast the result of target method, modify it in the way you want and return.\r\n\r\nThis is just an approximated solution, do not judge it as an exact implementation of what you need.","title":"Put some variable in json response inside Aspect","body":"<p>you want exact impl or just the direction? if the direction, then annotate your method with custom annotation to get rid of patterns and do something like this:</p>\n<pre><code>@Around(&quot;@annotation(FQAnnotationName)&quot;)\npublic Map&lt;String, Object&gt; aroundSomething(ProceedingJointPoint jointPoint){\n   Map&lt;String, Object&gt; resultOfMethodExecution = (Map&lt;String, Object&gt;) jointPoint.proceed();  \n   //do something with the result returned\n   return resultOfMethodExecution;\n}\n</code></pre>\n<p>Here <code>@Around</code> is used to wrap invocation within your aspect. Typecast the result of target method, modify it in the way you want and return.</p>\n<p>This is just an approximated solution, do not judge it as an exact implementation of what you need.</p>\n"}],"owner":{"account_id":6003905,"reputation":85,"user_id":4716376,"display_name":"miguel lopez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71695168,"answer_count":1,"score":0,"last_activity_date":1649864924,"creation_date":1648738936,"question_id":71694868,"body_markdown":"We want to add some variabale in json response, but inside aspect.\r\n\r\n\r\nwe need to do something similar to what is done in this function but instead of with the request it would be with the response.\r\n\r\n","title":"Put some variable in json response inside Aspect","body":"<p>We want to add some variabale in json response, but inside aspect.</p>\n<p>we need to do something similar to what is done in this function but instead of with the request it would be with the response.</p>\n"},{"tags":["java","eof","java-io","fileinputstream","fileoutputstream"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1649724729,"post_id":71822278,"comment_id":126943752,"body_markdown":"The problem is that `read()` returns -1 and end of stream, not zero. Your loop could terminate at any time with binary data: with text data it will never terminate because there should be no null characters. However reading and writing the same file will never work anyway. On Windows you will be prevented from opening the `FileOutputStream`.","body":"The problem is that <code>read()</code> returns -1 and end of stream, not zero. Your loop could terminate at any time with binary data: with text data it will never terminate because there should be no null characters. However reading and writing the same file will never work anyway. On Windows you will be prevented from opening the <code>FileOutputStream</code>."}],"answers":[{"tags":[],"owner":{"account_id":1894123,"reputation":619,"user_id":1711465,"accept_rate":40,"display_name":"Vamsi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1649744579,"creation_date":1649653817,"answer_id":71822936,"question_id":71822278,"body_markdown":"It goes into an infinite loop because reads will see the results of past writes.\r\n\r\nReading and Writing the same file using FileInputStream and FileOutputStream is not possible. Use [RandomAccessFile][1] if you want to read/write to the same file. You can specify the position as well if you want to write at a specific place in your file.\r\n\r\nIf you want to write to the end of the file and then read all the lines on the file then here is a sample for that:\r\n\r\n    RandomAccessFile file = new RandomAccessFile(&quot;toto.txt&quot;, &quot;rw&quot;);\r\n    file.seek(file.length());\r\n    file.writeBytes(&quot;This is a temp file&quot;);\r\n    file.seek(0); //sets the pointer to the first byte\r\n    String line;\r\n    while((line = file.readLine()) != null) {\r\n    \tSystem.out.println(line);\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/RandomAccessFile.html\r\n","title":"Reading and writing into the same file with FileInputStream and FileOutputStream","body":"<p>It goes into an infinite loop because reads will see the results of past writes.</p>\n<p>Reading and Writing the same file using FileInputStream and FileOutputStream is not possible. Use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/RandomAccessFile.html\" rel=\"nofollow noreferrer\">RandomAccessFile</a> if you want to read/write to the same file. You can specify the position as well if you want to write at a specific place in your file.</p>\n<p>If you want to write to the end of the file and then read all the lines on the file then here is a sample for that:</p>\n<pre><code>RandomAccessFile file = new RandomAccessFile(&quot;toto.txt&quot;, &quot;rw&quot;);\nfile.seek(file.length());\nfile.writeBytes(&quot;This is a temp file&quot;);\nfile.seek(0); //sets the pointer to the first byte\nString line;\nwhile((line = file.readLine()) != null) {\n    System.out.println(line);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17227830,"reputation":11,"user_id":12473070,"display_name":"DogEgg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649670643,"creation_date":1649669871,"answer_id":71825632,"question_id":71822278,"body_markdown":"alter the loop condition to below:\r\n\r\n    while ((m = in.read()) != -1)","title":"Reading and writing into the same file with FileInputStream and FileOutputStream","body":"<p>alter the loop condition to below:</p>\n<pre><code>while ((m = in.read()) != -1)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649864729,"creation_date":1649864729,"answer_id":71860302,"question_id":71822278,"body_markdown":"&gt; The problem with my code in an infinite loop of reading and writing. I\r\n&gt; can&#39;t find a solution or a concept for this problem.\r\n\r\nThere&#39;s a number of problems with your code:\r\n\r\n* The file will be treated as empty after the `FileOutputStream` gets instantiated because you&#39;ve set `append` flag to `false`. End method `read()` will always return `-1` because there&#39;s no content to read.\r\n\r\n* Condition is incorrect and method `read()` and only because of that control enters the loop and EOF (`-1`) is being repeatedly written into the file. If you fixed the condition to `(m = in.read()) != -1`, the loop would be ignored because the file is blank from the start.\r\n\r\n* If you would do both: fix the condition and change the `append` flag to `true` then you would get another flavor of infinite loop. All the contents of the file will be successfully read and repeatedly appended to the file.\r\n\r\nSo at any condition, reading and writing simultaneously to the same file isn&#39;t a good idea.\r\n\r\nOne important note in regard to exception handling.\r\n\r\nBecause there&#39;s no `catch` block in your code snippet, I assume that you&#39;ve added a `throws` to the main() - it&#39;s not a nice idea. Methods `close()` in your code will be invoked only in case of successful execution, but if exception occur resources will never get released.\r\n\r\nInstead, I suggest you to make use of [**try with resources**](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html). That will provide an implicit finally block for you that will take care of closing the resources regardless whether exception occurred or not (now your invocations of `close()` will not get executed in case of exception). Another option is to declare `finally` block explicitly, and close the resources inside it.\r\n\r\nTry with resource is more concise and cleaner way to ensure that resources will get released.\r\n\r\nAlso consider wrapping both streams with buffered high-level streams to improve performance. It&#39;ll significantly reduce the number of time your application will need to access the file system.\r\n\r\n        try (var in = new BufferedInputStream(new FileInputStream(&quot;source.txt&quot;));\r\n             var out = new BufferedOutputStream(new FileOutputStream(&quot;destination.txt&quot;, false))) {\r\n\r\n            int next; // a subsequent byte that has been read from the source\r\n            while ((next = in.read()) != -1) {\r\n                out.write(next);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n","title":"Reading and writing into the same file with FileInputStream and FileOutputStream","body":"<blockquote>\n<p>The problem with my code in an infinite loop of reading and writing. I\ncan't find a solution or a concept for this problem.</p>\n</blockquote>\n<p>There's a number of problems with your code:</p>\n<ul>\n<li><p>The file will be treated as empty after the <code>FileOutputStream</code> gets instantiated because you've set <code>append</code> flag to <code>false</code>. End method <code>read()</code> will always return <code>-1</code> because there's no content to read.</p>\n</li>\n<li><p>Condition is incorrect and method <code>read()</code> and only because of that control enters the loop and EOF (<code>-1</code>) is being repeatedly written into the file. If you fixed the condition to <code>(m = in.read()) != -1</code>, the loop would be ignored because the file is blank from the start.</p>\n</li>\n<li><p>If you would do both: fix the condition and change the <code>append</code> flag to <code>true</code> then you would get another flavor of infinite loop. All the contents of the file will be successfully read and repeatedly appended to the file.</p>\n</li>\n</ul>\n<p>So at any condition, reading and writing simultaneously to the same file isn't a good idea.</p>\n<p>One important note in regard to exception handling.</p>\n<p>Because there's no <code>catch</code> block in your code snippet, I assume that you've added a <code>throws</code> to the main() - it's not a nice idea. Methods <code>close()</code> in your code will be invoked only in case of successful execution, but if exception occur resources will never get released.</p>\n<p>Instead, I suggest you to make use of <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\"><strong>try with resources</strong></a>. That will provide an implicit finally block for you that will take care of closing the resources regardless whether exception occurred or not (now your invocations of <code>close()</code> will not get executed in case of exception). Another option is to declare <code>finally</code> block explicitly, and close the resources inside it.</p>\n<p>Try with resource is more concise and cleaner way to ensure that resources will get released.</p>\n<p>Also consider wrapping both streams with buffered high-level streams to improve performance. It'll significantly reduce the number of time your application will need to access the file system.</p>\n<pre><code>    try (var in = new BufferedInputStream(new FileInputStream(&quot;source.txt&quot;));\n         var out = new BufferedOutputStream(new FileOutputStream(&quot;destination.txt&quot;, false))) {\n\n        int next; // a subsequent byte that has been read from the source\n        while ((next = in.read()) != -1) {\n            out.write(next);\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"}],"owner":{"account_id":22807429,"reputation":35,"user_id":16959276,"display_name":"Jee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1614,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1649864848,"creation_date":1649646162,"question_id":71822278,"body_markdown":"\r\nThe problem with my code is an ***infinite loop*** of reading and writing.\r\n\r\nI can&#39;t find a solution or a concept for this problem.\r\n```\r\nFileInputStream in = new FileInputStream(&quot;toto.txt&quot;);\r\nFileOutputStream out = new FileOutputStream(&quot;toto.txt&quot;,false);\r\n\r\nint m;\r\nwhile ((m = in.read()) != 0) {\r\n    System.out.print(m);\r\n    out.write(m);\r\n}\r\n        \r\nin.close();\r\nout.close();\r\n```","title":"Reading and writing into the same file with FileInputStream and FileOutputStream","body":"<p>The problem with my code is an <em><strong>infinite loop</strong></em> of reading and writing.</p>\n<p>I can't find a solution or a concept for this problem.</p>\n<pre><code>FileInputStream in = new FileInputStream(&quot;toto.txt&quot;);\nFileOutputStream out = new FileOutputStream(&quot;toto.txt&quot;,false);\n\nint m;\nwhile ((m = in.read()) != 0) {\n    System.out.print(m);\n    out.write(m);\n}\n        \nin.close();\nout.close();\n</code></pre>\n"},{"tags":["java","logic"],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649864713,"creation_date":1649863546,"answer_id":71860033,"question_id":71859719,"body_markdown":"With some little modifications to your code the below snippet should give you the disired result:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public class Example {\r\n    \r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; values = Arrays.asList(&quot;a&quot;,&quot;z&quot;,&quot;c&quot;,&quot;c&quot;,&quot;a&quot;,&quot;e&quot;,&quot;e&quot;);\r\n            List&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;&gt;();\r\n    \r\n            String previous = null;\r\n            List&lt;String&gt; subList = new ArrayList&lt;&gt;();\r\n    \r\n            for (String value : values) {\r\n                if (previous == null || value.equals(previous)) {\r\n                    subList.add(value);\r\n                } else {\r\n                    result.add(subList);\r\n                    subList = new ArrayList&lt;&gt;();\r\n                    subList.add(value);\r\n                }\r\n                previous = value;\r\n            }\r\n            if (!subList.isEmpty()) {\r\n                result.add(subList);\r\n            }\r\n            System.out.println(result);\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    [[a], [z], [c, c], [a], [e, e]]\r\n\r\nAnother approach using streams and AtomicReference:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    import java.util.concurrent.atomic.AtomicReference;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class Example {\r\n    \r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; input = Arrays.asList(&quot;a&quot;, &quot;z&quot;, &quot;c&quot;, &quot;c&quot;, &quot;a&quot;, &quot;e&quot;, &quot;e&quot;);\r\n    \r\n            AtomicReference&lt;String&gt; ar = new AtomicReference&lt;&gt;(input.get(0));\r\n            AtomicInteger ai = new AtomicInteger();\r\n    \r\n            List&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;&gt;(\r\n                    input.stream().collect(\r\n                            Collectors.groupingBy(str -&gt; str.equals(ar.getAndSet(str)) ? ai.get() : ai.incrementAndGet()))\r\n                    .values());\r\n            System.out.println(result);\r\n        }\r\n    }","title":"From a list , create another set of list that contain all the items that are repeated","body":"<p>With some little modifications to your code the below snippet should give you the disired result:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class Example {\n\n    public static void main(String[] args) {\n        List&lt;String&gt; values = Arrays.asList(&quot;a&quot;,&quot;z&quot;,&quot;c&quot;,&quot;c&quot;,&quot;a&quot;,&quot;e&quot;,&quot;e&quot;);\n        List&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;&gt;();\n\n        String previous = null;\n        List&lt;String&gt; subList = new ArrayList&lt;&gt;();\n\n        for (String value : values) {\n            if (previous == null || value.equals(previous)) {\n                subList.add(value);\n            } else {\n                result.add(subList);\n                subList = new ArrayList&lt;&gt;();\n                subList.add(value);\n            }\n            previous = value;\n        }\n        if (!subList.isEmpty()) {\n            result.add(subList);\n        }\n        System.out.println(result);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>[[a], [z], [c, c], [a], [e, e]]\n</code></pre>\n<p>Another approach using streams and AtomicReference:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicReference;\nimport java.util.stream.Collectors;\n\npublic class Example {\n\n    public static void main(String[] args) {\n        List&lt;String&gt; input = Arrays.asList(&quot;a&quot;, &quot;z&quot;, &quot;c&quot;, &quot;c&quot;, &quot;a&quot;, &quot;e&quot;, &quot;e&quot;);\n\n        AtomicReference&lt;String&gt; ar = new AtomicReference&lt;&gt;(input.get(0));\n        AtomicInteger ai = new AtomicInteger();\n\n        List&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;&gt;(\n                input.stream().collect(\n                        Collectors.groupingBy(str -&gt; str.equals(ar.getAndSet(str)) ? ai.get() : ai.incrementAndGet()))\n                .values());\n        System.out.println(result);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11229395,"reputation":2092,"user_id":8237992,"display_name":"Monu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71860033,"answer_count":1,"score":1,"last_activity_date":1649864713,"creation_date":1649862153,"question_id":71859719,"body_markdown":"I have a list\r\n\r\n```\r\nl = [&quot;a&quot;,&quot;z&quot;,&quot;c&quot;,&quot;c&quot;,&quot;a&quot;,&quot;e&quot;,&quot;e&quot;]\r\n```\r\n\r\nI need to generate a set of list as below in java\r\n\r\n```\r\nl1=[&quot;a&quot;]\r\nl2=[&quot;z&quot;]\r\nl3=[&quot;c&quot;,&quot;c&quot;]\r\nl4=[&quot;a&quot;]\r\nl5=[&quot;e&quot;,&quot;e&quot;]\r\n```\r\n\r\nbelow is my code so far\r\n```\r\npackage test\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class test {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; l =new ArrayList&lt;&gt;();\r\n        List&lt;List&gt; ll =new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; nl;\r\n        l.add(&quot;a&quot;);\r\n        l.add(&quot;z&quot;);\r\n        l.add(&quot;c&quot;);\r\n        l.add(&quot;c&quot;);\r\n        l.add(&quot;a&quot;);\r\n        l.add(&quot;a&quot;);\r\n        l.add(&quot;e&quot;);\r\n        String prev=&quot;&quot;;\r\n        nl = new ArrayList&lt;&gt;();\r\n        for (String x : l){\r\n            if(prev.equals(x))\r\n            {\r\n                nl.add(x);\r\n            }\r\n            else {\r\n                if(!nl.isEmpty()) {\r\n                    ll.add(nl);\r\n                }\r\n                else{\r\n                List&lt;String&gt; nl1 = new ArrayList&lt;&gt;();\r\n                nl1.add(x);\r\n                ll.add(nl1);\r\n                }\r\n            }\r\n            prev=x;\r\n        }\r\n\r\n        System.out.println(ll);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\noutput\r\n```\r\n[[a], [z], [c], [c, a], [c, a]]\r\n```\r\nexpected\r\n```\r\n[[a], [z], [c,c], [a,a], [e]]\r\n```","title":"From a list , create another set of list that contain all the items that are repeated","body":"<p>I have a list</p>\n<pre><code>l = [&quot;a&quot;,&quot;z&quot;,&quot;c&quot;,&quot;c&quot;,&quot;a&quot;,&quot;e&quot;,&quot;e&quot;]\n</code></pre>\n<p>I need to generate a set of list as below in java</p>\n<pre><code>l1=[&quot;a&quot;]\nl2=[&quot;z&quot;]\nl3=[&quot;c&quot;,&quot;c&quot;]\nl4=[&quot;a&quot;]\nl5=[&quot;e&quot;,&quot;e&quot;]\n</code></pre>\n<p>below is my code so far</p>\n<pre><code>package test\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class test {\n\n    public static void main(String[] args) {\n        List&lt;String&gt; l =new ArrayList&lt;&gt;();\n        List&lt;List&gt; ll =new ArrayList&lt;&gt;();\n        List&lt;String&gt; nl;\n        l.add(&quot;a&quot;);\n        l.add(&quot;z&quot;);\n        l.add(&quot;c&quot;);\n        l.add(&quot;c&quot;);\n        l.add(&quot;a&quot;);\n        l.add(&quot;a&quot;);\n        l.add(&quot;e&quot;);\n        String prev=&quot;&quot;;\n        nl = new ArrayList&lt;&gt;();\n        for (String x : l){\n            if(prev.equals(x))\n            {\n                nl.add(x);\n            }\n            else {\n                if(!nl.isEmpty()) {\n                    ll.add(nl);\n                }\n                else{\n                List&lt;String&gt; nl1 = new ArrayList&lt;&gt;();\n                nl1.add(x);\n                ll.add(nl1);\n                }\n            }\n            prev=x;\n        }\n\n        System.out.println(ll);\n    }\n}\n\n\n</code></pre>\n<p>output</p>\n<pre><code>[[a], [z], [c], [c, a], [c, a]]\n</code></pre>\n<p>expected</p>\n<pre><code>[[a], [z], [c,c], [a,a], [e]]\n</code></pre>\n"},{"tags":["java","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":21208365,"reputation":260,"user_id":15597511,"display_name":"Daksh Rawal"},"score":0,"creation_date":1649850959,"post_id":71854955,"comment_id":126979388,"body_markdown":"the code looks fine ..have tried and checked whether the code inside the if condition is getting executed or not ??.....u can add a print statement to check that","body":"the code looks fine ..have tried and checked whether the code inside the if condition is getting executed or not ??.....u can add a print statement to check that"},{"owner":{"account_id":6414227,"reputation":195,"user_id":4972927,"accept_rate":71,"display_name":"nilFi"},"score":0,"creation_date":1649851463,"post_id":71854955,"comment_id":126979609,"body_markdown":"@daksh, yes it does work with the above approach I am just trying to understand how the traditional for loop above can be converted using Lamba\\stream api.","body":"@daksh, yes it does work with the above approach I am just trying to understand how the traditional for loop above can be converted using Lamba\\stream api."},{"owner":{"account_id":21208365,"reputation":260,"user_id":15597511,"display_name":"Daksh Rawal"},"score":1,"creation_date":1649851823,"post_id":71854955,"comment_id":126979734,"body_markdown":"check this ..https://stackoverflow.com/a/43819804/15597511","body":"check this ..<a href=\"https://stackoverflow.com/a/43819804/15597511\">stackoverflow.com/a/43819804/15597511</a>"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":2,"creation_date":1649859426,"post_id":71854955,"comment_id":126982994,"body_markdown":"Please don&#39;t use `Date` or `SimpleDateFormat`, as they are obsolete. Instead, use classes from the `java.time` package.","body":"Please don&#39;t use <code>Date</code> or <code>SimpleDateFormat</code>, as they are obsolete. Instead, use classes from the <code>java.time</code> package."}],"answers":[{"tags":[],"owner":{"account_id":20678789,"reputation":572,"user_id":15182834,"display_name":"I&#39;m Weverton"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649857287,"creation_date":1649857287,"answer_id":71858530,"question_id":71854955,"body_markdown":"To use Lambda/Stream api you need to have a List instance, you can convert your lines to ArrayList and do the foreach:\r\n\r\n    //...    \r\n    List&lt;String&gt; linesList = new ArrayList&lt;&gt;(lines);\r\n    \r\n    linesList.stream()\r\n        .filter(line -&gt; line.contains(FOR_DATE)) //filter lines which contains FOR_DATE\r\n        .map(line -&gt; extractForDate(line, &quot;regex&quot;)) //returns a list of Date e.g. List&lt;Date&gt;\r\n        .forEach(date -&gt; {\r\n            java.sql.Date sd = new java.sql.Date(forDate.getTime());\r\n        }\r\n    });","title":"Calling method from loop and returning value using Java 8 Lambda \\ Stream","body":"<p>To use Lambda/Stream api you need to have a List instance, you can convert your lines to ArrayList and do the foreach:</p>\n<pre><code>//...    \nList&lt;String&gt; linesList = new ArrayList&lt;&gt;(lines);\n\nlinesList.stream()\n    .filter(line -&gt; line.contains(FOR_DATE)) //filter lines which contains FOR_DATE\n    .map(line -&gt; extractForDate(line, &quot;regex&quot;)) //returns a list of Date e.g. List&lt;Date&gt;\n    .forEach(date -&gt; {\n        java.sql.Date sd = new java.sql.Date(forDate.getTime());\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649864333,"creation_date":1649859411,"answer_id":71859054,"question_id":71854955,"body_markdown":"It doesn&#39;t stray that much from what you already have. You just need to break each step (filtering, mapping, collecting results) to a stream function. This is what you&#39;re looking for:\r\n\r\n```java\r\nList&lt;Date&gt; listDates = Arrays.stream(lines)\r\n    .filter(line -&gt; line.contains(FOR_DATE))\r\n    .map(line -&gt; extractForDate(line, regex))\r\n    .collect(Collectors.toList());\r\n```\r\n\r\nHere there&#39;s also a Test class where I assumed your regex and array of lines\r\n\r\n```\r\npublic class Test {\r\n    public static final String FOR_DATE = &quot;DATE:&quot;;\r\n\r\n    public static void main(String[] args) throws ParseException {\r\n        String[] lines = new String[]{&quot;DATE: 2152022&quot;, &quot;test&quot;, &quot;160220&quot;, &quot;DATE: 1012001&quot;};\r\n        String regex = &quot;(\\\\d\\\\d{2}\\\\d{4})&quot;;\r\n\r\n        List&lt;Date&gt; listDates = Arrays.stream(lines)\r\n                .filter(line -&gt; line.contains(FOR_DATE))\r\n                .map(line -&gt; extractForDate(line, regex))\r\n                .collect(Collectors.toList());\r\n\r\n        for (Date d : listDates) {\r\n            System.out.println(d);\r\n        }\r\n    }\r\n\r\n    private static Date extractForDate(String line, String regex) {\r\n        Matcher m = Pattern.compile(regex).matcher(line);\r\n        Date startDate = null;\r\n        if (m.find()) {\r\n            try {\r\n                startDate = new SimpleDateFormat(&quot;Mddyyyy&quot;).parse(m.group(1));\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        return startDate;\r\n    }\r\n}\r\n```","title":"Calling method from loop and returning value using Java 8 Lambda \\ Stream","body":"<p>It doesn't stray that much from what you already have. You just need to break each step (filtering, mapping, collecting results) to a stream function. This is what you're looking for:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Date&gt; listDates = Arrays.stream(lines)\n    .filter(line -&gt; line.contains(FOR_DATE))\n    .map(line -&gt; extractForDate(line, regex))\n    .collect(Collectors.toList());\n</code></pre>\n<p>Here there's also a Test class where I assumed your regex and array of lines</p>\n<pre><code>public class Test {\n    public static final String FOR_DATE = &quot;DATE:&quot;;\n\n    public static void main(String[] args) throws ParseException {\n        String[] lines = new String[]{&quot;DATE: 2152022&quot;, &quot;test&quot;, &quot;160220&quot;, &quot;DATE: 1012001&quot;};\n        String regex = &quot;(\\\\d\\\\d{2}\\\\d{4})&quot;;\n\n        List&lt;Date&gt; listDates = Arrays.stream(lines)\n                .filter(line -&gt; line.contains(FOR_DATE))\n                .map(line -&gt; extractForDate(line, regex))\n                .collect(Collectors.toList());\n\n        for (Date d : listDates) {\n            System.out.println(d);\n        }\n    }\n\n    private static Date extractForDate(String line, String regex) {\n        Matcher m = Pattern.compile(regex).matcher(line);\n        Date startDate = null;\n        if (m.find()) {\n            try {\n                startDate = new SimpleDateFormat(&quot;Mddyyyy&quot;).parse(m.group(1));\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        }\n        return startDate;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23095038,"reputation":146,"user_id":17205307,"display_name":"Johannes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649860606,"creation_date":1649860606,"answer_id":71859346,"question_id":71854955,"body_markdown":"If I understood your code correctly you only want to create a date for the first line matching your expression. For that you can use filter() and findFirst(), which will give you an Optional on which you can use map() to create your date if anyone was found. I separated each step in its own map function but you can of course merge them into one.\r\n\r\n        java.sql.Date date = Arrays.stream(lines)\r\n                .filter(line -&gt; line.contains(FOR_DATE))\r\n                .findFirst()\r\n                .map(line -&gt; extractForDate(line, &quot;regex expression&quot;))\r\n                .map(Date::getTime)\r\n                .map(java.sql.Date::new)\r\n                .orElse(null);","title":"Calling method from loop and returning value using Java 8 Lambda \\ Stream","body":"<p>If I understood your code correctly you only want to create a date for the first line matching your expression. For that you can use filter() and findFirst(), which will give you an Optional on which you can use map() to create your date if anyone was found. I separated each step in its own map function but you can of course merge them into one.</p>\n<pre><code>    java.sql.Date date = Arrays.stream(lines)\n            .filter(line -&gt; line.contains(FOR_DATE))\n            .findFirst()\n            .map(line -&gt; extractForDate(line, &quot;regex expression&quot;))\n            .map(Date::getTime)\n            .map(java.sql.Date::new)\n            .orElse(null);\n</code></pre>\n"}],"owner":{"account_id":6414227,"reputation":195,"user_id":4972927,"accept_rate":71,"display_name":"nilFi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1640,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":71859054,"answer_count":3,"score":1,"last_activity_date":1649864333,"creation_date":1649841518,"question_id":71854955,"body_markdown":"I am trying to convert the below traditional for loop in Java 8. I tried iterating over the loop using stream&#39;s forEach and used a filter for *contains* check but I am unable to understand how to make a call to `extractForDate()` method and return the value.  Please can you assist with the approach?\r\n```\r\nfor (int i = 0; i &lt; lines.length; i++) {\r\n            if (lines[i].contains(FOR_DATE)) {\r\n                String regex = &quot;regex expression&quot;;\r\n                forDate = extractForDate(lines[i], regex);\r\n                java.sql.Date sd = new java.sql.Date(forDate.getTime())\r\n                break;\r\n            }\r\n        }\r\n\r\n```\r\n\r\nBelow is the method implementation.\r\n```\r\n    private static Date extractForDate(String Line, string regex) {\r\n        Matcher m = Pattern.compile(regex).matcher(line);\r\n        Date startDate = null,\r\n        if (m.find()) {\r\n            try {\r\n                startDate = new SimpleDateFormat(&quot;Mddyyyy&quot;).parse(m.group(1));\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        return startDate;\r\n    }\r\n```","title":"Calling method from loop and returning value using Java 8 Lambda \\ Stream","body":"<p>I am trying to convert the below traditional for loop in Java 8. I tried iterating over the loop using stream's forEach and used a filter for <em>contains</em> check but I am unable to understand how to make a call to <code>extractForDate()</code> method and return the value.  Please can you assist with the approach?</p>\n<pre><code>for (int i = 0; i &lt; lines.length; i++) {\n            if (lines[i].contains(FOR_DATE)) {\n                String regex = &quot;regex expression&quot;;\n                forDate = extractForDate(lines[i], regex);\n                java.sql.Date sd = new java.sql.Date(forDate.getTime())\n                break;\n            }\n        }\n\n</code></pre>\n<p>Below is the method implementation.</p>\n<pre><code>    private static Date extractForDate(String Line, string regex) {\n        Matcher m = Pattern.compile(regex).matcher(line);\n        Date startDate = null,\n        if (m.find()) {\n            try {\n                startDate = new SimpleDateFormat(&quot;Mddyyyy&quot;).parse(m.group(1));\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        }\n        return startDate;\n    }\n</code></pre>\n"},{"tags":["java","javafx","popup","alert"],"comments":[{"owner":{"account_id":3593143,"reputation":159,"user_id":2998655,"accept_rate":67,"display_name":"Dom"},"score":0,"creation_date":1542657241,"post_id":53381625,"comment_id":93639162,"body_markdown":"I do not guarantee this will work but try to empty the DragView: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/Dragboard.html#setDragView-javafx.scene.image.Image-\nI searched `javafx clear ghost drag` on Google","body":"I do not guarantee this will work but try to empty the DragView: <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/Dragboard.html#setDragView-javafx.scene.image.Image-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/javafx/api/javafx/scene/input/&hellip;</a> I searched <code>javafx clear ghost drag</code> on Google"},{"owner":{"account_id":11248139,"reputation":9,"user_id":8250160,"display_name":"Pisces"},"score":0,"creation_date":1542659015,"post_id":53381625,"comment_id":93640036,"body_markdown":"@Dom No joy, I tried, but thanks anyway. The doc says this &quot;This method should be called only when starting drag and drop operation in the DRAG_DETECTED handler, calling it at other times doesn&#39;t have any effect.&quot;","body":"@Dom No joy, I tried, but thanks anyway. The doc says this &quot;This method should be called only when starting drag and drop operation in the DRAG_DETECTED handler, calling it at other times doesn&#39;t have any effect.&quot;"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1542705642,"post_id":53381625,"comment_id":93654919,"body_markdown":"Please provide a [mcve] that demonstrates the problem.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem."},{"owner":{"account_id":11248139,"reputation":9,"user_id":8250160,"display_name":"Pisces"},"score":0,"creation_date":1542715956,"post_id":53381625,"comment_id":93660750,"body_markdown":"Thanks for the advice @kleopatra, I&#39;ve cleaned my question to the best of my ability.","body":"Thanks for the advice @kleopatra, I&#39;ve cleaned my question to the best of my ability."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1542724521,"post_id":53381625,"comment_id":93665966,"body_markdown":"hmm ... can&#39;t reproduce: worksforme in fx8 and fx11 on win10","body":"hmm ... can&#39;t reproduce: worksforme in fx8 and fx11 on win10"}],"answers":[{"tags":[],"owner":{"account_id":11248139,"reputation":9,"user_id":8250160,"display_name":"Pisces"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1542795911,"creation_date":1542795444,"answer_id":53409815,"question_id":53381625,"body_markdown":"I solved it myself by doing the following:\r\n\r\nKnowing that Modal Dialogs (Warning popups etc.) essentially &quot;block&quot; every other Stage via a call to `showAndwait()` the problem must be that this also blocks the `dragEvent` from finishing in the onDragDropped method (set via lambda in `setOnDragDropped`).\r\n\r\nMake sure you wrap the call to your popup method and the stuff that is to happen to the actual dropped items in a `Platform.runLater()`\r\n\r\nThis will let the `dragEvent` stuff finish first. Observe the change I made in the following line of method `start`:\r\n\r\n    root.setOnDragDropped((event) -&gt; Platform.runLater(() -&gt; isUserSure()));\r\n\r\nMake sure you don&#39;t wrap more than you have to, otherwise the items in the `Dragboard` will go out of scope. Extraction of needed items from `Dragboard` has to happen at the time of drop, and not inside `runLater()`","title":"JavaFX: Alert popup after drag-and-drop action casues frozen drop icon","body":"<p>I solved it myself by doing the following:</p>\n\n<p>Knowing that Modal Dialogs (Warning popups etc.) essentially \"block\" every other Stage via a call to <code>showAndwait()</code> the problem must be that this also blocks the <code>dragEvent</code> from finishing in the onDragDropped method (set via lambda in <code>setOnDragDropped</code>).</p>\n\n<p>Make sure you wrap the call to your popup method and the stuff that is to happen to the actual dropped items in a <code>Platform.runLater()</code></p>\n\n<p>This will let the <code>dragEvent</code> stuff finish first. Observe the change I made in the following line of method <code>start</code>:</p>\n\n<pre><code>root.setOnDragDropped((event) -&gt; Platform.runLater(() -&gt; isUserSure()));\n</code></pre>\n\n<p>Make sure you don't wrap more than you have to, otherwise the items in the <code>Dragboard</code> will go out of scope. Extraction of needed items from <code>Dragboard</code> has to happen at the time of drop, and not inside <code>runLater()</code></p>\n"},{"tags":[],"owner":{"account_id":3380516,"reputation":3833,"user_id":2837642,"display_name":"Daniel"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1602607391,"creation_date":1602607391,"answer_id":64339578,"question_id":53381625,"body_markdown":" To make it working, the runLater must be started from a secondary thread : \r\n\r\n    root.setOnDragDropped((event) -&gt; {\r\n     Thread t = new Thread(() -&gt; {\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (InterruptedException interruptedException) {\r\n                        interruptedException.printStackTrace();\r\n                    }\r\n                    Platform.runLater(() -&gt;Platform.runLater(() -&gt; isUserSure(););\r\n                });\r\n                t.run();\r\n    );\r\n\r\n","title":"JavaFX: Alert popup after drag-and-drop action casues frozen drop icon","body":"<p>To make it working, the runLater must be started from a secondary thread :</p>\n<pre><code>root.setOnDragDropped((event) -&gt; {\n Thread t = new Thread(() -&gt; {\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException interruptedException) {\n                    interruptedException.printStackTrace();\n                }\n                Platform.runLater(() -&gt;Platform.runLater(() -&gt; isUserSure(););\n            });\n            t.run();\n);\n</code></pre>\n"}],"owner":{"account_id":11248139,"reputation":9,"user_id":8250160,"display_name":"Pisces"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":559,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":53409815,"answer_count":2,"score":0,"last_activity_date":1649864252,"creation_date":1542656742,"question_id":53381625,"body_markdown":"Using JavaFX 8 I&#39;m experiencing a specific drag-and-drop problem:\r\n\r\nThe confirmation popup after dropping gets the icon stuck on screen when a drag is released, even overlaying the Alert dialog itself like so:\r\n\r\n[![Image][1]][1]  \n&lt;sub&gt;(source: [image.ibb.co](https://image.ibb.co/e71dQL/overlay.jpg))&lt;/sub&gt;  \n\r\n\r\nThe text &quot;copy&quot; and the icon remain stuck until user closes the popup.\r\n\r\nThis is the minimal code to reproduce the problem. To test, run this program and drag any file (ex. from Desktop) into the app window:\r\n\r\n    public class Main extends Application {\r\n\r\n\tprivate Parent root = new VBox();\r\n\r\n\tprivate void onDragOver(DragEvent dragEvent) {\r\n\t\tif (dragEvent.getDragboard().hasFiles()) {\r\n\t\t\tdragEvent.acceptTransferModes(TransferMode.COPY);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void isUserSure() {\r\n\t\tAlert alert = new Alert(Alert.AlertType.WARNING,&quot;&quot;,ButtonType.OK);\r\n\t\talert.showAndWait();\r\n\t}\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n\t\troot.setOnDragOver((event) -&gt; onDragOver(event));\r\n\t\troot.setOnDragDropped((event) -&gt; isUserSure());\r\n        primaryStage.setTitle(&quot;ghost demo&quot;);\r\n        primaryStage.setScene(new Scene(root, 300, 275));\r\n        primaryStage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n    }\r\n\r\n[1]: https://i.stack.imgur.com/YNhZ2.jpg","title":"JavaFX: Alert popup after drag-and-drop action casues frozen drop icon","body":"<p>Using JavaFX 8 I'm experiencing a specific drag-and-drop problem:</p>\n<p>The confirmation popup after dropping gets the icon stuck on screen when a drag is released, even overlaying the Alert dialog itself like so:</p>\n<p><a href=\"https://i.stack.imgur.com/YNhZ2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YNhZ2.jpg\" alt=\"Image\" /></a><br />\n<sub>(source: <a href=\"https://image.ibb.co/e71dQL/overlay.jpg\" rel=\"nofollow noreferrer\">image.ibb.co</a>)</sub></p>\n<p>The text &quot;copy&quot; and the icon remain stuck until user closes the popup.</p>\n<p>This is the minimal code to reproduce the problem. To test, run this program and drag any file (ex. from Desktop) into the app window:</p>\n<pre><code>public class Main extends Application {\n\nprivate Parent root = new VBox();\n\nprivate void onDragOver(DragEvent dragEvent) {\n    if (dragEvent.getDragboard().hasFiles()) {\n        dragEvent.acceptTransferModes(TransferMode.COPY);\n    }\n}\n\nprivate void isUserSure() {\n    Alert alert = new Alert(Alert.AlertType.WARNING,&quot;&quot;,ButtonType.OK);\n    alert.showAndWait();\n}\n\n@Override\npublic void start(Stage primaryStage) {\n    root.setOnDragOver((event) -&gt; onDragOver(event));\n    root.setOnDragDropped((event) -&gt; isUserSure());\n    primaryStage.setTitle(&quot;ghost demo&quot;);\n    primaryStage.setScene(new Scene(root, 300, 275));\n    primaryStage.show();\n}\n\npublic static void main(String[] args) {\n    launch(args);\n}\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","vibration","android-vibration"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1649865302,"post_id":71859942,"comment_id":126985592,"body_markdown":"The vibration motors in a phone are not meant to be operated like this.  You&#39;re going to burn them out, quite possibly literally.","body":"The vibration motors in a phone are not meant to be operated like this.  You&#39;re going to burn them out, quite possibly literally."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1649865832,"post_id":71859942,"comment_id":126985794,"body_markdown":"But if you want it to be continuous-  make the second timing value really, really long.  Then if you want it to stop, cancel it.","body":"But if you want it to be continuous-  make the second timing value really, really long.  Then if you want it to stop, cancel it."}],"owner":{"account_id":14765119,"reputation":1,"user_id":10663396,"display_name":"bretonjustin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":805,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649864123,"creation_date":1649863230,"question_id":71859942,"body_markdown":"I want to make an Android app to make a phone vibrate indefinitely. I tried the approach recommended in different other threads but it does not seem to work. The phone vibrates, but after a moment it stops for a small fraction of second before restarting. And the pattern repeats itself every ~1 second. It does not matter the value I put in `patternT`, the behavior is always the same. Is it possible to make the phone vibrate indefinitely (without any lag or stop) ? The phone used is a Google Pixel 4 on Android 11.\r\n\r\nHere is my code :\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private void vibrate() {\r\n        long[] patternT = new long[]{0, 50};\r\n        int[] patternA = new int[]{0, VibrationEffect.DEFAULT_AMPLITUDE};\r\n        VibrationEffect ve = VibrationEffect.createWaveform(patternT, patternA, 0);\r\n        Vibrator v = (Vibrator) getSystemService(VIBRATOR_SERVICE);\r\n        v.vibrate(ve);\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        final Button vibrateBtn = findViewById(R.id.btnVibrate);\r\n        vibrateBtn.setOnClickListener(view-&gt;vibrate());\r\n    }\r\n}\r\n```\r\n","title":"How to make an Android app to vibrate phone indefinitely?","body":"<p>I want to make an Android app to make a phone vibrate indefinitely. I tried the approach recommended in different other threads but it does not seem to work. The phone vibrates, but after a moment it stops for a small fraction of second before restarting. And the pattern repeats itself every ~1 second. It does not matter the value I put in <code>patternT</code>, the behavior is always the same. Is it possible to make the phone vibrate indefinitely (without any lag or stop) ? The phone used is a Google Pixel 4 on Android 11.</p>\n<p>Here is my code :</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private void vibrate() {\n        long[] patternT = new long[]{0, 50};\n        int[] patternA = new int[]{0, VibrationEffect.DEFAULT_AMPLITUDE};\n        VibrationEffect ve = VibrationEffect.createWaveform(patternT, patternA, 0);\n        Vibrator v = (Vibrator) getSystemService(VIBRATOR_SERVICE);\n        v.vibrate(ve);\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        final Button vibrateBtn = findViewById(R.id.btnVibrate);\n        vibrateBtn.setOnClickListener(view-&gt;vibrate());\n    }\n}\n</code></pre>\n"},{"tags":["java","algorithm","scala","sequencing"],"comments":[{"owner":{"account_id":5335286,"reputation":39826,"user_id":4254517,"accept_rate":48,"display_name":"Dima"},"score":1,"creation_date":1649864063,"post_id":71860101,"comment_id":126985011,"body_markdown":"what does &quot;dependent on outcome&quot; mean? Takes results as parameters? Or are we talking side-effects here? How are your tasks represented in code?","body":"what does &quot;dependent on outcome&quot; mean? Takes results as parameters? Or are we talking side-effects here? How are your tasks represented in code?"},{"owner":{"account_id":5131293,"reputation":21831,"user_id":4111404,"accept_rate":80,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"score":0,"creation_date":1649865734,"post_id":71860101,"comment_id":126985752,"body_markdown":"I would suggest using **cats-effect** `IO` to represent the tasks, the  build a DAG of the tasks using a `Map[TaskId, NonEmptySet[TaskId]]` and finally do a a recursion over the DAG and running each set of tasks in parallel.","body":"I would suggest using <b>cats-effect</b> <code>IO</code> to represent the tasks, the  build a DAG of the tasks using a <code>Map[TaskId, NonEmptySet[TaskId]]</code> and finally do a a recursion over the DAG and running each set of tasks in parallel."},{"owner":{"account_id":6297287,"reputation":2661,"user_id":8870132,"display_name":"Raman Mishra"},"score":0,"creation_date":1649881057,"post_id":71860101,"comment_id":126990904,"body_markdown":"Why can&#39;t you use some existing orchestration tools? like azkaban, dataflow streamset etc.","body":"Why can&#39;t you use some existing orchestration tools? like azkaban, dataflow streamset etc."},{"owner":{"account_id":10449668,"reputation":75,"user_id":7703705,"display_name":"Sudha Rajamanickam"},"score":0,"creation_date":1649898631,"post_id":71860101,"comment_id":126994310,"body_markdown":"@Dima Yes I meant outcome is input for another task","body":"@Dima Yes I meant outcome is input for another task"},{"owner":{"account_id":5335286,"reputation":39826,"user_id":4254517,"accept_rate":48,"display_name":"Dima"},"score":0,"creation_date":1649901548,"post_id":71860101,"comment_id":126994681,"body_markdown":"@SudhaRajamanickam then just start all the tsks with `Futures`,","body":"@SudhaRajamanickam then just start all the tsks with <code>Futures</code>,"}],"owner":{"account_id":10449668,"reputation":75,"user_id":7703705,"display_name":"Sudha Rajamanickam"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649863791,"creation_date":1649863791,"question_id":71860101,"body_markdown":"Having a scenario where I need to identify task sequence and execute tasks possible indenpendent flows/tasks parallely. for example\r\n\r\nTask 1 \r\n\r\nTask 2 -&gt;Task 11 and task-3\r\n\r\nTask 3 -&gt; Task 1\r\n\r\nTask 4 -&gt; Task 8 and task 12\r\n\r\nTask 5 -&gt; Task 9\r\n\r\nTask 7\r\n\r\nTask 8 -&gt; Task 10\r\n\r\nTask 9\r\n\r\nTask 10\r\n\r\nTask 11 \r\n\r\neach task does some computation, all tasks will respond with a Number. need to collect all task responses  in a Set () and respond to client of the method/function.\r\nindependent tasks can compute parallely. Also Algorithm should find if any circular dependency.\r\n\r\nTask 1 7,9,10 and 11 are independent\r\n\r\nTask 2 dependent on outcome of 11 and 3\r\n\r\nTask 3 on 1\r\n\r\nTask 4 on 8 and  12\r\n\r\nTask 5 on 9\r\n\r\nwhat data structure and algorithm suitable for this problem, could someone help? ","title":"Task sequencing based on dependent tasks with parallel execution","body":"<p>Having a scenario where I need to identify task sequence and execute tasks possible indenpendent flows/tasks parallely. for example</p>\n<p>Task 1</p>\n<p>Task 2 -&gt;Task 11 and task-3</p>\n<p>Task 3 -&gt; Task 1</p>\n<p>Task 4 -&gt; Task 8 and task 12</p>\n<p>Task 5 -&gt; Task 9</p>\n<p>Task 7</p>\n<p>Task 8 -&gt; Task 10</p>\n<p>Task 9</p>\n<p>Task 10</p>\n<p>Task 11</p>\n<p>each task does some computation, all tasks will respond with a Number. need to collect all task responses  in a Set () and respond to client of the method/function.\nindependent tasks can compute parallely. Also Algorithm should find if any circular dependency.</p>\n<p>Task 1 7,9,10 and 11 are independent</p>\n<p>Task 2 dependent on outcome of 11 and 3</p>\n<p>Task 3 on 1</p>\n<p>Task 4 on 8 and  12</p>\n<p>Task 5 on 9</p>\n<p>what data structure and algorithm suitable for this problem, could someone help?</p>\n"},{"tags":["java","postgresql","spring-boot","asynchronous","tomcat8"],"comments":[{"owner":{"account_id":1646676,"reputation":4100,"user_id":1518100,"accept_rate":96,"display_name":"Lei Yang"},"score":0,"creation_date":1647876931,"post_id":71559583,"comment_id":126475682,"body_markdown":"why *implement a process*, instead of notifying something when the events arrive in existing controller?","body":"why <i>implement a process</i>, instead of notifying something when the events arrive in existing controller?"}],"answers":[{"tags":[],"owner":{"account_id":7478323,"reputation":175,"user_id":5683970,"display_name":"Jordi Alvarez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649863677,"creation_date":1649863677,"answer_id":71860068,"question_id":71559583,"body_markdown":"If you really need/want to check asynchronously for some events registered when processing a web request, you can use Spring @Scheduled annotation. You may take a look at: https://spring.io/guides/gs/scheduling-tasks/\r\n\r\nSpring boot has the abstraction of task executor (equivalent to a thread pool) in order to execute @Scheduled tasks. You can find valuable information on how to configure the task executor for the @Scheduled annotation here: https://stackoverflow.com/questions/29796651/what-is-the-default-scheduler-pool-size-in-spring-boot\r\n\r\n","title":"java Spring boot asynchronous data processing","body":"<p>If you really need/want to check asynchronously for some events registered when processing a web request, you can use Spring @Scheduled annotation. You may take a look at: <a href=\"https://spring.io/guides/gs/scheduling-tasks/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/scheduling-tasks/</a></p>\n<p>Spring boot has the abstraction of task executor (equivalent to a thread pool) in order to execute @Scheduled tasks. You can find valuable information on how to configure the task executor for the @Scheduled annotation here: <a href=\"https://stackoverflow.com/questions/29796651/what-is-the-default-scheduler-pool-size-in-spring-boot\">What is the default scheduler pool size in spring-boot?</a></p>\n"}],"owner":{"account_id":16934929,"reputation":35,"user_id":12248188,"display_name":"EDW"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71860068,"answer_count":1,"score":0,"last_activity_date":1649863677,"creation_date":1647874387,"question_id":71559583,"body_markdown":"I have a java spring boot application with a REST-controller that processes HTTP post request and embedded tomcat server. the controller gets events all the time and stores them in a database. I want to implement a process in the same application that checks asynchronously if a certain event has been stored.\r\n\r\nhow can I implement this please? can I do with a java thread? I am looking for a optimal Way to implement this.\r\n\r\nThank you in advance","title":"java Spring boot asynchronous data processing","body":"<p>I have a java spring boot application with a REST-controller that processes HTTP post request and embedded tomcat server. the controller gets events all the time and stores them in a database. I want to implement a process in the same application that checks asynchronously if a certain event has been stored.</p>\n<p>how can I implement this please? can I do with a java thread? I am looking for a optimal Way to implement this.</p>\n<p>Thank you in advance</p>\n"},{"tags":["java","spring-boot","design-patterns","hashmap","observer-pattern"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1649840272,"post_id":71854454,"comment_id":126975225,"body_markdown":"The easiest way is to subclass `HashMap` and adjust the `put` method so that it notifies you somehow.","body":"The easiest way is to subclass <code>HashMap</code> and adjust the <code>put</code> method so that it notifies you somehow."},{"owner":{"account_id":7375351,"reputation":49,"user_id":5614178,"display_name":"Reg Reg"},"score":0,"creation_date":1649840850,"post_id":71854454,"comment_id":126975403,"body_markdown":"How that notification part need to implements?","body":"How that notification part need to implements?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1649843249,"post_id":71854454,"comment_id":126976367,"body_markdown":"Have a look at `Observer` and `Observable`","body":"Have a look at <code>Observer</code> and <code>Observable</code>"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649863512,"creation_date":1649858092,"answer_id":71858728,"question_id":71854454,"body_markdown":"I think the most flexible solution will be to implement the [Observer pattern](https://en.wikipedia.org/wiki/Observer_pattern).\r\n\r\n&lt;br&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n&lt;br&gt;\r\n\r\n**Note** that build-inn interfaces `Observer` and `Observable` are deprecated since JDK version 9. Even if you are using Java 8 don&#39;t use them. The problem with them is that their names as well as the method name `update()` of the `Observer` don&#39;t tell anything to the reader of the code about the event that was triggered and what kind of actions might follow.\r\n\r\nAss you can see from the diagram, the **subject** should contain a *collection* of **observers** (or *listeners*).\r\n\r\nThe subject in your case should be class contains a `HashMap` updates of which you want to listen. Don&#39;t extend the map, wrap it with your class instead. Because if you choose to extend `HashMap` your code will become dependent on its implementation. And any changes in the `HashMap`, for instance, new methods were added or existing were improved could break your code (*this topic is covered in the book &quot;Effective Java&quot; by Joshua Blochtake, have a look at it for more information*).\r\n\r\nSo let&#39;s say we have a class `OrderManager` that maintains a map of `Order`s. This class will be a ***subject***.\r\n\r\nA couple of services like `BillingManager`, LoggingManager` and maybe some more needs to notified new order was added. These are our ***observers***. All these classes an interface, let&#39;s say `OrderAddedListener` that defines a single method `onOrderAdded(Order order)`, that&#39;s the event we are interested in. \r\n\r\n***Note**, if you need to listen to other events like removal or update, you need to define a new interface with a method responsible for that for every target event as the Interface segregation principle suggests.*\r\n\r\n`OrderManager` has to have a collection of *observers*. When a new order is being added, subject iterates through the collection of observers and invokes `onOrderAdded()` method on each of them.\r\n\r\nIn order to add an observer that need to listen to the order-added event `OrderManager` has to define a method to register it, and it&#39;s also good practice to add another one to unregister the observer that has registered to be able to remove it when you no longer need it.\r\n\r\n&lt;h3&gt;Asynchronous processing&lt;/h3&gt;\r\n\r\n**Note**, that in this example, events are being processing in the *same thread*. If actions performed by observers are costful or might block the thread, in order to fire them asynchronously you can create a class that will implement `Runnable` and hold references to the *observer* and *event* (*order the was added/updated*), and method `run()` will trigger the observer. And when a new event occurs, `OrderManager` instead of invoking `onOrderAdded()` on each observer should create a new instance of that class implementing runnable by passing an *observer* and a *new order* to its constructor and then create and fire a *new thread*.\r\n\r\nIt&#39;s a simplified approach. But I guess it&#39;ll give an understanding of the general idea.\r\n\r\n&lt;h3&gt;Implementation example&lt;/h3&gt;\r\n\r\nThat how it might look like:\r\n```\r\npublic class OrderManager {\r\n    private Map&lt;Long, Order&gt; orderById = new HashMap&lt;&gt;();\r\n    private Set&lt;OrderAddedListener&gt; listeners = new HashSet&lt;&gt;();\r\n    \r\n    public void addOrder(Order order) {\r\n        // notifying observers\r\n        listeners.forEach(observer -&gt; observer.onOrderAdded(order));\r\n        \r\n        orderById.put(order.getId(), order);\r\n    }\r\n    \r\n    // more methods like removeOrder(), getOrderCount() etc.\r\n    \r\n    public boolean registerOrderAddedListener(OrderAddedListener listener) {\r\n        return listeners.add(listener);\r\n    }\r\n    \r\n    public boolean unregisterOrderAddedListener(OrderAddedListener listener) {\r\n        return listeners.remove(listener);\r\n    }\r\n}\r\n\r\npublic interface OrderAddedListener {\r\n    void onOrderAdded(Order order);\r\n}\r\n\r\npublic class LoggingManager implements OrderAddedListener {\r\n    private Logger logger;\r\n    \r\n    @Override\r\n    public void onOrderAdded(Order order) {\r\n//        logger.log();\r\n        System.out.println(&quot;Log message has been written&quot;);\r\n    }\r\n}\r\n\r\npublic class BillingManager implements OrderAddedListener {\r\n    private BillingService billingService;\r\n    \r\n    @Override\r\n    public void onOrderAdded(Order order) {\r\n//        billingService.sendBill(order);\r\n        System.out.println(&quot;A bill has been sent&quot;);\r\n    }\r\n}\r\n```\r\n`main()` - a simple demo\r\n\r\n    public static void main(String[] args) {\r\n        OrderManager orderManager = new OrderManager();\r\n        orderManager.registerOrderAddedListener(new LoggingManager());\r\n        orderManager.registerOrderAddedListener(new BillingManager());\r\n        orderManager.addOrder(new Order());\r\n    }\r\n\r\n**Output**\r\n```\r\nA log message has been written\r\nA bill has been sent\r\n```\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PPE2ml.png","title":"How to listen the Change of the HashMap&#39;s specific key&#39;s Value in Java","body":"<p>I think the most flexible solution will be to implement the <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">Observer pattern</a>.</p>\n<br>\n<p><a href=\"https://i.stack.imgur.com/PPE2ml.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PPE2ml.png\" alt=\"enter image description here\" /></a></p>\n<br>\n<p><strong>Note</strong> that build-inn interfaces <code>Observer</code> and <code>Observable</code> are deprecated since JDK version 9. Even if you are using Java 8 don't use them. The problem with them is that their names as well as the method name <code>update()</code> of the <code>Observer</code> don't tell anything to the reader of the code about the event that was triggered and what kind of actions might follow.</p>\n<p>Ass you can see from the diagram, the <strong>subject</strong> should contain a <em>collection</em> of <strong>observers</strong> (or <em>listeners</em>).</p>\n<p>The subject in your case should be class contains a <code>HashMap</code> updates of which you want to listen. Don't extend the map, wrap it with your class instead. Because if you choose to extend <code>HashMap</code> your code will become dependent on its implementation. And any changes in the <code>HashMap</code>, for instance, new methods were added or existing were improved could break your code (<em>this topic is covered in the book &quot;Effective Java&quot; by Joshua Blochtake, have a look at it for more information</em>).</p>\n<p>So let's say we have a class <code>OrderManager</code> that maintains a map of <code>Order</code>s. This class will be a <em><strong>subject</strong></em>.</p>\n<p>A couple of services like <code>BillingManager</code>, LoggingManager<code>and maybe some more needs to notified new order was added. These are our ***observers***. All these classes an interface, let's say</code>OrderAddedListener<code>that defines a single method</code>onOrderAdded(Order order)`, that's the event we are interested in.</p>\n<p><em><strong>Note</strong>, if you need to listen to other events like removal or update, you need to define a new interface with a method responsible for that for every target event as the Interface segregation principle suggests.</em></p>\n<p><code>OrderManager</code> has to have a collection of <em>observers</em>. When a new order is being added, subject iterates through the collection of observers and invokes <code>onOrderAdded()</code> method on each of them.</p>\n<p>In order to add an observer that need to listen to the order-added event <code>OrderManager</code> has to define a method to register it, and it's also good practice to add another one to unregister the observer that has registered to be able to remove it when you no longer need it.</p>\n<h3>Asynchronous processing</h3>\n<p><strong>Note</strong>, that in this example, events are being processing in the <em>same thread</em>. If actions performed by observers are costful or might block the thread, in order to fire them asynchronously you can create a class that will implement <code>Runnable</code> and hold references to the <em>observer</em> and <em>event</em> (<em>order the was added/updated</em>), and method <code>run()</code> will trigger the observer. And when a new event occurs, <code>OrderManager</code> instead of invoking <code>onOrderAdded()</code> on each observer should create a new instance of that class implementing runnable by passing an <em>observer</em> and a <em>new order</em> to its constructor and then create and fire a <em>new thread</em>.</p>\n<p>It's a simplified approach. But I guess it'll give an understanding of the general idea.</p>\n<h3>Implementation example</h3>\n<p>That how it might look like:</p>\n<pre><code>public class OrderManager {\n    private Map&lt;Long, Order&gt; orderById = new HashMap&lt;&gt;();\n    private Set&lt;OrderAddedListener&gt; listeners = new HashSet&lt;&gt;();\n    \n    public void addOrder(Order order) {\n        // notifying observers\n        listeners.forEach(observer -&gt; observer.onOrderAdded(order));\n        \n        orderById.put(order.getId(), order);\n    }\n    \n    // more methods like removeOrder(), getOrderCount() etc.\n    \n    public boolean registerOrderAddedListener(OrderAddedListener listener) {\n        return listeners.add(listener);\n    }\n    \n    public boolean unregisterOrderAddedListener(OrderAddedListener listener) {\n        return listeners.remove(listener);\n    }\n}\n\npublic interface OrderAddedListener {\n    void onOrderAdded(Order order);\n}\n\npublic class LoggingManager implements OrderAddedListener {\n    private Logger logger;\n    \n    @Override\n    public void onOrderAdded(Order order) {\n//        logger.log();\n        System.out.println(&quot;Log message has been written&quot;);\n    }\n}\n\npublic class BillingManager implements OrderAddedListener {\n    private BillingService billingService;\n    \n    @Override\n    public void onOrderAdded(Order order) {\n//        billingService.sendBill(order);\n        System.out.println(&quot;A bill has been sent&quot;);\n    }\n}\n</code></pre>\n<p><code>main()</code> - a simple demo</p>\n<pre><code>public static void main(String[] args) {\n    OrderManager orderManager = new OrderManager();\n    orderManager.registerOrderAddedListener(new LoggingManager());\n    orderManager.registerOrderAddedListener(new BillingManager());\n    orderManager.addOrder(new Order());\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>A log message has been written\nA bill has been sent\n</code></pre>\n"}],"owner":{"account_id":7375351,"reputation":49,"user_id":5614178,"display_name":"Reg Reg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":554,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1649863512,"creation_date":1649839250,"question_id":71854454,"body_markdown":"I have to wait till the `HashMap` key&#39;s value change from another thread and have to continue the request processing after that. ","title":"How to listen the Change of the HashMap&#39;s specific key&#39;s Value in Java","body":"<p>I have to wait till the <code>HashMap</code> key's value change from another thread and have to continue the request processing after that.</p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":7719031,"reputation":2254,"user_id":5845802,"display_name":"PrasadU"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649863393,"creation_date":1649863393,"answer_id":71859983,"question_id":71858724,"body_markdown":"you were there almost ..\r\n```\r\ntasks.create(name: &quot;myJar&quot;, type: Jar) {\r\n    // ... custom jar spec\r\n}\r\n\r\njar.enabled = false //if you want to disable the default\r\nbuild.dependsOn myJar //ensure this always runs\r\n```","title":"Gradle: jar task - override from","body":"<p>you were there almost ..</p>\n<pre><code>tasks.create(name: &quot;myJar&quot;, type: Jar) {\n    // ... custom jar spec\n}\n\njar.enabled = false //if you want to disable the default\nbuild.dependsOn myJar //ensure this always runs\n</code></pre>\n"}],"owner":{"account_id":13430029,"reputation":945,"user_id":9690114,"display_name":"RomanMitasov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":430,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1649863393,"creation_date":1649858078,"question_id":71858724,"body_markdown":"I need to customize my `jar` task so it would:\r\n\r\n - process all classes as usual;\r\n - include only particular resources and put them into custom folder inside the jar.\r\n\r\nI&#39;ve already made custom jar task, which does what I want:\r\n\r\n```gradle\r\ntask customJar(type: Jar) {\r\n    dependsOn classes\r\n    group = &#39;build&#39;\r\n\r\n    // everything except resources process as usual\r\n    from sourceSets.main.output - sourceSets.main.output.resourcesDir\r\n\r\n    // and process resources to custom place\r\n    from(sourceSets.main.output.resourcesDir) {\r\n        include &#39;docs/**&#39;\r\n        include &#39;messages*.properties&#39;\r\n        into &#39;custom-folder&#39;\r\n    }\r\n}\r\n```\r\n\r\nBut I still need to replace built-in jar with a new one.\r\n\r\nReplacing it with `create`\r\n\r\n```gradle\r\ntasks.create(name: &quot;jar&quot;, type: Jar, overwrite: true) {\r\n    // ... custom jar spec\r\n}\r\n```\r\n...yields\r\n\r\n```\r\nReplacing an existing task that may have already been used by other plugins is not supported\r\n```\r\n\r\nand simple configuration of the `jar` task doesn&#39;t work, because it is already configured in JavaPlugin:\r\n\r\n```gradle\r\njar {\r\n    // jar is already configured\r\n    // with `from sourceSets.main.output`\r\n    // so it will include everything\r\n    // AND create a custom folder\r\n\r\n    // does nothing\r\n    from sourceSets.main.output - sourceSets.main.output.resourcesDir\r\n\r\n    // adds processed resources into &#39;custom-folder&#39;\r\n    // in addition to all resources processed by default behaviour\r\n    from(sourceSets.main.output.resourcesDir) {\r\n        include &#39;docs/**&#39;\r\n        include &#39;messages*.properties&#39;\r\n        into &#39;custom-folder&#39;\r\n    }\r\n}\r\n```\r\n\r\nSo, what I need is to rewrite (override) default `from` configuration of `jar`. Is it possible?","title":"Gradle: jar task - override from","body":"<p>I need to customize my <code>jar</code> task so it would:</p>\n<ul>\n<li>process all classes as usual;</li>\n<li>include only particular resources and put them into custom folder inside the jar.</li>\n</ul>\n<p>I've already made custom jar task, which does what I want:</p>\n<pre><code>task customJar(type: Jar) {\n    dependsOn classes\n    group = 'build'\n\n    // everything except resources process as usual\n    from sourceSets.main.output - sourceSets.main.output.resourcesDir\n\n    // and process resources to custom place\n    from(sourceSets.main.output.resourcesDir) {\n        include 'docs/**'\n        include 'messages*.properties'\n        into 'custom-folder'\n    }\n}\n</code></pre>\n<p>But I still need to replace built-in jar with a new one.</p>\n<p>Replacing it with <code>create</code></p>\n<pre><code>tasks.create(name: &quot;jar&quot;, type: Jar, overwrite: true) {\n    // ... custom jar spec\n}\n</code></pre>\n<p>...yields</p>\n<pre><code>Replacing an existing task that may have already been used by other plugins is not supported\n</code></pre>\n<p>and simple configuration of the <code>jar</code> task doesn't work, because it is already configured in JavaPlugin:</p>\n<pre><code>jar {\n    // jar is already configured\n    // with `from sourceSets.main.output`\n    // so it will include everything\n    // AND create a custom folder\n\n    // does nothing\n    from sourceSets.main.output - sourceSets.main.output.resourcesDir\n\n    // adds processed resources into 'custom-folder'\n    // in addition to all resources processed by default behaviour\n    from(sourceSets.main.output.resourcesDir) {\n        include 'docs/**'\n        include 'messages*.properties'\n        into 'custom-folder'\n    }\n}\n</code></pre>\n<p>So, what I need is to rewrite (override) default <code>from</code> configuration of <code>jar</code>. Is it possible?</p>\n"},{"tags":["java","jdbc","static","connection-pooling","c3p0"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1649861109,"post_id":71857725,"comment_id":126983770,"body_markdown":"A `ComboPooledDataSource` has a `close()` method (inherited through `PooledDataSource`) you can use.","body":"A <code>ComboPooledDataSource</code> has a <code>close()</code> method (inherited through <code>PooledDataSource</code>) you can use."},{"owner":{"account_id":5853673,"reputation":1,"user_id":4611621,"display_name":"Milo94"},"score":0,"creation_date":1649863497,"post_id":71857725,"comment_id":126984789,"body_markdown":"I know, thanks. I edited the question to make it clearer. The idea is to have the ComboPooledDataSource remain open as long as the MyDataSource class is loaded. I want to be able to close ComboPooledDataSource on class unload or use a similar approach.","body":"I know, thanks. I edited the question to make it clearer. The idea is to have the ComboPooledDataSource remain open as long as the MyDataSource class is loaded. I want to be able to close ComboPooledDataSource on class unload or use a similar approach."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1649921207,"post_id":71857725,"comment_id":126998263,"body_markdown":"If your class is unloaded, then `ComboPooledDataSource` becomes eligible for garbage collection, and its finalizer should then close it for you. The behaviour of finalizers is not unreliable, it is just not predictable when finalization runs, and at application exit they might not run. However,  if the application exits, it isn&#39;t really important as the program ends anyway. Personally, I think you shouldn&#39;t really worry about this, or you need to switch to something a little more reliable for lifecycle management, like Spring.","body":"If your class is unloaded, then <code>ComboPooledDataSource</code> becomes eligible for garbage collection, and its finalizer should then close it for you. The behaviour of finalizers is not unreliable, it is just not predictable when finalization runs, and at application exit they might not run. However,  if the application exits, it isn&#39;t really important as the program ends anyway. Personally, I think you shouldn&#39;t really worry about this, or you need to switch to something a little more reliable for lifecycle management, like Spring."}],"owner":{"account_id":5853673,"reputation":1,"user_id":4611621,"display_name":"Milo94"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1649863268,"creation_date":1649853903,"question_id":71857725,"body_markdown":"I have a class with a static ComboPooledDataSource field which I initialize in the static block\r\n```\r\npublic class MyDataSource {\r\n\r\n    private static ComboPooledDataSource cpds = new ComboPooledDataSource();\r\n\r\n    static {\r\n        try {\r\n            cpds.setDriverClass(&quot;org.h2.Driver&quot;);\r\n            cpds.setJdbcUrl(&quot;jdbc:h2:mem:test&quot;);\r\n            cpds.setUser(&quot;user&quot;);\r\n            cpds.setPassword(&quot;password&quot;);\r\n        } catch (PropertyVetoException e) {\r\n            // handle the exception\r\n        }\r\n    }\r\n    \r\n    public static Connection getConnection() throws SQLException {\r\n        return cpds.getConnection();\r\n    }\r\n    \r\n    private MyDataSource(){} }\r\n```\r\n\r\nWith this approach, the ComboPooledDataSource is instantiated when the MyDataSource class loaded. My understanding is that the class will not be unloaded unless its classloader is garbage collected and that will only happen when none of its loaded classes are in use.\r\n\r\nThe documentation for c3p0 states that we should cleanup the datasource when it&#39;s not needed anymore and if we fail to do so, the datasource&#39;s finalize() method will be called whose behavior isn&#39;t always reliable.\r\n\r\nhttps://www.mchange.com/projects/c3p0/#using_combopooleddatasource \r\n\r\nI wanted to close the ComboPooledDataSource when MyDataSource class is unloaded or reloaded but I think there isn&#39;t a way to achieve that. If that is correct, is there another approach I could take to manage cleanup? One idea I came across was that I could change the MyDataSource class to a singleton and then use its finalize method for cleanup. However, I don&#39;t think that is an improvement because the ComboPooledDataSource is already being called at GC time.\r\n\r\n ","title":"How to close static ComboPooledDataSource","body":"<p>I have a class with a static ComboPooledDataSource field which I initialize in the static block</p>\n<pre><code>public class MyDataSource {\n\n    private static ComboPooledDataSource cpds = new ComboPooledDataSource();\n\n    static {\n        try {\n            cpds.setDriverClass(&quot;org.h2.Driver&quot;);\n            cpds.setJdbcUrl(&quot;jdbc:h2:mem:test&quot;);\n            cpds.setUser(&quot;user&quot;);\n            cpds.setPassword(&quot;password&quot;);\n        } catch (PropertyVetoException e) {\n            // handle the exception\n        }\n    }\n    \n    public static Connection getConnection() throws SQLException {\n        return cpds.getConnection();\n    }\n    \n    private MyDataSource(){} }\n</code></pre>\n<p>With this approach, the ComboPooledDataSource is instantiated when the MyDataSource class loaded. My understanding is that the class will not be unloaded unless its classloader is garbage collected and that will only happen when none of its loaded classes are in use.</p>\n<p>The documentation for c3p0 states that we should cleanup the datasource when it's not needed anymore and if we fail to do so, the datasource's finalize() method will be called whose behavior isn't always reliable.</p>\n<p><a href=\"https://www.mchange.com/projects/c3p0/#using_combopooleddatasource\" rel=\"nofollow noreferrer\">https://www.mchange.com/projects/c3p0/#using_combopooleddatasource</a></p>\n<p>I wanted to close the ComboPooledDataSource when MyDataSource class is unloaded or reloaded but I think there isn't a way to achieve that. If that is correct, is there another approach I could take to manage cleanup? One idea I came across was that I could change the MyDataSource class to a singleton and then use its finalize method for cleanup. However, I don't think that is an improvement because the ComboPooledDataSource is already being called at GC time.</p>\n"},{"tags":["java","intellij-idea","jar"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1649862944,"post_id":71859836,"comment_id":126984565,"body_markdown":"You also need to have the library on the classpath when running your application.","body":"You also need to have the library on the classpath when running your application."},{"owner":{"account_id":14611775,"reputation":37,"user_id":10553059,"display_name":" "},"score":0,"creation_date":1649862979,"post_id":71859836,"comment_id":126984582,"body_markdown":"pls, tell me how to run app in debian machine with dependency org/json in jar file. Others classes with .class","body":"pls, tell me how to run app in debian machine with dependency org/json in jar file. Others classes with .class"},{"owner":{"account_id":14611775,"reputation":37,"user_id":10553059,"display_name":" "},"score":0,"creation_date":1649863122,"post_id":71859836,"comment_id":126984627,"body_markdown":"@markRotteveel, i tried use java -cp &lt;jar name&gt; com.company.Main . Its not help","body":"@markRotteveel, i tried use java -cp &lt;jar name&gt; com.company.Main . Its not help"},{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1649864886,"post_id":71859836,"comment_id":126985408,"body_markdown":"See https://www.jetbrains.com/help/idea/debugging-your-first-java-application.html. You need to create the artifact jar with all the dependencies included in it (with the class files from the jars as well). See also https://www.jetbrains.com/help/idea/artifacts.html.","body":"See <a href=\"https://www.jetbrains.com/help/idea/debugging-your-first-java-application.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>. You need to create the artifact jar with all the dependencies included in it (with the class files from the jars as well). See also <a href=\"https://www.jetbrains.com/help/idea/artifacts.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/artifacts.html</a>."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1649920732,"post_id":71859836,"comment_id":126998109,"body_markdown":"You need to use `java -cp &lt;your-jar-name&gt;;&lt;other-jar-name&gt; com.company.Main`, or if it is an executable jar, `java -jar &lt;your-jar-name&gt;` and make sure that the other libraries are listed in the the `Class-Path` manifest entry, and that those libraries are in the right relative location.","body":"You need to use <code>java -cp &lt;your-jar-name&gt;;&lt;other-jar-name&gt; com.company.Main</code>, or if it is an executable jar, <code>java -jar &lt;your-jar-name&gt;</code> and make sure that the other libraries are listed in the the <code>Class-Path</code> manifest entry, and that those libraries are in the right relative location."}],"owner":{"account_id":14611775,"reputation":37,"user_id":10553059,"display_name":" "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1649862921,"answer_count":0,"score":0,"last_activity_date":1649862899,"creation_date":1649862743,"question_id":71859836,"body_markdown":"In project I used library org.json. Everything works fine in the editor. When I build the project, move the &quot;out&quot; folder to another machine (Debian), and run Main.class via console, I get this error:\r\n```none\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/json/JSONObject\r\n        at gro.nn.lead_updater.Config.&lt;init&gt;(Config.java:30)\r\n        at gro.nn.lead_updater.Config.getInstance(Config.java:23)\r\n        at gro.nn.lead_updater.Main.main(Main.java:23)\r\n```\r\nI don&#39;t see any changes before and after adding the library in the out folder.\r\nProject structure below\r\n\r\n[![Here project dependencies][1]][1]\r\n\r\n[![Project structure][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/u7X4y.png\r\n  [2]: https://i.stack.imgur.com/8YBQT.png","title":"Library not compile with project in IntelliJ IDEA","body":"<p>In project I used library org.json. Everything works fine in the editor. When I build the project, move the &quot;out&quot; folder to another machine (Debian), and run Main.class via console, I get this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/json/JSONObject\n        at gro.nn.lead_updater.Config.&lt;init&gt;(Config.java:30)\n        at gro.nn.lead_updater.Config.getInstance(Config.java:23)\n        at gro.nn.lead_updater.Main.main(Main.java:23)\n</code></pre>\n<p>I don't see any changes before and after adding the library in the out folder.\nProject structure below</p>\n<p><a href=\"https://i.stack.imgur.com/u7X4y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u7X4y.png\" alt=\"Here project dependencies\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/8YBQT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8YBQT.png\" alt=\"Project structure\" /></a></p>\n"},{"tags":["java","ajax","spring-restcontroller","fileinputstream"],"answers":[{"tags":[],"owner":{"account_id":4806468,"reputation":3469,"user_id":3881354,"accept_rate":75,"display_name":"Elyas Hadizadeh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649862859,"creation_date":1649843304,"answer_id":71855377,"question_id":71854753,"body_markdown":"I assume that you are using `Springboot` and your application supports `multipart/form-data`. After version **3.0** the Servlet API natively support it.\r\n\r\n    @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)\r\n    public void fileUpload(@RequestParam(&quot;file&quot;) MultipartFile file) throws IOException \r\n    {\r\n        if (!file.isEmpty()) \r\n       {\r\n            byte[] bytes = file.getBytes();\r\n            // and so on\r\n        }\r\n    }\r\n\r\n\r\nJQuery&#39;s Ajax:\r\n\r\n    function saveFileUpload() {\r\n        let data = new FormData()\r\n        data.append(&quot;file&quot;, document.getElementById(fileName).files[0])\r\n    \r\n        $.ajax({\r\n            type: &#39;POST&#39;,\r\n            data: data,\r\n            url: pageContext + &quot;/upload&quot;,\r\n            processData: false,\r\n            contentType: false,\r\n            success: function(data) {},\r\n            error: function(e) {}\r\n        });\r\n    }","title":"Jsp File upload returns empty Input Stream for file upload","body":"<p>I assume that you are using <code>Springboot</code> and your application supports <code>multipart/form-data</code>. After version <strong>3.0</strong> the Servlet API natively support it.</p>\n<pre><code>@RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)\npublic void fileUpload(@RequestParam(&quot;file&quot;) MultipartFile file) throws IOException \n{\n    if (!file.isEmpty()) \n   {\n        byte[] bytes = file.getBytes();\n        // and so on\n    }\n}\n</code></pre>\n<p>JQuery's Ajax:</p>\n<pre><code>function saveFileUpload() {\n    let data = new FormData()\n    data.append(&quot;file&quot;, document.getElementById(fileName).files[0])\n\n    $.ajax({\n        type: 'POST',\n        data: data,\n        url: pageContext + &quot;/upload&quot;,\n        processData: false,\n        contentType: false,\n        success: function(data) {},\n        error: function(e) {}\n    });\n}\n</code></pre>\n"}],"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":585,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1649862859,"creation_date":1649840592,"question_id":71854753,"body_markdown":"I am working on a jsp file upload using ajax call and I am able to hit the java controller in the HttpServletRequest I see the multipart file received but when I do `request.getInputStream.readAllBytes()`, I get an empty byte array\r\n\r\nThe ajax call in javascript\r\n\r\n    function saveFileUpload() {\r\n        var data = new FormData()\r\n        data.append(&quot;file&quot;, document.getElementById(fileName).files[0])\r\n    \r\n        $.ajax({\r\n            type: &#39;POST&#39;,\r\n            data: data,\r\n            url: pageContext + &quot;/upload&quot;,\r\n            processData: false,\r\n            contentType: false,\r\n            success: function(data) {},\r\n            error: function(e) {}\r\n        });\r\n    \r\n      }\r\n    }\r\n\r\nIn Java controller\r\n\r\n        @RequestMapping(value = {&quot;/upload&quot;}, method = RequestMethod.POST)\r\n        public void fileUpload (\r\n                HttpServletRequest request, HttpServletResponse response){\r\n            byte[] arr = request.getInputStream().readAllBytes();\r\n            System.out.println(arr.length);\r\n        }\r\n\r\nThe above code prints `arr.length` as 0. Can someone tell me the reason for this issue?","title":"Jsp File upload returns empty Input Stream for file upload","body":"<p>I am working on a jsp file upload using ajax call and I am able to hit the java controller in the HttpServletRequest I see the multipart file received but when I do <code>request.getInputStream.readAllBytes()</code>, I get an empty byte array</p>\n<p>The ajax call in javascript</p>\n<pre><code>function saveFileUpload() {\n    var data = new FormData()\n    data.append(&quot;file&quot;, document.getElementById(fileName).files[0])\n\n    $.ajax({\n        type: 'POST',\n        data: data,\n        url: pageContext + &quot;/upload&quot;,\n        processData: false,\n        contentType: false,\n        success: function(data) {},\n        error: function(e) {}\n    });\n\n  }\n}\n</code></pre>\n<p>In Java controller</p>\n<pre><code>    @RequestMapping(value = {&quot;/upload&quot;}, method = RequestMethod.POST)\n    public void fileUpload (\n            HttpServletRequest request, HttpServletResponse response){\n        byte[] arr = request.getInputStream().readAllBytes();\n        System.out.println(arr.length);\n    }\n</code></pre>\n<p>The above code prints <code>arr.length</code> as 0. Can someone tell me the reason for this issue?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8560,"page":1432,"page_size":100}
