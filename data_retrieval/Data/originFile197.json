{"items":[{"tags":["java","postgresql","jpa","spring-data-jpa","jsonb"],"comments":[{"owner":{"account_id":1339752,"reputation":249,"user_id":1281686,"display_name":"newbie"},"score":1,"creation_date":1694153087,"post_id":77064226,"comment_id":135856352,"body_markdown":"Why don&#39;t you just update the column have null values with jsonb_strip_nulls() function? Maybe you can create an SP and after all inserts, you can call this SP to strip null values from data.","body":"Why don&#39;t you just update the column have null values with jsonb_strip_nulls() function? Maybe you can create an SP and after all inserts, you can call this SP to strip null values from data."},{"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1694154995,"post_id":77064226,"comment_id":135856630,"body_markdown":"How to avoid this while storing the data inside database on the above converter","body":"How to avoid this while storing the data inside database on the above converter"},{"owner":{"account_id":1062483,"reputation":20163,"user_id":1104979,"display_name":"Nick Barnes"},"score":2,"creation_date":1694161692,"post_id":77064226,"comment_id":135857802,"body_markdown":"I assume this is a Jackson `ObjectMapper`? It should omit null fields if you set `objectMapper.setSerializationInclusion(Include.NON_NULL)`.","body":"I assume this is a Jackson <code>ObjectMapper</code>? It should omit null fields if you set <code>objectMapper.setSerializationInclusion(Include.NON_NULL)</code>."}],"answers":[{"comments":[{"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1694174518,"post_id":77066522,"comment_id":135860223,"body_markdown":"will give it a try and update","body":"will give it a try and update"}],"tags":[],"owner":{"account_id":28999910,"reputation":1011,"user_id":22213656,"display_name":"Maimoona Abid"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694172729,"creation_date":1694172729,"answer_id":77066522,"question_id":77064226,"body_markdown":"You may change your JsonbConverter to filter out null values from the MapString, Object&gt; before converting it to JSON in order to prevent storing fields with null values in a JSONB data type in PostgreSQL. Here is an updated converter that performs what you want. \r\nin this code the convertToDatabaseColumn method only includes non-null values in the output JSON and filters out null values from the input details map.\r\nThe JSON is changed back into a MapString, Object&gt; using the convertToEntityAttribute function.\r\n\r\nHere is the revised code:\r\n\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.node.ObjectNode;\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n    import java.io.IOException;\r\n    import java.util.Map;\r\n    \r\n    @Converter\r\n    public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\r\n    \r\n        private final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\r\n            try {\r\n                if (details == null || details.isEmpty()) {\r\n                    return null;\r\n                }\r\n    \r\n                // Create an ObjectNode to hold non-null values\r\n                ObjectNode node = objectMapper.createObjectNode();\r\n                for (Map.Entry&lt;String, Object&gt; entry : details.entrySet()) {\r\n                    if (entry.getValue() != null) {\r\n                        JsonNode valueNode = objectMapper.valueToTree(entry.getValue());\r\n                        node.set(entry.getKey(), valueNode);\r\n                    }\r\n                }\r\n    \r\n                return objectMapper.writeValueAsString(node);\r\n            } catch (IOException jpe) {\r\n                log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\r\n                return null;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\r\n            try {\r\n                if (dbData == null) {\r\n                    return null;\r\n                }\r\n    \r\n                JsonNode node = objectMapper.readTree(dbData);\r\n    \r\n                // Convert the JSON to a Map&lt;String, Object&gt;\r\n                Map&lt;String, Object&gt; value = objectMapper.convertValue(node, Map.class);\r\n    \r\n                return value;\r\n            } catch (IOException ioe) {\r\n                log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nHope it works :)\r\n","title":"How to avoid storing fields with null in JSONB data type","body":"<p>You may change your JsonbConverter to filter out null values from the MapString, Object&gt; before converting it to JSON in order to prevent storing fields with null values in a JSONB data type in PostgreSQL. Here is an updated converter that performs what you want.\nin this code the convertToDatabaseColumn method only includes non-null values in the output JSON and filters out null values from the input details map.\nThe JSON is changed back into a MapString, Object&gt; using the convertToEntityAttribute function.</p>\n<p>Here is the revised code:</p>\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\nimport java.io.IOException;\nimport java.util.Map;\n\n@Converter\npublic class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\n        try {\n            if (details == null || details.isEmpty()) {\n                return null;\n            }\n\n            // Create an ObjectNode to hold non-null values\n            ObjectNode node = objectMapper.createObjectNode();\n            for (Map.Entry&lt;String, Object&gt; entry : details.entrySet()) {\n                if (entry.getValue() != null) {\n                    JsonNode valueNode = objectMapper.valueToTree(entry.getValue());\n                    node.set(entry.getKey(), valueNode);\n                }\n            }\n\n            return objectMapper.writeValueAsString(node);\n        } catch (IOException jpe) {\n            log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\n            return null;\n        }\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\n        try {\n            if (dbData == null) {\n                return null;\n            }\n\n            JsonNode node = objectMapper.readTree(dbData);\n\n            // Convert the JSON to a Map&lt;String, Object&gt;\n            Map&lt;String, Object&gt; value = objectMapper.convertValue(node, Map.class);\n\n            return value;\n        } catch (IOException ioe) {\n            log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\n            return null;\n        }\n    }\n}\n</code></pre>\n<p>Hope it works :)</p>\n"}],"owner":{"account_id":143734,"reputation":791,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1694172729,"creation_date":1694148928,"question_id":77064226,"body_markdown":"How to avoid storing fields with null value while storing into postgres JSONB data type\r\n\r\nThis is the existing code for conversion, how to make it extensible but retain the structure as well\r\n\r\n    public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\r\n    \r\n        private final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\r\n            String value = null;\r\n    \r\n            try {\r\n                if (details == null || details.isEmpty()) {\r\n                    return value;\r\n                }\r\n    \r\n                value = objectMapper.writeValueAsString(details);\r\n            }\r\n            catch (JsonProcessingException jpe) {\r\n                log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\r\n            Map&lt;String, Object&gt; value = null;\r\n    \r\n            try {\r\n                if (dbData == null) {\r\n                    return value;\r\n                }\r\n    \r\n                value = objectMapper.readValue(dbData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n                });\r\n            }\r\n            catch (IOException ioe) {\r\n                log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n    }\r\n\r\nThe stored value is:\r\n\r\n    {&quot;categories&quot;: [{&quot;name&quot;: &quot;News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;UK News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Crime&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Dogs&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Parenting advice&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Pets&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Police&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}]}\r\n","title":"How to avoid storing fields with null in JSONB data type","body":"<p>How to avoid storing fields with null value while storing into postgres JSONB data type</p>\n<p>This is the existing code for conversion, how to make it extensible but retain the structure as well</p>\n<pre><code>public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\n        String value = null;\n\n        try {\n            if (details == null || details.isEmpty()) {\n                return value;\n            }\n\n            value = objectMapper.writeValueAsString(details);\n        }\n        catch (JsonProcessingException jpe) {\n            log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\n        }\n\n        return value;\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\n        Map&lt;String, Object&gt; value = null;\n\n        try {\n            if (dbData == null) {\n                return value;\n            }\n\n            value = objectMapper.readValue(dbData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n            });\n        }\n        catch (IOException ioe) {\n            log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\n        }\n\n        return value;\n    }\n\n}\n</code></pre>\n<p>The stored value is:</p>\n<pre><code>{&quot;categories&quot;: [{&quot;name&quot;: &quot;News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;UK News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Crime&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Dogs&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Parenting advice&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Pets&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Police&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}]}\n</code></pre>\n"},{"tags":["java","jvm","garbage-collection"],"answers":[{"tags":[],"owner":{"account_id":10465568,"reputation":840,"user_id":7715095,"display_name":"xyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694074469,"creation_date":1694073267,"answer_id":77057638,"question_id":77021695,"body_markdown":"Probably you need to add this flag as well:\r\n\r\n    -XX:+UseContainerSupport\r\n\r\nFrom docs you will see that this will work only with Linux x64 platforms:\r\n\r\n&gt; -XX:-UseContainerSupport\r\nThe VM now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers. It uses this information to allocate system resources. This support is only available on Linux x64 platforms. If supported, the default for this flag is true, and container support is enabled by default. It can be disabled with -XX:-UseContainerSupport.\r\n \r\n\r\nThis flag can help also:\r\n\r\n    -XX:+AlwaysPreTouch\r\n\r\n&gt; -XX:+AlwaysPreTouch\r\nRequests the VM to touch every page on the Java heap after requesting it from the operating system and before handing memory out to the application. By default, this option is disabled and all pages are committed as the application uses the heap space.","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>Probably you need to add this flag as well:</p>\n<pre><code>-XX:+UseContainerSupport\n</code></pre>\n<p>From docs you will see that this will work only with Linux x64 platforms:</p>\n<blockquote>\n<p>-XX:-UseContainerSupport\nThe VM now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers. It uses this information to allocate system resources. This support is only available on Linux x64 platforms. If supported, the default for this flag is true, and container support is enabled by default. It can be disabled with -XX:-UseContainerSupport.</p>\n</blockquote>\n<p>This flag can help also:</p>\n<pre><code>-XX:+AlwaysPreTouch\n</code></pre>\n<blockquote>\n<p>-XX:+AlwaysPreTouch\nRequests the VM to touch every page on the Java heap after requesting it from the operating system and before handing memory out to the application. By default, this option is disabled and all pages are committed as the application uses the heap space.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":224290,"reputation":620,"user_id":484009,"display_name":"Popandopolos"},"score":0,"creation_date":1694164861,"post_id":77063467,"comment_id":135858417,"body_markdown":"Thanks for your answer, `MaxHeapFreeRatio=100` works pretty well in my case.\n`Xms` shortcut&#39;s explanation is also very useful.","body":"Thanks for your answer, <code>MaxHeapFreeRatio=100</code> works pretty well in my case. <code>Xms</code> shortcut&#39;s explanation is also very useful."}],"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1694132524,"creation_date":1694131970,"answer_id":77063467,"question_id":77021695,"body_markdown":"A common misconception is that the initial heap size is the minimum heap size. They are actually different and can be configured separately: `-XX:InitialHeapSize` vs. `-XX:MinHeapSize`.\r\n\r\nIn JDK 17, `-Xms` is a shortcut to set both `InitialHeapSize` and `MinHeapSize` to the same value. In contrast, `-XX:InitialRAMPercentage` affects `InitialHeapSize` only, and therefore heap may shrink below the initial size.\r\n\r\nIf you want to prevent heap from resizing at runtime, disable heap shrinking with `-XX:MaxHeapFreeRatio=100`, or disable adaptive size policy altogether: `-XX:-UseAdaptiveSizePolicy`.\r\n\r\nNote: `-XX:MinRAMPercentage` does not help. Its name is confusing: the argument configures `MaxHeapSize`, not `MinHeapSize` - see [JDK-8278492](https://bugs.openjdk.org/browse/JDK-8278492)","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>A common misconception is that the initial heap size is the minimum heap size. They are actually different and can be configured separately: <code>-XX:InitialHeapSize</code> vs. <code>-XX:MinHeapSize</code>.</p>\n<p>In JDK 17, <code>-Xms</code> is a shortcut to set both <code>InitialHeapSize</code> and <code>MinHeapSize</code> to the same value. In contrast, <code>-XX:InitialRAMPercentage</code> affects <code>InitialHeapSize</code> only, and therefore heap may shrink below the initial size.</p>\n<p>If you want to prevent heap from resizing at runtime, disable heap shrinking with <code>-XX:MaxHeapFreeRatio=100</code>, or disable adaptive size policy altogether: <code>-XX:-UseAdaptiveSizePolicy</code>.</p>\n<p>Note: <code>-XX:MinRAMPercentage</code> does not help. Its name is confusing: the argument configures <code>MaxHeapSize</code>, not <code>MinHeapSize</code> - see <a href=\"https://bugs.openjdk.org/browse/JDK-8278492\" rel=\"noreferrer\">JDK-8278492</a></p>\n"},{"comments":[{"owner":{"account_id":224290,"reputation":620,"user_id":484009,"display_name":"Popandopolos"},"score":0,"creation_date":1694183462,"post_id":77066519,"comment_id":135862117,"body_markdown":"I can suggest to check @apangin answer.  `-XX:MaxHeapFreeRatio=100` works for me","body":"I can suggest to check @apangin answer.  <code>-XX:MaxHeapFreeRatio=100</code> works for me"},{"owner":{"account_id":22153048,"reputation":1,"user_id":22522004,"display_name":"Cyrille MAUCCI"},"score":0,"creation_date":1694377101,"post_id":77066519,"comment_id":135879681,"body_markdown":"Works for us too!","body":"Works for us too!"}],"tags":[],"owner":{"account_id":22153048,"reputation":1,"user_id":22522004,"display_name":"Cyrille MAUCCI"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694172699,"creation_date":1694172699,"answer_id":77066519,"question_id":77021695,"body_markdown":"we are seeing the same issue as Popandopolos here.\r\nMore precisely we are seeing a behavior change between Java11 and Java17.\r\n\r\nIndeed, we&#39;ve recently migrated our containers apps from Java11 to Java17 (our runtime container env is RedHat OpenShift 4.12).\r\n\r\nWe&#39;ve always been using the following options:\r\n&quot;-XX:InitialRAMPercentage=60 -XX:MaxRAMPercentage=60 -XX:+AlwaysPreTouch&quot;\r\nin order to guarantee the Heap would never be resized and therefore would never impact the runtime performance of our latency critical application.\r\n\r\nWith those settings, using Java11, we have always witnessed committed heap being set to 60% of the container memory limit for the whole lifetime of the container.\r\n\r\nAfter moving to Java17, it is like if InitialRAMPercentage was no more honored.\r\nCommitted heap starts very low and moves during the lifetime of the container.\r\nIf we -Xms/-Xmx instead of -XX:InitialRAMPercentage/-XX:MaxRAMPercentage, Java17 behaves exactly as Java11 would with -XX:InitialRAMPercentage/-XX:MaxRAMPercentage.\r\n\r\nSo, the behavior definitely changed between Java11 and Java17...\r\nand currently getting back to -Xms/-Xmx seems the only way to unblock our testing.\r\n\r\nHTH\r\n++Cyrille","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>we are seeing the same issue as Popandopolos here.\nMore precisely we are seeing a behavior change between Java11 and Java17.</p>\n<p>Indeed, we've recently migrated our containers apps from Java11 to Java17 (our runtime container env is RedHat OpenShift 4.12).</p>\n<p>We've always been using the following options:\n&quot;-XX:InitialRAMPercentage=60 -XX:MaxRAMPercentage=60 -XX:+AlwaysPreTouch&quot;\nin order to guarantee the Heap would never be resized and therefore would never impact the runtime performance of our latency critical application.</p>\n<p>With those settings, using Java11, we have always witnessed committed heap being set to 60% of the container memory limit for the whole lifetime of the container.</p>\n<p>After moving to Java17, it is like if InitialRAMPercentage was no more honored.\nCommitted heap starts very low and moves during the lifetime of the container.\nIf we -Xms/-Xmx instead of -XX:InitialRAMPercentage/-XX:MaxRAMPercentage, Java17 behaves exactly as Java11 would with -XX:InitialRAMPercentage/-XX:MaxRAMPercentage.</p>\n<p>So, the behavior definitely changed between Java11 and Java17...\nand currently getting back to -Xms/-Xmx seems the only way to unblock our testing.</p>\n<p>HTH\n++Cyrille</p>\n"}],"owner":{"account_id":224290,"reputation":620,"user_id":484009,"display_name":"Popandopolos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77063467,"answer_count":3,"score":4,"last_activity_date":1694172699,"creation_date":1693557900,"question_id":77021695,"body_markdown":"We are running our Java application with OpenJDK 17.0.7 in a Docker container with these arguments (these are only relevant to my question):&lt;br&gt;\r\n`-XX:InitialRAMPercentage=75.0 -XX:MaxRAMPercentage=75.0 -XX:MaxMetaspaceSize=1G -XX:+UseG1GC`\r\n\r\nHere is a picture from JDK Mission Control showing how the application starts:\r\n\r\n[![Run an application with InitialRAMPercentage][1]][1]\r\n\r\n\r\nYou can see that Committed size was not the same all the time. It started at 3GiB and then it grew up to ~6GiB.\r\n\r\nThen I changed VM Arguments to use Xms/Xmx instead of RAMPercentage:&lt;br&gt;\r\n`-Xms6G -Xmx6G -XX:MaxMetaspaceSize=1G -XX:+UseG1GC`\r\n\r\nAnd now I see the picture I expected to see - Committed size is equals to 6GiB from the startup:\r\n[![Run an application with Xms/XMx][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i0TBX.png\r\n  [2]: https://i.stack.imgur.com/iLiNx.png\r\n\r\nIs it an expected behavior of InitialRAMPercentage? Shouldn&#39;t it work the same way as Xms? Am I missing something?","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>We are running our Java application with OpenJDK 17.0.7 in a Docker container with these arguments (these are only relevant to my question):<br>\n<code>-XX:InitialRAMPercentage=75.0 -XX:MaxRAMPercentage=75.0 -XX:MaxMetaspaceSize=1G -XX:+UseG1GC</code></p>\n<p>Here is a picture from JDK Mission Control showing how the application starts:</p>\n<p><a href=\"https://i.stack.imgur.com/i0TBX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i0TBX.png\" alt=\"Run an application with InitialRAMPercentage\" /></a></p>\n<p>You can see that Committed size was not the same all the time. It started at 3GiB and then it grew up to ~6GiB.</p>\n<p>Then I changed VM Arguments to use Xms/Xmx instead of RAMPercentage:<br>\n<code>-Xms6G -Xmx6G -XX:MaxMetaspaceSize=1G -XX:+UseG1GC</code></p>\n<p>And now I see the picture I expected to see - Committed size is equals to 6GiB from the startup:\n<a href=\"https://i.stack.imgur.com/iLiNx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iLiNx.png\" alt=\"Run an application with Xms/XMx\" /></a></p>\n<p>Is it an expected behavior of InitialRAMPercentage? Shouldn't it work the same way as Xms? Am I missing something?</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"owner":{"account_id":20374233,"reputation":33,"user_id":14945795,"display_name":"Peter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694172622,"creation_date":1694172100,"question_id":77066457,"body_markdown":"In my application, I have an HQL query that uses the `IN` operator - this query is called very often, with different number of parameters which means that Hibernate&#39;s `QueryPlanCache` caches every single variation of it separately - with 1,2,3...10...1200 elements, etc.\r\n\r\nMy questions are:\r\n \r\n\r\n - Is there a way to exclude only the HQL query that contains the `IN`\r\n   operator from being cached in the query plan cache - perhaps an annotation?\r\n - Is there a way to programatically reset this cache? I saw that the `QueryPlanCache` class has a `clear()` method which is `public` but I couldn&#39;t figure out how you would go about calling it in a Spring Boot application.\r\n- Is there some kind of filtering mechanism or class that I could implement and use? An interceptor that fires before the methods for the `QueryPlanCache` so I can filter out the problematic query in it? \r\n\r\nThank you in advance!\r\n\r\n","title":"Spring Boot 2 + Hibernate 5 - how can I reset QueryPlanCache?","body":"<p>In my application, I have an HQL query that uses the <code>IN</code> operator - this query is called very often, with different number of parameters which means that Hibernate's <code>QueryPlanCache</code> caches every single variation of it separately - with 1,2,3...10...1200 elements, etc.</p>\n<p>My questions are:</p>\n<ul>\n<li>Is there a way to exclude only the HQL query that contains the <code>IN</code>\noperator from being cached in the query plan cache - perhaps an annotation?</li>\n<li>Is there a way to programatically reset this cache? I saw that the <code>QueryPlanCache</code> class has a <code>clear()</code> method which is <code>public</code> but I couldn't figure out how you would go about calling it in a Spring Boot application.</li>\n<li>Is there some kind of filtering mechanism or class that I could implement and use? An interceptor that fires before the methods for the <code>QueryPlanCache</code> so I can filter out the problematic query in it?</li>\n</ul>\n<p>Thank you in advance!</p>\n"},{"tags":["java","maven","pom.xml","sts"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeƒçek"},"score":0,"creation_date":1642167591,"post_id":70711392,"comment_id":125005327,"body_markdown":"Looks like https://stackoverflow.com/questions/60911620/spring-boot-maven-project-import-error-in-sts. Martin Lippert, the developer of STS, says _&quot;Please file an issue at github.com/spring-projects/sts4/issues and attach the screenshot. Please also take a look at the Error Log View and add the details from there to the report, since the exact stack trace of the error would be quite useful.&quot;_","body":"Looks like <a href=\"https://stackoverflow.com/questions/60911620/spring-boot-maven-project-import-error-in-sts\" title=\"spring boot maven project import error in sts\">stackoverflow.com/questions/60911620/&hellip;</a>. Martin Lippert, the developer of STS, says <i>&quot;Please file an issue at github.com/spring-projects/sts4/issues and attach the screenshot. Please also take a look at the Error Log View and add the details from there to the report, since the exact stack trace of the error would be quite useful.&quot;</i>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1642968899,"post_id":70711392,"comment_id":125209422,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":17296120,"reputation":1,"user_id":12526754,"display_name":"rahul jawale"},"score":0,"creation_date":1643726996,"post_id":70711392,"comment_id":125412868,"body_markdown":"i switched to STS version 4.7.0 and the maven issue got resolved. Not sure what&#39;s wrong with version 4.8.0","body":"i switched to STS version 4.7.0 and the maven issue got resolved. Not sure what&#39;s wrong with version 4.8.0"}],"answers":[{"tags":[],"owner":{"account_id":29393073,"reputation":1,"user_id":22520984,"display_name":"Nani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694172613,"creation_date":1694154910,"answer_id":77064647,"question_id":70711392,"body_markdown":"I resolved this issue by this way:-\r\n\r\n1. close your IDE.\r\n2. start your IDE through by Run as Administrator.\r\n3. update your project-&gt;maven update","title":"An internal error occurred during &quot;updating maven project&quot; in STS(4.8.0)","body":"<p>I resolved this issue by this way:-</p>\n<ol>\n<li>close your IDE.</li>\n<li>start your IDE through by Run as Administrator.</li>\n<li>update your project-&gt;maven update</li>\n</ol>\n"}],"owner":{"account_id":17296120,"reputation":1,"user_id":12526754,"display_name":"rahul jawale"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":853,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694172613,"creation_date":1642167351,"question_id":70711392,"body_markdown":"I have cloned a repo from bitbucket to my local machine and when it tries to build i am getting the above error. Rather i am getting errors on every maven related stuff (build , update ,clean) and I am not sure what&#39;s wrong . I am not even able to open pom.xml file in STS. \r\nDetailed error -&gt;\r\nAn internal error occurred during &quot;updating maven project&quot; \r\norg/springframework/tooling/boot/ls/xml/xmlrootelementcontentdescriber2$qualifiedelement ","title":"An internal error occurred during &quot;updating maven project&quot; in STS(4.8.0)","body":"<p>I have cloned a repo from bitbucket to my local machine and when it tries to build i am getting the above error. Rather i am getting errors on every maven related stuff (build , update ,clean) and I am not sure what's wrong . I am not even able to open pom.xml file in STS.\nDetailed error -&gt;\nAn internal error occurred during &quot;updating maven project&quot;\norg/springframework/tooling/boot/ls/xml/xmlrootelementcontentdescriber2$qualifiedelement</p>\n"},{"tags":["java","mysql","testing","jdbc","containers"],"comments":[{"owner":{"account_id":18999437,"reputation":2461,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1694209611,"post_id":77066498,"comment_id":135866289,"body_markdown":"Welcome to StackOverflow! Thank you for your question. However it seems like you are not familiar with the guide of Stackoverflow to [How To: Ask a good question](https://stackoverflow.com/help/how-to-ask). Please read it and adjust your question accordingly by using the Edit option.","body":"Welcome to StackOverflow! Thank you for your question. However it seems like you are not familiar with the guide of Stackoverflow to <a href=\"https://stackoverflow.com/help/how-to-ask\">How To: Ask a good question</a>. Please read it and adjust your question accordingly by using the Edit option."}],"owner":{"account_id":29394840,"reputation":1,"user_id":22522424,"display_name":"HomeLighter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694172554,"creation_date":1694172554,"question_id":77066498,"body_markdown":"I am currently testing my application using the JDBC test containers. I am having issues with timezones and setting certain query parameters with my test containers that I can with my normal mysql container.\r\n\r\nHere is an example of my spring.datasource.url that I am using for my test container - jdbc:tc:mysql:5.7://database/myDb?useLegacyDatetimeCode=false&amp;serverTimezone=Australia/Melbourne \r\n\r\nHowevervdebugging through the code, it semes like the query parameters does get parsed but it doesn&#39;t get used at all by the test container. Is there anyway I can set these variables with my test containers?\r\n\r\nI tried passing in a container parameter in the form of a my_sql.conf file which sets trys to set the useLegacyDatetimeCode but that didn&#39;t work as I believe it doesn&#39;t recognize the value","title":"Is there a way to pass in query parameters to mysql test containers","body":"<p>I am currently testing my application using the JDBC test containers. I am having issues with timezones and setting certain query parameters with my test containers that I can with my normal mysql container.</p>\n<p>Here is an example of my spring.datasource.url that I am using for my test container - jdbc:tc:mysql:5.7://database/myDb?useLegacyDatetimeCode=false&amp;serverTimezone=Australia/Melbourne</p>\n<p>Howevervdebugging through the code, it semes like the query parameters does get parsed but it doesn't get used at all by the test container. Is there anyway I can set these variables with my test containers?</p>\n<p>I tried passing in a container parameter in the form of a my_sql.conf file which sets trys to set the useLegacyDatetimeCode but that didn't work as I believe it doesn't recognize the value</p>\n"},{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1694164539,"post_id":77065330,"comment_id":135858341,"body_markdown":"Flux result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean(); changeto Mono.fromFuture(..remoteClient.getInfo(a.getSomeProperty()) in a thread....).flatMapMany(Flux::just)","body":"Flux result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean&zwnj;&#8203;(); changeto Mono.fromFuture(..remoteClient.getInfo(a.getSomeProperty()) in a thread....).flatMapMany(Flux::just)"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1694171770,"post_id":77065330,"comment_id":135859704,"body_markdown":"@zt9788 That requires extra threads while `remoteClient.getInfo` is already reactive as I see","body":"@zt9788 That requires extra threads while <code>remoteClient.getInfo</code> is already reactive as I see"},{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1694189080,"post_id":77065330,"comment_id":135863199,"body_markdown":"Sorry What I said is wrong, please see others&#39; answers","body":"Sorry What I said is wrong, please see others&#39; answers"}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694172097,"creation_date":1694172097,"answer_id":77066454,"question_id":77065330,"body_markdown":"You have `filterWhen` for that purpose:\r\n\r\n        repository.findByString(String string) // Flux&lt;SomeObject&gt;\r\n                .filterWhen(a -&gt; remoteClient.getInfo(a.getSomeProperty()).map(s -&gt; s.getBoolean()))\r\n                .map(a -&gt; {\r\n                    //Some logic\r\n                })","title":"Implement filter using project reactor","body":"<p>You have <code>filterWhen</code> for that purpose:</p>\n<pre><code>    repository.findByString(String string) // Flux&lt;SomeObject&gt;\n            .filterWhen(a -&gt; remoteClient.getInfo(a.getSomeProperty()).map(s -&gt; s.getBoolean()))\n            .map(a -&gt; {\n                //Some logic\n            })\n</code></pre>\n"}],"owner":{"account_id":12119561,"reputation":511,"user_id":8851717,"accept_rate":40,"display_name":"Fairy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77066454,"answer_count":1,"score":0,"last_activity_date":1694172097,"creation_date":1694161778,"question_id":77065330,"body_markdown":"I have a list of items from Mongo and I need to filter them by remote call result, something like this:\r\n```java\r\nrepository.findByString(String string) // Flux&lt;SomeObject&gt;\r\n    .filter(a -&gt; {\r\n        Boolean result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean();\r\n        return result;\r\n    }).map(a -&gt; {\r\n        //Some logic\r\n    })\r\n```\r\nI don&#39;t know how to do it in a non-blocking way.\r\nPlease help","title":"Implement filter using project reactor","body":"<p>I have a list of items from Mongo and I need to filter them by remote call result, something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>repository.findByString(String string) // Flux&lt;SomeObject&gt;\n    .filter(a -&gt; {\n        Boolean result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean();\n        return result;\n    }).map(a -&gt; {\n        //Some logic\n    })\n</code></pre>\n<p>I don't know how to do it in a non-blocking way.\nPlease help</p>\n"},{"tags":["java","amazon-web-services","spring-security","thymeleaf","amazon-ecs"],"answers":[{"comments":[{"owner":{"account_id":10472614,"reputation":241,"user_id":7720057,"display_name":"Nitin Bisht"},"score":0,"creation_date":1694175712,"post_id":77065004,"comment_id":135860467,"body_markdown":"Perfect. It worked and that documentation described it perfectly. Thanks a lot.","body":"Perfect. It worked and that documentation described it perfectly. Thanks a lot."}],"tags":[],"owner":{"account_id":1897626,"reputation":570,"user_id":1714215,"display_name":"Jens M&#248;ller"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694158825,"creation_date":1694158825,"answer_id":77065004,"question_id":77064932,"body_markdown":"Sounds like you are running with https offloading (meaning, that your spring boot application does not receive the https request but rather an http request, the load balancer terminates the tls connection).\r\n\r\nI think your problem is described in the [spring boot documentation][1]. \r\nIn most cases the solution is to set `server.forward-headers-strategy=NATIVE` in your application.yaml.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.webserver.use-behind-a-proxy-server","title":"The &quot;redirect&quot; routing of thymeleaf is redirecting the application to http and not to https when deployed in AWS ECS","body":"<p>Sounds like you are running with https offloading (meaning, that your spring boot application does not receive the https request but rather an http request, the load balancer terminates the tls connection).</p>\n<p>I think your problem is described in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.webserver.use-behind-a-proxy-server\" rel=\"nofollow noreferrer\">spring boot documentation</a>.\nIn most cases the solution is to set <code>server.forward-headers-strategy=NATIVE</code> in your application.yaml.</p>\n"}],"owner":{"account_id":10472614,"reputation":241,"user_id":7720057,"display_name":"Nitin Bisht"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77065004,"answer_count":1,"score":0,"last_activity_date":1694172075,"creation_date":1694158132,"question_id":77064932,"body_markdown":"I am building a Spring Boot application which consists of Spring Security and Thymeleaf. I have deployed this application in Elastic Container Service (ECS) cluster of AWS.\r\n\r\nI have my simple controller code for the homepage which looks like `return &quot;redirect:/login&quot;`. But as soon as I am hitting the homepage it is converting the URL to the **`http`** and not **`https`**.\r\n\r\nThe whole application is accessible through `https://abcd.com/login` but the **&quot;redirect&quot; routing** of  Thymeleaf is always redirecting it to the `http://abcd.com/login` which is not accessible.\r\n\r\nCan anyone help with the resolution for this.?\r\n\r\nAlso the ECS has one service, one load balancer and one Route53 for translating the names to IP address.","title":"The &quot;redirect&quot; routing of thymeleaf is redirecting the application to http and not to https when deployed in AWS ECS","body":"<p>I am building a Spring Boot application which consists of Spring Security and Thymeleaf. I have deployed this application in Elastic Container Service (ECS) cluster of AWS.</p>\n<p>I have my simple controller code for the homepage which looks like <code>return &quot;redirect:/login&quot;</code>. But as soon as I am hitting the homepage it is converting the URL to the <strong><code>http</code></strong> and not <strong><code>https</code></strong>.</p>\n<p>The whole application is accessible through <code>https://abcd.com/login</code> but the <strong>&quot;redirect&quot; routing</strong> of  Thymeleaf is always redirecting it to the <code>http://abcd.com/login</code> which is not accessible.</p>\n<p>Can anyone help with the resolution for this.?</p>\n<p>Also the ECS has one service, one load balancer and one Route53 for translating the names to IP address.</p>\n"},{"tags":["java","android","firebase","android-studio","firebase-cloud-messaging"],"comments":[{"owner":{"account_id":10866797,"reputation":1800,"user_id":8663492,"display_name":"Muntasir Aonik"},"score":0,"creation_date":1566871798,"post_id":57580464,"comment_id":101782187,"body_markdown":"Possible duplicate of [How to handle notification when app in background in Firebase](https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase\">How to handle notification when app in background in Firebase</a>"}],"answers":[{"comments":[{"owner":{"account_id":26164197,"reputation":251,"user_id":19850238,"display_name":"vmvyas1989"},"score":0,"creation_date":1675398397,"post_id":72171234,"comment_id":132924961,"body_markdown":"What if want data from data payload ? when application is in kill mode retrieve notification but not getting data payload data","body":"What if want data from data payload ? when application is in kill mode retrieve notification but not getting data payload data"}],"tags":[],"owner":{"account_id":12982239,"reputation":59,"user_id":9384240,"display_name":"Shubham Vyas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694171532,"creation_date":1652095660,"answer_id":72171234,"question_id":57580464,"body_markdown":"Try removing &quot;notification&quot; key object from the payload and provide only &quot;data&quot; key object.\r\nThis should work\r\n\r\n**Body/Payload/JSON Request:**\r\n\r\n    {\r\n        &quot;collapse_key&quot;: &quot;type_a&quot;,\r\n        &quot;notification&quot;: {\r\n            &quot;badge&quot;: &quot;2&quot;,\r\n            &quot;module&quot;: &quot;announcements&quot;,\r\n        &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;data&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;Announcement&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;registration_ids&quot;: [\r\n        &quot;dJokCoAJRfyHpL3y9rQWxL:APA91bGNszapf1bnQapVHW1CMLT14SXMmjYBmXooRUiiMEWpvawkZ9Kv5SzRz4cnqHhnwFGWT3uXfzgGn3ygysJE1bkfG0nNomCtL_ikDzE0TiP0TZjhQBDSj_1ydFUyrnQKNSnszqgW&quot;\r\n     ]\r\n    }\r\n\r\n\r\n**You can remove data object from the payload as shown in below code snippet:**\r\n\r\n     &quot;notification&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;announcements&quot;,\r\n    &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\r\n    &quot;id&quot;: &quot;2455&quot;,\r\n    &quot;title&quot;: &quot;Test Notification&quot;,\r\n    &quot;body&quot;: &quot;Check Notification&quot;\r\n    }\r\n\r\n**Correct format will be:**\r\n\r\n    {\r\n    &quot;collapse_key&quot;: &quot;type_a&quot;,\r\n    &quot;data&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;Announcement&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;registration_ids&quot;: [\r\n        &quot;eIMfC_Tf1bo:APA91bEJEXAsdeb33LEK1go4tMvjW-8dvO9jBYKfRaiyUwzsNICij_lUPqKBQEXtwZURxkrjg0RbUPUnr9gOxit2Sd-nu4hhloZhmtsyldqDA3SZK1ld4W2PI7hqZx6yTpZ480AIdeIs&quot;\r\n    ]\r\n    }\r\n\r\n","title":"FCM notification not retrieve when app is closed","body":"<p>Try removing &quot;notification&quot; key object from the payload and provide only &quot;data&quot; key object.\nThis should work</p>\n<p><strong>Body/Payload/JSON Request:</strong></p>\n<pre><code>{\n    &quot;collapse_key&quot;: &quot;type_a&quot;,\n    &quot;notification&quot;: {\n        &quot;badge&quot;: &quot;2&quot;,\n        &quot;module&quot;: &quot;announcements&quot;,\n    &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;data&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;Announcement&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;registration_ids&quot;: [\n    &quot;dJokCoAJRfyHpL3y9rQWxL:APA91bGNszapf1bnQapVHW1CMLT14SXMmjYBmXooRUiiMEWpvawkZ9Kv5SzRz4cnqHhnwFGWT3uXfzgGn3ygysJE1bkfG0nNomCtL_ikDzE0TiP0TZjhQBDSj_1ydFUyrnQKNSnszqgW&quot;\n ]\n}\n</code></pre>\n<p><strong>You can remove data object from the payload as shown in below code snippet:</strong></p>\n<pre><code> &quot;notification&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;announcements&quot;,\n&quot;action&quot;: &quot;announcementAddedByWarden&quot;,\n&quot;id&quot;: &quot;2455&quot;,\n&quot;title&quot;: &quot;Test Notification&quot;,\n&quot;body&quot;: &quot;Check Notification&quot;\n}\n</code></pre>\n<p><strong>Correct format will be:</strong></p>\n<pre><code>{\n&quot;collapse_key&quot;: &quot;type_a&quot;,\n&quot;data&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;Announcement&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;registration_ids&quot;: [\n    &quot;eIMfC_Tf1bo:APA91bEJEXAsdeb33LEK1go4tMvjW-8dvO9jBYKfRaiyUwzsNICij_lUPqKBQEXtwZURxkrjg0RbUPUnr9gOxit2Sd-nu4hhloZhmtsyldqDA3SZK1ld4W2PI7hqZx6yTpZ480AIdeIs&quot;\n]\n}\n</code></pre>\n"}],"owner":{"account_id":11805072,"reputation":241,"user_id":11106787,"display_name":"Saransh Agarwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8720,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694171532,"creation_date":1566329706,"question_id":57580464,"body_markdown":"I am retrieving the notification from firebase cloud messaging into my android app. but the problem is when my app is opened or in running state in that case only my app is retrieving the notification. if I am not using my app or my app is not opened and I send any push notification that notification is not retrieving inside my app.\r\n\r\n        @Override\r\n        public void onMessageReceived(RemoteMessage remoteMessage) {\r\n            super.onMessageReceived(remoteMessage);\r\n    \r\n            mFirestore = FirebaseFirestore.getInstance();\r\n    \r\n            if (remoteMessage.getData() != null) {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\r\n                    sendNotificationAPI26(remoteMessage);\r\n    \r\n                else\r\n                    sendNotification(remoteMessage);\r\n            }\r\n        }\r\n    \r\n        private void sendNotification(RemoteMessage remoteMessage) {\r\n    \r\n            isNotificationMatching = false;\r\n            Intent intent = new Intent(this, Dashboard.class);\r\n            intent.putExtra(&quot;notificationFragment&quot;, &quot;showNotifications&quot;);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n    \r\n            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\r\n    \r\n    \r\n            final Map&lt;String, String&gt; data = remoteMessage.getData();\r\n    \r\n            String title = data.get(&quot;title&quot;);\r\n            String description = data.get(&quot;description&quot;);\r\n            String url = data.get(&quot;url&quot;);\r\n            String code = data.get(&quot;code&quot;);\r\n            String actual_price = data.get(&quot;actual_price&quot;);\r\n            String deal_price = data.get(&quot;deal_price&quot;);\r\n            String key = data.get(&quot;key&quot;);\r\n            final String id = data.get(&quot;id&quot;);\r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            if (document.getData().get(&quot;id&quot;).equals(id)) {\r\n                                isNotificationMatching = true;\r\n                                break;\r\n                            }\r\n                        }\r\n    \r\n                        if (!isNotificationMatching) {\r\n                            postDataToFirebaseServer(data);\r\n                        }\r\n    \r\n                    } else {\r\n                        Log.d(TAG, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                }\r\n            });\r\n    \r\n    \r\n            Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\r\n                    .setSmallIcon(R.drawable.app_logo)\r\n                    .setContentText(title)\r\n                    .setAutoCancel(true)\r\n                    .setSound(defaultSoundUri);\r\n            builder.setContentIntent(pendingIntent);\r\n    \r\n            NotificationManager noti = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n            noti.notify(new Random().nextInt(), builder.build());\r\n        }\r\n    \r\n        private void postDataToFirebaseServer(Map&lt;String, String&gt; data) {\r\n    \r\n            Map&lt;String,Object&gt; postDataMap = new HashMap&lt;&gt;();\r\n            postDataMap.put(&quot;title&quot;, data.get(&quot;title&quot;));\r\n            postDataMap.put(&quot;description&quot;, data.get(&quot;description&quot;));\r\n            postDataMap.put(&quot;url&quot;, data.get(&quot;url&quot;));\r\n            postDataMap.put(&quot;id&quot;, data.get(&quot;id&quot;));\r\n            postDataMap.put(&quot;code&quot;, data.get(&quot;code&quot;));\r\n            postDataMap.put(&quot;actual_price&quot;, data.get(&quot;actual_price&quot;));\r\n            postDataMap.put(&quot;deal_price&quot;, data.get(&quot;deal_price&quot;));\r\n            postDataMap.put(&quot;key&quot;, data.get(&quot;key&quot;));\r\n    \r\n            postDataMap.put(&quot;timestamp&quot;, FieldValue.serverTimestamp());\r\n    \r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).add(postDataMap).addOnSuccessListener(new OnSuccessListener&lt;DocumentReference&gt;() {\r\n                @Override\r\n                public void onSuccess(DocumentReference documentReference) {\r\n    //                Toast.makeText(getA.this, &quot;Success&quot;, Toast.LENGTH_SHORT);\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    String error = e.getMessage();\r\n    //                Toast.makeText(Testing.this, &quot;Failed&quot;, Toast.LENGTH_SHORT);\r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n        private void sendNotificationAPI26(RemoteMessage remoteMessage) {\r\n            Intent intent = new Intent(this, Dashboard.class);\r\n            intent.putExtra(&quot;notificationFragment&quot;, &quot;showNotifications&quot;);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n    \r\n            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\r\n    \r\n            final Map&lt;String, String&gt; data = remoteMessage.getData();\r\n    \r\n            String title = data.get(&quot;title&quot;);\r\n            String description = data.get(&quot;description&quot;);\r\n            String url = data.get(&quot;url&quot;);\r\n            String code = data.get(&quot;code&quot;);\r\n            String actual_price = data.get(&quot;actual_price&quot;);\r\n            String deal_price = data.get(&quot;deal_price&quot;);\r\n            String key = data.get(&quot;key&quot;);\r\n            final String id = data.get(&quot;id&quot;);\r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            if (document.getData().get(&quot;id&quot;).equals(id)) {\r\n                                isNotificationMatching = true;\r\n                                break;\r\n                            }\r\n                        }\r\n    \r\n                        if (!isNotificationMatching) {\r\n                            postDataToFirebaseServer(data);\r\n                        }\r\n    \r\n                    } else {\r\n                        Log.d(TAG, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                }\r\n            });\r\n    \r\n            NotificationHelper helper;\r\n            Notification.Builder builder;\r\n    \r\n            Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            helper = new NotificationHelper(this);\r\n            builder = helper.getLootBoxNotification(title, description, url, id, code, actual_price, deal_price, key, defaultSoundUri);\r\n            helper.getManager().notify(new Random().nextInt(), builder.build());\r\n            builder.setContentIntent(pendingIntent);\r\n    \r\n        }\r\n    }\r\n\r\nI want when my app is closed or not in running state at that time any push notification is sent that will also retrieve inside the application.","title":"FCM notification not retrieve when app is closed","body":"<p>I am retrieving the notification from firebase cloud messaging into my android app. but the problem is when my app is opened or in running state in that case only my app is retrieving the notification. if I am not using my app or my app is not opened and I send any push notification that notification is not retrieving inside my app.</p>\n\n<pre><code>    @Override\n    public void onMessageReceived(RemoteMessage remoteMessage) {\n        super.onMessageReceived(remoteMessage);\n\n        mFirestore = FirebaseFirestore.getInstance();\n\n        if (remoteMessage.getData() != null) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n                sendNotificationAPI26(remoteMessage);\n\n            else\n                sendNotification(remoteMessage);\n        }\n    }\n\n    private void sendNotification(RemoteMessage remoteMessage) {\n\n        isNotificationMatching = false;\n        Intent intent = new Intent(this, Dashboard.class);\n        intent.putExtra(\"notificationFragment\", \"showNotifications\");\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\n\n\n        final Map&lt;String, String&gt; data = remoteMessage.getData();\n\n        String title = data.get(\"title\");\n        String description = data.get(\"description\");\n        String url = data.get(\"url\");\n        String code = data.get(\"code\");\n        String actual_price = data.get(\"actual_price\");\n        String deal_price = data.get(\"deal_price\");\n        String key = data.get(\"key\");\n        final String id = data.get(\"id\");\n\n        mFirestore.collection(\"notifications\").get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        if (document.getData().get(\"id\").equals(id)) {\n                            isNotificationMatching = true;\n                            break;\n                        }\n                    }\n\n                    if (!isNotificationMatching) {\n                        postDataToFirebaseServer(data);\n                    }\n\n                } else {\n                    Log.d(TAG, \"Error getting documents: \", task.getException());\n                }\n            }\n        });\n\n\n        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\n                .setSmallIcon(R.drawable.app_logo)\n                .setContentText(title)\n                .setAutoCancel(true)\n                .setSound(defaultSoundUri);\n        builder.setContentIntent(pendingIntent);\n\n        NotificationManager noti = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n        noti.notify(new Random().nextInt(), builder.build());\n    }\n\n    private void postDataToFirebaseServer(Map&lt;String, String&gt; data) {\n\n        Map&lt;String,Object&gt; postDataMap = new HashMap&lt;&gt;();\n        postDataMap.put(\"title\", data.get(\"title\"));\n        postDataMap.put(\"description\", data.get(\"description\"));\n        postDataMap.put(\"url\", data.get(\"url\"));\n        postDataMap.put(\"id\", data.get(\"id\"));\n        postDataMap.put(\"code\", data.get(\"code\"));\n        postDataMap.put(\"actual_price\", data.get(\"actual_price\"));\n        postDataMap.put(\"deal_price\", data.get(\"deal_price\"));\n        postDataMap.put(\"key\", data.get(\"key\"));\n\n        postDataMap.put(\"timestamp\", FieldValue.serverTimestamp());\n\n\n        mFirestore.collection(\"notifications\").add(postDataMap).addOnSuccessListener(new OnSuccessListener&lt;DocumentReference&gt;() {\n            @Override\n            public void onSuccess(DocumentReference documentReference) {\n//                Toast.makeText(getA.this, \"Success\", Toast.LENGTH_SHORT);\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                String error = e.getMessage();\n//                Toast.makeText(Testing.this, \"Failed\", Toast.LENGTH_SHORT);\n            }\n        });\n\n    }\n\n    private void sendNotificationAPI26(RemoteMessage remoteMessage) {\n        Intent intent = new Intent(this, Dashboard.class);\n        intent.putExtra(\"notificationFragment\", \"showNotifications\");\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\n\n        final Map&lt;String, String&gt; data = remoteMessage.getData();\n\n        String title = data.get(\"title\");\n        String description = data.get(\"description\");\n        String url = data.get(\"url\");\n        String code = data.get(\"code\");\n        String actual_price = data.get(\"actual_price\");\n        String deal_price = data.get(\"deal_price\");\n        String key = data.get(\"key\");\n        final String id = data.get(\"id\");\n\n        mFirestore.collection(\"notifications\").get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        if (document.getData().get(\"id\").equals(id)) {\n                            isNotificationMatching = true;\n                            break;\n                        }\n                    }\n\n                    if (!isNotificationMatching) {\n                        postDataToFirebaseServer(data);\n                    }\n\n                } else {\n                    Log.d(TAG, \"Error getting documents: \", task.getException());\n                }\n            }\n        });\n\n        NotificationHelper helper;\n        Notification.Builder builder;\n\n        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n        helper = new NotificationHelper(this);\n        builder = helper.getLootBoxNotification(title, description, url, id, code, actual_price, deal_price, key, defaultSoundUri);\n        helper.getManager().notify(new Random().nextInt(), builder.build());\n        builder.setContentIntent(pendingIntent);\n\n    }\n}\n</code></pre>\n\n<p>I want when my app is closed or not in running state at that time any push notification is sent that will also retrieve inside the application.</p>\n"},{"tags":["java","generics","interface","casting"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694170515,"post_id":77066231,"comment_id":135859454,"body_markdown":"A generic method is a method which declares at least one type parameter. The *caller* decides which actual type argument(s) to use for the type parameter(s). Your phrase ‚Äúthat this can only be made into a class of type Predicate‚Äù is incomprehensible. You should mark code fragments with back-ticks, so that type arguments are not confused for HTML tags. As said, the *caller* decides what `T` is, hence, returning a `Predicate&lt;T&gt;` allows the caller to decide what actual parameterization the predicate will have. Which works, because every object has an `equals` method.","body":"A generic method is a method which declares at least one type parameter. The <i>caller</i> decides which actual type argument(s) to use for the type parameter(s). Your phrase ‚Äúthat this can only be made into a class of type Predicate‚Äù is incomprehensible. You should mark code fragments with back-ticks, so that type arguments are not confused for HTML tags. As said, the <i>caller</i> decides what <code>T</code> is, hence, returning a <code>Predicate&lt;T&gt;</code> allows the caller to decide what actual parameterization the predicate will have. Which works, because every object has an <code>equals</code> method."}],"answers":[{"comments":[{"owner":{"account_id":17883750,"reputation":13,"user_id":22382599,"display_name":"SoullessWarrior"},"score":0,"creation_date":1694170580,"post_id":77066263,"comment_id":135859469,"body_markdown":"Right, but since it&#39;s a static method, it would be invoked like Predicate.isEqual(myobject), where for the sake of argument, myobject is an Integer. In that case, what is T?","body":"Right, but since it&#39;s a static method, it would be invoked like Predicate.isEqual(myobject), where for the sake of argument, myobject is an Integer. In that case, what is T?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1694170709,"post_id":77066263,"comment_id":135859487,"body_markdown":"@SoullessWarrior that depends on the calling context. `Predicate&lt;String&gt; p = Predicate.isEqual(myInteger);`","body":"@SoullessWarrior that depends on the calling context. <code>Predicate&lt;String&gt; p = Predicate.isEqual(myInteger);</code>"},{"owner":{"account_id":17883750,"reputation":13,"user_id":22382599,"display_name":"SoullessWarrior"},"score":0,"creation_date":1694171533,"post_id":77066263,"comment_id":135859643,"body_markdown":"Ah, thanks! That clarifies everything. The only question that remains is: Why does the second method take a superclass and then cast the negation down into T?","body":"Ah, thanks! That clarifies everything. The only question that remains is: Why does the second method take a superclass and then cast the negation down into T?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1694171547,"post_id":77066263,"comment_id":135859645,"body_markdown":"@SoullessWarrior the result of invoking a generic method is a _polyexpression_: the same code can have different types, depending on how it is used (e.g. the type of variable it is assigned to).","body":"@SoullessWarrior the result of invoking a generic method is a <i>polyexpression</i>: the same code can have different types, depending on how it is used (e.g. the type of variable it is assigned to)."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1694171652,"post_id":77066263,"comment_id":135859671,"body_markdown":"@SoullessWarrior the cast is narrowing the permissible argument types from &quot;something, we don&#39;t know exactly what, but `T` is acceptable&quot; to &quot;only `T` is acceptable&quot;. Provided the API you&#39;re using has used generics appropriately, it should be able to accept predicates which are more general than needed; but sometimes, they don&#39;t accept general parameters, and you need e.g. an actual `Predicate&lt;String&gt;` instead of a `Predicate&lt;Object&gt;` to which you will only pass `String`s.","body":"@SoullessWarrior the cast is narrowing the permissible argument types from &quot;something, we don&#39;t know exactly what, but <code>T</code> is acceptable&quot; to &quot;only <code>T</code> is acceptable&quot;. Provided the API you&#39;re using has used generics appropriately, it should be able to accept predicates which are more general than needed; but sometimes, they don&#39;t accept general parameters, and you need e.g. an actual <code>Predicate&lt;String&gt;</code> instead of a <code>Predicate&lt;Object&gt;</code> to which you will only pass <code>String</code>s."}],"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694170808,"creation_date":1694170414,"answer_id":77066263,"question_id":77066231,"body_markdown":"We can always specify the types explicitly:\r\n\r\n```\r\nstatic &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\r\n    return (null == targetRef)\r\n            ? Objects::isNull\r\n            : (T object) -&gt; targetRef.equals(object);\r\n}\r\n```\r\n\r\nSo while `targetRef` is of type `Object`, `object` is of type `T`.\r\n\r\n`T` depends on the calling context, e.g.:\r\n\r\n```\r\nPredicate.isEqual(something); // T == Object\r\nPredicate.&lt;String&gt;isEqual(something); // T == String\r\nPredicate&lt;Double&gt; p = Predicate.isEqual(something); // T == Double\r\nStream.of(1,2,3).filter(Predicate.isEqual(2)); // T == Integer\r\n```","title":"static functions using generic types in Java","body":"<p>We can always specify the types explicitly:</p>\n<pre><code>static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\n    return (null == targetRef)\n            ? Objects::isNull\n            : (T object) -&gt; targetRef.equals(object);\n}\n</code></pre>\n<p>So while <code>targetRef</code> is of type <code>Object</code>, <code>object</code> is of type <code>T</code>.</p>\n<p><code>T</code> depends on the calling context, e.g.:</p>\n<pre><code>Predicate.isEqual(something); // T == Object\nPredicate.&lt;String&gt;isEqual(something); // T == String\nPredicate&lt;Double&gt; p = Predicate.isEqual(something); // T == Double\nStream.of(1,2,3).filter(Predicate.isEqual(2)); // T == Integer\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694170421,"creation_date":1694170421,"answer_id":77066265,"question_id":77066231,"body_markdown":"For the first function, the `equals` method always takes an `Object`. You might expect `Object::equals` to take only a parameter of its own type, but that&#39;s not what it does. That leaves the `&lt;T&gt;` parameter to be inferred purely by what the caller needs: You can easily pass `isEqual(&quot;&quot;)` to something that expects a `Predicate&lt;Integer&gt;`, and that&#39;ll work fine (and always returns `false`).\r\n\r\nThe `&lt;T&gt;` for the second function is inferred from the caller in much the same way. The `super` just means &quot;any `Predicate` that can *consume* a `T`&quot;. The cast is needed because the compiler can&#39;t know that the `Predicate` returned by `negate` is always safe as a `Predicate&lt;T&gt;`.\r\n\r\n\r\n","title":"static functions using generic types in Java","body":"<p>For the first function, the <code>equals</code> method always takes an <code>Object</code>. You might expect <code>Object::equals</code> to take only a parameter of its own type, but that's not what it does. That leaves the <code>&lt;T&gt;</code> parameter to be inferred purely by what the caller needs: You can easily pass <code>isEqual(&quot;&quot;)</code> to something that expects a <code>Predicate&lt;Integer&gt;</code>, and that'll work fine (and always returns <code>false</code>).</p>\n<p>The <code>&lt;T&gt;</code> for the second function is inferred from the caller in much the same way. The <code>super</code> just means &quot;any <code>Predicate</code> that can <em>consume</em> a <code>T</code>&quot;. The cast is needed because the compiler can't know that the <code>Predicate</code> returned by <code>negate</code> is always safe as a <code>Predicate&lt;T&gt;</code>.</p>\n"}],"owner":{"account_id":17883750,"reputation":13,"user_id":22382599,"display_name":"SoullessWarrior"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77066263,"answer_count":2,"score":0,"last_activity_date":1694170928,"creation_date":1694170137,"question_id":77066231,"body_markdown":"I was looking at the source code of Predicate&lt;T&gt; in java.util.function, (which for context, is a functional interface that returns a boolean value having taken some generic input of type T) when I came across the following functions:\r\n\r\n```\r\n    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\r\n        return (null == targetRef)\r\n                ? Objects::isNull\r\n                : object -&gt; targetRef.equals(object);\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;? super T&gt; target) {\r\n        Objects.requireNonNull(target);\r\n        return (Predicate&lt;T&gt;)target.negate();\r\n    }\r\n\r\n```\r\nand I am puzzled by how static functions can be used with all these generic types lying around. What&#39;s going on?\r\n\r\nI was expecting some type inference makes this happen. In the first method, the return function is a function that can be fed into `Predicate&lt;T&gt;` implicitly, but since the `targetRef` argument is of type `Object`, I would expect that this can only be made into a class of type `Predicate&lt;Object&gt;`, which seems to me, defeats the point of using `T` at all in the function.\r\n\r\nThe second function, I cannot even think of a reasonable inference pattern, it seems absurd. The return type is cast into `Predicate&lt;T&gt;`, but `target.negate` will return `Predicate&lt;? super T&gt;`, which makes taking a super argument itself strange, and further, because of the typecast in the return statement, and the obscurity in the argument as well, it is not possible to know a sensible `T` from either. How do either of these methods work, and why were they defined that way?","title":"static functions using generic types in Java","body":"<p>I was looking at the source code of Predicate in java.util.function, (which for context, is a functional interface that returns a boolean value having taken some generic input of type T) when I came across the following functions:</p>\n<pre><code>    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\n        return (null == targetRef)\n                ? Objects::isNull\n                : object -&gt; targetRef.equals(object);\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;? super T&gt; target) {\n        Objects.requireNonNull(target);\n        return (Predicate&lt;T&gt;)target.negate();\n    }\n\n</code></pre>\n<p>and I am puzzled by how static functions can be used with all these generic types lying around. What's going on?</p>\n<p>I was expecting some type inference makes this happen. In the first method, the return function is a function that can be fed into <code>Predicate&lt;T&gt;</code> implicitly, but since the <code>targetRef</code> argument is of type <code>Object</code>, I would expect that this can only be made into a class of type <code>Predicate&lt;Object&gt;</code>, which seems to me, defeats the point of using <code>T</code> at all in the function.</p>\n<p>The second function, I cannot even think of a reasonable inference pattern, it seems absurd. The return type is cast into <code>Predicate&lt;T&gt;</code>, but <code>target.negate</code> will return <code>Predicate&lt;? super T&gt;</code>, which makes taking a super argument itself strange, and further, because of the typecast in the return statement, and the obscurity in the argument as well, it is not possible to know a sensible <code>T</code> from either. How do either of these methods work, and why were they defined that way?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694167246,"post_id":77063897,"comment_id":135858892,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"score":0,"creation_date":1694169637,"post_id":77063897,"comment_id":135859301,"body_markdown":"Please add your test-cases.","body":"Please add your test-cases."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694170465,"creation_date":1694170465,"answer_id":77066271,"question_id":77063897,"body_markdown":"The problem is in this line:\r\n\r\n```\r\nif (currentWord.length() + word.length() + 1 &gt; K) {\r\n```\r\n\r\nThe addition of 1 in this expression accounts for the space separator, but in case we are in the first iteration of the loop, then no space should be accounted for. So if your test case has a first word (`word.length()`) that has exactly K characters, then this `if` condition will be true, while in fact we should not decide to move that word to the second SMS.\r\n\r\nThe following test case should return 2, but your code will return 3:\r\n\r\n    solution(&#39;ab cd&#39;, 2);\r\n\r\nThe correction could be this:\r\n\r\n```\r\nif (currentWord.length() + word.length() + (isFirst ? 0 : 1) &gt; K) {\r\n```\r\n\r\n### Remark\r\n\r\nIt is not necessary to actually collect the chunked strings. You can suffice with just counting the lines without doing any string manipulation.\r\n\r\nFor instance:\r\n\r\n```\r\n    public static int solution(String S, int K) {\r\n        int i = 0;\r\n        int linesCount = 1;\r\n        while (i + K &lt; S.length()) { // while a split is needed\r\n            linesCount++;\r\n            // Find index where next chunk will start\r\n            int j = S.lastIndexOf(&#39; &#39;, i + K) + 1;\r\n            if (i == j) { // Word is too long\r\n                return -1;\r\n            }\r\n            i = j;\r\n        }\r\n        return linesCount;\r\n    }\r\n```\r\n","title":"Codility test: split sms messages into smaller messages of max K characters","body":"<p>The problem is in this line:</p>\n<pre><code>if (currentWord.length() + word.length() + 1 &gt; K) {\n</code></pre>\n<p>The addition of 1 in this expression accounts for the space separator, but in case we are in the first iteration of the loop, then no space should be accounted for. So if your test case has a first word (<code>word.length()</code>) that has exactly K characters, then this <code>if</code> condition will be true, while in fact we should not decide to move that word to the second SMS.</p>\n<p>The following test case should return 2, but your code will return 3:</p>\n<pre><code>solution('ab cd', 2);\n</code></pre>\n<p>The correction could be this:</p>\n<pre><code>if (currentWord.length() + word.length() + (isFirst ? 0 : 1) &gt; K) {\n</code></pre>\n<h3>Remark</h3>\n<p>It is not necessary to actually collect the chunked strings. You can suffice with just counting the lines without doing any string manipulation.</p>\n<p>For instance:</p>\n<pre><code>    public static int solution(String S, int K) {\n        int i = 0;\n        int linesCount = 1;\n        while (i + K &lt; S.length()) { // while a split is needed\n            linesCount++;\n            // Find index where next chunk will start\n            int j = S.lastIndexOf(' ', i + K) + 1;\n            if (i == j) { // Word is too long\n                return -1;\n            }\n            i = j;\n        }\n        return linesCount;\n    }\n</code></pre>\n"}],"owner":{"account_id":29391922,"reputation":1,"user_id":22520055,"display_name":"David Tan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":428,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694170666,"creation_date":1694142420,"question_id":77063897,"body_markdown":"I am working on this Codility challenge: \r\n\r\n&gt; You have a long piece of text, and you want to send it to your friend as a series of SMS messages. Your text consists of English letters (uppercase and lowercase) and spaces. The text doesn&#39;t contain any leading spaces at the beginning or trailing spaces at the end. There are no two consecutive spaces in the text. One proper SMS can contain at most K characters. If the text is longer, it needs to be split into parts. Each part should be sent in a separate message that fulfills the maximum length requirement. Text may not be split within words. The order of the words and the messages can&#39;t change, so that we can later concatenate the resulting messages to retrieve the original text. Spaces at the start and end of all messages are removed, and thus are not accounted for in the overall message length.\r\n&gt; \r\n&gt; The goal is to count the number of SMS messages needed to accommodate the whole text, keeping the length of each message less than or equal to K. The total number of SMS messages must be kept to a minimum, however; it would not be acceptable, for example, to take the wasteful approach of programmatically sending one SMS for each word in the original text!\r\n&gt; \r\n&gt; Write a function: public func solution(_ S: String, _ K: Int) -&gt; Int that, given a string S representing the text that needs to be split and an integer K that is equal to the maximum possible message length, returns the number of SMS messages needed.\r\n&gt; \r\n&gt; For instance, given string S=&quot;SMS messages are really short&quot; and K = 12, your function should return 3. You could split this text into proper messages as follows: &quot;SMS&quot; &quot;messages are&quot; &quot;really short&quot;\r\n&gt; \r\n&gt; If it&#39;s impossible to split text into proper SMS messages, your function should return ‚àí1. Assume that: K is an integer within the range [1..500]; S is a non-empty string containing at most 500 characters: only letters and spaces, there are no spaces at the beginning and at the end of S; also there can&#39;t be two or more consecutive spaces in S.\r\n\r\nI am sure that I have covered all the corner cases but the test result is showing that only 5 out of 8 test cases are correct. What am I missing in my code?\r\n\r\nMy code:\r\n\r\n```\r\n    public static int solution (String S, int K) {\r\n        String[] words = S.split(&quot; &quot;);\r\n        StringBuilder sb = new StringBuilder();\r\n        String currentWord = &quot;&quot;;\r\n        int linesCount = 1;\r\n        boolean isFirst = true;\r\n\r\n        for (String word: words) {\r\n            if (word.length() &gt; K) {\r\n                return -1;\r\n            }\r\n        }\r\n\r\n        for (String word: words) {\r\n            if (currentWord.length() + word.length() + 1 &gt; K) {\r\n                sb.append(currentWord).append(&quot;\\n&quot;);\r\n                linesCount++;\r\n                currentWord = word;\r\n            } else {\r\n                if (isFirst) {\r\n                    currentWord += word;\r\n                    isFirst = false;\r\n                } else {\r\n                    currentWord += &quot; &quot; + word;\r\n                }\r\n            }\r\n        }\r\n        sb.append(currentWord);\r\n        System.out.println(sb.toString());\r\n\r\n        return linesCount;\r\n    }\r\n\r\n```\r\n\r\nI have tried and tested this code in my IDE, with all test cases that I can think of, and they all pass.\r\n\r\nHowever, it does not pass all Codility tests (which are hidden) and I am wondering what is missing from my code.\r\n","title":"Codility test: split sms messages into smaller messages of max K characters","body":"<p>I am working on this Codility challenge:</p>\n<blockquote>\n<p>You have a long piece of text, and you want to send it to your friend as a series of SMS messages. Your text consists of English letters (uppercase and lowercase) and spaces. The text doesn't contain any leading spaces at the beginning or trailing spaces at the end. There are no two consecutive spaces in the text. One proper SMS can contain at most K characters. If the text is longer, it needs to be split into parts. Each part should be sent in a separate message that fulfills the maximum length requirement. Text may not be split within words. The order of the words and the messages can't change, so that we can later concatenate the resulting messages to retrieve the original text. Spaces at the start and end of all messages are removed, and thus are not accounted for in the overall message length.</p>\n<p>The goal is to count the number of SMS messages needed to accommodate the whole text, keeping the length of each message less than or equal to K. The total number of SMS messages must be kept to a minimum, however; it would not be acceptable, for example, to take the wasteful approach of programmatically sending one SMS for each word in the original text!</p>\n<p>Write a function: public func solution(_ S: String, _ K: Int) -&gt; Int that, given a string S representing the text that needs to be split and an integer K that is equal to the maximum possible message length, returns the number of SMS messages needed.</p>\n<p>For instance, given string S=&quot;SMS messages are really short&quot; and K = 12, your function should return 3. You could split this text into proper messages as follows: &quot;SMS&quot; &quot;messages are&quot; &quot;really short&quot;</p>\n<p>If it's impossible to split text into proper SMS messages, your function should return ‚àí1. Assume that: K is an integer within the range [1..500]; S is a non-empty string containing at most 500 characters: only letters and spaces, there are no spaces at the beginning and at the end of S; also there can't be two or more consecutive spaces in S.</p>\n</blockquote>\n<p>I am sure that I have covered all the corner cases but the test result is showing that only 5 out of 8 test cases are correct. What am I missing in my code?</p>\n<p>My code:</p>\n<pre><code>    public static int solution (String S, int K) {\n        String[] words = S.split(&quot; &quot;);\n        StringBuilder sb = new StringBuilder();\n        String currentWord = &quot;&quot;;\n        int linesCount = 1;\n        boolean isFirst = true;\n\n        for (String word: words) {\n            if (word.length() &gt; K) {\n                return -1;\n            }\n        }\n\n        for (String word: words) {\n            if (currentWord.length() + word.length() + 1 &gt; K) {\n                sb.append(currentWord).append(&quot;\\n&quot;);\n                linesCount++;\n                currentWord = word;\n            } else {\n                if (isFirst) {\n                    currentWord += word;\n                    isFirst = false;\n                } else {\n                    currentWord += &quot; &quot; + word;\n                }\n            }\n        }\n        sb.append(currentWord);\n        System.out.println(sb.toString());\n\n        return linesCount;\n    }\n\n</code></pre>\n<p>I have tried and tested this code in my IDE, with all test cases that I can think of, and they all pass.</p>\n<p>However, it does not pass all Codility tests (which are hidden) and I am wondering what is missing from my code.</p>\n"},{"tags":["java","android","backup","android-room","android-external-storage"],"comments":[{"owner":{"account_id":20220873,"reputation":137,"user_id":14830371,"display_name":"Anesu Mazvimavi"},"score":0,"creation_date":1694415902,"post_id":67819150,"comment_id":135882930,"body_markdown":"Hello Sir please may you kindly share full source code","body":"Hello Sir please may you kindly share full source code"}],"answers":[{"comments":[{"owner":{"account_id":12959297,"reputation":398,"user_id":9369035,"display_name":"Njuacha Hubert"},"score":0,"creation_date":1622872895,"post_id":67828363,"comment_id":119921234,"body_markdown":"thank you for the answer but I have tested on android 7 device and I have some problem. I will update my question.","body":"thank you for the answer but I have tested on android 7 device and I have some problem. I will update my question."},{"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"score":0,"creation_date":1622873361,"post_id":67828363,"comment_id":119921312,"body_markdown":"@NjuachaHubert place breakpoint on line `File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);` when debug window appears use DeviceExplorer to look at data/data/&lt;the_packagename&gt;/database, if -wal and or -shm exist. Room sets WAL if API is 16+ as per https://developer.android.com/reference/androidx/room/RoomDatabase.JournalMode#AUTOMATIC","body":"@NjuachaHubert place breakpoint on line <code>File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);</code> when debug window appears use DeviceExplorer to look at data/data/&lt;the_packagename&gt;/database, if -wal and or -shm exist. Room sets WAL if API is 16+ as per <a href=\"https://developer.android.com/reference/androidx/room/RoomDatabase.JournalMode#AUTOMATIC\" rel=\"nofollow noreferrer\">developer.android.com/reference/androidx/room/&hellip;</a>"},{"owner":{"account_id":12959297,"reputation":398,"user_id":9369035,"display_name":"Njuacha Hubert"},"score":0,"creation_date":1623359255,"post_id":67828363,"comment_id":120064865,"body_markdown":"please @MikeT when do i call the checkpointIfWALEnabled(Context context) method? I indeed saw that my room database uses wal. what I tried to do was close the database by  like u said before the backup and then delete the wal and shm files before importing but still what happens is really strange. if i add a break point when restoring at some time it will successfully restore and then if i try without debugging it will not restore. I will update my question with the new attempt.","body":"please @MikeT when do i call the checkpointIfWALEnabled(Context context) method? I indeed saw that my room database uses wal. what I tried to do was close the database by  like u said before the backup and then delete the wal and shm files before importing but still what happens is really strange. if i add a break point when restoring at some time it will successfully restore and then if i try without debugging it will not restore. I will update my question with the new attempt."},{"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"score":0,"creation_date":1623383985,"post_id":67828363,"comment_id":120069080,"body_markdown":"Sounds like you might have other activities or threads using the database. When I do restore I restart the App after using &#39;finish();\n                                    startActivity(i);\n                                    System.exit(0);&#39;. This after presenting a dialog saying that App will restart if restore is done.","body":"Sounds like you might have other activities or threads using the database. When I do restore I restart the App after using &#39;finish();                                     startActivity(i);                                     System.exit(0);&#39;. This after presenting a dialog saying that App will restart if restore is done."}],"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622752568,"creation_date":1622752568,"answer_id":67828363,"question_id":67819150,"body_markdown":"You issue could well be that the database is using [WAL (Write-Ahead logging)][1] as opposed to journal mode.\r\n\r\nWith WAL changes are written to the WAL file (database file name suffixed with -wal and also another file -shm). If the database hasn&#39;t been committed and you only backup/restore the database file. You will lose data.\r\n\r\n- When fully committed, the -wal file will be 0 bytes or not exist, in which case it is not needed.\r\n\r\nFrom Android 9 the default was changed from journal mode to WAL.\r\n\r\n- https://source.android.com/devices/tech/perf/compatibility-wal\r\n\r\nAssuming that this is your issue you have some options:-\r\n\r\n1. Use Journal mode (e.g. use the SQLiteDatabase **disableWriteAheadLogging** method)\r\n1. Backup/Restore all 3 files (if they exist)\r\n1. Fully Commit the database and then backup (closing the database should fully commit) and delete/rename the -wal file and -shm file before restoring.\r\n\r\nOption 3 would be the recommended way as you then gain the advantages of WAL.\r\n\r\nHere&#39;s an example of fully checkpointing (a little over the top but it works):-\r\n\r\n    private void checkpointIfWALEnabled(Context context) {\r\n        final String TAG = &quot;WALCHKPNT&quot;;\r\n        Cursor csr;\r\n        int wal_busy = -99, wal_log = -99, wal_checkpointed = -99;\r\n        SQLiteDatabase db = SQLiteDatabase.openDatabase(context.getDatabasePath(DBConstants.DATABASE_NAME).getPath(), null, SQLiteDatabase.OPEN_READWRITE);\r\n        csr = db.rawQuery(&quot;PRAGMA journal_mode&quot;, null);\r\n        if (csr.moveToFirst()) {\r\n            String mode = csr.getString(0);\r\n            //Log.d(TAG, &quot;Mode is &quot; + mode);\r\n            if (mode.toLowerCase().equals(&quot;wal&quot;)) {\r\n                csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\r\n                if (csr.moveToFirst()) {\r\n                    wal_busy = csr.getInt(0);\r\n                    wal_log = csr.getInt(1);\r\n                    wal_checkpointed = csr.getInt(2);\r\n                }\r\n                //Log.d(TAG,&quot;Checkpoint pre checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\r\n                csr = db.rawQuery(&quot;PRAGMA wal_checkpoint(TRUNCATE)&quot;, null);\r\n                csr.getCount();\r\n                csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\r\n                if (csr.moveToFirst()) {\r\n                    wal_busy = csr.getInt(0);\r\n                    wal_log = csr.getInt(1);\r\n                    wal_checkpointed = csr.getInt(2);\r\n                }\r\n                //Log.d(TAG,&quot;Checkpoint post checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\r\n            }\r\n        }\r\n        csr.close();\r\n        db.close(); // Should checkpoint the database anyway.\r\n    }\r\n\r\nWhen restoring the following is used to delete the -wal and -shm files :-\r\n\r\n                        // Added for Android 9+ to delete shm and wal file if they exist\r\n                        File dbshm = new File(dbfile.getPath() + &quot;-shm&quot;);\r\n                        File dbwal = new File(dbfile.getPath() + &quot;-wal&quot;);\r\n                        if (dbshm.exists()) {\r\n                            dbshm.delete();\r\n                        }\r\n                        if (dbwal.exists()) {\r\n                            dbwal.delete();\r\n                        }\r\n\r\n\r\n  [1]: https://sqlite.org/wal.html","title":"Restore from Room Sqlite database from sd card not working","body":"<p>You issue could well be that the database is using <a href=\"https://sqlite.org/wal.html\" rel=\"nofollow noreferrer\">WAL (Write-Ahead logging)</a> as opposed to journal mode.</p>\n<p>With WAL changes are written to the WAL file (database file name suffixed with -wal and also another file -shm). If the database hasn't been committed and you only backup/restore the database file. You will lose data.</p>\n<ul>\n<li>When fully committed, the -wal file will be 0 bytes or not exist, in which case it is not needed.</li>\n</ul>\n<p>From Android 9 the default was changed from journal mode to WAL.</p>\n<ul>\n<li><a href=\"https://source.android.com/devices/tech/perf/compatibility-wal\" rel=\"nofollow noreferrer\">https://source.android.com/devices/tech/perf/compatibility-wal</a></li>\n</ul>\n<p>Assuming that this is your issue you have some options:-</p>\n<ol>\n<li>Use Journal mode (e.g. use the SQLiteDatabase <strong>disableWriteAheadLogging</strong> method)</li>\n<li>Backup/Restore all 3 files (if they exist)</li>\n<li>Fully Commit the database and then backup (closing the database should fully commit) and delete/rename the -wal file and -shm file before restoring.</li>\n</ol>\n<p>Option 3 would be the recommended way as you then gain the advantages of WAL.</p>\n<p>Here's an example of fully checkpointing (a little over the top but it works):-</p>\n<pre><code>private void checkpointIfWALEnabled(Context context) {\n    final String TAG = &quot;WALCHKPNT&quot;;\n    Cursor csr;\n    int wal_busy = -99, wal_log = -99, wal_checkpointed = -99;\n    SQLiteDatabase db = SQLiteDatabase.openDatabase(context.getDatabasePath(DBConstants.DATABASE_NAME).getPath(), null, SQLiteDatabase.OPEN_READWRITE);\n    csr = db.rawQuery(&quot;PRAGMA journal_mode&quot;, null);\n    if (csr.moveToFirst()) {\n        String mode = csr.getString(0);\n        //Log.d(TAG, &quot;Mode is &quot; + mode);\n        if (mode.toLowerCase().equals(&quot;wal&quot;)) {\n            csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\n            if (csr.moveToFirst()) {\n                wal_busy = csr.getInt(0);\n                wal_log = csr.getInt(1);\n                wal_checkpointed = csr.getInt(2);\n            }\n            //Log.d(TAG,&quot;Checkpoint pre checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\n            csr = db.rawQuery(&quot;PRAGMA wal_checkpoint(TRUNCATE)&quot;, null);\n            csr.getCount();\n            csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\n            if (csr.moveToFirst()) {\n                wal_busy = csr.getInt(0);\n                wal_log = csr.getInt(1);\n                wal_checkpointed = csr.getInt(2);\n            }\n            //Log.d(TAG,&quot;Checkpoint post checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\n        }\n    }\n    csr.close();\n    db.close(); // Should checkpoint the database anyway.\n}\n</code></pre>\n<p>When restoring the following is used to delete the -wal and -shm files :-</p>\n<pre><code>                    // Added for Android 9+ to delete shm and wal file if they exist\n                    File dbshm = new File(dbfile.getPath() + &quot;-shm&quot;);\n                    File dbwal = new File(dbfile.getPath() + &quot;-wal&quot;);\n                    if (dbshm.exists()) {\n                        dbshm.delete();\n                    }\n                    if (dbwal.exists()) {\n                        dbwal.delete();\n                    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20220873,"reputation":137,"user_id":14830371,"display_name":"Anesu Mazvimavi"},"score":0,"creation_date":1694440587,"post_id":67966940,"comment_id":135887471,"body_markdown":"Hello Sir please may you kindly share full source code","body":"Hello Sir please may you kindly share full source code"}],"tags":[],"owner":{"account_id":12959297,"reputation":398,"user_id":9369035,"display_name":"Njuacha Hubert"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1623658584,"creation_date":1623658584,"answer_id":67966940,"question_id":67819150,"body_markdown":"After testing and looking around much and thanks to @MikeT i was able to use this class below for backup and restore.\r\n\r\n    public class BackupAndRestore {\r\n\r\n            public static void importDB(Context context) {\r\n                try {\r\n                    File sd = Environment.getExternalStorageDirectory();\r\n                    // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\r\n                    AppDatabase.getDatabaseInstance(context).close();\r\n\r\n                    if (sd.canRead()) {\r\n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n\r\n                        transfer(context, backupDB, currentDB);\r\n                        Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n\r\n            public static void exportDB(Context context) {\r\n                try {\r\n                    File sd = Environment.getExternalStorageDirectory();\r\n                    // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\r\n                    AppDatabase.getDatabaseInstance(context).close();\r\n\r\n                    if (sd.canWrite()) {\r\n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n                        transfer(context, currentDB, backupDB);\r\n\r\n                        Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            private static void transfer(Context context, File sourceFile, File destinationFile) throws IOException {\r\n                if (sourceFile.exists()) {\r\n                    FileChannel src = new FileInputStream(sourceFile).getChannel();\r\n                    FileChannel dst = new FileOutputStream(destinationFile).getChannel();\r\n                    dst.transferFrom(src, 0, src.size());\r\n                    src.close();\r\n                    dst.close();\r\n                }\r\n            }\r\n\r\n        }\r\nIn my main activity I call method like below\r\n        \r\n        ...\r\n\r\n        if (item.getItemId() == R.id.backup) {\r\n            BackupAndRestore.exportDB(getBaseContext());\r\n            restartApplication();\r\n        } else if (item.getItemId() == R.id.restore) {\r\n            BackupAndRestore.importDB(getBaseContext());\r\n            restartApplication();\r\n        }\r\n\r\n        ...\r\n\r\nSo the restartApplication method is called after backup because I noticed the room database was not working properly after backup unless i restart the application and also after after restoring I could not see the restored data unless the application was restarted. The restart method is below\r\n\r\n    private void restartApplication() {\r\n        finish();\r\n        startActivity(getIntent());\r\n        System.exit(0);\r\n    }\r\n\r\n\r\n\r\n     ","title":"Restore from Room Sqlite database from sd card not working","body":"<p>After testing and looking around much and thanks to @MikeT i was able to use this class below for backup and restore.</p>\n<pre><code>public class BackupAndRestore {\n\n        public static void importDB(Context context) {\n            try {\n                File sd = Environment.getExternalStorageDirectory();\n                // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\n                AppDatabase.getDatabaseInstance(context).close();\n\n                if (sd.canRead()) {\n                    File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                    File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n\n                    transfer(context, backupDB, currentDB);\n                    Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\n\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n\n        public static void exportDB(Context context) {\n            try {\n                File sd = Environment.getExternalStorageDirectory();\n                // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\n                AppDatabase.getDatabaseInstance(context).close();\n\n                if (sd.canWrite()) {\n                    File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                    File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n                    transfer(context, currentDB, backupDB);\n\n                    Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n        private static void transfer(Context context, File sourceFile, File destinationFile) throws IOException {\n            if (sourceFile.exists()) {\n                FileChannel src = new FileInputStream(sourceFile).getChannel();\n                FileChannel dst = new FileOutputStream(destinationFile).getChannel();\n                dst.transferFrom(src, 0, src.size());\n                src.close();\n                dst.close();\n            }\n        }\n\n    }\n</code></pre>\n<p>In my main activity I call method like below</p>\n<pre><code>    ...\n\n    if (item.getItemId() == R.id.backup) {\n        BackupAndRestore.exportDB(getBaseContext());\n        restartApplication();\n    } else if (item.getItemId() == R.id.restore) {\n        BackupAndRestore.importDB(getBaseContext());\n        restartApplication();\n    }\n\n    ...\n</code></pre>\n<p>So the restartApplication method is called after backup because I noticed the room database was not working properly after backup unless i restart the application and also after after restoring I could not see the restored data unless the application was restarted. The restart method is below</p>\n<pre><code>private void restartApplication() {\n    finish();\n    startActivity(getIntent());\n    System.exit(0);\n}\n\n\n\n \n</code></pre>\n"}],"owner":{"account_id":12959297,"reputation":398,"user_id":9369035,"display_name":"Njuacha Hubert"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67966940,"answer_count":2,"score":0,"last_activity_date":1694170473,"creation_date":1622713547,"question_id":67819150,"body_markdown":"I looked at others answers like https://stackoverflow.com/questions/2170031/backup-and-restore-sqlite-database-to-sdcard/37261271 and https://stackoverflow.com/questions/18635412/restoring-sqlite-db-file etc. but i still dont see the restoring of database when i uninstall and reinstall app and restore backup. \r\nHere is the code I have currently.\r\n\r\n            public class BackupAndRestore {\r\n            \r\n                public static void importDB(Context context) {\r\n                    try {\r\n                        File sd = Environment.getExternalStorageDirectory();\r\n            \r\n                        if (sd.canRead()) {\r\n                            File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                            File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n            \r\n                            if (currentDB.exists()) {\r\n                                FileChannel src = new FileInputStream(backupDB).getChannel();\r\n                                FileChannel dst = new FileOutputStream(currentDB).getChannel();\r\n                                dst.transferFrom(src, 0, src.size());\r\n                                src.close();\r\n                                dst.close();\r\n                                Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            \r\n                public static void exportDB(Context context) {\r\n                    try {\r\n                        File sd = Environment.getExternalStorageDirectory();\r\n                        File data = Environment.getDataDirectory();\r\n            \r\n            \r\n                        if (sd.canWrite()) {\r\n            \r\n                            File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                            File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n            \r\n                            if (currentDB.exists()) {\r\n                                FileChannel src = new FileInputStream(currentDB).getChannel();\r\n                                FileChannel dst = new FileOutputStream(backupDB).getChannel();\r\n                                dst.transferFrom(src, 0, src.size());\r\n                                src.close();\r\n                                dst.close();\r\n                                Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n            \r\n                }\r\n            \r\n            }\r\n\r\nSo I install app and I add content to database. Then I also grant permission to write to external storage before calling this export method above. it shows toast message &quot;Backup is successful... &quot; and I can see the file created in the external storage. Then I uninstall and reinstall and I request permission again to external storage. Then call the method import above. The toast message again is seen &quot;Database Restored..&quot; but I don&#39;t see the database content that existed before. I tested on android 7 device and android 10 device.\r\nI will appreciate help. Thanks. \r\n\r\n\r\n","title":"Restore from Room Sqlite database from sd card not working","body":"<p>I looked at others answers like <a href=\"https://stackoverflow.com/questions/2170031/backup-and-restore-sqlite-database-to-sdcard/37261271\">Backup and restore SQLite database to sdcard</a> and <a href=\"https://stackoverflow.com/questions/18635412/restoring-sqlite-db-file\">Restoring SQLite DB file</a> etc. but i still dont see the restoring of database when i uninstall and reinstall app and restore backup.\nHere is the code I have currently.</p>\n<pre><code>        public class BackupAndRestore {\n        \n            public static void importDB(Context context) {\n                try {\n                    File sd = Environment.getExternalStorageDirectory();\n        \n                    if (sd.canRead()) {\n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n        \n                        if (currentDB.exists()) {\n                            FileChannel src = new FileInputStream(backupDB).getChannel();\n                            FileChannel dst = new FileOutputStream(currentDB).getChannel();\n                            dst.transferFrom(src, 0, src.size());\n                            src.close();\n                            dst.close();\n                            Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        \n            public static void exportDB(Context context) {\n                try {\n                    File sd = Environment.getExternalStorageDirectory();\n                    File data = Environment.getDataDirectory();\n        \n        \n                    if (sd.canWrite()) {\n        \n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n        \n                        if (currentDB.exists()) {\n                            FileChannel src = new FileInputStream(currentDB).getChannel();\n                            FileChannel dst = new FileOutputStream(backupDB).getChannel();\n                            dst.transferFrom(src, 0, src.size());\n                            src.close();\n                            dst.close();\n                            Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n        \n            }\n        \n        }\n</code></pre>\n<p>So I install app and I add content to database. Then I also grant permission to write to external storage before calling this export method above. it shows toast message &quot;Backup is successful... &quot; and I can see the file created in the external storage. Then I uninstall and reinstall and I request permission again to external storage. Then call the method import above. The toast message again is seen &quot;Database Restored..&quot; but I don't see the database content that existed before. I tested on android 7 device and android 10 device.\nI will appreciate help. Thanks.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":6347,"reputation":6694,"user_id":10638,"accept_rate":67,"display_name":"DJ."},"score":1,"creation_date":1593384146,"post_id":62628725,"comment_id":110754588,"body_markdown":"Be careful with the description of the type. In MySQL `datetime` is a type where it will store the value without timezone information and you need to know which timezone to use to store/retrieve it, while `timestamp` will always stored the value in the database as UTC and you can be flexible with which timezone is use to store or retrieve the value.","body":"Be careful with the description of the type. In MySQL <code>datetime</code> is a type where it will store the value without timezone information and you need to know which timezone to use to store/retrieve it, while <code>timestamp</code> will always stored the value in the database as UTC and you can be flexible with which timezone is use to store or retrieve the value."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1593431960,"post_id":62628725,"comment_id":110770090,"body_markdown":"See also [Is java.sql.Timestamp timezone specific?](https://stackoverflow.com/questions/14070572/is-java-sql-timestamp-timezone-specific)","body":"See also <a href=\"https://stackoverflow.com/questions/14070572/is-java-sql-timestamp-timezone-specific\">Is java.sql.Timestamp timezone specific?</a>"}],"answers":[{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1593410658,"post_id":62628813,"comment_id":110760045,"body_markdown":"`OffsetDateTime` is more appropriate here than `ZonedDateTime`. And `OffsetDateTime` can be directly sent to the database, so no need for the troubled legacy class `java.sql.Timestamp`.","body":"<code>OffsetDateTime</code> is more appropriate here than <code>ZonedDateTime</code>. And <code>OffsetDateTime</code> can be directly sent to the database, so no need for the troubled legacy class <code>java.sql.Timestamp</code>."},{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":1,"creation_date":1635153264,"post_id":62628813,"comment_id":123209919,"body_markdown":"Saved my day even after getting time in utc by Instant.now wasn&#39;t getting way to put that in SQLQuery","body":"Saved my day even after getting time in utc by Instant.now wasn&#39;t getting way to put that in SQLQuery"}],"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1593386266,"creation_date":1593382734,"answer_id":62628813,"question_id":62628725,"body_markdown":"&gt; Q) How can I obtain the timestamp in UTC\r\n\r\nDo it as follows:\r\n\r\n\tZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;Etc/UTC&quot;));\r\n\tTimestamp timestamp = Timestamp.valueOf(zdt.toLocalDateTime());\r\n\r\n**Notes:** \r\n\r\n 1. Since you want to work with a timestamp, I recommend you change the field type to `TIMESTAMP`. Check [this](https://stackoverflow.com/questions/409286/should-i-use-the-datetime-or-timestamp-data-type-in-mysql) for more details.\r\n 2. Stop using the outdated `java.util` date-time API and switch to [modern date-time API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html).","title":"How to insert timestamp in UTC","body":"<blockquote>\n<p>Q) How can I obtain the timestamp in UTC</p>\n</blockquote>\n<p>Do it as follows:</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;Etc/UTC&quot;));\nTimestamp timestamp = Timestamp.valueOf(zdt.toLocalDateTime());\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ol>\n<li>Since you want to work with a timestamp, I recommend you change the field type to <code>TIMESTAMP</code>. Check <a href=\"https://stackoverflow.com/questions/409286/should-i-use-the-datetime-or-timestamp-data-type-in-mysql\">this</a> for more details.</li>\n<li>Stop using the outdated <code>java.util</code> date-time API and switch to <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"noreferrer\">modern date-time API</a>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593386540,"creation_date":1593386540,"answer_id":62629254,"question_id":62628725,"body_markdown":"You can let MySQL to insert a timestamp using this column definition\r\n\r\n    CREATE TABLE SOME_TABLE_NAME (\r\n         SOME_COLUMN_NAME TIMESTAMP default CURRENT_TIMESTAMP\r\n    );","title":"How to insert timestamp in UTC","body":"<p>You can let MySQL to insert a timestamp using this column definition</p>\n<pre><code>CREATE TABLE SOME_TABLE_NAME (\n     SOME_COLUMN_NAME TIMESTAMP default CURRENT_TIMESTAMP\n);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1593432051,"post_id":62632112,"comment_id":110770138,"body_markdown":"JDBC only defines support for `java.time.OffsetDateTime` on `TIMESTAMP WITH TIME ZONE` columns. Have you verified if `getObject(.., OffsetDateTime.class)` works in this case?","body":"JDBC only defines support for <code>java.time.OffsetDateTime</code> on <code>TIMESTAMP WITH TIME ZONE</code> columns. Have you verified if <code>getObject(.., OffsetDateTime.class)</code> works in this case?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1593448415,"post_id":62632112,"comment_id":110779067,"body_markdown":"@MarkRotteveel As I said three times in the Answer, the database in the Question is using the wrong data type in MySQL.","body":"@MarkRotteveel As I said three times in the Answer, the database in the Question is using the wrong data type in MySQL."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1593410789,"creation_date":1593410416,"answer_id":62632112,"question_id":62628725,"body_markdown":"# tl;dr\r\n\r\nYou have the wrong data type in MySQL, and the wrong class in Java.\r\n\r\n - Write to a column of type [`TIMESTAMP`][1] rather than `DATETIME`.\r\n - Use [`java.time.OffsetDateTime`][2] rather than `java.sql.Timestamp`. \r\n\r\nExample code snippet.\r\n\r\n    myPreparedStatement\r\n    .setObject( \r\n        ‚Ä¶ ,                       // Specify which placeholder `?` to fill-in.\r\n        OffsetDateTime            // JDBC 4.2 and later requires a JDBC driver support exchanging `java.time.OffsetDateTime` objects with the database.\r\n        .now( ZoneOffset.UTC )    // Capture the current moment as seen in UTC (an offset of zero hours-minutes-seconds). \r\n    )\r\n    \r\n\r\n# Wrong data type in MySQL\r\n\r\n&gt;The assumption is that the timestamp is in UTC\r\n\r\nDo you understand that [`DATETIME`][1] in MySQL is *not* in UTC? That type in MySQL has no concept of time zone nor offset-from-UTC. \r\n\r\nIf you are tracking moments, specific points on the timeline, you have the wrong data type in MySQL. You should be using `TIMESTAMP` to track moments in MySQL. \r\n\r\n# Wrong Java classes\r\n\r\nYou are using *terrible* date-time classes that were bundled with the earliest versions of Java. Those classes were supplanted by the modern *java.time* classes in Java 8 and later, as defined in JSR 310. Never use the `java.sql.Timestamp` class.\r\n\r\nTo get the current moment in UTC, use `Instant`.\r\n\r\n    Instant instant = Instant.now() ;\r\n\r\nDefine your column in MySQL as type `TIMESTAMP`. \r\n\r\nYou *may* be able to write an `Instant` via your JDBC driver. However, JDBC 4.2 requires support for `OffsetDateTime` but oddly omits required support for `Instant`. No matter, we can easily convert.\r\n\r\n    OffsetDateTime odt = instant.atOffset( ZoneOffset.UTC ) ;\r\n\r\nWrite that to the database using your JDBC driver compliant with JDBC 4.2 or later, through a prepared statement.\r\n\r\n    myPreparedStatement.setObject( ‚Ä¶ , odt ) ;\r\n\r\nRetrieval.\r\n\r\n    OffsetDateTime odt = myResultSet.getObject( ‚Ä¶ , OffsetDateTime.class ) ;\r\n\r\n# Time zone problem eliminated\r\n\r\nIf you follow the code seen here you will have no time zone problems. \r\n\r\n - None of this code depends on the JVM‚Äôs current default time zone. \r\n - None of this code depends on the database server‚Äôs current default time zone.\r\n\r\n\r\n----------\r\n\r\n\r\n[![Table of date-time types in Java (both legacy and modern) and in standard SQL][3]][3]\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes. Hibernate 5 &amp; JPA 2.2 support *java.time*. \r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the *java.time* classes.\r\n  - For earlier Android (&lt;26), the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above). See [*How to use ThreeTenABP‚Ä¶*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/refman/8.0/en/datetime.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/OffsetDateTime.html\r\n  [3]: https://i.stack.imgur.com/bXtIS.png","title":"How to insert timestamp in UTC","body":"<h1>tl;dr</h1>\n<p>You have the wrong data type in MySQL, and the wrong class in Java.</p>\n<ul>\n<li>Write to a column of type <a href=\"https://dev.mysql.com/doc/refman/8.0/en/datetime.html\" rel=\"noreferrer\"><code>TIMESTAMP</code></a> rather than <code>DATETIME</code>.</li>\n<li>Use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"noreferrer\"><code>java.time.OffsetDateTime</code></a> rather than <code>java.sql.Timestamp</code>.</li>\n</ul>\n<p>Example code snippet.</p>\n<pre><code>myPreparedStatement\n.setObject( \n    ‚Ä¶ ,                       // Specify which placeholder `?` to fill-in.\n    OffsetDateTime            // JDBC 4.2 and later requires a JDBC driver support exchanging `java.time.OffsetDateTime` objects with the database.\n    .now( ZoneOffset.UTC )    // Capture the current moment as seen in UTC (an offset of zero hours-minutes-seconds). \n)\n</code></pre>\n<h1>Wrong data type in MySQL</h1>\n<blockquote>\n<p>The assumption is that the timestamp is in UTC</p>\n</blockquote>\n<p>Do you understand that <a href=\"https://dev.mysql.com/doc/refman/8.0/en/datetime.html\" rel=\"noreferrer\"><code>DATETIME</code></a> in MySQL is <em>not</em> in UTC? That type in MySQL has no concept of time zone nor offset-from-UTC.</p>\n<p>If you are tracking moments, specific points on the timeline, you have the wrong data type in MySQL. You should be using <code>TIMESTAMP</code> to track moments in MySQL.</p>\n<h1>Wrong Java classes</h1>\n<p>You are using <em>terrible</em> date-time classes that were bundled with the earliest versions of Java. Those classes were supplanted by the modern <em>java.time</em> classes in Java 8 and later, as defined in JSR 310. Never use the <code>java.sql.Timestamp</code> class.</p>\n<p>To get the current moment in UTC, use <code>Instant</code>.</p>\n<pre><code>Instant instant = Instant.now() ;\n</code></pre>\n<p>Define your column in MySQL as type <code>TIMESTAMP</code>.</p>\n<p>You <em>may</em> be able to write an <code>Instant</code> via your JDBC driver. However, JDBC 4.2 requires support for <code>OffsetDateTime</code> but oddly omits required support for <code>Instant</code>. No matter, we can easily convert.</p>\n<pre><code>OffsetDateTime odt = instant.atOffset( ZoneOffset.UTC ) ;\n</code></pre>\n<p>Write that to the database using your JDBC driver compliant with JDBC 4.2 or later, through a prepared statement.</p>\n<pre><code>myPreparedStatement.setObject( ‚Ä¶ , odt ) ;\n</code></pre>\n<p>Retrieval.</p>\n<pre><code>OffsetDateTime odt = myResultSet.getObject( ‚Ä¶ , OffsetDateTime.class ) ;\n</code></pre>\n<h1>Time zone problem eliminated</h1>\n<p>If you follow the code seen here you will have no time zone problems.</p>\n<ul>\n<li>None of this code depends on the JVM‚Äôs current default time zone.</li>\n<li>None of this code depends on the database server‚Äôs current default time zone.</li>\n</ul>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/bXtIS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bXtIS.png\" alt=\"Table of date-time types in Java (both legacy and modern) and in standard SQL\" /></a></p>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes. Hibernate 5 &amp; JPA 2.2 support <em>java.time</em>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a></li>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a></li>\n<li>Later versions of Android bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP‚Ä¶</em></a>.</li>\n</ul>\n"}],"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7695,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":62628813,"answer_count":3,"score":5,"last_activity_date":1694170228,"creation_date":1593382004,"question_id":62628725,"body_markdown":"My partial table definition (MySQL) looks as follows:\r\n\r\n    +-----------+----------+------+-----+---------+----------------+\r\n    | Field     | Type     | Null | Key | Default | Extra          |\r\n    +-----------+----------+------+-----+---------+----------------+\r\n    | ...       | ...      | ..   | ... | ...     | ...            |\r\n    | timestamp | datetime | YES  |     | NULL    |                |\r\n    | ...       | ...      | ..   | ... | ...     | ...            |\r\n    +-----------+----------+------+-----+---------+----------------+\r\n\r\nI want to update the timestamp field using JDBC.  The assumption is that the timestamp is in **UTC**.\r\n\r\nIn my Java code I am obtaining the timestamp field as follows:\r\n\r\n    Timestamp datetime = new Timestamp(new Date().getTime());\r\n\t\t\t\r\n\r\nThe documentation for the [java.util.Date][1] states that:  \r\n\r\n&gt; Although the Date class is intended to reflect coordinated universal\r\n&gt; time (UTC), it may not do so exactly, depending on the host\r\n&gt; environment of the Java Virtual Machine.\r\n\r\nUnfortunately on my Windows 10 environment (java version &quot;1.8.0_231&quot;), the Date object reflects my local timezone.  As a result the timestamp that gets added to the database is for the local timezone, not UTC.\r\n\r\nHow can I obtain the timestamp in UTC, so that the correct value is added to the database?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Date.html","title":"How to insert timestamp in UTC","body":"<p>My partial table definition (MySQL) looks as follows:</p>\n<pre><code>+-----------+----------+------+-----+---------+----------------+\n| Field     | Type     | Null | Key | Default | Extra          |\n+-----------+----------+------+-----+---------+----------------+\n| ...       | ...      | ..   | ... | ...     | ...            |\n| timestamp | datetime | YES  |     | NULL    |                |\n| ...       | ...      | ..   | ... | ...     | ...            |\n+-----------+----------+------+-----+---------+----------------+\n</code></pre>\n<p>I want to update the timestamp field using JDBC.  The assumption is that the timestamp is in <strong>UTC</strong>.</p>\n<p>In my Java code I am obtaining the timestamp field as follows:</p>\n<pre><code>Timestamp datetime = new Timestamp(new Date().getTime());\n        \n</code></pre>\n<p>The documentation for the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\">java.util.Date</a> states that:</p>\n<blockquote>\n<p>Although the Date class is intended to reflect coordinated universal\ntime (UTC), it may not do so exactly, depending on the host\nenvironment of the Java Virtual Machine.</p>\n</blockquote>\n<p>Unfortunately on my Windows 10 environment (java version &quot;1.8.0_231&quot;), the Date object reflects my local timezone.  As a result the timestamp that gets added to the database is for the local timezone, not UTC.</p>\n<p>How can I obtain the timestamp in UTC, so that the correct value is added to the database?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","websecurity"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1694225625,"post_id":77063640,"comment_id":135867449,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77063640/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25181104,"reputation":21,"user_id":19022598,"display_name":"Lakshan Jayathilake"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694169992,"creation_date":1694136029,"answer_id":77063640,"question_id":76723051,"body_markdown":"You can add default formLogin using this way(Spring 6.0),\r\n\r\n```java\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n    return http\r\n            .csrf(csrf -&gt; csrf.disable())\r\n            .authorizeHttpRequests(auth -&gt; {\r\n                auth.requestMatchers(&quot;/&quot;).permitAll();\r\n                auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\r\n                auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\r\n            })\r\n            .formLogin(Customizer.withDefaults())\r\n            .build();\r\n}\r\n```","title":"How to formLogin() since WebSecurityConfigurerAdapter is deprecated","body":"<p>You can add default formLogin using this way(Spring 6.0),</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n    return http\n            .csrf(csrf -&gt; csrf.disable())\n            .authorizeHttpRequests(auth -&gt; {\n                auth.requestMatchers(&quot;/&quot;).permitAll();\n                auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\n                auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\n            })\n            .formLogin(Customizer.withDefaults())\n            .build();\n}\n</code></pre>\n"}],"owner":{"account_id":28568371,"reputation":45,"user_id":21870939,"display_name":"L&#233;andre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":677,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694169992,"creation_date":1689781322,"question_id":76723051,"body_markdown":"I&#39;m trying to test spring security. With WebSecurityConfigurerAdapter deprecated, I have some difficulties. I&#39;d like to display the default connection form, previously displayed using .formLogin().\r\n\r\nHere&#39;s my code:\r\n\r\n```\r\npackage projet.auth.login.configuration;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.Customizer;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n    @Bean\r\n    public InMemoryUserDetailsManager userDetailsManager(){\r\n        UserDetails user = User\r\n                .withUsername(&quot;user&quot;)\r\n                .password(passwordEncoder().encode(&quot;password&quot;))\r\n                .roles(&quot;ADMIN&quot;)\r\n                .build();\r\n\r\n        UserDetails admin = User\r\n                .withUsername(&quot;admin&quot;)\r\n                .password(passwordEncoder().encode(&quot;password&quot;))\r\n                .roles(&quot;ADMIN&quot;)\r\n                .build();\r\n\r\n        return new InMemoryUserDetailsManager(user, admin);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n        return http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(auth -&gt; {\r\n                    auth.requestMatchers(&quot;/&quot;).permitAll();\r\n                    auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\r\n                    auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\r\n                })\r\n                .httpBasic(Customizer.withDefaults())\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nand \r\nthe rest controller for testing the different user\r\n\r\n\r\n```\r\npackage projet.auth.login.controller;\r\n\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class LoginController {\r\n\r\n\r\n    @RequestMapping(&quot;/&quot;)\r\n    public String getRandom()\r\n    {\r\n        return &quot;Welcome to this web-app&quot;;\r\n    }\r\n\r\n    @RequestMapping(&quot;/user&quot;)\r\n    public String getUser()\r\n    {\r\n        return &quot;Welcome User&quot;;\r\n    }\r\n\r\n\r\n    @RequestMapping(&quot;/admin&quot;)\r\n    public String getAdmin()\r\n    {\r\n        return &quot;Welcome Admin&quot;;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nHow can i do that ?\r\nCause i can&#39;t connect the users i created.\r\n\r\nThanks for the help !","title":"How to formLogin() since WebSecurityConfigurerAdapter is deprecated","body":"<p>I'm trying to test spring security. With WebSecurityConfigurerAdapter deprecated, I have some difficulties. I'd like to display the default connection form, previously displayed using .formLogin().</p>\n<p>Here's my code:</p>\n<pre><code>package projet.auth.login.configuration;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public InMemoryUserDetailsManager userDetailsManager(){\n        UserDetails user = User\n                .withUsername(&quot;user&quot;)\n                .password(passwordEncoder().encode(&quot;password&quot;))\n                .roles(&quot;ADMIN&quot;)\n                .build();\n\n        UserDetails admin = User\n                .withUsername(&quot;admin&quot;)\n                .password(passwordEncoder().encode(&quot;password&quot;))\n                .roles(&quot;ADMIN&quot;)\n                .build();\n\n        return new InMemoryUserDetailsManager(user, admin);\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n        return http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/&quot;).permitAll();\n                    auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\n                    auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\n                })\n                .httpBasic(Customizer.withDefaults())\n                .build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n\n\n</code></pre>\n<p>and\nthe rest controller for testing the different user</p>\n<pre><code>package projet.auth.login.controller;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class LoginController {\n\n\n    @RequestMapping(&quot;/&quot;)\n    public String getRandom()\n    {\n        return &quot;Welcome to this web-app&quot;;\n    }\n\n    @RequestMapping(&quot;/user&quot;)\n    public String getUser()\n    {\n        return &quot;Welcome User&quot;;\n    }\n\n\n    @RequestMapping(&quot;/admin&quot;)\n    public String getAdmin()\n    {\n        return &quot;Welcome Admin&quot;;\n    }\n\n}\n\n</code></pre>\n<p>How can i do that ?\nCause i can't connect the users i created.</p>\n<p>Thanks for the help !</p>\n"},{"tags":["java","android","database","firebase","real-time"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615182834,"creation_date":1615178873,"answer_id":66524436,"question_id":66524321,"body_markdown":"The first time you access the Firebase Realtime Database from your code, the SDK has to establish a connection to the server. This involves multiple steps, which are only needed upon establishing the first connection. This explains why the first connection may take some time, and indeed it is not uncommon for it to take one of more seconds.\r\n\r\nThere is nothing you can do in code to improve the actual connection speed. That is up your bandwidth and latency (which I assume you&#39;re not interested in changing), and the SDK and server (which you can&#39;t change).\r\n\r\nAll you can do is start connecting as early as possible in your app&#39;s lifecycle, instead of waiting with it until you need to firs read/write data. For example, consider adding a listener to `.info/connected` when your app first starts.","title":"Firebase real-time database latency","body":"<p>The first time you access the Firebase Realtime Database from your code, the SDK has to establish a connection to the server. This involves multiple steps, which are only needed upon establishing the first connection. This explains why the first connection may take some time, and indeed it is not uncommon for it to take one of more seconds.</p>\n<p>There is nothing you can do in code to improve the actual connection speed. That is up your bandwidth and latency (which I assume you're not interested in changing), and the SDK and server (which you can't change).</p>\n<p>All you can do is start connecting as early as possible in your app's lifecycle, instead of waiting with it until you need to firs read/write data. For example, consider adding a listener to <code>.info/connected</code> when your app first starts.</p>\n"},{"tags":[],"owner":{"account_id":9954091,"reputation":3,"user_id":7365661,"display_name":"Jay R"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615181936,"creation_date":1615181936,"answer_id":66524805,"question_id":66524321,"body_markdown":"True, \r\nhi vj Shandilya to my knowledge, the initial connection ought to take a tad longer than expected as this was the case while my team and I were working on an IoT based project linked with firebase and Android-Java.\r\n\r\nMaybe you can add, a custom (not intense) progress animation to cover up for the 2 sec. ","title":"Firebase real-time database latency","body":"<p>True,\nhi vj Shandilya to my knowledge, the initial connection ought to take a tad longer than expected as this was the case while my team and I were working on an IoT based project linked with firebase and Android-Java.</p>\n<p>Maybe you can add, a custom (not intense) progress animation to cover up for the 2 sec.</p>\n"},{"tags":[],"owner":{"account_id":13210775,"reputation":999,"user_id":9541096,"display_name":"Owais Yosuf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694169776,"creation_date":1694169776,"answer_id":77066205,"question_id":66524321,"body_markdown":"**Reason:** It is because at very first instance, firebase need to establish a connection between your app and firebase server. It will always delay by few seconds.\r\n\r\n**Solution:** Establish a connection on app start. Once the first activity is loaded, establish a firebase connection inside `onCreate()` of MainActivity.java or the other activity that gets loaded first.","title":"Firebase real-time database latency","body":"<p><strong>Reason:</strong> It is because at very first instance, firebase need to establish a connection between your app and firebase server. It will always delay by few seconds.</p>\n<p><strong>Solution:</strong> Establish a connection on app start. Once the first activity is loaded, establish a firebase connection inside <code>onCreate()</code> of MainActivity.java or the other activity that gets loaded first.</p>\n"}],"owner":{"account_id":20897303,"reputation":11,"user_id":15351178,"display_name":"vj Shandilya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":450,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1694169776,"creation_date":1615177838,"question_id":66524321,"body_markdown":"I am using firebase real-time database for my app. It&#39;s great but I am facing a delay of some seconds during writing data from the app to firebase for the very first time. Means every time when I starts the app it takes a time of 2 seconds to send data to firebase. And after that it works fine with great speed. I know this isn&#39;t a big delay by any aspects but in my case I seriously needed the data transfer and fetching instantly. Is there any way to reduce this delay ? Thanks in advance.","title":"Firebase real-time database latency","body":"<p>I am using firebase real-time database for my app. It's great but I am facing a delay of some seconds during writing data from the app to firebase for the very first time. Means every time when I starts the app it takes a time of 2 seconds to send data to firebase. And after that it works fine with great speed. I know this isn't a big delay by any aspects but in my case I seriously needed the data transfer and fetching instantly. Is there any way to reduce this delay ? Thanks in advance.</p>\n"},{"tags":["java","generics","extends","super"],"answers":[{"comments":[{"owner":{"account_id":6868391,"reputation":1588,"user_id":5279855,"accept_rate":32,"display_name":"Auro"},"score":0,"creation_date":1571337788,"post_id":58420944,"comment_id":103217583,"body_markdown":"Could you please elaborate what you meant by **The compiler must reject a ClassA as an argument to add because the type parameter could be inferred as ClassB**?","body":"Could you please elaborate what you meant by <b>The compiler must reject a ClassA as an argument to add because the type parameter could be inferred as ClassB</b>?"},{"owner":{"account_id":6868391,"reputation":1588,"user_id":5279855,"accept_rate":32,"display_name":"Auro"},"score":1,"creation_date":1571338142,"post_id":58420944,"comment_id":103217739,"body_markdown":"I am not understanding the point of using a lower-bound type parameter if the method in the class is going to accept only those that are of lower-bound class or subtype of that.","body":"I am not understanding the point of using a lower-bound type parameter if the method in the class is going to accept only those that are of lower-bound class or subtype of that."},{"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"score":0,"creation_date":1571339238,"post_id":58420944,"comment_id":103218205,"body_markdown":"Please see [What is PECS?](https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super).  A method that takes a parameter typed as a generic type parameter, which is in turn defined with `? super` is guaranteed to be able to accept an argument typed as the lower bound or lower.  Here, the `add` method is only guaranteed to be able to accept an argument of type `ClassB` or lower, not matter what the actual type parameter is.","body":"Please see <a href=\"https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super\">What is PECS?</a>.  A method that takes a parameter typed as a generic type parameter, which is in turn defined with <code>? super</code> is guaranteed to be able to accept an argument typed as the lower bound or lower.  Here, the <code>add</code> method is only guaranteed to be able to accept an argument of type <code>ClassB</code> or lower, not matter what the actual type parameter is."}],"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571256284,"creation_date":1571256284,"answer_id":58420944,"question_id":58420734,"body_markdown":"The `? super` clause is a lower-bound wildcard.  But the bound is on the type parameter that is inferred, not a restriction on the types of arguments that can be passed to a method that takes a parameter of that generic type.\r\n\r\nWhen you say `&lt;? super ClassB&gt;`, you indicate that the type parameter can be `ClassB` or any supertype, e.g. `ClassA` or `Object`.\r\n\r\nThe compiler must treat the `add` method as if it could be any of these signatures:\r\n\r\n    add(Object t)\r\n    add(ClassA t)\r\n    add(ClassB t)\r\n\r\n(There could be other types if `ClassA` inherited directly from another class instead of `Object`).\r\n\r\nThe compiler must reject a `ClassA` as an argument to `add` because the type parameter could be inferred as `ClassB`.  It&#39;s legal to assign a `GenericMethod&lt;ClassB&gt;` to your `genericMethod` variable.\r\n\r\n    GenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;ClassB&gt;();\r\n\r\nBut it doesn&#39;t make sense to be able to pass a `ClassA` to a method that expects a `ClassB`.\r\n\r\nIn fact that is what is inferred by the diamond operator - `ClassB`.\r\n\r\nYour confusion is in the conflation of two concepts: what type parameters are allowed and what types of objects are allowed in methods that use a type parameter.  Using a wildcard restricts the type parameter, but the method still accepts types that are the type parameter or a subtype.","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>The <code>? super</code> clause is a lower-bound wildcard.  But the bound is on the type parameter that is inferred, not a restriction on the types of arguments that can be passed to a method that takes a parameter of that generic type.</p>\n\n<p>When you say <code>&lt;? super ClassB&gt;</code>, you indicate that the type parameter can be <code>ClassB</code> or any supertype, e.g. <code>ClassA</code> or <code>Object</code>.</p>\n\n<p>The compiler must treat the <code>add</code> method as if it could be any of these signatures:</p>\n\n<pre><code>add(Object t)\nadd(ClassA t)\nadd(ClassB t)\n</code></pre>\n\n<p>(There could be other types if <code>ClassA</code> inherited directly from another class instead of <code>Object</code>).</p>\n\n<p>The compiler must reject a <code>ClassA</code> as an argument to <code>add</code> because the type parameter could be inferred as <code>ClassB</code>.  It's legal to assign a <code>GenericMethod&lt;ClassB&gt;</code> to your <code>genericMethod</code> variable.</p>\n\n<pre><code>GenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;ClassB&gt;();\n</code></pre>\n\n<p>But it doesn't make sense to be able to pass a <code>ClassA</code> to a method that expects a <code>ClassB</code>.</p>\n\n<p>In fact that is what is inferred by the diamond operator - <code>ClassB</code>.</p>\n\n<p>Your confusion is in the conflation of two concepts: what type parameters are allowed and what types of objects are allowed in methods that use a type parameter.  Using a wildcard restricts the type parameter, but the method still accepts types that are the type parameter or a subtype.</p>\n"},{"tags":[],"owner":{"account_id":7739868,"reputation":731,"user_id":5860073,"display_name":"boot-and-bonnet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571256947,"creation_date":1571256947,"answer_id":58421083,"question_id":58420734,"body_markdown":"By declaring `GenericMethod&lt;? super ClassB&gt;` you are declaring the type is an unknown type that is a super-class of ClassB (or ClassB itself). And asking the compiler to only allow subtypes of this unknown type to be added to the list.\r\n\r\nThe only compatible subtypes the compiler knows are ClassB and any subtypes of ClassB. When creating instances, it is usually better to avoid wildcards.\r\n\r\nFor method parameters, wildcards give you more flexibility on what can be accepted. Use `PECS` (producer=extends, consumer=super) to determine which to use.\r\n[See Slide 5](https://www.oracle.com/technetwork/server-storage/ts-5217-159242.pdf)\r\n\r\n\r\n\r\n","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>By declaring <code>GenericMethod&lt;? super ClassB&gt;</code> you are declaring the type is an unknown type that is a super-class of ClassB (or ClassB itself). And asking the compiler to only allow subtypes of this unknown type to be added to the list.</p>\n\n<p>The only compatible subtypes the compiler knows are ClassB and any subtypes of ClassB. When creating instances, it is usually better to avoid wildcards.</p>\n\n<p>For method parameters, wildcards give you more flexibility on what can be accepted. Use <code>PECS</code> (producer=extends, consumer=super) to determine which to use.\n<a href=\"https://www.oracle.com/technetwork/server-storage/ts-5217-159242.pdf\" rel=\"nofollow noreferrer\">See Slide 5</a></p>\n"},{"tags":[],"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694169638,"creation_date":1694118043,"answer_id":77062639,"question_id":58420734,"body_markdown":"I admit that it is a bit counterintuitive, but from the point of view of the compiler, it makes sense.\r\n\r\nSuppose you define a list in this way:\r\n\r\n    List&lt;? super ClassB&gt; myList;\r\n\r\nAnd you got\r\n\r\n    ClassB extends ClassA;\r\n    ClassC extends ClassA;\r\n\r\nCould you do ?\r\n\r\n    ClassA a = new ClassC();\r\n    myList.add (a);//does not compile\r\n\r\nNo, by several reasons. First because finally, at runtime, the parametrized type becomes a **concrete** and **single** type. So, in practice you **cannot mix** ClassA objects with ClassB objects.\r\n\r\nAnd second, because the compiler **must check** that whatever **you insert is casteable** to **ClassB**. So, only adding a ClassB object (or a subtype of him), fulfil the contract. **But the opposite is not always true!** A ClassA object could no be a super type of ClassB.\r\n\r\n&gt; I.e. the object &quot;a&quot; is actually a ClassC object!\r\n\r\nThat is why  you cannot add a supertype. So it only lets you add ClassB objects -or subtypes-\r\n\r\nIf you cast the object &quot;a&quot; to ClassB, would be compile, but will fail at runtime getting a *ClassCastException*:\r\n\r\n\r\n    ClassA a = new ClassC();\r\n    myList.add((ClassB) a); //Compiles but fails at runtime\r\n\r\nAt the same time, the wildcard combined with super, can be used as a formal parameter of a method. I.e.:\r\n\r\n    void printValues (List&lt;? super ClassB&gt; list)\r\n\r\nThis way permits generelize the treatment of super ClassB collections, making possible this calls:\r\n\r\n    List&lt;Object&gt; lo;\r\n    List&lt;ClassA&gt; la;\r\n    ...\r\n    printValues (lo);\r\n    printValues (la);\r\n\r\nIn this case, the definition using wildcards like &lt;? super ClassB&gt;, makes a little more sense. \r\n\r\n    ","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>I admit that it is a bit counterintuitive, but from the point of view of the compiler, it makes sense.</p>\n<p>Suppose you define a list in this way:</p>\n<pre><code>List&lt;? super ClassB&gt; myList;\n</code></pre>\n<p>And you got</p>\n<pre><code>ClassB extends ClassA;\nClassC extends ClassA;\n</code></pre>\n<p>Could you do ?</p>\n<pre><code>ClassA a = new ClassC();\nmyList.add (a);//does not compile\n</code></pre>\n<p>No, by several reasons. First because finally, at runtime, the parametrized type becomes a <strong>concrete</strong> and <strong>single</strong> type. So, in practice you <strong>cannot mix</strong> ClassA objects with ClassB objects.</p>\n<p>And second, because the compiler <strong>must check</strong> that whatever <strong>you insert is casteable</strong> to <strong>ClassB</strong>. So, only adding a ClassB object (or a subtype of him), fulfil the contract. <strong>But the opposite is not always true!</strong> A ClassA object could no be a super type of ClassB.</p>\n<blockquote>\n<p>I.e. the object &quot;a&quot; is actually a ClassC object!</p>\n</blockquote>\n<p>That is why  you cannot add a supertype. So it only lets you add ClassB objects -or subtypes-</p>\n<p>If you cast the object &quot;a&quot; to ClassB, would be compile, but will fail at runtime getting a <em>ClassCastException</em>:</p>\n<pre><code>ClassA a = new ClassC();\nmyList.add((ClassB) a); //Compiles but fails at runtime\n</code></pre>\n<p>At the same time, the wildcard combined with super, can be used as a formal parameter of a method. I.e.:</p>\n<pre><code>void printValues (List&lt;? super ClassB&gt; list)\n</code></pre>\n<p>This way permits generelize the treatment of super ClassB collections, making possible this calls:</p>\n<pre><code>List&lt;Object&gt; lo;\nList&lt;ClassA&gt; la;\n...\nprintValues (lo);\nprintValues (la);\n</code></pre>\n<p>In this case, the definition using wildcards like &lt;? super ClassB&gt;, makes a little more sense.</p>\n"}],"owner":{"account_id":6868391,"reputation":1588,"user_id":5279855,"accept_rate":32,"display_name":"Auro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":815,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1694169638,"creation_date":1571255376,"question_id":58420734,"body_markdown":"I was going through [this][1] article to understand the role of `super` wildcard in generics. I understood how `extends` works, but I am having difficulty understanding `super`\r\n\r\nI have a `ClassA` that is **extended** by `ClassB`, making `ClassA` super class of `ClassB`.\r\n\r\nIf I understood the article correctly, the `&lt;? super ClassB&gt;` would allow any Class that is a super type of `ClassB`.\r\n\r\nI have the following code\r\n\r\n**GenericMethod.java**\r\n\r\n    public class GenericMethod&lt;T&gt; {\r\n    \r\n    \tprivate List&lt;T&gt; list;\r\n    \t\r\n    \tpublic GenericMethod() {\r\n    \t\tlist = new ArrayList&lt;&gt;();\r\n    \t}\r\n    \t\r\n    \tpublic void add(T t) {\r\n    \t\tlist.add(t);\r\n    \t}\r\n    \t\r\n    \tpublic T get(int index) {\r\n    \t\treturn list.get(index);\r\n    \t}\r\n    }\r\n\r\n\r\n**Driver.java**\r\n\r\n    public class Driver {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tGenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;&gt;();\r\n    \t\t\r\n    \t\tClassA classA = new ClassA();\r\n    \t\tgenericMethod.add(classA); // Compile-time error here\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n**Error**\r\n\r\n`The method add(capture#1-of ? super ClassB) in the type GenericMethod&lt;capture#1-of ? super ClassB&gt; is not applicable for the arguments (ClassA)`\r\n\r\n\r\nI don&#39;t understand where I am going wrong. When I instantiated the `GenericMethod` class, I already declared that it would accept any value that is a **super type** of `ClassB` with the declaration `&lt;? super ClassB&gt;`. Thus, the `T` inside the `GenericMethod` class should accept all classes that `ClassB` extends. \r\n\r\nWhy does the `add` method throw the compile-time error then? Shouldn&#39;t the method `add` already know that it&#39;s being passed a perfectly compatible type?\r\n\r\n  [1]: https://www.codejava.net/java-core/collections/generics-with-extends-and-super-wildcards-and-the-get-and-put-principle\r\n","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>I was going through <a href=\"https://www.codejava.net/java-core/collections/generics-with-extends-and-super-wildcards-and-the-get-and-put-principle\" rel=\"nofollow noreferrer\">this</a> article to understand the role of <code>super</code> wildcard in generics. I understood how <code>extends</code> works, but I am having difficulty understanding <code>super</code></p>\n\n<p>I have a <code>ClassA</code> that is <strong>extended</strong> by <code>ClassB</code>, making <code>ClassA</code> super class of <code>ClassB</code>.</p>\n\n<p>If I understood the article correctly, the <code>&lt;? super ClassB&gt;</code> would allow any Class that is a super type of <code>ClassB</code>.</p>\n\n<p>I have the following code</p>\n\n<p><strong>GenericMethod.java</strong></p>\n\n<pre><code>public class GenericMethod&lt;T&gt; {\n\n    private List&lt;T&gt; list;\n\n    public GenericMethod() {\n        list = new ArrayList&lt;&gt;();\n    }\n\n    public void add(T t) {\n        list.add(t);\n    }\n\n    public T get(int index) {\n        return list.get(index);\n    }\n}\n</code></pre>\n\n<p><strong>Driver.java</strong></p>\n\n<pre><code>public class Driver {\n\n    public static void main(String[] args) {\n\n        GenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;&gt;();\n\n        ClassA classA = new ClassA();\n        genericMethod.add(classA); // Compile-time error here\n\n    }\n\n}\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<p><code>The method add(capture#1-of ? super ClassB) in the type GenericMethod&lt;capture#1-of ? super ClassB&gt; is not applicable for the arguments (ClassA)</code></p>\n\n<p>I don't understand where I am going wrong. When I instantiated the <code>GenericMethod</code> class, I already declared that it would accept any value that is a <strong>super type</strong> of <code>ClassB</code> with the declaration <code>&lt;? super ClassB&gt;</code>. Thus, the <code>T</code> inside the <code>GenericMethod</code> class should accept all classes that <code>ClassB</code> extends. </p>\n\n<p>Why does the <code>add</code> method throw the compile-time error then? Shouldn't the method <code>add</code> already know that it's being passed a perfectly compatible type?</p>\n"},{"tags":["java","selenium-webdriver","testing","automation"],"owner":{"account_id":19703137,"reputation":1,"user_id":14425450,"display_name":"Prabhat Ranjan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694169621,"answer_count":0,"score":0,"last_activity_date":1694169503,"creation_date":1694169503,"question_id":77066177,"body_markdown":"I am trying to create Hybrid framework in POM with Java and selenium. but when i am trying to execute my test case it i throwing &quot;java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.get(String)&quot; because &quot;com.TestCase.loginPageTest.driver&quot; is null&quot;\r\nI ahve declared my driver as public static but still my issue occurs again. I am sharing my project structure and code snipets. please note i am using seleium 4.11 and my chrome version is 116[[[enter image description here](https://i.stack.imgur.com/x4Yd6.png)](https://i.stack.imgur.com/Nog8I.png)](https://i.stack.imgur.com/JriaM.png)\r\n\r\n\r\nCan abyone can guide me how to resolve. PLease feel free to connect","title":"Java Selenium throwing java.lang.NullPointerException:","body":"<p>I am trying to create Hybrid framework in POM with Java and selenium. but when i am trying to execute my test case it i throwing &quot;java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.get(String)&quot; because &quot;com.TestCase.loginPageTest.driver&quot; is null&quot;\nI ahve declared my driver as public static but still my issue occurs again. I am sharing my project structure and code snipets. please note i am using seleium 4.11 and my chrome version is 116[[<a href=\"https://i.stack.imgur.com/x4Yd6.png\" rel=\"nofollow noreferrer\">enter image description here</a>](<a href=\"https://i.stack.imgur.com/Nog8I.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/Nog8I.png</a>)](<a href=\"https://i.stack.imgur.com/JriaM.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/JriaM.png</a>)</p>\n<p>Can abyone can guide me how to resolve. PLease feel free to connect</p>\n"},{"tags":["java","byte-buddy"],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694169032,"creation_date":1620370919,"answer_id":67430341,"question_id":67428004,"body_markdown":"You&#39;d need to disable the caching of the `Method` instance as with:\r\n\r\n    @Origin(cache = false)\r\n\r\nfor this, but this makes the call rather expensive. If you just want to stringify the method instance to begin with rather use `@Origin String method` which does not need caching anyway\r\n\r\nWhen redefining, you should use `.disableClassFormatChanges()`.","title":"Unable to obtain Method in Byte Buddy Interceptor","body":"<p>You'd need to disable the caching of the <code>Method</code> instance as with:</p>\n<pre><code>@Origin(cache = false)\n</code></pre>\n<p>for this, but this makes the call rather expensive. If you just want to stringify the method instance to begin with rather use <code>@Origin String method</code> which does not need caching anyway</p>\n<p>When redefining, you should use <code>.disableClassFormatChanges()</code>.</p>\n"}],"owner":{"account_id":237719,"reputation":1310,"user_id":506114,"accept_rate":65,"display_name":"Walter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67430341,"answer_count":1,"score":1,"last_activity_date":1694169032,"creation_date":1620352098,"question_id":67428004,"body_markdown":"When I add:\r\n\r\n  \r\n\r\n    @Origin Method method\r\n\r\nto my interceptor:\r\n\r\n\r\n    @RuntimeType\r\n      public static void intercept(\r\n          @Origin Method method, @RuntimeType @AllArguments Object[] allArguments) {\r\n        System.out.println(&quot;intercepted with args: &quot; + Arrays.toString(allArguments));\r\n        System.out.println(&quot;intercepted method: &quot; + method);\r\n      }\r\n\r\n\r\nI end up with an exception:\r\n\r\n    Error invoking java.lang.instrument.Instrumentation#retransformClasses\r\n    class redefinition failed: attempted to change the schema (add/remove fields)\r\n\r\n\r\nMy setup looks like this:\r\n\r\n    ByteBuddyAgent.install();\r\n        final ByteBuddy byteBuddy = new ByteBuddy();\r\n    \r\n        byteBuddy\r\n            .redefine(ByteBuddyFoo.class)\r\n            .method(ElementMatchers.named(&quot;anotherMethod&quot;).or(ElementMatchers.named(&quot;toString&quot;)))\r\n            .intercept(MethodDelegation.to(MethodInterceptor.class))\r\n            .make()\r\n            .load(ByteBuddyFoo.class.getClassLoader(), ClassReloadingStrategy.fromInstalledAgent());\r\n\r\n\r\nAnd my simple POJO is:\r\n\r\n    public class ByteBuddyFoo {\r\n      @Override\r\n      public String toString() {\r\n        return &quot;ByteBuddyFoo{}&quot;;\r\n      }\r\n    \r\n      public void anotherMethod(final String input) {\r\n        System.out.println(&quot;input from anotherMethod: &quot; + input);\r\n      }\r\n    }\r\n\r\n\r\nWhen my interceptor doesn&#39;t have @Origin Method method in it, it intercepts calls just fine; however, as soon as I add that back, it throws the above exception.\r\n\r\nI&#39;d like to be able to intercept any method call that I&#39;d like and have access to both the Method, its arguments, and result.  Originally, I was doing this through AspectJ; however, I want to be able to do this at runtime so my code doesn&#39;t need to be modified.","title":"Unable to obtain Method in Byte Buddy Interceptor","body":"<p>When I add:</p>\n<pre><code>@Origin Method method\n</code></pre>\n<p>to my interceptor:</p>\n<pre><code>@RuntimeType\n  public static void intercept(\n      @Origin Method method, @RuntimeType @AllArguments Object[] allArguments) {\n    System.out.println(&quot;intercepted with args: &quot; + Arrays.toString(allArguments));\n    System.out.println(&quot;intercepted method: &quot; + method);\n  }\n</code></pre>\n<p>I end up with an exception:</p>\n<pre><code>Error invoking java.lang.instrument.Instrumentation#retransformClasses\nclass redefinition failed: attempted to change the schema (add/remove fields)\n</code></pre>\n<p>My setup looks like this:</p>\n<pre><code>ByteBuddyAgent.install();\n    final ByteBuddy byteBuddy = new ByteBuddy();\n\n    byteBuddy\n        .redefine(ByteBuddyFoo.class)\n        .method(ElementMatchers.named(&quot;anotherMethod&quot;).or(ElementMatchers.named(&quot;toString&quot;)))\n        .intercept(MethodDelegation.to(MethodInterceptor.class))\n        .make()\n        .load(ByteBuddyFoo.class.getClassLoader(), ClassReloadingStrategy.fromInstalledAgent());\n</code></pre>\n<p>And my simple POJO is:</p>\n<pre><code>public class ByteBuddyFoo {\n  @Override\n  public String toString() {\n    return &quot;ByteBuddyFoo{}&quot;;\n  }\n\n  public void anotherMethod(final String input) {\n    System.out.println(&quot;input from anotherMethod: &quot; + input);\n  }\n}\n</code></pre>\n<p>When my interceptor doesn't have @Origin Method method in it, it intercepts calls just fine; however, as soon as I add that back, it throws the above exception.</p>\n<p>I'd like to be able to intercept any method call that I'd like and have access to both the Method, its arguments, and result.  Originally, I was doing this through AspectJ; however, I want to be able to do this at runtime so my code doesn't need to be modified.</p>\n"},{"tags":["java","android","firebase-realtime-database","android-recyclerview"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1694086726,"post_id":77058090,"comment_id":135846516,"body_markdown":"So most likely `currentUserName` is `null`, right? When you want to perform the comparation.","body":"So most likely <code>currentUserName</code> is <code>null</code>, right? When you want to perform the comparation."},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694091945,"post_id":77058090,"comment_id":135847650,"body_markdown":"Yes, as I have explained in detail in my question that whenever I am trying to do login with the fake(not real email) email address the app crashes and current username at this point is null, and when I launch the app again in my device (not from Android studio), it goes to main activity because login was successful, and now the current user is empty but not null. And it ignores to exclude the current user from the list so current user also display in the recyclerView list.","body":"Yes, as I have explained in detail in my question that whenever I am trying to do login with the fake(not real email) email address the app crashes and current username at this point is null, and when I launch the app again in my device (not from Android studio), it goes to main activity because login was successful, and now the current user is empty but not null. And it ignores to exclude the current user from the list so current user also display in the recyclerView list."},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694092598,"post_id":77058090,"comment_id":135847812,"body_markdown":"and when I sign in with the Google account it works perfectly.","body":"and when I sign in with the Google account it works perfectly."}],"answers":[{"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694155962,"creation_date":1694155962,"answer_id":77064740,"question_id":77058090,"body_markdown":"This is the code that I was using before:\r\n\r\n    if (!currentUserId.equals(users.getUserId())){\r\n                        list.add(users);\r\n                    }\r\n\r\nhere I was trying to get the user ID from the user model object but it wasn&#39;t providing me the ID, and it was actually the wrong approach for me.\r\n\r\nand this is the code that is working for me and excluding the current user from the list whether it is a real Google account or a fake email.\r\n\r\n      if (!currentUserId.equals(childKey)){\r\n                        list.add(users);\r\n                    }\r\n\r\nhere child key is the:\r\n\r\n    String childKey = dataSnapshot.getKey();\r\n\r\nThis actually gives me a user id as a key in every iteration of the loop and hence I used this for comparison and it is working smoothly. \r\n\r\n","title":"When Logging in with fake/template email app crashes and when logging in with actual google email it doesn&#39;t crash","body":"<p>This is the code that I was using before:</p>\n<pre><code>if (!currentUserId.equals(users.getUserId())){\n                    list.add(users);\n                }\n</code></pre>\n<p>here I was trying to get the user ID from the user model object but it wasn't providing me the ID, and it was actually the wrong approach for me.</p>\n<p>and this is the code that is working for me and excluding the current user from the list whether it is a real Google account or a fake email.</p>\n<pre><code>  if (!currentUserId.equals(childKey)){\n                    list.add(users);\n                }\n</code></pre>\n<p>here child key is the:</p>\n<pre><code>String childKey = dataSnapshot.getKey();\n</code></pre>\n<p>This actually gives me a user id as a key in every iteration of the loop and hence I used this for comparison and it is working smoothly.</p>\n"},{"tags":[],"owner":{"account_id":13210775,"reputation":999,"user_id":9541096,"display_name":"Owais Yosuf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694168867,"creation_date":1694168867,"answer_id":77066104,"question_id":77058090,"body_markdown":"Try:\r\n\r\n    reference.addValueForSingleEventListener();\r\ninstead of:\r\n\r\n    reference.addValueEventListener();","title":"When Logging in with fake/template email app crashes and when logging in with actual google email it doesn&#39;t crash","body":"<p>Try:</p>\n<pre><code>reference.addValueForSingleEventListener();\n</code></pre>\n<p>instead of:</p>\n<pre><code>reference.addValueEventListener();\n</code></pre>\n"}],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694168867,"creation_date":1694077154,"question_id":77058090,"body_markdown":"I have a Firebase database where I have stored the credentials through signup and Google sign-in. When I am signing in through real Google email it goes smoothly and also it doesn&#39;t show the current user in the recyclerView list. However, when I try to log in through the fake/template email that I used to sign up (haven&#39;t implemented any verification so far that&#39;s why able to sign up through the fake ones) - and password of that account then app crashes and it closes. when i see the logcat it says this:\r\n\r\n    FATAL EXCEPTION: main\r\n                                                                                                \r\n\r\n    Process: com.sarmadali.chatmingle, PID: 13483\r\n\tjava.lang.NullPointerException: Attempt to invoke virtual method &#39;boolean java.lang.String.equals(java.lang.Object)&#39; on a null object reference\r\n\t\tat com.sarmadali.chatmingle.Fragments.ChatsFragment$1.onDataChange(ChatsFragment.java:74)\r\n\t\tat com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\r\n\t\tat com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\r\n\t\tat com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\r\n\t\tat android.os.Handler.handleCallback(Handler.java:883)\r\n\t\tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n\t\tat android.os.Looper.loop(Looper.java:264)\r\n\t\tat android.app.ActivityThread.main(ActivityThread.java:7684)\r\n\t\tat java.lang.reflect.Method.invoke(Native Method)\r\n\t\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n\t\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:980)\r\n\r\n\r\n\r\nand the null object which it is referring is caused by this:\r\n\r\n \r\n\r\n    String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\r\n     //to not add current user in the list\r\n    //users is the Model\r\n                        if (!currentUserName.equals(users.getUserName())){\r\n                            list.add(users);\r\n                        }\r\n\r\nMy first concern is that when I was signing in with the Google account it didn&#39;t through NullPointerException and when I logged in with the fake emails and passwords that are actually in the real-time database it throughs the NullPointerException, and hence it crashed the app. \r\n\r\nI have also applied this: \r\n\r\n   \r\n\r\n    Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\r\n\r\nAs a result that i noticed that when logged in with the Google account it returns the username, but when I try to log in with the fake credentials (means that the email actually doesn&#39;t exist but I have set the username, email, and password through signup) Now these credentials are also in the firebase database, - it crashes the app and when I re-launched the app from my physical device the logs display username as empty not as null.\r\nit shows the main activity(only allowed after login) and it includes the current user in the RecyclerView List as well. means it ignores that code when I again launch the app. Doesn&#39;t really get it why? because it is null? then it should crash again?\r\n\r\n    //to not add current user in the list\r\n                        if (!currentUserName.equals(users.getUserName())){\r\n                            list.add(users);\r\n                        }\r\n\r\n**It is the complete code of setting data on recyclerview and excluding the current user.**\r\n\r\n    reference = firebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\r\n    \r\n            reference.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n    \r\n                    list.clear();\r\n    \r\n                    String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\r\n    \r\n                    for (DataSnapshot dataSnapshot : snapshot.getChildren()) {\r\n    \r\n                        Users users = dataSnapshot.getValue(Users.class);\r\n    \r\n                        Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\r\n    \r\n                        //to not add current user in the list\r\n                        if (!currentUserName.equals(users.getUserName())){\r\n                            list.add(users);\r\n                        }\r\n    \r\n                    }\r\n    \r\n                    chatAdapter.notifyDataSetChanged();\r\n                }\r\n\r\nIf you need any other information ask me.\r\n\r\n**UPDATE**\r\n\r\n     Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\r\n\r\nI have tried this and changed the comparison from userName to userId.\r\nAs a result of the above Log, I have got to know that now, the current user ID is always being displayed when it is the fake one and the Other user&#39;s ID is null. and due to this reason it is ignoring to exclude the current user from the list. And some times it shows the ids of other users too that of the real google accounts.\r\n\r\n&gt; users.getUserId()\r\n\r\ndoesn&#39;t seem to get the user id for all the user, don&#39;t know why?\r\n\r\nI changed some code  \r\n\r\n    if (users.getUserId() != null){\r\n             Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\r\n      //to not add current user in the list\r\n               if (!currentUserId.equals(users.getUserId())){\r\n                            list.add(users);\r\n                        }\r\n                   }\r\n\r\nFrom the above code i just getting the current user id from the below code not others.\r\n\r\n&gt; users.getUserId()\r\n\r\n\r\n\r\nHere is the picture of the database, there might be a problem with it that i am not getting. \r\n\r\nHere the user that contain profile pic are signed in with google and the other one is fake email address that don&#39;t exist. Let me know if i am doing something wrong in the code that don&#39;t has proper effect on this database. \r\nand the rules are read and write &quot;true&quot;.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nidSM.png","title":"When Logging in with fake/template email app crashes and when logging in with actual google email it doesn&#39;t crash","body":"<p>I have a Firebase database where I have stored the credentials through signup and Google sign-in. When I am signing in through real Google email it goes smoothly and also it doesn't show the current user in the recyclerView list. However, when I try to log in through the fake/template email that I used to sign up (haven't implemented any verification so far that's why able to sign up through the fake ones) - and password of that account then app crashes and it closes. when i see the logcat it says this:</p>\n<pre><code>FATAL EXCEPTION: main\n                                                                                            \n\nProcess: com.sarmadali.chatmingle, PID: 13483\njava.lang.NullPointerException: Attempt to invoke virtual method 'boolean java.lang.String.equals(java.lang.Object)' on a null object reference\n    at com.sarmadali.chatmingle.Fragments.ChatsFragment$1.onDataChange(ChatsFragment.java:74)\n    at com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\n    at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\n    at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\n    at android.os.Handler.handleCallback(Handler.java:883)\n    at android.os.Handler.dispatchMessage(Handler.java:100)\n    at android.os.Looper.loop(Looper.java:264)\n    at android.app.ActivityThread.main(ActivityThread.java:7684)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:980)\n</code></pre>\n<p>and the null object which it is referring is caused by this:</p>\n<pre><code>String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\n //to not add current user in the list\n//users is the Model\n                    if (!currentUserName.equals(users.getUserName())){\n                        list.add(users);\n                    }\n</code></pre>\n<p>My first concern is that when I was signing in with the Google account it didn't through NullPointerException and when I logged in with the fake emails and passwords that are actually in the real-time database it throughs the NullPointerException, and hence it crashed the app.</p>\n<p>I have also applied this:</p>\n<pre><code>Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\n</code></pre>\n<p>As a result that i noticed that when logged in with the Google account it returns the username, but when I try to log in with the fake credentials (means that the email actually doesn't exist but I have set the username, email, and password through signup) Now these credentials are also in the firebase database, - it crashes the app and when I re-launched the app from my physical device the logs display username as empty not as null.\nit shows the main activity(only allowed after login) and it includes the current user in the RecyclerView List as well. means it ignores that code when I again launch the app. Doesn't really get it why? because it is null? then it should crash again?</p>\n<pre><code>//to not add current user in the list\n                    if (!currentUserName.equals(users.getUserName())){\n                        list.add(users);\n                    }\n</code></pre>\n<p><strong>It is the complete code of setting data on recyclerview and excluding the current user.</strong></p>\n<pre><code>reference = firebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\n\n        reference.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n\n                list.clear();\n\n                String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\n\n                for (DataSnapshot dataSnapshot : snapshot.getChildren()) {\n\n                    Users users = dataSnapshot.getValue(Users.class);\n\n                    Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\n\n                    //to not add current user in the list\n                    if (!currentUserName.equals(users.getUserName())){\n                        list.add(users);\n                    }\n\n                }\n\n                chatAdapter.notifyDataSetChanged();\n            }\n</code></pre>\n<p>If you need any other information ask me.</p>\n<p><strong>UPDATE</strong></p>\n<pre><code> Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\n</code></pre>\n<p>I have tried this and changed the comparison from userName to userId.\nAs a result of the above Log, I have got to know that now, the current user ID is always being displayed when it is the fake one and the Other user's ID is null. and due to this reason it is ignoring to exclude the current user from the list. And some times it shows the ids of other users too that of the real google accounts.</p>\n<blockquote>\n<p>users.getUserId()</p>\n</blockquote>\n<p>doesn't seem to get the user id for all the user, don't know why?</p>\n<p>I changed some code</p>\n<pre><code>if (users.getUserId() != null){\n         Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\n  //to not add current user in the list\n           if (!currentUserId.equals(users.getUserId())){\n                        list.add(users);\n                    }\n               }\n</code></pre>\n<p>From the above code i just getting the current user id from the below code not others.</p>\n<blockquote>\n<p>users.getUserId()</p>\n</blockquote>\n<p>Here is the picture of the database, there might be a problem with it that i am not getting.</p>\n<p>Here the user that contain profile pic are signed in with google and the other one is fake email address that don't exist. Let me know if i am doing something wrong in the code that don't has proper effect on this database.\nand the rules are read and write &quot;true&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/nidSM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nidSM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","file","transactions","apache-commons"],"answers":[{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694168387,"creation_date":1694168387,"answer_id":77066050,"question_id":77012489,"body_markdown":"To make it happen transactionally,you could copy the entire file and then delete from source location.If we directly try to move the file,its contents could get corrupted in case of failure and hence rollback won&#39;t help.\r\n```\r\npublic static void moveFiles() throws Exception {\r\n\r\n            Path source = Paths.get(&quot;C:\\\\sourced\\\\A.txt&quot;);\r\n            Path destination = Paths.get(&quot;C:\\\\destination&quot;,source.getFileName().toString());\r\n            Path fileToBeDeleted = source;\r\n            try {\r\n                Files.createFile(destination);\r\n                Files.copy(source, destination, StandardCopyOption.COPY_ATTRIBUTES);\r\n            }catch (Exception e){\r\n                logger.log(Level.WARNING,&quot;Error while copyingFile to destination&quot;);\r\n                fileToBeDeleted = destination;\r\n            }finally {\r\n                try {\r\n                    Files.deleteIfExists(fileToBeDeleted);\r\n                }catch (Exception e){\r\n                    logger.log(Level.SEVERE,&quot;File not deleted from source/destination&quot;);\r\n                    throw new IllegalStateException(&quot;Error while deleting file in source/destination &quot;+fileToBeDeleted);\r\n                }\r\n            }\r\n\r\n    }\r\n```\r\nThe above implementation was done using `java.nio` package.You could use apache utilities for file operations [ApacheFileUtil](https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%C2%A0java.io.File))","title":"Apache Transactions : How to move the files transactionally","body":"<p>To make it happen transactionally,you could copy the entire file and then delete from source location.If we directly try to move the file,its contents could get corrupted in case of failure and hence rollback won't help.</p>\n<pre><code>public static void moveFiles() throws Exception {\n\n            Path source = Paths.get(&quot;C:\\\\sourced\\\\A.txt&quot;);\n            Path destination = Paths.get(&quot;C:\\\\destination&quot;,source.getFileName().toString());\n            Path fileToBeDeleted = source;\n            try {\n                Files.createFile(destination);\n                Files.copy(source, destination, StandardCopyOption.COPY_ATTRIBUTES);\n            }catch (Exception e){\n                logger.log(Level.WARNING,&quot;Error while copyingFile to destination&quot;);\n                fileToBeDeleted = destination;\n            }finally {\n                try {\n                    Files.deleteIfExists(fileToBeDeleted);\n                }catch (Exception e){\n                    logger.log(Level.SEVERE,&quot;File not deleted from source/destination&quot;);\n                    throw new IllegalStateException(&quot;Error while deleting file in source/destination &quot;+fileToBeDeleted);\n                }\n            }\n\n    }\n</code></pre>\n<p>The above implementation was done using <code>java.nio</code> package.You could use apache utilities for file operations <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%C2%A0java.io.File)\" rel=\"nofollow noreferrer\">ApacheFileUtil</a></p>\n"}],"owner":{"account_id":23224662,"reputation":11,"user_id":17316353,"display_name":"Kaarthikeyan K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694168387,"creation_date":1693448175,"question_id":77012489,"body_markdown":"Use case:\r\nNeed to move a file from one location to another location in a transactional way.If the operation fails,the appropriate operation must be rolled back.\r\n\r\nI&#39;ve chosen Apache Commons Transaction lib.\r\n\r\nI tried to use moveResource function from FileResourceManager,below is my code.\r\n\r\nCode:\r\n``` \r\n\r\n    public static void moveFiles() throws ResourceManagerException {\r\n    \t\tFileResourceManager fileResourceManager=null;\r\n    \t\tString txId = null;\r\n    \t\ttry {\r\n    \t\t\tString workDir = &quot;D:\\\\source&quot;;\r\n    \t\t\tString storeDir = &quot;D:\\\\destination&quot;;\r\n    \r\n    \t\t\tfileResourceManager = new FileResourceManager(storeDir, workDir, false, LOGGER_FACADE,true);\r\n    \r\n    \t\t\tfileResourceManager.start();\r\n    \t\t\ttxId = fileResourceManager.generatedUniqueTxId();\r\n    \t\t\tfileResourceManager.startTransaction(txId);\r\n    \r\n    \t\t\tfileResourceManager.moveResource(txId,workDir,storeDir,true);\r\n    \r\n    \t\t\tfileResourceManager.commitTransaction(txId);\r\n    \t\t\t//if any exception arises rollback\r\n    \t\t} catch (ResourceManagerException resourceManagerException) {\r\n    \t\t\tfileResourceManager.rollbackTransaction(txId);\r\n    \t\t\tresourceManagerException.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    Is it a right way to move files ? , below is my source directory (where file present) and destination directory (where file needs to be moved)\r\n[![source and destination directories][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oS6x5.png","title":"Apache Transactions : How to move the files transactionally","body":"<p>Use case:\nNeed to move a file from one location to another location in a transactional way.If the operation fails,the appropriate operation must be rolled back.</p>\n<p>I've chosen Apache Commons Transaction lib.</p>\n<p>I tried to use moveResource function from FileResourceManager,below is my code.</p>\n<p>Code:</p>\n<pre><code>\n    public static void moveFiles() throws ResourceManagerException {\n            FileResourceManager fileResourceManager=null;\n            String txId = null;\n            try {\n                String workDir = &quot;D:\\\\source&quot;;\n                String storeDir = &quot;D:\\\\destination&quot;;\n    \n                fileResourceManager = new FileResourceManager(storeDir, workDir, false, LOGGER_FACADE,true);\n    \n                fileResourceManager.start();\n                txId = fileResourceManager.generatedUniqueTxId();\n                fileResourceManager.startTransaction(txId);\n    \n                fileResourceManager.moveResource(txId,workDir,storeDir,true);\n    \n                fileResourceManager.commitTransaction(txId);\n                //if any exception arises rollback\n            } catch (ResourceManagerException resourceManagerException) {\n                fileResourceManager.rollbackTransaction(txId);\n                resourceManagerException.printStackTrace();\n            }\n        }\n    \n    Is it a right way to move files ? , below is my source directory (where file present) and destination directory (where file needs to be moved)\n[![source and destination directories][1]][1]\n\n\n  [1]: https://i.stack.imgur.com/oS6x5.png\n</code></pre>\n"},{"tags":["java","docker","apache-kafka","redpanda"],"comments":[{"owner":{"account_id":2005971,"reputation":536,"user_id":1795860,"accept_rate":91,"display_name":"TheNytangel"},"score":0,"creation_date":1693971242,"post_id":77048389,"comment_id":135828507,"body_markdown":"The dockerfile you linked only includes exposing port 8080 of the conduktor-platform container. Have you tried to expose port 9021?","body":"The dockerfile you linked only includes exposing port 8080 of the conduktor-platform container. Have you tried to expose port 9021?"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694019911,"creation_date":1694019911,"answer_id":77053995,"question_id":77048389,"body_markdown":"Unclear what you mean &quot;preconfigured&quot;. The file in the link doesn&#39;t run any broker, only Postgres database and Conduktor console container. \r\n\r\nIf you want to run RedPanda, you need to edit that compose file rather than immediately `up` it.\r\n\r\nIf RedPanda broker is running in an existing container, then you still  need to modify the Compose file to [add networks](https://docs.docker.com/compose/networking/) so that `redpanda-1` is a known DNS address. \r\n\r\n&gt; cannot seem to access this in my Java Producer/Consumer application\r\n\r\nRelated - https://stackoverflow.com/questions/51630260/connect-to-kafka-running-in-docker","title":"How do you connect your Java Producer to a preconfigured Kafka in Red Panda?","body":"<p>Unclear what you mean &quot;preconfigured&quot;. The file in the link doesn't run any broker, only Postgres database and Conduktor console container.</p>\n<p>If you want to run RedPanda, you need to edit that compose file rather than immediately <code>up</code> it.</p>\n<p>If RedPanda broker is running in an existing container, then you still  need to modify the Compose file to <a href=\"https://docs.docker.com/compose/networking/\" rel=\"nofollow noreferrer\">add networks</a> so that <code>redpanda-1</code> is a known DNS address.</p>\n<blockquote>\n<p>cannot seem to access this in my Java Producer/Consumer application</p>\n</blockquote>\n<p>Related - <a href=\"https://stackoverflow.com/questions/51630260/connect-to-kafka-running-in-docker\">Connect to Kafka running in Docker</a></p>\n"},{"tags":[],"owner":{"account_id":81772,"reputation":4274,"user_id":230415,"accept_rate":60,"display_name":"Dunith Dhanushka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694079375,"creation_date":1694079375,"answer_id":77058371,"question_id":77048389,"body_markdown":"Your question, &quot;*..preconfigured Kafka in Red Panda..*&quot;, implies that you haven&#39;t understood the relationship between Kafka, Redpanda, and Conduktor.\r\n\r\nRedpanda is a streaming data platform similar to Kafka, sharing the same read/write APIs, and has an entirely different architecture. Therefore, Redpanda is a drop-in replacement for Apache Kafka workloads if you are looking for more performance and cost-efficiency. You can connect your existing client applications to Redpanda as if they are connecting to Kafka because they share the same API interface. \r\n\r\nConduktor is a Developer Experience platform for Kafka, helping developers to debug and administer their Kafka clusters. I think the Conduktor Console has an embedded Redpanda container to make things simpler for beginners.\r\n\r\nTo solve your connectivity issue, make sure you edit the docker-compose file and expose port 9201 where the Redpanda container is going to bind.\r\n\r\nIf you want to test Redpanda in isolation, you can try out their quickstart guide on Docker. https://docs.redpanda.com/22.3/get-started/quick-start/\r\n","title":"How do you connect your Java Producer to a preconfigured Kafka in Red Panda?","body":"<p>Your question, &quot;<em>..preconfigured Kafka in Red Panda..</em>&quot;, implies that you haven't understood the relationship between Kafka, Redpanda, and Conduktor.</p>\n<p>Redpanda is a streaming data platform similar to Kafka, sharing the same read/write APIs, and has an entirely different architecture. Therefore, Redpanda is a drop-in replacement for Apache Kafka workloads if you are looking for more performance and cost-efficiency. You can connect your existing client applications to Redpanda as if they are connecting to Kafka because they share the same API interface.</p>\n<p>Conduktor is a Developer Experience platform for Kafka, helping developers to debug and administer their Kafka clusters. I think the Conduktor Console has an embedded Redpanda container to make things simpler for beginners.</p>\n<p>To solve your connectivity issue, make sure you edit the docker-compose file and expose port 9201 where the Redpanda container is going to bind.</p>\n<p>If you want to test Redpanda in isolation, you can try out their quickstart guide on Docker. <a href=\"https://docs.redpanda.com/22.3/get-started/quick-start/\" rel=\"nofollow noreferrer\">https://docs.redpanda.com/22.3/get-started/quick-start/</a></p>\n"}],"owner":{"account_id":13343493,"reputation":443,"user_id":9631005,"display_name":"Rigo Sarmiento"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1694168001,"creation_date":1693960128,"question_id":77048389,"body_markdown":"I&#39;m learning Kafka via Conduktor. I ran this command on their get-started page:\r\n\r\n&gt;curl -L https://releases.conduktor.io/console -o docker-compose.yml &amp;&amp; docker compose up -d --wait &amp;&amp; echo &quot;Conduktor started on http://localhost:8080&quot;\r\n\r\nNow when I visit the console and view the connection, I see it has a bootstrap server of redpanda-1:9021\r\n\r\nWhat confuses me is I cannot seem to access this in my Java Producer/Consumer application. It just simply cannot find it. I assume it is because it is in a container?\r\n\r\n**EDIT:** Already voted to close. Yep, I asked this question with minimal understanding of Kafka, and was just hoping to be able to use the &quot;preconfigured kafka&quot; inside Conduktor for immediate use in a Java App. All good now. Thank you all for your answers.","title":"How do you connect your Java Producer to a preconfigured Kafka in Red Panda?","body":"<p>I'm learning Kafka via Conduktor. I ran this command on their get-started page:</p>\n<blockquote>\n<p>curl -L <a href=\"https://releases.conduktor.io/console\" rel=\"nofollow noreferrer\">https://releases.conduktor.io/console</a> -o docker-compose.yml &amp;&amp; docker compose up -d --wait &amp;&amp; echo &quot;Conduktor started on http://localhost:8080&quot;</p>\n</blockquote>\n<p>Now when I visit the console and view the connection, I see it has a bootstrap server of redpanda-1:9021</p>\n<p>What confuses me is I cannot seem to access this in my Java Producer/Consumer application. It just simply cannot find it. I assume it is because it is in a container?</p>\n<p><strong>EDIT:</strong> Already voted to close. Yep, I asked this question with minimal understanding of Kafka, and was just hoping to be able to use the &quot;preconfigured kafka&quot; inside Conduktor for immediate use in a Java App. All good now. Thank you all for your answers.</p>\n"},{"tags":["java","postgresql","hibernate","h2"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694151961,"post_id":77064387,"comment_id":135856223,"body_markdown":"To be open to use UserTypes for more than one column?","body":"To be open to use UserTypes for more than one column?"}],"answers":[{"tags":[],"owner":{"account_id":29386274,"reputation":51,"user_id":22515654,"display_name":"Klajd Bakalli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694167915,"creation_date":1694167915,"answer_id":77065995,"question_id":77064387,"body_markdown":"The reason an array of strings &quot;names&quot; is used in this Hibernate method even when only one name is expected is because Hibernate designed a consistent method signature that can handle both simple cases with one name and more complex cases with multiple names.\r\n\r\nIf you want only one below is an example:\r\n \r\n`String columnName = names[0];`\r\n\r\n","title":"Hibernate 5 UserType","body":"<p>The reason an array of strings &quot;names&quot; is used in this Hibernate method even when only one name is expected is because Hibernate designed a consistent method signature that can handle both simple cases with one name and more complex cases with multiple names.</p>\n<p>If you want only one below is an example:</p>\n<p><code>String columnName = names[0];</code></p>\n"}],"owner":{"account_id":29320823,"reputation":1,"user_id":22464474,"display_name":"Dumidu Fernando"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694167915,"creation_date":1694151650,"question_id":77064387,"body_markdown":"    @Override\r\n        public Object nullSafeGet(ResultSet rs, String[] names, SharedSessionContractImplementor session, Object owner)\r\n                throws HibernateException {\r\n            try {\r\n                Object dbResult = rs.getObject(names[0]);\r\n                if (dbResult != null) {\r\n\r\nwhen using Hibernate 5 to convert JSON to Java JSON object  in UserType class method `public Object nullSafeGet(ResultSet rs, String[] names‚Ä¶`  \r\n-&gt; why is an array of `String`s `names` used here when just one name is coming?\r\n","title":"Hibernate 5 UserType","body":"<pre><code>@Override\n    public Object nullSafeGet(ResultSet rs, String[] names, SharedSessionContractImplementor session, Object owner)\n            throws HibernateException {\n        try {\n            Object dbResult = rs.getObject(names[0]);\n            if (dbResult != null) {\n</code></pre>\n<p>when using Hibernate 5 to convert JSON to Java JSON object  in UserType class method <code>public Object nullSafeGet(ResultSet rs, String[] names‚Ä¶</code><br />\n-&gt; why is an array of <code>String</code>s <code>names</code> used here when just one name is coming?</p>\n"},{"tags":["java","spring","spring-boot","rest","junit"],"answers":[{"comments":[{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1635435229,"post_id":69754412,"comment_id":123303313,"body_markdown":"Thank you for the answer, this is a more simplified example, but `null` scares me - it&#39;s not really readable. Do you know, are there any other methods that don&#39;t require unnecessary params and in particular the body?","body":"Thank you for the answer, this is a more simplified example, but <code>null</code> scares me - it&#39;s not really readable. Do you know, are there any other methods that don&#39;t require unnecessary params and in particular the body?"}],"tags":[],"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635425392,"creation_date":1635425392,"answer_id":69754412,"question_id":69754324,"body_markdown":"Two things you could improve:\r\n\r\n 1. Don&#39;t provide a request entity ‚Äì it is marked as `@Nullable`\r\n 2. Use `Void.class` as return type to express that you don&#39;t expect any response body\r\n\r\n```lang-java\r\nResponseEntity&lt;Void&gt; resp = restTemplate.exchange(url, HttpMethod.DELETE, null, Void.class);\r\n```","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>Two things you could improve:</p>\n<ol>\n<li>Don't provide a request entity ‚Äì it is marked as <code>@Nullable</code></li>\n<li>Use <code>Void.class</code> as return type to express that you don't expect any response body</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>ResponseEntity&lt;Void&gt; resp = restTemplate.exchange(url, HttpMethod.DELETE, null, Void.class);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1635435297,"post_id":69754595,"comment_id":123303354,"body_markdown":"Thank you, it&#39;s much more readable compared with my example.","body":"Thank you, it&#39;s much more readable compared with my example."}],"tags":[],"owner":{"account_id":3486535,"reputation":2623,"user_id":2917326,"display_name":"Matt Fowler"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635426152,"creation_date":1635426152,"answer_id":69754595,"question_id":69754324,"body_markdown":"Instead of passing in `new HttpEntity&lt;&gt;(&quot;&quot;)` `HttpEntity` has a special class variable you can use called `HttpEntity.EMPTY` for these situations. You can also use a return type of void.\r\n\r\n    ResponseEntity&lt;Void&gt; resp = template.exchange(url, HttpMethod.DELETE, HttpEntity.EMPTY, Void.class);\r\n","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>Instead of passing in <code>new HttpEntity&lt;&gt;(&quot;&quot;)</code> <code>HttpEntity</code> has a special class variable you can use called <code>HttpEntity.EMPTY</code> for these situations. You can also use a return type of void.</p>\n<pre><code>ResponseEntity&lt;Void&gt; resp = template.exchange(url, HttpMethod.DELETE, HttpEntity.EMPTY, Void.class);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1635434861,"post_id":69754752,"comment_id":123303131,"body_markdown":"Thank you for the answer. But in that case, I can‚Äôt check exact status == 204 (no content)","body":"Thank you for the answer. But in that case, I can‚Äôt check exact status == 204 (no content)"},{"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"score":0,"creation_date":1635453754,"post_id":69754752,"comment_id":123310119,"body_markdown":"@Shailendra AFAIK `TestRestTemplate` does not throw any exceptions like `RestTemplate` does.","body":"@Shailendra AFAIK <code>TestRestTemplate</code> does not throw any exceptions like <code>RestTemplate</code> does."},{"owner":{"account_id":1550597,"reputation":8924,"user_id":1443084,"display_name":"Shailendra"},"score":0,"creation_date":1635487260,"post_id":69754752,"comment_id":123316362,"body_markdown":"@slauth can you post the class for TestRestTemplate. Since you are using similar methods exposed by RestTemplate I am assuming it is something which extends RestTemplate or is it some custom implementation you have developed","body":"@slauth can you post the class for TestRestTemplate. Since you are using similar methods exposed by RestTemplate I am assuming it is something which extends RestTemplate or is it some custom implementation you have developed"},{"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"score":0,"creation_date":1635489291,"post_id":69754752,"comment_id":123316891,"body_markdown":"@Shailendra [TestRestTemplate](https://github.com/spring-projects/spring-boot/blob/v2.5.6/spring-boot-project/spring-boot-test/src/main/java/org/springframework/boot/test/web/client/TestRestTemplate.java) is a wrapper around `RestTemplate` which sets a [NoOpResponseErrorHandler](https://github.com/spring-projects/spring-boot/blob/v2.5.6/spring-boot-project/spring-boot-test/src/main/java/org/springframework/boot/test/web/client/TestRestTemplate.java#L1034-L1040) on the wrapped `RestTemplate`.","body":"@Shailendra <a href=\"https://github.com/spring-projects/spring-boot/blob/v2.5.6/spring-boot-project/spring-boot-test/src/main/java/org/springframework/boot/test/web/client/TestRestTemplate.java\" rel=\"nofollow noreferrer\">TestRestTemplate</a> is a wrapper around <code>RestTemplate</code> which sets a <a href=\"https://github.com/spring-projects/spring-boot/blob/v2.5.6/spring-boot-project/spring-boot-test/src/main/java/org/springframework/boot/test/web/client/TestRestTemplate.java#L1034-L1040\" rel=\"nofollow noreferrer\">NoOpResponseErrorHandler</a> on the wrapped <code>RestTemplate</code>."}],"tags":[],"owner":{"account_id":1550597,"reputation":8924,"user_id":1443084,"display_name":"Shailendra"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635427247,"creation_date":1635426803,"answer_id":69754752,"question_id":69754324,"body_markdown":"Others have given different options but if you want to use the the `delete` method - it internally handles the http error by throwing runtime error as you can see [here][1]. You can check for `HttpClientErrorException` or `HttpServerErrorException` by using [`assertDoesNotThrow`][2] from JUnit5\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/5ea1cf532e08dbc9c79670040bb825d69878cf85/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L159\r\n  [2]: https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertDoesNotThrow(org.junit.jupiter.api.function.Executable)","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>Others have given different options but if you want to use the the <code>delete</code> method - it internally handles the http error by throwing runtime error as you can see <a href=\"https://github.com/spring-projects/spring-framework/blob/5ea1cf532e08dbc9c79670040bb825d69878cf85/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L159\" rel=\"nofollow noreferrer\">here</a>. You can check for <code>HttpClientErrorException</code> or <code>HttpServerErrorException</code> by using <a href=\"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertDoesNotThrow(org.junit.jupiter.api.function.Executable)\" rel=\"nofollow noreferrer\"><code>assertDoesNotThrow</code></a> from JUnit5</p>\n"},{"comments":[{"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"score":0,"creation_date":1635434869,"post_id":69755012,"comment_id":123303135,"body_markdown":"Thank you for the answer. But in that case, I can‚Äôt check exact status == 204 (no content)","body":"Thank you for the answer. But in that case, I can‚Äôt check exact status == 204 (no content)"},{"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"score":0,"creation_date":1635453781,"post_id":69755012,"comment_id":123310131,"body_markdown":"@user3075118 AFAIK `TestRestTemplate` does not throw any exceptions like `RestTemplate` does.","body":"@user3075118 AFAIK <code>TestRestTemplate</code> does not throw any exceptions like <code>RestTemplate</code> does."}],"tags":[],"owner":{"account_id":3692946,"reputation":121,"user_id":3075118,"display_name":"user3075118"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635427760,"creation_date":1635427760,"answer_id":69755012,"question_id":69754324,"body_markdown":"In my opinion RestTemplate.delete method is the one to use, return type is void but status other than 2XX will throw an exception.","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>In my opinion RestTemplate.delete method is the one to use, return type is void but status other than 2XX will throw an exception.</p>\n"},{"tags":[],"owner":{"account_id":3315377,"reputation":475,"user_id":2787886,"accept_rate":0,"display_name":"spyro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694167913,"creation_date":1694167913,"answer_id":77065994,"question_id":69754324,"body_markdown":"If you are using Kotin, feel free to use this extension methods :)\r\n\r\n```kotlin\r\n/**\r\n * Extension for using PUT (not provided by default)\r\n */\r\ninline fun &lt;RQ : Any, reified RP : Any&gt; TestRestTemplate.putForEntity(url: String, payload: RQ): ResponseEntity&lt;RP&gt; =\r\n    this.exchange(url, PUT, HttpEntity(payload))\r\n\r\n/**\r\n * Extension for [TestRestTemplate] DELETE (not provided by default, whyever)\r\n */\r\ninline fun &lt;reified RQ : Any&gt; TestRestTemplate.deleteForEntity(url: String): ResponseEntity&lt;RQ&gt; =\r\n    this.exchange(url, DELETE)\r\n\r\n/**\r\n * Extension for [TestRestTemplate] DELETE with payload (not provided by default, whyever)\r\n */\r\ninline fun &lt;reified RQ : Any, reified RP : Any&gt; TestRestTemplate.deleteForEntity(\r\n    url: String,\r\n    payload: RQ\r\n): ResponseEntity&lt;RP&gt; = this.exchange(url, DELETE, HttpEntity(payload))\r\n```","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>If you are using Kotin, feel free to use this extension methods :)</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>/**\n * Extension for using PUT (not provided by default)\n */\ninline fun &lt;RQ : Any, reified RP : Any&gt; TestRestTemplate.putForEntity(url: String, payload: RQ): ResponseEntity&lt;RP&gt; =\n    this.exchange(url, PUT, HttpEntity(payload))\n\n/**\n * Extension for [TestRestTemplate] DELETE (not provided by default, whyever)\n */\ninline fun &lt;reified RQ : Any&gt; TestRestTemplate.deleteForEntity(url: String): ResponseEntity&lt;RQ&gt; =\n    this.exchange(url, DELETE)\n\n/**\n * Extension for [TestRestTemplate] DELETE with payload (not provided by default, whyever)\n */\ninline fun &lt;reified RQ : Any, reified RP : Any&gt; TestRestTemplate.deleteForEntity(\n    url: String,\n    payload: RQ\n): ResponseEntity&lt;RP&gt; = this.exchange(url, DELETE, HttpEntity(payload))\n</code></pre>\n"}],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2727,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754595,"answer_count":5,"score":0,"last_activity_date":1694167913,"creation_date":1635424992,"question_id":69754324,"body_markdown":"I&#39;m using `Spring Boot 2.5.6` and `JUnit 4.13.2`. My task is to test the `DELETE` method\r\n\r\nMy REST controller:\r\n```java\r\n@RestController\r\npublic class DomainEndpoint {\r\n\r\n    private final SomeService service;\r\n\r\n    @DeleteMapping(&quot;/domain/{id}&quot;)\r\n    public void delete(@PathVariable long id) {\r\n        service.delete(id);\r\n    }\r\n}\r\n```\r\n\r\nMy test:\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@RunWith(SpringRunner.class)\r\npublic class DomainEndpointTest {\r\n\r\n    @Autowired\r\n    TestRestTemplate template;\r\n\r\n    @MockBean\r\n    SomeService service;\r\n\r\n    @Test\r\n    public void delete() {\r\n        String url = &quot;/domain/123&quot;;\r\n        ResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\r\n        assertEquals(HttpStatus.NO_CONTENT, resp.getStatusCode());\r\n    }\r\n}\r\n```\r\n\r\n\r\nAs you can see, the only solution for testing the &#39;DELETE&#39; method, which I found, is:\r\n```java\r\nResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\r\n```\r\n\r\nBut params for body `new HttpEntity&lt;&gt;(&quot;&quot;)` and for return type `String.class` seem strange to me. Why should I use them? Can I do the same more straightway without passing unnecessary parameters?  \r\nOn the other hand, `TestRestTemplate template` has a set of short and readable methods `delete()`. The problem with them - they return `void` and I can&#39;t check the response status code in this case.\r\n\r\nThe main question is how to test `DELETE` methods correctly?\r\n","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>I'm using <code>Spring Boot 2.5.6</code> and <code>JUnit 4.13.2</code>. My task is to test the <code>DELETE</code> method</p>\n<p>My REST controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class DomainEndpoint {\n\n    private final SomeService service;\n\n    @DeleteMapping(&quot;/domain/{id}&quot;)\n    public void delete(@PathVariable long id) {\n        service.delete(id);\n    }\n}\n</code></pre>\n<p>My test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@RunWith(SpringRunner.class)\npublic class DomainEndpointTest {\n\n    @Autowired\n    TestRestTemplate template;\n\n    @MockBean\n    SomeService service;\n\n    @Test\n    public void delete() {\n        String url = &quot;/domain/123&quot;;\n        ResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\n        assertEquals(HttpStatus.NO_CONTENT, resp.getStatusCode());\n    }\n}\n</code></pre>\n<p>As you can see, the only solution for testing the 'DELETE' method, which I found, is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\n</code></pre>\n<p>But params for body <code>new HttpEntity&lt;&gt;(&quot;&quot;)</code> and for return type <code>String.class</code> seem strange to me. Why should I use them? Can I do the same more straightway without passing unnecessary parameters?<br />\nOn the other hand, <code>TestRestTemplate template</code> has a set of short and readable methods <code>delete()</code>. The problem with them - they return <code>void</code> and I can't check the response status code in this case.</p>\n<p>The main question is how to test <code>DELETE</code> methods correctly?</p>\n"},{"tags":["java","spring-boot","interface","microservices","webclient"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693402252,"post_id":76984449,"comment_id":135756063,"body_markdown":"if you also will add `@Componet` is it will work ?","body":"if you also will add <code>@Componet</code> is it will work ?"},{"owner":{"account_id":26672214,"reputation":1,"user_id":20283497,"display_name":"Hiran Sanjeewa"},"score":0,"creation_date":1693550230,"post_id":76984449,"comment_id":135778432,"body_markdown":"I have added but not solved the problem","body":"I have added but not solved the problem"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693553779,"post_id":76984449,"comment_id":135779064,"body_markdown":"but the class where are you trying to inject it is annotated as a spring bean, i mean `@Service` or any others spring component annotations ?","body":"but the class where are you trying to inject it is annotated as a spring bean, i mean <code>@Service</code> or any others spring component annotations ?"},{"owner":{"account_id":26672214,"reputation":1,"user_id":20283497,"display_name":"Hiran Sanjeewa"},"score":0,"creation_date":1693644353,"post_id":76984449,"comment_id":135790211,"body_markdown":"@Service annotaion","body":"@Service annotaion"}],"owner":{"account_id":26672214,"reputation":1,"user_id":20283497,"display_name":"Hiran Sanjeewa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694167604,"creation_date":1693076810,"question_id":76984449,"body_markdown":"I am trying to access a endpoint from different microservice using HttpExchange once I create a instance from the client interface it&#39;s always returns null value \r\n\r\nmy RegisterServiceClient interface looks like this\r\n```\r\n@HttpExchange   // Declarative client\r\npublic interface RegisterServiceClient {\r\n\r\n//    @PostExchange(&quot;/ecommerce/loginwithusername&quot;)\r\n//    public int ValidateUserWithUsername(@RequestBody String username, String password) throws UnsupportedEncodingException;\r\n\r\n    @PostExchange(&quot;/ecommerce/loginwithemail&quot;)\r\n    public int ValidateUserWithEmail(@RequestBody LoginUser loginUser) throws UnsupportedEncodingException ;\r\n\r\n\r\n    }\r\n```\r\nand my configuration is like this \r\n\r\n```\r\n\r\n\r\n    @Configuration\r\n    public class WebClientConfig {\r\n\r\n        @Autowired\r\n        private LoadBalancedExchangeFilterFunction filterFunction;\r\n\r\n\r\n        @Bean\r\n        public WebClient registerWebClient() {\r\n            return WebClient.builder()\r\n                    .baseUrl(&quot;http://register-service&quot;)\r\n                    .filter(filterFunction)\r\n                    .build();\r\n        }\r\n\r\n        @Bean\r\n        public RegisterServiceClient registerClient() {\r\n            HttpServiceProxyFactory httpServiceProxyFactory\r\n                    = HttpServiceProxyFactory\r\n                    .builder(WebClientAdapter.forClient(registerWebClient()))\r\n                    .build();\r\n            return httpServiceProxyFactory.createClient(RegisterServiceClient.class);\r\n        }\r\n    }\r\n```\r\n    @Autowired\r\n    private RegisterServiceClient registerServiceClient ;\r\n\r\nregisterServiceClient always have null value why ? \r\n ","title":"Cannot create Interface instance in Springboot HttpExchange","body":"<p>I am trying to access a endpoint from different microservice using HttpExchange once I create a instance from the client interface it's always returns null value</p>\n<p>my RegisterServiceClient interface looks like this</p>\n<pre><code>@HttpExchange   // Declarative client\npublic interface RegisterServiceClient {\n\n//    @PostExchange(&quot;/ecommerce/loginwithusername&quot;)\n//    public int ValidateUserWithUsername(@RequestBody String username, String password) throws UnsupportedEncodingException;\n\n    @PostExchange(&quot;/ecommerce/loginwithemail&quot;)\n    public int ValidateUserWithEmail(@RequestBody LoginUser loginUser) throws UnsupportedEncodingException ;\n\n\n    }\n</code></pre>\n<p>and my configuration is like this</p>\n<pre><code>\n\n    @Configuration\n    public class WebClientConfig {\n\n        @Autowired\n        private LoadBalancedExchangeFilterFunction filterFunction;\n\n\n        @Bean\n        public WebClient registerWebClient() {\n            return WebClient.builder()\n                    .baseUrl(&quot;http://register-service&quot;)\n                    .filter(filterFunction)\n                    .build();\n        }\n\n        @Bean\n        public RegisterServiceClient registerClient() {\n            HttpServiceProxyFactory httpServiceProxyFactory\n                    = HttpServiceProxyFactory\n                    .builder(WebClientAdapter.forClient(registerWebClient()))\n                    .build();\n            return httpServiceProxyFactory.createClient(RegisterServiceClient.class);\n        }\n    }\n</code></pre>\n<pre><code>@Autowired\nprivate RegisterServiceClient registerServiceClient ;\n</code></pre>\n<p>registerServiceClient always have null value why ?</p>\n"},{"tags":["java","android","http","httpurlconnection","ui-thread"],"comments":[{"owner":{"account_id":349152,"reputation":2546,"user_id":684273,"accept_rate":68,"display_name":"Warlock"},"score":0,"creation_date":1693427009,"post_id":77011048,"comment_id":135761327,"body_markdown":"I have no clue, why it is waiting for 30 seconds. Maybe this article will be some hint for you - https://medium.com/@yossisegev/understanding-activity-runonuithread-e102d388fe93. Also you can run in many problems with configuration change, memory leaks etc. if you will be using this code in Activity / Fragment alone. You should you for example ViewModel pattern with some business logic inside some &quot;Use Case&quot; or &quot;Repository&quot; pattern which will be calling your server. More work but it will pay off. See for example this https://developer.android.com/topic/libraries/architecture/viewmodel","body":"I have no clue, why it is waiting for 30 seconds. Maybe this article will be some hint for you - <a href=\"https://medium.com/@yossisegev/understanding-activity-runonuithread-e102d388fe93\" rel=\"nofollow noreferrer\">medium.com/@yossisegev/&hellip;</a>. Also you can run in many problems with configuration change, memory leaks etc. if you will be using this code in Activity / Fragment alone. You should you for example ViewModel pattern with some business logic inside some &quot;Use Case&quot; or &quot;Repository&quot; pattern which will be calling your server. More work but it will pay off. See for example this <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/viewmodel</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1693495958,"post_id":77011048,"comment_id":135771729,"body_markdown":"So your whole story with a sleep of five seconds becoming thirty is fake.","body":"So your whole story with a sleep of five seconds becoming thirty is fake."},{"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"score":0,"creation_date":1693497420,"post_id":77011048,"comment_id":135772076,"body_markdown":"not at all. The trigger for UI waiting 30 seconds is when there is a getResponseCode() running. Never seen anything like that. To note that our code runs fine since years, and it only shows this behaviour when we upgraded to tragetsdk33","body":"not at all. The trigger for UI waiting 30 seconds is when there is a getResponseCode() running. Never seen anything like that. To note that our code runs fine since years, and it only shows this behaviour when we upgraded to tragetsdk33"},{"owner":{"account_id":20517189,"reputation":1787,"user_id":15057576,"display_name":"ËÅÇË∂ÖÁæ§"},"score":0,"creation_date":1693530012,"post_id":77011048,"comment_id":135776805,"body_markdown":"So `Thread.sleep(5000)` is actually `getResponseCode()` which took 30 seconds?","body":"So <code>Thread.sleep(5000)</code> is actually <code>getResponseCode()</code> which took 30 seconds?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1693559061,"post_id":77011048,"comment_id":135780036,"body_markdown":"I don&#39;t have a specific theory on why this happens, but could you add a debug output *after* the `runOnUiThread` call to see how long that call itself lasts (it should be very short).","body":"I don&#39;t have a specific theory on why this happens, but could you add a debug output <i>after</i> the <code>runOnUiThread</code> call to see how long that call itself lasts (it should be very short)."},{"owner":{"account_id":7773500,"reputation":5844,"user_id":5882307,"display_name":"OMi Shah"},"score":0,"creation_date":1693629480,"post_id":77011048,"comment_id":135789198,"body_markdown":"If I am not wrong, doesn&#39;t https://cnn.com website has too much content to load if you notice, so definitely it&#39;ll take some time to process the request while SO website loads less resources. Also, your internet speed matters.","body":"If I am not wrong, doesn&#39;t <a href=\"https://cnn.com\" rel=\"nofollow noreferrer\">cnn.com</a> website has too much content to load if you notice, so definitely it&#39;ll take some time to process the request while SO website loads less resources. Also, your internet speed matters."}],"answers":[{"comments":[{"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"score":0,"creation_date":1693452276,"post_id":77012331,"comment_id":135763775,"body_markdown":"Tried this now, but with same result. App waits 30 seconds before running the Handler","body":"Tried this now, but with same result. App waits 30 seconds before running the Handler"},{"owner":{"account_id":20517189,"reputation":1787,"user_id":15057576,"display_name":"ËÅÇË∂ÖÁæ§"},"score":0,"creation_date":1693455006,"post_id":77012331,"comment_id":135763968,"body_markdown":"Try to put `Log.e(&quot;TESTUI1&quot;, &quot;&quot; + start);` before `Thread.sleep(5000)` and check the result again?","body":"Try to put <code>Log.e(&quot;TESTUI1&quot;, &quot;&quot; + start);</code> before <code>Thread.sleep(5000)</code> and check the result again?"},{"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"score":0,"creation_date":1693455679,"post_id":77012331,"comment_id":135764008,"body_markdown":"The Thread starts immediately, placing the Log.e before the sleep shows that","body":"The Thread starts immediately, placing the Log.e before the sleep shows that"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1693456745,"post_id":77012331,"comment_id":135764086,"body_markdown":"Put also a log directly after the sleep.","body":"Put also a log directly after the sleep."},{"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"score":0,"creation_date":1693474964,"post_id":77012331,"comment_id":135767080,"body_markdown":"cf. Edit. I could narrow it further down, but the thing has got even more obscure.","body":"cf. Edit. I could narrow it further down, but the thing has got even more obscure."},{"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"score":0,"creation_date":1693557354,"post_id":77012331,"comment_id":135779718,"body_markdown":"Please check the code for reproducing the problem","body":"Please check the code for reproducing the problem"},{"owner":{"account_id":20517189,"reputation":1787,"user_id":15057576,"display_name":"ËÅÇË∂ÖÁæ§"},"score":0,"creation_date":1693561433,"post_id":77012331,"comment_id":135780537,"body_markdown":"Just tested on my computer, `runOnUiThread ` started immediately for both `stackoverflow.com` and `cnn.com`. &#128514;","body":"Just tested on my computer, <code>runOnUiThread </code> started immediately for both <code>stackoverflow.com</code> and <code>cnn.com</code>. üòÇ"},{"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"score":0,"creation_date":1693627382,"post_id":77012331,"comment_id":135789115,"body_markdown":"I believe this immediately. I have another app where I do the same and it works fine. So what makes Android wait 30 seconds in some cases and not in others?","body":"I believe this immediately. I have another app where I do the same and it works fine. So what makes Android wait 30 seconds in some cases and not in others?"}],"tags":[],"owner":{"account_id":20517189,"reputation":1787,"user_id":15057576,"display_name":"ËÅÇË∂ÖÁæ§"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693444615,"creation_date":1693444615,"answer_id":77012331,"question_id":77011048,"body_markdown":"`runOnUiThread` post a message to your main `Looper`&#39;s `MessageQueue`, whose message is handled one by one.\r\n\r\nSo it&#39;s possible that `MessageQueue` is full of other message which took long time to process, which will result in long delay before your `Runnable` executed.\r\n\r\nYou can verify this by replace `runOnUiThread` with below code:\r\n\r\n```\r\n// this will insert your Runnable at the front of MessageQueue\r\nnew Handler(Looper.getMainLooper()).postAtFrontOfQueue(() -&gt; {\r\n    long delta = new Date().getTime() - start;\r\n    Log.e(&quot;TESTUI2&quot;, &quot;&quot; + delta);\r\n});\r\n```\r\n","title":"runOnUiThread executes after waiting 30 seconds","body":"<p><code>runOnUiThread</code> post a message to your main <code>Looper</code>'s <code>MessageQueue</code>, whose message is handled one by one.</p>\n<p>So it's possible that <code>MessageQueue</code> is full of other message which took long time to process, which will result in long delay before your <code>Runnable</code> executed.</p>\n<p>You can verify this by replace <code>runOnUiThread</code> with below code:</p>\n<pre><code>// this will insert your Runnable at the front of MessageQueue\nnew Handler(Looper.getMainLooper()).postAtFrontOfQueue(() -&gt; {\n    long delta = new Date().getTime() - start;\n    Log.e(&quot;TESTUI2&quot;, &quot;&quot; + delta);\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4663157,"reputation":15229,"user_id":3776927,"display_name":"derpirscher"},"score":0,"creation_date":1694182893,"post_id":77044108,"comment_id":135862015,"body_markdown":"&quot;30 seconds&quot; sounds more or less like a default timeout. So this deprecated APIClient may be trying to reach out to a server that doesn&#39;t exist anymore and blocking the message queue in the meanwhile ...","body":"&quot;30 seconds&quot; sounds more or less like a default timeout. So this deprecated APIClient may be trying to reach out to a server that doesn&#39;t exist anymore and blocking the message queue in the meanwhile ..."}],"tags":[],"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693913222,"creation_date":1693913222,"answer_id":77044108,"question_id":77011048,"body_markdown":"One the weirdest things ever seen in 30 years of software development. The cause of the problem was using elsewhere the deprecated GoogleApiClient for accessing location. This triggered a 30 seconds wait time whenever a server request was sent, but only for some servers. Migrated to FusedLocation and problem disappeared","title":"runOnUiThread executes after waiting 30 seconds","body":"<p>One the weirdest things ever seen in 30 years of software development. The cause of the problem was using elsewhere the deprecated GoogleApiClient for accessing location. This triggered a 30 seconds wait time whenever a server request was sent, but only for some servers. Migrated to FusedLocation and problem disappeared</p>\n"},{"comments":[{"owner":{"account_id":4663157,"reputation":15229,"user_id":3776927,"display_name":"derpirscher"},"score":0,"creation_date":1694188195,"post_id":77065920,"comment_id":135863031,"body_markdown":"You did notice, the 30 seconds lag happen *after* the request is already complete, didn&#39;t you? Ie `TESTUI_2` timestamp is recorded after the request is already completed.","body":"You did notice, the 30 seconds lag happen <i>after</i> the request is already complete, didn&#39;t you? Ie <code>TESTUI_2</code> timestamp is recorded after the request is already completed."},{"owner":{"account_id":28127491,"reputation":1,"user_id":21492598,"display_name":"Aniket Tripathi"},"score":0,"creation_date":1694506164,"post_id":77065920,"comment_id":135895995,"body_markdown":"ohhhhhhhhhh........ If the 30-second lag is occurring after the network request has already completed (as indicated by the TESTUI_2 timestamp), it suggests that the delay is not primarily caused by network latency or the network request itself. Instead, it&#39;s more likely related to how the UI thread is handling the post-execution of your code using runOnUiThread.\n\nIn this case, the delay could be attributed to other factors such as high CPU usage, excessive UI rendering, or thread contention. Here are some additional considerations:\n\nUI Rendering: If the UI thread is busy rendering a","body":"ohhhhhhhhhh........ If the 30-second lag is occurring after the network request has already completed (as indicated by the TESTUI_2 timestamp), it suggests that the delay is not primarily caused by network latency or the network request itself. Instead, it&#39;s more likely related to how the UI thread is handling the post-execution of your code using runOnUiThread.  In this case, the delay could be attributed to other factors such as high CPU usage, excessive UI rendering, or thread contention. Here are some additional considerations:  UI Rendering: If the UI thread is busy rendering a"}],"tags":[],"owner":{"account_id":28127491,"reputation":1,"user_id":21492598,"display_name":"Aniket Tripathi"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694167090,"creation_date":1694167090,"answer_id":77065920,"question_id":77011048,"body_markdown":"The behavior you&#39;re observing, where runOnUiThread sometimes takes a long time to execute after server data retrieval, can be attributed to a combination of factors including network latency, thread management, and the Android UI system. Let&#39;s break down your observations and try to understand what&#39;s happening:\r\n\r\nNetwork Latency: When you make a network request, such as fetching data from a server, the time it takes to complete the request can vary depending on the server&#39;s response time, network conditions, and other factors. In your case, when you access &quot;https://cnn.com,&quot; it appears to take longer to complete the request compared to &quot;https://stackoverflow.com.&quot; This difference in network latency can influence the overall timing of your code.\r\n\r\nThread Execution: You&#39;re starting a new thread in onResume to perform the network request and then update the UI using runOnUiThread. The timing of when the UI thread executes your code depends on the Android system&#39;s thread scheduling and how busy the system is with other tasks.\r\n\r\nUI Thread Execution: The runOnUiThread method is used to post a Runnable to the UI thread&#39;s message queue, which will be executed when the UI thread becomes available. The UI thread might be busy with other tasks, and there can be a delay in executing your Runnable if there&#39;s a backlog of UI events.\r\n\r\nGiven these factors, here&#39;s what&#39;s happening in your two scenarios:\r\n\r\nWith &quot;https://cnn.com,&quot; the network request takes longer to complete, and by the time the response is received, the UI thread might have other tasks to handle. This can introduce a delay in executing your runOnUiThread code.\r\n\r\nWith &quot;https://stackoverflow.com,&quot; the network request is faster, so the UI thread is more likely to be available when the response is received, resulting in a shorter delay before executing your runOnUiThread code.\r\n\r\nIn your log output, you can see the difference in timing between when the network request completes (TESTUI_2) and when the UI code executes (TESTUI_3). The delay is longer in the &quot;cnn.com&quot; case due to the longer network request time.\r\n\r\nTo mitigate this issue and ensure more predictable UI updates, you can consider the following:\r\n\r\nUse AsyncTask or other Android-specific mechanisms for background tasks and UI updates. AsyncTask simplifies the process of running background tasks and updating the UI when they are completed.\r\n\r\nConsider implementing error handling and timeout mechanisms for network requests to prevent long delays in case of slow or failed requests.\r\n\r\nProfile your app&#39;s performance to identify and address any other bottlenecks that might be causing delays in UI thread execution.\r\n\r\nCheck for exceptions or errors in the network request that could potentially block the UI thread. Logging error messages and handling exceptions appropriately can help in diagnosing issues.\r\n\r\nIn summary, the observed behavior is likely due to a combination of network latency and thread management. To ensure more consistent and responsive UI updates, consider using Android&#39;s built-in concurrency mechanisms and optimizing your network request handling.\r\n\r\n\r\n\r\n\r\nWas this response better or worse?","title":"runOnUiThread executes after waiting 30 seconds","body":"<p>The behavior you're observing, where runOnUiThread sometimes takes a long time to execute after server data retrieval, can be attributed to a combination of factors including network latency, thread management, and the Android UI system. Let's break down your observations and try to understand what's happening:</p>\n<p>Network Latency: When you make a network request, such as fetching data from a server, the time it takes to complete the request can vary depending on the server's response time, network conditions, and other factors. In your case, when you access &quot;https://cnn.com,&quot; it appears to take longer to complete the request compared to &quot;https://stackoverflow.com.&quot; This difference in network latency can influence the overall timing of your code.</p>\n<p>Thread Execution: You're starting a new thread in onResume to perform the network request and then update the UI using runOnUiThread. The timing of when the UI thread executes your code depends on the Android system's thread scheduling and how busy the system is with other tasks.</p>\n<p>UI Thread Execution: The runOnUiThread method is used to post a Runnable to the UI thread's message queue, which will be executed when the UI thread becomes available. The UI thread might be busy with other tasks, and there can be a delay in executing your Runnable if there's a backlog of UI events.</p>\n<p>Given these factors, here's what's happening in your two scenarios:</p>\n<p>With &quot;https://cnn.com,&quot; the network request takes longer to complete, and by the time the response is received, the UI thread might have other tasks to handle. This can introduce a delay in executing your runOnUiThread code.</p>\n<p>With &quot;https://stackoverflow.com,&quot; the network request is faster, so the UI thread is more likely to be available when the response is received, resulting in a shorter delay before executing your runOnUiThread code.</p>\n<p>In your log output, you can see the difference in timing between when the network request completes (TESTUI_2) and when the UI code executes (TESTUI_3). The delay is longer in the &quot;cnn.com&quot; case due to the longer network request time.</p>\n<p>To mitigate this issue and ensure more predictable UI updates, you can consider the following:</p>\n<p>Use AsyncTask or other Android-specific mechanisms for background tasks and UI updates. AsyncTask simplifies the process of running background tasks and updating the UI when they are completed.</p>\n<p>Consider implementing error handling and timeout mechanisms for network requests to prevent long delays in case of slow or failed requests.</p>\n<p>Profile your app's performance to identify and address any other bottlenecks that might be causing delays in UI thread execution.</p>\n<p>Check for exceptions or errors in the network request that could potentially block the UI thread. Logging error messages and handling exceptions appropriately can help in diagnosing issues.</p>\n<p>In summary, the observed behavior is likely due to a combination of network latency and thread management. To ensure more consistent and responsive UI updates, consider using Android's built-in concurrency mechanisms and optimizing your network request handling.</p>\n<p>Was this response better or worse?</p>\n"}],"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1694167090,"creation_date":1693424054,"question_id":77011048,"body_markdown":"I came across an extremely weird behaviour related to code execution on UI thread after server data retrieval.\r\n\r\nIn onResume, I start a Thread where I wait for some server data fetch to complete and then run ui updates. \r\n\r\nBut the problem is that `runOnUiThread` command more often than not only starts executing after a delay of 30 seconds. It happens with some servers, but not with others, as per example below.\r\n\r\nHere&#39;s the full code in onResume:\r\n\r\n     @Override\r\n    public void onResume() {\r\n\r\n        super.onResume();\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    Log.e(&quot;TESTUI_1&quot;, &quot;&quot;);\r\n\r\n                    String urlname = &quot;https://stackoverflow.com&quot;;//runonuithread starts immediately\r\n                    //String urlname = &quot;https://cnn.com&quot;;//runonuithread waits 30 seconds\r\n                    URL url = new URL(urlname);\r\n                    Log.e(&quot;TESTUI_1&quot;, urlname);\r\n                    HttpURLConnection connectionCache = (HttpURLConnection) url.openConnection();\r\n                    connectionCache.setDoOutput(true);\r\n\r\n                    connectionCache.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);//MAn680\r\n                    connectionCache.setRequestMethod(&quot;POST&quot;);//MAn680\r\n                    connectionCache.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);//MAn1140\r\n                    connectionCache.setConnectTimeout(10000);\r\n                    connectionCache.setReadTimeout(10000);\r\n                    connectionCache.setDoInput(true);//3.9.13\r\n                    connectionCache.setUseCaches(false); //3.9.13\r\n\r\n                    int status = connectionCache.getResponseCode();//3.9.12\r\n                    Log.e(&quot;TESTUI_status&quot;, &quot;&quot;+status);\r\n                    InputStream is;\r\n\r\n                    if (status &gt;= 400) {\r\n                        is = connectionCache.getErrorStream();\r\n                    } else {\r\n                        is = connectionCache.getInputStream();\r\n                    }\r\n                } catch (Exception e) {\r\n                    Log.e(&quot;TESTUI_error&quot;, e.getLocalizedMessage());\r\n                }\r\n                long when = new Date().getTime();\r\n                Log.e(&quot;TESTUI_2&quot;, &quot;&quot;+when);\r\n                runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        long delta = new Date().getTime() - when;\r\n                        Log.e(&quot;TESTUI_3&quot;, &quot;&quot;+delta);\r\n                    }\r\n                });\r\n            }\r\n        }).start();\r\n\r\n\r\n    }\r\n\r\nLogcat output with cnn.com:\r\n\r\n&gt; TESTUI_1                  E  \r\nTESTUI_1                  E  https://cnn.com    \r\nTESTUI_status             E  200   \r\nTESTUI_2                  E  1693556722917   \r\nTESTUI_3                  E  29643\r\n\r\nLogcat output with stackoverflow.com:\r\n\r\n&gt; TESTUI_1                  E    \r\nTESTUI_1                  E  https://stackoverflow.com   \r\nTESTUI_status             E  200   \r\nTESTUI_2                  E  1693556962546   \r\nTESTUI_3                  E  230   \r\n\r\nIs there anything in the Logcat that I could search for?\r\n\r\n","title":"runOnUiThread executes after waiting 30 seconds","body":"<p>I came across an extremely weird behaviour related to code execution on UI thread after server data retrieval.</p>\n<p>In onResume, I start a Thread where I wait for some server data fetch to complete and then run ui updates.</p>\n<p>But the problem is that <code>runOnUiThread</code> command more often than not only starts executing after a delay of 30 seconds. It happens with some servers, but not with others, as per example below.</p>\n<p>Here's the full code in onResume:</p>\n<pre><code> @Override\npublic void onResume() {\n\n    super.onResume();\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            try {\n                Log.e(&quot;TESTUI_1&quot;, &quot;&quot;);\n\n                String urlname = &quot;https://stackoverflow.com&quot;;//runonuithread starts immediately\n                //String urlname = &quot;https://cnn.com&quot;;//runonuithread waits 30 seconds\n                URL url = new URL(urlname);\n                Log.e(&quot;TESTUI_1&quot;, urlname);\n                HttpURLConnection connectionCache = (HttpURLConnection) url.openConnection();\n                connectionCache.setDoOutput(true);\n\n                connectionCache.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);//MAn680\n                connectionCache.setRequestMethod(&quot;POST&quot;);//MAn680\n                connectionCache.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);//MAn1140\n                connectionCache.setConnectTimeout(10000);\n                connectionCache.setReadTimeout(10000);\n                connectionCache.setDoInput(true);//3.9.13\n                connectionCache.setUseCaches(false); //3.9.13\n\n                int status = connectionCache.getResponseCode();//3.9.12\n                Log.e(&quot;TESTUI_status&quot;, &quot;&quot;+status);\n                InputStream is;\n\n                if (status &gt;= 400) {\n                    is = connectionCache.getErrorStream();\n                } else {\n                    is = connectionCache.getInputStream();\n                }\n            } catch (Exception e) {\n                Log.e(&quot;TESTUI_error&quot;, e.getLocalizedMessage());\n            }\n            long when = new Date().getTime();\n            Log.e(&quot;TESTUI_2&quot;, &quot;&quot;+when);\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    long delta = new Date().getTime() - when;\n                    Log.e(&quot;TESTUI_3&quot;, &quot;&quot;+delta);\n                }\n            });\n        }\n    }).start();\n\n\n}\n</code></pre>\n<p>Logcat output with cnn.com:</p>\n<blockquote>\n<p>TESTUI_1                  E<br />\nTESTUI_1                  E  <a href=\"https://cnn.com\" rel=\"nofollow noreferrer\">https://cnn.com</a><br />\nTESTUI_status             E  200<br />\nTESTUI_2                  E  1693556722917<br />\nTESTUI_3                  E  29643</p>\n</blockquote>\n<p>Logcat output with stackoverflow.com:</p>\n<blockquote>\n<p>TESTUI_1                  E<br />\nTESTUI_1                  E  <a href=\"https://stackoverflow.com\">https://stackoverflow.com</a><br />\nTESTUI_status             E  200<br />\nTESTUI_2                  E  1693556962546<br />\nTESTUI_3                  E  230</p>\n</blockquote>\n<p>Is there anything in the Logcat that I could search for?</p>\n"},{"tags":["java","android","websocket","retrofit","retrofit2"],"comments":[{"owner":{"account_id":1093315,"reputation":2714,"user_id":1087449,"accept_rate":29,"display_name":"giorgos.nl"},"score":0,"creation_date":1472824283,"post_id":38855677,"comment_id":65921838,"body_markdown":"I think it does not support web sockets yet since it&#39;s not being mentioned in its changelog: https://github.com/square/retrofit/blob/master/CHANGELOG.md\n\nHopefully on 2.2.","body":"I think it does not support web sockets yet since it&#39;s not being mentioned in its changelog: <a href=\"https://github.com/square/retrofit/blob/master/CHANGELOG.md\" rel=\"nofollow noreferrer\">github.com/square/retrofit/blob/master/CHANGELOG.md</a>  Hopefully on 2.2."},{"owner":{"account_id":1715220,"reputation":411,"user_id":1572449,"display_name":"theshadowchild"},"score":2,"creation_date":1508276699,"post_id":38855677,"comment_id":80546289,"body_markdown":"OkHttp supports WebSockets now. Check out this simple tutorial https://medium.com/@ssaurel/learn-to-use-websockets-on-android-with-okhttp-ba5f00aea988","body":"OkHttp supports WebSockets now. Check out this simple tutorial <a href=\"https://medium.com/@ssaurel/learn-to-use-websockets-on-android-with-okhttp-ba5f00aea988\" rel=\"nofollow noreferrer\">medium.com/@ssaurel/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15427899,"reputation":122,"user_id":11130128,"display_name":"Sam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694166944,"creation_date":1694166944,"answer_id":77065898,"question_id":38855677,"body_markdown":"Retrofit is built on top of OkHttp, and OkHttp supports WebSockets starting from the version 3.5, [more on this here][1].\r\n\r\nFor an example, you can see the following answer on [StackOverflow][2].\r\n\r\n\r\n  [1]: https://square.github.io/okhttp/changelogs/changelog_3x/#version-350\r\n  [2]: https://stackoverflow.com/questions/39416209/how-to-create-simple-okhttp3-websocket-connection","title":"Does Retrofit support websocket by now?","body":"<p>Retrofit is built on top of OkHttp, and OkHttp supports WebSockets starting from the version 3.5, <a href=\"https://square.github.io/okhttp/changelogs/changelog_3x/#version-350\" rel=\"nofollow noreferrer\">more on this here</a>.</p>\n<p>For an example, you can see the following answer on <a href=\"https://stackoverflow.com/questions/39416209/how-to-create-simple-okhttp3-websocket-connection\">StackOverflow</a>.</p>\n"}],"owner":{"account_id":8721368,"reputation":428,"user_id":6524422,"accept_rate":80,"display_name":"Daniil Orekhov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7481,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"answer_count":1,"score":8,"last_activity_date":1694166944,"creation_date":1470758942,"question_id":38855677,"body_markdown":"I know that it was a work in progress and it was supposed to become a thing in version 2.1, which is the latest version. \r\n\r\nSo, is it a thing ready now? Couldn&#39;t find any info on that topic.\r\n\r\nAnd if it is a thing already, how would use I it?","title":"Does Retrofit support websocket by now?","body":"<p>I know that it was a work in progress and it was supposed to become a thing in version 2.1, which is the latest version. </p>\n\n<p>So, is it a thing ready now? Couldn't find any info on that topic.</p>\n\n<p>And if it is a thing already, how would use I it?</p>\n"},{"tags":["java","swagger","swagger-ui","openapi"],"answers":[{"comments":[{"owner":{"account_id":9706906,"reputation":3705,"user_id":7200088,"accept_rate":100,"display_name":"Michael Dz"},"score":0,"creation_date":1606746358,"post_id":65074042,"comment_id":115046658,"body_markdown":"Unfortunately Swagger UI still shows sort as a single parameter.","body":"Unfortunately Swagger UI still shows sort as a single parameter."},{"owner":{"account_id":14446656,"reputation":196,"user_id":10435550,"display_name":"Spaik Saucus"},"score":1,"creation_date":1618970957,"post_id":65074042,"comment_id":118761495,"body_markdown":"parameters = {\n     @Parameter(in = ParameterIn.QUERY, required = false, name = &quot;sort&quot;, description = &quot;Sorting criteria in the format: property(,asc|desc). Default sort order is ascending. Multiple sort criteria are supported.&quot;, example = &quot;sort=customerId,desc&amp;sort=id,desc&quot;, array = @ArraySchema( schema = @Schema(type = &quot;string&quot;)))\n}","body":"parameters = {      @Parameter(in = ParameterIn.QUERY, required = false, name = &quot;sort&quot;, description = &quot;Sorting criteria in the format: property(,asc|desc). Default sort order is ascending. Multiple sort criteria are supported.&quot;, example = &quot;sort=customerId,desc&amp;sort=id,desc&quot;, array = @ArraySchema( schema = @Schema(type = &quot;string&quot;))) }"}],"tags":[],"owner":{"account_id":4896814,"reputation":1591,"user_id":3946165,"display_name":"mcarlin"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606761899,"creation_date":1606741066,"answer_id":65074042,"question_id":64677613,"body_markdown":"If I&#39;m understanding you correctly, to indicate that the `&quot;sort&quot;` parameter is a list, you need to use the parameters `array` like the following: \r\n\r\n`schema = @Schema(implementation = String.class, type = &quot;query&quot;`\r\n\r\nshould be changed to\r\n\r\n`array = @ArraySchema(implementation = String.class)`\r\n\r\n","title":"How to specify a list using OpenAPI 3 Swagger annotations","body":"<p>If I'm understanding you correctly, to indicate that the <code>&quot;sort&quot;</code> parameter is a list, you need to use the parameters <code>array</code> like the following:</p>\n<p><code>schema = @Schema(implementation = String.class, type = &quot;query&quot;</code></p>\n<p>should be changed to</p>\n<p><code>array = @ArraySchema(implementation = String.class)</code></p>\n"},{"tags":[],"owner":{"account_id":14657127,"reputation":1,"user_id":10585391,"display_name":"Brian Boothe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694166548,"creation_date":1692351736,"answer_id":76928166,"question_id":64677613,"body_markdown":"You should use this:\r\n```java\r\narray = @ArraySchema(schema = @Schema(implementation = String.class))\r\n```","title":"How to specify a list using OpenAPI 3 Swagger annotations","body":"<p>You should use this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>array = @ArraySchema(schema = @Schema(implementation = String.class))\n</code></pre>\n"}],"owner":{"account_id":9706906,"reputation":3705,"user_id":7200088,"accept_rate":100,"display_name":"Michael Dz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694166548,"creation_date":1604483141,"question_id":64677613,"body_markdown":"For my API I&#39;m making a meta annotation for handling `Pagable` parameters and for it I need to annotate a list of strings as a parameter that will show up in Swagger UI. \r\n\r\n    import io.swagger.v3.oas.annotations.Parameter;\r\n    \r\n    @Parameter(name = &quot;sort&quot;, in = ParameterIn.QUERY, schema = @Schema(implementation = String.class, type = &quot;query&quot;))\r\n    public @interface PageableQueryParameters {}\r\n\r\nIn order to sort by multiple criteria in Spring&#39;s `Pageable` the sort parameter needs to be provided as a list of strings. Unfortunately I don&#39;t know how to declare the sort parameter as a list. \r\n\r\nHow can I document a list of strings using Swagger&#39;s OpenAPI 3 annotations?","title":"How to specify a list using OpenAPI 3 Swagger annotations","body":"<p>For my API I'm making a meta annotation for handling <code>Pagable</code> parameters and for it I need to annotate a list of strings as a parameter that will show up in Swagger UI.</p>\n<pre><code>import io.swagger.v3.oas.annotations.Parameter;\n\n@Parameter(name = &quot;sort&quot;, in = ParameterIn.QUERY, schema = @Schema(implementation = String.class, type = &quot;query&quot;))\npublic @interface PageableQueryParameters {}\n</code></pre>\n<p>In order to sort by multiple criteria in Spring's <code>Pageable</code> the sort parameter needs to be provided as a list of strings. Unfortunately I don't know how to declare the sort parameter as a list.</p>\n<p>How can I document a list of strings using Swagger's OpenAPI 3 annotations?</p>\n"},{"tags":["java","intellij-idea","path"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":1,"creation_date":1694071655,"post_id":77053703,"comment_id":135843570,"body_markdown":"Despite -Djava.library.path is not listed in VM options autocompletion popup it still should work. Try to click on `Modify Options -&gt; Add VM Options` and add `-Djava.library.path=some_path`","body":"Despite -Djava.library.path is not listed in VM options autocompletion popup it still should work. Try to click on <code>Modify Options -&gt; Add VM Options</code> and add <code>-Djava.library.path=some_path</code>"},{"owner":{"account_id":438122,"reputation":6172,"user_id":826203,"accept_rate":89,"display_name":"athos"},"score":0,"creation_date":1694166485,"post_id":77053703,"comment_id":135858744,"body_markdown":"@EgorKlepikov thank you! you are right, -Djava.library.path=some_path can be added into the VM options","body":"@EgorKlepikov thank you! you are right, -Djava.library.path=some_path can be added into the VM options"}],"owner":{"account_id":438122,"reputation":6172,"user_id":826203,"accept_rate":89,"display_name":"athos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694166464,"creation_date":1694017032,"question_id":77053703,"body_markdown":"I&#39;m using IntelliJ IDEA 2023.1.2 (Community Edition), developing some Maven testcases, calling C++ library via JNI.\r\n\r\nNow I hit a problem that IntelliJ always look for the JNI.dll in ReleaseMD folder.\r\nWith `System.out.println(System.getProperty(&quot;java.library.path&quot;));`\r\nI can see it point to    `C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/ReleaseMD`.\r\n\r\nHow can I force it to be `C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/DebugMDd`?\r\n\r\nFrom menu Run -&gt; Edit configurations, I can see current settings are:\r\n\r\n     Working Directory: $MODULE_WORKING_DIR$\r\n     Environment Variable: path=C:/myCode/CppLibPrj/x64/DebugMDd\r\n\r\n, these seem correct.\r\n\r\nIf I click &quot;Modify Options -&gt; Add VM Options&quot; as this answer https://stackoverflow.com/a/76475062/826203 suggested, \r\nthere are only predefined options such as `-ea`\r\n","title":"how to config intellij 2023.1 java.system.path","body":"<p>I'm using IntelliJ IDEA 2023.1.2 (Community Edition), developing some Maven testcases, calling C++ library via JNI.</p>\n<p>Now I hit a problem that IntelliJ always look for the JNI.dll in ReleaseMD folder.\nWith <code>System.out.println(System.getProperty(&quot;java.library.path&quot;));</code>\nI can see it point to    <code>C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/ReleaseMD</code>.</p>\n<p>How can I force it to be <code>C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/DebugMDd</code>?</p>\n<p>From menu Run -&gt; Edit configurations, I can see current settings are:</p>\n<pre><code> Working Directory: $MODULE_WORKING_DIR$\n Environment Variable: path=C:/myCode/CppLibPrj/x64/DebugMDd\n</code></pre>\n<p>, these seem correct.</p>\n<p>If I click &quot;Modify Options -&gt; Add VM Options&quot; as this answer <a href=\"https://stackoverflow.com/a/76475062/826203\">https://stackoverflow.com/a/76475062/826203</a> suggested,\nthere are only predefined options such as <code>-ea</code></p>\n"},{"tags":["java","android","arraylist"],"comments":[{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1694019437,"post_id":77053865,"comment_id":135837393,"body_markdown":"I dont see in your start button handler any code which would remove the previous views, so it looks like you add new ones after the previous ones.","body":"I dont see in your start button handler any code which would remove the previous views, so it looks like you add new ones after the previous ones."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694032207,"post_id":77053865,"comment_id":135839677,"body_markdown":"Vague title. Rewrite to summarize your specific technical issue.","body":"Vague title. Rewrite to summarize your specific technical issue."},{"owner":{"account_id":21272415,"reputation":1,"user_id":20266598,"display_name":"Jonasoos"},"score":0,"creation_date":1694165887,"post_id":77053865,"comment_id":135858619,"body_markdown":"@marcinj does that mean that a new grid is getting added everytime i press start? That means that i need to delete all buttons first hand, and then call the code in start.setonclicklistener.","body":"@marcinj does that mean that a new grid is getting added everytime i press start? That means that i need to delete all buttons first hand, and then call the code in start.setonclicklistener."},{"owner":{"account_id":21272415,"reputation":1,"user_id":20266598,"display_name":"Jonasoos"},"score":0,"creation_date":1694166909,"post_id":77053865,"comment_id":135858825,"body_markdown":"tried using buttons.clear(), but it is still not working. The error says the error is now in the setupGame() method. -Out of bounds-","body":"tried using buttons.clear(), but it is still not working. The error says the error is now in the setupGame() method. -Out of bounds-"},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1694167806,"post_id":77053865,"comment_id":135858996,"body_markdown":"You should also clear your layout, see here: https://stackoverflow.com/questions/14750643/delete-objects-in-gridlayout-before-adding-new-objects","body":"You should also clear your layout, see here: <a href=\"https://stackoverflow.com/questions/14750643/delete-objects-in-gridlayout-before-adding-new-objects\" title=\"delete objects in gridlayout before adding new objects\">stackoverflow.com/questions/14750643/&hellip;</a>"}],"owner":{"account_id":21272415,"reputation":1,"user_id":20266598,"display_name":"Jonasoos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694165945,"creation_date":1694018511,"question_id":77053865,"body_markdown":"The code is a mine game where there is a minefield made up out of buttons. The size and height of the minefield is set as 4 `gridsize` and 8 `gridHeight`.\r\nThe first-time initilisation works - the 4 x 8 field out of buttons pops up. But after the first game, when changing the SeekBar `minesSeekBar` the Field gets bigger by one row although `gridHeight` is not changed.\r\n[how  it looks on the first game][1], [how it looks after the first game][2]\r\n\r\nI do not quite understand how there is a  row added when `gridHeight` is never changed. I suspected that the error might be in the `start.setOnClickListener(){}` but i could not fix it as the code makes sense (to me). Everytime the field gets redone everytime you press start so it should theoratically be always the same.\r\ni do not think the error is in `setupGame()` as the gridsize is not changed in the method.\r\n\r\n  [1]: https://i.stack.imgur.com/2mm7U.png\r\n  [2]: https://i.stack.imgur.com/DBK5q.png\r\nHere is the xml: \r\n\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/menu1&quot;\r\n        android:layout_width=&quot;55dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginStart=&quot;340dp&quot;\r\n        android:layout_marginTop=&quot;10dp&quot;\r\n        android:background=&quot;@drawable/baseline_menu_24&quot;\r\n        app:cornerRadius=&quot;15dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/start&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;START&quot;\r\n        android:layout_marginTop=&quot;5dp&quot;\r\n        android:layout_marginStart=&quot;0dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.498&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.005&quot;\r\n        tools:ignore=&quot;MissingConstraints&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:layout_marginStart=&quot;10dp&quot;\r\n        android:id=&quot;@+id/einsatz&quot;\r\n        android:layout_marginTop=&quot;10dp&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:hint=&quot;Einsatz&quot;\r\n        android:inputType=&quot;number&quot;\r\n        android:textColor=&quot;@color/black&quot;\r\n        android:textColorHighlight=&quot;@color/white&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n\r\n    &lt;SeekBar\r\n        android:id=&quot;@+id/sizeSeekBar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:max=&quot;8&quot;\r\n        android:progress=&quot;2&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        tools:layout_editor_absoluteX=&quot;10dp&quot;\r\n    android:visibility=&quot;gone&quot;/&gt; \r\n\r\n    &lt;SeekBar\r\n        android:id=&quot;@+id/minesSeekBar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:max=&quot;16&quot;\r\n        android:progress=&quot;2&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/start&quot;\r\n        tools:layout_editor_absoluteX=&quot;10dp&quot; /&gt;\r\n\r\n    &lt;GridLayout\r\n        android:id=&quot;@+id/gridlayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;400dp&quot;\r\n        android:layout_marginBottom=&quot;52dp&quot;\r\n        android:layout_weight=&quot;1&quot;\r\n        android:background=&quot;@drawable/custom_edittext&quot;\r\n        android:columnCount=&quot;4&quot;\r\n        android:rowCount=&quot;4&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        tools:layout_editor_absoluteX=&quot;9dp&quot; /&gt;\r\n\r\n\r\nHere the code: \r\n\r\npublic class Minen extends AppCompatActivity {\r\n\r\n    private int gridSize = 4; // Default grid size\r\n    private int gridHeight = 8; // Default grid height\r\n    private int numMines = 2; // Default number of mines\r\n    private ArrayList&lt;ArrayList&lt;Button&gt;&gt; buttons;\r\n    private ArrayList&lt;ArrayList&lt;Boolean&gt;&gt; minePositions;\r\n    private boolean gameLost = false;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_minefield);\r\n        getSupportActionBar().hide();\r\n        Button menu = findViewById(R.id.menu1);\r\n        GridLayout gridLayout = findViewById(R.id.gridlayout);\r\n        SeekBar heightSeekBar = findViewById(R.id.sizeSeekBar);\r\n        SeekBar minesSeekBar = findViewById(R.id.minesSeekBar);\r\n        Button start = findViewById(R.id.start);\r\n        // Set up the height seek bar listener\r\n        heightSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n            @Override\r\n            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n               int x = progress + 1; // Adjust for a range of 2 to 10\r\n                setupGame();\r\n            }\r\n            @Override\r\n            public void onStartTrackingTouch(SeekBar seekBar) {}\r\n            @Override\r\n            public void onStopTrackingTouch(SeekBar seekBar) {\r\n            }\r\n        });\r\n        minesSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n            @Override\r\n            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n                numMines = progress;\r\n                setupGame();\r\n            }\r\n            @Override\r\n            public void onStartTrackingTouch(SeekBar seekBar) {}\r\n            @Override\r\n            public void onStopTrackingTouch(SeekBar seekBar) {}\r\n        });\r\n\r\n        // Initialize the ArrayLists for buttons and mine positions\r\n        buttons = new ArrayList&lt;&gt;();\r\n        minePositions = new ArrayList&lt;&gt;();\r\n\r\n        start.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (getEinsatzFromEditText() &gt; 0) {\r\n                    kontostandpositiv(getEinsatzFromEditText(), new Callback() {\r\n                        @Override\r\n                        public void Callbackchecked(boolean kontostandPositiv) {\r\n                            if (kontostandPositiv) {\r\n                                kontostandandernminus(getEinsatzFromEditText());\r\n                                for (int i = 0; i &lt; gridSize; i++) {\r\n                                    ArrayList&lt;Button&gt; rowButtons = new ArrayList&lt;&gt;();\r\n                                    ArrayList&lt;Boolean&gt; rowMinePositions = new ArrayList&lt;&gt;();\r\n                                    for (int j = 0; j &lt; gridHeight; j++) {\r\n                                        Button button = new Button(getApplicationContext());\r\n                                        int finalI = i;\r\n                                        int finalJ = j;\r\n                                        button.setOnClickListener(new View.OnClickListener() {\r\n                                            @Override\r\n                                            public void onClick(View v) {\r\n                                                if (!gameLost) {\r\n                                                    if (minePositions.get(finalI).get(finalJ)) {\r\n                                                        gameLost = true;\r\n                                                        showGameOver();\r\n                                                    } else {\r\n                                                        button.setEnabled(false);\r\n                                                        calcwin();\r\n                                                        checkForWin();\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                        rowButtons.add(button);\r\n                                        rowMinePositions.add(false);\r\n                                        gridLayout.addView(button);\r\n                                    }\r\n                                    buttons.add(rowButtons);\r\n                                    minePositions.add(rowMinePositions);\r\n                                }\r\n\r\n                                setupGame();\r\n                            } else {\r\n                                Toast.makeText(Minen.this, &quot;Nicht ausreichendes Guthaben&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    Toast.makeText(Minen.this, &quot;Einsatz setzen&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\nand there the relevant methods: \r\nSetupGame: \r\n\r\n    private void setupGame() {\r\n        gameLost = false;\r\n\r\n        // Reset the button states and mine positions\r\n        for (int i = 0; i &lt; gridSize; i++) {\r\n            for (int j = 0; j &lt; gridHeight; j++) {\r\n                Button button = buttons.get(i).get(j);\r\n                button.setEnabled(true);\r\n                button.setText(&quot;&quot;);\r\n                minePositions.get(i).set(j, false);\r\n            }\r\n        }\r\n\r\n        // Randomly generate mine positions\r\n        generateMinePositions();\r\n    }\r\n\r\ngenerateMinePositions(): \r\n\r\n     private void generateMinePositions() {\r\n        Random random = new Random();\r\n        int minesPlaced = 0;\r\n\r\n        while (minesPlaced &lt; numMines) {\r\n            int row = random.nextInt(4);\r\n            int col = random.nextInt(gridHeight);\r\n\r\n            if (!minePositions.get(row).get(col)) {\r\n                minePositions.get(row).set(col, true);\r\n                minesPlaced++;\r\n            }\r\n        }\r\n    }\r\n\r\nshowGameover() :\r\n\r\n    private void showGameOver() {\r\n        Toast.makeText(this, &quot;Game Over! You hit a mine.&quot;, Toast.LENGTH_SHORT).show();\r\n        for (int i = 0; i &lt; gridSize; i++) {\r\n            for (int j = 0; j &lt; gridHeight; j++) {\r\n                if (minePositions.get(i).get(j)) {\r\n                    buttons.get(i).get(j).setText(&quot;X&quot;);\r\n                }\r\n                buttons.get(i).get(j).setEnabled(false);\r\n            }\r\n        }\r\n    }\r\n\r\ncheckForWin():\r\n\r\n    private void checkForWin() {\r\n        for (int i = 0; i &lt; gridSize; i++) {\r\n            for (int j = 0; j &lt; gridHeight; j++) {\r\n                if (!minePositions.get(i).get(j) &amp;&amp; buttons.get(i).get(j).isEnabled()) {\r\n                    return; // Not all non-mine cells are uncovered yet\r\n                }\r\n            }\r\n        }\r\n\r\n        Toast.makeText(this, &quot;Congratulations! You win!&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n","title":"Why is a row of Buttons added after the first round?","body":"<p>The code is a mine game where there is a minefield made up out of buttons. The size and height of the minefield is set as 4 <code>gridsize</code> and 8 <code>gridHeight</code>.\nThe first-time initilisation works - the 4 x 8 field out of buttons pops up. But after the first game, when changing the SeekBar <code>minesSeekBar</code> the Field gets bigger by one row although <code>gridHeight</code> is not changed.\n<a href=\"https://i.stack.imgur.com/2mm7U.png\" rel=\"nofollow noreferrer\">how  it looks on the first game</a>, <a href=\"https://i.stack.imgur.com/DBK5q.png\" rel=\"nofollow noreferrer\">how it looks after the first game</a></p>\n<p>I do not quite understand how there is a  row added when <code>gridHeight</code> is never changed. I suspected that the error might be in the <code>start.setOnClickListener(){}</code> but i could not fix it as the code makes sense (to me). Everytime the field gets redone everytime you press start so it should theoratically be always the same.\ni do not think the error is in <code>setupGame()</code> as the gridsize is not changed in the method.</p>\n<p>Here is the xml:</p>\n<pre><code>&lt;Button\n    android:id=&quot;@+id/menu1&quot;\n    android:layout_width=&quot;55dp&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_alignParentTop=&quot;true&quot;\n    android:layout_marginStart=&quot;340dp&quot;\n    android:layout_marginTop=&quot;10dp&quot;\n    android:background=&quot;@drawable/baseline_menu_24&quot;\n    app:cornerRadius=&quot;15dp&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\n\n&lt;Button\n    android:id=&quot;@+id/start&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;START&quot;\n    android:layout_marginTop=&quot;5dp&quot;\n    android:layout_marginStart=&quot;0dp&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintHorizontal_bias=&quot;0.498&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintVertical_bias=&quot;0.005&quot;\n    tools:ignore=&quot;MissingConstraints&quot; /&gt;\n\n&lt;EditText\n    android:layout_marginStart=&quot;10dp&quot;\n    android:id=&quot;@+id/einsatz&quot;\n    android:layout_marginTop=&quot;10dp&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:hint=&quot;Einsatz&quot;\n    android:inputType=&quot;number&quot;\n    android:textColor=&quot;@color/black&quot;\n    android:textColorHighlight=&quot;@color/white&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n\n&lt;SeekBar\n    android:id=&quot;@+id/sizeSeekBar&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:max=&quot;8&quot;\n    android:progress=&quot;2&quot;\n    app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    tools:layout_editor_absoluteX=&quot;10dp&quot;\nandroid:visibility=&quot;gone&quot;/&gt; \n\n&lt;SeekBar\n    android:id=&quot;@+id/minesSeekBar&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:max=&quot;16&quot;\n    android:progress=&quot;2&quot;\n    app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\n    app:layout_constraintTop_toBottomOf=&quot;@+id/start&quot;\n    tools:layout_editor_absoluteX=&quot;10dp&quot; /&gt;\n\n&lt;GridLayout\n    android:id=&quot;@+id/gridlayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;400dp&quot;\n    android:layout_marginBottom=&quot;52dp&quot;\n    android:layout_weight=&quot;1&quot;\n    android:background=&quot;@drawable/custom_edittext&quot;\n    android:columnCount=&quot;4&quot;\n    android:rowCount=&quot;4&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    tools:layout_editor_absoluteX=&quot;9dp&quot; /&gt;\n</code></pre>\n<p>Here the code:</p>\n<p>public class Minen extends AppCompatActivity {</p>\n<pre><code>private int gridSize = 4; // Default grid size\nprivate int gridHeight = 8; // Default grid height\nprivate int numMines = 2; // Default number of mines\nprivate ArrayList&lt;ArrayList&lt;Button&gt;&gt; buttons;\nprivate ArrayList&lt;ArrayList&lt;Boolean&gt;&gt; minePositions;\nprivate boolean gameLost = false;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_minefield);\n    getSupportActionBar().hide();\n    Button menu = findViewById(R.id.menu1);\n    GridLayout gridLayout = findViewById(R.id.gridlayout);\n    SeekBar heightSeekBar = findViewById(R.id.sizeSeekBar);\n    SeekBar minesSeekBar = findViewById(R.id.minesSeekBar);\n    Button start = findViewById(R.id.start);\n    // Set up the height seek bar listener\n    heightSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n        @Override\n        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n           int x = progress + 1; // Adjust for a range of 2 to 10\n            setupGame();\n        }\n        @Override\n        public void onStartTrackingTouch(SeekBar seekBar) {}\n        @Override\n        public void onStopTrackingTouch(SeekBar seekBar) {\n        }\n    });\n    minesSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n        @Override\n        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n            numMines = progress;\n            setupGame();\n        }\n        @Override\n        public void onStartTrackingTouch(SeekBar seekBar) {}\n        @Override\n        public void onStopTrackingTouch(SeekBar seekBar) {}\n    });\n\n    // Initialize the ArrayLists for buttons and mine positions\n    buttons = new ArrayList&lt;&gt;();\n    minePositions = new ArrayList&lt;&gt;();\n\n    start.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            if (getEinsatzFromEditText() &gt; 0) {\n                kontostandpositiv(getEinsatzFromEditText(), new Callback() {\n                    @Override\n                    public void Callbackchecked(boolean kontostandPositiv) {\n                        if (kontostandPositiv) {\n                            kontostandandernminus(getEinsatzFromEditText());\n                            for (int i = 0; i &lt; gridSize; i++) {\n                                ArrayList&lt;Button&gt; rowButtons = new ArrayList&lt;&gt;();\n                                ArrayList&lt;Boolean&gt; rowMinePositions = new ArrayList&lt;&gt;();\n                                for (int j = 0; j &lt; gridHeight; j++) {\n                                    Button button = new Button(getApplicationContext());\n                                    int finalI = i;\n                                    int finalJ = j;\n                                    button.setOnClickListener(new View.OnClickListener() {\n                                        @Override\n                                        public void onClick(View v) {\n                                            if (!gameLost) {\n                                                if (minePositions.get(finalI).get(finalJ)) {\n                                                    gameLost = true;\n                                                    showGameOver();\n                                                } else {\n                                                    button.setEnabled(false);\n                                                    calcwin();\n                                                    checkForWin();\n                                                }\n                                            }\n                                        }\n                                    });\n                                    rowButtons.add(button);\n                                    rowMinePositions.add(false);\n                                    gridLayout.addView(button);\n                                }\n                                buttons.add(rowButtons);\n                                minePositions.add(rowMinePositions);\n                            }\n\n                            setupGame();\n                        } else {\n                            Toast.makeText(Minen.this, &quot;Nicht ausreichendes Guthaben&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                });\n            } else {\n                Toast.makeText(Minen.this, &quot;Einsatz setzen&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n</code></pre>\n<p>and there the relevant methods:\nSetupGame:</p>\n<pre><code>private void setupGame() {\n    gameLost = false;\n\n    // Reset the button states and mine positions\n    for (int i = 0; i &lt; gridSize; i++) {\n        for (int j = 0; j &lt; gridHeight; j++) {\n            Button button = buttons.get(i).get(j);\n            button.setEnabled(true);\n            button.setText(&quot;&quot;);\n            minePositions.get(i).set(j, false);\n        }\n    }\n\n    // Randomly generate mine positions\n    generateMinePositions();\n}\n</code></pre>\n<p>generateMinePositions():</p>\n<pre><code> private void generateMinePositions() {\n    Random random = new Random();\n    int minesPlaced = 0;\n\n    while (minesPlaced &lt; numMines) {\n        int row = random.nextInt(4);\n        int col = random.nextInt(gridHeight);\n\n        if (!minePositions.get(row).get(col)) {\n            minePositions.get(row).set(col, true);\n            minesPlaced++;\n        }\n    }\n}\n</code></pre>\n<p>showGameover() :</p>\n<pre><code>private void showGameOver() {\n    Toast.makeText(this, &quot;Game Over! You hit a mine.&quot;, Toast.LENGTH_SHORT).show();\n    for (int i = 0; i &lt; gridSize; i++) {\n        for (int j = 0; j &lt; gridHeight; j++) {\n            if (minePositions.get(i).get(j)) {\n                buttons.get(i).get(j).setText(&quot;X&quot;);\n            }\n            buttons.get(i).get(j).setEnabled(false);\n        }\n    }\n}\n</code></pre>\n<p>checkForWin():</p>\n<pre><code>private void checkForWin() {\n    for (int i = 0; i &lt; gridSize; i++) {\n        for (int j = 0; j &lt; gridHeight; j++) {\n            if (!minePositions.get(i).get(j) &amp;&amp; buttons.get(i).get(j).isEnabled()) {\n                return; // Not all non-mine cells are uncovered yet\n            }\n        }\n    }\n\n    Toast.makeText(this, &quot;Congratulations! You win!&quot;, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n"},{"tags":["java","dictionary","collections","initialization","idioms"],"comments":[{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":2,"creation_date":1463988262,"post_id":507602,"comment_id":62279931,"body_markdown":"For initializing a map in Java 8: http://stackoverflow.com/a/37384773/1216775","body":"For initializing a map in Java 8: <a href=\"http://stackoverflow.com/a/37384773/1216775\">stackoverflow.com/a/37384773/1216775</a>"},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":2,"creation_date":1497115932,"post_id":507602,"comment_id":75947669,"body_markdown":"Please, never use [double brace initialization](https://stackoverflow.com/q/924285/113632) - it&#39;s a hack, and an easy way to leak memory and cause other problems.","body":"Please, never use <a href=\"https://stackoverflow.com/q/924285/113632\">double brace initialization</a> - it&#39;s a hack, and an easy way to leak memory and cause other problems."},{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":0,"creation_date":1546359244,"post_id":507602,"comment_id":94831143,"body_markdown":"Java 9? If entries count &lt;= 10 use `Map.of` else `Map.ofEntries`, check https://stackoverflow.com/a/37384773/1216775","body":"Java 9? If entries count &lt;= 10 use <code>Map.of</code> else <code>Map.ofEntries</code>, check <a href=\"https://stackoverflow.com/a/37384773/1216775\">stackoverflow.com/a/37384773/1216775</a>"}],"answers":[{"comments":[{"owner":{"account_id":22157,"reputation":3901,"user_id":54396,"accept_rate":80,"display_name":"Patrick"},"score":3,"creation_date":1233693003,"post_id":507621,"comment_id":323079,"body_markdown":"Can&#39;t you easily do this in the first method by moving the new operator into the static {} block and wrapping it?","body":"Can&#39;t you easily do this in the first method by moving the new operator into the static {} block and wrapping it?"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":2,"creation_date":1233696323,"post_id":507621,"comment_id":323261,"body_markdown":"I&#39;d move the constructor call into the static initialised anyway. Anything else just looks odd.","body":"I&#39;d move the constructor call into the static initialised anyway. Anything else just looks odd."},{"owner":{"account_id":9921,"reputation":107684,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":2,"creation_date":1260460162,"post_id":507621,"comment_id":1781749,"body_markdown":"any idea what performance hit there might be from using an anonymous class as opposed to a concrete class?","body":"any idea what performance hit there might be from using an anonymous class as opposed to a concrete class?"}],"tags":[],"owner":{"account_id":1108,"reputation":9901,"user_id":1471,"accept_rate":64,"display_name":"Tim Frey"},"comment_count":3,"down_vote_count":5,"up_vote_count":109,"is_accepted":false,"score":104,"last_activity_date":1531893728,"creation_date":1233675898,"answer_id":507621,"question_id":507602,"body_markdown":"One advantage to the second method is that you can wrap it with `Collections.unmodifiableMap()` to guarantee that nothing is going to update the collection later:\r\n\r\n    private static final Map&lt;Integer, String&gt; CONSTANT_MAP = \r\n        Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {{ \r\n            put(1, &quot;one&quot;);\r\n            put(2, &quot;two&quot;);\r\n        }});\r\n\r\n     // later on...\r\n\r\n     CONSTANT_MAP.put(3, &quot;three&quot;); // going to throw an exception!","title":"How can I initialise a static Map?","body":"<p>One advantage to the second method is that you can wrap it with <code>Collections.unmodifiableMap()</code> to guarantee that nothing is going to update the collection later:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; CONSTANT_MAP = \n    Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {{ \n        put(1, \"one\");\n        put(2, \"two\");\n    }});\n\n // later on...\n\n CONSTANT_MAP.put(3, \"three\"); // going to throw an exception!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":589,"reputation":30827,"user_id":758,"accept_rate":77,"display_name":"Mark Renouf"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1233675934,"creation_date":1233675934,"answer_id":507626,"question_id":507602,"body_markdown":"The second method could invoke protected methods if needed. This can be useful for initializing classes which are immutable after construction.","title":"How can I initialise a static Map?","body":"<p>The second method could invoke protected methods if needed. This can be useful for initializing classes which are immutable after construction.</p>\n"},{"comments":[{"owner":{"account_id":60189,"reputation":6759,"user_id":179878,"display_name":"jasonmp85"},"score":11,"creation_date":1275553329,"post_id":507658,"comment_id":3023070,"body_markdown":"This is the idiom I&#39;ve used for years and I&#39;ve never had anyone bat an eye at it. I do the same for unmodifiable constant Sets and Lists too.","body":"This is the idiom I&#39;ve used for years and I&#39;ve never had anyone bat an eye at it. I do the same for unmodifiable constant Sets and Lists too."},{"owner":{"account_id":19677,"reputation":6235,"user_id":46304,"accept_rate":73,"display_name":"Luke"},"score":3,"creation_date":1304519810,"post_id":507658,"comment_id":6769296,"body_markdown":"How would I handle a HashMap&lt;String, String&gt; with a String key.  The Map object doesn&#39;t allow me to have a String key so I can&#39;t use unmodifiableMap().  I guess casting to a HashMap would defeat the purpose as well.  Any ideas?","body":"How would I handle a HashMap&lt;String, String&gt; with a String key.  The Map object doesn&#39;t allow me to have a String key so I can&#39;t use unmodifiableMap().  I guess casting to a HashMap would defeat the purpose as well.  Any ideas?"},{"owner":{"account_id":153083,"reputation":14598,"user_id":368085,"accept_rate":79,"display_name":"mluisbrown"},"score":0,"creation_date":1305627538,"post_id":507658,"comment_id":6971428,"body_markdown":"@Luke of course the Map object allows you to use a String key. I&#39;ve used the above idiom many times with Map&lt;String, String&gt;.","body":"@Luke of course the Map object allows you to use a String key. I&#39;ve used the above idiom many times with Map&lt;String, String&gt;."},{"owner":{"account_id":19677,"reputation":6235,"user_id":46304,"accept_rate":73,"display_name":"Luke"},"score":0,"creation_date":1305692068,"post_id":507658,"comment_id":6986364,"body_markdown":"@mluisbrown: Maybe it is an Android limitation (I forgot to mention that), as it won&#39;t let me use a String key for a Map object in an Android app.","body":"@mluisbrown: Maybe it is an Android limitation (I forgot to mention that), as it won&#39;t let me use a String key for a Map object in an Android app."},{"owner":{"account_id":153083,"reputation":14598,"user_id":368085,"accept_rate":79,"display_name":"mluisbrown"},"score":32,"creation_date":1306345100,"post_id":507658,"comment_id":7111703,"body_markdown":"@Luke I seriously doubt that Android has such a limitation. It makes no sense at all. A quick search found [this question](http://stackoverflow.com/questions/3013538/use-flurryagent-oneventstring-eventid-mapstring-string-parameters) here (and many others) which seems to imply you can use a String key for a Map object in Android.","body":"@Luke I seriously doubt that Android has such a limitation. It makes no sense at all. A quick search found <a href=\"http://stackoverflow.com/questions/3013538/use-flurryagent-oneventstring-eventid-mapstring-string-parameters\">this question</a> here (and many others) which seems to imply you can use a String key for a Map object in Android."},{"owner":{"account_id":255541,"reputation":6083,"user_id":535664,"display_name":"Jordan"},"score":11,"creation_date":1325628834,"post_id":507658,"comment_id":10854631,"body_markdown":"So no one else bothers to investigate, I can confirm there&#39;s no problem with using a String key for a Map object on Android.","body":"So no one else bothers to investigate, I can confirm there&#39;s no problem with using a String key for a Map object on Android."},{"owner":{"account_id":9943,"reputation":28532,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"score":11,"creation_date":1325634837,"post_id":507658,"comment_id":10856121,"body_markdown":"Jordan: it is an old topic now but I suspect @Luke was trying to use a string as a key in a map that had a different key type, e.g. Map&lt;Integer, String&gt;.","body":"Jordan: it is an old topic now but I suspect @Luke was trying to use a string as a key in a map that had a different key type, e.g. Map&lt;Integer, String&gt;."},{"owner":{"account_id":1827567,"reputation":1054,"user_id":1659875,"display_name":"spandey"},"score":0,"creation_date":1526466013,"post_id":507658,"comment_id":87752553,"body_markdown":"what is use of creating map inside static block, static reference created outside of static block can be used? could you please explain?","body":"what is use of creating map inside static block, static reference created outside of static block can be used? could you please explain?"},{"owner":{"account_id":9943,"reputation":28532,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"score":1,"creation_date":1526588369,"post_id":507658,"comment_id":87815677,"body_markdown":"In this case, the reason for creating a local map inside the static block is to eventually convert it to an unmodifiableMap, so that Test.myMap is unmodifiable. I do not understand what you mean by &quot;eference created outside of static block can be used&quot;","body":"In this case, the reason for creating a local map inside the static block is to eventually convert it to an unmodifiableMap, so that Test.myMap is unmodifiable. I do not understand what you mean by &quot;eference created outside of static block can be used&quot;"}],"tags":[],"owner":{"account_id":9943,"reputation":28532,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"comment_count":9,"down_vote_count":4,"up_vote_count":1198,"is_accepted":true,"score":1194,"last_activity_date":1554990499,"creation_date":1233676264,"answer_id":507658,"question_id":507602,"body_markdown":"The instance initialiser is just syntactic sugar in this case, right? I don&#39;t see why you need an extra anonymous class just to initialize. And it won&#39;t work if the class being created is final.\r\n\r\nYou can create an immutable map using a static initialiser too:\r\n\r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap;\r\n        static {\r\n            Map&lt;Integer, String&gt; aMap = ....;\r\n            aMap.put(1, &quot;one&quot;);\r\n            aMap.put(2, &quot;two&quot;);\r\n            myMap = Collections.unmodifiableMap(aMap);\r\n        }\r\n    }","title":"How can I initialise a static Map?","body":"<p>The instance initialiser is just syntactic sugar in this case, right? I don't see why you need an extra anonymous class just to initialize. And it won't work if the class being created is final.</p>\n\n<p>You can create an immutable map using a static initialiser too:</p>\n\n<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; myMap;\n    static {\n        Map&lt;Integer, String&gt; aMap = ....;\n        aMap.put(1, \"one\");\n        aMap.put(2, \"two\");\n        myMap = Collections.unmodifiableMap(aMap);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4804,"reputation":268589,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"score":1,"creation_date":1233676871,"post_id":507686,"comment_id":321997,"body_markdown":"In which situation would you use an anonymous subclass to initialise a hashmap then?","body":"In which situation would you use an anonymous subclass to initialise a hashmap then?"},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":6,"creation_date":1233735009,"post_id":507686,"comment_id":324479,"body_markdown":"Never to initialize a Collection.","body":"Never to initialize a Collection."},{"owner":{"account_id":105984,"reputation":2828,"user_id":282544,"accept_rate":70,"display_name":"leba-lev"},"score":0,"creation_date":1327415274,"post_id":507686,"comment_id":11263222,"body_markdown":"Could you explain why using a static initializer is a better choice than creating an anonymous subclass?","body":"Could you explain why using a static initializer is a better choice than creating an anonymous subclass?"},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":3,"creation_date":1327587272,"post_id":507686,"comment_id":11308921,"body_markdown":"@rookie There are several reasons given in other answers favoring the static init. The goal here _is_ to initialize, so why bring in the subclassing, except maybe to save a few keystrokes? (If you want to save on keystrokes, Java is definitely not a good choice as a programming language.) One rule of thumb I use when programming in Java is: subclass as little as possible (and never when it can be reasonably avoided).","body":"@rookie There are several reasons given in other answers favoring the static init. The goal here <i>is</i> to initialize, so why bring in the subclassing, except maybe to save a few keystrokes? (If you want to save on keystrokes, Java is definitely not a good choice as a programming language.) One rule of thumb I use when programming in Java is: subclass as little as possible (and never when it can be reasonably avoided)."},{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":0,"creation_date":1492766835,"post_id":507686,"comment_id":74129620,"body_markdown":"@eljenso - the reason I generally favour the subclass syntax for this is that it *puts the initialisation inline, where it belongs*.  A second-best choice is to call a static method that returns the initialised map.  But I&#39;m afraid I&#39;d look at your code and have to spend a few seconds working out where MY_MAP comes from, and that&#39;s time that I don&#39;t want to have to waste.  Any improvement to readability is a bonus, and the performance consequences are minimal, so it seems like the best option to me.","body":"@eljenso - the reason I generally favour the subclass syntax for this is that it <i>puts the initialisation inline, where it belongs</i>.  A second-best choice is to call a static method that returns the initialised map.  But I&#39;m afraid I&#39;d look at your code and have to spend a few seconds working out where MY_MAP comes from, and that&#39;s time that I don&#39;t want to have to waste.  Any improvement to readability is a bonus, and the performance consequences are minimal, so it seems like the best option to me."},{"owner":{"account_id":4185076,"reputation":2839,"user_id":3429015,"display_name":"Danon"},"score":0,"creation_date":1553098546,"post_id":507686,"comment_id":97262301,"body_markdown":"You can&#39;t use a methods parameter in a static initiializer.","body":"You can&#39;t use a methods parameter in a static initiializer."}],"tags":[],"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"comment_count":6,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1233735579,"creation_date":1233676518,"answer_id":507686,"question_id":507602,"body_markdown":"I would never create an anonymous subclass in this situation. Static initializers work equally well, if you would like to make the map unmodifiable for example:\r\n\r\n\tprivate static final Map&lt;Integer, String&gt; MY_MAP;\r\n\tstatic\r\n\t{\r\n\t\tMap&lt;Integer, String&gt;tempMap = new HashMap&lt;Integer, String&gt;();\r\n\t\ttempMap.put(1, &quot;one&quot;);\r\n\t\ttempMap.put(2, &quot;two&quot;);\r\n\t\tMY_MAP = Collections.unmodifiableMap(tempMap);\r\n\t}\r\n","title":"How can I initialise a static Map?","body":"<p>I would never create an anonymous subclass in this situation. Static initializers work equally well, if you would like to make the map unmodifiable for example:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; MY_MAP;\nstatic\n{\n    Map&lt;Integer, String&gt;tempMap = new HashMap&lt;Integer, String&gt;();\n    tempMap.put(1, \"one\");\n    tempMap.put(2, \"two\");\n    MY_MAP = Collections.unmodifiableMap(tempMap);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1233696402,"post_id":507800,"comment_id":323272,"body_markdown":"You could create the map using the double-brace idiom, and then copy it.","body":"You could create the map using the double-brace idiom, and then copy it."}],"tags":[],"owner":{"account_id":4942,"reputation":15741,"user_id":7679,"accept_rate":100,"display_name":"Chase Seibert"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1233677887,"creation_date":1233677887,"answer_id":507800,"question_id":507602,"body_markdown":"I like the anonymous class syntax; it&#39;s just less code. However, one major con I have found is that you won&#39;t be able to serialize that object via remoting. You will get an exception about not being able to find the anonymous class on the remote side.","title":"How can I initialise a static Map?","body":"<p>I like the anonymous class syntax; it's just less code. However, one major con I have found is that you won't be able to serialize that object via remoting. You will get an exception about not being able to find the anonymous class on the remote side.</p>\n"},{"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":3,"creation_date":1233696450,"post_id":507850,"comment_id":323275,"body_markdown":"In this particular case it&#39;s static, so no outer instance.","body":"In this particular case it&#39;s static, so no outer instance."},{"owner":{"account_id":60189,"reputation":6759,"user_id":179878,"display_name":"jasonmp85"},"score":0,"creation_date":1275553608,"post_id":507850,"comment_id":3023102,"body_markdown":"Arguably XStream shouldn&#39;t be trying to serialize stuff like this (it&#39;s static. Why would you need to serialize a static variable?)","body":"Arguably XStream shouldn&#39;t be trying to serialize stuff like this (it&#39;s static. Why would you need to serialize a static variable?)"}],"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1233742877,"creation_date":1233678686,"answer_id":507850,"question_id":507602,"body_markdown":"The anonymous class you&#39;re creating works well. However you should be aware that this is an *inner* class and as such, it&#39;ll contain a reference to the surrounding class instance. So you&#39;ll find you can&#39;t do certain things with it (using [XStream][1] for one). You&#39;ll get some very strange errors.\r\n\r\nHaving said that, so long as you&#39;re aware then this approach is fine. I use it most of the time for initialising all sorts of collections in a concise fashion. \r\n\r\n\r\n  [1]: http://xstream.codehaus.org/\r\n\r\nEDIT: Pointed out correctly in the comments that this is a static class. Obviously I didn&#39;t read this closely enough. However my comments *do* still apply to anonymous inner classes.","title":"How can I initialise a static Map?","body":"<p>The anonymous class you're creating works well. However you should be aware that this is an <em>inner</em> class and as such, it'll contain a reference to the surrounding class instance. So you'll find you can't do certain things with it (using <a href=\"http://xstream.codehaus.org/\" rel=\"noreferrer\">XStream</a> for one). You'll get some very strange errors.</p>\n\n<p>Having said that, so long as you're aware then this approach is fine. I use it most of the time for initialising all sorts of collections in a concise fashion. </p>\n\n<p>EDIT: Pointed out correctly in the comments that this is a static class. Obviously I didn't read this closely enough. However my comments <em>do</em> still apply to anonymous inner classes.</p>\n"},{"comments":[{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Pa≈≠lo Ebermann"},"score":0,"creation_date":1391027484,"post_id":508363,"comment_id":32353365,"body_markdown":"The problem with this approach is that it is not type-safe at all (and if you are using Java, you want type safety). You can put any kind of objects as keys and values. It only really works for a `Map&lt;Object, Object&gt;` (though one could use an analogous approach with an `String[][]` for `Map&lt;String,String&gt;` and similar for other `Map&lt;T,T&gt;`. It doesn&#39;t work for Maps where the key-type is different from the value type.","body":"The problem with this approach is that it is not type-safe at all (and if you are using Java, you want type safety). You can put any kind of objects as keys and values. It only really works for a <code>Map&lt;Object, Object&gt;</code> (though one could use an analogous approach with an <code>String[][]</code> for <code>Map&lt;String,String&gt;</code> and similar for other <code>Map&lt;T,T&gt;</code>. It doesn&#39;t work for Maps where the key-type is different from the value type."}],"tags":[],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"comment_count":1,"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1233686456,"creation_date":1233686456,"answer_id":508363,"question_id":507602,"body_markdown":"I&#39;ve done something a bit different. Not the best, but it works for me. Maybe it could be &quot;genericized&quot;.\r\n\r\n    private static final Object[][] ENTRIES =\r\n    {\r\n      {new Integer(1), &quot;one&quot;},\r\n      {new Integer(2), &quot;two&quot;},\r\n    };\r\n    private static final Map myMap = newMap(ENTRIES);\r\n    \r\n    private static Map newMap(Object[][] entries)\r\n    {\r\n      Map map = new HashMap();\r\n    \r\n      for (int x = 0; x &lt; entries.length; x++)\r\n      {\r\n        Object[] entry = entries[x];\r\n    \r\n        map.put(entry[0], entry[1]);\r\n      }\r\n    \r\n      return map;\r\n    }","title":"How can I initialise a static Map?","body":"<p>I've done something a bit different. Not the best, but it works for me. Maybe it could be \"genericized\".</p>\n\n<pre><code>private static final Object[][] ENTRIES =\n{\n  {new Integer(1), \"one\"},\n  {new Integer(2), \"two\"},\n};\nprivate static final Map myMap = newMap(ENTRIES);\n\nprivate static Map newMap(Object[][] entries)\n{\n  Map map = new HashMap();\n\n  for (int x = 0; x &lt; entries.length; x++)\n  {\n    Object[] entry = entries[x];\n\n    map.put(entry[0], entry[1]);\n  }\n\n  return map;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7260,"reputation":10592,"user_id":12547,"accept_rate":79,"display_name":"Kaarel"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1391027272,"creation_date":1233696782,"answer_id":508988,"question_id":507602,"body_markdown":"Maybe it&#39;s interesting to check out [Google Collections][1], e.g. the videos that they have on their page. They provide various ways to initialize maps and sets, and provide immutable collections as well.\r\n\r\nUpdate: This library is now named [Guava][2].\r\n\r\n\r\n  [1]: http://code.google.com/p/google-collections/\r\n  [2]: https://code.google.com/p/guava-libraries/","title":"How can I initialise a static Map?","body":"<p>Maybe it's interesting to check out <a href=\"http://code.google.com/p/google-collections/\" rel=\"noreferrer\">Google Collections</a>, e.g. the videos that they have on their page. They provide various ways to initialize maps and sets, and provide immutable collections as well.</p>\n\n<p>Update: This library is now named <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a>.</p>\n"},{"comments":[{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":5,"creation_date":1388327515,"post_id":509016,"comment_id":31231453,"body_markdown":"Of the pure JDK options (no libs), I like this the most, because map definition is clearly linked to its initialisation. Also agreed on constant naming.","body":"Of the pure JDK options (no libs), I like this the most, because map definition is clearly linked to its initialisation. Also agreed on constant naming."},{"owner":{"account_id":216960,"reputation":121,"user_id":472509,"display_name":"romulusnr"},"score":0,"creation_date":1587434982,"post_id":509016,"comment_id":108504576,"body_markdown":"It never occurred to me that you could do this.","body":"It never occurred to me that you could do this."}],"tags":[],"owner":{"account_id":19947,"reputation":32593,"user_id":47190,"accept_rate":80,"display_name":"Peter ≈†tibran&#253;"},"comment_count":2,"down_vote_count":1,"up_vote_count":210,"is_accepted":false,"score":209,"last_activity_date":1584539155,"creation_date":1233697214,"answer_id":509016,"question_id":507602,"body_markdown":"I would use:\r\n\r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; MY_MAP = createMap();\r\n    \r\n        private static Map&lt;Integer, String&gt; createMap() {\r\n            Map&lt;Integer, String&gt; result = new HashMap&lt;&gt;();\r\n            result.put(1, &quot;one&quot;);\r\n            result.put(2, &quot;two&quot;);\r\n            return Collections.unmodifiableMap(result);\r\n        }\r\n    }\r\n\r\n1. it avoids an anonymous class, which I personally consider to be a bad style, and avoid\r\n2. it makes the creation of map more explicit\r\n3. it makes map unmodifiable\r\n4. as MY_MAP is constant, I would name it like constant","title":"How can I initialise a static Map?","body":"<p>I would use:</p>\n\n<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; MY_MAP = createMap();\n\n    private static Map&lt;Integer, String&gt; createMap() {\n        Map&lt;Integer, String&gt; result = new HashMap&lt;&gt;();\n        result.put(1, \"one\");\n        result.put(2, \"two\");\n        return Collections.unmodifiableMap(result);\n    }\n}\n</code></pre>\n\n<ol>\n<li>it avoids an anonymous class, which I personally consider to be a bad style, and avoid</li>\n<li>it makes the creation of map more explicit</li>\n<li>it makes map unmodifiable</li>\n<li>as MY_MAP is constant, I would name it like constant</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":48,"creation_date":1275554122,"post_id":1134205,"comment_id":3023142,"body_markdown":"That technique is called double brace initialization: http://stackoverflow.com/questions/1372113/meaning-of-new-class-initialization-idiom/1372124#1372124 It&#39;s not a special Java 5 syntax, it&#39;s just a trick with an anonymous class with an instance initializer.","body":"That technique is called double brace initialization: <a href=\"http://stackoverflow.com/questions/1372113/meaning-of-new-class-initialization-idiom/1372124#1372124\" title=\"meaning of new class initialization idiom\">stackoverflow.com/questions/1372113/&hellip;</a> It&#39;s not a special Java 5 syntax, it&#39;s just a trick with an anonymous class with an instance initializer."},{"owner":{"account_id":226808,"reputation":9956,"user_id":488054,"accept_rate":85,"display_name":"nbarraille"},"score":13,"creation_date":1321578495,"post_id":1134205,"comment_id":10042701,"body_markdown":"Quick question regarding the double brace initialization: When doing this, Eclipse issues a Warning about a missing Serial ID. On one hand, I don&#39;t see why a Serial ID would be needed in this specific case, but on the other hand, I usually don&#39;t like supressing warnings. What are your thoughts on this?","body":"Quick question regarding the double brace initialization: When doing this, Eclipse issues a Warning about a missing Serial ID. On one hand, I don&#39;t see why a Serial ID would be needed in this specific case, but on the other hand, I usually don&#39;t like supressing warnings. What are your thoughts on this?"},{"owner":{"account_id":2033314,"reputation":19630,"user_id":1816356,"accept_rate":89,"display_name":"noone"},"score":9,"creation_date":1383086591,"post_id":1134205,"comment_id":29213299,"body_markdown":"@nbarraille That&#39;s because `HashMap implements Serializable`. Since you actually create a subclass of HashMap using this &quot;trick&quot;, you implicitly creating a Serializable class. And for this you should supply a serialUID.","body":"@nbarraille That&#39;s because <code>HashMap implements Serializable</code>. Since you actually create a subclass of HashMap using this &quot;trick&quot;, you implicitly creating a Serializable class. And for this you should supply a serialUID."},{"owner":{"account_id":1047596,"reputation":9325,"user_id":1052284,"accept_rate":44,"display_name":"Mark Jeronimus"},"score":6,"creation_date":1487434531,"post_id":1134205,"comment_id":71788352,"body_markdown":"`Double brace initialization can cause memory leaks when used from a non-static context, because the anonymous class created will maintain a reference to the surrounding object. It has worse performance than regular initialization because of the additional class loading required. It can cause equals() comparisons to fail, if the equals() method does not accept subclasses as parameter. And finally, pre Java 9 it cannot be combined with the diamond operator, because that cannot be used with anonymous classes.` ‚Äì IntelliJ","body":"<code>Double brace initialization can cause memory leaks when used from a non-static context, because the anonymous class created will maintain a reference to the surrounding object. It has worse performance than regular initialization because of the additional class loading required. It can cause equals() comparisons to fail, if the equals() method does not accept subclasses as parameter. And finally, pre Java 9 it cannot be combined with the diamond operator, because that cannot be used with anonymous classes.</code> ‚Äì IntelliJ"},{"owner":{"account_id":200488,"reputation":2393,"user_id":446368,"accept_rate":49,"display_name":"Mejmo"},"score":0,"creation_date":1490998584,"post_id":1134205,"comment_id":73377938,"body_markdown":"@MarkJeronimus Diamond operator can be used with anonymous inner classes in Java9.","body":"@MarkJeronimus Diamond operator can be used with anonymous inner classes in Java9."},{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":3,"creation_date":1492766507,"post_id":1134205,"comment_id":74129357,"body_markdown":"@MarkJeronimus - The suggested use *is* a static context.  The performance may be worse, but not noticeably so when dealing with a presumably small number of statically defined maps.  `HashMap.equals` is defined in `AbstractMap` and works on *any* subclass of Map, so that isn&#39;t a concern here.  The diamond operator thing is annoying, but as mentioned has now been resolved.","body":"@MarkJeronimus - The suggested use <i>is</i> a static context.  The performance may be worse, but not noticeably so when dealing with a presumably small number of statically defined maps.  <code>HashMap.equals</code> is defined in <code>AbstractMap</code> and works on <i>any</i> subclass of Map, so that isn&#39;t a concern here.  The diamond operator thing is annoying, but as mentioned has now been resolved."},{"owner":{"account_id":1520694,"reputation":5745,"user_id":1420441,"accept_rate":100,"display_name":"Henrique de Sousa"},"score":0,"creation_date":1548334388,"post_id":1134205,"comment_id":95509510,"body_markdown":"SonarLint complains about Double brace initialization because it can lead to memory leak.","body":"SonarLint complains about Double brace initialization because it can lead to memory leak."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1576720970,"post_id":1134205,"comment_id":104993657,"body_markdown":"@nbarraille &quot;missing Serial ID&quot; is one of few warnings I switched off. I&#39;d recommend everyone to do the same, unless (1) they use Java serialization (not recommended), (2) they persist their `Serializable`s and (3) are willing to maintain compatibility of the serialized form. When any of the conditions is false, then you need no serialUUID. Especially, when only (1) and (2) hold, the default (&quot;missing&quot;) serialUUID is perfect.","body":"@nbarraille &quot;missing Serial ID&quot; is one of few warnings I switched off. I&#39;d recommend everyone to do the same, unless (1) they use Java serialization (not recommended), (2) they persist their <code>Serializable</code>s and (3) are willing to maintain compatibility of the serialized form. When any of the conditions is false, then you need no serialUUID. Especially, when only (1) and (2) hold, the default (&quot;missing&quot;) serialUUID is perfect."}],"tags":[],"owner":{"account_id":8244,"reputation":36591,"user_id":14749,"accept_rate":81,"display_name":"Chris Noe"},"comment_count":8,"down_vote_count":10,"up_vote_count":202,"is_accepted":false,"score":192,"last_activity_date":1247693394,"creation_date":1247693394,"answer_id":1134205,"question_id":507602,"body_markdown":"Java 5 provides this more compact syntax:\r\n\r\n    static final Map&lt;String , String&gt; FLAVORS = new HashMap&lt;String , String&gt;() {{\r\n        put(&quot;Up&quot;,    &quot;Down&quot;);\r\n        put(&quot;Charm&quot;, &quot;Strange&quot;);\r\n        put(&quot;Top&quot;,   &quot;Bottom&quot;);\r\n    }};\r\n","title":"How can I initialise a static Map?","body":"<p>Java 5 provides this more compact syntax:</p>\n\n<pre><code>static final Map&lt;String , String&gt; FLAVORS = new HashMap&lt;String , String&gt;() {{\n    put(\"Up\",    \"Down\");\n    put(\"Charm\", \"Strange\");\n    put(\"Top\",   \"Bottom\");\n}};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":618472,"reputation":479,"user_id":357230,"display_name":"Leninkumar Koppoju"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1275553803,"creation_date":1275553128,"answer_id":2964275,"question_id":507602,"body_markdown":"    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap;\r\n        static {\r\n            Map&lt;Integer, String&gt; aMap = ....;\r\n            aMap.put(1, &quot;one&quot;);\r\n            aMap.put(2, &quot;two&quot;);\r\n            myMap = Collections.unmodifiableMap(aMap);\r\n        }\r\n    }\r\n\r\nIf we declare more than one constant then that code will be written in static block and that is hard to maintain in future. So it is better to use anonymous class.\r\n\r\n    public class Test {\r\n       \r\n        public static final Map numbers = Collections.unmodifiableMap(new HashMap(2, 1.0f){\r\n            {\r\n                put(1, &quot;one&quot;);\r\n                put(2, &quot;two&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\nAnd it is suggested to used unmodifiableMap for constants other wise it can&#39;t be treated as constant.","title":"How can I initialise a static Map?","body":"<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; myMap;\n    static {\n        Map&lt;Integer, String&gt; aMap = ....;\n        aMap.put(1, \"one\");\n        aMap.put(2, \"two\");\n        myMap = Collections.unmodifiableMap(aMap);\n    }\n}\n</code></pre>\n\n<p>If we declare more than one constant then that code will be written in static block and that is hard to maintain in future. So it is better to use anonymous class.</p>\n\n<pre><code>public class Test {\n\n    public static final Map numbers = Collections.unmodifiableMap(new HashMap(2, 1.0f){\n        {\n            put(1, \"one\");\n            put(2, \"two\");\n        }\n    });\n}\n</code></pre>\n\n<p>And it is suggested to used unmodifiableMap for constants other wise it can't be treated as constant.</p>\n"},{"tags":[],"owner":{"account_id":17795,"reputation":24571,"user_id":40214,"accept_rate":79,"display_name":"Dennis C"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1292128143,"creation_date":1292128143,"answer_id":4420400,"question_id":507602,"body_markdown":"I could strongly suggest the &quot;double brace initialization&quot; style over static block style.\r\n\r\nSomeone may comment that they don&#39;t like anonymous class, overhead, performance, etc.\r\n\r\nBut that I more consider is the code readability and maintainability. In this point of view, I stand a double brace is a better code style rather then static method.\r\n\r\n1. The elements are nested and inline.\r\n2. It is more OO, not procedural.\r\n3. the performance impact is really small and could be ignored.\r\n4. Better IDE outline support (rather then many anonymous static{} block)\r\n5. You saved few lines of comment to bring them relationship.\r\n6. Prevent possible element leak/instance lead of uninitialized object from exception and bytecode optimizer.\r\n7. No worry about the order of execution of static block.\r\n\r\nIn addition, it you aware the GC of the anonymous class, you can always convert it to a normal HashMap by using `new HashMap(Map map)`.\r\n\r\nYou can do this until you faced another problem. If you do, you should use complete another coding style (e.g. no static, factory class) for it.","title":"How can I initialise a static Map?","body":"<p>I could strongly suggest the \"double brace initialization\" style over static block style.</p>\n\n<p>Someone may comment that they don't like anonymous class, overhead, performance, etc.</p>\n\n<p>But that I more consider is the code readability and maintainability. In this point of view, I stand a double brace is a better code style rather then static method.</p>\n\n<ol>\n<li>The elements are nested and inline.</li>\n<li>It is more OO, not procedural.</li>\n<li>the performance impact is really small and could be ignored.</li>\n<li>Better IDE outline support (rather then many anonymous static{} block)</li>\n<li>You saved few lines of comment to bring them relationship.</li>\n<li>Prevent possible element leak/instance lead of uninitialized object from exception and bytecode optimizer.</li>\n<li>No worry about the order of execution of static block.</li>\n</ol>\n\n<p>In addition, it you aware the GC of the anonymous class, you can always convert it to a normal HashMap by using <code>new HashMap(Map map)</code>.</p>\n\n<p>You can do this until you faced another problem. If you do, you should use complete another coding style (e.g. no static, factory class) for it.</p>\n"},{"comments":[{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":21,"creation_date":1327659097,"post_id":7258027,"comment_id":11327561,"body_markdown":"Seems like our fellow SO admins have deleted the venerable &quot;Most useful free third party Java libraries&quot; question to which I linked. :( Damn them.","body":"Seems like our fellow SO admins have deleted the venerable &quot;Most useful free third party Java libraries&quot; question to which I linked. :( Damn them."},{"owner":{"account_id":54018,"reputation":13198,"user_id":161580,"display_name":"crunchdog"},"score":2,"creation_date":1336030178,"post_id":7258027,"comment_id":13456152,"body_markdown":"I agree, this is the nicest way of initializing a constant map. Not only more readable but also since [Collections.unmodifiableMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#unmodifiableMap(java.util.Map)) returns a read-only view of the underlying map (that still can be modified).","body":"I agree, this is the nicest way of initializing a constant map. Not only more readable but also since <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#unmodifiableMap(java.util.Map)\" rel=\"nofollow noreferrer\">Collections.unmodifiableMap</a> returns a read-only view of the underlying map (that still can be modified)."},{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":11,"creation_date":1361977609,"post_id":7258027,"comment_id":21269971,"body_markdown":"I can now see deleted questions (with 10k+ rep), so here&#39;s a **[copy of &#39;Most useful free third-party Java libraries&#39;](https://dl.dropbox.com/u/2896691/Most-useful-Java-libs.html)**. It&#39;s only the first page, but at least you can find the [Guava resources](https://dl.dropbox.com/u/2896691/Most-useful-Java-libs.html#132639) mentioned above.","body":"I can now see deleted questions (with 10k+ rep), so here&#39;s a <b><a href=\"https://dl.dropbox.com/u/2896691/Most-useful-Java-libs.html\" rel=\"nofollow noreferrer\">copy of &#39;Most useful free third-party Java libraries&#39;</a></b>. It&#39;s only the first page, but at least you can find the <a href=\"https://dl.dropbox.com/u/2896691/Most-useful-Java-libs.html#132639\" rel=\"nofollow noreferrer\">Guava resources</a> mentioned above."},{"owner":{"account_id":403449,"reputation":4350,"user_id":771217,"accept_rate":79,"display_name":"Wrench"},"score":2,"creation_date":1490020761,"post_id":7258027,"comment_id":72912369,"body_markdown":"I really prefer this approach, although it&#39;s beneficial to know how to do it without extra dependencies.","body":"I really prefer this approach, although it&#39;s beneficial to know how to do it without extra dependencies."},{"owner":{"account_id":3296493,"reputation":1463,"user_id":2773647,"accept_rate":67,"display_name":"cybersoft"},"score":2,"creation_date":1496735964,"post_id":7258027,"comment_id":75768797,"body_markdown":"[JEP 186](http://openjdk.java.net/jeps/186) still not closed, so it may introduce new features related to collection literals","body":"<a href=\"http://openjdk.java.net/jeps/186\" rel=\"nofollow noreferrer\">JEP 186</a> still not closed, so it may introduce new features related to collection literals"},{"owner":{"account_id":4158942,"reputation":1091,"user_id":3409441,"accept_rate":100,"display_name":"Terran"},"score":0,"creation_date":1514469012,"post_id":7258027,"comment_id":82985507,"body_markdown":"Instead of lazily using unmodifiable maps (which are mostlikely &quot;stringly-typed&quot;), consider creating a proper Class or Enum / EnumSet.","body":"Instead of lazily using unmodifiable maps (which are mostlikely &quot;stringly-typed&quot;), consider creating a proper Class or Enum / EnumSet."},{"owner":{"account_id":471679,"reputation":411,"user_id":879619,"display_name":"Vectorjohn"},"score":0,"creation_date":1516044584,"post_id":7258027,"comment_id":83522389,"body_markdown":"My only complaint with the ImmutableMap.of(...) approach is it can&#39;t possibly be type safe, unless the library specifically hard-coded static methods with varying length arguments. Which I guess is why it only worked up to 5 entries. It looks like Java 9 will have that same limitation with the convenience factory methods (but maybe more, e.g. 10 entries). However they mention static factory methods for Map.Entry so you can do arbitrary length:\nMap.ofEntries(entry(k1, v1), ...)","body":"My only complaint with the ImmutableMap.of(...) approach is it can&#39;t possibly be type safe, unless the library specifically hard-coded static methods with varying length arguments. Which I guess is why it only worked up to 5 entries. It looks like Java 9 will have that same limitation with the convenience factory methods (but maybe more, e.g. 10 entries). However they mention static factory methods for Map.Entry so you can do arbitrary length: Map.ofEntries(entry(k1, v1), ...)"},{"owner":{"account_id":3024105,"reputation":421,"user_id":2564491,"accept_rate":71,"display_name":"mid"},"score":0,"creation_date":1516803916,"post_id":7258027,"comment_id":83839082,"body_markdown":"The Java 9 method is clean and all, until you realize [how it was implemented](http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/86f19074aad2/src/java.base/share/classes/java/util/Map.java#l1564)","body":"The Java 9 method is clean and all, until you realize <a href=\"http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/86f19074aad2/src/java.base/share/classes/java/util/Map.java#l1564\" rel=\"nofollow noreferrer\">how it was implemented</a>"}],"tags":[],"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"comment_count":8,"down_vote_count":0,"up_vote_count":485,"is_accepted":false,"score":485,"last_activity_date":1582375904,"creation_date":1314799117,"answer_id":7258027,"question_id":507602,"body_markdown":"I like the [Guava][1] way of initialising a static, immutable map:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.of(\r\n        1, &quot;one&quot;,\r\n        2, &quot;two&quot;\r\n    );\r\n\r\nAs you can see, it&#39;s very concise (because of the convenient factory methods in [`ImmutableMap`][2]).\r\n\r\nIf you want the map to have more than 5 entries, you can no longer use `ImmutableMap.of()`. Instead, try [`ImmutableMap.builder()`][3] along these lines:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.&lt;Integer, String&gt;builder()\r\n        .put(1, &quot;one&quot;)\r\n        .put(2, &quot;two&quot;)\r\n    \t// ... \r\n        .put(15, &quot;fifteen&quot;)\r\n        .build();\r\n\r\nTo learn more about the benefits of Guava&#39;s immutable collection utilities, see [*Immutable Collections Explained* in Guava User Guide][4].\r\n\r\n(A subset of) Guava used to be called *Google Collections*. If you aren&#39;t using this library in your Java project yet, I **strongly** recommend trying it out! Guava has quickly become one of the most popular and useful free 3rd party libs for Java, as [fellow SO users agree][5]. (If you are new to it, there are some excellent learning resources behind that link.)\r\n\r\n----\r\n\r\n**Update (2015)**: As for **Java 8**, well, I would still use the Guava approach because it is way cleaner than anything else. If you don&#39;t want Guava dependency, consider a [plain old init method][6]. The hack with [two-dimensional array and Stream API][7] is pretty ugly if you ask me, and gets uglier if you need to create a Map whose keys and values are not the same type (like `Map&lt;Integer, String&gt;` in the question).\r\n\r\nAs for future of Guava in general, with regards to Java 8, Louis Wasserman [said this][8] back in 2014, and [*update*] in 2016 it was announced that [**Guava 21 will require and properly support Java 8**][9].\r\n\r\n----------\r\n\r\n**Update (2016)**: As [Tagir Valeev points out][10], **Java 9** will finally make this clean to do using nothing but pure JDK, by adding [convenience factory methods][11] for collections:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = Map.of(\r\n        1, &quot;one&quot;, \r\n        2, &quot;two&quot;\r\n    );\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\r\n  [3]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--\r\n  [4]: https://github.com/google/guava/wiki/ImmutableCollectionsExplained\r\n  [5]: https://stackoverflow.com/questions/130095/most-useful-free-third-party-java-libraries/132639#132639\r\n  [6]: https://stackoverflow.com/a/509016/56285\r\n  [7]: https://stackoverflow.com/a/25829097/56285\r\n  [8]: https://groups.google.com/d/msg/guava-discuss/fEdrMyNa8tA/F4XFm6-uA6oJ\r\n  [9]: https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/guava-announce/o954PqvaXLY/7ss96X6sAwAJ\r\n  [10]: https://stackoverflow.com/questions/507602/how-can-i-initialise-a-static-map/34508760#34508760\r\n  [11]: http://openjdk.java.net/jeps/269","title":"How can I initialise a static Map?","body":"<p>I like the <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> way of initialising a static, immutable map:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.of(\n    1, \"one\",\n    2, \"two\"\n);\n</code></pre>\n\n<p>As you can see, it's very concise (because of the convenient factory methods in <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\"><code>ImmutableMap</code></a>).</p>\n\n<p>If you want the map to have more than 5 entries, you can no longer use <code>ImmutableMap.of()</code>. Instead, try <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--\" rel=\"noreferrer\"><code>ImmutableMap.builder()</code></a> along these lines:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.&lt;Integer, String&gt;builder()\n    .put(1, \"one\")\n    .put(2, \"two\")\n    // ... \n    .put(15, \"fifteen\")\n    .build();\n</code></pre>\n\n<p>To learn more about the benefits of Guava's immutable collection utilities, see <a href=\"https://github.com/google/guava/wiki/ImmutableCollectionsExplained\" rel=\"noreferrer\"><em>Immutable Collections Explained</em> in Guava User Guide</a>.</p>\n\n<p>(A subset of) Guava used to be called <em>Google Collections</em>. If you aren't using this library in your Java project yet, I <strong>strongly</strong> recommend trying it out! Guava has quickly become one of the most popular and useful free 3rd party libs for Java, as <a href=\"https://stackoverflow.com/questions/130095/most-useful-free-third-party-java-libraries/132639#132639\">fellow SO users agree</a>. (If you are new to it, there are some excellent learning resources behind that link.)</p>\n\n<hr>\n\n<p><strong>Update (2015)</strong>: As for <strong>Java 8</strong>, well, I would still use the Guava approach because it is way cleaner than anything else. If you don't want Guava dependency, consider a <a href=\"https://stackoverflow.com/a/509016/56285\">plain old init method</a>. The hack with <a href=\"https://stackoverflow.com/a/25829097/56285\">two-dimensional array and Stream API</a> is pretty ugly if you ask me, and gets uglier if you need to create a Map whose keys and values are not the same type (like <code>Map&lt;Integer, String&gt;</code> in the question).</p>\n\n<p>As for future of Guava in general, with regards to Java 8, Louis Wasserman <a href=\"https://groups.google.com/d/msg/guava-discuss/fEdrMyNa8tA/F4XFm6-uA6oJ\" rel=\"noreferrer\">said this</a> back in 2014, and [<em>update</em>] in 2016 it was announced that <a href=\"https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/guava-announce/o954PqvaXLY/7ss96X6sAwAJ\" rel=\"noreferrer\"><strong>Guava 21 will require and properly support Java 8</strong></a>.</p>\n\n<hr>\n\n<p><strong>Update (2016)</strong>: As <a href=\"https://stackoverflow.com/questions/507602/how-can-i-initialise-a-static-map/34508760#34508760\">Tagir Valeev points out</a>, <strong>Java 9</strong> will finally make this clean to do using nothing but pure JDK, by adding <a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">convenience factory methods</a> for collections:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = Map.of(\n    1, \"one\", \n    2, \"two\"\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1143604,"reputation":41,"user_id":1126874,"display_name":"Staszek Borowy"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1346137227,"creation_date":1346047771,"answer_id":12136950,"question_id":507602,"body_markdown":"I do not like Static initializer syntax and I&#39;m not convinced to anonymous subclasses. Generally, I agree with all cons of using Static initializers and all cons of using anonymous subclasses that were mentioned in previus answers. On the other hand - pros presented in these posts are not enough for me. I prefer to use static initialization method:\r\n\r\n\r\n    public class MyClass {\r\n        private static final Map&lt;Integer, String&gt; myMap = prepareMap();\r\n            \r\n        private static Map&lt;Integer, String&gt; prepareMap() {\r\n            Map&lt;Integer, String&gt; hashMap = new HashMap&lt;&gt;();\r\n            hashMap.put(1, &quot;one&quot;);\r\n            hashMap.put(2, &quot;two&quot;);\r\n            \r\n            return hashMap;\r\n        }\r\n    }\r\n","title":"How can I initialise a static Map?","body":"<p>I do not like Static initializer syntax and I'm not convinced to anonymous subclasses. Generally, I agree with all cons of using Static initializers and all cons of using anonymous subclasses that were mentioned in previus answers. On the other hand - pros presented in these posts are not enough for me. I prefer to use static initialization method:</p>\n\n<pre><code>public class MyClass {\n    private static final Map&lt;Integer, String&gt; myMap = prepareMap();\n\n    private static Map&lt;Integer, String&gt; prepareMap() {\n        Map&lt;Integer, String&gt; hashMap = new HashMap&lt;&gt;();\n        hashMap.put(1, \"one\");\n        hashMap.put(2, \"two\");\n\n        return hashMap;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":174366,"reputation":12158,"user_id":403682,"accept_rate":95,"display_name":"Kenny Cason"},"score":1,"creation_date":1562792734,"post_id":13943037,"comment_id":100493248,"body_markdown":"I really wish Eclipse Collections was the default collections library for Java. I enjoy it so much more than Guava + JCL.","body":"I really wish Eclipse Collections was the default collections library for Java. I enjoy it so much more than Guava + JCL."}],"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"comment_count":1,"down_vote_count":2,"up_vote_count":33,"is_accepted":false,"score":31,"last_activity_date":1550454298,"creation_date":1355872243,"answer_id":13943037,"question_id":507602,"body_markdown":"With [Eclipse Collections][1], all of the following will work:\r\n \r\n    import java.util.Map;\r\n    \r\n    import org.eclipse.collections.api.map.ImmutableMap;\r\n    import org.eclipse.collections.api.map.MutableMap;\r\n    import org.eclipse.collections.impl.factory.Maps;\r\n    \r\n    public class StaticMapsTest\r\n    {\r\n        private static final Map&lt;Integer, String&gt; MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\n        private static final MutableMap&lt;Integer, String&gt; MUTABLE_MAP =\r\n           Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\n \r\n        private static final MutableMap&lt;Integer, String&gt; UNMODIFIABLE_MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;).asUnmodifiable();\r\n\r\n \r\n        private static final MutableMap&lt;Integer, String&gt; SYNCHRONIZED_MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;).asSynchronized();\r\n\r\n \r\n        private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;).toImmutable();\r\n\r\n \r\n        private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP2 =\r\n            Maps.immutable.with(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n    }\r\n\r\nYou can also statically initialize primitive maps with Eclipse Collections.\r\n\r\n    import org.eclipse.collections.api.map.primitive.ImmutableIntObjectMap;\r\n    import org.eclipse.collections.api.map.primitive.MutableIntObjectMap;\r\n    import org.eclipse.collections.impl.factory.primitive.IntObjectMaps;\r\n    \r\n    public class StaticPrimitiveMapsTest\r\n    {\r\n        private static final MutableIntObjectMap&lt;String&gt; MUTABLE_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;);\r\n    \r\n        private static final MutableIntObjectMap&lt;String&gt; UNMODIFIABLE_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;)\r\n                        .asUnmodifiable();\r\n    \r\n        private static final MutableIntObjectMap&lt;String&gt; SYNCHRONIZED_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;)\r\n                        .asSynchronized();\r\n    \r\n        private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;)\r\n                        .toImmutable();\r\n    \r\n        private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP2 =\r\n                IntObjectMaps.immutable.&lt;String&gt;empty()\r\n                        .newWithKeyValue(1, &quot;one&quot;)\r\n                        .newWithKeyValue(2, &quot;two&quot;);\r\n    } \r\n\r\n**Note:** I am a committer for Eclipse Collections \r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections\r\n","title":"How can I initialise a static Map?","body":"<p>With <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a>, all of the following will work:</p>\n\n<pre><code>import java.util.Map;\n\nimport org.eclipse.collections.api.map.ImmutableMap;\nimport org.eclipse.collections.api.map.MutableMap;\nimport org.eclipse.collections.impl.factory.Maps;\n\npublic class StaticMapsTest\n{\n    private static final Map&lt;Integer, String&gt; MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\");\n\n    private static final MutableMap&lt;Integer, String&gt; MUTABLE_MAP =\n       Maps.mutable.with(1, \"one\", 2, \"two\");\n\n\n    private static final MutableMap&lt;Integer, String&gt; UNMODIFIABLE_MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\").asUnmodifiable();\n\n\n    private static final MutableMap&lt;Integer, String&gt; SYNCHRONIZED_MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\").asSynchronized();\n\n\n    private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\").toImmutable();\n\n\n    private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP2 =\n        Maps.immutable.with(1, \"one\", 2, \"two\");\n}\n</code></pre>\n\n<p>You can also statically initialize primitive maps with Eclipse Collections.</p>\n\n<pre><code>import org.eclipse.collections.api.map.primitive.ImmutableIntObjectMap;\nimport org.eclipse.collections.api.map.primitive.MutableIntObjectMap;\nimport org.eclipse.collections.impl.factory.primitive.IntObjectMaps;\n\npublic class StaticPrimitiveMapsTest\n{\n    private static final MutableIntObjectMap&lt;String&gt; MUTABLE_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\");\n\n    private static final MutableIntObjectMap&lt;String&gt; UNMODIFIABLE_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\")\n                    .asUnmodifiable();\n\n    private static final MutableIntObjectMap&lt;String&gt; SYNCHRONIZED_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\")\n                    .asSynchronized();\n\n    private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\")\n                    .toImmutable();\n\n    private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP2 =\n            IntObjectMaps.immutable.&lt;String&gt;empty()\n                    .newWithKeyValue(1, \"one\")\n                    .newWithKeyValue(2, \"two\");\n} \n</code></pre>\n\n<p><strong>Note:</strong> I am a committer for Eclipse Collections </p>\n"},{"tags":[],"owner":{"account_id":302533,"reputation":1451,"user_id":610966,"accept_rate":85,"display_name":"Philip Guin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1375821348,"creation_date":1375407058,"answer_id":18007334,"question_id":507602,"body_markdown":"If you want something terse and relatively safe, you can just shift compile-time type checking to run-time:\r\n\r\n    static final Map&lt;String, Integer&gt; map = MapUtils.unmodifiableMap(\r\n    \tString.class, Integer.class,\r\n    \t&quot;cat&quot;,  4,\r\n    \t&quot;dog&quot;,  2,\r\n    \t&quot;frog&quot;, 17\r\n    );\r\n\r\nThis implementation should catch any errors:\r\n\r\n    import java.util.HashMap;\r\n    \t\r\n    public abstract class MapUtils\r\n    {\r\n    \tprivate MapUtils() { }\r\n    \t\r\n    \tpublic static &lt;K, V&gt; HashMap&lt;K, V&gt; unmodifiableMap(\r\n    \t\t\tClass&lt;? extends K&gt; keyClazz,\r\n    \t\t\tClass&lt;? extends V&gt; valClazz,\r\n    \t\t\tObject...keyValues)\r\n        {\r\n            return Collections.&lt;K, V&gt;unmodifiableMap(makeMap(\r\n                keyClazz,\r\n                valClazz,\r\n                keyValues));\r\n        }\r\n\r\n    \tpublic static &lt;K, V&gt; HashMap&lt;K, V&gt; makeMap(\r\n    \t\t\tClass&lt;? extends K&gt; keyClazz,\r\n    \t\t\tClass&lt;? extends V&gt; valClazz,\r\n    \t\t\tObject...keyValues)\r\n    \t{\r\n    \t\tif (keyValues.length % 2 != 0)\r\n    \t\t{\r\n    \t\t\tthrow new IllegalArgumentException(\r\n    \t\t\t\t\t&quot;&#39;keyValues&#39; was formatted incorrectly!  &quot;\r\n\t    \t\t\t  + &quot;(Expected an even length, but found &#39;&quot; + keyValues.length + &quot;&#39;)&quot;);\r\n\t    \t}\r\n\t\t\r\n    \t\tHashMap&lt;K, V&gt; result = new HashMap&lt;K, V&gt;(keyValues.length / 2);\r\n\t\t\r\n    \t\tfor (int i = 0; i &lt; keyValues.length;)\r\n    \t\t{\r\n                K key = cast(keyClazz, keyValues[i], i);\r\n                ++i;\r\n                V val = cast(valClazz, keyValues[i], i);\r\n                ++i;\r\n                result.put(key, val);\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn result;\r\n    \t}\r\n    \t\r\n    \tprivate static &lt;T&gt; T cast(Class&lt;? extends T&gt; clazz, Object object, int i)\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\treturn clazz.cast(object);\r\n    \t\t}\r\n    \t\tcatch (ClassCastException e)\r\n    \t\t{\r\n    \t\t\tString objectName = (i % 2 == 0) ? &quot;Key&quot; : &quot;Value&quot;;\r\n    \t\t\tString format = &quot;%s at index %d (&#39;%s&#39;) wasn&#39;t assignable to type &#39;%s&#39;&quot;;\r\n    \t\t\tthrow new IllegalArgumentException(String.format(format, objectName, i, object.toString(), clazz.getSimpleName()), e);\r\n    \t\t}\r\n    \t}\r\n    }","title":"How can I initialise a static Map?","body":"<p>If you want something terse and relatively safe, you can just shift compile-time type checking to run-time:</p>\n\n<pre><code>static final Map&lt;String, Integer&gt; map = MapUtils.unmodifiableMap(\n    String.class, Integer.class,\n    \"cat\",  4,\n    \"dog\",  2,\n    \"frog\", 17\n);\n</code></pre>\n\n<p>This implementation should catch any errors:</p>\n\n<pre><code>import java.util.HashMap;\n\npublic abstract class MapUtils\n{\n    private MapUtils() { }\n\n    public static &lt;K, V&gt; HashMap&lt;K, V&gt; unmodifiableMap(\n            Class&lt;? extends K&gt; keyClazz,\n            Class&lt;? extends V&gt; valClazz,\n            Object...keyValues)\n    {\n        return Collections.&lt;K, V&gt;unmodifiableMap(makeMap(\n            keyClazz,\n            valClazz,\n            keyValues));\n    }\n\n    public static &lt;K, V&gt; HashMap&lt;K, V&gt; makeMap(\n            Class&lt;? extends K&gt; keyClazz,\n            Class&lt;? extends V&gt; valClazz,\n            Object...keyValues)\n    {\n        if (keyValues.length % 2 != 0)\n        {\n            throw new IllegalArgumentException(\n                    \"'keyValues' was formatted incorrectly!  \"\n                  + \"(Expected an even length, but found '\" + keyValues.length + \"')\");\n        }\n\n        HashMap&lt;K, V&gt; result = new HashMap&lt;K, V&gt;(keyValues.length / 2);\n\n        for (int i = 0; i &lt; keyValues.length;)\n        {\n            K key = cast(keyClazz, keyValues[i], i);\n            ++i;\n            V val = cast(valClazz, keyValues[i], i);\n            ++i;\n            result.put(key, val);\n        }\n\n        return result;\n    }\n\n    private static &lt;T&gt; T cast(Class&lt;? extends T&gt; clazz, Object object, int i)\n    {\n        try\n        {\n            return clazz.cast(object);\n        }\n        catch (ClassCastException e)\n        {\n            String objectName = (i % 2 == 0) ? \"Key\" : \"Value\";\n            String format = \"%s at index %d ('%s') wasn't assignable to type '%s'\";\n            throw new IllegalArgumentException(String.format(format, objectName, i, object.toString(), clazz.getSimpleName()), e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2213553,"reputation":1635,"user_id":1954759,"accept_rate":0,"display_name":"Shushant"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1461823960,"creation_date":1379580539,"answer_id":18890130,"question_id":507602,"body_markdown":"I like anonymous class, because it is easy to deal with it:\r\n\r\n    public static final Map&lt;?, ?&gt; numbers = Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {\r\n\t\t{\r\n\t\t\tput(1, &quot;some value&quot;);\r\n                        //rest of code here\r\n\t\t}\r\n\t});","title":"How can I initialise a static Map?","body":"<p>I like anonymous class, because it is easy to deal with it:</p>\n\n<pre><code>public static final Map&lt;?, ?&gt; numbers = Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {\n    {\n        put(1, \"some value\");\n                    //rest of code here\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1449615631,"creation_date":1389587954,"answer_id":21083994,"question_id":507602,"body_markdown":"If you can use a String representation of your data this is an option too in Java 8:\r\n\r\n    static Map&lt;Integer, String&gt; MAP = Stream.of(\r\n            &quot;1=one&quot;,\r\n            &quot;2=two&quot;\r\n    ).collect(Collectors.toMap(k -&gt; Integer.parseInt(k.split(&quot;=&quot;)[0]), v -&gt; v.split(&quot;=&quot;)[1]));","title":"How can I initialise a static Map?","body":"<p>If you can use a String representation of your data this is an option too in Java 8:</p>\n\n<pre><code>static Map&lt;Integer, String&gt; MAP = Stream.of(\n        \"1=one\",\n        \"2=two\"\n).collect(Collectors.toMap(k -&gt; Integer.parseInt(k.split(\"=\")[0]), v -&gt; v.split(\"=\")[1]));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":153327,"reputation":1194,"user_id":368503,"display_name":"Domingo Ignacio"},"score":1,"creation_date":1399494117,"post_id":23102809,"comment_id":36090952,"body_markdown":"Note: Turns out, after actually trying it later... the above does not actually work. I tried it with a few different javac flags and was unable to get the name used for the parameter to be retained.","body":"Note: Turns out, after actually trying it later... the above does not actually work. I tried it with a few different javac flags and was unable to get the name used for the parameter to be retained."}],"tags":[],"owner":{"account_id":153327,"reputation":1194,"user_id":368503,"display_name":"Domingo Ignacio"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1579617683,"creation_date":1397633523,"answer_id":23102809,"question_id":507602,"body_markdown":"Now that Java 8 is out, this question warrants revisiting. I took a stab at it -- looks like maybe you can exploit lambda expression syntax to get a pretty nice and concise (but type-safe) map literal syntax that looks like this:\r\n```java\r\nMap&lt;String,Object&gt; myMap = hashMap(\r\n    bob -&gt; 5,\r\n    TheGimp -&gt; 8,\r\n    incredibleKoolAid -&gt; &quot;James Taylor&quot;,\r\n    heyArnold -&gt; new Date()\r\n);\r\n\r\nMap&lt;String,Integer&gt; typesafeMap = treeMap(\r\n    a -&gt; 5,\r\n    bee -&gt; 8,\r\n    sea -&gt; 13\r\n    deep -&gt; 21\r\n);\r\n```\r\n\r\nUntested sample code at https://gist.github.com/galdosd/10823529\r\nWould be curious about the opinions of others on this (it&#39;s mildly evil...)","title":"How can I initialise a static Map?","body":"<p>Now that Java 8 is out, this question warrants revisiting. I took a stab at it -- looks like maybe you can exploit lambda expression syntax to get a pretty nice and concise (but type-safe) map literal syntax that looks like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String,Object&gt; myMap = hashMap(\n    bob -&gt; 5,\n    TheGimp -&gt; 8,\n    incredibleKoolAid -&gt; \"James Taylor\",\n    heyArnold -&gt; new Date()\n);\n\nMap&lt;String,Integer&gt; typesafeMap = treeMap(\n    a -&gt; 5,\n    bee -&gt; 8,\n    sea -&gt; 13\n    deep -&gt; 21\n);\n</code></pre>\n\n<p>Untested sample code at <a href=\"https://gist.github.com/galdosd/10823529\" rel=\"nofollow noreferrer\">https://gist.github.com/galdosd/10823529</a>\nWould be curious about the opinions of others on this (it's mildly evil...)</p>\n"},{"tags":[],"owner":{"account_id":1886487,"reputation":396597,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1409208605,"creation_date":1398156410,"answer_id":23214686,"question_id":507602,"body_markdown":"I prefer using a static initializer to avoid generating anonymous classes (which would have no further purpose), so I&#39;ll list tips initializing with a static initializer. All listed solutions / tips are type-safe.\r\n\r\n**Note:** The question doesn&#39;t say anything about making the map unmodifiable, so I will leave that out, but know that it can easily be done with `Collections.unmodifiableMap(map)`.\r\n\r\n**First tip**\r\n\r\nThe 1st tip is that you can make a local reference to the map and you give it a SHORT name:\r\n\r\n    private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\r\n    static {\r\n        final Map&lt;Integer, String&gt; m = myMap; // Use short name!\r\n        m.put(1, &quot;one&quot;); // Here referencing the local variable which is also faster!\r\n        m.put(2, &quot;two&quot;);\r\n        m.put(3, &quot;three&quot;);\r\n    }\r\n\r\n**Second tip**\r\n\r\nThe 2nd tip is that you can create a helper method to add entries; you can also make this helper method public if you want to:\r\n\r\n    private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;();\r\n    static {\r\n        p(1, &quot;one&quot;); // Calling the helper method.\r\n        p(2, &quot;two&quot;);\r\n        p(3, &quot;three&quot;);\r\n    }\r\n\r\n    private static void p(Integer k, String v) {\r\n        myMap2.put(k, v);\r\n    }\r\n\r\nThe helper method here is not re-usable though because it can only add elements to `myMap2`. To make it re-usable, we could make the map itself a parameter of the helper method, but then initialization code would not be any shorter. \r\n\r\n**Third tip**\r\n\r\nThe 3rd tip is that you can create a re-usable builder-like helper class with the populating functionality. This is really a simple, 10-line helper class which is type-safe:\r\n\r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap3 = new HashMap&lt;&gt;();\r\n        static {\r\n            new B&lt;&gt;(myMap3)   // Instantiating the helper class with our map\r\n                .p(1, &quot;one&quot;)\r\n                .p(2, &quot;two&quot;)\r\n                .p(3, &quot;three&quot;);\r\n        }\r\n    }\r\n\r\n    class B&lt;K, V&gt; {\r\n        private final Map&lt;K, V&gt; m;\r\n\r\n        public B(Map&lt;K, V&gt; m) {\r\n            this.m = m;\r\n        }\r\n\r\n        public B&lt;K, V&gt; p(K k, V v) {\r\n            m.put(k, v);\r\n            return this; // Return this for chaining\r\n        }\r\n    }","title":"How can I initialise a static Map?","body":"<p>I prefer using a static initializer to avoid generating anonymous classes (which would have no further purpose), so I'll list tips initializing with a static initializer. All listed solutions / tips are type-safe.</p>\n\n<p><strong>Note:</strong> The question doesn't say anything about making the map unmodifiable, so I will leave that out, but know that it can easily be done with <code>Collections.unmodifiableMap(map)</code>.</p>\n\n<p><strong>First tip</strong></p>\n\n<p>The 1st tip is that you can make a local reference to the map and you give it a SHORT name:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\nstatic {\n    final Map&lt;Integer, String&gt; m = myMap; // Use short name!\n    m.put(1, \"one\"); // Here referencing the local variable which is also faster!\n    m.put(2, \"two\");\n    m.put(3, \"three\");\n}\n</code></pre>\n\n<p><strong>Second tip</strong></p>\n\n<p>The 2nd tip is that you can create a helper method to add entries; you can also make this helper method public if you want to:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;();\nstatic {\n    p(1, \"one\"); // Calling the helper method.\n    p(2, \"two\");\n    p(3, \"three\");\n}\n\nprivate static void p(Integer k, String v) {\n    myMap2.put(k, v);\n}\n</code></pre>\n\n<p>The helper method here is not re-usable though because it can only add elements to <code>myMap2</code>. To make it re-usable, we could make the map itself a parameter of the helper method, but then initialization code would not be any shorter. </p>\n\n<p><strong>Third tip</strong></p>\n\n<p>The 3rd tip is that you can create a re-usable builder-like helper class with the populating functionality. This is really a simple, 10-line helper class which is type-safe:</p>\n\n<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; myMap3 = new HashMap&lt;&gt;();\n    static {\n        new B&lt;&gt;(myMap3)   // Instantiating the helper class with our map\n            .p(1, \"one\")\n            .p(2, \"two\")\n            .p(3, \"three\");\n    }\n}\n\nclass B&lt;K, V&gt; {\n    private final Map&lt;K, V&gt; m;\n\n    public B(Map&lt;K, V&gt; m) {\n        this.m = m;\n    }\n\n    public B&lt;K, V&gt; p(K k, V v) {\n        m.put(k, v);\n        return this; // Return this for chaining\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":7,"creation_date":1449615072,"post_id":25829097,"comment_id":56082546,"body_markdown":"I took the liberty to add a version that is equivalent with the question and other answers: init a Map whose keys and values are of different type (so `String[][]` won&#39;t do, `Object[][]` is needed). IMHO, this approach is ugly (even more so with the casts) and hard to remember; wouldn&#39;t use it myself.","body":"I took the liberty to add a version that is equivalent with the question and other answers: init a Map whose keys and values are of different type (so <code>String[][]</code> won&#39;t do, <code>Object[][]</code> is needed). IMHO, this approach is ugly (even more so with the casts) and hard to remember; wouldn&#39;t use it myself."}],"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"comment_count":1,"down_vote_count":1,"up_vote_count":67,"is_accepted":false,"score":66,"last_activity_date":1530833130,"creation_date":1410655477,"answer_id":25829097,"question_id":507602,"body_markdown":"Here&#39;s a Java 8 one-line static map initializer:\r\n\r\n    private static final Map&lt;String, String&gt; EXTENSION_TO_MIMETYPE =\r\n        Arrays.stream(new String[][] {\r\n            { &quot;txt&quot;, &quot;text/plain&quot; }, \r\n            { &quot;html&quot;, &quot;text/html&quot; }, \r\n            { &quot;js&quot;, &quot;application/javascript&quot; },\r\n            { &quot;css&quot;, &quot;text/css&quot; },\r\n            { &quot;xml&quot;, &quot;application/xml&quot; },\r\n            { &quot;png&quot;, &quot;image/png&quot; }, \r\n            { &quot;gif&quot;, &quot;image/gif&quot; }, \r\n            { &quot;jpg&quot;, &quot;image/jpeg&quot; },\r\n            { &quot;jpeg&quot;, &quot;image/jpeg&quot; }, \r\n            { &quot;svg&quot;, &quot;image/svg+xml&quot; },\r\n        }).collect(Collectors.toMap(kv -&gt; kv[0], kv -&gt; kv[1]));\r\n\r\nEdit: to initialize a `Map&lt;Integer, String&gt;` as in the question, you&#39;d need something like this:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = Arrays.stream(new Object[][]{\r\n            {1, &quot;one&quot;},\r\n            {2, &quot;two&quot;},\r\n    }).collect(Collectors.toMap(kv -&gt; (Integer) kv[0], kv -&gt; (String) kv[1]));\r\n\r\nEdit(2): There is a better, mixed-type-capable version by i_am_zero that uses a stream of `new SimpleEntry&lt;&gt;(k, v)` calls. Check out that answer: https://stackoverflow.com/a/37384773/3950982","title":"How can I initialise a static Map?","body":"<p>Here's a Java 8 one-line static map initializer:</p>\n\n<pre><code>private static final Map&lt;String, String&gt; EXTENSION_TO_MIMETYPE =\n    Arrays.stream(new String[][] {\n        { \"txt\", \"text/plain\" }, \n        { \"html\", \"text/html\" }, \n        { \"js\", \"application/javascript\" },\n        { \"css\", \"text/css\" },\n        { \"xml\", \"application/xml\" },\n        { \"png\", \"image/png\" }, \n        { \"gif\", \"image/gif\" }, \n        { \"jpg\", \"image/jpeg\" },\n        { \"jpeg\", \"image/jpeg\" }, \n        { \"svg\", \"image/svg+xml\" },\n    }).collect(Collectors.toMap(kv -&gt; kv[0], kv -&gt; kv[1]));\n</code></pre>\n\n<p>Edit: to initialize a <code>Map&lt;Integer, String&gt;</code> as in the question, you'd need something like this:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = Arrays.stream(new Object[][]{\n        {1, \"one\"},\n        {2, \"two\"},\n}).collect(Collectors.toMap(kv -&gt; (Integer) kv[0], kv -&gt; (String) kv[1]));\n</code></pre>\n\n<p>Edit(2): There is a better, mixed-type-capable version by i_am_zero that uses a stream of <code>new SimpleEntry&lt;&gt;(k, v)</code> calls. Check out that answer: <a href=\"https://stackoverflow.com/a/37384773/3950982\">https://stackoverflow.com/a/37384773/3950982</a></p>\n"},{"tags":[],"owner":{"account_id":2767605,"reputation":196,"user_id":2382934,"display_name":"Jim Daehn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1422481265,"creation_date":1422480925,"answer_id":28202853,"question_id":507602,"body_markdown":"I like using the static initializer &quot;technique&quot; when I have a concrete realization of an abstract class that has defined an initializing constructor but no default constructor but I want my subclass to have a default constructor.\r\n\r\nFor example:\r\n\r\n    public abstract class Shape {\r\n\r\n        public static final String COLOR_KEY = &quot;color_key&quot;;\r\n        public static final String OPAQUE_KEY = &quot;opaque_key&quot;;\r\n\r\n        private final String color;\r\n        private final Boolean opaque;\r\n\r\n        /**\r\n         * Initializing constructor - note no default constructor.\r\n         *\r\n         * @param properties a collection of Shape properties\r\n         */\r\n        public Shape(Map&lt;String, Object&gt; properties) {\r\n            color = ((String) properties.getOrDefault(COLOR_KEY, &quot;black&quot;));\r\n            opaque = (Boolean) properties.getOrDefault(OPAQUE_KEY, false);\r\n        }\r\n\r\n        /**\r\n         * Color property accessor method.\r\n         *\r\n         * @return the color of this Shape\r\n         */\r\n        public String getColor() {\r\n            return color;\r\n        }\r\n\r\n        /**\r\n         * Opaque property accessor method.\r\n         *\r\n         * @return true if this Shape is opaque, false otherwise\r\n         */\r\n        public Boolean isOpaque() {\r\n            return opaque;\r\n        }\r\n    }\r\n\r\nand my concrete realization of this class -- but it wants/needs a default constructor:\r\n\r\n    public class SquareShapeImpl extends Shape {\r\n\r\n        private static final Map&lt;String, Object&gt; DEFAULT_PROPS = new HashMap&lt;&gt;();\r\n\r\n        static {\r\n            DEFAULT_PROPS.put(Shape.COLOR_KEY, &quot;yellow&quot;);\r\n            DEFAULT_PROPS.put(Shape.OPAQUE_KEY, false);\r\n        }\r\n\r\n        /**\r\n         * Default constructor -- intializes this square to be a translucent yellow\r\n         */\r\n        public SquareShapeImpl() {\r\n            // the static initializer was useful here because the call to \r\n            // this(...) must be the first statement in this constructor\r\n            // i.e., we can&#39;t be mucking around and creating a map here\r\n            this(DEFAULT_PROPS);\r\n        }\r\n\r\n        /**\r\n         * Initializing constructor -- create a Square with the given\r\n         * collection of properties.\r\n         *\r\n         * @param props a collection of properties for this SquareShapeImpl\r\n         */\r\n        public SquareShapeImpl(Map&lt;String, Object&gt; props) {\r\n            super(props);\r\n        }\r\n    }\r\n\r\nthen to use this default constructor, we simply do:\r\n\r\n    public class StaticInitDemo {\r\n    \r\n        public static void main(String[] args) {\r\n\r\n            // create a translucent, yellow square...\r\n            Shape defaultSquare = new SquareShapeImpl();\r\n\r\n            // etc...\r\n        }\r\n    }\r\n","title":"How can I initialise a static Map?","body":"<p>I like using the static initializer \"technique\" when I have a concrete realization of an abstract class that has defined an initializing constructor but no default constructor but I want my subclass to have a default constructor.</p>\n\n<p>For example:</p>\n\n<pre><code>public abstract class Shape {\n\n    public static final String COLOR_KEY = \"color_key\";\n    public static final String OPAQUE_KEY = \"opaque_key\";\n\n    private final String color;\n    private final Boolean opaque;\n\n    /**\n     * Initializing constructor - note no default constructor.\n     *\n     * @param properties a collection of Shape properties\n     */\n    public Shape(Map&lt;String, Object&gt; properties) {\n        color = ((String) properties.getOrDefault(COLOR_KEY, \"black\"));\n        opaque = (Boolean) properties.getOrDefault(OPAQUE_KEY, false);\n    }\n\n    /**\n     * Color property accessor method.\n     *\n     * @return the color of this Shape\n     */\n    public String getColor() {\n        return color;\n    }\n\n    /**\n     * Opaque property accessor method.\n     *\n     * @return true if this Shape is opaque, false otherwise\n     */\n    public Boolean isOpaque() {\n        return opaque;\n    }\n}\n</code></pre>\n\n<p>and my concrete realization of this class -- but it wants/needs a default constructor:</p>\n\n<pre><code>public class SquareShapeImpl extends Shape {\n\n    private static final Map&lt;String, Object&gt; DEFAULT_PROPS = new HashMap&lt;&gt;();\n\n    static {\n        DEFAULT_PROPS.put(Shape.COLOR_KEY, \"yellow\");\n        DEFAULT_PROPS.put(Shape.OPAQUE_KEY, false);\n    }\n\n    /**\n     * Default constructor -- intializes this square to be a translucent yellow\n     */\n    public SquareShapeImpl() {\n        // the static initializer was useful here because the call to \n        // this(...) must be the first statement in this constructor\n        // i.e., we can't be mucking around and creating a map here\n        this(DEFAULT_PROPS);\n    }\n\n    /**\n     * Initializing constructor -- create a Square with the given\n     * collection of properties.\n     *\n     * @param props a collection of properties for this SquareShapeImpl\n     */\n    public SquareShapeImpl(Map&lt;String, Object&gt; props) {\n        super(props);\n    }\n}\n</code></pre>\n\n<p>then to use this default constructor, we simply do:</p>\n\n<pre><code>public class StaticInitDemo {\n\n    public static void main(String[] args) {\n\n        // create a translucent, yellow square...\n        Shape defaultSquare = new SquareShapeImpl();\n\n        // etc...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1546876798,"creation_date":1432113227,"answer_id":30345279,"question_id":507602,"body_markdown":"I&#39;ve read the answers and i decided to write my own map builder. Feel free to copy-paste and enjoy.\r\n\r\n    import java.util.Collections;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    /**\r\n     * A tool for easy creation of a map. Code example:&lt;br/&gt;\r\n     * {@code MapBuilder.of(&quot;name&quot;, &quot;Forrest&quot;).and(&quot;surname&quot;, &quot;Gump&quot;).build()}\r\n     * @param &lt;K&gt; key type (inferred by constructor)\r\n     * @param &lt;V&gt; value type (inferred by constructor)\r\n     * @author Vlasec (for http://stackoverflow.com/a/30345279/1977151)\r\n     */\r\n    public class MapBuilder &lt;K, V&gt; {\r\n        private Map&lt;K, V&gt; map = new HashMap&lt;&gt;();\r\n    \r\n        /** Constructor that also enters the first entry. */\r\n        private MapBuilder(K key, V value) {\r\n            and(key, value);\r\n        }\r\n    \r\n        /** Factory method that creates the builder and enters the first entry. */\r\n        public static &lt;A, B&gt; MapBuilder&lt;A, B&gt; mapOf(A key, B value) {\r\n            return new MapBuilder&lt;&gt;(key, value);\r\n        }\r\n\r\n        /** Puts the key-value pair to the map and returns itself for method chaining */\r\n        public MapBuilder&lt;K, V&gt; and(K key, V value) {\r\n            map.put(key, value);\r\n            return this;\r\n        }\r\n    \r\n        /**\r\n         * If no reference to builder is kept and both the key and value types are immutable,\r\n         * the resulting map is immutable.\r\n         * @return contents of MapBuilder as an unmodifiable map.\r\n         */\r\n        public Map&lt;K, V&gt; build() {\r\n            return Collections.unmodifiableMap(map);\r\n        }\r\n    }\r\n\r\nEDIT: Lately, I keep finding public static method `of` pretty often and I kinda like it. I added it into the code and made the constructor private, thus switching to static factory method pattern.\r\n\r\nEDIT2: Even more recently, I no longer like static method called `of`, as it looks pretty bad when using static imports. I renamed it to `mapOf` instead, making it more suitable for static imports.","title":"How can I initialise a static Map?","body":"<p>I've read the answers and i decided to write my own map builder. Feel free to copy-paste and enjoy.</p>\n\n<pre><code>import java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n * A tool for easy creation of a map. Code example:&lt;br/&gt;\n * {@code MapBuilder.of(\"name\", \"Forrest\").and(\"surname\", \"Gump\").build()}\n * @param &lt;K&gt; key type (inferred by constructor)\n * @param &lt;V&gt; value type (inferred by constructor)\n * @author Vlasec (for http://stackoverflow.com/a/30345279/1977151)\n */\npublic class MapBuilder &lt;K, V&gt; {\n    private Map&lt;K, V&gt; map = new HashMap&lt;&gt;();\n\n    /** Constructor that also enters the first entry. */\n    private MapBuilder(K key, V value) {\n        and(key, value);\n    }\n\n    /** Factory method that creates the builder and enters the first entry. */\n    public static &lt;A, B&gt; MapBuilder&lt;A, B&gt; mapOf(A key, B value) {\n        return new MapBuilder&lt;&gt;(key, value);\n    }\n\n    /** Puts the key-value pair to the map and returns itself for method chaining */\n    public MapBuilder&lt;K, V&gt; and(K key, V value) {\n        map.put(key, value);\n        return this;\n    }\n\n    /**\n     * If no reference to builder is kept and both the key and value types are immutable,\n     * the resulting map is immutable.\n     * @return contents of MapBuilder as an unmodifiable map.\n     */\n    public Map&lt;K, V&gt; build() {\n        return Collections.unmodifiableMap(map);\n    }\n}\n</code></pre>\n\n<p>EDIT: Lately, I keep finding public static method <code>of</code> pretty often and I kinda like it. I added it into the code and made the constructor private, thus switching to static factory method pattern.</p>\n\n<p>EDIT2: Even more recently, I no longer like static method called <code>of</code>, as it looks pretty bad when using static imports. I renamed it to <code>mapOf</code> instead, making it more suitable for static imports.</p>\n"},{"tags":[],"owner":{"account_id":2538632,"reputation":374,"user_id":2703399,"display_name":"josh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1433364389,"creation_date":1433364389,"answer_id":30630355,"question_id":507602,"body_markdown":"I have not seen the approach I use (and have grown to like) posted in any answers, so here it is:\r\n\r\nI don&#39;t like using static initializers because they are clunky,\r\nand I don&#39;t like anonymous classes because it is creating a new class for each instance.\r\n\r\ninstead, I prefer initialization that looks like this:\r\n\r\n    map(\r\n        entry(&quot;keyA&quot;, &quot;val1&quot;),\r\n        entry(&quot;keyB&quot;, &quot;val2&quot;),\r\n        entry(&quot;keyC&quot;, &quot;val3&quot;)\r\n    );\r\n\r\nunfortunately, these methods are not part of the standard Java library,\r\nso you will need to create (or use) a utility library that defines the following methods:\r\n\r\n     public static &lt;K,V&gt; Map&lt;K,V&gt; map(Map.Entry&lt;K, ? extends V&gt;... entries)\r\n     public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K key, V val)\r\n\r\n(you can use &#39;import static&#39; to avoid needing to prefix the method&#39;s name)\r\n\r\nI found it useful to provide similar static methods for the other collections (list, set, sortedSet, sortedMap, etc.)\r\n\r\nIts not quite as nice as json object initialization, but it&#39;s a step in that direction, as far as readability is concerned.","title":"How can I initialise a static Map?","body":"<p>I have not seen the approach I use (and have grown to like) posted in any answers, so here it is:</p>\n\n<p>I don't like using static initializers because they are clunky,\nand I don't like anonymous classes because it is creating a new class for each instance.</p>\n\n<p>instead, I prefer initialization that looks like this:</p>\n\n<pre><code>map(\n    entry(\"keyA\", \"val1\"),\n    entry(\"keyB\", \"val2\"),\n    entry(\"keyC\", \"val3\")\n);\n</code></pre>\n\n<p>unfortunately, these methods are not part of the standard Java library,\nso you will need to create (or use) a utility library that defines the following methods:</p>\n\n<pre><code> public static &lt;K,V&gt; Map&lt;K,V&gt; map(Map.Entry&lt;K, ? extends V&gt;... entries)\n public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K key, V val)\n</code></pre>\n\n<p>(you can use 'import static' to avoid needing to prefix the method's name)</p>\n\n<p>I found it useful to provide similar static methods for the other collections (list, set, sortedSet, sortedMap, etc.)</p>\n\n<p>Its not quite as nice as json object initialization, but it's a step in that direction, as far as readability is concerned.</p>\n"},{"tags":[],"owner":{"account_id":329814,"reputation":11000,"user_id":653539,"accept_rate":50,"display_name":"Tom&#225;≈° Z&#225;lusk&#253;"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1438877430,"creation_date":1438877430,"answer_id":31860743,"question_id":507602,"body_markdown":"In Java 8, procedural approach can also be wrapped in `Supplier`:\r\n\r\n    Map&lt;String,String&gt; m = ((Supplier&lt;Map&lt;String,String&gt;&gt;)(() -&gt; {\r\n        Map&lt;String,String&gt; result = new HashMap&lt;&gt;();\r\n        result.put(&quot;foo&quot;,&quot;hoo&quot;);\r\n        ...\r\n        return result;\r\n    )).get();\r\n\r\nIt&#39;s only hypothetical way but can come handy if you really need one-liner.","title":"How can I initialise a static Map?","body":"<p>In Java 8, procedural approach can also be wrapped in <code>Supplier</code>:</p>\n\n<pre><code>Map&lt;String,String&gt; m = ((Supplier&lt;Map&lt;String,String&gt;&gt;)(() -&gt; {\n    Map&lt;String,String&gt; result = new HashMap&lt;&gt;();\n    result.put(\"foo\",\"hoo\");\n    ...\n    return result;\n)).get();\n</code></pre>\n\n<p>It's only hypothetical way but can come handy if you really need one-liner.</p>\n"},{"comments":[{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1480243376,"post_id":32454155,"comment_id":68873984,"body_markdown":"I include Apache Commons in all builds so, in the unfortunate absence of a method `Arrays.asMap( ... )` in plain Java, I think this is the best solution.  Reinventing the wheel is usually silly.  Very slight downside is that with generics it will need an unchecked conversion.","body":"I include Apache Commons in all builds so, in the unfortunate absence of a method <code>Arrays.asMap( ... )</code> in plain Java, I think this is the best solution.  Reinventing the wheel is usually silly.  Very slight downside is that with generics it will need an unchecked conversion."},{"owner":{"account_id":2720760,"reputation":2190,"user_id":2347107,"accept_rate":79,"display_name":"agad"},"score":0,"creation_date":1480318583,"post_id":32454155,"comment_id":68895401,"body_markdown":"@mikerodent 4.1 version is generic: __public static &lt;K, V&gt; Map&lt;K, V&gt; putAll(final Map&lt;K, V&gt; map, final Object[] array)__","body":"@mikerodent 4.1 version is generic: <b>public static &lt;K, V&gt; Map&lt;K, V&gt; putAll(final Map&lt;K, V&gt; map, final Object[] array)</b>"},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1480318861,"post_id":32454155,"comment_id":68895528,"body_markdown":"Tx ... yes, I&#39;m using 4.1 but I still have to `SuppressWarnings( unchecked )` in Eclipse with a line like `Map&lt;String, String&gt; dummy = MapUtils.putAll(new HashMap&lt;String, String&gt;(), new Object[][]... )`","body":"Tx ... yes, I&#39;m using 4.1 but I still have to <code>SuppressWarnings( unchecked )</code> in Eclipse with a line like <code>Map&lt;String, String&gt; dummy = MapUtils.putAll(new HashMap&lt;String, String&gt;(), new Object[][]... )</code>"},{"owner":{"account_id":2720760,"reputation":2190,"user_id":2347107,"accept_rate":79,"display_name":"agad"},"score":0,"creation_date":1480319355,"post_id":32454155,"comment_id":68895772,"body_markdown":"@mikerodent isn&#39;t it because of __Object[][]__? See updated unswear - I don&#39;t have any warning in Eclipse.","body":"@mikerodent isn&#39;t it because of <b>Object[][]</b>? See updated unswear - I don&#39;t have any warning in Eclipse."},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1480319592,"post_id":32454155,"comment_id":68895889,"body_markdown":"How strange... even when I go `String[][]` I get the &quot;warning&quot;!  And of course that only works if your `K` and `V` are the same class.  I take it you haven&#39;t (understandably) set &quot;unchecked conversion&quot; to &quot;Ignore&quot; in your Eclipse setup?","body":"How strange... even when I go <code>String[][]</code> I get the &quot;warning&quot;!  And of course that only works if your <code>K</code> and <code>V</code> are the same class.  I take it you haven&#39;t (understandably) set &quot;unchecked conversion&quot; to &quot;Ignore&quot; in your Eclipse setup?"},{"owner":{"account_id":2720760,"reputation":2190,"user_id":2347107,"accept_rate":79,"display_name":"agad"},"score":0,"creation_date":1480320297,"post_id":32454155,"comment_id":68896205,"body_markdown":"@mikerodent I don&#39;t have annotation and &quot;Unchecked generic type operation&quot; is set to warning. Removing types from HashMap, causes warning to appear.","body":"@mikerodent I don&#39;t have annotation and &quot;Unchecked generic type operation&quot; is set to warning. Removing types from HashMap, causes warning to appear."},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1480333202,"post_id":32454155,"comment_id":68903788,"body_markdown":"My Eclipse is Mars.2 build 4.5.2. Or could it be a Java version difference?  I&#39;m using 1.8.0_91 as my Eclipse JRE.  Otherwise I give up: mystery!","body":"My Eclipse is Mars.2 build 4.5.2. Or could it be a Java version difference?  I&#39;m using 1.8.0_91 as my Eclipse JRE.  Otherwise I give up: mystery!"},{"owner":{"account_id":2720760,"reputation":2190,"user_id":2347107,"accept_rate":79,"display_name":"agad"},"score":0,"creation_date":1480402362,"post_id":32454155,"comment_id":68934714,"body_markdown":"@mikerodent I have Neon Release (4.6.0) and jdk1.8.0_74","body":"@mikerodent I have Neon Release (4.6.0) and jdk1.8.0_74"}],"tags":[],"owner":{"account_id":2720760,"reputation":2190,"user_id":2347107,"accept_rate":79,"display_name":"agad"},"comment_count":8,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1480319273,"creation_date":1441704729,"answer_id":32454155,"question_id":507602,"body_markdown":"As usual apache-commons has proper method [MapUtils.putAll(Map&lt;K, V&gt;, Object[])][1]:\r\n\r\nFor example, to create a color map: \r\n \r\n\r\n    Map&lt;String, String&gt; colorMap = MapUtils.putAll(new HashMap&lt;String, String&gt;(), new String[][] {\r\n         {&quot;RED&quot;, &quot;#FF0000&quot;},\r\n         {&quot;GREEN&quot;, &quot;#00FF00&quot;},\r\n         {&quot;BLUE&quot;, &quot;#0000FF&quot;}\r\n     });\r\n\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/MapUtils.html#putAll(java.util.Map,%20java.lang.Object[])","title":"How can I initialise a static Map?","body":"<p>As usual apache-commons has proper method <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/MapUtils.html#putAll(java.util.Map,%20java.lang.Object[])\" rel=\"noreferrer\">MapUtils.putAll(Map, Object[])</a>:</p>\n\n<p>For example, to create a color map: </p>\n\n<pre><code>Map&lt;String, String&gt; colorMap = MapUtils.putAll(new HashMap&lt;String, String&gt;(), new String[][] {\n     {\"RED\", \"#FF0000\"},\n     {\"GREEN\", \"#00FF00\"},\n     {\"BLUE\", \"#0000FF\"}\n });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1013289,"reputation":7583,"user_id":1025411,"display_name":"zrvan"},"score":0,"creation_date":1447979333,"post_id":33816920,"comment_id":55399607,"body_markdown":"if needed, one can use the `toMap` signature including a map supplier to specify the type of map.","body":"if needed, one can use the <code>toMap</code> signature including a map supplier to specify the type of map."}],"tags":[],"owner":{"account_id":1013289,"reputation":7583,"user_id":1025411,"display_name":"zrvan"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1466673244,"creation_date":1447979184,"answer_id":33816920,"question_id":507602,"body_markdown":"With Java 8 I&#39;ve come to use the following pattern:\r\n\r\n    private static final Map&lt;String, Integer&gt; MAP = Stream.of(\r\n        new AbstractMap.SimpleImmutableEntry&lt;&gt;(&quot;key1&quot;, 1),\r\n        new AbstractMap.SimpleImmutableEntry&lt;&gt;(&quot;key2&quot;, 2)\r\n    ).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\nIt&#39;s not the most terse and a bit roundabout, but\r\n\r\n- it doesn&#39;t require anything outside of `java.util`\r\n- it&#39;s typesafe and easily accommodates different types for key and value. ","title":"How can I initialise a static Map?","body":"<p>With Java 8 I've come to use the following pattern:</p>\n\n<pre><code>private static final Map&lt;String, Integer&gt; MAP = Stream.of(\n    new AbstractMap.SimpleImmutableEntry&lt;&gt;(\"key1\", 1),\n    new AbstractMap.SimpleImmutableEntry&lt;&gt;(\"key2\", 2)\n).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n</code></pre>\n\n<p>It's not the most terse and a bit roundabout, but</p>\n\n<ul>\n<li>it doesn't require anything outside of <code>java.util</code></li>\n<li>it's typesafe and easily accommodates different types for key and value. </li>\n</ul>\n"},{"comments":[{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":10,"creation_date":1494476762,"post_id":34508760,"comment_id":74846349,"body_markdown":"Or if you want more than 10 key-value pairs, you can use `Map.ofEntries`","body":"Or if you want more than 10 key-value pairs, you can use <code>Map.ofEntries</code>"},{"owner":{"account_id":3024105,"reputation":421,"user_id":2564491,"accept_rate":71,"display_name":"mid"},"score":10,"creation_date":1516803879,"post_id":34508760,"comment_id":83839042,"body_markdown":"This is clean and all, until you realize [how it was implemented](http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/86f19074aad2/src/java.base/share/classes/java/util/Map.java#l1564)","body":"This is clean and all, until you realize <a href=\"http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/86f19074aad2/src/java.base/share/classes/java/util/Map.java#l1564\" rel=\"nofollow noreferrer\">how it was implemented</a>"},{"owner":{"account_id":255184,"reputation":7191,"user_id":535060,"accept_rate":94,"display_name":"Somaiah Kumbera"},"score":0,"creation_date":1527517291,"post_id":34508760,"comment_id":88146753,"body_markdown":"Ugh thats so sad - looks like it only supports 10 entries, after which you need to use ofEntries. Lame.","body":"Ugh thats so sad - looks like it only supports 10 entries, after which you need to use ofEntries. Lame."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":5,"creation_date":1548946456,"post_id":34508760,"comment_id":95734476,"body_markdown":"The implementation cleanliness in the JDK shouldn&#39;t matter as long as it works and satisfies the contract. Like any black box, implementation details can always be fixed in future if really needed...","body":"The implementation cleanliness in the JDK shouldn&#39;t matter as long as it works and satisfies the contract. Like any black box, implementation details can always be fixed in future if really needed..."},{"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"score":0,"creation_date":1572482699,"post_id":34508760,"comment_id":103577775,"body_markdown":"@mid That&#39;s the only typesafe way to do this in Java.","body":"@mid That&#39;s the only typesafe way to do this in Java."},{"owner":{"account_id":3024105,"reputation":421,"user_id":2564491,"accept_rate":71,"display_name":"mid"},"score":0,"creation_date":1572506734,"post_id":34508760,"comment_id":103583078,"body_markdown":"@LukeHutchison I wouldn&#39;t say a library has to be clean internally.","body":"@LukeHutchison I wouldn&#39;t say a library has to be clean internally."},{"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"score":0,"creation_date":1572576170,"post_id":34508760,"comment_id":103611513,"body_markdown":"@mid I agree. Well the maximum number of parameters in a Java method is 255, so technically you could only go as high as 128 key-value pairs in this way, while supporting type safety. The real problem here is that arrays are not able to be made generic, so you can&#39;t declare a varargs type like `Map.of(Entry&lt;Integer, String&gt;...)`.","body":"@mid I agree. Well the maximum number of parameters in a Java method is 255, so technically you could only go as high as 128 key-value pairs in this way, while supporting type safety. The real problem here is that arrays are not able to be made generic, so you can&#39;t declare a varargs type like <code>Map.of(Entry&lt;Integer, String&gt;...)</code>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1576552224,"post_id":34508760,"comment_id":104927831,"body_markdown":"For more than 10 entries, see [this Answer](https://stackoverflow.com/a/37384773/642706) on this same page, using `Map.ofEntries`.","body":"For more than 10 entries, see <a href=\"https://stackoverflow.com/a/37384773/642706\">this Answer</a> on this same page, using <code>Map.ofEntries</code>."}],"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"comment_count":8,"down_vote_count":1,"up_vote_count":79,"is_accepted":false,"score":78,"last_activity_date":1576552156,"creation_date":1451383644,"answer_id":34508760,"question_id":507602,"body_markdown":"# `Map.of` in Java 9+\r\n\r\n    private static final Map&lt;Integer, String&gt; MY_MAP = Map.of(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\nSee [JEP 269](http://openjdk.java.net/jeps/269) for details. JDK 9 reached [general availability][1] in September 2017. \r\n\r\n  [1]: http://jdk.java.net/9/","title":"How can I initialise a static Map?","body":"<h1><code>Map.of</code> in Java 9+</h1>\n\n<pre><code>private static final Map&lt;Integer, String&gt; MY_MAP = Map.of(1, \"one\", 2, \"two\");\n</code></pre>\n\n<p>See <a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">JEP 269</a> for details. JDK 9 reached <a href=\"http://jdk.java.net/9/\" rel=\"noreferrer\">general availability</a> in September 2017. </p>\n"},{"tags":[],"owner":{"account_id":149396,"reputation":11779,"user_id":361855,"accept_rate":58,"display_name":"Jason"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453998021,"creation_date":1453998021,"answer_id":35066601,"question_id":507602,"body_markdown":"There are some good answers here, but I do want to offer one more.\r\n\r\nCreate your own static method to create and initialize a `Map`. I have my own `CollectionUtils` class in a package that I use across projects with various utilities that I use regularly that are easy for me to write and avoids the need for a dependency on some larger library.\r\n\r\nHere&#39;s my `newMap` method:\r\n\r\n    public class CollectionUtils {\r\n        public static Map newMap(Object... keyValuePairs) {\r\n            Map map = new HashMap();\r\n            if ( keyValuePairs.length % 2 == 1 ) throw new IllegalArgumentException(&quot;Must have even number of arguments&quot;);\r\n            for ( int i=0; i&lt;keyValuePairs.length; i+=2 ) {\r\n                map.put(keyValuePairs[i], keyValuePairs[i + 1]);\r\n            }\r\n            return map;\r\n        }\r\n    }\r\n\r\nUsage:\r\n\r\n    import static CollectionUtils.newMap;\r\n    // ...\r\n    Map aMap = newMap(&quot;key1&quot;, 1.23, &quot;key2&quot;, 2.34);\r\n    Map bMap = newMap(objKey1, objVal1, objKey2, objVal2, objKey3, objVal3);\r\n    // etc...\r\n\r\nIt doesn&#39;t make use of generics, but you can typecast the map as you wish (just be sure you typecast it correctly!)\r\n\r\n    Map&lt;String,Double&gt; aMap = (Map&lt;String,Double&gt;)newMap(&quot;key1&quot;, 1.23, &quot;key2&quot;, 2.34);\r\n","title":"How can I initialise a static Map?","body":"<p>There are some good answers here, but I do want to offer one more.</p>\n\n<p>Create your own static method to create and initialize a <code>Map</code>. I have my own <code>CollectionUtils</code> class in a package that I use across projects with various utilities that I use regularly that are easy for me to write and avoids the need for a dependency on some larger library.</p>\n\n<p>Here's my <code>newMap</code> method:</p>\n\n<pre><code>public class CollectionUtils {\n    public static Map newMap(Object... keyValuePairs) {\n        Map map = new HashMap();\n        if ( keyValuePairs.length % 2 == 1 ) throw new IllegalArgumentException(\"Must have even number of arguments\");\n        for ( int i=0; i&lt;keyValuePairs.length; i+=2 ) {\n            map.put(keyValuePairs[i], keyValuePairs[i + 1]);\n        }\n        return map;\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>import static CollectionUtils.newMap;\n// ...\nMap aMap = newMap(\"key1\", 1.23, \"key2\", 2.34);\nMap bMap = newMap(objKey1, objVal1, objKey2, objVal2, objKey3, objVal3);\n// etc...\n</code></pre>\n\n<p>It doesn't make use of generics, but you can typecast the map as you wish (just be sure you typecast it correctly!)</p>\n\n<pre><code>Map&lt;String,Double&gt; aMap = (Map&lt;String,Double&gt;)newMap(\"key1\", 1.23, \"key2\", 2.34);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1456523615,"creation_date":1456523615,"answer_id":35662460,"question_id":507602,"body_markdown":"Because Java does not support map literals, map instances must always be explicitly instantiated and populated.\r\n\r\nFortunately, it is possible to approximate the behavior of map literals in Java using ***factory methods***. \r\n\r\n***For example:***\r\n\r\n    public class LiteralMapFactory {\r\n    \r\n        // Creates a map from a list of entries\r\n        @SafeVarargs\r\n        public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\r\n            LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\r\n            for (Map.Entry&lt;K, V&gt; entry : entries) {\r\n                map.put(entry.getKey(), entry.getValue());\r\n            }\r\n            return map;\r\n        }\r\n        // Creates a map entry\r\n        public static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\r\n            return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(mapOf(entry(&quot;a&quot;, 1), entry(&quot;b&quot;, 2), entry(&quot;c&quot;, 3)));\r\n        }\r\n    }\r\n\r\n***Output:***\r\n\r\n&gt;{a=1, b=2, c=3}\r\n\r\nIt is a lot more convenient than creating and populating the map an element at a time.","title":"How can I initialise a static Map?","body":"<p>Because Java does not support map literals, map instances must always be explicitly instantiated and populated.</p>\n\n<p>Fortunately, it is possible to approximate the behavior of map literals in Java using <strong><em>factory methods</em></strong>. </p>\n\n<p><strong><em>For example:</em></strong></p>\n\n<pre><code>public class LiteralMapFactory {\n\n    // Creates a map from a list of entries\n    @SafeVarargs\n    public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\n        LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\n        for (Map.Entry&lt;K, V&gt; entry : entries) {\n            map.put(entry.getKey(), entry.getValue());\n        }\n        return map;\n    }\n    // Creates a map entry\n    public static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\n        return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\n    }\n\n    public static void main(String[] args) {\n        System.out.println(mapOf(entry(\"a\", 1), entry(\"b\", 2), entry(\"c\", 3)));\n    }\n}\n</code></pre>\n\n<p><strong><em>Output:</em></strong></p>\n\n<blockquote>\n  <p>{a=1, b=2, c=3}</p>\n</blockquote>\n\n<p>It is a lot more convenient than creating and populating the map an element at a time.</p>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1460302673,"creation_date":1460300932,"answer_id":36531434,"question_id":507602,"body_markdown":"[JEP 269][1] provides some convenience factory methods for Collections API. This factory methods are not in current Java version, which is 8, but are planned for Java 9 release. \r\n\r\nFor `Map` there are two factory methods: `of` and `ofEntries`. Using `of`, you can pass alternating key/value pairs. For example, in order to create a `Map` like `{age: 27, major: cs}`:\r\n\r\n    Map&lt;String, Object&gt; info = Map.of(&quot;age&quot;, 27, &quot;major&quot;, &quot;cs&quot;);\r\nCurrently there are ten overloaded versions for `of`, so you can create a map containing ten key/value pairs. If you don&#39;t like this limitation or alternating key/values, you can use `ofEntries`:\r\n\r\n    Map&lt;String, Object&gt; info = Map.ofEntries(\r\n                    Map.entry(&quot;age&quot;, 27),\r\n                    Map.entry(&quot;major&quot;, &quot;cs&quot;)\r\n    );\r\nBoth `of` and `ofEntries` will return an immutable `Map`, so you can&#39;t change their elements after construction. You can try out these features using [JDK 9 Early Access][2].\r\n\r\n\r\n  [1]: http://openjdk.java.net/jeps/269\r\n  [2]: https://jdk9.java.net/jigsaw/","title":"How can I initialise a static Map?","body":"<p><a href=\"http://openjdk.java.net/jeps/269\" rel=\"nofollow\">JEP 269</a> provides some convenience factory methods for Collections API. This factory methods are not in current Java version, which is 8, but are planned for Java 9 release. </p>\n\n<p>For <code>Map</code> there are two factory methods: <code>of</code> and <code>ofEntries</code>. Using <code>of</code>, you can pass alternating key/value pairs. For example, in order to create a <code>Map</code> like <code>{age: 27, major: cs}</code>:</p>\n\n<pre><code>Map&lt;String, Object&gt; info = Map.of(\"age\", 27, \"major\", \"cs\");\n</code></pre>\n\n<p>Currently there are ten overloaded versions for <code>of</code>, so you can create a map containing ten key/value pairs. If you don't like this limitation or alternating key/values, you can use <code>ofEntries</code>:</p>\n\n<pre><code>Map&lt;String, Object&gt; info = Map.ofEntries(\n                Map.entry(\"age\", 27),\n                Map.entry(\"major\", \"cs\")\n);\n</code></pre>\n\n<p>Both <code>of</code> and <code>ofEntries</code> will return an immutable <code>Map</code>, so you can't change their elements after construction. You can try out these features using <a href=\"https://jdk9.java.net/jigsaw/\" rel=\"nofollow\">JDK 9 Early Access</a>.</p>\n"},{"comments":[{"owner":{"account_id":4185076,"reputation":2839,"user_id":3429015,"display_name":"Danon"},"score":5,"creation_date":1553098443,"post_id":37384773,"comment_id":97262241,"body_markdown":"The `new SimpleEntry&lt;&gt;()` way is far less readable than static `put()` :/","body":"The <code>new SimpleEntry&lt;&gt;()</code> way is far less readable than static <code>put()</code> :/"}],"tags":[],"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"comment_count":1,"down_vote_count":1,"up_vote_count":65,"is_accepted":false,"score":64,"last_activity_date":1639651595,"creation_date":1463987828,"answer_id":37384773,"question_id":507602,"body_markdown":"Java 9\r\n------\r\n\r\nWe can use [`Map.ofEntries`][1], calling [`Map.entry( k , v )`][2] to create each entry.\r\n\r\n    import static java.util.Map.entry;\r\n    private static final Map&lt;Integer,String&gt; map = Map.ofEntries(\r\n            entry(1, &quot;one&quot;),\r\n            entry(2, &quot;two&quot;),\r\n            entry(3, &quot;three&quot;),\r\n            entry(4, &quot;four&quot;),\r\n            entry(5, &quot;five&quot;),\r\n            entry(6, &quot;six&quot;),\r\n            entry(7, &quot;seven&quot;),\r\n            entry(8, &quot;eight&quot;),\r\n            entry(9, &quot;nine&quot;),\r\n            entry(10, &quot;ten&quot;));\r\n\r\nWe can also use `Map.of` as suggested by Tagir in his answer [here][3] but we cannot have more than 10 entries using `Map.of`.\r\n\r\nJava 8 \r\n------\r\n\r\nWe can create a Stream of map entries. We already have two implementations of `Entry` in `java.util.AbstractMap` which are [SimpleEntry][4] and [SimpleImmutableEntry][5]. For this example we can make use of former as:\r\n\r\n    import java.util.AbstractMap.*;\r\n    private static final Map&lt;Integer, String&gt; myMap = Stream.of(\r\n                new SimpleEntry&lt;&gt;(1, &quot;one&quot;),\r\n                new SimpleEntry&lt;&gt;(2, &quot;two&quot;),\r\n                new SimpleEntry&lt;&gt;(3, &quot;three&quot;),\r\n                new SimpleEntry&lt;&gt;(4, &quot;four&quot;),\r\n                new SimpleEntry&lt;&gt;(5, &quot;five&quot;),\r\n                new SimpleEntry&lt;&gt;(6, &quot;six&quot;),\r\n                new SimpleEntry&lt;&gt;(7, &quot;seven&quot;),\r\n                new SimpleEntry&lt;&gt;(8, &quot;eight&quot;),\r\n                new SimpleEntry&lt;&gt;(9, &quot;nine&quot;),\r\n                new SimpleEntry&lt;&gt;(10, &quot;ten&quot;))\r\n                .collect(Collectors.toMap(SimpleEntry::getKey, SimpleEntry::getValue));\r\n                \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#ofEntries(java.util.Map.Entry...)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#entry(K,V)\r\n  [3]: https://stackoverflow.com/a/34508760/1216775\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/AbstractMap.SimpleEntry.html\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/index.html?java/util/AbstractMap.SimpleImmutableEntry.html","title":"How can I initialise a static Map?","body":"<h2>Java 9</h2>\n<p>We can use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#ofEntries(java.util.Map.Entry...)\" rel=\"noreferrer\"><code>Map.ofEntries</code></a>, calling <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#entry(K,V)\" rel=\"noreferrer\"><code>Map.entry( k , v )</code></a> to create each entry.</p>\n<pre><code>import static java.util.Map.entry;\nprivate static final Map&lt;Integer,String&gt; map = Map.ofEntries(\n        entry(1, &quot;one&quot;),\n        entry(2, &quot;two&quot;),\n        entry(3, &quot;three&quot;),\n        entry(4, &quot;four&quot;),\n        entry(5, &quot;five&quot;),\n        entry(6, &quot;six&quot;),\n        entry(7, &quot;seven&quot;),\n        entry(8, &quot;eight&quot;),\n        entry(9, &quot;nine&quot;),\n        entry(10, &quot;ten&quot;));\n</code></pre>\n<p>We can also use <code>Map.of</code> as suggested by Tagir in his answer <a href=\"https://stackoverflow.com/a/34508760/1216775\">here</a> but we cannot have more than 10 entries using <code>Map.of</code>.</p>\n<h2>Java 8</h2>\n<p>We can create a Stream of map entries. We already have two implementations of <code>Entry</code> in <code>java.util.AbstractMap</code> which are <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/AbstractMap.SimpleEntry.html\" rel=\"noreferrer\">SimpleEntry</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/index.html?java/util/AbstractMap.SimpleImmutableEntry.html\" rel=\"noreferrer\">SimpleImmutableEntry</a>. For this example we can make use of former as:</p>\n<pre><code>import java.util.AbstractMap.*;\nprivate static final Map&lt;Integer, String&gt; myMap = Stream.of(\n            new SimpleEntry&lt;&gt;(1, &quot;one&quot;),\n            new SimpleEntry&lt;&gt;(2, &quot;two&quot;),\n            new SimpleEntry&lt;&gt;(3, &quot;three&quot;),\n            new SimpleEntry&lt;&gt;(4, &quot;four&quot;),\n            new SimpleEntry&lt;&gt;(5, &quot;five&quot;),\n            new SimpleEntry&lt;&gt;(6, &quot;six&quot;),\n            new SimpleEntry&lt;&gt;(7, &quot;seven&quot;),\n            new SimpleEntry&lt;&gt;(8, &quot;eight&quot;),\n            new SimpleEntry&lt;&gt;(9, &quot;nine&quot;),\n            new SimpleEntry&lt;&gt;(10, &quot;ten&quot;))\n            .collect(Collectors.toMap(SimpleEntry::getKey, SimpleEntry::getValue));\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7660,"reputation":15986,"user_id":13365,"accept_rate":70,"display_name":"neu242"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1606391468,"creation_date":1473941383,"answer_id":39510693,"question_id":507602,"body_markdown":"Here&#39;s my favorite if I \r\n  * don&#39;t want to (or cannot) use Guava&#39;s `ImmutableMap.of()`\r\n  * or I need a mutable `Map`\r\n  * or I need more than the 10 entry limit in `Map.of()` from JDK9+\r\n\r\n```\r\npublic static &lt;A&gt; Map&lt;String, A&gt; asMap(Object... keysAndValues) {\r\n  return new LinkedHashMap&lt;String, A&gt;() {{\r\n    for (int i = 0; i &lt; keysAndValues.length - 1; i++) {\r\n      put(keysAndValues[i].toString(), (A) keysAndValues[++i]);\r\n    }\r\n  }};\r\n}\r\n```\r\nIt&#39;s very compact, and it ignores stray values (i.e. a final key without a value).\r\n\r\nUsage:\r\n\r\n    Map&lt;String, String&gt; one = asMap(&quot;1stKey&quot;, &quot;1stVal&quot;, &quot;2ndKey&quot;, &quot;2ndVal&quot;);\r\n    Map&lt;String, Object&gt; two = asMap(&quot;1stKey&quot;, Boolean.TRUE, &quot;2ndKey&quot;, new Integer(2));","title":"How can I initialise a static Map?","body":"<p>Here's my favorite if I</p>\n<ul>\n<li>don't want to (or cannot) use Guava's <code>ImmutableMap.of()</code></li>\n<li>or I need a mutable <code>Map</code></li>\n<li>or I need more than the 10 entry limit in <code>Map.of()</code> from JDK9+</li>\n</ul>\n<pre><code>public static &lt;A&gt; Map&lt;String, A&gt; asMap(Object... keysAndValues) {\n  return new LinkedHashMap&lt;String, A&gt;() {{\n    for (int i = 0; i &lt; keysAndValues.length - 1; i++) {\n      put(keysAndValues[i].toString(), (A) keysAndValues[++i]);\n    }\n  }};\n}\n</code></pre>\n<p>It's very compact, and it ignores stray values (i.e. a final key without a value).</p>\n<p>Usage:</p>\n<pre><code>Map&lt;String, String&gt; one = asMap(&quot;1stKey&quot;, &quot;1stVal&quot;, &quot;2ndKey&quot;, &quot;2ndVal&quot;);\nMap&lt;String, Object&gt; two = asMap(&quot;1stKey&quot;, Boolean.TRUE, &quot;2ndKey&quot;, new Integer(2));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673926665,"creation_date":1480375020,"answer_id":40855194,"question_id":507602,"body_markdown":"Here is the code by [abacus-common][1]\r\n\r\n    \r\n    Map&lt;Integer, String&gt; map = N.asMap(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n    // Or for Immutable map \r\n    ImmutableMap&lt;Integer, String&gt; = ImmutableMap.of(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\nDeclarationÔºö I&#39;m the developer of abacus-common.\r\n\r\n  [1]: https://github.com/landawn/AbacusUtil","title":"How can I initialise a static Map?","body":"<p>Here is the code by <a href=\"https://github.com/landawn/AbacusUtil\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>Map&lt;Integer, String&gt; map = N.asMap(1, &quot;one&quot;, 2, &quot;two&quot;);\n// Or for Immutable map \nImmutableMap&lt;Integer, String&gt; = ImmutableMap.of(1, &quot;one&quot;, 2, &quot;two&quot;);\n</code></pre>\n<p>DeclarationÔºö I'm the developer of abacus-common.</p>\n"},{"tags":[],"owner":{"account_id":8244404,"reputation":306,"user_id":6201033,"display_name":"Alex Butler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480468569,"creation_date":1480468569,"answer_id":40878647,"question_id":507602,"body_markdown":"Even with Guava&#39;s nice ImmutableMap class, sometimes I&#39;d like to build a mutable map fluently. Finding myself wanting to avoid static blocks &amp; the anonymous subtype thing, when Java 8 came along I wrote a tiny library to help called [Fluent](https://github.com/alexheretic/fluent).\r\n\r\n    // simple usage, assuming someMap is a Map&lt;String, String&gt; already declared\r\n    Map&lt;String, String&gt; example = new Fluent.HashMap&lt;String, String&gt;()\r\n        .append(&quot;key1&quot;, &quot;val1&quot;)\r\n        .append(&quot;key2&quot;, &quot;val2&quot;)\r\n        .appendAll(someMap);\r\n\r\nWith Java 8 interface defaulting I could implement the Fluent.Map methods for all standard Java Map implementations (ie HashMap, ConcurrentSkipListMap, ... etc) without tedious repetition.\r\n\r\nUnmodifiable maps are simple too.\r\n\r\n    Map&lt;String, Integer&gt; immutable = new Fluent.LinkedHashMap&lt;String, Integer&gt;()\r\n        .append(&quot;one&quot;, 1)\r\n        .append(&quot;two&quot;, 2)\r\n        .append(&quot;three&quot;, 3)\r\n        .unmodifiable();\r\n\r\nSee https://github.com/alexheretic/fluent for source, documentation and examples.\r\n","title":"How can I initialise a static Map?","body":"<p>Even with Guava's nice ImmutableMap class, sometimes I'd like to build a mutable map fluently. Finding myself wanting to avoid static blocks &amp; the anonymous subtype thing, when Java 8 came along I wrote a tiny library to help called <a href=\"https://github.com/alexheretic/fluent\" rel=\"nofollow noreferrer\">Fluent</a>.</p>\n\n<pre><code>// simple usage, assuming someMap is a Map&lt;String, String&gt; already declared\nMap&lt;String, String&gt; example = new Fluent.HashMap&lt;String, String&gt;()\n    .append(\"key1\", \"val1\")\n    .append(\"key2\", \"val2\")\n    .appendAll(someMap);\n</code></pre>\n\n<p>With Java 8 interface defaulting I could implement the Fluent.Map methods for all standard Java Map implementations (ie HashMap, ConcurrentSkipListMap, ... etc) without tedious repetition.</p>\n\n<p>Unmodifiable maps are simple too.</p>\n\n<pre><code>Map&lt;String, Integer&gt; immutable = new Fluent.LinkedHashMap&lt;String, Integer&gt;()\n    .append(\"one\", 1)\n    .append(\"two\", 2)\n    .append(\"three\", 3)\n    .unmodifiable();\n</code></pre>\n\n<p>See <a href=\"https://github.com/alexheretic/fluent\" rel=\"nofollow noreferrer\">https://github.com/alexheretic/fluent</a> for source, documentation and examples.</p>\n"},{"tags":[],"owner":{"account_id":4708155,"reputation":245,"user_id":3809588,"accept_rate":75,"display_name":"Stromata"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1493587688,"creation_date":1493587688,"answer_id":43711510,"question_id":507602,"body_markdown":"If you only need to add one value to the map you can use [Collections.singletonMap][1]: \r\n\r\n    Map&lt;K, V&gt; map = Collections.singletonMap(key, value)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#singletonMap(K,%20V)","title":"How can I initialise a static Map?","body":"<p>If you only need to add one value to the map you can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#singletonMap(K,%20V)\" rel=\"nofollow noreferrer\">Collections.singletonMap</a>: </p>\n\n<pre><code>Map&lt;K, V&gt; map = Collections.singletonMap(key, value)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1215286,"reputation":7830,"user_id":1183010,"accept_rate":80,"display_name":"R. Oosterholt"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522939952,"creation_date":1495531762,"answer_id":44130916,"question_id":507602,"body_markdown":"Your second approach *(Double Brace initialization)* is thought to be an [anti pattern][1], so I would go for the first approach.\r\n\r\nAnother easy way to initialise a static Map is by using this utility function:\r\n\r\n\tpublic static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Object... keyValues) {\r\n\t\tMap&lt;K, V&gt; map = new HashMap&lt;&gt;(keyValues.length / 2);\r\n\r\n\t\tfor (int index = 0; index &lt; keyValues.length / 2; index++) {\r\n            map.put((K)keyValues[index * 2], (V)keyValues[index * 2 + 1]);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t}\r\n\r\n    Map&lt;Integer, String&gt; map1 = mapOf(1, &quot;value1&quot;, 2, &quot;value2&quot;);\r\n    Map&lt;String, String&gt; map2 = mapOf(&quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot;);\r\n\r\nNote: in `Java 9` you can use [Map.of][2]\r\n\r\n[1]: https://stackoverflow.com/q/1958636/1183010\r\n[2]: http://download.java.net/java/jdk9/docs/api/java/util/Map.html#of-K-V-","title":"How can I initialise a static Map?","body":"<p>Your second approach <em>(Double Brace initialization)</em> is thought to be an <a href=\"https://stackoverflow.com/q/1958636/1183010\">anti pattern</a>, so I would go for the first approach.</p>\n\n<p>Another easy way to initialise a static Map is by using this utility function:</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Object... keyValues) {\n    Map&lt;K, V&gt; map = new HashMap&lt;&gt;(keyValues.length / 2);\n\n    for (int index = 0; index &lt; keyValues.length / 2; index++) {\n        map.put((K)keyValues[index * 2], (V)keyValues[index * 2 + 1]);\n    }\n\n    return map;\n}\n\nMap&lt;Integer, String&gt; map1 = mapOf(1, \"value1\", 2, \"value2\");\nMap&lt;String, String&gt; map2 = mapOf(\"key1\", \"value1\", \"key2\", \"value2\");\n</code></pre>\n\n<p>Note: in <code>Java 9</code> you can use <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/Map.html#of-K-V-\" rel=\"nofollow noreferrer\">Map.of</a></p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1499677750,"creation_date":1497979686,"answer_id":44659512,"question_id":507602,"body_markdown":"You may use [`StickyMap`](http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/StickyMap.html) and [`MapEntry`](http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/MapEntry.html) from [Cactoos](http://www.cactoos.org):\r\n\r\n    private static final Map&lt;String, String&gt; MAP = new StickyMap&lt;&gt;(\r\n      new MapEntry&lt;&gt;(&quot;name&quot;, &quot;Jeffrey&quot;),\r\n      new MapEntry&lt;&gt;(&quot;age&quot;, &quot;35&quot;)\r\n    );","title":"How can I initialise a static Map?","body":"<p>You may use <a href=\"http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/StickyMap.html\" rel=\"nofollow noreferrer\"><code>StickyMap</code></a> and <a href=\"http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/MapEntry.html\" rel=\"nofollow noreferrer\"><code>MapEntry</code></a> from <a href=\"http://www.cactoos.org\" rel=\"nofollow noreferrer\">Cactoos</a>:</p>\n\n<pre><code>private static final Map&lt;String, String&gt; MAP = new StickyMap&lt;&gt;(\n  new MapEntry&lt;&gt;(\"name\", \"Jeffrey\"),\n  new MapEntry&lt;&gt;(\"age\", \"35\")\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":947388,"reputation":921,"user_id":974355,"accept_rate":60,"display_name":"jglatre"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508948893,"creation_date":1508948893,"answer_id":46937591,"question_id":507602,"body_markdown":"Well... I like enums ;)\r\n\r\n    enum MyEnum {\r\n        ONE   (1, &quot;one&quot;),\r\n        TWO   (2, &quot;two&quot;),\r\n        THREE (3, &quot;three&quot;);\r\n\r\n        int value;\r\n        String name;\r\n\r\n        MyEnum(int value, String name) {\r\n            this.value = value;\r\n            this.name = name;\r\n        }\r\n\r\n        static final Map&lt;Integer, String&gt; MAP = Stream.of( values() )\r\n                .collect( Collectors.toMap( e -&gt; e.value, e -&gt; e.name ) );\r\n    }\r\n","title":"How can I initialise a static Map?","body":"<p>Well... I like enums ;)</p>\n\n<pre><code>enum MyEnum {\n    ONE   (1, \"one\"),\n    TWO   (2, \"two\"),\n    THREE (3, \"three\");\n\n    int value;\n    String name;\n\n    MyEnum(int value, String name) {\n        this.value = value;\n        this.name = name;\n    }\n\n    static final Map&lt;Integer, String&gt; MAP = Stream.of( values() )\n            .collect( Collectors.toMap( e -&gt; e.value, e -&gt; e.name ) );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3427502,"reputation":699,"user_id":2872888,"display_name":"Bharanidharan K"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1511667516,"creation_date":1511667516,"answer_id":47492794,"question_id":507602,"body_markdown":"If you want unmodifiable map, finally java 9 added a cool factory method `of` to `Map` interface. Similar method is added to Set, List as well.\r\n\r\n`Map&lt;String, String&gt; unmodifiableMap = Map.of(&quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot;);`\r\n\r\n","title":"How can I initialise a static Map?","body":"<p>If you want unmodifiable map, finally java 9 added a cool factory method <code>of</code> to <code>Map</code> interface. Similar method is added to Set, List as well.</p>\n\n<p><code>Map&lt;String, String&gt; unmodifiableMap = Map.of(\"key1\", \"value1\", \"key2\", \"value2\");</code></p>\n"},{"comments":[{"owner":{"account_id":12489064,"reputation":1172,"user_id":9091276,"accept_rate":100,"display_name":"Frontear"},"score":0,"creation_date":1571360183,"post_id":52266947,"comment_id":103224402,"body_markdown":"Any reason why you chose to do `&gt;&gt;&gt; 1` instead of `% 2`, apart from making it intentionally confusing?","body":"Any reason why you chose to do <code>&gt;&gt;&gt; 1</code> instead of <code>% 2</code>, apart from making it intentionally confusing?"},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1571384849,"post_id":52266947,"comment_id":103230770,"body_markdown":"@Frontear There are even more than one: 1) If the compiler/JIT doesn&#39;t optimize `% 2` accordingly‚Äìwhich I don&#39;t know‚Äìshift operations are much more performant than math operations since they are implemented hard-wired in any CPU I&#39;m aware of. 2) There are only rare cases where shift operations can be used in high-level languages, so I use them whenever I can to remind myself‚Äì and others who read my code‚Äìthat they exist. 3) It increases the lifetime of the other operators due to reduced wearout [just kidding, of course, but I wanted it to be three :]","body":"@Frontear There are even more than one: 1) If the compiler/JIT doesn&#39;t optimize <code>% 2</code> accordingly‚Äìwhich I don&#39;t know‚Äìshift operations are much more performant than math operations since they are implemented hard-wired in any CPU I&#39;m aware of. 2) There are only rare cases where shift operations can be used in high-level languages, so I use them whenever I can to remind myself‚Äì and others who read my code‚Äìthat they exist. 3) It increases the lifetime of the other operators due to reduced wearout [just kidding, of course, but I wanted it to be three :]"},{"owner":{"account_id":12489064,"reputation":1172,"user_id":9091276,"accept_rate":100,"display_name":"Frontear"},"score":0,"creation_date":1571399944,"post_id":52266947,"comment_id":103238472,"body_markdown":"Sounds like something that the compiler should be caring for, no? Adding shift operations into places where a more simplified operation could be shown just leads to misunderstood code.","body":"Sounds like something that the compiler should be caring for, no? Adding shift operations into places where a more simplified operation could be shown just leads to misunderstood code."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1571436900,"post_id":52266947,"comment_id":103254355,"body_markdown":"@Frontear [SHOULD is not MUST](https://ietf.org/rfc/rfc2119.txt). Shift operations are way simpler than math ops (from a tech POV behind the scenes where 0, 1 and their positions in a combination thereof matter). I agree, they aren&#39;t used in high-level language programs that often. Have you ever coded in ASM or machine code? I have and therefore these operations are very familiar to me and I use them if there&#39;s the chance to do so. It&#39;s OK for me if you don&#39;t like and dont&#39; use them. I can live with both. Are you trying to convince me to jettison my knowledge because others don&#39;t have that?","body":"@Frontear <a href=\"https://ietf.org/rfc/rfc2119.txt\" rel=\"nofollow noreferrer\">SHOULD is not MUST</a>. Shift operations are way simpler than math ops (from a tech POV behind the scenes where 0, 1 and their positions in a combination thereof matter). I agree, they aren&#39;t used in high-level language programs that often. Have you ever coded in ASM or machine code? I have and therefore these operations are very familiar to me and I use them if there&#39;s the chance to do so. It&#39;s OK for me if you don&#39;t like and dont&#39; use them. I can live with both. Are you trying to convince me to jettison my knowledge because others don&#39;t have that?"}],"tags":[],"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1622323187,"creation_date":1536623974,"answer_id":52266947,"question_id":507602,"body_markdown":"Note: This answer actually belongs to question [How to directly initialize a HashMap (in a literal way)?][1] but since that was _**marked** as duplicate_ of this one at time of this writing...\r\n\r\n----\r\n\r\nPrior to Java 9 with its [Map.of()][2] (which is also limited to 10 mappings) you can extend a `Map` implementation of your choice, e.g.:\r\n\r\n    public class InitHashMap&lt;K, V&gt; extends HashMap&lt;K, V&gt;\r\n\r\nre-implement `HashMap`&#39;s constructors:\r\n\r\n\tpublic InitHashMap() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic InitHashMap( int initialCapacity, float loadFactor ) {\r\n\t\tsuper( initialCapacity, loadFactor );\r\n\t}\r\n\r\n\tpublic InitHashMap( int initialCapacity ) {\r\n\t\tsuper( initialCapacity );\r\n\t}\r\n\r\n\tpublic InitHashMap( Map&lt;? extends K, ? extends V&gt; map ) {\r\n\t\tsuper( map );\r\n\t}\r\n\r\nand add an additional constructor that&#39;s inspired by [Aerthel&#39;s answer][3] but is generic by using `Object...` and `&lt;K, V&gt;` types:\r\n\r\n\tpublic InitHashMap( final Object... keyValuePairs ) {\r\n\r\n\t\tif ( keyValuePairs.length % 2 != 0 )\r\n\t\t\tthrow new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\r\n\r\n\t\tK key = null;\r\n\t\tint i = -1;\r\n\r\n\t\tfor ( final Object keyOrValue : keyValuePairs )\r\n\t\t\tswitch ( ++i % 2 ) {\r\n\t\t\t\tcase 0:  // key\r\n\t\t\t\t\tif ( keyOrValue == null )\r\n\t\t\t\t\t\tthrow new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\r\n\t\t\t\t\tkey = (K) keyOrValue;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcase 1:  // value\r\n\t\t\t\t\tput( key, (V) keyOrValue );\r\n\t\t\t}\r\n\t}\r\n\r\n### Run ###\r\n\r\n\tpublic static void main( final String[] args ) {\r\n\r\n\t\tfinal Map&lt;Integer, String&gt; map = new InitHashMap&lt;&gt;( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; );\r\n\t\tSystem.out.println( map );\r\n\t}\r\n\r\n### Output ###\r\n\r\n\t{1=First, 2=Second, 3=Third}\r\n\r\n----\r\n\r\nYou also can extend the `Map` interface likewise:\r\n\r\n    public interface InitMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\r\n    \r\n    \tstatic &lt;K, V&gt; Map&lt;K, V&gt; of( final Object... keyValuePairs ) {\r\n    \r\n    \t\tif ( keyValuePairs.length % 2 != 0 )\r\n    \t\t\tthrow new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\r\n    \r\n    \t\tfinal Map&lt;K, V&gt; map = new HashMap&lt;&gt;( keyValuePairs.length &gt;&gt;&gt; 1, .75f );\r\n    \t\tK key = null;\r\n    \t\tint i = -1;\r\n    \r\n    \t\tfor ( final Object keyOrValue : keyValuePairs )\r\n    \t\t\tswitch ( ++i % 2 ) {\r\n    \t\t\t\tcase 0: // key\r\n    \t\t\t\t\tif ( keyOrValue == null )\r\n    \t\t\t\t\t\tthrow new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\r\n    \t\t\t\t\tkey = (K) keyOrValue;\r\n    \t\t\t\t\tcontinue;\r\n    \t\t\t\tcase 1: // value\r\n    \t\t\t\t\tmap.put( key, (V) keyOrValue );\r\n    \t\t\t}\r\n    \t\treturn map;\r\n    \t}\r\n    }\r\n\r\n### Run ###\r\n\r\n\tpublic static void main( final String[] args ) {\r\n\r\n\t\tSystem.out.println( InitMap.of( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; ) );\r\n\t}\r\n\r\n### Output ###\r\n\r\n\t{1=First, 2=Second, 3=Third}\r\n\r\n[1]: https://stackoverflow.com/q/6802483/1744774\r\n[2]: https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#of-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-\r\n[3]: https://stackoverflow.com/a/17474581/1744774","title":"How can I initialise a static Map?","body":"<p>Note: This answer actually belongs to question <a href=\"https://stackoverflow.com/q/6802483/1744774\">How to directly initialize a HashMap (in a literal way)?</a> but since that was <em><strong>marked</strong> as duplicate</em> of this one at time of this writing...</p>\n<hr />\n<p>Prior to Java 9 with its <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#of-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-\" rel=\"nofollow noreferrer\">Map.of()</a> (which is also limited to 10 mappings) you can extend a <code>Map</code> implementation of your choice, e.g.:</p>\n<pre><code>public class InitHashMap&lt;K, V&gt; extends HashMap&lt;K, V&gt;\n</code></pre>\n<p>re-implement <code>HashMap</code>'s constructors:</p>\n<pre><code>public InitHashMap() {\n    super();\n}\n\npublic InitHashMap( int initialCapacity, float loadFactor ) {\n    super( initialCapacity, loadFactor );\n}\n\npublic InitHashMap( int initialCapacity ) {\n    super( initialCapacity );\n}\n\npublic InitHashMap( Map&lt;? extends K, ? extends V&gt; map ) {\n    super( map );\n}\n</code></pre>\n<p>and add an additional constructor that's inspired by <a href=\"https://stackoverflow.com/a/17474581/1744774\">Aerthel's answer</a> but is generic by using <code>Object...</code> and <code>&lt;K, V&gt;</code> types:</p>\n<pre><code>public InitHashMap( final Object... keyValuePairs ) {\n\n    if ( keyValuePairs.length % 2 != 0 )\n        throw new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\n\n    K key = null;\n    int i = -1;\n\n    for ( final Object keyOrValue : keyValuePairs )\n        switch ( ++i % 2 ) {\n            case 0:  // key\n                if ( keyOrValue == null )\n                    throw new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\n                key = (K) keyOrValue;\n                continue;\n            case 1:  // value\n                put( key, (V) keyOrValue );\n        }\n}\n</code></pre>\n<h3>Run</h3>\n<pre><code>public static void main( final String[] args ) {\n\n    final Map&lt;Integer, String&gt; map = new InitHashMap&lt;&gt;( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; );\n    System.out.println( map );\n}\n</code></pre>\n<h3>Output</h3>\n<pre><code>{1=First, 2=Second, 3=Third}\n</code></pre>\n<hr />\n<p>You also can extend the <code>Map</code> interface likewise:</p>\n<pre><code>public interface InitMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\n\n    static &lt;K, V&gt; Map&lt;K, V&gt; of( final Object... keyValuePairs ) {\n\n        if ( keyValuePairs.length % 2 != 0 )\n            throw new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\n\n        final Map&lt;K, V&gt; map = new HashMap&lt;&gt;( keyValuePairs.length &gt;&gt;&gt; 1, .75f );\n        K key = null;\n        int i = -1;\n\n        for ( final Object keyOrValue : keyValuePairs )\n            switch ( ++i % 2 ) {\n                case 0: // key\n                    if ( keyOrValue == null )\n                        throw new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\n                    key = (K) keyOrValue;\n                    continue;\n                case 1: // value\n                    map.put( key, (V) keyOrValue );\n            }\n        return map;\n    }\n}\n</code></pre>\n<h3>Run</h3>\n<pre><code>public static void main( final String[] args ) {\n\n    System.out.println( InitMap.of( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; ) );\n}\n</code></pre>\n<h3>Output</h3>\n<pre><code>{1=First, 2=Second, 3=Third}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":428914,"reputation":829,"user_id":811535,"display_name":"egridasov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561451988,"creation_date":1561451988,"answer_id":56749997,"question_id":507602,"body_markdown":"This one uses Apache commons-lang which will most likely be on your class path already:\r\n```\r\nMap&lt;String, String&gt; collect = Stream.of(\r\n        Pair.of(&quot;hello&quot;, &quot;world&quot;),\r\n        Pair.of(&quot;abc&quot;, &quot;123&quot;),\r\n        Pair.of(&quot;java&quot;, &quot;eight&quot;)\r\n).collect(Collectors.toMap(Pair::getKey, Pair::getValue));\r\n```","title":"How can I initialise a static Map?","body":"<p>This one uses Apache commons-lang which will most likely be on your class path already:</p>\n\n<pre><code>Map&lt;String, String&gt; collect = Stream.of(\n        Pair.of(\"hello\", \"world\"),\n        Pair.of(\"abc\", \"123\"),\n        Pair.of(\"java\", \"eight\")\n).collect(Collectors.toMap(Pair::getKey, Pair::getValue));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1975336,"reputation":5011,"user_id":1773233,"accept_rate":58,"display_name":"surfealokesea"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694165329,"creation_date":1605793936,"answer_id":64913102,"question_id":507602,"body_markdown":"Java 8 with streams:\r\n\r\n```java\r\n    private static final Map&lt;String, TemplateOpts&gt; templates = new HashMap&lt;&gt;();\r\n\r\n    static {\r\n        Arrays.stream(new String[][]{\r\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\r\n        }).forEach(f -&gt; templates.put(f[0], new TemplateOpts(f[1], f[2])));\r\n    }\r\n\r\n```\r\n\r\nIt can be also a Object[][] to put anything inside and map it in the forEach loop\r\n\r\n-------------------------\r\n-------------------------\r\n-------------------------\r\n\r\nSeparation of concerns implementation - with method abstraction &amp; generics to decouple things:\r\n```java\r\n    private static final Map&lt;String, TemplateOpts&gt; templates = mapFromArr(\r\n        new String[][]{\r\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\r\n        }, arr-&gt; arr[0], arr-&gt; new TemplateOpts(arr[1], arr[2]));\r\n\r\n    private static &lt;K,V&gt; Map&lt;K,V&gt; mapFromArr(Object[][] arr, Function&lt;Object[],K&gt; keyFnc, Function&lt;Object[],V&gt; valueFnc) {\r\n        Map&lt;K,V&gt; res = new HashMap&lt;&gt;();\r\n        Arrays.stream(arr).forEach(subArr -&gt;\r\n            res.put(keyFnc.apply(subArr), valueFnc.appy(subArr));\r\n        return res;\r\n    }\r\n\r\n```","title":"How can I initialise a static Map?","body":"<p>Java 8 with streams:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final Map&lt;String, TemplateOpts&gt; templates = new HashMap&lt;&gt;();\n\n    static {\n        Arrays.stream(new String[][]{\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\n        }).forEach(f -&gt; templates.put(f[0], new TemplateOpts(f[1], f[2])));\n    }\n\n</code></pre>\n<p>It can be also a Object[][] to put anything inside and map it in the forEach loop</p>\n<hr />\n<hr />\n<hr />\n<p>Separation of concerns implementation - with method abstraction &amp; generics to decouple things:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final Map&lt;String, TemplateOpts&gt; templates = mapFromArr(\n        new String[][]{\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\n        }, arr-&gt; arr[0], arr-&gt; new TemplateOpts(arr[1], arr[2]));\n\n    private static &lt;K,V&gt; Map&lt;K,V&gt; mapFromArr(Object[][] arr, Function&lt;Object[],K&gt; keyFnc, Function&lt;Object[],V&gt; valueFnc) {\n        Map&lt;K,V&gt; res = new HashMap&lt;&gt;();\n        Arrays.stream(arr).forEach(subArr -&gt;\n            res.put(keyFnc.apply(subArr), valueFnc.appy(subArr));\n        return res;\n    }\n\n</code></pre>\n"}],"owner":{"account_id":4804,"reputation":268589,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1034399,"favorite_count":0,"down_vote_count":1,"up_vote_count":1242,"accepted_answer_id":507658,"answer_count":43,"score":1241,"last_activity_date":1694165329,"creation_date":1233675693,"question_id":507602,"body_markdown":"How would you initialise a static `Map` in Java?\r\n\r\nMethod one: static initialiser &lt;br&gt;\r\nMethod two: instance initialiser (anonymous subclass)\r\nor\r\nsome other method?\r\n\r\nWhat are the pros and cons of each?\r\n\r\nHere is an example illustrating the two methods:\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\r\n        static {\r\n            myMap.put(1, &quot;one&quot;);\r\n            myMap.put(2, &quot;two&quot;);\r\n        }\r\n    \r\n        private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;(){\r\n            {\r\n                put(1, &quot;one&quot;);\r\n                put(2, &quot;two&quot;);\r\n            }\r\n        };\r\n    }","title":"How can I initialise a static Map?","body":"<p>How would you initialise a static <code>Map</code> in Java?</p>\n\n<p>Method one: static initialiser <br>\nMethod two: instance initialiser (anonymous subclass)\nor\nsome other method?</p>\n\n<p>What are the pros and cons of each?</p>\n\n<p>Here is an example illustrating the two methods:</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class Test {\n    private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\n    static {\n        myMap.put(1, \"one\");\n        myMap.put(2, \"two\");\n    }\n\n    private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;(){\n        {\n            put(1, \"one\");\n            put(2, \"two\");\n        }\n    };\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","lambda","aws-lambda"],"comments":[{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":1,"creation_date":1484148038,"post_id":41594500,"comment_id":70391977,"body_markdown":"That answer for JavaScript will work just as well for Java. You have to map the HTTP method to a context field in your API Gateway mapping template, as described in that answer.","body":"That answer for JavaScript will work just as well for Java. You have to map the HTTP method to a context field in your API Gateway mapping template, as described in that answer."},{"owner":{"account_id":8200494,"reputation":71,"user_id":6172009,"display_name":"Lars Wi"},"score":0,"creation_date":1484149844,"post_id":41594500,"comment_id":70393134,"body_markdown":"thanks to you mark! I mapped the &#39;http-method&#39; context field. But how can i access this information from java? In javascript its no problem to extend objects as described in the other stackoverflow post.","body":"thanks to you mark! I mapped the &#39;http-method&#39; context field. But how can i access this information from java? In javascript its no problem to extend objects as described in the other stackoverflow post."},{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1484150064,"post_id":41594500,"comment_id":70393278,"body_markdown":"I don&#39;t really use Java in AWS Lambda, but it looks like you will have to map any custom properties in your API Gateway mapping template to the event object since you can&#39;t extend the Context object in Java.","body":"I don&#39;t really use Java in AWS Lambda, but it looks like you will have to map any custom properties in your API Gateway mapping template to the event object since you can&#39;t extend the Context object in Java."},{"owner":{"account_id":8200494,"reputation":71,"user_id":6172009,"display_name":"Lars Wi"},"score":0,"creation_date":1484150579,"post_id":41594500,"comment_id":70393628,"body_markdown":"okay. But we&#39;re using custom objects as our first argument in the handler.\n\nBut since we just started with developing with AWS lambda...maybe we shoud switch to javascript ;)","body":"okay. But we&#39;re using custom objects as our first argument in the handler.  But since we just started with developing with AWS lambda...maybe we shoud switch to javascript ;)"}],"answers":[{"comments":[{"owner":{"account_id":8200494,"reputation":71,"user_id":6172009,"display_name":"Lars Wi"},"score":0,"creation_date":1484208570,"post_id":41596978,"comment_id":70417629,"body_markdown":"Thanks Dave for this workaround. But I won&#39;t http information in my entity objects. Is there no other option?","body":"Thanks Dave for this workaround. But I won&#39;t http information in my entity objects. Is there no other option?"}],"tags":[],"owner":{"account_id":308391,"reputation":8162,"user_id":620237,"accept_rate":97,"display_name":"Dave Maple"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484157157,"creation_date":1484155380,"answer_id":41596978,"question_id":41594500,"body_markdown":"You have several options on how you could receive the `httpMethod` in Java. One of the easiest would be to rename `&#39;http-method&#39;` to `&#39;httpMethod&#39;` in your Integration Request in API Gateway and then use the RequestHandler Interface for your Lambda handler which will marshal your JSON directly to a Java Object:\r\n\r\n    package example;\r\n    \r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n    import com.amazonaws.services.lambda.runtime.Context; \r\n    \r\n    public class Hello implements RequestHandler&lt;PojoRequest, PojoResponse&gt; {\r\n        \r\n        public PojoResponse handleRequest(PojoRequest request, Context context) {\r\n            System.out.println(String.format(&quot;HTTP method is %s.&quot;, request.getHttpMethod()));\r\n            return new PojoResponse();\r\n        }\r\n    }\r\n\r\nThen you can create whatever Pojo you want to be the request, for example:\r\n\r\n    package example;\r\n    \r\n    public class PojoRequest {\r\n        private String firstName;\r\n        private String lastName;\r\n        private String httpMethod;\r\n    \r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n    \r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n    \r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n    \r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n    \r\n        public String getHttpMethod() {\r\n            return httpMethod;\r\n        }\r\n    \r\n        public void setHttpMethod(String httpMethod) {\r\n            this.httpMethod = httpMethod;\r\n        }\r\n    }\r\n\r\nSee: [http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html][1]\r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html","title":"How to request http method in AWS lambda handler in java?","body":"<p>You have several options on how you could receive the <code>httpMethod</code> in Java. One of the easiest would be to rename <code>'http-method'</code> to <code>'httpMethod'</code> in your Integration Request in API Gateway and then use the RequestHandler Interface for your Lambda handler which will marshal your JSON directly to a Java Object:</p>\n\n<pre><code>package example;\n\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.Context; \n\npublic class Hello implements RequestHandler&lt;PojoRequest, PojoResponse&gt; {\n\n    public PojoResponse handleRequest(PojoRequest request, Context context) {\n        System.out.println(String.format(\"HTTP method is %s.\", request.getHttpMethod()));\n        return new PojoResponse();\n    }\n}\n</code></pre>\n\n<p>Then you can create whatever Pojo you want to be the request, for example:</p>\n\n<pre><code>package example;\n\npublic class PojoRequest {\n    private String firstName;\n    private String lastName;\n    private String httpMethod;\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getHttpMethod() {\n        return httpMethod;\n    }\n\n    public void setHttpMethod(String httpMethod) {\n        this.httpMethod = httpMethod;\n    }\n}\n</code></pre>\n\n<p>See: <a href=\"http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html</a></p>\n"},{"tags":[],"owner":{"account_id":2078676,"reputation":2468,"user_id":1851302,"accept_rate":62,"display_name":"KNU"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694165276,"creation_date":1694165276,"answer_id":77065701,"question_id":41594500,"body_markdown":"The official documentation you are looking for is : [AWS Lambda function handler in Java][1]\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/lambda/latest/dg/java-handler.html\r\n\r\nYou must be writing a handler class for the lambda function : \r\n\r\n    // Handler value: example.Handler\r\n    public class CustomSOLambdaHandler implements RequestHandler&lt;Map&lt;String,String&gt;, String&gt;{\r\n      @Override\r\n      public String handleRequest(Map&lt;String,String&gt; event, Context context)\r\n\r\nNow let us understand the two arguments of the handleRequest function before we can implement this overridden method : \r\n\r\n**Map&lt;String, String&gt; event**:\r\n\r\n * event is a parameter that represents the input data passed to the Lambda function. In AWS Lambda, events typically contain information about the trigger that invoked the function.\r\n * It is a Map&lt;String, String&gt;, which means it&#39;s a mapping of keys (strings) to values (strings). The specific structure of this map depends on the event source that triggered the Lambda function. AWS Lambda can be triggered by various sources like API Gateway, S3, DynamoDB, etc., and the format of the event parameter will vary accordingly.\r\n * Your Lambda function can extract information from this event to determine what action to take or process.\r\n\r\n**Context context**:\r\n\r\n * The context parameter is an object that provides information about the execution environment of the Lambda function.\r\n * It contains details such as the function name, function version, AWS request ID, and more.\r\n * It can also be used to interact with AWS services or to control the behavior of the Lambda function.\r\n\r\n\r\nNow, let&#39;s consider a *simple example*:\r\n\r\nSuppose you have an AWS Lambda function triggered by an API Gateway. When a client makes an HTTP request to your API, the API Gateway passes the request information to your Lambda function in the event parameter. The event parameter might contain details like the HTTP method (GET, POST, etc.), request headers, request body, and more.\r\n\r\nYour handleRequest method can then extract information from the event parameter to process the incoming HTTP request. For instance, you might retrieve the request body, parse it as JSON, perform some logic based on the received data, and return a response.\r\n\r\nHere&#39;s a very simplified example of how you might use this function in an API Gateway-triggered Lambda:\r\n\r\n    public class MyLambdaHandler implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\r\n        public String handleRequest(Map&lt;String, String&gt; event, Context context) {\r\n            // Extract information from the &#39;event&#39; parameter\r\n            String httpMethod = event.get(&quot;httpMethod&quot;);\r\n            String requestBody = event.get(&quot;body&quot;);\r\n            \r\n            // Perform some processing based on the request data\r\n            String response = &quot;Hello, StackOverflow Lambda!&quot;;\r\n            \r\n            // Return a response\r\n            return response;\r\n        }\r\n    }\r\n\r\nIn this example, the handleRequest method processes an HTTP request passed via the event parameter and returns a simple response. However, the actual implementation can be much more complex, depending on your use case and the data contained in the event parameter.","title":"How to request http method in AWS lambda handler in java?","body":"<p>The official documentation you are looking for is : <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/java-handler.html\" rel=\"nofollow noreferrer\">AWS Lambda function handler in Java</a></p>\n<p>You must be writing a handler class for the lambda function :</p>\n<pre><code>// Handler value: example.Handler\npublic class CustomSOLambdaHandler implements RequestHandler&lt;Map&lt;String,String&gt;, String&gt;{\n  @Override\n  public String handleRequest(Map&lt;String,String&gt; event, Context context)\n</code></pre>\n<p>Now let us understand the two arguments of the handleRequest function before we can implement this overridden method :</p>\n<p><strong>Map&lt;String, String&gt; event</strong>:</p>\n<ul>\n<li>event is a parameter that represents the input data passed to the Lambda function. In AWS Lambda, events typically contain information about the trigger that invoked the function.</li>\n<li>It is a Map&lt;String, String&gt;, which means it's a mapping of keys (strings) to values (strings). The specific structure of this map depends on the event source that triggered the Lambda function. AWS Lambda can be triggered by various sources like API Gateway, S3, DynamoDB, etc., and the format of the event parameter will vary accordingly.</li>\n<li>Your Lambda function can extract information from this event to determine what action to take or process.</li>\n</ul>\n<p><strong>Context context</strong>:</p>\n<ul>\n<li>The context parameter is an object that provides information about the execution environment of the Lambda function.</li>\n<li>It contains details such as the function name, function version, AWS request ID, and more.</li>\n<li>It can also be used to interact with AWS services or to control the behavior of the Lambda function.</li>\n</ul>\n<p>Now, let's consider a <em>simple example</em>:</p>\n<p>Suppose you have an AWS Lambda function triggered by an API Gateway. When a client makes an HTTP request to your API, the API Gateway passes the request information to your Lambda function in the event parameter. The event parameter might contain details like the HTTP method (GET, POST, etc.), request headers, request body, and more.</p>\n<p>Your handleRequest method can then extract information from the event parameter to process the incoming HTTP request. For instance, you might retrieve the request body, parse it as JSON, perform some logic based on the received data, and return a response.</p>\n<p>Here's a very simplified example of how you might use this function in an API Gateway-triggered Lambda:</p>\n<pre><code>public class MyLambdaHandler implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\n    public String handleRequest(Map&lt;String, String&gt; event, Context context) {\n        // Extract information from the 'event' parameter\n        String httpMethod = event.get(&quot;httpMethod&quot;);\n        String requestBody = event.get(&quot;body&quot;);\n        \n        // Perform some processing based on the request data\n        String response = &quot;Hello, StackOverflow Lambda!&quot;;\n        \n        // Return a response\n        return response;\n    }\n}\n</code></pre>\n<p>In this example, the handleRequest method processes an HTTP request passed via the event parameter and returns a simple response. However, the actual implementation can be much more complex, depending on your use case and the data contained in the event parameter.</p>\n"}],"owner":{"account_id":8200494,"reputation":71,"user_id":6172009,"display_name":"Lars Wi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8422,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694165276,"creation_date":1484147845,"question_id":41594500,"body_markdown":"How can I request the used HTTP Method in an AWS Lambda handler in JAVA? There is a argument `&#39;context&#39;`, but after a look on it, I can&#39;t request the used HTTP method.\r\n\r\nHTTP-Methods are: GET, POST, PUT\r\n\r\nBTW: Here is the answer for javascript: https://stackoverflow.com/questions/35252544/how-to-get-the-http-method-in-aws-lambda\r\n\r\n\r\nbest regards,\r\nlars","title":"How to request http method in AWS lambda handler in java?","body":"<p>How can I request the used HTTP Method in an AWS Lambda handler in JAVA? There is a argument <code>'context'</code>, but after a look on it, I can't request the used HTTP method.</p>\n\n<p>HTTP-Methods are: GET, POST, PUT</p>\n\n<p>BTW: Here is the answer for javascript: <a href=\"https://stackoverflow.com/questions/35252544/how-to-get-the-http-method-in-aws-lambda\">How to get the HTTP method in AWS Lambda?</a></p>\n\n<p>best regards,\nlars</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1551569605,"post_id":54964093,"comment_id":96688973,"body_markdown":"can you modify those signatures to have only the varargs?","body":"can you modify those signatures to have only the varargs?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1551569696,"post_id":54964093,"comment_id":96688988,"body_markdown":"You can use [Collections.unmodifiableList(...)](https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList(java.util.List)) to get an unmodifiable version of a list.","body":"You can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList(java.util.List)\" rel=\"nofollow noreferrer\">Collections.unmodifiableList(...)</a> to get an unmodifiable version of a list."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1551569752,"post_id":54964093,"comment_id":96689000,"body_markdown":"There is no concise way within Java&#39;s API to do what you want that I know of (you can of course always transform the modifiable list to an unmodifiable list through [`Collections.toUnmodifiableList(...)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#unmodifiableList(java.util.List))). The question that comes to my mind is: why is the parameter `t` separated in the method&#39;s signature?","body":"There is no concise way within Java&#39;s API to do what you want that I know of (you can of course always transform the modifiable list to an unmodifiable list through <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#unmodifiableList(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections.toUnmodifiableList(...)</code></a>). The question that comes to my mind is: why is the parameter <code>t</code> separated in the method&#39;s signature?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1551569894,"post_id":54964093,"comment_id":96689020,"body_markdown":"By the way, `Arrays.asList` produces a fixed-size list, not supporting `add`.","body":"By the way, <code>Arrays.asList</code> produces a fixed-size list, not supporting <code>add</code>."},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":0,"creation_date":1551569914,"post_id":54964093,"comment_id":96689024,"body_markdown":"@Turing85 might be for performance reasons.","body":"@Turing85 might be for performance reasons."},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":0,"creation_date":1551570550,"post_id":54964093,"comment_id":96689139,"body_markdown":"@Turing85 Or to force at least one argument.","body":"@Turing85 Or to force at least one argument."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1551570639,"post_id":54964093,"comment_id":96689153,"body_markdown":"@LppEdd or maybe because the answer was 42 :) Would like to hear an answer from OP ;)","body":"@LppEdd or maybe because the answer was 42 :) Would like to hear an answer from OP ;)"},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":0,"creation_date":1551571141,"post_id":54964093,"comment_id":96689237,"body_markdown":"@Turing85 hahaha nice movie (and good book) ;)","body":"@Turing85 hahaha nice movie (and good book) ;)"},{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1551571887,"post_id":54964093,"comment_id":96689367,"body_markdown":"@njzk2 it&#39;s not only varargs because I need the user to pass at least one argument, o/w I want the compiler to complain","body":"@njzk2 it&#39;s not only varargs because I need the user to pass at least one argument, o/w I want the compiler to complain"}],"answers":[{"comments":[{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1551571475,"post_id":54964260,"comment_id":96689301,"body_markdown":"minor detail nitpick but I don&#39;t think the `args.length + 1` is necessary here, prob can just omit it?","body":"minor detail nitpick but I don&#39;t think the <code>args.length + 1</code> is necessary here, prob can just omit it?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1551571564,"post_id":54964260,"comment_id":96689315,"body_markdown":"@AlexanderMills it is not needed, for sure (because all lists are dynamic data structures), but is provieds a (very minor) performance increase :)","body":"@AlexanderMills it is not needed, for sure (because all lists are dynamic data structures), but is provieds a (very minor) performance increase :)"},{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1551574276,"post_id":54964260,"comment_id":96689768,"body_markdown":"if I want to put t in the first position  aka, `newList.add(0,t)`, not sure how to make that performant. I assume it has to go through the whole list and shift everything one index over..so damn","body":"if I want to put t in the first position  aka, <code>newList.add(0,t)</code>, not sure how to make that performant. I assume it has to go through the whole list and shift everything one index over..so damn"},{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1551574318,"post_id":54964260,"comment_id":96689780,"body_markdown":"ultimately my question is how to make the performant (avoiding this call `newList.add(0,t)`) since that&#39;s pretty unperformant call.","body":"ultimately my question is how to make the performant (avoiding this call <code>newList.add(0,t)</code>) since that&#39;s pretty unperformant call."},{"owner":{"account_id":3044796,"reputation":3439,"user_id":2580773,"display_name":"David SN"},"score":0,"creation_date":1551638133,"post_id":54964260,"comment_id":96703897,"body_markdown":"You can just switch the order. Create the new list, call the method `add(t)` and then call the method `addAll()`.","body":"You can just switch the order. Create the new list, call the method <code>add(t)</code> and then call the method <code>addAll()</code>."}],"tags":[],"owner":{"account_id":3044796,"reputation":3439,"user_id":2580773,"display_name":"David SN"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551570957,"creation_date":1551570957,"answer_id":54964260,"question_id":54964093,"body_markdown":"There is no concise way to create the list. Probably your best option is to create a new list, add both the array elements and the new element to the list and return a unmodifiable list using `Collections.unmodifiableList`.\r\n\r\n        List&lt;T&gt; newList = new ArrayList&lt;&gt;(tasks.length + 1);\r\n        newList.addAll(Arrays.asList(tasks));\r\n        newList.add(t);\r\n        List&lt;T&gt; unmodifiableList = Collections.unmodifiableList(newList);","title":"Easily add element to varargs list","body":"<p>There is no concise way to create the list. Probably your best option is to create a new list, add both the array elements and the new element to the list and return a unmodifiable list using <code>Collections.unmodifiableList</code>.</p>\n\n<pre><code>    List&lt;T&gt; newList = new ArrayList&lt;&gt;(tasks.length + 1);\n    newList.addAll(Arrays.asList(tasks));\n    newList.add(t);\n    List&lt;T&gt; unmodifiableList = Collections.unmodifiableList(newList);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1551571736,"post_id":54964268,"comment_id":96689343,"body_markdown":"thanks I updated the OP to make it a little bit better, but this might work","body":"thanks I updated the OP to make it a little bit better, but this might work"},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":1,"creation_date":1551571844,"post_id":54964268,"comment_id":96689360,"body_markdown":"@AlexanderMills I updated the answer to reflect the desired result","body":"@AlexanderMills I updated the answer to reflect the desired result"},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":1,"creation_date":1551573502,"post_id":54964268,"comment_id":96689623,"body_markdown":"@AlexanderMills I also added varargs null handling.","body":"@AlexanderMills I also added varargs null handling."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1694166386,"post_id":54964268,"comment_id":135858724,"body_markdown":"since Java 16 we can use `.toList()` on `Stream` directly instead of `.collect(Collectors.toList())`","body":"since Java 16 we can use <code>.toList()</code> on <code>Stream</code> directly instead of <code>.collect(Collectors.toList())</code>"}],"tags":[],"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551573487,"creation_date":1551571045,"answer_id":54964268,"question_id":54964093,"body_markdown":"While a short &amp; performant (well maybe this isn&#39;t bad at all!) solution isn&#39;t possible with the current Java `API`, I&#39;ll showcase a one-liner with the help of `Stream`(s).\r\n\r\n    return cb -&gt; NeoSeries.Series(concat(of(t), of(tasks)).collect(toList()), cb);\r\n\r\nThis line\r\n\r\n    concat(of(t), of(tasks)).collect(toList())\r\n\r\nexpanded becomes\r\n\r\n    Stream.concat(Stream.of(t), Stream.of(tasks))\r\n          .collect(Collectors.toList());\r\n\r\nThis is lazily computed, and will avoid temporary state.\r\n\r\n----------\r\n\r\nWhat the other answer fail to mention is null-handling. What if the varargs array is null? `Arrays.asList` would throw an `Exception`. The same for `Stream.of`\r\n\r\nFor that you can write a masking method such as\r\n\r\n    private static &lt;T, E&gt; AsyncTask&lt;T, E&gt;[] maskNull(final AsyncTask&lt;T, E&gt;[] tasks) {\r\n    \treturn tasks != null ? tasks : (AsyncTask&lt;T, E&gt;[]) new AsyncTask[0];\r\n    }\r\n\r\nAnd use it like\r\n\r\n    of(maskNull(tasks))","title":"Easily add element to varargs list","body":"<p>While a short &amp; performant (well maybe this isn't bad at all!) solution isn't possible with the current Java <code>API</code>, I'll showcase a one-liner with the help of <code>Stream</code>(s).</p>\n\n<pre><code>return cb -&gt; NeoSeries.Series(concat(of(t), of(tasks)).collect(toList()), cb);\n</code></pre>\n\n<p>This line</p>\n\n<pre><code>concat(of(t), of(tasks)).collect(toList())\n</code></pre>\n\n<p>expanded becomes</p>\n\n<pre><code>Stream.concat(Stream.of(t), Stream.of(tasks))\n      .collect(Collectors.toList());\n</code></pre>\n\n<p>This is lazily computed, and will avoid temporary state.</p>\n\n<hr>\n\n<p>What the other answer fail to mention is null-handling. What if the varargs array is null? <code>Arrays.asList</code> would throw an <code>Exception</code>. The same for <code>Stream.of</code></p>\n\n<p>For that you can write a masking method such as</p>\n\n<pre><code>private static &lt;T, E&gt; AsyncTask&lt;T, E&gt;[] maskNull(final AsyncTask&lt;T, E&gt;[] tasks) {\n    return tasks != null ? tasks : (AsyncTask&lt;T, E&gt;[]) new AsyncTask[0];\n}\n</code></pre>\n\n<p>And use it like</p>\n\n<pre><code>of(maskNull(tasks))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":1,"creation_date":1551571684,"post_id":54964321,"comment_id":96689336,"body_markdown":"Have you considered the one-liner I posted above?","body":"Have you considered the one-liner I posted above?"},{"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1551574457,"post_id":54964321,"comment_id":96689808,"body_markdown":"Honestly not considering it since it&#39;s overcomplicated, I might copy/paste that code and never understand it again :/ I am however not that satisfied with my answer here either.  The call `newList.add(0,t);` is not performant, I am looking for one liner that can I add everything to array at once.","body":"Honestly not considering it since it&#39;s overcomplicated, I might copy/paste that code and never understand it again :/ I am however not that satisfied with my answer here either.  The call <code>newList.add(0,t);</code> is not performant, I am looking for one liner that can I add everything to array at once."},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":1,"creation_date":1551574589,"post_id":54964321,"comment_id":96689833,"body_markdown":"You need a trade-off. Honestly, with the added null-check, both solutions would be &quot;over-complicated&quot;. Just document your code well and you&#39;ll be fine. I use Stream(s) daily like that and it is a matter of being used to it. As I stated in the answer, via Stream you avoid temporary state, which is awesome imho","body":"You need a trade-off. Honestly, with the added null-check, both solutions would be &quot;over-complicated&quot;. Just document your code well and you&#39;ll be fine. I use Stream(s) daily like that and it is a matter of being used to it. As I stated in the answer, via Stream you avoid temporary state, which is awesome imho"},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":1,"creation_date":1551574686,"post_id":54964321,"comment_id":96689845,"body_markdown":"You also don&#39;t need to explicity insert at an index, shifting the array. The two Streams are merged internally as  a single sequence.","body":"You also don&#39;t need to explicity insert at an index, shifting the array. The two Streams are merged internally as  a single sequence."}],"tags":[],"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551571617,"creation_date":1551571617,"answer_id":54964321,"question_id":54964093,"body_markdown":"So here is what I got:\r\n\r\nbefore:\r\n\r\n    var tasks = Arrays.asList(args);\r\n    tasks.add(0,t);  // throws exception \r\n\r\nafter:\r\n      \r\n    var newList = new ArrayList&lt;&gt;(Arrays.asList(args));\r\n    newList.add(0,t);\r\n\r\nthe problem with the first one is it creates an immutable list that will throw an exception if you try to add to it after it&#39;s first created.","title":"Easily add element to varargs list","body":"<p>So here is what I got:</p>\n\n<p>before:</p>\n\n<pre><code>var tasks = Arrays.asList(args);\ntasks.add(0,t);  // throws exception \n</code></pre>\n\n<p>after:</p>\n\n<pre><code>var newList = new ArrayList&lt;&gt;(Arrays.asList(args));\nnewList.add(0,t);\n</code></pre>\n\n<p>the problem with the first one is it creates an immutable list that will throw an exception if you try to add to it after it's first created.</p>\n"},{"tags":[],"owner":{"account_id":5444810,"reputation":3671,"user_id":4331750,"accept_rate":83,"display_name":"whistling_marmot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694164253,"creation_date":1694164253,"answer_id":77065582,"question_id":54964093,"body_markdown":"I&#39;m late to the show, but you can use [Guava Lists][1].\r\n\r\n    var listOfTasks = com.google.common.collect.Lists.asList(t, tasks);\r\n\r\n\r\n  [1]: https://guava.dev/releases/19.0/api/docs/com/google/common/collect/Lists.html#asList(E,%20E[])","title":"Easily add element to varargs list","body":"<p>I'm late to the show, but you can use <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/collect/Lists.html#asList(E,%20E%5B%5D)\" rel=\"nofollow noreferrer\">Guava Lists</a>.</p>\n<pre><code>var listOfTasks = com.google.common.collect.Lists.asList(t, tasks);\n</code></pre>\n"}],"owner":{"account_id":1266843,"reputation":93064,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1694164253,"creation_date":1551569257,"question_id":54964093,"body_markdown":"I have these signatures:\r\n\r\n      public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Parallel(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\r\n        return cb -&gt; NeoParallel.Parallel(List.of(tasks), cb);\r\n      }\r\n      \r\n      public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Series(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\r\n        return cb -&gt; NeoSeries.Series(List.of(tasks), cb);\r\n      }\r\n\r\nhow can I easily add `t` to the `List.of(tasks)`?\r\n\r\nThis won&#39;t work because it creates an immutable list:\r\n\r\n    var listOfTasks = Arrays.asList(tasks);\r\n    listOfTasks.add(0, t);\r\n\r\nis there a way to easily create a list that I can add to, or do it in one line?\r\n\r\nSince this call is likely unperformant:\r\n\r\n       listOfTasks.add(0, t);\r\n\r\nI am looking for an alternative\r\n\r\n","title":"Easily add element to varargs list","body":"<p>I have these signatures:</p>\n\n<pre><code>  public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Parallel(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\n    return cb -&gt; NeoParallel.Parallel(List.of(tasks), cb);\n  }\n\n  public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Series(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\n    return cb -&gt; NeoSeries.Series(List.of(tasks), cb);\n  }\n</code></pre>\n\n<p>how can I easily add <code>t</code> to the <code>List.of(tasks)</code>?</p>\n\n<p>This won't work because it creates an immutable list:</p>\n\n<pre><code>var listOfTasks = Arrays.asList(tasks);\nlistOfTasks.add(0, t);\n</code></pre>\n\n<p>is there a way to easily create a list that I can add to, or do it in one line?</p>\n\n<p>Since this call is likely unperformant:</p>\n\n<pre><code>   listOfTasks.add(0, t);\n</code></pre>\n\n<p>I am looking for an alternative</p>\n"},{"tags":["java","intellij-idea","jpanel","jbutton","jscrollpane"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1694166291,"post_id":77065573,"comment_id":135858695,"body_markdown":"You really need to provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)\nDon&#39;t mix AWT components with Swing (such as `Button`) and, it&#39;s &quot;Answer&quot;","body":"You really need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> Don&#39;t mix AWT components with Swing (such as <code>Button</code>) and, it&#39;s &quot;Answer&quot;"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694208108,"post_id":77065573,"comment_id":135866111,"body_markdown":"This will happen when you do not specify a _width_ and _height_ for your window.","body":"This will happen when you do not specify a <i>width</i> and <i>height</i> for your window."}],"owner":{"account_id":29393605,"reputation":11,"user_id":22521414,"display_name":"war030805"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694164112,"creation_date":1694164112,"question_id":77065573,"body_markdown":"so I am making a program to study and I want to see and edit the words that you upload in a Jscrollpane and I have a JPanel with gridlayout(0,2) in the Jscrollpane (with maximum height of 700) and when I start the program it adds buttons to the JPanel to see that it works. it works but when the Jscrollpane gets to big it does something strange it moves the Jscrollpane to under\r\n[when buttons is to much(35 buttons)](https://i.stack.imgur.com/oGjXK.png)\r\nbut when I have under 30 buttons it is normal\r\n[7 buttons](https://i.stack.imgur.com/2kLEZ.png)\r\nI use GUI form in IntelliJ IDEA CE and this is how it looks in the form(I don&#39;t know that it has anything to do with it)\r\n[GUI form](https://i.stack.imgur.com/ed8qo.png)\r\n\r\ncode:\r\n(does when you start program)\r\npublic void setknoppen() {\r\n        panel1.setVisible(false);\r\n//I have a menu and when you press a button it sets that panel to invisible and this to visible\r\n\r\n        panel2.setLayout(new GridLayout(0, 2));\r\n&gt; //panel2= panel in Jscrollpane\r\n\r\n        for (int i = 0; i &lt; 60; i++) {\r\n            Button button = new Button(&quot;question&quot; + i);\r\n            panel2.add(button);\r\n            button = new Button(&quot;anser&quot; + i);\r\n            panel2.add(button);\r\n        }\r\n        System.out.println(scrollpane.getY());\r\n        panel1.revalidate();\r\n        panel1.repaint();\r\n    }\r\n\r\nI tried to revalidate and repaint the panel1, panel2, Jscrollpane.\r\nI tried tried to add the textfield (what I want in the end instead of the buttons) and the same happens\r\n\r\nwhat I want is that the Jscrollpane is in the top of the Frame and if I want to scroll to see the one that you can&#39;t see I can. \r\njust like this (I made it in pages so it looks a bit strange) (the darker part on the right is the scroller)\r\n[what i want](https://i.stack.imgur.com/OtjsL.jpg)","title":"adding Commonest to jPanel with gridLayout","body":"<p>so I am making a program to study and I want to see and edit the words that you upload in a Jscrollpane and I have a JPanel with gridlayout(0,2) in the Jscrollpane (with maximum height of 700) and when I start the program it adds buttons to the JPanel to see that it works. it works but when the Jscrollpane gets to big it does something strange it moves the Jscrollpane to under\n<a href=\"https://i.stack.imgur.com/oGjXK.png\" rel=\"nofollow noreferrer\">when buttons is to much(35 buttons)</a>\nbut when I have under 30 buttons it is normal\n<a href=\"https://i.stack.imgur.com/2kLEZ.png\" rel=\"nofollow noreferrer\">7 buttons</a>\nI use GUI form in IntelliJ IDEA CE and this is how it looks in the form(I don't know that it has anything to do with it)\n<a href=\"https://i.stack.imgur.com/ed8qo.png\" rel=\"nofollow noreferrer\">GUI form</a></p>\n<p>code:\n(does when you start program)\npublic void setknoppen() {\npanel1.setVisible(false);\n//I have a menu and when you press a button it sets that panel to invisible and this to visible</p>\n<pre><code>    panel2.setLayout(new GridLayout(0, 2));\n</code></pre>\n<blockquote>\n<p>//panel2= panel in Jscrollpane</p>\n</blockquote>\n<pre><code>    for (int i = 0; i &lt; 60; i++) {\n        Button button = new Button(&quot;question&quot; + i);\n        panel2.add(button);\n        button = new Button(&quot;anser&quot; + i);\n        panel2.add(button);\n    }\n    System.out.println(scrollpane.getY());\n    panel1.revalidate();\n    panel1.repaint();\n}\n</code></pre>\n<p>I tried to revalidate and repaint the panel1, panel2, Jscrollpane.\nI tried tried to add the textfield (what I want in the end instead of the buttons) and the same happens</p>\n<p>what I want is that the Jscrollpane is in the top of the Frame and if I want to scroll to see the one that you can't see I can.\njust like this (I made it in pages so it looks a bit strange) (the darker part on the right is the scroller)\n<a href=\"https://i.stack.imgur.com/OtjsL.jpg\" rel=\"nofollow noreferrer\">what i want</a></p>\n"},{"tags":["java","vaadin","vaadin-flow","vaadin-grid"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1603983084,"post_id":64593133,"comment_id":114213275,"body_markdown":"One prime suspect around those things is borked equality/hashcode.  have you tried without overriding those (so back to object identity)? are you sure your IDs are not just null due to some mapping problems from the db etc (that would make those two equal too)","body":"One prime suspect around those things is borked equality/hashcode.  have you tried without overriding those (so back to object identity)? are you sure your IDs are not just null due to some mapping problems from the db etc (that would make those two equal too)"},{"owner":{"account_id":10524216,"reputation":712,"user_id":7755716,"display_name":"Wulf"},"score":0,"creation_date":1603984652,"post_id":64593133,"comment_id":114214143,"body_markdown":"@cfrick Thank you for the thoughts. I add the entity where it workes like it should. I also tried to delete my custom `equals/has` Methodes and two use defaults, but its quite the same result","body":"@cfrick Thank you for the thoughts. I add the entity where it workes like it should. I also tried to delete my custom <code>equals&#47;has</code> Methodes and two use defaults, but its quite the same result"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1604065968,"post_id":64593133,"comment_id":114241180,"body_markdown":"I also think that equals/hashCode could be the problem. @Data also generates these. Can you try without Lombok and any equals/hashCode methods","body":"I also think that equals/hashCode could be the problem. @Data also generates these. Can you try without Lombok and any equals/hashCode methods"},{"owner":{"account_id":10524216,"reputation":712,"user_id":7755716,"display_name":"Wulf"},"score":0,"creation_date":1604166589,"post_id":64593133,"comment_id":114266592,"body_markdown":"@SimonMartinelli Okay. Its was the problem with equals/hasCode. I mean its confusing why the `Notiz` works but `Kunde` not. The difference is the level of inheritance...","body":"@SimonMartinelli Okay. Its was the problem with equals/hasCode. I mean its confusing why the <code>Notiz</code> works but <code>Kunde</code> not. The difference is the level of inheritance..."}],"answers":[{"tags":[],"owner":{"account_id":14365136,"reputation":890,"user_id":10376405,"display_name":"Paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694163803,"creation_date":1694163803,"answer_id":77065545,"question_id":64593133,"body_markdown":"a Vaadin Grid&lt;&gt; refers to their rows by ID. Internally, the keymapper of the grid will try to assign an ID to each row. Since any collection used to populate the Grid&lt;&gt; through the grid&#39;s ```.setItems()```-method is internally parsed to a Set&lt;&gt;, Vaadin will try to use your equals-method.\r\n\r\nIf you don&#39;t have an equals-method, Vaadin employs several fallbacks, one of which is looking if your objects contain a field named ```id```\r\n\r\nA great explanation and other possible solutions for this, can be found on Github by Martin&#39;s [article on grid-and-broken-equals][1]\r\n\r\n\r\n  [1]: https://mvysny.github.io/grid-and-broken-equals/","title":"Vaadin flow Grid items duplicate rows","body":"<p>a Vaadin Grid&lt;&gt; refers to their rows by ID. Internally, the keymapper of the grid will try to assign an ID to each row. Since any collection used to populate the Grid&lt;&gt; through the grid's <code>.setItems()</code>-method is internally parsed to a Set&lt;&gt;, Vaadin will try to use your equals-method.</p>\n<p>If you don't have an equals-method, Vaadin employs several fallbacks, one of which is looking if your objects contain a field named <code>id</code></p>\n<p>A great explanation and other possible solutions for this, can be found on Github by Martin's <a href=\"https://mvysny.github.io/grid-and-broken-equals/\" rel=\"nofollow noreferrer\">article on grid-and-broken-equals</a></p>\n"}],"owner":{"account_id":10524216,"reputation":712,"user_id":7755716,"display_name":"Wulf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694163803,"creation_date":1603981607,"question_id":64593133,"body_markdown":"Vaadinversion: 14.4.1&lt;p&gt;\r\nspring-boot-starter-parent: 2.2.10RELEASE\r\n\r\nI have two items in my grid. These two items looks like:\r\n\r\n    Kontakt{id=11657f9e-c4f4-414f-aab2-618252db9b06&#39;vorname=&#39;test1&#39;...\r\n    Kontakt{id=8da74f38-2072-4fb0-8c74-aede661f02b5&#39;vorname=&#39;test&#39;...\r\n\r\nBut the grid only displays only one items and so oft like the `&quot;itemslist.size()&quot;`\r\nAlso they react as &quot;one row&quot;. So I can like on the first and both get selected.\r\n\r\nThese are my `@Entity(s)`\r\n\r\n    @Entity\r\n    @Table(name = &quot;std_kunde&quot;)\r\n    @Data\r\n    public class Kunde extends Kontakt {\r\n    \r\n        public Kunde() {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return super.toString();\r\n        }\r\n    }\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Data\r\n    public abstract class Kontakt extends BasicEntity {\r\n    \r\n        private String vorname;\r\n        private String name;\r\n        ...\r\n    \r\n       \r\n        public Kontakt() {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Kontakt{&quot; +\r\n                    &quot;id=&quot; + getId() + &#39;\\&#39;&#39; +\r\n                    &quot;vorname=&#39;&quot; + vorname + &#39;\\&#39;&#39; +\r\n                   ...\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Data\r\n    public abstract class BasicEntity {\r\n    \r\n        @Id\r\n        @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;....KeyGenerator&quot;)\r\n        @GeneratedValue(generator = &quot;id_generator&quot;)\r\n        @Column(length = 128)\r\n        private String id;\r\n    \r\n        @CreationTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;create_date&quot;)\r\n        private Date createDate;\r\n    \r\n        @UpdateTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;modify_date&quot;)\r\n        private Date modifyDate;\r\n    \r\n        @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\r\n        private List&lt;Anhang&gt; anhangList;\r\n        @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\r\n        private List&lt;Notiz&gt; notizList;\r\n    \r\n    \r\n        public BasicEntity() {\r\n            anhangList = new ArrayList&lt;&gt;();\r\n            notizList = new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(id);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o){\r\n            if(null == o)\r\n                return false;\r\n            if(!(o instanceof BasicEntity))\r\n                return false;\r\n            BasicEntity b = (BasicEntity) o;\r\n            return b.getId().equals(this.getId());\r\n        }\r\n    }\r\n\r\nAnd also the Grid code\r\n\r\n     @Autowired\r\n    private KundeService kundeService;\r\n\r\n    private Grid&lt;Kunde&gt; g;\r\n\r\n    public Dashboard() {\r\n        g = new Grid&lt;&gt;(Kunde.class);\r\n        g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\r\n        g.setSizeFull();\r\n        setSizeFull();\r\n        add(g);\r\n    }\r\n\r\nI tested to build a Grid based upon an other entiy and it worked like it should. Its like the first time I have this behaivor but I dont know how actually to debug it...\r\n\r\nEDIT 29.10.2020 ---------------------------------------------------------------&lt;p&gt;\r\nThis is the `@Entity` (Notiz) which works like expected.&lt;p&gt;\r\nUI-Code\r\n\r\n    private Grid&lt;Kunde&gt; g;\r\n        private Grid&lt;Notiz&gt; n;\r\n    \r\n        public Dashboard() {\r\n            g = new Grid&lt;&gt;(Kunde.class);\r\n            g.addColumn(Kunde::getId).setHeader(&quot;ID&quot;);\r\n            g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\r\n            g.setSizeFull();\r\n    \r\n            n = new Grid&lt;&gt;(Notiz.class);\r\n            n.addColumn(Notiz::getId).setHeader(&quot;ID&quot;);\r\n            n.addColumn(Notiz::getTitel).setHeader(&quot;Titel&quot;);\r\n            n.setSizeFull();\r\n            setSizeFull();\r\n            add(g,n);\r\n        }\r\n    \r\n        @PostConstruct\r\n        private void loadValues(){\r\n            g.setItems(kundeService.findAll());\r\n            n.setItems(notizService.findAll());\r\n        }\r\n\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;ld_notiz&quot;)\r\n    @Data\r\n    public class Notiz extends BasicEntitySystemFeatures {\r\n    \r\n    \r\n        private String titel;\r\n        @Column(length = 5000)  //TODO\r\n        private String content;\r\n        private boolean abgeschlossen = false;\r\n    \r\n        @Enumerated(EnumType.STRING)\r\n        private NOTIZ_TYP notizTyp;\r\n    \r\n        public enum NOTIZ_TYP {\r\n            NOTIZ,\r\n            ERINNERUNG\r\n        }\r\n    \r\n        @ManyToOne\r\n        private BasicEntity basicEntity;\r\n    \r\n        public Notiz() {\r\n            super();\r\n        }\r\n    }\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Data\r\n    public abstract class BasicEntitySystemFeatures {\r\n        @Id\r\n        @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;...KeyGenerator&quot;)\r\n        @GeneratedValue(generator = &quot;id_generator&quot;)\r\n        @Column(length = 128)\r\n        private String id;\r\n    \r\n        @CreationTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;create_date&quot;)\r\n        private Date createDate;\r\n    \r\n        @UpdateTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;modify_date&quot;)\r\n        private Date modifyDate;\r\n    \r\n        public BasicEntitySystemFeatures() {\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(id);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o){\r\n            if(null == o)\r\n                return false;\r\n            if(!(o instanceof BasicEntitySystemFeatures))\r\n                return false;\r\n            BasicEntitySystemFeatures b = (BasicEntitySystemFeatures) o;\r\n            return b.getId().equals(this.getId());\r\n        }\r\n\r\n[![Comparing the UI Result of both Entities][1]][1]\r\n\r\n\r\n[![Screenshot of Vaadin UI Grid not clicked row][2]][2]\r\n[![Screenshot of Vaadin UI Grid clicked row][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e174J.png\r\n  [2]: https://i.stack.imgur.com/pjhc1.png\r\n  [3]: https://i.stack.imgur.com/0MZ2z.png","title":"Vaadin flow Grid items duplicate rows","body":"<p>Vaadinversion: 14.4.1<p>\nspring-boot-starter-parent: 2.2.10RELEASE</p>\n<p>I have two items in my grid. These two items looks like:</p>\n<pre><code>Kontakt{id=11657f9e-c4f4-414f-aab2-618252db9b06'vorname='test1'...\nKontakt{id=8da74f38-2072-4fb0-8c74-aede661f02b5'vorname='test'...\n</code></pre>\n<p>But the grid only displays only one items and so oft like the <code>&quot;itemslist.size()&quot;</code>\nAlso they react as &quot;one row&quot;. So I can like on the first and both get selected.</p>\n<p>These are my <code>@Entity(s)</code></p>\n<pre><code>@Entity\n@Table(name = &quot;std_kunde&quot;)\n@Data\npublic class Kunde extends Kontakt {\n\n    public Kunde() {\n        super();\n    }\n\n    @Override\n    public String toString() {\n        return super.toString();\n    }\n}\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Data\npublic abstract class Kontakt extends BasicEntity {\n\n    private String vorname;\n    private String name;\n    ...\n\n   \n    public Kontakt() {\n        super();\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Kontakt{&quot; +\n                &quot;id=&quot; + getId() + '\\'' +\n                &quot;vorname='&quot; + vorname + '\\'' +\n               ...\n                '}';\n    }\n}\n\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Data\npublic abstract class BasicEntity {\n\n    @Id\n    @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;....KeyGenerator&quot;)\n    @GeneratedValue(generator = &quot;id_generator&quot;)\n    @Column(length = 128)\n    private String id;\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;create_date&quot;)\n    private Date createDate;\n\n    @UpdateTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;modify_date&quot;)\n    private Date modifyDate;\n\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\n    private List&lt;Anhang&gt; anhangList;\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\n    private List&lt;Notiz&gt; notizList;\n\n\n    public BasicEntity() {\n        anhangList = new ArrayList&lt;&gt;();\n        notizList = new ArrayList&lt;&gt;();\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n\n    @Override\n    public boolean equals(Object o){\n        if(null == o)\n            return false;\n        if(!(o instanceof BasicEntity))\n            return false;\n        BasicEntity b = (BasicEntity) o;\n        return b.getId().equals(this.getId());\n    }\n}\n</code></pre>\n<p>And also the Grid code</p>\n<pre><code> @Autowired\nprivate KundeService kundeService;\n\nprivate Grid&lt;Kunde&gt; g;\n\npublic Dashboard() {\n    g = new Grid&lt;&gt;(Kunde.class);\n    g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\n    g.setSizeFull();\n    setSizeFull();\n    add(g);\n}\n</code></pre>\n<p>I tested to build a Grid based upon an other entiy and it worked like it should. Its like the first time I have this behaivor but I dont know how actually to debug it...</p>\n<p>EDIT 29.10.2020 ---------------------------------------------------------------<p>\nThis is the <code>@Entity</code> (Notiz) which works like expected.<p>\nUI-Code</p>\n<pre><code>private Grid&lt;Kunde&gt; g;\n    private Grid&lt;Notiz&gt; n;\n\n    public Dashboard() {\n        g = new Grid&lt;&gt;(Kunde.class);\n        g.addColumn(Kunde::getId).setHeader(&quot;ID&quot;);\n        g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\n        g.setSizeFull();\n\n        n = new Grid&lt;&gt;(Notiz.class);\n        n.addColumn(Notiz::getId).setHeader(&quot;ID&quot;);\n        n.addColumn(Notiz::getTitel).setHeader(&quot;Titel&quot;);\n        n.setSizeFull();\n        setSizeFull();\n        add(g,n);\n    }\n\n    @PostConstruct\n    private void loadValues(){\n        g.setItems(kundeService.findAll());\n        n.setItems(notizService.findAll());\n    }\n\n\n\n@Entity\n@Table(name = &quot;ld_notiz&quot;)\n@Data\npublic class Notiz extends BasicEntitySystemFeatures {\n\n\n    private String titel;\n    @Column(length = 5000)  //TODO\n    private String content;\n    private boolean abgeschlossen = false;\n\n    @Enumerated(EnumType.STRING)\n    private NOTIZ_TYP notizTyp;\n\n    public enum NOTIZ_TYP {\n        NOTIZ,\n        ERINNERUNG\n    }\n\n    @ManyToOne\n    private BasicEntity basicEntity;\n\n    public Notiz() {\n        super();\n    }\n}\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Data\npublic abstract class BasicEntitySystemFeatures {\n    @Id\n    @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;...KeyGenerator&quot;)\n    @GeneratedValue(generator = &quot;id_generator&quot;)\n    @Column(length = 128)\n    private String id;\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;create_date&quot;)\n    private Date createDate;\n\n    @UpdateTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;modify_date&quot;)\n    private Date modifyDate;\n\n    public BasicEntitySystemFeatures() {\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n\n    @Override\n    public boolean equals(Object o){\n        if(null == o)\n            return false;\n        if(!(o instanceof BasicEntitySystemFeatures))\n            return false;\n        BasicEntitySystemFeatures b = (BasicEntitySystemFeatures) o;\n        return b.getId().equals(this.getId());\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/e174J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e174J.png\" alt=\"Comparing the UI Result of both Entities\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/pjhc1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pjhc1.png\" alt=\"Screenshot of Vaadin UI Grid not clicked row\" /></a>\n<a href=\"https://i.stack.imgur.com/0MZ2z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0MZ2z.png\" alt=\"Screenshot of Vaadin UI Grid clicked row\" /></a></p>\n"},{"tags":["java","android","json","stringify"],"answers":[{"tags":[],"owner":{"account_id":1018150,"reputation":45383,"user_id":1029225,"display_name":"MH."},"comment_count":0,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1393528006,"creation_date":1393528006,"answer_id":22078038,"question_id":22077955,"body_markdown":"`JSON.stringify(JSONObject)` is a Javascript function and will not be available in Java. If you&#39;re using the `org.json.*` package built in the Android SDK, the equivalent would be to simply call `toString()` on your `JSONObject` instance, or the more human-friendly `toString(int)`.\r\n\r\nhttp://developer.android.com/reference/org/json/JSONObject.html#toString()\r\nhttp://developer.android.com/reference/org/json/JSONObject.html#toString(int)\r\n\r\n    JSONObject obj = ...\r\n    String jsonString = obj.toString(4);","title":"JSON.stringify in java - android","body":"<p><code>JSON.stringify(JSONObject)</code> is a Javascript function and will not be available in Java. If you're using the <code>org.json.*</code> package built in the Android SDK, the equivalent would be to simply call <code>toString()</code> on your <code>JSONObject</code> instance, or the more human-friendly <code>toString(int)</code>.</p>\n\n<p><a href=\"http://developer.android.com/reference/org/json/JSONObject.html#toString()\" rel=\"noreferrer\">http://developer.android.com/reference/org/json/JSONObject.html#toString()</a>\n<a href=\"http://developer.android.com/reference/org/json/JSONObject.html#toString(int)\" rel=\"noreferrer\">http://developer.android.com/reference/org/json/JSONObject.html#toString(int)</a></p>\n\n<pre><code>JSONObject obj = ...\nString jsonString = obj.toString(4);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3892970,"reputation":11166,"user_id":3222695,"display_name":"nikis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1393528142,"creation_date":1393528142,"answer_id":22078083,"question_id":22077955,"body_markdown":"Basic actions with JSON objects in JAVA can be done either with a help of `org.json` package (included in Android SDK) or `javax.json` (part of JAVA EE). Both of them have `toString()` method for conversion of JSONObject to string:\r\n\r\n    //assuming you have object `jsonobject` of class `JSONObject`\r\n    String output = jsonobject.toString()","title":"JSON.stringify in java - android","body":"<p>Basic actions with JSON objects in JAVA can be done either with a help of <code>org.json</code> package (included in Android SDK) or <code>javax.json</code> (part of JAVA EE). Both of them have <code>toString()</code> method for conversion of JSONObject to string:</p>\n\n<pre><code>//assuming you have object `jsonobject` of class `JSONObject`\nString output = jsonobject.toString()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2656801,"reputation":856,"user_id":2297333,"display_name":"f10orf12"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1597971623,"creation_date":1439837662,"answer_id":32057656,"question_id":22077955,"body_markdown":"I know this is old, but I ran into the same problem. And there doesn&#39;t seem to be much about it here... so I thought I would add what I learned.\r\n\r\nI used a third-party library to aid in the endeavor: `org.codehaus.jackson`\r\nAll of the downloads for this can be found [here][1].\r\n\r\nFor base JSON functionality, you need to add the following jars to your project&#39;s libraries:\r\n   [jackson-mapper-asl][2]\r\nand \r\n   [jackson-core-asl][3]\r\n\r\nChoose the version your project needs. (Typically you can go with the latest stable build).  \r\n\r\nOnce they are imported in to your project&#39;s libraries, add the following `import` lines to your code:\r\n\r\n     import org.codehaus.jackson.JsonGenerationException;\r\n     import org.codehaus.jackson.map.JsonMappingException;\r\n     import org.codehaus.jackson.map.ObjectMapper;\r\n\r\nWith the java object defined and assigned values that you wish to convert to JSON and return as part of a RESTful web service\r\n\r\n    User u = new User();\r\n     u.firstName = &quot;Sample&quot;;\r\n     u.lastName = &quot;User&quot;;\r\n     u.email = &quot;sampleU@example.com&quot;;\r\n\r\n\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\r\n\ttry {\r\n\t\t// convert user object to json string and return it \r\n\t\treturn mapper.writeValueAsString(u);\r\n\t}\r\n\r\n      // catch various errors\r\n      catch (JsonGenerationException e) {\r\n\t\te.printStackTrace();\r\n\t} \r\n      catch (JsonMappingException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n\r\nThe result should looks like this:\r\n`{&quot;firstName&quot;:&quot;Sample&quot;,&quot;lastName&quot;:&quot;User&quot;,&quot;email&quot;:&quot;sampleU@example.com&quot;}`\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.codehaus.jackson\r\n  [2]: http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-mapper-asl\r\n  [3]: http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl","title":"JSON.stringify in java - android","body":"<p>I know this is old, but I ran into the same problem. And there doesn't seem to be much about it here... so I thought I would add what I learned.</p>\n<p>I used a third-party library to aid in the endeavor: <code>org.codehaus.jackson</code>\nAll of the downloads for this can be found <a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>For base JSON functionality, you need to add the following jars to your project's libraries:\n<a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-mapper-asl\" rel=\"nofollow noreferrer\">jackson-mapper-asl</a>\nand\n<a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl\" rel=\"nofollow noreferrer\">jackson-core-asl</a></p>\n<p>Choose the version your project needs. (Typically you can go with the latest stable build).</p>\n<p>Once they are imported in to your project's libraries, add the following <code>import</code> lines to your code:</p>\n<pre><code> import org.codehaus.jackson.JsonGenerationException;\n import org.codehaus.jackson.map.JsonMappingException;\n import org.codehaus.jackson.map.ObjectMapper;\n</code></pre>\n<p>With the java object defined and assigned values that you wish to convert to JSON and return as part of a RESTful web service</p>\n<pre><code>User u = new User();\n u.firstName = &quot;Sample&quot;;\n u.lastName = &quot;User&quot;;\n u.email = &quot;sampleU@example.com&quot;;\n\nObjectMapper mapper = new ObjectMapper();\n    \ntry {\n    // convert user object to json string and return it \n    return mapper.writeValueAsString(u);\n}\n\n  // catch various errors\n  catch (JsonGenerationException e) {\n    e.printStackTrace();\n} \n  catch (JsonMappingException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>The result should looks like this:\n<code>{&quot;firstName&quot;:&quot;Sample&quot;,&quot;lastName&quot;:&quot;User&quot;,&quot;email&quot;:&quot;sampleU@example.com&quot;}</code></p>\n"},{"tags":[],"owner":{"account_id":12595173,"reputation":477,"user_id":9160102,"display_name":"Bruno L."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694163758,"creation_date":1694163758,"answer_id":77065539,"question_id":22077955,"body_markdown":"More simple to import **com.google.gson.Gson**, code sample: `String json =  new Gson().toJson(yourObject);`","title":"JSON.stringify in java - android","body":"<p>More simple to import <strong>com.google.gson.Gson</strong>, code sample: <code>String json =  new Gson().toJson(yourObject);</code></p>\n"}],"owner":{"account_id":3083092,"reputation":445,"user_id":2610890,"accept_rate":88,"display_name":"◊ë◊ï◊¢◊ñ ◊ô◊¢◊®◊ô"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154703,"favorite_count":0,"down_vote_count":1,"up_vote_count":31,"accepted_answer_id":22078038,"answer_count":4,"score":30,"last_activity_date":1694163758,"creation_date":1393527755,"question_id":22077955,"body_markdown":"Is there any way to perform a `JSON.stringify` in android?\r\n\r\nI keep seeing `JSON.stringify(JSONObject)` all around the web, but I cant find the JSON class in android.\r\n\r\n\r\nAny help?\r\n","title":"JSON.stringify in java - android","body":"<p>Is there any way to perform a <code>JSON.stringify</code> in android?</p>\n\n<p>I keep seeing <code>JSON.stringify(JSONObject)</code> all around the web, but I cant find the JSON class in android.</p>\n\n<p>Any help?</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"score":0,"creation_date":1694178825,"post_id":77065505,"comment_id":135861091,"body_markdown":"Are you using Hibernate? A while ago, I answered on a stackoverflow question and created a `ClientData` class that has an `_id` which is a String. The code can be found here: https://github.com/Lefeverw/stackoverflow-mongodb-query-example. You could try it out. If you have any questions or if it&#39;s not applicable to your situation, let me know.","body":"Are you using Hibernate? A while ago, I answered on a stackoverflow question and created a <code>ClientData</code> class that has an <code>_id</code> which is a String. The code can be found here: <a href=\"https://github.com/Lefeverw/stackoverflow-mongodb-query-example\" rel=\"nofollow noreferrer\">github.com/Lefeverw/stackoverflow-mongodb-query-example</a>. You could try it out. If you have any questions or if it&#39;s not applicable to your situation, let me know."},{"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"score":0,"creation_date":1694205013,"post_id":77065505,"comment_id":135865690,"body_markdown":"Can you share a bit more of your code or upload a minimal example? By default `_id` is an `ObjectId`, but it is not a strict requirement. Maybe something simple such as adding an annotation `@Id` on your entity could fix the issue.","body":"Can you share a bit more of your code or upload a minimal example? By default <code>_id</code> is an <code>ObjectId</code>, but it is not a strict requirement. Maybe something simple such as adding an annotation <code>@Id</code> on your entity could fix the issue."}],"owner":{"account_id":29204480,"reputation":33,"user_id":22373879,"display_name":"James Work account"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694163515,"creation_date":1694163515,"question_id":77065505,"body_markdown":"I am trying to get my mongoDB document&#39;s \\_id to be String instead of ObjectId. I have a model:\r\n\r\n```\r\npublic class Fruit {\r\n    String name;\r\n    String id;\r\n}\r\n// getter setter constructor\r\n```\r\n\r\nConnecting to the db:\r\n\r\n```\r\n\r\nCodecProvider pojoCodecProvider = PojoCodecProvider.builder().automatic(true).build();\r\nCodecRegistry pojoCodecRegistry = fromRegistries(getDefaultCodecRegistry(), fromProviders(pojoCodecProvider));\r\n\r\nMongoClient client = MongoClients.create(&quot;mongodb:....&quot;)\r\nMongoDatabase database = client.getDatabase(&quot;myDbName&quot;).withCodecRegistry(pojoCodecRegistry);\r\nMongoCollection&lt;Fruit&gt; collection = database.getCollection(&quot;Fruits&quot;, Fruit.class);\r\n\r\n// Inserting a document\r\nFruit newFruit = new Fruit(&quot;Apple&quot;);\r\ncollection.insertOne(newFruit);\r\n```\r\n\r\nWhen I look at the database now, the document&#39;s \\_id is an ObjectId instead of a String. I expected the \\_id to be String type when inserting into mongodb.\r\n\r\nI have tried this approach https://stackoverflow.com/questions/51888126/readstring-can-only-be-called-when-currentbsontype-is-string-not-when-currentbs\r\n\r\nWhere we decorate the `id` attribute with `@BsonProperty(&quot;_id&quot;)` but still the same result.","title":"Mongodb Java driver, make id a String instead of ObjectId","body":"<p>I am trying to get my mongoDB document's _id to be String instead of ObjectId. I have a model:</p>\n<pre><code>public class Fruit {\n    String name;\n    String id;\n}\n// getter setter constructor\n</code></pre>\n<p>Connecting to the db:</p>\n<pre><code>\nCodecProvider pojoCodecProvider = PojoCodecProvider.builder().automatic(true).build();\nCodecRegistry pojoCodecRegistry = fromRegistries(getDefaultCodecRegistry(), fromProviders(pojoCodecProvider));\n\nMongoClient client = MongoClients.create(&quot;mongodb:....&quot;)\nMongoDatabase database = client.getDatabase(&quot;myDbName&quot;).withCodecRegistry(pojoCodecRegistry);\nMongoCollection&lt;Fruit&gt; collection = database.getCollection(&quot;Fruits&quot;, Fruit.class);\n\n// Inserting a document\nFruit newFruit = new Fruit(&quot;Apple&quot;);\ncollection.insertOne(newFruit);\n</code></pre>\n<p>When I look at the database now, the document's _id is an ObjectId instead of a String. I expected the _id to be String type when inserting into mongodb.</p>\n<p>I have tried this approach <a href=\"https://stackoverflow.com/questions/51888126/readstring-can-only-be-called-when-currentbsontype-is-string-not-when-currentbs\">readString can only be called when CurrentBSONType is STRING, not when CurrentBSONType is OBJECT_ID</a></p>\n<p>Where we decorate the <code>id</code> attribute with <code>@BsonProperty(&quot;_id&quot;)</code> but still the same result.</p>\n"},{"tags":["java","tomcat","java-8","windows-subsystem-for-linux","tomcat9"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1596877786,"post_id":63312469,"comment_id":111956173,"body_markdown":"Try starting Tomcat from command line, it may indicate the problem. Ensure catalina.sh is on path (manually to tomcat/bin), set JAVA_HOME (set it manually) to the jdk installation root. Check java -version to ensure path setting for JDK to jdk/din directory. Start Tomcat cataline.sh run. This may indicate what the issue is, give it a shot.","body":"Try starting Tomcat from command line, it may indicate the problem. Ensure catalina.sh is on path (manually to tomcat/bin), set JAVA_HOME (set it manually) to the jdk installation root. Check java -version to ensure path setting for JDK to jdk/din directory. Start Tomcat cataline.sh run. This may indicate what the issue is, give it a shot."},{"owner":{"account_id":9905560,"reputation":651,"user_id":7334180,"accept_rate":75,"display_name":"Holinc"},"score":0,"creation_date":1596881379,"post_id":63312469,"comment_id":111957053,"body_markdown":"I think you should go to the tomcat install directory to start it.","body":"I think you should go to the tomcat install directory to start it."}],"answers":[{"comments":[{"owner":{"account_id":15240315,"reputation":63,"user_id":10996783,"display_name":"Vimuth"},"score":0,"creation_date":1627403439,"post_id":63669415,"comment_id":121145209,"body_markdown":"Wow thanks! worked exactly as specified. \nOne thing to note to others who may stumble upon here, guides usually say to open up 127.0.0.1:8080 to see tomcat running. For me, this didnt work but it was served instead on localhost:8080 which led me to find out that there indeed is a difference :&quot;)","body":"Wow thanks! worked exactly as specified.  One thing to note to others who may stumble upon here, guides usually say to open up 127.0.0.1:8080 to see tomcat running. For me, this didnt work but it was served instead on localhost:8080 which led me to find out that there indeed is a difference :&quot;)"}],"tags":[],"owner":{"account_id":1408759,"reputation":11681,"user_id":1335801,"accept_rate":50,"display_name":"QuickFix"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1598871100,"creation_date":1598871100,"answer_id":63669415,"question_id":63312469,"body_markdown":"It seems the tomcat9 package is broken.\r\n\r\nTo use tomcat9 on your WSL you may either : \r\n\r\n - download tomcat9 and install it by yourself\r\n - try to repair the broken install\r\n\r\nHere is what I did to repair the install on my computer :\r\n\r\n - Download a zip version of tomcat 9 from https://tomcat.apache.org/download-90.cgi\r\n - in windows explorer open the folder \\\\wsl$\\Ubuntu\\usr\\share\\tomcat9\r\n - In order to repair tomcat I copied all the missing folders from the zip to the wsl installation : conf, webapps and work\r\n - I also had to create the folder for the logs /usr/share/tomcat9/logs (you can either create it from linux shell or from windows explorer in \\\\wsl$\\Ubuntu)\r\n - Then I could start tomcat with `sudo /usr/share/tomcat9/bin/startup.sh` and get the logs in /usr/share/tomcat9/logs/catalina.out","title":"installing tomcat 9 on WSL","body":"<p>It seems the tomcat9 package is broken.</p>\n<p>To use tomcat9 on your WSL you may either :</p>\n<ul>\n<li>download tomcat9 and install it by yourself</li>\n<li>try to repair the broken install</li>\n</ul>\n<p>Here is what I did to repair the install on my computer :</p>\n<ul>\n<li>Download a zip version of tomcat 9 from <a href=\"https://tomcat.apache.org/download-90.cgi\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/download-90.cgi</a></li>\n<li>in windows explorer open the folder \\wsl$\\Ubuntu\\usr\\share\\tomcat9</li>\n<li>In order to repair tomcat I copied all the missing folders from the zip to the wsl installation : conf, webapps and work</li>\n<li>I also had to create the folder for the logs /usr/share/tomcat9/logs (you can either create it from linux shell or from windows explorer in \\wsl$\\Ubuntu)</li>\n<li>Then I could start tomcat with <code>sudo /usr/share/tomcat9/bin/startup.sh</code> and get the logs in /usr/share/tomcat9/logs/catalina.out</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2518783,"reputation":1531,"user_id":2189544,"display_name":"fuweichin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635469505,"creation_date":1635469505,"answer_id":69762509,"question_id":63312469,"body_markdown":"I solved the problem by following steps:\r\n\r\n1. enable systemd, see [WSL 2 - Enabling systemd](https://gist.github.com/djfdyuruiry/6720faa3f9fc59bfdf6284ee1f41f950)\r\n2. restart WSL Ubuntu, with cmd `wsl --shutdown` and `wsl -d Ubuntu genie -s`\r\n3. reinstall tomcat9, with shell `apt-get remove tomcat9` and `apt-get install tomcat9`\r\n\r\nthen type `service tomcat9 status`, see how things work in your machine.","title":"installing tomcat 9 on WSL","body":"<p>I solved the problem by following steps:</p>\n<ol>\n<li>enable systemd, see <a href=\"https://gist.github.com/djfdyuruiry/6720faa3f9fc59bfdf6284ee1f41f950\" rel=\"nofollow noreferrer\">WSL 2 - Enabling systemd</a></li>\n<li>restart WSL Ubuntu, with cmd <code>wsl --shutdown</code> and <code>wsl -d Ubuntu genie -s</code></li>\n<li>reinstall tomcat9, with shell <code>apt-get remove tomcat9</code> and <code>apt-get install tomcat9</code></li>\n</ol>\n<p>then type <code>service tomcat9 status</code>, see how things work in your machine.</p>\n"},{"tags":[],"owner":{"account_id":2546577,"reputation":1933,"user_id":2211268,"display_name":"Eamonn Kenny"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694162547,"creation_date":1694162547,"answer_id":77065401,"question_id":63312469,"body_markdown":"shockingly, there is no `service tomcat9 status` on my machine after install the tomcat9-admin. But if I created /usr/share/tomcat9/log directory using sudo, I could then start tomcat9 using /usr/share/tomcat9/bin/startup.sh. I also had to run before this an unmask command:\r\n\r\n    sudo apt install systemctl\r\n    sudo systemctl unmask tomcat9\r\n    sudo mkdir /usr/share/tomcat9/log\r\n    sudo /usr/share/tomcat9/bin/startup.sh\r\n\r\nthis is still highly irregular. I think it might be to do with how WSL is handling ports because mariadb and apache2 don&#39;t suffer from the same issues (out of the box).","title":"installing tomcat 9 on WSL","body":"<p>shockingly, there is no <code>service tomcat9 status</code> on my machine after install the tomcat9-admin. But if I created /usr/share/tomcat9/log directory using sudo, I could then start tomcat9 using /usr/share/tomcat9/bin/startup.sh. I also had to run before this an unmask command:</p>\n<pre><code>sudo apt install systemctl\nsudo systemctl unmask tomcat9\nsudo mkdir /usr/share/tomcat9/log\nsudo /usr/share/tomcat9/bin/startup.sh\n</code></pre>\n<p>this is still highly irregular. I think it might be to do with how WSL is handling ports because mariadb and apache2 don't suffer from the same issues (out of the box).</p>\n"}],"owner":{"account_id":12887080,"reputation":47,"user_id":9320175,"display_name":"cornandme"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9563,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":63669415,"answer_count":3,"score":2,"last_activity_date":1694162547,"creation_date":1596867979,"question_id":63312469,"body_markdown":"After installing tomcat 9 on WSL, it isn&#39;t recognized by system.\r\n\r\nSince systemctl command doesn&#39;t work on WSL, I used below command:\r\n\r\n    sudo service tomcat9 start\r\n\r\nreturning \r\n\r\n    tomcat9: unrecognized service\r\n\r\n\r\nI followed 2 ways to install, but the same problem occurred.\r\n\r\nReferences are:\r\n\r\nhttps://www.digitalocean.com/community/tutorials/install-tomcat-9-ubuntu-1804\r\n\r\nhttps://linuxconfig.org/ubuntu-20-04-tomcat-installation\r\n\r\n\r\n\r\nIs there any clue for this problem?\r\n\r\n\r\nHere is my environment:\r\n\r\nwindows 10 version 2004\r\n\r\nubuntu 20.04 (WSL)\r\n\r\nopenjdk version: &quot;1.8.0_265&quot;\r\n\r\n\r\n**update:**\r\n\r\nI did same process on gcp vm instance on which ubuntu 20.04 is installed to investigate the problem, and found the process has no problem on ubuntu 20.04, not on WSL.\r\n\r\nSo I assume that this problem is derived from WSL.\r\n\r\nLogging all my process expecting someone to find a solution to install tomcat 9 on WSL-ubuntu.\r\n\r\n**java install**\r\n\r\n    sudo apt update\r\n    sudo apt install openjdk-8-jdk\r\n\r\nset JAVA_HOME in /etc/environment\r\n   \r\n\r\n    JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre/bin&quot;\r\n\r\n    source /etc/environment\r\n\r\n**tomcat 9 install**\r\n\r\n    sudo apt install tomcat9 tomcat9-admin\r\n\r\ncheck whether port 8080 is open (positive)\r\n\r\n    ss -ltn\r\n\r\ncheck whether service command works (positive)\r\n\r\n    sudo service tomcat9 stop\r\n    sudo service tomcat9 start","title":"installing tomcat 9 on WSL","body":"<p>After installing tomcat 9 on WSL, it isn't recognized by system.</p>\n<p>Since systemctl command doesn't work on WSL, I used below command:</p>\n<pre><code>sudo service tomcat9 start\n</code></pre>\n<p>returning</p>\n<pre><code>tomcat9: unrecognized service\n</code></pre>\n<p>I followed 2 ways to install, but the same problem occurred.</p>\n<p>References are:</p>\n<p><a href=\"https://www.digitalocean.com/community/tutorials/install-tomcat-9-ubuntu-1804\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/install-tomcat-9-ubuntu-1804</a></p>\n<p><a href=\"https://linuxconfig.org/ubuntu-20-04-tomcat-installation\" rel=\"nofollow noreferrer\">https://linuxconfig.org/ubuntu-20-04-tomcat-installation</a></p>\n<p>Is there any clue for this problem?</p>\n<p>Here is my environment:</p>\n<p>windows 10 version 2004</p>\n<p>ubuntu 20.04 (WSL)</p>\n<p>openjdk version: &quot;1.8.0_265&quot;</p>\n<p><strong>update:</strong></p>\n<p>I did same process on gcp vm instance on which ubuntu 20.04 is installed to investigate the problem, and found the process has no problem on ubuntu 20.04, not on WSL.</p>\n<p>So I assume that this problem is derived from WSL.</p>\n<p>Logging all my process expecting someone to find a solution to install tomcat 9 on WSL-ubuntu.</p>\n<p><strong>java install</strong></p>\n<pre><code>sudo apt update\nsudo apt install openjdk-8-jdk\n</code></pre>\n<p>set JAVA_HOME in /etc/environment</p>\n<pre><code>JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre/bin&quot;\n\nsource /etc/environment\n</code></pre>\n<p><strong>tomcat 9 install</strong></p>\n<pre><code>sudo apt install tomcat9 tomcat9-admin\n</code></pre>\n<p>check whether port 8080 is open (positive)</p>\n<pre><code>ss -ltn\n</code></pre>\n<p>check whether service command works (positive)</p>\n<pre><code>sudo service tomcat9 stop\nsudo service tomcat9 start\n</code></pre>\n"},{"tags":["java","spring","session","spring-security","timeout"],"answers":[{"tags":[],"owner":{"account_id":5294278,"reputation":53,"user_id":4225838,"display_name":"–ê—Ä—Å–µ–Ω–∏–π –ü–ª–∞–∫—Å–∏–Ω"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659455687,"creation_date":1659455687,"answer_id":73210432,"question_id":73177094,"body_markdown":"Found a solution. Spring security is unable to solve it, I used JavaScript. This solution sends request every minute and if response data is not null, redirect occurs. It works only with one logged in user in browser.\r\n\r\nHeader html page\r\n\r\n    &lt;script&gt;\r\n                setInterval(function() {\r\n                    $.ajax({\r\n                        url: &quot;/check-session&quot;,\r\n                        method: &quot;GET&quot;,\r\n                        contentType: &#39;application/json; charset=utf-8&#39;,\r\n                        success: function(data){\r\n                            if (data &amp;&amp; data.length &gt; 0) {\r\n                                window.location.replace(&quot;/login&quot;);\r\n                            }\r\n                        },\r\n                        error: function (data) {\r\n                            console.log(&quot;error&quot;);\r\n                            console.log(data);\r\n                        }\r\n                    })\r\n                }, 60000);\r\n        &lt;/script&gt;\r\n\r\nLoginController\r\n\r\n    @GetMapping(&quot;/check-session&quot;)\r\n    public ResponseEntity&lt;String&gt; checkSession() {\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n    }","title":"Spring security auto redirect to login page after session timeout","body":"<p>Found a solution. Spring security is unable to solve it, I used JavaScript. This solution sends request every minute and if response data is not null, redirect occurs. It works only with one logged in user in browser.</p>\n<p>Header html page</p>\n<pre><code>&lt;script&gt;\n            setInterval(function() {\n                $.ajax({\n                    url: &quot;/check-session&quot;,\n                    method: &quot;GET&quot;,\n                    contentType: 'application/json; charset=utf-8',\n                    success: function(data){\n                        if (data &amp;&amp; data.length &gt; 0) {\n                            window.location.replace(&quot;/login&quot;);\n                        }\n                    },\n                    error: function (data) {\n                        console.log(&quot;error&quot;);\n                        console.log(data);\n                    }\n                })\n            }, 60000);\n    &lt;/script&gt;\n</code></pre>\n<p>LoginController</p>\n<pre><code>@GetMapping(&quot;/check-session&quot;)\npublic ResponseEntity&lt;String&gt; checkSession() {\n    return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24523409,"reputation":21,"user_id":18436126,"display_name":"Anton Wijaya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694161572,"creation_date":1694161572,"answer_id":77065307,"question_id":73177094,"body_markdown":"thanks, I tried to implement this js, if i set interval lower than my session timeout, it results in my session never expires. In my case my session timeout might vary, so I need to set a variable value for interval\r\n\r\n```\r\n&lt;script th:inline=&quot;javascript&quot;&gt;\r\n   var sessionExpiresIn = [[${sessionExpiresIn}]];\r\n   if (sessionExpiresIn === null || sessionExpiresIn === undefined) {\r\n       sessionExpiresIn = 1799; // Default value\r\n   } else {\r\n       sessionExpiresIn = parseInt(sessionExpiresIn) + 1;\r\n    }\r\n&lt;/script&gt;\r\n```\r\nIf I didnt set default value it will results in infinite loop of check-session api calls\r\n","title":"Spring security auto redirect to login page after session timeout","body":"<p>thanks, I tried to implement this js, if i set interval lower than my session timeout, it results in my session never expires. In my case my session timeout might vary, so I need to set a variable value for interval</p>\n<pre><code>&lt;script th:inline=&quot;javascript&quot;&gt;\n   var sessionExpiresIn = [[${sessionExpiresIn}]];\n   if (sessionExpiresIn === null || sessionExpiresIn === undefined) {\n       sessionExpiresIn = 1799; // Default value\n   } else {\n       sessionExpiresIn = parseInt(sessionExpiresIn) + 1;\n    }\n&lt;/script&gt;\n</code></pre>\n<p>If I didnt set default value it will results in infinite loop of check-session api calls</p>\n"}],"owner":{"account_id":5294278,"reputation":53,"user_id":4225838,"display_name":"–ê—Ä—Å–µ–Ω–∏–π –ü–ª–∞–∫—Å–∏–Ω"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3544,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73210432,"answer_count":2,"score":2,"last_activity_date":1694161572,"creation_date":1659196664,"question_id":73177094,"body_markdown":"I need to redirect automatically to login page after session timeout or at least show alert that session is expired, I tried to configure Spring Security, but it is not working ,debugger don&#39;t catch code in LogoutSuccessHandlerService after timeout. Maybe I missed something or this approach with Spring Security is wrong from the start? \r\nIf it is so, can somebody provide full working example of such task? I am using Spring Boot 2.5.6, Spring Security, front-end is html, javascript, JQuery and dataTable.\r\nHere is my code:\r\n\r\nSecurityConfig.java\r\n\r\n    private final AppProperties appProperties;\r\n\r\n    @Autowired\r\n    private LogoutSuccessHandlerService logoutSuccessHandlerService;\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) {\r\n        web.ignoring()\r\n                .antMatchers(&quot;/static/**&quot;)\r\n                .antMatchers(&quot;/webjars/**&quot;)\r\n                .antMatchers(&quot;/css/**&quot;)\r\n                .antMatchers(&quot;/fonts/**&quot;)\r\n                .antMatchers(&quot;/img/**&quot;)\r\n                .antMatchers(&quot;/js/**&quot;)\r\n                .antMatchers(&quot;/scripts/**&quot;)\r\n        ;\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .formLogin()\r\n                .loginPage(&quot;/login&quot;)\r\n                .permitAll()\r\n                .defaultSuccessUrl(&quot;/&quot;, true)\r\n                .failureUrl(&quot;/login?error=true&quot;)\r\n                .loginProcessingUrl(&quot;/j_spring_security_check&quot;)\r\n                .and()\r\n                .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .logout()\r\n                .invalidateHttpSession(true)\r\n                .logoutSuccessHandler(logoutSuccessHandlerService)\r\n                .logoutSuccessUrl(&quot;/login&quot;)\r\n                .permitAll()\r\n                .and()\r\n                .csrf().disable();\r\n    }\r\n\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        AppProperties.Security security = appProperties.getSecurity();\r\n\r\n        auth.inMemoryAuthentication()\r\n                .withUser(security.getUser())\r\n                .password(passwordEncoder().encode(security.getPassword()))\r\n                .roles(security.getRole());\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\nLogoutSuccessHandlerService.java extends SimpleUrlLogoutSuccessHandler\r\n\r\n    @Override\r\n    public void onLogoutSuccess(HttpServletRequest request,\r\n                                HttpServletResponse response,\r\n                                Authentication authentication) throws IOException, ServletException {\r\n        if (authentication != null) {\r\n\r\n        }\r\n        log.info(&quot;logout success&quot;);\r\n        setDefaultTargetUrl(&quot;/login&quot;);\r\n        \r\n        super.onLogoutSuccess(request, response, authentication);\r\n    }\r\napplication-local.yml\r\n\r\nserver:\r\n  port: 8086\r\n  servlet:\r\n    session:\r\n      timeout: 2m\r\n\r\n\r\n\r\n","title":"Spring security auto redirect to login page after session timeout","body":"<p>I need to redirect automatically to login page after session timeout or at least show alert that session is expired, I tried to configure Spring Security, but it is not working ,debugger don't catch code in LogoutSuccessHandlerService after timeout. Maybe I missed something or this approach with Spring Security is wrong from the start?\nIf it is so, can somebody provide full working example of such task? I am using Spring Boot 2.5.6, Spring Security, front-end is html, javascript, JQuery and dataTable.\nHere is my code:</p>\n<p>SecurityConfig.java</p>\n<pre><code>private final AppProperties appProperties;\n\n@Autowired\nprivate LogoutSuccessHandlerService logoutSuccessHandlerService;\n\n@Override\npublic void configure(WebSecurity web) {\n    web.ignoring()\n            .antMatchers(&quot;/static/**&quot;)\n            .antMatchers(&quot;/webjars/**&quot;)\n            .antMatchers(&quot;/css/**&quot;)\n            .antMatchers(&quot;/fonts/**&quot;)\n            .antMatchers(&quot;/img/**&quot;)\n            .antMatchers(&quot;/js/**&quot;)\n            .antMatchers(&quot;/scripts/**&quot;)\n    ;\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .formLogin()\n            .loginPage(&quot;/login&quot;)\n            .permitAll()\n            .defaultSuccessUrl(&quot;/&quot;, true)\n            .failureUrl(&quot;/login?error=true&quot;)\n            .loginProcessingUrl(&quot;/j_spring_security_check&quot;)\n            .and()\n            .authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n            .logout()\n            .invalidateHttpSession(true)\n            .logoutSuccessHandler(logoutSuccessHandlerService)\n            .logoutSuccessUrl(&quot;/login&quot;)\n            .permitAll()\n            .and()\n            .csrf().disable();\n}\n\n\n@Override\npublic void configure(AuthenticationManagerBuilder auth) throws Exception {\n    AppProperties.Security security = appProperties.getSecurity();\n\n    auth.inMemoryAuthentication()\n            .withUser(security.getUser())\n            .password(passwordEncoder().encode(security.getPassword()))\n            .roles(security.getRole());\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>LogoutSuccessHandlerService.java extends SimpleUrlLogoutSuccessHandler</p>\n<pre><code>@Override\npublic void onLogoutSuccess(HttpServletRequest request,\n                            HttpServletResponse response,\n                            Authentication authentication) throws IOException, ServletException {\n    if (authentication != null) {\n\n    }\n    log.info(&quot;logout success&quot;);\n    setDefaultTargetUrl(&quot;/login&quot;);\n    \n    super.onLogoutSuccess(request, response, authentication);\n}\n</code></pre>\n<p>application-local.yml</p>\n<p>server:\nport: 8086\nservlet:\nsession:\ntimeout: 2m</p>\n"},{"tags":["java","decimal","bigdecimal"],"answers":[{"comments":[{"owner":{"account_id":981663,"reputation":17502,"user_id":1001224,"accept_rate":82,"display_name":"lolo"},"score":3,"creation_date":1606920694,"post_id":1316955,"comment_id":115109598,"body_markdown":"u changed the data type","body":"u changed the data type"}],"tags":[],"owner":{"account_id":22779,"reputation":129011,"user_id":56541,"accept_rate":81,"display_name":"David Z"},"comment_count":1,"down_vote_count":1,"up_vote_count":51,"is_accepted":true,"score":50,"last_activity_date":1250972536,"creation_date":1250972536,"answer_id":1316955,"question_id":1316945,"body_markdown":"Try `number.toBigInteger().toString()`","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>Try <code>number.toBigInteger().toString()</code></p>\n"},{"comments":[{"owner":{"account_id":9273909,"reputation":3750,"user_id":6887084,"display_name":"ScanQR"},"score":0,"creation_date":1615363649,"post_id":1317093,"comment_id":117664639,"body_markdown":"This is the most appropriate answer as it does not change the data type","body":"This is the most appropriate answer as it does not change the data type"},{"owner":{"account_id":1670879,"reputation":1569,"user_id":1537370,"accept_rate":79,"display_name":"Damo"},"score":0,"creation_date":1645700089,"post_id":1317093,"comment_id":125943855,"body_markdown":"For me, this still leaves the decimal place and trailing numbers","body":"For me, this still leaves the decimal place and trailing numbers"}],"tags":[],"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"comment_count":2,"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1250976877,"creation_date":1250976877,"answer_id":1317093,"question_id":1316945,"body_markdown":"Use this.\r\n\r\n    BigDecimal truncated= number.setScale(0,BigDecimal.ROUND_DOWN);","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>Use this.</p>\n\n<pre><code>BigDecimal truncated= number.setScale(0,BigDecimal.ROUND_DOWN);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1250977583,"creation_date":1250977583,"answer_id":1317121,"question_id":1316945,"body_markdown":"BigDecimal without fractions is BigInteger. Why don&#39;t you just use BigInteger?\r\n","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>BigDecimal without fractions is BigInteger. Why don't you just use BigInteger?</p>\n"},{"tags":[],"owner":{"account_id":1991221,"reputation":1,"user_id":1785199,"display_name":"Vinayak Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366979672,"creation_date":1351591592,"answer_id":13136669,"question_id":1316945,"body_markdown":"    private void showDoubleNo(double n) {\r\n        double num = n; \r\n        int decimalPlace = 2; \r\n        BigDecimal bd = new BigDecimal(num); \r\n        bd = bd.setScale(decimalPlace,BigDecimal.ROUND_UP); \r\n        System.out.println(&quot;Point is &quot;+bd); \r\n    }","title":"Java BigDecimal remove decimal and trailing numbers","body":"<pre><code>private void showDoubleNo(double n) {\n    double num = n; \n    int decimalPlace = 2; \n    BigDecimal bd = new BigDecimal(num); \n    bd = bd.setScale(decimalPlace,BigDecimal.ROUND_UP); \n    System.out.println(\"Point is \"+bd); \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6586021,"reputation":564,"user_id":5088764,"display_name":"sbernard"},"score":0,"creation_date":1664381505,"post_id":32428320,"comment_id":130460334,"body_markdown":"`num = num.setScale(2,BigDecimal.ROUND_UP);`\nYou mean : `num = num.setScale(0,BigDecimal.ROUND_UP);`","body":"<code>num = num.setScale(2,BigDecimal.ROUND_UP);</code> You mean : <code>num = num.setScale(0,BigDecimal.ROUND_UP);</code>"}],"tags":[],"owner":{"account_id":5453782,"reputation":71,"user_id":4337849,"display_name":"Flavio H. Furlanetto"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1441573643,"creation_date":1441573643,"answer_id":32428320,"question_id":1316945,"body_markdown":"Here&#39;s the most elegant way I found to resolve this:\r\n\r\n    public static String convertDecimalToString (BigDecimal num){\r\n        String ret = null;\r\n        try {\r\n            ret = num.toBigIntegerExact().toString();\r\n        } catch (ArithmeticException e){\r\n            num = num.setScale(2,BigDecimal.ROUND_UP); \r\n            ret = num.toPlainString();\r\n        }\r\n        return ret;\r\n    }","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>Here's the most elegant way I found to resolve this:</p>\n\n<pre><code>public static String convertDecimalToString (BigDecimal num){\n    String ret = null;\n    try {\n        ret = num.toBigIntegerExact().toString();\n    } catch (ArithmeticException e){\n        num = num.setScale(2,BigDecimal.ROUND_UP); \n        ret = num.toPlainString();\n    }\n    return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9712794,"reputation":849,"user_id":7204083,"display_name":"puneetShanbhag"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479977145,"creation_date":1479976608,"answer_id":40781421,"question_id":1316945,"body_markdown":"    public static String convertBigDecimalToString(BigDecimal bg) {\r\n\t      System.out.println(&quot;Big Decimal Value before its convertion :&quot; + bg.setScale(2, BigDecimal.ROUND_HALF_UP));\r\n\r\n\t      String bigDecStringValue = bg.setScale(0,BigDecimal.ROUND_HALF_UP).toPlainString();\r\n\r\n\t      System.out.println(&quot;Big Decimal String Value after removing Decimal places is :&quot; + bigDecStringValue);\r\n\r\n\t      return bigDecStringValue;\r\n    }\r\n\r\nPlease note : I have used &#39;BigDecimal.ROUND_HALF_UP&#39; , just to make sure, Rounding mode to round towards &quot;nearest neighbor&quot; unless both neighbors are equidistant","title":"Java BigDecimal remove decimal and trailing numbers","body":"<pre><code>public static String convertBigDecimalToString(BigDecimal bg) {\n      System.out.println(\"Big Decimal Value before its convertion :\" + bg.setScale(2, BigDecimal.ROUND_HALF_UP));\n\n      String bigDecStringValue = bg.setScale(0,BigDecimal.ROUND_HALF_UP).toPlainString();\n\n      System.out.println(\"Big Decimal String Value after removing Decimal places is :\" + bigDecStringValue);\n\n      return bigDecStringValue;\n}\n</code></pre>\n\n<p>Please note : I have used 'BigDecimal.ROUND_HALF_UP' , just to make sure, Rounding mode to round towards \"nearest neighbor\" unless both neighbors are equidistant</p>\n"},{"tags":[],"owner":{"account_id":18126074,"reputation":51,"user_id":13181599,"display_name":"Mahammad Yusifov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694161402,"creation_date":1694161402,"answer_id":77065287,"question_id":1316945,"body_markdown":"\r\nThis worked for me:\r\n\r\n````\r\nnumber.toPlainString();\r\n````","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>This worked for me:</p>\n<pre><code>number.toPlainString();\n</code></pre>\n"}],"owner":{"account_id":16053,"reputation":1866,"user_id":34571,"accept_rate":100,"display_name":"Zero Cool"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79676,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":1316955,"answer_count":7,"score":23,"last_activity_date":1694161402,"creation_date":1250972380,"question_id":1316945,"body_markdown":"I&#39;m new to Java and trying to take a BigDecimal (for example 99999999.99) and convert it to a string but without the decimal place and trailing numbers. Also, I don&#39;t want commas in the number and rounding is not needed.\r\n\r\nI&#39;ve tried:\r\n\r\n    Math.Truncate(number)\r\n\r\nbut BigDecimal is not supported.\r\n\r\nAny ideas?\r\n\r\nThanks very much.","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>I'm new to Java and trying to take a BigDecimal (for example 99999999.99) and convert it to a string but without the decimal place and trailing numbers. Also, I don't want commas in the number and rounding is not needed.</p>\n\n<p>I've tried:</p>\n\n<pre><code>Math.Truncate(number)\n</code></pre>\n\n<p>but BigDecimal is not supported.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks very much.</p>\n"},{"tags":["java","arrays","tostring"],"comments":[{"owner":{"account_id":13036707,"reputation":21,"user_id":9421376,"display_name":"Cocopapoo"},"score":0,"creation_date":1693372266,"post_id":77005117,"comment_id":135750197,"body_markdown":"-&gt;[100, 70, 90, 0, 0]\n-------------------------\nI want:\n-&gt;[100, 70, 90]","body":"-&gt;[100, 70, 90, 0, 0] ------------------------- I want: -&gt;[100, 70, 90]"}],"answers":[{"tags":[],"owner":{"account_id":13036707,"reputation":21,"user_id":9421376,"display_name":"Cocopapoo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694160074,"creation_date":1693378630,"answer_id":77005593,"question_id":77005117,"body_markdown":"Problem Solved!!\r\n\r\n```\r\npublic class ArrayStream4 {\r\n    public static void main(String[] args) {\r\n        int[] scores = {100, 50, 40, 70, 90};\r\n        int total = 0;\r\n        int max = scores[0];\r\n        int min = scores[0];\r\n        int passCount = 0;\r\n        List&lt;Integer&gt; newPassList = new ArrayList&lt;&gt;();\r\n\r\n        for (int score : scores) {\r\n            total += score;\r\n\r\n            if (score &gt; max) {\r\n                max = score;\r\n            }\r\n            if (score &lt; min) {\r\n                min = score;\r\n            }\r\n            if (score &gt;= 60) {\r\n                newPassList.add(score);\r\n                passCount++;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;PassGrade: &quot; + newPassList);\r\n        System.out.printf(&quot;SumGrade: %d\\n&quot;, total);\r\n        System.out.printf(&quot;MINGrade: %d\\n&quot;, min);\r\n        System.out.printf(&quot;MAXGrade: %d\\n&quot;, max);\r\n        System.out.printf(&quot;PassCount: %d\\n&quot;, passCount);\r\n    }\r\n}\r\n```","title":"How can I print out newPassArray[i] as String in few lines in Java by NOT USING Stream?","body":"<p>Problem Solved!!</p>\n<pre><code>public class ArrayStream4 {\n    public static void main(String[] args) {\n        int[] scores = {100, 50, 40, 70, 90};\n        int total = 0;\n        int max = scores[0];\n        int min = scores[0];\n        int passCount = 0;\n        List&lt;Integer&gt; newPassList = new ArrayList&lt;&gt;();\n\n        for (int score : scores) {\n            total += score;\n\n            if (score &gt; max) {\n                max = score;\n            }\n            if (score &lt; min) {\n                min = score;\n            }\n            if (score &gt;= 60) {\n                newPassList.add(score);\n                passCount++;\n            }\n        }\n\n        System.out.println(&quot;PassGrade: &quot; + newPassList);\n        System.out.printf(&quot;SumGrade: %d\\n&quot;, total);\n        System.out.printf(&quot;MINGrade: %d\\n&quot;, min);\n        System.out.printf(&quot;MAXGrade: %d\\n&quot;, max);\n        System.out.printf(&quot;PassCount: %d\\n&quot;, passCount);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20487973,"reputation":21,"user_id":15034661,"display_name":"libing"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693395865,"creation_date":1693395865,"answer_id":77007673,"question_id":77005117,"body_markdown":"Copy a new array and print.\r\n\r\n    System.out.println(&quot;PASS grade: &quot; + Arrays.toString(Arrays.copyOf(newPassArray, passingIndex)));","title":"How can I print out newPassArray[i] as String in few lines in Java by NOT USING Stream?","body":"<p>Copy a new array and print.</p>\n<pre><code>System.out.println(&quot;PASS grade: &quot; + Arrays.toString(Arrays.copyOf(newPassArray, passingIndex)));\n</code></pre>\n"}],"owner":{"account_id":13036707,"reputation":21,"user_id":9421376,"display_name":"Cocopapoo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694160074,"creation_date":1693372143,"question_id":77005117,"body_markdown":"Dear people who can solve this question, I truly appreciate your kindness!\r\nI am a new programming learner(less than 1 year)\r\n\r\nI try to use toSting() but it will print out the empty index too, how can i get rid off those empty index and just show the scores I want by NOT using Stream\r\nHere&#39;s my code:\r\n```\r\npublic class ArrayStream4 {\r\n    public static void main(String[] args) {\r\n        int [] scores = {100, 50, 40, 70, 90};\r\n        // Question: Please calculate the following: How many individuals have achieved a &quot;passing&quot; grade(i&gt;=60) and print out the grade? The total score? The average? The highest score? The lowest score?\r\n        \r\n        int total = 0; \r\n        int max = scores[0];\r\n        int min = scores[0];\r\n        int passCount = 0;\r\n        int [] newPassArray = new int[scores.length];\r\n        int passingIndex = 0;\r\n\r\n\r\n        for(int score : scores){\r\n            total += score;\r\n            \r\n            if(score &gt; max){\r\n                max = score;\r\n            }\r\n            if (score &lt; min){\r\n                min = score;\r\n            }\r\n            if(score &gt;= 60){\r\n                passCount ++;\r\n                newPassArray[passingIndex] = score;\r\n                passingIndex ++;\r\n            }\r\n        }\r\n            for (int i = 0; i &lt; passingIndex; i++) {\r\n                System.out.print(newPassArray[i]);\r\n                \r\n            }\r\n            System.out.println();\r\n            System.out.println(&quot;PASS grade: &quot; + Arrays.toString(newPassArray));\r\n            System.out.printf(&quot;Total grade: %d\\n&quot;, total);\r\n            System.out.printf(&quot;Min grade: %d\\n&quot;, min);\r\n            System.out.printf(&quot;Max grade: %d\\n&quot;, max);\r\n            System.out.printf(&quot;PASSCount: %d\\n&quot;, passCount);\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","title":"How can I print out newPassArray[i] as String in few lines in Java by NOT USING Stream?","body":"<p>Dear people who can solve this question, I truly appreciate your kindness!\nI am a new programming learner(less than 1 year)</p>\n<p>I try to use toSting() but it will print out the empty index too, how can i get rid off those empty index and just show the scores I want by NOT using Stream\nHere's my code:</p>\n<pre><code>public class ArrayStream4 {\n    public static void main(String[] args) {\n        int [] scores = {100, 50, 40, 70, 90};\n        // Question: Please calculate the following: How many individuals have achieved a &quot;passing&quot; grade(i&gt;=60) and print out the grade? The total score? The average? The highest score? The lowest score?\n        \n        int total = 0; \n        int max = scores[0];\n        int min = scores[0];\n        int passCount = 0;\n        int [] newPassArray = new int[scores.length];\n        int passingIndex = 0;\n\n\n        for(int score : scores){\n            total += score;\n            \n            if(score &gt; max){\n                max = score;\n            }\n            if (score &lt; min){\n                min = score;\n            }\n            if(score &gt;= 60){\n                passCount ++;\n                newPassArray[passingIndex] = score;\n                passingIndex ++;\n            }\n        }\n            for (int i = 0; i &lt; passingIndex; i++) {\n                System.out.print(newPassArray[i]);\n                \n            }\n            System.out.println();\n            System.out.println(&quot;PASS grade: &quot; + Arrays.toString(newPassArray));\n            System.out.printf(&quot;Total grade: %d\\n&quot;, total);\n            System.out.printf(&quot;Min grade: %d\\n&quot;, min);\n            System.out.printf(&quot;Max grade: %d\\n&quot;, max);\n            System.out.printf(&quot;PASSCount: %d\\n&quot;, passCount);\n\n    }\n}\n\n</code></pre>\n"},{"tags":["java","jackson","line-breaks"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1686130728,"post_id":76421001,"comment_id":134755791,"body_markdown":"Does this answer your question? [Json object contains new line character converted to &quot;\\n&quot; while converting json object to string or byte](https://stackoverflow.com/questions/29771911/json-object-contains-new-line-character-converted-to-n-while-converting-json)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/29771911/json-object-contains-new-line-character-converted-to-n-while-converting-json\">Json object contains new line character converted to &quot;\\n&quot; while converting json object to string or byte</a>"}],"owner":{"account_id":28770591,"reputation":1,"user_id":22034436,"display_name":"mert Div"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694159990,"creation_date":1686124000,"question_id":76421001,"body_markdown":"Body: I&#39;m using Jackson to serialize Java objects to JSON strings. However, I don&#39;t want Jackson to escape line breaks in the JSON strings. How can I configure Jackson to not handle line breaks?\r\n\r\nHere&#39;s an example of the Java code I&#39;m using:\r\n```\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializationFeature;\r\n\r\npublic class MyObject {\r\n    private String message;\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        // Create an object\r\n        MyObject myObject = new MyObject();\r\n        myObject.setMessage(&quot;Hello,\\nWorld!&quot;);\r\n\r\n        // Create an ObjectMapper object\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n\r\n        // Convert the object to a JSON string\r\n        String jsonString = objectMapper.writeValueAsString(myObject);\r\n\r\n        // Output the JSON string\r\n        System.out.println(jsonString);\r\n    }\r\n}\r\n```\r\nWhen I run this code, the output is:\r\n```\r\n{&quot;message&quot;:&quot;Hello,\\nWorld!&quot;}\r\n```\r\nbreak line change to String\r\nHowever, I want the output to be:\r\n```\r\n{&quot;message&quot;:&quot;Hello,\r\nWorld!&quot;}\r\n```\r\nHello and World are in different line\r\nHow can I achieve this?","title":"How to configure Jackson to not handle line breaks in Spring boot project?","body":"<p>Body: I'm using Jackson to serialize Java objects to JSON strings. However, I don't want Jackson to escape line breaks in the JSON strings. How can I configure Jackson to not handle line breaks?</p>\n<p>Here's an example of the Java code I'm using:</p>\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\n\npublic class MyObject {\n    private String message;\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public static void main(String[] args) throws Exception {\n        // Create an object\n        MyObject myObject = new MyObject();\n        myObject.setMessage(&quot;Hello,\\nWorld!&quot;);\n\n        // Create an ObjectMapper object\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n\n        // Convert the object to a JSON string\n        String jsonString = objectMapper.writeValueAsString(myObject);\n\n        // Output the JSON string\n        System.out.println(jsonString);\n    }\n}\n</code></pre>\n<p>When I run this code, the output is:</p>\n<pre><code>{&quot;message&quot;:&quot;Hello,\\nWorld!&quot;}\n</code></pre>\n<p>break line change to String\nHowever, I want the output to be:</p>\n<pre><code>{&quot;message&quot;:&quot;Hello,\nWorld!&quot;}\n</code></pre>\n<p>Hello and World are in different line\nHow can I achieve this?</p>\n"},{"tags":["java","unit-testing","junit","resources"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":3,"creation_date":1424694011,"post_id":28673651,"comment_id":45640607,"body_markdown":"Out of curiosity: why do you want to know?","body":"Out of curiosity: why do you want to know?"},{"owner":{"account_id":5083509,"reputation":4080,"user_id":4477923,"accept_rate":69,"display_name":"Rory"},"score":4,"creation_date":1424694237,"post_id":28673651,"comment_id":45640734,"body_markdown":"@fge need to pass it to object under test, which uses it to load a file","body":"@fge need to pass it to object under test, which uses it to load a file"},{"owner":{"account_id":3453115,"reputation":1949,"user_id":2892277,"display_name":"Nikolay"},"score":0,"creation_date":1424694319,"post_id":28673651,"comment_id":45640776,"body_markdown":"@fge I had a similar case for JBoss -- get deployment (war file) name of application to read configuration from /etc/mycompany/deployment_name/config (we have a lot of instances of same application deployed at same time).","body":"@fge I had a similar case for JBoss -- get deployment (war file) name of application to read configuration from /etc/mycompany/deployment_name/config (we have a lot of instances of same application deployed at same time)."},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":8,"creation_date":1424697866,"post_id":28673651,"comment_id":45642779,"body_markdown":"Direct file access to your resource directory is a bad idea.  Refactor your code to operate on a steam, or have your test create a copy in a TemporaryFolder first.","body":"Direct file access to your resource directory is a bad idea.  Refactor your code to operate on a steam, or have your test create a copy in a TemporaryFolder first."},{"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"score":0,"creation_date":1484415192,"post_id":28673651,"comment_id":70504474,"body_markdown":"Unfortunately, there are many libraries which accept only File objects (or Hadoop Path objects), not streams.  While one could simply copy the test data to a temp file, then use that, it would be easier to know the path.  Recognizing, of course, that anything built into a jar would defeat this.","body":"Unfortunately, there are many libraries which accept only File objects (or Hadoop Path objects), not streams.  While one could simply copy the test data to a temp file, then use that, it would be easier to know the path.  Recognizing, of course, that anything built into a jar would defeat this."},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":7,"creation_date":1519753577,"post_id":28673651,"comment_id":85034530,"body_markdown":"@OliverCharlesworth I agree about temp folders and use `org.junit.rules.TemporaryFolder` all the time... but... to copy from test/resources you need to know, er, its path!","body":"@OliverCharlesworth I agree about temp folders and use <code>org.junit.rules.TemporaryFolder</code> all the time... but... to copy from test/resources you need to know, er, its path!"},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1519756784,"post_id":28673651,"comment_id":85036276,"body_markdown":"@mikerodent - what I think meant was: read the resource via an inputstream, and then write it to a temporary file.","body":"@mikerodent - what I think meant was: read the resource via an inputstream, and then write it to a temporary file."},{"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"score":0,"creation_date":1558964128,"post_id":28673651,"comment_id":99261890,"body_markdown":"There are three variants of solution, depending on the situation: https://stackoverflow.com/a/56327069/715269","body":"There are three variants of solution, depending on the situation: <a href=\"https://stackoverflow.com/a/56327069/715269\">stackoverflow.com/a/56327069/715269</a>"}],"answers":[{"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":47,"creation_date":1424697739,"post_id":28674230,"comment_id":45642714,"body_markdown":"This isn&#39;t necessarily a good idea.  If the resource is in a Jar, this will lead to sad times.","body":"This isn&#39;t necessarily a good idea.  If the resource is in a Jar, this will lead to sad times."},{"owner":{"account_id":2174289,"reputation":8434,"user_id":1925388,"accept_rate":81,"display_name":"Anmol Singh Jaggi"},"score":2,"creation_date":1507188367,"post_id":28674230,"comment_id":80112939,"body_markdown":"@OliverCharlesworth So, what can be done in case of jar?","body":"@OliverCharlesworth So, what can be done in case of jar?"},{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1507210174,"post_id":28674230,"comment_id":80126771,"body_markdown":"@AnmolSinghJaggi - See my comment below the original question :)","body":"@AnmolSinghJaggi - See my comment below the original question :)"},{"owner":{"account_id":8986718,"reputation":2467,"user_id":6700081,"accept_rate":73,"display_name":"firstpostcommenter"},"score":0,"creation_date":1523732912,"post_id":28674230,"comment_id":86685431,"body_markdown":"maven build fails when I use this solution","body":"maven build fails when I use this solution"},{"owner":{"account_id":3196795,"reputation":490,"user_id":2699805,"accept_rate":40,"display_name":"qwert_ukg"},"score":0,"creation_date":1538738268,"post_id":28674230,"comment_id":92258638,"body_markdown":"It will be with filename too","body":"It will be with filename too"},{"owner":{"account_id":5483053,"reputation":406,"user_id":4358787,"display_name":"Gaurav"},"score":0,"creation_date":1564595319,"post_id":28674230,"comment_id":101086872,"body_markdown":"is there a way to do this using the new Files API?","body":"is there a way to do this using the new Files API?"}],"tags":[],"owner":{"account_id":3849263,"reputation":2884,"user_id":3189818,"display_name":"ashosborne1"},"comment_count":6,"down_vote_count":6,"up_vote_count":248,"is_accepted":true,"score":242,"last_activity_date":1525628694,"creation_date":1424695810,"answer_id":28674230,"question_id":28673651,"body_markdown":"Try working with the `ClassLoader` class:    \t\t\r\n         \r\n    ClassLoader classLoader = getClass().getClassLoader();\r\n\tFile file = new File(classLoader.getResource(&quot;somefile&quot;).getFile());\r\n\tSystem.out.println(file.getAbsolutePath());\r\n\r\n\r\nA `ClassLoader` is responsible for loading in classes. Every class has a reference to a `ClassLoader`. This code returns a `File` from the resource directory. Calling `getAbsolutePath()` on it returns its absolute `Path`.\r\n\r\nJavadoc for `ClassLoader`: http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Try working with the <code>ClassLoader</code> class:           </p>\n\n<pre><code>ClassLoader classLoader = getClass().getClassLoader();\nFile file = new File(classLoader.getResource(\"somefile\").getFile());\nSystem.out.println(file.getAbsolutePath());\n</code></pre>\n\n<p>A <code>ClassLoader</code> is responsible for loading in classes. Every class has a reference to a <code>ClassLoader</code>. This code returns a <code>File</code> from the resource directory. Calling <code>getAbsolutePath()</code> on it returns its absolute <code>Path</code>.</p>\n\n<p>Javadoc for <code>ClassLoader</code>: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html</a></p>\n"},{"comments":[{"owner":{"account_id":1558198,"reputation":3820,"user_id":1448704,"accept_rate":72,"display_name":"seba.wagner"},"score":4,"creation_date":1449616534,"post_id":28674517,"comment_id":56083111,"body_markdown":"new File(&quot;src/test/resources/fileXYZ&quot;); will not work. Neither from Eclipse nor from Maven if you simply put that into a JUnit test.","body":"new File(&quot;src/test/resources/fileXYZ&quot;); will not work. Neither from Eclipse nor from Maven if you simply put that into a JUnit test."},{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":12,"creation_date":1449708524,"post_id":28674517,"comment_id":56130016,"body_markdown":"It works just fine from Maven. In eclipse you will need to set the current working directory in the test runner, but command line maven does this for you.","body":"It works just fine from Maven. In eclipse you will need to set the current working directory in the test runner, but command line maven does this for you."},{"owner":{"account_id":1558198,"reputation":3820,"user_id":1448704,"accept_rate":72,"display_name":"seba.wagner"},"score":4,"creation_date":1449784906,"post_id":28674517,"comment_id":56169556,"body_markdown":"I don&#39;t think so. And why would you do that if you can do simply a &quot;new File(getClass().getClassLoader().getResource(&quot;fileNameXYZ.xml&quot;)&quot; without any need to set up anything. Neither in Eclipse nor in Maven.","body":"I don&#39;t think so. And why would you do that if you can do simply a &quot;new File(getClass().getClassLoader().getResource(&quot;fileNameXYZ.xm&zwnj;&#8203;l&quot;)&quot; without any need to set up anything. Neither in Eclipse nor in Maven."},{"owner":{"account_id":2372918,"reputation":4836,"user_id":2077101,"accept_rate":64,"display_name":"James Watkins"},"score":11,"creation_date":1455549905,"post_id":28674517,"comment_id":58526856,"body_markdown":"Rather, why wouldn&#39;t you follow the standards of your build utility? Especially when it simplifies your code. Using IntelliJ or Maven, there&#39;s no need to set working directory. This is obviously the simplest solution, with Eclipse being a pain as always.","body":"Rather, why wouldn&#39;t you follow the standards of your build utility? Especially when it simplifies your code. Using IntelliJ or Maven, there&#39;s no need to set working directory. This is obviously the simplest solution, with Eclipse being a pain as always."},{"owner":{"account_id":552215,"reputation":319,"user_id":917279,"accept_rate":100,"display_name":"a_secenthusiast"},"score":2,"creation_date":1482564339,"post_id":28674517,"comment_id":69825767,"body_markdown":"For IntelliJ 2014 version , I had to still change the working directory in the Run/Debug configurations of the test method/class, as @Steve C mentioned.","body":"For IntelliJ 2014 version , I had to still change the working directory in the Run/Debug configurations of the test method/class, as @Steve C mentioned."},{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":0,"creation_date":1504541191,"post_id":28674517,"comment_id":79041881,"body_markdown":"@JamesWatkins what I need to do to setup correctly? There are some projects that the root path could be different. As an example, I worked in a project that this code will return different results if you start the test (TestNG) from Intellij IDEA or start from Maven. In the first one it shows the `resources` from root project and in the second it shows the `resources` from the actual maven module. The same problem occur with a `new File()`.","body":"@JamesWatkins what I need to do to setup correctly? There are some projects that the root path could be different. As an example, I worked in a project that this code will return different results if you start the test (TestNG) from Intellij IDEA or start from Maven. In the first one it shows the <code>resources</code> from root project and in the second it shows the <code>resources</code> from the actual maven module. The same problem occur with a <code>new File()</code>."},{"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"score":2,"creation_date":1546909151,"post_id":28674517,"comment_id":95001099,"body_markdown":"`Maven automatically sets the current working directory` sets to what?","body":"<code>Maven automatically sets the current working directory</code> sets to what?"},{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":2,"creation_date":1546910807,"post_id":28674517,"comment_id":95001455,"body_markdown":"@KorayTugay, it sets it to the directory containing the pom.xml file for the module currently being built.","body":"@KorayTugay, it sets it to the directory containing the pom.xml file for the module currently being built."},{"owner":{"account_id":10965444,"reputation":584,"user_id":8057308,"accept_rate":75,"display_name":"Jitendra"},"score":0,"creation_date":1556622809,"post_id":28674517,"comment_id":98493242,"body_markdown":"Had the same issue, can anybody tell me how to access the file from &quot;src/main/resource&quot; path instead of &quot;src/test&quot; path as for test cases it is taking by default path as &quot;src/test&quot;?","body":"Had the same issue, can anybody tell me how to access the file from &quot;src/main/resource&quot; path instead of &quot;src/test&quot; path as for test cases it is taking by default path as &quot;src/test&quot;?"},{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":0,"creation_date":1556681969,"post_id":28674517,"comment_id":98515706,"body_markdown":"@Jitendra, do you want the file or the resource? Are you trying to access it from a unit test or at application runtime?","body":"@Jitendra, do you want the file or the resource? Are you trying to access it from a unit test or at application runtime?"},{"owner":{"account_id":10965444,"reputation":584,"user_id":8057308,"accept_rate":75,"display_name":"Jitendra"},"score":0,"creation_date":1556777564,"post_id":28674517,"comment_id":98545795,"body_markdown":"@Steve C, I&#39;m trying to access the file inside src/main/resource/file from a unit test.","body":"@Steve C, I&#39;m trying to access the file inside src/main/resource/file from a unit test."},{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":0,"creation_date":1556777859,"post_id":28674517,"comment_id":98545906,"body_markdown":"@Jitendra, if you want to read `src/main/resources/data.txt` from a unit test you can just use `File dataFile = new File(&quot;src/main/resources/data.txt&quot;);`","body":"@Jitendra, if you want to read <code>src&#47;main&#47;resources&#47;data.txt</code> from a unit test you can just use <code>File dataFile = new File(&quot;src&#47;main&#47;resources&#47;data.txt&quot;);</code>"},{"owner":{"account_id":10965444,"reputation":584,"user_id":8057308,"accept_rate":75,"display_name":"Jitendra"},"score":0,"creation_date":1556792091,"post_id":28674517,"comment_id":98552701,"body_markdown":"@Steve C, I have already tried this but it&#39;s not working because when I checked,  it&#39;s absolute path became `src/test/src/main/resources/data.txt`.","body":"@Steve C, I have already tried this but it&#39;s not working because when I checked,  it&#39;s absolute path became <code>src&#47;test&#47;src&#47;main&#47;resources&#47;data.txt</code>."},{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":1,"creation_date":1556866387,"post_id":28674517,"comment_id":98580100,"body_markdown":"Are you running this test from an IDE? If so this is happening to you because you have your launch configuration set up with the working directory pointing at `src/test`.","body":"Are you running this test from an IDE? If so this is happening to you because you have your launch configuration set up with the working directory pointing at <code>src&#47;test</code>."},{"owner":{"account_id":3556791,"reputation":16494,"user_id":2970351,"accept_rate":61,"display_name":"M. Reza Nasirloo"},"score":0,"creation_date":1579783123,"post_id":28674517,"comment_id":105886835,"body_markdown":"This works fine with Android Gradle plugin 3.2.0 to 3.5.3","body":"This works fine with Android Gradle plugin 3.2.0 to 3.5.3"},{"owner":{"account_id":94158,"reputation":8434,"user_id":257233,"accept_rate":88,"display_name":"Robert Mark Bram"},"score":0,"creation_date":1597557922,"post_id":28674517,"comment_id":112168119,"body_markdown":"I think the premise behind this answer is incorrect: `it&#39;s a bad habit to get into because class loader resources are not java.io.File objects when they are in a jar archive`. You still cannot use java.io.File objects to read from a jar. I don&#39;t like this answer because it relies on having to know how your source is laid out: src/test/resources etc. Using a classloader seems cleaner, because you are only concerned with the path to the file from some point in the classpath.. if you are looking for a file in a jar you still use class loaders: getClass().getResourceAsStream(&quot;/file.txt&quot;)","body":"I think the premise behind this answer is incorrect: <code>it&#39;s a bad habit to get into because class loader resources are not java.io.File objects when they are in a jar archive</code>. You still cannot use java.io.File objects to read from a jar. I don&#39;t like this answer because it relies on having to know how your source is laid out: src/test/resources etc. Using a classloader seems cleaner, because you are only concerned with the path to the file from some point in the classpath.. if you are looking for a file in a jar you still use class loaders: getClass().getResourceAsStream(&quot;/file.txt&quot;)"}],"tags":[],"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"comment_count":16,"down_vote_count":4,"up_vote_count":369,"is_accepted":false,"score":365,"last_activity_date":1424697191,"creation_date":1424696756,"answer_id":28674517,"question_id":28673651,"body_markdown":"You don&#39;t need to mess with class loaders. In fact it&#39;s a bad habit to get into because class loader resources are **not** java.io.File objects when they are in a jar archive.\r\n\r\nMaven automatically sets the current working directory before running tests, so you can just use:\r\n\r\n        File resourcesDirectory = new File(&quot;src/test/resources&quot;);\r\n\r\n`resourcesDirectory.getAbsolutePath()` will return the correct value if that is what you really need.\r\n\r\nI recommend creating a `src/test/data` directory if you want your tests to access data via the file system. This makes it clear what you&#39;re doing.","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>You don't need to mess with class loaders. In fact it's a bad habit to get into because class loader resources are <strong>not</strong> java.io.File objects when they are in a jar archive.</p>\n\n<p>Maven automatically sets the current working directory before running tests, so you can just use:</p>\n\n<pre><code>    File resourcesDirectory = new File(\"src/test/resources\");\n</code></pre>\n\n<p><code>resourcesDirectory.getAbsolutePath()</code> will return the correct value if that is what you really need.</p>\n\n<p>I recommend creating a <code>src/test/data</code> directory if you want your tests to access data via the file system. This makes it clear what you're doing.</p>\n"},{"tags":[],"owner":{"account_id":4363555,"reputation":3958,"user_id":3559967,"display_name":"HelloWorld101"},"comment_count":0,"down_vote_count":3,"up_vote_count":21,"is_accepted":false,"score":18,"last_activity_date":1653488056,"creation_date":1461753292,"answer_id":36887338,"question_id":28673651,"body_markdown":"I have a Maven3 project using JUnit 4.12 and Java8.\r\nIn order to get the path of a file called `myxml.xml` under `src/test/resources`, I do this from within the test case:\r\n\r\n    @Test\r\n    public void testApp()\r\n    {\r\n        File inputXmlFile = new File(this.getClass().getResource(&quot;/myxml.xml&quot;).getFile());\r\n        System.out.println(inputXmlFile.getAbsolutePath());\r\n        ...\r\n    }\r\n\r\n\r\nTested on Ubuntu 14.04 with IntelliJ IDE.\r\nReference [here][1].\r\n\r\n**Note**\r\n\r\nThe prepending `/` symbol is necessary, because `Class.getResource(String)` won&#39;t necessarily reveal entire file path (missing) along with `FileNotFoundException`.\r\n\r\n\r\n\r\n  [1]: http://jlorenzen.blogspot.de/2007/06/proper-way-to-access-file-resources-in.html","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>I have a Maven3 project using JUnit 4.12 and Java8.\nIn order to get the path of a file called <code>myxml.xml</code> under <code>src/test/resources</code>, I do this from within the test case:</p>\n<pre><code>@Test\npublic void testApp()\n{\n    File inputXmlFile = new File(this.getClass().getResource(&quot;/myxml.xml&quot;).getFile());\n    System.out.println(inputXmlFile.getAbsolutePath());\n    ...\n}\n</code></pre>\n<p>Tested on Ubuntu 14.04 with IntelliJ IDE.\nReference <a href=\"http://jlorenzen.blogspot.de/2007/06/proper-way-to-access-file-resources-in.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>Note</strong></p>\n<p>The prepending <code>/</code> symbol is necessary, because <code>Class.getResource(String)</code> won't necessarily reveal entire file path (missing) along with <code>FileNotFoundException</code>.</p>\n"},{"comments":[{"owner":{"account_id":4825397,"reputation":597,"user_id":3894987,"accept_rate":100,"display_name":"Huy H&#243;m H·ªânh"},"score":0,"creation_date":1516100553,"post_id":37707661,"comment_id":83542879,"body_markdown":"Hi Alexandr, i&#39;m in trouble with Resource file in target/classes and src/main/resource and you seem the only one talk about it. First I have files on src/main/resource, after build project, it copy these file to target/classes. And from this, getClass().getClassLoader().getResource(fileName) only work on target folder while I want I work on src/main.\nCan you give me link somewhere explain about mechanism of getResource file? how to config Resource folder? Tks :D","body":"Hi Alexandr, i&#39;m in trouble with Resource file in target/classes and src/main/resource and you seem the only one talk about it. First I have files on src/main/resource, after build project, it copy these file to target/classes. And from this, getClass().getClassLoader().getResource(fileName) only work on target folder while I want I work on src/main. Can you give me link somewhere explain about mechanism of getResource file? how to config Resource folder? Tks :D"},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":2,"creation_date":1516361243,"post_id":37707661,"comment_id":83665227,"body_markdown":"@Huy H&#243;m H·ªânh, I would recommend do not do it. I am afraid you go into the wrong direction.There are certain places where resource files are located, the places are known for all other. Easier to maintain such projects. Even for you it will be easier, you just need to understand the structure of maven projects. But for sure, you can configure default resource location with [https://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html]","body":"@Huy H&#243;m H·ªânh, I would recommend do not do it. I am afraid you go into the wrong direction.There are certain places where resource files are located, the places are known for all other. Easier to maintain such projects. Even for you it will be easier, you just need to understand the structure of maven projects. But for sure, you can configure default resource location with [<a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html]\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-resources-plugin/examples/&hellip;</a>"},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":0,"creation_date":1516361284,"post_id":37707661,"comment_id":83665255,"body_markdown":"@HuyH&#243;mH·ªânh, Also have a look at the solution here: https://stackoverflow.com/questions/23289098/how-to-copy-resource-to-src-target-directory-with-maven#answer-23320582  But to configure you src/main as a resource... Try to avoid it, it seems you do something wrong.","body":"@HuyH&#243;mH·ªânh, Also have a look at the solution here: <a href=\"https://stackoverflow.com/questions/23289098/how-to-copy-resource-to-src-target-directory-with-maven#answer-23320582\" title=\"how to copy resource to src target directory with maven%23answer 23320582\">stackoverflow.com/questions/23289098/&hellip;</a>  But to configure you src/main as a resource... Try to avoid it, it seems you do something wrong."},{"owner":{"account_id":935490,"reputation":3697,"user_id":964478,"accept_rate":71,"display_name":"Alex P."},"score":0,"creation_date":1551426567,"post_id":37707661,"comment_id":96643329,"body_markdown":"hm. Could you elaborate what&#39;s wrong with `.gitignore`? \n\nAlso it looks like IDEA runs Maven automatically when running tests (and sets correct working dir by default, `$MODULE_DIR$`). So there is no need to run `mvn test` manually before that, everything works fine from both Maven and IDEA with just `&quot;src/test/resources/somefile.txt&quot;`.","body":"hm. Could you elaborate what&#39;s wrong with <code>.gitignore</code>?   Also it looks like IDEA runs Maven automatically when running tests (and sets correct working dir by default, <code>$MODULE_DIR$</code>). So there is no need to run <code>mvn test</code> manually before that, everything works fine from both Maven and IDEA with just <code>&quot;src&#47;test&#47;resources&#47;somefile.txt&quot;</code>."}],"tags":[],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"comment_count":4,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1465430890,"creation_date":1465402169,"answer_id":37707661,"question_id":28673651,"body_markdown":"There are differences and constraints in options offered by @Steve C and @ashosborne1. They must be specified, I believe. \n\nWhen can we can use: `File resourcesDirectory = new File(&quot;src/test/resources&quot;);`?\n\n - 1 When tests are going to be run via maven only but not via IDE.\n - 2.1 When tests are going to be run via maven or\n - 2.2 via IDE and only one project is imported into IDE. (I use ‚Äúimported‚Äù term, cause it is used in IntelliJ IDEA. I think users of eclipse also import their maven project). This will work, cause working directory when you run tests via IDE is the same as your project.\n - 3.1 When tests are going to be run via maven or \n - 3.2 via IDE, and more than one projects are imported into IDE (when you are not a student, you usually import several projects), **AND** before you run tests via IDE, you manually configure working directory for your tests. That working directory should refer to your imported project that contains the tests. By default, working directory of all projects imported into IDE is only one.  Probably it is a restriction of `IntelliJ IDEA` only, but I think all IDEs work like this. And this configuration that must be done manually, is not good at all. Working with several tests existing in different maven projects, but imported into one big ‚ÄúIDE‚Äù project, force us to remember this and don‚Äôt allow to relax and get pleasure from your work.\n\nSolution offered by @ashosborne1 (personally I prefer this one) requires 2 additional requirements that must be done before you run tests. Here is a list of steps to use this solution:\n\n - Create a test folder (‚Äúteva‚Äù) and file (‚Äúreadme‚Äù) inside of  ‚Äúsrc/test/resources/‚Äù:\n\n   src/test/resources/teva/readme\n\n   **File must be created in the test folder, otherwise, it will not work. Maven ignores empty folders.**\n - At least once build project via `mvn clean install`. It will run tests also. It may be enough to run only your test class/method via maven without building  a whole project. As a result your test resources will be copied into test-classes, here is a path: `target/test-classes/teva/readme`\n - After that, you can access the folder using code, already offered by @ashosborne1 (I&#39;m sorry, that I could not edit this code inside of this list  of items correctly):\n\n\n&gt;     public static final String TEVA_FOLDER = &quot;teva&quot;; ... \n&gt;     URL tevaUrl = YourTest.class.getClassLoader().getResource(TEVA_FOLDER); \n&gt;     String tevaTestFolder = new File(tevaUrl.toURI()).getAbsolutePath();\n\nNow you can run your test via IDE as many times as you want. Until you run mvn clean. It will drop the target folder.\n\n\nCreating file inside a test folder and running maven first time, before you run tests via IDE are needed steps. Without these steps, if you just in your IDE create test resources, then write test and run it via IDE only, you&#39;ll get an error. Running tests via mvn copies test resources into target/test-classes/teva/readme and they become accessible for a classloader.\n\n\nYou may ask, why do I need import more than one maven project in IDE and why so many complicated things? For me, one of the main motivation: keeping IDA-related files far from code. I first create a new project in my IDE. It is a fake project, that is just a holder of IDE-related files. Then, I import already existing maven projects. I force these imported projects to keep IDEA files in my original fake project only. As a result I don&#39;t see IDE-related files among the code. SVN should not see them (don&#39;t offer to configure svn/git to ignore such files, please). Also it is just very convenient.","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>There are differences and constraints in options offered by @Steve C and @ashosborne1. They must be specified, I believe.</p>\n<p>When can we can use: <code>File resourcesDirectory = new File(&quot;src/test/resources&quot;);</code>?</p>\n<ul>\n<li>1 When tests are going to be run via maven only but not via IDE.</li>\n<li>2.1 When tests are going to be run via maven or</li>\n<li>2.2 via IDE and only one project is imported into IDE. (I use ‚Äúimported‚Äù term, cause it is used in IntelliJ IDEA. I think users of eclipse also import their maven project). This will work, cause working directory when you run tests via IDE is the same as your project.</li>\n<li>3.1 When tests are going to be run via maven or</li>\n<li>3.2 via IDE, and more than one projects are imported into IDE (when you are not a student, you usually import several projects), <strong>AND</strong> before you run tests via IDE, you manually configure working directory for your tests. That working directory should refer to your imported project that contains the tests. By default, working directory of all projects imported into IDE is only one.  Probably it is a restriction of <code>IntelliJ IDEA</code> only, but I think all IDEs work like this. And this configuration that must be done manually, is not good at all. Working with several tests existing in different maven projects, but imported into one big ‚ÄúIDE‚Äù project, force us to remember this and don‚Äôt allow to relax and get pleasure from your work.</li>\n</ul>\n<p>Solution offered by @ashosborne1 (personally I prefer this one) requires 2 additional requirements that must be done before you run tests. Here is a list of steps to use this solution:</p>\n<ul>\n<li><p>Create a test folder (‚Äúteva‚Äù) and file (‚Äúreadme‚Äù) inside of  ‚Äúsrc/test/resources/‚Äù:</p>\n<p>src/test/resources/teva/readme</p>\n<p><strong>File must be created in the test folder, otherwise, it will not work. Maven ignores empty folders.</strong></p>\n</li>\n<li><p>At least once build project via <code>mvn clean install</code>. It will run tests also. It may be enough to run only your test class/method via maven without building  a whole project. As a result your test resources will be copied into test-classes, here is a path: <code>target/test-classes/teva/readme</code></p>\n</li>\n<li><p>After that, you can access the folder using code, already offered by @ashosborne1 (I'm sorry, that I could not edit this code inside of this list  of items correctly):</p>\n</li>\n</ul>\n<blockquote>\n<pre><code>public static final String TEVA_FOLDER = &quot;teva&quot;; ... \nURL tevaUrl = YourTest.class.getClassLoader().getResource(TEVA_FOLDER); \nString tevaTestFolder = new File(tevaUrl.toURI()).getAbsolutePath();\n</code></pre>\n</blockquote>\n<p>Now you can run your test via IDE as many times as you want. Until you run mvn clean. It will drop the target folder.</p>\n<p>Creating file inside a test folder and running maven first time, before you run tests via IDE are needed steps. Without these steps, if you just in your IDE create test resources, then write test and run it via IDE only, you'll get an error. Running tests via mvn copies test resources into target/test-classes/teva/readme and they become accessible for a classloader.</p>\n<p>You may ask, why do I need import more than one maven project in IDE and why so many complicated things? For me, one of the main motivation: keeping IDA-related files far from code. I first create a new project in my IDE. It is a fake project, that is just a holder of IDE-related files. Then, I import already existing maven projects. I force these imported projects to keep IDEA files in my original fake project only. As a result I don't see IDE-related files among the code. SVN should not see them (don't offer to configure svn/git to ignore such files, please). Also it is just very convenient.</p>\n"},{"comments":[{"owner":{"account_id":3508394,"reputation":2007,"user_id":2933389,"accept_rate":100,"display_name":"Paramesh Korrakuti"},"score":1,"creation_date":1603952658,"post_id":39243107,"comment_id":114199948,"body_markdown":"We can also inject by using `@Value` like \n`@Value(&quot;classpath: some_file.txt&quot;) private Resource someResource;` and then in the method, `someResource.getFile()` to get the file.","body":"We can also inject by using <code>@Value</code> like  <code>@Value(&quot;classpath: some_file.txt&quot;) private Resource someResource;</code> and then in the method, <code>someResource.getFile()</code> to get the file."}],"tags":[],"owner":{"account_id":3508394,"reputation":2007,"user_id":2933389,"accept_rate":100,"display_name":"Paramesh Korrakuti"},"comment_count":1,"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1472627841,"creation_date":1472627841,"answer_id":39243107,"question_id":28673651,"body_markdown":"If it&#39;s a spring project, we can use the below code to get files from **src/test/resource** folder.\r\n\r\n    File file = ResourceUtils.getFile(this.getClass().getResource(&quot;/some_file.txt&quot;));","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>If it's a spring project, we can use the below code to get files from <strong>src/test/resource</strong> folder.</p>\n\n<pre><code>File file = ResourceUtils.getFile(this.getClass().getResource(\"/some_file.txt\"));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":0,"creation_date":1509410979,"post_id":42375654,"comment_id":80999811,"body_markdown":"Will this exact same code work on Windows? The JavaDoc for `Paths.get(...)` suggests (to me anyway) that it it won&#39;t.","body":"Will this exact same code work on Windows? The JavaDoc for <code>Paths.get(...)</code> suggests (to me anyway) that it it won&#39;t."},{"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"score":0,"creation_date":1509430855,"post_id":42375654,"comment_id":81004754,"body_markdown":"@SteveC you can use `File.separator` constant to build the string to be used as a path","body":"@SteveC you can use <code>File.separator</code> constant to build the string to be used as a path"},{"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"score":1,"creation_date":1509432878,"post_id":42375654,"comment_id":81005464,"body_markdown":"I know that, but it is very ugly. In contrast, `new File(&quot;src/test/resources&quot;)` does the right thing on all platforms.","body":"I know that, but it is very ugly. In contrast, <code>new File(&quot;src&#47;test&#47;resources&quot;)</code> does the right thing on all platforms."},{"owner":{"account_id":6622268,"reputation":393,"user_id":5113524,"accept_rate":73,"display_name":"Navneeth"},"score":3,"creation_date":1513097053,"post_id":42375654,"comment_id":82516177,"body_markdown":"Why not just use `Path resourceDirectory = Paths.get(&quot;src&quot;,&quot;test&quot;,&quot;resources&quot;);`?","body":"Why not just use <code>Path resourceDirectory = Paths.get(&quot;src&quot;,&quot;test&quot;,&quot;resources&quot;);</code>?"},{"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"score":0,"creation_date":1513161776,"post_id":42375654,"comment_id":82543050,"body_markdown":"@Navneeth sure, it will make it OS independent. Feel free to update the answer","body":"@Navneeth sure, it will make it OS independent. Feel free to update the answer"},{"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"score":4,"creation_date":1526469318,"post_id":42375654,"comment_id":87754725,"body_markdown":"Hmm, `Paths.get(&quot;src&quot;, &quot;test&quot;, &quot;resources&quot;)` and `Paths.get(&quot;src/test/resources&quot;)` work fine on Windows 10 for me. What am I doing wrong? =)","body":"Hmm, <code>Paths.get(&quot;src&quot;, &quot;test&quot;, &quot;resources&quot;)</code> and <code>Paths.get(&quot;src&#47;test&#47;resources&quot;)</code> work fine on Windows 10 for me. What am I doing wrong? =)"},{"owner":{"account_id":1924499,"reputation":769,"user_id":1735269,"accept_rate":40,"display_name":"somshivam"},"score":0,"creation_date":1586847605,"post_id":42375654,"comment_id":108270721,"body_markdown":"This is actually the best and cleanest answer","body":"This is actually the best and cleanest answer"},{"owner":{"account_id":1316033,"reputation":7855,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"score":0,"creation_date":1597505198,"post_id":42375654,"comment_id":112157479,"body_markdown":"Doesn&#39;t work with a multi module maven project, since the current directory will be the parent directory for sub modules.","body":"Doesn&#39;t work with a multi module maven project, since the current directory will be the parent directory for sub modules."}],"tags":[],"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"comment_count":8,"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1526469234,"creation_date":1487703231,"answer_id":42375654,"question_id":28673651,"body_markdown":"I would simply use [`Path`][1] from Java 7\r\n\r\n    Path resourceDirectory = Paths.get(&quot;src&quot;,&quot;test&quot;,&quot;resources&quot;);\r\n\r\nNeat and clean!\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>I would simply use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html\" rel=\"noreferrer\"><code>Path</code></a> from Java 7</p>\n\n<pre><code>Path resourceDirectory = Paths.get(\"src\",\"test\",\"resources\");\n</code></pre>\n\n<p>Neat and clean!</p>\n"},{"comments":[{"owner":{"account_id":224452,"reputation":19768,"user_id":484290,"accept_rate":59,"display_name":"Noor"},"score":1,"creation_date":1555094452,"post_id":42874921,"comment_id":98004072,"body_markdown":"No worries, in fact thank you for your help !! The good thing is that deleting your answer,I am able to delete the question. Yeah, quite frustrated out here also, but anyway thanks !! Good evening :)","body":"No worries, in fact thank you for your help !! The good thing is that deleting your answer,I am able to delete the question. Yeah, quite frustrated out here also, but anyway thanks !! Good evening :)"}],"tags":[],"owner":{"account_id":224452,"reputation":19768,"user_id":484290,"accept_rate":59,"display_name":"Noor"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1489843285,"creation_date":1489843285,"answer_id":42874921,"question_id":28673651,"body_markdown":"The simplest and clean solution I uses, suppose the name of the test class is `TestQuery1` and there is a `resources` directory in your `test` folder as follows:\r\n\r\n    ‚îú‚îÄ‚îÄ java\r\n    ‚îÇ&#160;&#160; ‚îî‚îÄ‚îÄ TestQuery1.java\r\n    ‚îî‚îÄ‚îÄ resources\r\n        ‚îî‚îÄ‚îÄ TestQuery1\r\n            ‚îú‚îÄ‚îÄ query.json\r\n            ‚îî‚îÄ‚îÄ query.rq\r\n\r\nTo get the URI of `TestQuery1` do:\r\n\r\n    URL currentTestResourceFolder = getClass().getResource(&quot;/&quot;+getClass().getSimpleName());\r\n\r\nTo get the URI of one of the file `TestQuery1`, do:\r\n  \r\n\r\n    File exampleDir = new File(currentTestResourceFolder.toURI());\r\n    URI queryJSONFileURI = exampleDir.toURI().resolve(&quot;query.json&quot;);","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>The simplest and clean solution I uses, suppose the name of the test class is <code>TestQuery1</code> and there is a <code>resources</code> directory in your <code>test</code> folder as follows:</p>\n\n<pre><code>‚îú‚îÄ‚îÄ java\n‚îÇ¬†¬† ‚îî‚îÄ‚îÄ TestQuery1.java\n‚îî‚îÄ‚îÄ resources\n    ‚îî‚îÄ‚îÄ TestQuery1\n        ‚îú‚îÄ‚îÄ query.json\n        ‚îî‚îÄ‚îÄ query.rq\n</code></pre>\n\n<p>To get the URI of <code>TestQuery1</code> do:</p>\n\n<pre><code>URL currentTestResourceFolder = getClass().getResource(\"/\"+getClass().getSimpleName());\n</code></pre>\n\n<p>To get the URI of one of the file <code>TestQuery1</code>, do:</p>\n\n<pre><code>File exampleDir = new File(currentTestResourceFolder.toURI());\nURI queryJSONFileURI = exampleDir.toURI().resolve(\"query.json\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10909625,"reputation":3249,"user_id":8019439,"accept_rate":58,"display_name":"Almas Abdrazak"},"score":0,"creation_date":1575619520,"post_id":46852453,"comment_id":104635203,"body_markdown":"getFile return String instance not FIle","body":"getFile return String instance not FIle"},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":0,"creation_date":1581606103,"post_id":46852453,"comment_id":106499358,"body_markdown":"@AlmasAbdrazak GreatDantone doesn&#39;t say that `getFile()` returns an instance of file. He says that `getAbsolutePath()` is used on an instance of File object.","body":"@AlmasAbdrazak GreatDantone doesn&#39;t say that <code>getFile()</code> returns an instance of file. He says that <code>getAbsolutePath()</code> is used on an instance of File object."},{"owner":{"account_id":10909625,"reputation":3249,"user_id":8019439,"accept_rate":58,"display_name":"Almas Abdrazak"},"score":0,"creation_date":1581627189,"post_id":46852453,"comment_id":106510227,"body_markdown":"@menteith According to his code, he calls getFile() and then getAbsolutePath() on getFile() but getFile() returns String and you can&#39;t call getAbsolutePath() on String object","body":"@menteith According to his code, he calls getFile() and then getAbsolutePath() on getFile() but getFile() returns String and you can&#39;t call getAbsolutePath() on String object"}],"tags":[],"owner":{"account_id":4169031,"reputation":39,"user_id":3417297,"display_name":"GreatDantone"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1530913966,"creation_date":1508513405,"answer_id":46852453,"question_id":28673651,"body_markdown":"Use .getAbsolutePath() on your File object.\r\n\r\n    getClass().getResource(&quot;somefile&quot;).getFile().getAbsolutePath()","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Use .getAbsolutePath() on your File object.</p>\n\n<pre><code>getClass().getResource(\"somefile\").getFile().getAbsolutePath()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":187289,"reputation":1995,"user_id":425238,"display_name":"whitebrow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517386363,"creation_date":1517386363,"answer_id":48537432,"question_id":28673651,"body_markdown":"Use the following to inject Hibernate with Spring in your unit tests:\r\n\r\n    @Bean\r\n    public LocalSessionFactoryBean getLocalSessionFactoryBean() {\r\n        LocalSessionFactoryBean localSessionFactoryBean = new LocalSessionFactoryBean();\r\n        localSessionFactoryBean.setConfigLocation(new ClassPathResource(&quot;hibernate.cfg.xml&quot;));\r\n        localSessionFactoryBean.setPackagesToScan(&quot;com.example.yourpackage.model&quot;);\r\n        return localSessionFactoryBean;\r\n    }\r\n\r\nIf you don&#39;t have the ```hibernate.cfg.xml``` present in your ```src/test/resources``` folder it will automatically fall back to the one in your ```src/main/resources``` folder.","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Use the following to inject Hibernate with Spring in your unit tests:</p>\n\n<pre><code>@Bean\npublic LocalSessionFactoryBean getLocalSessionFactoryBean() {\n    LocalSessionFactoryBean localSessionFactoryBean = new LocalSessionFactoryBean();\n    localSessionFactoryBean.setConfigLocation(new ClassPathResource(\"hibernate.cfg.xml\"));\n    localSessionFactoryBean.setPackagesToScan(\"com.example.yourpackage.model\");\n    return localSessionFactoryBean;\n}\n</code></pre>\n\n<p>If you don't have the <code>hibernate.cfg.xml</code> present in your <code>src/test/resources</code> folder it will automatically fall back to the one in your <code>src/main/resources</code> folder.</p>\n"},{"tags":[],"owner":{"account_id":1301815,"reputation":31771,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1530913918,"creation_date":1525509369,"answer_id":50187427,"question_id":28673651,"body_markdown":"All content in `src/test/resources` is copied into `target/test-classes` folder. So to get file from test resources during maven build you have to load it from `test-classes` folder, like that:\r\n\r\n  \r\n    Paths.get(\r\n        getClass().getProtectionDomain().getCodeSource().getLocation().toURI()\r\n    ).resolve(\r\n        Paths.get(&quot;somefile&quot;)\r\n    ).toFile()\r\n\r\nBreak down:\r\n\r\n 1. `getClass().getProtectionDomain().getCodeSource().getLocation().toURI()` - give you URI to `target/test-classes`.\r\n 1. `resolve(Paths.get(&quot;somefile&quot;))` - resolves `someFile` to `target/test-classes` folder.\r\n\r\nOriginal anwser is taken from [this][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/12178523/1251549","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>All content in <code>src/test/resources</code> is copied into <code>target/test-classes</code> folder. So to get file from test resources during maven build you have to load it from <code>test-classes</code> folder, like that:</p>\n\n<pre><code>Paths.get(\n    getClass().getProtectionDomain().getCodeSource().getLocation().toURI()\n).resolve(\n    Paths.get(\"somefile\")\n).toFile()\n</code></pre>\n\n<p>Break down:</p>\n\n<ol>\n<li><code>getClass().getProtectionDomain().getCodeSource().getLocation().toURI()</code> - give you URI to <code>target/test-classes</code>.</li>\n<li><code>resolve(Paths.get(\"somefile\"))</code> - resolves <code>someFile</code> to <code>target/test-classes</code> folder.</li>\n</ol>\n\n<p>Original anwser is taken from <a href=\"https://stackoverflow.com/a/12178523/1251549\">this</a></p>\n"},{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1561113157,"creation_date":1536237590,"answer_id":52204348,"question_id":28673651,"body_markdown":"You can&#39;t use a file from a resource folder for tests in a common case. The reason is that  resource files in the resource folder are stored inside a jar. So they don&#39;t have a real path in the file system.\r\n\r\nThe most simple solution can be:\r\n\r\n 1. Copy a file from resources to the temporary folder and get a path to that temporary file.\r\n 2. Do tests using a temporary path.\r\n 3. Delete the temporary file.\r\n\r\n`TemporaryFolder` from `JUnit` can be used to create temporary files and delete it after test is complited. Classes from `guava` library are used to copy a file form resource folder. \r\n\r\nPlease, notice that if we use a subfolder in the resources folder, like `good` one, we don&#39;t have to add leading `/` to the resource path.\r\n\r\n    public class SomeTest {\r\n    \r\n        @Rule\r\n        public TemporaryFolder tmpFolder = new TemporaryFolder();\r\n    \r\n    \r\n        @Test\r\n        public void doSomethinge() throws IOException {\r\n            File file = createTmpFileFromResource(tmpFolder, &quot;file.txt&quot;);\r\n            File goodFile = createTmpFileFromResource(tmpFolder, &quot;good/file.txt&quot;);\r\n    \r\n            // do testing here\r\n        }\r\n    \r\n        private static File createTmpFileFromResource(TemporaryFolder folder,\r\n                                                      String classLoaderResource) throws IOException {\r\n            URL resource = Resources.getResource(classLoaderResource);\r\n    \r\n            File tmpFile = folder.newFile();\r\n            Resources.asByteSource(resource).copyTo(Files.asByteSink(tmpFile));\r\n            return tmpFile;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>You can't use a file from a resource folder for tests in a common case. The reason is that  resource files in the resource folder are stored inside a jar. So they don't have a real path in the file system.</p>\n\n<p>The most simple solution can be:</p>\n\n<ol>\n<li>Copy a file from resources to the temporary folder and get a path to that temporary file.</li>\n<li>Do tests using a temporary path.</li>\n<li>Delete the temporary file.</li>\n</ol>\n\n<p><code>TemporaryFolder</code> from <code>JUnit</code> can be used to create temporary files and delete it after test is complited. Classes from <code>guava</code> library are used to copy a file form resource folder. </p>\n\n<p>Please, notice that if we use a subfolder in the resources folder, like <code>good</code> one, we don't have to add leading <code>/</code> to the resource path.</p>\n\n<pre><code>public class SomeTest {\n\n    @Rule\n    public TemporaryFolder tmpFolder = new TemporaryFolder();\n\n\n    @Test\n    public void doSomethinge() throws IOException {\n        File file = createTmpFileFromResource(tmpFolder, \"file.txt\");\n        File goodFile = createTmpFileFromResource(tmpFolder, \"good/file.txt\");\n\n        // do testing here\n    }\n\n    private static File createTmpFileFromResource(TemporaryFolder folder,\n                                                  String classLoaderResource) throws IOException {\n        URL resource = Resources.getResource(classLoaderResource);\n\n        File tmpFile = folder.newFile();\n        Resources.asByteSource(resource).copyTo(Files.asByteSink(tmpFile));\n        return tmpFile;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5916763,"reputation":3250,"user_id":4655324,"accept_rate":79,"display_name":"Mevl&#252;t&#214;zdemir"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1578474865,"creation_date":1578474865,"answer_id":59642663,"question_id":28673651,"body_markdown":"With Spring you could easily read it from the resources folder (either main/resources or test/resources):\r\n\r\nFor example create a file: `test/resources/subfolder/sample.json`\r\n\r\n\r\n    @Test\r\n    public void testReadFile() {\r\n        String json = this.readFile(&quot;classpath:subfolder/sample.json&quot;);\r\n        System.out.println(json);\r\n    }\r\n\r\n    public String readFile(String path) {\r\n        try {\r\n            File file = ResourceUtils.getFile(path);\r\n            return new String(Files.readAllBytes(file.toPath()));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return null;\r\n    }","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>With Spring you could easily read it from the resources folder (either main/resources or test/resources):</p>\n\n<p>For example create a file: <code>test/resources/subfolder/sample.json</code></p>\n\n<pre><code>@Test\npublic void testReadFile() {\n    String json = this.readFile(\"classpath:subfolder/sample.json\");\n    System.out.println(json);\n}\n\npublic String readFile(String path) {\n    try {\n        File file = ResourceUtils.getFile(path);\n        return new String(Files.readAllBytes(file.toPath()));\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5588556,"reputation":8451,"user_id":4428471,"accept_rate":46,"display_name":"zhuguowei"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1592303657,"creation_date":1591325026,"answer_id":62207262,"question_id":28673651,"body_markdown":"```\r\nList&lt;String&gt; lines = Files.readAllLines(Paths.get(&quot;src/test/resources/foo.txt&quot;));\r\nlines.forEach(System.out::println);\r\n```","title":"How to get the path of src/test/resources directory in JUnit?","body":"<pre><code>List&lt;String&gt; lines = Files.readAllLines(Paths.get(\"src/test/resources/foo.txt\"));\nlines.forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6283683,"reputation":3277,"user_id":4883754,"display_name":"Jess Chen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603445639,"creation_date":1603445639,"answer_id":64497516,"question_id":28673651,"body_markdown":"With Spring, you can use this:\r\n```java\r\nimport org.springframework.core.io.ClassPathResource;\r\n\r\n// Don&#39;t worry when use a not existed directory or a empty directory\r\n// It can be used in @before\r\nString dir = new ClassPathResource(&quot;.&quot;).getFile().getAbsolutePath()+&quot;/&quot;+&quot;Your Path&quot;;\r\n```","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>With Spring, you can use this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.core.io.ClassPathResource;\n\n// Don't worry when use a not existed directory or a empty directory\n// It can be used in @before\nString dir = new ClassPathResource(&quot;.&quot;).getFile().getAbsolutePath()+&quot;/&quot;+&quot;Your Path&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5344220,"reputation":57,"user_id":4906168,"display_name":"Timur  Nurmagambetov"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1613828892,"creation_date":1613828892,"answer_id":66292293,"question_id":28673651,"body_markdown":"You can get where you are through\r\n\r\n    new File(&quot;.&quot;).getAbsolutePath()\r\n\r\nthen you can derive path to src/test/resources  \r\nusually it is just \r\n\r\n    new File(&quot;src/test/resources&quot;)\r\n\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>You can get where you are through</p>\n<pre><code>new File(&quot;.&quot;).getAbsolutePath()\n</code></pre>\n<p>then you can derive path to src/test/resources<br />\nusually it is just</p>\n<pre><code>new File(&quot;src/test/resources&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1015589,"reputation":1607,"user_id":2746335,"accept_rate":29,"display_name":"caduceus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637733053,"creation_date":1637733053,"answer_id":70091292,"question_id":28673651,"body_markdown":"Wow the correct answer is not here yet!\r\n\r\n    MyClass.class.getResource(&quot;/somefile&quot;);\r\n    MyClass.class.getResourceAsStream(&quot;/somefile&quot;);\r\n\r\nhttps://javachannel.org/posts/how-to-access-static-resources/\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Wow the correct answer is not here yet!</p>\n<pre><code>MyClass.class.getResource(&quot;/somefile&quot;);\nMyClass.class.getResourceAsStream(&quot;/somefile&quot;);\n</code></pre>\n<p><a href=\"https://javachannel.org/posts/how-to-access-static-resources/\" rel=\"nofollow noreferrer\">https://javachannel.org/posts/how-to-access-static-resources/</a></p>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694159928,"creation_date":1694159604,"answer_id":77065083,"question_id":28673651,"body_markdown":"Here is some helper functions when using Kotlin language:\r\n\r\n```kotlin\r\nprivate val resourceAccessor = object {}\r\n\r\nfun getResourceAsPath(name: String): Path = resourceAccessor\r\n    .javaClass\r\n    .getResource(&quot;/$name&quot;)!!\r\n    .toURI()\r\n    .toPath()\r\n\r\nfun getResourceAsURL(name: String): URL {\r\n    val testResourcesDirectory = Path(&quot;src/test/resources&quot;).absolutePathString()\r\n    return URL(&quot;file:$testResourcesDirectory/$name&quot;)\r\n}\r\n```\r\n\r\n```kotlin\r\nclass MyTests {\r\n    @Test\r\n    fun myTest() {\r\n        val myResource = getResourceAsPath(&quot;file.txt&quot;)\r\n        val absolutePath = myResource.absolutePathString()\r\n    }\r\n}\r\n```","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Here is some helper functions when using Kotlin language:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private val resourceAccessor = object {}\n\nfun getResourceAsPath(name: String): Path = resourceAccessor\n    .javaClass\n    .getResource(&quot;/$name&quot;)!!\n    .toURI()\n    .toPath()\n\nfun getResourceAsURL(name: String): URL {\n    val testResourcesDirectory = Path(&quot;src/test/resources&quot;).absolutePathString()\n    return URL(&quot;file:$testResourcesDirectory/$name&quot;)\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MyTests {\n    @Test\n    fun myTest() {\n        val myResource = getResourceAsPath(&quot;file.txt&quot;)\n        val absolutePath = myResource.absolutePathString()\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5083509,"reputation":4080,"user_id":4477923,"accept_rate":69,"display_name":"Rory"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511965,"favorite_count":0,"down_vote_count":0,"up_vote_count":332,"accepted_answer_id":28674230,"answer_count":17,"score":332,"last_activity_date":1694159928,"creation_date":1424693882,"question_id":28673651,"body_markdown":"I know I can load a file from src/test/resources with:\r\n\r\n    getClass().getResource(&quot;somefile&quot;).getFile()\r\n\r\nBut how can I get the full path to the src/test/resources **directory**, i.e. I don&#39;t want to load a file, I just want to know the path of the directory?\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>I know I can load a file from src/test/resources with:</p>\n<pre><code>getClass().getResource(&quot;somefile&quot;).getFile()\n</code></pre>\n<p>But how can I get the full path to the src/test/resources <strong>directory</strong>, i.e. I don't want to load a file, I just want to know the path of the directory?</p>\n"},{"tags":["java","ssl","smtp","jakarta-mail"],"owner":{"account_id":29386174,"reputation":11,"user_id":22515575,"display_name":"Peter M&#252;ller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694159719,"creation_date":1694089602,"question_id":77059615,"body_markdown":"I am trying to send an email with jakarta mail, with tls and checkserveridentity but it fails with an exception:\r\n\r\n`jakarta.mail.MessagingException: Could not convert socket to TLS;\r\n  nested exception is:\r\n\tjava.io.IOException: Can&#39;t verify identity of server: XXXXXXXXXXX.com\r\n\tat org.eclipse.angus.mail@2.0.2/org.eclipse.angus.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:2173)`\r\n\r\nwhen i dig deeper it happens in the org.eclipse.angus.mail.util.SocketFetcher class:\r\n\r\n`java.lang.IllegalAccessException: class org.eclipse.angus.mail.util.SocketFetcher (in module org.eclipse.angus.mail) cannot access class sun.security.util.HostnameChecker (in module java.base) because module java.base does not export sun.security.util to module org.eclipse.angus.mail`\r\n\r\n\r\n\r\n\r\n\r\nI tried with Java jdk 11 and 17\r\nI&#39;m using jakarta.mail-api-2.1.2, jakarta.activation-api-2.1.2, angus-mail-2.0.2, angus-activation-2.0.1\r\n\r\nI found a bug report which seems similar but doesnt help:\r\n[text](https://github.com/jakartaee/mail-api/issues/391)\r\n\r\nMy code is: \r\n\r\n```\r\n        String to = &quot;some1@mail.com&quot;;\r\n        String from = &quot;some1@mail.com&quot;;\r\n        String host = &quot;mail.host.com&quot;;\r\n        final String username = &quot;some1@mail.com&quot;;\r\n        final String password = &quot;somePWD&quot;;\r\n \r\n\r\n        Properties properties = System.getProperties();\r\n        properties.setProperty(&quot;mail.smtp.host&quot;, host);\r\n        properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n        properties.setProperty(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n        properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;true&quot;);\r\n        properties.setProperty(&quot;mail.smtp.port&quot;, &quot;587&quot;);\r\n        properties.setProperty(&quot;mail.debug&quot;, &quot;true&quot;);\r\n        \r\n\t\tSession session = Session.getDefaultInstance(properties, new Authenticator() {\r\n             \r\n            protected PasswordAuthentication\r\n                    getPasswordAuthentication() {\r\n                return new PasswordAuthentication(username, password);\r\n            }\r\n        });\r\n\t \r\n\r\n\t\ttry {\r\n\t\t    MimeMessage message = new MimeMessage(session);\r\n\t\t     \r\n\t\t    // header field of the header.\r\n\t\t    message.setFrom(new InternetAddress(from));\r\n\t\t     \r\n\t\t    message.addRecipient(Message.RecipientType.TO,\r\n\t\t                          new InternetAddress(to));\r\n\t\t    message.setSubject(&quot;subject&quot;);\r\n\t\t    message.setText(&quot;Test mail&quot;);\r\n\t\t    // Send message\r\n\t\t    Transport.send(message, username, password);\r\n\t\t}\r\n\t\tcatch (MessagingException mex) {\r\n\t\t    mex.printStackTrace();\r\n\t\t}\r\n```\r\n\r\nWithout checkserveridentity it just works fine (properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;false&quot;).\r\n\r\nThe host uses a let&#39;s enrcypt certificate which is in my default truststore, so this shouldn&#39;t be the problem. \r\n\r\nDoes anyone have any suggestion, workarounds, bugfixes, new versions?","title":"jakarta mail with TLS and checkserver identity problem","body":"<p>I am trying to send an email with jakarta mail, with tls and checkserveridentity but it fails with an exception:</p>\n<p><code>jakarta.mail.MessagingException: Could not convert socket to TLS; nested exception is: java.io.IOException: Can't verify identity of server: XXXXXXXXXXX.com at org.eclipse.angus.mail@2.0.2/org.eclipse.angus.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:2173)</code></p>\n<p>when i dig deeper it happens in the org.eclipse.angus.mail.util.SocketFetcher class:</p>\n<p><code>java.lang.IllegalAccessException: class org.eclipse.angus.mail.util.SocketFetcher (in module org.eclipse.angus.mail) cannot access class sun.security.util.HostnameChecker (in module java.base) because module java.base does not export sun.security.util to module org.eclipse.angus.mail</code></p>\n<p>I tried with Java jdk 11 and 17\nI'm using jakarta.mail-api-2.1.2, jakarta.activation-api-2.1.2, angus-mail-2.0.2, angus-activation-2.0.1</p>\n<p>I found a bug report which seems similar but doesnt help:\n<a href=\"https://github.com/jakartaee/mail-api/issues/391\" rel=\"nofollow noreferrer\">text</a></p>\n<p>My code is:</p>\n<pre><code>        String to = &quot;some1@mail.com&quot;;\n        String from = &quot;some1@mail.com&quot;;\n        String host = &quot;mail.host.com&quot;;\n        final String username = &quot;some1@mail.com&quot;;\n        final String password = &quot;somePWD&quot;;\n \n\n        Properties properties = System.getProperties();\n        properties.setProperty(&quot;mail.smtp.host&quot;, host);\n        properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n        properties.setProperty(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n        properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;true&quot;);\n        properties.setProperty(&quot;mail.smtp.port&quot;, &quot;587&quot;);\n        properties.setProperty(&quot;mail.debug&quot;, &quot;true&quot;);\n        \n        Session session = Session.getDefaultInstance(properties, new Authenticator() {\n             \n            protected PasswordAuthentication\n                    getPasswordAuthentication() {\n                return new PasswordAuthentication(username, password);\n            }\n        });\n     \n\n        try {\n            MimeMessage message = new MimeMessage(session);\n             \n            // header field of the header.\n            message.setFrom(new InternetAddress(from));\n             \n            message.addRecipient(Message.RecipientType.TO,\n                                  new InternetAddress(to));\n            message.setSubject(&quot;subject&quot;);\n            message.setText(&quot;Test mail&quot;);\n            // Send message\n            Transport.send(message, username, password);\n        }\n        catch (MessagingException mex) {\n            mex.printStackTrace();\n        }\n</code></pre>\n<p>Without checkserveridentity it just works fine (properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;false&quot;).</p>\n<p>The host uses a let's enrcypt certificate which is in my default truststore, so this shouldn't be the problem.</p>\n<p>Does anyone have any suggestion, workarounds, bugfixes, new versions?</p>\n"},{"tags":["java","redirectstandardoutput"],"answers":[{"tags":[],"owner":{"account_id":5967909,"reputation":2992,"user_id":4993125,"accept_rate":48,"display_name":"Michael Lafayette"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694153906,"creation_date":1438099349,"answer_id":31681587,"question_id":31680099,"body_markdown":"I don&#39;t think so. The `PrintSteam` `System.err` does not appear to be modifiable and I do not see any way for `java.lang.System.setErr` to convey this functionality. ","title":"Disabling auto flush on standard error (Java)","body":"<p>I don't think so. The <code>PrintSteam</code> <code>System.err</code> does not appear to be modifiable and I do not see any way for <code>java.lang.System.setErr</code> to convey this functionality.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694159367,"creation_date":1694158994,"answer_id":77065022,"question_id":31680099,"body_markdown":"I think that OP&#39;s self-answer is incorrect.  \r\n\r\nThe answer is correct that `System.err` is not *directly* modifiable, and that `PrintStream` doesn&#39;t offer a way to toggle the autoflush setting.\r\n\r\nHowever, if you study the source code for `java.lang.System` you will notice that the default `err` stream is set to a `PrintStream` that is created with `autoFlush` set to `true`.  If you dig further you will see that this print stream wraps a `FileOutputStream` created for the `FileDescriptor.err` fd.\r\n\r\nAnd `System.setErr` is provided for cases where you need to update the (`final`) `System.err` variable.\r\n\r\nSo, you *should* be able to do this:\r\n\r\n       FileOutputStream fos = new FileOutputStream(FileDescriptor.err);\r\n       BufferedOutputStream bos = new BufferedOutputStream(fos);\r\n       String encoding = ...\r\n       PrintStream myErr = new PrintStream(bos, false, encoding);\r\n       System.setErr(myErr);\r\n\r\n-----------------\r\n\r\nI am not saying that this is a good idea though.\r\n\r\n&lt;sup&gt;It would even be possible to use reflection to break abstraction on the initial `PrintStream` in `System.err` and change the private `autoFlush` variable.  But that is **a bad idea** ... and I only mentioned it to point this out!&lt;/sup&gt;","title":"Disabling auto flush on standard error (Java)","body":"<p>I think that OP's self-answer is incorrect.</p>\n<p>The answer is correct that <code>System.err</code> is not <em>directly</em> modifiable, and that <code>PrintStream</code> doesn't offer a way to toggle the autoflush setting.</p>\n<p>However, if you study the source code for <code>java.lang.System</code> you will notice that the default <code>err</code> stream is set to a <code>PrintStream</code> that is created with <code>autoFlush</code> set to <code>true</code>.  If you dig further you will see that this print stream wraps a <code>FileOutputStream</code> created for the <code>FileDescriptor.err</code> fd.</p>\n<p>And <code>System.setErr</code> is provided for cases where you need to update the (<code>final</code>) <code>System.err</code> variable.</p>\n<p>So, you <em>should</em> be able to do this:</p>\n<pre><code>   FileOutputStream fos = new FileOutputStream(FileDescriptor.err);\n   BufferedOutputStream bos = new BufferedOutputStream(fos);\n   String encoding = ...\n   PrintStream myErr = new PrintStream(bos, false, encoding);\n   System.setErr(myErr);\n</code></pre>\n<hr />\n<p>I am not saying that this is a good idea though.</p>\n<p><sup>It would even be possible to use reflection to break abstraction on the initial <code>PrintStream</code> in <code>System.err</code> and change the private <code>autoFlush</code> variable.  But that is <strong>a bad idea</strong> ... and I only mentioned it to point this out!</sup></p>\n"}],"owner":{"account_id":5967909,"reputation":2992,"user_id":4993125,"accept_rate":48,"display_name":"Michael Lafayette"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31681587,"answer_count":2,"score":1,"last_activity_date":1694159367,"creation_date":1438095629,"question_id":31680099,"body_markdown":"My standard error error and standard output are getting garbled and I want to be able to put &quot;\\n&quot; newline characters into standard error bound output without it auto-flushing. Is this physically possible in Java?","title":"Disabling auto flush on standard error (Java)","body":"<p>My standard error error and standard output are getting garbled and I want to be able to put \"\\n\" newline characters into standard error bound output without it auto-flushing. Is this physically possible in Java?</p>\n"},{"tags":["java","android","eclipse","swing","firebase-analytics"],"comments":[{"owner":{"account_id":16646173,"reputation":65,"user_id":12030436,"display_name":"outsidethecave"},"score":0,"creation_date":1612116742,"post_id":65982536,"comment_id":116660498,"body_markdown":"I haven&#39;t found anything this specific on the Firebase documentation","body":"I haven&#39;t found anything this specific on the Firebase documentation"},{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":1,"creation_date":1612116851,"post_id":65982536,"comment_id":116660526,"body_markdown":"i think i understand what you&#39;re asking now, you&#39;re asking if there&#39;s a java (not android) equivalent of the analytics library, right ?","body":"i think i understand what you&#39;re asking now, you&#39;re asking if there&#39;s a java (not android) equivalent of the analytics library, right ?"},{"owner":{"account_id":13479916,"reputation":529,"user_id":9725562,"display_name":"Anshul1507"},"score":0,"creation_date":1612117829,"post_id":65982536,"comment_id":116660829,"body_markdown":"@a_local_nobody he is asking to show the analytics stats in an external desktop application instead of the firebase dashboard.","body":"@a_local_nobody he is asking to show the analytics stats in an external desktop application instead of the firebase dashboard."},{"owner":{"account_id":16646173,"reputation":65,"user_id":12030436,"display_name":"outsidethecave"},"score":0,"creation_date":1612123233,"post_id":65982536,"comment_id":116662347,"body_markdown":"@Anshul1507 yes, are you aware of any way to do it?","body":"@Anshul1507 yes, are you aware of any way to do it?"}],"answers":[{"tags":[],"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694159322,"creation_date":1694159322,"answer_id":77065054,"question_id":65982536,"body_markdown":"You should be able to query your analytics data from the [Analytics Data API][1] in your Java Swing desktop app.\r\n\r\n\r\n  [1]: https://developers.google.com/analytics/devguides/reporting/data/v1","title":"Can I use Firebase Analytics to fetch data from an Android app and show it on a Java Swing desktop app?","body":"<p>You should be able to query your analytics data from the <a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1\" rel=\"nofollow noreferrer\">Analytics Data API</a> in your Java Swing desktop app.</p>\n"}],"owner":{"account_id":16646173,"reputation":65,"user_id":12030436,"display_name":"outsidethecave"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694159322,"creation_date":1612116339,"question_id":65982536,"body_markdown":"I have an Android application which is a social network based on movies. People can search for movies and create personalized movie lists, but also add friends and use basic social media functionalities.\r\n\r\nI already use FirebaseFirestore as a database and FirebaseAuth to authenticate users, but I would like to be able to use Analytics in order to store data such as number of users, number of movie searches, most popular movies etc.\r\n\r\nMy question is: can I view these statistics on a completely separate desktop app, built in Java Swing on Eclipse, which would act as a sort of admin console for my application? ","title":"Can I use Firebase Analytics to fetch data from an Android app and show it on a Java Swing desktop app?","body":"<p>I have an Android application which is a social network based on movies. People can search for movies and create personalized movie lists, but also add friends and use basic social media functionalities.</p>\n<p>I already use FirebaseFirestore as a database and FirebaseAuth to authenticate users, but I would like to be able to use Analytics in order to store data such as number of users, number of movie searches, most popular movies etc.</p>\n<p>My question is: can I view these statistics on a completely separate desktop app, built in Java Swing on Eclipse, which would act as a sort of admin console for my application?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-batch"],"comments":[{"owner":{"account_id":957259,"reputation":29625,"user_id":982341,"display_name":"GreyBeardedGeek"},"score":0,"creation_date":1671307595,"post_id":74837045,"comment_id":132073142,"body_markdown":"Hi, welcome! \nStackOverflow is intended to provide answers to specific technical questions.\nFew people, if any, are going to take what looks like your entire environment and codebase, and debug it for you. So, if you could do some debugging, some simplification, and find the specific problem, then maybe someone can help...","body":"Hi, welcome!  StackOverflow is intended to provide answers to specific technical questions. Few people, if any, are going to take what looks like your entire environment and codebase, and debug it for you. So, if you could do some debugging, some simplification, and find the specific problem, then maybe someone can help..."}],"answers":[{"comments":[{"owner":{"account_id":21020065,"reputation":21,"user_id":15446615,"display_name":"David Williford"},"score":0,"creation_date":1671384796,"post_id":74838356,"comment_id":132083433,"body_markdown":"I tried this, and still no result sadly. Nothing is printed to console. I also tried FAILED and UNKNOWN as well.","body":"I tried this, and still no result sadly. Nothing is printed to console. I also tried FAILED and UNKNOWN as well."}],"tags":[],"owner":{"account_id":18394722,"reputation":27,"user_id":13399509,"display_name":"Francisco Valadares"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671323644,"creation_date":1671322877,"answer_id":74838356,"question_id":74837045,"body_markdown":"Please, could you check if the method &quot;afterJob&quot; is doing/happening other status as BatchStatus. ABANDONED?\r\n\r\n   \r\n\r\n     public void afterJob(JobExecution jobExecution) {\r\n            if (jobExecution.getStatus() == BatchStatus.ABANDONED) {\r\n    ...\r\n\r\n","title":"Spring Batch job not being called in Spring Boot","body":"<p>Please, could you check if the method &quot;afterJob&quot; is doing/happening other status as BatchStatus. ABANDONED?</p>\n<pre><code> public void afterJob(JobExecution jobExecution) {\n        if (jobExecution.getStatus() == BatchStatus.ABANDONED) {\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21083132,"reputation":3240,"user_id":15496965,"display_name":"Henning"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671409645,"creation_date":1671409645,"answer_id":74845329,"question_id":74837045,"body_markdown":"Please try removing the annotation `@EnableBatchProcessing`.\r\n\r\nAs you&#39;re importing from the jakarta namespace, I assume you&#39;re using Spring Boot 3 and Spring Batch 5.\r\n\r\nWith Spring Boot 3, the Spring Batch annotation `@EnableBatchProcessing` now has the effect of disabling the auto-configuration for Spring Batch. If you expect that the exposed `Job` is automatically started on application start-up, then it&#39;s this auto-configuration that you&#39;re missing.","title":"Spring Batch job not being called in Spring Boot","body":"<p>Please try removing the annotation <code>@EnableBatchProcessing</code>.</p>\n<p>As you're importing from the jakarta namespace, I assume you're using Spring Boot 3 and Spring Batch 5.</p>\n<p>With Spring Boot 3, the Spring Batch annotation <code>@EnableBatchProcessing</code> now has the effect of disabling the auto-configuration for Spring Batch. If you expect that the exposed <code>Job</code> is automatically started on application start-up, then it's this auto-configuration that you're missing.</p>\n"}],"owner":{"account_id":21020065,"reputation":21,"user_id":15446615,"display_name":"David Williford"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1461,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694158481,"creation_date":1671306668,"question_id":74837045,"body_markdown":"I am trying to run a Spring Batch job that takes in a CSV file and writes it into a HSQL imbedded database. My program is supposed to log when each row of the CSV is added to the DB, but it is not.I am getting no errors when running, but I know the job is not being called since it is not logging anything into my console.\r\n\r\n[This is my file system](https://i.stack.imgur.com/BDajC.png)\r\n\r\nThis is my BatchConfig.java (defines the Batch Job)\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.data;\r\n\r\nimport javax.sql.DataSource;\r\n\r\nimport org.springframework.batch.core.Job;\r\nimport org.springframework.batch.core.Step;\r\nimport org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\r\nimport org.springframework.batch.core.job.builder.JobBuilder;\r\nimport org.springframework.batch.core.launch.support.RunIdIncrementer;\r\nimport org.springframework.batch.core.repository.JobRepository;\r\nimport org.springframework.batch.core.step.builder.StepBuilder;\r\nimport org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider;\r\nimport org.springframework.batch.item.database.JdbcBatchItemWriter;\r\nimport org.springframework.batch.item.database.builder.JdbcBatchItemWriterBuilder;\r\nimport org.springframework.batch.item.file.FlatFileItemReader;\r\nimport org.springframework.batch.item.file.builder.FlatFileItemReaderBuilder;\r\nimport org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.io.ClassPathResource;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\n\r\nimport io.davidwilliford.wcdashboard.model.Match;\r\n\r\n/**\r\n * Configuration class for our Batch I/O\r\n * \r\n * Reads, Processes and Writes from CSV file\r\n * Called for every line in our CSV\r\n */\r\n\r\n@Configuration\r\n@EnableBatchProcessing\r\n@ComponentScan(&quot;io.davidwilliford&quot;)\r\npublic class BatchConfig {\r\n\r\n    // includes EVERY field of CSV file\r\n    private final String[] FIELD_NAMES = new String[] {\r\n            &quot;match&quot;, &quot;dayofweek&quot;, &quot;match_time&quot;, &quot;home_team&quot;, &quot;away_team&quot;, &quot;home_xg&quot;, &quot;away_xg&quot;, &quot;score&quot;, &quot;attendance&quot;,\r\n            &quot;venue&quot;, &quot;referee&quot;, &quot;home_formation&quot;, &quot;away_formation&quot;, &quot;home_captain&quot;, &quot;away_captain&quot;, &quot;home_manager&quot;,\r\n            &quot;away_manager&quot;, &quot;home_possession&quot;, &quot;away_possession&quot;, &quot;home_completed_passes&quot;, &quot;home_attempted_pases&quot;,\r\n            &quot;away_completed_passes&quot;, &quot;away_attempted_pases&quot;, &quot;home_sot&quot;, &quot;away_sot&quot;, &quot;home_total_shots&quot;,\r\n            &quot;away_total_shots&quot;, &quot;home_saves&quot;, &quot;away_saves&quot;, &quot;home_fouls&quot;, &quot;away_fouls&quot;, &quot;home_corners&quot;, &quot;away_corners&quot;,\r\n            &quot;home_crosses&quot;, &quot;away_crosses&quot;, &quot;home_touches&quot;, &quot;away_touches&quot;, &quot;home_tackles&quot;, &quot;away_tackles&quot;,\r\n            &quot;home_interceptions&quot;, &quot;away_interceptions&quot;, &quot;home_aerials_won&quot;, &quot;away_aerials_won&quot;, &quot;home_clearances&quot;,\r\n            &quot;away_clearances&quot;, &quot;home_offsides&quot;, &quot;away_offsides&quot;, &quot;home_gks&quot;, &quot;away_gks&quot;, &quot;home_throw_ins&quot;,\r\n            &quot;away_throw_ins&quot;, &quot;home_long_balls&quot;, &quot;away_long_balls&quot;\r\n    };\r\n\r\n    /**\r\n     * Reader\r\n     * \r\n     * Reads from CSV file\r\n     * And turns into MatchInput object\r\n     */\r\n    @Bean\r\n    public FlatFileItemReader&lt;MatchInput&gt; reader() {\r\n        return new FlatFileItemReaderBuilder&lt;MatchInput&gt;()\r\n                .name(&quot;MatchItemReader&quot;)\r\n                .resource(new ClassPathResource(&quot;match-data.csv&quot;))\r\n                .linesToSkip(1)\r\n                .delimited()\r\n                .names(FIELD_NAMES)\r\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;MatchInput&gt;() {\r\n                    {\r\n                        setTargetType(MatchInput.class);\r\n                    }\r\n                })\r\n                .build();\r\n    }\r\n\r\n    /**\r\n     * Processor\r\n     * \r\n     * Takes in MatchInput objects and makes Match objects\r\n     * Is encapsulated into its own class\r\n     */\r\n    @Bean\r\n    public MatchDataProcessor processor() {\r\n        return new MatchDataProcessor();\r\n    }\r\n\r\n    /**\r\n     * Writer\r\n     * \r\n     * Writes the information into Match objects\r\n     */\r\n    @Bean\r\n    public JdbcBatchItemWriter&lt;Match&gt; writer(DataSource dataSource) {\r\n        return new JdbcBatchItemWriterBuilder&lt;Match&gt;()\r\n                .itemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;())\r\n                .sql(&quot;INSERT INTO matches (id, dayofweek, match_time, home_team, away_team, home_score, away_score, attendance, venue, referee, home_captain, away_captain,  home_manager, away_manager, home_total_shots, away_total_shots) &quot;\r\n                        +\r\n                        &quot;VALUES (:id, :dayofweek, :match_time, :home_team, :away_team, :home_score, :away_score, :attendance, :venue, :referee, :home_captain, :away_captain, : home_manager, :away_manager, :home_total_shots, :away_total_shots)&quot;)\r\n                .dataSource(dataSource)\r\n                .build();\r\n    }\r\n\r\n    /**\r\n     * Create a Job whose steps are to Read, Process and Write\r\n     */\r\n    @Bean\r\n    public Job importUserJob(JobRepository jobRepository, JobCompletionNotificationListener listener, Step step1) {\r\n        return new JobBuilder(&quot;importUserJob&quot;, jobRepository)\r\n                .incrementer(new RunIdIncrementer())\r\n                .listener(listener)\r\n                .flow(step1)\r\n                .end()\r\n                .build();\r\n    }\r\n\r\n    /**\r\n     * This is the step for the above job\r\n     * Calls reader, processor and writer (written above)\r\n     */\r\n    @Bean\r\n    public Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager,\r\n            JdbcBatchItemWriter&lt;Match&gt; writer) {\r\n        return new StepBuilder(&quot;step1&quot;, jobRepository)\r\n                .&lt;MatchInput, Match&gt;chunk(10, transactionManager)\r\n                .reader(reader())\r\n                .processor(processor())\r\n                .writer(writer)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nThis is my MatchInput.java class\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.data;\r\n\r\n/**\r\n * Class for match input\r\n * \r\n * Match will work as our Id\r\n * In total, there are 63 matches\r\n */\r\n\r\npublic class MatchInput {\r\n\r\n    /**\r\n     * Class attributes\r\n     */\r\n    private String match;\r\n    private String dayofweek;\r\n    private String match_time;\r\n    private String home_team;\r\n    private String away_team;\r\n    private String home_xg;\r\n    private String away_xg;\r\n    private String score;\r\n    private String attendance;\r\n    private String venue;\r\n    private String referee;\r\n    private String home_formation;\r\n    private String away_formation;\r\n    private String home_captain;\r\n    private String away_captain;\r\n    private String home_manager;\r\n    private String away_manager;\r\n    private String home_possession;\r\n    private String away_possession;\r\n    private String home_completed_passes;\r\n    private String home_attempted_pases;\r\n    private String away_completed_passes;\r\n    private String away_attempted_pases;\r\n    private String home_sot;\r\n    private String away_sot;\r\n    private String home_total_shots;\r\n    private String away_total_shots;\r\n    private String home_saves;\r\n    private String away_saves;\r\n    private String home_fouls;\r\n    private String away_fouls;\r\n    private String home_corners;\r\n    private String away_corners;\r\n    private String home_crosses;\r\n    private String away_crosses;\r\n    private String home_touches;\r\n    private String away_touches;\r\n    private String home_tackles;\r\n    private String away_tackles;\r\n    private String home_interceptions;\r\n    private String away_interceptions;\r\n    private String home_aerials_won;\r\n    private String away_aerials_won;\r\n    private String home_clearances;\r\n    private String away_clearances;\r\n    private String home_offsides;\r\n    private String away_offsides;\r\n    private String home_gks;\r\n    private String away_gks;\r\n    private String home_throw_ins;\r\n    private String away_throw_ins;\r\n    private String home_long_balls;\r\n    private String away_long_balls;\r\n   \r\n    // purposely left out getters and setters since they arent important \r\n\r\n}\r\n```\r\n\r\nThis is my Match.java model class\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.model;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n/**\r\n * This is the model class for all of our matches\r\n * \r\n * @Entity creates a table with this class\r\n */\r\n@Entity\r\n@Table(name = &quot;matches&quot;)\r\npublic class Match {\r\n\r\n    /**\r\n     * Class attributes\r\n     */\r\n\r\n    @Id\r\n    private int id;\r\n    private String dayofweek;\r\n    private String match_time;\r\n    private String home_team;\r\n    private String away_team;\r\n    private String home_score;\r\n    private String away_score;\r\n    private String attendance;\r\n    private String venue;\r\n    private String referee;\r\n    private String home_captain;\r\n    private String away_captain;\r\n    private String home_manager;\r\n    private String away_manager;\r\n    private String home_total_shots;\r\n    private String away_total_shots;\r\n\r\n    /**\r\n     * toString method\r\n     */\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Home Team: &quot; + this.home_team + &quot;, Away Team: &quot; + this.away_team;\r\n    }\r\n\r\n    /**\r\n     * Getters and Setters\r\n     */\r\n\r\n    public long getId() {\r\n\r\n}\r\n```\r\n\r\nAnd this is my JobCompleteNotificationListener.java class\r\n\r\nThis class is supposed to log the names from the home and away team upon completetion.\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.data;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.batch.core.BatchStatus;\r\nimport org.springframework.batch.core.JobExecution;\r\nimport org.springframework.batch.core.JobExecutionListener;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class JobCompletionNotificationListener implements JobExecutionListener {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(JobCompletionNotificationListener.class);\r\n\r\n    private final JdbcTemplate jdbcTemplate;\r\n\r\n    @Autowired\r\n    public JobCompletionNotificationListener(JdbcTemplate jdbcTemplate) {\r\n        this.jdbcTemplate = jdbcTemplate;\r\n    }\r\n\r\n    /**\r\n     * After job is complete,\r\n     * Return and print the 2 teams, and the time\r\n     */\r\n    @Override\r\n    public void afterJob(JobExecution jobExecution) {\r\n        if (jobExecution.getStatus() == BatchStatus.COMPLETED) {\r\n            log.info(&quot;!!! JOB FINISHED! Time to verify the results&quot;);\r\n\r\n            jdbcTemplate.query(&quot;SELECT home_team, away_team FROM match&quot;,\r\n                    (rs, row) -&gt; &quot;Home Team: &quot; + rs.getString(1) + &quot; Away Team: &quot;\r\n                            + rs.getString(2))\r\n                    .forEach(str -&gt; System.out.println(str));\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNothing logs in my console when I run the spring boot application. Hopefully this is enough information, I can provide more if needed. Sincerely, thanks for anyone willing to help.\r\n\r\nThis program is intended to take in a CSV (2022 World Cup information) and imbed it into a HSQL embedded database within a Spring Boot application. I have followed the official Spring Boot guide for completing a Spring Batch Job (here: https://spring.io/guides/gs/batch-processing/ ) and have had no luck so far.","title":"Spring Batch job not being called in Spring Boot","body":"<p>I am trying to run a Spring Batch job that takes in a CSV file and writes it into a HSQL imbedded database. My program is supposed to log when each row of the CSV is added to the DB, but it is not.I am getting no errors when running, but I know the job is not being called since it is not logging anything into my console.</p>\n<p><a href=\"https://i.stack.imgur.com/BDajC.png\" rel=\"nofollow noreferrer\">This is my file system</a></p>\n<p>This is my BatchConfig.java (defines the Batch Job)</p>\n<pre><code>package io.davidwilliford.wcdashboard.data;\n\nimport javax.sql.DataSource;\n\nimport org.springframework.batch.core.Job;\nimport org.springframework.batch.core.Step;\nimport org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\nimport org.springframework.batch.core.job.builder.JobBuilder;\nimport org.springframework.batch.core.launch.support.RunIdIncrementer;\nimport org.springframework.batch.core.repository.JobRepository;\nimport org.springframework.batch.core.step.builder.StepBuilder;\nimport org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider;\nimport org.springframework.batch.item.database.JdbcBatchItemWriter;\nimport org.springframework.batch.item.database.builder.JdbcBatchItemWriterBuilder;\nimport org.springframework.batch.item.file.FlatFileItemReader;\nimport org.springframework.batch.item.file.builder.FlatFileItemReaderBuilder;\nimport org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.transaction.PlatformTransactionManager;\n\nimport io.davidwilliford.wcdashboard.model.Match;\n\n/**\n * Configuration class for our Batch I/O\n * \n * Reads, Processes and Writes from CSV file\n * Called for every line in our CSV\n */\n\n@Configuration\n@EnableBatchProcessing\n@ComponentScan(&quot;io.davidwilliford&quot;)\npublic class BatchConfig {\n\n    // includes EVERY field of CSV file\n    private final String[] FIELD_NAMES = new String[] {\n            &quot;match&quot;, &quot;dayofweek&quot;, &quot;match_time&quot;, &quot;home_team&quot;, &quot;away_team&quot;, &quot;home_xg&quot;, &quot;away_xg&quot;, &quot;score&quot;, &quot;attendance&quot;,\n            &quot;venue&quot;, &quot;referee&quot;, &quot;home_formation&quot;, &quot;away_formation&quot;, &quot;home_captain&quot;, &quot;away_captain&quot;, &quot;home_manager&quot;,\n            &quot;away_manager&quot;, &quot;home_possession&quot;, &quot;away_possession&quot;, &quot;home_completed_passes&quot;, &quot;home_attempted_pases&quot;,\n            &quot;away_completed_passes&quot;, &quot;away_attempted_pases&quot;, &quot;home_sot&quot;, &quot;away_sot&quot;, &quot;home_total_shots&quot;,\n            &quot;away_total_shots&quot;, &quot;home_saves&quot;, &quot;away_saves&quot;, &quot;home_fouls&quot;, &quot;away_fouls&quot;, &quot;home_corners&quot;, &quot;away_corners&quot;,\n            &quot;home_crosses&quot;, &quot;away_crosses&quot;, &quot;home_touches&quot;, &quot;away_touches&quot;, &quot;home_tackles&quot;, &quot;away_tackles&quot;,\n            &quot;home_interceptions&quot;, &quot;away_interceptions&quot;, &quot;home_aerials_won&quot;, &quot;away_aerials_won&quot;, &quot;home_clearances&quot;,\n            &quot;away_clearances&quot;, &quot;home_offsides&quot;, &quot;away_offsides&quot;, &quot;home_gks&quot;, &quot;away_gks&quot;, &quot;home_throw_ins&quot;,\n            &quot;away_throw_ins&quot;, &quot;home_long_balls&quot;, &quot;away_long_balls&quot;\n    };\n\n    /**\n     * Reader\n     * \n     * Reads from CSV file\n     * And turns into MatchInput object\n     */\n    @Bean\n    public FlatFileItemReader&lt;MatchInput&gt; reader() {\n        return new FlatFileItemReaderBuilder&lt;MatchInput&gt;()\n                .name(&quot;MatchItemReader&quot;)\n                .resource(new ClassPathResource(&quot;match-data.csv&quot;))\n                .linesToSkip(1)\n                .delimited()\n                .names(FIELD_NAMES)\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;MatchInput&gt;() {\n                    {\n                        setTargetType(MatchInput.class);\n                    }\n                })\n                .build();\n    }\n\n    /**\n     * Processor\n     * \n     * Takes in MatchInput objects and makes Match objects\n     * Is encapsulated into its own class\n     */\n    @Bean\n    public MatchDataProcessor processor() {\n        return new MatchDataProcessor();\n    }\n\n    /**\n     * Writer\n     * \n     * Writes the information into Match objects\n     */\n    @Bean\n    public JdbcBatchItemWriter&lt;Match&gt; writer(DataSource dataSource) {\n        return new JdbcBatchItemWriterBuilder&lt;Match&gt;()\n                .itemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;())\n                .sql(&quot;INSERT INTO matches (id, dayofweek, match_time, home_team, away_team, home_score, away_score, attendance, venue, referee, home_captain, away_captain,  home_manager, away_manager, home_total_shots, away_total_shots) &quot;\n                        +\n                        &quot;VALUES (:id, :dayofweek, :match_time, :home_team, :away_team, :home_score, :away_score, :attendance, :venue, :referee, :home_captain, :away_captain, : home_manager, :away_manager, :home_total_shots, :away_total_shots)&quot;)\n                .dataSource(dataSource)\n                .build();\n    }\n\n    /**\n     * Create a Job whose steps are to Read, Process and Write\n     */\n    @Bean\n    public Job importUserJob(JobRepository jobRepository, JobCompletionNotificationListener listener, Step step1) {\n        return new JobBuilder(&quot;importUserJob&quot;, jobRepository)\n                .incrementer(new RunIdIncrementer())\n                .listener(listener)\n                .flow(step1)\n                .end()\n                .build();\n    }\n\n    /**\n     * This is the step for the above job\n     * Calls reader, processor and writer (written above)\n     */\n    @Bean\n    public Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager,\n            JdbcBatchItemWriter&lt;Match&gt; writer) {\n        return new StepBuilder(&quot;step1&quot;, jobRepository)\n                .&lt;MatchInput, Match&gt;chunk(10, transactionManager)\n                .reader(reader())\n                .processor(processor())\n                .writer(writer)\n                .build();\n    }\n}\n</code></pre>\n<p>This is my MatchInput.java class</p>\n<pre><code>package io.davidwilliford.wcdashboard.data;\n\n/**\n * Class for match input\n * \n * Match will work as our Id\n * In total, there are 63 matches\n */\n\npublic class MatchInput {\n\n    /**\n     * Class attributes\n     */\n    private String match;\n    private String dayofweek;\n    private String match_time;\n    private String home_team;\n    private String away_team;\n    private String home_xg;\n    private String away_xg;\n    private String score;\n    private String attendance;\n    private String venue;\n    private String referee;\n    private String home_formation;\n    private String away_formation;\n    private String home_captain;\n    private String away_captain;\n    private String home_manager;\n    private String away_manager;\n    private String home_possession;\n    private String away_possession;\n    private String home_completed_passes;\n    private String home_attempted_pases;\n    private String away_completed_passes;\n    private String away_attempted_pases;\n    private String home_sot;\n    private String away_sot;\n    private String home_total_shots;\n    private String away_total_shots;\n    private String home_saves;\n    private String away_saves;\n    private String home_fouls;\n    private String away_fouls;\n    private String home_corners;\n    private String away_corners;\n    private String home_crosses;\n    private String away_crosses;\n    private String home_touches;\n    private String away_touches;\n    private String home_tackles;\n    private String away_tackles;\n    private String home_interceptions;\n    private String away_interceptions;\n    private String home_aerials_won;\n    private String away_aerials_won;\n    private String home_clearances;\n    private String away_clearances;\n    private String home_offsides;\n    private String away_offsides;\n    private String home_gks;\n    private String away_gks;\n    private String home_throw_ins;\n    private String away_throw_ins;\n    private String home_long_balls;\n    private String away_long_balls;\n   \n    // purposely left out getters and setters since they arent important \n\n}\n</code></pre>\n<p>This is my Match.java model class</p>\n<pre><code>package io.davidwilliford.wcdashboard.model;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n/**\n * This is the model class for all of our matches\n * \n * @Entity creates a table with this class\n */\n@Entity\n@Table(name = &quot;matches&quot;)\npublic class Match {\n\n    /**\n     * Class attributes\n     */\n\n    @Id\n    private int id;\n    private String dayofweek;\n    private String match_time;\n    private String home_team;\n    private String away_team;\n    private String home_score;\n    private String away_score;\n    private String attendance;\n    private String venue;\n    private String referee;\n    private String home_captain;\n    private String away_captain;\n    private String home_manager;\n    private String away_manager;\n    private String home_total_shots;\n    private String away_total_shots;\n\n    /**\n     * toString method\n     */\n\n    @Override\n    public String toString() {\n        return &quot;Home Team: &quot; + this.home_team + &quot;, Away Team: &quot; + this.away_team;\n    }\n\n    /**\n     * Getters and Setters\n     */\n\n    public long getId() {\n\n}\n</code></pre>\n<p>And this is my JobCompleteNotificationListener.java class</p>\n<p>This class is supposed to log the names from the home and away team upon completetion.</p>\n<pre><code>package io.davidwilliford.wcdashboard.data;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.batch.core.BatchStatus;\nimport org.springframework.batch.core.JobExecution;\nimport org.springframework.batch.core.JobExecutionListener;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class JobCompletionNotificationListener implements JobExecutionListener {\n\n    private static final Logger log = LoggerFactory.getLogger(JobCompletionNotificationListener.class);\n\n    private final JdbcTemplate jdbcTemplate;\n\n    @Autowired\n    public JobCompletionNotificationListener(JdbcTemplate jdbcTemplate) {\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    /**\n     * After job is complete,\n     * Return and print the 2 teams, and the time\n     */\n    @Override\n    public void afterJob(JobExecution jobExecution) {\n        if (jobExecution.getStatus() == BatchStatus.COMPLETED) {\n            log.info(&quot;!!! JOB FINISHED! Time to verify the results&quot;);\n\n            jdbcTemplate.query(&quot;SELECT home_team, away_team FROM match&quot;,\n                    (rs, row) -&gt; &quot;Home Team: &quot; + rs.getString(1) + &quot; Away Team: &quot;\n                            + rs.getString(2))\n                    .forEach(str -&gt; System.out.println(str));\n        }\n    }\n}\n</code></pre>\n<p>Nothing logs in my console when I run the spring boot application. Hopefully this is enough information, I can provide more if needed. Sincerely, thanks for anyone willing to help.</p>\n<p>This program is intended to take in a CSV (2022 World Cup information) and imbed it into a HSQL embedded database within a Spring Boot application. I have followed the official Spring Boot guide for completing a Spring Batch Job (here: <a href=\"https://spring.io/guides/gs/batch-processing/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/batch-processing/</a> ) and have had no luck so far.</p>\n"},{"tags":["java","mysql","sockets","ssl","jdbc"],"owner":{"account_id":3748318,"reputation":31,"user_id":3116458,"display_name":"user3116458"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1356,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1694157866,"creation_date":1387395433,"question_id":20666906,"body_markdown":"I set system properties for a SSL-enabled MySQL client, which worked fine:\r\n\r\n    System.setProperty(&quot;javax.net.ssl.trustStore&quot;,&quot;truststore&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;,&quot;12345&quot;);\r\n    String url = &quot;jdbc:mysql://abc.com:3306/test?&quot; +\r\n                 &quot;user=abc&amp;password=123&quot; +\r\n                 &quot;&amp;useUnicode=true&quot; +\r\n                 &quot;&amp;characterEncoding=utf8&amp;useSSL=true&quot;\r\n\r\nA couple days ago I found the client couldn&#39;t connect to another web site in which a commercially signed SSL certificate is installed. Obviously the overriding keystores didn&#39;t work with regular https connections.\r\nThen I decided to build my version of SocketFactory based on StandardSocketFactory.java in MySQL Connector/J source.\r\n\r\nI added a method to create Socket objects in public Socket connect(String hostname, int portNumber, Properties props) method.\r\n\r\n    private Socket createSSLSocket(InetAddress address, int port) {\r\n\t\tSocket socket;\r\n\r\n\t\ttry {\r\n\t\t\tInputStream trustStream = new FileInputStream(new File(&quot;truststore&quot;));\r\n\t\t\tKeyStore trustStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n\t\t\t\r\n                        // load the stream to your store\r\n\t\t\ttrustStore.load(trustStream, trustPassword);\r\n\r\n\t\t\t// initialize a trust manager factory with the trusted store\r\n\t\t\tTrustManagerFactory trustFactory = TrustManagerFactory.getInstance(&quot;PKIX&quot;, &quot;SunJSSE&quot;);\t\t\t        trustFactory.init(trustStore);\r\n\r\n\t\t\t// get the trust managers from the factory\r\n\t\t\tTrustManager[] trustManagers = trustFactory.getTrustManagers();\r\n\r\n\t\t\t// initialize an ssl context to use these managers and set as default\r\n\t\t\tSSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n\t\t\tsslContext.init(null, trustManagers, null);\r\n\t\t\tif(address == null) {\r\n\t\t\t\tsocket = sslContext.getSocketFactory().createSocket();\r\n\t\t\t} else {\r\n\t\t\t\tsocket = sslContext.getSocketFactory().createSocket(address, port);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(e.getLocalizedMessage());\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn socket;\r\n\t}\r\n\r\nThe url passed to jdbc driver is changed to:\r\n\r\n        String url = &quot;jdbc:mysql://abc.com:3306/test?&quot; +\r\n                 &quot;user=abc&amp;password=123&quot; +\r\n                 &quot;&amp;useUnicode=true&quot; +\r\n                 &quot;&amp;characterEncoding=utf8&amp;useSSL=true&quot; +\r\n                 &quot;&amp;socketFactory=&quot; + MySocketFactory.class.getName();\r\n\r\nThe client did execute my version createSSLSocket() and return a Socket object. However, I got the following Exceptions after continuing the execution:\r\n\r\n\r\n        com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: \r\n        Communications link failure\r\n\r\n        The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\r\n        javax.net.ssl.SSLException: \r\n        Unrecognized SSL message, plaintext connection?\r\n\r\nI&#39;m sure the MySQL was up and running, the address and port passed to createSSLSocket() were correct. Could anyone help? The client has to communicate to 2 sites at the same time: an HTTPS web server and a self-signed MySQL server.","title":"MySQL jdbc + SSL","body":"<p>I set system properties for a SSL-enabled MySQL client, which worked fine:</p>\n\n<pre><code>System.setProperty(\"javax.net.ssl.trustStore\",\"truststore\");\nSystem.setProperty(\"javax.net.ssl.trustStorePassword\",\"12345\");\nString url = \"jdbc:mysql://abc.com:3306/test?\" +\n             \"user=abc&amp;password=123\" +\n             \"&amp;useUnicode=true\" +\n             \"&amp;characterEncoding=utf8&amp;useSSL=true\"\n</code></pre>\n\n<p>A couple days ago I found the client couldn't connect to another web site in which a commercially signed SSL certificate is installed. Obviously the overriding keystores didn't work with regular https connections.\nThen I decided to build my version of SocketFactory based on StandardSocketFactory.java in MySQL Connector/J source.</p>\n\n<p>I added a method to create Socket objects in public Socket connect(String hostname, int portNumber, Properties props) method.</p>\n\n<pre><code>private Socket createSSLSocket(InetAddress address, int port) {\n    Socket socket;\n\n    try {\n        InputStream trustStream = new FileInputStream(new File(\"truststore\"));\n        KeyStore trustStore = KeyStore.getInstance(\"JKS\");\n\n                    // load the stream to your store\n        trustStore.load(trustStream, trustPassword);\n\n        // initialize a trust manager factory with the trusted store\n        TrustManagerFactory trustFactory = TrustManagerFactory.getInstance(\"PKIX\", \"SunJSSE\");                  trustFactory.init(trustStore);\n\n        // get the trust managers from the factory\n        TrustManager[] trustManagers = trustFactory.getTrustManagers();\n\n        // initialize an ssl context to use these managers and set as default\n        SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n        sslContext.init(null, trustManagers, null);\n        if(address == null) {\n            socket = sslContext.getSocketFactory().createSocket();\n        } else {\n            socket = sslContext.getSocketFactory().createSocket(address, port);\n        }\n    } catch (Exception e) {\n        System.out.println(e.getLocalizedMessage());\n        return null;\n    }\n    return socket;\n}\n</code></pre>\n\n<p>The url passed to jdbc driver is changed to:</p>\n\n<pre><code>    String url = \"jdbc:mysql://abc.com:3306/test?\" +\n             \"user=abc&amp;password=123\" +\n             \"&amp;useUnicode=true\" +\n             \"&amp;characterEncoding=utf8&amp;useSSL=true\" +\n             \"&amp;socketFactory=\" + MySocketFactory.class.getName();\n</code></pre>\n\n<p>The client did execute my version createSSLSocket() and return a Socket object. However, I got the following Exceptions after continuing the execution:</p>\n\n<pre><code>    com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: \n    Communications link failure\n\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n\n    javax.net.ssl.SSLException: \n    Unrecognized SSL message, plaintext connection?\n</code></pre>\n\n<p>I'm sure the MySQL was up and running, the address and port passed to createSSLSocket() were correct. Could anyone help? The client has to communicate to 2 sites at the same time: an HTTPS web server and a self-signed MySQL server.</p>\n"},{"tags":["java","video","h.264","video-encoding","jcodec"],"comments":[{"owner":{"account_id":1806762,"reputation":4128,"user_id":1643723,"display_name":"user1643723"},"score":1,"creation_date":1563011321,"post_id":56829683,"comment_id":100566969,"body_markdown":"Seems like you are feeding encoder&#39;s output ByteBuffer to decoder without calling `flip` on it first. ByteBuffers don&#39;t work that way ‚Äî a buffer returned by encoder is marked as &quot;full&quot; with it&#39;s position set close to the end. Decoder expects the buffer to &quot;have some space&quot; (position set at the beginning, limit to the amount of available data).","body":"Seems like you are feeding encoder&#39;s output ByteBuffer to decoder without calling <code>flip</code> on it first. ByteBuffers don&#39;t work that way ‚Äî a buffer returned by encoder is marked as &quot;full&quot; with it&#39;s position set close to the end. Decoder expects the buffer to &quot;have some space&quot; (position set at the beginning, limit to the amount of available data)."},{"owner":{"account_id":16148428,"reputation":1317,"user_id":11657446,"display_name":"arnonuem"},"score":1,"creation_date":1563532452,"post_id":56829683,"comment_id":100740404,"body_markdown":"maybe get inspired here...\n\nhttps://stackoverflow.com/questions/2165593/how-to-decode-h-264-video-frame-in-java-environment","body":"maybe get inspired here...  <a href=\"https://stackoverflow.com/questions/2165593/how-to-decode-h-264-video-frame-in-java-environment\" title=\"how to decode h 264 video frame in java environment\">stackoverflow.com/questions/2165593/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":16476095,"reputation":540,"user_id":11904038,"display_name":"Piotr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694157374,"creation_date":1694157374,"answer_id":77064862,"question_id":56829683,"body_markdown":"    Picture buf = Picture.create(pixelWidth + (pixelWidth % 16), pixelHeight + (pixelHeight % 16), ColorSpace.YUV420);\r\n    ...\r\n    Frame f = dec.decodeFrame(ef.getData(), buf.getData();\r\n\r\nA bit late, but maybe someone else will find my answer useful\r\n\r\n","title":"JCodec simple H264 encode/decode","body":"<pre><code>Picture buf = Picture.create(pixelWidth + (pixelWidth % 16), pixelHeight + (pixelHeight % 16), ColorSpace.YUV420);\n...\nFrame f = dec.decodeFrame(ef.getData(), buf.getData();\n</code></pre>\n<p>A bit late, but maybe someone else will find my answer useful</p>\n"}],"owner":{"account_id":2228175,"reputation":530,"user_id":1966457,"accept_rate":25,"display_name":"pranahata"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2153,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1694157374,"creation_date":1561951416,"question_id":56829683,"body_markdown":"Ok, so trying to get my head around jcodec. Basically, I want to record what&#39;s on the screen as BufferedImages, encode the buffered images as H264 frames and then decode them and convert them back to buffered image. \r\n\r\nThis is the code I have, the ScreenRecorder class extends thread and basically captures the screen in a while true loop. That part works. Then, it seems that encoding the BufferedImage from ScreenRecorder as a H264 frame works too but then when i try to decode it I get an AIOBE\r\n\r\n    ScreenRecorder sc = new ScreenRecorder();\r\n    sc.start();\r\n\r\n        H264Encoder enc = H264Encoder.createH264Encoder();\r\n        ColorSpace cs = enc.getSupportedColorSpaces()[0];\r\n        System.out.println(&quot;cs= &quot; + cs);\r\n        H264Decoder dec = new H264Decoder();\r\n        byte[][] buff = new byte[4096][4096];\r\n        while (true) {\r\n            BufferedImage bi = sc.getSnapshot();\r\n            System.out.println(&quot;Got bi &quot; + bi);\r\n            if (bi != null) {\r\n                Picture pi = AWTUtil.fromBufferedImage(bi, cs);\r\n                int bufSize = enc.estimateBufferSize(pi);\r\n                ByteBuffer bb = ByteBuffer.allocate(bufSize);\r\n                VideoEncoder.EncodedFrame ef = enc.encodeFrame(pi, bb);\r\n                System.out.println(&quot;Data = &quot; + Arrays.toString(ef.getData().array()));\r\n                Frame f = dec.decodeFrame(ef.getData(), buff);\r\n                System.out.println(&quot;Decoded frame = &quot; + f);\r\n            }\r\n        }\r\n\r\nProduces:\r\n\r\n    Got bi BufferedImage@506e1b77: type = 1 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=0 IntegerInterleavedRaster: width = 1920 height = 1080 #Bands = 3 xOff = 0 yOff = 0 dataOffset[0] 0\r\n    org.jcodec.common.VideoEncoder$EncodedFrame@1a93a7ca\r\n    Data = [0, 0, 0, 1, 103, 66, 0, 40, -83, 0, -16, 4, 75, -54, -128, 0, 0, 0, 1, 104, -50, 56, -128, 0, 0, 0, 1, 101, -72, 32, 13, 12, 98, -128, 0, -111, 127, -1, -3, 127, -61, 24, 0, 36, 9, 112, -96, 28, 13, -108, -43, 45, -92, -57, 7, 101, 39, 31, -4, 0, 121, -104, 17, -86, 9, 84, -111, -94, 39, 125, 94, -57, 64, 2, 67, 56, 28, 0, 4, 0, 118, -97, -128, 40, 124, 20, 39, 122, 111, -117, -124, 25, 72, -76, -107, 90, -1, -122, 48, 0, 67, 41, 10, -64, 0, 32, 106, 0, 5, -128, -108, -13, 80, 51, 112, 113, 112, 107, -1, -17, -32, 32, 85, -60, -76, 52, 70, -67, 124, 3, 113, 111, 51, 0, 1, 0, -64, 0, 16, 15, -5, -48, 3, -80, -21, -2, 24, -64, 25, -48, 0, 16, 39, 0, 1, 0, 105, -112, 13, 9, 11, -35, -16, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 124, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 47, -8, 98, 56, 0, -112, 15, 21, 96, 3, 102, 59, -124, 48, 83, 96, 55, -10, 1, 55, -6, 27, 0, 67, 19, 47, -12, 90, 112, -125, -108, 64, 38, 9, 83, 29, 101, -56, 75, -126, -85, -96, 113, 17, -105, 2, 57, 98, 56, -66, 28, 88, -105, ...\r\n    Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException\r\n    \tat java.lang.System.arraycopy(Native Method)\r\n    \tat org.jcodec.codecs.h264.decode.SliceDecoder.putMacroblock(SliceDecoder.java:198)\r\n    \tat org.jcodec.codecs.h264.decode.SliceDecoder.decodeMacroblocks(SliceDecoder.java:104)\r\n    \tat org.jcodec.codecs.h264.decode.SliceDecoder.decodeFromReader(SliceDecoder.java:73)\r\n    \tat org.jcodec.codecs.h264.H264Decoder$FrameDecoder.decodeFrame(H264Decoder.java:152)\r\n    \tat org.jcodec.codecs.h264.H264Decoder.decodeFrameFromNals(H264Decoder.java:103)\r\n    \tat org.jcodec.codecs.h264.H264Decoder.decodeFrame(H264Decoder.java:99)\r\n    \tat uno.anahata.satgyara.screen.ScreenRecorder.main(ScreenRecorder.java:148)\r\n\r\n\r\n\r\nJust trying to figure out how jcodec works. Any ideas as to what i am doing wrong? Any help would be appreciated","title":"JCodec simple H264 encode/decode","body":"<p>Ok, so trying to get my head around jcodec. Basically, I want to record what's on the screen as BufferedImages, encode the buffered images as H264 frames and then decode them and convert them back to buffered image. </p>\n\n<p>This is the code I have, the ScreenRecorder class extends thread and basically captures the screen in a while true loop. That part works. Then, it seems that encoding the BufferedImage from ScreenRecorder as a H264 frame works too but then when i try to decode it I get an AIOBE</p>\n\n<pre><code>ScreenRecorder sc = new ScreenRecorder();\nsc.start();\n\n    H264Encoder enc = H264Encoder.createH264Encoder();\n    ColorSpace cs = enc.getSupportedColorSpaces()[0];\n    System.out.println(\"cs= \" + cs);\n    H264Decoder dec = new H264Decoder();\n    byte[][] buff = new byte[4096][4096];\n    while (true) {\n        BufferedImage bi = sc.getSnapshot();\n        System.out.println(\"Got bi \" + bi);\n        if (bi != null) {\n            Picture pi = AWTUtil.fromBufferedImage(bi, cs);\n            int bufSize = enc.estimateBufferSize(pi);\n            ByteBuffer bb = ByteBuffer.allocate(bufSize);\n            VideoEncoder.EncodedFrame ef = enc.encodeFrame(pi, bb);\n            System.out.println(\"Data = \" + Arrays.toString(ef.getData().array()));\n            Frame f = dec.decodeFrame(ef.getData(), buff);\n            System.out.println(\"Decoded frame = \" + f);\n        }\n    }\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>Got bi BufferedImage@506e1b77: type = 1 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=0 IntegerInterleavedRaster: width = 1920 height = 1080 #Bands = 3 xOff = 0 yOff = 0 dataOffset[0] 0\norg.jcodec.common.VideoEncoder$EncodedFrame@1a93a7ca\nData = [0, 0, 0, 1, 103, 66, 0, 40, -83, 0, -16, 4, 75, -54, -128, 0, 0, 0, 1, 104, -50, 56, -128, 0, 0, 0, 1, 101, -72, 32, 13, 12, 98, -128, 0, -111, 127, -1, -3, 127, -61, 24, 0, 36, 9, 112, -96, 28, 13, -108, -43, 45, -92, -57, 7, 101, 39, 31, -4, 0, 121, -104, 17, -86, 9, 84, -111, -94, 39, 125, 94, -57, 64, 2, 67, 56, 28, 0, 4, 0, 118, -97, -128, 40, 124, 20, 39, 122, 111, -117, -124, 25, 72, -76, -107, 90, -1, -122, 48, 0, 67, 41, 10, -64, 0, 32, 106, 0, 5, -128, -108, -13, 80, 51, 112, 113, 112, 107, -1, -17, -32, 32, 85, -60, -76, 52, 70, -67, 124, 3, 113, 111, 51, 0, 1, 0, -64, 0, 16, 15, -5, -48, 3, -80, -21, -2, 24, -64, 25, -48, 0, 16, 39, 0, 1, 0, 105, -112, 13, 9, 11, -35, -16, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 124, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 47, -8, 98, 56, 0, -112, 15, 21, 96, 3, 102, 59, -124, 48, 83, 96, 55, -10, 1, 55, -6, 27, 0, 67, 19, 47, -12, 90, 112, -125, -108, 64, 38, 9, 83, 29, 101, -56, 75, -126, -85, -96, 113, 17, -105, 2, 57, 98, 56, -66, 28, 88, -105, ...\nException in thread \"main\" java.lang.ArrayIndexOutOfBoundsException\n    at java.lang.System.arraycopy(Native Method)\n    at org.jcodec.codecs.h264.decode.SliceDecoder.putMacroblock(SliceDecoder.java:198)\n    at org.jcodec.codecs.h264.decode.SliceDecoder.decodeMacroblocks(SliceDecoder.java:104)\n    at org.jcodec.codecs.h264.decode.SliceDecoder.decodeFromReader(SliceDecoder.java:73)\n    at org.jcodec.codecs.h264.H264Decoder$FrameDecoder.decodeFrame(H264Decoder.java:152)\n    at org.jcodec.codecs.h264.H264Decoder.decodeFrameFromNals(H264Decoder.java:103)\n    at org.jcodec.codecs.h264.H264Decoder.decodeFrame(H264Decoder.java:99)\n    at uno.anahata.satgyara.screen.ScreenRecorder.main(ScreenRecorder.java:148)\n</code></pre>\n\n<p>Just trying to figure out how jcodec works. Any ideas as to what i am doing wrong? Any help would be appreciated</p>\n"},{"tags":["java","mongodb","jdbc","mongodb-java","mongo-java-driver"],"comments":[{"owner":{"account_id":1248144,"reputation":4402,"user_id":1209159,"accept_rate":36,"display_name":"Natalia"},"score":0,"creation_date":1444137317,"post_id":32970871,"comment_id":53766755,"body_markdown":"have you tried MongoClient? `MongoClient mongo = new MongoClient( &quot;localhost&quot; , 27017 );`","body":"have you tried MongoClient? <code>MongoClient mongo = new MongoClient( &quot;localhost&quot; , 27017 );</code>"},{"owner":{"account_id":7073014,"reputation":41,"user_id":5414013,"display_name":"manoj"},"score":0,"creation_date":1444298666,"post_id":32970871,"comment_id":53848650,"body_markdown":"thanks for the reply, I have tried that, but the requirement is to use the jdbc connector.","body":"thanks for the reply, I have tried that, but the requirement is to use the jdbc connector."}],"answers":[{"comments":[{"owner":{"account_id":11216874,"reputation":920,"user_id":8229192,"accept_rate":95,"display_name":"FullStackDeveloper"},"score":7,"creation_date":1605807743,"post_id":32971382,"comment_id":114772131,"body_markdown":"Your link https://github.com/erh/mongo-jdbc  now is 404","body":"Your link <a href=\"https://github.com/erh/mongo-jdbc\" rel=\"nofollow noreferrer\">github.com/erh/mongo-jdbc</a>  now is 404"},{"owner":{"account_id":10486134,"reputation":671,"user_id":7729614,"display_name":"Soufiane Roui"},"score":0,"creation_date":1698705429,"post_id":32971382,"comment_id":136436825,"body_markdown":"link: https://github.com/mongodb/mongo-jdbc-driver","body":"link: <a href=\"https://github.com/mongodb/mongo-jdbc-driver\" rel=\"nofollow noreferrer\">github.com/mongodb/mongo-jdbc-driver</a>"}],"tags":[],"owner":{"account_id":5733060,"reputation":506,"user_id":4528018,"accept_rate":50,"display_name":"s.meissner"},"comment_count":2,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1444138436,"creation_date":1444138436,"answer_id":32971382,"question_id":32970871,"body_markdown":"You can checkout this project:\r\n\r\nhttps://github.com/erh/mongo-jdbc\r\n\r\nThere are two examples given.\r\n\r\nBut in general I would recommend to use the MongoDB Client or some Spring Data abstraction.","title":"Connecting to MongoDB using jdbc driver","body":"<p>You can checkout this project:</p>\n\n<p><a href=\"https://github.com/erh/mongo-jdbc\" rel=\"nofollow\">https://github.com/erh/mongo-jdbc</a></p>\n\n<p>There are two examples given.</p>\n\n<p>But in general I would recommend to use the MongoDB Client or some Spring Data abstraction.</p>\n"},{"comments":[{"owner":{"account_id":7073014,"reputation":41,"user_id":5414013,"display_name":"manoj"},"score":0,"creation_date":1444298949,"post_id":32972273,"comment_id":53848835,"body_markdown":"Thanks but I am not getting the mongodb jar file, which has this path and the class MongoDriver.  I also checked with Unity-jdbc forum, but there jar files also does not have the same.","body":"Thanks but I am not getting the mongodb jar file, which has this path and the class MongoDriver.  I also checked with Unity-jdbc forum, but there jar files also does not have the same."}],"tags":[],"owner":{"account_id":4714434,"reputation":41866,"user_id":3814029,"accept_rate":67,"display_name":"Andy Guibert"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1444140940,"creation_date":1444140940,"answer_id":32972273,"question_id":32970871,"body_markdown":"If you are getting a ClassNotFoundException, the issue is that the jar containing the `mongodb.jdbc.MongoDriver` class is not on your classpath.  If you&#39;re not sure what JAR this class is in, I would reccomend getting [7-Zip][1] so that you can inspect the contents of the jar and see for yourself if the class is there.\r\n\r\nThe correct way to connect to MongoDB with your approach is:\r\n\r\n    Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\r\n    String URL = &quot;jdbc:mongo://&lt;servername&gt;:&lt;port&gt;/&lt;databaseName&gt;&quot;;\r\n    Connection jdbcConn = DriverManager.getConnection(url,&quot;user&quot;,&quot;pass&quot;);\r\n\r\n&lt;br&gt;But MongoDB isn&#39;t really meant to be used with JDBC, so if your requirements allow, I would reccomend getting a connection the &quot;mongodb&quot; way.\r\n\r\n    MongoClient client = new MongoClient(&quot;localhost&quot;);\r\n\r\nFor details on how to do it this way, [see the MongoDB docs][2]\r\n\r\n\r\n  [1]: http://www.7-zip.org/\r\n  [2]: http://docs.mongodb.org/ecosystem/drivers/java/","title":"Connecting to MongoDB using jdbc driver","body":"<p>If you are getting a ClassNotFoundException, the issue is that the jar containing the <code>mongodb.jdbc.MongoDriver</code> class is not on your classpath.  If you're not sure what JAR this class is in, I would reccomend getting <a href=\"http://www.7-zip.org/\" rel=\"nofollow\">7-Zip</a> so that you can inspect the contents of the jar and see for yourself if the class is there.</p>\n\n<p>The correct way to connect to MongoDB with your approach is:</p>\n\n<pre><code>Class.forName(\"mongodb.jdbc.MongoDriver\");\nString URL = \"jdbc:mongo://&lt;servername&gt;:&lt;port&gt;/&lt;databaseName&gt;\";\nConnection jdbcConn = DriverManager.getConnection(url,\"user\",\"pass\");\n</code></pre>\n\n<p><br>But MongoDB isn't really meant to be used with JDBC, so if your requirements allow, I would reccomend getting a connection the \"mongodb\" way.</p>\n\n<pre><code>MongoClient client = new MongoClient(\"localhost\");\n</code></pre>\n\n<p>For details on how to do it this way, <a href=\"http://docs.mongodb.org/ecosystem/drivers/java/\" rel=\"nofollow\">see the MongoDB docs</a></p>\n"},{"tags":[],"owner":{"account_id":7385224,"reputation":43,"user_id":5620462,"display_name":"Tmac Zhou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448877615,"creation_date":1448874569,"answer_id":33994900,"question_id":32970871,"body_markdown":"I met this question today morning.\r\nThe key is missing  `mongo-java-driver.jar`.\r\nwhen I add the jar, the project can run normal.\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>I met this question today morning.\nThe key is missing  <code>mongo-java-driver.jar</code>.\nwhen I add the jar, the project can run normal.</p>\n"},{"tags":[],"owner":{"account_id":5869283,"reputation":2403,"user_id":4622075,"accept_rate":61,"display_name":"DirtyMind"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530473667,"creation_date":1530473667,"answer_id":51126417,"question_id":32970871,"body_markdown":"I know its very late to answer but might help someone else. If you are compiling and running your code from **cmd**  then before compilation set classpath for mongo.jar like below :\r\n\r\n**set classpath=C:\\DemoProject\\java db\\Mongo\\mongo.jar;**\r\n\r\nthen run your code.\r\n\r\nor if you are using editor like eclipse then add this jar to your lib folder.","title":"Connecting to MongoDB using jdbc driver","body":"<p>I know its very late to answer but might help someone else. If you are compiling and running your code from <strong>cmd</strong>  then before compilation set classpath for mongo.jar like below :</p>\n\n<p><strong>set classpath=C:\\DemoProject\\java db\\Mongo\\mongo.jar;</strong></p>\n\n<p>then run your code.</p>\n\n<p>or if you are using editor like eclipse then add this jar to your lib folder.</p>\n"},{"tags":[],"owner":{"account_id":3425729,"reputation":419,"user_id":2871531,"accept_rate":0,"display_name":"DbSchema"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595618669,"creation_date":1569860765,"answer_id":58171784,"question_id":32970871,"body_markdown":"[DbSchema][1] database designer is providing an Open Source MongoDb JDBC driver which does support native MongoDb queries, including find(), projections, aggregate, etc.. \r\nThe driver is using an internal embedded JavaScript engine.\r\nThe driver is [Open Source on GitHub][2]. \r\nFew of the driver features:\r\n\r\n - Support native [MongoDb queries][3]\r\n - Calling DatabaseMetaData methods can &#39;guess&#39; the collection structure, so a &#39;virtual schema&#39; is created. This is used by the [Designer for MongoDB][1] to represent the MongoDb database structure in diagrams like below.\r\n - Implement most of the JDBC driver methods. Use the native MongoDB JDBC URL to connect, which means full functionality regarding connectivity.\r\n\r\n[![DbSchema Diagram Design for MongoDB][4]][4]\r\n\r\nAnd one snippet of code about how to use the driver\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Class.forName(&quot;com.dbschema.MongoDbJdbcDriver&quot;);\r\n    Properties properties = new Properties();\r\n    properties.put(&quot;user&quot;, &quot;someuser&quot;);\r\n    properties.put(&quot;password&quot;, &quot;somepassword&quot; );\r\n    Connection con = DriverManager.getConnection(&quot;jdbc:mongodb://host1:9160/keyspace1&quot;, properties);\r\n    // OTHER URL (SAME AS FOR MONGODB NATIVE DRIVER): mongodb://db1.example.net,db2.example.net:2500/?replicaSet=test&amp;connectTimeoutMS=300000\r\n    String query = &quot;db.sampleCollection().find()&quot;;\r\n    Statement statement = con.createStatement();\r\n    ResultSet rs = statement.executeQuery( query );\r\n    Object json = rs.getObject(1);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://dbschema.com/mongodb-tool.html\r\n  [2]: https://github.com/wise-coders/mongodb-jdbc-driver\r\n  [3]: https://dbschema.com/documentation/mongodb-features.html\r\n  [4]: https://i.stack.imgur.com/58ZTY.png","title":"Connecting to MongoDB using jdbc driver","body":"<p><a href=\"https://dbschema.com/mongodb-tool.html\" rel=\"nofollow noreferrer\">DbSchema</a> database designer is providing an Open Source MongoDb JDBC driver which does support native MongoDb queries, including find(), projections, aggregate, etc..\nThe driver is using an internal embedded JavaScript engine.\nThe driver is <a href=\"https://github.com/wise-coders/mongodb-jdbc-driver\" rel=\"nofollow noreferrer\">Open Source on GitHub</a>.\nFew of the driver features:</p>\n<ul>\n<li>Support native <a href=\"https://dbschema.com/documentation/mongodb-features.html\" rel=\"nofollow noreferrer\">MongoDb queries</a></li>\n<li>Calling DatabaseMetaData methods can 'guess' the collection structure, so a 'virtual schema' is created. This is used by the <a href=\"https://dbschema.com/mongodb-tool.html\" rel=\"nofollow noreferrer\">Designer for MongoDB</a> to represent the MongoDb database structure in diagrams like below.</li>\n<li>Implement most of the JDBC driver methods. Use the native MongoDB JDBC URL to connect, which means full functionality regarding connectivity.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/58ZTY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/58ZTY.png\" alt=\"DbSchema Diagram Design for MongoDB\" /></a></p>\n<p>And one snippet of code about how to use the driver</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class.forName(&quot;com.dbschema.MongoDbJdbcDriver&quot;);\nProperties properties = new Properties();\nproperties.put(&quot;user&quot;, &quot;someuser&quot;);\nproperties.put(&quot;password&quot;, &quot;somepassword&quot; );\nConnection con = DriverManager.getConnection(&quot;jdbc:mongodb://host1:9160/keyspace1&quot;, properties);\n// OTHER URL (SAME AS FOR MONGODB NATIVE DRIVER): mongodb://db1.example.net,db2.example.net:2500/?replicaSet=test&amp;connectTimeoutMS=300000\nString query = &quot;db.sampleCollection().find()&quot;;\nStatement statement = con.createStatement();\nResultSet rs = statement.executeQuery( query );\nObject json = rs.getObject(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2720893,"reputation":1730,"user_id":2347210,"accept_rate":67,"display_name":"Vladi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600258283,"creation_date":1600258283,"answer_id":63919826,"question_id":32970871,"body_markdown":"The first option \r\n\r\n        MongoClient mongoClient = new MongoClient( &quot;1.2.3.4&quot;,27017 );\r\n        MongoDatabase database =  mongoClient.getDatabase(dataBase);\r\n        MongoCollection&lt;Document&gt; collection = database.getCollection(DBcollection);\r\n    \r\n    \r\n   \r\n\r\n **another option** \r\n    \t\r\n    \r\n     MongoClientURI connectionString = new MongoClientURI(&quot;mongodb://1.2.3.4:27017&quot;);\r\n    \t MongoClient mongoClient = new MongoClient(connectionString);\r\n    \tMongoDatabase database =  mongoClient.getDatabase(dataBase);\r\n    \tMongoCollection collection = database.getCollection(DBcollection);\r\n\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>The first option</p>\n<pre><code>    MongoClient mongoClient = new MongoClient( &quot;1.2.3.4&quot;,27017 );\n    MongoDatabase database =  mongoClient.getDatabase(dataBase);\n    MongoCollection&lt;Document&gt; collection = database.getCollection(DBcollection);\n</code></pre>\n<p><strong>another option</strong></p>\n<pre><code> MongoClientURI connectionString = new MongoClientURI(&quot;mongodb://1.2.3.4:27017&quot;);\n     MongoClient mongoClient = new MongoClient(connectionString);\n    MongoDatabase database =  mongoClient.getDatabase(dataBase);\n    MongoCollection collection = database.getCollection(DBcollection);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":302544,"reputation":30455,"user_id":610979,"accept_rate":92,"display_name":"Frank Schmitt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694157065,"creation_date":1694157065,"answer_id":77064836,"question_id":32970871,"body_markdown":"(I realize this is a *very* late answer, but since I struggled with this just yesterday, I&#39;ll post it anyway)\r\n\r\nNowadays, the [Unity JDBC driver][1] comes with a complete code example for Java. In short:\r\n\r\n- include the jar file in your CLASSPATH\r\n- reference it with mongodb.jdbc\r\n\r\n**Java code**\r\n\r\n    &lt;usual java.sql import stuff&gt;\r\n    import mongodb.jdbc.MongoStatement;\r\n     \r\n    ...\r\n        Connection con = null;\r\n        String sql;\r\n\r\n        try\r\n        {\r\n            // Create new instance of Mongo JDBC Driver and make connection.\r\n            System.out.println(&quot;Registering Driver.&quot;);\r\n\r\n            // Note: Registering driver using Class.forName() is not required.\r\n            Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\r\n\r\n            // Connect to the URL. The last part is the database name (tpch in this case).\r\n            String url = &quot;jdbc:mongodb://server/database/tpch?rebuildschema=true&quot;;\r\n\r\n            System.out.println(&quot;Making a connection to: &quot; + url);\r\n            con = DriverManager.getConnection(url, &quot;user&quot;, &quot;password&quot;);\r\n            System.out.println(&quot;Connection successful.\\n&quot;);\r\n            ... &lt;run queries etc&gt;\r\n\r\n\r\n**Build + Run**\r\n\r\n    javac -cp .;../unityjdbc.jar test/ExampleQuery.java\r\n    java -cp .;../unityjdbc.jar test.ExampleQuery\r\n\r\n\r\n  [1]: https://unityjdbc.com/mongojdbc/mongo_jdbc.php\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>(I realize this is a <em>very</em> late answer, but since I struggled with this just yesterday, I'll post it anyway)</p>\n<p>Nowadays, the <a href=\"https://unityjdbc.com/mongojdbc/mongo_jdbc.php\" rel=\"nofollow noreferrer\">Unity JDBC driver</a> comes with a complete code example for Java. In short:</p>\n<ul>\n<li>include the jar file in your CLASSPATH</li>\n<li>reference it with mongodb.jdbc</li>\n</ul>\n<p><strong>Java code</strong></p>\n<pre><code>&lt;usual java.sql import stuff&gt;\nimport mongodb.jdbc.MongoStatement;\n \n...\n    Connection con = null;\n    String sql;\n\n    try\n    {\n        // Create new instance of Mongo JDBC Driver and make connection.\n        System.out.println(&quot;Registering Driver.&quot;);\n\n        // Note: Registering driver using Class.forName() is not required.\n        Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\n\n        // Connect to the URL. The last part is the database name (tpch in this case).\n        String url = &quot;jdbc:mongodb://server/database/tpch?rebuildschema=true&quot;;\n\n        System.out.println(&quot;Making a connection to: &quot; + url);\n        con = DriverManager.getConnection(url, &quot;user&quot;, &quot;password&quot;);\n        System.out.println(&quot;Connection successful.\\n&quot;);\n        ... &lt;run queries etc&gt;\n</code></pre>\n<p><strong>Build + Run</strong></p>\n<pre><code>javac -cp .;../unityjdbc.jar test/ExampleQuery.java\njava -cp .;../unityjdbc.jar test.ExampleQuery\n</code></pre>\n"}],"owner":{"account_id":7073014,"reputation":41,"user_id":5414013,"display_name":"manoj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43143,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":7,"score":4,"last_activity_date":1694157065,"creation_date":1444136954,"question_id":32970871,"body_markdown":"Purpose is to connect MongoDB remote server through JAVA:\r\n\r\n        URL = &quot;jdbc:mongo://&quot; + serverIP + &quot;:&quot;\r\n        + port+ &quot;/&quot; +databaseName;                     \r\n        Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\r\n\t    dbConn = getConnection(URL,mongo1, mongo1);\r\n\r\nTried Unity_trial.Jar, mongo_version.jar files but the error comes is ***&#39;mongodb.jdbc.MongoDriver&#39; classNameNotFound.***\r\n\r\nIf I comment the class.forname line, the next error is \r\n\r\n       URL = &quot;jdbc:mongo://&quot; + serverIP + &quot;:&quot; + port\r\n\t\t+ &quot;/&quot; +databaseName;\r\n is not in correct format.\r\nNot sure about where I am making the mistake.\r\nThanks for your help in advance.\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>Purpose is to connect MongoDB remote server through JAVA:</p>\n\n<pre><code>    URL = \"jdbc:mongo://\" + serverIP + \":\"\n    + port+ \"/\" +databaseName;                     \n    Class.forName(\"mongodb.jdbc.MongoDriver\");\n    dbConn = getConnection(URL,mongo1, mongo1);\n</code></pre>\n\n<p>Tried Unity_trial.Jar, mongo_version.jar files but the error comes is <strong><em>'mongodb.jdbc.MongoDriver' classNameNotFound.</em></strong></p>\n\n<p>If I comment the class.forname line, the next error is </p>\n\n<pre><code>   URL = \"jdbc:mongo://\" + serverIP + \":\" + port\n    + \"/\" +databaseName;\n</code></pre>\n\n<p>is not in correct format.\nNot sure about where I am making the mistake.\nThanks for your help in advance.</p>\n"},{"tags":["java","android","android-studio","kotlin","admob"],"answers":[{"tags":[],"owner":{"account_id":15738329,"reputation":129,"user_id":11356588,"display_name":"Rufan Khokhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1674636961,"creation_date":1638041133,"answer_id":70138014,"question_id":70138013,"body_markdown":"Finally, After a lot of research, I found the answer,\r\n\r\nFirst, create a theme in style.xml or theme.xml file( make app open ad background black)\r\n\r\n     &lt;style name=&quot;Theme.AppThemeNoActionBar.AdTheme&quot; &gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nand declare the activity on the manifest.xml file, and apply the theme\r\n\r\n     &lt;activity\r\n            android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\r\n            android:theme=&quot;@style/Theme.AppThemeNoActionBar.AdTheme&quot;\r\n            tools:replace=&quot;android:theme&quot;/&gt;\r\n\r\n\r\n","title":"How to change app open ad background admob","body":"<p>Finally, After a lot of research, I found the answer,</p>\n<p>First, create a theme in style.xml or theme.xml file( make app open ad background black)</p>\n<pre><code> &lt;style name=&quot;Theme.AppThemeNoActionBar.AdTheme&quot; &gt;\n    &lt;item name=&quot;android:background&quot;&gt;@color/black&lt;/item&gt;\n    &lt;item name=&quot;android:windowBackground&quot;&gt;@color/black&lt;/item&gt;\n    &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\n    &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>and declare the activity on the manifest.xml file, and apply the theme</p>\n<pre><code> &lt;activity\n        android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\n        android:theme=&quot;@style/Theme.AppThemeNoActionBar.AdTheme&quot;\n        tools:replace=&quot;android:theme&quot;/&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1694167548,"post_id":77064811,"comment_id":135858953,"body_markdown":"Your code looks exactly the same as that in the accepted answer. Am I missing something?","body":"Your code looks exactly the same as that in the accepted answer. Am I missing something?"}],"tags":[],"owner":{"account_id":29314370,"reputation":1,"user_id":22459474,"display_name":"Raheel haider"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694156802,"creation_date":1694156779,"answer_id":77064811,"question_id":70138013,"body_markdown":"1: Apply below code in Styles.\r\n\r\n    &lt;style name=&quot;myAdTheme&quot; parent=&quot;Theme.AppCompat.DayNight.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;#000000&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;#000000&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n2: Apply this code in Manifest file.\r\n\r\n    &lt;activity\r\n            android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\r\n            android:theme=&quot;@style/myAdTheme&quot;\r\n            tools:replace=&quot;android:theme&quot; /&gt;\r\n\r\n\r\n[Click here to preview][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JhoYk.png","title":"How to change app open ad background admob","body":"<p>1: Apply below code in Styles.</p>\n<pre><code>&lt;style name=&quot;myAdTheme&quot; parent=&quot;Theme.AppCompat.DayNight.NoActionBar&quot;&gt;\n    &lt;item name=&quot;android:background&quot;&gt;#000000&lt;/item&gt;\n    &lt;item name=&quot;android:windowBackground&quot;&gt;#000000&lt;/item&gt;\n    &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\n    &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>2: Apply this code in Manifest file.</p>\n<pre><code>&lt;activity\n        android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\n        android:theme=&quot;@style/myAdTheme&quot;\n        tools:replace=&quot;android:theme&quot; /&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JhoYk.png\" rel=\"nofollow noreferrer\">Click here to preview</a></p>\n"}],"owner":{"account_id":15738329,"reputation":129,"user_id":11356588,"display_name":"Rufan Khokhar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1258,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":70138014,"answer_count":2,"score":5,"last_activity_date":1694156802,"creation_date":1638041133,"question_id":70138013,"body_markdown":"I place the banner ad on the top of the main activity, but when the app switch app open ad shows and violate the AdMob ([policy ][1])\r\n\r\n\r\n  [1]: https://youtu.be/aZfdufLRZYU?t=161\r\n\r\nIs that possible to change the background of the app open ad, as you know that by default app open app ad&#39;s background is transparent, As a result, when the app open ad shows, the banner ad is also showing in the background.","title":"How to change app open ad background admob","body":"<p>I place the banner ad on the top of the main activity, but when the app switch app open ad shows and violate the AdMob (<a href=\"https://youtu.be/aZfdufLRZYU?t=161\" rel=\"noreferrer\">policy </a>)</p>\n<p>Is that possible to change the background of the app open ad, as you know that by default app open app ad's background is transparent, As a result, when the app open ad shows, the banner ad is also showing in the background.</p>\n"},{"tags":["java","file","recursion","directory"],"comments":[{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1411563648,"post_id":26017545,"comment_id":40749423,"body_markdown":"Any reason you&#39;re using a HashMap instead of a HashSet?","body":"Any reason you&#39;re using a HashMap instead of a HashSet?"},{"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"score":0,"creation_date":1411563830,"post_id":26017545,"comment_id":40749575,"body_markdown":"@aioobe Now that you mention it. No.. I will make it a set, because I will only check if it nulls. Thanks.","body":"@aioobe Now that you mention it. No.. I will make it a set, because I will only check if it nulls. Thanks."},{"owner":{"account_id":2912376,"reputation":1279,"user_id":2496309,"accept_rate":56,"display_name":"Micha≈Ç Urbaniak"},"score":1,"creation_date":1411563870,"post_id":26017545,"comment_id":40749597,"body_markdown":"Maybe this can help you a bit: http://stackoverflow.com/a/20281958/2496309","body":"Maybe this can help you a bit: <a href=\"http://stackoverflow.com/a/20281958/2496309\">stackoverflow.com/a/20281958/2496309</a>"},{"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"score":0,"creation_date":1411564491,"post_id":26017545,"comment_id":40750026,"body_markdown":"@Mikrobus You are right that was it. You have to delete all files before you can delete a folder. Also sometimes there are hidden config files in the folders, that can be tricky. Thanks you could post it as an answer.","body":"@Mikrobus You are right that was it. You have to delete all files before you can delete a folder. Also sometimes there are hidden config files in the folders, that can be tricky. Thanks you could post it as an answer."},{"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"score":0,"creation_date":1411564524,"post_id":26017545,"comment_id":40750053,"body_markdown":"@aioobe Thanks for your support. I already solved the problem.","body":"@aioobe Thanks for your support. I already solved the problem."}],"answers":[{"comments":[{"owner":{"account_id":10489606,"reputation":126,"user_id":11540228,"display_name":"Daan"},"score":0,"creation_date":1656412631,"post_id":41713403,"comment_id":128560524,"body_markdown":"This program never ends if there does not exists a folder that is empty.","body":"This program never ends if there does not exists a folder that is empty."},{"owner":{"account_id":95960,"reputation":2771,"user_id":261088,"accept_rate":77,"display_name":"bradvido"},"score":0,"creation_date":1697483433,"post_id":41713403,"comment_id":136283012,"body_markdown":"replaceText??? what","body":"replaceText??? what"}],"tags":[],"owner":{"account_id":5154964,"reputation":71,"user_id":4128429,"display_name":"Arijit Paul"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1484725210,"creation_date":1484723745,"answer_id":41713403,"question_id":26017545,"body_markdown":"This piece of code recursively delete all the empty folders or directory:\r\n\r\n    public class DeleteEmptyDir {\r\n\tprivate static final String FOLDER_LOCATION = &quot;E:\\\\TEST&quot;;\r\n\tprivate static boolean isFinished = false;\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tdo {\r\n\t\t\tisFinished = true;\r\n\t\t\treplaceText(FOLDER_LOCATION);\r\n\t\t} while (!isFinished);\r\n\t}\r\n\r\n\tprivate static void replaceText(String fileLocation) {\r\n\t\tFile folder = new File(fileLocation);\r\n\t\tFile[] listofFiles = folder.listFiles();\r\n\t\tif (listofFiles.length == 0) {\r\n\t\t\tSystem.out.println(&quot;Folder Name :: &quot; + folder.getAbsolutePath() + &quot; is deleted.&quot;);\r\n\t\t\tfolder.delete();\r\n\t\t\tisFinished = false;\r\n\t\t} else {\r\n\t\t\tfor (int j = 0; j &lt; listofFiles.length; j++) {\r\n\t\t\t\tFile file = listofFiles[j];\r\n\t\t\t\tif (file.isDirectory()) {\r\n\t\t\t\t\treplaceText(file.getAbsolutePath());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    }","title":"Delete all empty folders in Java","body":"<p>This piece of code recursively delete all the empty folders or directory:</p>\n\n<pre><code>public class DeleteEmptyDir {\nprivate static final String FOLDER_LOCATION = \"E:\\\\TEST\";\nprivate static boolean isFinished = false;\n\npublic static void main(String[] args) {\n\n    do {\n        isFinished = true;\n        replaceText(FOLDER_LOCATION);\n    } while (!isFinished);\n}\n\nprivate static void replaceText(String fileLocation) {\n    File folder = new File(fileLocation);\n    File[] listofFiles = folder.listFiles();\n    if (listofFiles.length == 0) {\n        System.out.println(\"Folder Name :: \" + folder.getAbsolutePath() + \" is deleted.\");\n        folder.delete();\n        isFinished = false;\n    } else {\n        for (int j = 0; j &lt; listofFiles.length; j++) {\n            File file = listofFiles[j];\n            if (file.isDirectory()) {\n                replaceText(file.getAbsolutePath());\n            }\n        }\n    }\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10489606,"reputation":126,"user_id":11540228,"display_name":"Daan"},"score":0,"creation_date":1656414914,"post_id":47194941,"comment_id":128561386,"body_markdown":"file is undifined","body":"file is undifined"}],"tags":[],"owner":{"account_id":3411471,"reputation":3358,"user_id":2861283,"accept_rate":20,"display_name":"Rakesh Chaudhari"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510207528,"creation_date":1510207528,"answer_id":47194941,"question_id":26017545,"body_markdown":"You can use code to delete empty folders using Java.\r\n\r\n    public static long deleteFolder(String dir) {\r\n    \r\n    \t\tFile f = new File(dir);\r\n    \t\tString listFiles[] = f.list();\r\n    \t\tlong totalSize = 0;\r\n    \t\tfor (String file : listFiles) {\r\n    \r\n    \t\t\tFile folder = new File(dir + &quot;/&quot; + file);\r\n    \t\t\tif (folder.isDirectory()) {\r\n    \t\t\t\ttotalSize += deleteFolder(folder.getAbsolutePath());\r\n    \t\t\t} else {\r\n    \t\t\t\ttotalSize += folder.length();\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tif (totalSize ==0) {\r\n    \t\t\tf.delete();\r\n    \t\t}\r\n    \r\n    \t\treturn totalSize;\r\n    \t}\r\n\r\n\r\n","title":"Delete all empty folders in Java","body":"<p>You can use code to delete empty folders using Java.</p>\n\n<pre><code>public static long deleteFolder(String dir) {\n\n        File f = new File(dir);\n        String listFiles[] = f.list();\n        long totalSize = 0;\n        for (String file : listFiles) {\n\n            File folder = new File(dir + \"/\" + file);\n            if (folder.isDirectory()) {\n                totalSize += deleteFolder(folder.getAbsolutePath());\n            } else {\n                totalSize += folder.length();\n            }\n        }\n\n        if (totalSize ==0) {\n            f.delete();\n        }\n\n        return totalSize;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10489606,"reputation":126,"user_id":11540228,"display_name":"Daan"},"score":0,"creation_date":1656413070,"post_id":65886908,"comment_id":128560681,"body_markdown":"This does not delete empty folders recursively.","body":"This does not delete empty folders recursively."}],"tags":[],"owner":{"account_id":17637797,"reputation":1850,"user_id":12800717,"display_name":"supernova"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611585716,"creation_date":1611585716,"answer_id":65886908,"question_id":26017545,"body_markdown":"Shortest code I could come up with is following Java &gt;=8 code:\r\n\r\n```\r\n        Files.walk(Paths.get(&quot;/my/base/dir/&quot;))\r\n                .sorted(Comparator.reverseOrder())\r\n                .map(Path::toFile)\r\n                .filter(File::isDirectory)\r\n                .forEach(File::delete);\r\n```\r\nAdd a second (or more) filter statement with whatever clause you need to include/exclude certain folders. **File::delete** should not delete folders with contents.\r\nUse at own risk.","title":"Delete all empty folders in Java","body":"<p>Shortest code I could come up with is following Java &gt;=8 code:</p>\n<pre><code>        Files.walk(Paths.get(&quot;/my/base/dir/&quot;))\n                .sorted(Comparator.reverseOrder())\n                .map(Path::toFile)\n                .filter(File::isDirectory)\n                .forEach(File::delete);\n</code></pre>\n<p>Add a second (or more) filter statement with whatever clause you need to include/exclude certain folders. <strong>File::delete</strong> should not delete folders with contents.\nUse at own risk.</p>\n"},{"tags":[],"owner":{"account_id":1960473,"reputation":917,"user_id":1762235,"accept_rate":71,"display_name":"typik89"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1640267418,"creation_date":1640266886,"answer_id":70462938,"question_id":26017545,"body_markdown":"Kotlin:\r\n\r\n    fun deleteAllEmptyDirectories(rootPath: Path): Collection&lt;Path&gt; =\r\n        mutableListOf&lt;Path&gt;()\r\n            .apply {\r\n                Files.walk(testPath)\r\n                    .sorted { p1, p2 -&gt; p2.count() - p1.count() }\r\n                    .map { it.toFile() }\r\n                    .filter { it.isDirectory }\r\n                    .forEach {\r\n                        if (it.listFiles().all { el -&gt; el.isDirectory &amp;&amp; contains(el.toPath()) }) {\r\n                            val path = it.toPath()\r\n                            add(path)\r\n                            Files.delete(path)\r\n                        }\r\n                    }\r\n            }\r\n\r\nTest:\r\n\r\n     private val testPath = Path.of(&quot;build&quot;, javaClass.simpleName, UUID.randomUUID().toString())\r\n\r\n    @Test\r\n    fun test() {\r\n        Files.createDirectory(testPath)\r\n\r\n        val dirWithTwoEmptySubdirs = Files.createDirectory(testPath.resolve(&quot;dirWithTwoEmptySubdirs&quot;))\r\n        val dir1 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir1&quot;))\r\n        val dir2 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir2&quot;))\r\n        val dirWithOneDiffDir = Files.createDirectory(testPath.resolve(&quot;dirWithOneDiffDir&quot;))\r\n        var emptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;empty&quot;))\r\n        val notEmptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;notempty&quot;))\r\n        Files.writeString(notEmptyDir.resolve(&quot;file.txt&quot;), &quot;asdf&quot;)\r\n\r\n        assertEquals(\r\n            setOf&lt;Path&gt;(dirWithTwoEmptySubdirs, dir1, dir2, emptyDir),\r\n            deleteAllEmptyDirectories(testPath).toSet()\r\n        )\r\n    }\r\n\r\n","title":"Delete all empty folders in Java","body":"<p>Kotlin:</p>\n<pre><code>fun deleteAllEmptyDirectories(rootPath: Path): Collection&lt;Path&gt; =\n    mutableListOf&lt;Path&gt;()\n        .apply {\n            Files.walk(testPath)\n                .sorted { p1, p2 -&gt; p2.count() - p1.count() }\n                .map { it.toFile() }\n                .filter { it.isDirectory }\n                .forEach {\n                    if (it.listFiles().all { el -&gt; el.isDirectory &amp;&amp; contains(el.toPath()) }) {\n                        val path = it.toPath()\n                        add(path)\n                        Files.delete(path)\n                    }\n                }\n        }\n</code></pre>\n<p>Test:</p>\n<pre><code> private val testPath = Path.of(&quot;build&quot;, javaClass.simpleName, UUID.randomUUID().toString())\n\n@Test\nfun test() {\n    Files.createDirectory(testPath)\n\n    val dirWithTwoEmptySubdirs = Files.createDirectory(testPath.resolve(&quot;dirWithTwoEmptySubdirs&quot;))\n    val dir1 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir1&quot;))\n    val dir2 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir2&quot;))\n    val dirWithOneDiffDir = Files.createDirectory(testPath.resolve(&quot;dirWithOneDiffDir&quot;))\n    var emptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;empty&quot;))\n    val notEmptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;notempty&quot;))\n    Files.writeString(notEmptyDir.resolve(&quot;file.txt&quot;), &quot;asdf&quot;)\n\n    assertEquals(\n        setOf&lt;Path&gt;(dirWithTwoEmptySubdirs, dir1, dir2, emptyDir),\n        deleteAllEmptyDirectories(testPath).toSet()\n    )\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":164059,"reputation":1169,"user_id":386587,"display_name":"Erk"},"score":0,"creation_date":1694016704,"post_id":72785478,"comment_id":135836855,"body_markdown":"OP does recursive file deletion, so you&#39;ll have to call `deleteEmpty` for each file you find. Also, don&#39;t hesitate to comment on any problems you see in other&#39;s answers. It increases the general quality of answers! ;)","body":"OP does recursive file deletion, so you&#39;ll have to call <code>deleteEmpty</code> for each file you find. Also, don&#39;t hesitate to comment on any problems you see in other&#39;s answers. It increases the general quality of answers! ;)"},{"owner":{"account_id":10489606,"reputation":126,"user_id":11540228,"display_name":"Daan"},"score":1,"creation_date":1694156599,"post_id":72785478,"comment_id":135856918,"body_markdown":"This does delete all subfolders, I added some comments to explain the code a bit more.","body":"This does delete all subfolders, I added some comments to explain the code a bit more."}],"tags":[],"owner":{"account_id":10489606,"reputation":126,"user_id":11540228,"display_name":"Daan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694156473,"creation_date":1656415100,"answer_id":72785478,"question_id":26017545,"body_markdown":"After reading all answers and concluding that all of them have at least one problem I still had to write it myself: \r\n\r\n    import java.io.File;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n\r\n    public class Temp {\r\n\r\n      public static void main(String[] args) {\r\n        final String path = &quot;D:\\\\&quot;;\r\n        deleteEmpty(new File(path));\r\n      }\r\n\r\n      private static int deleteEmpty(File file) {\r\n        List&lt;File&gt; toBeDeleted = Arrays.stream(file.listFiles()).sorted() //\r\n            .filter(File::isDirectory) //\r\n            // Recursive call to delete sub-directories. \r\n            // If all files in the sub-directory where deleted, also delete this directory. \r\n            .filter(f -&gt; f.listFiles().length == deleteEmpty(f)) //\r\n            .collect(Collectors.toList());\r\n        int size = toBeDeleted.size();\r\n        toBeDeleted.forEach(t -&gt; {\r\n          final String path = t.getAbsolutePath();\r\n          final boolean delete = t.delete();\r\n          System.out.println(&quot;Deleting: \\t&quot; + delete + &quot;\\t&quot; + path);\r\n        });\r\n        return size;\r\n      }\r\n\r\n    }\r\n","title":"Delete all empty folders in Java","body":"<p>After reading all answers and concluding that all of them have at least one problem I still had to write it myself:</p>\n<pre><code>import java.io.File;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class Temp {\n\n  public static void main(String[] args) {\n    final String path = &quot;D:\\\\&quot;;\n    deleteEmpty(new File(path));\n  }\n\n  private static int deleteEmpty(File file) {\n    List&lt;File&gt; toBeDeleted = Arrays.stream(file.listFiles()).sorted() //\n        .filter(File::isDirectory) //\n        // Recursive call to delete sub-directories. \n        // If all files in the sub-directory where deleted, also delete this directory. \n        .filter(f -&gt; f.listFiles().length == deleteEmpty(f)) //\n        .collect(Collectors.toList());\n    int size = toBeDeleted.size();\n    toBeDeleted.forEach(t -&gt; {\n      final String path = t.getAbsolutePath();\n      final boolean delete = t.delete();\n      System.out.println(&quot;Deleting: \\t&quot; + delete + &quot;\\t&quot; + path);\n    });\n    return size;\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14878,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1694156473,"creation_date":1411563453,"question_id":26017545,"body_markdown":"I&#39;d like to write a function that deletes all empty folders, with the option to ignore certain file types (allowed file types are stored in the hashmap) and tell if it should look inside directories.\r\n\r\n**Calling:**\r\n\r\n    HashMap&lt;String, Boolean&gt; allowedFileTypes = new HashMap&lt;String, Boolean&gt;();\r\n    allowedFileTypes.put(&quot;pdf&quot;, true);\r\n    deleteEmptyFolders(&quot;ABSOLUTE PATH&quot;, allowedFileTypes, true);\r\n\r\n**Function:**\r\n\r\n    public static void deleteEmptyFolders(String folderPath, HashMap&lt;String, Boolean&gt; allowedFileTypes, boolean followDirectory) {\r\n\r\n        File targetFolder = new File(folderPath);\r\n        File[] allFiles = targetFolder.listFiles();\r\n\r\n\r\n        if (allFiles.length == 0)\r\n            targetFolder.delete();\r\n\r\n        else {\r\n            boolean importantFiles = false;\r\n\r\n            for (File file : allFiles) {\r\n\r\n                String fileType = &quot;folder&quot;;\r\n                if (!file.isDirectory())\r\n                    fileType = file.getName().substring(file.getName().lastIndexOf(&#39;.&#39;) + 1);\r\n\r\n                if (!importantFiles)\r\n                    importantFiles = (allowedFileTypes.get(fileType) != null);\r\n\r\n                if (file.isDirectory() &amp;&amp; followDirectory)\r\n                    deleteEmptyFolders(file.getAbsolutePath(), allowedFileTypes, followDirectory);\r\n            }\r\n\r\n            // if there are no important files in the target folder\r\n            if (!importantFiles)\r\n                targetFolder.delete();\r\n        }\r\n    }\r\n\r\n\r\nThe problem is that nothing is happening, even though it looks through all folders till the end. Is this a good approach or am I missing something completely?","title":"Delete all empty folders in Java","body":"<p>I'd like to write a function that deletes all empty folders, with the option to ignore certain file types (allowed file types are stored in the hashmap) and tell if it should look inside directories.</p>\n\n<p><strong>Calling:</strong></p>\n\n<pre><code>HashMap&lt;String, Boolean&gt; allowedFileTypes = new HashMap&lt;String, Boolean&gt;();\nallowedFileTypes.put(\"pdf\", true);\ndeleteEmptyFolders(\"ABSOLUTE PATH\", allowedFileTypes, true);\n</code></pre>\n\n<p><strong>Function:</strong></p>\n\n<pre><code>public static void deleteEmptyFolders(String folderPath, HashMap&lt;String, Boolean&gt; allowedFileTypes, boolean followDirectory) {\n\n    File targetFolder = new File(folderPath);\n    File[] allFiles = targetFolder.listFiles();\n\n\n    if (allFiles.length == 0)\n        targetFolder.delete();\n\n    else {\n        boolean importantFiles = false;\n\n        for (File file : allFiles) {\n\n            String fileType = \"folder\";\n            if (!file.isDirectory())\n                fileType = file.getName().substring(file.getName().lastIndexOf('.') + 1);\n\n            if (!importantFiles)\n                importantFiles = (allowedFileTypes.get(fileType) != null);\n\n            if (file.isDirectory() &amp;&amp; followDirectory)\n                deleteEmptyFolders(file.getAbsolutePath(), allowedFileTypes, followDirectory);\n        }\n\n        // if there are no important files in the target folder\n        if (!importantFiles)\n            targetFolder.delete();\n    }\n}\n</code></pre>\n\n<p>The problem is that nothing is happening, even though it looks through all folders till the end. Is this a good approach or am I missing something completely?</p>\n"},{"tags":["java","jpa","micronaut","micronaut-data"],"comments":[{"owner":{"account_id":4129849,"reputation":3184,"user_id":3388069,"display_name":"Sascha Frinken"},"score":0,"creation_date":1569759885,"post_id":58144514,"comment_id":102693210,"body_markdown":"https://github.com/micronaut-projects/micronaut-data/issues/170","body":"<a href=\"https://github.com/micronaut-projects/micronaut-data/issues/170\" rel=\"nofollow noreferrer\">github.com/micronaut-projects/micronaut-data/issues/170</a>"},{"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"score":1,"creation_date":1569830476,"post_id":58144514,"comment_id":102709117,"body_markdown":"@SaschaFrinken it is a different issue, but I created the new one especially for this case: https://github.com/micronaut-projects/micronaut-data/issues/184","body":"@SaschaFrinken it is a different issue, but I created the new one especially for this case: <a href=\"https://github.com/micronaut-projects/micronaut-data/issues/184\" rel=\"nofollow noreferrer\">github.com/micronaut-projects/micronaut-data/issues/184</a>"}],"answers":[{"comments":[{"owner":{"account_id":8447079,"reputation":1138,"user_id":6337331,"display_name":"Mafick"},"score":1,"creation_date":1588752998,"post_id":58163900,"comment_id":109016111,"body_markdown":"Hey, I have currently the same problem,... Can you maybe provide an example of the &#39;manually&#39; mapping? I have several parts in my application where I need something like an converter and I don&#39;t know &#39;what is the best way&#39; to do it.","body":"Hey, I have currently the same problem,... Can you maybe provide an example of the &#39;manually&#39; mapping? I have several parts in my application where I need something like an converter and I don&#39;t know &#39;what is the best way&#39; to do it."},{"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"score":0,"creation_date":1588833526,"post_id":58163900,"comment_id":109052855,"body_markdown":"I added example of how I solved that using Mapstruct.","body":"I added example of how I solved that using Mapstruct."}],"tags":[],"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694156221,"creation_date":1569831198,"answer_id":58163900,"question_id":58144514,"body_markdown":"Now (in latest version 1.0.0.M1) it is not possible. So I created feature request issue for that: https://github.com/micronaut-projects/micronaut-data/issues/184\r\n\r\nCurrent workaround is to map entity bean into DTO bean in Java stream or reactive stream for example and do the properties mapping manually or by Mapstruct.\r\n\r\n\r\n----------\r\n\r\n\r\n**Update:** Here is an answer to question from comments with an example how to do the workaround using Mapstruct:\r\n\r\nAdd Mapstruct dependency into *build.gradle*:\r\n\r\n&lt;!-- language: groovy --&gt;\r\n\r\n    implementation &quot;org.mapstruct:mapstruct:$mapstructVersion&quot;\r\n    annotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\r\n    testAnnotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\r\n\r\nDefine mapper:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import org.mapstruct.Mapper;\r\n    \r\n    @Mapper(\r\n        componentModel = &quot;jsr330&quot;\r\n    )\r\n    public interface ParseErrorMapper {\r\n        ParseErrorDto entityToDto(@NotNull ParseError parseError);\r\n    \r\n        EntityReference recipeToDto(@NotNull Recipe recipe);\r\n    }\r\n\r\nAnd here is a usage of that mapper in the controller:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Controller(&quot;/parse-error&quot;)\r\n    public class ParseErrorController {\r\n        private final ParseErrorRepository repository;\r\n        private final ParseErrorMapper mapper;\r\n    \r\n        public ParseErrorController(ParseErrorRepository repository, ParseErrorMapper mapper) {\r\n            this.repository = repository;\r\n            this.mapper = mapper;\r\n        }\r\n    \r\n        @Get(&quot;all&quot;)\r\n        @Transactional\r\n        public Page&lt;ParseErrorDto&gt; getAll(final Pageable pageable) {\r\n            return repository.findAll(pageable).map(mapper::entityToDto);\r\n        }\r\n    }\r\n\r\n**Update (September 2023):** feature implemented by https://github.com/micronaut-projects/micronaut-data/pull/2495","title":"Micronaut Data DTO projection with properties from joined entities","body":"<p>Now (in latest version 1.0.0.M1) it is not possible. So I created feature request issue for that: <a href=\"https://github.com/micronaut-projects/micronaut-data/issues/184\" rel=\"nofollow noreferrer\">https://github.com/micronaut-projects/micronaut-data/issues/184</a></p>\n<p>Current workaround is to map entity bean into DTO bean in Java stream or reactive stream for example and do the properties mapping manually or by Mapstruct.</p>\n<hr />\n<p><strong>Update:</strong> Here is an answer to question from comments with an example how to do the workaround using Mapstruct:</p>\n<p>Add Mapstruct dependency into <em>build.gradle</em>:</p>\n<pre><code>implementation &quot;org.mapstruct:mapstruct:$mapstructVersion&quot;\nannotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\ntestAnnotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\n</code></pre>\n<p>Define mapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.mapstruct.Mapper;\n\n@Mapper(\n    componentModel = &quot;jsr330&quot;\n)\npublic interface ParseErrorMapper {\n    ParseErrorDto entityToDto(@NotNull ParseError parseError);\n\n    EntityReference recipeToDto(@NotNull Recipe recipe);\n}\n</code></pre>\n<p>And here is a usage of that mapper in the controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller(&quot;/parse-error&quot;)\npublic class ParseErrorController {\n    private final ParseErrorRepository repository;\n    private final ParseErrorMapper mapper;\n\n    public ParseErrorController(ParseErrorRepository repository, ParseErrorMapper mapper) {\n        this.repository = repository;\n        this.mapper = mapper;\n    }\n\n    @Get(&quot;all&quot;)\n    @Transactional\n    public Page&lt;ParseErrorDto&gt; getAll(final Pageable pageable) {\n        return repository.findAll(pageable).map(mapper::entityToDto);\n    }\n}\n</code></pre>\n<p><strong>Update (September 2023):</strong> feature implemented by <a href=\"https://github.com/micronaut-projects/micronaut-data/pull/2495\" rel=\"nofollow noreferrer\">https://github.com/micronaut-projects/micronaut-data/pull/2495</a></p>\n"}],"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3906,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58163900,"answer_count":1,"score":6,"last_activity_date":1694156221,"creation_date":1569658167,"question_id":58144514,"body_markdown":"I use Micronaut Data with JPA and have two entities. The first one is `Recipe`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Entity\r\n    public class Recipe {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n\r\n        private String name;\r\n\r\n        @ManyToOne\r\n        private Category category;\r\n\r\n        @OneToMany(mappedBy = &quot;recipe&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n        private Set&lt;Step&gt; steps;\r\n    \r\n    // + other fields, getters and setters\r\n    }\r\n\r\nThe second one is `ParseError` which refers to `Recipe`: \r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Entity\r\n    @Table(name = &quot;parse_error&quot;)\r\n    public class ParseError implements Serializable {\r\n        @Id\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        private Recipe recipe;\r\n    \r\n        @Id\r\n        @Enumerated(EnumType.ORDINAL)\r\n        @Column(name = &quot;problem_area&quot;)\r\n        private ProblemArea problemArea;\r\n    \r\n        private String message;\r\n    \r\n    // + other fields, getters and setters\r\n    }\r\n\r\nNow I would like to provide DTO in API with `ParseError` properties but not with whole `Recipe` entity because it contains ManyToOne and OneToMany relations which are not needed in this case. So I created projection DTO for that:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Introspected\r\n    public class ParseErrorDto {\r\n        private Integer recipeId;\r\n\r\n        private String recipeName;\r\n\r\n        private ParseError.ProblemArea problemArea;\r\n\r\n        private String message;\r\n    \r\n    // + getters and setters\r\n    }\r\n\r\nAnd added `listAll()` method into `ParseErrorRepository`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Repository\r\n    public interface ParseErrorRepository extends CrudRepository&lt;ParseError, Integer&gt; {\r\n        List&lt;ParseErrorDto&gt; listAll();\r\n    }\r\n\r\nBut it seems that Micronaut Data is not able to project properties from nested entities or I missed something in the DTO or the repository method:\r\n\r\n&gt; ParseErrorRepository.java:22: error: Unable to implement Repository\r\n&gt; method: ParseErrorRepository.listAll(). Property recipeId is not\r\n&gt; present in entity: ParseError\r\n\r\n\r\nI also tried to create `RecipeDto`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Introspected\r\n    public class RecipeDto {\r\n        private Integer id;\r\n    \r\n        private String name;\r\n    \r\n        // + getters and setters\r\n    }\r\n\r\nAnd updated `ParseErrorDto` accordingly:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Introspected\r\n    public class ParseErrorDto {\r\n        private RecipeDto recipe;\r\n    \r\n        private ParseError.ProblemArea problemArea;\r\n    \r\n        private String message;\r\n    \r\n        // + getters and setters\r\n    }\r\n\r\nAgain no success:\r\n\r\n&gt; ParseErrorRepository.java:22: error: Unable to implement Repository\r\n&gt; method: ParseErrorRepository.listAll(). Property [recipe] of type\r\n&gt; [RecipeDto] is not compatible with equivalent property declared in\r\n&gt; entity: ParseError\r\n\r\nIs Micronaut Data able to handle this use case by DTO projection? If not then is there another way how can I solve it in Micronaut Data?\r\n\r\n\r\n\r\n","title":"Micronaut Data DTO projection with properties from joined entities","body":"<p>I use Micronaut Data with JPA and have two entities. The first one is <code>Recipe</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Recipe {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String name;\n\n    @ManyToOne\n    private Category category;\n\n    @OneToMany(mappedBy = \"recipe\", cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n    private Set&lt;Step&gt; steps;\n\n// + other fields, getters and setters\n}\n</code></pre>\n\n<p>The second one is <code>ParseError</code> which refers to <code>Recipe</code>: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = \"parse_error\")\npublic class ParseError implements Serializable {\n    @Id\n    @ManyToOne(fetch = FetchType.LAZY)\n    private Recipe recipe;\n\n    @Id\n    @Enumerated(EnumType.ORDINAL)\n    @Column(name = \"problem_area\")\n    private ProblemArea problemArea;\n\n    private String message;\n\n// + other fields, getters and setters\n}\n</code></pre>\n\n<p>Now I would like to provide DTO in API with <code>ParseError</code> properties but not with whole <code>Recipe</code> entity because it contains ManyToOne and OneToMany relations which are not needed in this case. So I created projection DTO for that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Introspected\npublic class ParseErrorDto {\n    private Integer recipeId;\n\n    private String recipeName;\n\n    private ParseError.ProblemArea problemArea;\n\n    private String message;\n\n// + getters and setters\n}\n</code></pre>\n\n<p>And added <code>listAll()</code> method into <code>ParseErrorRepository</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface ParseErrorRepository extends CrudRepository&lt;ParseError, Integer&gt; {\n    List&lt;ParseErrorDto&gt; listAll();\n}\n</code></pre>\n\n<p>But it seems that Micronaut Data is not able to project properties from nested entities or I missed something in the DTO or the repository method:</p>\n\n<blockquote>\n  <p>ParseErrorRepository.java:22: error: Unable to implement Repository\n  method: ParseErrorRepository.listAll(). Property recipeId is not\n  present in entity: ParseError</p>\n</blockquote>\n\n<p>I also tried to create <code>RecipeDto</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Introspected\npublic class RecipeDto {\n    private Integer id;\n\n    private String name;\n\n    // + getters and setters\n}\n</code></pre>\n\n<p>And updated <code>ParseErrorDto</code> accordingly:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Introspected\npublic class ParseErrorDto {\n    private RecipeDto recipe;\n\n    private ParseError.ProblemArea problemArea;\n\n    private String message;\n\n    // + getters and setters\n}\n</code></pre>\n\n<p>Again no success:</p>\n\n<blockquote>\n  <p>ParseErrorRepository.java:22: error: Unable to implement Repository\n  method: ParseErrorRepository.listAll(). Property [recipe] of type\n  [RecipeDto] is not compatible with equivalent property declared in\n  entity: ParseError</p>\n</blockquote>\n\n<p>Is Micronaut Data able to handle this use case by DTO projection? If not then is there another way how can I solve it in Micronaut Data?</p>\n"},{"tags":["java","micronaut-client"],"owner":{"account_id":29392952,"reputation":1,"user_id":22520875,"display_name":"Rafal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694156142,"creation_date":1694156033,"question_id":77064748,"body_markdown":"I&#39;m trying to use RxStreamingHttpClient in my controller to stream 100MB file but Micronaut (v3.10.1) logs an error after starting the transfer:\r\n\r\n```\r\n16:13:20.287 [default-nioEventLoopGroup-1-4] WARN  io.netty.util.ReferenceCountUtil - Failed to release a message: PooledSlicedByteBuf(freed)\r\nio.netty.util.IllegalReferenceCountException: refCnt: 0, decrement: 1\r\n        at io.netty.util.internal.ReferenceCountUpdater.toLiveRealRefCnt(ReferenceCountUpdater.java:83)\r\n        at io.netty.util.internal.ReferenceCountUpdater.release(ReferenceCountUpdater.java:148)\r\n        at io.netty.buffer.AbstractReferenceCountedByteBuf.release(AbstractReferenceCountedByteBuf.java:101)\r\n        at io.netty.util.ReferenceCountUtil.release(ReferenceCountUtil.java:90)\r\n        at io.netty.util.ReferenceCountUtil.safeRelease(ReferenceCountUtil.java:116)\r\n        at io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:282)\r\n```\r\n\r\nand curl&#39;s output:\r\n\r\n```\r\nnwer@alpha ~/tmp $ curl --location &#39;http://localhost:8080/binary/test1&#39; -i -o test\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current Dload  Upload   Total   Spent    Left  Speed\r\n100 12489    0 12489    0     0   8642      0 --:--:--  0:00:01 --:--:--  8678\r\ncurl: (18) transfer closed with outstanding read data remaining\r\n```\r\n\r\nBelow is a method in my controller:\r\n \r\n```\r\n@Get(value = &quot;/test1&quot;, produces = MediaType.APPLICATION_OCTET_STREAM)\r\n    Flowable&lt;ByteBuffer&lt;?&gt;&gt; test1() throws MalformedURLException {\r\n    URL url = new URL(&quot;http://localhost:8085&quot;);\r\n    HttpClientConfiguration conf = new DefaultHttpClientConfiguration();\r\n    conf.setMaxContentLength(2147483647);\r\n    RxStreamingHttpClient client = RxStreamingHttpClient.create(url, conf);\r\n    return client.dataStream(HttpRequest.GET(&quot;/v1/objects/9e3aad86-491c-451c-afbc-98f8c21a6ab8/100MbFile&quot;));\r\n    }\r\n```\r\n\r\nWhat is missing in my implementation? Is this the best way to stream ~100MB files via Micronaut?","title":"How to use Micronaut&#39;s RxStreamingHttpClient","body":"<p>I'm trying to use RxStreamingHttpClient in my controller to stream 100MB file but Micronaut (v3.10.1) logs an error after starting the transfer:</p>\n<pre><code>16:13:20.287 [default-nioEventLoopGroup-1-4] WARN  io.netty.util.ReferenceCountUtil - Failed to release a message: PooledSlicedByteBuf(freed)\nio.netty.util.IllegalReferenceCountException: refCnt: 0, decrement: 1\n        at io.netty.util.internal.ReferenceCountUpdater.toLiveRealRefCnt(ReferenceCountUpdater.java:83)\n        at io.netty.util.internal.ReferenceCountUpdater.release(ReferenceCountUpdater.java:148)\n        at io.netty.buffer.AbstractReferenceCountedByteBuf.release(AbstractReferenceCountedByteBuf.java:101)\n        at io.netty.util.ReferenceCountUtil.release(ReferenceCountUtil.java:90)\n        at io.netty.util.ReferenceCountUtil.safeRelease(ReferenceCountUtil.java:116)\n        at io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:282)\n</code></pre>\n<p>and curl's output:</p>\n<pre><code>nwer@alpha ~/tmp $ curl --location 'http://localhost:8080/binary/test1' -i -o test\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current Dload  Upload   Total   Spent    Left  Speed\n100 12489    0 12489    0     0   8642      0 --:--:--  0:00:01 --:--:--  8678\ncurl: (18) transfer closed with outstanding read data remaining\n</code></pre>\n<p>Below is a method in my controller:</p>\n<pre><code>@Get(value = &quot;/test1&quot;, produces = MediaType.APPLICATION_OCTET_STREAM)\n    Flowable&lt;ByteBuffer&lt;?&gt;&gt; test1() throws MalformedURLException {\n    URL url = new URL(&quot;http://localhost:8085&quot;);\n    HttpClientConfiguration conf = new DefaultHttpClientConfiguration();\n    conf.setMaxContentLength(2147483647);\n    RxStreamingHttpClient client = RxStreamingHttpClient.create(url, conf);\n    return client.dataStream(HttpRequest.GET(&quot;/v1/objects/9e3aad86-491c-451c-afbc-98f8c21a6ab8/100MbFile&quot;));\n    }\n</code></pre>\n<p>What is missing in my implementation? Is this the best way to stream ~100MB files via Micronaut?</p>\n"},{"tags":["java","android","fonts","android-support-library"],"comments":[{"owner":{"account_id":2879578,"reputation":3377,"user_id":2470770,"display_name":"lib4backer"},"score":1,"creation_date":1518778787,"post_id":48825038,"comment_id":84654144,"body_markdown":"getFont was added in api version 26 https://developer.android.com/reference/android/support/v4/content/res/ResourcesCompat.html#getFont(android.content.Context,%20int)","body":"getFont was added in api version 26 <a href=\"https://developer.android.com/reference/android/support/v4/content/res/ResourcesCompat.html#getFont(android.content.Context,%20int)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/support/v4/content/r&zwnj;&#8203;es/&hellip;</a>"},{"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"score":0,"creation_date":1518779235,"post_id":48825038,"comment_id":84654380,"body_markdown":"but I tested and it&#39;s working on lower api&#39;s @lib4","body":"but I tested and it&#39;s working on lower api&#39;s @lib4"},{"owner":{"account_id":2879578,"reputation":3377,"user_id":2470770,"display_name":"lib4backer"},"score":0,"creation_date":1518779525,"post_id":48825038,"comment_id":84654552,"body_markdown":"Would you mind removing the underscore from the font file? Sometimes it is reported similar issue https://stackoverflow.com/questions/43142235/cannot-resolve-method-getfont","body":"Would you mind removing the underscore from the font file? Sometimes it is reported similar issue <a href=\"https://stackoverflow.com/questions/43142235/cannot-resolve-method-getfont\" title=\"cannot resolve method getfont\">stackoverflow.com/questions/43142235/&hellip;</a>"},{"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"score":0,"creation_date":1518781310,"post_id":48825038,"comment_id":84655500,"body_markdown":"that&#39;s just an example. my font name is something different and doesn&#39;t have underscore or other special character @lib4","body":"that&#39;s just an example. my font name is something different and doesn&#39;t have underscore or other special character @lib4"},{"owner":{"account_id":3197333,"reputation":4915,"user_id":2700239,"accept_rate":81,"display_name":"Fartab"},"score":0,"creation_date":1615292242,"post_id":48825038,"comment_id":117640694,"body_markdown":"@Amir_P Did you find a solution to fix this?","body":"@Amir_P Did you find a solution to fix this?"},{"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"score":0,"creation_date":1615297937,"post_id":48825038,"comment_id":117643213,"body_markdown":"Unfortunately I can&#39;t remember what I did to avoid the issue :( @Fartab","body":"Unfortunately I can&#39;t remember what I did to avoid the issue :( @Fartab"}],"answers":[{"comments":[{"owner":{"account_id":5183307,"reputation":817,"user_id":4148323,"accept_rate":0,"display_name":"Anukool srivastav"},"score":4,"creation_date":1531723647,"post_id":50957503,"comment_id":89684185,"body_markdown":"Didn&#39;t work out for the downloadable fonts that I am using. :(","body":"Didn&#39;t work out for the downloadable fonts that I am using. :("},{"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"score":0,"creation_date":1532313817,"post_id":50957503,"comment_id":89910275,"body_markdown":"seems to do the job, thanks. tested ok. did not try downloadable fonts though.","body":"seems to do the job, thanks. tested ok. did not try downloadable fonts though."}],"tags":[],"owner":{"account_id":1395692,"reputation":471,"user_id":1325490,"display_name":"dwemthy"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1529531050,"creation_date":1529531050,"answer_id":50957503,"question_id":48825038,"body_markdown":"Had this same issue, noticed a detail in the docs that helped:  \r\n\r\n&gt; When you declare font families in XML layout through the support\r\n&gt; library, use the app namespace to ensure your fonts load.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;font-family xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n      &lt;font app:fontStyle=&quot;normal&quot; app:fontWeight=&quot;400&quot; app:font=&quot;@font/myfont-Regular&quot;/&gt;\r\n      &lt;font app:fontStyle=&quot;italic&quot; app:fontWeight=&quot;400&quot; app:font=&quot;@font/myfont-Italic&quot; /&gt;\r\n    &lt;/font-family&gt;\r\n\r\nI had been using the &#39;android&#39; namespace before, changing to the &#39;app&#39; namespace made my fonts load on older devices correctly.","title":"Font resource could not be retrieved","body":"<p>Had this same issue, noticed a detail in the docs that helped:  </p>\n\n<blockquote>\n  <p>When you declare font families in XML layout through the support\n  library, use the app namespace to ensure your fonts load.</p>\n</blockquote>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;font-family xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n  &lt;font app:fontStyle=\"normal\" app:fontWeight=\"400\" app:font=\"@font/myfont-Regular\"/&gt;\n  &lt;font app:fontStyle=\"italic\" app:fontWeight=\"400\" app:font=\"@font/myfont-Italic\" /&gt;\n&lt;/font-family&gt;\n</code></pre>\n\n<p>I had been using the 'android' namespace before, changing to the 'app' namespace made my fonts load on older devices correctly.</p>\n"},{"comments":[{"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"score":0,"creation_date":1549551771,"post_id":54576144,"comment_id":95950017,"body_markdown":"Thanks for your answer but I&#39;m not using downloadable fonts","body":"Thanks for your answer but I&#39;m not using downloadable fonts"},{"owner":{"account_id":980790,"reputation":8154,"user_id":1000551,"display_name":"Vadim Kotov"},"score":0,"creation_date":1584858143,"post_id":54576144,"comment_id":107564389,"body_markdown":"@Shrikant I just used a different emulator. On a real device you shouldn&#39;t encounter this error, because this version of Google Play services is very old.","body":"@Shrikant I just used a different emulator. On a real device you shouldn&#39;t encounter this error, because this version of Google Play services is very old."},{"owner":{"account_id":10422024,"reputation":579,"user_id":7684427,"accept_rate":60,"display_name":"Shrikant"},"score":3,"creation_date":1584947736,"post_id":54576144,"comment_id":107587041,"body_markdown":"@VadimKotov But I&#39;m getting this issue on real device","body":"@VadimKotov But I&#39;m getting this issue on real device"},{"owner":{"account_id":980790,"reputation":8154,"user_id":1000551,"display_name":"Vadim Kotov"},"score":0,"creation_date":1585319063,"post_id":54576144,"comment_id":107725019,"body_markdown":"@Shrikant I&#39;ve got some crash reports from real devices too, I think [this discussion](https://github.com/AppIntro/AppIntro/pull/666) can be helpful. Will try to refactor my code according to the link.","body":"@Shrikant I&#39;ve got some crash reports from real devices too, I think <a href=\"https://github.com/AppIntro/AppIntro/pull/666\" rel=\"nofollow noreferrer\">this discussion</a> can be helpful. Will try to refactor my code according to the link."},{"owner":{"account_id":253392,"reputation":1551,"user_id":532054,"accept_rate":37,"display_name":"lorenzo"},"score":0,"creation_date":1614515730,"post_id":54576144,"comment_id":117403464,"body_markdown":"How to test the version of Google Play services?","body":"How to test the version of Google Play services?"}],"tags":[],"owner":{"account_id":980790,"reputation":8154,"user_id":1000551,"display_name":"Vadim Kotov"},"comment_count":5,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1549551426,"creation_date":1549551426,"answer_id":54576144,"question_id":48825038,"body_markdown":"I got the same crash while using [Downloadable fonts][1] on API level 16 with Google Play services 9.2.56 (emulator).  \r\n\r\nIf you&#39;re using this, then a **device must have Google Play services version 11 or higher** to use the Google Fonts provider (see this note in the [docs][2]).\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts\r\n  [2]: https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts#via-android-studio","title":"Font resource could not be retrieved","body":"<p>I got the same crash while using <a href=\"https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts\" rel=\"noreferrer\">Downloadable fonts</a> on API level 16 with Google Play services 9.2.56 (emulator).  </p>\n\n<p>If you're using this, then a <strong>device must have Google Play services version 11 or higher</strong> to use the Google Fonts provider (see this note in the <a href=\"https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts#via-android-studio\" rel=\"noreferrer\">docs</a>).</p>\n"},{"tags":[],"owner":{"account_id":1939965,"reputation":843,"user_id":1746379,"display_name":"Algorithm and Blues"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1562753180,"creation_date":1562753180,"answer_id":56968379,"question_id":48825038,"body_markdown":"I had the same problem with a TTF file in R.font when using `ResourcesCompat.getFont()`.\r\n\r\nIt turns out that Android didn&#39;t like this TTF file for some reason. There was no info in logcat, but debugging showed that `TypefaceCompat.createFromResourcesFontFile()` failed.\r\n\r\nI replaced the TTF file with another, similar font and had no problems since.","title":"Font resource could not be retrieved","body":"<p>I had the same problem with a TTF file in R.font when using <code>ResourcesCompat.getFont()</code>.</p>\n\n<p>It turns out that Android didn't like this TTF file for some reason. There was no info in logcat, but debugging showed that <code>TypefaceCompat.createFromResourcesFontFile()</code> failed.</p>\n\n<p>I replaced the TTF file with another, similar font and had no problems since.</p>\n"},{"tags":[],"owner":{"account_id":11383064,"reputation":494,"user_id":8345451,"display_name":"Divya Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593234336,"creation_date":1593234336,"answer_id":62606108,"question_id":48825038,"body_markdown":"In my case, even after upgrading Gradle version to most recent one didn&#39;t work.\r\nWhat worked for me was a really trivial solution, **updating the dependencies version to latest versions**. I don&#39;t know it might work or not in your case, but maybe you should try doing it once.","title":"Font resource could not be retrieved","body":"<p>In my case, even after upgrading Gradle version to most recent one didn't work.\nWhat worked for me was a really trivial solution, <strong>updating the dependencies version to latest versions</strong>. I don't know it might work or not in your case, but maybe you should try doing it once.</p>\n"},{"tags":[],"owner":{"account_id":3762163,"reputation":2306,"user_id":3126760,"accept_rate":37,"display_name":"1234567"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620902282,"creation_date":1620902282,"answer_id":67517812,"question_id":48825038,"body_markdown":"while using **Downloadable fonts** on API level 16\r\n\r\nThe fonts need to be **downloaded** so its better to check the Internet connection and download them, even when they are provided from the fonts folder.","title":"Font resource could not be retrieved","body":"<p>while using <strong>Downloadable fonts</strong> on API level 16</p>\n<p>The fonts need to be <strong>downloaded</strong> so its better to check the Internet connection and download them, even when they are provided from the fonts folder.</p>\n"},{"tags":[],"owner":{"account_id":18594182,"reputation":532,"user_id":13550653,"display_name":"Prateek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694155938,"creation_date":1651974104,"answer_id":72157504,"question_id":48825038,"body_markdown":"I was having the same issue, so I followed another approach and it work fine for me.\r\n\r\n1. Add a new directory in the **app/src/main** named as **assets** and make another subdirectory inside it as **fonts**\r\n2. Add a font file (eg. poppins.ttf) inside the fonts subdirectory\r\n3. If you are a Java developer then write this code in your Activity/Fragment file-  \r\n   ```java\r\n   Typeface font = Typeface.createFromAsset(getAssets(),&quot;fonts/poppins.ttf&quot;); \r\n   yourTextView.setTypeface(font);\r\n   ```\r\n   and if you are a Kotlin developer then you can use this,\r\n  \r\n   ```kotlin\r\n   val customTypeFace = Typeface.createFromAsset(context.assets, \r\n                                                 &quot;fonts/poppins-Light.ttf&quot;)\r\n   ```\r\n","title":"Font resource could not be retrieved","body":"<p>I was having the same issue, so I followed another approach and it work fine for me.</p>\n<ol>\n<li><p>Add a new directory in the <strong>app/src/main</strong> named as <strong>assets</strong> and make another subdirectory inside it as <strong>fonts</strong></p>\n</li>\n<li><p>Add a font file (eg. poppins.ttf) inside the fonts subdirectory</p>\n</li>\n<li><p>If you are a Java developer then write this code in your Activity/Fragment file-</p>\n<pre class=\"lang-java prettyprint-override\"><code>Typeface font = Typeface.createFromAsset(getAssets(),&quot;fonts/poppins.ttf&quot;); \nyourTextView.setTypeface(font);\n</code></pre>\n<p>and if you are a Kotlin developer then you can use this,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val customTypeFace = Typeface.createFromAsset(context.assets, \n                                              &quot;fonts/poppins-Light.ttf&quot;)\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11131,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"answer_count":6,"score":29,"last_activity_date":1694155938,"creation_date":1518777835,"question_id":48825038,"body_markdown":"I&#39;m using `compileSdk` and `targetSdk` version 27 and in last release I used new font resource feature for my project but after a day I got 3 crashes for this line of code\r\n\r\n    Typeface typeface = ResourcesCompat.getFont(this, R.font.my_font);\r\nand the crash report says it&#39;s because of `android.content.res.Resources$NotFoundException` and Font resource could not be retrieved. All 3 crashes happened for users with android version `5.1.1`. Is this a bug in support library or I&#39;m doing something wrong?","title":"Font resource could not be retrieved","body":"<p>I'm using <code>compileSdk</code> and <code>targetSdk</code> version 27 and in last release I used new font resource feature for my project but after a day I got 3 crashes for this line of code</p>\n\n<pre><code>Typeface typeface = ResourcesCompat.getFont(this, R.font.my_font);\n</code></pre>\n\n<p>and the crash report says it's because of <code>android.content.res.Resources$NotFoundException</code> and Font resource could not be retrieved. All 3 crashes happened for users with android version <code>5.1.1</code>. Is this a bug in support library or I'm doing something wrong?</p>\n"},{"tags":["java","google-my-business-api","google-my-business","google-business-profile-api","google-business-profile"],"comments":[{"owner":{"account_id":15273161,"reputation":71,"user_id":11019735,"display_name":"Andrew Walker"},"score":1,"creation_date":1695918629,"post_id":77061046,"comment_id":136091099,"body_markdown":"I&#39;ve had the same issues, with direction actions being especially delayed, sometimes up to 10 days. When I reach out to support they say this is expected behavior. My solution was to re-pull the last 14 days every run","body":"I&#39;ve had the same issues, with direction actions being especially delayed, sometimes up to 10 days. When I reach out to support they say this is expected behavior. My solution was to re-pull the last 14 days every run"},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1696234842,"post_id":77061046,"comment_id":136122328,"body_markdown":"@AndrewWalker: thank you for the response, my problem is that we have clients that they have more than 5000 stores, so the repetitive task is somehow time and resource consuming.","body":"@AndrewWalker: thank you for the response, my problem is that we have clients that they have more than 5000 stores, so the repetitive task is somehow time and resource consuming."}],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694155806,"creation_date":1694101355,"question_id":77061046,"body_markdown":"I am having problems by the `Google Business Performance API` being late for more than 5 days to return the insights of my locations ( documentation here: [Google Business Performance][1] ). \r\nThis was the same problem I have asked before [this question][2].\r\nI see it continues to change, I need to be sure about the values I read. \r\nThe code is \r\n\r\n  \r\n\r\n          private enum PerformanceMetrics {\r\n                BUSINESS_IMPRESSIONS_DESKTOP_MAPS,\r\n                BUSINESS_IMPRESSIONS_DESKTOP_SEARCH,\r\n                BUSINESS_IMPRESSIONS_MOBILE_MAPS , \r\n                BUSINESS_IMPRESSIONS_MOBILE_SEARCH,\r\n                BUSINESS_CONVERSATIONS,\r\n                BUSINESS_DIRECTION_REQUESTS, \r\n                CALL_CLICKS,\r\n                WEBSITE_CLICKS\r\n            }\r\n        public static void main(String[] args) throws Exception {\r\n        \r\n            business_profile_performance = initializeMyBusiness();\r\n        \r\n            locationsList.stream().forEach(u -&gt; {\r\n        \r\n                for(PerformanceMetrics dailyMetric:PerformanceMetrics.values() ) {\r\n                    try {\r\n                        \r\n                        BusinessProfilePerformance.Locations.GetDailyMetricsTimeSeries metricReport =\r\n                                business_profile_performance.locations().\r\n                                getDailyMetricsTimeSeries(locationID).\r\n                                setDailyMetric(dailyMetric.toString()).\r\n                                setDailyRangeStartDateYear(Integer.valueOf(&quot;2022&quot;)).\r\n                                setDailyRangeStartDateMonth(Integer.valueOf(&quot;12&quot;)).\r\n                                setDailyRangeStartDateDay(Integer.valueOf(&quot;26&quot;)).\r\n        \r\n                                setDailyRangeEndDateYear(Integer.valueOf(&quot;2022&quot;)).\r\n                                setDailyRangeEndDateMonth(Integer.valueOf(&quot;12&quot;)).\r\n                                setDailyRangeEndDateDay(Integer.valueOf(&quot;27&quot;));\r\n        \r\n        \r\n                        GetDailyMetricsTimeSeriesResponse response = metricReport.execute();\r\n                        if (!response.isEmpty()) {\r\n                            System.out.println(&quot; Response == &quot; + response);\r\n                        }\r\n        \r\n                    } catch (Exception e) {\r\n                        System.out.println(e);\r\n                    }\r\n        \r\n                }\r\n            });\r\n    \r\n    }\r\n\r\n Any Experience? \r\nThank you all.\r\n\r\n\r\n  [1]: https://developers.google.com/my-business/reference/performance/rest/v1/locations/fetchMultiDailyMetricsTimeSeries\r\n  [2]: https://stackoverflow.com/questions/74953430/how-long-is-the-google-business-profile-performance-api-latency-for-preparing-th\r\n\r\n\r\n\r\n","title":"How much delay has the Google Business Performance API to return the info fetchMultiDailyMetricsTimeSeries","body":"<p>I am having problems by the <code>Google Business Performance API</code> being late for more than 5 days to return the insights of my locations ( documentation here: <a href=\"https://developers.google.com/my-business/reference/performance/rest/v1/locations/fetchMultiDailyMetricsTimeSeries\" rel=\"nofollow noreferrer\">Google Business Performance</a> ).\nThis was the same problem I have asked before <a href=\"https://stackoverflow.com/questions/74953430/how-long-is-the-google-business-profile-performance-api-latency-for-preparing-th\">this question</a>.\nI see it continues to change, I need to be sure about the values I read.\nThe code is</p>\n<pre><code>      private enum PerformanceMetrics {\n            BUSINESS_IMPRESSIONS_DESKTOP_MAPS,\n            BUSINESS_IMPRESSIONS_DESKTOP_SEARCH,\n            BUSINESS_IMPRESSIONS_MOBILE_MAPS , \n            BUSINESS_IMPRESSIONS_MOBILE_SEARCH,\n            BUSINESS_CONVERSATIONS,\n            BUSINESS_DIRECTION_REQUESTS, \n            CALL_CLICKS,\n            WEBSITE_CLICKS\n        }\n    public static void main(String[] args) throws Exception {\n    \n        business_profile_performance = initializeMyBusiness();\n    \n        locationsList.stream().forEach(u -&gt; {\n    \n            for(PerformanceMetrics dailyMetric:PerformanceMetrics.values() ) {\n                try {\n                    \n                    BusinessProfilePerformance.Locations.GetDailyMetricsTimeSeries metricReport =\n                            business_profile_performance.locations().\n                            getDailyMetricsTimeSeries(locationID).\n                            setDailyMetric(dailyMetric.toString()).\n                            setDailyRangeStartDateYear(Integer.valueOf(&quot;2022&quot;)).\n                            setDailyRangeStartDateMonth(Integer.valueOf(&quot;12&quot;)).\n                            setDailyRangeStartDateDay(Integer.valueOf(&quot;26&quot;)).\n    \n                            setDailyRangeEndDateYear(Integer.valueOf(&quot;2022&quot;)).\n                            setDailyRangeEndDateMonth(Integer.valueOf(&quot;12&quot;)).\n                            setDailyRangeEndDateDay(Integer.valueOf(&quot;27&quot;));\n    \n    \n                    GetDailyMetricsTimeSeriesResponse response = metricReport.execute();\n                    if (!response.isEmpty()) {\n                        System.out.println(&quot; Response == &quot; + response);\n                    }\n    \n                } catch (Exception e) {\n                    System.out.println(e);\n                }\n    \n            }\n        });\n\n}\n</code></pre>\n<p>Any Experience?\nThank you all.</p>\n"},{"tags":["java","spring","spring-boot","migration"],"answers":[{"tags":[],"owner":{"account_id":18516603,"reputation":31,"user_id":13490614,"display_name":"iking1211"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694155542,"creation_date":1694155542,"answer_id":77064706,"question_id":77063149,"body_markdown":"In the docs it says \r\n\r\n&gt; Note: a pattern and a path must both be absolute or must both be relative in order for the two to match. Therefore, it is recommended that users of this implementation to sanitize patterns in order to prefix them with &quot;/&quot; as it makes sense in the context in which they&#39;re used.\r\n\r\nThe path in your request mapping is absolute, please check if the failing test are accessing the controller by a relative route or absolute route.","title":"Migrate RequestMapping from older spring to spring 5 unable to replace /**/ at the beginning","body":"<p>In the docs it says</p>\n<blockquote>\n<p>Note: a pattern and a path must both be absolute or must both be relative in order for the two to match. Therefore, it is recommended that users of this implementation to sanitize patterns in order to prefix them with &quot;/&quot; as it makes sense in the context in which they're used.</p>\n</blockquote>\n<p>The path in your request mapping is absolute, please check if the failing test are accessing the controller by a relative route or absolute route.</p>\n"}],"owner":{"account_id":7377353,"reputation":171,"user_id":5956553,"accept_rate":100,"display_name":"student0495"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694155542,"creation_date":1694124969,"question_id":77063149,"body_markdown":"I&#39;m having issues migrating a Java application from 14 to 17 due to the upgrade on spring to version 5. The problem I have is the following:\r\n\r\nI have a controller with `@RequestMapping(value = &quot;/**/{[something:[^.]*}&quot;)`\r\n\r\nThe application seems to work just fine on localhost, however some paths are built wrongly on the server and some JUnits are failing, throwing: `org.springframework.web.util.pattern.PatternParseException: No more pattern data allowed after {*...} or ** pattern element`. Reading the spring docs here https://spring.io/blog/2020/06/30/url-matching-with-pathpattern-in-spring-mvc/ I discovered we cannot use anymore `/**/` at the beginning, and it&#39;s only allowed at the end.\r\n\r\nIs there any way to still keep the same behavior and replace ** at the beginning with something equivalent? I leave below the docs for the AntPathMatcher, since there is a difference between * and ** and I&#39;m using `spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER` to still use the AntPathMatcher.\r\nhttps://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html\r\n\r\nAnd I&#39;ve also looked at the following samples with no success.\r\nhttps://www.baeldung.com/spring-5-mvc-url-matching\r\n\r\nAny help/suggestion/advice is welcome. Thanks!","title":"Migrate RequestMapping from older spring to spring 5 unable to replace /**/ at the beginning","body":"<p>I'm having issues migrating a Java application from 14 to 17 due to the upgrade on spring to version 5. The problem I have is the following:</p>\n<p>I have a controller with <code>@RequestMapping(value = &quot;/**/{[something:[^.]*}&quot;)</code></p>\n<p>The application seems to work just fine on localhost, however some paths are built wrongly on the server and some JUnits are failing, throwing: <code>org.springframework.web.util.pattern.PatternParseException: No more pattern data allowed after {*...} or ** pattern element</code>. Reading the spring docs here <a href=\"https://spring.io/blog/2020/06/30/url-matching-with-pathpattern-in-spring-mvc/\" rel=\"nofollow noreferrer\">https://spring.io/blog/2020/06/30/url-matching-with-pathpattern-in-spring-mvc/</a> I discovered we cannot use anymore <code>/**/</code> at the beginning, and it's only allowed at the end.</p>\n<p>Is there any way to still keep the same behavior and replace ** at the beginning with something equivalent? I leave below the docs for the AntPathMatcher, since there is a difference between * and ** and I'm using <code>spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER</code> to still use the AntPathMatcher.\n<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html</a></p>\n<p>And I've also looked at the following samples with no success.\n<a href=\"https://www.baeldung.com/spring-5-mvc-url-matching\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-5-mvc-url-matching</a></p>\n<p>Any help/suggestion/advice is welcome. Thanks!</p>\n"},{"tags":["java","bigdecimal","avro"],"answers":[{"comments":[{"owner":{"account_id":2774333,"reputation":408,"user_id":2388205,"display_name":"Tadej"},"score":0,"creation_date":1528338782,"post_id":38213894,"comment_id":88472211,"body_markdown":"This worked for me for adding data to Kafka, but I couldn&#39;t use InfluxDB connector with kafka type set to bytes, since it couldn&#39;t cast the values to InfluxDB readable format. Changing `bytes` to `string` solve the problem.","body":"This worked for me for adding data to Kafka, but I couldn&#39;t use InfluxDB connector with kafka type set to bytes, since it couldn&#39;t cast the values to InfluxDB readable format. Changing <code>bytes</code> to <code>string</code> solve the problem."}],"tags":[],"owner":{"account_id":6675345,"reputation":171,"user_id":5150188,"display_name":"Robert Walker"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1467757933,"creation_date":1467757933,"answer_id":38213894,"question_id":38213063,"body_markdown":"Avro introduced logical types in 1.7.7 (I believe) that should help you serialize decimal.\r\n\r\nhttps://avro.apache.org/docs/1.8.1/spec.html#Decimal","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>Avro introduced logical types in 1.7.7 (I believe) that should help you serialize decimal.</p>\n\n<p><a href=\"https://avro.apache.org/docs/1.8.1/spec.html#Decimal\" rel=\"noreferrer\">https://avro.apache.org/docs/1.8.1/spec.html#Decimal</a></p>\n"},{"comments":[{"owner":{"account_id":7253656,"reputation":1250,"user_id":5533075,"accept_rate":100,"display_name":"Dwhitz"},"score":0,"creation_date":1500317624,"post_id":45151385,"comment_id":77272238,"body_markdown":"[Please format your code properly](https://stackoverflow.com/editing-help)","body":"<a href=\"https://stackoverflow.com/editing-help\">Please format your code properly</a>"},{"owner":{"account_id":2103408,"reputation":6138,"user_id":1870400,"accept_rate":42,"display_name":"user1870400"},"score":5,"creation_date":1516185524,"post_id":45151385,"comment_id":83582507,"body_markdown":"Does this really work? what if I want to do this in python or Golang?","body":"Does this really work? what if I want to do this in python or Golang?"},{"owner":{"account_id":2774333,"reputation":408,"user_id":2388205,"display_name":"Tadej"},"score":0,"creation_date":1528402856,"post_id":45151385,"comment_id":88506766,"body_markdown":"This seems to work, but instead of value it creates an object, so you have to access the actual value like `object.string`. Because of this I&#39;ve decided for @Roberts answer.","body":"This seems to work, but instead of value it creates an object, so you have to access the actual value like <code>object.string</code>. Because of this I&#39;ve decided for @Roberts answer."},{"owner":{"account_id":1666859,"reputation":2605,"user_id":1534084,"accept_rate":100,"display_name":"Martin Mucha"},"score":1,"creation_date":1558438456,"post_id":45151385,"comment_id":99093394,"body_markdown":"@user1870400 yes for serialization it does work. For deserialization, no it does not work. It fails with classcast exception because of out.writeString((CharSequence) datum); in org.apache.avro.generic.GenericDatumWriter#writeString(java.lang.Object, org.apache.avro.io.Encoder).\n\nIt&#39;s one of things with does not work in avro or arent taken seriously by team (enums serialization, optionality, mime-types ...)","body":"@user1870400 yes for serialization it does work. For deserialization, no it does not work. It fails with classcast exception because of out.writeString((CharSequence) datum); in org.apache.avro.generic.GenericDatumWriter#writeString(java.&zwnj;&#8203;lang.Object, org.apache.avro.io.Encoder).  It&#39;s one of things with does not work in avro or arent taken seriously by team (enums serialization, optionality, mime-types ...)"}],"tags":[],"owner":{"account_id":7913441,"reputation":21,"user_id":5976719,"display_name":"rajani chauhan"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1559822664,"creation_date":1500316771,"answer_id":45151385,"question_id":38213063,"body_markdown":"Here is the code :\r\n\r\n    &quot;type&quot;: [ {\r\n        &quot;type&quot;: &quot;string&quot;,\r\n        &quot;java-class&quot;: &quot;java.math.BigDecimal&quot;\r\n     } ]","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>Here is the code :</p>\n\n<pre><code>\"type\": [ {\n    \"type\": \"string\",\n    \"java-class\": \"java.math.BigDecimal\"\n } ]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14593176,"reputation":115,"user_id":10539722,"display_name":"3AKOBAH"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694155323,"creation_date":1694155323,"answer_id":77064682,"question_id":38213063,"body_markdown":"To serialize a Java BigDecimal in Avro, you can define an Avro schema that uses the &quot;decimal&quot; logical type. The &quot;decimal&quot; logical type allows you to specify the precision and scale of the BigDecimal. Here&#39;s an example schema definition for a BigDecimal with 2 digits after the decimal point:\r\n\r\n    {\r\n      &quot;name&quot;: &quot;amount&quot;,\r\n      &quot;type&quot;: {\r\n        &quot;type&quot;: &quot;bytes&quot;,\r\n        &quot;logicalType&quot;: &quot;decimal&quot;,\r\n        &quot;precision&quot;: 18,   // Adjust precision as needed\r\n        &quot;scale&quot;: 2        // Adjust scale as needed\r\n      }\r\n    }\r\n\r\n- &quot;amount&quot; is the field name.\r\n- &quot;bytes&quot; is the base Avro type used to store the BigDecimal.\r\n- &quot;logicalType&quot; is set to &quot;decimal&quot; to indicate that this field represents a decimal number.\r\n- &quot;precision&quot; is set to 18 to allow up to 18 digits in total (adjust as needed).\r\n- &quot;scale&quot; is set to 2 to specify that 2 of the digits are after the decimal point (adjust as needed).","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>To serialize a Java BigDecimal in Avro, you can define an Avro schema that uses the &quot;decimal&quot; logical type. The &quot;decimal&quot; logical type allows you to specify the precision and scale of the BigDecimal. Here's an example schema definition for a BigDecimal with 2 digits after the decimal point:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;amount&quot;,\n  &quot;type&quot;: {\n    &quot;type&quot;: &quot;bytes&quot;,\n    &quot;logicalType&quot;: &quot;decimal&quot;,\n    &quot;precision&quot;: 18,   // Adjust precision as needed\n    &quot;scale&quot;: 2        // Adjust scale as needed\n  }\n}\n</code></pre>\n<ul>\n<li>&quot;amount&quot; is the field name.</li>\n<li>&quot;bytes&quot; is the base Avro type used to store the BigDecimal.</li>\n<li>&quot;logicalType&quot; is set to &quot;decimal&quot; to indicate that this field represents a decimal number.</li>\n<li>&quot;precision&quot; is set to 18 to allow up to 18 digits in total (adjust as needed).</li>\n<li>&quot;scale&quot; is set to 2 to specify that 2 of the digits are after the decimal point (adjust as needed).</li>\n</ul>\n"}],"owner":{"account_id":6627875,"reputation":5335,"user_id":5117474,"accept_rate":93,"display_name":"Pythoner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18549,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":38213894,"answer_count":3,"score":13,"last_activity_date":1694155323,"creation_date":1467754098,"question_id":38213063,"body_markdown":"Avro schemas are defined using JSON. Schemas are composed of primitive types (null, boolean, int, long, float, double, bytes, and string) and complex types (record, enum, array, map, union, and fixed). I want to ask which one is proper for BigDecimal.","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>Avro schemas are defined using JSON. Schemas are composed of primitive types (null, boolean, int, long, float, double, bytes, and string) and complex types (record, enum, array, map, union, and fixed). I want to ask which one is proper for BigDecimal.</p>\n"},{"tags":["java","android","android-recyclerview","android-animation","shimmer"],"comments":[{"owner":{"account_id":17385276,"reputation":974,"user_id":12596713,"display_name":"ahmad bajwa"},"score":0,"creation_date":1618850746,"post_id":67052848,"comment_id":118722070,"body_markdown":"try out this library https://github.com/sharish/ShimmerRecyclerView","body":"try out this library <a href=\"https://github.com/sharish/ShimmerRecyclerView\" rel=\"nofollow noreferrer\">github.com/sharish/ShimmerRecyclerView</a>"},{"owner":{"account_id":5055881,"reputation":3266,"user_id":15055605,"display_name":"YaMiN"},"score":1,"creation_date":1622694206,"post_id":67052848,"comment_id":119866491,"body_markdown":"@SagarRawal It&#39;s probably because your imageview doesn&#39;t have definite size, try changing your imageview height to like 48dp for example.","body":"@SagarRawal It&#39;s probably because your imageview doesn&#39;t have definite size, try changing your imageview height to like 48dp for example."},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622695895,"post_id":67052848,"comment_id":119866772,"body_markdown":"@YaMiN Do you mean I have to change the size in image view or in shimmer XML?","body":"@YaMiN Do you mean I have to change the size in image view or in shimmer XML?"},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622697131,"post_id":67052848,"comment_id":119867027,"body_markdown":"@YaMiN ok I have tried to make shimmer height to 200dp and the shimmer is working but after that images Is not loading I know why now but the problem is I have to make the image height wrap_content because I want to make it like Pinterest  where the height is adjusted according to the mage height so if I make image height fix I will not get that the adjustable height element","body":"@YaMiN ok I have tried to make shimmer height to 200dp and the shimmer is working but after that images Is not loading I know why now but the problem is I have to make the image height wrap_content because I want to make it like Pinterest  where the height is adjusted according to the mage height so if I make image height fix I will not get that the adjustable height element"},{"owner":{"account_id":1020274,"reputation":826,"user_id":1030813,"display_name":"Rajnish Mishra"},"score":0,"creation_date":1622702016,"post_id":67052848,"comment_id":119868354,"body_markdown":"Are you trying the shimmer effect inside a recyclerView","body":"Are you trying the shimmer effect inside a recyclerView"}],"answers":[{"tags":[],"owner":{"account_id":12621038,"reputation":433,"user_id":9176523,"display_name":"Dheeraj Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1622719238,"creation_date":1622698429,"answer_id":67815881,"question_id":67052848,"body_markdown":"By default, the wrapcontent doesn&#39;t have any size so it is 0dp you need to define 50dp or something for the height of shimmer then only you can see the shimmering.\r\n\r\nCan refer this [blog][1]\r\nor try to use this\r\n\r\n\r\n&gt; post_item_container_search.xml\r\n\r\n\r\n\r\n     &lt;com.google.android.material.imageview.ShapeableImageView\r\n     xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n             android:id=&quot;@+id/imagePostSearch&quot;\r\n             android:layout_width=&quot;200dp&quot;\r\n             android:layout_height=&quot;200dp&quot;\r\n             android:scaleType=&quot;fitCenter&quot;\r\n             android:layout_marginStart=&quot;6dp&quot;\r\n             android:layout_marginTop=&quot;11dp&quot;\r\n             android:layout_marginEnd=&quot;6dp&quot;\r\n             android:contentDescription=&quot;@string/todo&quot;\r\n             app:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\r\n\r\n  [1]: https://blog.mindorks.com/using-shimmer-effect-placeholder-in-android","title":"Shimmer Effect not working on Height wrap_content","body":"<p>By default, the wrapcontent doesn't have any size so it is 0dp you need to define 50dp or something for the height of shimmer then only you can see the shimmering.</p>\n<p>Can refer this <a href=\"https://blog.mindorks.com/using-shimmer-effect-placeholder-in-android\" rel=\"nofollow noreferrer\">blog</a>\nor try to use this</p>\n<blockquote>\n<p>post_item_container_search.xml</p>\n</blockquote>\n<pre><code> &lt;com.google.android.material.imageview.ShapeableImageView\n xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n         android:id=&quot;@+id/imagePostSearch&quot;\n         android:layout_width=&quot;200dp&quot;\n         android:layout_height=&quot;200dp&quot;\n         android:scaleType=&quot;fitCenter&quot;\n         android:layout_marginStart=&quot;6dp&quot;\n         android:layout_marginTop=&quot;11dp&quot;\n         android:layout_marginEnd=&quot;6dp&quot;\n         android:contentDescription=&quot;@string/todo&quot;\n         app:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622698906,"post_id":67815913,"comment_id":119867473,"body_markdown":"i have tried it but then I&#39;m not getting the adjustable height element","body":"i have tried it but then I&#39;m not getting the adjustable height element"},{"owner":{"account_id":5680624,"reputation":1330,"user_id":4491971,"display_name":"Mohit Ajwani"},"score":0,"creation_date":1622700561,"post_id":67815913,"comment_id":119867892,"body_markdown":"Did you keep the `minHeight` on both the images - actual and shimmer? What is the size of the new image?","body":"Did you keep the <code>minHeight</code> on both the images - actual and shimmer? What is the size of the new image?"},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622703770,"post_id":67815913,"comment_id":119868911,"body_markdown":"Brother, I have tried all three possible ways  1. adding minHieght in shimmer image View .2. adding minHieght in actual imageView 3. adding minHieght to both actual imageView and shimmer imageView","body":"Brother, I have tried all three possible ways  1. adding minHieght in shimmer image View .2. adding minHieght in actual imageView 3. adding minHieght to both actual imageView and shimmer imageView"},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622704253,"post_id":67815913,"comment_id":119869072,"body_markdown":",in 1st and 3rd option images are loading but not according what I want and in 2nd images are not loading at all","body":",in 1st and 3rd option images are loading but not according what I want and in 2nd images are not loading at all"},{"owner":{"account_id":5680624,"reputation":1330,"user_id":4491971,"display_name":"Mohit Ajwani"},"score":0,"creation_date":1622704359,"post_id":67815913,"comment_id":119869116,"body_markdown":"Is it possible for you to attach screenshots/short video to the question showing what is happening?","body":"Is it possible for you to attach screenshots/short video to the question showing what is happening?"},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622706518,"post_id":67815913,"comment_id":119869974,"body_markdown":"I have added a photo of how it looks like when I add minHieght to shimmer image or in both","body":"I have added a photo of how it looks like when I add minHieght to shimmer image or in both"},{"owner":{"account_id":5680624,"reputation":1330,"user_id":4491971,"display_name":"Mohit Ajwani"},"score":0,"creation_date":1622707529,"post_id":67815913,"comment_id":119870350,"body_markdown":"@SagarRawal your layoutManager seems like LinearLayoutManager. Use the GridLayoutManager in this solution.","body":"@SagarRawal your layoutManager seems like LinearLayoutManager. Use the GridLayoutManager in this solution."},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622708190,"post_id":67815913,"comment_id":119870585,"body_markdown":"I have changed to grid layout but still the issue is going on","body":"I have changed to grid layout but still the issue is going on"}],"tags":[],"owner":{"account_id":5680624,"reputation":1330,"user_id":4491971,"display_name":"Mohit Ajwani"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622698627,"creation_date":1622698627,"answer_id":67815913,"question_id":67052848,"body_markdown":"Please keep `android:minHeight` for the `ImageView` as it will give you a minimum height and also `android:height` can be `wrap_content` so it grows if the image is larger than `minHeight`.\r\n\r\nFor example,\r\n\r\n```\r\n&lt;com.google.android.material.imageview.ShapeableImageView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\nandroid:id=&quot;@+id/imageShimmer&quot;\r\nandroid:layout_width=&quot;match_parent&quot;\r\nandroid:layout_height=&quot;wrap_content&quot;\r\nandroid:minHeight=&quot;100dp&quot;\r\nandroid:layout_marginStart=&quot;11dp&quot;\r\nandroid:layout_marginTop=&quot;11dp&quot;\r\nandroid:background=&quot;#E7E7E7&quot;\r\nandroid:contentDescription=&quot;@string/todo&quot;\r\napp:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\r\n\r\n```\r\n","title":"Shimmer Effect not working on Height wrap_content","body":"<p>Please keep <code>android:minHeight</code> for the <code>ImageView</code> as it will give you a minimum height and also <code>android:height</code> can be <code>wrap_content</code> so it grows if the image is larger than <code>minHeight</code>.</p>\n<p>For example,</p>\n<pre><code>&lt;com.google.android.material.imageview.ShapeableImageView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nandroid:id=&quot;@+id/imageShimmer&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;\nandroid:minHeight=&quot;100dp&quot;\nandroid:layout_marginStart=&quot;11dp&quot;\nandroid:layout_marginTop=&quot;11dp&quot;\nandroid:background=&quot;#E7E7E7&quot;\nandroid:contentDescription=&quot;@string/todo&quot;\napp:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\n\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622703724,"post_id":67816307,"comment_id":119868896,"body_markdown":"brother can u explain the code a little bit more","body":"brother can u explain the code a little bit more"},{"owner":{"account_id":17857352,"reputation":188,"user_id":12971639,"display_name":"sandeep dhami"},"score":0,"creation_date":1622718636,"post_id":67816307,"comment_id":119874991,"body_markdown":"@SagarRawal Please take a look","body":"@SagarRawal Please take a look"}],"tags":[],"owner":{"account_id":17857352,"reputation":188,"user_id":12971639,"display_name":"sandeep dhami"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622718600,"creation_date":1622701134,"answer_id":67816307,"question_id":67052848,"body_markdown":"You can create a dummy view for shimmer with fixed height, make its visibility to visible and show it until the image loads, and once the image is loaded make the dummy view visibility gone.\r\n\r\n//XML\r\n  \r\n\r\n    &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;shimmerView //You can use your own\r\n                android:id=&quot;@+id/dummyShimmerView&quot;\r\n                android:layout_width=&quot;100dp&quot;\r\n                android:layout_height=&quot;100dp&quot;/&gt;\r\n    \r\n            &lt;ImageView\r\n                android:id=&quot;@+id/postImageView&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:visibility=&quot;gone&quot;/&gt;\r\n    \r\n        &lt;/RelativeLayout&gt;\r\n\r\n    //dummyShimmerView visibility is visible byDefault\r\n    Glide.with(context)\r\n                .load(url)\r\n                .listener(object : RequestListener&lt;Drawable&gt; {\r\n                    override fun onLoadFailed(e: GlideException?, model: Any?, target: Target&lt;Drawable&gt;?, isFirstResource: Boolean): Boolean {\r\n                        //TODO: something on exception\r\n                    }\r\n                    override fun onResourceReady(resource: Drawable?, model: Any?, target: Target&lt;Drawable&gt;?, dataSource: DataSource?, isFirstResource: Boolean): Boolean {\r\n                        Log.d(TAG, &quot;OnResourceReady&quot;)\r\n                        dummyShimmerView.visibility = View.GONE\r\n                        postImageView.visibility = View.VISIBLE\r\n                        return false\r\n                    }\r\n                })\r\n                .into(imgView)","title":"Shimmer Effect not working on Height wrap_content","body":"<p>You can create a dummy view for shimmer with fixed height, make its visibility to visible and show it until the image loads, and once the image is loaded make the dummy view visibility gone.</p>\n<p>//XML</p>\n<pre><code>&lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;shimmerView //You can use your own\n            android:id=&quot;@+id/dummyShimmerView&quot;\n            android:layout_width=&quot;100dp&quot;\n            android:layout_height=&quot;100dp&quot;/&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/postImageView&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:visibility=&quot;gone&quot;/&gt;\n\n    &lt;/RelativeLayout&gt;\n\n//dummyShimmerView visibility is visible byDefault\nGlide.with(context)\n            .load(url)\n            .listener(object : RequestListener&lt;Drawable&gt; {\n                override fun onLoadFailed(e: GlideException?, model: Any?, target: Target&lt;Drawable&gt;?, isFirstResource: Boolean): Boolean {\n                    //TODO: something on exception\n                }\n                override fun onResourceReady(resource: Drawable?, model: Any?, target: Target&lt;Drawable&gt;?, dataSource: DataSource?, isFirstResource: Boolean): Boolean {\n                    Log.d(TAG, &quot;OnResourceReady&quot;)\n                    dummyShimmerView.visibility = View.GONE\n                    postImageView.visibility = View.VISIBLE\n                    return false\n                }\n            })\n            .into(imgView)\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1623041634,"post_id":67860281,"comment_id":119955122,"body_markdown":"do I have to implement this method in search fragment java file?","body":"do I have to implement this method in search fragment java file?"},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1623043698,"post_id":67860281,"comment_id":119955556,"body_markdown":"Error :- int android.graphics.Bitmap.getHeight()&#39; on a null object reference","body":"Error :- int android.graphics.Bitmap.getHeight()&#39; on a null object reference"},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1623044604,"post_id":67860281,"comment_id":119955758,"body_markdown":"Inside an activity or fragment of course. Check [here](https://stackoverflow.com/questions/6495898/findviewbyid-in-fragment) to know how to get an id in a fragment. The bitmap is the image that you want to reload. You can use the shimmer image in this case.","body":"Inside an activity or fragment of course. Check <a href=\"https://stackoverflow.com/questions/6495898/findviewbyid-in-fragment\">here</a> to know how to get an id in a fragment. The bitmap is the image that you want to reload. You can use the shimmer image in this case."},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1623045722,"post_id":67860281,"comment_id":119956041,"body_markdown":"https://stackoverflow.com/questions/67866395/error-attempt-to-invoke-virtual-method-int-android-graphics-bitmap-getheight please see this question of mine with the error","body":"<a href=\"https://stackoverflow.com/questions/67866395/error-attempt-to-invoke-virtual-method-int-android-graphics-bitmap-getheight\" title=\"error attempt to invoke virtual method int android graphics bitmap getheight\">stackoverflow.com/questions/67866395/&hellip;</a> please see this question of mine with the error"}],"tags":[],"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1622990421,"creation_date":1622990421,"answer_id":67860281,"question_id":67052848,"body_markdown":"&gt; After implementing a fixed height of eg 200dp in shimmer it works but after that images are not loading\r\n\r\nIn that case, you should probably set an absolute width/height for the `ImageView` first. Later, you can set it back to `WARP_CONTENT` if you really need to. But first you&#39;ll need an estimated/absolute width/height for the view.\r\n\r\n```java\r\nint height = bitmap.getHeight();\r\nint width = bitmap.getWidth();\r\n\r\nShapeableImageView siv = findViewById(R.id.imagePostSearch);\r\nViewGroup.LayoutParams params = siv.getLayoutParams();\r\nparams.height = height;\r\nparams.width = width;\r\n\r\n//To set it back to warp content or match parent:\r\nparams.height = ViewGroup.LayoutParams.WRAP_CONTENT;\r\nparams.width = ViewGroup.LayoutParams.MATCH_PARENT;\r\n```","title":"Shimmer Effect not working on Height wrap_content","body":"<blockquote>\n<p>After implementing a fixed height of eg 200dp in shimmer it works but after that images are not loading</p>\n</blockquote>\n<p>In that case, you should probably set an absolute width/height for the <code>ImageView</code> first. Later, you can set it back to <code>WARP_CONTENT</code> if you really need to. But first you'll need an estimated/absolute width/height for the view.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int height = bitmap.getHeight();\nint width = bitmap.getWidth();\n\nShapeableImageView siv = findViewById(R.id.imagePostSearch);\nViewGroup.LayoutParams params = siv.getLayoutParams();\nparams.height = height;\nparams.width = width;\n\n//To set it back to warp content or match parent:\nparams.height = ViewGroup.LayoutParams.WRAP_CONTENT;\nparams.width = ViewGroup.LayoutParams.MATCH_PARENT;\n</code></pre>\n"}],"owner":{"display_name":"user15537898"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2707,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":67860281,"answer_count":4,"score":0,"last_activity_date":1694155231,"creation_date":1618203314,"question_id":67052848,"body_markdown":"I&#39;m trying to implement the shimmer effect with the Height of wrap_content but the images are not loading, I know why it is not loading the images because the imageView has wrap_content and the shimmer also has wrap_content but I want the Height Should be  wrap_content and not fixed.\r\n\r\nAfter implementing a fixed height of eg 200dp in shimmer it works but after that images are not loading\r\n\r\nI want to make it like Pinterest where the height is adjusted according to the image\r\n\r\n**XML Files** \r\n\r\n\r\n*post_item_container_search.xml*\r\n\r\n    &lt;com.google.android.material.imageview.ShapeableImageView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/imagePostSearch&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginStart=&quot;6dp&quot;\r\n        android:layout_marginTop=&quot;11dp&quot;\r\n        android:layout_marginEnd=&quot;6dp&quot;\r\n        android:contentDescription=&quot;@string/todo&quot;\r\n        app:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\r\n\r\n\r\n*post_item_containe_shimmer.xml*\r\n\r\n  \r\n\r\n    &lt;com.google.android.material.imageview.ShapeableImageView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:id=&quot;@+id/imageShimmer&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_marginStart=&quot;11dp&quot;\r\n    android:layout_marginTop=&quot;11dp&quot;\r\n    android:background=&quot;#E7E7E7&quot;\r\n    android:contentDescription=&quot;@string/todo&quot;\r\n    app:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\r\n\r\nthis how it looks like after adding minHeight to both or in actual imageView\r\n\r\n![this how it looks like after adding minHeight to both or in actual imageView](https://i.stack.imgur.com/nXQUV.jpg)","title":"Shimmer Effect not working on Height wrap_content","body":"<p>I'm trying to implement the shimmer effect with the Height of wrap_content but the images are not loading, I know why it is not loading the images because the imageView has wrap_content and the shimmer also has wrap_content but I want the Height Should be  wrap_content and not fixed.</p>\n<p>After implementing a fixed height of eg 200dp in shimmer it works but after that images are not loading</p>\n<p>I want to make it like Pinterest where the height is adjusted according to the image</p>\n<p><strong>XML Files</strong></p>\n<p><em>post_item_container_search.xml</em></p>\n<pre><code>&lt;com.google.android.material.imageview.ShapeableImageView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:id=&quot;@+id/imagePostSearch&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginStart=&quot;6dp&quot;\n    android:layout_marginTop=&quot;11dp&quot;\n    android:layout_marginEnd=&quot;6dp&quot;\n    android:contentDescription=&quot;@string/todo&quot;\n    app:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\n</code></pre>\n<p><em>post_item_containe_shimmer.xml</em></p>\n<pre><code>&lt;com.google.android.material.imageview.ShapeableImageView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nandroid:id=&quot;@+id/imageShimmer&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;\nandroid:layout_marginStart=&quot;11dp&quot;\nandroid:layout_marginTop=&quot;11dp&quot;\nandroid:background=&quot;#E7E7E7&quot;\nandroid:contentDescription=&quot;@string/todo&quot;\napp:shapeAppearanceOverlay=&quot;@style/RoundedCorner&quot; /&gt;\n</code></pre>\n<p>this how it looks like after adding minHeight to both or in actual imageView</p>\n<p><img src=\"https://i.stack.imgur.com/nXQUV.jpg\" alt=\"this how it looks like after adding minHeight to both or in actual imageView\" /></p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","swagger-2.0"],"comments":[{"owner":{"account_id":26412664,"reputation":1,"user_id":20061550,"display_name":"bijay"},"score":0,"creation_date":1668317836,"post_id":74418656,"comment_id":131373700,"body_markdown":"pls check the image link for the error","body":"pls check the image link for the error"},{"owner":{"account_id":15593813,"reputation":543,"user_id":11249957,"display_name":"dodekja"},"score":0,"creation_date":1668334721,"post_id":74418656,"comment_id":131375809,"body_markdown":"Please, post error messages as text.","body":"Please, post error messages as text."}],"answers":[{"comments":[{"owner":{"account_id":20846020,"reputation":83,"user_id":15311495,"display_name":"GDS K S"},"score":0,"creation_date":1681000393,"post_id":74474668,"comment_id":133988987,"body_markdown":"Can you share the pom xml dependencies for this as well","body":"Can you share the pom xml dependencies for this as well"}],"tags":[],"owner":{"account_id":26701199,"reputation":21,"user_id":20308225,"display_name":"miguel30452"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1668931932,"creation_date":1668684389,"answer_id":74474668,"question_id":74418656,"body_markdown":"Try to add this line to your application.properties\r\n\r\n    spring.mvc.pathmatch.matching-strategy = ANT_PATH_MATCHER\r\n\r\nAnd this is an example of a working swagger configuration file\r\n```\r\n@Configuration\r\n@EnableSwagger2\r\npublic class SwaggerConfiguration {\r\n    private static final String TITLE = &quot;Flight API&quot;;\r\n    private static final String DESCRIPTION = &quot;Descripcion API Flight&quot;;\r\n    private static final String BASE_PACKAGE = &quot;com.hiberus.flight.controller&quot;;\r\n    private static final String VERSION = &quot;v1&quot;;\r\n    @Bean\r\n    public Docket swagger() {\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.basePackage(BASE_PACKAGE))\r\n                .build()\r\n                .forCodeGeneration(true)\r\n                .apiInfo(new ApiInfoBuilder().title(TITLE).description(DESCRIPTION).version(VERSION).build());\r\n    }\r\n}\r\n```","title":"Error creating bean with name &#39;swagger2Controller&#39;: Lookup method resolution failed","body":"<p>Try to add this line to your application.properties</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy = ANT_PATH_MATCHER\n</code></pre>\n<p>And this is an example of a working swagger configuration file</p>\n<pre><code>@Configuration\n@EnableSwagger2\npublic class SwaggerConfiguration {\n    private static final String TITLE = &quot;Flight API&quot;;\n    private static final String DESCRIPTION = &quot;Descripcion API Flight&quot;;\n    private static final String BASE_PACKAGE = &quot;com.hiberus.flight.controller&quot;;\n    private static final String VERSION = &quot;v1&quot;;\n    @Bean\n    public Docket swagger() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.basePackage(BASE_PACKAGE))\n                .build()\n                .forCodeGeneration(true)\n                .apiInfo(new ApiInfoBuilder().title(TITLE).description(DESCRIPTION).version(VERSION).build());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1694171394,"post_id":77064651,"comment_id":135859626,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77064651/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25983441,"reputation":1,"user_id":19696725,"display_name":"Amrit Adhikari"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694154941,"creation_date":1694154941,"answer_id":77064651,"question_id":74418656,"body_markdown":"**For Spring Boot 3**\r\n\r\n   \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Configuration\r\n    public class OpenAPIConfig {\r\n\r\n        @Bean\r\n        public OpenAPI registrationOpenAPI() {\r\n            return new OpenAPI()\r\n                    .info(new Info().title(&quot;Your API Title&quot;)\r\n                            .description(&quot;Your API Description&quot;)\r\n                            .version(&quot;1.0&quot;));\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-yaml --&gt;\r\n\r\n    #OpenAPI Properties\r\n    springdoc:\r\n      api-docs:\r\n        path: /api-docs\r\n      swagger-ui:\r\n        path: /swagger-ui.html\r\n        enabled: true\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Error creating bean with name &#39;swagger2Controller&#39;: Lookup method resolution failed","body":"<p><strong>For Spring Boot 3</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class OpenAPIConfig {\n\n    @Bean\n    public OpenAPI registrationOpenAPI() {\n        return new OpenAPI()\n                .info(new Info().title(&quot;Your API Title&quot;)\n                        .description(&quot;Your API Description&quot;)\n                        .version(&quot;1.0&quot;));\n    }\n}\n</code></pre>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>#OpenAPI Properties\nspringdoc:\n  api-docs:\n    path: /api-docs\n  swagger-ui:\n    path: /swagger-ui.html\n    enabled: true\n</code></pre>\n"}],"owner":{"account_id":26412664,"reputation":1,"user_id":20061550,"display_name":"bijay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694154941,"creation_date":1668316853,"question_id":74418656,"body_markdown":"![image preview][1]while implementing swagger in my project i am facing this issue.\r\n\r\nhere is my build.gradle file and my swagger config file.\r\n\r\n```\r\n@Configuration\r\n@EnableSwagger2\r\n@EnableWebMvc\r\npublic class MisToolSwaggerConfig {\r\n@Beanpublic Docket api() {\r\nreturn new Docket(DocumentationType.SWAGGER_2).select()\t.apis(RequestHandlerSelectors.basePackage(&quot;co.oasys.mis.tool.restapi&quot;)).paths(PathSelectors.any())\r\n\t\t\t\t.build();\r\n\t}\r\n```\r\n\r\n\r\n\r\n\r\n\r\nwhen i run my application this error is showing\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/f84Zd.png","title":"Error creating bean with name &#39;swagger2Controller&#39;: Lookup method resolution failed","body":"<p><img src=\"https://i.stack.imgur.com/f84Zd.png\" alt=\"image preview\" />while implementing swagger in my project i am facing this issue.</p>\n<p>here is my build.gradle file and my swagger config file.</p>\n<pre><code>@Configuration\n@EnableSwagger2\n@EnableWebMvc\npublic class MisToolSwaggerConfig {\n@Beanpublic Docket api() {\nreturn new Docket(DocumentationType.SWAGGER_2).select() .apis(RequestHandlerSelectors.basePackage(&quot;co.oasys.mis.tool.restapi&quot;)).paths(PathSelectors.any())\n                .build();\n    }\n</code></pre>\n<p>when i run my application this error is showing</p>\n"},{"tags":["java","json","jackson","jackson-databind"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694155631,"post_id":77064599,"comment_id":135856738,"body_markdown":"Jackson isn&#39;t the problem. The problem is that you are writing to a `ByteArrayOutputStream`, which will keep everything as a `byte[]` in memory. If you write to some other stream, like a file or socket, you should be fine.","body":"Jackson isn&#39;t the problem. The problem is that you are writing to a <code>ByteArrayOutputStream</code>, which will keep everything as a <code>byte[]</code> in memory. If you write to some other stream, like a file or socket, you should be fine."},{"owner":{"account_id":2422232,"reputation":2985,"user_id":2114952,"accept_rate":71,"display_name":"Oleksandr H"},"score":0,"creation_date":1694156927,"post_id":77064599,"comment_id":135856980,"body_markdown":"@Jorn but why if I&#39;m testing with the same amount of data method 1 is working fine, but method 2 is not?","body":"@Jorn but why if I&#39;m testing with the same amount of data method 1 is working fine, but method 2 is not?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694157007,"post_id":77064599,"comment_id":135856994,"body_markdown":"Maybe it decides to enlarge the `byte[]` at a different time, and the second method happens to need more memory for the copy? This is machine-dependent, so only you can really answer that question.","body":"Maybe it decides to enlarge the <code>byte[]</code> at a different time, and the second method happens to need more memory for the copy? This is machine-dependent, so only you can really answer that question."},{"owner":{"account_id":2422232,"reputation":2985,"user_id":2114952,"accept_rate":71,"display_name":"Oleksandr H"},"score":0,"creation_date":1694158311,"post_id":77064599,"comment_id":135857212,"body_markdown":"@Jorn ok, if we don&#39;t consider `OutOfMemoryError` how can I achieve the same result (I mean data structure) using Jackson?","body":"@Jorn ok, if we don&#39;t consider <code>OutOfMemoryError</code> how can I achieve the same result (I mean data structure) using Jackson?"}],"owner":{"account_id":2422232,"reputation":2985,"user_id":2114952,"accept_rate":71,"display_name":"Oleksandr H"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694154413,"creation_date":1694154413,"question_id":77064599,"body_markdown":"I&#39;m trying to convert a list of entities to a specific format:\r\n```\r\n\t/* this method converts list of dto to\r\n\t*       [\r\n\t*         {&quot;field1&quot;: &quot;a&quot;},\r\n\t*         {&quot;field1&quot;: &quot;b&quot;},\r\n\t*         {&quot;field1&quot;: &quot;c&quot;}\r\n\t*       ]\r\n\t* \r\n\t* */ \r\n\tpublic byte[] transform1(MyDto dto) throws JsonProcessingException {\r\n\t\treturn dto.getEntities() == null ||\r\n\t\tdto.getEntities().isEmpty() ? new byte[]{} : new ObjectMapper().writeValueAsBytes(dto.getEntities());\r\n\t}\r\n\r\n\t/*\r\n\tMy goal is to convert list to following shape (as bytes):\r\n\t* \r\n\t*         {&quot;field1&quot;: &quot;a&quot;}\r\n\t*         {&quot;field1&quot;: &quot;b&quot;}\r\n\t*         {&quot;field1&quot;: &quot;c&quot;}\r\n\t*\r\n\t*          Note: there are no [] braces, objects separated by \\n\r\n\t */\r\n\tpublic byte[] transform2(MyDto dto) throws IOException {\r\n\t\tif (dto.getEntities() == null || dto.getEntities().isEmpty()){\r\n\t\t\treturn new byte[]{};\r\n\t\t}\r\n\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\ttry (SequenceWriter seq = mapper.writer().withRootValueSeparator(&quot;\\n&quot;).writeValues(baos)) {\r\n\t\t\tfor (Integer entity : dto.getEntities()) {\r\n\t\t\t\tseq.write(entity);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn baos.toByteArray();\r\n\t}\r\n```\r\n\r\nThe problem with `transform2` is that it leads to `OutOfMemoryError`. Does Jackson have some standard way to achieve the same result as transform2 but in a more efficient way? Or do I need to implement my own method? Any suggestions?","title":"Jackson ObjectMapper convert list to byte array with new line separator","body":"<p>I'm trying to convert a list of entities to a specific format:</p>\n<pre><code>    /* this method converts list of dto to\n    *       [\n    *         {&quot;field1&quot;: &quot;a&quot;},\n    *         {&quot;field1&quot;: &quot;b&quot;},\n    *         {&quot;field1&quot;: &quot;c&quot;}\n    *       ]\n    * \n    * */ \n    public byte[] transform1(MyDto dto) throws JsonProcessingException {\n        return dto.getEntities() == null ||\n        dto.getEntities().isEmpty() ? new byte[]{} : new ObjectMapper().writeValueAsBytes(dto.getEntities());\n    }\n\n    /*\n    My goal is to convert list to following shape (as bytes):\n    * \n    *         {&quot;field1&quot;: &quot;a&quot;}\n    *         {&quot;field1&quot;: &quot;b&quot;}\n    *         {&quot;field1&quot;: &quot;c&quot;}\n    *\n    *          Note: there are no [] braces, objects separated by \\n\n     */\n    public byte[] transform2(MyDto dto) throws IOException {\n        if (dto.getEntities() == null || dto.getEntities().isEmpty()){\n            return new byte[]{};\n        }\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        ObjectMapper mapper = new ObjectMapper();\n        try (SequenceWriter seq = mapper.writer().withRootValueSeparator(&quot;\\n&quot;).writeValues(baos)) {\n            for (Integer entity : dto.getEntities()) {\n                seq.write(entity);\n            }\n        }\n        return baos.toByteArray();\n    }\n</code></pre>\n<p>The problem with <code>transform2</code> is that it leads to <code>OutOfMemoryError</code>. Does Jackson have some standard way to achieve the same result as transform2 but in a more efficient way? Or do I need to implement my own method? Any suggestions?</p>\n"},{"tags":["java","sockets","network-programming","spark-structured-streaming"],"owner":{"account_id":42079,"reputation":10061,"user_id":122466,"accept_rate":38,"display_name":"Aadith Ramia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694154346,"creation_date":1694154060,"question_id":77064576,"body_markdown":"My structured streaming application is trying to read from socket. \r\n\r\n            SparkSession sparkSession = SparkSession.builder()                \r\n                .appName(&quot;trialapp&quot;)\r\n                .master(&quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n        Dataset&lt;Row&gt; lines = sparkSession.readStream().format(&quot;socket&quot;)\r\n                .option(&quot;host&quot;, &quot;localhost&quot;)\r\n                .option(&quot;port&quot;, &quot;1234&quot;)\r\n                .load();\r\n\r\n        System.out.println(&quot;streaming source ready : &quot; + lines.isStreaming());\r\n  \r\n                lines.writeStream()\r\n                .outputMode(&quot;append&quot;) \r\n                .format(&quot;console&quot;)\r\n                .trigger(Trigger.ProcessingTime(1000))\r\n                .start()\r\n                .awaitTermination();\r\n\r\nI am running this on a windows machine. I am sending messages to port 1234 using ncat command. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhen I run the program, the logs repeatedly say theres no incoming messages\r\n\r\n[![enter image description here][2]][2] \r\n\r\nI have a ncat listener running in parallel listening to the same port and that one is receiving messages\r\n\r\n[![enter image description here][3]][3]\r\n\r\nWhy is my Spark program not able to read the messages?\r\n\r\n  [1]: https://i.stack.imgur.com/51V0U.png\r\n  [2]: https://i.stack.imgur.com/juUBt.png\r\n  [3]: https://i.stack.imgur.com/QsRs4.png","title":"Spark Structured streaming with Java - unable to read from socket","body":"<p>My structured streaming application is trying to read from socket.</p>\n<pre><code>        SparkSession sparkSession = SparkSession.builder()                \n            .appName(&quot;trialapp&quot;)\n            .master(&quot;local&quot;)\n            .getOrCreate();\n\n    Dataset&lt;Row&gt; lines = sparkSession.readStream().format(&quot;socket&quot;)\n            .option(&quot;host&quot;, &quot;localhost&quot;)\n            .option(&quot;port&quot;, &quot;1234&quot;)\n            .load();\n\n    System.out.println(&quot;streaming source ready : &quot; + lines.isStreaming());\n\n            lines.writeStream()\n            .outputMode(&quot;append&quot;) \n            .format(&quot;console&quot;)\n            .trigger(Trigger.ProcessingTime(1000))\n            .start()\n            .awaitTermination();\n</code></pre>\n<p>I am running this on a windows machine. I am sending messages to port 1234 using ncat command.</p>\n<p><a href=\"https://i.stack.imgur.com/51V0U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/51V0U.png\" alt=\"enter image description here\" /></a></p>\n<p>When I run the program, the logs repeatedly say theres no incoming messages</p>\n<p><a href=\"https://i.stack.imgur.com/juUBt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/juUBt.png\" alt=\"enter image description here\" /></a></p>\n<p>I have a ncat listener running in parallel listening to the same port and that one is receiving messages</p>\n<p><a href=\"https://i.stack.imgur.com/QsRs4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QsRs4.png\" alt=\"enter image description here\" /></a></p>\n<p>Why is my Spark program not able to read the messages?</p>\n"},{"tags":["java","android","wifi-direct"],"owner":{"account_id":20616386,"reputation":1060,"user_id":15134376,"display_name":"Jungwon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694154045,"creation_date":1694154045,"question_id":77064574,"body_markdown":"I would like to retrieve information about devices capable of wifi direct connection to Android.  \r\n\r\nFirst, click Settings-&gt;Connections-&gt;wifi-&gt;wifi direct on your Android device and you will see devices that can be connected.  \r\n\r\n\r\nNow when I click the button in my app, the devices that can connect to the wifi dircet should be shown in the console as `Log.d();`.  \r\n\r\nHowever, contrary to my wishes, the number of devices is returned as 0, so information about the device cannot be retrieved.\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private WifiP2pManager wifiP2pManager;\r\n    private Channel channel;\r\n    private BroadcastReceiver wifiDirectReceiver;\r\n    private Button searchButton;\r\n\r\n    private Handler handler = new Handler();\r\n    private static final long SEARCH_INTERVAL = 30000;\r\n\r\n\r\n    private Runnable searchRunnable = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            discoverPeers();\r\n            handler.postDelayed(this, SEARCH_INTERVAL);\r\n        }\r\n    };\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        wifiP2pManager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);\r\n        channel = wifiP2pManager.initialize(this, getMainLooper(), null);\r\n\r\n        wifiDirectReceiver = new WiFiDirectReceiver();\r\n        IntentFilter intentFilter = new IntentFilter();\r\n        intentFilter.addAction(WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION);\r\n        intentFilter.addAction(WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION);\r\n        registerReceiver(wifiDirectReceiver, intentFilter);\r\n\r\n        searchButton = findViewById(R.id.btn_print);\r\n        searchButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n          \r\n                Log.d(&quot;MyApp&quot;, &quot;clicked button&quot;);\r\n                startDiscovery();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void startDiscovery() {\r\n      \r\n        handler.removeCallbacks(searchRunnable); \r\n        handler.post(searchRunnable); \r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        unregisterReceiver(wifiDirectReceiver);\r\n    }\r\n\r\n    private void discoverPeers() {\r\n        wifiP2pManager.discoverPeers(channel, new WifiP2pManager.ActionListener() {\r\n            @Override\r\n            public void onSuccess() {\r\n                \r\n            }\r\n\r\n            @Override\r\n            public void onFailure(int reasonCode) {\r\n                \r\n            }\r\n        });\r\n    }\r\n\r\n    private class WiFiDirectReceiver extends BroadcastReceiver {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            String action = intent.getAction();\r\n\r\n            if (WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION.equals(action)) {\r\n               \r\n                wifiP2pManager.requestPeers(channel, new WifiP2pManager.PeerListListener() {\r\n                    @Override\r\n                    public void onPeersAvailable(WifiP2pDeviceList peers) {\r\n                        Log.d(&quot;WiFiDirect&quot;, &quot;peers : &quot; + peers.getDeviceList().size());\r\n                        for (WifiP2pDevice device : peers.getDeviceList()) {\r\n                            \r\n                            Log.d(&quot;WiFiDirect&quot;, &quot;Device name: &quot; + device.deviceName);\r\n                            Log.d(&quot;WiFiDirect&quot;, &quot;Device address: &quot; + device.deviceAddress);\r\n                           \r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"How to get a device that can connect to wifi direct on android","body":"<p>I would like to retrieve information about devices capable of wifi direct connection to Android.</p>\n<p>First, click Settings-&gt;Connections-&gt;wifi-&gt;wifi direct on your Android device and you will see devices that can be connected.</p>\n<p>Now when I click the button in my app, the devices that can connect to the wifi dircet should be shown in the console as <code>Log.d();</code>.</p>\n<p>However, contrary to my wishes, the number of devices is returned as 0, so information about the device cannot be retrieved.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private WifiP2pManager wifiP2pManager;\n    private Channel channel;\n    private BroadcastReceiver wifiDirectReceiver;\n    private Button searchButton;\n\n    private Handler handler = new Handler();\n    private static final long SEARCH_INTERVAL = 30000;\n\n\n    private Runnable searchRunnable = new Runnable() {\n        @Override\n        public void run() {\n            discoverPeers();\n            handler.postDelayed(this, SEARCH_INTERVAL);\n        }\n    };\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        wifiP2pManager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);\n        channel = wifiP2pManager.initialize(this, getMainLooper(), null);\n\n        wifiDirectReceiver = new WiFiDirectReceiver();\n        IntentFilter intentFilter = new IntentFilter();\n        intentFilter.addAction(WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION);\n        intentFilter.addAction(WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION);\n        registerReceiver(wifiDirectReceiver, intentFilter);\n\n        searchButton = findViewById(R.id.btn_print);\n        searchButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n          \n                Log.d(&quot;MyApp&quot;, &quot;clicked button&quot;);\n                startDiscovery();\n            }\n        });\n    }\n\n\n    private void startDiscovery() {\n      \n        handler.removeCallbacks(searchRunnable); \n        handler.post(searchRunnable); \n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        unregisterReceiver(wifiDirectReceiver);\n    }\n\n    private void discoverPeers() {\n        wifiP2pManager.discoverPeers(channel, new WifiP2pManager.ActionListener() {\n            @Override\n            public void onSuccess() {\n                \n            }\n\n            @Override\n            public void onFailure(int reasonCode) {\n                \n            }\n        });\n    }\n\n    private class WiFiDirectReceiver extends BroadcastReceiver {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n\n            if (WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION.equals(action)) {\n               \n                wifiP2pManager.requestPeers(channel, new WifiP2pManager.PeerListListener() {\n                    @Override\n                    public void onPeersAvailable(WifiP2pDeviceList peers) {\n                        Log.d(&quot;WiFiDirect&quot;, &quot;peers : &quot; + peers.getDeviceList().size());\n                        for (WifiP2pDevice device : peers.getDeviceList()) {\n                            \n                            Log.d(&quot;WiFiDirect&quot;, &quot;Device name: &quot; + device.deviceName);\n                            Log.d(&quot;WiFiDirect&quot;, &quot;Device address: &quot; + device.deviceAddress);\n                           \n                        }\n                    }\n                });\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-poi","openxml","apache-poi-4","concurrentmodificationexception"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1694154268,"post_id":77064555,"comment_id":135856519,"body_markdown":"`for(IBodyElement element : elements)` uses an iterator internally. Maybe create a copy of `elements` to iterate over? I assume `elements` is a mutable reference to internals, which gets changed when you call `insertNewParagraph()`.","body":"<code>for(IBodyElement element : elements)</code> uses an iterator internally. Maybe create a copy of <code>elements</code> to iterate over? I assume <code>elements</code> is a mutable reference to internals, which gets changed when you call <code>insertNewParagraph()</code>."},{"owner":{"account_id":28242228,"reputation":9,"user_id":21589845,"display_name":"Furqan Ahmed"},"score":0,"creation_date":1694159294,"post_id":77064555,"comment_id":135857387,"body_markdown":"@Kayaman I didn&#39;t get what you mean by creating a copy of elements. Is it possible for you to provide some code snippet for this?","body":"@Kayaman I didn&#39;t get what you mean by creating a copy of elements. Is it possible for you to provide some code snippet for this?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694159406,"post_id":77064555,"comment_id":135857399,"body_markdown":"Create a new list containing the contents of `elements`. Then iterate through the list you created.","body":"Create a new list containing the contents of <code>elements</code>. Then iterate through the list you created."},{"owner":{"account_id":28242228,"reputation":9,"user_id":21589845,"display_name":"Furqan Ahmed"},"score":0,"creation_date":1694252773,"post_id":77064555,"comment_id":135869178,"body_markdown":"@Kayaman Many thanks, your suggestion works. One thing I would like to ask `XWPFParagraph paragraph = this.paragraph.getDocument().insertNewParagraph(paragraphCursor);` this line is not working for a table paragraph. `this.paragraph` is a valid XWPFTable Cell&#39;s paragraph but upon executing the line for a table it is returning null. Can you please guide me in this regard?","body":"@Kayaman Many thanks, your suggestion works. One thing I would like to ask <code>XWPFParagraph paragraph = this.paragraph.getDocument().insertNewParagraph(paragraphCur&zwnj;&#8203;sor);</code> this line is not working for a table paragraph. <code>this.paragraph</code> is a valid XWPFTable Cell&#39;s paragraph but upon executing the line for a table it is returning null. Can you please guide me in this regard?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694262061,"post_id":77064555,"comment_id":135870047,"body_markdown":"I haven&#39;t touched POI in a while, so I can&#39;t really help.","body":"I haven&#39;t touched POI in a while, so I can&#39;t really help."}],"owner":{"account_id":28242228,"reputation":9,"user_id":21589845,"display_name":"Furqan Ahmed"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694153916,"creation_date":1694153916,"question_id":77064555,"body_markdown":"Following is the code which is while iterating adding a new paragraph before a specific paragraph.\r\n\r\n    \tpublic void resolveBodyElements1(List&lt;IBodyElement&gt; elements) {\r\n\t\tfor(IBodyElement element : elements) {\r\n\t\t\tif(PARAGRAPH.equalsIgnoreCase(element.getElementType().name())) {\r\n\t\t\t\tXWPFParagraph paragraph = (XWPFParagraph)element;\r\n\t\t\t\tif(paragraph.getText().equalsIgnoreCase(&quot;[{multiline-bulletpoints-markdown}]&quot;)) {\r\n\t\t\t\t\tXmlCursor paragraphCursor = paragraph.getCTP().newCursor();\r\n\t\t\t\t\tXWPFParagraph paragraph1 = paragraph.getDocument().insertNewParagraph(paragraphCursor);\r\n\t\t\t\t\tparagraph1.createRun().setText(&quot;This is a test paragraph inserted.&quot;);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(paragraph.getText());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\nBut it ends up in a ConcurrentModification Exception, However, I am using a for loop instead of an iterator or a foreach loop. Can anyone please guide me in this regard to add a paragraph in a document while iterating the paragraphs and avoid this ConcurrentModification Exception?","title":"In Apache POI Adding a new paragraph at a specified place while iterating is giving Concurrent Modification Exception","body":"<p>Following is the code which is while iterating adding a new paragraph before a specific paragraph.</p>\n<pre><code>    public void resolveBodyElements1(List&lt;IBodyElement&gt; elements) {\n    for(IBodyElement element : elements) {\n        if(PARAGRAPH.equalsIgnoreCase(element.getElementType().name())) {\n            XWPFParagraph paragraph = (XWPFParagraph)element;\n            if(paragraph.getText().equalsIgnoreCase(&quot;[{multiline-bulletpoints-markdown}]&quot;)) {\n                XmlCursor paragraphCursor = paragraph.getCTP().newCursor();\n                XWPFParagraph paragraph1 = paragraph.getDocument().insertNewParagraph(paragraphCursor);\n                paragraph1.createRun().setText(&quot;This is a test paragraph inserted.&quot;);\n\n            }\n            System.out.println(paragraph.getText());\n        }\n    }\n}\n</code></pre>\n<p>But it ends up in a ConcurrentModification Exception, However, I am using a for loop instead of an iterator or a foreach loop. Can anyone please guide me in this regard to add a paragraph in a document while iterating the paragraphs and avoid this ConcurrentModification Exception?</p>\n"},{"tags":["java","eclipse-rcp"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1693998035,"post_id":77050339,"comment_id":135832556,"body_markdown":"IMHO that should be a [pull request here](https://github.com/eclipse-pde/eclipse.pde) rather than a question on Stack Overflow.","body":"IMHO that should be a <a href=\"https://github.com/eclipse-pde/eclipse.pde\" rel=\"nofollow noreferrer\">pull request here</a> rather than a question on Stack Overflow."}],"answers":[{"tags":[],"owner":{"account_id":6642,"reputation":13384,"user_id":11249,"accept_rate":51,"display_name":"paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694153890,"creation_date":1694079189,"answer_id":77058349,"question_id":77050339,"body_markdown":"See the issue I opened on Github: [https://github.com/eclipse-pde/eclipse.pde/issues/735](https://github.com/eclipse-pde/eclipse.pde/issues/735).\r\n\r\n\r\nIt seems that it&#39;s valid to define the arguments like this:\r\n\r\n```\r\n--add-opens=java.base/java.util=ALL-UNNAMED\r\n--add-opens=java.base/java.text=ALL-UNNAMED\r\n--add-opens=java.desktop/java.awt.font=ALL-UNNAMED\r\n```\r\n\r\nThe launcher now starts the app correctly.","title":"Product definition does not export the VM parameters correctly when launching an Eclipse Application","body":"<p>See the issue I opened on Github: <a href=\"https://github.com/eclipse-pde/eclipse.pde/issues/735\" rel=\"nofollow noreferrer\">https://github.com/eclipse-pde/eclipse.pde/issues/735</a>.</p>\n<p>It seems that it's valid to define the arguments like this:</p>\n<pre><code>--add-opens=java.base/java.util=ALL-UNNAMED\n--add-opens=java.base/java.text=ALL-UNNAMED\n--add-opens=java.desktop/java.awt.font=ALL-UNNAMED\n</code></pre>\n<p>The launcher now starts the app correctly.</p>\n"}],"owner":{"account_id":6642,"reputation":13384,"user_id":11249,"accept_rate":51,"display_name":"paul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694153890,"creation_date":1693989942,"question_id":77050339,"body_markdown":"I defined these VM parameters on the Launching tab of the product definition:\r\n\r\n```\r\n--add-opens java.base/java.util=ALL-UNNAMED\r\n--add-opens java.base/java.text=ALL-UNNAMED \r\n--add-opens java.desktop/java.awt.font=ALL-UNNAMED\r\n```\r\n\r\nWhen I launch the app (from the Overview tab) the launch fails. \r\n\r\n```\r\nFehler: Hauptklasse java.base.java.text=ALL-UNNAMED konnte nicht gefunden oder geladen werden\r\nUrsache: java.lang.ClassNotFoundException: java.base.java.text=ALL-UNNAMED\r\n```\r\n\r\n\r\nThe Run Configuration contains the following VM Arguments:\r\n\r\n```\r\n--add-opens java.base/java.util=ALL-UNNAMED java.base/java.text=ALL-UNNAMED java.desktop/java.awt.font=ALL-UNNAMED\r\n```\r\n\r\nThe `--add-opens` appears just once. I have tried defining the options all on one line but the result is the same.\r\n\r\nAdding `--add-opens` to the last two items fixes the problem and the app starts.\r\n\r\nIs this a bug or should I be declaring these options in a different way?\r\n\r\n(Using Eclipse 4.28, fully updated)","title":"Product definition does not export the VM parameters correctly when launching an Eclipse Application","body":"<p>I defined these VM parameters on the Launching tab of the product definition:</p>\n<pre><code>--add-opens java.base/java.util=ALL-UNNAMED\n--add-opens java.base/java.text=ALL-UNNAMED \n--add-opens java.desktop/java.awt.font=ALL-UNNAMED\n</code></pre>\n<p>When I launch the app (from the Overview tab) the launch fails.</p>\n<pre><code>Fehler: Hauptklasse java.base.java.text=ALL-UNNAMED konnte nicht gefunden oder geladen werden\nUrsache: java.lang.ClassNotFoundException: java.base.java.text=ALL-UNNAMED\n</code></pre>\n<p>The Run Configuration contains the following VM Arguments:</p>\n<pre><code>--add-opens java.base/java.util=ALL-UNNAMED java.base/java.text=ALL-UNNAMED java.desktop/java.awt.font=ALL-UNNAMED\n</code></pre>\n<p>The <code>--add-opens</code> appears just once. I have tried defining the options all on one line but the result is the same.</p>\n<p>Adding <code>--add-opens</code> to the last two items fixes the problem and the app starts.</p>\n<p>Is this a bug or should I be declaring these options in a different way?</p>\n<p>(Using Eclipse 4.28, fully updated)</p>\n"},{"tags":["java","hibernate","lucene","hibernate-search"],"answers":[{"comments":[{"owner":{"account_id":29326700,"reputation":1,"user_id":22469018,"display_name":"mon"},"score":0,"creation_date":1694156785,"post_id":77064490,"comment_id":135856957,"body_markdown":"is there a way that i can check if I&#39;m starting multiple EntityManagerFactory at the same time for the same model? Also, i belive this is not happening during the startup of server?","body":"is there a way that i can check if I&#39;m starting multiple EntityManagerFactory at the same time for the same model? Also, i belive this is not happening during the startup of server?"},{"owner":{"account_id":8974783,"reputation":9445,"user_id":6692043,"display_name":"yrodiere"},"score":0,"creation_date":1694350226,"post_id":77064490,"comment_id":135876983,"body_markdown":"Well logs would be the easiest way I guess. Look for duplicates, especially when setting the log level of category &quot;org.hibernate&quot; to DEBUG or TRACE. Beyond that, without knowing your code I can&#39;t really help. And yes this happens after startup, but when lazily initializing the index writer which is a singleton. Unless somehow you gave the same name to two indexes, but I believe there are protections against that in Hibernate Search.","body":"Well logs would be the easiest way I guess. Look for duplicates, especially when setting the log level of category &quot;org.hibernate&quot; to DEBUG or TRACE. Beyond that, without knowing your code I can&#39;t really help. And yes this happens after startup, but when lazily initializing the index writer which is a singleton. Unless somehow you gave the same name to two indexes, but I believe there are protections against that in Hibernate Search."},{"owner":{"account_id":29326700,"reputation":1,"user_id":22469018,"display_name":"mon"},"score":0,"creation_date":1694493288,"post_id":77064490,"comment_id":135894246,"body_markdown":"@yrosiere, thankyou for the help, but i just added the hibernate property which doesn&#39;t create any lock as only one user can update the indexes. &quot;hibernate.search.default.locking_strategy&quot; value=&quot;none&quot;","body":"@yrosiere, thankyou for the help, but i just added the hibernate property which doesn&#39;t create any lock as only one user can update the indexes. &quot;hibernate.search.default.locking_strategy&quot; value=&quot;none&quot;"}],"tags":[],"owner":{"account_id":8974783,"reputation":9445,"user_id":6692043,"display_name":"yrodiere"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694153095,"creation_date":1694153095,"answer_id":77064490,"question_id":77058794,"body_markdown":"This error means two separate instances of Lucene / Hibernate Search are trying to open the same index simultaneously, which is not possible.\r\n\r\nMost likely you&#39;re starting multiple EntityManagerFactory at the same time for the same model. You should not.","title":"does lucene update stop working in hibernate 5","body":"<p>This error means two separate instances of Lucene / Hibernate Search are trying to open the same index simultaneously, which is not possible.</p>\n<p>Most likely you're starting multiple EntityManagerFactory at the same time for the same model. You should not.</p>\n"}],"owner":{"account_id":29326700,"reputation":1,"user_id":22469018,"display_name":"mon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694153095,"creation_date":1694082913,"question_id":77058794,"body_markdown":"During the startup of the server the indexing works fine(the indexes are created and search works fine). But when we try to update some indexes we got the lock exception and indexes not work and search don&#39;t give correct result.\r\n\r\nBelow if the error log. The same is happening in the linux server.\r\n```\r\n2023-09-07T11:39:50,437 [ERROR] [Hibernate Search sync consumer thread for index com.demoBO] [org.hibernate.search.exception.impl.LogErrorHandler] - HSEARCH000058: Exception occurred org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\\test\\com.demoBO\\write.lock\r\nPrimary Failure:\r\n\tEntity com.demoBO  Id 532  Work Type  org.hibernate.search.backend.UpdateLuceneWork\r\n\r\norg.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\\test\\com.demoBO\\write.lock\r\n\tat org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\r\n\tat org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\r\n\tat org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\r\n\tat org.apache.lucene.index.IndexWriter.&lt;init&gt;(IndexWriter.java:776) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\r\n\tat org.hibernate.search.backend.impl.lucene.IndexWriterHolder.createNewIndexWriter(IndexWriterHolder.java:127) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat org.hibernate.search.backend.impl.lucene.IndexWriterHolder.getIndexWriter(IndexWriterHolder.java:93) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat org.hibernate.search.backend.impl.lucene.AbstractWorkspaceImpl.getIndexWriter(AbstractWorkspaceImpl.java:118) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat org.hibernate.search.backend.impl.lucene.AbstractWorkspaceImpl.getIndexWriterDelegate(AbstractWorkspaceImpl.java:204) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat org.hibernate.search.backend.impl.lucene.LuceneBackendQueueTask.applyUpdates(LuceneBackendQueueTask.java:82) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat org.hibernate.search.backend.impl.lucene.LuceneBackendQueueTask.run(LuceneBackendQueueTask.java:47) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat org.hibernate.search.backend.impl.lucene.SyncWorkProcessor$Consumer.applyChangesets(SyncWorkProcessor.java:167) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat org.hibernate.search.backend.impl.lucene.SyncWorkProcessor$Consumer.run(SyncWorkProcessor.java:153) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_302]\r\n2023-09-07T11:39:50,453 [ERROR] [Hibernate Search sync consumer thread for index com.demoBO] [org.hibernate.search.backend.impl.lucene.LuceneBackendQueueTask] - HSEARCH000072: Couldn&#39;t open the IndexWriter because of previous error: operation skipped, index ouf of sync!\r\n\r\n```\r\nMy demoBO looks like:-\r\n\r\n\r\n    @Entity\r\n    @Indexed\r\n    @Table(name = &quot;DEMO_TB&quot;)\r\n    public class demoBO extends AbstractBO implements Serializable,\r\n    \t\tComparable&lt;demoBO&gt; {\r\n    \r\n    \t@Column(name = &quot;active&quot;)\r\n    \t@Field(analyze=Analyze.NO, store = Store.YES)\r\n    \tprivate Boolean status;\r\n    \t\r\n    \t@Column(name = &quot;deletion&quot;)\r\n    \t@Field(analyze=Analyze.NO, store = Store.YES)\r\n    \tprivate Boolean deletion;\r\n    \r\n    \t@Column(name = &quot;keyValue&quot;, length = 256)\r\n    \t@Field(analyze=Analyze.YES, store = Store.YES)\r\n    \tprivate String keyValue;\r\n    \r\n    \r\n    \t@Transient\r\n    \tprivate int status = 0;\r\n\r\n\r\nDuring the startup of server the code use to create indexes(after this a write.lock file is generated): -\r\n\r\n    entityManager = (EntityManager) applicationContext.getBean(entityManager);\r\n    \tFullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(entityManager);\r\n    \ttry {\r\n    \t\tfullTextEntityManager.createIndexer(DemoBO.class).startAndWait();\r\n    \t} catch (InterruptedException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n\r\n","title":"does lucene update stop working in hibernate 5","body":"<p>During the startup of the server the indexing works fine(the indexes are created and search works fine). But when we try to update some indexes we got the lock exception and indexes not work and search don't give correct result.</p>\n<p>Below if the error log. The same is happening in the linux server.</p>\n<pre><code>2023-09-07T11:39:50,437 [ERROR] [Hibernate Search sync consumer thread for index com.demoBO] [org.hibernate.search.exception.impl.LogErrorHandler] - HSEARCH000058: Exception occurred org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\\test\\com.demoBO\\write.lock\nPrimary Failure:\n    Entity com.demoBO  Id 532  Work Type  org.hibernate.search.backend.UpdateLuceneWork\n\norg.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\\test\\com.demoBO\\write.lock\n    at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\n    at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\n    at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\n    at org.apache.lucene.index.IndexWriter.&lt;init&gt;(IndexWriter.java:776) ~[lucene-core-5.5.5.jar:5.5.5 b3441673c21c83762035dc21d3827ad16aa17b68 - sarowe - 2017-10-20 08:57:09]\n    at org.hibernate.search.backend.impl.lucene.IndexWriterHolder.createNewIndexWriter(IndexWriterHolder.java:127) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at org.hibernate.search.backend.impl.lucene.IndexWriterHolder.getIndexWriter(IndexWriterHolder.java:93) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at org.hibernate.search.backend.impl.lucene.AbstractWorkspaceImpl.getIndexWriter(AbstractWorkspaceImpl.java:118) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at org.hibernate.search.backend.impl.lucene.AbstractWorkspaceImpl.getIndexWriterDelegate(AbstractWorkspaceImpl.java:204) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at org.hibernate.search.backend.impl.lucene.LuceneBackendQueueTask.applyUpdates(LuceneBackendQueueTask.java:82) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at org.hibernate.search.backend.impl.lucene.LuceneBackendQueueTask.run(LuceneBackendQueueTask.java:47) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at org.hibernate.search.backend.impl.lucene.SyncWorkProcessor$Consumer.applyChangesets(SyncWorkProcessor.java:167) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at org.hibernate.search.backend.impl.lucene.SyncWorkProcessor$Consumer.run(SyncWorkProcessor.java:153) [hibernate-search-engine-5.11.6.Final.jar:5.11.6.Final]\n    at java.lang.Thread.run(Thread.java:748) [?:1.8.0_302]\n2023-09-07T11:39:50,453 [ERROR] [Hibernate Search sync consumer thread for index com.demoBO] [org.hibernate.search.backend.impl.lucene.LuceneBackendQueueTask] - HSEARCH000072: Couldn't open the IndexWriter because of previous error: operation skipped, index ouf of sync!\n\n</code></pre>\n<p>My demoBO looks like:-</p>\n<pre><code>@Entity\n@Indexed\n@Table(name = &quot;DEMO_TB&quot;)\npublic class demoBO extends AbstractBO implements Serializable,\n        Comparable&lt;demoBO&gt; {\n\n    @Column(name = &quot;active&quot;)\n    @Field(analyze=Analyze.NO, store = Store.YES)\n    private Boolean status;\n    \n    @Column(name = &quot;deletion&quot;)\n    @Field(analyze=Analyze.NO, store = Store.YES)\n    private Boolean deletion;\n\n    @Column(name = &quot;keyValue&quot;, length = 256)\n    @Field(analyze=Analyze.YES, store = Store.YES)\n    private String keyValue;\n\n\n    @Transient\n    private int status = 0;\n</code></pre>\n<p>During the startup of server the code use to create indexes(after this a write.lock file is generated): -</p>\n<pre><code>entityManager = (EntityManager) applicationContext.getBean(entityManager);\n    FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(entityManager);\n    try {\n        fullTextEntityManager.createIndexer(DemoBO.class).startAndWait();\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","c#","unity-game-engine","gradle","apk"],"comments":[{"owner":{"account_id":11091905,"reputation":85,"user_id":8143461,"display_name":"Mohit.B"},"score":0,"creation_date":1655748018,"post_id":72544504,"comment_id":128400364,"body_markdown":"Hi Samprit , Did you tried to build an android build with custom Keystore. As it worked for me I was facing same issue.","body":"Hi Samprit , Did you tried to build an android build with custom Keystore. As it worked for me I was facing same issue."}],"answers":[{"comments":[{"owner":{"account_id":1213067,"reputation":875,"user_id":1181238,"accept_rate":75,"display_name":"Will Thomson"},"score":0,"creation_date":1680737635,"post_id":72808545,"comment_id":133950886,"body_markdown":"Incredible... I was hunting through a dozen other errors, and this was certainly the main culprit. Good looking out.","body":"Incredible... I was hunting through a dozen other errors, and this was certainly the main culprit. Good looking out."}],"tags":[],"owner":{"account_id":205987,"reputation":1126,"user_id":455026,"display_name":"Alexis Pautrot"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1656542007,"creation_date":1656542007,"answer_id":72808545,"question_id":72544504,"body_markdown":"Man, Java developer&#39;s are so deceptively verbose...\r\nIn this (pile of garbage) log, what&#39;s really important is\r\n\r\n    * What went wrong:\r\n    Execution failed for task &#39;:launcher:packageRelease&#39;.\r\n    &gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\r\n       &gt; com.android.ide.common.signing.KeytoolException: Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra\\.android\\debug.keystore&quot;: Invalid keystore format\r\n\r\n*Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra\\.android\\debug.keystore&quot;: Invalid keystore format*\r\n\r\nYou might want to take a look to your file using http://keystore-explorer.org/ and see if something is wrong with it.","title":"Unity 2021.3.4f1 Gradle Build failed","body":"<p>Man, Java developer's are so deceptively verbose...\nIn this (pile of garbage) log, what's really important is</p>\n<pre><code>* What went wrong:\nExecution failed for task ':launcher:packageRelease'.\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\n   &gt; com.android.ide.common.signing.KeytoolException: Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra\\.android\\debug.keystore&quot;: Invalid keystore format\n</code></pre>\n<p><em>Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra.android\\debug.keystore&quot;: Invalid keystore format</em></p>\n<p>You might want to take a look to your file using <a href=\"http://keystore-explorer.org/\" rel=\"nofollow noreferrer\">http://keystore-explorer.org/</a> and see if something is wrong with it.</p>\n"},{"comments":[{"owner":{"account_id":17296936,"reputation":4859,"user_id":14909621,"display_name":"Vitalizzare"},"score":0,"creation_date":1658654391,"post_id":73049509,"comment_id":129100691,"body_markdown":"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don&#39;t require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead). - [From Review](/review/late-answers/32290967)","body":"This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/late-answers/32290967\">From Review</a>"}],"tags":[],"owner":{"account_id":25852163,"reputation":31,"user_id":19585993,"display_name":"Alessandro Crimaldi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658322765,"creation_date":1658310929,"answer_id":73049509,"question_id":72544504,"body_markdown":"I needed to create a custom Keystore.","title":"Unity 2021.3.4f1 Gradle Build failed","body":"<p>I needed to create a custom Keystore.</p>\n"},{"tags":[],"owner":{"account_id":186443,"reputation":93,"user_id":423835,"display_name":"st4rdog"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680899546,"creation_date":1680899546,"answer_id":75961750,"question_id":72544504,"body_markdown":"You have to make it generate a new keystore that isn&#39;t busted.\r\n\r\n- Close Unity\r\n- Browse to C:\\Users\\Username\\.android\r\n- Move or delete the debug.keystore/lock\r\n- Build will be successful","title":"Unity 2021.3.4f1 Gradle Build failed","body":"<p>You have to make it generate a new keystore that isn't busted.</p>\n<ul>\n<li>Close Unity</li>\n<li>Browse to C:\\Users\\Username.android</li>\n<li>Move or delete the debug.keystore/lock</li>\n<li>Build will be successful</li>\n</ul>\n"}],"owner":{"account_id":23147900,"reputation":41,"user_id":17250406,"display_name":"Samprit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10047,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1694152651,"creation_date":1654685821,"question_id":72544504,"body_markdown":"Unity 2021.3.4f1 is giving me these errors while building an apk\r\n\r\n    &gt; Starting a Gradle Daemon, 1\r\n    &gt; incompatible Daemon could not be\r\n    &gt; reused, use --status for details\r\n    &gt; \r\n    &gt; &gt; Configure project :launcher WARNING: The option setting\r\n    &gt; &#39;android.enableR8=false&#39; is\r\n    &gt; deprecated. It will be removed in\r\n    &gt; version 5.0 of the Android Gradle\r\n    &gt; plugin. You will no longer be able to\r\n    &gt; disable R8 Exception while marshalling\r\n    &gt; C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; Exception while marshalling C:\\Program\r\n    &gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml.\r\n    &gt; Probably the SDK is read-only\r\n    &gt; \r\n    &gt; &gt; Task :unityLibrary:preBuild UP-TO-DATE\r\n    &gt; &gt; Task :launcher:preBuild UP-TO-DATE\r\n    &gt; &gt; Task :launcher:preReleaseBuild UP-TO-DATE\r\n    &gt; &gt; Task :unityLibrary:preReleaseBuild UP-TO-DATE\r\n    &gt; &gt; Task :unityLibrary:compileReleaseAidl\r\n    &gt; NO-SOURCE\r\n    &gt; &gt; Task :unityLibrary:packageReleaseRenderscript\r\n    &gt; NO-SOURCE\r\n    &gt; &gt; Task :unityLibrary:compileReleaseRenderscript\r\n    &gt; NO-SOURCE\r\n    &gt; &gt; Task :unityLibrary:generateReleaseResValues\r\n    &gt; &gt; Task :unityLibrary:generateReleaseResources\r\n    &gt; &gt; Task :launcher:generateReleaseBuildConfig\r\n    &gt; &gt; Task :launcher:compileReleaseAidl NO-SOURCE\r\n    &gt; &gt; Task :launcher:compileReleaseRenderscript\r\n    &gt; NO-SOURCE\r\n    &gt; &gt; Task :launcher:generateReleaseResValues\r\n    &gt; &gt; Task :launcher:generateReleaseResources\r\n    &gt; &gt; Task :launcher:createReleaseCompatibleScreenManifests\r\n    &gt; &gt; Task :launcher:extractDeepLinksRelease\r\n    &gt; &gt; Task :launcher:prepareLintJar\r\n    &gt; &gt; Task :launcher:checkReleaseDuplicateClasses\r\n    &gt; &gt; Task :unityLibrary:packageReleaseResources\r\n    &gt; &gt; Task :unityLibrary:extractDeepLinksRelease\r\n    &gt; &gt; Task :unityLibrary:processReleaseManifest\r\n    &gt; &gt; Task :launcher:javaPreCompileRelease\r\n    &gt; &gt; Task :launcher:processReleaseManifest\r\n    &gt; &gt; Task :launcher:mergeReleaseShaders\r\n    &gt; &gt; Task :launcher:compileReleaseShaders NO-SOURCE\r\n    &gt; &gt; Task :launcher:generateReleaseAssets UP-TO-DATE\r\n    &gt; &gt; Task :launcher:processReleaseJavaRes NO-SOURCE\r\n    &gt; &gt; Task :launcher:collectReleaseDependencies\r\n    &gt; &gt; Task :launcher:sdkReleaseDependencyData\r\n    &gt; &gt; Task :launcher:mergeReleaseJniLibFolders\r\n    &gt; &gt; Task :launcher:validateSigningRelease\r\n    &gt; &gt; Task :launcher:desugarReleaseFileDependencies\r\n    &gt; &gt; Task :launcher:mergeReleaseResources\r\n    &gt; &gt; Task :launcher:mergeExtDexRelease\r\n    &gt; &gt; Task :unityLibrary:generateReleaseBuildConfig\r\n    &gt; &gt; Task :unityLibrary:compileReleaseLibraryResources\r\n    &gt; &gt; Task :unityLibrary:mergeReleaseShaders\r\n    &gt; &gt; Task :unityLibrary:compileReleaseShaders\r\n    &gt; NO-SOURCE\r\n    &gt; &gt; Task :unityLibrary:generateReleaseAssets\r\n    &gt; UP-TO-DATE\r\n    &gt; &gt; Task :unityLibrary:packageReleaseAssets\r\n    &gt; &gt; Task :unityLibrary:prepareLintJarForPublish\r\n    &gt; &gt; Task :unityLibrary:processReleaseJavaRes\r\n    &gt; NO-SOURCE\r\n    &gt; &gt; Task :unityLibrary:bundleLibResRelease\r\n    &gt; NO-SOURCE\r\n    &gt; &gt; Task :launcher:mergeReleaseAssets\r\n    &gt; &gt; Task :unityLibrary:mergeReleaseJniLibFolders\r\n    &gt; &gt; Task :unityLibrary:parseReleaseLocalResources\r\n    &gt; &gt; Task :launcher:mergeReleaseJavaResource\r\n    &gt; &gt; Task :unityLibrary:javaPreCompileRelease\r\n    &gt; &gt; Task :unityLibrary:mergeReleaseNativeLibs\r\n    &gt; &gt; Task :unityLibrary:stripReleaseDebugSymbols\r\n    &gt; &gt; Task :unityLibrary:copyReleaseJniLibsProjectOnly\r\n    &gt; &gt; Task :unityLibrary:generateReleaseRFile\r\n    &gt; &gt; Task :launcher:processReleaseResources\r\n    &gt; &gt; Task :launcher:mergeReleaseNativeLibs\r\n    &gt; &gt; Task :launcher:stripReleaseDebugSymbols\r\n    &gt; \r\n    &gt; &gt; Task :unityLibrary:compileReleaseJavaWithJavac\r\n    &gt; \r\n    &gt; &gt; Task :unityLibrary:bundleLibRuntimeToJarRelease\r\n    &gt; &gt; Task :unityLibrary:bundleLibCompileToJarRelease\r\n    &gt; &gt; Task :launcher:compileReleaseJavaWithJavac\r\n    &gt; &gt; Task :launcher:compileReleaseSources\r\n    &gt; &gt; Task :launcher:lintVitalRelease\r\n    &gt; &gt; Task :launcher:dexBuilderRelease\r\n    &gt; &gt; Task :launcher:mergeDexRelease\r\n    &gt; &gt; Task :launcher:packageRelease FAILED 45 actionable tasks: 45 executed\r\n    &gt; \r\n    &gt; UnityEditor.GenericMenu:CatchMenu\r\n    &gt; (object,string[],int)\r\n\r\n\r\nThe second error is \r\n\r\n    Note: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity3d\\player\\UnityPlayerActivity.java uses or overrides a deprecated API.\r\n    Note: Recompile with -Xlint:deprecation for details.\r\n    Note: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity\\androidnotifications\\UnityNotificationManager.java uses unchecked or unsafe operations.\r\n    Note: Recompile with -Xlint:unchecked for details.\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:launcher:packageRelease&#39;.\r\n    &gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\r\n       &gt; com.android.ide.common.signing.KeytoolException: Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra\\.android\\debug.keystore&quot;: Invalid keystore format\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 2m 25s\r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8\r\n    \r\n    UnityEditor.GenericMenu:CatchMenu (object,string[],int)\r\n\r\nThe third error:\r\n\r\n    CommandInvokationFailure: Gradle build failed. \r\n    C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\OpenJDK\\bin\\java.exe -classpath &quot;C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\Tools\\gradle\\lib\\gradle-launcher-6.1.1.jar&quot; org.gradle.launcher.GradleMain &quot;-Dorg.gradle.jvmargs=-Xmx4096m&quot; &quot;assembleRelease&quot;\r\n    \r\n    stderr[\r\n    Note: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity3d\\player\\UnityPlayerActivity.java uses or overrides a deprecated API.\r\n    Note: Recompile with -Xlint:deprecation for details.\r\n    Note: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity\\androidnotifications\\UnityNotificationManager.java uses unchecked or unsafe operations.\r\n    Note: Recompile with -Xlint:unchecked for details.\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:launcher:packageRelease&#39;.\r\n    &gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\r\n       &gt; com.android.ide.common.signing.KeytoolException: Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra\\.android\\debug.keystore&quot;: Invalid keystore format\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 2m 25s\r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8\r\n    ]\r\n    stdout[\r\n    Starting a Gradle Daemon, 1 incompatible Daemon could not be reused, use --status for details\r\n    \r\n    &gt; Configure project :launcher\r\n    WARNING: The option setting &#39;android.enableR8=false&#39; is deprecated.\r\n    It will be removed in version 5.0 of the Android Gradle plugin.\r\n    You will no longer be able to disable R8\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml. Probably the SDK is read-only\r\n    Exception while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml. Probably the SDK is read-only\r\n    \r\n    &gt; Task :unityLibrary:preBuild UP-TO-DATE\r\n    &gt; Task :launcher:preBuild UP-TO-DATE\r\n    &gt; Task :launcher:preReleaseBuild UP-TO-DATE\r\n    &gt; Task :unityLibrary:preReleaseBuild UP-TO-DATE\r\n    &gt; Task :unityLibrary:compileReleaseAidl NO-SOURCE\r\n    &gt; Task :unityLibrary:packageReleaseRenderscript NO-SOURCE\r\n    &gt; Task :unityLibrary:compileReleaseRenderscript NO-SOURCE\r\n    &gt; Task :unityLibrary:generateReleaseResValues\r\n    &gt; Task :unityLibrary:generateReleaseResources\r\n    &gt; Task :launcher:generateReleaseBuildConfig\r\n    &gt; Task :launcher:compileReleaseAidl NO-SOURCE\r\n    &gt; Task :launcher:compileReleaseRenderscript NO-SOURCE\r\n    &gt; Task :launcher:generateReleaseResValues\r\n    &gt; Task :launcher:generateReleaseResources\r\n    &gt; Task :launcher:createReleaseCompatibleScreenManifests\r\n    &gt; Task :launcher:extractDeepLinksRelease\r\n    &gt; Task :launcher:prepareLintJar\r\n    &gt; Task :launcher:checkReleaseDuplicateClasses\r\n    &gt; Task :unityLibrary:packageReleaseResources\r\n    &gt; Task :unityLibrary:extractDeepLinksRelease\r\n    &gt; Task :unityLibrary:processReleaseManifest\r\n    &gt; Task :launcher:javaPreCompileRelease\r\n    &gt; Task :launcher:processReleaseManifest\r\n    &gt; Task :launcher:mergeReleaseShaders\r\n    &gt; Task :launcher:compileReleaseShaders NO-SOURCE\r\n    &gt; Task :launcher:generateReleaseAssets UP-TO-DATE\r\n    &gt; Task :launcher:processReleaseJavaRes NO-SOURCE\r\n    &gt; Task :launcher:collectReleaseDependencies\r\n    &gt; Task :launcher:sdkReleaseDependencyData\r\n    &gt; Task :launcher:mergeReleaseJniLibFolders\r\n    &gt; Task :launcher:validateSigningRelease\r\n    &gt; Task :launcher:desugarReleaseFileDependencies\r\n    &gt; Task :launcher:mergeReleaseResources\r\n    &gt; Task :launcher:mergeExtDexRelease\r\n    &gt; Task :unityLibrary:generateReleaseBuildConfig\r\n    &gt; Task :unityLibrary:compileReleaseLibraryResources\r\n    &gt; Task :unityLibrary:mergeReleaseShaders\r\n    &gt; Task :unityLibrary:compileReleaseShaders NO-SOURCE\r\n    &gt; Task :unityLibrary:generateReleaseAssets UP-TO-DATE\r\n    &gt; Task :unityLibrary:packageReleaseAssets\r\n    &gt; Task :unityLibrary:prepareLintJarForPublish\r\n    &gt; Task :unityLibrary:processReleaseJavaRes NO-SOURCE\r\n    &gt; Task :unityLibrary:bundleLibResRelease NO-SOURCE\r\n    &gt; Task :launcher:mergeReleaseAssets\r\n    &gt; Task :unityLibrary:mergeReleaseJniLibFolders\r\n    &gt; Task :unityLibrary:parseReleaseLocalResources\r\n    &gt; Task :launcher:mergeReleaseJavaResource\r\n    &gt; Task :unityLibrary:javaPreCompileRelease\r\n    &gt; Task :unityLibrary:mergeReleaseNativeLibs\r\n    &gt; Task :unityLibrary:stripReleaseDebugSymbols\r\n    &gt; Task :unityLibrary:copyReleaseJniLibsProjectOnly\r\n    &gt; Task :unityLibrary:generateReleaseRFile\r\n    &gt; Task :launcher:processReleaseResources\r\n    &gt; Task :launcher:mergeReleaseNativeLibs\r\n    &gt; Task :launcher:stripReleaseDebugSymbols\r\n    \r\n    &gt; Task :unityLibrary:compileReleaseJavaWithJavac\r\n    \r\n    &gt; Task :unityLibrary:bundleLibRuntimeToJarRelease\r\n    &gt; Task :unityLibrary:bundleLibCompileToJarRelease\r\n    &gt; Task :launcher:compileReleaseJavaWithJavac\r\n    &gt; Task :launcher:compileReleaseSources\r\n    &gt; Task :launcher:lintVitalRelease\r\n    &gt; Task :launcher:dexBuilderRelease\r\n    &gt; Task :launcher:mergeDexRelease\r\n    &gt; Task :launcher:packageRelease FAILED\r\n    45 actionable tasks: 45 executed\r\n    ]\r\n    exit code: 1\r\n    UnityEditor.Android.Command.WaitForProgramToRun (UnityEditor.Utils.Program p, UnityEditor.Android.Command+WaitingForProcessToExit waitingForProcessToExit, System.String errorMsg) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.Command.Run (System.Diagnostics.ProcessStartInfo psi, UnityEditor.Android.Command+WaitingForProcessToExit waitingForProcessToExit, System.String errorMsg) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.Command.Run (System.String command, System.String args, System.String workingdir, UnityEditor.Android.Command+WaitingForProcessToExit waitingForProcessToExit, System.String errorMsg) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.AndroidJavaTools.RunJava (System.String args, System.String workingdir, System.Action`1[T] progress, System.String error) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.GradleWrapper.Run (UnityEditor.Android.AndroidJavaTools javaTools, Unity.Android.Gradle.AndroidGradle androidGradle, System.String workingdir, System.String task, System.Action`1[T] progress) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    Rethrow as GradleInvokationException: Gradle build failed\r\n    UnityEditor.Android.GradleWrapper.Run (UnityEditor.Android.AndroidJavaTools javaTools, Unity.Android.Gradle.AndroidGradle androidGradle, System.String workingdir, System.String task, System.Action`1[T] progress) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.PostProcessor.Tasks.BuildGradleProject.Execute (UnityEditor.Android.PostProcessor.PostProcessorContext context) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.PostProcessor.PostProcessRunner.RunAllTasks (UnityEditor.Android.PostProcessor.PostProcessorContext context) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    Rethrow as BuildFailedException: Exception of type &#39;UnityEditor.Build.BuildFailedException&#39; was thrown.\r\n    UnityEditor.Android.PostProcessor.CancelPostProcess.AbortBuild (System.String title, System.String message, System.Exception ex) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.PostProcessor.PostProcessRunner.RunAllTasks (UnityEditor.Android.PostProcessor.PostProcessorContext context) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.PostProcessAndroidPlayer.PostProcess (UnityEditor.Modules.BuildPostProcessArgs args, AndroidPlayerBuildProgram.Data.AndroidPlayerBuildProgramOutput buildProgramOutput) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.Android.AndroidBuildPostprocessor.PostProcess (UnityEditor.Modules.BuildPostProcessArgs args, UnityEditor.BuildProperties&amp; outProperties) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\r\n    UnityEditor.PostprocessBuildPlayer.Postprocess (UnityEditor.BuildTargetGroup targetGroup, UnityEditor.BuildTarget target, System.Int32 subtarget, System.String installPath,\r\n\r\n\r\nMy JDK Version is JDK-18 and the unity version is 2021.3.4f1 64bit i have been working in a project since many days and everything worked fine but when i tried to build the apk unity threw at error at me which is related to gradle only\r\nFast reply appreciated","title":"Unity 2021.3.4f1 Gradle Build failed","body":"<p>Unity 2021.3.4f1 is giving me these errors while building an apk</p>\n<pre><code>&gt; Starting a Gradle Daemon, 1\n&gt; incompatible Daemon could not be\n&gt; reused, use --status for details\n&gt; \n&gt; &gt; Configure project :launcher WARNING: The option setting\n&gt; 'android.enableR8=false' is\n&gt; deprecated. It will be removed in\n&gt; version 5.0 of the Android Gradle\n&gt; plugin. You will no longer be able to\n&gt; disable R8 Exception while marshalling\n&gt; C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; Exception while marshalling C:\\Program\n&gt; Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml.\n&gt; Probably the SDK is read-only\n&gt; \n&gt; &gt; Task :unityLibrary:preBuild UP-TO-DATE\n&gt; &gt; Task :launcher:preBuild UP-TO-DATE\n&gt; &gt; Task :launcher:preReleaseBuild UP-TO-DATE\n&gt; &gt; Task :unityLibrary:preReleaseBuild UP-TO-DATE\n&gt; &gt; Task :unityLibrary:compileReleaseAidl\n&gt; NO-SOURCE\n&gt; &gt; Task :unityLibrary:packageReleaseRenderscript\n&gt; NO-SOURCE\n&gt; &gt; Task :unityLibrary:compileReleaseRenderscript\n&gt; NO-SOURCE\n&gt; &gt; Task :unityLibrary:generateReleaseResValues\n&gt; &gt; Task :unityLibrary:generateReleaseResources\n&gt; &gt; Task :launcher:generateReleaseBuildConfig\n&gt; &gt; Task :launcher:compileReleaseAidl NO-SOURCE\n&gt; &gt; Task :launcher:compileReleaseRenderscript\n&gt; NO-SOURCE\n&gt; &gt; Task :launcher:generateReleaseResValues\n&gt; &gt; Task :launcher:generateReleaseResources\n&gt; &gt; Task :launcher:createReleaseCompatibleScreenManifests\n&gt; &gt; Task :launcher:extractDeepLinksRelease\n&gt; &gt; Task :launcher:prepareLintJar\n&gt; &gt; Task :launcher:checkReleaseDuplicateClasses\n&gt; &gt; Task :unityLibrary:packageReleaseResources\n&gt; &gt; Task :unityLibrary:extractDeepLinksRelease\n&gt; &gt; Task :unityLibrary:processReleaseManifest\n&gt; &gt; Task :launcher:javaPreCompileRelease\n&gt; &gt; Task :launcher:processReleaseManifest\n&gt; &gt; Task :launcher:mergeReleaseShaders\n&gt; &gt; Task :launcher:compileReleaseShaders NO-SOURCE\n&gt; &gt; Task :launcher:generateReleaseAssets UP-TO-DATE\n&gt; &gt; Task :launcher:processReleaseJavaRes NO-SOURCE\n&gt; &gt; Task :launcher:collectReleaseDependencies\n&gt; &gt; Task :launcher:sdkReleaseDependencyData\n&gt; &gt; Task :launcher:mergeReleaseJniLibFolders\n&gt; &gt; Task :launcher:validateSigningRelease\n&gt; &gt; Task :launcher:desugarReleaseFileDependencies\n&gt; &gt; Task :launcher:mergeReleaseResources\n&gt; &gt; Task :launcher:mergeExtDexRelease\n&gt; &gt; Task :unityLibrary:generateReleaseBuildConfig\n&gt; &gt; Task :unityLibrary:compileReleaseLibraryResources\n&gt; &gt; Task :unityLibrary:mergeReleaseShaders\n&gt; &gt; Task :unityLibrary:compileReleaseShaders\n&gt; NO-SOURCE\n&gt; &gt; Task :unityLibrary:generateReleaseAssets\n&gt; UP-TO-DATE\n&gt; &gt; Task :unityLibrary:packageReleaseAssets\n&gt; &gt; Task :unityLibrary:prepareLintJarForPublish\n&gt; &gt; Task :unityLibrary:processReleaseJavaRes\n&gt; NO-SOURCE\n&gt; &gt; Task :unityLibrary:bundleLibResRelease\n&gt; NO-SOURCE\n&gt; &gt; Task :launcher:mergeReleaseAssets\n&gt; &gt; Task :unityLibrary:mergeReleaseJniLibFolders\n&gt; &gt; Task :unityLibrary:parseReleaseLocalResources\n&gt; &gt; Task :launcher:mergeReleaseJavaResource\n&gt; &gt; Task :unityLibrary:javaPreCompileRelease\n&gt; &gt; Task :unityLibrary:mergeReleaseNativeLibs\n&gt; &gt; Task :unityLibrary:stripReleaseDebugSymbols\n&gt; &gt; Task :unityLibrary:copyReleaseJniLibsProjectOnly\n&gt; &gt; Task :unityLibrary:generateReleaseRFile\n&gt; &gt; Task :launcher:processReleaseResources\n&gt; &gt; Task :launcher:mergeReleaseNativeLibs\n&gt; &gt; Task :launcher:stripReleaseDebugSymbols\n&gt; \n&gt; &gt; Task :unityLibrary:compileReleaseJavaWithJavac\n&gt; \n&gt; &gt; Task :unityLibrary:bundleLibRuntimeToJarRelease\n&gt; &gt; Task :unityLibrary:bundleLibCompileToJarRelease\n&gt; &gt; Task :launcher:compileReleaseJavaWithJavac\n&gt; &gt; Task :launcher:compileReleaseSources\n&gt; &gt; Task :launcher:lintVitalRelease\n&gt; &gt; Task :launcher:dexBuilderRelease\n&gt; &gt; Task :launcher:mergeDexRelease\n&gt; &gt; Task :launcher:packageRelease FAILED 45 actionable tasks: 45 executed\n&gt; \n&gt; UnityEditor.GenericMenu:CatchMenu\n&gt; (object,string[],int)\n</code></pre>\n<p>The second error is</p>\n<pre><code>Note: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity3d\\player\\UnityPlayerActivity.java uses or overrides a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity\\androidnotifications\\UnityNotificationManager.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':launcher:packageRelease'.\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\n   &gt; com.android.ide.common.signing.KeytoolException: Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra\\.android\\debug.keystore&quot;: Invalid keystore format\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 2m 25s\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8\n\nUnityEditor.GenericMenu:CatchMenu (object,string[],int)\n</code></pre>\n<p>The third error:</p>\n<pre><code>CommandInvokationFailure: Gradle build failed. \nC:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\OpenJDK\\bin\\java.exe -classpath &quot;C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\Tools\\gradle\\lib\\gradle-launcher-6.1.1.jar&quot; org.gradle.launcher.GradleMain &quot;-Dorg.gradle.jvmargs=-Xmx4096m&quot; &quot;assembleRelease&quot;\n\nstderr[\nNote: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity3d\\player\\UnityPlayerActivity.java uses or overrides a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: D:\\Unity Development\\EndMan 1\\EndMan1\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\src\\main\\java\\com\\unity\\androidnotifications\\UnityNotificationManager.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':launcher:packageRelease'.\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\n   &gt; com.android.ide.common.signing.KeytoolException: Failed to read key AndroidDebugKey from store &quot;C:\\Users\\Samprit Hazra\\.android\\debug.keystore&quot;: Invalid keystore format\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 2m 25s\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8\n]\nstdout[\nStarting a Gradle Daemon, 1 incompatible Daemon could not be reused, use --status for details\n\n&gt; Configure project :launcher\nWARNING: The option setting 'android.enableR8=false' is deprecated.\nIt will be removed in version 5.0 of the Android Gradle plugin.\nYou will no longer be able to disable R8\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\build-tools\\30.0.2\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platform-tools\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-29\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\platforms\\android-30\\package.xml. Probably the SDK is read-only\nException while marshalling C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.4f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\SDK\\tools\\package.xml. Probably the SDK is read-only\n\n&gt; Task :unityLibrary:preBuild UP-TO-DATE\n&gt; Task :launcher:preBuild UP-TO-DATE\n&gt; Task :launcher:preReleaseBuild UP-TO-DATE\n&gt; Task :unityLibrary:preReleaseBuild UP-TO-DATE\n&gt; Task :unityLibrary:compileReleaseAidl NO-SOURCE\n&gt; Task :unityLibrary:packageReleaseRenderscript NO-SOURCE\n&gt; Task :unityLibrary:compileReleaseRenderscript NO-SOURCE\n&gt; Task :unityLibrary:generateReleaseResValues\n&gt; Task :unityLibrary:generateReleaseResources\n&gt; Task :launcher:generateReleaseBuildConfig\n&gt; Task :launcher:compileReleaseAidl NO-SOURCE\n&gt; Task :launcher:compileReleaseRenderscript NO-SOURCE\n&gt; Task :launcher:generateReleaseResValues\n&gt; Task :launcher:generateReleaseResources\n&gt; Task :launcher:createReleaseCompatibleScreenManifests\n&gt; Task :launcher:extractDeepLinksRelease\n&gt; Task :launcher:prepareLintJar\n&gt; Task :launcher:checkReleaseDuplicateClasses\n&gt; Task :unityLibrary:packageReleaseResources\n&gt; Task :unityLibrary:extractDeepLinksRelease\n&gt; Task :unityLibrary:processReleaseManifest\n&gt; Task :launcher:javaPreCompileRelease\n&gt; Task :launcher:processReleaseManifest\n&gt; Task :launcher:mergeReleaseShaders\n&gt; Task :launcher:compileReleaseShaders NO-SOURCE\n&gt; Task :launcher:generateReleaseAssets UP-TO-DATE\n&gt; Task :launcher:processReleaseJavaRes NO-SOURCE\n&gt; Task :launcher:collectReleaseDependencies\n&gt; Task :launcher:sdkReleaseDependencyData\n&gt; Task :launcher:mergeReleaseJniLibFolders\n&gt; Task :launcher:validateSigningRelease\n&gt; Task :launcher:desugarReleaseFileDependencies\n&gt; Task :launcher:mergeReleaseResources\n&gt; Task :launcher:mergeExtDexRelease\n&gt; Task :unityLibrary:generateReleaseBuildConfig\n&gt; Task :unityLibrary:compileReleaseLibraryResources\n&gt; Task :unityLibrary:mergeReleaseShaders\n&gt; Task :unityLibrary:compileReleaseShaders NO-SOURCE\n&gt; Task :unityLibrary:generateReleaseAssets UP-TO-DATE\n&gt; Task :unityLibrary:packageReleaseAssets\n&gt; Task :unityLibrary:prepareLintJarForPublish\n&gt; Task :unityLibrary:processReleaseJavaRes NO-SOURCE\n&gt; Task :unityLibrary:bundleLibResRelease NO-SOURCE\n&gt; Task :launcher:mergeReleaseAssets\n&gt; Task :unityLibrary:mergeReleaseJniLibFolders\n&gt; Task :unityLibrary:parseReleaseLocalResources\n&gt; Task :launcher:mergeReleaseJavaResource\n&gt; Task :unityLibrary:javaPreCompileRelease\n&gt; Task :unityLibrary:mergeReleaseNativeLibs\n&gt; Task :unityLibrary:stripReleaseDebugSymbols\n&gt; Task :unityLibrary:copyReleaseJniLibsProjectOnly\n&gt; Task :unityLibrary:generateReleaseRFile\n&gt; Task :launcher:processReleaseResources\n&gt; Task :launcher:mergeReleaseNativeLibs\n&gt; Task :launcher:stripReleaseDebugSymbols\n\n&gt; Task :unityLibrary:compileReleaseJavaWithJavac\n\n&gt; Task :unityLibrary:bundleLibRuntimeToJarRelease\n&gt; Task :unityLibrary:bundleLibCompileToJarRelease\n&gt; Task :launcher:compileReleaseJavaWithJavac\n&gt; Task :launcher:compileReleaseSources\n&gt; Task :launcher:lintVitalRelease\n&gt; Task :launcher:dexBuilderRelease\n&gt; Task :launcher:mergeDexRelease\n&gt; Task :launcher:packageRelease FAILED\n45 actionable tasks: 45 executed\n]\nexit code: 1\nUnityEditor.Android.Command.WaitForProgramToRun (UnityEditor.Utils.Program p, UnityEditor.Android.Command+WaitingForProcessToExit waitingForProcessToExit, System.String errorMsg) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.Command.Run (System.Diagnostics.ProcessStartInfo psi, UnityEditor.Android.Command+WaitingForProcessToExit waitingForProcessToExit, System.String errorMsg) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.Command.Run (System.String command, System.String args, System.String workingdir, UnityEditor.Android.Command+WaitingForProcessToExit waitingForProcessToExit, System.String errorMsg) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.AndroidJavaTools.RunJava (System.String args, System.String workingdir, System.Action`1[T] progress, System.String error) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.GradleWrapper.Run (UnityEditor.Android.AndroidJavaTools javaTools, Unity.Android.Gradle.AndroidGradle androidGradle, System.String workingdir, System.String task, System.Action`1[T] progress) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nRethrow as GradleInvokationException: Gradle build failed\nUnityEditor.Android.GradleWrapper.Run (UnityEditor.Android.AndroidJavaTools javaTools, Unity.Android.Gradle.AndroidGradle androidGradle, System.String workingdir, System.String task, System.Action`1[T] progress) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.PostProcessor.Tasks.BuildGradleProject.Execute (UnityEditor.Android.PostProcessor.PostProcessorContext context) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.PostProcessor.PostProcessRunner.RunAllTasks (UnityEditor.Android.PostProcessor.PostProcessorContext context) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nRethrow as BuildFailedException: Exception of type 'UnityEditor.Build.BuildFailedException' was thrown.\nUnityEditor.Android.PostProcessor.CancelPostProcess.AbortBuild (System.String title, System.String message, System.Exception ex) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.PostProcessor.PostProcessRunner.RunAllTasks (UnityEditor.Android.PostProcessor.PostProcessorContext context) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.PostProcessAndroidPlayer.PostProcess (UnityEditor.Modules.BuildPostProcessArgs args, AndroidPlayerBuildProgram.Data.AndroidPlayerBuildProgramOutput buildProgramOutput) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.Android.AndroidBuildPostprocessor.PostProcess (UnityEditor.Modules.BuildPostProcessArgs args, UnityEditor.BuildProperties&amp; outProperties) (at &lt;c3a2c42a45424b88b29dfadf7f497cbb&gt;:0)\nUnityEditor.PostprocessBuildPlayer.Postprocess (UnityEditor.BuildTargetGroup targetGroup, UnityEditor.BuildTarget target, System.Int32 subtarget, System.String installPath,\n</code></pre>\n<p>My JDK Version is JDK-18 and the unity version is 2021.3.4f1 64bit i have been working in a project since many days and everything worked fine but when i tried to build the apk unity threw at error at me which is related to gradle only\nFast reply appreciated</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":9,"creation_date":1513353756,"post_id":47835901,"comment_id":82635301,"body_markdown":"What kind of project? For example, if you&#39;re using Maven with the appropriate plugin `mvn spring-boot:run` will work. Did you read [the docs](https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-running-your-application.html)?","body":"What kind of project? For example, if you&#39;re using Maven with the appropriate plugin <code>mvn spring-boot:run</code> will work. Did you read <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-running-your-application.html\" rel=\"nofollow noreferrer\">the docs</a>?"}],"answers":[{"comments":[{"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"score":3,"creation_date":1567275355,"post_id":47836135,"comment_id":101920129,"body_markdown":"$ java -jar ./target/springboot-https-seed-1.0-SNAPSHOT.jar ./src/main/java/be/heydari/seed/Application\nno main manifest attribute, in ./target/springboot-https-seed-1.0-SNAPSHOT.jar","body":"$ java -jar ./target/springboot-https-seed-1.0-SNAPSHOT.jar ./src/main/java/be/heydari/seed/Application no main manifest attribute, in ./target/springboot-https-seed-1.0-SNAPSHOT.jar"},{"owner":{"account_id":8988970,"reputation":1274,"user_id":6701594,"display_name":"Srikanth Anusuri"},"score":0,"creation_date":1567729745,"post_id":47836135,"comment_id":102059846,"body_markdown":"@PhilipRego, try you are specifying the path to the java file, not the class. Try this instead\n\njava -jar ./target/springboot-https-seed-1.0-SNAPSHOT.jar be.heydari.seed.Application","body":"@PhilipRego, try you are specifying the path to the java file, not the class. Try this instead  java -jar ./target/springboot-https-seed-1.0-SNAPSHOT.jar be.heydari.seed.Application"},{"owner":{"account_id":2922140,"reputation":482,"user_id":2504156,"accept_rate":70,"display_name":"Gana"},"score":1,"creation_date":1638174360,"post_id":47836135,"comment_id":124008119,"body_markdown":"You can simplify that command by adding &quot;fully qualified Main class name in pom.xml&quot;. Example: &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                \n                &lt;configuration&gt;\n\t                &lt;archive&gt;\n\t                    &lt;manifest&gt;\n\t                        &lt;mainClass&gt;com.myproject.myapp.Application&lt;/mainClass&gt;\n\t                    &lt;/manifest&gt;\n\t                &lt;/archive&gt;\n\t            &lt;/configuration&gt;\n            &lt;/plugin&gt;","body":"You can simplify that command by adding &quot;fully qualified Main class name in pom.xml&quot;. Example: &lt;plugin&gt;                 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;                 &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;                                  &lt;configuration&gt; \t                &lt;archive&gt; \t                    &lt;manifest&gt; \t                        &lt;mainClass&gt;com.myproject.myapp.Application&lt;/mainClass&gt; \t                    &lt;/manifest&gt; \t                &lt;/archive&gt; \t            &lt;/configuration&gt;             &lt;/plugin&gt;"},{"owner":{"account_id":2922140,"reputation":482,"user_id":2504156,"accept_rate":70,"display_name":"Gana"},"score":0,"creation_date":1638174476,"post_id":47836135,"comment_id":124008159,"body_markdown":"java -jar path/to/your/jarfile.jar (after above pom changes)","body":"java -jar path/to/your/jarfile.jar (after above pom changes)"}],"tags":[],"owner":{"account_id":8988970,"reputation":1274,"user_id":6701594,"display_name":"Srikanth Anusuri"},"comment_count":4,"down_vote_count":1,"up_vote_count":78,"is_accepted":true,"score":77,"last_activity_date":1513354551,"creation_date":1513354551,"answer_id":47836135,"question_id":47835901,"body_markdown":"You will need to build the jar file first. Here is the syntax to run the main class from a jar file.\r\n\r\n    java -jar path/to/your/jarfile.jar fully.qualified.package.Application \r\n\r\n","title":"How to start up spring-boot application via command line?","body":"<p>You will need to build the jar file first. Here is the syntax to run the main class from a jar file.</p>\n\n<pre><code>java -jar path/to/your/jarfile.jar fully.qualified.package.Application \n</code></pre>\n"},{"comments":[{"owner":{"account_id":3393169,"reputation":1150,"user_id":2854181,"accept_rate":68,"display_name":"mounaim"},"score":0,"creation_date":1583177827,"post_id":55200392,"comment_id":107021146,"body_markdown":"what do you mean by &quot;the root of the project&quot; if the project is already built in a war archive ?","body":"what do you mean by &quot;the root of the project&quot; if the project is already built in a war archive ?"},{"owner":{"account_id":11061465,"reputation":3057,"user_id":8149916,"display_name":"Adindu Stevens"},"score":9,"creation_date":1583225850,"post_id":55200392,"comment_id":107034992,"body_markdown":"The root of the the application is the folder that contains the pom.xml of the application is. It one folder backwards from where you found your the .war file.","body":"The root of the the application is the folder that contains the pom.xml of the application is. It one folder backwards from where you found your the .war file."},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha≈Ç Ziober"},"score":2,"creation_date":1610466428,"post_id":55200392,"comment_id":116138956,"body_markdown":"For projects where Spring Boot root POM is not used it does not work and we need to use full name as in this [Maven- No plugin found for prefix &#39;spring-boot&#39; in the current project and in the plugin groups](https://stackoverflow.com/a/54873826/51591) answer.","body":"For projects where Spring Boot root POM is not used it does not work and we need to use full name as in this <a href=\"https://stackoverflow.com/a/54873826/51591\">Maven- No plugin found for prefix &#39;spring-boot&#39; in the current project and in the plugin groups</a> answer."},{"owner":{"account_id":3026387,"reputation":440,"user_id":2566304,"accept_rate":0,"display_name":"Andrey M. Stepanov"},"score":5,"creation_date":1635196851,"post_id":55200392,"comment_id":123227394,"body_markdown":"Does it work &quot;only if you have maven added to your pom.xml&quot; or if you have spring-boot-maven-plugin installed in addition to maven itself?\nBy the way what did you mean exactly by &quot;having maven added to your pom.xml&quot;?\nHow are we supposed to add maven to pom.xml?","body":"Does it work &quot;only if you have maven added to your pom.xml&quot; or if you have spring-boot-maven-plugin installed in addition to maven itself? By the way what did you mean exactly by &quot;having maven added to your pom.xml&quot;? How are we supposed to add maven to pom.xml?"},{"owner":{"account_id":7602721,"reputation":410,"user_id":5766691,"display_name":"Zaphod Beeblebrox"},"score":0,"creation_date":1693394735,"post_id":55200392,"comment_id":135754287,"body_markdown":"in a multi-module maven project you first have to change to the directory of the application project. When I run &quot;mvn spring-boot:run&quot; in the main folder of my project, I receive an error &quot;no plugin found for prefix &#39;spring-boot&#39; in the current project...&quot;","body":"in a multi-module maven project you first have to change to the directory of the application project. When I run &quot;mvn spring-boot:run&quot; in the main folder of my project, I receive an error &quot;no plugin found for prefix &#39;spring-boot&#39; in the current project...&quot;"}],"tags":[],"owner":{"account_id":11061465,"reputation":3057,"user_id":8149916,"display_name":"Adindu Stevens"},"comment_count":5,"down_vote_count":2,"up_vote_count":232,"is_accepted":false,"score":230,"last_activity_date":1560497623,"creation_date":1552762291,"answer_id":55200392,"question_id":47835901,"body_markdown":"I presume you are trying to compile the application and run it without using an IDE.\r\nI also presume you have maven installed and correctly added maven to your environment variable.\r\n\r\nTo install and add maven to environment variable visit [Install maven][1] if you are under a proxy check out [add proxy to maven][2]\r\n\r\nNavigate to the root of the project via command line and execute the command\r\n\r\n    mvn spring-boot:run\r\n\r\n The CLI will run your application on the configured port and you can access it just like you would if you start the app in an IDE.\r\n\r\nNote: This will work only if you have maven added to your pom.xml\r\n\r\n\r\n  [1]: https://www.mkyong.com/maven/how-to-install-maven-in-windows/\r\n  [2]: https://stackoverflow.com/a/47175285/8149916","title":"How to start up spring-boot application via command line?","body":"<p>I presume you are trying to compile the application and run it without using an IDE.\nI also presume you have maven installed and correctly added maven to your environment variable.</p>\n\n<p>To install and add maven to environment variable visit <a href=\"https://www.mkyong.com/maven/how-to-install-maven-in-windows/\" rel=\"noreferrer\">Install maven</a> if you are under a proxy check out <a href=\"https://stackoverflow.com/a/47175285/8149916\">add proxy to maven</a></p>\n\n<p>Navigate to the root of the project via command line and execute the command</p>\n\n<pre><code>mvn spring-boot:run\n</code></pre>\n\n<p>The CLI will run your application on the configured port and you can access it just like you would if you start the app in an IDE.</p>\n\n<p>Note: This will work only if you have maven added to your pom.xml</p>\n"},{"comments":[{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha≈Ç Ziober"},"score":1,"creation_date":1610466345,"post_id":55203496,"comment_id":116138908,"body_markdown":"For projects where Spring Boot root POM is not used it does not work and we need to use full name as in this [Maven- No plugin found for prefix &#39;spring-boot&#39; in the current project and in the plugin groups](https://stackoverflow.com/a/54873826/51591) answer.","body":"For projects where Spring Boot root POM is not used it does not work and we need to use full name as in this <a href=\"https://stackoverflow.com/a/54873826/51591\">Maven- No plugin found for prefix &#39;spring-boot&#39; in the current project and in the plugin groups</a> answer."}],"tags":[],"owner":{"account_id":7671820,"reputation":479,"user_id":5813801,"display_name":"soyphea"},"comment_count":1,"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1552792128,"creation_date":1552792128,"answer_id":55203496,"question_id":47835901,"body_markdown":"Spring Boot provide the plugin with maven.\r\n\r\nSo you can go to your project directory and run\r\n\r\n    mvn spring-boot:run\r\n\r\n\r\nThis command line run will be easily when you&#39;re using spring-boot-devs-tool with auto reload/restart when you have changed you application.","title":"How to start up spring-boot application via command line?","body":"<p>Spring Boot provide the plugin with maven.</p>\n\n<p>So you can go to your project directory and run</p>\n\n<pre><code>mvn spring-boot:run\n</code></pre>\n\n<p>This command line run will be easily when you're using spring-boot-devs-tool with auto reload/restart when you have changed you application.</p>\n"},{"comments":[{"owner":{"account_id":9925001,"reputation":1047,"user_id":7346931,"display_name":"Dharmendrasinh Chudasama"},"score":3,"creation_date":1641367855,"post_id":56616547,"comment_id":124783650,"body_markdown":"Use mvn package insted of mvn install, mvn install will copy generated file to your local maven repository (.m2) which is not preferred","body":"Use mvn package insted of mvn install, mvn install will copy generated file to your local maven repository (.m2) which is not preferred"},{"owner":{"account_id":8231075,"reputation":192,"user_id":6191672,"display_name":"LakShan"},"score":2,"creation_date":1652638590,"post_id":56616547,"comment_id":127649130,"body_markdown":"correction:- \nmaven package should be mvn package","body":"correction:-  maven package should be mvn package"}],"tags":[],"owner":{"account_id":7025825,"reputation":1450,"user_id":5383238,"accept_rate":60,"display_name":"Abdur Rahman"},"comment_count":2,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1680178859,"creation_date":1560665414,"answer_id":56616547,"question_id":47835901,"body_markdown":"To run the spring-boot application, need to follow some step.\r\n\r\n1. Maven setup (ignore if already setup):\r\n\r\n   a. Install maven from https://maven.apache.org/download.cgi\r\n   \r\n   b. Unzip maven and keep in C drive (you can keep any location. Path location will be changed accordingly).\r\n\r\n   c. Set MAVEN_HOME in system variable. \r\n [![enter image description here][1]][1]\r\n\r\n\r\n   d. Set path for maven\r\n\r\n[![enter image description here][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/ibo5A.png\r\n  [2]: https://i.stack.imgur.com/wl0eU.png\r\n\r\n\r\n2. Add Maven Plugin to POM.XML\r\n           \r\n```xml\r\n    &lt;build&gt;\r\n       &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n           &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n```\r\n3. Build Spring Boot Project with Maven\r\n\r\n           mvn package\r\n   or       \r\n          \r\n             mvn install / mvn clean install\r\n\r\n4. Run Spring Boot app using Maven: \r\n               \r\n            mvn spring-boot:run\r\n\r\n5. **[optional]** Run Spring Boot app with java -jar command\r\n\r\n             java -jar target/mywebserviceapp-0.0.1-SNAPSHOT.jar\r\n  ","title":"How to start up spring-boot application via command line?","body":"<p>To run the spring-boot application, need to follow some step.</p>\n<ol>\n<li><p>Maven setup (ignore if already setup):</p>\n<p>a. Install maven from <a href=\"https://maven.apache.org/download.cgi\" rel=\"noreferrer\">https://maven.apache.org/download.cgi</a></p>\n<p>b. Unzip maven and keep in C drive (you can keep any location. Path location will be changed accordingly).</p>\n<p>c. Set MAVEN_HOME in system variable.\n<a href=\"https://i.stack.imgur.com/ibo5A.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ibo5A.png\" alt=\"enter image description here\" /></a></p>\n<p>d. Set path for maven</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/wl0eU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wl0eU.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li>Add Maven Plugin to POM.XML</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;build&gt;\n       &lt;plugins&gt;\n         &lt;plugin&gt;\n           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n           &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n</code></pre>\n<ol start=\"3\">\n<li><p>Build Spring Boot Project with Maven</p>\n<pre><code>    mvn package\n</code></pre>\n<p>or</p>\n<pre><code>      mvn install / mvn clean install\n</code></pre>\n</li>\n<li><p>Run Spring Boot app using Maven:</p>\n<pre><code>     mvn spring-boot:run\n</code></pre>\n</li>\n<li><p><strong>[optional]</strong> Run Spring Boot app with java -jar command</p>\n<pre><code>      java -jar target/mywebserviceapp-0.0.1-SNAPSHOT.jar\n</code></pre>\n</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":3260426,"reputation":11579,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"score":3,"creation_date":1577077989,"post_id":57538815,"comment_id":105083154,"body_markdown":"Assuming only a few users will use the `Gradle`, the answer is very helpful.","body":"Assuming only a few users will use the <code>Gradle</code>, the answer is very helpful."}],"tags":[],"owner":{"account_id":9058130,"reputation":1392,"user_id":6745604,"display_name":"Paula T"},"comment_count":1,"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1566065783,"creation_date":1566065783,"answer_id":57538815,"question_id":47835901,"body_markdown":"If you&#39;re using gradle, you can use: \r\n\r\n    ./gradlew bootRun","title":"How to start up spring-boot application via command line?","body":"<p>If you're using gradle, you can use: </p>\n\n<pre><code>./gradlew bootRun\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13717415,"reputation":1385,"user_id":9898251,"display_name":"Badri Paudel"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1583672795,"creation_date":1583672795,"answer_id":60587744,"question_id":47835901,"body_markdown":"One of the ways that you can run your spring-boot application from command line is as follows : \r\n\r\n1) First **go to your project directory** in command line [where is your project located ?]\r\n\r\n2) Then in the next step **you have to create jar file** for that, this can be done as\r\n   \r\n `mvnw package` [**for WINDOWS OS** ] or `./mvnw package` [**for MAC OS**] , **this will \r\n  create jar file**  for our application.\r\n\r\n3) jar file is created in the **target** sub-directory \r\n\r\n4)Now **go to target sub directory** as jar was created inside of it , i.e `cd target`\r\n\r\n5) Now run the jar file in there. \r\n   Use command `java -jar name.jar` [ name is the name of your created jar file.]\r\n   \r\n   and there you go , you are done . Now you can run project in browser, \r\n\r\n     http://localhost:port_number","title":"How to start up spring-boot application via command line?","body":"<p>One of the ways that you can run your spring-boot application from command line is as follows : </p>\n\n<p>1) First <strong>go to your project directory</strong> in command line [where is your project located ?]</p>\n\n<p>2) Then in the next step <strong>you have to create jar file</strong> for that, this can be done as</p>\n\n<p><code>mvnw package</code> [<strong>for WINDOWS OS</strong> ] or <code>./mvnw package</code> [<strong>for MAC OS</strong>] , <strong>this will \n  create jar file</strong>  for our application.</p>\n\n<p>3) jar file is created in the <strong>target</strong> sub-directory </p>\n\n<p>4)Now <strong>go to target sub directory</strong> as jar was created inside of it , i.e <code>cd target</code></p>\n\n<p>5) Now run the jar file in there. \n   Use command <code>java -jar name.jar</code> [ name is the name of your created jar file.]</p>\n\n<p>and there you go , you are done . Now you can run project in browser, </p>\n\n<pre><code> http://localhost:port_number\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17829585,"reputation":103,"user_id":12949941,"display_name":"Hariharan"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1583729637,"creation_date":1583729637,"answer_id":60594896,"question_id":47835901,"body_markdown":"A Spring Boot project configured through Maven can be run using the following command from the project source folder\r\n```\r\nmvn spring-boot:run","title":"How to start up spring-boot application via command line?","body":"<p>A Spring Boot project configured through Maven can be run using the following command from the project source folder</p>\n\n<pre><code>mvn spring-boot:run\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1587493543,"creation_date":1584516230,"answer_id":60735042,"question_id":47835901,"body_markdown":"**1.Run Spring Boot app with java -jar command**\r\n\r\nTo run your Spring Boot app from a command line in a Terminal window you can use java -jar command. \r\nThis is provided your Spring Boot app was packaged as an executable jar file.\r\n\r\n    java -jar target/app-0.0.1-SNAPSHOT.jar\r\n\r\n\r\n**2.Run Spring Boot app using Maven**\r\n\r\nYou can also use Maven plugin to run your Spring Boot app. Use the below command to run your Spring Boot app with Maven plugin:\r\n\r\n    mvn spring-boot:run\r\n\r\n**3.Run Spring Boot App with Gradle**\r\n\r\nAnd if you use Gradle you can run the Spring Boot app with the following command:\r\n\r\n    gradle bootRun","title":"How to start up spring-boot application via command line?","body":"<p><strong>1.Run Spring Boot app with java -jar command</strong></p>\n\n<p>To run your Spring Boot app from a command line in a Terminal window you can use java -jar command. \nThis is provided your Spring Boot app was packaged as an executable jar file.</p>\n\n<pre><code>java -jar target/app-0.0.1-SNAPSHOT.jar\n</code></pre>\n\n<p><strong>2.Run Spring Boot app using Maven</strong></p>\n\n<p>You can also use Maven plugin to run your Spring Boot app. Use the below command to run your Spring Boot app with Maven plugin:</p>\n\n<pre><code>mvn spring-boot:run\n</code></pre>\n\n<p><strong>3.Run Spring Boot App with Gradle</strong></p>\n\n<p>And if you use Gradle you can run the Spring Boot app with the following command:</p>\n\n<pre><code>gradle bootRun\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16463114,"reputation":1221,"user_id":11893765,"display_name":"Abi Chhetri"},"comment_count":0,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1600494750,"creation_date":1600494750,"answer_id":63965679,"question_id":47835901,"body_markdown":"Run Spring Boot app using Maven\r\n\r\nYou can also use Maven plugin to run your Spring Boot app. Use the below example to run your Spring Boot app with Maven plugin:\r\n\r\n    mvn spring-boot:run\r\n\r\nRun Spring Boot App with Gradle\r\n\r\nAnd if you use Gradle you can run the Spring Boot app with the following command:\r\n\r\n    gradle bootRun","title":"How to start up spring-boot application via command line?","body":"<p>Run Spring Boot app using Maven</p>\n<p>You can also use Maven plugin to run your Spring Boot app. Use the below example to run your Spring Boot app with Maven plugin:</p>\n<pre><code>mvn spring-boot:run\n</code></pre>\n<p>Run Spring Boot App with Gradle</p>\n<p>And if you use Gradle you can run the Spring Boot app with the following command:</p>\n<pre><code>gradle bootRun\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12324708,"reputation":81,"user_id":8993013,"display_name":"Vivek Lambhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1621255579,"creation_date":1621255579,"answer_id":67569958,"question_id":47835901,"body_markdown":"For macOS user\r\nIf you configured your application using `maven` \r\nFirst, go to your project directory in the terminal\r\nthen simply run \r\n\r\n    ./mvnw spring-boot:run\r\nYou are done. Now you can hit localhost with port number.\r\n\r\nThis command mentioned in the [spring official guide][1].\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/spring-boot/","title":"How to start up spring-boot application via command line?","body":"<p>For macOS user\nIf you configured your application using <code>maven</code>\nFirst, go to your project directory in the terminal\nthen simply run</p>\n<pre><code>./mvnw spring-boot:run\n</code></pre>\n<p>You are done. Now you can hit localhost with port number.</p>\n<p>This command mentioned in the <a href=\"https://spring.io/guides/gs/spring-boot/\" rel=\"noreferrer\">spring official guide</a>.</p>\n"},{"tags":[],"owner":{"account_id":23046057,"reputation":1,"user_id":17203873,"display_name":"ives murillo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638089847,"creation_date":1638056776,"answer_id":70139594,"question_id":47835901,"body_markdown":"I was having the same problem, I fixed it by modifying the dependency in the pom. I added `web` at the end.\r\n       \r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-**starter**&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;  \r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;","title":"How to start up spring-boot application via command line?","body":"<p>I was having the same problem, I fixed it by modifying the dependency in the pom. I added <code>web</code> at the end.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-**starter**&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;  \n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15006936,"reputation":2141,"user_id":10832700,"display_name":"ahmnouira"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1664159126,"creation_date":1664159126,"answer_id":73849121,"question_id":47835901,"body_markdown":"For **Maven** based projects use this command to run the spring boot application: \r\n\r\n```bash\r\nmvn spring-boot:run\r\n```","title":"How to start up spring-boot application via command line?","body":"<p>For <strong>Maven</strong> based projects use this command to run the spring boot application:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn spring-boot:run\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26206668,"reputation":148,"user_id":19886178,"display_name":"Vishal Bramhankar"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1665844619,"creation_date":1665844619,"answer_id":74080382,"question_id":47835901,"body_markdown":"open cmd from your project path the then at cmd run following cmmands-\r\n1st way to build and run-&gt; \r\n\r\n    mvn clean install\r\n\r\nfor run only -&gt; \r\n\r\n    mvn spring-boot:run\r\n\r\n1st way to build and run after jar file generated in target folder -&gt;\r\n\r\n    java -jar target/accounts-0.0.1-SNAPSHOT.jar\r\n\r\n","title":"How to start up spring-boot application via command line?","body":"<p>open cmd from your project path the then at cmd run following cmmands-\n1st way to build and run-&gt;</p>\n<pre><code>mvn clean install\n</code></pre>\n<p>for run only -&gt;</p>\n<pre><code>mvn spring-boot:run\n</code></pre>\n<p>1st way to build and run after jar file generated in target folder -&gt;</p>\n<pre><code>java -jar target/accounts-0.0.1-SNAPSHOT.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1972221,"reputation":16711,"user_id":1770868,"accept_rate":95,"display_name":"Ahmad Aghazadeh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694150855,"creation_date":1694149588,"answer_id":77064265,"question_id":47835901,"body_markdown":"If you use the gradle and want to send pass arguments\r\n\r\n    gradlew bootRun --args=&#39;--spring.application.instance_id=ahmad,--server.port=1234&#39;\r\n\r\n","title":"How to start up spring-boot application via command line?","body":"<p>If you use the gradle and want to send pass arguments</p>\n<pre><code>gradlew bootRun --args='--spring.application.instance_id=ahmad,--server.port=1234'\n</code></pre>\n"}],"owner":{"account_id":4355646,"reputation":1785,"user_id":4900074,"accept_rate":83,"display_name":"user4900074"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":496987,"favorite_count":0,"down_vote_count":2,"up_vote_count":158,"accepted_answer_id":47836135,"answer_count":14,"score":156,"last_activity_date":1694150855,"creation_date":1513353687,"question_id":47835901,"body_markdown":"I have a spring-boot application which I need to start up by going to the folder directory and start up my web application via command line. I have a class called Application.java and the code inside it is as followed.\r\n\r\n    @SpringBootApplication(scanBasePackages = {&quot;com.ubs.tas.topcat.dashboard&quot;})\r\n    public class Application extends SpringBootServletInitializer {\r\n        private static final Logger LOGGER = LoggerFactory.getLogger(Application.class.getName());\r\n        private static final Class&lt;Application&gt; applicationClass = Application.class;\r\n    \r\n        @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application.sources(applicationClass);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            LOGGER.info(&quot;Starting...&quot;);\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\n\r\nI set up classpath then tried to run the command &quot;`java ApplicationUtility`&quot; but I&#39;m getting this error message &quot;`Could not find the main class: ApplicationUtility. Program will exist.`&quot;\r\n\r\n\r\n\r\n\r\n","title":"How to start up spring-boot application via command line?","body":"<p>I have a spring-boot application which I need to start up by going to the folder directory and start up my web application via command line. I have a class called Application.java and the code inside it is as followed.</p>\n\n<pre><code>@SpringBootApplication(scanBasePackages = {\"com.ubs.tas.topcat.dashboard\"})\npublic class Application extends SpringBootServletInitializer {\n    private static final Logger LOGGER = LoggerFactory.getLogger(Application.class.getName());\n    private static final Class&lt;Application&gt; applicationClass = Application.class;\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(applicationClass);\n    }\n\n    public static void main(String[] args) {\n        LOGGER.info(\"Starting...\");\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p>I set up classpath then tried to run the command \"<code>java ApplicationUtility</code>\" but I'm getting this error message \"<code>Could not find the main class: ApplicationUtility. Program will exist.</code>\"</p>\n"},{"tags":["java","exit","sigterm","shutdown-hook"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694151271,"post_id":77064315,"comment_id":135856133,"body_markdown":"Well, it&#39;s not supposed to finish on a SIGTERM without running the shutdown hooks. Maybe there&#39;s something in the hooks that cause issues? Dunno if some native debugger might be useful to get further information, or look at OS logs to see if there&#39;s something about it.","body":"Well, it&#39;s not supposed to finish on a SIGTERM without running the shutdown hooks. Maybe there&#39;s something in the hooks that cause issues? Dunno if some native debugger might be useful to get further information, or look at OS logs to see if there&#39;s something about it."},{"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"score":0,"creation_date":1694151550,"post_id":77064315,"comment_id":135856175,"body_markdown":"@Kayaman  Agreed.  The SIGTERM tells the process to start the shutdown procedure.  Unfortunately, something kills the process instead of letting the shutdown procedure begin.  It&#39;s been a long time since I used a native debugger.  That seems daunting since I figure I would need to build a JVM.  I am not sure what Windows or Linux log file to look at.","body":"@Kayaman  Agreed.  The SIGTERM tells the process to start the shutdown procedure.  Unfortunately, something kills the process instead of letting the shutdown procedure begin.  It&#39;s been a long time since I used a native debugger.  That seems daunting since I figure I would need to build a JVM.  I am not sure what Windows or Linux log file to look at."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1694152340,"post_id":77064315,"comment_id":135856274,"body_markdown":"What&#39;s the exit code of the complex server when stopped with SIGTERM?","body":"What&#39;s the exit code of the complex server when stopped with SIGTERM?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1694152593,"post_id":77064315,"comment_id":135856300,"body_markdown":"You can run the complex server under the debugger and put a breakpoint in `Runtime.halt`, just in case something is calling that.","body":"You can run the complex server under the debugger and put a breakpoint in <code>Runtime.halt</code>, just in case something is calling that."},{"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"score":0,"creation_date":1694442394,"post_id":77064315,"comment_id":135887902,"body_markdown":"@tgdavies The exit code is 143. I put a breakpoint on Runtime.halt() and java.lang.Shutdown.halt(). Neither of them are hit.  I left the breakpoint there and ran another program.  Both breakpoints are hit.","body":"@tgdavies The exit code is 143. I put a breakpoint on Runtime.halt() and java.lang.Shutdown.halt(). Neither of them are hit.  I left the breakpoint there and ran another program.  Both breakpoints are hit."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1694470238,"post_id":77064315,"comment_id":135892557,"body_markdown":"I think you need to make sure that you are running them both in *exactly* the same way, and start to make one more like the other until you find out what&#39;s happening.","body":"I think you need to make sure that you are running them both in <i>exactly</i> the same way, and start to make one more like the other until you find out what&#39;s happening."}],"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694150552,"creation_date":1694150552,"question_id":77064315,"body_markdown":"A simple Java program catches `kill -SIGTERM` and starts the JVM shutdown hooks (i.e., `Runtime.addShutdownHook()`).  When the hooks complete, the JVM shuts down cleanly.\r\n\r\nA simple Helidon server has a JVM shutdown hook to ensure the `CDI` shuts down cleanly.  Netty stops listening.  I have `@BeforeDestroyed`, `@Destroyed`, and JVM shutdown hooks that simply log a message.  The hooks log and complete.  The server and JVM shut down cleanly.\r\n\r\nI have a much more complex Helidon server.  I have code that monitors for a special delete file.  When I create the delete file, the code detects the file and initiates the shutdown.  I see log messages from Netty, `@BeforeDestroyed`, `@Destroyed`, and the JVM shutdown hooks.  The server and JVM shut down cleanly.  The shutdown takes 1.011 seconds.\r\n\r\nWhen I send `kill -SIGTERM` to the complex Helidon server, the server stops abruptly.  Netty does not shut down.  The hooks are not called.  The server exits within milliseconds.\r\n\r\nHow do I debug why the server exits abruptly?  What could cause the server to exit abruptly upon receiving a `SIGTERM`?\r\n\r\nI can reproduce this problem on Windows (with Cygwin&#39;s kill) and Linux.","title":"How to Debug a SIGTERM that Causes Abrupt Helidon Server Shutdown","body":"<p>A simple Java program catches <code>kill -SIGTERM</code> and starts the JVM shutdown hooks (i.e., <code>Runtime.addShutdownHook()</code>).  When the hooks complete, the JVM shuts down cleanly.</p>\n<p>A simple Helidon server has a JVM shutdown hook to ensure the <code>CDI</code> shuts down cleanly.  Netty stops listening.  I have <code>@BeforeDestroyed</code>, <code>@Destroyed</code>, and JVM shutdown hooks that simply log a message.  The hooks log and complete.  The server and JVM shut down cleanly.</p>\n<p>I have a much more complex Helidon server.  I have code that monitors for a special delete file.  When I create the delete file, the code detects the file and initiates the shutdown.  I see log messages from Netty, <code>@BeforeDestroyed</code>, <code>@Destroyed</code>, and the JVM shutdown hooks.  The server and JVM shut down cleanly.  The shutdown takes 1.011 seconds.</p>\n<p>When I send <code>kill -SIGTERM</code> to the complex Helidon server, the server stops abruptly.  Netty does not shut down.  The hooks are not called.  The server exits within milliseconds.</p>\n<p>How do I debug why the server exits abruptly?  What could cause the server to exit abruptly upon receiving a <code>SIGTERM</code>?</p>\n<p>I can reproduce this problem on Windows (with Cygwin's kill) and Linux.</p>\n"},{"tags":["java","mariadb","testcontainers"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694000689,"post_id":77051534,"comment_id":135833025,"body_markdown":"Localhost might be bound to the loopback address (in IP4 127.0.0.1) which is not meant to be routeable, i.e. only valid on the box on which it&#39;s running. You should bind it to the LAN IP address if you want to communicate between boxes on the same LAN","body":"Localhost might be bound to the loopback address (in IP4 127.0.0.1) which is not meant to be routeable, i.e. only valid on the box on which it&#39;s running. You should bind it to the LAN IP address if you want to communicate between boxes on the same LAN"},{"owner":{"account_id":18215536,"reputation":15,"user_id":13257273,"display_name":"sally"},"score":0,"creation_date":1694001011,"post_id":77051534,"comment_id":135833087,"body_markdown":"@g00se how do you bind a test container to a LAN IP address?","body":"@g00se how do you bind a test container to a LAN IP address?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694001410,"post_id":77051534,"comment_id":135833157,"body_markdown":"No idea - I don&#39;t use that software, but it looks like you&#39;re doing host configuration, in which case you need to change the way you do it","body":"No idea - I don&#39;t use that software, but it looks like you&#39;re doing host configuration, in which case you need to change the way you do it"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694001862,"post_id":77051534,"comment_id":135833238,"body_markdown":"I would take the precaution of making sure my &#39;theory&#39; is correct first, using, e.g. `netstat`","body":"I would take the precaution of making sure my &#39;theory&#39; is correct first, using, e.g. <code>netstat</code>"},{"owner":{"account_id":18215536,"reputation":15,"user_id":13257273,"display_name":"sally"},"score":0,"creation_date":1694002969,"post_id":77051534,"comment_id":135833511,"body_markdown":"i donot do host configuration, i  have 2 test containers which cannot see eachother on localhost eventhough they are in same network ...","body":"i donot do host configuration, i  have 2 test containers which cannot see eachother on localhost eventhough they are in same network ..."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694003108,"post_id":77051534,"comment_id":135833547,"body_markdown":"So what&#39;s this then? *.withHostConfig(new HostConfig()...*","body":"So what&#39;s this then? <i>.withHostConfig(new HostConfig()...</i>"},{"owner":{"account_id":18215536,"reputation":15,"user_id":13257273,"display_name":"sally"},"score":0,"creation_date":1694007133,"post_id":77051534,"comment_id":135834565,"body_markdown":"hmm. good question :D i modified it and removed the hostconfig but I still have the same issue.","body":"hmm. good question :D i modified it and removed the hostconfig but I still have the same issue."}],"answers":[{"tags":[],"owner":{"account_id":1488715,"reputation":1432,"user_id":1396362,"display_name":"Kevin Wittek"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694150507,"creation_date":1694150507,"answer_id":77064311,"question_id":77051534,"body_markdown":"The MariaDB container port `3306` will be mapped to a random free port on your host, also see [this section](https://java.testcontainers.org/features/networking/#exposing-container-ports-to-the-host) in the official Testcontainers docs regarding networking between host and container.\r\n\r\nTo access the port after the container has started, use the following methods:\r\n``` Java\r\n// access port\r\nmariadb.getFirstMappedPort();\r\n\r\n// get full JDBC URL\r\nmariadb.getJDBCUrl();\r\n```\r\n\r\nSince you are using the `MariaDBContainer` module, you don&#39;t need to use \r\n`withExpostedPorts()`, it is already auto-configured.\r\n\r\nFurthermore, I am unsure what you are trying to achieve here, you should remove this code:\r\n```\r\nmariadb.setPortBindings(Collections.singletonList(mariadb.getMappedPort(3306) +&quot;:3306&quot;));\r\n```\r\n\r\nFor networking between containers, please check [this part](https://java.testcontainers.org/features/networking/#advanced-networking) of the docs.","title":"mariadb testcontainer not exposed to localhost","body":"<p>The MariaDB container port <code>3306</code> will be mapped to a random free port on your host, also see <a href=\"https://java.testcontainers.org/features/networking/#exposing-container-ports-to-the-host\" rel=\"nofollow noreferrer\">this section</a> in the official Testcontainers docs regarding networking between host and container.</p>\n<p>To access the port after the container has started, use the following methods:</p>\n<pre><code>// access port\nmariadb.getFirstMappedPort();\n\n// get full JDBC URL\nmariadb.getJDBCUrl();\n</code></pre>\n<p>Since you are using the <code>MariaDBContainer</code> module, you don't need to use\n<code>withExpostedPorts()</code>, it is already auto-configured.</p>\n<p>Furthermore, I am unsure what you are trying to achieve here, you should remove this code:</p>\n<pre><code>mariadb.setPortBindings(Collections.singletonList(mariadb.getMappedPort(3306) +&quot;:3306&quot;));\n</code></pre>\n<p>For networking between containers, please check <a href=\"https://java.testcontainers.org/features/networking/#advanced-networking\" rel=\"nofollow noreferrer\">this part</a> of the docs.</p>\n"}],"owner":{"account_id":18215536,"reputation":15,"user_id":13257273,"display_name":"sally"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77064311,"answer_count":1,"score":0,"last_activity_date":1694150507,"creation_date":1694000318,"question_id":77051534,"body_markdown":"I have created the following mariadb testcontainer \r\n\r\n    @Container\r\n    private static final @NotNull MariaDBContainer&lt;?&gt; mariadb = getMariaDBTestContainer(network);\r\n\r\n    private static MariaDBContainer&lt;?&gt; getMariaDBTestContainer(Network network) {\r\n\r\n        MariaDBContainer mariadb = new MariaDBContainer&lt;&gt;(DockerImageName.parse(&quot;mariadb&quot;).withTag(&quot;10.5.8&quot;))\r\n                .withDatabaseName(&quot;db&quot;)\r\n                .withUsername(&quot;user&quot;)\r\n                .withPassword(&quot;pw&quot;)\r\n                .withInitScript(&quot;database.sql&quot;)\r\n                .withNetwork(network)\r\n                .withNetworkAliases(&quot;mariadb&quot;)\r\n                .withExposedPorts(3306)\r\n        \r\n        ;\r\n        mariadb.start();\r\n        mariadb.setPortBindings(Collections.singletonList(mariadb.getMappedPort(3306) +&quot;:3306&quot;));\r\n        return mariadb;\r\n    }\r\n\r\n\r\n\r\nI verified that \r\n\r\nmariadb.gethost() == &quot;localhost&quot;\r\nand \r\nmariadb.getMappedPort(3306) == 3306\r\n\r\n\r\nafter loading the test container however, I can reach the mariadb shell from anothe container in the same network by using mariadb container id but not via localhost. This commmand gives me mariadb shell \r\n\r\n `mariadb --host &lt;MARIADBCONTAINER_NAME&gt; --port 3306 --user user --password`\r\n\r\nbut this command \r\n`mariadb --host localhost --port 3306 --user user --password`\r\nsays \r\n`ERROR 2002 (HY000): Can&#39;t connect to server on &#39;localhost&#39; (99)`\r\n\r\n\r\ni wonder why localhost cannot connect to the mariadbshell\r\n","title":"mariadb testcontainer not exposed to localhost","body":"<p>I have created the following mariadb testcontainer</p>\n<pre><code>@Container\nprivate static final @NotNull MariaDBContainer&lt;?&gt; mariadb = getMariaDBTestContainer(network);\n\nprivate static MariaDBContainer&lt;?&gt; getMariaDBTestContainer(Network network) {\n\n    MariaDBContainer mariadb = new MariaDBContainer&lt;&gt;(DockerImageName.parse(&quot;mariadb&quot;).withTag(&quot;10.5.8&quot;))\n            .withDatabaseName(&quot;db&quot;)\n            .withUsername(&quot;user&quot;)\n            .withPassword(&quot;pw&quot;)\n            .withInitScript(&quot;database.sql&quot;)\n            .withNetwork(network)\n            .withNetworkAliases(&quot;mariadb&quot;)\n            .withExposedPorts(3306)\n    \n    ;\n    mariadb.start();\n    mariadb.setPortBindings(Collections.singletonList(mariadb.getMappedPort(3306) +&quot;:3306&quot;));\n    return mariadb;\n}\n</code></pre>\n<p>I verified that</p>\n<p>mariadb.gethost() == &quot;localhost&quot;\nand\nmariadb.getMappedPort(3306) == 3306</p>\n<p>after loading the test container however, I can reach the mariadb shell from anothe container in the same network by using mariadb container id but not via localhost. This commmand gives me mariadb shell</p>\n<p><code>mariadb --host &lt;MARIADBCONTAINER_NAME&gt; --port 3306 --user user --password</code></p>\n<p>but this command\n<code>mariadb --host localhost --port 3306 --user user --password</code>\nsays\n<code>ERROR 2002 (HY000): Can't connect to server on 'localhost' (99)</code></p>\n<p>i wonder why localhost cannot connect to the mariadbshell</p>\n"},{"tags":["java","excel","charts","apache-poi","pie-chart"],"answers":[{"comments":[{"owner":{"account_id":15413038,"reputation":85,"user_id":11119280,"display_name":"Rajesh Bhardwaj"},"score":0,"creation_date":1551248053,"post_id":54891166,"comment_id":96566144,"body_markdown":"Hi thanks a lot @Axel Richter thanks a lot :). Can u help me for adding data labels in  chart, as currently i have to add data labels manually in excel sheet.","body":"Hi thanks a lot @Axel Richter thanks a lot :). Can u help me for adding data labels in  chart, as currently i have to add data labels manually in excel sheet."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1551284828,"post_id":54891166,"comment_id":96587075,"body_markdown":"@Rajesh Bhardwaj: See my supplement.","body":"@Rajesh Bhardwaj: See my supplement."}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1694150144,"creation_date":1551202527,"answer_id":54891166,"question_id":54885970,"body_markdown":"Derived from the chart examples in https://svn.apache.org/repos/asf/poi/trunk/poi-examples/src/main/java/org/apache/poi/examples/xssf/usermodel/ here is a `PieChart` example using the `XDDF` stuff:\r\n\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    \r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xddf.usermodel.chart.LegendPosition;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFChartData;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFChartLegend;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFDataSource;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFDataSourcesFactory;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFNumericalDataSource;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFPieChartData;\r\n    import org.apache.poi.xssf.usermodel.XSSFChart;\r\n    import org.apache.poi.xssf.usermodel.XSSFClientAnchor;\r\n    import org.apache.poi.xssf.usermodel.XSSFDrawing;\r\n    import org.apache.poi.xssf.usermodel.XSSFSheet;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    \r\n    \r\n    public class PieChart {\r\n    \r\n      public static void main(String[] args) throws IOException {\r\n        try (XSSFWorkbook wb = new XSSFWorkbook()) {\r\n          XSSFSheet sheet = wb.createSheet(&quot;piechart&quot;);\r\n          final int NUM_OF_ROWS = 2;\r\n          final int NUM_OF_COLUMNS = 10;\r\n    \r\n          // Create a row and put some cells in it. Rows are 0 based.\r\n          Row row;\r\n          Cell cell;\r\n          for (int rowIndex = 0; rowIndex &lt; NUM_OF_ROWS; rowIndex++) {\r\n            row = sheet.createRow((short) rowIndex);\r\n            for (int colIndex = 0; colIndex &lt; NUM_OF_COLUMNS; colIndex++) {\r\n              cell = row.createCell((short) colIndex);\r\n              if (rowIndex == 0) cell.setCellValue(&quot;Cat &quot; + (colIndex + 1));\r\n              else cell.setCellValue((colIndex + 1) * (rowIndex + 1));\r\n            }\r\n          }\r\n    \r\n          XSSFDrawing drawing = sheet.createDrawingPatriarch();\r\n          XSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 4, 10, 25);\r\n    \r\n          XSSFChart chart = drawing.createChart(anchor);\r\n          chart.setTitleText(&quot;Pie Chart&quot;);\r\n          chart.setTitleOverlay(false);\r\n          XDDFChartLegend legend = chart.getOrAddLegend();\r\n          legend.setPosition(LegendPosition.TOP_RIGHT);\r\n    \r\n          XDDFDataSource&lt;String&gt; cat = XDDFDataSourcesFactory.fromStringCellRange(sheet,\r\n              new CellRangeAddress(0, 0, 0, NUM_OF_COLUMNS - 1));\r\n          XDDFNumericalDataSource&lt;Double&gt; val = XDDFDataSourcesFactory.fromNumericCellRange(sheet,\r\n              new CellRangeAddress(1, 1, 0, NUM_OF_COLUMNS - 1));\r\n    \r\n          XDDFChartData data = new XDDFPieChartData(chart.getCTChart().getPlotArea().addNewPieChart());\r\n          data.setVaryColors(true);\r\n          data.addSeries(cat, val);\r\n          chart.plot(data);\r\n     \r\n          // Write the output to a file\r\n          try (FileOutputStream fileOut = new FileOutputStream(&quot;ooxml-pie-chart.xlsx&quot;)) {\r\n            wb.write(fileOut);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n___________________________________________\r\n\r\nThe above is the minimal example using only the `XDDF` stuff. Here is a more extended version which sets data labels and makes the chart visible in `LibreOffice/OpenOffice Calc`. But this needs using the low level `org.openxmlformats.schemas.drawingml.x2006.chart.*` stuff.\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    \r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xddf.usermodel.chart.LegendPosition;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFChartData;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFChartLegend;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFDataSource;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFDataSourcesFactory;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFNumericalDataSource;\r\n    import org.apache.poi.xddf.usermodel.chart.XDDFPieChartData;\r\n    import org.apache.poi.xssf.usermodel.XSSFChart;\r\n    import org.apache.poi.xssf.usermodel.XSSFClientAnchor;\r\n    import org.apache.poi.xssf.usermodel.XSSFDrawing;\r\n    import org.apache.poi.xssf.usermodel.XSSFSheet;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    \r\n    import org.apache.poi.xssf.usermodel.DefaultIndexedColorMap;\r\n    \r\n    public class PieChart {\r\n    \r\n      public static void main(String[] args) throws IOException {\r\n        try (XSSFWorkbook wb = new XSSFWorkbook()) {\r\n          XSSFSheet sheet = wb.createSheet(&quot;piechart&quot;);\r\n          final int NUM_OF_ROWS = 2;\r\n          final int NUM_OF_COLUMNS = 10;\r\n    \r\n          // Create a row and put some cells in it. Rows are 0 based.\r\n          Row row;\r\n          Cell cell;\r\n          for (int rowIndex = 0; rowIndex &lt; NUM_OF_ROWS; rowIndex++) {\r\n            row = sheet.createRow((short) rowIndex);\r\n            for (int colIndex = 0; colIndex &lt; NUM_OF_COLUMNS; colIndex++) {\r\n              cell = row.createCell((short) colIndex);\r\n              if (rowIndex == 0) cell.setCellValue(&quot;Cat &quot; + (colIndex + 1));\r\n              else cell.setCellValue((colIndex + 1) * (rowIndex + 1));\r\n            }\r\n          }\r\n    \r\n          XSSFDrawing drawing = sheet.createDrawingPatriarch();\r\n          XSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 4, 10, 25);\r\n    \r\n          XSSFChart chart = drawing.createChart(anchor);\r\n          chart.setTitleText(&quot;Pie Chart&quot;);\r\n          chart.setTitleOverlay(false);\r\n          XDDFChartLegend legend = chart.getOrAddLegend();\r\n          legend.setPosition(LegendPosition.TOP_RIGHT);\r\n    \r\n          XDDFDataSource&lt;String&gt; cat = XDDFDataSourcesFactory.fromStringCellRange(sheet,\r\n              new CellRangeAddress(0, 0, 0, NUM_OF_COLUMNS - 1));\r\n          XDDFNumericalDataSource&lt;Double&gt; val = XDDFDataSourcesFactory.fromNumericCellRange(sheet,\r\n              new CellRangeAddress(1, 1, 0, NUM_OF_COLUMNS - 1));\r\n    \r\n          XDDFChartData data = new XDDFPieChartData(chart.getCTChart().getPlotArea().addNewPieChart());\r\n          data.setVaryColors(true);\r\n          XDDFChartData.Series series = data.addSeries(cat, val);\r\n          chart.plot(data);\r\n    \r\n          // Add data labels\r\n          if (!chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).isSetDLbls()) \r\n            chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDLbls();\r\n          chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls()\r\n            .addNewDLblPos().setVal(org.openxmlformats.schemas.drawingml.x2006.chart.STDLblPos.OUT_END);\r\n          chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls()\r\n            .addNewShowLegendKey().setVal(true);\r\n          chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls()\r\n            .addNewShowPercent().setVal(true);\r\n    \r\n          // Do not auto delete the title; is necessary for showing title in Calc\r\n          if (chart.getCTChart().getAutoTitleDeleted() == null) chart.getCTChart().addNewAutoTitleDeleted();\r\n          chart.getCTChart().getAutoTitleDeleted().setVal(false);\r\n    \r\n          // Data point colors; is necessary for showing data points in Calc\r\n          int pointCount = series.getCategoryData().getPointCount(); \r\n          for (int p = 0; p &lt; pointCount; p++) {\r\n            chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDPt().addNewIdx().setVal(p);\r\n            chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDPtArray(p)\r\n              .addNewSpPr().addNewSolidFill().addNewSrgbClr().setVal(DefaultIndexedColorMap.getDefaultRGB(p+10));\r\n          }\r\n     \r\n          // Write the output to a file\r\n          try (FileOutputStream fileOut = new FileOutputStream(&quot;ooxml-pie-chart.xlsx&quot;)) {\r\n            wb.write(fileOut);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nThis code needs the full jar of all of the schemas `ooxml-schemas-1.4.jar` as mentioned in [FAQ-N10025](https://poi.apache.org/help/faq.html#faq-N10025).\r\n_________________________\r\nSince version `apache poi 4.1.1` creation of the `XDDFChartData data` must be changed like:\r\n\r\n    ...\r\n    import org.apache.poi.xddf.usermodel.chart.ChartTypes;\r\n    ...\r\n    //XDDFChartData data = new XDDFPieChartData(chart.getCTChart().getPlotArea().addNewPieChart());\r\n    XDDFChartData data = chart.createData(ChartTypes.PIE, null, null);\r\n    ...\r\n\r\n____________________________________________________\r\n\r\nSince version `apache poi 5.0.0` the full jar of all of the schemas is `poi-ooxml-full.jar` as mentioned in [FAQ-N10025](https://poi.apache.org/help/faq.html#faq-N10025).\r\n\r\n________________________________________\r\n\r\n\r\nHow to use the the low level `org.openxmlformats.schemas.drawingml.x2006.chart.*` classes?\r\n\r\nUnfortunately there is no API documentation online available. But we need this. So we need downloading the sources of used `ooxml-schemas-*.jar` (up to Apache PPOI 4) or `poi-ooxml-full jar` (since Apache POI 5). Then we can create a API documentation using `javadoc`.\r\n\r\nAll Office Open XML files, so also `*.xlsx`, are simply ZIP archives. So one can unzip a `*.xlsx` file using a ZIP application (7-Zip can do that for example). Then we can have a look into the internals.\r\n\r\nTo find out what to do for charts in `*.xlsx` when high level classes of Apache POI lack support for something, do the folowing:\r\n\r\nCreate a `*.xlsx` having a chart using what Apache POI provides. Then unzip that `*.xlsx` and show the content of `xl/chart/chart*.xml`. Then open that `*.xlsx`  in Excel GUI and do what you want to do additionally. Then save. Then unzip that `*.xlsx` and show the content of `xl/chart/chart*.xml`. Now compare what has changed in XML. Now the need is to recreate those changes using code. \r\n\r\nAt first try to understand what `org.openxmlformats.schemas.drawingml.x2006.chart.*` classes needed. In XML the elements most are *C*omplex*T*ypes. So if you find an element `chart` in XML the correspondig class is `CTChart`. An XML elemernt `plotArea` is `CTPlotArea`. XML `pieChart` is `CTPieChart` and so on.\r\n\r\nKnowing this and having created the API documentation using javadoc, one should be able to figure out which methods of which classes to use to create what is required.\r\n","title":"how to generate piechart using apache poi 4.0 XDDFChartData, XDDFPieChartData; in excel sheet using java, i dont want to use jfree","body":"<p>Derived from the chart examples in <a href=\"https://svn.apache.org/repos/asf/poi/trunk/poi-examples/src/main/java/org/apache/poi/examples/xssf/usermodel/\" rel=\"nofollow noreferrer\">https://svn.apache.org/repos/asf/poi/trunk/poi-examples/src/main/java/org/apache/poi/examples/xssf/usermodel/</a> here is a <code>PieChart</code> example using the <code>XDDF</code> stuff:</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.io.IOException;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xddf.usermodel.chart.LegendPosition;\nimport org.apache.poi.xddf.usermodel.chart.XDDFChartData;\nimport org.apache.poi.xddf.usermodel.chart.XDDFChartLegend;\nimport org.apache.poi.xddf.usermodel.chart.XDDFDataSource;\nimport org.apache.poi.xddf.usermodel.chart.XDDFDataSourcesFactory;\nimport org.apache.poi.xddf.usermodel.chart.XDDFNumericalDataSource;\nimport org.apache.poi.xddf.usermodel.chart.XDDFPieChartData;\nimport org.apache.poi.xssf.usermodel.XSSFChart;\nimport org.apache.poi.xssf.usermodel.XSSFClientAnchor;\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\n\npublic class PieChart {\n\n  public static void main(String[] args) throws IOException {\n    try (XSSFWorkbook wb = new XSSFWorkbook()) {\n      XSSFSheet sheet = wb.createSheet(&quot;piechart&quot;);\n      final int NUM_OF_ROWS = 2;\n      final int NUM_OF_COLUMNS = 10;\n\n      // Create a row and put some cells in it. Rows are 0 based.\n      Row row;\n      Cell cell;\n      for (int rowIndex = 0; rowIndex &lt; NUM_OF_ROWS; rowIndex++) {\n        row = sheet.createRow((short) rowIndex);\n        for (int colIndex = 0; colIndex &lt; NUM_OF_COLUMNS; colIndex++) {\n          cell = row.createCell((short) colIndex);\n          if (rowIndex == 0) cell.setCellValue(&quot;Cat &quot; + (colIndex + 1));\n          else cell.setCellValue((colIndex + 1) * (rowIndex + 1));\n        }\n      }\n\n      XSSFDrawing drawing = sheet.createDrawingPatriarch();\n      XSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 4, 10, 25);\n\n      XSSFChart chart = drawing.createChart(anchor);\n      chart.setTitleText(&quot;Pie Chart&quot;);\n      chart.setTitleOverlay(false);\n      XDDFChartLegend legend = chart.getOrAddLegend();\n      legend.setPosition(LegendPosition.TOP_RIGHT);\n\n      XDDFDataSource&lt;String&gt; cat = XDDFDataSourcesFactory.fromStringCellRange(sheet,\n          new CellRangeAddress(0, 0, 0, NUM_OF_COLUMNS - 1));\n      XDDFNumericalDataSource&lt;Double&gt; val = XDDFDataSourcesFactory.fromNumericCellRange(sheet,\n          new CellRangeAddress(1, 1, 0, NUM_OF_COLUMNS - 1));\n\n      XDDFChartData data = new XDDFPieChartData(chart.getCTChart().getPlotArea().addNewPieChart());\n      data.setVaryColors(true);\n      data.addSeries(cat, val);\n      chart.plot(data);\n \n      // Write the output to a file\n      try (FileOutputStream fileOut = new FileOutputStream(&quot;ooxml-pie-chart.xlsx&quot;)) {\n        wb.write(fileOut);\n      }\n    }\n  }\n}\n</code></pre>\n<hr />\n<p>The above is the minimal example using only the <code>XDDF</code> stuff. Here is a more extended version which sets data labels and makes the chart visible in <code>LibreOffice/OpenOffice Calc</code>. But this needs using the low level <code>org.openxmlformats.schemas.drawingml.x2006.chart.*</code> stuff.</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.io.IOException;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xddf.usermodel.chart.LegendPosition;\nimport org.apache.poi.xddf.usermodel.chart.XDDFChartData;\nimport org.apache.poi.xddf.usermodel.chart.XDDFChartLegend;\nimport org.apache.poi.xddf.usermodel.chart.XDDFDataSource;\nimport org.apache.poi.xddf.usermodel.chart.XDDFDataSourcesFactory;\nimport org.apache.poi.xddf.usermodel.chart.XDDFNumericalDataSource;\nimport org.apache.poi.xddf.usermodel.chart.XDDFPieChartData;\nimport org.apache.poi.xssf.usermodel.XSSFChart;\nimport org.apache.poi.xssf.usermodel.XSSFClientAnchor;\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\nimport org.apache.poi.xssf.usermodel.DefaultIndexedColorMap;\n\npublic class PieChart {\n\n  public static void main(String[] args) throws IOException {\n    try (XSSFWorkbook wb = new XSSFWorkbook()) {\n      XSSFSheet sheet = wb.createSheet(&quot;piechart&quot;);\n      final int NUM_OF_ROWS = 2;\n      final int NUM_OF_COLUMNS = 10;\n\n      // Create a row and put some cells in it. Rows are 0 based.\n      Row row;\n      Cell cell;\n      for (int rowIndex = 0; rowIndex &lt; NUM_OF_ROWS; rowIndex++) {\n        row = sheet.createRow((short) rowIndex);\n        for (int colIndex = 0; colIndex &lt; NUM_OF_COLUMNS; colIndex++) {\n          cell = row.createCell((short) colIndex);\n          if (rowIndex == 0) cell.setCellValue(&quot;Cat &quot; + (colIndex + 1));\n          else cell.setCellValue((colIndex + 1) * (rowIndex + 1));\n        }\n      }\n\n      XSSFDrawing drawing = sheet.createDrawingPatriarch();\n      XSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, 0, 4, 10, 25);\n\n      XSSFChart chart = drawing.createChart(anchor);\n      chart.setTitleText(&quot;Pie Chart&quot;);\n      chart.setTitleOverlay(false);\n      XDDFChartLegend legend = chart.getOrAddLegend();\n      legend.setPosition(LegendPosition.TOP_RIGHT);\n\n      XDDFDataSource&lt;String&gt; cat = XDDFDataSourcesFactory.fromStringCellRange(sheet,\n          new CellRangeAddress(0, 0, 0, NUM_OF_COLUMNS - 1));\n      XDDFNumericalDataSource&lt;Double&gt; val = XDDFDataSourcesFactory.fromNumericCellRange(sheet,\n          new CellRangeAddress(1, 1, 0, NUM_OF_COLUMNS - 1));\n\n      XDDFChartData data = new XDDFPieChartData(chart.getCTChart().getPlotArea().addNewPieChart());\n      data.setVaryColors(true);\n      XDDFChartData.Series series = data.addSeries(cat, val);\n      chart.plot(data);\n\n      // Add data labels\n      if (!chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).isSetDLbls()) \n        chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDLbls();\n      chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls()\n        .addNewDLblPos().setVal(org.openxmlformats.schemas.drawingml.x2006.chart.STDLblPos.OUT_END);\n      chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls()\n        .addNewShowLegendKey().setVal(true);\n      chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDLbls()\n        .addNewShowPercent().setVal(true);\n\n      // Do not auto delete the title; is necessary for showing title in Calc\n      if (chart.getCTChart().getAutoTitleDeleted() == null) chart.getCTChart().addNewAutoTitleDeleted();\n      chart.getCTChart().getAutoTitleDeleted().setVal(false);\n\n      // Data point colors; is necessary for showing data points in Calc\n      int pointCount = series.getCategoryData().getPointCount(); \n      for (int p = 0; p &lt; pointCount; p++) {\n        chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).addNewDPt().addNewIdx().setVal(p);\n        chart.getCTChart().getPlotArea().getPieChartArray(0).getSerArray(0).getDPtArray(p)\n          .addNewSpPr().addNewSolidFill().addNewSrgbClr().setVal(DefaultIndexedColorMap.getDefaultRGB(p+10));\n      }\n \n      // Write the output to a file\n      try (FileOutputStream fileOut = new FileOutputStream(&quot;ooxml-pie-chart.xlsx&quot;)) {\n        wb.write(fileOut);\n      }\n    }\n  }\n}\n</code></pre>\n<p>This code needs the full jar of all of the schemas <code>ooxml-schemas-1.4.jar</code> as mentioned in <a href=\"https://poi.apache.org/help/faq.html#faq-N10025\" rel=\"nofollow noreferrer\">FAQ-N10025</a>.</p>\n<hr />\n<p>Since version <code>apache poi 4.1.1</code> creation of the <code>XDDFChartData data</code> must be changed like:</p>\n<pre><code>...\nimport org.apache.poi.xddf.usermodel.chart.ChartTypes;\n...\n//XDDFChartData data = new XDDFPieChartData(chart.getCTChart().getPlotArea().addNewPieChart());\nXDDFChartData data = chart.createData(ChartTypes.PIE, null, null);\n...\n</code></pre>\n<hr />\n<p>Since version <code>apache poi 5.0.0</code> the full jar of all of the schemas is <code>poi-ooxml-full.jar</code> as mentioned in <a href=\"https://poi.apache.org/help/faq.html#faq-N10025\" rel=\"nofollow noreferrer\">FAQ-N10025</a>.</p>\n<hr />\n<p>How to use the the low level <code>org.openxmlformats.schemas.drawingml.x2006.chart.*</code> classes?</p>\n<p>Unfortunately there is no API documentation online available. But we need this. So we need downloading the sources of used <code>ooxml-schemas-*.jar</code> (up to Apache PPOI 4) or <code>poi-ooxml-full jar</code> (since Apache POI 5). Then we can create a API documentation using <code>javadoc</code>.</p>\n<p>All Office Open XML files, so also <code>*.xlsx</code>, are simply ZIP archives. So one can unzip a <code>*.xlsx</code> file using a ZIP application (7-Zip can do that for example). Then we can have a look into the internals.</p>\n<p>To find out what to do for charts in <code>*.xlsx</code> when high level classes of Apache POI lack support for something, do the folowing:</p>\n<p>Create a <code>*.xlsx</code> having a chart using what Apache POI provides. Then unzip that <code>*.xlsx</code> and show the content of <code>xl/chart/chart*.xml</code>. Then open that <code>*.xlsx</code>  in Excel GUI and do what you want to do additionally. Then save. Then unzip that <code>*.xlsx</code> and show the content of <code>xl/chart/chart*.xml</code>. Now compare what has changed in XML. Now the need is to recreate those changes using code.</p>\n<p>At first try to understand what <code>org.openxmlformats.schemas.drawingml.x2006.chart.*</code> classes needed. In XML the elements most are <em>C</em>omplex<em>T</em>ypes. So if you find an element <code>chart</code> in XML the correspondig class is <code>CTChart</code>. An XML elemernt <code>plotArea</code> is <code>CTPlotArea</code>. XML <code>pieChart</code> is <code>CTPieChart</code> and so on.</p>\n<p>Knowing this and having created the API documentation using javadoc, one should be able to figure out which methods of which classes to use to create what is required.</p>\n"},{"tags":[],"owner":{"account_id":384882,"reputation":382,"user_id":741689,"display_name":"Gardella Juan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578599982,"creation_date":1578599982,"answer_id":59671290,"question_id":54885970,"body_markdown":"Also, as this answer is what shows google, I would like to add that the options mentioned at `org.openxmlformats.schemas.drawingml.x2006.chart.STDLblPos.OUT_END` maps to the options available at &quot;Format Data Labels&quot; in excel (or see https://www.youtube.com/watch?v=y85DOG5FOVc). To open that, right click on the chart to show that menu option. That is useful if you want to hide some data. By default show almost everything. For example, to show only the value data:\r\n\r\n              dLbls.addNewDLblPos().setVal(org.openxmlformats.schemas.drawingml.x2006.chart.STDLblPos.BEST_FIT);\r\n              dLbls.addNewShowLegendKey().setVal(false);\r\n              dLbls.addNewShowPercent().setVal(false);\r\n              dLbls.addNewShowCatName().setVal(false);\r\n              dLbls.addNewShowSerName().setVal(false);\r\n              dLbls.addNewShowVal().setVal(true);\r\n              dLbls.addNewShowLeaderLines().setVal(false); \r\n\r\n","title":"how to generate piechart using apache poi 4.0 XDDFChartData, XDDFPieChartData; in excel sheet using java, i dont want to use jfree","body":"<p>Also, as this answer is what shows google, I would like to add that the options mentioned at <code>org.openxmlformats.schemas.drawingml.x2006.chart.STDLblPos.OUT_END</code> maps to the options available at \"Format Data Labels\" in excel (or see <a href=\"https://www.youtube.com/watch?v=y85DOG5FOVc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=y85DOG5FOVc</a>). To open that, right click on the chart to show that menu option. That is useful if you want to hide some data. By default show almost everything. For example, to show only the value data:</p>\n\n<pre><code>          dLbls.addNewDLblPos().setVal(org.openxmlformats.schemas.drawingml.x2006.chart.STDLblPos.BEST_FIT);\n          dLbls.addNewShowLegendKey().setVal(false);\n          dLbls.addNewShowPercent().setVal(false);\n          dLbls.addNewShowCatName().setVal(false);\n          dLbls.addNewShowSerName().setVal(false);\n          dLbls.addNewShowVal().setVal(true);\n          dLbls.addNewShowLeaderLines().setVal(false); \n</code></pre>\n"}],"owner":{"account_id":15413038,"reputation":85,"user_id":11119280,"display_name":"Rajesh Bhardwaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6365,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":54891166,"answer_count":2,"score":4,"last_activity_date":1694150144,"creation_date":1551185436,"question_id":54885970,"body_markdown":"I need a sample code in Java, currently I am able to draw line charts after reading values from sheet, and I also want to generate pie chart.\r\n\r\nExample code I have tried which is for ``.ppt`` format.\r\n\r\nI want the same in excel for pie chart in java.\r\n\r\n    String[] categories = listCategories.toArray(new String[listCategories.size()]);\r\n    Double[] values = listValues.toArray(new Double[listValues.size()]);\r\n\r\n    final int numOfPoints = categories.length;\r\n    final String categoryDataRange = chart.formatRange(new CellRangeAddress(1, numOfPoints, 0, 0));\r\n    final String valuesDataRange = chart.formatRange(new CellRangeAddress(1, numOfPoints, 1, 1));\r\n    final XDDFDataSource&lt;?&gt; categoriesData = XDDFDataSourcesFactory.fromArray(categories, categoryDataRange);\r\n    final XDDFNumericalDataSource&lt;? extends Number&gt; valuesData = XDDFDataSourcesFactory.fromArray(values, valuesDataRange);\r\n\r\n    XDDFPieChartData.Series firstSeries = (XDDFPieChartData.Series) pie.getSeries().get(0);\r\n    firstSeries.replaceData(categoriesData, valuesData);\r\n    firstSeries.setTitle(chartTitle, chart.setSheetTitle(chartTitle, 0));\r\n    firstSeries.setExplosion(25);\r\n    chart.plot(pie);","title":"how to generate piechart using apache poi 4.0 XDDFChartData, XDDFPieChartData; in excel sheet using java, i dont want to use jfree","body":"<p>I need a sample code in Java, currently I am able to draw line charts after reading values from sheet, and I also want to generate pie chart.</p>\n\n<p>Example code I have tried which is for <code>.ppt</code> format.</p>\n\n<p>I want the same in excel for pie chart in java.</p>\n\n<pre><code>String[] categories = listCategories.toArray(new String[listCategories.size()]);\nDouble[] values = listValues.toArray(new Double[listValues.size()]);\n\nfinal int numOfPoints = categories.length;\nfinal String categoryDataRange = chart.formatRange(new CellRangeAddress(1, numOfPoints, 0, 0));\nfinal String valuesDataRange = chart.formatRange(new CellRangeAddress(1, numOfPoints, 1, 1));\nfinal XDDFDataSource&lt;?&gt; categoriesData = XDDFDataSourcesFactory.fromArray(categories, categoryDataRange);\nfinal XDDFNumericalDataSource&lt;? extends Number&gt; valuesData = XDDFDataSourcesFactory.fromArray(values, valuesDataRange);\n\nXDDFPieChartData.Series firstSeries = (XDDFPieChartData.Series) pie.getSeries().get(0);\nfirstSeries.replaceData(categoriesData, valuesData);\nfirstSeries.setTitle(chartTitle, chart.setSheetTitle(chartTitle, 0));\nfirstSeries.setExplosion(25);\nchart.plot(pie);\n</code></pre>\n"},{"tags":["java","null","tostring"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":6,"creation_date":1579038282,"post_id":59742211,"comment_id":105632774,"body_markdown":"You could just... use the string itself without any util? What are you trying to achieve?","body":"You could just... use the string itself without any util? What are you trying to achieve?"},{"owner":{"account_id":107315,"reputation":10683,"user_id":285417,"accept_rate":88,"display_name":"Wonko the Sane"},"score":0,"creation_date":1579038329,"post_id":59742211,"comment_id":105632793,"body_markdown":"Any problem with `myString == null`?","body":"Any problem with <code>myString == null</code>?"},{"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"score":0,"creation_date":1579038393,"post_id":59742211,"comment_id":105632822,"body_markdown":"Sure, but doing a ternary is a lot of code bloat. I thought there would be something in commons akin to `object == null? null : object.toString()` guess I was wrong?","body":"Sure, but doing a ternary is a lot of code bloat. I thought there would be something in commons akin to <code>object == null? null : object.toString()</code> guess I was wrong?"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1579038397,"post_id":59742211,"comment_id":105632823,"body_markdown":"@Compass That ternary is a slower way to write `return string;`","body":"@Compass That ternary is a slower way to write <code>return string;</code>"},{"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"score":1,"creation_date":1579038474,"post_id":59742211,"comment_id":105632851,"body_markdown":"guess I wasn&#39;t clear, it&#39;s not necessarily a string, it&#39;s any object...","body":"guess I wasn&#39;t clear, it&#39;s not necessarily a string, it&#39;s any object..."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":2,"creation_date":1579038545,"post_id":59742211,"comment_id":105632877,"body_markdown":"You should change the title, which says &quot;... if a **String** is null...&quot;","body":"You should change the title, which says &quot;... if a <b>String</b> is null...&quot;"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1579038551,"post_id":59742211,"comment_id":105632879,"body_markdown":"Objects.toString(s, null)","body":"Objects.toString(s, null)"},{"owner":{"account_id":2182639,"reputation":812,"user_id":1931774,"display_name":"SkateScout"},"score":0,"creation_date":1579038563,"post_id":59742211,"comment_id":105632889,"body_markdown":"The question is neither clear nor is there any use for others. As the comments show it is more than trivial.","body":"The question is neither clear nor is there any use for others. As the comments show it is more than trivial."},{"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"score":0,"creation_date":1579038795,"post_id":59742211,"comment_id":105632994,"body_markdown":"I agree, but I was surprised something so common wasn&#39;t placed in, well, Commons...","body":"I agree, but I was surprised something so common wasn&#39;t placed in, well, Commons..."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1579038894,"post_id":59742211,"comment_id":105633021,"body_markdown":"Well, it is. `Objects` is an utility class for pretty much the most common stuff regarding arbitrary objects. And, as shown, it has the utility you want. If that is not enough, you can always create your own helper method.","body":"Well, it is. <code>Objects</code> is an utility class for pretty much the most common stuff regarding arbitrary objects. And, as shown, it has the utility you want. If that is not enough, you can always create your own helper method."}],"answers":[{"comments":[{"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"score":0,"creation_date":1579038630,"post_id":59742259,"comment_id":105632918,"body_markdown":"`StringUtils.defaultString(s)` won&#39;t work, because it converts the value to an empty string, what I need is it to be null.","body":"<code>StringUtils.defaultString(s)</code> won&#39;t work, because it converts the value to an empty string, what I need is it to be null."},{"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"score":1,"creation_date":1579038717,"post_id":59742259,"comment_id":105632960,"body_markdown":"I think then `Objects.toString(o, null)` is the only option. Would have liked to avoid the extra param though.","body":"I think then <code>Objects.toString(o, null)</code> is the only option. Would have liked to avoid the extra param though."},{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":1,"creation_date":1579038725,"post_id":59742259,"comment_id":105632961,"body_markdown":"You&#39;re right, but Objects.toString will more than likely work.","body":"You&#39;re right, but Objects.toString will more than likely work."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1621265595,"post_id":59742259,"comment_id":119437344,"body_markdown":"An upside of the extra param is that it makes it clear to readers that you&#39;re intentionally handling null, and purposefully returning `null` as the result when the value is null.  A lot of times null handling behavior is accidental and a source of bugs, so by using this approach, it&#39;s clear that you as the code writer (probably) thought through the null implications and chose that behavior.","body":"An upside of the extra param is that it makes it clear to readers that you&#39;re intentionally handling null, and purposefully returning <code>null</code> as the result when the value is null.  A lot of times null handling behavior is accidental and a source of bugs, so by using this approach, it&#39;s clear that you as the code writer (probably) thought through the null implications and chose that behavior."}],"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"comment_count":4,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1579038709,"creation_date":1579038522,"answer_id":59742259,"question_id":59742211,"body_markdown":"If I understand your problem, you can use that ([`java.util.Objects`][1] is here since JDK7):\r\n\r\n    Objects.toString(s, null); // return null if s is null, s.toString() otherwise\r\n\r\nIn fact, it works for every object.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html","title":"toString but only if not null","body":"<p>If I understand your problem, you can use that (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html\" rel=\"noreferrer\"><code>java.util.Objects</code></a> is here since JDK7):</p>\n\n<pre><code>Objects.toString(s, null); // return null if s is null, s.toString() otherwise\n</code></pre>\n\n<p>In fact, it works for every object.</p>\n"}],"owner":{"account_id":1658694,"reputation":1592,"user_id":1527469,"display_name":"awgtek"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9915,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"accepted_answer_id":59742259,"answer_count":1,"score":8,"last_activity_date":1694149655,"creation_date":1579038215,"question_id":59742211,"body_markdown":"Is there any utility available to easily get the string representation of an arbitrary object if it exists and keep it `null` if it was `null`?\r\n\r\nFor example\r\n\r\n    String result = null;\r\n    if (object != null) {\r\n        result = object.toString();\r\n    }\r\n\r\nbut less verbose.\r\n\r\nI have looked into `ObjectUtils` and `String.valueOf` but neither returns just `null` itself. Both return default strings, i.e. the empty string or the string `&quot;null&quot;` instead of just `null`.","title":"toString but only if not null","body":"<p>Is there any utility available to easily get the string representation of an arbitrary object if it exists and keep it <code>null</code> if it was <code>null</code>?</p>\n\n<p>For example</p>\n\n<pre><code>String result = null;\nif (object != null) {\n    result = object.toString();\n}\n</code></pre>\n\n<p>but less verbose.</p>\n\n<p>I have looked into <code>ObjectUtils</code> and <code>String.valueOf</code> but neither returns just <code>null</code> itself. Both return default strings, i.e. the empty string or the string <code>\"null\"</code> instead of just <code>null</code>.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1472500561,"post_id":39213900,"comment_id":65767067,"body_markdown":"Generally you can only add &quot;unattached&quot; items, or have brand new ones created, not sure that an attempt to add a paragraph from a completely different document is going to go very well as there&#39;d be all sorts of references that would break...","body":"Generally you can only add &quot;unattached&quot; items, or have brand new ones created, not sure that an attempt to add a paragraph from a completely different document is going to go very well as there&#39;d be all sorts of references that would break..."}],"answers":[{"tags":[],"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472515803,"creation_date":1472515803,"answer_id":39216999,"question_id":39213900,"body_markdown":"Found a solution,\r\n\r\n1. I can insert it not after but before current paragraph;\r\n2. Need to copy all runs explicitly\r\n\r\n\r\n\r\n    \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/CPb5G.png","title":"How to insert existing XWPFParagraph into specific location in between other XWPFParagraphs of org.apache.poi.xwpf.usermodel.XWPFDocument?","body":"<p>Found a solution,</p>\n\n<ol>\n<li>I can insert it not after but before current paragraph;</li>\n<li>Need to copy all runs explicitly</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/CPb5G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CPb5G.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1522,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694146328,"creation_date":1472499523,"question_id":39213900,"body_markdown":"Initially I have one DOCX template document. So I get \r\norg.apache.poi.xwpf.usermodel.XWPFDocument out of it and let&#39;s say it has 5 XWPFParagraphs like:\r\n\r\n    &lt;w:document&gt;\r\n      &lt;w:body&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n      &lt;/w:body&gt;\r\n    &lt;/w:document&gt;\r\n\r\nThen I grab one XWPFParagraph from another DOCX file and I need to insert it in between 2nd and 3rd XWPFParagraphs of initial document. Like this:\r\n\r\n    &lt;w:document&gt;\r\n      &lt;w:body&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; inserted Paragraph  &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n        &lt;w:p&gt; ... &lt;/w:p&gt;\r\n      &lt;/w:body&gt;\r\n    &lt;/w:document&gt;\r\n\r\nHow can I do it? \r\n\r\nI can say what I tried:\r\n- I tried to use [insertNewParagraph()][1] method, but it seams like it is creating new Paragraph, but I need to insert existing Paragraph that I grab from the other document.\r\n\r\n\tprivate void insertParagraphAfter(XWPFParagraph p1, XWPFParagraph p2) {\r\n\t\tXWPFDocument doc = p1.getDocument();\r\n\t\tXmlCursor cursor = p1.getCTP().newCursor();\r\n\t\tXWPFParagraph newP = doc.insertNewParagraph(cursor);\r\n\t\tnewP = p2;\r\n\t}\r\n\r\nBut it does not seams to be working.\r\n\r\n\r\n  [1]: https://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFDocument.html#insertNewParagraph(org.apache.xmlbeans.XmlCursor)","title":"How to insert existing XWPFParagraph into specific location in between other XWPFParagraphs of org.apache.poi.xwpf.usermodel.XWPFDocument?","body":"<p>Initially I have one DOCX template document. So I get \norg.apache.poi.xwpf.usermodel.XWPFDocument out of it and let's say it has 5 XWPFParagraphs like:</p>\n\n<pre><code>&lt;w:document&gt;\n  &lt;w:body&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n  &lt;/w:body&gt;\n&lt;/w:document&gt;\n</code></pre>\n\n<p>Then I grab one XWPFParagraph from another DOCX file and I need to insert it in between 2nd and 3rd XWPFParagraphs of initial document. Like this:</p>\n\n<pre><code>&lt;w:document&gt;\n  &lt;w:body&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; inserted Paragraph  &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n    &lt;w:p&gt; ... &lt;/w:p&gt;\n  &lt;/w:body&gt;\n&lt;/w:document&gt;\n</code></pre>\n\n<p>How can I do it? </p>\n\n<p>I can say what I tried:\n- I tried to use <a href=\"https://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFDocument.html#insertNewParagraph(org.apache.xmlbeans.XmlCursor)\" rel=\"nofollow\">insertNewParagraph()</a> method, but it seams like it is creating new Paragraph, but I need to insert existing Paragraph that I grab from the other document.</p>\n\n<pre><code>private void insertParagraphAfter(XWPFParagraph p1, XWPFParagraph p2) {\n    XWPFDocument doc = p1.getDocument();\n    XmlCursor cursor = p1.getCTP().newCursor();\n    XWPFParagraph newP = doc.insertNewParagraph(cursor);\n    newP = p2;\n}\n</code></pre>\n\n<p>But it does not seams to be working.</p>\n"},{"tags":["java","java-stream","fork-join"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":4,"creation_date":1694109144,"post_id":77061733,"comment_id":135851482,"body_markdown":"As far as I am aware, there is no `toMap` method in class `Collectors` that has no parameters. Perhaps you are looking for this [toMap](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-) method? `Collectors.toMap(emp -&gt; emp, emp -&gt; empDepartmentResolver.resolve(emp))`","body":"As far as I am aware, there is no <code>toMap</code> method in class <code>Collectors</code> that has no parameters. Perhaps you are looking for this <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"nofollow noreferrer\">toMap</a> method? <code>Collectors.toMap(emp -&gt; emp, emp -&gt; empDepartmentResolver.resolve(emp))</code>"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1694110129,"post_id":77061733,"comment_id":135851674,"body_markdown":"What do you mean, &quot;got stuck in applying the parallelism&quot;?  That looks like it should do it as well as anything can, assuming you resolve @Abra&#39;s comment.","body":"What do you mean, &quot;got stuck in applying the parallelism&quot;?  That looks like it should do it as well as anything can, assuming you resolve @Abra&#39;s comment."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1694161402,"post_id":77061733,"comment_id":135857737,"body_markdown":"Takeaway for the future: the [`map` method of the `Stream` interface](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#map(java.util.function.Function)) has nothing to do with the [`Map` interface](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html).","body":"Takeaway for the future: the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#map(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>map</code> method of the <code>Stream</code> interface</a> has nothing to do with the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>Map</code> interface</a>."}],"answers":[{"comments":[{"owner":{"account_id":3367953,"reputation":1474,"user_id":2828006,"accept_rate":24,"display_name":"Scientist"},"score":0,"creation_date":1694164449,"post_id":77064044,"comment_id":135858325,"body_markdown":"in this code Collectors.toMap(Function.identity(), empDepartmentResolver::resolve)  is not specifying that the key of hashMap will be Employee ?  i need to return map of &lt;Employee, EmployeeDeptMap&gt;","body":"in this code Collectors.toMap(Function.identity(), empDepartmentResolver::resolve)  is not specifying that the key of hashMap will be Employee ?  i need to return map of &lt;Employee, EmployeeDeptMap&gt;"},{"owner":{"account_id":9790557,"reputation":85,"user_id":10217464,"display_name":"Plus"},"score":1,"creation_date":1694186954,"post_id":77064044,"comment_id":135862805,"body_markdown":"`Function.identity()` works same as `e -&gt; e`, so the key of the map we created would be the &quot;T&quot; of `Stream&lt;T&gt;` where T = Employee","body":"<code>Function.identity()</code> works same as <code>e -&gt; e</code>, so the key of the map we created would be the &quot;T&quot; of <code>Stream&lt;T&gt;</code> where T = Employee"}],"tags":[],"owner":{"account_id":9790557,"reputation":85,"user_id":10217464,"display_name":"Plus"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694145273,"creation_date":1694145273,"answer_id":77064044,"question_id":77061733,"body_markdown":"As @Abra mentioned, you need to pass parameters to define how the Map should be created. You could try this code below:\r\n\r\n```\r\nMap&lt;Employee, EmployeeDeptMap&gt; map = empList\r\n        .parallelStream()\r\n        .collect(Collectors.toMap(Function.identity(), empDepartmentResolver::resolve));\r\n```","title":"java usage of parallelStream resulting into map","body":"<p>As @Abra mentioned, you need to pass parameters to define how the Map should be created. You could try this code below:</p>\n<pre><code>Map&lt;Employee, EmployeeDeptMap&gt; map = empList\n        .parallelStream()\n        .collect(Collectors.toMap(Function.identity(), empDepartmentResolver::resolve));\n</code></pre>\n"}],"owner":{"account_id":3367953,"reputation":1474,"user_id":2828006,"accept_rate":24,"display_name":"Scientist"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694146310,"creation_date":1694108069,"question_id":77061733,"body_markdown":"I have a single threaded code as follows :\r\n\r\n    private Map&lt;Employee, EmployeeDeptMap&gt; empToEmpDept(List&lt;Employee&gt; empList) {\r\n        Map&lt;Employee, EmployeeDeptMap&gt; map = new HashMap&lt;&gt;();\r\n        for (Employee emp : empList) {\r\n            map.put(emp, empDepartmentResolver.resolve(emp));\r\n        }\r\n        return map;\r\n    }\r\n\r\nHere the code is sequentially traversing over the employee list and mapping department for each employee on basis of some rules which are abstract defined.\r\n\r\nThe requirement here is I want to run it in parallel so that multiple department resolution can happen in parallel and save time. \r\n\r\nThe list is quite big in size. \r\n\r\nI tried with following piece of code but got stuck in applying the parallelism there \r\n\r\n    empList.parallelStream()\r\n           .map(emp-&gt; empDepartmentResolver.resolve(emp))\r\n           .collect(Collectors.toMap())\r\n\r\nAny suggestions what will be best way here to resolve them in parallel.\r\n","title":"java usage of parallelStream resulting into map","body":"<p>I have a single threaded code as follows :</p>\n<pre><code>private Map&lt;Employee, EmployeeDeptMap&gt; empToEmpDept(List&lt;Employee&gt; empList) {\n    Map&lt;Employee, EmployeeDeptMap&gt; map = new HashMap&lt;&gt;();\n    for (Employee emp : empList) {\n        map.put(emp, empDepartmentResolver.resolve(emp));\n    }\n    return map;\n}\n</code></pre>\n<p>Here the code is sequentially traversing over the employee list and mapping department for each employee on basis of some rules which are abstract defined.</p>\n<p>The requirement here is I want to run it in parallel so that multiple department resolution can happen in parallel and save time.</p>\n<p>The list is quite big in size.</p>\n<p>I tried with following piece of code but got stuck in applying the parallelism there</p>\n<pre><code>empList.parallelStream()\n       .map(emp-&gt; empDepartmentResolver.resolve(emp))\n       .collect(Collectors.toMap())\n</code></pre>\n<p>Any suggestions what will be best way here to resolve them in parallel.</p>\n"},{"tags":["java","spring","fortify"],"comments":[{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1539348172,"post_id":52775798,"comment_id":92481098,"body_markdown":"Have your peers review your code and if they agree then flag the warning as a false positive. Static scanners can be useful but too often they just spew so many false positives that real issues get missed.","body":"Have your peers review your code and if they agree then flag the warning as a false positive. Static scanners can be useful but too often they just spew so many false positives that real issues get missed."}],"answers":[{"tags":[],"owner":{"account_id":5094001,"reputation":592,"user_id":4086042,"display_name":"SPoint"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539855805,"creation_date":1539855805,"answer_id":52871282,"question_id":52775798,"body_markdown":"this is FalsePositive from your SAST Scanner","title":"How to fix &quot;Server-Side Request Forgery&quot; issue in spring restTemplate","body":"<p>this is FalsePositive from your SAST Scanner</p>\n"},{"tags":[],"owner":{"account_id":4727308,"reputation":6439,"user_id":3823831,"display_name":"TheGreatContini"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1539896104,"creation_date":1539896104,"answer_id":52882433,"question_id":52775798,"body_markdown":"[SSRF](https://www.hackerone.com/blog-How-To-Server-Side-Request-Forgery-SSRF) is exploited by an attacker controlling an outgoing request that the server is making.  If `uri` is indeed hard-coded, then the attacker has no ability to influence where the request is going, so it would indeed look to be a false positive.  However, although Fortify is known for false positives, I have not seen it make that type of mistake (i.e. claimed SSRF despite a hard-coded URI), so I am a bit surprised to hear it.  Have you checked the whole source-to-sink trace that Fortify provides?  If it is reporting only that one line as the source and sink, then yes it is a false positive.  If there is more, then it would be helpful if you provided the full trace. ","title":"How to fix &quot;Server-Side Request Forgery&quot; issue in spring restTemplate","body":"<p><a href=\"https://www.hackerone.com/blog-How-To-Server-Side-Request-Forgery-SSRF\" rel=\"nofollow noreferrer\">SSRF</a> is exploited by an attacker controlling an outgoing request that the server is making.  If <code>uri</code> is indeed hard-coded, then the attacker has no ability to influence where the request is going, so it would indeed look to be a false positive.  However, although Fortify is known for false positives, I have not seen it make that type of mistake (i.e. claimed SSRF despite a hard-coded URI), so I am a bit surprised to hear it.  Have you checked the whole source-to-sink trace that Fortify provides?  If it is reporting only that one line as the source and sink, then yes it is a false positive.  If there is more, then it would be helpful if you provided the full trace. </p>\n"},{"comments":[{"owner":{"account_id":4685492,"reputation":164,"user_id":3793001,"display_name":"swyrik"},"score":0,"creation_date":1641362742,"post_id":69285279,"comment_id":124782570,"body_markdown":"UriComponentsBuilder verifies the scheme, host, query params, and a few other things with some regex while constructing the URI. Which resolves the fortify server-side forgery request issue.","body":"UriComponentsBuilder verifies the scheme, host, query params, and a few other things with some regex while constructing the URI. Which resolves the fortify server-side forgery request issue."}],"tags":[],"owner":{"account_id":12358760,"reputation":687,"user_id":9013717,"display_name":"Sankar"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632317508,"creation_date":1632317508,"answer_id":69285279,"question_id":52775798,"body_markdown":"As TheGreatContini said, uri should not be hard-coded. And also we can use UriComponents to build the URI before do the call.\r\n\r\n    UriComponents uriComponents = UriComponentsBuilder.newInstance()\r\n      .scheme(&quot;http&quot;).host(&quot;www.yourdomain.com&quot;).path(&quot;/yourPath&quot;).build();\r\n\r\nThis will the build the URL for you and fix the Server-Side Request Forgery.","title":"How to fix &quot;Server-Side Request Forgery&quot; issue in spring restTemplate","body":"<p>As TheGreatContini said, uri should not be hard-coded. And also we can use UriComponents to build the URI before do the call.</p>\n<pre><code>UriComponents uriComponents = UriComponentsBuilder.newInstance()\n  .scheme(&quot;http&quot;).host(&quot;www.yourdomain.com&quot;).path(&quot;/yourPath&quot;).build();\n</code></pre>\n<p>This will the build the URL for you and fix the Server-Side Request Forgery.</p>\n"},{"tags":[],"owner":{"account_id":16036243,"reputation":154,"user_id":11573887,"display_name":"Henry Xiloj Herrera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694145953,"creation_date":1694145953,"answer_id":77064076,"question_id":52775798,"body_markdown":"In my case, I get this Server-side request forgery alert in GitHub Code scanning.\r\n\r\nPrevious code I used restTemplate like this:\r\n\r\n    String uri = &quot;https://my_url/{parm1}/product/{parm2}&quot;;\r\n    String finalUri = UriComponentsBuilder.fromHttpUrl(uri)\r\n    \t\t\t\t.queryParam(&quot;name&quot;, &quot;example&quot;)\r\n    \t\t\t\t.buildAndExpand(&quot;paramValue1&quot;, &quot;paramValue2&quot;)\r\n                    .toUriString();\r\n    restTemplate.exchange(finalUri, HttpMethod.GET, entity,\tString.class);\r\n\r\nHowever always get Server-side request forgery from GitHub Code scanning.\r\n\r\nThen I resolved like this:\r\n\r\n    String uri = &quot;https://my_url/{parm1}/product/{parm2}?name={name}&quot;;\r\n    restTemplate.exchange(uri, HttpMethod.GET, entity,\tString.class, &quot;paramValue1&quot;, &quot;paramValue2&quot;, &quot;example&quot;);\r\n\t\r\nThen actual request URL will be:\r\n\r\n    https://my_url/paramValue1/product/paramValue2?name=example\r\n\r\n","title":"How to fix &quot;Server-Side Request Forgery&quot; issue in spring restTemplate","body":"<p>In my case, I get this Server-side request forgery alert in GitHub Code scanning.</p>\n<p>Previous code I used restTemplate like this:</p>\n<pre><code>String uri = &quot;https://my_url/{parm1}/product/{parm2}&quot;;\nString finalUri = UriComponentsBuilder.fromHttpUrl(uri)\n                .queryParam(&quot;name&quot;, &quot;example&quot;)\n                .buildAndExpand(&quot;paramValue1&quot;, &quot;paramValue2&quot;)\n                .toUriString();\nrestTemplate.exchange(finalUri, HttpMethod.GET, entity, String.class);\n</code></pre>\n<p>However always get Server-side request forgery from GitHub Code scanning.</p>\n<p>Then I resolved like this:</p>\n<pre><code>String uri = &quot;https://my_url/{parm1}/product/{parm2}?name={name}&quot;;\nrestTemplate.exchange(uri, HttpMethod.GET, entity,  String.class, &quot;paramValue1&quot;, &quot;paramValue2&quot;, &quot;example&quot;);\n</code></pre>\n<p>Then actual request URL will be:</p>\n<pre><code>https://my_url/paramValue1/product/paramValue2?name=example\n</code></pre>\n"}],"owner":{"account_id":1360484,"reputation":1310,"user_id":1607510,"accept_rate":60,"display_name":"Sandeep Bhardwaj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20606,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52882433,"answer_count":4,"score":2,"last_activity_date":1694145953,"creation_date":1539334410,"question_id":52775798,"body_markdown":"Getting &quot;Server-Side Request Forgery&quot; issue in Fortify report while using spring restTemplate.\r\n\r\nI am making a call using restTemplate to some other REST service and passing this url from my controller class.\r\nThe url is hardcoded in my controller and not user-controlled data.\r\n\r\n    HttpEntity&lt;R&gt; response = restTemplate.exchange(uri, HttpMethod.POST, entity,\r\n    parameterizedTypeReference);\r\n\r\nNot sure how to fix this issue.","title":"How to fix &quot;Server-Side Request Forgery&quot; issue in spring restTemplate","body":"<p>Getting \"Server-Side Request Forgery\" issue in Fortify report while using spring restTemplate.</p>\n\n<p>I am making a call using restTemplate to some other REST service and passing this url from my controller class.\nThe url is hardcoded in my controller and not user-controlled data.</p>\n\n<pre><code>HttpEntity&lt;R&gt; response = restTemplate.exchange(uri, HttpMethod.POST, entity,\nparameterizedTypeReference);\n</code></pre>\n\n<p>Not sure how to fix this issue.</p>\n"},{"tags":["java","opengl","lwjgl"],"comments":[{"owner":{"account_id":15352842,"reputation":294,"user_id":11076030,"display_name":"Matt"},"score":0,"creation_date":1695689089,"post_id":77062706,"comment_id":136054968,"body_markdown":"Your drawQuads method doesnt work likely because glBegin and glEnd are depreciated. You need to use buffers now to store vertex information. GL_QUADS primitive is also depreciated, youll need to use GL_TRIANGLE or GL_TRIANGLE_STRIPS to draw quads","body":"Your drawQuads method doesnt work likely because glBegin and glEnd are depreciated. You need to use buffers now to store vertex information. GL_QUADS primitive is also depreciated, youll need to use GL_TRIANGLE or GL_TRIANGLE_STRIPS to draw quads"}],"owner":{"account_id":29390454,"reputation":15,"user_id":22518954,"display_name":"JewishBanana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694145676,"creation_date":1694118966,"question_id":77062706,"body_markdown":"I am trying to switch from using JFrame from a 2D game to using lwjgl for performance reasons. I added lwjgl and I am brand new to using it and the rendering just seems completely broken. I initialize everything properly but when I try to draw a simple rectangle on the screen I use a drawQuads method I found on google and it seems just broken like none of the values do what they are supposed to, I can&#39;t put the x and y coordinates in since the screen seems to render very small values like -0.8 to 0.8 and since I used JFrame I just used the pixel coordinates like 200,400. How do I fix this, what am I doing wrong? This is the main class that renders and ticks everything and right now it just renders a broken rectangle in the render method.\r\n\r\n```\r\nprivate void lwjglInit() {\r\n\t\tGLFWErrorCallback.createPrint(System.err).set();\r\n\t\tif (!glfwInit())\r\n\t\t\tthrow new IllegalStateException(&quot;Unable to initialize GLFW&quot;);\r\n\t\t// Configure GLFW\r\n\t\tglfwDefaultWindowHints(); // optional, the current window hints are already the default\r\n\t\tglfwWindowHint(GLFW_VISIBLE, GLFW_FALSE); // the window will stay hidden after creation\r\n\t\tglfwWindowHint(GLFW_RESIZABLE, GLFW_TRUE); // the window will be resizable\r\n\r\n\t\twindow = glfwCreateWindow(WIDTH, HEIGHT, title, NULL, NULL);\r\n\t\tif ( window == NULL )\r\n\t\t\tthrow new RuntimeException(&quot;Failed to create the GLFW window&quot;);\r\n\r\n\t\t// Setup a key callback. It will be called every time a key is pressed, repeated or released.\r\n\t\tglfwSetKeyCallback(window, (window, key, scancode, action, mods) -&gt; {\r\n\t\t\tif ( key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_RELEASE )\r\n\t\t\t\tglfwSetWindowShouldClose(window, true); // We will detect this in the rendering loop\r\n\t\t});\r\n\r\n\t\ttry ( MemoryStack stack = stackPush() ) {\r\n\t\t\tIntBuffer pWidth = stack.mallocInt(1);\r\n\t\t\tIntBuffer pHeight = stack.mallocInt(1);\r\n\r\n\t\t\t// Get the window size passed to glfwCreateWindow\r\n\t\t\tglfwGetWindowSize(window, pWidth, pHeight);\r\n\r\n\t\t\t// Get the resolution of the primary monitor\r\n\t\t\tGLFWVidMode vidmode = glfwGetVideoMode(glfwGetPrimaryMonitor());\r\n\r\n\t\t\t// Center the window\r\n\t\t\tglfwSetWindowPos(\r\n\t\t\t\twindow,\r\n\t\t\t\t(vidmode.width() - pWidth.get(0)) / 2,\r\n\t\t\t\t(vidmode.height() - pHeight.get(0)) / 2\r\n\t\t\t);\r\n\t\t}\r\n\t\tglfwMakeContextCurrent(window);\r\n\t\t// Enable v-sync\r\n\t\tglfwSwapInterval(1);\r\n\t\t// Make the window visible\r\n\t\tglfwShowWindow(window);\r\n\t\t\r\n\t\tGL.createCapabilities();\r\n\t\t\r\n\t\t// Set the clear color\r\n\t\tglClearColor(0.0f, 0.0f, 0.0f, 0.0f);\r\n\t}\r\n\tprivate void init() {\r\n\t\thandler = new Handler();\r\n\t\tinput = new KeyInput();\r\n\t\tnew Camera(0, 0);\r\n\t\tlevel = new Level(this, handler);\r\n\t\thandler.setLevel(level);\r\n\t\tminput = new MouseInput(this);\r\n//\t\tthis.addKeyListener(input);\r\n//\t\tthis.addMouseListener(minput);\r\n//\t\tthis.addMouseMotionListener(minput);\r\n\t\tscreen = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\t}\r\n\tprivate synchronized void start() {\r\n\t\tif (isRunning)\r\n\t\t\treturn;\r\n\t\tthread = new Thread(this);\r\n\t\tthread.start();\r\n\t\tisRunning = true;\r\n\t}\r\n\tprivate synchronized void stop() {\r\n\t\tif (!(isRunning))\r\n\t\t\treturn;\r\n\t\ttry {\r\n\t\t\tthread.join();\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tisRunning = false;\r\n\t\t// Free the window callbacks and destroy the window\r\n\t\tglfwFreeCallbacks(window);\r\n\t\tglfwDestroyWindow(window);\r\n\r\n\t\t// Terminate GLFW and free the error callback\r\n\t\tglfwTerminate();\r\n\t\tglfwSetErrorCallback(null).free();\r\n\t}\r\n\tpublic void run() {\r\n\t\tlwjglInit();\r\n\t\tinit();\r\n\t\t\r\n\t\tlevel.load(&quot;res/levels/default/level1.png&quot;);\r\n\t\t\r\n\t\tlong lastTime = System.nanoTime();\r\n\t\tdouble amountOfTicks = 60.0;\r\n\t\tdouble ns = 1000000000 / amountOfTicks;\r\n\t\tdouble delta = 0;\r\n\t\tlong timer = System.currentTimeMillis();\r\n\t\tint updates = 0;\r\n\t\tint frames = 0;\r\n\t\twhile(isRunning) {\r\n\t\t\tlong now = System.nanoTime();\r\n\t\t\tdelta += (now - lastTime) / ns;\r\n\t\t\tlastTime = now;\r\n\t\t\twhile(delta &gt;= 1) {\r\n\t\t\t\ttick();\r\n\t\t\t\tupdates++;\r\n\t\t\t\tdelta--;\r\n\t\t\t}\r\n\t\t\trender();\r\n\t\t\tframes++;\r\n\t\t\t\t\t\r\n\t\t\tif(System.currentTimeMillis() - timer &gt; 1000) {\r\n\t\t\t\ttimer += 1000;\r\n\t\t\t\tSystem.out.println(&quot;FPS: &quot; + frames + &quot; TICKS: &quot; + updates);\r\n\t\t\t\tframes = 0;\r\n\t\t\t\tupdates = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tstop();\r\n\t}\r\n\tprivate void tick() {\r\n\t\tif (glfwWindowShouldClose(window)) {\r\n\t\t\tisRunning = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tglfwPollEvents();\r\n\t\thandler.tick();\r\n\t\tCamera.tick();\r\n\t}\r\n\tprivate void render() {\r\n\t\tglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\r\n\t\t\r\n\t\tRenderer.drawQuad(-0.7, 0, 0.3, 0.3, 255, 0, 0);\r\n\t\t\r\n\t\tglfwSwapBuffers(window);\r\n        }\r\n```\r\nAnd this is the render method for the drawQuads:\r\n\r\n```\r\n\tpublic static void drawQuad(double x, double y, double width, double height, int red, int green, int blue) {\r\n\t\tGL11.glColor3f(red, green, blue);\r\n\r\n\t\tglBegin(GL_QUADS);\r\n\r\n\t\tglVertex2f((float)-x, (float)y);\r\n\t\tglVertex2f((float)width, (float)y);\r\n\t\tglVertex2f((float)width, (float)-height);\r\n\t\tglVertex2f((float)-x, (float)-height);\r\n\r\n\t\tglEnd();\r\n\t}\r\n```\r\n\r\n\r\n\r\nI try putting different values for x or y and it seems to just stretch the rectangle, if I try to change the width and height it just moves it or stretches it.","title":"Can&#39;t figure out how to render 2D in lwjgl","body":"<p>I am trying to switch from using JFrame from a 2D game to using lwjgl for performance reasons. I added lwjgl and I am brand new to using it and the rendering just seems completely broken. I initialize everything properly but when I try to draw a simple rectangle on the screen I use a drawQuads method I found on google and it seems just broken like none of the values do what they are supposed to, I can't put the x and y coordinates in since the screen seems to render very small values like -0.8 to 0.8 and since I used JFrame I just used the pixel coordinates like 200,400. How do I fix this, what am I doing wrong? This is the main class that renders and ticks everything and right now it just renders a broken rectangle in the render method.</p>\n<pre><code>private void lwjglInit() {\n        GLFWErrorCallback.createPrint(System.err).set();\n        if (!glfwInit())\n            throw new IllegalStateException(&quot;Unable to initialize GLFW&quot;);\n        // Configure GLFW\n        glfwDefaultWindowHints(); // optional, the current window hints are already the default\n        glfwWindowHint(GLFW_VISIBLE, GLFW_FALSE); // the window will stay hidden after creation\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_TRUE); // the window will be resizable\n\n        window = glfwCreateWindow(WIDTH, HEIGHT, title, NULL, NULL);\n        if ( window == NULL )\n            throw new RuntimeException(&quot;Failed to create the GLFW window&quot;);\n\n        // Setup a key callback. It will be called every time a key is pressed, repeated or released.\n        glfwSetKeyCallback(window, (window, key, scancode, action, mods) -&gt; {\n            if ( key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_RELEASE )\n                glfwSetWindowShouldClose(window, true); // We will detect this in the rendering loop\n        });\n\n        try ( MemoryStack stack = stackPush() ) {\n            IntBuffer pWidth = stack.mallocInt(1);\n            IntBuffer pHeight = stack.mallocInt(1);\n\n            // Get the window size passed to glfwCreateWindow\n            glfwGetWindowSize(window, pWidth, pHeight);\n\n            // Get the resolution of the primary monitor\n            GLFWVidMode vidmode = glfwGetVideoMode(glfwGetPrimaryMonitor());\n\n            // Center the window\n            glfwSetWindowPos(\n                window,\n                (vidmode.width() - pWidth.get(0)) / 2,\n                (vidmode.height() - pHeight.get(0)) / 2\n            );\n        }\n        glfwMakeContextCurrent(window);\n        // Enable v-sync\n        glfwSwapInterval(1);\n        // Make the window visible\n        glfwShowWindow(window);\n        \n        GL.createCapabilities();\n        \n        // Set the clear color\n        glClearColor(0.0f, 0.0f, 0.0f, 0.0f);\n    }\n    private void init() {\n        handler = new Handler();\n        input = new KeyInput();\n        new Camera(0, 0);\n        level = new Level(this, handler);\n        handler.setLevel(level);\n        minput = new MouseInput(this);\n//      this.addKeyListener(input);\n//      this.addMouseListener(minput);\n//      this.addMouseMotionListener(minput);\n        screen = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    }\n    private synchronized void start() {\n        if (isRunning)\n            return;\n        thread = new Thread(this);\n        thread.start();\n        isRunning = true;\n    }\n    private synchronized void stop() {\n        if (!(isRunning))\n            return;\n        try {\n            thread.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        isRunning = false;\n        // Free the window callbacks and destroy the window\n        glfwFreeCallbacks(window);\n        glfwDestroyWindow(window);\n\n        // Terminate GLFW and free the error callback\n        glfwTerminate();\n        glfwSetErrorCallback(null).free();\n    }\n    public void run() {\n        lwjglInit();\n        init();\n        \n        level.load(&quot;res/levels/default/level1.png&quot;);\n        \n        long lastTime = System.nanoTime();\n        double amountOfTicks = 60.0;\n        double ns = 1000000000 / amountOfTicks;\n        double delta = 0;\n        long timer = System.currentTimeMillis();\n        int updates = 0;\n        int frames = 0;\n        while(isRunning) {\n            long now = System.nanoTime();\n            delta += (now - lastTime) / ns;\n            lastTime = now;\n            while(delta &gt;= 1) {\n                tick();\n                updates++;\n                delta--;\n            }\n            render();\n            frames++;\n                    \n            if(System.currentTimeMillis() - timer &gt; 1000) {\n                timer += 1000;\n                System.out.println(&quot;FPS: &quot; + frames + &quot; TICKS: &quot; + updates);\n                frames = 0;\n                updates = 0;\n            }\n        }\n        stop();\n    }\n    private void tick() {\n        if (glfwWindowShouldClose(window)) {\n            isRunning = false;\n            return;\n        }\n        glfwPollEvents();\n        handler.tick();\n        Camera.tick();\n    }\n    private void render() {\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        \n        Renderer.drawQuad(-0.7, 0, 0.3, 0.3, 255, 0, 0);\n        \n        glfwSwapBuffers(window);\n        }\n</code></pre>\n<p>And this is the render method for the drawQuads:</p>\n<pre><code>    public static void drawQuad(double x, double y, double width, double height, int red, int green, int blue) {\n        GL11.glColor3f(red, green, blue);\n\n        glBegin(GL_QUADS);\n\n        glVertex2f((float)-x, (float)y);\n        glVertex2f((float)width, (float)y);\n        glVertex2f((float)width, (float)-height);\n        glVertex2f((float)-x, (float)-height);\n\n        glEnd();\n    }\n</code></pre>\n<p>I try putting different values for x or y and it seems to just stretch the rectangle, if I try to change the width and height it just moves it or stretches it.</p>\n"},{"tags":["java","recursion","lambda","java-8"],"answers":[{"comments":[{"owner":{"account_id":21180,"reputation":9893,"user_id":51292,"accept_rate":59,"display_name":"Ray Tayek"},"score":1,"creation_date":1389844513,"post_id":19429767,"comment_id":31839119,"body_markdown":"fact now gets an error saying: &quot;The local variable f may not have been initialized&quot; using http://www.oracle.com/technetwork/articles/java/lambda-1984522.html","body":"fact now gets an error saying: &quot;The local variable f may not have been initialized&quot; using <a href=\"http://www.oracle.com/technetwork/articles/java/lambda-1984522.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/articles/java/lambda-1984522.html</a>"}],"tags":[],"owner":{"account_id":3169515,"reputation":797,"user_id":2678835,"display_name":"user2678835"},"comment_count":1,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1382020711,"creation_date":1382020711,"answer_id":19429767,"question_id":19429667,"body_markdown":"One solution is to define this function as an INSTANCE attribute.\r\n\r\n    import java.util.function.*;\r\n    public class Test{\r\n\r\n        IntToDoubleFunction fact = x -&gt; { return  ( x == 0)?1:x* fact.applyAsDouble(x-1);};\r\n\r\n        public static void main(String[] args) {\r\n          Test test = new Test();\r\n          test.doIt();\r\n        }\r\n\r\n        public void doIt(){\r\n           System.out.println(&quot;fact(3)=&quot; + fact.applyAsDouble(3));\r\n        }\r\n    }\r\n\r\n","title":"Implement recursive lambda function using Java 8","body":"<p>One solution is to define this function as an INSTANCE attribute.</p>\n\n<pre><code>import java.util.function.*;\npublic class Test{\n\n    IntToDoubleFunction fact = x -&gt; { return  ( x == 0)?1:x* fact.applyAsDouble(x-1);};\n\n    public static void main(String[] args) {\n      Test test = new Test();\n      test.doIt();\n    }\n\n    public void doIt(){\n       System.out.println(\"fact(3)=\" + fact.applyAsDouble(3));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3169515,"reputation":797,"user_id":2678835,"display_name":"user2678835"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1382021929,"creation_date":1382021929,"answer_id":19430234,"question_id":19429667,"body_markdown":"Another version using accumulator so that recursion can be optimised.\r\nMoved to Generic interface definition.\r\n\r\n    Function&lt;Integer,Double&gt; facts = x -&gt; { return  ( x == 0)?1:x* facts.apply(x-1);};\r\n    BiFunction&lt;Integer,Double,Double&gt; factAcc= (x,acc) -&gt; { return (x == 0)?acc:factAcc.apply(x- 1,acc*x);};\r\n    Function&lt;Integer,Double&gt; fact = x -&gt; factAcc.apply(x,1.0) ;\r\n\r\n    public static void main(String[] args) {\r\n       Test test = new Test();\r\n       test.doIt();\r\n    }\r\n\r\n     public void doIt(){\r\n\tint val=70;\r\n\tSystem.out.println(&quot;fact(&quot; + val + &quot;)=&quot; + fact.apply(val));\r\n    }\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<p>Another version using accumulator so that recursion can be optimised.\nMoved to Generic interface definition.</p>\n\n<pre><code>Function&lt;Integer,Double&gt; facts = x -&gt; { return  ( x == 0)?1:x* facts.apply(x-1);};\nBiFunction&lt;Integer,Double,Double&gt; factAcc= (x,acc) -&gt; { return (x == 0)?acc:factAcc.apply(x- 1,acc*x);};\nFunction&lt;Integer,Double&gt; fact = x -&gt; factAcc.apply(x,1.0) ;\n\npublic static void main(String[] args) {\n   Test test = new Test();\n   test.doIt();\n}\n\n public void doIt(){\nint val=70;\nSystem.out.println(\"fact(\" + val + \")=\" + fact.apply(val));\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1536969,"reputation":1409,"user_id":1432734,"display_name":"Adam Gawne-Cain"},"score":0,"creation_date":1690347320,"post_id":19445955,"comment_id":135338896,"body_markdown":"I like this way (wrapping lambda in 1 element array) as it doesn&#39;t require an *externally* defined helper class or interface.   I agree it&#39;s not elegant, but it is brief.","body":"I like this way (wrapping lambda in 1 element array) as it doesn&#39;t require an <i>externally</i> defined helper class or interface.   I agree it&#39;s not elegant, but it is brief."}],"tags":[],"owner":{"account_id":31622,"reputation":120351,"user_id":86989,"display_name":"newacct"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1382087906,"creation_date":1382087906,"answer_id":19445955,"question_id":19429667,"body_markdown":"Local and anonymous classes, as well as lambdas, capture local variables *by value* when they are created. Therefore, it is impossible for them to refer to themselves by capturing a local variable, because the value for pointing to themself does not exist yet at the time they are being created.\r\n\r\nCode in local and anonymous classes can still refer to themselves using `this`. However, `this` in a lambda does not refer to the lambda; it refers to the `this` from the outside scope.\r\n\r\nYou could capture a mutable data structure, like an array, instead:\r\n\r\n    IntToDoubleFunction[] foo = { null };\r\n    foo[0] = x -&gt; { return  ( x == 0)?1:x* foo[0].applyAsDouble(x-1);};\r\n\r\nthough hardly an elegant solution.\r\n","title":"Implement recursive lambda function using Java 8","body":"<p>Local and anonymous classes, as well as lambdas, capture local variables <em>by value</em> when they are created. Therefore, it is impossible for them to refer to themselves by capturing a local variable, because the value for pointing to themself does not exist yet at the time they are being created.</p>\n\n<p>Code in local and anonymous classes can still refer to themselves using <code>this</code>. However, <code>this</code> in a lambda does not refer to the lambda; it refers to the <code>this</code> from the outside scope.</p>\n\n<p>You could capture a mutable data structure, like an array, instead:</p>\n\n<pre><code>IntToDoubleFunction[] foo = { null };\nfoo[0] = x -&gt; { return  ( x == 0)?1:x* foo[0].applyAsDouble(x-1);};\n</code></pre>\n\n<p>though hardly an elegant solution.</p>\n"},{"comments":[{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1391883070,"post_id":21646085,"comment_id":32720334,"body_markdown":"Right. The recursion feature on local variables was removed. See this email thread: http://mail.openjdk.java.net/pipermail/lambda-dev/2013-September/010963.html","body":"Right. The recursion feature on local variables was removed. See this email thread: <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-September/010963.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/lambda-dev/2013-September/&hellip;</a>"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1391883248,"post_id":21646085,"comment_id":32720414,"body_markdown":"@StuartMarks But it still works on instance/class variables, right?","body":"@StuartMarks But it still works on instance/class variables, right?"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1391895450,"post_id":21646085,"comment_id":32724361,"body_markdown":"In simple cases, yes, but you get a warning about `factorial` potentially not being initialized. I don&#39;t believe there is actually a problem in this example, since the lambda cannot be called before it&#39;s initialized, but I&#39;m sure someone could come up with a sufficiently complicated example that ended up observing a field in an uninitialized state. At some point it seems preferable to use named methods and method references. See my answer here: http://stackoverflow.com/a/21652054/1441122","body":"In simple cases, yes, but you get a warning about <code>factorial</code> potentially not being initialized. I don&#39;t believe there is actually a problem in this example, since the lambda cannot be called before it&#39;s initialized, but I&#39;m sure someone could come up with a sufficiently complicated example that ended up observing a field in an uninitialized state. At some point it seems preferable to use named methods and method references. See my answer here: <a href=\"http://stackoverflow.com/a/21652054/1441122\">stackoverflow.com/a/21652054/1441122</a>"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":1,"creation_date":1525037708,"post_id":21646085,"comment_id":87199275,"body_markdown":"&quot;Cannot reference a field before it is defined&quot;?","body":"&quot;Cannot reference a field before it is defined&quot;?"}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":4,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1391863277,"creation_date":1391863277,"answer_id":21646085,"question_id":19429667,"body_markdown":"You can define a recursive lambda as an instance or class variable:\r\n\r\n    static DoubleUnaryOperator factorial = x -&gt; x == 0 ? 1\r\n                                              : x * factorial.applyAsDouble(x - 1);\r\n\r\nfor example:\r\n\r\n    class Test {\r\n        static DoubleUnaryOperator factorial = x -&gt; x == 0 ? 1\r\n                                                 : x * factorial.applyAsDouble(x - 1));\r\n        public static void main(String[] args) {\r\n            System.out.println(factorial.applyAsDouble(5));\r\n        }\r\n    }\r\n\r\nprints `120.0`.","title":"Implement recursive lambda function using Java 8","body":"<p>You can define a recursive lambda as an instance or class variable:</p>\n\n<pre><code>static DoubleUnaryOperator factorial = x -&gt; x == 0 ? 1\n                                          : x * factorial.applyAsDouble(x - 1);\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>class Test {\n    static DoubleUnaryOperator factorial = x -&gt; x == 0 ? 1\n                                             : x * factorial.applyAsDouble(x - 1));\n    public static void main(String[] args) {\n        System.out.println(factorial.applyAsDouble(5));\n    }\n}\n</code></pre>\n\n<p>prints <code>120.0</code>.</p>\n"},{"tags":[],"owner":{"account_id":1810883,"reputation":1413,"user_id":1646982,"display_name":"Danil Gaponov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1396559352,"creation_date":1396559352,"answer_id":22849053,"question_id":19429667,"body_markdown":"    public class Main {\r\n        static class Wrapper {\r\n            Function&lt;Integer, Integer&gt; f;\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            final Wrapper w = new Wrapper();\r\n            w.f = x -&gt; x == 0 ? 1 : x * w.f.apply(x - 1);\r\n            System.out.println(w.f.apply(10));\r\n        }\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<pre><code>public class Main {\n    static class Wrapper {\n        Function&lt;Integer, Integer&gt; f;\n    }\n\n    public static void main(String[] args) {\n        final Wrapper w = new Wrapper();\n        w.f = x -&gt; x == 0 ? 1 : x * w.f.apply(x - 1);\n        System.out.println(w.f.apply(10));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1334360,"reputation":385,"user_id":1277472,"display_name":"rationalis"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1397020285,"creation_date":1397020285,"answer_id":22953285,"question_id":19429667,"body_markdown":"One way is to write a secondary function, `helper`, which takes a function and a number as arguments, and then write the function you actually want, `fact = helper(helper,x)`.\r\n\r\nLike so:\r\n\r\n    BiFunction&lt;BiFunction, Double, Double&gt; factHelper =\r\n            (f, x) -&gt; (x == 0) ? 1.0 : x*(double)f.apply(f,x-1);\r\n    Function&lt;Double, Double&gt; fact =\r\n            x -&gt; factHelper.apply(factHelper, x);\r\n\r\nThis seems to me to be slightly more elegant than relying on corner case semantics like a closure that captures a reference to a mutable structure, or allowing self-reference with a warning of the possibility of &quot;might not be initialized.&quot;\r\n\r\nStill, it&#39;s not a perfect solution because of Java&#39;s type system -- the generics cannot guarantee that `f`, the argument to `factHelper`, is of the same type as `factHelper` (i.e. same input types and output types), since that would be an infinitely nested generic.\r\n\r\nThus, instead, a safer solution might be:\r\n\r\n    Function&lt;Double, Double&gt; fact = x -&gt; {\r\n        BiFunction&lt;BiFunction, Double, Double&gt; factHelper =\r\n            (f, d) -&gt; (d == 0) ? 1.0 : d*(double)f.apply(f,d-1);\r\n        return factHelper.apply(factHelper, x);\r\n    };\r\n\r\nThe code smell incurred from `factHelper`&#39;s less-than-perfect generic type is now contained (or, dare I say, encapsulated) within the lambda, ensuring that `factHelper` will never be called unknowingly.","title":"Implement recursive lambda function using Java 8","body":"<p>One way is to write a secondary function, <code>helper</code>, which takes a function and a number as arguments, and then write the function you actually want, <code>fact = helper(helper,x)</code>.</p>\n\n<p>Like so:</p>\n\n<pre><code>BiFunction&lt;BiFunction, Double, Double&gt; factHelper =\n        (f, x) -&gt; (x == 0) ? 1.0 : x*(double)f.apply(f,x-1);\nFunction&lt;Double, Double&gt; fact =\n        x -&gt; factHelper.apply(factHelper, x);\n</code></pre>\n\n<p>This seems to me to be slightly more elegant than relying on corner case semantics like a closure that captures a reference to a mutable structure, or allowing self-reference with a warning of the possibility of \"might not be initialized.\"</p>\n\n<p>Still, it's not a perfect solution because of Java's type system -- the generics cannot guarantee that <code>f</code>, the argument to <code>factHelper</code>, is of the same type as <code>factHelper</code> (i.e. same input types and output types), since that would be an infinitely nested generic.</p>\n\n<p>Thus, instead, a safer solution might be:</p>\n\n<pre><code>Function&lt;Double, Double&gt; fact = x -&gt; {\n    BiFunction&lt;BiFunction, Double, Double&gt; factHelper =\n        (f, d) -&gt; (d == 0) ? 1.0 : d*(double)f.apply(f,d-1);\n    return factHelper.apply(factHelper, x);\n};\n</code></pre>\n\n<p>The code smell incurred from <code>factHelper</code>'s less-than-perfect generic type is now contained (or, dare I say, encapsulated) within the lambda, ensuring that <code>factHelper</code> will never be called unknowingly.</p>\n"},{"comments":[{"owner":{"account_id":2432392,"reputation":755,"user_id":2123025,"accept_rate":25,"display_name":"Claude Martin"},"score":1,"creation_date":1431268452,"post_id":23087294,"comment_id":48412488,"body_markdown":"It does not. Maybe in Java 9 but not in Java 8.","body":"It does not. Maybe in Java 9 but not in Java 8."},{"owner":{"account_id":16641188,"reputation":449,"user_id":12026681,"display_name":"lue"},"score":0,"creation_date":1601554463,"post_id":23087294,"comment_id":113447490,"body_markdown":"@ClaudeMartin Not possible in java &gt;8. The problem is that the variable is not initialized, not that it can mutate.","body":"@ClaudeMartin Not possible in java &gt;8. The problem is that the variable is not initialized, not that it can mutate."},{"owner":{"account_id":2432392,"reputation":755,"user_id":2123025,"accept_rate":25,"display_name":"Claude Martin"},"score":0,"creation_date":1671464530,"post_id":23087294,"comment_id":132099193,"body_markdown":"Now it&#39;s 7 years later and no Java version allows this. `fact` is final but you still can&#39;t reference it from the lambda. Would be nice if they allowed it, as it certainly would be possible and is what people expect.","body":"Now it&#39;s 7 years later and no Java version allows this. <code>fact</code> is final but you still can&#39;t reference it from the lambda. Would be nice if they allowed it, as it certainly would be possible and is what people expect."}],"tags":[],"owner":{"account_id":98263,"reputation":7066,"user_id":266103,"accept_rate":87,"display_name":"shrini1000"},"comment_count":3,"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1457037602,"creation_date":1397573538,"answer_id":23087294,"question_id":19429667,"body_markdown":"I don&#39;t have a Java8 compiler handy, so can&#39;t test my answer. But will it work if you define the &#39;fact&#39; variable to be final?\r\n\r\n&lt;pre&gt;&lt;code&gt;&lt;b&gt;final&lt;/b&gt; IntToDoubleFunction fact = x -&gt; {\r\n    return  ( x == 0)?1:x* fact.applyAsDouble(x-1);\r\n};&lt;/code&gt;&lt;/pre&gt;","title":"Implement recursive lambda function using Java 8","body":"<p>I don't have a Java8 compiler handy, so can't test my answer. But will it work if you define the 'fact' variable to be final?</p>\n\n<pre><code><b>final</b> IntToDoubleFunction fact = x -> {\n    return  ( x == 0)?1:x* fact.applyAsDouble(x-1);\n};</code></pre>\n"},{"tags":[],"owner":{"account_id":1463671,"reputation":67,"user_id":1377228,"accept_rate":0,"display_name":"Jerrolds"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628647693,"creation_date":1398178061,"answer_id":23222899,"question_id":19429667,"body_markdown":"The following works but it does seem arcane. \r\n````lang-java\r\nimport java.util.function.Function;\r\n\r\nclass Recursion{\r\n\r\n    Function&lt;Integer,Integer&gt;  factorial_lambda; // The positions of the lambda declaration and initialization must be as is.\r\n\r\n    public static void main(String[] args) {new Recursion();}\r\n\r\n    public Recursion() {\r\n        factorial_lambda=(i)-&gt;{\r\n            if(i==1)\r\n                return 1;\r\n            else\r\n                return i*(factorial_lambda.apply(i-1));\r\n        };\r\n        System.out.println(factorial_lambda.apply(5));\r\n     }\r\n}\r\n\r\n// Output 120\r\n````","title":"Implement recursive lambda function using Java 8","body":"<p>The following works but it does seem arcane.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.function.Function;\n\nclass Recursion{\n\n    Function&lt;Integer,Integer&gt;  factorial_lambda; // The positions of the lambda declaration and initialization must be as is.\n\n    public static void main(String[] args) {new Recursion();}\n\n    public Recursion() {\n        factorial_lambda=(i)-&gt;{\n            if(i==1)\n                return 1;\n            else\n                return i*(factorial_lambda.apply(i-1));\n        };\n        System.out.println(factorial_lambda.apply(5));\n     }\n}\n\n// Output 120\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4482354,"reputation":21,"user_id":3646097,"display_name":"beck"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1400319608,"creation_date":1400271588,"answer_id":23703922,"question_id":19429667,"body_markdown":"I heard at the JAX this year, that &quot;lambads do not support recursion&quot;. What is meant with this statement is that the &quot;this&quot; inside the lambda always refer to the surrounding class.\r\n\r\nBut I managed to define - at least how I understand the term &quot;recursion&quot; - a recursive lambda and it goes like that:\r\n\r\n    interface FacInterface {\r\n      int fac(int i);\r\n    }\r\n    public class Recursion {\r\n      static FacInterface f;\r\n      public static void main(String[] args)\r\n      {\r\n        int j = (args.length == 1) ? new Integer(args[0]) : 10;\r\n        f = (i) -&gt; { if ( i == 1) return 1;\r\n          else return i*f.fac( i-1 ); };\r\n        System.out.println( j+ &quot;! = &quot; + f.fac(j));\r\n      }\r\n    }\r\n\r\nSave this inside a file &quot;Recursion.java&quot; and with the two commands &quot;javac Recursion.java&quot; and &quot;java Recursion&quot; it worked for me.\r\n\r\nThe clou is to keep the interface that the lambda has to implement as a field variable in the surrounding class. The lambda can refer to that field and the field will not be implicitly final.","title":"Implement recursive lambda function using Java 8","body":"<p>I heard at the JAX this year, that \"lambads do not support recursion\". What is meant with this statement is that the \"this\" inside the lambda always refer to the surrounding class.</p>\n\n<p>But I managed to define - at least how I understand the term \"recursion\" - a recursive lambda and it goes like that:</p>\n\n<pre><code>interface FacInterface {\n  int fac(int i);\n}\npublic class Recursion {\n  static FacInterface f;\n  public static void main(String[] args)\n  {\n    int j = (args.length == 1) ? new Integer(args[0]) : 10;\n    f = (i) -&gt; { if ( i == 1) return 1;\n      else return i*f.fac( i-1 ); };\n    System.out.println( j+ \"! = \" + f.fac(j));\n  }\n}\n</code></pre>\n\n<p>Save this inside a file \"Recursion.java\" and with the two commands \"javac Recursion.java\" and \"java Recursion\" it worked for me.</p>\n\n<p>The clou is to keep the interface that the lambda has to implement as a field variable in the surrounding class. The lambda can refer to that field and the field will not be implicitly final.</p>\n"},{"comments":[{"owner":{"account_id":247773,"reputation":15733,"user_id":522729,"accept_rate":69,"display_name":"Victor Grazi"},"score":3,"creation_date":1406547569,"post_id":23980102,"comment_id":38859560,"body_markdown":"All of the replies are basically the same. But why does Java require you to declare the Function as an instance or class variable? Why does it not allow you to just declare it in your method???","body":"All of the replies are basically the same. But why does Java require you to declare the Function as an instance or class variable? Why does it not allow you to just declare it in your method???"}],"tags":[],"owner":{"account_id":4144107,"reputation":46,"user_id":3398399,"display_name":"Rene.v.P."},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1401627273,"creation_date":1401627273,"answer_id":23980102,"question_id":19429667,"body_markdown":"A bit like the very first reply ... \r\n\r\n    public static Function&lt;Integer,Double&gt; factorial;\r\n\r\n    static {\r\n        factorial = n -&gt; {\r\n            assert n &gt;= 0;\r\n            return (n == 0) ? 1.0 : n * factorial.apply(n - 1);\r\n        };\r\n    }\r\n","title":"Implement recursive lambda function using Java 8","body":"<p>A bit like the very first reply ... </p>\n\n<pre><code>public static Function&lt;Integer,Double&gt; factorial;\n\nstatic {\n    factorial = n -&gt; {\n        assert n &gt;= 0;\n        return (n == 0) ? 1.0 : n * factorial.apply(n - 1);\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247773,"reputation":15733,"user_id":522729,"accept_rate":69,"display_name":"Victor Grazi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1406642884,"creation_date":1406642884,"answer_id":25017416,"question_id":19429667,"body_markdown":"You can also define it as a local variable by creating a final array of size one (of say Function&lt;Double, Double&gt;[]) and then assign the function to element 0. Let me know if you need the exact syntax","title":"Implement recursive lambda function using Java 8","body":"<p>You can also define it as a local variable by creating a final array of size one (of say Function[]) and then assign the function to element 0. Let me know if you need the exact syntax</p>\n"},{"comments":[{"owner":{"account_id":2432392,"reputation":755,"user_id":2123025,"accept_rate":25,"display_name":"Claude Martin"},"score":3,"creation_date":1431494027,"post_id":25473855,"comment_id":48517256,"body_markdown":"I&#39;ve made a utility class so you can pass a recursive closure and get one of the predefined functional types:\nhttps://github.com/claudemartin/Recursive\nYou always have an additional parameter named &quot;self&quot; to do the recursion. Some even have a version with a cache and the Demo.class shows how you can get a rather fast version of the Fibonacci function.","body":"I&#39;ve made a utility class so you can pass a recursive closure and get one of the predefined functional types: <a href=\"https://github.com/claudemartin/Recursive\" rel=\"nofollow noreferrer\">github.com/claudemartin/Recursive</a> You always have an additional parameter named &quot;self&quot; to do the recursion. Some even have a version with a cache and the Demo.class shows how you can get a rather fast version of the Fibonacci function."}],"tags":[],"owner":{"account_id":223905,"reputation":7839,"user_id":483408,"accept_rate":94,"display_name":"Andrey Morozov"},"comment_count":1,"down_vote_count":1,"up_vote_count":54,"is_accepted":false,"score":53,"last_activity_date":1408898110,"creation_date":1408898110,"answer_id":25473855,"question_id":19429667,"body_markdown":"I usually use (once-for-all-functional-interfaces defined) generic helper class which wraps the variable of the functional interface type.\r\nThis approach solves the problem with the local variable initialization and allows the code to look more clearly.\r\n\r\nIn case of this question the code will look as follows:\r\n\r\n    // Recursive.java\r\n    // @param &lt;I&gt; - Functional Interface Type\r\n    public class Recursive&lt;I&gt; {\r\n        public I func;\r\n    }\r\n    \r\n    // Test.java\r\n    public double factorial(int n) {\r\n    \r\n        Recursive&lt;IntToDoubleFunction&gt; recursive = new Recursive&lt;&gt;();\r\n        recursive.func = x -&gt; (x == 0) ? 1 : x * recursive.func.applyAsDouble(x - 1);\r\n    \r\n        return recursive.func.applyAsDouble(n);\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<p>I usually use (once-for-all-functional-interfaces defined) generic helper class which wraps the variable of the functional interface type.\nThis approach solves the problem with the local variable initialization and allows the code to look more clearly.</p>\n\n<p>In case of this question the code will look as follows:</p>\n\n<pre><code>// Recursive.java\n// @param &lt;I&gt; - Functional Interface Type\npublic class Recursive&lt;I&gt; {\n    public I func;\n}\n\n// Test.java\npublic double factorial(int n) {\n\n    Recursive&lt;IntToDoubleFunction&gt; recursive = new Recursive&lt;&gt;();\n    recursive.func = x -&gt; (x == 0) ? 1 : x * recursive.func.applyAsDouble(x - 1);\n\n    return recursive.func.applyAsDouble(n);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1955570,"reputation":1570,"user_id":1758634,"accept_rate":71,"display_name":"tomaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441706079,"creation_date":1441706079,"answer_id":32454658,"question_id":19429667,"body_markdown":"The problem, is that lambda-functions want to operate on `final` variables, while we need a mutable `Function`-reference that can be replaced with our lambda.\r\n\r\nThe easiest trick, appears to be to, to define the variable as a member variable, and the compiler won&#39;t complain.\r\n\r\nI changed my example to use `IntUnaryOperator` instead of `IntToDoubleFunction`, since we&#39;re just operating on `Integers` anyway here.\r\n\r\n    import org.junit.Test;\r\n    import java.util.function.IntUnaryOperator;\r\n    import static org.junit.Assert.assertEquals;\r\n    \r\n    public class RecursiveTest {\r\n        private IntUnaryOperator operator;\r\n    \r\n        @Test\r\n        public void factorialOfFive(){\r\n            IntUnaryOperator factorial = factorial();\r\n            assertEquals(factorial.applyAsInt(5), 120); // passes\r\n        }\r\n    \r\n        public IntUnaryOperator factorial() {\r\n            return operator = x -&gt; (x == 0) ? 1 : x * operator.applyAsInt(x - 1);\r\n        }\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<p>The problem, is that lambda-functions want to operate on <code>final</code> variables, while we need a mutable <code>Function</code>-reference that can be replaced with our lambda.</p>\n\n<p>The easiest trick, appears to be to, to define the variable as a member variable, and the compiler won't complain.</p>\n\n<p>I changed my example to use <code>IntUnaryOperator</code> instead of <code>IntToDoubleFunction</code>, since we're just operating on <code>Integers</code> anyway here.</p>\n\n<pre><code>import org.junit.Test;\nimport java.util.function.IntUnaryOperator;\nimport static org.junit.Assert.assertEquals;\n\npublic class RecursiveTest {\n    private IntUnaryOperator operator;\n\n    @Test\n    public void factorialOfFive(){\n        IntUnaryOperator factorial = factorial();\n        assertEquals(factorial.applyAsInt(5), 120); // passes\n    }\n\n    public IntUnaryOperator factorial() {\n        return operator = x -&gt; (x == 0) ? 1 : x * operator.applyAsInt(x - 1);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16641188,"reputation":449,"user_id":12026681,"display_name":"lue"},"score":0,"creation_date":1601554946,"post_id":34254218,"comment_id":113447736,"body_markdown":"this is cool, because the inner function does not even have to be a lambda field. It can be a method which you can access with `::f`","body":"this is cool, because the inner function does not even have to be a lambda field. It can be a method which you can access with <code>::f</code>"}],"tags":[],"owner":{"account_id":5778025,"reputation":197,"user_id":4559558,"display_name":"JbGi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450028656,"creation_date":1450028656,"answer_id":34254218,"question_id":19429667,"body_markdown":"Here is a solution that does not rely on a side effect. To make the purpose interesting, let&#39;s say that you want to abstract over the recursion (otherwise the instance field solution is perfectly valid).\r\nThe trick is to use an anonymous class to get the &#39;this&#39; reference:\r\n\r\n    public static IntToLongFunction reduce(int zeroCase, LongBinaryOperator reduce) {\r\n      return new Object() {\r\n        IntToLongFunction f = x -&gt; x == 0\r\n                                   ? zeroCase\r\n                                   : reduce.applyAsLong(x, this.f.applyAsLong(x - 1));\r\n      }.f;\r\n    }\r\n  \r\n    public static void main(String[] args) {\r\n      IntToLongFunction fact = reduce(1, (a, b) -&gt; a * b);\r\n      IntToLongFunction sum = reduce(0, (a, b) -&gt; a + b);\r\n      System.out.println(fact.applyAsLong(5)); // 120\r\n      System.out.println(sum.applyAsLong(5)); // 15\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<p>Here is a solution that does not rely on a side effect. To make the purpose interesting, let's say that you want to abstract over the recursion (otherwise the instance field solution is perfectly valid).\nThe trick is to use an anonymous class to get the 'this' reference:</p>\n\n<pre><code>public static IntToLongFunction reduce(int zeroCase, LongBinaryOperator reduce) {\n  return new Object() {\n    IntToLongFunction f = x -&gt; x == 0\n                               ? zeroCase\n                               : reduce.applyAsLong(x, this.f.applyAsLong(x - 1));\n  }.f;\n}\n\npublic static void main(String[] args) {\n  IntToLongFunction fact = reduce(1, (a, b) -&gt; a * b);\n  IntToLongFunction sum = reduce(0, (a, b) -&gt; a + b);\n  System.out.println(fact.applyAsLong(5)); // 120\n  System.out.println(sum.applyAsLong(5)); // 15\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7645539,"reputation":11,"user_id":5796343,"display_name":"Rebel Geek"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1452886510,"creation_date":1452886510,"answer_id":34818512,"question_id":19429667,"body_markdown":"Given the fact that &quot;this&quot; in the lambda refers to the containing class, the following compiles with no errors (with added dependencies, of course):\r\n\r\n    public class MyClass {\r\n        Function&lt;Map, CustomStruct&gt; sourceToStruct = source -&gt; {\r\n            CustomStruct result;\r\n            Object value;\r\n\r\n            for (String key : source.keySet()) {\r\n                value = source.get(key);\r\n\r\n                if (value instanceof Map) {\r\n                    value = this.sourceToStruct.apply((Map) value);\r\n                }\r\n\r\n                result.setValue(key, value);\r\n            }\r\n\r\n            return result;\r\n        };\r\n    }\r\n\r\n","title":"Implement recursive lambda function using Java 8","body":"<p>Given the fact that \"this\" in the lambda refers to the containing class, the following compiles with no errors (with added dependencies, of course):</p>\n\n<pre><code>public class MyClass {\n    Function&lt;Map, CustomStruct&gt; sourceToStruct = source -&gt; {\n        CustomStruct result;\n        Object value;\n\n        for (String key : source.keySet()) {\n            value = source.get(key);\n\n            if (value instanceof Map) {\n                value = this.sourceToStruct.apply((Map) value);\n            }\n\n            result.setValue(key, value);\n        }\n\n        return result;\n    };\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":6,"creation_date":1529283066,"post_id":35997193,"comment_id":88802991,"body_markdown":"For reference, this approach is generally known in functional programming circles as a &quot;fixed point combinator&quot;, and is quite widely used.","body":"For reference, this approach is generally known in functional programming circles as a &quot;fixed point combinator&quot;, and is quite widely used."},{"owner":{"account_id":5989133,"reputation":1073,"user_id":4705719,"accept_rate":75,"display_name":"austin_ce"},"score":1,"creation_date":1609788481,"post_id":35997193,"comment_id":115926901,"body_markdown":"It might also be nicer to extend `Function&lt;T, U&gt;` and specify a default `apply` that kicks off the recursion.","body":"It might also be nicer to extend <code>Function&lt;T, U&gt;</code> and specify a default <code>apply</code> that kicks off the recursion."}],"tags":[],"owner":{"account_id":132773,"reputation":1320,"user_id":333675,"display_name":"Ian Robertson"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1457986477,"creation_date":1457986477,"answer_id":35997193,"question_id":19429667,"body_markdown":"If you find yourself needing to do this sort of thing often, another option is to create a helper interface and method:\r\n\r\n    public static interface Recursable&lt;T, U&gt; {\r\n        U apply(T t, Recursable&lt;T, U&gt; r);\r\n    }\r\n\r\n    public static &lt;T, U&gt; Function&lt;T, U&gt; recurse(Recursable&lt;T, U&gt; f) {\r\n        return t -&gt; f.apply(t, f);\r\n    }\r\n\r\nAnd then write:\r\n\r\n    Function&lt;Integer, Double&gt; fact = recurse(\r\n        (i, f) -&gt; 0 == i ? 1 : i * f.apply(i - 1, f));\r\n\r\n(While I did this generically with reference types, you can also make primitive-specific versions).\r\n\r\nThis borrows from an old trick in The Little Lisper for making unnamed functions.\r\n\r\nI&#39;m not sure I&#39;d ever do this in production code, but it is interesting...","title":"Implement recursive lambda function using Java 8","body":"<p>If you find yourself needing to do this sort of thing often, another option is to create a helper interface and method:</p>\n\n<pre><code>public static interface Recursable&lt;T, U&gt; {\n    U apply(T t, Recursable&lt;T, U&gt; r);\n}\n\npublic static &lt;T, U&gt; Function&lt;T, U&gt; recurse(Recursable&lt;T, U&gt; f) {\n    return t -&gt; f.apply(t, f);\n}\n</code></pre>\n\n<p>And then write:</p>\n\n<pre><code>Function&lt;Integer, Double&gt; fact = recurse(\n    (i, f) -&gt; 0 == i ? 1 : i * f.apply(i - 1, f));\n</code></pre>\n\n<p>(While I did this generically with reference types, you can also make primitive-specific versions).</p>\n\n<p>This borrows from an old trick in The Little Lisper for making unnamed functions.</p>\n\n<p>I'm not sure I'd ever do this in production code, but it is interesting...</p>\n"},{"comments":[{"owner":{"account_id":4876099,"reputation":421,"user_id":4455546,"display_name":"Clement Cherlin"},"score":0,"creation_date":1665151186,"post_id":37744133,"comment_id":130639150,"body_markdown":"I think this is the best approach. You can also do RBiFunction `@FunctionalInterface interface RBiFunction&lt;T, U, R&gt; extends BiFunction&lt;T, U, R&gt; { @Override default R apply (T t, U u) { return applyRecursive(this, t, u); } R applyRecursive(RBiFunction&lt;T, U, R&gt; self, T t, U u); }`","body":"I think this is the best approach. You can also do RBiFunction <code>@FunctionalInterface interface RBiFunction&lt;T, U, R&gt; extends BiFunction&lt;T, U, R&gt; { @Override default R apply (T t, U u) { return applyRecursive(this, t, u); } R applyRecursive(RBiFunction&lt;T, U, R&gt; self, T t, U u); }</code>"}],"tags":[],"owner":{"account_id":7148533,"reputation":31,"user_id":6449244,"display_name":"leonel dossantos"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1465551084,"creation_date":1465549322,"answer_id":37744133,"question_id":19429667,"body_markdown":"    public class LambdaExperiments {\r\n    \r\n      @FunctionalInterface\r\n      public interface RFunction&lt;T, R&gt; extends Function&lt;T, R&gt; {\r\n        R recursiveCall(Function&lt;? super T, ? extends R&gt; func, T in);\r\n    \r\n        default R apply(T in) {\r\n          return recursiveCall(this, in);\r\n        }\r\n      }\r\n    \r\n      @FunctionalInterface\r\n      public interface RConsumer&lt;T&gt; extends Consumer&lt;T&gt; {\r\n        void recursiveCall(Consumer&lt;? super T&gt; func, T in);\r\n    \r\n        default void accept(T in) {\r\n          recursiveCall(this, in);\r\n        }\r\n      }\r\n    \r\n      @FunctionalInterface\r\n      public interface RBiConsumer&lt;T, U&gt; extends BiConsumer&lt;T, U&gt; {\r\n        void recursiveCall(BiConsumer&lt;T, U&gt; func, T t, U u);\r\n    \r\n        default void accept(T t, U u) {\r\n          recursiveCall(this, t, u);\r\n        }\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        RFunction&lt;Integer, Integer&gt; fibo = (f, x) -&gt; x &gt; 1 ? f.apply(x - 1) + f.apply(x - 2) : x;\r\n    \r\n        RConsumer&lt;Integer&gt; decreasingPrint = (f, x) -&gt; {\r\n          System.out.println(x);\r\n          if (x &gt; 0) f.accept(x - 1);\r\n        };\r\n    \r\n        System.out.println(&quot;Fibonnaci(15):&quot; + fibo.apply(15));\r\n    \r\n        decreasingPrint.accept(5);\r\n      }\r\n    }\r\n\r\nDuring my tests, this is the best that i could achieve for local recursive lambdas.\r\nThey can be used in streams as well but we loose the easyness of the target typing.","title":"Implement recursive lambda function using Java 8","body":"<pre><code>public class LambdaExperiments {\n\n  @FunctionalInterface\n  public interface RFunction&lt;T, R&gt; extends Function&lt;T, R&gt; {\n    R recursiveCall(Function&lt;? super T, ? extends R&gt; func, T in);\n\n    default R apply(T in) {\n      return recursiveCall(this, in);\n    }\n  }\n\n  @FunctionalInterface\n  public interface RConsumer&lt;T&gt; extends Consumer&lt;T&gt; {\n    void recursiveCall(Consumer&lt;? super T&gt; func, T in);\n\n    default void accept(T in) {\n      recursiveCall(this, in);\n    }\n  }\n\n  @FunctionalInterface\n  public interface RBiConsumer&lt;T, U&gt; extends BiConsumer&lt;T, U&gt; {\n    void recursiveCall(BiConsumer&lt;T, U&gt; func, T t, U u);\n\n    default void accept(T t, U u) {\n      recursiveCall(this, t, u);\n    }\n  }\n\n  public static void main(String[] args) {\n    RFunction&lt;Integer, Integer&gt; fibo = (f, x) -&gt; x &gt; 1 ? f.apply(x - 1) + f.apply(x - 2) : x;\n\n    RConsumer&lt;Integer&gt; decreasingPrint = (f, x) -&gt; {\n      System.out.println(x);\n      if (x &gt; 0) f.accept(x - 1);\n    };\n\n    System.out.println(\"Fibonnaci(15):\" + fibo.apply(15));\n\n    decreasingPrint.accept(5);\n  }\n}\n</code></pre>\n\n<p>During my tests, this is the best that i could achieve for local recursive lambdas.\nThey can be used in streams as well but we loose the easyness of the target typing.</p>\n"},{"tags":[],"owner":{"account_id":8245409,"reputation":3834,"user_id":6201659,"display_name":"Jose Da Silva Gomes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501696187,"creation_date":1501696187,"answer_id":45467761,"question_id":19429667,"body_markdown":"You can create a recursive function using this class:\r\n\r\n&lt;!-- Java --&gt;\r\n\r\n    public class Recursive&lt;I&gt; {\r\n\t    private Recursive() {\r\n\r\n\t    }\r\n\t    private I i;\r\n\t    public static &lt;I&gt; I of(Function&lt;RecursiveSupplier&lt;I&gt;, I&gt; f) {\r\n\t    \tRecursive&lt;I&gt; rec = new Recursive&lt;&gt;();\r\n\t\t    RecursiveSupplier&lt;I&gt; sup = new RecursiveSupplier&lt;&gt;();\r\n\t\t    rec.i = f.apply(sup);\r\n\t\t    sup.i = rec.i;\r\n\t\t    return rec.i;\r\n\t    }\r\n\t    public static class RecursiveSupplier&lt;I&gt; {\r\n\t    \tprivate I i;\r\n\t    \tpublic I call() {\r\n\t\t    \treturn i;\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\nAnd then you can use any functional interface in just 1 line using a lambda and the definition of your functional interface like the following:\r\n\r\n&lt;!-- Java --&gt;\r\n\r\n    Function&lt;Integer, Integer&gt; factorial = Recursive.of(recursive -&gt;\r\n\t\t    x -&gt; x == 0 ? 1 : x * recursive.call().apply(x - 1));\r\n    System.out.println(factorial.apply(5));\r\n\r\nI found it very intuitive and easy to use.","title":"Implement recursive lambda function using Java 8","body":"<p>You can create a recursive function using this class:</p>\n\n\n\n<pre><code>public class Recursive&lt;I&gt; {\n    private Recursive() {\n\n    }\n    private I i;\n    public static &lt;I&gt; I of(Function&lt;RecursiveSupplier&lt;I&gt;, I&gt; f) {\n        Recursive&lt;I&gt; rec = new Recursive&lt;&gt;();\n        RecursiveSupplier&lt;I&gt; sup = new RecursiveSupplier&lt;&gt;();\n        rec.i = f.apply(sup);\n        sup.i = rec.i;\n        return rec.i;\n    }\n    public static class RecursiveSupplier&lt;I&gt; {\n        private I i;\n        public I call() {\n            return i;\n        }\n    }\n}\n</code></pre>\n\n<p>And then you can use any functional interface in just 1 line using a lambda and the definition of your functional interface like the following:</p>\n\n\n\n<pre><code>Function&lt;Integer, Integer&gt; factorial = Recursive.of(recursive -&gt;\n        x -&gt; x == 0 ? 1 : x * recursive.call().apply(x - 1));\nSystem.out.println(factorial.apply(5));\n</code></pre>\n\n<p>I found it very intuitive and easy to use.</p>\n"},{"comments":[{"owner":{"account_id":5587701,"reputation":1457,"user_id":4427841,"accept_rate":58,"display_name":"000000000000000000000"},"score":1,"creation_date":1508325942,"post_id":45813956,"comment_id":80565103,"body_markdown":"Nice solution, though I don&#39;t see why you would&#39;t use recursive methods without lambdas if you resort to methods anyways.","body":"Nice solution, though I don&#39;t see why you would&#39;t use recursive methods without lambdas if you resort to methods anyways."}],"tags":[],"owner":{"account_id":11602798,"reputation":11,"user_id":8499421,"display_name":"Dmytro Chopenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1503395366,"creation_date":1503394493,"answer_id":45813956,"question_id":19429667,"body_markdown":"Another recursive factorial with Java 8\r\n\r\n    public static int factorial(int i) {\r\n        final UnaryOperator&lt;Integer&gt; func = x -&gt; x == 0 ? 1 : x * factorial(x - 1);\r\n        return func.apply(i);\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<p>Another recursive factorial with Java 8</p>\n\n<pre><code>public static int factorial(int i) {\n    final UnaryOperator&lt;Integer&gt; func = x -&gt; x == 0 ? 1 : x * factorial(x - 1);\n    return func.apply(i);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5587701,"reputation":1457,"user_id":4427841,"accept_rate":58,"display_name":"000000000000000000000"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508325438,"creation_date":1508325438,"answer_id":46808937,"question_id":19429667,"body_markdown":"Came accross this question during a lecture on Lambdas that used Fibonacci as a possible use case.\r\n\r\nYou can make a recursive lambda like this:\r\n\r\n    import java.util.function.Function;\r\n\r\n    public class Fib {\r\n\r\n       static Function&lt;Integer, Integer&gt; fib;\r\n    \r\n       public static void main(String[] args) {\r\n           fib = (n) -&gt; { return n &gt; 1 ? fib.apply(n-1) + fib.apply(n-2) : n; };\r\n        \r\n           for(int i = 0; i &lt; 10; i++){\r\n               System.out.println(&quot;fib(&quot; + i + &quot;) = &quot; + fib.apply(i));\r\n           }\r\n       }\r\n    }\r\n\r\nWhat do you have to keep in mind?\r\n\r\n - Lambdas are evaluated on execution -&gt; they may be recursive\r\n   \r\n - Using a lambda-variable inside of another lambda requires the\r\n   variable to be initialized -&gt; before defining a recursive lambda you\r\n   must define it with a foo-value\r\n   \r\n - using a local lambda-variable inside a lambda requires the variable\r\n   to be final, thus it cannot be redefined -&gt; **use a class/ object\r\n   variable for the lambda** as it is initialized with a default value\r\n\r\n","title":"Implement recursive lambda function using Java 8","body":"<p>Came accross this question during a lecture on Lambdas that used Fibonacci as a possible use case.</p>\n\n<p>You can make a recursive lambda like this:</p>\n\n<pre><code>import java.util.function.Function;\n\npublic class Fib {\n\n   static Function&lt;Integer, Integer&gt; fib;\n\n   public static void main(String[] args) {\n       fib = (n) -&gt; { return n &gt; 1 ? fib.apply(n-1) + fib.apply(n-2) : n; };\n\n       for(int i = 0; i &lt; 10; i++){\n           System.out.println(\"fib(\" + i + \") = \" + fib.apply(i));\n       }\n   }\n}\n</code></pre>\n\n<p>What do you have to keep in mind?</p>\n\n<ul>\n<li><p>Lambdas are evaluated on execution -> they may be recursive</p></li>\n<li><p>Using a lambda-variable inside of another lambda requires the\nvariable to be initialized -> before defining a recursive lambda you\nmust define it with a foo-value</p></li>\n<li><p>using a local lambda-variable inside a lambda requires the variable\nto be final, thus it cannot be redefined -> <strong>use a class/ object\nvariable for the lambda</strong> as it is initialized with a default value</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5136427,"reputation":106,"user_id":4115052,"display_name":"Larry Cable"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553546638,"creation_date":1553546638,"answer_id":55346133,"question_id":19429667,"body_markdown":"@IanRobertson Nicely done, in fact you can move the static &#39;factory&#39; into the body of the interface itself thus encapsulating it entirely:\r\n\r\n    public static interface Recursable&lt;T, U&gt; {\r\n    \t    U apply(T t, Recursable&lt;T, U&gt; r);\r\n    \t    \r\n    \t    public static &lt;T, U&gt; Function&lt;T, U&gt; recurseable(Recursable&lt;T, U&gt; f) {\r\n    \t\t    return t -&gt; f.apply(t, f);\r\n    \t\t}\r\n    }\r\n\r\nThis is the cleanest solution/answer I have seen so far ... especially since the invocation of &quot;fact&quot; is written &quot;naturally&quot;: fac.apply(n) which is what you would expect to see for a unary function like fac() ","title":"Implement recursive lambda function using Java 8","body":"<p>@IanRobertson Nicely done, in fact you can move the static 'factory' into the body of the interface itself thus encapsulating it entirely:</p>\n\n<pre><code>public static interface Recursable&lt;T, U&gt; {\n        U apply(T t, Recursable&lt;T, U&gt; r);\n\n        public static &lt;T, U&gt; Function&lt;T, U&gt; recurseable(Recursable&lt;T, U&gt; f) {\n            return t -&gt; f.apply(t, f);\n        }\n}\n</code></pre>\n\n<p>This is the cleanest solution/answer I have seen so far ... especially since the invocation of \"fact\" is written \"naturally\": fac.apply(n) which is what you would expect to see for a unary function like fac() </p>\n"},{"tags":[],"owner":{"account_id":2176810,"reputation":1464,"user_id":1927303,"display_name":"Arundev"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1560760857,"creation_date":1553591150,"answer_id":55353292,"question_id":19429667,"body_markdown":"Answer is : You have to use a **this** before name variable calling applyAsDouble function :- \r\n      \r\n    IntToDoubleFunction fact = x -&gt; x == 0 ? 1 : x * this.fact.applyAsDouble(x-1);\r\n\r\nif you make the fact final also it will work \r\n     \r\n    final IntToDoubleFunction fact = x -&gt; x == 0 ? 1 : x * this.fact.applyAsDouble(x-1);\r\n\r\nWe can use functional interface **UnaryOperator** here. A unary operator that always returns its input argument. \r\n\r\n1)  Just add **this**. before the name of the function, as in:\r\n    \r\n    UnaryOperator&lt;Long&gt; fact = x -&gt; x == 0 ? 1  : x * this.fact.apply(x - 1 );\r\n\r\nThis will hep to avoid **‚ÄúCannot reference a field before it is defined‚Äù**.\r\n\r\n2) If you prefer a **static** field, just replace &#39; **this** &#39; with name of the class:\r\n\r\n    static final UnaryOperator&lt;Long&gt; fact = x -&gt; x== 0? 1: x * MyFactorial.fact.apply(x - 1 );","title":"Implement recursive lambda function using Java 8","body":"<p>Answer is : You have to use a <strong>this</strong> before name variable calling applyAsDouble function :- </p>\n\n<pre><code>IntToDoubleFunction fact = x -&gt; x == 0 ? 1 : x * this.fact.applyAsDouble(x-1);\n</code></pre>\n\n<p>if you make the fact final also it will work </p>\n\n<pre><code>final IntToDoubleFunction fact = x -&gt; x == 0 ? 1 : x * this.fact.applyAsDouble(x-1);\n</code></pre>\n\n<p>We can use functional interface <strong>UnaryOperator</strong> here. A unary operator that always returns its input argument. </p>\n\n<p>1)  Just add <strong>this</strong>. before the name of the function, as in:</p>\n\n<pre><code>UnaryOperator&lt;Long&gt; fact = x -&gt; x == 0 ? 1  : x * this.fact.apply(x - 1 );\n</code></pre>\n\n<p>This will hep to avoid <strong>‚ÄúCannot reference a field before it is defined‚Äù</strong>.</p>\n\n<p>2) If you prefer a <strong>static</strong> field, just replace ' <strong>this</strong> ' with name of the class:</p>\n\n<pre><code>static final UnaryOperator&lt;Long&gt; fact = x -&gt; x== 0? 1: x * MyFactorial.fact.apply(x - 1 );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3414062,"reputation":1,"user_id":2863421,"display_name":"A Paul Anthony"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561245564,"creation_date":1561236845,"answer_id":56719114,"question_id":19429667,"body_markdown":"Picking up on the common theme of answers here is that lambdas CAN be recursive, providing they have a fixed reference point (hence the class/interface based answers such as [@assylias][2], [@Andrey Morozov][3], [@Ian Robertson][4], etc).\r\n\r\nI really liked the answer from [@000000000000000000000][1] with the member variable workaround but I have concerns if the intended lambda function wanted to reference other variables from the containing function&#39;s scope. Surely it&#39;ll be evaluating those local references at assignment and putting the resulting function into a member variable where it could be accessed by other methods in the class. That doesn&#39;t sound ... *right* (and could get quite interesting if the containing method itself is called recursively). \r\n\r\nThe following is a variation of the class-based solutions expressed in a form that&#39;s close to the OP&#39;s original one-line lambda but Eclipse doesn&#39;t complain about.\r\n\r\n    IntToDoubleFunction fact = new IntToDoubleFunction() {\r\n        @Override\r\n        public double applyAsDouble(int x) {\r\n            return x == 0 ? 1 : x * this.applyAsDouble(x-1);\r\n    \t}\r\n    };\r\n\r\n\r\nThe { } of course creates an anonymous class and thus a new scope with reference points for the lambda&#39;s evaluation with the added benefits of still being within containing function&#39;s own scope and thus &quot;sibling&quot; variables.\r\n\r\n  [1]: https://stackoverflow.com/a/46808937\r\n  [2]: https://stackoverflow.com/a/21646085\r\n  [3]: https://stackoverflow.com/a/25473855\r\n  [4]: https://stackoverflow.com/a/35997193","title":"Implement recursive lambda function using Java 8","body":"<p>Picking up on the common theme of answers here is that lambdas CAN be recursive, providing they have a fixed reference point (hence the class/interface based answers such as <a href=\"https://stackoverflow.com/a/21646085\">@assylias</a>, <a href=\"https://stackoverflow.com/a/25473855\">@Andrey Morozov</a>, <a href=\"https://stackoverflow.com/a/35997193\">@Ian Robertson</a>, etc).</p>\n\n<p>I really liked the answer from <a href=\"https://stackoverflow.com/a/46808937\">@000000000000000000000</a> with the member variable workaround but I have concerns if the intended lambda function wanted to reference other variables from the containing function's scope. Surely it'll be evaluating those local references at assignment and putting the resulting function into a member variable where it could be accessed by other methods in the class. That doesn't sound ... <em>right</em> (and could get quite interesting if the containing method itself is called recursively). </p>\n\n<p>The following is a variation of the class-based solutions expressed in a form that's close to the OP's original one-line lambda but Eclipse doesn't complain about.</p>\n\n<pre><code>IntToDoubleFunction fact = new IntToDoubleFunction() {\n    @Override\n    public double applyAsDouble(int x) {\n        return x == 0 ? 1 : x * this.applyAsDouble(x-1);\n    }\n};\n</code></pre>\n\n<p>The { } of course creates an anonymous class and thus a new scope with reference points for the lambda's evaluation with the added benefits of still being within containing function's own scope and thus \"sibling\" variables.</p>\n"},{"tags":[],"owner":{"account_id":8061838,"reputation":13,"user_id":6077152,"display_name":"Jakub Rogacz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578775402,"creation_date":1578775402,"answer_id":59698484,"question_id":19429667,"body_markdown":"You could also define interface yourself wher you would just pass it itself as argument during call. E.g \r\n\r\n    interface MyOwnFunction&lt;T,R&gt;{\r\n        R apply(MyOwnFunction&lt;T,R&gt; self,T arg);\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<p>You could also define interface yourself wher you would just pass it itself as argument during call. E.g </p>\n\n<pre><code>interface MyOwnFunction&lt;T,R&gt;{\n    R apply(MyOwnFunction&lt;T,R&gt; self,T arg);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3527503,"reputation":933,"user_id":2948173,"display_name":"Ethan McCue"},"score":2,"creation_date":1600015775,"post_id":63238653,"comment_id":112948395,"body_markdown":"Thanks, I hate it.","body":"Thanks, I hate it."},{"owner":{"display_name":"user4910279"},"score":0,"creation_date":1613772852,"post_id":63238653,"comment_id":117189392,"body_markdown":"@EthanMcCue, Updated my answer.","body":"@EthanMcCue, Updated my answer."}],"tags":[],"owner":{"display_name":"user4910279"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613771775,"creation_date":1596500821,"answer_id":63238653,"question_id":19429667,"body_markdown":"You can define generic [Fixed-point combinator](https://en.wikipedia.org/wiki/Fixed-point_combinator) like this.\r\n\r\n    public static &lt;T, R&gt; Function&lt;T, R&gt; fixedPointCombinator(Function&lt;Function&lt;T, R&gt;, Function&lt;T, R&gt;&gt; f) {\r\n        return new Function&lt;T, R&gt;() {\r\n            @Override\r\n            public R apply(T n) {\r\n                return f.apply(this).apply(n);\r\n            }\r\n        };\r\n    }\r\n\r\nAnd\r\n\r\n    Function&lt;Function&lt;Integer, Double&gt;, Function&lt;Integer, Double&gt;&gt; fact =\r\n        self -&gt; n -&gt; n == 0 ? 1 : n * self.apply(n - 1);\r\n\r\n    System.out.println(fixedPointCombinator(fact).apply(10));\r\n    \r\noutput:\r\n    \r\n    3628800.0\r\n","title":"Implement recursive lambda function using Java 8","body":"<p>You can define generic <a href=\"https://en.wikipedia.org/wiki/Fixed-point_combinator\" rel=\"nofollow noreferrer\">Fixed-point combinator</a> like this.</p>\n<pre><code>public static &lt;T, R&gt; Function&lt;T, R&gt; fixedPointCombinator(Function&lt;Function&lt;T, R&gt;, Function&lt;T, R&gt;&gt; f) {\n    return new Function&lt;T, R&gt;() {\n        @Override\n        public R apply(T n) {\n            return f.apply(this).apply(n);\n        }\n    };\n}\n</code></pre>\n<p>And</p>\n<pre><code>Function&lt;Function&lt;Integer, Double&gt;, Function&lt;Integer, Double&gt;&gt; fact =\n    self -&gt; n -&gt; n == 0 ? 1 : n * self.apply(n - 1);\n\nSystem.out.println(fixedPointCombinator(fact).apply(10));\n</code></pre>\n<p>output:</p>\n<pre><code>3628800.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29392170,"reputation":1,"user_id":22520256,"display_name":"user22520256"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694144751,"creation_date":1694144751,"answer_id":77064018,"question_id":19429667,"body_markdown":"A fixpoint operator Fix : ((S-&gt;T)-&gt;S-&gt;T)-&gt;S-&gt;T is an operator s.t. Fix(f) = f(Fix(f)).  Here is a Java version using typecast from f : (S-&gt;T)-&gt;S-T into Fix(f) :S-&gt;T by a default method trick. \r\n\r\n    @FunctionalInterface\r\n    public static interface Fix&lt;S, T&gt; extends Function&lt;S, T&gt; {\r\n        @Override\r\n        public default T apply(S val) {\r\n            return impl(this).apply(val);\r\n        }\r\n\r\n        public Function&lt;S,T&gt; impl(Function&lt;S, T&gt; rec);\r\n    }\r\n\r\n    public static void test() {\r\n        Fix&lt;Integer, Integer&gt; fac = rec -&gt; val -&gt; val == 0 ? 1 : val * rec.apply(val - 1);\r\n        System.out.println(fac.apply(10));\r\n    }","title":"Implement recursive lambda function using Java 8","body":"<p>A fixpoint operator Fix : ((S-&gt;T)-&gt;S-&gt;T)-&gt;S-&gt;T is an operator s.t. Fix(f) = f(Fix(f)).  Here is a Java version using typecast from f : (S-&gt;T)-&gt;S-T into Fix(f) :S-&gt;T by a default method trick.</p>\n<pre><code>@FunctionalInterface\npublic static interface Fix&lt;S, T&gt; extends Function&lt;S, T&gt; {\n    @Override\n    public default T apply(S val) {\n        return impl(this).apply(val);\n    }\n\n    public Function&lt;S,T&gt; impl(Function&lt;S, T&gt; rec);\n}\n\npublic static void test() {\n    Fix&lt;Integer, Integer&gt; fac = rec -&gt; val -&gt; val == 0 ? 1 : val * rec.apply(val - 1);\n    System.out.println(fac.apply(10));\n}\n</code></pre>\n"}],"owner":{"account_id":3169515,"reputation":797,"user_id":2678835,"display_name":"user2678835"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43164,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"answer_count":26,"score":71,"last_activity_date":1694144751,"creation_date":1382020482,"question_id":19429667,"body_markdown":"Java 8 introduced lambda functions and I want to implement something like factorial:\r\n   \r\n\r\n     IntToDoubleFunction fact = x -&gt; x == 0 ? 1 : x * fact.applyAsDouble(x-1);\r\n\r\nCompilation returns\r\n  \r\n\r\n      error: variable fact might not have been initialized\r\n\r\n\r\nHow can I reference function itself. Class is anonymous but instance exists: It is called `fact`.","title":"Implement recursive lambda function using Java 8","body":"<p>Java 8 introduced lambda functions and I want to implement something like factorial:</p>\n\n<pre><code> IntToDoubleFunction fact = x -&gt; x == 0 ? 1 : x * fact.applyAsDouble(x-1);\n</code></pre>\n\n<p>Compilation returns</p>\n\n<pre><code>  error: variable fact might not have been initialized\n</code></pre>\n\n<p>How can I reference function itself. Class is anonymous but instance exists: It is called <code>fact</code>.</p>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":28376383,"reputation":23,"user_id":22519622,"display_name":"Samuel Han"},"score":0,"creation_date":1694134627,"post_id":77063561,"comment_id":135854895,"body_markdown":"@GillesQu&#233;not I added Java, but I won&#39;t do that next time, thank you.","body":"@GillesQu&#233;not I added Java, but I won&#39;t do that next time, thank you."},{"owner":{"account_id":1891393,"reputation":9477,"user_id":1709364,"display_name":"jasonharper"},"score":2,"creation_date":1694134731,"post_id":77063561,"comment_id":135854904,"body_markdown":"If the loop body contained a `continue`, that would skip an increment that&#39;s at the bottom of the loop (possibly resulting in an infinite loop), but wouldn&#39;t skip an increment that&#39;s in the third `for` clause.","body":"If the loop body contained a <code>continue</code>, that would skip an increment that&#39;s at the bottom of the loop (possibly resulting in an infinite loop), but wouldn&#39;t skip an increment that&#39;s in the third <code>for</code> clause."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1694138254,"post_id":77063561,"comment_id":135855200,"body_markdown":"By the way, *statement 2*, if present, must be resolvable to a single `boolean`.  Java allows *statement 1* and / or *statement 3* to be coma separated lists of statements.","body":"By the way, <i>statement 2</i>, if present, must be resolvable to a single <code>boolean</code>.  Java allows <i>statement 1</i> and / or <i>statement 3</i> to be coma separated lists of statements."}],"answers":[{"tags":[],"owner":{"account_id":465323,"reputation":14809,"user_id":869330,"accept_rate":82,"display_name":"Naetmul"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694135132,"creation_date":1694135132,"answer_id":77063589,"question_id":77063561,"body_markdown":"Just comparing the order of statement 1, statement 3, and body_last_statement...\r\n\r\n```\r\nfor (statement 1; statement 2; statement 3) {\r\n    &lt;body&gt;\r\n    body_last_statement;\r\n}\r\n```\r\nperforms\r\n`statement 1 ‚Üí body_last_statement ‚Üí statement 3 ‚Üí body_last_statement ‚Üí ... ‚Üí body_last_statement ‚Üí statement 3`\r\n\r\n```\r\nfor (statement 1; statement 2; body_last_statement) {\r\n    &lt;body&gt;\r\n    statement 3;\r\n}\r\n```\r\nperforms\r\n`statement 1 ‚Üí statement 3 ‚Üí body_last_statement ‚Üí ... ‚Üí statement 3 ‚Üí body_last_statement`\r\n\r\nSo in the code like yours\r\n```\r\nfor (int i = 0; i &lt; 4; ++i) {\r\n    System.out.println(i);\r\n}\r\n````\r\nprints **0** first.\r\n\r\n```\r\nfor (int i = 0; i &lt; 4; System.out.println(&quot;abc&#39;s&quot;)) {\r\n    ++i;\r\n}\r\n```\r\nprints **1** first.\r\n\r\nAlso, if `&lt;body&gt;` has some `if (...) continue;` then, it can fall into an infinite loop like\r\n```\r\n// Print only even numbers\r\nfor (i=1; i&lt;=10; System.out.println(i)) {\r\n    // Skip printing odd numbers\r\n    if (i % 2 == 1)\r\n        continue;\r\n    i++;\r\n}\r\n```\r\nwhich prints\r\n```\r\n2\r\n2\r\n2\r\n2\r\n2\r\n2\r\n2\r\n(forever)\r\n```","title":"Difference between a statement as third statement in for loop vs. in body","body":"<p>Just comparing the order of statement 1, statement 3, and body_last_statement...</p>\n<pre><code>for (statement 1; statement 2; statement 3) {\n    &lt;body&gt;\n    body_last_statement;\n}\n</code></pre>\n<p>performs\n<code>statement 1 ‚Üí body_last_statement ‚Üí statement 3 ‚Üí body_last_statement ‚Üí ... ‚Üí body_last_statement ‚Üí statement 3</code></p>\n<pre><code>for (statement 1; statement 2; body_last_statement) {\n    &lt;body&gt;\n    statement 3;\n}\n</code></pre>\n<p>performs\n<code>statement 1 ‚Üí statement 3 ‚Üí body_last_statement ‚Üí ... ‚Üí statement 3 ‚Üí body_last_statement</code></p>\n<p>So in the code like yours</p>\n<pre><code>for (int i = 0; i &lt; 4; ++i) {\n    System.out.println(i);\n}\n</code></pre>\n<p>prints <strong>0</strong> first.</p>\n<pre><code>for (int i = 0; i &lt; 4; System.out.println(&quot;abc's&quot;)) {\n    ++i;\n}\n</code></pre>\n<p>prints <strong>1</strong> first.</p>\n<p>Also, if <code>&lt;body&gt;</code> has some <code>if (...) continue;</code> then, it can fall into an infinite loop like</p>\n<pre><code>// Print only even numbers\nfor (i=1; i&lt;=10; System.out.println(i)) {\n    // Skip printing odd numbers\n    if (i % 2 == 1)\n        continue;\n    i++;\n}\n</code></pre>\n<p>which prints</p>\n<pre><code>2\n2\n2\n2\n2\n2\n2\n(forever)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694144114,"creation_date":1694143645,"answer_id":77063965,"question_id":77063561,"body_markdown":"&gt; _&quot;Difference between a statement as third statement in for loop vs. in body ..._\r\n&gt;\r\n&gt; _... What&#39;s the difference between exchanging `statement 3` for the last statement in the body, or with any statement such that order can be permuted? (The last part is a bit of a tautology, but I don&#39;t mean it in that way.) ...&quot;_\r\n\r\nThere is not much of a restriction, it&#39;s just a way to organize the code.  \r\nHere is the _Java_ tutorial.\r\n\r\n_[The for Statement (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)_.\r\n\r\n&gt; ```java\r\n&gt; for (initialization; termination; increment) {\r\n&gt;     statement(s)\r\n&gt; }\r\n&gt; ```\r\n&gt;\r\n&gt; - The _initialization_ expression initializes the loop; it&#39;s executed once, as the loop begins.\r\n&gt; - When the _termination_ expression evaluates to false, the loop terminates.\r\n&gt; - The _increment_ expression is invoked after each iteration through the loop; it is perfectly acceptable for this expression to increment or decrement a value.\r\n\r\nAnd, here is an excerpt from _Wikipedia_.\r\n\r\n_[Wikipedia &amp;ndash; For loop &amp;ndash; FOR](https://en.wikipedia.org/wiki/For_loop#FOR_)_.\r\n\r\n&gt; _Another form ... requires 3 parts: the [initialization](https://en.wikipedia.org/wiki/Declaration_(computer_programming)) ([loop variant](https://en.wikipedia.org/wiki/Loop_variant)), the [condition](https://en.wikipedia.org/wiki/Boolean_algebra), and the advancement to the next iteration. All these three parts are optional.&lt;sup&gt;[[1]](https://en.wikipedia.org/wiki/For_loop#cite_note-1)&lt;/sup&gt; This type of &quot;semicolon loops&quot; came from [B programming language](https://en.wikipedia.org/wiki/B_(programming_language)) ..._\r\n\r\nThe _for-loop_ was created because of how often a loop required an accompanying value.\r\n\r\nThus, there is essentially no difference between the following two loops.\r\n\r\n```java\r\nfor (int i = 0; i &lt; 100; i++) {\r\n        \r\n}\r\n```\r\n\r\n```java\r\nint i = 0;\r\nwhile (i &lt; 100) {\r\n    i++;\r\n}\r\n```\r\n\r\nYou can even add the _i_ statement, from your example.\r\n\r\n```java\r\nfor (int i = 0; i &lt; 4; ++i, System.out.println(&quot;abc&#39;s&quot;)) {\r\n\r\n}\r\n```\r\n\r\n&gt; _&quot;... I imagine readability would be the biggest factor, but is there an actual difference in how the machine runs? I&#39;m new to coding. This is Java, but I don&#39;t mind generalized answers to any language. ...&quot;_\r\n\r\nWith most coding languages, readability is a major role, _Java_ is one of them, _[Objective-C](https://en.wikipedia.org/wiki/Objective-C)_ is another.  \r\nYou&#39;ll find most of the syntax is based off of readability; _Java_ expects their code to read similar to a sentence.\r\n\r\nThere shouldn&#39;t be much of a difference in how the code performs, the compiler will have ultimately converted any _for-loop_ and _while-loop_ code into similar _machine-code_.\r\n\r\nIf you&#39;re interested in this aspect of _Java_, I recommend reviewing _[Java: The Complete Reference, 12th Edition](https://www.oreilly.com/library/view/java-the-complete/9781260463422/)_.  \r\nThis series was published by _Oracle_ for several years; I imagine they endorse it.\r\n\r\n&gt; _&quot;... can I think of the third statement in the for loop as the &quot;last&quot; statement in the body, or is there a more inherent difference?&quot;_\r\n\r\nIt would need to be the last statement, as to not disrupt any mutual access.","title":"Difference between a statement as third statement in for loop vs. in body","body":"<blockquote>\n<p><em>&quot;Difference between a statement as third statement in for loop vs. in body ...</em></p>\n<p><em>... What's the difference between exchanging <code>statement 3</code> for the last statement in the body, or with any statement such that order can be permuted? (The last part is a bit of a tautology, but I don't mean it in that way.) ...&quot;</em></p>\n</blockquote>\n<p>There is not much of a restriction, it's just a way to organize the code.<br />\nHere is the <em>Java</em> tutorial.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html\" rel=\"nofollow noreferrer\">The for Statement (The Java‚Ñ¢ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em>.</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>for (initialization; termination; increment) {\n    statement(s)\n}\n</code></pre>\n<ul>\n<li>The <em>initialization</em> expression initializes the loop; it's executed once, as the loop begins.</li>\n<li>When the <em>termination</em> expression evaluates to false, the loop terminates.</li>\n<li>The <em>increment</em> expression is invoked after each iteration through the loop; it is perfectly acceptable for this expression to increment or decrement a value.</li>\n</ul>\n</blockquote>\n<p>And, here is an excerpt from <em>Wikipedia</em>.</p>\n<p><em><a href=\"https://en.wikipedia.org/wiki/For_loop#FOR_\" rel=\"nofollow noreferrer\">Wikipedia ‚Äì For loop ‚Äì FOR</a></em>.</p>\n<blockquote>\n<p><em>Another form ... requires 3 parts: the <a href=\"https://en.wikipedia.org/wiki/Declaration_(computer_programming)\" rel=\"nofollow noreferrer\">initialization</a> (<a href=\"https://en.wikipedia.org/wiki/Loop_variant\" rel=\"nofollow noreferrer\">loop variant</a>), the <a href=\"https://en.wikipedia.org/wiki/Boolean_algebra\" rel=\"nofollow noreferrer\">condition</a>, and the advancement to the next iteration. All these three parts are optional.<sup><a href=\"https://en.wikipedia.org/wiki/For_loop#cite_note-1\" rel=\"nofollow noreferrer\">[1]</a></sup> This type of &quot;semicolon loops&quot; came from <a href=\"https://en.wikipedia.org/wiki/B_(programming_language)\" rel=\"nofollow noreferrer\">B programming language</a> ...</em></p>\n</blockquote>\n<p>The <em>for-loop</em> was created because of how often a loop required an accompanying value.</p>\n<p>Thus, there is essentially no difference between the following two loops.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; 100; i++) {\n        \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>int i = 0;\nwhile (i &lt; 100) {\n    i++;\n}\n</code></pre>\n<p>You can even add the <em>i</em> statement, from your example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; 4; ++i, System.out.println(&quot;abc's&quot;)) {\n\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;... I imagine readability would be the biggest factor, but is there an actual difference in how the machine runs? I'm new to coding. This is Java, but I don't mind generalized answers to any language. ...&quot;</em></p>\n</blockquote>\n<p>With most coding languages, readability is a major role, <em>Java</em> is one of them, <em><a href=\"https://en.wikipedia.org/wiki/Objective-C\" rel=\"nofollow noreferrer\">Objective-C</a></em> is another.<br />\nYou'll find most of the syntax is based off of readability; <em>Java</em> expects their code to read similar to a sentence.</p>\n<p>There shouldn't be much of a difference in how the code performs, the compiler will have ultimately converted any <em>for-loop</em> and <em>while-loop</em> code into similar <em>machine-code</em>.</p>\n<p>If you're interested in this aspect of <em>Java</em>, I recommend reviewing <em><a href=\"https://www.oreilly.com/library/view/java-the-complete/9781260463422/\" rel=\"nofollow noreferrer\">Java: The Complete Reference, 12th Edition</a></em>.<br />\nThis series was published by <em>Oracle</em> for several years; I imagine they endorse it.</p>\n<blockquote>\n<p><em>&quot;... can I think of the third statement in the for loop as the &quot;last&quot; statement in the body, or is there a more inherent difference?&quot;</em></p>\n</blockquote>\n<p>It would need to be the last statement, as to not disrupt any mutual access.</p>\n"}],"owner":{"account_id":28376383,"reputation":23,"user_id":22519622,"display_name":"Samuel Han"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77063965,"answer_count":2,"score":1,"last_activity_date":1694144114,"creation_date":1694134405,"question_id":77063561,"body_markdown":"For the for loop, I learned that it&#39;s of the form\r\n```\r\n\tfor (statement 1; statement 2; statement 3) {\r\n\t\t&lt;body&gt;\r\n\t}\r\n```\r\nWhat&#39;s the difference between exchanging `statement 3` for the last statement in the body, or with any statement such that order can be permuted? (The last part is a bit of a tautology, but I don&#39;t mean it in that way.) I imagine readability would be the biggest factor, but is there an actual difference in how the machine runs? I&#39;m new to coding. This is Java, but I don&#39;t mind generalized answers to any language.\r\n\r\nI tried\r\n```\r\n\tfor (int i = 0; i &lt; 4; ++i) {\r\n\t\tSystem.out.println(&quot;abc&#39;s&quot;);\r\n\t}\r\n```\r\nand\r\n```\r\n\tfor (int i = 0; i &lt; 4; System.out.println(&quot;abc&#39;s&quot;)) {\r\n\t\t++i;\r\n\t}\r\n```\r\nand both codes printed out 4 lines of &quot;`abc&#39;s`&quot;. I imagine that if some lines in the body did something to the value of `i`, then I wouldn&#39;t be able to switch the `++i` line with those lines, but can I think of the third statement in the for loop as the &quot;last&quot; statement in the body, or is there a more inherent difference?","title":"Difference between a statement as third statement in for loop vs. in body","body":"<p>For the for loop, I learned that it's of the form</p>\n<pre><code>    for (statement 1; statement 2; statement 3) {\n        &lt;body&gt;\n    }\n</code></pre>\n<p>What's the difference between exchanging <code>statement 3</code> for the last statement in the body, or with any statement such that order can be permuted? (The last part is a bit of a tautology, but I don't mean it in that way.) I imagine readability would be the biggest factor, but is there an actual difference in how the machine runs? I'm new to coding. This is Java, but I don't mind generalized answers to any language.</p>\n<p>I tried</p>\n<pre><code>    for (int i = 0; i &lt; 4; ++i) {\n        System.out.println(&quot;abc's&quot;);\n    }\n</code></pre>\n<p>and</p>\n<pre><code>    for (int i = 0; i &lt; 4; System.out.println(&quot;abc's&quot;)) {\n        ++i;\n    }\n</code></pre>\n<p>and both codes printed out 4 lines of &quot;<code>abc's</code>&quot;. I imagine that if some lines in the body did something to the value of <code>i</code>, then I wouldn't be able to switch the <code>++i</code> line with those lines, but can I think of the third statement in the for loop as the &quot;last&quot; statement in the body, or is there a more inherent difference?</p>\n"},{"tags":["java","jms","activemq-artemis"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1694096425,"post_id":77059760,"comment_id":135848844,"body_markdown":"You&#39;ve got two independent questions here - 1) How to get up-to-date message-count data and 2) How to consume messages from the middle or end of the queue. Please narrow down your question to a _single_ issue or it may be closed. Feel free to open another question.","body":"You&#39;ve got two independent questions here - 1) How to get up-to-date message-count data and 2) How to consume messages from the middle or end of the queue. Please narrow down your question to a <i>single</i> issue or it may be closed. Feel free to open another question."},{"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"score":0,"creation_date":1694122970,"post_id":77059760,"comment_id":135853745,"body_markdown":"Thanks for the hints. I have updated my question","body":"Thanks for the hints. I have updated my question"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1694129623,"post_id":77059760,"comment_id":135854455,"body_markdown":"You changed the title of the question but not the _body_ of the question. You&#39;re still asking 2 independent questions.","body":"You changed the title of the question but not the <i>body</i> of the question. You&#39;re still asking 2 independent questions."},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1694142553,"post_id":77059760,"comment_id":135855481,"body_markdown":"I updated your question to reflect the change you made to the title.","body":"I updated your question to reflect the change you made to the title."},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1694178149,"post_id":77059760,"comment_id":135860936,"body_markdown":"Did you get this sorted?","body":"Did you get this sorted?"},{"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"score":0,"creation_date":1694365481,"post_id":77059760,"comment_id":135878568,"body_markdown":"Yes thank you. Helped a lot","body":"Yes thank you. Helped a lot"}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694144071,"creation_date":1694143513,"answer_id":77063957,"question_id":77059760,"body_markdown":"The fundamental semantics of a JMS queue is first-in-first-out (i.e. FIFO). In other words, the broker must dispatch messages to consumers in the order in which they were added to the queue. However, there are two basic ways to get around this.\r\n\r\n 1. Message Priority\r\n 2. Message Selector\r\n\r\nA JMS message can have a **priority** from 0 to 9. The priority is set by the producer who sent the message. Messages with a higher priority may be dispatched by the broker to consumers before messages with a lower priority.\r\n\r\nA JMS consumer can specify a message **selector**. Only messages that match the selector will be dispatched to the consumer. These messages will be dispatched in FIFO order relative to each other, but they may jump ahead of other messages that would otherwise be dispatched before them. Selectors only work on the headers or properties of the message so the consumer must know something about the message(s) it wants to consume. \r\n\r\nFor example, if a producer sends 100 messages and each message has a property `myProperty` whose value is 1 to 100 in order and the consumer wants to consume the *last* message on the queue then it would use the selector `myProperty = 100`.\r\n\r\nSelector syntax is based on a subset of the SQL92 conditional expression syntax. You can find more information about selectors and how they work in the [API docs][1].\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/messaging/3.0/apidocs/jakarta/jms/message","title":"How to consume JMS messages from the middle or end of the queue?","body":"<p>The fundamental semantics of a JMS queue is first-in-first-out (i.e. FIFO). In other words, the broker must dispatch messages to consumers in the order in which they were added to the queue. However, there are two basic ways to get around this.</p>\n<ol>\n<li>Message Priority</li>\n<li>Message Selector</li>\n</ol>\n<p>A JMS message can have a <strong>priority</strong> from 0 to 9. The priority is set by the producer who sent the message. Messages with a higher priority may be dispatched by the broker to consumers before messages with a lower priority.</p>\n<p>A JMS consumer can specify a message <strong>selector</strong>. Only messages that match the selector will be dispatched to the consumer. These messages will be dispatched in FIFO order relative to each other, but they may jump ahead of other messages that would otherwise be dispatched before them. Selectors only work on the headers or properties of the message so the consumer must know something about the message(s) it wants to consume.</p>\n<p>For example, if a producer sends 100 messages and each message has a property <code>myProperty</code> whose value is 1 to 100 in order and the consumer wants to consume the <em>last</em> message on the queue then it would use the selector <code>myProperty = 100</code>.</p>\n<p>Selector syntax is based on a subset of the SQL92 conditional expression syntax. You can find more information about selectors and how they work in the <a href=\"https://jakarta.ee/specifications/messaging/3.0/apidocs/jakarta/jms/message\" rel=\"nofollow noreferrer\">API docs</a>.</p>\n"}],"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77063957,"answer_count":1,"score":0,"last_activity_date":1694144114,"creation_date":1694090957,"question_id":77059760,"body_markdown":"I have a code that hangs a reader on a queue and receives a message when the method completes. I want to receive messages not from the beginning of the queue but from the end or from the middle\r\n\r\n```java\r\nprivate void getMessage() throws JMSException, NamingException {\r\n    Queue queue = (Queue) initialContext.lookup(&quot;dynamicQueues/&quot; + &quot;TestQueue&quot;);\r\n    if (messageConsumer == null){\r\n        messageConsumer = queueSession.createConsumer(queue);\r\n    }\r\n    TextMessage message = (TextMessage) messageConsumer.receive();\r\n    String msgBody = ((TextMessage) message).getText();\r\n    System.out.println(msgBody);        \r\n}\r\n```","title":"How to consume JMS messages from the middle or end of the queue?","body":"<p>I have a code that hangs a reader on a queue and receives a message when the method completes. I want to receive messages not from the beginning of the queue but from the end or from the middle</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void getMessage() throws JMSException, NamingException {\n    Queue queue = (Queue) initialContext.lookup(&quot;dynamicQueues/&quot; + &quot;TestQueue&quot;);\n    if (messageConsumer == null){\n        messageConsumer = queueSession.createConsumer(queue);\n    }\n    TextMessage message = (TextMessage) messageConsumer.receive();\n    String msgBody = ((TextMessage) message).getText();\n    System.out.println(msgBody);        \n}\n</code></pre>\n"},{"tags":["java","zip"],"answers":[{"comments":[{"owner":{"account_id":246295,"reputation":11636,"user_id":520359,"accept_rate":87,"display_name":"Lachezar Balev"},"score":0,"creation_date":1294931413,"post_id":4681540,"comment_id":5161555,"body_markdown":"The zip file remains open and locked that way... How to close it?","body":"The zip file remains open and locked that way... How to close it?"},{"owner":{"account_id":37250,"reputation":12091,"user_id":106463,"display_name":"Mihai Toader"},"score":0,"creation_date":1294931637,"post_id":4681540,"comment_id":5161601,"body_markdown":"@lucho added some code to close the file when the zip stream is empty. take a look.","body":"@lucho added some code to close the file when the zip stream is empty. take a look."}],"tags":[],"owner":{"account_id":37250,"reputation":12091,"user_id":106463,"display_name":"Mihai Toader"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1294931613,"creation_date":1294931311,"answer_id":4681540,"question_id":4681459,"body_markdown":"You should track if you added stuff the zip stream and close it only when things were added:\r\n\r\n    ZipOutputStream zos = null; \r\n    OutputStream file = new FileOutputStream(&quot;...&quot;)\r\n    int itemsAdded=0;\r\n    try\r\n    {\r\n        zos = new ZipOutputStream(file);\r\n        //\r\n        //..\r\n        // itemsAdded++; \r\n    }\r\n    finally\r\n    {\r\n        if ( itemsAdded &gt; 0 ) {\r\n             zos.close();\r\n        } else {\r\n             file.close();\r\n        }\r\n    }\r\n\r\nof if you don&#39;t need the count just use a `boolean` flag.","title":"Closing ZipOutputStream","body":"<p>You should track if you added stuff the zip stream and close it only when things were added:</p>\n\n<pre><code>ZipOutputStream zos = null; \nOutputStream file = new FileOutputStream(\"...\")\nint itemsAdded=0;\ntry\n{\n    zos = new ZipOutputStream(file);\n    //\n    //..\n    // itemsAdded++; \n}\nfinally\n{\n    if ( itemsAdded &gt; 0 ) {\n         zos.close();\n    } else {\n         file.close();\n    }\n}\n</code></pre>\n\n<p>of if you don't need the count just use a <code>boolean</code> flag.</p>\n"},{"comments":[{"owner":{"account_id":246295,"reputation":11636,"user_id":520359,"accept_rate":87,"display_name":"Lachezar Balev"},"score":0,"creation_date":1294932107,"post_id":4681595,"comment_id":5161723,"body_markdown":"Thanks for your help, this should be the truth :-)","body":"Thanks for your help, this should be the truth :-)"},{"owner":{"account_id":140373,"reputation":2438,"user_id":346629,"accept_rate":55,"display_name":"Daniel Winterstein"},"score":8,"creation_date":1328638224,"post_id":4681595,"comment_id":11551690,"body_markdown":"This solution is fine, but the reasoning is incorrect: You can close either stream. Closing a wrapper stream like ZipOutputStream will also close the lower-level FileOutputStream.","body":"This solution is fine, but the reasoning is incorrect: You can close either stream. Closing a wrapper stream like ZipOutputStream will also close the lower-level FileOutputStream."},{"owner":{"account_id":990530,"reputation":13072,"user_id":1007991,"accept_rate":82,"display_name":"Renato"},"score":4,"creation_date":1337252415,"post_id":4681595,"comment_id":13784655,"body_markdown":"Notice that Java 7 has introduced a [try-with-resource](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) block which makes this kind of code much cleaner!!","body":"Notice that Java 7 has introduced a <a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resource</a> block which makes this kind of code much cleaner!!"}],"tags":[],"owner":{"account_id":661761,"reputation":2664,"user_id":474786,"display_name":"Anon"},"comment_count":3,"down_vote_count":1,"up_vote_count":9,"is_accepted":true,"score":8,"last_activity_date":1294932119,"creation_date":1294931669,"answer_id":4681595,"question_id":4681459,"body_markdown":"You should close the `FileOutputStream`, not the `ZipOutputStream`, because the former is what actually consumes system resources.\r\n\r\n    File zipFile = new File(&quot;/tmp/example.zip&quot;);\r\n    FileOutputStream fos = null;\r\n    try\r\n    {\r\n       fos = new FileOutputStream(zipFile);\r\n       ZipOutputStream zos = new ZipOutputStream(fos);\r\n    \r\n       // ...\r\n    \r\n       zos.close();\r\n    }\r\n    catch (IOException ex)\r\n    {\r\n       // log/report exception, then delete the invalid file\r\n       IOUtils.closeQuietly(fos);\r\n       zipFile.delete();\r\n    }\r\n    finally\r\n    {\r\n       IOUtils.closeQuietly(fos);\r\n    }\r\n\r\n \r\nThe `IOUtils` class is found in [Jakarta Commons IO][1]. Using it means that you don&#39;t have to deal with the possible-but-rarely-useful `IOException` that can be thrown by `close()`.\r\n\r\n\r\n  [1]: http://commons.apache.org/io/","title":"Closing ZipOutputStream","body":"<p>You should close the <code>FileOutputStream</code>, not the <code>ZipOutputStream</code>, because the former is what actually consumes system resources.</p>\n\n<pre><code>File zipFile = new File(\"/tmp/example.zip\");\nFileOutputStream fos = null;\ntry\n{\n   fos = new FileOutputStream(zipFile);\n   ZipOutputStream zos = new ZipOutputStream(fos);\n\n   // ...\n\n   zos.close();\n}\ncatch (IOException ex)\n{\n   // log/report exception, then delete the invalid file\n   IOUtils.closeQuietly(fos);\n   zipFile.delete();\n}\nfinally\n{\n   IOUtils.closeQuietly(fos);\n}\n</code></pre>\n\n<p>The <code>IOUtils</code> class is found in <a href=\"http://commons.apache.org/io/\" rel=\"noreferrer\">Jakarta Commons IO</a>. Using it means that you don't have to deal with the possible-but-rarely-useful <code>IOException</code> that can be thrown by <code>close()</code>.</p>\n"},{"tags":[],"owner":{"account_id":478763,"reputation":1187,"user_id":891055,"accept_rate":77,"display_name":"vincentlcy"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1337271505,"creation_date":1337224423,"answer_id":10629360,"question_id":4681459,"body_markdown":"Instead of closing the stream only when things are added, what I did is a condition check to see if there was anything to zip, before running the zip code. This helped me to simplify the process and I think can be used in general to handle the &quot;ZIP file must have at least one entry&quot; problem. True that closing `zos` may throw other exceptions, but that is rare.\r\n\r\nI think it is problem with Java, that doesn&#39;t handle the case when there are no files to zip.\r\n\r\ni.e:\r\n\r\n\tint itemsToAdd=0;\r\n\t//....\r\n\t\r\n\tif ( itemsToAdd &gt; 0 ) {\r\n\t\r\n\t\tZipOutputStream zos = new ZipOutputStream(file);\r\n\t\ttry {\r\n\t\t\t//add files to zip\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tzos.close();\r\n\t\t}\r\n\t}","title":"Closing ZipOutputStream","body":"<p>Instead of closing the stream only when things are added, what I did is a condition check to see if there was anything to zip, before running the zip code. This helped me to simplify the process and I think can be used in general to handle the \"ZIP file must have at least one entry\" problem. True that closing <code>zos</code> may throw other exceptions, but that is rare.</p>\n\n<p>I think it is problem with Java, that doesn't handle the case when there are no files to zip.</p>\n\n<p>i.e:</p>\n\n<pre><code>int itemsToAdd=0;\n//....\n\nif ( itemsToAdd &gt; 0 ) {\n\n    ZipOutputStream zos = new ZipOutputStream(file);\n    try {\n        //add files to zip\n    }\n    finally {\n        zos.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16838507,"reputation":1504,"user_id":12174440,"display_name":"turong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591085112,"creation_date":1591085112,"answer_id":62147494,"question_id":4681459,"body_markdown":"If you use Java 7 or above, you can use try-with-resources for better readability\r\n\r\nFor example:\r\n\r\n    try (ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(&quot;...&quot;))) {\r\n        // do something with zos\r\n    }","title":"Closing ZipOutputStream","body":"<p>If you use Java 7 or above, you can use try-with-resources for better readability</p>\n\n<p>For example:</p>\n\n<pre><code>try (ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(\"...\"))) {\n    // do something with zos\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10289113,"reputation":31,"user_id":7591344,"display_name":"Felicity Wang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694144070,"creation_date":1694144070,"answer_id":77063986,"question_id":4681459,"body_markdown":"Using Java 7 or above, **just try-with-resource would be enough to close ZipOutputStream**, and there is no need to call close() or closeEntry() methods to flush the buffer data and close the stream.\r\n\r\n\r\nChecked the code of ZipOutputStream::close(), it would call finish(), and inside the finish method, there is a check as following, which means that the closeEntry would be called automatically when the stream closed.\r\n\r\n    public void finish() throws IOException {\r\n    ensureOpen();\r\n    if (finished) {\r\n        return;\r\n    }\r\n    if (current != null) {\r\n        closeEntry();\r\n    }\r\n    // write central directory\r\n    long off = written;\r\n    for (XEntry xentry : xentries)\r\n        writeCEN(xentry);\r\n    writeEND(off, written - off);\r\n    finished = true;\r\n}","title":"Closing ZipOutputStream","body":"<p>Using Java 7 or above, <strong>just try-with-resource would be enough to close ZipOutputStream</strong>, and there is no need to call close() or closeEntry() methods to flush the buffer data and close the stream.</p>\n<p>Checked the code of ZipOutputStream::close(), it would call finish(), and inside the finish method, there is a check as following, which means that the closeEntry would be called automatically when the stream closed.</p>\n<pre><code>public void finish() throws IOException {\nensureOpen();\nif (finished) {\n    return;\n}\nif (current != null) {\n    closeEntry();\n}\n// write central directory\nlong off = written;\nfor (XEntry xentry : xentries)\n    writeCEN(xentry);\nwriteEND(off, written - off);\nfinished = true;\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":246295,"reputation":11636,"user_id":520359,"accept_rate":87,"display_name":"Lachezar Balev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22676,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":4681595,"answer_count":5,"score":11,"last_activity_date":1694144070,"creation_date":1294930893,"question_id":4681459,"body_markdown":"I&#39;m a bit confused. I know that an empty zip is not legal. But what about this sample snippet:\r\n\r\n    ZipOutputStream zos = null; \r\n    try\r\n    {\r\n        zos = new ZipOutputStream(new FileOutputStream(&quot;...&quot;));\r\n        //\r\n        //..\r\n        //\r\n    }\r\n    finally\r\n    {\r\n        zos.close();\r\n    }\r\n\r\nIf no zip entries had been added for some reason (possibly exceptional situation) then the following exception will be thrown on close attempt:\r\n\r\n    Exception in thread &quot;main&quot; java.util.zip.ZipException: ZIP file must have at least one entry\r\n    \tat java.util.zip.ZipOutputStream.finish(ZipOutputStream.java:304)\r\n    \tat java.util.zip.DeflaterOutputStream.close(DeflaterOutputStream.java:146)\r\n    \tat java.util.zip.ZipOutputStream.close(ZipOutputStream.java:321)\r\n\r\nIn this situation what would be the cleanest way to close the stream?\r\n\r\nThanks...\r\n\r\n","title":"Closing ZipOutputStream","body":"<p>I'm a bit confused. I know that an empty zip is not legal. But what about this sample snippet:</p>\n\n<pre><code>ZipOutputStream zos = null; \ntry\n{\n    zos = new ZipOutputStream(new FileOutputStream(\"...\"));\n    //\n    //..\n    //\n}\nfinally\n{\n    zos.close();\n}\n</code></pre>\n\n<p>If no zip entries had been added for some reason (possibly exceptional situation) then the following exception will be thrown on close attempt:</p>\n\n<pre><code>Exception in thread \"main\" java.util.zip.ZipException: ZIP file must have at least one entry\n    at java.util.zip.ZipOutputStream.finish(ZipOutputStream.java:304)\n    at java.util.zip.DeflaterOutputStream.close(DeflaterOutputStream.java:146)\n    at java.util.zip.ZipOutputStream.close(ZipOutputStream.java:321)\n</code></pre>\n\n<p>In this situation what would be the cleanest way to close the stream?</p>\n\n<p>Thanks...</p>\n"},{"tags":["java","swing","jscrollpane"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693971125,"post_id":77048835,"comment_id":135828499,"body_markdown":"[How to Use Scroll Panes](https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">How to Use Scroll Panes</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1693971426,"post_id":77048835,"comment_id":135828519,"body_markdown":"[How to Decorate Components with the JLayer Class](https://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html\" rel=\"nofollow noreferrer\">How to Decorate Components with the JLayer Class</a>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1693971591,"post_id":77048835,"comment_id":135828536,"body_markdown":"It&#39;s somewhat complicated, as the button would need to be managed independently of its &quot;normal&quot; operations - maybe making use of compounding layouts - [for example](https://stackoverflow.com/questions/75368027/java-swing-trying-to-add-a-stationary-jbutton-over-a-jscrollpane/75378703#75378703)","body":"It&#39;s somewhat complicated, as the button would need to be managed independently of its &quot;normal&quot; operations - maybe making use of compounding layouts - <a href=\"https://stackoverflow.com/questions/75368027/java-swing-trying-to-add-a-stationary-jbutton-over-a-jscrollpane/75378703#75378703\">for example</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693978292,"post_id":77048835,"comment_id":135829055,"body_markdown":"@MadProgrammer you wrote (in your [comment](https://stackoverflow.com/questions/77048835/adding-a-non-scrolling-component-to-a-jscrollpane#comment135828536_77048835)): _the button would need to be managed_ What &quot;button&quot;? I see absolutely no mention of a &quot;button&quot; in the question. Am I missing something?","body":"@MadProgrammer you wrote (in your <a href=\"https://stackoverflow.com/questions/77048835/adding-a-non-scrolling-component-to-a-jscrollpane#comment135828536_77048835\">comment</a>): <i>the button would need to be managed</i> What &quot;button&quot;? I see absolutely no mention of a &quot;button&quot; in the question. Am I missing something?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1693979810,"post_id":77048835,"comment_id":135829222,"body_markdown":"@Abra Sorry - &quot;component&quot; - I just assumed they&#39;ed want to have a floating button like Android does - conceptually, it wouldn&#39;t matter, you could use any component in the same way","body":"@Abra Sorry - &quot;component&quot; - I just assumed they&#39;ed want to have a floating button like Android does - conceptually, it wouldn&#39;t matter, you could use any component in the same way"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1694009124,"post_id":77048835,"comment_id":135835057,"body_markdown":"Another idea could be a JLayeredPane. The scrollpane and the nonscrolling component are on different layers then. https://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html","body":"Another idea could be a JLayeredPane. The scrollpane and the nonscrolling component are on different layers then. <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1693976081,"post_id":77048955,"comment_id":135828862,"body_markdown":"And what if the first line isn&#39;t &quot;d&quot; :P. Honestly, at this point, I&#39;d just put the label outside the scrollpane on a combined container with it and be done with it","body":"And what if the first line isn&#39;t &quot;d&quot; :P. Honestly, at this point, I&#39;d just put the label outside the scrollpane on a combined container with it and be done with it"},{"owner":{"account_id":18870627,"reputation":49,"user_id":13765314,"display_name":"ix0rai"},"score":0,"creation_date":1694039592,"post_id":77048955,"comment_id":135840562,"body_markdown":"^ yes, this isn&#39;t exactly ideal since I&#39;m building an app that will have variable content in the text area. thank you though!","body":"^ yes, this isn&#39;t exactly ideal since I&#39;m building an app that will have variable content in the text area. thank you though!"}],"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693973009,"creation_date":1693973009,"answer_id":77048955,"question_id":77048835,"body_markdown":"I suggest using the &quot;column header&quot; (of the [JScrollPane][1]). In the below code, the &quot;column header&quot; is a `JPanel` with [BoxLayout][2].\r\n```java\r\nimport java.awt.BorderLayout;\r\nimport java.awt.EventQueue;\r\n\r\nimport javax.swing.Box;\r\nimport javax.swing.BoxLayout;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTextArea;\r\n\r\npublic class Main implements Runnable {\r\n\r\n    @Override\r\n    public void run() {\r\n        JFrame frame = new JFrame(&quot;Pinned&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        JTextArea txtAr = new JTextArea(&quot;&quot;&quot;\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                &quot;&quot;&quot;);\r\n        txtAr.setColumns(40);\r\n        JScrollPane scrollPane = new JScrollPane(txtAr);\r\n        JPanel hdr = new JPanel();\r\n        hdr.setBackground(txtAr.getBackground());\r\n        BoxLayout layout = new BoxLayout(hdr, BoxLayout.LINE_AXIS);\r\n        hdr.setLayout(layout);\r\n        JLabel first = new JLabel(&quot;d&quot;);\r\n        first.setFont(txtAr.getFont());\r\n        hdr.add(first);\r\n        hdr.add(Box.createHorizontalGlue());\r\n        JLabel last = new JLabel(&quot;this shouldn&#39;t scroll&quot;);\r\n        last.setFont(txtAr.getFont());\r\n        hdr.add(last);\r\n        scrollPane.setColumnHeaderView(hdr);\r\n        frame.add(scrollPane, BorderLayout.CENTER);\r\n        frame.pack();\r\n        frame.setLocationByPlatform(true);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        EventQueue.invokeLater(new GUI());\r\n    }\r\n}\r\n```\r\nHere is a screen capture:\r\n\r\n[![screen capture][3]][3]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/layout/box.html\r\n  [3]: https://i.stack.imgur.com/Suwj5.png","title":"adding a non-scrolling component to a JScrollPane","body":"<p>I suggest using the &quot;column header&quot; (of the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">JScrollPane</a>). In the below code, the &quot;column header&quot; is a <code>JPanel</code> with <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/box.html\" rel=\"nofollow noreferrer\">BoxLayout</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.BorderLayout;\nimport java.awt.EventQueue;\n\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextArea;\n\npublic class Main implements Runnable {\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Pinned&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        JTextArea txtAr = new JTextArea(&quot;&quot;&quot;\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                &quot;&quot;&quot;);\n        txtAr.setColumns(40);\n        JScrollPane scrollPane = new JScrollPane(txtAr);\n        JPanel hdr = new JPanel();\n        hdr.setBackground(txtAr.getBackground());\n        BoxLayout layout = new BoxLayout(hdr, BoxLayout.LINE_AXIS);\n        hdr.setLayout(layout);\n        JLabel first = new JLabel(&quot;d&quot;);\n        first.setFont(txtAr.getFont());\n        hdr.add(first);\n        hdr.add(Box.createHorizontalGlue());\n        JLabel last = new JLabel(&quot;this shouldn't scroll&quot;);\n        last.setFont(txtAr.getFont());\n        hdr.add(last);\n        scrollPane.setColumnHeaderView(hdr);\n        frame.add(scrollPane, BorderLayout.CENTER);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) throws Exception {\n        EventQueue.invokeLater(new GUI());\n    }\n}\n</code></pre>\n<p>Here is a screen capture:</p>\n<p><a href=\"https://i.stack.imgur.com/Suwj5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Suwj5.png\" alt=\"screen capture\" /></a></p>\n"},{"comments":[{"owner":{"account_id":18870627,"reputation":49,"user_id":13765314,"display_name":"ix0rai"},"score":0,"creation_date":1694039546,"post_id":77049440,"comment_id":135840558,"body_markdown":"this is perfect, thank you so much!","body":"this is perfect, thank you so much!"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693981507,"creation_date":1693981507,"answer_id":77049440,"question_id":77048835,"body_markdown":"As a personal preference, I&#39;d probably use a compound layout, simular to [this example](https://stackoverflow.com/questions/75368027/java-swing-trying-to-add-a-stationary-jbutton-over-a-jscrollpane/75378703#75378703) as it gives you more control over the the component been rendered (ie much easier to deal with live components like buttons) and it&#39;s position.\r\n\r\nYou &quot;could&quot; make use of the `JLayer` API, for example...\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.EventQueue;\r\n    import java.awt.FontMetrics;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLayer;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JScrollBar;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTextArea;\r\n    import javax.swing.plaf.LayerUI;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        JFrame frame = new JFrame();\r\n                        frame.add(new TestPane());\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n                    } catch (IOException ex) {\r\n                        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() throws IOException {\r\n                FixedTextLayerUI layerUI = new FixedTextLayerUI();\r\n                layerUI.setText(&quot;this shouldn&#39;t scroll!&quot;);\r\n\r\n                JTextArea ta = new JTextArea(20, 40);\r\n                StringBuilder sb = new StringBuilder(1024);\r\n                // Bring your own content ;)\r\n                try (BufferedReader br = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(&quot;/resources/StarWarsNewHope.txt&quot;)))) {\r\n                    String text = null;\r\n                    while ((text = br.readLine()) != null) {\r\n                        sb.append(text);\r\n                        sb.append(System.lineSeparator());\r\n                    }\r\n                    ta.setText(sb.toString());\r\n                }\r\n                JLayer&lt;JComponent&gt; layer = new JLayer&lt;JComponent&gt;(new JScrollPane(ta), layerUI);\r\n                setLayout(new BorderLayout());\r\n                add(layer);\r\n            }\r\n\r\n        }\r\n\r\n        public class FixedTextLayerUI extends LayerUI&lt;JComponent&gt; {\r\n\r\n            private String text;\r\n\r\n            public void setText(String text) {\r\n                this.text = text;\r\n            }\r\n\r\n            public String getText() {\r\n                return text;\r\n            }\r\n\r\n            @Override\r\n            public void paint(Graphics g, JComponent c) {\r\n                super.paint(g, c);\r\n\r\n                Graphics2D g2 = (Graphics2D) g.create();\r\n\r\n                FontMetrics fm = g2.getFontMetrics();\r\n                int stringWidth = fm.stringWidth(getText());\r\n                int x = c.getWidth() - stringWidth - 8;\r\n                int y = fm.getHeight() + fm.getAscent() + 8;\r\n\r\n                if (c instanceof JLayer) {\r\n                    JLayer layer = (JLayer) c;\r\n                    if (layer.getView() instanceof JScrollPane) {\r\n                        JScrollPane scrollPane = (JScrollPane) layer.getView();\r\n                        JScrollBar scrollBar = scrollPane.getVerticalScrollBar();\r\n                        if (scrollBar.isVisible()) {\r\n                            x -= scrollBar.getWidth();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                g2.drawString(text, x, y);\r\n\r\n                g2.dispose();\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/A0Iv3.png\r\n\r\nSee [How to Decorate Components with the JLayer Class](https://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html) for more details.\r\n","title":"adding a non-scrolling component to a JScrollPane","body":"<p>As a personal preference, I'd probably use a compound layout, simular to <a href=\"https://stackoverflow.com/questions/75368027/java-swing-trying-to-add-a-stationary-jbutton-over-a-jscrollpane/75378703#75378703\">this example</a> as it gives you more control over the the component been rendered (ie much easier to deal with live components like buttons) and it's position.</p>\n<p>You &quot;could&quot; make use of the <code>JLayer</code> API, for example...</p>\n<p><a href=\"https://i.stack.imgur.com/A0Iv3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A0Iv3.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.EventQueue;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JLayer;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollBar;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextArea;\nimport javax.swing.plaf.LayerUI;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    JFrame frame = new JFrame();\n                    frame.add(new TestPane());\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n                } catch (IOException ex) {\n                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() throws IOException {\n            FixedTextLayerUI layerUI = new FixedTextLayerUI();\n            layerUI.setText(&quot;this shouldn't scroll!&quot;);\n\n            JTextArea ta = new JTextArea(20, 40);\n            StringBuilder sb = new StringBuilder(1024);\n            // Bring your own content ;)\n            try (BufferedReader br = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(&quot;/resources/StarWarsNewHope.txt&quot;)))) {\n                String text = null;\n                while ((text = br.readLine()) != null) {\n                    sb.append(text);\n                    sb.append(System.lineSeparator());\n                }\n                ta.setText(sb.toString());\n            }\n            JLayer&lt;JComponent&gt; layer = new JLayer&lt;JComponent&gt;(new JScrollPane(ta), layerUI);\n            setLayout(new BorderLayout());\n            add(layer);\n        }\n\n    }\n\n    public class FixedTextLayerUI extends LayerUI&lt;JComponent&gt; {\n\n        private String text;\n\n        public void setText(String text) {\n            this.text = text;\n        }\n\n        public String getText() {\n            return text;\n        }\n\n        @Override\n        public void paint(Graphics g, JComponent c) {\n            super.paint(g, c);\n\n            Graphics2D g2 = (Graphics2D) g.create();\n\n            FontMetrics fm = g2.getFontMetrics();\n            int stringWidth = fm.stringWidth(getText());\n            int x = c.getWidth() - stringWidth - 8;\n            int y = fm.getHeight() + fm.getAscent() + 8;\n\n            if (c instanceof JLayer) {\n                JLayer layer = (JLayer) c;\n                if (layer.getView() instanceof JScrollPane) {\n                    JScrollPane scrollPane = (JScrollPane) layer.getView();\n                    JScrollBar scrollBar = scrollPane.getVerticalScrollBar();\n                    if (scrollBar.isVisible()) {\n                        x -= scrollBar.getWidth();\n                    }\n                }\n            }\n\n            g2.drawString(text, x, y);\n\n            g2.dispose();\n        }\n\n    }\n}\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html\" rel=\"nofollow noreferrer\">How to Decorate Components with the JLayer Class</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694142853,"creation_date":1694141185,"answer_id":77063847,"question_id":77048835,"body_markdown":"Java provides an OverlayLayout layout manager, which should be able to handle this requirement but which I find almost impossible to use.\r\n\r\nInstead you could use the custom OverlayPanel class which will allow you to overlay two components.\r\n\r\nThere are two keys to the code:\r\n\r\n1. you must specify the proper ZOrder of each component to make sure the background component is painted before the foreground component\r\n2. you need to override the `isOptimizedDrawaingEnabled()` to force both components to be repainted all the time. \r\n\r\nThe foreground component can be positioned in one of the 9 anchor locations supported by the GridBagLayout &quot;anchor&quot; constraint.\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import javax.swing.border.*;\r\n    \r\n    public class OverlayPanel extends JPanel\r\n    {\r\n    \tprivate GridBagLayout layout;\r\n    \tprivate GridBagConstraints gbc;\r\n    \tprivate Component background;\r\n    \tprivate Component foreground;\r\n    \r\n    \tpublic OverlayPanel(Component background, Component foreground)\r\n    \t{\r\n    \t\tthis(background, foreground, GridBagConstraints.CENTER);\r\n    \t}\r\n    \r\n    \tpublic OverlayPanel(Component background, Component foreground, int foregroundAnchor)\r\n    \t{\r\n    \t\tlayout = new GridBagLayout();\r\n    \t\tsetLayout( layout );\r\n    \r\n    \t\tgbc = new GridBagConstraints();\r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy = 0;\r\n    \r\n    \t\tsetForegroundComponent(foreground, foregroundAnchor );\r\n    \t\tsetBackgroundComponent( background );\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isOptimizedDrawingEnabled()\r\n    \t{\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \tpublic void setBackgroundComponent(Component background)\r\n    \t{\r\n    \t\tthis.background = background;\r\n    \r\n    \t\tgbc.weightx = 1.0f;\r\n    \t\tgbc.weighty = 1.0f;\r\n    \t\tgbc.fill = GridBagConstraints.BOTH;\r\n    \t\tgbc.anchor = GridBagConstraints.CENTER;\r\n    \r\n    \t\tsuper.add(background, gbc);\r\n    \t\tsetComponentZOrder(background, 1);\r\n    \t}\r\n    \r\n    \tpublic void setForegroundComponent(Component foreground, int foregroundAnchor)\r\n    \t{\r\n    \t\tthis.foreground = foreground;\r\n    \r\n    \t\tgbc.weightx = 0.0f;\r\n    \t\tgbc.weighty = 0.0f;\r\n    \t\tgbc.fill = GridBagConstraints.NONE;\r\n    \t\tgbc.anchor = foregroundAnchor;\r\n    \r\n    \t\tsuper.add(foreground, gbc);\r\n    \t\tsetComponentZOrder(foreground, 0);\r\n    \t}\r\n    \r\n    \tpublic void setForegroundPadding(int padX, int padY)\r\n    \t{\r\n    \t\tGridBagConstraints gbc = layout.getConstraints( foreground );\r\n    \r\n    \t\tgbc.ipadx = padX;\r\n    \t\tgbc.ipady = padY;\r\n    \r\n    \t\tlayout.setConstraints(foreground, gbc);\r\n    \t\trevalidate();\r\n    \t\trepaint();\r\n    \t}\r\n    \r\n    \tprivate static void createAndShowGUI()\r\n    \t{\r\n    \t\tJTextArea textArea = new JTextArea(10, 20);\r\n    \t\tJScrollPane scrollPane = new JScrollPane( textArea );\r\n    \r\n    \t\tJLabel label  = new JLabel(&quot;Testing&quot;);\r\n    \r\n    \t\tOverlayPanel overlay = new OverlayPanel(scrollPane, label, GridBagConstraints.FIRST_LINE_END);\r\n    //\t\tOverlayPanel overlay = new OverlayPanel(scrollPane, label);\r\n    \t\toverlay.setForegroundPadding(8 + UIManager.getInt(&quot;ScrollBar.width&quot;), 8);\r\n    \r\n    \t\tJFrame frame = new JFrame(&quot;OverlayPanel&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.add(overlay);\r\n            frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform( true );\r\n    \t\tframe.setVisible( true );\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tjava.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\r\n    \t}\r\n    }\r\n\r\n","title":"adding a non-scrolling component to a JScrollPane","body":"<p>Java provides an OverlayLayout layout manager, which should be able to handle this requirement but which I find almost impossible to use.</p>\n<p>Instead you could use the custom OverlayPanel class which will allow you to overlay two components.</p>\n<p>There are two keys to the code:</p>\n<ol>\n<li>you must specify the proper ZOrder of each component to make sure the background component is painted before the foreground component</li>\n<li>you need to override the <code>isOptimizedDrawaingEnabled()</code> to force both components to be repainted all the time.</li>\n</ol>\n<p>The foreground component can be positioned in one of the 9 anchor locations supported by the GridBagLayout &quot;anchor&quot; constraint.</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport javax.swing.border.*;\n\npublic class OverlayPanel extends JPanel\n{\n    private GridBagLayout layout;\n    private GridBagConstraints gbc;\n    private Component background;\n    private Component foreground;\n\n    public OverlayPanel(Component background, Component foreground)\n    {\n        this(background, foreground, GridBagConstraints.CENTER);\n    }\n\n    public OverlayPanel(Component background, Component foreground, int foregroundAnchor)\n    {\n        layout = new GridBagLayout();\n        setLayout( layout );\n\n        gbc = new GridBagConstraints();\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n\n        setForegroundComponent(foreground, foregroundAnchor );\n        setBackgroundComponent( background );\n    }\n\n    @Override\n    public boolean isOptimizedDrawingEnabled()\n    {\n        return false;\n    }\n\n    public void setBackgroundComponent(Component background)\n    {\n        this.background = background;\n\n        gbc.weightx = 1.0f;\n        gbc.weighty = 1.0f;\n        gbc.fill = GridBagConstraints.BOTH;\n        gbc.anchor = GridBagConstraints.CENTER;\n\n        super.add(background, gbc);\n        setComponentZOrder(background, 1);\n    }\n\n    public void setForegroundComponent(Component foreground, int foregroundAnchor)\n    {\n        this.foreground = foreground;\n\n        gbc.weightx = 0.0f;\n        gbc.weighty = 0.0f;\n        gbc.fill = GridBagConstraints.NONE;\n        gbc.anchor = foregroundAnchor;\n\n        super.add(foreground, gbc);\n        setComponentZOrder(foreground, 0);\n    }\n\n    public void setForegroundPadding(int padX, int padY)\n    {\n        GridBagConstraints gbc = layout.getConstraints( foreground );\n\n        gbc.ipadx = padX;\n        gbc.ipady = padY;\n\n        layout.setConstraints(foreground, gbc);\n        revalidate();\n        repaint();\n    }\n\n    private static void createAndShowGUI()\n    {\n        JTextArea textArea = new JTextArea(10, 20);\n        JScrollPane scrollPane = new JScrollPane( textArea );\n\n        JLabel label  = new JLabel(&quot;Testing&quot;);\n\n        OverlayPanel overlay = new OverlayPanel(scrollPane, label, GridBagConstraints.FIRST_LINE_END);\n//      OverlayPanel overlay = new OverlayPanel(scrollPane, label);\n        overlay.setForegroundPadding(8 + UIManager.getInt(&quot;ScrollBar.width&quot;), 8);\n\n        JFrame frame = new JFrame(&quot;OverlayPanel&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(overlay);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationByPlatform( true );\n        frame.setVisible( true );\n    }\n\n    public static void main(String[] args)\n    {\n        java.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18870627,"reputation":49,"user_id":13765314,"display_name":"ix0rai"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77049440,"answer_count":3,"score":1,"last_activity_date":1694142853,"creation_date":1693970391,"question_id":77048835,"body_markdown":"I&#39;d like to add a non-scrolling element, always visible element (a &quot;pinned&quot; element) in a JScrollPane of a Swing GUI. Taking this example code:\r\n\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        JFrame frame = new JFrame();\r\n        JEditorPane editorPane = new JEditorPane();\r\n        editorPane.setText(&quot;&quot;&quot;\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                d\r\n                &quot;&quot;&quot;);\r\n        JScrollPane scroll = new JScrollPane(editorPane);\r\n        editorPane.setLayout(new FlowLayout(FlowLayout.RIGHT));\r\n        editorPane.add(new JLabel(&quot;this shouldn&#39;t scroll!&quot;));\r\n\r\n        frame.getContentPane().add(scroll);\r\n        frame.setSize(600, 400);\r\n        frame.setVisible(true);\r\n    }\r\n}\r\n\r\n```\r\nWhich produces this GUI:  \r\n[![the swing panel created by the code](https://i.stack.imgur.com/wAafh.png)](https://i.stack.imgur.com/wAafh.png)\r\n\r\n\r\nI need a way to:   \r\n1. Make sure that the &quot;this shouldn&#39;t scroll!&quot; JLabel doesn&#39;t move when the scroll pane scrolls.\r\n2. Pin the &quot;this shouldn&#39;t scroll!&quot; JLabel to the right side of the panel (currently, it becomes hidden with a resize of the panel. I&#39;d like it to move left when the right side of the panel is pushed smaller, to make sure it&#39;s always on screen).\r\n\r\n\r\nI&#39;ve been able to make an awful implementation of this using swing&#39;s glass pane, but it means a lot more manual updating for me, and position always being the same, no matter how the swing panel is resized.\r\n\r\nThank you for any help!","title":"adding a non-scrolling component to a JScrollPane","body":"<p>I'd like to add a non-scrolling element, always visible element (a &quot;pinned&quot; element) in a JScrollPane of a Swing GUI. Taking this example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        JFrame frame = new JFrame();\n        JEditorPane editorPane = new JEditorPane();\n        editorPane.setText(&quot;&quot;&quot;\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                d\n                &quot;&quot;&quot;);\n        JScrollPane scroll = new JScrollPane(editorPane);\n        editorPane.setLayout(new FlowLayout(FlowLayout.RIGHT));\n        editorPane.add(new JLabel(&quot;this shouldn't scroll!&quot;));\n\n        frame.getContentPane().add(scroll);\n        frame.setSize(600, 400);\n        frame.setVisible(true);\n    }\n}\n\n</code></pre>\n<p>Which produces this GUI:<br />\n<a href=\"https://i.stack.imgur.com/wAafh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wAafh.png\" alt=\"the swing panel created by the code\" /></a></p>\n<p>I need a way to:</p>\n<ol>\n<li>Make sure that the &quot;this shouldn't scroll!&quot; JLabel doesn't move when the scroll pane scrolls.</li>\n<li>Pin the &quot;this shouldn't scroll!&quot; JLabel to the right side of the panel (currently, it becomes hidden with a resize of the panel. I'd like it to move left when the right side of the panel is pushed smaller, to make sure it's always on screen).</li>\n</ol>\n<p>I've been able to make an awful implementation of this using swing's glass pane, but it means a lot more manual updating for me, and position always being the same, no matter how the swing panel is resized.</p>\n<p>Thank you for any help!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1683688411,"post_id":76214604,"comment_id":134403418,"body_markdown":"Not sure if this [issue](https://github.com/netty/netty/issues/12119) could be related. Both are having a crash using netty and redisson. Just gave a quick look at the log and seems to me that many threads were started and are also blocked. If that is happening, it could be a thread starvation, but not sure if that is causing the crash. If you have monitoring tools, you could see how the resources are being consumed. There is also a core dump file that is hosted in the server, have you checked it?","body":"Not sure if this <a href=\"https://github.com/netty/netty/issues/12119\" rel=\"nofollow noreferrer\">issue</a> could be related. Both are having a crash using netty and redisson. Just gave a quick look at the log and seems to me that many threads were started and are also blocked. If that is happening, it could be a thread starvation, but not sure if that is causing the crash. If you have monitoring tools, you could see how the resources are being consumed. There is also a core dump file that is hosted in the server, have you checked it?"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1683688721,"post_id":76214604,"comment_id":134403449,"body_markdown":"What server are you using? A cloud provider? Bare metals? Operative system? Virtual machine? Docker? Please add more details about the context. If you have a dashboard of resources consumed, it could help to see what is happening. I mean not only cpu, memory and network. Also jvm resources","body":"What server are you using? A cloud provider? Bare metals? Operative system? Virtual machine? Docker? Please add more details about the context. If you have a dashboard of resources consumed, it could help to see what is happening. I mean not only cpu, memory and network. Also jvm resources"},{"owner":{"account_id":28563575,"reputation":1,"user_id":21866769,"display_name":"kernelsky"},"score":0,"creation_date":1683696100,"post_id":76214604,"comment_id":134404099,"body_markdown":"systemÔºöKylin  Linux 4.19.90-23.8.v2101.ky10.aarch64   ARMv8 CPU Ôºå\nThe core file has been analyzed, but what is the problem is not found outÔºåWhen there is a problem, the cpu and memory will rise in a straight line, but the cpu is only 100% of the single core, and there is still room for system memory","body":"systemÔºöKylin  Linux 4.19.90-23.8.v2101.ky10.aarch64   ARMv8 CPU Ôºå The core file has been analyzed, but what is the problem is not found outÔºåWhen there is a problem, the cpu and memory will rise in a straight line, but the cpu is only 100% of the single core, and there is still room for system memory"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1683728637,"post_id":76214604,"comment_id":134411589,"body_markdown":"what about the jvm metrics? memory, cpu, threads, garbage collector, method calls, etc.","body":"what about the jvm metrics? memory, cpu, threads, garbage collector, method calls, etc."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1683736704,"post_id":76214604,"comment_id":134413733,"body_markdown":"Please don&#39;t add comments to clarify, [edit] your question instead. A segmentation fault happens when you access memory that isn&#39;t yours, like a null pointer in C (not a `NullPointerException` in Java). This looks like a problem in the JVM to me. Can you upgrade?","body":"Please don&#39;t add comments to clarify, <a href=\"https://stackoverflow.com/posts/76214604/edit\">edit</a> your question instead. A segmentation fault happens when you access memory that isn&#39;t yours, like a null pointer in C (not a <code>NullPointerException</code> in Java). This looks like a problem in the JVM to me. Can you upgrade?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683770859,"post_id":76214604,"comment_id":134418749,"body_markdown":"It is more likely to be a problem with non-OpenJDK native code libraries ... or something using `Unsafe` uncorrectly.  If you look at the netty issue tracker you will see examples of this kind of thing.  Unfortunately, there is little that we can do to help you.  You can try upgrading your Java to a more recent version of Java 8, but that may not help.","body":"It is more likely to be a problem with non-OpenJDK native code libraries ... or something using <code>Unsafe</code> uncorrectly.  If you look at the netty issue tracker you will see examples of this kind of thing.  Unfortunately, there is little that we can do to help you.  You can try upgrading your Java to a more recent version of Java 8, but that may not help."}],"owner":{"account_id":28563575,"reputation":1,"user_id":21866769,"display_name":"kernelsky"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694142851,"creation_date":1683687465,"question_id":76214604,"body_markdown":"Our server hung because of a SIGSEGV fault..\r\n\r\nMy program script is killed by the system once a week. There is no problem with the system resources and it is relatively sufficient. The following is the error log. I hope you can help analyze the cause of the problem, thank you\r\nA fatal error has been detected by the Java Runtime Environment:\r\n```\r\n#\r\n#  SIGSEGV (0xb) at pc=0x0000fffeef35c9a4, pid=2369121, tid=0x0000fffc969ff1c0\r\n#\r\n# JRE version: OpenJDK Runtime Environment (8.0_242-b08) (build 1.8.0_242-b08)\r\n# Java VM: OpenJDK 64-Bit Server VM (25.242-b08 mixed mode linux-aarch64 compressed oops)\r\n# Problematic frame:\r\n# j  io.netty.buffer.PooledUnsafeDirectByteBuf.newInstance(I)Lio/netty/buffer/PooledUnsafeDirectByteBuf;+6\r\n#\r\n# Core dump written. Default location: /home/hd/hd-bpm-cloud-server/core or core.2369121\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   http://bugreport.java.com/bugreport/crash.jsp\r\n#\r\n\r\n---------------  T H R E A D  ---------------\r\n\r\nCurrent thread (0x0000fffe60003000):  JavaThread &quot;redisson-netty-17-11&quot; [_thread_in_Java, id=2369414, stack(0x0000fffc96800000,0x0000fffc96a00000)]\r\n\r\nsiginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x00000008bbea5f6b\r\n\r\n\r\n```\r\nfull log fileÔºöhttps://github.com/kernelsky/kubernetes/blob/master/hs_err_pid2369121.log\r\nThis file contains jvm indicators, status before being killed, thread information, etc.\r\nThe same problem still exists in the upgraded version of openjdk\r\n\r\nI am curious to know what could be the root cause of this?\r\n\r\nAny help is highly appreciated..Thanks.","title":"openjdk JVM Crash to SIGSEGV","body":"<p>Our server hung because of a SIGSEGV fault..</p>\n<p>My program script is killed by the system once a week. There is no problem with the system resources and it is relatively sufficient. The following is the error log. I hope you can help analyze the cause of the problem, thank you\nA fatal error has been detected by the Java Runtime Environment:</p>\n<pre><code>#\n#  SIGSEGV (0xb) at pc=0x0000fffeef35c9a4, pid=2369121, tid=0x0000fffc969ff1c0\n#\n# JRE version: OpenJDK Runtime Environment (8.0_242-b08) (build 1.8.0_242-b08)\n# Java VM: OpenJDK 64-Bit Server VM (25.242-b08 mixed mode linux-aarch64 compressed oops)\n# Problematic frame:\n# j  io.netty.buffer.PooledUnsafeDirectByteBuf.newInstance(I)Lio/netty/buffer/PooledUnsafeDirectByteBuf;+6\n#\n# Core dump written. Default location: /home/hd/hd-bpm-cloud-server/core or core.2369121\n#\n# If you would like to submit a bug report, please visit:\n#   http://bugreport.java.com/bugreport/crash.jsp\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x0000fffe60003000):  JavaThread &quot;redisson-netty-17-11&quot; [_thread_in_Java, id=2369414, stack(0x0000fffc96800000,0x0000fffc96a00000)]\n\nsiginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x00000008bbea5f6b\n\n\n</code></pre>\n<p>full log fileÔºöhttps://github.com/kernelsky/kubernetes/blob/master/hs_err_pid2369121.log\nThis file contains jvm indicators, status before being killed, thread information, etc.\nThe same problem still exists in the upgraded version of openjdk</p>\n<p>I am curious to know what could be the root cause of this?</p>\n<p>Any help is highly appreciated..Thanks.</p>\n"},{"tags":["java","spring","oracle","hibernate","jpa"],"comments":[{"owner":{"account_id":2229513,"reputation":5172,"user_id":1967484,"display_name":"Deadron"},"score":1,"creation_date":1694026099,"post_id":77054399,"comment_id":135838602,"body_markdown":"Check the basics. Make sure you are connecting to the database you think you are.  Are you seeing any exceptions in the logs?  Create a test for this piece of code an isolate it from the rest of the env and try it there.","body":"Check the basics. Make sure you are connecting to the database you think you are.  Are you seeing any exceptions in the logs?  Create a test for this piece of code an isolate it from the rest of the env and try it there."},{"owner":{"account_id":23547029,"reputation":103,"user_id":17590305,"display_name":"Ignacio Thomson"},"score":0,"creation_date":1694026436,"post_id":77054399,"comment_id":135838672,"body_markdown":"@Deadron I checked everything, database, table, attribute names, data types, absolutely everything and somehow I managed to &#39;fix&#39; it? I can&#39;t really call it like that but the problem was for one singular record in the database that I was not able to update (no idea why, I&#39;ll have to ask the DB Admin), as soon as I tried a different entry, everything was updated without an issue, so that&#39;s strange.","body":"@Deadron I checked everything, database, table, attribute names, data types, absolutely everything and somehow I managed to &#39;fix&#39; it? I can&#39;t really call it like that but the problem was for one singular record in the database that I was not able to update (no idea why, I&#39;ll have to ask the DB Admin), as soon as I tried a different entry, everything was updated without an issue, so that&#39;s strange."}],"answers":[{"tags":[],"owner":{"account_id":29391779,"reputation":1,"user_id":22519945,"display_name":"Kaushal Kadel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694142609,"creation_date":1694142539,"answer_id":77063904,"question_id":77054399,"body_markdown":"Save the updated data by using .save(). Add before catch block.\r\ngrlMaeItemDetRepository.save(grlMaeItemDetUpdate);","title":"JPA Update changes not reflecting in the Database","body":"<p>Save the updated data by using .save(). Add before catch block.\ngrlMaeItemDetRepository.save(grlMaeItemDetUpdate);</p>\n"}],"owner":{"account_id":23547029,"reputation":103,"user_id":17590305,"display_name":"Ignacio Thomson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694142609,"creation_date":1694024536,"question_id":77054399,"body_markdown":"I&#39;m trying to update a record in an Oracle database, using this code:\r\n\r\n    @Transactional\r\n    public void updateLedgerAccountDetails(LedgerAccount ledgerAccount) {\r\n\r\n        try {\r\n            GrlMaeItemDet grlMaeItemDetUpdate = grlMaeItemDetRepository.findByPk(ledgerAccount.getGrlItemSistCcosto().getCodSistem(),\r\n                    ledgerAccount.getGrlItemSistCcosto().getGrlCodItem(),\r\n                    ledgerAccount.getGrlItemSistCcosto().getCodEmpres(),\r\n                    ledgerAccount.getGrlItemSistCcosto().getNumPeriodo());\r\n            grlMaeItemDetUpdate.setCodImpsto(ledgerAccount.getGrlMaeItemDet().getCodImpsto());\r\n\r\n        } catch (Exception e){\r\n            log.error(&quot;An error has occured: &quot;, e);\r\n        }\r\n    }\r\n\r\nAnd with this repository\r\n\r\n    @Repository\r\n    public class LedgerAccountRepository {\r\n\r\n    public interface GrlMaeItemDetRepository extends JpaRepository&lt;GrlMaeItemDet, PkGrlMaeItemDet&gt; {\r\n        @Query(value = AppConfiguration.MAE_ITEM_DET_QUERY, nativeQuery = true)\r\n        GrlMaeItemDet findByPk(@Param(&quot;codSistem&quot;) String codSistem,\r\n                               @Param(&quot;grlCodItem&quot;) String grlCodItem,\r\n                               @Param(&quot;codEmpres&quot;) String codEmpres,\r\n                               @Param(&quot;numPeriodo&quot;) BigInteger numPeriodo);\r\n\r\n      }\r\n\r\n    }\r\n\r\nBut it doesn&#39;t seem to be working correctly, even when I&#39;m already validating that the entry exists in the Database performing a findBy... that I&#39;ve created, and even though Hibernate logs this: \r\n\r\n    Hibernate: update grl_mae_item_det set vige=?,fec_transc=?,hra_transc=?, cod_impsto=? where cod_empres=? and cod_sistem=? and grl_cod_item=? and num_periodo=?\r\n\r\nThe problem is as follows: I can&#39;t see the corresponding data being updated in the table (Using DBeaver), it basically stays the same, and when I run the program again and constantly fetch the entity, I can see it with the updated data in the terminal but not on the table, so it&#39;s like I&#39;m seeing the same entry with two different sets of data, one on the code-side and another on the database-side (already confirmed that it&#39;s the same record).\r\n\r\nI also tried running a manual script directly on the table and it seemed to work just fine, and not to mention that I have two other tables with the same exact code implementation as this one, and they update without an issue.\r\n\r\nEdit: problem seemed to be related to the record I was using for testing as it seemed it wasn&#39;t updatable but I still wasn&#39;t getting errors, exceptions or warnings. As soon as I tried to update another record it worked. Leaving post up for future reference in case someone ever crosses the same scenario. Cheers.\r\n","title":"JPA Update changes not reflecting in the Database","body":"<p>I'm trying to update a record in an Oracle database, using this code:</p>\n<pre><code>@Transactional\npublic void updateLedgerAccountDetails(LedgerAccount ledgerAccount) {\n\n    try {\n        GrlMaeItemDet grlMaeItemDetUpdate = grlMaeItemDetRepository.findByPk(ledgerAccount.getGrlItemSistCcosto().getCodSistem(),\n                ledgerAccount.getGrlItemSistCcosto().getGrlCodItem(),\n                ledgerAccount.getGrlItemSistCcosto().getCodEmpres(),\n                ledgerAccount.getGrlItemSistCcosto().getNumPeriodo());\n        grlMaeItemDetUpdate.setCodImpsto(ledgerAccount.getGrlMaeItemDet().getCodImpsto());\n\n    } catch (Exception e){\n        log.error(&quot;An error has occured: &quot;, e);\n    }\n}\n</code></pre>\n<p>And with this repository</p>\n<pre><code>@Repository\npublic class LedgerAccountRepository {\n\npublic interface GrlMaeItemDetRepository extends JpaRepository&lt;GrlMaeItemDet, PkGrlMaeItemDet&gt; {\n    @Query(value = AppConfiguration.MAE_ITEM_DET_QUERY, nativeQuery = true)\n    GrlMaeItemDet findByPk(@Param(&quot;codSistem&quot;) String codSistem,\n                           @Param(&quot;grlCodItem&quot;) String grlCodItem,\n                           @Param(&quot;codEmpres&quot;) String codEmpres,\n                           @Param(&quot;numPeriodo&quot;) BigInteger numPeriodo);\n\n  }\n\n}\n</code></pre>\n<p>But it doesn't seem to be working correctly, even when I'm already validating that the entry exists in the Database performing a findBy... that I've created, and even though Hibernate logs this:</p>\n<pre><code>Hibernate: update grl_mae_item_det set vige=?,fec_transc=?,hra_transc=?, cod_impsto=? where cod_empres=? and cod_sistem=? and grl_cod_item=? and num_periodo=?\n</code></pre>\n<p>The problem is as follows: I can't see the corresponding data being updated in the table (Using DBeaver), it basically stays the same, and when I run the program again and constantly fetch the entity, I can see it with the updated data in the terminal but not on the table, so it's like I'm seeing the same entry with two different sets of data, one on the code-side and another on the database-side (already confirmed that it's the same record).</p>\n<p>I also tried running a manual script directly on the table and it seemed to work just fine, and not to mention that I have two other tables with the same exact code implementation as this one, and they update without an issue.</p>\n<p>Edit: problem seemed to be related to the record I was using for testing as it seemed it wasn't updatable but I still wasn't getting errors, exceptions or warnings. As soon as I tried to update another record it worked. Leaving post up for future reference in case someone ever crosses the same scenario. Cheers.</p>\n"},{"tags":["javascript","java","html","spring","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":21625975,"reputation":52,"user_id":15950321,"display_name":"jadekim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694142506,"creation_date":1694142506,"answer_id":77063903,"question_id":77061605,"body_markdown":"It was resolved by modifying it as follows.\r\n\r\n1. Change record dto to class dto and add getter, setter\r\n2. Modified th:field, th:name, th:value to name, value","title":"cannot bind a list of object using thymeleaf","body":"<p>It was resolved by modifying it as follows.</p>\n<ol>\n<li>Change record dto to class dto and add getter, setter</li>\n<li>Modified th:field, th:name, th:value to name, value</li>\n</ol>\n"}],"owner":{"account_id":21625975,"reputation":52,"user_id":15950321,"display_name":"jadekim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77063903,"answer_count":1,"score":0,"last_activity_date":1694142506,"creation_date":1694106542,"question_id":77061605,"body_markdown":"*Even if it&#39;s not related to the question, you can tell me if there&#39;s anything wrong with the code.*\r\n\r\nFirst, i applied the approach of adding table rows and adding input tags by modal. It was implemented by referring to https://stackoverflow.com/questions/36500731/how-to-bind-an-object-list-with-thymeleaf.\r\nBut it fails to bind and `optionRequests` becomes null.\r\n\r\nWhat did I miss? I don&#39;t know what the problem is.\r\n\r\n### html &amp; javascript\r\n\r\n```html\r\n&lt;form id=&quot;example-form&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n  &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;title&quot; name=&quot;title&quot; required&gt;\r\n  &lt;input type=&quot;file&quot; accept=&quot;image/*&quot; class=&quot;form-control&quot; id=&quot;imgFile&quot; name=&quot;imgFile&quot;&gt;\r\n    \r\n  &lt;input type=&quot;button&quot; value=&quot;Add Option&quot; class=&quot;btn btn-primary btn-sm&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#optionModal&quot;&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=&quot;modal fade&quot; id=&quot;optionModal&quot; tabindex=&quot;-1&quot; aria-labelledby=&quot;optionModalLabel&quot; aria-hidden=&quot;true&quot;&gt;\r\n    &lt;div class=&quot;modal-dialog&quot;&gt;\r\n      &lt;div class=&quot;modal-content&quot;&gt;\r\n        &lt;div class=&quot;modal-header&quot;&gt;\r\n          &lt;h1 class=&quot;modal-title fs-5&quot; id=&quot;optionModalLabel&quot;&gt;option&lt;/h1&gt;\r\n          &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;modal-body&quot;&gt;\r\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;optionName&quot;&gt;\r\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;addValue&quot;&gt;\r\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;method&quot;&gt;\r\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;material&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;modal-footer&quot;&gt;\r\n          &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-bs-dismiss=&quot;modal&quot;&gt;Close&lt;/button&gt;\r\n          &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot; onclick=&quot;addOptionRow()&quot;&gt;Add&lt;/button&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n  &lt;table class=&quot;table table-bordered&quot; id=&quot;optionTable&quot;&gt;\r\n     &lt;thead&gt;\r\n      &lt;tr&gt;\r\n        &lt;th&gt;Name&lt;/th&gt;\r\n        &lt;th&gt;AddValue&lt;/th&gt;\r\n        &lt;th&gt;Method&lt;/th&gt;\r\n        &lt;th&gt;Material&lt;/th&gt;\r\n        &lt;th&gt;&lt;/th&gt;\r\n      &lt;/tr&gt;\r\n      &lt;/thead&gt;\r\n      &lt;tbody&gt;\r\n\r\n      &lt;/tbody&gt;\r\n  &lt;/table&gt;\r\n&lt;/form&gt;\r\n```\r\n\r\n```javascript\r\n&lt;script&gt;\r\n  function addOptionRow() {\r\n      const table = document.getElementById(&#39;optionTable&#39;);\r\n      const newRow = table.insertRow();\r\n      const optionName = newRow.insertCell(0);\r\n      const addValue = newRow.insertCell(1);\r\n      const method = newRow.insertCell(2);\r\n      const material = newRow.insertCell(3);\r\n      const removeButton = newRow.insertCell(4);\r\n      var idx = $(&#39;#optionTable tr&#39;).length - 2;\r\n\r\n      optionNameText = $(&#39;#optionName&#39;).val();\r\n      addValueText = $(&#39;#addValue&#39;).val();\r\n      methodText = $(&#39;#method&#39;).val();\r\n      materialText = $(&#39;#material&#39;).val();\r\n\r\n      optionName.innerText = optionNameText;\r\n      addValue.innerText = addValueText;\r\n      method.innerText = methodText;\r\n      material.innerText = materialText;\r\n      removeButton.innerHTML = &quot;&lt;button class=&#39;btn btn-danger btn-sm&#39; onclick=&#39;removeRow(this)&#39;&gt;X&lt;/button&gt;&quot;\r\n\r\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type=&#39;hidden&#39; th:field=&#39;${example.optionRequests[&quot; + idx + &quot;].optionName}&#39; th:name=&#39;${example.optionRequests[&quot; + idx + &quot;]}&#39; th:value=&#39;&quot; + optionNameText + &quot;&#39;&gt;&quot;));\r\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type=&#39;hidden&#39; th:field=&#39;${example.optionRequests[&quot; + idx + &quot;].addValue}&#39; th:name=&#39;${example.optionRequests[&quot; + idx + &quot;]}&#39; th:value=&#39;&quot; + addValueText + &quot;&#39;&gt;&quot;));\r\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type=&#39;hidden&#39; th:field=&#39;${example.optionRequests[&quot; + idx + &quot;].method}&#39; th:name=&#39;${example.optionRequests[&quot; + idx + &quot;]}&#39; th:value=&#39;&quot; + methodText + &quot;&#39;&gt;&quot;));\r\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type=&#39;hidden&#39; th:field=&#39;${example.optionRequests[&quot; + idx + &quot;].material}&#39; th:name=&#39;${example.optionRequests[&quot; + idx + &quot;]}&#39; th:value=&#39;&quot; + materialText + &quot;&#39;&gt;&quot;));\r\n\r\n      $(&#39;#optionName&#39;).val(&quot;&quot;);\r\n      $(&#39;#addValue&#39;).val(&quot;&quot;);\r\n      $(&#39;#method&#39;).val(&quot;&quot;);\r\n      $(&#39;#material&#39;).val(&quot;&quot;);\r\n      $(&#39;#optionModal&#39;).modal(&#39;hide&#39;);\r\n    }\r\n&lt;/script&gt;\r\n```\r\n\r\n---\r\nThe DTO is defined as follows.\r\n\r\n### FormRequest\r\n```java\r\npublic record FormRequest(\r\n        String title,\r\n        List&lt;OptionRequest&gt; optionRequests,\r\n        MultipartFile imgFile\r\n) {}\r\n```\r\n### OptionRequest\r\n```java\r\npublic record OptionRequest(\r\n        String optionName,\r\n        Integer addValue,\r\n        String method,\r\n        String material\r\n) {\r\n}\r\n```\r\n---\r\nThe controller is implemented as follows.\r\n\r\n### Controller\r\n```java\r\n    @GetMapping(&quot;/example&quot;)\r\n    public String exampleGet(Model model) {\r\n        model.addAttribute(&quot;example&quot;, new FormResponse(null, List.of(), null)); //Same field as in FormRequest\r\n       \r\n        return &quot;form&quot;;\r\n    }\r\n    @PostMapping(&quot;/example&quot;)\r\n    public String examplePost(\r\n            @ModelAttribute(&quot;example&quot;) FormRequest formRequest,\r\n            Model model\r\n    ) {}\r\n```\r\n\r\n---\r\n\r\nThymeleaf is implemented as follows by applying the decoupled logic.\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;thlogic&gt;\r\n    ...\r\n    &lt;attr sel=&quot;#example-form&quot; th:object=&quot;${example}&quot; th:action=&quot;/example&quot; th:method=&quot;post&quot;&gt;\r\n        &lt;attr sel=&quot;#title&quot; th:value=&quot;*{title} ?: _&quot;/&gt;\r\n    ...\r\n&lt;/thlogic&gt;\r\n```","title":"cannot bind a list of object using thymeleaf","body":"<p><em>Even if it's not related to the question, you can tell me if there's anything wrong with the code.</em></p>\n<p>First, i applied the approach of adding table rows and adding input tags by modal. It was implemented by referring to <a href=\"https://stackoverflow.com/questions/36500731/how-to-bind-an-object-list-with-thymeleaf\">How to bind an object list with thymeleaf?</a>.\nBut it fails to bind and <code>optionRequests</code> becomes null.</p>\n<p>What did I miss? I don't know what the problem is.</p>\n<h3>html &amp; javascript</h3>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form id=&quot;example-form&quot; enctype=&quot;multipart/form-data&quot;&gt;\n  &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;title&quot; name=&quot;title&quot; required&gt;\n  &lt;input type=&quot;file&quot; accept=&quot;image/*&quot; class=&quot;form-control&quot; id=&quot;imgFile&quot; name=&quot;imgFile&quot;&gt;\n    \n  &lt;input type=&quot;button&quot; value=&quot;Add Option&quot; class=&quot;btn btn-primary btn-sm&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#optionModal&quot;&gt;\n  &lt;/div&gt;\n  &lt;div class=&quot;modal fade&quot; id=&quot;optionModal&quot; tabindex=&quot;-1&quot; aria-labelledby=&quot;optionModalLabel&quot; aria-hidden=&quot;true&quot;&gt;\n    &lt;div class=&quot;modal-dialog&quot;&gt;\n      &lt;div class=&quot;modal-content&quot;&gt;\n        &lt;div class=&quot;modal-header&quot;&gt;\n          &lt;h1 class=&quot;modal-title fs-5&quot; id=&quot;optionModalLabel&quot;&gt;option&lt;/h1&gt;\n          &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;modal-body&quot;&gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;optionName&quot;&gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;addValue&quot;&gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;method&quot;&gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;material&quot;&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;modal-footer&quot;&gt;\n          &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-bs-dismiss=&quot;modal&quot;&gt;Close&lt;/button&gt;\n          &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot; onclick=&quot;addOptionRow()&quot;&gt;Add&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;table class=&quot;table table-bordered&quot; id=&quot;optionTable&quot;&gt;\n     &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;th&gt;AddValue&lt;/th&gt;\n        &lt;th&gt;Method&lt;/th&gt;\n        &lt;th&gt;Material&lt;/th&gt;\n        &lt;th&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n\n      &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/form&gt;\n</code></pre>\n<pre class=\"lang-js prettyprint-override\"><code>&lt;script&gt;\n  function addOptionRow() {\n      const table = document.getElementById('optionTable');\n      const newRow = table.insertRow();\n      const optionName = newRow.insertCell(0);\n      const addValue = newRow.insertCell(1);\n      const method = newRow.insertCell(2);\n      const material = newRow.insertCell(3);\n      const removeButton = newRow.insertCell(4);\n      var idx = $('#optionTable tr').length - 2;\n\n      optionNameText = $('#optionName').val();\n      addValueText = $('#addValue').val();\n      methodText = $('#method').val();\n      materialText = $('#material').val();\n\n      optionName.innerText = optionNameText;\n      addValue.innerText = addValueText;\n      method.innerText = methodText;\n      material.innerText = materialText;\n      removeButton.innerHTML = &quot;&lt;button class='btn btn-danger btn-sm' onclick='removeRow(this)'&gt;X&lt;/button&gt;&quot;\n\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type='hidden' th:field='${example.optionRequests[&quot; + idx + &quot;].optionName}' th:name='${example.optionRequests[&quot; + idx + &quot;]}' th:value='&quot; + optionNameText + &quot;'&gt;&quot;));\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type='hidden' th:field='${example.optionRequests[&quot; + idx + &quot;].addValue}' th:name='${example.optionRequests[&quot; + idx + &quot;]}' th:value='&quot; + addValueText + &quot;'&gt;&quot;));\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type='hidden' th:field='${example.optionRequests[&quot; + idx + &quot;].method}' th:name='${example.optionRequests[&quot; + idx + &quot;]}' th:value='&quot; + methodText + &quot;'&gt;&quot;));\n      $(&quot;#example-form&quot;).append($(&quot;&lt;input type='hidden' th:field='${example.optionRequests[&quot; + idx + &quot;].material}' th:name='${example.optionRequests[&quot; + idx + &quot;]}' th:value='&quot; + materialText + &quot;'&gt;&quot;));\n\n      $('#optionName').val(&quot;&quot;);\n      $('#addValue').val(&quot;&quot;);\n      $('#method').val(&quot;&quot;);\n      $('#material').val(&quot;&quot;);\n      $('#optionModal').modal('hide');\n    }\n&lt;/script&gt;\n</code></pre>\n<hr />\n<p>The DTO is defined as follows.</p>\n<h3>FormRequest</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public record FormRequest(\n        String title,\n        List&lt;OptionRequest&gt; optionRequests,\n        MultipartFile imgFile\n) {}\n</code></pre>\n<h3>OptionRequest</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public record OptionRequest(\n        String optionName,\n        Integer addValue,\n        String method,\n        String material\n) {\n}\n</code></pre>\n<hr />\n<p>The controller is implemented as follows.</p>\n<h3>Controller</h3>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(&quot;/example&quot;)\n    public String exampleGet(Model model) {\n        model.addAttribute(&quot;example&quot;, new FormResponse(null, List.of(), null)); //Same field as in FormRequest\n       \n        return &quot;form&quot;;\n    }\n    @PostMapping(&quot;/example&quot;)\n    public String examplePost(\n            @ModelAttribute(&quot;example&quot;) FormRequest formRequest,\n            Model model\n    ) {}\n</code></pre>\n<hr />\n<p>Thymeleaf is implemented as follows by applying the decoupled logic.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;thlogic&gt;\n    ...\n    &lt;attr sel=&quot;#example-form&quot; th:object=&quot;${example}&quot; th:action=&quot;/example&quot; th:method=&quot;post&quot;&gt;\n        &lt;attr sel=&quot;#title&quot; th:value=&quot;*{title} ?: _&quot;/&gt;\n    ...\n&lt;/thlogic&gt;\n</code></pre>\n"},{"tags":["java","web-services","exception","wsdl"],"comments":[{"owner":{"account_id":1311512,"reputation":375,"user_id":1259426,"display_name":"Ali HAMDI"},"score":1,"creation_date":1389084655,"post_id":20967299,"comment_id":31498002,"body_markdown":"Did you check if the requested URL is available or not ? connection timeout is caused by either an unavailable URI or a slow connection. Could you check if you could connect to the requested URI directly (i.e with web browser).","body":"Did you check if the requested URL is available or not ? connection timeout is caused by either an unavailable URI or a slow connection. Could you check if you could connect to the requested URI directly (i.e with web browser)."},{"owner":{"account_id":1262326,"reputation":1438,"user_id":1220291,"accept_rate":60,"display_name":"Nagarajan S R"},"score":0,"creation_date":1389084742,"post_id":20967299,"comment_id":31498043,"body_markdown":"Hi Ali HAMDI, I am getting the same error when I tried with SoapUI tool as well.\n\nAnd internet issue can be completely ruled out","body":"Hi Ali HAMDI, I am getting the same error when I tried with SoapUI tool as well.  And internet issue can be completely ruled out"},{"owner":{"account_id":1311512,"reputation":375,"user_id":1259426,"display_name":"Ali HAMDI"},"score":0,"creation_date":1389084914,"post_id":20967299,"comment_id":31498129,"body_markdown":"Then you have to check the status of the web service , it may be unavailable or down.","body":"Then you have to check the status of the web service , it may be unavailable or down."},{"owner":{"account_id":1311512,"reputation":375,"user_id":1259426,"display_name":"Ali HAMDI"},"score":0,"creation_date":1389085609,"post_id":20967299,"comment_id":31498503,"body_markdown":"Your request is then taking taking too much time. You should consider increase timeout.","body":"Your request is then taking taking too much time. You should consider increase timeout."},{"owner":{"account_id":1262326,"reputation":1438,"user_id":1220291,"accept_rate":60,"display_name":"Nagarajan S R"},"score":0,"creation_date":1389087126,"post_id":20967299,"comment_id":31499444,"body_markdown":"Hi Ali HAMDI, I tried to load the WSDL file in the SoapUI. Surprisingly it gave me &quot;java.lang.Exception: Failed to load url;&quot;","body":"Hi Ali HAMDI, I tried to load the WSDL file in the SoapUI. Surprisingly it gave me &quot;java.lang.Exception: Failed to load url;&quot;"},{"owner":{"account_id":1311512,"reputation":375,"user_id":1259426,"display_name":"Ali HAMDI"},"score":0,"creation_date":1389092028,"post_id":20967299,"comment_id":31502494,"body_markdown":"It may be corrupted , could you check the validity of your WSDL ?","body":"It may be corrupted , could you check the validity of your WSDL ?"},{"owner":{"account_id":1262326,"reputation":1438,"user_id":1220291,"accept_rate":60,"display_name":"Nagarajan S R"},"score":0,"creation_date":1389094777,"post_id":20967299,"comment_id":31504068,"body_markdown":"Yes I will resume debugging this tomo 8 IST. will be gone till then Thanks Ali","body":"Yes I will resume debugging this tomo 8 IST. will be gone till then Thanks Ali"}],"answers":[{"comments":[{"owner":{"account_id":1262326,"reputation":1438,"user_id":1220291,"accept_rate":60,"display_name":"Nagarajan S R"},"score":0,"creation_date":1389086774,"post_id":20967574,"comment_id":31499213,"body_markdown":"Hi I have the connection timeout to 2 minutes. and I use javax.xml.ws.client.connectionTimeout&quot;, &quot;200000&quot;","body":"Hi I have the connection timeout to 2 minutes. and I use javax.xml.ws.client.connectionTimeout&quot;, &quot;200000&quot;"},{"owner":{"account_id":2790227,"reputation":91,"user_id":2400598,"display_name":"kartavya soni"},"score":0,"creation_date":1389087560,"post_id":20967574,"comment_id":31499716,"body_markdown":"basically this method accept value in Millisecond if assign null or 0 then automatically it will be interval of infinite decelerated .","body":"basically this method accept value in Millisecond if assign null or 0 then automatically it will be interval of infinite decelerated ."}],"tags":[],"owner":{"account_id":2790227,"reputation":91,"user_id":2400598,"display_name":"kartavya soni"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389085489,"creation_date":1389085489,"answer_id":20967574,"question_id":20967299,"body_markdown":"If you are using jersey.api\r\n\r\n    import com.sun.jersey.api.client.Client;\r\n    import com.sun.jersey.api.client.ClientResponse;\r\n    import com.sun.jersey.api.client.WebResource;\r\n    import com.sun.jersey.api.client.config.ClientConfig;\r\n    import com.sun.jersey.api.client.config.DefaultClientConfig;\r\n    import com.sun.jersey.api.representation.Form;\r\n    \r\n    \r\n    ClientResponse response = null;\r\n    ClientConfig config = new DefaultClientConfig();\r\n    Client client = Client.create(config);\r\n    /*client.setReadTimeout(30);*/\r\n    /*client.setConnectTimeout(interval)*/\r\n    WebResource service = client.resource(getBaseURI());\r\n\r\n\r\nIn Client class There is method client.setConnectTimeout(interval) if u not set this method then it will try to make connection infinite time. ","title":"Getting a connection timed out exception in webservices","body":"<p>If you are using jersey.api</p>\n\n<pre><code>import com.sun.jersey.api.client.Client;\nimport com.sun.jersey.api.client.ClientResponse;\nimport com.sun.jersey.api.client.WebResource;\nimport com.sun.jersey.api.client.config.ClientConfig;\nimport com.sun.jersey.api.client.config.DefaultClientConfig;\nimport com.sun.jersey.api.representation.Form;\n\n\nClientResponse response = null;\nClientConfig config = new DefaultClientConfig();\nClient client = Client.create(config);\n/*client.setReadTimeout(30);*/\n/*client.setConnectTimeout(interval)*/\nWebResource service = client.resource(getBaseURI());\n</code></pre>\n\n<p>In Client class There is method client.setConnectTimeout(interval) if u not set this method then it will try to make connection infinite time. </p>\n"},{"tags":[],"owner":{"account_id":3713281,"reputation":1755,"user_id":3090039,"display_name":"kingAm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396349709,"creation_date":1389098642,"answer_id":20971978,"question_id":20967299,"body_markdown":"I tried to load the `WSDL` file in the `SoapUI`. \r\n\r\nSurprisingly it gave me &quot;`java.lang.Exception: Failed to load url;`&quot; \r\n\r\nI think you are using `https wsdl url` to load this `webservice`.&lt;br&gt; \r\n\r\nIt would be password protected.Save your `wsdl` file locally on your machine and try to load `wsdl` file instead of url in soap ui.\r\n\r\nAnd while sending request at h`ttps endpoint` , you need to provide username and password. &lt;br&gt;\r\nIn `soapui` you can fill username and password in request property at bottom left corner.","title":"Getting a connection timed out exception in webservices","body":"<p>I tried to load the <code>WSDL</code> file in the <code>SoapUI</code>. </p>\n\n<p>Surprisingly it gave me \"<code>java.lang.Exception: Failed to load url;</code>\" </p>\n\n<p>I think you are using <code>https wsdl url</code> to load this <code>webservice</code>.<br> </p>\n\n<p>It would be password protected.Save your <code>wsdl</code> file locally on your machine and try to load <code>wsdl</code> file instead of url in soap ui.</p>\n\n<p>And while sending request at h<code>ttps endpoint</code> , you need to provide username and password. <br>\nIn <code>soapui</code> you can fill username and password in request property at bottom left corner.</p>\n"}],"owner":{"account_id":1262326,"reputation":1438,"user_id":1220291,"accept_rate":60,"display_name":"Nagarajan S R"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10799,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694142475,"creation_date":1389084460,"question_id":20967299,"body_markdown":"I am getting the following exception when I try to submit a request through webservice.\r\n\r\nThe stack trace is as below:\r\n\r\n    Exception in thread &quot;main&quot; com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.ConnectException: Connection timed out: connect\r\n    \tat com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:117)\r\n    \tat com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:194)\r\n    \tat com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)\r\n    \tat com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:95)\r\n    \tat com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)\r\n    \tat com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)\r\n    \tat com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)\r\n    \tat com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)\r\n    \tat com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)\r\n    \tat com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)\r\n    \tat com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)\r\n    \tat com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)\r\n    \tat com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)\r\n    \tat $Proxy40.externalSearchPerson(Unknown Source)\r\n    \tat com.igniteibroker.Main.personSearch(Main.java:52)\r\n    \tat com.igniteibroker.Main.main(Main.java:64)\r\n    Caused by: java.net.ConnectException: Connection timed out: connect\r\n    \tat java.net.DualStackPlainSocketImpl.connect0(Native Method)\r\n    \tat java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)\r\n    \tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\r\n    \tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\r\n    \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\r\n    \tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)\r\n    \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)\r\n    \tat java.net.Socket.connect(Socket.java:579)\r\n    \tat sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:618)\r\n    \tat sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:160)\r\n    \tat sun.net.NetworkClient.doConnect(NetworkClient.java:180)\r\n    \tat sun.net.www.http.HttpClient.openServer(HttpClient.java:378)\r\n    \tat sun.net.www.http.HttpClient.openServer(HttpClient.java:473)\r\n    \tat sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:270)\r\n    \tat sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:327)\r\n    \tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:191)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:974)\r\n    \tat sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:177)\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1090)\r\n    \tat sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)\r\n    \tat com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:105)\r\n    \t... 15 more\r\n\r\nplease help me resolve this if you have identified the issue. Thanks in advance\r\n","title":"Getting a connection timed out exception in webservices","body":"<p>I am getting the following exception when I try to submit a request through webservice.</p>\n\n<p>The stack trace is as below:</p>\n\n<pre><code>Exception in thread \"main\" com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.ConnectException: Connection timed out: connect\n    at com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:117)\n    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:194)\n    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)\n    at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:95)\n    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)\n    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)\n    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)\n    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)\n    at com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)\n    at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)\n    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)\n    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)\n    at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)\n    at $Proxy40.externalSearchPerson(Unknown Source)\n    at com.igniteibroker.Main.personSearch(Main.java:52)\n    at com.igniteibroker.Main.main(Main.java:64)\nCaused by: java.net.ConnectException: Connection timed out: connect\n    at java.net.DualStackPlainSocketImpl.connect0(Native Method)\n    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)\n    at java.net.Socket.connect(Socket.java:579)\n    at sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:618)\n    at sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:160)\n    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:378)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:473)\n    at sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:270)\n    at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:327)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:191)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:974)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:177)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1090)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)\n    at com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:105)\n    ... 15 more\n</code></pre>\n\n<p>please help me resolve this if you have identified the issue. Thanks in advance</p>\n"},{"tags":["java","android","xml","android-layout"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":2,"creation_date":1672001778,"post_id":74915640,"comment_id":132206662,"body_markdown":"Welcome to StackOverflow. While showing code is important, also showing what errors you are getting is also important. Error message should be found in the logcat. See: [Unfortunately MyApp has stopped. How can I solve this?](https://stackoverflow.com/q/23353173/295004) and [What is a stack trace, and how can I use it to debug my application errors?](https://stackoverflow.com/q/3988788/295004) on using a stack trace for debugging.","body":"Welcome to StackOverflow. While showing code is important, also showing what errors you are getting is also important. Error message should be found in the logcat. See: <a href=\"https://stackoverflow.com/q/23353173/295004\">Unfortunately MyApp has stopped. How can I solve this?</a> and <a href=\"https://stackoverflow.com/q/3988788/295004\">What is a stack trace, and how can I use it to debug my application errors?</a> on using a stack trace for debugging."}],"answers":[{"tags":[],"owner":{"account_id":8746330,"reputation":420,"user_id":6541482,"display_name":"Mohamad Rostami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672004697,"creation_date":1672004697,"answer_id":74916029,"question_id":74915640,"body_markdown":"you have defined your Edit texts in the first activity with id&#39;s named\r\n\r\n    edtPhone\r\n    edtMessage\r\n\r\nbut there was no `edtPhone` or `edtMessage` in your xml.\r\nthis issue also repeats in your second activity\r\nyou have defined `txtPhone` and `txtMessage`\r\nbut again there are no such ids in your second activity XML.\r\nkeep in mind that these might not be the whole problem as you didn&#39;t post any log for the errors. but if there were anything else, ask and we&#39;ll help you\r\n","title":"Android app keeps stopping while building using android studio","body":"<p>you have defined your Edit texts in the first activity with id's named</p>\n<pre><code>edtPhone\nedtMessage\n</code></pre>\n<p>but there was no <code>edtPhone</code> or <code>edtMessage</code> in your xml.\nthis issue also repeats in your second activity\nyou have defined <code>txtPhone</code> and <code>txtMessage</code>\nbut again there are no such ids in your second activity XML.\nkeep in mind that these might not be the whole problem as you didn't post any log for the errors. but if there were anything else, ask and we'll help you</p>\n"}],"owner":{"account_id":27346260,"reputation":11,"user_id":20856123,"display_name":"ahmed magdy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694141084,"creation_date":1671998826,"question_id":74915640,"body_markdown":"When I&#39;m trying to transfer data between activities, I can&#39;t get my message and the app keeps crashing, \r\nIt show me &#39;app keeps stopping&#39;\r\n\r\nCode in MainActivity.java \r\n\r\n```\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Intent outIntent;\r\n    EditText edtPhone;\r\n    EditText edtMessage;\r\n    Button btnNext;\r\n    String tempText=&quot;&quot;;\r\n\r\n   public static final String PHONE = &quot;PHONE&quot;;\r\n   public static final  String MESSAGE = &quot;MESSAGE&quot;;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        btnNext = (Button) findViewById(R.id.btnNext);\r\n        btnNext.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View V) {\r\n                outIntent = new Intent(MainActivity.this, ActivityTwo.class);\r\n                edtPhone = (EditText) findViewById(R.id.edtPhone);\r\n                edtMessage = (EditText) findViewById(R.id.edtMessage);\r\n                tempText = edtPhone.getText().toString();\r\n                outIntent.putExtra(PHONE,tempText);\r\n                tempText = edtMessage.getText().toString();\r\n                outIntent.putExtra(MESSAGE,tempText);\r\n\r\n                startActivity(outIntent);\r\n            }\r\n\r\n    });\r\n}\r\n    public void closeMethod(View view) {\r\n        finish();\r\n    }\r\n}\r\n```\r\n\r\nActivityTwo.java\r\n\r\n```\r\npackage com.example.fir;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport android.widget.TextView;\r\n\r\npublic class ActivityTwo extends AppCompatActivity {\r\n\r\n        Intent incomingIntent;\r\n        TextView txtPhone;\r\n        TextView txtMessage;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_two);\r\n        incomingIntent = getIntent();\r\n        txtPhone = (TextView) findViewById(R.id.txtPhone);\r\n        txtMessage = (TextView) findViewById(R.id.txtMessage);\r\n        txtPhone.setText(incomingIntent.getStringExtra(MainActivity.PHONE));\r\n        txtMessage.setText(incomingIntent.getStringExtra(MainActivity.MESSAGE));\r\n\r\n    }\r\n}\r\n```\r\n\r\nActivitymain.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot; &gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginTop=&quot;32dp&quot;\r\n        android:text=&quot;Phone&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/editTextPhone&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginStart=&quot;0dp&quot;\r\n        android:layout_marginTop=&quot;60dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Phone&quot;\r\n        android:inputType=&quot;phone&quot;\r\n        android:minHeight=&quot;48dp&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView2&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginTop=&quot;124dp&quot;\r\n        android:text=&quot;Message&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/editTextTextPersonName&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_alignParentEnd=&quot;true&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginStart=&quot;0dp&quot;\r\n        android:layout_marginTop=&quot;156dp&quot;\r\n        android:layout_marginEnd=&quot;3dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Message&quot;\r\n        android:inputType=&quot;&quot;\r\n        android:minHeight=&quot;48dp&quot; /&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginTop=&quot;224dp&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnNext&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:text=&quot;Next&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/button2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:onClick=&quot;closeMethod&quot;\r\n            android:text=&quot;CLose&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\n```\r\nActivitytwo.xml\r\n////\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot; &gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginTop=&quot;32dp&quot;\r\n        android:text=&quot;Phone&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/editTextPhone&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginStart=&quot;0dp&quot;\r\n        android:layout_marginTop=&quot;60dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Phone&quot;\r\n        android:inputType=&quot;phone&quot;\r\n        android:minHeight=&quot;48dp&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textView2&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginTop=&quot;124dp&quot;\r\n        android:text=&quot;Message&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/editTextTextPersonName&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_alignParentEnd=&quot;true&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginStart=&quot;0dp&quot;\r\n        android:layout_marginTop=&quot;156dp&quot;\r\n        android:layout_marginEnd=&quot;3dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Message&quot;\r\n        android:inputType=&quot;&quot;\r\n        android:minHeight=&quot;48dp&quot; /&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginTop=&quot;224dp&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnNext&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:text=&quot;Next&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/button2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:onClick=&quot;closeMethod&quot;\r\n            android:text=&quot;CLose&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\nThe issue is when I don&#39;t put any value into the `firstEditText` or `secondEditText` or both of them and click on any button then the app crashes and a pop up shows &quot;myapp keeps stopping&quot;. \r\nI cannot get the text and am unsure of why the app keeps crashing.","title":"Android app keeps stopping while building using android studio","body":"<p>When I'm trying to transfer data between activities, I can't get my message and the app keeps crashing,\nIt show me 'app keeps stopping'</p>\n<p>Code in MainActivity.java</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    Intent outIntent;\n    EditText edtPhone;\n    EditText edtMessage;\n    Button btnNext;\n    String tempText=&quot;&quot;;\n\n   public static final String PHONE = &quot;PHONE&quot;;\n   public static final  String MESSAGE = &quot;MESSAGE&quot;;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        btnNext = (Button) findViewById(R.id.btnNext);\n        btnNext.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View V) {\n                outIntent = new Intent(MainActivity.this, ActivityTwo.class);\n                edtPhone = (EditText) findViewById(R.id.edtPhone);\n                edtMessage = (EditText) findViewById(R.id.edtMessage);\n                tempText = edtPhone.getText().toString();\n                outIntent.putExtra(PHONE,tempText);\n                tempText = edtMessage.getText().toString();\n                outIntent.putExtra(MESSAGE,tempText);\n\n                startActivity(outIntent);\n            }\n\n    });\n}\n    public void closeMethod(View view) {\n        finish();\n    }\n}\n</code></pre>\n<p>ActivityTwo.java</p>\n<pre><code>package com.example.fir;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.widget.TextView;\n\npublic class ActivityTwo extends AppCompatActivity {\n\n        Intent incomingIntent;\n        TextView txtPhone;\n        TextView txtMessage;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_two);\n        incomingIntent = getIntent();\n        txtPhone = (TextView) findViewById(R.id.txtPhone);\n        txtMessage = (TextView) findViewById(R.id.txtMessage);\n        txtPhone.setText(incomingIntent.getStringExtra(MainActivity.PHONE));\n        txtMessage.setText(incomingIntent.getStringExtra(MainActivity.MESSAGE));\n\n    }\n}\n</code></pre>\n<p>Activitymain.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot; &gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:text=&quot;Phone&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/editTextPhone&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginStart=&quot;0dp&quot;\n        android:layout_marginTop=&quot;60dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Phone&quot;\n        android:inputType=&quot;phone&quot;\n        android:minHeight=&quot;48dp&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginTop=&quot;124dp&quot;\n        android:text=&quot;Message&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/editTextTextPersonName&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_alignParentEnd=&quot;true&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginStart=&quot;0dp&quot;\n        android:layout_marginTop=&quot;156dp&quot;\n        android:layout_marginEnd=&quot;3dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Message&quot;\n        android:inputType=&quot;&quot;\n        android:minHeight=&quot;48dp&quot; /&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginTop=&quot;224dp&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnNext&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:text=&quot;Next&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/button2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:onClick=&quot;closeMethod&quot;\n            android:text=&quot;CLose&quot; /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<pre><code>Activitytwo.xml\n////\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot; &gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginTop=&quot;32dp&quot;\n        android:text=&quot;Phone&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/editTextPhone&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginStart=&quot;0dp&quot;\n        android:layout_marginTop=&quot;60dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Phone&quot;\n        android:inputType=&quot;phone&quot;\n        android:minHeight=&quot;48dp&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginTop=&quot;124dp&quot;\n        android:text=&quot;Message&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/editTextTextPersonName&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_alignParentEnd=&quot;true&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginStart=&quot;0dp&quot;\n        android:layout_marginTop=&quot;156dp&quot;\n        android:layout_marginEnd=&quot;3dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Message&quot;\n        android:inputType=&quot;&quot;\n        android:minHeight=&quot;48dp&quot; /&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentStart=&quot;true&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_marginTop=&quot;224dp&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btnNext&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:text=&quot;Next&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/button2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:onClick=&quot;closeMethod&quot;\n            android:text=&quot;CLose&quot; /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>The issue is when I don't put any value into the <code>firstEditText</code> or <code>secondEditText</code> or both of them and click on any button then the app crashes and a pop up shows &quot;myapp keeps stopping&quot;.\nI cannot get the text and am unsure of why the app keeps crashing.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":4,"creation_date":1694107541,"post_id":77061671,"comment_id":135851223,"body_markdown":"Ah, varargs lambdas, we meet again. In this case the answer is **no**, it is not possible. The method invocation per resolution of `Function&lt;T, R&gt;` is strictly necessary, as those type parameters must be resolved at the call-site of the function. If you want your solution to work, you could make numerous hand-coded overloads for each number of functions possible (up to some sane limit, say 10 or 26), and keep them in some utility file. But at that point I&#39;m not seeing an advantage over your other proposed solutions. Keep in mind you can make your own chainable method like `Optional` did.","body":"Ah, varargs lambdas, we meet again. In this case the answer is <b>no</b>, it is not possible. The method invocation per resolution of <code>Function&lt;T, R&gt;</code> is strictly necessary, as those type parameters must be resolved at the call-site of the function. If you want your solution to work, you could make numerous hand-coded overloads for each number of functions possible (up to some sane limit, say 10 or 26), and keep them in some utility file. But at that point I&#39;m not seeing an advantage over your other proposed solutions. Keep in mind you can make your own chainable method like <code>Optional</code> did."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1694107829,"post_id":77061671,"comment_id":135851266,"body_markdown":"I will say, that your first example would actually be possible with using just the same type on all lambdas. I&#39;ll write a small answer for that.","body":"I will say, that your first example would actually be possible with using just the same type on all lambdas. I&#39;ll write a small answer for that."},{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1694107960,"post_id":77061671,"comment_id":135851284,"body_markdown":"Only if every input and output have the same types, I don&#39;t want to be locked into just one specific input and one output type.","body":"Only if every input and output have the same types, I don&#39;t want to be locked into just one specific input and one output type."},{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1694108044,"post_id":77061671,"comment_id":135851299,"body_markdown":"@Rogue Thanks, I am aware I can make my own chain able method, that&#39;s what a monad is in that sentence&#39;s context.","body":"@Rogue Thanks, I am aware I can make my own chain able method, that&#39;s what a monad is in that sentence&#39;s context."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1694113992,"post_id":77061671,"comment_id":135852312,"body_markdown":"Note things like `n -&gt; n.equals(&quot;0hi1&quot;)` wouldn&#39;t work, but you could `chain(...).equals(&quot;0hi1&quot;);` to get that `boolean`.","body":"Note things like <code>n -&gt; n.equals(&quot;0hi1&quot;)</code> wouldn&#39;t work, but you could <code>chain(...).equals(&quot;0hi1&quot;);</code> to get that <code>boolean</code>."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694116474,"post_id":77061671,"comment_id":135852680,"body_markdown":"What is your use case for this?  What problem are you trying to solve where you need this capability?  It sounds like an  [XY Problem](http://xyproblem.info)","body":"What is your use case for this?  What problem are you trying to solve where you need this capability?  It sounds like an  <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1694123417,"post_id":77061671,"comment_id":135853807,"body_markdown":"Rogue&#39;s first comment answered the question correctly: the answer is no, this is not possible.","body":"Rogue&#39;s first comment answered the question correctly: the answer is no, this is not possible."},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1694138809,"post_id":77061671,"comment_id":135855230,"body_markdown":"&quot;Something like this:&quot; - did you **try it**? What happened when you tried it?","body":"&quot;Something like this:&quot; - did you <b>try it</b>? What happened when you tried it?"},{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1694140277,"post_id":77061671,"comment_id":135855315,"body_markdown":"@WJS The question is purely academic, it&#39;s not in a context of a problem because the problem is whether it&#39;s possible to achieve that syntax.","body":"@WJS The question is purely academic, it&#39;s not in a context of a problem because the problem is whether it&#39;s possible to achieve that syntax."},{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1694140355,"post_id":77061671,"comment_id":135855321,"body_markdown":"@KarlKnechtel It complains that wildcard cannot be assigned to Object","body":"@KarlKnechtel It complains that wildcard cannot be assigned to Object"},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1694140771,"post_id":77061671,"comment_id":135855349,"body_markdown":"Right; the problem is that the recursion cannot work because it does not know what type will be returned, and therefore it cannot verify that the next step in the recursion makes any sense. For this kind of function composition to work, you need an `InputType` result at each step except possibly the last, and then special-casing the last step is not feasible.","body":"Right; the problem is that the recursion cannot work because it does not know what type will be returned, and therefore it cannot verify that the next step in the recursion makes any sense. For this kind of function composition to work, you need an <code>InputType</code> result at each step except possibly the last, and then special-casing the last step is not feasible."}],"answers":[{"tags":[],"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1694113978,"creation_date":1694108795,"answer_id":77061817,"question_id":77061671,"body_markdown":"With the assumption that _all_ functions in the call are of the same type, then it can be done with a simple generic type on the method:\r\n\r\n    public static &lt;T&gt; T chain(\r\n            T val,\r\n            Function&lt;T, T&gt;... functions\r\n    ) {\r\n        if (functions.length == 0) return val;\r\n        var nextInput = functions[0].apply(val);\r\n        if (functions.length == 1) return nextInput;\r\n        var tail = Arrays.copyOfRange(functions, 1, functions.length);\r\n        return chain(nextInput, tail);\r\n    }\r\n\r\nThere are other improvements that could be made (e.g. just using an index counter for the recursion to avoid array copies, or not being recursive). Be extra careful of boundary conditions, e.g. passing an empty call.\r\n\r\nUsing this, you may use any type for the input, and the functions will require operating on the same input and output types.","title":"Is it possible to recursively chain generic functions?","body":"<p>With the assumption that <em>all</em> functions in the call are of the same type, then it can be done with a simple generic type on the method:</p>\n<pre><code>public static &lt;T&gt; T chain(\n        T val,\n        Function&lt;T, T&gt;... functions\n) {\n    if (functions.length == 0) return val;\n    var nextInput = functions[0].apply(val);\n    if (functions.length == 1) return nextInput;\n    var tail = Arrays.copyOfRange(functions, 1, functions.length);\n    return chain(nextInput, tail);\n}\n</code></pre>\n<p>There are other improvements that could be made (e.g. just using an index counter for the recursion to avoid array copies, or not being recursive). Be extra careful of boundary conditions, e.g. passing an empty call.</p>\n<p>Using this, you may use any type for the input, and the functions will require operating on the same input and output types.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694140171,"creation_date":1694127663,"answer_id":77063287,"question_id":77061671,"body_markdown":"&gt; _&quot;Is it possible to recursively chain generic functions? ..._\r\n&gt;\r\n&gt; _... How can I make the method accept an arbitrary amount of functions? ...&quot;_\r\n\r\nYour example will suffice, just utilize a _raw generic_; un-parameterized.\r\n\r\nThere&#39;s no reason to define a parameter if you&#39;re intending to use a _wildcard generic_ with _A_, _B_, _C_, and _D_.\r\n\r\n_[Raw Types (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Generics (Updated))](https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)_.\r\n\r\nThis will discourage a plausible overhead to the _functions_ array, and will provide fully restricted access to _val_ within _chain_.  \r\n\r\n```java\r\n@SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\r\npublic Object chain(Object val, Function ... functions) {\r\n    Object nextInput = functions[0].apply(val);\r\n    if (functions.length == 1) return nextInput;\r\n    Function[] tail = Arrays.copyOfRange(functions, 1, functions.length);\r\n    return chain(nextInput, tail);\r\n}\r\n```\r\n\r\nHere is a usage.  \r\nI had to _cast_ the third function here, _n_&#39;s type is otherwise ambiguous. \r\n\r\n```java\r\nvar output = chain(\r\n    0,\r\n    n -&gt;n +&quot;hi&quot;,\r\n    n -&gt;n,\r\n    (Function&lt;String, ?&gt;) n -&gt;n +1,\r\n    n -&gt;n.equals(&quot;0hi1&quot;)\r\n);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\ntrue\r\n```\r\n\r\n&gt; _&quot;... Is there some recursive function I could write, something that accepts varargs maybe? ...&quot;_\r\n\r\nConsidering you are passing a modified _array_ for each recursive _chain_ call, I&#39;d recommend creating a class.  \r\nHere you can provide a dynamic list of values, to a set of recursive _chain_ calls.\r\n\r\n```java\r\n@SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\r\npublic Object chain(Object val, Function ... functions) {\r\n    @SuppressWarnings(&quot;rawtypes, unchecked&quot;)\r\n    class Chain {\r\n        Object x;\r\n        List&lt;Function&gt; list = new ArrayList&lt;&gt;();\r\n\r\n        Chain(Object x, Function ... functions) {\r\n            this.x = x;\r\n            list.addAll(List.of(functions));\r\n            chain();\r\n        }\r\n\r\n        void chain() {\r\n            x = list.get(0).apply(x);\r\n            if (list.size() == 1) return;\r\n            list.remove(0);\r\n            chain();\r\n        }\r\n\r\n        Object get() {\r\n            return x;\r\n        }\r\n    }\r\n    return new Chain(val, functions).get();\r\n}\r\n```","title":"Is it possible to recursively chain generic functions?","body":"<blockquote>\n<p><em>&quot;Is it possible to recursively chain generic functions? ...</em></p>\n<p><em>... How can I make the method accept an arbitrary amount of functions? ...&quot;</em></p>\n</blockquote>\n<p>Your example will suffice, just utilize a <em>raw generic</em>; un-parameterized.</p>\n<p>There's no reason to define a parameter if you're intending to use a <em>wildcard generic</em> with <em>A</em>, <em>B</em>, <em>C</em>, and <em>D</em>.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html\" rel=\"nofollow noreferrer\">Raw Types (The Java‚Ñ¢ Tutorials &gt; Learning the Java Language &gt; Generics (Updated))</a></em>.</p>\n<p>This will discourage a plausible overhead to the <em>functions</em> array, and will provide fully restricted access to <em>val</em> within <em>chain</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\npublic Object chain(Object val, Function ... functions) {\n    Object nextInput = functions[0].apply(val);\n    if (functions.length == 1) return nextInput;\n    Function[] tail = Arrays.copyOfRange(functions, 1, functions.length);\n    return chain(nextInput, tail);\n}\n</code></pre>\n<p>Here is a usage.<br />\nI had to <em>cast</em> the third function here, <em>n</em>'s type is otherwise ambiguous.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var output = chain(\n    0,\n    n -&gt;n +&quot;hi&quot;,\n    n -&gt;n,\n    (Function&lt;String, ?&gt;) n -&gt;n +1,\n    n -&gt;n.equals(&quot;0hi1&quot;)\n);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>true\n</code></pre>\n<blockquote>\n<p><em>&quot;... Is there some recursive function I could write, something that accepts varargs maybe? ...&quot;</em></p>\n</blockquote>\n<p>Considering you are passing a modified <em>array</em> for each recursive <em>chain</em> call, I'd recommend creating a class.<br />\nHere you can provide a dynamic list of values, to a set of recursive <em>chain</em> calls.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\npublic Object chain(Object val, Function ... functions) {\n    @SuppressWarnings(&quot;rawtypes, unchecked&quot;)\n    class Chain {\n        Object x;\n        List&lt;Function&gt; list = new ArrayList&lt;&gt;();\n\n        Chain(Object x, Function ... functions) {\n            this.x = x;\n            list.addAll(List.of(functions));\n            chain();\n        }\n\n        void chain() {\n            x = list.get(0).apply(x);\n            if (list.size() == 1) return;\n            list.remove(0);\n            chain();\n        }\n\n        Object get() {\n            return x;\n        }\n    }\n    return new Chain(val, functions).get();\n}\n</code></pre>\n"}],"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694140171,"creation_date":1694107364,"question_id":77061671,"body_markdown":"Given I have the following code:\r\n```java\r\nvar output = chain(\r\n        0,\r\n        n -&gt; n + &quot;hi&quot;,\r\n        n -&gt; n,\r\n        n -&gt; n + 1,\r\n        n -&gt; n.equals(&quot;0hi1&quot;)\r\n);\r\n```\r\n\r\nHow can I make the method accept an arbitrary amount of functions?\r\n\r\nI know I can do this:\r\n```java\r\npublic static &lt;A, B, C, D, E&gt; E chain(\r\n        A val,\r\n        Function&lt;? super A, ? extends B&gt; f1,\r\n        Function&lt;? super B, ? extends C&gt; f2,\r\n        Function&lt;? super C, ? extends D&gt; f3,\r\n        Function&lt;? super D, ? extends E&gt; f4\r\n) {\r\n    return f4.apply(f3.apply(f2.apply(f1.apply(val))));\r\n}\r\n```\r\n\r\nBut that severely limits the amount of inputs.\r\n\r\nIs there some recursive function I could write, something that accepts varargs maybe? \r\n\r\nSomething like this:\r\n```java\r\npublic static OutputType chain(\r\n        InputType val,\r\n        Function&lt;?, ?&gt;... functions\r\n) {\r\n    var nextInput = functions[0].apply(val);\r\n    if (functions.length == 1) return nextInput;\r\n    var tail = Arrays.copyOfRange(functions, 1, functions.length);\r\n    return chain(nextInput, tail);\r\n}\r\n```\r\n\r\nI am aware that I can create a monad, or use streams, or use optional to chain transformations as such:\r\n```java\r\nvar output = Optional\r\n        .of(0)\r\n        .map(n -&gt; n + &quot;hi&quot;)\r\n        .map(n -&gt; n)\r\n        .map(n -&gt; n + 1)\r\n        .map(n -&gt; n.equals(&quot;0hi1&quot;))\r\n        .get();\r\n```\r\nBut I specifically DO NOT WANT TO do that. I want to achieve the style visible in that 1st code block.","title":"Is it possible to recursively chain generic functions?","body":"<p>Given I have the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var output = chain(\n        0,\n        n -&gt; n + &quot;hi&quot;,\n        n -&gt; n,\n        n -&gt; n + 1,\n        n -&gt; n.equals(&quot;0hi1&quot;)\n);\n</code></pre>\n<p>How can I make the method accept an arbitrary amount of functions?</p>\n<p>I know I can do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;A, B, C, D, E&gt; E chain(\n        A val,\n        Function&lt;? super A, ? extends B&gt; f1,\n        Function&lt;? super B, ? extends C&gt; f2,\n        Function&lt;? super C, ? extends D&gt; f3,\n        Function&lt;? super D, ? extends E&gt; f4\n) {\n    return f4.apply(f3.apply(f2.apply(f1.apply(val))));\n}\n</code></pre>\n<p>But that severely limits the amount of inputs.</p>\n<p>Is there some recursive function I could write, something that accepts varargs maybe?</p>\n<p>Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static OutputType chain(\n        InputType val,\n        Function&lt;?, ?&gt;... functions\n) {\n    var nextInput = functions[0].apply(val);\n    if (functions.length == 1) return nextInput;\n    var tail = Arrays.copyOfRange(functions, 1, functions.length);\n    return chain(nextInput, tail);\n}\n</code></pre>\n<p>I am aware that I can create a monad, or use streams, or use optional to chain transformations as such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var output = Optional\n        .of(0)\n        .map(n -&gt; n + &quot;hi&quot;)\n        .map(n -&gt; n)\n        .map(n -&gt; n + 1)\n        .map(n -&gt; n.equals(&quot;0hi1&quot;))\n        .get();\n</code></pre>\n<p>But I specifically DO NOT WANT TO do that. I want to achieve the style visible in that 1st code block.</p>\n"},{"tags":["java","spring","spring-security","jwt","bearer-token"],"answers":[{"comments":[{"owner":{"account_id":24548424,"reputation":1,"user_id":18457886,"display_name":"abdulai bah"},"score":0,"creation_date":1694182117,"post_id":77063786,"comment_id":135861840,"body_markdown":"I tried that man and it didnt work","body":"I tried that man and it didnt work"}],"tags":[],"owner":{"account_id":3120239,"reputation":11,"user_id":2640162,"display_name":"fooshy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694139678,"creation_date":1694139678,"answer_id":77063786,"question_id":77063745,"body_markdown":"As far as I can see your JWT has defined scope, not role - the authorization process is expecting a scope check (as authority), not a role check? \r\n\r\n    .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n\r\nTry changing this line to:\r\n\r\n    .requestMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;SCOPE_ADMIN&quot;)\r\n\r\n\r\n\r\n","title":"Spring security Jwt bearer token encoding/decoding error","body":"<p>As far as I can see your JWT has defined scope, not role - the authorization process is expecting a scope check (as authority), not a role check?</p>\n<pre><code>.requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n</code></pre>\n<p>Try changing this line to:</p>\n<pre><code>.requestMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;SCOPE_ADMIN&quot;)\n</code></pre>\n"}],"owner":{"account_id":24548424,"reputation":1,"user_id":18457886,"display_name":"abdulai bah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694139678,"creation_date":1694138833,"question_id":77063745,"body_markdown":"When trying to validate a jwt bearer token from a user I&#39;am getting a 403 error and the headers are telling me that my token has insufficent scope.I&#39;am wondering where I went wrong in the process of encoding the scope,or if the way im decoding tokens is incorrect.\r\n\r\n**Security Configuration**\r\n```\r\n@Configuration\r\npublic class SecurityConfiguration {\r\n    private final RSAKeyConfig keys;\r\n    public SecurityConfiguration(RSAKeyConfig keys) {\r\n        this.keys = keys;\r\n    }\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n    @Bean\r\n    public AuthenticationManager authManager(UserDetailsService detailsService) {\r\n        DaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\r\n        daoProvider.setUserDetailsService(detailsService);\r\n        daoProvider.setPasswordEncoder(passwordEncoder());\r\n        return new ProviderManager(daoProvider);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                        .requestMatchers(&quot;/auth/**&quot;).permitAll()\r\n                        .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                        .requestMatchers(&quot;/user/**&quot;).hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\r\n                        .anyRequest().authenticated());\r\n\r\n\r\n\r\n        http\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n                        .jwt(jwt -&gt; jwt.jwtAuthenticationConverter(jwtConverter())));\r\n\r\n\r\n        http\r\n                .sessionManagement(session -&gt; session\r\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n\r\n\r\n\r\n        return http.build();\r\n\r\n\r\n    }\r\n\r\n    @Bean\r\n    public JwtDecoder jwtDecoder() {\r\n        System.out.print(&quot;decoder&quot;);\r\n        return NimbusJwtDecoder.withPublicKey(keys.getPublicKey()).build();\r\n    }\r\n\r\n    @Bean\r\n    public JwtEncoder jwtEncoder() {\r\n        JWK jwk = new RSAKey.Builder(keys.getPublicKey())\r\n                .privateKey(keys.getPrivateKey()).build();\r\n        JWKSource&lt;SecurityContext&gt; jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\r\n\r\n        return new NimbusJwtEncoder(jwks);\r\n\r\n    }\r\n\r\n    @Bean\r\n    public JwtAuthenticationConverter jwtConverter() {\r\n        System.out.println(&quot;jwt converter&quot;);\r\n        JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n        jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\r\n        jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;Roles_&quot;);\r\n        JwtAuthenticationConverter jwtconverter = new JwtAuthenticationConverter();\r\n        jwtconverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\r\n\r\n        return jwtconverter;\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n**Token Service**\r\n```\r\n@Service\r\npublic class TokenService {\r\n\r\n    @Autowired\r\n    private JwtEncoder jwtEncoder;\r\n\r\n    @Autowired\r\n    private JwtDecoder jwtDecoder;\r\n\r\n    public String generateJwt(Authentication auth) {\r\n\r\n        Instant now = Instant.now();\r\n\r\n        String scope = auth.getAuthorities().stream()\r\n                .map(GrantedAuthority::getAuthority)\r\n                .collect(Collectors.joining(&quot; &quot;));\r\n\r\n        JwtClaimsSet claims = JwtClaimsSet.builder()\r\n                .issuer(&quot;self&quot;)\r\n                .issuedAt(now)\r\n                .subject(auth.getName())\r\n                .claim(&quot;roles&quot;, scope)\r\n                .build();\r\n\r\n        System.out.print(claims);\r\n\r\n        return jwtEncoder.encode(JwtEncoderParameters.from(claims))\r\n.getTokenValue();\r\n\r\n    }\r\n}\r\n```\r\n**Key configuration**\r\n```\r\n@Component\r\n@Data\r\npublic class RSAKeyConfig {\r\n\r\n    private RSAPublicKey publicKey;\r\n\r\n    private RSAPrivateKey privateKey;\r\n\r\n    public RSAKeyConfig(){\r\n        KeyPair pair = KeyGenerator.generateRsaKey();\r\n        this.publicKey = (RSAPublicKey) pair.getPublic();\r\n        this.privateKey = (RSAPrivateKey) pair.getPrivate();\r\n    }\r\n}\r\n```\r\n**Key Generator**\r\n```\r\npublic class KeyGenerator {\r\n\r\n    public static KeyPair generateRsaKey(){\r\n\r\n\r\n        KeyPair keyPair;\r\n\r\n        try{\r\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\r\n            keyPairGenerator.initialize(2048);\r\n            keyPair = keyPairGenerator.generateKeyPair();\r\n        }catch(Exception e){\r\n            throw new IllegalStateException();\r\n        }\r\n\r\n        return keyPair;\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve tried tinkering with the security filter chain but that seems to be futile.\r\n**relevent dependencies im using**\r\n[1](https://i.stack.imgur.com/Aeshq.png)\r\n[2](https://i.stack.imgur.com/su3Ku.png)\r\n","title":"Spring security Jwt bearer token encoding/decoding error","body":"<p>When trying to validate a jwt bearer token from a user I'am getting a 403 error and the headers are telling me that my token has insufficent scope.I'am wondering where I went wrong in the process of encoding the scope,or if the way im decoding tokens is incorrect.</p>\n<p><strong>Security Configuration</strong></p>\n<pre><code>@Configuration\npublic class SecurityConfiguration {\n    private final RSAKeyConfig keys;\n    public SecurityConfiguration(RSAKeyConfig keys) {\n        this.keys = keys;\n    }\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n    @Bean\n    public AuthenticationManager authManager(UserDetailsService detailsService) {\n        DaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\n        daoProvider.setUserDetailsService(detailsService);\n        daoProvider.setPasswordEncoder(passwordEncoder());\n        return new ProviderManager(daoProvider);\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(auth -&gt; auth\n                        .requestMatchers(&quot;/auth/**&quot;).permitAll()\n                        .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n                        .requestMatchers(&quot;/user/**&quot;).hasAnyRole(&quot;ADMIN&quot;, &quot;USER&quot;)\n                        .anyRequest().authenticated());\n\n\n\n        http\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\n                        .jwt(jwt -&gt; jwt.jwtAuthenticationConverter(jwtConverter())));\n\n\n        http\n                .sessionManagement(session -&gt; session\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n\n\n\n        return http.build();\n\n\n    }\n\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        System.out.print(&quot;decoder&quot;);\n        return NimbusJwtDecoder.withPublicKey(keys.getPublicKey()).build();\n    }\n\n    @Bean\n    public JwtEncoder jwtEncoder() {\n        JWK jwk = new RSAKey.Builder(keys.getPublicKey())\n                .privateKey(keys.getPrivateKey()).build();\n        JWKSource&lt;SecurityContext&gt; jwks = new ImmutableJWKSet&lt;&gt;(new JWKSet(jwk));\n\n        return new NimbusJwtEncoder(jwks);\n\n    }\n\n    @Bean\n    public JwtAuthenticationConverter jwtConverter() {\n        System.out.println(&quot;jwt converter&quot;);\n        JwtGrantedAuthoritiesConverter jwtGrantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n        jwtGrantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;);\n        jwtGrantedAuthoritiesConverter.setAuthorityPrefix(&quot;Roles_&quot;);\n        JwtAuthenticationConverter jwtconverter = new JwtAuthenticationConverter();\n        jwtconverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter);\n\n        return jwtconverter;\n\n    }\n\n\n}\n</code></pre>\n<p><strong>Token Service</strong></p>\n<pre><code>@Service\npublic class TokenService {\n\n    @Autowired\n    private JwtEncoder jwtEncoder;\n\n    @Autowired\n    private JwtDecoder jwtDecoder;\n\n    public String generateJwt(Authentication auth) {\n\n        Instant now = Instant.now();\n\n        String scope = auth.getAuthorities().stream()\n                .map(GrantedAuthority::getAuthority)\n                .collect(Collectors.joining(&quot; &quot;));\n\n        JwtClaimsSet claims = JwtClaimsSet.builder()\n                .issuer(&quot;self&quot;)\n                .issuedAt(now)\n                .subject(auth.getName())\n                .claim(&quot;roles&quot;, scope)\n                .build();\n\n        System.out.print(claims);\n\n        return jwtEncoder.encode(JwtEncoderParameters.from(claims))\n.getTokenValue();\n\n    }\n}\n</code></pre>\n<p><strong>Key configuration</strong></p>\n<pre><code>@Component\n@Data\npublic class RSAKeyConfig {\n\n    private RSAPublicKey publicKey;\n\n    private RSAPrivateKey privateKey;\n\n    public RSAKeyConfig(){\n        KeyPair pair = KeyGenerator.generateRsaKey();\n        this.publicKey = (RSAPublicKey) pair.getPublic();\n        this.privateKey = (RSAPrivateKey) pair.getPrivate();\n    }\n}\n</code></pre>\n<p><strong>Key Generator</strong></p>\n<pre><code>public class KeyGenerator {\n\n    public static KeyPair generateRsaKey(){\n\n\n        KeyPair keyPair;\n\n        try{\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\n            keyPairGenerator.initialize(2048);\n            keyPair = keyPairGenerator.generateKeyPair();\n        }catch(Exception e){\n            throw new IllegalStateException();\n        }\n\n        return keyPair;\n\n    }\n}\n</code></pre>\n<p>I've tried tinkering with the security filter chain but that seems to be futile.\n<strong>relevent dependencies im using</strong>\n<a href=\"https://i.stack.imgur.com/Aeshq.png\" rel=\"nofollow noreferrer\">1</a>\n<a href=\"https://i.stack.imgur.com/su3Ku.png\" rel=\"nofollow noreferrer\">2</a></p>\n"},{"tags":["java","spring","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":8681662,"reputation":11,"user_id":6497316,"display_name":"SamP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694138906,"creation_date":1694138906,"answer_id":77063748,"question_id":76483442,"body_markdown":"I had a similar issue and the challenge was that I did not have direct access to register redirect URIs in our provider (Azure). This limited my tests so please consider the following only as a reference.\r\n\r\nI ended up requesting to add three redirect URIs and only one solved my issue. It seems that Spring is a little strict in the redirect URI formats. I ended up using redirect URI that matches the default which is:\r\n\r\n    {baseUrl}/login/oauth2/code/{registrationId}\r\n\r\nSpring also has an option to customize this redirect URI (haven&#39;t tested but I would assume the format also matters):\r\n\r\nhttps://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-redirection-endpoint","title":"OAuth2 with Spring security causing redirect loop","body":"<p>I had a similar issue and the challenge was that I did not have direct access to register redirect URIs in our provider (Azure). This limited my tests so please consider the following only as a reference.</p>\n<p>I ended up requesting to add three redirect URIs and only one solved my issue. It seems that Spring is a little strict in the redirect URI formats. I ended up using redirect URI that matches the default which is:</p>\n<pre><code>{baseUrl}/login/oauth2/code/{registrationId}\n</code></pre>\n<p>Spring also has an option to customize this redirect URI (haven't tested but I would assume the format also matters):</p>\n<p><a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-redirection-endpoint\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-redirection-endpoint</a></p>\n"}],"owner":{"account_id":28828216,"reputation":1,"user_id":22079272,"display_name":"you_know_who"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694138906,"creation_date":1686844325,"question_id":76483442,"body_markdown":"I have a Java Spring application. I tried to configure OAuth2. So, far I have got the redirect to the SS) page correctly. Afterwards, if I enter the correct username and pwd, it acknowledges my login and then I get a redirect loop.\r\n\r\napplication.yml\r\n\r\n```\r\nauthorization-grant-type: authorization_code\r\nredirect-uri: http://localhost:1234/oauth2/callback\r\n```\r\n\r\nI have set the authorization uri and token uri correctly.\r\n\r\nThis is my OAuthSecurityConfiguration.java code\r\n\r\n```\r\n@Configuration\r\npublic class OAuthSecurityConfiguration {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.anonymous().disable();\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/my-gui/**&quot;).authenticated()\r\n                .anyRequest().permitAll()\r\n                .and()\r\n                .oauth2Login();\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    WebClient webClient(ClientRegistrationRepository clientRegistrationRepository, OAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2 = new ServletOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrationRepository, authorizedClientRepository);\r\n        oauth2.setDefaultOAuth2AuthorizedClient(true);\r\n        return WebClient.builder()\r\n                .apply(oauth2.oauth2Configuration())\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nThis is my OAuthController code\r\n\r\n```\r\n@Controller\r\npublic class OAuthController {\r\n\r\n    @Autowired\r\n    private OAuth2AuthorizedClientService authorizedClientService;\r\n\r\n    @GetMapping(&quot;/oauth2/callback&quot;)\r\n    public String handleCallback(HttpServletRequest request, Model model) {\r\n        // Get the OAuth2AuthenticationToken from the request\r\n        OAuth2AuthenticationToken authentication = (OAuth2AuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\r\n        // Get the authorized client from the authentication\r\n        OAuth2AuthorizedClient authorizedClient = authorizedClientService.loadAuthorizedClient(authentication.getAuthorizedClientRegistrationId(), authentication.getName());\r\n\r\n        // Redirect to the protected page with the access token included as a query parameter\r\n        return &quot;redirect:/my-gui/index.html?access_token=&quot; + authorizedClient.getAccessToken().getTokenValue();\r\n    }\r\n}\r\n```\r\n\r\nSo, I try to open localhost:1234/my-gui/index.html. This redirects me to an SSO page which is th eexpected behaviour. Here, when I enter the correct username and pwd, I expect it to open localhost:1234/my-gui/index.html which is why I redirect in OAuthController as well. But it just throws me a redirect loop.\r\n\r\nI think it is due to the redirect going to a page that needs authentication and causes the loop. Basically, what I want to achieve is have OAuth authentication on localhost:1234/my-gui/index.html and when someone enters the correct pwd, they should see the page.","title":"OAuth2 with Spring security causing redirect loop","body":"<p>I have a Java Spring application. I tried to configure OAuth2. So, far I have got the redirect to the SS) page correctly. Afterwards, if I enter the correct username and pwd, it acknowledges my login and then I get a redirect loop.</p>\n<p>application.yml</p>\n<pre><code>authorization-grant-type: authorization_code\nredirect-uri: http://localhost:1234/oauth2/callback\n</code></pre>\n<p>I have set the authorization uri and token uri correctly.</p>\n<p>This is my OAuthSecurityConfiguration.java code</p>\n<pre><code>@Configuration\npublic class OAuthSecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.anonymous().disable();\n        http.authorizeRequests()\n                .antMatchers(&quot;/my-gui/**&quot;).authenticated()\n                .anyRequest().permitAll()\n                .and()\n                .oauth2Login();\n        return http.build();\n    }\n\n    @Bean\n    WebClient webClient(ClientRegistrationRepository clientRegistrationRepository, OAuth2AuthorizedClientRepository authorizedClientRepository) {\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2 = new ServletOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrationRepository, authorizedClientRepository);\n        oauth2.setDefaultOAuth2AuthorizedClient(true);\n        return WebClient.builder()\n                .apply(oauth2.oauth2Configuration())\n                .build();\n    }\n}\n</code></pre>\n<p>This is my OAuthController code</p>\n<pre><code>@Controller\npublic class OAuthController {\n\n    @Autowired\n    private OAuth2AuthorizedClientService authorizedClientService;\n\n    @GetMapping(&quot;/oauth2/callback&quot;)\n    public String handleCallback(HttpServletRequest request, Model model) {\n        // Get the OAuth2AuthenticationToken from the request\n        OAuth2AuthenticationToken authentication = (OAuth2AuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\n        // Get the authorized client from the authentication\n        OAuth2AuthorizedClient authorizedClient = authorizedClientService.loadAuthorizedClient(authentication.getAuthorizedClientRegistrationId(), authentication.getName());\n\n        // Redirect to the protected page with the access token included as a query parameter\n        return &quot;redirect:/my-gui/index.html?access_token=&quot; + authorizedClient.getAccessToken().getTokenValue();\n    }\n}\n</code></pre>\n<p>So, I try to open localhost:1234/my-gui/index.html. This redirects me to an SSO page which is th eexpected behaviour. Here, when I enter the correct username and pwd, I expect it to open localhost:1234/my-gui/index.html which is why I redirect in OAuthController as well. But it just throws me a redirect loop.</p>\n<p>I think it is due to the redirect going to a page that needs authentication and causes the loop. Basically, what I want to achieve is have OAuth authentication on localhost:1234/my-gui/index.html and when someone enters the correct pwd, they should see the page.</p>\n"},{"tags":["java","sql","hibernate","java-annotations"],"comments":[{"owner":{"account_id":1751963,"reputation":531,"user_id":1600844,"accept_rate":33,"display_name":"Gustavo"},"score":1,"creation_date":1387169425,"post_id":20603638,"comment_id":30830024,"body_markdown":"http://docs.oracle.com/javaee/5/api/javax/persistence/GenerationType.html","body":"<a href=\"http://docs.oracle.com/javaee/5/api/javax/persistence/GenerationType.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/5/api/javax/persistence/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":3668752,"reputation":6568,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"score":11,"creation_date":1387171024,"post_id":20603687,"comment_id":30830494,"body_markdown":"&quot;Indicates that the persistence provider must assign primary keys for the entity using a database identity column.&quot;can you expalain this","body":"&quot;Indicates that the persistence provider must assign primary keys for the entity using a database identity column.&quot;can you expalain this"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":3,"creation_date":1387171666,"post_id":20603687,"comment_id":30830694,"body_markdown":"@404 One strategy databases use for generating their primary keys is to keep a table with a column (YMMV) where they only store assigned ids. When a new row has to be entered, a new id will be generated and used that was not originally in the table.","body":"@404 One strategy databases use for generating their primary keys is to keep a table with a column (YMMV) where they only store assigned ids. When a new row has to be entered, a new id will be generated and used that was not originally in the table."},{"owner":{"account_id":3668752,"reputation":6568,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"score":1,"creation_date":1387171872,"post_id":20603687,"comment_id":30830759,"body_markdown":"so auto incrementing of id is it?","body":"so auto incrementing of id is it?"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1387172000,"post_id":20603687,"comment_id":30830799,"body_markdown":"@404 I think it depends on the database. With MySQL that&#39;s what it seems like, but it might be different with other DBs.","body":"@404 I think it depends on the database. With MySQL that&#39;s what it seems like, but it might be different with other DBs."}],"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":4,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1387169517,"creation_date":1387169517,"answer_id":20603687,"question_id":20603638,"body_markdown":"In a Object Relational Mapping context, every object needs to have a unique identifier. You use the [`@Id`][1] annotation to specify the primary key of an entity.\r\n\r\n\r\nThe [`@GeneratedValue`][2] annotation is used to specify how the primary key should be generated. In your example you are using an [`Identity`][3] strategy which\r\n\r\n&gt; Indicates that the persistence provider must assign primary keys for\r\n&gt; the entity using a database identity column.\r\n\r\nThere are other strategies, you can see more [here][4].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/7/api/javax/persistence/Id.html\r\n  [2]: http://docs.oracle.com/javaee/7/api/javax/persistence/GeneratedValue.html\r\n  [3]: http://docs.oracle.com/javaee/7/api/javax/persistence/GenerationType.html#IDENTITY\r\n  [4]: https://stackoverflow.com/questions/10041938/how-to-choose-the-id-generation-strategy-when-using-hibernate","title":"what is the use of annotations @Id and @GeneratedValue(strategy = GenerationType.IDENTITY)? Why the generationtype is identity?","body":"<p>In a Object Relational Mapping context, every object needs to have a unique identifier. You use the <a href=\"http://docs.oracle.com/javaee/7/api/javax/persistence/Id.html\" rel=\"noreferrer\"><code>@Id</code></a> annotation to specify the primary key of an entity.</p>\n\n<p>The <a href=\"http://docs.oracle.com/javaee/7/api/javax/persistence/GeneratedValue.html\" rel=\"noreferrer\"><code>@GeneratedValue</code></a> annotation is used to specify how the primary key should be generated. In your example you are using an <a href=\"http://docs.oracle.com/javaee/7/api/javax/persistence/GenerationType.html#IDENTITY\" rel=\"noreferrer\"><code>Identity</code></a> strategy which</p>\n\n<blockquote>\n  <p>Indicates that the persistence provider must assign primary keys for\n  the entity using a database identity column.</p>\n</blockquote>\n\n<p>There are other strategies, you can see more <a href=\"https://stackoverflow.com/questions/10041938/how-to-choose-the-id-generation-strategy-when-using-hibernate\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":2534969,"reputation":565,"user_id":3632455,"accept_rate":30,"display_name":"hariprasad"},"score":2,"creation_date":1489858316,"post_id":20605392,"comment_id":72858922,"body_markdown":"The proper syntax of annotation SequenceGenerator for Oracle 11.2 is @SequenceGenerator(name=&quot;seq&quot;, sequenceName=&quot;ORACLE_SEQ&quot;, allocationSize=1). Otherwise without allocationSize parameter it gives very strange generated results (in my case negative).","body":"The proper syntax of annotation SequenceGenerator for Oracle 11.2 is @SequenceGenerator(name=&quot;seq&quot;, sequenceName=&quot;ORACLE_SEQ&quot;, allocationSize=1). Otherwise without allocationSize parameter it gives very strange generated results (in my case negative)."},{"owner":{"account_id":1289950,"reputation":2671,"user_id":1242236,"display_name":"Rugal"},"score":0,"creation_date":1490308201,"post_id":20605392,"comment_id":73067949,"body_markdown":"@hariprasad In my case if I don&#39;t set it, the increment is 10. But still this is an optional parameter.","body":"@hariprasad In my case if I don&#39;t set it, the increment is 10. But still this is an optional parameter."},{"owner":{"account_id":11764939,"reputation":3827,"user_id":8609847,"display_name":"Satish Patro"},"score":0,"creation_date":1549618326,"post_id":20605392,"comment_id":95975093,"body_markdown":"One of my friend said @Id is for uniquely identitfy. If you will follow code first approach then it will be primary key else difference. can you explain the above said sentence?","body":"One of my friend said @Id is for uniquely identitfy. If you will follow code first approach then it will be primary key else difference. can you explain the above said sentence?"},{"owner":{"account_id":1289950,"reputation":2671,"user_id":1242236,"display_name":"Rugal"},"score":0,"creation_date":1550263971,"post_id":20605392,"comment_id":96219556,"body_markdown":"@PSatishPatro Correct, Id is for unique record of course. But we will always have such stuff in table definition, even for NoSQL","body":"@PSatishPatro Correct, Id is for unique record of course. But we will always have such stuff in table definition, even for NoSQL"},{"owner":{"account_id":1289950,"reputation":2671,"user_id":1242236,"display_name":"Rugal"},"score":1,"creation_date":1641559671,"post_id":20605392,"comment_id":124841463,"body_markdown":"@SatishPatro According to Javadoc, it is used for primary key","body":"@SatishPatro According to Javadoc, it is used for primary key"},{"owner":{"account_id":20487658,"reputation":82,"user_id":15034418,"display_name":"Aakash Thakur"},"score":0,"creation_date":1678170796,"post_id":20605392,"comment_id":133476799,"body_markdown":"Is there no use of sequence when working with MySQL database?","body":"Is there no use of sequence when working with MySQL database?"}],"tags":[],"owner":{"account_id":1289950,"reputation":2671,"user_id":1242236,"display_name":"Rugal"},"comment_count":6,"down_vote_count":0,"up_vote_count":180,"is_accepted":true,"score":180,"last_activity_date":1689837918,"creation_date":1387178408,"answer_id":20605392,"question_id":20603638,"body_markdown":"First of all, using annotations as our configure method is just a convenient method instead of coping the endless XML configuration file.  \r\n\r\nThe `@Id`annotation is inherited from `javax.persistence.Id`, indicating the member field below is the primary key of current entity. Hence your Hibernate and spring framework as well as you can do some `reflect` works based on this annotation. For details, please check [javadoc for Id](http://docs.oracle.com/javaee/6/api/javax/persistence/Id.html)  \r\n\r\nThe `@GeneratedValue` annotation is to configure the way of increment of the specified column(field). For example, when using `Mysql`, you may specify `auto_increment` in the definition of table to make it self-incremental, and then use \r\n\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\r\nin the Java code to denote that you also acknowledged to use this database server side strategy. Also, you may change the value in this annotation to fit different requirements. \r\n\r\n### 1. Define Sequence in database\r\n\r\nFor instance, Oracle has to use `sequence` as increment method, say we create a sequence in Oracle:  \r\n\r\n    create sequence oracle_seq;\r\n\r\n### 2. Refer the database sequence\r\n\r\nNow that we have the sequence in database, but we need to establish the relation between Java and DB, by using [`@SequenceGenerator`](http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html):\r\n\r\n    @SequenceGenerator(name=&quot;seq&quot;,sequenceName=&quot;oracle_seq&quot;)\r\n\r\n`sequenceName` is the real name of a sequence in Oracle, `name` is what you want to call it in Java.  You need to specify `sequenceName` if it is different from `name`, otherwise just use `name`.  I usually ignore `sequenceName` to save my time.  \r\n\r\n\r\n### 3. Use sequence in Java\r\n\r\nFinally, it is time to make use this sequence in Java. Just add [`@GeneratedValue`](http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html):  \r\n\r\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;seq&quot;)\r\n\r\nThe `generator` field refers to which sequence generator you want to use. Notice it is not the real sequence name in DB, but the name you specified in `name` field of `SequenceGenerator`.  \r\n\r\n\r\n### 4. Complete\r\n\r\nSo the complete version should be like this:\r\n\r\n    public class MyTable\r\n    {\r\n        @Id\r\n        @SequenceGenerator(name=&quot;seq&quot;,sequenceName=&quot;oracle_seq&quot;)        \r\n        @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;seq&quot;)               \r\n        private Integer pid;\r\n    }\r\n\r\nNow start using these annotations to make your JavaWeb development easier.  ","title":"what is the use of annotations @Id and @GeneratedValue(strategy = GenerationType.IDENTITY)? Why the generationtype is identity?","body":"<p>First of all, using annotations as our configure method is just a convenient method instead of coping the endless XML configuration file.</p>\n<p>The <code>@Id</code>annotation is inherited from <code>javax.persistence.Id</code>, indicating the member field below is the primary key of current entity. Hence your Hibernate and spring framework as well as you can do some <code>reflect</code> works based on this annotation. For details, please check <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/Id.html\" rel=\"noreferrer\">javadoc for Id</a></p>\n<p>The <code>@GeneratedValue</code> annotation is to configure the way of increment of the specified column(field). For example, when using <code>Mysql</code>, you may specify <code>auto_increment</code> in the definition of table to make it self-incremental, and then use</p>\n<pre><code>@GeneratedValue(strategy = GenerationType.IDENTITY)\n</code></pre>\n<p>in the Java code to denote that you also acknowledged to use this database server side strategy. Also, you may change the value in this annotation to fit different requirements.</p>\n<h3>1. Define Sequence in database</h3>\n<p>For instance, Oracle has to use <code>sequence</code> as increment method, say we create a sequence in Oracle:</p>\n<pre><code>create sequence oracle_seq;\n</code></pre>\n<h3>2. Refer the database sequence</h3>\n<p>Now that we have the sequence in database, but we need to establish the relation between Java and DB, by using <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html\" rel=\"noreferrer\"><code>@SequenceGenerator</code></a>:</p>\n<pre><code>@SequenceGenerator(name=&quot;seq&quot;,sequenceName=&quot;oracle_seq&quot;)\n</code></pre>\n<p><code>sequenceName</code> is the real name of a sequence in Oracle, <code>name</code> is what you want to call it in Java.  You need to specify <code>sequenceName</code> if it is different from <code>name</code>, otherwise just use <code>name</code>.  I usually ignore <code>sequenceName</code> to save my time.</p>\n<h3>3. Use sequence in Java</h3>\n<p>Finally, it is time to make use this sequence in Java. Just add <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html\" rel=\"noreferrer\"><code>@GeneratedValue</code></a>:</p>\n<pre><code>@GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;seq&quot;)\n</code></pre>\n<p>The <code>generator</code> field refers to which sequence generator you want to use. Notice it is not the real sequence name in DB, but the name you specified in <code>name</code> field of <code>SequenceGenerator</code>.</p>\n<h3>4. Complete</h3>\n<p>So the complete version should be like this:</p>\n<pre><code>public class MyTable\n{\n    @Id\n    @SequenceGenerator(name=&quot;seq&quot;,sequenceName=&quot;oracle_seq&quot;)        \n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;seq&quot;)               \n    private Integer pid;\n}\n</code></pre>\n<p>Now start using these annotations to make your JavaWeb development easier.</p>\n"},{"tags":[],"owner":{"account_id":12929058,"reputation":515,"user_id":9348676,"display_name":"SumiSujith"},"comment_count":0,"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1683999299,"creation_date":1542976023,"answer_id":53446726,"question_id":20603638,"body_markdown":"Simply, @Id: This annotation specifies the primary key of the entity. \r\n\r\n@GeneratedValue: This annotation is used to specify the primary key generation strategy to use. i.e Instructs database to generate a value for this field automatically. If the strategy is not specified by default AUTO will be used. \r\n\r\nGenerationType enum defines four strategies: \r\n1. Generation Type. TABLE, \r\n2. Generation Type. SEQUENCE,\r\n3. Generation Type. IDENTITY   \r\n4. Generation Type. AUTO\r\n\r\n**GenerationType.SEQUENCE**\r\n\r\nWith this strategy, underlying persistence provider must use a database sequence to get the next unique primary key for the entities.\r\n\r\n\r\n**GenerationType.TABLE**\r\n\r\nWith this strategy, the underlying persistence provider must use a database table to generate/keep the next unique primary key for the entities. \r\n\r\n**GenerationType.IDENTITY** \r\n\r\nThis GenerationType indicates that the persistence provider must assign primary keys for the entity using a database identity column. IDENTITY column is typically used in SQL Server. This special type column is populated internally by the table itself without using a separate sequence. If underlying database doesn&#39;t support IDENTITY column or some similar variant then the persistence provider can choose an alternative appropriate strategy. In this examples we are using H2 database which doesn&#39;t support IDENTITY column.\r\n\r\n**GenerationType.AUTO** \r\n\r\nThis GenerationType indicates that the persistence provider should automatically pick an appropriate strategy for the particular database. This is the default GenerationType, i.e. if we just use @GeneratedValue annotation then this value of GenerationType will be used.\r\n\r\nReference:- https://www.logicbig.com/tutorials/java-ee-tutorial/jpa/jpa-primary-key.html\r\n","title":"what is the use of annotations @Id and @GeneratedValue(strategy = GenerationType.IDENTITY)? Why the generationtype is identity?","body":"<p>Simply, @Id: This annotation specifies the primary key of the entity.</p>\n<p>@GeneratedValue: This annotation is used to specify the primary key generation strategy to use. i.e Instructs database to generate a value for this field automatically. If the strategy is not specified by default AUTO will be used.</p>\n<p>GenerationType enum defines four strategies:</p>\n<ol>\n<li>Generation Type. TABLE,</li>\n<li>Generation Type. SEQUENCE,</li>\n<li>Generation Type. IDENTITY</li>\n<li>Generation Type. AUTO</li>\n</ol>\n<p><strong>GenerationType.SEQUENCE</strong></p>\n<p>With this strategy, underlying persistence provider must use a database sequence to get the next unique primary key for the entities.</p>\n<p><strong>GenerationType.TABLE</strong></p>\n<p>With this strategy, the underlying persistence provider must use a database table to generate/keep the next unique primary key for the entities.</p>\n<p><strong>GenerationType.IDENTITY</strong></p>\n<p>This GenerationType indicates that the persistence provider must assign primary keys for the entity using a database identity column. IDENTITY column is typically used in SQL Server. This special type column is populated internally by the table itself without using a separate sequence. If underlying database doesn't support IDENTITY column or some similar variant then the persistence provider can choose an alternative appropriate strategy. In this examples we are using H2 database which doesn't support IDENTITY column.</p>\n<p><strong>GenerationType.AUTO</strong></p>\n<p>This GenerationType indicates that the persistence provider should automatically pick an appropriate strategy for the particular database. This is the default GenerationType, i.e. if we just use @GeneratedValue annotation then this value of GenerationType will be used.</p>\n<p>Reference:- <a href=\"https://www.logicbig.com/tutorials/java-ee-tutorial/jpa/jpa-primary-key.html\" rel=\"noreferrer\">https://www.logicbig.com/tutorials/java-ee-tutorial/jpa/jpa-primary-key.html</a></p>\n"},{"tags":[],"owner":{"account_id":15955770,"reputation":712,"user_id":11513972,"display_name":"Tristan Elliott"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1644700347,"creation_date":1644700347,"answer_id":71095911,"question_id":20603638,"body_markdown":"### Why are we using this annotation?\r\n- First I would like to remind everyone that the annotations, such as `@Id`, are providing metadata to the persistence layer(I will assume hibernate).This metadata will most likely be stored in the .class file(but not stored in the database) and is used to tell hibernate how to recognize, interpret and manage the entity. So, Why are you using the annotation? To provide your persistence layer with the proper information about how to manage the entity.\r\n\r\n### Why use the @Id annotation?\r\n- The `@Id` annotation is one of the two mandatory annotations needed when creating an entity with JPA. The other one being `@Entity`. `@Id` does two things for us:\r\n\r\n  **1)** signifies that this field will be the unique identifier for this class when mapped to a database table\r\n\r\n  **2)** the presence of `@Id` lets the persistence layer know that all other fields within this class are to be mapped to database rows\r\n\r\n### Why use @GeneratedValue?\r\n- By marking the `@Id` field with `@GeneratedValue` we are now enabling `id generation`. Which means that the persistence layer will generate an Id value for us and handle the auto incrementing. Our application can choose 1 of 4 generations strategies:\r\n\r\n  **1) AUTO**\r\n\r\n  **2) TABLE**\r\n\r\n  **3) SEQUENCE**\r\n\r\n  **4) IDENTITY**\r\n\r\n- If not strategy is specified then AUTO is assumed\r\n\r\n### What is strategy = GenerationType.IDENTITY actually doing?\r\n- When we specify the generation strategy as `GenerationType.IDENTITY` we are telling the persistence provider(hibernate) to let the database handle the auto incrementing of the id. If you were to use postgres as an underling database and specified the strategy as `IDENTITY`, hibernate would execute this:\r\n```\r\ncreate table users (\r\n       id  bigserial not null,\r\n        primary key (id)\r\n    )\r\n\r\n```\r\n- Notice that they type of the id is `bigserial`, what is bigserial? As per the postgres [documentation](https://www.postgresql.org/docs/9.1/datatype-numeric.html), `bigserial is a large autoincrementing integer`.\r\n\r\n### Conclusion\r\n- By specifying:\r\n```\r\n@Id \r\n@GeneratedValue(strategy = GenerationType.IDENTITY)\r\nprivate Integer id;\r\n\r\n```\r\n- you have told the underlying persistence layer to use the id field as a unique identifier within the database. Also told the persistence layer to let the database handle the auto incrementing of the id with `GenerationType.IDENTITY`.\r\n\r\n\r\n","title":"what is the use of annotations @Id and @GeneratedValue(strategy = GenerationType.IDENTITY)? Why the generationtype is identity?","body":"<h3>Why are we using this annotation?</h3>\n<ul>\n<li>First I would like to remind everyone that the annotations, such as <code>@Id</code>, are providing metadata to the persistence layer(I will assume hibernate).This metadata will most likely be stored in the .class file(but not stored in the database) and is used to tell hibernate how to recognize, interpret and manage the entity. So, Why are you using the annotation? To provide your persistence layer with the proper information about how to manage the entity.</li>\n</ul>\n<h3>Why use the @Id annotation?</h3>\n<ul>\n<li><p>The <code>@Id</code> annotation is one of the two mandatory annotations needed when creating an entity with JPA. The other one being <code>@Entity</code>. <code>@Id</code> does two things for us:</p>\n<p><strong>1)</strong> signifies that this field will be the unique identifier for this class when mapped to a database table</p>\n<p><strong>2)</strong> the presence of <code>@Id</code> lets the persistence layer know that all other fields within this class are to be mapped to database rows</p>\n</li>\n</ul>\n<h3>Why use @GeneratedValue?</h3>\n<ul>\n<li><p>By marking the <code>@Id</code> field with <code>@GeneratedValue</code> we are now enabling <code>id generation</code>. Which means that the persistence layer will generate an Id value for us and handle the auto incrementing. Our application can choose 1 of 4 generations strategies:</p>\n<p><strong>1) AUTO</strong></p>\n<p><strong>2) TABLE</strong></p>\n<p><strong>3) SEQUENCE</strong></p>\n<p><strong>4) IDENTITY</strong></p>\n</li>\n<li><p>If not strategy is specified then AUTO is assumed</p>\n</li>\n</ul>\n<h3>What is strategy = GenerationType.IDENTITY actually doing?</h3>\n<ul>\n<li>When we specify the generation strategy as <code>GenerationType.IDENTITY</code> we are telling the persistence provider(hibernate) to let the database handle the auto incrementing of the id. If you were to use postgres as an underling database and specified the strategy as <code>IDENTITY</code>, hibernate would execute this:</li>\n</ul>\n<pre><code>create table users (\n       id  bigserial not null,\n        primary key (id)\n    )\n\n</code></pre>\n<ul>\n<li>Notice that they type of the id is <code>bigserial</code>, what is bigserial? As per the postgres <a href=\"https://www.postgresql.org/docs/9.1/datatype-numeric.html\" rel=\"noreferrer\">documentation</a>, <code>bigserial is a large autoincrementing integer</code>.</li>\n</ul>\n<h3>Conclusion</h3>\n<ul>\n<li>By specifying:</li>\n</ul>\n<pre><code>@Id \n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Integer id;\n\n</code></pre>\n<ul>\n<li>you have told the underlying persistence layer to use the id field as a unique identifier within the database. Also told the persistence layer to let the database handle the auto incrementing of the id with <code>GenerationType.IDENTITY</code>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1664506847,"post_id":73859363,"comment_id":130492708,"body_markdown":"As it‚Äôs currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it‚Äôs currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/73859363/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":20613780,"reputation":1,"user_id":15132365,"display_name":"Sagar Rawal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664654434,"creation_date":1664222383,"answer_id":73859363,"question_id":20603638,"body_markdown":"In very simple words, we want to tell our Database (DB) what strategy to use to generate primary keys.\r\nNow, primary keys must be different for every different row so there must be some strategy that will tell the DB on how to differentiate one row from another.\r\n\r\n`GenerationType` lets us define that strategy.\r\n\r\nHere `@GeneratedValue(stratergy=GenerationType.IDENTITY)` is telling our DB to store primary key in the identity column which is a default column in SQL for default auto incremented primary key generation.","title":"what is the use of annotations @Id and @GeneratedValue(strategy = GenerationType.IDENTITY)? Why the generationtype is identity?","body":"<p>In very simple words, we want to tell our Database (DB) what strategy to use to generate primary keys.\nNow, primary keys must be different for every different row so there must be some strategy that will tell the DB on how to differentiate one row from another.</p>\n<p><code>GenerationType</code> lets us define that strategy.</p>\n<p>Here <code>@GeneratedValue(stratergy=GenerationType.IDENTITY)</code> is telling our DB to store primary key in the identity column which is a default column in SQL for default auto incremented primary key generation.</p>\n"}],"owner":{"account_id":3668752,"reputation":6568,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329305,"favorite_count":0,"down_vote_count":0,"up_vote_count":134,"accepted_answer_id":20605392,"answer_count":5,"score":134,"last_activity_date":1694138446,"creation_date":1387169205,"question_id":20603638,"body_markdown":"    @Id \r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\r\nWhy we are using this annotations?\r\ni need to know if this autoincrement my table id values.\r\n(GenerationType.IDENTITY) is there any other types whats actually happening when we use this annotation\r\n\r\n   \r\n\r\n \r\n\r\n \r\n\r\n    public class Author extends Domain\r\n    {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \t@Basic(optional = false)\r\n    \t@Column(name = &quot;id&quot;) \r\n    \tprivate Integer id;\r\n    \t\r\n    \t@Basic(optional = false)\r\n    \t@Column(name = &quot;name&quot;) \r\n    \tprivate String name;\r\n    \t\r\n    \t@Column(name = &quot;address&quot;) \r\n    \tprivate String address; \r\n    \t\r\n    \t@OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;authorId&quot;)\r\n    \tprivate List&lt;Book&gt;\r\n    \tbookList;\r\n    \t   \r\n    \tpublic Author()\r\n    \t{ \r\n    \t\tsetServiceClassName(&quot;wawo.tutorial.service.admin.AuthorService&quot;);\r\n    \t}\r\n    }\r\n\r\n\r\n*Is it necessary to extend Domain abstract class?What is the use?","title":"what is the use of annotations @Id and @GeneratedValue(strategy = GenerationType.IDENTITY)? Why the generationtype is identity?","body":"<pre><code>@Id \n@GeneratedValue(strategy = GenerationType.IDENTITY)\n</code></pre>\n\n<p>Why we are using this annotations?\ni need to know if this autoincrement my table id values.\n(GenerationType.IDENTITY) is there any other types whats actually happening when we use this annotation</p>\n\n<pre><code>public class Author extends Domain\n{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Basic(optional = false)\n    @Column(name = \"id\") \n    private Integer id;\n\n    @Basic(optional = false)\n    @Column(name = \"name\") \n    private String name;\n\n    @Column(name = \"address\") \n    private String address; \n\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = \"authorId\")\n    private List&lt;Book&gt;\n    bookList;\n\n    public Author()\n    { \n        setServiceClassName(\"wawo.tutorial.service.admin.AuthorService\");\n    }\n}\n</code></pre>\n\n<p>*Is it necessary to extend Domain abstract class?What is the use?</p>\n"},{"tags":["java","spring","spring-security","keycloak"],"comments":[{"owner":{"account_id":4666712,"reputation":1370,"user_id":3779603,"display_name":"Yuriy P"},"score":0,"creation_date":1565699052,"post_id":57477407,"comment_id":101427107,"body_markdown":"What about the configuration of &quot;myReal-api&quot;, does it have **Valid Redirect URIs** defined?","body":"What about the configuration of &quot;myReal-api&quot;, does it have <b>Valid Redirect URIs</b> defined?"},{"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"score":0,"creation_date":1565699226,"post_id":57477407,"comment_id":101427195,"body_markdown":"I set the &quot;Access type&quot; to ```bearer only```. In this case you don&#39;t have to set a Valid Redirect URI so I didn&#39;t have to configure that option","body":"I set the &quot;Access type&quot; to <code>bearer only</code>. In this case you don&#39;t have to set a Valid Redirect URI so I didn&#39;t have to configure that option"},{"owner":{"account_id":4666712,"reputation":1370,"user_id":3779603,"display_name":"Yuriy P"},"score":1,"creation_date":1565700399,"post_id":57477407,"comment_id":101427812,"body_markdown":"Tooltip near Access Type says: `&quot;Bearer-only&quot; clients are web services that never initiate login`. But you actually trying to initiate login and perform SSO. SSO worked for me with Access Type: confidential and properly set redirect URIs.","body":"Tooltip near Access Type says: <code>&quot;Bearer-only&quot; clients are web services that never initiate login</code>. But you actually trying to initiate login and perform SSO. SSO worked for me with Access Type: confidential and properly set redirect URIs."},{"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"score":0,"creation_date":1565701028,"post_id":57477407,"comment_id":101428127,"body_markdown":"Thanks, I had not noticed that detail. But why do I have no access to my app since I don&#39;t have to login ? And I noticed something else, I just commented the line ```bearer-only: true``` from my config, and relauching my app results in a ```Bearer-only applications are not allowed to initiate browser login``` error message. Do I have to uncomment it (considering that if I do, I get a 401 error instead) ?","body":"Thanks, I had not noticed that detail. But why do I have no access to my app since I don&#39;t have to login ? And I noticed something else, I just commented the line <code>bearer-only: true</code> from my config, and relauching my app results in a <code>Bearer-only applications are not allowed to initiate browser login</code> error message. Do I have to uncomment it (considering that if I do, I get a 401 error instead) ?"},{"owner":{"account_id":4666712,"reputation":1370,"user_id":3779603,"display_name":"Yuriy P"},"score":0,"creation_date":1565703052,"post_id":57477407,"comment_id":101429250,"body_markdown":"So you commented bearer-only in your application, but have you changed Access Type from Keycloak Admin console and set it to confidential (and added URIs)?","body":"So you commented bearer-only in your application, but have you changed Access Type from Keycloak Admin console and set it to confidential (and added URIs)?"},{"owner":{"account_id":4666712,"reputation":1370,"user_id":3779603,"display_name":"Yuriy P"},"score":0,"creation_date":1565703530,"post_id":57477407,"comment_id":101429517,"body_markdown":"Regarding &quot;why do I have no access&quot;. Let me explain my understanding of using &#39;Bearer-Only&#39;. Let&#39;s say you have Service A (some web app) that is accessed by a user from the browser. And you have Service B - some internal service that is only used by service A. In this case &#39;Bearer Only&#39; will be used by service B, because Service A will be responsible for redirecting the user to Keyclaok for login, and Service A will already have a token and pass it to service B when making requests. Which means service B will never initiate user login. And for service A you should use Access Type: confidential","body":"Regarding &quot;why do I have no access&quot;. Let me explain my understanding of using &#39;Bearer-Only&#39;. Let&#39;s say you have Service A (some web app) that is accessed by a user from the browser. And you have Service B - some internal service that is only used by service A. In this case &#39;Bearer Only&#39; will be used by service B, because Service A will be responsible for redirecting the user to Keyclaok for login, and Service A will already have a token and pass it to service B when making requests. Which means service B will never initiate user login. And for service A you should use Access Type: confidential"},{"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"score":0,"creation_date":1566914851,"post_id":57477407,"comment_id":101800036,"body_markdown":"I enabled the Spring Security logs and I&#39;m getting these ```Populated SecurityContextHolder with anonymous token: &#39;org.springframework.security.authentication.AnonymousAuthenticationToken@631f7b08: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@59b2: RemoteIpAddress: 192.168.22.165; SessionId: null; Granted Authorities: ROLE_ANONYMOUS&#39;``` which triggers a ```org.springframework.security.access.AccessDeniedException: Access is denied```. I&#39;m pretty sure it also explains my problem","body":"I enabled the Spring Security logs and I&#39;m getting these <code>Populated SecurityContextHolder with anonymous token: &#39;org.springframework.security.authentication.AnonymousAuthen&zwnj;&#8203;ticationToken@631f7b&zwnj;&#8203;08: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthentic&zwnj;&#8203;ationDetails@59b2: RemoteIpAddress: 192.168.22.165; SessionId: null; Granted Authorities: ROLE_ANONYMOUS&#39;</code> which triggers a <code>org.springframework.security.access.AccessDeniedException: Access is denied</code>. I&#39;m pretty sure it also explains my problem"},{"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"score":0,"creation_date":1566914905,"post_id":57477407,"comment_id":101800070,"body_markdown":"To be honest, at this point I&#39;m not sure how to fix that issue","body":"To be honest, at this point I&#39;m not sure how to fix that issue"}],"answers":[{"comments":[{"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"score":1,"creation_date":1622787371,"post_id":66741236,"comment_id":119896324,"body_markdown":"After banging my head for few hours, finally I found this answer which worked perfectly. Thanks a ton.","body":"After banging my head for few hours, finally I found this answer which worked perfectly. Thanks a ton."},{"owner":{"account_id":7729755,"reputation":121,"user_id":5853303,"display_name":"jonathan"},"score":1,"creation_date":1635801488,"post_id":66741236,"comment_id":123385862,"body_markdown":"Hi, a lot of thanks !! this solved my issue.","body":"Hi, a lot of thanks !! this solved my issue."},{"owner":{"account_id":11061718,"reputation":61,"user_id":8122722,"display_name":"Pablo Rend&#243;n"},"score":1,"creation_date":1636494240,"post_id":66741236,"comment_id":123571660,"body_markdown":"I wasted a few hours on this, thanks mate!","body":"I wasted a few hours on this, thanks mate!"},{"owner":{"account_id":8766492,"reputation":1189,"user_id":6554662,"display_name":"Andy"},"score":1,"creation_date":1666440507,"post_id":66741236,"comment_id":130940244,"body_markdown":"That is it right here. After a couple of hours of hammering the wall. This solved the issue. Thanks.\nOne would think localhost and 127 are interchangeable. But nope.","body":"That is it right here. After a couple of hours of hammering the wall. This solved the issue. Thanks. One would think localhost and 127 are interchangeable. But nope."}],"tags":[],"owner":{"account_id":433443,"reputation":4526,"user_id":818766,"display_name":"manyways"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1616396933,"creation_date":1616394502,"answer_id":66741236,"question_id":57477407,"body_markdown":"I received the same error, one thing to double check is that `auth-server-url` is the same for the server, and the client getting the token.\r\n\r\nI.e. if one is the dns name, and one is the IP address, it will **not authorize**. (in my case I had localhost and 127.0.0.1 so authorization failed)\r\n\r\nServer, src/main/resources/application.yml\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nPostman/client:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BqoGG.png\r\n  [2]: https://i.stack.imgur.com/oRlSZ.png","title":"Spring app with Keycloak returns 401 error","body":"<p>I received the same error, one thing to double check is that <code>auth-server-url</code> is the same for the server, and the client getting the token.</p>\n<p>I.e. if one is the dns name, and one is the IP address, it will <strong>not authorize</strong>. (in my case I had localhost and 127.0.0.1 so authorization failed)</p>\n<p>Server, src/main/resources/application.yml</p>\n<p><a href=\"https://i.stack.imgur.com/BqoGG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BqoGG.png\" alt=\"enter image description here\" /></a></p>\n<p>Postman/client:</p>\n<p><a href=\"https://i.stack.imgur.com/oRlSZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oRlSZ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8379934,"reputation":137,"user_id":8953366,"display_name":"Fosol"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1632937451,"creation_date":1632937451,"answer_id":69381167,"question_id":57477407,"body_markdown":"This solved my issue.  I was using within a docker container and had to match both to `host.docker.internal`","title":"Spring app with Keycloak returns 401 error","body":"<p>This solved my issue.  I was using within a docker container and had to match both to <code>host.docker.internal</code></p>\n"}],"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13373,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1694137650,"creation_date":1565697942,"question_id":57477407,"body_markdown":"I&#39;m trying to access a Spring App via Keycloak, but I always get a 401 Unauthorized error. Basically I have a chat module that works fine on its own, but once I add Keycloak I&#39;m unable to access the app due to that 401 error.\r\nI&#39;ve followed about 3 tutorials that showed similar things to what I&#39;ve done, and I still have no idea what I&#39;ve done wrong.\r\n\r\nHere&#39;s my app&#39;s config :\r\n```\r\nkeycloak: \r\n    enabled: true\r\n    realm: myReal\r\n    resource: myReal-api\r\n    public-client: true\r\n    bearer-only: true\r\n    auth-server-url: http://localhost:8080/auth\r\n    credentials:\r\n      secret: 82eXXXXX-3XXX-4XXX-XXX7-287aXXXXXXXX\r\n    principal-attribute: preferred_username\r\n    cors: true\r\n```\r\n\r\nFrom ```localhost:port/``` I have a first interface (with no Keycloak safety) that has a link to my service, which is ```localhost:port/index/{topicName}``` . Now when I click on that link, I&#39;m supposed to get the Keycloak authentication screen, but I get a 401 error instead. \r\n\r\nI&#39;ve checked the header of my request, adding a HttpServletRequest as a parameter to my ```displayMessage``` method, and I actually could display the access_token and the X-Auth-Token in my IDE&#39;s console. But it seems like when I follow that link, it sends the request without the token.\r\n\r\n\r\nHere are my controller methods (my Controller class is annotated with ```@Controller```:\r\n\r\n```java\r\n@GetMapping(path = &quot;/&quot;)\r\n\tpublic String index() {\r\n\t\treturn &quot;external&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping(path = &quot;/index/{topicName}&quot;,\r\n\t\t\tproduces = MediaType.APPLICATION_JSON_VALUE)\r\n\tpublic String displayMessages(Model model, \r\n\t\t\t@PathVariable String topicName) {\t\t\r\n\r\n\t\t\t//HttpHeaders headers = new HttpHeaders();\r\n\r\n\t\t\t//headers.set(&quot;Authorization&quot;, request.getHeader(&quot;Authorization&quot;));\r\n\t\t\t//header = request.getHeader(&quot;Authorization&quot;);\r\n\t\t\t//System.out.println(&quot; T O K E N &quot;+request.getHeader(&quot;X-Auth-Token&quot;));\r\n\t\t\t\r\n\t\t\tprojectServiceImpl.findByName(topicName);\r\n\t\t\tList&lt;Message&gt; messages = messageServiceImpl.findAllMessagesByProjectName(topicName);\r\n\t\t\tmodel.addAttribute(&quot;topic&quot;, topicName);\r\n\t\t\tmodel.addAttribute(&quot;message&quot;,messages);\r\n\r\n\t\t\treturn &quot;index&quot;;\r\n\t}\r\n```\r\n\r\n\r\nMy Keycloak config file is inspired from the tuto&#39;s I&#39;ve read, so there might be a mistake in there that I don&#39;t know about (not sure what the difference between methods ```access``` and ```hasRole``` is) :\r\n```java \r\n@Configuration\r\n@ComponentScan(\r\n        basePackageClasses = KeycloakSecurityComponents.class,\r\n        excludeFilters = @ComponentScan.Filter(\r\n        \t\ttype = FilterType.REGEX, \r\n        \t\tpattern = &quot;org.keycloak.adapters.springsecurity.management.HttpSessionManager&quot;))\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\r\n\t\r\n\t\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(SecurityConfig.class);\r\n\r\n\t@Bean\r\n\tpublic HttpSessionIdResolver httpSessionIdResolver() { //replace HttpSessionStrategy\r\n\t    return HeaderHttpSessionIdResolver.xAuthToken();\r\n\t}\r\n\t\r\n\t//Registers the KeycloakAuthenticationProvider with the authentication manager.\r\n\t@Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tSimpleAuthorityMapper grantedAuthorityMapper = new SimpleAuthorityMapper();\r\n\t\t    grantedAuthorityMapper.setPrefix(&quot;ROLE_&quot;);\r\n\t\t    grantedAuthorityMapper.setConvertToUpperCase(true);\r\n\t\t \r\n\t\t    KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\r\n\t\t    keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(grantedAuthorityMapper);\r\n\t\t\t\r\n\t\t    auth.authenticationProvider(keycloakAuthenticationProvider());\r\n\t\t    \r\n\t\t} catch(Exception ex)  {\r\n\t\t\tlogger.error(&quot;SecurityConfig.configureGlobal: &quot; + ex);\r\n\r\n\t\t}\r\n\t\t\r\n\t\t /*try {\r\n\t            KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\r\n\t            keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n\t            auth.authenticationProvider(keycloakAuthenticationProvider);\r\n\t        }catch(Exception ex){\r\n\t        \tlogger.error(&quot;SecurityConfig.configureGlobal: &quot; +ex);\r\n\t        }*/\r\n    }\r\n\r\n\t//Load Keycloak properties from service config-file\r\n\t@Bean\r\n    public KeycloakSpringBootConfigResolver KeycloakConfigResolver() {\r\n        return new KeycloakSpringBootConfigResolver();\r\n    }\r\n\t\r\n\t//Defines the session authentication strategy.\r\n\t@Bean\r\n    @Override\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n        //Public or Confidential application keycloak/OpenID Connect client\r\n\t\treturn new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n        //Bearer mode only keycloak/OpenID Connect client without keycloak session -&gt; stateless behavior\r\n\t\t//return new NullAuthenticatedSessionStrategy();\r\n    }\r\n\t\r\n\t\r\n\t@Override\r\n    protected void configure(HttpSecurity http) throws Exception\r\n    {\r\n        super.configure(http);\r\n        http.authorizeRequests()\r\n        //BEGIN\r\n        \t//USER -done to be tested\r\n\t        \r\n        \t.antMatchers(HttpMethod.GET,&quot;/index**&quot;).access(&quot;hasAuthority(&#39;ADMIN&#39;)&quot;)\r\n        \t.antMatchers(HttpMethod.GET,&quot;/&quot;).access(&quot;hasAuthority(&#39;ADMIN&#39;)&quot;)\r\n        \t.antMatchers(HttpMethod.GET,&quot;/&quot;).access(&quot;hasAnyAuthority(&#39;ADMIN&#39;,&#39;MANAGER&#39;,&#39;EXPERT&#39;,&#39;STANDARD&#39;)&quot;)\r\n        \t\r\n        \t\r\n        \t\r\n\t    \t.anyRequest().authenticated() \r\n\t    \t\r\n\t    \t.and()\r\n\t    \t.cors()\r\n\t    \t.and()\r\n\t    \t.csrf().disable()\r\n\t    \t//BEGIN Login/Logout\r\n\t    \t.formLogin()\r\n\t    \t\t.permitAll()//.successHandler(authenticationSuccessHandler) //\r\n\t    \t.and()\r\n\t    \t.logout()//.clearAuthentication(true) //Add .clearAuthentication(true) to logout()\r\n\t    \t\t//.logoutUrl(&quot;/custom-logout&quot;)\r\n\t    \t\t.addLogoutHandler(keycloakLogoutHandler())\r\n\t    \t\t//.addLogoutHandler(new LogoutHandlerImpl())\r\n\t    \t\t.clearAuthentication(true)\r\n\t    \t\t.invalidateHttpSession(true)\r\n            \t.permitAll();\r\n        \t//END Login/Logout\r\n        \r\n        //BEGIN Session\r\n        http\r\n        .sessionManagement()\r\n        \t//.sessionCreationPolicy(SessionCreationPolicy.ALWAYS) //BY default IF_REQUIRED\r\n            .maximumSessions(1)\r\n                .maxSessionsPreventsLogin(false) // if true generate an error when user login after reaching maximumSession (SessionAuthenticationStrategy rejected the authentication object / SessionAuthenticationException: Maximum sessions of 1 for this principal exceeded)\r\n                //.expiredUrl(&quot;/auth/login&quot;)\r\n                .sessionRegistry(sessionRegistry());   \r\n        \r\n        \r\n        \t\r\n    }\r\n\t\r\n\t @Bean\r\n     @Scope(scopeName = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n     public AccessToken accessToken() {\r\n         HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();\r\n         return ((KeycloakSecurityContext) ((KeycloakAuthenticationToken) request.getUserPrincipal()).getCredentials()).getToken();\r\n     }\r\n\t \r\n\t///BEGIN session\t \r\n\t @Bean\r\n\t public SessionRegistry sessionRegistry() {\r\n        SessionRegistry sessionRegistry = new SessionRegistryImpl();\r\n        return sessionRegistry;\r\n\t }\r\n\t \r\n\t \r\n    @Bean\r\n    public RegisterSessionAuthenticationStrategy registerSessionAuthStr( ) {\r\n        return new RegisterSessionAuthenticationStrategy( sessionRegistry( ) );\r\n    }\r\n\r\n    // Register HttpSessionEventPublisher\r\n    @Bean\r\n    public static ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt; httpSessionEventPublisher() {\r\n        return new ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt;(new HttpSessionEventPublisher());\r\n    }\r\n```\r\n\r\nI don&#39;t really know what else I should change to make it work, but I believe there has to be something wrong in there. But I think if I can have the Keycloak authentication screen when trying to access my service, this would be alright.","title":"Spring app with Keycloak returns 401 error","body":"<p>I'm trying to access a Spring App via Keycloak, but I always get a 401 Unauthorized error. Basically I have a chat module that works fine on its own, but once I add Keycloak I'm unable to access the app due to that 401 error.\nI've followed about 3 tutorials that showed similar things to what I've done, and I still have no idea what I've done wrong.</p>\n\n<p>Here's my app's config :</p>\n\n<pre><code>keycloak: \n    enabled: true\n    realm: myReal\n    resource: myReal-api\n    public-client: true\n    bearer-only: true\n    auth-server-url: http://localhost:8080/auth\n    credentials:\n      secret: 82eXXXXX-3XXX-4XXX-XXX7-287aXXXXXXXX\n    principal-attribute: preferred_username\n    cors: true\n</code></pre>\n\n<p>From <code>localhost:port/</code> I have a first interface (with no Keycloak safety) that has a link to my service, which is <code>localhost:port/index/{topicName}</code> . Now when I click on that link, I'm supposed to get the Keycloak authentication screen, but I get a 401 error instead. </p>\n\n<p>I've checked the header of my request, adding a HttpServletRequest as a parameter to my <code>displayMessage</code> method, and I actually could display the access_token and the X-Auth-Token in my IDE's console. But it seems like when I follow that link, it sends the request without the token.</p>\n\n<p>Here are my controller methods (my Controller class is annotated with <code>@Controller</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(path = \"/\")\n    public String index() {\n        return \"external\";\n    }\n\n    @GetMapping(path = \"/index/{topicName}\",\n            produces = MediaType.APPLICATION_JSON_VALUE)\n    public String displayMessages(Model model, \n            @PathVariable String topicName) {       \n\n            //HttpHeaders headers = new HttpHeaders();\n\n            //headers.set(\"Authorization\", request.getHeader(\"Authorization\"));\n            //header = request.getHeader(\"Authorization\");\n            //System.out.println(\" T O K E N \"+request.getHeader(\"X-Auth-Token\"));\n\n            projectServiceImpl.findByName(topicName);\n            List&lt;Message&gt; messages = messageServiceImpl.findAllMessagesByProjectName(topicName);\n            model.addAttribute(\"topic\", topicName);\n            model.addAttribute(\"message\",messages);\n\n            return \"index\";\n    }\n</code></pre>\n\n<p>My Keycloak config file is inspired from the tuto's I've read, so there might be a mistake in there that I don't know about (not sure what the difference between methods <code>access</code> and <code>hasRole</code> is) :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ComponentScan(\n        basePackageClasses = KeycloakSecurityComponents.class,\n        excludeFilters = @ComponentScan.Filter(\n                type = FilterType.REGEX, \n                pattern = \"org.keycloak.adapters.springsecurity.management.HttpSessionManager\"))\n@EnableWebSecurity\npublic class SecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\n\n\n    private static final Logger logger = LoggerFactory.getLogger(SecurityConfig.class);\n\n    @Bean\n    public HttpSessionIdResolver httpSessionIdResolver() { //replace HttpSessionStrategy\n        return HeaderHttpSessionIdResolver.xAuthToken();\n    }\n\n    //Registers the KeycloakAuthenticationProvider with the authentication manager.\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n\n        try {\n            SimpleAuthorityMapper grantedAuthorityMapper = new SimpleAuthorityMapper();\n            grantedAuthorityMapper.setPrefix(\"ROLE_\");\n            grantedAuthorityMapper.setConvertToUpperCase(true);\n\n            KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\n            keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(grantedAuthorityMapper);\n\n            auth.authenticationProvider(keycloakAuthenticationProvider());\n\n        } catch(Exception ex)  {\n            logger.error(\"SecurityConfig.configureGlobal: \" + ex);\n\n        }\n\n         /*try {\n                KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\n                keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n                auth.authenticationProvider(keycloakAuthenticationProvider);\n            }catch(Exception ex){\n                logger.error(\"SecurityConfig.configureGlobal: \" +ex);\n            }*/\n    }\n\n    //Load Keycloak properties from service config-file\n    @Bean\n    public KeycloakSpringBootConfigResolver KeycloakConfigResolver() {\n        return new KeycloakSpringBootConfigResolver();\n    }\n\n    //Defines the session authentication strategy.\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        //Public or Confidential application keycloak/OpenID Connect client\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n        //Bearer mode only keycloak/OpenID Connect client without keycloak session -&gt; stateless behavior\n        //return new NullAuthenticatedSessionStrategy();\n    }\n\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception\n    {\n        super.configure(http);\n        http.authorizeRequests()\n        //BEGIN\n            //USER -done to be tested\n\n            .antMatchers(HttpMethod.GET,\"/index**\").access(\"hasAuthority('ADMIN')\")\n            .antMatchers(HttpMethod.GET,\"/\").access(\"hasAuthority('ADMIN')\")\n            .antMatchers(HttpMethod.GET,\"/\").access(\"hasAnyAuthority('ADMIN','MANAGER','EXPERT','STANDARD')\")\n\n\n\n            .anyRequest().authenticated() \n\n            .and()\n            .cors()\n            .and()\n            .csrf().disable()\n            //BEGIN Login/Logout\n            .formLogin()\n                .permitAll()//.successHandler(authenticationSuccessHandler) //\n            .and()\n            .logout()//.clearAuthentication(true) //Add .clearAuthentication(true) to logout()\n                //.logoutUrl(\"/custom-logout\")\n                .addLogoutHandler(keycloakLogoutHandler())\n                //.addLogoutHandler(new LogoutHandlerImpl())\n                .clearAuthentication(true)\n                .invalidateHttpSession(true)\n                .permitAll();\n            //END Login/Logout\n\n        //BEGIN Session\n        http\n        .sessionManagement()\n            //.sessionCreationPolicy(SessionCreationPolicy.ALWAYS) //BY default IF_REQUIRED\n            .maximumSessions(1)\n                .maxSessionsPreventsLogin(false) // if true generate an error when user login after reaching maximumSession (SessionAuthenticationStrategy rejected the authentication object / SessionAuthenticationException: Maximum sessions of 1 for this principal exceeded)\n                //.expiredUrl(\"/auth/login\")\n                .sessionRegistry(sessionRegistry());   \n\n\n\n    }\n\n     @Bean\n     @Scope(scopeName = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)\n     public AccessToken accessToken() {\n         HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();\n         return ((KeycloakSecurityContext) ((KeycloakAuthenticationToken) request.getUserPrincipal()).getCredentials()).getToken();\n     }\n\n    ///BEGIN session     \n     @Bean\n     public SessionRegistry sessionRegistry() {\n        SessionRegistry sessionRegistry = new SessionRegistryImpl();\n        return sessionRegistry;\n     }\n\n\n    @Bean\n    public RegisterSessionAuthenticationStrategy registerSessionAuthStr( ) {\n        return new RegisterSessionAuthenticationStrategy( sessionRegistry( ) );\n    }\n\n    // Register HttpSessionEventPublisher\n    @Bean\n    public static ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt; httpSessionEventPublisher() {\n        return new ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt;(new HttpSessionEventPublisher());\n    }\n</code></pre>\n\n<p>I don't really know what else I should change to make it work, but I believe there has to be something wrong in there. But I think if I can have the Keycloak authentication screen when trying to access my service, this would be alright.</p>\n"},{"tags":["java","foreach"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1365200618,"post_id":15844443,"comment_id":22546462,"body_markdown":"@KacyRaye by the way, this is a similar behavior when using the enhanced `for` loop on object references classes (and the solution proposed here is the same).","body":"@KacyRaye by the way, this is a similar behavior when using the enhanced <code>for</code> loop on object references classes (and the solution proposed here is the same)."}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1365199863,"creation_date":1365199863,"answer_id":15844466,"question_id":15844443,"body_markdown":"You variable `c` gets changed, but not the array contents.  To change the array, don&#39;t use `c`, manipulate the array directly.\r\n\r\n    for(int i = 0; i &lt; array.length; i++)\r\n    {\r\n     char c = array[i];\r\n     if (c== &#39;o&#39;)\r\n         array[i] = &#39;a&#39;;\r\n    }","title":"Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?","body":"<p>You variable <code>c</code> gets changed, but not the array contents.  To change the array, don't use <code>c</code>, manipulate the array directly.</p>\n\n<pre><code>for(int i = 0; i &lt; array.length; i++)\n{\n char c = array[i];\n if (c== 'o')\n     array[i] = 'a';\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2211353,"reputation":1312,"user_id":1953105,"accept_rate":91,"display_name":"Kacy Raye"},"score":2,"creation_date":1365200042,"post_id":15844468,"comment_id":22546223,"body_markdown":"Oh okay thanks.\nI didn&#39;t understand that c was merely a copy.\nThanks that makes sense now.","body":"Oh okay thanks. I didn&#39;t understand that c was merely a copy. Thanks that makes sense now."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1549484066,"post_id":15844468,"comment_id":95922599,"body_markdown":"@BaroudiSafwen: A copy of the array element *is* made at each iteration. What do you mean by &quot;deform&quot; here? I&#39;m very confused as to what you&#39;re saying.","body":"@BaroudiSafwen: A copy of the array element <i>is</i> made at each iteration. What do you mean by &quot;deform&quot; here? I&#39;m very confused as to what you&#39;re saying."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":2,"down_vote_count":1,"up_vote_count":83,"is_accepted":true,"score":82,"last_activity_date":1365199869,"creation_date":1365199869,"answer_id":15844468,"question_id":15844443,"body_markdown":"You&#39;re changing the iteration variable `c`. That doesn&#39;t change the contents of the array. The iteration variable is just a *copy* of the array element. If you want to modify the array, you need to do so explicitly:\r\n\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n        if (array[i] == &#39;o&#39;) {\r\n            array[i] = &#39;a&#39;;\r\n        }\r\n    }\r\n\r\nYour original code is equivalent (as per [section 14.14.2 of the JLS][1]) to:\r\n\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n        char c = array[i];\r\n        if (c == &#39;o&#39;) {\r\n            c = &#39;a&#39;; \r\n        }\r\n    }\r\n\r\nChanging the value of a local variable will never change anything else - it *just* changes the local variable. The assignment:\r\n\r\n    char c = array[i];\r\n\r\n*copies* the value in the array into a local variable. It doesn&#39;t associate the local variable with the array element perpetually.\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2","title":"Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?","body":"<p>You're changing the iteration variable <code>c</code>. That doesn't change the contents of the array. The iteration variable is just a <em>copy</em> of the array element. If you want to modify the array, you need to do so explicitly:</p>\n\n<pre><code>for (int i = 0; i &lt; array.length; i++) {\n    if (array[i] == 'o') {\n        array[i] = 'a';\n    }\n}\n</code></pre>\n\n<p>Your original code is equivalent (as per <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2\">section 14.14.2 of the JLS</a>) to:</p>\n\n<pre><code>for (int i = 0; i &lt; array.length; i++) {\n    char c = array[i];\n    if (c == 'o') {\n        c = 'a'; \n    }\n}\n</code></pre>\n\n<p>Changing the value of a local variable will never change anything else - it <em>just</em> changes the local variable. The assignment:</p>\n\n<pre><code>char c = array[i];\n</code></pre>\n\n<p><em>copies</em> the value in the array into a local variable. It doesn't associate the local variable with the array element perpetually.</p>\n"},{"comments":[{"owner":{"account_id":8620600,"reputation":382,"user_id":6455667,"accept_rate":80,"display_name":"Anchith Acharya"},"score":0,"creation_date":1597947986,"post_id":15844471,"comment_id":112306645,"body_markdown":"At that point wouldn&#39;t you be better off using a normal for loop?","body":"At that point wouldn&#39;t you be better off using a normal for loop?"}],"tags":[],"owner":{"account_id":2248460,"reputation":12996,"user_id":1981279,"display_name":"Vishal K"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1365200357,"creation_date":1365199874,"answer_id":15844471,"question_id":15844443,"body_markdown":"This is because `c = &#39;a&#39;` is assigning `a` to the local variable `c` which is not referencing the actual value present at that index of the `array` itself. It is just containing a copy of the value present at the specified index of `array`. So the change is actually made in the local variable not in the actual location where `array[i]` is referencing..\r\nIf you want to change value you should use the following indeed:\r\n\r\n    int i = 0;\r\n    for(char c : array)\r\n    {\r\n     if (c== &#39;o&#39;)\r\n         array[i] = &#39;a&#39;; \r\n      i++;\r\n    }","title":"Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?","body":"<p>This is because <code>c = 'a'</code> is assigning <code>a</code> to the local variable <code>c</code> which is not referencing the actual value present at that index of the <code>array</code> itself. It is just containing a copy of the value present at the specified index of <code>array</code>. So the change is actually made in the local variable not in the actual location where <code>array[i]</code> is referencing..\nIf you want to change value you should use the following indeed:</p>\n\n<pre><code>int i = 0;\nfor(char c : array)\n{\n if (c== 'o')\n     array[i] = 'a'; \n  i++;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2063886,"reputation":992,"user_id":1839841,"accept_rate":89,"display_name":"dan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1365199939,"creation_date":1365199939,"answer_id":15844490,"question_id":15844443,"body_markdown":"c&#39;s value is a copy of the value in array. Access array directly to change the value in question.","title":"Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?","body":"<p>c's value is a copy of the value in array. Access array directly to change the value in question.</p>\n"},{"tags":[],"owner":{"account_id":2079221,"reputation":2459,"user_id":1949808,"accept_rate":38,"display_name":"Micha≈Ç Tabor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365199942,"creation_date":1365199942,"answer_id":15844491,"question_id":15844443,"body_markdown":"Changes applied in &#39;for each&#39; loop are made just inside her body (that&#39;s because values are copied, not referentions). To work on referentions use &#39;for&#39; loop.","title":"Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?","body":"<p>Changes applied in 'for each' loop are made just inside her body (that's because values are copied, not referentions). To work on referentions use 'for' loop.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1365199968,"creation_date":1365199968,"answer_id":15844499,"question_id":15844443,"body_markdown":"You&#39;re assigning &#39;a&#39; to the local variable c, but not to the array element. To make it print bass, you&#39;d need\r\n\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n        if (array[i] == &#39;o&#39;) {\r\n            array[i] = &#39;a&#39;;\r\n        }\r\n    }","title":"Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?","body":"<p>You're assigning 'a' to the local variable c, but not to the array element. To make it print bass, you'd need</p>\n\n<pre><code>for (int i = 0; i &lt; array.length; i++) {\n    if (array[i] == 'o') {\n        array[i] = 'a';\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2211353,"reputation":1312,"user_id":1953105,"accept_rate":91,"display_name":"Kacy Raye"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58685,"favorite_count":0,"down_vote_count":5,"up_vote_count":69,"accepted_answer_id":15844468,"answer_count":6,"score":64,"last_activity_date":1694137612,"creation_date":1365199773,"question_id":15844443,"body_markdown":"How come the following prints boss and not bass? \r\n\r\n    String boss = &quot;boss&quot;;\r\n    char[] array = boss.toCharArray();\r\n \r\n    for(char c : array)\r\n    {\r\n     if (c== &#39;o&#39;)\r\n         c = &#39;a&#39;; \r\n    }\r\n    System.out.println(new String(array)); //How come this does NOT print out bass?It prints boss.","title":"Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?","body":"<p>How come the following prints boss and not bass? </p>\n\n<pre><code>String boss = \"boss\";\nchar[] array = boss.toCharArray();\n\nfor(char c : array)\n{\n if (c== 'o')\n     c = 'a'; \n}\nSystem.out.println(new String(array)); //How come this does NOT print out bass?It prints boss.\n</code></pre>\n"},{"tags":["javascript","java","android","node.js","nodejs-server"],"owner":{"account_id":15473783,"reputation":21,"user_id":11322287,"display_name":"joao paulo "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694135246,"creation_date":1694135246,"question_id":77063597,"body_markdown":"I&#39;m trying to run my emulator through vscode every time I give npx command react-native run-android I get this error info Starting JS server...\r\nThe system cannot find the path specified.\r\ninfo Launching emulator...\r\nerror Failed to launch emulator. Reason: No emulators found as an output of `emulator -list-avds`.\r\nwarn Please launch an emulator manually or connect a device. Otherwise app may fail to launch.\r\n\r\ninfo &#128161; Tip: Make sure that you have set up your development environment correctly, by running react-native doctor. To read more about doctor command visit: https://github.com/react-native-community/cli/blob/main/packages/cli-doctor/README.md#doctor\r\n\r\n\r\nerror Failed to install the app.\r\n\r\nI updated node configured, path, json and nothing resolved, i am used windows 11 android studio giraffe my vitualization is atived.","title":"Problem run android studio emulator in vscode","body":"<p>I'm trying to run my emulator through vscode every time I give npx command react-native run-android I get this error info Starting JS server...\nThe system cannot find the path specified.\ninfo Launching emulator...\nerror Failed to launch emulator. Reason: No emulators found as an output of <code>emulator -list-avds</code>.\nwarn Please launch an emulator manually or connect a device. Otherwise app may fail to launch.</p>\n<p>info üí° Tip: Make sure that you have set up your development environment correctly, by running react-native doctor. To read more about doctor command visit: <a href=\"https://github.com/react-native-community/cli/blob/main/packages/cli-doctor/README.md#doctor\" rel=\"nofollow noreferrer\">https://github.com/react-native-community/cli/blob/main/packages/cli-doctor/README.md#doctor</a></p>\n<p>error Failed to install the app.</p>\n<p>I updated node configured, path, json and nothing resolved, i am used windows 11 android studio giraffe my vitualization is atived.</p>\n"},{"tags":["java","spring","spring-boot","validation","request"],"answers":[{"tags":[],"owner":{"account_id":29391132,"reputation":1,"user_id":22519470,"display_name":"ayoub"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694133881,"creation_date":1694133881,"answer_id":77063540,"question_id":77062625,"body_markdown":"Using regex alone is not sufficient to block Html elements, so for this reason there are libraries as OWASP java html sanitizer you can use to remove potentially dangerous content.\r\n\r\n 1. add dependency :\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/com.googlecode.owasp-java-html-sanitizer/owasp-java-html-sanitizer --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.googlecode.owasp-java-html-sanitizer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;owasp-java-html-sanitizer&lt;/artifactId&gt;\r\n            &lt;version&gt;20220608.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n 2. Create the anotation to use for validation\r\n\r\n        @Documented \r\n        @Constraint(validatedBy = HtmlSanitizerValidator.class) \r\n        @Target({ElementType.FIELD, ElementType.PARAMETER}) \r\n        @Retention(RetentionPolicy.RUNTIME) \r\n        public @interface SanitizeHtml { \r\n            String message() default &quot;not allowed!!&quot;; \r\n            Class&lt;?&gt;[] groups() default {}; \r\n            Class&lt;? extends Payload&gt;[] payload() default {}; \r\n        }\r\n\r\n 3. Create a validator for the annotation\r\n\r\n        public class HtmlSanitizerValidator implements ConstraintValidator&lt;SanitizeHtml, String&gt; { \r\n            @Override \r\n            public boolean isValid(String untrustedHTML, ConstraintValidatorContext context) {\r\n                if (untrustedHTML == null) { return true; }\r\n\r\n                PolicyFactory policy = Sanitizers.FORMATTING.and(Sanitizers.LINKS);\r\n                String safeHTML = policy.sanitize(untrustedHTML);\r\n\r\n                return untrustedHTML.equals(safeHTML); //if true, this means there is no HTML content, but false means there have been an attack!! \r\n            } \r\n        }\r\n\r\n 4. use the anotation for your fields :\r\n\r\n        public class yourDto { \r\n            @SanitizeHtml \r\n            private String name; \r\n    \r\n            @SanitizeHtml \r\n            private String value; \r\n        }\r\n\r\nI hope this can help you!\r\n\r\nNB :\r\nJust make sure that if you want to allow Html tags in your safeHTML, but ensure that it is displayed as plain text without executing any harmful code, you can use this (attention to the dependency) :\r\n\r\n    String safeHTML = Encode.forHtml(untrustedHTML)\r\n\r\ninstead of :\r\n\r\n    PolicyFactory policy = Sanitizers.FORMATTING.and(Sanitizers.LINKS);\r\n    String safeHTML = policy.sanitize(untrustedHTML); \r\n\r\nThis is the Github repo for more : https://github.com/OWASP/java-html-sanitizer","title":"Springboot ReqeustBody input Validation for HTML elements","body":"<p>Using regex alone is not sufficient to block Html elements, so for this reason there are libraries as OWASP java html sanitizer you can use to remove potentially dangerous content.</p>\n<ol>\n<li><p>add dependency :</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.googlecode.owasp-java-html-sanitizer/owasp-java-html-sanitizer --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.owasp-java-html-sanitizer&lt;/groupId&gt;\n    &lt;artifactId&gt;owasp-java-html-sanitizer&lt;/artifactId&gt;\n    &lt;version&gt;20220608.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Create the anotation to use for validation</p>\n<pre><code>@Documented \n@Constraint(validatedBy = HtmlSanitizerValidator.class) \n@Target({ElementType.FIELD, ElementType.PARAMETER}) \n@Retention(RetentionPolicy.RUNTIME) \npublic @interface SanitizeHtml { \n    String message() default &quot;not allowed!!&quot;; \n    Class&lt;?&gt;[] groups() default {}; \n    Class&lt;? extends Payload&gt;[] payload() default {}; \n}\n</code></pre>\n</li>\n<li><p>Create a validator for the annotation</p>\n<pre><code>public class HtmlSanitizerValidator implements ConstraintValidator&lt;SanitizeHtml, String&gt; { \n    @Override \n    public boolean isValid(String untrustedHTML, ConstraintValidatorContext context) {\n        if (untrustedHTML == null) { return true; }\n\n        PolicyFactory policy = Sanitizers.FORMATTING.and(Sanitizers.LINKS);\n        String safeHTML = policy.sanitize(untrustedHTML);\n\n        return untrustedHTML.equals(safeHTML); //if true, this means there is no HTML content, but false means there have been an attack!! \n    } \n}\n</code></pre>\n</li>\n<li><p>use the anotation for your fields :</p>\n<pre><code>public class yourDto { \n    @SanitizeHtml \n    private String name; \n\n    @SanitizeHtml \n    private String value; \n}\n</code></pre>\n</li>\n</ol>\n<p>I hope this can help you!</p>\n<p>NB :\nJust make sure that if you want to allow Html tags in your safeHTML, but ensure that it is displayed as plain text without executing any harmful code, you can use this (attention to the dependency) :</p>\n<pre><code>String safeHTML = Encode.forHtml(untrustedHTML)\n</code></pre>\n<p>instead of :</p>\n<pre><code>PolicyFactory policy = Sanitizers.FORMATTING.and(Sanitizers.LINKS);\nString safeHTML = policy.sanitize(untrustedHTML); \n</code></pre>\n<p>This is the Github repo for more : <a href=\"https://github.com/OWASP/java-html-sanitizer\" rel=\"nofollow noreferrer\">https://github.com/OWASP/java-html-sanitizer</a></p>\n"}],"owner":{"account_id":6844535,"reputation":798,"user_id":5263755,"accept_rate":50,"display_name":"remya thekkuvettil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694133881,"creation_date":1694117906,"question_id":77062625,"body_markdown":"I am looking for a way to validate Request body fields for HTML content in my Springboot application as below\r\n```\r\n{\r\n    &quot;name&quot;: &quot;&lt;img src=x onerror=alert(1)&gt;&quot;,\r\n    &quot;value&quot;: &quot;&lt;img src=x onerror=alert(1)&gt;&quot;\r\n}\r\n\r\n```\r\nI am aware that I can make use of @Pattern(regexp = &quot;[a-zA-Z]*&quot;, message = &quot;Name can only have letters&quot;) from javax.validation. (There are different use cases where I may need to add different complex regex to satisfy many request body fields).\r\nIs there any other way to block HTML elements in Springboot?","title":"Springboot ReqeustBody input Validation for HTML elements","body":"<p>I am looking for a way to validate Request body fields for HTML content in my Springboot application as below</p>\n<pre><code>{\n    &quot;name&quot;: &quot;&lt;img src=x onerror=alert(1)&gt;&quot;,\n    &quot;value&quot;: &quot;&lt;img src=x onerror=alert(1)&gt;&quot;\n}\n\n</code></pre>\n<p>I am aware that I can make use of @Pattern(regexp = &quot;[a-zA-Z]*&quot;, message = &quot;Name can only have letters&quot;) from javax.validation. (There are different use cases where I may need to add different complex regex to satisfy many request body fields).\nIs there any other way to block HTML elements in Springboot?</p>\n"},{"tags":["java","spring","rest"],"comments":[{"owner":{"account_id":16390325,"reputation":127,"user_id":11839229,"display_name":"Isuri Subasinghe"},"score":0,"creation_date":1565672374,"post_id":57407264,"comment_id":101415059,"body_markdown":"Try what is mentioned in this answer:\n[https://stackoverflow.com/a/32921592/11839229](https://stackoverflow.com/a/32921592/11839229)","body":"Try what is mentioned in this answer: <a href=\"https://stackoverflow.com/a/32921592/11839229\">https://stackoverflow.com/a/32921592/11839229</a>"}],"answers":[{"comments":[{"owner":{"account_id":10617434,"reputation":51,"user_id":7819448,"display_name":"Pratyush Choudhary"},"score":0,"creation_date":1565252370,"post_id":57407651,"comment_id":101296836,"body_markdown":"Hi @Manoj. Updated the code to use hostname verifier to my ClosableHttpClient. Remaining code was already in place. Still getting the same error on hitting the endpoint. :(","body":"Hi @Manoj. Updated the code to use hostname verifier to my ClosableHttpClient. Remaining code was already in place. Still getting the same error on hitting the endpoint. :("},{"owner":{"account_id":5339785,"reputation":720,"user_id":4694434,"display_name":"Manoj Krishna"},"score":0,"creation_date":1565275031,"post_id":57407651,"comment_id":101310188,"body_markdown":"please try with https it should be work might be and  please add the code for HttpURLConnection","body":"please try with https it should be work might be and  please add the code for HttpURLConnection"},{"owner":{"account_id":10617434,"reputation":51,"user_id":7819448,"display_name":"Pratyush Choudhary"},"score":0,"creation_date":1565669864,"post_id":57407651,"comment_id":101414515,"body_markdown":"I get &quot;I/O error on GET request for &quot;https://ip:port/h2h.php&quot;: Unrecognized SSL message, plaintext connection?&quot; when I try using https. I&#39;ve updated the HttpUrlConnection code in the original post.","body":"I get &quot;I/O error on GET request for &quot;<a href=\"https://ip:port/h2h.php\" rel=\"nofollow noreferrer\">ip:port/h2h.php</a>&quot;: Unrecognized SSL message, plaintext connection?&quot; when I try using https. I&#39;ve updated the HttpUrlConnection code in the original post."}],"tags":[],"owner":{"account_id":5339785,"reputation":720,"user_id":4694434,"display_name":"Manoj Krishna"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565250392,"creation_date":1565250392,"answer_id":57407651,"question_id":57407264,"body_markdown":"    try using a closebale httpclient \r\n       CloseableHttpClient httpClient = HttpClients.custom()\r\n                .setSSLHostnameVerifier(new NoopHostnameVerifier())\r\n                .build();\r\n        HttpComponentsClientHttpRequestFactory requestFactory\r\n                = new HttpComponentsClientHttpRequestFactory();\r\n        requestFactory.setHttpClient(httpClient);\r\n\r\n        ResponseEntity&lt;String&gt; response\r\n                = new RestTemplate(requestFactory).exchange(\r\n                url, HttpMethod.GET, httpEntity, String.class);","title":"Getting Exception with message &quot;http protocol is not supported&quot; when using RestTemplate","body":"<pre><code>try using a closebale httpclient \n   CloseableHttpClient httpClient = HttpClients.custom()\n            .setSSLHostnameVerifier(new NoopHostnameVerifier())\n            .build();\n    HttpComponentsClientHttpRequestFactory requestFactory\n            = new HttpComponentsClientHttpRequestFactory();\n    requestFactory.setHttpClient(httpClient);\n\n    ResponseEntity&lt;String&gt; response\n            = new RestTemplate(requestFactory).exchange(\n            url, HttpMethod.GET, httpEntity, String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":328715,"reputation":4400,"user_id":651827,"accept_rate":38,"display_name":"codebrane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565262327,"creation_date":1565262327,"answer_id":57411143,"question_id":57407264,"body_markdown":"This is how I use `RestTemplate`:\r\n\r\n    String payload = &quot;something&quot;;\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n    headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    restTemplate.postForObject(url, new HttpEntity&lt;&gt;(payload, headers), String.class);","title":"Getting Exception with message &quot;http protocol is not supported&quot; when using RestTemplate","body":"<p>This is how I use <code>RestTemplate</code>:</p>\n\n<pre><code>String payload = \"something\";\nHttpHeaders headers = new HttpHeaders();\nheaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\nheaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\nRestTemplate restTemplate = new RestTemplate();\nrestTemplate.postForObject(url, new HttpEntity&lt;&gt;(payload, headers), String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3312546,"reputation":642,"user_id":7620262,"display_name":"Adel Helal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694133328,"creation_date":1694060772,"answer_id":77056616,"question_id":57407264,"body_markdown":"Try using `HttpClientBuilder`.\r\n\r\nThat way you can set `enableHttp` by calling `setEnableHttp(true)` like so:\r\n```\r\nHttpClientBuilder httpClientBuilder = HttpClientBuilder.create();\r\nhttpClientBuilder.setConnectionTimeout(30);\r\nhttpClientBuilder.setSocketTimeout(30);\r\nhttpClientBuilder.setMaxConnTotal(20);\r\nhttpClientBuilder.setMaxConnPerRoute(2);\r\nhttpClientBuilder.setEnableHttp(true); // &lt;- this will fix it\r\n\r\nRestTemplate restTemplate = new RestTemplate(\r\n    httpClientBuilder.newHttpComponentsClientHttpRequestFactory()\r\n);\r\n\r\nHttpHeaders headers = new HttpHeaders();\r\nheaders.setContentType(MediaType.APPLICATION_XML);\r\n\r\nString response = restTemplate.getForEntity(\r\n    &quot;http://ip:port/h2h.php?channelid=acrs&amp;posid=1&quot;,\r\n    String.class,\r\n    new HttpEntity&lt;&gt;(headers))\r\n.getBody();\r\n```","title":"Getting Exception with message &quot;http protocol is not supported&quot; when using RestTemplate","body":"<p>Try using <code>HttpClientBuilder</code>.</p>\n<p>That way you can set <code>enableHttp</code> by calling <code>setEnableHttp(true)</code> like so:</p>\n<pre><code>HttpClientBuilder httpClientBuilder = HttpClientBuilder.create();\nhttpClientBuilder.setConnectionTimeout(30);\nhttpClientBuilder.setSocketTimeout(30);\nhttpClientBuilder.setMaxConnTotal(20);\nhttpClientBuilder.setMaxConnPerRoute(2);\nhttpClientBuilder.setEnableHttp(true); // &lt;- this will fix it\n\nRestTemplate restTemplate = new RestTemplate(\n    httpClientBuilder.newHttpComponentsClientHttpRequestFactory()\n);\n\nHttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_XML);\n\nString response = restTemplate.getForEntity(\n    &quot;http://ip:port/h2h.php?channelid=acrs&amp;posid=1&quot;,\n    String.class,\n    new HttpEntity&lt;&gt;(headers))\n.getBody();\n</code></pre>\n"}],"owner":{"account_id":10617434,"reputation":51,"user_id":7819448,"display_name":"Pratyush Choudhary"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7815,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1694133328,"creation_date":1565249048,"question_id":57407264,"body_markdown":"I&#39;m trying to hit a URL using GET request using RestTemplate. It is giving an exception stating http protocol is not supported.\r\n\r\nI&#39;m able to get the expected response using plain old HttpURLConnection method to hit the endpoint. But I&#39;m unable to do so using the rest template.\r\nI&#39;m not using any kind of VPN or proxy while trying this out.\r\n\r\nFollowing is the code I&#39;m using. I&#39;ll be replacing the actual ip and port used with ip:port.\r\n```\r\nfinal String url = &quot;http://ip:port/h2h.php?channelid=acrs&amp;posid=1&quot;;\r\nfinal HttpHeaders httpHeaders = new HttpHeaders();\r\nhttpHeaders.setContentType(MediaType.APPLICATION_XML);\r\nhttpHeaders.set(HttpHeaders.ACCEPT, MediaType.APPLICATION_XML_VALUE);\r\nfinal HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(&quot;&quot;, httpHeaders)\r\nrestTemplate.exchange(url, HttpMethod.GET, httpEntity, String.class);\r\n```\r\n\r\nException Trace\r\n\r\n```\r\norg.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://ip:port/h2h.php&quot;: http protocol is not supported; nested exception is org.apache.http.conn.UnsupportedSchemeException: http protocol is not supported\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:673) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:620) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:538) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.web.client.RestTemplate$$FastClassBySpringCGLIB$$aa4e9ed0.invoke(&lt;generated&gt;) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.cloud.netflix.metrics.RestTemplateUrlTemplateCapturingAspect.captureUrlTemplate(RestTemplateUrlTemplateCapturingAspect.java:33) ~[spring-cloud-netflix-core-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_191]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_191]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_191]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_191]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:629) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:618) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat org.springframework.web.client.RestTemplate$$EnhancerBySpringCGLIB$$8fab6610.exchange(&lt;generated&gt;) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n\tat com.gdn.x.pulsa.service.impl.TransactionServiceImpl.getTransactionResult(MobileTransactionServiceImpl.java:118) ~[classes/:na]\r\n```\r\n\r\nAny help will be appreciated.\r\n\r\nThank you.\r\n\r\nEDIT: Code with HttpUrlConnection\r\n```\r\ntry {\r\n      URL obj = new URL(url);\r\n      HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n      con.setRequestMethod(&quot;GET&quot;);\r\n      con.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0&quot;);\r\n      int responseCode = con.getResponseCode();\r\n      System.out.println(&quot;\\nSending &#39;GET&#39; request to URL : &quot; + url);\r\n      System.out.println(&quot;Response Code : &quot; + responseCode);\r\n      BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\r\n      String inputLine;\r\n      StringBuffer response = new StringBuffer();\r\n      while ((inputLine = in.readLine()) != null) {\r\n        response.append(inputLine);\r\n      }\r\n      in.close();\r\n      System.out.println(response.toString());\r\n    } catch (Exception e) {\r\n\r\n    }\r\n```","title":"Getting Exception with message &quot;http protocol is not supported&quot; when using RestTemplate","body":"<p>I'm trying to hit a URL using GET request using RestTemplate. It is giving an exception stating http protocol is not supported.</p>\n\n<p>I'm able to get the expected response using plain old HttpURLConnection method to hit the endpoint. But I'm unable to do so using the rest template.\nI'm not using any kind of VPN or proxy while trying this out.</p>\n\n<p>Following is the code I'm using. I'll be replacing the actual ip and port used with ip:port.</p>\n\n<pre><code>final String url = \"http://ip:port/h2h.php?channelid=acrs&amp;posid=1\";\nfinal HttpHeaders httpHeaders = new HttpHeaders();\nhttpHeaders.setContentType(MediaType.APPLICATION_XML);\nhttpHeaders.set(HttpHeaders.ACCEPT, MediaType.APPLICATION_XML_VALUE);\nfinal HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(\"\", httpHeaders)\nrestTemplate.exchange(url, HttpMethod.GET, httpEntity, String.class);\n</code></pre>\n\n<p>Exception Trace</p>\n\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on GET request for \"http://ip:port/h2h.php\": http protocol is not supported; nested exception is org.apache.http.conn.UnsupportedSchemeException: http protocol is not supported\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:673) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:620) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:538) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.web.client.RestTemplate$$FastClassBySpringCGLIB$$aa4e9ed0.invoke(&lt;generated&gt;) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.cloud.netflix.metrics.RestTemplateUrlTemplateCapturingAspect.captureUrlTemplate(RestTemplateUrlTemplateCapturingAspect.java:33) ~[spring-cloud-netflix-core-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_191]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_191]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_191]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_191]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:629) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:618) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673) ~[spring-aop-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.web.client.RestTemplate$$EnhancerBySpringCGLIB$$8fab6610.exchange(&lt;generated&gt;) ~[spring-web-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at com.gdn.x.pulsa.service.impl.TransactionServiceImpl.getTransactionResult(MobileTransactionServiceImpl.java:118) ~[classes/:na]\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thank you.</p>\n\n<p>EDIT: Code with HttpUrlConnection</p>\n\n<pre><code>try {\n      URL obj = new URL(url);\n      HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n      con.setRequestMethod(\"GET\");\n      con.setRequestProperty(\"User-Agent\", \"Mozilla/5.0\");\n      int responseCode = con.getResponseCode();\n      System.out.println(\"\\nSending 'GET' request to URL : \" + url);\n      System.out.println(\"Response Code : \" + responseCode);\n      BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\n      String inputLine;\n      StringBuffer response = new StringBuffer();\n      while ((inputLine = in.readLine()) != null) {\n        response.append(inputLine);\n      }\n      in.close();\n      System.out.println(response.toString());\n    } catch (Exception e) {\n\n    }\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1694112247,"post_id":77061815,"comment_id":135852052,"body_markdown":"You seem to be using Lombok - you might need to make sure all your classes except the abstract ones have default constructors JPA can access. Otherwise, this might be a bug in hibernate as what you&#39;ve shown is correct from a JPA mapping perspective. I would guess that Hibernate has issues with lazy associations of abstract classes as it builds &#39;delegates&#39;. Maybe show the exception stack trace, and see if it works when Condition isn&#39;t abstract - it shouldn&#39;t change anything functionally as long as you don&#39;t create Condition instances in the application.","body":"You seem to be using Lombok - you might need to make sure all your classes except the abstract ones have default constructors JPA can access. Otherwise, this might be a bug in hibernate as what you&#39;ve shown is correct from a JPA mapping perspective. I would guess that Hibernate has issues with lazy associations of abstract classes as it builds &#39;delegates&#39;. Maybe show the exception stack trace, and see if it works when Condition isn&#39;t abstract - it shouldn&#39;t change anything functionally as long as you don&#39;t create Condition instances in the application."}],"answers":[{"tags":[],"owner":{"account_id":29226450,"reputation":58,"user_id":22391023,"display_name":"Yusuf Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694110281,"creation_date":1694110281,"answer_id":77061958,"question_id":77061815,"body_markdown":"I believe you shouldn&#39;t be declaring Condition as an `abstract` class. Removing that will likely resolve your problem.\r\n\r\nSince the default behavior of Hibernate Inheritance is keeping all values in the **same table**, the parent class needs to be able to instantiated as well in order for the table to be made (this is probably my best guess as to why it has to be instantiated; for initial data table creation).\r\n\r\nYou may also want to look at setting your Inheritance `strategy` which is of type InheritanceType as well.\r\n\r\nCheck out [this example here][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/hibernate-inheritance","title":"OneToMany targeting a list of abstract class","body":"<p>I believe you shouldn't be declaring Condition as an <code>abstract</code> class. Removing that will likely resolve your problem.</p>\n<p>Since the default behavior of Hibernate Inheritance is keeping all values in the <strong>same table</strong>, the parent class needs to be able to instantiated as well in order for the table to be made (this is probably my best guess as to why it has to be instantiated; for initial data table creation).</p>\n<p>You may also want to look at setting your Inheritance <code>strategy</code> which is of type InheritanceType as well.</p>\n<p>Check out <a href=\"https://www.baeldung.com/hibernate-inheritance\" rel=\"nofollow noreferrer\">this example here</a>.</p>\n"},{"tags":[],"owner":{"account_id":10510817,"reputation":624,"user_id":7746591,"display_name":"Andres Bores"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694133315,"creation_date":1694133315,"answer_id":77063515,"question_id":77061815,"body_markdown":"Your are annotating your `Condition` class with `Entity`, that&#39;s why Hibernate tries to persist it. If you don&#39;t want to persist objects of `Condition` you must annotate it with `MappedSuperclass` and remove the `Entity` annotation.","title":"OneToMany targeting a list of abstract class","body":"<p>Your are annotating your <code>Condition</code> class with <code>Entity</code>, that's why Hibernate tries to persist it. If you don't want to persist objects of <code>Condition</code> you must annotate it with <code>MappedSuperclass</code> and remove the <code>Entity</code> annotation.</p>\n"}],"owner":{"account_id":4609695,"reputation":30864,"user_id":3738171,"display_name":"Guerric P"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694133315,"creation_date":1694108780,"question_id":77061815,"body_markdown":"I have this mapping:\r\n\r\nOwner class\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    public class Criteria {\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \tprivate UUID id;\r\n    \t\r\n    \t@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;criteria&quot;)\r\n    \tprivate List&lt;Condition&gt; conditions;\r\n    }\r\n\r\nChild (abstract) class\r\n    \r\n    @Entity\r\n    @Inheritance\r\n    @DiscriminatorColumn(name = &quot;type&quot;)\r\n    public abstract class Condition {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \tprivate UUID id;\r\n    \t\r\n    \t@ManyToOne\r\n    \tprivate Criteria criteria;\r\n    }\r\n\r\nInheriting classes\r\n    \r\n    @Getter\r\n    @Setter\r\n    @DiscriminatorValue(&quot;A&quot;)\r\n    public class ConditionA extends Condition {\r\n        // ...\r\n    }\r\n    \r\n    @Getter\r\n    @Setter\r\n    @DiscriminatorValue(&quot;B&quot;)\r\n    public class ConditionB extends Condition {\r\n        // ...\r\n    }\r\n    \r\n    @Getter\r\n    @Setter\r\n    @DiscriminatorValue(&quot;C&quot;)\r\n    public class ConditionC extends Condition {\r\n        // ...\r\n    }\r\n\r\nWhen I build a `List&lt;Condition&gt;`, set it to a `Criteria` and try to persist it, I get this error:\r\n\r\n&gt; org.hibernate.InstantiationException: Cannot instantiate abstract class or interface:  : my.company.model.jpa.Condition\r\n\r\nI have tried to type it as `List&lt;? extends Condition&gt;` but Hibernate simply won&#39;t start with this configuration, throwing another error.\r\n\r\nHow do I make this work?\r\n","title":"OneToMany targeting a list of abstract class","body":"<p>I have this mapping:</p>\n<p>Owner class</p>\n<pre><code>@Entity\n@Getter\n@Setter\npublic class Criteria {\n    @Id\n    @GeneratedValue\n    private UUID id;\n    \n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;criteria&quot;)\n    private List&lt;Condition&gt; conditions;\n}\n</code></pre>\n<p>Child (abstract) class</p>\n<pre><code>@Entity\n@Inheritance\n@DiscriminatorColumn(name = &quot;type&quot;)\npublic abstract class Condition {\n\n    @Id\n    @GeneratedValue\n    private UUID id;\n    \n    @ManyToOne\n    private Criteria criteria;\n}\n</code></pre>\n<p>Inheriting classes</p>\n<pre><code>@Getter\n@Setter\n@DiscriminatorValue(&quot;A&quot;)\npublic class ConditionA extends Condition {\n    // ...\n}\n\n@Getter\n@Setter\n@DiscriminatorValue(&quot;B&quot;)\npublic class ConditionB extends Condition {\n    // ...\n}\n\n@Getter\n@Setter\n@DiscriminatorValue(&quot;C&quot;)\npublic class ConditionC extends Condition {\n    // ...\n}\n</code></pre>\n<p>When I build a <code>List&lt;Condition&gt;</code>, set it to a <code>Criteria</code> and try to persist it, I get this error:</p>\n<blockquote>\n<p>org.hibernate.InstantiationException: Cannot instantiate abstract class or interface:  : my.company.model.jpa.Condition</p>\n</blockquote>\n<p>I have tried to type it as <code>List&lt;? extends Condition&gt;</code> but Hibernate simply won't start with this configuration, throwing another error.</p>\n<p>How do I make this work?</p>\n"},{"tags":["java","gradle","kotlin","version"],"comments":[{"owner":{"account_id":13217527,"reputation":1301,"user_id":9545537,"display_name":"pixix4"},"score":0,"creation_date":1525184015,"post_id":50117966,"comment_id":87253359,"body_markdown":"Do you use `gradle run` or execute the resulting jar?","body":"Do you use <code>gradle run</code> or execute the resulting jar?"},{"owner":{"account_id":2765300,"reputation":3426,"user_id":2381172,"display_name":"xuesheng"},"score":0,"creation_date":1525265694,"post_id":50117966,"comment_id":87288266,"body_markdown":"Why don&#39;t you simply write the version straight to the source code via gradle using `filter(ReplaceTokens...)`?","body":"Why don&#39;t you simply write the version straight to the source code via gradle using <code>filter(ReplaceTokens...)</code>?"},{"owner":{"account_id":44593,"reputation":4230,"user_id":130993,"accept_rate":90,"display_name":"Jean-Fran&#231;ois C&#244;t&#233;"},"score":0,"creation_date":1525354775,"post_id":50117966,"comment_id":87330716,"body_markdown":"@xuesheng Never heard of this method. Feel free to add a possible answer below.","body":"@xuesheng Never heard of this method. Feel free to add a possible answer below."}],"answers":[{"tags":[],"owner":{"account_id":88481,"reputation":8120,"user_id":244702,"accept_rate":75,"display_name":"Kevin Robatel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525184606,"creation_date":1525184606,"answer_id":50118234,"question_id":50117966,"body_markdown":"Gradle is present only at the compilation, not at Runtime.\r\n\r\nFor doing this, you have to generate a class at the compilation time.  \r\nWith `Android` project, the file `BuildConfig.java` is generated but I don&#39;t know if it&#39;s Gradle or Android.\r\n\r\nFor generating Kotlin code, you can check [KotlinPoet][1].\r\n\r\n\r\n  [1]: https://github.com/square/kotlinpoet","title":"Get Version in Kotlin/Java code in Gradle project","body":"<p>Gradle is present only at the compilation, not at Runtime.</p>\n\n<p>For doing this, you have to generate a class at the compilation time.<br>\nWith <code>Android</code> project, the file <code>BuildConfig.java</code> is generated but I don't know if it's Gradle or Android.</p>\n\n<p>For generating Kotlin code, you can check <a href=\"https://github.com/square/kotlinpoet\" rel=\"nofollow noreferrer\">KotlinPoet</a>.</p>\n"},{"comments":[{"owner":{"account_id":44593,"reputation":4230,"user_id":130993,"accept_rate":90,"display_name":"Jean-Fran&#231;ois C&#244;t&#233;"},"score":0,"creation_date":1525195077,"post_id":50119235,"comment_id":87259241,"body_markdown":"Thanks for the reply. I will try this!","body":"Thanks for the reply. I will try this!"},{"owner":{"account_id":44593,"reputation":4230,"user_id":130993,"accept_rate":90,"display_name":"Jean-Fran&#231;ois C&#244;t&#233;"},"score":2,"creation_date":1525198670,"post_id":50119235,"comment_id":87261052,"body_markdown":"The first section works perfectly, the file is generated in the build folder. Unfortunately, I&#39;m not able to load it using `this.javaClass.getResourceAsStream`. Should it be generated in the `build/resources` folder instead? It always return `null` and the `load` crashes with a `NullPointerException`","body":"The first section works perfectly, the file is generated in the build folder. Unfortunately, I&#39;m not able to load it using <code>this.javaClass.getResourceAsStream</code>. Should it be generated in the <code>build&#47;resources</code> folder instead? It always return <code>null</code> and the <code>load</code> crashes with a <code>NullPointerException</code>"},{"owner":{"account_id":44593,"reputation":4230,"user_id":130993,"accept_rate":90,"display_name":"Jean-Fran&#231;ois C&#244;t&#233;"},"score":1,"creation_date":1525198835,"post_id":50119235,"comment_id":87261145,"body_markdown":"Oh! Got it working! Just need to add `/` before `version.properties` in the `getResourceAsStream` function! Thanks!!!","body":"Oh! Got it working! Just need to add <code>&#47;</code> before <code>version.properties</code> in the <code>getResourceAsStream</code> function! Thanks!!!"},{"owner":{"account_id":1791340,"reputation":2885,"user_id":1631664,"display_name":"JK Ly"},"score":0,"creation_date":1525198883,"post_id":50119235,"comment_id":87261173,"body_markdown":"Great, I was about to suggest that - I&#39;ll correct my answer","body":"Great, I was about to suggest that - I&#39;ll correct my answer"},{"owner":{"account_id":9526705,"reputation":684,"user_id":7261191,"accept_rate":56,"display_name":" Dmitriy Greh"},"score":2,"creation_date":1539091330,"post_id":50119235,"comment_id":92369460,"body_markdown":"@JKLy, Unfortunately, I&#39;m not able to load too it using this.javaClass.getResourceAsStream. My load crashes with a NullPointerException. This is still works? Maybe I need to start this task &quot;generateVersionProperties&quot; somehow?","body":"@JKLy, Unfortunately, I&#39;m not able to load too it using this.javaClass.getResourceAsStream. My load crashes with a NullPointerException. This is still works? Maybe I need to start this task &quot;generateVersionProperties&quot; somehow?"},{"owner":{"account_id":1186511,"reputation":4312,"user_id":1160360,"accept_rate":74,"display_name":"Fran Marzoa"},"score":0,"creation_date":1676018038,"post_id":50119235,"comment_id":133056259,"body_markdown":"This works fine when running the code from IntelliJ Idea, but when I generate a jar artifact, it always crashes with a null pointer exception.","body":"This works fine when running the code from IntelliJ Idea, but when I generate a jar artifact, it always crashes with a null pointer exception."},{"owner":{"account_id":1791340,"reputation":2885,"user_id":1631664,"display_name":"JK Ly"},"score":1,"creation_date":1676133375,"post_id":50119235,"comment_id":133078238,"body_markdown":"@FranMarzoa you should check that the `version.properties` is in the jar artifact. If it&#39;s not, then something in your build process isn&#39;t copying it in properly.","body":"@FranMarzoa you should check that the <code>version.properties</code> is in the jar artifact. If it&#39;s not, then something in your build process isn&#39;t copying it in properly."},{"owner":{"account_id":1186511,"reputation":4312,"user_id":1160360,"accept_rate":74,"display_name":"Fran Marzoa"},"score":0,"creation_date":1676228185,"post_id":50119235,"comment_id":133090886,"body_markdown":"Thanks JK Ly, I had already fixed it and that was the issue.","body":"Thanks JK Ly, I had already fixed it and that was the issue."}],"tags":[],"owner":{"account_id":1791340,"reputation":2885,"user_id":1631664,"display_name":"JK Ly"},"comment_count":8,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1525198917,"creation_date":1525188474,"answer_id":50119235,"question_id":50117966,"body_markdown":"One approach to this is to output a version file as part of your Gradle build to a location in your classpath that is accessible as a resource within your application.\r\n\r\nFor example:\r\n\r\nYou can add this to your build.gradle file which will generate a properties file containing the project version number and add it to your applications source set so that it is available in the classpath.\r\n\r\n    def generatedVersionDir = &quot;${buildDir}/generated-version&quot;\r\n    \r\n    sourceSets {\r\n        main {\r\n            output.dir(generatedVersionDir, builtBy: &#39;generateVersionProperties&#39;)\r\n        }\r\n    }\r\n    \r\n    task generateVersionProperties {\r\n        doLast {\r\n            def propertiesFile = file &quot;$generatedVersionDir/version.properties&quot;\r\n            propertiesFile.parentFile.mkdirs()\r\n            def properties = new Properties()\r\n            properties.setProperty(&quot;version&quot;, rootProject.version.toString())\r\n            propertiesFile.withWriter { properties.store(it, null) }\r\n        }\r\n    }\r\n    processResources.dependsOn generateVersionProperties\r\n\r\nThen in your code you will be able to access it by reading in the properties file:\r\n\r\n    class StatusService : IStatusService {\r\n        private val versionProperties = Properties()\r\n        \r\n        init {\r\n            versionProperties.load(this.javaClass.getResourceAsStream(&quot;/version.properties&quot;))\r\n        }\r\n        \r\n        override fun getVersion() : String = versionProperties.getProperty(&quot;version&quot;) ?: &quot;no version&quot;\r\n    }\r\n\r\nOf course you might find it simpler and more appropriate to just output a String to the version file, and then read in the entire file as a String in your code instead of using a properties file.","title":"Get Version in Kotlin/Java code in Gradle project","body":"<p>One approach to this is to output a version file as part of your Gradle build to a location in your classpath that is accessible as a resource within your application.</p>\n\n<p>For example:</p>\n\n<p>You can add this to your build.gradle file which will generate a properties file containing the project version number and add it to your applications source set so that it is available in the classpath.</p>\n\n<pre><code>def generatedVersionDir = \"${buildDir}/generated-version\"\n\nsourceSets {\n    main {\n        output.dir(generatedVersionDir, builtBy: 'generateVersionProperties')\n    }\n}\n\ntask generateVersionProperties {\n    doLast {\n        def propertiesFile = file \"$generatedVersionDir/version.properties\"\n        propertiesFile.parentFile.mkdirs()\n        def properties = new Properties()\n        properties.setProperty(\"version\", rootProject.version.toString())\n        propertiesFile.withWriter { properties.store(it, null) }\n    }\n}\nprocessResources.dependsOn generateVersionProperties\n</code></pre>\n\n<p>Then in your code you will be able to access it by reading in the properties file:</p>\n\n<pre><code>class StatusService : IStatusService {\n    private val versionProperties = Properties()\n\n    init {\n        versionProperties.load(this.javaClass.getResourceAsStream(\"/version.properties\"))\n    }\n\n    override fun getVersion() : String = versionProperties.getProperty(\"version\") ?: \"no version\"\n}\n</code></pre>\n\n<p>Of course you might find it simpler and more appropriate to just output a String to the version file, and then read in the entire file as a String in your code instead of using a properties file.</p>\n"},{"comments":[{"owner":{"account_id":16976069,"reputation":161,"user_id":12279397,"display_name":"Asa"},"score":1,"creation_date":1636306954,"post_id":50159100,"comment_id":123516120,"body_markdown":"I used the essence of this approach for my Java based Spring Boot application and it worked great.   In `build.gradle` I just defined a function to update the application&#39;s properties directly, then called it where it made sense for my workflow, which was building a docker image in my case.   Here&#39;s the function I used for that: ```def setVersionProperty() {\n\texec {\n\t\tcommandLine &#39;sh&#39;, &#39;-c&#39;, &quot;sed -i.bak \\&quot;s/^version:.*\\$/version: ${project.version}/\\&quot; src/main/resources/application.yml &amp;&amp; rm src/main/resources/application.yml.bak&quot;\n\t}\n}```","body":"I used the essence of this approach for my Java based Spring Boot application and it worked great.   In <code>build.gradle</code> I just defined a function to update the application&#39;s properties directly, then called it where it made sense for my workflow, which was building a docker image in my case.   Here&#39;s the function I used for that: <code>def setVersionProperty() { \texec { \t\tcommandLine &#39;sh&#39;, &#39;-c&#39;, &quot;sed -i.bak \\&quot;s&#47;^version:.*\\$&#47;version: ${project.version}&#47;\\&quot; src&#47;main&#47;resources&#47;application.yml &amp;&amp; rm src&#47;main&#47;resources&#47;application.yml.bak&quot; \t} }</code>"}],"tags":[],"owner":{"account_id":2765300,"reputation":3426,"user_id":2381172,"display_name":"xuesheng"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525362343,"creation_date":1525362343,"answer_id":50159100,"question_id":50117966,"body_markdown":"Consider simple *Kotlin* Spring Boot example:\r\n\r\n    @SpringBootApplication\r\n    @RestController\r\n    class DemoApplication {\r\n        @Value(&quot;\\${version}&quot;)\r\n        private lateinit var version: String\r\n\r\n       @GetMapping(&quot;/version&quot;)\r\n       fun version() = version\r\n    }\r\n    \r\n    fun main(args: Array&lt;String&gt;) {\r\n        runApplication&lt;DemoApplication&gt;(*args)\r\n    }\r\nSince the property could be taken from *application.properties* we need to generate that file with required version. To do so we could create a template properties file with following content:\r\n\r\n    version=###appVersion\r\nNow lets tell Gradle to copy that template to the `resource` folder and put the version instead of placeholder\r\n\r\n    import org.apache.tools.ant.filters.ReplaceTokens\r\n    \r\n    task preprocessProperties(type: Copy) {\r\n\t    from &#39;src/main/resources/templates&#39;\r\n\t    into &#39;src/main/resources&#39;\r\n        include &#39;template.properties&#39;\r\n        rename &#39;template.properties&#39;, &#39;application.properties&#39;\r\n        filter(ReplaceTokens, beginToken: &#39;###&#39;, endToken: &#39;&#39;, tokens: [appVersion: &#39;1.0.0&#39;])\r\n    }\r\n    \r\n    compileKotlin.dependsOn preprocessProperties\r\nAnd, voil&#224;, every time you compile *Kotlin* sources you will get a property file with the version you need.\r\n\r\n","title":"Get Version in Kotlin/Java code in Gradle project","body":"<p>Consider simple <em>Kotlin</em> Spring Boot example:</p>\n\n<pre><code>@SpringBootApplication\n@RestController\nclass DemoApplication {\n    @Value(\"\\${version}\")\n    private lateinit var version: String\n\n   @GetMapping(\"/version\")\n   fun version() = version\n}\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;DemoApplication&gt;(*args)\n}\n</code></pre>\n\n<p>Since the property could be taken from <em>application.properties</em> we need to generate that file with required version. To do so we could create a template properties file with following content:</p>\n\n<pre><code>version=###appVersion\n</code></pre>\n\n<p>Now lets tell Gradle to copy that template to the <code>resource</code> folder and put the version instead of placeholder</p>\n\n<pre><code>import org.apache.tools.ant.filters.ReplaceTokens\n\ntask preprocessProperties(type: Copy) {\n    from 'src/main/resources/templates'\n    into 'src/main/resources'\n    include 'template.properties'\n    rename 'template.properties', 'application.properties'\n    filter(ReplaceTokens, beginToken: '###', endToken: '', tokens: [appVersion: '1.0.0'])\n}\n\ncompileKotlin.dependsOn preprocessProperties\n</code></pre>\n\n<p>And, voil√†, every time you compile <em>Kotlin</em> sources you will get a property file with the version you need.</p>\n"},{"tags":[],"owner":{"account_id":1050484,"reputation":1988,"user_id":1054563,"accept_rate":70,"display_name":"superdave"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1637703070,"creation_date":1637703070,"answer_id":70088083,"question_id":50117966,"body_markdown":"It took some time to figure out how translate the accepted answer to `build.gradle.kts`, but this works:\r\n\r\n```\r\nimport java.io.FileOutputStream\r\nimport java.util.Properties\r\n\r\nversion = &quot;your-version&quot;\r\n\r\nval generatedVersionDir = &quot;$buildDir/generated-version&quot;\r\n\r\nsourceSets {\r\n  main {\r\n    kotlin {\r\n      output.dir(generatedVersionDir)\r\n    }\r\n  }\r\n}\r\n\r\ntasks.register(&quot;generateVersionProperties&quot;) {\r\n  doLast {\r\n    val propertiesFile = file(&quot;$generatedVersionDir/version.properties&quot;)\r\n    propertiesFile.parentFile.mkdirs()\r\n    val properties = Properties()\r\n    properties.setProperty(&quot;version&quot;, &quot;$version&quot;)\r\n    val out = FileOutputStream(propertiesFile)\r\n    properties.store(out, null)\r\n  }\r\n}\r\n\r\ntasks.named(&quot;processResources&quot;) {\r\n  dependsOn(&quot;generateVersionProperties&quot;)\r\n}","title":"Get Version in Kotlin/Java code in Gradle project","body":"<p>It took some time to figure out how translate the accepted answer to <code>build.gradle.kts</code>, but this works:</p>\n<pre><code>import java.io.FileOutputStream\nimport java.util.Properties\n\nversion = &quot;your-version&quot;\n\nval generatedVersionDir = &quot;$buildDir/generated-version&quot;\n\nsourceSets {\n  main {\n    kotlin {\n      output.dir(generatedVersionDir)\n    }\n  }\n}\n\ntasks.register(&quot;generateVersionProperties&quot;) {\n  doLast {\n    val propertiesFile = file(&quot;$generatedVersionDir/version.properties&quot;)\n    propertiesFile.parentFile.mkdirs()\n    val properties = Properties()\n    properties.setProperty(&quot;version&quot;, &quot;$version&quot;)\n    val out = FileOutputStream(propertiesFile)\n    properties.store(out, null)\n  }\n}\n\ntasks.named(&quot;processResources&quot;) {\n  dependsOn(&quot;generateVersionProperties&quot;)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":61613,"reputation":791,"user_id":183530,"display_name":"sergeych"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694131465,"creation_date":1694131465,"answer_id":77063446,"question_id":50117966,"body_markdown":"In modern build.gradle.kts it is rather simpler. In the build file all you need is to add a task:\r\n~~~kotlin\r\ntasks.withType&lt;ProcessResources&gt;() {\r\n    doLast {\r\n        val propertiesFile = file(&quot;$buildDir/resources/main/version.properties&quot;)\r\n        propertiesFile.parentFile.mkdirs()\r\n        val properties = Properties()\r\n        properties.setProperty(&quot;version&quot;, rootProject.version.toString())\r\n        propertiesFile.writer().use { properties.store(it, null) }\r\n    }\r\n}\r\n~~~\r\nNow you have it packed and can use it the way you want, I prefer a helper like:\r\n~~~kotlin\r\nobject Config : LogTag(&quot;CONF&quot;) {\r\n\r\n    private val versionProps by lazy {\r\n        Properties().also {\r\n            it.load(this.javaClass.getResourceAsStream(&quot;/version.properties&quot;))\r\n        }\r\n    }\r\n\r\n    val version by lazy {\r\n        versionProps.getProperty(&quot;version&quot;) ?: &quot;no version&quot;\r\n    }\r\n}\r\n~~~","title":"Get Version in Kotlin/Java code in Gradle project","body":"<p>In modern build.gradle.kts it is rather simpler. In the build file all you need is to add a task:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.withType&lt;ProcessResources&gt;() {\n    doLast {\n        val propertiesFile = file(&quot;$buildDir/resources/main/version.properties&quot;)\n        propertiesFile.parentFile.mkdirs()\n        val properties = Properties()\n        properties.setProperty(&quot;version&quot;, rootProject.version.toString())\n        propertiesFile.writer().use { properties.store(it, null) }\n    }\n}\n</code></pre>\n<p>Now you have it packed and can use it the way you want, I prefer a helper like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>object Config : LogTag(&quot;CONF&quot;) {\n\n    private val versionProps by lazy {\n        Properties().also {\n            it.load(this.javaClass.getResourceAsStream(&quot;/version.properties&quot;))\n        }\n    }\n\n    val version by lazy {\n        versionProps.getProperty(&quot;version&quot;) ?: &quot;no version&quot;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":44593,"reputation":4230,"user_id":130993,"accept_rate":90,"display_name":"Jean-Fran&#231;ois C&#244;t&#233;"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11085,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":50119235,"answer_count":5,"score":11,"last_activity_date":1694131465,"creation_date":1525183551,"question_id":50117966,"body_markdown":"I have a webservice coded in kotlin and managed by gradle for the build/dependencies etc...\r\n\r\nI want to do a simple thing: When someone call the `version` REST endpoint of my webservice, it returns the version.\r\n\r\nSince gradle already handle the version with the `version` properties in `build.gradle`, I thought it would be easy to get this value but it seems it is not... I&#39;ve been searching google for hours and everything seems so complicated.\r\n\r\nAny idea how to handle the version the good way?\r\n\r\nHere is what I have right now:\r\n\r\n**build.gradle**\r\n\r\n    version = &quot;1.0.0&quot;\r\n    ...\r\n\r\n**StatusService.kt**\r\n\r\n    class StatusService : IStatusService {\r\n    \r\n        //TODO: Here I would like to get the version from the gradle \r\n        //file instead of maintaining 2 places for the version\r\n        //Something like Gradle.getProperties(&quot;version&quot;) for example\r\n        override fun getVersion() : String = &quot;1.0.0&quot;\r\n    \r\n    }\r\n\r\nI may be completely wrong about this so if you have another equivalent solution, I will accept it too! Thanks","title":"Get Version in Kotlin/Java code in Gradle project","body":"<p>I have a webservice coded in kotlin and managed by gradle for the build/dependencies etc...</p>\n\n<p>I want to do a simple thing: When someone call the <code>version</code> REST endpoint of my webservice, it returns the version.</p>\n\n<p>Since gradle already handle the version with the <code>version</code> properties in <code>build.gradle</code>, I thought it would be easy to get this value but it seems it is not... I've been searching google for hours and everything seems so complicated.</p>\n\n<p>Any idea how to handle the version the good way?</p>\n\n<p>Here is what I have right now:</p>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>version = \"1.0.0\"\n...\n</code></pre>\n\n<p><strong>StatusService.kt</strong></p>\n\n<pre><code>class StatusService : IStatusService {\n\n    //TODO: Here I would like to get the version from the gradle \n    //file instead of maintaining 2 places for the version\n    //Something like Gradle.getProperties(\"version\") for example\n    override fun getVersion() : String = \"1.0.0\"\n\n}\n</code></pre>\n\n<p>I may be completely wrong about this so if you have another equivalent solution, I will accept it too! Thanks</p>\n"},{"tags":["java","web-services","rest","soap"],"comments":[{"owner":{"account_id":243084,"reputation":31440,"user_id":515034,"accept_rate":59,"display_name":"Abimaran Kugathasan"},"score":2,"creation_date":1398862679,"post_id":5890438,"comment_id":35830793,"body_markdown":"***Contract First VS Code First..***","body":"<b><i>Contract First VS Code First..</i></b>"}],"answers":[{"comments":[{"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"score":2,"creation_date":1304547598,"post_id":5890477,"comment_id":6776797,"body_markdown":"For the SOAP vs REST, I think your answer is fair considering the amount of effort in research the OP put before asking... But still, here are some articles that may dig a little bit further:\nhttp://en.wikipedia.org/wiki/Representational_State_Transfer and\nhttp://en.wikipedia.org/wiki/SOAP","body":"For the SOAP vs REST, I think your answer is fair considering the amount of effort in research the OP put before asking... But still, here are some articles that may dig a little bit further: <a href=\"http://en.wikipedia.org/wiki/Representational_State_Transfer\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Representational_State_Transfer</a> and <a href=\"http://en.wikipedia.org/wiki/SOAP\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/SOAP</a>"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1376910786,"post_id":5890477,"comment_id":26871828,"body_markdown":"@AnthonyAccioly Wouldn&#39;t your comment fit better as part of your own answer?","body":"@AnthonyAccioly Wouldn&#39;t your comment fit better as part of your own answer?"},{"owner":{"account_id":1587997,"reputation":6860,"user_id":1471921,"accept_rate":59,"display_name":"Akshay Lokur"},"score":1,"creation_date":1410678729,"post_id":5890477,"comment_id":40411572,"body_markdown":"@Thorbj&#248;rnRavnAndersen: Some correction: In REST, URL does not reflect &quot;operation&quot; to be done! It is the HTTP method (viz. GET, POST and so on) which reflect &quot;operation&quot; to be done on the resource identified by the URL.","body":"@Thorbj&#248;rnRavnAndersen: Some correction: In REST, URL does not reflect &quot;operation&quot; to be done! It is the HTTP method (viz. GET, POST and so on) which reflect &quot;operation&quot; to be done on the resource identified by the URL."}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":3,"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1497879253,"creation_date":1304547168,"answer_id":5890477,"question_id":5890438,"body_markdown":"Top-down means you start with a WSDL and then create all the necessary scaffolding in Java all the way down.\r\n\r\nBottom-up means you start with a Java method, and generate the WSDL from it.\r\n\r\nSOAP means that the URL is the same for all invocations, and only the parameters to the Java method differs.  REST means that the URL plus the HTTP method invoked on it reflects the operation to be done.","title":"What is the difference between a top-down web service and a bottom-up web service?","body":"<p>Top-down means you start with a WSDL and then create all the necessary scaffolding in Java all the way down.</p>\n\n<p>Bottom-up means you start with a Java method, and generate the WSDL from it.</p>\n\n<p>SOAP means that the URL is the same for all invocations, and only the parameters to the Java method differs.  REST means that the URL plus the HTTP method invoked on it reflects the operation to be done.</p>\n"},{"tags":[],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1390364186,"creation_date":1304547286,"answer_id":5890497,"question_id":5890438,"body_markdown":"@mad_programmer - You mean building Web Services with a Bottom Up or Top Down Approach.\r\nIn the first, you start programming the classes and business logic as java code and then generate the web service contract (i.e. WSDL) from it. The latter approach means the opposite (generating class stubs from the WSDL). ","title":"What is the difference between a top-down web service and a bottom-up web service?","body":"<p>@mad_programmer - You mean building Web Services with a Bottom Up or Top Down Approach.\nIn the first, you start programming the classes and business logic as java code and then generate the web service contract (i.e. WSDL) from it. The latter approach means the opposite (generating class stubs from the WSDL). </p>\n"},{"tags":[],"owner":{"account_id":2511374,"reputation":401,"user_id":2183788,"accept_rate":62,"display_name":"raja777m"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1376100228,"creation_date":1376100228,"answer_id":18157999,"question_id":5890438,"body_markdown":"Supporting the answer of andersen, i would like to add a point.\r\nBasically people tend to use Bottom-up approach, because in most of the cases, we would have already started the process of writing the beans, business logic etc, then in the persistence layer, we create the web-services, wsdl&#39;s etc.\r\nwhere as in a new project, where you are building something from scratch, we can use top-down approach, where we just write the wsdl and building the skeleton would give you the beans, implementations, interfaces etc. Still, remember computer cannot generate the logic you want. So, still you need to go through the whole project and fill in the gaps.","title":"What is the difference between a top-down web service and a bottom-up web service?","body":"<p>Supporting the answer of andersen, i would like to add a point.\nBasically people tend to use Bottom-up approach, because in most of the cases, we would have already started the process of writing the beans, business logic etc, then in the persistence layer, we create the web-services, wsdl's etc.\nwhere as in a new project, where you are building something from scratch, we can use top-down approach, where we just write the wsdl and building the skeleton would give you the beans, implementations, interfaces etc. Still, remember computer cannot generate the logic you want. So, still you need to go through the whole project and fill in the gaps.</p>\n"},{"comments":[{"owner":{"account_id":376806,"reputation":331,"user_id":728513,"accept_rate":56,"display_name":"Yogendra"},"score":0,"creation_date":1482898883,"post_id":20212437,"comment_id":69912352,"body_markdown":"I like this answer as this would avoid the manual human error in writing xsd and wsdl files. However, do you think the wsdl file generated will be portable across various JAX-WS implementations?","body":"I like this answer as this would avoid the manual human error in writing xsd and wsdl files. However, do you think the wsdl file generated will be portable across various JAX-WS implementations?"}],"tags":[],"owner":{"account_id":3172419,"reputation":583,"user_id":2681023,"display_name":"Varun"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1385456558,"creation_date":1385456558,"answer_id":20212437,"question_id":5890438,"body_markdown":"Adding to the answer when a project is started from scratch usual approach is to create a very basic interface and then create a WSDl from it. This will save you from writing complex WSDl. Then we can add project specific operations in WSDl directly and once WSDl is finalized we can go ahead with top-down approach.","title":"What is the difference between a top-down web service and a bottom-up web service?","body":"<p>Adding to the answer when a project is started from scratch usual approach is to create a very basic interface and then create a WSDl from it. This will save you from writing complex WSDl. Then we can add project specific operations in WSDl directly and once WSDl is finalized we can go ahead with top-down approach.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1694131364,"creation_date":1404223126,"answer_id":24512150,"question_id":5890438,"body_markdown":"&gt;[**Contract-first versus Contract-last**][1]\r\n\r\n**Bottom-Up :** approach takes a high level definition of the problem and subdivides it into subproblems. i.e. **Contract-last**. \r\n\r\n - **Advantages** \r\n  \r\n   - Code first   \r\n   - Initial stage very easy to develop.  \r\n \r\n- **Disadvantages:**  \r\n     \r\n   - Maintenance is very very hard.\r\n   - Tightly coupled\r\n\r\n***\r\n**Top-Down :**  Think of the basic functionality and the parts going to need. i.e. **contract-first**.  \r\n\r\nThere are the following reasons for preferring a Top-Down development style.\r\n\r\n**1. Fragility**\r\nThe contract-last development style results in your web service contract (WSDL and your XSD) being generated from your Java contract (usually an interface). If you are using this approach, you will have no guarantee that the contract stays constant over time. Each time you change your Java code and redeploy it, there might be subsequent changes to the web service contract.\r\nAditionally, not all SOAP stacks generate the same web service contract from a Java contract. This means changing your current SOAP stack for a different one (for whatever reason), might also change your web service contract.\r\nWhen a web service contract changes, users of the contract will have to be instructed to obtain the new contract and potentially change their code to accommodate for any changes in the contract.\r\nIn order for a contract to be useful, it must remain constant for as long as possible. If a contract changes, you will have to contact all of the users of your service, and instruct them to get the new version of the contract.\r\n\r\n**2. Performance**\r\nWhen Java is automatically transformed into XML, there is no way to be sure as to what is sent across the wire. An object might reference another object, which refers to another, etc. In the end, half of the objects on the heap in your virtual machine might be converted into XML, which will result in slow response times.\r\nWhen using contract-first, you explicitly describe what XML is sent where, thus making sure that it is exactly what you want.\r\n\r\n**3. Reusability**\r\nDefining your schema in a separate file allows you to reuse that file in different scenarios.\r\n \r\n**4. Versioning**\r\nEven though a contract must remain constant for as long as possible, they do need to be changed sometimes. In Java, this typically results in a new Java interface, such as AirlineService2, and a (new) implementation of that interface. Of course, the old service must be kept around, because there might be clients who have not migrated yet.\r\nIf using contract-first, we can have a looser coupling between contract and implementation. Such a looser coupling allows us to implement both versions of the contract in one class.   \r\n\r\n\r\n**Key Differences:**\r\n\r\n- **Order of Development:** The primary difference is the order in which design and implementation occur. Top-down starts with design, while bottom-up starts with implementation.\r\n- **Contract Approach:** Top-down has a contract-first approach, where the contract is designed before implementation. Bottom-up derives the contract from the implemented code.\r\n- **Use Cases:** Top-down is useful when you want to define a clear interface first or when multiple teams need to agree on the contract upfront. Bottom-up is useful for rapid development or when you have existing code to expose as a service.\r\n\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-ws/site/reference/html/why-contract-first.html\r\n  [2]: https://i.stack.imgur.com/3go2F.png\r\n  [3]: https://i.stack.imgur.com/kto7W.png\r\n  [4]: https://i.stack.imgur.com/wzizW.jpg","title":"What is the difference between a top-down web service and a bottom-up web service?","body":"<blockquote>\n<p><a href=\"http://docs.spring.io/spring-ws/site/reference/html/why-contract-first.html\" rel=\"nofollow noreferrer\"><strong>Contract-first versus Contract-last</strong></a></p>\n</blockquote>\n<p><strong>Bottom-Up :</strong> approach takes a high level definition of the problem and subdivides it into subproblems. i.e. <strong>Contract-last</strong>.</p>\n<ul>\n<li><p><strong>Advantages</strong></p>\n<ul>\n<li>Code first</li>\n<li>Initial stage very easy to develop.</li>\n</ul>\n</li>\n<li><p><strong>Disadvantages:</strong></p>\n<ul>\n<li>Maintenance is very very hard.</li>\n<li>Tightly coupled</li>\n</ul>\n</li>\n</ul>\n<hr />\n<p><strong>Top-Down :</strong>  Think of the basic functionality and the parts going to need. i.e. <strong>contract-first</strong>.</p>\n<p>There are the following reasons for preferring a Top-Down development style.</p>\n<p><strong>1. Fragility</strong>\nThe contract-last development style results in your web service contract (WSDL and your XSD) being generated from your Java contract (usually an interface). If you are using this approach, you will have no guarantee that the contract stays constant over time. Each time you change your Java code and redeploy it, there might be subsequent changes to the web service contract.\nAditionally, not all SOAP stacks generate the same web service contract from a Java contract. This means changing your current SOAP stack for a different one (for whatever reason), might also change your web service contract.\nWhen a web service contract changes, users of the contract will have to be instructed to obtain the new contract and potentially change their code to accommodate for any changes in the contract.\nIn order for a contract to be useful, it must remain constant for as long as possible. If a contract changes, you will have to contact all of the users of your service, and instruct them to get the new version of the contract.</p>\n<p><strong>2. Performance</strong>\nWhen Java is automatically transformed into XML, there is no way to be sure as to what is sent across the wire. An object might reference another object, which refers to another, etc. In the end, half of the objects on the heap in your virtual machine might be converted into XML, which will result in slow response times.\nWhen using contract-first, you explicitly describe what XML is sent where, thus making sure that it is exactly what you want.</p>\n<p><strong>3. Reusability</strong>\nDefining your schema in a separate file allows you to reuse that file in different scenarios.</p>\n<p><strong>4. Versioning</strong>\nEven though a contract must remain constant for as long as possible, they do need to be changed sometimes. In Java, this typically results in a new Java interface, such as AirlineService2, and a (new) implementation of that interface. Of course, the old service must be kept around, because there might be clients who have not migrated yet.\nIf using contract-first, we can have a looser coupling between contract and implementation. Such a looser coupling allows us to implement both versions of the contract in one class.</p>\n<p><strong>Key Differences:</strong></p>\n<ul>\n<li><strong>Order of Development:</strong> The primary difference is the order in which design and implementation occur. Top-down starts with design, while bottom-up starts with implementation.</li>\n<li><strong>Contract Approach:</strong> Top-down has a contract-first approach, where the contract is designed before implementation. Bottom-up derives the contract from the implemented code.</li>\n<li><strong>Use Cases:</strong> Top-down is useful when you want to define a clear interface first or when multiple teams need to agree on the contract upfront. Bottom-up is useful for rapid development or when you have existing code to expose as a service.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/wzizW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wzizW.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":3698221,"reputation":179,"user_id":6784380,"display_name":"Vishnu Dahatonde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501767137,"creation_date":1501767137,"answer_id":45485768,"question_id":5890438,"body_markdown":"In top down you define what you are going to do first. i.e. your wsdl.\r\nAnd then you proceed with actual development.\r\nThough it seems difficult to create wsdl first, its recommended [ (Refer Eclipse) ][1] as in long term it simplifies your development.\r\n\r\nExactly opposite happens in bottom up. \r\nWe start with the code part and then using built in tools we create wsdl. \r\nThis might seems easy at start but it creates lot of confusion when you go big with the complexity of your code. \r\n\r\n  [1]: http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.jst.ws.doc.user%2Fconcepts%2Fcwsbtmup.html","title":"What is the difference between a top-down web service and a bottom-up web service?","body":"<p>In top down you define what you are going to do first. i.e. your wsdl.\nAnd then you proceed with actual development.\nThough it seems difficult to create wsdl first, its recommended <a href=\"http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.jst.ws.doc.user%2Fconcepts%2Fcwsbtmup.html\" rel=\"nofollow noreferrer\"> (Refer Eclipse) </a> as in long term it simplifies your development.</p>\n\n<p>Exactly opposite happens in bottom up. \nWe start with the code part and then using built in tools we create wsdl. \nThis might seems easy at start but it creates lot of confusion when you go big with the complexity of your code. </p>\n"}],"owner":{"account_id":96799,"reputation":2730,"user_id":262914,"accept_rate":72,"display_name":"Maverick"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86439,"favorite_count":0,"down_vote_count":1,"up_vote_count":50,"accepted_answer_id":5890477,"answer_count":6,"score":49,"last_activity_date":1694131364,"creation_date":1304546845,"question_id":5890438,"body_markdown":"In Java, what is the difference between a top-down web service and a bottom-up web service? Also, what is the difference between a SOAP and a REST-ful web service?","title":"What is the difference between a top-down web service and a bottom-up web service?","body":"<p>In Java, what is the difference between a top-down web service and a bottom-up web service? Also, what is the difference between a SOAP and a REST-ful web service?</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1384484306,"post_id":19992675,"comment_id":29766023,"body_markdown":"Post the full stacktrace, we can&#39;t tell if there&#39;s a `ClassNotFoundException`.","body":"Post the full stacktrace, we can&#39;t tell if there&#39;s a <code>ClassNotFoundException</code>."},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384484620,"post_id":19992675,"comment_id":29766090,"body_markdown":"I have edited it, please find the stacktrace","body":"I have edited it, please find the stacktrace"},{"owner":{"account_id":3106191,"reputation":1678,"user_id":2628911,"display_name":"Sandhu Santhakumar"},"score":0,"creation_date":1384484939,"post_id":19992675,"comment_id":29766154,"body_markdown":"Are you using hibernate.cfg.xml  or annoations for mapping model classes?","body":"Are you using hibernate.cfg.xml  or annoations for mapping model classes?"},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384485067,"post_id":19992675,"comment_id":29766180,"body_markdown":"annotations for mapping model classes.","body":"annotations for mapping model classes."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1384485106,"post_id":19992675,"comment_id":29766189,"body_markdown":"There has to be something else in the stack trace. The `MappingException` wraps another `Exception` .","body":"There has to be something else in the stack trace. The <code>MappingException</code> wraps another <code>Exception</code> ."},{"owner":{"account_id":3106191,"reputation":1678,"user_id":2628911,"display_name":"Sandhu Santhakumar"},"score":0,"creation_date":1384485172,"post_id":19992675,"comment_id":29766207,"body_markdown":"Can u try using &lt;bean id=&quot;sessionFactory&quot;\n        class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;","body":"Can u try using &lt;bean id=&quot;sessionFactory&quot;         class=&quot;org.springframework.orm.hibernate3.annotation.Annotat&zwnj;&#8203;ionSessionFactoryBea&zwnj;&#8203;n&quot;&gt;"},{"owner":{"account_id":1423067,"reputation":30040,"user_id":1347281,"accept_rate":86,"display_name":"Vidya"},"score":0,"creation_date":1384485259,"post_id":19992675,"comment_id":29766226,"body_markdown":"Something is up with the Hibernate entity `com.myapp.contact.form.Contact`. Can you post your Hibernate configuration?","body":"Something is up with the Hibernate entity <code>com.myapp.contact.form.Contact</code>. Can you post your Hibernate configuration?"},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384485561,"post_id":19992675,"comment_id":29766290,"body_markdown":"Hi sandhu I have edited it and got another error message please see the stacktrace: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;contactController&#39;: Injection of autowired dependencies failed; nested exception is","body":"Hi sandhu I have edited it and got another error message please see the stacktrace: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;contactController&#39;: Injection of autowired dependencies failed; nested exception is"},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384485579,"post_id":19992675,"comment_id":29766295,"body_markdown":"org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myapp.contact.service.ContactService com.myapp.contact.controller.ContactController.contactService; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBea??n] for bean with name &#39;sessionFactory&#39; defined in ServletContext resource [/WEB-INF/spring-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFact","body":"org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myapp.contact.service.ContactService com.myapp.contact.controller.ContactController.contactServic&zwnj;&#8203;e; nested exception is org.springframework.beans.factory.CannotLoadBeanClassExcepti&zwnj;&#8203;on: Cannot find class [org.springframework.orm.hibernate3.annotation.AnnotationSes&zwnj;&#8203;sionFactoryBea??n] for bean with name &#39;sessionFactory&#39; defined in ServletContext resource [/WEB-INF/spring-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSess&zwnj;&#8203;ionFact"},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384485626,"post_id":19992675,"comment_id":29766305,"body_markdown":"Hi vidya here is my hibernate.cfg.xml file: &lt;hibernate-configuration&gt;\n\t&lt;session-factory&gt;\n\t\t&lt;mapping class=&quot;com.myapp.contact.form.Contact&quot; /&gt;\n\t&lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;","body":"Hi vidya here is my hibernate.cfg.xml file: &lt;hibernate-configuration&gt; \t&lt;session-factory&gt; \t\t&lt;mapping class=&quot;com.myapp.contact.form.Contact&quot; /&gt; \t&lt;/session-factory&gt; &lt;/hibernate-configuration&gt;"},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384486801,"post_id":19992675,"comment_id":29766613,"body_markdown":"I have changed LocalSessionFactoryBean to AnnotationSessionFactoryBean  and I got the following exception java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBea??n","body":"I have changed LocalSessionFactoryBean to AnnotationSessionFactoryBean  and I got the following exception java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSess&zwnj;&#8203;ionFactoryBea??n"}],"answers":[{"comments":[{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384485730,"post_id":19992910,"comment_id":29766331,"body_markdown":"I have mentioned that in my hibernate.cfg.xml:  &lt;hibernate-configuration&gt;\n\t&lt;session-factory&gt;\n\t\t&lt;mapping class=&quot;com.myapp.contact.form.Contact&quot; /&gt;\n\t&lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;","body":"I have mentioned that in my hibernate.cfg.xml:  &lt;hibernate-configuration&gt; \t&lt;session-factory&gt; \t\t&lt;mapping class=&quot;com.myapp.contact.form.Contact&quot; /&gt; \t&lt;/session-factory&gt; &lt;/hibernate-configuration&gt;"},{"owner":{"account_id":3106191,"reputation":1678,"user_id":2628911,"display_name":"Sandhu Santhakumar"},"score":0,"creation_date":1384485770,"post_id":19992910,"comment_id":29766341,"body_markdown":"What is the package name in Contact class? com.myapp.contact.form?","body":"What is the package name in Contact class? com.myapp.contact.form?"},{"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"score":0,"creation_date":1384485917,"post_id":19992910,"comment_id":29766386,"body_markdown":"package com.myapp.contact.form;","body":"package com.myapp.contact.form;"}],"tags":[],"owner":{"account_id":3106191,"reputation":1678,"user_id":2628911,"display_name":"Sandhu Santhakumar"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384486366,"creation_date":1384485649,"answer_id":19992910,"question_id":19992675,"body_markdown":"Seems package named `com.myapp.contact.form` according to your Hibernate config, `&lt;mapping class=&quot;com.myapp.contact.form.Contact&quot;/&gt;` but the source is in different package.\r\n\r\nIf you are using annotations then no need to use hibernate.cfg.xml\r\n\r\njust change the sessionFactory bean in spring.xml as:\r\n\r\n    &lt;bean id=&quot;sessionFactory&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;\r\n    \t\tp:dataSource-ref=&quot;dataSource&quot;&gt;\r\n    \t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;packagesToScan&quot;&gt;\r\n    \t\t\t&lt;array&gt;\r\n    \t\t\t\t&lt;value&gt;&lt;-- YOUR PAKAGE NAME HERE --&gt;&lt;/value&gt;\r\n    \t\t\t&lt;/array&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;","title":"org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in ServletContext resource","body":"<p>Seems package named <code>com.myapp.contact.form</code> according to your Hibernate config, <code>&lt;mapping class=\"com.myapp.contact.form.Contact\"/&gt;</code> but the source is in different package.</p>\n\n<p>If you are using annotations then no need to use hibernate.cfg.xml</p>\n\n<p>just change the sessionFactory bean in spring.xml as:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\"\n        class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"\n        p:dataSource-ref=\"dataSource\"&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n        &lt;property name=\"packagesToScan\"&gt;\n            &lt;array&gt;\n                &lt;value&gt;&lt;-- YOUR PAKAGE NAME HERE --&gt;&lt;/value&gt;\n            &lt;/array&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60647,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694131260,"creation_date":1384484096,"question_id":19992675,"body_markdown":"I am getting the exception:\r\n\r\n`Error creating bean with name &#39;sessionFactory&#39; defined in ServletContext resource`  \r\n\r\nIs it happening because of jar mismatch? If you need any further details please let me know. \r\n\r\n**log**\r\n\r\n    ERROR: org.springframework.web.servlet.DispatcherServlet - Context initialization failed\r\n\r\n**Stack-Trace :**\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Unable to load class declared as &lt;mapping class=&quot;com.myapp.contact.form.Contact&quot;/&gt; in the configuration:\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)\r\n    \tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)\r\n    \tat javax.servlet.GenericServlet.init(GenericServlet.java:160)\r\n    \tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)\r\n    \tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)\r\n    \tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)\r\n    \tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n    \tat java.lang.Thread.run(Thread.java:662)\r\n    Caused by: org.hibernate.MappingException: Unable to load class declared as &lt;mapping class=&quot;com.myapp.contact.form.Contact&quot;/&gt; in the configuration:\r\n    \tat org.hibernate.cfg.AnnotationConfiguration.parseMappingElement(AnnotationConfiguration.java:638)\r\n    \tat org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1561)\r\n    \tat org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1540)\r\n    \tat org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:1002)\r\n    \tat org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:69)\r\n    \tat org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1514)\r\n    \tat org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:990)\r\n    \tat org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:69)\r\n    \tat org.hibernate.cfg.Configuration.configure(Configuration.java:1449)\r\n    \tat org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:978)\r\n    \tat org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:69)\r\n    \tat org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:642)\r\n    \tat org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)\r\n    \t... 28 more\r\n\r\n\r\n**spring-servlet.xml :**\r\n\r\n&lt;context:annotation-config /&gt;\r\n\t&lt;context:component-scan base-package=&quot;com.myapp.contact&quot; /&gt;\r\n\r\n\t&lt;bean id=&quot;jspViewResolver&quot;\tclass=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n\t\t&lt;property name=&quot;viewClass&quot;\r\n\t\t\tvalue=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt;\r\n\t\t&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsps/&quot; /&gt;\r\n\t\t&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t&lt;bean id=&quot;messageSource&quot;\tclass=&quot;org.springframework.context.support.ReloadableResourceBundleMessageSource&quot;&gt;\r\n\t\t&lt;property name=&quot;basename&quot; value=&quot;classpath:messages&quot; /&gt;\r\n\t\t&lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\t&lt;bean id=&quot;propertyConfigurer&quot;\tclass=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;\r\n\t\tp:location=&quot;classpath:/jdbc.properties&quot; /&gt;\r\n\r\n\t&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;\r\n\t\tdestroy-method=&quot;close&quot; p:driverClassName=&quot;${jdbc.driverClassName}&quot;\r\n\t\tp:url=&quot;${jdbc.databaseurl}&quot; p:username=&quot;${jdbc.username}&quot; p:password=&quot;${jdbc.password}&quot; /&gt;\r\n\r\n\r\n\t&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;configLocation&quot;&gt;\r\n\t\t\t&lt;value&gt;classpath:/hibernate.cfg.xml&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;configurationClass&quot;&gt;\r\n\t\t\t&lt;value&gt;org.hibernate.cfg.AnnotationConfiguration&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;${jdbc.dialect}&lt;/prop&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n\t\t\t\t&lt;!-- &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt; --&gt;\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t&lt;tx:annotation-driven /&gt;\r\n\t&lt;bean id=&quot;transactionManager&quot;\tclass=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;\r\n\t\t&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\r\n**pom.xml:**\r\n\r\n        &lt;properties&gt;\r\n\t\t&lt;org.springframework.version&gt;3.0.5.RELEASE&lt;/org.springframework.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- Core utilities used by other modules. Define this if you use Spring \r\n\t\t\tUtility APIs (org.springframework.core.*/org.springframework.util.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Expression Language (depends on spring-core) Define this if you use \r\n\t\t\tSpring Expression APIs (org.springframework.expression.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Bean Factory and JavaBeans utilities (depends on spring-core) Define \r\n\t\t\tthis if you use Spring Bean APIs (org.springframework.beans.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Aspect Oriented Programming (AOP) Framework (depends on spring-core, \r\n\t\t\tspring-beans) Define this if you use Spring AOP APIs (org.springframework.aop.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Application Context (depends on spring-core, spring-expression, spring-aop, \r\n\t\t\tspring-beans) This is the central artifact for Spring&#39;s Dependency Injection \r\n\t\t\tContainer and is generally always defined --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Various Application Context utilities, including EhCache, JavaMail, \r\n\t\t\tQuartz, and Freemarker integration Define this if you need any of these integrations --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Transaction Management Abstraction (depends on spring-core, spring-beans, \r\n\t\t\tspring-aop, spring-context) Define this if you use Spring Transactions or \r\n\t\t\tDAO Exception Hierarchy (org.springframework.transaction.*/org.springframework.dao.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- JDBC Data Access Library (depends on spring-core, spring-beans, spring-context, \r\n\t\t\tspring-tx) Define this if you use Spring&#39;s JdbcTemplate API (org.springframework.jdbc.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA, \r\n\t\t\tand iBatis. (depends on spring-core, spring-beans, spring-context, spring-tx) \r\n\t\t\tDefine this if you need ORM (org.springframework.orm.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Object-to-XML Mapping (OXM) abstraction and integration with JAXB, \r\n\t\t\tJiBX, Castor, XStream, and XML Beans. (depends on spring-core, spring-beans, \r\n\t\t\tspring-context) Define this if you need OXM (org.springframework.oxm.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Web application development utilities applicable to both Servlet and \r\n\t\t\tPortlet Environments (depends on spring-core, spring-beans, spring-context) \r\n\t\t\tDefine this if you use Spring MVC, or wish to use Struts, JSF, or another \r\n\t\t\tweb framework with Spring (org.springframework.web.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Spring MVC for Servlet Environments (depends on spring-core, spring-beans, \r\n\t\t\tspring-context, spring-web) Define this if you use Spring MVC with a Servlet \r\n\t\t\tContainer such as Apache Tomcat (org.springframework.web.servlet.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Spring MVC for Portlet Environments (depends on spring-core, spring-beans, \r\n\t\t\tspring-context, spring-web) Define this if you use Spring MVC with a Portlet \r\n\t\t\tContainer (org.springframework.web.portlet.*) --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc-portlet&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Support for testing Spring applications with tools such as JUnit and \r\n\t\t\tTestNG This artifact is generally always defined with a &#39;test&#39; scope for \r\n\t\t\tthe integration testing framework and unit testing stubs --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- Spring security --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;!-- Hibernate resources --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.6.7.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.0.GA&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.3.1.GA&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.3.2.GA&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- EhCache --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;ehcache-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;antlr&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;antlr&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- Taglibs --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;taglibs&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;standard&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20030825.184428&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-pool&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20030825.183949&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Log4j --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.14&lt;/version&gt;\r\n\t\t\t&lt;type&gt;jar&lt;/type&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;mail&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;ojdbc14&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;10.2.0.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.0.GA&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\r\nAfter digging a lot I found that it is happening because of ClassNotFound exception for AnnotationSessionFactoryBean but I have added the dependencies and it is in my class path so why I am getting this kind of exception. screen shots attached \r\n![enter image description here][1]\r\n![enter image description here][2]\r\nThanks.....\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/tu3i2.png\r\n  [2]: http://i.stack.imgur.com/bU9Eo.png","title":"org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in ServletContext resource","body":"<p>I am getting the exception:</p>\n\n<p><code>Error creating bean with name 'sessionFactory' defined in ServletContext resource</code>  </p>\n\n<p>Is it happening because of jar mismatch? If you need any further details please let me know. </p>\n\n<p><strong>log</strong></p>\n\n<pre><code>ERROR: org.springframework.web.servlet.DispatcherServlet - Context initialization failed\n</code></pre>\n\n<p><strong>Stack-Trace :</strong></p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Unable to load class declared as &lt;mapping class=\"com.myapp.contact.form.Contact\"/&gt; in the configuration:\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)\n    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)\n    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)\n    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)\n    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:160)\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)\n    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)\n    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\nCaused by: org.hibernate.MappingException: Unable to load class declared as &lt;mapping class=\"com.myapp.contact.form.Contact\"/&gt; in the configuration:\n    at org.hibernate.cfg.AnnotationConfiguration.parseMappingElement(AnnotationConfiguration.java:638)\n    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1561)\n    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1540)\n    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:1002)\n    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:69)\n    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1514)\n    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:990)\n    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:69)\n    at org.hibernate.cfg.Configuration.configure(Configuration.java:1449)\n    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:978)\n    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:69)\n    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:642)\n    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)\n    ... 28 more\n</code></pre>\n\n<p><strong>spring-servlet.xml :</strong></p>\n\n<p>\n    </p>\n\n<pre><code>&lt;bean id=\"jspViewResolver\"  class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;property name=\"viewClass\"\n        value=\"org.springframework.web.servlet.view.JstlView\" /&gt;\n    &lt;property name=\"prefix\" value=\"/WEB-INF/jsps/\" /&gt;\n    &lt;property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"messageSource\"    class=\"org.springframework.context.support.ReloadableResourceBundleMessageSource\"&gt;\n    &lt;property name=\"basename\" value=\"classpath:messages\" /&gt;\n    &lt;property name=\"defaultEncoding\" value=\"UTF-8\" /&gt;\n&lt;/bean&gt;\n&lt;bean id=\"propertyConfigurer\"   class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"\n    p:location=\"classpath:/jdbc.properties\" /&gt;\n\n&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"\n    destroy-method=\"close\" p:driverClassName=\"${jdbc.driverClassName}\"\n    p:url=\"${jdbc.databaseurl}\" p:username=\"${jdbc.username}\" p:password=\"${jdbc.password}\" /&gt;\n\n\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"configLocation\"&gt;\n        &lt;value&gt;classpath:/hibernate.cfg.xml&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"configurationClass\"&gt;\n        &lt;value&gt;org.hibernate.cfg.AnnotationConfiguration&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;${jdbc.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n            &lt;!-- &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt; --&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven /&gt;\n&lt;bean id=\"transactionManager\"   class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p><strong>pom.xml:</strong></p>\n\n<pre><code>    &lt;properties&gt;\n    &lt;org.springframework.version&gt;3.0.5.RELEASE&lt;/org.springframework.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- Core utilities used by other modules. Define this if you use Spring \n        Utility APIs (org.springframework.core.*/org.springframework.util.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Expression Language (depends on spring-core) Define this if you use \n        Spring Expression APIs (org.springframework.expression.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Bean Factory and JavaBeans utilities (depends on spring-core) Define \n        this if you use Spring Bean APIs (org.springframework.beans.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Aspect Oriented Programming (AOP) Framework (depends on spring-core, \n        spring-beans) Define this if you use Spring AOP APIs (org.springframework.aop.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Application Context (depends on spring-core, spring-expression, spring-aop, \n        spring-beans) This is the central artifact for Spring's Dependency Injection \n        Container and is generally always defined --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Various Application Context utilities, including EhCache, JavaMail, \n        Quartz, and Freemarker integration Define this if you need any of these integrations --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Transaction Management Abstraction (depends on spring-core, spring-beans, \n        spring-aop, spring-context) Define this if you use Spring Transactions or \n        DAO Exception Hierarchy (org.springframework.transaction.*/org.springframework.dao.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- JDBC Data Access Library (depends on spring-core, spring-beans, spring-context, \n        spring-tx) Define this if you use Spring's JdbcTemplate API (org.springframework.jdbc.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA, \n        and iBatis. (depends on spring-core, spring-beans, spring-context, spring-tx) \n        Define this if you need ORM (org.springframework.orm.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Object-to-XML Mapping (OXM) abstraction and integration with JAXB, \n        JiBX, Castor, XStream, and XML Beans. (depends on spring-core, spring-beans, \n        spring-context) Define this if you need OXM (org.springframework.oxm.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Web application development utilities applicable to both Servlet and \n        Portlet Environments (depends on spring-core, spring-beans, spring-context) \n        Define this if you use Spring MVC, or wish to use Struts, JSF, or another \n        web framework with Spring (org.springframework.web.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring MVC for Servlet Environments (depends on spring-core, spring-beans, \n        spring-context, spring-web) Define this if you use Spring MVC with a Servlet \n        Container such as Apache Tomcat (org.springframework.web.servlet.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring MVC for Portlet Environments (depends on spring-core, spring-beans, \n        spring-context, spring-web) Define this if you use Spring MVC with a Portlet \n        Container (org.springframework.web.portlet.*) --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc-portlet&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Support for testing Spring applications with tools such as JUnit and \n        TestNG This artifact is generally always defined with a 'test' scope for \n        the integration testing framework and unit testing stubs --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Spring security --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- Hibernate resources --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;3.6.7.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-annotations&lt;/artifactId&gt;\n        &lt;version&gt;3.3.1.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;3.3.2.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- EhCache --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\n        &lt;artifactId&gt;ehcache-core&lt;/artifactId&gt;\n        &lt;version&gt;2.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;antlr&lt;/groupId&gt;\n        &lt;artifactId&gt;antlr&lt;/artifactId&gt;\n        &lt;version&gt;2.7.7&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Taglibs --&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;taglibs&lt;/groupId&gt;\n        &lt;artifactId&gt;standard&lt;/artifactId&gt;\n        &lt;version&gt;1.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n        &lt;version&gt;20030825.184428&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-pool&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\n        &lt;version&gt;20030825.183949&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Log4j --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.14&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n                &lt;artifactId&gt;mail&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n        &lt;version&gt;1.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc14&lt;/artifactId&gt;\n        &lt;version&gt;10.2.0.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n        &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n        &lt;version&gt;2.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>After digging a lot I found that it is happening because of ClassNotFound exception for AnnotationSessionFactoryBean but I have added the dependencies and it is in my class path so why I am getting this kind of exception. screen shots attached \n<img src=\"https://i.stack.imgur.com/tu3i2.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/bU9Eo.png\" alt=\"enter image description here\">\nThanks.....</p>\n"},{"tags":["java","jms","activemq-artemis"],"comments":[{"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"score":0,"creation_date":1694088573,"post_id":77058154,"comment_id":135846935,"body_markdown":"I heard that JMS reads in chunks, not messages","body":"I heard that JMS reads in chunks, not messages"}],"answers":[{"comments":[{"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"score":0,"creation_date":1694123080,"post_id":77060211,"comment_id":135853756,"body_markdown":"And how can I do it without a delivery status. That is, I subtracted one message and it was simply removed from the queue and from the web console? That is, so that the rest of the messages are visible in the queue","body":"And how can I do it without a delivery status. That is, I subtracted one message and it was simply removed from the queue and from the web console? That is, so that the rest of the messages are visible in the queue"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1694129829,"post_id":77060211,"comment_id":135854468,"body_markdown":"I updated my answer to make this more clear. Hope that helps!","body":"I updated my answer to make this more clear. Hope that helps!"},{"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"score":0,"creation_date":1694365506,"post_id":77060211,"comment_id":135878569,"body_markdown":"Yes thank you. Helped a lot","body":"Yes thank you. Helped a lot"}],"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694129754,"creation_date":1694094569,"answer_id":77060211,"question_id":77058154,"body_markdown":"When a core JMS consumer starts receiving messages the broker dispatches more than just one message to it. This is a performance optimization so that the client doesn&#39;t have to make repeated network round-trips to the broker to receive additional messages. This behavior can be tuned using the `consumerWindowSize` URL parameter. See [the documentation][1] for more details on that.\r\n\r\nIn your case, even though the client has only processed a single message, all the other 6 messages in the queue have been dispatched to it. Messages in this dispatched-but-not-yet-acknowledged state are referred to as &quot;in delivery&quot; and can be tracked via the &quot;Delivering Count&quot; metric on the queue. Messages which are &quot;in delivery&quot; are still technically in the queue but they are not available to other consumers or queue browsers. Therefore, they do not show up on the web console although you can still list them via the `listDeliveringMessages` or `listDeliveringMessagesAsJSON` JMX operations on the QueueControl MBean. Once a message is acknowledged it is completely and permanently removed from the queue. If the consumer is closed before it acknowledges all of its &quot;in delivery&quot; messages then those messages will be put back onto the queue and made available to other consumers and queue browsers again.\r\n\r\nIf you want to disable this behavior so that the consumer only gets **one** message per network round-trip then you can set `consumerWindowSize=0` on your client&#39;s connection URL. This will allow all the other messages in the queue to remain available to other consumers and queue browsers. However, keep in mind that this will have an adverse impact on the consumer&#39;s performance.\r\n\r\n\r\n  [1]: https://activemq.apache.org/components/artemis/documentation/latest/flow-control.html#consumer-flow-control","title":"Error reading message from ActiveMQ Artemis queue","body":"<p>When a core JMS consumer starts receiving messages the broker dispatches more than just one message to it. This is a performance optimization so that the client doesn't have to make repeated network round-trips to the broker to receive additional messages. This behavior can be tuned using the <code>consumerWindowSize</code> URL parameter. See <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/flow-control.html#consumer-flow-control\" rel=\"nofollow noreferrer\">the documentation</a> for more details on that.</p>\n<p>In your case, even though the client has only processed a single message, all the other 6 messages in the queue have been dispatched to it. Messages in this dispatched-but-not-yet-acknowledged state are referred to as &quot;in delivery&quot; and can be tracked via the &quot;Delivering Count&quot; metric on the queue. Messages which are &quot;in delivery&quot; are still technically in the queue but they are not available to other consumers or queue browsers. Therefore, they do not show up on the web console although you can still list them via the <code>listDeliveringMessages</code> or <code>listDeliveringMessagesAsJSON</code> JMX operations on the QueueControl MBean. Once a message is acknowledged it is completely and permanently removed from the queue. If the consumer is closed before it acknowledges all of its &quot;in delivery&quot; messages then those messages will be put back onto the queue and made available to other consumers and queue browsers again.</p>\n<p>If you want to disable this behavior so that the consumer only gets <strong>one</strong> message per network round-trip then you can set <code>consumerWindowSize=0</code> on your client's connection URL. This will allow all the other messages in the queue to remain available to other consumers and queue browsers. However, keep in mind that this will have an adverse impact on the consumer's performance.</p>\n"}],"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77060211,"answer_count":1,"score":0,"last_activity_date":1694129754,"creation_date":1694077793,"question_id":77058154,"body_markdown":"I want to subtract the last message from an ActiveMQ Artemis queue. I have a lot of messages in the queue and when I read one message, the rest just disappear, but the message counter in the broker console shows 1 less. How can I make it show one less message when refreshing the page (this works, but when I break the consumer session)[![enter image description here](https://i.stack.imgur.com/nCZA8.png)](https://i.stack.imgur.com/nCZA8.png)\r\n\r\nThis is what happens after reading one message:\r\n[![enter image description here](https://i.stack.imgur.com/wF4J1.png)](https://i.stack.imgur.com/wF4J1.png)\r\n\r\n\r\n```\r\nprivate void getMessage() throws JMSException, NamingException {\r\n        Queue queue = (Queue) initialContext.lookup(&quot;dynamicQueues/&quot; + &quot;TestQueue&quot;);\r\n        if (messageConsumer == null){\r\n            messageConsumer = queueSession.createConsumer(queue);\r\n        }\r\n        TextMessage message = (TextMessage) messageConsumer.receive();\r\n        String msgBody = ((TextMessage) message).getText();\r\n        System.out.println(msgBody);\r\n    }\r\n```\r\n","title":"Error reading message from ActiveMQ Artemis queue","body":"<p>I want to subtract the last message from an ActiveMQ Artemis queue. I have a lot of messages in the queue and when I read one message, the rest just disappear, but the message counter in the broker console shows 1 less. How can I make it show one less message when refreshing the page (this works, but when I break the consumer session)<a href=\"https://i.stack.imgur.com/nCZA8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nCZA8.png\" alt=\"enter image description here\" /></a></p>\n<p>This is what happens after reading one message:\n<a href=\"https://i.stack.imgur.com/wF4J1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wF4J1.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>private void getMessage() throws JMSException, NamingException {\n        Queue queue = (Queue) initialContext.lookup(&quot;dynamicQueues/&quot; + &quot;TestQueue&quot;);\n        if (messageConsumer == null){\n            messageConsumer = queueSession.createConsumer(queue);\n        }\n        TextMessage message = (TextMessage) messageConsumer.receive();\n        String msgBody = ((TextMessage) message).getText();\n        System.out.println(msgBody);\n    }\n</code></pre>\n"},{"tags":["java","timer","synchronous"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1694121683,"post_id":77062408,"comment_id":135853551,"body_markdown":"This is a bad use of threading.  To execute methods in a given order, use a single thread: `first(); second();` just like that where you have the `first()` method call.  Can you give more information on exactly what you are trying to do?  I think your example is a bit too simple for us to understand what the real issue might be.","body":"This is a bad use of threading.  To execute methods in a given order, use a single thread: <code>first(); second();</code> just like that where you have the <code>first()</code> method call.  Can you give more information on exactly what you are trying to do?  I think your example is a bit too simple for us to understand what the real issue might be."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1694121799,"post_id":77062408,"comment_id":135853579,"body_markdown":"And if you want `first()` called first, then I don&#39;t understand that `print()` cancels the thread.  What is the real use of this method?","body":"And if you want <code>first()</code> called first, then I don&#39;t understand that <code>print()</code> cancels the thread.  What is the real use of this method?"},{"owner":{"account_id":29389877,"reputation":1,"user_id":22518517,"display_name":"Tarik"},"score":0,"creation_date":1694122939,"post_id":77062408,"comment_id":135853741,"body_markdown":"All method names are taken arbitrarily, as a simpler example. The point is to ensure that Timer.cancel() is executed synchronously so that run() is not called after.","body":"All method names are taken arbitrarily, as a simpler example. The point is to ensure that Timer.cancel() is executed synchronously so that run() is not called after."},{"owner":{"account_id":29389877,"reputation":1,"user_id":22518517,"display_name":"Tarik"},"score":0,"creation_date":1694124151,"post_id":77062408,"comment_id":135853890,"body_markdown":"Simply put, I need a guarantee that after calling cancel () there will be no more  run () calls. (I&#39;m sorry if this is a bad example. My first post)","body":"Simply put, I need a guarantee that after calling cancel () there will be no more  run () calls. (I&#39;m sorry if this is a bad example. My first post)"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1694124922,"post_id":77062408,"comment_id":135853986,"body_markdown":"Don&#39;t apologize. Instead, [edit] and clarify your question, adding all pertinent information in the question and not just in comments down here.","body":"Don&#39;t apologize. Instead, <a href=\"https://stackoverflow.com/posts/77062408/edit\">edit</a> and clarify your question, adding all pertinent information in the question and not just in comments down here."},{"owner":{"account_id":29389877,"reputation":1,"user_id":22518517,"display_name":"Tarik"},"score":0,"creation_date":1694125237,"post_id":77062408,"comment_id":135854015,"body_markdown":"Actually there is nothing to clarify. I laid it out as simply as I could.","body":"Actually there is nothing to clarify. I laid it out as simply as I could."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1694126522,"post_id":77062408,"comment_id":135854159,"body_markdown":"Why would the synchronized block accomplish anything? Who else is synchronizing on `this` that it&#39;s waiting for?","body":"Why would the synchronized block accomplish anything? Who else is synchronizing on <code>this</code> that it&#39;s waiting for?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1694126693,"post_id":77062408,"comment_id":135854171,"body_markdown":"Even if you put the whole `run()` is a synchronized block, there&#39;s no guarantee your empty block gets hit second.","body":"Even if you put the whole <code>run()</code> is a synchronized block, there&#39;s no guarantee your empty block gets hit second."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694128209,"creation_date":1694127839,"answer_id":77063296,"question_id":77062408,"body_markdown":"The `Timer` and `TimerTask` classes were supplanted by the Executors framework added to Java 5. This fact is noted in the Javadoc for those classes.\r\n\r\nAn [`ExecutorService`][1] object will process one or more tasks in one or more background threads. \r\n\r\nYou seem to have two goals in mind. \r\n\r\n - Run a series of tasks in order.\r\n - Halt the processing of further tasks upon some flag.\r\n\r\nBoth can be accomplished with an executor service. \r\n\r\nFor the first, use a single-threaded executor service. With only a single thread at its disposable, the executor service schedules each task to run one after another, in the order in which they were submitted.\r\n\r\nFor the second, I would signal a flag via an `AtomicBoolean` object, with your tasks written to look for them. With a single instance of `AtomicBoolean`, initialized before you set up your executor service, then reading and writing to the contained boolean value is [thread-safe][2].\r\n\r\nLet&#39;s take an example task that loops a few times, pretending each time to do some work which we simulate by sleeping the thread.\r\n\r\n```java\r\npackage work.basil.example.vthreads;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\nimport java.util.concurrent.atomic.AtomicBoolean;\r\n\r\npublic class SeriesOfTasks\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        SeriesOfTasks app = new SeriesOfTasks ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        System.out.println ( &quot;INFO - Demo starting. &quot; + Instant.now ( ) );\r\n        final AtomicBoolean keepGoingFlag = new AtomicBoolean ( true );\r\n        try (\r\n                ExecutorService executorService = Executors.newSingleThreadScheduledExecutor ( ) ;\r\n        )\r\n        {\r\n            executorService.submit ( new TellTime ( &quot;A&quot; , keepGoingFlag ) );\r\n            executorService.submit ( new TellTime ( &quot;B&quot; , keepGoingFlag ) );\r\n            executorService.submit ( new TellTime ( &quot;C&quot; , keepGoingFlag ) );\r\n            try { Thread.sleep ( Duration.ofSeconds ( 20 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n            keepGoingFlag.set ( false );\r\n            executorService.submit ( new TellTime ( &quot;D&quot; , keepGoingFlag ) );\r\n        }\r\n        System.out.println ( &quot;INFO - Demo ending. &quot; + Instant.now ( ) );\r\n    }\r\n}\r\n\r\nclass TellTime implements Runnable\r\n{\r\n    private final String id;\r\n    private final AtomicBoolean continueFlag;\r\n\r\n    public TellTime ( final String id , final AtomicBoolean continueFlag )\r\n    {\r\n        this.id = id;\r\n        this.continueFlag = continueFlag;\r\n    }\r\n\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        for ( int ordinal = 1 ; ordinal &lt;= 3 ; ordinal++ )\r\n        {\r\n            if ( this.continueFlag.get ( ) )\r\n            {\r\n                int seconds = ThreadLocalRandom.current ( ).nextInt ( 1 , 3 );\r\n                try { Thread.sleep ( Duration.ofSeconds ( seconds ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n                System.out.println ( &quot;Task &quot; + this.id + &quot; ordinal &quot; + ordinal + &quot; in thread id &quot; + Thread.currentThread ( ).threadId ( ) + &quot; says the time is &quot; + Instant.now ( ) );\r\n            } else\r\n            {\r\n                System.out.println ( &quot;Task &quot; + this.id + &quot; ordinal &quot; + ordinal + &quot; in thread id &quot; + Thread.currentThread ( ).threadId ( ) + &quot; found the flag set to FALSE at &quot; + Instant.now ( ) );\r\n                break;   // Else exit this loop.\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nINFO - Demo starting. 2023-09-07T23:01:10.086790Z\r\nTask A ordinal 1 in thread id 21 says the time is 2023-09-07T23:01:11.167055Z\r\nTask A ordinal 2 in thread id 21 says the time is 2023-09-07T23:01:13.229073Z\r\nTask A ordinal 3 in thread id 21 says the time is 2023-09-07T23:01:15.303675Z\r\nTask B ordinal 1 in thread id 21 says the time is 2023-09-07T23:01:16.579288Z\r\nTask B ordinal 2 in thread id 21 says the time is 2023-09-07T23:01:17.640376Z\r\nTask B ordinal 3 in thread id 21 says the time is 2023-09-07T23:01:19.712922Z\r\nTask C ordinal 1 in thread id 21 says the time is 2023-09-07T23:01:21.741175Z\r\nTask C ordinal 2 in thread id 21 says the time is 2023-09-07T23:01:23.813196Z\r\nTask C ordinal 3 in thread id 21 says the time is 2023-09-07T23:01:24.818768Z\r\nTask D ordinal 1 in thread id 21 found the flag set to FALSE at 2023-09-07T23:01:30.169407Z\r\nINFO - Demo ending. 2023-09-07T23:01:30.176363Z\r\n```\r\n\r\nIn that code we use try-with-resources syntax to automatically shutdown the executor service after all submitted tasks are done. If you want to stop the executor service from accepting more tasks, call `shutdown`. If you want to halt submitted tasks, call `shutdownNow` and write your task classes to be aware of possible interruption. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\r\n  [2]: https://en.wikipedia.org/wiki/Thread_safety","title":"Timer cancel() synchronization","body":"<p>The <code>Timer</code> and <code>TimerTask</code> classes were supplanted by the Executors framework added to Java 5. This fact is noted in the Javadoc for those classes.</p>\n<p>An <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\"><code>ExecutorService</code></a> object will process one or more tasks in one or more background threads.</p>\n<p>You seem to have two goals in mind.</p>\n<ul>\n<li>Run a series of tasks in order.</li>\n<li>Halt the processing of further tasks upon some flag.</li>\n</ul>\n<p>Both can be accomplished with an executor service.</p>\n<p>For the first, use a single-threaded executor service. With only a single thread at its disposable, the executor service schedules each task to run one after another, in the order in which they were submitted.</p>\n<p>For the second, I would signal a flag via an <code>AtomicBoolean</code> object, with your tasks written to look for them. With a single instance of <code>AtomicBoolean</code>, initialized before you set up your executor service, then reading and writing to the contained boolean value is <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\">thread-safe</a>.</p>\n<p>Let's take an example task that loops a few times, pretending each time to do some work which we simulate by sleeping the thread.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.vthreads;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ThreadLocalRandom;\nimport java.util.concurrent.atomic.AtomicBoolean;\n\npublic class SeriesOfTasks\n{\n    public static void main ( String[] args )\n    {\n        SeriesOfTasks app = new SeriesOfTasks ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        System.out.println ( &quot;INFO - Demo starting. &quot; + Instant.now ( ) );\n        final AtomicBoolean keepGoingFlag = new AtomicBoolean ( true );\n        try (\n                ExecutorService executorService = Executors.newSingleThreadScheduledExecutor ( ) ;\n        )\n        {\n            executorService.submit ( new TellTime ( &quot;A&quot; , keepGoingFlag ) );\n            executorService.submit ( new TellTime ( &quot;B&quot; , keepGoingFlag ) );\n            executorService.submit ( new TellTime ( &quot;C&quot; , keepGoingFlag ) );\n            try { Thread.sleep ( Duration.ofSeconds ( 20 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n            keepGoingFlag.set ( false );\n            executorService.submit ( new TellTime ( &quot;D&quot; , keepGoingFlag ) );\n        }\n        System.out.println ( &quot;INFO - Demo ending. &quot; + Instant.now ( ) );\n    }\n}\n\nclass TellTime implements Runnable\n{\n    private final String id;\n    private final AtomicBoolean continueFlag;\n\n    public TellTime ( final String id , final AtomicBoolean continueFlag )\n    {\n        this.id = id;\n        this.continueFlag = continueFlag;\n    }\n\n    @Override\n    public void run ( )\n    {\n        for ( int ordinal = 1 ; ordinal &lt;= 3 ; ordinal++ )\n        {\n            if ( this.continueFlag.get ( ) )\n            {\n                int seconds = ThreadLocalRandom.current ( ).nextInt ( 1 , 3 );\n                try { Thread.sleep ( Duration.ofSeconds ( seconds ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n                System.out.println ( &quot;Task &quot; + this.id + &quot; ordinal &quot; + ordinal + &quot; in thread id &quot; + Thread.currentThread ( ).threadId ( ) + &quot; says the time is &quot; + Instant.now ( ) );\n            } else\n            {\n                System.out.println ( &quot;Task &quot; + this.id + &quot; ordinal &quot; + ordinal + &quot; in thread id &quot; + Thread.currentThread ( ).threadId ( ) + &quot; found the flag set to FALSE at &quot; + Instant.now ( ) );\n                break;   // Else exit this loop.\n            }\n        }\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - Demo starting. 2023-09-07T23:01:10.086790Z\nTask A ordinal 1 in thread id 21 says the time is 2023-09-07T23:01:11.167055Z\nTask A ordinal 2 in thread id 21 says the time is 2023-09-07T23:01:13.229073Z\nTask A ordinal 3 in thread id 21 says the time is 2023-09-07T23:01:15.303675Z\nTask B ordinal 1 in thread id 21 says the time is 2023-09-07T23:01:16.579288Z\nTask B ordinal 2 in thread id 21 says the time is 2023-09-07T23:01:17.640376Z\nTask B ordinal 3 in thread id 21 says the time is 2023-09-07T23:01:19.712922Z\nTask C ordinal 1 in thread id 21 says the time is 2023-09-07T23:01:21.741175Z\nTask C ordinal 2 in thread id 21 says the time is 2023-09-07T23:01:23.813196Z\nTask C ordinal 3 in thread id 21 says the time is 2023-09-07T23:01:24.818768Z\nTask D ordinal 1 in thread id 21 found the flag set to FALSE at 2023-09-07T23:01:30.169407Z\nINFO - Demo ending. 2023-09-07T23:01:30.176363Z\n</code></pre>\n<p>In that code we use try-with-resources syntax to automatically shutdown the executor service after all submitted tasks are done. If you want to stop the executor service from accepting more tasks, call <code>shutdown</code>. If you want to halt submitted tasks, call <code>shutdownNow</code> and write your task classes to be aware of possible interruption.</p>\n"}],"owner":{"account_id":29389877,"reputation":1,"user_id":22518517,"display_name":"Tarik"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1694126442,"answer_count":1,"score":-2,"last_activity_date":1694128209,"creation_date":1694115645,"question_id":77062408,"body_markdown":"I&#39;m looking for a way to synchronize the cancel() method.\r\nThe expected result is the first() method is guaranteed to be called first.\r\n\r\n```\r\n timer = new Timer();\r\n timer.schedule(new TimerTask() {\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            //Simulation of a long task.\r\n            Thread.sleep(3000);\r\n        } catch(Exception e){\r\n        }\r\n            first();\r\n    }\r\n }, delayNoMatter, veryShortInterval);\r\n}\r\n\r\nvoid first() {\r\n    System.out.println(&quot;first&quot;);\r\n}\r\n\r\nvoid second() {\r\n//This method must be called last.\r\n    System.out.println(&quot;second&quot;);\r\n}\r\n\r\nvoid print() {\r\n    timer.cancel();\r\n    second();\r\n}\r\n```\r\n```\r\nExpected result:\r\n...\r\nfirst \r\nsecond\r\n```\r\nI tried to use an empty synchronization block, but there is an opinion that it is not desirable to use empty blocks.\r\n\r\n    timer = new Timer();\r\n     timer.schedule(new TimerTask() {\r\n        @Override\r\n        public void run() {\r\n        synchronized(o){\r\n            try {\r\n                //Simulation of a long task.\r\n                Thread.sleep(3000);\r\n            } catch(Exception e){\r\n            }\r\n                first();\r\n        }}\r\n     }, delayNoMatter, veryShortInterval);\r\n    }\r\n    \r\n    void first() {\r\n        System.out.println(&quot;first&quot;);\r\n    }\r\n    \r\n    void second() {\r\n    //This method must be called last.\r\n        System.out.println(&quot;second&quot;);\r\n    }\r\n    \r\n    void print() {\r\n        timer.cancel();\r\n        //I&#39;m not sure how correct this solution is. There is an opinion that using \r\n        //empty blocks is a bad way.\r\n        synchronyzed(o)\r\n        second();\r\n    }\r\n\r\n","title":"Timer cancel() synchronization","body":"<p>I'm looking for a way to synchronize the cancel() method.\nThe expected result is the first() method is guaranteed to be called first.</p>\n<pre><code> timer = new Timer();\n timer.schedule(new TimerTask() {\n    @Override\n    public void run() {\n        try {\n            //Simulation of a long task.\n            Thread.sleep(3000);\n        } catch(Exception e){\n        }\n            first();\n    }\n }, delayNoMatter, veryShortInterval);\n}\n\nvoid first() {\n    System.out.println(&quot;first&quot;);\n}\n\nvoid second() {\n//This method must be called last.\n    System.out.println(&quot;second&quot;);\n}\n\nvoid print() {\n    timer.cancel();\n    second();\n}\n</code></pre>\n<pre><code>Expected result:\n...\nfirst \nsecond\n</code></pre>\n<p>I tried to use an empty synchronization block, but there is an opinion that it is not desirable to use empty blocks.</p>\n<pre><code>timer = new Timer();\n timer.schedule(new TimerTask() {\n    @Override\n    public void run() {\n    synchronized(o){\n        try {\n            //Simulation of a long task.\n            Thread.sleep(3000);\n        } catch(Exception e){\n        }\n            first();\n    }}\n }, delayNoMatter, veryShortInterval);\n}\n\nvoid first() {\n    System.out.println(&quot;first&quot;);\n}\n\nvoid second() {\n//This method must be called last.\n    System.out.println(&quot;second&quot;);\n}\n\nvoid print() {\n    timer.cancel();\n    //I'm not sure how correct this solution is. There is an opinion that using \n    //empty blocks is a bad way.\n    synchronyzed(o)\n    second();\n}\n</code></pre>\n"},{"tags":["java","eclipse","java-17"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1693941065,"post_id":77047147,"comment_id":135825222,"body_markdown":"Why should it not compile? Please share all the details.","body":"Why should it not compile? Please share all the details."},{"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"score":0,"creation_date":1693941604,"post_id":77047147,"comment_id":135825318,"body_markdown":"i&#39;m reading a book that says, it must be a subType only, when i test that on an IDE it does compile, i&#39;m asking to make sure that&#39;s a book error","body":"i&#39;m reading a book that says, it must be a subType only, when i test that on an IDE it does compile, i&#39;m asking to make sure that&#39;s a book error"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1693941885,"post_id":77047147,"comment_id":135825377,"body_markdown":"&quot;i&#39;m using eclipse&quot; from what I remember Eclipse uses its own compiler. What you see is probably another difference between it and &quot;official compiler&quot;.","body":"&quot;i&#39;m using eclipse&quot; from what I remember Eclipse uses its own compiler. What you see is probably another difference between it and &quot;official compiler&quot;."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1693942006,"post_id":77047147,"comment_id":135825396,"body_markdown":"Anyway based on https://stackoverflow.com/a/74978688 it looks like compilation error was expected, which suggests bug in Eclipse compiler.","body":"Anyway based on <a href=\"https://stackoverflow.com/a/74978688\">stackoverflow.com/a/74978688</a> it looks like compilation error was expected, which suggests bug in Eclipse compiler."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1693942717,"post_id":77047147,"comment_id":135825507,"body_markdown":"Interesting. This does not compile for me either, using javac (not Eclipse).  But I cannot find anything in the Java Language Specification that says specifying the same type in an instanceof pattern should be an error.","body":"Interesting. This does not compile for me either, using javac (not Eclipse).  But I cannot find anything in the Java Language Specification that says specifying the same type in an instanceof pattern should be an error."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1693943564,"post_id":77047147,"comment_id":135825646,"body_markdown":"@VGR Hello. Regarding &quot;*But I cannot find anything in the Java Language Specification that says specifying the same type in an instanceof pattern should be an error*&quot; how about fragment &quot;If the type of the `RelationalExpression` is a subtype of the type of the `Pattern`, then a compile-time error occurs.&quot; from https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.20.2? IMO this can be applied here if we consider each reference type as subtype of itself (in other words Double can be considered as subtype of Double).","body":"@VGR Hello. Regarding &quot;<i>But I cannot find anything in the Java Language Specification that says specifying the same type in an instanceof pattern should be an error</i>&quot; how about fragment &quot;If the type of the <code>RelationalExpression</code> is a subtype of the type of the <code>Pattern</code>, then a compile-time error occurs.&quot; from <a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.20.2\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se19/html/&hellip;</a>? IMO this can be applied here if we consider each reference type as subtype of itself (in other words Double can be considered as subtype of Double)."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1693943919,"post_id":77047147,"comment_id":135825705,"body_markdown":"@Pshemo I did see that, but I have doubts about whether that was the intended meaning of ‚Äúsubtype.‚Äù","body":"@Pshemo I did see that, but I have doubts about whether that was the intended meaning of ‚Äúsubtype.‚Äù"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1693993073,"post_id":77047147,"comment_id":135831565,"body_markdown":"It&#39;s a bug in the eclipse compiler for java.","body":"It&#39;s a bug in the eclipse compiler for java."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1694006047,"post_id":77047147,"comment_id":135834312,"body_markdown":"@VGR it seems, it was truly meant that way but JDK&#160;21 is about to get rid of that rule.","body":"@VGR it seems, it was truly meant that way but JDK 21 is about to get rid of that rule."}],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1694127716,"creation_date":1693942424,"answer_id":77047289,"question_id":77047147,"body_markdown":"That syntax is part of a relatively new feature (JDK 16) in Java which they call *pattern matching* and is detailed in [JEP 394](https://openjdk.org/jeps/394).\r\n\r\nThe example is trivial if the runtime type of the variable equals its declared type. So let&#39;s pretend we instead had a\r\n\r\n    Object value;\r\n\r\nwhose runtime type happened to be `Double`.\r\n\r\n```\r\nif (value instanceof Double) {\r\n  ...\r\n}\r\n```\r\n\r\nThe inside of this `if` statement will run if `value` is a `Double` at runtime. However, the *compile-time* type of that variable is still `Object`, which led to a very common (and redundant) paradigm.\r\n\r\n```\r\nif (value instanceof Double) {\r\n  Double data = (Double)value; // This cast ALWAYS succeeds\r\n  ...\r\n}\r\n```\r\n\r\nSince, after checking the type, we probably want to use the variable as that type.\r\n\r\nSo with JEP 394, we can write\r\n\r\n```\r\nif (value instanceof Double data) {\r\n  ...\r\n}\r\n```\r\n\r\nwhich does the typecheck *and* the cast in one go. On top of that, the variable is bound *immediately*, and is available in later conjunctive clauses.\r\n\r\n```\r\nif ((value instanceof Double data) &amp;&amp; (data.doubleValue() &gt; 0.0)) {\r\n  ...\r\n}\r\n```\r\n\r\nThis works since `data` is a `Double`, not an `Object`. As opposed to the more verbose pre-pattern-matching syntax\r\n\r\n\r\n```\r\nif ((value instanceof Double) &amp;&amp; (((Double)value).doubleValue() &gt; 0.0)) {\r\n  ...\r\n}\r\n```\r\n\r\nor\r\n\r\n\r\n```\r\nif (value instanceof Double) {\r\n  Double data = (Double)value;\r\n  if (data.doubleValue() &gt; 0.0) {\r\n    ...\r\n  }\r\n}\r\n```\r\n\r\nIn your particular case, since both the declared and runtime type are `Double`, the extra variable doesn&#39;t do you any favors. It&#39;s a degenerate case where the pattern matching syntax isn&#39;t useful. But it&#39;s still allowed. Depending on compiler, you might get a warning about this.","title":"JAVA 17 : Pattern matching subtype","body":"<p>That syntax is part of a relatively new feature (JDK 16) in Java which they call <em>pattern matching</em> and is detailed in <a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\">JEP 394</a>.</p>\n<p>The example is trivial if the runtime type of the variable equals its declared type. So let's pretend we instead had a</p>\n<pre><code>Object value;\n</code></pre>\n<p>whose runtime type happened to be <code>Double</code>.</p>\n<pre><code>if (value instanceof Double) {\n  ...\n}\n</code></pre>\n<p>The inside of this <code>if</code> statement will run if <code>value</code> is a <code>Double</code> at runtime. However, the <em>compile-time</em> type of that variable is still <code>Object</code>, which led to a very common (and redundant) paradigm.</p>\n<pre><code>if (value instanceof Double) {\n  Double data = (Double)value; // This cast ALWAYS succeeds\n  ...\n}\n</code></pre>\n<p>Since, after checking the type, we probably want to use the variable as that type.</p>\n<p>So with JEP 394, we can write</p>\n<pre><code>if (value instanceof Double data) {\n  ...\n}\n</code></pre>\n<p>which does the typecheck <em>and</em> the cast in one go. On top of that, the variable is bound <em>immediately</em>, and is available in later conjunctive clauses.</p>\n<pre><code>if ((value instanceof Double data) &amp;&amp; (data.doubleValue() &gt; 0.0)) {\n  ...\n}\n</code></pre>\n<p>This works since <code>data</code> is a <code>Double</code>, not an <code>Object</code>. As opposed to the more verbose pre-pattern-matching syntax</p>\n<pre><code>if ((value instanceof Double) &amp;&amp; (((Double)value).doubleValue() &gt; 0.0)) {\n  ...\n}\n</code></pre>\n<p>or</p>\n<pre><code>if (value instanceof Double) {\n  Double data = (Double)value;\n  if (data.doubleValue() &gt; 0.0) {\n    ...\n  }\n}\n</code></pre>\n<p>In your particular case, since both the declared and runtime type are <code>Double</code>, the extra variable doesn't do you any favors. It's a degenerate case where the pattern matching syntax isn't useful. But it's still allowed. Depending on compiler, you might get a warning about this.</p>\n"},{"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1693952090,"post_id":77047977,"comment_id":135826845,"body_markdown":"BTW the term  &quot;reflexive&quot; is *probably* meant to say that `T` is a supertype of itself (`T`)","body":"BTW the term  &quot;reflexive&quot; is <i>probably</i> meant to say that <code>T</code> is a supertype of itself (<code>T</code>)"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1694005950,"post_id":77047977,"comment_id":135834293,"body_markdown":"Forbidding something just because it seems pointless, is a strange reasoning. Consistency with other uses of `instanceof` looks far more important to me.  It‚Äôs not even true that this test will always succeed, as it will fail if the runtime value is `null`. Further, it contradicts the way, pattern matching is supposed to evolve. Consequently, the current state of affairs is that JDK&#160;21 will drop this rule.","body":"Forbidding something just because it seems pointless, is a strange reasoning. Consistency with other uses of <code>instanceof</code> looks far more important to me.  It‚Äôs not even true that this test will always succeed, as it will fail if the runtime value is <code>null</code>. Further, it contradicts the way, pattern matching is supposed to evolve. Consequently, the current state of affairs is that JDK 21 will drop this rule."}],"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1694020845,"creation_date":1693951216,"answer_id":77047977,"question_id":77047147,"body_markdown":"[JLS-15.20.2](https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.20.2) explicitly says that this is not allowed:\r\n\r\n&gt; If the type of the RelationalExpression is a subtype of the type of the Pattern, then a compile-time error occurs\r\n\r\nRegarding the meaning of &quot;subtype&quot;, [JLS-4.10](https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.10) states:\r\n\r\n&gt; The _supertypes_ of a type are obtained by reflexive and transitive closure over the direct supertype relation, written `S &gt;1 T`, which is defined by rules given later in this section. We write `S :&gt; T` to indicate that the supertype relation holds between S and T.\r\n&gt; \r\n&gt; S is a _proper supertype_ of T, written `S &gt; T`, if `S :&gt; T` and `S ‚â† T`.\r\n&gt;\r\n&gt; The _subtypes_ of a type T are all types U such that T is a supertype of U, and the null type. We write `T &lt;: S` to indicate that that the subtype relation holds between types T and S.\r\n&gt;\r\n&gt; T is a _proper subtype_ of S, written `T &lt; S`, if `T &lt;: S` and `S ‚â† T`.\r\n\r\nFrom the wording it is clear that a type `T` must be a subtype (and supertype) of itself. If `T` cannot be a subtype (supertype) of itself it would be unnecessary to define the terms &quot;proper subtype&quot; and &quot;proper supertype&quot;\r\n\r\n-----\r\nThe reason for this decision is documented in [JEP-394](https://openjdk.org/jeps/394):\r\n\r\n&gt; Make it a compile-time error for a pattern instanceof expression to compare an expression of type S against a pattern of type T, where S is a subtype of T. (This instanceof expression will always succeed and is then pointless. The opposite case, where a pattern match will always fail, is already a compile-time error.)\r\n\r\n----\r\nNote that (as Holger has pointed out) the upcoming version Java 21 will drop the requirement that RelationalExpression must not be a subtype of the type of the Pattern. That means that with Java 21 your code will compile.","title":"JAVA 17 : Pattern matching subtype","body":"<p><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.20.2\" rel=\"nofollow noreferrer\">JLS-15.20.2</a> explicitly says that this is not allowed:</p>\n<blockquote>\n<p>If the type of the RelationalExpression is a subtype of the type of the Pattern, then a compile-time error occurs</p>\n</blockquote>\n<p>Regarding the meaning of &quot;subtype&quot;, <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.10\" rel=\"nofollow noreferrer\">JLS-4.10</a> states:</p>\n<blockquote>\n<p>The <em>supertypes</em> of a type are obtained by reflexive and transitive closure over the direct supertype relation, written <code>S &gt;1 T</code>, which is defined by rules given later in this section. We write <code>S :&gt; T</code> to indicate that the supertype relation holds between S and T.</p>\n<p>S is a <em>proper supertype</em> of T, written <code>S &gt; T</code>, if <code>S :&gt; T</code> and <code>S ‚â† T</code>.</p>\n<p>The <em>subtypes</em> of a type T are all types U such that T is a supertype of U, and the null type. We write <code>T &lt;: S</code> to indicate that that the subtype relation holds between types T and S.</p>\n<p>T is a <em>proper subtype</em> of S, written <code>T &lt; S</code>, if <code>T &lt;: S</code> and <code>S ‚â† T</code>.</p>\n</blockquote>\n<p>From the wording it is clear that a type <code>T</code> must be a subtype (and supertype) of itself. If <code>T</code> cannot be a subtype (supertype) of itself it would be unnecessary to define the terms &quot;proper subtype&quot; and &quot;proper supertype&quot;</p>\n<hr />\n<p>The reason for this decision is documented in <a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\">JEP-394</a>:</p>\n<blockquote>\n<p>Make it a compile-time error for a pattern instanceof expression to compare an expression of type S against a pattern of type T, where S is a subtype of T. (This instanceof expression will always succeed and is then pointless. The opposite case, where a pattern match will always fail, is already a compile-time error.)</p>\n</blockquote>\n<hr />\n<p>Note that (as Holger has pointed out) the upcoming version Java 21 will drop the requirement that RelationalExpression must not be a subtype of the type of the Pattern. That means that with Java 21 your code will compile.</p>\n"}],"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694127716,"creation_date":1693940803,"question_id":77047147,"body_markdown":"I&#39;m using Java 17, the last line shouldnt compile, but when i&#39;m using eclipse it does compile, now i&#39;m confused should the value be a subtype or it can be anything?\r\n\r\n    Double value = 123.3;\r\n    if(value instanceof Double ) {}\r\n    if(value instanceof Double data) {} // DOES NOT COMPILE","title":"JAVA 17 : Pattern matching subtype","body":"<p>I'm using Java 17, the last line shouldnt compile, but when i'm using eclipse it does compile, now i'm confused should the value be a subtype or it can be anything?</p>\n<pre><code>Double value = 123.3;\nif(value instanceof Double ) {}\nif(value instanceof Double data) {} // DOES NOT COMPILE\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9937,"page":197,"page_size":100}
